{"version":3,"file":"MyCourses.js","sources":["webpack://[name]/./src/components/my-courses/my-courses.tsx"],"sourcesContent":["import { __extends } from \"tslib\";\nimport * as React from 'react';\nimport { hiddenCoursesRepo } from '../../repos/hidden-courses-repo';\nimport { preserveImpersonationQuery } from '../../access-control';\nvar MyCourses = /** @class */ (function (_super) {\n    __extends(MyCourses, _super);\n    function MyCourses(props) {\n        var _this = _super.call(this, props) || this;\n        _this.state = {\n            courses: [],\n            isLoading: true\n        };\n        _this.updateHiddenCoursesState = _this.updateHiddenCoursesState.bind(_this);\n        return _this;\n    }\n    MyCourses.prototype.componentDidMount = function () {\n        hiddenCoursesRepo.subscribe(this.updateHiddenCoursesState, { fullCourse: false });\n    };\n    MyCourses.prototype.updateHiddenCoursesState = function (courses) {\n        this.setState({ courses: courses, isLoading: false });\n    };\n    MyCourses.prototype.componentWillUnmount = function () {\n        hiddenCoursesRepo.unsubscribe(this.updateHiddenCoursesState);\n    };\n    MyCourses.prototype.getCourseUrl = function (courseId) {\n        return preserveImpersonationQuery(this.props.viewCourseUrl, { courseId: courseId });\n    };\n    MyCourses.prototype.render = function () {\n        var _this = this;\n        var viewCourseUrl = this.props.viewCourseUrl;\n        var _a = this.state, isLoading = _a.isLoading, error = _a.error, courses = _a.courses;\n        var visibleCourses = this.state.courses.filter(function (c) { return c.visible; });\n        return (React.createElement(React.Fragment, null, isLoading ? (React.createElement(\"li\", { className: \"lvl2 header\" },\n            React.createElement(\"a\", null, \"Laddar...\"))) : error ? (React.createElement(\"li\", { className: \"lv12\" },\n            React.createElement(\"a\", null, \"Kunde inte ladda kurser.\"))) : (visibleCourses.map(function (_a) {\n            var name = _a.name, id = _a.id;\n            return (React.createElement(\"li\", { key: id, className: \"lvl2\" },\n                React.createElement(\"a\", { href: _this.getCourseUrl(id) }, name)));\n        }))));\n    };\n    return MyCourses;\n}(React.Component));\nexport { MyCourses };\n"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}