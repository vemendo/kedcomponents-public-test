var testpagecoursebuilder =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// install a JSONP callback for chunk loading
/******/ 	function webpackJsonpCallback(data) {
/******/ 		var chunkIds = data[0];
/******/ 		var moreModules = data[1];
/******/ 		var executeModules = data[2];
/******/
/******/ 		// add "moreModules" to the modules object,
/******/ 		// then flag all "chunkIds" as loaded and fire callback
/******/ 		var moduleId, chunkId, i = 0, resolves = [];
/******/ 		for(;i < chunkIds.length; i++) {
/******/ 			chunkId = chunkIds[i];
/******/ 			if(installedChunks[chunkId]) {
/******/ 				resolves.push(installedChunks[chunkId][0]);
/******/ 			}
/******/ 			installedChunks[chunkId] = 0;
/******/ 		}
/******/ 		for(moduleId in moreModules) {
/******/ 			if(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {
/******/ 				modules[moduleId] = moreModules[moduleId];
/******/ 			}
/******/ 		}
/******/ 		if(parentJsonpFunction) parentJsonpFunction(data);
/******/
/******/ 		while(resolves.length) {
/******/ 			resolves.shift()();
/******/ 		}
/******/
/******/ 		// add entry modules from loaded chunk to deferred list
/******/ 		deferredModules.push.apply(deferredModules, executeModules || []);
/******/
/******/ 		// run deferred modules when all chunks ready
/******/ 		return checkDeferredModules();
/******/ 	};
/******/ 	function checkDeferredModules() {
/******/ 		var result;
/******/ 		for(var i = 0; i < deferredModules.length; i++) {
/******/ 			var deferredModule = deferredModules[i];
/******/ 			var fulfilled = true;
/******/ 			for(var j = 1; j < deferredModule.length; j++) {
/******/ 				var depId = deferredModule[j];
/******/ 				if(installedChunks[depId] !== 0) fulfilled = false;
/******/ 			}
/******/ 			if(fulfilled) {
/******/ 				deferredModules.splice(i--, 1);
/******/ 				result = __webpack_require__(__webpack_require__.s = deferredModule[0]);
/******/ 			}
/******/ 		}
/******/
/******/ 		return result;
/******/ 	}
/******/
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// object to store loaded and loading chunks
/******/ 	// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 	// Promise = chunk loading, 0 = chunk loaded
/******/ 	var installedChunks = {
/******/ 		"testpagecoursebuilder": 0
/******/ 	};
/******/
/******/ 	var deferredModules = [];
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	var jsonpArray = window["webpackJsonp_name_"] = window["webpackJsonp_name_"] || [];
/******/ 	var oldJsonpFunction = jsonpArray.push.bind(jsonpArray);
/******/ 	jsonpArray.push = webpackJsonpCallback;
/******/ 	jsonpArray = jsonpArray.slice();
/******/ 	for(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);
/******/ 	var parentJsonpFunction = oldJsonpFunction;
/******/
/******/
/******/ 	// add entry module to deferred list
/******/ 	deferredModules.push(["./src/test/testpage-coursebuilder.tsx","vendors"]);
/******/ 	// run deferred modules when ready
/******/ 	return checkDeferredModules();
/******/ })
/************************************************************************/
/******/ ({

/***/ "./kedbackend/KED.Backend.API/schema.json":
/*!************************************************!*\
  !*** ./kedbackend/KED.Backend.API/schema.json ***!
  \************************************************/
/*! exports provided: accessClaimDefinitions, realmClaim, specialRoles, defaultAccessClaimTypes, defaultAcl, tables, default */
/***/ (function(module) {

module.exports = {"accessClaimDefinitions":{"email":"{http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress}","role":"{http://schemas.microsoft.com/ws/2008/06/identity/claims/role}","school":"{school}","schoolRole":"{school}/{http://schemas.microsoft.com/ws/2008/06/identity/claims/role}","tutorFor":"{tutorFor}"},"realmClaim":"realm","specialRoles":{"userRole":"USER","adminRole":"ADMIN"},"defaultAccessClaimTypes":["role"],"defaultAcl":["role:USER:R"],"tables":{"branches":{"accessClaimTypes":["role","schoolRole","email"],"sharingAccessPerRole":{"USER":{"email":["*"],"schoolRole":["*"],"role":["*"]}},"relationships":{"parents":"branches","approvedChildren":"branches"}},"global":{"accessClaimTypes":["role","schoolRole"],"relationships":{"courseInstances":"courseInstances"}},"courseInstances":{"accessClaimTypes":["role","schoolRole"],"sharingAccessPerRole":{"USER":{"schoolRole":["*"],"role":["*"]}},"defaultAcl":["role:USER:R","schoolRole:{school}/EMPLOYEE:S"],"relationships":{"abilities":"abilities","centralContent":"central-content","knowledgeRequirements":"knowledge-requirements","blocks":"courseBlocks","tabs":"courseTabs"}},"courseBlocks":{"accessClaimTypes":["role","schoolRole"],"sharingAccessPerRole":{"USER":{"schoolRole":["*"],"role":["*"]}},"defaultAcl":["role:USER:R","schoolRole:{school}/EMPLOYEE:S"],"relationships":{"abilities":"abilities","centralContent":"central-content","knowledgeRequirements":"knowledge-requirements","tabs":"courseTabs","tasks":"tasks"}},"courseTabs":{"accessClaimTypes":["role","schoolRole"],"sharingAccessPerRole":{"USER":{"schoolRole":["*"],"role":["*"]}},"defaultAcl":["role:USER:R","schoolRole:{school}/EMPLOYEE:S"],"relationships":{"abilities":"abilities","centralContent":"central-content","knowledgeRequirements":"knowledge-requirements","contents":"courseContents"}},"courseContents":{"accessClaimTypes":["role","schoolRole"],"sharingAccessPerRole":{"USER":{"schoolRole":["*"],"role":["*"]}},"defaultAcl":["role:USER:R","schoolRole:{school}/EMPLOYEE:S"],"relationships":{"tasks":"tasks"}},"weekplans":{"accessClaimTypes":["email","tutorFor"],"sharingAccessPerRole":{"USER":{"email":["{email}:*","{tutorFor}:*"],"tutorFor":["{tutorFor}:*"]}},"defaultAcl":["email:{email}:S"]},"weekplans-ks":{"accessClaimTypes":["email","tutorFor"],"sharingAccessPerRole":{"USER":{"email":["{email}:*","{tutorFor}:*"],"tutorFor":["{tutorFor}:*"]}},"defaultAcl":["email:{email}:S"]},"usertasks":{"accessClaimTypes":["email","schoolRole","tutorFor"],"sharingAccessPerRole":{"USER":{"email":["{email}:*","{tutorFor}:*"],"schoolRole":["{school}/EMPLOYEE:*"],"tutorFor":["{tutorFor}:*"]}},"defaultAcl":["email:{email}:S"],"relationships":{"task":"tasks","course":"courses"}},"userhiddencourses":{"accessClaimTypes":["email"],"sharingAccessPerRole":{"USER":{"email":["{email}:*"]}},"defaultAcl":["email:{email}:S"],"relationships":{}},"usercalendarvisibility":{"accessClaimTypes":["email"],"sharingAccessPerRole":{"USER":{"email":["{email}:*"]}},"defaultAcl":["email:{email}:S"],"relationships":{}},"subjects":{"relationships":{"courseTemplates":"courses","abilities":"abilities"}},"schools":{"accessClaimTypes":["role","schoolRole"],"relationships":{"courses":"courses","activeCourses":"courses"}},"courses":{"accessClaimTypes":["role","schoolRole"],"sharingAccessPerRole":{"EMPLOYEE":{"schoolRole":["{school}/EMPLOYEE:*"],"role":["USER:R"]}},"defaultAcl":["schoolRole:{school}/EMPLOYEE:*"],"relationships":{"templateChain":"courses","centralContent":"central-content","knowledgeRequirements":"knowledge-requirements","abilities":"abilities","images":"images","tasks":"tasks"}},"tasks":{"accessClaimTypes":["role","schoolRole"],"sharingAccessPerRole":{"EMPLOYEE":{"schoolRole":["{school}/EMPLOYEE:*"],"role":["USER:R"]}},"defaultAcl":["schoolRole:{school}/EMPLOYEE:S","role:USER:R"],"relationships":{"knowledgeRequirements":"knowledge-requirements","centralContent":"central-content","abilities":"abilities"}},"images":{"accessClaimTypes":["role","schoolRole","email"],"sharingAccessPerRole":{"EMPLOYEE":{"schoolRole":["{school}/EMPLOYEE:*"],"role":["USER:R"]},"USER":{"email":["{email}:*"]}}},"central-content":{"accessClaimTypes":["role"],"defaultAcl":["role:USER:R"]},"knowledge-requirements":{"accessClaimTypes":["role"],"defaultAcl":["role:USER:R"]},"abilities":{"accessClaimTypes":["role"],"defaultAcl":["role:USER:R"]},"notes":{"accessClaimTypes":["email"],"sharingAccessPerRole":{"USER":{"email":["{email}:*"]}},"defaultAcl":["email:{email}:S"],"relationships":{}}}};

/***/ }),

/***/ "./kedbackend/client.js":
/*!******************************!*\
  !*** ./kedbackend/client.js ***!
  \******************************/
/*! exports provided: KedBearerProvider, RestClient, HttpError, KedBackendClient, BatchRunner, createUUID, avoidSimultanousCalls, getGlobalId, computePredestinatedId, updateArray, DocumentAccess, hasAccess */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./js/dist/js/ked-backend-client */ "./kedbackend/js/dist/js/ked-backend-client/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBearerProvider", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["KedBearerProvider"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RestClient", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["RestClient"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "HttpError", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["HttpError"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendClient", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["KedBackendClient"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BatchRunner", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["BatchRunner"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createUUID", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["createUUID"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "avoidSimultanousCalls", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["avoidSimultanousCalls"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getGlobalId", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["getGlobalId"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "computePredestinatedId", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["computePredestinatedId"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "updateArray", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["updateArray"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DocumentAccess", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["DocumentAccess"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "hasAccess", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["hasAccess"]; });



/***/ }),

/***/ "./kedbackend/clientweb.js":
/*!*********************************!*\
  !*** ./kedbackend/clientweb.js ***!
  \*********************************/
/*! exports provided: storage, WebServerBearerProvider, isomorphic, KedBackendClientWeb */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _js_dist_js_ked_backend_client_web__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./js/dist/js/ked-backend-client-web */ "./kedbackend/js/dist/js/ked-backend-client-web/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "storage", function() { return _js_dist_js_ked_backend_client_web__WEBPACK_IMPORTED_MODULE_0__["storage"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "WebServerBearerProvider", function() { return _js_dist_js_ked_backend_client_web__WEBPACK_IMPORTED_MODULE_0__["WebServerBearerProvider"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "isomorphic", function() { return _js_dist_js_ked_backend_client_web__WEBPACK_IMPORTED_MODULE_0__["isomorphic"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendClientWeb", function() { return _js_dist_js_ked_backend_client_web__WEBPACK_IMPORTED_MODULE_0__["KedBackendClientWeb"]; });



/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client-web/bearer-storage-sessionstorage.js":
/*!***************************************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client-web/bearer-storage-sessionstorage.js ***!
  \***************************************************************************************/
/*! exports provided: BearerStorageSessionStorage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BearerStorageSessionStorage", function() { return BearerStorageSessionStorage; });
var BearerStorageSessionStorage = /** @class */ (function () {
    function BearerStorageSessionStorage() {
    }
    BearerStorageSessionStorage.prototype.save = function (id, tokenInfo) {
        sessionStorage.setItem("bearer-" + id, JSON.stringify(tokenInfo));
    };
    BearerStorageSessionStorage.prototype.load = function (id) {
        try {
            var json = sessionStorage.getItem("bearer-" + id);
            return Promise.resolve(json ? JSON.parse(json) : { token: null, expires: 0 });
        }
        catch (ex) {
            return Promise.resolve({ token: null, expires: 0 });
        }
    };
    return BearerStorageSessionStorage;
}());

//# sourceMappingURL=bearer-storage-sessionstorage.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client-web/hash-restorer.js":
/*!***********************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client-web/hash-restorer.js ***!
  \***********************************************************************/
/*! exports provided: rememberHashLocation */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rememberHashLocation", function() { return rememberHashLocation; });
var redirHash = sessionStorage.getItem("redir-hash");
if (redirHash)
    try {
        var _a = JSON.parse(redirHash), time = _a.time, hash = _a.hash;
        if (time && time > Date.now() - 60000) {
            sessionStorage.removeItem("redir-hash");
            location.hash = hash;
        }
    }
    catch (_) { }
function rememberHashLocation() {
    sessionStorage.setItem("redir-hash", JSON.stringify({ time: Date.now(), hash: location.hash }));
}
//# sourceMappingURL=hash-restorer.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client-web/index.js":
/*!***************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client-web/index.js ***!
  \***************************************************************/
/*! exports provided: storage, WebServerBearerProvider, isomorphic, KedBackendClientWeb */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "storage", function() { return storage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WebServerBearerProvider", function() { return WebServerBearerProvider; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isomorphic", function() { return isomorphic; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedBackendClientWeb", function() { return KedBackendClientWeb; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _ked_backend_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ked-backend-client */ "./kedbackend/js/dist/js/ked-backend-client/index.js");
/* harmony import */ var _bearer_storage_sessionstorage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./bearer-storage-sessionstorage */ "./kedbackend/js/dist/js/ked-backend-client-web/bearer-storage-sessionstorage.js");
/* harmony import */ var _ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../ked-backend-client/utils */ "./kedbackend/js/dist/js/ked-backend-client/utils.js");
/* harmony import */ var _ked_model_migrator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../ked-model-migrator */ "./kedbackend/js/dist/js/ked-model-migrator/index.js");
/* harmony import */ var _hash_restorer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./hash-restorer */ "./kedbackend/js/dist/js/ked-backend-client-web/hash-restorer.js");







Object(_ked_model_migrator__WEBPACK_IMPORTED_MODULE_4__["KedModelMigratorMixin"])(_ked_backend_client__WEBPACK_IMPORTED_MODULE_1__["KedBackendClient"].prototype);
var storage = new _bearer_storage_sessionstorage__WEBPACK_IMPORTED_MODULE_2__["BearerStorageSessionStorage"]();
var timeOfPageLoad = Date.now();
var WebServerBearerProvider = /** @class */ (function () {
    function WebServerBearerProvider(tokenPath, tokenResponseMapper, tokenId) {
        this.tokenPath = tokenPath;
        this.tokenResponseMapper = tokenResponseMapper;
        this.tokenId = tokenId;
        this.tokenInfo = { token: null, expires: 0 };
        this.getBearer = Object(_ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_3__["avoidSimultanousCalls"])(this.getBearer.bind(this));
        this.refreshBearer = Object(_ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_3__["avoidSimultanousCalls"])(this.refreshBearer.bind(this));
    }
    WebServerBearerProvider.prototype.getBearer = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (!!this.tokenInfo.token) return [3 /*break*/, 2];
                        if (!this.tokenId) return [3 /*break*/, 2];
                        _a = this;
                        return [4 /*yield*/, storage.load(this.tokenId)];
                    case 1:
                        _a.tokenInfo = _b.sent();
                        _b.label = 2;
                    case 2:
                        if (!(this.tokenInfo.expires < Date.now())) return [3 /*break*/, 4];
                        return [4 /*yield*/, this.refreshBearer()];
                    case 3:
                        _b.sent();
                        _b.label = 4;
                    case 4: return [2 /*return*/, this.tokenInfo];
                }
            });
        });
    };
    WebServerBearerProvider.prototype.refreshBearer = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, _c, _d;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_e) {
                switch (_e.label) {
                    case 0: return [4 /*yield*/, fetch(this.tokenPath, {
                            headers: { Accept: "text/plain; application/json" },
                            redirect: 'manual',
                            cache: 'no-cache',
                            credentials: "same-origin"
                        })];
                    case 1:
                        res = _e.sent();
                        if (res.status === 302 || (!res.status && res.type === "opaqueredirect")) {
                            // User session timed out and server wants to redirect entire page to login page
                            // Time to reload current page to force a redirect of the entire page instead for
                            // just redirecting to /api/token or whatever.
                            if (Date.now() - timeOfPageLoad > 60000) { // prohibit endless loop of reloading self.
                                this.wantsRedirect = true; // So that listeners to onbeforeunload could show alternate message.
                                console.log("Redirect wanted. Reload page.");
                                Object(_hash_restorer__WEBPACK_IMPORTED_MODULE_5__["rememberHashLocation"])();
                                window.location.reload(true);
                                throw new _ked_backend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"](302, "Redirected");
                            }
                        }
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = Error.bind;
                        _b = "HTTP" + res.status + " ";
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(Error, [void 0, _b + (_e.sent())]))();
                    case 3:
                        _c = this;
                        _d = this.tokenResponseMapper;
                        return [4 /*yield*/, res.text()];
                    case 4:
                        _c.tokenInfo = _d.apply(this, [_e.sent()]);
                        storage.save(this.tokenId, this.tokenInfo);
                        return [2 /*return*/, this.tokenInfo];
                }
            });
        });
    };
    return WebServerBearerProvider;
}());

var isomorphic = { fetch: fetch.bind(self), btoa: btoa.bind(self) };
var KedBackendClientWeb = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](KedBackendClientWeb, _super);
    function KedBackendClientWeb(apiBaseUrl, providerOrTokenPath, options) {
        var _this = this;
        var bearerProvider = typeof providerOrTokenPath !== 'string' ?
            providerOrTokenPath :
            new WebServerBearerProvider(providerOrTokenPath, (options && options.tokenResponseMapper) || (function (x) { return ({ token: x, expires: Date.now() + 59 * 60 * 60 }); }), options && options.tokenId);
        _this = _super.call(this, isomorphic, bearerProvider, apiBaseUrl) || this;
        return _this;
    }
    return KedBackendClientWeb;
}(_ked_backend_client__WEBPACK_IMPORTED_MODULE_1__["KedBackendClient"]));

//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client/access-control.js":
/*!********************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client/access-control.js ***!
  \********************************************************************/
/*! exports provided: DocumentAccess, hasAccess */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DocumentAccess", function() { return DocumentAccess; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasAccess", function() { return hasAccess; });
var DocumentAccess = /** @class */ (function () {
    function DocumentAccess(accessClaimType, accessClaimValue, right) {
        this.accessClaimType = accessClaimType;
        this.accessClaimValue = accessClaimValue;
        this.right = right;
    }
    DocumentAccess.fromString = function (ac) {
        if (!ac)
            return null;
        var split = ac.split(':');
        if (split.length < 3)
            throw new Error("Invalid access string: " + ac);
        var claimType = DocumentAccess.unescape(split[0]);
        var claimValue = DocumentAccess.unescape(split[1]);
        var right = split[2];
        if (right !== 'R' && right !== 'W' && right !== 'S')
            throw new Error("Invalid access string: " + ac);
        return new DocumentAccess(claimType, claimValue, right);
    };
    DocumentAccess.escape = function (accessComponent) {
        return accessComponent.replace(/\%/g, "%25").replace(/\:/g, "%3A");
    };
    DocumentAccess.unescape = function (accessComponent) {
        return accessComponent.replace(/\%3A/g, ":").replace(/\%25/g, "%");
    };
    DocumentAccess.prototype.toString = function () {
        return DocumentAccess.escape(this.accessClaimType) + ":" +
            DocumentAccess.escape(this.accessClaimValue) + ":" +
            this.right;
    };
    DocumentAccess.fromStringArray = function (acl) {
        return acl
            .map(function (ac) { return DocumentAccess.fromString(ac); })
            .filter(function (ac) { return ac; });
    };
    DocumentAccess.toStringArray = function (acl) {
        return acl.map(function (ac) { return ac.toString(); });
    };
    return DocumentAccess;
}());

function hasAccess(acl, userClaims, requestedRight) {
    if (userClaims.some(function (claim) { return claim.type === 'role' && claim.value === "ADMIN"; }))
        return true;
    return acl.some(function (a) {
        return userClaims.some(function (c) {
            return a.accessClaimType === c.type &&
                a.accessClaimValue === c.value && ((a.right === 'R' && requestedRight === 'R') ||
                (a.right === 'W' && ['R', 'W'].indexOf(requestedRight) >= 0) ||
                (a.right === 'S'));
        });
    });
}
//# sourceMappingURL=access-control.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client/http-error.js":
/*!****************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client/http-error.js ***!
  \****************************************************************/
/*! exports provided: HttpError */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HttpError", function() { return HttpError; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");

var HttpError = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](HttpError, _super);
    function HttpError(code, message) {
        var _this = _super.call(this, "HTTP" + code + " " + message) || this;
        _this.code = code;
        _this.message = message;
        _this.name = "http" + code;
        _this.message = "HTTP" + code + " " + message;
        return _this;
    }
    return HttpError;
}(Error));

//# sourceMappingURL=http-error.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client/index.js":
/*!***********************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client/index.js ***!
  \***********************************************************/
/*! exports provided: KedBearerProvider, RestClient, HttpError, KedBackendClient, BatchRunner, createUUID, avoidSimultanousCalls, getGlobalId, computePredestinatedId, updateArray, DocumentAccess, hasAccess */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedBackendClient", function() { return KedBackendClient; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BatchRunner", function() { return BatchRunner; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _restclient__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./restclient */ "./kedbackend/js/dist/js/ked-backend-client/restclient.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RestClient", function() { return _restclient__WEBPACK_IMPORTED_MODULE_1__["RestClient"]; });

/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ "./kedbackend/js/dist/js/ked-backend-client/utils.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createUUID", function() { return _utils__WEBPACK_IMPORTED_MODULE_2__["createUUID"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "avoidSimultanousCalls", function() { return _utils__WEBPACK_IMPORTED_MODULE_2__["avoidSimultanousCalls"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getGlobalId", function() { return _utils__WEBPACK_IMPORTED_MODULE_2__["getGlobalId"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "computePredestinatedId", function() { return _utils__WEBPACK_IMPORTED_MODULE_2__["computePredestinatedId"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "updateArray", function() { return _utils__WEBPACK_IMPORTED_MODULE_2__["updateArray"]; });

/* harmony import */ var _ked_bearer_provider__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ked-bearer-provider */ "./kedbackend/js/dist/js/ked-backend-client/ked-bearer-provider.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBearerProvider", function() { return _ked_bearer_provider__WEBPACK_IMPORTED_MODULE_3__["KedBearerProvider"]; });

/* harmony import */ var _access_control__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./access-control */ "./kedbackend/js/dist/js/ked-backend-client/access-control.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DocumentAccess", function() { return _access_control__WEBPACK_IMPORTED_MODULE_4__["DocumentAccess"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "hasAccess", function() { return _access_control__WEBPACK_IMPORTED_MODULE_4__["hasAccess"]; });

/* harmony import */ var _http_error__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./http-error */ "./kedbackend/js/dist/js/ked-backend-client/http-error.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "HttpError", function() { return _http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"]; });

/* empty/unused harmony star reexport */








;
// | 'otherFlag' | 'thirdFlag';...
var KedBackendClient = /** @class */ (function () {
    function KedBackendClient(isomorphic, bearerProvider, baseUrl) {
        this.http = new _restclient__WEBPACK_IMPORTED_MODULE_1__["RestClient"](isomorphic, baseUrl, { bearerProvider: bearerProvider });
    }
    KedBackendClient.prototype.getMyClaims = function (table, fetchOptions) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("me/claims/" + (table || ""), null, fetchOptions)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = _http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(_http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4: return [2 /*return*/, _c.sent()];
                }
            });
        });
    };
    KedBackendClient.prototype.get = function (table, id, options, fetchOptions) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get(table + "/" + id, options, fetchOptions)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = _http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(_http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4: return [2 /*return*/, _c.sent()];
                }
            });
        });
    };
    KedBackendClient.prototype.list = function (table, options, fetchOptions) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var query, res, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        query = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, options);
                        if (options && options.mutationsOnEmpty)
                            query.mutationsOnEmpty = JSON.stringify(options.mutationsOnEmpty);
                        return [4 /*yield*/, this.http.get("" + table, query, fetchOptions)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = _http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(_http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4: return [2 /*return*/, _c.sent()];
                }
            });
        });
    };
    KedBackendClient.prototype.batch = function (reqs, fetchOptions) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        // Reorder operations so that 'add's come first and 'delete's come last:
                        reqs = reqs.slice().sort(function (req1, req2) {
                            return req1.op === 'add' ? -1 : req2.op === 'add' ? 1 :
                                req1.op === 'delete' ? 1 : req2.op === 'delete' ? -1 : 0;
                        });
                        return [4 /*yield*/, this.http.post("batch", reqs, fetchOptions)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = _http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(_http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4: return [2 /*return*/, _c.sent()];
                }
            });
        });
    };
    KedBackendClient.prototype.do = function (scopeFn) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var runner;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        runner = new BatchRunner();
                        scopeFn(runner);
                        return [4 /*yield*/, this.batch(runner.mutationRequests)];
                    case 1: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    KedBackendClient.prototype.deleteRealm = function (realm) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.delete("realms/" + realm)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = _http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(_http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4: return [2 /*return*/, _c.sent()];
                }
            });
        });
    };
    KedBackendClient.prototype.add = function (table, doc, branchId) {
        return this.do(function (r) { return r.add(table, doc); });
    };
    KedBackendClient.prototype.put = function (table, doc) {
        return this.do(function (r) { return r.put(table, doc); });
    };
    KedBackendClient.prototype.update = function (table, id, deltaDoc, branchId) {
        return this.do(function (r) { return r.update(table, id, deltaDoc, branchId); });
    };
    KedBackendClient.prototype.merge = function (branchId, targetBranchId) {
        return this.do(function (r) { return r.merge(branchId, targetBranchId); });
    };
    KedBackendClient.prototype.clearBranch = function (branchId) {
        return this.do(function (r) { return r.clearBranch(branchId); });
    };
    KedBackendClient.prototype.delete = function (table, id) {
        return this.do(function (r) { return r.delete(table, id); });
    };
    KedBackendClient.prototype.share = function (table, id, acl) {
        return this.do(function (r) { return r.share(table, id, acl); });
    };
    KedBackendClient.prototype.unshare = function (table, id, acl) {
        return this.do(function (r) { return r.unshare(table, id, acl); });
    };
    KedBackendClient.prototype.link = function (sourceTable, sourceId, targetTable, targetId, label) {
        return this.do(function (r) { return r.link(sourceTable, sourceId, targetTable, targetId, label); });
    };
    KedBackendClient.prototype.link2 = function (sourceTable, sourceId, targetId, label, branchId) {
        return this.do(function (r) { return r.link2(sourceTable, sourceId, label, targetId, branchId); });
    };
    KedBackendClient.prototype.unlink = function (sourceTable, sourceId, targetTable, targetId, label) {
        return this.do(function (r) { return r.unlink(sourceTable, sourceId, targetTable, targetId, label); });
    };
    KedBackendClient.prototype.unlink2 = function (sourceTable, sourceId, targetId, label, branchId) {
        return this.do(function (r) { return r.unlink2(sourceTable, sourceId, label, targetId, branchId); });
    };
    KedBackendClient.prototype.undoLink = function (sourceTable, sourceId, targetId, label, branchId) {
        return this.do(function (r) { return r.undoLink(sourceTable, sourceId, label, targetId, branchId); });
    };
    return KedBackendClient;
}());

var BatchRunner = /** @class */ (function () {
    function BatchRunner() {
        this.mutationRequests = [];
    }
    BatchRunner.prototype.add = function (table, doc, branchId) {
        this.mutationRequests.push({ op: 'add', table: table, doc: doc, branchId: branchId });
        return this;
    };
    BatchRunner.prototype.put = function (table, doc) {
        doc = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, doc);
        delete doc.acl; // Forbidden to send acl with put() calls.
        this.mutationRequests.push({ op: 'put', table: table, doc: doc });
        return this;
    };
    BatchRunner.prototype.update = function (table, id, deltaDoc, branchId) {
        deltaDoc = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, deltaDoc);
        this.mutationRequests.push({ op: 'update', table: table, id: id, deltaDoc: deltaDoc, branchId: branchId });
    };
    BatchRunner.prototype.merge = function (branchId, targetBranchId) {
        this.mutationRequests.push({ op: 'merge', branchId: branchId, targetBranchId: targetBranchId });
    };
    BatchRunner.prototype.clearBranch = function (branchId) {
        this.mutationRequests.push({ op: 'clear-branch', branchId: branchId });
    };
    BatchRunner.prototype.delete = function (table, id) {
        this.mutationRequests.push({ op: 'delete', table: table, id: id });
        return this;
    };
    BatchRunner.prototype.share = function (table, id, acl) {
        this.mutationRequests.push({ op: 'share', table: table, id: id, acl: acl });
        return this;
    };
    BatchRunner.prototype.unshare = function (table, id, acl) {
        this.mutationRequests.push({ op: 'unshare', table: table, id: id, acl: acl });
        return this;
    };
    BatchRunner.prototype.link = function (sourceTable, sourceId, targetTable, targetId, label) {
        this.mutationRequests.push({ op: 'link', sourceTable: sourceTable, sourceId: sourceId, targetTable: targetTable, targetId: targetId, label: label });
        return this;
    };
    BatchRunner.prototype.link2 = function (sourceTable, sourceId, label, targetId, branchId) {
        this.mutationRequests.push({ op: 'link', sourceTable: sourceTable, sourceId: sourceId, targetId: targetId, label: label, branchId: branchId });
    };
    BatchRunner.prototype.unlink = function (sourceTable, sourceId, targetTable, targetId, label) {
        this.mutationRequests.push({ op: 'unlink', sourceTable: sourceTable, sourceId: sourceId, targetTable: targetTable, targetId: targetId, label: label });
        return this;
    };
    BatchRunner.prototype.unlink2 = function (sourceTable, sourceId, label, targetId, branchId) {
        this.mutationRequests.push({ op: 'unlink', sourceTable: sourceTable, sourceId: sourceId, targetId: targetId, label: label, branchId: branchId });
        return this;
    };
    BatchRunner.prototype.undoLink = function (sourceTable, sourceId, label, targetId, branchId) {
        this.mutationRequests.push({ op: 'undo-link', sourceTable: sourceTable, sourceId: sourceId, targetId: targetId, label: label, branchId: branchId });
    };
    return BatchRunner;
}());

//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client/ked-bearer-provider.js":
/*!*************************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client/ked-bearer-provider.js ***!
  \*************************************************************************/
/*! exports provided: KedBearerProvider */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedBearerProvider", function() { return KedBearerProvider; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _restclient__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./restclient */ "./kedbackend/js/dist/js/ked-backend-client/restclient.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ "./kedbackend/js/dist/js/ked-backend-client/utils.js");



var KedBearerProvider = /** @class */ (function () {
    function KedBearerProvider(isomorphic, storage, tokenId, clientId, clientSecret, tokenUrl, tokenQuery) {
        this.isomorphic = isomorphic;
        this.storage = storage;
        this.tokenId = tokenId;
        this.clientId = clientId;
        this.clientSecret = clientSecret;
        this.tokenUrl = tokenUrl;
        this.tokenQuery = tokenQuery;
        this.tokenInfo = { token: null, expires: 0 };
        this.client = new _restclient__WEBPACK_IMPORTED_MODULE_1__["RestClient"](isomorphic, "", {
            username: this.clientId,
            password: this.clientSecret
        });
        this.getBearer = Object(_utils__WEBPACK_IMPORTED_MODULE_2__["avoidSimultanousCalls"])(this.getBearer.bind(this));
        this.refreshBearer = Object(_utils__WEBPACK_IMPORTED_MODULE_2__["avoidSimultanousCalls"])(this.refreshBearer.bind(this));
    }
    KedBearerProvider.prototype.getBearer = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, token, expires, _b, e_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _a = this.tokenInfo, token = _a.token, expires = _a.expires;
                        if (token && expires >= Date.now())
                            return [2 /*return*/, this.tokenInfo];
                        _c.label = 1;
                    case 1:
                        _c.trys.push([1, 4, , 6]);
                        _b = this;
                        return [4 /*yield*/, this.storage.load(this.clientId + "/" + this.tokenId)];
                    case 2:
                        _b.tokenInfo = _c.sent();
                        if (this.tokenInfo.token && this.tokenInfo.expires >= Date.now())
                            return [2 /*return*/, this.tokenInfo];
                        return [4 /*yield*/, this.refreshBearer()];
                    case 3:
                        _c.sent();
                        return [2 /*return*/, this.tokenInfo];
                    case 4:
                        e_1 = _c.sent();
                        return [4 /*yield*/, this.refreshBearer()];
                    case 5:
                        _c.sent();
                        return [2 /*return*/, this.tokenInfo];
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    KedBearerProvider.prototype.refreshBearer = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, retries, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        retries = 0;
                        _c.label = 1;
                    case 1:
                        if (!(retries < 6)) return [3 /*break*/, 5];
                        console.log("Retrieving token for " + this.tokenId);
                        return [4 /*yield*/, this.client.get(this.tokenUrl, this.tokenQuery, { cache: 'reload' })];
                    case 2:
                        res = _c.sent();
                        if (res.status !== 200) {
                            console.warn("Got " + res.status + " " + res.statusText);
                            return [3 /*break*/, 4];
                        }
                        _a = this;
                        _b = {};
                        return [4 /*yield*/, res.text()];
                    case 3:
                        _a.tokenInfo = (_b.token = _c.sent(), _b.expires = Date.now() + 59 * 60 * 1000, _b);
                        console.log("Got token for " + this.tokenId + ": " + JSON.stringify(this.tokenInfo));
                        this.storage.save(this.clientId + "/" + this.tokenId, this.tokenInfo);
                        return [2 /*return*/, this.tokenInfo];
                    case 4:
                        ++retries;
                        return [3 /*break*/, 1];
                    case 5: throw new Error("Failed to retrieve token for " + JSON.stringify(this.tokenId));
                }
            });
        });
    };
    return KedBearerProvider;
}());

//# sourceMappingURL=ked-bearer-provider.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client/restclient.js":
/*!****************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client/restclient.js ***!
  \****************************************************************/
/*! exports provided: RestClient */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RestClient", function() { return RestClient; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ "./kedbackend/js/dist/js/ked-backend-client/utils.js");
/* harmony import */ var _observable_emitter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../observable/emitter */ "./kedbackend/js/dist/js/observable/emitter.js");
/*
declare var Buffer; // node built-in


function basicAuthHeader(username, password) {
    return "Basic " + new Buffer(username + ":" + password).toString("base64");
}
*/



var RestClient = /** @class */ (function () {
    function RestClient(isomorphic, baseUrl, options) {
        this.isomorphic = isomorphic;
        this.baseUrl = baseUrl;
        this.options = options;
        this.numOutstandingOperations = 0;
        this._status = new _observable_emitter__WEBPACK_IMPORTED_MODULE_2__["Emitter"](this);
        this.fetchOptions = { mode: 'cors' };
        this.authHeader = options.bearer ?
            "Bearer " + options.bearer :
            options.username ?
                "Basic " + isomorphic.btoa(options.username + ":" + (options.password || "")) :
                null;
        this.bearerProvider = options.bearerProvider || null;
    }
    Object.defineProperty(RestClient.prototype, "status", {
        get: function () {
            return this._status;
        },
        enumerable: true,
        configurable: true
    });
    RestClient.prototype.fetch = function (path, method, headers, query, fetchOptions) {
        var _this = this;
        ++this.numOutstandingOperations;
        this._status.dispatch(this);
        return this._fetch(path, method, headers, query, fetchOptions)
            .then(function (res) {
            --_this.numOutstandingOperations;
            _this._status.dispatch(_this);
            return res;
        }).catch(function (err) {
            --_this.numOutstandingOperations;
            _this._status.dispatch(_this);
            return Promise.reject(err);
        });
    };
    RestClient.prototype._fetch = function (path, method, headers, query, fetchOptions) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var queryStr, _a, authHeader, tokenInfo, bearerProvider, _b, _c, url, res, wwwauth, _d;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_e) {
                switch (_e.label) {
                    case 0:
                        if (fetchOptions && fetchOptions.cache === 'no-cache') {
                            // Workaround for back-button not respecting cache control in Chrome/Opera.
                            // Append a query parameter to force a cache entry
                            query = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, query, { nocache: Object(_utils__WEBPACK_IMPORTED_MODULE_1__["createUUID"])() });
                        }
                        queryStr = query && Object.keys(query).filter(function (key) { return query[key] !== undefined; }).map(function (key) {
                            return encodeURIComponent(key) +
                                "=" +
                                encodeURIComponent(query[key]);
                        })
                            .join('&');
                        _a = this, authHeader = _a.authHeader, tokenInfo = _a.tokenInfo, bearerProvider = _a.bearerProvider;
                        if (!(!authHeader && !tokenInfo && bearerProvider)) return [3 /*break*/, 2];
                        _b = this;
                        return [4 /*yield*/, bearerProvider.getBearer()];
                    case 1:
                        _b.tokenInfo = tokenInfo = _e.sent();
                        _e.label = 2;
                    case 2:
                        if (!tokenInfo) return [3 /*break*/, 5];
                        if (!(tokenInfo.expires < Date.now())) return [3 /*break*/, 4];
                        console.log("Token expired. Refresh it:");
                        _c = this;
                        return [4 /*yield*/, bearerProvider.refreshBearer()];
                    case 3:
                        _c.tokenInfo = tokenInfo = _e.sent();
                        _e.label = 4;
                    case 4:
                        authHeader = "Bearer " + tokenInfo.token;
                        _e.label = 5;
                    case 5:
                        // In one way or another, we've concluded an Authorization header to use:
                        if (authHeader) {
                            headers.Authorization = authHeader;
                        }
                        url = this.baseUrl + path + (queryStr ? "?" + queryStr : "");
                        return [4 /*yield*/, this.isomorphic.fetch(url, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.fetchOptions, { headers: headers, method: method }, fetchOptions))];
                    case 6:
                        res = _e.sent();
                        if (!(res.status == 401 && this.bearerProvider)) return [3 /*break*/, 9];
                        wwwauth = res.headers.get("www-authenticate");
                        console.log("Got " + res.status + " from " + (this.baseUrl + path));
                        if (!(wwwauth && /Bearer/i.test(wwwauth))) return [3 /*break*/, 9];
                        _d = this;
                        return [4 /*yield*/, this.bearerProvider.refreshBearer()];
                    case 7:
                        _d.tokenInfo = _e.sent();
                        headers.Authorization = "Bearer " + this.tokenInfo.token;
                        return [4 /*yield*/, this.isomorphic.fetch(url, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.fetchOptions, { headers: headers, method: method }, fetchOptions))];
                    case 8:
                        res = _e.sent();
                        _e.label = 9;
                    case 9: return [2 /*return*/, res];
                }
            });
        });
    };
    RestClient.prototype.get = function (path, query, fetchOptions) {
        return this.fetch(path, "GET", { Accept: "application/json; text/plain" }, query, fetchOptions);
    };
    RestClient.prototype.post = function (path, data, fetchOptions) {
        return this.fetch(path, "POST", {
            "Content-Type": "application/json",
            "Accept": "application/json"
        }, null, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, fetchOptions, { body: JSON.stringify(data) }));
    };
    RestClient.prototype.delete = function (path, query, body, fetchOptions) {
        return this.fetch(path, "DELETE", { Accept: "application/json; text/plain" }, query, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, fetchOptions, { body: body }));
    };
    return RestClient;
}());

//# sourceMappingURL=restclient.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client/utils.js":
/*!***********************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client/utils.js ***!
  \***********************************************************/
/*! exports provided: createUUID, avoidSimultanousCalls, getGlobalId, computePredestinatedId, updateArray */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createUUID", function() { return createUUID; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "avoidSimultanousCalls", function() { return avoidSimultanousCalls; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getGlobalId", function() { return getGlobalId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computePredestinatedId", function() { return computePredestinatedId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateArray", function() { return updateArray; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");

function createUUID() {
    // Decent solution from http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript
    var d = Date.now();
    var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
        var r = (d + Math.random() * 16) % 16 | 0;
        d = Math.floor(d / 16);
        return (c === 'x' ? r : (r & 0x7 | 0x8)).toString(16);
    });
    return uuid;
}
function avoidSimultanousCalls(method) {
    var ongoingPromise = null;
    return function () {
        if (!ongoingPromise) {
            ongoingPromise = method.apply(this, arguments).then(function (result) {
                ongoingPromise = null;
                return result;
            });
        }
        return ongoingPromise;
    };
}
function getGlobalId(realm) {
    var prefix = 'ec96b3be-45fc-41d3-b69e-';
    var pad = ['50', '08', 'e1', '40', 'e4', 'e7'];
    if (realm.length > 6)
        throw new Error("Too long realm");
    for (var i = 0; i < realm.length; ++i) {
        var hex = realm.charCodeAt(i).toString(16);
        pad[i] = hex.length === 2 ?
            hex :
            '0' + hex;
    }
    return prefix + pad.join('');
}
function computePredestinatedId(input) {
    return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
        var encoder, data, digest, _a, i;
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
            switch (_b.label) {
                case 0:
                    encoder = new TextEncoder();
                    data = encoder.encode(input);
                    _a = Uint8Array.bind;
                    return [4 /*yield*/, crypto.subtle.digest('SHA-256', data)];
                case 1:
                    digest = new (_a.apply(Uint8Array, [void 0, _b.sent()]))();
                    i = 0;
                    return [2 /*return*/, 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
                            var nibble = digest[i++] % 16 | 0;
                            var washedNibble = c === 'x' ?
                                nibble :
                                nibble & 0x7 | 0x8;
                            return washedNibble.toString(16);
                        })];
            }
        });
    });
}
/*export function buf2hex(buffer: ArrayBuffer) {
  return Array.prototype.map.call(
    new Uint8Array(buffer),
    (x: number) => ('00' + x.toString(16)).slice(-2)).join('');
}*/
function updateArray(a, mapper) {
    var retval = a;
    for (var i = 0, l = a.length; i < l; ++i) {
        var t = a[i];
        var mapped = mapper(t);
        if (mapped !== t) {
            if (retval === a)
                retval = a.slice();
            retval[i] = mapped;
        }
    }
    return retval;
}
/*
export function updateArray<T>(a: T[], mapper: (t: T) => T | false): T[] {
  let retval = a;
  let j = 0;
  for (let i=0,l=a.length; i<l; ++i, ++j) {
    const t = a[i];
    const mapped = mapper(t);
    if (mapped === false) {
      // Mapper wants to delete this doc.
      if (retval === a) retval = a.slice();
      retval.splice(j, 1);
      --j; // compensate for ++j
    } else if (mapped !== t) {
      if (retval === a) retval = a.slice();
      retval[j] = mapped;
    }
  }
  return retval;
}
*/ 
//# sourceMappingURL=utils.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/cache-bust.js":
/*!**************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/cache-bust.js ***!
  \**************************************************************/
/*! exports provided: CacheBust */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CacheBust", function() { return CacheBust; });
/* harmony import */ var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json");
var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_0___namespace = /*#__PURE__*/__webpack_require__.t(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json", 1);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ "./kedbackend/js/dist/js/ked-backend-repo/utils.js");


var CacheBust = /** @class */ (function () {
    function CacheBust() {
    }
    CacheBust.getCacheBust = function (table, query, user, includes) {
        var involvedItems = CacheBust.getInvolvedItems(table, query, includes);
        return involvedItems
            .map(function (item) { return localStorage.getItem("cache-bust-" + user + "-" + item); })
            .filter(function (value) { return !!value; })
            .join('/') || 'static';
    };
    CacheBust.invalidateCache = function (reqs, user) {
        for (var _i = 0, _a = CacheBust.getCacheInvalidations(reqs); _i < _a.length; _i++) {
            var item = _a[_i];
            localStorage.setItem("cache-bust-" + user + "-" + item, '' + Date.now());
        }
    };
    CacheBust.getInvolvedItems = function (table, query, includes) {
        var hasEdgesFrom = query.hasEdgesFrom;
        var relatedTables = includes
            .map(function (label) { return kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_0__["tables"][table].relationships[label]; })
            .filter(function (table) { return !!table; });
        if (hasEdgesFrom)
            relatedTables.push("hef" + table);
        return [table, 'master', query.branchId].filter(function (x) { return !!x; }).concat(relatedTables).sort();
    };
    CacheBust.getCacheInvalidations = function (reqs) {
        var invalidationSet = {};
        reqs.forEach(function (req) {
            switch (req.op) {
                case 'add':
                case 'put':
                case 'delete':
                case 'update':
                    invalidationSet[req.table] = true;
                    break;
                case 'link':
                case 'unlink':
                case 'undo-link':
                    invalidationSet[req.sourceTable] = true;
                    invalidationSet["hef-" + Object(_utils__WEBPACK_IMPORTED_MODULE_1__["getTableFromLabel"])(req.sourceTable, req.label)] = true;
                    break;
                case 'clear-branch':
                    invalidationSet[req.branchId] = true;
                    break;
                case 'merge':
                    invalidationSet[req.branchId] = true;
                    invalidationSet[req.targetBranchId || "master"] = true;
                    break;
            }
        });
        return Object.keys(invalidationSet);
    };
    return CacheBust;
}());

//# sourceMappingURL=cache-bust.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/delta-collection/apply-mutations-on-deltas.js":
/*!**********************************************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/delta-collection/apply-mutations-on-deltas.js ***!
  \**********************************************************************************************/
/*! exports provided: applyMutationsOnDeltas */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "applyMutationsOnDeltas", function() { return applyMutationsOnDeltas; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _delta_merge__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../delta-merge */ "./kedbackend/js/dist/js/ked-backend-repo/delta-merge.js");


function applyMutationsOnDeltas(branchId, deltas, mutations, optimistic, userDisplayName, hasAdditionalFilter) {
    var _loop_1 = function (m) {
        switch (m.op) {
            case 'add-related':
                //
                // AddRelated RepoMutation
                //
                if (!hasAdditionalFilter && m.branchId === branchId) {
                    deltas = [{
                            type: 'add',
                            sourceId: m.id,
                            targetId: m.relatedDoc.id,
                            label: m.graphProp,
                            sourceTable: m.table,
                            $meta: optimistic ? 'adding' : 'persisted',
                            dateTime: Date.now(),
                            targetName: m.relatedDoc.name,
                            contributor: userDisplayName
                        }].concat(deltas);
                }
                break;
            case 'clear-branch':
                //
                // ClearBranch RepoMutation
                //
                if (m.branchId === branchId) {
                    deltas = [];
                }
                break;
            case 'delete':
                //
                // Delete RepoMutation
                //
                // This type of mutation can not be performed onto branches. There's no branchId property on m.
                break;
            case 'merge':
                //
                // Merge RepoMutation
                //
                if (m.branchId === branchId) {
                    deltas = [];
                }
                else if (m.targetBranchId === branchId) {
                    // This change will append new deltas to our deltas array but we don't know what would come.
                    // Need to refetch from server.
                    if (!optimistic)
                        return { value: null }; // Caller should check for null and re-fetch data from server.
                }
                break;
            case 'remove-related':
                //
                // Remove-Related RepoMutation
                //
                if (hasAdditionalFilter || m.branchId !== branchId)
                    return "continue";
                deltas = [{
                        type: 'remove',
                        sourceId: m.id,
                        targetId: m.relatedDoc.id,
                        targetName: m.relatedDoc.name,
                        label: m.graphProp,
                        sourceTable: m.table,
                        contributor: userDisplayName,
                        dateTime: Date.now(),
                        $meta: optimistic ? 'adding' : 'persisted'
                    }].concat(deltas);
                break;
            case 'undo-link':
                //
                // Undo-Link RepoMutation
                //
                if (m.branchId !== branchId)
                    return "continue";
                {
                    var idx = deltas.findIndex(function (d) {
                        return (d.type === 'add' || d.type === 'remove' || d.type === 'undo-link') &&
                            d.sourceId === m.id &&
                            d.targetId === m.relatedId;
                    });
                    if (idx < 0)
                        return "continue";
                    // Found an "add" or "remove" delta to change:
                    if (optimistic) {
                        var deltaRelation = deltas[idx];
                        // Mark the existing add/remove delta as currenlty being deleted
                        deltas = deltas.slice(0, idx).concat([
                            tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, deltaRelation, { $meta: optimistic ? 'removing' : 'persisted' })
                        ], deltas.slice(idx + 1));
                    }
                    else {
                        // Persisted. Just remove it:
                        deltas = deltas.slice(0, idx).concat(deltas.slice(idx + 1));
                    }
                }
                break;
            case 'update':
                //
                // Update RepoMutation
                //
                if (m.branchId !== branchId)
                    return "continue";
                {
                    var idx = deltas.findIndex(function (delta) {
                        return delta.type === 'modify' &&
                            delta.targetId === m.id;
                    });
                    if (idx < 0 && !hasAdditionalFilter) {
                        deltas = [{
                                type: 'modify',
                                table: m.table,
                                targetId: m.id,
                                targetName: m.targetName,
                                data: m.deltaDoc,
                                dateTime: Date.now(),
                                contributors: [userDisplayName],
                                $meta: optimistic ? 'adding' : 'persisted',
                            }].concat(deltas);
                    }
                    else {
                        var existingDeltaDoc = deltas[idx];
                        var contributors = existingDeltaDoc.contributors.slice();
                        if (!contributors.includes(userDisplayName)) {
                            contributors.push(userDisplayName);
                        }
                        var newData = Object(_delta_merge__WEBPACK_IMPORTED_MODULE_1__["mergeDeltas"])(existingDeltaDoc.data, m.deltaDoc, { removeUnsetProps: true });
                        if (!optimistic && Object.keys(newData).length === 0) {
                            // Committed mutation that resets a deltaDoc. Remove the deltaDoc entirely:
                            deltas = deltas.slice(0, idx).concat(deltas.slice(idx + 1));
                        }
                        else {
                            // 
                            deltas = [
                                {
                                    type: 'modify',
                                    table: m.table,
                                    targetId: m.id,
                                    targetName: m.targetName,
                                    data: newData,
                                    dateTime: Date.now(),
                                    contributors: contributors,
                                    $meta: optimistic ? 'updating' : 'persisted',
                                }
                            ].concat(deltas.slice(0, idx), deltas.slice(idx + 1));
                        }
                    }
                }
                break;
        }
    };
    for (var _i = 0, mutations_1 = mutations; _i < mutations_1.length; _i++) {
        var m = mutations_1[_i];
        var state_1 = _loop_1(m);
        if (typeof state_1 === "object")
            return state_1.value;
    }
    return deltas;
}
//# sourceMappingURL=apply-mutations-on-deltas.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/delta-collection/delta-cache.js":
/*!********************************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/delta-collection/delta-cache.js ***!
  \********************************************************************************/
/*! exports provided: DeltaCache */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DeltaCache", function() { return DeltaCache; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _ked_backend_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../ked-backend-client */ "./kedbackend/js/dist/js/ked-backend-client/index.js");
/* harmony import */ var _apply_mutations_on_deltas__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./apply-mutations-on-deltas */ "./kedbackend/js/dist/js/ked-backend-repo/delta-collection/apply-mutations-on-deltas.js");



var DeltaCache = /** @class */ (function () {
    function DeltaCache(getClient, getUser, getUserDisplayName) {
        this.getClient = getClient;
        this.getUser = getUser;
        this.getUserDisplayName = getUserDisplayName;
        this.lookup = {};
    }
    DeltaCache.prototype.applyMutations = function (mutations, _a) {
        var optimistic = (_a === void 0 ? { optimistic: false } : _a).optimistic;
        // Apply mutations locally onto the DeltaCache and notify their subscribers
        for (var _i = 0, _b = Object.keys(this.lookup); _i < _b.length; _i++) {
            var queryKey = _b[_i];
            var cacheEntry = this.lookup[queryKey];
            if (cacheEntry.value) {
                // Instead here: Store the mutations on cacheEntry. No matter if it yet has value or not.
                // Then apply mutation whenever subscribing! (Better handling of mutations that arrives before fetch() is done)
                // (See how I handle this in query-set.ts)
                var newValue = Object(_apply_mutations_on_deltas__WEBPACK_IMPORTED_MODULE_2__["applyMutationsOnDeltas"])(cacheEntry.query.branchId, cacheEntry.value, mutations, optimistic, this.getUserDisplayName(), !!cacheEntry.query.tags);
                if (newValue === null) {
                    // The mutation requires cacheEntry to be refetched from server
                    if (!optimistic) {
                        // Caller has successfully performed the mutations and got success back from server.
                        // It's ok to refetch the deltas from server now:
                        cacheEntry.fetch();
                        // After fetch completes, it will notify the subscribers.
                    }
                }
                if (newValue !== cacheEntry.value) {
                    cacheEntry.optimisticValue = newValue;
                    if (!optimistic)
                        cacheEntry.value = newValue;
                    cacheEntry.notify(newValue);
                }
            }
        }
    };
    DeltaCache.prototype.subscribe = function (query, observer) {
        var _this = this;
        var cacheEntry = this.lookup[query.branchId + query.tags];
        if (!cacheEntry) {
            cacheEntry = new DeltaCacheEntry(this.getClient(), query);
            this.lookup[query.branchId + query.tags] = cacheEntry;
        }
        if (cacheEntry.cleanupTimer) {
            clearTimeout(cacheEntry.cleanupTimer);
            cacheEntry.cleanupTimer = null;
        }
        var subscription = {
            unsubscribe: function () {
                cacheEntry.subscribers = cacheEntry.subscribers.filter(function (_a) {
                    var o = _a.observer;
                    return o !== observer;
                });
                if (cacheEntry.subscribers.length === 0) {
                    cacheEntry.cleanupTimer = setTimeout(function () {
                        if (cacheEntry.subscribers.length === 0) {
                            delete _this.lookup[query.branchId + query.tags];
                        }
                    }, 100);
                }
            }
        };
        cacheEntry.subscribers.push({ observer: observer, subscription: subscription });
        if (cacheEntry.value) {
            // Value has been successfully retrieved already. Pick from cache.
            observer(cacheEntry.optimisticValue || cacheEntry.value, null, subscription);
        }
        else if (cacheEntry.isFetching) {
            // A value is on its way. Sit back and relax. All registered
            // observers (including this one) will be notified when data arrives
            // or fails.
        }
        else if (cacheEntry.error) {
            observer(null, cacheEntry.error, subscription);
        }
        else {
            cacheEntry.fetch();
        }
        return subscription;
    };
    return DeltaCache;
}());

var DeltaCacheEntry = /** @class */ (function () {
    function DeltaCacheEntry(client, query) {
        this.fetchOperationId = 0; // Makes sure a re-fetch will discard the result from any ongoing fetch.
        this.client = client;
        this.query = query;
        this.value = null;
        this.error = null;
        this.optimisticValue = null;
        this.subscribers = [];
        this.isFetching = false;
        this.cleanupTimer = null;
    }
    DeltaCacheEntry.prototype.fetch = function () {
        var _this = this;
        var fetchOperationId = ++this.fetchOperationId;
        this.isFetching = true;
        this.fetchFromServer().then(function (value) {
            // Success
            if (fetchOperationId === _this.fetchOperationId) {
                _this.isFetching = false;
                value.sort(function (a, b) { return b.dateTime - a.dateTime; }); // Latest first
                _this.value = value;
                _this.optimisticValue = value;
                _this.notify(value);
            }
        }).catch(function (error) {
            // Fail
            if (fetchOperationId === _this.fetchOperationId) {
                _this.isFetching = false;
                _this.error = error;
                _this.fail(error);
            }
        });
    };
    DeltaCacheEntry.prototype.fetchFromServer = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        if (!this.query.branchId)
                            throw new Error('Deltas only available on branches');
                        return [4 /*yield*/, this.client.http.get('deltas', this.query)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status >= 300 || res.status < 200)) return [3 /*break*/, 3];
                        _a = _ked_backend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(_ked_backend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4: return [2 /*return*/, _c.sent()];
                }
            });
        });
    };
    DeltaCacheEntry.prototype.notify = function (value) {
        for (var _i = 0, _a = this.subscribers; _i < _a.length; _i++) {
            var _b = _a[_i], observer = _b.observer, subscription = _b.subscription;
            observer(value, null, subscription);
        }
    };
    DeltaCacheEntry.prototype.fail = function (error) {
        var copy = this.subscribers.slice();
        this.subscribers = [];
        for (var _i = 0, copy_1 = copy; _i < copy_1.length; _i++) {
            var _a = copy_1[_i], observer = _a.observer, subscription = _a.subscription;
            observer(null, error, subscription);
        }
    };
    return DeltaCacheEntry;
}());
//# sourceMappingURL=delta-cache.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/delta-collection/delta-collection.js":
/*!*************************************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/delta-collection/delta-collection.js ***!
  \*************************************************************************************/
/*! exports provided: DeltaCollection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DeltaCollection", function() { return DeltaCollection; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _observable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../observable */ "./kedbackend/js/dist/js/observable/index.js");


var DeltaCollection = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](DeltaCollection, _super);
    function DeltaCollection(deltaCache, query) {
        var _this = _super.call(this, function (observer) { return _this.deltaCache.subscribe(query, observer); }) || this;
        _this.deltaCache = deltaCache;
        _this.query = query;
        return _this;
    }
    DeltaCollection.prototype.tags = function () {
        var tags = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            tags[_i] = arguments[_i];
        }
        return new DeltaCollection(this.deltaCache, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.query, { tags: tags }));
    };
    return DeltaCollection;
}(_observable__WEBPACK_IMPORTED_MODULE_1__["Collection"]));

//# sourceMappingURL=delta-collection.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/delta-merge.js":
/*!***************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/delta-merge.js ***!
  \***************************************************************/
/*! exports provided: applyDelta, mergeDeltas */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "applyDelta", function() { return applyDelta; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mergeDeltas", function() { return mergeDeltas; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");

function applyDelta(doc, delta) {
    var keys = Object.keys(delta);
    var targetDoc = doc;
    for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {
        var key = keys_1[_i];
        if (targetDoc === doc)
            targetDoc = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, doc);
        var val = delta[key];
        if (val && typeof val === 'object') {
            var metaInstructions = Object.keys(val)
                .filter(function (key) { return key.startsWith('$'); });
            if (metaInstructions.length > 0) {
                var _loop_1 = function (mi) {
                    var miValue = val[mi];
                    switch (mi) {
                        case "$unset": {
                            // Do nothing on target doc!
                            targetDoc.$wasUnset = true; // Just mark it for re-retrieval after successful posting changes.
                            break;
                        }
                        case "$add": {
                            var valuesToAdd = miValue;
                            if (!Array.isArray(valuesToAdd)) {
                                throw new Error("$add instruction must contain array");
                            }
                            var targetArray = targetDoc[key];
                            if (!Array.isArray(targetArray)) {
                                targetArray = [];
                            }
                            else {
                                targetArray = targetArray.slice(); // On JS side, we must be immutable
                            }
                            targetDoc[key] = targetArray;
                            for (var _i = 0, valuesToAdd_1 = valuesToAdd; _i < valuesToAdd_1.length; _i++) {
                                var v = valuesToAdd_1[_i];
                                if (!targetArray.includes(v)) { // avoid dups
                                    targetArray.push(v);
                                }
                            }
                            break;
                        }
                        case "$remove": {
                            var valuesToRemove_1 = miValue;
                            if (!Array.isArray(valuesToRemove_1)) {
                                throw new Error("$remove instruction must contain array");
                            }
                            var targetArray = targetDoc[key];
                            if (!Array.isArray(targetArray)) {
                                targetArray = [];
                            }
                            targetDoc[key] = targetArray.filter(function (t) { return !valuesToRemove_1.includes(t); });
                            break;
                        }
                    }
                };
                for (var _a = 0, metaInstructions_1 = metaInstructions; _a < metaInstructions_1.length; _a++) {
                    var mi = metaInstructions_1[_a];
                    _loop_1(mi);
                }
                continue;
            }
        }
        targetDoc[key] = val;
    }
    return targetDoc;
}
// {name: "Ulla"}, {name: {$unset:0}
// {tags: {$add: "hej"}}, {tags: {$unset:0}"}
function mergeDeltas(delta1, delta2, _a) {
    var removeUnsetProps = (_a === void 0 ? { removeUnsetProps: false } : _a).removeUnsetProps;
    //return {...delta1, ...delta2};
    var keys = Object.keys(delta2);
    var targetDelta = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, delta1);
    for (var _i = 0, keys_2 = keys; _i < keys_2.length; _i++) {
        var key = keys_2[_i];
        var val = delta2[key];
        if (val && typeof val === 'object') {
            var metaInstructions = Object.keys(val)
                .filter(function (key) { return key.startsWith('$'); });
            if (metaInstructions.length > 0) {
                var _loop_2 = function (mi) {
                    var miValue = val[mi];
                    switch (mi) {
                        case "$unset": {
                            if (removeUnsetProps) {
                                delete targetDelta[key];
                            }
                            else {
                                // No matter if targetDelta is empty or has value. Set it to {$unset:0}
                                // to make sure the very end result will have {$unset:0}
                                targetDelta[key] = { $unset: 0 };
                            }
                            break;
                        }
                        case "$add": {
                            var valuesToAdd_2 = miValue;
                            if (!Array.isArray(valuesToAdd_2)) {
                                throw new Error("$add instruction must contain array");
                            }
                            var targetMetaProp = targetDelta[key];
                            targetMetaProp = targetMetaProp ? tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, targetMetaProp) : {};
                            targetDelta[key] = targetMetaProp;
                            // First, just check if target metaProp has {$remove: [...items]}
                            // If so, remove any equal items from there before merging the {$add: [...]} arrays.
                            var targetRemoveArray = targetMetaProp.$remove;
                            if (Array.isArray(targetRemoveArray)) {
                                targetMetaProp.$remove =
                                    targetRemoveArray.filter(function (t) { return !valuesToAdd_2.includes(t); });
                                if (targetMetaProp.$remove.length === 0) {
                                    // If $remove array became emtpy. Remove the $remove prop.
                                    delete targetMetaProp.$remove;
                                }
                            }
                            // Now it's time to merge or create target $add array.
                            var targetAddArray = targetMetaProp.$add;
                            targetAddArray = targetAddArray ? targetAddArray.concat(valuesToAdd_2) : valuesToAdd_2.slice();
                            targetMetaProp.$add = targetAddArray;
                            break;
                        }
                        case "$remove": {
                            var valuesToRemove_2 = miValue;
                            if (!Array.isArray(valuesToRemove_2)) {
                                throw new Error("$remove instruction must contain array");
                            }
                            var targetMetaProp = targetDelta[key];
                            targetMetaProp = targetMetaProp ? tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, targetMetaProp) : {};
                            targetDelta[key] = targetMetaProp;
                            // First, just check if target metaProp has {$add: [...items]}
                            // If so, remove any equal items from there before merging the {$remove: [...]} arrays.
                            var targetAddArray = targetMetaProp.$remove;
                            if (Array.isArray(targetAddArray)) {
                                targetMetaProp.$add =
                                    targetAddArray.filter(function (t) { return !valuesToRemove_2.includes(t); });
                                if (targetMetaProp.$add.length === 0) {
                                    // If $add array became emtpy. Remove the $add prop.
                                    delete targetMetaProp.$add;
                                }
                            }
                            // Now it's time to merge or create target $remove array.
                            var targetRemoveArray = targetMetaProp.$remove;
                            targetRemoveArray = targetRemoveArray ? targetRemoveArray.concat(valuesToRemove_2) : valuesToRemove_2.slice();
                            targetMetaProp.$remove = targetRemoveArray;
                            break;
                        }
                    }
                };
                for (var _b = 0, metaInstructions_2 = metaInstructions; _b < metaInstructions_2.length; _b++) {
                    var mi = metaInstructions_2[_b];
                    _loop_2(mi);
                }
                continue;
            }
        }
        targetDelta[key] = val;
    }
    return targetDelta;
}
//# sourceMappingURL=delta-merge.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/index.js":
/*!*********************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/index.js ***!
  \*********************************************************/
/*! exports provided: KedBackendCollection, KedBackendQuery, KedBackendRepo, KedBackendSubscription, KedBackendWriter, MutationQueue, QuerySet, mixin */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _kedbackend_collection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./kedbackend-collection */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-collection.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendCollection", function() { return _kedbackend_collection__WEBPACK_IMPORTED_MODULE_0__["KedBackendCollection"]; });

/* harmony import */ var _kedbackend_query__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./kedbackend-query */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-query.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendQuery", function() { return _kedbackend_query__WEBPACK_IMPORTED_MODULE_1__["KedBackendQuery"]; });

/* harmony import */ var _kedbackend_repo__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./kedbackend-repo */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-repo.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendRepo", function() { return _kedbackend_repo__WEBPACK_IMPORTED_MODULE_2__["KedBackendRepo"]; });

/* harmony import */ var _kedbackend_subscription__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./kedbackend-subscription */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-subscription.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendSubscription", function() { return _kedbackend_subscription__WEBPACK_IMPORTED_MODULE_3__["KedBackendSubscription"]; });

/* harmony import */ var _kedbackend_writer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./kedbackend-writer */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-writer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendWriter", function() { return _kedbackend_writer__WEBPACK_IMPORTED_MODULE_4__["KedBackendWriter"]; });

/* harmony import */ var _mutation_queue__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./mutation-queue */ "./kedbackend/js/dist/js/ked-backend-repo/mutation-queue.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MutationQueue", function() { return _mutation_queue__WEBPACK_IMPORTED_MODULE_5__["MutationQueue"]; });

/* harmony import */ var _query_set__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./query-set */ "./kedbackend/js/dist/js/ked-backend-repo/query-set.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "QuerySet", function() { return _query_set__WEBPACK_IMPORTED_MODULE_6__["QuerySet"]; });

/* harmony import */ var _observable_mixin__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../observable/mixin */ "./kedbackend/js/dist/js/observable/mixin.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "mixin", function() { return _observable_mixin__WEBPACK_IMPORTED_MODULE_7__["mixin"]; });









//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-collection.js":
/*!*************************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/kedbackend-collection.js ***!
  \*************************************************************************/
/*! exports provided: KedBackendCollection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedBackendCollection", function() { return KedBackendCollection; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _ked_backend_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ked-backend-client */ "./kedbackend/js/dist/js/ked-backend-client/index.js");
/* harmony import */ var _kedbackend_subscription__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./kedbackend-subscription */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-subscription.js");
/* harmony import */ var _cache_bust__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./cache-bust */ "./kedbackend/js/dist/js/ked-backend-repo/cache-bust.js");
/* harmony import */ var _kedbackend_query__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./kedbackend-query */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-query.js");
/* harmony import */ var _observable_collection__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../observable/collection */ "./kedbackend/js/dist/js/observable/collection.js");






/**
 * Represents a "live" query against a table or filtered table.
 */
var KedBackendCollection = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](KedBackendCollection, _super);
    function KedBackendCollection(repo, table, query) {
        var _this = _super.call(this, function (observer) {
            var subscription = new _kedbackend_subscription__WEBPACK_IMPORTED_MODULE_2__["KedBackendSubscription"](observer, _this);
            _this.repo.querySet.subscribe(subscription);
            return subscription;
        }) || this;
        _this.repo = repo;
        _this.table = table;
        _this.query = query;
        return _this;
    }
    Object.defineProperty(KedBackendCollection.prototype, "queryKey", {
        get: function () {
            return _kedbackend_query__WEBPACK_IMPORTED_MODULE_4__["KedBackendQuery"].queryKey(this.table, this.query);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(KedBackendCollection.prototype, "includes", {
        get: function () {
            return this._includes || (this._includes = [].concat(this.query.include || []));
        },
        enumerable: true,
        configurable: true
    });
    KedBackendCollection.prototype.applyQuery = function (query) {
        return new KedBackendCollection(this.repo, this.table, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.query, query));
    };
    KedBackendCollection.prototype.addToQueryArrayProp = function (arrayProp, entries) {
        var _a;
        return this.applyQuery((_a = {}, _a[arrayProp] = (this.query[arrayProp] || []).concat(entries), _a));
    };
    KedBackendCollection.prototype.addFlags = function () {
        var flags = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            flags[_i] = arguments[_i];
        }
        return this.addToQueryArrayProp("flags", flags);
    };
    KedBackendCollection.prototype.debug = function () {
        return this.applyQuery({ debug: true });
    };
    KedBackendCollection.prototype.idsOnly = function () {
        return this.addFlags("idsOnly");
    };
    KedBackendCollection.prototype.idsAndNamesOnly = function () {
        return this.addFlags("idsAndNamesOnly");
    };
    KedBackendCollection.prototype.includeIdsOnly = function () {
        return this.addFlags("includeIdsOnly");
    };
    KedBackendCollection.prototype.includeIdsAndNamesOnly = function () {
        return this.addFlags("includeIdsAndNamesOnly");
    };
    KedBackendCollection.prototype.between = function (from, to) {
        return this.applyQuery({ from: from, to: to });
    };
    KedBackendCollection.prototype.role = function (role) {
        return this.applyQuery({ role: role });
    };
    KedBackendCollection.prototype.hasEdgesFrom = function (ids) {
        if (ids.length === 0 || ids.some(function (id) { return !id; }))
            throw new Error("Invalid id list given to Collection.hasEdgesFrom(" + JSON.stringify(ids) + ")");
        var hef = this.addToQueryArrayProp("hasEdgesFrom", ids);
        return hef;
    };
    KedBackendCollection.prototype.hasEdgesTo = function (ids) {
        if (ids.length === 0 || ids.some(function (id) { return !id; }))
            throw new Error("Invalid id list given to Collection.hasEdgesTo(" + JSON.stringify(ids) + ")");
        var het = this.addToQueryArrayProp("hasEdgesTo", ids);
        return het;
    };
    KedBackendCollection.prototype.id = function (id) {
        var _this = this;
        return this.applyQuery({ ids: [id] }).single({
            onZero: function () { throw new Error("Could not find entity in " + _this.table + " with id " + id); },
            onMany: function () { throw new Error("Multiple entries in " + _this.table + " with id " + id); },
        });
    };
    KedBackendCollection.prototype.ids = function (ids) {
        return this.applyQuery({ ids: ids });
    };
    KedBackendCollection.prototype.name = function (name) {
        return this.applyQuery({ name: name });
    };
    KedBackendCollection.prototype.tags = function () {
        var tags = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            tags[_i] = arguments[_i];
        }
        return this.applyQuery({ tags: tags });
    };
    KedBackendCollection.prototype.branchId = function (branchId) {
        return this.applyQuery({ branchId: branchId });
    };
    KedBackendCollection.prototype.include = function () {
        var graphs = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            graphs[_i] = arguments[_i];
        }
        return this.addToQueryArrayProp("include", graphs);
    };
    KedBackendCollection.prototype.cacheOptimized = function () {
        return this.applyQuery({ cacheBust: _cache_bust__WEBPACK_IMPORTED_MODULE_3__["CacheBust"].getCacheBust(this.table, this.query, this.repo.getUser(), this.includes) });
    };
    KedBackendCollection.prototype.mutationsOnEmpty = function (mutationFactory) {
        var tx = new _ked_backend_client__WEBPACK_IMPORTED_MODULE_1__["BatchRunner"]();
        mutationFactory(tx);
        return this.applyQuery({ mutationsOnEmpty: tx.mutationRequests });
    };
    KedBackendCollection.prototype.single = function (throwers) {
        var _this = this;
        var _a = throwers || {}, onZero = _a.onZero, onMany = _a.onMany;
        return this.toValue().map(function (items) {
            if (items.length === 0) {
                if (onZero)
                    onZero();
                else
                    throw new Error("Single item of " + _this.table + " expected to be returned by query " + JSON.stringify(_this.query) + " but none was found.");
            }
            if (items.length > 1) {
                debugger;
                if (onMany)
                    onMany();
                else
                    console.log("Single item of " + _this.table + " expected to be returned by query " + JSON.stringify(_this.query) + " but " + items.length + " was found.");
            }
            return items[0];
        });
    };
    /*combineLatest<TOther>(other: QueryObservable<TOther>) {
      return this.render(x => x).combineLatest(other);
    }*/
    KedBackendCollection.prototype.update = function (doc, changes, debounce) {
        if (debounce === void 0) { debounce = 1000; }
        this.repo.writer.mutate([{
                op: 'update',
                table: this.table,
                branchId: this.query.branchId,
                id: doc.id,
                deltaDoc: changes,
                targetName: doc.name
            }], debounce);
    };
    KedBackendCollection.prototype.addRelated = function (id, label, relatedDoc) {
        this.repo.writer.mutate([{
                op: 'add-related',
                table: this.table,
                branchId: this.query.branchId,
                id: id,
                graphProp: label,
                relatedDoc: relatedDoc
            }], 0);
    };
    KedBackendCollection.prototype.removeRelated = function (id, label, relatedDoc) {
        this.repo.writer.mutate([{
                op: 'remove-related',
                table: this.table,
                branchId: this.query.branchId,
                id: id,
                graphProp: label,
                relatedDoc: relatedDoc
            }], 0);
    };
    KedBackendCollection.prototype.undoLink = function (id, label, relatedId) {
        if (!this.query.branchId)
            throw new Error("undo links can only be performed on branches");
        this.repo.writer.mutate([{
                op: 'undo-link',
                table: this.table,
                branchId: this.query.branchId,
                id: id,
                graphProp: label,
                relatedId: relatedId
            }], 0);
    };
    KedBackendCollection.prototype.delete = function () {
        var _this = this;
        var ids = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            ids[_i] = arguments[_i];
        }
        this.repo.writer.mutate(ids.map(function (id) { return ({
            op: 'delete',
            table: _this.table,
            id: id
        }); }), 0);
    };
    KedBackendCollection.prototype.unsubscribe = function (subscription) {
        this.repo.querySet.unsubscribe(subscription);
    };
    return KedBackendCollection;
}(_observable_collection__WEBPACK_IMPORTED_MODULE_5__["Collection"]));

/*mixin(
  KedBackendCollection.prototype,
  MappedCollection.prototype,
  "map", "flat", "concat", "render", "load");*/
//# sourceMappingURL=kedbackend-collection.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-query.js":
/*!********************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/kedbackend-query.js ***!
  \********************************************************************/
/*! exports provided: KedBackendQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedBackendQuery", function() { return KedBackendQuery; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ked-backend-client/utils */ "./kedbackend/js/dist/js/ked-backend-client/utils.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ "./kedbackend/js/dist/js/ked-backend-repo/utils.js");
/* harmony import */ var _delta_merge__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./delta-merge */ "./kedbackend/js/dist/js/ked-backend-repo/delta-merge.js");




var KedBackendQuery = /** @class */ (function () {
    function KedBackendQuery(table, query, user, repo, mutationQueue) {
        this.table = table;
        this.query = query;
        this.user = user;
        this.repo = repo;
        this.mutationQueue = mutationQueue;
        this.subscriptions = [];
        this.data = [];
        this.gotInitialResponse = false;
        this.invalid = false;
        this.loadedVersion = 0;
        this._loadPromise = null;
        this.includes = query.include ?
            typeof query.include === 'string' ?
                [query.include] :
                query.include :
            [];
    }
    KedBackendQuery.queryKey = function (table, query) {
        var mutationsOnEmpty = query.mutationsOnEmpty, comparableProps = tslib__WEBPACK_IMPORTED_MODULE_0__["__rest"](query, ["mutationsOnEmpty"]);
        return table + JSON.stringify(comparableProps);
    };
    Object.defineProperty(KedBackendQuery.prototype, "queryKey", {
        get: function () {
            return KedBackendQuery.queryKey(this.table, this.query);
        },
        enumerable: true,
        configurable: true
    });
    KedBackendQuery.prototype.subscribe = function (subscription) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var data, data;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.subscriptions.push(subscription);
                        if (!(this.gotInitialResponse && !this.invalid)) return [3 /*break*/, 1];
                        data = this.getDataWithMutationsApplied(this.mutationQueue.get(), true, this.data);
                        subscription.notifySubscriber(data, this.error);
                        return [3 /*break*/, 4];
                    case 1:
                        data = this.queryLocally();
                        if (!data) return [3 /*break*/, 2];
                        this.data = data;
                        this.error = null;
                        subscription.notifySubscriber(data, this.error);
                        return [3 /*break*/, 4];
                    case 2: return [4 /*yield*/, this.load()];
                    case 3:
                        _a.sent();
                        _a.label = 4;
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    KedBackendQuery.prototype.load = function (version) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var loadPromise;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (this.gotInitialResponse) {
                            // mutationsOnEmpty should never be used twice.
                            delete this.query.mutationsOnEmpty;
                        }
                        if (!(!version && this._loadPromise)) return [3 /*break*/, 2];
                        return [4 /*yield*/, this._loadPromise];
                    case 1: 
                    // loading is ongoing, and caller does not require a recent refresh.
                    // wait for the ongoing load to complete
                    return [2 /*return*/, _a.sent()];
                    case 2:
                        version = version || this.repo.writer.persistedVersion.value;
                        loadPromise = this._loadPromise = this._load(version).then(function (data) {
                            if (_this._loadPromise === loadPromise) {
                                _this.data = data;
                                _this.loadedVersion = Math.max(_this.loadedVersion, version);
                            }
                        }).catch(function (error) {
                            if (_this._loadPromise === loadPromise) {
                                // Noone has refreshed our load. The error is the final result. Set it.
                                _this.error = error;
                            }
                        }).then(function () {
                            if (_this._loadPromise === loadPromise) {
                                // Noone has refreshed our load. We're finished. Data or error is already set.
                                // Mark gotInitialResponse to true and notify subscribers.
                                _this._loadPromise = null;
                                _this.gotInitialResponse = true;
                                _this.notifySubscribers(_this.mutationQueue.get());
                            }
                            else {
                                // A more recent call to load() is ongoing, OR was ongoing but responded
                                // before us.
                                // In any case return this._loadPromise. If it's ongoing we'll wait for it
                                // to finish. If it's null, we'll be returning finally here without
                                // any action, because the action was taken by the refresher.
                                return _this._loadPromise; // Wait for the refreshed load to complete
                            }
                        });
                        return [4 /*yield*/, loadPromise];
                    case 3:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    KedBackendQuery.prototype._load = function (version) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!this.mutationQueue.affectsQuery(this.table, this.query, this.includes)) return [3 /*break*/, 2];
                        // There are outgoing mutations that affects this query.
                        // Need to wait till they reach server and server responds with OK before querying
                        // the server. Otherwise, we may get inaccurate data from server.
                        return [4 /*yield*/, this.repo.writer.waitForVersionToPersist(version)];
                    case 1:
                        // There are outgoing mutations that affects this query.
                        // Need to wait till they reach server and server responds with OK before querying
                        // the server. Otherwise, we may get inaccurate data from server.
                        _a.sent();
                        _a.label = 2;
                    case 2: return [4 /*yield*/, this.queryServer()];
                    case 3: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    KedBackendQuery.prototype.unsubscribe = function (subscription) {
        this.subscriptions = this.subscriptions.filter(function (s) { return s !== subscription; });
    };
    KedBackendQuery.prototype.commitMutations = function (mutations, version) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _i, mutations_1, m, data;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!this.data) return [3 /*break*/, 9];
                        _i = 0, mutations_1 = mutations;
                        _a.label = 1;
                    case 1:
                        if (!(_i < mutations_1.length)) return [3 /*break*/, 8];
                        m = mutations_1[_i];
                        if (!(m.op === 'clear-branch' && (m.branchId === this.query.branchId))) return [3 /*break*/, 3];
                        return [4 /*yield*/, this.refreshOrInvalidate(version)];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                    case 3:
                        if (!(m.op === 'merge' && (!m.targetBranchId ||
                            m.branchId === this.query.branchId ||
                            m.targetBranchId === this.query.branchId))) return [3 /*break*/, 5];
                        return [4 /*yield*/, this.refreshOrInvalidate(version)];
                    case 4:
                        _a.sent();
                        return [2 /*return*/];
                    case 5:
                        if (!(m.op === 'update' && ((m.deltaDoc.tags && this.query.tags) ||
                            (m.deltaDoc.name && this.query.name)))) return [3 /*break*/, 7];
                        // A tag may have been added, or renamed, and
                        // the query is dependent on the same property.
                        // The query must be refreshed from server as we cannot
                        // commit the mutations locally as we don't have all info.
                        return [4 /*yield*/, this.refreshOrInvalidate(version)];
                    case 6:
                        // A tag may have been added, or renamed, and
                        // the query is dependent on the same property.
                        // The query must be refreshed from server as we cannot
                        // commit the mutations locally as we don't have all info.
                        _a.sent();
                        return [2 /*return*/];
                    case 7:
                        _i++;
                        return [3 /*break*/, 1];
                    case 8:
                        data = this.getDataWithMutationsApplied(mutations, false, this.data);
                        this.data = data;
                        _a.label = 9;
                    case 9: return [2 /*return*/];
                }
            });
        });
    };
    KedBackendQuery.prototype.refreshOrInvalidate = function (version) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!(this.subscriptions.length === 0)) return [3 /*break*/, 1];
                        this.invalid = true;
                        return [3 /*break*/, 3];
                    case 1: return [4 /*yield*/, this.load(version)];
                    case 2:
                        _a.sent();
                        _a.label = 3;
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    KedBackendQuery.prototype.notifySubscribers = function (optimisticMutations) {
        var _this = this;
        if (this.data && this.gotInitialResponse) {
            var data_1 = this.getDataWithMutationsApplied(optimisticMutations, true, this.data);
            this.subscriptions.forEach(function (s) {
                s.notifySubscriber(data_1, _this.error);
            });
        }
    };
    KedBackendQuery.prototype.queryLocally = function () {
        return this.repo.querySet.queryLocally(this.table, this.query, this.includes);
    };
    KedBackendQuery.prototype.queryServer = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var data;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.repo.getClient().list(this.table, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.query))];
                    case 1:
                        data = _a.sent();
                        return [2 /*return*/, data];
                }
            });
        });
    };
    KedBackendQuery.prototype.getDataWithMutationsApplied = function (mutations, optimistic, data) {
        var _this = this;
        mutations.forEach(function (mutation) {
            data = _this.applyMutationsOnData(data, mutation, optimistic);
        });
        return data;
    };
    KedBackendQuery.prototype.applyMutationsOnData = function (data, m, optimistic) {
        if (Object(_utils__WEBPACK_IMPORTED_MODULE_2__["branchSensitive"])(m) && m.branchId != this.query.branchId)
            return data;
        var _a = this, table = _a.table, includes = _a.includes, listOptions = _a.query;
        var sourceIds = listOptions.hasEdgesFrom ? [].concat(listOptions.hasEdgesFrom || []) : [];
        var requestedTags = listOptions.tags ? [].concat(listOptions.tags || []) : [];
        switch (m.op) {
            case 'update': {
                return Object(_ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_1__["updateArray"])(data, function (doc) {
                    if (doc.id === m.id) {
                        // Apply delta on updated document
                        var updatedDoc = Object(_delta_merge__WEBPACK_IMPORTED_MODULE_3__["applyDelta"])(doc, m.deltaDoc);
                        if (optimistic)
                            updatedDoc.$meta = 'updating';
                        return updatedDoc;
                    }
                    // If id does not apply to this doc, search in graphs the id is found
                    // among graph included docs, and if so, update that one:
                    includes.forEach(function (label) {
                        var _a;
                        var includedDocs = doc[label];
                        if (includedDocs) {
                            var updatedArray = Object(_ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_1__["updateArray"])(includedDocs, function (related) {
                                if (related.id !== m.id)
                                    return related;
                                var updatedRelated = Object(_delta_merge__WEBPACK_IMPORTED_MODULE_3__["applyDelta"])(related, m.deltaDoc);
                                if (optimistic)
                                    updatedRelated.$meta = 'updating';
                                return updatedRelated;
                            });
                            if (updatedArray !== includedDocs) {
                                doc = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, doc, (_a = {}, _a[label] = updatedArray, _a));
                            }
                        }
                    });
                    return doc;
                });
            }
            case 'add-related':
                if (table === m.table && includes.indexOf(m.graphProp) !== -1) {
                    // If expression is `db.courseBlocks....whatever.. .include("abilities")`, detect: db.courseBlocks.addRelated(blockId, 'abilities', ...)
                    // ...because table = 'courseBlocks' and includes has "abilities".
                    return Object(_ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_1__["updateArray"])(data, function (doc) {
                        var _a;
                        if (doc.id !== m.id)
                            return doc;
                        var relatedDoc = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, m.relatedDoc);
                        if (optimistic)
                            relatedDoc.$meta = 'adding';
                        return tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, doc, (_a = {}, _a[m.graphProp] = doc[m.graphProp].concat([relatedDoc]), _a));
                    });
                }
                if (listOptions.hasEdgesFrom) {
                    if (sourceIds.includes(m.id)) {
                        // If expression is:
                        //   `db.courseBlocks.hasEdgesFrom([courseId])`  (meaning table='courseBlocks' and sourceIds includes courseId)
                        // , detect: db.courseInstances.addRelated(courseId, 'courseBlocks', ....) // m.graphProp === 'blocks'--> getTableFromLabel --> 'courseBlocks'
                        if (table === Object(_utils__WEBPACK_IMPORTED_MODULE_2__["getTableFromLabel"])(m.table, m.graphProp)) {
                            if (!listOptions.tags)
                                return data.concat(this.setGraphProps(m.relatedDoc));
                            if (m.relatedDoc.tags && requestedTags.some(function (tag) { return m.relatedDoc.tags.includes(tag); })) {
                                return data.concat(this.setGraphProps(m.relatedDoc));
                            }
                        }
                    }
                }
                if (listOptions.ids && listOptions.ids.some(function (id) { return id === m.relatedDoc.id; })) {
                    // A certain ID is observed. A doc with this id is being added.
                    // Add the doc to the result. Exactly this WILL happen in the following typical scenario:
                    // 1. User adds a related document to a list.
                    // 2. Document remains within the MutationQueue while batch-request is being processed by server.
                    // 3. User clicks the added item to edit or view it (or our component redirects to its editor)
                    // 4. A new query of that particular ID is subscribed to {ids=[theId]}
                    //    KedBackendQuery.subscribe then does this:
                    //      1. Call queryLocally() before querying server
                    //      2. queryLocally() inspects mutations and finds a match, returning an empty list
                    //         (assumes as we are adding it, it can't exist on the server anyway)
                    //      3. KedBackendQUery applies mutations onto the empty list, and ends up here to add
                    //         it optimistically.
                    //      4. When server responds with 200 OK, calls us here again with optimistic=false
                    //         to "persist" it in the query's data array.
                    //      4B: If not 200 OK, mutation may be gone and the subscriber will se an error page
                    //         "Could not find entity with id X." along with a red error message on the screen
                    //         about that it failed to save on server.
                    return data.concat(this.setGraphProps(m.relatedDoc));
                }
                return data;
            case 'remove-related':
                if (table === m.table && includes.indexOf(m.graphProp) !== -1) {
                    return Object(_ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_1__["updateArray"])(data, function (doc) {
                        var _a;
                        var includedDocs = doc[m.graphProp];
                        if (!includedDocs)
                            return doc;
                        if (doc.id !== m.id)
                            return doc;
                        return tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, doc, (_a = {}, _a[m.graphProp] = optimistic ?
                            // Mark related-doc-to-remove with $meta: 'deleting'
                            includedDocs.map(function (d) { return d.id !== m.relatedDoc.id ?
                                d : tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, d, { $meta: 'deleting' }); }) :
                            // Delete related-doc-to-remove from doc[grapProp]:
                            includedDocs.filter(function (d) { return d.id !== m.relatedDoc.id; }), _a));
                    });
                }
                if (listOptions.hasEdgesFrom) {
                    if (sourceIds.includes(m.id))
                        return optimistic ?
                            data.map(function (d) { return d.id === m.relatedDoc.id ? tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, d, { $meta: 'deleting' }) : d; }) :
                            data.filter(function (d) { return d.id !== m.relatedDoc.id; });
                }
                return data;
            case 'delete':
                if (table === m.table) {
                    return data.filter(function (d) { return d.id !== m.id; });
                }
                else if (listOptions.include) {
                    var includedTables = includes
                        .map(function (label) { return ({ label: label, table: Object(_utils__WEBPACK_IMPORTED_MODULE_2__["getTableFromLabel"])(table, label) }); });
                    var labels_1 = includedTables.filter(function (_a) {
                        var table = _a.table;
                        return table === m.table;
                    });
                    if (labels_1.length > 0) {
                        return Object(_ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_1__["updateArray"])(data, function (doc) {
                            labels_1.forEach(function (_a) {
                                var label = _a.label;
                                var _b;
                                var relatedDocs = doc[label];
                                if (relatedDocs) {
                                    doc = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, doc, (_b = {}, _b[label] = optimistic ?
                                        relatedDocs.map(function (d) { return d.id === m.id ? tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, d, { $meta: 'deleting' }) : d; }) :
                                        relatedDocs.filter(function (_a) {
                                            var id = _a.id;
                                            return id !== m.id;
                                        }), _b));
                                }
                            });
                            return doc;
                        });
                    }
                }
                return data;
            default:
                return data;
        }
    };
    KedBackendQuery.prototype.setGraphProps = function (doc) {
        var copy = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, doc);
        this.includes.forEach(function (label) { return copy[label] = copy[label] || []; });
        return copy;
    };
    return KedBackendQuery;
}());

//# sourceMappingURL=kedbackend-query.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-repo.js":
/*!*******************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/kedbackend-repo.js ***!
  \*******************************************************************/
/*! exports provided: KedBackendRepo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedBackendRepo", function() { return KedBackendRepo; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json");
var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_1___namespace = /*#__PURE__*/__webpack_require__.t(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json", 1);
/* harmony import */ var _kedbackend_collection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./kedbackend-collection */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-collection.js");
/* harmony import */ var _query_set__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./query-set */ "./kedbackend/js/dist/js/ked-backend-repo/query-set.js");
/* harmony import */ var _mutation_queue__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./mutation-queue */ "./kedbackend/js/dist/js/ked-backend-repo/mutation-queue.js");
/* harmony import */ var _kedbackend_writer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./kedbackend-writer */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-writer.js");
/* harmony import */ var _delta_collection_delta_collection__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./delta-collection/delta-collection */ "./kedbackend/js/dist/js/ked-backend-repo/delta-collection/delta-collection.js");







var KedBackendRepo = /** @class */ (function () {
    function KedBackendRepo(getClient, getUser, getUserDisplayName, defaultQueryOptions, mutationQueue, querySet, writer, cacheOptimized) {
        var _this = this;
        this.getClient = getClient;
        this.getUser = getUser;
        this.getUserDisplayName = getUserDisplayName;
        this.defaultQueryOptions = defaultQueryOptions;
        this.mutationQueue = mutationQueue;
        this.querySet = querySet;
        this.writer = writer;
        this.cacheOptimized = cacheOptimized;
        if (!defaultQueryOptions)
            this.defaultQueryOptions = {};
        if (!mutationQueue)
            this.mutationQueue = new _mutation_queue__WEBPACK_IMPORTED_MODULE_4__["MutationQueue"]();
        if (!querySet)
            this.querySet = new _query_set__WEBPACK_IMPORTED_MODULE_3__["QuerySet"](this.mutationQueue);
        if (!writer)
            this.writer = new _kedbackend_writer__WEBPACK_IMPORTED_MODULE_5__["KedBackendWriter"](this.mutationQueue, this.querySet, getClient, getUser, getUserDisplayName);
        Object.keys(kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_1__["tables"]).forEach(function (table) {
            var collection = new _kedbackend_collection__WEBPACK_IMPORTED_MODULE_2__["KedBackendCollection"](_this, table, defaultQueryOptions || {});
            if (cacheOptimized) {
                collection = collection.cacheOptimized();
            }
            _this[table] = collection;
        });
        this.deltas = new _delta_collection_delta_collection__WEBPACK_IMPORTED_MODULE_6__["DeltaCollection"](this.writer.deltaCache, {
            branchId: this.defaultQueryOptions.branchId // If branchId is undefined. DeltaCollection will respond with Error on subscribe()
        });
    }
    KedBackendRepo.prototype.table = function (tableName) {
        var collection = new _kedbackend_collection__WEBPACK_IMPORTED_MODULE_2__["KedBackendCollection"](this, tableName, this.defaultQueryOptions);
        if (this.cacheOptimized)
            collection = collection.cacheOptimized();
        return collection;
    };
    KedBackendRepo.prototype._clone = function (queryOptions, cacheOptimized) {
        var clone = new KedBackendRepo(this.getClient, this.getUser, this.getUserDisplayName, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.defaultQueryOptions, queryOptions), this.mutationQueue, this.querySet, this.writer, cacheOptimized === undefined ? this.cacheOptimized : cacheOptimized);
        return clone;
    };
    KedBackendRepo.prototype.branch = function (branchId) {
        return this._clone({ branchId: branchId });
    };
    KedBackendRepo.prototype.role = function (role) {
        return this._clone({ role: role });
    };
    KedBackendRepo.prototype.optimizeCache = function () {
        return this._clone({}, true);
    };
    KedBackendRepo.prototype.clearBranch = function () {
        if (!this.defaultQueryOptions.branchId)
            throw new Error("Cannot clear master branch");
        this.writer.mutate([{ op: 'clear-branch', branchId: this.defaultQueryOptions.branchId }], 0);
    };
    KedBackendRepo.prototype.merge = function (targetBranchId) {
        if (!this.defaultQueryOptions.branchId)
            throw new Error("Cannot merge from master branch");
        this.writer.mutate([{ op: 'merge', branchId: this.defaultQueryOptions.branchId, targetBranchId: targetBranchId }], 0);
    };
    KedBackendRepo.prototype.saveNow = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.writer.waitForVersionToPersist(this.writer.currentVersion)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    return KedBackendRepo;
}());

//# sourceMappingURL=kedbackend-repo.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-subscription.js":
/*!***************************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/kedbackend-subscription.js ***!
  \***************************************************************************/
/*! exports provided: KedBackendSubscription */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedBackendSubscription", function() { return KedBackendSubscription; });
var KedBackendSubscription = /** @class */ (function () {
    function KedBackendSubscription(subscriber, collection) {
        this.subscriber = subscriber;
        this.collection = collection;
    }
    KedBackendSubscription.prototype.notifySubscriber = function (data, error) {
        try {
            if (error)
                this.subscriber([], error, this);
            else if (data !== this.lastNotifiedData) { // Will in-fact be equal by reference if data is same as last notification (as we use an immutable approach on data)
                this.lastNotifiedData = data;
                this.subscriber(data, error, this);
            }
        }
        catch (ex) {
            try {
                this.subscriber([], ex, this);
            }
            catch (ex2) {
                console.error("Error while notifying KedBackendSubscriber:", ex2, 'originally notified error:', ex);
            }
        }
    };
    KedBackendSubscription.prototype.unsubscribe = function () {
        this.collection.unsubscribe(this);
    };
    return KedBackendSubscription;
}());

//# sourceMappingURL=kedbackend-subscription.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-writer.js":
/*!*********************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/kedbackend-writer.js ***!
  \*********************************************************************/
/*! exports provided: KedBackendWriter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedBackendWriter", function() { return KedBackendWriter; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _mutation_queue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./mutation-queue */ "./kedbackend/js/dist/js/ked-backend-repo/mutation-queue.js");
/* harmony import */ var _ked_backend_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../ked-backend-client */ "./kedbackend/js/dist/js/ked-backend-client/index.js");
/* harmony import */ var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json");
var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_3___namespace = /*#__PURE__*/__webpack_require__.t(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json", 1);
/* harmony import */ var _cache_bust__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./cache-bust */ "./kedbackend/js/dist/js/ked-backend-repo/cache-bust.js");
/* harmony import */ var _observable__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../observable */ "./kedbackend/js/dist/js/observable/index.js");
/* harmony import */ var _delta_collection_delta_cache__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./delta-collection/delta-cache */ "./kedbackend/js/dist/js/ked-backend-repo/delta-collection/delta-cache.js");







var KedBackendWriter = /** @class */ (function () {
    function KedBackendWriter(mutationQueue, querySet, getClient, getUser, getUserDisplayName) {
        this.mutationQueue = mutationQueue;
        this.querySet = querySet;
        this.getClient = getClient;
        this.getUser = getUser;
        this.getUserDisplayName = getUserDisplayName;
        this._timeoutId = null;
        this._isSavingPromise = null;
        this.currentVersion = 0;
        this.persistedVersion = new _observable__WEBPACK_IMPORTED_MODULE_5__["Emitter"](0);
        this.errorSubscribers = [];
        this.stateSubscribers = [];
        this.deltaCache = new _delta_collection_delta_cache__WEBPACK_IMPORTED_MODULE_6__["DeltaCache"](getClient, getUser, getUserDisplayName);
    }
    Object.defineProperty(KedBackendWriter.prototype, "isSaving", {
        get: function () { return !!this._isSavingPromise; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(KedBackendWriter.prototype, "isEdited", {
        get: function () { return this.mutationQueue.get().length > 0; },
        enumerable: true,
        configurable: true
    });
    KedBackendWriter.prototype.onError = function (callback) {
        this.errorSubscribers.push(callback);
    };
    KedBackendWriter.prototype.onStateChange = function (callback) {
        this.stateSubscribers.push(callback);
    };
    KedBackendWriter.prototype.off = function (callback) {
        this.errorSubscribers = this.errorSubscribers.filter(function (s) { return s !== callback; });
        this.stateSubscribers = this.stateSubscribers.filter(function (s) { return s !== callback; });
    };
    KedBackendWriter.prototype.dispatchError = function (error, retryable) {
        var _this = this;
        this.errorSubscribers.forEach(function (callback) {
            try {
                callback(error, retryable, _this);
            }
            catch (_) { }
        });
    };
    KedBackendWriter.prototype.dispatchStateChange = function () {
        var _this = this;
        this.stateSubscribers.forEach(function (callback) {
            try {
                callback(_this);
            }
            catch (_) { }
        });
    };
    KedBackendWriter.prototype.mutate = function (mutations, debounce) {
        this.mutationQueue.add(mutations);
        ++this.currentVersion;
        this.dispatchStateChange();
        this.querySet.notifySubscribers();
        this.deltaCache.applyMutations(this.mutationQueue.get(), { optimistic: true });
        if (!this._isSavingPromise) {
            if (this._timeoutId)
                clearTimeout(this._timeoutId);
            this._timeoutId = setTimeout(this.save.bind(this), debounce);
        }
        // If isSaving, we don't need to do anything, becase it will re-check if additional
        // mutations have come, when saving is done.
    };
    KedBackendWriter.prototype.retrySave = function () {
        return this.save();
    };
    KedBackendWriter.prototype.waitForVersionToPersist = function (version) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var persistedVersion;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.persistedVersion.load()];
                    case 1:
                        persistedVersion = _a.sent();
                        if (!(persistedVersion < version)) return [3 /*break*/, 3];
                        this.save(); // Be more eager to save
                        return [4 /*yield*/, this.persistedVersion.filter(function (persistedVersion) { return persistedVersion >= version; }).load()];
                    case 2:
                        _a.sent();
                        _a.label = 3;
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    KedBackendWriter.prototype.save = function () {
        var _this = this;
        if (this._timeoutId)
            clearTimeout(this._timeoutId);
        if (this._isSavingPromise)
            return this._isSavingPromise;
        if (!this.isEdited)
            return Promise.resolve();
        this._timeoutId = null;
        this._isSavingPromise = this._save();
        this._isSavingPromise.catch(function () { }).then(function () { return _this._isSavingPromise = null; });
        return this._isSavingPromise;
    };
    KedBackendWriter.prototype._save = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var mutations, version, mutationRequests, res_1, etagMutations, error_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.dispatchStateChange();
                        mutations = this.mutationQueue.get();
                        version = this.currentVersion;
                        this.mutationQueue.moveToSavingQueue();
                        mutationRequests = this.mapMutations(mutations);
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 6, 11, 12]);
                        return [4 /*yield*/, this.getClient().batch(mutationRequests)];
                    case 2:
                        res_1 = _a.sent();
                        etagMutations = Object.keys(res_1.newEtags).map(function (id) { return ({
                            op: 'update',
                            table: null,
                            id: id,
                            deltaDoc: { $etag: res_1.newEtags[id] },
                            targetName: null // We don't have the target name. But this mutation won't be visible in a DeltaCollection anyway, so it wont be used.
                        }); });
                        // Invalidate cache
                        _cache_bust__WEBPACK_IMPORTED_MODULE_4__["CacheBust"].invalidateCache(mutationRequests, this.getUser());
                        // Commmit mutations along with etagMutations into queries cached data
                        this.persistedVersion.dispatch(version);
                        this.deltaCache.applyMutations(mutations, { optimistic: false });
                        return [4 /*yield*/, this.querySet.commitMutations(_mutation_queue__WEBPACK_IMPORTED_MODULE_1__["MutationQueue"].merge(mutations, etagMutations), version)];
                    case 3:
                        _a.sent();
                        // On success, clear saving queue as the mutations will now be committed to all query's data instead.
                        this.mutationQueue.clearSavingQueue();
                        this.dispatchStateChange(); // isEdited may have turned to false
                        // Finally, notify subscribers so that views get updated with committed results
                        this.querySet.notifySubscribers();
                        if (!(this.mutationQueue.get().length > 0)) return [3 /*break*/, 5];
                        // Additional mutations happend while we were saving. Handle them as well.
                        return [4 /*yield*/, this._save()];
                    case 4:
                        // Additional mutations happend while we were saving. Handle them as well.
                        _a.sent();
                        _a.label = 5;
                    case 5: return [3 /*break*/, 12];
                    case 6:
                        error_1 = _a.sent();
                        this.persistedVersion.dispatchError(error_1);
                        if (!(error_1 && error_1.name && error_1.name.startsWith("http4"))) return [3 /*break*/, 9];
                        // Access Control denied, bad request or similar. Throw mutations away.
                        this.dispatchError(error_1, false);
                        this.mutationQueue.clearSavingQueue();
                        this.dispatchStateChange(); // isEdited may have turned to false
                        this.querySet.notifySubscribers();
                        if (!(this.mutationQueue.get().length > 0)) return [3 /*break*/, 8];
                        // Ho ho! Additional mutations happend while we were saving. Handle them alone. THey might be more lucky.
                        return [4 /*yield*/, this._save()];
                    case 7:
                        // Ho ho! Additional mutations happend while we were saving. Handle them alone. THey might be more lucky.
                        _a.sent();
                        _a.label = 8;
                    case 8: return [3 /*break*/, 10];
                    case 9:
                        this.dispatchError(error_1, true);
                        _a.label = 10;
                    case 10: return [3 /*break*/, 12];
                    case 11:
                        this.dispatchStateChange();
                        return [7 /*endfinally*/];
                    case 12: return [2 /*return*/];
                }
            });
        });
    };
    KedBackendWriter.prototype.mapMutations = function (mutations) {
        var br = new _ked_backend_client__WEBPACK_IMPORTED_MODULE_2__["BatchRunner"]();
        mutations.forEach(function (m) {
            switch (m.op) {
                case 'update':
                    br.update(m.table, m.id, m.deltaDoc, m.branchId);
                    break;
                case 'add-related':
                    if (!m.relatedDoc.$etag) {
                        // No $etag means this is a new document. Add it before linking to it:
                        br.add(kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_3__["tables"][m.table].relationships[m.graphProp], m.relatedDoc, m.branchId);
                    }
                    br.link2(m.table, m.id, m.graphProp, m.relatedDoc.id, m.branchId);
                    break;
                case 'remove-related':
                    br.unlink2(m.table, m.id, m.graphProp, m.relatedDoc.id, m.branchId);
                    break;
                case 'undo-link':
                    br.undoLink(m.table, m.id, m.graphProp, m.relatedId, m.branchId);
                    break;
                case 'delete':
                    br.delete(m.table, m.id);
                    break;
                case 'clear-branch':
                    br.clearBranch(m.branchId);
                    break;
                case 'merge':
                    br.merge(m.branchId, m.targetBranchId);
                    break;
            }
        });
        return br.mutationRequests;
    };
    return KedBackendWriter;
}());

//# sourceMappingURL=kedbackend-writer.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/mutation-queue.js":
/*!******************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/mutation-queue.js ***!
  \******************************************************************/
/*! exports provided: MutationQueue */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MutationQueue", function() { return MutationQueue; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ "./kedbackend/js/dist/js/ked-backend-repo/utils.js");
/* harmony import */ var _delta_merge__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./delta-merge */ "./kedbackend/js/dist/js/ked-backend-repo/delta-merge.js");



var MutationQueue = /** @class */ (function () {
    function MutationQueue() {
        this.queue = [];
        this.savingQueue = [];
    }
    MutationQueue.prototype.add = function (mutations) {
        this.queue = MutationQueue.merge(this.queue, mutations);
    };
    MutationQueue.prototype.moveToSavingQueue = function () {
        this.savingQueue = MutationQueue.merge(this.savingQueue, this.queue);
        this.queue = [];
    };
    MutationQueue.prototype.clearSavingQueue = function () {
        this.savingQueue = [];
    };
    MutationQueue.prototype.get = function () {
        return this.savingQueue.concat(this.queue);
    };
    MutationQueue.prototype.affectsQuery = function (table, query, includes) {
        var mutations = this.get();
        if (mutations.some(function (m) { return m.op === 'merge' || m.op === 'clear-branch'; }))
            return true;
        if (query.ids) {
            // A query with "ids" filter will be easy to detect a no-match on:
            return mutations.some(function (m) { return Object(_utils__WEBPACK_IMPORTED_MODULE_1__["globalOp"])(m) || (!Object(_utils__WEBPACK_IMPORTED_MODULE_1__["branchSensitive"])(m) || m.branchId === query.branchId) &&
                query.ids.includes(m.id); });
        }
        // Otherwise, check if mutations affect same branch and table. Could be done more fine grained,
        // but that would only be a suboptimization.
        return mutations.some(function (m) {
            return m.op === 'delete' ?
                m.table === table || (includes.some(function (label) { return Object(_utils__WEBPACK_IMPORTED_MODULE_1__["getTableFromLabel"])(table, label) === m.table; })) :
                Object(_utils__WEBPACK_IMPORTED_MODULE_1__["globalOp"])(m) ? true :
                    m.branchId == query.branchId &&
                        (m.table === table || (m.op !== 'update' && ([table].concat(includes.map(function (label) { return Object(_utils__WEBPACK_IMPORTED_MODULE_1__["getTableFromLabel"])(table, label); })).some(function (table) { return Object(_utils__WEBPACK_IMPORTED_MODULE_1__["getTableFromLabel"])(m.table, m.graphProp) === table; }))));
        });
    };
    MutationQueue.merge = function (queue1, queue2) {
        var mutableQueue1 = queue1.slice();
        var mutableQueue2 = queue2.slice();
        //if (mutableQueue1.length > 0) debugger;
        var len = queue1.length;
        var _loop_1 = function (i) {
            var m = queue1[i];
            if (m.op === 'update') {
                var overlappingIdOpIdx = mutableQueue2.findIndex(function (newMut) {
                    return newMut.op === 'update' &&
                        newMut.branchId === m.branchId &&
                        newMut.id === m.id;
                });
                if (overlappingIdOpIdx >= 0) {
                    mutableQueue1[i] = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, m, { deltaDoc: Object(_delta_merge__WEBPACK_IMPORTED_MODULE_2__["mergeDeltas"])(m.deltaDoc, mutableQueue2[overlappingIdOpIdx].deltaDoc) });
                    mutableQueue2.splice(overlappingIdOpIdx, 1);
                }
            }
        };
        for (var i = 0; i < len; ++i) {
            _loop_1(i);
        }
        return mutableQueue1.concat(mutableQueue2);
    };
    return MutationQueue;
}());

//# sourceMappingURL=mutation-queue.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/query-set.js":
/*!*************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/query-set.js ***!
  \*************************************************************/
/*! exports provided: QuerySet */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QuerySet", function() { return QuerySet; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _kedbackend_query__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./kedbackend-query */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-query.js");
/* harmony import */ var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json");
var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_2___namespace = /*#__PURE__*/__webpack_require__.t(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json", 1);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils */ "./kedbackend/js/dist/js/ked-backend-repo/utils.js");




var QuerySet = /** @class */ (function () {
    function QuerySet(mutationQueue) {
        this.mutationQueue = mutationQueue;
        this.queries = [];
    }
    QuerySet.prototype.commitMutations = function (mutations, version) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Promise.all(this.queries.map(function (q) { return q.commitMutations(mutations, version); }))];
                    case 1:
                        _a.sent();
                        this.cleanupInvalidQueries();
                        return [2 /*return*/];
                }
            });
        });
    };
    QuerySet.prototype.cleanupInvalidQueries = function () {
        this.queries = this.queries.filter(function (q) {
            if (q.invalid) {
                if (q.timeoutHandle) {
                    clearTimeout(q.timeoutHandle);
                    q.timeoutHandle = null;
                }
                return false;
            }
            return true;
        });
    };
    QuerySet.prototype.notifySubscribers = function () {
        var optimisticMutations = this.mutationQueue.get();
        this.queries.forEach(function (q) {
            q.notifySubscribers(optimisticMutations);
        });
    };
    QuerySet.prototype.findQuery = function (table, query) {
        return this.queries.find(function (q) { return q.queryKey === _kedbackend_query__WEBPACK_IMPORTED_MODULE_1__["KedBackendQuery"].queryKey(table, query); });
    };
    QuerySet.prototype.queryLocally = function (table, query, includes) {
        // For now, only handle this very common and special case (which
        // will save a lot of unnescessary network traffic if I am thinking right...)
        var mutations = this.mutationQueue.get();
        // Check if the query wants to get a single entity by its ID:
        if (query.ids && query.ids.length === 1) {
            // And if so, if we have an outgoing mutation to create that entity:
            if (mutations.some(function (m) { return m.op === 'add-related' && m.relatedDoc.id === query.ids[0]; })) {
                // Then return an EMPTY response, signalling that we can resolve this locally,
                // but let the optistic feature of KedBackendQuery apply the mutation before
                // notifying subscribers (we don't want it to be persistent before the server
                // has accepted the mutation)
                return [];
            }
        }
        // OK, another quite common case is when we ask for a certain ID and that ID replies
        // within another query
        if (query.hasEdgesFrom || query.hasEdgesTo)
            return null; // Not possible to handle
        if (!query.ids)
            return null; // For now, just take hight for this particular and most common case!
        var _loop_1 = function (q) {
            if (!q.gotInitialResponse)
                return "continue";
            if (q.query.branchId !== query.branchId)
                return "continue";
            if (q.query.flags)
                return "continue"; // It would be complex to support various flags. Query's data may include ids only. Can't rely on the query.
            var qIncludes = q.includes;
            if (qIncludes.length > 0 && (!query.include || query.include.length === 0)) {
                // We don't include, but this query does. Check if we can find our result within it.
                var label = qIncludes.find(function (l) { return kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_2__["tables"][q.table]["relationships"][l] === table; });
                if (label) {
                    var res_1 = {};
                    for (var _i = 0, _a = q.data; _i < _a.length; _i++) {
                        var entity = _a[_i];
                        var subData = Object(_utils__WEBPACK_IMPORTED_MODULE_3__["queryArray"])(query, entity[label]);
                        subData.forEach(function (r) { return res_1[r.id] = r; });
                    }
                    var result_1 = Object.keys(res_1).map(function (id) { return res_1[id]; });
                    // Only return result if we could look up every requested ID:
                    if (!query.ids.every(function (id) { return result_1.some(function (x) { return x.id === id; }); }))
                        return "continue";
                    return { value: result_1 };
                }
            }
            if (!includes.every(function (label) { return qIncludes.includes(label); }))
                return "continue";
            // Lastly, if the query includes all graphs that we do, pick the subset from that query.
            // Concrete example: We observe a certain Task by ID and want its knowledgeRequirements along with it,
            // and there's another query of all tasks that also includes knowledgeRequirements. Use it. 
            if (q.table === table) {
                var result_2 = Object(_utils__WEBPACK_IMPORTED_MODULE_3__["queryArray"])(query, q.data);
                // Only return result if we could look up every requested ID:
                if (!query.ids.every(function (id) { return result_2.some(function (x) { return x.id === id; }); }))
                    return "continue";
                return { value: result_2 };
            }
        };
        for (var _i = 0, _a = this.queries; _i < _a.length; _i++) {
            var q = _a[_i];
            var state_1 = _loop_1(q);
            if (typeof state_1 === "object")
                return state_1.value;
        }
    };
    QuerySet.prototype.subscribe = function (subscription) {
        var _a = subscription.collection, table = _a.table, query = _a.query, repo = _a.repo;
        var kbQuery = this.findQuery(table, query);
        if (!kbQuery) {
            kbQuery = new _kedbackend_query__WEBPACK_IMPORTED_MODULE_1__["KedBackendQuery"](table, query, repo.getUser(), repo, this.mutationQueue);
            this.queries.push(kbQuery);
        }
        else {
            if (kbQuery.timeoutHandle) {
                clearTimeout(kbQuery.timeoutHandle);
                kbQuery.timeoutHandle = null;
            }
        }
        kbQuery.subscribe(subscription);
    };
    QuerySet.prototype.unsubscribe = function (subscription) {
        var _this = this;
        var _a = subscription.collection, table = _a.table, query = _a.query, repo = _a.repo;
        var kbQuery = this.findQuery(table, query);
        if (kbQuery) {
            // Prohibit further notifications to this subscription:
            kbQuery.unsubscribe(subscription);
            // Release unnescessary memory when there are no more subscriptions of this query, by removing the query itself
            // To that in a delayed manner, so that an unsubscribe() followed by an immediate subscribe() don't have to re-query the server:
            if (kbQuery.subscriptions.length === 0) {
                // Schedule for garbage collection in 5 minutes:
                kbQuery.timeoutHandle = setTimeout(function () {
                    // Check if kbQuery still has no subscriptions (not certain! A new subscriber may have come along...)
                    if (kbQuery.subscriptions.length === 0) {
                        // Still no subscriptions on it, time to release some memory and forget the in-memory cache of the query result
                        _this.queries = _this.queries.filter(function (q) { return q !== kbQuery; });
                    }
                }, this.queries.length > 50 ?
                    500 : // Don't host too many queries. Garbage collect this within 500 ms
                    5 * 60000); // Allow query in memory for another 5 minutes
            }
        }
    };
    return QuerySet;
}());

//# sourceMappingURL=query-set.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/utils.js":
/*!*********************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/utils.js ***!
  \*********************************************************/
/*! exports provided: getTableFromLabel, queryArray, AND, getFilterFromQuery, branchSensitive, globalOp */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTableFromLabel", function() { return getTableFromLabel; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryArray", function() { return queryArray; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AND", function() { return AND; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFilterFromQuery", function() { return getFilterFromQuery; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "branchSensitive", function() { return branchSensitive; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "globalOp", function() { return globalOp; });
/* harmony import */ var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json");
var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_0___namespace = /*#__PURE__*/__webpack_require__.t(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json", 1);

function getTableFromLabel(table, label) {
    return kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_0__["tables"][table].relationships[label];
}
function queryArray(query, data) {
    var filter = getFilterFromQuery(query);
    return data.filter(filter);
}
function AND(filter1, filter2) {
    return function (x) { return filter1(x) && filter2(x); };
}
function getFilterFromQuery(query) {
    var filter = function (x) { return true; };
    if (query.from)
        return AND(filter, function (x) { return x.dateTime >= query.from; });
    if (query.to)
        return AND(filter, function (x) { return x.dateTime < query.to; });
    if (query.ids)
        return AND(filter, function (x) { return query.ids.includes(x.id); });
    if (query.name)
        return AND(filter, function (x) { return x.name === query.name; });
    if (query.tags)
        return AND(filter, function (x) { return x.tags && [].concat(query.tags || []).some(function (tag) { return x.tags.includes(tag); }); });
    // query.hasEdgesFrom and query.hasEdgesTo cannot by filtered here
    return filter;
}
function branchSensitive(m) {
    return m.op !== 'delete';
}
function globalOp(m) {
    return m.op === 'clear-branch' || m.op === 'merge';
}
//# sourceMappingURL=utils.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-model-migrator/index.js":
/*!***********************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-model-migrator/index.js ***!
  \***********************************************************/
/*! exports provided: KedModelMigratorMixin */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedModelMigratorMixin", function() { return KedModelMigratorMixin; });
/* harmony import */ var _migrate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./migrate */ "./kedbackend/js/dist/js/ked-model-migrator/migrate.js");

var KedModelMigratorMixin = function (client) {
    if (client.__migrator_mixed_in)
        return;
    client.__migrator_mixed_in = true;
    var get = client.get;
    var list = client.list;
    client.get = function (table, id, options) {
        var include = options && options.include;
        return get.apply(this, arguments).then(function (result) {
            Object(_migrate__WEBPACK_IMPORTED_MODULE_0__["default"])(result, table, include && include.toString().split(','));
            return result;
        });
    };
    client.list = function (table, options) {
        var include = options && options.include;
        return list.apply(this, arguments).then(function (result) {
            result.forEach(function (doc) { return Object(_migrate__WEBPACK_IMPORTED_MODULE_0__["default"])(doc, table, include && include.toString().split(',')); });
            return result;
        });
    };
    return client;
};
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-model-migrator/migrate-course.js":
/*!********************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-model-migrator/migrate-course.js ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return migrateCourse; });
/* harmony import */ var _migrate_task__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./migrate-task */ "./kedbackend/js/dist/js/ked-model-migrator/migrate-task.js");

function migrateCourse(course, graphs) {
    if (!course.modules)
        course.modules = [];
    course.modules.forEach(function (module) {
        if (!module.resources) {
            module.resources = [];
        }
        if (!module.taskIds) {
            module.taskIds = [];
        }
    });
    if (!course.responsibleTeachers) {
        course.responsibleTeachers = [];
    }
    // Earlier wrong spelling of resources
    if ('resourses' in course && !('resources' in course)) {
        course.resources = course.resourses;
        delete course.resourses;
    }
    if (!course.resources) {
        course.resources = [];
    }
    if (graphs) {
        graphs.forEach(function (label) {
            switch (label) {
                case 'tasks':
                    course.tasks.forEach(function (task) { return Object(_migrate_task__WEBPACK_IMPORTED_MODULE_0__["default"])(task); });
                    break;
            }
        });
    }
}
//# sourceMappingURL=migrate-course.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-model-migrator/migrate-task.js":
/*!******************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-model-migrator/migrate-task.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return migrateTask; });
function migrateTask(task) {
    if (!task.resources)
        task.resources = [];
}
//# sourceMappingURL=migrate-task.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-model-migrator/migrate.js":
/*!*************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-model-migrator/migrate.js ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return migrate; });
/* harmony import */ var _migrate_course__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./migrate-course */ "./kedbackend/js/dist/js/ked-model-migrator/migrate-course.js");
/* harmony import */ var _migrate_task__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./migrate-task */ "./kedbackend/js/dist/js/ked-model-migrator/migrate-task.js");


function migrate(doc, table, graphs) {
    switch (table) {
        case "courses":
            Object(_migrate_course__WEBPACK_IMPORTED_MODULE_0__["default"])(doc, graphs);
            break;
        case "tasks":
            Object(_migrate_task__WEBPACK_IMPORTED_MODULE_1__["default"])(doc);
            break;
    }
}
//# sourceMappingURL=migrate.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/collection.js":
/*!********************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/collection.js ***!
  \********************************************************/
/*! exports provided: Collection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Collection", function() { return Collection; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _observable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./observable */ "./kedbackend/js/dist/js/observable/observable.js");
/* harmony import */ var _map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./map */ "./kedbackend/js/dist/js/observable/map.js");
/* harmony import */ var _value__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./value */ "./kedbackend/js/dist/js/observable/value.js");
/* harmony import */ var _emitter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./emitter */ "./kedbackend/js/dist/js/observable/emitter.js");





var Collection = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Collection, _super);
    function Collection(subscribe) {
        return _super.call(this, subscribe) || this;
    }
    Collection.prototype._map = function (mapper) {
        throw "mixedin";
    };
    Collection.from = function (x) {
        if (x.subscribe)
            return new Collection(function (s) { return x.subscribe(s); });
        if (Array.isArray(x)) {
            var emitter_1 = new _emitter__WEBPACK_IMPORTED_MODULE_4__["Emitter"](x);
            return new Collection(function (s) { return emitter_1.subscribe(s); });
        }
        throw new Error("ObservableCollection.from() can only take arrays or observables");
    };
    Collection.prototype.map = function (mapper) {
        return this._map(function (items) { return items.map(function (item) { return mapper(item); }); });
    };
    Collection.prototype.flat = function () {
        return this._map(function (items) { return [].concat.apply([], items); });
    };
    Collection.prototype.filter = function (filter) {
        return this._map(function (items) { return items.filter(filter); });
    };
    Collection.prototype.concat = function (other) {
        return Collection.from(this.toValue().combineLatest(other).map(function (_a) {
            var me = _a[0], other = _a[1];
            return me.concat(other);
        }));
    };
    Collection.prototype.orderBy = function (prop) {
        return this.toValue().map(function (array) { return array.slice().sort(function (a, b) {
            var aProp = a && a[prop];
            var bProp = b && b[prop];
            return aProp > bProp ? 1 : aProp < bProp ? -1 : 0;
        }); }).toCollection(function (x) { return x; });
    };
    Collection.prototype.toValue = function () {
        var _this = this;
        return new _value__WEBPACK_IMPORTED_MODULE_3__["Value"](function (s) { return _this.subscribe(s); });
    };
    Collection.prototype.groupBy = function (prop) {
        return this.toValue().map(function (items) {
            var rv = {};
            items.forEach(function (item) {
                var list = rv[item[prop]] || (rv[item[prop]] = []);
                list.push(item);
            });
            return rv;
        });
    };
    Collection.prototype.first = function () {
        return this.toValue().map(function (arr) { return arr[0]; });
    };
    return Collection;
}(_observable__WEBPACK_IMPORTED_MODULE_1__["Observable"]));

Collection.prototype._map = Object(_map__WEBPACK_IMPORTED_MODULE_2__["initMapMethod"])(Collection);
//# sourceMappingURL=collection.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/emitter.js":
/*!*****************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/emitter.js ***!
  \*****************************************************/
/*! exports provided: Emitter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Emitter", function() { return Emitter; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _value__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./value */ "./kedbackend/js/dist/js/observable/value.js");


var Emitter = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Emitter, _super);
    function Emitter(initialValue) {
        var _this = _super.call(this, function (observer) {
            var subscription = {
                unsubscribe: function () { return _this.subscribers = _this.subscribers.filter(function (_a) {
                    var s = _a[0];
                    return s !== observer;
                }); },
            };
            _this.subscribers.push([observer, subscription]);
            if (_this.error)
                observer(null, _this.error, subscription);
            else
                observer(_this.value, undefined, subscription);
            return subscription;
        }) || this;
        _this.subscribers = [];
        _this.value = initialValue;
        return _this;
    }
    Emitter.prototype.dispatch = function (value) {
        this.value = value;
        this.error = undefined;
        this._dispatch();
    };
    Emitter.prototype.dispatchError = function (error) {
        this.error = error;
        this._dispatch();
    };
    Emitter.prototype._dispatch = function () {
        var _this = this;
        this.subscribers.forEach(function (_a) {
            var observer = _a[0], subscription = _a[1];
            try {
                observer(_this.value, _this.error, subscription);
            }
            catch (err) {
                observer(null, err, subscription);
            }
        });
    };
    return Emitter;
}(_value__WEBPACK_IMPORTED_MODULE_1__["Value"]));

//# sourceMappingURL=emitter.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/fiber-context.js":
/*!***********************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/fiber-context.js ***!
  \***********************************************************/
/*! exports provided: FiberContext */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FiberContext", function() { return FiberContext; });
var stack = [];
var currentFiber = null;
var providers = [function () { return currentFiber; }];
function pushFiber(fiber) {
    stack.push(currentFiber);
    currentFiber = fiber;
}
function popFiber() {
    currentFiber = stack.pop();
}
var FiberContext = {
    get current() { return currentFiber; },
    /*run: function rerun<R>(fiber: Fiber, fn: ()=>R): R | Promise<R> {
      pushFiber(fiber);
      try {
        return Promise.resolve(fn());
      } catch (p) {
        if (p && typeof p.then === 'function') {
          return p.then(()=>rerun(fiber, fn));
        } else {
          return Promise.reject(p);
        }
      } finally {
        popFiber();
      }
    },*/
    addProvider: function (getCurrentFiber) {
        providers.push(getCurrentFiber);
        setCurrentGetterFromProviders();
    },
    removeProvider: function (getCurrentFiber) {
        providers = providers.filter(function (p) { return p !== getCurrentFiber; });
        setCurrentGetterFromProviders();
    }
};
function setCurrentGetterFromProviders() {
    Object.defineProperty(FiberContext, "current", {
        get: providers.reduce(function (p, c) { return function () { return p() || c(); }; }),
        set: function () { throw new Error("Use FiberContext.push() to change current fiber"); }
    });
}
//# sourceMappingURL=fiber-context.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/index.js":
/*!***************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/index.js ***!
  \***************************************************/
/*! exports provided: Observable, Value, Collection, Emitter, FiberContext */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _observable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./observable */ "./kedbackend/js/dist/js/observable/observable.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Observable", function() { return _observable__WEBPACK_IMPORTED_MODULE_0__["Observable"]; });

/* harmony import */ var _value__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./value */ "./kedbackend/js/dist/js/observable/value.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Value", function() { return _value__WEBPACK_IMPORTED_MODULE_1__["Value"]; });

/* harmony import */ var _collection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./collection */ "./kedbackend/js/dist/js/observable/collection.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Collection", function() { return _collection__WEBPACK_IMPORTED_MODULE_2__["Collection"]; });

/* harmony import */ var _emitter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./emitter */ "./kedbackend/js/dist/js/observable/emitter.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Emitter", function() { return _emitter__WEBPACK_IMPORTED_MODULE_3__["Emitter"]; });

/* harmony import */ var _fiber_context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./fiber-context */ "./kedbackend/js/dist/js/observable/fiber-context.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FiberContext", function() { return _fiber_context__WEBPACK_IMPORTED_MODULE_4__["FiberContext"]; });






//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/map.js":
/*!*************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/map.js ***!
  \*************************************************/
/*! exports provided: initMapMethod */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "initMapMethod", function() { return initMapMethod; });
function initMapMethod(ctor) {
    return function (mapper) {
        var _this = this;
        return new ctor(function (observer) { return _this.subscribe(function (value, error, subscription) {
            if (error)
                observer(null, error, subscription);
            else
                try {
                    observer(mapper(value), error, subscription);
                }
                catch (err) {
                    observer(null, err, subscription);
                }
        }); });
    };
}
//# sourceMappingURL=map.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/mixin.js":
/*!***************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/mixin.js ***!
  \***************************************************/
/*! exports provided: mixin */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mixin", function() { return mixin; });
function mixin(targetProto, mixinProto) {
    var props = [];
    for (var _i = 2; _i < arguments.length; _i++) {
        props[_i - 2] = arguments[_i];
    }
    props.forEach(function (prop) { return targetProto[prop] = mixinProto[prop]; });
}
//# sourceMappingURL=mixin.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/observable.js":
/*!********************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/observable.js ***!
  \********************************************************/
/*! exports provided: Observable */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Observable", function() { return Observable; });
var Observable = /** @class */ (function () {
    //static get [Symbol.species]() { return this; }
    function Observable(_subscribe) {
        this._subscribe = _subscribe;
    }
    Observable.prototype.subscribe = function (observer) {
        try {
            return this._subscribe(function (items, error, subscription) {
                try {
                    observer(items, error, subscription);
                }
                catch (err) {
                    observer(null, err, subscription);
                }
            });
        }
        catch (error) {
            observer(null, error, { unsubscribe: function () { } });
        }
    };
    return Observable;
}());

//# sourceMappingURL=observable.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/value.js":
/*!***************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/value.js ***!
  \***************************************************/
/*! exports provided: Value */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Value", function() { return Value; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _observable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./observable */ "./kedbackend/js/dist/js/observable/observable.js");
/* harmony import */ var _map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./map */ "./kedbackend/js/dist/js/observable/map.js");
/* harmony import */ var _collection__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./collection */ "./kedbackend/js/dist/js/observable/collection.js");
/* harmony import */ var _fiber_context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./fiber-context */ "./kedbackend/js/dist/js/observable/fiber-context.js");





var Value = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Value, _super);
    function Value(subscribe) {
        return _super.call(this, subscribe) || this;
    }
    Value.from = function (x) {
        if (x.subscribe)
            return new Value(function (s) { return x.subscribe(s); });
        throw new Error("Value.from() can only take observables");
    };
    Value.prototype.read = function () {
        var resolved = false, result, err, notify;
        var subscription = this.subscribe(function (value, error, subsciption) {
            resolved = true;
            result = value;
            err = error;
            if (error && notify)
                notify(null, error, subsciption);
            else if (notify)
                notify(value, null, subsciption);
        });
        if (resolved) {
            var currentFiber = _fiber_context__WEBPACK_IMPORTED_MODULE_4__["FiberContext"].current;
            if (!currentFiber) {
                subscription.unsubscribe();
                throw new Error("Invalid Fiber Context");
            }
            if (err) {
                subscription.unsubscribe();
                throw err;
            }
            var subscriptions = currentFiber.subscriptions, observer = currentFiber.observer;
            subscriptions.push(subscription);
            notify = observer;
            return result;
        }
        throw new Promise(function (resolve, reject) {
            notify = function (value, error, subscription) {
                subscription.unsubscribe();
                if (error)
                    reject(error);
                else
                    resolve(value);
            };
        });
    };
    Value.prototype.load = function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.subscribe(function (value, error, subsciption) {
                if (error)
                    reject(error);
                else
                    resolve(value);
                subsciption.unsubscribe();
            });
        });
    };
    Value.prototype.filter = function (fn) {
        var _this = this;
        return new Value(function (observer) { return _this.subscribe(function (value, error, subscription) {
            if (error)
                observer(null, error, subscription);
            else if (fn(value))
                observer(value, error, subscription);
        }); });
    };
    Value.prototype.log = function (prefix) {
        return this.map(function (x) {
            console.log(prefix, x);
            return x;
        });
    };
    Value.prototype.toCollection = function (mapper) {
        var _this = this;
        return new _collection__WEBPACK_IMPORTED_MODULE_3__["Collection"](function (s) { return _this.map(mapper).subscribe(s); });
    };
    Value.prototype.combineLatest = function (other) {
        var _this = this;
        return new Value(function (observer) {
            var values = [null, null];
            var mySubscription, otherSubscription;
            var subscription = {
                unsubscribe: function () {
                    mySubscription.unsubscribe();
                    otherSubscription.unsubscribe();
                }
            };
            mySubscription = _this.subscribe(function (items, error, s) {
                if (error) {
                    s.unsubscribe();
                    observer(null, error, subscription);
                }
                values[0] = items;
                if (values[1] !== null)
                    observer(values, null, subscription);
            });
            otherSubscription = other.subscribe(function (value, error, s) {
                if (error) {
                    s.unsubscribe();
                    observer(null, error, subscription);
                }
                values[1] = value;
                if (values[0] !== null)
                    observer(values, null, subscription);
            });
            return subscription;
        });
    };
    Value.prototype.switchMap = function (mapper) {
        var _this = this;
        return new Value(function (observer) {
            var mappedSubscription = null;
            var subscription = null;
            var returnedSubscription = {
                unsubscribe: function () {
                    subscription.unsubscribe();
                    if (mappedSubscription) {
                        mappedSubscription.unsubscribe();
                        mappedSubscription = null;
                    }
                }
            };
            subscription = _this.subscribe(function (item, error, s) {
                subscription = s;
                if (mappedSubscription) {
                    mappedSubscription.unsubscribe();
                    mappedSubscription = null;
                }
                if (error)
                    observer(null, error, returnedSubscription);
                else {
                    try {
                        var observableOrValue = mapper(item);
                        if (observableOrValue && typeof observableOrValue.subscribe === 'function') {
                            mappedSubscription = observableOrValue.subscribe(function (value, error, s) {
                                mappedSubscription = s;
                                observer(value, error, returnedSubscription);
                            });
                        }
                        else {
                            observer(observableOrValue, null, subscription);
                        }
                    }
                    catch (error) {
                        observer(null, error, subscription);
                    }
                }
            });
            return returnedSubscription;
        });
    };
    return Value;
}(_observable__WEBPACK_IMPORTED_MODULE_1__["Observable"]));

Value.prototype.map = Object(_map__WEBPACK_IMPORTED_MODULE_2__["initMapMethod"])(Value);
//# sourceMappingURL=value.js.map

/***/ }),

/***/ "./kedbackend/observable.js":
/*!**********************************!*\
  !*** ./kedbackend/observable.js ***!
  \**********************************/
/*! exports provided: Observable, Value, Collection, Emitter, FiberContext */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _js_dist_js_observable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./js/dist/js/observable */ "./kedbackend/js/dist/js/observable/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Observable", function() { return _js_dist_js_observable__WEBPACK_IMPORTED_MODULE_0__["Observable"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Value", function() { return _js_dist_js_observable__WEBPACK_IMPORTED_MODULE_0__["Value"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Collection", function() { return _js_dist_js_observable__WEBPACK_IMPORTED_MODULE_0__["Collection"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Emitter", function() { return _js_dist_js_observable__WEBPACK_IMPORTED_MODULE_0__["Emitter"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FiberContext", function() { return _js_dist_js_observable__WEBPACK_IMPORTED_MODULE_0__["FiberContext"]; });




/***/ }),

/***/ "./kedbackend/repo.js":
/*!****************************!*\
  !*** ./kedbackend/repo.js ***!
  \****************************/
/*! exports provided: KedBackendCollection, KedBackendQuery, KedBackendRepo, KedBackendSubscription, KedBackendWriter, MutationQueue, QuerySet, mixin */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _js_dist_js_ked_backend_repo__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./js/dist/js/ked-backend-repo */ "./kedbackend/js/dist/js/ked-backend-repo/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendCollection", function() { return _js_dist_js_ked_backend_repo__WEBPACK_IMPORTED_MODULE_0__["KedBackendCollection"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendQuery", function() { return _js_dist_js_ked_backend_repo__WEBPACK_IMPORTED_MODULE_0__["KedBackendQuery"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendRepo", function() { return _js_dist_js_ked_backend_repo__WEBPACK_IMPORTED_MODULE_0__["KedBackendRepo"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendSubscription", function() { return _js_dist_js_ked_backend_repo__WEBPACK_IMPORTED_MODULE_0__["KedBackendSubscription"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendWriter", function() { return _js_dist_js_ked_backend_repo__WEBPACK_IMPORTED_MODULE_0__["KedBackendWriter"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MutationQueue", function() { return _js_dist_js_ked_backend_repo__WEBPACK_IMPORTED_MODULE_0__["MutationQueue"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "QuerySet", function() { return _js_dist_js_ked_backend_repo__WEBPACK_IMPORTED_MODULE_0__["QuerySet"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "mixin", function() { return _js_dist_js_ked_backend_repo__WEBPACK_IMPORTED_MODULE_0__["mixin"]; });




/***/ }),

/***/ "./node_modules/moment/locale sync recursive sv|en":
/*!***********************************************!*\
  !*** ./node_modules/moment/locale sync sv|en ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./en-SG": "./node_modules/moment/locale/en-SG.js",
	"./en-SG.js": "./node_modules/moment/locale/en-SG.js",
	"./en-au": "./node_modules/moment/locale/en-au.js",
	"./en-au.js": "./node_modules/moment/locale/en-au.js",
	"./en-ca": "./node_modules/moment/locale/en-ca.js",
	"./en-ca.js": "./node_modules/moment/locale/en-ca.js",
	"./en-gb": "./node_modules/moment/locale/en-gb.js",
	"./en-gb.js": "./node_modules/moment/locale/en-gb.js",
	"./en-ie": "./node_modules/moment/locale/en-ie.js",
	"./en-ie.js": "./node_modules/moment/locale/en-ie.js",
	"./en-il": "./node_modules/moment/locale/en-il.js",
	"./en-il.js": "./node_modules/moment/locale/en-il.js",
	"./en-nz": "./node_modules/moment/locale/en-nz.js",
	"./en-nz.js": "./node_modules/moment/locale/en-nz.js",
	"./sv": "./node_modules/moment/locale/sv.js",
	"./sv.js": "./node_modules/moment/locale/sv.js"
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	if(!__webpack_require__.o(map, req)) {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return map[req];
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = "./node_modules/moment/locale sync recursive sv|en";

/***/ }),

/***/ "./src/access-control/get-user-claims.ts":
/*!***********************************************!*\
  !*** ./src/access-control/get-user-claims.ts ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return getUserClaims; });
function getUserClaims(user) {
    return [{
            type: "email",
            value: user.mail
        }, {
            type: "school",
            value: user.school
        }].concat(user.roles.map(function (role) { return ({
        type: "role",
        value: role
    }); })).concat(user.roles.map(function (role) { return ({
        type: "schoolRole",
        value: user.school + "/" + role
    }); }));
}


/***/ }),

/***/ "./src/access-control/index.ts":
/*!*************************************!*\
  !*** ./src/access-control/index.ts ***!
  \*************************************/
/*! exports provided: getUserClaims, IMPERSONATION_QUERY_PARAMS, hasAccess, hasReadAccess, hasWriteAccess, hasShareAccess, isTeacherAtSchool, isAdminOrTeacherAtSchool, impersonationEnv, actAs, preserveImpersonationQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IMPERSONATION_QUERY_PARAMS", function() { return IMPERSONATION_QUERY_PARAMS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasAccess", function() { return hasAccess; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasReadAccess", function() { return hasReadAccess; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasWriteAccess", function() { return hasWriteAccess; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasShareAccess", function() { return hasShareAccess; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isTeacherAtSchool", function() { return isTeacherAtSchool; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isAdminOrTeacherAtSchool", function() { return isAdminOrTeacherAtSchool; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "impersonationEnv", function() { return impersonationEnv; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "actAs", function() { return actAs; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "preserveImpersonationQuery", function() { return preserveImpersonationQuery; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _get_user_claims__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./get-user-claims */ "./src/access-control/get-user-claims.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getUserClaims", function() { return _get_user_claims__WEBPACK_IMPORTED_MODULE_2__["default"]; });

/* harmony import */ var _utils_query_string__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/query-string */ "./src/utils/query-string.ts");





var IMPERSONATION_QUERY_PARAMS = [
    "user",
    "role",
    "school",
    "debug",
    "testVersion",
    "testversion",
    "features",
    "schoolType",
    "schooltype"
];
function hasAccess(user, doc, requestedRight) {
    var claims = Object(_get_user_claims__WEBPACK_IMPORTED_MODULE_2__["default"])(user);
    if (requestedRight !== 'R' && user.tutorFor) {
        claims = claims.filter(function (claim) { return claim.type !== 'email'; });
    }
    var result = Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["hasAccess"])(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["DocumentAccess"].fromStringArray(doc.acl || []), claims, requestedRight);
    //console.log(`Has ${requestedRight} access to ${doc.name}/${doc.id}: ${result}`);
    return result;
}
function hasReadAccess(user, doc) {
    return hasAccess(user, doc, 'R');
}
function hasWriteAccess(user, doc) {
    return hasAccess(user, doc, 'W');
}
function hasShareAccess(user, doc) {
    return hasAccess(user, doc, 'S');
}
function isTeacherAtSchool(user, school) {
    var isTeacher = user.roles.some(function (role) { return role === 'EMPLOYEE' || role === 'ADMIN'; });
    var belongsToSchool = (school || "").toLowerCase() === user.school.toLowerCase();
    return (isTeacher && belongsToSchool);
}
function isAdminOrTeacherAtSchool(user, school) {
    return user.roles.includes("ADMIN") || isTeacherAtSchool(user, school);
}
var impersonationEnv = {
    actAs: function (options) {
        var role = options.role, school = options.school, url = options.url;
        var currentQuery = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_3__["parseQueryString"])(location.search);
        var newQuery = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, currentQuery, { role: role, school: school });
        var newQueryString = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_3__["generateQueryString"])(newQuery);
        if (url) {
            location.href = "" + url + newQueryString;
        }
        else {
            location.hash = "#";
            location.search = newQueryString;
        }
    }
};
function actAs(options) {
    impersonationEnv.actAs(options);
}
function preserveImpersonationQuery(url, query) {
    var e_1, _a;
    var currentQuery = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_3__["parseQueryString"])(location.search);
    var preservedQuery = {};
    try {
        for (var IMPERSONATION_QUERY_PARAMS_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](IMPERSONATION_QUERY_PARAMS), IMPERSONATION_QUERY_PARAMS_1_1 = IMPERSONATION_QUERY_PARAMS_1.next(); !IMPERSONATION_QUERY_PARAMS_1_1.done; IMPERSONATION_QUERY_PARAMS_1_1 = IMPERSONATION_QUERY_PARAMS_1.next()) {
            var param = IMPERSONATION_QUERY_PARAMS_1_1.value;
            if (currentQuery[param])
                preservedQuery[param] = currentQuery[param];
        }
    }
    catch (e_1_1) { e_1 = { error: e_1_1 }; }
    finally {
        try {
            if (IMPERSONATION_QUERY_PARAMS_1_1 && !IMPERSONATION_QUERY_PARAMS_1_1.done && (_a = IMPERSONATION_QUERY_PARAMS_1.return)) _a.call(IMPERSONATION_QUERY_PARAMS_1);
        }
        finally { if (e_1) throw e_1.error; }
    }
    var newQueryString = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_3__["generateQueryString"])(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, preservedQuery, query));
    var pHash = url.indexOf('#');
    return pHash >= 0 ?
        "" + url.substr(0, pHash) + newQueryString + url.substr(pHash) :
        "" + url + newQueryString;
}


/***/ }),

/***/ "./src/apis/buttons.tsx":
/*!******************************!*\
  !*** ./src/apis/buttons.tsx ***!
  \******************************/
/*! exports provided: DriveButton */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DriveButton", function() { return DriveButton; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var IconDrive = function (_a) {
    var _b = _a.size, size = _b === void 0 ? 30 : _b;
    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("svg", { width: size, version: "1.1", xmlns: "http://www.w3.org/2000/svg", xmlnsXlink: "http://www.w3.org/1999/xlink", viewBox: "0 0 508.52 508.52", fill: "#ffffff", style: { verticalAlign: "middle", marginRight: "4px" } },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("polygon", { points: "484.492,284.58 339.024,32.577 169.496,32.577 314.996,284.58" }),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("polygon", { points: "145.437,74.276 0,326.279 84.764,473.05 230.169,221.143" }),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("polygon", { points: "234.396,316.363 143.371,475.943 423.756,475.943 508.52,316.36" })));
};
var IconClassroom = function (_a) {
    var _b = _a.size, size = _b === void 0 ? 30 : _b;
    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("svg", { width: size, xmlns: "http://www.w3.org/2000/svg", xmlnsXlink: "http://www.w3.org/1999/xlink", viewBox: "0 0 24 24", version: "1.1" },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("path", { d: "M5 2C3.348 2 2 3.348 2 5v14c0 1.652 1.348 3 3 3h14c1.652 0 3-1.348 3-3V5c0-1.652-1.348-3-3-3zm0 2h14c.55 0 1 .45 1 1v14c0 .55-.45 1-1 1h-1v-2h-5v2H5c-.55 0-1-.45-1-1V5c0-.55.45-1 1-1zm7 2a1.999 1.999 0 1 0 0 4 1.999 1.999 0 1 0 0-4zM7.5 8a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm9 0a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM12 11c-2.66 0-3.5 2.5-3.5 2.5 0-.848.5-1.5.5-1.5-.3-.188-1.07-.313-1.438-.313-1.214 0-2.562 1.192-2.562 2V16h14v-2.313c0-.808-1.512-2-2.563-2-.367 0-1.136.126-1.437.313 0 0 .5.652.5 1.5 0 0-.84-2.5-3.5-2.5z" })));
};
var DriveButton = function (_a) {
    var _b = _a.label, label = _b === void 0 ? 'Google Drive' : _b, action = _a.action;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("a", { className: "btn", onClick: action },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(IconDrive, { size: 16 }),
        " ",
        label);
};


/***/ }),

/***/ "./src/apis/configs.ts":
/*!*****************************!*\
  !*** ./src/apis/configs.ts ***!
  \*****************************/
/*! exports provided: WebClientId, TemplatesFileId */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WebClientId", function() { return WebClientId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TemplatesFileId", function() { return TemplatesFileId; });
// Client id for GoogleWebClient
var WebClientId = "421572262269-u68v5lf5o8ss5t68l8gkq3pfarh6dbkv.apps.googleusercontent.com";
// Google Drive File Id to json file with Tamplates for Course Builder (Classroom)
var TemplatesFileId = 'https://docs.google.com/document/d/1V7exG6vN83Sq8kb6uz1B6DaZDVO9eLcJbP7XF0vL4dY/export?format=txt';


/***/ }),

/***/ "./src/apis/edsclient.ts":
/*!*******************************!*\
  !*** ./src/apis/edsclient.ts ***!
  \*******************************/
/*! exports provided: EdsClient, EDSPeriod, parseJsonDate_old */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EdsClient", function() { return EdsClient; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EDSPeriod", function() { return EDSPeriod; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseJsonDate_old", function() { return parseJsonDate_old; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _utils_school_moment__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/school-moment */ "./src/utils/school-moment.ts");
/* harmony import */ var _utils_school_term__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/school-term */ "./src/utils/school-term.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _mock_mock_eds_data_json__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./mock/mock-eds-data.json */ "./src/apis/mock/mock-eds-data.json");
var _mock_mock_eds_data_json__WEBPACK_IMPORTED_MODULE_5___namespace = /*#__PURE__*/__webpack_require__.t(/*! ./mock/mock-eds-data.json */ "./src/apis/mock/mock-eds-data.json", 1);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _utils_make_suspense_api__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/make-suspense-api */ "./src/utils/make-suspense-api.ts");









var EdsClient = /** @class */ (function () {
    function EdsClient(isomorphic, baseUrl, bearerProvider, userEmailGetter) {
        var _this = this;
        this.http = new kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["RestClient"](isomorphic, baseUrl, { bearerProvider: bearerProvider });
        this.userEmailGetter = userEmailGetter;
        var isApiMethod = function (m) {
            return typeof _this[m] === 'function' &&
                m !== 'constructor' && // Since makeSuspenseApi() walks prototype chain
                m !== 'privatizingCacheBust' &&
                m !== 'userEmailGetter';
        } // List non-API methods here...
        ;
        Object.keys(EdsClient.prototype).forEach(function (method) {
            if (isApiMethod(method)) {
                _this[method] = avoidSimultanousCalls(_this[method]);
            }
        });
        this.suspense = Object(_utils_make_suspense_api__WEBPACK_IMPORTED_MODULE_7__["makeSuspenseApi"])(this, { isApiMethod: isApiMethod });
    }
    EdsClient.prototype.privatizingCacheBust = function () {
        return { user: this.userEmailGetter() };
    };
    /**
       * Retrieve active courses for current logged in student.
       *
       * @param courseCode Short-name of the course. Optional.
       */
    EdsClient.prototype.getActiveCourses = function (q) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var query, res, _a, _b, json, ex_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _c.trys.push([0, 5, , 6]);
                        query = this.privatizingCacheBust();
                        if (q) {
                            if (q.courseCode)
                                query.CourseCode = q.courseCode;
                            if (q.periodName)
                                query.PeriodName = q.periodName;
                        }
                        return [4 /*yield*/, this.http.get("studentactivecourses", query)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.courses];
                    case 5:
                        ex_1 = _c.sent();
                        console.error("Error from EDS: " + ex_1);
                        throw new Error(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Kunde tyv\u00E4rr inte ladda terminsm\u00E5l eller avklarade steg fr\u00E5n EDS. F\u00F6rs\u00F6k igen senare..."], ["Kunde tyv\u00E4rr inte ladda terminsm\u00E5l eller avklarade steg fr\u00E5n EDS. F\u00F6rs\u00F6k igen senare..."]))));
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    /**
     * Retrieve latest assessments for current logged in user.
     *
     * @param limit Optional limit
     */
    EdsClient.prototype.getLatestAssessments = function (limit) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var query, res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        query = this.privatizingCacheBust();
                        if (!isNaN(limit))
                            query.Count = limit;
                        return [4 /*yield*/, this.http.get("studentassessments", query)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.assessments];
                }
            });
        });
    };
    /**
     * Retrieve studyplans for current logged-in user
     */
    EdsClient.prototype.getStudentGoals = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("studentgoals", this.privatizingCacheBust())];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.studentGoals];
                }
            });
        });
    };
    EdsClient.prototype.getStudentFutureAbilities = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("studentFutureAbilities", this.privatizingCacheBust())];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.studentFutureAbilities];
                }
            });
        });
    };
    EdsClient.prototype.getTeacherTutorStudents = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("teachertutorstudents", this.privatizingCacheBust())];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.students];
                }
            });
        });
    };
    /**
     * getSchoolTuitionGroups()
     *
     * Return tuitiongroups for school
     *
     * @param schoolName - name of school
     * @param courseCode - Skolverkets code for course
     */
    EdsClient.prototype.getSchoolTuitionGroups = function (q) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("SchoolTuitionGroups", tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.privatizingCacheBust(), q))];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.schoolTuitionGroups];
                }
            });
        });
    };
    /**
     * getTuitionGroupStudents()
     *
     * Return name and mailadresses for tutitiongroups in schools
     *
     * @param schoolName - name of school
     * @param tuitionGroupName - tuition gruop name in EDS
     */
    EdsClient.prototype.getTuitionGroupStudents = function (q) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("TuitionGroupStudents", tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.privatizingCacheBust(), q))];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.tuitionGroupStudents];
                }
            });
        });
    };
    /**
     * getSchoolTeachers()
     *
     * Return name and mailadresses for tutitiongroups in schools
     *
     * @param schoolName - name of school
     */
    EdsClient.prototype.getSchoolTeachers = function (q) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("SchoolTeachers", tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.privatizingCacheBust(), q))];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.schoolTeachers];
                }
            });
        });
    };
    // we assume that the EDS will return the current academic year dates determined by the current date
    EdsClient.prototype.getAcademicYearTerms = function (schoolLocale, date) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var holidays, firstTermMoment, secondTermMoment, startFirstTermDate, startSecondTermDate, endFirstTermDate, endSecondTermDate, firstTerm, secondTerm;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                // mock data
                switch (schoolLocale) {
                    case 'en_sin':
                        return [2 /*return*/, _mock_mock_eds_data_json__WEBPACK_IMPORTED_MODULE_5__.SouthIndia.filter(function (f) { return moment__WEBPACK_IMPORTED_MODULE_6___default()(date).isSameOrAfter(f.firstTerm.startDate) && moment__WEBPACK_IMPORTED_MODULE_6___default()(date).isSameOrBefore(f.secondTerm.endDate); })[0]];
                    case 'en_nin':
                        return [2 /*return*/, _mock_mock_eds_data_json__WEBPACK_IMPORTED_MODULE_5__.NorthIndia.filter(function (f) { return moment__WEBPACK_IMPORTED_MODULE_6___default()(date).isSameOrAfter(f.firstTerm.startDate) && moment__WEBPACK_IMPORTED_MODULE_6___default()(date).isSameOrBefore(f.secondTerm.endDate); })[0]];
                    case 'sv':
                        {
                            holidays = [];
                            firstTermMoment = Object(_utils_school_moment__WEBPACK_IMPORTED_MODULE_2__["getTermStarEndDate"])(date, true);
                            secondTermMoment = Object(_utils_school_moment__WEBPACK_IMPORTED_MODULE_2__["getTermStarEndDate"])(date, false);
                            startFirstTermDate = firstTermMoment[0];
                            startSecondTermDate = secondTermMoment[0];
                            endFirstTermDate = firstTermMoment[1];
                            endSecondTermDate = secondTermMoment[1];
                            firstTerm = { startDate: new Date(startFirstTermDate.year(), startFirstTermDate.month(), startFirstTermDate.date()).toDateString(), endDate: new Date(startFirstTermDate.year(), endFirstTermDate.month(), endFirstTermDate.date()).toDateString() };
                            secondTerm = { startDate: new Date(startSecondTermDate.year(), startSecondTermDate.month(), startSecondTermDate.date()).toDateString(), endDate: new Date(startSecondTermDate.year(), endSecondTermDate.month(), endSecondTermDate.date()).toDateString() };
                            return [2 /*return*/, { firstTerm: firstTerm, secondTerm: secondTerm, holidays: holidays }];
                        }
                }
                return [2 /*return*/];
            });
        });
    };
    return EdsClient;
}());

var EDSPeriod = /** @class */ (function () {
    function EDSPeriod(periodStringOrSchoolTerm) {
        if (typeof periodStringOrSchoolTerm === 'string') {
            this.period = periodStringOrSchoolTerm;
            this.term = this.period.startsWith('HT') ? 'AT' : 'ST';
            this.year = parseInt(this.period.substr(2));
            if (isNaN(this.year))
                throw new Error("Invalid period: " + this.period);
        }
        else {
            var schoolTerm = new _utils_school_term__WEBPACK_IMPORTED_MODULE_3__["SchoolTerm"](periodStringOrSchoolTerm);
            this.period = (schoolTerm.term === 'AT' ? "HT" : "VT") + schoolTerm.year;
            this.term = schoolTerm.term;
            this.year = schoolTerm.year;
        }
    }
    Object.defineProperty(EDSPeriod.prototype, "schoolTerm", {
        get: function () {
            return new _utils_school_term__WEBPACK_IMPORTED_MODULE_3__["SchoolTerm"]({
                academicYear: this.term === 'AT' ?
                    this.year + "/" + (this.year + 1) :
                    this.year - 1 + "/" + this.year,
                term: this.term
            });
        },
        enumerable: true,
        configurable: true
    });
    EDSPeriod.prototype.toString = function () {
        return this.period;
    };
    EDSPeriod.prototype.valueOf = function () {
        return this.year + ":" + (this.term === 'ST' ? "1" : "2");
    };
    return EDSPeriod;
}());

function parseJsonDate_old(jsonDateStr) {
    var date = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["dateTimeReviver"])("", jsonDateStr);
    if (!(date instanceof Date))
        throw new Error("Invalid JSON date string: " + jsonDateStr);
    return date;
}
function avoidSimultanousCalls(method) {
    var ongoingPromises = {};
    return function () {
        var argsJson = JSON.stringify([].slice.call(arguments));
        if (!ongoingPromises[argsJson]) {
            ongoingPromises[argsJson] = method.apply(this, arguments).then(function (result) {
                delete ongoingPromises[argsJson];
                return result;
            });
        }
        return ongoingPromises[argsJson];
    };
}
var templateObject_1;


/***/ }),

/***/ "./src/apis/google-classroom-sync.ts":
/*!*******************************************!*\
  !*** ./src/apis/google-classroom-sync.ts ***!
  \*******************************************/
/*! exports provided: ClassroomSync */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ClassroomSync", function() { return ClassroomSync; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _google_webclient__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./google-webclient */ "./src/apis/google-webclient.ts");
/* harmony import */ var _mock_mock_classroom_data__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./mock/mock-classroom-data */ "./src/apis/mock/mock-classroom-data.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");





/**
*
*/
var ClassroomSync = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](ClassroomSync, _super);
    function ClassroomSync() {
        return _super.call(this, ['https://www.googleapis.com/auth/drive',
            'https://www.googleapis.com/auth/classroom.courses',
            'https://www.googleapis.com/auth/classroom.profile.photos',
            'https://www.googleapis.com/auth/classroom.profile.emails',
            'https://www.googleapis.com/auth/classroom.rosters',
            'https://www.googleapis.com/auth/classroom.rosters.readonly',
            'https://www.googleapis.com/auth/classroom.coursework.students',
            'https://www.googleapis.com/auth/script.external_request'
        ]) || this;
    }
    /**
    *
    * @param func function name to call in ClassroomService
    * @param params optional parameters to send to function
    *
    * Calls the relevant funciton in ClassroomService
    * The paramaters must be what is expected in the called function
    * in ClassroomService and can only be basic types: string,
    * number, object or boolean.
    *
    */
    ClassroomSync.prototype.callSync = function (func, params) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var data;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.ensureInited()];
                    case 1:
                        _a.sent();
                        data = params ? {
                            'function': func,
                            'parameters': params
                        } : {
                            'function': func
                        };
                        // using dev-mode right now so we only need to run clasp push on ClassroomService
                        // to be able to use devMode the user calling the script needs to be an editor on the
                        // project in GAS
                        data.devMode = _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["cfg"].ENVIRONMENT !== 'production';
                        return [4 /*yield*/, fetch('https://script.googleapis.com/v1/scripts/M1H0BlTkv983PNVTJjDXjNqXLxmQiBgGz:run?alt=json', {
                                method: 'post',
                                headers: {
                                    'Accept': 'application/json',
                                    'Content-Type': 'application/json',
                                    'Authorization': 'Bearer ' + this.authToken
                                },
                                body: JSON.stringify(data)
                            }).then(function (resp) { return resp.json(); })];
                    case 2: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    /**
    *
    * @param param0
    */
    ClassroomSync.prototype.initSync = function (course, origCourse, fullSyncNeeded) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var emptyOrMock, _a, _b, group, data, edsSchoolNameGymn, studyGroupStudents, _c, _d, group, tuitionGroupStudents, e_1_1, _e, subset, changes, action;
            var e_2, _f, e_1, _g;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_h) {
                switch (_h.label) {
                    case 0:
                        emptyOrMock = {};
                        if (course.school === 'KED') {
                            try {
                                for (_a = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](course.studyGroups), _b = _a.next(); !_b.done; _b = _a.next()) {
                                    group = _b.value;
                                    emptyOrMock[group] = _mock_mock_classroom_data__WEBPACK_IMPORTED_MODULE_2__["mockTuitionStudents"][group] ? _mock_mock_classroom_data__WEBPACK_IMPORTED_MODULE_2__["mockTuitionStudents"][group].map(function (s) { return s.studentEmailAddress; }) : [];
                                }
                            }
                            catch (e_2_1) { e_2 = { error: e_2_1 }; }
                            finally {
                                try {
                                    if (_b && !_b.done && (_f = _a.return)) _f.call(_a);
                                }
                                finally { if (e_2) throw e_2.error; }
                            }
                        }
                        return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_3__["env"].kedBackendClient.http.get('schools', { 'cacheBust': 'static', 'name': course.school }).then(function (resp) { return resp.json(); })];
                    case 1:
                        data = _h.sent();
                        edsSchoolNameGymn = data[0].edsSchoolNameGymn;
                        studyGroupStudents = edsSchoolNameGymn ? {} : emptyOrMock;
                        if (!course.studyGroups) return [3 /*break*/, 9];
                        if (!edsSchoolNameGymn) return [3 /*break*/, 9];
                        _h.label = 2;
                    case 2:
                        _h.trys.push([2, 7, 8, 9]);
                        _c = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](course.studyGroups), _d = _c.next();
                        _h.label = 3;
                    case 3:
                        if (!!_d.done) return [3 /*break*/, 6];
                        group = _d.value;
                        return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_3__["env"].edsClient.getTuitionGroupStudents({ schoolName: edsSchoolNameGymn, tuitionGroupName: group })];
                    case 4:
                        tuitionGroupStudents = _h.sent();
                        studyGroupStudents[group] = tuitionGroupStudents.map(function (s) { return s.studentEmailAddress; });
                        _h.label = 5;
                    case 5:
                        _d = _c.next();
                        return [3 /*break*/, 3];
                    case 6: return [3 /*break*/, 9];
                    case 7:
                        e_1_1 = _h.sent();
                        e_1 = { error: e_1_1 };
                        return [3 /*break*/, 9];
                    case 8:
                        try {
                            if (_d && !_d.done && (_g = _c.return)) _g.call(_c);
                        }
                        finally { if (e_1) throw e_1.error; }
                        return [7 /*endfinally*/];
                    case 9:
                        _e = this.diffCourse(course, origCourse, fullSyncNeeded), subset = _e.subset, changes = _e.changes, action = _e.action;
                        // send the changes to classroom-service with {id, school code} to update classrooms
                        // should we send the users from the groups or should classroom-service get these from EDS?
                        // if we handle users in kedcomponents a check if there are changes should probably be made?
                        console.log(subset);
                        console.log(studyGroupStudents);
                        if (action == 'full') {
                            return [2 /*return*/, this.createClassroom(subset, studyGroupStudents)];
                        }
                        else if (action == 'update') {
                            return [2 /*return*/, this.updateClassroom({ course: subset, changes: changes, studyGroupStudents: studyGroupStudents })];
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    ClassroomSync.prototype.archive = function (course) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                console.log('archiving');
                return [2 /*return*/, this.callSync('archive', [course])];
            });
        });
    };
    ClassroomSync.prototype.delete = function (subset) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                console.log('deleteing');
                return [2 /*return*/, this.callSync('deleteClassrooms', [subset])];
            });
        });
    };
    /**
    *
    * @param course current course state
    * @param origCourse previous course state
    *
    * Creates a subset of course and maakes a diff against previous course state
    * Note: there are probably more we could filter out before sending to ClasasroomService
    */
    ClassroomSync.prototype.diffCourse = function (course, origCourse, fullSyncNeeded) {
        // Filter out assignments from tasks and subset to only properties we are interested in
        var subsetAssignments = function (tasks) {
            var assignments = tasks.filter(function (t) { return t.assignment === true; });
            return assignments.map(function (t) {
                var assignment = t.assignment, deadline = t.deadline, id = t.id, name = t.name, resources = t.resources, templateFile = t.templateFile;
                return { assignment: assignment, deadline: deadline, id: id, name: name, resources: resources, templateFile: templateFile };
            });
        };
        // create the subset of course
        var subset = (function (_a) {
            var id = _a.id, school = _a.school, code = _a.code, name = _a.name, description = _a.description, tasks = _a.tasks, responsibleTeachers = _a.responsibleTeachers, studyGroups = _a.studyGroups;
            return ({
                id: id,
                school: school,
                code: code,
                name: name,
                description: description,
                tasks: tasks,
                responsibleTeachers: responsibleTeachers,
                studyGroups: studyGroups
            });
        })(course);
        // only handle tsaks that are aassignments
        subset.tasks = subsetAssignments(subset.tasks);
        var changes = origCourse ? {
            tasks: subsetAssignments(origCourse.tasks),
            responsibleTeachers: origCourse.responsibleTeachers,
            studyGroups: origCourse.studyGroups
        } : false;
        return { subset: subset, changes: changes, action: "update" };
    };
    ClassroomSync.prototype.createClassroom = function (course, studyGroupStudents) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                return [2 /*return*/, this.callSync('createClassrooms', [course, studyGroupStudents])];
            });
        });
    };
    ClassroomSync.prototype.updateClassroom = function (_a) {
        var course = _a.course, changes = _a.changes, studyGroupStudents = _a.studyGroupStudents;
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                return [2 /*return*/, this.callSync('updateClassrooms', [course, changes, studyGroupStudents])];
            });
        });
    };
    return ClassroomSync;
}(_google_webclient__WEBPACK_IMPORTED_MODULE_1__["GoogleWebClient"]));



/***/ }),

/***/ "./src/apis/google-client.ts":
/*!***********************************!*\
  !*** ./src/apis/google-client.ts ***!
  \***********************************/
/*! exports provided: GoogleClient */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GoogleClient", function() { return GoogleClient; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");


var GoogleClient = /** @class */ (function () {
    function GoogleClient(discoveryDocs) {
        this.googleTokenProvider = _globals_KED_env__WEBPACK_IMPORTED_MODULE_1__["env"].googleTokenProvider;
        this.discoveryDocs = [];
        this.discoveryDocs.push(discoveryDocs);
    }
    GoogleClient.prototype.setBearerProvider = function (googleTokenProvider) {
        this.googleTokenProvider = googleTokenProvider;
    };
    GoogleClient.prototype.ensureInited = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var tokenResult;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!(typeof gapi === 'undefined')) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.loadGapi()];
                    case 1:
                        _a.sent();
                        _a.label = 2;
                    case 2:
                        if (!(!this.tokenExpiration || this.tokenExpiration < new Date())) return [3 /*break*/, 4];
                        return [4 /*yield*/, this.googleTokenProvider.getBearer()];
                    case 3:
                        tokenResult = _a.sent();
                        this.tokenExpiration = new Date(tokenResult.expires);
                        this.token = tokenResult.token;
                        gapi.client.setToken({
                            access_token: tokenResult.token
                        });
                        _a.label = 4;
                    case 4: 
                    // Load all discovyerDocs
                    return [4 /*yield*/, gapi.client.init({
                            discoveryDocs: this.discoveryDocs
                        })];
                    case 5:
                        // Load all discovyerDocs
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    GoogleClient.prototype.loadGapi = function () {
        return new Promise(function (resolve) {
            if (typeof gapi !== 'undefined')
                return resolve();
            var script = document.createElement('script');
            script.src = "https://apis.google.com/js/client.js?onload=gaapi_loaded";
            document.getElementsByTagName("head")[0].appendChild(script);
            window.gaapi_loaded = resolve;
        });
    };
    return GoogleClient;
}());



/***/ }),

/***/ "./src/apis/google-drive.ts":
/*!**********************************!*\
  !*** ./src/apis/google-drive.ts ***!
  \**********************************/
/*! exports provided: GoogleDrive */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GoogleDrive", function() { return GoogleDrive; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _google_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./google-client */ "./src/apis/google-client.ts");


var GoogleDrive = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](GoogleDrive, _super);
    function GoogleDrive() {
        return _super.call(this, 'https://www.googleapis.com/discovery/v1/apis/drive/v3/rest') || this;
    }
    GoogleDrive.prototype.getFile = function (fileId) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.ensureInited()];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, gapi.client.drive.files.get({
                                fileId: fileId,
                                supportsAllDrives: true,
                                fields: 'id,name,mimeType,webViewLink,iconLink,modifiedTime,thumbnailLink'
                            }).then(function (resp) {
                                if (resp.result.name) {
                                    var file = resp.result;
                                    return { fileId: file.id, url: file.webViewLink, mimeType: file.mimeType, name: file.name, modiifiedTime: file.modifiedTime, iconUrl: file.iconLink, thumbnailUrl: file.thumbnailLink };
                                }
                                return false;
                            })];
                }
            });
        });
    };
    /**
     * updatePermissions()
     *
     * @param fileId
     *
     * Make the file accessible to all in the domain. Should be unnecessary but some
     * teachers have changed their default permissions.
     * We don't care right now if this fails because this is just an extra precaution.
     * If we plan on using this on other domains the domain-attribute needs to be dynamic.
     *
     */
    GoogleDrive.prototype.updatePermissions = function (fileId) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        console.log('updating permissions');
                        return [4 /*yield*/, this.ensureInited()];
                    case 1:
                        _a.sent();
                        gapi.client.drive.permissions.create({
                            fileId: fileId,
                            sendNotificationEmail: false,
                            role: 'reader',
                            type: 'anyone',
                            // type: 'domain', 
                            // domain: 'kunskapsskolan.se'
                            supportsAllDrives: true
                        }).then(function (resp) { return console.log(resp); });
                        return [2 /*return*/];
                }
            });
        });
    };
    GoogleDrive.prototype.createFolder = function (name, parent) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        console.log('Creating folder ' + name);
                        return [4 /*yield*/, this.ensureInited()];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, gapi.client.drive.files.create({
                                name: name,
                                mimeType: 'application/vnd.google-apps.folder',
                                parents: [parent]
                            }).then(function (resp) { return resp.result; })];
                }
            });
        });
    };
    GoogleDrive.prototype.getIdForFolderPath = function (path) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var parent, path_1, path_1_1, folder, folderId, newFolder, e_1_1;
            var e_1, _a;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        console.log('Getting id for ' + path.join('/'));
                        return [4 /*yield*/, this.ensureInited()];
                    case 1:
                        _b.sent();
                        parent = 'root';
                        _b.label = 2;
                    case 2:
                        _b.trys.push([2, 9, 10, 11]);
                        path_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](path), path_1_1 = path_1.next();
                        _b.label = 3;
                    case 3:
                        if (!!path_1_1.done) return [3 /*break*/, 8];
                        folder = path_1_1.value;
                        return [4 /*yield*/, this.getIdForFolder(folder, parent)];
                    case 4:
                        folderId = _b.sent();
                        if (!folderId) return [3 /*break*/, 5];
                        parent = folderId;
                        return [3 /*break*/, 7];
                    case 5: return [4 /*yield*/, this.createFolder(folder, parent)];
                    case 6:
                        newFolder = _b.sent();
                        parent = newFolder.id;
                        _b.label = 7;
                    case 7:
                        path_1_1 = path_1.next();
                        return [3 /*break*/, 3];
                    case 8: return [3 /*break*/, 11];
                    case 9:
                        e_1_1 = _b.sent();
                        e_1 = { error: e_1_1 };
                        return [3 /*break*/, 11];
                    case 10:
                        try {
                            if (path_1_1 && !path_1_1.done && (_a = path_1.return)) _a.call(path_1);
                        }
                        finally { if (e_1) throw e_1.error; }
                        return [7 /*endfinally*/];
                    case 11: return [2 /*return*/, parent];
                }
            });
        });
    };
    GoogleDrive.prototype.getIdForFolder = function (name, parent) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        console.log('Getting id for ' + name);
                        return [4 /*yield*/, this.ensureInited()];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, gapi.client.drive.files.list({
                                corpora: 'user',
                                q: "'" + parent + "' in parents and mimeType = 'application/vnd.google-apps.folder' and name = '" + name + "'"
                            }).then(function (resp) {
                                if (resp.result.files.length) {
                                    return resp.result.files[0].id;
                                }
                                else {
                                    return false;
                                }
                            })];
                }
            });
        });
    };
    GoogleDrive.prototype.copyFile = function (file, destination) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var parent_1, parent_2;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        console.log('Copying file: ' + file.name);
                        return [4 /*yield*/, this.ensureInited()];
                    case 1:
                        _a.sent();
                        if (!destination) return [3 /*break*/, 3];
                        return [4 /*yield*/, this.getIdForFolderPath(destination)];
                    case 2:
                        parent_1 = _a.sent();
                        return [3 /*break*/, 4];
                    case 3:
                        parent_2 = 'root';
                        _a.label = 4;
                    case 4: return [2 /*return*/, gapi.client.drive.files.copy({
                            fileId: file.id,
                            supportsAllDrives: true,
                            parents: [parent],
                            name: file.name,
                            fields: 'id,name,mimeType,webViewLink,iconLink,modifiedTime,thumbnailLink'
                        }).then(function (resp) { return resp.result; })];
                }
            });
        });
    };
    /**
     * downloadFile()
     * @param file
     *
     * When Classroom has been integrated we will want to handle only the fileId:s
     * so that editing capabilities are peserved on the file (if it is a google-apps file)
     * Right now google-apps files are converted to pdf and passed into the current flow.
     *
     * TODO: error handling
     */
    GoogleDrive.prototype.downloadFile = function (_a) {
        var file = _a.file, limitSize = _a.limitSize;
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var xhrDownload_1;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0: 
                    // A file that can be exported to PDF is retreived with
                    // file.export() from Drive, converted to a blob and then
                    // to a File.
                    // A file that can not be exported to PDF is retrieved
                    // through XHR and converted to a File.
                    // If we don't need to handle the physical files on the client
                    // we could save only the fileId:s and display filename and mimeType
                    // for the file in our listings. When/if we use Google Classroom for
                    // our task-handling that would be the preferred approach to keep
                    // the file as an editable Google file
                    // Init the drive-api (only needed for download so not loaded initially)
                    return [4 /*yield*/, this.ensureInited()];
                    case 1:
                        // A file that can be exported to PDF is retreived with
                        // file.export() from Drive, converted to a blob and then
                        // to a File.
                        // A file that can not be exported to PDF is retrieved
                        // through XHR and converted to a File.
                        // If we don't need to handle the physical files on the client
                        // we could save only the fileId:s and display filename and mimeType
                        // for the file in our listings. When/if we use Google Classroom for
                        // our task-handling that would be the preferred approach to keep
                        // the file as an editable Google file
                        // Init the drive-api (only needed for download so not loaded initially)
                        _b.sent();
                        if (file.canExport) {
                            return [2 /*return*/, new Promise(function (resolve, reject) {
                                    gapi.client.drive.files.export({
                                        fileId: file.fileId,
                                        mimeType: 'application/pdf'
                                    }).then(function (resp) {
                                        var len = resp.body.length;
                                        var data = new Uint8Array(new ArrayBuffer(len));
                                        for (var i = 0; i < len; i++) {
                                            data[i] = resp.body.charCodeAt(i);
                                        }
                                        var blob = new Blob([data], { type: 'application/pdf' });
                                        var filename = file.name + '.pdf';
                                        resolve(new File([blob], filename, { type: 'application/pdf', lastModified: file.modifiedTime }));
                                    });
                                })];
                        }
                        else {
                            xhrDownload_1 = function (file) {
                                return new Promise(function (resolve, reject) {
                                    var xhr = new XMLHttpRequest();
                                    xhr.open("GET", "https://www.googleapis.com/drive/v3/files/" + file.fileId + '?alt=media', true);
                                    xhr.setRequestHeader('Authorization', 'Bearer ' + _this.token);
                                    xhr.responseType = 'blob';
                                    xhr.onload = function () {
                                        resolve(new File([xhr.response], file.name, { type: file.mimeType, lastModified: file.modifiedTime }));
                                    };
                                    xhr.send();
                                });
                            };
                            return [2 /*return*/, new Promise(function (resolve, reject) {
                                    if (limitSize !== undefined) {
                                        gapi.client.drive.files.get({
                                            fileId: file.fileId,
                                            fields: 'size'
                                        }).then(function (resp) {
                                            var size = Number(resp.result.size);
                                            if (size > limitSize * 1024 * 1024) {
                                                reject('GooglePickerError: Filsize is too laarge');
                                            }
                                        }).then(function () {
                                            xhrDownload_1(file).then(function (resp) {
                                                resolve(resp);
                                            });
                                        });
                                    }
                                    else {
                                        xhrDownload_1(file).then(function (resp) {
                                            resolve(resp);
                                        });
                                    }
                                })];
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    return GoogleDrive;
}(_google_client__WEBPACK_IMPORTED_MODULE_1__["GoogleClient"]));



/***/ }),

/***/ "./src/apis/google-picker.ts":
/*!***********************************!*\
  !*** ./src/apis/google-picker.ts ***!
  \***********************************/
/*! exports provided: GooglePicker */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GooglePicker", function() { return GooglePicker; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _google_webclient__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./google-webclient */ "./src/apis/google-webclient.ts");
/* harmony import */ var _google_drive__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./google-drive */ "./src/apis/google-drive.ts");



var mimeTypeCollections = {
    'google-apps': 'application/vnd.google-apps.document,application/vnd.google-apps.presentation,application/vnd.google-apps.spreadsheet',
    'pdf': 'application/pdf'
};
/**
 * GooglePicker
 * Includes the initiation of the correct api:s.
 * Certain options can be passed to the constructor
 * and there could be others worth incorporating (i.e. Team Drive-support).
 *
 * Right now two options are handled:
 * - upload: if a user can upload to Drive in the Google Drive Picker
 * - multiple: if a user can select multiple files
 * - limitType: active limits to certain mimeTypesCollections
 *
 * We could probably split this into google-picker and google-drive where google-drive
 * handles the explicit calls to the google drive api.
 */
var GooglePicker = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](GooglePicker, _super);
    function GooglePicker(options) {
        var _this = _super.call(this, ['https://www.googleapis.com/auth/drive']) || this;
        _this.options = { upload: false, multiple: false, limitType: false };
        Object.assign(_this.options, options);
        console.log(_this.options);
        _this.drive = new _google_drive__WEBPACK_IMPORTED_MODULE_2__["GoogleDrive"]();
        return _this;
    }
    /**
     * show()
     *
     * If a single file is requested from the picker a list of files with one element is returned.
     * It is up to the caller to handle the list in a relevant manner.
     *
     * More data from the file could be extracted if it is deemed necessary.
     *
     */
    GooglePicker.prototype.show = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.ensureInited()];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, new Promise(function (resolve, reject) {
                                var callback = function (response) {
                                    if (response['action'] == google.picker.Action.CANCEL) {
                                        reject();
                                    }
                                    else if (response['action'] == google.picker.Action.PICKED) {
                                        var selected_1 = [];
                                        response.docs.map(function (doc) {
                                            var fileId = doc.id, mimeType = doc.mimeType, name = doc.name, modifiedTime = doc.modifiedTime, iconUrl = doc.iconUrl, url = doc.url;
                                            var canExport = mimeType.includes('google-apps');
                                            selected_1.push({ fileId: fileId, mimeType: mimeType, name: name, modifiedTime: modifiedTime, canExport: canExport, iconUrl: iconUrl, url: url });
                                            // update permissions to read by all in domain
                                            _this.drive.updatePermissions(fileId);
                                        });
                                        console.log(selected_1);
                                        resolve(selected_1);
                                    }
                                };
                                var pickerbuilder = new google.picker.PickerBuilder()
                                    .enableFeature(google.picker.Feature.SUPPORT_DRIVES)
                                    .enableFeature(google.picker.Feature.SUPPORT_TEAM_DRIVES)
                                    .addView(new google.picker.DocsView()
                                    .setOwnedByMe(true) // should this be an option?
                                    .setIncludeFolders(true))
                                    .addView(new google.picker.DocsView()
                                    .setIncludeFolders(true)
                                    .setEnableTeamDrives(true))
                                    .setLocale("sv") // should this be an option?
                                    .setSize(1051, 650) // should this be an option?
                                    .setOAuthToken(_this.authToken)
                                    .setCallback(callback);
                                if (_this.options.upload) {
                                    pickerbuilder.addView(new google.picker.DocsUploadView().setIncludeFolders(true));
                                }
                                if (_this.options.multiple) {
                                    pickerbuilder.enableFeature(google.picker.Feature.MULTISELECT_ENABLED);
                                }
                                if (_this.options.limitType) {
                                    var mimeTypes = mimeTypeCollections[_this.options.limitType];
                                    console.log(mimeTypes);
                                    pickerbuilder.setSelectableMimeTypes(mimeTypes);
                                }
                                _this.picker = pickerbuilder.build();
                                _this.picker.setVisible(true);
                            })];
                }
            });
        });
    };
    return GooglePicker;
}(_google_webclient__WEBPACK_IMPORTED_MODULE_1__["GoogleWebClient"]));



/***/ }),

/***/ "./src/apis/google-webclient.ts":
/*!**************************************!*\
  !*** ./src/apis/google-webclient.ts ***!
  \**************************************/
/*! exports provided: GoogleWebClient */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GoogleWebClient", function() { return GoogleWebClient; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _configs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./configs */ "./src/apis/configs.ts");



var GoogleWebClient = /** @class */ (function () {
    function GoogleWebClient(scopes) {
        var _a;
        this.scopes = ['https://www.googleapis.com/auth/userinfo.email', 'https://www.googleapis.com/auth/userinfo.profile'];
        (_a = this.scopes).push.apply(_a, tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](scopes));
    }
    GoogleWebClient.prototype.ensureInited = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var SCOPES;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!(typeof gapi === "undefined")) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.loadGapi()];
                    case 1:
                        _a.sent();
                        _a.label = 2;
                    case 2:
                        SCOPES = this.scopes.join(' ');
                        return [4 /*yield*/, new Promise(function (resolve, reject) {
                                gapi.load("client:auth2", function () {
                                    // Calls authorize without prompting the user. If authorization hasn't been given by
                                    // the user an error is returned and we call authorize again with consent-screen
                                    var reauthorize = false;
                                    return gapi.auth2.authorize({
                                        client_id: _configs__WEBPACK_IMPORTED_MODULE_2__["WebClientId"],
                                        scope: SCOPES,
                                        response_type: 'permission',
                                        login_hint: _globals_KED_env__WEBPACK_IMPORTED_MODULE_1__["default"].currentUser.mail,
                                        prompt: 'none'
                                    }, function (resp) {
                                        console.log(resp);
                                        if (resp.error) {
                                            // no consent given so reauthorize
                                            reauthorize = true;
                                        }
                                        else {
                                            // check if we have all the scopes we want
                                            var scopeset_1 = new Set(resp.scope.split(' '));
                                            var missingScopes = _this.scopes.filter(function (x) { return !scopeset_1.has(x); });
                                            if (missingScopes.length > 0) {
                                                console.log('missing scopes');
                                                // scopes are missing from our consent so reauthorize
                                                reauthorize = true;
                                            }
                                            else {
                                                // everything seems to be ok so store our token
                                                _this.authToken = resp.access_token;
                                                resolve();
                                            }
                                        }
                                        if (reauthorize) {
                                            console.log('reauthorize');
                                            return gapi.auth2.authorize({
                                                client_id: _configs__WEBPACK_IMPORTED_MODULE_2__["WebClientId"],
                                                scope: SCOPES,
                                                response_type: 'permission',
                                                login_hint: _globals_KED_env__WEBPACK_IMPORTED_MODULE_1__["default"].currentUser.mail,
                                                prompt: 'consent'
                                            }, function (resp) {
                                                console.log(resp);
                                                if (resp.error) {
                                                    // something is still wrong so throw an error
                                                    reject('Google Web Client: No access token');
                                                }
                                                else {
                                                    // we now have a token (hopefully with the right scopes)
                                                    // should we check again?
                                                    _this.authToken = resp.access_token;
                                                    resolve();
                                                }
                                            });
                                        }
                                        if (resp.expires_in < 500) {
                                            return gapi.auth2.authorize({
                                                client_id: _configs__WEBPACK_IMPORTED_MODULE_2__["WebClientId"],
                                                scope: SCOPES,
                                                response_type: 'permission',
                                                login_hint: _globals_KED_env__WEBPACK_IMPORTED_MODULE_1__["default"].currentUser.mail,
                                                prompt: 'none'
                                            }, function (resp) {
                                                _this.authToken = resp.access_token;
                                                resolve();
                                            });
                                        }
                                    });
                                });
                            })];
                    case 3:
                        _a.sent();
                        if (!(typeof google === "undefined" || typeof google.picker === "undefined")) return [3 /*break*/, 5];
                        return [4 /*yield*/, new Promise(function (resolve) {
                                gapi.load("picker", function () { resolve(); });
                            })];
                    case 4:
                        _a.sent();
                        _a.label = 5;
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    GoogleWebClient.prototype.loadGapi = function () {
        return new Promise(function (resolve, reject) {
            if (typeof gapi !== "undefined")
                return resolve();
            var script = document.createElement("script");
            script.src = "https://apis.google.com/js/client.js?onload=gaapi_loaded";
            document.getElementsByTagName("head")[0].appendChild(script);
            window.gaapi_loaded = resolve;
        });
    };
    return GoogleWebClient;
}());



/***/ }),

/***/ "./src/apis/mock/mock-classroom-data.ts":
/*!**********************************************!*\
  !*** ./src/apis/mock/mock-classroom-data.ts ***!
  \**********************************************/
/*! exports provided: mockTeachers, mockTuitionGroups, mockTuitionStudents */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mockTeachers", function() { return mockTeachers; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mockTuitionGroups", function() { return mockTuitionGroups; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mockTuitionStudents", function() { return mockTuitionStudents; });
var createStudents = function (group, n, m) {
    var students = [];
    for (var i = n; i <= m; i++) {
        students.push({
            schoolName: 'KED',
            tuitionGroupName: group,
            studentFirstName: 'Student ' + i,
            studentLastName: 'Classroom',
            studentEmailAddress: 'student' + i + '.classroom@kedschools.com'
        });
    }
    return students;
};
var mockTeachers = [
    {
        schoolName: 'KED',
        teacherFirstName: 'Teacher 1',
        teacherLastName: 'Classroom',
        teacherEmailAddress: 'teacher1.classroom@kedschools.com'
    },
    {
        schoolName: 'KED',
        teacherFirstName: 'Teacher 2',
        teacherLastName: 'Classroom',
        teacherEmailAddress: 'teacher2.classroom@kedschools.com'
    },
    {
        schoolName: 'KED',
        teacherFirstName: 'Teacher 3',
        teacherLastName: 'Classroom',
        teacherEmailAddress: 'teacher3.classroom@kedschools.com'
    },
    {
        schoolName: 'KED',
        teacherFirstName: 'Carl',
        teacherLastName: 'Holmberg',
        teacherEmailAddress: 'carl@kedschools.com'
    },
    {
        schoolName: 'KED',
        teacherFirstName: 'David',
        teacherLastName: 'Fahlander',
        teacherEmailAddress: 'david.fahlander@kedschools.com'
    }
];
var mockTuitionGroups = {
    'DJUSL01': [
        {
            schoolName: 'KED',
            tuitionGroupName: 'IDR1_Gr1 (180816-190614)',
            courseCode: 'DJUSL01'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'IDR1_Gr2 (180816-190614)',
            courseCode: 'DJUSL01'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'IDR1_Gr3 (180816-190614)',
            courseCode: 'DJUSL01'
        }
    ],
    'KEMKEM01': [
        {
            schoolName: 'KED',
            tuitionGroupName: 'KEM1_Gr1 (180816-190614)',
            courseCode: 'KEMKEM01'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'KEM1_Gr2 (180816-190614)',
            courseCode: 'KEMKEM01'
        }
    ],
    'BIOBIO01': [
        {
            schoolName: 'KED',
            tuitionGroupName: 'BIO1_Gr1 (180816-190614)',
            courseCode: 'BIOBIO01'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'BIO1_Gr2 (180816-190614)',
            courseCode: 'BIOBIO01'
        }
    ],
    'SVESVE03': [
        {
            schoolName: 'KED',
            tuitionGroupName: 'SVE3_Gr1 (180816-190614)',
            courseCode: 'SVESVE03'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'SVE3_Gr2 (180816-190614)',
            courseCode: 'SVESVE03'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'SVE3_Gr3 (180816-190614)',
            courseCode: 'SVESVE03'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'SVE3_Gr4 (180816-190614)',
            courseCode: 'SVESVE03'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'SVE3_Gr5 (180816-190614)',
            courseCode: 'SVESVE03'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'SVE3_Gr6 (180816-190614)',
            courseCode: 'SVESVE03'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'SVE3_Gr7 (180816-190614)',
            courseCode: 'SVESVE03'
        }
    ]
};
var mockTuitionStudents = {
    'IDR1_Gr1 (180816-190614)': createStudents('IDR1_Gr1 (180816-190614)', 1, 12),
    'IDR1_Gr2 (180816-190614)': createStudents('IDR1_Gr2 (180816-190614)', 13, 22),
    'IDR1_Gr3 (180816-190614)': createStudents('IDR1_Gr3 (180816-190614)', 23, 34),
    'KEM1_Gr1 (180816-190614)': [
        {
            schoolName: 'KED',
            tuitionGroupName: 'KEM1_Gr1 (180816-190614)',
            studentFirstName: 'Student 2',
            studentLastName: 'Classroom',
            studentEmailAddress: 'student2.classroom@kedschools.com'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'KEM1_Gr1 (180816-190614)',
            studentFirstName: 'Student 3',
            studentLastName: 'Classroom',
            studentEmailAddress: 'student3.classroom@kedschools.com'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'KEM1_Gr1 (180816-190614)',
            studentFirstName: 'Student 8',
            studentLastName: 'Classroom',
            studentEmailAddress: 'student8.classroom@kedschools.com'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'KEM1_Gr1 (180816-190614)',
            studentFirstName: 'Student 9',
            studentLastName: 'Classroom',
            studentEmailAddress: 'student9.classroom@kedschools.com'
        }
    ],
    'KEM1_Gr2 (180816-190614)': [
        {
            schoolName: 'KED',
            tuitionGroupName: 'KEM1_Gr2 (180816-190614)',
            studentFirstName: 'Student 1',
            studentLastName: 'Classroom',
            studentEmailAddress: 'student1.classroom@kedschools.com'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'KEM1_Gr2 (180816-190614)',
            studentFirstName: 'Student 5',
            studentLastName: 'Classroom',
            studentEmailAddress: 'student5.classroom@kedschools.com'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'KEM1_Gr2 (180816-190614)',
            studentFirstName: 'Student 6',
            studentLastName: 'Classroom',
            studentEmailAddress: 'student6.classroom@kedschools.com'
        }
    ],
    'BIO1_Gr1 (180816-190614)': [
        {
            schoolName: 'KED',
            tuitionGroupName: 'BIO1_Gr1 (180816-190614)',
            studentFirstName: 'Student 1',
            studentLastName: 'Classroom',
            studentEmailAddress: 'student1.classroom@kedschools.com'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'BIO1_Gr1 (180816-190614)',
            studentFirstName: 'Student 4',
            studentLastName: 'Classroom',
            studentEmailAddress: 'student4.classroom@kedschools.com'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'BIO1_Gr1 (180816-190614)',
            studentFirstName: 'Student 6',
            studentLastName: 'Classroom',
            studentEmailAddress: 'student6.classroom@kedschools.com'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'BIO1_Gr1 (180816-190614)',
            studentFirstName: 'Student 10',
            studentLastName: 'Classroom',
            studentEmailAddress: 'student10.classroom@kedschools.com'
        }
    ],
    'BIO1_Gr2 (180816-190614)': [
        {
            schoolName: 'KED',
            tuitionGroupName: 'BIO1_Gr2 (180816-190614)',
            studentFirstName: 'Student 2',
            studentLastName: 'Classroom',
            studentEmailAddress: 'student2.classroom@kedschools.com'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'BIO1_Gr2 (180816-190614)',
            studentFirstName: 'Student 7',
            studentLastName: 'Classroom',
            studentEmailAddress: 'student7.classroom@kedschools.com'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'BIO1_Gr2 (180816-190614)',
            studentFirstName: 'Student 8',
            studentLastName: 'Classroom',
            studentEmailAddress: 'student8.classroom@kedschools.com'
        },
    ],
    'SVE3_Gr1 (180816-190614)': createStudents('SVE3_Gr1 (180816-190614)', 1, 21),
    'SVE3_Gr2 (180816-190614)': createStudents('SVE3_Gr2 (180816-190614)', 22, 44),
    'SVE3_Gr3 (180816-190614)': createStudents('SVE3_Gr3 (180816-190614)', 45, 61),
    'SVE3_Gr4 (180816-190614)': createStudents('SVE3_Gr4 (180816-190614)', 62, 78),
    'SVE3_Gr5 (180816-190614)': createStudents('SVE3_Gr5 (180816-190614)', 83, 107),
    'SVE3_Gr6 (180816-190614)': createStudents('SVE3_Gr6 (180816-190614)', 108, 124),
    'SVE3_Gr7 (180816-190614)': createStudents('SVE3_Gr7 (180816-190614)', 125, 150)
};


/***/ }),

/***/ "./src/apis/mock/mock-eds-data.json":
/*!******************************************!*\
  !*** ./src/apis/mock/mock-eds-data.json ***!
  \******************************************/
/*! exports provided: SouthIndia, NorthIndia, default */
/***/ (function(module) {

module.exports = {"SouthIndia":[{"firstTerm":{"startDate":"2015-06-01T00:00:00.000Z","endDate":"2015-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2015-11-01T00:00:00.000Z","endDate":"2016-03-27T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2016-06-23T00:00:00.000Z","endDate":"2016-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2016-11-01T00:00:00.000Z","endDate":"2017-03-25T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2017-06-05T00:00:00.000Z","endDate":"2017-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2017-11-01T00:00:00.000Z","endDate":"2018-03-30T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2018-06-04T00:00:00.000Z","endDate":"2018-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2018-11-01T00:00:00.000Z","endDate":"2019-04-29T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2019-06-03T00:00:00.000Z","endDate":"2019-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2019-11-01T00:00:00.000Z","endDate":"2020-03-27T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2020-06-01T00:00:00.000Z","endDate":"2020-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2020-11-01T00:00:00.000Z","endDate":"2021-03-26T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2021-06-06T00:00:00.000Z","endDate":"2021-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2021-11-01T00:00:00.000Z","endDate":"2022-03-25T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2022-06-05T00:00:00.000Z","endDate":"2022-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2022-11-01T00:00:00.000Z","endDate":"2023-03-31T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2023-06-04T00:00:00.000Z","endDate":"2023-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2023-11-01T00:00:00.000Z","endDate":"2024-03-29T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2024-06-03T00:00:00.000Z","endDate":"2024-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2024-11-01T00:00:00.000Z","endDate":"2025-03-28T00:00:00.000Z"},"holidays":[]}],"NorthIndia":[{"firstTerm":{"startDate":"2024-04-03T00:00:00.000Z","endDate":"2024-09-30T00:00:00.000Z"},"secondTerm":{"startDate":"2024-10-01T00:00:00.000Z","endDate":"2025-04-02T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2023-04-05T00:00:00.000Z","endDate":"2023-10-01T00:00:00.000Z"},"secondTerm":{"startDate":"2023-10-02T00:00:00.000Z","endDate":"2024-04-02T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2022-04-06T00:00:00.000Z","endDate":"2022-10-03T00:00:00.000Z"},"secondTerm":{"startDate":"2022-10-04T00:00:00.000Z","endDate":"2023-04-04T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2021-04-01T00:00:00.000Z","endDate":"2021-10-04T00:00:00.000Z"},"secondTerm":{"startDate":"2021-10-05T00:00:00.000Z","endDate":"2022-04-05T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2020-04-01T00:00:00.000Z","endDate":"2020-09-28T00:00:00.000Z"},"secondTerm":{"startDate":"2020-09-29T00:00:00.000Z","endDate":"2021-03-31T00:00:00.000Z"},"holidays":[{"startDate":"2020-05-17","endDate":"2020-06-28"}]},{"firstTerm":{"startDate":"2019-04-04T00:00:00.000Z","endDate":"2019-09-30T00:00:00.000Z"},"secondTerm":{"startDate":"2019-10-01T00:00:00.000Z","endDate":"2020-03-31T00:00:00.000Z"},"holidays":[{"startDate":"2019-05-19","endDate":"2019-06-29"}]},{"firstTerm":{"startDate":"2018-04-04T00:00:00.000Z","endDate":"2018-09-30T00:00:00.000Z"},"secondTerm":{"startDate":"2018-10-01T00:00:00.000Z","endDate":"2019-04-03T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2017-04-05T00:00:00.000Z","endDate":"2017-10-02T00:00:00.000Z"},"secondTerm":{"startDate":"2017-10-03T00:00:00.000Z","endDate":"2018-04-03T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2016-04-06T00:00:00.000Z","endDate":"2016-10-03T00:00:00.000Z"},"secondTerm":{"startDate":"2016-10-04T00:00:00.000Z","endDate":"2017-04-04T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2015-04-01T00:00:00.000Z","endDate":"2015-10-05T00:00:00.000Z"},"secondTerm":{"startDate":"2015-10-06T00:00:00.000Z","endDate":"2016-04-05T00:00:00.000Z"},"holidays":[]}]};

/***/ }),

/***/ "./src/components/charts/goal-progress.tsx":
/*!*************************************************!*\
  !*** ./src/components/charts/goal-progress.tsx ***!
  \*************************************************/
/*! exports provided: GoalProgress */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GoalProgress", function() { return GoalProgress; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var GoalProgress = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](GoalProgress, _super);
    function GoalProgress() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.createProgress = function () {
            var _a = _this.props, numberOfTasks = _a.numberOfTasks, completedNumberOfTasks = _a.completedNumberOfTasks, maximumTasksDisplayed = _a.maximumTasksDisplayed, backgroundColor = _a.backgroundColor, progressColor = _a.progressColor;
            var progress = [];
            if (numberOfTasks > maximumTasksDisplayed) {
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "progress-overview" },
                    " ",
                    completedNumberOfTasks,
                    " / ",
                    numberOfTasks,
                    " ");
            }
            for (var taskNo = 1; taskNo <= numberOfTasks; taskNo++) {
                progress.push(react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("svg", { key: taskNo },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("circle", { className: "circle-chart-background", fill: taskNo > completedNumberOfTasks ? backgroundColor : progressColor, cx: "8", cy: "8", r: "8" })));
            }
            return progress;
        };
        return _this;
    }
    GoalProgress.prototype.render = function () {
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "goals-progress" }, this.createProgress());
    };
    GoalProgress.defaultProps = {
        numberofTasks: 0,
        completedNumberOfTasks: 0,
        maximumTasksDisplayed: 10,
        backgroundColor: "lightgrey",
        progressColor: "#3dbca2",
    };
    return GoalProgress;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/course-builder-ks/logic/ordered-requirements.ts":
/*!************************************************************************!*\
  !*** ./src/components/course-builder-ks/logic/ordered-requirements.ts ***!
  \************************************************************************/
/*! exports provided: getOrderedDocs, resolveRequirementOrder */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getOrderedDocs", function() { return getOrderedDocs; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "resolveRequirementOrder", function() { return resolveRequirementOrder; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var kedbackend_observable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kedbackend/observable */ "./kedbackend/observable.js");
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");




function getOrderedDocs(docs, order, _a) {
    var appendLeftovers = (_a === void 0 ? { appendLeftovers: false } : _a).appendLeftovers;
    // Mark doc IDs that where present in given 'order' array.
    // Will be used to find left-overs that were not present in the 'order' array.
    var markedDocs = {};
    if (!docs || !order) {
        // Special case: no docs or no order. Don't fail. Just return docs as is.
        return docs;
    }
    // Map given 'order' array to corresponding docs. Also mark in markedDocs.
    var result = (docs && order ?
        order.map(function (id) {
            markedDocs[id] = true;
            return docs.find(function (doc) { return doc.id === id; });
        }).filter(function (doc) { return !!doc; }) :
        docs);
    if (appendLeftovers) {
        // If any leftovers are there, concat them at the end:
        var leftOvers = docs.filter(function (doc) { return !markedDocs[doc.id]; });
        return result.concat(leftOvers);
    }
    else {
        return result;
    }
}
function resolveRequirementOrder(obj, orderDefiner) {
    var _a;
    var orderDefiningDocObservable;
    if (orderDefiner) {
        // User provided the orderDefining doc (use case is when obj is a Course or Subject, which contains its order by itself. User then provides the Course or Subject in both args)
        orderDefiningDocObservable = new kedbackend_observable__WEBPACK_IMPORTED_MODULE_1__["Emitter"]([orderDefiner]);
    }
    else {
        var courseCodes = obj.tags.filter(function (tag) { return tag.startsWith("course:"); });
        if (courseCodes.length === 0) {
            return new kedbackend_observable__WEBPACK_IMPORTED_MODULE_1__["Emitter"](obj); // No course tags. Not possible to resolve order.
        }
        orderDefiningDocObservable = (_a = _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].courses).tags.apply(_a, tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](courseCodes)).toValue();
    }
    return orderDefiningDocObservable.map(function (orderHolders) {
        var abilitiesOrder = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["flatten"])(orderHolders.map(function (orderHolder) { return orderHolder.abilitiesOrder || []; }));
        var ccOrder = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["flatten"])(orderHolders.map(function (orderHolder) { return orderHolder.centralContentOrder || []; }));
        var krOrder = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["flatten"])(orderHolders.map(function (orderHolder) { return orderHolder.knowledgeRequirementsOrder || []; }));
        var objClone = Object.assign({}, obj);
        if (objClone.abilities)
            objClone.abilities = getOrderedDocs(obj.abilities, abilitiesOrder);
        if (objClone.centralContent)
            objClone.centralContent = getOrderedDocs(obj.centralContent, ccOrder);
        if (objClone.knowledgeRequirements)
            objClone.knowledgeRequirements = getOrderedDocs(obj.knowledgeRequirements, krOrder);
        return objClone;
    });
}


/***/ }),

/***/ "./src/components/course-builder-ks/logic/task-order.ts":
/*!**************************************************************!*\
  !*** ./src/components/course-builder-ks/logic/task-order.ts ***!
  \**************************************************************/
/*! exports provided: getSortedTasks, computeUpdatedOrder */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSortedTasks", function() { return getSortedTasks; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computeUpdatedOrder", function() { return computeUpdatedOrder; });
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _ordered_requirements__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ordered-requirements */ "./src/components/course-builder-ks/logic/ordered-requirements.ts");


function getSortedTasks(content) {
    return Object(_ordered_requirements__WEBPACK_IMPORTED_MODULE_1__["getOrderedDocs"])(content.tasks, content.taskOrder, { appendLeftovers: true });
}
function computeUpdatedOrder(docs, currentOrder, source, target, placement, _a) {
    var appendLeftovers = (_a === void 0 ? { appendLeftovers: false } : _a).appendLeftovers;
    var orderedIds = Object(_ordered_requirements__WEBPACK_IMPORTED_MODULE_1__["getOrderedDocs"])(docs, currentOrder, { appendLeftovers: true }).map(function (t) { return t.id; });
    var placeBefore = placement === 'before';
    var result = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_0__["flatten"])(orderedIds
        .filter(function (id) { return id !== source.id; }) // Remove source id
        .map(function (id) { return id !== target.id ?
        // We're not on target
        id :
        // We're on target. Place before or after?
        placeBefore ?
            [source.id, id] :
            [id, source.id]; }));
    return result;
}


/***/ }),

/***/ "./src/components/course-builder/courses/business-logic.ts":
/*!*****************************************************************!*\
  !*** ./src/components/course-builder/courses/business-logic.ts ***!
  \*****************************************************************/
/*! exports provided: getUncoveredKnowledgeRequirements, getIdsNotCoveredByTasks, getIdsNotCoveredByReqReferencingDocs, sanityCheck, getTasksPerId, getSoftAccessList */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getUncoveredKnowledgeRequirements", function() { return getUncoveredKnowledgeRequirements; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getIdsNotCoveredByTasks", function() { return getIdsNotCoveredByTasks; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getIdsNotCoveredByReqReferencingDocs", function() { return getIdsNotCoveredByReqReferencingDocs; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sanityCheck", function() { return sanityCheck; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTasksPerId", function() { return getTasksPerId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSoftAccessList", function() { return getSoftAccessList; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils */ "./src/components/course-builder/utils.ts");



function getUncoveredKnowledgeRequirements(course) {
    var uncoveredRequirements = course.knowledgeRequirements.reduce(function (result, item) {
        result[item.id] = item;
        return result;
    }, {});
    course.tasks.forEach(function (task) {
        task.knowledgeRequirements.forEach(function (kr) {
            delete uncoveredRequirements[kr.id];
        });
    });
    return Object.keys(uncoveredRequirements).map(function (id) { return uncoveredRequirements[id]; });
}
function getIdsNotCoveredByTasks(course) {
    return getIdsNotCoveredByReqReferencingDocs([course], course.tasks);
}
function getIdsNotCoveredByReqReferencingDocs(templates, docsBeingChecked) {
    var uncoveredIds = {};
    // 1. Mark the ids of all knowledge requirements, abilities and central content for this course:
    templates.forEach(function (course) {
        course.knowledgeRequirements.forEach(function (r) {
            uncoveredIds[r.id] = true;
        });
        course.abilities.forEach(function (a) {
            uncoveredIds[a.id] = true;
        });
        course.centralContent.forEach(function (cc) {
            uncoveredIds[cc.id] = true;
        });
    });
    // 2. List all tasks and unmark all ids that they refer to
    docsBeingChecked.forEach(function (doc) {
        doc.knowledgeRequirements.forEach(function (kr) {
            delete uncoveredIds[kr.id];
        });
        doc.abilities.forEach(function (a) {
            delete uncoveredIds[a.id];
        });
        doc.centralContent.forEach(function (cc) {
            delete uncoveredIds[cc.id];
        });
    });
    return uncoveredIds;
}
function sanityCheck(course) {
    function hasDuplicateTasks(course) {
        var taskIds = {};
        return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["flatten"])(course.modules.map(function (module) { return module.taskIds.map(function (taskId) {
            if (taskIds[taskId]) {
                var task = course.tasks.find(function (t) { return t.id === taskId; });
                return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Samma uppgift f\u00F6rekommer flera g\u00E5nger: \"", "\""], ["Samma uppgift f\u00F6rekommer flera g\u00E5nger: \"", "\""])), task.name);
            }
            taskIds[taskId] = true;
        }).filter(function (x) { return x; }); }));
    }
    function tasksWithSameUrl(course) {
        var taskUrls = {};
        return course.tasks.map(function (task) {
            if (task.url) {
                if (taskUrls[task.url]) {
                    return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Tv\u00E5 uppgifter pekar p\u00E5 samma URL: \"", "\" samt \"", "\""], ["Tv\u00E5 uppgifter pekar p\u00E5 samma URL: \"", "\" samt \"", "\""])), taskUrls[task.url].name, task.name);
                }
                taskUrls[task.url] = task;
            }
        }).filter(function (x) { return x; });
    }
    function hasEmptyModuleNames(course) {
        return course.modules.some(function (module) { return module.name === ""; }) && Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Det finns minst en modul utan angivet namn"], ["Det finns minst en modul utan angivet namn"])));
    }
    function hasDuplicateModuleNames(course) {
        var moduleNames = {};
        return course.modules.map(function (module) {
            if (module.name && moduleNames[module.name]) {
                return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Modulen med namn ", " f\u00F6rekommer flera g\u00E5nger"], ["Modulen med namn ", " f\u00F6rekommer flera g\u00E5nger"])), module.name);
            }
            if (module.name)
                moduleNames[module.name] = true;
        });
    }
    var checks = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["flatten"])([
        hasDuplicateTasks(course),
        tasksWithSameUrl(course),
        hasEmptyModuleNames(course),
        hasDuplicateModuleNames(course)
    ]);
    return checks.filter(function (result) { return result; });
}
function getTasksPerId(course) {
    var result = {};
    function add(id, task) {
        var list = result[id] || (result[id] = []);
        list.push(task);
    }
    course.tasks.forEach(function (task) {
        task.abilities.forEach(function (a) { return add(a.id, task); });
        task.centralContent.forEach(function (c) { return add(c.id, task); });
        task.futureAbilities.forEach(function (fa) { return add(fa, task); });
    });
    return result;
}
/** Returns an access list for a course in a backward compatible way */
function getSoftAccessList(course) {
    var responsibleTeachers = course.responsibleTeachers;
    var result = responsibleTeachers.map(function (da) { return ({
        name: da.name,
        email: Object(_utils__WEBPACK_IMPORTED_MODULE_2__["getEmailFromDocAccess"])(da),
        access: da.access || 'edit'
    }); });
    return result;
}
var templateObject_1, templateObject_2, templateObject_3, templateObject_4;


/***/ }),

/***/ "./src/components/course-builder/courses/course-banner.tsx":
/*!*****************************************************************!*\
  !*** ./src/components/course-builder/courses/course-banner.tsx ***!
  \*****************************************************************/
/*! exports provided: setCourseImage, CourseBanner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setCourseImage", function() { return setCourseImage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CourseBanner", function() { return CourseBanner; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/es/index.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils */ "./src/components/course-builder/utils.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");







var AdminMenuItems = [
    { name: "schools", text: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Skolor"], ["Skolor"]))), route: "/schools" },
    { name: "subjects", text: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4mnen"], ["\u00C4mnen"]))), route: "/subjects" },
];
var NonAdminMenuItems = [
    { name: "courseBuilder", text: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Kursbyggaren"], ["Kursbyggaren"]))), route: "/courses/new" },
    { name: "studentPage", text: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Elevsida"], ["Elevsida"]))), route: "" },
    { name: "feedback", text: react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("span", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-commenting-o", "aria-hidden": "true" }),
            " Feedback"), route: "https://kg.kunskapsporten.se/kursbyggaren/" }
];
function onDropImage(ev, host, course, origCourse) {
    return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
        var files, url, items, file, form, res, _loop_1, i;
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
            switch (_a.label) {
                case 0:
                    ev.stopPropagation();
                    ev.preventDefault();
                    files = ev.dataTransfer.files;
                    url = null;
                    items = Array.from(ev.dataTransfer.items);
                    if (!(files.length > 0)) return [3 /*break*/, 3];
                    file = files[0];
                    if (file.size > 2 * 1024 * 1024) {
                        Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["showError"])(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Kan inte ladda upp bilder st\u00F6rre \u00E4n 2 MB"], ["Kan inte ladda upp bilder st\u00F6rre \u00E4n 2 MB"]))));
                        return [2 /*return*/];
                    }
                    form = new FormData();
                    form.append("files", file);
                    return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_6__["default"].kedBackendClient.http.fetch('web-upload', 'put', {}, {}, {
                            body: form
                        })];
                case 1:
                    res = _a.sent();
                    if (res.status !== 200) {
                        Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["showError"])(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_6 || (templateObject_6 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Kunde inte ladda upp filen till Google Storage"], ["Kunde inte ladda upp filen till Google Storage"]))));
                        return [2 /*return*/];
                    }
                    return [4 /*yield*/, res.text()];
                case 2:
                    url = _a.sent();
                    return [3 /*break*/, 7];
                case 3:
                    _loop_1 = function (i) {
                        var item;
                        return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                            switch (_a.label) {
                                case 0:
                                    item = items[i];
                                    if (!item.type.match('^text/uri-list')) return [3 /*break*/, 2];
                                    return [4 /*yield*/, new Promise(function (resolve) { return item.getAsString(resolve); })];
                                case 1:
                                    // URI
                                    url = _a.sent();
                                    _a.label = 2;
                                case 2: return [2 /*return*/];
                            }
                        });
                    };
                    i = 0;
                    _a.label = 4;
                case 4:
                    if (!(i < items.length)) return [3 /*break*/, 7];
                    return [5 /*yield**/, _loop_1(i)];
                case 5:
                    _a.sent();
                    _a.label = 6;
                case 6:
                    ++i;
                    return [3 /*break*/, 4];
                case 7:
                    if (url == null) {
                        Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["showError"])(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_7 || (templateObject_7 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Kunde inte hitta n\u00E5gon bild i inneh\u00E5llet"], ["Kunde inte hitta n\u00E5gon bild i inneh\u00E5llet"]))));
                        return [2 /*return*/];
                    }
                    setCourseImage(course, origCourse, host, url);
                    return [2 /*return*/];
            }
        });
    });
}
function setCourseImage(course, origCourse, host, url) {
    var imageId = Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["createUUID"])();
    host.update({
        imageId: { $set: imageId },
        images: {
            $set: [{
                    id: imageId,
                    url: url,
                    acl: [
                        "role:USER:R",
                        "schoolRole:" + _globals_KED_env__WEBPACK_IMPORTED_MODULE_6__["default"].currentUser.school + "/EMPLOYEE:S"
                    ],
                    $meta: 'add'
                }]
        }
    });
}
/* This version had the bug that old images were not replaced.
One course at Uppsala contained 12 images.


export function setCourseImageOld(
  course: Course,
  origCourse: Course,
  host: ICourseEditorHost,
  url: string)
{
  if (!origCourse || !origCourse.imageId) {
    const imageId = createUUID();
    host.update({
      imageId: { $set: imageId },
      images: {
        $push: [{
          id: imageId,
          url,
          acl: course.isTemplate ? ["role:USER:R"] : ["role:USER:R", `schoolRole:${env.currentUser.school}/EMPLOYEE:S`],
          $meta: 'add'
        }]
      }
    });
  } else {
    // Update existing image:
    const imgIdx = course.images.findIndex(img => img.id === course.imageId);
    if (imgIdx >= 0) {
      const imageEntity = course.images[imgIdx];
      if (course.isTemplate) {
        // Templates: Update the template image content:
        host.update({
          images: {
            $splice: [[imgIdx, 1, {
              ...imageEntity,
              url,
              $meta: 'update'
            }]]
          }
        })
      } else {
        // Real courses: Replace with a new image
        const imageId = createUUID();
        host.update({
          imageId: { $set: imageId },
          images: {
            $splice: [[imgIdx, 1, {
              id: imageId,
              url,
              acl: [
                `role:USER:R`,
                `schoolRole:${env.currentUser.school}/EMPLOYEE:S`
              ],
              $meta: 'add'
            }]]
          }
        })
      }
    } else {
      showError(L`Kunde inte uppdatera bilden.`);
    }
  }
}
*/
var CourseBanner = function (props) {
    var title = props.title, isTemplate = props.isTemplate, host = props.host, course = props.course, origCourse = props.origCourse, backgroundImage = props.backgroundImage, activePage = props.activePage;
    var isAdmin = _globals_KED_env__WEBPACK_IMPORTED_MODULE_6__["default"].currentUser.roles.some(function (role) { return role === "ADMIN"; });
    var menuItems = NonAdminMenuItems;
    if (isAdmin)
        menuItems = AdminMenuItems.concat(menuItems);
    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-row sv-layout sv-skip-spacer" },
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-layout sv-skip-spacer sv-column-12" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-script-portlet sv-portlet sv-skip-spacer" },
                backgroundImage && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("style", null, "\n        .pageHeader {\n          background-image: url('" + backgroundImage + "') !important;\n        }\n      "),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "pageHeader", onDragOver: course && _utils__WEBPACK_IMPORTED_MODULE_3__["allowCopy"], onDrop: course && (function (ev) { return onDropImage(ev, host, course, origCourse); }) },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h1", null, title)),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "buttonsField" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "buttonsContainer" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" }),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: 'horizontalMenu' },
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("ul", null, menuItems.map(function (item) { return ({
                                    item: item,
                                    isActive: activePage === item.name,
                                    callback: props.callbacks && props.callbacks[item.name],
                                    givenRoute: (props.routes && props.routes[item.name]),
                                    defaultRoute: item.route
                                }); }).filter(function (x) { return x.callback || x.defaultRoute || x.givenRoute; }).map(function (_a) {
                                    var item = _a.item, isActive = _a.isActive, callback = _a.callback, defaultRoute = _a.defaultRoute, givenRoute = _a.givenRoute;
                                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("li", { key: item.name, className: isActive ? "activePage" : "", onClick: callback }, callback ?
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", null, item.text) :
                                        defaultRoute || givenRoute ?
                                            givenRoute || /^http[s]\:\/\//i.test(defaultRoute) ?
                                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: givenRoute || defaultRoute }, item.text) :
                                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Link"], { to: defaultRoute }, item.text) :
                                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", null, item.text));
                                })))))))));
};
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7;


/***/ }),

/***/ "./src/components/course-builder/courses/course-module-list.tsx":
/*!**********************************************************************!*\
  !*** ./src/components/course-builder/courses/course-module-list.tsx ***!
  \**********************************************************************/
/*! exports provided: CourseModuleList */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CourseModuleList", function() { return CourseModuleList; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-dom */ "react-dom");
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _course_module__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./course-module */ "./src/components/course-builder/courses/course-module.tsx");





var CourseModuleList = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](CourseModuleList, _super);
    function CourseModuleList(props) {
        var _this = _super.call(this, props) || this;
        _this._moduleRefs = {};
        _this.state = {};
        return _this;
    }
    CourseModuleList.prototype.addModule = function () {
        this.props.host.update({ modules: { $push: [{
                        name: "Ny kursmodul",
                        id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])(),
                        resources: [],
                        taskIds: []
                    }
                ] } });
    };
    CourseModuleList.prototype.getOrderedModules = function () {
        var course = this.props.course;
        var moduleOrder = course.moduleOrder || course.modules.map(function (m) { return m.id; });
        return moduleOrder
            // Map ordered id to module
            .map(function (id) { return course.modules.find(function (m) { return m.id === id; }); })
            // Ignore entries that only exists in moduleOrder but not in modules
            .filter(function (m) { return !!m; })
            // Append modules at end that are not listed in moduleOrder
            .concat(course.modules.filter(function (m) { return !moduleOrder.find(function (id) { return m.id === id; }); }));
    };
    CourseModuleList.prototype.reorder = function (moduleId, direction) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var course, orderedModules, moduleIndex, newModuleIndex, currentModuleAtPosition, moduleOrder, origScrollPos, elemModule;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        course = this.props.course;
                        orderedModules = this.getOrderedModules();
                        moduleIndex = orderedModules.findIndex(function (m) { return m.id === moduleId; });
                        newModuleIndex = moduleIndex + direction;
                        if (newModuleIndex < 0 || newModuleIndex >= orderedModules.length) {
                            // Cannot order outside limits.
                            return [2 /*return*/];
                        }
                        currentModuleAtPosition = orderedModules[newModuleIndex];
                        moduleOrder = orderedModules.map(function (m) { return m.id; });
                        moduleOrder[newModuleIndex] = moduleId;
                        moduleOrder[moduleIndex] = currentModuleAtPosition.id;
                        origScrollPos = document.documentElement.scrollTop;
                        return [4 /*yield*/, this.props.host.update({
                                moduleOrder: { $set: moduleOrder }
                            })];
                    case 1:
                        _a.sent();
                        elemModule = Object(react_dom__WEBPACK_IMPORTED_MODULE_2__["findDOMNode"])(this._moduleRefs[moduleId]);
                        if (elemModule) {
                            try {
                                window.scrollTo({ top: origScrollPos }); // Prohibit default scrolling directly upwards on move up.
                                if (elemModule.getBoundingClientRect().top < 0 || elemModule.getBoundingClientRect().bottom > document.documentElement.scrollHeight) {
                                    elemModule.scrollIntoView({ behavior: 'smooth', block: 'start' });
                                }
                            }
                            catch (e) {
                                // Only Chrome beta supports the arguments given above. Default for older browsers.
                                window.scrollTo(null, origScrollPos);
                                if (elemModule.getBoundingClientRect().top < 0 || elemModule.getBoundingClientRect().bottom > document.documentElement.scrollHeight) {
                                    elemModule.scrollIntoView(true);
                                }
                            }
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    CourseModuleList.prototype.render = function () {
        var _this = this;
        var _a = this.props, course = _a.course, host = _a.host, idsNotCoveredByAnyTask = _a.idsNotCoveredByAnyTask;
        var moduleOrder = course.moduleOrder || course.modules.map(function (m) { return m.id; });
        var orderedModules = this.getOrderedModules();
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet", ref: function (elem) { return _this._elem = elem; } },
            orderedModules.map(function (module) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_module__WEBPACK_IMPORTED_MODULE_4__["CourseModuleComponent"], { ref: function (elem) { return _this._moduleRefs[module.id] = elem; }, key: module.id, course: course, module: module, onReorder: function (direction) { return _this.reorder(module.id, direction); }, getOrderedModules: function () { return _this.getOrderedModules(); }, host: host, idsNotCoveredByAnyTask: idsNotCoveredByAnyTask }); }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn btn-large", onClick: function () { return _this.addModule(); } }, "L\u00E4gg till kursmodul"));
    };
    return CourseModuleList;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/course-builder/courses/course-module.tsx":
/*!*****************************************************************!*\
  !*** ./src/components/course-builder/courses/course-module.tsx ***!
  \*****************************************************************/
/*! exports provided: CourseModuleComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CourseModuleComponent", function() { return CourseModuleComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _sub_components_editable_resource_list__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../sub-components/editable-resource-list */ "./src/components/course-builder/sub-components/editable-resource-list.tsx");
/* harmony import */ var _sub_components_editable_task_list__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../sub-components/editable-task-list */ "./src/components/course-builder/sub-components/editable-task-list.tsx");
/* harmony import */ var react_addons_update__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-addons-update */ "./node_modules/react-addons-update/index.js");
/* harmony import */ var react_addons_update__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_addons_update__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _sub_components_remove_item__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../sub-components/remove-item */ "./src/components/course-builder/sub-components/remove-item.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _utility_components_wysiwyg__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../utility-components/wysiwyg */ "./src/components/utility-components/wysiwyg/index.tsx");
/* harmony import */ var _utility_components_wysiwyg_actions_sv__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../utility-components/wysiwyg/actions-sv */ "./src/components/utility-components/wysiwyg/actions-sv.ts");
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");
/* harmony import */ var _utility_components_content_editable_field__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../utility-components/content-editable-field */ "./src/components/utility-components/content-editable-field.tsx");
/* harmony import */ var _course_builder_ks_logic_task_order__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../course-builder-ks/logic/task-order */ "./src/components/course-builder-ks/logic/task-order.ts");
/* harmony import */ var _features__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../features */ "./src/features/index.ts");













var DEFAULT_KNOWLEDGE_MATRIX = [{
        abilityIds: [],
        EIds: [],
        CIds: [],
        AIds: []
    }];
var CourseModuleComponent = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](CourseModuleComponent, _super);
    function CourseModuleComponent(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            editMandatoryContent: false
        };
        return _this;
    }
    CourseModuleComponent.prototype.getModuleIndex = function () {
        var _a = this.props, course = _a.course, module = _a.module;
        return course.modules.findIndex(function (m) { return m.id === module.id; });
    };
    CourseModuleComponent.prototype.getModuleOrderIndex = function () {
        var _a = this.props, course = _a.course, module = _a.module;
        var orderedModules = this.props.getOrderedModules();
        return orderedModules.findIndex(function (m) { return m.id === module.id; });
    };
    CourseModuleComponent.prototype.updateModule = function (moduleUpdates) {
        var module = this.props.module;
        var updatedModule = react_addons_update__WEBPACK_IMPORTED_MODULE_4___default()(module, moduleUpdates);
        var moduleIndex = this.getModuleIndex();
        this.props.host.update({ modules: { $splice: [[moduleIndex, 1, updatedModule]] } });
    };
    /* This method works for both adding new tasks to the task table
    and adding references to existing tasks. The magic of that has to do with
    whether task.$meta = 'add' or not and is done in EditCourse.save()
    */
    CourseModuleComponent.prototype.onTaskAdded = function (task, taskCustomization) {
        // Add task ID to module taskIds list:
        var courseUpdates = {};
        var taskIds = this.props.module.taskIds.slice();
        taskIds.push(task.id);
        // Add physical Task to Course.tasks.
        if (!this.props.course.tasks.some(function (t) { return t.id === task.id; })) {
            courseUpdates.tasks = { $push: [task] };
        }
        var customizations = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, (this.props.module.taskCustomizations || {}));
        if (taskCustomization)
            customizations[task.id] = taskCustomization;
        var moduleIndex = this.getModuleIndex();
        courseUpdates.modules = {};
        courseUpdates.modules[moduleIndex] = {
            taskIds: { $set: taskIds },
            taskCustomizations: { $set: customizations }
        };
        // Update module
        this.props.host.update(courseUpdates);
    };
    CourseModuleComponent.prototype.onTaskUpdated = function (task) {
        if (!task.$meta)
            throw new Error(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Hoppsan, blev lite knas. Fel ID: ", ""], ["Hoppsan, blev lite knas. Fel ID: ", ""])), 'Pa7Dq'));
        var taskIndex = this.props.course.tasks.findIndex(function (t) { return t.id === task.id; });
        if (taskIndex >= 0) {
            this.props.host.update({ tasks: { $splice: [[taskIndex, 1, task]] } });
        }
    };
    CourseModuleComponent.prototype.onTaskCustomized = function (taskId, customization) {
        var customizations = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, (this.props.module.taskCustomizations || {}));
        customizations[taskId] = customization;
        this.updateModule({ taskCustomizations: { $set: customizations } });
    };
    CourseModuleComponent.prototype.onTaskDeleted = function (id) {
        // Remove task ID from module taskIds list.
        // This depends on the fact that EditCourse._setState() maintains
        // removed Task links (which it actually does (or should do at least)).
        this.updateModule({
            taskIds: { $set: this.props.module.taskIds.filter(function (tid) { return tid !== id; }) },
            taskCustomizations: {
                $apply: function (customizations) {
                    var copy = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, customizations);
                    delete copy[id];
                    return copy;
                }
            }
        });
    };
    CourseModuleComponent.prototype.onTaskReplaced = function (id, task) {
        var idxTask = this.props.module.taskIds.indexOf(id);
        if (idxTask < 0) {
            Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["showError"])(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Kunde inte spara uppgift. Felkod d72kQ"], ["Kunde inte spara uppgift. Felkod d72kQ"]))));
            return;
        }
        var moduleUpdates = {
            // Replace old id with new id:
            taskIds: { $splice: [[idxTask, 1, task.id]] },
            taskCustomizations: {
                $apply: function (customizations) {
                    var copy = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, customizations);
                    delete copy[id];
                    return copy;
                }
            }
        };
        var updatedModule = react_addons_update__WEBPACK_IMPORTED_MODULE_4___default()(this.props.module, moduleUpdates);
        var moduleIndex = this.getModuleIndex();
        this.props.host.update({
            // Apply moduleUpdates from above:
            modules: { $splice: [[moduleIndex, 1, updatedModule]] },
            // Add the new task to Course.tasks.
            // Don't remove the old one! Why? Because it may be referenced
            // by another module in same course! Let EditCourse._setState()
            // do the "garbage collection" instead.
            tasks: { $set: this.props.course.tasks.concat(task) }
        });
    };
    CourseModuleComponent.prototype.onTasksReordered = function (source, target, placement) {
        var newTaskIds = Object(_course_builder_ks_logic_task_order__WEBPACK_IMPORTED_MODULE_11__["computeUpdatedOrder"])(this.props.course.tasks, this.props.module.taskIds, source, target, placement, { appendLeftovers: false });
        this.updateModule({
            taskIds: { $set: newTaskIds }
        });
    };
    CourseModuleComponent.prototype.render = function () {
        var _this = this;
        var _a = this.props, course = _a.course, host = _a.host, module = _a.module, idsNotCoveredByAnyTask = _a.idsNotCoveredByAnyTask;
        var moduleIndex = this.getModuleIndex();
        var moduleOrderedIndex = this.getModuleOrderIndex();
        var knowledgeMatrixDiv;
        var updateModule = this.updateModule.bind(this);
        var week = 1;
        var startWeekOptions = ["--"];
        var endWeekOptions = ["--"];
        for (var i = 0; i < 51; ++i) {
            startWeekOptions.push('' + week);
            endWeekOptions.push('' + ++week);
        }
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_9__["OpenCloseBox"], { inactivated: !_features__WEBPACK_IMPORTED_MODULE_12__["features"].cbCollapseBoxes, title: react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { style: { float: "right" } },
                    moduleOrderedIndex > 0 && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("span", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-arrow-circle-up selectable", "aria-hidden": "true", onClick: function (e) { e.stopPropagation(); _this.props.onReorder(-1); } }),
                        " "),
                    moduleOrderedIndex < course.modules.length - 1 && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("span", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-arrow-circle-down selectable", "aria-hidden": "true", onClick: function (e) { e.stopPropagation(); _this.props.onReorder(1); } }),
                        " "),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_sub_components_remove_item__WEBPACK_IMPORTED_MODULE_5__["RemoveItem"], { title: "Ta bort modulen", style: { display: 'inline-block' }, onClick: function (e) { e.stopPropagation(); confirm(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ta bort modul ", "?"], ["Ta bort modul ", "?"])), module.name)) && host.update({ modules: { $splice: [[moduleIndex, 1]] } }); } })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, module.name)), headerOpen: module.name == 'Ny kursmodul' },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "course-module ked_boxed", style: { position: 'relative' } },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_content_editable_field__WEBPACK_IMPORTED_MODULE_10__["ContentEditableField"], { text: module.name, tag: 'h3', className: 'renameable-text', maxChars: 100, placeholder: "Namnl\u00F6s modul", onChange: function (newName) { return updateModule({ name: { $set: newName } }); } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal spaced" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem center" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, "Startvecka")),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem center" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("select", { value: module.startWeek || "--", onChange: function (ev) { return updateModule({ startWeek: {
                                    $set: ev.target.value === '--' ?
                                        undefined :
                                        parseInt(ev.target.value)
                                }
                            }); } }, startWeekOptions.map(function (o) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("option", { key: o, value: o }, o); }))),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem center" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, "Slutvecka")),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem center" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("select", { value: module.endWeek || "--", onChange: function (ev) { return updateModule({ endWeek: {
                                    $set: ev.target.value === '--' ?
                                        undefined :
                                        parseInt(ev.target.value)
                                }
                            }); } }, endWeekOptions.map(function (o) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("option", { key: o, value: o }, o); })))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h4", null, "Kursmodulens introduktion"),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_wysiwyg__WEBPACK_IMPORTED_MODULE_7__["Wysiwyg"], { actions: [
                        "bold",
                        "italic",
                        "underline",
                        "strikethrough",
                        "heading2",
                        "heading3",
                        "olist",
                        "ulist",
                        "outdent",
                        "indent",
                        "line",
                        "link",
                        "image"
                    ], defaultActions: _utility_components_wysiwyg_actions_sv__WEBPACK_IMPORTED_MODULE_8__["default"], html: module.mandatoryContent, onChange: function (html) {
                        updateModule({ mandatoryContent: { $set: html } });
                    } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h4", null, "Uppgifter"),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_sub_components_editable_task_list__WEBPACK_IMPORTED_MODULE_3__["EditableTaskList"], { taskIds: module.taskIds, taskCustomizations: module.taskCustomizations, course: course, module: module, host: host, idsNotCoveredByAnyTask: idsNotCoveredByAnyTask, onTaskAdded: function (task, taskCustomization) { return _this.onTaskAdded(task, taskCustomization); }, onTaskUpdated: function (task) { return _this.onTaskUpdated(task); }, onTaskCustomizationUpdated: function (taskId, customization) {
                        return _this.onTaskCustomized(taskId, customization);
                    }, onTaskDeleted: function (id) { return _this.onTaskDeleted(id); }, onTaskReplaced: function (id, task) { return _this.onTaskReplaced(id, task); }, onTasksReordered: function (source, target, placement) { return _this.onTasksReordered(source, target, placement); } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h4", null, "Modulresurser"),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { className: "subHeader" }, "(Eventuella resuser f\u00F6r redovisning av modulen samt f\u00F6r modulen som helhet)"),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_sub_components_editable_resource_list__WEBPACK_IMPORTED_MODULE_2__["EditableResourceList"], { resources: module.resources, onUpdate: function (resourcesUpdates) { return updateModule({ resources: resourcesUpdates }); }, host: host }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { style: { position: 'absolute', top: 0, right: 0 } },
                    moduleOrderedIndex > 0 && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("span", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-arrow-circle-up selectable", "aria-hidden": "true", onClick: function () { return _this.props.onReorder(-1); } }),
                        " "),
                    moduleOrderedIndex < course.modules.length - 1 && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("span", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-arrow-circle-down selectable", "aria-hidden": "true", onClick: function () { return _this.props.onReorder(1); } }),
                        " "),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_sub_components_remove_item__WEBPACK_IMPORTED_MODULE_5__["RemoveItem"], { title: "Ta bort modulen", style: { display: 'inline-block' }, onClick: function () { return confirm(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ta bort modul ", "?"], ["Ta bort modul ", "?"])), module.name)) && host.update({ modules: { $splice: [[moduleIndex, 1]] } }); } })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontal-align" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontaItem activateCourseModule" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn btn-info" + (module.inactive ? " btn-activate" : " btn-inactivate"), onClick: function () { return updateModule({ inactive: { $set: !module.inactive } }); } }, module.inactive ? 'Aktivera modulen' : 'Inaktivera modulen')))));
    };
    return CourseModuleComponent;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

var templateObject_1, templateObject_2, templateObject_3, templateObject_4;


/***/ }),

/***/ "./src/components/course-builder/courses/create-new.tsx":
/*!**************************************************************!*\
  !*** ./src/components/course-builder/courses/create-new.tsx ***!
  \**************************************************************/
/*! exports provided: CreateNewCourse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CreateNewCourse", function() { return CreateNewCourse; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _course_banner__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./course-banner */ "./src/components/course-builder/courses/course-banner.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/es/index.js");
/* harmony import */ var _sub_components_spinner__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../sub-components/spinner */ "./src/components/course-builder/sub-components/spinner.tsx");
/* harmony import */ var _sub_components_school_courses__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../sub-components/school-courses */ "./src/components/course-builder/sub-components/school-courses.tsx");








var CreateNewCourse = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](CreateNewCourse, _super);
    function CreateNewCourse(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            courseOptions: null,
            selectedTemplateId: "--",
            courses: null,
            selectedCourseId: ""
        };
        return _this;
    }
    CreateNewCourse.prototype.componentDidMount = function () {
        this.load().catch(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["showError"]);
    };
    CreateNewCourse.prototype.load = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var subjects, courses, courseOptions;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["showInfo"])("Laddar kurser");
                        return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__["default"].kedBackendClient.list("subjects", {
                                tags: ["schoolType:gymnasium"],
                                include: "courseTemplates"
                            })];
                    case 1:
                        subjects = _a.sent();
                        courses = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["flatten"])(subjects.map(function (s) { return s.courseTemplates; }))
                            .sort(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["compareProps"])(["name", "dateTime"]));
                        // If two courses have the same name, they will be secondary sorted by date imported.
                        // By running the distinct() call below, we will make sure that only the latest imported
                        // course with that name is loaded.
                        // This is the case for "Webbutveckling 1" - a course that used to occur on a subject with
                        // another name in 2018, but in 2019 occurs on a new subject, so it's by definition another
                        // course, but same name.
                        courses = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["distinct"])(courses, function (c) { return c.name; });
                        courseOptions = [{ id: "--", name: "--" }].concat(courses);
                        Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["showInfo"])("");
                        this.setState({ courseOptions: courseOptions });
                        return [2 /*return*/];
                }
            });
        });
    };
    CreateNewCourse.prototype.onSelectCourse = function (id) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var derivedCourses, courseOptions, kedStandardOptions, teacherMade, courses;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__["default"].kedBackendClient.list("courses", { hasEdgesTo: [id] })];
                    case 1:
                        derivedCourses = _a.sent();
                        courseOptions = derivedCourses
                            .filter(function (course) { return course.active; })
                            .map(function (_a) {
                            var id = _a.id, school = _a.school, description = _a.description, createdBy = _a.createdBy, modifiedBy = _a.modifiedBy;
                            if (description)
                                description = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["maxLength"])(description, 80);
                            var descriptionOrAuthor = description ||
                                (createdBy ? createdBy.name + "s version" :
                                    modifiedBy && modifiedBy.name + "s version");
                            return {
                                id: id,
                                name: school === 'standard' ?
                                    description ? "Standard - " + description : "Standard" :
                                    school + " - " + Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["maxLength"])(descriptionOrAuthor, 90),
                                school: school
                            };
                        }).sort(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["compareProp"])("name"));
                        kedStandardOptions = courseOptions.filter(function (option) { return option.school === "standard"; });
                        teacherMade = courseOptions.filter(function (option) { return option.school !== "standard"; });
                        courses = tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](kedStandardOptions, [
                            { id: id, name: "Tom" }
                        ], teacherMade);
                        this.setState({
                            courses: courses,
                            selectedTemplateId: id,
                            selectedCourseId: courses[0].id
                        });
                        return [2 /*return*/];
                }
            });
        });
    };
    CreateNewCourse.prototype.render = function () {
        var _this = this;
        var _a = this.state, courseOptions = _a.courseOptions, selectedTemplateId = _a.selectedTemplateId, courses = _a.courses, selectedCourseId = _a.selectedCourseId;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { style: { outline: 0 } },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_banner__WEBPACK_IMPORTED_MODULE_2__["CourseBanner"], { title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Kursbyggaren"], ["Kursbyggaren"]))), activePage: "courseBuilder", routes: { feedback: this.props.feedbackUrl } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-row sv-layout" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-layout sv-skip-spacer sv-column-12" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-spacer-20pxvt sv-vertical sv-layout sv-skip-spacer" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "pagecontent sv-layout sv-spacer-20pxvt sv-skip-spacer" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-row sv-layout sv-skip-spacer" },
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-layout sv-skip-spacer sv-column-7" },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet sv-skip-spacer" },
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null, "Skapa ny kurs"),
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal spaced" },
                                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, "V\u00E4lj gymnasiekurs :"))),
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal spaced" },
                                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" }, !courseOptions ?
                                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_sub_components_spinner__WEBPACK_IMPORTED_MODULE_6__["Spinner"], null),
                                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("select", { disabled: true, value: "" },
                                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("option", null, "--"))) :
                                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("select", { value: this.state.selectedTemplateId, onChange: function (ev) { return _this.onSelectCourse(ev.target.value).catch(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["showError"]); } }, courseOptions.map(function (course) {
                                                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("option", { key: course.id, value: course.id }, course.name);
                                                })))),
                                        courses && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal spaced" },
                                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, "Utg\u00E5 fr\u00E5n version: "))),
                                        courses && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal spaced" },
                                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("select", { value: selectedCourseId, onChange: function (ev) { return _this.setState({
                                                        selectedCourseId: ev.target.value
                                                    }); } }, courses.map(function (course) {
                                                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("option", { key: course.id, value: course.id }, course.name);
                                                })))),
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null),
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null),
                                        courses && selectedCourseId && react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_5__["Link"], { to: "/courses/create-from-template/" + this.state.selectedCourseId, className: "btn btn-large" }, "Skapa"))),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-layout sv-column-5" },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_sub_components_school_courses__WEBPACK_IMPORTED_MODULE_7__["SchoolCourses"], null))))))));
    };
    return CreateNewCourse;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

var templateObject_1;


/***/ }),

/***/ "./src/components/course-builder/courses/edit-course.tsx":
/*!***************************************************************!*\
  !*** ./src/components/course-builder/courses/edit-course.tsx ***!
  \***************************************************************/
/*! exports provided: EditCourse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditCourse", function() { return EditCourse; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-dom */ "react-dom");
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils */ "./src/components/course-builder/utils.ts");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _course_banner__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./course-banner */ "./src/components/course-builder/courses/course-banner.tsx");
/* harmony import */ var _inner_edit_course__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./inner-edit-course */ "./src/components/course-builder/courses/inner-edit-course.tsx");
/* harmony import */ var react_addons_update__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react-addons-update */ "./node_modules/react-addons-update/index.js");
/* harmony import */ var react_addons_update__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react_addons_update__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _sub_components_remove_item__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../sub-components/remove-item */ "./src/components/course-builder/sub-components/remove-item.tsx");
/* harmony import */ var _business_logic__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./business-logic */ "./src/components/course-builder/courses/business-logic.ts");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var _sub_components_spinner__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../sub-components/spinner */ "./src/components/course-builder/sub-components/spinner.tsx");
/* harmony import */ var _repos_school_courses__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../repos/school-courses */ "./src/repos/school-courses.ts");
/* harmony import */ var _access_control__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../access-control */ "./src/access-control/index.ts");
/* harmony import */ var _globals_current_user__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../globals/current-user */ "./src/globals/current-user.ts");
/* harmony import */ var _features_features__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../features/features */ "./src/features/features.ts");
/* harmony import */ var _apis_google_classroom_sync__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../apis/google-classroom-sync */ "./src/apis/google-classroom-sync.ts");




















var catcher = _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_12__["default"].ENVIRONMENT === 'production' ?
    _utils_utils__WEBPACK_IMPORTED_MODULE_3__["showError"] : null;
var CONFIRM_NAVIGATE_MESSAGE = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Du har osparat data. V\u00E4lj avbryt och tryck CTRL+S om du vill spara f\u00F6rst."], ["Du har osparat data. V\u00E4lj avbryt och tryck CTRL+S om du vill spara f\u00F6rst."])));
var DEFAULT_STATE = {
    origCourse: null,
    origTemplate: null,
    course: null,
    dialogContainers: [],
    hasUnsavedData: false,
    view: 'courseBuilder',
    classroomSyncInProgress: false
};
var EditCourse = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](EditCourse, _super);
    function EditCourse(props) {
        var _this = _super.call(this, props) || this;
        _this.state = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, DEFAULT_STATE);
        _this.update = _this.update.bind(_this);
        _this.refDialog = _this.refDialog.bind(_this);
        _this.contentYPos = 0;
        _this.onKeyDown = _this.onKeyDown.bind(_this);
        _this.beforeUnload = _this.beforeUnload.bind(_this);
        _this.onClickPreventUnload = _this.onClickPreventUnload.bind(_this);
        _this.isSaving = false;
        _this.dialogs = [];
        if (props.view)
            _this.state = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, _this.state, { view: props.view });
        return _this;
    }
    EditCourse.prototype.setStatePromised = function (state) {
        return this._setState(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({ hasUnsavedData: true }, state));
    };
    EditCourse.prototype.setNonSaveableDataState = function (state) {
        return this._setState(state);
    };
    EditCourse.prototype._setState = function (state) {
        var _this = this;
        if (state.course) {
            {
                //
                // Maintain course task links (remove links to tasks that are not used
                // by any module)
                //
                var _a = state.course, tasks = _a.tasks, modules = _a.modules;
                var usedTaskIds_1 = {};
                modules.forEach(function (module) { return module.taskIds.forEach(function (id) { return usedTaskIds_1[id] = true; }); });
                var filteredCourseTasks = tasks.filter(function (t) { return usedTaskIds_1[t.id]; });
                var modifiedCourse = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, state.course);
                modifiedCourse.tasks = filteredCourseTasks;
                state = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, state, { course: modifiedCourse });
            }
        }
        // Invoke our course into state property allCourses so that the
        // right-hand side list of courses gets update immediately with
        // the publishable state of this course.
        var allCourses = state.allCourses || this.state.allCourses;
        var course = state.course || this.state.course;
        if (allCourses) {
            var idxOurCourse = allCourses.findIndex(function (c) { return c.id === _this.props.id; });
            allCourses = react_addons_update__WEBPACK_IMPORTED_MODULE_9___default()(allCourses, { $splice: [[idxOurCourse, 1, course]] });
            state = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, state);
            state.allCourses = allCourses;
        }
        return new Promise(function (resolve) { return _super.prototype.setState.call(_this, function () { return state; }, resolve); });
    };
    EditCourse.prototype.componentWillMount = function () {
        this.load().catch(catcher);
        window.addEventListener('keydown', this.onKeyDown);
        window.addEventListener('beforeunload', this.beforeUnload);
        document.body.addEventListener('click', this.onClickPreventUnload);
    };
    EditCourse.prototype.componentWillUnmount = function () {
        window.removeEventListener('keydown', this.onKeyDown);
        window.removeEventListener('beforeunload', this.beforeUnload);
        document.body.removeEventListener('click', this.onClickPreventUnload);
        Object(_utils__WEBPACK_IMPORTED_MODULE_4__["updateCourseBuilderStatus"])('');
    };
    EditCourse.prototype.componentWillReceiveProps = function (nextProps) {
        if (this.state && this.state.course) {
            if (nextProps.id !== this.props.id || nextProps.templateId !== this.props.templateId) {
                this.setStatePromised(DEFAULT_STATE);
            }
        }
        if (nextProps.view !== this.props.view) {
            this.setNonSaveableDataState({ view: nextProps.view });
        }
    };
    EditCourse.prototype.componentDidUpdate = function (prevProps, prevState) {
        if (this.contentDiv) {
            var contentDiv = Object(react_dom__WEBPACK_IMPORTED_MODULE_2__["findDOMNode"])(this.contentDiv);
            if (contentDiv) {
                this.contentYPos = contentDiv.getBoundingClientRect().top;
            }
        }
        if (prevState && prevState.course) {
            // This was not the initial update.
            // If props have been updated to point out another course or template, reset component:
            if (this.props.id !== prevProps.id || this.props.templateId !== prevProps.templateId) {
                this.load().catch(catcher);
            }
        }
        if (!prevState.hasUnsavedData && this.state.hasUnsavedData) {
            Object(_utils__WEBPACK_IMPORTED_MODULE_4__["updateCourseBuilderStatus"])('unsaved');
        }
    };
    EditCourse.prototype.loadFromTemplate = function (templateId) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var template, course, mySchool;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["showInfo"])("Laddar data frn mall...");
                        return [4 /*yield*/, Object(_utils__WEBPACK_IMPORTED_MODULE_4__["loadCourse"])(templateId, { includeTemplateChain: true })];
                    case 1:
                        template = _a.sent();
                        course = Object(_utils__WEBPACK_IMPORTED_MODULE_4__["updateCreationStamp"])(Date.now(), template, _globals_KED_env__WEBPACK_IMPORTED_MODULE_6__["default"].currentUser);
                        course.id = Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["createUUID"])();
                        course.parentId = templateId;
                        course.active = false;
                        course.isTemplate = false;
                        course.templateChain = tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](course.templateChain);
                        course.templateChain.push({ id: templateId, $meta: 'ref' });
                        mySchool = _globals_KED_env__WEBPACK_IMPORTED_MODULE_6__["default"].currentUser.school;
                        course.school = mySchool;
                        course.description = "";
                        course.responsibleTeachers = [{ name: _globals_KED_env__WEBPACK_IMPORTED_MODULE_6__["default"].currentUser.displayName, email: _globals_KED_env__WEBPACK_IMPORTED_MODULE_6__["default"].currentUser.mail, access: 'full', url: _globals_KED_env__WEBPACK_IMPORTED_MODULE_6__["default"].currentUser.mail }];
                        delete course.studyGroups;
                        course.acl = [
                            "role:USER:R",
                            "schoolRole:" + mySchool + "/EMPLOYEE:S" // Other teachers at same school should be able to modify the course.
                        ];
                        delete course.$etag;
                        delete course.createdBy;
                        delete course.createdDate;
                        delete course.modifiedBy;
                        delete course.modifiedDate;
                        delete course.activatedBy;
                        delete course.activatedDate;
                        delete course.googleClassRoomCode;
                        delete course.googleClassRoomURL;
                        delete course.googleCreateClassrooms;
                        return [4 /*yield*/, this.setStatePromised({ course: course, origCourse: null, origTemplate: template })];
                    case 2:
                        _a.sent();
                        Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["showInfo"])("");
                        return [2 /*return*/];
                }
            });
        });
    };
    EditCourse.prototype.load = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        Object(_utils__WEBPACK_IMPORTED_MODULE_4__["updateCourseBuilderStatus"])('');
                        if (!this.props.id) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.loadExistingCourse(this.props.id)];
                    case 1:
                        _a.sent();
                        return [3 /*break*/, 5];
                    case 2:
                        if (!this.props.templateId) return [3 /*break*/, 4];
                        return [4 /*yield*/, this.loadFromTemplate(this.props.templateId)];
                    case 3:
                        _a.sent();
                        return [3 /*break*/, 5];
                    case 4: throw new Error(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ogiltig parameter. id eller templateId m\u00E5ste anges"], ["Ogiltig parameter. id eller templateId m\u00E5ste anges"]))));
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    EditCourse.prototype.loadExistingCourse = function (courseId) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var course;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["showInfo"])("Laddar kurs");
                        return [4 /*yield*/, Object(_utils__WEBPACK_IMPORTED_MODULE_4__["loadCourse"])(courseId)];
                    case 1:
                        course = _a.sent();
                        if (!course.responsibleTeachers)
                            course.responsibleTeachers = [{ name: _globals_KED_env__WEBPACK_IMPORTED_MODULE_6__["default"].currentUser.displayName, email: _globals_KED_env__WEBPACK_IMPORTED_MODULE_6__["default"].currentUser.mail, access: 'full', url: _globals_KED_env__WEBPACK_IMPORTED_MODULE_6__["default"].currentUser.mail }];
                        return [4 /*yield*/, this.setNonSaveableDataState({ course: course, origCourse: course })];
                    case 2:
                        _a.sent();
                        Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["showInfo"])("");
                        return [2 /*return*/];
                }
            });
        });
    };
    EditCourse.prototype.update = function (courseUpdates) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.setStatePromised({ course: react_addons_update__WEBPACK_IMPORTED_MODULE_9___default()(this.state.course, courseUpdates) })];
                    case 1:
                        _a.sent();
                        //check classroom changes
                        if (_features_features__WEBPACK_IMPORTED_MODULE_17__["features"].studyGroups) {
                            this._checkClassroomChanges();
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    EditCourse.prototype.deleteCourse = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var courseSchool, parentId, courseId, classroomSync, children, br, children_1, children_1_1, childCourse;
            var e_1, _a;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["showInfo"])("Raderar kursen...");
                        courseSchool = this.state.course.school;
                        parentId = this.state.course.parentId;
                        courseId = this.props.id;
                        classroomSync = new _apis_google_classroom_sync__WEBPACK_IMPORTED_MODULE_18__["ClassroomSync"]();
                        classroomSync.delete({ responsibleTeachers: this.state.course.responsibleTeachers, id: courseId });
                        return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_6__["default"].kedBackendClient.list("courses", {
                                hasEdgesTo: [this.props.id]
                            })];
                    case 1:
                        children = _b.sent();
                        br = new kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["BatchRunner"]();
                        try {
                            for (children_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](children), children_1_1 = children_1.next(); !children_1_1.done; children_1_1 = children_1.next()) {
                                childCourse = children_1_1.value;
                                /* CANNOT DO THIS. MAY NOT HAVE ACCESS! if (childCourse.parentId === courseId) {
                                  // Reconnect child with my parent instead, as I will be disappearing...
                                  childCourse.parentId = parentId;
                                  br.put("courses", childCourse);
                                }*/
                            }
                        }
                        catch (e_1_1) { e_1 = { error: e_1_1 }; }
                        finally {
                            try {
                                if (children_1_1 && !children_1_1.done && (_a = children_1.return)) _a.call(children_1);
                            }
                            finally { if (e_1) throw e_1.error; }
                        }
                        br.delete("courses", courseId);
                        return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_6__["default"].kedBackendClient.batch(br.mutationRequests)];
                    case 2:
                        _b.sent();
                        if (courseSchool === _globals_KED_env__WEBPACK_IMPORTED_MODULE_6__["default"].currentUser.school) {
                            _repos_school_courses__WEBPACK_IMPORTED_MODULE_14__["mySchoolCoursesRepo"].delete(courseId);
                        }
                        Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["showInfo"])("");
                        location.hash = "#/courses/new";
                        return [2 /*return*/];
                }
            });
        });
    };
    /**
     * In case that the course has changes which should be synced with classroom
     * Ask the user if the sync should be done
     */
    EditCourse.prototype.confirmSaveAndSync = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var course, syncWithClassroom;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        course = this.state.course;
                        syncWithClassroom = false;
                        //confirm should not be displayed in case the checkbox was saved and the feature flag is off
                        if (course.googleCreateClassrooms && !course.inSyncWithClassroom && _features_features__WEBPACK_IMPORTED_MODULE_17__["features"].studyGroups) {
                            syncWithClassroom = confirm(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Synkurs kurs med klassrum?"], ["Synkurs kurs med klassrum?"]))));
                        }
                        return [4 /*yield*/, syncWithClassroom];
                    case 1:
                        (_a.sent()) ? this.syncWithClassroomAndSave() : this.save();
                        return [2 /*return*/];
                }
            });
        });
    };
    EditCourse.prototype.save = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, course, origCourse, classroomSync, result, catcher_1, enableTeacherRights, origAccessList, modifiedAccessList, currentUser, err_1, errorMessage;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = this.state, course = _a.course, origCourse = _a.origCourse;
                        if (!(_features_features__WEBPACK_IMPORTED_MODULE_17__["features"].studyGroups && origCourse && origCourse.googleCreateClassrooms && !course.googleCreateClassrooms)) return [3 /*break*/, 4];
                        _b.label = 1;
                    case 1:
                        _b.trys.push([1, 3, , 4]);
                        classroomSync = new _apis_google_classroom_sync__WEBPACK_IMPORTED_MODULE_18__["ClassroomSync"]();
                        return [4 /*yield*/, classroomSync.archive(course)];
                    case 2:
                        result = _b.sent();
                        if (!result.done) {
                            Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["showError"])(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Classroom course could not be archived"], ["Classroom course could not be archived"]))));
                        }
                        return [3 /*break*/, 4];
                    case 3:
                        catcher_1 = _b.sent();
                        return [3 /*break*/, 4];
                    case 4:
                        enableTeacherRights = _features_features__WEBPACK_IMPORTED_MODULE_17__["features"].teacherRights;
                        origAccessList = this.state.origCourse ? Object(_business_logic__WEBPACK_IMPORTED_MODULE_11__["getSoftAccessList"])(this.state.origCourse) : [];
                        modifiedAccessList = Object(_business_logic__WEBPACK_IMPORTED_MODULE_11__["getSoftAccessList"])(this.state.course);
                        currentUser = Object(_globals_current_user__WEBPACK_IMPORTED_MODULE_16__["getCurrentUser"])();
                        if (enableTeacherRights &&
                            (!currentUser.roles.includes("ADMIN") &&
                                !tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](origAccessList, modifiedAccessList).some(function (_a) {
                                    var email = _a.email, url = _a.url, access = _a.access;
                                    return (email || url) === currentUser.mail && // url is for backward compat! Has been renamed to email.
                                        (!access || // Backward compat. Was not possible to set access before!
                                            access === 'edit' || // Edit is fine
                                            access === 'full');
                                }))) {
                            Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["showError"])(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Kursen kunde inte sparas. L\u00E4gg till dig sj\u00E4lv i listan p\u00E5 ansvariga l\u00E4rare"], ["Kursen kunde inte sparas. L\u00E4gg till dig sj\u00E4lv i listan p\u00E5 ansvariga l\u00E4rare"]))));
                            return [2 /*return*/];
                        }
                        if (this.isSaving)
                            return [2 /*return*/];
                        _b.label = 5;
                    case 5:
                        _b.trys.push([5, 7, 8, 9]);
                        this.isSaving = true;
                        return [4 /*yield*/, this._save()];
                    case 6:
                        _b.sent();
                        return [3 /*break*/, 9];
                    case 7:
                        err_1 = _b.sent();
                        errorMessage = err_1 && err_1.message ? err_1.message : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_6 || (templateObject_6 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ett ok\u00E4nt fel har intr\u00E4ffat..."], ["Ett ok\u00E4nt fel har intr\u00E4ffat..."])));
                        if (err_1) {
                            if (err_1.name === 'http409' || err_1.name === 'http412' || err_1.name === 'http404') {
                                // Conflict. Show a nicer error message:
                                errorMessage = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_7 || (templateObject_7 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Kursen har redigerad av annan anv\u00E4ndare. Ladda om sidan och g\u00F6r om \u00E4ndrinarna."], ["Kursen har redigerad av annan anv\u00E4ndare. Ladda om sidan och g\u00F6r om \u00E4ndrinarna."])));
                            }
                            else if (err_1.name === 'http403') {
                                if (this.state.course.isTemplate)
                                    errorMessage = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_8 || (templateObject_8 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ingen beh\u00F6righet att spara kursmallen. Endast administrat\u00F6rer kan redigera kursmallar."], ["Ingen beh\u00F6righet att spara kursmallen. Endast administrat\u00F6rer kan redigera kursmallar."])));
                                else if (this.state.course.school)
                                    errorMessage = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_9 || (templateObject_9 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ingen beh\u00F6righet att spara kursen ", ". Kursen kan bara redigeras av anst\u00E4llda p\u00E5 ", ""], ["Ingen beh\u00F6righet att spara kursen ", ". Kursen kan bara redigeras av anst\u00E4llda p\u00E5 ", ""])), this.state.course.name, this.state.course.school);
                            }
                        }
                        Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["showError"])(errorMessage);
                        Object(_utils__WEBPACK_IMPORTED_MODULE_4__["updateCourseBuilderStatus"])('error');
                        return [3 /*break*/, 9];
                    case 8:
                        this.isSaving = false;
                        return [7 /*endfinally*/];
                    case 9: return [2 /*return*/];
                }
            });
        });
    };
    EditCourse.prototype.syncInProgress = function () {
        return this.state.classroomSyncInProgress;
    };
    EditCourse.prototype.syncWithClassroomAndSave = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, course, origCourse, classroomSync, fullSyncNeeded, syncResult, err_2;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = this.state, course = _a.course, origCourse = _a.origCourse;
                        console.log(course);
                        console.log(origCourse);
                        return [4 /*yield*/, this.save()];
                    case 1:
                        _b.sent();
                        // if there is still unsaved data it means that an error encountered during save. 
                        // sync with google classroom will be canceled
                        if (this.state.hasUnsavedData) {
                            Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["showError"])(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_10 || (templateObject_10 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Synkronisering med klassrummet skulle inte ske"], ["Synkronisering med klassrummet skulle inte ske"]))));
                            return [2 /*return*/];
                        }
                        _b.label = 2;
                    case 2:
                        _b.trys.push([2, 7, , 8]);
                        this.setState({ classroomSyncInProgress: true });
                        classroomSync = new _apis_google_classroom_sync__WEBPACK_IMPORTED_MODULE_18__["ClassroomSync"]();
                        if (!course.googleCreateClassrooms) return [3 /*break*/, 6];
                        fullSyncNeeded = course.inSyncWithClassroom == null;
                        return [4 /*yield*/, classroomSync.initSync(course, origCourse, fullSyncNeeded)];
                    case 3:
                        syncResult = _b.sent();
                        if (!syncResult.done) return [3 /*break*/, 5];
                        this.update({ inSyncWithClassroom: { $set: true } });
                        this.setState({ classroomSyncInProgress: false });
                        //update inSyncWithClassroom flag
                        return [4 /*yield*/, this._save(true)];
                    case 4:
                        //update inSyncWithClassroom flag
                        _b.sent();
                        Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["showInfo"])(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_11 || (templateObject_11 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Synkronisering med framg\u00E5ng"], ["Synkronisering med framg\u00E5ng"]))));
                        return [3 /*break*/, 6];
                    case 5:
                        Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["showError"])(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_12 || (templateObject_12 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Fel synkroniserat klassrum"], ["Fel synkroniserat klassrum"]))));
                        this.setState({ classroomSyncInProgress: false });
                        _b.label = 6;
                    case 6: return [3 /*break*/, 8];
                    case 7:
                        err_2 = _b.sent();
                        catcher;
                        return [3 /*break*/, 8];
                    case 8: return [2 /*return*/];
                }
            });
        });
    };
    EditCourse.prototype._save = function (silentSave) {
        if (silentSave === void 0) { silentSave = false; }
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, course, origCourse, origTemplate, doesAllTasksCoverAllRequirements, modifiedCourse, batch, orig, newCourseTasks, tags, schoolId, schoolId, schoolId, res;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = this.state, course = _a.course, origCourse = _a.origCourse, origTemplate = _a.origTemplate;
                        doesAllTasksCoverAllRequirements = Object(_business_logic__WEBPACK_IMPORTED_MODULE_11__["getUncoveredKnowledgeRequirements"])(course).length === 0;
                        !silentSave && Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["showInfo"])(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_13 || (templateObject_13 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Sparar..."], ["Sparar..."]))));
                        modifiedCourse = Object(_utils__WEBPACK_IMPORTED_MODULE_4__["updateModificationStamp"])(Date.now(), course, _globals_KED_env__WEBPACK_IMPORTED_MODULE_6__["default"].currentUser);
                        batch = new kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["BatchRunner"]();
                        orig = origCourse || origTemplate;
                        newCourseTasks = modifiedCourse.tasks.map(function (task) {
                            if (task.$meta === 'add' || task.$meta === 'update') {
                                var origTask = orig.tasks.find(function (t) { return t.id === task.id; });
                                return Object(_utils__WEBPACK_IMPORTED_MODULE_4__["updateDocumentGraphs"])(origTask || {}, task, "tasks", {
                                    knowledgeRequirements: 'knowledge-requirements',
                                    centralContent: 'central-content',
                                    abilities: 'abilities'
                                }, batch);
                            }
                            else {
                                var updatedTask = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, task);
                                delete updatedTask.$meta;
                                return updatedTask;
                            }
                        });
                        modifiedCourse = react_addons_update__WEBPACK_IMPORTED_MODULE_9___default()(modifiedCourse, { tasks: { $set: newCourseTasks } });
                        modifiedCourse = Object(_utils__WEBPACK_IMPORTED_MODULE_4__["updateDocumentGraphs"])(origCourse || {}, modifiedCourse, 'courses', {
                            templateChain: 'courses',
                            centralContent: 'central-content',
                            knowledgeRequirements: 'knowledge-requirements',
                            abilities: 'abilities',
                            images: 'images',
                            tasks: 'tasks'
                        }, batch);
                        modifiedCourse = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, modifiedCourse);
                        modifiedCourse.publishable = doesAllTasksCoverAllRequirements;
                        tags = (modifiedCourse.tags || []).filter(function (tag) { return tag !== 'incomplete'; });
                        modifiedCourse.tags = modifiedCourse.publishable ?
                            tags : tags.concat("incomplete");
                        if (!!origCourse) return [3 /*break*/, 3];
                        // A new course should be added:
                        batch.add('courses', modifiedCourse);
                        if (!course.school) return [3 /*break*/, 2];
                        return [4 /*yield*/, _repos_school_courses__WEBPACK_IMPORTED_MODULE_14__["mySchoolCoursesRepo"].getSchoolId()];
                    case 1:
                        schoolId = _b.sent();
                        batch.link("schools", schoolId, "courses", course.id, "courses");
                        if (course.active) {
                            batch.link("schools", schoolId, "courses", course.id, "activeCourses");
                        }
                        _b.label = 2;
                    case 2: return [3 /*break*/, 7];
                    case 3:
                        // An existing course should be updated:
                        batch.put('courses', modifiedCourse);
                        if (!(!origCourse.active && course.active)) return [3 /*break*/, 5];
                        return [4 /*yield*/, _repos_school_courses__WEBPACK_IMPORTED_MODULE_14__["mySchoolCoursesRepo"].getSchoolId()];
                    case 4:
                        schoolId = _b.sent();
                        batch.link("schools", schoolId, "courses", course.id, "activeCourses");
                        return [3 /*break*/, 7];
                    case 5:
                        if (!(origCourse.active && !course.active)) return [3 /*break*/, 7];
                        return [4 /*yield*/, _repos_school_courses__WEBPACK_IMPORTED_MODULE_14__["mySchoolCoursesRepo"].getSchoolId()];
                    case 6:
                        schoolId = _b.sent();
                        batch.unlink("schools", schoolId, "courses", course.id, "activeCourses");
                        _b.label = 7;
                    case 7: return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_6__["default"].kedBackendClient.batch(batch.mutationRequests)];
                    case 8:
                        res = _b.sent();
                        !silentSave && Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["showInfo"])(origCourse ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_14 || (templateObject_14 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndringarna har sparats"], ["\u00C4ndringarna har sparats"]))) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_15 || (templateObject_15 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Kursen har skapats"], ["Kursen har skapats"]))));
                        // Update state to reflect what has been posted:
                        if (res && res.newEtags)
                            modifiedCourse = Object(_utils__WEBPACK_IMPORTED_MODULE_4__["applyEtags"])(modifiedCourse, res.newEtags, ["images", "tasks"]);
                        if (course.school === _globals_KED_env__WEBPACK_IMPORTED_MODULE_6__["default"].currentUser.school) {
                            // Update mySchoolCoursesRepo
                            if (!origCourse) {
                                _repos_school_courses__WEBPACK_IMPORTED_MODULE_14__["mySchoolCoursesRepo"].insert(modifiedCourse);
                            }
                            else {
                                _repos_school_courses__WEBPACK_IMPORTED_MODULE_14__["mySchoolCoursesRepo"].update(modifiedCourse);
                            }
                        }
                        return [4 /*yield*/, this.setNonSaveableDataState({ course: modifiedCourse, origCourse: modifiedCourse, hasUnsavedData: false })];
                    case 9:
                        _b.sent();
                        Object(_utils__WEBPACK_IMPORTED_MODULE_4__["updateCourseBuilderStatus"])('');
                        if (!origCourse) {
                            // This was the creation of a new course. Correct the route now when the user enters an edit state:
                            location.hash = "#/courses/" + modifiedCourse.id + "/edit";
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    EditCourse.prototype._checkClassroomChanges = function () {
        var _a = this.state, course = _a.course, origCourse = _a.origCourse;
        var arr1set = course.tasks.filter(function (x) { return x.assignment; });
        if (!origCourse) {
            course.inSyncWithClassroom = false;
            this.setStatePromised({ course: course });
            return;
        }
        //if (course.inSyncWithClassroom) {
        var arr2set = origCourse.tasks.filter(function (x) { return x.assignment; });
        //check tasks added or removed
        var hasTeacherChanges = Object(_utils__WEBPACK_IMPORTED_MODULE_4__["hasChanges"])(origCourse.responsibleTeachers, course.responsibleTeachers);
        //
        var hasTasksChanges = arr1set.filter(function (x) { return !arr2set.find(function (y) { return y.id == x.id; }); }).length > 0 || arr2set.filter(function (x) { return !arr1set.find(function (y) { return y.id == x.id; }); }).length > 0;
        //check if any task renamed or changed its type
        if (!hasTasksChanges) {
            hasTasksChanges = arr1set.some(function (e1) { return arr2set.find(function (e2) {
                return e2.id === e1.id && e2.name !== e1.name;
            }) != null; });
        }
        var hasStudyGroupsChanges = Object(_utils__WEBPACK_IMPORTED_MODULE_4__["hasChanges"])(origCourse.studyGroups, course.studyGroups);
        //checks are made with the previous object in case that the user will revert the changes
        var prevStatus = course.inSyncWithClassroom;
        course.inSyncWithClassroom = !(hasTeacherChanges || hasTasksChanges || hasStudyGroupsChanges);
        if (prevStatus != course.inSyncWithClassroom) {
            this.setStatePromised({ course: course });
        }
    };
    EditCourse.prototype.activateAndSave = function () {
        var _this = this;
        var course = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.state.course);
        if (!course.active) {
            /*const uncoveredRequirements = getUncoveredKnowledgeRequirements(course);
            if (uncoveredRequirements.length > 0)
              return showError (L`Det finns kunskapskrav som inte uppfylls av ngon modul. Kan inte aktivera kursen frrn alla kunskapskrav finns med.`);
            */
            course.active = true;
            course.activatedBy = {
                name: _globals_KED_env__WEBPACK_IMPORTED_MODULE_6__["default"].currentUser.displayName,
                url: "mailto:" + _globals_KED_env__WEBPACK_IMPORTED_MODULE_6__["default"].currentUser.mail
            };
            course.activatedDate = Date.now();
            this.setStatePromised({ course: course })
                .then(function () { return _this.save(); })
                .catch(catcher);
        }
    };
    EditCourse.prototype.inactivateAndSave = function () {
        var _this = this;
        var course = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.state.course);
        if (course.active) {
            course.active = false;
            course.inactivatedBy = {
                name: _globals_KED_env__WEBPACK_IMPORTED_MODULE_6__["default"].currentUser.displayName,
                url: "mailto:" + _globals_KED_env__WEBPACK_IMPORTED_MODULE_6__["default"].currentUser.mail
            };
            course.inactivatedDate = Date.now();
            this.setStatePromised({ course: course })
                .then(function () { return _this.save(); })
                .catch(catcher);
        }
    };
    EditCourse.prototype.openDialog = function (dialogContainer) {
        this.setNonSaveableDataState({ dialogContainers: this.state.dialogContainers.concat(dialogContainer) });
    };
    EditCourse.prototype.closeDialog = function () {
        var dialogContainers = this.state.dialogContainers;
        var length = dialogContainers.length;
        length && this.setNonSaveableDataState({ dialogContainers: dialogContainers.slice(0, length - 1) });
        // Now sync the direct 'dialogs' property with the new state:
        while (this.dialogs.length >= length)
            this.dialogs.pop();
    };
    EditCourse.prototype.refDialog = function (dialog, index) {
        this.dialogs[index] = dialog; // Setting per index instead of push(). Works even if the ref attribute could be invoked multiple times.
    };
    EditCourse.prototype.onKeyDown = function (ev) {
        if (ev.which === 83 && (ev.ctrlKey || ev.metaKey)) { // CTRL-S
            ev.preventDefault();
            if (this.state.dialogContainers.length > 0) {
                this.saveDialog();
                return;
            }
            this.save();
        }
        else if (ev.which === 27 && this.state.dialogContainers.length > 0) {
            this.closeDialog();
            ev.preventDefault();
        }
        else if (ev.which === 13) {
            var targetElem = ev.target;
            if (this.state.dialogContainers.length > 0 &&
                targetElem.tagName !== 'TEXTAREA' &&
                targetElem.tagName !== 'INPUT' &&
                targetElem.tagName !== 'SELECT' &&
                targetElem.tagName !== 'OPTION' &&
                !targetElem.contentEditable) {
                this.saveDialog();
            }
        }
    };
    EditCourse.prototype.beforeUnload = function (ev) {
        if (this.state.dialogContainers.length > 0 || this.state.hasUnsavedData) {
            if (!_globals_KED_env__WEBPACK_IMPORTED_MODULE_6__["default"].kedBackendClient.http.bearerProvider.wantsRedirect) {
                ev.returnValue = CONFIRM_NAVIGATE_MESSAGE;
                return ev.returnValue;
            }
        }
    };
    EditCourse.prototype.onClickPreventUnload = function (ev) {
        if (ev.target && ('' + ev.target.tagName).toLowerCase() === 'a') {
            var a = ev.target;
            if (a.href && a.getAttribute('href') !== '#' && !a.target) {
                if (this.state.dialogContainers.length > 0 || this.state.hasUnsavedData) {
                    if (!confirm(CONFIRM_NAVIGATE_MESSAGE)) {
                        ev.preventDefault();
                        ev.stopPropagation();
                        return false;
                    }
                }
            }
        }
    };
    EditCourse.prototype.saveDialog = function () {
        if (this.state.dialogContainers.length > 0) {
            var dialog = this.dialogs[this.state.dialogContainers.length - 1]; // YES, should reference this.dialogs by length of dialogContainers. Strange yes, but leave it so!
            dialog && dialog.save();
        }
    };
    EditCourse.prototype.render = function () {
        var _this = this;
        var isAdmin = _globals_KED_env__WEBPACK_IMPORTED_MODULE_6__["default"].currentUser.roles.indexOf("ADMIN") >= 0;
        var course = this.state.course;
        return !this.state.course ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { style: { outline: 0 } },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_banner__WEBPACK_IMPORTED_MODULE_7__["CourseBanner"], { title: "", activePage: this.state.view, routes: { feedback: this.props.feedbackUrl } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_sub_components_spinner__WEBPACK_IMPORTED_MODULE_13__["Spinner"], null),
                "V.g. v\u00E4nta medan kursen laddas...")) :
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { style: { outline: 0 } },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_banner__WEBPACK_IMPORTED_MODULE_7__["CourseBanner"], { title: course.name + " - " + course.points + "p", activePage: this.state.view, routes: {
                        studentPage: Object(_access_control__WEBPACK_IMPORTED_MODULE_15__["preserveImpersonationQuery"])(this.props.viewCourseUrl, { courseId: this.props.id }),
                        feedback: this.props.feedbackUrl
                    }, host: this, course: course, origCourse: this.state.origCourse, backgroundImage: course.images.filter(function (img) { return img.id === course.imageId; }).map(function (img) { return img.url; })[0], isTemplate: course.isTemplate }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-row sv-layout" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-layout sv-skip-spacer sv-column-12" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-spacer-20pxvt sv-vertical sv-layout sv-skip-spacer" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "pagecontent sv-layout sv-spacer-20pxvt sv-skip-spacer", ref: function (div) { return _this.contentDiv = div; } },
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_inner_edit_course__WEBPACK_IMPORTED_MODULE_8__["InnerEditCourse"], { course: this.state.course, origCourse: this.state.origCourse, host: this }),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null),
                                this.state.dialogContainers.map(function (_a, i) {
                                    var Component = _a.Component, props = _a.props;
                                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: i },
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "darken" }),
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "modal-page-wrap" },
                                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "modal-page" },
                                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](Component, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({ ref: function (dialog) { return _this.refDialog(dialog, i); } }, props)),
                                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_sub_components_remove_item__WEBPACK_IMPORTED_MODULE_10__["RemoveItem"], { onClick: function () { return _this.closeDialog(); } }))));
                                }))))));
    };
    return EditCourse;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8, templateObject_9, templateObject_10, templateObject_11, templateObject_12, templateObject_13, templateObject_14, templateObject_15;


/***/ }),

/***/ "./src/components/course-builder/courses/index.tsx":
/*!*********************************************************!*\
  !*** ./src/components/course-builder/courses/index.tsx ***!
  \*********************************************************/
/*! exports provided: EditCourse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _edit_course__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./edit-course */ "./src/components/course-builder/courses/edit-course.tsx");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "EditCourse", function() { return _edit_course__WEBPACK_IMPORTED_MODULE_0__["EditCourse"]; });




/***/ }),

/***/ "./src/components/course-builder/courses/inner-edit-course.tsx":
/*!*********************************************************************!*\
  !*** ./src/components/course-builder/courses/inner-edit-course.tsx ***!
  \*********************************************************************/
/*! exports provided: InnerEditCourse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InnerEditCourse", function() { return InnerEditCourse; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _sub_components_editable_resource_list__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../sub-components/editable-resource-list */ "./src/components/course-builder/sub-components/editable-resource-list.tsx");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils */ "./src/components/course-builder/utils.ts");
/* harmony import */ var _course_module_list__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./course-module-list */ "./src/components/course-builder/courses/course-module-list.tsx");
/* harmony import */ var _sub_components_school_courses__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../sub-components/school-courses */ "./src/components/course-builder/sub-components/school-courses.tsx");
/* harmony import */ var _business_logic__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./business-logic */ "./src/components/course-builder/courses/business-logic.ts");
/* harmony import */ var _course_banner__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./course-banner */ "./src/components/course-builder/courses/course-banner.tsx");
/* harmony import */ var _sub_components_spinner__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../sub-components/spinner */ "./src/components/course-builder/sub-components/spinner.tsx");
/* harmony import */ var _sub_components_editable_teacher_list__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../sub-components/editable-teacher-list */ "./src/components/course-builder/sub-components/editable-teacher-list.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _sub_components_weighted_items_table__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../sub-components/weighted-items-table */ "./src/components/course-builder/sub-components/weighted-items-table.tsx");
/* harmony import */ var _utility_components_wysiwyg_index__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../utility-components/wysiwyg/index */ "./src/components/utility-components/wysiwyg/index.tsx");
/* harmony import */ var _utility_components_wysiwyg_actions_sv__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../utility-components/wysiwyg/actions-sv */ "./src/components/utility-components/wysiwyg/actions-sv.ts");
/* harmony import */ var _sub_components_editable_workflow_link__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../sub-components/editable-workflow-link */ "./src/components/course-builder/sub-components/editable-workflow-link.tsx");
/* harmony import */ var _globals_current_user__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../globals/current-user */ "./src/globals/current-user.ts");
/* harmony import */ var _utility_components_observe__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../utility-components/observe */ "./src/components/utility-components/observe.tsx");
/* harmony import */ var _sub_components_select_study_groups__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../sub-components/select-study-groups */ "./src/components/course-builder/sub-components/select-study-groups.tsx");
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");
/* harmony import */ var _features__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../features */ "./src/features/index.ts");




















;
var InnerEditCourse = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](InnerEditCourse, _super);
    function InnerEditCourse(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            changeImageUrl: false
        };
        return _this;
    }
    InnerEditCourse.prototype.setImageUrl = function (imageUrl) {
        var course = this.props.course;
        if (!course.imageId) {
        }
    };
    InnerEditCourse.prototype.render = function () {
        var _a = this.props, course = _a.course, origCourse = _a.origCourse, host = _a.host;
        var uncoveredKnowledgeRequirements = Object(_business_logic__WEBPACK_IMPORTED_MODULE_6__["getUncoveredKnowledgeRequirements"])(course);
        var idsNotCoveredByAnyTask = Object(_business_logic__WEBPACK_IMPORTED_MODULE_6__["getIdsNotCoveredByTasks"])(course);
        var sanityCheckWarnings = Object(_business_logic__WEBPACK_IMPORTED_MODULE_6__["sanityCheck"])(course);
        var courseImage = course.images.find(function (img) { return img.id === course.imageId; });
        var courseImageIsDataUrl = courseImage && courseImage.url.startsWith('data:');
        var courseIsUploaded = courseImage && courseImage.url.indexOf('storage.googleapis.com') > 0;
        var softAccessList = Object(_business_logic__WEBPACK_IMPORTED_MODULE_6__["getSoftAccessList"])(course);
        var currentUser = Object(_globals_current_user__WEBPACK_IMPORTED_MODULE_15__["getCurrentUser"])();
        var canDelete = !_features__WEBPACK_IMPORTED_MODULE_19__["features"].teacherRights || softAccessList.some(function (user) { return user.email === currentUser.mail && user.access === 'full'; });
        var displayStudyGroups = _features__WEBPACK_IMPORTED_MODULE_19__["features"].studyGroups;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-row sv-layout sv-skip-spacer" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-layout sv-skip-spacer sv-column-7" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet sv-skip-spacer" },
                    course.isTemplate && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h1", null, "Kursmall"),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null, "Kurs\u00F6vergripande"),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_18__["OpenCloseBox"], { title: react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, "Kurs\u00F6vergripande"), headerOpen: true, inactivated: !_features__WEBPACK_IMPORTED_MODULE_19__["features"].cbCollapseBoxes },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "ked_boxed" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h3", null, "Kursens bild"),
                                courseImageIsDataUrl ?
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, "Kursens bild ligger i databasen. F\u00F6r att \u00E4ndra bild m\u00E5ste du dra och sl\u00E4ppa en ny bild ovanp\u00E5 den gamla h\u00F6gst upp p\u00E5 denna sida. Bilden kan antingen vara fr\u00E5n en annan webbsida. Lokala bildfiler g\u00E5r ocks\u00E5 bra att dra och sl\u00E4ppa.")
                                    : courseIsUploaded ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, "Kursens bild ligger i Kunskapsskolans Google moln. F\u00F6r att \u00E4ndra bild m\u00E5ste du dra och sl\u00E4ppa en ny bild ovanp\u00E5 den gamla h\u00F6gst upp p\u00E5 denna sida. Bilden kan antingen vara fr\u00E5n en annan webbsida. Lokala bildfiler g\u00E5r ocks\u00E5 bra att dra och sl\u00E4ppa.") : courseImage ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("textarea", { value: courseImage.url, style: { width: '100%', height: '30px' }, onChange: function (ev) { return Object(_course_banner__WEBPACK_IMPORTED_MODULE_7__["setCourseImage"])(course, origCourse, host, ev.target.value); } }),
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, "Bilden som visas h\u00F6gst upp h\u00E4mtas fr\u00E5n angiven URL. F\u00F6r att \u00E4ndra bild kan du redigera URL ovan. Ett annat s\u00E4tt att \u00E4ndra bild \u00E4r att dra och sl\u00E4ppa en ny bild \u00F6ver den gamla h\u00F6gst upp p\u00E5 sidan.")) :
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, "Kursen saknar egen bild. L\u00E4gg till en bild genom att dra och sl\u00E4ppa en bild p\u00E5 kurs-bannern h\u00F6gst upp p\u00E5 den h\u00E4r sidan."),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null)),
                            !course.isTemplate && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h3", null, "Beskrivning"),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { className: "subHeader" }, "(Beskrivning av kursen. F\u00F6r att skilja mellan olika varianter av samma gymnasiekurs)"),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("textarea", { className: "inputTextBox inputTextSmall", value: course.description, onChange: function (ev) { return host.update({ description: { $set: ev.target.value } }); } }),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null)),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h3", null, "Upptaktstext"),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { className: "subHeader" }, "(texten ska visas p\u00E5 kursens upptaktssektion)"),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_wysiwyg_index__WEBPACK_IMPORTED_MODULE_12__["Wysiwyg"], { html: course.runUpText, defaultActions: _utility_components_wysiwyg_actions_sv__WEBPACK_IMPORTED_MODULE_13__["default"], actions: [
                                        "bold",
                                        "italic",
                                        "underline",
                                        "strikethrough",
                                        "heading2",
                                        "heading3",
                                        "olist",
                                        "ulist",
                                        "outdent",
                                        "indent",
                                        "line",
                                        "link",
                                        "image"
                                    ], onChange: function (newHtml) { return host.update({ runUpText: { $set: newHtml } }); } }),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null)),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h3", null, "Kursresurser"),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { className: "subHeader" }, "(Resurser f\u00F6r upptakt och kursen som helhet)"),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_sub_components_editable_resource_list__WEBPACK_IMPORTED_MODULE_2__["EditableResourceList"], { resources: course.resources, onUpdate: function (resourcesUpdates) { return host.update({ resources: resourcesUpdates }); }, host: host }),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h3", null, "Arbetsg\u00E5ng"),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { className: "subHeader" }, "(Eventuell l\u00E4nk till arbetsg\u00E5ng f\u00F6r kursen)"),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_sub_components_editable_workflow_link__WEBPACK_IMPORTED_MODULE_14__["EditableWorkFlowLink"], { url: course.workFlowLink, onUpdate: function (updates) { return host.update({ workFlowLink: updates }); }, host: host }),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null),
                            !course.isTemplate && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h3", null, "Google Classroom"),
                                displayStudyGroups ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "checkBox" + (course.googleCreateClassrooms ? " checked" : ""), onClick: function () { host.update({ googleCreateClassrooms: { $set: !course.googleCreateClassrooms } }); } })),
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" }, "Skapa klassrum f\u00F6r kursen"))
                                    :
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal spaced" },
                                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { placeholder: "Google classroom URL", type: "text", size: 30, value: course.googleClassRoomURL, onChange: function (ev) { return host.update({ googleClassRoomURL: { $set: ev.target.value } }); } })),
                                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { placeholder: "kod", type: "text", size: 8, value: course.googleClassRoomCode, onChange: function (ev) { return host.update({ googleClassRoomCode: { $set: ev.target.value } }); } })))),
                            course.isTemplate ? null : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_sub_components_editable_teacher_list__WEBPACK_IMPORTED_MODULE_9__["EditableTeacherList"], { school: course.school, teachers: course.responsibleTeachers, onUpdate: function (teachersUpdate) {
                                        host.update({ responsibleTeachers: { $set: teachersUpdate } });
                                    } }),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null),
                                displayStudyGroups && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "select-studygroups" },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h3", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_10__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Studiegrupper"], ["Studiegrupper"])))),
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_observe__WEBPACK_IMPORTED_MODULE_16__["Observe"], { fallback: react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_sub_components_spinner__WEBPACK_IMPORTED_MODULE_8__["Spinner"], null), errorFallback: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_10__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Kunde inte ladda studiegrupper fr\u00E5n EDS"], ["Kunde inte ladda studiegrupper fr\u00E5n EDS"]))) },
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_sub_components_select_study_groups__WEBPACK_IMPORTED_MODULE_17__["SelectStudyGroups"], { school: course.school, courseCode: course.code, selectedStudyGroups: course.studyGroups || [], onUpdate: function (studyGroups) { return host.update({ studyGroups: { $set: studyGroups } }); } })))))),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { id: "Kursensmoduler" }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null, "Kursens moduler"),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null)),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_module_list__WEBPACK_IMPORTED_MODULE_4__["CourseModuleList"], { host: host, course: course, idsNotCoveredByAnyTask: idsNotCoveredByAnyTask }),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_sub_components_weighted_items_table__WEBPACK_IMPORTED_MODULE_11__["WeightedItemsTable"], { course: course })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null, "Kursens status"),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                        course.createdBy && course.createdDate && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                            "Kursen skapades ",
                            Object(_utils__WEBPACK_IMPORTED_MODULE_3__["dtFormat"])(course.createdDate),
                            " av ",
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("strong", null, course.createdBy.name),
                            "."),
                        course.modifiedBy && course.modifiedDate && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                            "Kursen redigerades senast ",
                            Object(_utils__WEBPACK_IMPORTED_MODULE_3__["dtFormat"])(course.modifiedDate),
                            " av ",
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("strong", null, course.modifiedBy.name),
                            "."),
                        course.active ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                            "Kursen \u00E4r ",
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("strong", null, "AKTIV"),
                            " sedan ",
                            Object(_utils__WEBPACK_IMPORTED_MODULE_3__["dtFormat"])(course.activatedDate),
                            " av ",
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("strong", null, course.activatedBy.name),
                            ".") : react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                            "Kursen \u00E4r ",
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("strong", null, "INAKTIV"),
                            course.inactivatedBy ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("span", null,
                                "sedan ",
                                Object(_utils__WEBPACK_IMPORTED_MODULE_3__["dtFormat"])(course.inactivatedDate),
                                " av ",
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("strong", null, course.inactivatedBy.name),
                                ".") : react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("span", null, ".")),
                        (uncoveredKnowledgeRequirements.length === 0 ?
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { className: "markedGreen" }, "Modulernas kunskapskrav t\u00E4cker skolverkets krav f\u00F6r denna kurs") :
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "markedRed warning-box" },
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "warningFlag" },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-exclamation-triangle", "aria-hidden": "true" })),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, "Modulernas kunskapskrav t\u00E4cker inte skolverkets krav f\u00F6r denna kurs."))),
                        sanityCheckWarnings.map(function (warning) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: warning, className: "markedRed warning-box" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "warningFlag" },
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-exclamation-triangle", "aria-hidden": "true" })),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, warning)); }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn btn-large", onClick: function () { return host.confirmSaveAndSync(); } }, "Spara"),
                        course.active ?
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn btn-info btn-large", onClick: function () { return host.inactivateAndSave(); } }, "Inaktivera och spara") :
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn btn-info btn-large", onClick: function () { return host.activateAndSave(); } }, "Aktivera och spara")),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet" },
                        canDelete && !course.isTemplate && (origCourse ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn btn-warning btn-large pull-right", onClick: function () {
                                if (confirm(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_10__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Bekr\u00E4fta borttagning av kursen \"", " - ", "\" f\u00F6r skolan ", "\n\nKursen kommar att raderas helt!\n\n\u00C4r du s\u00E4ker?"], ["Bekr\u00E4fta borttagning av kursen \"", " - ", "\" f\u00F6r skolan ", "\\n\\nKursen kommar att raderas helt!\\n\\n\u00C4r du s\u00E4ker?"])), course.name, course.description, course.school)))
                                    host.deleteCourse().catch(_utils_utils__WEBPACK_IMPORTED_MODULE_10__["showError"]);
                            } }, "Ta bort kurs") : react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn btn-warning btn-large pull-right", onClick: function () { return history.go(-1); } }, "Avbryt")),
                        course.googleCreateClassrooms && displayStudyGroups &&
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn btn-primary btn-large pull-right", onClick: function () { return host.syncWithClassroomAndSave(); } },
                                host.syncInProgress() ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_sub_components_spinner__WEBPACK_IMPORTED_MODULE_8__["Spinner"], null) :
                                    (course.inSyncWithClassroom ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("span", null,
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fas fa-check", "aria-hidden": "true" })) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("span", null,
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fas fa-code-branch" }))),
                                "\u00A0Sync med klassrum")))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-layout sv-column-5" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_sub_components_school_courses__WEBPACK_IMPORTED_MODULE_5__["SchoolCourses"], null)));
    };
    return InnerEditCourse;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/components/course-builder/index.tsx":
/*!*************************************************!*\
  !*** ./src/components/course-builder/index.tsx ***!
  \*************************************************/
/*! exports provided: CourseBuilder */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CourseBuilder", function() { return CourseBuilder; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/es/index.js");
/* harmony import */ var _utils_error_success_feedback__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/error-success-feedback */ "./src/utils/error-success-feedback.tsx");
/* harmony import */ var _schools__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./schools */ "./src/components/course-builder/schools/index.tsx");
/* harmony import */ var _schools_new_school__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./schools/new-school */ "./src/components/course-builder/schools/new-school.tsx");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _subjects__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./subjects */ "./src/components/course-builder/subjects/index.tsx");
/* harmony import */ var _courses__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./courses */ "./src/components/course-builder/courses/index.tsx");
/* harmony import */ var _schools_edit_school__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./schools/edit-school */ "./src/components/course-builder/schools/edit-school.tsx");
/* harmony import */ var _courses_course_banner__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./courses/course-banner */ "./src/components/course-builder/courses/course-banner.tsx");
/* harmony import */ var _courses_create_new__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./courses/create-new */ "./src/components/course-builder/courses/create-new.tsx");
/* harmony import */ var _utils_keep_session_alive__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../utils/keep-session-alive */ "./src/utils/keep-session-alive.ts");








// Views





// Keep Session Alive

Object(_utils_keep_session_alive__WEBPACK_IMPORTED_MODULE_13__["keepSessionAlive"])();
var CourseBuilder = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](CourseBuilder, _super);
    function CourseBuilder(props) {
        return _super.call(this, props) || this;
    }
    CourseBuilder.prototype.render = function () {
        var _this = this;
        var isAuthorized = _globals_KED_env__WEBPACK_IMPORTED_MODULE_7__["default"].currentUser.roles.some(function (role) { return role === "ADMIN" || role === "EMPLOYEE"; });
        var isAdmin = _globals_KED_env__WEBPACK_IMPORTED_MODULE_7__["default"].currentUser.roles.some(function (role) { return role === "ADMIN"; });
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "course-builder" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_3__["HashRouter"], null, isAuthorized ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_3__["Route"], { exact: true, path: "/", render: function (_a) {
                        var match = _a.match;
                        return isAdmin ?
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_schools__WEBPACK_IMPORTED_MODULE_5__["Schools"], { viewCourseUrl: _this.props.viewCourseUrl, feedbackUrl: _this.props.feedbackUrl }) :
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_courses_create_new__WEBPACK_IMPORTED_MODULE_12__["CreateNewCourse"], { feedbackUrl: _this.props.feedbackUrl });
                    } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_3__["Route"], { exact: true, path: "/schools", render: function (_a) {
                        var match = _a.match;
                        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_schools__WEBPACK_IMPORTED_MODULE_5__["Schools"], { viewCourseUrl: _this.props.viewCourseUrl, feedbackUrl: _this.props.feedbackUrl });
                    } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_3__["Route"], { exact: true, path: "/schools/new/gymnasium", render: function () { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_schools_new_school__WEBPACK_IMPORTED_MODULE_6__["NewSchool"], { type: "gymnasium", feedbackUrl: _this.props.feedbackUrl }); } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_3__["Route"], { exact: true, path: "/schools/new/primary", render: function () { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_schools_new_school__WEBPACK_IMPORTED_MODULE_6__["NewSchool"], { type: "primary", feedbackUrl: _this.props.feedbackUrl }); } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_3__["Route"], { exact: true, path: "/schools/:id/edit", render: function (_a) {
                        var match = _a.match;
                        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_schools_edit_school__WEBPACK_IMPORTED_MODULE_10__["EditSchool"], { id: match.params.id, title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Editera skola"], ["Editera skola"]))), feedbackUrl: _this.props.feedbackUrl });
                    } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_3__["Route"], { exact: true, path: "/subjects", render: function () { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_subjects__WEBPACK_IMPORTED_MODULE_8__["Subjects"], { feedbackUrl: _this.props.feedbackUrl }); } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_3__["Route"], { path: "/subjects/:id", render: function (_a) {
                        var match = _a.match;
                        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_subjects__WEBPACK_IMPORTED_MODULE_8__["ShowSubject"], { id: match.params.id, feedbackUrl: _this.props.feedbackUrl });
                    } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_3__["Route"], { exact: true, path: "/courses/new", render: function () { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_courses_create_new__WEBPACK_IMPORTED_MODULE_12__["CreateNewCourse"], { feedbackUrl: _this.props.feedbackUrl }); } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_3__["Route"], { path: "/courses/create-from-template/:templateId", render: function (_a) {
                        var match = _a.match;
                        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_courses__WEBPACK_IMPORTED_MODULE_9__["EditCourse"], { templateId: match.params.templateId, view: "courseBuilder", viewCourseUrl: _this.props.viewCourseUrl, feedbackUrl: _this.props.feedbackUrl });
                    } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_3__["Route"], { path: "/courses/:id/edit", render: function (_a) {
                        var match = _a.match;
                        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_courses__WEBPACK_IMPORTED_MODULE_9__["EditCourse"], { id: match.params.id, view: "courseBuilder", viewCourseUrl: _this.props.viewCourseUrl, feedbackUrl: _this.props.feedbackUrl });
                    } })) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_3__["Route"], { path: "/", render: function () { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_courses_course_banner__WEBPACK_IMPORTED_MODULE_11__["CourseBanner"], { title: "Kursbyggaren", activePage: "courseBuilder", routes: { feedback: _this.props.feedbackUrl } }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null, "Beh\u00F6righet saknas"),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, "Detta verktyg \u00E4r endast till f\u00F6r anst\u00E4llda p\u00E5 Kunskapsskolan."),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h3", null, "Anv\u00E4ndarattribut"),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("table", { className: "ked_boxed", style: { border: "1px solid #eee" } },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("thead", null,
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "Attribut"),
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "V\u00E4rde"))),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tbody", null, Object.keys(_globals_KED_env__WEBPACK_IMPORTED_MODULE_7__["default"].currentUser).map(function (attr) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", { key: attr },
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null, attr),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null, _globals_KED_env__WEBPACK_IMPORTED_MODULE_7__["default"].currentUser[attr])); })))); } }))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utils_error_success_feedback__WEBPACK_IMPORTED_MODULE_4__["ErrorSuccessFeedback"], null));
    };
    return CourseBuilder;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

var templateObject_1;


/***/ }),

/***/ "./src/components/course-builder/knowledge-matrix-partial-utils.ts":
/*!*************************************************************************!*\
  !*** ./src/components/course-builder/knowledge-matrix-partial-utils.ts ***!
  \*************************************************************************/
/*! exports provided: getRequirmentSentences, getSavedSentences, allRequirementSentecesMarked, getPartialContentDefaultView, isPartialCoveredRequirment, getCoveredSenteces, getSortedRequirments, getMigrationTitle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getRequirmentSentences", function() { return getRequirmentSentences; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSavedSentences", function() { return getSavedSentences; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "allRequirementSentecesMarked", function() { return allRequirementSentecesMarked; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getPartialContentDefaultView", function() { return getPartialContentDefaultView; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isPartialCoveredRequirment", function() { return isPartialCoveredRequirment; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getCoveredSenteces", function() { return getCoveredSenteces; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSortedRequirments", function() { return getSortedRequirments; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getMigrationTitle", function() { return getMigrationTitle; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/utils */ "./src/utils/utils.ts");


//get sentences by requirement
function getRequirmentSentences(requirement) {
    return requirement.split(".").filter(function (e) { return e; });
}
//retrieve sentences
function getSavedSentences(partialRequirments) {
    return partialRequirments.map(function (obj) {
        return obj.trim();
    }) || [];
}
//check all requirements are marked
function allRequirementSentecesMarked(requirementName, partialRequirements) {
    var textSentences = getRequirmentSentences(requirementName);
    return partialRequirements && partialRequirements.length === textSentences.length;
    ;
}
//get the partial saved sentences for the default view
function getPartialContentDefaultView(requirement, partialRequirments, alreadyCoveredPartialRequirments, skipNotMarked) {
    var resultedHtml = requirement.name;
    var textSentences = getRequirmentSentences(requirement.name);
    var rowRequirments = partialRequirments && getSavedSentences(partialRequirments);
    var allReqCoveredSentence = alreadyCoveredPartialRequirments && getCoveredSenteces(alreadyCoveredPartialRequirments, requirement.id);
    var allReqSentencesMarked = allRequirementSentecesMarked(requirement.name, rowRequirments);
    textSentences.forEach(function (sentence) {
        //trimm current sentence
        var trimmedSentence = sentence.trim();
        var fullSentence = sentence + ".";
        if (rowRequirments && rowRequirments.includes(trimmedSentence) && !allReqSentencesMarked) {
            resultedHtml = resultedHtml.replace(fullSentence, "<span class=" + "markedGreen" + ">" + fullSentence + "</span>");
        }
        else {
            var coveredSentece = allReqCoveredSentence && allReqCoveredSentence.includes(trimmedSentence);
            if (coveredSentece) {
                resultedHtml = resultedHtml.replace(fullSentence, "<span>" + fullSentence + "</span>");
            }
            else if (!allReqSentencesMarked && allReqCoveredSentence && allReqCoveredSentence.length > 0) {
                resultedHtml = resultedHtml.replace(fullSentence, "<span class=" + "markedRed" + ">" + fullSentence + "</span>");
            }
        }
    });
    return resultedHtml;
}
//check the current requirement is already covered
function isPartialCoveredRequirment(requirement, alreadyCoveredPartialRequirments) {
    var textSentences = getRequirmentSentences(requirement.name);
    var result = false;
    for (var i = 0; i < textSentences.length; i++) {
        var trimmedSentence = textSentences[i].trim();
        var allCoveredSentenceReq = alreadyCoveredPartialRequirments && getCoveredSenteces(alreadyCoveredPartialRequirments, requirement.id);
        var coveredSentece = allCoveredSentenceReq && allCoveredSentenceReq.includes(trimmedSentence);
        if (coveredSentece) {
            result = true;
            break;
        }
    }
    return result;
}
//compute the covered senteces excluding the current requirement
function getCoveredSenteces(allReq, requirementId) {
    var resultArray = [];
    allReq.forEach(function (obj) {
        var assignedReq = Object.assign([], Object.keys(obj).filter(function (reqId) { return reqId == requirementId; }).map(function (k) { return obj[k].map(function (elem) { return elem.trim(); }); }));
        resultArray.push.apply(resultArray, tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](assignedReq));
    });
    return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["flatten"])(resultArray);
}
//sort the selected sentences by the order of the appearance in the requirement
function getSortedRequirments(textSentences, partialRequirments) {
    var output = [];
    var indexedSentences = textSentences.map(function (e, i) { return { ind: i, val: e }; });
    output = indexedSentences.filter(function (s) { return partialRequirments.includes(s.val); });
    return output ? output.sort(function (x, y) { return x.ind > y.ind ? 1 : -1; }).map(function (s) { return s.val; }) : [];
}
function getMigrationTitle(isMigrated, markMode) {
    return isMigrated ?
        markMode ?
            "Skolverket har uppdaterat textens formulering. Du kan granska \u00E4ndringen genom att f\u00E4lla ut varningsboxen till h\u00F6ger, med titel \"Uppdaterade formuleringar fr\u00E5n Skolverket\"" :
            "Skolverket har uppdaterat textens formulering, men detta har \u00E4nnu inte granskats av uppgiftens redigeringsbeh\u00F6rige" :
        undefined;
}


/***/ }),

/***/ "./src/components/course-builder/modal-pages/edit-resource.tsx":
/*!*********************************************************************!*\
  !*** ./src/components/course-builder/modal-pages/edit-resource.tsx ***!
  \*********************************************************************/
/*! exports provided: EditResource */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditResource", function() { return EditResource; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils */ "./src/components/course-builder/utils.ts");
/* harmony import */ var valid_url__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! valid-url */ "./node_modules/valid-url/index.js");
/* harmony import */ var valid_url__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(valid_url__WEBPACK_IMPORTED_MODULE_4__);





var EditResource = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](EditResource, _super);
    function EditResource(props) {
        var _this = _super.call(this, props) || this;
        _this.state = _this.props.resource || { name: '', url: '' };
        return _this;
    }
    EditResource.prototype.save = function () {
        var resource = this.state;
        if (!valid_url__WEBPACK_IMPORTED_MODULE_4___default.a.isUri(resource.url))
            throw new Error(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Angiven URL '", "' \u00E4r ogiltig. Ska b\u00F6rja med exempelvis http:, https: eller mailto:"], ["Angiven URL '", "' \u00E4r ogiltig. Ska b\u00F6rja med exempelvis http:, https: eller mailto:"])), resource.url));
        this.props.onSave(resource);
    };
    EditResource.prototype.render = function () {
        var _this = this;
        var _a = this.props, title = _a.title, onSave = _a.onSave, onDelete = _a.onDelete;
        var resource = this.state;
        var isValidUrl = valid_url__WEBPACK_IMPORTED_MODULE_4___default.a.isUri(this.state.url);
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet sv-skip-spacer" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null, title),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" }, "Namn:"),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { type: "text", autoFocus: true, tabIndex: 1, size: 50, value: resource.name, onChange: function (ev) { return _this.setState({ name: ev.target.value }); } })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top spaced" })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" }, "L\u00E4nk:"),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top " },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { type: "text", tabIndex: 1, size: 50, value: resource.url, onChange: function (ev) { return _this.setState({ url: ev.target.value }); } })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top spaced" })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null)),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet" },
                (resource.createdDate || resource.modifiedDate) && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                    resource.createdDate && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                        "Resursen/L\u00E4nken skapades ",
                        Object(_utils__WEBPACK_IMPORTED_MODULE_3__["dtFormat"])(resource.createdDate),
                        " av ",
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("strong", null, resource.createdBy.name),
                        "."),
                    resource.modifiedDate && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                        "Resursen/L\u00E4nken redigerades senast ",
                        Object(_utils__WEBPACK_IMPORTED_MODULE_3__["dtFormat"])(resource.modifiedDate),
                        " av ",
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("strong", null, resource.modifiedBy.name),
                        "."),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null)),
                onDelete && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { tabIndex: 2, className: "btn btn-warning btn-large pull-right", onClick: function () { return onDelete(); } }, "Ta bort resurs/l\u00E4nk"),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { tabIndex: 1, className: "btn btn-large" + (isValidUrl ? "" : " btn-inactive"), onClick: isValidUrl && (function () { return onSave(resource); }) }, "Spara")));
    };
    return EditResource;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

var templateObject_1;


/***/ }),

/***/ "./src/components/course-builder/modal-pages/edit-task/basic-editable-task-fields.tsx":
/*!********************************************************************************************!*\
  !*** ./src/components/course-builder/modal-pages/edit-task/basic-editable-task-fields.tsx ***!
  \********************************************************************************************/
/*! exports provided: BasicEditableTaskFields */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BasicEditableTaskFields", function() { return BasicEditableTaskFields; });
/* harmony import */ var react_datepicker__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react-datepicker */ "./node_modules/react-datepicker/es/index.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _task_migration_box__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./task-migration-box */ "./src/components/course-builder/modal-pages/edit-task/task-migration-box.tsx");
/* harmony import */ var _apis_google_picker__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../apis/google-picker */ "./src/apis/google-picker.ts");
/* harmony import */ var _apis_buttons__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../apis/buttons */ "./src/apis/buttons.tsx");
/* harmony import */ var _task_content_fragment__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./task-content-fragment */ "./src/components/course-builder/modal-pages/edit-task/task-content-fragment.tsx");
/* harmony import */ var _utility_components_checkbox__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../utility-components/checkbox */ "./src/components/utility-components/checkbox.tsx");








function BasicEditableTaskFields(_a) {
    var task = _a.task, course = _a.course, writeAccess = _a.writeAccess, features = _a.features, editTask = _a.editTask, templates = _a.templates;
    var showGooglePicker = features.picker;
    return react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", null,
        react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("h2", null, "Uppgiftens namn och l\u00E4nk"),
        react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", { className: "align-horizontal spaced" },
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", { className: "horizontalItem top" },
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("p", null, "Uppgiftens namn:")),
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", { className: "horizontalItem top" },
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("input", { autoFocus: true, type: "text", size: 35, value: task.name, disabled: !writeAccess, readOnly: !writeAccess, onChange: function (ev) {
                        editTask.updateTaskOrCustomization("name", { $set: ev.target.value });
                    } }))),
        task.migratedTexts && writeAccess && react__WEBPACK_IMPORTED_MODULE_2__["createElement"](_task_migration_box__WEBPACK_IMPORTED_MODULE_3__["TaskMigrationBox"], { task: task, course: course, updateLink: function (id, linkOrUnlink) { return editTask.updateLink(id, linkOrUnlink); } }),
        react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("h2", null, "Inneh\u00E5llstyp"),
        react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", { className: "align-horizontal spaced" },
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", { className: "horizontalItem top" },
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("p", null, "V\u00E4lj:")),
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", { className: "horizontalItem top" },
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("select", { value: task.contentType, onChange: function (ev) {
                        editTask.updateTaskOrCustomization("contentType", { $set: ev.target.value });
                    } },
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("option", { value: "url" }, "L\u00E4nk"),
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("option", { value: "desc" }, "Beskrivning")))),
        task.contentType && task.contentType == 'url' ? react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", { className: "align-horizontal spaced" },
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", { className: "horizontalItem top" },
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("p", null, "URL:")),
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", { className: "horizontalItem top align-horizontal" },
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", { className: "horizontalItem top" },
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("input", { className: "horizontalItem", type: "text", size: 35, value: task.url, disabled: !writeAccess, readOnly: !writeAccess, onChange: function (ev) {
                            editTask.updateTaskOrCustomization("url", { $set: ev.target.value });
                        } })),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", { className: "horizontalItem top" }, showGooglePicker && react__WEBPACK_IMPORTED_MODULE_2__["createElement"](_apis_buttons__WEBPACK_IMPORTED_MODULE_5__["DriveButton"], { label: "", action: function () {
                        var picker = new _apis_google_picker__WEBPACK_IMPORTED_MODULE_4__["GooglePicker"]({ upload: true });
                        picker.show().then(function (files) {
                            var fileurl = files[0].url;
                            var viewurl = fileurl.substr(0, fileurl.lastIndexOf('/')) + "/view";
                            if (viewurl == task.url)
                                return;
                            editTask.updateTaskOrCustomization("url", { $set: viewurl });
                        });
                    } })))) : react__WEBPACK_IMPORTED_MODULE_2__["createElement"](react__WEBPACK_IMPORTED_MODULE_2__["Fragment"], null, (writeAccess || !!task.content) && react__WEBPACK_IMPORTED_MODULE_2__["createElement"](_task_content_fragment__WEBPACK_IMPORTED_MODULE_6__["TaskContentFragment"], { writeAccess: writeAccess, task: task, editTask: editTask })),
        react__WEBPACK_IMPORTED_MODULE_2__["createElement"](react__WEBPACK_IMPORTED_MODULE_2__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("h2", null, "Inl\u00E4mningsuppgift"),
            react__WEBPACK_IMPORTED_MODULE_2__["createElement"](_utility_components_checkbox__WEBPACK_IMPORTED_MODULE_7__["UICheckbox"], { state: (editTask.getTaskProp("assignment") ? " checked" : ""), onClick: function () {
                    editTask.updateTaskOrCustomization("assignment", { $set: !editTask.getTaskProp("assignment") });
                }, label: "Den h\u00E4r uppgiften \u00E4r en inl\u00E4mningsuppgift" }),
            task.assignment && react__WEBPACK_IMPORTED_MODULE_2__["createElement"](react__WEBPACK_IMPORTED_MODULE_2__["Fragment"], null,
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", { className: "align-horizontal spaced" },
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("p", null, "V\u00E4lj mall:")),
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("select", { value: task.templateFile ? task.templateFile.fileId : '-', onChange: function (ev) {
                                var newValue = ev.target.value;
                                if (newValue === '-') {
                                    // do not use template
                                    editTask.updateTemplateView(null);
                                }
                                else if (newValue.startsWith('t:')) {
                                    editTask.updateTemplateView({ fileId: newValue });
                                }
                                else {
                                    // Picked file
                                    var picker = new _apis_google_picker__WEBPACK_IMPORTED_MODULE_4__["GooglePicker"]({ limitType: 'google-apps' });
                                    picker.show().then(function (files) { return editTask.updateTemplateView(files[0]); });
                                }
                            } },
                            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("option", { value: "-" }, "Ingen mall"),
                            templates ? templates.map(function (template, idx) {
                                return react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("option", { key: idx, value: "t:" + template.fileId },
                                    template.grade ? template.grade + ": " : "",
                                    template.title);
                            }) : null,
                            task.templateFile && !task.templateFile.fileId.startsWith('t:') ?
                                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("option", { value: task.templateFile.fileId },
                                    "Egen mall: ",
                                    task.templateFile.name) :
                                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("option", { value: "4" }, "Egen mall")))),
                task.templateFile &&
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", { className: "align-horizontal spaced" },
                        react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", { className: "horizontalItem top" },
                            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("img", { className: "file-icon", src: task.templateFile.iconUrl })),
                        react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", { className: "horizontalItem top" },
                            react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("p", null,
                                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("a", { target: "_blank", href: task.templateFile.url }, task.templateFile.name))))),
            editTask.getTaskProp("assignment") && react__WEBPACK_IMPORTED_MODULE_2__["createElement"](react__WEBPACK_IMPORTED_MODULE_2__["Fragment"], null,
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("p", null, "Inl\u00E4mningsdatum"),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_2__["createElement"](react_datepicker__WEBPACK_IMPORTED_MODULE_0__["default"], { nextMonthButtonLabel: "", previousMonthButtonLabel: "", showWeekNumbers: true, selected: editTask.getTaskProp("deadline") && moment__WEBPACK_IMPORTED_MODULE_1___default()(editTask.getTaskProp("deadline")).toDate(), dateFormat: "yyyy-MM-dd", locale: "sv", popperPlacement: "bottom-start", onChange: function (value) {
                                editTask.updateTaskOrCustomization("deadline", { $set: moment__WEBPACK_IMPORTED_MODULE_1___default()(value).format("YYYY-MM-DD") });
                            } })),
                    react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("div", { className: "horizontalItem top" }, editTask.getTaskProp("deadline") && react__WEBPACK_IMPORTED_MODULE_2__["createElement"]("a", { className: "deleteDate", href: "#", title: "Ta bort inl\u00E4mningsdatum", onClick: function (ev) {
                            ev.preventDefault();
                            editTask.updateTaskOrCustomization("deadline", { $set: null });
                        } }))),
                react__WEBPACK_IMPORTED_MODULE_2__["createElement"](_utility_components_checkbox__WEBPACK_IMPORTED_MODULE_7__["UICheckbox"], { state: ((task.sendToUrkund == null ? true : task.sendToUrkund) ? " checked" : ""), onClick: function () {
                        return editTask.updateTaskOrCustomization("sendToUrkund", { $set: task.sendToUrkund == null ? false : !task.sendToUrkund });
                    }, label: "Skicka inl\u00E4mningar till Urkund" }),
                task.templateFile && react__WEBPACK_IMPORTED_MODULE_2__["createElement"](_utility_components_checkbox__WEBPACK_IMPORTED_MODULE_7__["UICheckbox"], { state: (task.additionalUploads ? " checked" : ""), label: "Till\u00E5t inl\u00E4mning av andra/ytterligare filer", onClick: function () {
                        return editTask.updateTaskOrCustomization("additionalUploads", { $set: task.additionalUploads == null ? false : !task.additionalUploads });
                    } }))));
}


/***/ }),

/***/ "./src/components/course-builder/modal-pages/edit-task/edit-task.tsx":
/*!***************************************************************************!*\
  !*** ./src/components/course-builder/modal-pages/edit-task/edit-task.tsx ***!
  \***************************************************************************/
/*! exports provided: EditTask */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditTask", function() { return EditTask; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _sub_components_knowledge_matrix__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../sub-components/knowledge-matrix */ "./src/components/course-builder/sub-components/knowledge-matrix.tsx");
/* harmony import */ var react_addons_update__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-addons-update */ "./node_modules/react-addons-update/index.js");
/* harmony import */ var react_addons_update__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_addons_update__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _access_control__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../access-control */ "./src/access-control/index.ts");
/* harmony import */ var _sub_components_select_related_docs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../sub-components/select-related-docs */ "./src/components/course-builder/sub-components/select-related-docs.tsx");
/* harmony import */ var valid_url__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! valid-url */ "./node_modules/valid-url/index.js");
/* harmony import */ var valid_url__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(valid_url__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _utils_cached_response__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../utils/cached-response */ "./src/utils/cached-response.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _sub_components_spinner__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../sub-components/spinner */ "./src/components/course-builder/sub-components/spinner.tsx");
/* harmony import */ var _features__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../features */ "./src/features/index.ts");
/* harmony import */ var _search_results__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./search-results */ "./src/components/course-builder/modal-pages/edit-task/search-results.tsx");
/* harmony import */ var _basic_editable_task_fields__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./basic-editable-task-fields */ "./src/components/course-builder/modal-pages/edit-task/basic-editable-task-fields.tsx");
/* harmony import */ var _task_status_fragment__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./task-status-fragment */ "./src/components/course-builder/modal-pages/edit-task/task-status-fragment.tsx");
/* harmony import */ var _save_or_cancel_buttons__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./save-or-cancel-buttons */ "./src/components/course-builder/modal-pages/edit-task/save-or-cancel-buttons.tsx");
/* harmony import */ var _previewable_task_fields__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./previewable-task-fields */ "./src/components/course-builder/modal-pages/edit-task/previewable-task-fields.tsx");
/* harmony import */ var _apis_google_drive__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../../apis/google-drive */ "./src/apis/google-drive.ts");
/* harmony import */ var _apis_configs__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../../apis/configs */ "./src/apis/configs.ts");




















var EditTask = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](EditTask, _super);
    function EditTask(props) {
        var _this = _super.call(this, props) || this;
        _this.features = new _features__WEBPACK_IMPORTED_MODULE_12__["Features"]();
        var writeAccess = !props.task || Object(_access_control__WEBPACK_IMPORTED_MODULE_5__["hasWriteAccess"])(_globals_KED_env__WEBPACK_IMPORTED_MODULE_10__["default"].currentUser, props.task);
        _this.state = {
            title: props.task ?
                writeAccess ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_8__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Redigera uppgift till \"", "\""], ["Redigera uppgift till \"", "\""])), props.module.name) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_8__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Visa uppgift till \"", "\""], ["Visa uppgift till \"", "\""])), props.module.name) :
                props.searchMode ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_8__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["S\u00F6k ny uppgift till \"", "\""], ["S\u00F6k ny uppgift till \"", "\""])), props.module.name) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_8__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4gg till egen uppgift till \"", "\""], ["L\u00E4gg till egen uppgift till \"", "\""])), props.module.name),
            futureAbilitiesOpen: false,
            taskCustomization: props.taskCustomization || {},
            task: props.task ? tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({ $meta: props.task.$meta || 'update' }, props.task) : props.searchMode ? null :
                // No task was given. Set $meta = 'add' to inform EditCourse.save()
                // to add the task to the tasks table.
                {
                    id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_2__["createUUID"])(),
                    $meta: 'add',
                    tags: [
                        "sub:" + props.course.subjectCode,
                        "course:" + props.course.code
                    ],
                    school: !props.course.isTemplate && _globals_KED_env__WEBPACK_IMPORTED_MODULE_10__["default"].currentUser.school,
                    resources: [],
                    abilities: [],
                    centralContent: [],
                    futureAbilities: [],
                    knowledgeRequirements: [],
                    name: "",
                    url: "",
                    acl: props.course.isTemplate ? [
                        "role:USER:R" // (OK to keep after kursbygg-changes). Templates (which will be empty!) will not have tasks. If they had, might not tasks should not be possible to modify. (An ADMIN could belong to a school! Other non-admins at that school should not be able to edit it)
                    ] : [
                        "role:USER:R",
                        "schoolRole:" + _globals_KED_env__WEBPACK_IMPORTED_MODULE_10__["default"].currentUser.school + "/EMPLOYEE:S"
                    ]
                },
            searchMarkedIds: props.searchMode && [],
            searchResult: props.searchMode && [],
            isSearching: props.searchMode
        };
        if (props.searchMode) {
            _this.searchResponse = new _utils_cached_response__WEBPACK_IMPORTED_MODULE_9__["CachedResponse"](function () {
                return _globals_KED_env__WEBPACK_IMPORTED_MODULE_10__["default"].kedBackendClient.list("tasks", {
                    tags: "course:" + props.course.code,
                    include: ['knowledgeRequirements', 'abilities', 'centralContent'],
                    flags: ['includeIdsOnly']
                });
            });
        }
        return _this;
    }
    EditTask.prototype.setStatePromised = function (state) {
        var _this = this;
        return new Promise(function (resolve) { return _super.prototype.setState.call(_this, function () { return state; }, resolve); });
    };
    EditTask.prototype.componentDidMount = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var err_1;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!this.props.searchMode) return [3 /*break*/, 8];
                        this.setStatePromised({ isSearching: true });
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 5, 6, 8]);
                        return [4 /*yield*/, this.searchResponse.query()];
                    case 2:
                        _a.sent();
                        if (!(this.state.searchMarkedIds && this.state.searchMarkedIds.length === 0)) return [3 /*break*/, 4];
                        return [4 /*yield*/, this.updateSearchResult(this.state.searchMarkedIds)];
                    case 3:
                        _a.sent();
                        _a.label = 4;
                    case 4: return [3 /*break*/, 8];
                    case 5:
                        err_1 = _a.sent();
                        Object(_utils_utils__WEBPACK_IMPORTED_MODULE_8__["showError"])(err_1);
                        return [3 /*break*/, 8];
                    case 6: return [4 /*yield*/, this.setStatePromised({ isSearching: false })];
                    case 7:
                        _a.sent();
                        return [7 /*endfinally*/];
                    case 8: return [4 /*yield*/, fetch(_apis_configs__WEBPACK_IMPORTED_MODULE_19__["TemplatesFileId"]).then(function (resp) { return resp.json(); }).then(function (data) {
                            _this.setStatePromised({ templates: data });
                            var templateFile = _this.state.task.templateFile;
                            if (templateFile && templateFile.fileId) {
                                _this.updateTemplateView(templateFile);
                            }
                        })];
                    case 9:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    EditTask.prototype.updateSearchMarkedIds = function (searchMarkedIds) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var setStatePromise;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        setStatePromise = this.setStatePromised({ task: null, searchMarkedIds: searchMarkedIds, previewTaskContent: null });
                        if (!!this.searchResponse.result) return [3 /*break*/, 3];
                        return [4 /*yield*/, this.searchResponse.promise];
                    case 1:
                        _a.sent();
                        // Refresh searchMarkedIds now as user might have clicked around while waiting for
                        // tasks to load...
                        return [4 /*yield*/, setStatePromise];
                    case 2:
                        // Refresh searchMarkedIds now as user might have clicked around while waiting for
                        // tasks to load...
                        _a.sent(); // So we know state has been reflected...
                        searchMarkedIds = this.state.searchMarkedIds;
                        _a.label = 3;
                    case 3: return [4 /*yield*/, this.updateSearchResult(searchMarkedIds)];
                    case 4:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    EditTask.prototype.updateSearchResult = function (searchMarkedIds) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var allTasksForSubject, searchResult;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.searchResponse.query()];
                    case 1:
                        allTasksForSubject = _a.sent();
                        searchResult = allTasksForSubject.filter(function (t) {
                            return searchMarkedIds.every(function (id) {
                                return t.knowledgeRequirements.some(function (kr) { return kr.id === id; }) ||
                                    t.abilities.some(function (a) { return a.id === id; }) ||
                                    t.centralContent.some(function (c) { return c.id === id; });
                            });
                        });
                        this.setStatePromised({
                            searchResult: searchResult
                        });
                        return [2 /*return*/];
                }
            });
        });
    };
    EditTask.prototype.onMarkChanged = function (id, isMarked) {
        var searchMode = this.props.searchMode;
        if (searchMode) {
            var searchMarkedIds = this.state.searchMarkedIds;
            this.updateSearchMarkedIds(isMarked ?
                searchMarkedIds.concat(id) :
                searchMarkedIds.filter(function (x) { return x !== id; })).catch(_utils_utils__WEBPACK_IMPORTED_MODULE_8__["showError"]);
            return;
        }
        this.updateLink(id, isMarked);
    };
    EditTask.prototype.updateLink = function (id, linkOrUnlink) {
        var course = this.props.course;
        var task = this.state.task;
        // One of the following three will be found:
        var ability = course.abilities.find(function (a) { return a.id === id; });
        var knowledgeRequirement = course.knowledgeRequirements.find(function (r) { return r.id === id; });
        var centralContent = course.centralContent.find(function (cc) { return cc.id === id; });
        var _a = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](ability ?
            ["abilities", ability] :
            knowledgeRequirement ?
                ["knowledgeRequirements", knowledgeRequirement] :
                centralContent ?
                    ["centralContent", centralContent] :
                    [null, null], 2), collectionProp = _a[0], item = _a[1];
        if (!collectionProp) {
            console.error("Could not find marked id " + id);
            return;
        }
        var updatedCollection = task[collectionProp].slice();
        var currentPos = updatedCollection.findIndex(function (doc) { return doc.id === id; });
        if (linkOrUnlink) {
            if (currentPos < 0) {
                updatedCollection.push(item);
            }
        }
        else {
            if (currentPos >= 0) {
                updatedCollection.splice(currentPos, 1);
            }
        }
        var updatedTask = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, task);
        updatedTask[collectionProp] = updatedCollection;
        // Clear migratedTexts from task.
        // First deep clone:
        if (task && task.migratedTexts) {
            updatedTask.migratedTexts = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, task.migratedTexts);
            if (task.migratedTexts[collectionProp]) {
                updatedTask.migratedTexts[collectionProp] = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, task.migratedTexts[collectionProp]);
                // Delete the id within the deep clone:
                delete updatedTask.migratedTexts[collectionProp][id];
            }
        }
        this.setStatePromised({
            task: updatedTask
        });
    };
    EditTask.prototype.updateTemplateView = function (templateFile) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var drive, tFileId_1, file, tFile;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        drive = new _apis_google_drive__WEBPACK_IMPORTED_MODULE_18__["GoogleDrive"]();
                        if (!(templateFile && templateFile.fileId.startsWith('t:'))) return [3 /*break*/, 2];
                        tFileId_1 = templateFile.fileId.replace('t:', '');
                        return [4 /*yield*/, drive.getFile(tFileId_1)];
                    case 1:
                        file = _a.sent();
                        if (file) {
                            file.fileId = 't:' + file.fileId;
                            tFile = this.state.templates.filter(function (tpl) { return tpl.fileId == tFileId_1; })[0];
                            file.name = tFile ? tFile.title : file.name;
                            templateFile = { fileId: file.fileId, name: file.name, mimeType: file.mimeType, modifiedTime: Number(file.modiifiedTime), url: file.url, iconUrl: file.thumbnailUrl };
                        }
                        else {
                            templateFile = null;
                        }
                        _a.label = 2;
                    case 2:
                        this.updateTaskOrCustomization("templateFile", { $set: templateFile });
                        return [2 /*return*/];
                }
            });
        });
    };
    EditTask.prototype.save = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, task, taskCustomization, writeAccess;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = this.state, task = _a.task, taskCustomization = _a.taskCustomization;
                        writeAccess = Object(_access_control__WEBPACK_IMPORTED_MODULE_5__["hasWriteAccess"])(_globals_KED_env__WEBPACK_IMPORTED_MODULE_10__["default"].currentUser, task);
                        if (!writeAccess) return [3 /*break*/, 5];
                        if (!task.url && !task.content)
                            throw new Error(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_8__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppgiften m\u00E5ste antingen ha en URL eller ett inneh\u00E5ll"], ["Uppgiften m\u00E5ste antingen ha en URL eller ett inneh\u00E5ll"]))));
                        if (task.url && !valid_url__WEBPACK_IMPORTED_MODULE_7___default.a.isUri(task.url))
                            throw new Error(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_8__["L"])(templateObject_6 || (templateObject_6 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Angiven URL '", "' \u00E4r ogiltig. Den ska b\u00F6rja med http: eller https:"], ["Angiven URL '", "' \u00E4r ogiltig. Den ska b\u00F6rja med http: eller https:"])), task.url));
                        if (!(this.props.task && this.props.task.id !== task.id)) return [3 /*break*/, 2];
                        // Replace existing task with copy
                        return [4 /*yield*/, this.props.onReplace(this.props.task.id, task)];
                    case 1:
                        // Replace existing task with copy
                        _b.sent();
                        return [3 /*break*/, 4];
                    case 2: 
                    // Update existing task
                    return [4 /*yield*/, this.props.onSave(task, null)];
                    case 3:
                        // Update existing task
                        _b.sent();
                        _b.label = 4;
                    case 4: return [3 /*break*/, 9];
                    case 5:
                        if (!this.props.searchMode) return [3 /*break*/, 7];
                        return [4 /*yield*/, this.props.onSave(task, taskCustomization)];
                    case 6:
                        _b.sent();
                        return [3 /*break*/, 9];
                    case 7:
                        if (this.props.course.isTemplate && task.$meta === 'add')
                            throw new Error(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_8__["L"])(templateObject_7 || (templateObject_7 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Du saknar beh\u00F6righet f\u00F6r att spara nya versioner av uppgifter i kursmallen"], ["Du saknar beh\u00F6righet f\u00F6r att spara nya versioner av uppgifter i kursmallen"]))));
                        return [4 /*yield*/, this.props.onSaveCustomization(taskCustomization)];
                    case 8:
                        _b.sent();
                        _b.label = 9;
                    case 9: return [2 /*return*/];
                }
            });
        });
    };
    EditTask.prototype.copyTask = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var taskCopy;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        taskCopy = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.state.task, (this.state.taskCustomization || {}), { id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_2__["createUUID"])(), acl: this.props.course.isTemplate ? [
                                "role:USER:R" // (OK to keep but this check might become unnescesary if we totally remove the possibility to edit templates) Template tasks should not be possible to modify. (An ADMIN could belong to a school! Other non-admins at that school should not be able to edit it)
                            ] : [
                                "role:USER:R",
                                "schoolRole:" + _globals_KED_env__WEBPACK_IMPORTED_MODULE_10__["default"].currentUser.school + "/EMPLOYEE:S"
                            ], school: this.props.course.school });
                        taskCopy.$meta = 'add';
                        return [4 /*yield*/, this.setStatePromised({
                                task: taskCopy,
                                title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_8__["L"])(templateObject_8 || (templateObject_8 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Redigera kopierad uppgift till \"", "\""], ["Redigera kopierad uppgift till \"", "\""])), this.props.module.name),
                                taskCustomization: undefined
                            })];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    EditTask.prototype.getTaskProp = function (taskProp) {
        var _a = this.state, task = _a.task, taskCustomization = _a.taskCustomization;
        var customization = taskCustomization && taskCustomization[taskProp];
        return customization !== undefined ?
            customization :
            task[taskProp];
    };
    EditTask.prototype.updateTaskOrCustomization = function (taskProp, updates) {
        var _a = this.state, task = _a.task, taskCustomization = _a.taskCustomization;
        var writeAccess = task && Object(_access_control__WEBPACK_IMPORTED_MODULE_5__["hasWriteAccess"])(_globals_KED_env__WEBPACK_IMPORTED_MODULE_10__["default"].currentUser, task);
        if (writeAccess && (!taskCustomization || taskCustomization[taskProp] === undefined)) {
            var newTask = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, task);
            newTask[taskProp] = react_addons_update__WEBPACK_IMPORTED_MODULE_4___default()(task[taskProp], updates);
            this.setStatePromised({ task: newTask });
        }
        else {
            var newCustomization = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, taskCustomization);
            newCustomization[taskProp] = react_addons_update__WEBPACK_IMPORTED_MODULE_4___default()(newCustomization[taskProp] || task[taskProp], updates);
            this.setStatePromised({ taskCustomization: newCustomization });
        }
    };
    EditTask.prototype.render = function () {
        var _a = this.props, course = _a.course, module = _a.module, onCancel = _a.onCancel, onDelete = _a.onDelete, idsNotCoveredByAnyTask = _a.idsNotCoveredByAnyTask, searchMode = _a.searchMode;
        var _b = this.state, task = _b.task, taskCustomization = _b.taskCustomization, title = _b.title, searchResult = _b.searchResult, searchMarkedIds = _b.searchMarkedIds, isSearching = _b.isSearching, templates = _b.templates;
        var markedIds = searchMode ?
            searchMarkedIds :
            task.centralContent.map(function (x) { return x.id; })
                .concat(task.abilities.map(function (x) { return x.id; }))
                .concat(task.knowledgeRequirements.map(function (x) { return x.id; }));
        var writeAccess = task && Object(_access_control__WEBPACK_IMPORTED_MODULE_5__["hasWriteAccess"])(_globals_KED_env__WEBPACK_IMPORTED_MODULE_10__["default"].currentUser, task);
        var taskUrlValid = task && valid_url__WEBPACK_IMPORTED_MODULE_7___default.a.isUri(task.url);
        var features = this.features;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h1", null, title),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-layout sv-skip-spacer sv-column-6" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet sv-skip-spacer" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "ked_boxed" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h3", null, searchMode ?
                            "Filtrera p kunskapskrav" : writeAccess ?
                            "Vlj kunskapskrav" :
                            "Kunskapskrav"),
                        searchMode ?
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, "Markera de kunskapskrav som uppgiften m\u00E5ste t\u00E4cka.") : writeAccess &&
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, "Markera de kunskapskrav som din uppgift t\u00E4cker."),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_sub_components_knowledge_matrix__WEBPACK_IMPORTED_MODULE_3__["KnowledgeMatrix"], { knowledgeRequirements: course.knowledgeRequirements, markedIds: markedIds, idsToMarkNotOk: idsNotCoveredByAnyTask, markMode: searchMode || writeAccess, migratedIds: task && task.migratedTexts && task.migratedTexts.knowledgeRequirements, onMarkChanged: this.onMarkChanged.bind(this) }))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_sub_components_select_related_docs__WEBPACK_IMPORTED_MODULE_6__["SelectRelatedDocs"], { options: course.abilities, title: writeAccess || searchMode ? "Vlj frmgor" : "Frmgor", markedIds: markedIds, markMode: writeAccess || searchMode, migratedIds: task && task.migratedTexts && task.migratedTexts.abilities, onMarkChanged: this.onMarkChanged.bind(this) })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_sub_components_select_related_docs__WEBPACK_IMPORTED_MODULE_6__["SelectRelatedDocs"], { options: course.centralContent, title: writeAccess || searchMode ? "Vlj centralt innehll" : "Centralt innehll", markedIds: markedIds, markMode: writeAccess || searchMode, migratedIds: task && task.migratedTexts && task.migratedTexts.centralContent, onMarkChanged: this.onMarkChanged.bind(this) }))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-layout sv-column-6" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet sv-skip-spacer" },
                    isSearching && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_sub_components_spinner__WEBPACK_IMPORTED_MODULE_11__["Spinner"], null),
                        " Laddar uppgifter..."),
                    searchResult ?
                        /*
                        *
                        * Search Results Fragent
                        *
                        *
                        */
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_search_results__WEBPACK_IMPORTED_MODULE_13__["SearchResults"], { searchMarkedIds: searchMarkedIds, searchResult: searchResult, task: task, writeAccess: writeAccess, taskCustomization: taskCustomization, editTask: this }),
                            this.state.previewTaskContent ?
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { dangerouslySetInnerHTML: { __html: this.state.previewTaskContent } })
                                : task && react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_previewable_task_fields__WEBPACK_IMPORTED_MODULE_17__["PreviewableTaskFields"], { writeAccess: writeAccess, task: task, taskCustomization: taskCustomization, editTask: this }),
                            task && react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_task_status_fragment__WEBPACK_IMPORTED_MODULE_15__["TaskStatusFragment"], { task: task })) :
                        /*
                        *
                        * Edit Tasks Fragment
                        *
                        *
                        */
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                            task && react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_basic_editable_task_fields__WEBPACK_IMPORTED_MODULE_14__["BasicEditableTaskFields"], { task: task, course: course, writeAccess: writeAccess, features: features, editTask: this, templates: templates }),
                            task && react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_previewable_task_fields__WEBPACK_IMPORTED_MODULE_17__["PreviewableTaskFields"], { writeAccess: writeAccess, task: task, taskCustomization: taskCustomization, editTask: this }),
                            task && react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_task_status_fragment__WEBPACK_IMPORTED_MODULE_15__["TaskStatusFragment"], { task: task }))),
                task && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_save_or_cancel_buttons__WEBPACK_IMPORTED_MODULE_16__["SaveOrCancelButtons"], { writeAccess: writeAccess, editTask: this }))));
    };
    return EditTask;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8;


/***/ }),

/***/ "./src/components/course-builder/modal-pages/edit-task/index.ts":
/*!**********************************************************************!*\
  !*** ./src/components/course-builder/modal-pages/edit-task/index.ts ***!
  \**********************************************************************/
/*! exports provided: EditTask */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _edit_task__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./edit-task */ "./src/components/course-builder/modal-pages/edit-task/edit-task.tsx");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "EditTask", function() { return _edit_task__WEBPACK_IMPORTED_MODULE_0__["EditTask"]; });




/***/ }),

/***/ "./src/components/course-builder/modal-pages/edit-task/previewable-task-fields.tsx":
/*!*****************************************************************************************!*\
  !*** ./src/components/course-builder/modal-pages/edit-task/previewable-task-fields.tsx ***!
  \*****************************************************************************************/
/*! exports provided: PreviewableTaskFields */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PreviewableTaskFields", function() { return PreviewableTaskFields; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _sub_components_editable_resource_list__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../sub-components/editable-resource-list */ "./src/components/course-builder/sub-components/editable-resource-list.tsx");



function PreviewableTaskFields(_a) {
    var writeAccess = _a.writeAccess, task = _a.task, taskCustomization = _a.taskCustomization, editTask = _a.editTask;
    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h3", null, "Uppgiftens l\u00E4randem\u00E5l"),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("textarea", { className: "inputTextBox learning-goal-box", disabled: !writeAccess, value: task.learningGoal, onChange: function (ev) {
                        var newTask = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, task);
                        newTask.learningGoal = ev.target.value;
                        editTask.setStatePromised({ task: newTask });
                    } }))),
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null),
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
            taskCustomization && taskCustomization.resources ?
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h3", null, "Resurser f\u00F6r uppgiften (modifierad f\u00F6r denna kursinstans)") :
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h3", null, "Resurser kopplade till uppgiften"),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_sub_components_editable_resource_list__WEBPACK_IMPORTED_MODULE_2__["EditableResourceList"], { resources: (taskCustomization && taskCustomization.resources) || task.resources, host: editTask.props.host, onUpdate: function (resourceUpdates) {
                    editTask.updateTaskOrCustomization("resources", resourceUpdates);
                } })));
}


/***/ }),

/***/ "./src/components/course-builder/modal-pages/edit-task/save-or-cancel-buttons.tsx":
/*!****************************************************************************************!*\
  !*** ./src/components/course-builder/modal-pages/edit-task/save-or-cancel-buttons.tsx ***!
  \****************************************************************************************/
/*! exports provided: SaveOrCancelButtons */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SaveOrCancelButtons", function() { return SaveOrCancelButtons; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");


function SaveOrCancelButtons(_a) {
    var writeAccess = _a.writeAccess, editTask = _a.editTask;
    return react__WEBPACK_IMPORTED_MODULE_0__["createElement"](react__WEBPACK_IMPORTED_MODULE_0__["Fragment"], null,
        !!editTask.props.onDelete && react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "btn btn-warning btn-large pull-right", onClick: function () { return editTask.props.onDelete(); } }, "Ta bort fr\u00E5n kursmodul"),
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "pull-right" }, "\u00A0"),
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "btn btn-warning btn-large pull-right", onClick: function () { return editTask.props.onCancel(); } }, "Avbryt"),
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "btn btn-large", onClick: function () { return editTask.save().catch(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["showError"]); } }, "Spara"),
        !writeAccess && react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "btn btn-large", onClick: function () { return editTask.copyTask().catch(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["showError"]); } }, "Skapa kopia av den h\u00E4r uppgiften"));
}


/***/ }),

/***/ "./src/components/course-builder/modal-pages/edit-task/search-results.tsx":
/*!********************************************************************************!*\
  !*** ./src/components/course-builder/modal-pages/edit-task/search-results.tsx ***!
  \********************************************************************************/
/*! exports provided: SearchResults */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SearchResults", function() { return SearchResults; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-dom */ "react-dom");
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils */ "./src/components/course-builder/utils.ts");



function SearchResults(_a) {
    var searchMarkedIds = _a.searchMarkedIds, searchResult = _a.searchResult, task = _a.task, editTask = _a.editTask, writeAccess = _a.writeAccess, taskCustomization = _a.taskCustomization;
    return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "task-search-result" + (!editTask.state.task && !editTask.state.previewTaskContent ? " fixed" : "") },
        searchMarkedIds.length === 0 ?
            react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("h2", null, "Samtliga uppgifter f\u00F6r kursen") :
            react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("h2", null, "Uppgifter som t\u00E4cker valda filter"),
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("table", null,
            react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("tbody", null, searchResult
                .filter(task ?
                function (foundTask) { return foundTask.id === task.id; } :
                function () { return true; })
                .map(function (foundTask) { return react__WEBPACK_IMPORTED_MODULE_0__["createElement"](react__WEBPACK_IMPORTED_MODULE_0__["Fragment"], { key: foundTask.id },
                react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("tr", null,
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("td", null,
                        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { tabIndex: 1, className: "checkBox" + (task && task.id === foundTask.id ? " checked" : ""), onClick: function () { return toggleChooseTask(foundTask); } })),
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("td", null, foundTask.content ?
                        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("a", { href: "#", onClick: function (ev) {
                                toggleChooseTask(foundTask);
                                ev.preventDefault();
                                ev.stopPropagation();
                            } }, foundTask.name) :
                        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("a", { href: foundTask.url, target: "_blank" }, foundTask.name)),
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("td", null, Object(_utils__WEBPACK_IMPORTED_MODULE_2__["shortPersonNameFormat"])(foundTask.modifiedBy.name)),
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("td", null, foundTask.school || "Standard"),
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("td", null, Object(_utils__WEBPACK_IMPORTED_MODULE_2__["shortDateFormat"])(foundTask.modifiedDate)))); }))),
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("br", null),
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("hr", null));
    function toggleChooseTask(foundTask) {
        if (task && task.id === foundTask.id) {
            editTask.updateSearchMarkedIds(searchMarkedIds);
        }
        else {
            Object(react_dom__WEBPACK_IMPORTED_MODULE_1__["findDOMNode"])(editTask).parentElement.scrollTop = 0;
            editTask.setStatePromised({ task: foundTask, previewTaskContent: null });
        }
    }
}


/***/ }),

/***/ "./src/components/course-builder/modal-pages/edit-task/task-content-fragment.tsx":
/*!***************************************************************************************!*\
  !*** ./src/components/course-builder/modal-pages/edit-task/task-content-fragment.tsx ***!
  \***************************************************************************************/
/*! exports provided: TaskContentFragment */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskContentFragment", function() { return TaskContentFragment; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_wysiwyg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utility-components/wysiwyg */ "./src/components/utility-components/wysiwyg/index.tsx");
/* harmony import */ var _utility_components_wysiwyg_actions_sv__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utility-components/wysiwyg/actions-sv */ "./src/components/utility-components/wysiwyg/actions-sv.ts");




function TaskContentFragment(_a) {
    var writeAccess = _a.writeAccess, task = _a.task, editTask = _a.editTask;
    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_wysiwyg__WEBPACK_IMPORTED_MODULE_2__["Wysiwyg"], { actions: [
            "bold",
            "italic",
            "underline",
            "strikethrough",
            "heading2",
            "heading3",
            "olist",
            "ulist",
            "outdent",
            "indent",
            "line",
            "link",
            "image"
        ], defaultActions: _utility_components_wysiwyg_actions_sv__WEBPACK_IMPORTED_MODULE_3__["default"], readOnly: !writeAccess, html: task.content, onChange: function (html) {
            var newTask = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, task);
            newTask.content = html;
            editTask.setState({ task: newTask });
        } });
}


/***/ }),

/***/ "./src/components/course-builder/modal-pages/edit-task/task-migration-box.tsx":
/*!************************************************************************************!*\
  !*** ./src/components/course-builder/modal-pages/edit-task/task-migration-box.tsx ***!
  \************************************************************************************/
/*! exports provided: TaskMigrationBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskMigrationBox", function() { return TaskMigrationBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");



var TaskMigrationBox = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](TaskMigrationBox, _super);
    function TaskMigrationBox(props) {
        return _super.call(this, props) || this;
    }
    TaskMigrationBox.prototype.render = function () {
        var _a = this.props, task = _a.task, course = _a.course, updateLink = _a.updateLink;
        if (!task.migratedTexts)
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null, "\u00A0");
        var _b = task.migratedTexts, abilities = _b.abilities, centralContent = _b.centralContent, knowledgeRequirements = _b.knowledgeRequirements;
        var krs = Object.keys(knowledgeRequirements || {}).map(function (id) { return (tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, course.knowledgeRequirements.find(function (t) { return t.id === id; }), knowledgeRequirements[id])); }); //.filter(({name}) => !!name);
        var krA = { title: "Uppdaterat kunskapskrav fr betyget A", type: "knowledgeRequirements", items: krs.filter(function (kr) { return kr.gradeStep === 'A'; }) };
        var krC = { title: "Uppdaterat Kunskapskrav fr betyget C", type: "knowledgeRequirements", items: krs.filter(function (kr) { return kr.gradeStep === 'C'; }) };
        var krE = { title: "Uppdaterat kunskapskrav fr betyget E", type: "knowledgeRequirements", items: krs.filter(function (kr) { return kr.gradeStep === 'E'; }) };
        var abs = { title: "Uppdaterade frmgor", type: "abilities", items: Object.keys(abilities || {}).map(function (id) { return (tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, course.abilities.find(function (t) { return t.id === id; }), abilities[id])); }) }; //.filter(({name}) => !!name)};
        var ccs = { title: "Uppdaterat centralt innehll", type: "centralContent", items: Object.keys(centralContent || {}).map(function (id) { return (tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, course.centralContent.find(function (cc) { return cc.id == id; }), centralContent[id])); }) }; //.filter(({name}) => !!name)};
        var tablesToShow = [krA, krC, krE, ccs, abs].filter(function (boxInfo) { return boxInfo.items.length > 0; });
        if (tablesToShow.length === 0)
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null, "\u00A0");
        return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_2__["OpenCloseBox"], { className: "larger", title: react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "warningFlag" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-exclamation-triangle", "aria-hidden": "true" })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, "Uppdaterade formuleringar fr\u00E5n Skolverket")) }, tablesToShow.map(function (_a) {
            var title = _a.title, type = _a.type, items = _a.items;
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: title },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h5", null, title),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("table", null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("thead", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { style: { width: "40%" } }, "Ursprunglig formulering"),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { style: { width: "40%" } }, "Skolverkets nya formulering"),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "T\u00E4cker uppgiften den nya formuleringen?"))),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tbody", null, items.map(function (item) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", { key: item.id },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { dangerouslySetInnerHTML: { __html: item.oldText } }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { dangerouslySetInnerHTML: { __html: item.name } }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { onClick: function () { return updateLink(item.id, true); } }, "Ja - beh\u00E5ll kopplingen"),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { onClick: function () { return updateLink(item.id, false); } }, "Nej - ta bort kopplingen"))); }))));
        })));
    };
    return TaskMigrationBox;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/course-builder/modal-pages/edit-task/task-status-fragment.tsx":
/*!**************************************************************************************!*\
  !*** ./src/components/course-builder/modal-pages/edit-task/task-status-fragment.tsx ***!
  \**************************************************************************************/
/*! exports provided: TaskStatusFragment */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskStatusFragment", function() { return TaskStatusFragment; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils */ "./src/components/course-builder/utils.ts");


function TaskStatusFragment(_a) {
    var task = _a.task;
    return react__WEBPACK_IMPORTED_MODULE_0__["createElement"](react__WEBPACK_IMPORTED_MODULE_0__["Fragment"], null,
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("h3", null, "Uppgiftens status"),
        task.createdBy && task.createdDate && react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("p", null,
            "Uppgiften skapades ",
            Object(_utils__WEBPACK_IMPORTED_MODULE_1__["dtFormat"])(task.createdDate),
            " av ",
            react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("strong", null, task.createdBy.name),
            "."),
        task.modifiedBy && task.modifiedDate && react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("p", null,
            "Uppgiften redigerades senast ",
            Object(_utils__WEBPACK_IMPORTED_MODULE_1__["dtFormat"])(task.modifiedDate),
            " av ",
            react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("strong", null, task.modifiedBy.name),
            "."));
}


/***/ }),

/***/ "./src/components/course-builder/modal-pages/edit-workflow-link.tsx":
/*!**************************************************************************!*\
  !*** ./src/components/course-builder/modal-pages/edit-workflow-link.tsx ***!
  \**************************************************************************/
/*! exports provided: EditWorkflowLink */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditWorkflowLink", function() { return EditWorkflowLink; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var valid_url__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! valid-url */ "./node_modules/valid-url/index.js");
/* harmony import */ var valid_url__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(valid_url__WEBPACK_IMPORTED_MODULE_3__);




var EditWorkflowLink = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](EditWorkflowLink, _super);
    function EditWorkflowLink(props) {
        var _this = _super.call(this, props) || this;
        _this.state = { url: _this.props.url || '' };
        return _this;
    }
    EditWorkflowLink.prototype.save = function () {
        var url = this.state.url;
        if (!valid_url__WEBPACK_IMPORTED_MODULE_3___default.a.isUri(url))
            throw new Error(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Angiven URL '", "' \u00E4r ogiltig. Ska b\u00F6rja med http: eller https:"], ["Angiven URL '", "' \u00E4r ogiltig. Ska b\u00F6rja med http: eller https:"])), url));
        this.props.onSave(url);
    };
    EditWorkflowLink.prototype.render = function () {
        var _this = this;
        var _a = this.props, onSave = _a.onSave, onDelete = _a.onDelete;
        var state = this.state;
        var isValidUrl = valid_url__WEBPACK_IMPORTED_MODULE_3___default.a.isUri(this.state.url);
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet sv-skip-spacer" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null, "Koppla en arbetsg\u00E5ng till kursen"),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, "Det g\u00E5r bara att l\u00E4gga in en arbetsg\u00E5ng per kurs."),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" }, "L\u00E4nk:"),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top " },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { type: "text", tabIndex: 1, size: 50, value: state.url, onChange: function (ev) { return _this.setState({ url: ev.target.value }); } })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top spaced" })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null)),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet", id: "svid12_492422d515badf36646e4ff1" },
                onDelete && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { tabIndex: 2, className: "btn btn-warning btn-large pull-right", onClick: function () { return onDelete(); } }, "Ta bort arbetsg\u00E5ng"),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { tabIndex: 1, className: "btn btn-large" + (isValidUrl ? "" : " btn-inactive"), onClick: isValidUrl && (function () { return onSave(state.url); }) }, "Spara")));
    };
    return EditWorkflowLink;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

var templateObject_1;


/***/ }),

/***/ "./src/components/course-builder/schools/edit-school.tsx":
/*!***************************************************************!*\
  !*** ./src/components/course-builder/schools/edit-school.tsx ***!
  \***************************************************************/
/*! exports provided: EditSchool, EditSchoolNoBanner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditSchool", function() { return EditSchool; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditSchoolNoBanner", function() { return EditSchoolNoBanner; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _courses_course_banner__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../courses/course-banner */ "./src/components/course-builder/courses/course-banner.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/es/index.js");







var EditSchool = function (props) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { style: { outline: 0 } },
    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_courses_course_banner__WEBPACK_IMPORTED_MODULE_2__["CourseBanner"], { title: "Skolor", activePage: "schools", callbacks: { schools: function () { return location.hash = "#/schools"; } }, routes: { feedback: props.feedbackUrl } }),
    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](EditSchoolNoBanner, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, props))); };
var EditSchoolNoBanner = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](EditSchoolNoBanner, _super);
    function EditSchoolNoBanner(props) {
        var _this = _super.call(this, props) || this;
        _this.state = null;
        return _this;
    }
    EditSchoolNoBanner.prototype.componentDidMount = function () {
        this.load().catch(function (err) { return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["showError"])(err); });
    };
    EditSchoolNoBanner.prototype.load = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var id, school;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!this.props.id) return [3 /*break*/, 2];
                        id = this.props.id;
                        return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__["default"].kedBackendClient.get("schools", id)];
                    case 1:
                        school = _a.sent();
                        this.origSchool = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, school);
                        this.setState(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, school));
                        return [3 /*break*/, 3];
                    case 2:
                        // No id, create new instead.
                        this.setState({
                            id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["createUUID"])(),
                            officialBranchId: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["createUUID"])(),
                            isGymnasium: this.props.type === 'gymnasium',
                            isPrimarySchool: this.props.type === 'primary'
                        });
                        _a.label = 3;
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    EditSchoolNoBanner.prototype.save = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var r, school;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        r = new kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["BatchRunner"]();
                        school = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.state, { tags: (this.state.tags || [])
                                .filter(function (tag) { return ["primary", "gymnasium"].indexOf(tag) < 0; }) });
                        if (school.isPrimarySchool)
                            school.tags.push("primary");
                        if (school.isGymnasium)
                            school.tags.push("gymnasium");
                        if (!(school.isGymnasium || school.isPrimarySchool)) {
                            throw new Error(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Skolan m\u00E5ste antingen vara gymnasium eller grundskola"], ["Skolan m\u00E5ste antingen vara gymnasium eller grundskola"]))));
                        }
                        if (!this.origSchool) {
                            school.acl = ["role:USER:R"];
                            school.acl.push(new kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["DocumentAccess"]("schoolRole", school.name + "/EMPLOYEE", "W").toString());
                            r.add("schools", school);
                            this.addSchoolBranch(school, r);
                        }
                        else if (this.origSchool.name !== this.state.name) {
                            throw new Error("Skolans namn fr inte ndras. Kontakta Vemendo AB.");
                        }
                        else {
                            if (!school.officialBranchId) {
                                school.officialBranchId = Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["createUUID"])();
                                this.addSchoolBranch(school, r);
                            }
                            r.put("schools", school);
                        }
                        return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__["default"].kedBackendClient.batch(r.mutationRequests)];
                    case 1:
                        _a.sent();
                        location.hash = "#/schools";
                        return [2 /*return*/];
                }
            });
        });
    };
    EditSchoolNoBanner.prototype.addSchoolBranch = function (school, r) {
        var branch = {
            id: school.officialBranchId,
            name: school.name,
            schoolId: school.id,
            acl: [
                "role:USER:R",
                new kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["DocumentAccess"]("schoolRole", school.name + "/EMPLOYEE", "W").toString()
            ]
        };
        r.add("branches", branch);
    };
    EditSchoolNoBanner.prototype.deleteSchool = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var schoolBranch, br_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!(prompt(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4r du s\u00E4ker p\u00E5 att ta bort skolan \"", "\"? Skriv skolans exakta namn f\u00F6r att bekr\u00E4fta"], ["\u00C4r du s\u00E4ker p\u00E5 att ta bort skolan \"", "\"? Skriv skolans exakta namn f\u00F6r att bekr\u00E4fta"])), this.state.name)) === this.state.name)) return [3 /*break*/, 3];
                        return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__["default"].kedBackendClient.list("branches", {
                                ids: [this.state.officialBranchId],
                                include: "approvedChildren",
                                flags: ["includeIdsOnly"]
                            })];
                    case 1:
                        schoolBranch = _a.sent();
                        br_1 = new kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["BatchRunner"]();
                        br_1.delete("schools", this.state.id);
                        schoolBranch[0].approvedChildren.forEach(function (_a) {
                            var id = _a.id;
                            br_1.delete("branches", id);
                        });
                        br_1.delete("branches", this.state.officialBranchId);
                        return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__["default"].kedBackendClient.batch(br_1.mutationRequests)];
                    case 2:
                        _a.sent();
                        location.hash = "#/schools";
                        return [3 /*break*/, 4];
                    case 3:
                        alert("Skolan togs inte bort eftersom det namn du angav inte stmmer.");
                        _a.label = 4;
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    EditSchoolNoBanner.prototype.render = function () {
        var _this = this;
        var _a = this.props, title = _a.title, id = _a.id;
        var editExisting = !!id;
        var school = this.state;
        var origSchool = this.origSchool;
        var isAdmin = _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__["default"].currentUser.roles.some(function (role) { return role === "ADMIN"; });
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-row sv-layout" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "pagecontent sv-layout sv-spacer-20pxvt sv-skip-spacer" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null, title),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" }, "Namn:"),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { type: "text", autoFocus: !school || !school.name, disabled: !isAdmin || editExisting, tabIndex: 1, size: 50, value: school ? school.name : "", onChange: function (ev) { return _this.setState({ name: ev.target.value }); } })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top spaced" })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" }, "Visningsnamn:"),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { type: "text", autoFocus: school && !school.displayName, disabled: !isAdmin, tabIndex: 1, size: 50, value: school ? school.displayName : "", onChange: function (ev) { return _this.setState({ displayName: ev.target.value }); } })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top spaced" })),
                school && school.isGymnasium ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" }, "EDS namn (gymnasium):"),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { type: "text", disabled: !isAdmin, tabIndex: 1, size: 50, value: school ? school.edsSchoolNameGymn : "", onChange: function (ev) { return _this.setState({ edsSchoolNameGymn: ev.target.value }); } })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top spaced" })) : null,
                school && school.isPrimarySchool ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" }, "EDS namn (grundskola):"),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { type: "text", disabled: !isAdmin, tabIndex: 1, size: 50, value: school ? school.edsSchoolNamePrim : "", onChange: function (ev) { return _this.setState({ edsSchoolNamePrim: ev.target.value }); } })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top spaced" })) : null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" }, "Typ:"),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { type: "checkbox", name: "schoolTypePrimary", disabled: !isAdmin, checked: school && school.isPrimarySchool, tabIndex: 1, value: "primary", onChange: function (ev) { return _this.setState({ isPrimarySchool: ev.target.checked }); } }),
                        "\u00A0Grundskola"),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top spaced" })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" }),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { type: "checkbox", name: "schoolTypeGymnasium", disabled: !isAdmin, checked: school && school.isGymnasium, tabIndex: 1, value: "gymnasium", onChange: function (ev) { return _this.setState({ isGymnasium: ev.target.checked }); } }),
                        "\u00A0Gymnasium"),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top spaced" })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null),
                isAdmin && editExisting && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { tabIndex: 2, className: "btn btn-warning btn-large pull-right", onClick: function () {
                        return _this.deleteSchool().catch(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["showError"]);
                    } }, "Ta bort skola"),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "pull-right" }, "\u00A0"),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_6__["Link"], { className: "btn btn-warning btn-large pull-right", to: "/schools" }, "Avbryt"),
                isAdmin && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { tabIndex: 1, className: "btn btn-large", onClick: function () {
                        if (origSchool && origSchool.name !== school.name) {
                            if (!confirm(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4r du s\u00E4ker p\u00E5 att du vill d\u00F6pa om skolan? Detta p\u00E5verkar portalens funktion f\u00F6r l\u00E4rare och elever som tillh\u00F6r skolan. Namnet m\u00E5ste st\u00E4mma exakt \u00F6verens med namngivningen av skolan p\u00E5 anv\u00E4ndarobjekten.\n\nDet som h\u00E4nder annars \u00E4r att elever och l\u00E4rare p\u00E5 skolan inte l\u00E4ngre hittar n\u00E5gra kurser.\n\nBlir det fel kan du dock alltid bara d\u00F6pa tillbaka skolans namn."], ["\u00C4r du s\u00E4ker p\u00E5 att du vill d\u00F6pa om skolan? Detta p\u00E5verkar portalens funktion f\u00F6r l\u00E4rare och elever som tillh\u00F6r skolan. Namnet m\u00E5ste st\u00E4mma exakt \u00F6verens med namngivningen av skolan p\u00E5 anv\u00E4ndarobjekten.\n\nDet som h\u00E4nder annars \u00E4r att elever och l\u00E4rare p\u00E5 skolan inte l\u00E4ngre hittar n\u00E5gra kurser.\n\nBlir det fel kan du dock alltid bara d\u00F6pa tillbaka skolans namn."]))))) {
                                return;
                            }
                        }
                        _this.save().catch(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["showError"]);
                    } }, "Spara")));
    };
    return EditSchoolNoBanner;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/components/course-builder/schools/editable-school-list.tsx":
/*!************************************************************************!*\
  !*** ./src/components/course-builder/schools/editable-school-list.tsx ***!
  \************************************************************************/
/*! exports provided: EditableSchoolList */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditableSchoolList", function() { return EditableSchoolList; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/es/index.js");
/* harmony import */ var _access_control__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../access-control */ "./src/access-control/index.ts");
/* harmony import */ var _sub_components_spinner__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../sub-components/spinner */ "./src/components/course-builder/sub-components/spinner.tsx");







var EditableSchoolList = function (props) {
    var schools = props.schools, viewCourseUrl = props.viewCourseUrl;
    var isAdmin = _globals_KED_env__WEBPACK_IMPORTED_MODULE_3__["default"].currentUser.roles.some(function (role) { return role === "ADMIN"; });
    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "editable-school-list" },
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null, schools ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("table", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tbody", null, schools.map(function (school) {
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", { className: "align-horizontal", key: school.id },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], { className: "editItem", to: "/schools/" + school.id + "/edit" })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, school.name)),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { style: { cursor: 'pointer' }, onClick: function () { return Object(_access_control__WEBPACK_IMPORTED_MODULE_5__["actAs"])({ role: "EMPLOYEE", school: school.name }); } }, "Agera som l\u00E4rare p\u00E5 denna skola"))),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { style: { cursor: 'pointer' }, onClick: function () { return Object(_access_control__WEBPACK_IMPORTED_MODULE_5__["actAs"])({ role: "STUDENT", school: school.name, url: viewCourseUrl }); } }, "Agera som elev p\u00E5 denna skola"))));
            }))) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_sub_components_spinner__WEBPACK_IMPORTED_MODULE_6__["Spinner"], null),
            "V.g. v\u00E4nta medan skolor laddas")),
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null),
        schools && isAdmin && react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Link"], { to: "/schools/new/" + props.type, className: "btn" }, props.type == 'gymnasium' ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4gg till gymnasieskola"], ["L\u00E4gg till gymnasieskola"]))) :
            props.type == 'primary' ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4gg till grundskola"], ["L\u00E4gg till grundskola"]))) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4gg till skola"], ["L\u00E4gg till skola"])))));
};
var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/components/course-builder/schools/index.tsx":
/*!*********************************************************!*\
  !*** ./src/components/course-builder/schools/index.tsx ***!
  \*********************************************************/
/*! exports provided: Schools, SchoolsWithoutBanner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Schools", function() { return Schools; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SchoolsWithoutBanner", function() { return SchoolsWithoutBanner; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _courses_course_banner__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../courses/course-banner */ "./src/components/course-builder/courses/course-banner.tsx");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _editable_school_list__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./editable-school-list */ "./src/components/course-builder/schools/editable-school-list.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _sub_components_spinner__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../sub-components/spinner */ "./src/components/course-builder/sub-components/spinner.tsx");







var Schools = function (props) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { style: { outline: 0 } },
    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_courses_course_banner__WEBPACK_IMPORTED_MODULE_2__["CourseBanner"], { title: "Skolor", activePage: "schools", routes: { feedback: props.feedbackUrl } }),
    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](SchoolsWithoutBanner, { viewCourseUrl: props.viewCourseUrl })); };
var SchoolsWithoutBanner = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](SchoolsWithoutBanner, _super);
    function SchoolsWithoutBanner(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            schools: null
        };
        return _this;
    }
    SchoolsWithoutBanner.prototype.componentDidMount = function () {
        this.load().catch(function (err) { return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["showError"])(err.message || err); });
    };
    SchoolsWithoutBanner.prototype.load = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var schools;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_3__["default"].kedBackendClient.list("schools")];
                    case 1:
                        schools = _a.sent();
                        this.setState({ schools: schools });
                        return [2 /*return*/];
                }
            });
        });
    };
    SchoolsWithoutBanner.prototype.render = function () {
        var schools = this.state.schools;
        schools && schools.sort(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["compareProp"])("name"));
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-row sv-layout" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "pagecontent sv-layout sv-spacer-20pxvt sv-skip-spacer" }, schools ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null, "Gymnasieskolor"),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_editable_school_list__WEBPACK_IMPORTED_MODULE_4__["EditableSchoolList"], { schools: schools.filter(function (school) { return school.isGymnasium; }), viewCourseUrl: this.props.viewCourseUrl, type: "gymnasium" })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null, "Grundskolor"),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_editable_school_list__WEBPACK_IMPORTED_MODULE_4__["EditableSchoolList"], { schools: schools.filter(function (school) { return school.isPrimarySchool; }), viewCourseUrl: this.props.viewCourseUrl, type: "primary" }))) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_sub_components_spinner__WEBPACK_IMPORTED_MODULE_6__["Spinner"], null)));
    };
    return SchoolsWithoutBanner;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/course-builder/schools/new-school.tsx":
/*!**************************************************************!*\
  !*** ./src/components/course-builder/schools/new-school.tsx ***!
  \**************************************************************/
/*! exports provided: NewSchool */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NewSchool", function() { return NewSchool; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _edit_school__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./edit-school */ "./src/components/course-builder/schools/edit-school.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");




var NewSchool = function (props) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_edit_school__WEBPACK_IMPORTED_MODULE_2__["EditSchool"], { title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4gg till skola"], ["L\u00E4gg till skola"]))), type: props.type, feedbackUrl: props.feedbackUrl }); };
var templateObject_1;


/***/ }),

/***/ "./src/components/course-builder/sub-components/editable-resource-list.tsx":
/*!*********************************************************************************!*\
  !*** ./src/components/course-builder/sub-components/editable-resource-list.tsx ***!
  \*********************************************************************************/
/*! exports provided: EditableResourceList */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditableResourceList", function() { return EditableResourceList; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _modal_pages_edit_resource__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../modal-pages/edit-resource */ "./src/components/course-builder/modal-pages/edit-resource.tsx");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils */ "./src/components/course-builder/utils.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _apis_buttons__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../apis/buttons */ "./src/apis/buttons.tsx");
/* harmony import */ var _apis_google_picker__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../apis/google-picker */ "./src/apis/google-picker.ts");
/* harmony import */ var _features__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../features */ "./src/features/index.ts");








var EditableResourceList = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](EditableResourceList, _super);
    function EditableResourceList(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {};
        return _this;
    }
    EditableResourceList.prototype.render = function () {
        var _a = this.props, host = _a.host, onUpdate = _a.onUpdate, resources = _a.resources;
        var showGooglePicker = _features__WEBPACK_IMPORTED_MODULE_7__["features"].picker;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "taskContainer" }, resources.map(function (resource, idx) {
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal", key: idx },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "editItem", onClick: function () { return host.openDialog({
                                Component: _modal_pages_edit_resource__WEBPACK_IMPORTED_MODULE_2__["EditResource"],
                                props: {
                                    title: "Redigera resurs",
                                    resource: resource,
                                    onSave: function (editedResource) {
                                        var updatedResource = Object(_utils__WEBPACK_IMPORTED_MODULE_3__["updateModificationAndCreationStamps"])(editedResource, _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__["default"].currentUser);
                                        onUpdate({ $splice: [[idx, 1, updatedResource]] });
                                        host.closeDialog();
                                    },
                                    onDelete: function () {
                                        onUpdate({ $splice: [[idx, 1]] });
                                        host.closeDialog();
                                    }
                                }
                            }); } })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: resource.url, target: "_blank" }, resource.name)));
            })),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontal-align spaced" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontaItem top" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "btn", onClick: function () { return host.openDialog({
                            Component: _modal_pages_edit_resource__WEBPACK_IMPORTED_MODULE_2__["EditResource"],
                            props: {
                                title: "Lgg till resurs",
                                onSave: function (newResource) {
                                    var updatedResource = Object(_utils__WEBPACK_IMPORTED_MODULE_3__["updateModificationAndCreationStamps"])(newResource, _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__["default"].currentUser);
                                    onUpdate({ $push: [updatedResource] });
                                    host.closeDialog();
                                }
                            }
                        }); } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-paperclip", "aria-hidden": true }),
                        " L\u00E4gg till resurs")),
                showGooglePicker && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontaItem top" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_apis_buttons__WEBPACK_IMPORTED_MODULE_5__["DriveButton"], { label: "L\u00E4gg till fr\u00E5n Drive", action: function () {
                            var picker = new _apis_google_picker__WEBPACK_IMPORTED_MODULE_6__["GooglePicker"]({ upload: true, multiple: true });
                            picker.show().then(function (files) {
                                files.forEach(function (file) {
                                    var newResource = { url: file.url, name: file.name };
                                    var updatedResource = Object(_utils__WEBPACK_IMPORTED_MODULE_3__["updateModificationAndCreationStamps"])(newResource, _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__["default"].currentUser);
                                    onUpdate({ $push: [updatedResource] });
                                });
                            });
                        } }))));
    };
    return EditableResourceList;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/course-builder/sub-components/editable-task-list.tsx":
/*!*****************************************************************************!*\
  !*** ./src/components/course-builder/sub-components/editable-task-list.tsx ***!
  \*****************************************************************************/
/*! exports provided: EditableTaskList */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditableTaskList", function() { return EditableTaskList; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _modal_pages_edit_task__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../modal-pages/edit-task */ "./src/components/course-builder/modal-pages/edit-task/index.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils */ "./src/components/course-builder/utils.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _access_control__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../access-control */ "./src/access-control/index.ts");
/* harmony import */ var _utility_components_sortable_task_list__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../utility-components/sortable-task-list */ "./src/components/utility-components/sortable-task-list.tsx");
/* harmony import */ var _course_builder_ks_logic_ordered_requirements__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../course-builder-ks/logic/ordered-requirements */ "./src/components/course-builder-ks/logic/ordered-requirements.ts");








var EditableTaskList = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](EditableTaskList, _super);
    function EditableTaskList(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {};
        return _this;
    }
    EditableTaskList.prototype.openTaskDialog = function (task) {
        var _a = this.props, taskCustomizations = _a.taskCustomizations, course = _a.course, host = _a.host, module = _a.module, taskIds = _a.taskIds, onTaskAdded = _a.onTaskAdded, onTaskUpdated = _a.onTaskUpdated, onTaskCustomizationUpdated = _a.onTaskCustomizationUpdated, onTaskDeleted = _a.onTaskDeleted, idsNotCoveredByAnyTask = _a.idsNotCoveredByAnyTask, onTaskReplaced = _a.onTaskReplaced;
        host.openDialog({
            Component: _modal_pages_edit_task__WEBPACK_IMPORTED_MODULE_2__["EditTask"],
            props: {
                task: task,
                taskCustomization: taskCustomizations && taskCustomizations[task.id],
                module: module,
                course: course,
                host: host,
                idsNotCoveredByAnyTask: idsNotCoveredByAnyTask,
                onSave: function (task) {
                    var updatedTask = Object(_utils__WEBPACK_IMPORTED_MODULE_3__["updateModificationAndCreationStamps"])(task, _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__["default"].currentUser);
                    onTaskUpdated(updatedTask);
                    host.closeDialog();
                },
                onSaveCustomization: function (customization) {
                    onTaskCustomizationUpdated(task.id, customization);
                    host.closeDialog();
                },
                onDelete: function () {
                    onTaskDeleted(task.id);
                    host.closeDialog();
                },
                onReplace: function (taskId, newTask) {
                    onTaskReplaced(taskId, newTask);
                    host.closeDialog();
                },
                onCancel: function () { return host.closeDialog(); }
            }
        });
    };
    EditableTaskList.prototype.render = function () {
        var _this = this;
        var props = this.props;
        var tasks = Object(_course_builder_ks_logic_ordered_requirements__WEBPACK_IMPORTED_MODULE_7__["getOrderedDocs"])(props.course.tasks, props.taskIds, { appendLeftovers: false });
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_sortable_task_list__WEBPACK_IMPORTED_MODULE_6__["SortableTaskList"], { taskMetas: tasks.map(function (task) { return ({ task: task, isTaskOwner: Object(_access_control__WEBPACK_IMPORTED_MODULE_5__["hasWriteAccess"])(_globals_KED_env__WEBPACK_IMPORTED_MODULE_4__["default"].currentUser, task) }); }), renderEditLink: function (_a) {
                    var task = _a.task, isTaskOwner = _a.isTaskOwner;
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: isTaskOwner ?
                            "editItem" :
                            "viewItem", onClick: function () { return _this.openTaskDialog(task); } });
                }, renderLink: function (_a) {
                    var task = _a.task;
                    return task.content ?
                        // Rather than linking to url, show the task's content (by opening
                        // the task dialog)
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: "#", onClick: function (ev) {
                                ev.preventDefault();
                                _this.openTaskDialog(task);
                            } }, task.name) :
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: task.url, target: "_blank" }, task.name);
                }, onSort: function (source, target, placement) {
                    _this.props.onTasksReordered(source, target, placement);
                } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "btn", onClick: function () {
                    var _a = _this.props, course = _a.course, host = _a.host, idsNotCoveredByAnyTask = _a.idsNotCoveredByAnyTask, module = _a.module, onTaskAdded = _a.onTaskAdded, onTaskCustomizationUpdated = _a.onTaskCustomizationUpdated;
                    props.host.openDialog({
                        Component: _modal_pages_edit_task__WEBPACK_IMPORTED_MODULE_2__["EditTask"],
                        props: {
                            searchMode: true,
                            module: module,
                            course: course,
                            host: host,
                            idsNotCoveredByAnyTask: idsNotCoveredByAnyTask,
                            onSave: function (choosenTask, taskCustomization) {
                                choosenTask = Object(_utils__WEBPACK_IMPORTED_MODULE_3__["updateModificationAndCreationStamps"])(choosenTask, _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__["default"].currentUser);
                                onTaskAdded(choosenTask, taskCustomization);
                                host.closeDialog();
                            },
                            onCancel: function () { return host.closeDialog(); }
                        }
                    });
                } },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-search", "aria-hidden": true }),
                " S\u00F6k uppgift"),
            "\u00A0",
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { onClick: function () {
                    var _a = _this.props, course = _a.course, host = _a.host, module = _a.module, taskIds = _a.taskIds, onTaskAdded = _a.onTaskAdded, onTaskUpdated = _a.onTaskUpdated, onTaskDeleted = _a.onTaskDeleted, idsNotCoveredByAnyTask = _a.idsNotCoveredByAnyTask;
                    host.openDialog({
                        Component: _modal_pages_edit_task__WEBPACK_IMPORTED_MODULE_2__["EditTask"],
                        props: {
                            module: module,
                            course: course,
                            host: host,
                            idsNotCoveredByAnyTask: idsNotCoveredByAnyTask,
                            onSave: function (newTask) {
                                newTask = Object(_utils__WEBPACK_IMPORTED_MODULE_3__["updateModificationAndCreationStamps"])(newTask, _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__["default"].currentUser);
                                onTaskAdded(newTask);
                                host.closeDialog();
                            },
                            onCancel: function () { return host.closeDialog(); }
                        }
                    });
                }, className: "btn" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-plus", "aria-hidden": true }),
                " L\u00E4gg till egen uppgift"));
    };
    return EditableTaskList;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/course-builder/sub-components/editable-teacher-list.tsx":
/*!********************************************************************************!*\
  !*** ./src/components/course-builder/sub-components/editable-teacher-list.tsx ***!
  \********************************************************************************/
/*! exports provided: EditableTeacherList */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditableTeacherList", function() { return EditableTeacherList; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _remove_item__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./remove-item */ "./src/components/course-builder/sub-components/remove-item.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _select_teacher__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./select-teacher */ "./src/components/course-builder/sub-components/select-teacher.tsx");
/* harmony import */ var _utility_components_observe__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utility-components/observe */ "./src/components/utility-components/observe.tsx");
/* harmony import */ var _spinner__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./spinner */ "./src/components/course-builder/sub-components/spinner.tsx");
/* harmony import */ var _features__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../features */ "./src/features/index.ts");








function EditableTeacherList(_a) {
    var school = _a.school, teachers = _a.teachers, onUpdate = _a.onUpdate;
    var nameElem = Object(react__WEBPACK_IMPORTED_MODULE_1__["useRef"])();
    var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(false), 2), selectingTeacher = _b[0], setSelectingTeacher = _b[1];
    var displayTeacherRights = _features__WEBPACK_IMPORTED_MODULE_7__["features"].teacherRights;
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "teachers-list" },
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h3", null, "Ansvariga l\u00E4rare"),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("table", { style: { width: "100%" } },
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("thead", null, teachers.length > 0 && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("tr", null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("th", { style: { width: "15%" } }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Namn"], ["Namn"])))),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("th", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["E-postadress"], ["E-postadress"])))),
                displayTeacherRights && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("th", { style: { width: "24px" } }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Beh\u00F6righet"], ["Beh\u00F6righet"])))),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("th", { style: { width: "24px" } }))),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("tbody", null, teachers.map(function (teacher, idx) {
                return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("tr", { key: idx },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("td", null,
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("input", { type: "text", ref: nameElem, value: teacher.name, autoFocus: !teacher.name && idx > 0, onChange: function (ev) {
                                if (ev.target.value || teacher.email) {
                                    // Update row
                                    var clone = tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](teachers);
                                    clone[idx] = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, teacher, { name: ev.target.value });
                                    onUpdate(clone);
                                }
                                else {
                                    // Remove row
                                    onUpdate(tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](teachers.slice(0, idx), teachers.slice(idx + 1)));
                                }
                            } })),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("td", null,
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("input", { type: "text", style: { width: "100%" }, value: teacher.email || teacher.url, onKeyDown: function (ev) {
                                if (ev.which === 9 &&
                                    !ev.shiftKey &&
                                    idx === teachers.length - 1 &&
                                    (teachers.length < 1 || !!teachers[teachers.length - 1].name)) {
                                    setSelectingTeacher(true);
                                    ev.preventDefault();
                                }
                            }, onChange: function (ev) {
                                var editedTeacher = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, teacher, { url: ev.target.value, email: ev.target.value });
                                if (ev.target.value || teacher.name) {
                                    // Update row
                                    var clone = tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](teachers);
                                    clone[idx] = editedTeacher;
                                    onUpdate(clone);
                                }
                                else {
                                    // Remove row
                                    onUpdate(tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](teachers.slice(0, idx), teachers.slice(idx + 1)));
                                }
                            } })),
                    displayTeacherRights && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("td", null,
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("select", { disabled: !(teacher.email || teacher.url), value: teacher.access || 'edit', onChange: function (ev) {
                                var clone = tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](teachers);
                                clone[idx] = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, teacher, { access: ev.target.value });
                                onUpdate(clone);
                            } },
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option", { value: "read" }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4sa"], ["L\u00E4sa"])))),
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option", { value: "edit" }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Redigera"], ["Redigera"])))),
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option", { value: "full" }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_6 || (templateObject_6 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Full"], ["Full"])))))),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("td", null,
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_remove_item__WEBPACK_IMPORTED_MODULE_2__["RemoveItem"], { onClick: function () {
                                onUpdate(tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](teachers.slice(0, idx), teachers.slice(idx + 1)));
                            } })));
            }))),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null),
        selectingTeacher ?
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_observe__WEBPACK_IMPORTED_MODULE_5__["Observe"], { fallback: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_spinner__WEBPACK_IMPORTED_MODULE_6__["Spinner"], null), errorFallback: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_7 || (templateObject_7 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Kunder inte h\u00E4mta skolans l\u00E4rare fr\u00E5n EDS"], ["Kunder inte h\u00E4mta skolans l\u00E4rare fr\u00E5n EDS"]))) },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_select_teacher__WEBPACK_IMPORTED_MODULE_4__["SelectTeacher"], { school: school, selectedTeachers: teachers, onBlur: function () { return setSelectingTeacher(false); }, onSelect: function (_a) {
                        var name = _a.name, email = _a.email;
                        var newTeacher = {
                            name: name,
                            email: email,
                            url: email,
                            access: 'edit'
                        };
                        var clone = tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](teachers);
                        clone.push(newTeacher);
                        onUpdate(clone);
                        setSelectingTeacher(false);
                    } })) :
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("a", { className: "btn", onClick: function () {
                    setSelectingTeacher(true);
                } },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-user-plus", "aria-hidden": true }), Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_8 || (templateObject_8 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"]([" L\u00E4gg till ansvarig l\u00E4rare"], [" L\u00E4gg till ansvarig l\u00E4rare"])))));
}
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8;


/***/ }),

/***/ "./src/components/course-builder/sub-components/editable-workflow-link.tsx":
/*!*********************************************************************************!*\
  !*** ./src/components/course-builder/sub-components/editable-workflow-link.tsx ***!
  \*********************************************************************************/
/*! exports provided: EditableWorkFlowLink */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditableWorkFlowLink", function() { return EditableWorkFlowLink; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _modal_pages_edit_workflow_link__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../modal-pages/edit-workflow-link */ "./src/components/course-builder/modal-pages/edit-workflow-link.tsx");



var EditableWorkFlowLink = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](EditableWorkFlowLink, _super);
    function EditableWorkFlowLink(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {};
        return _this;
    }
    EditableWorkFlowLink.prototype.render = function () {
        var _a = this.props, host = _a.host, onUpdate = _a.onUpdate, url = _a.url;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "taskContainer" }, url &&
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "editItem", onClick: function () { return host.openDialog({
                                Component: _modal_pages_edit_workflow_link__WEBPACK_IMPORTED_MODULE_2__["EditWorkflowLink"],
                                props: {
                                    url: url,
                                    onSave: function (newUrl) {
                                        onUpdate({ $set: newUrl });
                                        host.closeDialog();
                                    },
                                    onDelete: function () {
                                        onUpdate({ $set: undefined });
                                        host.closeDialog();
                                    }
                                }
                            }); } })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: url, target: "_blank" }, "Nuvarande arbetsg\u00E5ng")))),
            !url && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "btn", onClick: function () { return host.openDialog({
                    Component: _modal_pages_edit_workflow_link__WEBPACK_IMPORTED_MODULE_2__["EditWorkflowLink"],
                    props: {
                        onSave: function (newUrl) {
                            onUpdate({ $set: newUrl });
                            host.closeDialog();
                        }
                    }
                }); } },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-paperclip", "aria-hidden": true }),
                " Koppla en arbetsg\u00E5ng till kursen"));
    };
    return EditableWorkFlowLink;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/course-builder/sub-components/knowledge-matrix.tsx":
/*!***************************************************************************!*\
  !*** ./src/components/course-builder/sub-components/knowledge-matrix.tsx ***!
  \***************************************************************************/
/*! exports provided: KnowledgeMatrix */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KnowledgeMatrix", function() { return KnowledgeMatrix; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _knowledge_matrix_partial_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../knowledge-matrix-partial-utils */ "./src/components/course-builder/knowledge-matrix-partial-utils.ts");




var KnowledgeMatrix = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](KnowledgeMatrix, _super);
    function KnowledgeMatrix(props) {
        return _super.call(this, props) || this;
    }
    KnowledgeMatrix.prototype.getKnowledgeSentencesContent = function (requirement, partialRequirments, index, markedOk, isMigrated) {
        var _this = this;
        var _a = this.props, coveredPartialRequirments = _a.coveredPartialRequirments, markMode = _a.markMode;
        //split text in senteces
        var textSentences = Object(_knowledge_matrix_partial_utils__WEBPACK_IMPORTED_MODULE_3__["getRequirmentSentences"])(requirement.name);
        //get saved sencenteces for the current requirement
        var rowRequirments = partialRequirments && Object(_knowledge_matrix_partial_utils__WEBPACK_IMPORTED_MODULE_3__["getSavedSentences"])(partialRequirments);
        //get all saved senteces excluding the current ones
        var allCoveredSentenceReq = coveredPartialRequirments && Object(_knowledge_matrix_partial_utils__WEBPACK_IMPORTED_MODULE_3__["getCoveredSenteces"])(coveredPartialRequirments, requirement.id);
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { key: index, title: Object(_knowledge_matrix_partial_utils__WEBPACK_IMPORTED_MODULE_3__["getMigrationTitle"])(isMigrated, markMode) }, textSentences.map(function (sentence, k) {
            var trimmedSentence = sentence.trim();
            var hasValue = rowRequirments && rowRequirments.includes(trimmedSentence) || markedOk && !rowRequirments;
            var sentenceNotMarked = !allCoveredSentenceReq.includes(trimmedSentence);
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("span", { key: k, dangerouslySetInnerHTML: { __html: sentence ? sentence + "." : "" }, className: "selectable" + (hasValue ? " markedGreen" : (sentenceNotMarked ? " markedRed" : "")), onClick: function () {
                    var updatedRequirments = partialRequirments ? Object.assign([], partialRequirments) : [];
                    var shouldBeRemoved = rowRequirments && rowRequirments.includes(trimmedSentence);
                    //check if no partial data saved, but the requirment is markedOk
                    if (markedOk && (!rowRequirments || rowRequirments.length == 0)) {
                        //save all excepting the one that should be removed
                        updatedRequirments = textSentences.filter(function (x) { return x != sentence; });
                        _this.props.onUpdatePartialKnowledge(requirement.id, Object(_knowledge_matrix_partial_utils__WEBPACK_IMPORTED_MODULE_3__["getSortedRequirments"])(textSentences, updatedRequirments));
                    }
                    else {
                        if (shouldBeRemoved) {
                            updatedRequirments = partialRequirments.filter(function (req) { return req != sentence; });
                        }
                        else {
                            updatedRequirments.push(sentence);
                        }
                        _this.props.onUpdatePartialKnowledge(requirement.id, Object(_knowledge_matrix_partial_utils__WEBPACK_IMPORTED_MODULE_3__["getSortedRequirments"])(textSentences, updatedRequirments));
                    }
                } });
        }));
    };
    KnowledgeMatrix.prototype.onRequirementChanged = function (requirement, value, partialValues, allPartialMarked) {
        if (this.props.onUpdatePartialKnowledge) {
            //remove all saved senteces if the requirement is unchecked
            (value && !partialValues || allPartialMarked) ? this.props.onUpdatePartialKnowledge(requirement.id, []) : this.props.onUpdatePartialKnowledge(requirement.id, Object(_knowledge_matrix_partial_utils__WEBPACK_IMPORTED_MODULE_3__["getRequirmentSentences"])(requirement.name));
        }
        else {
            this.props.onMarkChanged(requirement.id, !value);
        }
    };
    KnowledgeMatrix.prototype.render = function () {
        var _this = this;
        var _a = this.props, knowledgeRequirements = _a.knowledgeRequirements, markedIds = _a.markedIds, migratedIds = _a.migratedIds, explainedRequirements = _a.explainedRequirements, markBySentenceView = _a.markBySentenceView, markPartialFeatureEnabled = _a.markPartialFeatureEnabled;
        var _b = this.props, idsToMarkNotOk = _b.idsToMarkNotOk, markMode = _b.markMode, onExplainedRequirementsChanged = _b.onExplainedRequirementsChanged, partialRequirments = _b.partialRequirments, coveredPartialRequirments = _b.coveredPartialRequirments;
        var columns = ["E", "C", "A"];
        var rows = [];
        var reqs = knowledgeRequirements.slice();
        var row = null;
        while (true) {
            row = columns.map(function (grade) {
                var pNext = reqs.findIndex(function (r) { return r.gradeStep && r.gradeStep.toUpperCase() === grade; });
                if (pNext < 0)
                    return null;
                var rv = reqs[pNext];
                reqs.splice(pNext, 1);
                return rv;
            });
            if (row.every(function (r) { return r === null; }))
                break;
            rows.push(row);
        }
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("table", { className: "knowledge-matrix" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("thead", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null, columns.map(function (c) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { key: c }, c); }))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tbody", null, rows.map(function (row, i) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], { key: i },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null, row.map(function (requirement, j) {
                    var isMarkedOK = requirement && markedIds && markedIds.indexOf(requirement.id) >= 0;
                    var isMarkedNotOK = requirement && idsToMarkNotOk && idsToMarkNotOk[requirement.id]; //not used anymore
                    var isMigrated = requirement && migratedIds && !!migratedIds[requirement.id];
                    var rowPartialRequirements = partialRequirments && partialRequirments[requirement.id];
                    var partialValues = rowPartialRequirements && Object(_knowledge_matrix_partial_utils__WEBPACK_IMPORTED_MODULE_3__["getSavedSentences"])(rowPartialRequirements);
                    var allReqSentencesMarked = Object(_knowledge_matrix_partial_utils__WEBPACK_IMPORTED_MODULE_3__["allRequirementSentecesMarked"])(requirement.name, partialValues);
                    var hasPartialCovered = Object(_knowledge_matrix_partial_utils__WEBPACK_IMPORTED_MODULE_3__["isPartialCoveredRequirment"])(requirement, coveredPartialRequirments);
                    var markedRed = !(partialValues && partialValues.length > 0 || hasPartialCovered);
                    return markBySentenceView && markPartialFeatureEnabled ? _this.getKnowledgeSentencesContent(requirement, rowPartialRequirements, j, isMarkedOK, isMigrated) :
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { key: j, dangerouslySetInnerHTML: { __html: requirement ? (rowPartialRequirements && rowPartialRequirements.length || hasPartialCovered) ?
                                    Object(_knowledge_matrix_partial_utils__WEBPACK_IMPORTED_MODULE_3__["getPartialContentDefaultView"])(requirement, rowPartialRequirements, coveredPartialRequirments, markedRed) : requirement.name : "" }, className: (markMode ? "selectable" : "") +
                                (isMigrated ? " migrated" : "") +
                                (isMarkedOK && (!rowPartialRequirements || allReqSentencesMarked) ?
                                    " markedGreen" :
                                    markedRed ?
                                        " markedRed" :
                                        ""), onClick: markMode && requirement ?
                                function () { return _this.onRequirementChanged(requirement, isMarkedOK, partialValues, allReqSentencesMarked); } :
                                undefined, title: Object(_knowledge_matrix_partial_utils__WEBPACK_IMPORTED_MODULE_3__["getMigrationTitle"])(isMigrated, markMode) });
                })),
                explainedRequirements && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null, row.map(function (requirement, j) {
                    var partialSentences = partialRequirments && partialRequirments[requirement.id] && Object(_knowledge_matrix_partial_utils__WEBPACK_IMPORTED_MODULE_3__["getSavedSentences"])(partialRequirments[requirement.id]);
                    var isMarkedOK = requirement && markedIds && markedIds.indexOf(requirement.id) >= 0 || partialSentences && partialSentences.length > 0;
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { key: j }, isMarkedOK ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("textarea", { placeholder: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Beskriv kravet"], ["Beskriv kravet"]))), className: "inputTextBox inputTextLarge", style: { width: "100%" }, readOnly: !markMode, value: explainedRequirements[requirement.id] || "", onChange: onExplainedRequirementsChanged && (function (ev) { return onExplainedRequirementsChanged(requirement.id, ev.target.value); }) }) : undefined);
                }))); })));
        { /*return <div>
          <table>
            <thead>
              <tr>
                <th>E</th>
                <th>C</th>
                <th>A</th>
              </tr>
            </thead>
            <tbody>
              {tbody.map((row, i) =>
              <tr key={i}>{row.map((cell, j) => {
                const isMarkedOK = props.markedIds && props.markedIds.indexOf(cell.id) >= 0;
                const isMarkedNotOK = props.idsToMarkNotOk && props.idsToMarkNotOk[cell.id];
                return <td
                  key={j}
                  rowSpan={cell.rowSpan}
                  className={(props.markMode ? "selectable" : "") +
                    (isMarkedOK ?
                      " markedGreen" :
                      (isMarkedNotOK ?
                        " markedRed":
                        ""))}
                  onClick={props.markMode && (()=>props.onMarkChanged(cell.id, !isMarkedOK))}>
                  {cell.html && <div style={{position: 'relative'}}>
                    <p
                      className={cell.type === 'ability' ? 'abilityText' : 'criteriaText'}
                      dangerouslySetInnerHTML={{__html: cell.html}} />
                    {props.editMode && <RemoveItem className="upperRight" onClick={()=>
                      this.setCellIds(
                        cell.type,
                        cell.rowIndex,
                        this.getCellIds(
                          cell.type,
                          cell.rowIndex).filter(id => id != cell.id) )} /> }
                  </div>}
                </td>})}
              </tr>)}
            </tbody>
          </table>
        </div>*/
        }
    };
    return KnowledgeMatrix;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

var templateObject_1;


/***/ }),

/***/ "./src/components/course-builder/sub-components/remove-item.tsx":
/*!**********************************************************************!*\
  !*** ./src/components/course-builder/sub-components/remove-item.tsx ***!
  \**********************************************************************/
/*! exports provided: RemoveItem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RemoveItem", function() { return RemoveItem; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");



;
var RemoveItem = function (_a) {
    var onClick = _a.onClick, className = _a.className, style = _a.style, title = _a.title;
    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { title: title || Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Radera"], ["Radera"]))), className: "removeItem " + (className || ""), onClick: onClick, style: style });
};
var templateObject_1;


/***/ }),

/***/ "./src/components/course-builder/sub-components/school-courses.tsx":
/*!*************************************************************************!*\
  !*** ./src/components/course-builder/sub-components/school-courses.tsx ***!
  \*************************************************************************/
/*! exports provided: SchoolCourses */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SchoolCourses", function() { return SchoolCourses; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _repos_school_courses__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../repos/school-courses */ "./src/repos/school-courses.ts");
/* harmony import */ var _spinner__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./spinner */ "./src/components/course-builder/sub-components/spinner.tsx");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/es/index.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils */ "./src/components/course-builder/utils.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");









var SchoolCourses = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](SchoolCourses, _super);
    function SchoolCourses(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            schoolCourses: null
        };
        _this.onSchoolCoursesUpdated = _this.onSchoolCoursesUpdated.bind(_this);
        return _this;
    }
    SchoolCourses.prototype.componentDidMount = function () {
        _repos_school_courses__WEBPACK_IMPORTED_MODULE_3__["mySchoolCoursesRepo"].subscribe(this.onSchoolCoursesUpdated).catch(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["showError"]);
    };
    SchoolCourses.prototype.componentWillUnmount = function () {
        _repos_school_courses__WEBPACK_IMPORTED_MODULE_3__["mySchoolCoursesRepo"].unsubscribe(this.onSchoolCoursesUpdated);
    };
    SchoolCourses.prototype.onSchoolCoursesUpdated = function (schoolCourses) {
        var compareName = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["compareProp"])("name");
        var compareCreatedDate = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["compareProp"])("createdDate");
        schoolCourses.sort(function (a, b) { return compareName(a, b) || compareCreatedDate(a, b); });
        this.setState({ schoolCourses: schoolCourses });
    };
    SchoolCourses.prototype.outputCourses = function (courses, header, open) {
        return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_8__["OpenCloseBox"], { title: react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, header), headerOpen: open, contentClassName: "odd-even" }, courses.map(function (course) {
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "schoolCourse", key: course.id },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top pull-right" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_5__["Link"], { to: "/courses/" + course.id + "/edit", className: "editItem" })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_5__["Link"], { to: "/courses/" + course.id + "/edit" }, course.name)),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" }, course.active && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "pill active" }, "Aktiv")),
                    course.active && !course.publishable && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "pill incomplete" }, "Inkomplett"))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, course.description)),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" }, course.modifiedBy ?
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { className: "small" },
                        "Redigerad av ",
                        course.modifiedBy.name,
                        " / ",
                        Object(_utils__WEBPACK_IMPORTED_MODULE_6__["shortDateFormat"])(course.modifiedDate)) :
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { className: "small", style: { fontStyle: 'italic' } }, " ")));
        })));
    };
    SchoolCourses.prototype.render = function () {
        var schoolCourses = this.state.schoolCourses;
        var myCourses = [];
        var othersCourses = [];
        if (schoolCourses) {
            var me_1 = _globals_KED_env__WEBPACK_IMPORTED_MODULE_7__["default"].currentUser.mail;
            schoolCourses.forEach(function (course) {
                if (course.activatedBy && course.activatedBy.url == me_1) {
                    myCourses.push(course);
                }
                else if (course.responsibleTeachers.filter(function (t) { return t.url == me_1; }).length > 0) {
                    myCourses.push(course);
                }
                else {
                    othersCourses.push(course);
                }
            });
        }
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet sv-skip-spacer" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "ked_boxed" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h3", null, "Skolans kurser"),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "taskContainer odd-even" }, !schoolCourses ?
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_spinner__WEBPACK_IMPORTED_MODULE_4__["Spinner"], null),
                        " Laddar skolans kurser") :
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                        this.outputCourses(myCourses, 'Mina kurser', true),
                        this.outputCourses(othersCourses, 'Andra kurser', false))),
                location.hash !== "#/courses/new" && react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_5__["Link"], { className: "btn", to: "/courses/new", onClick: function () { return window.scroll(0, 0); } }, "Skapa ny kurs")));
    };
    return SchoolCourses;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/course-builder/sub-components/select-related-docs.tsx":
/*!******************************************************************************!*\
  !*** ./src/components/course-builder/sub-components/select-related-docs.tsx ***!
  \******************************************************************************/
/*! exports provided: SelectRelatedDocs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SelectRelatedDocs", function() { return SelectRelatedDocs; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");




var SelectRelatedDocs = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](SelectRelatedDocs, _super);
    function SelectRelatedDocs(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {};
        return _this;
    }
    SelectRelatedDocs.prototype.render = function () {
        var _this = this;
        var _a = this.props, options = _a.options, title = _a.title, markedIds = _a.markedIds, markMode = _a.markMode, migratedIds = _a.migratedIds, uncoveredIds = _a.uncoveredIds;
        var groupedOptions = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["arrayToLookup"])(options, function (d) { return d.group || "default"; });
        var groups = Object.keys(groupedOptions);
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_2__["OpenCloseBox"], { title: react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, title), className: "larger" }, groups.map(function (group) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], { key: group },
            groups.length === 1 ? null : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h5", null, group),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null)),
            groupedOptions[group].map(function (option) {
                var isMarked = markedIds.some(function (x) { return x === option.id; });
                var isMigrated = migratedIds && !!migratedIds[option.id];
                var isUncovered = uncoveredIds && uncoveredIds[option.id];
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal", key: option.id, onClick: function () {
                        return markMode && _this.props.onMarkChanged(option.id, !isMarked);
                    } },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top spaced" +
                            (markMode ? " selectable" : "") +
                            (isMarked ? " markedGreen" : (isUncovered ?
                                " markedRed" :
                                "")) +
                            (isMigrated ? " migrated" : ""), title: isMigrated ?
                            markMode ?
                                "Skolverket har uppdaterat textens formulering. Du kan granska \u00E4ndringen genom att f\u00E4lla ut varningsboxen till h\u00F6ger, med titel \"Uppdaterade formuleringar fr\u00E5n Skolverket\"" :
                                "Skolverket har uppdaterat textens formulering, men detta har \u00E4nnu inte granskats av uppgiftens redigeringsbeh\u00F6rige" :
                            undefined },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { dangerouslySetInnerHTML: { __html: option.name } }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null)));
            })); }));
    };
    return SelectRelatedDocs;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/course-builder/sub-components/select-study-groups.tsx":
/*!******************************************************************************!*\
  !*** ./src/components/course-builder/sub-components/select-study-groups.tsx ***!
  \******************************************************************************/
/*! exports provided: SelectStudyGroups */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SelectStudyGroups", function() { return SelectStudyGroups; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var react_select__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-select */ "./node_modules/react-select/dist/react-select.esm.js");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _apis_mock_mock_classroom_data__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../apis/mock/mock-classroom-data */ "./src/apis/mock/mock-classroom-data.ts");







function SelectStudyGroups(_a) {
    var school = _a.school, courseCode = _a.courseCode, selectedStudyGroups = _a.selectedStudyGroups, onUpdate = _a.onUpdate;
    // Mock-data for KED
    var emptyOrMock = school === 'KED' && _apis_mock_mock_classroom_data__WEBPACK_IMPORTED_MODULE_6__["mockTuitionGroups"][courseCode] ? _apis_mock_mock_classroom_data__WEBPACK_IMPORTED_MODULE_6__["mockTuitionGroups"][courseCode] : [];
    // Map given {school} to its name in EDS:
    var edsSchoolNameGymn = _globals_db__WEBPACK_IMPORTED_MODULE_5__["db"].schools
        .cacheOptimized() // Will add cacheBust to the query (making server add cache header)
        .name(school).single() // Get the single school instance with name={school}
        .read().edsSchoolNameGymn; // Read it the suspense-way (throwing Promise if not there...)
    // List studygroups for that school and given course:
    var studyGroups = edsSchoolNameGymn ? _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__["env"].edsClient.suspense.getSchoolTuitionGroups({
        schoolName: edsSchoolNameGymn,
        courseCode: courseCode
    }) : emptyOrMock;
    // Convert to option objects as react-select wants them:
    var options = studyGroups.map(function (sg) { return ({
        label: sg.tuitionGroupName,
        value: sg.tuitionGroupName
    }); });
    // Display the mutliselect:
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_select__WEBPACK_IMPORTED_MODULE_3__["default"], { isMulti: true, options: options, value: selectedStudyGroups.map(function (group) { return ({ label: group, value: group }); }), placeholder: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Koppla studiegrupper till kursen..."], ["Koppla studiegrupper till kursen..."]))), noOptionsMessage: function () { return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Kunde inte hitta studiegrupper f\u00F6r denna kurs"], ["Kunde inte hitta studiegrupper f\u00F6r denna kurs"]))); }, onChange: function (options) {
            onUpdate(options.map(function (_a) {
                var value = _a.value;
                return value;
            }));
        } });
}
var templateObject_1, templateObject_2;


/***/ }),

/***/ "./src/components/course-builder/sub-components/select-teacher.tsx":
/*!*************************************************************************!*\
  !*** ./src/components/course-builder/sub-components/select-teacher.tsx ***!
  \*************************************************************************/
/*! exports provided: SelectTeacher */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SelectTeacher", function() { return SelectTeacher; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var react_select__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-select */ "./node_modules/react-select/dist/react-select.esm.js");
/* harmony import */ var _access_control__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../access-control */ "./src/access-control/index.ts");
/* harmony import */ var _apis_mock_mock_classroom_data__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../apis/mock/mock-classroom-data */ "./src/apis/mock/mock-classroom-data.ts");









function SelectTeacher(_a) {
    //
    // Load the teacher list asynchronically (using suspense)
    //
    var school = _a.school, selectedTeachers = _a.selectedTeachers, onSelect = _a.onSelect, onBlur = _a.onBlur;
    // Mock-data for KED
    var emptyOrMock = school === 'KED' ? _apis_mock_mock_classroom_data__WEBPACK_IMPORTED_MODULE_8__["mockTeachers"] : [];
    // Suspense-read from KedBackend:
    var edsSchoolNameGymn = _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].schools.cacheOptimized().name(school).single().read().edsSchoolNameGymn;
    // Suspense-read from EDS:
    var edsTeachers = edsSchoolNameGymn ?
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_3__["env"].edsClient.suspense.getSchoolTeachers({ schoolName: edsSchoolNameGymn }) :
        emptyOrMock;
    var teacherList = edsTeachers.map(function (_a) {
        var teacherFirstName = _a.teacherFirstName, teacherLastName = _a.teacherLastName, teacherEmailAddress = _a.teacherEmailAddress;
        return ({
            label: teacherFirstName + " " + teacherLastName,
            value: teacherEmailAddress
        });
    });
    // Add current user to the list (in case current user is ADMIN or EMPLOYEE at the school)
    var addCurrentUser = Object(_access_control__WEBPACK_IMPORTED_MODULE_7__["isAdminOrTeacherAtSchool"])(_globals_KED_env__WEBPACK_IMPORTED_MODULE_3__["env"].currentUser, school);
    if (addCurrentUser && !teacherList.some(function (t) { return t.value === _globals_KED_env__WEBPACK_IMPORTED_MODULE_3__["env"].currentUser.mail; })) {
        teacherList.push({ label: _globals_KED_env__WEBPACK_IMPORTED_MODULE_3__["env"].currentUser.displayName, value: _globals_KED_env__WEBPACK_IMPORTED_MODULE_3__["env"].currentUser.mail });
    }
    // Filter out already selected teachers:
    var teacherSet = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["arrayToLookup"])(selectedTeachers, function (t) { return t.email; });
    teacherList = teacherList
        .filter(function (t) { return !teacherSet[t.value]; }) // Remove already added ones
        .sort(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["compareProps"])(["label"], _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_5__["cfg"].KED_LOCALE)); // Sort by name
    // Show the select:
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_select__WEBPACK_IMPORTED_MODULE_6__["default"], { isMulti: false, options: teacherList, defaultMenuIsOpen: true, autoFocus: true, onBlur: function () { return onBlur(); }, placeholder: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["V\u00E4lj bland skolans l\u00E4rare..."], ["V\u00E4lj bland skolans l\u00E4rare..."]))), noOptionsMessage: function () { return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Det finns inga fler l\u00E4rare att v\u00E4lja fr\u00E5n"], ["Det finns inga fler l\u00E4rare att v\u00E4lja fr\u00E5n"]))); }, onChange: function (option) {
            var _a = option, label = _a.label, value = _a.value;
            onSelect({ name: label, email: value });
        } });
}
var templateObject_1, templateObject_2;


/***/ }),

/***/ "./src/components/course-builder/sub-components/spinner.tsx":
/*!******************************************************************!*\
  !*** ./src/components/course-builder/sub-components/spinner.tsx ***!
  \******************************************************************/
/*! exports provided: Spinner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Spinner", function() { return Spinner; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var Spinner = function () { return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("span", null,
    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("i", { className: "fa fa-spinner fa-spin", "aria-hidden": "true" }),
    "\u00A0"); };


/***/ }),

/***/ "./src/components/course-builder/sub-components/weighted-items-table.tsx":
/*!*******************************************************************************!*\
  !*** ./src/components/course-builder/sub-components/weighted-items-table.tsx ***!
  \*******************************************************************************/
/*! exports provided: WeightedItemsTable */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WeightedItemsTable", function() { return WeightedItemsTable; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _courses_business_logic__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../courses/business-logic */ "./src/components/course-builder/courses/business-logic.ts");
/* harmony import */ var _contracts_ked_models__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../contracts/ked-models */ "./src/contracts/ked-models.ts");
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");





var WeightedItemsTable = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](WeightedItemsTable, _super);
    function WeightedItemsTable(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            isOpen: false
        };
        return _this;
    }
    WeightedItemsTable.prototype.render = function () {
        var course = this.props.course;
        var isOpen = this.state.isOpen;
        var rows = [];
        var tasksPerId = Object(_courses_business_logic__WEBPACK_IMPORTED_MODULE_2__["getTasksPerId"])(course);
        rows.push(react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", { key: "centralContent", className: "covered-item-label" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { colSpan: 2 }, "Centralt inneh\u00E5ll")));
        course.centralContent.forEach(function (cc, idx) { return rows.push(react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", { key: cc.id, className: idx % 2 ? "tableOdd" : "" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { className: "criteriaText", dangerouslySetInnerHTML: { __html: cc.name } })),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, (tasksPerId[cc.id] || []).length)))); });
        rows.push(react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", { key: "abilities", className: "covered-item-label" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { colSpan: 2 }, "F\u00F6rm\u00E5gor")));
        course.abilities.forEach(function (ability, idx) { return rows.push(react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", { key: ability.id, className: idx % 2 ? "tableOdd" : "" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { className: "abilityText", dangerouslySetInnerHTML: { __html: ability.name } })),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, (tasksPerId[ability.id] || []).length)))); });
        rows.push(react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", { key: "futureAbilities", className: "covered-item-label" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { colSpan: 2 }, "Framtidsf\u00F6rm\u00E5gor")));
        _contracts_ked_models__WEBPACK_IMPORTED_MODULE_3__["futureAbilities"].forEach(function (futureAbilityText, idx) { return rows.push(react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", { key: futureAbilityText, className: idx % 2 ? "tableOdd" : "" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { className: "abilityText" }, futureAbilityText)),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, (tasksPerId[futureAbilityText] || []).length)))); });
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_4__["OpenCloseBox"], { className: "larger", title: react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, "Kursens t\u00E4ckningstabell"), contentClassName: "weighted-items-table" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, "Tabellen anger hur m\u00E5nga uppgifter som ber\u00F6r varje del."),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("table", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tbody", null, rows)));
    };
    return WeightedItemsTable;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/course-builder/subjects/diff/diff-xml-with-database.ts":
/*!*******************************************************************************!*\
  !*** ./src/components/course-builder/subjects/diff/diff-xml-with-database.ts ***!
  \*******************************************************************************/
/*! exports provided: diffXmlWithDatabase */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "diffXmlWithDatabase", function() { return diffXmlWithDatabase; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _migrate_subject__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./migrate-subject */ "./src/components/course-builder/subjects/diff/migrate-subject.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils */ "./src/components/course-builder/utils.ts");




function diffXmlWithDatabase(existingSubject, subjectToImport, changes) {
    return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
        var expandedCourseTemplates, courseSets;
        var _this = this;
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_1__["default"].kedBackendClient.get('subjects', existingSubject.id, { include: ["courseTemplates", "abilities"] })];
                case 1:
                    // Expand graphs of existing Subject
                    existingSubject = _a.sent();
                    return [4 /*yield*/, Promise.all(existingSubject.courseTemplates.map(function (ct) { return Object(_utils__WEBPACK_IMPORTED_MODULE_3__["loadCourse"])(ct.id, {
                            include: [
                                'centralContent',
                                'knowledgeRequirements'
                            ]
                        }); }))];
                case 2:
                    expandedCourseTemplates = _a.sent();
                    console.log("Subject: " + existingSubject.name + ". Courses: " + expandedCourseTemplates.map(function (_a) {
                        var name = _a.name;
                        return name;
                    }));
                    return [4 /*yield*/, Promise.all(expandedCourseTemplates.map(function (courseTemplate) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                            var _a;
                            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                                switch (_b.label) {
                                    case 0:
                                        _a = {
                                            template: courseTemplate
                                        };
                                        return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_1__["default"].kedBackendClient.list("courses", { name: courseTemplate.name, include: ['abilities'], flags: ['includeIdsOnly'] })];
                                    case 1: return [2 /*return*/, (_a.instances = _b.sent(),
                                            _a)];
                                }
                            });
                        }); }))];
                case 3:
                    courseSets = _a.sent();
                    /*if (expandedCourseTemplates.some (course => !course.centralContentOrder || !course.knowledgeRequirementsOrder || !course.abilitiesOrder)) {
                      migrateOrderListsOfCourseInstances(courseSets, subjectToImport, changes);
                      // In future, as abilities may be added or removed, we will have to maintain the order of abilities on the course instances,
                      // the same way we do it with central content and knowledge requirements. TODO respect abilities order on every place abilities are enumerated,
                      // such as on course viewer, course builder, etc.
                      migrateAbilitiesOrderOnSubject(existingSubject, courseSets, changes);
                    } else {*/
                    return [4 /*yield*/, Object(_migrate_subject__WEBPACK_IMPORTED_MODULE_2__["migrateSubject"])(existingSubject, courseSets, subjectToImport, changes)];
                case 4:
                    /*if (expandedCourseTemplates.some (course => !course.centralContentOrder || !course.knowledgeRequirementsOrder || !course.abilitiesOrder)) {
                      migrateOrderListsOfCourseInstances(courseSets, subjectToImport, changes);
                      // In future, as abilities may be added or removed, we will have to maintain the order of abilities on the course instances,
                      // the same way we do it with central content and knowledge requirements. TODO respect abilities order on every place abilities are enumerated,
                      // such as on course viewer, course builder, etc.
                      migrateAbilitiesOrderOnSubject(existingSubject, courseSets, changes);
                    } else {*/
                    _a.sent();
                    return [2 /*return*/];
            }
        });
    });
}


/***/ }),

/***/ "./src/components/course-builder/subjects/diff/migrate-subject.ts":
/*!************************************************************************!*\
  !*** ./src/components/course-builder/subjects/diff/migrate-subject.ts ***!
  \************************************************************************/
/*! exports provided: migrateSubject */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "migrateSubject", function() { return migrateSubject; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../globals/KED.env */ "./src/globals/KED.env.ts");




function diffSubjectGlobalTexts(dbTextMap, xmlTexts) {
    var e_1, _a;
    var removedIds = new Set();
    var newTexts = new Map();
    var idsToAdd = new Set();
    xmlTexts.forEach(function (newText) {
        newText = newText.trim();
        if (!dbTextMap.has(newText)) {
            var id = Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["createUUID"])();
            console.log("New id: " + id + ". Text: " + newText);
            newTexts.set(newText, id);
            idsToAdd.add(id);
        }
        else {
            newTexts.set(newText, dbTextMap.get(newText));
        }
    });
    try {
        for (var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](dbTextMap.entries()), _c = _b.next(); !_c.done; _c = _b.next()) {
            var _d = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](_c.value, 2), oldText = _d[0], oldId = _d[1];
            if (xmlTexts.indexOf(oldText) === -1) {
                removedIds.add(oldId);
            }
        }
    }
    catch (e_1_1) { e_1 = { error: e_1_1 }; }
    finally {
        try {
            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
        }
        finally { if (e_1) throw e_1.error; }
    }
    return {
        removedIds: removedIds,
        newTexts: newTexts,
        idsToAdd: idsToAdd
    };
}
var _fictiveOldId = 1;
function fictiveOldId() {
    return "fictiveOldId" + (++_fictiveOldId);
}
var stopWords = new Set(
// From https://github.com/MihaiValentin/lunr-languages/blob/master/lunr.sv.js#L252
('alla allt att av blev bli blir blivit de dem den denna deras dess dessa det detta dig din dina ditt du dr d efter ej eller en er era ert ett frn fr ha hade han hans har henne hennes hon honom hur hr i icke ingen inom inte jag ju kan kunde man med mellan men mig min mina mitt mot mycket ni nu nr ngon ngot ngra och om oss p samma sedan sig sin sina sitta sjlv skulle som s sdan sdana sdant till under upp ut utan vad var vara varfr varit varje vars vart vem vi vid vilka vilkas vilken vilket vr vra vrt n r t ver' +
    ' kring') // This line contains additional stop-words missing in lunr.sv.
    .split(' '));
function getLexemes(html) {
    return new Set(removeTags(html).replace(/[^\w\s]/gi, '').toLowerCase().split(/\s/)
        .map(function (lexeme) { return lexeme.trim(); })
        .filter(function (lexeme) { return !!lexeme; })
        .filter(function (lexeme) { return !stopWords.has(lexeme); }));
}
function removeTags(html) {
    var div = document.createElement('div');
    div.innerHTML = html;
    return '' + div.innerText;
}
function getIdsToMigrate(dbTexts, xmlTexts, newTexts, textType, course) {
    var idsToMigrate = new Map();
    dbTexts = dbTexts.map(function (entity) { return (tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, entity, { name: entity.name.trim() })); }).filter(function (_a) {
        var name = _a.name;
        return !!name;
    });
    var xmlSet = new Map();
    xmlTexts.forEach(function (item) { return xmlSet.set(item.html, item); });
    var dbSet = new Map();
    dbTexts.forEach(function (entity) { return dbSet.set(entity.name, entity); });
    // Remove those who already exists identically
    dbTexts = dbTexts.filter(function (entity) { return !xmlSet.has(entity.name); });
    xmlTexts = xmlTexts.filter(function (item) { return !dbSet.has(item.html); });
    // Now, for the remainder, try the best to map old texts to new texts, and when done, check if there are new texts that never got mapped.
    // Start by putting all dbText into the result, without a paired xml text yet:
    dbTexts.forEach(function (dbText) { return idsToMigrate.set(dbText.id, {
        gradeStep: dbText.gradeStep,
        oldText: dbText.name,
        lexemes: getLexemes(dbText.name),
        matchLevel: 0
    }); });
    // Then try to pair each xmlText to an item in idsToMigrate
    var xmlSpinsters = [];
    while (xmlTexts.length > 0) {
        var xmlText = xmlTexts[0];
        var bestMatch = findBestMatch(xmlText);
        if (!bestMatch) {
            xmlSpinsters.push(xmlText);
        }
        else {
            if (bestMatch.newText) {
                // Throw out existing match
                xmlTexts.push({ html: bestMatch.newText, gradeStep: bestMatch.gradeStep });
            }
            var pair = idsToMigrate.get(bestMatch.id);
            // Pair myself with this match:
            pair.newText = xmlText.html;
            pair.matchLevel = bestMatch.myMatchLevel;
            pair.newId = newTexts.get(xmlText.html);
        }
        xmlTexts.shift();
    }
    // For each spinster (new texts that couldn't find any match in old texts),
    // Add them with an fictive old ID but omit oldText to mark it as a newcomer
    xmlSpinsters.forEach(function (spinster) {
        idsToMigrate.set(fictiveOldId(), {
            newId: newTexts.get(spinster.html),
            newText: spinster.html,
            gradeStep: spinster.gradeStep,
            matchLevel: 0,
            lexemes: new Set()
        });
    });
    // Mark typo-fixes
    idsToMigrate.forEach(function (match) {
        var oldText = match.oldText, newText = match.newText;
        if (oldText && newText) {
            if (tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](getLexemes(oldText)).join(' ') === tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](getLexemes(newText)).join(' ')) {
                match.isTypoFix = true;
            }
        }
    });
    console.log("IdsToMigrate", tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](idsToMigrate.values()).map(function (_a) {
        var oldText = _a.oldText, lexemes = _a.lexemes;
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](lexemes).join(' ') + ": " + oldText;
    }));
    return idsToMigrate;
    function findBestMatch(xmlText) {
        var xmlLexemes = getLexemes(xmlText.html);
        var possiblePartners = tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](idsToMigrate.entries()).filter(function (_a) {
            var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](_a, 2), id = _b[0], x = _b[1];
            return x.gradeStep === xmlText.gradeStep;
        })
            .map(function (_a) {
            var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](_a, 2), id = _b[0], _c = _b[1], gradeStep = _c.gradeStep, matchLevel = _c.matchLevel, newText = _c.newText, lexemes = _c.lexemes;
            return ({
                id: id,
                gradeStep: gradeStep,
                matchLevel: matchLevel,
                newText: newText,
                myMatchLevel: getMatchLevel(xmlLexemes, lexemes)
            });
        }).filter(function (pp) { return pp.myMatchLevel >= 50 && (!pp.matchLevel || pp.matchLevel < pp.myMatchLevel); });
        return possiblePartners.sort(function (a, b) { return b.myMatchLevel - a.myMatchLevel; })[0]; // highest first.
    }
    function getMatchLevel(lexemes1, lexemes2) {
        if (lexemes1.size === 0 || lexemes2.size === 0)
            return 0;
        var points1 = 0;
        var points2 = 0;
        lexemes1.forEach(function (word) {
            if (lexemes2.has(word))
                ++points1;
        });
        lexemes2.forEach(function (word) {
            if (lexemes1.has(word))
                ++points2;
        });
        return Math.round(100 * Math.max(points1 / lexemes1.size, points2 / lexemes2.size));
    }
    /*if (dbTexts.length !== xmlTexts.length) {
      // We can no longer assume that the changed texts refer to different formulations of the same meaning.
      // We not map old formulations to new ones.
      // In future, we could handle this case by assuming all old texts not occurring in new data, have been removed and all new have been added.
      throw new Error("Number of " + textType + (course ? ` on course ${course}` : "") + " differs. Cannot migrate.");
    }
    dbTexts.forEach(({name: oldText, id: oldId, gradeStep}, i) => {
      const xmlText = xmlTexts[i].trim();
      if (oldText.trim() !== xmlText) {
        idsToMigrate.set(oldId, {newText: xmlText, newId: newTexts.get(xmlText), oldText, gradeStep});
      }
    });
    return idsToMigrate;*/
}
function migrateSubject(existingSubject, courseSets, subjectToImport, changes) {
    return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
        function migrateCourseInstance(course, courseToImport, idsToMigrate) {
            var showChanges = !shownChanges.has(course.name);
            shownChanges.add(course.name);
            abilityIdsToMigrate.forEach(function (_a, oldId) {
                var newId = _a.newId, oldText = _a.oldText;
                // Relink the course instance with abilities. This change does not need to be visible in GUI.
                changes.push({
                    mutations: function (br) {
                        if (oldText)
                            br.unlink2("courses", course.id, "abilities", oldId);
                        if (newId)
                            br.link2("courses", course.id, "abilities", newId);
                    }
                });
            });
            course.abilitiesOrder = subjectToImport.abilities.map(function (html) { return newAbilityTexts.get(html); });
            var ccsToMigrate = idsToMigrate.ccsToMigrate, krsToMigrate = idsToMigrate.krsToMigrate;
            // Central Content
            ccsToMigrate.forEach(function (_a, oldId) {
                var newId = _a.newId, newText = _a.newText, oldText = _a.oldText, isTypoFix = _a.isTypoFix;
                changes.push({
                    change: showChanges && (oldText ?
                        newText ?
                            isTypoFix ?
                                "Tryckfelsr\u00E4ttning Centralt Inneh\u00E5ll" :
                                "Uppdaterat Centralt Inneh\u00E5ll" :
                            "Borttaget Centralt Inneh\u00E5ll" :
                        "Nytt Centralt Inneh\u00E5ll"),
                    content: "<h4>" + course.name + "</h4><strike>" + (oldText || '') + "</strike><br/>" + (newText || ''),
                    mutations: function (br) {
                        if (newId && ccsToAdd.has(newId) && !createdIds.has(newId)) {
                            var cc = {
                                id: newId,
                                name: newText,
                                acl: ["role:USER:R"],
                                dateTime: Date.now()
                            };
                            br.add("central-content", cc);
                            createdIds.add(newId);
                        }
                        if (oldText)
                            br.unlink2("courses", course.id, "centralContent", oldId);
                        if (newId)
                            br.link2("courses", course.id, "centralContent", newId);
                    }
                });
            });
            course.centralContentOrder = courseToImport.centralContent.map(function (_a) {
                var html = _a.html;
                return newCCTexts.get(html);
            });
            // Knowledge Requirements
            krsToMigrate.forEach(function (_a, oldId) {
                var newId = _a.newId, newText = _a.newText, gradeStep = _a.gradeStep, oldText = _a.oldText, isTypoFix = _a.isTypoFix;
                changes.push({
                    change: showChanges && (oldText ?
                        newText ?
                            isTypoFix ?
                                "Tryckfelsr\u00E4ttning Kunskapskrav" :
                                "Uppdaterat Kunskapskrav" :
                            "Borttaget Kunskapskrav" :
                        "Nytt Kunskapskrav"),
                    content: "<h4>" + course.name + "</h4><strike>" + (oldText || '') + "</strike><br/>" + (newText || ''),
                    mutations: function (br) {
                        if (newId && krsToAdd.has(newId) && !createdIds.has(newId)) {
                            var kr = {
                                id: newId,
                                name: newText,
                                gradeStep: gradeStep,
                                acl: ["role:USER:R"],
                                dateTime: Date.now()
                            };
                            console.log("Adding Knowledge-Requirement " + newId + ": " + newText);
                            br.add("knowledge-requirements", kr);
                            createdIds.add(newId);
                        }
                        if (oldText)
                            br.unlink2("courses", course.id, "knowledgeRequirements", oldId);
                        if (newId)
                            br.link2("courses", course.id, "knowledgeRequirements", newId);
                    }
                });
            });
            course.knowledgeRequirementsOrder =
                courseToImport.knowledgeRequirements.map(function (kr) { return newKRTexts.get(kr.html); });
            // Updates the course properties centralContentOrder and knowledgeRequirementsOrder
            if (abilityIdsToMigrate.size > 0 || ccsToMigrate.size > 0 || krsToMigrate.size > 0) {
                changes.push({
                    change: !course.isTemplate ? "Uppdaterad Kursinstans" : "Uppdaterad Kursmall",
                    content: !course.isTemplate ?
                        course.name + ". Skola: " + (course.school || "ej angiven") + ". Beskrivning: " + (course.description || '') :
                        "" + course.name,
                    mutations: function (br) { return br.put("courses", course); }
                });
            }
        }
        // Tasks:
        // 1. ASYNC OPERATION: Go through all tasks that has edges to any of the old ids.
        // 2. For each found task, do:
        //    A: Iterate tags starting with "course:". Pick the course code.
        //    B: Populate the new property migrationTasks: {
        //         abilities: {[newId: string]: {oldText: string, oldId: string, importDate: number}}, // Be able to create a chain in the GUI !
        //         centralContent: {[newId: string]: {oldText: string, ..."...}},
        //         knowledgeRequirements: {[newId: string]: {oldText: string, ..."...}},
        //       }
        //       OBS1! Mergea abilities, centralCondent och knowledgeRequirements med ev tidigare vrden (s man kan importera om och om igen!)
        //       OBS2! oldId kan frekomma p flera newId om task anvnds av flera kurser. 
        //    C: Create sets for unlinks and link operations per type.
        //    D: For all courseCodes that the task is taggen on,
        //         * register ccsToMigrate.keys() in the unlink set of central contents
        //         * register ccsToMigrate.values() in the link set of central contents
        //         * --"-- for knowledgeRequirements
        //    E: unlink and link with regards to abilityIdsToMigrate (keys() and values() respectively).
        //    F: unlink and link according to the created sets of link / unlink operations.
        //    Note: Unlike course instances, there's no order property to take care of here!
        //
        function migrateTasks() {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
                function fetchTasksInChunksWithEdgesTo(ids, options) {
                    return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
                        var result;
                        return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                            switch (_a.label) {
                                case 0:
                                    // This function should make work around the case when given "ids" contains too many items, by
                                    // dividing the requests into several and merge the result using a Map.
                                    if (ids.length === 0)
                                        return [2 /*return*/, []]; // Otherwise we'll request every task in the system.
                                    result = new Map();
                                    console.log("Number of ids: " + ids.length);
                                    return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_3__["default"].kedBackendClient.list("tasks", tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, options, { hasEdgesTo: ids }))];
                                case 1: 
                                //return result.values();
                                return [2 /*return*/, _a.sent()];
                            }
                        });
                    });
                }
                var oldIds, importDate, tasks, _loop_2, tasks_1, tasks_1_1, task;
                var e_7, _a;
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                    switch (_b.label) {
                        case 0:
                            oldIds = tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](abilityIdsToMigrate.keys(), Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["flatten"])(idsToMigratePerCourse.map(function (c) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](c.ccsToMigrate.keys(), c.krsToMigrate.keys()); }))).filter(function (id) { return !id.startsWith('fictiveOldId'); });
                            importDate = Date.now();
                            return [4 /*yield*/, fetchTasksInChunksWithEdgesTo(oldIds, {
                                    include: ["abilities", "knowledgeRequirements", "centralContent"],
                                    flags: ["includeIdsOnly"]
                                })];
                        case 1:
                            tasks = _b.sent();
                            _loop_2 = function (task) {
                                var e_8, _a, e_9, _b, e_10, _c, e_11, _d;
                                var oldMT = task.migratedTexts || {
                                    abilities: {},
                                    centralContent: {},
                                    knowledgeRequirements: {}
                                };
                                task.migratedTexts = {
                                    abilities: {},
                                    centralContent: {},
                                    knowledgeRequirements: {}
                                };
                                var mutations = [];
                                var changeDescriptions = [];
                                var _loop_3 = function (id) {
                                    var migrationInfo = abilityIdsToMigrate.get(id);
                                    if (migrationInfo) {
                                        var newId_1 = migrationInfo.newId, newText = migrationInfo.newText, isTypoFix = migrationInfo.isTypoFix;
                                        var oldText = migrationInfo.oldText;
                                        var oldId = id;
                                        if (oldMT.abilities[id]) {
                                            // If migrating stuff that was never acknowledges by a teacher,
                                            // We should point out the very old id and text instead of the never-acknowledged one.
                                            oldText = oldMT.abilities[id].oldText;
                                            oldId = oldMT.abilities[id].oldId;
                                        }
                                        if (newId_1 && oldText !== newText) {
                                            // Special case: If oldText === newText, then this is a reimport new XML that reverts back to origin text. Don't require acknowledgement from teacher!
                                            if (!isTypoFix) {
                                                // If this wasn't just a typo fix (changes in stop words, casing or special characters)
                                                task.migratedTexts.abilities[newId_1] = { oldId: oldId, oldText: oldText, importDate: importDate };
                                            }
                                        }
                                        mutations.push(function (br) {
                                            br.unlink2("tasks", task.id, "abilities", id);
                                            if (newId_1)
                                                br.link2("tasks", task.id, "abilities", newId_1);
                                        });
                                        changeDescriptions.push("<strike>" + oldText + "</strike>");
                                        if (newId_1) {
                                            changeDescriptions.push(newText);
                                        }
                                    }
                                };
                                try {
                                    for (var _e = (e_8 = void 0, tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](task.abilities)), _f = _e.next(); !_f.done; _f = _e.next()) {
                                        var id = _f.value.id;
                                        _loop_3(id);
                                    }
                                }
                                catch (e_8_1) { e_8 = { error: e_8_1 }; }
                                finally {
                                    try {
                                        if (_f && !_f.done && (_a = _e.return)) _a.call(_e);
                                    }
                                    finally { if (e_8) throw e_8.error; }
                                }
                                var taskCourseCodes = new Set(task.tags ?
                                    task.tags.filter(function (t) { return t.startsWith('course:'); }).map(function (t) { return t.substr("course:".length); }) :
                                    []);
                                // We need to keep track of linkedIds (for this particular task) for the following reason:
                                // Let's say the task was referred to by two different courses (possible in old versions),
                                // and in old Central Content, the two courses did have slightly different formulations of central content,
                                // so the task was mapped to both of them. Then, in new XML, the same central content was formulated
                                // in a new way that is identical this time between the two courses. Then both old IDs will be replaced
                                // by a single new ID. It would then be unnescessary to link to the new ID twice.
                                var linkedIds = new Set();
                                try {
                                    for (var idsToMigratePerCourse_1 = (e_9 = void 0, tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](idsToMigratePerCourse)), idsToMigratePerCourse_1_1 = idsToMigratePerCourse_1.next(); !idsToMigratePerCourse_1_1.done; idsToMigratePerCourse_1_1 = idsToMigratePerCourse_1.next()) {
                                        var _g = idsToMigratePerCourse_1_1.value, krsToMigrate = _g.krsToMigrate, ccsToMigrate = _g.ccsToMigrate, courseCode = _g.courseCode;
                                        if (taskCourseCodes.size === 0 || taskCourseCodes.has(courseCode)) {
                                            var _loop_4 = function (id) {
                                                var migrationInfo = ccsToMigrate.get(id);
                                                if (migrationInfo) {
                                                    var newId_2 = migrationInfo.newId, newText = migrationInfo.newText, oldText = migrationInfo.oldText, isTypoFix = migrationInfo.isTypoFix;
                                                    var oldId = id;
                                                    if (oldMT.centralContent[id]) {
                                                        // If migrating stuff that was never acknowledges by a teacher,
                                                        // We should point out the very old id and text instead of the never-acknowledged one.
                                                        oldText = oldMT.centralContent[id].oldText;
                                                        oldId = oldMT.centralContent[id].oldId;
                                                    }
                                                    if (newId_2 && oldText !== newText) {
                                                        // Special case: If oldText === newText, then this is a reimport new XML that reverts back to origin text. Don't require acknowledgement from teacher!
                                                        if (!isTypoFix) {
                                                            // If this wasn't just a typo fix (changes in stop words, casing or special characters)
                                                            task.migratedTexts.centralContent[newId_2] = { oldId: oldId, oldText: oldText, importDate: importDate };
                                                        }
                                                    }
                                                    if (!newId_2 || !linkedIds.has(newId_2)) {
                                                        mutations.push(function (br) {
                                                            br.unlink2("tasks", task.id, "centralContent", id);
                                                            if (newId_2)
                                                                br.link2("tasks", task.id, "centralContent", newId_2);
                                                        });
                                                        changeDescriptions.push("<strike>" + oldText + "</strike>");
                                                        if (newId_2) {
                                                            changeDescriptions.push(newText);
                                                            linkedIds.add(newId_2);
                                                        }
                                                    }
                                                }
                                            };
                                            try {
                                                for (var _h = (e_10 = void 0, tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](task.centralContent)), _j = _h.next(); !_j.done; _j = _h.next()) {
                                                    var id = _j.value.id;
                                                    _loop_4(id);
                                                }
                                            }
                                            catch (e_10_1) { e_10 = { error: e_10_1 }; }
                                            finally {
                                                try {
                                                    if (_j && !_j.done && (_c = _h.return)) _c.call(_h);
                                                }
                                                finally { if (e_10) throw e_10.error; }
                                            }
                                            var _loop_5 = function (id) {
                                                var migrationInfo = krsToMigrate.get(id);
                                                if (migrationInfo) {
                                                    var newId_3 = migrationInfo.newId, newText = migrationInfo.newText, oldText = migrationInfo.oldText, isTypoFix = migrationInfo.isTypoFix;
                                                    var oldId = id;
                                                    if (oldMT.knowledgeRequirements[id]) {
                                                        // If migrating stuff that was never acknowledges by a teacher,
                                                        // We should point out the very old id and text instead of the never-acknowledged one.
                                                        oldText = oldMT.knowledgeRequirements[id].oldText;
                                                        oldId = oldMT.knowledgeRequirements[id].oldId;
                                                    }
                                                    if (newId_3 && oldText !== newText) {
                                                        // Special case: If oldText === newText, then this is a reimport new XML that reverts back to origin text. Don't require acknowledgement from teacher!
                                                        if (!isTypoFix) {
                                                            // If this wasn't just a typo fix (changes in stop words, casing or special characters)
                                                            task.migratedTexts.knowledgeRequirements[newId_3] = { oldId: oldId, oldText: oldText, importDate: importDate };
                                                        }
                                                    }
                                                    if (!newId_3 || !linkedIds.has(newId_3)) {
                                                        mutations.push(function (br) {
                                                            br.unlink2("tasks", task.id, "knowledgeRequirements", id);
                                                            if (newId_3)
                                                                br.link2("tasks", task.id, "knowledgeRequirements", newId_3);
                                                        });
                                                        changeDescriptions.push("<strike>" + oldText + "</strike>");
                                                        if (newId_3) {
                                                            changeDescriptions.push(newText);
                                                            linkedIds.add(newId_3);
                                                        }
                                                    }
                                                }
                                            };
                                            try {
                                                for (var _k = (e_11 = void 0, tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](task.knowledgeRequirements)), _l = _k.next(); !_l.done; _l = _k.next()) {
                                                    var id = _l.value.id;
                                                    _loop_5(id);
                                                }
                                            }
                                            catch (e_11_1) { e_11 = { error: e_11_1 }; }
                                            finally {
                                                try {
                                                    if (_l && !_l.done && (_d = _k.return)) _d.call(_k);
                                                }
                                                finally { if (e_11) throw e_11.error; }
                                            }
                                        }
                                    }
                                }
                                catch (e_9_1) { e_9 = { error: e_9_1 }; }
                                finally {
                                    try {
                                        if (idsToMigratePerCourse_1_1 && !idsToMigratePerCourse_1_1.done && (_b = idsToMigratePerCourse_1.return)) _b.call(idsToMigratePerCourse_1);
                                    }
                                    finally { if (e_9) throw e_9.error; }
                                }
                                changes.push({
                                    change: "Migrerad Uppgift",
                                    content: "<h4>" + task.name + " " + (task.school ? "(" + task.school + ") " : '(skola ej angiven)') + "</h4>\n          <p>Kurskod: " + tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](taskCourseCodes).join(',') + "</p>\n          " + changeDescriptions.map(function (txt) { return "<p>" + txt + "</p>"; }).join(''),
                                    mutations: function (br) {
                                        br.put("tasks", task);
                                        mutations.forEach(function (m) { return m(br); });
                                    }
                                });
                            };
                            try {
                                /*const tasks = await env.kedBackendClient.list<Task>("tasks", {
                                  hasEdgesTo: oldIds,
                                  include: ["abilities", "knowledgeRequirements", "centralContent"],
                                  flags: ["includeIdsOnly"]
                                });*/
                                for (tasks_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](tasks), tasks_1_1 = tasks_1.next(); !tasks_1_1.done; tasks_1_1 = tasks_1.next()) {
                                    task = tasks_1_1.value;
                                    _loop_2(task);
                                }
                            }
                            catch (e_7_1) { e_7 = { error: e_7_1 }; }
                            finally {
                                try {
                                    if (tasks_1_1 && !tasks_1_1.done && (_a = tasks_1.return)) _a.call(tasks_1);
                                }
                                finally { if (e_7) throw e_7.error; }
                            }
                            return [2 /*return*/];
                    }
                });
            });
        }
        var dbTextMap, orderedAbilities, orderedAbilities_1, orderedAbilities_1_1, a, courseSets_1, courseSets_1_1, template, _a, _b, cc, _c, _d, kr, _e, newAbilityTexts, abilitiesToAdd, _f, newCCTexts, ccsToAdd, _g, newKRTexts, krsToAdd, abilityIdsToMigrate, idsToMigratePerCourse, createdIds, shownChanges, _loop_1, courseSets_2, courseSets_2_1, _h, template, instances;
        var e_2, _j, e_3, _k, e_4, _l, e_5, _m, e_6, _o;
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_p) {
            switch (_p.label) {
                case 0:
                    dbTextMap = new Map();
                    orderedAbilities = existingSubject.abilitiesOrder ?
                        existingSubject.abilitiesOrder.map(function (id) { return existingSubject.abilities.find(function (a) { return a.id === id; }); }) :
                        existingSubject.abilities;
                    try {
                        for (orderedAbilities_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](orderedAbilities), orderedAbilities_1_1 = orderedAbilities_1.next(); !orderedAbilities_1_1.done; orderedAbilities_1_1 = orderedAbilities_1.next()) {
                            a = orderedAbilities_1_1.value;
                            dbTextMap.set(a.name.trim(), a.id);
                        }
                    }
                    catch (e_2_1) { e_2 = { error: e_2_1 }; }
                    finally {
                        try {
                            if (orderedAbilities_1_1 && !orderedAbilities_1_1.done && (_j = orderedAbilities_1.return)) _j.call(orderedAbilities_1);
                        }
                        finally { if (e_2) throw e_2.error; }
                    }
                    try {
                        for (courseSets_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](courseSets), courseSets_1_1 = courseSets_1.next(); !courseSets_1_1.done; courseSets_1_1 = courseSets_1.next()) {
                            template = courseSets_1_1.value.template;
                            try {
                                for (_a = (e_4 = void 0, tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](template.centralContent)), _b = _a.next(); !_b.done; _b = _a.next()) {
                                    cc = _b.value;
                                    dbTextMap.set(cc.name.trim(), cc.id);
                                }
                            }
                            catch (e_4_1) { e_4 = { error: e_4_1 }; }
                            finally {
                                try {
                                    if (_b && !_b.done && (_l = _a.return)) _l.call(_a);
                                }
                                finally { if (e_4) throw e_4.error; }
                            }
                            try {
                                for (_c = (e_5 = void 0, tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](template.knowledgeRequirements)), _d = _c.next(); !_d.done; _d = _c.next()) {
                                    kr = _d.value;
                                    dbTextMap.set(kr.name.trim(), kr.id);
                                }
                            }
                            catch (e_5_1) { e_5 = { error: e_5_1 }; }
                            finally {
                                try {
                                    if (_d && !_d.done && (_m = _c.return)) _m.call(_c);
                                }
                                finally { if (e_5) throw e_5.error; }
                            }
                        }
                    }
                    catch (e_3_1) { e_3 = { error: e_3_1 }; }
                    finally {
                        try {
                            if (courseSets_1_1 && !courseSets_1_1.done && (_k = courseSets_1.return)) _k.call(courseSets_1);
                        }
                        finally { if (e_3) throw e_3.error; }
                    }
                    _e = diffSubjectGlobalTexts(dbTextMap, subjectToImport.abilities), newAbilityTexts = _e.newTexts, abilitiesToAdd = _e.idsToAdd;
                    _f = diffSubjectGlobalTexts(dbTextMap, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["flatten"])(subjectToImport.courses.map(function (c) { return c.centralContent.map(function (cc) { return cc.html; }); }))), newCCTexts = _f.newTexts, ccsToAdd = _f.idsToAdd;
                    _g = diffSubjectGlobalTexts(dbTextMap, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["flatten"])(subjectToImport.courses.map(function (c) { return c.knowledgeRequirements.map(function (kr) { return kr.html; }); }))), newKRTexts = _g.newTexts, krsToAdd = _g.idsToAdd;
                    console.log("Abilities to add: " + abilitiesToAdd.size);
                    console.log("CCs to add: " + ccsToAdd.size);
                    console.log("KRs to add: " + krsToAdd.size);
                    abilityIdsToMigrate = getIdsToMigrate(orderedAbilities, subjectToImport.abilities.map(function (html) { return ({ html: html }); }), newAbilityTexts, "abilities");
                    idsToMigratePerCourse = courseSets.map(function (_a, i) {
                        var template = _a.template;
                        console.log("Course: " + template.name);
                        var xmlCourse = subjectToImport.courses.find(function (c) { return c.name === template.name; }) ||
                            subjectToImport.courses.find(function (c) { return c.code === template.code; });
                        return {
                            courseCode: template.code,
                            ccsToMigrate: xmlCourse ?
                                getIdsToMigrate(template.centralContent, // Has already been sorted when retrieved via loadCourse()
                                xmlCourse.centralContent.map(function (_a) {
                                    var html = _a.html;
                                    return ({ html: html });
                                }), newCCTexts, "central content", template.name) :
                                new Map(),
                            krsToMigrate: xmlCourse ?
                                getIdsToMigrate(template.knowledgeRequirements, // Has already been sorted when retrieved via loadCourse()
                                xmlCourse.knowledgeRequirements, newKRTexts, "knowledge requirements", template.name) :
                                new Map()
                        };
                    });
                    // OK so now we have all info.
                    // Now, we need to:
                    // Subject:
                    // 1. Remove links from subjects to abilities
                    // 2. Add links from subjects to abilities
                    abilityIdsToMigrate.forEach(function (_a, oldId) {
                        var newText = _a.newText, newId = _a.newId, oldText = _a.oldText, isTypoFix = _a.isTypoFix;
                        //const oldText = existingSubject.abilities.find(a => a.id === oldId).name;
                        changes.push({
                            change: (oldText ?
                                newText ?
                                    isTypoFix ?
                                        "Tryckfelsr\u00E4ttning F\u00F6rm\u00E5ga" :
                                        "Uppdaterad F\u00F6rm\u00E5ga" :
                                    "Borttagen F\u00F6rm\u00E5ga" :
                                "Ny F\u00F6rm\u00E5ga"),
                            content: "<strike>" + (oldText || '') + "</strike><br/>" + (newText || ''),
                            mutations: function (br) {
                                if (newId && abilitiesToAdd.has(newId)) {
                                    var a = {
                                        id: newId,
                                        name: newText,
                                        acl: ["role:USER:R"],
                                        dateTime: Date.now()
                                    };
                                    br.add("abilities", a);
                                }
                                if (oldText)
                                    br.unlink2("subjects", existingSubject.id, "abilities", oldId);
                                if (newId)
                                    br.link2("subjects", existingSubject.id, "abilities", newId);
                            }
                        });
                    });
                    // 3. Update abilitiesOrder on Subject based on subjectToImport.abilities (mapped to ids in newTexts)
                    if (!existingSubject.abilitiesOrder || abilityIdsToMigrate.size > 0) {
                        existingSubject.abilitiesOrder = subjectToImport.abilities.map(function (xml) { return newAbilityTexts.get(xml); });
                        changes.push({
                            mutations: function (br) { return br.put("subjects", existingSubject); },
                            change: existingSubject.abilitiesOrder ?
                                null : // ndringen redan visuell som "Uppdaterad fr frmga", etc, ovan
                                "Inf\u00F6r en ordnad lista p\u00E5 f\u00F6rm\u00E5gor i databasen",
                        });
                    }
                    createdIds = new Set();
                    changes.push({ mutations: function () { return createdIds.clear(); } }); // In case mutations run twice (which it doesn't as of current impl.)
                    shownChanges = new Set();
                    changes.push({ mutations: function () { return shownChanges.clear(); } });
                    _loop_1 = function (template, instances) {
                        var e_12, _a;
                        // Find courseToImport
                        var courseToImport = (subjectToImport.courses.find(function (c) { return c.name === template.name; }) ||
                            subjectToImport.courses.find(function (c) { return c.code === template.code; }));
                        // Find Central Content and Knowledge Requirements to migrate
                        var _b = idsToMigratePerCourse.find(function (x) { return x.courseCode === template.code; }), ccsToMigrate = _b.ccsToMigrate, krsToMigrate = _b.krsToMigrate;
                        try {
                            // Loop through all course instances (instances also contains templates)
                            // and migrate them. This will include creating missing entities in the DB.
                            for (var instances_1 = (e_12 = void 0, tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](instances)), instances_1_1 = instances_1.next(); !instances_1_1.done; instances_1_1 = instances_1.next()) {
                                var course = instances_1_1.value;
                                migrateCourseInstance(course, courseToImport, { ccsToMigrate: ccsToMigrate, krsToMigrate: krsToMigrate });
                            }
                        }
                        catch (e_12_1) { e_12 = { error: e_12_1 }; }
                        finally {
                            try {
                                if (instances_1_1 && !instances_1_1.done && (_a = instances_1.return)) _a.call(instances_1);
                            }
                            finally { if (e_12) throw e_12.error; }
                        }
                    };
                    try {
                        // Courses:
                        // 1. Go through all course instances and:
                        //      A: Remove links from courses to abilities listed in abilityIdsToMigrate.keys()
                        //      B: Add links from courses to abilities abiltitiesToMigrate.values()
                        //      C: Update abilitiesOrder on course instances based on subjectToImport (mapped to ids in newTexts)
                        // 2, 3: Do the same for central-content and knowledge-requirementes:
                        //    Find ccs and krs to migrate based on courseInstance.code
                        //    For both ccs and krs, do:
                        //      A: Unlink ccsToMigrate.keys()
                        //      B: Link ccsToMigrate.values()
                        //      C: Update centralContentOrder based on subjectToImport.centralContent mapped to newTexts ids
                        //      (same for krsToMigrate, with knowledgeRequirementsOrder instead)
                        for (courseSets_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](courseSets), courseSets_2_1 = courseSets_2.next(); !courseSets_2_1.done; courseSets_2_1 = courseSets_2.next()) {
                            _h = courseSets_2_1.value, template = _h.template, instances = _h.instances;
                            _loop_1(template, instances);
                        }
                    }
                    catch (e_6_1) { e_6 = { error: e_6_1 }; }
                    finally {
                        try {
                            if (courseSets_2_1 && !courseSets_2_1.done && (_o = courseSets_2.return)) _o.call(courseSets_2);
                        }
                        finally { if (e_6) throw e_6.error; }
                    }
                    return [4 /*yield*/, migrateTasks()];
                case 1:
                    _p.sent();
                    return [2 /*return*/];
            }
        });
    });
}


/***/ }),

/***/ "./src/components/course-builder/subjects/index.tsx":
/*!**********************************************************!*\
  !*** ./src/components/course-builder/subjects/index.tsx ***!
  \**********************************************************/
/*! exports provided: ShowSubject, Subjects */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Subjects", function() { return Subjects; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _show_subject__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./show-subject */ "./src/components/course-builder/subjects/show-subject.tsx");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ShowSubject", function() { return _show_subject__WEBPACK_IMPORTED_MODULE_3__["ShowSubject"]; });

/* harmony import */ var _courses_course_banner__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../courses/course-banner */ "./src/components/course-builder/courses/course-banner.tsx");
/* harmony import */ var _subjects_inner__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./subjects-inner */ "./src/components/course-builder/subjects/subjects-inner.tsx");






var Subjects = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Subjects, _super);
    function Subjects(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            isListingSubjects: true,
            primarySchoolSubjects: [],
            uploadedSubject: null
        };
        return _this;
    }
    Subjects.prototype.render = function () {
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_courses_course_banner__WEBPACK_IMPORTED_MODULE_4__["CourseBanner"], { title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4mnen"], ["\u00C4mnen"]))), activePage: "subjects", routes: { feedback: this.props.feedbackUrl } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_subjects_inner__WEBPACK_IMPORTED_MODULE_5__["SubjectsInner"], { linkPrefix: "/subjects/" }));
    };
    return Subjects;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

var templateObject_1;


/***/ }),

/***/ "./src/components/course-builder/subjects/show-subject-inner.tsx":
/*!***********************************************************************!*\
  !*** ./src/components/course-builder/subjects/show-subject-inner.tsx ***!
  \***********************************************************************/
/*! exports provided: ShowSubjectInner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ShowSubjectInner", function() { return ShowSubjectInner; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _sub_components_spinner__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../sub-components/spinner */ "./src/components/course-builder/sub-components/spinner.tsx");




var ShowSubjectInner = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](ShowSubjectInner, _super);
    function ShowSubjectInner(props) {
        var _this = _super.call(this, props) || this;
        _this.state = { subject: null };
        return _this;
    }
    ShowSubjectInner.prototype.componentWillMount = function () {
        this.load();
    };
    ShowSubjectInner.prototype.load = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var subject;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].kedBackendClient.get('subjects', this.props.id, { include: 'courseTemplates' })];
                    case 1:
                        subject = _a.sent();
                        this.setState({ subject: subject });
                        return [2 /*return*/];
                }
            });
        });
    };
    ShowSubjectInner.prototype.render = function () {
        if (!this.state.subject)
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_sub_components_spinner__WEBPACK_IMPORTED_MODULE_3__["Spinner"], null));
        var _a = this.state.subject, name = _a.name, code = _a.code, courseTemplates = _a.courseTemplates, schoolType = _a.schoolType;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null, schoolType === 'primary' ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null,
                "Grundskole\u00E4mnet ",
                name,
                " (",
                code,
                ")"),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("ul", { className: "entity-list" }, courseTemplates.map(function (_a) {
                var id = _a.id, code = _a.code, publishable = _a.publishable, points = _a.points, schoolGrade = _a.schoolGrade;
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("li", { key: id, className: "complete" },
                    name,
                    " f\u00F6r \u00E5rskurs ",
                    schoolGrade);
            }))) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null,
                "Kurser f\u00F6r \u00E4mnet ",
                name,
                " (",
                code,
                ")"),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("ul", { className: "entity-list" }, courseTemplates.map(function (_a) {
                var id = _a.id, name = _a.name, code = _a.code, publishable = _a.publishable, points = _a.points;
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("li", { key: id, className: "complete" },
                    name,
                    " - ",
                    points,
                    "p");
            }))));
    };
    return ShowSubjectInner;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/course-builder/subjects/show-subject.tsx":
/*!*****************************************************************!*\
  !*** ./src/components/course-builder/subjects/show-subject.tsx ***!
  \*****************************************************************/
/*! exports provided: ShowSubject */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ShowSubject", function() { return ShowSubject; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _courses_course_banner__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../courses/course-banner */ "./src/components/course-builder/courses/course-banner.tsx");
/* harmony import */ var _sub_components_spinner__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../sub-components/spinner */ "./src/components/course-builder/sub-components/spinner.tsx");
/* harmony import */ var _show_subject_inner__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./show-subject-inner */ "./src/components/course-builder/subjects/show-subject-inner.tsx");






var ShowSubject = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](ShowSubject, _super);
    function ShowSubject(props) {
        var _this = _super.call(this, props) || this;
        _this.state = { subject: null };
        return _this;
    }
    ShowSubject.prototype.componentWillMount = function () {
        this.load();
    };
    ShowSubject.prototype.load = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var subject;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].kedBackendClient.get('subjects', this.props.id, { include: 'courseTemplates' })];
                    case 1:
                        subject = _a.sent();
                        this.setState({ subject: subject });
                        return [2 /*return*/];
                }
            });
        });
    };
    ShowSubject.prototype.render = function () {
        if (!this.state.subject)
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_sub_components_spinner__WEBPACK_IMPORTED_MODULE_4__["Spinner"], null));
        var _a = this.state.subject, name = _a.name, code = _a.code, courseTemplates = _a.courseTemplates, schoolType = _a.schoolType;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_courses_course_banner__WEBPACK_IMPORTED_MODULE_3__["CourseBanner"], { title: name, activePage: "subjects", routes: { feedback: this.props.feedbackUrl } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_show_subject_inner__WEBPACK_IMPORTED_MODULE_5__["ShowSubjectInner"], { id: this.props.id }));
    };
    return ShowSubject;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/course-builder/subjects/skolverket-subject.ts":
/*!**********************************************************************!*\
  !*** ./src/components/course-builder/subjects/skolverket-subject.ts ***!
  \**********************************************************************/
/*! exports provided: parseSkolverketYears */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseSkolverketYears", function() { return parseSkolverketYears; });
function parseSkolverketYears(inYear) {
    switch (inYear.trim()) {
        case '3':
        case '1-3':
            return ['1-3'];
        case '6':
        case '4-6':
            return ['4-6'];
        case '7-9':
        case '9':
            return ['7-9'];
        // Specials
        case '1': return ["1-3"]; // Frekommer i mnena "Svenska" och "Svenska som andrasprk"
        case '1s': return ["1-3"]; // Frekommer i mnena "Svenska" och "Svenska som andrasprk"
        case '1-6': return ["1-3", "4-6"]; // Frekommer i mnet "Hem- och konsumentkunskap"
        case '4-9': return ["4-6", "7-9"]; // Frekommer i mnet "Moderna sprk"
        default: {
            throw new Error("Unexpected year in Skolverket XML: " + inYear + ". Expecting 3,6,9 or 1-3, 4-6, 7-9");
        }
    }
}


/***/ }),

/***/ "./src/components/course-builder/subjects/subjects-inner.tsx":
/*!*******************************************************************!*\
  !*** ./src/components/course-builder/subjects/subjects-inner.tsx ***!
  \*******************************************************************/
/*! exports provided: ShowSubject, SubjectsInner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SubjectsInner", function() { return SubjectsInner; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jquery */ "jquery");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _skolverket_subject__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./skolverket-subject */ "./src/components/course-builder/subjects/skolverket-subject.ts");
/* harmony import */ var _uploaded_subject__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./uploaded-subject */ "./src/components/course-builder/subjects/uploaded-subject.tsx");
/* harmony import */ var _show_subject__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./show-subject */ "./src/components/course-builder/subjects/show-subject.tsx");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ShowSubject", function() { return _show_subject__WEBPACK_IMPORTED_MODULE_7__["ShowSubject"]; });

/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/es/index.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../utils */ "./src/components/course-builder/utils.ts");
/* harmony import */ var _sub_components_spinner__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../sub-components/spinner */ "./src/components/course-builder/sub-components/spinner.tsx");











var SubjectsInner = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](SubjectsInner, _super);
    function SubjectsInner(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            isListingSubjects: true,
            gymnasiumSubjects: [],
            primarySchoolSubjects: [],
            uploadedSubject: null
        };
        return _this;
    }
    SubjectsInner.prototype.componentWillMount = function () {
        this.load();
    };
    SubjectsInner.prototype.load = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var subjects, gymnasiumSubjects, primarySchoolSubjects;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_3__["default"].kedBackendClient.list("subjects")];
                    case 1:
                        subjects = _a.sent();
                        subjects.sort(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["compareProp"])("name"));
                        gymnasiumSubjects = subjects.filter(function (s) { return s.schoolType !== 'primary'; });
                        primarySchoolSubjects = subjects.filter(function (s) { return s.schoolType === 'primary'; });
                        this.setState({ gymnasiumSubjects: gymnasiumSubjects, primarySchoolSubjects: primarySchoolSubjects, isListingSubjects: false });
                        return [2 /*return*/];
                }
            });
        });
    };
    SubjectsInner.prototype.handleFileSelect = function (ev) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var files, xml, doc, typeOfSchooling, schoolType, model, courses, i, course, knownledgeRequirements, centralContents, knowledgeRequirements, centralContentsByStadium_1, knowledgeRequirementsByStadium_1, subjectName_1, subjectCode_1, subjectPurpose, coursesByStadium, model;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        ev.stopPropagation();
                        ev.preventDefault();
                        files = ev.dataTransfer.files;
                        return [4 /*yield*/, Object(_utils__WEBPACK_IMPORTED_MODULE_9__["readBlobAsText"])(files[0])];
                    case 1:
                        xml = _a.sent();
                        doc = jquery__WEBPACK_IMPORTED_MODULE_4___default()(jquery__WEBPACK_IMPORTED_MODULE_4___default.a.parseXML(xml));
                        typeOfSchooling = doc.find("subject>originatorTypeOfSchooling").text().trim() ||
                            doc.find("subject>typeOfSchooling").text().trim();
                        schoolType = typeOfSchooling === "COMPULSORY_SCHOOL" ?
                            'primary' :
                            typeOfSchooling === "UPPER_SECONDARY_EDUCATION" ?
                                'gymnasium' :
                                null;
                        if (schoolType === 'gymnasium') {
                            model = {
                                name: doc.find("subject>name").text().trim(),
                                code: doc.find("subject>code").text().trim(),
                                purpose: doc.find("subject>purpose").text().trim(),
                                courses: [],
                                schoolType: 'gymnasium'
                            };
                            courses = doc.find("subject>courses");
                            for (i = 0; i < courses.length; ++i) {
                                course = jquery__WEBPACK_IMPORTED_MODULE_4___default()(courses[i]);
                                knownledgeRequirements = [].slice.call(course.find("knowledgeRequirements"))
                                    .map(function (r) { return ({
                                    gradeStep: jquery__WEBPACK_IMPORTED_MODULE_4___default()(r).find('gradeStep').text().trim(),
                                    text: jquery__WEBPACK_IMPORTED_MODULE_4___default()(r).find('text').text().trim()
                                }); });
                                model.courses.push({
                                    name: course.find("name").text().trim(),
                                    code: course.find("code").text().trim(),
                                    centralContent: course.find("centralContent").text().trim(),
                                    points: parseInt(course.find("point").text().trim()),
                                    knownledgeRequirements: knownledgeRequirements,
                                });
                            }
                            this.setState({ uploadedSubject: model });
                        }
                        else {
                            centralContents = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["flatten"])(Array.from(doc.find("subject>centralContent"))
                                .map(function (cc) {
                                var year = jquery__WEBPACK_IMPORTED_MODULE_4___default()(cc).find('year').text().trim();
                                var typeOfCentralContent = jquery__WEBPACK_IMPORTED_MODULE_4___default()(cc).find('typeOfCentralContent').text().trim();
                                if (typeOfCentralContent) {
                                    // Do not yet support multiple types of central content.
                                    throw new Error(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4mnet inneh\u00E5ller flera parallella typer av centralt inneh\u00E5ll. Detta st\u00F6ds \u00E4nnu inte."], ["\u00C4mnet inneh\u00E5ller flera parallella typer av centralt inneh\u00E5ll. Detta st\u00F6ds \u00E4nnu inte."]))));
                                }
                                var stadiums = Object(_skolverket_subject__WEBPACK_IMPORTED_MODULE_5__["parseSkolverketYears"])(year);
                                var centralContentsForEachStadium = stadiums.map(function (stadium) { return ({
                                    year: stadium,
                                    text: jquery__WEBPACK_IMPORTED_MODULE_4___default()(cc).find('text').text().trim()
                                }); });
                                return centralContentsForEachStadium;
                            }));
                            knowledgeRequirements = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["flatten"])(Array.from(doc.find("subject>knowledgeRequirement"))
                                .map(function (kr) {
                                var year = jquery__WEBPACK_IMPORTED_MODULE_4___default()(kr).find('year').text().trim();
                                var typeOfRequirement = jquery__WEBPACK_IMPORTED_MODULE_4___default()(kr).find('typeOfRequirement').text().trim();
                                if (typeOfRequirement) {
                                    // Do not yet support multiple types of knowledge requirement.
                                    throw new Error(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4mnet inneh\u00E5ller flera parallella typer av kunskapskrav. Detta st\u00F6ds \u00E4nnu inte."], ["\u00C4mnet inneh\u00E5ller flera parallella typer av kunskapskrav. Detta st\u00F6ds \u00E4nnu inte."]))));
                                }
                                return Object(_skolverket_subject__WEBPACK_IMPORTED_MODULE_5__["parseSkolverketYears"])(year).map(function (stadium) { return ({
                                    year: stadium,
                                    text: jquery__WEBPACK_IMPORTED_MODULE_4___default()(kr).find('text').text().trim(),
                                    gradeStep: jquery__WEBPACK_IMPORTED_MODULE_4___default()(kr).find('gradeStep').text().trim()
                                }); });
                            }));
                            centralContentsByStadium_1 = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["arrayToLookup"])(centralContents, function (cc) { return cc.year; });
                            knowledgeRequirementsByStadium_1 = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["arrayToLookup"])(knowledgeRequirements, function (kr) { return kr.year; });
                            subjectName_1 = doc.find("subject>name").text().trim();
                            subjectCode_1 = doc.find("subject>code").text().trim();
                            subjectPurpose = doc.find("subject>purpose").text().trim();
                            coursesByStadium = ['1-3', '4-6', '7-9']
                                .map(function (stadium) { return ({
                                name: subjectName_1 + ' ' + stadium,
                                code: subjectCode_1 + '|' + stadium,
                                points: 0,
                                year: stadium,
                                centralContent: (centralContentsByStadium_1[stadium] || []).map(function (cc) { return cc.text; }).join('\n'),
                                knownledgeRequirements: (knowledgeRequirementsByStadium_1[stadium] || []).map(function (_a) {
                                    var gradeStep = _a.gradeStep, text = _a.text;
                                    return ({ gradeStep: gradeStep, text: text });
                                })
                            }); });
                            model = {
                                name: subjectName_1,
                                code: subjectCode_1,
                                purpose: subjectPurpose,
                                schoolType: 'primary',
                                courses: coursesByStadium
                            };
                            this.setState({ uploadedSubject: model });
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    SubjectsInner.prototype.onImportSuccess = function (subject) {
        Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["showInfo"])(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Importen av ", " lyckades"], ["Importen av ", " lyckades"])), subject));
        this.setState({ uploadedSubject: null });
        this.load();
    };
    SubjectsInner.prototype.render = function () {
        var _this = this;
        var linkPrefix = this.props.linkPrefix;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null, this.state.uploadedSubject ?
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_uploaded_subject__WEBPACK_IMPORTED_MODULE_6__["UploadedSubject"], { onCancel: function () { return _this.setState({ uploadedSubject: null }); }, onImportSuccess: function (subject) { return _this.onImportSuccess(subject); }, subject: this.state.uploadedSubject })
            : this.state.isListingSubjects ?
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_sub_components_spinner__WEBPACK_IMPORTED_MODULE_10__["Spinner"], null),
                        "Var god v\u00E4nta medan \u00E4mnen h\u00E4mtas...")) :
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Gymnasie\u00E4mnen"], ["Gymnasie\u00E4mnen"])))),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("ul", null, this.state.gymnasiumSubjects.map(function (s) {
                        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("li", { key: s.id, className: s.publishable ? "complete" : "incomplete" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_8__["Link"], { to: linkPrefix + s.id }, s.name));
                    })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Grundskole\u00E4mnen"], ["Grundskole\u00E4mnen"])))),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("ul", null, this.state.primarySchoolSubjects.map(function (s) {
                        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("li", { key: s.id, className: s.publishable ? "complete" : "incomplete" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_8__["Link"], { to: linkPrefix + s.id }, s.name));
                    })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "drop-zone", onDragOver: _utils__WEBPACK_IMPORTED_MODULE_9__["allowCopy"], onDrop: function (ev) { return _this.handleFileSelect(ev); } },
                        "Droppa Subject-fil h\u00E4r fr\u00E5n skolverket (H\u00E4mtas fr\u00E5n ",
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: "http://opendata.skolverket.se", target: "skolverket" }, "opendata.skolverket.se"),
                        ")")));
    };
    return SubjectsInner;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5;


/***/ }),

/***/ "./src/components/course-builder/subjects/uploaded-subject.tsx":
/*!*********************************************************************!*\
  !*** ./src/components/course-builder/subjects/uploaded-subject.tsx ***!
  \*********************************************************************/
/*! exports provided: UploadedSubject */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UploadedSubject", function() { return UploadedSubject; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jquery */ "jquery");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _diff_diff_xml_with_database__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./diff/diff-xml-with-database */ "./src/components/course-builder/subjects/diff/diff-xml-with-database.ts");







var UploadedSubject = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](UploadedSubject, _super);
    function UploadedSubject(props) {
        var _this = _super.call(this, props) || this;
        _this.coursesElems = {};
        _this.centralContentElems = [];
        _this.knowledgeRequirementElems = [];
        _this.state = {
            showFullText: false,
            changes: [],
            isWorking: true,
            isImporting: false
        };
        return _this;
    }
    UploadedSubject.prototype.componentDidMount = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, changes, subjectToImport, error_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        this.addClassesForCherryPickedElements();
                        _b.label = 1;
                    case 1:
                        _b.trys.push([1, 3, 4, 5]);
                        return [4 /*yield*/, this.diffWithExisting()];
                    case 2:
                        _a = _b.sent(), changes = _a.changes, subjectToImport = _a.subjectToImport;
                        this.setState({ changes: changes, subjectToImport: subjectToImport });
                        return [3 /*break*/, 5];
                    case 3:
                        error_1 = _b.sent();
                        this.setState({ error: '' + error_1 });
                        return [3 /*break*/, 5];
                    case 4:
                        this.setState({ isWorking: false });
                        return [7 /*endfinally*/];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    UploadedSubject.prototype.addClassesForCherryPickedElements = function () {
        var abilities = jquery__WEBPACK_IMPORTED_MODULE_3___default()(this.purposeElem).find('li').first().parent().children('li');
        abilities.addClass('ability');
        var centralContents = jquery__WEBPACK_IMPORTED_MODULE_3___default()(this.centralContentElems).find('li');
        centralContents.addClass('central-content');
        var knowledgeRequirements = jquery__WEBPACK_IMPORTED_MODULE_3___default()(this.knowledgeRequirementElems).find('p');
        knowledgeRequirements.addClass('knowledge-requirement');
        var all = jquery__WEBPACK_IMPORTED_MODULE_3___default()([abilities, centralContents, knowledgeRequirements]);
        all.addClass('marked-area');
    };
    UploadedSubject.prototype.cherryPickData = function () {
        var _this = this;
        //
        // Reads elements (tagged by classes in addClassesForCherryPickedElements()) and converts their inner HTML to the corresponding
        // model SubjectToImport. Note that if we need to adjust how to pick the right LI or P elements, we
        // will only need to change the code in addClassesForCherryPickedElements(), not this code.
        //
        var skolSubject = this.props.subject;
        var abilitiesLis = Array.from(jquery__WEBPACK_IMPORTED_MODULE_3___default()(this.purposeElem).find('li').first().parent().children('li'));
        var abilities = abilitiesLis.map(function (a, i) { return (i + 1 + ". " + jquery__WEBPACK_IMPORTED_MODULE_3___default()(a).html()).trim(); }).filter(function (html) { return !!html; });
        var result = {
            name: skolSubject.name,
            code: skolSubject.code,
            schoolType: skolSubject.schoolType,
            abilities: abilities,
            courses: Object.keys(this.coursesElems)
                .map(function (courseCode) { return _this.coursesElems[courseCode]; })
                .map(function (_a) {
                var course = _a.course, elem = _a.elem;
                return ({
                    name: course.name,
                    year: course.year,
                    code: course.code,
                    points: course.points,
                    centralContent: Array.from(jquery__WEBPACK_IMPORTED_MODULE_3___default()(elem).find('.central-content')).map(function (c) { return ({
                        html: jquery__WEBPACK_IMPORTED_MODULE_3___default()(c).html().trim(),
                        group: jquery__WEBPACK_IMPORTED_MODULE_3___default()(c).parent('ul').prev('h4').text().trim()
                    }); }).filter(function (_a) {
                        var html = _a.html;
                        return !!html;
                    }),
                    knowledgeRequirements: Array.from(jquery__WEBPACK_IMPORTED_MODULE_3___default()(elem).find('.grade-step-none .knowledge-requirement')).map(function (r) { return jquery__WEBPACK_IMPORTED_MODULE_3___default()(r).html().trim(); })
                        .filter(function (html) { return !!html; })
                        .map(function (html) { return ({ gradeStep: null, html: html }); })
                        .concat(Array.from(jquery__WEBPACK_IMPORTED_MODULE_3___default()(elem).find('.grade-step-E .knowledge-requirement')).map(function (r) { return jquery__WEBPACK_IMPORTED_MODULE_3___default()(r).html().trim(); })
                        .filter(function (html) { return !!html; })
                        .map(function (html) { return ({ gradeStep: "E", html: html }); })
                        .concat(Array.from(jquery__WEBPACK_IMPORTED_MODULE_3___default()(elem).find('.grade-step-C .knowledge-requirement')).map(function (r) { return jquery__WEBPACK_IMPORTED_MODULE_3___default()(r).html().trim(); })
                        .filter(function (html) { return !!html; })
                        .map(function (html) { return ({ gradeStep: "C", html: html }); }))
                        .concat(Array.from(jquery__WEBPACK_IMPORTED_MODULE_3___default()(elem).find('.grade-step-A .knowledge-requirement')).map(function (r) { return jquery__WEBPACK_IMPORTED_MODULE_3___default()(r).html().trim(); })
                        .filter(function (html) { return !!html; })
                        .map(function (html) { return ({ gradeStep: "A", html: html }); })))
                });
            })
        };
        return result;
    };
    UploadedSubject.prototype.diffWithExisting = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            function ct() {
                var rv = createTime;
                createTime += 2;
                return rv;
            }
            var subjectToImport, changes, existingSubjects, existingSubject, centralContent, knowledgeRequirements, createTime, newSubject_1, subjectAbilities, _loop_1, _a, _b, a, _loop_2, _c, _d, c;
            var e_1, _e, e_2, _f;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_g) {
                switch (_g.label) {
                    case 0:
                        subjectToImport = this.cherryPickData();
                        changes = [];
                        return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__["default"].kedBackendClient.list("subjects")];
                    case 1:
                        existingSubjects = _g.sent();
                        existingSubject = existingSubjects.filter(function (s) { return s.code === _this.props.subject.code; })[0];
                        centralContent = [], knowledgeRequirements = [];
                        createTime = Date.now();
                        if (!existingSubject) return [3 /*break*/, 3];
                        // Include abilities and standardCourses with the found Subject:
                        return [4 /*yield*/, Object(_diff_diff_xml_with_database__WEBPACK_IMPORTED_MODULE_6__["diffXmlWithDatabase"])(existingSubject, subjectToImport, changes)];
                    case 2:
                        // Include abilities and standardCourses with the found Subject:
                        _g.sent();
                        return [3 /*break*/, 4];
                    case 3:
                        newSubject_1 = existingSubject = {
                            id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["createUUID"])(),
                            schoolType: subjectToImport.schoolType,
                            tags: ["schoolType:" + subjectToImport.schoolType],
                            acl: ["role:USER:R"],
                            code: subjectToImport.code,
                            name: subjectToImport.name,
                            abilitiesOrder: [],
                            publishable: false,
                            dateTime: ct()
                        };
                        changes.push({
                            change: "Nytt mne",
                            content: subjectToImport.name + " (" + subjectToImport.code + ")",
                            mutations: function (r) { return r.add("subjects", newSubject_1); }
                        });
                        subjectAbilities = [];
                        _loop_1 = function (a) {
                            var newAbility = {
                                id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["createUUID"])(),
                                name: a,
                                acl: ["role:USER:R"],
                                dateTime: ct()
                            };
                            subjectAbilities.push(newAbility); // To refer from in courses later on!
                            changes.push({
                                change: "Ny frmga",
                                content: a,
                                mutations: function (r) {
                                    r.add("abilities", newAbility);
                                    r.link("subjects", newSubject_1.id, "abilities", newAbility.id, "abilities");
                                }
                            });
                        };
                        try {
                            for (_a = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](subjectToImport.abilities), _b = _a.next(); !_b.done; _b = _a.next()) {
                                a = _b.value;
                                _loop_1(a);
                            }
                        }
                        catch (e_1_1) { e_1 = { error: e_1_1 }; }
                        finally {
                            try {
                                if (_b && !_b.done && (_e = _a.return)) _e.call(_a);
                            }
                            finally { if (e_1) throw e_1.error; }
                        }
                        // Update now when we have abilities order:
                        newSubject_1.abilitiesOrder = subjectAbilities.map(function (_a) {
                            var id = _a.id;
                            return id;
                        });
                        _loop_2 = function (c) {
                            var e_3, _a, e_4, _b, e_5, _c;
                            var newCourse = {
                                id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["createUUID"])(),
                                subjectCode: newSubject_1.code,
                                schoolType: newSubject_1.schoolType,
                                tags: [
                                    "sub:" + newSubject_1.code,
                                    "course:" + c.code,
                                    "schoolType:" + newSubject_1.schoolType
                                ],
                                dateTime: ct(),
                                isTemplate: true,
                                acl: ["role:EMPLOYEE:R"],
                                name: c.name,
                                code: c.code,
                                points: c.points,
                                modules: [],
                                subjectId: newSubject_1.id,
                                resources: [],
                                createdBy: { name: _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__["default"].currentUser.displayName, url: "mailto:" + _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__["default"].currentUser.mail },
                                createdDate: Date.now(),
                                knowledgeRequirementsOrder: [],
                                centralContentOrder: [],
                                abilitiesOrder: subjectAbilities.map(function (_a) {
                                    var id = _a.id;
                                    return id;
                                })
                            };
                            if (c.year)
                                newCourse.schoolGrade = c.year;
                            changes.push({
                                change: "Ny kurs",
                                content: c.name,
                                mutations: function (r) {
                                    r.add("courses", newCourse);
                                    r.link("subjects", newSubject_1.id, "courses", newCourse.id, "courseTemplates");
                                }
                            });
                            var _loop_3 = function (ccGroup, html) {
                                // Check if there exists an identical central content on previous course first
                                var newCentralContent = centralContent.filter(function (cc) { return cc.name === html; })[0];
                                if (!newCentralContent) {
                                    newCentralContent = {
                                        id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["createUUID"])(),
                                        dateTime: ct(),
                                        name: html,
                                        acl: ["role:USER:R"]
                                    };
                                    if (ccGroup)
                                        newCentralContent.group = ccGroup;
                                    centralContent.push(newCentralContent);
                                    changes.push({
                                        change: "Nytt centralt innehll",
                                        content: "<h4>" + ccGroup + "</h4>" + html,
                                        mutations: function (r) {
                                            r.add("central-content", newCentralContent);
                                            r.link("courses", newCourse.id, "central-content", newCentralContent.id, "centralContent");
                                        }
                                    });
                                }
                                else {
                                    changes.push({
                                        mutations: function (r) {
                                            r.link("courses", newCourse.id, "central-content", newCentralContent.id, "centralContent");
                                        }
                                    });
                                }
                                // Register the order in which this central content appeared in the XML:
                                newCourse.centralContentOrder.push(newCentralContent.id);
                            };
                            try {
                                for (var _d = (e_3 = void 0, tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](c.centralContent)), _e = _d.next(); !_e.done; _e = _d.next()) {
                                    var _f = _e.value, ccGroup = _f.group, html = _f.html;
                                    _loop_3(ccGroup, html);
                                }
                            }
                            catch (e_3_1) { e_3 = { error: e_3_1 }; }
                            finally {
                                try {
                                    if (_e && !_e.done && (_a = _d.return)) _a.call(_d);
                                }
                                finally { if (e_3) throw e_3.error; }
                            }
                            var _loop_4 = function (cr) {
                                var newKnowledgeRequirement = knowledgeRequirements.filter(function (kr) { return kr.name === cr.html && kr.gradeStep === cr.gradeStep; })[0];
                                if (!newKnowledgeRequirement) {
                                    newKnowledgeRequirement = {
                                        id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["createUUID"])(),
                                        dateTime: ct(),
                                        name: cr.html,
                                        gradeStep: cr.gradeStep,
                                        acl: ["role:USER:R"]
                                    };
                                    knowledgeRequirements.push(newKnowledgeRequirement);
                                    changes.push({
                                        change: "Nytt kunskapskrav fr betyget " + cr.gradeStep,
                                        content: cr.html,
                                        mutations: function (r) {
                                            r.add("knowledge-requirements", newKnowledgeRequirement);
                                            r.link("courses", newCourse.id, "knowledge-requirements", newKnowledgeRequirement.id, "knowledgeRequirements");
                                        }
                                    });
                                }
                                else {
                                    changes.push({
                                        mutations: function (r) {
                                            r.link("courses", newCourse.id, "knowledge-requirements", newKnowledgeRequirement.id, "knowledgeRequirements");
                                        }
                                    });
                                }
                                // Register the order in which this knowledge requirement appeared in the XML:
                                newCourse.knowledgeRequirementsOrder.push(newKnowledgeRequirement.id);
                            };
                            try {
                                for (var _g = (e_4 = void 0, tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](c.knowledgeRequirements)), _h = _g.next(); !_h.done; _h = _g.next()) {
                                    var cr = _h.value;
                                    _loop_4(cr);
                                }
                            }
                            catch (e_4_1) { e_4 = { error: e_4_1 }; }
                            finally {
                                try {
                                    if (_h && !_h.done && (_b = _g.return)) _b.call(_g);
                                }
                                finally { if (e_4) throw e_4.error; }
                            }
                            var _loop_5 = function (a) {
                                changes.push({
                                    mutations: function (r) {
                                        r.link("courses", newCourse.id, "abilities", a.id, "abilities");
                                    }
                                });
                            };
                            try {
                                // Build knowledge matrix
                                // Link directly from course template to all abilities that the subject has:
                                for (var subjectAbilities_1 = (e_5 = void 0, tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](subjectAbilities)), subjectAbilities_1_1 = subjectAbilities_1.next(); !subjectAbilities_1_1.done; subjectAbilities_1_1 = subjectAbilities_1.next()) {
                                    var a = subjectAbilities_1_1.value;
                                    _loop_5(a);
                                }
                            }
                            catch (e_5_1) { e_5 = { error: e_5_1 }; }
                            finally {
                                try {
                                    if (subjectAbilities_1_1 && !subjectAbilities_1_1.done && (_c = subjectAbilities_1.return)) _c.call(subjectAbilities_1);
                                }
                                finally { if (e_5) throw e_5.error; }
                            }
                        };
                        try {
                            for (_c = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](subjectToImport.courses), _d = _c.next(); !_d.done; _d = _c.next()) {
                                c = _d.value;
                                _loop_2(c);
                            }
                        }
                        catch (e_2_1) { e_2 = { error: e_2_1 }; }
                        finally {
                            try {
                                if (_d && !_d.done && (_f = _c.return)) _f.call(_c);
                            }
                            finally { if (e_2) throw e_2.error; }
                        }
                        _g.label = 4;
                    case 4: return [2 /*return*/, { changes: changes, subjectToImport: subjectToImport }];
                }
            });
        });
    };
    UploadedSubject.prototype.cancel = function () {
        this.props.onCancel();
    };
    UploadedSubject.prototype.import = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var allMutations;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.setState({ isWorking: true, isImporting: true });
                        allMutations = this.state.changes.map(function (change) { return change.mutations; });
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, , 3, 4]);
                        return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__["default"].kedBackendClient.do(function (r) {
                                allMutations.forEach(function (mut) { return mut(r); });
                            })];
                    case 2:
                        _a.sent();
                        return [3 /*break*/, 4];
                    case 3:
                        this.setState({ isWorking: false, isImporting: false });
                        return [7 /*endfinally*/];
                    case 4:
                        this.props.onImportSuccess(this.props.subject.name);
                        return [2 /*return*/];
                }
            });
        });
    };
    UploadedSubject.prototype.fixL = function (html) {
        return html; //.replace('<l fromat="OL">')
    };
    UploadedSubject.prototype.render = function () {
        var _this = this;
        var subjectToImport = this.state.subjectToImport;
        var subject = this.props.subject;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h1", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppladdat \u00C4mne ", ""], ["Uppladdat \u00C4mne ", ""])), subjectToImport ? subjectToImport.name : '')),
            this.state.error ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                "Fel: ",
                this.state.error) :
                this.state.isWorking ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, "Arbetar...") :
                    this.state.isImporting ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, "Importerar...") :
                        this.state.changes.every(function (c) { return !c.change; }) ? // Inga ndringar att visa (bara pseudo-ndringar)
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, "Kunde inte finna n\u00E5gra f\u00F6r\u00E4ndringar fr\u00E5n befintligt data. Klicka OK f\u00F6r att avbryta och \u00E5terg\u00E5."),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { onClick: function () { return _this.cancel(); } }, " OK ")) :
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("table", { style: { border: "1px solid gray", padding: "2px" } },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("thead", null,
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { colSpan: 2 }, "Granskning av \u00E4ndringar i grund-data")),
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "\u00C4ndring"),
                                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "Inneh\u00E5ll"))),
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tbody", null, this.state.changes.filter(function (change) { return change.change; }).map(function (change, i) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", { key: i },
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { style: { padding: "2px" } }, change.change),
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { style: { padding: "2px" }, dangerouslySetInnerHTML: { __html: change.content } })); }))),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { onClick: function () { return _this.cancel(); }, disabled: this.state.isImporting }, "Avbryt"),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { onClick: function () { return _this.import(); }, disabled: this.state.isImporting }, "Importera"),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null)),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { onClick: function () { return _this.setState({ showFullText: !_this.state.showFullText }); } }, this.state.showFullText ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["D\u00F6lj nedan"], ["D\u00F6lj nedan"]))) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Visa hela texten fr\u00E5n Skolverket"], ["Visa hela texten fr\u00E5n Skolverket"])))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("table", { style: { display: this.state.showFullText ? '' : 'none' } },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tbody", null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "Namn"),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null, subject.name)),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "\u00C4mneskod"),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null, subject.code)),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "Syfte"),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { ref: function (elem) { return _this.purposeElem = elem; }, dangerouslySetInnerHTML: { __html: this.fixL(subject.purpose) } })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "Kurser"),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null, subject.courses.map(function (course) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("table", { key: course.code, ref: function (elem) { return _this.coursesElems[course.code] = { course: course, elem: elem }; } },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tbody", null,
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "Kursens namn"),
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null, course.name)),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "Kurskod"),
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null, course.code)),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "Po\u00E4ng"),
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null, course.points)),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "Centralt inneh\u00E5ll"),
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { ref: function (elem) { return _this.centralContentElems.push(elem); }, dangerouslySetInnerHTML: { __html: _this.fixL(course.centralContent) } })),
                                course.knownledgeRequirements.some(function (kr) { return !kr.gradeStep; }) ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "Kunskapskrav utan betygs\u00E4ttning"),
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: "grade-step-none", ref: function (elem) { return _this.knowledgeRequirementElems.push(elem); }, dangerouslySetInnerHTML: { __html: _this.fixL(course.knownledgeRequirements.filter(function (r) { return !r.gradeStep; }).map(function (kr) { return kr.text; }).join('')) } })) : undefined,
                                course.knownledgeRequirements.some(function (kr) { return kr.gradeStep === 'E'; }) ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "Kunskapskrav Betyg E"),
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: "grade-step-E", ref: function (elem) { return _this.knowledgeRequirementElems.push(elem); }, dangerouslySetInnerHTML: { __html: _this.fixL(course.knownledgeRequirements.filter(function (r) { return r.gradeStep === 'E'; }).map(function (kr) { return kr.text; }).join('')) } })) : undefined,
                                course.knownledgeRequirements.some(function (kr) { return kr.gradeStep === 'C'; }) ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "Kunskapskrav Betyg C"),
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: "grade-step-C", ref: function (elem) { return _this.knowledgeRequirementElems.push(elem); }, dangerouslySetInnerHTML: { __html: _this.fixL(course.knownledgeRequirements.filter(function (r) { return r.gradeStep === 'C'; }).map(function (kr) { return kr.text; }).join('')) } })) : undefined,
                                course.knownledgeRequirements.some(function (kr) { return kr.gradeStep === 'A'; }) ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "Kunskapskrav Betyg A"),
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: "grade-step-A", ref: function (elem) { return _this.knowledgeRequirementElems.push(elem); }, dangerouslySetInnerHTML: { __html: _this.fixL(course.knownledgeRequirements.filter(function (r) { return r.gradeStep === 'A'; }).map(function (kr) { return kr.text; }).join('')) } })) : undefined)); }))))));
    };
    return UploadedSubject;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/components/course-builder/utils.ts":
/*!************************************************!*\
  !*** ./src/components/course-builder/utils.ts ***!
  \************************************************/
/*! exports provided: updateDocumentGraphs, dtFormat, shortDateFormat, shortPersonNameFormat, updateModificationStamp, updateCreationStamp, getEmailFromDocAccess, updateModificationAndCreationStamps, applyEtags, readBlob, readBlobAsText, readBlobAsDataUrl, allowCopy, updateCourseBuilderStatus, loadCourse, hasChanges */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateDocumentGraphs", function() { return updateDocumentGraphs; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dtFormat", function() { return dtFormat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shortDateFormat", function() { return shortDateFormat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shortPersonNameFormat", function() { return shortPersonNameFormat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateModificationStamp", function() { return updateModificationStamp; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateCreationStamp", function() { return updateCreationStamp; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getEmailFromDocAccess", function() { return getEmailFromDocAccess; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateModificationAndCreationStamps", function() { return updateModificationAndCreationStamps; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "applyEtags", function() { return applyEtags; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "readBlob", function() { return readBlob; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "readBlobAsText", function() { return readBlobAsText; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "readBlobAsDataUrl", function() { return readBlobAsDataUrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "allowCopy", function() { return allowCopy; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateCourseBuilderStatus", function() { return updateCourseBuilderStatus; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "loadCourse", function() { return loadCourse; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasChanges", function() { return hasChanges; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var react_addons_update__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-addons-update */ "./node_modules/react-addons-update/index.js");
/* harmony import */ var react_addons_update__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_addons_update__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jquery */ "jquery");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../globals/KED.env */ "./src/globals/KED.env.ts");






function updateDocumentGraphs(oldDoc, newDoc, table, graphs, batch) {
    var e_1, _a;
    var docUpdates = {};
    var docId = newDoc.id;
    var _loop_1 = function (navProp) {
        var e_2, _a, e_3, _b, e_4, _c;
        var foreignTable = graphs[navProp];
        var oldList = oldDoc[navProp] || [];
        var newList = newDoc[navProp];
        if (!newList)
            return "continue";
        var tuples = newList
            .map(function (doc, idx) { return ({ doc: doc, idx: idx }); }); // Create tubles of {doc, array-index} so we can update result
        var added = tuples.filter(function (tuple) { return !oldList.some(function (o) { return o.id === tuple.doc.id; }); }); // Find added items
        try {
            for (var added_1 = (e_2 = void 0, tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](added)), added_1_1 = added_1.next(); !added_1_1.done; added_1_1 = added_1.next()) {
                var a = added_1_1.value;
                var mutatedSubDoc = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, a.doc);
                var meta = mutatedSubDoc.$meta;
                delete mutatedSubDoc.$meta; // Delete $meta so that "add" or "update" does not persiste to next state.
                if (meta === 'add') {
                    if (!mutatedSubDoc.id)
                        mutatedSubDoc.id = Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_2__["createUUID"])(); // Generate ID if not done yet.
                    // Now put an 'add' mutation in the batch queue.
                    batch.add(foreignTable, mutatedSubDoc);
                }
                else if (meta === 'update') {
                    batch.put(foreignTable, mutatedSubDoc);
                }
                batch.link(table, docId, foreignTable, mutatedSubDoc.id, navProp);
                // Update result so that state is reflected after succesful POST to server.
                if (!docUpdates[navProp])
                    docUpdates[navProp] = {};
                docUpdates[navProp][a.idx] = { $set: mutatedSubDoc };
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (added_1_1 && !added_1_1.done && (_a = added_1.return)) _a.call(added_1);
            }
            finally { if (e_2) throw e_2.error; }
        }
        var removed = oldList.filter(function (o) { return !newList.some(function (n) { return n.id === o.id; }); });
        try {
            for (var removed_1 = (e_3 = void 0, tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](removed)), removed_1_1 = removed_1.next(); !removed_1_1.done; removed_1_1 = removed_1.next()) {
                var r = removed_1_1.value;
                batch.unlink(table, docId, foreignTable, r.id, navProp);
            }
        }
        catch (e_3_1) { e_3 = { error: e_3_1 }; }
        finally {
            try {
                if (removed_1_1 && !removed_1_1.done && (_b = removed_1.return)) _b.call(removed_1);
            }
            finally { if (e_3) throw e_3.error; }
        }
        var updated = tuples.filter(function (tuple) { return oldList.some(function (o) { return o.id === tuple.doc.id && tuple.doc.$meta === 'update'; }); });
        try {
            for (var updated_1 = (e_4 = void 0, tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](updated)), updated_1_1 = updated_1.next(); !updated_1_1.done; updated_1_1 = updated_1.next()) {
                var u = updated_1_1.value;
                var mutatedSubDoc = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, u.doc);
                delete mutatedSubDoc.$meta;
                batch.put(foreignTable, mutatedSubDoc);
                // Update result so that $meta is removed from navigation prop after successful POST to server.
                if (!docUpdates[navProp])
                    docUpdates[navProp] = {};
                docUpdates[navProp][u.idx] = { $set: mutatedSubDoc };
            }
        }
        catch (e_4_1) { e_4 = { error: e_4_1 }; }
        finally {
            try {
                if (updated_1_1 && !updated_1_1.done && (_c = updated_1.return)) _c.call(updated_1);
            }
            finally { if (e_4) throw e_4.error; }
        }
    };
    try {
        for (var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](Object.keys(graphs)), _c = _b.next(); !_c.done; _c = _b.next()) {
            var navProp = _c.value;
            _loop_1(navProp);
        }
    }
    catch (e_1_1) { e_1 = { error: e_1_1 }; }
    finally {
        try {
            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
        }
        finally { if (e_1) throw e_1.error; }
    }
    return react_addons_update__WEBPACK_IMPORTED_MODULE_3___default()(newDoc, docUpdates);
}
function dtFormat(dateTime) {
    return moment__WEBPACK_IMPORTED_MODULE_1___default()(dateTime).format('YYMMDD HH:mm');
}
function shortDateFormat(dateTime) {
    return moment__WEBPACK_IMPORTED_MODULE_1___default()(dateTime).format('YYMMDD');
}
function shortPersonNameFormat(name) {
    if (!name)
        return "";
    var names = name.split(' ').filter(function (n) { return !!n; });
    var lastName = names.pop();
    return names.map(function (name) { return name[0] + "."; }).concat(lastName).join(' ');
}
function updateModificationStamp(now, obj, user) {
    return react_addons_update__WEBPACK_IMPORTED_MODULE_3___default()(obj, {
        dateTime: { $set: now },
        modifiedDate: { $set: now },
        modifiedBy: {
            $set: {
                name: user.displayName,
                url: "mailto:" + user.mail
            }
        }
    });
}
function updateCreationStamp(now, obj, user) {
    return react_addons_update__WEBPACK_IMPORTED_MODULE_3___default()(obj, {
        createdDate: { $set: now },
        createdBy: {
            $set: {
                name: user.displayName,
                url: "mailto:" + user.mail
            }
        }
    });
}
function getEmailFromDocAccess(resource) {
    if (resource.email)
        return resource.email;
    return resource.url ?
        resource.url.startsWith('mailto:') ?
            resource.url.substring('mailto:'.length) :
            resource.url :
        resource.url;
}
function updateModificationAndCreationStamps(obj, user) {
    var now = Date.now();
    obj = updateModificationStamp(now, obj, user);
    if (!obj.createdBy)
        obj = updateCreationStamp(now, obj, user);
    return obj;
}
function applyEtags(doc, newEtags, graphs) {
    var e_5, _a;
    var res = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, doc);
    var etag = newEtags[doc.id];
    if (etag)
        res.$etag = etag;
    try {
        for (var graphs_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](graphs), graphs_1_1 = graphs_1.next(); !graphs_1_1.done; graphs_1_1 = graphs_1.next()) {
            var label = graphs_1_1.value;
            var newList = doc[label].map(function (d) { return applyEtags(d, newEtags, []); });
            res[label] = newList;
        }
    }
    catch (e_5_1) { e_5 = { error: e_5_1 }; }
    finally {
        try {
            if (graphs_1_1 && !graphs_1_1.done && (_a = graphs_1.return)) _a.call(graphs_1);
        }
        finally { if (e_5) throw e_5.error; }
    }
    return res;
}
function readBlob(blob, m) {
    return new Promise(function (resolve, reject) {
        var reader = new FileReader();
        reader.onload = function (ev) { return resolve(ev.target.result); };
        reader.onabort = function (ev) { return reject(new Error("file read aborted")); };
        reader.onerror = function (ev) { return reject(ev.target.error); };
        m(reader);
    });
}
function readBlobAsText(blob) {
    return readBlob(blob, function (r) { return r.readAsText(blob); });
}
function readBlobAsDataUrl(blob) {
    return readBlob(blob, function (r) { return r.readAsDataURL(blob); });
}
function allowCopy(e) {
    e.stopPropagation();
    e.preventDefault();
    e.dataTransfer.dropEffect = 'copy';
}
function updateCourseBuilderStatus(status) {
    var div = jquery__WEBPACK_IMPORTED_MODULE_4___default()('div.course-builder')[0];
    if (div)
        div.className = "course-builder" + (status ? " status " + status : "");
}
function loadCourse(id, options) {
    return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
        var client, includeTemplateChain, includeTasks, _a, course, courseTasks, templateChain;
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
            switch (_b.label) {
                case 0:
                    client = _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].kedBackendClient;
                    includeTemplateChain = options && options.includeTemplateChain;
                    includeTasks = !options || !options.include || options.include.indexOf("tasks") !== -1;
                    return [4 /*yield*/, Promise.all([
                            client.get("courses", id, {
                                include: options && options.include ? options.include.filter(function (i) { return i !== "tasks"; }) : [
                                    "centralContent",
                                    "knowledgeRequirements",
                                    "abilities",
                                    "images",
                                    "acl" // Don't include tasks here...
                                ]
                            }),
                            // ... but include tasks here instead so that we can load the graphs for the
                            // tasks as well!
                            includeTasks && client.list("tasks", {
                                hasEdgesFrom: id,
                                include: ['knowledgeRequirements', 'centralContent', 'abilities', 'acl'],
                                flags: ['includeIdsOnly'] // Don't need redundant info that's already on course
                            }),
                            includeTemplateChain && client.list("courses", {
                                hasEdgesFrom: id,
                                flags: ['idsOnly']
                            })
                        ])];
                case 1:
                    _a = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"].apply(void 0, [(_b.sent()), 3]), course = _a[0], courseTasks = _a[1], templateChain = _a[2];
                    course.tasks = courseTasks;
                    // Correct the order of Abilities
                    if (course.abilities && course.abilitiesOrder) {
                        course.abilities = course.abilitiesOrder.map(function (id) {
                            return course.abilities.find(function (a) { return a.id === id; });
                        });
                    }
                    // Correct the order of KnowledgeRequirements
                    if (course.knowledgeRequirements && course.knowledgeRequirementsOrder) {
                        course.knowledgeRequirements = course.knowledgeRequirementsOrder.map(function (id) {
                            return course.knowledgeRequirements.find(function (c) { return c.id === id; });
                        });
                    }
                    // Correct the order of CentralContent
                    if (course.centralContent && course.centralContentOrder) {
                        course.centralContent = course.centralContentOrder.map(function (id) {
                            return course.centralContent.find(function (cc) { return cc.id === id; });
                        }); //.filter(x => !!x);// Debugging somthin' . Normally the last .filter()... part should not be nescessary...
                    }
                    // Include template chain if requested.
                    if (includeTemplateChain)
                        course.templateChain = templateChain;
                    return [2 /*return*/, course];
            }
        });
    });
}
// Check differences between two array of type T
function hasChanges(originalValues, currentValues) {
    return originalValues === undefined || currentValues.filter(function (x) { return !originalValues.includes(x); }).length > 0 || originalValues.filter(function (x) { return !currentValues.includes(x); }).length > 0;
}


/***/ }),

/***/ "./src/components/utility-components/LanguageContext.tsx":
/*!***************************************************************!*\
  !*** ./src/components/utility-components/LanguageContext.tsx ***!
  \***************************************************************/
/*! exports provided: LanguageContext */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LanguageContext", function() { return LanguageContext; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var LanguageContext = react__WEBPACK_IMPORTED_MODULE_0__["createContext"]({ intl: null });


/***/ }),

/***/ "./src/components/utility-components/SetupLanguageIntl.tsx":
/*!*****************************************************************!*\
  !*** ./src/components/utility-components/SetupLanguageIntl.tsx ***!
  \*****************************************************************/
/*! exports provided: setupIntl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setupIntl", function() { return setupIntl; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");
/* harmony import */ var react_intl_locale_data_en__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-intl/locale-data/en */ "./node_modules/react-intl/locale-data/en.js");
/* harmony import */ var react_intl_locale_data_en__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_intl_locale_data_en__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_intl_locale_data_sv__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-intl/locale-data/sv */ "./node_modules/react-intl/locale-data/sv.js");
/* harmony import */ var react_intl_locale_data_sv__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_intl_locale_data_sv__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _translations_sv_json__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../translations/sv.json */ "./src/translations/sv.json");
var _translations_sv_json__WEBPACK_IMPORTED_MODULE_4___namespace = /*#__PURE__*/__webpack_require__.t(/*! ../../translations/sv.json */ "./src/translations/sv.json", 1);
/* harmony import */ var _translations_en_json__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../translations/en.json */ "./src/translations/en.json");
var _translations_en_json__WEBPACK_IMPORTED_MODULE_5___namespace = /*#__PURE__*/__webpack_require__.t(/*! ../../translations/en.json */ "./src/translations/en.json", 1);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_8__);









var setupIntl = function (Component) {
    return /** @class */ (function (_super) {
        tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](_SetupLanguageIntl, _super);
        function _SetupLanguageIntl(props) {
            var _this = _super.call(this, props) || this;
            Object(react_intl__WEBPACK_IMPORTED_MODULE_1__["addLocaleData"])(tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](react_intl_locale_data_en__WEBPACK_IMPORTED_MODULE_2___default.a, react_intl_locale_data_sv__WEBPACK_IMPORTED_MODULE_3___default.a));
            _this.messages = {
                'sv': _translations_sv_json__WEBPACK_IMPORTED_MODULE_4__,
                'en': _translations_en_json__WEBPACK_IMPORTED_MODULE_5__
            };
            moment__WEBPACK_IMPORTED_MODULE_8___default()().locale(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_7__["default"].KED_LOCALE);
            return _this;
        }
        _SetupLanguageIntl.prototype.render = function () {
            return react__WEBPACK_IMPORTED_MODULE_6__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_1__["IntlProvider"], { locale: _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_7__["default"].KED_LOCALE, messages: this.messages[_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_7__["default"].KED_LOCALE] },
                react__WEBPACK_IMPORTED_MODULE_6__["createElement"](Component, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.props)));
        };
        return _SetupLanguageIntl;
    }(react__WEBPACK_IMPORTED_MODULE_6__["Component"]));
};


/***/ }),

/***/ "./src/components/utility-components/checkbox.tsx":
/*!********************************************************!*\
  !*** ./src/components/utility-components/checkbox.tsx ***!
  \********************************************************/
/*! exports provided: UICheckbox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UICheckbox", function() { return UICheckbox; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var UICheckbox = function (_a) {
    var state = _a.state, onClick = _a.onClick, label = _a.label;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("label", { className: 'ui-checkbox' },
        label,
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("input", { type: "checkbox", checked: state, onClick: onClick }),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("span", { className: "custom-element" }));
};


/***/ }),

/***/ "./src/components/utility-components/content-editable-field.tsx":
/*!**********************************************************************!*\
  !*** ./src/components/utility-components/content-editable-field.tsx ***!
  \**********************************************************************/
/*! exports provided: ContentEditableField */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContentEditableField", function() { return ContentEditableField; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var ContentEditableField = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](ContentEditableField, _super);
    function ContentEditableField(props) {
        var _this = _super.call(this, props) || this;
        _this.myself = react__WEBPACK_IMPORTED_MODULE_1__["createRef"]();
        _this.state = {
            text: props.text || ''
        };
        return _this;
    }
    ContentEditableField.prototype.render = function () {
        var _a = this.props, tag = _a.tag, text = _a.text, readOnly = _a.readOnly;
        var TagType = tag;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](TagType, { contentEditable: !readOnly, "data-placeholder": this.props.placeholder, ref: this.myself, className: this.props.className, onChange: this.onChange.bind(this), onKeyDown: this.onKeyDown.bind(this), onKeyUp: this.onKeyUp.bind(this), onBlur: this.onBlur.bind(this), onPaste: this.onPaste.bind(this), dangerouslySetInnerHTML: { __html: text } });
    };
    ContentEditableField.prototype.onChange = function (e) {
        this.setState({ text: this.myself.current.innerText });
    };
    /**
     * Take action depending on key-event
     * @param e event from field
     *
     * If allowNavigation then listen to arrow-keys
     * Limits to maxChars
     */
    ContentEditableField.prototype.onKeyDown = function (e) {
        var text = this.myself.current.innerText;
        if (e.key === 'Escape') {
            this.myself.current.innerText = this.props.text || "";
            this.myself.current.blur();
            e.stopPropagation();
        }
        else if (e.key === 'Enter') {
            e.preventDefault();
            this.navigate(text, 'down');
        }
        else if (e.key === 'Tab') {
            this.propagateOnChange(text);
        }
        else if (text.length >= this.props.maxChars && (/^[\d\w\s]$/.test(e.key) && !(e.metaKey || e.ctrlKey))) {
            e.preventDefault();
        }
        if (this.props.allowNavigation === true) {
            var navDir = e.key.startsWith('Arrow') ? e.key.replace('Arrow', '').toLowerCase() : false;
            var caret = document.getSelection().getRangeAt(0).endOffset; // only works for plaintext
            if (navDir && text.length == 0) {
                this.navigate(text, navDir);
            }
            else if (navDir && (navDir == 'up' || navDir == 'down')) {
                this.navigate(text, navDir);
            }
            else if (navDir && ((navDir == 'left' && caret == 0) ||
                (navDir == 'right' && caret == text.length))) {
                this.navigate(text, navDir);
            }
        }
    };
    /**
     *
     * @param e event from field
     * Solely used to hande validations-issues
     */
    ContentEditableField.prototype.onKeyUp = function (e) {
        var text = this.myself.current.innerText;
        if (this.props.validateValue !== undefined && !this.props.validateValue.test(text)) {
            this.myself.current.innerText = this.props.text || "";
            this.myself.current.blur();
            e.preventDefault();
        }
    };
    /**
     * Update value and pass to parents navigate-funciton
     * @param text
     * @param direction
     */
    ContentEditableField.prototype.navigate = function (text, direction) {
        // first update cell
        this.propagateOnChange(text);
        this.setState({ text: text });
        // then navigate away
        this.props.onNavigate(direction);
    };
    /**
     * Make sure pasted text is pure text
     * @param e the paset event
     */
    ContentEditableField.prototype.onPaste = function (e) {
        e.preventDefault();
        var text = (e.clipboardData && e.clipboardData.getData) ? e.clipboardData.getData("text/plain") : '';
        document.execCommand("insertHTML", false, text);
    };
    /**
     * Update value on exit from field
     * @param e
     */
    ContentEditableField.prototype.onBlur = function (e) {
        var text = this.myself.current.innerText;
        this.propagateOnChange(text);
        this.setState({ text: text });
    };
    /**
     * Only update value if it has changed
     * @param newValue
     */
    ContentEditableField.prototype.propagateOnChange = function (newValue) {
        if (this.propagatedOnChange != newValue) {
            this.propagatedOnChange = newValue;
            this.props.onChange(newValue);
        }
    };
    return ContentEditableField;
}(react__WEBPACK_IMPORTED_MODULE_1__["PureComponent"]));



/***/ }),

/***/ "./src/components/utility-components/observe.tsx":
/*!*******************************************************!*\
  !*** ./src/components/utility-components/observe.tsx ***!
  \*******************************************************/
/*! exports provided: Observe */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Observe", function() { return Observe; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var kedbackend_observable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kedbackend/observable */ "./kedbackend/observable.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/utils */ "./src/utils/utils.ts");




var FiberContextReact = react__WEBPACK_IMPORTED_MODULE_2___default.a.createContext(null);
kedbackend_observable__WEBPACK_IMPORTED_MODULE_1__["FiberContext"].addProvider(function () {
    // Here we actuall do useHook(FiberContext) but without logging to internal debug logs
    // Normally, react hooks are sensitive in which order they are called (useState(), etc)
    // but useContext() is not sensitive about that at all.
    // Still, the debug version of react will log calls to useHook() and throw if a render
    // doesn't use the same number of hooks every time. This check should not apply
    // to useHook() since it is not sensitive to the order in which it was called.
    // And we need to be able to call it from within contitional expressions / statements,
    // so we must bypass this debug logging here by accessing the _currentValue directly.
    return FiberContextReact._currentValue;
});
var Observe = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Observe, _super);
    function Observe(props) {
        var _this = _super.call(this, props) || this;
        _this.subscriptions = [];
        _this.outerSubscription = {
            unsubscribe: function () {
                _this.subscriptions.forEach(function (s) { return s.unsubscribe(); });
                _this.subscriptions = [];
            }
        };
        _this.observer = function (value, error, subscription) {
            if (error) {
                _this.setState({ error: error });
            }
            else {
                _this.setState(function (_a) {
                    var counter = _a.counter;
                    return ({ counter: counter + 1, error: error });
                });
            }
        };
        _this.state = {
            counter: 0,
            error: null
        };
        return _this;
    }
    Observe.prototype.componentDidCatch = function (error, info) {
        if (!error || !error.name)
            error = new Error('' + error);
        this.setState({ error: error, info: info });
        console.log(error, info);
    };
    Observe.prototype.componentWillMount = function () {
        this.outerSubscription.unsubscribe();
    };
    Observe.prototype.render = function () {
        if (this.state.error) {
            return this.props.errorFallback || react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Kunde inte ladda inneh\u00E5llet"], ["Kunde inte ladda inneh\u00E5llet"]))));
        }
        this.outerSubscription.unsubscribe();
        return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_2__["Suspense"], { fallback: this.props.fallback || null },
            react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(FiberContextReact.Provider, { value: this }, this.props.children));
    };
    return Observe;
}(react__WEBPACK_IMPORTED_MODULE_2___default.a.Component));

var templateObject_1;


/***/ }),

/***/ "./src/components/utility-components/open-close-box.tsx":
/*!**************************************************************!*\
  !*** ./src/components/utility-components/open-close-box.tsx ***!
  \**************************************************************/
/*! exports provided: OpenCloseBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OpenCloseBox", function() { return OpenCloseBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _charts_goal_progress__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../charts/goal-progress */ "./src/components/charts/goal-progress.tsx");
/* REFACTOR: Move this component outside coursebuilder!
   This is a general-purpose component
*/



var OpenCloseBox = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](OpenCloseBox, _super);
    function OpenCloseBox(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            headerOpen: props.headerOpen || false
        };
        return _this;
    }
    OpenCloseBox.prototype.componentWillReceiveProps = function (nextProps) {
        if (nextProps.headerOpen !== this.props.headerOpen) {
            this.setState({ headerOpen: nextProps.headerOpen });
        }
    };
    OpenCloseBox.prototype.render = function () {
        var _this = this;
        var _a = this.props, title = _a.title, className = _a.className, children = _a.children, headerClassName = _a.headerClassName, contentClassName = _a.contentClassName, displayProgress = _a.displayProgress, progressData = _a.progressData, inactivated = _a.inactivated, inactivatedRender = _a.inactivatedRender;
        var headerOpen = this.state.headerOpen;
        if (inactivated)
            return inactivatedRender === 'titleAndChildren' ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null, title),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null, children)) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null, children);
        //var currentProgressData = //progressData();
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: (className || '') + " openClose" + (headerOpen ? " open" : "") },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "openHeader" + (headerClassName ? " " + headerClassName : ""), onClick: function () {
                    if (_this.props.onOpenClose)
                        _this.props.onOpenClose(!_this.state.headerOpen);
                    _this.setState({ headerOpen: !_this.state.headerOpen });
                } },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "openHeaderContainer" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null, title),
                    displayProgress && react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_charts_goal_progress__WEBPACK_IMPORTED_MODULE_2__["GoalProgress"], tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, progressData)))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "openContent" + (contentClassName ? " " + contentClassName : "") }, children));
    };
    return OpenCloseBox;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/utility-components/sortable-task-list.tsx":
/*!******************************************************************!*\
  !*** ./src/components/utility-components/sortable-task-list.tsx ***!
  \******************************************************************/
/*! exports provided: taskHasMigratedTexts, SortableTaskList */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "taskHasMigratedTexts", function() { return taskHasMigratedTexts; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SortableTaskList", function() { return SortableTaskList; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


function taskHasMigratedTexts(task) {
    return task.migratedTexts && Object.keys(task.migratedTexts).some(function (type) {
        return Object.keys(task.migratedTexts[type]).length > 0;
    });
}
function SortableTaskList(_a) {
    var taskMetas = _a.taskMetas, renderEditLink = _a.renderEditLink, renderLink = _a.renderLink, onSort = _a.onSort;
    var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])({
        taskBeingDragged: null,
        taskBeingHovered: null,
        insertBefore: false,
        originClientY: -1
    }), 2), dragState = _b[0], setDragState = _b[1];
    var taskBeingDragged = dragState.taskBeingDragged, taskBeingHovered = dragState.taskBeingHovered, insertBefore = dragState.insertBefore, originClientY = dragState.originClientY;
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "taskContainer sortable", onDrop: function (ev) {
            if (taskBeingHovered && taskBeingDragged) {
                onSort(taskBeingDragged, taskBeingHovered, insertBefore ? 'before' : 'after');
            }
            setDragState(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, dragState, { taskBeingHovered: null, taskBeingDragged: null }));
        } }, taskMetas.map(function (taskMeta) {
        var task = taskMeta.task, isTaskOwner = taskMeta.isTaskOwner;
        var hasMigratedTexts = taskHasMigratedTexts(task);
        var taskId = task.id;
        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, { key: taskId },
            insertBefore && taskBeingHovered === task ?
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "drop-target", onDragOver: function (ev) { return ev.preventDefault(); } }, "\u00A0") :
                null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: ["align-horizontal", "draggable", task === taskBeingDragged && "drag-source"].filter(function (x) { return x; }).join(' '), draggable: true, onDragStart: function (ev) {
                    ev.dataTransfer.effectAllowed = "move";
                    setDragState(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, dragState, { originClientY: ev.clientY, taskBeingDragged: task }));
                }, onDragOver: function (ev) {
                    if (!taskBeingDragged)
                        return;
                    if (taskBeingDragged === task) {
                        setDragState(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, dragState, { taskBeingHovered: null }));
                        return;
                    }
                    ev.preventDefault();
                    ev.dataTransfer.dropEffect = "move";
                    setDragState(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, dragState, { taskBeingHovered: task, insertBefore: originClientY > ev.clientY }));
                }, onDragEnd: function (ev) {
                    setDragState(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, dragState, { taskBeingHovered: null, taskBeingDragged: null }));
                } },
                isTaskOwner && hasMigratedTexts && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { style: { position: 'relative', top: '0.2em', left: '-0.7em' } },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-pagelines", style: { position: 'absolute', top: 0, left: 0, color: '#49c35a' } }))),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" }, renderEditLink(taskMeta)),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" }, renderLink(taskMeta))),
            !insertBefore && taskBeingHovered === task ?
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "drop-target", onDragOver: function (ev) { return ev.preventDefault(); } }, "\u00A0") :
                null);
    }));
}


/***/ }),

/***/ "./src/components/utility-components/wysiwyg/actions-sv.ts":
/*!*****************************************************************!*\
  !*** ./src/components/utility-components/wysiwyg/actions-sv.ts ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _exec__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./exec */ "./src/components/utility-components/wysiwyg/exec.ts");

/* harmony default export */ __webpack_exports__["default"] = ({
    bold: {
        icon: '<b>F</b>',
        title: 'Fetstil',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('bold'); }
    },
    italic: {
        icon: '<i>K</i>',
        title: 'Kursiv',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('italic'); }
    },
    underline: {
        icon: '<u>U</u>',
        title: 'Understruken',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('underline'); }
    },
    strikethrough: {
        icon: '<strike>S</strike>',
        title: 'Struken',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('strikeThrough'); }
    },
    heading1: {
        icon: '<b>H<sub>1</sub></b>',
        title: 'Rubrik 1',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<H1>'); }
    },
    heading2: {
        icon: '<b>H<sub>2</sub></b>',
        title: 'Rubrik 2',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<H2>'); }
    },
    heading3: {
        icon: '<b>H<sub>3</sub></b>',
        title: 'Rubrik 3',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<H3>'); }
    },
    paragraph: {
        icon: '&#182;',
        title: 'Paragraf',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<P>'); }
    },
    quote: {
        icon: '&#8220; &#8221;',
        title: 'Citat',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<BLOCKQUOTE>'); }
    },
    olist: {
        icon: '<i class="fa fa-list-ol" aria-hidden="true"></i>',
        title: 'Ordnad lista',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertOrderedList'); }
    },
    ulist: {
        icon: '<i class="fa fa-list" aria-hidden="true"></i>',
        title: 'Punktlista',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertUnorderedList'); }
    },
    outdent: {
        icon: '<i class="fa fa-outdent" aria-hidden="true"></i>',
        title: 'Minska indrag',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])("outdent"); }
    },
    indent: {
        icon: '<i class="fa fa-indent" aria-hidden="true"></i>',
        title: 'ka indrag',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])("indent"); },
    },
    code: {
        icon: '&lt;/&gt;',
        title: 'Programkod',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<PRE>'); }
    },
    line: {
        icon: '&#8213;',
        title: 'Vgrt linje',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertHorizontalRule'); }
    },
    link: {
        icon: '<i class="fa fa-link" aria-hidden="true"></i>',
        title: 'Infoga lnk',
        result: function () {
            var url = window.prompt('Ange lnkens URL');
            if (url) {
                var selected = document.getSelection();
                var elem = document.createElement('a');
                elem.href = url;
                elem.target = "_blank";
                elem.appendChild(document.createTextNode(selected.toString()));
                Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertHTML', elem.outerHTML);
            }
        }
    },
    image: {
        icon: '<i class="fa fa-picture-o" aria-hidden="true"></i>',
        title: 'Infoga bild',
        promptMsg: 'Ange bildens URL',
        result: function (ev, component) {
            var url = window.prompt(this.promptMsg);
            if (url) {
                //exec('insertImage', url);
                var img = document.createElement("img");
                img.src = url;
                img.tabIndex = 1;
                insertElement(img);
                img.onfocus = component.onFocus;
                img.onblur = component.onBlur;
                component.props.onChange(component.contentDiv.innerHTML);
            }
        }
    }
});
function insertElement(element) {
    var sel, range;
    if (window.getSelection && (sel = window.getSelection()).rangeCount) {
        range = sel.getRangeAt(0);
        range.collapse(true);
        range.insertNode(element);
        // Move the caret immediately after the inserted span
        range.setStartAfter(element);
        range.collapse(true);
        sel.removeAllRanges();
        sel.addRange(range);
    }
}


/***/ }),

/***/ "./src/components/utility-components/wysiwyg/actions.ts":
/*!**************************************************************!*\
  !*** ./src/components/utility-components/wysiwyg/actions.ts ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _exec__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./exec */ "./src/components/utility-components/wysiwyg/exec.ts");

/* harmony default export */ __webpack_exports__["default"] = ({
    bold: {
        icon: '<b>B</b>',
        title: 'Bold',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('bold'); }
    },
    italic: {
        icon: '<i>I</i>',
        title: 'Italic',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('italic'); }
    },
    underline: {
        icon: '<u>U</u>',
        title: 'Underline',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('underline'); }
    },
    strikethrough: {
        icon: '<strike>S</strike>',
        title: 'Strike-through',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('strikeThrough'); }
    },
    heading1: {
        icon: '<b>H<sub>1</sub></b>',
        title: 'Heading 1',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<H1>'); }
    },
    heading2: {
        icon: '<b>H<sub>2</sub></b>',
        title: 'Heading 2',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<H2>'); }
    },
    heading3: {
        icon: '<b>H<sub>3</sub></b>',
        title: 'Heading 3',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<H3>'); }
    },
    paragraph: {
        icon: '&#182;',
        title: 'Paragraph',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<P>'); }
    },
    quote: {
        icon: '&#8220; &#8221;',
        title: 'Quote',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<BLOCKQUOTE>'); }
    },
    olist: {
        icon: '&#35;',
        title: 'Ordered List',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertOrderedList'); }
    },
    ulist: {
        icon: '&#8226;',
        title: 'Unordered List',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertUnorderedList'); }
    },
    outdent: {
        icon: '<i class="fa fa-outdent" aria-hidden="true"></i>',
        title: 'Outdent',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])("outdent"); }
    },
    indent: {
        icon: '<i class="fa fa-indent" aria-hidden="true"></i>',
        title: 'Indent',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])("indent"); },
    },
    code: {
        icon: '&lt;/&gt;',
        title: 'Code',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<PRE>'); }
    },
    line: {
        icon: '&#8213;',
        title: 'Horizontal Line',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertHorizontalRule'); }
    },
    link: {
        icon: '&#128279;',
        title: 'Link',
        result: function () {
            var url = window.prompt('Enter the link URL');
            if (url) {
                var selected = document.getSelection();
                var elem = document.createElement('a');
                elem.href = url;
                elem.target = "_blank";
                elem.appendChild(document.createTextNode(selected.toString()));
                Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertHTML', elem.outerHTML);
            }
        }
    },
    image: {
        icon: '&#128247;',
        title: 'Image',
        promptMsg: 'Enter the URL of the image',
        result: function () {
            var url = window.prompt(this.promptMsg);
            if (url)
                Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertImage', url);
        }
    }
});


/***/ }),

/***/ "./src/components/utility-components/wysiwyg/exec.ts":
/*!***********************************************************!*\
  !*** ./src/components/utility-components/wysiwyg/exec.ts ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (command, value) {
    if (value === void 0) { value = null; }
    document.execCommand(command, false, value);
});


/***/ }),

/***/ "./src/components/utility-components/wysiwyg/image-edit-actions.ts":
/*!*************************************************************************!*\
  !*** ./src/components/utility-components/wysiwyg/image-edit-actions.ts ***!
  \*************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return imageEditActions; });
function imageEditActions(cb) {
    return [{
            name: 'float-left',
            icon: "<div style=\"position:relative\">\n      <i class=\"fa fa-align-right\" aria-hidden=\"true\"></i>\n      <div style=\"position:absolute; left:-4px;top:0; transform: scale(0.5); transform-origin: left top\">\n        <i class=\"fa fa-picture-o\" aria-hidden=\"true\"></i>\n      </div>\n    </div>",
            title: 'Lt bilden flyta vnster om text',
            result: function () { return cb('float-left'); }
        }, {
            name: 'float-right',
            icon: "<div style=\"position:relative\">\n      <i class=\"fa fa-align-left\" aria-hidden=\"true\"></i>\n      <div style=\"position:absolute; right:-4px;top:0; transform: scale(0.5); transform-origin: right top\">\n        <i class=\"fa fa-picture-o\" aria-hidden=\"true\"></i>\n      </div>\n    </div>",
            title: 'Lt bilden flyta hger om text',
            result: function () { return cb('float-right'); }
        }, {
            name: 'unfloat',
            icon: "<div style=\"position:relative;\" aria-hidden=\"true\">\n      <div style=\"position:absolute;top:0;left:0\">&#8254;</div>\n      <div style=\"position:absolute;top:0:left:0;transform: scale(0.5); transform-origin: left bottom\">\n        <i class=\"fa fa-picture-o\" aria-hidden=\"true\"></i>\n      </div>\n      <div style=\"position:absolute;top:0;left:0\">_</div>\n    </div>",
            title: 'Placera bilden p egen rad',
            result: function () { return cb('unfloat'); }
        }];
}


/***/ }),

/***/ "./src/components/utility-components/wysiwyg/index.tsx":
/*!*************************************************************!*\
  !*** ./src/components/utility-components/wysiwyg/index.tsx ***!
  \*************************************************************/
/*! exports provided: Wysiwyg */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Wysiwyg", function() { return Wysiwyg; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _exec__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./exec */ "./src/components/utility-components/wysiwyg/exec.ts");
/* harmony import */ var _wash_html__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./wash-html */ "./src/components/utility-components/wysiwyg/wash-html.ts");
/* harmony import */ var _image_edit_actions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./image-edit-actions */ "./src/components/utility-components/wysiwyg/image-edit-actions.ts");
/* harmony import */ var _actions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./actions */ "./src/components/utility-components/wysiwyg/actions.ts");






var classes = {
    actionbar: 'wysiwyg-actionbar',
    button: 'wysiwyg-button',
    content: 'wysiwyg-content',
    focusrect: 'wysiwyg-focusrect',
    focuspoint: 'wysiwyg-focuspoint',
    readonlyContent: 'wysiwyg-content readonly'
};
var Wysiwyg = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Wysiwyg, _super);
    function Wysiwyg(props) {
        var _this = _super.call(this, props) || this;
        _this.state = { focusRect: null };
        _this.onFocus = _this.onFocus.bind(_this);
        _this.onBlur = _this.onBlur.bind(_this);
        _this.onMouseDown = _this.onMouseDown.bind(_this);
        _this.onMouseMove = _this.onMouseMove.bind(_this);
        _this.onMouseUp = _this.onMouseUp.bind(_this);
        return _this;
    }
    Wysiwyg.prototype.componentDidMount = function () {
        var _this = this;
        if (!this.props.readOnly) {
            Array.from(this.contentDiv.querySelectorAll("img,a")).map(function (elem) { return elem; })
                .forEach(function (elem) {
                elem.tabIndex = 1;
                elem.onfocus = _this.onFocus;
                elem.onblur = _this.onBlur;
            });
            document.querySelector(".wysiwyg-content").addEventListener('mousedown', this.onMouseDown);
            document.querySelector(".wysiwyg-content").addEventListener('mousemove', this.onMouseMove);
            document.querySelector(".wysiwyg-content").addEventListener('mouseup', this.onMouseUp);
        }
        if (this.props.reportNumChars) {
            this.props.reportNumChars((this.contentDiv && this.contentDiv.innerText && this.contentDiv.innerText.length) || 0);
        }
    };
    Wysiwyg.prototype.componentDidUpdate = function () {
        var _this = this;
        Array.from(this.contentDiv.querySelectorAll("img,a")).map(function (elem) { return elem; })
            .forEach(function (elem) {
            elem.tabIndex = 1;
            elem.onfocus = _this.onFocus;
            elem.onblur = _this.onBlur;
        });
        if (this.props.reportNumChars) {
            this.props.reportNumChars((this.contentDiv && this.contentDiv.innerText && this.contentDiv.innerText.length) || 0);
        }
    };
    Wysiwyg.prototype.componentWillUnmount = function () {
        document.querySelector(".wysiwyg-content").removeEventListener('mousedown', this.onMouseDown);
        document.querySelector(".wysiwyg-content").removeEventListener('mousemove', this.onMouseMove);
        document.querySelector(".wysiwyg-content").removeEventListener('mouseup', this.onMouseUp);
    };
    Wysiwyg.prototype.shouldComponentUpdate = function (nextProps, nextState) {
        //this.contentDiv.onfocus = this.onFocus;
        //this.contentDiv.onblur = this.onBlur;
        return !this.contentDiv ||
            nextState != this.state ||
            nextProps.readOnly !== this.props.readOnly ||
            Object(_wash_html__WEBPACK_IMPORTED_MODULE_3__["washHtml"])(nextProps.html) !== Object(_wash_html__WEBPACK_IMPORTED_MODULE_3__["washHtml"])(this.contentDiv.innerHTML);
    };
    Wysiwyg.prototype.triggerOnChange = function (html) {
        this.props.onChange && this.props.onChange(Object(_wash_html__WEBPACK_IMPORTED_MODULE_3__["washHtml"])(html));
    };
    Wysiwyg.prototype.onFocus = function (ev) {
        var elem = ev.target;
        if (!elem || !elem.tagName)
            return;
        if (elem.tagName !== 'IMG' && elem.tagName !== 'A')
            return;
        var contentParent = this.contentDiv.parentElement;
        var newState = {
            focusRect: getRelatativeClientRect(contentParent, elem),
        };
        switch (elem.tagName) {
            case 'A':
            case 'IMG':
            default: break;
        }
        this.setState(newState);
        this.focusElem = elem;
    };
    Wysiwyg.prototype.onBlur = function (ev) {
        /*if (ev.relatedTarget) {
          const relatedTarget = ev.relatedTarget as HTMLElement;
          if (relatedTarget.className && relatedTarget.className.split(' ').indexOf(classes.button) >= 0) {
            // A image action button was pressed
            set
            return;
          }
        }*/
        if ((ev.target === this.focusElem && ev.relatedTarget !== this.focusRectDiv) ||
            ev.target === this.focusRectDiv) {
            this.setState({ focusRect: null });
        }
    };
    Wysiwyg.prototype.makeClickable = function (elem) {
        elem.tabIndex = 1;
    };
    Wysiwyg.prototype.onMouseDown = function (ev) {
        if ((ev.target.className || "").split(' ').indexOf(classes.focuspoint) >= 0) {
            var corner = this.getRectCorner(ev);
            this.corner = corner;
            this.resizeStartX = ev.clientX;
        }
    };
    Wysiwyg.prototype.onMouseMove = function (ev) {
        if (this.corner && this.state.focusRect && this.focusElem) {
            ev.preventDefault();
            // TODO: Rkna ut baserat p this.corner hur bildens storlek borde ndras.
            // Leta upp bilden per ID frn this.contentDiv
            // Stt DIV:ens style attribut width till ny width.
            // Om DIV:en redan hade height, stt ny height med samma aspect ratio som innan,
            // annars, stt inte height alls (eller mjligtvis till auto))
            var focusRect = this.focusRectDiv.getBoundingClientRect();
            if (focusRect.width < 32)
                return;
            //const currentWidth = focusRect.width;
            //const currentHeight = focusRect.height;
            //const hasHeightStyle = !this.focusElem.style.height || this.focusElem.style.height === "auto";
            var newWidth = Math.max(32, this.corner.endsWith('l') ?
                focusRect.width + (this.resizeStartX - ev.clientX) :
                //focusRect.right - ev.clientX :
                focusRect.width - (this.resizeStartX - ev.clientX));
            this.resizeStartX = ev.clientX;
            //ev.clientX - focusRect.left;
            var factor = newWidth / focusRect.width;
            var newHeight = focusRect.height * factor;
            this.focusElem.style.width = newWidth + "px";
            this.focusElem.style.height = newHeight + "px";
            this.setState({
                focusRect: getRelatativeClientRect(this.contentDiv.parentElement, this.focusElem),
            });
        }
    };
    Wysiwyg.prototype.onMouseUp = function (ev) {
        if (this.corner && this.state.focusRect && this.focusElem) {
            this.corner = null;
            this.triggerOnChange(this.contentDiv.innerHTML);
        }
    };
    Wysiwyg.prototype.getRectCorner = function (ev) {
        var e_1, _a;
        try {
            for (var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"]((ev.target.className || '').split(' ')), _c = _b.next(); !_c.done; _c = _b.next()) {
                var className = _c.value;
                switch (className) {
                    case 'fpul':
                        return 'ul';
                    case 'fpur':
                        return 'fpur';
                    case 'fplr':
                        return 'lr';
                    case 'fpll':
                        return 'll';
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return null;
    };
    Wysiwyg.prototype.execImageEditAction = function (cmd) {
        //console.log(cmd);
        if (!this.focusElem)
            return;
        //console.log("doing it");
        switch (cmd) {
            case 'float-left':
                this.focusElem.style.cssFloat = 'left';
                break;
            case 'float-right':
                this.focusElem.style.cssFloat = 'right';
                break;
            case 'unfloat':
                this.focusElem.style.cssFloat = '';
                break;
        }
        this.triggerOnChange(this.contentDiv.innerHTML);
        this.setState({ focusRect: getRelatativeClientRect(this.contentDiv.parentElement, this.focusElem) });
    };
    Wysiwyg.prototype.render = function () {
        var _this = this;
        var defaultActions = this.props.defaultActions || _actions__WEBPACK_IMPORTED_MODULE_5__["default"];
        var actionsToUse = this.props.actions ? this.props.actions.map(function (action) {
            return typeof action === 'string' ?
                defaultActions[action] :
                defaultActions[action.name] ? tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, defaultActions[action.name], action) :
                    action;
        })
            : Object.keys(defaultActions).map(function (action) { return defaultActions[action]; });
        if (this.state.focusRect) {
            actionsToUse = actionsToUse.concat(Object(_image_edit_actions__WEBPACK_IMPORTED_MODULE_4__["default"])(function (cmd) { return _this.execImageEditAction(cmd); }));
        }
        var focusRect = this.state.focusRect;
        var _a = this.props, readOnly = _a.readOnly, reportNumChars = _a.reportNumChars, maxChars = _a.maxChars;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: this.props.className },
            !readOnly && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: classes.actionbar }, actionsToUse.map(function (action, idx) {
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { key: idx, className: classes.button, dangerouslySetInnerHTML: { __html: action.icon }, title: action.title, onMouseDown: function (ev) { action.result(ev, _this); }, onMouseUp: function (ev) { return setTimeout(function () { return _this.contentDiv.focus(); }, 10); } });
            })),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: readOnly ? classes.readonlyContent : classes.content, style: { position: 'relative', top: 0, left: 0 } },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "editor", ref: function (div) { return _this.contentDiv = div; }, dangerouslySetInnerHTML: { __html: Object(_wash_html__WEBPACK_IMPORTED_MODULE_3__["washHtml"])(this.props.html) }, contentEditable: !readOnly, onPaste: function (ev) {
                        if (!isNaN(maxChars)) {
                            var target = ev.target, currentTarget = ev.currentTarget;
                            //const textBeingOverwritten = (target as any).innerText || "";
                            var editorText = (currentTarget && currentTarget.innerText) || "";
                            var textBeingPasted = ev.clipboardData.getData("text/plain") || "";
                            if (editorText.length + textBeingPasted.length > maxChars) {
                                ev.preventDefault();
                            }
                        }
                    }, onKeyUp: reportNumChars ? function (ev) {
                        var innerText = ev.target.innerText;
                        reportNumChars(innerText ? innerText.length : 0);
                    } : null, onKeyPress: !isNaN(maxChars) ? function (ev) {
                        var innerText = ev.target.innerText;
                        if (innerText && innerText.length >= maxChars) {
                            ev.preventDefault();
                        }
                    } : null, onInput: function (ev) { return _this.triggerOnChange(ev.target.innerHTML); }, onKeyDown: function (ev) {
                        if (readOnly)
                            return;
                        if (reportNumChars && ev.currentTarget) {
                            reportNumChars((ev.currentTarget.innerText || "").length);
                        }
                        //console.log("Key: " + ev.which);
                        if (ev.which >= 35 && ev.which <= 40) { // home/end/up/down/left/right
                            ev.stopPropagation(); // Prevent entire page from scrolling??
                        }
                        if (ev.which === 9) {
                            ev.preventDefault(); // TAB
                            if (ev.shiftKey) {
                                Object(_exec__WEBPACK_IMPORTED_MODULE_2__["default"])("outdent");
                            }
                            else {
                                Object(_exec__WEBPACK_IMPORTED_MODULE_2__["default"])("indent");
                            }
                        }
                        if ((ev.keyCode === 8 || ev.keyCode === 46) && // Delete or Back buttons
                            _this.focusElem && _this.state.focusRect) {
                            if (_this.focusElem && _this.focusElem.parentElement) {
                                _this.focusElem.parentElement.removeChild(_this.focusElem); // Remove marked image
                            }
                            _this.focusElem = null;
                            _this.setState({ focusRect: null });
                            _this.triggerOnChange(_this.contentDiv.innerHTML);
                        }
                    } }),
                focusRect && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { ref: function (div) { return _this.focusRectDiv = div; }, className: classes.focusrect, onBlur: this.onBlur, tabIndex: 1, style: {
                        outline: 0,
                        position: 'absolute',
                        top: this.state.focusRect.top,
                        left: this.state.focusRect.left,
                        width: this.state.focusRect.width,
                        height: this.state.focusRect.height
                    } },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: classes.focuspoint + " fpul", style: { position: 'absolute', top: 0, left: 0 } }),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: classes.focuspoint + " fpur", style: { position: 'absolute', top: 0, right: 0 } }),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: classes.focuspoint + " fplr", style: { position: 'absolute', bottom: 0, right: 0 } }),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: classes.focuspoint + " fpll", style: { position: 'absolute', bottom: 0, left: 0 } }))));
    };
    return Wysiwyg;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

function getRelatativeClientRect(parent, child) {
    var parentRect = parent.getBoundingClientRect();
    var childRect = child.getBoundingClientRect();
    return {
        top: childRect.top - parentRect.top + parent.scrollTop,
        left: childRect.left - parentRect.left + parent.scrollLeft,
        bottom: childRect.bottom - parentRect.top + parent.scrollTop,
        right: childRect.right - parentRect.left + parent.scrollLeft,
        width: childRect.width,
        height: childRect.height
    };
}


/***/ }),

/***/ "./src/components/utility-components/wysiwyg/wash-html.ts":
/*!****************************************************************!*\
  !*** ./src/components/utility-components/wysiwyg/wash-html.ts ***!
  \****************************************************************/
/*! exports provided: washHtml */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "washHtml", function() { return washHtml; });
var parser = new DOMParser();
/** Tags / Attributes Whitelist
 *
 */
var HTML_WASH_POLICY = {
    b: {},
    i: {},
    p: {},
    u: {},
    strike: {},
    pre: {},
    h1: {},
    h2: {},
    h3: {},
    h4: {},
    h5: {},
    img: { src: true, class: true, style: true, tabindex: true },
    a: { href: true, target: true, tabindex: true },
    ul: {},
    ol: {},
    li: {},
    hr: {},
    br: {},
    div: {},
    span: {},
    // table tags:
    table: { border: true },
    tbody: {},
    thead: {},
    tfoot: {},
    tr: {},
    td: { headers: true, colspan: true, rowspan: true },
    th: { abbr: true, headers: true, scope: true, sorted: true, colspan: true, rowspan: true }
};
function washHtml(html) {
    var doc = parser.parseFromString(html, "text/html");
    var childNodes = doc.body.childNodes;
    var modified = false;
    for (var i = 0; i < childNodes.length; ++i) {
        if (washNode(childNodes.item(i))) {
            modified = true;
        }
    }
    return modified ?
        doc.body.innerHTML :
        html; // By returning the original HTML string, we spare the user from refreshing the edit area,
    // which would otherwise put the cursor at the top, losing the position where user where.
}
function washNode(node) {
    var modified = false;
    if (isElement(node)) {
        if (washElement(node)) {
            modified = true;
        }
    }
    if (washChildNodes(node)) {
        modified = true;
    }
    return modified;
}
function washChildNodes(node) {
    var modified = false;
    var childNodes = node.childNodes;
    for (var i = 0; i < childNodes.length; ++i) {
        if (washNode(childNodes.item(i))) {
            modified = true;
        }
    }
    return modified;
}
/** Replace an element with its child nodes.
 *
 */
function removeMiddleElement(element) {
    var childNodes = element.childNodes;
    for (var i = 0; i < childNodes.length; ++i) {
        element.parentNode.insertBefore(childNodes.item(i), element);
    }
    element.remove();
}
function washElement(element) {
    var policy = element.tagName && HTML_WASH_POLICY[element.tagName.toLowerCase()];
    if (!policy) {
        console.warn("Wysiwyg: not allowed tag", element.tagName);
        washChildNodes(element);
        removeMiddleElement(element);
        return true;
    }
    var modified = false;
    for (var i = 0; i < element.attributes.length; ++i) {
        var attr = element.attributes.item(i);
        var allowed = attr.name && !!policy[attr.name.toLowerCase()];
        if (!allowed) {
            modified = true;
            console.warn("Wysiwyg: not allowed attribute", attr.name, "Tag: ", element.tagName);
            element.removeAttribute(attr.name);
        }
    }
    return modified;
}
function isElement(node) {
    return !!node.tagName;
}


/***/ }),

/***/ "./src/contracts/ked-models.ts":
/*!*************************************!*\
  !*** ./src/contracts/ked-models.ts ***!
  \*************************************/
/*! exports provided: Course, futureAbilities */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Course", function() { return Course; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "futureAbilities", function() { return futureAbilities; });
var Course = /** @class */ (function () {
    function Course() {
    }
    return Course;
}());

var futureAbilities = [
    "Lra att lra",
    "Samarbeta",
    "Agera globalt",
    "Visa handlingskraft",
    "Vara innovativ",
    "Leva digitalt"
];


/***/ }),

/***/ "./src/features/feature-flags.json":
/*!*****************************************!*\
  !*** ./src/features/feature-flags.json ***!
  \*****************************************/
/*! exports provided: picker, ksTutorComment, kgTutorComment, termplannerCharts, weekplannerCharts, teacherRights, studyGroups, cbCollapseBoxes, ksAssignments, markPartialKRs, default */
/***/ (function(module) {

module.exports = {"picker":"Integrate coursebuilder and subjectplanner with Google Picker","ksTutorComment":"Integrate KSTermplanner with tutor comments","kgTutorComment":"Integrate KSTermplanner  with tutor comments","termplannerCharts":"Integrate KSTermplanner with progress charts","weekplannerCharts":"Integrate Weekplanner with progress charts","teacherRights":"Activate course builder teacher rights","studyGroups":"Add study groups and google classroom functionality","cbCollapseBoxes":"Course Builder: Collapse modules by default","ksAssignments":"KS show hand-in assignments","markPartialKRs":"Activate mark partial knowledge requirments functionality"};

/***/ }),

/***/ "./src/features/features.ts":
/*!**********************************!*\
  !*** ./src/features/features.ts ***!
  \**********************************/
/*! exports provided: Features, features */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Features", function() { return Features; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "features", function() { return features; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_query_string__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/query-string */ "./src/utils/query-string.ts");
/* harmony import */ var _feature_flags_json__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./feature-flags.json */ "./src/features/feature-flags.json");
var _feature_flags_json__WEBPACK_IMPORTED_MODULE_2___namespace = /*#__PURE__*/__webpack_require__.t(/*! ./feature-flags.json */ "./src/features/feature-flags.json", 1);
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");




var Features = /** @class */ (function () {
    function Features() {
        var e_1, _a;
        this._initialized = false;
        var _loop_1 = function (featureName) {
            Object.defineProperty(this_1, featureName, {
                get: function () {
                    if (!this._initialized)
                        this.init();
                    return this._features[featureName];
                },
                set: function (value) {
                    throw new Error('Feature flags cannot be set here');
                }
            });
        };
        var this_1 = this;
        try {
            for (var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](Object.keys(_feature_flags_json__WEBPACK_IMPORTED_MODULE_2__)), _c = _b.next(); !_c.done; _c = _b.next()) {
                var featureName = _c.value;
                _loop_1(featureName);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
    }
    Features.prototype.init = function () {
        var e_2, _a;
        if (this._initialized)
            return;
        var turnedOnFeatures = (_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_3__["cfg"].KED_FEATURES || "").split(',').map(function (name) { return name.trim().toLowerCase(); });
        var query = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_1__["parseQueryString"])(location.search, { toLower: true });
        if (query.testversion) {
            turnedOnFeatures = ["*"];
        }
        if (query.features) {
            turnedOnFeatures = query.features
                .split(',')
                .map(function (feature) { return feature.trim().toLowerCase(); });
        }
        var turnOnAll = turnedOnFeatures.includes('*');
        this._features = {};
        try {
            for (var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](Object.keys(_feature_flags_json__WEBPACK_IMPORTED_MODULE_2__)), _c = _b.next(); !_c.done; _c = _b.next()) {
                var featureName = _c.value;
                this._features[featureName] = turnOnAll ||
                    turnedOnFeatures.includes(featureName.toLowerCase());
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_2) throw e_2.error; }
        }
        this._initialized = true;
    };
    return Features;
}());

var features = new Features();


/***/ }),

/***/ "./src/features/index.ts":
/*!*******************************!*\
  !*** ./src/features/index.ts ***!
  \*******************************/
/*! exports provided: Features, features */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _features__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./features */ "./src/features/features.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Features", function() { return _features__WEBPACK_IMPORTED_MODULE_0__["Features"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "features", function() { return _features__WEBPACK_IMPORTED_MODULE_0__["features"]; });




/***/ }),

/***/ "./src/global-setters/configure.ts":
/*!*****************************************!*\
  !*** ./src/global-setters/configure.ts ***!
  \*****************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(process) {/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");

_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].ENVIRONMENT = "test";
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_API_URL = "https://backend.kedschools.com/kedbackend-next/api/"; // "https://kedbackendtest.azurewebsites.net/api/"
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].EDS_API_URL = "https://edsportalowinapitest.azurewebsites.net/studentportal/"; // "https://edsportalowinapi.azurewebsites.net/api/"
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_TOKEN_URL = ""; // "https://kedauthtest.azurewebsites.net/token"
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_CLIENT_ID = ""; // "devclient", "testclient", "..."
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_CLIENT_SECRET = "";
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_REALM = "SE1"; // "SE1"
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_LOCALE = _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_LOCALE || "sv"; // "sv", "en". Only set from process.env if not set from SiteVision element config.
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_SCHOOL_LOCALE = _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_SCHOOL_LOCALE || "sv"; // "sv", "en_sin", "en_nin". Only set from process.env if not set from SiteVision element config.
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_RESOURCES_URL = _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_RESOURCES_URL || process.env.KED_RESOURCES_URL;

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../node_modules/process/browser.js */ "./node_modules/process/browser.js")))

/***/ }),

/***/ "./src/global-setters/set-all.ts":
/*!***************************************!*\
  !*** ./src/global-setters/set-all.ts ***!
  \***************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _configure__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./configure */ "./src/global-setters/configure.ts");
/* harmony import */ var _set_bearer_providers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./set-bearer-providers */ "./src/global-setters/set-bearer-providers.ts");
/* harmony import */ var _set_ked_backend_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./set-ked-backend-client */ "./src/global-setters/set-ked-backend-client.ts");
/* harmony import */ var _set_eds_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./set-eds-client */ "./src/global-setters/set-eds-client.ts");
/* These scripts assume some of the global vars have already been set:
  * KED.cfg
  * KED.env.currentUser

  The rest will be set here (client side)
*/






/***/ }),

/***/ "./src/global-setters/set-bearer-providers.ts":
/*!****************************************************!*\
  !*** ./src/global-setters/set-bearer-providers.ts ***!
  \****************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_query_string__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/query-string */ "./src/utils/query-string.ts");
/* harmony import */ var kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend/clientweb */ "./kedbackend/clientweb.js");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _access_control_index__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../access-control/index */ "./src/access-control/index.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/utils */ "./src/utils/utils.ts");








function getMergedTokenPath(tokenPath, locationSearch, scopes) {
    // Merge configured query params of token path with params given to current page
    var currentQuery = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_1__["parseQueryString"])(locationSearch);
    var impersonationProps = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_7__["cherryPickProps"])(currentQuery, _access_control_index__WEBPACK_IMPORTED_MODULE_6__["IMPERSONATION_QUERY_PARAMS"]);
    var _a = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_1__["splitUrlAndQuery"])(tokenPath), 2), tokenPathWithoutQuery = _a[0], tokenQueryString = _a[1];
    var tokenPathQuery = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_1__["parseQueryString"])(tokenQueryString);
    return tokenPathWithoutQuery + Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_1__["generateQueryString"])(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, tokenPathQuery, impersonationProps, { scopes: scopes.join(',') }));
}
function getTokenId(mergedTokenPath, userEmail) {
    return mergedTokenPath + "/" + userEmail;
}
function saveUserInfo(user, tokenId) {
    _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser = user;
    sessionStorage.setItem("userInfo" + tokenId, JSON.stringify(user));
}
function loadUserInfo(tokenId) {
    var storedSessionUser = sessionStorage.getItem("userInfo" + tokenId);
    if (storedSessionUser) {
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser = JSON.parse(storedSessionUser);
    }
}
function createBearerProvider(mergedTokenPath, userEmail) {
    var tokenId = getTokenId(mergedTokenPath, userEmail);
    return new kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__["WebServerBearerProvider"](mergedTokenPath, function (responseText) {
        var res = JSON.parse(responseText);
        if (!res.ok)
            throw new Error(res.error);
        if (res.user) {
            saveUserInfo(res.user, tokenId);
        }
        return { token: res.token, expires: Date.now() + 59 * 60 * 1000 };
    }, tokenId);
}
function createGoogleTokenProvider(mergedTokenPath, userEmail) {
    var tokenId = getTokenId(mergedTokenPath, userEmail);
    return new kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__["WebServerBearerProvider"](mergedTokenPath, function (responseText) {
        var res = JSON.parse(responseText);
        if (!res.ok)
            throw new Error(res.error);
        return { token: res.token, expires: Date.now() + 59 * 60 * 1000 };
    }, tokenId);
}
function createTestTokenProvider(tokenUrl, user, scopes) {
    return new kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["KedBearerProvider"](kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__["isomorphic"], kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__["storage"], tokenUrl + user.mail + location.search, _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_CLIENT_ID, _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_CLIENT_SECRET, tokenUrl, {
        email: user.mail.toLowerCase(),
        roles: user.roles,
        school: user.school,
        schoolType: user.schoolType,
        scopes: scopes
    });
}
// env.currentUser.mail is set by SiteVision server initially.
// A response from /api/token may change the mail attribute of the current
// user, so env.currentUser.mail may be different after getting a response.
// However, the initial value is valuable always in order to distinguish the case
// when one normal user logs out and another user logs in.
var initialUserEmail = _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser && _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser.mail; // Initial value of mail. May change.
if (initialUserEmail) {
    // KED
    if (_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_TOKEN_PATH) {
        //
        //
        // Production / SiteVision proxied /api/token to request tokens from:
        //
        //
        var mergedTokenPath = getMergedTokenPath(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_TOKEN_PATH, location.search, [
            "kedbackend",
            "EDS",
        ]);
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].bearerProvider = createBearerProvider(mergedTokenPath, initialUserEmail);
        loadUserInfo(getTokenId(mergedTokenPath, initialUserEmail));
        // Google
        var googleMergedPath = getMergedTokenPath(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_TOKEN_PATH, location.search, [
            "https://www.googleapis.com/auth/calendar.readonly",
            "https://www.googleapis.com/auth/drive"
        ]);
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].googleTokenProvider = createGoogleTokenProvider(googleMergedPath, initialUserEmail);
    }
    else if (_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_TOKEN_URL && _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_CLIENT_ID && _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_CLIENT_SECRET) {
        //
        //
        // Test - go directly to KEDAUTH server to retrieve tokens
        //
        //
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].bearerProvider = createTestTokenProvider(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_TOKEN_URL, _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser, [
            "kedbackend",
            "EDS",
        ]);
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].googleTokenProvider = createTestTokenProvider(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_TOKEN_URL + "/google", _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser, [
            "https://www.googleapis.com/auth/calendar.readonly",
            "https://www.googleapis.com/auth/drive"
        ]);
    }
    else {
        throw new Error("Missing configuration parameter KED_TOKEN_PATH");
    }
}


/***/ }),

/***/ "./src/global-setters/set-eds-client.ts":
/*!**********************************************!*\
  !*** ./src/global-setters/set-eds-client.ts ***!
  \**********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend/clientweb */ "./kedbackend/clientweb.js");
/* harmony import */ var _apis_edsclient__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../apis/edsclient */ "./src/apis/edsclient.ts");




_globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].edsClient = new _apis_edsclient__WEBPACK_IMPORTED_MODULE_3__["EdsClient"](kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__["isomorphic"], _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_1__["default"].EDS_API_URL, _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].bearerProvider, function () { return _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser.mail; });


/***/ }),

/***/ "./src/global-setters/set-ked-backend-client.ts":
/*!******************************************************!*\
  !*** ./src/global-setters/set-ked-backend-client.ts ***!
  \******************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend/clientweb */ "./kedbackend/clientweb.js");



_globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].kedBackendClient = new kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__["KedBackendClientWeb"](_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_1__["default"].KED_API_URL, _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].bearerProvider);


/***/ }),

/***/ "./src/globals/KED.cfg.ts":
/*!********************************!*\
  !*** ./src/globals/KED.cfg.ts ***!
  \********************************/
/*! exports provided: default, cfg */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cfg", function() { return cfg; });
/* harmony import */ var _KED__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./KED */ "./src/globals/KED.ts");

;
if (!_KED__WEBPACK_IMPORTED_MODULE_0__["default"].cfg)
    _KED__WEBPACK_IMPORTED_MODULE_0__["default"].cfg = {};
/* harmony default export */ __webpack_exports__["default"] = (_KED__WEBPACK_IMPORTED_MODULE_0__["default"].cfg);
var cfg = _KED__WEBPACK_IMPORTED_MODULE_0__["default"].cfg;


/***/ }),

/***/ "./src/globals/KED.env.ts":
/*!********************************!*\
  !*** ./src/globals/KED.env.ts ***!
  \********************************/
/*! exports provided: default, env */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "env", function() { return env; });
/* harmony import */ var _ked__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ked */ "./src/globals/ked.ts");

if (!_ked__WEBPACK_IMPORTED_MODULE_0__["default"].env)
    _ked__WEBPACK_IMPORTED_MODULE_0__["default"].env = {};
/* harmony default export */ __webpack_exports__["default"] = (_ked__WEBPACK_IMPORTED_MODULE_0__["default"].env);
var env = _ked__WEBPACK_IMPORTED_MODULE_0__["default"].env;


/***/ }),

/***/ "./src/globals/KED.ts":
/*!****************************!*\
  !*** ./src/globals/KED.ts ***!
  \****************************/
/*! exports provided: KED_NAMESPACE, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KED_NAMESPACE", function() { return KED_NAMESPACE; });
var KED_NAMESPACE = "KED";
var result = typeof KED === 'undefined' ? {} : KED;
if (typeof window !== 'undefined' && typeof KED === 'undefined') {
    window[KED_NAMESPACE] = result;
}
/* harmony default export */ __webpack_exports__["default"] = (result);


/***/ }),

/***/ "./src/globals/current-user.ts":
/*!*************************************!*\
  !*** ./src/globals/current-user.ts ***!
  \*************************************/
/*! exports provided: getCurrentUser */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getCurrentUser", function() { return getCurrentUser; });
/* harmony import */ var _KED_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./KED.env */ "./src/globals/KED.env.ts");

function getCurrentUser() {
    return _KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser;
}


/***/ }),

/***/ "./src/globals/db.ts":
/*!***************************!*\
  !*** ./src/globals/db.ts ***!
  \***************************/
/*! exports provided: db, globalId, Schools, CourseInstances */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "db", function() { return db; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "globalId", function() { return globalId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Schools", function() { return Schools; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CourseInstances", function() { return CourseInstances; });
/* harmony import */ var _KED_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var kedbackend_repo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kedbackend/repo */ "./kedbackend/repo.js");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _KED_cfg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./KED.cfg */ "./src/globals/KED.cfg.ts");




var db = new kedbackend_repo__WEBPACK_IMPORTED_MODULE_1__["KedBackendRepo"](function () { return _KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].kedBackendClient; }, function () { return _KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser ?
    _KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser.mail :
    ""; }, function () { return _KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser ?
    _KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser.displayName || _KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser.mail :
    ""; });
var globalId = Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_2__["getGlobalId"])(_KED_cfg__WEBPACK_IMPORTED_MODULE_3__["default"].KED_REALM);
var Schools = {
    standardSchool: db.schools.name("standard").cacheOptimized().single(),
    get mySchool() { return db.schools.name(_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser.school).cacheOptimized().single(); }
};
var CourseInstances = {
    getBranchId: function (school, courseId) {
        return school.switchMap(function (school) {
            return db.branches
                .hasEdgesFrom([school.officialBranchId])
                .name("draft")
                .tags(courseId)
                .idsOnly()
                .map(function (_a) {
                var id = _a.id;
                return id;
            })
                .toValue()
                .map(function (ids) { return ids.length > 0 ? ids[0] : undefined; });
        });
    },
    /** Get a DRAFT branch for given course ID and given school.
     * If there is not yet such a branch, create it using mutationsOnEmpty() which will
     * lead to the C# code DocumentRepository.ReadOrMutate() via DocumentController.
     */
    getOrCreateBranchId: function (school, courseId) {
        return db.courseInstances.idsOnly().id(courseId).switchMap(function () {
            return school.switchMap(function (school) {
                return db.branches
                    .hasEdgesFrom([school.officialBranchId])
                    .name("draft")
                    .tags(courseId)
                    .idsOnly()
                    .mutationsOnEmpty(function (tx) {
                    // These 2 mutations will occur server side, atomically.
                    // Will be sent on each request in the query, but will only execute if query results in zero items.
                    //console.log("School:", school);
                    var id = Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_2__["createUUID"])();
                    tx.add("branches", {
                        id: id,
                        acl: [
                            "role:USER:R",
                            "schoolRole:" + school.name + "/EMPLOYEE:S"
                        ],
                        name: 'draft',
                        schoolId: school.id,
                        treeParentId: school.officialBranchId,
                        tags: [courseId]
                    });
                    // Approving the branch makes sure that it was created by an EMPLOYEE on given school.
                    tx.link2("branches", school.officialBranchId, "approvedChildren", id);
                })
                    .single()
                    .map(function (_a) {
                    var id = _a.id;
                    return id;
                });
            });
        });
    },
    getAllDescendantIds: function (courseId) {
        return db.courseBlocks.tags(courseId).idsOnly().concat(db.courseContents.tags(courseId).idsOnly()).concat(db.courseTabs.tags(courseId).idsOnly()).concat(db.tasks.tags(courseId).idsOnly())
            .map(function (x) { return x.id; });
    }
};


/***/ }),

/***/ "./src/globals/ked.ts":
/*!****************************!*\
  !*** ./src/globals/ked.ts ***!
  \****************************/
/*! exports provided: KED_NAMESPACE, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KED_NAMESPACE", function() { return KED_NAMESPACE; });
var KED_NAMESPACE = "KED";
var result = typeof KED === 'undefined' ? {} : KED;
if (typeof window !== 'undefined' && typeof KED === 'undefined') {
    window[KED_NAMESPACE] = result;
}
/* harmony default export */ __webpack_exports__["default"] = (result);


/***/ }),

/***/ "./src/repos/repo.ts":
/*!***************************!*\
  !*** ./src/repos/repo.ts ***!
  \***************************/
/*! exports provided: Repo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Repo", function() { return Repo; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

var Repo = /** @class */ (function () {
    function Repo(comm) {
        this.comm = comm;
        this.listPromise = null;
        this.items = null;
        this.subscribers = [];
    }
    Repo.prototype.subscribe = function (subscriber) {
        var _this = this;
        return this.ensureHasData().then(function () {
            subscriber(_this.items, _this.error);
            _this.subscribers.push(subscriber);
        });
    };
    Repo.prototype.unsubscribe = function (subscriber) {
        this.subscribers = this.subscribers.filter(function (s) { return s !== subscriber; });
    };
    Repo.prototype.notifySubscribers = function () {
        var _this = this;
        this.subscribers.forEach(function (s) { return s(_this.items, _this.error); });
    };
    Repo.prototype.ensureHasData = function () {
        if (!this.listPromise)
            this.refreshFromServer();
        return this.listPromise;
    };
    Repo.prototype.refreshFromServer = function () {
        var _this = this;
        this.listPromise = this.comm.query().then(function (items) {
            _this.items = items;
            _this.error = null;
            _this.notifySubscribers();
        }).catch(function (error) {
            _this.error = error;
            _this.items = _this.items || [];
            _this.notifySubscribers();
        });
        return this.listPromise;
    };
    Repo.prototype.update = function (item) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var updatedItems;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.ensureHasData()];
                    case 1:
                        _a.sent();
                        updatedItems = Array.isArray(item) ? item : [item];
                        this.items = this.items.map(function (it) {
                            var updatedItem = updatedItems.find(function (_a) {
                                var id = _a.id;
                                return it.id === id;
                            });
                            return updatedItem ?
                                Object.assign({}, updatedItem) :
                                it;
                        });
                        this.notifySubscribers();
                        return [2 /*return*/];
                }
            });
        });
    };
    Repo.prototype.insert = function (item) {
        var _this = this;
        return this.ensureHasData().then(function () {
            _this.items = _this.items.concat(item);
            _this.notifySubscribers();
        });
    };
    Repo.prototype.delete = function (id) {
        var _this = this;
        var ids = Array.isArray(id) ? id : [id];
        return this.ensureHasData().then(function () {
            _this.items = _this.items.filter(function (it) { return !ids.some(function (id) { return it.id === id; }); });
            _this.notifySubscribers();
        });
    };
    return Repo;
}());



/***/ }),

/***/ "./src/repos/school-courses.ts":
/*!*************************************!*\
  !*** ./src/repos/school-courses.ts ***!
  \*************************************/
/*! exports provided: mySchoolCoursesRepo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mySchoolCoursesRepo", function() { return mySchoolCoursesRepo; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _repo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./repo */ "./src/repos/repo.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/utils */ "./src/utils/utils.ts");




var SchoolCoursesRepo = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](SchoolCoursesRepo, _super);
    function SchoolCoursesRepo(getSchoolName) {
        var _this = _super.call(this, {
            query: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                var schoolName, schools;
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            schoolName = getSchoolName();
                            return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].kedBackendClient.list("schools", {
                                    name: schoolName,
                                    include: ["courses"]
                                })];
                        case 1:
                            schools = _a.sent();
                            this._schoolId = schools.length > 0 && schools[0].id;
                            if (!this._schoolId)
                                throw new Error(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Skolan ", " finns inte registrerad i systemet.\n          Kontakta en administrat\u00F6r f\u00F6r Kursbyggarverktyget och be om att l\u00E4gga till skolan med namnet \"", "\""], ["Skolan ", " finns inte registrerad i systemet.\n          Kontakta en administrat\u00F6r f\u00F6r Kursbyggarverktyget och be om att l\u00E4gga till skolan med namnet \"", "\""])), schoolName, schoolName));
                            return [2 /*return*/, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["flatten"])(schools.map(function (school) { return school.courses; }))];
                    }
                });
            }); }
        }) || this;
        return _this;
    }
    SchoolCoursesRepo.prototype.getSchoolId = function () {
        var _this = this;
        return this.ensureHasData().then(function () { return _this._schoolId; });
    };
    return SchoolCoursesRepo;
}(_repo__WEBPACK_IMPORTED_MODULE_1__["Repo"]));
var mySchoolCoursesRepo = new SchoolCoursesRepo(function () { return _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.school; });
var templateObject_1;


/***/ }),

/***/ "./src/test/data/users.ts":
/*!********************************!*\
  !*** ./src/test/data/users.ts ***!
  \********************************/
/*! exports provided: users */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "users", function() { return users; });
var users = [{
        displayName: "Administratr",
        mail: "vemendo@kedschools.com",
        roles: ['ADMIN', 'EMPLOYEE'],
        school: 'KED',
        username: "admin"
    }, {
        displayName: "David",
        mail: "david.fahlander@vemendo.se",
        roles: ['ADMIN', 'EMPLOYEE'],
        school: 'KED',
        username: "david"
    },
    {
        displayName: "Andrei",
        mail: "andrei.spatarelu@vemendo.se",
        roles: ['ADMIN', 'EMPLOYEE', 'STUDENT'],
        school: 'KED',
        username: "andrei"
    }, {
        displayName: "Carl Holmberg",
        mail: "carl.holmberg@kunskapsgymnasiet.se",
        roles: ['ADMIN', 'EMPLOYEE'],
        school: 'Norrkping',
        username: "carl.holmberg@kunskapsgymnasiet.se"
    }, {
        displayName: "Carl",
        mail: "carl@kedschools.com",
        roles: ['ADMIN', 'EMPLOYEE', 'STUDENT'],
        school: 'KED',
        username: "carl"
    }, {
        displayName: "david.fahlander@kedschools.com",
        mail: "david.fahlander@kedschools.com",
        roles: ["ADMIN", "EMPLOYEE", "STUDENT"],
        school: "KED",
        username: "david.fahlander@kedschools.com"
    }, {
        displayName: "Teacher 1",
        mail: "teacher1.classroom@kedschools.com",
        roles: ['EMPLOYEE'],
        school: 'KED',
        username: "teacher1.classroom@kedschools.com"
    }, {
        displayName: "Test-Live-Elev1",
        mail: "ubw6757@edu.kunskapsgymnasiet.se",
        roles: ['STUDENT'],
        school: 'Uppsala',
        username: "ubw6757@edu.kunskapsgymnasiet.se"
    }, {
        displayName: "Test-Live-Elev2",
        mail: "ums4302@edu.kunskapsgymnasiet.se",
        roles: ['STUDENT'],
        school: 'Uppsala',
        username: "ums4302@edu.kunskapsgymnasiet.se"
    }, {
        displayName: "Test-Live-Elev3",
        mail: "uhh3460@edu.kunskapsgymnasiet.se",
        roles: ['STUDENT'],
        school: 'Uppsala',
        username: "uhh3460@edu.kunskapsgymnasiet.se"
    }, {
        displayName: "Test-Live-Elev4(fel goals issue)",
        mail: "umt6826@edu.kunskapsskolan.se",
        roles: ["STUDENT"],
        school: "Uppsala",
        username: "umt6826@edu.kunskapsskolan.se"
    }, {
        displayName: "Test-Live-Elev5(future abilities)",
        mail: "ujg3833@edu.kunskapsskolan.se",
        roles: ["STUDENT"],
        school: "Uppsala",
        username: "ujg3833@edu.kunskapsskolan.se"
    }, {
        displayName: "Test-Live-Elev6(future abilities)",
        mail: "ujt1363@edu.kunskapsskolan.se",
        roles: ["STUDENT"],
        school: "Uppsala",
        username: "ujt1363@edu.kunskapsskolan.se"
    }, {
        displayName: "Test-Live-Lrare1",
        mail: "rickard.albertsson@kunskapsgymnasiet.se",
        roles: ['EMPLOYEE'],
        school: 'Uppsala',
        username: "rickard.albertsson@kunskapsgymnasiet.se"
    }, {
        displayName: "EDSTestUserGymnasium",
        mail: "uhh3200@edu.kunskapsgymnasiet.se",
        //mail: "UHH3200@EDU.KUNSKAPSGYMNASIET.SE",
        roles: ["STUDENT"],
        username: "EDSTestUser1",
        school: "KED",
        schoolType: "Gymnasium"
    }, {
        displayName: "vemendo.elev@kedschools.com",
        mail: "vemendo.elev@kedschools.com",
        roles: ["STUDENT"],
        username: "vemendo.elev@kedschools.com",
        school: "KED",
        schoolType: "Gymnasium"
    }, {
        displayName: "Medarbetare Nacka",
        mail: "medarbetare.nacka@kunskapsskolan.se",
        roles: ["EMPLOYEE"],
        username: "medarbetare.nacka/KS",
        school: "Nacka",
        schoolType: "Grundskolor"
    }, {
        displayName: "Medarbetare Globen",
        mail: "medarbetare.globen@kunskapsgymnasiet.se",
        roles: ["EMPLOYEE"],
        username: "medarbetare.globen/KS",
        school: "Globen",
        schoolType: "Gymnasium"
    }, {
        displayName: "Elev Globen",
        mail: "elev.globen@edu.kunskapsgymnasiet.se",
        schoolGrade: 2,
        roles: ['STUDENT'],
        username: "elev.globen",
        school: "Globen",
        schoolType: "Gymnasium"
    }, {
        displayName: "Elev Bors",
        mail: "elev.boras@edu.kunskapsskolan.se",
        schoolGrade: 7,
        roles: ['STUDENT'],
        username: "elev.boras",
        school: "Bors",
        schoolType: "Grundskolor"
    }, {
        displayName: "Elev Borlnge",
        mail: "elev.borlange@edu.kunskapsskolan.se",
        schoolGrade: 9,
        roles: ['STUDENT'],
        username: 'elev.borlange/KS',
        school: 'Borlnge',
        schoolType: "Gymnasium"
    }, {
        displayName: "Roll-ls",
        mail: "none@kunskapsskolan.se",
        username: "none",
        roles: []
    }];


/***/ }),

/***/ "./src/test/set-current-user.ts":
/*!**************************************!*\
  !*** ./src/test/set-current-user.ts ***!
  \**************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _data_users__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./data/users */ "./src/test/data/users.ts");
/* harmony import */ var _utils_query_string__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/query-string */ "./src/utils/query-string.ts");



var username = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_2__["parseQueryString"])(location.search).user;
if (username) {
    var user = _data_users__WEBPACK_IMPORTED_MODULE_1__["users"].find(function (u) { return u.username === username; });
    if (user) {
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser = user;
    }
}
var _a = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_2__["parseQueryString"])(location.search), role = _a.role, school = _a.school;
if (_globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser) {
    if (role) {
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser.roles = role.split(',');
    }
    if (school) {
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser.school = school;
    }
}


/***/ }),

/***/ "./src/test/testpage-coursebuilder.tsx":
/*!*********************************************!*\
  !*** ./src/test/testpage-coursebuilder.tsx ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _set_current_user__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./set-current-user */ "./src/test/set-current-user.ts");
/* harmony import */ var _global_setters_set_all__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../global-setters/set-all */ "./src/global-setters/set-all.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _components_course_builder__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/course-builder */ "./src/components/course-builder/index.tsx");
/* harmony import */ var _utils_choose_user__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils/choose-user */ "./src/test/utils/choose-user.tsx");
/* harmony import */ var _components_utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../components/utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");
/* harmony import */ var _components_utility_components_SetupLanguageIntl__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../components/utility-components/SetupLanguageIntl */ "./src/components/utility-components/SetupLanguageIntl.tsx");

// <Initialization>
 // Emulate server-side script to set current user
 // Client-side initialization
// </Initialization>







var _App = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](_App, _super);
    function _App(props) {
        var _this = _super.call(this, props) || this;
        if (!location.hash)
            location.hash = "#/";
        return _this;
    }
    _App.prototype.render = function () {
        var intl = this.props.intl;
        return _globals_KED_env__WEBPACK_IMPORTED_MODULE_3__["default"].currentUser ?
            react__WEBPACK_IMPORTED_MODULE_4__["createElement"](_components_utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_7__["LanguageContext"].Provider, { value: { intl: intl } },
                react__WEBPACK_IMPORTED_MODULE_4__["createElement"](_components_course_builder__WEBPACK_IMPORTED_MODULE_5__["CourseBuilder"], { viewCourseUrl: "courseviewer.html", feedbackUrl: "http://svt.se/nyheter" }))
            : react__WEBPACK_IMPORTED_MODULE_4__["createElement"](_utils_choose_user__WEBPACK_IMPORTED_MODULE_6__["ChooseUser"], null);
    };
    return _App;
}(react__WEBPACK_IMPORTED_MODULE_4__["Component"]));
var App = Object(_components_utility_components_SetupLanguageIntl__WEBPACK_IMPORTED_MODULE_9__["setupIntl"])(Object(react_intl__WEBPACK_IMPORTED_MODULE_8__["injectIntl"])(_App));
/* harmony default export */ __webpack_exports__["default"] = (App);


/***/ }),

/***/ "./src/test/utils/choose-user.tsx":
/*!****************************************!*\
  !*** ./src/test/utils/choose-user.tsx ***!
  \****************************************/
/*! exports provided: ChooseUser */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChooseUser", function() { return ChooseUser; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _data_users__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../data/users */ "./src/test/data/users.ts");


function ChooseUser() {
    var select;
    return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "sv-layout" },
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("h2", null, "V\u00E4lj anv\u00E4ndare"),
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("table", { className: "login-table" },
            react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("thead", null,
                react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("tr", null,
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("th", null, "Namn"),
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("th", null, "Roller"),
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("th", null, "E-post"),
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("th", null, "Skola"))),
            react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("tbody", null, _data_users__WEBPACK_IMPORTED_MODULE_1__["users"].map(function (_a) {
                var username = _a.username, displayName = _a.displayName, mail = _a.mail, school = _a.school, roles = _a.roles;
                return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("tr", { key: mail, onClick: function () { return location.search = "?user=" + username; } },
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("td", null, displayName),
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("td", { style: roles.length === 0 ? { fontStyle: 'italic' } : {} }, roles.length === 0 ? "saknar roller" : roles.join(', ')),
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("td", null, mail),
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("td", { style: school ? {} : { fontStyle: 'italic' } }, school || "saknar skola"));
            }))));
}
;


/***/ }),

/***/ "./src/translations/en.json":
/*!**********************************!*\
  !*** ./src/translations/en.json ***!
  \**********************************/
/*! exports provided: addeditsubtask.deleteSubtask, addeditsubtask.editSubtask, addeditsubtask.nameLabel, addeditsubtask.addSubtask, calendar.currentDate, calendar.fullDayEventLocation, calendar.loadCalendarEvents, calendar.loadingCalendar, calendar.weekNumber, common.addDescriptionPlhd, common.cancel, common.changesNotSavedErrorOccured, common.changesNotSavedUnauthorized, common.descriptionLabel, common.errorSavingData, common.linkLabel, common.loading, common.nameLabel, common.save, common.saved, common.saving, common.remove, customTask.addWorkGoalTitle, customTask.enterNamePlhd, learningGoalsLost.overall, task.addSubtask, task.editTask, task.editWorkGoals, task.enterTaskNamePlhd, task.removeDeadline, task.removeThisTask, task.removeWorkGoals, task.setDeadline, task.setDeadlineLabel, task.subTasks, task.targetNameLabel, task.taskNameLabel, task.whatShouldYouDoPlhd, taskList.nextWeekTask, taskList.lastWeekTask, taskList.currentWeekTask, taskList.removeTaskFromWeeklyPlanning, taskList.addTaskToWeeklyPlanning, termplanner.comments, termplanner.course, termplanner.edsGoalGrades, termplanner.englishLanguage, termplanner.finalStep, termplanner.firstTerm, termplanner.hindiLanguage, termplanner.ict, termplanner.loadingTermplanner, termplanner.maths, termplanner.modernLanguage, termplanner.noFinalStepAvailable, termplanner.secondTerm, termplanner.termPlanning, termplanner.weekNumber, termplanner.chartsBoxTitle, termplanner.yoga, tutorNoteDialog.weekComment, test.chooseComponentLabel, test.pageDescription, userTasks.addLearningGoal, userTasks.deleteLearningGoal, userTasks.goals, weekNotebook.title, weekplanner.addLearningGoal, weekplanner.addLearningGoalTitle, weekplanner.confirmRemoveLearningObjectives, weekplanner.copyPreviousWeekTaks, weekplanner.emptyLearningGoalErr, weekplanner.evaluation, weekplanner.evaluationDescription, weekplanner.learningGoal, weekplanner.logBook, weekplanner.nameCannotBeEmpty, weekplanner.nameMustNotBeEmpty, weekplanner.strategy, weekplanner.strategyAndEvaluation, weekplanner.strategyDescription, weekplanner.weekNumber, wysiwyg.bold, wysiwyg.code, wysiwyg.heading1, wysiwyg.heading2, wysiwyg.heading3, wysiwyg.image, wysiwyg.imagePromptMsg, wysiwyg.italic, wysiwyg.line, wysiwyg.link, wysiwyg.olist, wysiwyg.paragraph, wysiwyg.quote, wysiwyg.strikethrough, wysiwyg.ulist, wysiwyg.underline, default */
/***/ (function(module) {

module.exports = {"addeditsubtask.deleteSubtask":"Delete subtask","addeditsubtask.editSubtask":"Edit subtask","addeditsubtask.nameLabel":"Name of subtask","addeditsubtask.addSubtask":"Add sub-task","calendar.currentDate":"Week {week}, {year}","calendar.fullDayEventLocation":"Place: {location}","calendar.loadCalendarEvents":"Load calendar events...","calendar.loadingCalendar":"Loading calendars... (listing...)","calendar.weekNumber":"W{weekNumber}","common.addDescriptionPlhd":"Add description...","common.cancel":"Cancel","common.changesNotSavedErrorOccured":"An error occured while saving data. Your changes were not saved.","common.changesNotSavedUnauthorized":"The changes were not saved due to insufficient authority","common.descriptionLabel":"Description","common.errorSavingData":"An error occured while saving data.","common.linkLabel":"Link","common.loading":"Loading...","common.nameLabel":"Name","common.save":" Save","common.saved":" Saved","common.saving":"Saving","common.remove":"Delete","customTask.addWorkGoalTitle":"Add own working goal","customTask.enterNamePlhd":"Enter Name...","learningGoalsLost.overall":"Overall","task.addSubtask":"Add subtask","task.editTask":"Edit task","task.editWorkGoals":"Edit working goal","task.enterTaskNamePlhd":"Enter the name of task...","task.removeDeadline":"Delete deadline","task.removeThisTask":"Delete this task","task.removeWorkGoals":"Delete working goal","task.setDeadline":"Set deadline","task.setDeadlineLabel":"Set deadline...","task.subTasks":"Subtasks","task.targetNameLabel":"Name of working goal","task.taskNameLabel":"Name of task","task.whatShouldYouDoPlhd":"What should you do?","taskList.nextWeekTask":"for next week (w{week})","taskList.lastWeekTask":"for last week (w{week})","taskList.currentWeekTask":"for week {week}","taskList.removeTaskFromWeeklyPlanning":"Delete task from your weekly planning {week}","taskList.addTaskToWeeklyPlanning":"Add task to your weekly planning {week}","termplanner.comments":"Comments","termplanner.course":"Theme course","termplanner.edsGoalGrades":"Intermediate goals","termplanner.englishLanguage":"Eng","termplanner.finalStep":"Final Step","termplanner.firstTerm":"FT {year}","termplanner.hindiLanguage":"Hindi","termplanner.ict":"ICT","termplanner.loadingTermplanner":"Loading Termplanner","termplanner.maths":"Maths","termplanner.modernLanguage":"MFL","termplanner.noFinalStepAvailable":"No final step available","termplanner.secondTerm":"ST {year}","termplanner.termPlanning":"Term planner","termplanner.weekNumber":"Week","termplanner.chartsBoxTitle":"Progress Charts","termplanner.yoga":"Yoga","tutorNoteDialog.weekComment":"Note for week {weekNumber}","test.chooseComponentLabel":"Component","test.pageDescription":"Test page for the components on the starting page","userTasks.addLearningGoal":"Own working goal","userTasks.deleteLearningGoal":"Delete learning goal and its tasks","userTasks.goals":"Own learning goal","weekNotebook.title":"Notepad","weekplanner.addLearningGoal":"Goal:","weekplanner.addLearningGoalTitle":"Add own learning goal","weekplanner.confirmRemoveLearningObjectives":"Delete learning goal and {learningGoalsNumber} tasks?","weekplanner.copyPreviousWeekTaks":"Copy from previous week","weekplanner.emptyLearningGoalErr":"The learning goal cannot be empty","weekplanner.evaluation":"Evaluation","weekplanner.evaluationDescription":"Reflection on your work effort and your chosen strategies during the week. Evaluate in relation to your goals.","weekplanner.learningGoal":"Own learning goal","weekplanner.logBook":"Logbook","weekplanner.nameCannotBeEmpty":"Name cannot be empty","weekplanner.nameMustNotBeEmpty":"Name must not be empty","weekplanner.strategy":"Strategy","weekplanner.strategyAndEvaluation":"Strategy & Evaluation","weekplanner.strategyDescription":"What I should do to learn","weekplanner.weekNumber":"Week {weekNumber}","wysiwyg.bold":"Bold","wysiwyg.code":"Code","wysiwyg.heading1":"Heading 1","wysiwyg.heading2":"Heading 2","wysiwyg.heading3":"Heading 3","wysiwyg.image":"Insert image","wysiwyg.imagePromptMsg":"Enter the URL of the image","wysiwyg.italic":"Italics","wysiwyg.line":"Horizontal line","wysiwyg.link":"Insert link","wysiwyg.olist":"Ordered list","wysiwyg.paragraph":"Paragraph","wysiwyg.quote":"Quote","wysiwyg.strikethrough":"Strikethrough","wysiwyg.ulist":"Bullet list","wysiwyg.underline":"Underline"};

/***/ }),

/***/ "./src/translations/sv.json":
/*!**********************************!*\
  !*** ./src/translations/sv.json ***!
  \**********************************/
/*! exports provided: addeditsubtask.addSubtask, addeditsubtask.deleteSubtask, addeditsubtask.editSubtask, addeditsubtask.nameLabel, calendar.currentDate, calendar.fullDayEventLocation, calendar.loadCalendarEvents, calendar.loadingCalendar, calendar.weekNumber, common.addDescriptionPlhd, common.cancel, common.changesNotSavedErrorOccured, common.changesNotSavedUnauthorized, common.descriptionLabel, common.errorSavingData, common.linkLabel, common.loading, common.nameLabel, common.save, common.saved, common.saving, common.remove, customTask.addWorkGoalTitle, customTask.enterNamePlhd, learningGoalsLost.overall, task.addSubtask, task.editTask, task.editWorkGoals, task.enterTaskNamePlhd, task.removeDeadline, task.removeThisTask, task.removeWorkGoals, task.setDeadline, task.setDeadlineLabel, task.subTasks, task.targetNameLabel, task.taskNameLabel, task.whatShouldYouDoPlhd, taskList.nextWeekTask, taskList.lastWeekTask, taskList.currentWeekTask, taskList.removeTaskFromWeeklyPlanning, taskList.addTaskToWeeklyPlanning, termplanner.comments, termplanner.course, termplanner.edsGoalGrades, termplanner.englishLanguage, termplanner.swedishLanguage, termplanner.finalStep, termplanner.firstTerm, termplanner.hindiLanguage, termplanner.loadingTermplanner, termplanner.modernLanguageFullname, termplanner.mathsFullname, termplanner.noFinalStepAvailable, termplanner.swedishLanguageFullName, termplanner.englishLanguageFullName, termplanner.maths, termplanner.modernLanguage, termplanner.secondTerm, termplanner.termPlanning, termplanner.weekNumber, termplanner.chartsBoxTitle, tutorNoteDialog.weekComment, test.chooseComponentLabel, test.pageDescription, userTasks.addLearningGoal, userTasks.deleteLearningGoal, userTasks.goals, weekNotebook.title, weekplanner.addLearningGoal, weekplanner.addLearningGoalTitle, weekplanner.confirmRemoveLearningObjectives, weekplanner.copyPreviousWeekTaks, weekplanner.emptyLearningGoalErr, weekplanner.evaluation, weekplanner.evaluationDescription, weekplanner.learningGoal, weekplanner.logBook, weekplanner.nameCannotBeEmpty, weekplanner.nameMustNotBeEmpty, weekplanner.strategy, weekplanner.strategyAndEvaluation, weekplanner.strategyDescription, weekplanner.weekNumber, wysiwyg.bold, wysiwyg.code, wysiwyg.heading1, wysiwyg.heading2, wysiwyg.heading3, wysiwyg.image, wysiwyg.imagePromptMsg, wysiwyg.italic, wysiwyg.line, wysiwyg.link, wysiwyg.olist, wysiwyg.paragraph, wysiwyg.quote, wysiwyg.strikethrough, wysiwyg.ulist, wysiwyg.underline, default */
/***/ (function(module) {

module.exports = {"addeditsubtask.addSubtask":"Lgg till underuppgift","addeditsubtask.deleteSubtask":"Ta bort underuppgift","addeditsubtask.editSubtask":"Redigera underuppgift","addeditsubtask.nameLabel":"Underuppgiftens namn","calendar.currentDate":"Vecka {week}, {year}","calendar.fullDayEventLocation":"Plats: {location}","calendar.loadCalendarEvents":"Load calendar events...","calendar.loadingCalendar":"Loading calendars... (listing...)","calendar.weekNumber":"V{weekNumber}","common.addDescriptionPlhd":"Lgg till en beskrivning...","common.cancel":"Avbryt","common.changesNotSavedErrorOccured":"Fr tillfllet problem att spara data. Dina ndringar sparades inte.","common.changesNotSavedUnauthorized":"ndringarna sparades inte p.g.a. otillrcklig behrighet.","common.descriptionLabel":"Beskrivning","common.errorSavingData":"Kunde inte spara.","common.linkLabel":"Lnk","common.loading":"Laddar...","common.nameLabel":"Namn","common.save":" Spara","common.saved":" Sparad","common.saving":"Sparar...","common.remove":"Ta bort","customTask.addWorkGoalTitle":"Lgg till eget arbetsml","customTask.enterNamePlhd":"Ange namn...","learningGoalsLost.overall":"vergripande","task.addSubtask":"Lgg till underuppgift","task.editTask":"Redigera uppgift","task.editWorkGoals":"Redigera arbetsml","task.enterTaskNamePlhd":"Ange uppgiftens namn...","task.removeDeadline":"Ta bort deadline","task.removeThisTask":"Ta bort den hr uppgiften","task.removeWorkGoals":"Ta bort arbetsml","task.setDeadline":"Set deadline","task.setDeadlineLabel":"Ange deadline...","task.subTasks":"Underuppgifter","task.targetNameLabel":"Arbetsmlets namn","task.taskNameLabel":"Uppgiftens namn","task.whatShouldYouDoPlhd":"Vad ska du gra?","taskList.nextWeekTask":"fr nsta vecka (v{week})","taskList.lastWeekTask":"fr frra veckan (v{week})","taskList.currentWeekTask":"fr vecka {week}","taskList.removeTaskFromWeeklyPlanning":"Ta bort uppgiften frn egen veckoplanering {week}","taskList.addTaskToWeeklyPlanning":"Lgg till uppgiften i egen veckoplanering {week}","termplanner.comments":"Kommentar","termplanner.course":"Kurs","termplanner.edsGoalGrades":"Terminsml","termplanner.englishLanguage":"Eng","termplanner.swedishLanguage":"Sv/SvA","termplanner.finalStep":"Slutsteg","termplanner.firstTerm":"HT {year}","termplanner.hindiLanguage":"","termplanner.loadingTermplanner":"V.g. vnta medan terminsplaner laddas...","termplanner.modernLanguageFullname":"M.sprk","termplanner.mathsFullname":"Matematik","termplanner.noFinalStepAvailable":"Inget slutsteg tillgngligt","termplanner.swedishLanguageFullName":"Svenska","termplanner.englishLanguageFullName":"Engelska","termplanner.maths":"Ma","termplanner.modernLanguage":"M.spr","termplanner.secondTerm":"VT {year}","termplanner.termPlanning":"Terminsplanering","termplanner.weekNumber":"Vecka","termplanner.chartsBoxTitle":"Min progression","tutorNoteDialog.weekComment":"Kommentar fr vecka {weekNumber}","test.chooseComponentLabel":"Komponent","test.pageDescription":"Testsida fr komponenter till nya startsidan","userTasks.addLearningGoal":"Eget arbetsml","userTasks.deleteLearningGoal":"Ta bort lrandemlet och dess uppgifter","userTasks.goals":"Egna lrandeml","weekNotebook.title":"Anteckningar","weekplanner.addLearningGoal":"Ml:","weekplanner.addLearningGoalTitle":"Lgg till eget lrandeml","weekplanner.confirmRemoveLearningObjectives":"Ta bort lrandeml samt {learningGoalsNumber} uppgifter?","weekplanner.copyPreviousWeekTaks":"Kopiera ej klara frn fregende vecka","weekplanner.emptyLearningGoalErr":"Lrandemlet kan inte vara tomt","weekplanner.evaluation":"Utvrdering","weekplanner.evaluationDescription":"Reflektion kring din arbetsinsats och dina valda strategier under veckan.Utvrdera i frhllande till dina ml.","weekplanner.learningGoal":"Eget lrandeml","weekplanner.logBook":"Loggbok","weekplanner.nameCannotBeEmpty":"Namnet kan inte vara tomt","weekplanner.nameMustNotBeEmpty":"Namnet fr inte vara tomt","weekplanner.strategy":"Strategi","weekplanner.strategyAndEvaluation":"Strategi & Utvrdering","weekplanner.strategyDescription":"Hur jag ska gra fr att lra mig.","weekplanner.weekNumber":"Vecka {weekNumber}","wysiwyg.bold":"Fetstil","wysiwyg.code":"Programkod","wysiwyg.heading1":"Rubrik 1","wysiwyg.heading2":"Rubrik 2","wysiwyg.heading3":"Rubrik 3","wysiwyg.image":"Infoga bild","wysiwyg.imagePromptMsg":"Ange bildens URL","wysiwyg.italic":"Kursiv","wysiwyg.line":"Vgrt linje","wysiwyg.link":"Infoga lnk","wysiwyg.olist":"Ordnad lista","wysiwyg.paragraph":"Paragraf","wysiwyg.quote":"Citat","wysiwyg.strikethrough":"Struken","wysiwyg.ulist":"Punktlista","wysiwyg.underline":"Understruken"};

/***/ }),

/***/ "./src/utils/cached-response.ts":
/*!**************************************!*\
  !*** ./src/utils/cached-response.ts ***!
  \**************************************/
/*! exports provided: CachedResponse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CachedResponse", function() { return CachedResponse; });
var CachedResponse = /** @class */ (function () {
    function CachedResponse(queryer) {
        this.queryer = queryer;
        this.promise = null;
        this.result = null;
    }
    CachedResponse.prototype.query = function () {
        var _this = this;
        return this.promise ?
            this.promise :
            (this.promise = this.queryer().then(function (x) { return _this.result = x; }));
    };
    CachedResponse.prototype.reset = function () {
        this.promise = null;
    };
    return CachedResponse;
}());



/***/ }),

/***/ "./src/utils/error-success-feedback.tsx":
/*!**********************************************!*\
  !*** ./src/utils/error-success-feedback.tsx ***!
  \**********************************************/
/*! exports provided: ErrorSuccessFeedback */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ErrorSuccessFeedback", function() { return ErrorSuccessFeedback; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _components_course_builder_sub_components_remove_item__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/course-builder/sub-components/remove-item */ "./src/components/course-builder/sub-components/remove-item.tsx");




var ErrorSuccessFeedback = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](ErrorSuccessFeedback, _super);
    function ErrorSuccessFeedback(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            errors: [],
            infos: []
        };
        _this._unhandledRejection = _this._unhandledRejection.bind(_this);
        _this._error = _this._error.bind(_this);
        _this._customError = _this._customError.bind(_this);
        _this._onInfo = _this._onInfo.bind(_this);
        _this._dbWriterError = _this._dbWriterError.bind(_this);
        _this._dbWriterStateChanged = _this._dbWriterStateChanged.bind(_this);
        return _this;
    }
    ErrorSuccessFeedback.prototype._addError = function (message, details, retryable) {
        var _this = this;
        //console.error(message, {retryable: !!retryable, details});
        this.setState(function (_a) {
            var errors = _a.errors;
            if (errors.some(function (e) { return e.message === message; }))
                return { errors: errors };
            if (errors.length > 2)
                errors = errors.slice(1);
            return {
                errors: errors.concat([{ message: message, details: details, retryable: retryable }])
            };
        });
        // Remove non-retryable errors after 30 seconds:
        if (!retryable)
            setTimeout(function () {
                _this.setState(function (_a) {
                    var errors = _a.errors;
                    return ({
                        errors: errors.filter(function (e) { return e.message !== message; })
                    });
                });
            }, 30000);
    };
    ErrorSuccessFeedback.prototype._addInfo = function (message) {
        var _this = this;
        if (message === "") {
            // Turn off current info messages
            this.setState({ infos: [] });
            return;
        }
        this.setState(function (_a) {
            var infos = _a.infos;
            if (infos.some(function (info) { return info === message; }))
                return { infos: infos };
            if (infos.length > 1)
                infos = infos.slice(1);
            return {
                infos: [message] // was: infos.concat(message). But it sucks!
            };
        });
        // Remove info message after 10 seconds:
        setTimeout(function () {
            _this.setState(function (_a) {
                var infos = _a.infos;
                return ({
                    infos: infos.filter(function (msg) { return msg !== message; })
                });
            });
        }, 10000);
    };
    ErrorSuccessFeedback.prototype._dbWriterError = function (error, retryable) {
        this._addError("Det g\u00E5r inte att spara till servern", error, retryable);
    };
    ErrorSuccessFeedback.prototype._dbWriterStateChanged = function (_a) {
        var isEdited = _a.isEdited, isSaving = _a.isSaving;
        if (!isEdited) {
            // If isEdited is false, a successful write must have happened, and
            // there cannot be any retryable error anymore
            this.setState(function (_a) {
                var errors = _a.errors;
                errors = errors.filter(function (e) { return !e.retryable; });
                return { errors: errors };
            });
        }
        this.setState({
            dbWriterIsEdited: isEdited,
            dbWriterIsSaving: isSaving
        });
    };
    ErrorSuccessFeedback.prototype.componentDidMount = function () {
        window.addEventListener('unhandledrejection', this._unhandledRejection);
        window.addEventListener('error', this._error);
        window.addEventListener('customerror', this._customError);
        window.addEventListener('info', this._onInfo);
        _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].writer.onError(this._dbWriterError);
        _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].writer.onStateChange(this._dbWriterStateChanged);
    };
    ErrorSuccessFeedback.prototype.componentWillUnmount = function () {
        window.removeEventListener('unhandledrejection', this._unhandledRejection);
        window.removeEventListener('error', this._error);
        window.removeEventListener('customerror', this._customError);
        window.removeEventListener('info', this._onInfo);
        _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].writer.off(this._dbWriterError);
        _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].writer.off(this._dbWriterStateChanged);
    };
    ErrorSuccessFeedback.prototype._unhandledRejection = function (ev) {
        this._addError("Ett ok\u00E4nt fel intr\u00E4ffade...", ev.reason);
    };
    ErrorSuccessFeedback.prototype._error = function (ev) {
        this._addError(ev.error ? ev.error.message : "Ett ok\u00E4nt fel intr\u00E4ffade...", ev.error);
    };
    ErrorSuccessFeedback.prototype._customError = function (ev) {
        this._addError(ev.detail);
    };
    ErrorSuccessFeedback.prototype._onInfo = function (ev) {
        this._addInfo(ev.detail);
    };
    ErrorSuccessFeedback.prototype.render = function () {
        var _this = this;
        var _a = this.state, errors = _a.errors, infos = _a.infos, dbWriterIsSaving = _a.dbWriterIsSaving;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "error-success-feedback", style: {
                position: "fixed",
                left: 0,
                top: 0,
                width: "100%",
                pointerEvents: 'none'
            } },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { style: { display: 'table', margin: "0 auto" } },
                errors.filter(function (e) { return !e.retryable || !dbWriterIsSaving; })
                    .map(function (_a) {
                    var message = _a.message, details = _a.details, retryable = _a.retryable, showDetails = _a.showDetails;
                    return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: message, className: "error" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { style: { float: 'left' } }, message),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { style: { pointerEvents: 'auto' } },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_components_course_builder_sub_components_remove_item__WEBPACK_IMPORTED_MODULE_3__["RemoveItem"], { onClick: function () { return _this.removeError(message); } })),
                        details || retryable ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { style: { pointerEvents: 'auto' } },
                            details ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "btn", onClick: function () { return _this.toggleDetails(message); } }, showDetails ? "Dlj detailer" : "Visa detailjer"),
                                "\u00A0") : undefined,
                            showDetails ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, '' + details) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null, "\u00A0"),
                            retryable ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "btn", onClick: function () { return _this.retrySave(); } }, "F\u00F6rs\u00F6k spara nu") : undefined) : undefined));
                }),
                infos.map(function (message) {
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { key: message, className: "info" }, message);
                })));
    };
    ErrorSuccessFeedback.prototype.removeError = function (message) {
        this.setState(function (_a) {
            var errors = _a.errors;
            return ({
                errors: errors.filter(function (e) { return e.message !== message; })
            });
        });
    };
    ErrorSuccessFeedback.prototype.retrySave = function () {
        _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].writer.retrySave();
    };
    ErrorSuccessFeedback.prototype.toggleDetails = function (message) {
        this.setState(function (_a) {
            var errors = _a.errors;
            return ({ errors: errors.map(function (error) { return error.message === message ? tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, error, { showDetails: !error.showDetails }) :
                    error; })
            });
        });
    };
    return ErrorSuccessFeedback;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/utils/keep-session-alive.ts":
/*!*****************************************!*\
  !*** ./src/utils/keep-session-alive.ts ***!
  \*****************************************/
/*! exports provided: keepSessionAlive */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "keepSessionAlive", function() { return keepSessionAlive; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ "jquery");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");



var HEARTBEAT_INTERVAL = 5 * 60 * 1000; // 5 minutes.
var HEARTBEAT_URL = _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_2__["cfg"].KED_KEEP_ALIVE_URL;
var lastActivity = Date.now();
function keepSessionAlive() {
    setInterval(onTimeout, HEARTBEAT_INTERVAL);
    setTimeout(function () { return jquery__WEBPACK_IMPORTED_MODULE_1___default()('body')
        .mousemove(onUserActive)
        .keypress(onUserActive)
        .scroll(onUserActive); }, 100);
}
function onUserActive() {
    lastActivity = Date.now();
}
function onTimeout() {
    var inactivityTime = Date.now() - lastActivity;
    if (inactivityTime < HEARTBEAT_INTERVAL) {
        heartbeat();
    }
}
function heartbeat() {
    return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
        var res, err_1;
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
            switch (_a.label) {
                case 0:
                    console.log("Sending heartbeat request to " + HEARTBEAT_URL);
                    _a.label = 1;
                case 1:
                    _a.trys.push([1, 3, , 4]);
                    return [4 /*yield*/, fetch(HEARTBEAT_URL, {
                            cache: 'no-cache',
                            credentials: 'same-origin'
                        })];
                case 2:
                    res = _a.sent();
                    console.log("Response from " + HEARTBEAT_URL + ": " + res.status + " " + res.statusText);
                    return [3 /*break*/, 4];
                case 3:
                    err_1 = _a.sent();
                    console.warn("Request to " + HEARTBEAT_URL + " failed: " + err_1);
                    return [3 /*break*/, 4];
                case 4: return [2 /*return*/];
            }
        });
    });
}


/***/ }),

/***/ "./src/utils/make-suspense-api.ts":
/*!****************************************!*\
  !*** ./src/utils/make-suspense-api.ts ***!
  \****************************************/
/*! exports provided: makeSuspenseApi */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "makeSuspenseApi", function() { return makeSuspenseApi; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

var DEFAULT_CACHE_EXPIRATION = 30 * 60 * 1000; // 30 minutes.
var defaultOptions = {
    isApiMethod: function (f) { return typeof f === 'function'; },
    cacheExpiration: DEFAULT_CACHE_EXPIRATION
};
function makeSuspenseApi(api, options) {
    if (options === void 0) { options = defaultOptions; }
    options = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, defaultOptions, options);
    var isApiMethod = options.isApiMethod, cacheExpiration = options.cacheExpiration;
    var rv = Object.create(api);
    var cache = {};
    // Walk the instance + prototype chain to generate suspense version of each promise returning method
    for (var proto = api; proto && proto !== Object.prototype; proto = Object.getPrototypeOf(proto)) {
        suspendify(proto);
    }
    function suspendify(proto) {
        Object.keys(proto).forEach(function (prop) {
            if (!rv.hasOwnProperty(prop) && isApiMethod(prop)) {
                rv[prop] = function () {
                    var args = [];
                    for (var _i = 0; _i < arguments.length; _i++) {
                        args[_i] = arguments[_i];
                    }
                    var key = JSON.stringify(tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"]([prop], args));
                    var cachedEntry = cache[key];
                    if (cachedEntry !== undefined) {
                        if (cachedEntry.promise)
                            throw cachedEntry.promise;
                        if (cachedEntry.error)
                            throw cachedEntry.error;
                        if (cachedEntry.timeout > Date.now()) {
                            return cachedEntry.value;
                        }
                    }
                    try {
                        var promise = proto[prop].apply(api, args).then(function (result) {
                            cache[key] = { timeout: Date.now() + cacheExpiration, value: result };
                        }).catch(function (error) {
                            cache[key] = { timeout: Date.now() + cacheExpiration, error: error };
                        });
                        cache[key] = { timeout: Date.now() + cacheExpiration, promise: promise };
                        throw promise;
                    }
                    catch (error) {
                        if (error.then)
                            throw error;
                        cache[key] = { timeout: Date.now() + cacheExpiration, error: error };
                    }
                };
            }
        });
    }
    return rv;
}


/***/ }),

/***/ "./src/utils/query-string.ts":
/*!***********************************!*\
  !*** ./src/utils/query-string.ts ***!
  \***********************************/
/*! exports provided: parseQueryString, generateQueryString, parseHashQueryString, generateHashQueryString, splitUrlAndQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseQueryString", function() { return parseQueryString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generateQueryString", function() { return generateQueryString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseHashQueryString", function() { return parseHashQueryString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generateHashQueryString", function() { return generateHashQueryString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "splitUrlAndQuery", function() { return splitUrlAndQuery; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

function parseQueryString(locationSearch, options) {
    var toLower = (options || {}).toLower;
    var result = {};
    if (locationSearch && locationSearch.length > 1)
        locationSearch.substr(1)
            .split('&')
            .map(function (part) { return part.split('=').map(function (s) { return decodeURIComponent(s.trim()); }); })
            .forEach(function (_a) {
            var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](_a, 2), key = _b[0], value = _b[1];
            return result[toLower ? key.toLowerCase() : key] = value;
        });
    return result;
}
function encodeParams(params) {
    return Object.keys(params).filter(function (key) { return params[key] !== undefined; }).map(function (key) { return encodeURIComponent(key) + "=" + encodeURIComponent(params[key]); }).join('&');
}
function generateQueryString(params) {
    return "?" + encodeParams(params);
}
function parseHashQueryString(locationHash, options) {
    return parseQueryString(locationHash, options);
}
function generateHashQueryString(params) {
    return "#" + encodeParams(params);
}
function splitUrlAndQuery(urlWithPossibleQuery) {
    var pQuery = urlWithPossibleQuery.indexOf('?');
    return pQuery >= 0 ?
        [urlWithPossibleQuery.substr(0, pQuery), urlWithPossibleQuery.substr(pQuery)] :
        [urlWithPossibleQuery, ""];
}


/***/ }),

/***/ "./src/utils/school-moment.ts":
/*!************************************!*\
  !*** ./src/utils/school-moment.ts ***!
  \************************************/
/*! exports provided: getFirstAndLastWeekOfTerm, getTermStarEndDate, getSchoolMoment, addYear, nextAcademicYear, prevAcademicYear */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFirstAndLastWeekOfTerm", function() { return getFirstAndLastWeekOfTerm; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTermStarEndDate", function() { return getTermStarEndDate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSchoolMoment", function() { return getSchoolMoment; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addYear", function() { return addYear; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "nextAcademicYear", function() { return nextAcademicYear; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "prevAcademicYear", function() { return prevAcademicYear; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_1__);


function getFirstAndLastWeekOfTerm(term) {
    return term === 'AT' ?
        [32, 51] :
        [1, 25];
}
//Not used anymore
// export function getTermStartAndEnd(now: moment.Moment) : moment.Moment[] {
//     return now.month() >= 6 ? // 6 = July in JS Dates and in moment as well!
//     [moment(new Date(now.year(), 7, 1)), moment(new Date(now.year(), 11, 31))] : // aug1 - dec31
//     [moment(new Date(now.year(), 0, 1)), moment(new Date(now.year(), 6, 31))]; // jan1 - july31
// }
function getTermStarEndDate(date, isFirstTerm) {
    var addYear = date.getMonth() >= 7;
    var termYear = null;
    if (addYear) {
        termYear = isFirstTerm ? date.getFullYear() : date.getFullYear() + 1;
    }
    else {
        termYear = isFirstTerm ? date.getFullYear() - 1 : date.getFullYear();
    }
    var termYearMoment = moment__WEBPACK_IMPORTED_MODULE_1___default()(termYear.toString(), "YYYY");
    if (termYearMoment.week() != 1) {
        termYearMoment = termYearMoment.clone().add(1, 'week');
    }
    return isFirstTerm ? [moment__WEBPACK_IMPORTED_MODULE_1___default()(termYearMoment.clone()).week(32).startOf('week'), moment__WEBPACK_IMPORTED_MODULE_1___default()(termYearMoment.clone()).week(51).endOf('week')] :
        [moment__WEBPACK_IMPORTED_MODULE_1___default()(termYearMoment.clone()), moment__WEBPACK_IMPORTED_MODULE_1___default()(termYearMoment.clone()).week(25).endOf('week')];
}
function getSchoolMoment(m) {
    var thisYear = m.year();
    var isAutumn = m.month() >= 6; // determine 
    var _a = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](isAutumn ?
        [thisYear, thisYear + 1] :
        [thisYear - 1, thisYear], 2), autumnYear = _a[0], springYear = _a[1];
    var academicYear = '' + autumnYear + '/' + springYear;
    var term = isAutumn ? 'AT' : 'ST';
    var week = m.week();
    return { academicYear: academicYear, term: term, week: week };
}
function addYear(aYear, numYearsToAdd) {
    return aYear.split('/')
        .map(function (yearStr) { return parseInt(yearStr) + numYearsToAdd; })
        .map(function (year) { return '' + year; })
        .join('/');
}
function nextAcademicYear(aYear) {
    return addYear(aYear, 1);
}
function prevAcademicYear(aYear) {
    return addYear(aYear, -1);
}


/***/ }),

/***/ "./src/utils/school-term.ts":
/*!**********************************!*\
  !*** ./src/utils/school-term.ts ***!
  \**********************************/
/*! exports provided: SchoolTerm */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SchoolTerm", function() { return SchoolTerm; });
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _school_moment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./school-moment */ "./src/utils/school-moment.ts");


function isSchoolMoment(obj) {
    return 'academicYear' in obj;
}
var SchoolTerm = /** @class */ (function () {
    function SchoolTerm(dateOrSchoolMoment) {
        var schoolMoment = isSchoolMoment(dateOrSchoolMoment) ?
            dateOrSchoolMoment : Object(_school_moment__WEBPACK_IMPORTED_MODULE_1__["getSchoolMoment"])(moment__WEBPACK_IMPORTED_MODULE_0___default()(dateOrSchoolMoment));
        this.academicYear = schoolMoment.academicYear;
        this.term = schoolMoment.term;
    }
    Object.defineProperty(SchoolTerm.prototype, "year", {
        get: function () {
            return parseInt(this.academicYear
                .split('/')[this.term === 'AT' ? 0 : 1]);
        },
        enumerable: true,
        configurable: true
    });
    SchoolTerm.prototype.nextTerm = function () {
        return new SchoolTerm(this.term === 'AT' ?
            {
                term: 'ST',
                academicYear: this.academicYear
            } :
            {
                term: 'AT',
                academicYear: Object(_school_moment__WEBPACK_IMPORTED_MODULE_1__["addYear"])(this.academicYear, 1)
            });
    };
    SchoolTerm.prototype.prevTerm = function () {
        return new SchoolTerm(this.term === 'AT' ?
            {
                term: 'ST',
                academicYear: Object(_school_moment__WEBPACK_IMPORTED_MODULE_1__["addYear"])(this.academicYear, -1)
            } :
            {
                term: 'AT',
                academicYear: this.academicYear
            });
    };
    SchoolTerm.prototype.toLocaleString = function (intl, shortYear) {
        var year = this.term === 'AT' ?
            this.academicYear.split('/')[0] :
            this.academicYear.split('/')[1];
        if (shortYear)
            year = year.substr(2);
        return this.term === 'AT' ? intl.formatMessage({ id: 'termplanner.secondTerm', defaultMessage: 'HT {year}' }, { year: year }) :
            intl.formatMessage({ id: 'termplanner.firstTerm', defaultMessage: 'VT {year}' }, { year: year });
    };
    return SchoolTerm;
}());



/***/ }),

/***/ "./src/utils/utils.ts":
/*!****************************!*\
  !*** ./src/utils/utils.ts ***!
  \****************************/
/*! exports provided: capitalizeFirst, extend, clone, flatten, compareProp, compareProps, L, TC, dateTimeReviver, showInfo, showError, maxLength, arrayToLookup, arrayToMap, cherryPickProps, distinct, shallowEquals */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "capitalizeFirst", function() { return capitalizeFirst; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "extend", function() { return extend; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clone", function() { return clone; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "flatten", function() { return flatten; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "compareProp", function() { return compareProp; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "compareProps", function() { return compareProps; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "L", function() { return L; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TC", function() { return TC; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dateTimeReviver", function() { return dateTimeReviver; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "showInfo", function() { return showInfo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "showError", function() { return showError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "maxLength", function() { return maxLength; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "arrayToLookup", function() { return arrayToLookup; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "arrayToMap", function() { return arrayToMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cherryPickProps", function() { return cherryPickProps; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "distinct", function() { return distinct; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shallowEquals", function() { return shallowEquals; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

function capitalizeFirst(str) {
    for (var i = 0, l = str.length; i < l; ++i) {
        if (str.charCodeAt(i) < 0x2000) {
            return str.substr(0, i) + str[i].toLocaleUpperCase() + str.substr(i + 1);
        }
    }
    return str;
}
function extend(obj, extension) {
    if (typeof extension !== 'object')
        return obj;
    Object.keys(extension).forEach(function (key) {
        obj[key] = extension[key];
    });
    return obj;
}
function clone(obj, extension) {
    var clone = {};
    Object.getOwnPropertyNames(obj).forEach(function (key) {
        Object.defineProperty(clone, key, Object.getOwnPropertyDescriptor(obj, key));
    });
    if (extension)
        extend(clone, extension);
    return clone;
}
var concat = [].concat;
function flatten(a) {
    return concat.apply([], a);
}
function compareProp(prop) {
    return function (a, b) {
        var aProp = a[prop], bProp = b[prop];
        return aProp > bProp ? 1 : aProp < bProp ? -1 : 0;
    };
}
function compareProps(props, locales, options) {
    props = Array.isArray(props) ? props : [props];
    var localeCompare = function (a, b) {
        return typeof a === 'string' ?
            a.localeCompare(b, locales, options) :
            a < b ? -1 : a > b ? 1 : 0;
    };
    function cmpPart(a, b, firstPart, rest) {
        var firstA = a[firstPart];
        var firstB = b[firstPart];
        if (firstA === firstB)
            return 0;
        if (firstA == null)
            return -1;
        if (firstB == null)
            return 1;
        return rest.length === 0 ?
            localeCompare(firstA, firstB) :
            cmpPart(firstA, firstB, rest[0], rest.slice(1));
    }
    return props
        .map(function (prop) { return prop.split('.'); })
        .map(function (_a) {
        var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](_a), firstPart = _b[0], rest = _b.slice(1);
        return function (a, b) { return cmpPart(a, b, firstPart, rest); };
    })
        .reduce(function (cmp1, cmp2) {
        return function (a, b) { return cmp1(a, b) || cmp2(a, b); };
    });
}
function L(text) {
    var args = [];
    for (var _i = 1; _i < arguments.length; _i++) {
        args[_i - 1] = arguments[_i];
    }
    var first = text[0];
    return buildMessage(text, args);
}
function buildMessage(text, args) {
    var rv = text[0];
    for (var i = 1, l = text.length; i < l; ++i) {
        rv += args[i - 1] + text[i];
    }
    return rv;
}
var TC = /** @class */ (function () {
    function TC(template) {
        extend(this, template);
    }
    return TC;
}());

function dateTimeReviver(key, value) {
    var a;
    if (typeof value === 'string') {
        a = /\/Date\((\d*)\)\//.exec(value);
        if (a) {
            return new Date(+a[1]);
        }
    }
    return value;
}
//let infoSerial = 1;
function showInfo(msg) {
    var event = new CustomEvent('info', { 'detail': msg });
    window.dispatchEvent(event);
}
function showError(errMsg) {
    var msg = typeof errMsg === 'string' ? errMsg : errMsg.message;
    var event = new CustomEvent('customerror', { 'detail': msg });
    console.error(errMsg);
    window.dispatchEvent(event);
}
function maxLength(str, maxLen) {
    return str.length > maxLen ?
        str.substr(0, maxLen - 3) + "..." :
        str;
}
function arrayToLookup(a, keyAccessor) {
    var result = {};
    for (var i = 0, l = a.length; i < l; ++i) {
        var item = a[i];
        var key = keyAccessor(item);
        var array = result[key];
        if (array)
            array.push(item);
        else
            result[key] = [item];
    }
    return result;
}
function arrayToMap(a, keyAccessor) {
    var result = {};
    for (var i = 0, l = a.length; i < l; ++i) {
        var item = a[i];
        var key = keyAccessor(item);
        result[key] = item;
    }
    return result;
}
function cherryPickProps(obj, propsToPick) {
    var e_1, _a;
    var result = {};
    try {
        for (var propsToPick_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](propsToPick), propsToPick_1_1 = propsToPick_1.next(); !propsToPick_1_1.done; propsToPick_1_1 = propsToPick_1.next()) {
            var param = propsToPick_1_1.value;
            if (param in obj)
                result[param] = obj[param];
        }
    }
    catch (e_1_1) { e_1 = { error: e_1_1 }; }
    finally {
        try {
            if (propsToPick_1_1 && !propsToPick_1_1.done && (_a = propsToPick_1.return)) _a.call(propsToPick_1);
        }
        finally { if (e_1) throw e_1.error; }
    }
    return result;
}
function distinct(a, keyAccessor) {
    var map = arrayToMap(a, keyAccessor || (function (x) { return x; }));
    return Object.keys(map).map(function (key) { return map[key]; });
}
function shallowEquals(a, b) {
    if (a === b)
        return true;
    if (!a || !b)
        return false;
    if (typeof a !== 'object' || typeof b !== 'object')
        return false;
    var keysA = Object.keys(a);
    var keysB = Object.keys(b);
    if (keysA.length !== keysB.length)
        return false;
    for (var i = 0, l = keysA.length; i < l; ++i) {
        var key = keysA[i];
        if (keysB[i] !== key)
            return false;
        if (a[key] !== b[key])
            return false;
    }
    return true;
}


/***/ }),

/***/ 0:
/*!*****************************************!*\
  !*** ../locale-data/index.js (ignored) ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ 1:
/*!*******************************!*\
  !*** ./lib/locales (ignored) ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ 2:
/*!*******************************!*\
  !*** ./lib/locales (ignored) ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ "jquery":
/*!*************************!*\
  !*** external "jQuery" ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = jQuery;

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "React" ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = React;

/***/ }),

/***/ "react-dom":
/*!***************************!*\
  !*** external "ReactDOM" ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ReactDOM;

/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9jbGllbnQuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9jbGllbnR3ZWIuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLWNsaWVudC13ZWIvYmVhcmVyLXN0b3JhZ2Utc2Vzc2lvbnN0b3JhZ2UuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLWNsaWVudC13ZWIvaGFzaC1yZXN0b3Jlci5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtY2xpZW50LXdlYi9pbmRleC5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtY2xpZW50L2FjY2Vzcy1jb250cm9sLmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9rZWQtYmFja2VuZC1jbGllbnQvaHR0cC1lcnJvci5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtY2xpZW50L2luZGV4LmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9rZWQtYmFja2VuZC1jbGllbnQva2VkLWJlYXJlci1wcm92aWRlci5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtY2xpZW50L3Jlc3RjbGllbnQuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLWNsaWVudC91dGlscy5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtcmVwby9jYWNoZS1idXN0LmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9rZWQtYmFja2VuZC1yZXBvL2RlbHRhLWNvbGxlY3Rpb24vYXBwbHktbXV0YXRpb25zLW9uLWRlbHRhcy5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtcmVwby9kZWx0YS1jb2xsZWN0aW9uL2RlbHRhLWNhY2hlLmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9rZWQtYmFja2VuZC1yZXBvL2RlbHRhLWNvbGxlY3Rpb24vZGVsdGEtY29sbGVjdGlvbi5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtcmVwby9kZWx0YS1tZXJnZS5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtcmVwby9pbmRleC5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtcmVwby9rZWRiYWNrZW5kLWNvbGxlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLXJlcG8va2VkYmFja2VuZC1xdWVyeS5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtcmVwby9rZWRiYWNrZW5kLXJlcG8uanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLXJlcG8va2VkYmFja2VuZC1zdWJzY3JpcHRpb24uanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLXJlcG8va2VkYmFja2VuZC13cml0ZXIuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLXJlcG8vbXV0YXRpb24tcXVldWUuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLXJlcG8vcXVlcnktc2V0LmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9rZWQtYmFja2VuZC1yZXBvL3V0aWxzLmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9rZWQtbW9kZWwtbWlncmF0b3IvaW5kZXguanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1tb2RlbC1taWdyYXRvci9taWdyYXRlLWNvdXJzZS5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLW1vZGVsLW1pZ3JhdG9yL21pZ3JhdGUtdGFzay5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLW1vZGVsLW1pZ3JhdG9yL21pZ3JhdGUuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL29ic2VydmFibGUvY29sbGVjdGlvbi5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMvb2JzZXJ2YWJsZS9lbWl0dGVyLmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9vYnNlcnZhYmxlL2ZpYmVyLWNvbnRleHQuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL29ic2VydmFibGUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL29ic2VydmFibGUvbWFwLmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9vYnNlcnZhYmxlL21peGluLmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9vYnNlcnZhYmxlL29ic2VydmFibGUuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL29ic2VydmFibGUvdmFsdWUuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9vYnNlcnZhYmxlLmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvcmVwby5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9ub2RlX21vZHVsZXMvbW9tZW50L2xvY2FsZSBzeW5jIHN2fGVuIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9hY2Nlc3MtY29udHJvbC9nZXQtdXNlci1jbGFpbXMudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2FjY2Vzcy1jb250cm9sL2luZGV4LnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9hcGlzL2J1dHRvbnMudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9hcGlzL2NvbmZpZ3MudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2FwaXMvZWRzY2xpZW50LnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9hcGlzL2dvb2dsZS1jbGFzc3Jvb20tc3luYy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvYXBpcy9nb29nbGUtY2xpZW50LnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9hcGlzL2dvb2dsZS1kcml2ZS50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvYXBpcy9nb29nbGUtcGlja2VyLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9hcGlzL2dvb2dsZS13ZWJjbGllbnQudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2FwaXMvbW9jay9tb2NrLWNsYXNzcm9vbS1kYXRhLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NoYXJ0cy9nb2FsLXByb2dyZXNzLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy9sb2dpYy9vcmRlcmVkLXJlcXVpcmVtZW50cy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy9sb2dpYy90YXNrLW9yZGVyLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyL2NvdXJzZXMvYnVzaW5lc3MtbG9naWMudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIvY291cnNlcy9jb3Vyc2UtYmFubmVyLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci9jb3Vyc2VzL2NvdXJzZS1tb2R1bGUtbGlzdC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIvY291cnNlcy9jb3Vyc2UtbW9kdWxlLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci9jb3Vyc2VzL2NyZWF0ZS1uZXcudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyL2NvdXJzZXMvZWRpdC1jb3Vyc2UudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyL2NvdXJzZXMvaW5kZXgudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyL2NvdXJzZXMvaW5uZXItZWRpdC1jb3Vyc2UudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyL2luZGV4LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci9rbm93bGVkZ2UtbWF0cml4LXBhcnRpYWwtdXRpbHMudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIvbW9kYWwtcGFnZXMvZWRpdC1yZXNvdXJjZS50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIvbW9kYWwtcGFnZXMvZWRpdC10YXNrL2Jhc2ljLWVkaXRhYmxlLXRhc2stZmllbGRzLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci9tb2RhbC1wYWdlcy9lZGl0LXRhc2svZWRpdC10YXNrLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci9tb2RhbC1wYWdlcy9lZGl0LXRhc2svaW5kZXgudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIvbW9kYWwtcGFnZXMvZWRpdC10YXNrL3ByZXZpZXdhYmxlLXRhc2stZmllbGRzLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci9tb2RhbC1wYWdlcy9lZGl0LXRhc2svc2F2ZS1vci1jYW5jZWwtYnV0dG9ucy50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIvbW9kYWwtcGFnZXMvZWRpdC10YXNrL3NlYXJjaC1yZXN1bHRzLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci9tb2RhbC1wYWdlcy9lZGl0LXRhc2svdGFzay1jb250ZW50LWZyYWdtZW50LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci9tb2RhbC1wYWdlcy9lZGl0LXRhc2svdGFzay1taWdyYXRpb24tYm94LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci9tb2RhbC1wYWdlcy9lZGl0LXRhc2svdGFzay1zdGF0dXMtZnJhZ21lbnQudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyL21vZGFsLXBhZ2VzL2VkaXQtd29ya2Zsb3ctbGluay50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIvc2Nob29scy9lZGl0LXNjaG9vbC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIvc2Nob29scy9lZGl0YWJsZS1zY2hvb2wtbGlzdC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIvc2Nob29scy9pbmRleC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIvc2Nob29scy9uZXctc2Nob29sLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci9zdWItY29tcG9uZW50cy9lZGl0YWJsZS1yZXNvdXJjZS1saXN0LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci9zdWItY29tcG9uZW50cy9lZGl0YWJsZS10YXNrLWxpc3QudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyL3N1Yi1jb21wb25lbnRzL2VkaXRhYmxlLXRlYWNoZXItbGlzdC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIvc3ViLWNvbXBvbmVudHMvZWRpdGFibGUtd29ya2Zsb3ctbGluay50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIvc3ViLWNvbXBvbmVudHMva25vd2xlZGdlLW1hdHJpeC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIvc3ViLWNvbXBvbmVudHMvcmVtb3ZlLWl0ZW0udHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyL3N1Yi1jb21wb25lbnRzL3NjaG9vbC1jb3Vyc2VzLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci9zdWItY29tcG9uZW50cy9zZWxlY3QtcmVsYXRlZC1kb2NzLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci9zdWItY29tcG9uZW50cy9zZWxlY3Qtc3R1ZHktZ3JvdXBzLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci9zdWItY29tcG9uZW50cy9zZWxlY3QtdGVhY2hlci50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIvc3ViLWNvbXBvbmVudHMvc3Bpbm5lci50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIvc3ViLWNvbXBvbmVudHMvd2VpZ2h0ZWQtaXRlbXMtdGFibGUudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyL3N1YmplY3RzL2RpZmYvZGlmZi14bWwtd2l0aC1kYXRhYmFzZS50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci9zdWJqZWN0cy9kaWZmL21pZ3JhdGUtc3ViamVjdC50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci9zdWJqZWN0cy9pbmRleC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIvc3ViamVjdHMvc2hvdy1zdWJqZWN0LWlubmVyLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci9zdWJqZWN0cy9zaG93LXN1YmplY3QudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyL3N1YmplY3RzL3Nrb2x2ZXJrZXQtc3ViamVjdC50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci9zdWJqZWN0cy9zdWJqZWN0cy1pbm5lci50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIvc3ViamVjdHMvdXBsb2FkZWQtc3ViamVjdC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIvdXRpbHMudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS1jb21wb25lbnRzL0xhbmd1YWdlQ29udGV4dC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS1jb21wb25lbnRzL1NldHVwTGFuZ3VhZ2VJbnRsLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy91dGlsaXR5LWNvbXBvbmVudHMvY2hlY2tib3gudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy9jb250ZW50LWVkaXRhYmxlLWZpZWxkLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy91dGlsaXR5LWNvbXBvbmVudHMvb2JzZXJ2ZS50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS1jb21wb25lbnRzL29wZW4tY2xvc2UtYm94LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy91dGlsaXR5LWNvbXBvbmVudHMvc29ydGFibGUtdGFzay1saXN0LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy91dGlsaXR5LWNvbXBvbmVudHMvd3lzaXd5Zy9hY3Rpb25zLXN2LnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy93eXNpd3lnL2FjdGlvbnMudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS1jb21wb25lbnRzL3d5c2l3eWcvZXhlYy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy91dGlsaXR5LWNvbXBvbmVudHMvd3lzaXd5Zy9pbWFnZS1lZGl0LWFjdGlvbnMudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS1jb21wb25lbnRzL3d5c2l3eWcvaW5kZXgudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy93eXNpd3lnL3dhc2gtaHRtbC50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29udHJhY3RzL2tlZC1tb2RlbHMudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2ZlYXR1cmVzL2ZlYXR1cmVzLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9mZWF0dXJlcy9pbmRleC50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvZ2xvYmFsLXNldHRlcnMvY29uZmlndXJlLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9nbG9iYWwtc2V0dGVycy9zZXQtYWxsLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9nbG9iYWwtc2V0dGVycy9zZXQtYmVhcmVyLXByb3ZpZGVycy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvZ2xvYmFsLXNldHRlcnMvc2V0LWVkcy1jbGllbnQudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2dsb2JhbC1zZXR0ZXJzL3NldC1rZWQtYmFja2VuZC1jbGllbnQudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2dsb2JhbHMvS0VELmNmZy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvZ2xvYmFscy9LRUQuZW52LnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9nbG9iYWxzL0tFRC50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvZ2xvYmFscy9jdXJyZW50LXVzZXIudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2dsb2JhbHMvZGIudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2dsb2JhbHMva2VkLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9yZXBvcy9yZXBvLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9yZXBvcy9zY2hvb2wtY291cnNlcy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvdGVzdC9kYXRhL3VzZXJzLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy90ZXN0L3NldC1jdXJyZW50LXVzZXIudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3Rlc3QvdGVzdHBhZ2UtY291cnNlYnVpbGRlci50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3Rlc3QvdXRpbHMvY2hvb3NlLXVzZXIudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy91dGlscy9jYWNoZWQtcmVzcG9uc2UudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3V0aWxzL2Vycm9yLXN1Y2Nlc3MtZmVlZGJhY2sudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy91dGlscy9rZWVwLXNlc3Npb24tYWxpdmUudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3V0aWxzL21ha2Utc3VzcGVuc2UtYXBpLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy91dGlscy9xdWVyeS1zdHJpbmcudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3V0aWxzL3NjaG9vbC1tb21lbnQudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3V0aWxzL3NjaG9vbC10ZXJtLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy91dGlscy91dGlscy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi4vbG9jYWxlLWRhdGEvaW5kZXguanMgKGlnbm9yZWQpIiwid2VicGFjazovL1tuYW1lXS8uL2xpYi9sb2NhbGVzIChpZ25vcmVkKSIsIndlYnBhY2s6Ly9bbmFtZV0vLi9saWIvbG9jYWxlcyAoaWdub3JlZCk/YTE3NyIsIndlYnBhY2s6Ly9bbmFtZV0vZXh0ZXJuYWwgXCJqUXVlcnlcIiIsIndlYnBhY2s6Ly9bbmFtZV0vZXh0ZXJuYWwgXCJSZWFjdFwiIiwid2VicGFjazovL1tuYW1lXS9leHRlcm5hbCBcIlJlYWN0RE9NXCIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGdCQUFRLG9CQUFvQjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUFpQiw0QkFBNEI7QUFDN0M7QUFDQTtBQUNBLDBCQUFrQiwyQkFBMkI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGtEQUEwQyxnQ0FBZ0M7QUFDMUU7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxnRUFBd0Qsa0JBQWtCO0FBQzFFO0FBQ0EseURBQWlELGNBQWM7QUFDL0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QztZQUFFLE9BQU8sS0FBSyxDQUFDO0tBQ3ZDO0lBQ0QsT0FBTyxJQUFJLENBQUM7QUFDaEIsQ0FBQzs7Ozs7Ozs7Ozs7O0FDdEtELGU7Ozs7Ozs7Ozs7O0FDQUEsZTs7Ozs7Ozs7Ozs7QUNBQSxlOzs7Ozs7Ozs7OztBQ0FBLHdCOzs7Ozs7Ozs7OztBQ0FBLHVCOzs7Ozs7Ozs7OztBQ0FBLDBCIiwiZmlsZSI6InRlc3RwYWdlY291cnNlYnVpbGRlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIGluc3RhbGwgYSBKU09OUCBjYWxsYmFjayBmb3IgY2h1bmsgbG9hZGluZ1xuIFx0ZnVuY3Rpb24gd2VicGFja0pzb25wQ2FsbGJhY2soZGF0YSkge1xuIFx0XHR2YXIgY2h1bmtJZHMgPSBkYXRhWzBdO1xuIFx0XHR2YXIgbW9yZU1vZHVsZXMgPSBkYXRhWzFdO1xuIFx0XHR2YXIgZXhlY3V0ZU1vZHVsZXMgPSBkYXRhWzJdO1xuXG4gXHRcdC8vIGFkZCBcIm1vcmVNb2R1bGVzXCIgdG8gdGhlIG1vZHVsZXMgb2JqZWN0LFxuIFx0XHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcbiBcdFx0dmFyIG1vZHVsZUlkLCBjaHVua0lkLCBpID0gMCwgcmVzb2x2ZXMgPSBbXTtcbiBcdFx0Zm9yKDtpIDwgY2h1bmtJZHMubGVuZ3RoOyBpKyspIHtcbiBcdFx0XHRjaHVua0lkID0gY2h1bmtJZHNbaV07XG4gXHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKSB7XG4gXHRcdFx0XHRyZXNvbHZlcy5wdXNoKGluc3RhbGxlZENodW5rc1tjaHVua0lkXVswXSk7XG4gXHRcdFx0fVxuIFx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IDA7XG4gXHRcdH1cbiBcdFx0Zm9yKG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG4gXHRcdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcbiBcdFx0XHRcdG1vZHVsZXNbbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuIFx0XHRcdH1cbiBcdFx0fVxuIFx0XHRpZihwYXJlbnRKc29ucEZ1bmN0aW9uKSBwYXJlbnRKc29ucEZ1bmN0aW9uKGRhdGEpO1xuXG4gXHRcdHdoaWxlKHJlc29sdmVzLmxlbmd0aCkge1xuIFx0XHRcdHJlc29sdmVzLnNoaWZ0KCkoKTtcbiBcdFx0fVxuXG4gXHRcdC8vIGFkZCBlbnRyeSBtb2R1bGVzIGZyb20gbG9hZGVkIGNodW5rIHRvIGRlZmVycmVkIGxpc3RcbiBcdFx0ZGVmZXJyZWRNb2R1bGVzLnB1c2guYXBwbHkoZGVmZXJyZWRNb2R1bGVzLCBleGVjdXRlTW9kdWxlcyB8fCBbXSk7XG5cbiBcdFx0Ly8gcnVuIGRlZmVycmVkIG1vZHVsZXMgd2hlbiBhbGwgY2h1bmtzIHJlYWR5XG4gXHRcdHJldHVybiBjaGVja0RlZmVycmVkTW9kdWxlcygpO1xuIFx0fTtcbiBcdGZ1bmN0aW9uIGNoZWNrRGVmZXJyZWRNb2R1bGVzKCkge1xuIFx0XHR2YXIgcmVzdWx0O1xuIFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgZGVmZXJyZWRNb2R1bGVzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0dmFyIGRlZmVycmVkTW9kdWxlID0gZGVmZXJyZWRNb2R1bGVzW2ldO1xuIFx0XHRcdHZhciBmdWxmaWxsZWQgPSB0cnVlO1xuIFx0XHRcdGZvcih2YXIgaiA9IDE7IGogPCBkZWZlcnJlZE1vZHVsZS5sZW5ndGg7IGorKykge1xuIFx0XHRcdFx0dmFyIGRlcElkID0gZGVmZXJyZWRNb2R1bGVbal07XG4gXHRcdFx0XHRpZihpbnN0YWxsZWRDaHVua3NbZGVwSWRdICE9PSAwKSBmdWxmaWxsZWQgPSBmYWxzZTtcbiBcdFx0XHR9XG4gXHRcdFx0aWYoZnVsZmlsbGVkKSB7XG4gXHRcdFx0XHRkZWZlcnJlZE1vZHVsZXMuc3BsaWNlKGktLSwgMSk7XG4gXHRcdFx0XHRyZXN1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IGRlZmVycmVkTW9kdWxlWzBdKTtcbiBcdFx0XHR9XG4gXHRcdH1cblxuIFx0XHRyZXR1cm4gcmVzdWx0O1xuIFx0fVxuXG4gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuIFx0Ly8gdW5kZWZpbmVkID0gY2h1bmsgbm90IGxvYWRlZCwgbnVsbCA9IGNodW5rIHByZWxvYWRlZC9wcmVmZXRjaGVkXG4gXHQvLyBQcm9taXNlID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxuIFx0dmFyIGluc3RhbGxlZENodW5rcyA9IHtcbiBcdFx0XCJ0ZXN0cGFnZWNvdXJzZWJ1aWxkZXJcIjogMFxuIFx0fTtcblxuIFx0dmFyIGRlZmVycmVkTW9kdWxlcyA9IFtdO1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHR2YXIganNvbnBBcnJheSA9IHdpbmRvd1tcIndlYnBhY2tKc29ucF9uYW1lX1wiXSA9IHdpbmRvd1tcIndlYnBhY2tKc29ucF9uYW1lX1wiXSB8fCBbXTtcbiBcdHZhciBvbGRKc29ucEZ1bmN0aW9uID0ganNvbnBBcnJheS5wdXNoLmJpbmQoanNvbnBBcnJheSk7XG4gXHRqc29ucEFycmF5LnB1c2ggPSB3ZWJwYWNrSnNvbnBDYWxsYmFjaztcbiBcdGpzb25wQXJyYXkgPSBqc29ucEFycmF5LnNsaWNlKCk7XG4gXHRmb3IodmFyIGkgPSAwOyBpIDwganNvbnBBcnJheS5sZW5ndGg7IGkrKykgd2VicGFja0pzb25wQ2FsbGJhY2soanNvbnBBcnJheVtpXSk7XG4gXHR2YXIgcGFyZW50SnNvbnBGdW5jdGlvbiA9IG9sZEpzb25wRnVuY3Rpb247XG5cblxuIFx0Ly8gYWRkIGVudHJ5IG1vZHVsZSB0byBkZWZlcnJlZCBsaXN0XG4gXHRkZWZlcnJlZE1vZHVsZXMucHVzaChbXCIuL3NyYy90ZXN0L3Rlc3RwYWdlLWNvdXJzZWJ1aWxkZXIudHN4XCIsXCJ2ZW5kb3JzXCJdKTtcbiBcdC8vIHJ1biBkZWZlcnJlZCBtb2R1bGVzIHdoZW4gcmVhZHlcbiBcdHJldHVybiBjaGVja0RlZmVycmVkTW9kdWxlcygpO1xuIiwiZXhwb3J0ICogZnJvbSAnLi9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLWNsaWVudCc7IiwiZXhwb3J0ICogZnJvbSAnLi9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLWNsaWVudC13ZWInOyIsInZhciBCZWFyZXJTdG9yYWdlU2Vzc2lvblN0b3JhZ2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBCZWFyZXJTdG9yYWdlU2Vzc2lvblN0b3JhZ2UoKSB7XHJcbiAgICB9XHJcbiAgICBCZWFyZXJTdG9yYWdlU2Vzc2lvblN0b3JhZ2UucHJvdG90eXBlLnNhdmUgPSBmdW5jdGlvbiAoaWQsIHRva2VuSW5mbykge1xyXG4gICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oXCJiZWFyZXItXCIgKyBpZCwgSlNPTi5zdHJpbmdpZnkodG9rZW5JbmZvKSk7XHJcbiAgICB9O1xyXG4gICAgQmVhcmVyU3RvcmFnZVNlc3Npb25TdG9yYWdlLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdmFyIGpzb24gPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKFwiYmVhcmVyLVwiICsgaWQpO1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGpzb24gPyBKU09OLnBhcnNlKGpzb24pIDogeyB0b2tlbjogbnVsbCwgZXhwaXJlczogMCB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGV4KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoeyB0b2tlbjogbnVsbCwgZXhwaXJlczogMCB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEJlYXJlclN0b3JhZ2VTZXNzaW9uU3RvcmFnZTtcclxufSgpKTtcclxuZXhwb3J0IHsgQmVhcmVyU3RvcmFnZVNlc3Npb25TdG9yYWdlIH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJlYXJlci1zdG9yYWdlLXNlc3Npb25zdG9yYWdlLmpzLm1hcCIsInZhciByZWRpckhhc2ggPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKFwicmVkaXItaGFzaFwiKTtcclxuaWYgKHJlZGlySGFzaClcclxuICAgIHRyeSB7XHJcbiAgICAgICAgdmFyIF9hID0gSlNPTi5wYXJzZShyZWRpckhhc2gpLCB0aW1lID0gX2EudGltZSwgaGFzaCA9IF9hLmhhc2g7XHJcbiAgICAgICAgaWYgKHRpbWUgJiYgdGltZSA+IERhdGUubm93KCkgLSA2MDAwMCkge1xyXG4gICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKFwicmVkaXItaGFzaFwiKTtcclxuICAgICAgICAgICAgbG9jYXRpb24uaGFzaCA9IGhhc2g7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY2F0Y2ggKF8pIHsgfVxyXG5leHBvcnQgZnVuY3Rpb24gcmVtZW1iZXJIYXNoTG9jYXRpb24oKSB7XHJcbiAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFwicmVkaXItaGFzaFwiLCBKU09OLnN0cmluZ2lmeSh7IHRpbWU6IERhdGUubm93KCksIGhhc2g6IGxvY2F0aW9uLmhhc2ggfSkpO1xyXG59XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhhc2gtcmVzdG9yZXIuanMubWFwIiwiaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcclxuaW1wb3J0IHsgS2VkQmFja2VuZENsaWVudCwgSHR0cEVycm9yIH0gZnJvbSAnLi4va2VkLWJhY2tlbmQtY2xpZW50JztcclxuaW1wb3J0IHsgQmVhcmVyU3RvcmFnZVNlc3Npb25TdG9yYWdlIH0gZnJvbSBcIi4vYmVhcmVyLXN0b3JhZ2Utc2Vzc2lvbnN0b3JhZ2VcIjtcclxuaW1wb3J0IHsgYXZvaWRTaW11bHRhbm91c0NhbGxzIH0gZnJvbSAnLi4va2VkLWJhY2tlbmQtY2xpZW50L3V0aWxzJztcclxuaW1wb3J0IHsgS2VkTW9kZWxNaWdyYXRvck1peGluIH0gZnJvbSAnLi4va2VkLW1vZGVsLW1pZ3JhdG9yJztcclxuaW1wb3J0ICcuL2hhc2gtcmVzdG9yZXInO1xyXG5pbXBvcnQgeyByZW1lbWJlckhhc2hMb2NhdGlvbiB9IGZyb20gJy4vaGFzaC1yZXN0b3Jlcic7XHJcbktlZE1vZGVsTWlncmF0b3JNaXhpbihLZWRCYWNrZW5kQ2xpZW50LnByb3RvdHlwZSk7XHJcbmV4cG9ydCB2YXIgc3RvcmFnZSA9IG5ldyBCZWFyZXJTdG9yYWdlU2Vzc2lvblN0b3JhZ2UoKTtcclxudmFyIHRpbWVPZlBhZ2VMb2FkID0gRGF0ZS5ub3coKTtcclxudmFyIFdlYlNlcnZlckJlYXJlclByb3ZpZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gV2ViU2VydmVyQmVhcmVyUHJvdmlkZXIodG9rZW5QYXRoLCB0b2tlblJlc3BvbnNlTWFwcGVyLCB0b2tlbklkKSB7XHJcbiAgICAgICAgdGhpcy50b2tlblBhdGggPSB0b2tlblBhdGg7XHJcbiAgICAgICAgdGhpcy50b2tlblJlc3BvbnNlTWFwcGVyID0gdG9rZW5SZXNwb25zZU1hcHBlcjtcclxuICAgICAgICB0aGlzLnRva2VuSWQgPSB0b2tlbklkO1xyXG4gICAgICAgIHRoaXMudG9rZW5JbmZvID0geyB0b2tlbjogbnVsbCwgZXhwaXJlczogMCB9O1xyXG4gICAgICAgIHRoaXMuZ2V0QmVhcmVyID0gYXZvaWRTaW11bHRhbm91c0NhbGxzKHRoaXMuZ2V0QmVhcmVyLmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMucmVmcmVzaEJlYXJlciA9IGF2b2lkU2ltdWx0YW5vdXNDYWxscyh0aGlzLnJlZnJlc2hCZWFyZXIuYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcbiAgICBXZWJTZXJ2ZXJCZWFyZXJQcm92aWRlci5wcm90b3R5cGUuZ2V0QmVhcmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy50b2tlbkluZm8udG9rZW4pIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMudG9rZW5JZCkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgc3RvcmFnZS5sb2FkKHRoaXMudG9rZW5JZCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudG9rZW5JbmZvID0gX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh0aGlzLnRva2VuSW5mby5leHBpcmVzIDwgRGF0ZS5ub3coKSkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJlZnJlc2hCZWFyZXIoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gNDtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnRva2VuSW5mb107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFdlYlNlcnZlckJlYXJlclByb3ZpZGVyLnByb3RvdHlwZS5yZWZyZXNoQmVhcmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcmVzLCBfYSwgX2IsIF9jLCBfZDtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9lKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9lLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCBmZXRjaCh0aGlzLnRva2VuUGF0aCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyBBY2NlcHQ6IFwidGV4dC9wbGFpbjsgYXBwbGljYXRpb24vanNvblwiIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWRpcmVjdDogJ21hbnVhbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZTogJ25vLWNhY2hlJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWRlbnRpYWxzOiBcInNhbWUtb3JpZ2luXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gX2Uuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMzAyIHx8ICghcmVzLnN0YXR1cyAmJiByZXMudHlwZSA9PT0gXCJvcGFxdWVyZWRpcmVjdFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXNlciBzZXNzaW9uIHRpbWVkIG91dCBhbmQgc2VydmVyIHdhbnRzIHRvIHJlZGlyZWN0IGVudGlyZSBwYWdlIHRvIGxvZ2luIHBhZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRpbWUgdG8gcmVsb2FkIGN1cnJlbnQgcGFnZSB0byBmb3JjZSBhIHJlZGlyZWN0IG9mIHRoZSBlbnRpcmUgcGFnZSBpbnN0ZWFkIGZvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8ganVzdCByZWRpcmVjdGluZyB0byAvYXBpL3Rva2VuIG9yIHdoYXRldmVyLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKERhdGUubm93KCkgLSB0aW1lT2ZQYWdlTG9hZCA+IDYwMDAwKSB7IC8vIHByb2hpYml0IGVuZGxlc3MgbG9vcCBvZiByZWxvYWRpbmcgc2VsZi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndhbnRzUmVkaXJlY3QgPSB0cnVlOyAvLyBTbyB0aGF0IGxpc3RlbmVycyB0byBvbmJlZm9yZXVubG9hZCBjb3VsZCBzaG93IGFsdGVybmF0ZSBtZXNzYWdlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmVkaXJlY3Qgd2FudGVkLiBSZWxvYWQgcGFnZS5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtZW1iZXJIYXNoTG9jYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBIdHRwRXJyb3IoMzAyLCBcIlJlZGlyZWN0ZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVzLnN0YXR1cyAhPSAyMDApKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSBFcnJvci5iaW5kO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYiA9IFwiSFRUUFwiICsgcmVzLnN0YXR1cyArIFwiIFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZXMudGV4dCgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHRocm93IG5ldyAoX2EuYXBwbHkoRXJyb3IsIFt2b2lkIDAsIF9iICsgKF9lLnNlbnQoKSldKSkoKTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2QgPSB0aGlzLnRva2VuUmVzcG9uc2VNYXBwZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlcy50ZXh0KCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2MudG9rZW5JbmZvID0gX2QuYXBwbHkodGhpcywgW19lLnNlbnQoKV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yYWdlLnNhdmUodGhpcy50b2tlbklkLCB0aGlzLnRva2VuSW5mbyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnRva2VuSW5mb107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBXZWJTZXJ2ZXJCZWFyZXJQcm92aWRlcjtcclxufSgpKTtcclxuZXhwb3J0IHsgV2ViU2VydmVyQmVhcmVyUHJvdmlkZXIgfTtcclxuZXhwb3J0IHZhciBpc29tb3JwaGljID0geyBmZXRjaDogZmV0Y2guYmluZChzZWxmKSwgYnRvYTogYnRvYS5iaW5kKHNlbGYpIH07XHJcbnZhciBLZWRCYWNrZW5kQ2xpZW50V2ViID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoS2VkQmFja2VuZENsaWVudFdlYiwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEtlZEJhY2tlbmRDbGllbnRXZWIoYXBpQmFzZVVybCwgcHJvdmlkZXJPclRva2VuUGF0aCwgb3B0aW9ucykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGJlYXJlclByb3ZpZGVyID0gdHlwZW9mIHByb3ZpZGVyT3JUb2tlblBhdGggIT09ICdzdHJpbmcnID9cclxuICAgICAgICAgICAgcHJvdmlkZXJPclRva2VuUGF0aCA6XHJcbiAgICAgICAgICAgIG5ldyBXZWJTZXJ2ZXJCZWFyZXJQcm92aWRlcihwcm92aWRlck9yVG9rZW5QYXRoLCAob3B0aW9ucyAmJiBvcHRpb25zLnRva2VuUmVzcG9uc2VNYXBwZXIpIHx8IChmdW5jdGlvbiAoeCkgeyByZXR1cm4gKHsgdG9rZW46IHgsIGV4cGlyZXM6IERhdGUubm93KCkgKyA1OSAqIDYwICogNjAgfSk7IH0pLCBvcHRpb25zICYmIG9wdGlvbnMudG9rZW5JZCk7XHJcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBpc29tb3JwaGljLCBiZWFyZXJQcm92aWRlciwgYXBpQmFzZVVybCkgfHwgdGhpcztcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gS2VkQmFja2VuZENsaWVudFdlYjtcclxufShLZWRCYWNrZW5kQ2xpZW50KSk7XHJcbmV4cG9ydCB7IEtlZEJhY2tlbmRDbGllbnRXZWIgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwidmFyIERvY3VtZW50QWNjZXNzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRG9jdW1lbnRBY2Nlc3MoYWNjZXNzQ2xhaW1UeXBlLCBhY2Nlc3NDbGFpbVZhbHVlLCByaWdodCkge1xyXG4gICAgICAgIHRoaXMuYWNjZXNzQ2xhaW1UeXBlID0gYWNjZXNzQ2xhaW1UeXBlO1xyXG4gICAgICAgIHRoaXMuYWNjZXNzQ2xhaW1WYWx1ZSA9IGFjY2Vzc0NsYWltVmFsdWU7XHJcbiAgICAgICAgdGhpcy5yaWdodCA9IHJpZ2h0O1xyXG4gICAgfVxyXG4gICAgRG9jdW1lbnRBY2Nlc3MuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChhYykge1xyXG4gICAgICAgIGlmICghYWMpXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIHZhciBzcGxpdCA9IGFjLnNwbGl0KCc6Jyk7XHJcbiAgICAgICAgaWYgKHNwbGl0Lmxlbmd0aCA8IDMpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYWNjZXNzIHN0cmluZzogXCIgKyBhYyk7XHJcbiAgICAgICAgdmFyIGNsYWltVHlwZSA9IERvY3VtZW50QWNjZXNzLnVuZXNjYXBlKHNwbGl0WzBdKTtcclxuICAgICAgICB2YXIgY2xhaW1WYWx1ZSA9IERvY3VtZW50QWNjZXNzLnVuZXNjYXBlKHNwbGl0WzFdKTtcclxuICAgICAgICB2YXIgcmlnaHQgPSBzcGxpdFsyXTtcclxuICAgICAgICBpZiAocmlnaHQgIT09ICdSJyAmJiByaWdodCAhPT0gJ1cnICYmIHJpZ2h0ICE9PSAnUycpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYWNjZXNzIHN0cmluZzogXCIgKyBhYyk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudEFjY2VzcyhjbGFpbVR5cGUsIGNsYWltVmFsdWUsIHJpZ2h0KTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudEFjY2Vzcy5lc2NhcGUgPSBmdW5jdGlvbiAoYWNjZXNzQ29tcG9uZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIGFjY2Vzc0NvbXBvbmVudC5yZXBsYWNlKC9cXCUvZywgXCIlMjVcIikucmVwbGFjZSgvXFw6L2csIFwiJTNBXCIpO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50QWNjZXNzLnVuZXNjYXBlID0gZnVuY3Rpb24gKGFjY2Vzc0NvbXBvbmVudCkge1xyXG4gICAgICAgIHJldHVybiBhY2Nlc3NDb21wb25lbnQucmVwbGFjZSgvXFwlM0EvZywgXCI6XCIpLnJlcGxhY2UoL1xcJTI1L2csIFwiJVwiKTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudEFjY2Vzcy5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIERvY3VtZW50QWNjZXNzLmVzY2FwZSh0aGlzLmFjY2Vzc0NsYWltVHlwZSkgKyBcIjpcIiArXHJcbiAgICAgICAgICAgIERvY3VtZW50QWNjZXNzLmVzY2FwZSh0aGlzLmFjY2Vzc0NsYWltVmFsdWUpICsgXCI6XCIgK1xyXG4gICAgICAgICAgICB0aGlzLnJpZ2h0O1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50QWNjZXNzLmZyb21TdHJpbmdBcnJheSA9IGZ1bmN0aW9uIChhY2wpIHtcclxuICAgICAgICByZXR1cm4gYWNsXHJcbiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGFjKSB7IHJldHVybiBEb2N1bWVudEFjY2Vzcy5mcm9tU3RyaW5nKGFjKTsgfSlcclxuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoYWMpIHsgcmV0dXJuIGFjOyB9KTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudEFjY2Vzcy50b1N0cmluZ0FycmF5ID0gZnVuY3Rpb24gKGFjbCkge1xyXG4gICAgICAgIHJldHVybiBhY2wubWFwKGZ1bmN0aW9uIChhYykgeyByZXR1cm4gYWMudG9TdHJpbmcoKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIERvY3VtZW50QWNjZXNzO1xyXG59KCkpO1xyXG5leHBvcnQgeyBEb2N1bWVudEFjY2VzcyB9O1xyXG5leHBvcnQgZnVuY3Rpb24gaGFzQWNjZXNzKGFjbCwgdXNlckNsYWltcywgcmVxdWVzdGVkUmlnaHQpIHtcclxuICAgIGlmICh1c2VyQ2xhaW1zLnNvbWUoZnVuY3Rpb24gKGNsYWltKSB7IHJldHVybiBjbGFpbS50eXBlID09PSAncm9sZScgJiYgY2xhaW0udmFsdWUgPT09IFwiQURNSU5cIjsgfSkpXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICByZXR1cm4gYWNsLnNvbWUoZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICByZXR1cm4gdXNlckNsYWltcy5zb21lKGZ1bmN0aW9uIChjKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhLmFjY2Vzc0NsYWltVHlwZSA9PT0gYy50eXBlICYmXHJcbiAgICAgICAgICAgICAgICBhLmFjY2Vzc0NsYWltVmFsdWUgPT09IGMudmFsdWUgJiYgKChhLnJpZ2h0ID09PSAnUicgJiYgcmVxdWVzdGVkUmlnaHQgPT09ICdSJykgfHxcclxuICAgICAgICAgICAgICAgIChhLnJpZ2h0ID09PSAnVycgJiYgWydSJywgJ1cnXS5pbmRleE9mKHJlcXVlc3RlZFJpZ2h0KSA+PSAwKSB8fFxyXG4gICAgICAgICAgICAgICAgKGEucmlnaHQgPT09ICdTJykpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWNjZXNzLWNvbnRyb2wuanMubWFwIiwiaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcclxudmFyIEh0dHBFcnJvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliXzEuX19leHRlbmRzKEh0dHBFcnJvciwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEh0dHBFcnJvcihjb2RlLCBtZXNzYWdlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgXCJIVFRQXCIgKyBjb2RlICsgXCIgXCIgKyBtZXNzYWdlKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmNvZGUgPSBjb2RlO1xyXG4gICAgICAgIF90aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xyXG4gICAgICAgIF90aGlzLm5hbWUgPSBcImh0dHBcIiArIGNvZGU7XHJcbiAgICAgICAgX3RoaXMubWVzc2FnZSA9IFwiSFRUUFwiICsgY29kZSArIFwiIFwiICsgbWVzc2FnZTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gSHR0cEVycm9yO1xyXG59KEVycm9yKSk7XHJcbmV4cG9ydCB7IEh0dHBFcnJvciB9O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1odHRwLWVycm9yLmpzLm1hcCIsImltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XHJcbmltcG9ydCB7IFJlc3RDbGllbnQgfSBmcm9tICcuL3Jlc3RjbGllbnQnO1xyXG5leHBvcnQgKiBmcm9tICcuL3V0aWxzJztcclxuZXhwb3J0IHsgS2VkQmVhcmVyUHJvdmlkZXIgfSBmcm9tICcuL2tlZC1iZWFyZXItcHJvdmlkZXInO1xyXG5leHBvcnQgKiBmcm9tICcuL2FjY2Vzcy1jb250cm9sJztcclxuZXhwb3J0IHsgUmVzdENsaWVudCB9O1xyXG5pbXBvcnQgeyBIdHRwRXJyb3IgfSBmcm9tICcuL2h0dHAtZXJyb3InO1xyXG5leHBvcnQgeyBIdHRwRXJyb3IgfTtcclxuZXhwb3J0ICogZnJvbSAnLi9yZXN0Y2xpZW50JztcclxuO1xyXG4vLyB8ICdvdGhlckZsYWcnIHwgJ3RoaXJkRmxhZyc7Li4uXHJcbnZhciBLZWRCYWNrZW5kQ2xpZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gS2VkQmFja2VuZENsaWVudChpc29tb3JwaGljLCBiZWFyZXJQcm92aWRlciwgYmFzZVVybCkge1xyXG4gICAgICAgIHRoaXMuaHR0cCA9IG5ldyBSZXN0Q2xpZW50KGlzb21vcnBoaWMsIGJhc2VVcmwsIHsgYmVhcmVyUHJvdmlkZXI6IGJlYXJlclByb3ZpZGVyIH0pO1xyXG4gICAgfVxyXG4gICAgS2VkQmFja2VuZENsaWVudC5wcm90b3R5cGUuZ2V0TXlDbGFpbXMgPSBmdW5jdGlvbiAodGFibGUsIGZldGNoT3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcmVzLCBfYSwgX2I7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYykge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYy5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5odHRwLmdldChcIm1lL2NsYWltcy9cIiArICh0YWJsZSB8fCBcIlwiKSwgbnVsbCwgZmV0Y2hPcHRpb25zKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMgPSBfYy5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHJlcy5zdGF0dXMgIT0gMjAwKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gSHR0cEVycm9yLmJpbmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iID0gW3ZvaWQgMCwgcmVzLnN0YXR1c107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlcy50ZXh0KCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogdGhyb3cgbmV3IChfYS5hcHBseShIdHRwRXJyb3IsIF9iLmNvbmNhdChbX2Muc2VudCgpXSkpKSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzLmpzb24oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qLywgX2Muc2VudCgpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENsaWVudC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHRhYmxlLCBpZCwgb3B0aW9ucywgZmV0Y2hPcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciByZXMsIF9hLCBfYjtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9jKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmh0dHAuZ2V0KHRhYmxlICsgXCIvXCIgKyBpZCwgb3B0aW9ucywgZmV0Y2hPcHRpb25zKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMgPSBfYy5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHJlcy5zdGF0dXMgIT0gMjAwKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gSHR0cEVycm9yLmJpbmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iID0gW3ZvaWQgMCwgcmVzLnN0YXR1c107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlcy50ZXh0KCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogdGhyb3cgbmV3IChfYS5hcHBseShIdHRwRXJyb3IsIF9iLmNvbmNhdChbX2Muc2VudCgpXSkpKSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzLmpzb24oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qLywgX2Muc2VudCgpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENsaWVudC5wcm90b3R5cGUubGlzdCA9IGZ1bmN0aW9uICh0YWJsZSwgb3B0aW9ucywgZmV0Y2hPcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBxdWVyeSwgcmVzLCBfYSwgX2I7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYykge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYy5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnkgPSB0c2xpYl8xLl9fYXNzaWduKHt9LCBvcHRpb25zKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5tdXRhdGlvbnNPbkVtcHR5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnkubXV0YXRpb25zT25FbXB0eSA9IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMubXV0YXRpb25zT25FbXB0eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuaHR0cC5nZXQoXCJcIiArIHRhYmxlLCBxdWVyeSwgZmV0Y2hPcHRpb25zKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMgPSBfYy5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHJlcy5zdGF0dXMgIT0gMjAwKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gSHR0cEVycm9yLmJpbmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iID0gW3ZvaWQgMCwgcmVzLnN0YXR1c107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlcy50ZXh0KCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogdGhyb3cgbmV3IChfYS5hcHBseShIdHRwRXJyb3IsIF9iLmNvbmNhdChbX2Muc2VudCgpXSkpKSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzLmpzb24oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qLywgX2Muc2VudCgpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENsaWVudC5wcm90b3R5cGUuYmF0Y2ggPSBmdW5jdGlvbiAocmVxcywgZmV0Y2hPcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciByZXMsIF9hLCBfYjtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9jKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZW9yZGVyIG9wZXJhdGlvbnMgc28gdGhhdCAnYWRkJ3MgY29tZSBmaXJzdCBhbmQgJ2RlbGV0ZSdzIGNvbWUgbGFzdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxcyA9IHJlcXMuc2xpY2UoKS5zb3J0KGZ1bmN0aW9uIChyZXExLCByZXEyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVxMS5vcCA9PT0gJ2FkZCcgPyAtMSA6IHJlcTIub3AgPT09ICdhZGQnID8gMSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxMS5vcCA9PT0gJ2RlbGV0ZScgPyAxIDogcmVxMi5vcCA9PT0gJ2RlbGV0ZScgPyAtMSA6IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmh0dHAucG9zdChcImJhdGNoXCIsIHJlcXMsIGZldGNoT3B0aW9ucyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gX2Muc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShyZXMuc3RhdHVzICE9IDIwMCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IEh0dHBFcnJvci5iaW5kO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYiA9IFt2b2lkIDAsIHJlcy5zdGF0dXNdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZXMudGV4dCgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHRocm93IG5ldyAoX2EuYXBwbHkoSHR0cEVycm9yLCBfYi5jb25jYXQoW19jLnNlbnQoKV0pKSkoKTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbNCAvKnlpZWxkKi8sIHJlcy5qc29uKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyIC8qcmV0dXJuKi8sIF9jLnNlbnQoKV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLmRvID0gZnVuY3Rpb24gKHNjb3BlRm4pIHtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHJ1bm5lcjtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBydW5uZXIgPSBuZXcgQmF0Y2hSdW5uZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGVGbihydW5uZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmJhdGNoKHJ1bm5lci5tdXRhdGlvblJlcXVlc3RzKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOiByZXR1cm4gWzIgLypyZXR1cm4qLywgX2Euc2VudCgpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENsaWVudC5wcm90b3R5cGUuZGVsZXRlUmVhbG0gPSBmdW5jdGlvbiAocmVhbG0pIHtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHJlcywgX2EsIF9iO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2MpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2MubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuaHR0cC5kZWxldGUoXCJyZWFsbXMvXCIgKyByZWFsbSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gX2Muc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShyZXMuc3RhdHVzICE9IDIwMCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IEh0dHBFcnJvci5iaW5kO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYiA9IFt2b2lkIDAsIHJlcy5zdGF0dXNdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZXMudGV4dCgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHRocm93IG5ldyAoX2EuYXBwbHkoSHR0cEVycm9yLCBfYi5jb25jYXQoW19jLnNlbnQoKV0pKSkoKTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbNCAvKnlpZWxkKi8sIHJlcy5qc29uKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyIC8qcmV0dXJuKi8sIF9jLnNlbnQoKV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uICh0YWJsZSwgZG9jLCBicmFuY2hJZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRvKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLmFkZCh0YWJsZSwgZG9jKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENsaWVudC5wcm90b3R5cGUucHV0ID0gZnVuY3Rpb24gKHRhYmxlLCBkb2MpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kbyhmdW5jdGlvbiAocikgeyByZXR1cm4gci5wdXQodGFibGUsIGRvYyk7IH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICh0YWJsZSwgaWQsIGRlbHRhRG9jLCBicmFuY2hJZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRvKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLnVwZGF0ZSh0YWJsZSwgaWQsIGRlbHRhRG9jLCBicmFuY2hJZCk7IH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLm1lcmdlID0gZnVuY3Rpb24gKGJyYW5jaElkLCB0YXJnZXRCcmFuY2hJZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRvKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLm1lcmdlKGJyYW5jaElkLCB0YXJnZXRCcmFuY2hJZCk7IH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLmNsZWFyQnJhbmNoID0gZnVuY3Rpb24gKGJyYW5jaElkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZG8oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIuY2xlYXJCcmFuY2goYnJhbmNoSWQpOyB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ2xpZW50LnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAodGFibGUsIGlkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZG8oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIuZGVsZXRlKHRhYmxlLCBpZCk7IH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLnNoYXJlID0gZnVuY3Rpb24gKHRhYmxlLCBpZCwgYWNsKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZG8oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIuc2hhcmUodGFibGUsIGlkLCBhY2wpOyB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ2xpZW50LnByb3RvdHlwZS51bnNoYXJlID0gZnVuY3Rpb24gKHRhYmxlLCBpZCwgYWNsKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZG8oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIudW5zaGFyZSh0YWJsZSwgaWQsIGFjbCk7IH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLmxpbmsgPSBmdW5jdGlvbiAoc291cmNlVGFibGUsIHNvdXJjZUlkLCB0YXJnZXRUYWJsZSwgdGFyZ2V0SWQsIGxhYmVsKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZG8oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIubGluayhzb3VyY2VUYWJsZSwgc291cmNlSWQsIHRhcmdldFRhYmxlLCB0YXJnZXRJZCwgbGFiZWwpOyB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ2xpZW50LnByb3RvdHlwZS5saW5rMiA9IGZ1bmN0aW9uIChzb3VyY2VUYWJsZSwgc291cmNlSWQsIHRhcmdldElkLCBsYWJlbCwgYnJhbmNoSWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kbyhmdW5jdGlvbiAocikgeyByZXR1cm4gci5saW5rMihzb3VyY2VUYWJsZSwgc291cmNlSWQsIGxhYmVsLCB0YXJnZXRJZCwgYnJhbmNoSWQpOyB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ2xpZW50LnByb3RvdHlwZS51bmxpbmsgPSBmdW5jdGlvbiAoc291cmNlVGFibGUsIHNvdXJjZUlkLCB0YXJnZXRUYWJsZSwgdGFyZ2V0SWQsIGxhYmVsKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZG8oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIudW5saW5rKHNvdXJjZVRhYmxlLCBzb3VyY2VJZCwgdGFyZ2V0VGFibGUsIHRhcmdldElkLCBsYWJlbCk7IH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLnVubGluazIgPSBmdW5jdGlvbiAoc291cmNlVGFibGUsIHNvdXJjZUlkLCB0YXJnZXRJZCwgbGFiZWwsIGJyYW5jaElkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZG8oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIudW5saW5rMihzb3VyY2VUYWJsZSwgc291cmNlSWQsIGxhYmVsLCB0YXJnZXRJZCwgYnJhbmNoSWQpOyB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ2xpZW50LnByb3RvdHlwZS51bmRvTGluayA9IGZ1bmN0aW9uIChzb3VyY2VUYWJsZSwgc291cmNlSWQsIHRhcmdldElkLCBsYWJlbCwgYnJhbmNoSWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kbyhmdW5jdGlvbiAocikgeyByZXR1cm4gci51bmRvTGluayhzb3VyY2VUYWJsZSwgc291cmNlSWQsIGxhYmVsLCB0YXJnZXRJZCwgYnJhbmNoSWQpOyB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gS2VkQmFja2VuZENsaWVudDtcclxufSgpKTtcclxuZXhwb3J0IHsgS2VkQmFja2VuZENsaWVudCB9O1xyXG52YXIgQmF0Y2hSdW5uZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBCYXRjaFJ1bm5lcigpIHtcclxuICAgICAgICB0aGlzLm11dGF0aW9uUmVxdWVzdHMgPSBbXTtcclxuICAgIH1cclxuICAgIEJhdGNoUnVubmVyLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAodGFibGUsIGRvYywgYnJhbmNoSWQpIHtcclxuICAgICAgICB0aGlzLm11dGF0aW9uUmVxdWVzdHMucHVzaCh7IG9wOiAnYWRkJywgdGFibGU6IHRhYmxlLCBkb2M6IGRvYywgYnJhbmNoSWQ6IGJyYW5jaElkIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIEJhdGNoUnVubmVyLnByb3RvdHlwZS5wdXQgPSBmdW5jdGlvbiAodGFibGUsIGRvYykge1xyXG4gICAgICAgIGRvYyA9IHRzbGliXzEuX19hc3NpZ24oe30sIGRvYyk7XHJcbiAgICAgICAgZGVsZXRlIGRvYy5hY2w7IC8vIEZvcmJpZGRlbiB0byBzZW5kIGFjbCB3aXRoIHB1dCgpIGNhbGxzLlxyXG4gICAgICAgIHRoaXMubXV0YXRpb25SZXF1ZXN0cy5wdXNoKHsgb3A6ICdwdXQnLCB0YWJsZTogdGFibGUsIGRvYzogZG9jIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIEJhdGNoUnVubmVyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAodGFibGUsIGlkLCBkZWx0YURvYywgYnJhbmNoSWQpIHtcclxuICAgICAgICBkZWx0YURvYyA9IHRzbGliXzEuX19hc3NpZ24oe30sIGRlbHRhRG9jKTtcclxuICAgICAgICB0aGlzLm11dGF0aW9uUmVxdWVzdHMucHVzaCh7IG9wOiAndXBkYXRlJywgdGFibGU6IHRhYmxlLCBpZDogaWQsIGRlbHRhRG9jOiBkZWx0YURvYywgYnJhbmNoSWQ6IGJyYW5jaElkIH0pO1xyXG4gICAgfTtcclxuICAgIEJhdGNoUnVubmVyLnByb3RvdHlwZS5tZXJnZSA9IGZ1bmN0aW9uIChicmFuY2hJZCwgdGFyZ2V0QnJhbmNoSWQpIHtcclxuICAgICAgICB0aGlzLm11dGF0aW9uUmVxdWVzdHMucHVzaCh7IG9wOiAnbWVyZ2UnLCBicmFuY2hJZDogYnJhbmNoSWQsIHRhcmdldEJyYW5jaElkOiB0YXJnZXRCcmFuY2hJZCB9KTtcclxuICAgIH07XHJcbiAgICBCYXRjaFJ1bm5lci5wcm90b3R5cGUuY2xlYXJCcmFuY2ggPSBmdW5jdGlvbiAoYnJhbmNoSWQpIHtcclxuICAgICAgICB0aGlzLm11dGF0aW9uUmVxdWVzdHMucHVzaCh7IG9wOiAnY2xlYXItYnJhbmNoJywgYnJhbmNoSWQ6IGJyYW5jaElkIH0pO1xyXG4gICAgfTtcclxuICAgIEJhdGNoUnVubmVyLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAodGFibGUsIGlkKSB7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblJlcXVlc3RzLnB1c2goeyBvcDogJ2RlbGV0ZScsIHRhYmxlOiB0YWJsZSwgaWQ6IGlkIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIEJhdGNoUnVubmVyLnByb3RvdHlwZS5zaGFyZSA9IGZ1bmN0aW9uICh0YWJsZSwgaWQsIGFjbCkge1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25SZXF1ZXN0cy5wdXNoKHsgb3A6ICdzaGFyZScsIHRhYmxlOiB0YWJsZSwgaWQ6IGlkLCBhY2w6IGFjbCB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBCYXRjaFJ1bm5lci5wcm90b3R5cGUudW5zaGFyZSA9IGZ1bmN0aW9uICh0YWJsZSwgaWQsIGFjbCkge1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25SZXF1ZXN0cy5wdXNoKHsgb3A6ICd1bnNoYXJlJywgdGFibGU6IHRhYmxlLCBpZDogaWQsIGFjbDogYWNsIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIEJhdGNoUnVubmVyLnByb3RvdHlwZS5saW5rID0gZnVuY3Rpb24gKHNvdXJjZVRhYmxlLCBzb3VyY2VJZCwgdGFyZ2V0VGFibGUsIHRhcmdldElkLCBsYWJlbCkge1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25SZXF1ZXN0cy5wdXNoKHsgb3A6ICdsaW5rJywgc291cmNlVGFibGU6IHNvdXJjZVRhYmxlLCBzb3VyY2VJZDogc291cmNlSWQsIHRhcmdldFRhYmxlOiB0YXJnZXRUYWJsZSwgdGFyZ2V0SWQ6IHRhcmdldElkLCBsYWJlbDogbGFiZWwgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgQmF0Y2hSdW5uZXIucHJvdG90eXBlLmxpbmsyID0gZnVuY3Rpb24gKHNvdXJjZVRhYmxlLCBzb3VyY2VJZCwgbGFiZWwsIHRhcmdldElkLCBicmFuY2hJZCkge1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25SZXF1ZXN0cy5wdXNoKHsgb3A6ICdsaW5rJywgc291cmNlVGFibGU6IHNvdXJjZVRhYmxlLCBzb3VyY2VJZDogc291cmNlSWQsIHRhcmdldElkOiB0YXJnZXRJZCwgbGFiZWw6IGxhYmVsLCBicmFuY2hJZDogYnJhbmNoSWQgfSk7XHJcbiAgICB9O1xyXG4gICAgQmF0Y2hSdW5uZXIucHJvdG90eXBlLnVubGluayA9IGZ1bmN0aW9uIChzb3VyY2VUYWJsZSwgc291cmNlSWQsIHRhcmdldFRhYmxlLCB0YXJnZXRJZCwgbGFiZWwpIHtcclxuICAgICAgICB0aGlzLm11dGF0aW9uUmVxdWVzdHMucHVzaCh7IG9wOiAndW5saW5rJywgc291cmNlVGFibGU6IHNvdXJjZVRhYmxlLCBzb3VyY2VJZDogc291cmNlSWQsIHRhcmdldFRhYmxlOiB0YXJnZXRUYWJsZSwgdGFyZ2V0SWQ6IHRhcmdldElkLCBsYWJlbDogbGFiZWwgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgQmF0Y2hSdW5uZXIucHJvdG90eXBlLnVubGluazIgPSBmdW5jdGlvbiAoc291cmNlVGFibGUsIHNvdXJjZUlkLCBsYWJlbCwgdGFyZ2V0SWQsIGJyYW5jaElkKSB7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblJlcXVlc3RzLnB1c2goeyBvcDogJ3VubGluaycsIHNvdXJjZVRhYmxlOiBzb3VyY2VUYWJsZSwgc291cmNlSWQ6IHNvdXJjZUlkLCB0YXJnZXRJZDogdGFyZ2V0SWQsIGxhYmVsOiBsYWJlbCwgYnJhbmNoSWQ6IGJyYW5jaElkIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIEJhdGNoUnVubmVyLnByb3RvdHlwZS51bmRvTGluayA9IGZ1bmN0aW9uIChzb3VyY2VUYWJsZSwgc291cmNlSWQsIGxhYmVsLCB0YXJnZXRJZCwgYnJhbmNoSWQpIHtcclxuICAgICAgICB0aGlzLm11dGF0aW9uUmVxdWVzdHMucHVzaCh7IG9wOiAndW5kby1saW5rJywgc291cmNlVGFibGU6IHNvdXJjZVRhYmxlLCBzb3VyY2VJZDogc291cmNlSWQsIHRhcmdldElkOiB0YXJnZXRJZCwgbGFiZWw6IGxhYmVsLCBicmFuY2hJZDogYnJhbmNoSWQgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEJhdGNoUnVubmVyO1xyXG59KCkpO1xyXG5leHBvcnQgeyBCYXRjaFJ1bm5lciB9O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJpbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xyXG5pbXBvcnQgeyBSZXN0Q2xpZW50IH0gZnJvbSAnLi9yZXN0Y2xpZW50JztcclxuaW1wb3J0IHsgYXZvaWRTaW11bHRhbm91c0NhbGxzIH0gZnJvbSAnLi91dGlscyc7XHJcbnZhciBLZWRCZWFyZXJQcm92aWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEtlZEJlYXJlclByb3ZpZGVyKGlzb21vcnBoaWMsIHN0b3JhZ2UsIHRva2VuSWQsIGNsaWVudElkLCBjbGllbnRTZWNyZXQsIHRva2VuVXJsLCB0b2tlblF1ZXJ5KSB7XHJcbiAgICAgICAgdGhpcy5pc29tb3JwaGljID0gaXNvbW9ycGhpYztcclxuICAgICAgICB0aGlzLnN0b3JhZ2UgPSBzdG9yYWdlO1xyXG4gICAgICAgIHRoaXMudG9rZW5JZCA9IHRva2VuSWQ7XHJcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IGNsaWVudElkO1xyXG4gICAgICAgIHRoaXMuY2xpZW50U2VjcmV0ID0gY2xpZW50U2VjcmV0O1xyXG4gICAgICAgIHRoaXMudG9rZW5VcmwgPSB0b2tlblVybDtcclxuICAgICAgICB0aGlzLnRva2VuUXVlcnkgPSB0b2tlblF1ZXJ5O1xyXG4gICAgICAgIHRoaXMudG9rZW5JbmZvID0geyB0b2tlbjogbnVsbCwgZXhwaXJlczogMCB9O1xyXG4gICAgICAgIHRoaXMuY2xpZW50ID0gbmV3IFJlc3RDbGllbnQoaXNvbW9ycGhpYywgXCJcIiwge1xyXG4gICAgICAgICAgICB1c2VybmFtZTogdGhpcy5jbGllbnRJZCxcclxuICAgICAgICAgICAgcGFzc3dvcmQ6IHRoaXMuY2xpZW50U2VjcmV0XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5nZXRCZWFyZXIgPSBhdm9pZFNpbXVsdGFub3VzQ2FsbHModGhpcy5nZXRCZWFyZXIuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5yZWZyZXNoQmVhcmVyID0gYXZvaWRTaW11bHRhbm91c0NhbGxzKHRoaXMucmVmcmVzaEJlYXJlci5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuICAgIEtlZEJlYXJlclByb3ZpZGVyLnByb3RvdHlwZS5nZXRCZWFyZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBfYSwgdG9rZW4sIGV4cGlyZXMsIF9iLCBlXzE7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYykge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYy5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSB0aGlzLnRva2VuSW5mbywgdG9rZW4gPSBfYS50b2tlbiwgZXhwaXJlcyA9IF9hLmV4cGlyZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0b2tlbiAmJiBleHBpcmVzID49IERhdGUubm93KCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy50b2tlbkluZm9dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYy5sYWJlbCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYy50cnlzLnB1c2goWzEsIDQsICwgNl0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYiA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuc3RvcmFnZS5sb2FkKHRoaXMuY2xpZW50SWQgKyBcIi9cIiArIHRoaXMudG9rZW5JZCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2IudG9rZW5JbmZvID0gX2Muc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50b2tlbkluZm8udG9rZW4gJiYgdGhpcy50b2tlbkluZm8uZXhwaXJlcyA+PSBEYXRlLm5vdygpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMudG9rZW5JbmZvXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5yZWZyZXNoQmVhcmVyKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Muc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy50b2tlbkluZm9dO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZV8xID0gX2Muc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJlZnJlc2hCZWFyZXIoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYy5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnRva2VuSW5mb107XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJlYXJlclByb3ZpZGVyLnByb3RvdHlwZS5yZWZyZXNoQmVhcmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcmVzLCByZXRyaWVzLCBfYSwgX2I7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYykge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYy5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0cmllcyA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jLmxhYmVsID0gMTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHJldHJpZXMgPCA2KSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmV0cmlldmluZyB0b2tlbiBmb3IgXCIgKyB0aGlzLnRva2VuSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmNsaWVudC5nZXQodGhpcy50b2tlblVybCwgdGhpcy50b2tlblF1ZXJ5LCB7IGNhY2hlOiAncmVsb2FkJyB9KV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMgPSBfYy5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzICE9PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkdvdCBcIiArIHJlcy5zdGF0dXMgKyBcIiBcIiArIHJlcy5zdGF0dXNUZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2IgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzLnRleHQoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50b2tlbkluZm8gPSAoX2IudG9rZW4gPSBfYy5zZW50KCksIF9iLmV4cGlyZXMgPSBEYXRlLm5vdygpICsgNTkgKiA2MCAqIDEwMDAsIF9iKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJHb3QgdG9rZW4gZm9yIFwiICsgdGhpcy50b2tlbklkICsgXCI6IFwiICsgSlNPTi5zdHJpbmdpZnkodGhpcy50b2tlbkluZm8pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdG9yYWdlLnNhdmUodGhpcy5jbGllbnRJZCArIFwiL1wiICsgdGhpcy50b2tlbklkLCB0aGlzLnRva2VuSW5mbyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnRva2VuSW5mb107XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICArK3JldHJpZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTogdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIHJldHJpZXZlIHRva2VuIGZvciBcIiArIEpTT04uc3RyaW5naWZ5KHRoaXMudG9rZW5JZCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gS2VkQmVhcmVyUHJvdmlkZXI7XHJcbn0oKSk7XHJcbmV4cG9ydCB7IEtlZEJlYXJlclByb3ZpZGVyIH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWtlZC1iZWFyZXItcHJvdmlkZXIuanMubWFwIiwiLypcclxuZGVjbGFyZSB2YXIgQnVmZmVyOyAvLyBub2RlIGJ1aWx0LWluXHJcblxyXG5cclxuZnVuY3Rpb24gYmFzaWNBdXRoSGVhZGVyKHVzZXJuYW1lLCBwYXNzd29yZCkge1xyXG4gICAgcmV0dXJuIFwiQmFzaWMgXCIgKyBuZXcgQnVmZmVyKHVzZXJuYW1lICsgXCI6XCIgKyBwYXNzd29yZCkudG9TdHJpbmcoXCJiYXNlNjRcIik7XHJcbn1cclxuKi9cclxuaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcclxuaW1wb3J0IHsgY3JlYXRlVVVJRCB9IGZyb20gXCIuL3V0aWxzXCI7XHJcbmltcG9ydCB7IEVtaXR0ZXIgfSBmcm9tICcuLi9vYnNlcnZhYmxlL2VtaXR0ZXInO1xyXG52YXIgUmVzdENsaWVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFJlc3RDbGllbnQoaXNvbW9ycGhpYywgYmFzZVVybCwgb3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMuaXNvbW9ycGhpYyA9IGlzb21vcnBoaWM7XHJcbiAgICAgICAgdGhpcy5iYXNlVXJsID0gYmFzZVVybDtcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgICAgIHRoaXMubnVtT3V0c3RhbmRpbmdPcGVyYXRpb25zID0gMDtcclxuICAgICAgICB0aGlzLl9zdGF0dXMgPSBuZXcgRW1pdHRlcih0aGlzKTtcclxuICAgICAgICB0aGlzLmZldGNoT3B0aW9ucyA9IHsgbW9kZTogJ2NvcnMnIH07XHJcbiAgICAgICAgdGhpcy5hdXRoSGVhZGVyID0gb3B0aW9ucy5iZWFyZXIgP1xyXG4gICAgICAgICAgICBcIkJlYXJlciBcIiArIG9wdGlvbnMuYmVhcmVyIDpcclxuICAgICAgICAgICAgb3B0aW9ucy51c2VybmFtZSA/XHJcbiAgICAgICAgICAgICAgICBcIkJhc2ljIFwiICsgaXNvbW9ycGhpYy5idG9hKG9wdGlvbnMudXNlcm5hbWUgKyBcIjpcIiArIChvcHRpb25zLnBhc3N3b3JkIHx8IFwiXCIpKSA6XHJcbiAgICAgICAgICAgICAgICBudWxsO1xyXG4gICAgICAgIHRoaXMuYmVhcmVyUHJvdmlkZXIgPSBvcHRpb25zLmJlYXJlclByb3ZpZGVyIHx8IG51bGw7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVzdENsaWVudC5wcm90b3R5cGUsIFwic3RhdHVzXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXR1cztcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIFJlc3RDbGllbnQucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24gKHBhdGgsIG1ldGhvZCwgaGVhZGVycywgcXVlcnksIGZldGNoT3B0aW9ucykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgKyt0aGlzLm51bU91dHN0YW5kaW5nT3BlcmF0aW9ucztcclxuICAgICAgICB0aGlzLl9zdGF0dXMuZGlzcGF0Y2godGhpcyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZldGNoKHBhdGgsIG1ldGhvZCwgaGVhZGVycywgcXVlcnksIGZldGNoT3B0aW9ucylcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgICAtLV90aGlzLm51bU91dHN0YW5kaW5nT3BlcmF0aW9ucztcclxuICAgICAgICAgICAgX3RoaXMuX3N0YXR1cy5kaXNwYXRjaChfdGhpcyk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXM7XHJcbiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICAtLV90aGlzLm51bU91dHN0YW5kaW5nT3BlcmF0aW9ucztcclxuICAgICAgICAgICAgX3RoaXMuX3N0YXR1cy5kaXNwYXRjaChfdGhpcyk7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFJlc3RDbGllbnQucHJvdG90eXBlLl9mZXRjaCA9IGZ1bmN0aW9uIChwYXRoLCBtZXRob2QsIGhlYWRlcnMsIHF1ZXJ5LCBmZXRjaE9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHF1ZXJ5U3RyLCBfYSwgYXV0aEhlYWRlciwgdG9rZW5JbmZvLCBiZWFyZXJQcm92aWRlciwgX2IsIF9jLCB1cmwsIHJlcywgd3d3YXV0aCwgX2Q7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfZSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfZS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZldGNoT3B0aW9ucyAmJiBmZXRjaE9wdGlvbnMuY2FjaGUgPT09ICduby1jYWNoZScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdvcmthcm91bmQgZm9yIGJhY2stYnV0dG9uIG5vdCByZXNwZWN0aW5nIGNhY2hlIGNvbnRyb2wgaW4gQ2hyb21lL09wZXJhLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXBwZW5kIGEgcXVlcnkgcGFyYW1ldGVyIHRvIGZvcmNlIGEgY2FjaGUgZW50cnlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5ID0gdHNsaWJfMS5fX2Fzc2lnbih7fSwgcXVlcnksIHsgbm9jYWNoZTogY3JlYXRlVVVJRCgpIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5U3RyID0gcXVlcnkgJiYgT2JqZWN0LmtleXMocXVlcnkpLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBxdWVyeVtrZXldICE9PSB1bmRlZmluZWQ7IH0pLm1hcChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiPVwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmNvZGVVUklDb21wb25lbnQocXVlcnlba2V5XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuam9pbignJicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IHRoaXMsIGF1dGhIZWFkZXIgPSBfYS5hdXRoSGVhZGVyLCB0b2tlbkluZm8gPSBfYS50b2tlbkluZm8sIGJlYXJlclByb3ZpZGVyID0gX2EuYmVhcmVyUHJvdmlkZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKCFhdXRoSGVhZGVyICYmICF0b2tlbkluZm8gJiYgYmVhcmVyUHJvdmlkZXIpKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2IgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBiZWFyZXJQcm92aWRlci5nZXRCZWFyZXIoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYi50b2tlbkluZm8gPSB0b2tlbkluZm8gPSBfZS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9lLmxhYmVsID0gMjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdG9rZW5JbmZvKSByZXR1cm4gWzMgLypicmVhayovLCA1XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEodG9rZW5JbmZvLmV4cGlyZXMgPCBEYXRlLm5vdygpKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVG9rZW4gZXhwaXJlZC4gUmVmcmVzaCBpdDpcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYmVhcmVyUHJvdmlkZXIucmVmcmVzaEJlYXJlcigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jLnRva2VuSW5mbyA9IHRva2VuSW5mbyA9IF9lLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2UubGFiZWwgPSA0O1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0aEhlYWRlciA9IFwiQmVhcmVyIFwiICsgdG9rZW5JbmZvLnRva2VuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZS5sYWJlbCA9IDU7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJbiBvbmUgd2F5IG9yIGFub3RoZXIsIHdlJ3ZlIGNvbmNsdWRlZCBhbiBBdXRob3JpemF0aW9uIGhlYWRlciB0byB1c2U6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdXRoSGVhZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzLkF1dGhvcml6YXRpb24gPSBhdXRoSGVhZGVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybCA9IHRoaXMuYmFzZVVybCArIHBhdGggKyAocXVlcnlTdHIgPyBcIj9cIiArIHF1ZXJ5U3RyIDogXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuaXNvbW9ycGhpYy5mZXRjaCh1cmwsIHRzbGliXzEuX19hc3NpZ24oe30sIHRoaXMuZmV0Y2hPcHRpb25zLCB7IGhlYWRlcnM6IGhlYWRlcnMsIG1ldGhvZDogbWV0aG9kIH0sIGZldGNoT3B0aW9ucykpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcyA9IF9lLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVzLnN0YXR1cyA9PSA0MDEgJiYgdGhpcy5iZWFyZXJQcm92aWRlcikpIHJldHVybiBbMyAvKmJyZWFrKi8sIDldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3d3dhdXRoID0gcmVzLmhlYWRlcnMuZ2V0KFwid3d3LWF1dGhlbnRpY2F0ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJHb3QgXCIgKyByZXMuc3RhdHVzICsgXCIgZnJvbSBcIiArICh0aGlzLmJhc2VVcmwgKyBwYXRoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHd3d2F1dGggJiYgL0JlYXJlci9pLnRlc3Qod3d3YXV0aCkpKSByZXR1cm4gWzMgLypicmVhayovLCA5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2QgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmJlYXJlclByb3ZpZGVyLnJlZnJlc2hCZWFyZXIoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA3OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZC50b2tlbkluZm8gPSBfZS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnMuQXV0aG9yaXphdGlvbiA9IFwiQmVhcmVyIFwiICsgdGhpcy50b2tlbkluZm8udG9rZW47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuaXNvbW9ycGhpYy5mZXRjaCh1cmwsIHRzbGliXzEuX19hc3NpZ24oe30sIHRoaXMuZmV0Y2hPcHRpb25zLCB7IGhlYWRlcnM6IGhlYWRlcnMsIG1ldGhvZDogbWV0aG9kIH0sIGZldGNoT3B0aW9ucykpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDg6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcyA9IF9lLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2UubGFiZWwgPSA5O1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgOTogcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFJlc3RDbGllbnQucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChwYXRoLCBxdWVyeSwgZmV0Y2hPcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2gocGF0aCwgXCJHRVRcIiwgeyBBY2NlcHQ6IFwiYXBwbGljYXRpb24vanNvbjsgdGV4dC9wbGFpblwiIH0sIHF1ZXJ5LCBmZXRjaE9wdGlvbnMpO1xyXG4gICAgfTtcclxuICAgIFJlc3RDbGllbnQucHJvdG90eXBlLnBvc3QgPSBmdW5jdGlvbiAocGF0aCwgZGF0YSwgZmV0Y2hPcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2gocGF0aCwgXCJQT1NUXCIsIHtcclxuICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgICAgICAgIFwiQWNjZXB0XCI6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICAgICAgfSwgbnVsbCwgdHNsaWJfMS5fX2Fzc2lnbih7fSwgZmV0Y2hPcHRpb25zLCB7IGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpIH0pKTtcclxuICAgIH07XHJcbiAgICBSZXN0Q2xpZW50LnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAocGF0aCwgcXVlcnksIGJvZHksIGZldGNoT3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZldGNoKHBhdGgsIFwiREVMRVRFXCIsIHsgQWNjZXB0OiBcImFwcGxpY2F0aW9uL2pzb247IHRleHQvcGxhaW5cIiB9LCBxdWVyeSwgdHNsaWJfMS5fX2Fzc2lnbih7fSwgZmV0Y2hPcHRpb25zLCB7IGJvZHk6IGJvZHkgfSkpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBSZXN0Q2xpZW50O1xyXG59KCkpO1xyXG5leHBvcnQgeyBSZXN0Q2xpZW50IH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlc3RjbGllbnQuanMubWFwIiwiaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVVVSUQoKSB7XHJcbiAgICAvLyBEZWNlbnQgc29sdXRpb24gZnJvbSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzEwNTAzNC9ob3ctdG8tY3JlYXRlLWEtZ3VpZC11dWlkLWluLWphdmFzY3JpcHRcclxuICAgIHZhciBkID0gRGF0ZS5ub3coKTtcclxuICAgIHZhciB1dWlkID0gJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCBmdW5jdGlvbiAoYykge1xyXG4gICAgICAgIHZhciByID0gKGQgKyBNYXRoLnJhbmRvbSgpICogMTYpICUgMTYgfCAwO1xyXG4gICAgICAgIGQgPSBNYXRoLmZsb29yKGQgLyAxNik7XHJcbiAgICAgICAgcmV0dXJuIChjID09PSAneCcgPyByIDogKHIgJiAweDcgfCAweDgpKS50b1N0cmluZygxNik7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB1dWlkO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBhdm9pZFNpbXVsdGFub3VzQ2FsbHMobWV0aG9kKSB7XHJcbiAgICB2YXIgb25nb2luZ1Byb21pc2UgPSBudWxsO1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIW9uZ29pbmdQcm9taXNlKSB7XHJcbiAgICAgICAgICAgIG9uZ29pbmdQcm9taXNlID0gbWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBvbmdvaW5nUHJvbWlzZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG9uZ29pbmdQcm9taXNlO1xyXG4gICAgfTtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0R2xvYmFsSWQocmVhbG0pIHtcclxuICAgIHZhciBwcmVmaXggPSAnZWM5NmIzYmUtNDVmYy00MWQzLWI2OWUtJztcclxuICAgIHZhciBwYWQgPSBbJzUwJywgJzA4JywgJ2UxJywgJzQwJywgJ2U0JywgJ2U3J107XHJcbiAgICBpZiAocmVhbG0ubGVuZ3RoID4gNilcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUb28gbG9uZyByZWFsbVwiKTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVhbG0ubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICB2YXIgaGV4ID0gcmVhbG0uY2hhckNvZGVBdChpKS50b1N0cmluZygxNik7XHJcbiAgICAgICAgcGFkW2ldID0gaGV4Lmxlbmd0aCA9PT0gMiA/XHJcbiAgICAgICAgICAgIGhleCA6XHJcbiAgICAgICAgICAgICcwJyArIGhleDtcclxuICAgIH1cclxuICAgIHJldHVybiBwcmVmaXggKyBwYWQuam9pbignJyk7XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVQcmVkZXN0aW5hdGVkSWQoaW5wdXQpIHtcclxuICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBlbmNvZGVyLCBkYXRhLCBkaWdlc3QsIF9hLCBpO1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBlbmNvZGVyLmVuY29kZShpbnB1dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX2EgPSBVaW50OEFycmF5LmJpbmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgY3J5cHRvLnN1YnRsZS5kaWdlc3QoJ1NIQS0yNTYnLCBkYXRhKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgZGlnZXN0ID0gbmV3IChfYS5hcHBseShVaW50OEFycmF5LCBbdm9pZCAwLCBfYi5zZW50KCldKSkoKTtcclxuICAgICAgICAgICAgICAgICAgICBpID0gMDtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCBmdW5jdGlvbiAoYykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5pYmJsZSA9IGRpZ2VzdFtpKytdICUgMTYgfCAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHdhc2hlZE5pYmJsZSA9IGMgPT09ICd4JyA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmliYmxlIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaWJibGUgJiAweDcgfCAweDg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gd2FzaGVkTmliYmxlLnRvU3RyaW5nKDE2KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG4vKmV4cG9ydCBmdW5jdGlvbiBidWYyaGV4KGJ1ZmZlcjogQXJyYXlCdWZmZXIpIHtcclxuICByZXR1cm4gQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKFxyXG4gICAgbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKSxcclxuICAgICh4OiBudW1iZXIpID0+ICgnMDAnICsgeC50b1N0cmluZygxNikpLnNsaWNlKC0yKSkuam9pbignJyk7XHJcbn0qL1xyXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlQXJyYXkoYSwgbWFwcGVyKSB7XHJcbiAgICB2YXIgcmV0dmFsID0gYTtcclxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gYS5sZW5ndGg7IGkgPCBsOyArK2kpIHtcclxuICAgICAgICB2YXIgdCA9IGFbaV07XHJcbiAgICAgICAgdmFyIG1hcHBlZCA9IG1hcHBlcih0KTtcclxuICAgICAgICBpZiAobWFwcGVkICE9PSB0KSB7XHJcbiAgICAgICAgICAgIGlmIChyZXR2YWwgPT09IGEpXHJcbiAgICAgICAgICAgICAgICByZXR2YWwgPSBhLnNsaWNlKCk7XHJcbiAgICAgICAgICAgIHJldHZhbFtpXSA9IG1hcHBlZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmV0dmFsO1xyXG59XHJcbi8qXHJcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVBcnJheTxUPihhOiBUW10sIG1hcHBlcjogKHQ6IFQpID0+IFQgfCBmYWxzZSk6IFRbXSB7XHJcbiAgbGV0IHJldHZhbCA9IGE7XHJcbiAgbGV0IGogPSAwO1xyXG4gIGZvciAobGV0IGk9MCxsPWEubGVuZ3RoOyBpPGw7ICsraSwgKytqKSB7XHJcbiAgICBjb25zdCB0ID0gYVtpXTtcclxuICAgIGNvbnN0IG1hcHBlZCA9IG1hcHBlcih0KTtcclxuICAgIGlmIChtYXBwZWQgPT09IGZhbHNlKSB7XHJcbiAgICAgIC8vIE1hcHBlciB3YW50cyB0byBkZWxldGUgdGhpcyBkb2MuXHJcbiAgICAgIGlmIChyZXR2YWwgPT09IGEpIHJldHZhbCA9IGEuc2xpY2UoKTtcclxuICAgICAgcmV0dmFsLnNwbGljZShqLCAxKTtcclxuICAgICAgLS1qOyAvLyBjb21wZW5zYXRlIGZvciArK2pcclxuICAgIH0gZWxzZSBpZiAobWFwcGVkICE9PSB0KSB7XHJcbiAgICAgIGlmIChyZXR2YWwgPT09IGEpIHJldHZhbCA9IGEuc2xpY2UoKTtcclxuICAgICAgcmV0dmFsW2pdID0gbWFwcGVkO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gcmV0dmFsO1xyXG59XHJcbiovIFxyXG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy5qcy5tYXAiLCJpbXBvcnQgKiBhcyBKc29uU2NoZW1hIGZyb20gXCJrZWRiYWNrZW5kLXNjaGVtYS9zY2hlbWEuanNvblwiO1xyXG5pbXBvcnQgeyBnZXRUYWJsZUZyb21MYWJlbCB9IGZyb20gXCIuL3V0aWxzXCI7XHJcbnZhciBDYWNoZUJ1c3QgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBDYWNoZUJ1c3QoKSB7XHJcbiAgICB9XHJcbiAgICBDYWNoZUJ1c3QuZ2V0Q2FjaGVCdXN0ID0gZnVuY3Rpb24gKHRhYmxlLCBxdWVyeSwgdXNlciwgaW5jbHVkZXMpIHtcclxuICAgICAgICB2YXIgaW52b2x2ZWRJdGVtcyA9IENhY2hlQnVzdC5nZXRJbnZvbHZlZEl0ZW1zKHRhYmxlLCBxdWVyeSwgaW5jbHVkZXMpO1xyXG4gICAgICAgIHJldHVybiBpbnZvbHZlZEl0ZW1zXHJcbiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiY2FjaGUtYnVzdC1cIiArIHVzZXIgKyBcIi1cIiArIGl0ZW0pOyB9KVxyXG4gICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gISF2YWx1ZTsgfSlcclxuICAgICAgICAgICAgLmpvaW4oJy8nKSB8fCAnc3RhdGljJztcclxuICAgIH07XHJcbiAgICBDYWNoZUJ1c3QuaW52YWxpZGF0ZUNhY2hlID0gZnVuY3Rpb24gKHJlcXMsIHVzZXIpIHtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gQ2FjaGVCdXN0LmdldENhY2hlSW52YWxpZGF0aW9ucyhyZXFzKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGl0ZW0gPSBfYVtfaV07XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiY2FjaGUtYnVzdC1cIiArIHVzZXIgKyBcIi1cIiArIGl0ZW0sICcnICsgRGF0ZS5ub3coKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIENhY2hlQnVzdC5nZXRJbnZvbHZlZEl0ZW1zID0gZnVuY3Rpb24gKHRhYmxlLCBxdWVyeSwgaW5jbHVkZXMpIHtcclxuICAgICAgICB2YXIgaGFzRWRnZXNGcm9tID0gcXVlcnkuaGFzRWRnZXNGcm9tO1xyXG4gICAgICAgIHZhciByZWxhdGVkVGFibGVzID0gaW5jbHVkZXNcclxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAobGFiZWwpIHsgcmV0dXJuIEpzb25TY2hlbWEudGFibGVzW3RhYmxlXS5yZWxhdGlvbnNoaXBzW2xhYmVsXTsgfSlcclxuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAodGFibGUpIHsgcmV0dXJuICEhdGFibGU7IH0pO1xyXG4gICAgICAgIGlmIChoYXNFZGdlc0Zyb20pXHJcbiAgICAgICAgICAgIHJlbGF0ZWRUYWJsZXMucHVzaChcImhlZlwiICsgdGFibGUpO1xyXG4gICAgICAgIHJldHVybiBbdGFibGUsICdtYXN0ZXInLCBxdWVyeS5icmFuY2hJZF0uZmlsdGVyKGZ1bmN0aW9uICh4KSB7IHJldHVybiAhIXg7IH0pLmNvbmNhdChyZWxhdGVkVGFibGVzKS5zb3J0KCk7XHJcbiAgICB9O1xyXG4gICAgQ2FjaGVCdXN0LmdldENhY2hlSW52YWxpZGF0aW9ucyA9IGZ1bmN0aW9uIChyZXFzKSB7XHJcbiAgICAgICAgdmFyIGludmFsaWRhdGlvblNldCA9IHt9O1xyXG4gICAgICAgIHJlcXMuZm9yRWFjaChmdW5jdGlvbiAocmVxKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAocmVxLm9wKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdhZGQnOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAncHV0JzpcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6XHJcbiAgICAgICAgICAgICAgICBjYXNlICd1cGRhdGUnOlxyXG4gICAgICAgICAgICAgICAgICAgIGludmFsaWRhdGlvblNldFtyZXEudGFibGVdID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2xpbmsnOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAndW5saW5rJzpcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3VuZG8tbGluayc6XHJcbiAgICAgICAgICAgICAgICAgICAgaW52YWxpZGF0aW9uU2V0W3JlcS5zb3VyY2VUYWJsZV0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGludmFsaWRhdGlvblNldFtcImhlZi1cIiArIGdldFRhYmxlRnJvbUxhYmVsKHJlcS5zb3VyY2VUYWJsZSwgcmVxLmxhYmVsKV0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnY2xlYXItYnJhbmNoJzpcclxuICAgICAgICAgICAgICAgICAgICBpbnZhbGlkYXRpb25TZXRbcmVxLmJyYW5jaElkXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdtZXJnZSc6XHJcbiAgICAgICAgICAgICAgICAgICAgaW52YWxpZGF0aW9uU2V0W3JlcS5icmFuY2hJZF0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGludmFsaWRhdGlvblNldFtyZXEudGFyZ2V0QnJhbmNoSWQgfHwgXCJtYXN0ZXJcIl0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGludmFsaWRhdGlvblNldCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIENhY2hlQnVzdDtcclxufSgpKTtcclxuZXhwb3J0IHsgQ2FjaGVCdXN0IH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhY2hlLWJ1c3QuanMubWFwIiwiaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcclxuaW1wb3J0IHsgbWVyZ2VEZWx0YXMgfSBmcm9tICcuLi9kZWx0YS1tZXJnZSc7XHJcbmV4cG9ydCBmdW5jdGlvbiBhcHBseU11dGF0aW9uc09uRGVsdGFzKGJyYW5jaElkLCBkZWx0YXMsIG11dGF0aW9ucywgb3B0aW1pc3RpYywgdXNlckRpc3BsYXlOYW1lLCBoYXNBZGRpdGlvbmFsRmlsdGVyKSB7XHJcbiAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChtKSB7XHJcbiAgICAgICAgc3dpdGNoIChtLm9wKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ2FkZC1yZWxhdGVkJzpcclxuICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICAvLyBBZGRSZWxhdGVkIFJlcG9NdXRhdGlvblxyXG4gICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgIGlmICghaGFzQWRkaXRpb25hbEZpbHRlciAmJiBtLmJyYW5jaElkID09PSBicmFuY2hJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbHRhcyA9IFt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYWRkJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZUlkOiBtLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SWQ6IG0ucmVsYXRlZERvYy5pZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBtLmdyYXBoUHJvcCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZVRhYmxlOiBtLnRhYmxlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJG1ldGE6IG9wdGltaXN0aWMgPyAnYWRkaW5nJyA6ICdwZXJzaXN0ZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZVRpbWU6IERhdGUubm93KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXROYW1lOiBtLnJlbGF0ZWREb2MubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyaWJ1dG9yOiB1c2VyRGlzcGxheU5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfV0uY29uY2F0KGRlbHRhcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnY2xlYXItYnJhbmNoJzpcclxuICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICAvLyBDbGVhckJyYW5jaCBSZXBvTXV0YXRpb25cclxuICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICBpZiAobS5icmFuY2hJZCA9PT0gYnJhbmNoSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWx0YXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdkZWxldGUnOlxyXG4gICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgIC8vIERlbGV0ZSBSZXBvTXV0YXRpb25cclxuICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICAvLyBUaGlzIHR5cGUgb2YgbXV0YXRpb24gY2FuIG5vdCBiZSBwZXJmb3JtZWQgb250byBicmFuY2hlcy4gVGhlcmUncyBubyBicmFuY2hJZCBwcm9wZXJ0eSBvbiBtLlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ21lcmdlJzpcclxuICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICAvLyBNZXJnZSBSZXBvTXV0YXRpb25cclxuICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICBpZiAobS5icmFuY2hJZCA9PT0gYnJhbmNoSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWx0YXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG0udGFyZ2V0QnJhbmNoSWQgPT09IGJyYW5jaElkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBjaGFuZ2Ugd2lsbCBhcHBlbmQgbmV3IGRlbHRhcyB0byBvdXIgZGVsdGFzIGFycmF5IGJ1dCB3ZSBkb24ndCBrbm93IHdoYXQgd291bGQgY29tZS5cclxuICAgICAgICAgICAgICAgICAgICAvLyBOZWVkIHRvIHJlZmV0Y2ggZnJvbSBzZXJ2ZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFvcHRpbWlzdGljKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbnVsbCB9OyAvLyBDYWxsZXIgc2hvdWxkIGNoZWNrIGZvciBudWxsIGFuZCByZS1mZXRjaCBkYXRhIGZyb20gc2VydmVyLlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3JlbW92ZS1yZWxhdGVkJzpcclxuICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUtUmVsYXRlZCBSZXBvTXV0YXRpb25cclxuICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICBpZiAoaGFzQWRkaXRpb25hbEZpbHRlciB8fCBtLmJyYW5jaElkICE9PSBicmFuY2hJZClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJjb250aW51ZVwiO1xyXG4gICAgICAgICAgICAgICAgZGVsdGFzID0gW3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3JlbW92ZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZUlkOiBtLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRJZDogbS5yZWxhdGVkRG9jLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXROYW1lOiBtLnJlbGF0ZWREb2MubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IG0uZ3JhcGhQcm9wLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VUYWJsZTogbS50YWJsZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJpYnV0b3I6IHVzZXJEaXNwbGF5TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZVRpbWU6IERhdGUubm93KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRtZXRhOiBvcHRpbWlzdGljID8gJ2FkZGluZycgOiAncGVyc2lzdGVkJ1xyXG4gICAgICAgICAgICAgICAgICAgIH1dLmNvbmNhdChkZWx0YXMpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3VuZG8tbGluayc6XHJcbiAgICAgICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAgICAgLy8gVW5kby1MaW5rIFJlcG9NdXRhdGlvblxyXG4gICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgIGlmIChtLmJyYW5jaElkICE9PSBicmFuY2hJZClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJjb250aW51ZVwiO1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpZHggPSBkZWx0YXMuZmluZEluZGV4KGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoZC50eXBlID09PSAnYWRkJyB8fCBkLnR5cGUgPT09ICdyZW1vdmUnIHx8IGQudHlwZSA9PT0gJ3VuZG8tbGluaycpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLnNvdXJjZUlkID09PSBtLmlkICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLnRhcmdldElkID09PSBtLnJlbGF0ZWRJZDtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaWR4IDwgMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiY29udGludWVcIjtcclxuICAgICAgICAgICAgICAgICAgICAvLyBGb3VuZCBhbiBcImFkZFwiIG9yIFwicmVtb3ZlXCIgZGVsdGEgdG8gY2hhbmdlOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpbWlzdGljKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWx0YVJlbGF0aW9uID0gZGVsdGFzW2lkeF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hcmsgdGhlIGV4aXN0aW5nIGFkZC9yZW1vdmUgZGVsdGEgYXMgY3VycmVubHR5IGJlaW5nIGRlbGV0ZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsdGFzID0gZGVsdGFzLnNsaWNlKDAsIGlkeCkuY29uY2F0KFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRzbGliXzEuX19hc3NpZ24oe30sIGRlbHRhUmVsYXRpb24sIHsgJG1ldGE6IG9wdGltaXN0aWMgPyAncmVtb3ZpbmcnIDogJ3BlcnNpc3RlZCcgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgXSwgZGVsdGFzLnNsaWNlKGlkeCArIDEpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBlcnNpc3RlZC4gSnVzdCByZW1vdmUgaXQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbHRhcyA9IGRlbHRhcy5zbGljZSgwLCBpZHgpLmNvbmNhdChkZWx0YXMuc2xpY2UoaWR4ICsgMSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICd1cGRhdGUnOlxyXG4gICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBSZXBvTXV0YXRpb25cclxuICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICBpZiAobS5icmFuY2hJZCAhPT0gYnJhbmNoSWQpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiY29udGludWVcIjtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaWR4ID0gZGVsdGFzLmZpbmRJbmRleChmdW5jdGlvbiAoZGVsdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlbHRhLnR5cGUgPT09ICdtb2RpZnknICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWx0YS50YXJnZXRJZCA9PT0gbS5pZDtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaWR4IDwgMCAmJiAhaGFzQWRkaXRpb25hbEZpbHRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWx0YXMgPSBbe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdtb2RpZnknLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlOiBtLnRhYmxlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldElkOiBtLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldE5hbWU6IG0udGFyZ2V0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBtLmRlbHRhRG9jLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVUaW1lOiBEYXRlLm5vdygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyaWJ1dG9yczogW3VzZXJEaXNwbGF5TmFtZV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJG1ldGE6IG9wdGltaXN0aWMgPyAnYWRkaW5nJyA6ICdwZXJzaXN0ZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfV0uY29uY2F0KGRlbHRhcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXhpc3RpbmdEZWx0YURvYyA9IGRlbHRhc1tpZHhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29udHJpYnV0b3JzID0gZXhpc3RpbmdEZWx0YURvYy5jb250cmlidXRvcnMuc2xpY2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb250cmlidXRvcnMuaW5jbHVkZXModXNlckRpc3BsYXlOYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJpYnV0b3JzLnB1c2godXNlckRpc3BsYXlOYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3RGF0YSA9IG1lcmdlRGVsdGFzKGV4aXN0aW5nRGVsdGFEb2MuZGF0YSwgbS5kZWx0YURvYywgeyByZW1vdmVVbnNldFByb3BzOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW9wdGltaXN0aWMgJiYgT2JqZWN0LmtleXMobmV3RGF0YSkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb21taXR0ZWQgbXV0YXRpb24gdGhhdCByZXNldHMgYSBkZWx0YURvYy4gUmVtb3ZlIHRoZSBkZWx0YURvYyBlbnRpcmVseTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbHRhcyA9IGRlbHRhcy5zbGljZSgwLCBpZHgpLmNvbmNhdChkZWx0YXMuc2xpY2UoaWR4ICsgMSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWx0YXMgPSBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbW9kaWZ5JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGU6IG0udGFibGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldElkOiBtLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXROYW1lOiBtLnRhcmdldE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IG5ld0RhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVUaW1lOiBEYXRlLm5vdygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250cmlidXRvcnM6IGNvbnRyaWJ1dG9ycyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJG1ldGE6IG9wdGltaXN0aWMgPyAndXBkYXRpbmcnIDogJ3BlcnNpc3RlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXS5jb25jYXQoZGVsdGFzLnNsaWNlKDAsIGlkeCksIGRlbHRhcy5zbGljZShpZHggKyAxKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgZm9yICh2YXIgX2kgPSAwLCBtdXRhdGlvbnNfMSA9IG11dGF0aW9uczsgX2kgPCBtdXRhdGlvbnNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICB2YXIgbSA9IG11dGF0aW9uc18xW19pXTtcclxuICAgICAgICB2YXIgc3RhdGVfMSA9IF9sb29wXzEobSk7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBzdGF0ZV8xID09PSBcIm9iamVjdFwiKVxyXG4gICAgICAgICAgICByZXR1cm4gc3RhdGVfMS52YWx1ZTtcclxuICAgIH1cclxuICAgIHJldHVybiBkZWx0YXM7XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwbHktbXV0YXRpb25zLW9uLWRlbHRhcy5qcy5tYXAiLCJpbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xyXG5pbXBvcnQgeyBIdHRwRXJyb3IgfSBmcm9tICcuLi8uLi9rZWQtYmFja2VuZC1jbGllbnQnO1xyXG5pbXBvcnQgeyBhcHBseU11dGF0aW9uc09uRGVsdGFzIH0gZnJvbSAnLi9hcHBseS1tdXRhdGlvbnMtb24tZGVsdGFzJztcclxudmFyIERlbHRhQ2FjaGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEZWx0YUNhY2hlKGdldENsaWVudCwgZ2V0VXNlciwgZ2V0VXNlckRpc3BsYXlOYW1lKSB7XHJcbiAgICAgICAgdGhpcy5nZXRDbGllbnQgPSBnZXRDbGllbnQ7XHJcbiAgICAgICAgdGhpcy5nZXRVc2VyID0gZ2V0VXNlcjtcclxuICAgICAgICB0aGlzLmdldFVzZXJEaXNwbGF5TmFtZSA9IGdldFVzZXJEaXNwbGF5TmFtZTtcclxuICAgICAgICB0aGlzLmxvb2t1cCA9IHt9O1xyXG4gICAgfVxyXG4gICAgRGVsdGFDYWNoZS5wcm90b3R5cGUuYXBwbHlNdXRhdGlvbnMgPSBmdW5jdGlvbiAobXV0YXRpb25zLCBfYSkge1xyXG4gICAgICAgIHZhciBvcHRpbWlzdGljID0gKF9hID09PSB2b2lkIDAgPyB7IG9wdGltaXN0aWM6IGZhbHNlIH0gOiBfYSkub3B0aW1pc3RpYztcclxuICAgICAgICAvLyBBcHBseSBtdXRhdGlvbnMgbG9jYWxseSBvbnRvIHRoZSBEZWx0YUNhY2hlIGFuZCBub3RpZnkgdGhlaXIgc3Vic2NyaWJlcnNcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9iID0gT2JqZWN0LmtleXModGhpcy5sb29rdXApOyBfaSA8IF9iLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgcXVlcnlLZXkgPSBfYltfaV07XHJcbiAgICAgICAgICAgIHZhciBjYWNoZUVudHJ5ID0gdGhpcy5sb29rdXBbcXVlcnlLZXldO1xyXG4gICAgICAgICAgICBpZiAoY2FjaGVFbnRyeS52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gSW5zdGVhZCBoZXJlOiBTdG9yZSB0aGUgbXV0YXRpb25zIG9uIGNhY2hlRW50cnkuIE5vIG1hdHRlciBpZiBpdCB5ZXQgaGFzIHZhbHVlIG9yIG5vdC5cclxuICAgICAgICAgICAgICAgIC8vIFRoZW4gYXBwbHkgbXV0YXRpb24gd2hlbmV2ZXIgc3Vic2NyaWJpbmchIChCZXR0ZXIgaGFuZGxpbmcgb2YgbXV0YXRpb25zIHRoYXQgYXJyaXZlcyBiZWZvcmUgZmV0Y2goKSBpcyBkb25lKVxyXG4gICAgICAgICAgICAgICAgLy8gKFNlZSBob3cgSSBoYW5kbGUgdGhpcyBpbiBxdWVyeS1zZXQudHMpXHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3VmFsdWUgPSBhcHBseU11dGF0aW9uc09uRGVsdGFzKGNhY2hlRW50cnkucXVlcnkuYnJhbmNoSWQsIGNhY2hlRW50cnkudmFsdWUsIG11dGF0aW9ucywgb3B0aW1pc3RpYywgdGhpcy5nZXRVc2VyRGlzcGxheU5hbWUoKSwgISFjYWNoZUVudHJ5LnF1ZXJ5LnRhZ3MpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5ld1ZhbHVlID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIG11dGF0aW9uIHJlcXVpcmVzIGNhY2hlRW50cnkgdG8gYmUgcmVmZXRjaGVkIGZyb20gc2VydmVyXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFvcHRpbWlzdGljKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENhbGxlciBoYXMgc3VjY2Vzc2Z1bGx5IHBlcmZvcm1lZCB0aGUgbXV0YXRpb25zIGFuZCBnb3Qgc3VjY2VzcyBiYWNrIGZyb20gc2VydmVyLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJdCdzIG9rIHRvIHJlZmV0Y2ggdGhlIGRlbHRhcyBmcm9tIHNlcnZlciBub3c6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlRW50cnkuZmV0Y2goKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWZ0ZXIgZmV0Y2ggY29tcGxldGVzLCBpdCB3aWxsIG5vdGlmeSB0aGUgc3Vic2NyaWJlcnMuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG5ld1ZhbHVlICE9PSBjYWNoZUVudHJ5LnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVFbnRyeS5vcHRpbWlzdGljVmFsdWUgPSBuZXdWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW9wdGltaXN0aWMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlRW50cnkudmFsdWUgPSBuZXdWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBjYWNoZUVudHJ5Lm5vdGlmeShuZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRGVsdGFDYWNoZS5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gKHF1ZXJ5LCBvYnNlcnZlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGNhY2hlRW50cnkgPSB0aGlzLmxvb2t1cFtxdWVyeS5icmFuY2hJZCArIHF1ZXJ5LnRhZ3NdO1xyXG4gICAgICAgIGlmICghY2FjaGVFbnRyeSkge1xyXG4gICAgICAgICAgICBjYWNoZUVudHJ5ID0gbmV3IERlbHRhQ2FjaGVFbnRyeSh0aGlzLmdldENsaWVudCgpLCBxdWVyeSk7XHJcbiAgICAgICAgICAgIHRoaXMubG9va3VwW3F1ZXJ5LmJyYW5jaElkICsgcXVlcnkudGFnc10gPSBjYWNoZUVudHJ5O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2FjaGVFbnRyeS5jbGVhbnVwVGltZXIpIHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGNhY2hlRW50cnkuY2xlYW51cFRpbWVyKTtcclxuICAgICAgICAgICAgY2FjaGVFbnRyeS5jbGVhbnVwVGltZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0ge1xyXG4gICAgICAgICAgICB1bnN1YnNjcmliZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgY2FjaGVFbnRyeS5zdWJzY3JpYmVycyA9IGNhY2hlRW50cnkuc3Vic2NyaWJlcnMuZmlsdGVyKGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvID0gX2Eub2JzZXJ2ZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8gIT09IG9ic2VydmVyO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FjaGVFbnRyeS5zdWJzY3JpYmVycy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWNoZUVudHJ5LmNsZWFudXBUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FjaGVFbnRyeS5zdWJzY3JpYmVycy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBfdGhpcy5sb29rdXBbcXVlcnkuYnJhbmNoSWQgKyBxdWVyeS50YWdzXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0sIDEwMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGNhY2hlRW50cnkuc3Vic2NyaWJlcnMucHVzaCh7IG9ic2VydmVyOiBvYnNlcnZlciwgc3Vic2NyaXB0aW9uOiBzdWJzY3JpcHRpb24gfSk7XHJcbiAgICAgICAgaWYgKGNhY2hlRW50cnkudmFsdWUpIHtcclxuICAgICAgICAgICAgLy8gVmFsdWUgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IHJldHJpZXZlZCBhbHJlYWR5LiBQaWNrIGZyb20gY2FjaGUuXHJcbiAgICAgICAgICAgIG9ic2VydmVyKGNhY2hlRW50cnkub3B0aW1pc3RpY1ZhbHVlIHx8IGNhY2hlRW50cnkudmFsdWUsIG51bGwsIHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGNhY2hlRW50cnkuaXNGZXRjaGluZykge1xyXG4gICAgICAgICAgICAvLyBBIHZhbHVlIGlzIG9uIGl0cyB3YXkuIFNpdCBiYWNrIGFuZCByZWxheC4gQWxsIHJlZ2lzdGVyZWRcclxuICAgICAgICAgICAgLy8gb2JzZXJ2ZXJzIChpbmNsdWRpbmcgdGhpcyBvbmUpIHdpbGwgYmUgbm90aWZpZWQgd2hlbiBkYXRhIGFycml2ZXNcclxuICAgICAgICAgICAgLy8gb3IgZmFpbHMuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGNhY2hlRW50cnkuZXJyb3IpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIobnVsbCwgY2FjaGVFbnRyeS5lcnJvciwgc3Vic2NyaXB0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNhY2hlRW50cnkuZmV0Y2goKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRGVsdGFDYWNoZTtcclxufSgpKTtcclxuZXhwb3J0IHsgRGVsdGFDYWNoZSB9O1xyXG52YXIgRGVsdGFDYWNoZUVudHJ5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRGVsdGFDYWNoZUVudHJ5KGNsaWVudCwgcXVlcnkpIHtcclxuICAgICAgICB0aGlzLmZldGNoT3BlcmF0aW9uSWQgPSAwOyAvLyBNYWtlcyBzdXJlIGEgcmUtZmV0Y2ggd2lsbCBkaXNjYXJkIHRoZSByZXN1bHQgZnJvbSBhbnkgb25nb2luZyBmZXRjaC5cclxuICAgICAgICB0aGlzLmNsaWVudCA9IGNsaWVudDtcclxuICAgICAgICB0aGlzLnF1ZXJ5ID0gcXVlcnk7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5lcnJvciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5vcHRpbWlzdGljVmFsdWUgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuc3Vic2NyaWJlcnMgPSBbXTtcclxuICAgICAgICB0aGlzLmlzRmV0Y2hpbmcgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmNsZWFudXBUaW1lciA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBEZWx0YUNhY2hlRW50cnkucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGZldGNoT3BlcmF0aW9uSWQgPSArK3RoaXMuZmV0Y2hPcGVyYXRpb25JZDtcclxuICAgICAgICB0aGlzLmlzRmV0Y2hpbmcgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuZmV0Y2hGcm9tU2VydmVyKCkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgLy8gU3VjY2Vzc1xyXG4gICAgICAgICAgICBpZiAoZmV0Y2hPcGVyYXRpb25JZCA9PT0gX3RoaXMuZmV0Y2hPcGVyYXRpb25JZCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuaXNGZXRjaGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdmFsdWUuc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gYi5kYXRlVGltZSAtIGEuZGF0ZVRpbWU7IH0pOyAvLyBMYXRlc3QgZmlyc3RcclxuICAgICAgICAgICAgICAgIF90aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5vcHRpbWlzdGljVmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIF90aGlzLm5vdGlmeSh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgLy8gRmFpbFxyXG4gICAgICAgICAgICBpZiAoZmV0Y2hPcGVyYXRpb25JZCA9PT0gX3RoaXMuZmV0Y2hPcGVyYXRpb25JZCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuaXNGZXRjaGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuZXJyb3IgPSBlcnJvcjtcclxuICAgICAgICAgICAgICAgIF90aGlzLmZhaWwoZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgRGVsdGFDYWNoZUVudHJ5LnByb3RvdHlwZS5mZXRjaEZyb21TZXJ2ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciByZXMsIF9hLCBfYjtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9jKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucXVlcnkuYnJhbmNoSWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RlbHRhcyBvbmx5IGF2YWlsYWJsZSBvbiBicmFuY2hlcycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmNsaWVudC5odHRwLmdldCgnZGVsdGFzJywgdGhpcy5xdWVyeSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gX2Muc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShyZXMuc3RhdHVzID49IDMwMCB8fCByZXMuc3RhdHVzIDwgMjAwKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gSHR0cEVycm9yLmJpbmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iID0gW3ZvaWQgMCwgcmVzLnN0YXR1c107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlcy50ZXh0KCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogdGhyb3cgbmV3IChfYS5hcHBseShIdHRwRXJyb3IsIF9iLmNvbmNhdChbX2Muc2VudCgpXSkpKSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzLmpzb24oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qLywgX2Muc2VudCgpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgRGVsdGFDYWNoZUVudHJ5LnByb3RvdHlwZS5ub3RpZnkgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5zdWJzY3JpYmVyczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIF9iID0gX2FbX2ldLCBvYnNlcnZlciA9IF9iLm9ic2VydmVyLCBzdWJzY3JpcHRpb24gPSBfYi5zdWJzY3JpcHRpb247XHJcbiAgICAgICAgICAgIG9ic2VydmVyKHZhbHVlLCBudWxsLCBzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBEZWx0YUNhY2hlRW50cnkucHJvdG90eXBlLmZhaWwgPSBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICB2YXIgY29weSA9IHRoaXMuc3Vic2NyaWJlcnMuc2xpY2UoKTtcclxuICAgICAgICB0aGlzLnN1YnNjcmliZXJzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBjb3B5XzEgPSBjb3B5OyBfaSA8IGNvcHlfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIF9hID0gY29weV8xW19pXSwgb2JzZXJ2ZXIgPSBfYS5vYnNlcnZlciwgc3Vic2NyaXB0aW9uID0gX2Euc3Vic2NyaXB0aW9uO1xyXG4gICAgICAgICAgICBvYnNlcnZlcihudWxsLCBlcnJvciwgc3Vic2NyaXB0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIERlbHRhQ2FjaGVFbnRyeTtcclxufSgpKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVsdGEtY2FjaGUuanMubWFwIiwiaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcclxuaW1wb3J0IHsgQ29sbGVjdGlvbiB9IGZyb20gJy4uLy4uL29ic2VydmFibGUnO1xyXG52YXIgRGVsdGFDb2xsZWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoRGVsdGFDb2xsZWN0aW9uLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gRGVsdGFDb2xsZWN0aW9uKGRlbHRhQ2FjaGUsIHF1ZXJ5KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZnVuY3Rpb24gKG9ic2VydmVyKSB7IHJldHVybiBfdGhpcy5kZWx0YUNhY2hlLnN1YnNjcmliZShxdWVyeSwgb2JzZXJ2ZXIpOyB9KSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmRlbHRhQ2FjaGUgPSBkZWx0YUNhY2hlO1xyXG4gICAgICAgIF90aGlzLnF1ZXJ5ID0gcXVlcnk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgRGVsdGFDb2xsZWN0aW9uLnByb3RvdHlwZS50YWdzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0YWdzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdGFnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IERlbHRhQ29sbGVjdGlvbih0aGlzLmRlbHRhQ2FjaGUsIHRzbGliXzEuX19hc3NpZ24oe30sIHRoaXMucXVlcnksIHsgdGFnczogdGFncyB9KSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIERlbHRhQ29sbGVjdGlvbjtcclxufShDb2xsZWN0aW9uKSk7XHJcbmV4cG9ydCB7IERlbHRhQ29sbGVjdGlvbiB9O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWx0YS1jb2xsZWN0aW9uLmpzLm1hcCIsImltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XHJcbmV4cG9ydCBmdW5jdGlvbiBhcHBseURlbHRhKGRvYywgZGVsdGEpIHtcclxuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZGVsdGEpO1xyXG4gICAgdmFyIHRhcmdldERvYyA9IGRvYztcclxuICAgIGZvciAodmFyIF9pID0gMCwga2V5c18xID0ga2V5czsgX2kgPCBrZXlzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgdmFyIGtleSA9IGtleXNfMVtfaV07XHJcbiAgICAgICAgaWYgKHRhcmdldERvYyA9PT0gZG9jKVxyXG4gICAgICAgICAgICB0YXJnZXREb2MgPSB0c2xpYl8xLl9fYXNzaWduKHt9LCBkb2MpO1xyXG4gICAgICAgIHZhciB2YWwgPSBkZWx0YVtrZXldO1xyXG4gICAgICAgIGlmICh2YWwgJiYgdHlwZW9mIHZhbCA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgdmFyIG1ldGFJbnN0cnVjdGlvbnMgPSBPYmplY3Qua2V5cyh2YWwpXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGtleS5zdGFydHNXaXRoKCckJyk7IH0pO1xyXG4gICAgICAgICAgICBpZiAobWV0YUluc3RydWN0aW9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChtaSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBtaVZhbHVlID0gdmFsW21pXTtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIkdW5zZXRcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRG8gbm90aGluZyBvbiB0YXJnZXQgZG9jIVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RG9jLiR3YXNVbnNldCA9IHRydWU7IC8vIEp1c3QgbWFyayBpdCBmb3IgcmUtcmV0cmlldmFsIGFmdGVyIHN1Y2Nlc3NmdWwgcG9zdGluZyBjaGFuZ2VzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIiRhZGRcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlc1RvQWRkID0gbWlWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh2YWx1ZXNUb0FkZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCIkYWRkIGluc3RydWN0aW9uIG11c3QgY29udGFpbiBhcnJheVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXRBcnJheSA9IHRhcmdldERvY1trZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHRhcmdldEFycmF5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldEFycmF5ID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRBcnJheSA9IHRhcmdldEFycmF5LnNsaWNlKCk7IC8vIE9uIEpTIHNpZGUsIHdlIG11c3QgYmUgaW1tdXRhYmxlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXREb2Nba2V5XSA9IHRhcmdldEFycmF5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCB2YWx1ZXNUb0FkZF8xID0gdmFsdWVzVG9BZGQ7IF9pIDwgdmFsdWVzVG9BZGRfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IHZhbHVlc1RvQWRkXzFbX2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGFyZ2V0QXJyYXkuaW5jbHVkZXModikpIHsgLy8gYXZvaWQgZHVwc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRBcnJheS5wdXNoKHYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIkcmVtb3ZlXCI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZXNUb1JlbW92ZV8xID0gbWlWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh2YWx1ZXNUb1JlbW92ZV8xKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIiRyZW1vdmUgaW5zdHJ1Y3Rpb24gbXVzdCBjb250YWluIGFycmF5XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldEFycmF5ID0gdGFyZ2V0RG9jW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodGFyZ2V0QXJyYXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0QXJyYXkgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldERvY1trZXldID0gdGFyZ2V0QXJyYXkuZmlsdGVyKGZ1bmN0aW9uICh0KSB7IHJldHVybiAhdmFsdWVzVG9SZW1vdmVfMS5pbmNsdWRlcyh0KTsgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfYSA9IDAsIG1ldGFJbnN0cnVjdGlvbnNfMSA9IG1ldGFJbnN0cnVjdGlvbnM7IF9hIDwgbWV0YUluc3RydWN0aW9uc18xLmxlbmd0aDsgX2ErKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBtaSA9IG1ldGFJbnN0cnVjdGlvbnNfMVtfYV07XHJcbiAgICAgICAgICAgICAgICAgICAgX2xvb3BfMShtaSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0YXJnZXREb2Nba2V5XSA9IHZhbDtcclxuICAgIH1cclxuICAgIHJldHVybiB0YXJnZXREb2M7XHJcbn1cclxuLy8ge25hbWU6IFwiVWxsYVwifSwge25hbWU6IHskdW5zZXQ6MH1cclxuLy8ge3RhZ3M6IHskYWRkOiBcImhlalwifX0sIHt0YWdzOiB7JHVuc2V0OjB9XCJ9XHJcbmV4cG9ydCBmdW5jdGlvbiBtZXJnZURlbHRhcyhkZWx0YTEsIGRlbHRhMiwgX2EpIHtcclxuICAgIHZhciByZW1vdmVVbnNldFByb3BzID0gKF9hID09PSB2b2lkIDAgPyB7IHJlbW92ZVVuc2V0UHJvcHM6IGZhbHNlIH0gOiBfYSkucmVtb3ZlVW5zZXRQcm9wcztcclxuICAgIC8vcmV0dXJuIHsuLi5kZWx0YTEsIC4uLmRlbHRhMn07XHJcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGRlbHRhMik7XHJcbiAgICB2YXIgdGFyZ2V0RGVsdGEgPSB0c2xpYl8xLl9fYXNzaWduKHt9LCBkZWx0YTEpO1xyXG4gICAgZm9yICh2YXIgX2kgPSAwLCBrZXlzXzIgPSBrZXlzOyBfaSA8IGtleXNfMi5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICB2YXIga2V5ID0ga2V5c18yW19pXTtcclxuICAgICAgICB2YXIgdmFsID0gZGVsdGEyW2tleV07XHJcbiAgICAgICAgaWYgKHZhbCAmJiB0eXBlb2YgdmFsID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICB2YXIgbWV0YUluc3RydWN0aW9ucyA9IE9iamVjdC5rZXlzKHZhbClcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4ga2V5LnN0YXJ0c1dpdGgoJyQnKTsgfSk7XHJcbiAgICAgICAgICAgIGlmIChtZXRhSW5zdHJ1Y3Rpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHZhciBfbG9vcF8yID0gZnVuY3Rpb24gKG1pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1pVmFsdWUgPSB2YWxbbWldO1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobWkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIiR1bnNldFwiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVtb3ZlVW5zZXRQcm9wcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0YXJnZXREZWx0YVtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gbWF0dGVyIGlmIHRhcmdldERlbHRhIGlzIGVtcHR5IG9yIGhhcyB2YWx1ZS4gU2V0IGl0IHRvIHskdW5zZXQ6MH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0byBtYWtlIHN1cmUgdGhlIHZlcnkgZW5kIHJlc3VsdCB3aWxsIGhhdmUgeyR1bnNldDowfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldERlbHRhW2tleV0gPSB7ICR1bnNldDogMCB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIiRhZGRcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlc1RvQWRkXzIgPSBtaVZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlc1RvQWRkXzIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiJGFkZCBpbnN0cnVjdGlvbiBtdXN0IGNvbnRhaW4gYXJyYXlcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0TWV0YVByb3AgPSB0YXJnZXREZWx0YVtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0TWV0YVByb3AgPSB0YXJnZXRNZXRhUHJvcCA/IHRzbGliXzEuX19hc3NpZ24oe30sIHRhcmdldE1ldGFQcm9wKSA6IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RGVsdGFba2V5XSA9IHRhcmdldE1ldGFQcm9wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmlyc3QsIGp1c3QgY2hlY2sgaWYgdGFyZ2V0IG1ldGFQcm9wIGhhcyB7JHJlbW92ZTogWy4uLml0ZW1zXX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHNvLCByZW1vdmUgYW55IGVxdWFsIGl0ZW1zIGZyb20gdGhlcmUgYmVmb3JlIG1lcmdpbmcgdGhlIHskYWRkOiBbLi4uXX0gYXJyYXlzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldFJlbW92ZUFycmF5ID0gdGFyZ2V0TWV0YVByb3AuJHJlbW92ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRhcmdldFJlbW92ZUFycmF5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldE1ldGFQcm9wLiRyZW1vdmUgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRSZW1vdmVBcnJheS5maWx0ZXIoZnVuY3Rpb24gKHQpIHsgcmV0dXJuICF2YWx1ZXNUb0FkZF8yLmluY2x1ZGVzKHQpOyB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0TWV0YVByb3AuJHJlbW92ZS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgJHJlbW92ZSBhcnJheSBiZWNhbWUgZW10cHkuIFJlbW92ZSB0aGUgJHJlbW92ZSBwcm9wLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGFyZ2V0TWV0YVByb3AuJHJlbW92ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3cgaXQncyB0aW1lIHRvIG1lcmdlIG9yIGNyZWF0ZSB0YXJnZXQgJGFkZCBhcnJheS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXRBZGRBcnJheSA9IHRhcmdldE1ldGFQcm9wLiRhZGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRBZGRBcnJheSA9IHRhcmdldEFkZEFycmF5ID8gdGFyZ2V0QWRkQXJyYXkuY29uY2F0KHZhbHVlc1RvQWRkXzIpIDogdmFsdWVzVG9BZGRfMi5zbGljZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0TWV0YVByb3AuJGFkZCA9IHRhcmdldEFkZEFycmF5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIiRyZW1vdmVcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlc1RvUmVtb3ZlXzIgPSBtaVZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlc1RvUmVtb3ZlXzIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiJHJlbW92ZSBpbnN0cnVjdGlvbiBtdXN0IGNvbnRhaW4gYXJyYXlcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0TWV0YVByb3AgPSB0YXJnZXREZWx0YVtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0TWV0YVByb3AgPSB0YXJnZXRNZXRhUHJvcCA/IHRzbGliXzEuX19hc3NpZ24oe30sIHRhcmdldE1ldGFQcm9wKSA6IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RGVsdGFba2V5XSA9IHRhcmdldE1ldGFQcm9wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmlyc3QsIGp1c3QgY2hlY2sgaWYgdGFyZ2V0IG1ldGFQcm9wIGhhcyB7JGFkZDogWy4uLml0ZW1zXX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHNvLCByZW1vdmUgYW55IGVxdWFsIGl0ZW1zIGZyb20gdGhlcmUgYmVmb3JlIG1lcmdpbmcgdGhlIHskcmVtb3ZlOiBbLi4uXX0gYXJyYXlzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldEFkZEFycmF5ID0gdGFyZ2V0TWV0YVByb3AuJHJlbW92ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRhcmdldEFkZEFycmF5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldE1ldGFQcm9wLiRhZGQgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRBZGRBcnJheS5maWx0ZXIoZnVuY3Rpb24gKHQpIHsgcmV0dXJuICF2YWx1ZXNUb1JlbW92ZV8yLmluY2x1ZGVzKHQpOyB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0TWV0YVByb3AuJGFkZC5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgJGFkZCBhcnJheSBiZWNhbWUgZW10cHkuIFJlbW92ZSB0aGUgJGFkZCBwcm9wLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGFyZ2V0TWV0YVByb3AuJGFkZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3cgaXQncyB0aW1lIHRvIG1lcmdlIG9yIGNyZWF0ZSB0YXJnZXQgJHJlbW92ZSBhcnJheS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXRSZW1vdmVBcnJheSA9IHRhcmdldE1ldGFQcm9wLiRyZW1vdmU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRSZW1vdmVBcnJheSA9IHRhcmdldFJlbW92ZUFycmF5ID8gdGFyZ2V0UmVtb3ZlQXJyYXkuY29uY2F0KHZhbHVlc1RvUmVtb3ZlXzIpIDogdmFsdWVzVG9SZW1vdmVfMi5zbGljZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0TWV0YVByb3AuJHJlbW92ZSA9IHRhcmdldFJlbW92ZUFycmF5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2IgPSAwLCBtZXRhSW5zdHJ1Y3Rpb25zXzIgPSBtZXRhSW5zdHJ1Y3Rpb25zOyBfYiA8IG1ldGFJbnN0cnVjdGlvbnNfMi5sZW5ndGg7IF9iKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbWkgPSBtZXRhSW5zdHJ1Y3Rpb25zXzJbX2JdO1xyXG4gICAgICAgICAgICAgICAgICAgIF9sb29wXzIobWkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGFyZ2V0RGVsdGFba2V5XSA9IHZhbDtcclxuICAgIH1cclxuICAgIHJldHVybiB0YXJnZXREZWx0YTtcclxufVxyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWx0YS1tZXJnZS5qcy5tYXAiLCJleHBvcnQgKiBmcm9tICcuL2tlZGJhY2tlbmQtY29sbGVjdGlvbic7XHJcbmV4cG9ydCAqIGZyb20gJy4va2VkYmFja2VuZC1xdWVyeSc7XHJcbmV4cG9ydCAqIGZyb20gJy4va2VkYmFja2VuZC1yZXBvJztcclxuZXhwb3J0ICogZnJvbSAnLi9rZWRiYWNrZW5kLXN1YnNjcmlwdGlvbic7XHJcbmV4cG9ydCAqIGZyb20gJy4va2VkYmFja2VuZC13cml0ZXInO1xyXG5leHBvcnQgKiBmcm9tICcuL211dGF0aW9uLXF1ZXVlJztcclxuZXhwb3J0ICogZnJvbSAnLi9xdWVyeS1zZXQnO1xyXG5leHBvcnQgKiBmcm9tICcuLi9vYnNlcnZhYmxlL21peGluJztcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwiaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcclxuaW1wb3J0IHsgQmF0Y2hSdW5uZXIgfSBmcm9tICcuLi9rZWQtYmFja2VuZC1jbGllbnQnO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kU3Vic2NyaXB0aW9uIH0gZnJvbSBcIi4va2VkYmFja2VuZC1zdWJzY3JpcHRpb25cIjtcclxuaW1wb3J0IHsgQ2FjaGVCdXN0IH0gZnJvbSAnLi9jYWNoZS1idXN0JztcclxuaW1wb3J0IHsgS2VkQmFja2VuZFF1ZXJ5IH0gZnJvbSAnLi9rZWRiYWNrZW5kLXF1ZXJ5JztcclxuaW1wb3J0IHsgQ29sbGVjdGlvbiB9IGZyb20gJy4uL29ic2VydmFibGUvY29sbGVjdGlvbic7XHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIGEgXCJsaXZlXCIgcXVlcnkgYWdhaW5zdCBhIHRhYmxlIG9yIGZpbHRlcmVkIHRhYmxlLlxyXG4gKi9cclxudmFyIEtlZEJhY2tlbmRDb2xsZWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoS2VkQmFja2VuZENvbGxlY3Rpb24sIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBLZWRCYWNrZW5kQ29sbGVjdGlvbihyZXBvLCB0YWJsZSwgcXVlcnkpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcclxuICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IG5ldyBLZWRCYWNrZW5kU3Vic2NyaXB0aW9uKG9ic2VydmVyLCBfdGhpcyk7XHJcbiAgICAgICAgICAgIF90aGlzLnJlcG8ucXVlcnlTZXQuc3Vic2NyaWJlKHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XHJcbiAgICAgICAgfSkgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5yZXBvID0gcmVwbztcclxuICAgICAgICBfdGhpcy50YWJsZSA9IHRhYmxlO1xyXG4gICAgICAgIF90aGlzLnF1ZXJ5ID0gcXVlcnk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEtlZEJhY2tlbmRDb2xsZWN0aW9uLnByb3RvdHlwZSwgXCJxdWVyeUtleVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBLZWRCYWNrZW5kUXVlcnkucXVlcnlLZXkodGhpcy50YWJsZSwgdGhpcy5xdWVyeSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLCBcImluY2x1ZGVzXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2luY2x1ZGVzIHx8ICh0aGlzLl9pbmNsdWRlcyA9IFtdLmNvbmNhdCh0aGlzLnF1ZXJ5LmluY2x1ZGUgfHwgW10pKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIEtlZEJhY2tlbmRDb2xsZWN0aW9uLnByb3RvdHlwZS5hcHBseVF1ZXJ5ID0gZnVuY3Rpb24gKHF1ZXJ5KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBLZWRCYWNrZW5kQ29sbGVjdGlvbih0aGlzLnJlcG8sIHRoaXMudGFibGUsIHRzbGliXzEuX19hc3NpZ24oe30sIHRoaXMucXVlcnksIHF1ZXJ5KSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLmFkZFRvUXVlcnlBcnJheVByb3AgPSBmdW5jdGlvbiAoYXJyYXlQcm9wLCBlbnRyaWVzKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFwcGx5UXVlcnkoKF9hID0ge30sIF9hW2FycmF5UHJvcF0gPSAodGhpcy5xdWVyeVthcnJheVByb3BdIHx8IFtdKS5jb25jYXQoZW50cmllcyksIF9hKSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLmFkZEZsYWdzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBmbGFncyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGZsYWdzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmFkZFRvUXVlcnlBcnJheVByb3AoXCJmbGFnc1wiLCBmbGFncyk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLmRlYnVnID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFwcGx5UXVlcnkoeyBkZWJ1ZzogdHJ1ZSB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUuaWRzT25seSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hZGRGbGFncyhcImlkc09ubHlcIik7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLmlkc0FuZE5hbWVzT25seSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hZGRGbGFncyhcImlkc0FuZE5hbWVzT25seVwiKTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUuaW5jbHVkZUlkc09ubHkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkRmxhZ3MoXCJpbmNsdWRlSWRzT25seVwiKTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUuaW5jbHVkZUlkc0FuZE5hbWVzT25seSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hZGRGbGFncyhcImluY2x1ZGVJZHNBbmROYW1lc09ubHlcIik7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLmJldHdlZW4gPSBmdW5jdGlvbiAoZnJvbSwgdG8pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hcHBseVF1ZXJ5KHsgZnJvbTogZnJvbSwgdG86IHRvIH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDb2xsZWN0aW9uLnByb3RvdHlwZS5yb2xlID0gZnVuY3Rpb24gKHJvbGUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hcHBseVF1ZXJ5KHsgcm9sZTogcm9sZSB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUuaGFzRWRnZXNGcm9tID0gZnVuY3Rpb24gKGlkcykge1xyXG4gICAgICAgIGlmIChpZHMubGVuZ3RoID09PSAwIHx8IGlkcy5zb21lKGZ1bmN0aW9uIChpZCkgeyByZXR1cm4gIWlkOyB9KSlcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBpZCBsaXN0IGdpdmVuIHRvIENvbGxlY3Rpb24uaGFzRWRnZXNGcm9tKFwiICsgSlNPTi5zdHJpbmdpZnkoaWRzKSArIFwiKVwiKTtcclxuICAgICAgICB2YXIgaGVmID0gdGhpcy5hZGRUb1F1ZXJ5QXJyYXlQcm9wKFwiaGFzRWRnZXNGcm9tXCIsIGlkcyk7XHJcbiAgICAgICAgcmV0dXJuIGhlZjtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUuaGFzRWRnZXNUbyA9IGZ1bmN0aW9uIChpZHMpIHtcclxuICAgICAgICBpZiAoaWRzLmxlbmd0aCA9PT0gMCB8fCBpZHMuc29tZShmdW5jdGlvbiAoaWQpIHsgcmV0dXJuICFpZDsgfSkpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgaWQgbGlzdCBnaXZlbiB0byBDb2xsZWN0aW9uLmhhc0VkZ2VzVG8oXCIgKyBKU09OLnN0cmluZ2lmeShpZHMpICsgXCIpXCIpO1xyXG4gICAgICAgIHZhciBoZXQgPSB0aGlzLmFkZFRvUXVlcnlBcnJheVByb3AoXCJoYXNFZGdlc1RvXCIsIGlkcyk7XHJcbiAgICAgICAgcmV0dXJuIGhldDtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUuaWQgPSBmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFwcGx5UXVlcnkoeyBpZHM6IFtpZF0gfSkuc2luZ2xlKHtcclxuICAgICAgICAgICAgb25aZXJvOiBmdW5jdGlvbiAoKSB7IHRocm93IG5ldyBFcnJvcihcIkNvdWxkIG5vdCBmaW5kIGVudGl0eSBpbiBcIiArIF90aGlzLnRhYmxlICsgXCIgd2l0aCBpZCBcIiArIGlkKTsgfSxcclxuICAgICAgICAgICAgb25NYW55OiBmdW5jdGlvbiAoKSB7IHRocm93IG5ldyBFcnJvcihcIk11bHRpcGxlIGVudHJpZXMgaW4gXCIgKyBfdGhpcy50YWJsZSArIFwiIHdpdGggaWQgXCIgKyBpZCk7IH0sXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLmlkcyA9IGZ1bmN0aW9uIChpZHMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hcHBseVF1ZXJ5KHsgaWRzOiBpZHMgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLm5hbWUgPSBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFwcGx5UXVlcnkoeyBuYW1lOiBuYW1lIH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDb2xsZWN0aW9uLnByb3RvdHlwZS50YWdzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0YWdzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdGFnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5hcHBseVF1ZXJ5KHsgdGFnczogdGFncyB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUuYnJhbmNoSWQgPSBmdW5jdGlvbiAoYnJhbmNoSWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hcHBseVF1ZXJ5KHsgYnJhbmNoSWQ6IGJyYW5jaElkIH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDb2xsZWN0aW9uLnByb3RvdHlwZS5pbmNsdWRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBncmFwaHMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBncmFwaHNbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkVG9RdWVyeUFycmF5UHJvcChcImluY2x1ZGVcIiwgZ3JhcGhzKTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUuY2FjaGVPcHRpbWl6ZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlRdWVyeSh7IGNhY2hlQnVzdDogQ2FjaGVCdXN0LmdldENhY2hlQnVzdCh0aGlzLnRhYmxlLCB0aGlzLnF1ZXJ5LCB0aGlzLnJlcG8uZ2V0VXNlcigpLCB0aGlzLmluY2x1ZGVzKSB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUubXV0YXRpb25zT25FbXB0eSA9IGZ1bmN0aW9uIChtdXRhdGlvbkZhY3RvcnkpIHtcclxuICAgICAgICB2YXIgdHggPSBuZXcgQmF0Y2hSdW5uZXIoKTtcclxuICAgICAgICBtdXRhdGlvbkZhY3RvcnkodHgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFwcGx5UXVlcnkoeyBtdXRhdGlvbnNPbkVtcHR5OiB0eC5tdXRhdGlvblJlcXVlc3RzIH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDb2xsZWN0aW9uLnByb3RvdHlwZS5zaW5nbGUgPSBmdW5jdGlvbiAodGhyb3dlcnMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBfYSA9IHRocm93ZXJzIHx8IHt9LCBvblplcm8gPSBfYS5vblplcm8sIG9uTWFueSA9IF9hLm9uTWFueTtcclxuICAgICAgICByZXR1cm4gdGhpcy50b1ZhbHVlKCkubWFwKGZ1bmN0aW9uIChpdGVtcykge1xyXG4gICAgICAgICAgICBpZiAoaXRlbXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob25aZXJvKVxyXG4gICAgICAgICAgICAgICAgICAgIG9uWmVybygpO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNpbmdsZSBpdGVtIG9mIFwiICsgX3RoaXMudGFibGUgKyBcIiBleHBlY3RlZCB0byBiZSByZXR1cm5lZCBieSBxdWVyeSBcIiArIEpTT04uc3RyaW5naWZ5KF90aGlzLnF1ZXJ5KSArIFwiIGJ1dCBub25lIHdhcyBmb3VuZC5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGl0ZW1zLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgICAgIGRlYnVnZ2VyO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9uTWFueSlcclxuICAgICAgICAgICAgICAgICAgICBvbk1hbnkoKTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlNpbmdsZSBpdGVtIG9mIFwiICsgX3RoaXMudGFibGUgKyBcIiBleHBlY3RlZCB0byBiZSByZXR1cm5lZCBieSBxdWVyeSBcIiArIEpTT04uc3RyaW5naWZ5KF90aGlzLnF1ZXJ5KSArIFwiIGJ1dCBcIiArIGl0ZW1zLmxlbmd0aCArIFwiIHdhcyBmb3VuZC5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW1zWzBdO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIC8qY29tYmluZUxhdGVzdDxUT3RoZXI+KG90aGVyOiBRdWVyeU9ic2VydmFibGU8VE90aGVyPikge1xyXG4gICAgICByZXR1cm4gdGhpcy5yZW5kZXIoeCA9PiB4KS5jb21iaW5lTGF0ZXN0KG90aGVyKTtcclxuICAgIH0qL1xyXG4gICAgS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChkb2MsIGNoYW5nZXMsIGRlYm91bmNlKSB7XHJcbiAgICAgICAgaWYgKGRlYm91bmNlID09PSB2b2lkIDApIHsgZGVib3VuY2UgPSAxMDAwOyB9XHJcbiAgICAgICAgdGhpcy5yZXBvLndyaXRlci5tdXRhdGUoW3tcclxuICAgICAgICAgICAgICAgIG9wOiAndXBkYXRlJyxcclxuICAgICAgICAgICAgICAgIHRhYmxlOiB0aGlzLnRhYmxlLFxyXG4gICAgICAgICAgICAgICAgYnJhbmNoSWQ6IHRoaXMucXVlcnkuYnJhbmNoSWQsXHJcbiAgICAgICAgICAgICAgICBpZDogZG9jLmlkLFxyXG4gICAgICAgICAgICAgICAgZGVsdGFEb2M6IGNoYW5nZXMsXHJcbiAgICAgICAgICAgICAgICB0YXJnZXROYW1lOiBkb2MubmFtZVxyXG4gICAgICAgICAgICB9XSwgZGVib3VuY2UpO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDb2xsZWN0aW9uLnByb3RvdHlwZS5hZGRSZWxhdGVkID0gZnVuY3Rpb24gKGlkLCBsYWJlbCwgcmVsYXRlZERvYykge1xyXG4gICAgICAgIHRoaXMucmVwby53cml0ZXIubXV0YXRlKFt7XHJcbiAgICAgICAgICAgICAgICBvcDogJ2FkZC1yZWxhdGVkJyxcclxuICAgICAgICAgICAgICAgIHRhYmxlOiB0aGlzLnRhYmxlLFxyXG4gICAgICAgICAgICAgICAgYnJhbmNoSWQ6IHRoaXMucXVlcnkuYnJhbmNoSWQsXHJcbiAgICAgICAgICAgICAgICBpZDogaWQsXHJcbiAgICAgICAgICAgICAgICBncmFwaFByb3A6IGxhYmVsLFxyXG4gICAgICAgICAgICAgICAgcmVsYXRlZERvYzogcmVsYXRlZERvY1xyXG4gICAgICAgICAgICB9XSwgMCk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLnJlbW92ZVJlbGF0ZWQgPSBmdW5jdGlvbiAoaWQsIGxhYmVsLCByZWxhdGVkRG9jKSB7XHJcbiAgICAgICAgdGhpcy5yZXBvLndyaXRlci5tdXRhdGUoW3tcclxuICAgICAgICAgICAgICAgIG9wOiAncmVtb3ZlLXJlbGF0ZWQnLFxyXG4gICAgICAgICAgICAgICAgdGFibGU6IHRoaXMudGFibGUsXHJcbiAgICAgICAgICAgICAgICBicmFuY2hJZDogdGhpcy5xdWVyeS5icmFuY2hJZCxcclxuICAgICAgICAgICAgICAgIGlkOiBpZCxcclxuICAgICAgICAgICAgICAgIGdyYXBoUHJvcDogbGFiZWwsXHJcbiAgICAgICAgICAgICAgICByZWxhdGVkRG9jOiByZWxhdGVkRG9jXHJcbiAgICAgICAgICAgIH1dLCAwKTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUudW5kb0xpbmsgPSBmdW5jdGlvbiAoaWQsIGxhYmVsLCByZWxhdGVkSWQpIHtcclxuICAgICAgICBpZiAoIXRoaXMucXVlcnkuYnJhbmNoSWQpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInVuZG8gbGlua3MgY2FuIG9ubHkgYmUgcGVyZm9ybWVkIG9uIGJyYW5jaGVzXCIpO1xyXG4gICAgICAgIHRoaXMucmVwby53cml0ZXIubXV0YXRlKFt7XHJcbiAgICAgICAgICAgICAgICBvcDogJ3VuZG8tbGluaycsXHJcbiAgICAgICAgICAgICAgICB0YWJsZTogdGhpcy50YWJsZSxcclxuICAgICAgICAgICAgICAgIGJyYW5jaElkOiB0aGlzLnF1ZXJ5LmJyYW5jaElkLFxyXG4gICAgICAgICAgICAgICAgaWQ6IGlkLFxyXG4gICAgICAgICAgICAgICAgZ3JhcGhQcm9wOiBsYWJlbCxcclxuICAgICAgICAgICAgICAgIHJlbGF0ZWRJZDogcmVsYXRlZElkXHJcbiAgICAgICAgICAgIH1dLCAwKTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGlkcyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGlkc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlcG8ud3JpdGVyLm11dGF0ZShpZHMubWFwKGZ1bmN0aW9uIChpZCkgeyByZXR1cm4gKHtcclxuICAgICAgICAgICAgb3A6ICdkZWxldGUnLFxyXG4gICAgICAgICAgICB0YWJsZTogX3RoaXMudGFibGUsXHJcbiAgICAgICAgICAgIGlkOiBpZFxyXG4gICAgICAgIH0pOyB9KSwgMCk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmlwdGlvbikge1xyXG4gICAgICAgIHRoaXMucmVwby5xdWVyeVNldC51bnN1YnNjcmliZShzdWJzY3JpcHRpb24pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBLZWRCYWNrZW5kQ29sbGVjdGlvbjtcclxufShDb2xsZWN0aW9uKSk7XHJcbmV4cG9ydCB7IEtlZEJhY2tlbmRDb2xsZWN0aW9uIH07XHJcbi8qbWl4aW4oXHJcbiAgS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLFxyXG4gIE1hcHBlZENvbGxlY3Rpb24ucHJvdG90eXBlLFxyXG4gIFwibWFwXCIsIFwiZmxhdFwiLCBcImNvbmNhdFwiLCBcInJlbmRlclwiLCBcImxvYWRcIik7Ki9cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9a2VkYmFja2VuZC1jb2xsZWN0aW9uLmpzLm1hcCIsImltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XHJcbmltcG9ydCB7IHVwZGF0ZUFycmF5IH0gZnJvbSAnLi4va2VkLWJhY2tlbmQtY2xpZW50L3V0aWxzJztcclxuaW1wb3J0IHsgYnJhbmNoU2Vuc2l0aXZlLCBnZXRUYWJsZUZyb21MYWJlbCB9IGZyb20gJy4vdXRpbHMnO1xyXG5pbXBvcnQgeyBhcHBseURlbHRhIH0gZnJvbSAnLi9kZWx0YS1tZXJnZSc7XHJcbnZhciBLZWRCYWNrZW5kUXVlcnkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBLZWRCYWNrZW5kUXVlcnkodGFibGUsIHF1ZXJ5LCB1c2VyLCByZXBvLCBtdXRhdGlvblF1ZXVlKSB7XHJcbiAgICAgICAgdGhpcy50YWJsZSA9IHRhYmxlO1xyXG4gICAgICAgIHRoaXMucXVlcnkgPSBxdWVyeTtcclxuICAgICAgICB0aGlzLnVzZXIgPSB1c2VyO1xyXG4gICAgICAgIHRoaXMucmVwbyA9IHJlcG87XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblF1ZXVlID0gbXV0YXRpb25RdWV1ZTtcclxuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBbXTtcclxuICAgICAgICB0aGlzLmRhdGEgPSBbXTtcclxuICAgICAgICB0aGlzLmdvdEluaXRpYWxSZXNwb25zZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaW52YWxpZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubG9hZGVkVmVyc2lvbiA9IDA7XHJcbiAgICAgICAgdGhpcy5fbG9hZFByb21pc2UgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaW5jbHVkZXMgPSBxdWVyeS5pbmNsdWRlID9cclxuICAgICAgICAgICAgdHlwZW9mIHF1ZXJ5LmluY2x1ZGUgPT09ICdzdHJpbmcnID9cclxuICAgICAgICAgICAgICAgIFtxdWVyeS5pbmNsdWRlXSA6XHJcbiAgICAgICAgICAgICAgICBxdWVyeS5pbmNsdWRlIDpcclxuICAgICAgICAgICAgW107XHJcbiAgICB9XHJcbiAgICBLZWRCYWNrZW5kUXVlcnkucXVlcnlLZXkgPSBmdW5jdGlvbiAodGFibGUsIHF1ZXJ5KSB7XHJcbiAgICAgICAgdmFyIG11dGF0aW9uc09uRW1wdHkgPSBxdWVyeS5tdXRhdGlvbnNPbkVtcHR5LCBjb21wYXJhYmxlUHJvcHMgPSB0c2xpYl8xLl9fcmVzdChxdWVyeSwgW1wibXV0YXRpb25zT25FbXB0eVwiXSk7XHJcbiAgICAgICAgcmV0dXJuIHRhYmxlICsgSlNPTi5zdHJpbmdpZnkoY29tcGFyYWJsZVByb3BzKTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoS2VkQmFja2VuZFF1ZXJ5LnByb3RvdHlwZSwgXCJxdWVyeUtleVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBLZWRCYWNrZW5kUXVlcnkucXVlcnlLZXkodGhpcy50YWJsZSwgdGhpcy5xdWVyeSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBLZWRCYWNrZW5kUXVlcnkucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpcHRpb24pIHtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGRhdGEsIGRhdGE7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2goc3Vic2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEodGhpcy5nb3RJbml0aWFsUmVzcG9uc2UgJiYgIXRoaXMuaW52YWxpZCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gdGhpcy5nZXREYXRhV2l0aE11dGF0aW9uc0FwcGxpZWQodGhpcy5tdXRhdGlvblF1ZXVlLmdldCgpLCB0cnVlLCB0aGlzLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24ubm90aWZ5U3Vic2NyaWJlcihkYXRhLCB0aGlzLmVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gdGhpcy5xdWVyeUxvY2FsbHkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvciA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi5ub3RpZnlTdWJzY3JpYmVyKGRhdGEsIHRoaXMuZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9hZCgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSA0O1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kUXVlcnkucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAodmVyc2lvbikge1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgbG9hZFByb21pc2U7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZ290SW5pdGlhbFJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtdXRhdGlvbnNPbkVtcHR5IHNob3VsZCBuZXZlciBiZSB1c2VkIHR3aWNlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMucXVlcnkubXV0YXRpb25zT25FbXB0eTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISghdmVyc2lvbiAmJiB0aGlzLl9sb2FkUHJvbWlzZSkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLl9sb2FkUHJvbWlzZV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOiBcclxuICAgICAgICAgICAgICAgICAgICAvLyBsb2FkaW5nIGlzIG9uZ29pbmcsIGFuZCBjYWxsZXIgZG9lcyBub3QgcmVxdWlyZSBhIHJlY2VudCByZWZyZXNoLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHdhaXQgZm9yIHRoZSBvbmdvaW5nIGxvYWQgdG8gY29tcGxldGVcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgX2Euc2VudCgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcnNpb24gPSB2ZXJzaW9uIHx8IHRoaXMucmVwby53cml0ZXIucGVyc2lzdGVkVmVyc2lvbi52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZFByb21pc2UgPSB0aGlzLl9sb2FkUHJvbWlzZSA9IHRoaXMuX2xvYWQodmVyc2lvbikudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLl9sb2FkUHJvbWlzZSA9PT0gbG9hZFByb21pc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5kYXRhID0gZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5sb2FkZWRWZXJzaW9uID0gTWF0aC5tYXgoX3RoaXMubG9hZGVkVmVyc2lvbiwgdmVyc2lvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLl9sb2FkUHJvbWlzZSA9PT0gbG9hZFByb21pc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOb29uZSBoYXMgcmVmcmVzaGVkIG91ciBsb2FkLiBUaGUgZXJyb3IgaXMgdGhlIGZpbmFsIHJlc3VsdC4gU2V0IGl0LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmVycm9yID0gZXJyb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLl9sb2FkUHJvbWlzZSA9PT0gbG9hZFByb21pc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOb29uZSBoYXMgcmVmcmVzaGVkIG91ciBsb2FkLiBXZSdyZSBmaW5pc2hlZC4gRGF0YSBvciBlcnJvciBpcyBhbHJlYWR5IHNldC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNYXJrIGdvdEluaXRpYWxSZXNwb25zZSB0byB0cnVlIGFuZCBub3RpZnkgc3Vic2NyaWJlcnMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2xvYWRQcm9taXNlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5nb3RJbml0aWFsUmVzcG9uc2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLm5vdGlmeVN1YnNjcmliZXJzKF90aGlzLm11dGF0aW9uUXVldWUuZ2V0KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQSBtb3JlIHJlY2VudCBjYWxsIHRvIGxvYWQoKSBpcyBvbmdvaW5nLCBPUiB3YXMgb25nb2luZyBidXQgcmVzcG9uZGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmVmb3JlIHVzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluIGFueSBjYXNlIHJldHVybiB0aGlzLl9sb2FkUHJvbWlzZS4gSWYgaXQncyBvbmdvaW5nIHdlJ2xsIHdhaXQgZm9yIGl0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdG8gZmluaXNoLiBJZiBpdCdzIG51bGwsIHdlJ2xsIGJlIHJldHVybmluZyBmaW5hbGx5IGhlcmUgd2l0aG91dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFueSBhY3Rpb24sIGJlY2F1c2UgdGhlIGFjdGlvbiB3YXMgdGFrZW4gYnkgdGhlIHJlZnJlc2hlci5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuX2xvYWRQcm9taXNlOyAvLyBXYWl0IGZvciB0aGUgcmVmcmVzaGVkIGxvYWQgdG8gY29tcGxldGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGxvYWRQcm9taXNlXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kUXVlcnkucHJvdG90eXBlLl9sb2FkID0gZnVuY3Rpb24gKHZlcnNpb24pIHtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMubXV0YXRpb25RdWV1ZS5hZmZlY3RzUXVlcnkodGhpcy50YWJsZSwgdGhpcy5xdWVyeSwgdGhpcy5pbmNsdWRlcykpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGVyZSBhcmUgb3V0Z29pbmcgbXV0YXRpb25zIHRoYXQgYWZmZWN0cyB0aGlzIHF1ZXJ5LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOZWVkIHRvIHdhaXQgdGlsbCB0aGV5IHJlYWNoIHNlcnZlciBhbmQgc2VydmVyIHJlc3BvbmRzIHdpdGggT0sgYmVmb3JlIHF1ZXJ5aW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBzZXJ2ZXIuIE90aGVyd2lzZSwgd2UgbWF5IGdldCBpbmFjY3VyYXRlIGRhdGEgZnJvbSBzZXJ2ZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucmVwby53cml0ZXIud2FpdEZvclZlcnNpb25Ub1BlcnNpc3QodmVyc2lvbildO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlcmUgYXJlIG91dGdvaW5nIG11dGF0aW9ucyB0aGF0IGFmZmVjdHMgdGhpcyBxdWVyeS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTmVlZCB0byB3YWl0IHRpbGwgdGhleSByZWFjaCBzZXJ2ZXIgYW5kIHNlcnZlciByZXNwb25kcyB3aXRoIE9LIGJlZm9yZSBxdWVyeWluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgc2VydmVyLiBPdGhlcndpc2UsIHdlIG1heSBnZXQgaW5hY2N1cmF0ZSBkYXRhIGZyb20gc2VydmVyLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucXVlcnlTZXJ2ZXIoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qLywgX2Euc2VudCgpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFF1ZXJ5LnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpcHRpb24pIHtcclxuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSB0aGlzLnN1YnNjcmlwdGlvbnMuZmlsdGVyKGZ1bmN0aW9uIChzKSB7IHJldHVybiBzICE9PSBzdWJzY3JpcHRpb247IH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRRdWVyeS5wcm90b3R5cGUuY29tbWl0TXV0YXRpb25zID0gZnVuY3Rpb24gKG11dGF0aW9ucywgdmVyc2lvbikge1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgX2ksIG11dGF0aW9uc18xLCBtLCBkYXRhO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5kYXRhKSByZXR1cm4gWzMgLypicmVhayovLCA5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2kgPSAwLCBtdXRhdGlvbnNfMSA9IG11dGF0aW9ucztcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoX2kgPCBtdXRhdGlvbnNfMS5sZW5ndGgpKSByZXR1cm4gWzMgLypicmVhayovLCA4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbSA9IG11dGF0aW9uc18xW19pXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEobS5vcCA9PT0gJ2NsZWFyLWJyYW5jaCcgJiYgKG0uYnJhbmNoSWQgPT09IHRoaXMucXVlcnkuYnJhbmNoSWQpKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucmVmcmVzaE9ySW52YWxpZGF0ZSh2ZXJzaW9uKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKG0ub3AgPT09ICdtZXJnZScgJiYgKCFtLnRhcmdldEJyYW5jaElkIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtLmJyYW5jaElkID09PSB0aGlzLnF1ZXJ5LmJyYW5jaElkIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtLnRhcmdldEJyYW5jaElkID09PSB0aGlzLnF1ZXJ5LmJyYW5jaElkKSkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJlZnJlc2hPckludmFsaWRhdGUodmVyc2lvbildO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShtLm9wID09PSAndXBkYXRlJyAmJiAoKG0uZGVsdGFEb2MudGFncyAmJiB0aGlzLnF1ZXJ5LnRhZ3MpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAobS5kZWx0YURvYy5uYW1lICYmIHRoaXMucXVlcnkubmFtZSkpKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgN107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEEgdGFnIG1heSBoYXZlIGJlZW4gYWRkZWQsIG9yIHJlbmFtZWQsIGFuZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgcXVlcnkgaXMgZGVwZW5kZW50IG9uIHRoZSBzYW1lIHByb3BlcnR5LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgcXVlcnkgbXVzdCBiZSByZWZyZXNoZWQgZnJvbSBzZXJ2ZXIgYXMgd2UgY2Fubm90XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbW1pdCB0aGUgbXV0YXRpb25zIGxvY2FsbHkgYXMgd2UgZG9uJ3QgaGF2ZSBhbGwgaW5mby5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5yZWZyZXNoT3JJbnZhbGlkYXRlKHZlcnNpb24pXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEEgdGFnIG1heSBoYXZlIGJlZW4gYWRkZWQsIG9yIHJlbmFtZWQsIGFuZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgcXVlcnkgaXMgZGVwZW5kZW50IG9uIHRoZSBzYW1lIHByb3BlcnR5LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgcXVlcnkgbXVzdCBiZSByZWZyZXNoZWQgZnJvbSBzZXJ2ZXIgYXMgd2UgY2Fubm90XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbW1pdCB0aGUgbXV0YXRpb25zIGxvY2FsbHkgYXMgd2UgZG9uJ3QgaGF2ZSBhbGwgaW5mby5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA3OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfaSsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAxXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDg6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSB0aGlzLmdldERhdGFXaXRoTXV0YXRpb25zQXBwbGllZChtdXRhdGlvbnMsIGZhbHNlLCB0aGlzLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA5OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRRdWVyeS5wcm90b3R5cGUucmVmcmVzaE9ySW52YWxpZGF0ZSA9IGZ1bmN0aW9uICh2ZXJzaW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEodGhpcy5zdWJzY3JpcHRpb25zLmxlbmd0aCA9PT0gMCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmludmFsaWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9hZCh2ZXJzaW9uKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFF1ZXJ5LnByb3RvdHlwZS5ub3RpZnlTdWJzY3JpYmVycyA9IGZ1bmN0aW9uIChvcHRpbWlzdGljTXV0YXRpb25zKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAodGhpcy5kYXRhICYmIHRoaXMuZ290SW5pdGlhbFJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRhXzEgPSB0aGlzLmdldERhdGFXaXRoTXV0YXRpb25zQXBwbGllZChvcHRpbWlzdGljTXV0YXRpb25zLCB0cnVlLCB0aGlzLmRhdGEpO1xyXG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAocykge1xyXG4gICAgICAgICAgICAgICAgcy5ub3RpZnlTdWJzY3JpYmVyKGRhdGFfMSwgX3RoaXMuZXJyb3IpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFF1ZXJ5LnByb3RvdHlwZS5xdWVyeUxvY2FsbHkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVwby5xdWVyeVNldC5xdWVyeUxvY2FsbHkodGhpcy50YWJsZSwgdGhpcy5xdWVyeSwgdGhpcy5pbmNsdWRlcyk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFF1ZXJ5LnByb3RvdHlwZS5xdWVyeVNlcnZlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGRhdGE7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5yZXBvLmdldENsaWVudCgpLmxpc3QodGhpcy50YWJsZSwgdHNsaWJfMS5fX2Fzc2lnbih7fSwgdGhpcy5xdWVyeSkpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBkYXRhXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFF1ZXJ5LnByb3RvdHlwZS5nZXREYXRhV2l0aE11dGF0aW9uc0FwcGxpZWQgPSBmdW5jdGlvbiAobXV0YXRpb25zLCBvcHRpbWlzdGljLCBkYXRhKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBtdXRhdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAobXV0YXRpb24pIHtcclxuICAgICAgICAgICAgZGF0YSA9IF90aGlzLmFwcGx5TXV0YXRpb25zT25EYXRhKGRhdGEsIG11dGF0aW9uLCBvcHRpbWlzdGljKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kUXVlcnkucHJvdG90eXBlLmFwcGx5TXV0YXRpb25zT25EYXRhID0gZnVuY3Rpb24gKGRhdGEsIG0sIG9wdGltaXN0aWMpIHtcclxuICAgICAgICBpZiAoYnJhbmNoU2Vuc2l0aXZlKG0pICYmIG0uYnJhbmNoSWQgIT0gdGhpcy5xdWVyeS5icmFuY2hJZClcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgICAgdmFyIF9hID0gdGhpcywgdGFibGUgPSBfYS50YWJsZSwgaW5jbHVkZXMgPSBfYS5pbmNsdWRlcywgbGlzdE9wdGlvbnMgPSBfYS5xdWVyeTtcclxuICAgICAgICB2YXIgc291cmNlSWRzID0gbGlzdE9wdGlvbnMuaGFzRWRnZXNGcm9tID8gW10uY29uY2F0KGxpc3RPcHRpb25zLmhhc0VkZ2VzRnJvbSB8fCBbXSkgOiBbXTtcclxuICAgICAgICB2YXIgcmVxdWVzdGVkVGFncyA9IGxpc3RPcHRpb25zLnRhZ3MgPyBbXS5jb25jYXQobGlzdE9wdGlvbnMudGFncyB8fCBbXSkgOiBbXTtcclxuICAgICAgICBzd2l0Y2ggKG0ub3ApIHtcclxuICAgICAgICAgICAgY2FzZSAndXBkYXRlJzoge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZUFycmF5KGRhdGEsIGZ1bmN0aW9uIChkb2MpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZG9jLmlkID09PSBtLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFwcGx5IGRlbHRhIG9uIHVwZGF0ZWQgZG9jdW1lbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVwZGF0ZWREb2MgPSBhcHBseURlbHRhKGRvYywgbS5kZWx0YURvYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpbWlzdGljKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZERvYy4kbWV0YSA9ICd1cGRhdGluZyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGVkRG9jO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBJZiBpZCBkb2VzIG5vdCBhcHBseSB0byB0aGlzIGRvYywgc2VhcmNoIGluIGdyYXBocyB0aGUgaWQgaXMgZm91bmRcclxuICAgICAgICAgICAgICAgICAgICAvLyBhbW9uZyBncmFwaCBpbmNsdWRlZCBkb2NzLCBhbmQgaWYgc28sIHVwZGF0ZSB0aGF0IG9uZTpcclxuICAgICAgICAgICAgICAgICAgICBpbmNsdWRlcy5mb3JFYWNoKGZ1bmN0aW9uIChsYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmNsdWRlZERvY3MgPSBkb2NbbGFiZWxdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5jbHVkZWREb2NzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXBkYXRlZEFycmF5ID0gdXBkYXRlQXJyYXkoaW5jbHVkZWREb2NzLCBmdW5jdGlvbiAocmVsYXRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZWxhdGVkLmlkICE9PSBtLmlkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVsYXRlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXBkYXRlZFJlbGF0ZWQgPSBhcHBseURlbHRhKHJlbGF0ZWQsIG0uZGVsdGFEb2MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpbWlzdGljKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkUmVsYXRlZC4kbWV0YSA9ICd1cGRhdGluZyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZWRSZWxhdGVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodXBkYXRlZEFycmF5ICE9PSBpbmNsdWRlZERvY3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MgPSB0c2xpYl8xLl9fYXNzaWduKHt9LCBkb2MsIChfYSA9IHt9LCBfYVtsYWJlbF0gPSB1cGRhdGVkQXJyYXksIF9hKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZG9jO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSAnYWRkLXJlbGF0ZWQnOlxyXG4gICAgICAgICAgICAgICAgaWYgKHRhYmxlID09PSBtLnRhYmxlICYmIGluY2x1ZGVzLmluZGV4T2YobS5ncmFwaFByb3ApICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGV4cHJlc3Npb24gaXMgYGRiLmNvdXJzZUJsb2Nrcy4uLi53aGF0ZXZlci4uIC5pbmNsdWRlKFwiYWJpbGl0aWVzXCIpYCwgZGV0ZWN0OiBkYi5jb3Vyc2VCbG9ja3MuYWRkUmVsYXRlZChibG9ja0lkLCAnYWJpbGl0aWVzJywgLi4uKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIC4uLmJlY2F1c2UgdGFibGUgPSAnY291cnNlQmxvY2tzJyBhbmQgaW5jbHVkZXMgaGFzIFwiYWJpbGl0aWVzXCIuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZUFycmF5KGRhdGEsIGZ1bmN0aW9uIChkb2MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9jLmlkICE9PSBtLmlkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRvYztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlbGF0ZWREb2MgPSB0c2xpYl8xLl9fYXNzaWduKHt9LCBtLnJlbGF0ZWREb2MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW1pc3RpYylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0ZWREb2MuJG1ldGEgPSAnYWRkaW5nJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hc3NpZ24oe30sIGRvYywgKF9hID0ge30sIF9hW20uZ3JhcGhQcm9wXSA9IGRvY1ttLmdyYXBoUHJvcF0uY29uY2F0KFtyZWxhdGVkRG9jXSksIF9hKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobGlzdE9wdGlvbnMuaGFzRWRnZXNGcm9tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNvdXJjZUlkcy5pbmNsdWRlcyhtLmlkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBleHByZXNzaW9uIGlzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGBkYi5jb3Vyc2VCbG9ja3MuaGFzRWRnZXNGcm9tKFtjb3Vyc2VJZF0pYCAgKG1lYW5pbmcgdGFibGU9J2NvdXJzZUJsb2NrcycgYW5kIHNvdXJjZUlkcyBpbmNsdWRlcyBjb3Vyc2VJZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gLCBkZXRlY3Q6IGRiLmNvdXJzZUluc3RhbmNlcy5hZGRSZWxhdGVkKGNvdXJzZUlkLCAnY291cnNlQmxvY2tzJywgLi4uLikgLy8gbS5ncmFwaFByb3AgPT09ICdibG9ja3MnLS0+IGdldFRhYmxlRnJvbUxhYmVsIC0tPiAnY291cnNlQmxvY2tzJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFibGUgPT09IGdldFRhYmxlRnJvbUxhYmVsKG0udGFibGUsIG0uZ3JhcGhQcm9wKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsaXN0T3B0aW9ucy50YWdzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLmNvbmNhdCh0aGlzLnNldEdyYXBoUHJvcHMobS5yZWxhdGVkRG9jKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobS5yZWxhdGVkRG9jLnRhZ3MgJiYgcmVxdWVzdGVkVGFncy5zb21lKGZ1bmN0aW9uICh0YWcpIHsgcmV0dXJuIG0ucmVsYXRlZERvYy50YWdzLmluY2x1ZGVzKHRhZyk7IH0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuY29uY2F0KHRoaXMuc2V0R3JhcGhQcm9wcyhtLnJlbGF0ZWREb2MpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChsaXN0T3B0aW9ucy5pZHMgJiYgbGlzdE9wdGlvbnMuaWRzLnNvbWUoZnVuY3Rpb24gKGlkKSB7IHJldHVybiBpZCA9PT0gbS5yZWxhdGVkRG9jLmlkOyB9KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEEgY2VydGFpbiBJRCBpcyBvYnNlcnZlZC4gQSBkb2Mgd2l0aCB0aGlzIGlkIGlzIGJlaW5nIGFkZGVkLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgZG9jIHRvIHRoZSByZXN1bHQuIEV4YWN0bHkgdGhpcyBXSUxMIGhhcHBlbiBpbiB0aGUgZm9sbG93aW5nIHR5cGljYWwgc2NlbmFyaW86XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gMS4gVXNlciBhZGRzIGEgcmVsYXRlZCBkb2N1bWVudCB0byBhIGxpc3QuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gMi4gRG9jdW1lbnQgcmVtYWlucyB3aXRoaW4gdGhlIE11dGF0aW9uUXVldWUgd2hpbGUgYmF0Y2gtcmVxdWVzdCBpcyBiZWluZyBwcm9jZXNzZWQgYnkgc2VydmVyLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIDMuIFVzZXIgY2xpY2tzIHRoZSBhZGRlZCBpdGVtIHRvIGVkaXQgb3IgdmlldyBpdCAob3Igb3VyIGNvbXBvbmVudCByZWRpcmVjdHMgdG8gaXRzIGVkaXRvcilcclxuICAgICAgICAgICAgICAgICAgICAvLyA0LiBBIG5ldyBxdWVyeSBvZiB0aGF0IHBhcnRpY3VsYXIgSUQgaXMgc3Vic2NyaWJlZCB0byB7aWRzPVt0aGVJZF19XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgS2VkQmFja2VuZFF1ZXJ5LnN1YnNjcmliZSB0aGVuIGRvZXMgdGhpczpcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgIDEuIENhbGwgcXVlcnlMb2NhbGx5KCkgYmVmb3JlIHF1ZXJ5aW5nIHNlcnZlclxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgMi4gcXVlcnlMb2NhbGx5KCkgaW5zcGVjdHMgbXV0YXRpb25zIGFuZCBmaW5kcyBhIG1hdGNoLCByZXR1cm5pbmcgYW4gZW1wdHkgbGlzdFxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgKGFzc3VtZXMgYXMgd2UgYXJlIGFkZGluZyBpdCwgaXQgY2FuJ3QgZXhpc3Qgb24gdGhlIHNlcnZlciBhbnl3YXkpXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAzLiBLZWRCYWNrZW5kUVVlcnkgYXBwbGllcyBtdXRhdGlvbnMgb250byB0aGUgZW1wdHkgbGlzdCwgYW5kIGVuZHMgdXAgaGVyZSB0byBhZGRcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIGl0IG9wdGltaXN0aWNhbGx5LlxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgNC4gV2hlbiBzZXJ2ZXIgcmVzcG9uZHMgd2l0aCAyMDAgT0ssIGNhbGxzIHVzIGhlcmUgYWdhaW4gd2l0aCBvcHRpbWlzdGljPWZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICB0byBcInBlcnNpc3RcIiBpdCBpbiB0aGUgcXVlcnkncyBkYXRhIGFycmF5LlxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgNEI6IElmIG5vdCAyMDAgT0ssIG11dGF0aW9uIG1heSBiZSBnb25lIGFuZCB0aGUgc3Vic2NyaWJlciB3aWxsIHNlIGFuIGVycm9yIHBhZ2VcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIFwiQ291bGQgbm90IGZpbmQgZW50aXR5IHdpdGggaWQgWC5cIiBhbG9uZyB3aXRoIGEgcmVkIGVycm9yIG1lc3NhZ2Ugb24gdGhlIHNjcmVlblxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgYWJvdXQgdGhhdCBpdCBmYWlsZWQgdG8gc2F2ZSBvbiBzZXJ2ZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuY29uY2F0KHRoaXMuc2V0R3JhcGhQcm9wcyhtLnJlbGF0ZWREb2MpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgICAgICBjYXNlICdyZW1vdmUtcmVsYXRlZCc6XHJcbiAgICAgICAgICAgICAgICBpZiAodGFibGUgPT09IG0udGFibGUgJiYgaW5jbHVkZXMuaW5kZXhPZihtLmdyYXBoUHJvcCkgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZUFycmF5KGRhdGEsIGZ1bmN0aW9uIChkb2MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5jbHVkZWREb2NzID0gZG9jW20uZ3JhcGhQcm9wXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpbmNsdWRlZERvY3MpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZG9jO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9jLmlkICE9PSBtLmlkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRvYztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hc3NpZ24oe30sIGRvYywgKF9hID0ge30sIF9hW20uZ3JhcGhQcm9wXSA9IG9wdGltaXN0aWMgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFyayByZWxhdGVkLWRvYy10by1yZW1vdmUgd2l0aCAkbWV0YTogJ2RlbGV0aW5nJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVkZWREb2NzLm1hcChmdW5jdGlvbiAoZCkgeyByZXR1cm4gZC5pZCAhPT0gbS5yZWxhdGVkRG9jLmlkID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkIDogdHNsaWJfMS5fX2Fzc2lnbih7fSwgZCwgeyAkbWV0YTogJ2RlbGV0aW5nJyB9KTsgfSkgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGVsZXRlIHJlbGF0ZWQtZG9jLXRvLXJlbW92ZSBmcm9tIGRvY1tncmFwUHJvcF06XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlZERvY3MuZmlsdGVyKGZ1bmN0aW9uIChkKSB7IHJldHVybiBkLmlkICE9PSBtLnJlbGF0ZWREb2MuaWQ7IH0pLCBfYSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGxpc3RPcHRpb25zLmhhc0VkZ2VzRnJvbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzb3VyY2VJZHMuaW5jbHVkZXMobS5pZCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvcHRpbWlzdGljID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEubWFwKGZ1bmN0aW9uIChkKSB7IHJldHVybiBkLmlkID09PSBtLnJlbGF0ZWREb2MuaWQgPyB0c2xpYl8xLl9fYXNzaWduKHt9LCBkLCB7ICRtZXRhOiAnZGVsZXRpbmcnIH0pIDogZDsgfSkgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5maWx0ZXIoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGQuaWQgIT09IG0ucmVsYXRlZERvYy5pZDsgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICAgICAgY2FzZSAnZGVsZXRlJzpcclxuICAgICAgICAgICAgICAgIGlmICh0YWJsZSA9PT0gbS50YWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLmZpbHRlcihmdW5jdGlvbiAoZCkgeyByZXR1cm4gZC5pZCAhPT0gbS5pZDsgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChsaXN0T3B0aW9ucy5pbmNsdWRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluY2x1ZGVkVGFibGVzID0gaW5jbHVkZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAobGFiZWwpIHsgcmV0dXJuICh7IGxhYmVsOiBsYWJlbCwgdGFibGU6IGdldFRhYmxlRnJvbUxhYmVsKHRhYmxlLCBsYWJlbCkgfSk7IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsYWJlbHNfMSA9IGluY2x1ZGVkVGFibGVzLmZpbHRlcihmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhYmxlID0gX2EudGFibGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0YWJsZSA9PT0gbS50YWJsZTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobGFiZWxzXzEubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlQXJyYXkoZGF0YSwgZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWxzXzEuZm9yRWFjaChmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGFiZWwgPSBfYS5sYWJlbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlbGF0ZWREb2NzID0gZG9jW2xhYmVsXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVsYXRlZERvY3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jID0gdHNsaWJfMS5fX2Fzc2lnbih7fSwgZG9jLCAoX2IgPSB7fSwgX2JbbGFiZWxdID0gb3B0aW1pc3RpYyA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWxhdGVkRG9jcy5tYXAoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGQuaWQgPT09IG0uaWQgPyB0c2xpYl8xLl9fYXNzaWduKHt9LCBkLCB7ICRtZXRhOiAnZGVsZXRpbmcnIH0pIDogZDsgfSkgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRlZERvY3MuZmlsdGVyKGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZCA9IF9hLmlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpZCAhPT0gbS5pZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLCBfYikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRvYztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFF1ZXJ5LnByb3RvdHlwZS5zZXRHcmFwaFByb3BzID0gZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgIHZhciBjb3B5ID0gdHNsaWJfMS5fX2Fzc2lnbih7fSwgZG9jKTtcclxuICAgICAgICB0aGlzLmluY2x1ZGVzLmZvckVhY2goZnVuY3Rpb24gKGxhYmVsKSB7IHJldHVybiBjb3B5W2xhYmVsXSA9IGNvcHlbbGFiZWxdIHx8IFtdOyB9KTtcclxuICAgICAgICByZXR1cm4gY29weTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gS2VkQmFja2VuZFF1ZXJ5O1xyXG59KCkpO1xyXG5leHBvcnQgeyBLZWRCYWNrZW5kUXVlcnkgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9a2VkYmFja2VuZC1xdWVyeS5qcy5tYXAiLCJpbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xyXG5pbXBvcnQgeyB0YWJsZXMgfSBmcm9tICdrZWRiYWNrZW5kLXNjaGVtYS9zY2hlbWEuanNvbic7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRDb2xsZWN0aW9uIH0gZnJvbSAnLi9rZWRiYWNrZW5kLWNvbGxlY3Rpb24nO1xyXG5pbXBvcnQgeyBRdWVyeVNldCB9IGZyb20gJy4vcXVlcnktc2V0JztcclxuaW1wb3J0IHsgTXV0YXRpb25RdWV1ZSB9IGZyb20gJy4vbXV0YXRpb24tcXVldWUnO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kV3JpdGVyIH0gZnJvbSAnLi9rZWRiYWNrZW5kLXdyaXRlcic7XHJcbmltcG9ydCB7IERlbHRhQ29sbGVjdGlvbiB9IGZyb20gJy4vZGVsdGEtY29sbGVjdGlvbi9kZWx0YS1jb2xsZWN0aW9uJztcclxudmFyIEtlZEJhY2tlbmRSZXBvID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gS2VkQmFja2VuZFJlcG8oZ2V0Q2xpZW50LCBnZXRVc2VyLCBnZXRVc2VyRGlzcGxheU5hbWUsIGRlZmF1bHRRdWVyeU9wdGlvbnMsIG11dGF0aW9uUXVldWUsIHF1ZXJ5U2V0LCB3cml0ZXIsIGNhY2hlT3B0aW1pemVkKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLmdldENsaWVudCA9IGdldENsaWVudDtcclxuICAgICAgICB0aGlzLmdldFVzZXIgPSBnZXRVc2VyO1xyXG4gICAgICAgIHRoaXMuZ2V0VXNlckRpc3BsYXlOYW1lID0gZ2V0VXNlckRpc3BsYXlOYW1lO1xyXG4gICAgICAgIHRoaXMuZGVmYXVsdFF1ZXJ5T3B0aW9ucyA9IGRlZmF1bHRRdWVyeU9wdGlvbnM7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblF1ZXVlID0gbXV0YXRpb25RdWV1ZTtcclxuICAgICAgICB0aGlzLnF1ZXJ5U2V0ID0gcXVlcnlTZXQ7XHJcbiAgICAgICAgdGhpcy53cml0ZXIgPSB3cml0ZXI7XHJcbiAgICAgICAgdGhpcy5jYWNoZU9wdGltaXplZCA9IGNhY2hlT3B0aW1pemVkO1xyXG4gICAgICAgIGlmICghZGVmYXVsdFF1ZXJ5T3B0aW9ucylcclxuICAgICAgICAgICAgdGhpcy5kZWZhdWx0UXVlcnlPcHRpb25zID0ge307XHJcbiAgICAgICAgaWYgKCFtdXRhdGlvblF1ZXVlKVxyXG4gICAgICAgICAgICB0aGlzLm11dGF0aW9uUXVldWUgPSBuZXcgTXV0YXRpb25RdWV1ZSgpO1xyXG4gICAgICAgIGlmICghcXVlcnlTZXQpXHJcbiAgICAgICAgICAgIHRoaXMucXVlcnlTZXQgPSBuZXcgUXVlcnlTZXQodGhpcy5tdXRhdGlvblF1ZXVlKTtcclxuICAgICAgICBpZiAoIXdyaXRlcilcclxuICAgICAgICAgICAgdGhpcy53cml0ZXIgPSBuZXcgS2VkQmFja2VuZFdyaXRlcih0aGlzLm11dGF0aW9uUXVldWUsIHRoaXMucXVlcnlTZXQsIGdldENsaWVudCwgZ2V0VXNlciwgZ2V0VXNlckRpc3BsYXlOYW1lKTtcclxuICAgICAgICBPYmplY3Qua2V5cyh0YWJsZXMpLmZvckVhY2goZnVuY3Rpb24gKHRhYmxlKSB7XHJcbiAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uID0gbmV3IEtlZEJhY2tlbmRDb2xsZWN0aW9uKF90aGlzLCB0YWJsZSwgZGVmYXVsdFF1ZXJ5T3B0aW9ucyB8fCB7fSk7XHJcbiAgICAgICAgICAgIGlmIChjYWNoZU9wdGltaXplZCkge1xyXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbiA9IGNvbGxlY3Rpb24uY2FjaGVPcHRpbWl6ZWQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpc1t0YWJsZV0gPSBjb2xsZWN0aW9uO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZGVsdGFzID0gbmV3IERlbHRhQ29sbGVjdGlvbih0aGlzLndyaXRlci5kZWx0YUNhY2hlLCB7XHJcbiAgICAgICAgICAgIGJyYW5jaElkOiB0aGlzLmRlZmF1bHRRdWVyeU9wdGlvbnMuYnJhbmNoSWQgLy8gSWYgYnJhbmNoSWQgaXMgdW5kZWZpbmVkLiBEZWx0YUNvbGxlY3Rpb24gd2lsbCByZXNwb25kIHdpdGggRXJyb3Igb24gc3Vic2NyaWJlKClcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIEtlZEJhY2tlbmRSZXBvLnByb3RvdHlwZS50YWJsZSA9IGZ1bmN0aW9uICh0YWJsZU5hbWUpIHtcclxuICAgICAgICB2YXIgY29sbGVjdGlvbiA9IG5ldyBLZWRCYWNrZW5kQ29sbGVjdGlvbih0aGlzLCB0YWJsZU5hbWUsIHRoaXMuZGVmYXVsdFF1ZXJ5T3B0aW9ucyk7XHJcbiAgICAgICAgaWYgKHRoaXMuY2FjaGVPcHRpbWl6ZWQpXHJcbiAgICAgICAgICAgIGNvbGxlY3Rpb24gPSBjb2xsZWN0aW9uLmNhY2hlT3B0aW1pemVkKCk7XHJcbiAgICAgICAgcmV0dXJuIGNvbGxlY3Rpb247XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFJlcG8ucHJvdG90eXBlLl9jbG9uZSA9IGZ1bmN0aW9uIChxdWVyeU9wdGlvbnMsIGNhY2hlT3B0aW1pemVkKSB7XHJcbiAgICAgICAgdmFyIGNsb25lID0gbmV3IEtlZEJhY2tlbmRSZXBvKHRoaXMuZ2V0Q2xpZW50LCB0aGlzLmdldFVzZXIsIHRoaXMuZ2V0VXNlckRpc3BsYXlOYW1lLCB0c2xpYl8xLl9fYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRRdWVyeU9wdGlvbnMsIHF1ZXJ5T3B0aW9ucyksIHRoaXMubXV0YXRpb25RdWV1ZSwgdGhpcy5xdWVyeVNldCwgdGhpcy53cml0ZXIsIGNhY2hlT3B0aW1pemVkID09PSB1bmRlZmluZWQgPyB0aGlzLmNhY2hlT3B0aW1pemVkIDogY2FjaGVPcHRpbWl6ZWQpO1xyXG4gICAgICAgIHJldHVybiBjbG9uZTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kUmVwby5wcm90b3R5cGUuYnJhbmNoID0gZnVuY3Rpb24gKGJyYW5jaElkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Nsb25lKHsgYnJhbmNoSWQ6IGJyYW5jaElkIH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRSZXBvLnByb3RvdHlwZS5yb2xlID0gZnVuY3Rpb24gKHJvbGUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY2xvbmUoeyByb2xlOiByb2xlIH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRSZXBvLnByb3RvdHlwZS5vcHRpbWl6ZUNhY2hlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jbG9uZSh7fSwgdHJ1ZSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFJlcG8ucHJvdG90eXBlLmNsZWFyQnJhbmNoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5kZWZhdWx0UXVlcnlPcHRpb25zLmJyYW5jaElkKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgY2xlYXIgbWFzdGVyIGJyYW5jaFwiKTtcclxuICAgICAgICB0aGlzLndyaXRlci5tdXRhdGUoW3sgb3A6ICdjbGVhci1icmFuY2gnLCBicmFuY2hJZDogdGhpcy5kZWZhdWx0UXVlcnlPcHRpb25zLmJyYW5jaElkIH1dLCAwKTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kUmVwby5wcm90b3R5cGUubWVyZ2UgPSBmdW5jdGlvbiAodGFyZ2V0QnJhbmNoSWQpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZGVmYXVsdFF1ZXJ5T3B0aW9ucy5icmFuY2hJZClcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IG1lcmdlIGZyb20gbWFzdGVyIGJyYW5jaFwiKTtcclxuICAgICAgICB0aGlzLndyaXRlci5tdXRhdGUoW3sgb3A6ICdtZXJnZScsIGJyYW5jaElkOiB0aGlzLmRlZmF1bHRRdWVyeU9wdGlvbnMuYnJhbmNoSWQsIHRhcmdldEJyYW5jaElkOiB0YXJnZXRCcmFuY2hJZCB9XSwgMCk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFJlcG8ucHJvdG90eXBlLnNhdmVOb3cgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy53cml0ZXIud2FpdEZvclZlcnNpb25Ub1BlcnNpc3QodGhpcy53cml0ZXIuY3VycmVudFZlcnNpb24pXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gS2VkQmFja2VuZFJlcG87XHJcbn0oKSk7XHJcbmV4cG9ydCB7IEtlZEJhY2tlbmRSZXBvIH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWtlZGJhY2tlbmQtcmVwby5qcy5tYXAiLCJ2YXIgS2VkQmFja2VuZFN1YnNjcmlwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEtlZEJhY2tlbmRTdWJzY3JpcHRpb24oc3Vic2NyaWJlciwgY29sbGVjdGlvbikge1xyXG4gICAgICAgIHRoaXMuc3Vic2NyaWJlciA9IHN1YnNjcmliZXI7XHJcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uID0gY29sbGVjdGlvbjtcclxuICAgIH1cclxuICAgIEtlZEJhY2tlbmRTdWJzY3JpcHRpb24ucHJvdG90eXBlLm5vdGlmeVN1YnNjcmliZXIgPSBmdW5jdGlvbiAoZGF0YSwgZXJyb3IpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN1YnNjcmliZXIoW10sIGVycm9yLCB0aGlzKTtcclxuICAgICAgICAgICAgZWxzZSBpZiAoZGF0YSAhPT0gdGhpcy5sYXN0Tm90aWZpZWREYXRhKSB7IC8vIFdpbGwgaW4tZmFjdCBiZSBlcXVhbCBieSByZWZlcmVuY2UgaWYgZGF0YSBpcyBzYW1lIGFzIGxhc3Qgbm90aWZpY2F0aW9uIChhcyB3ZSB1c2UgYW4gaW1tdXRhYmxlIGFwcHJvYWNoIG9uIGRhdGEpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3ROb3RpZmllZERhdGEgPSBkYXRhO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdWJzY3JpYmVyKGRhdGEsIGVycm9yLCB0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXgpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3Vic2NyaWJlcihbXSwgZXgsIHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChleDIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB3aGlsZSBub3RpZnlpbmcgS2VkQmFja2VuZFN1YnNjcmliZXI6XCIsIGV4MiwgJ29yaWdpbmFsbHkgbm90aWZpZWQgZXJyb3I6JywgZXgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRTdWJzY3JpcHRpb24ucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuY29sbGVjdGlvbi51bnN1YnNjcmliZSh0aGlzKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gS2VkQmFja2VuZFN1YnNjcmlwdGlvbjtcclxufSgpKTtcclxuZXhwb3J0IHsgS2VkQmFja2VuZFN1YnNjcmlwdGlvbiB9O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1rZWRiYWNrZW5kLXN1YnNjcmlwdGlvbi5qcy5tYXAiLCJpbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xyXG5pbXBvcnQgeyBNdXRhdGlvblF1ZXVlIH0gZnJvbSAnLi9tdXRhdGlvbi1xdWV1ZSc7XHJcbmltcG9ydCB7IEJhdGNoUnVubmVyIH0gZnJvbSAnLi4va2VkLWJhY2tlbmQtY2xpZW50JztcclxuaW1wb3J0IHsgdGFibGVzIH0gZnJvbSAna2VkYmFja2VuZC1zY2hlbWEvc2NoZW1hLmpzb24nO1xyXG5pbXBvcnQgeyBDYWNoZUJ1c3QgfSBmcm9tICcuL2NhY2hlLWJ1c3QnO1xyXG5pbXBvcnQgeyBFbWl0dGVyIH0gZnJvbSAnLi4vb2JzZXJ2YWJsZSc7XHJcbmltcG9ydCB7IERlbHRhQ2FjaGUgfSBmcm9tICcuL2RlbHRhLWNvbGxlY3Rpb24vZGVsdGEtY2FjaGUnO1xyXG52YXIgS2VkQmFja2VuZFdyaXRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEtlZEJhY2tlbmRXcml0ZXIobXV0YXRpb25RdWV1ZSwgcXVlcnlTZXQsIGdldENsaWVudCwgZ2V0VXNlciwgZ2V0VXNlckRpc3BsYXlOYW1lKSB7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblF1ZXVlID0gbXV0YXRpb25RdWV1ZTtcclxuICAgICAgICB0aGlzLnF1ZXJ5U2V0ID0gcXVlcnlTZXQ7XHJcbiAgICAgICAgdGhpcy5nZXRDbGllbnQgPSBnZXRDbGllbnQ7XHJcbiAgICAgICAgdGhpcy5nZXRVc2VyID0gZ2V0VXNlcjtcclxuICAgICAgICB0aGlzLmdldFVzZXJEaXNwbGF5TmFtZSA9IGdldFVzZXJEaXNwbGF5TmFtZTtcclxuICAgICAgICB0aGlzLl90aW1lb3V0SWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX2lzU2F2aW5nUHJvbWlzZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50VmVyc2lvbiA9IDA7XHJcbiAgICAgICAgdGhpcy5wZXJzaXN0ZWRWZXJzaW9uID0gbmV3IEVtaXR0ZXIoMCk7XHJcbiAgICAgICAgdGhpcy5lcnJvclN1YnNjcmliZXJzID0gW107XHJcbiAgICAgICAgdGhpcy5zdGF0ZVN1YnNjcmliZXJzID0gW107XHJcbiAgICAgICAgdGhpcy5kZWx0YUNhY2hlID0gbmV3IERlbHRhQ2FjaGUoZ2V0Q2xpZW50LCBnZXRVc2VyLCBnZXRVc2VyRGlzcGxheU5hbWUpO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEtlZEJhY2tlbmRXcml0ZXIucHJvdG90eXBlLCBcImlzU2F2aW5nXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuICEhdGhpcy5faXNTYXZpbmdQcm9taXNlOyB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShLZWRCYWNrZW5kV3JpdGVyLnByb3RvdHlwZSwgXCJpc0VkaXRlZFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLm11dGF0aW9uUXVldWUuZ2V0KCkubGVuZ3RoID4gMDsgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBLZWRCYWNrZW5kV3JpdGVyLnByb3RvdHlwZS5vbkVycm9yID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5lcnJvclN1YnNjcmliZXJzLnB1c2goY2FsbGJhY2spO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRXcml0ZXIucHJvdG90eXBlLm9uU3RhdGVDaGFuZ2UgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLnN0YXRlU3Vic2NyaWJlcnMucHVzaChjYWxsYmFjayk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFdyaXRlci5wcm90b3R5cGUub2ZmID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5lcnJvclN1YnNjcmliZXJzID0gdGhpcy5lcnJvclN1YnNjcmliZXJzLmZpbHRlcihmdW5jdGlvbiAocykgeyByZXR1cm4gcyAhPT0gY2FsbGJhY2s7IH0pO1xyXG4gICAgICAgIHRoaXMuc3RhdGVTdWJzY3JpYmVycyA9IHRoaXMuc3RhdGVTdWJzY3JpYmVycy5maWx0ZXIoZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHMgIT09IGNhbGxiYWNrOyB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kV3JpdGVyLnByb3RvdHlwZS5kaXNwYXRjaEVycm9yID0gZnVuY3Rpb24gKGVycm9yLCByZXRyeWFibGUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuZXJyb3JTdWJzY3JpYmVycy5mb3JFYWNoKGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IsIHJldHJ5YWJsZSwgX3RoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChfKSB7IH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kV3JpdGVyLnByb3RvdHlwZS5kaXNwYXRjaFN0YXRlQ2hhbmdlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5zdGF0ZVN1YnNjcmliZXJzLmZvckVhY2goZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhfdGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKF8pIHsgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRXcml0ZXIucHJvdG90eXBlLm11dGF0ZSA9IGZ1bmN0aW9uIChtdXRhdGlvbnMsIGRlYm91bmNlKSB7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblF1ZXVlLmFkZChtdXRhdGlvbnMpO1xyXG4gICAgICAgICsrdGhpcy5jdXJyZW50VmVyc2lvbjtcclxuICAgICAgICB0aGlzLmRpc3BhdGNoU3RhdGVDaGFuZ2UoKTtcclxuICAgICAgICB0aGlzLnF1ZXJ5U2V0Lm5vdGlmeVN1YnNjcmliZXJzKCk7XHJcbiAgICAgICAgdGhpcy5kZWx0YUNhY2hlLmFwcGx5TXV0YXRpb25zKHRoaXMubXV0YXRpb25RdWV1ZS5nZXQoKSwgeyBvcHRpbWlzdGljOiB0cnVlIH0pO1xyXG4gICAgICAgIGlmICghdGhpcy5faXNTYXZpbmdQcm9taXNlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl90aW1lb3V0SWQpXHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fdGltZW91dElkKTtcclxuICAgICAgICAgICAgdGhpcy5fdGltZW91dElkID0gc2V0VGltZW91dCh0aGlzLnNhdmUuYmluZCh0aGlzKSwgZGVib3VuY2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBJZiBpc1NhdmluZywgd2UgZG9uJ3QgbmVlZCB0byBkbyBhbnl0aGluZywgYmVjYXNlIGl0IHdpbGwgcmUtY2hlY2sgaWYgYWRkaXRpb25hbFxyXG4gICAgICAgIC8vIG11dGF0aW9ucyBoYXZlIGNvbWUsIHdoZW4gc2F2aW5nIGlzIGRvbmUuXHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFdyaXRlci5wcm90b3R5cGUucmV0cnlTYXZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNhdmUoKTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kV3JpdGVyLnByb3RvdHlwZS53YWl0Rm9yVmVyc2lvblRvUGVyc2lzdCA9IGZ1bmN0aW9uICh2ZXJzaW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBwZXJzaXN0ZWRWZXJzaW9uO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucGVyc2lzdGVkVmVyc2lvbi5sb2FkKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGVyc2lzdGVkVmVyc2lvbiA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocGVyc2lzdGVkVmVyc2lvbiA8IHZlcnNpb24pKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zYXZlKCk7IC8vIEJlIG1vcmUgZWFnZXIgdG8gc2F2ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnBlcnNpc3RlZFZlcnNpb24uZmlsdGVyKGZ1bmN0aW9uIChwZXJzaXN0ZWRWZXJzaW9uKSB7IHJldHVybiBwZXJzaXN0ZWRWZXJzaW9uID49IHZlcnNpb247IH0pLmxvYWQoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFdyaXRlci5wcm90b3R5cGUuc2F2ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICh0aGlzLl90aW1lb3V0SWQpXHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl90aW1lb3V0SWQpO1xyXG4gICAgICAgIGlmICh0aGlzLl9pc1NhdmluZ1Byb21pc2UpXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9pc1NhdmluZ1Byb21pc2U7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzRWRpdGVkKVxyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgdGhpcy5fdGltZW91dElkID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9pc1NhdmluZ1Byb21pc2UgPSB0aGlzLl9zYXZlKCk7XHJcbiAgICAgICAgdGhpcy5faXNTYXZpbmdQcm9taXNlLmNhdGNoKGZ1bmN0aW9uICgpIHsgfSkudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5faXNTYXZpbmdQcm9taXNlID0gbnVsbDsgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzU2F2aW5nUHJvbWlzZTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kV3JpdGVyLnByb3RvdHlwZS5fc2F2ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIG11dGF0aW9ucywgdmVyc2lvbiwgbXV0YXRpb25SZXF1ZXN0cywgcmVzXzEsIGV0YWdNdXRhdGlvbnMsIGVycm9yXzE7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaFN0YXRlQ2hhbmdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG11dGF0aW9ucyA9IHRoaXMubXV0YXRpb25RdWV1ZS5nZXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVyc2lvbiA9IHRoaXMuY3VycmVudFZlcnNpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubXV0YXRpb25RdWV1ZS5tb3ZlVG9TYXZpbmdRdWV1ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtdXRhdGlvblJlcXVlc3RzID0gdGhpcy5tYXBNdXRhdGlvbnMobXV0YXRpb25zKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFsxLCA2LCAxMSwgMTJdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5nZXRDbGllbnQoKS5iYXRjaChtdXRhdGlvblJlcXVlc3RzKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNfMSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXRhZ011dGF0aW9ucyA9IE9iamVjdC5rZXlzKHJlc18xLm5ld0V0YWdzKS5tYXAoZnVuY3Rpb24gKGlkKSB7IHJldHVybiAoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3A6ICd1cGRhdGUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGU6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWx0YURvYzogeyAkZXRhZzogcmVzXzEubmV3RXRhZ3NbaWRdIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXROYW1lOiBudWxsIC8vIFdlIGRvbid0IGhhdmUgdGhlIHRhcmdldCBuYW1lLiBCdXQgdGhpcyBtdXRhdGlvbiB3b24ndCBiZSB2aXNpYmxlIGluIGEgRGVsdGFDb2xsZWN0aW9uIGFueXdheSwgc28gaXQgd29udCBiZSB1c2VkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTsgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEludmFsaWRhdGUgY2FjaGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ2FjaGVCdXN0LmludmFsaWRhdGVDYWNoZShtdXRhdGlvblJlcXVlc3RzLCB0aGlzLmdldFVzZXIoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbW1taXQgbXV0YXRpb25zIGFsb25nIHdpdGggZXRhZ011dGF0aW9ucyBpbnRvIHF1ZXJpZXMgY2FjaGVkIGRhdGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wZXJzaXN0ZWRWZXJzaW9uLmRpc3BhdGNoKHZlcnNpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbHRhQ2FjaGUuYXBwbHlNdXRhdGlvbnMobXV0YXRpb25zLCB7IG9wdGltaXN0aWM6IGZhbHNlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnF1ZXJ5U2V0LmNvbW1pdE11dGF0aW9ucyhNdXRhdGlvblF1ZXVlLm1lcmdlKG11dGF0aW9ucywgZXRhZ011dGF0aW9ucyksIHZlcnNpb24pXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gT24gc3VjY2VzcywgY2xlYXIgc2F2aW5nIHF1ZXVlIGFzIHRoZSBtdXRhdGlvbnMgd2lsbCBub3cgYmUgY29tbWl0dGVkIHRvIGFsbCBxdWVyeSdzIGRhdGEgaW5zdGVhZC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tdXRhdGlvblF1ZXVlLmNsZWFyU2F2aW5nUXVldWUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaFN0YXRlQ2hhbmdlKCk7IC8vIGlzRWRpdGVkIG1heSBoYXZlIHR1cm5lZCB0byBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGaW5hbGx5LCBub3RpZnkgc3Vic2NyaWJlcnMgc28gdGhhdCB2aWV3cyBnZXQgdXBkYXRlZCB3aXRoIGNvbW1pdHRlZCByZXN1bHRzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucXVlcnlTZXQubm90aWZ5U3Vic2NyaWJlcnMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEodGhpcy5tdXRhdGlvblF1ZXVlLmdldCgpLmxlbmd0aCA+IDApKSByZXR1cm4gWzMgLypicmVhayovLCA1XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkaXRpb25hbCBtdXRhdGlvbnMgaGFwcGVuZCB3aGlsZSB3ZSB3ZXJlIHNhdmluZy4gSGFuZGxlIHRoZW0gYXMgd2VsbC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5fc2F2ZSgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZGl0aW9uYWwgbXV0YXRpb25zIGhhcHBlbmQgd2hpbGUgd2Ugd2VyZSBzYXZpbmcuIEhhbmRsZSB0aGVtIGFzIHdlbGwuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSA1O1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTogcmV0dXJuIFszIC8qYnJlYWsqLywgMTJdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfMSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wZXJzaXN0ZWRWZXJzaW9uLmRpc3BhdGNoRXJyb3IoZXJyb3JfMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGVycm9yXzEgJiYgZXJyb3JfMS5uYW1lICYmIGVycm9yXzEubmFtZS5zdGFydHNXaXRoKFwiaHR0cDRcIikpKSByZXR1cm4gWzMgLypicmVhayovLCA5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWNjZXNzIENvbnRyb2wgZGVuaWVkLCBiYWQgcmVxdWVzdCBvciBzaW1pbGFyLiBUaHJvdyBtdXRhdGlvbnMgYXdheS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEVycm9yKGVycm9yXzEsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tdXRhdGlvblF1ZXVlLmNsZWFyU2F2aW5nUXVldWUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaFN0YXRlQ2hhbmdlKCk7IC8vIGlzRWRpdGVkIG1heSBoYXZlIHR1cm5lZCB0byBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5U2V0Lm5vdGlmeVN1YnNjcmliZXJzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHRoaXMubXV0YXRpb25RdWV1ZS5nZXQoKS5sZW5ndGggPiAwKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgOF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhvIGhvISBBZGRpdGlvbmFsIG11dGF0aW9ucyBoYXBwZW5kIHdoaWxlIHdlIHdlcmUgc2F2aW5nLiBIYW5kbGUgdGhlbSBhbG9uZS4gVEhleSBtaWdodCBiZSBtb3JlIGx1Y2t5LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLl9zYXZlKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSG8gaG8hIEFkZGl0aW9uYWwgbXV0YXRpb25zIGhhcHBlbmQgd2hpbGUgd2Ugd2VyZSBzYXZpbmcuIEhhbmRsZSB0aGVtIGFsb25lLiBUSGV5IG1pZ2h0IGJlIG1vcmUgbHVja3kuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSA4O1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgODogcmV0dXJuIFszIC8qYnJlYWsqLywgMTBdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgOTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEVycm9yKGVycm9yXzEsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDEwO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTA6IHJldHVybiBbMyAvKmJyZWFrKi8sIDEyXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDExOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoU3RhdGVDaGFuZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs3IC8qZW5kZmluYWxseSovXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDEyOiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRXcml0ZXIucHJvdG90eXBlLm1hcE11dGF0aW9ucyA9IGZ1bmN0aW9uIChtdXRhdGlvbnMpIHtcclxuICAgICAgICB2YXIgYnIgPSBuZXcgQmF0Y2hSdW5uZXIoKTtcclxuICAgICAgICBtdXRhdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAobSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG0ub3ApIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3VwZGF0ZSc6XHJcbiAgICAgICAgICAgICAgICAgICAgYnIudXBkYXRlKG0udGFibGUsIG0uaWQsIG0uZGVsdGFEb2MsIG0uYnJhbmNoSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnYWRkLXJlbGF0ZWQnOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghbS5yZWxhdGVkRG9jLiRldGFnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vICRldGFnIG1lYW5zIHRoaXMgaXMgYSBuZXcgZG9jdW1lbnQuIEFkZCBpdCBiZWZvcmUgbGlua2luZyB0byBpdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnIuYWRkKHRhYmxlc1ttLnRhYmxlXS5yZWxhdGlvbnNoaXBzW20uZ3JhcGhQcm9wXSwgbS5yZWxhdGVkRG9jLCBtLmJyYW5jaElkKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnIubGluazIobS50YWJsZSwgbS5pZCwgbS5ncmFwaFByb3AsIG0ucmVsYXRlZERvYy5pZCwgbS5icmFuY2hJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdyZW1vdmUtcmVsYXRlZCc6XHJcbiAgICAgICAgICAgICAgICAgICAgYnIudW5saW5rMihtLnRhYmxlLCBtLmlkLCBtLmdyYXBoUHJvcCwgbS5yZWxhdGVkRG9jLmlkLCBtLmJyYW5jaElkKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3VuZG8tbGluayc6XHJcbiAgICAgICAgICAgICAgICAgICAgYnIudW5kb0xpbmsobS50YWJsZSwgbS5pZCwgbS5ncmFwaFByb3AsIG0ucmVsYXRlZElkLCBtLmJyYW5jaElkKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6XHJcbiAgICAgICAgICAgICAgICAgICAgYnIuZGVsZXRlKG0udGFibGUsIG0uaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnY2xlYXItYnJhbmNoJzpcclxuICAgICAgICAgICAgICAgICAgICBici5jbGVhckJyYW5jaChtLmJyYW5jaElkKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ21lcmdlJzpcclxuICAgICAgICAgICAgICAgICAgICBici5tZXJnZShtLmJyYW5jaElkLCBtLnRhcmdldEJyYW5jaElkKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBici5tdXRhdGlvblJlcXVlc3RzO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBLZWRCYWNrZW5kV3JpdGVyO1xyXG59KCkpO1xyXG5leHBvcnQgeyBLZWRCYWNrZW5kV3JpdGVyIH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWtlZGJhY2tlbmQtd3JpdGVyLmpzLm1hcCIsImltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XHJcbmltcG9ydCB7IGdldFRhYmxlRnJvbUxhYmVsLCBicmFuY2hTZW5zaXRpdmUsIGdsb2JhbE9wIH0gZnJvbSAnLi91dGlscyc7XHJcbmltcG9ydCB7IG1lcmdlRGVsdGFzIH0gZnJvbSAnLi9kZWx0YS1tZXJnZSc7XHJcbnZhciBNdXRhdGlvblF1ZXVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTXV0YXRpb25RdWV1ZSgpIHtcclxuICAgICAgICB0aGlzLnF1ZXVlID0gW107XHJcbiAgICAgICAgdGhpcy5zYXZpbmdRdWV1ZSA9IFtdO1xyXG4gICAgfVxyXG4gICAgTXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKG11dGF0aW9ucykge1xyXG4gICAgICAgIHRoaXMucXVldWUgPSBNdXRhdGlvblF1ZXVlLm1lcmdlKHRoaXMucXVldWUsIG11dGF0aW9ucyk7XHJcbiAgICB9O1xyXG4gICAgTXV0YXRpb25RdWV1ZS5wcm90b3R5cGUubW92ZVRvU2F2aW5nUXVldWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5zYXZpbmdRdWV1ZSA9IE11dGF0aW9uUXVldWUubWVyZ2UodGhpcy5zYXZpbmdRdWV1ZSwgdGhpcy5xdWV1ZSk7XHJcbiAgICAgICAgdGhpcy5xdWV1ZSA9IFtdO1xyXG4gICAgfTtcclxuICAgIE11dGF0aW9uUXVldWUucHJvdG90eXBlLmNsZWFyU2F2aW5nUXVldWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5zYXZpbmdRdWV1ZSA9IFtdO1xyXG4gICAgfTtcclxuICAgIE11dGF0aW9uUXVldWUucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zYXZpbmdRdWV1ZS5jb25jYXQodGhpcy5xdWV1ZSk7XHJcbiAgICB9O1xyXG4gICAgTXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuYWZmZWN0c1F1ZXJ5ID0gZnVuY3Rpb24gKHRhYmxlLCBxdWVyeSwgaW5jbHVkZXMpIHtcclxuICAgICAgICB2YXIgbXV0YXRpb25zID0gdGhpcy5nZXQoKTtcclxuICAgICAgICBpZiAobXV0YXRpb25zLnNvbWUoZnVuY3Rpb24gKG0pIHsgcmV0dXJuIG0ub3AgPT09ICdtZXJnZScgfHwgbS5vcCA9PT0gJ2NsZWFyLWJyYW5jaCc7IH0pKVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICBpZiAocXVlcnkuaWRzKSB7XHJcbiAgICAgICAgICAgIC8vIEEgcXVlcnkgd2l0aCBcImlkc1wiIGZpbHRlciB3aWxsIGJlIGVhc3kgdG8gZGV0ZWN0IGEgbm8tbWF0Y2ggb246XHJcbiAgICAgICAgICAgIHJldHVybiBtdXRhdGlvbnMuc29tZShmdW5jdGlvbiAobSkgeyByZXR1cm4gZ2xvYmFsT3AobSkgfHwgKCFicmFuY2hTZW5zaXRpdmUobSkgfHwgbS5icmFuY2hJZCA9PT0gcXVlcnkuYnJhbmNoSWQpICYmXHJcbiAgICAgICAgICAgICAgICBxdWVyeS5pZHMuaW5jbHVkZXMobS5pZCk7IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBPdGhlcndpc2UsIGNoZWNrIGlmIG11dGF0aW9ucyBhZmZlY3Qgc2FtZSBicmFuY2ggYW5kIHRhYmxlLiBDb3VsZCBiZSBkb25lIG1vcmUgZmluZSBncmFpbmVkLFxyXG4gICAgICAgIC8vIGJ1dCB0aGF0IHdvdWxkIG9ubHkgYmUgYSBzdWJvcHRpbWl6YXRpb24uXHJcbiAgICAgICAgcmV0dXJuIG11dGF0aW9ucy5zb21lKGZ1bmN0aW9uIChtKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtLm9wID09PSAnZGVsZXRlJyA/XHJcbiAgICAgICAgICAgICAgICBtLnRhYmxlID09PSB0YWJsZSB8fCAoaW5jbHVkZXMuc29tZShmdW5jdGlvbiAobGFiZWwpIHsgcmV0dXJuIGdldFRhYmxlRnJvbUxhYmVsKHRhYmxlLCBsYWJlbCkgPT09IG0udGFibGU7IH0pKSA6XHJcbiAgICAgICAgICAgICAgICBnbG9iYWxPcChtKSA/IHRydWUgOlxyXG4gICAgICAgICAgICAgICAgICAgIG0uYnJhbmNoSWQgPT0gcXVlcnkuYnJhbmNoSWQgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgKG0udGFibGUgPT09IHRhYmxlIHx8IChtLm9wICE9PSAndXBkYXRlJyAmJiAoW3RhYmxlXS5jb25jYXQoaW5jbHVkZXMubWFwKGZ1bmN0aW9uIChsYWJlbCkgeyByZXR1cm4gZ2V0VGFibGVGcm9tTGFiZWwodGFibGUsIGxhYmVsKTsgfSkpLnNvbWUoZnVuY3Rpb24gKHRhYmxlKSB7IHJldHVybiBnZXRUYWJsZUZyb21MYWJlbChtLnRhYmxlLCBtLmdyYXBoUHJvcCkgPT09IHRhYmxlOyB9KSkpKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBNdXRhdGlvblF1ZXVlLm1lcmdlID0gZnVuY3Rpb24gKHF1ZXVlMSwgcXVldWUyKSB7XHJcbiAgICAgICAgdmFyIG11dGFibGVRdWV1ZTEgPSBxdWV1ZTEuc2xpY2UoKTtcclxuICAgICAgICB2YXIgbXV0YWJsZVF1ZXVlMiA9IHF1ZXVlMi5zbGljZSgpO1xyXG4gICAgICAgIC8vaWYgKG11dGFibGVRdWV1ZTEubGVuZ3RoID4gMCkgZGVidWdnZXI7XHJcbiAgICAgICAgdmFyIGxlbiA9IHF1ZXVlMS5sZW5ndGg7XHJcbiAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAoaSkge1xyXG4gICAgICAgICAgICB2YXIgbSA9IHF1ZXVlMVtpXTtcclxuICAgICAgICAgICAgaWYgKG0ub3AgPT09ICd1cGRhdGUnKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3ZlcmxhcHBpbmdJZE9wSWR4ID0gbXV0YWJsZVF1ZXVlMi5maW5kSW5kZXgoZnVuY3Rpb24gKG5ld011dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdNdXQub3AgPT09ICd1cGRhdGUnICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld011dC5icmFuY2hJZCA9PT0gbS5icmFuY2hJZCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdNdXQuaWQgPT09IG0uaWQ7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGlmIChvdmVybGFwcGluZ0lkT3BJZHggPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG11dGFibGVRdWV1ZTFbaV0gPSB0c2xpYl8xLl9fYXNzaWduKHt9LCBtLCB7IGRlbHRhRG9jOiBtZXJnZURlbHRhcyhtLmRlbHRhRG9jLCBtdXRhYmxlUXVldWUyW292ZXJsYXBwaW5nSWRPcElkeF0uZGVsdGFEb2MpIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIG11dGFibGVRdWV1ZTIuc3BsaWNlKG92ZXJsYXBwaW5nSWRPcElkeCwgMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcclxuICAgICAgICAgICAgX2xvb3BfMShpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG11dGFibGVRdWV1ZTEuY29uY2F0KG11dGFibGVRdWV1ZTIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBNdXRhdGlvblF1ZXVlO1xyXG59KCkpO1xyXG5leHBvcnQgeyBNdXRhdGlvblF1ZXVlIH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW11dGF0aW9uLXF1ZXVlLmpzLm1hcCIsImltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRRdWVyeSB9IGZyb20gJy4va2VkYmFja2VuZC1xdWVyeSc7XHJcbmltcG9ydCAqIGFzIEpzb25TY2hlbWEgZnJvbSAna2VkYmFja2VuZC1zY2hlbWEvc2NoZW1hLmpzb24nO1xyXG5pbXBvcnQgeyBxdWVyeUFycmF5IH0gZnJvbSAnLi91dGlscyc7XHJcbnZhciBRdWVyeVNldCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFF1ZXJ5U2V0KG11dGF0aW9uUXVldWUpIHtcclxuICAgICAgICB0aGlzLm11dGF0aW9uUXVldWUgPSBtdXRhdGlvblF1ZXVlO1xyXG4gICAgICAgIHRoaXMucXVlcmllcyA9IFtdO1xyXG4gICAgfVxyXG4gICAgUXVlcnlTZXQucHJvdG90eXBlLmNvbW1pdE11dGF0aW9ucyA9IGZ1bmN0aW9uIChtdXRhdGlvbnMsIHZlcnNpb24pIHtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCBQcm9taXNlLmFsbCh0aGlzLnF1ZXJpZXMubWFwKGZ1bmN0aW9uIChxKSB7IHJldHVybiBxLmNvbW1pdE11dGF0aW9ucyhtdXRhdGlvbnMsIHZlcnNpb24pOyB9KSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFudXBJbnZhbGlkUXVlcmllcygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5U2V0LnByb3RvdHlwZS5jbGVhbnVwSW52YWxpZFF1ZXJpZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5xdWVyaWVzID0gdGhpcy5xdWVyaWVzLmZpbHRlcihmdW5jdGlvbiAocSkge1xyXG4gICAgICAgICAgICBpZiAocS5pbnZhbGlkKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocS50aW1lb3V0SGFuZGxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHEudGltZW91dEhhbmRsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcS50aW1lb3V0SGFuZGxlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBRdWVyeVNldC5wcm90b3R5cGUubm90aWZ5U3Vic2NyaWJlcnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIG9wdGltaXN0aWNNdXRhdGlvbnMgPSB0aGlzLm11dGF0aW9uUXVldWUuZ2V0KCk7XHJcbiAgICAgICAgdGhpcy5xdWVyaWVzLmZvckVhY2goZnVuY3Rpb24gKHEpIHtcclxuICAgICAgICAgICAgcS5ub3RpZnlTdWJzY3JpYmVycyhvcHRpbWlzdGljTXV0YXRpb25zKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBRdWVyeVNldC5wcm90b3R5cGUuZmluZFF1ZXJ5ID0gZnVuY3Rpb24gKHRhYmxlLCBxdWVyeSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXJpZXMuZmluZChmdW5jdGlvbiAocSkgeyByZXR1cm4gcS5xdWVyeUtleSA9PT0gS2VkQmFja2VuZFF1ZXJ5LnF1ZXJ5S2V5KHRhYmxlLCBxdWVyeSk7IH0pO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5U2V0LnByb3RvdHlwZS5xdWVyeUxvY2FsbHkgPSBmdW5jdGlvbiAodGFibGUsIHF1ZXJ5LCBpbmNsdWRlcykge1xyXG4gICAgICAgIC8vIEZvciBub3csIG9ubHkgaGFuZGxlIHRoaXMgdmVyeSBjb21tb24gYW5kIHNwZWNpYWwgY2FzZSAod2hpY2hcclxuICAgICAgICAvLyB3aWxsIHNhdmUgYSBsb3Qgb2YgdW5uZXNjZXNzYXJ5IG5ldHdvcmsgdHJhZmZpYyBpZiBJIGFtIHRoaW5raW5nIHJpZ2h0Li4uKVxyXG4gICAgICAgIHZhciBtdXRhdGlvbnMgPSB0aGlzLm11dGF0aW9uUXVldWUuZ2V0KCk7XHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHF1ZXJ5IHdhbnRzIHRvIGdldCBhIHNpbmdsZSBlbnRpdHkgYnkgaXRzIElEOlxyXG4gICAgICAgIGlmIChxdWVyeS5pZHMgJiYgcXVlcnkuaWRzLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAvLyBBbmQgaWYgc28sIGlmIHdlIGhhdmUgYW4gb3V0Z29pbmcgbXV0YXRpb24gdG8gY3JlYXRlIHRoYXQgZW50aXR5OlxyXG4gICAgICAgICAgICBpZiAobXV0YXRpb25zLnNvbWUoZnVuY3Rpb24gKG0pIHsgcmV0dXJuIG0ub3AgPT09ICdhZGQtcmVsYXRlZCcgJiYgbS5yZWxhdGVkRG9jLmlkID09PSBxdWVyeS5pZHNbMF07IH0pKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUaGVuIHJldHVybiBhbiBFTVBUWSByZXNwb25zZSwgc2lnbmFsbGluZyB0aGF0IHdlIGNhbiByZXNvbHZlIHRoaXMgbG9jYWxseSxcclxuICAgICAgICAgICAgICAgIC8vIGJ1dCBsZXQgdGhlIG9wdGlzdGljIGZlYXR1cmUgb2YgS2VkQmFja2VuZFF1ZXJ5IGFwcGx5IHRoZSBtdXRhdGlvbiBiZWZvcmVcclxuICAgICAgICAgICAgICAgIC8vIG5vdGlmeWluZyBzdWJzY3JpYmVycyAod2UgZG9uJ3Qgd2FudCBpdCB0byBiZSBwZXJzaXN0ZW50IGJlZm9yZSB0aGUgc2VydmVyXHJcbiAgICAgICAgICAgICAgICAvLyBoYXMgYWNjZXB0ZWQgdGhlIG11dGF0aW9uKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIE9LLCBhbm90aGVyIHF1aXRlIGNvbW1vbiBjYXNlIGlzIHdoZW4gd2UgYXNrIGZvciBhIGNlcnRhaW4gSUQgYW5kIHRoYXQgSUQgcmVwbGllc1xyXG4gICAgICAgIC8vIHdpdGhpbiBhbm90aGVyIHF1ZXJ5XHJcbiAgICAgICAgaWYgKHF1ZXJ5Lmhhc0VkZ2VzRnJvbSB8fCBxdWVyeS5oYXNFZGdlc1RvKVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDsgLy8gTm90IHBvc3NpYmxlIHRvIGhhbmRsZVxyXG4gICAgICAgIGlmICghcXVlcnkuaWRzKVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDsgLy8gRm9yIG5vdywganVzdCB0YWtlIGhpZ2h0IGZvciB0aGlzIHBhcnRpY3VsYXIgYW5kIG1vc3QgY29tbW9uIGNhc2UhXHJcbiAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAocSkge1xyXG4gICAgICAgICAgICBpZiAoIXEuZ290SW5pdGlhbFJlc3BvbnNlKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiY29udGludWVcIjtcclxuICAgICAgICAgICAgaWYgKHEucXVlcnkuYnJhbmNoSWQgIT09IHF1ZXJ5LmJyYW5jaElkKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiY29udGludWVcIjtcclxuICAgICAgICAgICAgaWYgKHEucXVlcnkuZmxhZ3MpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJjb250aW51ZVwiOyAvLyBJdCB3b3VsZCBiZSBjb21wbGV4IHRvIHN1cHBvcnQgdmFyaW91cyBmbGFncy4gUXVlcnkncyBkYXRhIG1heSBpbmNsdWRlIGlkcyBvbmx5LiBDYW4ndCByZWx5IG9uIHRoZSBxdWVyeS5cclxuICAgICAgICAgICAgdmFyIHFJbmNsdWRlcyA9IHEuaW5jbHVkZXM7XHJcbiAgICAgICAgICAgIGlmIChxSW5jbHVkZXMubGVuZ3RoID4gMCAmJiAoIXF1ZXJ5LmluY2x1ZGUgfHwgcXVlcnkuaW5jbHVkZS5sZW5ndGggPT09IDApKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBXZSBkb24ndCBpbmNsdWRlLCBidXQgdGhpcyBxdWVyeSBkb2VzLiBDaGVjayBpZiB3ZSBjYW4gZmluZCBvdXIgcmVzdWx0IHdpdGhpbiBpdC5cclxuICAgICAgICAgICAgICAgIHZhciBsYWJlbCA9IHFJbmNsdWRlcy5maW5kKGZ1bmN0aW9uIChsKSB7IHJldHVybiBKc29uU2NoZW1hLnRhYmxlc1txLnRhYmxlXVtcInJlbGF0aW9uc2hpcHNcIl1bbF0gPT09IHRhYmxlOyB9KTtcclxuICAgICAgICAgICAgICAgIGlmIChsYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZXNfMSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBxLmRhdGE7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbnRpdHkgPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdWJEYXRhID0gcXVlcnlBcnJheShxdWVyeSwgZW50aXR5W2xhYmVsXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YkRhdGEuZm9yRWFjaChmdW5jdGlvbiAocikgeyByZXR1cm4gcmVzXzFbci5pZF0gPSByOyB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdF8xID0gT2JqZWN0LmtleXMocmVzXzEpLm1hcChmdW5jdGlvbiAoaWQpIHsgcmV0dXJuIHJlc18xW2lkXTsgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gT25seSByZXR1cm4gcmVzdWx0IGlmIHdlIGNvdWxkIGxvb2sgdXAgZXZlcnkgcmVxdWVzdGVkIElEOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghcXVlcnkuaWRzLmV2ZXJ5KGZ1bmN0aW9uIChpZCkgeyByZXR1cm4gcmVzdWx0XzEuc29tZShmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5pZCA9PT0gaWQ7IH0pOyB9KSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiY29udGludWVcIjtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogcmVzdWx0XzEgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIWluY2x1ZGVzLmV2ZXJ5KGZ1bmN0aW9uIChsYWJlbCkgeyByZXR1cm4gcUluY2x1ZGVzLmluY2x1ZGVzKGxhYmVsKTsgfSkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJjb250aW51ZVwiO1xyXG4gICAgICAgICAgICAvLyBMYXN0bHksIGlmIHRoZSBxdWVyeSBpbmNsdWRlcyBhbGwgZ3JhcGhzIHRoYXQgd2UgZG8sIHBpY2sgdGhlIHN1YnNldCBmcm9tIHRoYXQgcXVlcnkuXHJcbiAgICAgICAgICAgIC8vIENvbmNyZXRlIGV4YW1wbGU6IFdlIG9ic2VydmUgYSBjZXJ0YWluIFRhc2sgYnkgSUQgYW5kIHdhbnQgaXRzIGtub3dsZWRnZVJlcXVpcmVtZW50cyBhbG9uZyB3aXRoIGl0LFxyXG4gICAgICAgICAgICAvLyBhbmQgdGhlcmUncyBhbm90aGVyIHF1ZXJ5IG9mIGFsbCB0YXNrcyB0aGF0IGFsc28gaW5jbHVkZXMga25vd2xlZGdlUmVxdWlyZW1lbnRzLiBVc2UgaXQuIFxyXG4gICAgICAgICAgICBpZiAocS50YWJsZSA9PT0gdGFibGUpIHtcclxuICAgICAgICAgICAgICAgIHZhciByZXN1bHRfMiA9IHF1ZXJ5QXJyYXkocXVlcnksIHEuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAvLyBPbmx5IHJldHVybiByZXN1bHQgaWYgd2UgY291bGQgbG9vayB1cCBldmVyeSByZXF1ZXN0ZWQgSUQ6XHJcbiAgICAgICAgICAgICAgICBpZiAoIXF1ZXJ5Lmlkcy5ldmVyeShmdW5jdGlvbiAoaWQpIHsgcmV0dXJuIHJlc3VsdF8yLnNvbWUoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHguaWQgPT09IGlkOyB9KTsgfSkpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiY29udGludWVcIjtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiByZXN1bHRfMiB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5xdWVyaWVzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgcSA9IF9hW19pXTtcclxuICAgICAgICAgICAgdmFyIHN0YXRlXzEgPSBfbG9vcF8xKHEpO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHN0YXRlXzEgPT09IFwib2JqZWN0XCIpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RhdGVfMS52YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUXVlcnlTZXQucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpcHRpb24pIHtcclxuICAgICAgICB2YXIgX2EgPSBzdWJzY3JpcHRpb24uY29sbGVjdGlvbiwgdGFibGUgPSBfYS50YWJsZSwgcXVlcnkgPSBfYS5xdWVyeSwgcmVwbyA9IF9hLnJlcG87XHJcbiAgICAgICAgdmFyIGtiUXVlcnkgPSB0aGlzLmZpbmRRdWVyeSh0YWJsZSwgcXVlcnkpO1xyXG4gICAgICAgIGlmICgha2JRdWVyeSkge1xyXG4gICAgICAgICAgICBrYlF1ZXJ5ID0gbmV3IEtlZEJhY2tlbmRRdWVyeSh0YWJsZSwgcXVlcnksIHJlcG8uZ2V0VXNlcigpLCByZXBvLCB0aGlzLm11dGF0aW9uUXVldWUpO1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXJpZXMucHVzaChrYlF1ZXJ5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChrYlF1ZXJ5LnRpbWVvdXRIYW5kbGUpIHtcclxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChrYlF1ZXJ5LnRpbWVvdXRIYW5kbGUpO1xyXG4gICAgICAgICAgICAgICAga2JRdWVyeS50aW1lb3V0SGFuZGxlID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBrYlF1ZXJ5LnN1YnNjcmliZShzdWJzY3JpcHRpb24pO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5U2V0LnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpcHRpb24pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBfYSA9IHN1YnNjcmlwdGlvbi5jb2xsZWN0aW9uLCB0YWJsZSA9IF9hLnRhYmxlLCBxdWVyeSA9IF9hLnF1ZXJ5LCByZXBvID0gX2EucmVwbztcclxuICAgICAgICB2YXIga2JRdWVyeSA9IHRoaXMuZmluZFF1ZXJ5KHRhYmxlLCBxdWVyeSk7XHJcbiAgICAgICAgaWYgKGtiUXVlcnkpIHtcclxuICAgICAgICAgICAgLy8gUHJvaGliaXQgZnVydGhlciBub3RpZmljYXRpb25zIHRvIHRoaXMgc3Vic2NyaXB0aW9uOlxyXG4gICAgICAgICAgICBrYlF1ZXJ5LnVuc3Vic2NyaWJlKHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgIC8vIFJlbGVhc2UgdW5uZXNjZXNzYXJ5IG1lbW9yeSB3aGVuIHRoZXJlIGFyZSBubyBtb3JlIHN1YnNjcmlwdGlvbnMgb2YgdGhpcyBxdWVyeSwgYnkgcmVtb3ZpbmcgdGhlIHF1ZXJ5IGl0c2VsZlxyXG4gICAgICAgICAgICAvLyBUbyB0aGF0IGluIGEgZGVsYXllZCBtYW5uZXIsIHNvIHRoYXQgYW4gdW5zdWJzY3JpYmUoKSBmb2xsb3dlZCBieSBhbiBpbW1lZGlhdGUgc3Vic2NyaWJlKCkgZG9uJ3QgaGF2ZSB0byByZS1xdWVyeSB0aGUgc2VydmVyOlxyXG4gICAgICAgICAgICBpZiAoa2JRdWVyeS5zdWJzY3JpcHRpb25zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgLy8gU2NoZWR1bGUgZm9yIGdhcmJhZ2UgY29sbGVjdGlvbiBpbiA1IG1pbnV0ZXM6XHJcbiAgICAgICAgICAgICAgICBrYlF1ZXJ5LnRpbWVvdXRIYW5kbGUgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBrYlF1ZXJ5IHN0aWxsIGhhcyBubyBzdWJzY3JpcHRpb25zIChub3QgY2VydGFpbiEgQSBuZXcgc3Vic2NyaWJlciBtYXkgaGF2ZSBjb21lIGFsb25nLi4uKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChrYlF1ZXJ5LnN1YnNjcmlwdGlvbnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN0aWxsIG5vIHN1YnNjcmlwdGlvbnMgb24gaXQsIHRpbWUgdG8gcmVsZWFzZSBzb21lIG1lbW9yeSBhbmQgZm9yZ2V0IHRoZSBpbi1tZW1vcnkgY2FjaGUgb2YgdGhlIHF1ZXJ5IHJlc3VsdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5xdWVyaWVzID0gX3RoaXMucXVlcmllcy5maWx0ZXIoZnVuY3Rpb24gKHEpIHsgcmV0dXJuIHEgIT09IGtiUXVlcnk7IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIHRoaXMucXVlcmllcy5sZW5ndGggPiA1MCA/XHJcbiAgICAgICAgICAgICAgICAgICAgNTAwIDogLy8gRG9uJ3QgaG9zdCB0b28gbWFueSBxdWVyaWVzLiBHYXJiYWdlIGNvbGxlY3QgdGhpcyB3aXRoaW4gNTAwIG1zXHJcbiAgICAgICAgICAgICAgICAgICAgNSAqIDYwMDAwKTsgLy8gQWxsb3cgcXVlcnkgaW4gbWVtb3J5IGZvciBhbm90aGVyIDUgbWludXRlc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBRdWVyeVNldDtcclxufSgpKTtcclxuZXhwb3J0IHsgUXVlcnlTZXQgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cXVlcnktc2V0LmpzLm1hcCIsImltcG9ydCB7IHRhYmxlcyB9IGZyb20gJ2tlZGJhY2tlbmQtc2NoZW1hL3NjaGVtYS5qc29uJztcclxuZXhwb3J0IGZ1bmN0aW9uIGdldFRhYmxlRnJvbUxhYmVsKHRhYmxlLCBsYWJlbCkge1xyXG4gICAgcmV0dXJuIHRhYmxlc1t0YWJsZV0ucmVsYXRpb25zaGlwc1tsYWJlbF07XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIHF1ZXJ5QXJyYXkocXVlcnksIGRhdGEpIHtcclxuICAgIHZhciBmaWx0ZXIgPSBnZXRGaWx0ZXJGcm9tUXVlcnkocXVlcnkpO1xyXG4gICAgcmV0dXJuIGRhdGEuZmlsdGVyKGZpbHRlcik7XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIEFORChmaWx0ZXIxLCBmaWx0ZXIyKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHgpIHsgcmV0dXJuIGZpbHRlcjEoeCkgJiYgZmlsdGVyMih4KTsgfTtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RmlsdGVyRnJvbVF1ZXJ5KHF1ZXJ5KSB7XHJcbiAgICB2YXIgZmlsdGVyID0gZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHRydWU7IH07XHJcbiAgICBpZiAocXVlcnkuZnJvbSlcclxuICAgICAgICByZXR1cm4gQU5EKGZpbHRlciwgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHguZGF0ZVRpbWUgPj0gcXVlcnkuZnJvbTsgfSk7XHJcbiAgICBpZiAocXVlcnkudG8pXHJcbiAgICAgICAgcmV0dXJuIEFORChmaWx0ZXIsIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LmRhdGVUaW1lIDwgcXVlcnkudG87IH0pO1xyXG4gICAgaWYgKHF1ZXJ5LmlkcylcclxuICAgICAgICByZXR1cm4gQU5EKGZpbHRlciwgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHF1ZXJ5Lmlkcy5pbmNsdWRlcyh4LmlkKTsgfSk7XHJcbiAgICBpZiAocXVlcnkubmFtZSlcclxuICAgICAgICByZXR1cm4gQU5EKGZpbHRlciwgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHgubmFtZSA9PT0gcXVlcnkubmFtZTsgfSk7XHJcbiAgICBpZiAocXVlcnkudGFncylcclxuICAgICAgICByZXR1cm4gQU5EKGZpbHRlciwgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHgudGFncyAmJiBbXS5jb25jYXQocXVlcnkudGFncyB8fCBbXSkuc29tZShmdW5jdGlvbiAodGFnKSB7IHJldHVybiB4LnRhZ3MuaW5jbHVkZXModGFnKTsgfSk7IH0pO1xyXG4gICAgLy8gcXVlcnkuaGFzRWRnZXNGcm9tIGFuZCBxdWVyeS5oYXNFZGdlc1RvIGNhbm5vdCBieSBmaWx0ZXJlZCBoZXJlXHJcbiAgICByZXR1cm4gZmlsdGVyO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBicmFuY2hTZW5zaXRpdmUobSkge1xyXG4gICAgcmV0dXJuIG0ub3AgIT09ICdkZWxldGUnO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBnbG9iYWxPcChtKSB7XHJcbiAgICByZXR1cm4gbS5vcCA9PT0gJ2NsZWFyLWJyYW5jaCcgfHwgbS5vcCA9PT0gJ21lcmdlJztcclxufVxyXG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy5qcy5tYXAiLCJpbXBvcnQgbWlncmF0ZSBmcm9tICcuL21pZ3JhdGUnO1xyXG5leHBvcnQgdmFyIEtlZE1vZGVsTWlncmF0b3JNaXhpbiA9IGZ1bmN0aW9uIChjbGllbnQpIHtcclxuICAgIGlmIChjbGllbnQuX19taWdyYXRvcl9taXhlZF9pbilcclxuICAgICAgICByZXR1cm47XHJcbiAgICBjbGllbnQuX19taWdyYXRvcl9taXhlZF9pbiA9IHRydWU7XHJcbiAgICB2YXIgZ2V0ID0gY2xpZW50LmdldDtcclxuICAgIHZhciBsaXN0ID0gY2xpZW50Lmxpc3Q7XHJcbiAgICBjbGllbnQuZ2V0ID0gZnVuY3Rpb24gKHRhYmxlLCBpZCwgb3B0aW9ucykge1xyXG4gICAgICAgIHZhciBpbmNsdWRlID0gb3B0aW9ucyAmJiBvcHRpb25zLmluY2x1ZGU7XHJcbiAgICAgICAgcmV0dXJuIGdldC5hcHBseSh0aGlzLCBhcmd1bWVudHMpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICBtaWdyYXRlKHJlc3VsdCwgdGFibGUsIGluY2x1ZGUgJiYgaW5jbHVkZS50b1N0cmluZygpLnNwbGl0KCcsJykpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIGNsaWVudC5saXN0ID0gZnVuY3Rpb24gKHRhYmxlLCBvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIGluY2x1ZGUgPSBvcHRpb25zICYmIG9wdGlvbnMuaW5jbHVkZTtcclxuICAgICAgICByZXR1cm4gbGlzdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICByZXN1bHQuZm9yRWFjaChmdW5jdGlvbiAoZG9jKSB7IHJldHVybiBtaWdyYXRlKGRvYywgdGFibGUsIGluY2x1ZGUgJiYgaW5jbHVkZS50b1N0cmluZygpLnNwbGl0KCcsJykpOyB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gY2xpZW50O1xyXG59O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJpbXBvcnQgbWlncmF0ZVRhc2sgZnJvbSAnLi9taWdyYXRlLXRhc2snO1xyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBtaWdyYXRlQ291cnNlKGNvdXJzZSwgZ3JhcGhzKSB7XHJcbiAgICBpZiAoIWNvdXJzZS5tb2R1bGVzKVxyXG4gICAgICAgIGNvdXJzZS5tb2R1bGVzID0gW107XHJcbiAgICBjb3Vyc2UubW9kdWxlcy5mb3JFYWNoKGZ1bmN0aW9uIChtb2R1bGUpIHtcclxuICAgICAgICBpZiAoIW1vZHVsZS5yZXNvdXJjZXMpIHtcclxuICAgICAgICAgICAgbW9kdWxlLnJlc291cmNlcyA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIW1vZHVsZS50YXNrSWRzKSB7XHJcbiAgICAgICAgICAgIG1vZHVsZS50YXNrSWRzID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBpZiAoIWNvdXJzZS5yZXNwb25zaWJsZVRlYWNoZXJzKSB7XHJcbiAgICAgICAgY291cnNlLnJlc3BvbnNpYmxlVGVhY2hlcnMgPSBbXTtcclxuICAgIH1cclxuICAgIC8vIEVhcmxpZXIgd3Jvbmcgc3BlbGxpbmcgb2YgcmVzb3VyY2VzXHJcbiAgICBpZiAoJ3Jlc291cnNlcycgaW4gY291cnNlICYmICEoJ3Jlc291cmNlcycgaW4gY291cnNlKSkge1xyXG4gICAgICAgIGNvdXJzZS5yZXNvdXJjZXMgPSBjb3Vyc2UucmVzb3Vyc2VzO1xyXG4gICAgICAgIGRlbGV0ZSBjb3Vyc2UucmVzb3Vyc2VzO1xyXG4gICAgfVxyXG4gICAgaWYgKCFjb3Vyc2UucmVzb3VyY2VzKSB7XHJcbiAgICAgICAgY291cnNlLnJlc291cmNlcyA9IFtdO1xyXG4gICAgfVxyXG4gICAgaWYgKGdyYXBocykge1xyXG4gICAgICAgIGdyYXBocy5mb3JFYWNoKGZ1bmN0aW9uIChsYWJlbCkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICd0YXNrcyc6XHJcbiAgICAgICAgICAgICAgICAgICAgY291cnNlLnRhc2tzLmZvckVhY2goZnVuY3Rpb24gKHRhc2spIHsgcmV0dXJuIG1pZ3JhdGVUYXNrKHRhc2spOyB9KTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1pZ3JhdGUtY291cnNlLmpzLm1hcCIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1pZ3JhdGVUYXNrKHRhc2spIHtcclxuICAgIGlmICghdGFzay5yZXNvdXJjZXMpXHJcbiAgICAgICAgdGFzay5yZXNvdXJjZXMgPSBbXTtcclxufVxyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1taWdyYXRlLXRhc2suanMubWFwIiwiaW1wb3J0IG1pZ3JhdGVDb3Vyc2UgZnJvbSAnLi9taWdyYXRlLWNvdXJzZSc7XHJcbmltcG9ydCBtaWdyYXRlVGFzayBmcm9tICcuL21pZ3JhdGUtdGFzayc7XHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1pZ3JhdGUoZG9jLCB0YWJsZSwgZ3JhcGhzKSB7XHJcbiAgICBzd2l0Y2ggKHRhYmxlKSB7XHJcbiAgICAgICAgY2FzZSBcImNvdXJzZXNcIjpcclxuICAgICAgICAgICAgbWlncmF0ZUNvdXJzZShkb2MsIGdyYXBocyk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJ0YXNrc1wiOlxyXG4gICAgICAgICAgICBtaWdyYXRlVGFzayhkb2MpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgIH1cclxufVxyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1taWdyYXRlLmpzLm1hcCIsImltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XHJcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tIFwiLi9vYnNlcnZhYmxlXCI7XHJcbmltcG9ydCB7IGluaXRNYXBNZXRob2QgfSBmcm9tIFwiLi9tYXBcIjtcclxuaW1wb3J0IHsgVmFsdWUgfSBmcm9tIFwiLi92YWx1ZVwiO1xyXG5pbXBvcnQgeyBFbWl0dGVyIH0gZnJvbSBcIi4vZW1pdHRlclwiO1xyXG52YXIgQ29sbGVjdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliXzEuX19leHRlbmRzKENvbGxlY3Rpb24sIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBDb2xsZWN0aW9uKHN1YnNjcmliZSkge1xyXG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBzdWJzY3JpYmUpIHx8IHRoaXM7XHJcbiAgICB9XHJcbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5fbWFwID0gZnVuY3Rpb24gKG1hcHBlcikge1xyXG4gICAgICAgIHRocm93IFwibWl4ZWRpblwiO1xyXG4gICAgfTtcclxuICAgIENvbGxlY3Rpb24uZnJvbSA9IGZ1bmN0aW9uICh4KSB7XHJcbiAgICAgICAgaWYgKHguc3Vic2NyaWJlKVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IENvbGxlY3Rpb24oZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHguc3Vic2NyaWJlKHMpOyB9KTtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh4KSkge1xyXG4gICAgICAgICAgICB2YXIgZW1pdHRlcl8xID0gbmV3IEVtaXR0ZXIoeCk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ29sbGVjdGlvbihmdW5jdGlvbiAocykgeyByZXR1cm4gZW1pdHRlcl8xLnN1YnNjcmliZShzKTsgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk9ic2VydmFibGVDb2xsZWN0aW9uLmZyb20oKSBjYW4gb25seSB0YWtlIGFycmF5cyBvciBvYnNlcnZhYmxlc1wiKTtcclxuICAgIH07XHJcbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5tYXAgPSBmdW5jdGlvbiAobWFwcGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hcChmdW5jdGlvbiAoaXRlbXMpIHsgcmV0dXJuIGl0ZW1zLm1hcChmdW5jdGlvbiAoaXRlbSkgeyByZXR1cm4gbWFwcGVyKGl0ZW0pOyB9KTsgfSk7XHJcbiAgICB9O1xyXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuZmxhdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbWFwKGZ1bmN0aW9uIChpdGVtcykgeyByZXR1cm4gW10uY29uY2F0LmFwcGx5KFtdLCBpdGVtcyk7IH0pO1xyXG4gICAgfTtcclxuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmZpbHRlciA9IGZ1bmN0aW9uIChmaWx0ZXIpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbWFwKGZ1bmN0aW9uIChpdGVtcykgeyByZXR1cm4gaXRlbXMuZmlsdGVyKGZpbHRlcik7IH0pO1xyXG4gICAgfTtcclxuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmNvbmNhdCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiBDb2xsZWN0aW9uLmZyb20odGhpcy50b1ZhbHVlKCkuY29tYmluZUxhdGVzdChvdGhlcikubWFwKGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICB2YXIgbWUgPSBfYVswXSwgb3RoZXIgPSBfYVsxXTtcclxuICAgICAgICAgICAgcmV0dXJuIG1lLmNvbmNhdChvdGhlcik7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgfTtcclxuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLm9yZGVyQnkgPSBmdW5jdGlvbiAocHJvcCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRvVmFsdWUoKS5tYXAoZnVuY3Rpb24gKGFycmF5KSB7IHJldHVybiBhcnJheS5zbGljZSgpLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgdmFyIGFQcm9wID0gYSAmJiBhW3Byb3BdO1xyXG4gICAgICAgICAgICB2YXIgYlByb3AgPSBiICYmIGJbcHJvcF07XHJcbiAgICAgICAgICAgIHJldHVybiBhUHJvcCA+IGJQcm9wID8gMSA6IGFQcm9wIDwgYlByb3AgPyAtMSA6IDA7XHJcbiAgICAgICAgfSk7IH0pLnRvQ29sbGVjdGlvbihmdW5jdGlvbiAoeCkgeyByZXR1cm4geDsgfSk7XHJcbiAgICB9O1xyXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUudG9WYWx1ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBuZXcgVmFsdWUoZnVuY3Rpb24gKHMpIHsgcmV0dXJuIF90aGlzLnN1YnNjcmliZShzKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuZ3JvdXBCeSA9IGZ1bmN0aW9uIChwcm9wKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudG9WYWx1ZSgpLm1hcChmdW5jdGlvbiAoaXRlbXMpIHtcclxuICAgICAgICAgICAgdmFyIHJ2ID0ge307XHJcbiAgICAgICAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIHZhciBsaXN0ID0gcnZbaXRlbVtwcm9wXV0gfHwgKHJ2W2l0ZW1bcHJvcF1dID0gW10pO1xyXG4gICAgICAgICAgICAgICAgbGlzdC5wdXNoKGl0ZW0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHJ2O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmZpcnN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRvVmFsdWUoKS5tYXAoZnVuY3Rpb24gKGFycikgeyByZXR1cm4gYXJyWzBdOyB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQ29sbGVjdGlvbjtcclxufShPYnNlcnZhYmxlKSk7XHJcbmV4cG9ydCB7IENvbGxlY3Rpb24gfTtcclxuQ29sbGVjdGlvbi5wcm90b3R5cGUuX21hcCA9IGluaXRNYXBNZXRob2QoQ29sbGVjdGlvbik7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbGxlY3Rpb24uanMubWFwIiwiaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcclxuaW1wb3J0IHsgVmFsdWUgfSBmcm9tIFwiLi92YWx1ZVwiO1xyXG52YXIgRW1pdHRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliXzEuX19leHRlbmRzKEVtaXR0ZXIsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBFbWl0dGVyKGluaXRpYWxWYWx1ZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGZ1bmN0aW9uIChvYnNlcnZlcikge1xyXG4gICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0ge1xyXG4gICAgICAgICAgICAgICAgdW5zdWJzY3JpYmU6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnN1YnNjcmliZXJzID0gX3RoaXMuc3Vic2NyaWJlcnMuZmlsdGVyKGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzID0gX2FbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHMgIT09IG9ic2VydmVyO1xyXG4gICAgICAgICAgICAgICAgfSk7IH0sXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIF90aGlzLnN1YnNjcmliZXJzLnB1c2goW29ic2VydmVyLCBzdWJzY3JpcHRpb25dKTtcclxuICAgICAgICAgICAgaWYgKF90aGlzLmVycm9yKVxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIobnVsbCwgX3RoaXMuZXJyb3IsIHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIG9ic2VydmVyKF90aGlzLnZhbHVlLCB1bmRlZmluZWQsIHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XHJcbiAgICAgICAgfSkgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5zdWJzY3JpYmVycyA9IFtdO1xyXG4gICAgICAgIF90aGlzLnZhbHVlID0gaW5pdGlhbFZhbHVlO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIEVtaXR0ZXIucHJvdG90eXBlLmRpc3BhdGNoID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIHRoaXMuZXJyb3IgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5fZGlzcGF0Y2goKTtcclxuICAgIH07XHJcbiAgICBFbWl0dGVyLnByb3RvdHlwZS5kaXNwYXRjaEVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xyXG4gICAgICAgIHRoaXMuX2Rpc3BhdGNoKCk7XHJcbiAgICB9O1xyXG4gICAgRW1pdHRlci5wcm90b3R5cGUuX2Rpc3BhdGNoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVycy5mb3JFYWNoKGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICB2YXIgb2JzZXJ2ZXIgPSBfYVswXSwgc3Vic2NyaXB0aW9uID0gX2FbMV07XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlcihfdGhpcy52YWx1ZSwgX3RoaXMuZXJyb3IsIHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIobnVsbCwgZXJyLCBzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEVtaXR0ZXI7XHJcbn0oVmFsdWUpKTtcclxuZXhwb3J0IHsgRW1pdHRlciB9O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1lbWl0dGVyLmpzLm1hcCIsInZhciBzdGFjayA9IFtdO1xyXG52YXIgY3VycmVudEZpYmVyID0gbnVsbDtcclxudmFyIHByb3ZpZGVycyA9IFtmdW5jdGlvbiAoKSB7IHJldHVybiBjdXJyZW50RmliZXI7IH1dO1xyXG5mdW5jdGlvbiBwdXNoRmliZXIoZmliZXIpIHtcclxuICAgIHN0YWNrLnB1c2goY3VycmVudEZpYmVyKTtcclxuICAgIGN1cnJlbnRGaWJlciA9IGZpYmVyO1xyXG59XHJcbmZ1bmN0aW9uIHBvcEZpYmVyKCkge1xyXG4gICAgY3VycmVudEZpYmVyID0gc3RhY2sucG9wKCk7XHJcbn1cclxuZXhwb3J0IHZhciBGaWJlckNvbnRleHQgPSB7XHJcbiAgICBnZXQgY3VycmVudCgpIHsgcmV0dXJuIGN1cnJlbnRGaWJlcjsgfSxcclxuICAgIC8qcnVuOiBmdW5jdGlvbiByZXJ1bjxSPihmaWJlcjogRmliZXIsIGZuOiAoKT0+Uik6IFIgfCBQcm9taXNlPFI+IHtcclxuICAgICAgcHVzaEZpYmVyKGZpYmVyKTtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGZuKCkpO1xyXG4gICAgICB9IGNhdGNoIChwKSB7XHJcbiAgICAgICAgaWYgKHAgJiYgdHlwZW9mIHAudGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgcmV0dXJuIHAudGhlbigoKT0+cmVydW4oZmliZXIsIGZuKSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChwKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgcG9wRmliZXIoKTtcclxuICAgICAgfVxyXG4gICAgfSwqL1xyXG4gICAgYWRkUHJvdmlkZXI6IGZ1bmN0aW9uIChnZXRDdXJyZW50RmliZXIpIHtcclxuICAgICAgICBwcm92aWRlcnMucHVzaChnZXRDdXJyZW50RmliZXIpO1xyXG4gICAgICAgIHNldEN1cnJlbnRHZXR0ZXJGcm9tUHJvdmlkZXJzKCk7XHJcbiAgICB9LFxyXG4gICAgcmVtb3ZlUHJvdmlkZXI6IGZ1bmN0aW9uIChnZXRDdXJyZW50RmliZXIpIHtcclxuICAgICAgICBwcm92aWRlcnMgPSBwcm92aWRlcnMuZmlsdGVyKGZ1bmN0aW9uIChwKSB7IHJldHVybiBwICE9PSBnZXRDdXJyZW50RmliZXI7IH0pO1xyXG4gICAgICAgIHNldEN1cnJlbnRHZXR0ZXJGcm9tUHJvdmlkZXJzKCk7XHJcbiAgICB9XHJcbn07XHJcbmZ1bmN0aW9uIHNldEN1cnJlbnRHZXR0ZXJGcm9tUHJvdmlkZXJzKCkge1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpYmVyQ29udGV4dCwgXCJjdXJyZW50XCIsIHtcclxuICAgICAgICBnZXQ6IHByb3ZpZGVycy5yZWR1Y2UoZnVuY3Rpb24gKHAsIGMpIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHAoKSB8fCBjKCk7IH07IH0pLFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKCkgeyB0aHJvdyBuZXcgRXJyb3IoXCJVc2UgRmliZXJDb250ZXh0LnB1c2goKSB0byBjaGFuZ2UgY3VycmVudCBmaWJlclwiKTsgfVxyXG4gICAgfSk7XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmliZXItY29udGV4dC5qcy5tYXAiLCJleHBvcnQgKiBmcm9tICcuL29ic2VydmFibGUnO1xyXG5leHBvcnQgKiBmcm9tICcuL3ZhbHVlJztcclxuZXhwb3J0ICogZnJvbSAnLi9jb2xsZWN0aW9uJztcclxuZXhwb3J0ICogZnJvbSAnLi9lbWl0dGVyJztcclxuZXhwb3J0ICogZnJvbSAnLi9maWJlci1jb250ZXh0JztcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIGluaXRNYXBNZXRob2QoY3Rvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtYXBwZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBuZXcgY3RvcihmdW5jdGlvbiAob2JzZXJ2ZXIpIHsgcmV0dXJuIF90aGlzLnN1YnNjcmliZShmdW5jdGlvbiAodmFsdWUsIGVycm9yLCBzdWJzY3JpcHRpb24pIHtcclxuICAgICAgICAgICAgaWYgKGVycm9yKVxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIobnVsbCwgZXJyb3IsIHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIobWFwcGVyKHZhbHVlKSwgZXJyb3IsIHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIobnVsbCwgZXJyLCBzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pOyB9KTtcclxuICAgIH07XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWFwLmpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBtaXhpbih0YXJnZXRQcm90bywgbWl4aW5Qcm90bykge1xyXG4gICAgdmFyIHByb3BzID0gW107XHJcbiAgICBmb3IgKHZhciBfaSA9IDI7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgIHByb3BzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgfVxyXG4gICAgcHJvcHMuZm9yRWFjaChmdW5jdGlvbiAocHJvcCkgeyByZXR1cm4gdGFyZ2V0UHJvdG9bcHJvcF0gPSBtaXhpblByb3RvW3Byb3BdOyB9KTtcclxufVxyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1taXhpbi5qcy5tYXAiLCJ2YXIgT2JzZXJ2YWJsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8vc3RhdGljIGdldCBbU3ltYm9sLnNwZWNpZXNdKCkgeyByZXR1cm4gdGhpczsgfVxyXG4gICAgZnVuY3Rpb24gT2JzZXJ2YWJsZShfc3Vic2NyaWJlKSB7XHJcbiAgICAgICAgdGhpcy5fc3Vic2NyaWJlID0gX3N1YnNjcmliZTtcclxuICAgIH1cclxuICAgIE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uIChvYnNlcnZlcikge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdWJzY3JpYmUoZnVuY3Rpb24gKGl0ZW1zLCBlcnJvciwgc3Vic2NyaXB0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVyKGl0ZW1zLCBlcnJvciwgc3Vic2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlcihudWxsLCBlcnIsIHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIobnVsbCwgZXJyb3IsIHsgdW5zdWJzY3JpYmU6IGZ1bmN0aW9uICgpIHsgfSB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE9ic2VydmFibGU7XHJcbn0oKSk7XHJcbmV4cG9ydCB7IE9ic2VydmFibGUgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b2JzZXJ2YWJsZS5qcy5tYXAiLCJpbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSBcIi4vb2JzZXJ2YWJsZVwiO1xyXG5pbXBvcnQgeyBpbml0TWFwTWV0aG9kIH0gZnJvbSBcIi4vbWFwXCI7XHJcbmltcG9ydCB7IENvbGxlY3Rpb24gfSBmcm9tIFwiLi9jb2xsZWN0aW9uXCI7XHJcbmltcG9ydCB7IEZpYmVyQ29udGV4dCB9IGZyb20gJy4vZmliZXItY29udGV4dCc7XHJcbnZhciBWYWx1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliXzEuX19leHRlbmRzKFZhbHVlLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gVmFsdWUoc3Vic2NyaWJlKSB7XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIHN1YnNjcmliZSkgfHwgdGhpcztcclxuICAgIH1cclxuICAgIFZhbHVlLmZyb20gPSBmdW5jdGlvbiAoeCkge1xyXG4gICAgICAgIGlmICh4LnN1YnNjcmliZSlcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBWYWx1ZShmdW5jdGlvbiAocykgeyByZXR1cm4geC5zdWJzY3JpYmUocyk7IH0pO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlZhbHVlLmZyb20oKSBjYW4gb25seSB0YWtlIG9ic2VydmFibGVzXCIpO1xyXG4gICAgfTtcclxuICAgIFZhbHVlLnByb3RvdHlwZS5yZWFkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByZXNvbHZlZCA9IGZhbHNlLCByZXN1bHQsIGVyciwgbm90aWZ5O1xyXG4gICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSB0aGlzLnN1YnNjcmliZShmdW5jdGlvbiAodmFsdWUsIGVycm9yLCBzdWJzY2lwdGlvbikge1xyXG4gICAgICAgICAgICByZXNvbHZlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHZhbHVlO1xyXG4gICAgICAgICAgICBlcnIgPSBlcnJvcjtcclxuICAgICAgICAgICAgaWYgKGVycm9yICYmIG5vdGlmeSlcclxuICAgICAgICAgICAgICAgIG5vdGlmeShudWxsLCBlcnJvciwgc3Vic2NpcHRpb24pO1xyXG4gICAgICAgICAgICBlbHNlIGlmIChub3RpZnkpXHJcbiAgICAgICAgICAgICAgICBub3RpZnkodmFsdWUsIG51bGwsIHN1YnNjaXB0aW9uKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAocmVzb2x2ZWQpIHtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnRGaWJlciA9IEZpYmVyQ29udGV4dC5jdXJyZW50O1xyXG4gICAgICAgICAgICBpZiAoIWN1cnJlbnRGaWJlcikge1xyXG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEZpYmVyIENvbnRleHRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbnMgPSBjdXJyZW50RmliZXIuc3Vic2NyaXB0aW9ucywgb2JzZXJ2ZXIgPSBjdXJyZW50RmliZXIub2JzZXJ2ZXI7XHJcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbnMucHVzaChzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICBub3RpZnkgPSBvYnNlcnZlcjtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICBub3RpZnkgPSBmdW5jdGlvbiAodmFsdWUsIGVycm9yLCBzdWJzY3JpcHRpb24pIHtcclxuICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgVmFsdWUucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICBfdGhpcy5zdWJzY3JpYmUoZnVuY3Rpb24gKHZhbHVlLCBlcnJvciwgc3Vic2NpcHRpb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChlcnJvcilcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgc3Vic2NpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgVmFsdWUucHJvdG90eXBlLmZpbHRlciA9IGZ1bmN0aW9uIChmbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWYWx1ZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHsgcmV0dXJuIF90aGlzLnN1YnNjcmliZShmdW5jdGlvbiAodmFsdWUsIGVycm9yLCBzdWJzY3JpcHRpb24pIHtcclxuICAgICAgICAgICAgaWYgKGVycm9yKVxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIobnVsbCwgZXJyb3IsIHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGZuKHZhbHVlKSlcclxuICAgICAgICAgICAgICAgIG9ic2VydmVyKHZhbHVlLCBlcnJvciwgc3Vic2NyaXB0aW9uKTtcclxuICAgICAgICB9KTsgfSk7XHJcbiAgICB9O1xyXG4gICAgVmFsdWUucHJvdG90eXBlLmxvZyA9IGZ1bmN0aW9uIChwcmVmaXgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24gKHgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cocHJlZml4LCB4KTtcclxuICAgICAgICAgICAgcmV0dXJuIHg7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgVmFsdWUucHJvdG90eXBlLnRvQ29sbGVjdGlvbiA9IGZ1bmN0aW9uIChtYXBwZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBuZXcgQ29sbGVjdGlvbihmdW5jdGlvbiAocykgeyByZXR1cm4gX3RoaXMubWFwKG1hcHBlcikuc3Vic2NyaWJlKHMpOyB9KTtcclxuICAgIH07XHJcbiAgICBWYWx1ZS5wcm90b3R5cGUuY29tYmluZUxhdGVzdCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWYWx1ZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcclxuICAgICAgICAgICAgdmFyIHZhbHVlcyA9IFtudWxsLCBudWxsXTtcclxuICAgICAgICAgICAgdmFyIG15U3Vic2NyaXB0aW9uLCBvdGhlclN1YnNjcmlwdGlvbjtcclxuICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IHtcclxuICAgICAgICAgICAgICAgIHVuc3Vic2NyaWJlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbXlTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgICAgICAgICBvdGhlclN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBteVN1YnNjcmlwdGlvbiA9IF90aGlzLnN1YnNjcmliZShmdW5jdGlvbiAoaXRlbXMsIGVycm9yLCBzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBzLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIobnVsbCwgZXJyb3IsIHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YWx1ZXNbMF0gPSBpdGVtcztcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZXNbMV0gIT09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIodmFsdWVzLCBudWxsLCBzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgb3RoZXJTdWJzY3JpcHRpb24gPSBvdGhlci5zdWJzY3JpYmUoZnVuY3Rpb24gKHZhbHVlLCBlcnJvciwgcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcy51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVyKG51bGwsIGVycm9yLCBzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFsdWVzWzFdID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWVzWzBdICE9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVyKHZhbHVlcywgbnVsbCwgc3Vic2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgVmFsdWUucHJvdG90eXBlLnN3aXRjaE1hcCA9IGZ1bmN0aW9uIChtYXBwZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBuZXcgVmFsdWUoZnVuY3Rpb24gKG9ic2VydmVyKSB7XHJcbiAgICAgICAgICAgIHZhciBtYXBwZWRTdWJzY3JpcHRpb24gPSBudWxsO1xyXG4gICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gbnVsbDtcclxuICAgICAgICAgICAgdmFyIHJldHVybmVkU3Vic2NyaXB0aW9uID0ge1xyXG4gICAgICAgICAgICAgICAgdW5zdWJzY3JpYmU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobWFwcGVkU3Vic2NyaXB0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcHBlZFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXBwZWRTdWJzY3JpcHRpb24gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgc3Vic2NyaXB0aW9uID0gX3RoaXMuc3Vic2NyaWJlKGZ1bmN0aW9uIChpdGVtLCBlcnJvciwgcykge1xyXG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uID0gcztcclxuICAgICAgICAgICAgICAgIGlmIChtYXBwZWRTdWJzY3JpcHRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXBwZWRTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgICAgICAgICBtYXBwZWRTdWJzY3JpcHRpb24gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVyKG51bGwsIGVycm9yLCByZXR1cm5lZFN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JzZXJ2YWJsZU9yVmFsdWUgPSBtYXBwZXIoaXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYnNlcnZhYmxlT3JWYWx1ZSAmJiB0eXBlb2Ygb2JzZXJ2YWJsZU9yVmFsdWUuc3Vic2NyaWJlID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXBwZWRTdWJzY3JpcHRpb24gPSBvYnNlcnZhYmxlT3JWYWx1ZS5zdWJzY3JpYmUoZnVuY3Rpb24gKHZhbHVlLCBlcnJvciwgcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcHBlZFN1YnNjcmlwdGlvbiA9IHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIodmFsdWUsIGVycm9yLCByZXR1cm5lZFN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyKG9ic2VydmFibGVPclZhbHVlLCBudWxsLCBzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlcihudWxsLCBlcnJvciwgc3Vic2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gcmV0dXJuZWRTdWJzY3JpcHRpb247XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFZhbHVlO1xyXG59KE9ic2VydmFibGUpKTtcclxuZXhwb3J0IHsgVmFsdWUgfTtcclxuVmFsdWUucHJvdG90eXBlLm1hcCA9IGluaXRNYXBNZXRob2QoVmFsdWUpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD12YWx1ZS5qcy5tYXAiLCJleHBvcnQgKiBmcm9tICcuL2pzL2Rpc3QvanMvb2JzZXJ2YWJsZSc7XHJcbiIsImV4cG9ydCAqIGZyb20gJy4vanMvZGlzdC9qcy9rZWQtYmFja2VuZC1yZXBvJztcclxuIiwidmFyIG1hcCA9IHtcblx0XCIuL2VuLVNHXCI6IFwiLi9ub2RlX21vZHVsZXMvbW9tZW50L2xvY2FsZS9lbi1TRy5qc1wiLFxuXHRcIi4vZW4tU0cuanNcIjogXCIuL25vZGVfbW9kdWxlcy9tb21lbnQvbG9jYWxlL2VuLVNHLmpzXCIsXG5cdFwiLi9lbi1hdVwiOiBcIi4vbm9kZV9tb2R1bGVzL21vbWVudC9sb2NhbGUvZW4tYXUuanNcIixcblx0XCIuL2VuLWF1LmpzXCI6IFwiLi9ub2RlX21vZHVsZXMvbW9tZW50L2xvY2FsZS9lbi1hdS5qc1wiLFxuXHRcIi4vZW4tY2FcIjogXCIuL25vZGVfbW9kdWxlcy9tb21lbnQvbG9jYWxlL2VuLWNhLmpzXCIsXG5cdFwiLi9lbi1jYS5qc1wiOiBcIi4vbm9kZV9tb2R1bGVzL21vbWVudC9sb2NhbGUvZW4tY2EuanNcIixcblx0XCIuL2VuLWdiXCI6IFwiLi9ub2RlX21vZHVsZXMvbW9tZW50L2xvY2FsZS9lbi1nYi5qc1wiLFxuXHRcIi4vZW4tZ2IuanNcIjogXCIuL25vZGVfbW9kdWxlcy9tb21lbnQvbG9jYWxlL2VuLWdiLmpzXCIsXG5cdFwiLi9lbi1pZVwiOiBcIi4vbm9kZV9tb2R1bGVzL21vbWVudC9sb2NhbGUvZW4taWUuanNcIixcblx0XCIuL2VuLWllLmpzXCI6IFwiLi9ub2RlX21vZHVsZXMvbW9tZW50L2xvY2FsZS9lbi1pZS5qc1wiLFxuXHRcIi4vZW4taWxcIjogXCIuL25vZGVfbW9kdWxlcy9tb21lbnQvbG9jYWxlL2VuLWlsLmpzXCIsXG5cdFwiLi9lbi1pbC5qc1wiOiBcIi4vbm9kZV9tb2R1bGVzL21vbWVudC9sb2NhbGUvZW4taWwuanNcIixcblx0XCIuL2VuLW56XCI6IFwiLi9ub2RlX21vZHVsZXMvbW9tZW50L2xvY2FsZS9lbi1uei5qc1wiLFxuXHRcIi4vZW4tbnouanNcIjogXCIuL25vZGVfbW9kdWxlcy9tb21lbnQvbG9jYWxlL2VuLW56LmpzXCIsXG5cdFwiLi9zdlwiOiBcIi4vbm9kZV9tb2R1bGVzL21vbWVudC9sb2NhbGUvc3YuanNcIixcblx0XCIuL3N2LmpzXCI6IFwiLi9ub2RlX21vZHVsZXMvbW9tZW50L2xvY2FsZS9zdi5qc1wiXG59O1xuXG5cbmZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0KHJlcSkge1xuXHR2YXIgaWQgPSB3ZWJwYWNrQ29udGV4dFJlc29sdmUocmVxKTtcblx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oaWQpO1xufVxuZnVuY3Rpb24gd2VicGFja0NvbnRleHRSZXNvbHZlKHJlcSkge1xuXHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKG1hcCwgcmVxKSkge1xuXHRcdHZhciBlID0gbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIiArIHJlcSArIFwiJ1wiKTtcblx0XHRlLmNvZGUgPSAnTU9EVUxFX05PVF9GT1VORCc7XG5cdFx0dGhyb3cgZTtcblx0fVxuXHRyZXR1cm4gbWFwW3JlcV07XG59XG53ZWJwYWNrQ29udGV4dC5rZXlzID0gZnVuY3Rpb24gd2VicGFja0NvbnRleHRLZXlzKCkge1xuXHRyZXR1cm4gT2JqZWN0LmtleXMobWFwKTtcbn07XG53ZWJwYWNrQ29udGV4dC5yZXNvbHZlID0gd2VicGFja0NvbnRleHRSZXNvbHZlO1xubW9kdWxlLmV4cG9ydHMgPSB3ZWJwYWNrQ29udGV4dDtcbndlYnBhY2tDb250ZXh0LmlkID0gXCIuL25vZGVfbW9kdWxlcy9tb21lbnQvbG9jYWxlIHN5bmMgcmVjdXJzaXZlIHN2fGVuXCI7IiwiaW1wb3J0IHsgVXNlciB9IGZyb20gXCIuLi9jb250cmFjdHMva2VkLW1vZGVsc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0VXNlckNsYWltcyAodXNlcjogVXNlcikge1xyXG4gIHJldHVybiBbe1xyXG4gICAgdHlwZTogXCJlbWFpbFwiLFxyXG4gICAgdmFsdWU6IHVzZXIubWFpbFxyXG4gIH0se1xyXG4gICAgdHlwZTogXCJzY2hvb2xcIixcclxuICAgIHZhbHVlOiB1c2VyLnNjaG9vbFxyXG4gIH1dLmNvbmNhdCh1c2VyLnJvbGVzLm1hcChyb2xlID0+ICh7XHJcbiAgICB0eXBlOiBcInJvbGVcIixcclxuICAgIHZhbHVlOiByb2xlXHJcbiAgfSkpKS5jb25jYXQodXNlci5yb2xlcy5tYXAocm9sZSA9PiAoe1xyXG4gICAgdHlwZTogXCJzY2hvb2xSb2xlXCIsXHJcbiAgICB2YWx1ZTogdXNlci5zY2hvb2wgKyBcIi9cIiArIHJvbGVcclxuICB9KSkpO1xyXG59XHJcbiIsImltcG9ydCB7IEFjY2Vzc0NsYWltLCBEb2N1bWVudEFjY2VzcywgaGFzQWNjZXNzIGFzIF9oYXNBY2Nlc3MsIEFjY2Vzc1JpZ2h0IH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnQnO1xyXG5pbXBvcnQgeyBEb2N1bWVudCB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IGdldFVzZXJDbGFpbXMgZnJvbSAnLi9nZXQtdXNlci1jbGFpbXMnO1xyXG5pbXBvcnQgeyBwYXJzZVF1ZXJ5U3RyaW5nLCBnZW5lcmF0ZVF1ZXJ5U3RyaW5nIH0gZnJvbSBcIi4uL3V0aWxzL3F1ZXJ5LXN0cmluZ1wiO1xyXG5pbXBvcnQgeyBVc2VyIH0gZnJvbSAnLi4vY29udHJhY3RzL2tlZC1tb2RlbHMnO1xyXG5leHBvcnQgeyBnZXRVc2VyQ2xhaW1zIH07XHJcblxyXG5leHBvcnQgY29uc3QgSU1QRVJTT05BVElPTl9RVUVSWV9QQVJBTVMgPSBbXHJcbiAgXCJ1c2VyXCIsXHJcbiAgXCJyb2xlXCIsXHJcbiAgXCJzY2hvb2xcIixcclxuICBcImRlYnVnXCIsXHJcbiAgXCJ0ZXN0VmVyc2lvblwiLFxyXG4gIFwidGVzdHZlcnNpb25cIixcclxuICBcImZlYXR1cmVzXCIsXHJcbiAgXCJzY2hvb2xUeXBlXCIsXHJcbiAgXCJzY2hvb2x0eXBlXCJdO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGhhc0FjY2Vzcyh1c2VyOiBVc2VyLCBkb2M6IERvY3VtZW50LCByZXF1ZXN0ZWRSaWdodDogQWNjZXNzUmlnaHQpIHtcclxuICB2YXIgY2xhaW1zID0gZ2V0VXNlckNsYWltcyh1c2VyKTtcclxuICBpZiAocmVxdWVzdGVkUmlnaHQgIT09ICdSJyAmJiB1c2VyLnR1dG9yRm9yKSB7XHJcbiAgICBjbGFpbXMgPSBjbGFpbXMuZmlsdGVyKGNsYWltID0+IGNsYWltLnR5cGUgIT09ICdlbWFpbCcpO1xyXG4gIH1cclxuICB2YXIgcmVzdWx0ID0gX2hhc0FjY2VzcyhEb2N1bWVudEFjY2Vzcy5mcm9tU3RyaW5nQXJyYXkoZG9jLmFjbCB8fCBbXSksIGNsYWltcywgcmVxdWVzdGVkUmlnaHQpO1xyXG4gIC8vY29uc29sZS5sb2coYEhhcyAke3JlcXVlc3RlZFJpZ2h0fSBhY2Nlc3MgdG8gJHtkb2MubmFtZX0vJHtkb2MuaWR9OiAke3Jlc3VsdH1gKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaGFzUmVhZEFjY2Vzcyh1c2VyOiBVc2VyLCBkb2M6IERvY3VtZW50KSB7XHJcbiAgcmV0dXJuIGhhc0FjY2Vzcyh1c2VyLCBkb2MsICdSJyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBoYXNXcml0ZUFjY2Vzcyh1c2VyOiBVc2VyLCBkb2M6IERvY3VtZW50KSB7XHJcbiAgcmV0dXJuIGhhc0FjY2Vzcyh1c2VyLCBkb2MsICdXJyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBoYXNTaGFyZUFjY2Vzcyh1c2VyOiBVc2VyLCBkb2M6IERvY3VtZW50KSB7XHJcbiAgcmV0dXJuIGhhc0FjY2Vzcyh1c2VyLCBkb2MsICdTJyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1RlYWNoZXJBdFNjaG9vbCh1c2VyOiBVc2VyLCBzY2hvb2w6IHN0cmluZykge1xyXG4gIGNvbnN0IGlzVGVhY2hlciA9IHVzZXIucm9sZXMuc29tZShyb2xlID0+IHJvbGUgPT09ICdFTVBMT1lFRScgfHwgcm9sZSA9PT0gJ0FETUlOJyk7XHJcbiAgY29uc3QgYmVsb25nc1RvU2Nob29sID0gKHNjaG9vbHx8XCJcIikudG9Mb3dlckNhc2UoKSA9PT0gdXNlci5zY2hvb2wudG9Mb3dlckNhc2UoKTtcclxuICByZXR1cm4gKGlzVGVhY2hlciAmJiBiZWxvbmdzVG9TY2hvb2wpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNBZG1pbk9yVGVhY2hlckF0U2Nob29sKHVzZXI6IFVzZXIsIHNjaG9vbDogc3RyaW5nKSB7XHJcbiAgcmV0dXJuIHVzZXIucm9sZXMuaW5jbHVkZXMoXCJBRE1JTlwiKSB8fCBpc1RlYWNoZXJBdFNjaG9vbCh1c2VyLCBzY2hvb2wpO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgaW1wZXJzb25hdGlvbkVudiA9IHtcclxuICBhY3RBcyAob3B0aW9uczoge3JvbGUsIHNjaG9vbCwgdXJsP30pIHtcclxuICAgIGNvbnN0IHtyb2xlLCBzY2hvb2wsIHVybH0gPSBvcHRpb25zO1xyXG4gICAgY29uc3QgY3VycmVudFF1ZXJ5ID0gcGFyc2VRdWVyeVN0cmluZyhsb2NhdGlvbi5zZWFyY2gpO1xyXG4gICAgY29uc3QgbmV3UXVlcnkgPSB7Li4uY3VycmVudFF1ZXJ5LCByb2xlLCBzY2hvb2x9O1xyXG4gICAgY29uc3QgbmV3UXVlcnlTdHJpbmcgPSBnZW5lcmF0ZVF1ZXJ5U3RyaW5nKG5ld1F1ZXJ5KTtcclxuICAgIGlmICh1cmwpIHtcclxuICAgICAgbG9jYXRpb24uaHJlZiA9IGAke3VybH0ke25ld1F1ZXJ5U3RyaW5nfWA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBsb2NhdGlvbi5oYXNoID0gXCIjXCI7XHJcbiAgICAgIGxvY2F0aW9uLnNlYXJjaCA9IG5ld1F1ZXJ5U3RyaW5nO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFjdEFzKG9wdGlvbnM6IHtyb2xlLCBzY2hvb2wsIHVybD99KSB7XHJcbiAgaW1wZXJzb25hdGlvbkVudi5hY3RBcyhvcHRpb25zKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHByZXNlcnZlSW1wZXJzb25hdGlvblF1ZXJ5ICh1cmw6IHN0cmluZywgcXVlcnk6IHtbbmFtZTogc3RyaW5nXSA6IHN0cmluZ30pIHtcclxuICBjb25zdCBjdXJyZW50UXVlcnkgPSBwYXJzZVF1ZXJ5U3RyaW5nKGxvY2F0aW9uLnNlYXJjaCk7XHJcbiAgY29uc3QgcHJlc2VydmVkUXVlcnkgPSB7fTtcclxuICBmb3IgKGNvbnN0IHBhcmFtIG9mIElNUEVSU09OQVRJT05fUVVFUllfUEFSQU1TKSB7XHJcbiAgICBpZiAoY3VycmVudFF1ZXJ5W3BhcmFtXSkgcHJlc2VydmVkUXVlcnlbcGFyYW1dID0gY3VycmVudFF1ZXJ5W3BhcmFtXTtcclxuICB9XHJcbiAgY29uc3QgbmV3UXVlcnlTdHJpbmcgPSBnZW5lcmF0ZVF1ZXJ5U3RyaW5nKHsuLi5wcmVzZXJ2ZWRRdWVyeSwgLi4ucXVlcnl9KTtcclxuICBjb25zdCBwSGFzaCA9IHVybC5pbmRleE9mKCcjJyk7XHJcbiAgcmV0dXJuIHBIYXNoID49IDAgP1xyXG4gICAgYCR7dXJsLnN1YnN0cigwLHBIYXNoKX0ke25ld1F1ZXJ5U3RyaW5nfSR7dXJsLnN1YnN0cihwSGFzaCl9YCA6XHJcbiAgICBgJHt1cmx9JHtuZXdRdWVyeVN0cmluZ31gO1xyXG59XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuXHJcbmNvbnN0IEljb25Ecml2ZSA9ICh7IHNpemUgPSAzMCB9KSA9PiAoXHJcbiAgPHN2Z1xyXG4gICAgd2lkdGg9e3NpemV9XHJcbiAgICB2ZXJzaW9uPVwiMS4xXCJcclxuICAgIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxyXG4gICAgeG1sbnNYbGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIlxyXG4gICAgdmlld0JveD1cIjAgMCA1MDguNTIgNTA4LjUyXCJcclxuICAgIGZpbGw9XCIjZmZmZmZmXCJcclxuICAgIHN0eWxlPXt7dmVydGljYWxBbGlnbjogXCJtaWRkbGVcIiwgbWFyZ2luUmlnaHQ6IFwiNHB4XCJ9fVxyXG4gID5cclxuICAgIDxwb2x5Z29uIHBvaW50cz1cIjQ4NC40OTIsMjg0LjU4IDMzOS4wMjQsMzIuNTc3IDE2OS40OTYsMzIuNTc3IDMxNC45OTYsMjg0LjU4XCIgLz5cclxuICAgIDxwb2x5Z29uIHBvaW50cz1cIjE0NS40MzcsNzQuMjc2IDAsMzI2LjI3OSA4NC43NjQsNDczLjA1IDIzMC4xNjksMjIxLjE0M1wiIC8+XHJcbiAgICA8cG9seWdvbiBwb2ludHM9XCIyMzQuMzk2LDMxNi4zNjMgMTQzLjM3MSw0NzUuOTQzIDQyMy43NTYsNDc1Ljk0MyA1MDguNTIsMzE2LjM2XCIgLz5cclxuICA8L3N2Zz5cclxuKTtcclxuXHJcbmNvbnN0IEljb25DbGFzc3Jvb20gPSAoeyBzaXplID0gMzAgfSkgPT4gKFxyXG4gIDxzdmdcclxuICAgIHdpZHRoPXtzaXplfVxyXG4gICAgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXHJcbiAgICB4bWxuc1hsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiXHJcbiAgICB2aWV3Qm94PVwiMCAwIDI0IDI0XCJcclxuICAgIHZlcnNpb249XCIxLjFcIlxyXG4gID5cclxuICAgIDxwYXRoIGQ9XCJNNSAyQzMuMzQ4IDIgMiAzLjM0OCAyIDV2MTRjMCAxLjY1MiAxLjM0OCAzIDMgM2gxNGMxLjY1MiAwIDMtMS4zNDggMy0zVjVjMC0xLjY1Mi0xLjM0OC0zLTMtM3ptMCAyaDE0Yy41NSAwIDEgLjQ1IDEgMXYxNGMwIC41NS0uNDUgMS0xIDFoLTF2LTJoLTV2Mkg1Yy0uNTUgMC0xLS40NS0xLTFWNWMwLS41NS40NS0xIDEtMXptNyAyYTEuOTk5IDEuOTk5IDAgMSAwIDAgNCAxLjk5OSAxLjk5OSAwIDEgMCAwLTR6TTcuNSA4YTEuNSAxLjUgMCAxIDAgMCAzIDEuNSAxLjUgMCAwIDAgMC0zem05IDBhMS41IDEuNSAwIDEgMCAwIDMgMS41IDEuNSAwIDAgMCAwLTN6TTEyIDExYy0yLjY2IDAtMy41IDIuNS0zLjUgMi41IDAtLjg0OC41LTEuNS41LTEuNS0uMy0uMTg4LTEuMDctLjMxMy0xLjQzOC0uMzEzLTEuMjE0IDAtMi41NjIgMS4xOTItMi41NjIgMlYxNmgxNHYtMi4zMTNjMC0uODA4LTEuNTEyLTItMi41NjMtMi0uMzY3IDAtMS4xMzYuMTI2LTEuNDM3LjMxMyAwIDAgLjUuNjUyLjUgMS41IDAgMC0uODQtMi41LTMuNS0yLjV6XCIgLz5cclxuICA8L3N2Zz5cclxuKTtcclxuXHJcbmV4cG9ydCBjb25zdCBEcml2ZUJ1dHRvbiA9ICh7bGFiZWw9J0dvb2dsZSBEcml2ZScsIGFjdGlvbn0pID0+IFxyXG4gIDxhIGNsYXNzTmFtZT1cImJ0blwiIG9uQ2xpY2s9e2FjdGlvbn0+PEljb25Ecml2ZSBzaXplPXsxNn0gLz4ge2xhYmVsfTwvYT5cclxuIiwiLy8gQ2xpZW50IGlkIGZvciBHb29nbGVXZWJDbGllbnRcclxuZXhwb3J0IGNvbnN0IFdlYkNsaWVudElkID0gXCI0MjE1NzIyNjIyNjktdTY4djVsZjVvOHNzNXQ2OGw4Z2txM3BmYXJoNmRia3YuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb21cIjtcclxuXHJcbi8vIEdvb2dsZSBEcml2ZSBGaWxlIElkIHRvIGpzb24gZmlsZSB3aXRoIFRhbXBsYXRlcyBmb3IgQ291cnNlIEJ1aWxkZXIgKENsYXNzcm9vbSlcclxuZXhwb3J0IGNvbnN0IFRlbXBsYXRlc0ZpbGVJZCA9ICdodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9kb2N1bWVudC9kLzFWN2V4RzZ2TjgzU3E4a2I2dXoxQjZEYVpEVk85ZUxjSmJQN1hGMHZMNGRZL2V4cG9ydD9mb3JtYXQ9dHh0JztcclxuIiwiaW1wb3J0IHsgRURTQ291cnNlLCBFRFNBc3Nlc3NtZW50LCBFRFNTdHVkeVBsYW4sIEVEU1N0dWRlbnRGdXR1cmVBYmlsaXR5LCBFRFNTdHVkZW50LCBFRFNUdWl0aW9uR3JvdXAsIEVEU1R1aXRpb25TdHVkZW50LCBFRFNUZWFjaGVyLCBNb2NrRURTQWNhZGVtaWNZZWFyLCBNb2NrRURTRGF0ZVJhbmdlIH0gZnJvbSAnLi4vY29udHJhY3RzL2Vkcyc7XHJcbmltcG9ydCB7IFJlc3RDbGllbnQgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XHJcbmltcG9ydCB7IElzb21vcnBoaWNFbnYsIEJlYXJlclByb3ZpZGVyLCBIdHRwRXJyb3IgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XHJcbmltcG9ydCB7IFNjaG9vbE1vbWVudCwgZ2V0VGVybVN0YXJFbmREYXRlIH0gZnJvbSAnLi4vdXRpbHMvc2Nob29sLW1vbWVudCc7XHJcbmltcG9ydCB7IFNjaG9vbFRlcm0gfSBmcm9tICcuLi91dGlscy9zY2hvb2wtdGVybSc7XHJcbmltcG9ydCB7IGRhdGVUaW1lUmV2aXZlciwgTCB9IGZyb20gJy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IG1vY2tKc29uRmlsZSBmcm9tICcuL21vY2svbW9jay1lZHMtZGF0YS5qc29uJztcclxuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xyXG5pbXBvcnQgeyBTdXNwZW5zZUJhc2VkQVBJLCBtYWtlU3VzcGVuc2VBcGkgfSBmcm9tICcuLi91dGlscy9tYWtlLXN1c3BlbnNlLWFwaSc7XHJcblxyXG5leHBvcnQgY2xhc3MgRWRzQ2xpZW50IHtcclxuICBodHRwOiBSZXN0Q2xpZW50O1xyXG4gIHVzZXJFbWFpbEdldHRlcjogKCk9PnN0cmluZztcclxuICBzdXNwZW5zZTogU3VzcGVuc2VCYXNlZEFQSTxFZHNDbGllbnQ+O1xyXG5cclxuICBjb25zdHJ1Y3RvciAoXHJcbiAgICBpc29tb3JwaGljOiBJc29tb3JwaGljRW52LFxyXG4gICAgYmFzZVVybDogc3RyaW5nLFxyXG4gICAgYmVhcmVyUHJvdmlkZXI6IEJlYXJlclByb3ZpZGVyLFxyXG4gICAgdXNlckVtYWlsR2V0dGVyOiAoKT0+c3RyaW5nXHJcbiAgKSB7XHJcbiAgICB0aGlzLmh0dHAgPSBuZXcgUmVzdENsaWVudCAoaXNvbW9ycGhpYywgYmFzZVVybCwge2JlYXJlclByb3ZpZGVyfSk7XHJcbiAgICB0aGlzLnVzZXJFbWFpbEdldHRlciA9IHVzZXJFbWFpbEdldHRlcjtcclxuICAgIGNvbnN0IGlzQXBpTWV0aG9kID0gbSA9PlxyXG4gICAgICB0eXBlb2YgdGhpc1ttXSA9PT0gJ2Z1bmN0aW9uJyAmJlxyXG4gICAgICBtICE9PSAnY29uc3RydWN0b3InICYmIC8vIFNpbmNlIG1ha2VTdXNwZW5zZUFwaSgpIHdhbGtzIHByb3RvdHlwZSBjaGFpblxyXG4gICAgICBtICE9PSAncHJpdmF0aXppbmdDYWNoZUJ1c3QnICYmXHJcbiAgICAgIG0gIT09ICd1c2VyRW1haWxHZXR0ZXInIC8vIExpc3Qgbm9uLUFQSSBtZXRob2RzIGhlcmUuLi5cclxuICAgICAgO1xyXG5cclxuICAgIE9iamVjdC5rZXlzKEVkc0NsaWVudC5wcm90b3R5cGUpLmZvckVhY2gobWV0aG9kID0+IHtcclxuICAgICAgaWYgKGlzQXBpTWV0aG9kKG1ldGhvZCkpIHtcclxuICAgICAgICB0aGlzW21ldGhvZF0gPSBhdm9pZFNpbXVsdGFub3VzQ2FsbHModGhpc1ttZXRob2RdKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICB0aGlzLnN1c3BlbnNlID0gbWFrZVN1c3BlbnNlQXBpKHRoaXMsIHtpc0FwaU1ldGhvZH0pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBwcml2YXRpemluZ0NhY2hlQnVzdCgpIHtcclxuICAgIHJldHVybiB7dXNlcjogdGhpcy51c2VyRW1haWxHZXR0ZXIoKX07XHJcbiAgfVxyXG5cclxuLyoqXHJcbiAgICogUmV0cmlldmUgYWN0aXZlIGNvdXJzZXMgZm9yIGN1cnJlbnQgbG9nZ2VkIGluIHN0dWRlbnQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gY291cnNlQ29kZSBTaG9ydC1uYW1lIG9mIHRoZSBjb3Vyc2UuIE9wdGlvbmFsLlxyXG4gICAqL1xyXG4gIGFzeW5jIGdldEFjdGl2ZUNvdXJzZXMocToge2NvdXJzZUNvZGU/OiBzdHJpbmcsIHBlcmlvZE5hbWU6IHN0cmluZ30pIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHF1ZXJ5OmFueSA9IHRoaXMucHJpdmF0aXppbmdDYWNoZUJ1c3QoKTtcclxuICAgICAgaWYgKHEpIHtcclxuICAgICAgICBpZiAocS5jb3Vyc2VDb2RlKSBxdWVyeS5Db3Vyc2VDb2RlID0gcS5jb3Vyc2VDb2RlO1xyXG4gICAgICAgIGlmIChxLnBlcmlvZE5hbWUpIHF1ZXJ5LlBlcmlvZE5hbWUgPSBxLnBlcmlvZE5hbWU7XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5odHRwLmdldChcInN0dWRlbnRhY3RpdmVjb3Vyc2VzXCIsIHF1ZXJ5KTtcclxuICAgICAgaWYgKHJlcy5zdGF0dXMgIT0gMjAwKSB0aHJvdyBuZXcgSHR0cEVycm9yKHJlcy5zdGF0dXMsIGF3YWl0IHJlcy50ZXh0KCkpO1xyXG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcclxuICAgICAgcmV0dXJuIGpzb24uY291cnNlcyBhcyBFRFNDb3Vyc2VbXTtcclxuICAgIH0gY2F0Y2ggKGV4KSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmcm9tIEVEUzogXCIgKyBleCk7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihMYEt1bmRlIHR5dsOkcnIgaW50ZSBsYWRkYSB0ZXJtaW5zbcOlbCBlbGxlciBhdmtsYXJhZGUgc3RlZyBmcsOlbiBFRFMuIEbDtnJzw7ZrIGlnZW4gc2VuYXJlLi4uYCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXRyaWV2ZSBsYXRlc3QgYXNzZXNzbWVudHMgZm9yIGN1cnJlbnQgbG9nZ2VkIGluIHVzZXIuXHJcbiAgICogXHJcbiAgICogQHBhcmFtIGxpbWl0IE9wdGlvbmFsIGxpbWl0XHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0TGF0ZXN0QXNzZXNzbWVudHMobGltaXQ/OiBudW1iZXIpIHtcclxuICAgIGNvbnN0IHF1ZXJ5OmFueSA9IHRoaXMucHJpdmF0aXppbmdDYWNoZUJ1c3QoKTtcclxuICAgIGlmICghaXNOYU4obGltaXQpKSBxdWVyeS5Db3VudCA9IGxpbWl0O1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5odHRwLmdldChcInN0dWRlbnRhc3Nlc3NtZW50c1wiLCBxdWVyeSk7XHJcbiAgICBpZiAocmVzLnN0YXR1cyAhPSAyMDApIHRocm93IG5ldyBIdHRwRXJyb3IocmVzLnN0YXR1cywgYXdhaXQgcmVzLnRleHQoKSk7XHJcbiAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcclxuICAgIHJldHVybiBqc29uLmFzc2Vzc21lbnRzIGFzIEVEU0Fzc2Vzc21lbnRbXTsgICAgXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXRyaWV2ZSBzdHVkeXBsYW5zIGZvciBjdXJyZW50IGxvZ2dlZC1pbiB1c2VyXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0U3R1ZGVudEdvYWxzKCkge1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5odHRwLmdldChcInN0dWRlbnRnb2Fsc1wiLCB0aGlzLnByaXZhdGl6aW5nQ2FjaGVCdXN0KCkpO1xyXG4gICAgaWYgKHJlcy5zdGF0dXMgIT0gMjAwKSB0aHJvdyBuZXcgSHR0cEVycm9yKHJlcy5zdGF0dXMsIGF3YWl0IHJlcy50ZXh0KCkpO1xyXG4gICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XHJcbiAgICByZXR1cm4ganNvbi5zdHVkZW50R29hbHMgYXMgRURTU3R1ZHlQbGFuW107ICAgIFxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0U3R1ZGVudEZ1dHVyZUFiaWxpdGllcygpIHtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuaHR0cC5nZXQoXCJzdHVkZW50RnV0dXJlQWJpbGl0aWVzXCIsIHRoaXMucHJpdmF0aXppbmdDYWNoZUJ1c3QoKSk7XHJcbiAgICBpZiAocmVzLnN0YXR1cyAhPSAyMDApIHRocm93IG5ldyBIdHRwRXJyb3IocmVzLnN0YXR1cywgYXdhaXQgcmVzLnRleHQoKSk7XHJcbiAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcclxuICAgIHJldHVybiBqc29uLnN0dWRlbnRGdXR1cmVBYmlsaXRpZXMgYXMgRURTU3R1ZGVudEZ1dHVyZUFiaWxpdHlbXTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGdldFRlYWNoZXJUdXRvclN0dWRlbnRzKCkge1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5odHRwLmdldChcInRlYWNoZXJ0dXRvcnN0dWRlbnRzXCIsIHRoaXMucHJpdmF0aXppbmdDYWNoZUJ1c3QoKSk7XHJcbiAgICBpZiAocmVzLnN0YXR1cyAhPSAyMDApIHRocm93IG5ldyBIdHRwRXJyb3IocmVzLnN0YXR1cywgYXdhaXQgcmVzLnRleHQoKSk7XHJcbiAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcclxuICAgIHJldHVybiBqc29uLnN0dWRlbnRzIGFzIEVEU1N0dWRlbnRbXTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIGdldFNjaG9vbFR1aXRpb25Hcm91cHMoKVxyXG4gICAqIFxyXG4gICAqIFJldHVybiB0dWl0aW9uZ3JvdXBzIGZvciBzY2hvb2xcclxuICAgKiBcclxuICAgKiBAcGFyYW0gc2Nob29sTmFtZSAtIG5hbWUgb2Ygc2Nob29sXHJcbiAgICogQHBhcmFtIGNvdXJzZUNvZGUgLSBTa29sdmVya2V0cyBjb2RlIGZvciBjb3Vyc2VcclxuICAgKi9cclxuICBhc3luYyBnZXRTY2hvb2xUdWl0aW9uR3JvdXBzKHE6IHtzY2hvb2xOYW1lOiBzdHJpbmcsIGNvdXJzZUNvZGU6IHN0cmluZ30pIHtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuaHR0cC5nZXQoXCJTY2hvb2xUdWl0aW9uR3JvdXBzXCIsIHsuLi50aGlzLnByaXZhdGl6aW5nQ2FjaGVCdXN0KCksIC4uLnF9KTtcclxuICAgIGlmIChyZXMuc3RhdHVzICE9IDIwMCkgdGhyb3cgbmV3IEh0dHBFcnJvcihyZXMuc3RhdHVzLCBhd2FpdCByZXMudGV4dCgpKTtcclxuICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xyXG4gICAgcmV0dXJuIGpzb24uc2Nob29sVHVpdGlvbkdyb3VwcyBhcyBFRFNUdWl0aW9uR3JvdXBbXTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIGdldFR1aXRpb25Hcm91cFN0dWRlbnRzKClcclxuICAgKiBcclxuICAgKiBSZXR1cm4gbmFtZSBhbmQgbWFpbGFkcmVzc2VzIGZvciB0dXRpdGlvbmdyb3VwcyBpbiBzY2hvb2xzXHJcbiAgICogXHJcbiAgICogQHBhcmFtIHNjaG9vbE5hbWUgLSBuYW1lIG9mIHNjaG9vbFxyXG4gICAqIEBwYXJhbSB0dWl0aW9uR3JvdXBOYW1lIC0gdHVpdGlvbiBncnVvcCBuYW1lIGluIEVEU1xyXG4gICAqL1xyXG4gIGFzeW5jIGdldFR1aXRpb25Hcm91cFN0dWRlbnRzKHE6IHtzY2hvb2xOYW1lOiBzdHJpbmcsIHR1aXRpb25Hcm91cE5hbWU6IHN0cmluZ30pIHtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuaHR0cC5nZXQoXCJUdWl0aW9uR3JvdXBTdHVkZW50c1wiLCB7Li4udGhpcy5wcml2YXRpemluZ0NhY2hlQnVzdCgpLCAuLi5xfSk7XHJcbiAgICBpZiAocmVzLnN0YXR1cyAhPSAyMDApIHRocm93IG5ldyBIdHRwRXJyb3IocmVzLnN0YXR1cywgYXdhaXQgcmVzLnRleHQoKSk7XHJcbiAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcclxuICAgIHJldHVybiBqc29uLnR1aXRpb25Hcm91cFN0dWRlbnRzIGFzIEVEU1R1aXRpb25TdHVkZW50W107XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBnZXRTY2hvb2xUZWFjaGVycygpXHJcbiAgICogXHJcbiAgICogUmV0dXJuIG5hbWUgYW5kIG1haWxhZHJlc3NlcyBmb3IgdHV0aXRpb25ncm91cHMgaW4gc2Nob29sc1xyXG4gICAqIFxyXG4gICAqIEBwYXJhbSBzY2hvb2xOYW1lIC0gbmFtZSBvZiBzY2hvb2xcclxuICAgKi9cclxuICBhc3luYyBnZXRTY2hvb2xUZWFjaGVycyhxOiB7c2Nob29sTmFtZTogc3RyaW5nfSkge1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5odHRwLmdldChcIlNjaG9vbFRlYWNoZXJzXCIsIHsuLi50aGlzLnByaXZhdGl6aW5nQ2FjaGVCdXN0KCksIC4uLnF9KTtcclxuICAgIGlmIChyZXMuc3RhdHVzICE9IDIwMCkgdGhyb3cgbmV3IEh0dHBFcnJvcihyZXMuc3RhdHVzLCBhd2FpdCByZXMudGV4dCgpKTtcclxuICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xyXG4gICAgcmV0dXJuIGpzb24uc2Nob29sVGVhY2hlcnMgYXMgRURTVGVhY2hlcltdO1xyXG4gIH1cclxuICAvLyB3ZSBhc3N1bWUgdGhhdCB0aGUgRURTIHdpbGwgcmV0dXJuIHRoZSBjdXJyZW50IGFjYWRlbWljIHllYXIgZGF0ZXMgZGV0ZXJtaW5lZCBieSB0aGUgY3VycmVudCBkYXRlXHJcbiAgYXN5bmMgZ2V0QWNhZGVtaWNZZWFyVGVybXMoc2Nob29sTG9jYWxlOiBzdHJpbmcsIGRhdGU6IERhdGUpIHtcclxuICAgIC8vIG1vY2sgZGF0YVxyXG4gICAgc3dpdGNoIChzY2hvb2xMb2NhbGUpIHtcclxuICAgICAgY2FzZSAnZW5fc2luJzpcclxuICAgICAgcmV0dXJuIG1vY2tKc29uRmlsZS5Tb3V0aEluZGlhLmZpbHRlcihmID0+IG1vbWVudChkYXRlKS5pc1NhbWVPckFmdGVyKGYuZmlyc3RUZXJtLnN0YXJ0RGF0ZSkgJiYgbW9tZW50KGRhdGUpLmlzU2FtZU9yQmVmb3JlKGYuc2Vjb25kVGVybS5lbmREYXRlKSlbMF0gYXMgTW9ja0VEU0FjYWRlbWljWWVhcjtcclxuICAgICAgY2FzZSAnZW5fbmluJzpcclxuICAgICAgcmV0dXJuIG1vY2tKc29uRmlsZS5Ob3J0aEluZGlhLmZpbHRlcihmID0+IG1vbWVudChkYXRlKS5pc1NhbWVPckFmdGVyKGYuZmlyc3RUZXJtLnN0YXJ0RGF0ZSkgJiYgbW9tZW50KGRhdGUpLmlzU2FtZU9yQmVmb3JlKGYuc2Vjb25kVGVybS5lbmREYXRlKSlbMF0gYXMgTW9ja0VEU0FjYWRlbWljWWVhcjtcclxuICAgICAgY2FzZSAnc3YnOlxyXG4gICAgICB7XHJcbiAgICAgIHZhciBob2xpZGF5cyA9IFtdIGFzIE1vY2tFRFNEYXRlUmFuZ2VbXTtcclxuICAgICAgdmFyIGZpcnN0VGVybU1vbWVudCA9IGdldFRlcm1TdGFyRW5kRGF0ZShkYXRlLCB0cnVlKTtcclxuICAgICAgdmFyIHNlY29uZFRlcm1Nb21lbnQgPSBnZXRUZXJtU3RhckVuZERhdGUoZGF0ZSwgZmFsc2UpO1xyXG5cclxuICAgICAgdmFyIHN0YXJ0Rmlyc3RUZXJtRGF0ZSA9IGZpcnN0VGVybU1vbWVudFswXTtcclxuICAgICAgdmFyIHN0YXJ0U2Vjb25kVGVybURhdGUgPSBzZWNvbmRUZXJtTW9tZW50WzBdO1xyXG4gICAgICB2YXIgZW5kRmlyc3RUZXJtRGF0ZSA9IGZpcnN0VGVybU1vbWVudFsxXTtcclxuICAgICAgdmFyIGVuZFNlY29uZFRlcm1EYXRlID0gc2Vjb25kVGVybU1vbWVudFsxXTtcclxuXHJcbiAgICAgIGNvbnN0IGZpcnN0VGVybSA9IHtzdGFydERhdGU6IG5ldyBEYXRlKHN0YXJ0Rmlyc3RUZXJtRGF0ZS55ZWFyKCksIHN0YXJ0Rmlyc3RUZXJtRGF0ZS5tb250aCgpLCBzdGFydEZpcnN0VGVybURhdGUuZGF0ZSgpKS50b0RhdGVTdHJpbmcoKSwgZW5kRGF0ZTogbmV3IERhdGUoc3RhcnRGaXJzdFRlcm1EYXRlLnllYXIoKSwgZW5kRmlyc3RUZXJtRGF0ZS5tb250aCgpLCBlbmRGaXJzdFRlcm1EYXRlLmRhdGUoKSkudG9EYXRlU3RyaW5nKCl9O1xyXG4gICAgICBjb25zdCBzZWNvbmRUZXJtID0ge3N0YXJ0RGF0ZTogbmV3IERhdGUoc3RhcnRTZWNvbmRUZXJtRGF0ZS55ZWFyKCksIHN0YXJ0U2Vjb25kVGVybURhdGUubW9udGgoKSwgc3RhcnRTZWNvbmRUZXJtRGF0ZS5kYXRlKCkpLnRvRGF0ZVN0cmluZygpLCBlbmREYXRlOiBuZXcgRGF0ZShzdGFydFNlY29uZFRlcm1EYXRlLnllYXIoKSwgZW5kU2Vjb25kVGVybURhdGUubW9udGgoKSwgZW5kU2Vjb25kVGVybURhdGUuZGF0ZSgpKS50b0RhdGVTdHJpbmcoKX07XHJcbiAgICAgIHJldHVybiB7Zmlyc3RUZXJtLCBzZWNvbmRUZXJtLCBob2xpZGF5c307XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIEVEU1BlcmlvZCB7XHJcbiAgcGVyaW9kOiBzdHJpbmc7XHJcbiAgdGVybTogJ0FUJyB8ICdTVCc7XHJcbiAgeWVhcjogbnVtYmVyO1xyXG4gIGNvbnN0cnVjdG9yIChwZXJpb2RTdHJpbmdPclNjaG9vbFRlcm06IHN0cmluZyB8IFNjaG9vbE1vbWVudCkge1xyXG4gICAgaWYgKHR5cGVvZiBwZXJpb2RTdHJpbmdPclNjaG9vbFRlcm0gPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIHRoaXMucGVyaW9kID0gcGVyaW9kU3RyaW5nT3JTY2hvb2xUZXJtO1xyXG4gICAgICB0aGlzLnRlcm0gPSB0aGlzLnBlcmlvZC5zdGFydHNXaXRoKCdIVCcpID8gJ0FUJyA6ICdTVCc7XHJcbiAgICAgIHRoaXMueWVhciA9IHBhcnNlSW50KHRoaXMucGVyaW9kLnN1YnN0cigyKSk7XHJcbiAgICAgIGlmIChpc05hTih0aGlzLnllYXIpKSB0aHJvdyBuZXcgRXJyb3IgKGBJbnZhbGlkIHBlcmlvZDogJHt0aGlzLnBlcmlvZH1gKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IHNjaG9vbFRlcm0gPSBuZXcgU2Nob29sVGVybShwZXJpb2RTdHJpbmdPclNjaG9vbFRlcm0pO1xyXG4gICAgICB0aGlzLnBlcmlvZCA9IChzY2hvb2xUZXJtLnRlcm0gPT09ICdBVCcgPyBcIkhUXCIgOiBcIlZUXCIpICsgc2Nob29sVGVybS55ZWFyO1xyXG4gICAgICB0aGlzLnRlcm0gPSBzY2hvb2xUZXJtLnRlcm07XHJcbiAgICAgIHRoaXMueWVhciA9IHNjaG9vbFRlcm0ueWVhcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldCBzY2hvb2xUZXJtICgpIDogU2Nob29sVGVybSB7XHJcbiAgICByZXR1cm4gbmV3IFNjaG9vbFRlcm0oe1xyXG4gICAgICBhY2FkZW1pY1llYXI6IHRoaXMudGVybSA9PT0gJ0FUJyA/XHJcbiAgICAgICAgYCR7dGhpcy55ZWFyfS8ke3RoaXMueWVhciArIDF9YCA6XHJcbiAgICAgICAgYCR7dGhpcy55ZWFyLTF9LyR7dGhpcy55ZWFyfWAsXHJcbiAgICAgIHRlcm06IHRoaXMudGVybVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB0b1N0cmluZygpIHtcclxuICAgIHJldHVybiB0aGlzLnBlcmlvZDtcclxuICB9XHJcblxyXG4gIHZhbHVlT2YoKSB7XHJcbiAgICByZXR1cm4gdGhpcy55ZWFyICsgXCI6XCIgKyAodGhpcy50ZXJtID09PSAnU1QnID8gXCIxXCIgOiBcIjJcIik7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VKc29uRGF0ZV9vbGQgKGpzb25EYXRlU3RyOiBzdHJpbmcpIDogRGF0ZSB7XHJcbiAgY29uc3QgZGF0ZSA9IGRhdGVUaW1lUmV2aXZlcihcIlwiLCBqc29uRGF0ZVN0cik7XHJcbiAgaWYgKCEoZGF0ZSBpbnN0YW5jZW9mIERhdGUpKSB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEpTT04gZGF0ZSBzdHJpbmc6IFwiICsganNvbkRhdGVTdHIpO1xyXG4gIHJldHVybiBkYXRlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhdm9pZFNpbXVsdGFub3VzQ2FsbHM8VCxBPihtZXRob2Q6ICguLi5hcmdzOkFbXSk9PlByb21pc2U8VD4pIDogKC4uLmFyZ3M6QVtdKT0+UHJvbWlzZTxUPiB7XHJcbiAgbGV0IG9uZ29pbmdQcm9taXNlczoge1thcmdzSnNvbjogc3RyaW5nXTogUHJvbWlzZTxUPn0gPSB7fTtcclxuICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICBjb25zdCBhcmdzSnNvbiA9IEpTT04uc3RyaW5naWZ5KFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKSk7XHJcbiAgICBpZiAoIW9uZ29pbmdQcm9taXNlc1thcmdzSnNvbl0pIHtcclxuICAgICAgb25nb2luZ1Byb21pc2VzW2FyZ3NKc29uXSA9IG1ldGhvZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpLnRoZW4ocmVzdWx0PT57XHJcbiAgICAgICAgZGVsZXRlIG9uZ29pbmdQcm9taXNlc1thcmdzSnNvbl07XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb25nb2luZ1Byb21pc2VzW2FyZ3NKc29uXTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgR29vZ2xlV2ViQ2xpZW50IH0gZnJvbSAnLi9nb29nbGUtd2ViY2xpZW50JztcclxuaW1wb3J0IHsgbW9ja1R1aXRpb25TdHVkZW50cyB9IGZyb20gJy4vbW9jay9tb2NrLWNsYXNzcm9vbS1kYXRhJztcclxuaW1wb3J0IHsgRURTVHVpdGlvblN0dWRlbnQgfSBmcm9tICcuLi9jb250cmFjdHMvZWRzJztcclxuaW1wb3J0IHsgZW52IH0gZnJvbSAnLi4vZ2xvYmFscy9LRUQuZW52JztcclxuaW1wb3J0IHsgY2ZnIH0gZnJvbSAnLi4vZ2xvYmFscy9LRUQuY2ZnJztcclxuXHJcbmludGVyZmFjZSBHQVNGaWVsZHMge1xyXG4gIGZ1bmN0aW9uOiBzdHJpbmc7XHJcbiAgcGFyYW1ldGVycz86IGFueVtdO1xyXG4gIGRldk1vZGU/OiBib29sZWFuO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiogXHJcbiovXHJcbmV4cG9ydCBjbGFzcyBDbGFzc3Jvb21TeW5jIGV4dGVuZHMgR29vZ2xlV2ViQ2xpZW50IHtcclxuICBcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHN1cGVyKFsnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC9kcml2ZScsXHJcbiAgICAgICdodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL2NsYXNzcm9vbS5jb3Vyc2VzJyxcclxuICAgICAgJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvY2xhc3Nyb29tLnByb2ZpbGUucGhvdG9zJyxcclxuICAgICAgJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvY2xhc3Nyb29tLnByb2ZpbGUuZW1haWxzJyxcclxuICAgICAgJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvY2xhc3Nyb29tLnJvc3RlcnMnLFxyXG4gICAgICAnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC9jbGFzc3Jvb20ucm9zdGVycy5yZWFkb25seScsXHJcbiAgICAgICdodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL2NsYXNzcm9vbS5jb3Vyc2V3b3JrLnN0dWRlbnRzJyxcclxuICAgICAgJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvc2NyaXB0LmV4dGVybmFsX3JlcXVlc3QnXHJcbiAgICBdKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICogXHJcbiAgKiBAcGFyYW0gZnVuYyBmdW5jdGlvbiBuYW1lIHRvIGNhbGwgaW4gQ2xhc3Nyb29tU2VydmljZVxyXG4gICogQHBhcmFtIHBhcmFtcyBvcHRpb25hbCBwYXJhbWV0ZXJzIHRvIHNlbmQgdG8gZnVuY3Rpb25cclxuICAqIFxyXG4gICogQ2FsbHMgdGhlIHJlbGV2YW50IGZ1bmNpdG9uIGluIENsYXNzcm9vbVNlcnZpY2VcclxuICAqIFRoZSBwYXJhbWF0ZXJzIG11c3QgYmUgd2hhdCBpcyBleHBlY3RlZCBpbiB0aGUgY2FsbGVkIGZ1bmN0aW9uXHJcbiAgKiBpbiBDbGFzc3Jvb21TZXJ2aWNlIGFuZCBjYW4gb25seSBiZSBiYXNpYyB0eXBlczogc3RyaW5nLFxyXG4gICogbnVtYmVyLCBvYmplY3Qgb3IgYm9vbGVhbi5cclxuICAqIFxyXG4gICovXHJcbiAgYXN5bmMgY2FsbFN5bmMoZnVuYzpzdHJpbmcsIHBhcmFtcz86YW55W10pIHtcclxuICAgIGF3YWl0IHRoaXMuZW5zdXJlSW5pdGVkKCk7XHJcbiAgXHJcbiAgICBjb25zdCBkYXRhOkdBU0ZpZWxkcyA9IHBhcmFtcz8ge1xyXG4gICAgICAnZnVuY3Rpb24nOiBmdW5jLFxyXG4gICAgICAncGFyYW1ldGVycyc6IHBhcmFtc1xyXG4gICAgfSA6IHtcclxuICAgICAgJ2Z1bmN0aW9uJzogZnVuY1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgLy8gdXNpbmcgZGV2LW1vZGUgcmlnaHQgbm93IHNvIHdlIG9ubHkgbmVlZCB0byBydW4gY2xhc3AgcHVzaCBvbiBDbGFzc3Jvb21TZXJ2aWNlXHJcbiAgICAvLyB0byBiZSBhYmxlIHRvIHVzZSBkZXZNb2RlIHRoZSB1c2VyIGNhbGxpbmcgdGhlIHNjcmlwdCBuZWVkcyB0byBiZSBhbiBlZGl0b3Igb24gdGhlXHJcbiAgICAvLyBwcm9qZWN0IGluIEdBU1xyXG4gICAgZGF0YS5kZXZNb2RlID0gY2ZnLkVOVklST05NRU5UICE9PSAncHJvZHVjdGlvbic7XHJcbiAgICBcclxuICAgIHJldHVybiBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9zY3JpcHQuZ29vZ2xlYXBpcy5jb20vdjEvc2NyaXB0cy9NMUgwQmxUa3Y5ODNQTlZUSmpEWGpOcVhMeG1RaUJnR3o6cnVuP2FsdD1qc29uJywge1xyXG4gICAgICBtZXRob2Q6ICdwb3N0JyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHRoaXMuYXV0aFRva2VuXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpXHJcbiAgICB9KS50aGVuKFxyXG4gICAgICByZXNwID0+IHJlc3AuanNvbigpXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbi8qKlxyXG4qIFxyXG4qIEBwYXJhbSBwYXJhbTAgXHJcbiovXHJcbmFzeW5jIGluaXRTeW5jKGNvdXJzZSwgb3JpZ0NvdXJzZSwgZnVsbFN5bmNOZWVkZWQpIHtcclxuICBcclxuICAvLyBNb2NrLWRhdGEgZm9yIEtFRFxyXG4gIGNvbnN0IGVtcHR5T3JNb2NrID0ge307XHJcbiAgXHJcbiAgaWYgKGNvdXJzZS5zY2hvb2wgPT09ICdLRUQnKSB7XHJcbiAgICBmb3IgKGNvbnN0IGdyb3VwIG9mIGNvdXJzZS5zdHVkeUdyb3Vwcykge1xyXG4gICAgICBlbXB0eU9yTW9ja1tncm91cF0gPSBtb2NrVHVpdGlvblN0dWRlbnRzW2dyb3VwXT8gbW9ja1R1aXRpb25TdHVkZW50c1tncm91cF0ubWFwKHMgPT4gcy5zdHVkZW50RW1haWxBZGRyZXNzKSA6IFtdO1xyXG4gICAgfVxyXG4gIH1cclxuICAvLyAtLSBtb2NrXHJcbiAgXHJcbiAgLy8gR2V0IGVkc1NjaG9vbE5hbWUgZnJvbSBLZWRCYWNrZW5kOlxyXG4gIGNvbnN0IGRhdGEgPSBhd2FpdCBlbnYua2VkQmFja2VuZENsaWVudC5odHRwLmdldCgnc2Nob29scycsIHsnY2FjaGVCdXN0JzogJ3N0YXRpYycsICduYW1lJzogY291cnNlLnNjaG9vbH0pLnRoZW4ocmVzcCA9PiAgcmVzcC5qc29uKCkpO1xyXG4gIGNvbnN0IHtlZHNTY2hvb2xOYW1lR3ltbn0gPSBkYXRhWzBdO1xyXG4gIFxyXG4gIGNvbnN0IHN0dWR5R3JvdXBTdHVkZW50cyA9IGVkc1NjaG9vbE5hbWVHeW1uPyB7fSA6IGVtcHR5T3JNb2NrO1xyXG4gIFxyXG4gIC8vIEdldCBhbmQgbWVyZ2Ugc3R1ZGVudHMgZnJvbSBFRFMgdHVpdGlvbiBncm91cHM6XHJcbiAgaWYgKGNvdXJzZS5zdHVkeUdyb3Vwcykge1xyXG4gICAgaWYgKGVkc1NjaG9vbE5hbWVHeW1uKSB7XHJcbiAgICAgIGZvciAoY29uc3QgZ3JvdXAgb2YgY291cnNlLnN0dWR5R3JvdXBzKSB7XHJcbiAgICAgICAgY29uc3QgdHVpdGlvbkdyb3VwU3R1ZGVudHM6IEVEU1R1aXRpb25TdHVkZW50W10gPSBhd2FpdCBlbnYuZWRzQ2xpZW50LmdldFR1aXRpb25Hcm91cFN0dWRlbnRzKHtzY2hvb2xOYW1lOiBlZHNTY2hvb2xOYW1lR3ltbiwgdHVpdGlvbkdyb3VwTmFtZTogZ3JvdXB9KVxyXG4gICAgICAgIHN0dWR5R3JvdXBTdHVkZW50c1tncm91cF3CoD0gdHVpdGlvbkdyb3VwU3R1ZGVudHMubWFwKHMgPT4gcy5zdHVkZW50RW1haWxBZGRyZXNzKTtcclxuICAgICAgfVxyXG4gICAgfSBcclxuICB9XHJcbiAgXHJcbiAgLy8gY3JlYXRlIGEgc3Vic2V0IG9mIHRoZSBjb3Vyc2UgYWFuZCBjYWFsY3VsYXRlIGNoYW5nZXNcclxuICBjb25zdCB7c3Vic2V0LCBjaGFuZ2VzLCBhY3Rpb259ID0gdGhpcy5kaWZmQ291cnNlKGNvdXJzZSwgb3JpZ0NvdXJzZSwgZnVsbFN5bmNOZWVkZWQpO1xyXG4gIFxyXG4gIC8vIHNlbmQgdGhlIGNoYW5nZXMgdG8gY2xhc3Nyb29tLXNlcnZpY2Ugd2l0aCB7aWQsIHNjaG9vbCBjb2RlfSB0byB1cGRhdGUgY2xhc3Nyb29tc1xyXG4gIC8vIHNob3VsZCB3ZSBzZW5kIHRoZSB1c2VycyBmcm9tIHRoZSBncm91cHMgb3Igc2hvdWxkIGNsYXNzcm9vbS1zZXJ2aWNlIGdldCB0aGVzZSBmcm9tIEVEUz9cclxuICAvLyBpZiB3ZSBoYW5kbGUgdXNlcnMgaW4ga2VkY29tcG9uZW50cyBhIGNoZWNrIGlmIHRoZXJlIGFyZSBjaGFuZ2VzIHNob3VsZCBwcm9iYWJseSBiZSBtYWRlP1xyXG4gIGNvbnNvbGUubG9nKHN1YnNldCk7XHJcbiAgY29uc29sZS5sb2coc3R1ZHlHcm91cFN0dWRlbnRzKTtcclxuICBcclxuICBpZiAoYWN0aW9uID09ICdmdWxsJykge1xyXG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlQ2xhc3Nyb29tKHN1YnNldCwgc3R1ZHlHcm91cFN0dWRlbnRzKTtcclxuICB9IGVsc2UgaWYgKGFjdGlvbiA9PSAndXBkYXRlJykge1xyXG4gICAgcmV0dXJuIHRoaXMudXBkYXRlQ2xhc3Nyb29tKHtjb3Vyc2U6IHN1YnNldCwgY2hhbmdlcywgc3R1ZHlHcm91cFN0dWRlbnRzfSk7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuYXN5bmMgYXJjaGl2ZShjb3Vyc2UpIHtcclxuICBjb25zb2xlLmxvZygnYXJjaGl2aW5nJyk7XHJcbiAgcmV0dXJuIHRoaXMuY2FsbFN5bmMoJ2FyY2hpdmUnLCBbY291cnNlXSk7XHJcbn1cclxuXHJcblxyXG5hc3luYyBkZWxldGUoc3Vic2V0KSB7XHJcbiAgY29uc29sZS5sb2coJ2RlbGV0ZWluZycpO1xyXG4gIHJldHVybiB0aGlzLmNhbGxTeW5jKCdkZWxldGVDbGFzc3Jvb21zJywgW3N1YnNldF0pO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiogXHJcbiogQHBhcmFtIGNvdXJzZSBjdXJyZW50IGNvdXJzZSBzdGF0ZVxyXG4qIEBwYXJhbSBvcmlnQ291cnNlIHByZXZpb3VzIGNvdXJzZSBzdGF0ZVxyXG4qIFxyXG4qIENyZWF0ZXMgYSBzdWJzZXQgb2YgY291cnNlIGFuZCBtYWFrZXMgYSBkaWZmIGFnYWluc3QgcHJldmlvdXMgY291cnNlIHN0YXRlXHJcbiogTm90ZTogdGhlcmUgYXJlIHByb2JhYmx5IG1vcmUgd2UgY291bGQgZmlsdGVyIG91dCBiZWZvcmUgc2VuZGluZyB0byBDbGFzYXNyb29tU2VydmljZVxyXG4qL1xyXG5kaWZmQ291cnNlKGNvdXJzZSwgb3JpZ0NvdXJzZSwgZnVsbFN5bmNOZWVkZWQpIHtcclxuICAvLyBGaWx0ZXIgb3V0IGFzc2lnbm1lbnRzIGZyb20gdGFza3MgYW5kIHN1YnNldCB0byBvbmx5IHByb3BlcnRpZXMgd2UgYXJlIGludGVyZXN0ZWQgaW5cclxuICBjb25zdCBzdWJzZXRBc3NpZ25tZW50cyA9ICh0YXNrcykgPT4ge1xyXG4gICAgY29uc3QgYXNzaWdubWVudHMgPSB0YXNrcy5maWx0ZXIodCA9PiB0LmFzc2lnbm1lbnQgPT09IHRydWUpO1xyXG4gICAgcmV0dXJuIGFzc2lnbm1lbnRzLm1hcCh0ID0+IHtcclxuICAgICAgY29uc3Qge2Fzc2lnbm1lbnQsIGRlYWRsaW5lLCBpZCwgbmFtZSwgcmVzb3VyY2VzLCB0ZW1wbGF0ZUZpbGV9ID0gdDtcclxuICAgICAgcmV0dXJuIHthc3NpZ25tZW50LCBkZWFkbGluZSwgaWQsIG5hbWUsIHJlc291cmNlcywgdGVtcGxhdGVGaWxlfTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBcclxuICAvLyBjcmVhdGUgdGhlIHN1YnNldCBvZiBjb3Vyc2VcclxuICBjb25zdCBzdWJzZXQgPSAoKHtcclxuICAgIGlkLFxyXG4gICAgc2Nob29sLFxyXG4gICAgY29kZSxcclxuICAgIG5hbWUsXHJcbiAgICBkZXNjcmlwdGlvbixcclxuICAgIHRhc2tzLFxyXG4gICAgcmVzcG9uc2libGVUZWFjaGVycyxcclxuICAgIHN0dWR5R3JvdXBzfSkgPT4gKHsgXHJcbiAgICAgIGlkLFxyXG4gICAgICBzY2hvb2wsXHJcbiAgICAgIGNvZGUsXHJcbiAgICAgIG5hbWUsXHJcbiAgICAgIGRlc2NyaXB0aW9uLFxyXG4gICAgICB0YXNrcyxcclxuICAgICAgcmVzcG9uc2libGVUZWFjaGVycyxcclxuICAgICAgc3R1ZHlHcm91cHN9KVxyXG4gICAgKShjb3Vyc2UpO1xyXG4gICAgICBcclxuICAgIC8vIG9ubHkgaGFuZGxlIHRzYWtzIHRoYXQgYXJlIGFhc3NpZ25tZW50c1xyXG4gICAgKHN1YnNldC50YXNrcyBhcyBhbnlbXSkgPSBzdWJzZXRBc3NpZ25tZW50cyhzdWJzZXQudGFza3MpO1xyXG4gICAgICBcclxuICAgIGNvbnN0IGNoYW5nZXMgPSBvcmlnQ291cnNlPyB7XHJcbiAgICAgIHRhc2tzOiBzdWJzZXRBc3NpZ25tZW50cyhvcmlnQ291cnNlLnRhc2tzKSxcclxuICAgICAgcmVzcG9uc2libGVUZWFjaGVyczogb3JpZ0NvdXJzZS5yZXNwb25zaWJsZVRlYWNoZXJzLFxyXG4gICAgICBzdHVkeUdyb3Vwczogb3JpZ0NvdXJzZS5zdHVkeUdyb3Vwc1xyXG4gICAgfSA6IGZhbHNlO1xyXG5cclxuICAgIHJldHVybiB7c3Vic2V0LCBjaGFuZ2VzLCBhY3Rpb246IFwidXBkYXRlXCJ9O1xyXG4gIH1cclxuICAgIFxyXG4gIGFzeW5jIGNyZWF0ZUNsYXNzcm9vbShjb3Vyc2UsIHN0dWR5R3JvdXBTdHVkZW50cykge1xyXG4gICAgcmV0dXJuIHRoaXMuY2FsbFN5bmMoJ2NyZWF0ZUNsYXNzcm9vbXMnLCBbY291cnNlLCBzdHVkeUdyb3VwU3R1ZGVudHNdKTtcclxuICB9XHJcbiAgICBcclxuICBhc3luYyB1cGRhdGVDbGFzc3Jvb20oe2NvdXJzZSwgY2hhbmdlcywgc3R1ZHlHcm91cFN0dWRlbnRzfSkge1xyXG4gICAgcmV0dXJuIHRoaXMuY2FsbFN5bmMoJ3VwZGF0ZUNsYXNzcm9vbXMnLCBbY291cnNlLCBjaGFuZ2VzLCBzdHVkeUdyb3VwU3R1ZGVudHNdKTtcclxuICB9XHJcbn1cclxuICAiLCJpbXBvcnQgeyBCZWFyZXJQcm92aWRlciB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcclxuaW1wb3J0IHsgZW52IH0gZnJvbSAnLi4vZ2xvYmFscy9LRUQuZW52JztcclxuXHJcbmV4cG9ydCBjbGFzcyBHb29nbGVDbGllbnQge1xyXG4gIHRva2VuRXhwaXJhdGlvbjogRGF0ZTtcclxuICBnb29nbGVUb2tlblByb3ZpZGVyOiBCZWFyZXJQcm92aWRlcjtcclxuICBkaXNjb3ZlcnlEb2NzOiBzdHJpbmdbXTtcclxuICB0b2tlbjogc3RyaW5nO1xyXG5cclxuICBjb25zdHJ1Y3RvcihkaXNjb3ZlcnlEb2NzOiBzdHJpbmcpIHtcclxuICAgIHRoaXMuZ29vZ2xlVG9rZW5Qcm92aWRlciA9IGVudi5nb29nbGVUb2tlblByb3ZpZGVyO1xyXG4gICAgdGhpcy5kaXNjb3ZlcnlEb2NzID0gW107XHJcbiAgICB0aGlzLmRpc2NvdmVyeURvY3MucHVzaChkaXNjb3ZlcnlEb2NzKTtcclxuICB9XHJcblxyXG4gIHNldEJlYXJlclByb3ZpZGVyKGdvb2dsZVRva2VuUHJvdmlkZXI6IEJlYXJlclByb3ZpZGVyKSB7XHJcbiAgICB0aGlzLmdvb2dsZVRva2VuUHJvdmlkZXIgPSBnb29nbGVUb2tlblByb3ZpZGVyO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZW5zdXJlSW5pdGVkKCkge1xyXG4gICAgLy8gTG9hZCBHQVBJXHJcbiAgICBpZiAodHlwZW9mIGdhcGkgPT09ICd1bmRlZmluZWQnKSBhd2FpdCB0aGlzLmxvYWRHYXBpKCk7XHJcblxyXG4gICAgLy8gU2V0IHRva2VuXHJcbiAgICBpZiAoIXRoaXMudG9rZW5FeHBpcmF0aW9uIHx8IHRoaXMudG9rZW5FeHBpcmF0aW9uIDwgbmV3IERhdGUoKSkge1xyXG4gICAgICBjb25zdCB0b2tlblJlc3VsdCA9IGF3YWl0IHRoaXMuZ29vZ2xlVG9rZW5Qcm92aWRlci5nZXRCZWFyZXIoKTtcclxuICAgICAgdGhpcy50b2tlbkV4cGlyYXRpb24gPSBuZXcgRGF0ZSh0b2tlblJlc3VsdC5leHBpcmVzKTtcclxuICAgICAgdGhpcy50b2tlbiA9IHRva2VuUmVzdWx0LnRva2VuO1xyXG4gICAgICBnYXBpLmNsaWVudC5zZXRUb2tlbih7XHJcbiAgICAgICAgYWNjZXNzX3Rva2VuOiB0b2tlblJlc3VsdC50b2tlblxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gTG9hZCBhbGwgZGlzY292eWVyRG9jc1xyXG4gICAgYXdhaXQgZ2FwaS5jbGllbnQuaW5pdCh7XHJcbiAgICAgIGRpc2NvdmVyeURvY3M6IHRoaXMuZGlzY292ZXJ5RG9jc1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBsb2FkR2FwaSgpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICBpZiAodHlwZW9mIGdhcGkgIT09ICd1bmRlZmluZWQnKSByZXR1cm4gcmVzb2x2ZSgpO1xyXG4gICAgICBjb25zdCBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuICAgICAgc2NyaXB0LnNyYyA9IFwiaHR0cHM6Ly9hcGlzLmdvb2dsZS5jb20vanMvY2xpZW50LmpzP29ubG9hZD1nYWFwaV9sb2FkZWRcIjtcclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdLmFwcGVuZENoaWxkKHNjcmlwdCk7XHJcbiAgICAgICh3aW5kb3cgYXMgYW55KS5nYWFwaV9sb2FkZWQgPSByZXNvbHZlO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IEdvb2dsZUNsaWVudCB9IGZyb20gJy4vZ29vZ2xlLWNsaWVudCc7XHJcblxyXG5pbnRlcmZhY2UgZG93bmxvYWRBcmdzIHtcclxuICBmaWxlOiBzZWxlY3RlZEZpbGU7XHJcbiAgbGltaXRTaXplPzogbnVtYmVyO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBzZWxlY3RlZEZpbGUge1xyXG4gIGZpbGVJZDogc3RyaW5nO1xyXG4gIHVybDogc3RyaW5nO1xyXG4gIG1pbWVUeXBlOiBzdHJpbmc7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIG1vZGlmaWVkVGltZTogbnVtYmVyO1xyXG4gIGNhbkV4cG9ydD86IGJvb2xlYW47XHJcbiAgaWNvblVybD86IHN0cmluZztcclxuICB0aHVtYm5haWxVcmw/OiBzdHJpbmc7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgY2xhc3MgR29vZ2xlRHJpdmUgZXh0ZW5kcyBHb29nbGVDbGllbnQge1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHN1cGVyKCdodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9kaXNjb3ZlcnkvdjEvYXBpcy9kcml2ZS92My9yZXN0Jyk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRGaWxlKGZpbGVJZCkge1xyXG4gICAgYXdhaXQgdGhpcy5lbnN1cmVJbml0ZWQoKTtcclxuICAgIHJldHVybiBnYXBpLmNsaWVudC5kcml2ZS5maWxlcy5nZXQoPGFueT57XHJcbiAgICAgIGZpbGVJZDogZmlsZUlkLFxyXG4gICAgICBzdXBwb3J0c0FsbERyaXZlczogdHJ1ZSxcclxuICAgICAgZmllbGRzOiAnaWQsbmFtZSxtaW1lVHlwZSx3ZWJWaWV3TGluayxpY29uTGluayxtb2RpZmllZFRpbWUsdGh1bWJuYWlsTGluaydcclxuICAgIH0pLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgIGlmIChyZXNwLnJlc3VsdC5uYW1lKSB7XHJcbiAgICAgICAgdmFyIGZpbGUgPSByZXNwLnJlc3VsdDtcclxuICAgICAgICByZXR1cm4ge2ZpbGVJZDogZmlsZS5pZCwgdXJsOiBmaWxlLndlYlZpZXdMaW5rLCBtaW1lVHlwZTogZmlsZS5taW1lVHlwZSwgbmFtZTogZmlsZS5uYW1lLCBtb2RpaWZpZWRUaW1lOiBmaWxlLm1vZGlmaWVkVGltZSwgaWNvblVybDogZmlsZS5pY29uTGluaywgdGh1bWJuYWlsVXJsOiBmaWxlLnRodW1ibmFpbExpbmt9O1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogdXBkYXRlUGVybWlzc2lvbnMoKVxyXG4gICAqIFxyXG4gICAqIEBwYXJhbSBmaWxlSWQgXHJcbiAgICogXHJcbiAgICogTWFrZSB0aGUgZmlsZSBhY2Nlc3NpYmxlIHRvIGFsbCBpbiB0aGUgZG9tYWluLiBTaG91bGQgYmUgdW5uZWNlc3NhcnkgYnV0IHNvbWVcclxuICAgKiB0ZWFjaGVycyBoYXZlIGNoYW5nZWQgdGhlaXIgZGVmYXVsdCBwZXJtaXNzaW9ucy5cclxuICAgKiBXZSBkb24ndCBjYXJlIHJpZ2h0IG5vdyBpZiB0aGlzIGZhaWxzIGJlY2F1c2UgdGhpcyBpcyBqdXN0IGFuIGV4dHJhIHByZWNhdXRpb24uXHJcbiAgICogSWYgd2UgcGxhbiBvbiB1c2luZyB0aGlzIG9uIG90aGVyIGRvbWFpbnMgdGhlIGRvbWFpbi1hdHRyaWJ1dGUgbmVlZHMgdG8gYmUgZHluYW1pYy5cclxuICAgKiBcclxuICAgKi9cclxuICBhc3luYyB1cGRhdGVQZXJtaXNzaW9ucyhmaWxlSWQpIHtcclxuICAgIGNvbnNvbGUubG9nKCd1cGRhdGluZyBwZXJtaXNzaW9ucycpXHJcbiAgICBhd2FpdCB0aGlzLmVuc3VyZUluaXRlZCgpO1xyXG4gICAgZ2FwaS5jbGllbnQuZHJpdmUucGVybWlzc2lvbnMuY3JlYXRlKDxhbnk+e1xyXG4gICAgICBmaWxlSWQ6IGZpbGVJZCxcclxuICAgICAgc2VuZE5vdGlmaWNhdGlvbkVtYWlsOiBmYWxzZSxcclxuICAgICAgcm9sZTogJ3JlYWRlcicsXHJcbiAgICAgIHR5cGU6ICdhbnlvbmUnLCAvLyBvciBzaG91bGQgd2UgbGltaXQgdG8gZG9tYWluIChlcnJvciBpZiBpbiBLZWRzY2hvb2xzLmNvbSlcclxuICAgICAgLy8gdHlwZTogJ2RvbWFpbicsIFxyXG4gICAgICAvLyBkb21haW46ICdrdW5za2Fwc3Nrb2xhbi5zZSdcclxuICAgICAgc3VwcG9ydHNBbGxEcml2ZXM6IHRydWVcclxuICAgIH0pLnRoZW4ocmVzcCA9PiBjb25zb2xlLmxvZyhyZXNwKSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBjcmVhdGVGb2xkZXIobmFtZSwgcGFyZW50KcKge1xyXG4gICAgY29uc29sZS5sb2coJ0NyZWF0aW5nIGZvbGRlciAnICsgbmFtZSk7XHJcbiAgICBhd2FpdCB0aGlzLmVuc3VyZUluaXRlZCgpO1xyXG4gICAgcmV0dXJuIGdhcGkuY2xpZW50LmRyaXZlLmZpbGVzLmNyZWF0ZSg8YW55PntcclxuICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgbWltZVR5cGU6ICdhcHBsaWNhdGlvbi92bmQuZ29vZ2xlLWFwcHMuZm9sZGVyJyxcclxuICAgICAgcGFyZW50czogW3BhcmVudF1cclxuICAgIH0pLnRoZW4ocmVzcCA9PiByZXNwLnJlc3VsdCk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRJZEZvckZvbGRlclBhdGgocGF0aDogc3RyaW5nW10pIHtcclxuICAgIGNvbnNvbGUubG9nKCdHZXR0aW5nIGlkIGZvciAnICsgcGF0aC5qb2luKCcvJykpO1xyXG4gICAgYXdhaXQgdGhpcy5lbnN1cmVJbml0ZWQoKTtcclxuICAgIGxldCBwYXJlbnQgPSAncm9vdCc7XHJcbiAgICBmb3IgKHZhciBmb2xkZXIgb2YgcGF0aCkge1xyXG4gICAgICBjb25zdCBmb2xkZXJJZCA9IGF3YWl0IHRoaXMuZ2V0SWRGb3JGb2xkZXIoZm9sZGVyLCBwYXJlbnQpO1xyXG4gICAgICBpZiAoZm9sZGVySWQpIHtcclxuICAgICAgICBwYXJlbnQgPSBmb2xkZXJJZDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zdCBuZXdGb2xkZXIgPSBhd2FpdCB0aGlzLmNyZWF0ZUZvbGRlcihmb2xkZXIsIHBhcmVudCk7XHJcbiAgICAgICAgcGFyZW50ID0gbmV3Rm9sZGVyLmlkO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcGFyZW50O1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0SWRGb3JGb2xkZXIobmFtZTogc3RyaW5nLCBwYXJlbnQ6IHN0cmluZykge1xyXG4gICAgY29uc29sZS5sb2coJ0dldHRpbmcgaWQgZm9yICcgKyBuYW1lKTtcclxuICAgIGF3YWl0IHRoaXMuZW5zdXJlSW5pdGVkKCk7XHJcbiAgICByZXR1cm4gZ2FwaS5jbGllbnQuZHJpdmUuZmlsZXMubGlzdCh7XHJcbiAgICAgIGNvcnBvcmE6ICd1c2VyJyxcclxuICAgICAgcTogXCInXCIrcGFyZW50K1wiJyBpbiBwYXJlbnRzIGFuZCBtaW1lVHlwZSA9ICdhcHBsaWNhdGlvbi92bmQuZ29vZ2xlLWFwcHMuZm9sZGVyJyBhbmQgbmFtZSA9ICdcIituYW1lK1wiJ1wiXHJcbiAgICB9KS50aGVuKHJlc3AgPT4ge1xyXG4gICAgICBpZiAocmVzcC5yZXN1bHQuZmlsZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlc3AucmVzdWx0LmZpbGVzWzBdLmlkO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBjb3B5RmlsZShmaWxlLCBkZXN0aW5hdGlvbikge1xyXG4gICAgY29uc29sZS5sb2coJ0NvcHlpbmcgZmlsZTogJyArIGZpbGUubmFtZSk7XHJcbiAgICBhd2FpdCB0aGlzLmVuc3VyZUluaXRlZCgpO1xyXG4gICAgaWYgKGRlc3RpbmF0aW9uKSB7XHJcbiAgICAgIGNvbnN0IHBhcmVudCA9IGF3YWl0IHRoaXMuZ2V0SWRGb3JGb2xkZXJQYXRoKGRlc3RpbmF0aW9uKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IHBhcmVudCA9ICdyb290JztcclxuICAgIH1cclxuICAgIHJldHVybiBnYXBpLmNsaWVudC5kcml2ZS5maWxlcy5jb3B5KDxhbnk+e1xyXG4gICAgICBmaWxlSWQ6IGZpbGUuaWQsXHJcbiAgICAgIHN1cHBvcnRzQWxsRHJpdmVzOiB0cnVlLFxyXG4gICAgICBwYXJlbnRzOiBbcGFyZW50XSxcclxuICAgICAgbmFtZTogZmlsZS5uYW1lLFxyXG4gICAgICBmaWVsZHM6ICdpZCxuYW1lLG1pbWVUeXBlLHdlYlZpZXdMaW5rLGljb25MaW5rLG1vZGlmaWVkVGltZSx0aHVtYm5haWxMaW5rJ1xyXG4gICAgfSkudGhlbihyZXNwID0+IHJlc3AucmVzdWx0KTtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBkb3dubG9hZEZpbGUoKVxyXG4gICAqIEBwYXJhbSBmaWxlIFxyXG4gICAqIFxyXG4gICAqIFdoZW4gQ2xhc3Nyb29tIGhhcyBiZWVuIGludGVncmF0ZWQgd2Ugd2lsbCB3YW50IHRvIGhhbmRsZSBvbmx5IHRoZSBmaWxlSWQ6c1xyXG4gICAqIHNvIHRoYXQgZWRpdGluZyBjYXBhYmlsaXRpZXMgYXJlIHBlc2VydmVkIG9uIHRoZSBmaWxlIChpZiBpdCBpcyBhIGdvb2dsZS1hcHBzIGZpbGUpXHJcbiAgICogUmlnaHQgbm93IGdvb2dsZS1hcHBzIGZpbGVzIGFyZSBjb252ZXJ0ZWQgdG8gcGRmIGFuZCBwYXNzZWQgaW50byB0aGUgY3VycmVudCBmbG93LlxyXG4gICAqIFxyXG4gICAqIFRPRE86IGVycm9yIGhhbmRsaW5nXHJcbiAgICovXHJcblxyXG4gIGFzeW5jIGRvd25sb2FkRmlsZSh7ZmlsZSwgbGltaXRTaXplfTpkb3dubG9hZEFyZ3MpIHtcclxuICAgIC8vIEEgZmlsZSB0aGF0IGNhbiBiZSBleHBvcnRlZCB0byBQREYgaXMgcmV0cmVpdmVkIHdpdGhcclxuICAgIC8vIGZpbGUuZXhwb3J0KCkgZnJvbSBEcml2ZSwgY29udmVydGVkIHRvIGEgYmxvYiBhbmQgdGhlblxyXG4gICAgLy8gdG8gYSBGaWxlLlxyXG4gICAgLy8gQSBmaWxlIHRoYXQgY2FuIG5vdCBiZSBleHBvcnRlZCB0byBQREYgaXMgcmV0cmlldmVkXHJcbiAgICAvLyB0aHJvdWdoIFhIUiBhbmQgY29udmVydGVkIHRvIGEgRmlsZS5cclxuXHJcbiAgICAvLyBJZiB3ZSBkb24ndCBuZWVkIHRvIGhhbmRsZSB0aGUgcGh5c2ljYWwgZmlsZXMgb24gdGhlIGNsaWVudFxyXG4gICAgLy8gd2UgY291bGQgc2F2ZSBvbmx5IHRoZSBmaWxlSWQ6cyBhbmQgZGlzcGxheSBmaWxlbmFtZSBhbmQgbWltZVR5cGVcclxuICAgIC8vIGZvciB0aGUgZmlsZSBpbiBvdXIgbGlzdGluZ3MuIFdoZW4vaWYgd2UgdXNlIEdvb2dsZSBDbGFzc3Jvb20gZm9yXHJcbiAgICAvLyBvdXIgdGFzay1oYW5kbGluZyB0aGF0IHdvdWxkIGJlIHRoZSBwcmVmZXJyZWQgYXBwcm9hY2ggdG8ga2VlcFxyXG4gICAgLy8gdGhlIGZpbGUgYXMgYW4gZWRpdGFibGUgR29vZ2xlIGZpbGVcclxuXHJcbiAgICAvLyBJbml0IHRoZSBkcml2ZS1hcGkgKG9ubHkgbmVlZGVkIGZvciBkb3dubG9hZCBzbyBub3QgbG9hZGVkIGluaXRpYWxseSlcclxuICAgIGF3YWl0IHRoaXMuZW5zdXJlSW5pdGVkKCk7XHJcblxyXG4gICAgaWYgKGZpbGUuY2FuRXhwb3J0KSB7XHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxGaWxlPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgZ2FwaS5jbGllbnQuZHJpdmUuZmlsZXMuZXhwb3J0KHtcclxuICAgICAgICAgIGZpbGVJZDogZmlsZS5maWxlSWQsXHJcbiAgICAgICAgICBtaW1lVHlwZTogJ2FwcGxpY2F0aW9uL3BkZid9XHJcbiAgICAgICAgKS50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgY29uc3QgbGVuID0gcmVzcC5ib2R5Lmxlbmd0aDtcclxuICAgICAgICAgIGNvbnN0IGRhdGEgPSBuZXcgVWludDhBcnJheShuZXcgQXJyYXlCdWZmZXIobGVuKSk7XHJcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGRhdGFbaV0gPSByZXNwLmJvZHkuY2hhckNvZGVBdChpKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbZGF0YV0sIHt0eXBlOiAnYXBwbGljYXRpb24vcGRmJ30pO1xyXG4gICAgICAgICAgY29uc3QgZmlsZW5hbWUgPSBmaWxlLm5hbWUrJy5wZGYnO1xyXG4gICAgICAgICAgcmVzb2x2ZShuZXcgRmlsZShbYmxvYl0sIGZpbGVuYW1lLCB7dHlwZTogJ2FwcGxpY2F0aW9uL3BkZicsIGxhc3RNb2RpZmllZDogZmlsZS5tb2RpZmllZFRpbWV9KSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgfSk7ICBcclxuICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAvLyBhIGZpbGUgdGhhdCBpc24ndCBhIGdvb2dsZS1hcHBzIGZpbGUgbmVlZHMgdG8gYmUgZmV0Y2hlZCB2aWEgWEhSXHJcbiAgICAgIC8vIGJlY2F1c2UgcmVzcG9uc2VUeXBlIGFuZCA/YWx0PW1lZGlhIG5lZWRzIHRvIGJlIHNldCB0byBhdm9pZCBDT1JTXHJcbiAgICAgIGNvbnN0IHhockRvd25sb2FkID0gKGZpbGU6c2VsZWN0ZWRGaWxlKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPEZpbGU+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgIGNvbnN0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgICAgeGhyLm9wZW4oXCJHRVRcIiwgXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9kcml2ZS92My9maWxlcy9cIitmaWxlLmZpbGVJZCsnP2FsdD1tZWRpYScsIHRydWUpO1xyXG4gICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0F1dGhvcml6YXRpb24nLCdCZWFyZXIgJyt0aGlzLnRva2VuKTtcclxuICAgICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYmxvYidcclxuICAgICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICByZXNvbHZlKG5ldyBGaWxlKFt4aHIucmVzcG9uc2VdLCBmaWxlLm5hbWUsIHt0eXBlOiBmaWxlLm1pbWVUeXBlLCBsYXN0TW9kaWZpZWQ6IGZpbGUubW9kaWZpZWRUaW1lfSkpO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIHhoci5zZW5kKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxGaWxlPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgaWYgKGxpbWl0U2l6ZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICBnYXBpLmNsaWVudC5kcml2ZS5maWxlcy5nZXQoe1xyXG4gICAgICAgICAgICBmaWxlSWQ6IGZpbGUuZmlsZUlkLFxyXG4gICAgICAgICAgICBmaWVsZHM6ICdzaXplJ1xyXG4gICAgICAgICAgfSkudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgc2l6ZSA9IE51bWJlcihyZXNwLnJlc3VsdC5zaXplKTtcclxuICAgICAgICAgICAgaWYgKHNpemUgPiBsaW1pdFNpemUqMTAyNCoxMDI0KSB7XHJcbiAgICAgICAgICAgICAgcmVqZWN0KCdHb29nbGVQaWNrZXJFcnJvcjogRmlsc2l6ZSBpcyB0b28gbGFhcmdlJylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIHhockRvd25sb2FkKGZpbGUpLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHhockRvd25sb2FkKGZpbGUpLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICAgIHJlc29sdmUocmVzcCk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgR29vZ2xlV2ViQ2xpZW50IH0gZnJvbSAnLi9nb29nbGUtd2ViY2xpZW50JztcclxuaW1wb3J0IHsgR29vZ2xlRHJpdmUsIHNlbGVjdGVkRmlsZSB9IGZyb20gJy4vZ29vZ2xlLWRyaXZlJztcclxuXHJcbmludGVyZmFjZSBvcHRpb25zIHtcclxuICB1cGxvYWQ/OiBib29sZWFuO1xyXG4gIG11bHRpcGxlPzogYm9vbGVhbjtcclxuICBsaW1pdFR5cGU/OiBmYWxzZSB8ICdnb29nbGUtYXBwcycgfMKgJ3BkZic7XHJcbn1cclxuXHJcbmNvbnN0IG1pbWVUeXBlQ29sbGVjdGlvbnMgPSB7XHJcbiAgJ2dvb2dsZS1hcHBzJyA6ICdhcHBsaWNhdGlvbi92bmQuZ29vZ2xlLWFwcHMuZG9jdW1lbnQsYXBwbGljYXRpb24vdm5kLmdvb2dsZS1hcHBzLnByZXNlbnRhdGlvbixhcHBsaWNhdGlvbi92bmQuZ29vZ2xlLWFwcHMuc3ByZWFkc2hlZXQnLFxyXG4gICdwZGYnOiAnYXBwbGljYXRpb24vcGRmJ1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEdvb2dsZVBpY2tlclxyXG4gKiBJbmNsdWRlcyB0aGUgaW5pdGlhdGlvbiBvZiB0aGUgY29ycmVjdCBhcGk6cy5cclxuICogQ2VydGFpbiBvcHRpb25zIGNhbiBiZSBwYXNzZWQgdG8gdGhlIGNvbnN0cnVjdG9yXHJcbiAqIGFuZCB0aGVyZSBjb3VsZCBiZSBvdGhlcnMgd29ydGggaW5jb3Jwb3JhdGluZyAoaS5lLiBUZWFtIERyaXZlLXN1cHBvcnQpLlxyXG4gKiBcclxuICogUmlnaHQgbm93IHR3byBvcHRpb25zIGFyZSBoYW5kbGVkOlxyXG4gKiAtIHVwbG9hZDogaWYgYSB1c2VyIGNhbiB1cGxvYWQgdG8gRHJpdmUgaW4gdGhlIEdvb2dsZSBEcml2ZSBQaWNrZXJcclxuICogLSBtdWx0aXBsZTogaWYgYSB1c2VyIGNhbiBzZWxlY3QgbXVsdGlwbGUgZmlsZXNcclxuICogLSBsaW1pdFR5cGU6IGFjdGl2ZSBsaW1pdHMgdG8gY2VydGFpbiBtaW1lVHlwZXNDb2xsZWN0aW9uc1xyXG4gKiBcclxuICogV2UgY291bGQgcHJvYmFibHkgc3BsaXQgdGhpcyBpbnRvIGdvb2dsZS1waWNrZXIgYW5kIGdvb2dsZS1kcml2ZSB3aGVyZSBnb29nbGUtZHJpdmVcclxuICogaGFuZGxlcyB0aGUgZXhwbGljaXQgY2FsbHMgdG8gdGhlIGdvb2dsZSBkcml2ZSBhcGkuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgR29vZ2xlUGlja2VyIGV4dGVuZHMgR29vZ2xlV2ViQ2xpZW50IHtcclxuICBwaWNrZXI6IGdvb2dsZS5waWNrZXIuUGlja2VyO1xyXG4gIG9wdGlvbnM6IG9wdGlvbnM7XHJcbiAgZHJpdmU6IEdvb2dsZURyaXZlO1xyXG5cclxuICBjb25zdHJ1Y3RvcihvcHRpb25zPzogb3B0aW9ucykge1xyXG4gICAgc3VwZXIoWydodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL2RyaXZlJ10pO1xyXG4gICAgdGhpcy5vcHRpb25zID0ge3VwbG9hZDogZmFsc2UsIG11bHRpcGxlOiBmYWxzZSwgbGltaXRUeXBlOiBmYWxzZX07XHJcbiAgICBPYmplY3QuYXNzaWduKHRoaXMub3B0aW9ucywgb3B0aW9ucyk7XHJcbiAgICBjb25zb2xlLmxvZyh0aGlzLm9wdGlvbnMpO1xyXG4gICAgdGhpcy5kcml2ZSA9IG5ldyBHb29nbGVEcml2ZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogc2hvdygpXHJcbiAgICogXHJcbiAgICogSWYgYSBzaW5nbGUgZmlsZSBpcyByZXF1ZXN0ZWQgZnJvbSB0aGUgcGlja2VyIGEgbGlzdCBvZiBmaWxlcyB3aXRoIG9uZSBlbGVtZW50IGlzIHJldHVybmVkLlxyXG4gICAqIEl0IGlzIHVwIHRvIHRoZSBjYWxsZXIgdG8gaGFuZGxlIHRoZSBsaXN0IGluIGEgcmVsZXZhbnQgbWFubmVyLlxyXG4gICAqIFxyXG4gICAqIE1vcmUgZGF0YSBmcm9tIHRoZSBmaWxlIGNvdWxkIGJlIGV4dHJhY3RlZCBpZiBpdCBpcyBkZWVtZWQgbmVjZXNzYXJ5LlxyXG4gICAqIFxyXG4gICAqL1xyXG4gIGFzeW5jIHNob3coKSB7XHJcbiAgICBhd2FpdCB0aGlzLmVuc3VyZUluaXRlZCgpO1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPHNlbGVjdGVkRmlsZVtdPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGNvbnN0IGNhbGxiYWNrID0gKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlWydhY3Rpb24nXSA9PSBnb29nbGUucGlja2VyLkFjdGlvbi5DQU5DRUwpIHtcclxuICAgICAgICAgICAgcmVqZWN0KCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZVsnYWN0aW9uJ10gPT0gZ29vZ2xlLnBpY2tlci5BY3Rpb24uUElDS0VEKSB7XHJcbiAgICAgICAgICBsZXQgc2VsZWN0ZWQgPSBbXTtcclxuICAgICAgICAgIHJlc3BvbnNlLmRvY3MubWFwKGRvYyA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHtpZDogZmlsZUlkLCBtaW1lVHlwZSwgbmFtZSwgbW9kaWZpZWRUaW1lLCBpY29uVXJsLCB1cmx9ID0gZG9jO1xyXG4gICAgICAgICAgICBjb25zdCBjYW5FeHBvcnQgPSBtaW1lVHlwZS5pbmNsdWRlcygnZ29vZ2xlLWFwcHMnKTtcclxuICAgICAgICAgICAgc2VsZWN0ZWQucHVzaCh7ZmlsZUlkLCBtaW1lVHlwZSwgbmFtZSwgbW9kaWZpZWRUaW1lLCBjYW5FeHBvcnQsIGljb25VcmwsIHVybH0pO1xyXG4gICAgICAgICAgICAvLyB1cGRhdGUgcGVybWlzc2lvbnMgdG8gcmVhZCBieSBhbGwgaW4gZG9tYWluXHJcbiAgICAgICAgICAgIHRoaXMuZHJpdmUudXBkYXRlUGVybWlzc2lvbnMoZmlsZUlkKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coc2VsZWN0ZWQpO1xyXG4gICAgICAgICAgcmVzb2x2ZShzZWxlY3RlZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgcGlja2VyYnVpbGRlciA9IG5ldyBnb29nbGUucGlja2VyLlBpY2tlckJ1aWxkZXIoKVxyXG4gICAgICAgIC5lbmFibGVGZWF0dXJlKGdvb2dsZS5waWNrZXIuRmVhdHVyZS5TVVBQT1JUX0RSSVZFUylcclxuICAgICAgICAuZW5hYmxlRmVhdHVyZShnb29nbGUucGlja2VyLkZlYXR1cmUuU1VQUE9SVF9URUFNX0RSSVZFUylcclxuICAgICAgICAuYWRkVmlldyhcclxuICAgICAgICAgIG5ldyBnb29nbGUucGlja2VyLkRvY3NWaWV3KClcclxuICAgICAgICAgICAgLnNldE93bmVkQnlNZSh0cnVlKSAvLyBzaG91bGQgdGhpcyBiZSBhbiBvcHRpb24/XHJcbiAgICAgICAgICAgIC5zZXRJbmNsdWRlRm9sZGVycyh0cnVlKVxyXG4gICAgICAgIClcclxuICAgICAgICAuYWRkVmlldyhcclxuICAgICAgICAgIG5ldyBnb29nbGUucGlja2VyLkRvY3NWaWV3KClcclxuICAgICAgICAgICAgLnNldEluY2x1ZGVGb2xkZXJzKHRydWUpXHJcbiAgICAgICAgICAgIC5zZXRFbmFibGVUZWFtRHJpdmVzKHRydWUpXHJcbiAgICAgICAgKVxyXG4gICAgICAgIC5zZXRMb2NhbGUoXCJzdlwiKSAvLyBzaG91bGQgdGhpcyBiZSBhbiBvcHRpb24/XHJcbiAgICAgICAgLnNldFNpemUoMTA1MSw2NTApIC8vIHNob3VsZCB0aGlzIGJlIGFuIG9wdGlvbj9cclxuICAgICAgICAuc2V0T0F1dGhUb2tlbih0aGlzLmF1dGhUb2tlbilcclxuICAgICAgICAuc2V0Q2FsbGJhY2soY2FsbGJhY2spO1xyXG4gICAgICBpZiAodGhpcy5vcHRpb25zLnVwbG9hZCkge1xyXG4gICAgICAgIHBpY2tlcmJ1aWxkZXIuYWRkVmlldyhuZXcgZ29vZ2xlLnBpY2tlci5Eb2NzVXBsb2FkVmlldygpLnNldEluY2x1ZGVGb2xkZXJzKHRydWUpKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5vcHRpb25zLm11bHRpcGxlKSB7XHJcbiAgICAgICAgcGlja2VyYnVpbGRlci5lbmFibGVGZWF0dXJlKGdvb2dsZS5waWNrZXIuRmVhdHVyZS5NVUxUSVNFTEVDVF9FTkFCTEVEKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5vcHRpb25zLmxpbWl0VHlwZSkge1xyXG4gICAgICAgIHZhciBtaW1lVHlwZXMgPSBtaW1lVHlwZUNvbGxlY3Rpb25zW3RoaXMub3B0aW9ucy5saW1pdFR5cGVdO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKG1pbWVUeXBlcyk7XHJcbiAgICAgICAgcGlja2VyYnVpbGRlci5zZXRTZWxlY3RhYmxlTWltZVR5cGVzKG1pbWVUeXBlcyk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5waWNrZXIgPSBwaWNrZXJidWlsZGVyLmJ1aWxkKCk7XHJcbiAgICAgIHRoaXMucGlja2VyLnNldFZpc2libGUodHJ1ZSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IGVudiBmcm9tICcuLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5pbXBvcnQgeyBXZWJDbGllbnRJZCB9IGZyb20gJy4vY29uZmlncyc7XHJcblxyXG5leHBvcnQgY2xhc3MgR29vZ2xlV2ViQ2xpZW50IHtcclxuICBhdXRoVG9rZW46IHN0cmluZztcclxuICBzY29wZXM6IHN0cmluZ1tdO1xyXG5cclxuICBjb25zdHJ1Y3RvcihzY29wZXMpIHtcclxuICAgIHRoaXMuc2NvcGVzID0gWydodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL3VzZXJpbmZvLmVtYWlsJywgJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvdXNlcmluZm8ucHJvZmlsZSddO1xyXG4gICAgdGhpcy5zY29wZXMucHVzaCguLi5zY29wZXMpO1xyXG4gIH1cclxuICBhc3luYyBlbnN1cmVJbml0ZWQoKSB7XHJcbiAgICAvLyBMb2FkIEdBUElcclxuICAgIGlmICh0eXBlb2YgZ2FwaSA9PT0gXCJ1bmRlZmluZWRcIikgYXdhaXQgdGhpcy5sb2FkR2FwaSgpO1xyXG5cclxuICAgIC8vIEtFRFNTY2hvb2xzXHJcbiAgICBjb25zdCBTQ09QRVMgPSB0aGlzLnNjb3Blcy5qb2luKCcgJyk7XHJcbiAgICBcclxuICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLHJlamVjdCkgPT4ge1xyXG4gICAgICBnYXBpLmxvYWQoXCJjbGllbnQ6YXV0aDJcIiwgKCkgPT4ge1xyXG4gICAgICAgIC8vIENhbGxzIGF1dGhvcml6ZSB3aXRob3V0IHByb21wdGluZyB0aGUgdXNlci4gSWYgYXV0aG9yaXphdGlvbiBoYXNuJ3QgYmVlbiBnaXZlbiBieVxyXG4gICAgICAgIC8vIHRoZSB1c2VyIGFuIGVycm9yIGlzIHJldHVybmVkIGFuZCB3ZSBjYWxsIGF1dGhvcml6ZSBhZ2FpbiB3aXRoIGNvbnNlbnQtc2NyZWVuXHJcbiAgICAgICAgbGV0IHJlYXV0aG9yaXplID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHJldHVybiBnYXBpLmF1dGgyLmF1dGhvcml6ZSh7XHJcbiAgICAgICAgICBjbGllbnRfaWQ6IFdlYkNsaWVudElkLFxyXG4gICAgICAgICAgc2NvcGU6IFNDT1BFUyxcclxuICAgICAgICAgIHJlc3BvbnNlX3R5cGU6ICdwZXJtaXNzaW9uJyxcclxuICAgICAgICAgIGxvZ2luX2hpbnQ6IGVudi5jdXJyZW50VXNlci5tYWlsLFxyXG4gICAgICAgICAgcHJvbXB0OiAnbm9uZSdcclxuICAgICAgICB9LCAocmVzcCkgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2cocmVzcCk7XHJcbiAgICAgICAgICBpZiAocmVzcC5lcnJvcikge1xyXG4gICAgICAgICAgICAvLyBubyBjb25zZW50IGdpdmVuIHNvIHJlYXV0aG9yaXplXHJcbiAgICAgICAgICAgIHJlYXV0aG9yaXplID0gdHJ1ZTsgICAgICAgICAgICBcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIHdlIGhhdmUgYWxsIHRoZSBzY29wZXMgd2Ugd2FudFxyXG4gICAgICAgICAgICBjb25zdCBzY29wZXNldCA9IG5ldyBTZXQocmVzcC5zY29wZS5zcGxpdCgnICcpKTtcclxuICAgICAgICAgICAgY29uc3QgbWlzc2luZ1Njb3BlcyA9IHRoaXMuc2NvcGVzLmZpbHRlcih4ID0+ICFzY29wZXNldC5oYXMoeCkpO1xyXG4gICAgICAgICAgICBpZiAobWlzc2luZ1Njb3Blcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ21pc3Npbmcgc2NvcGVzJyk7XHJcbiAgICAgICAgICAgICAgLy8gc2NvcGVzIGFyZSBtaXNzaW5nIGZyb20gb3VyIGNvbnNlbnQgc28gcmVhdXRob3JpemVcclxuICAgICAgICAgICAgICByZWF1dGhvcml6ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgLy8gZXZlcnl0aGluZyBzZWVtcyB0byBiZSBvayBzbyBzdG9yZSBvdXIgdG9rZW5cclxuICAgICAgICAgICAgICB0aGlzLmF1dGhUb2tlbiA9IHJlc3AuYWNjZXNzX3Rva2VuO1xyXG4gICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmIChyZWF1dGhvcml6ZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygncmVhdXRob3JpemUnKTtcclxuICAgICAgICAgICAgcmV0dXJuIGdhcGkuYXV0aDIuYXV0aG9yaXplKHtcclxuICAgICAgICAgICAgICBjbGllbnRfaWQ6IFdlYkNsaWVudElkLFxyXG4gICAgICAgICAgICAgIHNjb3BlOiBTQ09QRVMsXHJcbiAgICAgICAgICAgICAgcmVzcG9uc2VfdHlwZTogJ3Blcm1pc3Npb24nLFxyXG4gICAgICAgICAgICAgIGxvZ2luX2hpbnQ6IGVudi5jdXJyZW50VXNlci5tYWlsLFxyXG4gICAgICAgICAgICAgIHByb21wdDogJ2NvbnNlbnQnXHJcbiAgICAgICAgICAgIH0sIChyZXNwKSA9PiB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcCk7XHJcbiAgICAgICAgICAgICAgaWYgKHJlc3AuZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIC8vIHNvbWV0aGluZyBpcyBzdGlsbCB3cm9uZyBzbyB0aHJvdyBhbiBlcnJvclxyXG4gICAgICAgICAgICAgICAgcmVqZWN0KCdHb29nbGUgV2ViIENsaWVudDogTm8gYWNjZXNzIHRva2VuJyk7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIHdlIG5vdyBoYXZlIGEgdG9rZW4gKGhvcGVmdWxseSB3aXRoIHRoZSByaWdodCBzY29wZXMpXHJcbiAgICAgICAgICAgICAgICAvLyBzaG91bGQgd2UgY2hlY2sgYWdhaW4/XHJcbiAgICAgICAgICAgICAgICB0aGlzLmF1dGhUb2tlbiA9IHJlc3AuYWNjZXNzX3Rva2VuO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKHJlc3AuZXhwaXJlc19pbiA8IDUwMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZ2FwaS5hdXRoMi5hdXRob3JpemUoe1xyXG4gICAgICAgICAgICAgIGNsaWVudF9pZDogV2ViQ2xpZW50SWQsXHJcbiAgICAgICAgICAgICAgc2NvcGU6IFNDT1BFUyxcclxuICAgICAgICAgICAgICByZXNwb25zZV90eXBlOiAncGVybWlzc2lvbicsXHJcbiAgICAgICAgICAgICAgbG9naW5faGludDogZW52LmN1cnJlbnRVc2VyLm1haWwsXHJcbiAgICAgICAgICAgICAgcHJvbXB0OiAnbm9uZSdcclxuICAgICAgICAgICAgfSwgKHJlc3ApID0+IHtcclxuICAgICAgICAgICAgICB0aGlzLmF1dGhUb2tlbiA9IHJlc3AuYWNjZXNzX3Rva2VuO1xyXG4gICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gTG9hZCBQaWNrZXIgQVBJXHJcbiAgICBpZiAodHlwZW9mIGdvb2dsZSA9PT0gXCJ1bmRlZmluZWRcIiB8fCB0eXBlb2YgZ29vZ2xlLnBpY2tlciA9PT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICBnYXBpLmxvYWQoXCJwaWNrZXJcIiwgKCkgPT4geyByZXNvbHZlKCkgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIGxvYWRHYXBpKCkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgaWYgKHR5cGVvZiBnYXBpICE9PSBcInVuZGVmaW5lZFwiKSByZXR1cm4gcmVzb2x2ZSgpO1xyXG4gICAgICBjb25zdCBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xyXG4gICAgICBzY3JpcHQuc3JjID0gXCJodHRwczovL2FwaXMuZ29vZ2xlLmNvbS9qcy9jbGllbnQuanM/b25sb2FkPWdhYXBpX2xvYWRlZFwiO1xyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF0uYXBwZW5kQ2hpbGQoc2NyaXB0KTtcclxuICAgICAgKHdpbmRvdyBhcyBhbnkpLmdhYXBpX2xvYWRlZCA9IHJlc29sdmU7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgRURTVGVhY2hlciwgRURTVHVpdGlvbkdyb3VwIH0gZnJvbSAnLi4vLi4vY29udHJhY3RzL2Vkcyc7XHJcblxyXG5cclxuY29uc3QgY3JlYXRlU3R1ZGVudHMgPSAoZ3JvdXAsIG4sIG0pID0+IHtcclxuICBjb25zdCBzdHVkZW50cyA9IFtdO1xyXG4gIGZvciAodmFyIGk9bjsgaSA8PSBtOyBpKyspIHtcclxuICAgIHN0dWRlbnRzLnB1c2goe1xyXG4gICAgICBzY2hvb2xOYW1lOiAnS0VEJyxcclxuICAgICAgdHVpdGlvbkdyb3VwTmFtZTogZ3JvdXAsXHJcbiAgICAgIHN0dWRlbnRGaXJzdE5hbWU6ICdTdHVkZW50ICcgKyBpLFxyXG4gICAgICBzdHVkZW50TGFzdE5hbWU6ICdDbGFzc3Jvb20nLFxyXG4gICAgICBzdHVkZW50RW1haWxBZGRyZXNzOiAnc3R1ZGVudCcgKyBpICsgJy5jbGFzc3Jvb21Aa2Vkc2Nob29scy5jb20nXHJcblxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIHJldHVybiBzdHVkZW50cztcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IG1vY2tUZWFjaGVyczogRURTVGVhY2hlcltdID0gW1xyXG4gIHtcclxuICAgIHNjaG9vbE5hbWU6ICdLRUQnLFxyXG4gICAgdGVhY2hlckZpcnN0TmFtZTogJ1RlYWNoZXIgMScsXHJcbiAgICB0ZWFjaGVyTGFzdE5hbWU6ICdDbGFzc3Jvb20nLFxyXG4gICAgdGVhY2hlckVtYWlsQWRkcmVzczogJ3RlYWNoZXIxLmNsYXNzcm9vbUBrZWRzY2hvb2xzLmNvbSdcclxuICB9LFxyXG4gIHtcclxuICAgIHNjaG9vbE5hbWU6ICdLRUQnLFxyXG4gICAgdGVhY2hlckZpcnN0TmFtZTogJ1RlYWNoZXIgMicsXHJcbiAgICB0ZWFjaGVyTGFzdE5hbWU6ICdDbGFzc3Jvb20nLFxyXG4gICAgdGVhY2hlckVtYWlsQWRkcmVzczogJ3RlYWNoZXIyLmNsYXNzcm9vbUBrZWRzY2hvb2xzLmNvbSdcclxuICB9LFxyXG4gIHtcclxuICAgIHNjaG9vbE5hbWU6ICdLRUQnLFxyXG4gICAgdGVhY2hlckZpcnN0TmFtZTogJ1RlYWNoZXIgMycsXHJcbiAgICB0ZWFjaGVyTGFzdE5hbWU6ICdDbGFzc3Jvb20nLFxyXG4gICAgdGVhY2hlckVtYWlsQWRkcmVzczogJ3RlYWNoZXIzLmNsYXNzcm9vbUBrZWRzY2hvb2xzLmNvbSdcclxuICB9LFxyXG4gIHtcclxuICAgIHNjaG9vbE5hbWU6ICdLRUQnLFxyXG4gICAgdGVhY2hlckZpcnN0TmFtZTogJ0NhcmwnLFxyXG4gICAgdGVhY2hlckxhc3ROYW1lOiAnSG9sbWJlcmcnLFxyXG4gICAgdGVhY2hlckVtYWlsQWRkcmVzczogJ2NhcmxAa2Vkc2Nob29scy5jb20nXHJcbiAgfSxcclxuICB7XHJcbiAgICBzY2hvb2xOYW1lOiAnS0VEJyxcclxuICAgIHRlYWNoZXJGaXJzdE5hbWU6ICdEYXZpZCcsXHJcbiAgICB0ZWFjaGVyTGFzdE5hbWU6ICdGYWhsYW5kZXInLFxyXG4gICAgdGVhY2hlckVtYWlsQWRkcmVzczogJ2RhdmlkLmZhaGxhbmRlckBrZWRzY2hvb2xzLmNvbSdcclxuICB9XHJcbl07XHJcblxyXG5leHBvcnQgY29uc3QgbW9ja1R1aXRpb25Hcm91cHMgPSB7XHJcbiAgJ0RKVVPDhEwwMSc6IFtcclxuICAgIHtcclxuICAgICAgc2Nob29sTmFtZTogJ0tFRCcsXHJcbiAgICAgIHR1aXRpb25Hcm91cE5hbWU6ICdJRFIxX0dyMSAoMTgwODE2LTE5MDYxNCknLFxyXG4gICAgICBjb3Vyc2VDb2RlOiAnREpVU8OETDAxJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgc2Nob29sTmFtZTogJ0tFRCcsXHJcbiAgICAgIHR1aXRpb25Hcm91cE5hbWU6ICdJRFIxX0dyMiAoMTgwODE2LTE5MDYxNCknLFxyXG4gICAgICBjb3Vyc2VDb2RlOiAnREpVU8OETDAxJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgc2Nob29sTmFtZTogJ0tFRCcsXHJcbiAgICAgIHR1aXRpb25Hcm91cE5hbWU6ICdJRFIxX0dyMyAoMTgwODE2LTE5MDYxNCknLFxyXG4gICAgICBjb3Vyc2VDb2RlOiAnREpVU8OETDAxJ1xyXG4gICAgfVxyXG4gIF0sXHJcbiAgJ0tFTUtFTTAxJzogW1xyXG4gICAge1xyXG4gICAgICBzY2hvb2xOYW1lOiAnS0VEJyxcclxuICAgICAgdHVpdGlvbkdyb3VwTmFtZTogJ0tFTTFfR3IxICgxODA4MTYtMTkwNjE0KScsXHJcbiAgICAgIGNvdXJzZUNvZGU6ICdLRU1LRU0wMSdcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIHNjaG9vbE5hbWU6ICdLRUQnLFxyXG4gICAgICB0dWl0aW9uR3JvdXBOYW1lOiAnS0VNMV9HcjIgKDE4MDgxNi0xOTA2MTQpJyxcclxuICAgICAgY291cnNlQ29kZTogJ0tFTUtFTTAxJ1xyXG4gICAgfVxyXG4gIF0sXHJcbiAgJ0JJT0JJTzAxJzogW1xyXG4gICAge1xyXG4gICAgICBzY2hvb2xOYW1lOiAnS0VEJyxcclxuICAgICAgdHVpdGlvbkdyb3VwTmFtZTogJ0JJTzFfR3IxICgxODA4MTYtMTkwNjE0KScsXHJcbiAgICAgIGNvdXJzZUNvZGU6ICdCSU9CSU8wMSdcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIHNjaG9vbE5hbWU6ICdLRUQnLFxyXG4gICAgICB0dWl0aW9uR3JvdXBOYW1lOiAnQklPMV9HcjIgKDE4MDgxNi0xOTA2MTQpJyxcclxuICAgICAgY291cnNlQ29kZTogJ0JJT0JJTzAxJ1xyXG4gICAgfVxyXG4gIF0sXHJcbiAgJ1NWRVNWRTAzJzogW1xyXG4gICAge1xyXG4gICAgICBzY2hvb2xOYW1lOiAnS0VEJyxcclxuICAgICAgdHVpdGlvbkdyb3VwTmFtZTogJ1NWRTNfR3IxICgxODA4MTYtMTkwNjE0KScsXHJcbiAgICAgIGNvdXJzZUNvZGU6ICdTVkVTVkUwMydcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIHNjaG9vbE5hbWU6ICdLRUQnLFxyXG4gICAgICB0dWl0aW9uR3JvdXBOYW1lOiAnU1ZFM19HcjIgKDE4MDgxNi0xOTA2MTQpJyxcclxuICAgICAgY291cnNlQ29kZTogJ1NWRVNWRTAzJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgc2Nob29sTmFtZTogJ0tFRCcsXHJcbiAgICAgIHR1aXRpb25Hcm91cE5hbWU6ICdTVkUzX0dyMyAoMTgwODE2LTE5MDYxNCknLFxyXG4gICAgICBjb3Vyc2VDb2RlOiAnU1ZFU1ZFMDMnXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBzY2hvb2xOYW1lOiAnS0VEJyxcclxuICAgICAgdHVpdGlvbkdyb3VwTmFtZTogJ1NWRTNfR3I0ICgxODA4MTYtMTkwNjE0KScsXHJcbiAgICAgIGNvdXJzZUNvZGU6ICdTVkVTVkUwMydcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIHNjaG9vbE5hbWU6ICdLRUQnLFxyXG4gICAgICB0dWl0aW9uR3JvdXBOYW1lOiAnU1ZFM19HcjUgKDE4MDgxNi0xOTA2MTQpJyxcclxuICAgICAgY291cnNlQ29kZTogJ1NWRVNWRTAzJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgc2Nob29sTmFtZTogJ0tFRCcsXHJcbiAgICAgIHR1aXRpb25Hcm91cE5hbWU6ICdTVkUzX0dyNiAoMTgwODE2LTE5MDYxNCknLFxyXG4gICAgICBjb3Vyc2VDb2RlOiAnU1ZFU1ZFMDMnXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBzY2hvb2xOYW1lOiAnS0VEJyxcclxuICAgICAgdHVpdGlvbkdyb3VwTmFtZTogJ1NWRTNfR3I3ICgxODA4MTYtMTkwNjE0KScsXHJcbiAgICAgIGNvdXJzZUNvZGU6ICdTVkVTVkUwMydcclxuICAgIH1cclxuICBdXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBtb2NrVHVpdGlvblN0dWRlbnRzID0ge1xyXG4gICdJRFIxX0dyMSAoMTgwODE2LTE5MDYxNCknIDogY3JlYXRlU3R1ZGVudHMoJ0lEUjFfR3IxICgxODA4MTYtMTkwNjE0KScgLCAxLCAxMiksXHJcbiAgJ0lEUjFfR3IyICgxODA4MTYtMTkwNjE0KScgOiBjcmVhdGVTdHVkZW50cygnSURSMV9HcjIgKDE4MDgxNi0xOTA2MTQpJyAsIDEzLCAyMiksXHJcbiAgJ0lEUjFfR3IzICgxODA4MTYtMTkwNjE0KScgOiBjcmVhdGVTdHVkZW50cygnSURSMV9HcjMgKDE4MDgxNi0xOTA2MTQpJyAsIDIzLCAzNCksXHJcbiAgJ0tFTTFfR3IxICgxODA4MTYtMTkwNjE0KScgOiBbXHJcbiAgICB7XHJcbiAgICAgIHNjaG9vbE5hbWU6ICdLRUQnLFxyXG4gICAgICB0dWl0aW9uR3JvdXBOYW1lOiAnS0VNMV9HcjEgKDE4MDgxNi0xOTA2MTQpJyxcclxuICAgICAgc3R1ZGVudEZpcnN0TmFtZTogJ1N0dWRlbnQgMicsXHJcbiAgICAgIHN0dWRlbnRMYXN0TmFtZTogJ0NsYXNzcm9vbScsXHJcbiAgICAgIHN0dWRlbnRFbWFpbEFkZHJlc3M6ICdzdHVkZW50Mi5jbGFzc3Jvb21Aa2Vkc2Nob29scy5jb20nXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBzY2hvb2xOYW1lOiAnS0VEJyxcclxuICAgICAgdHVpdGlvbkdyb3VwTmFtZTogJ0tFTTFfR3IxICgxODA4MTYtMTkwNjE0KScsXHJcbiAgICAgIHN0dWRlbnRGaXJzdE5hbWU6ICdTdHVkZW50IDMnLFxyXG4gICAgICBzdHVkZW50TGFzdE5hbWU6ICdDbGFzc3Jvb20nLFxyXG4gICAgICBzdHVkZW50RW1haWxBZGRyZXNzOiAnc3R1ZGVudDMuY2xhc3Nyb29tQGtlZHNjaG9vbHMuY29tJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgc2Nob29sTmFtZTogJ0tFRCcsXHJcbiAgICAgIHR1aXRpb25Hcm91cE5hbWU6ICdLRU0xX0dyMSAoMTgwODE2LTE5MDYxNCknLFxyXG4gICAgICBzdHVkZW50Rmlyc3ROYW1lOiAnU3R1ZGVudCA4JyxcclxuICAgICAgc3R1ZGVudExhc3ROYW1lOiAnQ2xhc3Nyb29tJyxcclxuICAgICAgc3R1ZGVudEVtYWlsQWRkcmVzczogJ3N0dWRlbnQ4LmNsYXNzcm9vbUBrZWRzY2hvb2xzLmNvbSdcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIHNjaG9vbE5hbWU6ICdLRUQnLFxyXG4gICAgICB0dWl0aW9uR3JvdXBOYW1lOiAnS0VNMV9HcjEgKDE4MDgxNi0xOTA2MTQpJyxcclxuICAgICAgc3R1ZGVudEZpcnN0TmFtZTogJ1N0dWRlbnQgOScsXHJcbiAgICAgIHN0dWRlbnRMYXN0TmFtZTogJ0NsYXNzcm9vbScsXHJcbiAgICAgIHN0dWRlbnRFbWFpbEFkZHJlc3M6ICdzdHVkZW50OS5jbGFzc3Jvb21Aa2Vkc2Nob29scy5jb20nXHJcbiAgICB9XHJcbiAgXSxcclxuICAnS0VNMV9HcjIgKDE4MDgxNi0xOTA2MTQpJyA6IFtcclxuICAgIHtcclxuICAgICAgc2Nob29sTmFtZTogJ0tFRCcsXHJcbiAgICAgIHR1aXRpb25Hcm91cE5hbWU6ICdLRU0xX0dyMiAoMTgwODE2LTE5MDYxNCknLFxyXG4gICAgICBzdHVkZW50Rmlyc3ROYW1lOiAnU3R1ZGVudCAxJyxcclxuICAgICAgc3R1ZGVudExhc3ROYW1lOiAnQ2xhc3Nyb29tJyxcclxuICAgICAgc3R1ZGVudEVtYWlsQWRkcmVzczogJ3N0dWRlbnQxLmNsYXNzcm9vbUBrZWRzY2hvb2xzLmNvbSdcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIHNjaG9vbE5hbWU6ICdLRUQnLFxyXG4gICAgICB0dWl0aW9uR3JvdXBOYW1lOiAnS0VNMV9HcjIgKDE4MDgxNi0xOTA2MTQpJyxcclxuICAgICAgc3R1ZGVudEZpcnN0TmFtZTogJ1N0dWRlbnQgNScsXHJcbiAgICAgIHN0dWRlbnRMYXN0TmFtZTogJ0NsYXNzcm9vbScsXHJcbiAgICAgIHN0dWRlbnRFbWFpbEFkZHJlc3M6ICdzdHVkZW50NS5jbGFzc3Jvb21Aa2Vkc2Nob29scy5jb20nXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBzY2hvb2xOYW1lOiAnS0VEJyxcclxuICAgICAgdHVpdGlvbkdyb3VwTmFtZTogJ0tFTTFfR3IyICgxODA4MTYtMTkwNjE0KScsXHJcbiAgICAgIHN0dWRlbnRGaXJzdE5hbWU6ICdTdHVkZW50IDYnLFxyXG4gICAgICBzdHVkZW50TGFzdE5hbWU6ICdDbGFzc3Jvb20nLFxyXG4gICAgICBzdHVkZW50RW1haWxBZGRyZXNzOiAnc3R1ZGVudDYuY2xhc3Nyb29tQGtlZHNjaG9vbHMuY29tJ1xyXG4gICAgfVxyXG4gIF0sXHJcbiAgJ0JJTzFfR3IxICgxODA4MTYtMTkwNjE0KScgOiBbXHJcbiAgICB7XHJcbiAgICAgIHNjaG9vbE5hbWU6ICdLRUQnLFxyXG4gICAgICB0dWl0aW9uR3JvdXBOYW1lOiAnQklPMV9HcjEgKDE4MDgxNi0xOTA2MTQpJyxcclxuICAgICAgc3R1ZGVudEZpcnN0TmFtZTogJ1N0dWRlbnQgMScsXHJcbiAgICAgIHN0dWRlbnRMYXN0TmFtZTogJ0NsYXNzcm9vbScsXHJcbiAgICAgIHN0dWRlbnRFbWFpbEFkZHJlc3M6ICdzdHVkZW50MS5jbGFzc3Jvb21Aa2Vkc2Nob29scy5jb20nXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBzY2hvb2xOYW1lOiAnS0VEJyxcclxuICAgICAgdHVpdGlvbkdyb3VwTmFtZTogJ0JJTzFfR3IxICgxODA4MTYtMTkwNjE0KScsXHJcbiAgICAgIHN0dWRlbnRGaXJzdE5hbWU6ICdTdHVkZW50IDQnLFxyXG4gICAgICBzdHVkZW50TGFzdE5hbWU6ICdDbGFzc3Jvb20nLFxyXG4gICAgICBzdHVkZW50RW1haWxBZGRyZXNzOiAnc3R1ZGVudDQuY2xhc3Nyb29tQGtlZHNjaG9vbHMuY29tJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgc2Nob29sTmFtZTogJ0tFRCcsXHJcbiAgICAgIHR1aXRpb25Hcm91cE5hbWU6ICdCSU8xX0dyMSAoMTgwODE2LTE5MDYxNCknLFxyXG4gICAgICBzdHVkZW50Rmlyc3ROYW1lOiAnU3R1ZGVudCA2JyxcclxuICAgICAgc3R1ZGVudExhc3ROYW1lOiAnQ2xhc3Nyb29tJyxcclxuICAgICAgc3R1ZGVudEVtYWlsQWRkcmVzczogJ3N0dWRlbnQ2LmNsYXNzcm9vbUBrZWRzY2hvb2xzLmNvbSdcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIHNjaG9vbE5hbWU6ICdLRUQnLFxyXG4gICAgICB0dWl0aW9uR3JvdXBOYW1lOiAnQklPMV9HcjEgKDE4MDgxNi0xOTA2MTQpJyxcclxuICAgICAgc3R1ZGVudEZpcnN0TmFtZTogJ1N0dWRlbnQgMTAnLFxyXG4gICAgICBzdHVkZW50TGFzdE5hbWU6ICdDbGFzc3Jvb20nLFxyXG4gICAgICBzdHVkZW50RW1haWxBZGRyZXNzOiAnc3R1ZGVudDEwLmNsYXNzcm9vbUBrZWRzY2hvb2xzLmNvbSdcclxuICAgIH1cclxuICBdLFxyXG4gICdCSU8xX0dyMiAoMTgwODE2LTE5MDYxNCknIDogW1xyXG4gICAge1xyXG4gICAgICBzY2hvb2xOYW1lOiAnS0VEJyxcclxuICAgICAgdHVpdGlvbkdyb3VwTmFtZTogJ0JJTzFfR3IyICgxODA4MTYtMTkwNjE0KScsXHJcbiAgICAgIHN0dWRlbnRGaXJzdE5hbWU6ICdTdHVkZW50IDInLFxyXG4gICAgICBzdHVkZW50TGFzdE5hbWU6ICdDbGFzc3Jvb20nLFxyXG4gICAgICBzdHVkZW50RW1haWxBZGRyZXNzOiAnc3R1ZGVudDIuY2xhc3Nyb29tQGtlZHNjaG9vbHMuY29tJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgc2Nob29sTmFtZTogJ0tFRCcsXHJcbiAgICAgIHR1aXRpb25Hcm91cE5hbWU6ICdCSU8xX0dyMiAoMTgwODE2LTE5MDYxNCknLFxyXG4gICAgICBzdHVkZW50Rmlyc3ROYW1lOiAnU3R1ZGVudCA3JyxcclxuICAgICAgc3R1ZGVudExhc3ROYW1lOiAnQ2xhc3Nyb29tJyxcclxuICAgICAgc3R1ZGVudEVtYWlsQWRkcmVzczogJ3N0dWRlbnQ3LmNsYXNzcm9vbUBrZWRzY2hvb2xzLmNvbSdcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIHNjaG9vbE5hbWU6ICdLRUQnLFxyXG4gICAgICB0dWl0aW9uR3JvdXBOYW1lOiAnQklPMV9HcjIgKDE4MDgxNi0xOTA2MTQpJyxcclxuICAgICAgc3R1ZGVudEZpcnN0TmFtZTogJ1N0dWRlbnQgOCcsXHJcbiAgICAgIHN0dWRlbnRMYXN0TmFtZTogJ0NsYXNzcm9vbScsXHJcbiAgICAgIHN0dWRlbnRFbWFpbEFkZHJlc3M6ICdzdHVkZW50OC5jbGFzc3Jvb21Aa2Vkc2Nob29scy5jb20nXHJcbiAgICB9LFxyXG4gIF0sXHJcbiAgJ1NWRTNfR3IxICgxODA4MTYtMTkwNjE0KScgOiBjcmVhdGVTdHVkZW50cygnU1ZFM19HcjEgKDE4MDgxNi0xOTA2MTQpJywgMSwgMjEpLFxyXG4gICdTVkUzX0dyMiAoMTgwODE2LTE5MDYxNCknIDogY3JlYXRlU3R1ZGVudHMoJ1NWRTNfR3IyICgxODA4MTYtMTkwNjE0KScsIDIyLCA0NCksXHJcbiAgJ1NWRTNfR3IzICgxODA4MTYtMTkwNjE0KScgOiBjcmVhdGVTdHVkZW50cygnU1ZFM19HcjMgKDE4MDgxNi0xOTA2MTQpJywgNDUsIDYxKSxcclxuICAnU1ZFM19HcjQgKDE4MDgxNi0xOTA2MTQpJyA6IGNyZWF0ZVN0dWRlbnRzKCdTVkUzX0dyNCAoMTgwODE2LTE5MDYxNCknLCA2MiwgNzgpLFxyXG4gICdTVkUzX0dyNSAoMTgwODE2LTE5MDYxNCknIDogY3JlYXRlU3R1ZGVudHMoJ1NWRTNfR3I1ICgxODA4MTYtMTkwNjE0KScsIDgzLCAxMDcpLFxyXG4gICdTVkUzX0dyNiAoMTgwODE2LTE5MDYxNCknIDogY3JlYXRlU3R1ZGVudHMoJ1NWRTNfR3I2ICgxODA4MTYtMTkwNjE0KScsIDEwOCwgMTI0KSxcclxuICAnU1ZFM19HcjcgKDE4MDgxNi0xOTA2MTQpJyA6IGNyZWF0ZVN0dWRlbnRzKCdTVkUzX0dyNyAoMTgwODE2LTE5MDYxNCknLCAxMjUsIDE1MClcclxufVxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gICAgbnVtYmVyT2ZUYXNrczogbnVtYmVyO1xyXG4gICAgY29tcGxldGVkTnVtYmVyT2ZUYXNrczogbnVtYmVyO1xyXG4gICAgbWF4aW11bVRhc2tzRGlzcGxheWVkPzogbnVtYmVyO1xyXG4gICAgYmFja2dyb3VuZENvbG9yPzogc3RyaW5nO1xyXG4gICAgcHJvZ3Jlc3NDb2xvcj86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEdvYWxQcm9ncmVzcyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcz4ge1xyXG4gICAgcHVibGljIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XHJcbiAgICAgICAgbnVtYmVyb2ZUYXNrczogMCxcclxuICAgICAgICBjb21wbGV0ZWROdW1iZXJPZlRhc2tzOiAwLFxyXG4gICAgICAgIG1heGltdW1UYXNrc0Rpc3BsYXllZDogMTAsXHJcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcImxpZ2h0Z3JleVwiLFxyXG4gICAgICAgIHByb2dyZXNzQ29sb3I6IFwiIzNkYmNhMlwiLFxyXG4gICAgfTtcclxuXHJcbiAgICBjcmVhdGVQcm9ncmVzcyA9ICgpID0+IHtcclxuICAgICAgICBjb25zdCB7IG51bWJlck9mVGFza3MsIGNvbXBsZXRlZE51bWJlck9mVGFza3MsIG1heGltdW1UYXNrc0Rpc3BsYXllZCwgYmFja2dyb3VuZENvbG9yLCBwcm9ncmVzc0NvbG9yIH0gPSB0aGlzLnByb3BzO1xyXG4gICAgICAgIGxldCBwcm9ncmVzcyA9IFtdO1xyXG4gICAgICAgIGlmKG51bWJlck9mVGFza3MgPiBtYXhpbXVtVGFza3NEaXNwbGF5ZWQpe1xyXG4gICAgICAgICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cInByb2dyZXNzLW92ZXJ2aWV3XCI+IHtjb21wbGV0ZWROdW1iZXJPZlRhc2tzfSAvIHtudW1iZXJPZlRhc2tzfSA8L2Rpdj47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKGxldCB0YXNrTm8gPSAxOyB0YXNrTm8gPD0gbnVtYmVyT2ZUYXNrczsgdGFza05vKyspIHtcclxuICAgICAgICAgICAgcHJvZ3Jlc3MucHVzaChcclxuICAgICAgICAgICAgPHN2ZyBrZXk9e3Rhc2tOb30+XHJcbiAgICAgICAgICAgICAgICA8Y2lyY2xlIGNsYXNzTmFtZT1cImNpcmNsZS1jaGFydC1iYWNrZ3JvdW5kXCIgZmlsbD17dGFza05vID4gY29tcGxldGVkTnVtYmVyT2ZUYXNrcyA/IGJhY2tncm91bmRDb2xvciA6IHByb2dyZXNzQ29sb3J9IGN4PVwiOFwiIGN5PVwiOFwiIHI9XCI4XCIgLz5cclxuICAgICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwcm9ncmVzcztcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKXsgIFxyXG4gICAgICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cImdvYWxzLXByb2dyZXNzXCI+e3RoaXMuY3JlYXRlUHJvZ3Jlc3MoKX08L2Rpdj5cclxuICAgIH1cclxufSIsImltcG9ydCB7IENvbGxlY3Rpb24sIEVtaXR0ZXIsIFZhbHVlIH0gZnJvbSAna2VkYmFja2VuZC9vYnNlcnZhYmxlJztcclxuaW1wb3J0IHsgVGFzayB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgZGIgfSBmcm9tICcuLi8uLi8uLi9nbG9iYWxzL2RiJztcclxuaW1wb3J0IHsgZmxhdHRlbiwgZGlzdGluY3QgfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IFdpdGhHcmFwaHMgfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5cclxuLyoqIENvdXJzZSAqL1xyXG5pbnRlcmZhY2UgT3JkZXJEZWZpbmluZ0RvYyB7XHJcbiAga25vd2xlZGdlUmVxdWlyZW1lbnRzT3JkZXI/OiBzdHJpbmdbXSAgIC8vIENvdXJzZVxyXG4gIGNlbnRyYWxDb250ZW50T3JkZXI/OiBzdHJpbmdbXSAgICAgICAgICAvLyBDb3Vyc2VcclxuICBhYmlsaXRpZXNPcmRlcj86IHN0cmluZ1tdICAgICAgICAgICAgICAgLy8gQ291cnNlICsgU3ViamVjdFxyXG59XHJcblxyXG4vKiogQ291cnNlLCBDb3Vyc2VJbnN0YW5jZSwgVGFzaywgTGVhcm5pbmdHb2Fsc0NvbnRlbnQgb3IgQ291cnNlQmxvY2sgKi9cclxuZXhwb3J0IGludGVyZmFjZSBSZXF1aXJlbWVudHNDb250YWluaW5nRG9jIHtcclxuICB0YWdzOiBzdHJpbmdbXTsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ291cnNlICsgQ291cnNlSW5zdGFuY2UsIFRhc2tcclxuICBjZW50cmFsQ29udGVudD86IHtpZDogc3RyaW5nfVtdOyAgICAgICAgLy8gQ291cnNlICsgTGVhcm5pbmdHb2Fsc0NvbnRlbnQgKyBDb3Vyc2VCbG9jayArIFRhc2tcclxuICBrbm93bGVkZ2VSZXF1aXJlbWVudHM/OiB7aWQ6IHN0cmluZ31bXTsgLy8gQ291cnNlICsgTGVhcm5pbmdHb2Fsc0NvbnRlbnQgKyBDb3Vyc2VCbG9jayArIFRhc2tcclxuICBhYmlsaXRpZXM/OiB7aWQ6IHN0cmluZ31bXTsgLy8gQ291cnNlLCBMZWFybmluZ0dvYWxzQ29udGVudCwgQ291cnNlQmxvY2ssIFRhc2tcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldE9yZGVyZWREb2NzPFQgZXh0ZW5kcyB7aWQ6IHN0cmluZ30+KGRvY3M/OiBUW10sIG9yZGVyPzogc3RyaW5nW10sIHthcHBlbmRMZWZ0b3ZlcnN9ID0ge2FwcGVuZExlZnRvdmVyczpmYWxzZX0pIHtcclxuICAvLyBNYXJrIGRvYyBJRHMgdGhhdCB3aGVyZSBwcmVzZW50IGluIGdpdmVuICdvcmRlcicgYXJyYXkuXHJcbiAgLy8gV2lsbCBiZSB1c2VkIHRvIGZpbmQgbGVmdC1vdmVycyB0aGF0IHdlcmUgbm90IHByZXNlbnQgaW4gdGhlICdvcmRlcicgYXJyYXkuXHJcbiAgY29uc3QgbWFya2VkRG9jczoge1tpZDogc3RyaW5nXTogdHJ1ZX0gPSB7fTtcclxuXHJcbiAgaWYgKCFkb2NzIHx8ICFvcmRlcikge1xyXG4gICAgLy8gU3BlY2lhbCBjYXNlOiBubyBkb2NzIG9yIG5vIG9yZGVyLiBEb24ndCBmYWlsLiBKdXN0IHJldHVybiBkb2NzIGFzIGlzLlxyXG4gICAgcmV0dXJuIGRvY3M7XHJcbiAgfVxyXG5cclxuICAvLyBNYXAgZ2l2ZW4gJ29yZGVyJyBhcnJheSB0byBjb3JyZXNwb25kaW5nIGRvY3MuIEFsc28gbWFyayBpbiBtYXJrZWREb2NzLlxyXG4gIGNvbnN0IHJlc3VsdCA9IChkb2NzICYmIG9yZGVyID9cclxuICAgIG9yZGVyLm1hcChpZCA9PiB7XHJcbiAgICAgIG1hcmtlZERvY3NbaWRdID0gdHJ1ZTtcclxuICAgICAgcmV0dXJuIGRvY3MuZmluZChkb2MgPT4gZG9jLmlkID09PSBpZCk7XHJcbiAgICB9KS5maWx0ZXIoZG9jID0+ICEhZG9jKSA6XHJcbiAgICBkb2NzKTtcclxuXHJcbiAgaWYgKGFwcGVuZExlZnRvdmVycykgeyAgICAgIFxyXG4gICAgLy8gSWYgYW55IGxlZnRvdmVycyBhcmUgdGhlcmUsIGNvbmNhdCB0aGVtIGF0IHRoZSBlbmQ6XHJcbiAgICBjb25zdCBsZWZ0T3ZlcnMgPSBkb2NzLmZpbHRlcihkb2MgPT4gIW1hcmtlZERvY3NbZG9jLmlkXSk7XHJcbiAgICByZXR1cm4gcmVzdWx0LmNvbmNhdChsZWZ0T3ZlcnMpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmVSZXF1aXJlbWVudE9yZGVyPFQgZXh0ZW5kcyBSZXF1aXJlbWVudHNDb250YWluaW5nRG9jPihvYmo6IFQsIG9yZGVyRGVmaW5lcj86IE9yZGVyRGVmaW5pbmdEb2MpOiBWYWx1ZTxUPiB7XHJcbiAgbGV0IG9yZGVyRGVmaW5pbmdEb2NPYnNlcnZhYmxlOiBWYWx1ZTxPcmRlckRlZmluaW5nRG9jW10+O1xyXG4gIGlmIChvcmRlckRlZmluZXIpIHtcclxuICAgIC8vIFVzZXIgcHJvdmlkZWQgdGhlIG9yZGVyRGVmaW5pbmcgZG9jICh1c2UgY2FzZSBpcyB3aGVuIG9iaiBpcyBhIENvdXJzZSBvciBTdWJqZWN0LCB3aGljaCBjb250YWlucyBpdHMgb3JkZXIgYnkgaXRzZWxmLiBVc2VyIHRoZW4gcHJvdmlkZXMgdGhlIENvdXJzZSBvciBTdWJqZWN0IGluIGJvdGggYXJncylcclxuICAgIG9yZGVyRGVmaW5pbmdEb2NPYnNlcnZhYmxlID0gbmV3IEVtaXR0ZXIoW29yZGVyRGVmaW5lcl0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBjb25zdCBjb3Vyc2VDb2RlcyA9IG9iai50YWdzLmZpbHRlcih0YWcgPT4gdGFnLnN0YXJ0c1dpdGgoXCJjb3Vyc2U6XCIpKTtcclxuICAgIGlmIChjb3Vyc2VDb2Rlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIG5ldyBFbWl0dGVyKG9iaik7IC8vIE5vIGNvdXJzZSB0YWdzLiBOb3QgcG9zc2libGUgdG8gcmVzb2x2ZSBvcmRlci5cclxuICAgIH1cclxuICAgIG9yZGVyRGVmaW5pbmdEb2NPYnNlcnZhYmxlID0gZGIuY291cnNlcy50YWdzKC4uLmNvdXJzZUNvZGVzKS50b1ZhbHVlKCk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gb3JkZXJEZWZpbmluZ0RvY09ic2VydmFibGUubWFwKG9yZGVySG9sZGVycyA9PiB7XHJcbiAgICBjb25zdCBhYmlsaXRpZXNPcmRlciA9IGZsYXR0ZW4ob3JkZXJIb2xkZXJzLm1hcChvcmRlckhvbGRlciA9PiBvcmRlckhvbGRlci5hYmlsaXRpZXNPcmRlciB8fCBbXSkpO1xyXG4gICAgY29uc3QgY2NPcmRlciA9IGZsYXR0ZW4ob3JkZXJIb2xkZXJzLm1hcChvcmRlckhvbGRlciA9PiBvcmRlckhvbGRlci5jZW50cmFsQ29udGVudE9yZGVyIHx8IFtdKSk7XHJcbiAgICBjb25zdCBrck9yZGVyID0gZmxhdHRlbihvcmRlckhvbGRlcnMubWFwKG9yZGVySG9sZGVyID0+IG9yZGVySG9sZGVyLmtub3dsZWRnZVJlcXVpcmVtZW50c09yZGVyIHx8IFtdKSk7XHJcbiAgICBjb25zdCBvYmpDbG9uZSA9IE9iamVjdC5hc3NpZ24oe30sIG9iaik7XHJcbiAgICBpZiAob2JqQ2xvbmUuYWJpbGl0aWVzKSBvYmpDbG9uZS5hYmlsaXRpZXMgPSBnZXRPcmRlcmVkRG9jcyhvYmouYWJpbGl0aWVzLCBhYmlsaXRpZXNPcmRlcik7XHJcbiAgICBpZiAob2JqQ2xvbmUuY2VudHJhbENvbnRlbnQpIG9iakNsb25lLmNlbnRyYWxDb250ZW50ID0gZ2V0T3JkZXJlZERvY3Mob2JqLmNlbnRyYWxDb250ZW50LCBjY09yZGVyKTtcclxuICAgIGlmIChvYmpDbG9uZS5rbm93bGVkZ2VSZXF1aXJlbWVudHMpIG9iakNsb25lLmtub3dsZWRnZVJlcXVpcmVtZW50cyA9IGdldE9yZGVyZWREb2NzKG9iai5rbm93bGVkZ2VSZXF1aXJlbWVudHMsIGtyT3JkZXIpO1xyXG4gICAgcmV0dXJuIG9iakNsb25lO1xyXG4gIH0pO1xyXG59XHJcbiIsImltcG9ydCB7IFRhc2ssIExlYXJuaW5nR29hbHNDb250ZW50IH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBjb21wYXJlUHJvcCwgZmxhdHRlbiB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgS2VkQmFja2VuZFJlcG8gfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBnZXRPcmRlcmVkRG9jcyB9IGZyb20gJy4vb3JkZXJlZC1yZXF1aXJlbWVudHMnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFNvcnRlZFRhc2tzKGNvbnRlbnQ6IExlYXJuaW5nR29hbHNDb250ZW50KSB7XHJcbiAgcmV0dXJuIGdldE9yZGVyZWREb2NzKGNvbnRlbnQudGFza3MsIGNvbnRlbnQudGFza09yZGVyLCB7YXBwZW5kTGVmdG92ZXJzOiB0cnVlfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjb21wdXRlVXBkYXRlZE9yZGVyPFQgZXh0ZW5kcyB7aWQ6IHN0cmluZ30+KFxyXG4gIGRvY3M6IFRbXSxcclxuICBjdXJyZW50T3JkZXI6IHN0cmluZ1tdIHwgdW5kZWZpbmVkLFxyXG4gIHNvdXJjZTogVCxcclxuICB0YXJnZXQ6IFQsXHJcbiAgcGxhY2VtZW50OiAnYmVmb3JlJyB8ICdhZnRlcicsXHJcbiAge2FwcGVuZExlZnRvdmVyc30gPSB7YXBwZW5kTGVmdG92ZXJzOiBmYWxzZX0pIDogc3RyaW5nW11cclxue1xyXG4gIGNvbnN0IG9yZGVyZWRJZHMgPSBnZXRPcmRlcmVkRG9jcyhkb2NzLCBjdXJyZW50T3JkZXIsIHthcHBlbmRMZWZ0b3ZlcnM6IHRydWV9KS5tYXAodCA9PiB0LmlkKTtcclxuICBjb25zdCBwbGFjZUJlZm9yZSA9IHBsYWNlbWVudCA9PT0gJ2JlZm9yZSc7XHJcblxyXG4gIGNvbnN0IHJlc3VsdCA9IGZsYXR0ZW4oXHJcbiAgICBvcmRlcmVkSWRzXHJcbiAgICAgIC5maWx0ZXIoaWQgPT4gaWQgIT09IHNvdXJjZS5pZCkgLy8gUmVtb3ZlIHNvdXJjZSBpZFxyXG4gICAgICAubWFwKGlkID0+IGlkICE9PSB0YXJnZXQuaWQgP1xyXG4gICAgICAgIC8vIFdlJ3JlIG5vdCBvbiB0YXJnZXRcclxuICAgICAgICBpZCA6XHJcbiAgICAgICAgLy8gV2UncmUgb24gdGFyZ2V0LiBQbGFjZSBiZWZvcmUgb3IgYWZ0ZXI/XHJcbiAgICAgICAgcGxhY2VCZWZvcmUgP1xyXG4gICAgICAgICAgW3NvdXJjZS5pZCwgaWRdIDpcclxuICAgICAgICAgIFtpZCwgc291cmNlLmlkXVxyXG4gICAgICApXHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbiIsImltcG9ydCB7IERvY3VtZW50LCBDb3Vyc2UsIEtub3dsZWRnZVJlcXVpcmVtZW50LCBDb3Vyc2VNb2R1bGUsIFRhc2ssIFNvZnREb2N1bWVudEFjY2VzcyB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgZmxhdHRlbiwgTCB9IGZyb20gXCIuLi8uLi8uLi91dGlscy91dGlsc1wiO1xyXG5pbXBvcnQgeyBXaXRoR3JhcGhzIH0gZnJvbSAna2VkYmFja2VuZC9yZXBvJztcclxuaW1wb3J0IHsgZ2V0RW1haWxGcm9tRG9jQWNjZXNzIH0gZnJvbSAnLi4vdXRpbHMnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFVuY292ZXJlZEtub3dsZWRnZVJlcXVpcmVtZW50cyhjb3Vyc2U6IENvdXJzZSkge1xyXG4gIGNvbnN0IHVuY292ZXJlZFJlcXVpcmVtZW50cyA9IGNvdXJzZS5rbm93bGVkZ2VSZXF1aXJlbWVudHMucmVkdWNlKChyZXN1bHQsIGl0ZW0pID0+IHtcclxuICAgIHJlc3VsdFtpdGVtLmlkXSA9IGl0ZW07XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH0sIHt9IGFzIHsgW2lkOiBzdHJpbmddOiBLbm93bGVkZ2VSZXF1aXJlbWVudCB9KTtcclxuXHJcbiAgY291cnNlLnRhc2tzLmZvckVhY2godGFzayA9PiB7XHJcbiAgICB0YXNrLmtub3dsZWRnZVJlcXVpcmVtZW50cy5mb3JFYWNoKGtyID0+IHtcclxuICAgICAgZGVsZXRlIHVuY292ZXJlZFJlcXVpcmVtZW50c1trci5pZF07XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIE9iamVjdC5rZXlzKHVuY292ZXJlZFJlcXVpcmVtZW50cykubWFwKGlkID0+IHVuY292ZXJlZFJlcXVpcmVtZW50c1tpZF0pO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFJlcXNSZWZlcmVuY2luZ0RvYyB7XHJcbiAga25vd2xlZGdlUmVxdWlyZW1lbnRzOiBBcnJheTx7aWQ6IHN0cmluZ30+XHJcbiAgYWJpbGl0aWVzOiBBcnJheTx7aWQ6IHN0cmluZ30+XHJcbiAgY2VudHJhbENvbnRlbnQ6IEFycmF5PHtpZDogc3RyaW5nfT5cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldElkc05vdENvdmVyZWRCeVRhc2tzKGNvdXJzZTogQ291cnNlKSA6IHtbaWQ6IHN0cmluZ106IHRydWV9IHtcclxuICByZXR1cm4gZ2V0SWRzTm90Q292ZXJlZEJ5UmVxUmVmZXJlbmNpbmdEb2NzKFxyXG4gICAgW2NvdXJzZSBhcyBXaXRoR3JhcGhzPENvdXJzZSwgXCJhYmlsaXRpZXNcIiB8IFwiY2VudHJhbENvbnRlbnRcIiB8IFwia25vd2xlZGdlUmVxdWlyZW1lbnRzXCI+XSxcclxuICAgIGNvdXJzZS50YXNrcyBhcyBXaXRoR3JhcGhzPFRhc2ssIFwiYWJpbGl0aWVzXCIgfCBcImNlbnRyYWxDb250ZW50XCIgfCBcImtub3dsZWRnZVJlcXVpcmVtZW50c1wiPltdKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldElkc05vdENvdmVyZWRCeVJlcVJlZmVyZW5jaW5nRG9jcyhcclxuICB0ZW1wbGF0ZXM6IFJlcXNSZWZlcmVuY2luZ0RvY1tdLFxyXG4gIGRvY3NCZWluZ0NoZWNrZWQ6IFJlcXNSZWZlcmVuY2luZ0RvY1tdKSA6IHtbaWQ6IHN0cmluZ106IHRydWV9XHJcbntcclxuICBjb25zdCB1bmNvdmVyZWRJZHMgPSB7fTtcclxuICAvLyAxLiBNYXJrIHRoZSBpZHMgb2YgYWxsIGtub3dsZWRnZSByZXF1aXJlbWVudHMsIGFiaWxpdGllcyBhbmQgY2VudHJhbCBjb250ZW50IGZvciB0aGlzIGNvdXJzZTpcclxuICB0ZW1wbGF0ZXMuZm9yRWFjaChjb3Vyc2UgPT4ge1xyXG4gICAgY291cnNlLmtub3dsZWRnZVJlcXVpcmVtZW50cy5mb3JFYWNoKHIgPT4ge1xyXG4gICAgICB1bmNvdmVyZWRJZHNbci5pZF0gPSB0cnVlO1xyXG4gICAgfSk7XHJcbiAgICBjb3Vyc2UuYWJpbGl0aWVzLmZvckVhY2goYSA9PiB7XHJcbiAgICAgIHVuY292ZXJlZElkc1thLmlkXSA9IHRydWU7XHJcbiAgICB9KTtcclxuICAgIGNvdXJzZS5jZW50cmFsQ29udGVudC5mb3JFYWNoKGNjID0+IHtcclxuICAgICAgdW5jb3ZlcmVkSWRzW2NjLmlkXSA9IHRydWU7XHJcbiAgICB9KTtcclxuICB9KTtcclxuICAvLyAyLiBMaXN0IGFsbCB0YXNrcyBhbmQgdW5tYXJrIGFsbCBpZHMgdGhhdCB0aGV5IHJlZmVyIHRvXHJcbiAgZG9jc0JlaW5nQ2hlY2tlZC5mb3JFYWNoKGRvYyA9PiB7XHJcbiAgICBkb2Mua25vd2xlZGdlUmVxdWlyZW1lbnRzLmZvckVhY2goa3IgPT4ge1xyXG4gICAgICBkZWxldGUgdW5jb3ZlcmVkSWRzW2tyLmlkXTtcclxuICAgIH0pO1xyXG4gICAgZG9jLmFiaWxpdGllcy5mb3JFYWNoKGEgPT4ge1xyXG4gICAgICBkZWxldGUgdW5jb3ZlcmVkSWRzW2EuaWRdO1xyXG4gICAgfSk7XHJcbiAgICBkb2MuY2VudHJhbENvbnRlbnQuZm9yRWFjaChjYyA9PiB7XHJcbiAgICAgIGRlbGV0ZSB1bmNvdmVyZWRJZHNbY2MuaWRdO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbiAgcmV0dXJuIHVuY292ZXJlZElkcztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNhbml0eUNoZWNrIChjb3Vyc2U6IENvdXJzZSkge1xyXG4gIGZ1bmN0aW9uIGhhc0R1cGxpY2F0ZVRhc2tzKGNvdXJzZTogQ291cnNlKSB7XHJcbiAgICBjb25zdCB0YXNrSWRzOiB7W2lkOnN0cmluZ106IGJvb2xlYW59ID0ge307XHJcbiAgICByZXR1cm4gZmxhdHRlbihjb3Vyc2UubW9kdWxlcy5tYXAobW9kdWxlID0+IG1vZHVsZS50YXNrSWRzLm1hcCh0YXNrSWQgPT4ge1xyXG4gICAgICBpZiAodGFza0lkc1t0YXNrSWRdKSB7XHJcbiAgICAgICAgY29uc3QgdGFzayA9IGNvdXJzZS50YXNrcy5maW5kKHQgPT4gdC5pZCA9PT0gdGFza0lkKTtcclxuICAgICAgICByZXR1cm4gTGBTYW1tYSB1cHBnaWZ0IGbDtnJla29tbWVyIGZsZXJhIGfDpW5nZXI6IFwiJHt0YXNrLm5hbWV9XCJgO1xyXG4gICAgICB9XHJcbiAgICAgIHRhc2tJZHNbdGFza0lkXSA9IHRydWU7XHJcbiAgICB9KS5maWx0ZXIoeCA9PiB4KSkpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gdGFza3NXaXRoU2FtZVVybChjb3Vyc2U6IENvdXJzZSkge1xyXG4gICAgY29uc3QgdGFza1VybHM6IHtbdXJsOnN0cmluZ106IFRhc2t9ID0ge307XHJcbiAgICByZXR1cm4gY291cnNlLnRhc2tzLm1hcCh0YXNrID0+IHtcclxuICAgICAgaWYgKHRhc2sudXJsKSB7XHJcbiAgICAgICAgaWYgKHRhc2tVcmxzW3Rhc2sudXJsXSkge1xyXG4gICAgICAgICAgcmV0dXJuIExgVHbDpSB1cHBnaWZ0ZXIgcGVrYXIgcMOlIHNhbW1hIFVSTDogXCIke3Rhc2tVcmxzW3Rhc2sudXJsXS5uYW1lfVwiIHNhbXQgXCIke3Rhc2submFtZX1cImA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRhc2tVcmxzW3Rhc2sudXJsXSA9IHRhc2s7XHJcbiAgICAgIH1cclxuICAgIH0pLmZpbHRlcih4ID0+IHgpOyAgXHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBoYXNFbXB0eU1vZHVsZU5hbWVzKGNvdXJzZTogQ291cnNlKSB7XHJcbiAgICByZXR1cm4gY291cnNlLm1vZHVsZXMuc29tZSAobW9kdWxlID0+IG1vZHVsZS5uYW1lID09PSBcIlwiKSAmJlxyXG4gICAgICBMYERldCBmaW5ucyBtaW5zdCBlbiBtb2R1bCB1dGFuIGFuZ2l2ZXQgbmFtbmA7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBoYXNEdXBsaWNhdGVNb2R1bGVOYW1lcyhjb3Vyc2U6IENvdXJzZSkge1xyXG4gICAgY29uc3QgbW9kdWxlTmFtZXM6IHtbbmFtZTogc3RyaW5nXTogdHJ1ZX0gPSB7fTtcclxuICAgIHJldHVybiBjb3Vyc2UubW9kdWxlcy5tYXAobW9kdWxlID0+IHtcclxuICAgICAgaWYgKG1vZHVsZS5uYW1lICYmIG1vZHVsZU5hbWVzW21vZHVsZS5uYW1lXSkge1xyXG4gICAgICAgIHJldHVybiBMYE1vZHVsZW4gbWVkIG5hbW4gJHttb2R1bGUubmFtZX0gZsO2cmVrb21tZXIgZmxlcmEgZ8OlbmdlcmA7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKG1vZHVsZS5uYW1lKSBtb2R1bGVOYW1lc1ttb2R1bGUubmFtZV0gPSB0cnVlO1xyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGNvbnN0IGNoZWNrcyA9IGZsYXR0ZW4oW1xyXG4gICAgaGFzRHVwbGljYXRlVGFza3MoY291cnNlKSxcclxuICAgIHRhc2tzV2l0aFNhbWVVcmwoY291cnNlKSxcclxuICAgIGhhc0VtcHR5TW9kdWxlTmFtZXMoY291cnNlKSxcclxuICAgIGhhc0R1cGxpY2F0ZU1vZHVsZU5hbWVzKGNvdXJzZSlcclxuICBdKTtcclxuXHJcbiAgcmV0dXJuIGNoZWNrcy5maWx0ZXIgKHJlc3VsdCA9PiByZXN1bHQpO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFRhc2tzUGVySWQgKGNvdXJzZTogQ291cnNlKSB7XHJcbiAgY29uc3QgcmVzdWx0OiB7W2lkOiBzdHJpbmddOiBUYXNrW119ID0ge307XHJcbiAgZnVuY3Rpb24gYWRkKGlkOiBzdHJpbmcsIHRhc2s6IFRhc2spIHtcclxuICAgIGNvbnN0IGxpc3QgPSByZXN1bHRbaWRdIHx8IChyZXN1bHRbaWRdID0gW10pO1xyXG4gICAgbGlzdC5wdXNoKHRhc2spO1xyXG4gIH1cclxuICBjb3Vyc2UudGFza3MuZm9yRWFjaCh0YXNrID0+IHtcclxuICAgIHRhc2suYWJpbGl0aWVzLmZvckVhY2goYSA9PiBhZGQoYS5pZCwgdGFzaykpO1xyXG4gICAgdGFzay5jZW50cmFsQ29udGVudC5mb3JFYWNoKGMgPT4gYWRkKGMuaWQsIHRhc2spKTtcclxuICAgIHRhc2suZnV0dXJlQWJpbGl0aWVzLmZvckVhY2goZmEgPT4gYWRkKGZhLCB0YXNrKSk7XHJcbiAgfSk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuLyoqIFJldHVybnMgYW4gYWNjZXNzIGxpc3QgZm9yIGEgY291cnNlIGluIGEgYmFja3dhcmQgY29tcGF0aWJsZSB3YXkgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFNvZnRBY2Nlc3NMaXN0IChjb3Vyc2U6IENvdXJzZSk6IFNvZnREb2N1bWVudEFjY2Vzc1tdIHtcclxuICBjb25zdCB7cmVzcG9uc2libGVUZWFjaGVyc30gPSBjb3Vyc2U7XHJcbiAgY29uc3QgcmVzdWx0ID0gcmVzcG9uc2libGVUZWFjaGVycy5tYXAoZGEgPT4oe1xyXG4gICAgbmFtZTogZGEubmFtZSxcclxuICAgIGVtYWlsOiBnZXRFbWFpbEZyb21Eb2NBY2Nlc3MoZGEpLFxyXG4gICAgYWNjZXNzOiBkYS5hY2Nlc3MgfHwgJ2VkaXQnXHJcbiAgfSBhcyBTb2Z0RG9jdW1lbnRBY2Nlc3MpKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgSGFzaFJvdXRlciBhcyBSb3V0ZXIsIFJvdXRlLCBMaW5rLCBSZWRpcmVjdCB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xyXG5pbXBvcnQgeyBJQ291cnNlRWRpdG9ySG9zdCB9IGZyb20gXCIuLi9pbnRlcmZhY2VzL2NvdXJzZS1lZGl0b3ItaG9zdFwiO1xyXG5pbXBvcnQgeyBDb3Vyc2UgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IHJlYWRCbG9iQXNUZXh0LCBhbGxvd0NvcHksIHJlYWRCbG9iQXNEYXRhVXJsIH0gZnJvbSBcIi4uL3V0aWxzXCI7XHJcbmltcG9ydCB7IHNob3dFcnJvciwgTCB9IGZyb20gXCIuLi8uLi8uLi91dGlscy91dGlsc1wiO1xyXG5pbXBvcnQgeyBjcmVhdGVVVUlEIH0gZnJvbSBcImtlZGJhY2tlbmQvY2xpZW50XCI7XHJcbmltcG9ydCB7IGhhc0FjY2VzcyB9IGZyb20gXCIuLi8uLi8uLi9hY2Nlc3MtY29udHJvbFwiO1xyXG5pbXBvcnQgZW52IGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvS0VELmVudic7XHJcblxyXG50eXBlIENhbGxiYWNrID0gKCkgPT4gdm9pZDtcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgdGl0bGU6IHN0cmluZyxcclxuICBhY3RpdmVQYWdlOiBCYW5uZXJNZW51SXRlbSxcclxuICBjYWxsYmFja3M/OiB7IFttZW51TmFtZTogc3RyaW5nXTogQ2FsbGJhY2sgfSxcclxuICByb3V0ZXM6IHsgW21lbnVOYW1lOiBzdHJpbmddOiBzdHJpbmcgfSAmIHsgZmVlZGJhY2s6IHN0cmluZyB9LFxyXG4gIGJhY2tncm91bmRJbWFnZT86IHN0cmluZyxcclxuICBpc1RlbXBsYXRlPyxcclxuICBob3N0PzogSUNvdXJzZUVkaXRvckhvc3QsXHJcbiAgY291cnNlPzogQ291cnNlLFxyXG4gIG9yaWdDb3Vyc2U/OiBDb3Vyc2VcclxufVxyXG5cclxudHlwZSBCYW5uZXJNZW51SXRlbSA9XHJcbiAgXCJjb3Vyc2VCdWlsZGVyXCIgfFxyXG4gIFwic3R1ZGVudFBhZ2VcIiB8XHJcbiAgXCJ0ZW1wbGF0ZUJ1aWxkZXJcIiB8XHJcbiAgXCJzdWJqZWN0c1wiIHxcclxuICBcInNjaG9vbHNcIjtcclxuXHJcbmNvbnN0IEFkbWluTWVudUl0ZW1zID0gW1xyXG4gIHsgbmFtZTogXCJzY2hvb2xzXCIsIHRleHQ6IExgU2tvbG9yYCwgcm91dGU6IFwiL3NjaG9vbHNcIiB9LFxyXG4gIHsgbmFtZTogXCJzdWJqZWN0c1wiLCB0ZXh0OiBMYMOEbW5lbmAsIHJvdXRlOiBcIi9zdWJqZWN0c1wiIH0sXHJcbiAgLy97bmFtZTogXCJ0ZW1wbGF0ZUJ1aWxkZXJcIiwgdGV4dDogTGBNYWxsYnlnZ2FyZW5gLCByb3V0ZTogXCIvY291cnNlLXRlbXBsYXRlc1wifSxcclxuXVxyXG5cclxuY29uc3QgTm9uQWRtaW5NZW51SXRlbXMgPSBbXHJcbiAgeyBuYW1lOiBcImNvdXJzZUJ1aWxkZXJcIiwgdGV4dDogTGBLdXJzYnlnZ2FyZW5gLCByb3V0ZTogXCIvY291cnNlcy9uZXdcIiB9LFxyXG4gIHsgbmFtZTogXCJzdHVkZW50UGFnZVwiLCB0ZXh0OiBMYEVsZXZzaWRhYCwgcm91dGU6IFwiXCIgfSxcclxuICB7IG5hbWU6IFwiZmVlZGJhY2tcIiwgdGV4dDogPHNwYW4+PGkgY2xhc3NOYW1lPVwiZmEgZmEtY29tbWVudGluZy1vXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPiBGZWVkYmFjazwvc3Bhbj4sIHJvdXRlOiBcImh0dHBzOi8va2cua3Vuc2thcHNwb3J0ZW4uc2Uva3Vyc2J5Z2dhcmVuL1wiIH1cclxuXVxyXG5cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIG9uRHJvcEltYWdlKGV2OiBSZWFjdC5EcmFnRXZlbnQ8SFRNTERpdkVsZW1lbnQ+LCBob3N0OiBJQ291cnNlRWRpdG9ySG9zdCwgY291cnNlOiBDb3Vyc2UsIG9yaWdDb3Vyc2U6IENvdXJzZSkge1xyXG4gIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgY29uc3QgZmlsZXMgPSBldi5kYXRhVHJhbnNmZXIuZmlsZXM7XHJcbiAgbGV0IHVybCA9IG51bGw7XHJcbiAgY29uc3QgaXRlbXMgPSBBcnJheS5mcm9tKGV2LmRhdGFUcmFuc2Zlci5pdGVtcyk7XHJcbiAgaWYgKGZpbGVzLmxlbmd0aCA+IDApIHtcclxuICAgIGNvbnN0IGZpbGUgPSBmaWxlc1swXTtcclxuICAgIGlmIChmaWxlLnNpemUgPiAyICogMTAyNCAqIDEwMjQpIHtcclxuICAgICAgc2hvd0Vycm9yKExgS2FuIGludGUgbGFkZGEgdXBwIGJpbGRlciBzdMO2cnJlIMOkbiAyIE1CYCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIC8vdXJsID0gYXdhaXQgcmVhZEJsb2JBc0RhdGFVcmwoZmlsZSk7XHJcbiAgICBjb25zdCBmb3JtID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICBmb3JtLmFwcGVuZChcImZpbGVzXCIsIGZpbGUpO1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgZW52LmtlZEJhY2tlbmRDbGllbnQuaHR0cC5mZXRjaChcclxuICAgICAgJ3dlYi11cGxvYWQnLFxyXG4gICAgICAncHV0JyxcclxuICAgICAge30sXHJcbiAgICAgIHt9LFxyXG4gICAgICB7XHJcbiAgICAgICAgYm9keTogZm9ybVxyXG4gICAgICB9KTtcclxuICAgIGlmIChyZXMuc3RhdHVzICE9PSAyMDApIHtcclxuICAgICAgc2hvd0Vycm9yKExgS3VuZGUgaW50ZSBsYWRkYSB1cHAgZmlsZW4gdGlsbCBHb29nbGUgU3RvcmFnZWApO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB1cmwgPSBhd2FpdCByZXMudGV4dCgpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgIGNvbnN0IGl0ZW0gPSBpdGVtc1tpXTtcclxuICAgICAgaWYgKGl0ZW0udHlwZS5tYXRjaCgnXnRleHQvdXJpLWxpc3QnKSkge1xyXG4gICAgICAgIC8vIFVSSVxyXG4gICAgICAgIHVybCA9IGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gaXRlbS5nZXRBc1N0cmluZyhyZXNvbHZlKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgaWYgKHVybCA9PSBudWxsKSB7XHJcbiAgICBzaG93RXJyb3IoTGBLdW5kZSBpbnRlIGhpdHRhIG7DpWdvbiBiaWxkIGkgaW5uZWjDpWxsZXRgKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgc2V0Q291cnNlSW1hZ2UoY291cnNlLCBvcmlnQ291cnNlLCBob3N0LCB1cmwpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2V0Q291cnNlSW1hZ2UoXHJcbiAgY291cnNlOiBDb3Vyc2UsXHJcbiAgb3JpZ0NvdXJzZTogQ291cnNlLFxyXG4gIGhvc3Q6IElDb3Vyc2VFZGl0b3JIb3N0LFxyXG4gIHVybDogc3RyaW5nXHJcbikge1xyXG4gIGNvbnN0IGltYWdlSWQgPSBjcmVhdGVVVUlEKCk7XHJcbiAgaG9zdC51cGRhdGUoe1xyXG4gICAgaW1hZ2VJZDogeyAkc2V0OiBpbWFnZUlkIH0sXHJcbiAgICBpbWFnZXM6IHtcclxuICAgICAgJHNldDogW3tcclxuICAgICAgICBpZDogaW1hZ2VJZCxcclxuICAgICAgICB1cmwsXHJcbiAgICAgICAgYWNsOiBbXHJcbiAgICAgICAgICBgcm9sZTpVU0VSOlJgLFxyXG4gICAgICAgICAgYHNjaG9vbFJvbGU6JHtlbnYuY3VycmVudFVzZXIuc2Nob29sfS9FTVBMT1lFRTpTYFxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgJG1ldGE6ICdhZGQnXHJcbiAgICAgIH1dXHJcbiAgICB9XHJcbiAgfSk7XHJcbn1cclxuXHJcbi8qIFRoaXMgdmVyc2lvbiBoYWQgdGhlIGJ1ZyB0aGF0IG9sZCBpbWFnZXMgd2VyZSBub3QgcmVwbGFjZWQuXHJcbk9uZSBjb3Vyc2UgYXQgVXBwc2FsYSBjb250YWluZWQgMTIgaW1hZ2VzLlxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRDb3Vyc2VJbWFnZU9sZChcclxuICBjb3Vyc2U6IENvdXJzZSxcclxuICBvcmlnQ291cnNlOiBDb3Vyc2UsXHJcbiAgaG9zdDogSUNvdXJzZUVkaXRvckhvc3QsXHJcbiAgdXJsOiBzdHJpbmcpXHJcbntcclxuICBpZiAoIW9yaWdDb3Vyc2UgfHwgIW9yaWdDb3Vyc2UuaW1hZ2VJZCkge1xyXG4gICAgY29uc3QgaW1hZ2VJZCA9IGNyZWF0ZVVVSUQoKTtcclxuICAgIGhvc3QudXBkYXRlKHtcclxuICAgICAgaW1hZ2VJZDogeyAkc2V0OiBpbWFnZUlkIH0sXHJcbiAgICAgIGltYWdlczoge1xyXG4gICAgICAgICRwdXNoOiBbe1xyXG4gICAgICAgICAgaWQ6IGltYWdlSWQsXHJcbiAgICAgICAgICB1cmwsXHJcbiAgICAgICAgICBhY2w6IGNvdXJzZS5pc1RlbXBsYXRlID8gW1wicm9sZTpVU0VSOlJcIl0gOiBbXCJyb2xlOlVTRVI6UlwiLCBgc2Nob29sUm9sZToke2Vudi5jdXJyZW50VXNlci5zY2hvb2x9L0VNUExPWUVFOlNgXSxcclxuICAgICAgICAgICRtZXRhOiAnYWRkJ1xyXG4gICAgICAgIH1dXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICAvLyBVcGRhdGUgZXhpc3RpbmcgaW1hZ2U6XHJcbiAgICBjb25zdCBpbWdJZHggPSBjb3Vyc2UuaW1hZ2VzLmZpbmRJbmRleChpbWcgPT4gaW1nLmlkID09PSBjb3Vyc2UuaW1hZ2VJZCk7XHJcbiAgICBpZiAoaW1nSWR4ID49IDApIHtcclxuICAgICAgY29uc3QgaW1hZ2VFbnRpdHkgPSBjb3Vyc2UuaW1hZ2VzW2ltZ0lkeF07XHJcbiAgICAgIGlmIChjb3Vyc2UuaXNUZW1wbGF0ZSkge1xyXG4gICAgICAgIC8vIFRlbXBsYXRlczogVXBkYXRlIHRoZSB0ZW1wbGF0ZSBpbWFnZSBjb250ZW50OlxyXG4gICAgICAgIGhvc3QudXBkYXRlKHtcclxuICAgICAgICAgIGltYWdlczoge1xyXG4gICAgICAgICAgICAkc3BsaWNlOiBbW2ltZ0lkeCwgMSwge1xyXG4gICAgICAgICAgICAgIC4uLmltYWdlRW50aXR5LFxyXG4gICAgICAgICAgICAgIHVybCxcclxuICAgICAgICAgICAgICAkbWV0YTogJ3VwZGF0ZSdcclxuICAgICAgICAgICAgfV1dXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBSZWFsIGNvdXJzZXM6IFJlcGxhY2Ugd2l0aCBhIG5ldyBpbWFnZVxyXG4gICAgICAgIGNvbnN0IGltYWdlSWQgPSBjcmVhdGVVVUlEKCk7XHJcbiAgICAgICAgaG9zdC51cGRhdGUoe1xyXG4gICAgICAgICAgaW1hZ2VJZDogeyAkc2V0OiBpbWFnZUlkIH0sXHJcbiAgICAgICAgICBpbWFnZXM6IHtcclxuICAgICAgICAgICAgJHNwbGljZTogW1tpbWdJZHgsIDEsIHtcclxuICAgICAgICAgICAgICBpZDogaW1hZ2VJZCxcclxuICAgICAgICAgICAgICB1cmwsXHJcbiAgICAgICAgICAgICAgYWNsOiBbXHJcbiAgICAgICAgICAgICAgICBgcm9sZTpVU0VSOlJgLFxyXG4gICAgICAgICAgICAgICAgYHNjaG9vbFJvbGU6JHtlbnYuY3VycmVudFVzZXIuc2Nob29sfS9FTVBMT1lFRTpTYFxyXG4gICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgJG1ldGE6ICdhZGQnXHJcbiAgICAgICAgICAgIH1dXVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNob3dFcnJvcihMYEt1bmRlIGludGUgdXBwZGF0ZXJhIGJpbGRlbi5gKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuKi9cclxuXHJcbmV4cG9ydCBjb25zdCBDb3Vyc2VCYW5uZXIgPSAocHJvcHM6IFByb3BzKSA9PiB7XHJcbiAgY29uc3QgeyB0aXRsZSwgaXNUZW1wbGF0ZSwgaG9zdCwgY291cnNlLCBvcmlnQ291cnNlLCBiYWNrZ3JvdW5kSW1hZ2UsIGFjdGl2ZVBhZ2UgfSA9IHByb3BzO1xyXG4gIGNvbnN0IGlzQWRtaW4gPSBlbnYuY3VycmVudFVzZXIucm9sZXMuc29tZShyb2xlID0+IHJvbGUgPT09IFwiQURNSU5cIik7XHJcbiAgbGV0IG1lbnVJdGVtcyA9IE5vbkFkbWluTWVudUl0ZW1zO1xyXG4gIGlmIChpc0FkbWluKSBtZW51SXRlbXMgPSBBZG1pbk1lbnVJdGVtcy5jb25jYXQobWVudUl0ZW1zKTtcclxuXHJcbiAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwic3Ytcm93IHN2LWxheW91dCBzdi1za2lwLXNwYWNlclwiPlxyXG4gICAgPGRpdiBjbGFzc05hbWU9XCJzdi1sYXlvdXQgc3Ytc2tpcC1zcGFjZXIgc3YtY29sdW1uLTEyXCI+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3Ytc2NyaXB0LXBvcnRsZXQgc3YtcG9ydGxldCBzdi1za2lwLXNwYWNlclwiPlxyXG4gICAgICAgIHtiYWNrZ3JvdW5kSW1hZ2UgJiYgPHN0eWxlPntgXHJcbiAgICAgICAgLnBhZ2VIZWFkZXIge1xyXG4gICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCcke2JhY2tncm91bmRJbWFnZX0nKSAhaW1wb3J0YW50O1xyXG4gICAgICAgIH1cclxuICAgICAgYH08L3N0eWxlPn1cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhZ2VIZWFkZXJcIlxyXG4gICAgICAgICAgb25EcmFnT3Zlcj17Y291cnNlICYmIGFsbG93Q29weX1cclxuICAgICAgICAgIG9uRHJvcD17Y291cnNlICYmIChldiA9PiBvbkRyb3BJbWFnZShldiwgaG9zdCwgY291cnNlLCBvcmlnQ291cnNlKSl9PlxyXG4gICAgICAgICAgPGE+XHJcbiAgICAgICAgICAgIDxoMT57dGl0bGV9PC9oMT5cclxuICAgICAgICAgIDwvYT5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0dG9uc0ZpZWxkXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0dG9uc0NvbnRhaW5lclwiPlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbFwiPjwvZGl2PlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdob3Jpem9udGFsTWVudSc+XHJcbiAgICAgICAgICAgICAgICA8dWw+XHJcbiAgICAgICAgICAgICAgICAgIHttZW51SXRlbXMubWFwKGl0ZW0gPT4gKHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzQWN0aXZlOiBhY3RpdmVQYWdlID09PSBpdGVtLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IHByb3BzLmNhbGxiYWNrcyAmJiBwcm9wcy5jYWxsYmFja3NbaXRlbS5uYW1lXSxcclxuICAgICAgICAgICAgICAgICAgICBnaXZlblJvdXRlOiAocHJvcHMucm91dGVzICYmIHByb3BzLnJvdXRlc1tpdGVtLm5hbWVdKSxcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Um91dGU6IGl0ZW0ucm91dGVcclxuICAgICAgICAgICAgICAgICAgfSkpLmZpbHRlcih4ID0+IHguY2FsbGJhY2sgfHwgeC5kZWZhdWx0Um91dGUgfHwgeC5naXZlblJvdXRlKS5tYXAoKHsgaXRlbSwgaXNBY3RpdmUsIGNhbGxiYWNrLCBkZWZhdWx0Um91dGUsIGdpdmVuUm91dGUgfSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA8bGlcclxuICAgICAgICAgICAgICAgICAgICAgIGtleT17aXRlbS5uYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtpc0FjdGl2ZSA/IFwiYWN0aXZlUGFnZVwiIDogXCJcIn1cclxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2NhbGxiYWNrfVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgIHtjYWxsYmFjayA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhPntpdGVtLnRleHR9PC9hPiA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRSb3V0ZSB8fCBnaXZlblJvdXRlID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBnaXZlblJvdXRlIHx8IC9eaHR0cFtzXVxcOlxcL1xcLy9pLnRlc3QoZGVmYXVsdFJvdXRlKSA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPXtnaXZlblJvdXRlIHx8IGRlZmF1bHRSb3V0ZX0+e2l0ZW0udGV4dH08L2E+IDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMaW5rIHRvPXtkZWZhdWx0Um91dGV9PntpdGVtLnRleHR9PC9MaW5rPiA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGE+e2l0ZW0udGV4dH08L2E+fVxyXG4gICAgICAgICAgICAgICAgICAgIDwvbGk+O1xyXG4gICAgICAgICAgICAgICAgICB9KX1cclxuICAgICAgICAgICAgICAgIDwvdWw+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgPC9kaXY+XHJcbn1cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBmaW5kRE9NTm9kZSB9IGZyb20gJ3JlYWN0LWRvbSc7XHJcbmltcG9ydCB7IENvdXJzZSwgQ291cnNlTW9kdWxlLCBJbWFnZSwgVGFzaywgRG9jdW1lbnQsIEFiaWxpdHkgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IGNyZWF0ZVVVSUQgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XHJcbmltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XHJcbmltcG9ydCB1cGRhdGUgZnJvbSAncmVhY3QtYWRkb25zLXVwZGF0ZSc7XHJcbmltcG9ydCB7IElDb3Vyc2VFZGl0b3JIb3N0IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9jb3Vyc2UtZWRpdG9yLWhvc3QnO1xyXG5pbXBvcnQgeyBDb3Vyc2VNb2R1bGVDb21wb25lbnQgfSBmcm9tICcuL2NvdXJzZS1tb2R1bGUnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBjb3Vyc2U6IENvdXJzZTtcclxuICBob3N0OiBJQ291cnNlRWRpdG9ySG9zdDtcclxuICBpZHNOb3RDb3ZlcmVkQnlBbnlUYXNrOiB7W2lkOiBzdHJpbmddOiB0cnVlfTtcclxufVxyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENvdXJzZU1vZHVsZUxpc3QgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsU3RhdGU+IHtcclxuICBfZWxlbTogSFRNTERpdkVsZW1lbnQ7XHJcbiAgX21vZHVsZVJlZnM6IHtbbW9kdWxlSWQ6IHN0cmluZ106IENvdXJzZU1vZHVsZUNvbXBvbmVudH07XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5fbW9kdWxlUmVmcyA9IHt9O1xyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFkZE1vZHVsZSgpIHtcclxuICAgIHRoaXMucHJvcHMuaG9zdC51cGRhdGUoe21vZHVsZXM6IHskcHVzaDogW3tcclxuICAgICAgbmFtZTogXCJOeSBrdXJzbW9kdWxcIixcclxuICAgICAgaWQ6IGNyZWF0ZVVVSUQoKSxcclxuICAgICAgcmVzb3VyY2VzOiBbXSxcclxuICAgICAgdGFza0lkczogW11cclxuICAgICB9IGFzIENvdXJzZU1vZHVsZVxyXG4gICAgXX19KTtcclxuICB9XHJcblxyXG4gIGdldE9yZGVyZWRNb2R1bGVzKCkge1xyXG4gICAgY29uc3QgeyBjb3Vyc2UgfSA9IHRoaXMucHJvcHM7XHJcbiAgICBjb25zdCBtb2R1bGVPcmRlciA9IGNvdXJzZS5tb2R1bGVPcmRlciB8fCBjb3Vyc2UubW9kdWxlcy5tYXAobSA9PiBtLmlkKTtcclxuICAgIHJldHVybiBtb2R1bGVPcmRlclxyXG4gICAgICAvLyBNYXAgb3JkZXJlZCBpZCB0byBtb2R1bGVcclxuICAgICAgLm1hcChpZCA9PiBjb3Vyc2UubW9kdWxlcy5maW5kKG0gPT4gbS5pZCA9PT0gaWQpKVxyXG4gICAgICAvLyBJZ25vcmUgZW50cmllcyB0aGF0IG9ubHkgZXhpc3RzIGluIG1vZHVsZU9yZGVyIGJ1dCBub3QgaW4gbW9kdWxlc1xyXG4gICAgICAuZmlsdGVyKG0gPT4gISFtKVxyXG4gICAgICAvLyBBcHBlbmQgbW9kdWxlcyBhdCBlbmQgdGhhdCBhcmUgbm90IGxpc3RlZCBpbiBtb2R1bGVPcmRlclxyXG4gICAgICAuY29uY2F0IChjb3Vyc2UubW9kdWxlcy5maWx0ZXIobSA9PiAhbW9kdWxlT3JkZXIuZmluZChpZCA9PiBtLmlkID09PSBpZCkpKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHJlb3JkZXIgKG1vZHVsZUlkOiBzdHJpbmcsIGRpcmVjdGlvbjogLTEgfCAxKSB7XHJcbiAgICBjb25zdCB7IGNvdXJzZSB9ID0gdGhpcy5wcm9wcztcclxuICAgIGNvbnN0IG9yZGVyZWRNb2R1bGVzID0gdGhpcy5nZXRPcmRlcmVkTW9kdWxlcygpO1xyXG4gICAgY29uc3QgbW9kdWxlSW5kZXggPSBvcmRlcmVkTW9kdWxlcy5maW5kSW5kZXgobSA9PiBtLmlkID09PSBtb2R1bGVJZCk7XHJcbiAgICBjb25zdCBuZXdNb2R1bGVJbmRleCA9IG1vZHVsZUluZGV4ICsgZGlyZWN0aW9uO1xyXG4gICAgaWYgKG5ld01vZHVsZUluZGV4IDwgMCB8fCBuZXdNb2R1bGVJbmRleCA+PSBvcmRlcmVkTW9kdWxlcy5sZW5ndGgpIHtcclxuICAgICAgLy8gQ2Fubm90IG9yZGVyIG91dHNpZGUgbGltaXRzLlxyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBjdXJyZW50TW9kdWxlQXRQb3NpdGlvbiA9IG9yZGVyZWRNb2R1bGVzW25ld01vZHVsZUluZGV4XTtcclxuICAgIGNvbnN0IG1vZHVsZU9yZGVyID0gb3JkZXJlZE1vZHVsZXMubWFwKG0gPT4gbS5pZCk7XHJcbiAgICBtb2R1bGVPcmRlcltuZXdNb2R1bGVJbmRleF0gPSBtb2R1bGVJZDtcclxuICAgIG1vZHVsZU9yZGVyW21vZHVsZUluZGV4XSA9IGN1cnJlbnRNb2R1bGVBdFBvc2l0aW9uLmlkO1xyXG4gICAgY29uc3Qgb3JpZ1Njcm9sbFBvcyA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XHJcbiAgICBhd2FpdCB0aGlzLnByb3BzLmhvc3QudXBkYXRlKHtcclxuICAgICAgbW9kdWxlT3JkZXI6IHskc2V0OiBtb2R1bGVPcmRlcn1cclxuICAgIH0pO1xyXG4gICAgLy8gTm93LCBzY3JvbGwgc21vb3RobHkgaW50byB2aWV3IGFmdGVyIHJlb3JkZXJpbmc6XHJcbiAgICBjb25zdCBlbGVtTW9kdWxlOiBIVE1MRWxlbWVudCA9IGZpbmRET01Ob2RlKHRoaXMuX21vZHVsZVJlZnNbbW9kdWxlSWRdKSBhcyBIVE1MRWxlbWVudDtcclxuICAgIGlmIChlbGVtTW9kdWxlKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgd2luZG93LnNjcm9sbFRvKHt0b3A6IG9yaWdTY3JvbGxQb3N9KTsgLy8gUHJvaGliaXQgZGVmYXVsdCBzY3JvbGxpbmcgZGlyZWN0bHkgdXB3YXJkcyBvbiBtb3ZlIHVwLlxyXG4gICAgICAgIGlmIChlbGVtTW9kdWxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCA8IDAgfHwgZWxlbU1vZHVsZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20gPiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0KSB7XHJcbiAgICAgICAgICBlbGVtTW9kdWxlLnNjcm9sbEludG9WaWV3KHtiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnc3RhcnQnfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgLy8gT25seSBDaHJvbWUgYmV0YSBzdXBwb3J0cyB0aGUgYXJndW1lbnRzIGdpdmVuIGFib3ZlLiBEZWZhdWx0IGZvciBvbGRlciBicm93c2Vycy5cclxuICAgICAgICB3aW5kb3cuc2Nyb2xsVG8obnVsbCwgb3JpZ1Njcm9sbFBvcyk7XHJcbiAgICAgICAgaWYgKGVsZW1Nb2R1bGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIDwgMCB8fCBlbGVtTW9kdWxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmJvdHRvbSA+IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQpIHtcclxuICAgICAgICAgIGVsZW1Nb2R1bGUuc2Nyb2xsSW50b1ZpZXcodHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7IGNvdXJzZSwgaG9zdCwgaWRzTm90Q292ZXJlZEJ5QW55VGFza30gPSB0aGlzLnByb3BzO1xyXG4gICAgY29uc3QgbW9kdWxlT3JkZXIgPSBjb3Vyc2UubW9kdWxlT3JkZXIgfHwgY291cnNlLm1vZHVsZXMubWFwKG0gPT4gbS5pZCk7XHJcbiAgICBjb25zdCBvcmRlcmVkTW9kdWxlcyA9IHRoaXMuZ2V0T3JkZXJlZE1vZHVsZXMoKTtcclxuXHJcbiAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJzdi1odG1sLXBvcnRsZXQgc3YtcG9ydGxldFwiIHJlZj17ZWxlbSA9PiB0aGlzLl9lbGVtID0gZWxlbX0+XHJcbiAgICAgIHtvcmRlcmVkTW9kdWxlcy5tYXAobW9kdWxlID0+IDxDb3Vyc2VNb2R1bGVDb21wb25lbnRcclxuICAgICAgICByZWY9e2VsZW0gPT4gdGhpcy5fbW9kdWxlUmVmc1ttb2R1bGUuaWRdID0gZWxlbX1cclxuICAgICAgICBrZXk9e21vZHVsZS5pZH1cclxuICAgICAgICBjb3Vyc2U9e2NvdXJzZX1cclxuICAgICAgICBtb2R1bGU9e21vZHVsZX1cclxuICAgICAgICBvblJlb3JkZXI9e2RpcmVjdGlvbiA9PiB0aGlzLnJlb3JkZXIobW9kdWxlLmlkLCBkaXJlY3Rpb24pfVxyXG4gICAgICAgIGdldE9yZGVyZWRNb2R1bGVzPXsoKT0+dGhpcy5nZXRPcmRlcmVkTW9kdWxlcygpfVxyXG4gICAgICAgIGhvc3Q9e2hvc3R9XHJcbiAgICAgICAgaWRzTm90Q292ZXJlZEJ5QW55VGFzaz17aWRzTm90Q292ZXJlZEJ5QW55VGFza31cclxuICAgICAgIC8+KX1cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJidG4gYnRuLWxhcmdlXCIgb25DbGljaz17KCk9PnRoaXMuYWRkTW9kdWxlKCl9PlxyXG4gICAgICAgIEzDpGdnIHRpbGwga3Vyc21vZHVsXHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgfVxyXG59XHJcblxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IGZpbmRET01Ob2RlIH0gZnJvbSAncmVhY3QtZG9tJztcclxuaW1wb3J0IHsgQ291cnNlLCBDb3Vyc2VNb2R1bGUsIEltYWdlLCBUYXNrLCBEb2N1bWVudCwgQWJpbGl0eSB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcclxuaW1wb3J0IHsgRWRpdGFibGVSZXNvdXJjZUxpc3QgfSBmcm9tICcuLi9zdWItY29tcG9uZW50cy9lZGl0YWJsZS1yZXNvdXJjZS1saXN0JztcclxuaW1wb3J0IHsgRWRpdGFibGVUYXNrTGlzdCB9IGZyb20gJy4uL3N1Yi1jb21wb25lbnRzL2VkaXRhYmxlLXRhc2stbGlzdCc7XHJcbmltcG9ydCB1cGRhdGUgZnJvbSAncmVhY3QtYWRkb25zLXVwZGF0ZSc7XHJcbmltcG9ydCB7IElDb3Vyc2VFZGl0b3JIb3N0IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9jb3Vyc2UtZWRpdG9yLWhvc3QnO1xyXG5pbXBvcnQgeyBSZW5hbWVhYmxlVGV4dCB9IGZyb20gJy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9yZW5hbWVhYmxlLXRleHQnO1xyXG5pbXBvcnQgeyBSZW1vdmVJdGVtIH0gZnJvbSAnLi4vc3ViLWNvbXBvbmVudHMvcmVtb3ZlLWl0ZW0nO1xyXG5pbXBvcnQgeyBjcmVhdGVVVUlEIH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnQnO1xyXG5pbXBvcnQgeyBMLCBzaG93RXJyb3IgfSBmcm9tIFwiLi4vLi4vLi4vdXRpbHMvdXRpbHNcIjtcclxuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xyXG5pbXBvcnQgeyBXeXNpd3lnIH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL3d5c2l3eWcnO1xyXG5pbXBvcnQgYWN0aW9uc19zd2VkaXNoIGZyb20gJy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy93eXNpd3lnL2FjdGlvbnMtc3YnO1xyXG5pbXBvcnQgeyBPcGVuQ2xvc2VCb3ggfSBmcm9tICcuLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvb3Blbi1jbG9zZS1ib3gnO1xyXG5pbXBvcnQgeyBDb250ZW50RWRpdGFibGVGaWVsZCB9IGZyb20gJy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9jb250ZW50LWVkaXRhYmxlLWZpZWxkJztcclxuaW1wb3J0IHsgY29tcHV0ZVVwZGF0ZWRPcmRlciB9IGZyb20gJy4uLy4uL2NvdXJzZS1idWlsZGVyLWtzL2xvZ2ljL3Rhc2stb3JkZXInO1xyXG5pbXBvcnQgeyBmZWF0dXJlcyB9IGZyb20gJy4uLy4uLy4uL2ZlYXR1cmVzJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgY291cnNlOiBDb3Vyc2U7XHJcbiAgbW9kdWxlOiBDb3Vyc2VNb2R1bGU7XHJcbiAgaG9zdDogSUNvdXJzZUVkaXRvckhvc3Q7XHJcbiAgaWRzTm90Q292ZXJlZEJ5QW55VGFzazoge1tpZDogc3RyaW5nXTogdHJ1ZX07XHJcbiAgb25SZW9yZGVyOiAoZGlyZWN0aW9uOiAxIHwgLTEpID0+IHZvaWQ7XHJcbiAgZ2V0T3JkZXJlZE1vZHVsZXM6ICgpPT5Db3Vyc2VNb2R1bGVbXTtcclxufVxyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICBlZGl0TWFuZGF0b3J5Q29udGVudDogYm9vbGVhbjtcclxufVxyXG5cclxuY29uc3QgREVGQVVMVF9LTk9XTEVER0VfTUFUUklYID0gW3tcclxuICBhYmlsaXR5SWRzOiBbXSxcclxuICBFSWRzOiBbXSxcclxuICBDSWRzOiBbXSxcclxuICBBSWRzOiBbXVxyXG59XTtcclxuXHJcbmV4cG9ydCBjbGFzcyBDb3Vyc2VNb2R1bGVDb21wb25lbnQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsU3RhdGU+IHtcclxuICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIGVkaXRNYW5kYXRvcnlDb250ZW50OiBmYWxzZVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0TW9kdWxlSW5kZXgoKSB7XHJcbiAgICBjb25zdCB7Y291cnNlLCBtb2R1bGV9ID0gdGhpcy5wcm9wcztcclxuICAgIHJldHVybiBjb3Vyc2UubW9kdWxlcy5maW5kSW5kZXgobSA9PiBtLmlkID09PSBtb2R1bGUuaWQpO1xyXG4gIH1cclxuXHJcbiAgZ2V0TW9kdWxlT3JkZXJJbmRleCgpIHtcclxuICAgIGNvbnN0IHtjb3Vyc2UsIG1vZHVsZX0gPSB0aGlzLnByb3BzO1xyXG4gICAgY29uc3Qgb3JkZXJlZE1vZHVsZXMgPSB0aGlzLnByb3BzLmdldE9yZGVyZWRNb2R1bGVzKCk7XHJcbiAgICByZXR1cm4gb3JkZXJlZE1vZHVsZXMuZmluZEluZGV4KG0gPT4gbS5pZCA9PT0gbW9kdWxlLmlkKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZU1vZHVsZShtb2R1bGVVcGRhdGVzKSB7XHJcbiAgICBjb25zdCB7bW9kdWxlfSA9IHRoaXMucHJvcHM7XHJcbiAgICBjb25zdCB1cGRhdGVkTW9kdWxlID0gdXBkYXRlKG1vZHVsZSwgbW9kdWxlVXBkYXRlcyk7XHJcbiAgICBjb25zdCBtb2R1bGVJbmRleCA9IHRoaXMuZ2V0TW9kdWxlSW5kZXgoKTtcclxuICAgIHRoaXMucHJvcHMuaG9zdC51cGRhdGUoeyBtb2R1bGVzOiB7ICRzcGxpY2U6IFtbbW9kdWxlSW5kZXgsIDEsIHVwZGF0ZWRNb2R1bGVdXSB9IH0pO1xyXG4gIH1cclxuXHJcbiAgLyogVGhpcyBtZXRob2Qgd29ya3MgZm9yIGJvdGggYWRkaW5nIG5ldyB0YXNrcyB0byB0aGUgdGFzayB0YWJsZVxyXG4gIGFuZCBhZGRpbmcgcmVmZXJlbmNlcyB0byBleGlzdGluZyB0YXNrcy4gVGhlIG1hZ2ljIG9mIHRoYXQgaGFzIHRvIGRvIHdpdGhcclxuICB3aGV0aGVyIHRhc2suJG1ldGEgPSAnYWRkJyBvciBub3QgYW5kIGlzIGRvbmUgaW4gRWRpdENvdXJzZS5zYXZlKClcclxuICAqL1xyXG4gIG9uVGFza0FkZGVkICh0YXNrOiBUYXNrLCB0YXNrQ3VzdG9taXphdGlvbjogUGFydGlhbDxUYXNrPiB8IG51bGwpIHtcclxuICAgIC8vIEFkZCB0YXNrIElEIHRvIG1vZHVsZSB0YXNrSWRzIGxpc3Q6XHJcbiAgICBjb25zdCBjb3Vyc2VVcGRhdGVzOmFueSA9IHt9O1xyXG4gICAgY29uc3QgdGFza0lkcyA9IHRoaXMucHJvcHMubW9kdWxlLnRhc2tJZHMuc2xpY2UoKTtcclxuICAgIHRhc2tJZHMucHVzaCh0YXNrLmlkKTtcclxuICAgIC8vIEFkZCBwaHlzaWNhbCBUYXNrIHRvIENvdXJzZS50YXNrcy5cclxuICAgIGlmICghdGhpcy5wcm9wcy5jb3Vyc2UudGFza3Muc29tZSh0ID0+IHQuaWQgPT09dGFzay5pZCkpIHtcclxuICAgICAgY291cnNlVXBkYXRlcy50YXNrcyA9IHskcHVzaDogW3Rhc2tdfTtcclxuICAgIH1cclxuICAgIGNvbnN0IGN1c3RvbWl6YXRpb25zID0gey4uLih0aGlzLnByb3BzLm1vZHVsZS50YXNrQ3VzdG9taXphdGlvbnMgfHwge30pfTtcclxuICAgIGlmICh0YXNrQ3VzdG9taXphdGlvbikgY3VzdG9taXphdGlvbnNbdGFzay5pZF0gPSB0YXNrQ3VzdG9taXphdGlvbjtcclxuICAgIGNvbnN0IG1vZHVsZUluZGV4ID0gdGhpcy5nZXRNb2R1bGVJbmRleCgpO1xyXG4gICAgY291cnNlVXBkYXRlcy5tb2R1bGVzID0ge307XHJcbiAgICBjb3Vyc2VVcGRhdGVzLm1vZHVsZXNbbW9kdWxlSW5kZXhdID0ge1xyXG4gICAgICB0YXNrSWRzOiB7JHNldDogdGFza0lkc30sXHJcbiAgICAgIHRhc2tDdXN0b21pemF0aW9uczogeyRzZXQ6IGN1c3RvbWl6YXRpb25zfVxyXG4gICAgfTtcclxuICAgIC8vIFVwZGF0ZSBtb2R1bGVcclxuICAgIHRoaXMucHJvcHMuaG9zdC51cGRhdGUoY291cnNlVXBkYXRlcyk7XHJcbiAgfVxyXG5cclxuICBvblRhc2tVcGRhdGVkICh0YXNrOiBUYXNrKSB7XHJcbiAgICBpZiAoIXRhc2suJG1ldGEpIHRocm93IG5ldyBFcnJvcihMYEhvcHBzYW4sIGJsZXYgbGl0ZSBrbmFzLiBGZWwgSUQ6ICR7J1BhN0RxJ31gKTtcclxuICAgIGNvbnN0IHRhc2tJbmRleCA9IHRoaXMucHJvcHMuY291cnNlLnRhc2tzLmZpbmRJbmRleCh0ID0+IHQuaWQgPT09IHRhc2suaWQpO1xyXG4gICAgaWYgKHRhc2tJbmRleCA+PSAwKSB7XHJcbiAgICAgIHRoaXMucHJvcHMuaG9zdC51cGRhdGUoe3Rhc2tzOiB7JHNwbGljZTogW1t0YXNrSW5kZXgsIDEsIHRhc2tdXX19KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uVGFza0N1c3RvbWl6ZWQgKHRhc2tJZDogc3RyaW5nLCBjdXN0b21pemF0aW9uOiBQYXJ0aWFsPFRhc2s+KSB7XHJcbiAgICBjb25zdCBjdXN0b21pemF0aW9ucyA9IHsuLi4odGhpcy5wcm9wcy5tb2R1bGUudGFza0N1c3RvbWl6YXRpb25zIHx8IHt9KX07XHJcbiAgICBjdXN0b21pemF0aW9uc1t0YXNrSWRdID0gY3VzdG9taXphdGlvbjtcclxuICAgIHRoaXMudXBkYXRlTW9kdWxlKHt0YXNrQ3VzdG9taXphdGlvbnM6IHskc2V0OiBjdXN0b21pemF0aW9uc319KTtcclxuICB9XHJcblxyXG4gIG9uVGFza0RlbGV0ZWQgKGlkOiBzdHJpbmcpIHtcclxuICAgIC8vIFJlbW92ZSB0YXNrIElEIGZyb20gbW9kdWxlIHRhc2tJZHMgbGlzdC5cclxuICAgIC8vIFRoaXMgZGVwZW5kcyBvbiB0aGUgZmFjdCB0aGF0IEVkaXRDb3Vyc2UuX3NldFN0YXRlKCkgbWFpbnRhaW5zXHJcbiAgICAvLyByZW1vdmVkIFRhc2sgbGlua3MgKHdoaWNoIGl0IGFjdHVhbGx5IGRvZXMgKG9yIHNob3VsZCBkbyBhdCBsZWFzdCkpLlxyXG4gICAgdGhpcy51cGRhdGVNb2R1bGUoe1xyXG4gICAgICB0YXNrSWRzOiB7JHNldDogdGhpcy5wcm9wcy5tb2R1bGUudGFza0lkcy5maWx0ZXIodGlkID0+IHRpZCAhPT0gaWQpfSxcclxuICAgICAgdGFza0N1c3RvbWl6YXRpb25zOiB7XHJcbiAgICAgICAgJGFwcGx5OiBjdXN0b21pemF0aW9ucyA9PiB7XHJcbiAgICAgICAgICBjb25zdCBjb3B5ID0gey4uLmN1c3RvbWl6YXRpb25zfTtcclxuICAgICAgICAgIGRlbGV0ZSBjb3B5W2lkXTtcclxuICAgICAgICAgIHJldHVybiBjb3B5O1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBvblRhc2tSZXBsYWNlZCAoaWQ6IHN0cmluZywgdGFzazogVGFzaykge1xyXG4gICAgY29uc3QgaWR4VGFzayA9IHRoaXMucHJvcHMubW9kdWxlLnRhc2tJZHMuaW5kZXhPZihpZCk7XHJcbiAgICBpZiAoaWR4VGFzayA8IDApIHtcclxuICAgICAgc2hvd0Vycm9yKExgS3VuZGUgaW50ZSBzcGFyYSB1cHBnaWZ0LiBGZWxrb2QgZDcya1FgKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbW9kdWxlVXBkYXRlcyA9IHtcclxuICAgICAgLy8gUmVwbGFjZSBvbGQgaWQgd2l0aCBuZXcgaWQ6XHJcbiAgICAgIHRhc2tJZHM6IHskc3BsaWNlOiBbW2lkeFRhc2ssIDEsIHRhc2suaWRdXX0sXHJcbiAgICAgIHRhc2tDdXN0b21pemF0aW9uczoge1xyXG4gICAgICAgICRhcHBseTogY3VzdG9taXphdGlvbnMgPT4ge1xyXG4gICAgICAgICAgY29uc3QgY29weSA9IHsuLi5jdXN0b21pemF0aW9uc307XHJcbiAgICAgICAgICBkZWxldGUgY29weVtpZF07XHJcbiAgICAgICAgICByZXR1cm4gY29weTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IHVwZGF0ZWRNb2R1bGUgPSB1cGRhdGUodGhpcy5wcm9wcy5tb2R1bGUsIG1vZHVsZVVwZGF0ZXMpO1xyXG4gICAgY29uc3QgbW9kdWxlSW5kZXggPSB0aGlzLmdldE1vZHVsZUluZGV4KCk7XHJcbiAgICB0aGlzLnByb3BzLmhvc3QudXBkYXRlKHtcclxuICAgICAgLy8gQXBwbHkgbW9kdWxlVXBkYXRlcyBmcm9tIGFib3ZlOlxyXG4gICAgICBtb2R1bGVzOiB7ICRzcGxpY2U6IFtbbW9kdWxlSW5kZXgsIDEsIHVwZGF0ZWRNb2R1bGVdXSB9LFxyXG4gICAgICAvLyBBZGQgdGhlIG5ldyB0YXNrIHRvIENvdXJzZS50YXNrcy5cclxuICAgICAgLy8gRG9uJ3QgcmVtb3ZlIHRoZSBvbGQgb25lISBXaHk/IEJlY2F1c2UgaXQgbWF5IGJlIHJlZmVyZW5jZWRcclxuICAgICAgLy8gYnkgYW5vdGhlciBtb2R1bGUgaW4gc2FtZSBjb3Vyc2UhIExldCBFZGl0Q291cnNlLl9zZXRTdGF0ZSgpXHJcbiAgICAgIC8vIGRvIHRoZSBcImdhcmJhZ2UgY29sbGVjdGlvblwiIGluc3RlYWQuXHJcbiAgICAgIHRhc2tzOiB7ICRzZXQ6IHRoaXMucHJvcHMuY291cnNlLnRhc2tzLmNvbmNhdCh0YXNrKX1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgb25UYXNrc1Jlb3JkZXJlZCAoc291cmNlOiBUYXNrLCB0YXJnZXQ6IFRhc2ssIHBsYWNlbWVudDogJ2JlZm9yZScgfCAnYWZ0ZXInKSB7XHJcbiAgICBjb25zdCBuZXdUYXNrSWRzID0gY29tcHV0ZVVwZGF0ZWRPcmRlcihcclxuICAgICAgdGhpcy5wcm9wcy5jb3Vyc2UudGFza3MsXHJcbiAgICAgIHRoaXMucHJvcHMubW9kdWxlLnRhc2tJZHMsXHJcbiAgICAgIHNvdXJjZSxcclxuICAgICAgdGFyZ2V0LFxyXG4gICAgICBwbGFjZW1lbnQsXHJcbiAgICAgIHthcHBlbmRMZWZ0b3ZlcnM6IGZhbHNlfSk7XHJcblxyXG4gICAgdGhpcy51cGRhdGVNb2R1bGUoe1xyXG4gICAgICB0YXNrSWRzOiB7JHNldDogbmV3VGFza0lkc31cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3QgeyBjb3Vyc2UsIGhvc3QsIG1vZHVsZSwgaWRzTm90Q292ZXJlZEJ5QW55VGFzayB9ID0gdGhpcy5wcm9wcztcclxuICAgIGNvbnN0IG1vZHVsZUluZGV4ID0gdGhpcy5nZXRNb2R1bGVJbmRleCgpO1xyXG4gICAgY29uc3QgbW9kdWxlT3JkZXJlZEluZGV4ID0gdGhpcy5nZXRNb2R1bGVPcmRlckluZGV4KCk7XHJcbiAgICBsZXQga25vd2xlZGdlTWF0cml4RGl2O1xyXG5cclxuICAgIGNvbnN0IHVwZGF0ZU1vZHVsZSA9IHRoaXMudXBkYXRlTW9kdWxlLmJpbmQodGhpcyk7XHJcbiAgICBsZXQgd2VlayA9IDE7XHJcbiAgICBjb25zdCBzdGFydFdlZWtPcHRpb25zID0gW1wiLS1cIl07XHJcbiAgICBjb25zdCBlbmRXZWVrT3B0aW9ucyA9IFtcIi0tXCJdO1xyXG4gICAgZm9yIChsZXQgaT0wOyBpPDUxOyArK2kpIHtcclxuICAgICAgc3RhcnRXZWVrT3B0aW9ucy5wdXNoKCcnKyB3ZWVrKTtcclxuICAgICAgZW5kV2Vla09wdGlvbnMucHVzaCgnJysgKyt3ZWVrKTtcclxuICAgIH1cclxuICAgIFxyXG5cclxuICAgIHJldHVybiA8T3BlbkNsb3NlQm94IGluYWN0aXZhdGVkPXshZmVhdHVyZXMuY2JDb2xsYXBzZUJveGVzfSB0aXRsZT17PD5cclxuICAgICAgPGRpdiBzdHlsZT17e2Zsb2F0OiBcInJpZ2h0XCJ9fT5cclxuICAgICAge21vZHVsZU9yZGVyZWRJbmRleCA+IDAgJiYgPHNwYW4+XHJcbiAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtYXJyb3ctY2lyY2xlLXVwIHNlbGVjdGFibGVcIlxyXG4gICAgICAgICAgYXJpYS1oaWRkZW49XCJ0cnVlXCJcclxuICAgICAgICAgIG9uQ2xpY2s9e2U9PntlLnN0b3BQcm9wYWdhdGlvbigpOyB0aGlzLnByb3BzLm9uUmVvcmRlcigtMSl9fSAvPiA8L3NwYW4+fVxyXG4gICAgICB7bW9kdWxlT3JkZXJlZEluZGV4IDwgY291cnNlLm1vZHVsZXMubGVuZ3RoIC0gMSAmJiA8c3Bhbj5cclxuICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1hcnJvdy1jaXJjbGUtZG93biBzZWxlY3RhYmxlXCJcclxuICAgICAgICAgIGFyaWEtaGlkZGVuPVwidHJ1ZVwiXHJcbiAgICAgICAgICBvbkNsaWNrPXtlPT57ZS5zdG9wUHJvcGFnYXRpb24oKTt0aGlzLnByb3BzLm9uUmVvcmRlcigxKX19IC8+IDwvc3Bhbj59XHJcbiAgICAgIDxSZW1vdmVJdGVtXHJcbiAgICAgICAgdGl0bGU9XCJUYSBib3J0IG1vZHVsZW5cIlxyXG4gICAgICAgIHN0eWxlPXt7ZGlzcGxheTogJ2lubGluZS1ibG9jayd9fVxyXG4gICAgICAgIG9uQ2xpY2s9e2U9PntlLnN0b3BQcm9wYWdhdGlvbigpOyBjb25maXJtKExgVGEgYm9ydCBtb2R1bCAke21vZHVsZS5uYW1lfT9gKSAmJiBob3N0LnVwZGF0ZSh7bW9kdWxlczogeyRzcGxpY2U6IFtbbW9kdWxlSW5kZXgsIDFdXX19KX19IC8+XHJcbiAgICA8L2Rpdj5cclxuICAgIDxwPnttb2R1bGUubmFtZX08L3A+XHJcbiAgICA8Lz59IGhlYWRlck9wZW49e21vZHVsZS5uYW1lID09ICdOeSBrdXJzbW9kdWwnfT5cclxuICAgIDxkaXYgY2xhc3NOYW1lPVwiY291cnNlLW1vZHVsZSBrZWRfYm94ZWRcIiBzdHlsZT17e3Bvc2l0aW9uOiAncmVsYXRpdmUnfX0+XHJcbiAgICAgIDxDb250ZW50RWRpdGFibGVGaWVsZFxyXG4gICAgICAgIHRleHQ9e21vZHVsZS5uYW1lfVxyXG4gICAgICAgIHRhZz0naDMnXHJcbiAgICAgICAgY2xhc3NOYW1lPSdyZW5hbWVhYmxlLXRleHQnXHJcbiAgICAgICAgbWF4Q2hhcnM9ezEwMH1cclxuICAgICAgICBwbGFjZWhvbGRlcj1cIk5hbW5sw7ZzIG1vZHVsXCJcclxuICAgICAgICBvbkNoYW5nZT17bmV3TmFtZSA9PiB1cGRhdGVNb2R1bGUoe25hbWU6IHskc2V0OiBuZXdOYW1lfX0pfVxyXG4gICAgICAvPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWwgc3BhY2VkXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSBjZW50ZXJcIj5cclxuICAgICAgICAgIDxwPlN0YXJ0dmVja2E8L3A+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSBjZW50ZXJcIj5cclxuICAgICAgICAgIDxzZWxlY3QgdmFsdWU9e21vZHVsZS5zdGFydFdlZWsgfHwgXCItLVwifVxyXG4gICAgICAgICAgICBvbkNoYW5nZT17ZXYgPT4gdXBkYXRlTW9kdWxlKHtzdGFydFdlZWs6IHtcclxuICAgICAgICAgICAgICAkc2V0OiBldi50YXJnZXQudmFsdWUgPT09ICctLScgP1xyXG4gICAgICAgICAgICAgICAgdW5kZWZpbmVkIDpcclxuICAgICAgICAgICAgICAgIHBhcnNlSW50KGV2LnRhcmdldC52YWx1ZSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSl9PlxyXG4gICAgICAgICAgICB7c3RhcnRXZWVrT3B0aW9ucy5tYXAobyA9PiA8b3B0aW9uIGtleT17b30gdmFsdWU9e299PntvfTwvb3B0aW9uPil9XHJcbiAgICAgICAgICA8L3NlbGVjdD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIGNlbnRlclwiPlxyXG4gICAgICAgICAgPHA+U2x1dHZlY2thPC9wPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gY2VudGVyXCI+XHJcbiAgICAgICAgICA8c2VsZWN0IHZhbHVlPXttb2R1bGUuZW5kV2VlayB8fCBcIi0tXCJ9XHJcbiAgICAgICAgICAgIG9uQ2hhbmdlPXtldiA9PiB1cGRhdGVNb2R1bGUoe2VuZFdlZWs6IHtcclxuICAgICAgICAgICAgICAkc2V0OiBldi50YXJnZXQudmFsdWUgPT09ICctLScgP1xyXG4gICAgICAgICAgICAgICAgdW5kZWZpbmVkIDpcclxuICAgICAgICAgICAgICAgIHBhcnNlSW50KGV2LnRhcmdldC52YWx1ZSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSl9PlxyXG4gICAgICAgICAgICB7ZW5kV2Vla09wdGlvbnMubWFwKG8gPT4gPG9wdGlvbiBrZXk9e299IHZhbHVlPXtvfT57b308L29wdGlvbj4pfVxyXG4gICAgICAgICAgPC9zZWxlY3Q+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8aDQ+S3Vyc21vZHVsZW5zIGludHJvZHVrdGlvbjwvaDQ+XHJcbiAgICAgIDxXeXNpd3lnXHJcbiAgICAgICAgYWN0aW9ucz17W1xyXG4gICAgICAgICAgXCJib2xkXCIsXHJcbiAgICAgICAgICBcIml0YWxpY1wiLFxyXG4gICAgICAgICAgXCJ1bmRlcmxpbmVcIixcclxuICAgICAgICAgIFwic3RyaWtldGhyb3VnaFwiLFxyXG4gICAgICAgICAgXCJoZWFkaW5nMlwiLFxyXG4gICAgICAgICAgXCJoZWFkaW5nM1wiLFxyXG4gICAgICAgICAgXCJvbGlzdFwiLFxyXG4gICAgICAgICAgXCJ1bGlzdFwiLFxyXG4gICAgICAgICAgXCJvdXRkZW50XCIsXHJcbiAgICAgICAgICBcImluZGVudFwiLFxyXG4gICAgICAgICAgXCJsaW5lXCIsXHJcbiAgICAgICAgICBcImxpbmtcIixcclxuICAgICAgICAgIFwiaW1hZ2VcIl19XHJcbiAgICAgICAgZGVmYXVsdEFjdGlvbnM9e2FjdGlvbnNfc3dlZGlzaH1cclxuICAgICAgICBodG1sPXttb2R1bGUubWFuZGF0b3J5Q29udGVudH1cclxuICAgICAgICBvbkNoYW5nZT17aHRtbCA9PiB7XHJcbiAgICAgICAgICB1cGRhdGVNb2R1bGUoe21hbmRhdG9yeUNvbnRlbnQ6IHskc2V0OiBodG1sfX0pXHJcbiAgICAgICAgfX0gLz5cclxuXHJcbiAgICAgIDxoND5VcHBnaWZ0ZXI8L2g0PlxyXG4gICAgICA8RWRpdGFibGVUYXNrTGlzdFxyXG4gICAgICAgIHRhc2tJZHM9e21vZHVsZS50YXNrSWRzfVxyXG4gICAgICAgIHRhc2tDdXN0b21pemF0aW9ucz17bW9kdWxlLnRhc2tDdXN0b21pemF0aW9uc31cclxuICAgICAgICBjb3Vyc2U9e2NvdXJzZX1cclxuICAgICAgICBtb2R1bGU9e21vZHVsZX1cclxuICAgICAgICBob3N0PXtob3N0fVxyXG4gICAgICAgIGlkc05vdENvdmVyZWRCeUFueVRhc2s9e2lkc05vdENvdmVyZWRCeUFueVRhc2t9XHJcbiAgICAgICAgb25UYXNrQWRkZWQ9eyh0YXNrOiBUYXNrLCB0YXNrQ3VzdG9taXphdGlvbjogUGFydGlhbDxUYXNrPikgPT4gdGhpcy5vblRhc2tBZGRlZCh0YXNrLCB0YXNrQ3VzdG9taXphdGlvbil9XHJcbiAgICAgICAgb25UYXNrVXBkYXRlZD17KHRhc2s6IFRhc2spID0+IHRoaXMub25UYXNrVXBkYXRlZCh0YXNrKX1cclxuICAgICAgICBvblRhc2tDdXN0b21pemF0aW9uVXBkYXRlZD17KHRhc2tJZDogc3RyaW5nLCBjdXN0b21pemF0aW9uOiBQYXJ0aWFsPFRhc2s+KSA9PlxyXG4gICAgICAgICAgdGhpcy5vblRhc2tDdXN0b21pemVkKHRhc2tJZCwgY3VzdG9taXphdGlvbil9XHJcbiAgICAgICAgb25UYXNrRGVsZXRlZD17KGlkOiBzdHJpbmcpID0+IHRoaXMub25UYXNrRGVsZXRlZChpZCl9XHJcbiAgICAgICAgb25UYXNrUmVwbGFjZWQ9eyhpZDogc3RyaW5nLCB0YXNrOiBUYXNrKSA9PiB0aGlzLm9uVGFza1JlcGxhY2VkKGlkLCB0YXNrKX1cclxuICAgICAgICBvblRhc2tzUmVvcmRlcmVkPXsoc291cmNlLCB0YXJnZXQsIHBsYWNlbWVudCkgPT4gdGhpcy5vblRhc2tzUmVvcmRlcmVkKHNvdXJjZSwgdGFyZ2V0LCBwbGFjZW1lbnQpfSAvPlxyXG5cclxuICAgICAgPGg0Pk1vZHVscmVzdXJzZXI8L2g0PlxyXG4gICAgICA8cCBjbGFzc05hbWU9XCJzdWJIZWFkZXJcIj4oRXZlbnR1ZWxsYSByZXN1c2VyIGbDtnIgcmVkb3Zpc25pbmcgYXYgbW9kdWxlbiBzYW10IGbDtnIgbW9kdWxlbiBzb20gaGVsaGV0KTwvcD5cclxuICAgICAgPEVkaXRhYmxlUmVzb3VyY2VMaXN0XHJcbiAgICAgICAgcmVzb3VyY2VzPXttb2R1bGUucmVzb3VyY2VzfVxyXG4gICAgICAgIG9uVXBkYXRlPXtyZXNvdXJjZXNVcGRhdGVzID0+IHVwZGF0ZU1vZHVsZSh7IHJlc291cmNlczogcmVzb3VyY2VzVXBkYXRlcyB9KX1cclxuICAgICAgICBob3N0PXtob3N0fSAvPlxyXG4gICAgICA8ZGl2IHN0eWxlPXt7cG9zaXRpb246ICdhYnNvbHV0ZScsIHRvcDogMCwgcmlnaHQ6IDB9fT5cclxuICAgICAgICB7bW9kdWxlT3JkZXJlZEluZGV4ID4gMCAmJiA8c3Bhbj5cclxuICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLWFycm93LWNpcmNsZS11cCBzZWxlY3RhYmxlXCJcclxuICAgICAgICAgICAgYXJpYS1oaWRkZW49XCJ0cnVlXCJcclxuICAgICAgICAgICAgb25DbGljaz17KCk9PnRoaXMucHJvcHMub25SZW9yZGVyKC0xKX0gLz4gPC9zcGFuPn1cclxuICAgICAgICB7bW9kdWxlT3JkZXJlZEluZGV4IDwgY291cnNlLm1vZHVsZXMubGVuZ3RoIC0gMSAmJiA8c3Bhbj5cclxuICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLWFycm93LWNpcmNsZS1kb3duIHNlbGVjdGFibGVcIlxyXG4gICAgICAgICAgICBhcmlhLWhpZGRlbj1cInRydWVcIlxyXG4gICAgICAgICAgICBvbkNsaWNrPXsoKT0+dGhpcy5wcm9wcy5vblJlb3JkZXIoMSl9IC8+IDwvc3Bhbj59XHJcbiAgICAgICAgPFJlbW92ZUl0ZW1cclxuICAgICAgICAgIHRpdGxlPVwiVGEgYm9ydCBtb2R1bGVuXCJcclxuICAgICAgICAgIHN0eWxlPXt7ZGlzcGxheTogJ2lubGluZS1ibG9jayd9fVxyXG4gICAgICAgICAgb25DbGljaz17KCk9PmNvbmZpcm0oTGBUYSBib3J0IG1vZHVsICR7bW9kdWxlLm5hbWV9P2ApICYmIGhvc3QudXBkYXRlKHttb2R1bGVzOiB7JHNwbGljZTogW1ttb2R1bGVJbmRleCwgMV1dfX0pfSAvPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsLWFsaWduXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFJdGVtIGFjdGl2YXRlQ291cnNlTW9kdWxlXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17XCJidG4gYnRuLWluZm9cIiArIChtb2R1bGUuaW5hY3RpdmUgPyBcIiBidG4tYWN0aXZhdGVcIiA6IFwiIGJ0bi1pbmFjdGl2YXRlXCIpfSBvbkNsaWNrPXsoKT0+IHVwZGF0ZU1vZHVsZSh7aW5hY3RpdmU6IHskc2V0OiAhbW9kdWxlLmluYWN0aXZlfX0pfT5cclxuICAgICAgICAgICAge21vZHVsZS5pbmFjdGl2ZSA/ICdBa3RpdmVyYSBtb2R1bGVuJyA6ICdJbmFrdGl2ZXJhIG1vZHVsZW4nfVxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcblxyXG4gICAgPC9PcGVuQ2xvc2VCb3g+XHJcbiAgfVxyXG59XHJcblxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IENvdXJzZUJhbm5lciB9IGZyb20gXCIuL2NvdXJzZS1iYW5uZXJcIjtcclxuaW1wb3J0IHsgTCwgc2hvd0Vycm9yLCBmbGF0dGVuLCBjb21wYXJlUHJvcCwgc2hvd0luZm8sIG1heExlbmd0aCwgY2FwaXRhbGl6ZUZpcnN0LCBjb21wYXJlUHJvcHMsIGRpc3RpbmN0IH0gZnJvbSBcIi4uLy4uLy4uL3V0aWxzL3V0aWxzXCI7XHJcbmltcG9ydCB7IENvdXJzZSwgU3ViamVjdCB9IGZyb20gXCJrZWRiYWNrZW5kL21vZGVsc1wiO1xyXG5pbXBvcnQgZW52IGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCB7IExpbmsgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcclxuaW1wb3J0IHsgU3Bpbm5lciB9IGZyb20gXCIuLi9zdWItY29tcG9uZW50cy9zcGlubmVyXCI7XHJcbmltcG9ydCB7IFNjaG9vbENvdXJzZXMgfSBmcm9tIFwiLi4vc3ViLWNvbXBvbmVudHMvc2Nob29sLWNvdXJzZXNcIjtcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgZmVlZGJhY2tVcmw6IHN0cmluZztcclxufVxyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICBjb3Vyc2VPcHRpb25zOiBDb3Vyc2VPcHRpb25bXTtcclxuICBzZWxlY3RlZFRlbXBsYXRlSWQ6IHN0cmluZztcclxuICBjb3Vyc2VzOiBDb3Vyc2VPcHRpb25bXSB8IG51bGw7XHJcbiAgc2VsZWN0ZWRDb3Vyc2VJZDogc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgQ291cnNlT3B0aW9uIHtcclxuICBpZDogc3RyaW5nO1xyXG4gIG5hbWU6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENyZWF0ZU5ld0NvdXJzZSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcyxTdGF0ZT4ge1xyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgY291cnNlT3B0aW9uczogbnVsbCxcclxuICAgICAgc2VsZWN0ZWRUZW1wbGF0ZUlkOiBcIi0tXCIsXHJcbiAgICAgIGNvdXJzZXM6IG51bGwsXHJcbiAgICAgIHNlbGVjdGVkQ291cnNlSWQ6IFwiXCJcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gICAgdGhpcy5sb2FkKCkuY2F0Y2goc2hvd0Vycm9yKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGxvYWQoKSB7XHJcbiAgICBzaG93SW5mbyhcIkxhZGRhciBrdXJzZXJcIik7XHJcbiAgICBjb25zdCBzdWJqZWN0cyA9IGF3YWl0IGVudi5rZWRCYWNrZW5kQ2xpZW50Lmxpc3Q8U3ViamVjdD4oXCJzdWJqZWN0c1wiLCB7XHJcbiAgICAgIHRhZ3M6IFtcInNjaG9vbFR5cGU6Z3ltbmFzaXVtXCJdLFxyXG4gICAgICBpbmNsdWRlOiBcImNvdXJzZVRlbXBsYXRlc1wiXHJcbiAgICB9KTtcclxuICAgIGxldCBjb3Vyc2VzID0gZmxhdHRlbihzdWJqZWN0cy5tYXAocyA9PiBzLmNvdXJzZVRlbXBsYXRlcykpXHJcbiAgICAgIC5zb3J0KGNvbXBhcmVQcm9wcyhbXCJuYW1lXCIsIFwiZGF0ZVRpbWVcIl0pKTtcclxuICAgIC8vIElmIHR3byBjb3Vyc2VzIGhhdmUgdGhlIHNhbWUgbmFtZSwgdGhleSB3aWxsIGJlIHNlY29uZGFyeSBzb3J0ZWQgYnkgZGF0ZSBpbXBvcnRlZC5cclxuICAgIC8vIEJ5IHJ1bm5pbmcgdGhlIGRpc3RpbmN0KCkgY2FsbCBiZWxvdywgd2Ugd2lsbCBtYWtlIHN1cmUgdGhhdCBvbmx5IHRoZSBsYXRlc3QgaW1wb3J0ZWRcclxuICAgIC8vIGNvdXJzZSB3aXRoIHRoYXQgbmFtZSBpcyBsb2FkZWQuXHJcbiAgICAvLyBUaGlzIGlzIHRoZSBjYXNlIGZvciBcIldlYmJ1dHZlY2tsaW5nIDFcIiAtIGEgY291cnNlIHRoYXQgdXNlZCB0byBvY2N1ciBvbiBhIHN1YmplY3Qgd2l0aFxyXG4gICAgLy8gYW5vdGhlciBuYW1lIGluIDIwMTgsIGJ1dCBpbiAyMDE5IG9jY3VycyBvbiBhIG5ldyBzdWJqZWN0LCBzbyBpdCdzIGJ5IGRlZmluaXRpb24gYW5vdGhlclxyXG4gICAgLy8gY291cnNlLCBidXQgc2FtZSBuYW1lLlxyXG4gICAgY291cnNlcyA9IGRpc3RpbmN0KGNvdXJzZXMsIGMgPT4gYy5uYW1lKTsgXHJcblxyXG4gICAgY29uc3QgY291cnNlT3B0aW9uczogQ291cnNlT3B0aW9uW10gPVxyXG4gICAgICBbeyBpZDogXCItLVwiLCBuYW1lOiBcIi0tXCIgfV0uY29uY2F0KGNvdXJzZXMpO1xyXG4gICAgc2hvd0luZm8oXCJcIik7XHJcbiAgICB0aGlzLnNldFN0YXRlKHsgY291cnNlT3B0aW9ucyB9KTtcclxuICB9XHJcblxyXG4gIGFzeW5jIG9uU2VsZWN0Q291cnNlKGlkOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGRlcml2ZWRDb3Vyc2VzID0gYXdhaXQgZW52LmtlZEJhY2tlbmRDbGllbnQubGlzdDxDb3Vyc2U+KFwiY291cnNlc1wiLCB7IGhhc0VkZ2VzVG86IFtpZF0gfSk7XHJcbiAgICBjb25zdCBjb3Vyc2VPcHRpb25zID0gZGVyaXZlZENvdXJzZXNcclxuICAgICAgLmZpbHRlcihjb3Vyc2UgPT4gY291cnNlLmFjdGl2ZSlcclxuICAgICAgLm1hcCgoeyBpZCwgc2Nob29sLCBkZXNjcmlwdGlvbiwgY3JlYXRlZEJ5LCBtb2RpZmllZEJ5IH0pID0+IHtcclxuICAgICAgICBpZiAoZGVzY3JpcHRpb24pIGRlc2NyaXB0aW9uID0gbWF4TGVuZ3RoKGRlc2NyaXB0aW9uLCA4MCk7XHJcbiAgICAgICAgbGV0IGRlc2NyaXB0aW9uT3JBdXRob3IgPSBkZXNjcmlwdGlvbiB8fFxyXG4gICAgICAgICAgKGNyZWF0ZWRCeSA/IGAke2NyZWF0ZWRCeS5uYW1lfXMgdmVyc2lvbmAgOlxyXG4gICAgICAgICAgbW9kaWZpZWRCeSAmJiBgJHttb2RpZmllZEJ5Lm5hbWV9cyB2ZXJzaW9uYCk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgbmFtZTogc2Nob29sID09PSAnc3RhbmRhcmQnID9cclxuICAgICAgICAgICAgZGVzY3JpcHRpb24gPyBgU3RhbmRhcmQgLSAke2Rlc2NyaXB0aW9ufWAgOiBcIlN0YW5kYXJkXCIgOlxyXG4gICAgICAgICAgICBgJHtzY2hvb2x9IC0gJHttYXhMZW5ndGgoZGVzY3JpcHRpb25PckF1dGhvciwgOTApfWAsXHJcbiAgICAgICAgICBzY2hvb2xcclxuICAgICAgICB9O1xyXG4gICAgICB9KS5zb3J0KGNvbXBhcmVQcm9wKFwibmFtZVwiKSk7XHJcbiAgICBjb25zdCBrZWRTdGFuZGFyZE9wdGlvbnMgPSBjb3Vyc2VPcHRpb25zLmZpbHRlcihvcHRpb24gPT4gb3B0aW9uLnNjaG9vbCA9PT0gXCJzdGFuZGFyZFwiKTtcclxuICAgIGNvbnN0IHRlYWNoZXJNYWRlID0gY291cnNlT3B0aW9ucy5maWx0ZXIob3B0aW9uID0+IG9wdGlvbi5zY2hvb2wgIT09IFwic3RhbmRhcmRcIik7XHJcbiAgICBjb25zdCBjb3Vyc2VzID0gW1xyXG4gICAgICAuLi5rZWRTdGFuZGFyZE9wdGlvbnMsXHJcbiAgICAgIHsgaWQsIG5hbWU6IFwiVG9tXCIgfSxcclxuICAgICAgLi4udGVhY2hlck1hZGVdO1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIGNvdXJzZXMsXHJcbiAgICAgIHNlbGVjdGVkVGVtcGxhdGVJZDogaWQsXHJcbiAgICAgIHNlbGVjdGVkQ291cnNlSWQ6IGNvdXJzZXNbMF0uaWRcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3QgeyBjb3Vyc2VPcHRpb25zLCBzZWxlY3RlZFRlbXBsYXRlSWQsIGNvdXJzZXMsIHNlbGVjdGVkQ291cnNlSWQgfSA9IHRoaXMuc3RhdGU7XHJcbiAgICByZXR1cm4gPGRpdiBzdHlsZT17eyBvdXRsaW5lOiAwIH19PlxyXG4gICAgICA8Q291cnNlQmFubmVyXHJcbiAgICAgICAgdGl0bGU9e0xgS3Vyc2J5Z2dhcmVuYH1cclxuICAgICAgICBhY3RpdmVQYWdlPVwiY291cnNlQnVpbGRlclwiXHJcbiAgICAgICAgcm91dGVzPXt7ZmVlZGJhY2s6IHRoaXMucHJvcHMuZmVlZGJhY2tVcmx9fVxyXG4gICAgICAvPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInN2LXJvdyBzdi1sYXlvdXRcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInN2LWxheW91dCBzdi1za2lwLXNwYWNlciBzdi1jb2x1bW4tMTJcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3Ytc3BhY2VyLTIwcHh2dCBzdi12ZXJ0aWNhbCBzdi1sYXlvdXQgc3Ytc2tpcC1zcGFjZXJcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYWdlY29udGVudCBzdi1sYXlvdXQgc3Ytc3BhY2VyLTIwcHh2dCBzdi1za2lwLXNwYWNlclwiPlxyXG5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInN2LXJvdyBzdi1sYXlvdXQgc3Ytc2tpcC1zcGFjZXJcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtcInN2LWxheW91dCBzdi1za2lwLXNwYWNlciBzdi1jb2x1bW4tN1wifT5cclxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdi1odG1sLXBvcnRsZXQgc3YtcG9ydGxldCBzdi1za2lwLXNwYWNlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxoMj5Ta2FwYSBueSBrdXJzPC9oMj5cclxuICAgICAgICAgICAgICAgICAgICA8aHIgLz5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWwgc3BhY2VkXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8cD5Ww6RsaiBneW1uYXNpZWt1cnMgOjwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbCBzcGFjZWRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHshY291cnNlT3B0aW9ucyA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj48U3Bpbm5lciAvPjxzZWxlY3QgZGlzYWJsZWQgdmFsdWU9XCJcIj48b3B0aW9uPi0tPC9vcHRpb24+PC9zZWxlY3Q+PC9kaXY+IDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5zZWxlY3RlZFRlbXBsYXRlSWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17ZXYgPT4gdGhpcy5vblNlbGVjdENvdXJzZShldi50YXJnZXQudmFsdWUpLmNhdGNoKHNob3dFcnJvcil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2NvdXJzZU9wdGlvbnMubWFwKGNvdXJzZSA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIGtleT17Y291cnNlLmlkfSB2YWx1ZT17Y291cnNlLmlkfT57Y291cnNlLm5hbWV9PC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0Pn1cclxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIHtjb3Vyc2VzICYmIDxkaXYgY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbCBzcGFjZWRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwPlV0Z8OlIGZyw6VuIHZlcnNpb246IDwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2Pn1cclxuICAgICAgICAgICAgICAgICAgICB7Y291cnNlcyAmJiA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWwgc3BhY2VkXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IHZhbHVlPXtzZWxlY3RlZENvdXJzZUlkfSBvbkNoYW5nZT17ZXYgPT4gdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRDb3Vyc2VJZDogZXYudGFyZ2V0LnZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICB7Y291cnNlcy5tYXAoY291cnNlID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIGtleT17Y291cnNlLmlkfSB2YWx1ZT17Y291cnNlLmlkfT57Y291cnNlLm5hbWV9PC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj59XHJcbiAgICAgICAgICAgICAgICAgICAgPGJyIC8+PGJyIC8+XHJcbiAgICAgICAgICAgICAgICAgICAge2NvdXJzZXMgJiYgc2VsZWN0ZWRDb3Vyc2VJZCAmJiA8TGlua1xyXG4gICAgICAgICAgICAgICAgICAgICAgdG89e2AvY291cnNlcy9jcmVhdGUtZnJvbS10ZW1wbGF0ZS8ke3RoaXMuc3RhdGUuc2VsZWN0ZWRDb3Vyc2VJZH1gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnRuIGJ0bi1sYXJnZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgPlNrYXBhPC9MaW5rPn1cclxuICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3YtbGF5b3V0IHN2LWNvbHVtbi01XCI+XHJcbiAgICAgICAgICAgICAgICAgIDxTY2hvb2xDb3Vyc2VzIC8+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgfVxyXG59IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBmaW5kRE9NTm9kZSB9IGZyb20gJ3JlYWN0LWRvbSc7XHJcbmltcG9ydCB7IEwsIHNob3dJbmZvLCBzaG93RXJyb3IsIGZsYXR0ZW4sIGNvbXBhcmVQcm9wIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQge2hhc0NoYW5nZXN9IGZyb20gJy4uL3V0aWxzJztcclxuaW1wb3J0IHsgQ291cnNlLCBSZXNvdXJjZSwgS25vd2xlZGdlUmVxdWlyZW1lbnQsIFN1YmplY3QsIEFiaWxpdHksIFRhc2ssIFNjaG9vbCB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgQmF0Y2hSdW5uZXIsIEh0dHBFcnJvciwgY3JlYXRlVVVJRCB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcclxuaW1wb3J0IGVudiBmcm9tICcuLi8uLi8uLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5pbXBvcnQgeyBDb3Vyc2VCYW5uZXIgfSBmcm9tICcuL2NvdXJzZS1iYW5uZXInO1xyXG5pbXBvcnQgeyBJbm5lckVkaXRDb3Vyc2UgfSBmcm9tICcuL2lubmVyLWVkaXQtY291cnNlJztcclxuaW1wb3J0IHVwZGF0ZSBmcm9tICdyZWFjdC1hZGRvbnMtdXBkYXRlJztcclxuaW1wb3J0IHsgdXBkYXRlRG9jdW1lbnRHcmFwaHMsIGFwcGx5RXRhZ3MsIHVwZGF0ZUNvdXJzZUJ1aWxkZXJTdGF0dXMsIGxvYWRDb3Vyc2UsIHVwZGF0ZU1vZGlmaWNhdGlvbkFuZENyZWF0aW9uU3RhbXBzLCB1cGRhdGVDcmVhdGlvblN0YW1wLCB1cGRhdGVNb2RpZmljYXRpb25TdGFtcCB9IGZyb20gJy4uL3V0aWxzJztcclxuaW1wb3J0IHsgSUNvdXJzZUVkaXRvckhvc3QsIERpYWxvZywgRGlhbG9nQ29udGFpbmVyIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9jb3Vyc2UtZWRpdG9yLWhvc3QnO1xyXG5pbXBvcnQgeyBSZW1vdmVJdGVtIH0gZnJvbSAnLi4vc3ViLWNvbXBvbmVudHMvcmVtb3ZlLWl0ZW0nO1xyXG5pbXBvcnQgeyBnZXRVbmNvdmVyZWRLbm93bGVkZ2VSZXF1aXJlbWVudHMsIGdldElkc05vdENvdmVyZWRCeVRhc2tzLCBnZXRTb2Z0QWNjZXNzTGlzdCB9IGZyb20gJy4vYnVzaW5lc3MtbG9naWMnO1xyXG5pbXBvcnQgY2ZnIGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvS0VELmNmZyc7XHJcbmltcG9ydCB7IFNwaW5uZXIgfSBmcm9tIFwiLi4vc3ViLWNvbXBvbmVudHMvc3Bpbm5lclwiO1xyXG5pbXBvcnQgeyBteVNjaG9vbENvdXJzZXNSZXBvIH0gZnJvbSAnLi4vLi4vLi4vcmVwb3Mvc2Nob29sLWNvdXJzZXMnO1xyXG5pbXBvcnQgeyBwcmVzZXJ2ZUltcGVyc29uYXRpb25RdWVyeSB9IGZyb20gXCIuLi8uLi8uLi9hY2Nlc3MtY29udHJvbFwiO1xyXG5pbXBvcnQgeyBnZXRDdXJyZW50VXNlciB9IGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvY3VycmVudC11c2VyJztcclxuaW1wb3J0IHsgZmVhdHVyZXMgfSBmcm9tICcuLi8uLi8uLi9mZWF0dXJlcy9mZWF0dXJlcyc7XHJcbmltcG9ydCB7IENsYXNzcm9vbVN5bmMgfSBmcm9tICcuLi8uLi8uLi9hcGlzL2dvb2dsZS1jbGFzc3Jvb20tc3luYyc7XHJcbmltcG9ydCB7IENyb3NzSWNvbiB9IGZyb20gJ3JlYWN0LXNlbGVjdC9saWIvY29tcG9uZW50cy9pbmRpY2F0b3JzJztcclxuXHJcbmNvbnN0IGNhdGNoZXIgPSBjZmcuRU5WSVJPTk1FTlQgPT09ICdwcm9kdWN0aW9uJyA/XHJcbiAgc2hvd0Vycm9yIDogbnVsbDtcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgaWQ/OiBzdHJpbmc7XHJcbiAgc3ViamVjdElkPzogc3RyaW5nO1xyXG4gIGlzVGVtcGxhdGU/OiBib29sZWFuO1xyXG4gIHRlbXBsYXRlSWQ/OiBzdHJpbmc7XHJcbiAgdmlldz86ICdzdHVkZW50UGFnZScgfCAnY291cnNlQnVpbGRlcicgfCAndGVtcGxhdGVCdWlsZGVyJztcclxuICB2aWV3Q291cnNlVXJsOiBzdHJpbmc7XHJcbiAgZmVlZGJhY2tVcmw6IHN0cmluZztcclxufVxyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICBvcmlnQ291cnNlOiBDb3Vyc2UgfCBudWxsO1xyXG4gIG9yaWdUZW1wbGF0ZTogQ291cnNlIHwgbnVsbDtcclxuICBjb3Vyc2U6IENvdXJzZTtcclxuICBhbGxDb3Vyc2VzPzogQ291cnNlW107XHJcbiAgZGlhbG9nQ29udGFpbmVyczogRGlhbG9nQ29udGFpbmVyW107IC8vIFdoZW4gZWRpdGluZyBpdGVtcywgaXQgbWF5IHNob3cgYXMgYSBkaWFsb2dcclxuICBoYXNVbnNhdmVkRGF0YTogYm9vbGVhbjtcclxuICB2aWV3OiAnc3R1ZGVudFBhZ2UnIHwgJ2NvdXJzZUJ1aWxkZXInIHwgJ3RlbXBsYXRlQnVpbGRlcic7XHJcbiAgY2xhc3Nyb29tU3luY0luUHJvZ3Jlc3M6IGJvb2xlYW47XHJcbn1cclxuXHJcbmNvbnN0IENPTkZJUk1fTkFWSUdBVEVfTUVTU0FHRSA9XHJcbiAgTGBEdSBoYXIgb3NwYXJhdCBkYXRhLiBWw6RsaiBhdmJyeXQgb2NoIHRyeWNrIENUUkwrUyBvbSBkdSB2aWxsIHNwYXJhIGbDtnJzdC5gO1xyXG4gIFxyXG5jb25zdCBERUZBVUxUX1NUQVRFOiBTdGF0ZSA9IHtcclxuICBvcmlnQ291cnNlOiBudWxsLFxyXG4gIG9yaWdUZW1wbGF0ZTogbnVsbCxcclxuICBjb3Vyc2U6IG51bGwsXHJcbiAgZGlhbG9nQ29udGFpbmVyczogW10sXHJcbiAgaGFzVW5zYXZlZERhdGE6IGZhbHNlLFxyXG4gIHZpZXc6ICdjb3Vyc2VCdWlsZGVyJyxcclxuICBjbGFzc3Jvb21TeW5jSW5Qcm9ncmVzczogZmFsc2VcclxufTtcclxuXHJcbmV4cG9ydCBjbGFzcyBFZGl0Q291cnNlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLFN0YXRlPiBpbXBsZW1lbnRzIElDb3Vyc2VFZGl0b3JIb3N0IHtcclxuICBwYWdlWU9mZnNldDogbnVtYmVyO1xyXG4gIGNvbnRlbnREaXY6IEhUTUxEaXZFbGVtZW50O1xyXG4gIGNvbnRlbnRZUG9zOiBudW1iZXI7XHJcbiAgaXNTYXZpbmc6IGJvb2xlYW47XHJcbiAgZGlhbG9nczogRGlhbG9nW107XHJcblxyXG4gIHNldFN0YXRlUHJvbWlzZWQgKHN0YXRlOiBQYXJ0aWFsPFN0YXRlPikgOiBQcm9taXNlPGFueT4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX3NldFN0YXRlKHtoYXNVbnNhdmVkRGF0YTogdHJ1ZSwgLi4uc3RhdGV9KTtcclxuICB9XHJcblxyXG4gIHNldE5vblNhdmVhYmxlRGF0YVN0YXRlIChzdGF0ZTogUGFydGlhbDxTdGF0ZT4pIDogUHJvbWlzZTxhbnk+IHtcclxuICAgIHJldHVybiB0aGlzLl9zZXRTdGF0ZShzdGF0ZSk7XHJcbiAgfVxyXG5cclxuICBfc2V0U3RhdGUgKHN0YXRlOiBQYXJ0aWFsPFN0YXRlPikgOiBQcm9taXNlPGFueT4ge1xyXG4gICAgaWYgKHN0YXRlLmNvdXJzZSkge1xyXG4gICAgICB7XHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyBNYWludGFpbiBjb3Vyc2UgdGFzayBsaW5rcyAocmVtb3ZlIGxpbmtzIHRvIHRhc2tzIHRoYXQgYXJlIG5vdCB1c2VkXHJcbiAgICAgICAgLy8gYnkgYW55IG1vZHVsZSlcclxuICAgICAgICAvL1xyXG4gICAgICAgIGNvbnN0IHt0YXNrcywgbW9kdWxlc30gPSBzdGF0ZS5jb3Vyc2U7XHJcbiAgICAgICAgY29uc3QgdXNlZFRhc2tJZHMgPSB7fTtcclxuICAgICAgICBtb2R1bGVzLmZvckVhY2gobW9kdWxlID0+IG1vZHVsZS50YXNrSWRzLmZvckVhY2goaWQgPT4gdXNlZFRhc2tJZHNbaWRdID0gdHJ1ZSkpO1xyXG4gICAgICAgIGNvbnN0IGZpbHRlcmVkQ291cnNlVGFza3MgPSB0YXNrcy5maWx0ZXIodCA9PiB1c2VkVGFza0lkc1t0LmlkXSk7XHJcbiAgICAgICAgY29uc3QgbW9kaWZpZWRDb3Vyc2UgPSB7Li4uc3RhdGUuY291cnNlfTtcclxuICAgICAgICBtb2RpZmllZENvdXJzZS50YXNrcyA9IGZpbHRlcmVkQ291cnNlVGFza3M7XHJcbiAgICAgICAgc3RhdGUgPSB7Li4uc3RhdGUsIGNvdXJzZTogbW9kaWZpZWRDb3Vyc2V9O1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSW52b2tlIG91ciBjb3Vyc2UgaW50byBzdGF0ZSBwcm9wZXJ0eSBhbGxDb3Vyc2VzIHNvIHRoYXQgdGhlXHJcbiAgICAvLyByaWdodC1oYW5kIHNpZGUgbGlzdCBvZiBjb3Vyc2VzIGdldHMgdXBkYXRlIGltbWVkaWF0ZWx5IHdpdGhcclxuICAgIC8vIHRoZSBwdWJsaXNoYWJsZSBzdGF0ZSBvZiB0aGlzIGNvdXJzZS5cclxuICAgIGxldCBhbGxDb3Vyc2VzID0gc3RhdGUuYWxsQ291cnNlcyB8fCB0aGlzLnN0YXRlLmFsbENvdXJzZXM7XHJcbiAgICBjb25zdCBjb3Vyc2UgPSBzdGF0ZS5jb3Vyc2UgfHwgdGhpcy5zdGF0ZS5jb3Vyc2U7XHJcbiAgICBpZiAoYWxsQ291cnNlcykge1xyXG4gICAgICBjb25zdCBpZHhPdXJDb3Vyc2UgPSBhbGxDb3Vyc2VzLmZpbmRJbmRleChjID0+IGMuaWQgPT09IHRoaXMucHJvcHMuaWQpO1xyXG4gICAgICBhbGxDb3Vyc2VzID0gdXBkYXRlKGFsbENvdXJzZXMsIHskc3BsaWNlOiBbW2lkeE91ckNvdXJzZSwgMSwgY291cnNlXV19KTtcclxuICAgICAgc3RhdGUgPSB7Li4uc3RhdGV9O1xyXG4gICAgICBzdGF0ZS5hbGxDb3Vyc2VzID0gYWxsQ291cnNlcztcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzdXBlci5zZXRTdGF0ZSgoKT0+c3RhdGUgYXMgU3RhdGUsIHJlc29sdmUpKTtcclxuICB9XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHsuLi5ERUZBVUxUX1NUQVRFfTtcclxuICAgIHRoaXMudXBkYXRlID0gdGhpcy51cGRhdGUuYmluZCh0aGlzKTtcclxuICAgIHRoaXMucmVmRGlhbG9nID0gdGhpcy5yZWZEaWFsb2cuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuY29udGVudFlQb3MgPSAwO1xyXG4gICAgdGhpcy5vbktleURvd24gPSB0aGlzLm9uS2V5RG93bi5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5iZWZvcmVVbmxvYWQgPSB0aGlzLmJlZm9yZVVubG9hZC5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5vbkNsaWNrUHJldmVudFVubG9hZCA9IHRoaXMub25DbGlja1ByZXZlbnRVbmxvYWQuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuaXNTYXZpbmcgPSBmYWxzZTtcclxuICAgIHRoaXMuZGlhbG9ncyA9IFtdO1xyXG4gICAgaWYgKHByb3BzLnZpZXcpIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIC4uLnRoaXMuc3RhdGUsXHJcbiAgICAgIHZpZXc6IHByb3BzLnZpZXdcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnRXaWxsTW91bnQoKSB7XHJcbiAgICB0aGlzLmxvYWQoKS5jYXRjaChjYXRjaGVyKTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5vbktleURvd24pO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIHRoaXMuYmVmb3JlVW5sb2FkKTtcclxuICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uQ2xpY2tQcmV2ZW50VW5sb2FkKTtcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xyXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLm9uS2V5RG93bik7XHJcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgdGhpcy5iZWZvcmVVbmxvYWQpO1xyXG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25DbGlja1ByZXZlbnRVbmxvYWQpO1xyXG4gICAgdXBkYXRlQ291cnNlQnVpbGRlclN0YXR1cygnJyk7XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wczogUHJvcHMpIHtcclxuICAgIGlmICh0aGlzLnN0YXRlICYmIHRoaXMuc3RhdGUuY291cnNlKSB7XHJcbiAgICAgIGlmIChuZXh0UHJvcHMuaWQgIT09IHRoaXMucHJvcHMuaWQgfHwgbmV4dFByb3BzLnRlbXBsYXRlSWQgIT09IHRoaXMucHJvcHMudGVtcGxhdGVJZCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGVQcm9taXNlZChERUZBVUxUX1NUQVRFKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKG5leHRQcm9wcy52aWV3ICE9PSB0aGlzLnByb3BzLnZpZXcpIHtcclxuICAgICAgdGhpcy5zZXROb25TYXZlYWJsZURhdGFTdGF0ZSh7dmlldzogbmV4dFByb3BzLnZpZXd9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHM6IFByb3BzLCBwcmV2U3RhdGU6IFN0YXRlKSB7XHJcbiAgICBpZiAodGhpcy5jb250ZW50RGl2KSB7XHJcbiAgICAgIGNvbnN0IGNvbnRlbnREaXY6IEhUTUxEaXZFbGVtZW50ID0gZmluZERPTU5vZGUodGhpcy5jb250ZW50RGl2KSBhcyBIVE1MRGl2RWxlbWVudDtcclxuICAgICAgaWYgKGNvbnRlbnREaXYpIHtcclxuICAgICAgICB0aGlzLmNvbnRlbnRZUG9zID0gY29udGVudERpdi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAocHJldlN0YXRlICYmIHByZXZTdGF0ZS5jb3Vyc2UpIHtcclxuICAgICAgLy8gVGhpcyB3YXMgbm90IHRoZSBpbml0aWFsIHVwZGF0ZS5cclxuICAgICAgLy8gSWYgcHJvcHMgaGF2ZSBiZWVuIHVwZGF0ZWQgdG8gcG9pbnQgb3V0IGFub3RoZXIgY291cnNlIG9yIHRlbXBsYXRlLCByZXNldCBjb21wb25lbnQ6XHJcbiAgICAgIGlmICh0aGlzLnByb3BzLmlkICE9PSBwcmV2UHJvcHMuaWQgfHwgdGhpcy5wcm9wcy50ZW1wbGF0ZUlkICE9PSBwcmV2UHJvcHMudGVtcGxhdGVJZCkge1xyXG4gICAgICAgIHRoaXMubG9hZCgpLmNhdGNoKGNhdGNoZXIpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFwcmV2U3RhdGUuaGFzVW5zYXZlZERhdGEgJiYgdGhpcy5zdGF0ZS5oYXNVbnNhdmVkRGF0YSkge1xyXG4gICAgICB1cGRhdGVDb3Vyc2VCdWlsZGVyU3RhdHVzKCd1bnNhdmVkJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBsb2FkRnJvbVRlbXBsYXRlKHRlbXBsYXRlSWQ6IHN0cmluZykge1xyXG4gICAgc2hvd0luZm8oXCJMYWRkYXIgZGF0YSBmcsOlbiBtYWxsLi4uXCIpO1xyXG4gICAgY29uc3QgdGVtcGxhdGUgPSBhd2FpdCBsb2FkQ291cnNlKHRlbXBsYXRlSWQsIHtpbmNsdWRlVGVtcGxhdGVDaGFpbjogdHJ1ZX0pO1xyXG4gICAgY29uc3QgY291cnNlID0gdXBkYXRlQ3JlYXRpb25TdGFtcChEYXRlLm5vdygpLCB0ZW1wbGF0ZSwgZW52LmN1cnJlbnRVc2VyKTtcclxuICAgIGNvdXJzZS5pZCA9IGNyZWF0ZVVVSUQoKTtcclxuICAgIGNvdXJzZS5wYXJlbnRJZCA9IHRlbXBsYXRlSWQ7XHJcbiAgICBjb3Vyc2UuYWN0aXZlID0gZmFsc2U7XHJcbiAgICBjb3Vyc2UuaXNUZW1wbGF0ZSA9IGZhbHNlO1xyXG4gICAgY291cnNlLnRlbXBsYXRlQ2hhaW4gPSBbLi4uY291cnNlLnRlbXBsYXRlQ2hhaW5dO1xyXG4gICAgY291cnNlLnRlbXBsYXRlQ2hhaW4ucHVzaCh7aWQ6IHRlbXBsYXRlSWQsICRtZXRhOiAncmVmJ30gYXMgQ291cnNlKTtcclxuICAgIGNvbnN0IG15U2Nob29sID0gZW52LmN1cnJlbnRVc2VyLnNjaG9vbDtcclxuICAgIGNvdXJzZS5zY2hvb2wgPSBteVNjaG9vbDtcclxuICAgIGNvdXJzZS5kZXNjcmlwdGlvbiA9IFwiXCI7XHJcbiAgICBjb3Vyc2UucmVzcG9uc2libGVUZWFjaGVycyA9IFt7bmFtZTogZW52LmN1cnJlbnRVc2VyLmRpc3BsYXlOYW1lLCBlbWFpbDogZW52LmN1cnJlbnRVc2VyLm1haWwsIGFjY2VzczogJ2Z1bGwnLCB1cmw6IGVudi5jdXJyZW50VXNlci5tYWlsfV07XHJcbiAgICBkZWxldGUgY291cnNlLnN0dWR5R3JvdXBzO1xyXG4gICAgY291cnNlLmFjbCA9IFtcclxuICAgICAgXCJyb2xlOlVTRVI6UlwiLCAvLyBBbGwgdXNlcnMgbWF5IHZpZXcgaXQuIChDb3VsZCBoYXZlIHJlc3RyaWN0ZWQgaXQgdG8gc2Nob29sLCBidXQgbm90IG5lc2Nlc3NhcnkhKVxyXG4gICAgICBgc2Nob29sUm9sZToke215U2Nob29sfS9FTVBMT1lFRTpTYCAvLyBPdGhlciB0ZWFjaGVycyBhdCBzYW1lIHNjaG9vbCBzaG91bGQgYmUgYWJsZSB0byBtb2RpZnkgdGhlIGNvdXJzZS5cclxuICAgIF07XHJcbiAgICBkZWxldGUgY291cnNlLiRldGFnO1xyXG4gICAgZGVsZXRlIGNvdXJzZS5jcmVhdGVkQnk7XHJcbiAgICBkZWxldGUgY291cnNlLmNyZWF0ZWREYXRlO1xyXG4gICAgZGVsZXRlIGNvdXJzZS5tb2RpZmllZEJ5O1xyXG4gICAgZGVsZXRlIGNvdXJzZS5tb2RpZmllZERhdGU7XHJcbiAgICBkZWxldGUgY291cnNlLmFjdGl2YXRlZEJ5O1xyXG4gICAgZGVsZXRlIGNvdXJzZS5hY3RpdmF0ZWREYXRlO1xyXG4gICAgZGVsZXRlIGNvdXJzZS5nb29nbGVDbGFzc1Jvb21Db2RlO1xyXG4gICAgZGVsZXRlIGNvdXJzZS5nb29nbGVDbGFzc1Jvb21VUkw7XHJcbiAgICBkZWxldGUgY291cnNlLmdvb2dsZUNyZWF0ZUNsYXNzcm9vbXM7XHJcbiAgICBhd2FpdCB0aGlzLnNldFN0YXRlUHJvbWlzZWQoeyBjb3Vyc2UsIG9yaWdDb3Vyc2U6IG51bGwsIG9yaWdUZW1wbGF0ZTogdGVtcGxhdGUgfSk7XHJcbiAgICBzaG93SW5mbyhcIlwiKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGxvYWQoKSB7XHJcbiAgICB1cGRhdGVDb3Vyc2VCdWlsZGVyU3RhdHVzKCcnKTtcclxuICAgIGlmICh0aGlzLnByb3BzLmlkKSB7XHJcbiAgICAgIGF3YWl0IHRoaXMubG9hZEV4aXN0aW5nQ291cnNlKHRoaXMucHJvcHMuaWQpO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLnRlbXBsYXRlSWQpIHtcclxuICAgICAgYXdhaXQgdGhpcy5sb2FkRnJvbVRlbXBsYXRlKHRoaXMucHJvcHMudGVtcGxhdGVJZCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoTGBPZ2lsdGlnIHBhcmFtZXRlci4gaWQgZWxsZXIgdGVtcGxhdGVJZCBtw6VzdGUgYW5nZXNgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGxvYWRFeGlzdGluZ0NvdXJzZShjb3Vyc2VJZDogc3RyaW5nKSB7XHJcbiAgICBzaG93SW5mbyhcIkxhZGRhciBrdXJzXCIpO1xyXG4gICAgY29uc3QgY291cnNlID0gYXdhaXQgbG9hZENvdXJzZShjb3Vyc2VJZCk7XHJcbiAgICBpZiAoIWNvdXJzZS5yZXNwb25zaWJsZVRlYWNoZXJzKSBjb3Vyc2UucmVzcG9uc2libGVUZWFjaGVycyA9IFt7bmFtZTogZW52LmN1cnJlbnRVc2VyLmRpc3BsYXlOYW1lLCBlbWFpbDogZW52LmN1cnJlbnRVc2VyLm1haWwsIGFjY2VzczogJ2Z1bGwnLCB1cmw6IGVudi5jdXJyZW50VXNlci5tYWlsfV07XHJcbiAgICBhd2FpdCB0aGlzLnNldE5vblNhdmVhYmxlRGF0YVN0YXRlKHsgY291cnNlLCBvcmlnQ291cnNlOiBjb3Vyc2UgfSk7XHJcbiAgICBzaG93SW5mbyhcIlwiKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHVwZGF0ZShjb3Vyc2VVcGRhdGVzKSB7XHJcbiAgICBhd2FpdCB0aGlzLnNldFN0YXRlUHJvbWlzZWQoeyBjb3Vyc2U6IHVwZGF0ZSh0aGlzLnN0YXRlLmNvdXJzZSwgY291cnNlVXBkYXRlcykgfSk7ICBcclxuICAgIC8vY2hlY2sgY2xhc3Nyb29tIGNoYW5nZXNcclxuICAgIGlmIChmZWF0dXJlcy5zdHVkeUdyb3Vwcyl7XHJcbiAgICB0aGlzLl9jaGVja0NsYXNzcm9vbUNoYW5nZXMoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGRlbGV0ZUNvdXJzZSgpIHtcclxuICAgIHNob3dJbmZvKFwiUmFkZXJhciBrdXJzZW4uLi5cIik7XHJcbiAgICBjb25zdCBjb3Vyc2VTY2hvb2wgPSB0aGlzLnN0YXRlLmNvdXJzZS5zY2hvb2w7XHJcbiAgICBjb25zdCBwYXJlbnRJZCA9IHRoaXMuc3RhdGUuY291cnNlLnBhcmVudElkO1xyXG4gICAgY29uc3QgY291cnNlSWQgPSB0aGlzLnByb3BzLmlkO1xyXG5cclxuXHJcbiAgICAvLyBEZWxldGUgaW4gQ2xhc3Nyb29tXHJcbiAgICBjb25zdCBjbGFzc3Jvb21TeW5jID0gbmV3IENsYXNzcm9vbVN5bmMoKTtcclxuICAgIGNsYXNzcm9vbVN5bmMuZGVsZXRlKHtyZXNwb25zaWJsZVRlYWNoZXJzOiB0aGlzLnN0YXRlLmNvdXJzZS5yZXNwb25zaWJsZVRlYWNoZXJzLCBpZDogY291cnNlSWR9KTtcclxuXHJcblxyXG4gICAgY29uc3QgY2hpbGRyZW4gPSBhd2FpdCBlbnYua2VkQmFja2VuZENsaWVudC5saXN0PENvdXJzZT4oXCJjb3Vyc2VzXCIsIHtcclxuICAgICAgaGFzRWRnZXNUbzogW3RoaXMucHJvcHMuaWRdXHJcbiAgICB9KTtcclxuICAgIGNvbnN0IGJyID0gbmV3IEJhdGNoUnVubmVyKCk7XHJcbiAgICBmb3IgKGNvbnN0IGNoaWxkQ291cnNlIG9mIGNoaWxkcmVuKSB7XHJcbiAgICAgIC8qIENBTk5PVCBETyBUSElTLiBNQVkgTk9UIEhBVkUgQUNDRVNTISBpZiAoY2hpbGRDb3Vyc2UucGFyZW50SWQgPT09IGNvdXJzZUlkKSB7XHJcbiAgICAgICAgLy8gUmVjb25uZWN0IGNoaWxkIHdpdGggbXkgcGFyZW50IGluc3RlYWQsIGFzIEkgd2lsbCBiZSBkaXNhcHBlYXJpbmcuLi5cclxuICAgICAgICBjaGlsZENvdXJzZS5wYXJlbnRJZCA9IHBhcmVudElkO1xyXG4gICAgICAgIGJyLnB1dChcImNvdXJzZXNcIiwgY2hpbGRDb3Vyc2UpO1xyXG4gICAgICB9Ki9cclxuICAgIH1cclxuXHJcbiAgICBici5kZWxldGUoXCJjb3Vyc2VzXCIsIGNvdXJzZUlkKTtcclxuICAgIGF3YWl0IGVudi5rZWRCYWNrZW5kQ2xpZW50LmJhdGNoKGJyLm11dGF0aW9uUmVxdWVzdHMpO1xyXG4gICAgaWYgKGNvdXJzZVNjaG9vbCA9PT0gZW52LmN1cnJlbnRVc2VyLnNjaG9vbCkge1xyXG4gICAgICBteVNjaG9vbENvdXJzZXNSZXBvLmRlbGV0ZShjb3Vyc2VJZCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHNob3dJbmZvKFwiXCIpO1xyXG4gICAgbG9jYXRpb24uaGFzaCA9IFwiIy9jb3Vyc2VzL25ld1wiO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSW4gY2FzZSB0aGF0IHRoZSBjb3Vyc2UgaGFzIGNoYW5nZXMgd2hpY2ggc2hvdWxkIGJlIHN5bmNlZCB3aXRoIGNsYXNzcm9vbVxyXG4gICAqIEFzayB0aGUgdXNlciBpZiB0aGUgc3luYyBzaG91bGQgYmUgZG9uZVxyXG4gICAqL1xyXG4gIGFzeW5jIGNvbmZpcm1TYXZlQW5kU3luYygpe1xyXG4gICAgY29uc3QgeyBjb3Vyc2V9ID0gdGhpcy5zdGF0ZTtcclxuICAgIHZhciBzeW5jV2l0aENsYXNzcm9vbSA9IGZhbHNlO1xyXG4gICAgLy9jb25maXJtIHNob3VsZCBub3QgYmUgZGlzcGxheWVkIGluIGNhc2UgdGhlIGNoZWNrYm94IHdhcyBzYXZlZCBhbmQgdGhlIGZlYXR1cmUgZmxhZyBpcyBvZmZcclxuICAgIGlmIChjb3Vyc2UuZ29vZ2xlQ3JlYXRlQ2xhc3Nyb29tcyAmJiAhY291cnNlLmluU3luY1dpdGhDbGFzc3Jvb20gJiYgZmVhdHVyZXMuc3R1ZHlHcm91cHMpIHtcclxuICAgICAgc3luY1dpdGhDbGFzc3Jvb20gPSBjb25maXJtKExgU3lua3VycyBrdXJzIG1lZCBrbGFzc3J1bT9gKTsgICBcclxuICAgIH1cclxuICAgIGF3YWl0IHN5bmNXaXRoQ2xhc3Nyb29tID8gdGhpcy5zeW5jV2l0aENsYXNzcm9vbUFuZFNhdmUoKSA6IHRoaXMuc2F2ZSgpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgc2F2ZSAoKSB7XHJcbiAgICAvL2FyY2hpdmUgZ29vZ2xlIGNsYXNzcm9vbSBzeW5jZWQgY291cnNlc1xyXG4gICAgY29uc3QgeyBjb3Vyc2UsIG9yaWdDb3Vyc2UgfSA9IHRoaXMuc3RhdGU7XHJcbiAgICBpZiAoZmVhdHVyZXMuc3R1ZHlHcm91cHMgJiYgb3JpZ0NvdXJzZSAmJiBvcmlnQ291cnNlLmdvb2dsZUNyZWF0ZUNsYXNzcm9vbXMgJiYgIWNvdXJzZS5nb29nbGVDcmVhdGVDbGFzc3Jvb21zKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgY2xhc3Nyb29tU3luYyA9IG5ldyBDbGFzc3Jvb21TeW5jKCk7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IGF3YWl0IGNsYXNzcm9vbVN5bmMuYXJjaGl2ZShjb3Vyc2UpO1xyXG4gICAgICAgIGlmICghcmVzdWx0LmRvbmUpIHtcclxuICAgICAgICAgIHNob3dFcnJvcihMYENsYXNzcm9vbSBjb3Vyc2UgY291bGQgbm90IGJlIGFyY2hpdmVkYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChjYXRjaGVyKSB7IH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBlbmFibGVUZWFjaGVyUmlnaHRzID0gZmVhdHVyZXMudGVhY2hlclJpZ2h0cztcclxuICAgIGNvbnN0IG9yaWdBY2Nlc3NMaXN0ID0gdGhpcy5zdGF0ZS5vcmlnQ291cnNlID8gZ2V0U29mdEFjY2Vzc0xpc3QodGhpcy5zdGF0ZS5vcmlnQ291cnNlKSA6IFtdO1xyXG4gICAgY29uc3QgbW9kaWZpZWRBY2Nlc3NMaXN0ID0gZ2V0U29mdEFjY2Vzc0xpc3QodGhpcy5zdGF0ZS5jb3Vyc2UpO1xyXG4gICAgY29uc3QgY3VycmVudFVzZXIgPSBnZXRDdXJyZW50VXNlcigpO1xyXG4gICAgaWYgKGVuYWJsZVRlYWNoZXJSaWdodHMgJiZcclxuICAgICAgKCFjdXJyZW50VXNlci5yb2xlcy5pbmNsdWRlcyhcIkFETUlOXCIpICYmXHJcbiAgICAgICAgIVsuLi5vcmlnQWNjZXNzTGlzdCwgLi4ubW9kaWZpZWRBY2Nlc3NMaXN0XS5zb21lKFxyXG4gICAgICAgICAgKHtlbWFpbCwgdXJsLCBhY2Nlc3N9KSA9PiAvLyB1cmwgaXMgZm9yIGJhY2thcmQgY29tcGF0ISBIYXMgYmVlbiByZW5hbWVkIHRvIGVtYWlsLlxyXG4gICAgICAgICAgICAoZW1haWwgfHwgdXJsKSA9PT0gY3VycmVudFVzZXIubWFpbCAmJiAvLyB1cmwgaXMgZm9yIGJhY2t3YXJkIGNvbXBhdCEgSGFzIGJlZW4gcmVuYW1lZCB0byBlbWFpbC5cclxuICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgICFhY2Nlc3MgfHwgLy8gQmFja3dhcmQgY29tcGF0LiBXYXMgbm90IHBvc3NpYmxlIHRvIHNldCBhY2Nlc3MgYmVmb3JlIVxyXG4gICAgICAgICAgICAgIGFjY2VzcyA9PT0gJ2VkaXQnIHx8IC8vIEVkaXQgaXMgZmluZVxyXG4gICAgICAgICAgICAgIGFjY2VzcyA9PT0gJ2Z1bGwnKVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICApXHJcbiAgICAgIClcclxuICAgIHtcclxuICAgICAgc2hvd0Vycm9yKExgS3Vyc2VuIGt1bmRlIGludGUgc3BhcmFzLiBMw6RnZyB0aWxsIGRpZyBzasOkbHYgaSBsaXN0YW4gcMOlIGFuc3ZhcmlnYSBsw6RyYXJlYCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmlzU2F2aW5nKSByZXR1cm47XHJcbiAgICB0cnkge1xyXG4gICAgICB0aGlzLmlzU2F2aW5nID0gdHJ1ZTtcclxuICAgICAgYXdhaXQgdGhpcy5fc2F2ZSgpO1xyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIGxldCBlcnJvck1lc3NhZ2UgPSBlcnIgJiYgZXJyLm1lc3NhZ2UgPyBlcnIubWVzc2FnZSA6IExgRXR0IG9rw6RudCBmZWwgaGFyIGludHLDpGZmYXQuLi5gO1xyXG4gICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgaWYgKGVyci5uYW1lID09PSAnaHR0cDQwOScgfHwgZXJyLm5hbWUgPT09ICdodHRwNDEyJyB8fCBlcnIubmFtZSA9PT0gJ2h0dHA0MDQnKSB7XHJcbiAgICAgICAgICAvLyBDb25mbGljdC4gU2hvdyBhIG5pY2VyIGVycm9yIG1lc3NhZ2U6XHJcbiAgICAgICAgICBlcnJvck1lc3NhZ2UgPSBMYEt1cnNlbiBoYXIgcmVkaWdlcmFkIGF2IGFubmFuIGFudsOkbmRhcmUuIExhZGRhIG9tIHNpZGFuIG9jaCBnw7ZyIG9tIMOkbmRyaW5hcm5hLmA7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlcnIubmFtZSA9PT0gJ2h0dHA0MDMnKSB7XHJcbiAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5jb3Vyc2UuaXNUZW1wbGF0ZSlcclxuICAgICAgICAgICAgZXJyb3JNZXNzYWdlID0gTGBJbmdlbiBiZWjDtnJpZ2hldCBhdHQgc3BhcmEga3Vyc21hbGxlbi4gRW5kYXN0IGFkbWluaXN0cmF0w7ZyZXIga2FuIHJlZGlnZXJhIGt1cnNtYWxsYXIuYDtcclxuICAgICAgICAgIGVsc2UgaWYgKHRoaXMuc3RhdGUuY291cnNlLnNjaG9vbClcclxuICAgICAgICAgICAgZXJyb3JNZXNzYWdlID0gTGBJbmdlbiBiZWjDtnJpZ2hldCBhdHQgc3BhcmEga3Vyc2VuICR7dGhpcy5zdGF0ZS5jb3Vyc2UubmFtZX0uIEt1cnNlbiBrYW4gYmFyYSByZWRpZ2VyYXMgYXYgYW5zdMOkbGxkYSBww6UgJHt0aGlzLnN0YXRlLmNvdXJzZS5zY2hvb2x9YDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgc2hvd0Vycm9yKGVycm9yTWVzc2FnZSk7XHJcbiAgICAgIHVwZGF0ZUNvdXJzZUJ1aWxkZXJTdGF0dXMoJ2Vycm9yJyk7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICB0aGlzLmlzU2F2aW5nID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzeW5jSW5Qcm9ncmVzcygpIDogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5jbGFzc3Jvb21TeW5jSW5Qcm9ncmVzcztcclxuICB9XHJcblxyXG4gIGFzeW5jIHN5bmNXaXRoQ2xhc3Nyb29tQW5kU2F2ZSgpIHtcclxuICAgIGNvbnN0IHsgY291cnNlLCBvcmlnQ291cnNlIH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgY29uc29sZS5sb2coY291cnNlKTtcclxuICAgIGNvbnNvbGUubG9nKG9yaWdDb3Vyc2UpO1xyXG4gICAgYXdhaXQgdGhpcy5zYXZlKCk7IFxyXG4gICAgLy8gaWYgdGhlcmUgaXMgc3RpbGwgdW5zYXZlZCBkYXRhIGl0IG1lYW5zIHRoYXQgYW4gZXJyb3IgZW5jb3VudGVyZWQgZHVyaW5nIHNhdmUuIFxyXG4gICAgLy8gc3luYyB3aXRoIGdvb2dsZSBjbGFzc3Jvb20gd2lsbCBiZSBjYW5jZWxlZFxyXG4gICAgaWYodGhpcy5zdGF0ZS5oYXNVbnNhdmVkRGF0YSkge1xyXG4gICAgICBzaG93RXJyb3IoTGBTeW5rcm9uaXNlcmluZyBtZWQga2xhc3NydW1tZXQgc2t1bGxlIGludGUgc2tlYCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHsgY2xhc3Nyb29tU3luY0luUHJvZ3Jlc3M6IHRydWUgfSk7XHJcbiAgICAgIGNvbnN0IGNsYXNzcm9vbVN5bmMgPSBuZXcgQ2xhc3Nyb29tU3luYygpO1xyXG4gICAgICBpZiAoY291cnNlLmdvb2dsZUNyZWF0ZUNsYXNzcm9vbXMpIHtcclxuICAgICAgICAvL2NvdXJzZSBpcyBub3QgY3JlYXRlZCBpbiBjbGFzc3Jvb20geWV0XHJcbiAgICAgICAgdmFyIGZ1bGxTeW5jTmVlZGVkID0gY291cnNlLmluU3luY1dpdGhDbGFzc3Jvb20gPT0gbnVsbDtcclxuICAgICAgICB2YXIgc3luY1Jlc3VsdCA9IGF3YWl0IGNsYXNzcm9vbVN5bmMuaW5pdFN5bmMoY291cnNlLCBvcmlnQ291cnNlLCBmdWxsU3luY05lZWRlZCk7XHJcbiAgICAgICAgaWYoc3luY1Jlc3VsdC5kb25lKXtcclxuICAgICAgICAgIHRoaXMudXBkYXRlKHtpblN5bmNXaXRoQ2xhc3Nyb29tOiB7ICRzZXQ6IHRydWUgfX0pO1xyXG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGNsYXNzcm9vbVN5bmNJblByb2dyZXNzOiBmYWxzZSB9KTtcclxuXHJcbiAgICAgICAgICAvL3VwZGF0ZSBpblN5bmNXaXRoQ2xhc3Nyb29tIGZsYWdcclxuICAgICAgICAgIGF3YWl0IHRoaXMuX3NhdmUodHJ1ZSk7XHJcbiAgICAgICAgICBzaG93SW5mbyhMYFN5bmtyb25pc2VyaW5nIG1lZCBmcmFtZ8OlbmdgKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc2hvd0Vycm9yKExgRmVsIHN5bmtyb25pc2VyYXQga2xhc3NydW1gKTtcclxuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBjbGFzc3Jvb21TeW5jSW5Qcm9ncmVzczogZmFsc2UgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyKSB7IGNhdGNoZXIgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBfc2F2ZShzaWxlbnRTYXZlOiBib29sZWFuID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IHsgY291cnNlLCBvcmlnQ291cnNlLCBvcmlnVGVtcGxhdGUgfSA9IHRoaXMuc3RhdGU7XHJcbiAgICBjb25zdCBkb2VzQWxsVGFza3NDb3ZlckFsbFJlcXVpcmVtZW50cyA9IGdldFVuY292ZXJlZEtub3dsZWRnZVJlcXVpcmVtZW50cyhjb3Vyc2UpLmxlbmd0aCA9PT0gMDtcclxuXHJcbiAgICAhc2lsZW50U2F2ZSAmJiBzaG93SW5mbyhMYFNwYXJhci4uLmApO1xyXG4gICAgbGV0IG1vZGlmaWVkQ291cnNlOiBDb3Vyc2UgPSB1cGRhdGVNb2RpZmljYXRpb25TdGFtcChEYXRlLm5vdygpLCBjb3Vyc2UsIGVudi5jdXJyZW50VXNlcik7XHJcblxyXG4gICAgY29uc3QgYmF0Y2ggPSBuZXcgQmF0Y2hSdW5uZXIoKTtcclxuXHJcbiAgICAvLyBSZXNvbHZlIG1hbmlwdWxhdGVkIGdyYXBocyBvZiBlYWNoIHRhc2sgYW5kIHJlbW92ZSAkbWV0YSwgZ2VuZXJhdGUgVVVJRCBldGMgZm9yXHJcbiAgICAvLyBlYWNoIGFkZGVkIC8gdXBkYXRlZCB0YXNrLlxyXG4gICAgLy8gVGhlIHJlc3VsdCBvZiB0aGlzIG9wZXJhdGlvbiBpcyB0d28tZm9sZDpcclxuICAgIC8vICAxKSBSZW1vdmUgJG1ldGEgYW5kIGNyZWF0ZSBpZCBmb3IgZWFjaCB0YXNrLiBUbyBiZSByZWZsZWN0ZWQgaW50byBuZXh0IHN0YXRlLlxyXG4gICAgLy8gIDIpIEdlbmVyYXRlIG11dGF0aW9uIHJlcXVlc3RzIGludG8gJ2JhdGNoJyB0byBpbmNsdWRlIGluIHRoZSBzaW5nbGUgYmF0Y2ggcmVxdWVzdCB0byB0aGUgc2VydmVyLlxyXG4gICAgY29uc3Qgb3JpZyA9IG9yaWdDb3Vyc2UgfHwgb3JpZ1RlbXBsYXRlO1xyXG4gICAgY29uc3QgbmV3Q291cnNlVGFza3MgPSBtb2RpZmllZENvdXJzZS50YXNrcy5tYXAodGFzayA9PiB7XHJcbiAgICAgIGlmICh0YXNrLiRtZXRhID09PSAnYWRkJyB8fCB0YXNrLiRtZXRhID09PSAndXBkYXRlJykge1xyXG4gICAgICAgIGNvbnN0IG9yaWdUYXNrID0gb3JpZy50YXNrcy5maW5kKHQgPT4gdC5pZCA9PT0gdGFzay5pZCk7XHJcbiAgICAgICAgcmV0dXJuIHVwZGF0ZURvY3VtZW50R3JhcGhzKG9yaWdUYXNrIHx8IHt9LCB0YXNrLCBcInRhc2tzXCIsIHtcclxuICAgICAgICAgIGtub3dsZWRnZVJlcXVpcmVtZW50czogJ2tub3dsZWRnZS1yZXF1aXJlbWVudHMnLFxyXG4gICAgICAgICAgY2VudHJhbENvbnRlbnQ6ICdjZW50cmFsLWNvbnRlbnQnLFxyXG4gICAgICAgICAgYWJpbGl0aWVzOiAnYWJpbGl0aWVzJ1xyXG4gICAgICAgIH0sIGJhdGNoKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zdCB1cGRhdGVkVGFzayA9IHsuLi50YXNrfTtcclxuICAgICAgICBkZWxldGUgdXBkYXRlZFRhc2suJG1ldGE7XHJcbiAgICAgICAgcmV0dXJuIHVwZGF0ZWRUYXNrO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIG1vZGlmaWVkQ291cnNlID0gdXBkYXRlKG1vZGlmaWVkQ291cnNlLCB7dGFza3M6IHskc2V0OiBuZXdDb3Vyc2VUYXNrc319KTtcclxuXHJcbiAgICBtb2RpZmllZENvdXJzZSA9IHVwZGF0ZURvY3VtZW50R3JhcGhzKG9yaWdDb3Vyc2UgfHwge30sIG1vZGlmaWVkQ291cnNlLCAnY291cnNlcycsIHtcclxuICAgICAgdGVtcGxhdGVDaGFpbjogJ2NvdXJzZXMnLFxyXG4gICAgICBjZW50cmFsQ29udGVudDogJ2NlbnRyYWwtY29udGVudCcsXHJcbiAgICAgIGtub3dsZWRnZVJlcXVpcmVtZW50czogJ2tub3dsZWRnZS1yZXF1aXJlbWVudHMnLFxyXG4gICAgICBhYmlsaXRpZXM6ICdhYmlsaXRpZXMnLFxyXG4gICAgICBpbWFnZXM6ICdpbWFnZXMnLFxyXG4gICAgICB0YXNrczogJ3Rhc2tzJ1xyXG4gICAgfSwgYmF0Y2gpO1xyXG5cclxuICAgIG1vZGlmaWVkQ291cnNlID0gey4uLm1vZGlmaWVkQ291cnNlIH07XHJcbiAgICBtb2RpZmllZENvdXJzZS5wdWJsaXNoYWJsZSA9IGRvZXNBbGxUYXNrc0NvdmVyQWxsUmVxdWlyZW1lbnRzO1xyXG4gICAgY29uc3QgdGFncyA9IChtb2RpZmllZENvdXJzZS50YWdzIHx8IFtdKS5maWx0ZXIodGFnID0+IHRhZyAhPT0gJ2luY29tcGxldGUnKTtcclxuICAgIG1vZGlmaWVkQ291cnNlLnRhZ3MgPSBtb2RpZmllZENvdXJzZS5wdWJsaXNoYWJsZSA/XHJcbiAgICAgIHRhZ3MgOiB0YWdzLmNvbmNhdChcImluY29tcGxldGVcIik7XHJcblxyXG4gICAgaWYgKCFvcmlnQ291cnNlKSB7XHJcbiAgICAgIC8vIEEgbmV3IGNvdXJzZSBzaG91bGQgYmUgYWRkZWQ6XHJcbiAgICAgIGJhdGNoLmFkZCgnY291cnNlcycsIG1vZGlmaWVkQ291cnNlKTtcclxuICAgICAgaWYgKGNvdXJzZS5zY2hvb2wpIHtcclxuICAgICAgICBjb25zdCBzY2hvb2xJZCA9IGF3YWl0IG15U2Nob29sQ291cnNlc1JlcG8uZ2V0U2Nob29sSWQoKTtcclxuICAgICAgICBiYXRjaC5saW5rKFwic2Nob29sc1wiLCBzY2hvb2xJZCwgXCJjb3Vyc2VzXCIsIGNvdXJzZS5pZCwgXCJjb3Vyc2VzXCIpO1xyXG4gICAgICAgIGlmIChjb3Vyc2UuYWN0aXZlKSB7XHJcbiAgICAgICAgICBiYXRjaC5saW5rKFwic2Nob29sc1wiLCBzY2hvb2xJZCwgXCJjb3Vyc2VzXCIsIGNvdXJzZS5pZCwgXCJhY3RpdmVDb3Vyc2VzXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gQW4gZXhpc3RpbmcgY291cnNlIHNob3VsZCBiZSB1cGRhdGVkOlxyXG4gICAgICBiYXRjaC5wdXQoJ2NvdXJzZXMnLCBtb2RpZmllZENvdXJzZSk7XHJcbiAgICAgIGlmICghb3JpZ0NvdXJzZS5hY3RpdmUgJiYgY291cnNlLmFjdGl2ZSkge1xyXG4gICAgICAgIC8vIENvdXJzZSB3YXMgYWN0aXZhdGVkLiBBZGQgYSByZWZlcmVuY2UgdG8gdGhlIGNvdXJzZSBvbiBzY2hvb2wuYWN0aXZlQ291cnNlcy5cclxuICAgICAgICBjb25zdCBzY2hvb2xJZCA9IGF3YWl0IG15U2Nob29sQ291cnNlc1JlcG8uZ2V0U2Nob29sSWQoKTtcclxuICAgICAgICBiYXRjaC5saW5rKFwic2Nob29sc1wiLCBzY2hvb2xJZCwgXCJjb3Vyc2VzXCIsIGNvdXJzZS5pZCwgXCJhY3RpdmVDb3Vyc2VzXCIpO1xyXG4gICAgICB9IGVsc2UgaWYgKG9yaWdDb3Vyc2UuYWN0aXZlICYmICFjb3Vyc2UuYWN0aXZlKSB7XHJcbiAgICAgICAgLy8gQ291cnNlIHdhcyBpbmFjdGl2YXRlZC4gUmVtb3ZlIGZyb20gc2Nob29sLmFjdGl2ZUNvdXJzZXMuXHJcbiAgICAgICAgY29uc3Qgc2Nob29sSWQgPSBhd2FpdCBteVNjaG9vbENvdXJzZXNSZXBvLmdldFNjaG9vbElkKCk7XHJcbiAgICAgICAgYmF0Y2gudW5saW5rKFwic2Nob29sc1wiLCBzY2hvb2xJZCwgXCJjb3Vyc2VzXCIsIGNvdXJzZS5pZCwgXCJhY3RpdmVDb3Vyc2VzXCIpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUGVyZm9ybSB0aGUgZW50aXJlIGJhdGNoIHRocm91Z2ggYSBzaW5nbGUgUE9TVCByZXF1ZXN0OlxyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgZW52LmtlZEJhY2tlbmRDbGllbnQuYmF0Y2goYmF0Y2gubXV0YXRpb25SZXF1ZXN0cyk7XHJcbiAgICAhc2lsZW50U2F2ZSAmJiBzaG93SW5mbyAob3JpZ0NvdXJzZSA/XHJcbiAgICAgIExgw4RuZHJpbmdhcm5hIGhhciBzcGFyYXRzYCA6XHJcbiAgICAgIExgS3Vyc2VuIGhhciBza2FwYXRzYCk7XHJcbiAgICAvLyBVcGRhdGUgc3RhdGUgdG8gcmVmbGVjdCB3aGF0IGhhcyBiZWVuIHBvc3RlZDpcclxuICAgIGlmIChyZXMgJiYgcmVzLm5ld0V0YWdzKVxyXG4gICAgICAgIG1vZGlmaWVkQ291cnNlID0gYXBwbHlFdGFncyhtb2RpZmllZENvdXJzZSwgcmVzLm5ld0V0YWdzLCBbXCJpbWFnZXNcIiwgXCJ0YXNrc1wiXSkgYXMgQ291cnNlO1xyXG4gICAgXHJcbiAgICBpZiAoY291cnNlLnNjaG9vbCA9PT0gZW52LmN1cnJlbnRVc2VyLnNjaG9vbCkge1xyXG4gICAgICAvLyBVcGRhdGUgbXlTY2hvb2xDb3Vyc2VzUmVwb1xyXG4gICAgICBpZiAoIW9yaWdDb3Vyc2UpIHtcclxuICAgICAgICBteVNjaG9vbENvdXJzZXNSZXBvLmluc2VydChtb2RpZmllZENvdXJzZSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbXlTY2hvb2xDb3Vyc2VzUmVwby51cGRhdGUobW9kaWZpZWRDb3Vyc2UpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgdGhpcy5zZXROb25TYXZlYWJsZURhdGFTdGF0ZSh7Y291cnNlOiBtb2RpZmllZENvdXJzZSwgb3JpZ0NvdXJzZTogbW9kaWZpZWRDb3Vyc2UsIGhhc1Vuc2F2ZWREYXRhOiBmYWxzZX0pO1xyXG4gICAgdXBkYXRlQ291cnNlQnVpbGRlclN0YXR1cygnJyk7XHJcbiAgICBpZiAoIW9yaWdDb3Vyc2UpIHtcclxuICAgICAgLy8gVGhpcyB3YXMgdGhlIGNyZWF0aW9uIG9mIGEgbmV3IGNvdXJzZS4gQ29ycmVjdCB0aGUgcm91dGUgbm93IHdoZW4gdGhlIHVzZXIgZW50ZXJzIGFuIGVkaXQgc3RhdGU6XHJcbiAgICAgIGxvY2F0aW9uLmhhc2ggPSBgIy9jb3Vyc2VzLyR7bW9kaWZpZWRDb3Vyc2UuaWR9L2VkaXRgO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSAgX2NoZWNrQ2xhc3Nyb29tQ2hhbmdlcygpe1xyXG4gICAgY29uc3QgeyBjb3Vyc2UsIG9yaWdDb3Vyc2UgfSA9IHRoaXMuc3RhdGU7XHJcbiAgICBjb25zdCBhcnIxc2V0ID0gY291cnNlLnRhc2tzLmZpbHRlcih4ID0+IHguYXNzaWdubWVudCk7XHJcbiAgICBpZiAoIW9yaWdDb3Vyc2UpIHtcclxuICAgICAgY291cnNlLmluU3luY1dpdGhDbGFzc3Jvb20gPSBmYWxzZTtcclxuICAgICAgdGhpcy5zZXRTdGF0ZVByb21pc2VkKHtjb3Vyc2V9KTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgLy9pZiAoY291cnNlLmluU3luY1dpdGhDbGFzc3Jvb20pIHtcclxuICAgIGNvbnN0IGFycjJzZXQgPSBvcmlnQ291cnNlLnRhc2tzLmZpbHRlcih4ID0+IHguYXNzaWdubWVudCk7ICAgXHJcbiAgICAvL2NoZWNrIHRhc2tzIGFkZGVkIG9yIHJlbW92ZWRcclxuICAgIHZhciBoYXNUZWFjaGVyQ2hhbmdlcyA9IGhhc0NoYW5nZXMob3JpZ0NvdXJzZS5yZXNwb25zaWJsZVRlYWNoZXJzLCBjb3Vyc2UucmVzcG9uc2libGVUZWFjaGVycyk7XHJcbiAgICAvL1xyXG4gICAgdmFyIGhhc1Rhc2tzQ2hhbmdlcyA9IGFycjFzZXQuZmlsdGVyKCh4KSA9PiAhYXJyMnNldC5maW5kKHkgPT4geS5pZCA9PSB4LmlkKSkubGVuZ3RoID4gMCB8fCBhcnIyc2V0LmZpbHRlcigoeCkgPT4gIWFycjFzZXQuZmluZCh5ID0+IHkuaWQgPT0geC5pZCkpLmxlbmd0aCA+IDA7ICAgIFxyXG4gICAgLy9jaGVjayBpZiBhbnkgdGFzayByZW5hbWVkIG9yIGNoYW5nZWQgaXRzIHR5cGVcclxuICAgIGlmICghaGFzVGFza3NDaGFuZ2VzKSB7XHJcbiAgICAgIGhhc1Rhc2tzQ2hhbmdlcyA9IGFycjFzZXQuc29tZShlMSA9PiBhcnIyc2V0LmZpbmQoZTIgPT4ge1xyXG4gICAgICAgIHJldHVybiBlMi5pZCA9PT0gZTEuaWQgJiYgZTIubmFtZSAhPT0gZTEubmFtZTtcclxuICAgICAgfSkgIT0gbnVsbCk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGhhc1N0dWR5R3JvdXBzQ2hhbmdlcyA9IGhhc0NoYW5nZXMob3JpZ0NvdXJzZS5zdHVkeUdyb3VwcywgY291cnNlLnN0dWR5R3JvdXBzKTtcclxuICAgIC8vY2hlY2tzIGFyZSBtYWRlIHdpdGggdGhlIHByZXZpb3VzIG9iamVjdCBpbiBjYXNlIHRoYXQgdGhlIHVzZXIgd2lsbCByZXZlcnQgdGhlIGNoYW5nZXNcclxuICAgIHZhciBwcmV2U3RhdHVzID0gIGNvdXJzZS5pblN5bmNXaXRoQ2xhc3Nyb29tO1xyXG4gICAgY291cnNlLmluU3luY1dpdGhDbGFzc3Jvb20gPSAhKGhhc1RlYWNoZXJDaGFuZ2VzIHx8IGhhc1Rhc2tzQ2hhbmdlcyB8fCBoYXNTdHVkeUdyb3Vwc0NoYW5nZXMpO1xyXG4gICAgaWYgKHByZXZTdGF0dXMgIT0gY291cnNlLmluU3luY1dpdGhDbGFzc3Jvb20pIHtcclxuICAgICAgdGhpcy5zZXRTdGF0ZVByb21pc2VkKHsgY291cnNlIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYWN0aXZhdGVBbmRTYXZlKCkge1xyXG4gICAgY29uc3QgY291cnNlID0gey4uLnRoaXMuc3RhdGUuY291cnNlfTtcclxuICAgIGlmICghY291cnNlLmFjdGl2ZSkge1xyXG4gICAgICAvKmNvbnN0IHVuY292ZXJlZFJlcXVpcmVtZW50cyA9IGdldFVuY292ZXJlZEtub3dsZWRnZVJlcXVpcmVtZW50cyhjb3Vyc2UpO1xyXG4gICAgICBpZiAodW5jb3ZlcmVkUmVxdWlyZW1lbnRzLmxlbmd0aCA+IDApIFxyXG4gICAgICAgIHJldHVybiBzaG93RXJyb3IgKExgRGV0IGZpbm5zIGt1bnNrYXBza3JhdiBzb20gaW50ZSB1cHBmeWxscyBhdiBuw6Vnb24gbW9kdWwuIEthbiBpbnRlIGFrdGl2ZXJhIGt1cnNlbiBmw7ZycsOkbiBhbGxhIGt1bnNrYXBza3JhdiBmaW5ucyBtZWQuYCk7XHJcbiAgICAgICovXHJcblxyXG4gICAgICBjb3Vyc2UuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgY291cnNlLmFjdGl2YXRlZEJ5ID0ge1xyXG4gICAgICAgIG5hbWU6IGVudi5jdXJyZW50VXNlci5kaXNwbGF5TmFtZSxcclxuICAgICAgICB1cmw6IFwibWFpbHRvOlwiICsgIGVudi5jdXJyZW50VXNlci5tYWlsXHJcbiAgICAgIH07XHJcbiAgICAgIGNvdXJzZS5hY3RpdmF0ZWREYXRlID0gRGF0ZS5ub3coKTtcclxuICAgICAgdGhpcy5zZXRTdGF0ZVByb21pc2VkKHtjb3Vyc2V9KVxyXG4gICAgICAgIC50aGVuKCgpPT50aGlzLnNhdmUoKSlcclxuICAgICAgICAuY2F0Y2goY2F0Y2hlcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpbmFjdGl2YXRlQW5kU2F2ZSgpIHtcclxuICAgIGNvbnN0IGNvdXJzZSA9IHsuLi50aGlzLnN0YXRlLmNvdXJzZX07XHJcbiAgICBpZiAoY291cnNlLmFjdGl2ZSkge1xyXG4gICAgICBjb3Vyc2UuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgIGNvdXJzZS5pbmFjdGl2YXRlZEJ5ID0ge1xyXG4gICAgICAgIG5hbWU6IGVudi5jdXJyZW50VXNlci5kaXNwbGF5TmFtZSxcclxuICAgICAgICB1cmw6IFwibWFpbHRvOlwiICsgIGVudi5jdXJyZW50VXNlci5tYWlsXHJcbiAgICAgIH07XHJcbiAgICAgIGNvdXJzZS5pbmFjdGl2YXRlZERhdGUgPSBEYXRlLm5vdygpO1xyXG4gICAgICB0aGlzLnNldFN0YXRlUHJvbWlzZWQoe2NvdXJzZX0pXHJcbiAgICAgICAgLnRoZW4oKCk9PnRoaXMuc2F2ZSgpKVxyXG4gICAgICAgIC5jYXRjaChjYXRjaGVyKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9wZW5EaWFsb2coZGlhbG9nQ29udGFpbmVyOiBEaWFsb2dDb250YWluZXIpIHtcclxuICAgIHRoaXMuc2V0Tm9uU2F2ZWFibGVEYXRhU3RhdGUoe2RpYWxvZ0NvbnRhaW5lcnM6IHRoaXMuc3RhdGUuZGlhbG9nQ29udGFpbmVycy5jb25jYXQoZGlhbG9nQ29udGFpbmVyKX0pO1xyXG4gIH1cclxuXHJcbiAgY2xvc2VEaWFsb2coKSB7XHJcbiAgICBjb25zdCB7ZGlhbG9nQ29udGFpbmVyc30gPSB0aGlzLnN0YXRlO1xyXG4gICAgY29uc3Qge2xlbmd0aH0gPSBkaWFsb2dDb250YWluZXJzO1xyXG4gICAgbGVuZ3RoICYmIHRoaXMuc2V0Tm9uU2F2ZWFibGVEYXRhU3RhdGUoe2RpYWxvZ0NvbnRhaW5lcnM6IGRpYWxvZ0NvbnRhaW5lcnMuc2xpY2UoMCwgbGVuZ3RoIC0gMSl9KTtcclxuICAgIC8vIE5vdyBzeW5jIHRoZSBkaXJlY3QgJ2RpYWxvZ3MnIHByb3BlcnR5IHdpdGggdGhlIG5ldyBzdGF0ZTpcclxuICAgIHdoaWxlICh0aGlzLmRpYWxvZ3MubGVuZ3RoID49IGxlbmd0aCkgdGhpcy5kaWFsb2dzLnBvcCgpO1xyXG4gIH1cclxuXHJcbiAgcmVmRGlhbG9nKGRpYWxvZzogRGlhbG9nICYgUmVhY3QuQ29tcG9uZW50LCBpbmRleDogbnVtYmVyKSB7XHJcbiAgICB0aGlzLmRpYWxvZ3NbaW5kZXhdID0gZGlhbG9nOyAvLyBTZXR0aW5nIHBlciBpbmRleCBpbnN0ZWFkIG9mIHB1c2goKS4gV29ya3MgZXZlbiBpZiB0aGUgcmVmIGF0dHJpYnV0ZSBjb3VsZCBiZSBpbnZva2VkIG11bHRpcGxlIHRpbWVzLlxyXG4gIH1cclxuXHJcbiAgb25LZXlEb3duIChldjogS2V5Ym9hcmRFdmVudCkge1xyXG4gICAgaWYgKGV2LndoaWNoID09PSA4MyAmJiAoZXYuY3RybEtleSB8fCBldi5tZXRhS2V5KSkgeyAvLyBDVFJMLVNcclxuICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgaWYgKHRoaXMuc3RhdGUuZGlhbG9nQ29udGFpbmVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgdGhpcy5zYXZlRGlhbG9nKCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuc2F2ZSgpO1xyXG4gICAgfSBlbHNlIGlmIChldi53aGljaCA9PT0gMjcgJiYgdGhpcy5zdGF0ZS5kaWFsb2dDb250YWluZXJzLmxlbmd0aCA+IDApIHtcclxuICAgICAgdGhpcy5jbG9zZURpYWxvZygpO1xyXG4gICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSBlbHNlIGlmIChldi53aGljaCA9PT0gMTMpIHtcclxuICAgICAgY29uc3QgdGFyZ2V0RWxlbSA9IGV2LnRhcmdldCBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgaWYgKHRoaXMuc3RhdGUuZGlhbG9nQ29udGFpbmVycy5sZW5ndGggPiAwICYmXHJcbiAgICAgICAgdGFyZ2V0RWxlbS50YWdOYW1lICE9PSAnVEVYVEFSRUEnICYmXHJcbiAgICAgICAgdGFyZ2V0RWxlbS50YWdOYW1lICE9PSAnSU5QVVQnICYmXHJcbiAgICAgICAgdGFyZ2V0RWxlbS50YWdOYW1lICE9PSAnU0VMRUNUJyAmJlxyXG4gICAgICAgIHRhcmdldEVsZW0udGFnTmFtZSAhPT0gJ09QVElPTicgJiZcclxuICAgICAgICAhdGFyZ2V0RWxlbS5jb250ZW50RWRpdGFibGUpXHJcbiAgICAgIHtcclxuICAgICAgICB0aGlzLnNhdmVEaWFsb2coKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYmVmb3JlVW5sb2FkKGV2OiBFdmVudCkge1xyXG4gICAgaWYgKHRoaXMuc3RhdGUuZGlhbG9nQ29udGFpbmVycy5sZW5ndGggPiAwIHx8IHRoaXMuc3RhdGUuaGFzVW5zYXZlZERhdGEpIHtcclxuICAgICAgaWYgKCFlbnYua2VkQmFja2VuZENsaWVudC5odHRwLmJlYXJlclByb3ZpZGVyLndhbnRzUmVkaXJlY3QpIHtcclxuICAgICAgICBldi5yZXR1cm5WYWx1ZSA9IENPTkZJUk1fTkFWSUdBVEVfTUVTU0FHRTtcclxuICAgICAgICByZXR1cm4gZXYucmV0dXJuVmFsdWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uQ2xpY2tQcmV2ZW50VW5sb2FkKGV2OiBFdmVudCkge1xyXG4gICAgaWYgKGV2LnRhcmdldCAmJiAoJycrKGV2LnRhcmdldCBhcyBhbnkpLnRhZ05hbWUpLnRvTG93ZXJDYXNlKCkgPT09ICdhJykge1xyXG4gICAgICBjb25zdCBhOiBIVE1MQW5jaG9yRWxlbWVudCA9IGV2LnRhcmdldCBhcyBIVE1MQW5jaG9yRWxlbWVudDtcclxuICAgICAgaWYgKGEuaHJlZiAmJiBhLmdldEF0dHJpYnV0ZSgnaHJlZicpICE9PSAnIycgJiYgIWEudGFyZ2V0KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuZGlhbG9nQ29udGFpbmVycy5sZW5ndGggPiAwIHx8IHRoaXMuc3RhdGUuaGFzVW5zYXZlZERhdGEpIHtcclxuICAgICAgICAgIGlmICghY29uZmlybShDT05GSVJNX05BVklHQVRFX01FU1NBR0UpKSB7XHJcbiAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzYXZlRGlhbG9nKCkge1xyXG4gICAgaWYgKHRoaXMuc3RhdGUuZGlhbG9nQ29udGFpbmVycy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGNvbnN0IGRpYWxvZyA9IHRoaXMuZGlhbG9nc1t0aGlzLnN0YXRlLmRpYWxvZ0NvbnRhaW5lcnMubGVuZ3RoLTFdOyAvLyBZRVMsIHNob3VsZCByZWZlcmVuY2UgdGhpcy5kaWFsb2dzIGJ5IGxlbmd0aCBvZiBkaWFsb2dDb250YWluZXJzLiBTdHJhbmdlIHllcywgYnV0IGxlYXZlIGl0IHNvIVxyXG4gICAgICBkaWFsb2cgJiYgZGlhbG9nLnNhdmUoKTsgXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCBpc0FkbWluID0gZW52LmN1cnJlbnRVc2VyLnJvbGVzLmluZGV4T2YoXCJBRE1JTlwiKSA+PSAwO1xyXG4gICAgY29uc3QgY291cnNlID0gdGhpcy5zdGF0ZS5jb3Vyc2U7XHJcbiAgICByZXR1cm4gIXRoaXMuc3RhdGUuY291cnNlID8gPGRpdiBzdHlsZT17e291dGxpbmU6IDB9fT5cclxuICAgICAgPENvdXJzZUJhbm5lclxyXG4gICAgICAgIHRpdGxlPVwiXCJcclxuICAgICAgICBhY3RpdmVQYWdlPXt0aGlzLnN0YXRlLnZpZXd9XHJcbiAgICAgICAgcm91dGVzPXt7ZmVlZGJhY2s6IHRoaXMucHJvcHMuZmVlZGJhY2tVcmx9fVxyXG4gICAgICAvPjxwPjxTcGlubmVyLz5WLmcuIHbDpG50YSBtZWRhbiBrdXJzZW4gbGFkZGFzLi4uPC9wPlxyXG4gICAgICA8L2Rpdj4gOlxyXG4gICAgICA8ZGl2IHN0eWxlPXt7b3V0bGluZTogMH19PlxyXG4gICAgICA8Q291cnNlQmFubmVyXHJcbiAgICAgICAgdGl0bGU9e2NvdXJzZS5uYW1lICsgXCIgLSBcIiArIGNvdXJzZS5wb2ludHMgKyBcInBcIn1cclxuICAgICAgICBhY3RpdmVQYWdlPXt0aGlzLnN0YXRlLnZpZXd9XHJcbiAgICAgICAgcm91dGVzPXt7XHJcbiAgICAgICAgICBzdHVkZW50UGFnZTogcHJlc2VydmVJbXBlcnNvbmF0aW9uUXVlcnkodGhpcy5wcm9wcy52aWV3Q291cnNlVXJsLCB7Y291cnNlSWQ6IHRoaXMucHJvcHMuaWR9KSxcclxuICAgICAgICAgIGZlZWRiYWNrOiB0aGlzLnByb3BzLmZlZWRiYWNrVXJsXHJcbiAgICAgICAgfX1cclxuICAgICAgICBob3N0PXt0aGlzfVxyXG4gICAgICAgIGNvdXJzZT17Y291cnNlfVxyXG4gICAgICAgIG9yaWdDb3Vyc2U9e3RoaXMuc3RhdGUub3JpZ0NvdXJzZX1cclxuICAgICAgICBiYWNrZ3JvdW5kSW1hZ2U9e2NvdXJzZS5pbWFnZXMuZmlsdGVyKGltZyA9PiBpbWcuaWQgPT09IGNvdXJzZS5pbWFnZUlkKS5tYXAoaW1nPT5pbWcudXJsKVswXX1cclxuICAgICAgICBpc1RlbXBsYXRlPXtjb3Vyc2UuaXNUZW1wbGF0ZX1cclxuICAgICAgIC8+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3Ytcm93IHN2LWxheW91dFwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3YtbGF5b3V0IHN2LXNraXAtc3BhY2VyIHN2LWNvbHVtbi0xMlwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdi1zcGFjZXItMjBweHZ0IHN2LXZlcnRpY2FsIHN2LWxheW91dCBzdi1za2lwLXNwYWNlclwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhZ2Vjb250ZW50IHN2LWxheW91dCBzdi1zcGFjZXItMjBweHZ0IHN2LXNraXAtc3BhY2VyXCIgcmVmPXtcclxuICAgICAgICAgICAgICBkaXYgPT4gdGhpcy5jb250ZW50RGl2ID0gZGl2fT5cclxuICAgICAgICAgICAgICA8SW5uZXJFZGl0Q291cnNlXHJcbiAgICAgICAgICAgICAgICBjb3Vyc2U9e3RoaXMuc3RhdGUuY291cnNlfVxyXG4gICAgICAgICAgICAgICAgb3JpZ0NvdXJzZT17dGhpcy5zdGF0ZS5vcmlnQ291cnNlfVxyXG4gICAgICAgICAgICAgICAgaG9zdD17dGhpc30gLz5cclxuICAgICAgICAgICAgICA8YnIvPlxyXG4gICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmRpYWxvZ0NvbnRhaW5lcnMubWFwKCh7Q29tcG9uZW50LCBwcm9wc30sIGkpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiA8ZGl2IGtleT17aX0+XHJcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZGFya2VuXCI+XHJcbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1vZGFsLXBhZ2Utd3JhcFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibW9kYWwtcGFnZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPENvbXBvbmVudCByZWY9e2RpYWxvZz0+dGhpcy5yZWZEaWFsb2coZGlhbG9nLCBpKX0gey4uLnByb3BzfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPFJlbW92ZUl0ZW0gb25DbGljaz17KCk9PnRoaXMuY2xvc2VEaWFsb2coKX0gLz5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICB9KX1cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IHsgRWRpdENvdXJzZSB9IGZyb20gJy4vZWRpdC1jb3Vyc2UnO1xyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IENvdXJzZSwgQWJpbGl0eSwgU3ViamVjdCB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgRWRpdGFibGVSZXNvdXJjZUxpc3QgfSBmcm9tICcuLi9zdWItY29tcG9uZW50cy9lZGl0YWJsZS1yZXNvdXJjZS1saXN0JztcclxuaW1wb3J0IHsgZHRGb3JtYXQgfSBmcm9tICcuLi91dGlscyc7XHJcbmltcG9ydCB7IENvdXJzZU1vZHVsZUxpc3QgfSBmcm9tICcuL2NvdXJzZS1tb2R1bGUtbGlzdCc7XHJcbmltcG9ydCB7IFNjaG9vbENvdXJzZXMgfSBmcm9tICcuLi9zdWItY29tcG9uZW50cy9zY2hvb2wtY291cnNlcyc7XHJcbmltcG9ydCB7IElDb3Vyc2VFZGl0b3JIb3N0IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9jb3Vyc2UtZWRpdG9yLWhvc3QnO1xyXG5pbXBvcnQgeyBnZXRVbmNvdmVyZWRLbm93bGVkZ2VSZXF1aXJlbWVudHMsIHNhbml0eUNoZWNrLCBnZXRJZHNOb3RDb3ZlcmVkQnlUYXNrcywgZ2V0U29mdEFjY2Vzc0xpc3QgfSBmcm9tICcuL2J1c2luZXNzLWxvZ2ljJztcclxuaW1wb3J0IHsgc2V0Q291cnNlSW1hZ2UgfSBmcm9tIFwiLi9jb3Vyc2UtYmFubmVyXCI7XHJcbmltcG9ydCB7IFNwaW5uZXIgfSBmcm9tICcuLi9zdWItY29tcG9uZW50cy9zcGlubmVyJztcclxuaW1wb3J0IHsgRWRpdGFibGVUZWFjaGVyTGlzdCB9IGZyb20gJy4uL3N1Yi1jb21wb25lbnRzL2VkaXRhYmxlLXRlYWNoZXItbGlzdCc7XHJcbmltcG9ydCB7IHNob3dFcnJvciwgTCB9IGZyb20gXCIuLi8uLi8uLi91dGlscy91dGlsc1wiO1xyXG5pbXBvcnQgeyBXZWlnaHRlZEl0ZW1zVGFibGUgfSBmcm9tICcuLi9zdWItY29tcG9uZW50cy93ZWlnaHRlZC1pdGVtcy10YWJsZSc7XHJcbmltcG9ydCB7IFd5c2l3eWcgfSBmcm9tICcuLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvd3lzaXd5Zy9pbmRleCc7XHJcbmltcG9ydCBhY3Rpb25zX3N3ZWRpc2ggZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL3d5c2l3eWcvYWN0aW9ucy1zdic7XHJcbmltcG9ydCB7IEVkaXRhYmxlV29ya0Zsb3dMaW5rIH0gZnJvbSAnLi4vc3ViLWNvbXBvbmVudHMvZWRpdGFibGUtd29ya2Zsb3ctbGluayc7XHJcbmltcG9ydCB7IFJlbmFtZWFibGVUZXh0IH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL3JlbmFtZWFibGUtdGV4dCc7XHJcbmltcG9ydCB7IGdldEN1cnJlbnRVc2VyIH0gZnJvbSAnLi4vLi4vLi4vZ2xvYmFscy9jdXJyZW50LXVzZXInO1xyXG5pbXBvcnQgeyBPYnNlcnZlIH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL29ic2VydmUnO1xyXG5pbXBvcnQgeyBTZWxlY3RTdHVkeUdyb3VwcyB9IGZyb20gJy4uL3N1Yi1jb21wb25lbnRzL3NlbGVjdC1zdHVkeS1ncm91cHMnO1xyXG5pbXBvcnQgeyBPcGVuQ2xvc2VCb3ggfSBmcm9tICcuLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvb3Blbi1jbG9zZS1ib3gnO1xyXG5pbXBvcnQgeyBmZWF0dXJlcyB9IGZyb20gJy4uLy4uLy4uL2ZlYXR1cmVzJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgY291cnNlOiBDb3Vyc2U7XHJcbiAgb3JpZ0NvdXJzZTogQ291cnNlO1xyXG4gIGhvc3Q6IElDb3Vyc2VFZGl0b3JIb3N0O1xyXG59O1xyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICBjaGFuZ2VJbWFnZVVybDogYm9vbGVhbjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIElubmVyRWRpdENvdXJzZSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcyxTdGF0ZT4ge1xyXG4gIHByb3BzOiBQcm9wcztcclxuICBzdGF0ZTogU3RhdGU7XHJcbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICBjaGFuZ2VJbWFnZVVybDogZmFsc2VcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRJbWFnZVVybChpbWFnZVVybDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB7IGNvdXJzZSB9ID0gdGhpcy5wcm9wcztcclxuICAgIGlmICghY291cnNlLmltYWdlSWQpIHtcclxuXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7IGNvdXJzZSwgb3JpZ0NvdXJzZSwgaG9zdCB9ID0gdGhpcy5wcm9wcztcclxuICAgIGNvbnN0IHVuY292ZXJlZEtub3dsZWRnZVJlcXVpcmVtZW50cyA9IGdldFVuY292ZXJlZEtub3dsZWRnZVJlcXVpcmVtZW50cyhjb3Vyc2UpO1xyXG4gICAgY29uc3QgaWRzTm90Q292ZXJlZEJ5QW55VGFzayA9IGdldElkc05vdENvdmVyZWRCeVRhc2tzKGNvdXJzZSk7XHJcbiAgICBjb25zdCBzYW5pdHlDaGVja1dhcm5pbmdzID0gc2FuaXR5Q2hlY2soY291cnNlKTtcclxuICAgIGNvbnN0IGNvdXJzZUltYWdlID0gY291cnNlLmltYWdlcy5maW5kKGltZyA9PiBpbWcuaWQgPT09IGNvdXJzZS5pbWFnZUlkKTtcclxuICAgIGNvbnN0IGNvdXJzZUltYWdlSXNEYXRhVXJsID0gY291cnNlSW1hZ2UgJiYgY291cnNlSW1hZ2UudXJsLnN0YXJ0c1dpdGgoJ2RhdGE6Jyk7XHJcbiAgICBjb25zdCBjb3Vyc2VJc1VwbG9hZGVkID0gY291cnNlSW1hZ2UgJiYgY291cnNlSW1hZ2UudXJsLmluZGV4T2YoJ3N0b3JhZ2UuZ29vZ2xlYXBpcy5jb20nKSA+IDA7XHJcbiAgICBjb25zdCBzb2Z0QWNjZXNzTGlzdCA9IGdldFNvZnRBY2Nlc3NMaXN0KGNvdXJzZSk7XHJcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IGdldEN1cnJlbnRVc2VyKCk7XHJcbiAgICBjb25zdCBjYW5EZWxldGUgPSAhZmVhdHVyZXMudGVhY2hlclJpZ2h0cyB8fCBzb2Z0QWNjZXNzTGlzdC5zb21lKHVzZXIgPT4gdXNlci5lbWFpbCA9PT0gY3VycmVudFVzZXIubWFpbCAmJiB1c2VyLmFjY2VzcyA9PT0gJ2Z1bGwnKTtcclxuICAgIGNvbnN0IGRpc3BsYXlTdHVkeUdyb3VwcyA9IGZlYXR1cmVzLnN0dWR5R3JvdXBzO1xyXG5cclxuICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cInN2LXJvdyBzdi1sYXlvdXQgc3Ytc2tpcC1zcGFjZXJcIj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9e1wic3YtbGF5b3V0IHN2LXNraXAtc3BhY2VyIHN2LWNvbHVtbi03XCJ9PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3YtaHRtbC1wb3J0bGV0IHN2LXBvcnRsZXQgc3Ytc2tpcC1zcGFjZXJcIj5cclxuICAgICAgICAgIHtjb3Vyc2UuaXNUZW1wbGF0ZSAmJiA8aDE+S3Vyc21hbGw8L2gxPiB9XHJcbiAgICAgICAgICA8aDI+S3Vyc8O2dmVyZ3JpcGFuZGU8L2gyPlxyXG5cclxuICAgICAgICAgIDxPcGVuQ2xvc2VCb3ggdGl0bGU9ezxwPkt1cnPDtnZlcmdyaXBhbmRlPC9wPn0gaGVhZGVyT3Blbj17dHJ1ZX0gaW5hY3RpdmF0ZWQ9eyFmZWF0dXJlcy5jYkNvbGxhcHNlQm94ZXN9PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJrZWRfYm94ZWRcIj5cclxuICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICA8aDM+S3Vyc2VucyBiaWxkPC9oMz5cclxuICAgICAgICAgICAgICB7Y291cnNlSW1hZ2VJc0RhdGFVcmwgP1xyXG4gICAgICAgICAgICAgICAgPHA+S3Vyc2VucyBiaWxkIGxpZ2dlciBpIGRhdGFiYXNlbi4gRsO2ciBhdHQgw6RuZHJhIGJpbGQgbcOlc3RlIGR1IGRyYSBvY2ggc2zDpHBwYSBlbiBueSBiaWxkIG92YW5ww6UgZGVuIGdhbWxhIGjDtmdzdCB1cHAgcMOlIGRlbm5hIHNpZGEuXHJcbiAgICAgICAgICAgICAgICAgIEJpbGRlbiBrYW4gYW50aW5nZW4gdmFyYSBmcsOlbiBlbiBhbm5hbiB3ZWJic2lkYS4gTG9rYWxhIGJpbGRmaWxlciBnw6VyIG9ja3PDpSBicmEgYXR0IGRyYSBvY2ggc2zDpHBwYS48L3A+XHJcbiAgICAgICAgICAgICAgICAgOiBjb3Vyc2VJc1VwbG9hZGVkID8gPHA+XHJcbiAgICAgICAgICAgICAgICAgICBLdXJzZW5zIGJpbGQgbGlnZ2VyIGkgS3Vuc2thcHNza29sYW5zIEdvb2dsZSBtb2xuLiBGw7ZyIGF0dCDDpG5kcmEgYmlsZCBtw6VzdGUgZHUgZHJhIG9jaCBzbMOkcHBhIGVuIG55IGJpbGQgb3ZhbnDDpSBkZW4gZ2FtbGEgaMO2Z3N0IHVwcCBww6UgZGVubmEgc2lkYS5cclxuICAgICAgICAgICAgICAgICAgQmlsZGVuIGthbiBhbnRpbmdlbiB2YXJhIGZyw6VuIGVuIGFubmFuIHdlYmJzaWRhLiBMb2thbGEgYmlsZGZpbGVyIGfDpXIgb2Nrc8OlIGJyYSBhdHQgZHJhIG9jaCBzbMOkcHBhLlxyXG4gICAgICAgICAgICAgICAgIDwvcD4gOiBjb3Vyc2VJbWFnZSA/IDxkaXY+PHRleHRhcmVhXHJcbiAgICAgICAgICAgICAgICAgIHZhbHVlPXtjb3Vyc2VJbWFnZS51cmx9XHJcbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7d2lkdGg6ICcxMDAlJywgaGVpZ2h0OiAnMzBweCd9fVxyXG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17ZXY9PnNldENvdXJzZUltYWdlKGNvdXJzZSwgb3JpZ0NvdXJzZSwgaG9zdCwgZXYudGFyZ2V0LnZhbHVlKX0vPlxyXG4gICAgICAgICAgICAgICAgICA8cD5CaWxkZW4gc29tIHZpc2FzIGjDtmdzdCB1cHAgaMOkbXRhcyBmcsOlbiBhbmdpdmVuIFVSTC5cclxuICAgICAgICAgICAgICAgICAgICBGw7ZyIGF0dCDDpG5kcmEgYmlsZCBrYW4gZHUgcmVkaWdlcmEgVVJMIG92YW4uIEV0dCBhbm5hdCBzw6R0dCBhdHQgw6RuZHJhIGJpbGQgw6RyIGF0dCBkcmEgb2NoIHNsw6RwcGEgZW4gbnkgYmlsZCDDtnZlciBkZW4gZ2FtbGEgaMO2Z3N0IHVwcCBww6Ugc2lkYW4uPC9wPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+IDpcclxuICAgICAgICAgICAgICAgICAgPHA+S3Vyc2VuIHNha25hciBlZ2VuIGJpbGQuXHJcbiAgICAgICAgICAgICAgICAgICAgTMOkZ2cgdGlsbCBlbiBiaWxkIGdlbm9tIGF0dCBkcmEgb2NoIHNsw6RwcGEgZW4gYmlsZCBww6Uga3Vycy1iYW5uZXJuIGjDtmdzdCB1cHAgcMOlIGRlbiBow6RyIHNpZGFuLjwvcD59XHJcbiAgICAgICAgICAgICAgPGJyLz5cclxuICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICB7IWNvdXJzZS5pc1RlbXBsYXRlICYmIDxkaXY+XHJcbiAgICAgICAgICAgICAgPGgzPkJlc2tyaXZuaW5nPC9oMz5cclxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJzdWJIZWFkZXJcIj4oQmVza3Jpdm5pbmcgYXYga3Vyc2VuLiBGw7ZyIGF0dCBza2lsamEgbWVsbGFuIG9saWthIHZhcmlhbnRlciBhdiBzYW1tYSBneW1uYXNpZWt1cnMpPC9wPlxyXG4gICAgICAgICAgICAgIDx0ZXh0YXJlYSBjbGFzc05hbWU9XCJpbnB1dFRleHRCb3ggaW5wdXRUZXh0U21hbGxcIlxyXG4gICAgICAgICAgICAgICAgdmFsdWU9e2NvdXJzZS5kZXNjcmlwdGlvbn1cclxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtldiA9PiBob3N0LnVwZGF0ZSh7IGRlc2NyaXB0aW9uOiB7ICRzZXQ6IGV2LnRhcmdldC52YWx1ZSB9IH0pfSAvPlxyXG4gICAgICAgICAgICAgIDxiciAvPlxyXG4gICAgICAgICAgICA8L2Rpdj59ICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgIDxoMz5VcHB0YWt0c3RleHQ8L2gzPlxyXG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInN1YkhlYWRlclwiPih0ZXh0ZW4gc2thIHZpc2FzIHDDpSBrdXJzZW5zIHVwcHRha3Rzc2VrdGlvbik8L3A+XHJcbiAgICAgICAgICAgICAgPFd5c2l3eWdcclxuICAgICAgICAgICAgICAgIGh0bWw9e2NvdXJzZS5ydW5VcFRleHR9XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0QWN0aW9ucz17YWN0aW9uc19zd2VkaXNofVxyXG4gICAgICAgICAgICAgICAgYWN0aW9ucz17W1xyXG4gICAgICAgICAgICAgICAgICBcImJvbGRcIixcclxuICAgICAgICAgICAgICAgICAgXCJpdGFsaWNcIixcclxuICAgICAgICAgICAgICAgICAgXCJ1bmRlcmxpbmVcIixcclxuICAgICAgICAgICAgICAgICAgXCJzdHJpa2V0aHJvdWdoXCIsXHJcbiAgICAgICAgICAgICAgICAgIFwiaGVhZGluZzJcIixcclxuICAgICAgICAgICAgICAgICAgXCJoZWFkaW5nM1wiLFxyXG4gICAgICAgICAgICAgICAgICBcIm9saXN0XCIsXHJcbiAgICAgICAgICAgICAgICAgIFwidWxpc3RcIixcclxuICAgICAgICAgICAgICAgICAgXCJvdXRkZW50XCIsXHJcbiAgICAgICAgICAgICAgICAgIFwiaW5kZW50XCIsXHJcbiAgICAgICAgICAgICAgICAgIFwibGluZVwiLFxyXG4gICAgICAgICAgICAgICAgICBcImxpbmtcIixcclxuICAgICAgICAgICAgICAgICAgXCJpbWFnZVwiXX1cclxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtuZXdIdG1sID0+IGhvc3QudXBkYXRlKHsgcnVuVXBUZXh0OiB7JHNldDogbmV3SHRtbH19KX0gLz5cclxuICAgICAgICAgICAgICA8YnIgLz5cclxuICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICA8aDM+S3Vyc3Jlc3Vyc2VyPC9oMz5cclxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwic3ViSGVhZGVyXCI+KFJlc3Vyc2VyIGbDtnIgdXBwdGFrdCBvY2gga3Vyc2VuIHNvbSBoZWxoZXQpPC9wPlxyXG4gICAgICAgICAgICA8RWRpdGFibGVSZXNvdXJjZUxpc3RcclxuICAgICAgICAgICAgICByZXNvdXJjZXM9e2NvdXJzZS5yZXNvdXJjZXN9XHJcbiAgICAgICAgICAgICAgb25VcGRhdGU9e3Jlc291cmNlc1VwZGF0ZXMgPT4gaG9zdC51cGRhdGUoeyByZXNvdXJjZXM6IHJlc291cmNlc1VwZGF0ZXMgfSl9XHJcbiAgICAgICAgICAgICAgaG9zdD17aG9zdH0gLz5cclxuICAgICAgICAgICAgPGJyIC8+XHJcbiAgICAgICAgICAgIDxoMz5BcmJldHNnw6VuZzwvaDM+XHJcbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInN1YkhlYWRlclwiPihFdmVudHVlbGwgbMOkbmsgdGlsbCBhcmJldHNnw6VuZyBmw7ZyIGt1cnNlbik8L3A+XHJcbiAgICAgICAgICAgIDxFZGl0YWJsZVdvcmtGbG93TGlua1xyXG4gICAgICAgICAgICAgIHVybD17Y291cnNlLndvcmtGbG93TGlua31cclxuICAgICAgICAgICAgICBvblVwZGF0ZT17dXBkYXRlcyA9PiBob3N0LnVwZGF0ZSh7IHdvcmtGbG93TGluazogdXBkYXRlcyB9KX1cclxuICAgICAgICAgICAgICBob3N0PXtob3N0fSAvPlxyXG4gICAgICAgICAgICA8YnIgLz5cclxuICAgICAgICAgICAgeyFjb3Vyc2UuaXNUZW1wbGF0ZSAmJiA8ZGl2PlxyXG4gICAgICAgICAgICAgIDxoMz5Hb29nbGUgQ2xhc3Nyb29tPC9oMz5cclxuICAgICAgICAgICAgICB7ZGlzcGxheVN0dWR5R3JvdXBzID8gPGRpdiBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtcImNoZWNrQm94XCIgKyAoY291cnNlLmdvb2dsZUNyZWF0ZUNsYXNzcm9vbXMgPyBcIiBjaGVja2VkXCIgOiBcIlwiKX1cclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7IGhvc3QudXBkYXRlKHsgZ29vZ2xlQ3JlYXRlQ2xhc3Nyb29tczogeyAkc2V0OiAhY291cnNlLmdvb2dsZUNyZWF0ZUNsYXNzcm9vbXMgfSB9KSB9fSAvPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgICAgICAgICBTa2FwYSBrbGFzc3J1bSBmw7ZyIGt1cnNlblxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgPC9kaXY+IFxyXG4gICAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWwgc3BhY2VkXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkdvb2dsZSBjbGFzc3Jvb20gVVJMXCJcclxuICAgICAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZT17MzB9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2NvdXJzZS5nb29nbGVDbGFzc1Jvb21VUkx9XHJcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e2V2ID0+IGhvc3QudXBkYXRlKHsgZ29vZ2xlQ2xhc3NSb29tVVJMOiB7ICRzZXQ6IGV2LnRhcmdldC52YWx1ZSB9IH0pfSAvPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cImtvZFwiXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxyXG4gICAgICAgICAgICAgICAgICAgIHNpemU9ezh9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2NvdXJzZS5nb29nbGVDbGFzc1Jvb21Db2RlfVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtldiA9PiBob3N0LnVwZGF0ZSh7IGdvb2dsZUNsYXNzUm9vbUNvZGU6IHsgJHNldDogZXYudGFyZ2V0LnZhbHVlIH0gfSl9IC8+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIDwvZGl2Pn1cclxuXHJcbiAgICAgICAgICAgIHtjb3Vyc2UuaXNUZW1wbGF0ZSA/IG51bGwgOiA8PlxyXG4gICAgICAgICAgICAgIDxFZGl0YWJsZVRlYWNoZXJMaXN0IFxyXG4gICAgICAgICAgICAgICAgc2Nob29sPXtjb3Vyc2Uuc2Nob29sfVxyXG4gICAgICAgICAgICAgICAgdGVhY2hlcnM9e2NvdXJzZS5yZXNwb25zaWJsZVRlYWNoZXJzfVxyXG4gICAgICAgICAgICAgICAgb25VcGRhdGU9e3RlYWNoZXJzVXBkYXRlID0+IHtcclxuICAgICAgICAgICAgICAgICAgaG9zdC51cGRhdGUoe3Jlc3BvbnNpYmxlVGVhY2hlcnM6IHskc2V0OiB0ZWFjaGVyc1VwZGF0ZX19KTtcclxuICAgICAgICAgICAgICAgIH19IC8+XHJcbiAgICAgICAgICAgICAgPGJyLz5cclxuICAgICAgICAgICAgICB7ZGlzcGxheVN0dWR5R3JvdXBzICYmIDxkaXYgY2xhc3NOYW1lPVwic2VsZWN0LXN0dWR5Z3JvdXBzXCI+XHJcbiAgICAgICAgICAgICAgICA8aDM+e0xgU3R1ZGllZ3J1cHBlcmB9PC9oMz5cclxuICAgICAgICAgICAgICAgIDxPYnNlcnZlXHJcbiAgICAgICAgICAgICAgICAgIGZhbGxiYWNrPXs8U3Bpbm5lciAvPn1cclxuICAgICAgICAgICAgICAgICAgZXJyb3JGYWxsYmFjaz17TGBLdW5kZSBpbnRlIGxhZGRhIHN0dWRpZWdydXBwZXIgZnLDpW4gRURTYH0+XHJcblxyXG4gICAgICAgICAgICAgICAgICA8U2VsZWN0U3R1ZHlHcm91cHNcclxuICAgICAgICAgICAgICAgICAgICBzY2hvb2w9e2NvdXJzZS5zY2hvb2x9XHJcbiAgICAgICAgICAgICAgICAgICAgY291cnNlQ29kZT17Y291cnNlLmNvZGV9XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRTdHVkeUdyb3Vwcz17Y291cnNlLnN0dWR5R3JvdXBzIHx8IFtdfVxyXG4gICAgICAgICAgICAgICAgICAgIG9uVXBkYXRlPXtzdHVkeUdyb3VwcyA9PiBob3N0LnVwZGF0ZSh7IHN0dWR5R3JvdXBzOiB7ICRzZXQ6IHN0dWR5R3JvdXBzIH0gfSl9IC8+XHJcblxyXG4gICAgICAgICAgICAgICAgPC9PYnNlcnZlPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgPC8+XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgey8qXHJcbiAgICAgICAgICAgIDxiciAvPlxyXG4gICAgICAgICAgICA8aDM+SW5sw6RtbmluZ3MgRS1wb3N0PC9oMz5cclxuICAgICAgICAgICAgPHRhYmxlIHRhYkluZGV4PXsxfSBzdHlsZT17e3dpZHRoOiAnMTAwJSd9fT5cclxuICAgICAgICAgICAgICA8dGhlYWQ+PHRyPjx0aD5cclxuICAgICAgICAgICAgICAgIEUtcG9zdGFkZHJlc3NcclxuICAgICAgICAgICAgICA8L3RoPjwvdHI+PC90aGVhZD5cclxuICAgICAgICAgICAgICA8dGJvZHk+XHJcbiAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICA8UmVuYW1lYWJsZVRleHRcclxuICAgICAgICAgICAgICAgICAgICAgIGVhZ2VyPXt0cnVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgY2xpY2tBZHZlcnRpc2VUZXh0PVwiS2xpY2thIGjDpHIgZsO2ciBhdHQgYW5nZSB2ZW0gc29tIHRhciBlbW90IGlubMOkbW5pbmdzdXBwZ2lmdGVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgIHRleHQ9e2NvdXJzZS5hc3NpZ25tZW50RW1haWxzID8gY291cnNlLmFzc2lnbm1lbnRFbWFpbHNbMF0gOiBcIlwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJBbmdlIG1vdHRhZ2FyZSBhdiBpbmzDpG1uaW5nc3VwcGdpZnRlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICB0YWc9XCJpbnB1dFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dmFsdWUgPT4gaG9zdC51cGRhdGUoe2Fzc2lnbm1lbnRFbWFpbHM6IHskc2V0OiBbdmFsdWVdfX0pfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgIDwvdGJvZHk+XHJcbiAgICAgICAgICAgIDwvdGFibGU+Ki99XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L09wZW5DbG9zZUJveD5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3YtaHRtbC1wb3J0bGV0IHN2LXBvcnRsZXRcIj5cclxuICAgICAgICAgICAgPGRpdiBpZD1cIkt1cnNlbnNtb2R1bGVyXCI+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8aDI+S3Vyc2VucyBtb2R1bGVyPC9oMj5cclxuICAgICAgICAgICAgPGhyIC8+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxDb3Vyc2VNb2R1bGVMaXN0XHJcbiAgICAgICAgICAgIGhvc3Q9e2hvc3R9XHJcbiAgICAgICAgICAgIGNvdXJzZT17Y291cnNlfVxyXG4gICAgICAgICAgICBpZHNOb3RDb3ZlcmVkQnlBbnlUYXNrPXtpZHNOb3RDb3ZlcmVkQnlBbnlUYXNrfSAvPlxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICA8YnIvPlxyXG4gICAgICAgICAgICA8V2VpZ2h0ZWRJdGVtc1RhYmxlIGNvdXJzZT17Y291cnNlfS8+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInN2LWh0bWwtcG9ydGxldCBzdi1wb3J0bGV0XCI+XHJcbiAgICAgICAgICAgIDxoMj5LdXJzZW5zIHN0YXR1czwvaDI+XHJcbiAgICAgICAgICAgIDxociAvPlxyXG4gICAgICAgICAgICB7Y291cnNlLmNyZWF0ZWRCeSAmJiBjb3Vyc2UuY3JlYXRlZERhdGUgJiYgPHA+XHJcbiAgICAgICAgICAgICAgS3Vyc2VuIHNrYXBhZGVzIHtkdEZvcm1hdChjb3Vyc2UuY3JlYXRlZERhdGUpfSBhdiA8c3Ryb25nPntjb3Vyc2UuY3JlYXRlZEJ5Lm5hbWV9PC9zdHJvbmc+LlxyXG4gICAgICAgICAgICA8L3A+fVxyXG4gICAgICAgICAgICB7Y291cnNlLm1vZGlmaWVkQnkgJiYgY291cnNlLm1vZGlmaWVkRGF0ZSAmJiA8cD5cclxuICAgICAgICAgICAgICBLdXJzZW4gcmVkaWdlcmFkZXMgc2VuYXN0IHtkdEZvcm1hdChjb3Vyc2UubW9kaWZpZWREYXRlKX0gYXYgPHN0cm9uZz57Y291cnNlLm1vZGlmaWVkQnkubmFtZX08L3N0cm9uZz4uXHJcbiAgICAgICAgICAgIDwvcD59XHJcbiAgICAgICAgICAgIHtjb3Vyc2UuYWN0aXZlID8gPHA+XHJcbiAgICAgICAgICAgICAgS3Vyc2VuIMOkciA8c3Ryb25nPkFLVElWPC9zdHJvbmc+IHNlZGFuIHtkdEZvcm1hdChjb3Vyc2UuYWN0aXZhdGVkRGF0ZSl9IGF2IDxzdHJvbmc+e2NvdXJzZS5hY3RpdmF0ZWRCeS5uYW1lfTwvc3Ryb25nPi5cclxuICAgICAgICAgICAgPC9wPiA6IDxwPlxyXG4gICAgICAgICAgICAgICAgS3Vyc2VuIMOkciA8c3Ryb25nPklOQUtUSVY8L3N0cm9uZz57Y291cnNlLmluYWN0aXZhdGVkQnkgPyA8c3Bhbj5cclxuICAgICAgICAgICAgICAgICAgc2VkYW4ge2R0Rm9ybWF0KGNvdXJzZS5pbmFjdGl2YXRlZERhdGUpfSBhdiA8c3Ryb25nPntjb3Vyc2UuaW5hY3RpdmF0ZWRCeS5uYW1lfTwvc3Ryb25nPi48L3NwYW4+IDogPHNwYW4+Ljwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICA8L3A+fVxyXG4gICAgICAgICAgICB7KHVuY292ZXJlZEtub3dsZWRnZVJlcXVpcmVtZW50cy5sZW5ndGggPT09IDAgP1xyXG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm1hcmtlZEdyZWVuXCI+TW9kdWxlcm5hcyBrdW5za2Fwc2tyYXYgdMOkY2tlciBza29sdmVya2V0cyBrcmF2IGbDtnIgZGVubmEga3VyczwvcD4gOlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWFya2VkUmVkIHdhcm5pbmctYm94XCI+PGRpdiBjbGFzc05hbWU9XCJ3YXJuaW5nRmxhZ1wiPlxyXG4gICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtZXhjbGFtYXRpb24tdHJpYW5nbGVcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XHJcbiAgICAgICAgICAgICAgPC9kaXY+PHA+TW9kdWxlcm5hcyBrdW5za2Fwc2tyYXYgdMOkY2tlciBpbnRlIHNrb2x2ZXJrZXRzIGtyYXYgZsO2ciBkZW5uYSBrdXJzLjwvcD5cclxuICAgICAgICAgICAgICA8L2Rpdj4pfVxyXG4gICAgICAgICAgICB7c2FuaXR5Q2hlY2tXYXJuaW5ncy5tYXAod2FybmluZyA9PiA8ZGl2IGtleT17d2FybmluZ30gY2xhc3NOYW1lPVwibWFya2VkUmVkIHdhcm5pbmctYm94XCI+PGRpdiBjbGFzc05hbWU9XCJ3YXJuaW5nRmxhZ1wiPlxyXG4gICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtZXhjbGFtYXRpb24tdHJpYW5nbGVcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XHJcbiAgICAgICAgICAgICAgPC9kaXY+PHA+e3dhcm5pbmd9PC9wPjwvZGl2Pil9XHJcbiAgICAgICAgICAgIDxiciAvPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ0biBidG4tbGFyZ2VcIiBvbkNsaWNrPXsoKSA9PiBob3N0LmNvbmZpcm1TYXZlQW5kU3luYygpfT5cclxuICAgICAgICAgICAgICBTcGFyYVxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAge2NvdXJzZS5hY3RpdmUgP1xyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnRuIGJ0bi1pbmZvIGJ0bi1sYXJnZVwiXHJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBob3N0LmluYWN0aXZhdGVBbmRTYXZlKCl9PlxyXG4gICAgICAgICAgICAgICAgSW5ha3RpdmVyYSBvY2ggc3BhcmFcclxuICAgICAgICAgICAgICA8L2Rpdj4gOlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnRuIGJ0bi1pbmZvIGJ0bi1sYXJnZVwiXHJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBob3N0LmFjdGl2YXRlQW5kU2F2ZSgpfT5cclxuICAgICAgICAgICAgICAgIEFrdGl2ZXJhIG9jaCBzcGFyYVxyXG4gICAgICAgICAgICAgIDwvZGl2Pn1cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGJyIC8+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInN2LWh0bWwtcG9ydGxldCBzdi1wb3J0bGV0XCI+XHJcbiAgICAgICAgICB7Y2FuRGVsZXRlICYmICFjb3Vyc2UuaXNUZW1wbGF0ZSAmJiAob3JpZ0NvdXJzZSA/IDxkaXZcclxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidG4gYnRuLXdhcm5pbmcgYnRuLWxhcmdlIHB1bGwtcmlnaHRcIlxyXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpPT57XHJcbiAgICAgICAgICAgICAgICBpZiAoY29uZmlybShMYEJla3LDpGZ0YSBib3J0dGFnbmluZyBhdiBrdXJzZW4gXCIke2NvdXJzZS5uYW1lfSAtICR7Y291cnNlLmRlc2NyaXB0aW9ufVwiIGbDtnIgc2tvbGFuICR7Y291cnNlLnNjaG9vbH1cXG5cXG5LdXJzZW4ga29tbWFyIGF0dCByYWRlcmFzIGhlbHQhXFxuXFxuw4RyIGR1IHPDpGtlcj9gKSlcclxuICAgICAgICAgICAgICAgICAgaG9zdC5kZWxldGVDb3Vyc2UoKS5jYXRjaChzaG93RXJyb3IpO1xyXG4gICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgID5UYSBib3J0IGt1cnM8L2Rpdj46PGRpdlxyXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ0biBidG4td2FybmluZyBidG4tbGFyZ2UgcHVsbC1yaWdodFwiXHJcbiAgICAgICAgICAgICAgb25DbGljaz17KCk9Pmhpc3RvcnkuZ28oLTEpfVxyXG4gICAgICAgICAgICA+QXZicnl0XHJcbiAgICAgICAgICAgICAgPC9kaXY+KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB7Y291cnNlLmdvb2dsZUNyZWF0ZUNsYXNzcm9vbXMgJiYgZGlzcGxheVN0dWR5R3JvdXBzICYmXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ0biBidG4tcHJpbWFyeSBidG4tbGFyZ2UgcHVsbC1yaWdodFwiIG9uQ2xpY2s9eygpID0+IGhvc3Quc3luY1dpdGhDbGFzc3Jvb21BbmRTYXZlKCl9PlxyXG4gICAgICAgICAgICAgICAgICB7aG9zdC5zeW5jSW5Qcm9ncmVzcygpID8gPFNwaW5uZXIgLz4gOiBcclxuICAgICAgICAgICAgICAgICAgKGNvdXJzZS5pblN5bmNXaXRoQ2xhc3Nyb29tID8gPHNwYW4+PGkgY2xhc3NOYW1lPVwiZmFzIGZhLWNoZWNrXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPjwvc3Bhbj46IDxzcGFuPjxpIGNsYXNzTmFtZT1cImZhcyBmYS1jb2RlLWJyYW5jaFwiPjwvaT48L3NwYW4+KX1cclxuICAgICAgICAgICAgICAgICAgJm5ic3A7U3luYyBtZWQga2xhc3NydW1cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInN2LWxheW91dCBzdi1jb2x1bW4tNVwiPlxyXG4gICAgICAgIDxTY2hvb2xDb3Vyc2VzIC8+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgfVxyXG59IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBIYXNoUm91dGVyIGFzIFJvdXRlciwgUm91dGUsIExpbmssIFJlZGlyZWN0IH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XHJcbmltcG9ydCB7IEVycm9yU3VjY2Vzc0ZlZWRiYWNrIH0gZnJvbSAnLi4vLi4vdXRpbHMvZXJyb3Itc3VjY2Vzcy1mZWVkYmFjayc7XHJcbmltcG9ydCB7IFNjaG9vbHMgfSBmcm9tICcuL3NjaG9vbHMnO1xyXG5pbXBvcnQgeyBOZXdTY2hvb2wgfSBmcm9tICcuL3NjaG9vbHMvbmV3LXNjaG9vbCc7XHJcbmltcG9ydCBlbnYgZnJvbSAnLi4vLi4vZ2xvYmFscy9LRUQuZW52JztcclxuXHJcbi8vIFZpZXdzXHJcbmltcG9ydCB7IFN1YmplY3RzLCBTaG93U3ViamVjdCB9IGZyb20gJy4vc3ViamVjdHMnO1xyXG5pbXBvcnQgeyBFZGl0Q291cnNlIH0gZnJvbSAnLi9jb3Vyc2VzJztcclxuaW1wb3J0IHsgRWRpdFNjaG9vbCB9IGZyb20gXCIuL3NjaG9vbHMvZWRpdC1zY2hvb2xcIjtcclxuaW1wb3J0IHsgQ291cnNlQmFubmVyIH0gZnJvbSBcIi4vY291cnNlcy9jb3Vyc2UtYmFubmVyXCI7XHJcbmltcG9ydCB7IENyZWF0ZU5ld0NvdXJzZSB9IGZyb20gXCIuL2NvdXJzZXMvY3JlYXRlLW5ld1wiO1xyXG5pbXBvcnQgeyBTcGlubmVyIH0gZnJvbSBcIi4vc3ViLWNvbXBvbmVudHMvc3Bpbm5lclwiO1xyXG5cclxuLy8gS2VlcCBTZXNzaW9uIEFsaXZlXHJcbmltcG9ydCB7IGtlZXBTZXNzaW9uQWxpdmUgfSBmcm9tICcuLi8uLi91dGlscy9rZWVwLXNlc3Npb24tYWxpdmUnO1xyXG5rZWVwU2Vzc2lvbkFsaXZlKCk7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHZpZXdDb3Vyc2VVcmw6IHN0cmluZztcclxuICBmZWVkYmFja1VybDogc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgU3RhdGUge1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ291cnNlQnVpbGRlciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcyxTdGF0ZT4ge1xyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3QgaXNBdXRob3JpemVkID0gZW52LmN1cnJlbnRVc2VyLnJvbGVzLnNvbWUocm9sZSA9PiByb2xlID09PSBcIkFETUlOXCIgfHwgcm9sZSA9PT0gXCJFTVBMT1lFRVwiKTtcclxuICAgIGNvbnN0IGlzQWRtaW4gPSBlbnYuY3VycmVudFVzZXIucm9sZXMuc29tZShyb2xlID0+IHJvbGUgPT09IFwiQURNSU5cIik7XHJcbiAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJjb3Vyc2UtYnVpbGRlclwiPlxyXG4gICAgICA8Um91dGVyPlxyXG4gICAgICAgIHtpc0F1dGhvcml6ZWQgPyA8ZGl2PlxyXG4gICAgICAgICAgPFJvdXRlIGV4YWN0IHBhdGg9XCIvXCIgcmVuZGVyPXsoeyBtYXRjaCB9KSA9PiBpc0FkbWluID9cclxuICAgICAgICAgICAgPFNjaG9vbHMgdmlld0NvdXJzZVVybD17dGhpcy5wcm9wcy52aWV3Q291cnNlVXJsfSBmZWVkYmFja1VybD17dGhpcy5wcm9wcy5mZWVkYmFja1VybH0gLz4gOlxyXG4gICAgICAgICAgICA8Q3JlYXRlTmV3Q291cnNlIGZlZWRiYWNrVXJsPXt0aGlzLnByb3BzLmZlZWRiYWNrVXJsfSAvPn0gLz5cclxuICAgICAgICAgIDxSb3V0ZSBleGFjdCBwYXRoPVwiL3NjaG9vbHNcIiByZW5kZXI9eyh7IG1hdGNoIH0pID0+XHJcbiAgICAgICAgICAgIDxTY2hvb2xzXHJcbiAgICAgICAgICAgICAgdmlld0NvdXJzZVVybD17dGhpcy5wcm9wcy52aWV3Q291cnNlVXJsfVxyXG4gICAgICAgICAgICAgIGZlZWRiYWNrVXJsPXt0aGlzLnByb3BzLmZlZWRiYWNrVXJsfSAvPn0gLz5cclxuICAgICAgICAgIDxSb3V0ZSBleGFjdCBwYXRoPVwiL3NjaG9vbHMvbmV3L2d5bW5hc2l1bVwiIHJlbmRlcj17KCk9PjxOZXdTY2hvb2wgdHlwZT1cImd5bW5hc2l1bVwiIGZlZWRiYWNrVXJsPXt0aGlzLnByb3BzLmZlZWRiYWNrVXJsfSAvPn0gLz5cclxuICAgICAgICAgIDxSb3V0ZSBleGFjdCBwYXRoPVwiL3NjaG9vbHMvbmV3L3ByaW1hcnlcIiByZW5kZXI9eygpPT48TmV3U2Nob29sIHR5cGU9XCJwcmltYXJ5XCIgZmVlZGJhY2tVcmw9e3RoaXMucHJvcHMuZmVlZGJhY2tVcmx9IC8+fSAvPlxyXG4gICAgICAgICAgPFJvdXRlIGV4YWN0IHBhdGg9XCIvc2Nob29scy86aWQvZWRpdFwiIHJlbmRlcj17KHsgbWF0Y2ggfSkgPT4gPEVkaXRTY2hvb2xcclxuICAgICAgICAgICAgaWQ9e21hdGNoLnBhcmFtcy5pZH1cclxuICAgICAgICAgICAgdGl0bGU9e0xgRWRpdGVyYSBza29sYWB9XHJcbiAgICAgICAgICAgIGZlZWRiYWNrVXJsPXt0aGlzLnByb3BzLmZlZWRiYWNrVXJsfSAvPn0gLz5cclxuICAgICAgICAgIDxSb3V0ZSBleGFjdCBwYXRoPVwiL3N1YmplY3RzXCIgcmVuZGVyPXsoKT0+PFN1YmplY3RzIGZlZWRiYWNrVXJsPXt0aGlzLnByb3BzLmZlZWRiYWNrVXJsfSAvPn0gLz5cclxuICAgICAgICAgIDxSb3V0ZSBwYXRoPVwiL3N1YmplY3RzLzppZFwiIHJlbmRlcj17KHsgbWF0Y2ggfSkgPT4gPFNob3dTdWJqZWN0XHJcbiAgICAgICAgICAgIGlkPXttYXRjaC5wYXJhbXMuaWR9XHJcbiAgICAgICAgICAgIGZlZWRiYWNrVXJsPXt0aGlzLnByb3BzLmZlZWRiYWNrVXJsfSAvPn0gLz5cclxuICAgICAgICAgIDxSb3V0ZSBleGFjdCBwYXRoPVwiL2NvdXJzZXMvbmV3XCIgcmVuZGVyPXsoKT0+IDxDcmVhdGVOZXdDb3Vyc2VcclxuICAgICAgICAgIGZlZWRiYWNrVXJsPXt0aGlzLnByb3BzLmZlZWRiYWNrVXJsfSAvPn0gLz5cclxuICAgICAgICAgIDxSb3V0ZSBwYXRoPVwiL2NvdXJzZXMvY3JlYXRlLWZyb20tdGVtcGxhdGUvOnRlbXBsYXRlSWRcIiByZW5kZXI9eyh7bWF0Y2h9KSA9PiA8RWRpdENvdXJzZVxyXG4gICAgICAgICAgICB0ZW1wbGF0ZUlkPXttYXRjaC5wYXJhbXMudGVtcGxhdGVJZH1cclxuICAgICAgICAgICAgdmlldz1cImNvdXJzZUJ1aWxkZXJcIlxyXG4gICAgICAgICAgICB2aWV3Q291cnNlVXJsPXt0aGlzLnByb3BzLnZpZXdDb3Vyc2VVcmx9XHJcbiAgICAgICAgICAgIGZlZWRiYWNrVXJsPXt0aGlzLnByb3BzLmZlZWRiYWNrVXJsfVxyXG4gICAgICAgICAgLz59Lz5cclxuICAgICAgICAgIDxSb3V0ZSBwYXRoPVwiL2NvdXJzZXMvOmlkL2VkaXRcIiByZW5kZXI9eyh7bWF0Y2h9KSA9PiA8RWRpdENvdXJzZVxyXG4gICAgICAgICAgICBpZD17bWF0Y2gucGFyYW1zLmlkfVxyXG4gICAgICAgICAgICB2aWV3PVwiY291cnNlQnVpbGRlclwiXHJcbiAgICAgICAgICAgIHZpZXdDb3Vyc2VVcmw9e3RoaXMucHJvcHMudmlld0NvdXJzZVVybH1cclxuICAgICAgICAgICAgZmVlZGJhY2tVcmw9e3RoaXMucHJvcHMuZmVlZGJhY2tVcmx9XHJcbiAgICAgICAgICAvPn0gLz5cclxuICAgICAgICA8L2Rpdj4gOiA8ZGl2PlxyXG4gICAgICAgICAgICA8Um91dGUgcGF0aD1cIi9cIiByZW5kZXI9eygpID0+IDxkaXY+XHJcbiAgICAgICAgICAgICAgPENvdXJzZUJhbm5lciB0aXRsZT1cIkt1cnNieWdnYXJlblwiIGFjdGl2ZVBhZ2U9XCJjb3Vyc2VCdWlsZGVyXCIgcm91dGVzPXt7ZmVlZGJhY2s6IHRoaXMucHJvcHMuZmVlZGJhY2tVcmx9fSAvPlxyXG4gICAgICAgICAgICAgIDxoMj5CZWjDtnJpZ2hldCBzYWtuYXM8L2gyPlxyXG4gICAgICAgICAgICAgIDxwPkRldHRhIHZlcmt0eWcgw6RyIGVuZGFzdCB0aWxsIGbDtnIgYW5zdMOkbGxkYSBww6UgS3Vuc2thcHNza29sYW4uPC9wPlxyXG4gICAgICAgICAgICAgIDxoMz5BbnbDpG5kYXJhdHRyaWJ1dDwvaDM+XHJcbiAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cImtlZF9ib3hlZFwiIHN0eWxlPXt7Ym9yZGVyOiBcIjFweCBzb2xpZCAjZWVlXCJ9fT5cclxuICAgICAgICAgICAgICAgIDx0aGVhZD5cclxuICAgICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0aD5BdHRyaWJ1dDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRoPlbDpHJkZTwvdGg+XHJcbiAgICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICA8L3RoZWFkPlxyXG4gICAgICAgICAgICAgICAgPHRib2R5PlxyXG4gICAgICAgICAgICAgICAgICB7T2JqZWN0LmtleXMoZW52LmN1cnJlbnRVc2VyKS5tYXAoYXR0ciA9PiA8dHIga2V5PXthdHRyfT5cclxuICAgICAgICAgICAgICAgICAgICA8dGQ+e2F0dHJ9PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8dGQ+e2Vudi5jdXJyZW50VXNlclthdHRyXX08L3RkPlxyXG4gICAgICAgICAgICAgICAgICA8L3RyPil9XHJcbiAgICAgICAgICAgICAgICA8L3Rib2R5PjwvdGFibGU+XHJcbiAgICAgICAgICAgIDwvZGl2Pn0gLz5cclxuICAgICAgICAgIDwvZGl2Pn1cclxuICAgICAgPC9Sb3V0ZXI+XHJcbiAgICAgIDxFcnJvclN1Y2Nlc3NGZWVkYmFjayAvPlxyXG4gICAgPC9kaXY+XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IEtub3dsZWRnZVJlcXVpcmVtZW50IH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBmbGF0dGVuIH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5cclxuLy9nZXQgc2VudGVuY2VzIGJ5IHJlcXVpcmVtZW50XHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRSZXF1aXJtZW50U2VudGVuY2VzKHJlcXVpcmVtZW50OiBzdHJpbmcpOiBzdHJpbmdbXSB7XHJcbiAgcmV0dXJuIHJlcXVpcmVtZW50LnNwbGl0KFwiLlwiKS5maWx0ZXIoZSA9PiB7IHJldHVybiBlIH0pO1xyXG59XHJcblxyXG4vL3JldHJpZXZlIHNlbnRlbmNlc1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2F2ZWRTZW50ZW5jZXMocGFydGlhbFJlcXVpcm1lbnRzOiBzdHJpbmcgW10pOiBzdHJpbmdbXSB7XHJcbiAgcmV0dXJuIHBhcnRpYWxSZXF1aXJtZW50cy5tYXAoZnVuY3Rpb24gKG9iaikge1xyXG4gICAgcmV0dXJuIG9iai50cmltKCk7XHJcbiAgfSkgfHwgW107XHJcbn1cclxuXHJcbi8vY2hlY2sgYWxsIHJlcXVpcmVtZW50cyBhcmUgbWFya2VkXHJcbmV4cG9ydCBmdW5jdGlvbiBhbGxSZXF1aXJlbWVudFNlbnRlY2VzTWFya2VkKHJlcXVpcmVtZW50TmFtZTogc3RyaW5nLCBwYXJ0aWFsUmVxdWlyZW1lbnRzOiBzdHJpbmdbXSk6IGJvb2xlYW4ge1xyXG4gIHZhciB0ZXh0U2VudGVuY2VzID0gZ2V0UmVxdWlybWVudFNlbnRlbmNlcyhyZXF1aXJlbWVudE5hbWUpO1xyXG4gIHJldHVybiBwYXJ0aWFsUmVxdWlyZW1lbnRzICYmIHBhcnRpYWxSZXF1aXJlbWVudHMubGVuZ3RoID09PSB0ZXh0U2VudGVuY2VzLmxlbmd0aDs7XHJcbn1cclxuXHJcbi8vZ2V0IHRoZSBwYXJ0aWFsIHNhdmVkIHNlbnRlbmNlcyBmb3IgdGhlIGRlZmF1bHQgdmlld1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGFydGlhbENvbnRlbnREZWZhdWx0VmlldyhyZXF1aXJlbWVudDogS25vd2xlZGdlUmVxdWlyZW1lbnQsIHBhcnRpYWxSZXF1aXJtZW50czpzdHJpbmcgW10sIGFscmVhZHlDb3ZlcmVkUGFydGlhbFJlcXVpcm1lbnRzOiB7IFtpZDogc3RyaW5nXTogc3RyaW5nIFtdfVtdLCBza2lwTm90TWFya2VkOiBib29sZWFuKTogc3RyaW5nIHtcclxuICB2YXIgcmVzdWx0ZWRIdG1sID0gcmVxdWlyZW1lbnQubmFtZTtcclxuICB2YXIgdGV4dFNlbnRlbmNlcyA9IGdldFJlcXVpcm1lbnRTZW50ZW5jZXMocmVxdWlyZW1lbnQubmFtZSk7XHJcbiAgdmFyIHJvd1JlcXVpcm1lbnRzID0gcGFydGlhbFJlcXVpcm1lbnRzICYmIGdldFNhdmVkU2VudGVuY2VzKHBhcnRpYWxSZXF1aXJtZW50cyk7XHJcbiAgdmFyIGFsbFJlcUNvdmVyZWRTZW50ZW5jZSA9IGFscmVhZHlDb3ZlcmVkUGFydGlhbFJlcXVpcm1lbnRzICYmIGdldENvdmVyZWRTZW50ZWNlcyhhbHJlYWR5Q292ZXJlZFBhcnRpYWxSZXF1aXJtZW50cywgcmVxdWlyZW1lbnQuaWQpO1xyXG4gIHZhciBhbGxSZXFTZW50ZW5jZXNNYXJrZWQgPSBhbGxSZXF1aXJlbWVudFNlbnRlY2VzTWFya2VkKHJlcXVpcmVtZW50Lm5hbWUsIHJvd1JlcXVpcm1lbnRzKTtcclxuXHJcbiAgdGV4dFNlbnRlbmNlcy5mb3JFYWNoKHNlbnRlbmNlID0+IHtcclxuICAgIC8vdHJpbW0gY3VycmVudCBzZW50ZW5jZVxyXG4gICAgdmFyIHRyaW1tZWRTZW50ZW5jZSA9IHNlbnRlbmNlLnRyaW0oKTtcclxuICAgIHZhciBmdWxsU2VudGVuY2UgPSBzZW50ZW5jZSArIFwiLlwiO1xyXG4gICAgaWYgKHJvd1JlcXVpcm1lbnRzICYmIHJvd1JlcXVpcm1lbnRzLmluY2x1ZGVzKHRyaW1tZWRTZW50ZW5jZSkgJiYgIWFsbFJlcVNlbnRlbmNlc01hcmtlZCkge1xyXG4gICAgICByZXN1bHRlZEh0bWwgPSByZXN1bHRlZEh0bWwucmVwbGFjZShmdWxsU2VudGVuY2UsIGA8c3BhbiBjbGFzcz0ke1wibWFya2VkR3JlZW5cIn0+JHtmdWxsU2VudGVuY2V9PC9zcGFuPmApO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIHZhciBjb3ZlcmVkU2VudGVjZSA9IGFsbFJlcUNvdmVyZWRTZW50ZW5jZSAmJiBhbGxSZXFDb3ZlcmVkU2VudGVuY2UuaW5jbHVkZXModHJpbW1lZFNlbnRlbmNlKTtcclxuICAgICAgaWYoY292ZXJlZFNlbnRlY2Upe1xyXG4gICAgICAgIHJlc3VsdGVkSHRtbCA9IHJlc3VsdGVkSHRtbC5yZXBsYWNlKGZ1bGxTZW50ZW5jZSwgYDxzcGFuPiR7ZnVsbFNlbnRlbmNlfTwvc3Bhbj5gKTtcclxuICAgICAgfSBlbHNlIGlmICghYWxsUmVxU2VudGVuY2VzTWFya2VkICYmIGFsbFJlcUNvdmVyZWRTZW50ZW5jZSAmJiBhbGxSZXFDb3ZlcmVkU2VudGVuY2UubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHJlc3VsdGVkSHRtbCA9IHJlc3VsdGVkSHRtbC5yZXBsYWNlKGZ1bGxTZW50ZW5jZSwgYDxzcGFuIGNsYXNzPSR7XCJtYXJrZWRSZWRcIn0+JHtmdWxsU2VudGVuY2V9PC9zcGFuPmApO1xyXG4gICAgICB9IFxyXG4gICAgfVxyXG4gIH0pO1xyXG4gIHJldHVybiByZXN1bHRlZEh0bWw7XHJcbn1cclxuXHJcbi8vY2hlY2sgdGhlIGN1cnJlbnQgcmVxdWlyZW1lbnQgaXMgYWxyZWFkeSBjb3ZlcmVkXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1BhcnRpYWxDb3ZlcmVkUmVxdWlybWVudChyZXF1aXJlbWVudDogS25vd2xlZGdlUmVxdWlyZW1lbnQsIGFscmVhZHlDb3ZlcmVkUGFydGlhbFJlcXVpcm1lbnRzOiB7IFtpZDogc3RyaW5nXTogc3RyaW5nIFtdfVtdKXtcclxuICB2YXIgdGV4dFNlbnRlbmNlcyA9IGdldFJlcXVpcm1lbnRTZW50ZW5jZXMocmVxdWlyZW1lbnQubmFtZSk7XHJcbiAgdmFyIHJlc3VsdCA9IGZhbHNlO1xyXG4gIGZvcih2YXIgaT0wOyBpIDwgdGV4dFNlbnRlbmNlcy5sZW5ndGg7IGkrKyl7XHJcbiAgICB2YXIgdHJpbW1lZFNlbnRlbmNlID0gdGV4dFNlbnRlbmNlc1tpXS50cmltKCk7XHJcbiAgICB2YXIgYWxsQ292ZXJlZFNlbnRlbmNlUmVxID0gYWxyZWFkeUNvdmVyZWRQYXJ0aWFsUmVxdWlybWVudHMgJiYgZ2V0Q292ZXJlZFNlbnRlY2VzKGFscmVhZHlDb3ZlcmVkUGFydGlhbFJlcXVpcm1lbnRzLCByZXF1aXJlbWVudC5pZCk7XHJcbiAgICB2YXIgY292ZXJlZFNlbnRlY2UgPSBhbGxDb3ZlcmVkU2VudGVuY2VSZXEgJiYgYWxsQ292ZXJlZFNlbnRlbmNlUmVxLmluY2x1ZGVzKHRyaW1tZWRTZW50ZW5jZSk7XHJcbiAgICBpZihjb3ZlcmVkU2VudGVjZSl7XHJcbiAgICAgIHJlc3VsdCA9IHRydWU7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG4vL2NvbXB1dGUgdGhlIGNvdmVyZWQgc2VudGVjZXMgZXhjbHVkaW5nIHRoZSBjdXJyZW50IHJlcXVpcmVtZW50XHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRDb3ZlcmVkU2VudGVjZXMoYWxsUmVxOiB7IFtpZDogc3RyaW5nXTogc3RyaW5nIFtdfVtdLCByZXF1aXJlbWVudElkOiBzdHJpbmcpOiBzdHJpbmdbXSB7XHJcbiAgdmFyIHJlc3VsdEFycmF5ID0gW107XHJcbiAgYWxsUmVxLmZvckVhY2gob2JqID0+IHtcclxuICAgIHZhciBhc3NpZ25lZFJlcSA9IE9iamVjdC5hc3NpZ24oW10sIE9iamVjdC5rZXlzKG9iaikuZmlsdGVyKHJlcUlkID0+IHJlcUlkID09IHJlcXVpcmVtZW50SWQpLm1hcChrID0+IG9ialtrXS5tYXAoZWxlbSA9PiBlbGVtLnRyaW0oKSkpKTtcclxuICAgIHJlc3VsdEFycmF5LnB1c2goLi4uYXNzaWduZWRSZXEpO1xyXG4gIH0pO1xyXG4gIHJldHVybiBmbGF0dGVuPHN0cmluZz4ocmVzdWx0QXJyYXkpO1xyXG59XHJcblxyXG4vL3NvcnQgdGhlIHNlbGVjdGVkIHNlbnRlbmNlcyBieSB0aGUgb3JkZXIgb2YgdGhlIGFwcGVhcmFuY2UgaW4gdGhlIHJlcXVpcmVtZW50XHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRTb3J0ZWRSZXF1aXJtZW50cyh0ZXh0U2VudGVuY2VzOiBzdHJpbmdbXSwgcGFydGlhbFJlcXVpcm1lbnRzOiBzdHJpbmdbXSk6IHN0cmluZ1tde1xyXG4gIHZhciBvdXRwdXQgPSBbXTtcclxuICB2YXIgaW5kZXhlZFNlbnRlbmNlcyA9IHRleHRTZW50ZW5jZXMubWFwKChlICxpKSA9PiB7cmV0dXJuIHtpbmQ6IGksIHZhbDogZX19KTtcclxuICBvdXRwdXQgPSBpbmRleGVkU2VudGVuY2VzLmZpbHRlcihzPT4gcGFydGlhbFJlcXVpcm1lbnRzLmluY2x1ZGVzKHMudmFsKSk7XHJcbiAgcmV0dXJuIG91dHB1dCA/IG91dHB1dC5zb3J0KCh4LCB5KSA9PiB4LmluZCA+IHkuaW5kID8gMSA6IC0xKS5tYXAocz0+IHMudmFsKSA6IFtdO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWlncmF0aW9uVGl0bGUoaXNNaWdyYXRlZCwgbWFya01vZGUpe1xyXG4gIHJldHVybiBpc01pZ3JhdGVkID9cclxuICAgIG1hcmtNb2RlID9cclxuICAgICAgYFNrb2x2ZXJrZXQgaGFyIHVwcGRhdGVyYXQgdGV4dGVucyBmb3JtdWxlcmluZy4gRHUga2FuIGdyYW5za2Egw6RuZHJpbmdlbiBnZW5vbSBhdHQgZsOkbGxhIHV0IHZhcm5pbmdzYm94ZW4gdGlsbCBow7ZnZXIsIG1lZCB0aXRlbCBcIlVwcGRhdGVyYWRlIGZvcm11bGVyaW5nYXIgZnLDpW4gU2tvbHZlcmtldFwiYCA6XHJcbiAgICAgIGBTa29sdmVya2V0IGhhciB1cHBkYXRlcmF0IHRleHRlbnMgZm9ybXVsZXJpbmcsIG1lbiBkZXR0YSBoYXIgw6RubnUgaW50ZSBncmFuc2thdHMgYXYgdXBwZ2lmdGVucyByZWRpZ2VyaW5nc2JlaMO2cmlnZWAgOlxyXG4gICAgdW5kZWZpbmVkXHJcbn1cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBTY2hvb2xDb3Vyc2VzIH0gZnJvbSAnLi4vc3ViLWNvbXBvbmVudHMvc2Nob29sLWNvdXJzZXMnO1xyXG5pbXBvcnQgeyBSZXNvdXJjZSB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgZHRGb3JtYXQgfSBmcm9tICcuLi91dGlscyc7XHJcbmltcG9ydCB7IERpYWxvZyB9IGZyb20gJy4uL2ludGVyZmFjZXMvY291cnNlLWVkaXRvci1ob3N0JztcclxuaW1wb3J0IHZhbGlkVXJsIGZyb20gJ3ZhbGlkLXVybCc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHJlc291cmNlPzogUmVzb3VyY2U7XHJcbiAgdGl0bGU6IHN0cmluZztcclxuICBvblNhdmU6IChuZXdSZXNvdXJjZTogUmVzb3VyY2UpID0+IHZvaWQ7XHJcbiAgb25EZWxldGU/OiAoKT0+dm9pZDtcclxufVxyXG5cclxudHlwZSBTdGF0ZSA9IFJlc291cmNlO1xyXG5cclxuZXhwb3J0IGNsYXNzIEVkaXRSZXNvdXJjZSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcyxTdGF0ZT4gaW1wbGVtZW50cyBEaWFsb2cge1xyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHRoaXMucHJvcHMucmVzb3VyY2UgfHwge25hbWU6ICcnLCB1cmw6ICcnfTtcclxuICB9XHJcblxyXG4gIHNhdmUoKSB7XHJcbiAgICBjb25zdCByZXNvdXJjZSA9IHRoaXMuc3RhdGU7XHJcbiAgICBpZiAoIXZhbGlkVXJsLmlzVXJpKHJlc291cmNlLnVybCkpIHRocm93IG5ldyBFcnJvcihMYEFuZ2l2ZW4gVVJMICcke3Jlc291cmNlLnVybH0nIMOkciBvZ2lsdGlnLiBTa2EgYsO2cmphIG1lZCBleGVtcGVsdmlzIGh0dHA6LCBodHRwczogZWxsZXIgbWFpbHRvOmApO1xyXG4gICAgdGhpcy5wcm9wcy5vblNhdmUocmVzb3VyY2UpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3Qge3RpdGxlLCBvblNhdmUsIG9uRGVsZXRlfSA9IHRoaXMucHJvcHM7XHJcbiAgICBjb25zdCByZXNvdXJjZSA9IHRoaXMuc3RhdGU7XHJcbiAgICBjb25zdCBpc1ZhbGlkVXJsID0gdmFsaWRVcmwuaXNVcmkodGhpcy5zdGF0ZS51cmwpO1xyXG5cclxuICAgIHJldHVybiA8ZGl2PjxkaXYgY2xhc3NOYW1lPVwic3YtaHRtbC1wb3J0bGV0IHN2LXBvcnRsZXQgc3Ytc2tpcC1zcGFjZXJcIj5cclxuICAgICAgPGgyPnt0aXRsZX08L2gyPlxyXG4gICAgICA8aHIgLz5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5OYW1uOjwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBhdXRvRm9jdXNcclxuICAgICAgICAgICAgdGFiSW5kZXg9ezF9XHJcbiAgICAgICAgICAgIHNpemU9ezUwfVxyXG4gICAgICAgICAgICB2YWx1ZT17cmVzb3VyY2UubmFtZX1cclxuICAgICAgICAgICAgb25DaGFuZ2U9e2V2PT50aGlzLnNldFN0YXRlKHtuYW1lOiBldi50YXJnZXQudmFsdWV9KX0gLz5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcCBzcGFjZWRcIj48L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbFwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+TMOkbms6PC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3AgXCI+XHJcbiAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIlxyXG4gICAgICAgICAgICB0YWJJbmRleD17MX1cclxuICAgICAgICAgICAgc2l6ZT17NTB9XHJcbiAgICAgICAgICAgIHZhbHVlPXtyZXNvdXJjZS51cmx9XHJcbiAgICAgICAgICAgIG9uQ2hhbmdlPXtldj0+dGhpcy5zZXRTdGF0ZSh7dXJsOiBldi50YXJnZXQudmFsdWV9KX0gLz5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcCBzcGFjZWRcIj48L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxiciAvPjwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInN2LWh0bWwtcG9ydGxldCBzdi1wb3J0bGV0XCI+XHJcbiAgICAgICAgeyhyZXNvdXJjZS5jcmVhdGVkRGF0ZSB8fCByZXNvdXJjZS5tb2RpZmllZERhdGUpICYmIDxkaXY+XHJcbiAgICAgICAgICB7cmVzb3VyY2UuY3JlYXRlZERhdGUgJiYgPHA+XHJcbiAgICAgICAgICAgIFJlc3Vyc2VuL0zDpG5rZW4gc2thcGFkZXMge2R0Rm9ybWF0KHJlc291cmNlLmNyZWF0ZWREYXRlKX0gYXYgPHN0cm9uZz57cmVzb3VyY2UuY3JlYXRlZEJ5Lm5hbWV9PC9zdHJvbmc+LlxyXG4gICAgICAgICAgPC9wPn1cclxuICAgICAgICAgIHtyZXNvdXJjZS5tb2RpZmllZERhdGUgJiYgPHA+XHJcbiAgICAgICAgICAgIFJlc3Vyc2VuL0zDpG5rZW4gcmVkaWdlcmFkZXMgc2VuYXN0IHtkdEZvcm1hdChyZXNvdXJjZS5tb2RpZmllZERhdGUpfSBhdiA8c3Ryb25nPntyZXNvdXJjZS5tb2RpZmllZEJ5Lm5hbWV9PC9zdHJvbmc+LlxyXG4gICAgICAgICAgPC9wPn1cclxuICAgICAgICAgIDxiciAvPjxici8+XHJcbiAgICAgICAgPC9kaXY+fVxyXG4gICAgICAgIHtvbkRlbGV0ZSAmJiA8ZGl2IHRhYkluZGV4PXsyfSBjbGFzc05hbWU9XCJidG4gYnRuLXdhcm5pbmcgYnRuLWxhcmdlIHB1bGwtcmlnaHRcIiBvbkNsaWNrPXsoKT0+b25EZWxldGUoKX0+XHJcbiAgICAgICAgICBUYSBib3J0IHJlc3Vycy9sw6Rua1xyXG4gICAgICAgIDwvZGl2Pn1cclxuICAgICAgICA8YSB0YWJJbmRleD17MX0gY2xhc3NOYW1lPXtcImJ0biBidG4tbGFyZ2VcIiArIChpc1ZhbGlkVXJsID8gXCJcIiA6IFwiIGJ0bi1pbmFjdGl2ZVwiKX0gb25DbGljaz17aXNWYWxpZFVybCAmJiAoKCkgPT4gb25TYXZlKHJlc291cmNlKSl9PlNwYXJhPC9hPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBUYXNrLCBDb3Vyc2UgfSBmcm9tIFwia2VkYmFja2VuZC9tb2RlbHNcIjtcclxuaW1wb3J0IHsgRmVhdHVyZXMgfSBmcm9tIFwiLi4vLi4vLi4vLi4vZmVhdHVyZXNcIjtcclxuaW1wb3J0IHsgRWRpdFRhc2sgfSBmcm9tIFwiLi9lZGl0LXRhc2tcIjtcclxuaW1wb3J0IFJlYWN0RGF0ZVBpY2tlciBmcm9tIFwicmVhY3QtZGF0ZXBpY2tlclwiO1xyXG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHtUYXNrTWlncmF0aW9uQm94fSBmcm9tIFwiLi90YXNrLW1pZ3JhdGlvbi1ib3hcIjtcclxuaW1wb3J0IHsgR29vZ2xlUGlja2VyIH0gZnJvbSAnLi4vLi4vLi4vLi4vYXBpcy9nb29nbGUtcGlja2VyJztcclxuaW1wb3J0IHsgRHJpdmVCdXR0b24gfSBmcm9tIFwiLi4vLi4vLi4vLi4vYXBpcy9idXR0b25zXCI7XHJcbmltcG9ydCB7IFRhc2tDb250ZW50RnJhZ21lbnQgfSBmcm9tIFwiLi90YXNrLWNvbnRlbnQtZnJhZ21lbnRcIjtcclxuaW1wb3J0IHsgVGFza1RlbXBsYXRlIH0gZnJvbSBcIi4uLy4uL2ludGVyZmFjZXMvY291cnNlLWVkaXRvci1ob3N0XCI7XHJcbmltcG9ydCB7IFVJQ2hlY2tib3ggfSBmcm9tIFwiLi4vLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2NoZWNrYm94XCI7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHRhc2s6IFRhc2s7XHJcbiAgY291cnNlOiBDb3Vyc2U7XHJcbiAgd3JpdGVBY2Nlc3M6IGJvb2xlYW47XHJcbiAgZmVhdHVyZXM6IEZlYXR1cmVzO1xyXG4gIGVkaXRUYXNrOiBFZGl0VGFzaztcclxuICB0ZW1wbGF0ZXM/OiBUYXNrVGVtcGxhdGVbXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEJhc2ljRWRpdGFibGVUYXNrRmllbGRzKHtcclxuICB0YXNrLFxyXG4gIGNvdXJzZSxcclxuICB3cml0ZUFjY2VzcyxcclxuICBmZWF0dXJlcyxcclxuICBlZGl0VGFzayxcclxuICB0ZW1wbGF0ZXNcclxufTogUHJvcHMpIHtcclxuICBjb25zdCBzaG93R29vZ2xlUGlja2VyID0gZmVhdHVyZXMucGlja2VyO1xyXG5cclxuICByZXR1cm4gPGRpdj5cclxuICAgIDxoMj5VcHBnaWZ0ZW5zIG5hbW4gb2NoIGzDpG5rPC9oMj5cclxuICAgIDxkaXYgY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbCBzcGFjZWRcIj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICA8cD5VcHBnaWZ0ZW5zIG5hbW46PC9wPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICA8aW5wdXQgYXV0b0ZvY3VzIHR5cGU9XCJ0ZXh0XCIgc2l6ZT17MzV9IHZhbHVlPXt0YXNrLm5hbWV9IGRpc2FibGVkPXshd3JpdGVBY2Nlc3N9IHJlYWRPbmx5PXshd3JpdGVBY2Nlc3N9IG9uQ2hhbmdlPXtldiA9PiB7XHJcbiAgICAgICAgICBlZGl0VGFzay51cGRhdGVUYXNrT3JDdXN0b21pemF0aW9uKFwibmFtZVwiLCB7ICRzZXQ6IGV2LnRhcmdldC52YWx1ZSB9KTtcclxuICAgICAgICB9IH0gLz5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICAgIHt0YXNrLm1pZ3JhdGVkVGV4dHMgJiYgd3JpdGVBY2Nlc3MgJiYgPFRhc2tNaWdyYXRpb25Cb3ggdGFzaz17dGFza30gY291cnNlPXtjb3Vyc2V9IHVwZGF0ZUxpbms9eyhpZCwgbGlua09yVW5saW5rKSA9PiBlZGl0VGFzay51cGRhdGVMaW5rKGlkLCBsaW5rT3JVbmxpbmspfSAvPn1cclxuICAgIDxoMj5Jbm5laMOlbGxzdHlwPC9oMj5cclxuICAgIDxkaXYgY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbCBzcGFjZWRcIj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICA8cD5Ww6Rsajo8L3A+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgIDxzZWxlY3QgdmFsdWU9e3Rhc2suY29udGVudFR5cGV9IG9uQ2hhbmdlPXtldiA9PiB7XHJcbiAgICAgICAgICBlZGl0VGFzay51cGRhdGVUYXNrT3JDdXN0b21pemF0aW9uKFwiY29udGVudFR5cGVcIiwgeyAkc2V0OiBldi50YXJnZXQudmFsdWUgfSk7XHJcbiAgICAgICAgfX0+XHJcbiAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwidXJsXCI+TMOkbms8L29wdGlvbj5cclxuICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJkZXNjXCI+QmVza3Jpdm5pbmc8L29wdGlvbj5cclxuICAgICAgICA8L3NlbGVjdD5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICAgIHt0YXNrLmNvbnRlbnRUeXBlICYmIHRhc2suY29udGVudFR5cGUgPT0gJ3VybCcgPyA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWwgc3BhY2VkXCI+XHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICA8cD5VUkw6PC9wPlxyXG4gICAgPC9kaXY+XHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcCBhbGlnbi1ob3Jpem9udGFsXCI+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgPGlucHV0IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtXCIgdHlwZT1cInRleHRcIiBzaXplPXszNX0gdmFsdWU9e3Rhc2sudXJsfSBkaXNhYmxlZD17IXdyaXRlQWNjZXNzfSByZWFkT25seT17IXdyaXRlQWNjZXNzfSBvbkNoYW5nZT17ZXYgPT4ge1xyXG4gICAgICAgIGVkaXRUYXNrLnVwZGF0ZVRhc2tPckN1c3RvbWl6YXRpb24oXCJ1cmxcIiwgeyAkc2V0OiBldi50YXJnZXQudmFsdWUgfSk7XHJcbiAgICAgIH0gfSAvPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICB7c2hvd0dvb2dsZVBpY2tlciAmJiA8RHJpdmVCdXR0b24gbGFiZWw9XCJcIiBhY3Rpb249eygpID0+IHtcclxuICAgICAgICAgIGNvbnN0IHBpY2tlciA9IG5ldyBHb29nbGVQaWNrZXIoeyB1cGxvYWQ6IHRydWUgfSk7XHJcblxyXG4gICAgICAgICAgcGlja2VyLnNob3coKS50aGVuKGZpbGVzID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZmlsZXVybCA9IGZpbGVzWzBdLnVybDtcclxuICAgICAgICAgICAgY29uc3Qgdmlld3VybCA9IGZpbGV1cmwuc3Vic3RyKDAsIGZpbGV1cmwubGFzdEluZGV4T2YoJy8nKSkgKyBcIi92aWV3XCJcclxuICAgICAgICAgICAgaWYgKHZpZXd1cmwgPT0gdGFzay51cmwpIHJldHVybjtcclxuICAgICAgICAgICAgZWRpdFRhc2sudXBkYXRlVGFza09yQ3VzdG9taXphdGlvbihcInVybFwiLCB7ICRzZXQ6IHZpZXd1cmwgfSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9fSAvPlxyXG4gICAgICAgIH1cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICA8L2Rpdj4gOiAgICAgPD5cclxuICAgICAgeyh3cml0ZUFjY2VzcyB8fCAhIXRhc2suY29udGVudCkgJiYgPFRhc2tDb250ZW50RnJhZ21lbnRcclxuICAgICAgICB3cml0ZUFjY2Vzcz17d3JpdGVBY2Nlc3N9XHJcbiAgICAgICAgdGFzaz17dGFza31cclxuICAgICAgICBlZGl0VGFzaz17ZWRpdFRhc2t9IC8+fVxyXG4gICAgPC8+XHJcbiAgICB9XHJcblxyXG4gICAgPD48aDI+SW5sw6RtbmluZ3N1cHBnaWZ0PC9oMj5cclxuICAgIDxVSUNoZWNrYm94IHN0YXRlPXsoZWRpdFRhc2suZ2V0VGFza1Byb3AoXCJhc3NpZ25tZW50XCIpID8gXCIgY2hlY2tlZFwiIDogXCJcIil9IG9uQ2xpY2s9eygpID0+IHtcclxuICAgICAgICAgICAgZWRpdFRhc2sudXBkYXRlVGFza09yQ3VzdG9taXphdGlvbihcImFzc2lnbm1lbnRcIiwgeyAkc2V0OiAhZWRpdFRhc2suZ2V0VGFza1Byb3AoXCJhc3NpZ25tZW50XCIpIH0pO1xyXG4gICAgICAgICAgfSB9IGxhYmVsPVwiRGVuIGjDpHIgdXBwZ2lmdGVuIMOkciBlbiBpbmzDpG1uaW5nc3VwcGdpZnRcIiAvPlxyXG4gICAgICBcclxuICAgICAge3Rhc2suYXNzaWdubWVudCAmJiA8PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWwgc3BhY2VkXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICAgIDxwPlbDpGxqIG1hbGw6PC9wPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgICA8c2VsZWN0IHZhbHVlPXt0YXNrLnRlbXBsYXRlRmlsZT8gdGFzay50ZW1wbGF0ZUZpbGUuZmlsZUlkIDogJy0nfSBvbkNoYW5nZT17ZXYgPT4ge1xyXG4gICAgICAgICAgICB2YXIgbmV3VmFsdWUgPSBldi50YXJnZXQudmFsdWU7XHJcbiAgICAgICAgICAgIGlmIChuZXdWYWx1ZSA9PT0gJy0nKSB7XHJcbiAgICAgICAgICAgICAgLy8gZG8gbm90IHVzZSB0ZW1wbGF0ZVxyXG4gICAgICAgICAgICAgIGVkaXRUYXNrLnVwZGF0ZVRlbXBsYXRlVmlldyhudWxsKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChuZXdWYWx1ZS5zdGFydHNXaXRoKCd0OicpKSB7XHJcbiAgICAgICAgICAgICAgZWRpdFRhc2sudXBkYXRlVGVtcGxhdGVWaWV3KHtmaWxlSWQ6IG5ld1ZhbHVlfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgLy8gUGlja2VkIGZpbGVcclxuICAgICAgICAgICAgICBjb25zdCBwaWNrZXIgPSBuZXcgR29vZ2xlUGlja2VyKHsgbGltaXRUeXBlOiAnZ29vZ2xlLWFwcHMnIH0pO1xyXG4gICAgICAgICAgICAgIHBpY2tlci5zaG93KCkudGhlbihmaWxlcyA9PiBlZGl0VGFzay51cGRhdGVUZW1wbGF0ZVZpZXcoZmlsZXNbMF0pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICB9fT5cclxuICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIi1cIj5JbmdlbiBtYWxsPC9vcHRpb24+XHJcbiAgICAgICAgICAgIHt0ZW1wbGF0ZXM/IHRlbXBsYXRlcy5tYXAoKHRlbXBsYXRlLCBpZHgpID0+IFxyXG4gICAgICAgICAgICAgIDxvcHRpb24ga2V5PXtpZHh9IHZhbHVlPXtcInQ6XCIrdGVtcGxhdGUuZmlsZUlkfT57dGVtcGxhdGUuZ3JhZGU/IHRlbXBsYXRlLmdyYWRlK1wiOiBcIiA6IFwiXCJ9e3RlbXBsYXRlLnRpdGxlfTwvb3B0aW9uPlxyXG4gICAgICAgICAgICApIDogbnVsbH1cclxuICAgICAgICAgICAge3Rhc2sudGVtcGxhdGVGaWxlICYmICF0YXNrLnRlbXBsYXRlRmlsZS5maWxlSWQuc3RhcnRzV2l0aCgndDonKSA/XHJcbiAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPXt0YXNrLnRlbXBsYXRlRmlsZS5maWxlSWR9PkVnZW4gbWFsbDoge3Rhc2sudGVtcGxhdGVGaWxlLm5hbWV9PC9vcHRpb24+IDpcclxuICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCI0XCI+RWdlbiBtYWxsPC9vcHRpb24+fVxyXG4gICAgICAgICAgPC9zZWxlY3Q+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICB7dGFzay50ZW1wbGF0ZUZpbGUgJiZcclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsIHNwYWNlZFwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgPGltZyBjbGFzc05hbWU9XCJmaWxlLWljb25cIiBzcmM9e3Rhc2sudGVtcGxhdGVGaWxlLmljb25Vcmx9IC8+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICAgICA8cD48YSB0YXJnZXQ9XCJfYmxhbmtcIiBocmVmPXt0YXNrLnRlbXBsYXRlRmlsZS51cmx9Pnt0YXNrLnRlbXBsYXRlRmlsZS5uYW1lfTwvYT48L3A+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2Pn1cclxuICAgICAgPC8+XHJcbiAgICAgIH1cclxuICAgICBcclxuICAgICAge2VkaXRUYXNrLmdldFRhc2tQcm9wKFwiYXNzaWdubWVudFwiKSAmJiA8PlxyXG4gICAgICAgIDxwPklubMOkbW5pbmdzZGF0dW08L3A+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgICA8UmVhY3REYXRlUGlja2VyIG5leHRNb250aEJ1dHRvbkxhYmVsPVwiXCIgcHJldmlvdXNNb250aEJ1dHRvbkxhYmVsPVwiXCIgc2hvd1dlZWtOdW1iZXJzPXt0cnVlfSBzZWxlY3RlZD17ZWRpdFRhc2suZ2V0VGFza1Byb3AoXCJkZWFkbGluZVwiKSAmJiBtb21lbnQoZWRpdFRhc2suZ2V0VGFza1Byb3AoXCJkZWFkbGluZVwiKSkudG9EYXRlKCl9IGRhdGVGb3JtYXQ9XCJ5eXl5LU1NLWRkXCIgbG9jYWxlPXtcInN2XCJ9IHBvcHBlclBsYWNlbWVudD1cImJvdHRvbS1zdGFydFwiIG9uQ2hhbmdlPXt2YWx1ZSA9PiB7XHJcbiAgICAgICAgICAgICAgZWRpdFRhc2sudXBkYXRlVGFza09yQ3VzdG9taXphdGlvbihcImRlYWRsaW5lXCIsIHsgJHNldDogbW9tZW50KHZhbHVlKS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpIH0pO1xyXG4gICAgICAgICAgICB9IH0gLz5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICAgICAge2VkaXRUYXNrLmdldFRhc2tQcm9wKFwiZGVhZGxpbmVcIikgJiYgPGEgY2xhc3NOYW1lPVwiZGVsZXRlRGF0ZVwiIGhyZWY9XCIjXCIgdGl0bGU9XCJUYSBib3J0IGlubMOkbW5pbmdzZGF0dW1cIiBvbkNsaWNrPXtldiA9PiB7XHJcbiAgICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICBlZGl0VGFzay51cGRhdGVUYXNrT3JDdXN0b21pemF0aW9uKFwiZGVhZGxpbmVcIiwgeyAkc2V0OiBudWxsIH0pO1xyXG4gICAgICAgICAgICB9IH0+PC9hPn1cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxVSUNoZWNrYm94IHN0YXRlPXsoKHRhc2suc2VuZFRvVXJrdW5kID09IG51bGwgPyB0cnVlIDogdGFzay5zZW5kVG9Vcmt1bmQpID8gXCIgY2hlY2tlZFwiIDogXCJcIil9IG9uQ2xpY2s9eygpID0+XHJcbiAgICAgICAgICAgICAgZWRpdFRhc2sudXBkYXRlVGFza09yQ3VzdG9taXphdGlvbihcInNlbmRUb1Vya3VuZFwiLCB7ICRzZXQ6IHRhc2suc2VuZFRvVXJrdW5kID09IG51bGwgPyBmYWxzZSA6ICF0YXNrLnNlbmRUb1Vya3VuZCB9KX0gbGFiZWw9XCJTa2lja2EgaW5sw6RtbmluZ2FyIHRpbGwgVXJrdW5kXCIgLz5cclxuICAgICAgICB7dGFzay50ZW1wbGF0ZUZpbGUgJiYgPFVJQ2hlY2tib3ggc3RhdGU9eyh0YXNrLmFkZGl0aW9uYWxVcGxvYWRzID8gXCIgY2hlY2tlZFwiIDogXCJcIil9IGxhYmVsPVwiVGlsbMOldCBpbmzDpG1uaW5nIGF2IGFuZHJhL3l0dGVybGlnYXJlIGZpbGVyXCIgb25DbGljaz17KCkgPT5cclxuICAgICAgICAgICAgICAgIGVkaXRUYXNrLnVwZGF0ZVRhc2tPckN1c3RvbWl6YXRpb24oXCJhZGRpdGlvbmFsVXBsb2Fkc1wiLCB7ICRzZXQ6IHRhc2suYWRkaXRpb25hbFVwbG9hZHMgPT0gbnVsbCA/IGZhbHNlIDogIXRhc2suYWRkaXRpb25hbFVwbG9hZHMgfSl9IC8+XHJcbiAgICAgICAgfVxyXG4gICAgICA8Lz59XHJcbiAgICA8Lz5cclxuICA8L2Rpdj47XHJcbn1cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBDb3Vyc2UsIENvdXJzZU1vZHVsZSwgVGFzaywgRG9jdW1lbnQgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IGNyZWF0ZVVVSUQgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XHJcbmltcG9ydCB7IEtub3dsZWRnZU1hdHJpeCB9IGZyb20gJy4uLy4uL3N1Yi1jb21wb25lbnRzL2tub3dsZWRnZS1tYXRyaXgnO1xyXG5pbXBvcnQgdXBkYXRlIGZyb20gJ3JlYWN0LWFkZG9ucy11cGRhdGUnO1xyXG5pbXBvcnQgeyBEaWFsb2csIElDb3Vyc2VFZGl0b3JIb3N0LCBUYXNrVGVtcGxhdGUgfSBmcm9tIFwiLi4vLi4vaW50ZXJmYWNlcy9jb3Vyc2UtZWRpdG9yLWhvc3RcIjtcclxuaW1wb3J0IHsgaGFzV3JpdGVBY2Nlc3MgfSBmcm9tICcuLi8uLi8uLi8uLi9hY2Nlc3MtY29udHJvbCc7XHJcbmltcG9ydCB7IFNlbGVjdFJlbGF0ZWREb2NzIH0gZnJvbSAnLi4vLi4vc3ViLWNvbXBvbmVudHMvc2VsZWN0LXJlbGF0ZWQtZG9jcyc7XHJcbmltcG9ydCB2YWxpZFVybCBmcm9tICd2YWxpZC11cmwnO1xyXG5pbXBvcnQgeyBMLCBzaG93RXJyb3IgfSBmcm9tIFwiLi4vLi4vLi4vLi4vdXRpbHMvdXRpbHNcIjtcclxuaW1wb3J0IHsgQ2FjaGVkUmVzcG9uc2UgfSBmcm9tIFwiLi4vLi4vLi4vLi4vdXRpbHMvY2FjaGVkLXJlc3BvbnNlXCI7XHJcbmltcG9ydCBlbnYgZnJvbSAnLi4vLi4vLi4vLi4vZ2xvYmFscy9LRUQuZW52JztcclxuaW1wb3J0IHsgU3Bpbm5lciB9IGZyb20gXCIuLi8uLi9zdWItY29tcG9uZW50cy9zcGlubmVyXCI7XHJcbmltcG9ydCB7IEZlYXR1cmVzIH0gZnJvbSAnLi4vLi4vLi4vLi4vZmVhdHVyZXMnO1xyXG5pbXBvcnQgeyBTZWFyY2hSZXN1bHRzIH0gZnJvbSAnLi9zZWFyY2gtcmVzdWx0cyc7XHJcbmltcG9ydCB7IEJhc2ljRWRpdGFibGVUYXNrRmllbGRzIH0gZnJvbSAnLi9iYXNpYy1lZGl0YWJsZS10YXNrLWZpZWxkcyc7XHJcbmltcG9ydCB7IFRhc2tTdGF0dXNGcmFnbWVudCB9IGZyb20gJy4vdGFzay1zdGF0dXMtZnJhZ21lbnQnO1xyXG5pbXBvcnQgeyBTYXZlT3JDYW5jZWxCdXR0b25zIH0gZnJvbSAnLi9zYXZlLW9yLWNhbmNlbC1idXR0b25zJztcclxuaW1wb3J0IHsgUHJldmlld2FibGVUYXNrRmllbGRzIH0gZnJvbSAnLi9wcmV2aWV3YWJsZS10YXNrLWZpZWxkcyc7XHJcbmltcG9ydCB7IEdvb2dsZURyaXZlIH0gZnJvbSAnLi4vLi4vLi4vLi4vYXBpcy9nb29nbGUtZHJpdmUnO1xyXG5pbXBvcnQgeyBUZW1wbGF0ZXNGaWxlSWQgfSBmcm9tICcuLi8uLi8uLi8uLi9hcGlzL2NvbmZpZ3MnO1xyXG5cclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgc2VhcmNoTW9kZT86IGJvb2xlYW47XHJcbiAgdGFzaz86IFRhc2s7XHJcbiAgdGFza0N1c3RvbWl6YXRpb24/OiBQYXJ0aWFsPFRhc2s+O1xyXG4gIG1vZHVsZTogQ291cnNlTW9kdWxlO1xyXG4gIGNvdXJzZTogQ291cnNlO1xyXG4gIGhvc3Q6IElDb3Vyc2VFZGl0b3JIb3N0O1xyXG4gIGlkc05vdENvdmVyZWRCeUFueVRhc2s6IHsgW2lkOiBzdHJpbmddOiB0cnVlIH07XHJcbiAgb25TYXZlOiAodGFzazogVGFzaywgdGFza0N1c3RvbWl6YXRpb246IFBhcnRpYWw8VGFzaz4pID0+IFByb21pc2U8YW55PjtcclxuICBvblNhdmVDdXN0b21pemF0aW9uOiAodGFza0N1c3RvbWl6YXRpb246IFBhcnRpYWw8VGFzaz4pID0+IFByb21pc2U8YW55PjtcclxuICBvblJlcGxhY2U6ICh0YXNrSWQ6IHN0cmluZywgdGFzazogVGFzaykgPT4gUHJvbWlzZTxhbnk+O1xyXG4gIG9uQ2FuY2VsOiAoKSA9PiB2b2lkO1xyXG4gIG9uRGVsZXRlOiAoKSA9PiB2b2lkO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgU3RhdGUge1xyXG4gIHRpdGxlOiBzdHJpbmc7XHJcbiAgdGFzazogVGFzaztcclxuICB0YXNrQ3VzdG9taXphdGlvbjogUGFydGlhbDxUYXNrPlxyXG4gIGZ1dHVyZUFiaWxpdGllc09wZW46IGJvb2xlYW47XHJcbiAgc2VhcmNoUmVzdWx0PzogVGFza1tdO1xyXG4gIHNlYXJjaE1hcmtlZElkcz86IHN0cmluZ1tdO1xyXG4gIGlzU2VhcmNoaW5nOiBib29sZWFuO1xyXG4gIHByZXZpZXdUYXNrQ29udGVudD86IHN0cmluZzsgLy8gVE9ETzogUmVtb3ZlIHRoaXMgc3RhdGUuIFByZXZpZXdpbmcgY29udGVudCBpcyBub3cgZXF1aXZhbGVudCB0byBjaGVja2luZyBhIGNoZWNrYm94LlxyXG4gIHRlbXBsYXRlcz86IFRhc2tUZW1wbGF0ZVtdO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRWRpdFRhc2sgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsIFN0YXRlPiBpbXBsZW1lbnRzIERpYWxvZyB7XHJcbiAgc2VhcmNoUmVzcG9uc2U/OiBDYWNoZWRSZXNwb25zZTxUYXNrW10+O1xyXG4gIGRpYWxvZ0VsZW06IEhUTUxEaXZFbGVtZW50O1xyXG4gIGZlYXR1cmVzID0gbmV3IEZlYXR1cmVzKCk7XHJcblxyXG4gIHNldFN0YXRlUHJvbWlzZWQoc3RhdGU6IFBhcnRpYWw8U3RhdGU+KSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzdXBlci5zZXRTdGF0ZSgoKSA9PiBzdGF0ZSBhcyBTdGF0ZSwgcmVzb2x2ZSkpO1xyXG4gIH1cclxuXHJcbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICBjb25zdCB3cml0ZUFjY2VzcyA9ICFwcm9wcy50YXNrIHx8IGhhc1dyaXRlQWNjZXNzKGVudi5jdXJyZW50VXNlciwgcHJvcHMudGFzayk7XHJcbiAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICB0aXRsZTogcHJvcHMudGFzayA/XHJcbiAgICAgICAgd3JpdGVBY2Nlc3MgP1xyXG4gICAgICAgICAgTGBSZWRpZ2VyYSB1cHBnaWZ0IHRpbGwgXCIke3Byb3BzLm1vZHVsZS5uYW1lfVwiYCA6XHJcbiAgICAgICAgICBMYFZpc2EgdXBwZ2lmdCB0aWxsIFwiJHtwcm9wcy5tb2R1bGUubmFtZX1cImAgOlxyXG4gICAgICAgIHByb3BzLnNlYXJjaE1vZGUgP1xyXG4gICAgICAgICAgTGBTw7ZrIG55IHVwcGdpZnQgdGlsbCBcIiR7cHJvcHMubW9kdWxlLm5hbWV9XCJgIDpcclxuICAgICAgICAgIExgTMOkZ2cgdGlsbCBlZ2VuIHVwcGdpZnQgdGlsbCBcIiR7cHJvcHMubW9kdWxlLm5hbWV9XCJgLFxyXG4gICAgICBmdXR1cmVBYmlsaXRpZXNPcGVuOiBmYWxzZSxcclxuICAgICAgdGFza0N1c3RvbWl6YXRpb246IHByb3BzLnRhc2tDdXN0b21pemF0aW9uIHx8IHt9LFxyXG4gICAgICB0YXNrOiBwcm9wcy50YXNrID9cclxuICAgICAgICAvLyBBIHRhc2sgd2FzIGdpdmVuLiBDbG9uZSBpdCBhbmQgYWRkICRtZXRhOiAndXBkYXRlJyB0byBpdFxyXG4gICAgICAgIC8vIHRvIGluZm9ybSBFZGl0Q291cnNlLnNhdmUoKSB0byB1cGRhdGUgaXQgb24gaXRzIG93biBlbnRpdHkuXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgJG1ldGE6IHByb3BzLnRhc2suJG1ldGEgfHwgJ3VwZGF0ZScsXHJcbiAgICAgICAgICAuLi5wcm9wcy50YXNrXHJcbiAgICAgICAgfSA6IHByb3BzLnNlYXJjaE1vZGUgPyBudWxsIDpcclxuICAgICAgICAgIC8vIE5vIHRhc2sgd2FzIGdpdmVuLiBTZXQgJG1ldGEgPSAnYWRkJyB0byBpbmZvcm0gRWRpdENvdXJzZS5zYXZlKClcclxuICAgICAgICAgIC8vIHRvIGFkZCB0aGUgdGFzayB0byB0aGUgdGFza3MgdGFibGUuXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGlkOiBjcmVhdGVVVUlEKCksXHJcbiAgICAgICAgICAgICRtZXRhOiAnYWRkJyxcclxuICAgICAgICAgICAgdGFnczogW1xyXG4gICAgICAgICAgICAgIGBzdWI6JHtwcm9wcy5jb3Vyc2Uuc3ViamVjdENvZGV9YCxcclxuICAgICAgICAgICAgICBgY291cnNlOiR7cHJvcHMuY291cnNlLmNvZGV9YFxyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICBzY2hvb2w6ICFwcm9wcy5jb3Vyc2UuaXNUZW1wbGF0ZSAmJiBlbnYuY3VycmVudFVzZXIuc2Nob29sLFxyXG4gICAgICAgICAgICByZXNvdXJjZXM6IFtdLFxyXG4gICAgICAgICAgICBhYmlsaXRpZXM6IFtdLFxyXG4gICAgICAgICAgICBjZW50cmFsQ29udGVudDogW10sXHJcbiAgICAgICAgICAgIGZ1dHVyZUFiaWxpdGllczogW10sXHJcbiAgICAgICAgICAgIGtub3dsZWRnZVJlcXVpcmVtZW50czogW10sXHJcbiAgICAgICAgICAgIG5hbWU6IFwiXCIsXHJcbiAgICAgICAgICAgIHVybDogXCJcIixcclxuICAgICAgICAgICAgYWNsOiBwcm9wcy5jb3Vyc2UuaXNUZW1wbGF0ZSA/IFtcclxuICAgICAgICAgICAgICBgcm9sZTpVU0VSOlJgLy8gKE9LIHRvIGtlZXAgYWZ0ZXIga3Vyc2J5Z2ctY2hhbmdlcykuIFRlbXBsYXRlcyAod2hpY2ggd2lsbCBiZSBlbXB0eSEpIHdpbGwgbm90IGhhdmUgdGFza3MuIElmIHRoZXkgaGFkLCBtaWdodCBub3QgdGFza3Mgc2hvdWxkIG5vdCBiZSBwb3NzaWJsZSB0byBtb2RpZnkuIChBbiBBRE1JTiBjb3VsZCBiZWxvbmcgdG8gYSBzY2hvb2whIE90aGVyIG5vbi1hZG1pbnMgYXQgdGhhdCBzY2hvb2wgc2hvdWxkIG5vdCBiZSBhYmxlIHRvIGVkaXQgaXQpXHJcbiAgICAgICAgICAgIF0gOiBbXHJcbiAgICAgICAgICAgICAgICBgcm9sZTpVU0VSOlJgLFxyXG4gICAgICAgICAgICAgICAgYHNjaG9vbFJvbGU6JHtlbnYuY3VycmVudFVzZXIuc2Nob29sfS9FTVBMT1lFRTpTYFxyXG4gICAgICAgICAgICAgIF1cclxuICAgICAgICAgIH0sXHJcbiAgICAgIHNlYXJjaE1hcmtlZElkczogcHJvcHMuc2VhcmNoTW9kZSAmJiBbXSxcclxuICAgICAgc2VhcmNoUmVzdWx0OiBwcm9wcy5zZWFyY2hNb2RlICYmIFtdLFxyXG4gICAgICBpc1NlYXJjaGluZzogcHJvcHMuc2VhcmNoTW9kZVxyXG4gICAgfTtcclxuICAgIGlmIChwcm9wcy5zZWFyY2hNb2RlKSB7XHJcbiAgICAgIHRoaXMuc2VhcmNoUmVzcG9uc2UgPSBuZXcgQ2FjaGVkUmVzcG9uc2UoKCkgPT5cclxuICAgICAgICBlbnYua2VkQmFja2VuZENsaWVudC5saXN0PFRhc2s+KFwidGFza3NcIiwge1xyXG4gICAgICAgICAgdGFnczogYGNvdXJzZToke3Byb3BzLmNvdXJzZS5jb2RlfWAsXHJcbiAgICAgICAgICBpbmNsdWRlOiBbJ2tub3dsZWRnZVJlcXVpcmVtZW50cycsICdhYmlsaXRpZXMnLCAnY2VudHJhbENvbnRlbnQnXSxcclxuICAgICAgICAgIGZsYWdzOiBbJ2luY2x1ZGVJZHNPbmx5J11cclxuICAgICAgICB9KSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgIGlmICh0aGlzLnByb3BzLnNlYXJjaE1vZGUpIHtcclxuICAgICAgdGhpcy5zZXRTdGF0ZVByb21pc2VkKHsgaXNTZWFyY2hpbmc6IHRydWUgfSk7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zZWFyY2hSZXNwb25zZS5xdWVyeSgpO1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnNlYXJjaE1hcmtlZElkcyAmJiB0aGlzLnN0YXRlLnNlYXJjaE1hcmtlZElkcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlU2VhcmNoUmVzdWx0KHRoaXMuc3RhdGUuc2VhcmNoTWFya2VkSWRzKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIHNob3dFcnJvcihlcnIpO1xyXG4gICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2V0U3RhdGVQcm9taXNlZCh7IGlzU2VhcmNoaW5nOiBmYWxzZSB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIFxyXG4gICAgYXdhaXQgZmV0Y2goVGVtcGxhdGVzRmlsZUlkKS50aGVuKHJlc3AgPT4gcmVzcC5qc29uKCkpLnRoZW4oZGF0YSA9PlxyXG4gICAgICB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZVByb21pc2VkKHt0ZW1wbGF0ZXM6IGRhdGF9KTtcclxuICAgICAgICBjb25zdCB7dGVtcGxhdGVGaWxlfSA9IHRoaXMuc3RhdGUudGFzaztcclxuICAgICAgICBpZiAodGVtcGxhdGVGaWxlICYmIHRlbXBsYXRlRmlsZS5maWxlSWQpIHtcclxuICAgICAgICAgIHRoaXMudXBkYXRlVGVtcGxhdGVWaWV3KHRlbXBsYXRlRmlsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgdXBkYXRlU2VhcmNoTWFya2VkSWRzKHNlYXJjaE1hcmtlZElkczogc3RyaW5nW10pIHtcclxuICAgIGNvbnN0IHNldFN0YXRlUHJvbWlzZSA9IHRoaXMuc2V0U3RhdGVQcm9taXNlZCh7IHRhc2s6IG51bGwsIHNlYXJjaE1hcmtlZElkcywgcHJldmlld1Rhc2tDb250ZW50OiBudWxsIH0pO1xyXG4gICAgaWYgKCF0aGlzLnNlYXJjaFJlc3BvbnNlLnJlc3VsdCkge1xyXG4gICAgICBhd2FpdCB0aGlzLnNlYXJjaFJlc3BvbnNlLnByb21pc2U7XHJcbiAgICAgIC8vIFJlZnJlc2ggc2VhcmNoTWFya2VkSWRzIG5vdyBhcyB1c2VyIG1pZ2h0IGhhdmUgY2xpY2tlZCBhcm91bmQgd2hpbGUgd2FpdGluZyBmb3JcclxuICAgICAgLy8gdGFza3MgdG8gbG9hZC4uLlxyXG4gICAgICBhd2FpdCBzZXRTdGF0ZVByb21pc2U7IC8vIFNvIHdlIGtub3cgc3RhdGUgaGFzIGJlZW4gcmVmbGVjdGVkLi4uXHJcbiAgICAgIHNlYXJjaE1hcmtlZElkcyA9IHRoaXMuc3RhdGUuc2VhcmNoTWFya2VkSWRzO1xyXG4gICAgfVxyXG4gICAgYXdhaXQgdGhpcy51cGRhdGVTZWFyY2hSZXN1bHQoc2VhcmNoTWFya2VkSWRzKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHVwZGF0ZVNlYXJjaFJlc3VsdChzZWFyY2hNYXJrZWRJZHM6IHN0cmluZ1tdKSB7XHJcbiAgICBjb25zdCBhbGxUYXNrc0ZvclN1YmplY3QgPSBhd2FpdCB0aGlzLnNlYXJjaFJlc3BvbnNlLnF1ZXJ5KCk7XHJcblxyXG4gICAgY29uc3Qgc2VhcmNoUmVzdWx0ID0gYWxsVGFza3NGb3JTdWJqZWN0LmZpbHRlcih0ID0+XHJcbiAgICAgIHNlYXJjaE1hcmtlZElkcy5ldmVyeShpZCA9PlxyXG4gICAgICAgIHQua25vd2xlZGdlUmVxdWlyZW1lbnRzLnNvbWUoa3IgPT4ga3IuaWQgPT09IGlkKSB8fFxyXG4gICAgICAgIHQuYWJpbGl0aWVzLnNvbWUoYSA9PiBhLmlkID09PSBpZCkgfHxcclxuICAgICAgICB0LmNlbnRyYWxDb250ZW50LnNvbWUoYyA9PiBjLmlkID09PSBpZCkpKTtcclxuXHJcbiAgICB0aGlzLnNldFN0YXRlUHJvbWlzZWQoe1xyXG4gICAgICBzZWFyY2hSZXN1bHRcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgb25NYXJrQ2hhbmdlZChpZDogc3RyaW5nLCBpc01hcmtlZDogYm9vbGVhbikge1xyXG4gICAgY29uc3QgeyBzZWFyY2hNb2RlIH0gPSB0aGlzLnByb3BzO1xyXG4gICAgaWYgKHNlYXJjaE1vZGUpIHtcclxuICAgICAgY29uc3QgeyBzZWFyY2hNYXJrZWRJZHMgfSA9IHRoaXMuc3RhdGU7XHJcbiAgICAgIHRoaXMudXBkYXRlU2VhcmNoTWFya2VkSWRzKGlzTWFya2VkID9cclxuICAgICAgICBzZWFyY2hNYXJrZWRJZHMuY29uY2F0KGlkKSA6XHJcbiAgICAgICAgc2VhcmNoTWFya2VkSWRzLmZpbHRlcih4ID0+IHggIT09IGlkKSkuY2F0Y2goc2hvd0Vycm9yKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy51cGRhdGVMaW5rKGlkLCBpc01hcmtlZCk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVMaW5rKGlkOiBzdHJpbmcsIGxpbmtPclVubGluazogYm9vbGVhbikge1xyXG4gICAgY29uc3QgeyBjb3Vyc2UgfSA9IHRoaXMucHJvcHM7XHJcbiAgICBjb25zdCB7IHRhc2sgfSA9IHRoaXMuc3RhdGU7XHJcbiAgICAvLyBPbmUgb2YgdGhlIGZvbGxvd2luZyB0aHJlZSB3aWxsIGJlIGZvdW5kOlxyXG4gICAgY29uc3QgYWJpbGl0eSA9IGNvdXJzZS5hYmlsaXRpZXMuZmluZChhID0+IGEuaWQgPT09IGlkKTtcclxuICAgIGNvbnN0IGtub3dsZWRnZVJlcXVpcmVtZW50ID0gY291cnNlLmtub3dsZWRnZVJlcXVpcmVtZW50cy5maW5kKHIgPT4gci5pZCA9PT0gaWQpO1xyXG4gICAgY29uc3QgY2VudHJhbENvbnRlbnQgPSBjb3Vyc2UuY2VudHJhbENvbnRlbnQuZmluZChjYyA9PiBjYy5pZCA9PT0gaWQpO1xyXG5cclxuICAgIGNvbnN0IFtjb2xsZWN0aW9uUHJvcCwgaXRlbV0gPVxyXG4gICAgICBhYmlsaXR5ID9cclxuICAgICAgICBbXCJhYmlsaXRpZXNcIiwgYWJpbGl0eV0gOlxyXG4gICAgICAgIGtub3dsZWRnZVJlcXVpcmVtZW50ID9cclxuICAgICAgICAgIFtcImtub3dsZWRnZVJlcXVpcmVtZW50c1wiLCBrbm93bGVkZ2VSZXF1aXJlbWVudF0gOlxyXG4gICAgICAgICAgY2VudHJhbENvbnRlbnQgP1xyXG4gICAgICAgICAgICBbXCJjZW50cmFsQ29udGVudFwiLCBjZW50cmFsQ29udGVudF0gOlxyXG4gICAgICAgICAgICBbbnVsbCwgbnVsbF07XHJcblxyXG4gICAgaWYgKCFjb2xsZWN0aW9uUHJvcCkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiQ291bGQgbm90IGZpbmQgbWFya2VkIGlkIFwiICsgaWQpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdXBkYXRlZENvbGxlY3Rpb246IERvY3VtZW50W10gPSB0YXNrW2NvbGxlY3Rpb25Qcm9wXS5zbGljZSgpO1xyXG4gICAgY29uc3QgY3VycmVudFBvcyA9IHVwZGF0ZWRDb2xsZWN0aW9uLmZpbmRJbmRleChkb2MgPT4gZG9jLmlkID09PSBpZCk7XHJcbiAgICBpZiAobGlua09yVW5saW5rKSB7XHJcbiAgICAgIGlmIChjdXJyZW50UG9zIDwgMCkge1xyXG4gICAgICAgIHVwZGF0ZWRDb2xsZWN0aW9uLnB1c2goaXRlbSk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmIChjdXJyZW50UG9zID49IDApIHtcclxuICAgICAgICB1cGRhdGVkQ29sbGVjdGlvbi5zcGxpY2UoY3VycmVudFBvcywgMSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB1cGRhdGVkVGFzayA9IHsgLi4udGFzayB9O1xyXG4gICAgdXBkYXRlZFRhc2tbY29sbGVjdGlvblByb3BdID0gdXBkYXRlZENvbGxlY3Rpb247XHJcblxyXG4gICAgLy8gQ2xlYXIgbWlncmF0ZWRUZXh0cyBmcm9tIHRhc2suXHJcbiAgICAvLyBGaXJzdCBkZWVwIGNsb25lOlxyXG4gICAgaWYgKHRhc2sgJiYgdGFzay5taWdyYXRlZFRleHRzKSB7XHJcbiAgICAgIHVwZGF0ZWRUYXNrLm1pZ3JhdGVkVGV4dHMgPSB7Li4udGFzay5taWdyYXRlZFRleHRzfTtcclxuICAgICAgaWYgKHRhc2subWlncmF0ZWRUZXh0c1tjb2xsZWN0aW9uUHJvcF0pIHtcclxuICAgICAgICB1cGRhdGVkVGFzay5taWdyYXRlZFRleHRzW2NvbGxlY3Rpb25Qcm9wXSA9IHsuLi50YXNrLm1pZ3JhdGVkVGV4dHNbY29sbGVjdGlvblByb3BdfTtcclxuICAgICAgICAvLyBEZWxldGUgdGhlIGlkIHdpdGhpbiB0aGUgZGVlcCBjbG9uZTpcclxuICAgICAgICBkZWxldGUgdXBkYXRlZFRhc2subWlncmF0ZWRUZXh0c1tjb2xsZWN0aW9uUHJvcF1baWRdO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zZXRTdGF0ZVByb21pc2VkKHtcclxuICAgICAgdGFzazogdXBkYXRlZFRhc2tcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcblxyXG4gIGFzeW5jIHVwZGF0ZVRlbXBsYXRlVmlldyh0ZW1wbGF0ZUZpbGUpIHtcclxuICAgIGNvbnN0IGRyaXZlID0gbmV3IEdvb2dsZURyaXZlKCk7XHJcbiAgICBcclxuICAgIGlmICh0ZW1wbGF0ZUZpbGUgJiYgdGVtcGxhdGVGaWxlLmZpbGVJZC5zdGFydHNXaXRoKCd0OicpKSB7XHJcbiAgICAgIGNvbnN0IHRGaWxlSWQgPSB0ZW1wbGF0ZUZpbGUuZmlsZUlkLnJlcGxhY2UoJ3Q6JywgJycpO1xyXG4gICAgICBjb25zdCBmaWxlID0gIGF3YWl0IGRyaXZlLmdldEZpbGUodEZpbGVJZCk7XHJcbiAgICAgIGlmIChmaWxlKSB7XHJcbiAgICAgICAgZmlsZS5maWxlSWQgPSAndDonK2ZpbGUuZmlsZUlkO1xyXG4gICAgICAgIGNvbnN0IHRGaWxlID0gdGhpcy5zdGF0ZS50ZW1wbGF0ZXMuZmlsdGVyKHRwbCA9PiB0cGwuZmlsZUlkID09IHRGaWxlSWQpWzBdO1xyXG4gICAgICAgIGZpbGUubmFtZSA9IHRGaWxlPyB0RmlsZS50aXRsZSA6IGZpbGUubmFtZTtcclxuICAgICAgICB0ZW1wbGF0ZUZpbGUgPSB7ZmlsZUlkOiBmaWxlLmZpbGVJZCwgbmFtZTogZmlsZS5uYW1lLCBtaW1lVHlwZTogZmlsZS5taW1lVHlwZSwgbW9kaWZpZWRUaW1lOiBOdW1iZXIoZmlsZS5tb2RpaWZpZWRUaW1lKSwgdXJsOiBmaWxlLnVybCwgaWNvblVybDogZmlsZS50aHVtYm5haWxVcmx9O1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRlbXBsYXRlRmlsZSA9IG51bGw7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMudXBkYXRlVGFza09yQ3VzdG9taXphdGlvbihcInRlbXBsYXRlRmlsZVwiLCB7ICRzZXQ6IHRlbXBsYXRlRmlsZSB9KTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHNhdmUoKSB7XHJcbiAgICBjb25zdCB7IHRhc2ssIHRhc2tDdXN0b21pemF0aW9uIH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgY29uc3Qgd3JpdGVBY2Nlc3MgPSBoYXNXcml0ZUFjY2VzcyhlbnYuY3VycmVudFVzZXIsIHRhc2spO1xyXG4gICAgaWYgKHdyaXRlQWNjZXNzKSB7XHJcbiAgICAgIGlmICghdGFzay51cmwgJiYgIXRhc2suY29udGVudClcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoTGBVcHBnaWZ0ZW4gbcOlc3RlIGFudGluZ2VuIGhhIGVuIFVSTCBlbGxlciBldHQgaW5uZWjDpWxsYCk7XHJcbiAgICAgIGlmICh0YXNrLnVybCAmJiAhdmFsaWRVcmwuaXNVcmkodGFzay51cmwpKVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihMYEFuZ2l2ZW4gVVJMICcke3Rhc2sudXJsfScgw6RyIG9naWx0aWcuIERlbiBza2EgYsO2cmphIG1lZCBodHRwOiBlbGxlciBodHRwczpgKTtcclxuICAgICAgaWYgKHRoaXMucHJvcHMudGFzayAmJiB0aGlzLnByb3BzLnRhc2suaWQgIT09IHRhc2suaWQpIHtcclxuICAgICAgICAvLyBSZXBsYWNlIGV4aXN0aW5nIHRhc2sgd2l0aCBjb3B5XHJcbiAgICAgICAgYXdhaXQgdGhpcy5wcm9wcy5vblJlcGxhY2UodGhpcy5wcm9wcy50YXNrLmlkLCB0YXNrKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBVcGRhdGUgZXhpc3RpbmcgdGFza1xyXG4gICAgICAgIGF3YWl0IHRoaXMucHJvcHMub25TYXZlKHRhc2ssIG51bGwpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMuc2VhcmNoTW9kZSkge1xyXG4gICAgICBhd2FpdCB0aGlzLnByb3BzLm9uU2F2ZSh0YXNrLCB0YXNrQ3VzdG9taXphdGlvbik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAodGhpcy5wcm9wcy5jb3Vyc2UuaXNUZW1wbGF0ZSAmJiB0YXNrLiRtZXRhID09PSAnYWRkJylcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoTGBEdSBzYWtuYXIgYmVow7ZyaWdoZXQgZsO2ciBhdHQgc3BhcmEgbnlhIHZlcnNpb25lciBhdiB1cHBnaWZ0ZXIgaSBrdXJzbWFsbGVuYCk7XHJcblxyXG4gICAgICBhd2FpdCB0aGlzLnByb3BzLm9uU2F2ZUN1c3RvbWl6YXRpb24odGFza0N1c3RvbWl6YXRpb24pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgY29weVRhc2soKSB7XHJcbiAgICBjb25zdCB0YXNrQ29weSA9IHtcclxuICAgICAgLi4udGhpcy5zdGF0ZS50YXNrLFxyXG4gICAgICAuLi4odGhpcy5zdGF0ZS50YXNrQ3VzdG9taXphdGlvbiB8fCB7fSksXHJcbiAgICAgIGlkOiBjcmVhdGVVVUlEKCksXHJcbiAgICAgIGFjbDogdGhpcy5wcm9wcy5jb3Vyc2UuaXNUZW1wbGF0ZSA/IFtcclxuICAgICAgICBgcm9sZTpVU0VSOlJgIC8vIChPSyB0byBrZWVwIGJ1dCB0aGlzIGNoZWNrIG1pZ2h0IGJlY29tZSB1bm5lc2Nlc2FyeSBpZiB3ZSB0b3RhbGx5IHJlbW92ZSB0aGUgcG9zc2liaWxpdHkgdG8gZWRpdCB0ZW1wbGF0ZXMpIFRlbXBsYXRlIHRhc2tzIHNob3VsZCBub3QgYmUgcG9zc2libGUgdG8gbW9kaWZ5LiAoQW4gQURNSU4gY291bGQgYmVsb25nIHRvIGEgc2Nob29sISBPdGhlciBub24tYWRtaW5zIGF0IHRoYXQgc2Nob29sIHNob3VsZCBub3QgYmUgYWJsZSB0byBlZGl0IGl0KVxyXG4gICAgICBdIDogW1xyXG4gICAgICAgIGByb2xlOlVTRVI6UmAsXHJcbiAgICAgICAgYHNjaG9vbFJvbGU6JHtlbnYuY3VycmVudFVzZXIuc2Nob29sfS9FTVBMT1lFRTpTYFxyXG4gICAgICBdLFxyXG4gICAgICBzY2hvb2w6IHRoaXMucHJvcHMuY291cnNlLnNjaG9vbFxyXG4gICAgfTtcclxuICAgIHRhc2tDb3B5LiRtZXRhID0gJ2FkZCc7XHJcblxyXG4gICAgYXdhaXQgdGhpcy5zZXRTdGF0ZVByb21pc2VkKHtcclxuICAgICAgdGFzazogdGFza0NvcHksXHJcbiAgICAgIHRpdGxlOiBMYFJlZGlnZXJhIGtvcGllcmFkIHVwcGdpZnQgdGlsbCBcIiR7dGhpcy5wcm9wcy5tb2R1bGUubmFtZX1cImAsXHJcbiAgICAgIHRhc2tDdXN0b21pemF0aW9uOiB1bmRlZmluZWRcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0VGFza1Byb3A8VCBleHRlbmRzIGtleW9mIFRhc2s+KHRhc2tQcm9wOiBUKSA6IFRhc2tbVF0ge1xyXG4gICAgY29uc3Qge3Rhc2ssIHRhc2tDdXN0b21pemF0aW9ufSA9IHRoaXMuc3RhdGU7XHJcbiAgICBjb25zdCBjdXN0b21pemF0aW9uID0gdGFza0N1c3RvbWl6YXRpb24gJiYgdGFza0N1c3RvbWl6YXRpb25bdGFza1Byb3BdO1xyXG4gICAgcmV0dXJuIGN1c3RvbWl6YXRpb24gIT09IHVuZGVmaW5lZCA/XHJcbiAgICAgIGN1c3RvbWl6YXRpb24gOlxyXG4gICAgICB0YXNrW3Rhc2tQcm9wXSBhcyBhbnk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVUYXNrT3JDdXN0b21pemF0aW9uICh0YXNrUHJvcDoga2V5b2YgVGFzaywgdXBkYXRlcykge1xyXG4gICAgY29uc3Qge3Rhc2ssIHRhc2tDdXN0b21pemF0aW9ufSA9IHRoaXMuc3RhdGU7XHJcbiAgICBjb25zdCB3cml0ZUFjY2VzcyA9IHRhc2sgJiYgaGFzV3JpdGVBY2Nlc3MoZW52LmN1cnJlbnRVc2VyLCB0YXNrKTtcclxuICAgIGlmICh3cml0ZUFjY2VzcyAmJiAoIXRhc2tDdXN0b21pemF0aW9uIHx8IHRhc2tDdXN0b21pemF0aW9uW3Rhc2tQcm9wXSA9PT0gdW5kZWZpbmVkKSkge1xyXG4gICAgICBjb25zdCBuZXdUYXNrID0gey4uLnRhc2t9O1xyXG4gICAgICAobmV3VGFza1t0YXNrUHJvcF0gYXMgYW55KSA9IHVwZGF0ZSh0YXNrW3Rhc2tQcm9wXSwgdXBkYXRlcyk7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGVQcm9taXNlZCh7dGFzazogbmV3VGFza30pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgbmV3Q3VzdG9taXphdGlvbiA9IHsuLi50YXNrQ3VzdG9taXphdGlvbn07XHJcbiAgICAgIChuZXdDdXN0b21pemF0aW9uW3Rhc2tQcm9wXSBhcyBhbnkpID0gdXBkYXRlIChcclxuICAgICAgICBuZXdDdXN0b21pemF0aW9uW3Rhc2tQcm9wXSB8fCB0YXNrW3Rhc2tQcm9wXSxcclxuICAgICAgICB1cGRhdGVzXHJcbiAgICAgICk7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGVQcm9taXNlZCh7dGFza0N1c3RvbWl6YXRpb246IG5ld0N1c3RvbWl6YXRpb259KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHsgY291cnNlLCBtb2R1bGUsIG9uQ2FuY2VsLCBvbkRlbGV0ZSwgaWRzTm90Q292ZXJlZEJ5QW55VGFzaywgc2VhcmNoTW9kZSB9ID0gdGhpcy5wcm9wcztcclxuICAgIGNvbnN0IHsgdGFzaywgdGFza0N1c3RvbWl6YXRpb24sIHRpdGxlLCBzZWFyY2hSZXN1bHQsIHNlYXJjaE1hcmtlZElkcywgaXNTZWFyY2hpbmcsIHRlbXBsYXRlcyB9ID0gdGhpcy5zdGF0ZTtcclxuICAgIGNvbnN0IG1hcmtlZElkcyA9IHNlYXJjaE1vZGUgP1xyXG4gICAgICBzZWFyY2hNYXJrZWRJZHMgOlxyXG4gICAgICB0YXNrLmNlbnRyYWxDb250ZW50Lm1hcCh4ID0+IHguaWQpXHJcbiAgICAgICAgLmNvbmNhdCh0YXNrLmFiaWxpdGllcy5tYXAoeCA9PiB4LmlkKSlcclxuICAgICAgICAuY29uY2F0KHRhc2sua25vd2xlZGdlUmVxdWlyZW1lbnRzLm1hcCh4ID0+IHguaWQpKTtcclxuXHJcbiAgICBjb25zdCB3cml0ZUFjY2VzcyA9IHRhc2sgJiYgaGFzV3JpdGVBY2Nlc3MoZW52LmN1cnJlbnRVc2VyLCB0YXNrKTtcclxuICAgIGNvbnN0IHRhc2tVcmxWYWxpZCA9IHRhc2sgJiYgdmFsaWRVcmwuaXNVcmkodGFzay51cmwpO1xyXG4gICAgY29uc3Qge2ZlYXR1cmVzfSA9IHRoaXM7XHJcblxyXG4gICAgcmV0dXJuIDw+XHJcbiAgICAgIDxoMT57dGl0bGV9PC9oMT5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdi1sYXlvdXQgc3Ytc2tpcC1zcGFjZXIgc3YtY29sdW1uLTZcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInN2LWh0bWwtcG9ydGxldCBzdi1wb3J0bGV0IHN2LXNraXAtc3BhY2VyXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImtlZF9ib3hlZFwiPlxyXG4gICAgICAgICAgICA8aDM+e3NlYXJjaE1vZGUgP1xyXG4gICAgICAgICAgICAgIFwiRmlsdHJlcmEgcMOlIGt1bnNrYXBza3JhdlwiIDogd3JpdGVBY2Nlc3MgP1xyXG4gICAgICAgICAgICAgICAgXCJWw6RsaiBrdW5za2Fwc2tyYXZcIiA6XHJcbiAgICAgICAgICAgICAgICBcIkt1bnNrYXBza3JhdlwifTwvaDM+XHJcbiAgICAgICAgICAgIHtzZWFyY2hNb2RlID9cclxuICAgICAgICAgICAgICA8cD5cclxuICAgICAgICAgICAgICAgIE1hcmtlcmEgZGUga3Vuc2thcHNrcmF2IHNvbSB1cHBnaWZ0ZW4gbcOlc3RlIHTDpGNrYS5cclxuICAgICAgICAgICAgICA8L3A+IDogd3JpdGVBY2Nlc3MgJiZcclxuICAgICAgICAgICAgICA8cD5cclxuICAgICAgICAgICAgICAgIE1hcmtlcmEgZGUga3Vuc2thcHNrcmF2IHNvbSBkaW4gdXBwZ2lmdCB0w6Rja2VyLlxyXG4gICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICA8S25vd2xlZGdlTWF0cml4XHJcbiAgICAgICAgICAgICAga25vd2xlZGdlUmVxdWlyZW1lbnRzPXtjb3Vyc2Uua25vd2xlZGdlUmVxdWlyZW1lbnRzfVxyXG4gICAgICAgICAgICAgIG1hcmtlZElkcz17bWFya2VkSWRzfVxyXG4gICAgICAgICAgICAgIGlkc1RvTWFya05vdE9rPXtpZHNOb3RDb3ZlcmVkQnlBbnlUYXNrfVxyXG4gICAgICAgICAgICAgIG1hcmtNb2RlPXtzZWFyY2hNb2RlIHx8IHdyaXRlQWNjZXNzfVxyXG4gICAgICAgICAgICAgIG1pZ3JhdGVkSWRzPXt0YXNrICYmIHRhc2subWlncmF0ZWRUZXh0cyAmJiB0YXNrLm1pZ3JhdGVkVGV4dHMua25vd2xlZGdlUmVxdWlyZW1lbnRzfVxyXG4gICAgICAgICAgICAgIG9uTWFya0NoYW5nZWQ9e3RoaXMub25NYXJrQ2hhbmdlZC5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3YtaHRtbC1wb3J0bGV0IHN2LXBvcnRsZXRcIj5cclxuICAgICAgICAgIDxTZWxlY3RSZWxhdGVkRG9jc1xyXG4gICAgICAgICAgICBvcHRpb25zPXtjb3Vyc2UuYWJpbGl0aWVzfVxyXG4gICAgICAgICAgICB0aXRsZT17d3JpdGVBY2Nlc3MgfHwgc2VhcmNoTW9kZSA/IFwiVsOkbGogZsO2cm3DpWdvclwiIDogXCJGw7ZybcOlZ29yXCJ9XHJcbiAgICAgICAgICAgIG1hcmtlZElkcz17bWFya2VkSWRzfVxyXG4gICAgICAgICAgICBtYXJrTW9kZT17d3JpdGVBY2Nlc3MgfHwgc2VhcmNoTW9kZX1cclxuICAgICAgICAgICAgbWlncmF0ZWRJZHM9e3Rhc2sgJiYgdGFzay5taWdyYXRlZFRleHRzICYmIHRhc2subWlncmF0ZWRUZXh0cy5hYmlsaXRpZXN9XHJcbiAgICAgICAgICAgIG9uTWFya0NoYW5nZWQ9e3RoaXMub25NYXJrQ2hhbmdlZC5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInN2LWh0bWwtcG9ydGxldCBzdi1wb3J0bGV0XCI+XHJcbiAgICAgICAgICA8U2VsZWN0UmVsYXRlZERvY3NcclxuICAgICAgICAgICAgb3B0aW9ucz17Y291cnNlLmNlbnRyYWxDb250ZW50fVxyXG4gICAgICAgICAgICB0aXRsZT17d3JpdGVBY2Nlc3MgfHwgc2VhcmNoTW9kZSA/IFwiVsOkbGogY2VudHJhbHQgaW5uZWjDpWxsXCIgOiBcIkNlbnRyYWx0IGlubmVow6VsbFwifVxyXG4gICAgICAgICAgICBtYXJrZWRJZHM9e21hcmtlZElkc31cclxuICAgICAgICAgICAgbWFya01vZGU9e3dyaXRlQWNjZXNzIHx8IHNlYXJjaE1vZGV9XHJcbiAgICAgICAgICAgIG1pZ3JhdGVkSWRzPXt0YXNrICYmIHRhc2subWlncmF0ZWRUZXh0cyAmJiB0YXNrLm1pZ3JhdGVkVGV4dHMuY2VudHJhbENvbnRlbnR9XHJcbiAgICAgICAgICAgIG9uTWFya0NoYW5nZWQ9e3RoaXMub25NYXJrQ2hhbmdlZC5iaW5kKHRoaXMpfSAvPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgey8qIHshc2VhcmNoTW9kZSAmJiA8ZGl2IGNsYXNzTmFtZT1cInN2LWh0bWwtcG9ydGxldCBzdi1wb3J0bGV0XCI+PGRpdiBjbGFzc05hbWU9e1wib3BlbkNsb3NlIGxhcmdlclwiICsgKHRoaXMuc3RhdGUuZnV0dXJlQWJpbGl0aWVzT3BlbiA/IFwiIG9wZW5cIiA6IFwiXCIpfT5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm9wZW5IZWFkZXJcIiBvbkNsaWNrPXsoKSA9PiB0aGlzLnNldFN0YXRlUHJvbWlzZWQoeyBmdXR1cmVBYmlsaXRpZXNPcGVuOiAhdGhpcy5zdGF0ZS5mdXR1cmVBYmlsaXRpZXNPcGVuIH0pfT5cclxuICAgICAgICAgIHt3cml0ZUFjY2VzcyA/XHJcbiAgICAgICAgICAgIDxwPlbDpGxqIHl0dGVybGlnYXJlIGFsdGVybmF0aXY8L3A+IDpcclxuICAgICAgICAgICAgPHA+WXR0ZXJsaWdhcmUgYWx0ZXJuYXRpdjwvcD59XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJvcGVuQ29udGVudFwiPlxyXG4gICAgICAgICAgPGg0PkZyYW10aWRzZsO2cm3DpWdvcjwvaDQ+XHJcblxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YXNrQ29udGFpbmVyXCI+XHJcbiAgICAgICAgICAgIHtmdXR1cmVBYmlsaXRpZXMubWFwKGZhID0+IHtcclxuICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZCA9IHRhc2suZnV0dXJlQWJpbGl0aWVzLmluZGV4T2YoZmEpID49IDA7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbFwiIGtleT17ZmF9PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17XCJjaGVja0JveFwiICsgKHNlbGVjdGVkID8gXCIgY2hlY2tlZFwiIDogXCJcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17d3JpdGVBY2Nlc3MgPyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkVGFzayA9IHsgLi4udGFzayB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFRhc2suZnV0dXJlQWJpbGl0aWVzID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2suZnV0dXJlQWJpbGl0aWVzLmZpbHRlcihhID0+IGEgIT0gZmEpIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLmZ1dHVyZUFiaWxpdGllcy5jb25jYXQoZmEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZVByb21pc2VkKHsgdGFzazogdXBkYXRlZFRhc2sgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSA6IHVuZGVmaW5lZH0gLz5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj57ZmF9XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgIDwvZGl2PjwvZGl2Pn0gKi99XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInN2LWxheW91dCBzdi1jb2x1bW4tNlwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3YtaHRtbC1wb3J0bGV0IHN2LXBvcnRsZXQgc3Ytc2tpcC1zcGFjZXJcIj5cclxuICAgICAgICAgIHtpc1NlYXJjaGluZyAmJiA8cD48U3Bpbm5lciAvPiBMYWRkYXIgdXBwZ2lmdGVyLi4uPC9wPn1cclxuICAgICAgICAgIHtzZWFyY2hSZXN1bHQgPyBcclxuICAgICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICAqIFNlYXJjaCBSZXN1bHRzIEZyYWdlbnRcclxuICAgICAgICAgICAgICAqIFxyXG4gICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgPD5cclxuICAgICAgICAgICAgPFNlYXJjaFJlc3VsdHNcclxuICAgICAgICAgICAgICBzZWFyY2hNYXJrZWRJZHM9e3NlYXJjaE1hcmtlZElkc31cclxuICAgICAgICAgICAgICBzZWFyY2hSZXN1bHQ9e3NlYXJjaFJlc3VsdH1cclxuICAgICAgICAgICAgICB0YXNrPXt0YXNrfVxyXG4gICAgICAgICAgICAgIHdyaXRlQWNjZXNzPXt3cml0ZUFjY2Vzc31cclxuICAgICAgICAgICAgICB0YXNrQ3VzdG9taXphdGlvbj17dGFza0N1c3RvbWl6YXRpb259XHJcbiAgICAgICAgICAgICAgZWRpdFRhc2s9e3RoaXN9IC8+XHJcblxyXG4gICAgICAgICAgICB7dGhpcy5zdGF0ZS5wcmV2aWV3VGFza0NvbnRlbnQgPyBcclxuICAgICAgICAgICAgICA8ZGl2IGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXt7X19odG1sOiB0aGlzLnN0YXRlLnByZXZpZXdUYXNrQ29udGVudH19IC8+XHJcbiAgICAgICAgICAgIDogdGFzayAmJiA8UHJldmlld2FibGVUYXNrRmllbGRzXHJcbiAgICAgICAgICAgICAgd3JpdGVBY2Nlc3M9e3dyaXRlQWNjZXNzfVxyXG4gICAgICAgICAgICAgIHRhc2s9e3Rhc2t9XHJcbiAgICAgICAgICAgICAgdGFza0N1c3RvbWl6YXRpb249e3Rhc2tDdXN0b21pemF0aW9ufVxyXG4gICAgICAgICAgICAgIGVkaXRUYXNrPXt0aGlzfSAvPn1cclxuXHJcbiAgICAgICAgICAgIHt0YXNrICYmIDxUYXNrU3RhdHVzRnJhZ21lbnQgdGFzaz17dGFza30gLz59XHJcbiAgICAgICAgICA8Lz4gOiBcclxuXHJcbiAgICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAgKiBFZGl0IFRhc2tzIEZyYWdtZW50XHJcbiAgICAgICAgICAgICAgKiBcclxuICAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgIDw+XHJcbiAgICAgICAgICAgIHt0YXNrICYmIDxCYXNpY0VkaXRhYmxlVGFza0ZpZWxkc1xyXG4gICAgICAgICAgICAgIHRhc2s9e3Rhc2t9XHJcbiAgICAgICAgICAgICAgY291cnNlPXtjb3Vyc2V9XHJcbiAgICAgICAgICAgICAgd3JpdGVBY2Nlc3M9e3dyaXRlQWNjZXNzfVxyXG4gICAgICAgICAgICAgIGZlYXR1cmVzPXtmZWF0dXJlc31cclxuICAgICAgICAgICAgICBlZGl0VGFzaz17dGhpc31cclxuICAgICAgICAgICAgICB0ZW1wbGF0ZXM9e3RlbXBsYXRlc30gLz59XHJcblxyXG4gICAgICAgICAgICB7dGFzayAmJiA8UHJldmlld2FibGVUYXNrRmllbGRzXHJcbiAgICAgICAgICAgICAgd3JpdGVBY2Nlc3M9e3dyaXRlQWNjZXNzfVxyXG4gICAgICAgICAgICAgIHRhc2s9e3Rhc2t9XHJcbiAgICAgICAgICAgICAgdGFza0N1c3RvbWl6YXRpb249e3Rhc2tDdXN0b21pemF0aW9ufVxyXG4gICAgICAgICAgICAgIGVkaXRUYXNrPXt0aGlzfSAvPn1cclxuXHJcbiAgICAgICAgICAgIHt0YXNrICYmIDxUYXNrU3RhdHVzRnJhZ21lbnQgdGFzaz17dGFza30gLz59XHJcbiAgICAgICAgICA8Lz59XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAge3Rhc2sgJiYgPGRpdiBjbGFzc05hbWU9XCJzdi1odG1sLXBvcnRsZXQgc3YtcG9ydGxldFwiPlxyXG4gICAgICAgICAgPGhyIC8+XHJcbiAgICAgICAgICA8YnIgLz5cclxuICAgICAgICAgIDxTYXZlT3JDYW5jZWxCdXR0b25zIHdyaXRlQWNjZXNzPXt3cml0ZUFjY2Vzc30gZWRpdFRhc2s9e3RoaXN9IC8+XHJcbiAgICAgICAgPC9kaXY+fVxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvPlxyXG4gIH1cclxufVxyXG5cclxuIiwiZXhwb3J0ICogZnJvbSAnLi9lZGl0LXRhc2snO1xyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IFRhc2sgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IEVkaXRUYXNrIH0gZnJvbSAnLi9lZGl0LXRhc2snO1xyXG5pbXBvcnQgeyBFZGl0YWJsZVJlc291cmNlTGlzdCB9IGZyb20gJy4uLy4uL3N1Yi1jb21wb25lbnRzL2VkaXRhYmxlLXJlc291cmNlLWxpc3QnO1xyXG5pbXBvcnQgeyBUYXNrQ29udGVudEZyYWdtZW50IH0gZnJvbSAnLi90YXNrLWNvbnRlbnQtZnJhZ21lbnQnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICB3cml0ZUFjY2VzczogYm9vbGVhbjtcclxuICB0YXNrOiBUYXNrO1xyXG4gIHRhc2tDdXN0b21pemF0aW9uOiBQYXJ0aWFsPFRhc2s+O1xyXG4gIGVkaXRUYXNrOiBFZGl0VGFzaztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFByZXZpZXdhYmxlVGFza0ZpZWxkcyh7d3JpdGVBY2Nlc3MsIHRhc2ssIHRhc2tDdXN0b21pemF0aW9uLCBlZGl0VGFza306IFByb3BzKSB7XHJcbiAgcmV0dXJuIDw+XHJcbiAgICA8PlxyXG4gICAgICA8aDM+VXBwZ2lmdGVucyBsw6RyYW5kZW3DpWw8L2gzPlxyXG4gICAgICA8ZGl2PlxyXG4gICAgICAgIDx0ZXh0YXJlYVxyXG4gICAgICAgICAgY2xhc3NOYW1lPVwiaW5wdXRUZXh0Qm94IGxlYXJuaW5nLWdvYWwtYm94XCJcclxuICAgICAgICAgIGRpc2FibGVkPXshd3JpdGVBY2Nlc3N9XHJcbiAgICAgICAgICB2YWx1ZT17dGFzay5sZWFybmluZ0dvYWx9XHJcbiAgICAgICAgICBvbkNoYW5nZT17ZXYgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBuZXdUYXNrID0geyAuLi50YXNrIH07XHJcbiAgICAgICAgICAgIG5ld1Rhc2subGVhcm5pbmdHb2FsID0gZXYudGFyZ2V0LnZhbHVlO1xyXG4gICAgICAgICAgICBlZGl0VGFzay5zZXRTdGF0ZVByb21pc2VkKHsgdGFzazogbmV3VGFzayB9KTtcclxuICAgICAgICAgIH19XHJcbiAgICAgICAgLz5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8Lz5cclxuICAgIDxiciAvPlxyXG4gICAgPD5cclxuICAgICAge3Rhc2tDdXN0b21pemF0aW9uICYmIHRhc2tDdXN0b21pemF0aW9uLnJlc291cmNlcyA/XHJcbiAgICAgICAgPGgzPlJlc3Vyc2VyIGbDtnIgdXBwZ2lmdGVuIChtb2RpZmllcmFkIGbDtnIgZGVubmEga3Vyc2luc3RhbnMpPC9oMz4gOlxyXG4gICAgICAgIDxoMz5SZXN1cnNlciBrb3BwbGFkZSB0aWxsIHVwcGdpZnRlbjwvaDM+fVxyXG5cclxuICAgICAgPEVkaXRhYmxlUmVzb3VyY2VMaXN0XHJcbiAgICAgICAgcmVzb3VyY2VzPXtcclxuICAgICAgICAgICh0YXNrQ3VzdG9taXphdGlvbiAmJiB0YXNrQ3VzdG9taXphdGlvbi5yZXNvdXJjZXMpIHx8IHRhc2sucmVzb3VyY2VzfVxyXG4gICAgICAgIGhvc3Q9e2VkaXRUYXNrLnByb3BzLmhvc3R9XHJcbiAgICAgICAgb25VcGRhdGU9e3Jlc291cmNlVXBkYXRlcyA9PiB7XHJcbiAgICAgICAgICBlZGl0VGFzay51cGRhdGVUYXNrT3JDdXN0b21pemF0aW9uKFwicmVzb3VyY2VzXCIsIHJlc291cmNlVXBkYXRlcyk7XHJcbiAgICAgICAgfX0gLz5cclxuICAgIDwvPlxyXG4gIDwvPjtcclxufSIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgRWRpdFRhc2sgfSBmcm9tICcuL2VkaXQtdGFzayc7XHJcbmltcG9ydCB7IHNob3dFcnJvciB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBTYXZlT3JDYW5jZWxCdXR0b25zKHt3cml0ZUFjY2VzcywgZWRpdFRhc2t9OiB7d3JpdGVBY2Nlc3M6IGJvb2xlYW4sIGVkaXRUYXNrOiBFZGl0VGFza30pIHtcclxuICByZXR1cm4gPFJlYWN0LkZyYWdtZW50PlxyXG4gICAgICB7ISFlZGl0VGFzay5wcm9wcy5vbkRlbGV0ZSAmJiA8ZGl2IGNsYXNzTmFtZT1cImJ0biBidG4td2FybmluZyBidG4tbGFyZ2UgcHVsbC1yaWdodFwiIG9uQ2xpY2s9eygpID0+IGVkaXRUYXNrLnByb3BzLm9uRGVsZXRlKCl9PlxyXG4gICAgICAgICAgVGEgYm9ydCBmcsOlbiBrdXJzbW9kdWxcclxuICAgICAgPC9kaXY+fVxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInB1bGwtcmlnaHRcIj4mbmJzcDs8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJidG4gYnRuLXdhcm5pbmcgYnRuLWxhcmdlIHB1bGwtcmlnaHRcIiBvbkNsaWNrPXsoKSA9PiBlZGl0VGFzay5wcm9wcy5vbkNhbmNlbCgpfT5cclxuICAgICAgICAgIEF2YnJ5dFxyXG4gICAgICA8L2Rpdj5cclxuXHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnRuIGJ0bi1sYXJnZVwiIG9uQ2xpY2s9eygpID0+IGVkaXRUYXNrLnNhdmUoKS5jYXRjaChzaG93RXJyb3IpfT5cclxuICAgICAgICAgIFNwYXJhXHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICB7IXdyaXRlQWNjZXNzICYmIDxkaXYgY2xhc3NOYW1lPVwiYnRuIGJ0bi1sYXJnZVwiIG9uQ2xpY2s9eygpID0+IGVkaXRUYXNrLmNvcHlUYXNrKCkuY2F0Y2goc2hvd0Vycm9yKX0+XHJcbiAgICAgICAgICBTa2FwYSBrb3BpYSBhdiBkZW4gaMOkciB1cHBnaWZ0ZW5cclxuICAgICAgPC9kaXY+fVxyXG4gIDwvUmVhY3QuRnJhZ21lbnQ+O1xyXG59XHJcblxyXG4iLCJpbXBvcnQgeyBUYXNrIH0gZnJvbSBcImtlZGJhY2tlbmQvbW9kZWxzXCI7XHJcbmltcG9ydCB7IEVkaXRUYXNrIH0gZnJvbSBcIi4vZWRpdC10YXNrXCI7XHJcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgeyBmaW5kRE9NTm9kZSB9IGZyb20gJ3JlYWN0LWRvbSc7XHJcbmltcG9ydCB7IHNob3J0UGVyc29uTmFtZUZvcm1hdCwgc2hvcnREYXRlRm9ybWF0IH0gZnJvbSBcIi4uLy4uL3V0aWxzXCI7XHJcbmltcG9ydCB7IFByZXZpZXdhYmxlVGFza0ZpZWxkcyB9IGZyb20gJy4vcHJldmlld2FibGUtdGFzay1maWVsZHMnO1xyXG5pbXBvcnQgeyBTYXZlT3JDYW5jZWxCdXR0b25zIH0gZnJvbSAnLi9zYXZlLW9yLWNhbmNlbC1idXR0b25zJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgc2VhcmNoTWFya2VkSWRzOiBzdHJpbmdbXTtcclxuICBzZWFyY2hSZXN1bHQ6IFRhc2tbXTtcclxuICB0YXNrOiBUYXNrO1xyXG4gIHdyaXRlQWNjZXNzOiBib29sZWFuO1xyXG4gIHRhc2tDdXN0b21pemF0aW9uOiBQYXJ0aWFsPFRhc2s+O1xyXG4gIGVkaXRUYXNrOiBFZGl0VGFzaztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFNlYXJjaFJlc3VsdHMgKHtzZWFyY2hNYXJrZWRJZHMsIHNlYXJjaFJlc3VsdCwgdGFzaywgZWRpdFRhc2ssIHdyaXRlQWNjZXNzLCB0YXNrQ3VzdG9taXphdGlvbn06IFByb3BzKSB7XHJcbiAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9e1widGFzay1zZWFyY2gtcmVzdWx0XCIgKyAoIWVkaXRUYXNrLnN0YXRlLnRhc2sgJiYgIWVkaXRUYXNrLnN0YXRlLnByZXZpZXdUYXNrQ29udGVudCA/IFwiIGZpeGVkXCIgOiBcIlwiKX0+XHJcbiAgICAgICAge3NlYXJjaE1hcmtlZElkcy5sZW5ndGggPT09IDAgP1xyXG4gICAgICAgICAgICA8aDI+U2FtdGxpZ2EgdXBwZ2lmdGVyIGbDtnIga3Vyc2VuPC9oMj4gOlxyXG4gICAgICAgICAgICA8aDI+VXBwZ2lmdGVyIHNvbSB0w6Rja2VyIHZhbGRhIGZpbHRlcjwvaDI+fVxyXG4gICAgICAgIDx0YWJsZT48dGJvZHk+XHJcbiAgICAgICAgICAgIHtzZWFyY2hSZXN1bHRcclxuICAgICAgICAgICAgICAuZmlsdGVyKHRhc2sgP1xyXG4gICAgICAgICAgICAgICAgZm91bmRUYXNrID0+IGZvdW5kVGFzay5pZCA9PT0gdGFzay5pZCA6XHJcbiAgICAgICAgICAgICAgICAoKSA9PiB0cnVlKVxyXG4gICAgICAgICAgICAgIC5tYXAoZm91bmRUYXNrID0+IDxSZWFjdC5GcmFnbWVudCBrZXk9e2ZvdW5kVGFzay5pZH0+XHJcbiAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHRhYkluZGV4PXsxfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17XCJjaGVja0JveFwiICsgKHRhc2sgJiYgdGFzay5pZCA9PT0gZm91bmRUYXNrLmlkID8gXCIgY2hlY2tlZFwiIDogXCJcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCk9PnRvZ2dsZUNob29zZVRhc2soZm91bmRUYXNrKSB9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90ZD48dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtmb3VuZFRhc2suY29udGVudCA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiI1wiIG9uQ2xpY2s9e2V2ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGVDaG9vc2VUYXNrKGZvdW5kVGFzayk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfT57Zm91bmRUYXNrLm5hbWV9PC9hPiA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPXtmb3VuZFRhc2sudXJsfSB0YXJnZXQ9XCJfYmxhbmtcIj57Zm91bmRUYXNrLm5hbWV9PC9hPn1cclxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgIHtzaG9ydFBlcnNvbk5hbWVGb3JtYXQoZm91bmRUYXNrLm1vZGlmaWVkQnkubmFtZSl9XHJcbiAgICAgICAgICAgICAgICAgICAgPC90ZD48dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICB7Zm91bmRUYXNrLnNjaG9vbCB8fCBcIlN0YW5kYXJkXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgPC90ZD48dGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtzaG9ydERhdGVGb3JtYXQoZm91bmRUYXNrLm1vZGlmaWVkRGF0ZSl9XHJcbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgICAgICB7Lyp0YXNrICYmIHRhc2suaWQgPT09IGZvdW5kVGFzay5pZCAmJiA8dHI+PHRkIGNvbFNwYW49ezR9PlxyXG4gICAgICAgICAgICAgICAgICB7ZWRpdFRhc2suc3RhdGUucHJldmlld1Rhc2tDb250ZW50ID8gXHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBkYW5nZXJvdXNseVNldElubmVySFRNTD17e19faHRtbDogZWRpdFRhc2suc3RhdGUucHJldmlld1Rhc2tDb250ZW50fX0gLz5cclxuICAgICAgICAgICAgICAgICAgOiA8UHJldmlld2FibGVUYXNrRmllbGRzXHJcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVBY2Nlc3M9e3dyaXRlQWNjZXNzfVxyXG4gICAgICAgICAgICAgICAgICAgIHRhc2s9e3Rhc2t9XHJcbiAgICAgICAgICAgICAgICAgICAgdGFza0N1c3RvbWl6YXRpb249e3Rhc2tDdXN0b21pemF0aW9ufVxyXG4gICAgICAgICAgICAgICAgICAgIGVkaXRUYXNrPXtlZGl0VGFza30gLz59XHJcbiAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICA8aHIgLz5cclxuICAgICAgICAgICAgICAgICAgPGJyIC8+XHJcbiAgICAgICAgICAgICAgICAgIDxTYXZlT3JDYW5jZWxCdXR0b25zIHdyaXRlQWNjZXNzPXt3cml0ZUFjY2Vzc30gZWRpdFRhc2s9e2VkaXRUYXNrfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgIDwvdGQ+PC90cj4qL31cclxuICAgICAgICAgICAgPC9SZWFjdC5GcmFnbWVudD4pfVxyXG4gICAgICAgIDwvdGJvZHk+PC90YWJsZT5cclxuICAgICAgICA8YnIgLz5cclxuICAgICAgICA8aHIgLz5cclxuICAgIDwvZGl2PjtcclxuXHJcbiAgZnVuY3Rpb24gdG9nZ2xlQ2hvb3NlVGFzayhmb3VuZFRhc2s6IFRhc2spIHtcclxuICAgIGlmICh0YXNrICYmIHRhc2suaWQgPT09IGZvdW5kVGFzay5pZCkge1xyXG4gICAgICBlZGl0VGFzay51cGRhdGVTZWFyY2hNYXJrZWRJZHMoc2VhcmNoTWFya2VkSWRzKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBmaW5kRE9NTm9kZShlZGl0VGFzaykucGFyZW50RWxlbWVudC5zY3JvbGxUb3AgPSAwO1xyXG4gICAgICBlZGl0VGFzay5zZXRTdGF0ZVByb21pc2VkKHsgdGFzazogZm91bmRUYXNrLCBwcmV2aWV3VGFza0NvbnRlbnQ6IG51bGwgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgVGFzayB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgV3lzaXd5ZyB9IGZyb20gJy4uLy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy93eXNpd3lnJztcclxuaW1wb3J0IGFjdGlvbnNfc3dlZGlzaCBmcm9tICcuLi8uLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvd3lzaXd5Zy9hY3Rpb25zLXN2JztcclxuaW1wb3J0IHsgRWRpdFRhc2sgfSBmcm9tICcuL2VkaXQtdGFzayc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gVGFza0NvbnRlbnRGcmFnbWVudCh7d3JpdGVBY2Nlc3MsIHRhc2ssIGVkaXRUYXNrfToge3dyaXRlQWNjZXNzOiBib29sZWFuLCB0YXNrOiBUYXNrLCBlZGl0VGFzazogRWRpdFRhc2t9KSB7XHJcbiAgcmV0dXJuIDxXeXNpd3lnIGFjdGlvbnM9e1tcclxuICAgICAgICAgIFwiYm9sZFwiLFxyXG4gICAgICAgICAgXCJpdGFsaWNcIixcclxuICAgICAgICAgIFwidW5kZXJsaW5lXCIsXHJcbiAgICAgICAgICBcInN0cmlrZXRocm91Z2hcIixcclxuICAgICAgICAgIFwiaGVhZGluZzJcIixcclxuICAgICAgICAgIFwiaGVhZGluZzNcIixcclxuICAgICAgICAgIFwib2xpc3RcIixcclxuICAgICAgICAgIFwidWxpc3RcIixcclxuICAgICAgICAgIFwib3V0ZGVudFwiLFxyXG4gICAgICAgICAgXCJpbmRlbnRcIixcclxuICAgICAgICAgIFwibGluZVwiLFxyXG4gICAgICAgICAgXCJsaW5rXCIsXHJcbiAgICAgICAgICBcImltYWdlXCJcclxuICAgICAgXX0gZGVmYXVsdEFjdGlvbnM9e2FjdGlvbnNfc3dlZGlzaH0gcmVhZE9ubHk9eyF3cml0ZUFjY2Vzc30gaHRtbD17dGFzay5jb250ZW50fSBvbkNoYW5nZT17aHRtbCA9PiB7XHJcbiAgICAgICAgICBjb25zdCBuZXdUYXNrID0geyAuLi50YXNrIH07XHJcbiAgICAgICAgICBuZXdUYXNrLmNvbnRlbnQgPSBodG1sO1xyXG4gICAgICAgICAgZWRpdFRhc2suc2V0U3RhdGUoeyB0YXNrOiBuZXdUYXNrIH0pO1xyXG4gICAgICB9IH0gLz5cclxufVxyXG5cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQge1Rhc2ssIENvdXJzZX0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBPcGVuQ2xvc2VCb3ggfSBmcm9tICcuLi8uLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvb3Blbi1jbG9zZS1ib3gnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICB0YXNrOiBUYXNrO1xyXG4gIGNvdXJzZTogQ291cnNlO1xyXG4gIHVwZGF0ZUxpbms6IChpZDogc3RyaW5nLCBsaW5rT3JVbmxpbms6IGJvb2xlYW4pID0+IHZvaWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBUYXNrTWlncmF0aW9uQm94IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzPiB7XHJcbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7dGFzaywgY291cnNlLCB1cGRhdGVMaW5rfSA9IHRoaXMucHJvcHM7XHJcbiAgICBpZiAoIXRhc2subWlncmF0ZWRUZXh0cykgcmV0dXJuIDw+Jm5ic3A7PC8+O1xyXG4gICAgY29uc3Qge2FiaWxpdGllcywgY2VudHJhbENvbnRlbnQsIGtub3dsZWRnZVJlcXVpcmVtZW50c30gPSB0YXNrLm1pZ3JhdGVkVGV4dHM7XHJcbiAgICBjb25zdCBrcnMgPSBPYmplY3Qua2V5cyhrbm93bGVkZ2VSZXF1aXJlbWVudHMgfHwge30pLm1hcChpZCA9PiAoe1xyXG4gICAgICAuLi5jb3Vyc2Uua25vd2xlZGdlUmVxdWlyZW1lbnRzLmZpbmQodCA9PiB0LmlkID09PSBpZCksXHJcbiAgICAgIC4uLmtub3dsZWRnZVJlcXVpcmVtZW50c1tpZF1cclxuICAgIH0pKS8vLmZpbHRlcigoe25hbWV9KSA9PiAhIW5hbWUpO1xyXG4gICAgY29uc3Qga3JBID0ge3RpdGxlOiBcIlVwcGRhdGVyYXQga3Vuc2thcHNrcmF2IGbDtnIgYmV0eWdldCBBXCIsIHR5cGU6IFwia25vd2xlZGdlUmVxdWlyZW1lbnRzXCIsIGl0ZW1zOiBrcnMuZmlsdGVyKGtyID0+IGtyLmdyYWRlU3RlcCA9PT0gJ0EnKX07XHJcbiAgICBjb25zdCBrckMgPSB7dGl0bGU6IFwiVXBwZGF0ZXJhdCBLdW5za2Fwc2tyYXYgZsO2ciBiZXR5Z2V0IENcIiwgdHlwZTogXCJrbm93bGVkZ2VSZXF1aXJlbWVudHNcIiwgaXRlbXM6IGtycy5maWx0ZXIoa3IgPT4ga3IuZ3JhZGVTdGVwID09PSAnQycpfTtcclxuICAgIGNvbnN0IGtyRSA9IHt0aXRsZTogXCJVcHBkYXRlcmF0IGt1bnNrYXBza3JhdiBmw7ZyIGJldHlnZXQgRVwiLCB0eXBlOiBcImtub3dsZWRnZVJlcXVpcmVtZW50c1wiLCBpdGVtczoga3JzLmZpbHRlcihrciA9PiBrci5ncmFkZVN0ZXAgPT09ICdFJyl9O1xyXG4gICAgY29uc3QgYWJzID0ge3RpdGxlOiBcIlVwcGRhdGVyYWRlIGbDtnJtw6Vnb3JcIiwgdHlwZTogXCJhYmlsaXRpZXNcIiwgaXRlbXM6IE9iamVjdC5rZXlzKGFiaWxpdGllcyB8fCB7fSkubWFwKGlkID0+ICh7XHJcbiAgICAgIC4uLmNvdXJzZS5hYmlsaXRpZXMuZmluZCh0ID0+IHQuaWQgPT09IGlkKSxcclxuICAgICAgLi4uYWJpbGl0aWVzW2lkXX0pXHJcbiAgICApfS8vLmZpbHRlcigoe25hbWV9KSA9PiAhIW5hbWUpfTtcclxuICAgIGNvbnN0IGNjcyA9IHt0aXRsZTogXCJVcHBkYXRlcmF0IGNlbnRyYWx0IGlubmVow6VsbFwiLCB0eXBlOiBcImNlbnRyYWxDb250ZW50XCIsIGl0ZW1zOiBPYmplY3Qua2V5cyhjZW50cmFsQ29udGVudCB8fCB7fSkubWFwKGlkID0+ICh7XHJcbiAgICAgIC4uLmNvdXJzZS5jZW50cmFsQ29udGVudC5maW5kKGNjID0+IGNjLmlkID09IGlkKSxcclxuICAgICAgLi4uY2VudHJhbENvbnRlbnRbaWRdXHJcbiAgICAgIH0pXHJcbiAgICApfS8vLmZpbHRlcigoe25hbWV9KSA9PiAhIW5hbWUpfTtcclxuICAgIGNvbnN0IHRhYmxlc1RvU2hvdyA9IFtrckEsIGtyQywga3JFLCBjY3MsIGFic10uZmlsdGVyKGJveEluZm8gPT4gYm94SW5mby5pdGVtcy5sZW5ndGggPiAwKTtcclxuICAgIGlmICh0YWJsZXNUb1Nob3cubGVuZ3RoID09PSAwKSByZXR1cm4gPD4mbmJzcDs8Lz47XHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgPE9wZW5DbG9zZUJveCBjbGFzc05hbWU9XCJsYXJnZXJcIiB0aXRsZT17PGRpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIndhcm5pbmdGbGFnXCI+XHJcbiAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1leGNsYW1hdGlvbi10cmlhbmdsZVwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8cD5VcHBkYXRlcmFkZSBmb3JtdWxlcmluZ2FyIGZyw6VuIFNrb2x2ZXJrZXQ8L3A+XHJcbiAgICAgIDwvZGl2Pn0+XHJcbiAgICAgICAge3RhYmxlc1RvU2hvdy5tYXAoKHt0aXRsZSwgdHlwZSwgaXRlbXN9KSA9PiA8ZGl2IGtleT17dGl0bGV9PlxyXG4gICAgICAgICAgPGg1Pnt0aXRsZX08L2g1PlxyXG4gICAgICAgICAgPHRhYmxlPlxyXG4gICAgICAgICAgICA8dGhlYWQ+XHJcbiAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgPHRoIHN0eWxlPXt7d2lkdGg6IFwiNDAlXCJ9fT5VcnNwcnVuZ2xpZyBmb3JtdWxlcmluZzwvdGg+XHJcbiAgICAgICAgICAgICAgICA8dGggc3R5bGU9e3t3aWR0aDogXCI0MCVcIn19PlNrb2x2ZXJrZXRzIG55YSBmb3JtdWxlcmluZzwvdGg+XHJcbiAgICAgICAgICAgICAgICA8dGg+VMOkY2tlciB1cHBnaWZ0ZW4gZGVuIG55YSBmb3JtdWxlcmluZ2VuPzwvdGg+XHJcbiAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgPC90aGVhZD5cclxuICAgICAgICAgICAgPHRib2R5PlxyXG4gICAgICAgICAgICAgIHtpdGVtcy5tYXAoaXRlbSA9PiA8dHIga2V5PXtpdGVtLmlkfT5cclxuICAgICAgICAgICAgICAgIDx0ZCBkYW5nZXJvdXNseVNldElubmVySFRNTD17e19faHRtbDogaXRlbS5vbGRUZXh0fX0gLz5cclxuICAgICAgICAgICAgICAgIDx0ZCBkYW5nZXJvdXNseVNldElubmVySFRNTD17e19faHRtbDogaXRlbS5uYW1lfX0gLz5cclxuICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKT0+dXBkYXRlTGluayhpdGVtLmlkLCB0cnVlKX0+SmEgLSBiZWjDpWxsIGtvcHBsaW5nZW48L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKT0+dXBkYXRlTGluayhpdGVtLmlkLCBmYWxzZSl9Pk5laiAtIHRhIGJvcnQga29wcGxpbmdlbjwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICA8L3RyPil9XHJcbiAgICAgICAgICAgIDwvdGJvZHk+XHJcbiAgICAgICAgICA8L3RhYmxlPlxyXG4gICAgICAgIDwvZGl2Pil9XHJcbiAgICAgIDwvT3BlbkNsb3NlQm94PlxyXG5cclxuICAgIClcclxuICB9XHJcbn0iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IGR0Rm9ybWF0IH0gZnJvbSAnLi4vLi4vdXRpbHMnO1xyXG5pbXBvcnQgeyBUYXNrIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFRhc2tTdGF0dXNGcmFnbWVudCh7dGFza306IHt0YXNrOiBUYXNrfSkge1xyXG4gIHJldHVybiA8PlxyXG4gICAgICA8aDM+VXBwZ2lmdGVucyBzdGF0dXM8L2gzPlxyXG5cclxuICAgICAge3Rhc2suY3JlYXRlZEJ5ICYmIHRhc2suY3JlYXRlZERhdGUgJiYgPHA+XHJcbiAgICAgICAgICBVcHBnaWZ0ZW4gc2thcGFkZXMge2R0Rm9ybWF0KHRhc2suY3JlYXRlZERhdGUpfSBhdiA8c3Ryb25nPnt0YXNrLmNyZWF0ZWRCeS5uYW1lfTwvc3Ryb25nPi5cclxuICAgICAgPC9wPn1cclxuICAgICAge3Rhc2subW9kaWZpZWRCeSAmJiB0YXNrLm1vZGlmaWVkRGF0ZSAmJiA8cD5cclxuICAgICAgICAgIFVwcGdpZnRlbiByZWRpZ2VyYWRlcyBzZW5hc3Qge2R0Rm9ybWF0KHRhc2subW9kaWZpZWREYXRlKX0gYXYgPHN0cm9uZz57dGFzay5tb2RpZmllZEJ5Lm5hbWV9PC9zdHJvbmc+LlxyXG4gICAgICA8L3A+fVxyXG4gIDwvPjtcclxufVxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEwgfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IFJlc291cmNlIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBEaWFsb2cgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2NvdXJzZS1lZGl0b3ItaG9zdCc7XHJcbmltcG9ydCB2YWxpZFVybCBmcm9tICd2YWxpZC11cmwnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICB1cmw/OiBzdHJpbmc7XHJcbiAgb25TYXZlOiAobmV3VXJsOiBzdHJpbmcpID0+IHZvaWQ7XHJcbiAgb25EZWxldGU/OiAoKT0+dm9pZDtcclxufVxyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICB1cmw6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEVkaXRXb3JrZmxvd0xpbmsgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsU3RhdGU+IGltcGxlbWVudHMgRGlhbG9nIHtcclxuICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICAgIHRoaXMuc3RhdGUgPSB7dXJsOiB0aGlzLnByb3BzLnVybCB8fCAnJ307XHJcbiAgfVxyXG5cclxuICBzYXZlKCkge1xyXG4gICAgY29uc3Qge3VybH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgaWYgKCF2YWxpZFVybC5pc1VyaSh1cmwpKSB0aHJvdyBuZXcgRXJyb3IoTGBBbmdpdmVuIFVSTCAnJHt1cmx9JyDDpHIgb2dpbHRpZy4gU2thIGLDtnJqYSBtZWQgaHR0cDogZWxsZXIgaHR0cHM6YCk7XHJcbiAgICB0aGlzLnByb3BzLm9uU2F2ZSh1cmwpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3Qge29uU2F2ZSwgb25EZWxldGV9ID0gdGhpcy5wcm9wcztcclxuICAgIGNvbnN0IHN0YXRlID0gdGhpcy5zdGF0ZTtcclxuICAgIGNvbnN0IGlzVmFsaWRVcmwgPSB2YWxpZFVybC5pc1VyaSh0aGlzLnN0YXRlLnVybCk7XHJcblxyXG4gICAgcmV0dXJuIDxkaXY+PGRpdiBjbGFzc05hbWU9XCJzdi1odG1sLXBvcnRsZXQgc3YtcG9ydGxldCBzdi1za2lwLXNwYWNlclwiPlxyXG4gICAgICA8aDI+S29wcGxhIGVuIGFyYmV0c2fDpW5nIHRpbGwga3Vyc2VuPC9oMj5cclxuICAgICAgPHA+RGV0IGfDpXIgYmFyYSBhdHQgbMOkZ2dhIGluIGVuIGFyYmV0c2fDpW5nIHBlciBrdXJzLjwvcD5cclxuICAgICAgPGJyIC8+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbFwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+TMOkbms6PC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3AgXCI+XHJcbiAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIlxyXG4gICAgICAgICAgICB0YWJJbmRleD17MX1cclxuICAgICAgICAgICAgc2l6ZT17NTB9XHJcbiAgICAgICAgICAgIHZhbHVlPXtzdGF0ZS51cmx9XHJcbiAgICAgICAgICAgIG9uQ2hhbmdlPXtldj0+dGhpcy5zZXRTdGF0ZSh7dXJsOiBldi50YXJnZXQudmFsdWV9KX0gLz5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcCBzcGFjZWRcIj48L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxiciAvPjwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInN2LWh0bWwtcG9ydGxldCBzdi1wb3J0bGV0XCIgaWQ9XCJzdmlkMTJfNDkyNDIyZDUxNWJhZGYzNjY0NmU0ZmYxXCI+XHJcbiAgICAgICAge29uRGVsZXRlICYmIDxkaXYgdGFiSW5kZXg9ezJ9IGNsYXNzTmFtZT1cImJ0biBidG4td2FybmluZyBidG4tbGFyZ2UgcHVsbC1yaWdodFwiIG9uQ2xpY2s9eygpPT5vbkRlbGV0ZSgpfT5cclxuICAgICAgICAgIFRhIGJvcnQgYXJiZXRzZ8OlbmdcclxuICAgICAgICA8L2Rpdj59XHJcbiAgICAgICAgPGFcclxuICAgICAgICAgIHRhYkluZGV4PXsxfVxyXG4gICAgICAgICAgY2xhc3NOYW1lPXtcImJ0biBidG4tbGFyZ2VcIiArIChpc1ZhbGlkVXJsID8gXCJcIiA6IFwiIGJ0bi1pbmFjdGl2ZVwiKX1cclxuICAgICAgICAgIG9uQ2xpY2s9e2lzVmFsaWRVcmwgJiYgKCgpID0+IG9uU2F2ZShzdGF0ZS51cmwpKX0+U3BhcmE8L2E+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgU2Nob29sLCBCcmFuY2gsIENvdXJzZSB9IGZyb20gXCJrZWRiYWNrZW5kL21vZGVsc1wiO1xyXG5pbXBvcnQgeyBDb3Vyc2VCYW5uZXIgfSBmcm9tIFwiLi4vY291cnNlcy9jb3Vyc2UtYmFubmVyXCI7XHJcbmltcG9ydCB7IHNob3dFcnJvciwgTCB9IGZyb20gXCIuLi8uLi8uLi91dGlscy91dGlsc1wiO1xyXG5pbXBvcnQgZW52IGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCB7IGNyZWF0ZVVVSUQsIERvY3VtZW50QWNjZXNzLCBCYXRjaFJ1bm5lciB9IGZyb20gXCJrZWRiYWNrZW5kL2NsaWVudFwiO1xyXG5pbXBvcnQgeyBMaW5rIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIGlkPzogc3RyaW5nXHJcbiAgdGl0bGU6IHN0cmluZ1xyXG4gIHR5cGU/OiAnZ3ltbmFzaXVtJyB8ICdwcmltYXJ5J1xyXG59XHJcblxyXG50eXBlIFN0YXRlID0gU2Nob29sO1xyXG5cclxuZXhwb3J0IGNvbnN0IEVkaXRTY2hvb2wgPSAocHJvcHM6IFByb3BzICYge2ZlZWRiYWNrVXJsOiBzdHJpbmd9KSA9PiA8ZGl2IHN0eWxlPXt7IG91dGxpbmU6IDAgfX0+XHJcbiAgPENvdXJzZUJhbm5lclxyXG4gICAgdGl0bGU9XCJTa29sb3JcIiBhY3RpdmVQYWdlPVwic2Nob29sc1wiIGNhbGxiYWNrcz17e3NjaG9vbHM6ICgpPT5sb2NhdGlvbi5oYXNoPVwiIy9zY2hvb2xzXCJ9fVxyXG4gICAgcm91dGVzPXt7ZmVlZGJhY2s6IHByb3BzLmZlZWRiYWNrVXJsfX0gLz5cclxuICA8RWRpdFNjaG9vbE5vQmFubmVyIHsuLi5wcm9wc30gLz5cclxuPC9kaXY+O1xyXG5cclxuZXhwb3J0IGNsYXNzIEVkaXRTY2hvb2xOb0Jhbm5lciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcyxTdGF0ZT4ge1xyXG4gIG9yaWdTY2hvb2w6IFNjaG9vbDtcclxuXHJcbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB0aGlzLnN0YXRlID0gbnVsbDtcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gICAgdGhpcy5sb2FkKCkuY2F0Y2goZXJyID0+IHNob3dFcnJvcihlcnIpKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGxvYWQoKSB7XHJcbiAgICBpZiAodGhpcy5wcm9wcy5pZCkge1xyXG4gICAgICAvLyBJRCBnaXZlbiwgbG9hZCBpdC5cclxuICAgICAgY29uc3QgeyBpZCB9ID0gdGhpcy5wcm9wcztcclxuICAgICAgY29uc3Qgc2Nob29sID0gYXdhaXQgZW52LmtlZEJhY2tlbmRDbGllbnQuZ2V0PFNjaG9vbD4oXCJzY2hvb2xzXCIsIGlkKTtcclxuICAgICAgdGhpcy5vcmlnU2Nob29sID0geyAuLi5zY2hvb2wgfTtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7IC4uLnNjaG9vbCB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIE5vIGlkLCBjcmVhdGUgbmV3IGluc3RlYWQuXHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgIGlkOiBjcmVhdGVVVUlEKCksXHJcbiAgICAgICAgb2ZmaWNpYWxCcmFuY2hJZDogY3JlYXRlVVVJRCgpLFxyXG4gICAgICAgIGlzR3ltbmFzaXVtOiB0aGlzLnByb3BzLnR5cGUgPT09ICdneW1uYXNpdW0nLFxyXG4gICAgICAgIGlzUHJpbWFyeVNjaG9vbDogdGhpcy5wcm9wcy50eXBlID09PSAncHJpbWFyeSdcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBzYXZlKCkge1xyXG4gICAgY29uc3QgciA9IG5ldyBCYXRjaFJ1bm5lcigpO1xyXG4gICAgbGV0IHNjaG9vbCA9IHsgLi4udGhpcy5zdGF0ZSwgdGFnczogKHRoaXMuc3RhdGUudGFncyB8fCBbXSlcclxuICAgICAgLmZpbHRlcih0YWcgPT4gW1wicHJpbWFyeVwiLCBcImd5bW5hc2l1bVwiXS5pbmRleE9mKHRhZykgPCAwKVxyXG4gICAgfTtcclxuXHJcbiAgICBpZiAoc2Nob29sLmlzUHJpbWFyeVNjaG9vbCkgc2Nob29sLnRhZ3MucHVzaChcInByaW1hcnlcIik7XHJcbiAgICBpZiAoc2Nob29sLmlzR3ltbmFzaXVtKSBzY2hvb2wudGFncy5wdXNoKFwiZ3ltbmFzaXVtXCIpO1xyXG4gICAgaWYgKCEoc2Nob29sLmlzR3ltbmFzaXVtIHx8IHNjaG9vbC5pc1ByaW1hcnlTY2hvb2wpKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvciAoTGBTa29sYW4gbcOlc3RlIGFudGluZ2VuIHZhcmEgZ3ltbmFzaXVtIGVsbGVyIGdydW5kc2tvbGFgKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXRoaXMub3JpZ1NjaG9vbCkge1xyXG4gICAgICBzY2hvb2wuYWNsID0gW1wicm9sZTpVU0VSOlJcIl07XHJcbiAgICAgIHNjaG9vbC5hY2wucHVzaChcclxuICAgICAgICBuZXcgRG9jdW1lbnRBY2Nlc3MoXHJcbiAgICAgICAgICBcInNjaG9vbFJvbGVcIixcclxuICAgICAgICAgIGAke3NjaG9vbC5uYW1lfS9FTVBMT1lFRWAsIFwiV1wiKS50b1N0cmluZygpKTtcclxuICAgICAgci5hZGQoXCJzY2hvb2xzXCIsIHNjaG9vbCk7XHJcbiAgICAgIHRoaXMuYWRkU2Nob29sQnJhbmNoKHNjaG9vbCwgcik7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMub3JpZ1NjaG9vbC5uYW1lICE9PSB0aGlzLnN0YXRlLm5hbWUpIHtcclxuXHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlNrb2xhbnMgbmFtbiBmw6VyIGludGUgw6RuZHJhcy4gS29udGFrdGEgVmVtZW5kbyBBQi5cIilcclxuXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAoIXNjaG9vbC5vZmZpY2lhbEJyYW5jaElkKSB7XHJcbiAgICAgICAgc2Nob29sLm9mZmljaWFsQnJhbmNoSWQgPSBjcmVhdGVVVUlEKCk7XHJcbiAgICAgICAgdGhpcy5hZGRTY2hvb2xCcmFuY2goc2Nob29sLCByKTtcclxuICAgICAgfVxyXG4gICAgICByLnB1dChcInNjaG9vbHNcIiwgc2Nob29sKTtcclxuICAgIH1cclxuXHJcbiAgICBhd2FpdCBlbnYua2VkQmFja2VuZENsaWVudC5iYXRjaChyLm11dGF0aW9uUmVxdWVzdHMpO1xyXG5cclxuICAgIGxvY2F0aW9uLmhhc2ggPSBcIiMvc2Nob29sc1wiO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhZGRTY2hvb2xCcmFuY2goc2Nob29sOiB7IHRhZ3M6IHN0cmluZ1tdOyBuYW1lOiBzdHJpbmc7IGlzUHJpbWFyeVNjaG9vbD86IGJvb2xlYW47IGlzR3ltbmFzaXVtPzogYm9vbGVhbjsgb2ZmaWNpYWxCcmFuY2hJZDogc3RyaW5nOyBjb3Vyc2VzPzogQ291cnNlW107IGFjdGl2ZUNvdXJzZXM/OiBDb3Vyc2VbXTsgaWQ6IHN0cmluZzsgYWNsPzogc3RyaW5nW107IGRhdGVUaW1lPzogbnVtYmVyOyB0cmVlUGFyZW50SWQ/OiBzdHJpbmc7ICRldGFnPzogc3RyaW5nOyAkbWV0YT86IFwiYWRkXCIgfCBcInJlZlwiIHwgXCJ1cGRhdGVcIiB8IFwiYWRkaW5nXCIgfCBcInVwZGF0aW5nXCIgfCBcImRlbGV0aW5nXCIgfCBcImRlbGV0ZWRcIjsgfSwgcjogQmF0Y2hSdW5uZXIpIHtcclxuICAgIGNvbnN0IGJyYW5jaDogQnJhbmNoID0ge1xyXG4gICAgICBpZDogc2Nob29sLm9mZmljaWFsQnJhbmNoSWQsXHJcbiAgICAgIG5hbWU6IHNjaG9vbC5uYW1lLFxyXG4gICAgICBzY2hvb2xJZDogc2Nob29sLmlkLFxyXG4gICAgICBhY2w6IFtcclxuICAgICAgICBcInJvbGU6VVNFUjpSXCIsXHJcbiAgICAgICAgbmV3IERvY3VtZW50QWNjZXNzKFwic2Nob29sUm9sZVwiLCBgJHtzY2hvb2wubmFtZX0vRU1QTE9ZRUVgLCBcIldcIikudG9TdHJpbmcoKVxyXG4gICAgICBdXHJcbiAgICB9O1xyXG4gICAgci5hZGQoXCJicmFuY2hlc1wiLCBicmFuY2gpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZGVsZXRlU2Nob29sKCkge1xyXG4gICAgaWYgKHByb21wdChMYMOEciBkdSBzw6RrZXIgcMOlIGF0dCB0YSBib3J0IHNrb2xhbiBcIiR7dGhpcy5zdGF0ZS5uYW1lfVwiPyBTa3JpdiBza29sYW5zIGV4YWt0YSBuYW1uIGbDtnIgYXR0IGJla3LDpGZ0YWApID09PSB0aGlzLnN0YXRlLm5hbWUgKSB7XHJcbiAgICAgIGNvbnN0IHNjaG9vbEJyYW5jaCA9IGF3YWl0IGVudi5rZWRCYWNrZW5kQ2xpZW50Lmxpc3Q8QnJhbmNoPihcImJyYW5jaGVzXCIsIHtcclxuICAgICAgICBpZHM6IFt0aGlzLnN0YXRlLm9mZmljaWFsQnJhbmNoSWRdLFxyXG4gICAgICAgIGluY2x1ZGU6IFwiYXBwcm92ZWRDaGlsZHJlblwiLFxyXG4gICAgICAgIGZsYWdzOiBbXCJpbmNsdWRlSWRzT25seVwiXVxyXG4gICAgICB9KTtcclxuICAgICAgY29uc3QgYnIgPSBuZXcgQmF0Y2hSdW5uZXIoKTtcclxuICAgICAgYnIuZGVsZXRlKFwic2Nob29sc1wiLCB0aGlzLnN0YXRlLmlkKTtcclxuICAgICAgc2Nob29sQnJhbmNoWzBdLmFwcHJvdmVkQ2hpbGRyZW4uZm9yRWFjaCgoe2lkfSkgPT4ge1xyXG4gICAgICAgIGJyLmRlbGV0ZShcImJyYW5jaGVzXCIsIGlkKTtcclxuICAgICAgfSk7XHJcbiAgICAgIGJyLmRlbGV0ZShcImJyYW5jaGVzXCIsIHRoaXMuc3RhdGUub2ZmaWNpYWxCcmFuY2hJZCk7XHJcbiAgICAgIGF3YWl0IGVudi5rZWRCYWNrZW5kQ2xpZW50LmJhdGNoKGJyLm11dGF0aW9uUmVxdWVzdHMpO1xyXG4gICAgICBsb2NhdGlvbi5oYXNoPSBcIiMvc2Nob29sc1wiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYWxlcnQoXCJTa29sYW4gdG9ncyBpbnRlIGJvcnQgZWZ0ZXJzb20gZGV0IG5hbW4gZHUgYW5nYXYgaW50ZSBzdMOkbW1lci5cIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7IHRpdGxlLCBpZCB9ID0gdGhpcy5wcm9wcztcclxuICAgIGNvbnN0IGVkaXRFeGlzdGluZyA9ICEhaWQ7XHJcbiAgICBjb25zdCBzY2hvb2wgPSB0aGlzLnN0YXRlO1xyXG4gICAgY29uc3Qgb3JpZ1NjaG9vbCA9IHRoaXMub3JpZ1NjaG9vbDtcclxuICAgIGNvbnN0IGlzQWRtaW4gPSBlbnYuY3VycmVudFVzZXIucm9sZXMuc29tZShyb2xlID0+IHJvbGUgPT09IFwiQURNSU5cIik7XHJcbiAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJzdi1yb3cgc3YtbGF5b3V0XCI+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFnZWNvbnRlbnQgc3YtbGF5b3V0IHN2LXNwYWNlci0yMHB4dnQgc3Ytc2tpcC1zcGFjZXJcIj5cclxuICAgICAgICA8aDI+e3RpdGxlfTwvaDI+XHJcbiAgICAgICAgPGhyIC8+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPk5hbW46PC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBhdXRvRm9jdXM9eyFzY2hvb2wgfHwgIXNjaG9vbC5uYW1lfVxyXG4gICAgICAgICAgICAgIGRpc2FibGVkPXshaXNBZG1pbiB8fCBlZGl0RXhpc3Rpbmd9XHJcbiAgICAgICAgICAgICAgdGFiSW5kZXg9ezF9XHJcbiAgICAgICAgICAgICAgc2l6ZT17NTB9XHJcbiAgICAgICAgICAgICAgdmFsdWU9e3NjaG9vbCA/IHNjaG9vbC5uYW1lIDogXCJcIn1cclxuICAgICAgICAgICAgICBvbkNoYW5nZT17ZXYgPT4gdGhpcy5zZXRTdGF0ZSh7IG5hbWU6IGV2LnRhcmdldC52YWx1ZSB9KX0gLz5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3Agc3BhY2VkXCI+PC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlZpc25pbmdzbmFtbjo8L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGF1dG9Gb2N1cz17c2Nob29sICYmICFzY2hvb2wuZGlzcGxheU5hbWV9XHJcbiAgICAgICAgICAgICAgZGlzYWJsZWQ9eyFpc0FkbWlufVxyXG4gICAgICAgICAgICAgIHRhYkluZGV4PXsxfVxyXG4gICAgICAgICAgICAgIHNpemU9ezUwfVxyXG4gICAgICAgICAgICAgIHZhbHVlPXtzY2hvb2wgPyBzY2hvb2wuZGlzcGxheU5hbWUgOiBcIlwifVxyXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXtldiA9PiB0aGlzLnNldFN0YXRlKHsgZGlzcGxheU5hbWU6IGV2LnRhcmdldC52YWx1ZSB9KX0gLz5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3Agc3BhY2VkXCI+PC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAge3NjaG9vbCAmJiBzY2hvb2wuaXNHeW1uYXNpdW0gPyA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWxcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+RURTIG5hbW4gKGd5bW5hc2l1bSk6PC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIlxyXG4gICAgICAgICAgICAgIGRpc2FibGVkPXshaXNBZG1pbn1cclxuICAgICAgICAgICAgICB0YWJJbmRleD17MX1cclxuICAgICAgICAgICAgICBzaXplPXs1MH1cclxuICAgICAgICAgICAgICB2YWx1ZT17c2Nob29sID8gc2Nob29sLmVkc1NjaG9vbE5hbWVHeW1uIDogXCJcIn1cclxuICAgICAgICAgICAgICBvbkNoYW5nZT17ZXYgPT4gdGhpcy5zZXRTdGF0ZSh7IGVkc1NjaG9vbE5hbWVHeW1uOiBldi50YXJnZXQudmFsdWUgfSl9IC8+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wIHNwYWNlZFwiPjwvZGl2PlxyXG4gICAgICAgIDwvZGl2PiA6IG51bGx9XHJcbiAgICAgICAge3NjaG9vbCAmJiBzY2hvb2wuaXNQcmltYXJ5U2Nob29sID8gPGRpdiBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPkVEUyBuYW1uIChncnVuZHNrb2xhKTo8L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiXHJcbiAgICAgICAgICAgICAgZGlzYWJsZWQ9eyFpc0FkbWlufVxyXG4gICAgICAgICAgICAgIHRhYkluZGV4PXsxfVxyXG4gICAgICAgICAgICAgIHNpemU9ezUwfVxyXG4gICAgICAgICAgICAgIHZhbHVlPXtzY2hvb2wgPyBzY2hvb2wuZWRzU2Nob29sTmFtZVByaW0gOiBcIlwifVxyXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXtldiA9PiB0aGlzLnNldFN0YXRlKHsgZWRzU2Nob29sTmFtZVByaW06IGV2LnRhcmdldC52YWx1ZSB9KX0gLz5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3Agc3BhY2VkXCI+PC9kaXY+XHJcbiAgICAgICAgPC9kaXY+IDogbnVsbH1cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWxcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+VHlwOjwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiXHJcbiAgICAgICAgICAgICAgbmFtZT1cInNjaG9vbFR5cGVQcmltYXJ5XCJcclxuICAgICAgICAgICAgICBkaXNhYmxlZD17IWlzQWRtaW59XHJcbiAgICAgICAgICAgICAgY2hlY2tlZD17c2Nob29sICYmIHNjaG9vbC5pc1ByaW1hcnlTY2hvb2x9XHJcbiAgICAgICAgICAgICAgdGFiSW5kZXg9ezF9XHJcbiAgICAgICAgICAgICAgdmFsdWU9XCJwcmltYXJ5XCJcclxuICAgICAgICAgICAgICBvbkNoYW5nZT17ZXYgPT4gdGhpcy5zZXRTdGF0ZSh7IGlzUHJpbWFyeVNjaG9vbDogZXYudGFyZ2V0LmNoZWNrZWQgfSl9IC8+XHJcbiAgICAgICAgICAgICZuYnNwO0dydW5kc2tvbGFcclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3Agc3BhY2VkXCI+PC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPjwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiXHJcbiAgICAgICAgICAgICAgbmFtZT1cInNjaG9vbFR5cGVHeW1uYXNpdW1cIlxyXG4gICAgICAgICAgICAgIGRpc2FibGVkPXshaXNBZG1pbn1cclxuICAgICAgICAgICAgICBjaGVja2VkPXtzY2hvb2wgJiYgc2Nob29sLmlzR3ltbmFzaXVtfVxyXG4gICAgICAgICAgICAgIHRhYkluZGV4PXsxfVxyXG4gICAgICAgICAgICAgIHZhbHVlPVwiZ3ltbmFzaXVtXCJcclxuICAgICAgICAgICAgICBvbkNoYW5nZT17ZXYgPT4gdGhpcy5zZXRTdGF0ZSh7IGlzR3ltbmFzaXVtOiBldi50YXJnZXQuY2hlY2tlZCB9KX0gLz5cclxuICAgICAgICAgICAgJm5ic3A7R3ltbmFzaXVtXHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wIHNwYWNlZFwiPjwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxici8+XHJcbiAgICAgICAge2lzQWRtaW4gJiYgZWRpdEV4aXN0aW5nICYmIDxkaXYgdGFiSW5kZXg9ezJ9IGNsYXNzTmFtZT1cImJ0biBidG4td2FybmluZyBidG4tbGFyZ2UgcHVsbC1yaWdodFwiIG9uQ2xpY2s9eygpID0+XHJcbiAgICAgICAgICB0aGlzLmRlbGV0ZVNjaG9vbCgpLmNhdGNoKHNob3dFcnJvcil9PlxyXG4gICAgICAgICAgVGEgYm9ydCBza29sYVxyXG4gICAgICAgIDwvZGl2Pn1cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInB1bGwtcmlnaHRcIj4mbmJzcDs8L2Rpdj5cclxuICAgICAgICA8TGluayBjbGFzc05hbWU9XCJidG4gYnRuLXdhcm5pbmcgYnRuLWxhcmdlIHB1bGwtcmlnaHRcIiB0bz1cIi9zY2hvb2xzXCI+XHJcbiAgICAgICAgICBBdmJyeXRcclxuICAgICAgICA8L0xpbms+XHJcbiAgICAgICAgXHJcbiAgICAgICAge2lzQWRtaW4gJiYgPGEgdGFiSW5kZXg9ezF9IGNsYXNzTmFtZT17XCJidG4gYnRuLWxhcmdlXCJ9IG9uQ2xpY2s9eygpID0+IHtcclxuICAgICAgICAgIGlmIChvcmlnU2Nob29sICYmIG9yaWdTY2hvb2wubmFtZSAhPT0gc2Nob29sLm5hbWUpIHtcclxuICAgICAgICAgICAgaWYgKCFjb25maXJtKExgw4RyIGR1IHPDpGtlciBww6UgYXR0IGR1IHZpbGwgZMO2cGEgb20gc2tvbGFuPyBEZXR0YSBww6V2ZXJrYXIgcG9ydGFsZW5zIGZ1bmt0aW9uIGbDtnIgbMOkcmFyZSBvY2ggZWxldmVyIHNvbSB0aWxsaMO2ciBza29sYW4uIE5hbW5ldCBtw6VzdGUgc3TDpG1tYSBleGFrdCDDtnZlcmVucyBtZWQgbmFtbmdpdm5pbmdlbiBhdiBza29sYW4gcMOlIGFudsOkbmRhcm9iamVrdGVuLlxyXG5cclxuRGV0IHNvbSBow6RuZGVyIGFubmFycyDDpHIgYXR0IGVsZXZlciBvY2ggbMOkcmFyZSBww6Ugc2tvbGFuIGludGUgbMOkbmdyZSBoaXR0YXIgbsOlZ3JhIGt1cnNlci5cclxuXHJcbkJsaXIgZGV0IGZlbCBrYW4gZHUgZG9jayBhbGx0aWQgYmFyYSBkw7ZwYSB0aWxsYmFrYSBza29sYW5zIG5hbW4uYCkpIHtcclxuICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRoaXMuc2F2ZSgpLmNhdGNoKHNob3dFcnJvcik7XHJcbiAgICAgICAgfX0+U3BhcmE8L2E+fVxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PjtcclxuICB9XHJcbn0iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IFNjaG9vbCB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgRGlhbG9nQ29udGFpbmVyIH0gZnJvbSBcIi4uL2ludGVyZmFjZXMvY291cnNlLWVkaXRvci1ob3N0XCI7XHJcbmltcG9ydCB7IEwgfSBmcm9tIFwiLi4vLi4vLi4vdXRpbHMvdXRpbHNcIjtcclxuaW1wb3J0IGVudiBmcm9tICcuLi8uLi8uLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5pbXBvcnQgeyB1cGRhdGVNb2RpZmljYXRpb25BbmRDcmVhdGlvblN0YW1wcyB9IGZyb20gXCIuLi91dGlsc1wiO1xyXG5pbXBvcnQgeyBFZGl0U2Nob29sIH0gZnJvbSAnLi9lZGl0LXNjaG9vbCc7XHJcbmltcG9ydCB7IExpbmsgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcclxuaW1wb3J0IHsgYWN0QXMgfSBmcm9tIFwiLi4vLi4vLi4vYWNjZXNzLWNvbnRyb2xcIjtcclxuaW1wb3J0IHsgU3Bpbm5lciB9IGZyb20gXCIuLi9zdWItY29tcG9uZW50cy9zcGlubmVyXCI7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHNjaG9vbHM/OiBTY2hvb2xbXVxyXG4gIHZpZXdDb3Vyc2VVcmw6IHN0cmluZ1xyXG4gIHR5cGU6ICdneW1uYXNpdW0nIHwgJ3ByaW1hcnknXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBFZGl0YWJsZVNjaG9vbExpc3QgPSAocHJvcHM6IFByb3BzKSA9PiB7XHJcbiAgY29uc3QgeyBzY2hvb2xzLCB2aWV3Q291cnNlVXJsIH0gPSBwcm9wcztcclxuICBjb25zdCBpc0FkbWluID0gZW52LmN1cnJlbnRVc2VyLnJvbGVzLnNvbWUocm9sZSA9PiByb2xlID09PSBcIkFETUlOXCIpO1xyXG4gIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cImVkaXRhYmxlLXNjaG9vbC1saXN0XCI+XHJcbiAgICA8ZGl2PlxyXG4gICAgICB7c2Nob29scyA/IDx0YWJsZT5cclxuICAgICAgICA8dGJvZHk+XHJcbiAgICAgICAgICB7c2Nob29scy5tYXAoc2Nob29sID0+XHJcbiAgICAgICAgICAgIDx0ciBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCIga2V5PXtzY2hvb2wuaWR9PlxyXG4gICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgIDxMaW5rIGNsYXNzTmFtZT1cImVkaXRJdGVtXCIgdG89e2Avc2Nob29scy8ke3NjaG9vbC5pZH0vZWRpdGB9PjwvTGluaz5cclxuICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgIDxwPntzY2hvb2wubmFtZX08L3A+XHJcbiAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICA8cD48YSBzdHlsZT17e2N1cnNvcjogJ3BvaW50ZXInfX0gb25DbGljaz17KCk9PmFjdEFzKHtyb2xlOiBcIkVNUExPWUVFXCIsIHNjaG9vbDogc2Nob29sLm5hbWV9KX0+QWdlcmEgc29tIGzDpHJhcmUgcMOlIGRlbm5hIHNrb2xhPC9hPjwvcD5cclxuICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgIDxwPjxhIHN0eWxlPXt7Y3Vyc29yOiAncG9pbnRlcid9fSBvbkNsaWNrPXsoKT0+YWN0QXMoe3JvbGU6IFwiU1RVREVOVFwiLCBzY2hvb2w6IHNjaG9vbC5uYW1lLCB1cmw6IHZpZXdDb3Vyc2VVcmx9KX0+QWdlcmEgc29tIGVsZXYgcMOlIGRlbm5hIHNrb2xhPC9hPjwvcD5cclxuICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICA8L3RyPil9XHJcbiAgICAgICAgPC90Ym9keT5cclxuICAgICAgPC90YWJsZT4gOiA8cD48U3Bpbm5lciAvPlYuZy4gdsOkbnRhIG1lZGFuIHNrb2xvciBsYWRkYXM8L3A+fVxyXG4gICAgPC9kaXY+XHJcbiAgICA8YnIgLz5cclxuICAgIHtzY2hvb2xzICYmIGlzQWRtaW4gJiYgPExpbmsgdG89e2Avc2Nob29scy9uZXcvJHtwcm9wcy50eXBlfWB9IGNsYXNzTmFtZT1cImJ0blwiPntcclxuICAgICAgICBwcm9wcy50eXBlID09ICdneW1uYXNpdW0nID8gTGBMw6RnZyB0aWxsIGd5bW5hc2llc2tvbGFgIDpcclxuICAgICAgICBwcm9wcy50eXBlID09ICdwcmltYXJ5JyA/IExgTMOkZ2cgdGlsbCBncnVuZHNrb2xhYCA6XHJcbiAgICAgICAgTGBMw6RnZyB0aWxsIHNrb2xhYH08L0xpbms+fVxyXG4gIDwvZGl2ID5cclxufVxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IENvdXJzZUJhbm5lciB9IGZyb20gXCIuLi9jb3Vyc2VzL2NvdXJzZS1iYW5uZXJcIjtcclxuaW1wb3J0IGVudiBmcm9tICcuLi8uLi8uLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5pbXBvcnQgeyBTY2hvb2wgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IEVkaXRhYmxlU2Nob29sTGlzdCB9IGZyb20gJy4vZWRpdGFibGUtc2Nob29sLWxpc3QnO1xyXG5pbXBvcnQgeyBzaG93RXJyb3IsIGNvbXBhcmVQcm9wIH0gZnJvbSBcIi4uLy4uLy4uL3V0aWxzL3V0aWxzXCI7XHJcbmltcG9ydCB7IFNwaW5uZXIgfSBmcm9tICcuLi9zdWItY29tcG9uZW50cy9zcGlubmVyJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgdmlld0NvdXJzZVVybDogc3RyaW5nO1xyXG4gIGZlZWRiYWNrVXJsOiBzdHJpbmc7XHJcbn1cclxuXHJcbmludGVyZmFjZSBTdGF0ZSB7XHJcbiAgc2Nob29sczogU2Nob29sW10gfCBudWxsXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBTY2hvb2xzID0gKHByb3BzOiBQcm9wcykgPT4gPGRpdiBzdHlsZT17eyBvdXRsaW5lOiAwIH19PlxyXG4gIDxDb3Vyc2VCYW5uZXIgdGl0bGU9XCJTa29sb3JcIiBhY3RpdmVQYWdlPVwic2Nob29sc1wiIHJvdXRlcz17e2ZlZWRiYWNrOiBwcm9wcy5mZWVkYmFja1VybH19IC8+XHJcbiAgPFNjaG9vbHNXaXRob3V0QmFubmVyIHZpZXdDb3Vyc2VVcmw9e3Byb3BzLnZpZXdDb3Vyc2VVcmx9IC8+XHJcbjwvZGl2PlxyXG5cclxuZXhwb3J0IGNsYXNzIFNjaG9vbHNXaXRob3V0QmFubmVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFBpY2s8UHJvcHMsIFwidmlld0NvdXJzZVVybFwiPixTdGF0ZT4ge1xyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgc2Nob29sczogbnVsbFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICB0aGlzLmxvYWQoKS5jYXRjaChlcnIgPT4gc2hvd0Vycm9yKGVyci5tZXNzYWdlIHx8IGVycikpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgbG9hZCgpIHtcclxuICAgIGNvbnN0IHNjaG9vbHMgPSBhd2FpdCBlbnYua2VkQmFja2VuZENsaWVudC5saXN0PFNjaG9vbD4oXCJzY2hvb2xzXCIpO1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7IHNjaG9vbHMgfSk7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7IHNjaG9vbHMgfSA9IHRoaXMuc3RhdGU7XHJcbiAgICBzY2hvb2xzICYmIHNjaG9vbHMuc29ydChjb21wYXJlUHJvcChcIm5hbWVcIikpO1xyXG4gICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwic3Ytcm93IHN2LWxheW91dFwiPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhZ2Vjb250ZW50IHN2LWxheW91dCBzdi1zcGFjZXItMjBweHZ0IHN2LXNraXAtc3BhY2VyXCI+XHJcbiAgICAgICAge3NjaG9vbHMgPyA8PlxyXG4gICAgICAgIDxkaXY+XHJcbiAgICAgICAgICA8aDI+R3ltbmFzaWVza29sb3I8L2gyPlxyXG4gICAgICAgICAgPEVkaXRhYmxlU2Nob29sTGlzdFxyXG4gICAgICAgICAgICBzY2hvb2xzPXtzY2hvb2xzLmZpbHRlcihzY2hvb2wgPT4gc2Nob29sLmlzR3ltbmFzaXVtKX1cclxuICAgICAgICAgICAgdmlld0NvdXJzZVVybD17dGhpcy5wcm9wcy52aWV3Q291cnNlVXJsfVxyXG4gICAgICAgICAgICB0eXBlPVwiZ3ltbmFzaXVtXCIgLz5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgPGgyPkdydW5kc2tvbG9yPC9oMj5cclxuICAgICAgICAgIDxFZGl0YWJsZVNjaG9vbExpc3RcclxuICAgICAgICAgICAgc2Nob29scz17c2Nob29scy5maWx0ZXIoc2Nob29sID0+IHNjaG9vbC5pc1ByaW1hcnlTY2hvb2wpfVxyXG4gICAgICAgICAgICB2aWV3Q291cnNlVXJsPXt0aGlzLnByb3BzLnZpZXdDb3Vyc2VVcmx9XHJcbiAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCIgLz5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC8+IDogPFNwaW5uZXIgLz59XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHtFZGl0U2Nob29sfSBmcm9tICcuL2VkaXQtc2Nob29sJztcclxuaW1wb3J0IHsgTCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgdHlwZTogJ2d5bW5hc2l1bScgfCAncHJpbWFyeSdcclxuICBmZWVkYmFja1VybDogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgTmV3U2Nob29sID0gKHByb3BzOiBQcm9wcyk9PjxFZGl0U2Nob29sXHJcbiAgdGl0bGU9e0xgTMOkZ2cgdGlsbCBza29sYWB9XHJcbiAgdHlwZT17cHJvcHMudHlwZX1cclxuICBmZWVkYmFja1VybD17cHJvcHMuZmVlZGJhY2tVcmx9IC8+O1xyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7UmVzb3VyY2V9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHtMaW5rfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcclxuaW1wb3J0IHtJQ291cnNlRWRpdG9ySG9zdH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9jb3Vyc2UtZWRpdG9yLWhvc3QnO1xyXG5pbXBvcnQge0VkaXRSZXNvdXJjZX0gZnJvbSAnLi4vbW9kYWwtcGFnZXMvZWRpdC1yZXNvdXJjZSc7XHJcbmltcG9ydCB7IHVwZGF0ZU1vZGlmaWNhdGlvbkFuZENyZWF0aW9uU3RhbXBzIH0gZnJvbSAnLi4vdXRpbHMnO1xyXG5pbXBvcnQgZW52IGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCB7IERyaXZlQnV0dG9uIH0gZnJvbSAnLi4vLi4vLi4vYXBpcy9idXR0b25zJztcclxuaW1wb3J0IHsgR29vZ2xlUGlja2VyIH0gZnJvbSAnLi4vLi4vLi4vYXBpcy9nb29nbGUtcGlja2VyJztcclxuaW1wb3J0IHsgcmVzb2x2ZVB0ciB9IGZyb20gJ2Rucyc7XHJcbmltcG9ydCB7IGZlYXR1cmVzIH0gZnJvbSAnLi4vLi4vLi4vZmVhdHVyZXMnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICByZXNvdXJjZXM6IFJlc291cmNlW107XHJcbiAgb25VcGRhdGU6IChyZXNvdXJjZXNVcGRhdGVzKSA9PiB2b2lkO1xyXG4gIGhvc3Q6IElDb3Vyc2VFZGl0b3JIb3N0O1xyXG59XHJcblxyXG5pbnRlcmZhY2UgU3RhdGUge1xyXG5cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEVkaXRhYmxlUmVzb3VyY2VMaXN0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLFN0YXRlPiB7XHJcbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB0aGlzLnN0YXRlPXt9O1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3Qge2hvc3QsIG9uVXBkYXRlLCByZXNvdXJjZXN9ID0gdGhpcy5wcm9wcztcclxuICAgIGNvbnN0IHNob3dHb29nbGVQaWNrZXIgPSBmZWF0dXJlcy5waWNrZXI7XHJcbiAgICByZXR1cm4gPGRpdj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YXNrQ29udGFpbmVyXCI+XHJcbiAgICAgICAge3Jlc291cmNlcy5tYXAoKHJlc291cmNlLCBpZHgpID0+IFxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCIga2V5PXtpZHh9PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgICAgIDxhIGNsYXNzTmFtZT1cImVkaXRJdGVtXCIgb25DbGljaz17KCk9Pmhvc3Qub3BlbkRpYWxvZyh7XHJcbiAgICAgICAgICAgICAgICBDb21wb25lbnQ6IEVkaXRSZXNvdXJjZSxcclxuICAgICAgICAgICAgICAgIHByb3BzOiB7XHJcbiAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIlJlZGlnZXJhIHJlc3Vyc1wiLFxyXG4gICAgICAgICAgICAgICAgICByZXNvdXJjZSxcclxuICAgICAgICAgICAgICAgICAgb25TYXZlOiBlZGl0ZWRSZXNvdXJjZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZFJlc291cmNlID0gdXBkYXRlTW9kaWZpY2F0aW9uQW5kQ3JlYXRpb25TdGFtcHMoZWRpdGVkUmVzb3VyY2UsIGVudi5jdXJyZW50VXNlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgb25VcGRhdGUoeyRzcGxpY2U6IFtbaWR4LCAxLCB1cGRhdGVkUmVzb3VyY2VdXX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGhvc3QuY2xvc2VEaWFsb2coKTtcclxuICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgb25EZWxldGU6ICgpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgb25VcGRhdGUoeyRzcGxpY2U6IFtbaWR4LCAxXV19KTtcclxuICAgICAgICAgICAgICAgICAgICBob3N0LmNsb3NlRGlhbG9nKCk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9KX0+PC9hPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICAgICAgICA8YSBocmVmPXtyZXNvdXJjZS51cmx9IHRhcmdldD1cIl9ibGFua1wiID57cmVzb3VyY2UubmFtZX08L2E+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+KX1cclxuICAgICA8L2Rpdj5cclxuICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbC1hbGlnbiBzcGFjZWRcIj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFJdGVtIHRvcFwiPlxyXG4gICAgICAgIDxhIGNsYXNzTmFtZT1cImJ0blwiIG9uQ2xpY2s9eygpPT5ob3N0Lm9wZW5EaWFsb2coe1xyXG4gICAgICAgICAgQ29tcG9uZW50OiBFZGl0UmVzb3VyY2UsXHJcbiAgICAgICAgICAgcHJvcHM6IHtcclxuICAgICAgICAgICB0aXRsZTogXCJMw6RnZyB0aWxsIHJlc3Vyc1wiLFxyXG4gICAgICAgICAgIG9uU2F2ZTogbmV3UmVzb3VyY2UgPT4ge1xyXG4gICAgICAgICAgICAgY29uc3QgdXBkYXRlZFJlc291cmNlID0gdXBkYXRlTW9kaWZpY2F0aW9uQW5kQ3JlYXRpb25TdGFtcHMobmV3UmVzb3VyY2UsIGVudi5jdXJyZW50VXNlcik7XHJcbiAgICAgICAgICAgICBvblVwZGF0ZSh7JHB1c2g6IFt1cGRhdGVkUmVzb3VyY2VdfSlcclxuICAgICAgICAgICAgIGhvc3QuY2xvc2VEaWFsb2coKTtcclxuICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSl9PjxpIGNsYXNzTmFtZT1cImZhIGZhLXBhcGVyY2xpcFwiIGFyaWEtaGlkZGVuPjwvaT4gTMOkZ2cgdGlsbCByZXN1cnM8L2E+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAge3Nob3dHb29nbGVQaWNrZXIgJiYgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgPERyaXZlQnV0dG9uIGxhYmVsPVwiTMOkZ2cgdGlsbCBmcsOlbiBEcml2ZVwiIGFjdGlvbj17KCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBwaWNrZXIgPSBuZXcgR29vZ2xlUGlja2VyKHsgdXBsb2FkOiB0cnVlLCBtdWx0aXBsZTogdHJ1ZSB9KTtcclxuXHJcbiAgICAgICAgICAgIHBpY2tlci5zaG93KCkudGhlbihmaWxlcyA9PiB7XHJcbiAgICAgICAgICAgICAgZmlsZXMuZm9yRWFjaCgoZmlsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3UmVzb3VyY2U6IFJlc291cmNlID0geyB1cmw6IGZpbGUudXJsLCBuYW1lOiBmaWxlLm5hbWUgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZFJlc291cmNlID0gdXBkYXRlTW9kaWZpY2F0aW9uQW5kQ3JlYXRpb25TdGFtcHMobmV3UmVzb3VyY2UsIGVudi5jdXJyZW50VXNlcik7XHJcbiAgICAgICAgICAgICAgICBvblVwZGF0ZSh7ICRwdXNoOiBbdXBkYXRlZFJlc291cmNlXSB9KVxyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICB9fSAvPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIH1cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBUYXNrLCBDb3Vyc2UsIENvdXJzZU1vZHVsZSwgQWJpbGl0eSB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgTGluayB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xyXG5pbXBvcnQgeyBFZGl0VGFzayB9IGZyb20gJy4uL21vZGFsLXBhZ2VzL2VkaXQtdGFzayc7XHJcbmltcG9ydCB7IElDb3Vyc2VFZGl0b3JIb3N0IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9jb3Vyc2UtZWRpdG9yLWhvc3QnO1xyXG5pbXBvcnQgeyB1cGRhdGVNb2RpZmljYXRpb25BbmRDcmVhdGlvblN0YW1wcyB9IGZyb20gXCIuLi91dGlsc1wiO1xyXG5pbXBvcnQgZW52IGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCB7IGhhc1dyaXRlQWNjZXNzIH0gZnJvbSBcIi4uLy4uLy4uL2FjY2Vzcy1jb250cm9sXCI7XHJcbmltcG9ydCB7IFNvcnRhYmxlVGFza0xpc3QsIFRhc2tXaXRoTWV0YWRhdGEgfSBmcm9tICcuLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvc29ydGFibGUtdGFzay1saXN0JztcclxuaW1wb3J0IHsgZ2V0T3JkZXJlZERvY3MgfSBmcm9tICcuLi8uLi9jb3Vyc2UtYnVpbGRlci1rcy9sb2dpYy9vcmRlcmVkLXJlcXVpcmVtZW50cyc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHRhc2tJZHM6IHN0cmluZ1tdO1xyXG4gIHRhc2tDdXN0b21pemF0aW9ucz86IHsgW3Rhc2tJZDogc3RyaW5nXTogUGFydGlhbDxUYXNrPiB9XHJcbiAgY291cnNlOiBDb3Vyc2U7XHJcbiAgbW9kdWxlOiBDb3Vyc2VNb2R1bGU7XHJcbiAgaWRzTm90Q292ZXJlZEJ5QW55VGFzazoge1tpZDogc3RyaW5nXTogdHJ1ZX07XHJcbiAgb25UYXNrQWRkZWQ6ICh0YXNrOiBUYXNrLCB0YXNrQ3VzdG9taXphdGlvbj86IFBhcnRpYWw8VGFzaz4pID0+IHZvaWQ7XHJcbiAgb25UYXNrVXBkYXRlZDogKHRhc2spID0+IHZvaWQ7XHJcbiAgb25UYXNrQ3VzdG9taXphdGlvblVwZGF0ZWQ6ICh0YXNrSWQsIGN1c3RvbWl6YXRpb24pID0+IHZvaWQ7XHJcbiAgb25UYXNrRGVsZXRlZDogKGlkKSA9PiB2b2lkO1xyXG4gIG9uVGFza1JlcGxhY2VkOiAoaWQsIHRhc2spID0+IHZvaWQ7XHJcbiAgb25UYXNrc1Jlb3JkZXJlZDogKHNvdXJjZTogVGFzaywgdGFyZ2V0OiBUYXNrLCBwbGFjZW1lbnQ6ICdhZnRlcicgfCAnYmVmb3JlJykgPT4gdm9pZFxyXG4gIGhvc3Q6IElDb3Vyc2VFZGl0b3JIb3N0O1xyXG59XHJcblxyXG5pbnRlcmZhY2UgU3RhdGUge1xyXG5cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEVkaXRhYmxlVGFza0xpc3QgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsU3RhdGU+IHtcclxuICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICAgIHRoaXMuc3RhdGUgPSB7fTtcclxuICB9XHJcblxyXG4gIG9wZW5UYXNrRGlhbG9nKHRhc2s6IFRhc2spIHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgdGFza0N1c3RvbWl6YXRpb25zLFxyXG4gICAgICBjb3Vyc2UsXHJcbiAgICAgIGhvc3QsXHJcbiAgICAgIG1vZHVsZSxcclxuICAgICAgdGFza0lkcyxcclxuICAgICAgb25UYXNrQWRkZWQsXHJcbiAgICAgIG9uVGFza1VwZGF0ZWQsXHJcbiAgICAgIG9uVGFza0N1c3RvbWl6YXRpb25VcGRhdGVkLFxyXG4gICAgICBvblRhc2tEZWxldGVkLFxyXG4gICAgICBpZHNOb3RDb3ZlcmVkQnlBbnlUYXNrLFxyXG4gICAgICBvblRhc2tSZXBsYWNlZFxyXG4gICAgfSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgaG9zdC5vcGVuRGlhbG9nKHtcclxuICAgICAgQ29tcG9uZW50OiBFZGl0VGFzayxcclxuICAgICAgcHJvcHM6IHtcclxuICAgICAgICB0YXNrLFxyXG4gICAgICAgIHRhc2tDdXN0b21pemF0aW9uOiB0YXNrQ3VzdG9taXphdGlvbnMgJiYgdGFza0N1c3RvbWl6YXRpb25zW3Rhc2suaWRdLFxyXG4gICAgICAgIG1vZHVsZSxcclxuICAgICAgICBjb3Vyc2UsXHJcbiAgICAgICAgaG9zdCxcclxuICAgICAgICBpZHNOb3RDb3ZlcmVkQnlBbnlUYXNrLFxyXG4gICAgICAgIG9uU2F2ZTogdGFzayA9PiB7XHJcbiAgICAgICAgICBjb25zdCB1cGRhdGVkVGFzayA9IHVwZGF0ZU1vZGlmaWNhdGlvbkFuZENyZWF0aW9uU3RhbXBzKHRhc2ssIGVudi5jdXJyZW50VXNlcik7XHJcbiAgICAgICAgICBvblRhc2tVcGRhdGVkKHVwZGF0ZWRUYXNrKTtcclxuICAgICAgICAgIGhvc3QuY2xvc2VEaWFsb2coKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uU2F2ZUN1c3RvbWl6YXRpb246IGN1c3RvbWl6YXRpb24gPT4ge1xyXG4gICAgICAgICAgb25UYXNrQ3VzdG9taXphdGlvblVwZGF0ZWQodGFzay5pZCwgY3VzdG9taXphdGlvbik7XHJcbiAgICAgICAgICBob3N0LmNsb3NlRGlhbG9nKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBvbkRlbGV0ZTogKCkgPT4ge1xyXG4gICAgICAgICAgb25UYXNrRGVsZXRlZCh0YXNrLmlkKTtcclxuICAgICAgICAgIGhvc3QuY2xvc2VEaWFsb2coKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uUmVwbGFjZTogKHRhc2tJZDogc3RyaW5nLCBuZXdUYXNrOiBUYXNrKSA9PiB7XHJcbiAgICAgICAgICBvblRhc2tSZXBsYWNlZCh0YXNrSWQsIG5ld1Rhc2spO1xyXG4gICAgICAgICAgaG9zdC5jbG9zZURpYWxvZygpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb25DYW5jZWw6ICgpID0+IGhvc3QuY2xvc2VEaWFsb2coKVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHByb3BzID0gdGhpcy5wcm9wcztcclxuICAgIGNvbnN0IHRhc2tzID0gZ2V0T3JkZXJlZERvY3MocHJvcHMuY291cnNlLnRhc2tzLCBwcm9wcy50YXNrSWRzLCB7YXBwZW5kTGVmdG92ZXJzOiBmYWxzZX0pO1xyXG4gICAgICAgIFxyXG4gICAgcmV0dXJuIDxkaXY+XHJcbiAgICAgIDxTb3J0YWJsZVRhc2tMaXN0XHJcbiAgICAgICAgdGFza01ldGFzPXt0YXNrcy5tYXAodGFzayA9PiAoe3Rhc2ssIGlzVGFza093bmVyOiBoYXNXcml0ZUFjY2VzcyhlbnYuY3VycmVudFVzZXIsIHRhc2spfSkpfVxyXG4gICAgICAgIHJlbmRlckVkaXRMaW5rPXsoe3Rhc2ssIGlzVGFza093bmVyfSkgPT4gPGRpdiBjbGFzc05hbWU9e2lzVGFza093bmVyID9cclxuICAgICAgICAgICAgXCJlZGl0SXRlbVwiIDpcclxuICAgICAgICAgICAgXCJ2aWV3SXRlbVwiXHJcbiAgICAgICAgICB9IG9uQ2xpY2s9eygpPT50aGlzLm9wZW5UYXNrRGlhbG9nKHRhc2spfSAvPn1cclxuICAgICAgICByZW5kZXJMaW5rPXsoe3Rhc2t9KSA9PiB0YXNrLmNvbnRlbnQgP1xyXG4gICAgICAgICAgLy8gUmF0aGVyIHRoYW4gbGlua2luZyB0byB1cmwsIHNob3cgdGhlIHRhc2sncyBjb250ZW50IChieSBvcGVuaW5nXHJcbiAgICAgICAgICAvLyB0aGUgdGFzayBkaWFsb2cpXHJcbiAgICAgICAgICA8YSBocmVmPVwiI1wiIG9uQ2xpY2s9e2V2PT57XHJcbiAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMub3BlblRhc2tEaWFsb2codGFzayk7XHJcbiAgICAgICAgICB9fT57dGFzay5uYW1lfTwvYT4gOlxyXG4gICAgICAgICAgPGEgaHJlZj17dGFzay51cmx9IHRhcmdldD1cIl9ibGFua1wiPnt0YXNrLm5hbWV9PC9hPn1cclxuICAgICAgICBvblNvcnQ9eyhzb3VyY2UsIHRhcmdldCwgcGxhY2VtZW50KSA9PiB7XHJcbiAgICAgICAgICB0aGlzLnByb3BzLm9uVGFza3NSZW9yZGVyZWQoc291cmNlLCB0YXJnZXQsIHBsYWNlbWVudCk7XHJcbiAgICAgICAgfX0gLz5cclxuXHJcbiAgICAgIDxiciAvPlxyXG4gICAgICA8YSBjbGFzc05hbWU9XCJidG5cIiBvbkNsaWNrPXsoKSA9PiB7XHJcbiAgICAgICAgY29uc3Qge1xyXG4gICAgICAgICAgY291cnNlLFxyXG4gICAgICAgICAgaG9zdCxcclxuICAgICAgICAgIGlkc05vdENvdmVyZWRCeUFueVRhc2ssXHJcbiAgICAgICAgICBtb2R1bGUsXHJcbiAgICAgICAgICBvblRhc2tBZGRlZCxcclxuICAgICAgICAgIG9uVGFza0N1c3RvbWl6YXRpb25VcGRhdGVkIH0gPSB0aGlzLnByb3BzO1xyXG5cclxuICAgICAgICBwcm9wcy5ob3N0Lm9wZW5EaWFsb2coe1xyXG4gICAgICAgICAgQ29tcG9uZW50OiBFZGl0VGFzayxcclxuICAgICAgICAgIHByb3BzOiB7XHJcbiAgICAgICAgICAgIHNlYXJjaE1vZGU6IHRydWUsXHJcbiAgICAgICAgICAgIG1vZHVsZSxcclxuICAgICAgICAgICAgY291cnNlLFxyXG4gICAgICAgICAgICBob3N0LFxyXG4gICAgICAgICAgICBpZHNOb3RDb3ZlcmVkQnlBbnlUYXNrLFxyXG4gICAgICAgICAgICBvblNhdmU6IChjaG9vc2VuVGFzaywgdGFza0N1c3RvbWl6YXRpb24pID0+IHtcclxuICAgICAgICAgICAgICBjaG9vc2VuVGFzayA9IHVwZGF0ZU1vZGlmaWNhdGlvbkFuZENyZWF0aW9uU3RhbXBzKGNob29zZW5UYXNrLCBlbnYuY3VycmVudFVzZXIpO1xyXG4gICAgICAgICAgICAgIG9uVGFza0FkZGVkKGNob29zZW5UYXNrLCB0YXNrQ3VzdG9taXphdGlvbik7XHJcbiAgICAgICAgICAgICAgaG9zdC5jbG9zZURpYWxvZygpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbkNhbmNlbDogKCkgPT4gaG9zdC5jbG9zZURpYWxvZygpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH19PjxpIGNsYXNzTmFtZT1cImZhIGZhLXNlYXJjaFwiIGFyaWEtaGlkZGVuIC8+IFPDtmsgdXBwZ2lmdDwvYT5cclxuICAgICAgJm5ic3A7XHJcbiAgICAgIDxhIG9uQ2xpY2s9eygpID0+IHtcclxuICAgICAgICBjb25zdCB7IGNvdXJzZSwgaG9zdCwgbW9kdWxlLCB0YXNrSWRzLCBvblRhc2tBZGRlZCwgb25UYXNrVXBkYXRlZCwgb25UYXNrRGVsZXRlZCwgaWRzTm90Q292ZXJlZEJ5QW55VGFzayB9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBob3N0Lm9wZW5EaWFsb2coe1xyXG4gICAgICAgICAgQ29tcG9uZW50OiBFZGl0VGFzayxcclxuICAgICAgICAgIHByb3BzOiB7XHJcbiAgICAgICAgICAgIG1vZHVsZSxcclxuICAgICAgICAgICAgY291cnNlLFxyXG4gICAgICAgICAgICBob3N0LFxyXG4gICAgICAgICAgICBpZHNOb3RDb3ZlcmVkQnlBbnlUYXNrLFxyXG4gICAgICAgICAgICBvblNhdmU6IG5ld1Rhc2sgPT4ge1xyXG4gICAgICAgICAgICAgIG5ld1Rhc2sgPSB1cGRhdGVNb2RpZmljYXRpb25BbmRDcmVhdGlvblN0YW1wcyhuZXdUYXNrLCBlbnYuY3VycmVudFVzZXIpO1xyXG4gICAgICAgICAgICAgIG9uVGFza0FkZGVkKG5ld1Rhc2spO1xyXG4gICAgICAgICAgICAgIGhvc3QuY2xvc2VEaWFsb2coKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25DYW5jZWw6ICgpID0+IGhvc3QuY2xvc2VEaWFsb2coKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9fSBjbGFzc05hbWU9XCJidG5cIj5cclxuICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1wbHVzXCIgYXJpYS1oaWRkZW4gLz4gTMOkZ2cgdGlsbCBlZ2VuIHVwcGdpZnRcclxuICAgICAgPC9hPlxyXG4gICAgPC9kaXYgPlxyXG4gIH1cclxufSIsImltcG9ydCBSZWFjdCwge3VzZVJlZiwgdXNlU3RhdGUsIHVzZUNvbnRleHR9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgU29mdERvY3VtZW50QWNjZXNzIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBSZW1vdmVJdGVtIH0gZnJvbSBcIi4vcmVtb3ZlLWl0ZW1cIjtcclxuaW1wb3J0IHsgTCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgU2VsZWN0VGVhY2hlciB9IGZyb20gJy4vc2VsZWN0LXRlYWNoZXInO1xyXG5pbXBvcnQgeyBPYnNlcnZlIH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL29ic2VydmUnO1xyXG5pbXBvcnQgeyBTcGlubmVyIH0gZnJvbSAnLi9zcGlubmVyJztcclxuaW1wb3J0IHsgZmVhdHVyZXMgfSBmcm9tICcuLi8uLi8uLi9mZWF0dXJlcyc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHNjaG9vbDogc3RyaW5nO1xyXG4gIHRlYWNoZXJzOiBTb2Z0RG9jdW1lbnRBY2Nlc3NbXTtcclxuICBvblVwZGF0ZTogKHRlYWNoZXJzOiBTb2Z0RG9jdW1lbnRBY2Nlc3NbXSkgPT4gdm9pZDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEVkaXRhYmxlVGVhY2hlckxpc3QgKHtzY2hvb2wsIHRlYWNoZXJzLCBvblVwZGF0ZX06IFByb3BzKSB7XHJcbiAgY29uc3QgbmFtZUVsZW0gPSB1c2VSZWY8SFRNTElucHV0RWxlbWVudD4oKTtcclxuICBjb25zdCBbc2VsZWN0aW5nVGVhY2hlciwgc2V0U2VsZWN0aW5nVGVhY2hlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgZGlzcGxheVRlYWNoZXJSaWdodHMgPSBmZWF0dXJlcy50ZWFjaGVyUmlnaHRzO1xyXG5cclxuICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJ0ZWFjaGVycy1saXN0XCI+XHJcbiAgICA8aDM+QW5zdmFyaWdhIGzDpHJhcmU8L2gzPlxyXG4gICAgPHRhYmxlIHN0eWxlPXt7d2lkdGg6IFwiMTAwJVwifX0+XHJcbiAgICAgIDx0aGVhZD5cclxuICAgICAgICB7dGVhY2hlcnMubGVuZ3RoID4gMCAmJiA8dHI+XHJcbiAgICAgICAgICA8dGggc3R5bGU9e3t3aWR0aDogXCIxNSVcIn19PntMYE5hbW5gfTwvdGg+XHJcbiAgICAgICAgICA8dGg+e0xgRS1wb3N0YWRyZXNzYH08L3RoPlxyXG4gICAgICAgICAge2Rpc3BsYXlUZWFjaGVyUmlnaHRzICYmIDx0aCBzdHlsZT17e3dpZHRoOiBcIjI0cHhcIn19PntMYEJlaMO2cmlnaGV0YH08L3RoPn1cclxuICAgICAgICAgIDx0aCBzdHlsZT17e3dpZHRoOiBcIjI0cHhcIn19PjwvdGg+XHJcbiAgICAgICAgPC90cj59XHJcbiAgICAgIDwvdGhlYWQ+XHJcbiAgICAgIDx0Ym9keT5cclxuICAgICAgICB7dGVhY2hlcnMubWFwKCh0ZWFjaGVyLCBpZHgpID0+IFxyXG4gICAgICAgIDx0ciBrZXk9e2lkeH0+XHJcbiAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIHJlZj17bmFtZUVsZW19IHZhbHVlPXt0ZWFjaGVyLm5hbWV9IGF1dG9Gb2N1cz17IXRlYWNoZXIubmFtZSAmJiBpZHggPiAwfSBvbkNoYW5nZT17XHJcbiAgICAgICAgICAgIGV2PT57XHJcbiAgICAgICAgICAgICAgaWYgKGV2LnRhcmdldC52YWx1ZSB8fCB0ZWFjaGVyLmVtYWlsKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgcm93XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjbG9uZSA9IFsuLi50ZWFjaGVyc107XHJcbiAgICAgICAgICAgICAgICBjbG9uZVtpZHhdID0gey4uLnRlYWNoZXIsIG5hbWU6IGV2LnRhcmdldC52YWx1ZX07XHJcbiAgICAgICAgICAgICAgICBvblVwZGF0ZShjbG9uZSk7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSByb3dcclxuICAgICAgICAgICAgICAgIG9uVXBkYXRlKFsuLi50ZWFjaGVycy5zbGljZSgwLCBpZHgpLCAuLi50ZWFjaGVycy5zbGljZShpZHggKyAxKV0pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfS8+PC90ZD5cclxuICAgICAgICAgIDx0ZD48aW5wdXRcclxuICAgICAgICAgICAgdHlwZT1cInRleHRcIlxyXG4gICAgICAgICAgICBzdHlsZT17e3dpZHRoOiBcIjEwMCVcIn19XHJcbiAgICAgICAgICAgIHZhbHVlPXt0ZWFjaGVyLmVtYWlsIHx8IHRlYWNoZXIudXJsfVxyXG4gICAgICAgICAgICBvbktleURvd249e2V2ID0+IHtcclxuICAgICAgICAgICAgICBpZiAoZXYud2hpY2ggPT09IDkgJiZcclxuICAgICAgICAgICAgICAgICAhZXYuc2hpZnRLZXkgJiZcclxuICAgICAgICAgICAgICAgICBpZHggPT09IHRlYWNoZXJzLmxlbmd0aCAtIDEgJiZcclxuICAgICAgICAgICAgICAgICh0ZWFjaGVycy5sZW5ndGggPCAxIHx8ICEhdGVhY2hlcnNbdGVhY2hlcnMubGVuZ3RoIC0gMV0ubmFtZSkpXHJcbiAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgc2V0U2VsZWN0aW5nVGVhY2hlcih0cnVlKTtcclxuICAgICAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICBvbkNoYW5nZT17ZXYgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnN0IGVkaXRlZFRlYWNoZXIgPSB7XHJcbiAgICAgICAgICAgICAgICAuLi50ZWFjaGVyLFxyXG4gICAgICAgICAgICAgICAgdXJsOiBldi50YXJnZXQudmFsdWUsIC8vIFRPRE86IFJlbW92ZSBwcm9wZXJ0eSB1cmwgKHJlbmFtZWQgdG8gJ2VtYWlsJykgd2hlbiBtaWdyYXRlZCBmdWxseSAoYWZ0ZXIgcmVsZWFzaW5nIENsYXNzcm9vbSBJbnRlZ3JhdGlvbilcclxuICAgICAgICAgICAgICAgIGVtYWlsOiBldi50YXJnZXQudmFsdWVcclxuICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgIGlmIChldi50YXJnZXQudmFsdWUgfHwgdGVhY2hlci5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgcm93XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjbG9uZSA9IFsuLi50ZWFjaGVyc107XHJcbiAgICAgICAgICAgICAgICBjbG9uZVtpZHhdID0gZWRpdGVkVGVhY2hlcjtcclxuICAgICAgICAgICAgICAgIG9uVXBkYXRlKGNsb25lKTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHJvd1xyXG4gICAgICAgICAgICAgICAgb25VcGRhdGUoWy4uLnRlYWNoZXJzLnNsaWNlKDAsIGlkeCksIC4uLnRlYWNoZXJzLnNsaWNlKGlkeCArIDEpXSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgfS8+XHJcbiAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBkaXNwbGF5VGVhY2hlclJpZ2h0cyAmJiA8dGQ+XHJcbiAgICAgICAgICAgIDxzZWxlY3QgZGlzYWJsZWQ9eyEodGVhY2hlci5lbWFpbCB8fCB0ZWFjaGVyLnVybCl9IHZhbHVlPXt0ZWFjaGVyLmFjY2VzcyB8fMKgJ2VkaXQnfSBvbkNoYW5nZT17ZXYgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnN0IGNsb25lID0gWy4uLnRlYWNoZXJzXTtcclxuICAgICAgICAgICAgICBjbG9uZVtpZHhdID0gey4uLnRlYWNoZXIsIGFjY2VzczogZXYudGFyZ2V0LnZhbHVlIGFzIFNvZnREb2N1bWVudEFjY2Vzc1tcImFjY2Vzc1wiXX07XHJcbiAgICAgICAgICAgICAgb25VcGRhdGUoY2xvbmUpO1xyXG4gICAgICAgICAgICB9fT5cclxuICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwicmVhZFwiPntMYEzDpHNhYH08L29wdGlvbj5cclxuICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiZWRpdFwiPntMYFJlZGlnZXJhYH08L29wdGlvbj5cclxuICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiZnVsbFwiPntMYEZ1bGxgfTwvb3B0aW9uPlxyXG4gICAgICAgICAgICA8L3NlbGVjdD5cclxuICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgIDxSZW1vdmVJdGVtIG9uQ2xpY2s9eygpPT57XHJcbiAgICAgICAgICAgICAgb25VcGRhdGUoWy4uLnRlYWNoZXJzLnNsaWNlKDAsIGlkeCksIC4uLnRlYWNoZXJzLnNsaWNlKGlkeCArIDEpXSk7XHJcbiAgICAgICAgICAgIH19IC8+XHJcbiAgICAgICAgICA8L3RkPlxyXG4gICAgICAgIDwvdHI+KX1cclxuICAgICAgPC90Ym9keT5cclxuICAgIDwvdGFibGU+XHJcbiAgICA8YnIvPlxyXG4gICAge3NlbGVjdGluZ1RlYWNoZXIgP1xyXG4gICAgICA8T2JzZXJ2ZSBmYWxsYmFjaz17PFNwaW5uZXIgLz59IGVycm9yRmFsbGJhY2s9e0xgS3VuZGVyIGludGUgaMOkbXRhIHNrb2xhbnMgbMOkcmFyZSBmcsOlbiBFRFNgfT5cclxuICAgICAgICA8U2VsZWN0VGVhY2hlclxyXG4gICAgICAgICAgc2Nob29sPXtzY2hvb2x9XHJcbiAgICAgICAgICBzZWxlY3RlZFRlYWNoZXJzPXt0ZWFjaGVyc31cclxuICAgICAgICAgIG9uQmx1cj17KCk9PnNldFNlbGVjdGluZ1RlYWNoZXIoZmFsc2UpfVxyXG4gICAgICAgICAgb25TZWxlY3Q9eyh7bmFtZSwgZW1haWx9KSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBuZXdUZWFjaGVyOiBTb2Z0RG9jdW1lbnRBY2Nlc3MgPSB7XHJcbiAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICAgIGVtYWlsLFxyXG4gICAgICAgICAgICB1cmw6IGVtYWlsLCAvLyBUT0RPOiBSZW1vdmUgcHJvcGVydHkgdXJsIChyZW5hbWVkIHRvICdlbWFpbCcpIHdoZW4gbWlncmF0ZWQgZnVsbHkgKGFmdGVyIHJlbGVhc2luZyBDbGFzc3Jvb20gSW50ZWdyYXRpb24pXHJcbiAgICAgICAgICAgIGFjY2VzczogJ2VkaXQnXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgY29uc3QgY2xvbmUgPSBbLi4udGVhY2hlcnNdO1xyXG4gICAgICAgICAgY2xvbmUucHVzaChuZXdUZWFjaGVyKTtcclxuICAgICAgICAgIG9uVXBkYXRlKGNsb25lKTtcclxuICAgICAgICAgIHNldFNlbGVjdGluZ1RlYWNoZXIoZmFsc2UpO1xyXG4gICAgICAgIH19IC8+XHJcbiAgICAgIDwvT2JzZXJ2ZT4gOlxyXG5cclxuICAgICAgPGEgY2xhc3NOYW1lPVwiYnRuXCIgb25DbGljaz17KCk9PntcclxuICAgICAgICBzZXRTZWxlY3RpbmdUZWFjaGVyKHRydWUpO1xyXG4gICAgICB9fT5cclxuICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtdXNlci1wbHVzXCIgYXJpYS1oaWRkZW4gLz5cclxuICAgICAgIHtMYCBMw6RnZyB0aWxsIGFuc3ZhcmlnIGzDpHJhcmVgfTwvYT59XHJcbiAgPC9kaXY+XHJcbn0iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7UmVzb3VyY2V9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHtMaW5rfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcclxuaW1wb3J0IHtJQ291cnNlRWRpdG9ySG9zdH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9jb3Vyc2UtZWRpdG9yLWhvc3QnO1xyXG5pbXBvcnQge0VkaXRSZXNvdXJjZX0gZnJvbSAnLi4vbW9kYWwtcGFnZXMvZWRpdC1yZXNvdXJjZSc7XHJcbmltcG9ydCB7IHVwZGF0ZU1vZGlmaWNhdGlvbkFuZENyZWF0aW9uU3RhbXBzIH0gZnJvbSAnLi4vdXRpbHMnO1xyXG5pbXBvcnQgZW52IGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCB7IEVkaXRXb3JrZmxvd0xpbmsgfSBmcm9tICcuLi9tb2RhbC1wYWdlcy9lZGl0LXdvcmtmbG93LWxpbmsnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICB1cmw6IHN0cmluZztcclxuICBvblVwZGF0ZTogKHVwZGF0ZXMpID0+IHZvaWQ7XHJcbiAgaG9zdDogSUNvdXJzZUVkaXRvckhvc3Q7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBFZGl0YWJsZVdvcmtGbG93TGluayBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcz4ge1xyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZT17fTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHtob3N0LCBvblVwZGF0ZSwgdXJsfSA9IHRoaXMucHJvcHM7XHJcbiAgICByZXR1cm4gPGRpdj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YXNrQ29udGFpbmVyXCI+XHJcbiAgICAgICAge3VybCAmJlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgICAgICAgPGEgY2xhc3NOYW1lPVwiZWRpdEl0ZW1cIiBvbkNsaWNrPXsoKT0+aG9zdC5vcGVuRGlhbG9nKHtcclxuICAgICAgICAgICAgICAgIENvbXBvbmVudDogRWRpdFdvcmtmbG93TGluayxcclxuICAgICAgICAgICAgICAgIHByb3BzOiB7XHJcbiAgICAgICAgICAgICAgICAgIHVybCxcclxuICAgICAgICAgICAgICAgICAgb25TYXZlOiBuZXdVcmwgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIG9uVXBkYXRlKHskc2V0OiBuZXdVcmx9KTtcclxuICAgICAgICAgICAgICAgICAgICBob3N0LmNsb3NlRGlhbG9nKCk7XHJcbiAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgIG9uRGVsZXRlOiAoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgIG9uVXBkYXRlKHskc2V0OiB1bmRlZmluZWR9KTtcclxuICAgICAgICAgICAgICAgICAgICBob3N0LmNsb3NlRGlhbG9nKCk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9KX0+PC9hPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICAgICAgICA8YSBocmVmPXt1cmx9IHRhcmdldD1cIl9ibGFua1wiID5OdXZhcmFuZGUgYXJiZXRzZ8Olbmc8L2E+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgfVxyXG4gICAgIDwvZGl2PlxyXG4gICAgeyF1cmwgJiYgPGEgY2xhc3NOYW1lPVwiYnRuXCIgb25DbGljaz17KCk9Pmhvc3Qub3BlbkRpYWxvZyh7XHJcbiAgICAgIENvbXBvbmVudDogRWRpdFdvcmtmbG93TGluayxcclxuICAgICAgcHJvcHM6IHtcclxuICAgICAgICBvblNhdmU6IG5ld1VybCA9PiB7XHJcbiAgICAgICAgICBvblVwZGF0ZSh7JHNldDogbmV3VXJsfSlcclxuICAgICAgICAgIGhvc3QuY2xvc2VEaWFsb2coKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pfT48aSBjbGFzc05hbWU9XCJmYSBmYS1wYXBlcmNsaXBcIiBhcmlhLWhpZGRlbj48L2k+IEtvcHBsYSBlbiBhcmJldHNnw6VuZyB0aWxsIGt1cnNlbjwvYT59XHJcbiAgICA8L2Rpdj5cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQge0tub3dsZWRnZVJlcXVpcmVtZW50fSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IEwgfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IGdldFBhcnRpYWxDb250ZW50RGVmYXVsdFZpZXcsIGdldFJlcXVpcm1lbnRTZW50ZW5jZXMsIGdldENvdmVyZWRTZW50ZWNlcywgZ2V0U2F2ZWRTZW50ZW5jZXMsIFxyXG4gIGlzUGFydGlhbENvdmVyZWRSZXF1aXJtZW50LCBnZXRNaWdyYXRpb25UaXRsZSwgZ2V0U29ydGVkUmVxdWlybWVudHMsIGFsbFJlcXVpcmVtZW50U2VudGVjZXNNYXJrZWQgfSBmcm9tICcuLi9rbm93bGVkZ2UtbWF0cml4LXBhcnRpYWwtdXRpbHMnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBrbm93bGVkZ2VSZXF1aXJlbWVudHM6IEtub3dsZWRnZVJlcXVpcmVtZW50W107XHJcbiAgaWRzVG9NYXJrTm90T2s/OiB7W2lkOiBzdHJpbmddOiB0cnVlfTtcclxuICBleHBsYWluZWRSZXF1aXJlbWVudHM/OiB7W3JlcXVpcmVtZW50SWQ6IHN0cmluZ106IHN0cmluZ31cclxuICBwYXJ0aWFsUmVxdWlybWVudHM/OiB7W2lkOiBzdHJpbmddOiBzdHJpbmdbXX1cclxuICAvLyBQcm9wcyB1c2VkIGluIGVkaXQgbW9kZSAoZWRpdGluZyBjb3Vyc2UgdGVtcGxhdGVzKVxyXG4gIC8vY292ZXJlZElkcz86IHN0cmluZ1tdO1xyXG4gIC8vIFByb3BzIHVzZWQgaW4gbWFyayBtb2RlIChlZGl0aW5nIHRhc2tzKVxyXG4gIG1hcmtNb2RlPzogYm9vbGVhbjtcclxuICBtYXJrZWRJZHM/OiBzdHJpbmdbXTtcclxuICBtaWdyYXRlZElkcz86IHtbaWQ6IHN0cmluZ106IGFueX07XHJcbiAgb25NYXJrQ2hhbmdlZDogKGlkOiBzdHJpbmcsIGlzTWFya2VkOiBib29sZWFuKSA9PiB2b2lkO1xyXG4gIG9uRXhwbGFpbmVkUmVxdWlyZW1lbnRzQ2hhbmdlZD86IChyZXFJZDogc3RyaW5nLCB0ZXh0OiBzdHJpbmcpID0+IHZvaWQ7XHJcbiAgb25VcGRhdGVQYXJ0aWFsS25vd2xlZGdlPzogKHJlcUlkOiBzdHJpbmcsIHRleHQ6IHN0cmluZ1tdKSA9PiB2b2lkO1xyXG4gIG1hcmtCeVNlbnRlbmNlVmlldz86IGJvb2xlYW47XHJcbiAgY292ZXJlZFBhcnRpYWxSZXF1aXJtZW50cz86IHtbaWQ6IHN0cmluZ106IHN0cmluZ1tdfVtdO1xyXG4gIG1hcmtQYXJ0aWFsRmVhdHVyZUVuYWJsZWQ/OiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgS25vd2xlZGdlTWF0cml4IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLCB7fT4ge1xyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gIH1cclxuXHJcbiAgZ2V0S25vd2xlZGdlU2VudGVuY2VzQ29udGVudChyZXF1aXJlbWVudDogS25vd2xlZGdlUmVxdWlyZW1lbnQsIHBhcnRpYWxSZXF1aXJtZW50czogc3RyaW5nW10sIGluZGV4OiBudW1iZXIsIG1hcmtlZE9rOiBib29sZWFuLCBpc01pZ3JhdGVkOiBib29sZWFuKSB7XHJcbiAgICBjb25zdCB7Y292ZXJlZFBhcnRpYWxSZXF1aXJtZW50cywgbWFya01vZGV9ID0gdGhpcy5wcm9wcztcclxuICAgIC8vc3BsaXQgdGV4dCBpbiBzZW50ZWNlc1xyXG4gICAgdmFyIHRleHRTZW50ZW5jZXMgPSBnZXRSZXF1aXJtZW50U2VudGVuY2VzKHJlcXVpcmVtZW50Lm5hbWUpO1xyXG5cclxuICAgIC8vZ2V0IHNhdmVkIHNlbmNlbnRlY2VzIGZvciB0aGUgY3VycmVudCByZXF1aXJlbWVudFxyXG4gICAgdmFyIHJvd1JlcXVpcm1lbnRzID0gcGFydGlhbFJlcXVpcm1lbnRzICYmIGdldFNhdmVkU2VudGVuY2VzKHBhcnRpYWxSZXF1aXJtZW50cyk7XHJcbiAgICAvL2dldCBhbGwgc2F2ZWQgc2VudGVjZXMgZXhjbHVkaW5nIHRoZSBjdXJyZW50IG9uZXNcclxuICAgIHZhciBhbGxDb3ZlcmVkU2VudGVuY2VSZXEgPSBjb3ZlcmVkUGFydGlhbFJlcXVpcm1lbnRzICYmIGdldENvdmVyZWRTZW50ZWNlcyhjb3ZlcmVkUGFydGlhbFJlcXVpcm1lbnRzLCByZXF1aXJlbWVudC5pZCk7XHJcblxyXG4gICAgcmV0dXJuIDx0ZCBrZXk9e2luZGV4fSB0aXRsZT17Z2V0TWlncmF0aW9uVGl0bGUoaXNNaWdyYXRlZCwgbWFya01vZGUpfT57dGV4dFNlbnRlbmNlcy5tYXAoKHNlbnRlbmNlLCBrKSA9PiB7XHJcbiAgICAgIHZhciB0cmltbWVkU2VudGVuY2UgPSBzZW50ZW5jZS50cmltKCk7XHJcbiAgICAgIHZhciBoYXNWYWx1ZSA9IHJvd1JlcXVpcm1lbnRzICYmIHJvd1JlcXVpcm1lbnRzLmluY2x1ZGVzKHRyaW1tZWRTZW50ZW5jZSkgfHwgbWFya2VkT2sgJiYgIXJvd1JlcXVpcm1lbnRzO1xyXG4gICAgICB2YXIgc2VudGVuY2VOb3RNYXJrZWQgPSAhYWxsQ292ZXJlZFNlbnRlbmNlUmVxLmluY2x1ZGVzKHRyaW1tZWRTZW50ZW5jZSk7XHJcblxyXG4gICAgICByZXR1cm4gPHNwYW4ga2V5PXtrfSBkYW5nZXJvdXNseVNldElubmVySFRNTD17eyBfX2h0bWw6IHNlbnRlbmNlID8gc2VudGVuY2UgKyBcIi5cIiA6IFwiXCIgfX1cclxuICAgICAgICBjbGFzc05hbWU9e1wic2VsZWN0YWJsZVwiICsgKGhhc1ZhbHVlID8gXCIgbWFya2VkR3JlZW5cIiA6IChzZW50ZW5jZU5vdE1hcmtlZCA/IFwiIG1hcmtlZFJlZFwiIDogXCJcIikpfVxyXG4gICAgICAgIG9uQ2xpY2s9eygpID0+IHtcclxuICAgICAgICAgIHZhciB1cGRhdGVkUmVxdWlybWVudHMgPSBwYXJ0aWFsUmVxdWlybWVudHMgPyBPYmplY3QuYXNzaWduKFtdLCBwYXJ0aWFsUmVxdWlybWVudHMpIDogW107XHJcbiAgICAgICAgICB2YXIgc2hvdWxkQmVSZW1vdmVkID0gcm93UmVxdWlybWVudHMgJiYgcm93UmVxdWlybWVudHMuaW5jbHVkZXModHJpbW1lZFNlbnRlbmNlKTtcclxuICAgICAgICAgIC8vY2hlY2sgaWYgbm8gcGFydGlhbCBkYXRhIHNhdmVkLCBidXQgdGhlIHJlcXVpcm1lbnQgaXMgbWFya2VkT2tcclxuICAgICAgICAgIGlmIChtYXJrZWRPayAmJiAoIXJvd1JlcXVpcm1lbnRzIHx8IHJvd1JlcXVpcm1lbnRzLmxlbmd0aCA9PSAwKSkge1xyXG4gICAgICAgICAgICAvL3NhdmUgYWxsIGV4Y2VwdGluZyB0aGUgb25lIHRoYXQgc2hvdWxkIGJlIHJlbW92ZWRcclxuICAgICAgICAgICAgdXBkYXRlZFJlcXVpcm1lbnRzID0gdGV4dFNlbnRlbmNlcy5maWx0ZXIoeCA9PiB4ICE9IHNlbnRlbmNlKTtcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5vblVwZGF0ZVBhcnRpYWxLbm93bGVkZ2UocmVxdWlyZW1lbnQuaWQsIGdldFNvcnRlZFJlcXVpcm1lbnRzKHRleHRTZW50ZW5jZXMsIHVwZGF0ZWRSZXF1aXJtZW50cykpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHNob3VsZEJlUmVtb3ZlZCkge1xyXG4gICAgICAgICAgICAgIHVwZGF0ZWRSZXF1aXJtZW50cyA9IHBhcnRpYWxSZXF1aXJtZW50cy5maWx0ZXIocmVxID0+IHJlcSAhPSBzZW50ZW5jZSlcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICB1cGRhdGVkUmVxdWlybWVudHMucHVzaChzZW50ZW5jZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5vblVwZGF0ZVBhcnRpYWxLbm93bGVkZ2UocmVxdWlyZW1lbnQuaWQsIGdldFNvcnRlZFJlcXVpcm1lbnRzKHRleHRTZW50ZW5jZXMsIHVwZGF0ZWRSZXF1aXJtZW50cykpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfX0+PC9zcGFuPlxyXG4gICAgfSl9PC90ZD5cclxuICB9XHJcblxyXG4gIG9uUmVxdWlyZW1lbnRDaGFuZ2VkKHJlcXVpcmVtZW50OiBLbm93bGVkZ2VSZXF1aXJlbWVudCwgdmFsdWU6IGJvb2xlYW4sIHBhcnRpYWxWYWx1ZXM6IHN0cmluZ1tdLCBhbGxQYXJ0aWFsTWFya2VkOiBib29sZWFuKSB7XHJcbiAgICBpZiAodGhpcy5wcm9wcy5vblVwZGF0ZVBhcnRpYWxLbm93bGVkZ2UpIHtcclxuICAgICAgLy9yZW1vdmUgYWxsIHNhdmVkIHNlbnRlY2VzIGlmIHRoZSByZXF1aXJlbWVudCBpcyB1bmNoZWNrZWRcclxuICAgICAgKHZhbHVlICYmICFwYXJ0aWFsVmFsdWVzIHx8IGFsbFBhcnRpYWxNYXJrZWQpID8gdGhpcy5wcm9wcy5vblVwZGF0ZVBhcnRpYWxLbm93bGVkZ2UocmVxdWlyZW1lbnQuaWQsIFtdKSA6IHRoaXMucHJvcHMub25VcGRhdGVQYXJ0aWFsS25vd2xlZGdlKHJlcXVpcmVtZW50LmlkLCBnZXRSZXF1aXJtZW50U2VudGVuY2VzKHJlcXVpcmVtZW50Lm5hbWUpKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5wcm9wcy5vbk1hcmtDaGFuZ2VkKHJlcXVpcmVtZW50LmlkLCAhdmFsdWUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3QgeyBrbm93bGVkZ2VSZXF1aXJlbWVudHMsIG1hcmtlZElkcywgbWlncmF0ZWRJZHMsIGV4cGxhaW5lZFJlcXVpcmVtZW50cywgbWFya0J5U2VudGVuY2VWaWV3LCBtYXJrUGFydGlhbEZlYXR1cmVFbmFibGVkfSA9IHRoaXMucHJvcHM7XHJcbiAgICBjb25zdCB7IGlkc1RvTWFya05vdE9rLCBtYXJrTW9kZSwgb25FeHBsYWluZWRSZXF1aXJlbWVudHNDaGFuZ2VkLCBwYXJ0aWFsUmVxdWlybWVudHMsIGNvdmVyZWRQYXJ0aWFsUmVxdWlybWVudHMgfSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgY29uc3QgY29sdW1ucyA9IFtcIkVcIiwgXCJDXCIsIFwiQVwiXTtcclxuICAgIGNvbnN0IHJvd3M6IEtub3dsZWRnZVJlcXVpcmVtZW50W11bXSA9IFtdO1xyXG4gICAgY29uc3QgcmVxcyA9IGtub3dsZWRnZVJlcXVpcmVtZW50cy5zbGljZSgpO1xyXG4gICAgbGV0IHJvdzogS25vd2xlZGdlUmVxdWlyZW1lbnRbXSB8IG51bGwgPSBudWxsO1xyXG4gICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgcm93ID0gY29sdW1ucy5tYXAoZ3JhZGUgPT4ge1xyXG4gICAgICAgIGNvbnN0IHBOZXh0ID0gcmVxcy5maW5kSW5kZXgociA9PiByLmdyYWRlU3RlcCAmJiByLmdyYWRlU3RlcC50b1VwcGVyQ2FzZSgpID09PSBncmFkZSk7XHJcbiAgICAgICAgaWYgKHBOZXh0IDwgMCkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgY29uc3QgcnYgPSByZXFzW3BOZXh0XTtcclxuICAgICAgICByZXFzLnNwbGljZShwTmV4dCwgMSk7XHJcbiAgICAgICAgcmV0dXJuIHJ2O1xyXG4gICAgICB9KTtcclxuICAgICAgaWYgKHJvdy5ldmVyeShyID0+IHIgPT09IG51bGwpKVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICByb3dzLnB1c2gocm93KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gPHRhYmxlIGNsYXNzTmFtZT1cImtub3dsZWRnZS1tYXRyaXhcIj5cclxuICAgICAgICA8dGhlYWQ+XHJcbiAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgIHtjb2x1bW5zLm1hcChjID0+IDx0aCBrZXk9e2N9PntjfTwvdGg+KX1cclxuICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgPC90aGVhZD5cclxuICAgICAgICA8dGJvZHk+XHJcbiAgICAgICAgICB7cm93cy5tYXAoKHJvdyxpKSA9PiA8UmVhY3QuRnJhZ21lbnQga2V5PXtpfT5cclxuICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgIHtyb3cubWFwKChyZXF1aXJlbWVudCxqKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpc01hcmtlZE9LID0gcmVxdWlyZW1lbnQgJiYgbWFya2VkSWRzICYmIG1hcmtlZElkcy5pbmRleE9mKHJlcXVpcmVtZW50LmlkKSA+PSAwO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaXNNYXJrZWROb3RPSyA9IHJlcXVpcmVtZW50ICYmIGlkc1RvTWFya05vdE9rICYmIGlkc1RvTWFya05vdE9rW3JlcXVpcmVtZW50LmlkXTsvL25vdCB1c2VkIGFueW1vcmVcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlzTWlncmF0ZWQgPSByZXF1aXJlbWVudCAmJiBtaWdyYXRlZElkcyAmJiAhIW1pZ3JhdGVkSWRzW3JlcXVpcmVtZW50LmlkXTtcclxuICAgICAgICAgICAgICAgIHZhciByb3dQYXJ0aWFsUmVxdWlyZW1lbnRzID0gcGFydGlhbFJlcXVpcm1lbnRzICYmIHBhcnRpYWxSZXF1aXJtZW50c1tyZXF1aXJlbWVudC5pZF07XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydGlhbFZhbHVlcyA9IHJvd1BhcnRpYWxSZXF1aXJlbWVudHMgJiYgZ2V0U2F2ZWRTZW50ZW5jZXMocm93UGFydGlhbFJlcXVpcmVtZW50cyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgYWxsUmVxU2VudGVuY2VzTWFya2VkID0gYWxsUmVxdWlyZW1lbnRTZW50ZWNlc01hcmtlZChyZXF1aXJlbWVudC5uYW1lLCBwYXJ0aWFsVmFsdWVzKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgdmFyIGhhc1BhcnRpYWxDb3ZlcmVkID0gaXNQYXJ0aWFsQ292ZXJlZFJlcXVpcm1lbnQocmVxdWlyZW1lbnQsIGNvdmVyZWRQYXJ0aWFsUmVxdWlybWVudHMpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG1hcmtlZFJlZCA9ICEocGFydGlhbFZhbHVlcyAmJiBwYXJ0aWFsVmFsdWVzLmxlbmd0aCA+IDAgfHwgaGFzUGFydGlhbENvdmVyZWQpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBtYXJrQnlTZW50ZW5jZVZpZXcgJiYgbWFya1BhcnRpYWxGZWF0dXJlRW5hYmxlZCA/IHRoaXMuZ2V0S25vd2xlZGdlU2VudGVuY2VzQ29udGVudChyZXF1aXJlbWVudCwgcm93UGFydGlhbFJlcXVpcmVtZW50cywgaiwgaXNNYXJrZWRPSywgaXNNaWdyYXRlZCkgOlxyXG4gICAgICAgICAgICAgICAgPHRkXHJcbiAgICAgICAgICAgICAgICAgIGtleT17an1cclxuICAgICAgICAgICAgICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3tfX2h0bWw6IHJlcXVpcmVtZW50ID8gKHJvd1BhcnRpYWxSZXF1aXJlbWVudHMgJiYgcm93UGFydGlhbFJlcXVpcmVtZW50cy5sZW5ndGggfHwgaGFzUGFydGlhbENvdmVyZWQpID8gXHJcbiAgICAgICAgICAgICAgICAgICAgZ2V0UGFydGlhbENvbnRlbnREZWZhdWx0VmlldyhyZXF1aXJlbWVudCwgcm93UGFydGlhbFJlcXVpcmVtZW50cywgY292ZXJlZFBhcnRpYWxSZXF1aXJtZW50cywgbWFya2VkUmVkKSA6IHJlcXVpcmVtZW50Lm5hbWUgOiBcIlwifX1cclxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXsobWFya01vZGUgPyBcInNlbGVjdGFibGVcIiA6IFwiXCIpICtcclxuICAgICAgICAgICAgICAgICAgKGlzTWlncmF0ZWQgPyBcIiBtaWdyYXRlZFwiIDogXCJcIikgK1xyXG4gICAgICAgICAgICAgICAgICAoaXNNYXJrZWRPSyAmJiAoIXJvd1BhcnRpYWxSZXF1aXJlbWVudHMgfHwgYWxsUmVxU2VudGVuY2VzTWFya2VkKT9cclxuICAgICAgICAgICAgICAgICAgICBcIiBtYXJrZWRHcmVlblwiIDpcclxuICAgICAgICAgICAgICAgICAgICBtYXJrZWRSZWQgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgXCIgbWFya2VkUmVkXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICBcIlwiKX1cclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXttYXJrTW9kZSAmJiByZXF1aXJlbWVudCA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAoKT0+dGhpcy5vblJlcXVpcmVtZW50Q2hhbmdlZChyZXF1aXJlbWVudCwgaXNNYXJrZWRPSywgcGFydGlhbFZhbHVlcywgYWxsUmVxU2VudGVuY2VzTWFya2VkKSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWR9XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2dldE1pZ3JhdGlvblRpdGxlKGlzTWlncmF0ZWQsIG1hcmtNb2RlKX0gLz5cclxuICAgICAgICAgICAgICB9KX1cclxuICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAge2V4cGxhaW5lZFJlcXVpcmVtZW50cyAmJiA8dHI+XHJcbiAgICAgICAgICAgICAge3Jvdy5tYXAoKHJlcXVpcmVtZW50LGopID0+IHtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0aWFsU2VudGVuY2VzID0gcGFydGlhbFJlcXVpcm1lbnRzICYmIHBhcnRpYWxSZXF1aXJtZW50c1tyZXF1aXJlbWVudC5pZF0gJiYgZ2V0U2F2ZWRTZW50ZW5jZXMocGFydGlhbFJlcXVpcm1lbnRzW3JlcXVpcmVtZW50LmlkXSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpc01hcmtlZE9LID0gcmVxdWlyZW1lbnQgJiYgbWFya2VkSWRzICYmIG1hcmtlZElkcy5pbmRleE9mKHJlcXVpcmVtZW50LmlkKSA+PSAwIHx8IHBhcnRpYWxTZW50ZW5jZXMgJiYgcGFydGlhbFNlbnRlbmNlcy5sZW5ndGggPiAwO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDx0ZCBrZXk9e2p9PlxyXG4gICAgICAgICAgICAgICAgICB7aXNNYXJrZWRPSyA/IDx0ZXh0YXJlYVxyXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtMYEJlc2tyaXYga3JhdmV0YH1cclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJpbnB1dFRleHRCb3ggaW5wdXRUZXh0TGFyZ2VcIiBzdHlsZT17e3dpZHRoOiBcIjEwMCVcIn19XHJcbiAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk9eyFtYXJrTW9kZX1cclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT17ZXhwbGFpbmVkUmVxdWlyZW1lbnRzW3JlcXVpcmVtZW50LmlkXSB8fCBcIlwifVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtvbkV4cGxhaW5lZFJlcXVpcmVtZW50c0NoYW5nZWQgJiYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgZXYgPT4gb25FeHBsYWluZWRSZXF1aXJlbWVudHNDaGFuZ2VkKHJlcXVpcmVtZW50LmlkLCBldi50YXJnZXQudmFsdWUpKX1cclxuICAgICAgICAgICAgICAgICAgLz4gOiB1bmRlZmluZWR9XHJcbiAgICAgICAgICAgICAgICAgIDwvdGQ+fSl9XHJcbiAgICAgICAgICAgIDwvdHI+fVxyXG4gICAgICAgICAgICA8L1JlYWN0LkZyYWdtZW50PlxyXG4gICAgICAgICAgKX1cclxuICAgICAgICA8L3Rib2R5PlxyXG4gICAgICA8L3RhYmxlPlxyXG5cclxuICAgIHsvKnJldHVybiA8ZGl2PlxyXG4gICAgICA8dGFibGU+XHJcbiAgICAgICAgPHRoZWFkPlxyXG4gICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICA8dGg+RTwvdGg+XHJcbiAgICAgICAgICAgIDx0aD5DPC90aD5cclxuICAgICAgICAgICAgPHRoPkE8L3RoPlxyXG4gICAgICAgICAgPC90cj5cclxuICAgICAgICA8L3RoZWFkPlxyXG4gICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgIHt0Ym9keS5tYXAoKHJvdywgaSkgPT4gXHJcbiAgICAgICAgICA8dHIga2V5PXtpfT57cm93Lm1hcCgoY2VsbCwgaikgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpc01hcmtlZE9LID0gcHJvcHMubWFya2VkSWRzICYmIHByb3BzLm1hcmtlZElkcy5pbmRleE9mKGNlbGwuaWQpID49IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzTWFya2VkTm90T0sgPSBwcm9wcy5pZHNUb01hcmtOb3RPayAmJiBwcm9wcy5pZHNUb01hcmtOb3RPa1tjZWxsLmlkXTtcclxuICAgICAgICAgICAgcmV0dXJuIDx0ZFxyXG4gICAgICAgICAgICAgIGtleT17an1cclxuICAgICAgICAgICAgICByb3dTcGFuPXtjZWxsLnJvd1NwYW59XHJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXsocHJvcHMubWFya01vZGUgPyBcInNlbGVjdGFibGVcIiA6IFwiXCIpICtcclxuICAgICAgICAgICAgICAgIChpc01hcmtlZE9LID9cclxuICAgICAgICAgICAgICAgICAgXCIgbWFya2VkR3JlZW5cIiA6XHJcbiAgICAgICAgICAgICAgICAgIChpc01hcmtlZE5vdE9LID9cclxuICAgICAgICAgICAgICAgICAgICBcIiBtYXJrZWRSZWRcIjpcclxuICAgICAgICAgICAgICAgICAgICBcIlwiKSl9XHJcbiAgICAgICAgICAgICAgb25DbGljaz17cHJvcHMubWFya01vZGUgJiYgKCgpPT5wcm9wcy5vbk1hcmtDaGFuZ2VkKGNlbGwuaWQsICFpc01hcmtlZE9LKSl9PlxyXG4gICAgICAgICAgICAgIHtjZWxsLmh0bWwgJiYgPGRpdiBzdHlsZT17e3Bvc2l0aW9uOiAncmVsYXRpdmUnfX0+XHJcbiAgICAgICAgICAgICAgICA8cFxyXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NlbGwudHlwZSA9PT0gJ2FiaWxpdHknID8gJ2FiaWxpdHlUZXh0JyA6ICdjcml0ZXJpYVRleHQnfVxyXG4gICAgICAgICAgICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTD17e19faHRtbDogY2VsbC5odG1sfX0gLz5cclxuICAgICAgICAgICAgICAgIHtwcm9wcy5lZGl0TW9kZSAmJiA8UmVtb3ZlSXRlbSBjbGFzc05hbWU9XCJ1cHBlclJpZ2h0XCIgb25DbGljaz17KCk9PlxyXG4gICAgICAgICAgICAgICAgICB0aGlzLnNldENlbGxJZHMoXHJcbiAgICAgICAgICAgICAgICAgICAgY2VsbC50eXBlLFxyXG4gICAgICAgICAgICAgICAgICAgIGNlbGwucm93SW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRDZWxsSWRzKFxyXG4gICAgICAgICAgICAgICAgICAgICAgY2VsbC50eXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgY2VsbC5yb3dJbmRleCkuZmlsdGVyKGlkID0+IGlkICE9IGNlbGwuaWQpICl9IC8+IH1cclxuICAgICAgICAgICAgICA8L2Rpdj59XHJcbiAgICAgICAgICAgIDwvdGQ+fSl9XHJcbiAgICAgICAgICA8L3RyPil9XHJcbiAgICAgICAgPC90Ym9keT5cclxuICAgICAgPC90YWJsZT5cclxuICAgIDwvZGl2PiovfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEwgfSBmcm9tIFwiLi4vLi4vLi4vdXRpbHMvdXRpbHNcIjtcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgb25DbGljayxcclxuICBjbGFzc05hbWU/LFxyXG4gIHN0eWxlPyxcclxuICB0aXRsZT9cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBSZW1vdmVJdGVtID0gKHsgb25DbGljaywgY2xhc3NOYW1lLCBzdHlsZSwgdGl0bGUgfTogUHJvcHMpID0+XHJcblxyXG4gIDxkaXZcclxuICAgIHRpdGxlPXt0aXRsZSB8fCBMYFJhZGVyYWB9XHJcbiAgICBjbGFzc05hbWU9e1wicmVtb3ZlSXRlbSBcIiArIChjbGFzc05hbWUgfHwgXCJcIil9XHJcbiAgICBvbkNsaWNrPXtvbkNsaWNrfSBzdHlsZT17c3R5bGV9IC8+XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgTCwgc2hvd0Vycm9yLCBjb21wYXJlUHJvcCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgQ291cnNlIH0gZnJvbSBcImtlZGJhY2tlbmQvbW9kZWxzXCI7XHJcbmltcG9ydCB7IG15U2Nob29sQ291cnNlc1JlcG8gfSBmcm9tIFwiLi4vLi4vLi4vcmVwb3Mvc2Nob29sLWNvdXJzZXNcIjtcclxuaW1wb3J0IHsgU3Bpbm5lciB9IGZyb20gXCIuL3NwaW5uZXJcIjtcclxuaW1wb3J0IHsgTGluayB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xyXG5pbXBvcnQgeyBzaG9ydERhdGVGb3JtYXQgfSBmcm9tIFwiLi4vdXRpbHNcIjtcclxuaW1wb3J0IGVudiBmcm9tICcuLi8uLi8uLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5pbXBvcnQgeyBPcGVuQ2xvc2VCb3ggfSBmcm9tICcuLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvb3Blbi1jbG9zZS1ib3gnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxufVxyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICBzY2hvb2xDb3Vyc2VzOiBDb3Vyc2VbXSB8IG51bGw7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBTY2hvb2xDb3Vyc2VzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLFN0YXRlPiB7XHJcbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICBzY2hvb2xDb3Vyc2VzOiBudWxsXHJcbiAgICB9XHJcbiAgICB0aGlzLm9uU2Nob29sQ291cnNlc1VwZGF0ZWQgPSB0aGlzLm9uU2Nob29sQ291cnNlc1VwZGF0ZWQuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gICAgbXlTY2hvb2xDb3Vyc2VzUmVwby5zdWJzY3JpYmUodGhpcy5vblNjaG9vbENvdXJzZXNVcGRhdGVkKS5jYXRjaChzaG93RXJyb3IpO1xyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XHJcbiAgICBteVNjaG9vbENvdXJzZXNSZXBvLnVuc3Vic2NyaWJlKHRoaXMub25TY2hvb2xDb3Vyc2VzVXBkYXRlZCk7XHJcbiAgfVxyXG5cclxuICBvblNjaG9vbENvdXJzZXNVcGRhdGVkKHNjaG9vbENvdXJzZXM6IENvdXJzZVtdKSB7XHJcbiAgICBjb25zdCBjb21wYXJlTmFtZSA9IGNvbXBhcmVQcm9wKFwibmFtZVwiKTtcclxuICAgIGNvbnN0IGNvbXBhcmVDcmVhdGVkRGF0ZSA9IGNvbXBhcmVQcm9wKFwiY3JlYXRlZERhdGVcIik7XHJcbiAgICBzY2hvb2xDb3Vyc2VzLnNvcnQoKGEsYikgPT4gY29tcGFyZU5hbWUoYSxiKSB8fCBjb21wYXJlQ3JlYXRlZERhdGUoYSxiKSk7XHJcbiAgICB0aGlzLnNldFN0YXRlKHtzY2hvb2xDb3Vyc2VzfSk7XHJcbiAgfVxyXG5cclxuICBvdXRwdXRDb3Vyc2VzKGNvdXJzZXMsIGhlYWRlciwgb3Blbikge1xyXG4gICAgcmV0dXJuICg8T3BlbkNsb3NlQm94IHRpdGxlPXs8cD57aGVhZGVyfTwvcD59IGhlYWRlck9wZW49e29wZW59IGNvbnRlbnRDbGFzc05hbWU9XCJvZGQtZXZlblwiPlxyXG4gICAgICB7Y291cnNlcy5tYXAoY291cnNlID0+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2Nob29sQ291cnNlXCIga2V5PXtjb3Vyc2UuaWR9PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbFwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3AgcHVsbC1yaWdodFwiPlxyXG4gICAgICAgICAgICA8TGlua1xyXG4gICAgICAgICAgICAgIHRvPXtgL2NvdXJzZXMvJHtjb3Vyc2UuaWR9L2VkaXRgfVxyXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cImVkaXRJdGVtXCJcclxuICAgICAgICAgICAgLz5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICAgICAgPExpbmsgdG89e2AvY291cnNlcy8ke2NvdXJzZS5pZH0vZWRpdGB9Pntjb3Vyc2UubmFtZX08L0xpbms+PC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgICAgICAge2NvdXJzZS5hY3RpdmUgJiYgPGRpdiBjbGFzc05hbWU9XCJwaWxsIGFjdGl2ZVwiPkFrdGl2PC9kaXY+fVxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAge2NvdXJzZS5hY3RpdmUgJiYgIWNvdXJzZS5wdWJsaXNoYWJsZSAmJiA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBpbGwgaW5jb21wbGV0ZVwiPklua29tcGxldHQ8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2Pn1cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgPHA+e2NvdXJzZS5kZXNjcmlwdGlvbn08L3A+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICAgIHtjb3Vyc2UubW9kaWZpZWRCeSA/XHJcbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInNtYWxsXCI+UmVkaWdlcmFkIGF2IHtjb3Vyc2UubW9kaWZpZWRCeS5uYW1lfSAvIHtzaG9ydERhdGVGb3JtYXQoY291cnNlLm1vZGlmaWVkRGF0ZSl9PC9wPiA6XHJcbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInNtYWxsXCIgc3R5bGU9e3tmb250U3R5bGU6ICdpdGFsaWMnfX0+IDwvcD59XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2Pil9XHJcblxyXG4gICAgICA8L09wZW5DbG9zZUJveD5cclxuICAgIClcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHtzY2hvb2xDb3Vyc2VzfSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgY29uc3QgbXlDb3Vyc2VzID0gW107XHJcbiAgICBjb25zdCBvdGhlcnNDb3Vyc2VzID0gW107XHJcblxyXG4gICAgaWYgKHNjaG9vbENvdXJzZXMpIHtcclxuICAgICAgY29uc3QgbWUgPSBlbnYuY3VycmVudFVzZXIubWFpbDtcclxuICBcclxuICAgICAgc2Nob29sQ291cnNlcy5mb3JFYWNoKGNvdXJzZSA9PiB7XHJcbiAgICAgICAgaWYgKGNvdXJzZS5hY3RpdmF0ZWRCeSAmJiBjb3Vyc2UuYWN0aXZhdGVkQnkudXJsID09IG1lKSB7XHJcbiAgICAgICAgICBteUNvdXJzZXMucHVzaChjb3Vyc2UpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoY291cnNlLnJlc3BvbnNpYmxlVGVhY2hlcnMuZmlsdGVyKHQgPT4gdC51cmwgPT0gbWUpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIG15Q291cnNlcy5wdXNoKGNvdXJzZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIG90aGVyc0NvdXJzZXMucHVzaChjb3Vyc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7ICBcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJzdi1odG1sLXBvcnRsZXQgc3YtcG9ydGxldCBzdi1za2lwLXNwYWNlclwiPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImtlZF9ib3hlZFwiPlxyXG4gICAgICAgIDxoMz5Ta29sYW5zIGt1cnNlcjwvaDM+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YXNrQ29udGFpbmVyIG9kZC1ldmVuXCI+XHJcbiAgICAgICAgICB7IXNjaG9vbENvdXJzZXMgP1xyXG4gICAgICAgICAgICA8cD48U3Bpbm5lciAvPiBMYWRkYXIgc2tvbGFucyBrdXJzZXI8L3A+IDpcclxuICAgICAgICAgICAgPD5cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIHRoaXMub3V0cHV0Q291cnNlcyhteUNvdXJzZXMsICdNaW5hIGt1cnNlcicsIHRydWUpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIHRoaXMub3V0cHV0Q291cnNlcyhvdGhlcnNDb3Vyc2VzLCAnQW5kcmEga3Vyc2VyJywgZmFsc2UpXHJcbiAgICAgICAgICAgIH0gIFxyXG4gICAgICAgICAgPC8+fVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIHtsb2NhdGlvbi5oYXNoICE9PSBcIiMvY291cnNlcy9uZXdcIiAmJiA8TGlua1xyXG4gICAgICAgICAgY2xhc3NOYW1lPVwiYnRuXCJcclxuICAgICAgICAgIHRvPVwiL2NvdXJzZXMvbmV3XCJcclxuICAgICAgICAgIG9uQ2xpY2s9eygpPT53aW5kb3cuc2Nyb2xsKDAsIDApfT5cclxuICAgICAgICAgIFNrYXBhIG55IGt1cnNcclxuICAgICAgICA8L0xpbms+fVxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IENvdXJzZSwgQ291cnNlTW9kdWxlLCBUYXNrLCBEb2N1bWVudCB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgT3BlbkNsb3NlQm94IH0gZnJvbSBcIi4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9vcGVuLWNsb3NlLWJveFwiO1xyXG5pbXBvcnQgeyBhcnJheVRvTG9va3VwIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBnZXRVbmNvdmVyZWRLbm93bGVkZ2VSZXF1aXJlbWVudHMgfSBmcm9tICcuLi9jb3Vyc2VzL2J1c2luZXNzLWxvZ2ljJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgb3B0aW9uczogKERvY3VtZW50ICYge2dyb3VwPzogc3RyaW5nfSlbXTtcclxuICB0aXRsZTtcclxuICBtYXJrTW9kZTogYm9vbGVhbjtcclxuICBtYXJrZWRJZHM6IHN0cmluZ1tdO1xyXG4gIG1pZ3JhdGVkSWRzPzoge1tpZDogc3RyaW5nXTogYW55fTtcclxuICB1bmNvdmVyZWRJZHM/OiB7W2lkOiBzdHJpbmddOiB0cnVlfTtcclxuICBvbk1hcmtDaGFuZ2VkOiAoaWQ6IHN0cmluZywgaXNNYXJrZWQ6IGJvb2xlYW4pID0+IHZvaWQ7XHJcbn1cclxuXHJcbmludGVyZmFjZSBTdGF0ZSB7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBTZWxlY3RSZWxhdGVkRG9jcyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcyxTdGF0ZT4ge1xyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHt9O1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3Qge29wdGlvbnMsIHRpdGxlLCBtYXJrZWRJZHMsIG1hcmtNb2RlLCBtaWdyYXRlZElkcywgdW5jb3ZlcmVkSWRzfSA9IHRoaXMucHJvcHM7XHJcbiAgICBjb25zdCBncm91cGVkT3B0aW9ucyA9IGFycmF5VG9Mb29rdXAob3B0aW9ucywgZCA9PiBkLmdyb3VwIHx8IFwiZGVmYXVsdFwiKTtcclxuICAgIGNvbnN0IGdyb3VwcyA9IE9iamVjdC5rZXlzKGdyb3VwZWRPcHRpb25zKTtcclxuICAgIHJldHVybiA8T3BlbkNsb3NlQm94IHRpdGxlPXs8cD57dGl0bGV9PC9wPn0gY2xhc3NOYW1lPVwibGFyZ2VyXCI+XHJcbiAgICAgICAge2dyb3Vwcy5tYXAoZ3JvdXAgPT4gPFJlYWN0LkZyYWdtZW50IGtleT17Z3JvdXB9PlxyXG4gICAgICAgICAge2dyb3Vwcy5sZW5ndGggPT09IDEgPyBudWxsIDogPD48YnIvPjxoNT57Z3JvdXB9PC9oNT48aHIvPjwvPn1cclxuICAgICAgICAgIHtncm91cGVkT3B0aW9uc1tncm91cF0ubWFwKG9wdGlvbiA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzTWFya2VkID0gbWFya2VkSWRzLnNvbWUoeCA9PiB4ID09PSBvcHRpb24uaWQpO1xyXG4gICAgICAgICAgICBjb25zdCBpc01pZ3JhdGVkID0gbWlncmF0ZWRJZHMgJiYgISFtaWdyYXRlZElkc1tvcHRpb24uaWRdO1xyXG4gICAgICAgICAgICBjb25zdCBpc1VuY292ZXJlZCA9IHVuY292ZXJlZElkcyAmJiB1bmNvdmVyZWRJZHNbb3B0aW9uLmlkXTtcclxuICAgICAgICAgICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbFwiIGtleT17b3B0aW9uLmlkfSBvbkNsaWNrPXsoKT0+XHJcbiAgICAgICAgICAgICAgbWFya01vZGUgJiYgdGhpcy5wcm9wcy5vbk1hcmtDaGFuZ2VkKG9wdGlvbi5pZCwgIWlzTWFya2VkKX0+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e1wiaG9yaXpvbnRhbEl0ZW0gdG9wIHNwYWNlZFwiICtcclxuICAgICAgICAgICAgICAgIChtYXJrTW9kZSA/IFwiIHNlbGVjdGFibGVcIiA6IFwiXCIpICtcclxuICAgICAgICAgICAgICAgIChpc01hcmtlZCA/IFwiIG1hcmtlZEdyZWVuXCIgOiAoaXNVbmNvdmVyZWQgP1xyXG4gICAgICAgICAgICAgICAgICBcIiBtYXJrZWRSZWRcIjpcclxuICAgICAgICAgICAgICAgICAgXCJcIikpICtcclxuICAgICAgICAgICAgICAgIChpc01pZ3JhdGVkID8gXCIgbWlncmF0ZWRcIiA6IFwiXCIpfVxyXG4gICAgICAgICAgICAgICAgdGl0bGU9e2lzTWlncmF0ZWQgP1xyXG4gICAgICAgICAgICAgICAgICBtYXJrTW9kZSA/XHJcbiAgICAgICAgICAgICAgICAgICAgYFNrb2x2ZXJrZXQgaGFyIHVwcGRhdGVyYXQgdGV4dGVucyBmb3JtdWxlcmluZy4gRHUga2FuIGdyYW5za2Egw6RuZHJpbmdlbiBnZW5vbSBhdHQgZsOkbGxhIHV0IHZhcm5pbmdzYm94ZW4gdGlsbCBow7ZnZXIsIG1lZCB0aXRlbCBcIlVwcGRhdGVyYWRlIGZvcm11bGVyaW5nYXIgZnLDpW4gU2tvbHZlcmtldFwiYCA6XHJcbiAgICAgICAgICAgICAgICAgICAgYFNrb2x2ZXJrZXQgaGFyIHVwcGRhdGVyYXQgdGV4dGVucyBmb3JtdWxlcmluZywgbWVuIGRldHRhIGhhciDDpG5udSBpbnRlIGdyYW5za2F0cyBhdiB1cHBnaWZ0ZW5zIHJlZGlnZXJpbmdzYmVow7ZyaWdlYCA6XHJcbiAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZH0+XHJcbiAgICAgICAgICAgICAgICA8cCBkYW5nZXJvdXNseVNldElubmVySFRNTD17e19faHRtbDogb3B0aW9uLm5hbWV9fSAvPlxyXG4gICAgICAgICAgICAgICAgPGJyIC8+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PjtcclxuICAgICAgICAgIH0pfVxyXG4gICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+KX1cclxuICAgIDwvT3BlbkNsb3NlQm94PlxyXG4gIH1cclxufSIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEwgfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCBTZWxlY3QgZnJvbSAncmVhY3Qtc2VsZWN0JztcclxuaW1wb3J0IHsgZW52IH0gZnJvbSAnLi4vLi4vLi4vZ2xvYmFscy9LRUQuZW52JztcclxuaW1wb3J0IHsgZGIgfSBmcm9tICcuLi8uLi8uLi9nbG9iYWxzL2RiJztcclxuaW1wb3J0IHsgbW9ja1R1aXRpb25Hcm91cHMgfSBmcm9tICcuLi8uLi8uLi9hcGlzL21vY2svbW9jay1jbGFzc3Jvb20tZGF0YSc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHNjaG9vbDogc3RyaW5nXHJcbiAgY291cnNlQ29kZTogc3RyaW5nXHJcbiAgc2VsZWN0ZWRTdHVkeUdyb3Vwczogc3RyaW5nW11cclxuICBvblVwZGF0ZTogKHN0dWR5R3JvdXBzOiBzdHJpbmdbXSkgPT4gdm9pZFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gU2VsZWN0U3R1ZHlHcm91cHMgKHtzY2hvb2wsIGNvdXJzZUNvZGUsIHNlbGVjdGVkU3R1ZHlHcm91cHMsIG9uVXBkYXRlfTogUHJvcHMpIHtcclxuXHJcbiAgLy8gTW9jay1kYXRhIGZvciBLRURcclxuICBjb25zdCBlbXB0eU9yTW9jayA9IHNjaG9vbCA9PT0gJ0tFRCcgJiYgbW9ja1R1aXRpb25Hcm91cHNbY291cnNlQ29kZV0/IG1vY2tUdWl0aW9uR3JvdXBzW2NvdXJzZUNvZGVdIDogW107XHJcblxyXG5cclxuICAvLyBNYXAgZ2l2ZW4ge3NjaG9vbH0gdG8gaXRzIG5hbWUgaW4gRURTOlxyXG4gIGNvbnN0IHtlZHNTY2hvb2xOYW1lR3ltbn0gPSBkYi5zY2hvb2xzXHJcbiAgICAuY2FjaGVPcHRpbWl6ZWQoKSAvLyBXaWxsIGFkZCBjYWNoZUJ1c3QgdG8gdGhlIHF1ZXJ5IChtYWtpbmcgc2VydmVyIGFkZCBjYWNoZSBoZWFkZXIpXHJcbiAgICAubmFtZShzY2hvb2wpLnNpbmdsZSgpIC8vIEdldCB0aGUgc2luZ2xlIHNjaG9vbCBpbnN0YW5jZSB3aXRoIG5hbWU9e3NjaG9vbH1cclxuICAgIC5yZWFkKCk7IC8vIFJlYWQgaXQgdGhlIHN1c3BlbnNlLXdheSAodGhyb3dpbmcgUHJvbWlzZSBpZiBub3QgdGhlcmUuLi4pXHJcblxyXG4gIC8vIExpc3Qgc3R1ZHlncm91cHMgZm9yIHRoYXQgc2Nob29sIGFuZCBnaXZlbiBjb3Vyc2U6XHJcbiAgY29uc3Qgc3R1ZHlHcm91cHMgPSBlZHNTY2hvb2xOYW1lR3ltbj8gZW52LmVkc0NsaWVudC5zdXNwZW5zZS5nZXRTY2hvb2xUdWl0aW9uR3JvdXBzKHtcclxuICAgIHNjaG9vbE5hbWU6IGVkc1NjaG9vbE5hbWVHeW1uLFxyXG4gICAgY291cnNlQ29kZVxyXG4gIH0pIDogZW1wdHlPck1vY2s7XHJcblxyXG4gIC8vIENvbnZlcnQgdG8gb3B0aW9uIG9iamVjdHMgYXMgcmVhY3Qtc2VsZWN0IHdhbnRzIHRoZW06XHJcbiAgY29uc3Qgb3B0aW9ucyA9IHN0dWR5R3JvdXBzLm1hcChzZyA9PiAoe1xyXG4gICAgbGFiZWw6IHNnLnR1aXRpb25Hcm91cE5hbWUsXHJcbiAgICB2YWx1ZTogc2cudHVpdGlvbkdyb3VwTmFtZVxyXG4gIH0pKTtcclxuXHJcbiAgLy8gRGlzcGxheSB0aGUgbXV0bGlzZWxlY3Q6XHJcbiAgcmV0dXJuIDxTZWxlY3RcclxuICAgICAgaXNNdWx0aT17dHJ1ZX1cclxuICAgICAgb3B0aW9ucz17b3B0aW9uc31cclxuICAgICAgdmFsdWU9e3NlbGVjdGVkU3R1ZHlHcm91cHMubWFwKGdyb3VwID0+ICh7bGFiZWw6IGdyb3VwLCB2YWx1ZTogZ3JvdXB9KSl9XHJcbiAgICAgIHBsYWNlaG9sZGVyPXtMYEtvcHBsYSBzdHVkaWVncnVwcGVyIHRpbGwga3Vyc2VuLi4uYH1cclxuICAgICAgbm9PcHRpb25zTWVzc2FnZT17KCk9PkxgS3VuZGUgaW50ZSBoaXR0YSBzdHVkaWVncnVwcGVyIGbDtnIgZGVubmEga3Vyc2B9XHJcbiAgICAgIG9uQ2hhbmdlPXsob3B0aW9uczogQXJyYXk8e2xhYmVsOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmd9PikgPT4ge1xyXG4gICAgICAgIG9uVXBkYXRlKG9wdGlvbnMubWFwKCh7dmFsdWV9KSA9PiB2YWx1ZSkpO1xyXG4gICAgICB9fSAvPlxyXG59XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IFNvZnREb2N1bWVudEFjY2VzcyB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgZGIgfSBmcm9tICcuLi8uLi8uLi9nbG9iYWxzL2RiJztcclxuaW1wb3J0IHsgRURTVGVhY2hlciB9IGZyb20gJy4uLy4uLy4uL2NvbnRyYWN0cy9lZHMnO1xyXG5pbXBvcnQgeyBlbnYgfSBmcm9tICcuLi8uLi8uLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5pbXBvcnQgeyBhcnJheVRvTG9va3VwLCBjb21wYXJlUHJvcHMsIEwgfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IGNmZyB9IGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvS0VELmNmZyc7XHJcbmltcG9ydCBTZWxlY3QgZnJvbSAncmVhY3Qtc2VsZWN0JztcclxuaW1wb3J0IHsgaXNBZG1pbk9yVGVhY2hlckF0U2Nob29sIH0gZnJvbSAnLi4vLi4vLi4vYWNjZXNzLWNvbnRyb2wnO1xyXG5pbXBvcnQgeyBtb2NrVGVhY2hlcnMgfSBmcm9tICcuLi8uLi8uLi9hcGlzL21vY2svbW9jay1jbGFzc3Jvb20tZGF0YSc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHNjaG9vbDogc3RyaW5nO1xyXG4gIHNlbGVjdGVkVGVhY2hlcnM6IFNvZnREb2N1bWVudEFjY2Vzc1tdO1xyXG4gIG9uQmx1cjogKCk9PnZvaWQ7XHJcbiAgb25TZWxlY3Q6ICh0ZWFjaGVyOiB7bmFtZTogc3RyaW5nLCBlbWFpbDogc3RyaW5nfSkgPT4gdm9pZDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFNlbGVjdFRlYWNoZXIgKHtzY2hvb2wsIHNlbGVjdGVkVGVhY2hlcnMsIG9uU2VsZWN0LCBvbkJsdXJ9OiBQcm9wcykge1xyXG4gIC8vXHJcbiAgLy8gTG9hZCB0aGUgdGVhY2hlciBsaXN0IGFzeW5jaHJvbmljYWxseSAodXNpbmcgc3VzcGVuc2UpXHJcbiAgLy9cclxuXHJcbiAgLy8gTW9jay1kYXRhIGZvciBLRURcclxuICBjb25zdCBlbXB0eU9yTW9jayA9IHNjaG9vbCA9PT0gJ0tFRCcgPyBtb2NrVGVhY2hlcnMgOiBbXTtcclxuXHJcbiAgLy8gU3VzcGVuc2UtcmVhZCBmcm9tIEtlZEJhY2tlbmQ6XHJcbiAgY29uc3Qge2Vkc1NjaG9vbE5hbWVHeW1ufSA9IGRiLnNjaG9vbHMuY2FjaGVPcHRpbWl6ZWQoKS5uYW1lKHNjaG9vbCkuc2luZ2xlKCkucmVhZCgpO1xyXG4gIFxyXG4gIC8vIFN1c3BlbnNlLXJlYWQgZnJvbSBFRFM6XHJcbiAgY29uc3QgZWRzVGVhY2hlcnM6IEVEU1RlYWNoZXJbXSA9IGVkc1NjaG9vbE5hbWVHeW1uID9cclxuICAgIGVudi5lZHNDbGllbnQuc3VzcGVuc2UuZ2V0U2Nob29sVGVhY2hlcnMoe3NjaG9vbE5hbWU6IGVkc1NjaG9vbE5hbWVHeW1ufSkgOlxyXG4gICAgZW1wdHlPck1vY2s7XHJcblxyXG4gIGxldCB0ZWFjaGVyTGlzdCA9IGVkc1RlYWNoZXJzLm1hcCgoe3RlYWNoZXJGaXJzdE5hbWUsIHRlYWNoZXJMYXN0TmFtZSwgdGVhY2hlckVtYWlsQWRkcmVzc30pID0+ICh7XHJcbiAgICBsYWJlbDogYCR7dGVhY2hlckZpcnN0TmFtZX0gJHt0ZWFjaGVyTGFzdE5hbWV9YCxcclxuICAgIHZhbHVlOiB0ZWFjaGVyRW1haWxBZGRyZXNzXHJcbiAgfSkpO1xyXG5cclxuICAvLyBBZGQgY3VycmVudCB1c2VyIHRvIHRoZSBsaXN0IChpbiBjYXNlIGN1cnJlbnQgdXNlciBpcyBBRE1JTiBvciBFTVBMT1lFRSBhdCB0aGUgc2Nob29sKVxyXG4gIGNvbnN0IGFkZEN1cnJlbnRVc2VyID0gaXNBZG1pbk9yVGVhY2hlckF0U2Nob29sKGVudi5jdXJyZW50VXNlciwgc2Nob29sKTtcclxuICBpZiAoYWRkQ3VycmVudFVzZXIgJiYgIXRlYWNoZXJMaXN0LnNvbWUodCA9PiB0LnZhbHVlID09PSBlbnYuY3VycmVudFVzZXIubWFpbCkpIHtcclxuICAgIHRlYWNoZXJMaXN0LnB1c2goe2xhYmVsOiBlbnYuY3VycmVudFVzZXIuZGlzcGxheU5hbWUsIHZhbHVlOiBlbnYuY3VycmVudFVzZXIubWFpbH0pO1xyXG4gIH1cclxuICBcclxuICAvLyBGaWx0ZXIgb3V0IGFscmVhZHkgc2VsZWN0ZWQgdGVhY2hlcnM6XHJcbiAgY29uc3QgdGVhY2hlclNldCA9IGFycmF5VG9Mb29rdXAoc2VsZWN0ZWRUZWFjaGVycywgdCA9PiB0LmVtYWlsKTtcclxuICB0ZWFjaGVyTGlzdCA9IHRlYWNoZXJMaXN0XHJcbiAgICAuZmlsdGVyKHQgPT4gIXRlYWNoZXJTZXRbdC52YWx1ZV0pIC8vIFJlbW92ZSBhbHJlYWR5IGFkZGVkIG9uZXNcclxuICAgIC5zb3J0KGNvbXBhcmVQcm9wcyhbXCJsYWJlbFwiXSwgY2ZnLktFRF9MT0NBTEUpKTsgLy8gU29ydCBieSBuYW1lXHJcblxyXG4gIC8vIFNob3cgdGhlIHNlbGVjdDpcclxuICByZXR1cm4gPFNlbGVjdFxyXG4gICAgaXNNdWx0aT17ZmFsc2V9XHJcbiAgICBvcHRpb25zPXt0ZWFjaGVyTGlzdH1cclxuICAgIGRlZmF1bHRNZW51SXNPcGVuPXt0cnVlfVxyXG4gICAgYXV0b0ZvY3VzPXt0cnVlfVxyXG4gICAgb25CbHVyPXsoKT0+b25CbHVyKCl9XHJcbiAgICBwbGFjZWhvbGRlcj17TGBWw6RsaiBibGFuZCBza29sYW5zIGzDpHJhcmUuLi5gfVxyXG4gICAgbm9PcHRpb25zTWVzc2FnZT17KCk9PkxgRGV0IGZpbm5zIGluZ2EgZmxlciBsw6RyYXJlIGF0dCB2w6RsamEgZnLDpW5gfVxyXG4gICAgb25DaGFuZ2U9e29wdGlvbiA9PiB7XHJcbiAgICAgIGNvbnN0IHtsYWJlbCwgdmFsdWV9ID0gb3B0aW9uIGFzIGFueTtcclxuICAgICAgb25TZWxlY3Qoe25hbWU6IGxhYmVsLCBlbWFpbDogdmFsdWV9KTtcclxuICAgIH19IC8+XHJcbn1cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5cclxuZXhwb3J0IGNvbnN0IFNwaW5uZXIgPSAoKT0+IDxzcGFuPjxpIGNsYXNzTmFtZT1cImZhIGZhLXNwaW5uZXIgZmEtc3BpblwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4mbmJzcDs8L3NwYW4+O1xyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IENvdXJzZSB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgZ2V0VGFza3NQZXJJZCB9IGZyb20gXCIuLi9jb3Vyc2VzL2J1c2luZXNzLWxvZ2ljXCI7XHJcbmltcG9ydCB7IGZ1dHVyZUFiaWxpdGllcyB9IGZyb20gXCIuLi8uLi8uLi9jb250cmFjdHMva2VkLW1vZGVsc1wiO1xyXG5pbXBvcnQgeyBPcGVuQ2xvc2VCb3ggfSBmcm9tIFwiLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL29wZW4tY2xvc2UtYm94XCI7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIGNvdXJzZTogQ291cnNlO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgU3RhdGUge1xyXG4gIGlzT3BlbjogYm9vbGVhbjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFdlaWdodGVkSXRlbXNUYWJsZSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcyxTdGF0ZT4ge1xyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgaXNPcGVuOiBmYWxzZVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHsgY291cnNlIH0gPSB0aGlzLnByb3BzO1xyXG4gICAgY29uc3QgeyBpc09wZW4gfSA9IHRoaXMuc3RhdGU7XHJcbiAgICBjb25zdCByb3dzID0gW107XHJcbiAgICBjb25zdCB0YXNrc1BlcklkID0gZ2V0VGFza3NQZXJJZChjb3Vyc2UpO1xyXG5cclxuICAgIHJvd3MucHVzaCg8dHIga2V5PVwiY2VudHJhbENvbnRlbnRcIiBjbGFzc05hbWU9XCJjb3ZlcmVkLWl0ZW0tbGFiZWxcIj48dGQgY29sU3Bhbj17Mn0+Q2VudHJhbHQgaW5uZWjDpWxsPC90ZD48L3RyPik7XHJcbiAgICBjb3Vyc2UuY2VudHJhbENvbnRlbnQuZm9yRWFjaCgoY2MsaWR4KSA9PiByb3dzLnB1c2goPHRyIGtleT17Y2MuaWR9IGNsYXNzTmFtZT17aWR4ICUgMiA/IFwidGFibGVPZGRcIiA6IFwiXCJ9PlxyXG4gICAgICA8dGQ+PHAgY2xhc3NOYW1lPVwiY3JpdGVyaWFUZXh0XCIgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3tfX2h0bWw6IGNjLm5hbWV9fS8+PC90ZD5cclxuICAgICAgPHRkPjxwPnsodGFza3NQZXJJZFtjYy5pZF0gfHwgW10pLmxlbmd0aH08L3A+PC90ZD5cclxuICAgIDwvdHI+KSk7XHJcblxyXG4gICAgcm93cy5wdXNoKDx0ciBrZXk9XCJhYmlsaXRpZXNcIiBjbGFzc05hbWU9XCJjb3ZlcmVkLWl0ZW0tbGFiZWxcIj48dGQgY29sU3Bhbj17Mn0+RsO2cm3DpWdvcjwvdGQ+PC90cj4pO1xyXG4gICAgY291cnNlLmFiaWxpdGllcy5mb3JFYWNoKChhYmlsaXR5LGlkeCkgPT4gcm93cy5wdXNoKDx0ciBrZXk9e2FiaWxpdHkuaWR9IGNsYXNzTmFtZT17aWR4ICUgMiA/IFwidGFibGVPZGRcIiA6IFwiXCJ9PlxyXG4gICAgICA8dGQ+PHAgY2xhc3NOYW1lPVwiYWJpbGl0eVRleHRcIiBkYW5nZXJvdXNseVNldElubmVySFRNTD17e19faHRtbDogYWJpbGl0eS5uYW1lfX0vPjwvdGQ+XHJcbiAgICAgIDx0ZD48cD57KHRhc2tzUGVySWRbYWJpbGl0eS5pZF0gfHwgW10pLmxlbmd0aH08L3A+PC90ZD5cclxuICAgIDwvdHI+KSk7XHJcblxyXG4gICAgcm93cy5wdXNoKDx0ciBrZXk9XCJmdXR1cmVBYmlsaXRpZXNcIiBjbGFzc05hbWU9XCJjb3ZlcmVkLWl0ZW0tbGFiZWxcIj48dGQgY29sU3Bhbj17Mn0+RnJhbXRpZHNmw7ZybcOlZ29yPC90ZD48L3RyPik7XHJcbiAgICAgZnV0dXJlQWJpbGl0aWVzLmZvckVhY2goKGZ1dHVyZUFiaWxpdHlUZXh0LCBpZHgpID0+IHJvd3MucHVzaCg8dHIga2V5PXtmdXR1cmVBYmlsaXR5VGV4dH0gY2xhc3NOYW1lPXtpZHggJSAyID8gXCJ0YWJsZU9kZFwiIDogXCJcIn0+XHJcbiAgICAgIDx0ZD48cCBjbGFzc05hbWU9XCJhYmlsaXR5VGV4dFwiPntmdXR1cmVBYmlsaXR5VGV4dH08L3A+PC90ZD5cclxuICAgICAgPHRkPjxwPnsodGFza3NQZXJJZFtmdXR1cmVBYmlsaXR5VGV4dF0gfHwgW10pLmxlbmd0aH08L3A+PC90ZD5cclxuICAgIDwvdHI+KSk7XHJcblxyXG4gICAgcmV0dXJuIDxPcGVuQ2xvc2VCb3hcclxuICAgICAgY2xhc3NOYW1lPVwibGFyZ2VyXCJcclxuICAgICAgdGl0bGU9ezxwPkt1cnNlbnMgdMOkY2tuaW5nc3RhYmVsbDwvcD59XHJcbiAgICAgIGNvbnRlbnRDbGFzc05hbWU9XCJ3ZWlnaHRlZC1pdGVtcy10YWJsZVwiPlxyXG4gICAgICAgIDxwPlRhYmVsbGVuIGFuZ2VyIGh1ciBtw6VuZ2EgdXBwZ2lmdGVyIHNvbSBiZXLDtnIgdmFyamUgZGVsLjwvcD5cclxuICAgICAgICA8dGFibGU+PHRib2R5Pntyb3dzfTwvdGJvZHk+PC90YWJsZT5cclxuICAgIDwvT3BlbkNsb3NlQm94PlxyXG4gIH1cclxufSIsImltcG9ydCBlbnYgZnJvbSAnLi4vLi4vLi4vLi4vZ2xvYmFscy9LRUQuZW52JztcclxuaW1wb3J0IHsgU3ViamVjdCwgQ291cnNlLCBBYmlsaXR5LCBLbm93bGVkZ2VSZXF1aXJlbWVudCwgQ2VudHJhbENvbnRlbnQgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IFN1YmplY3RUb0ltcG9ydCB9IGZyb20gJy4uL3N1YmplY3QtdG8taW1wb3J0JztcclxuaW1wb3J0IHsgQ2hhbmdlIH0gZnJvbSAnLi9jaGFuZ2UnO1xyXG5pbXBvcnQgeyBtaWdyYXRlT3JkZXJMaXN0c09mQ291cnNlSW5zdGFuY2VzLCBtaWdyYXRlQWJpbGl0aWVzT3JkZXJPblN1YmplY3QgfSBmcm9tICcuL21pZ3JhdGlvbnMnO1xyXG5pbXBvcnQgeyBtaWdyYXRlU3ViamVjdCB9IGZyb20gJy4vbWlncmF0ZS1zdWJqZWN0JztcclxuaW1wb3J0IHsgbG9hZENvdXJzZSB9IGZyb20gJy4uLy4uL3V0aWxzJztcclxuaW1wb3J0IHsgQ291cnNlU2V0IH0gZnJvbSAnLi9jb3Vyc2Utc2V0JztcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkaWZmWG1sV2l0aERhdGFiYXNlKGV4aXN0aW5nU3ViamVjdDogU3ViamVjdCwgc3ViamVjdFRvSW1wb3J0OiBTdWJqZWN0VG9JbXBvcnQsIGNoYW5nZXM6IENoYW5nZVtdKSB7XHJcbiAgLy8gRXhwYW5kIGdyYXBocyBvZiBleGlzdGluZyBTdWJqZWN0XHJcbiAgZXhpc3RpbmdTdWJqZWN0ID0gYXdhaXQgZW52LmtlZEJhY2tlbmRDbGllbnQuZ2V0KCdzdWJqZWN0cycsIGV4aXN0aW5nU3ViamVjdC5pZCwgeyBpbmNsdWRlOiBbXCJjb3Vyc2VUZW1wbGF0ZXNcIiwgXCJhYmlsaXRpZXNcIl0gfSk7XHJcbiAgLy8gTGF6aWx5IGxvYWQgYWxsIGNlbnRyYWwgY29udGVudHMgYW5kIGtub3dsZWRnZVJlcXVpcmVtZW50cyBvblxyXG4gIC8vIGVhY2ggY291cnNlIHRlbXBsYXRlXHJcbiAgY29uc3QgZXhwYW5kZWRDb3Vyc2VUZW1wbGF0ZXMgPSBhd2FpdCBQcm9taXNlLmFsbChleGlzdGluZ1N1YmplY3QuY291cnNlVGVtcGxhdGVzLm1hcChjdCA9PiBsb2FkQ291cnNlKGN0LmlkLCB7XHJcbiAgICBpbmNsdWRlOiBbXHJcbiAgICAgICdjZW50cmFsQ29udGVudCcsXHJcbiAgICAgICdrbm93bGVkZ2VSZXF1aXJlbWVudHMnXHJcbiAgICBdXHJcbiAgfSkpKTtcclxuXHJcbiAgY29uc29sZS5sb2coYFN1YmplY3Q6ICR7ZXhpc3RpbmdTdWJqZWN0Lm5hbWV9LiBDb3Vyc2VzOiAke2V4cGFuZGVkQ291cnNlVGVtcGxhdGVzLm1hcCgoe25hbWV9KSA9PiBuYW1lKX1gKTtcclxuXHJcbiAgY29uc3QgY291cnNlU2V0czogQ291cnNlU2V0W10gPSBhd2FpdCBQcm9taXNlLmFsbChleHBhbmRlZENvdXJzZVRlbXBsYXRlcy5tYXAgKGFzeW5jIGNvdXJzZVRlbXBsYXRlID0+ICh7XHJcbiAgICB0ZW1wbGF0ZTogY291cnNlVGVtcGxhdGUsXHJcbiAgICBpbnN0YW5jZXM6IGF3YWl0IGVudi5rZWRCYWNrZW5kQ2xpZW50Lmxpc3Q8Q291cnNlPihcImNvdXJzZXNcIiwgeyBuYW1lOiBjb3Vyc2VUZW1wbGF0ZS5uYW1lLCBpbmNsdWRlOiBbJ2FiaWxpdGllcyddLCBmbGFnczogWydpbmNsdWRlSWRzT25seSddIH0pXHJcbiAgfSkpKTtcclxuXHJcbiAgLyppZiAoZXhwYW5kZWRDb3Vyc2VUZW1wbGF0ZXMuc29tZSAoY291cnNlID0+ICFjb3Vyc2UuY2VudHJhbENvbnRlbnRPcmRlciB8fCAhY291cnNlLmtub3dsZWRnZVJlcXVpcmVtZW50c09yZGVyIHx8ICFjb3Vyc2UuYWJpbGl0aWVzT3JkZXIpKSB7XHJcbiAgICBtaWdyYXRlT3JkZXJMaXN0c09mQ291cnNlSW5zdGFuY2VzKGNvdXJzZVNldHMsIHN1YmplY3RUb0ltcG9ydCwgY2hhbmdlcyk7XHJcbiAgICAvLyBJbiBmdXR1cmUsIGFzIGFiaWxpdGllcyBtYXkgYmUgYWRkZWQgb3IgcmVtb3ZlZCwgd2Ugd2lsbCBoYXZlIHRvIG1haW50YWluIHRoZSBvcmRlciBvZiBhYmlsaXRpZXMgb24gdGhlIGNvdXJzZSBpbnN0YW5jZXMsXHJcbiAgICAvLyB0aGUgc2FtZSB3YXkgd2UgZG8gaXQgd2l0aCBjZW50cmFsIGNvbnRlbnQgYW5kIGtub3dsZWRnZSByZXF1aXJlbWVudHMuIFRPRE8gcmVzcGVjdCBhYmlsaXRpZXMgb3JkZXIgb24gZXZlcnkgcGxhY2UgYWJpbGl0aWVzIGFyZSBlbnVtZXJhdGVkLFxyXG4gICAgLy8gc3VjaCBhcyBvbiBjb3Vyc2Ugdmlld2VyLCBjb3Vyc2UgYnVpbGRlciwgZXRjLlxyXG4gICAgbWlncmF0ZUFiaWxpdGllc09yZGVyT25TdWJqZWN0KGV4aXN0aW5nU3ViamVjdCwgY291cnNlU2V0cywgY2hhbmdlcyk7XHJcbiAgfSBlbHNlIHsqL1xyXG4gICAgYXdhaXQgbWlncmF0ZVN1YmplY3QoZXhpc3RpbmdTdWJqZWN0LCBjb3Vyc2VTZXRzLCBzdWJqZWN0VG9JbXBvcnQsIGNoYW5nZXMpO1xyXG4gIC8vfVxyXG59XHJcblxyXG4iLCJpbXBvcnQgeyBTdWJqZWN0LCBDb3Vyc2UsIEtub3dsZWRnZVJlcXVpcmVtZW50LCBBYmlsaXR5LCBDZW50cmFsQ29udGVudCwgVGFzayB9IGZyb20gXCJrZWRiYWNrZW5kL21vZGVsc1wiO1xyXG5pbXBvcnQgeyBTdWJqZWN0VG9JbXBvcnQsIENvdXJzZVRvSW1wb3J0IH0gZnJvbSBcIi4uL3N1YmplY3QtdG8taW1wb3J0XCI7XHJcbmltcG9ydCB7IENoYW5nZSB9IGZyb20gXCIuL2NoYW5nZVwiO1xyXG5pbXBvcnQgeyBDb3Vyc2VTZXQgfSBmcm9tICcuL2NvdXJzZS1zZXQnO1xyXG5pbXBvcnQgeyBjcmVhdGVVVUlELCBCYXRjaFJ1bm5lciwgTXV0YXRpb25SZXF1ZXN0LCBMaXN0T3B0aW9ucyB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcclxuaW1wb3J0IHsgQXV0b1ZhbHVlTWFwIH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbHMvYXV0by12YWx1ZS1tYXAnO1xyXG5pbXBvcnQgeyBmbGF0dGVuIH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgZW52IGZyb20gJy4uLy4uLy4uLy4uL2dsb2JhbHMvS0VELmVudic7XHJcblxyXG50eXBlIElEID0gc3RyaW5nO1xyXG5cclxuZnVuY3Rpb24gZGlmZlN1YmplY3RHbG9iYWxUZXh0cyhkYlRleHRNYXA6IE1hcDxzdHJpbmcsIElEPiwgeG1sVGV4dHM6IHN0cmluZ1tdKSB7XHJcbiAgY29uc3QgcmVtb3ZlZElkcyA9IG5ldyBTZXQ8SUQ+KCk7XHJcbiAgY29uc3QgbmV3VGV4dHMgPSBuZXcgTWFwPHN0cmluZywgSUQ+KCk7XHJcbiAgY29uc3QgaWRzVG9BZGQgPSBuZXcgU2V0PElEPigpO1xyXG5cclxuICB4bWxUZXh0cy5mb3JFYWNoKG5ld1RleHQgPT4ge1xyXG4gICAgbmV3VGV4dCA9IG5ld1RleHQudHJpbSgpO1xyXG4gICAgaWYgKCFkYlRleHRNYXAuaGFzKG5ld1RleHQpKSB7XHJcbiAgICAgIGNvbnN0IGlkID0gY3JlYXRlVVVJRCgpO1xyXG4gICAgICBjb25zb2xlLmxvZyhgTmV3IGlkOiAke2lkfS4gVGV4dDogJHtuZXdUZXh0fWApO1xyXG4gICAgICBuZXdUZXh0cy5zZXQobmV3VGV4dCwgaWQpO1xyXG4gICAgICBpZHNUb0FkZC5hZGQoaWQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbmV3VGV4dHMuc2V0KG5ld1RleHQsIGRiVGV4dE1hcC5nZXQobmV3VGV4dCkpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBmb3IgKGNvbnN0IFtvbGRUZXh0LCBvbGRJZF0gb2YgZGJUZXh0TWFwLmVudHJpZXMoKSkge1xyXG4gICAgaWYgKHhtbFRleHRzLmluZGV4T2Yob2xkVGV4dCkgPT09IC0xKSB7XHJcbiAgICAgIHJlbW92ZWRJZHMuYWRkKG9sZElkKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICByZW1vdmVkSWRzLFxyXG4gICAgbmV3VGV4dHMsXHJcbiAgICBpZHNUb0FkZFxyXG4gIH1cclxufVxyXG5cclxubGV0IF9maWN0aXZlT2xkSWQgPSAxO1xyXG5mdW5jdGlvbiBmaWN0aXZlT2xkSWQoKSB7XHJcbiAgcmV0dXJuIFwiZmljdGl2ZU9sZElkXCIgKyAoKytfZmljdGl2ZU9sZElkKTtcclxufVxyXG5cclxuY29uc3Qgc3RvcFdvcmRzID0gbmV3IFNldChcclxuICAvLyBGcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9NaWhhaVZhbGVudGluL2x1bnItbGFuZ3VhZ2VzL2Jsb2IvbWFzdGVyL2x1bnIuc3YuanMjTDI1MlxyXG4gICgnYWxsYSBhbGx0IGF0dCBhdiBibGV2IGJsaSBibGlyIGJsaXZpdCBkZSBkZW0gZGVuIGRlbm5hIGRlcmFzIGRlc3MgZGVzc2EgZGV0IGRldHRhIGRpZyBkaW4gZGluYSBkaXR0IGR1IGTDpHIgZMOlIGVmdGVyIGVqIGVsbGVyIGVuIGVyIGVyYSBlcnQgZXR0IGZyw6VuIGbDtnIgaGEgaGFkZSBoYW4gaGFucyBoYXIgaGVubmUgaGVubmVzIGhvbiBob25vbSBodXIgaMOkciBpIGlja2UgaW5nZW4gaW5vbSBpbnRlIGphZyBqdSBrYW4ga3VuZGUgbWFuIG1lZCBtZWxsYW4gbWVuIG1pZyBtaW4gbWluYSBtaXR0IG1vdCBteWNrZXQgbmkgbnUgbsOkciBuw6Vnb24gbsOlZ290IG7DpWdyYSBvY2ggb20gb3NzIHDDpSBzYW1tYSBzZWRhbiBzaWcgc2luIHNpbmEgc2l0dGEgc2rDpGx2IHNrdWxsZSBzb20gc8OlIHPDpWRhbiBzw6VkYW5hIHPDpWRhbnQgdGlsbCB1bmRlciB1cHAgdXQgdXRhbiB2YWQgdmFyIHZhcmEgdmFyZsO2ciB2YXJpdCB2YXJqZSB2YXJzIHZhcnQgdmVtIHZpIHZpZCB2aWxrYSB2aWxrYXMgdmlsa2VuIHZpbGtldCB2w6VyIHbDpXJhIHbDpXJ0IMOkbiDDpHIgw6V0IMO2dmVyJyArXHJcbiAgJyBrcmluZycpIC8vIFRoaXMgbGluZSBjb250YWlucyBhZGRpdGlvbmFsIHN0b3Atd29yZHMgbWlzc2luZyBpbiBsdW5yLnN2LlxyXG4gIC5zcGxpdCgnICcpKTtcclxuXHJcbmZ1bmN0aW9uIGdldExleGVtZXMoaHRtbDogc3RyaW5nKTogU2V0PHN0cmluZz4ge1xyXG4gIHJldHVybiBuZXcgU2V0KHJlbW92ZVRhZ3MoaHRtbCkucmVwbGFjZSgvW15cXHdcXHPDpcOkw7ZdL2dpLCAnJykudG9Mb3dlckNhc2UoKS5zcGxpdCgvXFxzLylcclxuICAgIC5tYXAobGV4ZW1lID0+IGxleGVtZS50cmltKCkpXHJcbiAgICAuZmlsdGVyKGxleGVtZSA9PiAhIWxleGVtZSlcclxuICAgIC5maWx0ZXIobGV4ZW1lID0+ICFzdG9wV29yZHMuaGFzKGxleGVtZSkpXHJcbiAgKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVtb3ZlVGFncyhodG1sOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gIGRpdi5pbm5lckhUTUwgPSBodG1sO1xyXG4gIHJldHVybiAnJytkaXYuaW5uZXJUZXh0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRJZHNUb01pZ3JhdGUoXHJcbiAgZGJUZXh0czoge2lkOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgZ3JhZGVTdGVwPzogc3RyaW5nfVtdLFxyXG4gIHhtbFRleHRzOiB7aHRtbDogc3RyaW5nLCBncmFkZVN0ZXA/OiBzdHJpbmd9W10sXHJcbiAgbmV3VGV4dHM6IE1hcDxzdHJpbmcsIElEPixcclxuICB0ZXh0VHlwZTogc3RyaW5nLFxyXG4gIGNvdXJzZT86IHN0cmluZykgOiBNYXA8SUQsIHtcclxuICAgIG5ld1RleHQ/OiBzdHJpbmcsXHJcbiAgICBuZXdJZD86IElELFxyXG4gICAgb2xkVGV4dD86IHN0cmluZyxcclxuICAgIGdyYWRlU3RlcD86IHN0cmluZyxcclxuICAgIGlzVHlwb0ZpeD86IGJvb2xlYW5cclxuICB9PlxyXG57XHJcbiAgY29uc3QgaWRzVG9NaWdyYXRlID0gbmV3IE1hcDxJRCwge1xyXG4gICAgbmV3VGV4dD86IHN0cmluZyxcclxuICAgIG5ld0lkPzogSUQsXHJcbiAgICBvbGRUZXh0Pzogc3RyaW5nLFxyXG4gICAgZ3JhZGVTdGVwPzogc3RyaW5nLFxyXG4gICAgaXNUeXBvRml4PzogYm9vbGVhbixcclxuICAgIG1hdGNoTGV2ZWw6IG51bWJlcixcclxuICAgIGxleGVtZXM6IFNldDxzdHJpbmc+XHJcbiAgfT4oKTtcclxuICBkYlRleHRzID0gZGJUZXh0cy5tYXAoZW50aXR5ID0+ICh7Li4uZW50aXR5LCBuYW1lOiBlbnRpdHkubmFtZS50cmltKCl9KSkuZmlsdGVyKCh7bmFtZX0pID0+ICEhbmFtZSk7XHJcbiAgY29uc3QgeG1sU2V0ID0gbmV3IE1hcDxzdHJpbmcsIHtodG1sOiBzdHJpbmcsIGdyYWRlU3RlcD86IHN0cmluZ30+KCk7XHJcbiAgeG1sVGV4dHMuZm9yRWFjaChpdGVtID0+IHhtbFNldC5zZXQoaXRlbS5odG1sLCBpdGVtKSk7XHJcbiAgY29uc3QgZGJTZXQgPSBuZXcgTWFwPHN0cmluZywge2lkOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgZ3JhZGVTdGVwPzogc3RyaW5nfT4oKTtcclxuICBkYlRleHRzLmZvckVhY2goZW50aXR5ID0+IGRiU2V0LnNldChlbnRpdHkubmFtZSwgZW50aXR5KSk7XHJcbiAgLy8gUmVtb3ZlIHRob3NlIHdobyBhbHJlYWR5IGV4aXN0cyBpZGVudGljYWxseVxyXG4gIGRiVGV4dHMgPSBkYlRleHRzLmZpbHRlcihlbnRpdHkgPT4gIXhtbFNldC5oYXMoZW50aXR5Lm5hbWUpKTtcclxuICB4bWxUZXh0cyA9IHhtbFRleHRzLmZpbHRlcihpdGVtID0+ICFkYlNldC5oYXMoaXRlbS5odG1sKSk7XHJcblxyXG4gIC8vIE5vdywgZm9yIHRoZSByZW1haW5kZXIsIHRyeSB0aGUgYmVzdCB0byBtYXAgb2xkIHRleHRzIHRvIG5ldyB0ZXh0cywgYW5kIHdoZW4gZG9uZSwgY2hlY2sgaWYgdGhlcmUgYXJlIG5ldyB0ZXh0cyB0aGF0IG5ldmVyIGdvdCBtYXBwZWQuXHJcblxyXG4gIC8vIFN0YXJ0IGJ5IHB1dHRpbmcgYWxsIGRiVGV4dCBpbnRvIHRoZSByZXN1bHQsIHdpdGhvdXQgYSBwYWlyZWQgeG1sIHRleHQgeWV0OlxyXG4gIGRiVGV4dHMuZm9yRWFjaChkYlRleHQgPT4gaWRzVG9NaWdyYXRlLnNldChkYlRleHQuaWQsIHtcclxuICAgIGdyYWRlU3RlcDogZGJUZXh0LmdyYWRlU3RlcCxcclxuICAgIG9sZFRleHQ6IGRiVGV4dC5uYW1lLFxyXG4gICAgbGV4ZW1lczogZ2V0TGV4ZW1lcyhkYlRleHQubmFtZSksXHJcbiAgICBtYXRjaExldmVsOiAwXHJcbiAgfSkpO1xyXG4gIC8vIFRoZW4gdHJ5IHRvIHBhaXIgZWFjaCB4bWxUZXh0IHRvIGFuIGl0ZW0gaW4gaWRzVG9NaWdyYXRlXHJcbiAgY29uc3QgeG1sU3BpbnN0ZXJzOiB7aHRtbDogc3RyaW5nLCBncmFkZVN0ZXA/OiBzdHJpbmd9W10gPSBbXTtcclxuICB3aGlsZSAoeG1sVGV4dHMubGVuZ3RoID4gMCkge1xyXG4gICAgY29uc3QgeG1sVGV4dCA9IHhtbFRleHRzWzBdO1xyXG4gICAgY29uc3QgYmVzdE1hdGNoID0gZmluZEJlc3RNYXRjaCh4bWxUZXh0KTtcclxuICAgIGlmICghYmVzdE1hdGNoKSB7XHJcbiAgICAgIHhtbFNwaW5zdGVycy5wdXNoKHhtbFRleHQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKGJlc3RNYXRjaC5uZXdUZXh0KSB7XHJcbiAgICAgICAgLy8gVGhyb3cgb3V0IGV4aXN0aW5nIG1hdGNoXHJcbiAgICAgICAgeG1sVGV4dHMucHVzaCh7aHRtbDogYmVzdE1hdGNoLm5ld1RleHQsIGdyYWRlU3RlcDogYmVzdE1hdGNoLmdyYWRlU3RlcH0pO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IHBhaXIgPSBpZHNUb01pZ3JhdGUuZ2V0KGJlc3RNYXRjaC5pZCk7XHJcbiAgICAgIC8vIFBhaXIgbXlzZWxmIHdpdGggdGhpcyBtYXRjaDpcclxuICAgICAgcGFpci5uZXdUZXh0ID0geG1sVGV4dC5odG1sO1xyXG4gICAgICBwYWlyLm1hdGNoTGV2ZWwgPSBiZXN0TWF0Y2gubXlNYXRjaExldmVsO1xyXG4gICAgICBwYWlyLm5ld0lkID0gbmV3VGV4dHMuZ2V0KHhtbFRleHQuaHRtbCk7XHJcbiAgICB9XHJcbiAgICB4bWxUZXh0cy5zaGlmdCgpO1xyXG4gIH1cclxuICAvLyBGb3IgZWFjaCBzcGluc3RlciAobmV3IHRleHRzIHRoYXQgY291bGRuJ3QgZmluZCBhbnkgbWF0Y2ggaW4gb2xkIHRleHRzKSxcclxuICAvLyBBZGQgdGhlbSB3aXRoIGFuIGZpY3RpdmUgb2xkIElEIGJ1dCBvbWl0IG9sZFRleHQgdG8gbWFyayBpdCBhcyBhIG5ld2NvbWVyXHJcbiAgeG1sU3BpbnN0ZXJzLmZvckVhY2goc3BpbnN0ZXIgPT4ge1xyXG4gICAgaWRzVG9NaWdyYXRlLnNldChmaWN0aXZlT2xkSWQoKSwge1xyXG4gICAgICBuZXdJZDogbmV3VGV4dHMuZ2V0KHNwaW5zdGVyLmh0bWwpLFxyXG4gICAgICBuZXdUZXh0OiBzcGluc3Rlci5odG1sLFxyXG4gICAgICBncmFkZVN0ZXA6IHNwaW5zdGVyLmdyYWRlU3RlcCxcclxuICAgICAgbWF0Y2hMZXZlbDogMCxcclxuICAgICAgbGV4ZW1lczogbmV3IFNldDxzdHJpbmc+KCl9KVxyXG4gIH0pO1xyXG5cclxuICAvLyBNYXJrIHR5cG8tZml4ZXNcclxuICBpZHNUb01pZ3JhdGUuZm9yRWFjaChtYXRjaCA9PiB7XHJcbiAgICBjb25zdCB7b2xkVGV4dCwgbmV3VGV4dH0gPSBtYXRjaDtcclxuICAgIGlmIChvbGRUZXh0ICYmIG5ld1RleHQpIHtcclxuICAgICAgaWYgKFsuLi5nZXRMZXhlbWVzKG9sZFRleHQpXS5qb2luKCcgJykgPT09IFsuLi5nZXRMZXhlbWVzKG5ld1RleHQpXS5qb2luKCcgJykpIHtcclxuICAgICAgICBtYXRjaC5pc1R5cG9GaXggPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIGNvbnNvbGUubG9nKFwiSWRzVG9NaWdyYXRlXCIsIFsuLi5pZHNUb01pZ3JhdGUudmFsdWVzKCldLm1hcCgoe29sZFRleHQsIGxleGVtZXN9KSA9PiBgJHtbLi4ubGV4ZW1lc10uam9pbignICcpfTogJHtvbGRUZXh0fWApKTtcclxuXHJcbiAgcmV0dXJuIGlkc1RvTWlncmF0ZTtcclxuXHJcbiAgZnVuY3Rpb24gZmluZEJlc3RNYXRjaCh4bWxUZXh0OiB7aHRtbDogc3RyaW5nLCBncmFkZVN0ZXA/OiBzdHJpbmd9KSB7XHJcbiAgICBjb25zdCB4bWxMZXhlbWVzID0gZ2V0TGV4ZW1lcyh4bWxUZXh0Lmh0bWwpO1xyXG4gICAgY29uc3QgcG9zc2libGVQYXJ0bmVycyA9IFsuLi5pZHNUb01pZ3JhdGUuZW50cmllcygpXVxyXG4gICAgICAuZmlsdGVyKChbaWQsIHhdKSA9PiB4LmdyYWRlU3RlcCA9PT0geG1sVGV4dC5ncmFkZVN0ZXApXHJcbiAgICAgIC5tYXAoKFtpZCwge2dyYWRlU3RlcCwgbWF0Y2hMZXZlbCwgbmV3VGV4dCwgbGV4ZW1lc31dKSA9PiAoe1xyXG4gICAgICAgIGlkLFxyXG4gICAgICAgIGdyYWRlU3RlcCxcclxuICAgICAgICBtYXRjaExldmVsLFxyXG4gICAgICAgIG5ld1RleHQsXHJcbiAgICAgICAgbXlNYXRjaExldmVsOiBnZXRNYXRjaExldmVsKHhtbExleGVtZXMsIGxleGVtZXMpXHJcbiAgICAgIH0pKS5maWx0ZXIocHAgPT4gcHAubXlNYXRjaExldmVsID49IDUwICYmICghcHAubWF0Y2hMZXZlbCB8fCBwcC5tYXRjaExldmVsIDwgcHAubXlNYXRjaExldmVsKSk7XHJcbiAgICByZXR1cm4gcG9zc2libGVQYXJ0bmVycy5zb3J0KChhLCBiKSA9PiBiLm15TWF0Y2hMZXZlbCAtIGEubXlNYXRjaExldmVsKVswXTsgLy8gaGlnaGVzdCBmaXJzdC5cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGdldE1hdGNoTGV2ZWwobGV4ZW1lczE6IFNldDxzdHJpbmc+LCBsZXhlbWVzMjogU2V0PHN0cmluZz4pIHtcclxuICAgIGlmIChsZXhlbWVzMS5zaXplID09PSAwIHx8IGxleGVtZXMyLnNpemUgPT09IDApIHJldHVybiAwO1xyXG4gICAgbGV0IHBvaW50czEgPSAwO1xyXG4gICAgbGV0IHBvaW50czIgPSAwO1xyXG4gICAgbGV4ZW1lczEuZm9yRWFjaCh3b3JkID0+IHtcclxuICAgICAgaWYgKGxleGVtZXMyLmhhcyh3b3JkKSkgKytwb2ludHMxO1xyXG4gICAgfSk7XHJcbiAgICBsZXhlbWVzMi5mb3JFYWNoKHdvcmQgPT4ge1xyXG4gICAgICBpZiAobGV4ZW1lczEuaGFzKHdvcmQpKSArK3BvaW50czI7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBNYXRoLnJvdW5kKDEwMCAqIE1hdGgubWF4KHBvaW50czEgLyBsZXhlbWVzMS5zaXplLCBwb2ludHMyIC8gbGV4ZW1lczIuc2l6ZSkpO1xyXG4gIH1cclxuXHJcbiAgLyppZiAoZGJUZXh0cy5sZW5ndGggIT09IHhtbFRleHRzLmxlbmd0aCkge1xyXG4gICAgLy8gV2UgY2FuIG5vIGxvbmdlciBhc3N1bWUgdGhhdCB0aGUgY2hhbmdlZCB0ZXh0cyByZWZlciB0byBkaWZmZXJlbnQgZm9ybXVsYXRpb25zIG9mIHRoZSBzYW1lIG1lYW5pbmcuXHJcbiAgICAvLyBXZSBub3QgbWFwIG9sZCBmb3JtdWxhdGlvbnMgdG8gbmV3IG9uZXMuXHJcbiAgICAvLyBJbiBmdXR1cmUsIHdlIGNvdWxkIGhhbmRsZSB0aGlzIGNhc2UgYnkgYXNzdW1pbmcgYWxsIG9sZCB0ZXh0cyBub3Qgb2NjdXJyaW5nIGluIG5ldyBkYXRhLCBoYXZlIGJlZW4gcmVtb3ZlZCBhbmQgYWxsIG5ldyBoYXZlIGJlZW4gYWRkZWQuXHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJOdW1iZXIgb2YgXCIgKyB0ZXh0VHlwZSArIChjb3Vyc2UgPyBgIG9uIGNvdXJzZSAke2NvdXJzZX1gIDogXCJcIikgKyBcIiBkaWZmZXJzLiBDYW5ub3QgbWlncmF0ZS5cIik7XHJcbiAgfVxyXG4gIGRiVGV4dHMuZm9yRWFjaCgoe25hbWU6IG9sZFRleHQsIGlkOiBvbGRJZCwgZ3JhZGVTdGVwfSwgaSkgPT4ge1xyXG4gICAgY29uc3QgeG1sVGV4dCA9IHhtbFRleHRzW2ldLnRyaW0oKTtcclxuICAgIGlmIChvbGRUZXh0LnRyaW0oKSAhPT0geG1sVGV4dCkge1xyXG4gICAgICBpZHNUb01pZ3JhdGUuc2V0KG9sZElkLCB7bmV3VGV4dDogeG1sVGV4dCwgbmV3SWQ6IG5ld1RleHRzLmdldCh4bWxUZXh0KSwgb2xkVGV4dCwgZ3JhZGVTdGVwfSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbiAgcmV0dXJuIGlkc1RvTWlncmF0ZTsqL1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbWlncmF0ZVN1YmplY3QoZXhpc3RpbmdTdWJqZWN0OiBTdWJqZWN0LCBjb3Vyc2VTZXRzOiBDb3Vyc2VTZXRbXSwgc3ViamVjdFRvSW1wb3J0OiBTdWJqZWN0VG9JbXBvcnQsIGNoYW5nZXM6IENoYW5nZVtdKSB7XHJcbiAgLy8gR2VuZXJhdGUgZGJUZXh0TWFwOlxyXG4gIC8vIGRiVGV4dE1hcCBjb250YWlucyBhIG1hcCBmcm9tIG9sZCB0ZXh0cyAoQWJpbGl0aWVzLCBDZW50cmFsIENvbnRlbnQgb3IgS25vd2xlZGdlIFJlcXVpcmVtZW50cykgdG8gaXRzIElEIGluIHRoZSBkYXRhYmFzZS5cclxuICAvLyBUaGUgbWFwIHNob3VsZCBiZSB1c2VkIHRvIGxvb2t1cCBJRHMsIGdpdmVuIHRoZWlyIHRyaW1tZWQgdGV4dC5cclxuICBjb25zdCBkYlRleHRNYXAgPSBuZXcgTWFwPHN0cmluZywgSUQ+KCk7XHJcbiAgY29uc3Qgb3JkZXJlZEFiaWxpdGllcyA9IGV4aXN0aW5nU3ViamVjdC5hYmlsaXRpZXNPcmRlciA/XHJcbiAgICBleGlzdGluZ1N1YmplY3QuYWJpbGl0aWVzT3JkZXIubWFwKGlkID0+IGV4aXN0aW5nU3ViamVjdC5hYmlsaXRpZXMuZmluZChhID0+IGEuaWQgPT09IGlkKSkgOlxyXG4gICAgZXhpc3RpbmdTdWJqZWN0LmFiaWxpdGllcztcclxuICBmb3IgKGNvbnN0IGEgb2Ygb3JkZXJlZEFiaWxpdGllcykge1xyXG4gICAgZGJUZXh0TWFwLnNldChhLm5hbWUudHJpbSgpLCBhLmlkKTtcclxuICB9XHJcbiAgZm9yIChjb25zdCB7dGVtcGxhdGV9IG9mIGNvdXJzZVNldHMpIHtcclxuICAgIGZvciAoY29uc3QgY2Mgb2YgdGVtcGxhdGUuY2VudHJhbENvbnRlbnQpIHtcclxuICAgICAgZGJUZXh0TWFwLnNldChjYy5uYW1lLnRyaW0oKSwgY2MuaWQpO1xyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBrciBvZiB0ZW1wbGF0ZS5rbm93bGVkZ2VSZXF1aXJlbWVudHMpIHtcclxuICAgICAgZGJUZXh0TWFwLnNldChrci5uYW1lLnRyaW0oKSwga3IuaWQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gRmluZCBvdXQgd2hpY2ggbmV3IHRleHRzIChpbiB0b3RhbCkgdGhhdCBzaG91bGQgYmUgY3JlYXRlZCBpbiB0aGUgREIgb24gbWlncmF0aW5nLlxyXG4gIC8vIE1heWJlIGFsc28gZmluZCBvdXQgaWYgdGhlcmUgYXJlIGFueSBvbGQgdGV4dHMgd2hvJ3Mgb2JqZWN0cyBhcmUgbm8gbW9yZSB1c2VkIGFuZCBjb3VsZCBiZSByZW1vdmVkIGZyb20gdGhlIERCXHJcbiAgLy8gbmV3VGV4dHM6IEEgbWFwIGJldHdlZW4gYSBuZXcgdGV4dCBhbmQgaXRzIG5ldyBJRCBpbiB0aGUgZGF0YWJhc2UgYWZ0ZXIgY3JlYXRpbmcgaXQuXHJcbiAgLy8gcmVtb3ZlZElkczogQSBzZXQgb2YgZXhpc3RpbmcgaWRzIHRoYXQgd291bGQgYmUgc2FmZSB0byByZW1vdmUgb24gbWlncmF0aW5nICh3aWxsIGlnbm9yZSB0aG9zZSBmb3Igbm93KVxyXG4gIGNvbnN0IHtuZXdUZXh0czogbmV3QWJpbGl0eVRleHRzLCBpZHNUb0FkZDogYWJpbGl0aWVzVG9BZGR9ID1cclxuICAgIGRpZmZTdWJqZWN0R2xvYmFsVGV4dHMoZGJUZXh0TWFwLCBzdWJqZWN0VG9JbXBvcnQuYWJpbGl0aWVzKTtcclxuICBjb25zdCB7bmV3VGV4dHM6IG5ld0NDVGV4dHMsIGlkc1RvQWRkOiBjY3NUb0FkZH0gPVxyXG4gICAgZGlmZlN1YmplY3RHbG9iYWxUZXh0cyhkYlRleHRNYXAsIGZsYXR0ZW4oc3ViamVjdFRvSW1wb3J0LmNvdXJzZXMubWFwKGMgPT4gYy5jZW50cmFsQ29udGVudC5tYXAoY2MgPT4gY2MuaHRtbCkpKSk7XHJcbiAgY29uc3Qge25ld1RleHRzOiBuZXdLUlRleHRzLCBpZHNUb0FkZDoga3JzVG9BZGR9ID1cclxuICAgIGRpZmZTdWJqZWN0R2xvYmFsVGV4dHMoZGJUZXh0TWFwLCBmbGF0dGVuKHN1YmplY3RUb0ltcG9ydC5jb3Vyc2VzLm1hcChjID0+IGMua25vd2xlZGdlUmVxdWlyZW1lbnRzLm1hcChrciA9PiBrci5odG1sKSkpKTtcclxuICBcclxuICBjb25zb2xlLmxvZyhgQWJpbGl0aWVzIHRvIGFkZDogJHthYmlsaXRpZXNUb0FkZC5zaXplfWApO1xyXG4gIGNvbnNvbGUubG9nKGBDQ3MgdG8gYWRkOiAke2Njc1RvQWRkLnNpemV9YCk7XHJcbiAgY29uc29sZS5sb2coYEtScyB0byBhZGQ6ICR7a3JzVG9BZGQuc2l6ZX1gKTtcclxuXHJcbiAgLy8gRmluZCBvdXQgYWxsIGV4aXN0aW5nIEFiaWxpdHkgaWRzIHRoYXQgd2lsbCBiZSBtaWdyYXRlZCB0byBuZXcgb25lc1xyXG4gIGNvbnN0IGFiaWxpdHlJZHNUb01pZ3JhdGUgPSBnZXRJZHNUb01pZ3JhdGUoXHJcbiAgICBvcmRlcmVkQWJpbGl0aWVzLFxyXG4gICAgc3ViamVjdFRvSW1wb3J0LmFiaWxpdGllcy5tYXAoaHRtbCA9PiAoe2h0bWx9KSksXHJcbiAgICBuZXdBYmlsaXR5VGV4dHMsXHJcbiAgICBcImFiaWxpdGllc1wiKTtcclxuXHJcbiAgLy8gRG8gdGhlIHNhbWUgZm9yIGVhY2ggQ2VudHJhbCBDb250ZW50IGFuZCBLbm93bGVkZ2UgUmVxdWlyZW1lbnRzIG9uIGVhY2ggY291cnNlOlxyXG4gIGNvbnN0IGlkc1RvTWlncmF0ZVBlckNvdXJzZSA9IGNvdXJzZVNldHMubWFwKCh7dGVtcGxhdGV9LCBpKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhgQ291cnNlOiAke3RlbXBsYXRlLm5hbWV9YCk7XHJcbiAgICBjb25zdCB4bWxDb3Vyc2UgPSBzdWJqZWN0VG9JbXBvcnQuY291cnNlcy5maW5kKGMgPT4gYy5uYW1lID09PSB0ZW1wbGF0ZS5uYW1lKSB8fFxyXG4gICAgICBzdWJqZWN0VG9JbXBvcnQuY291cnNlcy5maW5kKGMgPT4gYy5jb2RlID09PSB0ZW1wbGF0ZS5jb2RlKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGNvdXJzZUNvZGU6IHRlbXBsYXRlLmNvZGUsXHJcbiAgICAgIGNjc1RvTWlncmF0ZTogeG1sQ291cnNlID9cclxuICAgICAgICBnZXRJZHNUb01pZ3JhdGUoXHJcbiAgICAgICAgICB0ZW1wbGF0ZS5jZW50cmFsQ29udGVudCwgLy8gSGFzIGFscmVhZHkgYmVlbiBzb3J0ZWQgd2hlbiByZXRyaWV2ZWQgdmlhIGxvYWRDb3Vyc2UoKVxyXG4gICAgICAgICAgeG1sQ291cnNlLmNlbnRyYWxDb250ZW50Lm1hcCgoe2h0bWx9KSA9PiAoe2h0bWx9KSksXHJcbiAgICAgICAgICBuZXdDQ1RleHRzLFxyXG4gICAgICAgICAgXCJjZW50cmFsIGNvbnRlbnRcIixcclxuICAgICAgICAgIHRlbXBsYXRlLm5hbWUpIDpcclxuICAgICAgICBuZXcgTWFwPElELCB7bmV3VGV4dDogc3RyaW5nLCBuZXdJZDogSUQsIG9sZFRleHQ6IHN0cmluZywgaXNUeXBvRml4OiBib29sZWFufT4oKSxcclxuICAgICAga3JzVG9NaWdyYXRlOiB4bWxDb3Vyc2UgP1xyXG4gICAgICAgIGdldElkc1RvTWlncmF0ZShcclxuICAgICAgICAgIHRlbXBsYXRlLmtub3dsZWRnZVJlcXVpcmVtZW50cywgLy8gSGFzIGFscmVhZHkgYmVlbiBzb3J0ZWQgd2hlbiByZXRyaWV2ZWQgdmlhIGxvYWRDb3Vyc2UoKVxyXG4gICAgICAgICAgeG1sQ291cnNlLmtub3dsZWRnZVJlcXVpcmVtZW50cyxcclxuICAgICAgICAgIG5ld0tSVGV4dHMsXHJcbiAgICAgICAgICBcImtub3dsZWRnZSByZXF1aXJlbWVudHNcIixcclxuICAgICAgICAgIHRlbXBsYXRlLm5hbWVcclxuICAgICAgICApIDpcclxuICAgICAgICBuZXcgTWFwPElELCB7bmV3VGV4dDogc3RyaW5nLCBuZXdJZDogSUQsIG9sZFRleHQ6IHN0cmluZywgZ3JhZGVTdGVwOiBzdHJpbmcsIGlzVHlwb0ZpeDogYm9vbGVhbn0+KClcclxuICAgIH07XHJcbiAgfSk7XHJcblxyXG4gIC8vIE9LIHNvIG5vdyB3ZSBoYXZlIGFsbCBpbmZvLlxyXG4gIC8vIE5vdywgd2UgbmVlZCB0bzpcclxuICAvLyBTdWJqZWN0OlxyXG4gIC8vIDEuIFJlbW92ZSBsaW5rcyBmcm9tIHN1YmplY3RzIHRvIGFiaWxpdGllc1xyXG4gIC8vIDIuIEFkZCBsaW5rcyBmcm9tIHN1YmplY3RzIHRvIGFiaWxpdGllc1xyXG4gIGFiaWxpdHlJZHNUb01pZ3JhdGUuZm9yRWFjaCgoe25ld1RleHQsIG5ld0lkLCBvbGRUZXh0LCBpc1R5cG9GaXh9LCBvbGRJZCkgPT4ge1xyXG4gICAgLy9jb25zdCBvbGRUZXh0ID0gZXhpc3RpbmdTdWJqZWN0LmFiaWxpdGllcy5maW5kKGEgPT4gYS5pZCA9PT0gb2xkSWQpLm5hbWU7XHJcbiAgICBjaGFuZ2VzLnB1c2goe1xyXG4gICAgICBjaGFuZ2U6IChcclxuICAgICAgICBvbGRUZXh0ID9cclxuICAgICAgICAgIG5ld1RleHQgP1xyXG4gICAgICAgICAgICBpc1R5cG9GaXggP1xyXG4gICAgICAgICAgICAgIGBUcnlja2ZlbHNyw6R0dG5pbmcgRsO2cm3DpWdhYCA6XHJcbiAgICAgICAgICAgICAgYFVwcGRhdGVyYWQgRsO2cm3DpWdhYCA6XHJcbiAgICAgICAgICAgIGBCb3J0dGFnZW4gRsO2cm3DpWdhYCA6XHJcbiAgICAgICAgICBgTnkgRsO2cm3DpWdhYFxyXG4gICAgICApLFxyXG4gICAgICBjb250ZW50OiBgPHN0cmlrZT4ke29sZFRleHQgfHwgJyd9PC9zdHJpa2U+PGJyLz4ke25ld1RleHQgfHwgJyd9YCxcclxuICAgICAgbXV0YXRpb25zOiBiciA9PiB7XHJcbiAgICAgICAgaWYgKG5ld0lkICYmIGFiaWxpdGllc1RvQWRkLmhhcyhuZXdJZCkpIHtcclxuICAgICAgICAgIGNvbnN0IGE6IEFiaWxpdHkgPSB7XHJcbiAgICAgICAgICAgIGlkOiBuZXdJZCxcclxuICAgICAgICAgICAgbmFtZTogbmV3VGV4dCxcclxuICAgICAgICAgICAgYWNsOiBbXCJyb2xlOlVTRVI6UlwiXSxcclxuICAgICAgICAgICAgZGF0ZVRpbWU6IERhdGUubm93KClcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICBici5hZGQoXCJhYmlsaXRpZXNcIiwgYSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvbGRUZXh0KSBici51bmxpbmsyKFwic3ViamVjdHNcIiwgZXhpc3RpbmdTdWJqZWN0LmlkLCBcImFiaWxpdGllc1wiLCBvbGRJZCk7XHJcbiAgICAgICAgaWYgKG5ld0lkKSBici5saW5rMihcInN1YmplY3RzXCIsIGV4aXN0aW5nU3ViamVjdC5pZCwgXCJhYmlsaXRpZXNcIiwgbmV3SWQpO1xyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gIH0pO1xyXG4gIC8vIDMuIFVwZGF0ZSBhYmlsaXRpZXNPcmRlciBvbiBTdWJqZWN0IGJhc2VkIG9uIHN1YmplY3RUb0ltcG9ydC5hYmlsaXRpZXMgKG1hcHBlZCB0byBpZHMgaW4gbmV3VGV4dHMpXHJcbiAgaWYgKCFleGlzdGluZ1N1YmplY3QuYWJpbGl0aWVzT3JkZXIgfHwgYWJpbGl0eUlkc1RvTWlncmF0ZS5zaXplID4gMCkge1xyXG4gICAgZXhpc3RpbmdTdWJqZWN0LmFiaWxpdGllc09yZGVyID0gc3ViamVjdFRvSW1wb3J0LmFiaWxpdGllcy5tYXAoeG1sID0+IG5ld0FiaWxpdHlUZXh0cy5nZXQoeG1sKSk7XHJcbiAgICBjaGFuZ2VzLnB1c2goe1xyXG4gICAgICBtdXRhdGlvbnM6IGJyID0+IGJyLnB1dChcInN1YmplY3RzXCIsIGV4aXN0aW5nU3ViamVjdCksXHJcbiAgICAgIGNoYW5nZTogZXhpc3RpbmdTdWJqZWN0LmFiaWxpdGllc09yZGVyID9cclxuICAgICAgICBudWxsIDogLy8gw4RuZHJpbmdlbiByZWRhbiB2aXN1ZWxsIHNvbSBcIlVwcGRhdGVyYWQgZsO2ciBmw7ZybcOlZ2FcIiwgZXRjLCBvdmFuXHJcbiAgICAgICAgYEluZsO2ciBlbiBvcmRuYWQgbGlzdGEgcMOlIGbDtnJtw6Vnb3IgaSBkYXRhYmFzZW5gLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjb25zdCBjcmVhdGVkSWRzID0gbmV3IFNldDxJRD4oKTtcclxuICBjaGFuZ2VzLnB1c2goe211dGF0aW9uczogKCk9PmNyZWF0ZWRJZHMuY2xlYXIoKX0pOyAvLyBJbiBjYXNlIG11dGF0aW9ucyBydW4gdHdpY2UgKHdoaWNoIGl0IGRvZXNuJ3QgYXMgb2YgY3VycmVudCBpbXBsLilcclxuICBjb25zdCBzaG93bkNoYW5nZXMgPSBuZXcgU2V0PHN0cmluZz4oKTsgLy8gU2V0IG9mIGNvdXJzZU5hbWVcclxuICBjaGFuZ2VzLnB1c2goe211dGF0aW9uczogKCk9PnNob3duQ2hhbmdlcy5jbGVhcigpfSk7XHJcbiAgXHJcbiAgLy8gQ291cnNlczpcclxuICAvLyAxLiBHbyB0aHJvdWdoIGFsbCBjb3Vyc2UgaW5zdGFuY2VzIGFuZDpcclxuICAvLyAgICAgIEE6IFJlbW92ZSBsaW5rcyBmcm9tIGNvdXJzZXMgdG8gYWJpbGl0aWVzIGxpc3RlZCBpbiBhYmlsaXR5SWRzVG9NaWdyYXRlLmtleXMoKVxyXG4gIC8vICAgICAgQjogQWRkIGxpbmtzIGZyb20gY291cnNlcyB0byBhYmlsaXRpZXMgYWJpbHRpdGllc1RvTWlncmF0ZS52YWx1ZXMoKVxyXG4gIC8vICAgICAgQzogVXBkYXRlIGFiaWxpdGllc09yZGVyIG9uIGNvdXJzZSBpbnN0YW5jZXMgYmFzZWQgb24gc3ViamVjdFRvSW1wb3J0IChtYXBwZWQgdG8gaWRzIGluIG5ld1RleHRzKVxyXG4gIC8vIDIsIDM6IERvIHRoZSBzYW1lIGZvciBjZW50cmFsLWNvbnRlbnQgYW5kIGtub3dsZWRnZS1yZXF1aXJlbWVudGVzOlxyXG4gIC8vICAgIEZpbmQgY2NzIGFuZCBrcnMgdG8gbWlncmF0ZSBiYXNlZCBvbiBjb3Vyc2VJbnN0YW5jZS5jb2RlXHJcbiAgLy8gICAgRm9yIGJvdGggY2NzIGFuZCBrcnMsIGRvOlxyXG4gIC8vICAgICAgQTogVW5saW5rIGNjc1RvTWlncmF0ZS5rZXlzKClcclxuICAvLyAgICAgIEI6IExpbmsgY2NzVG9NaWdyYXRlLnZhbHVlcygpXHJcbiAgLy8gICAgICBDOiBVcGRhdGUgY2VudHJhbENvbnRlbnRPcmRlciBiYXNlZCBvbiBzdWJqZWN0VG9JbXBvcnQuY2VudHJhbENvbnRlbnQgbWFwcGVkIHRvIG5ld1RleHRzIGlkc1xyXG4gIC8vICAgICAgKHNhbWUgZm9yIGtyc1RvTWlncmF0ZSwgd2l0aCBrbm93bGVkZ2VSZXF1aXJlbWVudHNPcmRlciBpbnN0ZWFkKVxyXG4gIGZvciAoY29uc3Qge3RlbXBsYXRlLCBpbnN0YW5jZXN9IG9mIGNvdXJzZVNldHMpIHtcclxuICAgIC8vIEZpbmQgY291cnNlVG9JbXBvcnRcclxuICAgIGNvbnN0IGNvdXJzZVRvSW1wb3J0OiBDb3Vyc2VUb0ltcG9ydCA9IChcclxuICAgICAgc3ViamVjdFRvSW1wb3J0LmNvdXJzZXMuZmluZChjID0+IGMubmFtZSA9PT0gdGVtcGxhdGUubmFtZSkgfHxcclxuICAgICAgc3ViamVjdFRvSW1wb3J0LmNvdXJzZXMuZmluZChjID0+IGMuY29kZSA9PT0gdGVtcGxhdGUuY29kZSlcclxuICAgICk7XHJcblxyXG4gICAgLy8gRmluZCBDZW50cmFsIENvbnRlbnQgYW5kIEtub3dsZWRnZSBSZXF1aXJlbWVudHMgdG8gbWlncmF0ZVxyXG4gICAgY29uc3Qge2Njc1RvTWlncmF0ZSwga3JzVG9NaWdyYXRlfToge1xyXG4gICAgICBjY3NUb01pZ3JhdGU6IE1hcDxJRCwge25ld1RleHQ/OiBzdHJpbmcsIG5ld0lkPzogSUQsIG9sZFRleHQ/OiBzdHJpbmd9PixcclxuICAgICAga3JzVG9NaWdyYXRlOiBNYXA8SUQsIHtuZXdUZXh0Pzogc3RyaW5nLCBuZXdJZD86IElELCBvbGRUZXh0Pzogc3RyaW5nLCBncmFkZVN0ZXA/OiBzdHJpbmd9PlxyXG4gICAgfSA9IGlkc1RvTWlncmF0ZVBlckNvdXJzZS5maW5kKHggPT4geC5jb3Vyc2VDb2RlID09PSB0ZW1wbGF0ZS5jb2RlKTtcclxuICAgIFxyXG4gICAgLy8gTG9vcCB0aHJvdWdoIGFsbCBjb3Vyc2UgaW5zdGFuY2VzIChpbnN0YW5jZXMgYWxzbyBjb250YWlucyB0ZW1wbGF0ZXMpXHJcbiAgICAvLyBhbmQgbWlncmF0ZSB0aGVtLiBUaGlzIHdpbGwgaW5jbHVkZSBjcmVhdGluZyBtaXNzaW5nIGVudGl0aWVzIGluIHRoZSBEQi5cclxuICAgIGZvciAoY29uc3QgY291cnNlIG9mIGluc3RhbmNlcykge1xyXG4gICAgICBtaWdyYXRlQ291cnNlSW5zdGFuY2UoY291cnNlLCBjb3Vyc2VUb0ltcG9ydCwge2Njc1RvTWlncmF0ZSwga3JzVG9NaWdyYXRlfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhd2FpdCBtaWdyYXRlVGFza3MoKTtcclxuICByZXR1cm47XHJcblxyXG4gIGZ1bmN0aW9uIG1pZ3JhdGVDb3Vyc2VJbnN0YW5jZShcclxuICAgIGNvdXJzZTogQ291cnNlLFxyXG4gICAgY291cnNlVG9JbXBvcnQ6IENvdXJzZVRvSW1wb3J0LFxyXG4gICAgaWRzVG9NaWdyYXRlOiB7XHJcbiAgICAgIGNjc1RvTWlncmF0ZTogTWFwPElELCB7bmV3VGV4dD86IHN0cmluZywgbmV3SWQ/OiBJRCwgb2xkVGV4dD86IHN0cmluZywgaXNUeXBvRml4PzogYm9vbGVhbn0+LFxyXG4gICAgICBrcnNUb01pZ3JhdGU6IE1hcDxJRCwge25ld1RleHQ/OiBzdHJpbmcsIG5ld0lkPzogSUQsIG9sZFRleHQ/OiBzdHJpbmcsIGdyYWRlU3RlcD86IHN0cmluZywgaXNUeXBvRml4PzogYm9vbGVhbn0+XHJcbiAgICB9KVxyXG4gIHtcclxuICAgIGNvbnN0IHNob3dDaGFuZ2VzID0gIXNob3duQ2hhbmdlcy5oYXMoY291cnNlLm5hbWUpO1xyXG4gICAgc2hvd25DaGFuZ2VzLmFkZChjb3Vyc2UubmFtZSk7XHJcbiAgICBhYmlsaXR5SWRzVG9NaWdyYXRlLmZvckVhY2goKHtuZXdJZCwgb2xkVGV4dH0sIG9sZElkKSA9PiB7XHJcbiAgICAgIC8vIFJlbGluayB0aGUgY291cnNlIGluc3RhbmNlIHdpdGggYWJpbGl0aWVzLiBUaGlzIGNoYW5nZSBkb2VzIG5vdCBuZWVkIHRvIGJlIHZpc2libGUgaW4gR1VJLlxyXG4gICAgICBjaGFuZ2VzLnB1c2goe1xyXG4gICAgICAgIG11dGF0aW9uczogYnIgPT4ge1xyXG4gICAgICAgICAgaWYgKG9sZFRleHQpIGJyLnVubGluazIoXCJjb3Vyc2VzXCIsIGNvdXJzZS5pZCwgXCJhYmlsaXRpZXNcIiwgb2xkSWQpO1xyXG4gICAgICAgICAgaWYgKG5ld0lkKSBici5saW5rMihcImNvdXJzZXNcIiwgY291cnNlLmlkLCBcImFiaWxpdGllc1wiLCBuZXdJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTsgIFxyXG4gICAgfSk7XHJcbiAgICBjb3Vyc2UuYWJpbGl0aWVzT3JkZXIgPSBzdWJqZWN0VG9JbXBvcnQuYWJpbGl0aWVzLm1hcChodG1sID0+IG5ld0FiaWxpdHlUZXh0cy5nZXQoaHRtbCkpO1xyXG5cclxuICAgIGNvbnN0IHtjY3NUb01pZ3JhdGUsIGtyc1RvTWlncmF0ZX0gPSBpZHNUb01pZ3JhdGU7XHJcblxyXG4gICAgLy8gQ2VudHJhbCBDb250ZW50XHJcbiAgICBjY3NUb01pZ3JhdGUuZm9yRWFjaCgoe25ld0lkLCBuZXdUZXh0LCBvbGRUZXh0LCBpc1R5cG9GaXh9LCBvbGRJZCkgPT4ge1xyXG4gICAgICBjaGFuZ2VzLnB1c2goe1xyXG4gICAgICAgIGNoYW5nZTogc2hvd0NoYW5nZXMgJiYgKFxyXG4gICAgICAgICAgb2xkVGV4dCA/XHJcbiAgICAgICAgICAgIG5ld1RleHQgP1xyXG4gICAgICAgICAgICAgIGlzVHlwb0ZpeCA/XHJcbiAgICAgICAgICAgICAgICBgVHJ5Y2tmZWxzcsOkdHRuaW5nIENlbnRyYWx0IElubmVow6VsbGAgOlxyXG4gICAgICAgICAgICAgICAgYFVwcGRhdGVyYXQgQ2VudHJhbHQgSW5uZWjDpWxsYCA6XHJcbiAgICAgICAgICAgICAgYEJvcnR0YWdldCBDZW50cmFsdCBJbm5laMOlbGxgIDpcclxuICAgICAgICAgICAgYE55dHQgQ2VudHJhbHQgSW5uZWjDpWxsYCksXHJcbiAgICAgICAgY29udGVudDogYDxoND4ke2NvdXJzZS5uYW1lfTwvaDQ+PHN0cmlrZT4ke29sZFRleHQgfHwgJyd9PC9zdHJpa2U+PGJyLz4ke25ld1RleHQgfHwgJyd9YCxcclxuICAgICAgICBtdXRhdGlvbnM6IGJyID0+IHtcclxuICAgICAgICAgIGlmIChuZXdJZCAmJiBjY3NUb0FkZC5oYXMobmV3SWQpICYmICFjcmVhdGVkSWRzLmhhcyhuZXdJZCkpIHtcclxuICAgICAgICAgICAgY29uc3QgY2M6IENlbnRyYWxDb250ZW50ID0ge1xyXG4gICAgICAgICAgICAgIGlkOiBuZXdJZCxcclxuICAgICAgICAgICAgICBuYW1lOiBuZXdUZXh0LFxyXG4gICAgICAgICAgICAgIGFjbDogW1wicm9sZTpVU0VSOlJcIl0sXHJcbiAgICAgICAgICAgICAgZGF0ZVRpbWU6IERhdGUubm93KClcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgYnIuYWRkKFwiY2VudHJhbC1jb250ZW50XCIsIGNjKTtcclxuICAgICAgICAgICAgY3JlYXRlZElkcy5hZGQobmV3SWQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKG9sZFRleHQpIGJyLnVubGluazIoXCJjb3Vyc2VzXCIsIGNvdXJzZS5pZCwgXCJjZW50cmFsQ29udGVudFwiLCBvbGRJZCk7XHJcbiAgICAgICAgICBpZiAobmV3SWQpIGJyLmxpbmsyKFwiY291cnNlc1wiLCBjb3Vyc2UuaWQsIFwiY2VudHJhbENvbnRlbnRcIiwgbmV3SWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH0pO1xyXG4gICAgY291cnNlLmNlbnRyYWxDb250ZW50T3JkZXIgPSBjb3Vyc2VUb0ltcG9ydC5jZW50cmFsQ29udGVudC5tYXAoKHtodG1sfSkgPT4gbmV3Q0NUZXh0cy5nZXQoaHRtbCkpO1xyXG5cclxuICAgIC8vIEtub3dsZWRnZSBSZXF1aXJlbWVudHNcclxuICAgIGtyc1RvTWlncmF0ZS5mb3JFYWNoKCh7bmV3SWQsIG5ld1RleHQsIGdyYWRlU3RlcCwgb2xkVGV4dCwgaXNUeXBvRml4fSwgb2xkSWQpID0+IHtcclxuICAgICAgY2hhbmdlcy5wdXNoKHtcclxuICAgICAgICBjaGFuZ2U6IHNob3dDaGFuZ2VzICYmIChcclxuICAgICAgICAgIG9sZFRleHQgP1xyXG4gICAgICAgICAgICBuZXdUZXh0ID9cclxuICAgICAgICAgICAgICBpc1R5cG9GaXggP1xyXG4gICAgICAgICAgICAgICAgYFRyeWNrZmVsc3LDpHR0bmluZyBLdW5za2Fwc2tyYXZgOlxyXG4gICAgICAgICAgICAgICAgYFVwcGRhdGVyYXQgS3Vuc2thcHNrcmF2YCA6XHJcbiAgICAgICAgICAgICAgYEJvcnR0YWdldCBLdW5za2Fwc2tyYXZgIDpcclxuICAgICAgICAgICAgYE55dHQgS3Vuc2thcHNrcmF2YFxyXG4gICAgICAgICksXHJcbiAgICAgICAgY29udGVudDogYDxoND4ke2NvdXJzZS5uYW1lfTwvaDQ+PHN0cmlrZT4ke29sZFRleHQgfHwgJyd9PC9zdHJpa2U+PGJyLz4ke25ld1RleHQgfHwgJyd9YCxcclxuICAgICAgICBtdXRhdGlvbnM6IGJyID0+IHtcclxuICAgICAgICAgIGlmIChuZXdJZCAmJiBrcnNUb0FkZC5oYXMobmV3SWQpICYmICFjcmVhdGVkSWRzLmhhcyhuZXdJZCkpIHtcclxuICAgICAgICAgICAgY29uc3Qga3I6IEtub3dsZWRnZVJlcXVpcmVtZW50ID0ge1xyXG4gICAgICAgICAgICAgIGlkOiBuZXdJZCxcclxuICAgICAgICAgICAgICBuYW1lOiBuZXdUZXh0LFxyXG4gICAgICAgICAgICAgIGdyYWRlU3RlcCxcclxuICAgICAgICAgICAgICBhY2w6IFtcInJvbGU6VVNFUjpSXCJdLFxyXG4gICAgICAgICAgICAgIGRhdGVUaW1lOiBEYXRlLm5vdygpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBBZGRpbmcgS25vd2xlZGdlLVJlcXVpcmVtZW50ICR7bmV3SWR9OiAke25ld1RleHR9YCk7XHJcbiAgICAgICAgICAgIGJyLmFkZChcImtub3dsZWRnZS1yZXF1aXJlbWVudHNcIiwga3IpO1xyXG4gICAgICAgICAgICBjcmVhdGVkSWRzLmFkZChuZXdJZCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAob2xkVGV4dCkgYnIudW5saW5rMihcImNvdXJzZXNcIiwgY291cnNlLmlkLCBcImtub3dsZWRnZVJlcXVpcmVtZW50c1wiLCBvbGRJZCk7XHJcbiAgICAgICAgICBpZiAobmV3SWQpIGJyLmxpbmsyKFwiY291cnNlc1wiLCBjb3Vyc2UuaWQsIFwia25vd2xlZGdlUmVxdWlyZW1lbnRzXCIsIG5ld0lkKTsgIFxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIGNvdXJzZS5rbm93bGVkZ2VSZXF1aXJlbWVudHNPcmRlciA9XHJcbiAgICAgIGNvdXJzZVRvSW1wb3J0Lmtub3dsZWRnZVJlcXVpcmVtZW50cy5tYXAoa3IgPT4gbmV3S1JUZXh0cy5nZXQoa3IuaHRtbCkpO1xyXG5cclxuICAgIC8vIFVwZGF0ZXMgdGhlIGNvdXJzZSBwcm9wZXJ0aWVzIGNlbnRyYWxDb250ZW50T3JkZXIgYW5kIGtub3dsZWRnZVJlcXVpcmVtZW50c09yZGVyXHJcbiAgICBpZiAoYWJpbGl0eUlkc1RvTWlncmF0ZS5zaXplID4gMCB8fCBjY3NUb01pZ3JhdGUuc2l6ZSA+IDAgfHwga3JzVG9NaWdyYXRlLnNpemUgPiAwKSB7XHJcbiAgICAgIGNoYW5nZXMucHVzaCh7XHJcbiAgICAgICAgY2hhbmdlOiAhY291cnNlLmlzVGVtcGxhdGUgPyBgVXBwZGF0ZXJhZCBLdXJzaW5zdGFuc2AgOiBgVXBwZGF0ZXJhZCBLdXJzbWFsbGAsXHJcbiAgICAgICAgY29udGVudDogIWNvdXJzZS5pc1RlbXBsYXRlID9cclxuICAgICAgICAgIGAke2NvdXJzZS5uYW1lfS4gU2tvbGE6ICR7Y291cnNlLnNjaG9vbCB8fCBcImVqIGFuZ2l2ZW5cIn0uIEJlc2tyaXZuaW5nOiAke2NvdXJzZS5kZXNjcmlwdGlvbiB8fCAnJ31gIDpcclxuICAgICAgICAgIGAke2NvdXJzZS5uYW1lfWAsXHJcbiAgICAgICAgbXV0YXRpb25zOiBiciA9PiBici5wdXQoXCJjb3Vyc2VzXCIsIGNvdXJzZSlcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIC8vIFRhc2tzOlxyXG4gIC8vIDEuIEFTWU5DIE9QRVJBVElPTjogR28gdGhyb3VnaCBhbGwgdGFza3MgdGhhdCBoYXMgZWRnZXMgdG8gYW55IG9mIHRoZSBvbGQgaWRzLlxyXG4gIC8vIDIuIEZvciBlYWNoIGZvdW5kIHRhc2ssIGRvOlxyXG4gIC8vICAgIEE6IEl0ZXJhdGUgdGFncyBzdGFydGluZyB3aXRoIFwiY291cnNlOlwiLiBQaWNrIHRoZSBjb3Vyc2UgY29kZS5cclxuICAvLyAgICBCOiBQb3B1bGF0ZSB0aGUgbmV3IHByb3BlcnR5IG1pZ3JhdGlvblRhc2tzOiB7XHJcbiAgLy8gICAgICAgICBhYmlsaXRpZXM6IHtbbmV3SWQ6IHN0cmluZ106IHtvbGRUZXh0OiBzdHJpbmcsIG9sZElkOiBzdHJpbmcsIGltcG9ydERhdGU6IG51bWJlcn19LCAvLyBCZSBhYmxlIHRvIGNyZWF0ZSBhIGNoYWluIGluIHRoZSBHVUkgIVxyXG4gIC8vICAgICAgICAgY2VudHJhbENvbnRlbnQ6IHtbbmV3SWQ6IHN0cmluZ106IHtvbGRUZXh0OiBzdHJpbmcsIC4uLlwiLi4ufX0sXHJcbiAgLy8gICAgICAgICBrbm93bGVkZ2VSZXF1aXJlbWVudHM6IHtbbmV3SWQ6IHN0cmluZ106IHtvbGRUZXh0OiBzdHJpbmcsIC4uLlwiLi4ufX0sXHJcbiAgLy8gICAgICAgfVxyXG4gIC8vICAgICAgIE9CUzEhIE1lcmdlYSBhYmlsaXRpZXMsIGNlbnRyYWxDb25kZW50IG9jaCBrbm93bGVkZ2VSZXF1aXJlbWVudHMgbWVkIGV2IHRpZGlnYXJlIHbDpHJkZW4gKHPDpSBtYW4ga2FuIGltcG9ydGVyYSBvbSBvY2ggb20gaWdlbiEpXHJcbiAgLy8gICAgICAgT0JTMiEgb2xkSWQga2FuIGbDtnJla29tbWEgcMOlIGZsZXJhIG5ld0lkIG9tIHRhc2sgYW52w6RuZHMgYXYgZmxlcmEga3Vyc2VyLiBcclxuICAvLyAgICBDOiBDcmVhdGUgc2V0cyBmb3IgdW5saW5rcyBhbmQgbGluayBvcGVyYXRpb25zIHBlciB0eXBlLlxyXG4gIC8vICAgIEQ6IEZvciBhbGwgY291cnNlQ29kZXMgdGhhdCB0aGUgdGFzayBpcyB0YWdnZW4gb24sXHJcbiAgLy8gICAgICAgICAqIHJlZ2lzdGVyIGNjc1RvTWlncmF0ZS5rZXlzKCkgaW4gdGhlIHVubGluayBzZXQgb2YgY2VudHJhbCBjb250ZW50c1xyXG4gIC8vICAgICAgICAgKiByZWdpc3RlciBjY3NUb01pZ3JhdGUudmFsdWVzKCkgaW4gdGhlIGxpbmsgc2V0IG9mIGNlbnRyYWwgY29udGVudHNcclxuICAvLyAgICAgICAgICogLS1cIi0tIGZvciBrbm93bGVkZ2VSZXF1aXJlbWVudHNcclxuICAvLyAgICBFOiB1bmxpbmsgYW5kIGxpbmsgd2l0aCByZWdhcmRzIHRvIGFiaWxpdHlJZHNUb01pZ3JhdGUgKGtleXMoKSBhbmQgdmFsdWVzKCkgcmVzcGVjdGl2ZWx5KS5cclxuICAvLyAgICBGOiB1bmxpbmsgYW5kIGxpbmsgYWNjb3JkaW5nIHRvIHRoZSBjcmVhdGVkIHNldHMgb2YgbGluayAvIHVubGluayBvcGVyYXRpb25zLlxyXG4gIC8vICAgIE5vdGU6IFVubGlrZSBjb3Vyc2UgaW5zdGFuY2VzLCB0aGVyZSdzIG5vIG9yZGVyIHByb3BlcnR5IHRvIHRha2UgY2FyZSBvZiBoZXJlIVxyXG4gIC8vXHJcblxyXG4gIGFzeW5jIGZ1bmN0aW9uIG1pZ3JhdGVUYXNrcygpIHtcclxuICAgIGNvbnN0IG9sZElkcyA9IFtcclxuICAgICAgLi4uYWJpbGl0eUlkc1RvTWlncmF0ZS5rZXlzKCksXHJcbiAgICAgIC4uLmZsYXR0ZW4oaWRzVG9NaWdyYXRlUGVyQ291cnNlLm1hcChjID0+IFtcclxuICAgICAgICAuLi5jLmNjc1RvTWlncmF0ZS5rZXlzKCksXHJcbiAgICAgICAgLi4uYy5rcnNUb01pZ3JhdGUua2V5cygpXHJcbiAgICAgIF0pKVxyXG4gICAgXS5maWx0ZXIoaWQgPT4gIWlkLnN0YXJ0c1dpdGgoJ2ZpY3RpdmVPbGRJZCcpKTtcclxuICAgIFxyXG4gICAgY29uc3QgaW1wb3J0RGF0ZSA9IERhdGUubm93KCk7XHJcblxyXG4gICAgY29uc3QgdGFza3MgPSBhd2FpdCBmZXRjaFRhc2tzSW5DaHVua3NXaXRoRWRnZXNUbyhvbGRJZHMsIHtcclxuICAgICAgaW5jbHVkZTogW1wiYWJpbGl0aWVzXCIsIFwia25vd2xlZGdlUmVxdWlyZW1lbnRzXCIsIFwiY2VudHJhbENvbnRlbnRcIl0sXHJcbiAgICAgIGZsYWdzOiBbXCJpbmNsdWRlSWRzT25seVwiXVxyXG4gICAgfSk7XHJcblxyXG4gICAgYXN5bmMgZnVuY3Rpb24gZmV0Y2hUYXNrc0luQ2h1bmtzV2l0aEVkZ2VzVG8oaWRzOiBzdHJpbmdbXSwgb3B0aW9uczogTGlzdE9wdGlvbnMpOiBQcm9taXNlPFRhc2tbXT4ge1xyXG4gICAgICAvLyBUaGlzIGZ1bmN0aW9uIHNob3VsZCBtYWtlIHdvcmsgYXJvdW5kIHRoZSBjYXNlIHdoZW4gZ2l2ZW4gXCJpZHNcIiBjb250YWlucyB0b28gbWFueSBpdGVtcywgYnlcclxuICAgICAgLy8gZGl2aWRpbmcgdGhlIHJlcXVlc3RzIGludG8gc2V2ZXJhbCBhbmQgbWVyZ2UgdGhlIHJlc3VsdCB1c2luZyBhIE1hcC5cclxuICAgICAgaWYgKGlkcy5sZW5ndGggPT09IDApIHJldHVybiBbXTsgLy8gT3RoZXJ3aXNlIHdlJ2xsIHJlcXVlc3QgZXZlcnkgdGFzayBpbiB0aGUgc3lzdGVtLlxyXG4gICAgICBjb25zdCByZXN1bHQgPSBuZXcgTWFwPElELCBUYXNrPigpO1xyXG4gICAgICBjb25zb2xlLmxvZyhcIk51bWJlciBvZiBpZHM6IFwiICsgaWRzLmxlbmd0aCk7XHJcbiAgICAgIC8vcmV0dXJuIHJlc3VsdC52YWx1ZXMoKTtcclxuICAgICAgcmV0dXJuIGF3YWl0IGVudi5rZWRCYWNrZW5kQ2xpZW50Lmxpc3Q8VGFzaz4oXCJ0YXNrc1wiLCB7XHJcbiAgICAgICAgLi4ub3B0aW9ucyxcclxuICAgICAgICBoYXNFZGdlc1RvOiBpZHNcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLypjb25zdCB0YXNrcyA9IGF3YWl0IGVudi5rZWRCYWNrZW5kQ2xpZW50Lmxpc3Q8VGFzaz4oXCJ0YXNrc1wiLCB7XHJcbiAgICAgIGhhc0VkZ2VzVG86IG9sZElkcyxcclxuICAgICAgaW5jbHVkZTogW1wiYWJpbGl0aWVzXCIsIFwia25vd2xlZGdlUmVxdWlyZW1lbnRzXCIsIFwiY2VudHJhbENvbnRlbnRcIl0sXHJcbiAgICAgIGZsYWdzOiBbXCJpbmNsdWRlSWRzT25seVwiXVxyXG4gICAgfSk7Ki9cclxuXHJcbiAgICBmb3IgKGNvbnN0IHRhc2sgb2YgdGFza3MpIHtcclxuICAgICAgY29uc3Qgb2xkTVQgPSB0YXNrLm1pZ3JhdGVkVGV4dHMgfHwge1xyXG4gICAgICAgIGFiaWxpdGllczoge30sXHJcbiAgICAgICAgY2VudHJhbENvbnRlbnQ6IHt9LFxyXG4gICAgICAgIGtub3dsZWRnZVJlcXVpcmVtZW50czoge31cclxuICAgICAgfTtcclxuICAgICAgdGFzay5taWdyYXRlZFRleHRzID0ge1xyXG4gICAgICAgIGFiaWxpdGllczoge30sXHJcbiAgICAgICAgY2VudHJhbENvbnRlbnQ6IHt9LFxyXG4gICAgICAgIGtub3dsZWRnZVJlcXVpcmVtZW50czoge31cclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IG11dGF0aW9uczogQXJyYXk8KGJyOiBCYXRjaFJ1bm5lcik9PnZvaWQ+ID0gW107XHJcbiAgICAgIGNvbnN0IGNoYW5nZURlc2NyaXB0aW9uczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgZm9yIChjb25zdCB7aWR9IG9mIHRhc2suYWJpbGl0aWVzKSB7XHJcbiAgICAgICAgY29uc3QgbWlncmF0aW9uSW5mbyA9IGFiaWxpdHlJZHNUb01pZ3JhdGUuZ2V0KGlkKTtcclxuICAgICAgICBpZiAobWlncmF0aW9uSW5mbykge1xyXG4gICAgICAgICAgY29uc3Qge25ld0lkLCBuZXdUZXh0LCBpc1R5cG9GaXh9ID0gbWlncmF0aW9uSW5mbztcclxuICAgICAgICAgIGxldCB7b2xkVGV4dH0gPSBtaWdyYXRpb25JbmZvO1xyXG4gICAgICAgICAgbGV0IG9sZElkID0gaWQ7XHJcbiAgICAgICAgICBpZiAob2xkTVQuYWJpbGl0aWVzW2lkXSkge1xyXG4gICAgICAgICAgICAvLyBJZiBtaWdyYXRpbmcgc3R1ZmYgdGhhdCB3YXMgbmV2ZXIgYWNrbm93bGVkZ2VzIGJ5IGEgdGVhY2hlcixcclxuICAgICAgICAgICAgLy8gV2Ugc2hvdWxkIHBvaW50IG91dCB0aGUgdmVyeSBvbGQgaWQgYW5kIHRleHQgaW5zdGVhZCBvZiB0aGUgbmV2ZXItYWNrbm93bGVkZ2VkIG9uZS5cclxuICAgICAgICAgICAgb2xkVGV4dCA9IG9sZE1ULmFiaWxpdGllc1tpZF0ub2xkVGV4dDtcclxuICAgICAgICAgICAgb2xkSWQgPSBvbGRNVC5hYmlsaXRpZXNbaWRdLm9sZElkO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKG5ld0lkICYmIG9sZFRleHQgIT09IG5ld1RleHQpIHtcclxuICAgICAgICAgICAgLy8gU3BlY2lhbCBjYXNlOiBJZiBvbGRUZXh0ID09PSBuZXdUZXh0LCB0aGVuIHRoaXMgaXMgYSByZWltcG9ydCBuZXcgWE1MIHRoYXQgcmV2ZXJ0cyBiYWNrIHRvIG9yaWdpbiB0ZXh0LiBEb24ndCByZXF1aXJlIGFja25vd2xlZGdlbWVudCBmcm9tIHRlYWNoZXIhXHJcbiAgICAgICAgICAgIGlmICghaXNUeXBvRml4KSB7XHJcbiAgICAgICAgICAgICAgLy8gSWYgdGhpcyB3YXNuJ3QganVzdCBhIHR5cG8gZml4IChjaGFuZ2VzIGluIHN0b3Agd29yZHMsIGNhc2luZyBvciBzcGVjaWFsIGNoYXJhY3RlcnMpXHJcbiAgICAgICAgICAgICAgdGFzay5taWdyYXRlZFRleHRzLmFiaWxpdGllc1tuZXdJZF0gPSB7b2xkSWQsIG9sZFRleHQsIGltcG9ydERhdGV9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBtdXRhdGlvbnMucHVzaChiciA9PiB7XHJcbiAgICAgICAgICAgIGJyLnVubGluazIoXCJ0YXNrc1wiLCB0YXNrLmlkLCBcImFiaWxpdGllc1wiLCBpZCk7XHJcbiAgICAgICAgICAgIGlmIChuZXdJZCkgYnIubGluazIoXCJ0YXNrc1wiLCB0YXNrLmlkLCBcImFiaWxpdGllc1wiLCBuZXdJZCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGNoYW5nZURlc2NyaXB0aW9ucy5wdXNoKGA8c3RyaWtlPiR7b2xkVGV4dH08L3N0cmlrZT5gKTtcclxuICAgICAgICAgIGlmIChuZXdJZCkge1xyXG4gICAgICAgICAgICBjaGFuZ2VEZXNjcmlwdGlvbnMucHVzaChuZXdUZXh0KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHRhc2tDb3Vyc2VDb2RlcyA9IG5ldyBTZXQ8c3RyaW5nPih0YXNrLnRhZ3MgPyBcclxuICAgICAgICB0YXNrLnRhZ3MuZmlsdGVyKHQgPT4gdC5zdGFydHNXaXRoKCdjb3Vyc2U6JykpLm1hcCh0ID0+IHQuc3Vic3RyKFwiY291cnNlOlwiLmxlbmd0aCkpIDpcclxuICAgICAgICBbXSk7XHJcblxyXG4gICAgICAvLyBXZSBuZWVkIHRvIGtlZXAgdHJhY2sgb2YgbGlua2VkSWRzIChmb3IgdGhpcyBwYXJ0aWN1bGFyIHRhc2spIGZvciB0aGUgZm9sbG93aW5nIHJlYXNvbjpcclxuICAgICAgLy8gTGV0J3Mgc2F5IHRoZSB0YXNrIHdhcyByZWZlcnJlZCB0byBieSB0d28gZGlmZmVyZW50IGNvdXJzZXMgKHBvc3NpYmxlIGluIG9sZCB2ZXJzaW9ucyksXHJcbiAgICAgIC8vIGFuZCBpbiBvbGQgQ2VudHJhbCBDb250ZW50LCB0aGUgdHdvIGNvdXJzZXMgZGlkIGhhdmUgc2xpZ2h0bHkgZGlmZmVyZW50IGZvcm11bGF0aW9ucyBvZiBjZW50cmFsIGNvbnRlbnQsXHJcbiAgICAgIC8vIHNvIHRoZSB0YXNrIHdhcyBtYXBwZWQgdG8gYm90aCBvZiB0aGVtLiBUaGVuLCBpbiBuZXcgWE1MLCB0aGUgc2FtZSBjZW50cmFsIGNvbnRlbnQgd2FzIGZvcm11bGF0ZWRcclxuICAgICAgLy8gaW4gYSBuZXcgd2F5IHRoYXQgaXMgaWRlbnRpY2FsIHRoaXMgdGltZSBiZXR3ZWVuIHRoZSB0d28gY291cnNlcy4gVGhlbiBib3RoIG9sZCBJRHMgd2lsbCBiZSByZXBsYWNlZFxyXG4gICAgICAvLyBieSBhIHNpbmdsZSBuZXcgSUQuIEl0IHdvdWxkIHRoZW4gYmUgdW5uZXNjZXNzYXJ5IHRvIGxpbmsgdG8gdGhlIG5ldyBJRCB0d2ljZS5cclxuICAgICAgY29uc3QgbGlua2VkSWRzID0gbmV3IFNldDxJRD4oKTtcclxuXHJcbiAgICAgIGZvciAoY29uc3Qge2tyc1RvTWlncmF0ZSwgY2NzVG9NaWdyYXRlLCBjb3Vyc2VDb2RlfSBvZiBpZHNUb01pZ3JhdGVQZXJDb3Vyc2UpIHtcclxuICAgICAgICBpZiAodGFza0NvdXJzZUNvZGVzLnNpemUgPT09IDAgfHwgdGFza0NvdXJzZUNvZGVzLmhhcyhjb3Vyc2VDb2RlKSkge1xyXG4gICAgICAgICAgZm9yIChjb25zdCB7aWR9IG9mIHRhc2suY2VudHJhbENvbnRlbnQpIHtcclxuICAgICAgICAgICAgY29uc3QgbWlncmF0aW9uSW5mbyA9IGNjc1RvTWlncmF0ZS5nZXQoaWQpO1xyXG4gICAgICAgICAgICBpZiAobWlncmF0aW9uSW5mbykge1xyXG4gICAgICAgICAgICAgIGxldCB7bmV3SWQsIG5ld1RleHQsIG9sZFRleHQsIGlzVHlwb0ZpeH0gPSBtaWdyYXRpb25JbmZvO1xyXG4gICAgICAgICAgICAgIGxldCBvbGRJZCA9IGlkO1xyXG4gICAgICAgICAgICAgIGlmIChvbGRNVC5jZW50cmFsQ29udGVudFtpZF0pIHtcclxuICAgICAgICAgICAgICAgIC8vIElmIG1pZ3JhdGluZyBzdHVmZiB0aGF0IHdhcyBuZXZlciBhY2tub3dsZWRnZXMgYnkgYSB0ZWFjaGVyLFxyXG4gICAgICAgICAgICAgICAgLy8gV2Ugc2hvdWxkIHBvaW50IG91dCB0aGUgdmVyeSBvbGQgaWQgYW5kIHRleHQgaW5zdGVhZCBvZiB0aGUgbmV2ZXItYWNrbm93bGVkZ2VkIG9uZS5cclxuICAgICAgICAgICAgICAgIG9sZFRleHQgPSBvbGRNVC5jZW50cmFsQ29udGVudFtpZF0ub2xkVGV4dDtcclxuICAgICAgICAgICAgICAgIG9sZElkID0gb2xkTVQuY2VudHJhbENvbnRlbnRbaWRdLm9sZElkO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBpZiAobmV3SWQgJiYgb2xkVGV4dCAhPT0gbmV3VGV4dCkge1xyXG4gICAgICAgICAgICAgICAgLy8gU3BlY2lhbCBjYXNlOiBJZiBvbGRUZXh0ID09PSBuZXdUZXh0LCB0aGVuIHRoaXMgaXMgYSByZWltcG9ydCBuZXcgWE1MIHRoYXQgcmV2ZXJ0cyBiYWNrIHRvIG9yaWdpbiB0ZXh0LiBEb24ndCByZXF1aXJlIGFja25vd2xlZGdlbWVudCBmcm9tIHRlYWNoZXIhXHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzVHlwb0ZpeCkge1xyXG4gICAgICAgICAgICAgICAgICAvLyBJZiB0aGlzIHdhc24ndCBqdXN0IGEgdHlwbyBmaXggKGNoYW5nZXMgaW4gc3RvcCB3b3JkcywgY2FzaW5nIG9yIHNwZWNpYWwgY2hhcmFjdGVycylcclxuICAgICAgICAgICAgICAgICAgdGFzay5taWdyYXRlZFRleHRzLmNlbnRyYWxDb250ZW50W25ld0lkXSA9IHtvbGRJZCwgb2xkVGV4dCwgaW1wb3J0RGF0ZX07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGlmICghbmV3SWQgfHwgIWxpbmtlZElkcy5oYXMobmV3SWQpKSB7XHJcbiAgICAgICAgICAgICAgICBtdXRhdGlvbnMucHVzaChiciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIGJyLnVubGluazIoXCJ0YXNrc1wiLCB0YXNrLmlkLCBcImNlbnRyYWxDb250ZW50XCIsIGlkKTtcclxuICAgICAgICAgICAgICAgICAgaWYgKG5ld0lkKSBici5saW5rMihcInRhc2tzXCIsIHRhc2suaWQsIFwiY2VudHJhbENvbnRlbnRcIiwgbmV3SWQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VEZXNjcmlwdGlvbnMucHVzaChgPHN0cmlrZT4ke29sZFRleHR9PC9zdHJpa2U+YCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobmV3SWQpIHtcclxuICAgICAgICAgICAgICAgICAgY2hhbmdlRGVzY3JpcHRpb25zLnB1c2gobmV3VGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgIGxpbmtlZElkcy5hZGQobmV3SWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZm9yIChjb25zdCB7aWR9IG9mIHRhc2sua25vd2xlZGdlUmVxdWlyZW1lbnRzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1pZ3JhdGlvbkluZm8gPSBrcnNUb01pZ3JhdGUuZ2V0KGlkKTtcclxuICAgICAgICAgICAgaWYgKG1pZ3JhdGlvbkluZm8pIHtcclxuICAgICAgICAgICAgICBsZXQge25ld0lkLCBuZXdUZXh0LCBvbGRUZXh0LCBpc1R5cG9GaXh9ID0gbWlncmF0aW9uSW5mbztcclxuICAgICAgICAgICAgICBsZXQgb2xkSWQgPSBpZDtcclxuICAgICAgICAgICAgICBpZiAob2xkTVQua25vd2xlZGdlUmVxdWlyZW1lbnRzW2lkXSkge1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgbWlncmF0aW5nIHN0dWZmIHRoYXQgd2FzIG5ldmVyIGFja25vd2xlZGdlcyBieSBhIHRlYWNoZXIsXHJcbiAgICAgICAgICAgICAgICAvLyBXZSBzaG91bGQgcG9pbnQgb3V0IHRoZSB2ZXJ5IG9sZCBpZCBhbmQgdGV4dCBpbnN0ZWFkIG9mIHRoZSBuZXZlci1hY2tub3dsZWRnZWQgb25lLlxyXG4gICAgICAgICAgICAgICAgb2xkVGV4dCA9IG9sZE1ULmtub3dsZWRnZVJlcXVpcmVtZW50c1tpZF0ub2xkVGV4dDtcclxuICAgICAgICAgICAgICAgIG9sZElkID0gb2xkTVQua25vd2xlZGdlUmVxdWlyZW1lbnRzW2lkXS5vbGRJZDtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgaWYgKG5ld0lkICYmIG9sZFRleHQgIT09IG5ld1RleHQpIHtcclxuICAgICAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZTogSWYgb2xkVGV4dCA9PT0gbmV3VGV4dCwgdGhlbiB0aGlzIGlzIGEgcmVpbXBvcnQgbmV3IFhNTCB0aGF0IHJldmVydHMgYmFjayB0byBvcmlnaW4gdGV4dC4gRG9uJ3QgcmVxdWlyZSBhY2tub3dsZWRnZW1lbnQgZnJvbSB0ZWFjaGVyIVxyXG4gICAgICAgICAgICAgICAgaWYgKCFpc1R5cG9GaXgpIHtcclxuICAgICAgICAgICAgICAgICAgLy8gSWYgdGhpcyB3YXNuJ3QganVzdCBhIHR5cG8gZml4IChjaGFuZ2VzIGluIHN0b3Agd29yZHMsIGNhc2luZyBvciBzcGVjaWFsIGNoYXJhY3RlcnMpXHJcbiAgICAgICAgICAgICAgICAgIHRhc2subWlncmF0ZWRUZXh0cy5rbm93bGVkZ2VSZXF1aXJlbWVudHNbbmV3SWRdID0ge29sZElkLCBvbGRUZXh0LCBpbXBvcnREYXRlfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIGlmICghbmV3SWQgfHwgIWxpbmtlZElkcy5oYXMobmV3SWQpKSB7XHJcbiAgICAgICAgICAgICAgICBtdXRhdGlvbnMucHVzaChiciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIGJyLnVubGluazIoXCJ0YXNrc1wiLCB0YXNrLmlkLCBcImtub3dsZWRnZVJlcXVpcmVtZW50c1wiLCBpZCk7XHJcbiAgICAgICAgICAgICAgICAgIGlmIChuZXdJZCkgYnIubGluazIoXCJ0YXNrc1wiLCB0YXNrLmlkLCBcImtub3dsZWRnZVJlcXVpcmVtZW50c1wiLCBuZXdJZCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNoYW5nZURlc2NyaXB0aW9ucy5wdXNoKGA8c3RyaWtlPiR7b2xkVGV4dH08L3N0cmlrZT5gKTtcclxuICAgICAgICAgICAgICAgIGlmIChuZXdJZCkge1xyXG4gICAgICAgICAgICAgICAgICBjaGFuZ2VEZXNjcmlwdGlvbnMucHVzaChuZXdUZXh0KTtcclxuICAgICAgICAgICAgICAgICAgbGlua2VkSWRzLmFkZChuZXdJZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjaGFuZ2VzLnB1c2goe1xyXG4gICAgICAgIGNoYW5nZTogYE1pZ3JlcmFkIFVwcGdpZnRgLFxyXG4gICAgICAgIGNvbnRlbnQ6IGA8aDQ+JHt0YXNrLm5hbWV9ICR7dGFzay5zY2hvb2wgPyBgKCR7dGFzay5zY2hvb2x9KSBgIDogJyhza29sYSBlaiBhbmdpdmVuKSd9PC9oND5cclxuICAgICAgICAgIDxwPkt1cnNrb2Q6ICR7Wy4uLnRhc2tDb3Vyc2VDb2Rlc10uam9pbignLCcpfTwvcD5cclxuICAgICAgICAgICR7Y2hhbmdlRGVzY3JpcHRpb25zLm1hcCh0eHQgPT4gYDxwPiR7dHh0fTwvcD5gKS5qb2luKCcnKX1gLFxyXG4gICAgICAgIG11dGF0aW9uczogYnIgPT4ge1xyXG4gICAgICAgICAgYnIucHV0KFwidGFza3NcIiwgdGFzayk7XHJcbiAgICAgICAgICBtdXRhdGlvbnMuZm9yRWFjaChtID0+IG0oYnIpKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gVEhFIFJFU1VMVCBXSUxMIEJFOlxyXG4gIC8vICBGdW5jdGlvbiBwb3B1bGF0ZXMgYSBjb21wbGV0ZSBzZXQgb2YgQ2hhbmdlcyB0byBkaXNwbGF5IHRvIHVzZXIuXHJcbiAgLy8gIElmIHVzZXIgY2xpY2tzIFwiaW1wb3J0XCIsIHRoZXNlIGNoYW5nZXMgd2lsbCBiZSBwZXJmb3JtZWQuXHJcblxyXG4gIFxyXG4gIC8vIE5leHQgdGhpbmcgd2lsbCBiZSB0byBtYWtlIHRoaXMgdmlzaWJsZSBpbiBHVUk6XHJcbiAgLy8gIFNob3cgT3BlbkNsb3NlQm94IHdpdGggd2FybmluZyBiZWZvcmUgXCJJbmzDpG1uaW5nc3VwcGdpZnRcIiBpbiBjYXNlIHRoZXJlIGFyZSBtaWdyYXRpb25UYXNrcy5cclxuICAvLyAgTGlzdCBrbm93bGVkZ2UgcmVxdWlyZW1lbnRzIEEsIEtSIEMsIEtSIEUsIGNlbnRyYWwgY29udGVudHMgYW5kIGFiaWxpdGllcyByZXNwZWN0aXZlbHkgaW4gdG90YWxseSBtYXggNSB0YWJsZXMuXHJcbiAgLy8gIFNhbWUgR1VJIGFzIGtub3dsZWRnZVJlcXVpcmVtZW50IG1hdHJpeCAoZ3JlZW4gaGVhZGVyKSBwZXIgdGFibGUuXHJcbiAgLy8gIEhlYWRlcnM6IFwiVXJzcHJ1bmdsaWcgZm9ybXVsZXJpbmdcIiwgXCJTa29sdmVya2V0cyBueWEgZm9ybXVsZXJpbmdcIiwgXCJUw6Rja2VyIHVwcGdpZnRlbiBkZW4gbnlhIGZvcm11bGVyaW5nZW4/XCJcclxuICAvLyAgRm9yIGVhY2ggcm93LCBzaG93IHN0cmlrZSB0ZXh0ICsgbmV3IHRleHQgd2l0aCBncmVlbiBiYWNrZ3JvdW5kLiBUaGVuIEltcG9ydCBEYXRlLiBUaGVuIFwiSmEgLyBOZWpcIi5cclxuICAvLyAgVHJ5Y2tlciBtYW4gSkEgZWxsZXIgbmVqIHPDpSB0YXMgcmFkZW4gYm9ydC5cclxuICAvLyAgVHJ5Y2tlciBtYW4gTmVqIHPDpSB0YXMgw6R2ZW4ga29wcGxpbmdlbiBib3J0IG9jaCBrdXJzZXIgc29tIGFudsOkbmRlciB1cHBnaWZ0ZW4ga2FuIHDDpXZlcmthcy5cclxuICAvL1xyXG4gIC8vIE7DpHN0YSBzYWsgYXR0IGfDtnJhOiBQaW5uYS8gdmlzYSBiZXLDtnJkYSB1cHBnaWZ0ZXIgbWVkIG55IGbDpHJnIGVsbGVyIGlrb24uXHJcbiAgLy8gT2Nrc8OlLCBow7Znc3QgdXBwIHDDpSBrdXJzLXNpZGFuIChrdXJzYnlnZyk6IFZpc2Egc2FtbWEgdmFybmluZ3N0cmlhbmdlbCBPcGVuQ2xvc2VCb3ggb2NoIGxpc3RhXHJcbiAgLy8gw6RuZHJhZGUgZm9ybXVsZXJpbmdhciArIGJlcsO2cmRhIHVwcGdpZnRlci4gT20gbWFuIGludGUgw6RyIHJlZGlnZXJpbmdzYmVow7ZyaWcgYXYgZW4gdXBwZ2lmdCBiw7ZyXHJcbiAgLy8gbWFuIGtvbnRha3RhIHVwcGdpZnRlbnMgw6RnYXJlIGbDtnIgYXR0IGdyYW5za2EgbWlncmVyaW5nZW4uXHJcbn1cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBMLCBzaG93SW5mbywgY29tcGFyZVByb3AsIGFycmF5VG9Mb29rdXAsIGZsYXR0ZW4gfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCBlbnYgZnJvbSAnLi4vLi4vLi4vZ2xvYmFscy9LRUQuZW52JztcclxuaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcclxuaW1wb3J0IHsgU2tvbHZlcmtldFN1YmplY3QsIFNrb2x2ZXJrZXRDb3Vyc2UsIHBhcnNlU2tvbHZlcmtldFllYXJzIH0gZnJvbSAnLi9za29sdmVya2V0LXN1YmplY3QnO1xyXG5pbXBvcnQgeyBVcGxvYWRlZFN1YmplY3QgfSBmcm9tICcuL3VwbG9hZGVkLXN1YmplY3QnO1xyXG5leHBvcnQgeyBTaG93U3ViamVjdCB9IGZyb20gJy4vc2hvdy1zdWJqZWN0JztcclxuaW1wb3J0IHsgSGFzaFJvdXRlciBhcyBSb3V0ZXIsIFJvdXRlLCBMaW5rLCBSZWRpcmVjdCB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xyXG5pbXBvcnQgeyByZWFkQmxvYkFzVGV4dCwgYWxsb3dDb3B5IH0gZnJvbSBcIi4uL3V0aWxzXCI7XHJcbmltcG9ydCB7IENvdXJzZUJhbm5lciB9IGZyb20gXCIuLi9jb3Vyc2VzL2NvdXJzZS1iYW5uZXJcIjtcclxuaW1wb3J0IHsgU3Bpbm5lciB9IGZyb20gXCIuLi9zdWItY29tcG9uZW50cy9zcGlubmVyXCI7XHJcbmltcG9ydCB7IFN1YmplY3RzSW5uZXIgfSBmcm9tICcuL3N1YmplY3RzLWlubmVyJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgZmVlZGJhY2tVcmw6IHN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgU3ViamVjdHMgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHM+IHtcclxuICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIGlzTGlzdGluZ1N1YmplY3RzOiB0cnVlLFxyXG4gICAgICBwcmltYXJ5U2Nob29sU3ViamVjdHM6IFtdLFxyXG4gICAgICB1cGxvYWRlZFN1YmplY3Q6IG51bGxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICByZXR1cm4gPGRpdj48Q291cnNlQmFubmVyXHJcbiAgICAgIHRpdGxlPXtMYMOEbW5lbmB9XHJcbiAgICAgIGFjdGl2ZVBhZ2U9XCJzdWJqZWN0c1wiXHJcbiAgICAgIHJvdXRlcz17e2ZlZWRiYWNrOiB0aGlzLnByb3BzLmZlZWRiYWNrVXJsfX1cclxuICAgICAvPlxyXG4gICAgIDxTdWJqZWN0c0lubmVyIGxpbmtQcmVmaXg9XCIvc3ViamVjdHMvXCIgLz5cclxuICAgIDwvZGl2PlxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEwgfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IFN1YmplY3QgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCBlbnYgZnJvbSAnLi4vLi4vLi4vZ2xvYmFscy9LRUQuZW52JztcclxuaW1wb3J0IHsgSGFzaFJvdXRlciBhcyBSb3V0ZXIsIFJvdXRlLCBMaW5rLCBSZWRpcmVjdCB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xyXG5pbXBvcnQgeyBDb3Vyc2VCYW5uZXIgfSBmcm9tIFwiLi4vY291cnNlcy9jb3Vyc2UtYmFubmVyXCI7XHJcbmltcG9ydCB7IFNwaW5uZXIgfSBmcm9tIFwiLi4vc3ViLWNvbXBvbmVudHMvc3Bpbm5lclwiO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBpZDogc3RyaW5nXHJcbn1cclxuXHJcbmludGVyZmFjZSBTdGF0ZSB7XHJcbiAgc3ViamVjdDogU3ViamVjdFxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgU2hvd1N1YmplY3RJbm5lciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcyxTdGF0ZT4ge1xyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHtzdWJqZWN0OiBudWxsfTtcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcclxuICAgIHRoaXMubG9hZCgpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgbG9hZCgpIHtcclxuICAgIGNvbnN0IHN1YmplY3QgPSBhd2FpdCBlbnYua2VkQmFja2VuZENsaWVudC5nZXQ8U3ViamVjdD4oJ3N1YmplY3RzJywgdGhpcy5wcm9wcy5pZCwgeyBpbmNsdWRlOiAnY291cnNlVGVtcGxhdGVzJyB9KTtcclxuICAgIHRoaXMuc2V0U3RhdGUoeyBzdWJqZWN0IH0pO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgaWYgKCF0aGlzLnN0YXRlLnN1YmplY3QpIHJldHVybiA8cD48U3Bpbm5lciAvPjwvcD47XHJcbiAgICBjb25zdCB7IG5hbWUsIGNvZGUsIGNvdXJzZVRlbXBsYXRlcywgc2Nob29sVHlwZSB9ID0gdGhpcy5zdGF0ZS5zdWJqZWN0O1xyXG4gICAgcmV0dXJuIDxkaXY+XHJcbiAgICAgIHtzY2hvb2xUeXBlID09PSAncHJpbWFyeScgPyA8PlxyXG4gICAgICAgIDxoMj5HcnVuZHNrb2xlw6RtbmV0IHtuYW1lfSAoe2NvZGV9KTwvaDI+XHJcbiAgICAgICAgPHVsIGNsYXNzTmFtZT1cImVudGl0eS1saXN0XCI+XHJcbiAgICAgICAgICB7Y291cnNlVGVtcGxhdGVzLm1hcCgoe2lkLCBjb2RlLCBwdWJsaXNoYWJsZSwgcG9pbnRzLCBzY2hvb2xHcmFkZX0pID0+XHJcbiAgICAgICAgICA8bGkga2V5PXtpZH0gY2xhc3NOYW1lPVwiY29tcGxldGVcIj5cclxuICAgICAgICAgICAge25hbWV9IGbDtnIgw6Vyc2t1cnMge3NjaG9vbEdyYWRlfVxyXG4gICAgICAgICAgPC9saT4pfVxyXG4gICAgICAgIDwvdWw+XHJcbiAgICAgIDwvPiAgOiA8PlxyXG4gICAgICAgIDxoMj5LdXJzZXIgZsO2ciDDpG1uZXQge25hbWV9ICh7Y29kZX0pPC9oMj5cclxuICAgICAgICA8dWwgY2xhc3NOYW1lPVwiZW50aXR5LWxpc3RcIj5cclxuICAgICAgICAgIHtjb3Vyc2VUZW1wbGF0ZXMubWFwKCh7aWQsIG5hbWUsIGNvZGUsIHB1Ymxpc2hhYmxlLCBwb2ludHN9KSA9PlxyXG4gICAgICAgICAgPGxpIGtleT17aWR9IGNsYXNzTmFtZT1cImNvbXBsZXRlXCI+XHJcbiAgICAgICAgICAgIHtuYW1lfSAtIHtwb2ludHN9cFxyXG4gICAgICAgICAgPC9saT4pfVxyXG4gICAgICAgIDwvdWw+XHJcbiAgICAgIDwvPn1cclxuICAgIDwvZGl2PjtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgZW52IGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCB7IEhhc2hSb3V0ZXIgYXMgUm91dGVyLCBSb3V0ZSwgTGluaywgUmVkaXJlY3QgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcclxuaW1wb3J0IHsgQ291cnNlQmFubmVyIH0gZnJvbSBcIi4uL2NvdXJzZXMvY291cnNlLWJhbm5lclwiO1xyXG5pbXBvcnQgeyBTcGlubmVyIH0gZnJvbSBcIi4uL3N1Yi1jb21wb25lbnRzL3NwaW5uZXJcIjtcclxuaW1wb3J0IHsgU2hvd1N1YmplY3RJbm5lciB9IGZyb20gJy4vc2hvdy1zdWJqZWN0LWlubmVyJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgaWQ6IHN0cmluZ1xyXG4gIGZlZWRiYWNrVXJsOiBzdHJpbmdcclxufVxyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICBzdWJqZWN0OiBTdWJqZWN0XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBTaG93U3ViamVjdCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcyxTdGF0ZT4ge1xyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHtzdWJqZWN0OiBudWxsfTtcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcclxuICAgIHRoaXMubG9hZCgpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgbG9hZCgpIHtcclxuICAgIGNvbnN0IHN1YmplY3QgPSBhd2FpdCBlbnYua2VkQmFja2VuZENsaWVudC5nZXQ8U3ViamVjdD4oJ3N1YmplY3RzJywgdGhpcy5wcm9wcy5pZCwgeyBpbmNsdWRlOiAnY291cnNlVGVtcGxhdGVzJyB9KTtcclxuICAgIHRoaXMuc2V0U3RhdGUoeyBzdWJqZWN0IH0pO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgaWYgKCF0aGlzLnN0YXRlLnN1YmplY3QpIHJldHVybiA8cD48U3Bpbm5lciAvPjwvcD47XHJcbiAgICBjb25zdCB7IG5hbWUsIGNvZGUsIGNvdXJzZVRlbXBsYXRlcywgc2Nob29sVHlwZSB9ID0gdGhpcy5zdGF0ZS5zdWJqZWN0O1xyXG4gICAgcmV0dXJuIDxkaXY+PENvdXJzZUJhbm5lclxyXG4gICAgICB0aXRsZT17bmFtZX1cclxuICAgICAgYWN0aXZlUGFnZT1cInN1YmplY3RzXCJcclxuICAgICAgcm91dGVzPXt7ZmVlZGJhY2s6IHRoaXMucHJvcHMuZmVlZGJhY2tVcmx9fVxyXG4gICAgICAgLz5cclxuICAgICAgIDxTaG93U3ViamVjdElubmVyIGlkPXt0aGlzLnByb3BzLmlkfSAvPlxyXG4gICAgPC9kaXY+O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgaW50ZXJmYWNlIFNrb2x2ZXJrZXRTdWJqZWN0IHtcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgc2Nob29sVHlwZTogJ2d5bW5hc2l1bScgfCAncHJpbWFyeSc7XHJcbiAgY29kZTogc3RyaW5nO1xyXG4gIHB1cnBvc2U6IHN0cmluZztcclxuICBjb3Vyc2VzOiBTa29sdmVya2V0Q291cnNlW107XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU2tvbHZlcmtldENvdXJzZSB7XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICBjb2RlOiBzdHJpbmc7XHJcbiAgICBjZW50cmFsQ29udGVudDogc3RyaW5nO1xyXG4gICAgeWVhcj86ICcxLTMnIHwgJzQtNicgfCAnNy05JztcclxuICAgIC8vY2VudHJhbENvbnRlbnQ6IEFycmF5PHt5ZWFyPzogc3RyaW5nLCB0ZXh0OiBzdHJpbmd9PjtcclxuICAgIHBvaW50czogbnVtYmVyO1xyXG4gICAga25vd25sZWRnZVJlcXVpcmVtZW50czogQXJyYXk8e2dyYWRlU3RlcDogc3RyaW5nLCB0ZXh0OiBzdHJpbmd9PjtcclxuICAgIC8va25vd25sZWRnZVJlcXVpcmVtZW50czogQXJyYXk8e2dyYWRlU3RlcDogc3RyaW5nLCB0ZXh0OiBzdHJpbmcsIHllYXI/OiBudW1iZXJ9PjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlU2tvbHZlcmtldFllYXJzIChpblllYXI6IHN0cmluZykgOiBBcnJheTwnMS0zJyB8ICc0LTYnIHwgJzctOSc+IHtcclxuICBzd2l0Y2goaW5ZZWFyLnRyaW0oKSkge1xyXG4gICAgY2FzZSAnMyc6XHJcbiAgICBjYXNlICcxLTMnOlxyXG4gICAgICByZXR1cm4gWycxLTMnXTtcclxuICAgIGNhc2UgJzYnOlxyXG4gICAgY2FzZSAnNC02JzpcclxuICAgICAgcmV0dXJuIFsnNC02J107XHJcbiAgICBjYXNlICc3LTknOlxyXG4gICAgY2FzZSAnOSc6XHJcbiAgICAgIHJldHVybiBbJzctOSddO1xyXG4gICAgLy8gU3BlY2lhbHNcclxuICAgIGNhc2UgJzEnOiByZXR1cm4gW1wiMS0zXCJdOyAvLyBGw7ZyZWtvbW1lciBpIMOkbW5lbmEgXCJTdmVuc2thXCIgb2NoIFwiU3ZlbnNrYSBzb20gYW5kcmFzcHLDpWtcIlxyXG4gICAgY2FzZSAnMXMnOiByZXR1cm4gW1wiMS0zXCJdOyAvLyBGw7ZyZWtvbW1lciBpIMOkbW5lbmEgXCJTdmVuc2thXCIgb2NoIFwiU3ZlbnNrYSBzb20gYW5kcmFzcHLDpWtcIlxyXG4gICAgY2FzZSAnMS02JzogcmV0dXJuIFtcIjEtM1wiLCBcIjQtNlwiXTsgLy8gRsO2cmVrb21tZXIgaSDDpG1uZXQgXCJIZW0tIG9jaCBrb25zdW1lbnRrdW5za2FwXCJcclxuICAgIGNhc2UgJzQtOSc6IHJldHVybiBbXCI0LTZcIiwgXCI3LTlcIl07IC8vIEbDtnJla29tbWVyIGkgw6RtbmV0IFwiTW9kZXJuYSBzcHLDpWtcIlxyXG4gICAgZGVmYXVsdDoge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuZXhwZWN0ZWQgeWVhciBpbiBTa29sdmVya2V0IFhNTDogJHtpblllYXJ9LiBFeHBlY3RpbmcgMyw2LDkgb3IgMS0zLCA0LTYsIDctOWApO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEwsIHNob3dJbmZvLCBjb21wYXJlUHJvcCwgYXJyYXlUb0xvb2t1cCwgZmxhdHRlbiB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IGVudiBmcm9tICcuLi8uLi8uLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5pbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgJCBmcm9tICdqcXVlcnknO1xyXG5pbXBvcnQgeyBTa29sdmVya2V0U3ViamVjdCwgcGFyc2VTa29sdmVya2V0WWVhcnMsIFNrb2x2ZXJrZXRDb3Vyc2UgfSBmcm9tICcuL3Nrb2x2ZXJrZXQtc3ViamVjdCc7XHJcbmltcG9ydCB7IFVwbG9hZGVkU3ViamVjdCB9IGZyb20gJy4vdXBsb2FkZWQtc3ViamVjdCc7XHJcbmV4cG9ydCB7IFNob3dTdWJqZWN0IH0gZnJvbSAnLi9zaG93LXN1YmplY3QnO1xyXG5pbXBvcnQgeyBIYXNoUm91dGVyIGFzIFJvdXRlciwgUm91dGUsIExpbmssIFJlZGlyZWN0IH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XHJcbmltcG9ydCB7IHJlYWRCbG9iQXNUZXh0LCBhbGxvd0NvcHkgfSBmcm9tIFwiLi4vdXRpbHNcIjtcclxuaW1wb3J0IHsgQ291cnNlQmFubmVyIH0gZnJvbSBcIi4uL2NvdXJzZXMvY291cnNlLWJhbm5lclwiO1xyXG5pbXBvcnQgeyBTcGlubmVyIH0gZnJvbSBcIi4uL3N1Yi1jb21wb25lbnRzL3NwaW5uZXJcIjtcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgbGlua1ByZWZpeDogc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgU3RhdGUge1xyXG4gIGd5bW5hc2l1bVN1YmplY3RzOiBTdWJqZWN0W107XHJcbiAgcHJpbWFyeVNjaG9vbFN1YmplY3RzOiBTdWJqZWN0W107XHJcbiAgaXNMaXN0aW5nU3ViamVjdHM6IGJvb2xlYW47XHJcbiAgdXBsb2FkZWRTdWJqZWN0OiBTa29sdmVya2V0U3ViamVjdCB8IG51bGw7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBTdWJqZWN0c0lubmVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLFN0YXRlPiB7XHJcbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICBpc0xpc3RpbmdTdWJqZWN0czogdHJ1ZSxcclxuICAgICAgZ3ltbmFzaXVtU3ViamVjdHM6IFtdLFxyXG4gICAgICBwcmltYXJ5U2Nob29sU3ViamVjdHM6IFtdLFxyXG4gICAgICB1cGxvYWRlZFN1YmplY3Q6IG51bGxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnRXaWxsTW91bnQoKSB7XHJcbiAgICB0aGlzLmxvYWQoKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGxvYWQoKSB7XHJcbiAgICBjb25zdCBzdWJqZWN0cyA9IGF3YWl0IGVudi5rZWRCYWNrZW5kQ2xpZW50Lmxpc3Q8U3ViamVjdD4oXCJzdWJqZWN0c1wiKTtcclxuICAgIHN1YmplY3RzLnNvcnQoY29tcGFyZVByb3AoXCJuYW1lXCIpKTtcclxuICAgIGNvbnN0IGd5bW5hc2l1bVN1YmplY3RzID0gc3ViamVjdHMuZmlsdGVyKHMgPT4gcy5zY2hvb2xUeXBlICE9PSAncHJpbWFyeScpO1xyXG4gICAgY29uc3QgcHJpbWFyeVNjaG9vbFN1YmplY3RzID0gc3ViamVjdHMuZmlsdGVyKHMgPT4gcy5zY2hvb2xUeXBlID09PSAncHJpbWFyeScpO1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7IGd5bW5hc2l1bVN1YmplY3RzLCBwcmltYXJ5U2Nob29sU3ViamVjdHMsIGlzTGlzdGluZ1N1YmplY3RzOiBmYWxzZSB9KTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGhhbmRsZUZpbGVTZWxlY3QoZXY6IFJlYWN0LkRyYWdFdmVudDxIVE1MRGl2RWxlbWVudD4pIHtcclxuICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgIGNvbnN0IGZpbGVzID0gZXYuZGF0YVRyYW5zZmVyLmZpbGVzO1xyXG4gICAgY29uc3QgeG1sID0gYXdhaXQgcmVhZEJsb2JBc1RleHQoZmlsZXNbMF0pO1xyXG4gICAgY29uc3QgZG9jID0gJCgkLnBhcnNlWE1MKHhtbCkpO1xyXG4gICAgY29uc3QgdHlwZU9mU2Nob29saW5nID1cclxuICAgICAgZG9jLmZpbmQoXCJzdWJqZWN0Pm9yaWdpbmF0b3JUeXBlT2ZTY2hvb2xpbmdcIikudGV4dCgpLnRyaW0oKSB8fFxyXG4gICAgICBkb2MuZmluZChcInN1YmplY3Q+dHlwZU9mU2Nob29saW5nXCIpLnRleHQoKS50cmltKCk7XHJcbiAgICBjb25zdCBzY2hvb2xUeXBlOiAncHJpbWFyeScgfCAnZ3ltbmFzaXVtJyA9IHR5cGVPZlNjaG9vbGluZyA9PT0gXCJDT01QVUxTT1JZX1NDSE9PTFwiID9cclxuICAgICAgJ3ByaW1hcnknIDpcclxuICAgICAgdHlwZU9mU2Nob29saW5nID09PSBcIlVQUEVSX1NFQ09OREFSWV9FRFVDQVRJT05cIiA/XHJcbiAgICAgICAgJ2d5bW5hc2l1bScgOlxyXG4gICAgICAgIG51bGw7XHJcblxyXG4gICAgaWYgKHNjaG9vbFR5cGUgPT09ICdneW1uYXNpdW0nKSB7XHJcbiAgICAgIGNvbnN0IG1vZGVsOiBTa29sdmVya2V0U3ViamVjdCA9IHtcclxuICAgICAgICBuYW1lOiBkb2MuZmluZChcInN1YmplY3Q+bmFtZVwiKS50ZXh0KCkudHJpbSgpLFxyXG4gICAgICAgIGNvZGU6IGRvYy5maW5kKFwic3ViamVjdD5jb2RlXCIpLnRleHQoKS50cmltKCksXHJcbiAgICAgICAgcHVycG9zZTogZG9jLmZpbmQoXCJzdWJqZWN0PnB1cnBvc2VcIikudGV4dCgpLnRyaW0oKSxcclxuICAgICAgICBjb3Vyc2VzOiBbXSxcclxuICAgICAgICBzY2hvb2xUeXBlOiAnZ3ltbmFzaXVtJ1xyXG4gICAgICB9O1xyXG4gICAgICBjb25zdCBjb3Vyc2VzID0gZG9jLmZpbmQoXCJzdWJqZWN0PmNvdXJzZXNcIik7XHJcbiAgICAgIGZvciAobGV0IGk9MDsgaTxjb3Vyc2VzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgY29uc3QgY291cnNlID0gJChjb3Vyc2VzW2ldKTtcclxuICAgICAgICBjb25zdCBrbm93bmxlZGdlUmVxdWlyZW1lbnRzID0gW10uc2xpY2UuY2FsbChjb3Vyc2UuZmluZChcImtub3dsZWRnZVJlcXVpcmVtZW50c1wiKSlcclxuICAgICAgICAgIC5tYXAociA9PiAoe1xyXG4gICAgICAgICAgICBncmFkZVN0ZXA6ICQocikuZmluZCgnZ3JhZGVTdGVwJykudGV4dCgpLnRyaW0oKSxcclxuICAgICAgICAgICAgdGV4dDogJChyKS5maW5kKCd0ZXh0JykudGV4dCgpLnRyaW0oKVxyXG4gICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICBtb2RlbC5jb3Vyc2VzLnB1c2goe1xyXG4gICAgICAgICAgbmFtZTogY291cnNlLmZpbmQoXCJuYW1lXCIpLnRleHQoKS50cmltKCksXHJcbiAgICAgICAgICBjb2RlOiBjb3Vyc2UuZmluZChcImNvZGVcIikudGV4dCgpLnRyaW0oKSxcclxuICAgICAgICAgIGNlbnRyYWxDb250ZW50OiBjb3Vyc2UuZmluZChcImNlbnRyYWxDb250ZW50XCIpLnRleHQoKS50cmltKCksXHJcbiAgICAgICAgICBwb2ludHM6IHBhcnNlSW50KGNvdXJzZS5maW5kKFwicG9pbnRcIikudGV4dCgpLnRyaW0oKSksXHJcbiAgICAgICAgICBrbm93bmxlZGdlUmVxdWlyZW1lbnRzLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe3VwbG9hZGVkU3ViamVjdDogbW9kZWx9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IGNlbnRyYWxDb250ZW50cyA9IGZsYXR0ZW4oQXJyYXkuZnJvbShkb2MuZmluZChcInN1YmplY3Q+Y2VudHJhbENvbnRlbnRcIikpXHJcbiAgICAgICAgLm1hcChjYyA9PiB7XHJcbiAgICAgICAgICBjb25zdCB5ZWFyID0gJChjYykuZmluZCgneWVhcicpLnRleHQoKS50cmltKCkgYXMgc3RyaW5nO1xyXG4gICAgICAgICAgY29uc3QgdHlwZU9mQ2VudHJhbENvbnRlbnQgPSAkKGNjKS5maW5kKCd0eXBlT2ZDZW50cmFsQ29udGVudCcpLnRleHQoKS50cmltKCkgYXMgc3RyaW5nO1xyXG5cclxuICAgICAgICAgIGlmICh0eXBlT2ZDZW50cmFsQ29udGVudCkge1xyXG4gICAgICAgICAgICAvLyBEbyBub3QgeWV0IHN1cHBvcnQgbXVsdGlwbGUgdHlwZXMgb2YgY2VudHJhbCBjb250ZW50LlxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IgKExgw4RtbmV0IGlubmVow6VsbGVyIGZsZXJhIHBhcmFsbGVsbGEgdHlwZXIgYXYgY2VudHJhbHQgaW5uZWjDpWxsLiBEZXR0YSBzdMO2ZHMgw6RubnUgaW50ZS5gKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBjb25zdCBzdGFkaXVtcyA9IHBhcnNlU2tvbHZlcmtldFllYXJzKHllYXIpO1xyXG4gICAgICAgICAgY29uc3QgY2VudHJhbENvbnRlbnRzRm9yRWFjaFN0YWRpdW0gPSBzdGFkaXVtcy5tYXAoIHN0YWRpdW0gPT4gKHtcclxuICAgICAgICAgICAgeWVhcjogc3RhZGl1bSxcclxuICAgICAgICAgICAgdGV4dDogJChjYykuZmluZCgndGV4dCcpLnRleHQoKS50cmltKCkgYXMgc3RyaW5nXHJcbiAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICByZXR1cm4gY2VudHJhbENvbnRlbnRzRm9yRWFjaFN0YWRpdW07XHJcbiAgICAgICAgfSkpO1xyXG5cclxuICAgICAgY29uc3Qga25vd2xlZGdlUmVxdWlyZW1lbnRzID0gZmxhdHRlbihBcnJheS5mcm9tKGRvYy5maW5kKFwic3ViamVjdD5rbm93bGVkZ2VSZXF1aXJlbWVudFwiKSlcclxuICAgICAgICAubWFwKGtyID0+IHtcclxuICAgICAgICAgIGNvbnN0IHllYXIgPSAkKGtyKS5maW5kKCd5ZWFyJykudGV4dCgpLnRyaW0oKTtcclxuXHJcbiAgICAgICAgICBjb25zdCB0eXBlT2ZSZXF1aXJlbWVudCA9ICQoa3IpLmZpbmQoJ3R5cGVPZlJlcXVpcmVtZW50JykudGV4dCgpLnRyaW0oKSBhcyBzdHJpbmc7XHJcbiAgICAgICAgICBpZiAodHlwZU9mUmVxdWlyZW1lbnQpIHtcclxuICAgICAgICAgICAgLy8gRG8gbm90IHlldCBzdXBwb3J0IG11bHRpcGxlIHR5cGVzIG9mIGtub3dsZWRnZSByZXF1aXJlbWVudC5cclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yIChMYMOEbW5ldCBpbm5laMOlbGxlciBmbGVyYSBwYXJhbGxlbGxhIHR5cGVyIGF2IGt1bnNrYXBza3Jhdi4gRGV0dGEgc3TDtmRzIMOkbm51IGludGUuYCk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgcmV0dXJuIHBhcnNlU2tvbHZlcmtldFllYXJzKHllYXIpLm1hcChzdGFkaXVtID0+ICh7XHJcbiAgICAgICAgICAgIHllYXI6IHN0YWRpdW0sXHJcbiAgICAgICAgICAgIHRleHQ6ICQoa3IpLmZpbmQoJ3RleHQnKS50ZXh0KCkudHJpbSgpLFxyXG4gICAgICAgICAgICBncmFkZVN0ZXA6ICQoa3IpLmZpbmQoJ2dyYWRlU3RlcCcpLnRleHQoKS50cmltKClcclxuICAgICAgICAgIH0pKTtcclxuICAgICAgICB9KSk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBjZW50cmFsQ29udGVudHNCeVN0YWRpdW0gPSBhcnJheVRvTG9va3VwKGNlbnRyYWxDb250ZW50cywgY2MgPT4gY2MueWVhcik7XHJcbiAgICAgIGNvbnN0IGtub3dsZWRnZVJlcXVpcmVtZW50c0J5U3RhZGl1bSA9IGFycmF5VG9Mb29rdXAoa25vd2xlZGdlUmVxdWlyZW1lbnRzLCBrciA9PiBrci55ZWFyKTtcclxuXHJcbiAgICAgIGNvbnN0IHN1YmplY3ROYW1lID0gZG9jLmZpbmQoXCJzdWJqZWN0Pm5hbWVcIikudGV4dCgpLnRyaW0oKTtcclxuICAgICAgY29uc3Qgc3ViamVjdENvZGUgPSBkb2MuZmluZChcInN1YmplY3Q+Y29kZVwiKS50ZXh0KCkudHJpbSgpO1xyXG4gICAgICBjb25zdCBzdWJqZWN0UHVycG9zZSA9IGRvYy5maW5kKFwic3ViamVjdD5wdXJwb3NlXCIpLnRleHQoKS50cmltKCk7XHJcbiAgICAgIC8qXHJcblxyXG4gICAgICAgIFByb2JsZW1hdGljIHdoZW4gdGhlIGZvbGxvd2luZyB0YWdzIGFyZSBwcmVzZW50OlxyXG5cclxuICAgICAgICA8dHlwZU9mUmVxdWlyZW1lbnQ+XHJcbiAgICAgICAgICBXSVRISU5fU1RVREVOVF9DSE9JQ0VfQ0hJTkVTRVxyXG4gICAgICAgIDwvdHlwZU9mUmVxdWlyZW1lbnQ+XHJcbiAgICAgICAgPHR5cGVPZkNlbnRyYWxDb250ZW50PlxyXG4gICAgICAgICAgV0lUSElOX0xBTkdVQUdFX0NIT0lDRVxyXG4gICAgICAgIDwvdHlwZU9mQ2VudHJhbENvbnRlbnQ+XHJcbiAgICAgICovXHJcblxyXG4gICAgICBjb25zdCBjb3Vyc2VzQnlTdGFkaXVtOiBTa29sdmVya2V0Q291cnNlW10gPSAoWycxLTMnLCc0LTYnLCc3LTknXSBhcyBBcnJheTwnMS0zJyB8ICc0LTYnIHwgJzctOSc+KVxyXG4gICAgICAgIC5tYXAoc3RhZGl1bSA9PiAoe1xyXG4gICAgICAgICAgbmFtZTogc3ViamVjdE5hbWUrJyAnK3N0YWRpdW0sXHJcbiAgICAgICAgICBjb2RlOiBzdWJqZWN0Q29kZSsnfCcrc3RhZGl1bSxcclxuICAgICAgICAgIHBvaW50czogMCxcclxuICAgICAgICAgIHllYXI6IHN0YWRpdW0sXHJcbiAgICAgICAgICBjZW50cmFsQ29udGVudDogKGNlbnRyYWxDb250ZW50c0J5U3RhZGl1bVtzdGFkaXVtXXx8W10pLm1hcChjYyA9PiBjYy50ZXh0KS5qb2luKCdcXG4nKSxcclxuICAgICAgICAgIGtub3dubGVkZ2VSZXF1aXJlbWVudHM6IChrbm93bGVkZ2VSZXF1aXJlbWVudHNCeVN0YWRpdW1bc3RhZGl1bV18fFtdKS5tYXAoKHtncmFkZVN0ZXAsIHRleHR9KSA9PiAoe2dyYWRlU3RlcCwgdGV4dH0pKVxyXG4gICAgICAgIH0pKTtcclxuXHJcbiAgICAgIGNvbnN0IG1vZGVsOiBTa29sdmVya2V0U3ViamVjdCA9IHtcclxuICAgICAgICBuYW1lOiBzdWJqZWN0TmFtZSxcclxuICAgICAgICBjb2RlOiBzdWJqZWN0Q29kZSxcclxuICAgICAgICBwdXJwb3NlOiBzdWJqZWN0UHVycG9zZSxcclxuICAgICAgICBzY2hvb2xUeXBlOiAncHJpbWFyeScsXHJcbiAgICAgICAgY291cnNlczogY291cnNlc0J5U3RhZGl1bVxyXG4gICAgICB9O1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHt1cGxvYWRlZFN1YmplY3Q6IG1vZGVsfSk7XHJcbiAgICB9XHJcblxyXG4gICAgXHJcbiAgfVxyXG5cclxuICBvbkltcG9ydFN1Y2Nlc3Moc3ViamVjdCkge1xyXG4gICAgIHNob3dJbmZvKExgSW1wb3J0ZW4gYXYgJHtzdWJqZWN0fSBseWNrYWRlc2ApO1xyXG4gICAgIHRoaXMuc2V0U3RhdGUoe3VwbG9hZGVkU3ViamVjdDogbnVsbH0pO1xyXG4gICAgIHRoaXMubG9hZCgpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3Qge2xpbmtQcmVmaXh9ID0gdGhpcy5wcm9wcztcclxuICAgIHJldHVybiA8ZGl2PlxyXG4gICAgICB7dGhpcy5zdGF0ZS51cGxvYWRlZFN1YmplY3QgP1xyXG4gICAgICA8VXBsb2FkZWRTdWJqZWN0XHJcbiAgICAgICAgb25DYW5jZWw9eygpPT50aGlzLnNldFN0YXRlKHt1cGxvYWRlZFN1YmplY3Q6IG51bGx9KX1cclxuICAgICAgICBvbkltcG9ydFN1Y2Nlc3M9e3N1YmplY3QgPT4gdGhpcy5vbkltcG9ydFN1Y2Nlc3Moc3ViamVjdCl9XHJcbiAgICAgICAgc3ViamVjdD17dGhpcy5zdGF0ZS51cGxvYWRlZFN1YmplY3R9IC8+XHJcbiAgICA6IHRoaXMuc3RhdGUuaXNMaXN0aW5nU3ViamVjdHMgP1xyXG4gICAgICA8ZGl2PjxwPjxTcGlubmVyLz5WYXIgZ29kIHbDpG50YSBtZWRhbiDDpG1uZW4gaMOkbXRhcy4uLjwvcD48L2Rpdj4gOlxyXG4gICAgICA8ZGl2PlxyXG4gICAgICAgIDxoMj57TGBHeW1uYXNpZcOkbW5lbmB9PC9oMj5cclxuICAgICAgICA8dWw+e3RoaXMuc3RhdGUuZ3ltbmFzaXVtU3ViamVjdHMubWFwKHMgPT5cclxuICAgICAgICAgIDxsaSBrZXk9e3MuaWR9IGNsYXNzTmFtZT17cy5wdWJsaXNoYWJsZSA/IFwiY29tcGxldGVcIiA6IFwiaW5jb21wbGV0ZVwifT5cclxuICAgICAgICAgICAgPExpbmsgdG89e2xpbmtQcmVmaXggKyBzLmlkfT57cy5uYW1lfTwvTGluaz5cclxuICAgICAgICAgIDwvbGk+KX1cclxuICAgICAgICA8L3VsPlxyXG4gICAgICAgIDxoMj57TGBHcnVuZHNrb2xlw6RtbmVuYH08L2gyPlxyXG4gICAgICAgIDx1bD57dGhpcy5zdGF0ZS5wcmltYXJ5U2Nob29sU3ViamVjdHMubWFwKHMgPT5cclxuICAgICAgICAgIDxsaSBrZXk9e3MuaWR9IGNsYXNzTmFtZT17cy5wdWJsaXNoYWJsZSA/IFwiY29tcGxldGVcIiA6IFwiaW5jb21wbGV0ZVwifT5cclxuICAgICAgICAgICAgPExpbmsgdG89e2xpbmtQcmVmaXggKyBzLmlkfT57cy5uYW1lfTwvTGluaz5cclxuICAgICAgICAgIDwvbGk+KX1cclxuICAgICAgICA8L3VsPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZHJvcC16b25lXCIgb25EcmFnT3Zlcj17YWxsb3dDb3B5fSBvbkRyb3A9e2V2PT50aGlzLmhhbmRsZUZpbGVTZWxlY3QoZXYpfT5cclxuICAgICAgICAgIERyb3BwYSBTdWJqZWN0LWZpbCBow6RyIGZyw6VuIHNrb2x2ZXJrZXQgKEjDpG10YXMgZnLDpW4gPGEgaHJlZj1cImh0dHA6Ly9vcGVuZGF0YS5za29sdmVya2V0LnNlXCIgdGFyZ2V0PVwic2tvbHZlcmtldFwiPm9wZW5kYXRhLnNrb2x2ZXJrZXQuc2U8L2E+KVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIH08L2Rpdj5cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBTa29sdmVya2V0U3ViamVjdCwgU2tvbHZlcmtldENvdXJzZSB9IGZyb20gJy4vc2tvbHZlcmtldC1zdWJqZWN0JztcclxuaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcclxuaW1wb3J0IGVudiBmcm9tICcuLi8uLi8uLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5pbXBvcnQgeyBTdWJqZWN0LCBDb3Vyc2UsIEFiaWxpdHksIEtub3dsZWRnZVJlcXVpcmVtZW50LCBDZW50cmFsQ29udGVudCB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgTXV0YXRpb25SZXF1ZXN0LCBCYXRjaFJ1bm5lciwgY3JlYXRlVVVJRCB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcclxuaW1wb3J0IHsgQ2hhbmdlIH0gZnJvbSAnLi9kaWZmL2NoYW5nZSc7XHJcbmltcG9ydCB7IFN1YmplY3RUb0ltcG9ydCwgQ291cnNlVG9JbXBvcnQgfSBmcm9tICcuL3N1YmplY3QtdG8taW1wb3J0JztcclxuaW1wb3J0IHsgZGlmZlhtbFdpdGhEYXRhYmFzZSB9IGZyb20gJy4vZGlmZi9kaWZmLXhtbC13aXRoLWRhdGFiYXNlJztcclxuaW1wb3J0IHsgbG9hZENvdXJzZSB9IGZyb20gJy4uL3V0aWxzJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgb25DYW5jZWw6ICgpID0+IHZvaWQ7XHJcbiAgb25JbXBvcnRTdWNjZXNzOiAoc3ViamVjdDogc3RyaW5nKSA9PiB2b2lkO1xyXG4gIHN1YmplY3Q6IFNrb2x2ZXJrZXRTdWJqZWN0O1xyXG59XHJcblxyXG5pbnRlcmZhY2UgU3RhdGUge1xyXG4gIHNob3dGdWxsVGV4dDogYm9vbGVhbjtcclxuICBjaGFuZ2VzOiBDaGFuZ2VbXTtcclxuICBzdWJqZWN0VG9JbXBvcnQ/OiBTdWJqZWN0VG9JbXBvcnQ7XHJcbiAgaXNXb3JraW5nOiBib29sZWFuO1xyXG4gIGlzSW1wb3J0aW5nOiBib29sZWFuO1xyXG4gIGVycm9yPzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVXBsb2FkZWRTdWJqZWN0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLCBTdGF0ZT4ge1xyXG4gIHB1cnBvc2VFbGVtOiBIVE1MRWxlbWVudDtcclxuICBjb3Vyc2VzRWxlbXM6IHsgW2NvdXJzZUNvZGU6IHN0cmluZ106IHsgY291cnNlOiBTa29sdmVya2V0Q291cnNlLCBlbGVtOiBIVE1MRWxlbWVudCB9IH07XHJcbiAgY2VudHJhbENvbnRlbnRFbGVtczogSFRNTEVsZW1lbnRbXTtcclxuICBrbm93bGVkZ2VSZXF1aXJlbWVudEVsZW1zOiBIVE1MRWxlbWVudFtdO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICAgIHRoaXMuY291cnNlc0VsZW1zID0ge307XHJcbiAgICB0aGlzLmNlbnRyYWxDb250ZW50RWxlbXMgPSBbXTtcclxuICAgIHRoaXMua25vd2xlZGdlUmVxdWlyZW1lbnRFbGVtcyA9IFtdO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgc2hvd0Z1bGxUZXh0OiBmYWxzZSxcclxuICAgICAgY2hhbmdlczogW10sXHJcbiAgICAgIGlzV29ya2luZzogdHJ1ZSxcclxuICAgICAgaXNJbXBvcnRpbmc6IGZhbHNlXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICB0aGlzLmFkZENsYXNzZXNGb3JDaGVycnlQaWNrZWRFbGVtZW50cygpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3Qge2NoYW5nZXMsIHN1YmplY3RUb0ltcG9ydH0gPSBhd2FpdCB0aGlzLmRpZmZXaXRoRXhpc3RpbmcoKTtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGNoYW5nZXMsIHN1YmplY3RUb0ltcG9ydCB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBlcnJvcjogJycrZXJyb3IgfSk7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHsgaXNXb3JraW5nOiBmYWxzZSB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFkZENsYXNzZXNGb3JDaGVycnlQaWNrZWRFbGVtZW50cygpIHtcclxuICAgIGNvbnN0IGFiaWxpdGllcyA9ICQodGhpcy5wdXJwb3NlRWxlbSkuZmluZCgnbGknKS5maXJzdCgpLnBhcmVudCgpLmNoaWxkcmVuKCdsaScpO1xyXG4gICAgYWJpbGl0aWVzLmFkZENsYXNzKCdhYmlsaXR5Jyk7XHJcbiAgICBjb25zdCBjZW50cmFsQ29udGVudHMgPSAkKHRoaXMuY2VudHJhbENvbnRlbnRFbGVtcykuZmluZCgnbGknKTtcclxuICAgIGNlbnRyYWxDb250ZW50cy5hZGRDbGFzcygnY2VudHJhbC1jb250ZW50Jyk7XHJcbiAgICBjb25zdCBrbm93bGVkZ2VSZXF1aXJlbWVudHMgPSAkKHRoaXMua25vd2xlZGdlUmVxdWlyZW1lbnRFbGVtcykuZmluZCgncCcpO1xyXG4gICAga25vd2xlZGdlUmVxdWlyZW1lbnRzLmFkZENsYXNzKCdrbm93bGVkZ2UtcmVxdWlyZW1lbnQnKTtcclxuICAgIGNvbnN0IGFsbCA9ICQoW2FiaWxpdGllcywgY2VudHJhbENvbnRlbnRzLCBrbm93bGVkZ2VSZXF1aXJlbWVudHNdKTtcclxuICAgIGFsbC5hZGRDbGFzcygnbWFya2VkLWFyZWEnKTtcclxuICB9XHJcblxyXG4gIGNoZXJyeVBpY2tEYXRhKCk6IFN1YmplY3RUb0ltcG9ydCB7XHJcbiAgICAvL1xyXG4gICAgLy8gUmVhZHMgZWxlbWVudHMgKHRhZ2dlZCBieSBjbGFzc2VzIGluIGFkZENsYXNzZXNGb3JDaGVycnlQaWNrZWRFbGVtZW50cygpKSBhbmQgY29udmVydHMgdGhlaXIgaW5uZXIgSFRNTCB0byB0aGUgY29ycmVzcG9uZGluZ1xyXG4gICAgLy8gbW9kZWwgU3ViamVjdFRvSW1wb3J0LiBOb3RlIHRoYXQgaWYgd2UgbmVlZCB0byBhZGp1c3QgaG93IHRvIHBpY2sgdGhlIHJpZ2h0IExJIG9yIFAgZWxlbWVudHMsIHdlXHJcbiAgICAvLyB3aWxsIG9ubHkgbmVlZCB0byBjaGFuZ2UgdGhlIGNvZGUgaW4gYWRkQ2xhc3Nlc0ZvckNoZXJyeVBpY2tlZEVsZW1lbnRzKCksIG5vdCB0aGlzIGNvZGUuXHJcbiAgICAvL1xyXG4gICAgY29uc3Qgc2tvbFN1YmplY3QgPSB0aGlzLnByb3BzLnN1YmplY3Q7XHJcbiAgICBjb25zdCBhYmlsaXRpZXNMaXMgPSBBcnJheS5mcm9tKCQodGhpcy5wdXJwb3NlRWxlbSkuZmluZCgnbGknKS5maXJzdCgpLnBhcmVudCgpLmNoaWxkcmVuKCdsaScpKTtcclxuICAgIGNvbnN0IGFiaWxpdGllcyA9IGFiaWxpdGllc0xpcy5tYXAoKGEsIGkpID0+IGAke2kgKyAxfS4gJHskKGEpLmh0bWwoKX1gLnRyaW0oKSkuZmlsdGVyKGh0bWwgPT4gISFodG1sKTtcclxuXHJcbiAgICBjb25zdCByZXN1bHQ6IFN1YmplY3RUb0ltcG9ydCA9IHtcclxuICAgICAgbmFtZTogc2tvbFN1YmplY3QubmFtZSxcclxuICAgICAgY29kZTogc2tvbFN1YmplY3QuY29kZSxcclxuICAgICAgc2Nob29sVHlwZTogc2tvbFN1YmplY3Quc2Nob29sVHlwZSxcclxuICAgICAgYWJpbGl0aWVzLFxyXG4gICAgICBjb3Vyc2VzOiBPYmplY3Qua2V5cyh0aGlzLmNvdXJzZXNFbGVtcylcclxuICAgICAgICAubWFwKGNvdXJzZUNvZGUgPT4gdGhpcy5jb3Vyc2VzRWxlbXNbY291cnNlQ29kZV0pXHJcbiAgICAgICAgLm1hcDxDb3Vyc2VUb0ltcG9ydD4oKHsgY291cnNlLCBlbGVtIH0pID0+ICh7XHJcbiAgICAgICAgICBuYW1lOiBjb3Vyc2UubmFtZSxcclxuICAgICAgICAgIHllYXI6IGNvdXJzZS55ZWFyLFxyXG4gICAgICAgICAgY29kZTogY291cnNlLmNvZGUsXHJcbiAgICAgICAgICBwb2ludHM6IGNvdXJzZS5wb2ludHMsXHJcbiAgICAgICAgICBjZW50cmFsQ29udGVudDogQXJyYXkuZnJvbSgkKGVsZW0pLmZpbmQoJy5jZW50cmFsLWNvbnRlbnQnKSkubWFwKGMgPT4gKHtcclxuICAgICAgICAgICAgaHRtbDogJChjKS5odG1sKCkudHJpbSgpIGFzIHN0cmluZyxcclxuICAgICAgICAgICAgZ3JvdXA6ICQoYykucGFyZW50KCd1bCcpLnByZXYoJ2g0JykudGV4dCgpLnRyaW0oKVxyXG4gICAgICAgICAgfSkpLmZpbHRlcigoe2h0bWx9KSA9PiAhIWh0bWwpLFxyXG4gICAgICAgICAga25vd2xlZGdlUmVxdWlyZW1lbnRzOlxyXG4gICAgICAgICAgICBBcnJheS5mcm9tKCQoZWxlbSkuZmluZCgnLmdyYWRlLXN0ZXAtbm9uZSAua25vd2xlZGdlLXJlcXVpcmVtZW50JykpLm1hcChyID0+ICQocikuaHRtbCgpLnRyaW0oKSlcclxuICAgICAgICAgICAgICAuZmlsdGVyKGh0bWwgPT4gISFodG1sKVxyXG4gICAgICAgICAgICAgIC5tYXAoaHRtbCA9PiAoe2dyYWRlU3RlcDogbnVsbCwgaHRtbCB9KSlcclxuICAgICAgICAgICAgICAuY29uY2F0KFxyXG4gICAgICAgICAgICAgICAgQXJyYXkuZnJvbSgkKGVsZW0pLmZpbmQoJy5ncmFkZS1zdGVwLUUgLmtub3dsZWRnZS1yZXF1aXJlbWVudCcpKS5tYXAociA9PiAkKHIpLmh0bWwoKS50cmltKCkpXHJcbiAgICAgICAgICAgICAgICAgIC5maWx0ZXIoaHRtbCA9PiAhIWh0bWwpXHJcbiAgICAgICAgICAgICAgICAgIC5tYXAoaHRtbCA9PiAoeyBncmFkZVN0ZXA6IFwiRVwiLCBodG1sIH0pKVxyXG4gICAgICAgICAgICAgICAgICAuY29uY2F0KFxyXG4gICAgICAgICAgICAgICAgICAgIEFycmF5LmZyb20oJChlbGVtKS5maW5kKCcuZ3JhZGUtc3RlcC1DIC5rbm93bGVkZ2UtcmVxdWlyZW1lbnQnKSkubWFwKHIgPT4gJChyKS5odG1sKCkudHJpbSgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihodG1sID0+ICEhaHRtbClcclxuICAgICAgICAgICAgICAgICAgICAgIC5tYXAoaHRtbCA9PiAoeyBncmFkZVN0ZXA6IFwiQ1wiLCBodG1sIH0pKSlcclxuICAgICAgICAgICAgICAgICAgICAgIC5jb25jYXQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEFycmF5LmZyb20oJChlbGVtKS5maW5kKCcuZ3JhZGUtc3RlcC1BIC5rbm93bGVkZ2UtcmVxdWlyZW1lbnQnKSkubWFwKHIgPT4gJChyKS5odG1sKCkudHJpbSgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoaHRtbCA9PiAhIWh0bWwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChodG1sID0+ICh7IGdyYWRlU3RlcDogXCJBXCIsIGh0bWwgfSkpKSlcclxuICAgICAgICAgICAgICAgICAgICB9KSlcclxuICAgIH07XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZGlmZldpdGhFeGlzdGluZygpOiBQcm9taXNlPHtjaGFuZ2VzOiBDaGFuZ2VbXSwgc3ViamVjdFRvSW1wb3J0OiBTdWJqZWN0VG9JbXBvcnR9PiB7XHJcbiAgICBjb25zdCBzdWJqZWN0VG9JbXBvcnQgPSB0aGlzLmNoZXJyeVBpY2tEYXRhKCk7XHJcbiAgICBsZXQgY2hhbmdlczogQ2hhbmdlW10gPSBbXTtcclxuICAgIC8vIEZpbmQgZXhpc3RpbmcgU3ViamVjdFxyXG4gICAgY29uc3QgZXhpc3RpbmdTdWJqZWN0cyA9IGF3YWl0IGVudi5rZWRCYWNrZW5kQ2xpZW50Lmxpc3Q8U3ViamVjdD4oXCJzdWJqZWN0c1wiKTtcclxuICAgIGxldCBleGlzdGluZ1N1YmplY3QgPSBleGlzdGluZ1N1YmplY3RzLmZpbHRlcihzID0+IHMuY29kZSA9PT0gdGhpcy5wcm9wcy5zdWJqZWN0LmNvZGUpWzBdO1xyXG4gICAgbGV0IGNlbnRyYWxDb250ZW50ID0gW10gYXMgQ2VudHJhbENvbnRlbnRbXSxcclxuICAgICAga25vd2xlZGdlUmVxdWlyZW1lbnRzID0gW10gYXMgS25vd2xlZGdlUmVxdWlyZW1lbnRbXTtcclxuXHJcbiAgICBsZXQgY3JlYXRlVGltZSA9IERhdGUubm93KCk7XHJcbiAgICBmdW5jdGlvbiBjdCgpIHtcclxuICAgICAgY29uc3QgcnYgPSBjcmVhdGVUaW1lO1xyXG4gICAgICBjcmVhdGVUaW1lICs9IDI7XHJcbiAgICAgIHJldHVybiBydjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZXhpc3RpbmdTdWJqZWN0KSB7XHJcbiAgICAgIC8vIEluY2x1ZGUgYWJpbGl0aWVzIGFuZCBzdGFuZGFyZENvdXJzZXMgd2l0aCB0aGUgZm91bmQgU3ViamVjdDpcclxuICAgICAgYXdhaXQgZGlmZlhtbFdpdGhEYXRhYmFzZShleGlzdGluZ1N1YmplY3QsIHN1YmplY3RUb0ltcG9ydCwgY2hhbmdlcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBTdWJqZWN0IG5vdCBpbXBvcnRlZCBiZWZvcmUuIEFkZCBpdCFcclxuICAgICAgY29uc3QgbmV3U3ViamVjdDogU3ViamVjdCA9IGV4aXN0aW5nU3ViamVjdCA9IHtcclxuICAgICAgICBpZDogY3JlYXRlVVVJRCgpLFxyXG4gICAgICAgIHNjaG9vbFR5cGU6IHN1YmplY3RUb0ltcG9ydC5zY2hvb2xUeXBlLFxyXG4gICAgICAgIHRhZ3M6IFtcInNjaG9vbFR5cGU6XCIgKyBzdWJqZWN0VG9JbXBvcnQuc2Nob29sVHlwZV0sXHJcbiAgICAgICAgYWNsOiBbXCJyb2xlOlVTRVI6UlwiXSxcclxuICAgICAgICBjb2RlOiBzdWJqZWN0VG9JbXBvcnQuY29kZSxcclxuICAgICAgICBuYW1lOiBzdWJqZWN0VG9JbXBvcnQubmFtZSxcclxuICAgICAgICBhYmlsaXRpZXNPcmRlcjogW10sIC8vIFVwZGF0ZSBsYXRlciBvbiFcclxuICAgICAgICBwdWJsaXNoYWJsZTogZmFsc2UsXHJcbiAgICAgICAgZGF0ZVRpbWU6IGN0KClcclxuICAgICAgfTtcclxuICAgICAgY2hhbmdlcy5wdXNoKHtcclxuICAgICAgICBjaGFuZ2U6IFwiTnl0dCDDpG1uZVwiLFxyXG4gICAgICAgIGNvbnRlbnQ6IGAke3N1YmplY3RUb0ltcG9ydC5uYW1lfSAoJHtzdWJqZWN0VG9JbXBvcnQuY29kZX0pYCxcclxuICAgICAgICBtdXRhdGlvbnM6IHIgPT4gci5hZGQoXCJzdWJqZWN0c1wiLCBuZXdTdWJqZWN0KVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHN1YmplY3RBYmlsaXRpZXMgPSBbXTtcclxuXHJcbiAgICAgIGZvciAobGV0IGEgb2Ygc3ViamVjdFRvSW1wb3J0LmFiaWxpdGllcykge1xyXG4gICAgICAgIGNvbnN0IG5ld0FiaWxpdHk6IEFiaWxpdHkgPSB7XHJcbiAgICAgICAgICBpZDogY3JlYXRlVVVJRCgpLFxyXG4gICAgICAgICAgbmFtZTogYSxcclxuICAgICAgICAgIGFjbDogW1wicm9sZTpVU0VSOlJcIl0sXHJcbiAgICAgICAgICBkYXRlVGltZTogY3QoKVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHN1YmplY3RBYmlsaXRpZXMucHVzaChuZXdBYmlsaXR5KTsgLy8gVG8gcmVmZXIgZnJvbSBpbiBjb3Vyc2VzIGxhdGVyIG9uIVxyXG5cclxuICAgICAgICBjaGFuZ2VzLnB1c2goe1xyXG4gICAgICAgICAgY2hhbmdlOiBcIk55IGbDtnJtw6VnYVwiLFxyXG4gICAgICAgICAgY29udGVudDogYSxcclxuICAgICAgICAgIG11dGF0aW9uczogciA9PiB7XHJcbiAgICAgICAgICAgIHIuYWRkKFwiYWJpbGl0aWVzXCIsIG5ld0FiaWxpdHkpO1xyXG4gICAgICAgICAgICByLmxpbmsoXCJzdWJqZWN0c1wiLCBuZXdTdWJqZWN0LmlkLCBcImFiaWxpdGllc1wiLCBuZXdBYmlsaXR5LmlkLCBcImFiaWxpdGllc1wiKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gVXBkYXRlIG5vdyB3aGVuIHdlIGhhdmUgYWJpbGl0aWVzIG9yZGVyOlxyXG4gICAgICBuZXdTdWJqZWN0LmFiaWxpdGllc09yZGVyID0gc3ViamVjdEFiaWxpdGllcy5tYXAoKHtpZH0pID0+IGlkKTtcclxuXHJcbiAgICAgIGZvciAobGV0IGMgb2Ygc3ViamVjdFRvSW1wb3J0LmNvdXJzZXMpIHtcclxuICAgICAgICBjb25zdCBuZXdDb3Vyc2U6IENvdXJzZSA9IHtcclxuICAgICAgICAgIGlkOiBjcmVhdGVVVUlEKCksXHJcbiAgICAgICAgICBzdWJqZWN0Q29kZTogbmV3U3ViamVjdC5jb2RlLFxyXG4gICAgICAgICAgc2Nob29sVHlwZTogbmV3U3ViamVjdC5zY2hvb2xUeXBlLFxyXG4gICAgICAgICAgdGFnczogW1xyXG4gICAgICAgICAgICBcInN1YjpcIiArIG5ld1N1YmplY3QuY29kZSxcclxuICAgICAgICAgICAgXCJjb3Vyc2U6XCIgKyBjLmNvZGUsXHJcbiAgICAgICAgICAgIFwic2Nob29sVHlwZTpcIiArIG5ld1N1YmplY3Quc2Nob29sVHlwZVxyXG4gICAgICAgICAgXSxcclxuICAgICAgICAgIGRhdGVUaW1lOiBjdCgpLFxyXG4gICAgICAgICAgaXNUZW1wbGF0ZTogdHJ1ZSxcclxuICAgICAgICAgIGFjbDogW1wicm9sZTpFTVBMT1lFRTpSXCJdLCAvLyBTdGFuZGFyZGt1cnNlciBlbmRhc3Qgc3lubGlnYSBmw7ZyIGzDpHJhcmVcclxuICAgICAgICAgIG5hbWU6IGMubmFtZSxcclxuICAgICAgICAgIGNvZGU6IGMuY29kZSxcclxuICAgICAgICAgIHBvaW50czogYy5wb2ludHMsXHJcbiAgICAgICAgICBtb2R1bGVzOiBbXSxcclxuICAgICAgICAgIHN1YmplY3RJZDogbmV3U3ViamVjdC5pZCxcclxuICAgICAgICAgIHJlc291cmNlczogW10sXHJcbiAgICAgICAgICBjcmVhdGVkQnk6IHsgbmFtZTogZW52LmN1cnJlbnRVc2VyLmRpc3BsYXlOYW1lLCB1cmw6IFwibWFpbHRvOlwiICsgZW52LmN1cnJlbnRVc2VyLm1haWwgfSxcclxuICAgICAgICAgIGNyZWF0ZWREYXRlOiBEYXRlLm5vdygpLFxyXG4gICAgICAgICAga25vd2xlZGdlUmVxdWlyZW1lbnRzT3JkZXI6IFtdLFxyXG4gICAgICAgICAgY2VudHJhbENvbnRlbnRPcmRlcjogW10sXHJcbiAgICAgICAgICBhYmlsaXRpZXNPcmRlcjogc3ViamVjdEFiaWxpdGllcy5tYXAoKHtpZH0pID0+IGlkKVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKGMueWVhcikgbmV3Q291cnNlLnNjaG9vbEdyYWRlID0gYy55ZWFyO1xyXG5cclxuICAgICAgICBjaGFuZ2VzLnB1c2goe1xyXG4gICAgICAgICAgY2hhbmdlOiBcIk55IGt1cnNcIixcclxuICAgICAgICAgIGNvbnRlbnQ6IGMubmFtZSxcclxuICAgICAgICAgIG11dGF0aW9uczogciA9PiB7XHJcbiAgICAgICAgICAgIHIuYWRkKFwiY291cnNlc1wiLCBuZXdDb3Vyc2UpO1xyXG4gICAgICAgICAgICByLmxpbmsoXCJzdWJqZWN0c1wiLCBuZXdTdWJqZWN0LmlkLCBcImNvdXJzZXNcIiwgbmV3Q291cnNlLmlkLCBcImNvdXJzZVRlbXBsYXRlc1wiKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQge2dyb3VwOiBjY0dyb3VwLCBodG1sfSBvZiBjLmNlbnRyYWxDb250ZW50KSB7XHJcbiAgICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBleGlzdHMgYW4gaWRlbnRpY2FsIGNlbnRyYWwgY29udGVudCBvbiBwcmV2aW91cyBjb3Vyc2UgZmlyc3RcclxuICAgICAgICAgIGxldCBuZXdDZW50cmFsQ29udGVudCA9IGNlbnRyYWxDb250ZW50LmZpbHRlcihjYyA9PiBjYy5uYW1lID09PSBodG1sKVswXTtcclxuICAgICAgICAgIGlmICghbmV3Q2VudHJhbENvbnRlbnQpIHtcclxuICAgICAgICAgICAgbmV3Q2VudHJhbENvbnRlbnQgPSB7XHJcbiAgICAgICAgICAgICAgaWQ6IGNyZWF0ZVVVSUQoKSxcclxuICAgICAgICAgICAgICBkYXRlVGltZTogY3QoKSxcclxuICAgICAgICAgICAgICBuYW1lOiBodG1sLFxyXG4gICAgICAgICAgICAgIGFjbDogW1wicm9sZTpVU0VSOlJcIl1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgaWYgKGNjR3JvdXApIG5ld0NlbnRyYWxDb250ZW50Lmdyb3VwID0gY2NHcm91cDtcclxuICAgICAgICAgICAgY2VudHJhbENvbnRlbnQucHVzaChuZXdDZW50cmFsQ29udGVudCk7XHJcblxyXG4gICAgICAgICAgICBjaGFuZ2VzLnB1c2goe1xyXG4gICAgICAgICAgICAgIGNoYW5nZTogXCJOeXR0IGNlbnRyYWx0IGlubmVow6VsbFwiLFxyXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IGA8aDQ+JHtjY0dyb3VwfTwvaDQ+JHtodG1sfWAsXHJcbiAgICAgICAgICAgICAgbXV0YXRpb25zOiByID0+IHtcclxuICAgICAgICAgICAgICAgIHIuYWRkKFwiY2VudHJhbC1jb250ZW50XCIsIG5ld0NlbnRyYWxDb250ZW50KTtcclxuICAgICAgICAgICAgICAgIHIubGluayhcImNvdXJzZXNcIiwgbmV3Q291cnNlLmlkLCBcImNlbnRyYWwtY29udGVudFwiLCBuZXdDZW50cmFsQ29udGVudC5pZCwgXCJjZW50cmFsQ29udGVudFwiKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIGNoYW5nZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgbXV0YXRpb25zOiByID0+IHtcclxuICAgICAgICAgICAgICAgIHIubGluayhcImNvdXJzZXNcIiwgbmV3Q291cnNlLmlkLCBcImNlbnRyYWwtY29udGVudFwiLCBuZXdDZW50cmFsQ29udGVudC5pZCwgXCJjZW50cmFsQ29udGVudFwiKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLy8gUmVnaXN0ZXIgdGhlIG9yZGVyIGluIHdoaWNoIHRoaXMgY2VudHJhbCBjb250ZW50IGFwcGVhcmVkIGluIHRoZSBYTUw6XHJcbiAgICAgICAgICBuZXdDb3Vyc2UuY2VudHJhbENvbnRlbnRPcmRlci5wdXNoKG5ld0NlbnRyYWxDb250ZW50LmlkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAobGV0IGNyIG9mIGMua25vd2xlZGdlUmVxdWlyZW1lbnRzKSB7XHJcbiAgICAgICAgICBsZXQgbmV3S25vd2xlZGdlUmVxdWlyZW1lbnQgPSBrbm93bGVkZ2VSZXF1aXJlbWVudHMuZmlsdGVyKGtyID0+IGtyLm5hbWUgPT09IGNyLmh0bWwgJiYga3IuZ3JhZGVTdGVwID09PSBjci5ncmFkZVN0ZXApWzBdO1xyXG4gICAgICAgICAgaWYgKCFuZXdLbm93bGVkZ2VSZXF1aXJlbWVudCkge1xyXG4gICAgICAgICAgICBuZXdLbm93bGVkZ2VSZXF1aXJlbWVudCA9IHtcclxuICAgICAgICAgICAgICBpZDogY3JlYXRlVVVJRCgpLFxyXG4gICAgICAgICAgICAgIGRhdGVUaW1lOiBjdCgpLFxyXG4gICAgICAgICAgICAgIG5hbWU6IGNyLmh0bWwsXHJcbiAgICAgICAgICAgICAgZ3JhZGVTdGVwOiBjci5ncmFkZVN0ZXAsXHJcbiAgICAgICAgICAgICAgYWNsOiBbXCJyb2xlOlVTRVI6UlwiXVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAga25vd2xlZGdlUmVxdWlyZW1lbnRzLnB1c2gobmV3S25vd2xlZGdlUmVxdWlyZW1lbnQpO1xyXG5cclxuICAgICAgICAgICAgY2hhbmdlcy5wdXNoKHtcclxuICAgICAgICAgICAgICBjaGFuZ2U6IFwiTnl0dCBrdW5za2Fwc2tyYXYgZsO2ciBiZXR5Z2V0IFwiICsgY3IuZ3JhZGVTdGVwLFxyXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IGNyLmh0bWwsXHJcbiAgICAgICAgICAgICAgbXV0YXRpb25zOiByID0+IHtcclxuICAgICAgICAgICAgICAgIHIuYWRkKFwia25vd2xlZGdlLXJlcXVpcmVtZW50c1wiLCBuZXdLbm93bGVkZ2VSZXF1aXJlbWVudCk7XHJcbiAgICAgICAgICAgICAgICByLmxpbmsoXCJjb3Vyc2VzXCIsIG5ld0NvdXJzZS5pZCwgXCJrbm93bGVkZ2UtcmVxdWlyZW1lbnRzXCIsIG5ld0tub3dsZWRnZVJlcXVpcmVtZW50LmlkLCBcImtub3dsZWRnZVJlcXVpcmVtZW50c1wiKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY2hhbmdlcy5wdXNoKHtcclxuICAgICAgICAgICAgICBtdXRhdGlvbnM6IHIgPT4ge1xyXG4gICAgICAgICAgICAgICAgci5saW5rKFwiY291cnNlc1wiLCBuZXdDb3Vyc2UuaWQsIFwia25vd2xlZGdlLXJlcXVpcmVtZW50c1wiLCBuZXdLbm93bGVkZ2VSZXF1aXJlbWVudC5pZCwgXCJrbm93bGVkZ2VSZXF1aXJlbWVudHNcIik7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLy8gUmVnaXN0ZXIgdGhlIG9yZGVyIGluIHdoaWNoIHRoaXMga25vd2xlZGdlIHJlcXVpcmVtZW50IGFwcGVhcmVkIGluIHRoZSBYTUw6XHJcbiAgICAgICAgICBuZXdDb3Vyc2Uua25vd2xlZGdlUmVxdWlyZW1lbnRzT3JkZXIucHVzaChuZXdLbm93bGVkZ2VSZXF1aXJlbWVudC5pZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEJ1aWxkIGtub3dsZWRnZSBtYXRyaXhcclxuXHJcbiAgICAgICAgLy8gTGluayBkaXJlY3RseSBmcm9tIGNvdXJzZSB0ZW1wbGF0ZSB0byBhbGwgYWJpbGl0aWVzIHRoYXQgdGhlIHN1YmplY3QgaGFzOlxyXG4gICAgICAgIGZvciAoY29uc3QgYSBvZiBzdWJqZWN0QWJpbGl0aWVzKSB7XHJcbiAgICAgICAgICBjaGFuZ2VzLnB1c2goe1xyXG4gICAgICAgICAgICBtdXRhdGlvbnM6IHIgPT4ge1xyXG4gICAgICAgICAgICAgIHIubGluayhcImNvdXJzZXNcIiwgbmV3Q291cnNlLmlkLCBcImFiaWxpdGllc1wiLCBhLmlkLCBcImFiaWxpdGllc1wiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB7Y2hhbmdlcywgc3ViamVjdFRvSW1wb3J0fTtcclxuICB9XHJcblxyXG4gIGNhbmNlbCgpIHtcclxuICAgIHRoaXMucHJvcHMub25DYW5jZWwoKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGltcG9ydCgpIHtcclxuICAgIHRoaXMuc2V0U3RhdGUoeyBpc1dvcmtpbmc6IHRydWUsIGlzSW1wb3J0aW5nOiB0cnVlIH0pO1xyXG4gICAgY29uc3QgYWxsTXV0YXRpb25zID0gdGhpcy5zdGF0ZS5jaGFuZ2VzLm1hcChjaGFuZ2UgPT4gY2hhbmdlLm11dGF0aW9ucyk7XHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBlbnYua2VkQmFja2VuZENsaWVudC5kbyhyID0+IHtcclxuICAgICAgICBhbGxNdXRhdGlvbnMuZm9yRWFjaChtdXQgPT4gbXV0KHIpKTtcclxuICAgICAgfSk7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHsgaXNXb3JraW5nOiBmYWxzZSwgaXNJbXBvcnRpbmc6IGZhbHNlIH0pO1xyXG4gICAgfVxyXG4gICAgdGhpcy5wcm9wcy5vbkltcG9ydFN1Y2Nlc3ModGhpcy5wcm9wcy5zdWJqZWN0Lm5hbWUpO1xyXG4gIH1cclxuXHJcbiAgZml4TChodG1sOiBzdHJpbmcpIHtcclxuICAgIHJldHVybiBodG1sOy8vLnJlcGxhY2UoJzxsIGZyb21hdD1cIk9MXCI+JylcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHtzdWJqZWN0VG9JbXBvcnR9ID0gdGhpcy5zdGF0ZTtcclxuICAgIGNvbnN0IHtzdWJqZWN0fSA9IHRoaXMucHJvcHM7XHJcbiAgICByZXR1cm4gPGRpdj48aDE+e0xgVXBwbGFkZGF0IMOEbW5lICR7c3ViamVjdFRvSW1wb3J0ID8gc3ViamVjdFRvSW1wb3J0Lm5hbWUgOiAnJ31gfTwvaDE+XHJcbiAgICAgIHt0aGlzLnN0YXRlLmVycm9yID8gPHA+RmVsOiB7dGhpcy5zdGF0ZS5lcnJvcn08L3A+IDpcclxuICAgICAgIHRoaXMuc3RhdGUuaXNXb3JraW5nID8gPHA+QXJiZXRhci4uLjwvcD4gOlxyXG4gICAgICAgdGhpcy5zdGF0ZS5pc0ltcG9ydGluZyA/IDxwPkltcG9ydGVyYXIuLi48L3A+IDpcclxuICAgICAgIHRoaXMuc3RhdGUuY2hhbmdlcy5ldmVyeShjID0+ICFjLmNoYW5nZSkgPyAvLyBJbmdhIMOkbmRyaW5nYXIgYXR0IHZpc2EgKGJhcmEgcHNldWRvLcOkbmRyaW5nYXIpXHJcbiAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgPHA+S3VuZGUgaW50ZSBmaW5uYSBuw6VncmEgZsO2csOkbmRyaW5nYXIgZnLDpW4gYmVmaW50bGlndCBkYXRhLiBLbGlja2EgT0sgZsO2ciBhdHQgYXZicnl0YSBvY2ggw6V0ZXJnw6UuPC9wPlxyXG4gICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gdGhpcy5jYW5jZWwoKX0+IE9LIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8L2Rpdj4gOlxyXG4gICAgICAgIDxkaXY+XHJcbiAgICAgICAgICA8dGFibGUgc3R5bGU9e3tib3JkZXI6IFwiMXB4IHNvbGlkIGdyYXlcIiwgcGFkZGluZzogXCIycHhcIiB9fT48dGhlYWQ+PHRyPlxyXG4gICAgICAgICAgPHRoIGNvbFNwYW49ezJ9PkdyYW5za25pbmcgYXYgw6RuZHJpbmdhciBpIGdydW5kLWRhdGE8L3RoPlxyXG4gICAgICAgIDwvdHI+PHRyPlxyXG4gICAgICAgICAgICA8dGg+w4RuZHJpbmc8L3RoPlxyXG4gICAgICAgICAgICA8dGg+SW5uZWjDpWxsPC90aD5cclxuICAgICAgICAgIDwvdHI+PC90aGVhZD48dGJvZHk+XHJcbiAgICAgICAgICAgIHt0aGlzLnN0YXRlLmNoYW5nZXMuZmlsdGVyKGNoYW5nZSA9PiBjaGFuZ2UuY2hhbmdlKS5tYXAoKGNoYW5nZSxpKSA9PiA8dHIga2V5PXtpfT5cclxuICAgICAgICAgICAgICA8dGQgc3R5bGU9e3twYWRkaW5nOiBcIjJweFwifX0+e2NoYW5nZS5jaGFuZ2V9PC90ZD5cclxuICAgICAgICAgICAgICA8dGQgc3R5bGU9e3twYWRkaW5nOiBcIjJweFwifX0gZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3sgX19odG1sOiBjaGFuZ2UuY29udGVudCB9fSAvPlxyXG4gICAgICAgICAgICA8L3RyPil9XHJcbiAgICAgICAgICA8L3Rib2R5PjwvdGFibGU+XHJcbiAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiB0aGlzLmNhbmNlbCgpfSBkaXNhYmxlZD17dGhpcy5zdGF0ZS5pc0ltcG9ydGluZ30+QXZicnl0PC9idXR0b24+XHJcbiAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiB0aGlzLmltcG9ydCgpfSBkaXNhYmxlZD17dGhpcy5zdGF0ZS5pc0ltcG9ydGluZ30+SW1wb3J0ZXJhPC9idXR0b24+XHJcbiAgICAgICAgPGJyIC8+XHJcbiAgICAgICAgPC9kaXY+fSBcclxuICAgICAgPGJ1dHRvblxyXG4gICAgICAgIG9uQ2xpY2s9eygpID0+IHRoaXMuc2V0U3RhdGUoeyBzaG93RnVsbFRleHQ6ICF0aGlzLnN0YXRlLnNob3dGdWxsVGV4dCB9KX0+XHJcbiAgICAgICAge3RoaXMuc3RhdGUuc2hvd0Z1bGxUZXh0ID9cclxuICAgICAgICAgIExgRMO2bGogbmVkYW5gIDpcclxuICAgICAgICAgIExgVmlzYSBoZWxhIHRleHRlbiBmcsOlbiBTa29sdmVya2V0YH1cclxuICAgICAgPC9idXR0b24+XHJcblxyXG4gICAgICB7LyogVGhlIHRhYmxlIGJlbG93IGlzIE5PVCBqdXN0IGZvciBzaG93IVxyXG4gICAgICAgICAgRnVuY3Rpb25hbGl0eSBpcyBkZXBlbmRlbnQgb24gaXRzIGV4aXN0ZW5jZSBmb3IgaW1wb3J0aW5nIHN0dWZmIHVzaW5nIGpRdWVyeSB0byBjaGVycnktcGljayBkYXRhLiAqL30gICAgICAgICAgXHJcbiAgICAgIDx0YWJsZSBzdHlsZT17eyBkaXNwbGF5OiB0aGlzLnN0YXRlLnNob3dGdWxsVGV4dCA/ICcnIDogJ25vbmUnIH19Pjx0Ym9keT48dHI+XHJcbiAgICAgICAgPHRoPlxyXG4gICAgICAgICAgTmFtblxyXG4gICAgICAgIDwvdGg+XHJcbiAgICAgICAgPHRkPlxyXG4gICAgICAgICAge3N1YmplY3QubmFtZX1cclxuICAgICAgICA8L3RkPlxyXG4gICAgICA8L3RyPjx0cj5cclxuICAgICAgICAgIDx0aD5cclxuICAgICAgICAgICAgw4RtbmVza29kXHJcbiAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICB7c3ViamVjdC5jb2RlfVxyXG4gICAgICAgICAgPC90ZD5cclxuICAgICAgICA8L3RyPjx0cj5cclxuICAgICAgICAgIDx0aD5cclxuICAgICAgICAgICAgU3lmdGVcclxuICAgICAgICAgIDwvdGg+XHJcbiAgICAgICAgICA8dGQgcmVmPXtlbGVtID0+IHRoaXMucHVycG9zZUVsZW0gPSBlbGVtfSBkYW5nZXJvdXNseVNldElubmVySFRNTD17eyBfX2h0bWw6IHRoaXMuZml4TChzdWJqZWN0LnB1cnBvc2UpIH19IC8+XHJcbiAgICAgICAgPC90cj48dHI+XHJcbiAgICAgICAgICA8dGg+XHJcbiAgICAgICAgICAgIEt1cnNlclxyXG4gICAgICAgICAgPC90aD5cclxuICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAge3N1YmplY3QuY291cnNlcy5tYXAoY291cnNlID0+IDx0YWJsZSBrZXk9e2NvdXJzZS5jb2RlfSByZWY9e2VsZW0gPT4gdGhpcy5jb3Vyc2VzRWxlbXNbY291cnNlLmNvZGVdID0geyBjb3Vyc2UsIGVsZW0gfX0+PHRib2R5PlxyXG4gICAgICAgICAgICAgIDx0cj48dGg+S3Vyc2VucyBuYW1uPC90aD48dGQ+e2NvdXJzZS5uYW1lfTwvdGQ+PC90cj5cclxuICAgICAgICAgICAgICA8dHI+PHRoPkt1cnNrb2Q8L3RoPjx0ZD57Y291cnNlLmNvZGV9PC90ZD48L3RyPlxyXG4gICAgICAgICAgICAgIDx0cj48dGg+UG/DpG5nPC90aD48dGQ+e2NvdXJzZS5wb2ludHN9PC90ZD48L3RyPlxyXG4gICAgICAgICAgICAgIDx0cj48dGg+Q2VudHJhbHQgaW5uZWjDpWxsPC90aD48dGQgcmVmPXtlbGVtID0+IHRoaXMuY2VudHJhbENvbnRlbnRFbGVtcy5wdXNoKGVsZW0pfSBkYW5nZXJvdXNseVNldElubmVySFRNTD17eyBfX2h0bWw6IHRoaXMuZml4TChjb3Vyc2UuY2VudHJhbENvbnRlbnQpIH19IC8+PC90cj5cclxuICAgICAgICAgICAgICB7Y291cnNlLmtub3dubGVkZ2VSZXF1aXJlbWVudHMuc29tZShrciA9PiAha3IuZ3JhZGVTdGVwKSA/IDx0cj5cclxuICAgICAgICAgICAgICAgIDx0aD5LdW5za2Fwc2tyYXYgdXRhbiBiZXR5Z3PDpHR0bmluZzwvdGg+XHJcbiAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwiZ3JhZGUtc3RlcC1ub25lXCIgcmVmPXtlbGVtID0+IHRoaXMua25vd2xlZGdlUmVxdWlyZW1lbnRFbGVtcy5wdXNoKGVsZW0pfSBkYW5nZXJvdXNseVNldElubmVySFRNTD17eyBfX2h0bWw6IHRoaXMuZml4TChjb3Vyc2Uua25vd25sZWRnZVJlcXVpcmVtZW50cy5maWx0ZXIociA9PiAhci5ncmFkZVN0ZXApLm1hcChrciA9PiBrci50ZXh0KS5qb2luKCcnKSkgfX0gLz5cclxuICAgICAgICAgICAgICA8L3RyPiA6IHVuZGVmaW5lZH1cclxuXHJcbiAgICAgICAgICAgICAge2NvdXJzZS5rbm93bmxlZGdlUmVxdWlyZW1lbnRzLnNvbWUoa3IgPT4ga3IuZ3JhZGVTdGVwID09PSdFJykgPyA8dHI+XHJcbiAgICAgICAgICAgICAgICA8dGg+S3Vuc2thcHNrcmF2IEJldHlnIEU8L3RoPlxyXG4gICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cImdyYWRlLXN0ZXAtRVwiIHJlZj17ZWxlbSA9PiB0aGlzLmtub3dsZWRnZVJlcXVpcmVtZW50RWxlbXMucHVzaChlbGVtKX0gZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3sgX19odG1sOiB0aGlzLmZpeEwoY291cnNlLmtub3dubGVkZ2VSZXF1aXJlbWVudHMuZmlsdGVyKHIgPT4gci5ncmFkZVN0ZXAgPT09ICdFJykubWFwKGtyID0+IGtyLnRleHQpLmpvaW4oJycpKSB9fSAvPlxyXG4gICAgICAgICAgICAgIDwvdHI+IDogdW5kZWZpbmVkfVxyXG5cclxuICAgICAgICAgICAgICB7Y291cnNlLmtub3dubGVkZ2VSZXF1aXJlbWVudHMuc29tZShrciA9PiBrci5ncmFkZVN0ZXAgPT09J0MnKSA/IDx0cj5cclxuICAgICAgICAgICAgICAgIDx0aD5LdW5za2Fwc2tyYXYgQmV0eWcgQzwvdGg+XHJcbiAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwiZ3JhZGUtc3RlcC1DXCIgcmVmPXtlbGVtID0+IHRoaXMua25vd2xlZGdlUmVxdWlyZW1lbnRFbGVtcy5wdXNoKGVsZW0pfSBkYW5nZXJvdXNseVNldElubmVySFRNTD17eyBfX2h0bWw6IHRoaXMuZml4TChjb3Vyc2Uua25vd25sZWRnZVJlcXVpcmVtZW50cy5maWx0ZXIociA9PiByLmdyYWRlU3RlcCA9PT0gJ0MnKS5tYXAoa3IgPT4ga3IudGV4dCkuam9pbignJykpIH19IC8+XHJcbiAgICAgICAgICAgICAgPC90cj4gOiB1bmRlZmluZWR9XHJcblxyXG4gICAgICAgICAgICAgIHtjb3Vyc2Uua25vd25sZWRnZVJlcXVpcmVtZW50cy5zb21lKGtyID0+IGtyLmdyYWRlU3RlcCA9PT0nQScpID8gPHRyPlxyXG4gICAgICAgICAgICAgICAgPHRoPkt1bnNrYXBza3JhdiBCZXR5ZyBBPC90aD5cclxuICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJncmFkZS1zdGVwLUFcIiByZWY9e2VsZW0gPT4gdGhpcy5rbm93bGVkZ2VSZXF1aXJlbWVudEVsZW1zLnB1c2goZWxlbSl9IGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXt7IF9faHRtbDogdGhpcy5maXhMKGNvdXJzZS5rbm93bmxlZGdlUmVxdWlyZW1lbnRzLmZpbHRlcihyID0+IHIuZ3JhZGVTdGVwID09PSAnQScpLm1hcChrciA9PiBrci50ZXh0KS5qb2luKCcnKSkgfX0gLz5cclxuICAgICAgICAgICAgICA8L3RyPiA6IHVuZGVmaW5lZH1cclxuXHJcbiAgICAgICAgICAgIDwvdGJvZHk+PC90YWJsZT4pfVxyXG4gICAgICAgICAgPC90ZD5cclxuICAgICAgICA8L3RyPlxyXG4gICAgICA8L3Rib2R5PjwvdGFibGU+XHJcbiAgICA8L2Rpdj5cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBEb2N1bWVudCwgUmVzb3VyY2UsIE1vZGlmaWNhdGlvblRyYWNrZWQsIENvdXJzZSwgVGFzaywgU29mdERvY3VtZW50QWNjZXNzIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBCYXRjaFJ1bm5lciwgY3JlYXRlVVVJRCB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcclxuaW1wb3J0IHVwZGF0ZSBmcm9tICdyZWFjdC1hZGRvbnMtdXBkYXRlJztcclxuaW1wb3J0IHsgVXNlciB9IGZyb20gJy4uLy4uL2NvbnRyYWN0cy9rZWQtbW9kZWxzJztcclxuaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcclxuaW1wb3J0IGVudiBmcm9tICcuLi8uLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5pbXBvcnQgeyBnZXRGaXJzdEFuZExhc3RXZWVrT2ZUZXJtIH0gZnJvbSAnLi4vLi4vdXRpbHMvc2Nob29sLW1vbWVudCc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlRG9jdW1lbnRHcmFwaHMob2xkRG9jLCBuZXdEb2MsIHRhYmxlOiBzdHJpbmcsIGdyYXBoczogeyBbbGFiZWw6IHN0cmluZ106IHN0cmluZyB9LCBiYXRjaDogQmF0Y2hSdW5uZXIpIHtcclxuICBjb25zdCBkb2NVcGRhdGVzID0ge307XHJcbiAgY29uc3QgZG9jSWQgPSBuZXdEb2MuaWQ7XHJcbiAgZm9yIChsZXQgbmF2UHJvcCBvZiBPYmplY3Qua2V5cyhncmFwaHMpKSB7XHJcbiAgICBjb25zdCBmb3JlaWduVGFibGUgPSBncmFwaHNbbmF2UHJvcF07XHJcbiAgICBjb25zdCBvbGRMaXN0OiBEb2N1bWVudFtdID0gb2xkRG9jW25hdlByb3BdIHx8IFtdO1xyXG4gICAgY29uc3QgbmV3TGlzdDogRG9jdW1lbnRbXSA9IG5ld0RvY1tuYXZQcm9wXTtcclxuICAgIGlmICghbmV3TGlzdCkgY29udGludWU7XHJcbiAgICBjb25zdCB0dXBsZXMgPSBuZXdMaXN0XHJcbiAgICAgIC5tYXAoKGRvYywgaWR4KT0+KHtkb2MsIGlkeH0pKTsgLy8gQ3JlYXRlIHR1YmxlcyBvZiB7ZG9jLCBhcnJheS1pbmRleH0gc28gd2UgY2FuIHVwZGF0ZSByZXN1bHRcclxuICAgIGNvbnN0IGFkZGVkID0gdHVwbGVzLmZpbHRlcih0dXBsZSA9PiAhb2xkTGlzdC5zb21lKG8gPT4gby5pZCA9PT0gdHVwbGUuZG9jLmlkKSk7IC8vIEZpbmQgYWRkZWQgaXRlbXNcclxuXHJcbiAgICBmb3IgKGxldCBhIG9mIGFkZGVkKSB7XHJcbiAgICAgIGNvbnN0IG11dGF0ZWRTdWJEb2MgPSB7Li4uYS5kb2N9O1xyXG4gICAgICBjb25zdCBtZXRhID0gbXV0YXRlZFN1YkRvYy4kbWV0YTtcclxuICAgICAgZGVsZXRlIG11dGF0ZWRTdWJEb2MuJG1ldGE7IC8vIERlbGV0ZSAkbWV0YSBzbyB0aGF0IFwiYWRkXCIgb3IgXCJ1cGRhdGVcIiBkb2VzIG5vdCBwZXJzaXN0ZSB0byBuZXh0IHN0YXRlLlxyXG4gICAgICBpZiAobWV0YSA9PT0gJ2FkZCcpIHtcclxuICAgICAgICBpZiAoIW11dGF0ZWRTdWJEb2MuaWQpIG11dGF0ZWRTdWJEb2MuaWQgPSBjcmVhdGVVVUlEKCk7IC8vIEdlbmVyYXRlIElEIGlmIG5vdCBkb25lIHlldC5cclxuICAgICAgICAvLyBOb3cgcHV0IGFuICdhZGQnIG11dGF0aW9uIGluIHRoZSBiYXRjaCBxdWV1ZS5cclxuICAgICAgICBiYXRjaC5hZGQoZm9yZWlnblRhYmxlLCBtdXRhdGVkU3ViRG9jKTtcclxuICAgICAgfSBlbHNlIGlmIChtZXRhID09PSAndXBkYXRlJykge1xyXG4gICAgICAgIGJhdGNoLnB1dChmb3JlaWduVGFibGUsIG11dGF0ZWRTdWJEb2MpO1xyXG4gICAgICB9XHJcbiAgICAgIGJhdGNoLmxpbmsodGFibGUsIGRvY0lkLCBmb3JlaWduVGFibGUsIG11dGF0ZWRTdWJEb2MuaWQsIG5hdlByb3ApO1xyXG5cclxuICAgICAgLy8gVXBkYXRlIHJlc3VsdCBzbyB0aGF0IHN0YXRlIGlzIHJlZmxlY3RlZCBhZnRlciBzdWNjZXNmdWwgUE9TVCB0byBzZXJ2ZXIuXHJcbiAgICAgIGlmICghZG9jVXBkYXRlc1tuYXZQcm9wXSkgZG9jVXBkYXRlc1tuYXZQcm9wXSA9IHt9O1xyXG4gICAgICBkb2NVcGRhdGVzW25hdlByb3BdW2EuaWR4XSA9IHskc2V0OiBtdXRhdGVkU3ViRG9jfTtcclxuICAgIH1cclxuICAgIGNvbnN0IHJlbW92ZWQgPSBvbGRMaXN0LmZpbHRlcihvID0+ICFuZXdMaXN0LnNvbWUobiA9PiBuLmlkID09PSBvLmlkKSk7XHJcbiAgICBmb3IgKGxldCByIG9mIHJlbW92ZWQpIHtcclxuICAgICAgYmF0Y2gudW5saW5rKHRhYmxlLCBkb2NJZCwgZm9yZWlnblRhYmxlLCByLmlkLCBuYXZQcm9wKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHVwZGF0ZWQgPSB0dXBsZXMuZmlsdGVyKHR1cGxlID0+IG9sZExpc3Quc29tZShvID0+IG8uaWQgPT09IHR1cGxlLmRvYy5pZCAmJiB0dXBsZS5kb2MuJG1ldGEgPT09ICd1cGRhdGUnKSk7XHJcbiAgICBmb3IgKGxldCB1IG9mIHVwZGF0ZWQpIHtcclxuICAgICAgY29uc3QgbXV0YXRlZFN1YkRvYyA9IHsuLi51LmRvY307XHJcbiAgICAgIGRlbGV0ZSBtdXRhdGVkU3ViRG9jLiRtZXRhO1xyXG4gICAgICBiYXRjaC5wdXQoZm9yZWlnblRhYmxlLCBtdXRhdGVkU3ViRG9jKTtcclxuXHJcbiAgICAgIC8vIFVwZGF0ZSByZXN1bHQgc28gdGhhdCAkbWV0YSBpcyByZW1vdmVkIGZyb20gbmF2aWdhdGlvbiBwcm9wIGFmdGVyIHN1Y2Nlc3NmdWwgUE9TVCB0byBzZXJ2ZXIuXHJcbiAgICAgIGlmICghZG9jVXBkYXRlc1tuYXZQcm9wXSkgZG9jVXBkYXRlc1tuYXZQcm9wXSA9IHt9O1xyXG4gICAgICBkb2NVcGRhdGVzW25hdlByb3BdW3UuaWR4XSA9IHskc2V0OiBtdXRhdGVkU3ViRG9jfTtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIHVwZGF0ZShuZXdEb2MsIGRvY1VwZGF0ZXMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZHRGb3JtYXQoZGF0ZVRpbWU6IG51bWJlciB8IERhdGUgfCBtb21lbnQuTW9tZW50KSB7XHJcbiAgcmV0dXJuIG1vbWVudChkYXRlVGltZSkuZm9ybWF0KCdZWU1NREQgSEg6bW0nKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNob3J0RGF0ZUZvcm1hdChkYXRlVGltZTogbnVtYmVyIHwgRGF0ZSB8IG1vbWVudC5Nb21lbnQpIHtcclxuICByZXR1cm4gbW9tZW50KGRhdGVUaW1lKS5mb3JtYXQoJ1lZTU1ERCcpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2hvcnRQZXJzb25OYW1lRm9ybWF0KG5hbWU6IHN0cmluZykge1xyXG4gIGlmICghbmFtZSkgcmV0dXJuIFwiXCI7XHJcbiAgY29uc3QgbmFtZXMgPSBuYW1lLnNwbGl0KCcgJykuZmlsdGVyKG4gPT4gISFuKTtcclxuICBjb25zdCBsYXN0TmFtZSA9IG5hbWVzLnBvcCgpO1xyXG4gIHJldHVybiBuYW1lcy5tYXAobmFtZSA9PiBgJHtuYW1lWzBdfS5gKS5jb25jYXQobGFzdE5hbWUpLmpvaW4oJyAnKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZU1vZGlmaWNhdGlvblN0YW1wIChub3c6IG51bWJlciwgb2JqOiBNb2RpZmljYXRpb25UcmFja2VkLCB1c2VyOiBVc2VyKSB7XHJcbiAgcmV0dXJuIHVwZGF0ZShvYmosIHtcclxuICAgIGRhdGVUaW1lOiB7JHNldDogbm93fSwgLy8gRm9yIHF1ZXJpZXMuLi5cclxuICAgIG1vZGlmaWVkRGF0ZTogeyRzZXQ6IG5vd30sXHJcbiAgICBtb2RpZmllZEJ5OiB7XHJcbiAgICAgICRzZXQ6IHtcclxuICAgICAgICBuYW1lOiB1c2VyLmRpc3BsYXlOYW1lLFxyXG4gICAgICAgIHVybDogXCJtYWlsdG86XCIgKyB1c2VyLm1haWxcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlQ3JlYXRpb25TdGFtcDxUIGV4dGVuZHMgTW9kaWZpY2F0aW9uVHJhY2tlZD4gKG5vdzogbnVtYmVyLCBvYmo6IFQsIHVzZXI6IFVzZXIpOiBUIHtcclxuICByZXR1cm4gdXBkYXRlKG9iaiwge1xyXG4gICAgY3JlYXRlZERhdGU6IHskc2V0OiBub3d9LFxyXG4gICAgY3JlYXRlZEJ5OiB7XHJcbiAgICAgICRzZXQ6IHtcclxuICAgICAgICBuYW1lOiB1c2VyLmRpc3BsYXlOYW1lLFxyXG4gICAgICAgIHVybDogXCJtYWlsdG86XCIgKyB1c2VyLm1haWxcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RW1haWxGcm9tRG9jQWNjZXNzIChyZXNvdXJjZTogU29mdERvY3VtZW50QWNjZXNzKSB7XHJcbiAgaWYgKHJlc291cmNlLmVtYWlsKSByZXR1cm4gcmVzb3VyY2UuZW1haWw7XHJcbiAgcmV0dXJuIHJlc291cmNlLnVybCA/XHJcbiAgICByZXNvdXJjZS51cmwuc3RhcnRzV2l0aCgnbWFpbHRvOicpID9cclxuICAgICAgcmVzb3VyY2UudXJsLnN1YnN0cmluZygnbWFpbHRvOicubGVuZ3RoKSA6XHJcbiAgICAgIHJlc291cmNlLnVybCA6XHJcbiAgICByZXNvdXJjZS51cmw7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVNb2RpZmljYXRpb25BbmRDcmVhdGlvblN0YW1wcyhvYmo6IE1vZGlmaWNhdGlvblRyYWNrZWQsIHVzZXI6IFVzZXIpIHtcclxuICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xyXG4gIG9iaiA9IHVwZGF0ZU1vZGlmaWNhdGlvblN0YW1wKG5vdywgb2JqLCB1c2VyKTtcclxuICBpZiAoIW9iai5jcmVhdGVkQnkpIG9iaiA9IHVwZGF0ZUNyZWF0aW9uU3RhbXAobm93LCBvYmosIHVzZXIpO1xyXG4gIHJldHVybiBvYmo7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhcHBseUV0YWdzKGRvYzogRG9jdW1lbnQsIG5ld0V0YWdzOiB7W2lkOiBzdHJpbmddOiBzdHJpbmd9LCBncmFwaHM6IHN0cmluZ1tdKSB7XHJcbiAgY29uc3QgcmVzID0gey4uLmRvY307XHJcbiAgY29uc3QgZXRhZyA9IG5ld0V0YWdzW2RvYy5pZF07XHJcbiAgaWYgKGV0YWcpXHJcbiAgICByZXMuJGV0YWcgPSBldGFnO1xyXG4gIGZvciAobGV0IGxhYmVsIG9mIGdyYXBocykge1xyXG4gICAgY29uc3QgbmV3TGlzdCA9IGRvY1tsYWJlbF0ubWFwKGQgPT4gYXBwbHlFdGFncyhkLCBuZXdFdGFncywgW10pKTtcclxuICAgIHJlc1tsYWJlbF0gPSBuZXdMaXN0O1xyXG4gIH1cclxuICByZXR1cm4gcmVzO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVhZEJsb2IoYmxvYjogQmxvYiwgbTogKHI6RmlsZVJlYWRlcik9PnZvaWQpIHtcclxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuICAgIHJlYWRlci5vbmxvYWQgPSBldiA9PiByZXNvbHZlKChldi50YXJnZXQgYXMgYW55KS5yZXN1bHQpO1xyXG4gICAgcmVhZGVyLm9uYWJvcnQgPSBldiA9PiByZWplY3QobmV3IEVycm9yKFwiZmlsZSByZWFkIGFib3J0ZWRcIikpO1xyXG4gICAgcmVhZGVyLm9uZXJyb3IgPSBldiA9PiByZWplY3QoKGV2LnRhcmdldCBhcyBhbnkpLmVycm9yKTtcclxuICAgIG0ocmVhZGVyKTtcclxuICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlYWRCbG9iQXNUZXh0IChibG9iOiBCbG9iKSB7XHJcbiAgcmV0dXJuIHJlYWRCbG9iKGJsb2IsIHI9PnIucmVhZEFzVGV4dChibG9iKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZWFkQmxvYkFzRGF0YVVybCAoYmxvYjogQmxvYikge1xyXG4gIHJldHVybiByZWFkQmxvYihibG9iLCByPT5yLnJlYWRBc0RhdGFVUkwoYmxvYikpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYWxsb3dDb3B5KGU6IFJlYWN0LkRyYWdFdmVudDxIVE1MRGl2RWxlbWVudD4pIHtcclxuICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuICBlLmRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0ID0gJ2NvcHknO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlQ291cnNlQnVpbGRlclN0YXR1cyhzdGF0dXM6ICd1bnNhdmVkJyB8ICdzYXZlZCcgfCAnZXJyb3InIHwgJycpIHtcclxuICBjb25zdCBkaXYgPSAkKCdkaXYuY291cnNlLWJ1aWxkZXInKVswXTtcclxuICBpZiAoZGl2KSBkaXYuY2xhc3NOYW1lID0gXCJjb3Vyc2UtYnVpbGRlclwiICsgKHN0YXR1cyA/IFwiIHN0YXR1cyBcIiArIHN0YXR1cyA6IFwiXCIpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9hZENvdXJzZShpZDogc3RyaW5nLCBvcHRpb25zPzoge1xyXG4gICAgaW5jbHVkZVRlbXBsYXRlQ2hhaW4/OiBib29sZWFuLFxyXG4gICAgaW5jbHVkZT86IHN0cmluZ1tdXHJcbiAgfSk6IFByb21pc2U8Q291cnNlPlxyXG57XHJcbiAgY29uc3QgY2xpZW50ID0gZW52LmtlZEJhY2tlbmRDbGllbnQ7XHJcbiAgY29uc3QgaW5jbHVkZVRlbXBsYXRlQ2hhaW4gPSBvcHRpb25zICYmIG9wdGlvbnMuaW5jbHVkZVRlbXBsYXRlQ2hhaW47XHJcbiAgY29uc3QgaW5jbHVkZVRhc2tzID0gIW9wdGlvbnMgfHwgIW9wdGlvbnMuaW5jbHVkZSB8fCBvcHRpb25zLmluY2x1ZGUuaW5kZXhPZihcInRhc2tzXCIpICE9PSAtMTtcclxuICBjb25zdCBbY291cnNlLCBjb3Vyc2VUYXNrcywgdGVtcGxhdGVDaGFpbl0gPSAoYXdhaXQgUHJvbWlzZS5hbGwoW1xyXG4gICAgY2xpZW50LmdldChcImNvdXJzZXNcIiwgaWQsIHtcclxuICAgICAgaW5jbHVkZTogb3B0aW9ucyAmJiBvcHRpb25zLmluY2x1ZGUgPyBvcHRpb25zLmluY2x1ZGUuZmlsdGVyKGkgPT4gaSAhPT0gXCJ0YXNrc1wiKSA6IFtcclxuICAgICAgICBcImNlbnRyYWxDb250ZW50XCIsXHJcbiAgICAgICAgXCJrbm93bGVkZ2VSZXF1aXJlbWVudHNcIixcclxuICAgICAgICBcImFiaWxpdGllc1wiLFxyXG4gICAgICAgIFwiaW1hZ2VzXCIsXHJcbiAgICAgICAgXCJhY2xcIiAvLyBEb24ndCBpbmNsdWRlIHRhc2tzIGhlcmUuLi5cclxuICAgICAgXVxyXG4gICAgfSksXHJcbiAgICAvLyAuLi4gYnV0IGluY2x1ZGUgdGFza3MgaGVyZSBpbnN0ZWFkIHNvIHRoYXQgd2UgY2FuIGxvYWQgdGhlIGdyYXBocyBmb3IgdGhlXHJcbiAgICAvLyB0YXNrcyBhcyB3ZWxsIVxyXG4gICAgaW5jbHVkZVRhc2tzICYmIGNsaWVudC5saXN0KFwidGFza3NcIiwge1xyXG4gICAgICBoYXNFZGdlc0Zyb206IGlkLFxyXG4gICAgICBpbmNsdWRlOiBbJ2tub3dsZWRnZVJlcXVpcmVtZW50cycsICdjZW50cmFsQ29udGVudCcsICdhYmlsaXRpZXMnLCAnYWNsJ10sXHJcbiAgICAgIGZsYWdzOiBbJ2luY2x1ZGVJZHNPbmx5J10gLy8gRG9uJ3QgbmVlZCByZWR1bmRhbnQgaW5mbyB0aGF0J3MgYWxyZWFkeSBvbiBjb3Vyc2VcclxuICAgIH0pLFxyXG4gICAgaW5jbHVkZVRlbXBsYXRlQ2hhaW4gJiYgY2xpZW50Lmxpc3QoXCJjb3Vyc2VzXCIsIHtcclxuICAgICAgaGFzRWRnZXNGcm9tOiBpZCxcclxuICAgICAgZmxhZ3M6IFsnaWRzT25seSddXHJcbiAgICB9KVxyXG4gIF0pKSBhcyBbQ291cnNlLCBUYXNrW10sIENvdXJzZVtdXTtcclxuICBjb3Vyc2UudGFza3MgPSBjb3Vyc2VUYXNrcztcclxuXHJcbiAgLy8gQ29ycmVjdCB0aGUgb3JkZXIgb2YgQWJpbGl0aWVzXHJcbiAgaWYgKGNvdXJzZS5hYmlsaXRpZXMgJiYgY291cnNlLmFiaWxpdGllc09yZGVyKSB7XHJcbiAgICBjb3Vyc2UuYWJpbGl0aWVzID0gY291cnNlLmFiaWxpdGllc09yZGVyLm1hcChpZCA9PlxyXG4gICAgICBjb3Vyc2UuYWJpbGl0aWVzLmZpbmQoYSA9PiBhLmlkID09PSBpZCkpO1xyXG4gIH1cclxuXHJcbiAgLy8gQ29ycmVjdCB0aGUgb3JkZXIgb2YgS25vd2xlZGdlUmVxdWlyZW1lbnRzXHJcbiAgaWYgKGNvdXJzZS5rbm93bGVkZ2VSZXF1aXJlbWVudHMgJiYgY291cnNlLmtub3dsZWRnZVJlcXVpcmVtZW50c09yZGVyKSB7XHJcbiAgICBjb3Vyc2Uua25vd2xlZGdlUmVxdWlyZW1lbnRzID0gY291cnNlLmtub3dsZWRnZVJlcXVpcmVtZW50c09yZGVyLm1hcChpZCA9PlxyXG4gICAgICBjb3Vyc2Uua25vd2xlZGdlUmVxdWlyZW1lbnRzLmZpbmQoYyA9PiBjLmlkID09PSBpZCkpO1xyXG4gIH1cclxuXHJcbiAgLy8gQ29ycmVjdCB0aGUgb3JkZXIgb2YgQ2VudHJhbENvbnRlbnRcclxuICBpZiAoY291cnNlLmNlbnRyYWxDb250ZW50ICYmIGNvdXJzZS5jZW50cmFsQ29udGVudE9yZGVyKSB7XHJcbiAgICBjb3Vyc2UuY2VudHJhbENvbnRlbnQgPSBjb3Vyc2UuY2VudHJhbENvbnRlbnRPcmRlci5tYXAoaWQgPT5cclxuICAgICAgY291cnNlLmNlbnRyYWxDb250ZW50LmZpbmQoY2MgPT4gY2MuaWQgPT09IGlkKSk7Ly8uZmlsdGVyKHggPT4gISF4KTsvLyBEZWJ1Z2dpbmcgc29tdGhpbicgLiBOb3JtYWxseSB0aGUgbGFzdCAuZmlsdGVyKCkuLi4gcGFydCBzaG91bGQgbm90IGJlIG5lc2Nlc3NhcnkuLi5cclxuICB9XHJcbiAgXHJcbiAgLy8gSW5jbHVkZSB0ZW1wbGF0ZSBjaGFpbiBpZiByZXF1ZXN0ZWQuXHJcbiAgaWYgKGluY2x1ZGVUZW1wbGF0ZUNoYWluKSBjb3Vyc2UudGVtcGxhdGVDaGFpbiA9IHRlbXBsYXRlQ2hhaW47XHJcbiAgcmV0dXJuIGNvdXJzZTtcclxufVxyXG5cclxuLy8gQ2hlY2sgZGlmZmVyZW5jZXMgYmV0d2VlbiB0d28gYXJyYXkgb2YgdHlwZSBUXHJcbmV4cG9ydCBmdW5jdGlvbiBoYXNDaGFuZ2VzKG9yaWdpbmFsVmFsdWVzOiBBcnJheTxhbnk+LCBjdXJyZW50VmFsdWVzOiBBcnJheTxhbnk+KTogYm9vbGVhbntcclxuICByZXR1cm4gb3JpZ2luYWxWYWx1ZXMgPT09IHVuZGVmaW5lZCB8fCBjdXJyZW50VmFsdWVzLmZpbHRlcigoeCkgPT4gIW9yaWdpbmFsVmFsdWVzLmluY2x1ZGVzKHgpKS5sZW5ndGggPiAwIHx8IG9yaWdpbmFsVmFsdWVzLmZpbHRlcigoeCkgPT4gIWN1cnJlbnRWYWx1ZXMuaW5jbHVkZXMoeCkpLmxlbmd0aCA+IDA7XHJcbn1cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5leHBvcnQgY29uc3QgTGFuZ3VhZ2VDb250ZXh0ID0gUmVhY3QuY3JlYXRlQ29udGV4dCh7aW50bDogbnVsbH0pOyIsImltcG9ydCB7SW50bFByb3ZpZGVyLCBhZGRMb2NhbGVEYXRhfSBmcm9tICdyZWFjdC1pbnRsJztcclxuaW1wb3J0IGxvY2FsZV9lbiBmcm9tICdyZWFjdC1pbnRsL2xvY2FsZS1kYXRhL2VuJztcclxuaW1wb3J0IGxvY2FsZV9zdiBmcm9tICdyZWFjdC1pbnRsL2xvY2FsZS1kYXRhL3N2JztcclxuaW1wb3J0IG1lc3NhZ2VzX3N2IGZyb20gXCIuLi8uLi90cmFuc2xhdGlvbnMvc3YuanNvblwiO1xyXG5pbXBvcnQgbWVzc2FnZXNfZW4gZnJvbSBcIi4uLy4uL3RyYW5zbGF0aW9ucy9lbi5qc29uXCI7XHJcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IGNmZyBmcm9tICcuLi8uLi9nbG9iYWxzL0tFRC5jZmcnO1xyXG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcblxyXG5leHBvcnQgY29uc3Qgc2V0dXBJbnRsID0gPFAgZXh0ZW5kcyBvYmplY3Q+KENvbXBvbmVudDogUmVhY3QuQ29tcG9uZW50VHlwZTxQPikgPT5cclxuICAgIGNsYXNzIF9TZXR1cExhbmd1YWdlSW50bCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQPntcclxuICAgICAgICBtZXNzYWdlcyA6IG9iamVjdDtcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3IocHJvcHMpe1xyXG4gICAgICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICAgICAgICAgIGFkZExvY2FsZURhdGEoWy4uLmxvY2FsZV9lbiwuLi5sb2NhbGVfc3ZdKTtcclxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlcyA9IHtcclxuICAgICAgICAgICAgJ3N2JzogbWVzc2FnZXNfc3YsXHJcbiAgICAgICAgICAgICdlbic6IG1lc3NhZ2VzX2VuXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIG1vbWVudCgpLmxvY2FsZShjZmcuS0VEX0xPQ0FMRSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZW5kZXIoKXtcclxuICAgICAgICAgICAgcmV0dXJuIDxJbnRsUHJvdmlkZXIgbG9jYWxlPXtjZmcuS0VEX0xPQ0FMRX0gbWVzc2FnZXM9e3RoaXMubWVzc2FnZXNbY2ZnLktFRF9MT0NBTEVdfT5cclxuICAgICAgICAgICAgICAgIDxDb21wb25lbnQgey4uLnRoaXMucHJvcHMgYXMgUH0gLz5cclxuICAgICAgICAgICAgPC9JbnRsUHJvdmlkZXI+XHJcbiAgICAgICAgfVxyXG4gICAgfSIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcblxyXG5leHBvcnQgY29uc3QgVUlDaGVja2JveCA9ICh7c3RhdGUsIG9uQ2xpY2ssIGxhYmVsfSkgPT4ge1xyXG4gICAgcmV0dXJuIDxsYWJlbCBjbGFzc05hbWU9J3VpLWNoZWNrYm94Jz5cclxuICAgICAge2xhYmVsfVxyXG4gICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgY2hlY2tlZD17c3RhdGV9IG9uQ2xpY2s9e29uQ2xpY2t9IC8+XHJcbiAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImN1c3RvbS1lbGVtZW50XCI+PC9zcGFuPlxyXG4gICAgPC9sYWJlbD5cclxuICB9IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5cclxuaW50ZXJmYWNlIENFUHJvcHMge1xyXG4gICAgdGV4dDogc3RyaW5nOyAvLyBUZXh0IHRvIGJlIHNob3duIGluIGZpZWxkXHJcbiAgICB0YWc/OiAndGQnIHwgJ3RoJyB8ICdkaXYnIHwgJ3NwYW4nIHwgJ3AnIHwgJ2gxJyB8ICdoMicgfCAnaDMnOyAvLyBhbGxvd2QgdGFncyAtLSBzaG91bGQgd2UgYWRkIG1vcmU/XHJcbiAgICBvbkNoYW5nZTogKG5ld05hbWU6IHN0cmluZykgPT4gdm9pZDtcclxuICAgIHBsYWNlaG9sZGVyPzogc3RyaW5nOyAvLyBJZiB0ZXh0IGlzIGVtcHR5LCB0aGlzIHdpbGwgYmUgdGhlIHBsYWNlaG9sZGVyXHJcbiAgICBtYXhDaGFycz86IG51bWJlcjtcclxuICAgIHJlYWRPbmx5PzogYm9vbGVhbjtcclxuICAgIGNsYXNzTmFtZT86IHN0cmluZztcclxuICAgIHBsYWNlSG9sZGVyPzogc3RyaW5nO1xyXG5cclxuICAgIHZhbGlkYXRlVmFsdWU/OiBSZWdFeHA7XHJcblxyXG4gICAgLy8gRm9yIG5hdmlnYXRpb25cclxuICAgIGFsbG93TmF2aWdhdGlvbj86IGJvb2xlYW47IC8vIHRvIGFjdGl2YXRlIG5hdmlnYXRpb25cclxuICAgIG9uTmF2aWdhdGU/OiAoZGlyZWN0aW9uOiBzdHJpbmcpID0+IHZvaWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDb250ZW50RWRpdGFibGVGaWVsZCBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8Q0VQcm9wcz4ge1xyXG4gICAgbXlzZWxmOiBSZWFjdC5SZWZPYmplY3Q8YW55PjtcclxuICAgIHByb3BhZ2F0ZWRPbkNoYW5nZTogc3RyaW5nO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByb3BzOiBDRVByb3BzKSB7XHJcbiAgICAgICAgc3VwZXIocHJvcHMpO1xyXG4gICAgICAgIHRoaXMubXlzZWxmID0gUmVhY3QuY3JlYXRlUmVmPEhUTUxFbGVtZW50PigpO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgICAgIHRleHQ6IHByb3BzLnRleHQgfHwgJydcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGNvbnN0IHt0YWcsIHRleHQsIHJlYWRPbmx5fSA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgY29uc3QgVGFnVHlwZSA9IHRhZztcclxuICAgICAgICByZXR1cm4gPFRhZ1R5cGVcclxuICAgICAgICAgICAgY29udGVudEVkaXRhYmxlPXshcmVhZE9ubHl9XHJcbiAgICAgICAgICAgIGRhdGEtcGxhY2Vob2xkZXI9e3RoaXMucHJvcHMucGxhY2Vob2xkZXJ9XHJcbiAgICAgICAgICAgIHJlZj17dGhpcy5teXNlbGZ9XHJcbiAgICAgICAgICAgIGNsYXNzTmFtZT17dGhpcy5wcm9wcy5jbGFzc05hbWV9XHJcbiAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uQ2hhbmdlLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgIG9uS2V5RG93bj17dGhpcy5vbktleURvd24uYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgb25LZXlVcD17dGhpcy5vbktleVVwLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgIG9uQmx1cj17dGhpcy5vbkJsdXIuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgb25QYXN0ZT17dGhpcy5vblBhc3RlLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXt7X19odG1sOiB0ZXh0fX0gLz5cclxuICAgIH1cclxuXHJcbiAgICBvbkNoYW5nZShlOiBFdmVudCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyB0ZXh0OiB0aGlzLm15c2VsZi5jdXJyZW50LmlubmVyVGV4dCB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRha2UgYWN0aW9uIGRlcGVuZGluZyBvbiBrZXktZXZlbnRcclxuICAgICAqIEBwYXJhbSBlIGV2ZW50IGZyb20gZmllbGRcclxuICAgICAqIFxyXG4gICAgICogSWYgYWxsb3dOYXZpZ2F0aW9uIHRoZW4gbGlzdGVuIHRvIGFycm93LWtleXNcclxuICAgICAqIExpbWl0cyB0byBtYXhDaGFyc1xyXG4gICAgICovXHJcbiAgICBvbktleURvd24oZTogS2V5Ym9hcmRFdmVudCkge1xyXG4gICAgICAgIGNvbnN0IHRleHQgPSB0aGlzLm15c2VsZi5jdXJyZW50LmlubmVyVGV4dDtcclxuICAgICAgICBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7XHJcbiAgICAgICAgICAgIHRoaXMubXlzZWxmLmN1cnJlbnQuaW5uZXJUZXh0ID0gdGhpcy5wcm9wcy50ZXh0IHx8IFwiXCI7XHJcbiAgICAgICAgICAgIHRoaXMubXlzZWxmLmN1cnJlbnQuYmx1cigpO1xyXG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH0gZWxzZSBpZihlLmtleSA9PT0gJ0VudGVyJyl7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5uYXZpZ2F0ZSh0ZXh0LCAnZG93bicpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09ICdUYWInKSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvcGFnYXRlT25DaGFuZ2UodGV4dCk7XHJcbiAgICAgICAgfSAgZWxzZSBpZih0ZXh0Lmxlbmd0aCA+PSB0aGlzLnByb3BzLm1heENoYXJzICYmIChcclxuICAgICAgICAgICAgL15bXFxkXFx3XFxzXSQvLnRlc3QoZS5rZXkpICYmICEoZS5tZXRhS2V5IHx8IGUuY3RybEtleSlcclxuICAgICAgICApKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuYWxsb3dOYXZpZ2F0aW9uID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5hdkRpciA9IGUua2V5LnN0YXJ0c1dpdGgoJ0Fycm93JykgPyBlLmtleS5yZXBsYWNlKCdBcnJvdycsICcnKS50b0xvd2VyQ2FzZSgpIDogZmFsc2U7XHJcbiAgICAgICAgICAgIGNvbnN0IGNhcmV0ID0gZG9jdW1lbnQuZ2V0U2VsZWN0aW9uKCkuZ2V0UmFuZ2VBdCgwKS5lbmRPZmZzZXQ7IC8vIG9ubHkgd29ya3MgZm9yIHBsYWludGV4dFxyXG4gICAgICAgICAgICBpZiAobmF2RGlyICYmIHRleHQubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGUodGV4dCwgbmF2RGlyKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChuYXZEaXIgJiYgKG5hdkRpciA9PSAndXAnIHx8IG5hdkRpciA9PSAnZG93bicpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRlKHRleHQsIG5hdkRpcik7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobmF2RGlyICYmIChcclxuICAgICAgICAgICAgICAgIChuYXZEaXIgPT0gJ2xlZnQnICYmIGNhcmV0ID09IDApIHx8XHJcbiAgICAgICAgICAgICAgICAobmF2RGlyID09ICdyaWdodCcgJiYgY2FyZXQgPT0gdGV4dC5sZW5ndGgpXHJcbiAgICAgICAgICAgICkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGUodGV4dCwgbmF2RGlyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIGUgZXZlbnQgZnJvbSBmaWVsZFxyXG4gICAgICogU29sZWx5IHVzZWQgdG8gaGFuZGUgdmFsaWRhdGlvbnMtaXNzdWVzXHJcbiAgICAgKi9cclxuICAgIG9uS2V5VXAoZTogS2V5Ym9hcmRFdmVudCkge1xyXG4gICAgICAgIGNvbnN0IHRleHQgPSB0aGlzLm15c2VsZi5jdXJyZW50LmlubmVyVGV4dDtcclxuICAgICAgICBpZiAodGhpcy5wcm9wcy52YWxpZGF0ZVZhbHVlICE9PSB1bmRlZmluZWQgJiYgIXRoaXMucHJvcHMudmFsaWRhdGVWYWx1ZS50ZXN0KHRleHQpKSB7XHJcbiAgICAgICAgICAgIHRoaXMubXlzZWxmLmN1cnJlbnQuaW5uZXJUZXh0ID0gdGhpcy5wcm9wcy50ZXh0IHx8IFwiXCI7XHJcbiAgICAgICAgICAgIHRoaXMubXlzZWxmLmN1cnJlbnQuYmx1cigpO1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlIHZhbHVlIGFuZCBwYXNzIHRvIHBhcmVudHMgbmF2aWdhdGUtZnVuY2l0b25cclxuICAgICAqIEBwYXJhbSB0ZXh0IFxyXG4gICAgICogQHBhcmFtIGRpcmVjdGlvbiBcclxuICAgICAqL1xyXG4gICAgbmF2aWdhdGUodGV4dDogc3RyaW5nLCBkaXJlY3Rpb246IHN0cmluZykge1xyXG4gICAgICAgIC8vIGZpcnN0IHVwZGF0ZSBjZWxsXHJcbiAgICAgICAgdGhpcy5wcm9wYWdhdGVPbkNoYW5nZSh0ZXh0KTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHsgdGV4dDogdGV4dH0gKTtcclxuICAgICAgICAvLyB0aGVuIG5hdmlnYXRlIGF3YXlcclxuICAgICAgICB0aGlzLnByb3BzLm9uTmF2aWdhdGUoZGlyZWN0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE1ha2Ugc3VyZSBwYXN0ZWQgdGV4dCBpcyBwdXJlIHRleHRcclxuICAgICAqIEBwYXJhbSBlIHRoZSBwYXNldCBldmVudFxyXG4gICAgICovXHJcbiAgICBvblBhc3RlKGU6IENsaXBib2FyZEV2ZW50KSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGNvbnN0IHRleHQgPSAoZS5jbGlwYm9hcmREYXRhICYmIGUuY2xpcGJvYXJkRGF0YS5nZXREYXRhKT8gIGUuY2xpcGJvYXJkRGF0YS5nZXREYXRhKFwidGV4dC9wbGFpblwiKSA6ICcnO1xyXG4gICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKFwiaW5zZXJ0SFRNTFwiLCBmYWxzZSwgdGV4dCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgdmFsdWUgb24gZXhpdCBmcm9tIGZpZWxkXHJcbiAgICAgKiBAcGFyYW0gZSBcclxuICAgICAqL1xyXG4gICAgb25CbHVyKGU6IEV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgdGV4dCA9IHRoaXMubXlzZWxmLmN1cnJlbnQuaW5uZXJUZXh0O1xyXG4gICAgICAgIHRoaXMucHJvcGFnYXRlT25DaGFuZ2UodGV4dCk7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHRleHQ6IHRleHQgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBPbmx5IHVwZGF0ZSB2YWx1ZSBpZiBpdCBoYXMgY2hhbmdlZFxyXG4gICAgICogQHBhcmFtIG5ld1ZhbHVlIFxyXG4gICAgICovXHJcbiAgICBwcm9wYWdhdGVPbkNoYW5nZShuZXdWYWx1ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLnByb3BhZ2F0ZWRPbkNoYW5nZSAhPSBuZXdWYWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnByb3BhZ2F0ZWRPbkNoYW5nZSA9IG5ld1ZhbHVlO1xyXG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKG5ld1ZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBGaWJlciwgRmliZXJDb250ZXh0LCBTdWJzY3JpcHRpb24gfSBmcm9tIFwia2VkYmFja2VuZC9vYnNlcnZhYmxlXCI7XHJcbmltcG9ydCBSZWFjdCwgeyBTdXNwZW5zZSwgUmVhY3ROb2RlIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5cclxuY29uc3QgRmliZXJDb250ZXh0UmVhY3QgPSBSZWFjdC5jcmVhdGVDb250ZXh0PEZpYmVyIHwgbnVsbD4obnVsbCk7XHJcblxyXG5GaWJlckNvbnRleHQuYWRkUHJvdmlkZXIoKCk9PlxyXG4gIC8vIEhlcmUgd2UgYWN0dWFsbCBkbyB1c2VIb29rKEZpYmVyQ29udGV4dCkgYnV0IHdpdGhvdXQgbG9nZ2luZyB0byBpbnRlcm5hbCBkZWJ1ZyBsb2dzXHJcbiAgLy8gTm9ybWFsbHksIHJlYWN0IGhvb2tzIGFyZSBzZW5zaXRpdmUgaW4gd2hpY2ggb3JkZXIgdGhleSBhcmUgY2FsbGVkICh1c2VTdGF0ZSgpLCBldGMpXHJcbiAgLy8gYnV0IHVzZUNvbnRleHQoKSBpcyBub3Qgc2Vuc2l0aXZlIGFib3V0IHRoYXQgYXQgYWxsLlxyXG4gIC8vIFN0aWxsLCB0aGUgZGVidWcgdmVyc2lvbiBvZiByZWFjdCB3aWxsIGxvZyBjYWxscyB0byB1c2VIb29rKCkgYW5kIHRocm93IGlmIGEgcmVuZGVyXHJcbiAgLy8gZG9lc24ndCB1c2UgdGhlIHNhbWUgbnVtYmVyIG9mIGhvb2tzIGV2ZXJ5IHRpbWUuIFRoaXMgY2hlY2sgc2hvdWxkIG5vdCBhcHBseVxyXG4gIC8vIHRvIHVzZUhvb2soKSBzaW5jZSBpdCBpcyBub3Qgc2Vuc2l0aXZlIHRvIHRoZSBvcmRlciBpbiB3aGljaCBpdCB3YXMgY2FsbGVkLlxyXG4gIC8vIEFuZCB3ZSBuZWVkIHRvIGJlIGFibGUgdG8gY2FsbCBpdCBmcm9tIHdpdGhpbiBjb250aXRpb25hbCBleHByZXNzaW9ucyAvIHN0YXRlbWVudHMsXHJcbiAgLy8gc28gd2UgbXVzdCBieXBhc3MgdGhpcyBkZWJ1ZyBsb2dnaW5nIGhlcmUgYnkgYWNjZXNzaW5nIHRoZSBfY3VycmVudFZhbHVlIGRpcmVjdGx5LlxyXG4gIChGaWJlckNvbnRleHRSZWFjdCBhcyBhbnkpLl9jdXJyZW50VmFsdWUpOyBcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgZmFsbGJhY2s/OiBOb25OdWxsYWJsZTxSZWFjdE5vZGU+fG51bGw7XHJcbiAgZXJyb3JGYWxsYmFjaz86IE5vbk51bGxhYmxlPFJlYWN0Tm9kZT58bnVsbDtcclxuICBjaGlsZHJlbj86IFJlYWN0Tm9kZTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIE9ic2VydmUgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsIHtjb3VudGVyOiBudW1iZXIsIGVycm9yOiBudWxsIHwgRXJyb3IsIGluZm8/OiBzdHJpbmd9PiB7XHJcbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICBjb3VudGVyOiAwLFxyXG4gICAgICBlcnJvcjogbnVsbFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudERpZENhdGNoKGVycm9yOiBhbnksIGluZm86IGFueSkge1xyXG4gICAgaWYgKCFlcnJvciB8fCAhZXJyb3IubmFtZSkgZXJyb3IgPSBuZXcgRXJyb3IoJycrZXJyb3IpO1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7ZXJyb3IsIGluZm99KTtcclxuICAgIGNvbnNvbGUubG9nKGVycm9yLCBpbmZvKTtcclxuICB9XHJcblxyXG4gIHN1YnNjcmlwdGlvbnM6IFN1YnNjcmlwdGlvbltdID0gW107XHJcblxyXG4gIG91dGVyU3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb24gPSB7XHJcbiAgICB1bnN1YnNjcmliZTogKCk9PiB7XHJcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5mb3JFYWNoKHMgPT4gcy51bnN1YnNjcmliZSgpKTtcclxuICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0gW107XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvYnNlcnZlciA9ICh2YWx1ZTogYW55LCBlcnJvcjogYW55LCBzdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbikgPT4ge1xyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe2Vycm9yfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnNldFN0YXRlKCh7Y291bnRlcn0pID0+ICh7Y291bnRlcjogY291bnRlciArIDEsIGVycm9yfSkpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50V2lsbE1vdW50KCkge1xyXG4gICAgdGhpcy5vdXRlclN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgaWYgKHRoaXMuc3RhdGUuZXJyb3IpIHtcclxuICAgICAgcmV0dXJuIHRoaXMucHJvcHMuZXJyb3JGYWxsYmFjayB8fCA8cD57TGBLdW5kZSBpbnRlIGxhZGRhIGlubmVow6VsbGV0YH08L3A+O1xyXG4gICAgfVxyXG4gICAgdGhpcy5vdXRlclN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgcmV0dXJuIDxTdXNwZW5zZSBmYWxsYmFjaz17dGhpcy5wcm9wcy5mYWxsYmFjayB8fCBudWxsfT5cclxuICAgICAgPEZpYmVyQ29udGV4dFJlYWN0LlByb3ZpZGVyIHZhbHVlPXt0aGlzfT57dGhpcy5wcm9wcy5jaGlsZHJlbn08L0ZpYmVyQ29udGV4dFJlYWN0LlByb3ZpZGVyPlxyXG4gICAgPC9TdXNwZW5zZT47XHJcbiAgfVxyXG59XHJcbiIsIi8qIFJFRkFDVE9SOiBNb3ZlIHRoaXMgY29tcG9uZW50IG91dHNpZGUgY291cnNlYnVpbGRlciFcclxuICAgVGhpcyBpcyBhIGdlbmVyYWwtcHVycG9zZSBjb21wb25lbnRcclxuKi9cclxuXHJcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgR29hbFByb2dyZXNzIH0gZnJvbSAnLi4vY2hhcnRzL2dvYWwtcHJvZ3Jlc3MnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICB0aXRsZTogc3RyaW5nIHwgSlNYLkVsZW1lbnQ7XHJcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xyXG4gIGhlYWRlckNsYXNzTmFtZT86IHN0cmluZztcclxuICBjb250ZW50Q2xhc3NOYW1lPzogc3RyaW5nO1xyXG4gIGhlYWRlck9wZW4/OiBib29sZWFuO1xyXG4gIGluYWN0aXZhdGVkPzogYm9vbGVhbjtcclxuICBpbmFjdGl2YXRlZFJlbmRlcj86ICdjaGlsZHJlbicgfCAndGl0bGVBbmRDaGlsZHJlbic7XHJcbiAgb25PcGVuQ2xvc2U/OiAoYmVjYW1lT3BlbjogYm9vbGVhbikgPT4gdm9pZDtcclxuICBkaXNwbGF5UHJvZ3Jlc3M/OiBib29sZWFuO1xyXG4gIHByb2dyZXNzRGF0YT86IHtjb21wbGV0ZWROdW1iZXJPZlRhc2tzOiBudW1iZXIsIG51bWJlck9mVGFza3M6IG51bWJlcn07XHJcbiAgY2hpbGRyZW47XHJcbn1cclxuXHJcbmludGVyZmFjZSBTdGF0ZSB7XHJcbiAgaGVhZGVyT3BlbjogYm9vbGVhbjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIE9wZW5DbG9zZUJveCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcyxTdGF0ZT4ge1xyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgaGVhZGVyT3BlbjogcHJvcHMuaGVhZGVyT3BlbiB8fCBmYWxzZVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgKG5leHRQcm9wczogUHJvcHMpIHtcclxuICAgIGlmIChuZXh0UHJvcHMuaGVhZGVyT3BlbiAhPT0gdGhpcy5wcm9wcy5oZWFkZXJPcGVuKSB7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe2hlYWRlck9wZW46IG5leHRQcm9wcy5oZWFkZXJPcGVufSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7IHRpdGxlLCBjbGFzc05hbWUsIGNoaWxkcmVuLCBoZWFkZXJDbGFzc05hbWUsIGNvbnRlbnRDbGFzc05hbWUsIGRpc3BsYXlQcm9ncmVzcywgcHJvZ3Jlc3NEYXRhLFxyXG4gICAgICBpbmFjdGl2YXRlZCwgaW5hY3RpdmF0ZWRSZW5kZXIgfSA9IHRoaXMucHJvcHM7XHJcbiAgICBjb25zdCB7IGhlYWRlck9wZW4gfSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgaWYgKGluYWN0aXZhdGVkKSByZXR1cm4gaW5hY3RpdmF0ZWRSZW5kZXIgPT09ICd0aXRsZUFuZENoaWxkcmVuJyA/IDw+XHJcbiAgICAgIDw+e3RpdGxlfTwvPlxyXG4gICAgICA8PntjaGlsZHJlbn08Lz5cclxuICAgIDwvPiA6IDw+XHJcbiAgICAgIHtjaGlsZHJlbn1cclxuICAgIDwvPjtcclxuXHJcbiAgICAvL3ZhciBjdXJyZW50UHJvZ3Jlc3NEYXRhID0gLy9wcm9ncmVzc0RhdGEoKTtcclxuICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT17KGNsYXNzTmFtZXx8JycpICsgXCIgb3BlbkNsb3NlXCIgKyAoaGVhZGVyT3BlbiA/IFwiIG9wZW5cIiA6IFwiXCIpfT5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9e1wib3BlbkhlYWRlclwiICsgKGhlYWRlckNsYXNzTmFtZSA/IFwiIFwiICsgaGVhZGVyQ2xhc3NOYW1lIDogXCJcIil9XHJcbiAgICAgICAgb25DbGljaz17KCkgPT4ge1xyXG4gICAgICAgICAgaWYgKHRoaXMucHJvcHMub25PcGVuQ2xvc2UpIHRoaXMucHJvcHMub25PcGVuQ2xvc2UoIXRoaXMuc3RhdGUuaGVhZGVyT3Blbik7XHJcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgaGVhZGVyT3BlbjogIXRoaXMuc3RhdGUuaGVhZGVyT3BlbiB9KTtcclxuICAgICAgICB9fSA+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJvcGVuSGVhZGVyQ29udGFpbmVyXCI+XHJcbiAgICAgICAgICA8ZGl2Pnt0aXRsZX08L2Rpdj5cclxuICAgICAgICAgIHtkaXNwbGF5UHJvZ3Jlc3MgJiYgPEdvYWxQcm9ncmVzcyB7Li4ucHJvZ3Jlc3NEYXRhfS8+fVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9e1wib3BlbkNvbnRlbnRcIiArIChjb250ZW50Q2xhc3NOYW1lID8gXCIgXCIgKyBjb250ZW50Q2xhc3NOYW1lIDogXCJcIil9PlxyXG4gICAgICAgIHtjaGlsZHJlbn1cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj47XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgVGFzayB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVGFza1dpdGhNZXRhZGF0YSB7XHJcbiAgdGFzazogVGFzaztcclxuICBpc1Rhc2tPd25lcjogYm9vbGVhbjtcclxufVxyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICB0YXNrTWV0YXM6IFRhc2tXaXRoTWV0YWRhdGFbXTtcclxuICBvblNvcnQ6IChzb3VyY2U6IFRhc2ssIHRhcmdldDogVGFzaywgcGxhY2VtZW50OiAnYmVmb3JlJyB8ICdhZnRlcicpID0+IHZvaWQ7XHJcbiAgcmVuZGVyRWRpdExpbms/OiAodGFza01ldGE6IFRhc2tXaXRoTWV0YWRhdGEpID0+IGFueTtcclxuICByZW5kZXJMaW5rOiAodGFza01ldGE6IFRhc2tXaXRoTWV0YWRhdGEpID0+IGFueTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHRhc2tIYXNNaWdyYXRlZFRleHRzKHRhc2s6IFRhc2spIHtcclxuICByZXR1cm4gdGFzay5taWdyYXRlZFRleHRzICYmIE9iamVjdC5rZXlzKHRhc2subWlncmF0ZWRUZXh0cykuc29tZSh0eXBlID0+XHJcbiAgICBPYmplY3Qua2V5cyh0YXNrLm1pZ3JhdGVkVGV4dHNbdHlwZV0pLmxlbmd0aCA+IDApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gU29ydGFibGVUYXNrTGlzdCh7dGFza01ldGFzLCByZW5kZXJFZGl0TGluaywgcmVuZGVyTGluaywgb25Tb3J0fTogUHJvcHMpIHtcclxuICBjb25zdCBbZHJhZ1N0YXRlLCBzZXREcmFnU3RhdGVdID0gdXNlU3RhdGUoe1xyXG4gICAgdGFza0JlaW5nRHJhZ2dlZDogbnVsbCBhcyBUYXNrIHwgbnVsbCxcclxuICAgIHRhc2tCZWluZ0hvdmVyZWQ6IG51bGwgYXMgVGFzayB8IG51bGwsXHJcbiAgICBpbnNlcnRCZWZvcmU6IGZhbHNlLFxyXG4gICAgb3JpZ2luQ2xpZW50WTogLTFcclxuICB9KTtcclxuICBjb25zdCB7dGFza0JlaW5nRHJhZ2dlZCwgdGFza0JlaW5nSG92ZXJlZCwgaW5zZXJ0QmVmb3JlLCBvcmlnaW5DbGllbnRZfSA9IGRyYWdTdGF0ZTtcclxuXHJcbiAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwidGFza0NvbnRhaW5lciBzb3J0YWJsZVwiXHJcbiAgICAgIG9uRHJvcD17ZXYgPT4ge1xyXG4gICAgICAgIGlmICh0YXNrQmVpbmdIb3ZlcmVkICYmIHRhc2tCZWluZ0RyYWdnZWQpIHtcclxuICAgICAgICAgIG9uU29ydCh0YXNrQmVpbmdEcmFnZ2VkLCB0YXNrQmVpbmdIb3ZlcmVkLCBpbnNlcnRCZWZvcmUgPyAnYmVmb3JlJyA6ICdhZnRlcicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZXREcmFnU3RhdGUoey4uLmRyYWdTdGF0ZSwgdGFza0JlaW5nSG92ZXJlZDogbnVsbCwgdGFza0JlaW5nRHJhZ2dlZDogbnVsbH0pO1xyXG4gICAgICB9fVxyXG4gICAgPlxyXG4gIHt0YXNrTWV0YXMubWFwKHRhc2tNZXRhID0+IHtcclxuICAgIGNvbnN0IHt0YXNrLCBpc1Rhc2tPd25lcn0gPSB0YXNrTWV0YTtcclxuICAgIGNvbnN0IGhhc01pZ3JhdGVkVGV4dHMgPSB0YXNrSGFzTWlncmF0ZWRUZXh0cyh0YXNrKTtcclxuICAgIGNvbnN0IHRhc2tJZCA9IHRhc2suaWQ7XHJcblxyXG4gICAgcmV0dXJuIDxSZWFjdC5GcmFnbWVudCBrZXk9e3Rhc2tJZH0+XHJcblxyXG4gICAgICB7aW5zZXJ0QmVmb3JlICYmIHRhc2tCZWluZ0hvdmVyZWQgPT09IHRhc2sgP1xyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZHJvcC10YXJnZXRcIiBvbkRyYWdPdmVyPXtldiA9PiBldi5wcmV2ZW50RGVmYXVsdCgpfT4mbmJzcDs8L2Rpdj4gOlxyXG4gICAgICAgIG51bGxcclxuICAgICAgfVxyXG5cclxuICAgICAgPGRpdlxyXG4gICAgICAgIGNsYXNzTmFtZT17W1wiYWxpZ24taG9yaXpvbnRhbFwiLCBcImRyYWdnYWJsZVwiLCB0YXNrID09PSB0YXNrQmVpbmdEcmFnZ2VkICYmIFwiZHJhZy1zb3VyY2VcIl0uZmlsdGVyKHg9PngpLmpvaW4oJyAnKX1cclxuICAgICAgICBkcmFnZ2FibGU9e3RydWV9XHJcbiAgICAgICAgb25EcmFnU3RhcnQ9e2V2ID0+IHtcclxuICAgICAgICAgIGV2LmRhdGFUcmFuc2Zlci5lZmZlY3RBbGxvd2VkID0gXCJtb3ZlXCI7XHJcbiAgICAgICAgICBzZXREcmFnU3RhdGUoey4uLmRyYWdTdGF0ZSwgb3JpZ2luQ2xpZW50WTogZXYuY2xpZW50WSwgdGFza0JlaW5nRHJhZ2dlZDogdGFza30pXHJcbiAgICAgICAgfX1cclxuICAgICAgICBvbkRyYWdPdmVyPXtldiA9PiB7XHJcbiAgICAgICAgICBpZiAoIXRhc2tCZWluZ0RyYWdnZWQpIHJldHVybjtcclxuICAgICAgICAgIGlmICh0YXNrQmVpbmdEcmFnZ2VkID09PSB0YXNrKSB7XHJcbiAgICAgICAgICAgIHNldERyYWdTdGF0ZSh7Li4uZHJhZ1N0YXRlLCB0YXNrQmVpbmdIb3ZlcmVkOiBudWxsfSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICBldi5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9IFwibW92ZVwiO1xyXG4gICAgICAgICAgc2V0RHJhZ1N0YXRlKHsuLi5kcmFnU3RhdGUsIHRhc2tCZWluZ0hvdmVyZWQ6IHRhc2ssIGluc2VydEJlZm9yZTogb3JpZ2luQ2xpZW50WSA+IGV2LmNsaWVudFl9KTtcclxuICAgICAgICB9fVxyXG4gICAgICAgIG9uRHJhZ0VuZD17ZXYgPT4ge1xyXG4gICAgICAgICAgc2V0RHJhZ1N0YXRlKHsuLi5kcmFnU3RhdGUsIHRhc2tCZWluZ0hvdmVyZWQ6IG51bGwsIHRhc2tCZWluZ0RyYWdnZWQ6IG51bGx9KTtcclxuICAgICAgICB9fT5cclxuICAgICAgICB7aXNUYXNrT3duZXIgJiYgaGFzTWlncmF0ZWRUZXh0cyAmJiA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgPGRpdiBzdHlsZT17e3Bvc2l0aW9uOidyZWxhdGl2ZScsIHRvcDonMC4yZW0nLCBsZWZ0OiAnLTAuN2VtJ319PlxyXG4gICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1wYWdlbGluZXNcIiBzdHlsZT17e3Bvc2l0aW9uOidhYnNvbHV0ZScsIHRvcDogMCwgbGVmdDogMCwgY29sb3I6JyM0OWMzNWEnfX0gLz5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2Pn1cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAge3JlbmRlckVkaXRMaW5rKHRhc2tNZXRhKX1cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAge3JlbmRlckxpbmsodGFza01ldGEpfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuXHJcbiAgICAgIHshaW5zZXJ0QmVmb3JlICYmIHRhc2tCZWluZ0hvdmVyZWQgPT09IHRhc2sgP1xyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZHJvcC10YXJnZXRcIiBvbkRyYWdPdmVyPXtldiA9PiBldi5wcmV2ZW50RGVmYXVsdCgpfT4mbmJzcDs8L2Rpdj4gOlxyXG4gICAgICAgIG51bGxcclxuICAgICAgfVxyXG5cclxuICAgIDwvUmVhY3QuRnJhZ21lbnQ+O1xyXG4gIH0pfVxyXG4gIDwvZGl2PjtcclxufVxyXG4iLCJpbXBvcnQgZXhlYyBmcm9tICcuL2V4ZWMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gIGJvbGQ6IHtcclxuICAgIGljb246ICc8Yj5GPC9iPicsXHJcbiAgICB0aXRsZTogJ0ZldHN0aWwnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdib2xkJylcclxuICB9LFxyXG4gIGl0YWxpYzoge1xyXG4gICAgaWNvbjogJzxpPks8L2k+JyxcclxuICAgIHRpdGxlOiAnS3Vyc2l2JyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnaXRhbGljJylcclxuICB9LFxyXG4gIHVuZGVybGluZToge1xyXG4gICAgaWNvbjogJzx1PlU8L3U+JyxcclxuICAgIHRpdGxlOiAnVW5kZXJzdHJ1a2VuJyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygndW5kZXJsaW5lJylcclxuICB9LFxyXG4gIHN0cmlrZXRocm91Z2g6IHtcclxuICAgIGljb246ICc8c3RyaWtlPlM8L3N0cmlrZT4nLFxyXG4gICAgdGl0bGU6ICdTdHJ1a2VuJyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnc3RyaWtlVGhyb3VnaCcpXHJcbiAgfSxcclxuICBoZWFkaW5nMToge1xyXG4gICAgaWNvbjogJzxiPkg8c3ViPjE8L3N1Yj48L2I+JyxcclxuICAgIHRpdGxlOiAnUnVicmlrIDEnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdmb3JtYXRCbG9jaycsICc8SDE+JylcclxuICB9LFxyXG4gIGhlYWRpbmcyOiB7XHJcbiAgICBpY29uOiAnPGI+SDxzdWI+Mjwvc3ViPjwvYj4nLFxyXG4gICAgdGl0bGU6ICdSdWJyaWsgMicsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2Zvcm1hdEJsb2NrJywgJzxIMj4nKVxyXG4gIH0sXHJcbiAgaGVhZGluZzM6IHtcclxuICAgIGljb246ICc8Yj5IPHN1Yj4zPC9zdWI+PC9iPicsXHJcbiAgICB0aXRsZTogJ1J1YnJpayAzJyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnZm9ybWF0QmxvY2snLCAnPEgzPicpXHJcbiAgfSxcclxuICBwYXJhZ3JhcGg6IHtcclxuICAgIGljb246ICcmIzE4MjsnLFxyXG4gICAgdGl0bGU6ICdQYXJhZ3JhZicsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2Zvcm1hdEJsb2NrJywgJzxQPicpXHJcbiAgfSxcclxuICBxdW90ZToge1xyXG4gICAgaWNvbjogJyYjODIyMDsgJiM4MjIxOycsXHJcbiAgICB0aXRsZTogJ0NpdGF0JyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnZm9ybWF0QmxvY2snLCAnPEJMT0NLUVVPVEU+JylcclxuICB9LFxyXG4gIG9saXN0OiB7XHJcbiAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1saXN0LW9sXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPicsXHJcbiAgICB0aXRsZTogJ09yZG5hZCBsaXN0YScsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2luc2VydE9yZGVyZWRMaXN0JylcclxuICB9LFxyXG4gIHVsaXN0OiB7XHJcbiAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1saXN0XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPicsXHJcbiAgICB0aXRsZTogJ1B1bmt0bGlzdGEnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdpbnNlcnRVbm9yZGVyZWRMaXN0JylcclxuICB9LFxyXG4gIG91dGRlbnQ6IHtcclxuICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLW91dGRlbnRcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+JyxcclxuICAgIHRpdGxlOiAnTWluc2thIGluZHJhZycsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoXCJvdXRkZW50XCIpXHJcbiAgfSxcclxuICBpbmRlbnQ6IHtcclxuICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWluZGVudFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4nLFxyXG4gICAgdGl0bGU6ICfDlmthIGluZHJhZycsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoXCJpbmRlbnRcIiksXHJcbiAgfSxcclxuICBjb2RlOiB7XHJcbiAgICBpY29uOiAnJmx0Oy8mZ3Q7JyxcclxuICAgIHRpdGxlOiAnUHJvZ3JhbWtvZCcsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2Zvcm1hdEJsb2NrJywgJzxQUkU+JylcclxuICB9LFxyXG4gIGxpbmU6IHtcclxuICAgIGljb246ICcmIzgyMTM7JyxcclxuICAgIHRpdGxlOiAnVsOlZ3LDpHQgbGluamUnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdpbnNlcnRIb3Jpem9udGFsUnVsZScpXHJcbiAgfSxcclxuICBsaW5rOiB7XHJcbiAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1saW5rXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPicsXHJcbiAgICB0aXRsZTogJ0luZm9nYSBsw6RuaycsXHJcbiAgICByZXN1bHQ6ICgpID0+IHtcclxuICAgICAgY29uc3QgdXJsID0gd2luZG93LnByb21wdCgnQW5nZSBsw6Rua2VucyBVUkwnKVxyXG4gICAgICBpZiAodXJsKSB7XHJcbiAgICAgICAgdmFyIHNlbGVjdGVkID0gZG9jdW1lbnQuZ2V0U2VsZWN0aW9uKCk7XHJcbiAgICAgICAgY29uc3QgZWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgICAgICBlbGVtLmhyZWYgPSB1cmw7XHJcbiAgICAgICAgZWxlbS50YXJnZXQ9XCJfYmxhbmtcIjtcclxuICAgICAgICBlbGVtLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHNlbGVjdGVkLnRvU3RyaW5nKCkpKTtcclxuICAgICAgICBleGVjKCdpbnNlcnRIVE1MJywgZWxlbS5vdXRlckhUTUwpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSxcclxuICBpbWFnZToge1xyXG4gICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtcGljdHVyZS1vXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPicsXHJcbiAgICB0aXRsZTogJ0luZm9nYSBiaWxkJyxcclxuICAgIHByb21wdE1zZzogJ0FuZ2UgYmlsZGVucyBVUkwnLFxyXG4gICAgcmVzdWx0IChldiwgY29tcG9uZW50KSB7XHJcbiAgICAgIGNvbnN0IHVybCA9IHdpbmRvdy5wcm9tcHQodGhpcy5wcm9tcHRNc2cpO1xyXG4gICAgICBpZiAodXJsKSB7XHJcbiAgICAgICAgLy9leGVjKCdpbnNlcnRJbWFnZScsIHVybCk7XHJcbiAgICAgICAgY29uc3QgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICAgICAgICBpbWcuc3JjID0gdXJsO1xyXG4gICAgICAgIGltZy50YWJJbmRleCA9IDE7XHJcbiAgICAgICAgaW5zZXJ0RWxlbWVudChpbWcpO1xyXG4gICAgICAgIGltZy5vbmZvY3VzID0gY29tcG9uZW50Lm9uRm9jdXM7XHJcbiAgICAgICAgaW1nLm9uYmx1ciA9IGNvbXBvbmVudC5vbkJsdXI7XHJcbiAgICAgICAgY29tcG9uZW50LnByb3BzLm9uQ2hhbmdlKGNvbXBvbmVudC5jb250ZW50RGl2LmlubmVySFRNTCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGluc2VydEVsZW1lbnQoZWxlbWVudDogSFRNTEVsZW1lbnQpIHtcclxuICAgIHZhciBzZWwsIHJhbmdlO1xyXG4gICAgaWYgKHdpbmRvdy5nZXRTZWxlY3Rpb24gJiYgKHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKSkucmFuZ2VDb3VudCkge1xyXG4gICAgICAgIHJhbmdlID0gc2VsLmdldFJhbmdlQXQoMCk7XHJcbiAgICAgICAgcmFuZ2UuY29sbGFwc2UodHJ1ZSk7XHJcbiAgICAgICAgcmFuZ2UuaW5zZXJ0Tm9kZShlbGVtZW50KTtcclxuICAgICAgICAvLyBNb3ZlIHRoZSBjYXJldCBpbW1lZGlhdGVseSBhZnRlciB0aGUgaW5zZXJ0ZWQgc3BhblxyXG4gICAgICAgIHJhbmdlLnNldFN0YXJ0QWZ0ZXIoZWxlbWVudCk7XHJcbiAgICAgICAgcmFuZ2UuY29sbGFwc2UodHJ1ZSk7XHJcbiAgICAgICAgc2VsLnJlbW92ZUFsbFJhbmdlcygpO1xyXG4gICAgICAgIHNlbC5hZGRSYW5nZShyYW5nZSk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IGV4ZWMgZnJvbSAnLi9leGVjJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBib2xkOiB7XHJcbiAgICBpY29uOiAnPGI+QjwvYj4nLFxyXG4gICAgdGl0bGU6ICdCb2xkJyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnYm9sZCcpXHJcbiAgfSxcclxuICBpdGFsaWM6IHtcclxuICAgIGljb246ICc8aT5JPC9pPicsXHJcbiAgICB0aXRsZTogJ0l0YWxpYycsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2l0YWxpYycpXHJcbiAgfSxcclxuICB1bmRlcmxpbmU6IHtcclxuICAgIGljb246ICc8dT5VPC91PicsXHJcbiAgICB0aXRsZTogJ1VuZGVybGluZScsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ3VuZGVybGluZScpXHJcbiAgfSxcclxuICBzdHJpa2V0aHJvdWdoOiB7XHJcbiAgICBpY29uOiAnPHN0cmlrZT5TPC9zdHJpa2U+JyxcclxuICAgIHRpdGxlOiAnU3RyaWtlLXRocm91Z2gnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdzdHJpa2VUaHJvdWdoJylcclxuICB9LFxyXG4gIGhlYWRpbmcxOiB7XHJcbiAgICBpY29uOiAnPGI+SDxzdWI+MTwvc3ViPjwvYj4nLFxyXG4gICAgdGl0bGU6ICdIZWFkaW5nIDEnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdmb3JtYXRCbG9jaycsICc8SDE+JylcclxuICB9LFxyXG4gIGhlYWRpbmcyOiB7XHJcbiAgICBpY29uOiAnPGI+SDxzdWI+Mjwvc3ViPjwvYj4nLFxyXG4gICAgdGl0bGU6ICdIZWFkaW5nIDInLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdmb3JtYXRCbG9jaycsICc8SDI+JylcclxuICB9LFxyXG4gIGhlYWRpbmczOiB7XHJcbiAgICBpY29uOiAnPGI+SDxzdWI+Mzwvc3ViPjwvYj4nLFxyXG4gICAgdGl0bGU6ICdIZWFkaW5nIDMnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdmb3JtYXRCbG9jaycsICc8SDM+JylcclxuICB9LFxyXG4gIHBhcmFncmFwaDoge1xyXG4gICAgaWNvbjogJyYjMTgyOycsXHJcbiAgICB0aXRsZTogJ1BhcmFncmFwaCcsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2Zvcm1hdEJsb2NrJywgJzxQPicpXHJcbiAgfSxcclxuICBxdW90ZToge1xyXG4gICAgaWNvbjogJyYjODIyMDsgJiM4MjIxOycsXHJcbiAgICB0aXRsZTogJ1F1b3RlJyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnZm9ybWF0QmxvY2snLCAnPEJMT0NLUVVPVEU+JylcclxuICB9LFxyXG4gIG9saXN0OiB7XHJcbiAgICBpY29uOiAnJiMzNTsnLFxyXG4gICAgdGl0bGU6ICdPcmRlcmVkIExpc3QnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdpbnNlcnRPcmRlcmVkTGlzdCcpXHJcbiAgfSxcclxuICB1bGlzdDoge1xyXG4gICAgaWNvbjogJyYjODIyNjsnLFxyXG4gICAgdGl0bGU6ICdVbm9yZGVyZWQgTGlzdCcsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2luc2VydFVub3JkZXJlZExpc3QnKVxyXG4gIH0sXHJcbiAgb3V0ZGVudDoge1xyXG4gICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtb3V0ZGVudFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4nLFxyXG4gICAgdGl0bGU6ICdPdXRkZW50JyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYyhcIm91dGRlbnRcIilcclxuICB9LFxyXG4gIGluZGVudDoge1xyXG4gICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtaW5kZW50XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPicsXHJcbiAgICB0aXRsZTogJ0luZGVudCcsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoXCJpbmRlbnRcIiksXHJcbiAgfSxcclxuICBjb2RlOiB7XHJcbiAgICBpY29uOiAnJmx0Oy8mZ3Q7JyxcclxuICAgIHRpdGxlOiAnQ29kZScsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2Zvcm1hdEJsb2NrJywgJzxQUkU+JylcclxuICB9LFxyXG4gIGxpbmU6IHtcclxuICAgIGljb246ICcmIzgyMTM7JyxcclxuICAgIHRpdGxlOiAnSG9yaXpvbnRhbCBMaW5lJyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnaW5zZXJ0SG9yaXpvbnRhbFJ1bGUnKVxyXG4gIH0sXHJcbiAgbGluazoge1xyXG4gICAgaWNvbjogJyYjMTI4Mjc5OycsXHJcbiAgICB0aXRsZTogJ0xpbmsnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHVybCA9IHdpbmRvdy5wcm9tcHQoJ0VudGVyIHRoZSBsaW5rIFVSTCcpXHJcbiAgICAgIGlmICh1cmwpIHtcclxuICAgICAgICB2YXIgc2VsZWN0ZWQgPSBkb2N1bWVudC5nZXRTZWxlY3Rpb24oKTtcclxuICAgICAgICBjb25zdCBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xyXG4gICAgICAgIGVsZW0uaHJlZiA9IHVybDtcclxuICAgICAgICBlbGVtLnRhcmdldD1cIl9ibGFua1wiO1xyXG4gICAgICAgIGVsZW0uYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoc2VsZWN0ZWQudG9TdHJpbmcoKSkpO1xyXG4gICAgICAgIGV4ZWMoJ2luc2VydEhUTUwnLCBlbGVtLm91dGVySFRNTCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG4gIGltYWdlOiB7XHJcbiAgICBpY29uOiAnJiMxMjgyNDc7JyxcclxuICAgIHRpdGxlOiAnSW1hZ2UnLFxyXG4gICAgcHJvbXB0TXNnOiAnRW50ZXIgdGhlIFVSTCBvZiB0aGUgaW1hZ2UnLFxyXG4gICAgcmVzdWx0ICgpIHtcclxuICAgICAgY29uc3QgdXJsID0gd2luZG93LnByb21wdCh0aGlzLnByb21wdE1zZylcclxuICAgICAgaWYgKHVybCkgZXhlYygnaW5zZXJ0SW1hZ2UnLCB1cmwpXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IChjb21tYW5kLCB2YWx1ZSA9IG51bGwpID0+IHtcclxuICBkb2N1bWVudC5leGVjQ29tbWFuZChjb21tYW5kLCBmYWxzZSwgdmFsdWUpXHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaW1hZ2VFZGl0QWN0aW9ucyhjYikge1xyXG4gIHJldHVybiBbe1xyXG4gICAgbmFtZTogJ2Zsb2F0LWxlZnQnLFxyXG4gICAgaWNvbjogYDxkaXYgc3R5bGU9XCJwb3NpdGlvbjpyZWxhdGl2ZVwiPlxyXG4gICAgICA8aSBjbGFzcz1cImZhIGZhLWFsaWduLXJpZ2h0XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPlxyXG4gICAgICA8ZGl2IHN0eWxlPVwicG9zaXRpb246YWJzb2x1dGU7IGxlZnQ6LTRweDt0b3A6MDsgdHJhbnNmb3JtOiBzY2FsZSgwLjUpOyB0cmFuc2Zvcm0tb3JpZ2luOiBsZWZ0IHRvcFwiPlxyXG4gICAgICAgIDxpIGNsYXNzPVwiZmEgZmEtcGljdHVyZS1vXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PmAsXHJcbiAgICB0aXRsZTogJ0zDpXQgYmlsZGVuIGZseXRhIHbDpG5zdGVyIG9tIHRleHQnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBjYignZmxvYXQtbGVmdCcpXHJcbiAgfSwge1xyXG4gICAgbmFtZTogJ2Zsb2F0LXJpZ2h0JyxcclxuICAgIGljb246IGA8ZGl2IHN0eWxlPVwicG9zaXRpb246cmVsYXRpdmVcIj5cclxuICAgICAgPGkgY2xhc3M9XCJmYSBmYS1hbGlnbi1sZWZ0XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPlxyXG4gICAgICA8ZGl2IHN0eWxlPVwicG9zaXRpb246YWJzb2x1dGU7IHJpZ2h0Oi00cHg7dG9wOjA7IHRyYW5zZm9ybTogc2NhbGUoMC41KTsgdHJhbnNmb3JtLW9yaWdpbjogcmlnaHQgdG9wXCI+XHJcbiAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS1waWN0dXJlLW9cIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+YCxcclxuICAgIHRpdGxlOiAnTMOldCBiaWxkZW4gZmx5dGEgaMO2Z2VyIG9tIHRleHQnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBjYignZmxvYXQtcmlnaHQnKVxyXG4gIH0sIHtcclxuICAgIG5hbWU6ICd1bmZsb2F0JyxcclxuICAgIGljb246IGA8ZGl2IHN0eWxlPVwicG9zaXRpb246cmVsYXRpdmU7XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+XHJcbiAgICAgIDxkaXYgc3R5bGU9XCJwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtsZWZ0OjBcIj4mIzgyNTQ7PC9kaXY+XHJcbiAgICAgIDxkaXYgc3R5bGU9XCJwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDpsZWZ0OjA7dHJhbnNmb3JtOiBzY2FsZSgwLjUpOyB0cmFuc2Zvcm0tb3JpZ2luOiBsZWZ0IGJvdHRvbVwiPlxyXG4gICAgICAgIDxpIGNsYXNzPVwiZmEgZmEtcGljdHVyZS1vXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBzdHlsZT1cInBvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MFwiPl88L2Rpdj5cclxuICAgIDwvZGl2PmAsXHJcbiAgICB0aXRsZTogJ1BsYWNlcmEgYmlsZGVuIHDDpSBlZ2VuIHJhZCcsXHJcbiAgICByZXN1bHQ6ICgpID0+IGNiKCd1bmZsb2F0JylcclxuICB9XTtcclxufVxyXG5cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgZXhlYyBmcm9tICcuL2V4ZWMnO1xyXG5pbXBvcnQge3dhc2hIdG1sfSBmcm9tICcuL3dhc2gtaHRtbCc7XHJcbmltcG9ydCBpbWFnZUVkaXRBY3Rpb25zIGZyb20gJy4vaW1hZ2UtZWRpdC1hY3Rpb25zJztcclxuaW1wb3J0IGFjdGlvbnMgZnJvbSAnLi9hY3Rpb25zJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQWN0aW9uIHtcclxuICBuYW1lPzogc3RyaW5nO1xyXG4gIGljb246IHN0cmluZztcclxuICB0aXRsZTogc3RyaW5nO1xyXG4gIHByb21wdE1zZz86IHN0cmluZztcclxuICByZXN1bHQ6IChldjogUmVhY3QuTW91c2VFdmVudDxIVE1MQnV0dG9uRWxlbWVudD4sIGNvbXBvbmVudDogV3lzaXd5ZykgPT4gdm9pZDtcclxufVxyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBjbGFzc05hbWU/OiBzdHJpbmc7XHJcbiAgaHRtbDogc3RyaW5nO1xyXG4gIG9uQ2hhbmdlPzogKGh0bWw6IHN0cmluZykgPT4gdm9pZDtcclxuICByZXBvcnROdW1DaGFycz86IChudW1DaGFyczogbnVtYmVyKSA9PiB2b2lkO1xyXG4gIG1heENoYXJzPzogbnVtYmVyO1xyXG4gIGRlZmF1bHRBY3Rpb25zPzoge1tuYW1lOiBzdHJpbmddOiBBY3Rpb259O1xyXG4gIGFjdGlvbnM/OiAoUGFydGlhbDxBY3Rpb24+IHwgc3RyaW5nKVtdO1xyXG4gIHJlYWRPbmx5PzogYm9vbGVhbjtcclxufVxyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICBmb2N1c1JlY3Q6IENsaWVudFJlY3QgfCBudWxsO1xyXG59XHJcblxyXG5jb25zdCBjbGFzc2VzID0ge1xyXG4gIGFjdGlvbmJhcjogJ3d5c2l3eWctYWN0aW9uYmFyJyxcclxuICBidXR0b246ICd3eXNpd3lnLWJ1dHRvbicsXHJcbiAgY29udGVudDogJ3d5c2l3eWctY29udGVudCcsXHJcbiAgZm9jdXNyZWN0OiAnd3lzaXd5Zy1mb2N1c3JlY3QnLFxyXG4gIGZvY3VzcG9pbnQ6ICd3eXNpd3lnLWZvY3VzcG9pbnQnLFxyXG4gIHJlYWRvbmx5Q29udGVudDogJ3d5c2l3eWctY29udGVudCByZWFkb25seSdcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFd5c2l3eWcgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsU3RhdGU+IHtcclxuICBjb250ZW50RGl2OiBIVE1MRGl2RWxlbWVudDtcclxuICBmb2N1c1JlY3REaXY6IEhUTUxEaXZFbGVtZW50O1xyXG4gIGZvY3VzRWxlbTogSFRNTEVsZW1lbnQgfCBudWxsO1xyXG4gIGNvcm5lcjogc3RyaW5nO1xyXG4gIHJlc2l6ZVN0YXJ0WDogbnVtYmVyO1xyXG5cclxuICBjb25zdHJ1Y3RvciAocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB0aGlzLnN0YXRlID0ge2ZvY3VzUmVjdDogbnVsbH07XHJcbiAgICB0aGlzLm9uRm9jdXMgPSB0aGlzLm9uRm9jdXMuYmluZCh0aGlzKTtcclxuICAgIHRoaXMub25CbHVyID0gdGhpcy5vbkJsdXIuYmluZCh0aGlzKTtcclxuICAgIHRoaXMub25Nb3VzZURvd24gPSB0aGlzLm9uTW91c2VEb3duLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLm9uTW91c2VNb3ZlID0gdGhpcy5vbk1vdXNlTW92ZS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5vbk1vdXNlVXAgPSB0aGlzLm9uTW91c2VVcC5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICBpZiAoIXRoaXMucHJvcHMucmVhZE9ubHkpIHtcclxuICAgICAgQXJyYXkuZnJvbSh0aGlzLmNvbnRlbnREaXYucXVlcnlTZWxlY3RvckFsbChcImltZyxhXCIpKS5tYXAoZWxlbSA9PiAoZWxlbSBhcyAoSFRNTEltYWdlRWxlbWVudCB8IEhUTUxBbmNob3JFbGVtZW50KSkpXHJcbiAgICAgIC5mb3JFYWNoKGVsZW0gPT4ge1xyXG4gICAgICAgIGVsZW0udGFiSW5kZXggPSAxO1xyXG4gICAgICAgIGVsZW0ub25mb2N1cyA9IHRoaXMub25Gb2N1cztcclxuICAgICAgICBlbGVtLm9uYmx1ciA9IHRoaXMub25CbHVyIGFzIGFueTtcclxuICAgICAgfSk7XHJcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud3lzaXd5Zy1jb250ZW50XCIpLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMub25Nb3VzZURvd24pO1xyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnd5c2l3eWctY29udGVudFwiKS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLm9uTW91c2VNb3ZlKTtcclxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53eXNpd3lnLWNvbnRlbnRcIikuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMub25Nb3VzZVVwKTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnByb3BzLnJlcG9ydE51bUNoYXJzKSB7XHJcbiAgICAgIHRoaXMucHJvcHMucmVwb3J0TnVtQ2hhcnMoKHRoaXMuY29udGVudERpdiAmJiB0aGlzLmNvbnRlbnREaXYuaW5uZXJUZXh0ICYmIHRoaXMuY29udGVudERpdi5pbm5lclRleHQubGVuZ3RoKSB8fCAwKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcclxuICAgIEFycmF5LmZyb20odGhpcy5jb250ZW50RGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCJpbWcsYVwiKSkubWFwKGVsZW0gPT4gKGVsZW0gYXMgKEhUTUxJbWFnZUVsZW1lbnQgfCBIVE1MQW5jaG9yRWxlbWVudCkpKVxyXG4gICAgLmZvckVhY2goZWxlbSA9PiB7XHJcbiAgICAgIGVsZW0udGFiSW5kZXggPSAxO1xyXG4gICAgICBlbGVtLm9uZm9jdXMgPSB0aGlzLm9uRm9jdXM7XHJcbiAgICAgIGVsZW0ub25ibHVyID0gdGhpcy5vbkJsdXIgYXMgYW55O1xyXG4gICAgfSk7XHJcbiAgICBpZiAodGhpcy5wcm9wcy5yZXBvcnROdW1DaGFycykge1xyXG4gICAgICB0aGlzLnByb3BzLnJlcG9ydE51bUNoYXJzKCh0aGlzLmNvbnRlbnREaXYgJiYgdGhpcy5jb250ZW50RGl2LmlubmVyVGV4dCAmJiB0aGlzLmNvbnRlbnREaXYuaW5uZXJUZXh0Lmxlbmd0aCkgfHwgMCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud3lzaXd5Zy1jb250ZW50XCIpLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMub25Nb3VzZURvd24pO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53eXNpd3lnLWNvbnRlbnRcIikucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5vbk1vdXNlTW92ZSk7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnd5c2l3eWctY29udGVudFwiKS5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5vbk1vdXNlVXApO1xyXG4gIH1cclxuXHJcbiAgc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5leHRQcm9wczogUHJvcHMsIG5leHRTdGF0ZTogU3RhdGUpIHtcclxuICAgIC8vdGhpcy5jb250ZW50RGl2Lm9uZm9jdXMgPSB0aGlzLm9uRm9jdXM7XHJcbiAgICAvL3RoaXMuY29udGVudERpdi5vbmJsdXIgPSB0aGlzLm9uQmx1cjtcclxuICAgIHJldHVybiAhdGhpcy5jb250ZW50RGl2IHx8XHJcbiAgICAgIG5leHRTdGF0ZSAhPSB0aGlzLnN0YXRlIHx8XHJcbiAgICAgIG5leHRQcm9wcy5yZWFkT25seSAhPT0gdGhpcy5wcm9wcy5yZWFkT25seSB8fFxyXG4gICAgICB3YXNoSHRtbChuZXh0UHJvcHMuaHRtbCkgIT09IHdhc2hIdG1sKHRoaXMuY29udGVudERpdi5pbm5lckhUTUwpO1xyXG4gIH1cclxuXHJcbiAgdHJpZ2dlck9uQ2hhbmdlKGh0bWw6IHN0cmluZykge1xyXG4gICAgdGhpcy5wcm9wcy5vbkNoYW5nZSAmJiB0aGlzLnByb3BzLm9uQ2hhbmdlKHdhc2hIdG1sKGh0bWwpKTtcclxuICB9XHJcblxyXG4gIG9uRm9jdXMoZXY6IEZvY3VzRXZlbnQpIHtcclxuICAgIGNvbnN0IGVsZW0gPSBldi50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICBpZiAoIWVsZW0gfHwgIWVsZW0udGFnTmFtZSkgcmV0dXJuO1xyXG4gICAgaWYgKGVsZW0udGFnTmFtZSAhPT0gJ0lNRycgJiYgZWxlbS50YWdOYW1lICE9PSAnQScpIHJldHVybjtcclxuICAgIGNvbnN0IGNvbnRlbnRQYXJlbnQgPSB0aGlzLmNvbnRlbnREaXYucGFyZW50RWxlbWVudDtcclxuICAgIGNvbnN0IG5ld1N0YXRlID0ge1xyXG4gICAgICBmb2N1c1JlY3Q6IGdldFJlbGF0YXRpdmVDbGllbnRSZWN0KGNvbnRlbnRQYXJlbnQsIGVsZW0pLFxyXG4gICAgfVxyXG4gICAgc3dpdGNoIChlbGVtLnRhZ05hbWUpIHtcclxuICAgICAgY2FzZSAnQSc6XHJcbiAgICAgIGNhc2UgJ0lNRyc6XHJcblxyXG4gICAgICBkZWZhdWx0OiBicmVhaztcclxuICAgIH1cclxuICAgIHRoaXMuc2V0U3RhdGUobmV3U3RhdGUpO1xyXG4gICAgdGhpcy5mb2N1c0VsZW0gPSBlbGVtO1xyXG4gIH1cclxuXHJcbiAgb25CbHVyKGV2OiBSZWFjdC5Gb2N1c0V2ZW50PEhUTUxEaXZFbGVtZW50Pikge1xyXG4gICAgLyppZiAoZXYucmVsYXRlZFRhcmdldCkge1xyXG4gICAgICBjb25zdCByZWxhdGVkVGFyZ2V0ID0gZXYucmVsYXRlZFRhcmdldCBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgaWYgKHJlbGF0ZWRUYXJnZXQuY2xhc3NOYW1lICYmIHJlbGF0ZWRUYXJnZXQuY2xhc3NOYW1lLnNwbGl0KCcgJykuaW5kZXhPZihjbGFzc2VzLmJ1dHRvbikgPj0gMCkge1xyXG4gICAgICAgIC8vIEEgaW1hZ2UgYWN0aW9uIGJ1dHRvbiB3YXMgcHJlc3NlZFxyXG4gICAgICAgIHNldFxyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgfSovXHJcbiAgICBpZiAoKGV2LnRhcmdldCA9PT0gdGhpcy5mb2N1c0VsZW0gJiYgZXYucmVsYXRlZFRhcmdldCAhPT0gdGhpcy5mb2N1c1JlY3REaXYpIHx8XHJcbiAgICAgIGV2LnRhcmdldCA9PT0gdGhpcy5mb2N1c1JlY3REaXYpXHJcbiAgICB7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe2ZvY3VzUmVjdDogbnVsbH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbWFrZUNsaWNrYWJsZShlbGVtOiBIVE1MRWxlbWVudCkge1xyXG4gICAgIGVsZW0udGFiSW5kZXggPSAxO1xyXG4gIH1cclxuXHJcbiAgb25Nb3VzZURvd24oZXYpIHtcclxuICAgIGlmICgoZXYudGFyZ2V0LmNsYXNzTmFtZSB8fCBcIlwiKS5zcGxpdCgnICcpLmluZGV4T2YoY2xhc3Nlcy5mb2N1c3BvaW50KSA+PSAwKSB7XHJcbiAgICAgIGNvbnN0IGNvcm5lciA9IHRoaXMuZ2V0UmVjdENvcm5lcihldik7XHJcbiAgICAgIHRoaXMuY29ybmVyID0gY29ybmVyO1xyXG4gICAgICB0aGlzLnJlc2l6ZVN0YXJ0WCA9IGV2LmNsaWVudFg7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbk1vdXNlTW92ZShldjogTW91c2VFdmVudCkge1xyXG4gICAgaWYgKHRoaXMuY29ybmVyICYmIHRoaXMuc3RhdGUuZm9jdXNSZWN0ICYmIHRoaXMuZm9jdXNFbGVtKSB7XHJcbiAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIC8vIFRPRE86IFLDpGtuYSB1dCBiYXNlcmF0IHDDpSB0aGlzLmNvcm5lciBodXIgYmlsZGVucyBzdG9ybGVrIGJvcmRlIMOkbmRyYXMuXHJcbiAgICAgIC8vIExldGEgdXBwIGJpbGRlbiBwZXIgSUQgZnLDpW4gdGhpcy5jb250ZW50RGl2XHJcbiAgICAgIC8vIFPDpHR0IERJVjplbnMgc3R5bGUgYXR0cmlidXQgd2lkdGggdGlsbCBueSB3aWR0aC5cclxuICAgICAgLy8gT20gRElWOmVuIHJlZGFuIGhhZGUgaGVpZ2h0LCBzw6R0dCBueSBoZWlnaHQgbWVkIHNhbW1hIGFzcGVjdCByYXRpbyBzb20gaW5uYW4sXHJcbiAgICAgIC8vIGFubmFycywgc8OkdHQgaW50ZSBoZWlnaHQgYWxscyAoZWxsZXIgbcO2amxpZ3R2aXMgdGlsbCBhdXRvKSlcclxuICAgICAgY29uc3QgZm9jdXNSZWN0ID0gdGhpcy5mb2N1c1JlY3REaXYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgIGlmIChmb2N1c1JlY3Qud2lkdGggPCAzMikgcmV0dXJuO1xyXG4gICAgICAvL2NvbnN0IGN1cnJlbnRXaWR0aCA9IGZvY3VzUmVjdC53aWR0aDtcclxuICAgICAgLy9jb25zdCBjdXJyZW50SGVpZ2h0ID0gZm9jdXNSZWN0LmhlaWdodDtcclxuICAgICAgLy9jb25zdCBoYXNIZWlnaHRTdHlsZSA9ICF0aGlzLmZvY3VzRWxlbS5zdHlsZS5oZWlnaHQgfHwgdGhpcy5mb2N1c0VsZW0uc3R5bGUuaGVpZ2h0ID09PSBcImF1dG9cIjtcclxuICAgICAgY29uc3QgbmV3V2lkdGggPSBNYXRoLm1heCgzMiwgdGhpcy5jb3JuZXIuZW5kc1dpdGgoJ2wnKSA/XHJcbiAgICAgICAgZm9jdXNSZWN0LndpZHRoICsgKHRoaXMucmVzaXplU3RhcnRYIC0gZXYuY2xpZW50WCkgOlxyXG4gICAgICAgIC8vZm9jdXNSZWN0LnJpZ2h0IC0gZXYuY2xpZW50WCA6XHJcbiAgICAgICAgZm9jdXNSZWN0LndpZHRoIC0gKHRoaXMucmVzaXplU3RhcnRYIC0gZXYuY2xpZW50WCkpO1xyXG4gICAgICB0aGlzLnJlc2l6ZVN0YXJ0WCA9IGV2LmNsaWVudFg7XHJcbiAgICAgICAgLy9ldi5jbGllbnRYIC0gZm9jdXNSZWN0LmxlZnQ7XHJcbiAgICAgIGNvbnN0IGZhY3RvciA9IG5ld1dpZHRoIC8gZm9jdXNSZWN0LndpZHRoO1xyXG4gICAgICBjb25zdCBuZXdIZWlnaHQgPSBmb2N1c1JlY3QuaGVpZ2h0ICogZmFjdG9yO1xyXG4gICAgICB0aGlzLmZvY3VzRWxlbS5zdHlsZS53aWR0aCA9IG5ld1dpZHRoICsgXCJweFwiO1xyXG4gICAgICB0aGlzLmZvY3VzRWxlbS5zdHlsZS5oZWlnaHQgPSBuZXdIZWlnaHQgKyBcInB4XCI7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgIGZvY3VzUmVjdDogZ2V0UmVsYXRhdGl2ZUNsaWVudFJlY3QodGhpcy5jb250ZW50RGl2LnBhcmVudEVsZW1lbnQsIHRoaXMuZm9jdXNFbGVtKSxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbk1vdXNlVXAoZXYpIHtcclxuICAgIGlmICh0aGlzLmNvcm5lciAmJiB0aGlzLnN0YXRlLmZvY3VzUmVjdCAmJiB0aGlzLmZvY3VzRWxlbSkge1xyXG4gICAgICB0aGlzLmNvcm5lciA9IG51bGw7XHJcbiAgICAgIHRoaXMudHJpZ2dlck9uQ2hhbmdlKHRoaXMuY29udGVudERpdi5pbm5lckhUTUwpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0UmVjdENvcm5lcihldikge1xyXG4gICAgZm9yIChjb25zdCBjbGFzc05hbWUgb2YgKGV2LnRhcmdldC5jbGFzc05hbWUgfHwgJycpLnNwbGl0KCcgJykpIHtcclxuICAgICAgc3dpdGNoIChjbGFzc05hbWUpIHtcclxuICAgICAgICBjYXNlICdmcHVsJzpcclxuICAgICAgICAgIHJldHVybiAndWwnO1xyXG4gICAgICAgIGNhc2UgJ2ZwdXInOlxyXG4gICAgICAgICAgcmV0dXJuICdmcHVyJztcclxuICAgICAgICBjYXNlICdmcGxyJzpcclxuICAgICAgICAgIHJldHVybiAnbHInO1xyXG4gICAgICAgIGNhc2UgJ2ZwbGwnOlxyXG4gICAgICAgICAgcmV0dXJuICdsbCc7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgZXhlY0ltYWdlRWRpdEFjdGlvbiAoY21kOiBzdHJpbmcpIHtcclxuICAgIC8vY29uc29sZS5sb2coY21kKTtcclxuICAgIGlmICghdGhpcy5mb2N1c0VsZW0pIHJldHVybjtcclxuICAgIC8vY29uc29sZS5sb2coXCJkb2luZyBpdFwiKTtcclxuICAgIHN3aXRjaCAoY21kKSB7XHJcbiAgICAgIGNhc2UgJ2Zsb2F0LWxlZnQnOlxyXG4gICAgICAgIHRoaXMuZm9jdXNFbGVtLnN0eWxlLmNzc0Zsb2F0ID0gJ2xlZnQnO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdmbG9hdC1yaWdodCc6XHJcbiAgICAgICAgdGhpcy5mb2N1c0VsZW0uc3R5bGUuY3NzRmxvYXQgPSAncmlnaHQnO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICd1bmZsb2F0JzpcclxuICAgICAgICB0aGlzLmZvY3VzRWxlbS5zdHlsZS5jc3NGbG9hdCA9ICcnO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgdGhpcy50cmlnZ2VyT25DaGFuZ2UodGhpcy5jb250ZW50RGl2LmlubmVySFRNTCk7XHJcbiAgICB0aGlzLnNldFN0YXRlKHtmb2N1c1JlY3Q6IGdldFJlbGF0YXRpdmVDbGllbnRSZWN0KHRoaXMuY29udGVudERpdi5wYXJlbnRFbGVtZW50LCB0aGlzLmZvY3VzRWxlbSl9KTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IGRlZmF1bHRBY3Rpb25zID0gdGhpcy5wcm9wcy5kZWZhdWx0QWN0aW9ucyB8fCBhY3Rpb25zO1xyXG4gICAgbGV0IGFjdGlvbnNUb1VzZSA9IHRoaXMucHJvcHMuYWN0aW9ucyA/IHRoaXMucHJvcHMuYWN0aW9ucy5tYXAoYWN0aW9uID0+XHJcbiAgICAgIHR5cGVvZiBhY3Rpb24gPT09ICdzdHJpbmcnID9cclxuICAgICAgICBkZWZhdWx0QWN0aW9uc1thY3Rpb25dIDpcclxuICAgICAgICBkZWZhdWx0QWN0aW9uc1thY3Rpb24ubmFtZV0gP1xyXG4gICAgICAgICAgeyAuLi5kZWZhdWx0QWN0aW9uc1thY3Rpb24ubmFtZV0sIC4uLmFjdGlvbiB9IDpcclxuICAgICAgICAgIGFjdGlvbilcclxuICAgIDogT2JqZWN0LmtleXMoZGVmYXVsdEFjdGlvbnMpLm1hcChhY3Rpb24gPT4gZGVmYXVsdEFjdGlvbnNbYWN0aW9uXSk7XHJcblxyXG4gICAgaWYgKHRoaXMuc3RhdGUuZm9jdXNSZWN0KSB7XHJcbiAgICAgIGFjdGlvbnNUb1VzZSA9IGFjdGlvbnNUb1VzZS5jb25jYXQoaW1hZ2VFZGl0QWN0aW9ucyhjbWQgPT4gdGhpcy5leGVjSW1hZ2VFZGl0QWN0aW9uKGNtZCkpKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB7Zm9jdXNSZWN0fSA9IHRoaXMuc3RhdGU7XHJcbiAgICBjb25zdCB7cmVhZE9ubHksIHJlcG9ydE51bUNoYXJzLCBtYXhDaGFyc30gPSB0aGlzLnByb3BzO1xyXG5cclxuICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT17dGhpcy5wcm9wcy5jbGFzc05hbWV9PlxyXG4gICAgICB7IXJlYWRPbmx5ICYmIDxkaXYgY2xhc3NOYW1lPXtjbGFzc2VzLmFjdGlvbmJhcn0+XHJcbiAgICAgICAge2FjdGlvbnNUb1VzZS5tYXAoKGFjdGlvbiwgaWR4KSA9PlxyXG4gICAgICAgICAgPGJ1dHRvbiBrZXk9e2lkeH0gY2xhc3NOYW1lPXtjbGFzc2VzLmJ1dHRvbn1cclxuICAgICAgICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3tfX2h0bWw6IGFjdGlvbi5pY29ufX1cclxuICAgICAgICAgICAgdGl0bGU9e2FjdGlvbi50aXRsZX1cclxuICAgICAgICAgICAgb25Nb3VzZURvd249e2V2PT57YWN0aW9uLnJlc3VsdChldiwgdGhpcyl9fVxyXG4gICAgICAgICAgICBvbk1vdXNlVXA9e2V2PT5zZXRUaW1lb3V0KCgpPT50aGlzLmNvbnRlbnREaXYuZm9jdXMoKSwgMTApfVxyXG4gICAgICAgICAgLz4pfVxyXG4gICAgICA8L2Rpdj59XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtyZWFkT25seSA/IGNsYXNzZXMucmVhZG9ubHlDb250ZW50IDogY2xhc3Nlcy5jb250ZW50fSBzdHlsZT17e3Bvc2l0aW9uOiAncmVsYXRpdmUnLCB0b3A6IDAsIGxlZnQ6IDB9fT5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImVkaXRvclwiXHJcbiAgICAgICAgICByZWY9e2RpdiA9PiB0aGlzLmNvbnRlbnREaXYgPSBkaXZ9XHJcbiAgICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTD17e19faHRtbDogd2FzaEh0bWwodGhpcy5wcm9wcy5odG1sKX19XHJcbiAgICAgICAgICBjb250ZW50RWRpdGFibGU9eyFyZWFkT25seX1cclxuICAgICAgICAgIG9uUGFzdGU9e2V2ID0+IHtcclxuICAgICAgICAgICAgaWYgKCFpc05hTihtYXhDaGFycykpIHtcclxuICAgICAgICAgICAgICBjb25zdCB7dGFyZ2V0LCBjdXJyZW50VGFyZ2V0fSA9IGV2O1xyXG4gICAgICAgICAgICAgIC8vY29uc3QgdGV4dEJlaW5nT3ZlcndyaXR0ZW4gPSAodGFyZ2V0IGFzIGFueSkuaW5uZXJUZXh0IHx8IFwiXCI7XHJcbiAgICAgICAgICAgICAgY29uc3QgZWRpdG9yVGV4dCA9IChjdXJyZW50VGFyZ2V0ICYmIGN1cnJlbnRUYXJnZXQuaW5uZXJUZXh0KSB8fCBcIlwiO1xyXG4gICAgICAgICAgICAgIGNvbnN0IHRleHRCZWluZ1Bhc3RlZCA9IGV2LmNsaXBib2FyZERhdGEuZ2V0RGF0YShcInRleHQvcGxhaW5cIikgfHwgXCJcIjtcclxuICAgICAgICAgICAgICBpZiAoZWRpdG9yVGV4dC5sZW5ndGggKyB0ZXh0QmVpbmdQYXN0ZWQubGVuZ3RoID4gbWF4Q2hhcnMpIHtcclxuICAgICAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9fVxyXG4gICAgICAgICAgb25LZXlVcD17cmVwb3J0TnVtQ2hhcnMgPyBldiA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHtpbm5lclRleHR9ID0gKGV2LnRhcmdldCBhcyBhbnkpO1xyXG4gICAgICAgICAgICByZXBvcnROdW1DaGFycyhpbm5lclRleHQgPyBpbm5lclRleHQubGVuZ3RoIDogMCk7XHJcbiAgICAgICAgICB9IDogbnVsbH1cclxuICAgICAgICAgIG9uS2V5UHJlc3M9eyFpc05hTihtYXhDaGFycykgPyBldiA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHtpbm5lclRleHR9ID0gKGV2LnRhcmdldCBhcyBhbnkpO1xyXG4gICAgICAgICAgICBpZiAoaW5uZXJUZXh0ICYmIGlubmVyVGV4dC5sZW5ndGggPj0gbWF4Q2hhcnMpIHtcclxuICAgICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IDogbnVsbH1cclxuICAgICAgICAgIG9uSW5wdXQ9e2V2ID0+IHRoaXMudHJpZ2dlck9uQ2hhbmdlKChldi50YXJnZXQgYXMgYW55KS5pbm5lckhUTUwpfVxyXG4gICAgICAgICAgb25LZXlEb3duPXtldiA9PiB7XHJcbiAgICAgICAgICAgIGlmIChyZWFkT25seSkgcmV0dXJuO1xyXG4gICAgICAgICAgICBpZiAocmVwb3J0TnVtQ2hhcnMgJiYgZXYuY3VycmVudFRhcmdldCkge1xyXG4gICAgICAgICAgICAgIHJlcG9ydE51bUNoYXJzKChldi5jdXJyZW50VGFyZ2V0LmlubmVyVGV4dCB8fCBcIlwiKS5sZW5ndGgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiS2V5OiBcIiArIGV2LndoaWNoKTtcclxuICAgICAgICAgICAgaWYgKGV2LndoaWNoID49IDM1ICYmIGV2LndoaWNoIDw9IDQwKSB7Ly8gaG9tZS9lbmQvdXAvZG93bi9sZWZ0L3JpZ2h0XHJcbiAgICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IC8vIFByZXZlbnQgZW50aXJlIHBhZ2UgZnJvbSBzY3JvbGxpbmc/P1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChldi53aGljaCA9PT0gOSkge1xyXG4gICAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7Ly8gVEFCXHJcbiAgICAgICAgICAgICAgaWYgKGV2LnNoaWZ0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICBleGVjKFwib3V0ZGVudFwiKTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZXhlYyhcImluZGVudFwiKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAoZXYua2V5Q29kZSA9PT0gOCB8fCBldi5rZXlDb2RlID09PSA0NikgJiYgLy8gRGVsZXRlIG9yIEJhY2sgYnV0dG9uc1xyXG4gICAgICAgICAgICAgIHRoaXMuZm9jdXNFbGVtICYmIHRoaXMuc3RhdGUuZm9jdXNSZWN0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgaWYgKHRoaXMuZm9jdXNFbGVtICYmIHRoaXMuZm9jdXNFbGVtLnBhcmVudEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNFbGVtLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5mb2N1c0VsZW0pOyAvLyBSZW1vdmUgbWFya2VkIGltYWdlXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHRoaXMuZm9jdXNFbGVtID0gbnVsbDtcclxuICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtmb2N1c1JlY3Q6IG51bGx9KTtcclxuICAgICAgICAgICAgICB0aGlzLnRyaWdnZXJPbkNoYW5nZSh0aGlzLmNvbnRlbnREaXYuaW5uZXJIVE1MKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfX1cclxuICAgICAgICAvPlxyXG4gICAgICAgIHtmb2N1c1JlY3QgJiYgPGRpdlxyXG4gICAgICAgICAgcmVmPXtkaXYgPT4gdGhpcy5mb2N1c1JlY3REaXYgPSBkaXZ9XHJcbiAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzZXMuZm9jdXNyZWN0fVxyXG4gICAgICAgICAgb25CbHVyPXt0aGlzLm9uQmx1cn1cclxuICAgICAgICAgIHRhYkluZGV4PXsxfVxyXG4gICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgb3V0bGluZTogMCxcclxuICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXHJcbiAgICAgICAgICAgIHRvcDogdGhpcy5zdGF0ZS5mb2N1c1JlY3QudG9wLFxyXG4gICAgICAgICAgICBsZWZ0OiB0aGlzLnN0YXRlLmZvY3VzUmVjdC5sZWZ0LFxyXG4gICAgICAgICAgICB3aWR0aDogdGhpcy5zdGF0ZS5mb2N1c1JlY3Qud2lkdGgsXHJcbiAgICAgICAgICAgIGhlaWdodDogdGhpcy5zdGF0ZS5mb2N1c1JlY3QuaGVpZ2h0fX0+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3Nlcy5mb2N1c3BvaW50ICsgXCIgZnB1bFwifSBzdHlsZT17e3Bvc2l0aW9uOidhYnNvbHV0ZScsIHRvcDowLCBsZWZ0OjB9fSAvPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzZXMuZm9jdXNwb2ludCArIFwiIGZwdXJcIn0gc3R5bGU9e3twb3NpdGlvbjonYWJzb2x1dGUnLCB0b3A6MCwgcmlnaHQ6MH19IC8+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3Nlcy5mb2N1c3BvaW50ICsgXCIgZnBsclwifSBzdHlsZT17e3Bvc2l0aW9uOidhYnNvbHV0ZScsIGJvdHRvbTowLCByaWdodDowfX0gLz5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc2VzLmZvY3VzcG9pbnQgKyBcIiBmcGxsXCJ9IHN0eWxlPXt7cG9zaXRpb246J2Fic29sdXRlJywgYm90dG9tOjAsIGxlZnQ6MH19IC8+XHJcbiAgICAgICAgPC9kaXY+fVxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0UmVsYXRhdGl2ZUNsaWVudFJlY3QgKHBhcmVudDogSFRNTEVsZW1lbnQsIGNoaWxkOiBIVE1MRWxlbWVudCkgOiBDbGllbnRSZWN0IHtcclxuICBjb25zdCBwYXJlbnRSZWN0ID0gcGFyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gIGNvbnN0IGNoaWxkUmVjdCA9IGNoaWxkLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gIHJldHVybiB7XHJcbiAgICB0b3A6IGNoaWxkUmVjdC50b3AgLSBwYXJlbnRSZWN0LnRvcCArIHBhcmVudC5zY3JvbGxUb3AsXHJcbiAgICBsZWZ0OiBjaGlsZFJlY3QubGVmdCAtIHBhcmVudFJlY3QubGVmdCArIHBhcmVudC5zY3JvbGxMZWZ0LFxyXG4gICAgYm90dG9tOiBjaGlsZFJlY3QuYm90dG9tIC0gcGFyZW50UmVjdC50b3AgKyBwYXJlbnQuc2Nyb2xsVG9wLFxyXG4gICAgcmlnaHQ6IGNoaWxkUmVjdC5yaWdodCAtIHBhcmVudFJlY3QubGVmdCArIHBhcmVudC5zY3JvbGxMZWZ0LFxyXG4gICAgd2lkdGg6IGNoaWxkUmVjdC53aWR0aCxcclxuICAgIGhlaWdodDogY2hpbGRSZWN0LmhlaWdodFxyXG4gIH07XHJcbn1cclxuIiwiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcclxuXHJcbmNvbnN0IHBhcnNlciA9IG5ldyBET01QYXJzZXIoKTtcclxuXHJcbnR5cGUgSFRNTFBvbGljeSA9IHtbdGFnTmFtZUxvd2VyOiBzdHJpbmddOiB7W2F0dHJpYnV0ZUxvd2VyOiBzdHJpbmddOiBib29sZWFufX07XHJcblxyXG4vKiogVGFncyAvIEF0dHJpYnV0ZXMgV2hpdGVsaXN0XHJcbiAqIFxyXG4gKi9cclxuY29uc3QgSFRNTF9XQVNIX1BPTElDWTogSFRNTFBvbGljeSA9IHtcclxuICBiOiB7fSwgIC8vIGJvbGRcclxuICBpOiB7fSwgIC8vIGl0YWxpY1xyXG4gIHA6IHt9LCAgLy8gcGFyYWdyYXBoXHJcbiAgdToge30sICAvLyB1bmRlcmxpbmVcclxuICBzdHJpa2U6IHt9LCAvLyBzdHJpa2UtdGhyb3VnaFxyXG4gIHByZToge30sIC8vIHVuZm9ybWF0dGVkXHJcbiAgaDE6IHt9LCAvLyBoZWFkaW5nIDFcclxuICBoMjoge30sIC8vIGhlYWRpbmcgMlxyXG4gIGgzOiB7fSwgLy8gaGVhZGluZyAzXHJcbiAgaDQ6IHt9LCAvLyBoZWFkaW5nIDRcclxuICBoNToge30sIC8vIGhlYWRpbmcgNVxyXG4gIGltZzoge3NyYzogdHJ1ZSwgY2xhc3M6IHRydWUsIHN0eWxlOiB0cnVlLCB0YWJpbmRleDogdHJ1ZX0sIC8vIGltYWdlLiBXZSBzZXQgc3R5bGUgYW5kIHRhYmluZGV4IG91cnNlbHZlcy4gQWNjZXB0IHRoYXQuXHJcbiAgYToge2hyZWY6IHRydWUsIHRhcmdldDogdHJ1ZSwgdGFiaW5kZXg6IHRydWV9LCAvLyBsaW5rXHJcbiAgdWw6IHt9LCAvLyBVbm9yZGVyZWQgbGlzdFxyXG4gIG9sOiB7fSwgLy8gT3JkZXJlZCBsaXN0XHJcbiAgbGk6IHt9LCAvLyBsaXN0IGl0ZW1cclxuICBocjoge30sIC8vIEhvcml6b250YWwgcnVsZVxyXG4gIGJyOiB7fSwgLy8gQnJlYWsgbGluZVxyXG4gIGRpdjoge30sLy8gT2Ygc29tZSByZWFzb24sIGRpdnMgYXJlIHNvbWV0aW1lcyBpbnNlcnRlZCB3aGVuIHByZXNzaW5nIEVOVEVSIGluIHRoZSB3eXNpd3lnIGVkaXRvci5cclxuICBzcGFuOiB7fSwvLyBTcGFucyBhcmUgaGFybWxlc3MsIGp1c3QgcmVtb3ZlIHRoZWlyIHN0eWxlIGFuZCBvdGhlciBhdHRyaWJ1dGVzIGFuZCBJIGZlZWwgZ3JlYXQuXHJcbiAgLy8gdGFibGUgdGFnczpcclxuICB0YWJsZToge2JvcmRlcjogdHJ1ZX0sXHJcbiAgdGJvZHk6IHt9LFxyXG4gIHRoZWFkOiB7fSxcclxuICB0Zm9vdDoge30sXHJcbiAgdHI6IHt9LFxyXG4gIHRkOiB7aGVhZGVyczogdHJ1ZSwgY29sc3BhbjogdHJ1ZSwgcm93c3BhbjogdHJ1ZX0sXHJcbiAgdGg6IHthYmJyOiB0cnVlLCBoZWFkZXJzOiB0cnVlLCBzY29wZTogdHJ1ZSwgc29ydGVkOiB0cnVlLCBjb2xzcGFuOiB0cnVlLCByb3dzcGFuOiB0cnVlfVxyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHdhc2hIdG1sIChodG1sOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gIGNvbnN0IGRvYyA9IHBhcnNlci5wYXJzZUZyb21TdHJpbmcoaHRtbCwgXCJ0ZXh0L2h0bWxcIik7XHJcbiAgY29uc3Qge2NoaWxkTm9kZXN9ID0gZG9jLmJvZHk7XHJcbiAgbGV0IG1vZGlmaWVkID0gZmFsc2U7XHJcbiAgZm9yIChsZXQgaT0wOyBpPGNoaWxkTm9kZXMubGVuZ3RoOyArK2kpIHtcclxuICAgIGlmICh3YXNoTm9kZShjaGlsZE5vZGVzLml0ZW0oaSkpKSB7XHJcbiAgICAgIG1vZGlmaWVkID0gdHJ1ZTtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIG1vZGlmaWVkID9cclxuICAgIGRvYy5ib2R5LmlubmVySFRNTCA6XHJcbiAgICBodG1sOyAvLyBCeSByZXR1cm5pbmcgdGhlIG9yaWdpbmFsIEhUTUwgc3RyaW5nLCB3ZSBzcGFyZSB0aGUgdXNlciBmcm9tIHJlZnJlc2hpbmcgdGhlIGVkaXQgYXJlYSxcclxuICAgICAgICAgIC8vIHdoaWNoIHdvdWxkIG90aGVyd2lzZSBwdXQgdGhlIGN1cnNvciBhdCB0aGUgdG9wLCBsb3NpbmcgdGhlIHBvc2l0aW9uIHdoZXJlIHVzZXIgd2hlcmUuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHdhc2hOb2RlKG5vZGU6IE5vZGUgfCBFbGVtZW50IHwgSFRNTEVsZW1lbnQpOiBib29sZWFuIHtcclxuICBsZXQgbW9kaWZpZWQgPSBmYWxzZTtcclxuICBpZiAoaXNFbGVtZW50KG5vZGUpKSB7XHJcbiAgICBpZiAod2FzaEVsZW1lbnQobm9kZSkpIHtcclxuICAgICAgbW9kaWZpZWQgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuICBpZiAod2FzaENoaWxkTm9kZXMobm9kZSkpIHtcclxuICAgIG1vZGlmaWVkID0gdHJ1ZTtcclxuICB9XHJcbiAgcmV0dXJuIG1vZGlmaWVkO1xyXG59XHJcblxyXG5mdW5jdGlvbiB3YXNoQ2hpbGROb2Rlcyhub2RlOiBOb2RlKSB7XHJcbiAgbGV0IG1vZGlmaWVkID0gZmFsc2U7XHJcbiAgY29uc3Qge2NoaWxkTm9kZXN9ID0gbm9kZTtcclxuICBmb3IgKGxldCBpPTA7IGk8Y2hpbGROb2Rlcy5sZW5ndGg7ICsraSkge1xyXG4gICAgaWYgKHdhc2hOb2RlKGNoaWxkTm9kZXMuaXRlbShpKSkpIHtcclxuICAgICAgbW9kaWZpZWQgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gbW9kaWZpZWQ7XHJcbn0gXHJcblxyXG4vKiogUmVwbGFjZSBhbiBlbGVtZW50IHdpdGggaXRzIGNoaWxkIG5vZGVzLlxyXG4gKiBcclxuICovXHJcbmZ1bmN0aW9uIHJlbW92ZU1pZGRsZUVsZW1lbnQoZWxlbWVudDogRWxlbWVudCkge1xyXG4gIGNvbnN0IHtjaGlsZE5vZGVzfSA9IGVsZW1lbnQ7XHJcbiAgZm9yIChsZXQgaT0wOyBpPGNoaWxkTm9kZXMubGVuZ3RoOyArK2kpIHtcclxuICAgIGVsZW1lbnQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoY2hpbGROb2Rlcy5pdGVtKGkpLCBlbGVtZW50KTtcclxuICB9XHJcbiAgZWxlbWVudC5yZW1vdmUoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gd2FzaEVsZW1lbnQoZWxlbWVudDogRWxlbWVudCk6IGJvb2xlYW4ge1xyXG4gIGNvbnN0IHBvbGljeSA9IGVsZW1lbnQudGFnTmFtZSAmJiBIVE1MX1dBU0hfUE9MSUNZW2VsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpXTtcclxuICBpZiAoIXBvbGljeSkge1xyXG4gICAgY29uc29sZS53YXJuKFwiV3lzaXd5Zzogbm90IGFsbG93ZWQgdGFnXCIsIGVsZW1lbnQudGFnTmFtZSk7XHJcbiAgICB3YXNoQ2hpbGROb2RlcyhlbGVtZW50KTtcclxuICAgIHJlbW92ZU1pZGRsZUVsZW1lbnQoZWxlbWVudCk7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcbiAgbGV0IG1vZGlmaWVkID0gZmFsc2U7XHJcbiAgZm9yIChsZXQgaT0wOyBpPGVsZW1lbnQuYXR0cmlidXRlcy5sZW5ndGg7ICsraSkge1xyXG4gICAgY29uc3QgYXR0ciA9IGVsZW1lbnQuYXR0cmlidXRlcy5pdGVtKGkpO1xyXG4gICAgY29uc3QgYWxsb3dlZCA9IGF0dHIubmFtZSAmJiAhIXBvbGljeVthdHRyLm5hbWUudG9Mb3dlckNhc2UoKV07XHJcbiAgICBpZiAoIWFsbG93ZWQpIHtcclxuICAgICAgbW9kaWZpZWQgPSB0cnVlO1xyXG4gICAgICBjb25zb2xlLndhcm4oXCJXeXNpd3lnOiBub3QgYWxsb3dlZCBhdHRyaWJ1dGVcIiwgYXR0ci5uYW1lLCBcIlRhZzogXCIsIGVsZW1lbnQudGFnTmFtZSk7XHJcbiAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKGF0dHIubmFtZSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBtb2RpZmllZDtcclxufVxyXG5cclxuZnVuY3Rpb24gaXNFbGVtZW50KG5vZGU6IE5vZGUpIDogbm9kZSBpcyBFbGVtZW50IHtcclxuICByZXR1cm4gISEobm9kZSBhcyBFbGVtZW50KS50YWdOYW1lO1xyXG59XHJcbiIsImltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcclxuXHJcbmV4cG9ydCB0eXBlIFRlcm0gPSAnQVQnIHwgJ1NUJzsgLy8gc2hvdWxkIGJlIGNoYW5nZWQgaW50byBGaXJzdCBUZXJtIC8gU2Vjb25kIFRlcm1cclxuZXhwb3J0IHR5cGUgQWNhZGVtaWNZZWFyID0gc3RyaW5nOyAvLyBcIjIwMTYvMjAxN1wiLCBcIjIwMTcvMjAxOFwiLCAuLi5cclxuZXhwb3J0IHR5cGUgU2Nob29sR3JhZGUgPSBudW1iZXI7IC8vIDAtOSAoZ3J1bmRza29sYSksIDEwLTEzIChneW1uYXNpdW0pXHJcbmV4cG9ydCB0eXBlIEdyYWRlID0gJ0EnIHwgJ0InIHwgJ0MnIHwgJ0QnIHwgJ0UnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBVc2VyIHtcclxuICAgIHVzZXJuYW1lPzogc3RyaW5nO1xyXG4gICAgbWFpbDogc3RyaW5nO1xyXG4gICAgZGlzcGxheU5hbWU6IHN0cmluZztcclxuICAgIHJvbGVzOiBzdHJpbmdbXTtcclxuICAgIHNjaG9vbEdyYWRlPzogbnVtYmVyO1xyXG4gICAgc2Nob29sPzogc3RyaW5nO1xyXG4gICAgc2Nob29sVHlwZT86IHN0cmluZztcclxuICAgIHR1dG9yRm9yPzogc3RyaW5nO1xyXG4gICAgZ3JvdXBzPzogc3RyaW5nW107XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQWNhZGVtaWNZZWFyU3RydWN0dXJlXHJcbntcclxuIGFjYWRlbWljWWVhciA6IEFjYWRlbWljWWVhcjtcclxuIHN0YXJ0RGF0ZTogbW9tZW50Lk1vbWVudDtcclxuIGVuZERhdGU6IG1vbWVudC5Nb21lbnQ7XHJcbiBhY2FkZW1pY1N0YXJ0V2VlazogbnVtYmVyO1xyXG4gYWNhZGVtaWNFbmRXZWVrOiBudW1iZXI7XHJcbiBob2xpZGF5czoge3N0YXJ0RGF0ZTogc3RyaW5nLCBlbmREYXRlOiBzdHJpbmd9W107XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgTGVhcm5pbmdNb2R1bGVUYXNrcyB7XHJcbiAgICBtb2R1bGVOYW1lOiBzdHJpbmc7XHJcbiAgICB1cmw/OiBzdHJpbmc7XHJcbiAgICBzdWJqZWN0OiBTY2hvb2xTdWJqZWN0O1xyXG4gICAgY29tbW9uVGFza3M/OiBMZWFybmluZ1Rhc2tbXTtcclxuICAgIGxlYXJuaW5nR29hbHM6IExlYXJuaW5nR29hbFtdO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIExlYXJuaW5nR29hbCB7XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICB0YXNrcz86IExlYXJuaW5nVGFza1tdO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEN1c3RvbUdvYWwge1xyXG4gIG5hbWU6IHN0cmluZyxcclxuICB1cmw6IHN0cmluZyxcclxuICBjb3Vyc2U6IHN0cmluZyxcclxuICBkZXNjcmlwdGlvbjogc3RyaW5nXHJcbn1cclxuXHJcblxyXG4vKmV4cG9ydCBpbnRlcmZhY2UgTGVhcm5pbmdHb2FsIHtcclxuICAgIGlkPzogc3RyaW5nO1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgY291cnNlSWQ/OiBzdHJpbmc7XHJcbiAgICBzdWJqZWN0SWQ/OiBzdHJpbmc7XHJcbn0qL1xyXG5cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgTGVhcm5pbmdUYXNrIHtcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIHVybD86IHN0cmluZztcclxuICAgIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xyXG4gICAgZG9uZT86IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgTGVhcm5pbmdDb3Vyc2Uge1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgdXJsPzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNjaG9vbFN1YmplY3Qge1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgY291cnNlOiBMZWFybmluZ0NvdXJzZTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENvdXJzZSB7XHJcbiAgICAvL1NjaGVtYTogXCJbeWVhcit0ZXJtK3NjaG9vbFllYXIrbmFtZV0sc29ydG9yZGVyXCI7XHJcbiAgICBpZD86IHN0cmluZztcclxuICAgIC8vYVllYXI6IHN0cmluZzsgLy8gQWNhZGVtaWMgWWVhciAvIEzDpHPDpXIgLyBcIjIwMTYvMjAxN1wiLCBcIjIwMTcvMjAxOFwiLCAuLi5cclxuICAgIC8vc2Nob29sR3JhZGU6IG51bWJlcjsgLy8gw4Vyc2t1cnMgKDAtOSBncnVuZHNrb2xhLCAxMC0xMyBneW1uYXNpdW0pLiAxMDAgPSBlaiBidW5kZXQgdGlsbCDDpXJza3Vycy5cclxuICAgIC8vdGVybT86IFRlcm07IC8vIEFUIChBdXR1bW4gVGVybSkgLyBTVCAoU3ByaW5nIFRlcm0pXHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICBwb2ludHM/OiBudW1iZXI7XHJcbiAgICBtb2R1bGVzPzogQ291cnNlTW9kdWxlW107XHJcbiAgICBsZWFybmluZ0dvYWxzPzogTGVhcm5pbmdHb2FsW107XHJcbiAgICB1cmw/OiBzdHJpbmc7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENvdXJzZU1vZHVsZSB7XHJcbiAgICBpZD86IHN0cmluZztcclxuICAgIGNvdXJzZUlkOiBzdHJpbmc7XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICByZWFkb25seSB1cmw6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBUYXJnZXRHcmFkZSB7XHJcbiAgICBpZD86IHN0cmluZztcclxuICAgIHVzZXI6IHN0cmluZztcclxuICAgIGNvdXJzZUlkPzogc3RyaW5nO1xyXG4gICAgc3ViamVjdElkPzogc3RyaW5nO1xyXG4gICAgYVllYXI/OiBBY2FkZW1pY1llYXI7IC8vIEzDpHPDpXIsIHRleCBcIjIwMTYvMjAxN1wiLiBudWxsIG1lYW5zIGZpbmFsIGdvYWwuXHJcbiAgICB0ZXJtPzogVGVybTsgLy8gbnVsbCBtZWFucyBmaW5hbCBnb2FsLlxyXG4gICAgZ3JhZGU6IEdyYWRlO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IGZ1dHVyZUFiaWxpdGllcyA9IFtcclxuICAgIFwiTMOkcmEgYXR0IGzDpHJhXCIsXHJcbiAgICBcIlNhbWFyYmV0YVwiLFxyXG4gICAgXCJBZ2VyYSBnbG9iYWx0XCIsXHJcbiAgICBcIlZpc2EgaGFuZGxpbmdza3JhZnRcIixcclxuICAgIFwiVmFyYSBpbm5vdmF0aXZcIixcclxuICAgIFwiTGV2YSBkaWdpdGFsdFwiXTtcclxuIiwiaW1wb3J0IHsgcGFyc2VRdWVyeVN0cmluZyB9IGZyb20gJy4uL3V0aWxzL3F1ZXJ5LXN0cmluZyc7XHJcbmltcG9ydCBGZWF0dXJlRGVzY3JpcHRpb25zIGZyb20gJy4vZmVhdHVyZS1mbGFncy5qc29uJztcclxuaW1wb3J0IHsgY2ZnIH0gZnJvbSAnLi4vZ2xvYmFscy9LRUQuY2ZnJztcclxuXHJcbnR5cGUgRmVhdHVyZUZsYWdzID0ge3JlYWRvbmx5IFtQIGluIGtleW9mIHR5cGVvZiBGZWF0dXJlRGVzY3JpcHRpb25zXTogYm9vbGVhbn07XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEZlYXR1cmVzIGV4dGVuZHMgRmVhdHVyZUZsYWdzIHt9XHJcblxyXG5leHBvcnQgY2xhc3MgRmVhdHVyZXMge1xyXG4gIHByaXZhdGUgX2ZlYXR1cmVzOiBGZWF0dXJlRmxhZ3M7XHJcbiAgcHJpdmF0ZSBfaW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIGlmICh0aGlzLl9pbml0aWFsaXplZCkgcmV0dXJuO1xyXG4gICAgbGV0IHR1cm5lZE9uRmVhdHVyZXMgPSAoY2ZnLktFRF9GRUFUVVJFUyB8fCBcIlwiKS5zcGxpdCgnLCcpLm1hcChuYW1lID0+IG5hbWUudHJpbSgpLnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgY29uc3QgcXVlcnkgPSBwYXJzZVF1ZXJ5U3RyaW5nKGxvY2F0aW9uLnNlYXJjaCwge3RvTG93ZXI6IHRydWV9KTtcclxuXHJcbiAgICBpZiAocXVlcnkudGVzdHZlcnNpb24pIHtcclxuICAgICAgdHVybmVkT25GZWF0dXJlcyA9IFtcIipcIl07XHJcbiAgICB9XHJcbiAgICBpZiAocXVlcnkuZmVhdHVyZXMpIHtcclxuICAgICAgdHVybmVkT25GZWF0dXJlcyA9IHF1ZXJ5LmZlYXR1cmVzXHJcbiAgICAgICAgLnNwbGl0KCcsJylcclxuICAgICAgICAubWFwKGZlYXR1cmUgPT4gZmVhdHVyZS50cmltKCkudG9Mb3dlckNhc2UoKSk7XHJcbiAgICB9XHJcbiAgICBjb25zdCB0dXJuT25BbGwgPSB0dXJuZWRPbkZlYXR1cmVzLmluY2x1ZGVzKCcqJyk7XHJcbiAgICB0aGlzLl9mZWF0dXJlcyA9IHt9IGFzIEZlYXR1cmVGbGFncztcclxuICAgIGZvciAoY29uc3QgZmVhdHVyZU5hbWUgb2YgT2JqZWN0LmtleXMoRmVhdHVyZURlc2NyaXB0aW9ucykpIHtcclxuICAgICAgdGhpcy5fZmVhdHVyZXNbZmVhdHVyZU5hbWVdID0gdHVybk9uQWxsIHx8XHJcbiAgICAgICAgdHVybmVkT25GZWF0dXJlcy5pbmNsdWRlcyhmZWF0dXJlTmFtZS50b0xvd2VyQ2FzZSgpKVxyXG4gICAgfVxyXG4gICAgdGhpcy5faW5pdGlhbGl6ZWQgPSB0cnVlOyAgICBcclxuICB9XHJcblxyXG4gIGNvbnN0cnVjdG9yICgpIHtcclxuICAgIGZvciAoY29uc3QgZmVhdHVyZU5hbWUgb2YgT2JqZWN0LmtleXMoRmVhdHVyZURlc2NyaXB0aW9ucykpIHtcclxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIGZlYXR1cmVOYW1lLCB7XHJcbiAgICAgICAgZ2V0KCkge1xyXG4gICAgICAgICAgaWYgKCF0aGlzLl9pbml0aWFsaXplZCkgdGhpcy5pbml0KCk7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5fZmVhdHVyZXNbZmVhdHVyZU5hbWVdO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0KHZhbHVlKSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZlYXR1cmUgZmxhZ3MgY2Fubm90IGJlIHNldCBoZXJlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGZlYXR1cmVzID0gbmV3IEZlYXR1cmVzKCk7XHJcbiIsImV4cG9ydCAqIGZyb20gJy4vZmVhdHVyZXMnO1xyXG4iLCJpbXBvcnQgY2ZnIGZyb20gJy4uL2dsb2JhbHMvS0VELmNmZyc7XHJcblxyXG5kZWNsYXJlIHZhciBwcm9jZXNzOiBhbnk7XHJcblxyXG5jZmcuRU5WSVJPTk1FTlQgPSBwcm9jZXNzLmVudi5FTlZJUk9OTUVOVCBhcyBcInByb2R1Y3Rpb25cIiB8IFwiZGV2ZWxvcG1lbnRcIiB8IFwidGVzdFwiO1xyXG5jZmcuS0VEX0FQSV9VUkwgPSBwcm9jZXNzLmVudi5LRURfQVBJX1VSTDsgLy8gXCJodHRwczovL2tlZGJhY2tlbmR0ZXN0LmF6dXJld2Vic2l0ZXMubmV0L2FwaS9cIlxyXG5jZmcuRURTX0FQSV9VUkwgPSBwcm9jZXNzLmVudi5FRFNfQVBJX1VSTDsgLy8gXCJodHRwczovL2Vkc3BvcnRhbG93aW5hcGkuYXp1cmV3ZWJzaXRlcy5uZXQvYXBpL1wiXHJcbmNmZy5LRURfVE9LRU5fVVJMID0gcHJvY2Vzcy5lbnYuS0VEX1RPS0VOX1VSTDsgLy8gXCJodHRwczovL2tlZGF1dGh0ZXN0LmF6dXJld2Vic2l0ZXMubmV0L3Rva2VuXCJcclxuY2ZnLktFRF9DTElFTlRfSUQgPSBwcm9jZXNzLmVudi5LRURfQ0xJRU5UX0lEOyAvLyBcImRldmNsaWVudFwiLCBcInRlc3RjbGllbnRcIiwgXCIuLi5cIlxyXG5jZmcuS0VEX0NMSUVOVF9TRUNSRVQgPSBwcm9jZXNzLmVudi5LRURfQ0xJRU5UX1NFQ1JFVDtcclxuY2ZnLktFRF9SRUFMTSA9IHByb2Nlc3MuZW52LktFRF9SRUFMTTsgLy8gXCJTRTFcIlxyXG5jZmcuS0VEX0xPQ0FMRSA9IGNmZy5LRURfTE9DQUxFIHx8IHByb2Nlc3MuZW52LktFRF9MT0NBTEU7IC8vIFwic3ZcIiwgXCJlblwiLiBPbmx5IHNldCBmcm9tIHByb2Nlc3MuZW52IGlmIG5vdCBzZXQgZnJvbSBTaXRlVmlzaW9uIGVsZW1lbnQgY29uZmlnLlxyXG5jZmcuS0VEX1NDSE9PTF9MT0NBTEUgPSBjZmcuS0VEX1NDSE9PTF9MT0NBTEUgfHwgcHJvY2Vzcy5lbnYuS0VEX1NDSE9PTF9MT0NBTEU7IC8vIFwic3ZcIiwgXCJlbl9zaW5cIiwgXCJlbl9uaW5cIi4gT25seSBzZXQgZnJvbSBwcm9jZXNzLmVudiBpZiBub3Qgc2V0IGZyb20gU2l0ZVZpc2lvbiBlbGVtZW50IGNvbmZpZy5cclxuY2ZnLktFRF9SRVNPVVJDRVNfVVJMID0gY2ZnLktFRF9SRVNPVVJDRVNfVVJMIHx8IHByb2Nlc3MuZW52LktFRF9SRVNPVVJDRVNfVVJMO1xyXG4iLCIvKiBUaGVzZSBzY3JpcHRzIGFzc3VtZSBzb21lIG9mIHRoZSBnbG9iYWwgdmFycyBoYXZlIGFscmVhZHkgYmVlbiBzZXQ6XHJcbiAgKiBLRUQuY2ZnXHJcbiAgKiBLRUQuZW52LmN1cnJlbnRVc2VyXHJcblxyXG4gIFRoZSByZXN0IHdpbGwgYmUgc2V0IGhlcmUgKGNsaWVudCBzaWRlKVxyXG4qL1xyXG5pbXBvcnQgJy4vY29uZmlndXJlJztcclxuaW1wb3J0ICcuL3NldC1iZWFyZXItcHJvdmlkZXJzJztcclxuaW1wb3J0ICcuL3NldC1rZWQtYmFja2VuZC1jbGllbnQnO1xyXG5pbXBvcnQgJy4vc2V0LWVkcy1jbGllbnQnO1xyXG4iLCJpbXBvcnQgeyBwYXJzZVF1ZXJ5U3RyaW5nLCBnZW5lcmF0ZVF1ZXJ5U3RyaW5nLCBzcGxpdFVybEFuZFF1ZXJ5IH0gZnJvbSBcIi4uL3V0aWxzL3F1ZXJ5LXN0cmluZ1wiO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kQ2xpZW50V2ViLCBXZWJTZXJ2ZXJCZWFyZXJQcm92aWRlciwgaXNvbW9ycGhpYywgc3RvcmFnZSB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50d2ViJztcclxuaW1wb3J0IHsgQmVhcmVyUHJvdmlkZXIsIEtlZEJlYXJlclByb3ZpZGVyIH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnQnO1xyXG5pbXBvcnQgY2ZnIGZyb20gJy4uL2dsb2JhbHMvS0VELmNmZyc7XHJcbmltcG9ydCBlbnYgZnJvbSAnLi4vZ2xvYmFscy9LRUQuZW52JztcclxuaW1wb3J0IHsgVXNlciB9IGZyb20gXCIuLi9jb250cmFjdHMva2VkLW1vZGVsc1wiO1xyXG5pbXBvcnQgeyBJTVBFUlNPTkFUSU9OX1FVRVJZX1BBUkFNUyB9IGZyb20gXCIuLi9hY2Nlc3MtY29udHJvbC9pbmRleFwiO1xyXG5pbXBvcnQgeyBjaGVycnlQaWNrUHJvcHMgfSBmcm9tIFwiLi4vdXRpbHMvdXRpbHNcIjtcclxuXHJcbmZ1bmN0aW9uIGdldE1lcmdlZFRva2VuUGF0aCh0b2tlblBhdGg6IHN0cmluZywgbG9jYXRpb25TZWFyY2g6IHN0cmluZywgc2NvcGVzOiBzdHJpbmdbXSkge1xyXG4gIC8vIE1lcmdlIGNvbmZpZ3VyZWQgcXVlcnkgcGFyYW1zIG9mIHRva2VuIHBhdGggd2l0aCBwYXJhbXMgZ2l2ZW4gdG8gY3VycmVudCBwYWdlXHJcbiAgY29uc3QgY3VycmVudFF1ZXJ5ID0gcGFyc2VRdWVyeVN0cmluZyhsb2NhdGlvblNlYXJjaCk7XHJcbiAgY29uc3QgaW1wZXJzb25hdGlvblByb3BzID0gY2hlcnJ5UGlja1Byb3BzKGN1cnJlbnRRdWVyeSwgSU1QRVJTT05BVElPTl9RVUVSWV9QQVJBTVMpO1xyXG4gIGNvbnN0IFt0b2tlblBhdGhXaXRob3V0UXVlcnksIHRva2VuUXVlcnlTdHJpbmddID0gc3BsaXRVcmxBbmRRdWVyeSh0b2tlblBhdGgpO1xyXG4gIGNvbnN0IHRva2VuUGF0aFF1ZXJ5ID0gcGFyc2VRdWVyeVN0cmluZyh0b2tlblF1ZXJ5U3RyaW5nKTtcclxuICByZXR1cm4gdG9rZW5QYXRoV2l0aG91dFF1ZXJ5ICsgZ2VuZXJhdGVRdWVyeVN0cmluZyh7XHJcbiAgICAuLi50b2tlblBhdGhRdWVyeSxcclxuICAgIC4uLmltcGVyc29uYXRpb25Qcm9wcyxcclxuICAgIHNjb3Blczogc2NvcGVzLmpvaW4oJywnKVxyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRUb2tlbklkKG1lcmdlZFRva2VuUGF0aDogc3RyaW5nLCB1c2VyRW1haWw6IHN0cmluZykge1xyXG4gIHJldHVybiBtZXJnZWRUb2tlblBhdGggKyBcIi9cIiArIHVzZXJFbWFpbDtcclxufVxyXG5cclxuZnVuY3Rpb24gc2F2ZVVzZXJJbmZvKHVzZXI6IFVzZXIsIHRva2VuSWQ6IHN0cmluZykge1xyXG4gIGVudi5jdXJyZW50VXNlciA9IHVzZXI7XHJcbiAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShcInVzZXJJbmZvXCIgKyB0b2tlbklkLCBKU09OLnN0cmluZ2lmeSh1c2VyKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGxvYWRVc2VySW5mbyh0b2tlbklkOiBzdHJpbmcpIHtcclxuICBjb25zdCBzdG9yZWRTZXNzaW9uVXNlciA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oXCJ1c2VySW5mb1wiICsgdG9rZW5JZCk7XHJcbiAgaWYgKHN0b3JlZFNlc3Npb25Vc2VyKSB7XHJcbiAgICBlbnYuY3VycmVudFVzZXIgPSBKU09OLnBhcnNlKHN0b3JlZFNlc3Npb25Vc2VyKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUJlYXJlclByb3ZpZGVyKG1lcmdlZFRva2VuUGF0aDogc3RyaW5nLCB1c2VyRW1haWw6IHN0cmluZykge1xyXG4gIGNvbnN0IHRva2VuSWQgPSBnZXRUb2tlbklkKG1lcmdlZFRva2VuUGF0aCwgdXNlckVtYWlsKTtcclxuICByZXR1cm4gbmV3IFdlYlNlcnZlckJlYXJlclByb3ZpZGVyKG1lcmdlZFRva2VuUGF0aCwgcmVzcG9uc2VUZXh0ID0+IHtcclxuICAgIGNvbnN0IHJlcyA9IEpTT04ucGFyc2UocmVzcG9uc2VUZXh0KSBhcyB7IG9rOiBib29sZWFuLCBlcnJvcj86IHN0cmluZywgdG9rZW4/OiBzdHJpbmcsIHVzZXI/OiBVc2VyIH07XHJcbiAgICBpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKHJlcy5lcnJvcik7XHJcbiAgICBpZiAocmVzLnVzZXIpIHtcclxuICAgICAgc2F2ZVVzZXJJbmZvKHJlcy51c2VyLCB0b2tlbklkKTtcclxuICAgIH1cclxuICAgIHJldHVybiB7IHRva2VuOiByZXMudG9rZW4sIGV4cGlyZXM6IERhdGUubm93KCkgKyA1OSAqIDYwICogMTAwMCB9O1xyXG4gIH0sIHRva2VuSWQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVHb29nbGVUb2tlblByb3ZpZGVyKG1lcmdlZFRva2VuUGF0aDogc3RyaW5nLCB1c2VyRW1haWw6IHN0cmluZykge1xyXG4gIGNvbnN0IHRva2VuSWQgPSBnZXRUb2tlbklkKG1lcmdlZFRva2VuUGF0aCwgdXNlckVtYWlsKTtcclxuICByZXR1cm4gbmV3IFdlYlNlcnZlckJlYXJlclByb3ZpZGVyKG1lcmdlZFRva2VuUGF0aCwgcmVzcG9uc2VUZXh0ID0+IHtcclxuICAgIGNvbnN0IHJlcyA9IEpTT04ucGFyc2UocmVzcG9uc2VUZXh0KSBhcyB7IG9rOiBib29sZWFuLCBlcnJvcj86IHN0cmluZywgdG9rZW4/OiBzdHJpbmcsIHVzZXI/OiBVc2VyIH07XHJcbiAgICBpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKHJlcy5lcnJvcik7XHJcbiAgICByZXR1cm4geyB0b2tlbjogcmVzLnRva2VuLCBleHBpcmVzOiBEYXRlLm5vdygpICsgNTkgKiA2MCAqIDEwMDAgfTtcclxuICB9LCB0b2tlbklkKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlVGVzdFRva2VuUHJvdmlkZXIodG9rZW5Vcmw6IHN0cmluZywgdXNlcjogVXNlciwgc2NvcGVzOiBzdHJpbmdbXSkge1xyXG4gIHJldHVybiBuZXcgS2VkQmVhcmVyUHJvdmlkZXIoXHJcbiAgICBpc29tb3JwaGljLFxyXG4gICAgc3RvcmFnZSxcclxuICAgIHRva2VuVXJsICsgdXNlci5tYWlsICsgbG9jYXRpb24uc2VhcmNoLFxyXG4gICAgY2ZnLktFRF9DTElFTlRfSUQsXHJcbiAgICBjZmcuS0VEX0NMSUVOVF9TRUNSRVQsXHJcbiAgICB0b2tlblVybCwge1xyXG4gICAgICBlbWFpbDogdXNlci5tYWlsLnRvTG93ZXJDYXNlKCksXHJcbiAgICAgIHJvbGVzOiB1c2VyLnJvbGVzLFxyXG4gICAgICBzY2hvb2w6IHVzZXIuc2Nob29sLFxyXG4gICAgICBzY2hvb2xUeXBlOiB1c2VyLnNjaG9vbFR5cGUsXHJcbiAgICAgIHNjb3Blc1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8vIGVudi5jdXJyZW50VXNlci5tYWlsIGlzIHNldCBieSBTaXRlVmlzaW9uIHNlcnZlciBpbml0aWFsbHkuXHJcbi8vIEEgcmVzcG9uc2UgZnJvbSAvYXBpL3Rva2VuIG1heSBjaGFuZ2UgdGhlIG1haWwgYXR0cmlidXRlIG9mIHRoZSBjdXJyZW50XHJcbi8vIHVzZXIsIHNvIGVudi5jdXJyZW50VXNlci5tYWlsIG1heSBiZSBkaWZmZXJlbnQgYWZ0ZXIgZ2V0dGluZyBhIHJlc3BvbnNlLlxyXG4vLyBIb3dldmVyLCB0aGUgaW5pdGlhbCB2YWx1ZSBpcyB2YWx1YWJsZSBhbHdheXMgaW4gb3JkZXIgdG8gZGlzdGluZ3Vpc2ggdGhlIGNhc2VcclxuLy8gd2hlbiBvbmUgbm9ybWFsIHVzZXIgbG9ncyBvdXQgYW5kIGFub3RoZXIgdXNlciBsb2dzIGluLlxyXG5jb25zdCBpbml0aWFsVXNlckVtYWlsID0gZW52LmN1cnJlbnRVc2VyICYmIGVudi5jdXJyZW50VXNlci5tYWlsOyAvLyBJbml0aWFsIHZhbHVlIG9mIG1haWwuIE1heSBjaGFuZ2UuXHJcbmlmIChpbml0aWFsVXNlckVtYWlsKSB7XHJcbiAgLy8gS0VEXHJcbiAgaWYgKGNmZy5LRURfVE9LRU5fUEFUSCkge1xyXG4gICAgLy9cclxuICAgIC8vXHJcbiAgICAvLyBQcm9kdWN0aW9uIC8gU2l0ZVZpc2lvbiBwcm94aWVkIC9hcGkvdG9rZW4gdG8gcmVxdWVzdCB0b2tlbnMgZnJvbTpcclxuICAgIC8vXHJcbiAgICAvL1xyXG4gICAgY29uc3QgbWVyZ2VkVG9rZW5QYXRoID0gZ2V0TWVyZ2VkVG9rZW5QYXRoKFxyXG4gICAgICBjZmcuS0VEX1RPS0VOX1BBVEgsXHJcbiAgICAgIGxvY2F0aW9uLnNlYXJjaCwgW1xyXG4gICAgICAgIFwia2VkYmFja2VuZFwiLFxyXG4gICAgICAgIFwiRURTXCIsXHJcbiAgICAgIF0pO1xyXG4gICAgZW52LmJlYXJlclByb3ZpZGVyID0gY3JlYXRlQmVhcmVyUHJvdmlkZXIobWVyZ2VkVG9rZW5QYXRoLCBpbml0aWFsVXNlckVtYWlsKTtcclxuICAgIGxvYWRVc2VySW5mbyhnZXRUb2tlbklkKG1lcmdlZFRva2VuUGF0aCwgaW5pdGlhbFVzZXJFbWFpbCkpO1xyXG5cclxuICAgIC8vIEdvb2dsZVxyXG4gICAgY29uc3QgZ29vZ2xlTWVyZ2VkUGF0aCA9IGdldE1lcmdlZFRva2VuUGF0aChcclxuICAgICAgY2ZnLktFRF9UT0tFTl9QQVRILFxyXG4gICAgICBsb2NhdGlvbi5zZWFyY2gsIFtcclxuICAgICAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvY2FsZW5kYXIucmVhZG9ubHlcIixcclxuICAgICAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvZHJpdmVcIlxyXG4gICAgICBdKTtcclxuICAgIGVudi5nb29nbGVUb2tlblByb3ZpZGVyID0gY3JlYXRlR29vZ2xlVG9rZW5Qcm92aWRlcihnb29nbGVNZXJnZWRQYXRoLCBpbml0aWFsVXNlckVtYWlsKTtcclxuICB9IGVsc2UgaWYgKGNmZy5LRURfVE9LRU5fVVJMICYmIGNmZy5LRURfQ0xJRU5UX0lEICYmIGNmZy5LRURfQ0xJRU5UX1NFQ1JFVCkge1xyXG4gICAgLy9cclxuICAgIC8vXHJcbiAgICAvLyBUZXN0IC0gZ28gZGlyZWN0bHkgdG8gS0VEQVVUSCBzZXJ2ZXIgdG8gcmV0cmlldmUgdG9rZW5zXHJcbiAgICAvL1xyXG4gICAgLy9cclxuICAgIGVudi5iZWFyZXJQcm92aWRlciA9IGNyZWF0ZVRlc3RUb2tlblByb3ZpZGVyKGNmZy5LRURfVE9LRU5fVVJMLCBlbnYuY3VycmVudFVzZXIsIFtcclxuICAgICAgXCJrZWRiYWNrZW5kXCIsXHJcbiAgICAgIFwiRURTXCIsXHJcbiAgICBdKTtcclxuICAgIGVudi5nb29nbGVUb2tlblByb3ZpZGVyID0gY3JlYXRlVGVzdFRva2VuUHJvdmlkZXIoY2ZnLktFRF9UT0tFTl9VUkwgKyBcIi9nb29nbGVcIiwgZW52LmN1cnJlbnRVc2VyLCBbXHJcbiAgICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC9jYWxlbmRhci5yZWFkb25seVwiLFxyXG4gICAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvZHJpdmVcIlxyXG4gICAgXSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBjb25maWd1cmF0aW9uIHBhcmFtZXRlciBLRURfVE9LRU5fUEFUSGApO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgZW52IGZyb20gJy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCBjZmcgZnJvbSAnLi4vZ2xvYmFscy9LRUQuY2ZnJztcclxuaW1wb3J0IHsgaXNvbW9ycGhpYyB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50d2ViJztcclxuaW1wb3J0IHsgRWRzQ2xpZW50IH0gZnJvbSAnLi4vYXBpcy9lZHNjbGllbnQnO1xyXG5cclxuZW52LmVkc0NsaWVudCA9IG5ldyBFZHNDbGllbnQgKFxyXG4gIGlzb21vcnBoaWMsXHJcbiAgY2ZnLkVEU19BUElfVVJMLFxyXG4gIGVudi5iZWFyZXJQcm92aWRlcixcclxuICAoKT0+ZW52LmN1cnJlbnRVc2VyLm1haWwpO1xyXG5cclxuIiwiaW1wb3J0IGVudiBmcm9tICcuLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5pbXBvcnQgY2ZnIGZyb20gJy4uL2dsb2JhbHMvS0VELmNmZyc7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRDbGllbnRXZWIgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudHdlYic7XHJcblxyXG5lbnYua2VkQmFja2VuZENsaWVudCA9IG5ldyBLZWRCYWNrZW5kQ2xpZW50V2ViIChcclxuICBjZmcuS0VEX0FQSV9VUkwsXHJcbiAgZW52LmJlYXJlclByb3ZpZGVyKTtcclxuXHJcbiIsImltcG9ydCBLRUQgZnJvbSAnLi9LRUQnO1xyXG5cclxuLyogVGhpcyBkZWZhdWx0IGNvbmZpZ3VyYXRpb24gaXMgdXNlZCBhcyBhIGZhbGxiYWNrLlxyXG5Ob3JtYWxseSBib3RoIHRlc3QgcGFnZXMgYW5kIHByb2R1Y3Rpb24gcGFnZXMgd2lsbCBvdmVycmlkZSB0aGVzZSBjb25maWdyYXRpb25zXHJcbiovXHJcbi8qY29uc3QgZGVmYXVsdENvbmZpZ3VyYXRpb24gPSB7XHJcbiAgLy8gRW52aXJvbm1lbnRcclxuICBFTlZJUk9OTUVOVDogJ2RldmVsb3BtZW50JyBhcyAncHJvZHVjdGlvbicgfCAnZGV2ZWxvcG1lbnQnIHwgJ3Rlc3QnLFxyXG4gIC8vIEF1dGhlbnRpY2F0aW9uIFNlcnZlcjpcclxuICBLRURfVE9LRU5fVVJMOiAnaHR0cHM6Ly9rZWRhdXRodGVzdC5henVyZXdlYnNpdGVzLm5ldC90b2tlbicsXHJcbiAgS0VEX1RPS0VOX1BBVEg6ICcvYXBpL3Rva2VuLlNrcmlwdC5wb3J0bGV0P3N2LmNvbnRlbnR0eXBlPWFwcGxpY2F0aW9uL2pzb24nLFxyXG4gIEtFRF9DTElFTlRfSUQ6ICdkZXZjbGllbnQnLFxyXG4gIEtFRF9DTElFTlRfU0VDUkVUOiAnNGZSZGZRcFd0SnFqVFdmJyxcclxuICAvLyBTZXJ2aWNlczpcclxuICBLRURfQVBJX1VSTDogJ2h0dHBzOi8va2VkYmFja2VuZHRlc3QuYXp1cmV3ZWJzaXRlcy5uZXQvYXBpLycsICBcclxuICBFRFNfQVBJX1VSTDogJ2h0dHBzOi8vZWRzcG9ydGFsb3dpbmFwaS5henVyZXdlYnNpdGVzLm5ldC9hcGkvJ1xyXG59Ki9cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUtlZENvbmZpZ3VyYXRpb24ge1xyXG4gIEVOVklST05NRU5UOiAncHJvZHVjdGlvbicgfCAnZGV2ZWxvcG1lbnQnIHwgJ3Rlc3QnO1xyXG4gIEtFRF9SRUFMTTogc3RyaW5nO1xyXG4gIEtFRF9UT0tFTl9VUkw6IHN0cmluZztcclxuICBLRURfVE9LRU5fUEFUSDogc3RyaW5nO1xyXG4gIEtFRF9DTElFTlRfSUQ6IHN0cmluZztcclxuICBLRURfQ0xJRU5UX1NFQ1JFVDogc3RyaW5nO1xyXG4gIEtFRF9BUElfVVJMOiBzdHJpbmc7XHJcbiAgRURTX0FQSV9VUkw6IHN0cmluZztcclxuICBLRURfTE9DQUxFOiBzdHJpbmc7XHJcbiAgS0VEX1NDSE9PTF9MT0NBTEU6IHN0cmluZztcclxuICBLRURfQ09VUlNFX0JVSUxERVJfVVJMOiBzdHJpbmc7XHJcbiAgS0VEX0NPVVJTRV9WSUVXRVJfVVJMOiBzdHJpbmc7XHJcbiAgS0VEX1NVQkpFQ1RfUExBTk5FUl9BRE1JTl9VUkw6IHN0cmluZztcclxuICBLRURfU1VCSkVDVF9QTEFOTkVSX1VSTDogc3RyaW5nO1xyXG4gIEtFRF9GRUFUVVJFUzogc3RyaW5nO1xyXG4gIEtFRF9LRUVQX0FMSVZFX1VSTDogc3RyaW5nO1xyXG4gIEtFRF9FTlVNX1dPUkRCQU5LU19VUkw6IHN0cmluZztcclxuICBLRURfV09SREJBTktTX1VSTDogc3RyaW5nO1xyXG4gIEtFRF9SRVNPVVJDRVNfVVJMOiBzdHJpbmc7XHJcbn07XHJcblxyXG5pZiAoIUtFRC5jZmcpIEtFRC5jZmcgPSB7fTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEtFRC5jZmcgYXMgSUtlZENvbmZpZ3VyYXRpb247XHJcbmV4cG9ydCBjb25zdCBjZmc6IElLZWRDb25maWd1cmF0aW9uID0gS0VELmNmZztcclxuIiwiaW1wb3J0IHtVc2VyLCBMZWFybmluZ01vZHVsZVRhc2tzfSBmcm9tICcuLi9jb250cmFjdHMva2VkLW1vZGVscyc7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRDbGllbnQsIEJlYXJlclByb3ZpZGVyIH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnQnO1xyXG5pbXBvcnQge1VzZXJUYXNrfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7S2VkUmVwb30gZnJvbSAnLi4vcmVwb3Mva2VkLXJlcG8nO1xyXG5pbXBvcnQge0Vkc0NsaWVudH0gZnJvbSAnLi4vYXBpcy9lZHNjbGllbnQnO1xyXG5pbXBvcnQgS0VEIGZyb20gJy4va2VkJztcclxuaW1wb3J0IHsgS1NUZXJtUGxhbm5lclJlcG8gfSBmcm9tICcuLi9yZXBvcy9rcy10ZXJtcGxhbm5lci1yZXBvJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRW52IHtcclxuICAgIGN1cnJlbnRVc2VyPzogVXNlcjtcclxuICAgIGxlYXJuaW5nTW9kdWxlVGFza3M/OiBMZWFybmluZ01vZHVsZVRhc2tzO1xyXG4gICAgYmVhcmVyUHJvdmlkZXI/OiBCZWFyZXJQcm92aWRlcjtcclxuICAgIGdvb2dsZVRva2VuUHJvdmlkZXI/OiBCZWFyZXJQcm92aWRlcjtcclxuICAgIGtlZEJhY2tlbmRDbGllbnQ/OiBLZWRCYWNrZW5kQ2xpZW50O1xyXG4gICAgZWRzQ2xpZW50PzogRWRzQ2xpZW50O1xyXG4gICAgdXNlclRhc2tzUmVwbz87XHJcbiAgICBoaWRkZW5Db3Vyc2VzUmVwbz87XHJcbiAgICB3ZWVrTm90ZXNSZXBvPztcclxuICAgIGtnVGVybVBsYW5uZXJSZXBvPztcclxuICAgIGtzVGVybVBsYW5uZXJSZXBvPzogS1NUZXJtUGxhbm5lclJlcG9cclxuICAgIHR1dG9yZWQ6IGJvb2xlYW47XHJcbiAgICBlcnJvcj86IEVycm9yO1xyXG59XHJcblxyXG5pZiAoIUtFRC5lbnYpIEtFRC5lbnYgPSB7fTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEtFRC5lbnYgYXMgRW52O1xyXG5leHBvcnQgY29uc3QgZW52OiBFbnYgPSBLRUQuZW52O1xyXG4iLCJcclxuZXhwb3J0IGNvbnN0IEtFRF9OQU1FU1BBQ0UgPSBcIktFRFwiO1xyXG5cclxuZGVjbGFyZSB2YXIgS0VEOiBhbnk7XHJcblxyXG52YXIgcmVzdWx0ID0gdHlwZW9mIEtFRCA9PT0gJ3VuZGVmaW5lZCcgPyB7fSA6IEtFRDtcclxuXHJcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgS0VEID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgd2luZG93W0tFRF9OQU1FU1BBQ0VdID0gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCByZXN1bHQ7XHJcbiIsImltcG9ydCBlbnYgZnJvbSAnLi9LRUQuZW52JztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRDdXJyZW50VXNlciAoKSB7XHJcbiAgcmV0dXJuIGVudi5jdXJyZW50VXNlcjtcclxufVxyXG4iLCJpbXBvcnQgZW52IGZyb20gJy4vS0VELmVudic7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRSZXBvIH0gZnJvbSAna2VkYmFja2VuZC9yZXBvJztcclxuaW1wb3J0IHsgZ2V0R2xvYmFsSWQsIGNyZWF0ZVVVSUQgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XHJcbmltcG9ydCBjZmcgZnJvbSAnLi9LRUQuY2ZnJztcclxuaW1wb3J0IHsgU2Nob29sLCBCcmFuY2ggfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IFZhbHVlIH0gZnJvbSAna2VkYmFja2VuZC9vYnNlcnZhYmxlJztcclxuXHJcbmV4cG9ydCBjb25zdCBkYiA9IG5ldyBLZWRCYWNrZW5kUmVwbyhcclxuICAoKT0+ZW52LmtlZEJhY2tlbmRDbGllbnQsXHJcbiAgKCk9PmVudi5jdXJyZW50VXNlciA/XHJcbiAgICBlbnYuY3VycmVudFVzZXIubWFpbCA6XHJcbiAgICBcIlwiLFxyXG4gICgpPT5lbnYuY3VycmVudFVzZXIgP1xyXG4gICAgZW52LmN1cnJlbnRVc2VyLmRpc3BsYXlOYW1lIHx8IGVudi5jdXJyZW50VXNlci5tYWlsIDpcclxuICAgIFwiXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGdsb2JhbElkID0gZ2V0R2xvYmFsSWQoY2ZnLktFRF9SRUFMTSk7XHJcbmV4cG9ydCBjb25zdCBTY2hvb2xzID0ge1xyXG4gIHN0YW5kYXJkU2Nob29sOiBkYi5zY2hvb2xzLm5hbWUoXCJzdGFuZGFyZFwiKS5jYWNoZU9wdGltaXplZCgpLnNpbmdsZSgpLFxyXG4gIGdldCBteVNjaG9vbCAoKSB7IHJldHVybiBkYi5zY2hvb2xzLm5hbWUoZW52LmN1cnJlbnRVc2VyLnNjaG9vbCkuY2FjaGVPcHRpbWl6ZWQoKS5zaW5nbGUoKTsgfVxyXG59O1xyXG5leHBvcnQgY29uc3QgQ291cnNlSW5zdGFuY2VzID0ge1xyXG4gIGdldEJyYW5jaElkKHNjaG9vbDogVmFsdWU8U2Nob29sPiwgY291cnNlSWQ6IHN0cmluZykge1xyXG4gICAgcmV0dXJuIHNjaG9vbC5zd2l0Y2hNYXAoc2Nob29sID0+XHJcbiAgICAgIGRiLmJyYW5jaGVzXHJcbiAgICAgICAgLmhhc0VkZ2VzRnJvbShbc2Nob29sLm9mZmljaWFsQnJhbmNoSWRdKVxyXG4gICAgICAgIC5uYW1lKFwiZHJhZnRcIilcclxuICAgICAgICAudGFncyhjb3Vyc2VJZClcclxuICAgICAgICAuaWRzT25seSgpXHJcbiAgICAgICAgLm1hcCgoe2lkfSkgPT4gaWQpXHJcbiAgICAgICAgLnRvVmFsdWUoKVxyXG4gICAgICAgIC5tYXAoaWRzID0+IGlkcy5sZW5ndGggPiAwID8gaWRzWzBdIDogdW5kZWZpbmVkKSk7XHJcbiAgfSxcclxuXHJcbiAgLyoqIEdldCBhIERSQUZUIGJyYW5jaCBmb3IgZ2l2ZW4gY291cnNlIElEIGFuZCBnaXZlbiBzY2hvb2wuXHJcbiAgICogSWYgdGhlcmUgaXMgbm90IHlldCBzdWNoIGEgYnJhbmNoLCBjcmVhdGUgaXQgdXNpbmcgbXV0YXRpb25zT25FbXB0eSgpIHdoaWNoIHdpbGxcclxuICAgKiBsZWFkIHRvIHRoZSBDIyBjb2RlIERvY3VtZW50UmVwb3NpdG9yeS5SZWFkT3JNdXRhdGUoKSB2aWEgRG9jdW1lbnRDb250cm9sbGVyLlxyXG4gICAqL1xyXG4gIGdldE9yQ3JlYXRlQnJhbmNoSWQoc2Nob29sOiBWYWx1ZTxTY2hvb2w+LCBjb3Vyc2VJZDogc3RyaW5nKSB7XHJcbiAgICByZXR1cm4gZGIuY291cnNlSW5zdGFuY2VzLmlkc09ubHkoKS5pZChjb3Vyc2VJZCkuc3dpdGNoTWFwKCgpPT4gLy8gVEhpcyBmaXJzdCBsaW5lIHZlcmlmaWVzIGNvdXJzZSBleGlzdHMuIElmIGRlbGV0ZWQsIGRvbid0IHRyeSB0byByZWNyZWF0ZSBpdHMgYnJhbmNoIVxyXG4gICAgICBzY2hvb2wuc3dpdGNoTWFwKHNjaG9vbCA9PiBcclxuICAgICAgZGIuYnJhbmNoZXNcclxuICAgICAgICAuaGFzRWRnZXNGcm9tKFtzY2hvb2wub2ZmaWNpYWxCcmFuY2hJZF0pXHJcbiAgICAgICAgLm5hbWUoXCJkcmFmdFwiKVxyXG4gICAgICAgIC50YWdzKGNvdXJzZUlkKVxyXG4gICAgICAgIC5pZHNPbmx5KClcclxuICAgICAgICAubXV0YXRpb25zT25FbXB0eSh0eCA9PiB7XHJcbiAgICAgICAgICAvLyBUaGVzZSAyIG11dGF0aW9ucyB3aWxsIG9jY3VyIHNlcnZlciBzaWRlLCBhdG9taWNhbGx5LlxyXG4gICAgICAgICAgLy8gV2lsbCBiZSBzZW50IG9uIGVhY2ggcmVxdWVzdCBpbiB0aGUgcXVlcnksIGJ1dCB3aWxsIG9ubHkgZXhlY3V0ZSBpZiBxdWVyeSByZXN1bHRzIGluIHplcm8gaXRlbXMuXHJcbiAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiU2Nob29sOlwiLCBzY2hvb2wpO1xyXG4gICAgICAgICAgY29uc3QgaWQgPSBjcmVhdGVVVUlEKCk7XHJcbiAgICAgICAgICB0eC5hZGQoXCJicmFuY2hlc1wiLCB7XHJcbiAgICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgICBhY2w6IFtcclxuICAgICAgICAgICAgICBcInJvbGU6VVNFUjpSXCIsXHJcbiAgICAgICAgICAgICAgYHNjaG9vbFJvbGU6JHtzY2hvb2wubmFtZX0vRU1QTE9ZRUU6U2BcclxuICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgbmFtZTogJ2RyYWZ0JyxcclxuICAgICAgICAgICAgc2Nob29sSWQ6IHNjaG9vbC5pZCxcclxuICAgICAgICAgICAgdHJlZVBhcmVudElkOiBzY2hvb2wub2ZmaWNpYWxCcmFuY2hJZCxcclxuICAgICAgICAgICAgdGFnczogW2NvdXJzZUlkXVxyXG4gICAgICAgICAgfSBhcyBCcmFuY2gpO1xyXG4gICAgICAgICAgLy8gQXBwcm92aW5nIHRoZSBicmFuY2ggbWFrZXMgc3VyZSB0aGF0IGl0IHdhcyBjcmVhdGVkIGJ5IGFuIEVNUExPWUVFIG9uIGdpdmVuIHNjaG9vbC5cclxuICAgICAgICAgIHR4LmxpbmsyKFwiYnJhbmNoZXNcIiwgc2Nob29sLm9mZmljaWFsQnJhbmNoSWQsIFwiYXBwcm92ZWRDaGlsZHJlblwiLCBpZCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuc2luZ2xlKClcclxuICAgICAgICAubWFwKCh7aWR9KSA9PiBpZCkpKTtcclxuICB9LFxyXG5cclxuICBnZXRBbGxEZXNjZW5kYW50SWRzKGNvdXJzZUlkOiBzdHJpbmcpIHtcclxuICAgIHJldHVybiBkYi5jb3Vyc2VCbG9ja3MudGFncyhjb3Vyc2VJZCkuaWRzT25seSgpLmNvbmNhdChcclxuICAgICAgZGIuY291cnNlQ29udGVudHMudGFncyhjb3Vyc2VJZCkuaWRzT25seSgpKS5jb25jYXQoXHJcbiAgICAgIGRiLmNvdXJzZVRhYnMudGFncyhjb3Vyc2VJZCkuaWRzT25seSgpKS5jb25jYXQoXHJcbiAgICAgIGRiLnRhc2tzLnRhZ3MoY291cnNlSWQpLmlkc09ubHkoKSlcclxuICAgICAgLm1hcCh4ID0+IHguaWQpO1xyXG4gIH1cclxufVxyXG4iLCJcclxuZXhwb3J0IGNvbnN0IEtFRF9OQU1FU1BBQ0UgPSBcIktFRFwiO1xyXG5cclxuZGVjbGFyZSB2YXIgS0VEOiBhbnk7XHJcblxyXG52YXIgcmVzdWx0ID0gdHlwZW9mIEtFRCA9PT0gJ3VuZGVmaW5lZCcgPyB7fSA6IEtFRDtcclxuXHJcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgS0VEID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgd2luZG93W0tFRF9OQU1FU1BBQ0VdID0gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCByZXN1bHQ7XHJcbiIsIlxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBSZXBvQ29tbXVuaWNhdG9yPFQgZXh0ZW5kcyB7aWQ6IHN0cmluZ30+IHtcclxuICBxdWVyeSgpOiBQcm9taXNlPFRbXT47XHJcbn1cclxuXHJcbnR5cGUgU3Vic2NyaWJlcjxUPiA9IChpdGVtczpUW10sIGVycm9yOiB1bmRlZmluZWQgfCBFcnJvcikgPT4gYW55O1xyXG5cclxuZXhwb3J0IGNsYXNzIFJlcG88VCBleHRlbmRzIHtpZDogc3RyaW5nfT4ge1xyXG4gIGxpc3RQcm9taXNlOiBQcm9taXNlPHZvaWQ+O1xyXG4gIGl0ZW1zOiBUW107XHJcbiAgZXJyb3I/OiBFcnJvcjtcclxuICBzdWJzY3JpYmVyczogU3Vic2NyaWJlcjxUPltdO1xyXG5cclxuICBjb25zdHJ1Y3RvcihwdWJsaWMgY29tbTogUmVwb0NvbW11bmljYXRvcjxUPikge1xyXG4gICAgdGhpcy5saXN0UHJvbWlzZSA9IG51bGw7XHJcbiAgICB0aGlzLml0ZW1zID0gbnVsbDtcclxuICAgIHRoaXMuc3Vic2NyaWJlcnMgPSBbXTtcclxuICB9XHJcblxyXG4gIHN1YnNjcmliZShzdWJzY3JpYmVyOiBTdWJzY3JpYmVyPFQ+KSB7XHJcbiAgICByZXR1cm4gdGhpcy5lbnN1cmVIYXNEYXRhKCkudGhlbigoKT0+e1xyXG4gICAgICBzdWJzY3JpYmVyKHRoaXMuaXRlbXMsIHRoaXMuZXJyb3IpO1xyXG4gICAgICB0aGlzLnN1YnNjcmliZXJzLnB1c2goc3Vic2NyaWJlcik7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHVuc3Vic2NyaWJlKHN1YnNjcmliZXI6IFN1YnNjcmliZXI8VD4pIHtcclxuICAgIHRoaXMuc3Vic2NyaWJlcnMgPSB0aGlzLnN1YnNjcmliZXJzLmZpbHRlciAocyA9PiBzICE9PSBzdWJzY3JpYmVyKTtcclxuICB9XHJcblxyXG4gIG5vdGlmeVN1YnNjcmliZXJzKCkge1xyXG4gICAgdGhpcy5zdWJzY3JpYmVycy5mb3JFYWNoKHMgPT4gcyh0aGlzLml0ZW1zLCB0aGlzLmVycm9yKSk7XHJcbiAgfVxyXG5cclxuICBlbnN1cmVIYXNEYXRhKCkge1xyXG4gICAgaWYgKCF0aGlzLmxpc3RQcm9taXNlKSB0aGlzLnJlZnJlc2hGcm9tU2VydmVyKCk7XHJcbiAgICByZXR1cm4gdGhpcy5saXN0UHJvbWlzZTtcclxuICB9XHJcblxyXG4gIHJlZnJlc2hGcm9tU2VydmVyKCkge1xyXG4gICAgdGhpcy5saXN0UHJvbWlzZSA9IHRoaXMuY29tbS5xdWVyeSgpLnRoZW4oaXRlbXMgPT4ge1xyXG4gICAgICB0aGlzLml0ZW1zID0gaXRlbXM7XHJcbiAgICAgIHRoaXMuZXJyb3IgPSBudWxsO1xyXG4gICAgICB0aGlzLm5vdGlmeVN1YnNjcmliZXJzKCk7XHJcbiAgICB9KS5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcclxuICAgICAgdGhpcy5pdGVtcyA9IHRoaXMuaXRlbXMgfHwgW107XHJcbiAgICAgIHRoaXMubm90aWZ5U3Vic2NyaWJlcnMoKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHRoaXMubGlzdFByb21pc2U7XHJcbiAgfVxyXG4gIFxyXG4gIGFzeW5jIHVwZGF0ZShpdGVtOiBUIHwgVFtdKSB7XHJcbiAgICBhd2FpdCB0aGlzLmVuc3VyZUhhc0RhdGEoKTtcclxuICAgIGNvbnN0IHVwZGF0ZWRJdGVtcyA9IEFycmF5LmlzQXJyYXkoaXRlbSkgPyBpdGVtIDogW2l0ZW1dO1xyXG4gICAgdGhpcy5pdGVtcyA9IHRoaXMuaXRlbXMubWFwKGl0ID0+IHtcclxuICAgICAgY29uc3QgdXBkYXRlZEl0ZW0gPSB1cGRhdGVkSXRlbXMuZmluZCgoe2lkfSkgPT4gaXQuaWQgPT09IGlkKTtcclxuICAgICAgcmV0dXJuIHVwZGF0ZWRJdGVtID9cclxuICAgICAgICBPYmplY3QuYXNzaWduKHt9LCB1cGRhdGVkSXRlbSkgOlxyXG4gICAgICAgIGl0O1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLm5vdGlmeVN1YnNjcmliZXJzKCk7XHJcbiAgfVxyXG5cclxuICBpbnNlcnQoaXRlbTogVCB8IFRbXSkge1xyXG4gICAgcmV0dXJuIHRoaXMuZW5zdXJlSGFzRGF0YSgpLnRoZW4oKCk9PntcclxuICAgICAgdGhpcy5pdGVtcyA9IHRoaXMuaXRlbXMuY29uY2F0KGl0ZW0pO1xyXG4gICAgICB0aGlzLm5vdGlmeVN1YnNjcmliZXJzKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZShpZDogc3RyaW5nIHwgc3RyaW5nW10pIHtcclxuICAgIGNvbnN0IGlkcyA9IEFycmF5LmlzQXJyYXkoaWQpID8gaWQgOiBbaWRdO1xyXG4gICAgcmV0dXJuIHRoaXMuZW5zdXJlSGFzRGF0YSgpLnRoZW4oKCk9PntcclxuICAgICAgdGhpcy5pdGVtcyA9IHRoaXMuaXRlbXMuZmlsdGVyKGl0ID0+ICFpZHMuc29tZShpZCA9PiBpdC5pZCA9PT0gaWQpKTtcclxuICAgICAgdGhpcy5ub3RpZnlTdWJzY3JpYmVycygpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFJlcG8sIFJlcG9Db21tdW5pY2F0b3IgfSBmcm9tICcuL3JlcG8nO1xyXG5pbXBvcnQgeyBDb3Vyc2UsIFNjaG9vbCB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IGVudiBmcm9tICcuLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5pbXBvcnQgeyBmbGF0dGVuLCBMIH0gZnJvbSBcIi4uL3V0aWxzL3V0aWxzXCI7XHJcblxyXG5jbGFzcyBTY2hvb2xDb3Vyc2VzUmVwbyBleHRlbmRzIFJlcG88Q291cnNlPiB7XHJcbiAgcHJpdmF0ZSBfc2Nob29sSWQ6IHN0cmluZztcclxuICBnZXRTY2hvb2xJZCgpIHtcclxuICAgIHJldHVybiB0aGlzLmVuc3VyZUhhc0RhdGEoKS50aGVuKCgpPT50aGlzLl9zY2hvb2xJZCk7XHJcbiAgfVxyXG5cclxuICBjb25zdHJ1Y3RvcihnZXRTY2hvb2xOYW1lOiAoKT0+c3RyaW5nKSB7XHJcbiAgICBzdXBlcih7XHJcbiAgICAgIHF1ZXJ5OiBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgc2Nob29sTmFtZSA9IGdldFNjaG9vbE5hbWUoKTtcclxuICAgICAgICBjb25zdCBzY2hvb2xzID0gYXdhaXQgZW52LmtlZEJhY2tlbmRDbGllbnQubGlzdDxTY2hvb2w+KFxyXG4gICAgICAgICAgXCJzY2hvb2xzXCIsIHtcclxuICAgICAgICAgICAgbmFtZTogc2Nob29sTmFtZSxcclxuICAgICAgICAgICAgaW5jbHVkZTogW1wiY291cnNlc1wiXVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fc2Nob29sSWQgPSBzY2hvb2xzLmxlbmd0aCA+IDAgJiYgc2Nob29sc1swXS5pZDtcclxuICAgICAgICBpZiAoIXRoaXMuX3NjaG9vbElkKSB0aHJvdyBuZXcgRXJyb3IoTGBTa29sYW4gJHtzY2hvb2xOYW1lfSBmaW5ucyBpbnRlIHJlZ2lzdHJlcmFkIGkgc3lzdGVtZXQuXHJcbiAgICAgICAgICBLb250YWt0YSBlbiBhZG1pbmlzdHJhdMO2ciBmw7ZyIEt1cnNieWdnYXJ2ZXJrdHlnZXQgb2NoIGJlIG9tIGF0dCBsw6RnZ2EgdGlsbCBza29sYW4gbWVkIG5hbW5ldCBcIiR7c2Nob29sTmFtZX1cImApO1xyXG4gICAgICAgIHJldHVybiBmbGF0dGVuKHNjaG9vbHMubWFwKHNjaG9vbCA9PiBzY2hvb2wuY291cnNlcykpO1xyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IG15U2Nob29sQ291cnNlc1JlcG8gPSBuZXcgU2Nob29sQ291cnNlc1JlcG8oKCk9PmVudi5jdXJyZW50VXNlci5zY2hvb2wpO1xyXG4iLCJpbXBvcnQge1VzZXJ9IGZyb20gJy4uLy4uL2NvbnRyYWN0cy9rZWQtbW9kZWxzJztcclxuXHJcbmV4cG9ydCBjb25zdCB1c2VycyA6IFVzZXJbXSA9IFt7XHJcbiAgICBkaXNwbGF5TmFtZTogXCJBZG1pbmlzdHJhdMO2clwiLFxyXG4gICAgbWFpbDogXCJ2ZW1lbmRvQGtlZHNjaG9vbHMuY29tXCIsXHJcbiAgICByb2xlczogWydBRE1JTicsJ0VNUExPWUVFJ10sXHJcbiAgICBzY2hvb2w6ICdLRUQnLFxyXG4gICAgdXNlcm5hbWU6IFwiYWRtaW5cIlxyXG59LHtcclxuICAgIGRpc3BsYXlOYW1lOiBcIkRhdmlkXCIsXHJcbiAgICBtYWlsOiBcImRhdmlkLmZhaGxhbmRlckB2ZW1lbmRvLnNlXCIsXHJcbiAgICByb2xlczogWydBRE1JTicsJ0VNUExPWUVFJ10sXHJcbiAgICBzY2hvb2w6ICdLRUQnLFxyXG4gICAgdXNlcm5hbWU6IFwiZGF2aWRcIlxyXG59LFxyXG57XHJcbiAgICBkaXNwbGF5TmFtZTogXCJBbmRyZWlcIixcclxuICAgIG1haWw6IFwiYW5kcmVpLnNwYXRhcmVsdUB2ZW1lbmRvLnNlXCIsXHJcbiAgICByb2xlczogWydBRE1JTicsJ0VNUExPWUVFJywnU1RVREVOVCddLFxyXG4gICAgc2Nob29sOiAnS0VEJyxcclxuICAgIHVzZXJuYW1lOiBcImFuZHJlaVwiXHJcbn0se1xyXG4gICAgZGlzcGxheU5hbWU6IFwiQ2FybCBIb2xtYmVyZ1wiLFxyXG4gICAgbWFpbDogXCJjYXJsLmhvbG1iZXJnQGt1bnNrYXBzZ3ltbmFzaWV0LnNlXCIsXHJcbiAgICByb2xlczogWydBRE1JTicsJ0VNUExPWUVFJ10sXHJcbiAgICBzY2hvb2w6ICdOb3Jya8O2cGluZycsXHJcbiAgICB1c2VybmFtZTogXCJjYXJsLmhvbG1iZXJnQGt1bnNrYXBzZ3ltbmFzaWV0LnNlXCJcclxufSx7IFxyXG4gICAgZGlzcGxheU5hbWU6IFwiQ2FybFwiLFxyXG4gICAgbWFpbDogXCJjYXJsQGtlZHNjaG9vbHMuY29tXCIsXHJcbiAgICByb2xlczogWydBRE1JTicsJ0VNUExPWUVFJywnU1RVREVOVCddLFxyXG4gICAgc2Nob29sOiAnS0VEJyxcclxuICAgIHVzZXJuYW1lOiBcImNhcmxcIlxyXG59LHtcclxuICAgIGRpc3BsYXlOYW1lOiBcImRhdmlkLmZhaGxhbmRlckBrZWRzY2hvb2xzLmNvbVwiLFxyXG4gICAgbWFpbDogXCJkYXZpZC5mYWhsYW5kZXJAa2Vkc2Nob29scy5jb21cIixcclxuICAgIHJvbGVzOiBbXCJBRE1JTlwiLCBcIkVNUExPWUVFXCIsIFwiU1RVREVOVFwiXSxcclxuICAgIHNjaG9vbDogXCJLRURcIixcclxuICAgIHVzZXJuYW1lOiBcImRhdmlkLmZhaGxhbmRlckBrZWRzY2hvb2xzLmNvbVwiXHJcbn0se1xyXG4gICAgZGlzcGxheU5hbWU6IFwiVGVhY2hlciAxXCIsXHJcbiAgICBtYWlsOiBcInRlYWNoZXIxLmNsYXNzcm9vbUBrZWRzY2hvb2xzLmNvbVwiLFxyXG4gICAgcm9sZXM6IFsnRU1QTE9ZRUUnXSxcclxuICAgIHNjaG9vbDogJ0tFRCcsXHJcbiAgICB1c2VybmFtZTogXCJ0ZWFjaGVyMS5jbGFzc3Jvb21Aa2Vkc2Nob29scy5jb21cIlxyXG59LHsgXHJcbiAgICBkaXNwbGF5TmFtZTogXCJUZXN0LUxpdmUtRWxldjFcIixcclxuICAgIG1haWw6IFwidWJ3Njc1N0BlZHUua3Vuc2thcHNneW1uYXNpZXQuc2VcIixcclxuICAgIHJvbGVzOiBbJ1NUVURFTlQnXSxcclxuICAgIHNjaG9vbDogJ1VwcHNhbGEnLFxyXG4gICAgdXNlcm5hbWU6IFwidWJ3Njc1N0BlZHUua3Vuc2thcHNneW1uYXNpZXQuc2VcIlxyXG59LHtcclxuICAgIGRpc3BsYXlOYW1lOiBcIlRlc3QtTGl2ZS1FbGV2MlwiLFxyXG4gICAgbWFpbDogXCJ1bXM0MzAyQGVkdS5rdW5za2Fwc2d5bW5hc2lldC5zZVwiLFxyXG4gICAgcm9sZXM6IFsnU1RVREVOVCddLFxyXG4gICAgc2Nob29sOiAnVXBwc2FsYScsXHJcbiAgICB1c2VybmFtZTogXCJ1bXM0MzAyQGVkdS5rdW5za2Fwc2d5bW5hc2lldC5zZVwiXHJcbn0se1xyXG4gICAgZGlzcGxheU5hbWU6IFwiVGVzdC1MaXZlLUVsZXYzXCIsXHJcbiAgICBtYWlsOiBcInVoaDM0NjBAZWR1Lmt1bnNrYXBzZ3ltbmFzaWV0LnNlXCIsXHJcbiAgICByb2xlczogWydTVFVERU5UJ10sXHJcbiAgICBzY2hvb2w6ICdVcHBzYWxhJyxcclxuICAgIHVzZXJuYW1lOiBcInVoaDM0NjBAZWR1Lmt1bnNrYXBzZ3ltbmFzaWV0LnNlXCJcclxufSx7XHJcbiAgICBkaXNwbGF5TmFtZTogXCJUZXN0LUxpdmUtRWxldjQoZmVsIGdvYWxzIGlzc3VlKVwiLFxyXG4gICAgbWFpbDogXCJ1bXQ2ODI2QGVkdS5rdW5za2Fwc3Nrb2xhbi5zZVwiLFxyXG4gICAgcm9sZXM6IFtcIlNUVURFTlRcIl0sXHJcbiAgICBzY2hvb2w6IFwiVXBwc2FsYVwiLFxyXG4gICAgdXNlcm5hbWU6IFwidW10NjgyNkBlZHUua3Vuc2thcHNza29sYW4uc2VcIlxyXG59LHtcclxuICAgIGRpc3BsYXlOYW1lOiBcIlRlc3QtTGl2ZS1FbGV2NShmdXR1cmUgYWJpbGl0aWVzKVwiLFxyXG4gICAgbWFpbDogXCJ1amczODMzQGVkdS5rdW5za2Fwc3Nrb2xhbi5zZVwiLFxyXG4gICAgcm9sZXM6IFtcIlNUVURFTlRcIl0sXHJcbiAgICBzY2hvb2w6IFwiVXBwc2FsYVwiLFxyXG4gICAgdXNlcm5hbWU6IFwidWpnMzgzM0BlZHUua3Vuc2thcHNza29sYW4uc2VcIlxyXG59LHtcclxuICAgIGRpc3BsYXlOYW1lOiBcIlRlc3QtTGl2ZS1FbGV2NihmdXR1cmUgYWJpbGl0aWVzKVwiLFxyXG4gICAgbWFpbDogXCJ1anQxMzYzQGVkdS5rdW5za2Fwc3Nrb2xhbi5zZVwiLFxyXG4gICAgcm9sZXM6IFtcIlNUVURFTlRcIl0sXHJcbiAgICBzY2hvb2w6IFwiVXBwc2FsYVwiLFxyXG4gICAgdXNlcm5hbWU6IFwidWp0MTM2M0BlZHUua3Vuc2thcHNza29sYW4uc2VcIlxyXG59LHtcclxuICAgIGRpc3BsYXlOYW1lOiBcIlRlc3QtTGl2ZS1Mw6RyYXJlMVwiLFxyXG4gICAgbWFpbDogXCJyaWNrYXJkLmFsYmVydHNzb25Aa3Vuc2thcHNneW1uYXNpZXQuc2VcIixcclxuICAgIHJvbGVzOiBbJ0VNUExPWUVFJ10sXHJcbiAgICBzY2hvb2w6ICdVcHBzYWxhJyxcclxuICAgIHVzZXJuYW1lOiBcInJpY2thcmQuYWxiZXJ0c3NvbkBrdW5za2Fwc2d5bW5hc2lldC5zZVwiXHJcbn0se1xyXG4gICAgZGlzcGxheU5hbWU6IFwiRURTVGVzdFVzZXJHeW1uYXNpdW1cIixcclxuICAgIG1haWw6IFwidWhoMzIwMEBlZHUua3Vuc2thcHNneW1uYXNpZXQuc2VcIixcclxuICAgIC8vbWFpbDogXCJVSEgzMjAwQEVEVS5LVU5TS0FQU0dZTU5BU0lFVC5TRVwiLFxyXG4gICAgcm9sZXM6IFtcIlNUVURFTlRcIl0sXHJcbiAgICB1c2VybmFtZTogXCJFRFNUZXN0VXNlcjFcIixcclxuICAgIHNjaG9vbDogXCJLRURcIixcclxuICAgIHNjaG9vbFR5cGU6IFwiR3ltbmFzaXVtXCJcclxufSx7XHJcbiAgICBkaXNwbGF5TmFtZTogXCJ2ZW1lbmRvLmVsZXZAa2Vkc2Nob29scy5jb21cIixcclxuICAgIG1haWw6IFwidmVtZW5kby5lbGV2QGtlZHNjaG9vbHMuY29tXCIsXHJcbiAgICByb2xlczogW1wiU1RVREVOVFwiXSxcclxuICAgIHVzZXJuYW1lOiBcInZlbWVuZG8uZWxldkBrZWRzY2hvb2xzLmNvbVwiLFxyXG4gICAgc2Nob29sOiBcIktFRFwiLFxyXG4gICAgc2Nob29sVHlwZTogXCJHeW1uYXNpdW1cIlxyXG59LHtcclxuICAgIGRpc3BsYXlOYW1lOiBcIk1lZGFyYmV0YXJlIE5hY2thXCIsXHJcbiAgICBtYWlsOiBcIm1lZGFyYmV0YXJlLm5hY2thQGt1bnNrYXBzc2tvbGFuLnNlXCIsXHJcbiAgICByb2xlczogW1wiRU1QTE9ZRUVcIl0sXHJcbiAgICB1c2VybmFtZTogXCJtZWRhcmJldGFyZS5uYWNrYS9LU1wiLFxyXG4gICAgc2Nob29sOiBcIk5hY2thXCIsXHJcbiAgICBzY2hvb2xUeXBlOiBcIkdydW5kc2tvbG9yXCJcclxufSx7XHJcbiAgICBkaXNwbGF5TmFtZTogXCJNZWRhcmJldGFyZSBHbG9iZW5cIixcclxuICAgIG1haWw6IFwibWVkYXJiZXRhcmUuZ2xvYmVuQGt1bnNrYXBzZ3ltbmFzaWV0LnNlXCIsXHJcbiAgICByb2xlczogW1wiRU1QTE9ZRUVcIl0sXHJcbiAgICB1c2VybmFtZTogXCJtZWRhcmJldGFyZS5nbG9iZW4vS1NcIixcclxuICAgIHNjaG9vbDogXCJHbG9iZW5cIixcclxuICAgIHNjaG9vbFR5cGU6IFwiR3ltbmFzaXVtXCJcclxufSx7XHJcbiAgICBkaXNwbGF5TmFtZTogXCJFbGV2IEdsb2JlblwiLFxyXG4gICAgbWFpbDogXCJlbGV2Lmdsb2JlbkBlZHUua3Vuc2thcHNneW1uYXNpZXQuc2VcIixcclxuICAgIHNjaG9vbEdyYWRlOiAyLFxyXG4gICAgcm9sZXM6IFsnU1RVREVOVCddLFxyXG4gICAgdXNlcm5hbWU6IFwiZWxldi5nbG9iZW5cIixcclxuICAgIHNjaG9vbDogXCJHbG9iZW5cIixcclxuICAgIHNjaG9vbFR5cGU6IFwiR3ltbmFzaXVtXCJcclxufSx7XHJcbiAgICBkaXNwbGF5TmFtZTogXCJFbGV2IEJvcsOlc1wiLFxyXG4gICAgbWFpbDogXCJlbGV2LmJvcmFzQGVkdS5rdW5za2Fwc3Nrb2xhbi5zZVwiLFxyXG4gICAgc2Nob29sR3JhZGU6IDcsXHJcbiAgICByb2xlczogWydTVFVERU5UJ10sXHJcbiAgICB1c2VybmFtZTogXCJlbGV2LmJvcmFzXCIsXHJcbiAgICBzY2hvb2w6IFwiQm9yw6VzXCIsXHJcbiAgICBzY2hvb2xUeXBlOiBcIkdydW5kc2tvbG9yXCJcclxufSx7XHJcbiAgICBkaXNwbGF5TmFtZTogXCJFbGV2IEJvcmzDpG5nZVwiLFxyXG4gICAgbWFpbDogXCJlbGV2LmJvcmxhbmdlQGVkdS5rdW5za2Fwc3Nrb2xhbi5zZVwiLFxyXG4gICAgc2Nob29sR3JhZGU6IDksXHJcbiAgICByb2xlczogWydTVFVERU5UJ10sXHJcbiAgICB1c2VybmFtZTogJ2VsZXYuYm9ybGFuZ2UvS1MnLFxyXG4gICAgc2Nob29sOiAnQm9ybMOkbmdlJyxcclxuICAgIHNjaG9vbFR5cGU6IFwiR3ltbmFzaXVtXCJcclxufSx7XHJcbiAgICBkaXNwbGF5TmFtZTogXCJSb2xsLWzDtnNcIixcclxuICAgIG1haWw6IFwibm9uZUBrdW5za2Fwc3Nrb2xhbi5zZVwiLFxyXG4gICAgdXNlcm5hbWU6IFwibm9uZVwiLFxyXG4gICAgcm9sZXM6IFtdXHJcbn1dO1xyXG5cclxuIiwiaW1wb3J0IGVudiBmcm9tICcuLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5pbXBvcnQgeyB1c2VycyB9IGZyb20gJy4vZGF0YS91c2Vycyc7XHJcbmltcG9ydCB7IHBhcnNlUXVlcnlTdHJpbmcgfSBmcm9tICcuLi91dGlscy9xdWVyeS1zdHJpbmcnO1xyXG5cclxuY29uc3QgdXNlcm5hbWUgPSBwYXJzZVF1ZXJ5U3RyaW5nIChsb2NhdGlvbi5zZWFyY2gpLnVzZXI7XHJcbmlmICh1c2VybmFtZSkge1xyXG4gIGNvbnN0IHVzZXIgPSB1c2Vycy5maW5kKHUgPT4gdS51c2VybmFtZSA9PT0gdXNlcm5hbWUpO1xyXG4gIGlmICh1c2VyKSB7XHJcbiAgICBlbnYuY3VycmVudFVzZXIgPSB1c2VyO1xyXG4gIH1cclxufVxyXG5cclxuY29uc3QgeyByb2xlLCBzY2hvb2wgfSA9IHBhcnNlUXVlcnlTdHJpbmcobG9jYXRpb24uc2VhcmNoKTtcclxuaWYgKGVudi5jdXJyZW50VXNlcikge1xyXG4gIGlmIChyb2xlKSB7XHJcbiAgICBlbnYuY3VycmVudFVzZXIucm9sZXMgPSByb2xlLnNwbGl0KCcsJyk7XHJcbiAgfVxyXG4gIGlmIChzY2hvb2wpIHtcclxuICAgIGVudi5jdXJyZW50VXNlci5zY2hvb2wgPSBzY2hvb2w7XHJcbiAgfVxyXG59XHJcbiIsIi8vIDxJbml0aWFsaXphdGlvbj5cclxuaW1wb3J0ICcuL3NldC1jdXJyZW50LXVzZXInOyAvLyBFbXVsYXRlIHNlcnZlci1zaWRlIHNjcmlwdCB0byBzZXQgY3VycmVudCB1c2VyXHJcbmltcG9ydCAnLi4vZ2xvYmFsLXNldHRlcnMvc2V0LWFsbCc7IC8vIENsaWVudC1zaWRlIGluaXRpYWxpemF0aW9uXHJcbi8vIDwvSW5pdGlhbGl6YXRpb24+XHJcblxyXG5pbXBvcnQgZW52IGZyb20gJy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgQ291cnNlQnVpbGRlciB9IGZyb20gJy4uL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXInO1xyXG5pbXBvcnQgeyBDaG9vc2VVc2VyIH0gZnJvbSAnLi91dGlscy9jaG9vc2UtdXNlcic7XHJcbmltcG9ydCB7IExhbmd1YWdlQ29udGV4dCB9IGZyb20gJy4uL2NvbXBvbmVudHMvdXRpbGl0eS1jb21wb25lbnRzL0xhbmd1YWdlQ29udGV4dCc7XHJcbmltcG9ydCB7IEluamVjdGVkSW50bFByb3BzLCBpbmplY3RJbnRsIH0gZnJvbSAncmVhY3QtaW50bCc7XHJcbmltcG9ydCB7IHNldHVwSW50bCB9IGZyb20gJy4uL2NvbXBvbmVudHMvdXRpbGl0eS1jb21wb25lbnRzL1NldHVwTGFuZ3VhZ2VJbnRsJztcclxuXHJcbmNsYXNzIF9BcHAgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8SW5qZWN0ZWRJbnRsUHJvcHM+IHtcclxuICBjb25zdHJ1Y3Rvcihwcm9wczogYW55KSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICBpZiAoIWxvY2F0aW9uLmhhc2gpIGxvY2F0aW9uLmhhc2ggPSBcIiMvXCI7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7aW50bH0gPSB0aGlzLnByb3BzO1xyXG4gICAgcmV0dXJuIGVudi5jdXJyZW50VXNlciA/XHJcbiAgICAgIDxMYW5ndWFnZUNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3sgaW50bCB9fT5cclxuICAgICAgICA8Q291cnNlQnVpbGRlclxyXG4gICAgICAgICAgdmlld0NvdXJzZVVybD1cImNvdXJzZXZpZXdlci5odG1sXCJcclxuICAgICAgICAgIGZlZWRiYWNrVXJsPVwiaHR0cDovL3N2dC5zZS9ueWhldGVyXCIgLz5cclxuICAgICAgPC9MYW5ndWFnZUNvbnRleHQuUHJvdmlkZXI+XHJcbiAgICA6IDxDaG9vc2VVc2VyIC8+XHJcbiAgfVxyXG59XHJcblxyXG5jb25zdCBBcHAgPSBzZXR1cEludGwoaW5qZWN0SW50bChfQXBwKSk7XHJcbmV4cG9ydCBkZWZhdWx0IEFwcDtcclxuXHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgdXNlcnMgfSBmcm9tICcuLi9kYXRhL3VzZXJzJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBDaG9vc2VVc2VyKCkge1xyXG4gIGxldCBzZWxlY3Q7XHJcbiAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwic3YtbGF5b3V0XCI+XHJcbiAgICA8aDI+VsOkbGogYW52w6RuZGFyZTwvaDI+XHJcbiAgICA8dGFibGUgY2xhc3NOYW1lPVwibG9naW4tdGFibGVcIj48dGhlYWQ+PHRyPlxyXG4gICAgICA8dGg+TmFtbjwvdGg+XHJcbiAgICAgIDx0aD5Sb2xsZXI8L3RoPlxyXG4gICAgICA8dGg+RS1wb3N0PC90aD5cclxuICAgICAgPHRoPlNrb2xhPC90aD5cclxuICAgIDwvdHI+PC90aGVhZD5cclxuICAgICAgPHRib2R5PlxyXG4gICAgICAgIHt1c2Vycy5tYXAoKHsgdXNlcm5hbWUsIGRpc3BsYXlOYW1lLCBtYWlsLCBzY2hvb2wsIHJvbGVzIH0pID0+XHJcbiAgICAgICAgICA8dHIga2V5PXttYWlsfSBvbkNsaWNrPXsoKSA9PiBsb2NhdGlvbi5zZWFyY2ggPSBgP3VzZXI9JHt1c2VybmFtZX1gfT5cclxuICAgICAgICAgICAgPHRkPntkaXNwbGF5TmFtZX08L3RkPlxyXG4gICAgICAgICAgICA8dGQgc3R5bGU9e3JvbGVzLmxlbmd0aCA9PT0gMCA/IHsgZm9udFN0eWxlOiAnaXRhbGljJyB9IDoge319Pntyb2xlcy5sZW5ndGggPT09IDAgPyBcInNha25hciByb2xsZXJcIiA6IHJvbGVzLmpvaW4oJywgJyl9PC90ZD5cclxuICAgICAgICAgICAgPHRkPnttYWlsfTwvdGQ+XHJcbiAgICAgICAgICAgIDx0ZCBzdHlsZT17c2Nob29sID8ge30gOiB7IGZvbnRTdHlsZTogJ2l0YWxpYycgfX0+e3NjaG9vbCB8fCBcInNha25hciBza29sYVwifTwvdGQ+XHJcbiAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICl9XHJcbiAgICAgIDwvdGJvZHk+PC90YWJsZT5cclxuICA8L2Rpdj5cclxufTtcclxuIiwiXHJcbmV4cG9ydCBjbGFzcyBDYWNoZWRSZXNwb25zZTxUPiB7XHJcbiAgICBwcm9taXNlOiBQcm9taXNlPFQ+IHwgbnVsbDtcclxuICAgIHJlc3VsdDogVCB8IG51bGw7XHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgcXVlcnllcjogKCk9PlByb21pc2U8VD4pIHtcclxuICAgICAgICB0aGlzLnByb21pc2UgPSBudWxsO1xyXG4gICAgICAgIHRoaXMucmVzdWx0ID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBxdWVyeSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wcm9taXNlID9cclxuICAgICAgICAgICAgdGhpcy5wcm9taXNlIDpcclxuICAgICAgICAgICAgKHRoaXMucHJvbWlzZSA9IHRoaXMucXVlcnllcigpLnRoZW4oeCA9PiB0aGlzLnJlc3VsdCA9IHgpKTtcclxuICAgIH1cclxuXHJcbiAgICByZXNldCgpIHtcclxuICAgICAgICB0aGlzLnByb21pc2UgPSBudWxsO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHtMfSBmcm9tICcuL3V0aWxzJztcclxuaW1wb3J0IHtkYn0gZnJvbSAnLi4vZ2xvYmFscy9kYic7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRXcml0ZXIgfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBSZW1vdmVJdGVtIH0gZnJvbSAnLi4vY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci9zdWItY29tcG9uZW50cy9yZW1vdmUtaXRlbSc7XHJcblxyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxufVxyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICBlcnJvcnM6IEVycm9yU3RydWN0W107XHJcbiAgaW5mb3M6IHN0cmluZ1tdO1xyXG4gIC8vZGJXcml0ZXJSZXRyeWFibGVFcnJvcj86IEVycm9yO1xyXG4gIGRiV3JpdGVySXNTYXZpbmc/OiBib29sZWFuO1xyXG4gIGRiV3JpdGVySXNFZGl0ZWQ/OiBib29sZWFuO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgRXJyb3JTdHJ1Y3Qge1xyXG4gIG1lc3NhZ2U6IHN0cmluZztcclxuICByZXRyeWFibGU/OiBib29sZWFuO1xyXG4gIGRldGFpbHM/OiBFcnJvcjtcclxuICBzaG93RGV0YWlscz86IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBFcnJvclN1Y2Nlc3NGZWVkYmFjayBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcyxTdGF0ZT4ge1xyXG4gIGNvbnN0cnVjdG9yIChwcm9wczogUHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICAgIHRoaXMuc3RhdGU9e1xyXG4gICAgICBlcnJvcnM6IFtdLFxyXG4gICAgICBpbmZvczogW11cclxuICAgIH07XHJcbiAgICB0aGlzLl91bmhhbmRsZWRSZWplY3Rpb24gPSB0aGlzLl91bmhhbmRsZWRSZWplY3Rpb24uYmluZCh0aGlzKTtcclxuICAgIHRoaXMuX2Vycm9yID0gdGhpcy5fZXJyb3IuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuX2N1c3RvbUVycm9yID0gdGhpcy5fY3VzdG9tRXJyb3IuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuX29uSW5mbyA9IHRoaXMuX29uSW5mby5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5fZGJXcml0ZXJFcnJvciA9IHRoaXMuX2RiV3JpdGVyRXJyb3IuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuX2RiV3JpdGVyU3RhdGVDaGFuZ2VkID0gdGhpcy5fZGJXcml0ZXJTdGF0ZUNoYW5nZWQuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgX2FkZEVycm9yKG1lc3NhZ2U6IHN0cmluZywgZGV0YWlscz86IEVycm9yLCByZXRyeWFibGU/OiBib29sZWFuKSB7XHJcbiAgICAvL2NvbnNvbGUuZXJyb3IobWVzc2FnZSwge3JldHJ5YWJsZTogISFyZXRyeWFibGUsIGRldGFpbHN9KTtcclxuICAgIHRoaXMuc2V0U3RhdGUoKHtlcnJvcnN9KSA9PiB7XHJcbiAgICAgIGlmIChlcnJvcnMuc29tZShlID0+IGUubWVzc2FnZSA9PT0gbWVzc2FnZSkpIHJldHVybiB7ZXJyb3JzfTtcclxuICAgICAgaWYgKGVycm9ycy5sZW5ndGggPiAyKSBlcnJvcnMgPSBlcnJvcnMuc2xpY2UoMSk7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgZXJyb3JzOiBlcnJvcnMuY29uY2F0KFt7bWVzc2FnZSwgZGV0YWlscywgcmV0cnlhYmxlfV0pXHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuICAgIC8vIFJlbW92ZSBub24tcmV0cnlhYmxlIGVycm9ycyBhZnRlciAzMCBzZWNvbmRzOlxyXG4gICAgaWYgKCFyZXRyeWFibGUpIHNldFRpbWVvdXQoKCk9PntcclxuICAgICAgdGhpcy5zZXRTdGF0ZSgoe2Vycm9yc30pID0+ICh7XHJcbiAgICAgICAgZXJyb3JzOiBlcnJvcnMuZmlsdGVyKGUgPT4gZS5tZXNzYWdlICE9PSBtZXNzYWdlKVxyXG4gICAgICB9KSk7XHJcbiAgICB9LCAzMDAwMCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIF9hZGRJbmZvKG1lc3NhZ2U6IHN0cmluZykge1xyXG4gICAgaWYgKG1lc3NhZ2UgPT09IFwiXCIpIHtcclxuICAgICAgLy8gVHVybiBvZmYgY3VycmVudCBpbmZvIG1lc3NhZ2VzXHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe2luZm9zOiBbXX0pO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLnNldFN0YXRlKCh7aW5mb3N9KSA9PiB7XHJcbiAgICAgIGlmIChpbmZvcy5zb21lKGluZm8gPT4gaW5mbyA9PT0gbWVzc2FnZSkpIHJldHVybiB7aW5mb3N9O1xyXG4gICAgICBpZiAoaW5mb3MubGVuZ3RoID4gMSkgaW5mb3MgPSBpbmZvcy5zbGljZSgxKTtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBpbmZvczogW21lc3NhZ2VdIC8vIHdhczogaW5mb3MuY29uY2F0KG1lc3NhZ2UpLiBCdXQgaXQgc3Vja3MhXHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuICAgIC8vIFJlbW92ZSBpbmZvIG1lc3NhZ2UgYWZ0ZXIgMTAgc2Vjb25kczpcclxuICAgIHNldFRpbWVvdXQoKCk9PntcclxuICAgICAgdGhpcy5zZXRTdGF0ZSgoe2luZm9zfSkgPT4gKHtcclxuICAgICAgICBpbmZvczogaW5mb3MuZmlsdGVyKG1zZyA9PiBtc2cgIT09IG1lc3NhZ2UpXHJcbiAgICAgIH0pKTtcclxuICAgIH0sIDEwMDAwKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgX2RiV3JpdGVyRXJyb3IgKGVycm9yOiBFcnJvciwgcmV0cnlhYmxlOiBib29sZWFuKSB7XHJcbiAgICB0aGlzLl9hZGRFcnJvcihgRGV0IGfDpXIgaW50ZSBhdHQgc3BhcmEgdGlsbCBzZXJ2ZXJuYCwgZXJyb3IsIHJldHJ5YWJsZSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIF9kYldyaXRlclN0YXRlQ2hhbmdlZCAoe2lzRWRpdGVkLCBpc1NhdmluZ306IEtlZEJhY2tlbmRXcml0ZXIpIHtcclxuICAgIGlmICghaXNFZGl0ZWQpIHtcclxuICAgICAgLy8gSWYgaXNFZGl0ZWQgaXMgZmFsc2UsIGEgc3VjY2Vzc2Z1bCB3cml0ZSBtdXN0IGhhdmUgaGFwcGVuZWQsIGFuZFxyXG4gICAgICAvLyB0aGVyZSBjYW5ub3QgYmUgYW55IHJldHJ5YWJsZSBlcnJvciBhbnltb3JlXHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoKHtlcnJvcnN9KSA9PiB7XHJcbiAgICAgICAgZXJyb3JzID0gZXJyb3JzLmZpbHRlcihlID0+ICFlLnJldHJ5YWJsZSk7XHJcbiAgICAgICAgcmV0dXJuIHtlcnJvcnN9O1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICBkYldyaXRlcklzRWRpdGVkOiBpc0VkaXRlZCxcclxuICAgICAgZGJXcml0ZXJJc1NhdmluZzogaXNTYXZpbmdcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndW5oYW5kbGVkcmVqZWN0aW9uJywgdGhpcy5fdW5oYW5kbGVkUmVqZWN0aW9uKTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIHRoaXMuX2Vycm9yKTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjdXN0b21lcnJvcicsIHRoaXMuX2N1c3RvbUVycm9yKTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdpbmZvJywgdGhpcy5fb25JbmZvKTtcclxuICAgIGRiLndyaXRlci5vbkVycm9yKHRoaXMuX2RiV3JpdGVyRXJyb3IpO1xyXG4gICAgZGIud3JpdGVyLm9uU3RhdGVDaGFuZ2UodGhpcy5fZGJXcml0ZXJTdGF0ZUNoYW5nZWQpO1xyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XHJcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigndW5oYW5kbGVkcmVqZWN0aW9uJywgdGhpcy5fdW5oYW5kbGVkUmVqZWN0aW9uKTtcclxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIHRoaXMuX2Vycm9yKTtcclxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdjdXN0b21lcnJvcicsIHRoaXMuX2N1c3RvbUVycm9yKTtcclxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdpbmZvJywgdGhpcy5fb25JbmZvKTtcclxuICAgIGRiLndyaXRlci5vZmYodGhpcy5fZGJXcml0ZXJFcnJvcik7XHJcbiAgICBkYi53cml0ZXIub2ZmKHRoaXMuX2RiV3JpdGVyU3RhdGVDaGFuZ2VkKTtcclxuICB9XHJcblxyXG4gIF91bmhhbmRsZWRSZWplY3Rpb24gKGV2OiBFdmVudCAmIHtyZWFzb246IEVycm9yfSkge1xyXG4gICAgdGhpcy5fYWRkRXJyb3IoYEV0dCBva8OkbnQgZmVsIGludHLDpGZmYWRlLi4uYCwgZXYucmVhc29uKTtcclxuICB9XHJcblxyXG4gIF9lcnJvciAoZXY6IEV2ZW50ICYge2Vycm9yOiBFcnJvcn0pIHtcclxuICAgIHRoaXMuX2FkZEVycm9yKGV2LmVycm9yID8gZXYuZXJyb3IubWVzc2FnZSA6IGBFdHQgb2vDpG50IGZlbCBpbnRyw6RmZmFkZS4uLmAsIGV2LmVycm9yKTtcclxuICB9XHJcblxyXG4gIF9jdXN0b21FcnJvciAoZXY6IEN1c3RvbUV2ZW50KSB7XHJcbiAgICB0aGlzLl9hZGRFcnJvcihldi5kZXRhaWwpO1xyXG4gIH1cclxuXHJcbiAgX29uSW5mbyhldjogQ3VzdG9tRXZlbnQpIHtcclxuICAgIHRoaXMuX2FkZEluZm8oZXYuZGV0YWlsKTtcclxuICB9IFxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7ZXJyb3JzLCBpbmZvcywgZGJXcml0ZXJJc1NhdmluZ30gPSB0aGlzLnN0YXRlO1xyXG4gICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwiZXJyb3Itc3VjY2Vzcy1mZWVkYmFja1wiIHN0eWxlPXt7XHJcbiAgICAgIHBvc2l0aW9uOiBcImZpeGVkXCIsXHJcbiAgICAgIGxlZnQ6IDAsXHJcbiAgICAgIHRvcDogMCxcclxuICAgICAgd2lkdGg6IFwiMTAwJVwiLFxyXG4gICAgICBwb2ludGVyRXZlbnRzOiAnbm9uZSdcclxuICAgIH19PlxyXG4gICAgICA8ZGl2IHN0eWxlPXt7ZGlzcGxheTogJ3RhYmxlJywgbWFyZ2luOiBcIjAgYXV0b1wifX0+XHJcbiAgICAgICAge2Vycm9ycy5maWx0ZXIoZSA9PiAhZS5yZXRyeWFibGUgfHwgIWRiV3JpdGVySXNTYXZpbmcpXHJcbiAgICAgICAgLm1hcCgoe21lc3NhZ2UsIGRldGFpbHMsIHJldHJ5YWJsZSwgc2hvd0RldGFpbHN9KSA9PiAoXHJcbiAgICAgICAgICA8ZGl2IGtleT17bWVzc2FnZX0gY2xhc3NOYW1lPVwiZXJyb3JcIj5cclxuICAgICAgICAgICAgPGRpdiBzdHlsZT17e2Zsb2F0OidsZWZ0J319PnttZXNzYWdlfTwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPXt7cG9pbnRlckV2ZW50czogJ2F1dG8nfX0+XHJcbiAgICAgICAgICAgICAgPFJlbW92ZUl0ZW0gb25DbGljaz17KCk9PnRoaXMucmVtb3ZlRXJyb3IobWVzc2FnZSl9IC8+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICB7ZGV0YWlscyB8fCByZXRyeWFibGUgPyA8ZGl2IHN0eWxlPXt7cG9pbnRlckV2ZW50czogJ2F1dG8nfX0+XHJcbiAgICAgICAgICAgICAge2RldGFpbHMgPyA8PjxhIGNsYXNzTmFtZT1cImJ0blwiIG9uQ2xpY2s9eygpPT50aGlzLnRvZ2dsZURldGFpbHMobWVzc2FnZSl9PntzaG93RGV0YWlscyA/IFwiRMO2bGogZGV0YWlsZXJcIiA6IFwiVmlzYSBkZXRhaWxqZXJcIn08L2E+Jm5ic3A7PC8+IDogdW5kZWZpbmVkfVxyXG4gICAgICAgICAgICAgIHtzaG93RGV0YWlscyA/IDxwPnsnJytkZXRhaWxzfTwvcD46IDw+Jm5ic3A7PC8+fVxyXG4gICAgICAgICAgICAgIHtyZXRyeWFibGUgPyA8YSBjbGFzc05hbWU9XCJidG5cIiBvbkNsaWNrPXsoKT0+dGhpcy5yZXRyeVNhdmUoKX0+RsO2cnPDtmsgc3BhcmEgbnU8L2E+IDogdW5kZWZpbmVkfVxyXG4gICAgICAgICAgICA8L2Rpdj46IHVuZGVmaW5lZH1cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICkpfVxyXG4gICAgICAgIHtpbmZvcy5tYXAobWVzc2FnZSA9PiBcclxuICAgICAgICAgIDxwIGtleT17bWVzc2FnZX0gY2xhc3NOYW1lPVwiaW5mb1wiPnttZXNzYWdlfTwvcD5cclxuICAgICAgICApfVxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PjtcclxuICB9XHJcbiAgcmVtb3ZlRXJyb3IobWVzc2FnZTogc3RyaW5nKTogYW55IHtcclxuICAgIHRoaXMuc2V0U3RhdGUoKHtlcnJvcnN9KSA9PiAoe1xyXG4gICAgICBlcnJvcnM6IGVycm9ycy5maWx0ZXIoZSA9PiBlLm1lc3NhZ2UgIT09IG1lc3NhZ2UpXHJcbiAgICB9KSk7XHJcbiAgfVxyXG5cclxuICByZXRyeVNhdmUoKSB7XHJcbiAgICBkYi53cml0ZXIucmV0cnlTYXZlKCk7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVEZXRhaWxzKG1lc3NhZ2U6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgdGhpcy5zZXRTdGF0ZSgoe2Vycm9yc30pID0+ICh7ZXJyb3JzOiBlcnJvcnMubWFwKGVycm9yID0+IGVycm9yLm1lc3NhZ2UgPT09IG1lc3NhZ2UgP1xyXG4gICAgICB7XHJcbiAgICAgICAgLi4uZXJyb3IsXHJcbiAgICAgICAgc2hvd0RldGFpbHM6ICFlcnJvci5zaG93RGV0YWlsc1xyXG4gICAgICB9IDpcclxuICAgICAgZXJyb3IpXHJcbiAgICB9KSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XHJcbmltcG9ydCB7IGNmZyB9IGZyb20gJy4uL2dsb2JhbHMvS0VELmNmZyc7XHJcblxyXG5jb25zdCBIRUFSVEJFQVRfSU5URVJWQUwgPSA1ICogNjAgKiAxMDAwOyAvLyA1IG1pbnV0ZXMuXHJcbmNvbnN0IEhFQVJUQkVBVF9VUkwgPSBjZmcuS0VEX0tFRVBfQUxJVkVfVVJMO1xyXG5cclxubGV0IGxhc3RBY3Rpdml0eSA9IERhdGUubm93KCk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24ga2VlcFNlc3Npb25BbGl2ZSgpIHtcclxuICBzZXRJbnRlcnZhbChvblRpbWVvdXQsIEhFQVJUQkVBVF9JTlRFUlZBTCk7XHJcbiAgc2V0VGltZW91dCgoKT0+JCgnYm9keScpXHJcbiAgICAubW91c2Vtb3ZlKG9uVXNlckFjdGl2ZSlcclxuICAgIC5rZXlwcmVzcyhvblVzZXJBY3RpdmUpXHJcbiAgICAuc2Nyb2xsKG9uVXNlckFjdGl2ZSksIDEwMCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uVXNlckFjdGl2ZSgpIHtcclxuICBsYXN0QWN0aXZpdHkgPSBEYXRlLm5vdygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvblRpbWVvdXQoKSB7XHJcbiAgY29uc3QgaW5hY3Rpdml0eVRpbWUgPSBEYXRlLm5vdygpIC0gbGFzdEFjdGl2aXR5O1xyXG4gIGlmIChpbmFjdGl2aXR5VGltZSA8IEhFQVJUQkVBVF9JTlRFUlZBTCkge1xyXG4gICAgaGVhcnRiZWF0KCk7XHJcbiAgfVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBoZWFydGJlYXQoKSB7XHJcbiAgY29uc29sZS5sb2coYFNlbmRpbmcgaGVhcnRiZWF0IHJlcXVlc3QgdG8gJHtIRUFSVEJFQVRfVVJMfWApO1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChIRUFSVEJFQVRfVVJMLCB7XHJcbiAgICAgIGNhY2hlOiAnbm8tY2FjaGUnLFxyXG4gICAgICBjcmVkZW50aWFsczogJ3NhbWUtb3JpZ2luJ1xyXG4gICAgfSk7XHJcbiAgICBjb25zb2xlLmxvZyhgUmVzcG9uc2UgZnJvbSAke0hFQVJUQkVBVF9VUkx9OiAke3Jlcy5zdGF0dXN9ICR7cmVzLnN0YXR1c1RleHR9YCk7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICBjb25zb2xlLndhcm4oYFJlcXVlc3QgdG8gJHtIRUFSVEJFQVRfVVJMfSBmYWlsZWQ6ICR7ZXJyfWApO1xyXG4gIH1cclxufVxyXG4iLCJjb25zdCBERUZBVUxUX0NBQ0hFX0VYUElSQVRJT04gPSAzMCAqIDYwICogMTAwMDsgLy8gMzAgbWludXRlcy5cclxuXHJcbnR5cGUgUHJvbWlzZVJldHVybmluZ01ldGhvZE5hbWVzPEFQST4gPSB7XHJcbiAgW01FVEhPRCBpbiBrZXlvZiBBUEldOiBBUElbTUVUSE9EXSBleHRlbmRzICguLi5hcmdzOiBhbnlbXSkgPT4gUHJvbWlzZTxhbnk+ID8gTUVUSE9EIDogbmV2ZXJcclxufVxyXG5cclxudHlwZSBDb252ZXJ0TWV0aG9kVG9TdXNwZW5zZTxGPiA9IEYgZXh0ZW5kcyAoLi4uYXJnczogaW5mZXIgQSkgPT4gUHJvbWlzZTxpbmZlciBSPiA/XHJcbiAgKC4uLmFyZ3M6IEEpID0+IFIgOlxyXG4gIEY7XHJcblxyXG5leHBvcnQgdHlwZSBTdXNwZW5zZUJhc2VkQVBJPEFQST4gPSB7XHJcbiAgW01FVEhPRCBpbiBrZXlvZiBQcm9taXNlUmV0dXJuaW5nTWV0aG9kTmFtZXM8QVBJPl06IENvbnZlcnRNZXRob2RUb1N1c3BlbnNlPEFQSVtNRVRIT0RdPlxyXG59XHJcblxyXG50eXBlIE9wdGlvbnMgPSB7XHJcbiAgaXNBcGlNZXRob2Q/OiAocHJvcDogc3RyaW5nKT0+Ym9vbGVhbixcclxuICBjYWNoZUV4cGlyYXRpb24/OiBudW1iZXJcclxufVxyXG5cclxuY29uc3QgZGVmYXVsdE9wdGlvbnM6IE9wdGlvbnMgPSB7XHJcbiAgaXNBcGlNZXRob2Q6IGYgPT4gdHlwZW9mIGYgPT09ICdmdW5jdGlvbicsXHJcbiAgY2FjaGVFeHBpcmF0aW9uOiBERUZBVUxUX0NBQ0hFX0VYUElSQVRJT05cclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYWtlU3VzcGVuc2VBcGk8QVBJPihhcGk6IEFQSSwgb3B0aW9ucyA9IGRlZmF1bHRPcHRpb25zKTogU3VzcGVuc2VCYXNlZEFQSTxBUEk+XHJcbntcclxuICBvcHRpb25zID0gey4uLmRlZmF1bHRPcHRpb25zLCAuLi5vcHRpb25zfTtcclxuICBjb25zdCB7aXNBcGlNZXRob2QsIGNhY2hlRXhwaXJhdGlvbn0gPSBvcHRpb25zO1xyXG5cclxuICBjb25zdCBydjogU3VzcGVuc2VCYXNlZEFQSTxBUEk+ID0gT2JqZWN0LmNyZWF0ZShhcGkgYXMgYW55KSBhcyBTdXNwZW5zZUJhc2VkQVBJPEFQST47XHJcbiAgY29uc3QgY2FjaGU6IHtba2V5OiBzdHJpbmddOiB7dGltZW91dDogbnVtYmVyLCB2YWx1ZT86IGFueSwgZXJyb3I/OiBhbnksIHByb21pc2U/OiBQcm9taXNlPGFueT59fSA9IHt9O1xyXG5cclxuICAvLyBXYWxrIHRoZSBpbnN0YW5jZSArIHByb3RvdHlwZSBjaGFpbiB0byBnZW5lcmF0ZSBzdXNwZW5zZSB2ZXJzaW9uIG9mIGVhY2ggcHJvbWlzZSByZXR1cm5pbmcgbWV0aG9kXHJcbiAgZm9yIChsZXQgcHJvdG8gPSBhcGk7IHByb3RvICYmIHByb3RvICE9PSBPYmplY3QucHJvdG90eXBlOyBwcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihwcm90bykpIHtcclxuICAgIHN1c3BlbmRpZnkocHJvdG8pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc3VzcGVuZGlmeShwcm90bykge1xyXG4gICAgT2JqZWN0LmtleXMocHJvdG8pLmZvckVhY2gocHJvcCA9PiB7XHJcbiAgICAgIGlmICghcnYuaGFzT3duUHJvcGVydHkocHJvcCkgJiYgaXNBcGlNZXRob2QocHJvcCkpIHtcclxuICAgICAgICBydltwcm9wXSA9IGZ1bmN0aW9uICguLi5hcmdzKSB7XHJcbiAgICAgICAgICBjb25zdCBrZXkgPSBKU09OLnN0cmluZ2lmeShbcHJvcCwgLi4uYXJnc10pO1xyXG4gICAgICAgICAgY29uc3QgY2FjaGVkRW50cnkgPSBjYWNoZVtrZXldO1xyXG4gICAgICAgICAgaWYgKGNhY2hlZEVudHJ5ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaWYgKGNhY2hlZEVudHJ5LnByb21pc2UpIHRocm93IGNhY2hlZEVudHJ5LnByb21pc2U7XHJcbiAgICAgICAgICAgIGlmIChjYWNoZWRFbnRyeS5lcnJvcikgdGhyb3cgY2FjaGVkRW50cnkuZXJyb3I7XHJcbiAgICAgICAgICAgIGlmIChjYWNoZWRFbnRyeS50aW1lb3V0ID4gRGF0ZS5ub3coKSkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBjYWNoZWRFbnRyeS52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcHJvbWlzZSA9IHByb3RvW3Byb3BdLmFwcGx5KGFwaSwgYXJncykudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICAgIGNhY2hlW2tleV0gPSB7dGltZW91dDogRGF0ZS5ub3coKSArIGNhY2hlRXhwaXJhdGlvbiwgdmFsdWU6IHJlc3VsdH07XHJcbiAgICAgICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAgICAgICBjYWNoZVtrZXldID0ge3RpbWVvdXQ6IERhdGUubm93KCkgKyBjYWNoZUV4cGlyYXRpb24sIGVycm9yfTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNhY2hlW2tleV0gPSB7dGltZW91dDogRGF0ZS5ub3coKSArIGNhY2hlRXhwaXJhdGlvbiwgcHJvbWlzZX07XHJcbiAgICAgICAgICAgIHRocm93IHByb21pc2U7XHJcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IudGhlbikgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgICAgIGNhY2hlW2tleV0gPSB7dGltZW91dDogRGF0ZS5ub3coKSArIGNhY2hlRXhwaXJhdGlvbiwgZXJyb3J9O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gYXMgYW55O1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJldHVybiBydjtcclxufVxyXG4iLCJleHBvcnQgaW50ZXJmYWNlIFBhcnNlUXVlcnlTdHJpbmdPcHRpb25zIHtcclxuICB0b0xvd2VyPzogYm9vbGVhbjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUXVlcnlTdHJpbmcobG9jYXRpb25TZWFyY2g6IHN0cmluZywgb3B0aW9ucz86IFBhcnNlUXVlcnlTdHJpbmdPcHRpb25zKTogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSB7XHJcbiAgY29uc3Qge3RvTG93ZXJ9ID0gKG9wdGlvbnMgfHzCoHt9KSBhcyBQYXJzZVF1ZXJ5U3RyaW5nT3B0aW9ucztcclxuICBjb25zdCByZXN1bHQgPSB7fTtcclxuICBpZiAobG9jYXRpb25TZWFyY2ggJiYgbG9jYXRpb25TZWFyY2gubGVuZ3RoID4gMSlcclxuICAgIGxvY2F0aW9uU2VhcmNoLnN1YnN0cigxKVxyXG4gICAgICAuc3BsaXQoJyYnKVxyXG4gICAgICAubWFwKHBhcnQgPT4gcGFydC5zcGxpdCgnPScpLm1hcChzID0+IGRlY29kZVVSSUNvbXBvbmVudChzLnRyaW0oKSkpKVxyXG4gICAgICAuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiByZXN1bHRbdG9Mb3dlciA/IGtleS50b0xvd2VyQ2FzZSgpIDoga2V5XSA9IHZhbHVlKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBlbmNvZGVQYXJhbXMocGFyYW1zOiB7W2tleTogc3RyaW5nXTpzdHJpbmd9KSB7XHJcbiAgcmV0dXJuIE9iamVjdC5rZXlzKHBhcmFtcykuZmlsdGVyKGtleSA9PiBwYXJhbXNba2V5XSAhPT0gdW5kZWZpbmVkKS5tYXAoa2V5ID0+IGAke2VuY29kZVVSSUNvbXBvbmVudChrZXkpfT0ke2VuY29kZVVSSUNvbXBvbmVudChwYXJhbXNba2V5XSl9YCkuam9pbignJicpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVRdWVyeVN0cmluZyhwYXJhbXM6IHtba2V5OiBzdHJpbmddOnN0cmluZ30pIHtcclxuICByZXR1cm4gXCI/XCIgKyBlbmNvZGVQYXJhbXMocGFyYW1zKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSGFzaFF1ZXJ5U3RyaW5nKGxvY2F0aW9uSGFzaDogc3RyaW5nLCBvcHRpb25zPzogUGFyc2VRdWVyeVN0cmluZ09wdGlvbnMpIHtcclxuICByZXR1cm4gcGFyc2VRdWVyeVN0cmluZyhsb2NhdGlvbkhhc2gsIG9wdGlvbnMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVIYXNoUXVlcnlTdHJpbmcocGFyYW1zOiB7W2tleTogc3RyaW5nXTpzdHJpbmd9KSB7XHJcbiAgcmV0dXJuIFwiI1wiICsgZW5jb2RlUGFyYW1zKHBhcmFtcyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzcGxpdFVybEFuZFF1ZXJ5ICh1cmxXaXRoUG9zc2libGVRdWVyeTogc3RyaW5nKSB7XHJcbiAgY29uc3QgcFF1ZXJ5ID0gdXJsV2l0aFBvc3NpYmxlUXVlcnkuaW5kZXhPZignPycpO1xyXG4gIHJldHVybiBwUXVlcnkgPj0gMCA/XHJcbiAgICBbdXJsV2l0aFBvc3NpYmxlUXVlcnkuc3Vic3RyKDAsIHBRdWVyeSksIHVybFdpdGhQb3NzaWJsZVF1ZXJ5LnN1YnN0cihwUXVlcnkpXSA6XHJcbiAgICBbdXJsV2l0aFBvc3NpYmxlUXVlcnksIFwiXCJdO1xyXG59XHJcbiIsImltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcclxuaW1wb3J0IHsgVGVybSwgQWNhZGVtaWNZZWFyIH0gZnJvbSAnLi4vY29udHJhY3RzL2tlZC1tb2RlbHMnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTY2hvb2xNb21lbnQge1xyXG4gIGFjYWRlbWljWWVhcjogQWNhZGVtaWNZZWFyO1xyXG4gIHRlcm06IFRlcm07XHJcbiAgd2Vlaz86IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEZpcnN0QW5kTGFzdFdlZWtPZlRlcm0odGVybTogVGVybSkge1xyXG4gIHJldHVybiB0ZXJtID09PSAnQVQnID9cclxuICAgIFszMiwgNTFdIDpcclxuICAgIFsxLCAyNV07XHJcbn1cclxuXHJcbi8vTm90IHVzZWQgYW55bW9yZVxyXG4vLyBleHBvcnQgZnVuY3Rpb24gZ2V0VGVybVN0YXJ0QW5kRW5kKG5vdzogbW9tZW50Lk1vbWVudCkgOiBtb21lbnQuTW9tZW50W10ge1xyXG4vLyAgICAgcmV0dXJuIG5vdy5tb250aCgpID49IDYgPyAvLyA2ID0gSnVseSBpbiBKUyBEYXRlcyBhbmQgaW4gbW9tZW50IGFzIHdlbGwhXHJcbi8vICAgICBbbW9tZW50KG5ldyBEYXRlKG5vdy55ZWFyKCksIDcsIDEpKSwgbW9tZW50KG5ldyBEYXRlKG5vdy55ZWFyKCksIDExLCAzMSkpXSA6IC8vIGF1ZzEgLSBkZWMzMVxyXG4vLyAgICAgW21vbWVudChuZXcgRGF0ZShub3cueWVhcigpLCAwLCAxKSksIG1vbWVudChuZXcgRGF0ZShub3cueWVhcigpLCA2LCAzMSkpXTsgLy8gamFuMSAtIGp1bHkzMVxyXG4vLyB9XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGVybVN0YXJFbmREYXRlKGRhdGU6IERhdGUsIGlzRmlyc3RUZXJtOiBib29sZWFuKTogbW9tZW50Lk1vbWVudFtdIHtcclxuICB2YXIgYWRkWWVhciA9IGRhdGUuZ2V0TW9udGgoKSA+PSA3O1xyXG4gIHZhciB0ZXJtWWVhciA9IG51bGw7XHJcblxyXG4gIGlmIChhZGRZZWFyKSB7XHJcbiAgICB0ZXJtWWVhciA9IGlzRmlyc3RUZXJtID8gZGF0ZS5nZXRGdWxsWWVhcigpIDogZGF0ZS5nZXRGdWxsWWVhcigpICsgMTtcclxuICB9IGVsc2Uge1xyXG4gICAgdGVybVllYXIgPSBpc0ZpcnN0VGVybSA/IGRhdGUuZ2V0RnVsbFllYXIoKSAtIDEgOiBkYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgfVxyXG5cclxuICB2YXIgdGVybVllYXJNb21lbnQgPSBtb21lbnQodGVybVllYXIudG9TdHJpbmcoKSwgXCJZWVlZXCIpO1xyXG5cclxuICBpZiAodGVybVllYXJNb21lbnQud2VlaygpICE9IDEpIHtcclxuICAgIHRlcm1ZZWFyTW9tZW50ID0gdGVybVllYXJNb21lbnQuY2xvbmUoKS5hZGQoMSwgJ3dlZWsnKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBpc0ZpcnN0VGVybSA/IFttb21lbnQodGVybVllYXJNb21lbnQuY2xvbmUoKSkud2VlaygzMikuc3RhcnRPZignd2VlaycpLCBtb21lbnQodGVybVllYXJNb21lbnQuY2xvbmUoKSkud2Vlayg1MSkuZW5kT2YoJ3dlZWsnKV0gOlxyXG4gICAgW21vbWVudCh0ZXJtWWVhck1vbWVudC5jbG9uZSgpKSwgbW9tZW50KHRlcm1ZZWFyTW9tZW50LmNsb25lKCkpLndlZWsoMjUpLmVuZE9mKCd3ZWVrJyldO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2Nob29sTW9tZW50KG06IG1vbWVudC5Nb21lbnQpOiBTY2hvb2xNb21lbnQge1xyXG4gIGNvbnN0IHRoaXNZZWFyID0gbS55ZWFyKCk7XHJcbiAgY29uc3QgaXNBdXR1bW4gPSBtLm1vbnRoKCkgPj0gNjsgLy8gZGV0ZXJtaW5lIFxyXG4gIGNvbnN0IFthdXR1bW5ZZWFyLCBzcHJpbmdZZWFyXSA9IGlzQXV0dW1uID9cclxuICAgIFt0aGlzWWVhciwgdGhpc1llYXIgKyAxXSA6XHJcbiAgICBbdGhpc1llYXIgLSAxLCB0aGlzWWVhcl07XHJcbiAgY29uc3QgYWNhZGVtaWNZZWFyID0gJycgKyBhdXR1bW5ZZWFyICsgJy8nICsgc3ByaW5nWWVhcjtcclxuICBjb25zdCB0ZXJtID0gaXNBdXR1bW4gPyAnQVQnIDogJ1NUJztcclxuICBjb25zdCB3ZWVrID0gbS53ZWVrKCk7XHJcbiAgcmV0dXJuIHsgYWNhZGVtaWNZZWFyLCB0ZXJtLCB3ZWVrIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRZZWFyKGFZZWFyOiBBY2FkZW1pY1llYXIsIG51bVllYXJzVG9BZGQ6IG51bWJlcik6IEFjYWRlbWljWWVhciB7XHJcbiAgcmV0dXJuIGFZZWFyLnNwbGl0KCcvJylcclxuICAgIC5tYXAoeWVhclN0ciA9PiBwYXJzZUludCh5ZWFyU3RyKSArIG51bVllYXJzVG9BZGQpXHJcbiAgICAubWFwKHllYXIgPT4gJycgKyB5ZWFyKVxyXG4gICAgLmpvaW4oJy8nKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG5leHRBY2FkZW1pY1llYXIoYVllYXI6IEFjYWRlbWljWWVhcik6IEFjYWRlbWljWWVhciB7XHJcbiAgcmV0dXJuIGFkZFllYXIoYVllYXIsIDEpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcHJldkFjYWRlbWljWWVhcihhWWVhcjogQWNhZGVtaWNZZWFyKTogQWNhZGVtaWNZZWFyIHtcclxuICByZXR1cm4gYWRkWWVhcihhWWVhciwgLTEpO1xyXG59XHJcbiIsImltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcclxuaW1wb3J0IHsgU2Nob29sTW9tZW50LCBnZXRTY2hvb2xNb21lbnQsIGFkZFllYXIgfSBmcm9tICcuL3NjaG9vbC1tb21lbnQnO1xyXG5pbXBvcnQgeyBBY2FkZW1pY1llYXIsIFRlcm0gfSBmcm9tICcuLi9jb250cmFjdHMva2VkLW1vZGVscyc7XHJcbmltcG9ydCB7SW5qZWN0ZWRJbnRsfSBmcm9tICdyZWFjdC1pbnRsJztcclxuXHJcbnR5cGUgTW9tZW50ID0gbW9tZW50Lk1vbWVudDtcclxuXHJcbmZ1bmN0aW9uIGlzU2Nob29sTW9tZW50KG9iajogRGF0ZSB8IFNjaG9vbE1vbWVudCk6IG9iaiBpcyBTY2hvb2xNb21lbnQge1xyXG4gIHJldHVybiAnYWNhZGVtaWNZZWFyJyBpbiBvYmo7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBTY2hvb2xUZXJtIHtcclxuICBhY2FkZW1pY1llYXI6IEFjYWRlbWljWWVhcjtcclxuICB0ZXJtOiBUZXJtO1xyXG5cclxuICBjb25zdHJ1Y3RvcihkYXRlT3JTY2hvb2xNb21lbnQ6IERhdGUgfCBTY2hvb2xNb21lbnQpIHtcclxuICAgIGNvbnN0IHNjaG9vbE1vbWVudCA9IGlzU2Nob29sTW9tZW50KGRhdGVPclNjaG9vbE1vbWVudCkgP1xyXG4gICAgICBkYXRlT3JTY2hvb2xNb21lbnQgOiBnZXRTY2hvb2xNb21lbnQobW9tZW50KGRhdGVPclNjaG9vbE1vbWVudCkpO1xyXG4gICAgdGhpcy5hY2FkZW1pY1llYXIgPSBzY2hvb2xNb21lbnQuYWNhZGVtaWNZZWFyO1xyXG4gICAgdGhpcy50ZXJtID0gc2Nob29sTW9tZW50LnRlcm07XHJcbiAgfVxyXG5cclxuICBnZXQgeWVhcigpIHtcclxuICAgIHJldHVybiBwYXJzZUludCh0aGlzLmFjYWRlbWljWWVhclxyXG4gICAgICAgIC5zcGxpdCgnLycpW3RoaXMudGVybSA9PT0gJ0FUJyA/IDAgOiAxXSk7XHJcbiAgfVxyXG5cclxuICBuZXh0VGVybSgpIHtcclxuICAgIHJldHVybiBuZXcgU2Nob29sVGVybSh0aGlzLnRlcm0gPT09ICdBVCcgP1xyXG4gICAgICB7XHJcbiAgICAgICAgdGVybTogJ1NUJyxcclxuICAgICAgICBhY2FkZW1pY1llYXI6IHRoaXMuYWNhZGVtaWNZZWFyXHJcbiAgICAgIH0gOlxyXG4gICAgICB7XHJcbiAgICAgICAgdGVybTogJ0FUJyxcclxuICAgICAgICBhY2FkZW1pY1llYXI6IGFkZFllYXIodGhpcy5hY2FkZW1pY1llYXIsIDEpXHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHJldlRlcm0oKSB7XHJcbiAgICByZXR1cm4gbmV3IFNjaG9vbFRlcm0odGhpcy50ZXJtID09PSAnQVQnID9cclxuICAgICAge1xyXG4gICAgICAgIHRlcm06ICdTVCcsXHJcbiAgICAgICAgYWNhZGVtaWNZZWFyOiBhZGRZZWFyKHRoaXMuYWNhZGVtaWNZZWFyLCAtMSlcclxuICAgICAgfSA6XHJcbiAgICAgIHtcclxuICAgICAgICB0ZXJtOiAnQVQnLFxyXG4gICAgICAgIGFjYWRlbWljWWVhcjogdGhpcy5hY2FkZW1pY1llYXJcclxuICAgICAgfSk7XHJcbiAgICBcclxuICB9XHJcblxyXG4gIHRvTG9jYWxlU3RyaW5nKGludGw6IEluamVjdGVkSW50bCwgc2hvcnRZZWFyPzogYm9vbGVhbikge1xyXG4gICAgbGV0IHllYXIgPSB0aGlzLnRlcm0gPT09ICdBVCcgP1xyXG4gICAgICB0aGlzLmFjYWRlbWljWWVhci5zcGxpdCgnLycpWzBdOlxyXG4gICAgICB0aGlzLmFjYWRlbWljWWVhci5zcGxpdCgnLycpWzFdO1xyXG5cclxuICAgIGlmIChzaG9ydFllYXIpXHJcbiAgICAgIHllYXIgPSB5ZWFyLnN1YnN0cigyKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy50ZXJtID09PSAnQVQnID8gaW50bC5mb3JtYXRNZXNzYWdlKHtpZDondGVybXBsYW5uZXIuc2Vjb25kVGVybScsIGRlZmF1bHRNZXNzYWdlOidIVCB7eWVhcn0nfSwge3llYXI6IHllYXJ9KSA6IFxyXG4gICAgaW50bC5mb3JtYXRNZXNzYWdlKHtpZDondGVybXBsYW5uZXIuZmlyc3RUZXJtJywgZGVmYXVsdE1lc3NhZ2U6J1ZUIHt5ZWFyfSd9LCB7eWVhcjogeWVhcn0pO1xyXG4gIH1cclxufVxyXG4iLCJcclxuZXhwb3J0IGZ1bmN0aW9uIGNhcGl0YWxpemVGaXJzdCAoc3RyKSB7XHJcbiAgICBmb3IgKGxldCBpPTAsIGw9c3RyLmxlbmd0aDsgaTxsOyArK2kpIHtcclxuICAgICAgICBpZiAoc3RyLmNoYXJDb2RlQXQoaSkgPCAweDIwMDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0ci5zdWJzdHIoMCwgaSkgKyBzdHJbaV0udG9Mb2NhbGVVcHBlckNhc2UoKSArIHN0ci5zdWJzdHIoaSArIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBzdHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBleHRlbmQob2JqLCBleHRlbnNpb24pIHtcclxuICAgIGlmICh0eXBlb2YgZXh0ZW5zaW9uICE9PSAnb2JqZWN0JykgcmV0dXJuIG9iajtcclxuICAgIE9iamVjdC5rZXlzKGV4dGVuc2lvbikuZm9yRWFjaChrZXkgPT4ge1xyXG4gICAgICAgIG9ialtrZXldID0gZXh0ZW5zaW9uW2tleV07XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBvYmo7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjbG9uZTxULEU+IChvYmogOiBULCBleHRlbnNpb24/OiBFKSB7XHJcbiAgICBsZXQgY2xvbmUgPSB7fTtcclxuICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG9iaikuZm9yRWFjaChrZXkgPT4ge1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjbG9uZSwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSk7XHJcbiAgICB9KTtcclxuICAgIGlmIChleHRlbnNpb24pIGV4dGVuZChjbG9uZSwgZXh0ZW5zaW9uKTtcclxuICAgIHJldHVybiBjbG9uZSBhcyAoVCAmIEUpO1xyXG59XHJcblxyXG5jb25zdCBjb25jYXQgPSBbXS5jb25jYXQ7XHJcbmV4cG9ydCBmdW5jdGlvbiBmbGF0dGVuPFQ+IChhIDogKFQgfCBUW10pW10pIHtcclxuICAgIHJldHVybiBjb25jYXQuYXBwbHkoW10sIGEpIGFzIFRbXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbXBhcmVQcm9wPFQ+KHByb3A6a2V5b2YgVCkge1xyXG4gICAgcmV0dXJuIChhOiBULGI6IFQpID0+IHtcclxuICAgICAgICBjb25zdCBhUHJvcCA9IGFbcHJvcF0sIGJQcm9wID0gYltwcm9wXTtcclxuICAgICAgICByZXR1cm4gYVByb3AgPiBiUHJvcCA/IDEgOiBhUHJvcCA8IGJQcm9wID8gLTEgOiAwO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY29tcGFyZVByb3BzKFxyXG4gICAgcHJvcHM6IHN0cmluZyB8IHN0cmluZ1tdLFxyXG4gICAgbG9jYWxlcz86IHN0cmluZyB8IHN0cmluZ1tdLFxyXG4gICAgb3B0aW9ucz86IEludGwuQ29sbGF0b3JPcHRpb25zKTogKGE6IGFueSwgYjogYW55KSA9PiBudW1iZXJcclxue1xyXG4gICAgcHJvcHMgPSBBcnJheS5pc0FycmF5KHByb3BzKSA/IHByb3BzIDogW3Byb3BzXTtcclxuXHJcbiAgICBjb25zdCBsb2NhbGVDb21wYXJlID0gKGEsYikgPT5cclxuICAgICAgICB0eXBlb2YgYSA9PT0gJ3N0cmluZycgP1xyXG4gICAgICAgICAgICBhLmxvY2FsZUNvbXBhcmUoYiwgbG9jYWxlcywgb3B0aW9ucykgOlxyXG4gICAgICAgICAgICBhIDwgYiA/IC0xIDogYSA+IGIgPyAxIDogMDtcclxuXHJcbiAgICBmdW5jdGlvbiBjbXBQYXJ0IChhLGIsZmlyc3RQYXJ0OiBzdHJpbmcscmVzdDogc3RyaW5nW10pIHtcclxuICAgICAgICBjb25zdCBmaXJzdEEgPSBhW2ZpcnN0UGFydF07XHJcbiAgICAgICAgY29uc3QgZmlyc3RCID0gYltmaXJzdFBhcnRdO1xyXG4gICAgICAgIGlmIChmaXJzdEEgPT09IGZpcnN0QikgcmV0dXJuIDA7XHJcbiAgICAgICAgaWYgKGZpcnN0QSA9PSBudWxsKSByZXR1cm4gLTE7XHJcbiAgICAgICAgaWYgKGZpcnN0QiA9PSBudWxsKSByZXR1cm4gMTtcclxuICAgICAgICByZXR1cm4gcmVzdC5sZW5ndGggPT09IDAgP1xyXG4gICAgICAgICAgICBsb2NhbGVDb21wYXJlKGZpcnN0QSwgZmlyc3RCKSA6XHJcbiAgICAgICAgICAgIGNtcFBhcnQoZmlyc3RBLCBmaXJzdEIsIHJlc3RbMF0sIHJlc3Quc2xpY2UoMSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBwcm9wc1xyXG4gICAgICAgIC5tYXAocHJvcCA9PiBwcm9wLnNwbGl0KCcuJykpXHJcbiAgICAgICAgLm1hcCgoW2ZpcnN0UGFydCwgLi4ucmVzdF0pID0+IChhLGIpID0+IGNtcFBhcnQoYSxiLCBmaXJzdFBhcnQsIHJlc3QpKVxyXG4gICAgICAgIC5yZWR1Y2UoKGNtcDEsIGNtcDIpID0+XHJcbiAgICAgICAgICAgIChhLGIpID0+IGNtcDEoYSxiKSB8fCBjbXAyKGEsYikpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gTCh0ZXh0LCAuLi5hcmdzKSB7XHJcbiAgICBsZXQgZmlyc3QgPSB0ZXh0WzBdO1xyXG4gICAgcmV0dXJuIGJ1aWxkTWVzc2FnZSh0ZXh0LCBhcmdzKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYnVpbGRNZXNzYWdlICh0ZXh0LCBhcmdzKSB7XHJcbiAgICBsZXQgcnYgPSB0ZXh0WzBdO1xyXG4gICAgZm9yIChsZXQgaT0xLCBsPXRleHQubGVuZ3RoOyBpPGw7ICsraSkge1xyXG4gICAgICAgIHJ2ICs9IGFyZ3NbaS0xXSArIHRleHRbaV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcnY7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBUQzxUPiB7XHJcbiAgICBjb25zdHJ1Y3Rvcih0ZW1wbGF0ZTogVCkge1xyXG4gICAgICAgIGV4dGVuZCh0aGlzLCB0ZW1wbGF0ZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkYXRlVGltZVJldml2ZXIgKGtleSwgdmFsdWUpIHtcclxuICAgIHZhciBhO1xyXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICBhID0gL1xcL0RhdGVcXCgoXFxkKilcXClcXC8vLmV4ZWModmFsdWUpO1xyXG4gICAgICAgIGlmIChhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZSgrYVsxXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG59XHJcblxyXG4vL2xldCBpbmZvU2VyaWFsID0gMTtcclxuZXhwb3J0IGZ1bmN0aW9uIHNob3dJbmZvIChtc2cpIHtcclxuICAgIHZhciBldmVudCA9IG5ldyBDdXN0b21FdmVudCgnaW5mbycsIHsgJ2RldGFpbCc6IG1zZyB9KTtcclxuICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNob3dFcnJvciAoZXJyTXNnOiBzdHJpbmcgfCBFcnJvcikge1xyXG4gICAgY29uc3QgbXNnID0gdHlwZW9mIGVyck1zZyA9PT0gJ3N0cmluZycgPyBlcnJNc2cgOiBlcnJNc2cubWVzc2FnZTtcclxuICAgIHZhciBldmVudCA9IG5ldyBDdXN0b21FdmVudCgnY3VzdG9tZXJyb3InLCB7ICdkZXRhaWwnOiBtc2cgfSk7XHJcbiAgICBjb25zb2xlLmVycm9yKGVyck1zZyk7XHJcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChldmVudCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYXhMZW5ndGgoc3RyOiBzdHJpbmcsIG1heExlbjogbnVtYmVyKSB7XHJcbiAgICByZXR1cm4gc3RyLmxlbmd0aCA+IG1heExlbiA/XHJcbiAgICAgICAgc3RyLnN1YnN0cigwLCBtYXhMZW4gLSAzKSArIFwiLi4uXCIgOlxyXG4gICAgICAgIHN0cjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFycmF5VG9Mb29rdXA8VD4oYTogVFtdLCBrZXlBY2Nlc3NvcjogKGl0ZW06IFQpID0+IHN0cmluZyB8IG51bWJlcikge1xyXG4gICAgY29uc3QgcmVzdWx0IDoge1trZXk6IHN0cmluZ10gOiBUW119ID0ge307XHJcbiAgICBmb3IgKGxldCBpPTAsIGw9YS5sZW5ndGg7IGk8bDsgKytpKSB7XHJcbiAgICAgICAgY29uc3QgaXRlbSA9IGFbaV07XHJcbiAgICAgICAgY29uc3Qga2V5ID0ga2V5QWNjZXNzb3IoaXRlbSk7XHJcbiAgICAgICAgbGV0IGFycmF5ID0gcmVzdWx0W2tleV07XHJcbiAgICAgICAgaWYgKGFycmF5KSBhcnJheS5wdXNoKGl0ZW0pO1xyXG4gICAgICAgIGVsc2UgcmVzdWx0W2tleV0gPSBbaXRlbV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYXJyYXlUb01hcDxUPihhOiBUW10sIGtleUFjY2Vzc29yOiAoaXRlbTogVCkgPT4gc3RyaW5nIHwgbnVtYmVyKSB7XHJcbiAgICBjb25zdCByZXN1bHQgOiB7W2tleTogc3RyaW5nXSA6IFR9ID0ge307XHJcbiAgICBmb3IgKGxldCBpPTAsIGw9YS5sZW5ndGg7IGk8bDsgKytpKSB7XHJcbiAgICAgICAgY29uc3QgaXRlbSA9IGFbaV07XHJcbiAgICAgICAgY29uc3Qga2V5ID0ga2V5QWNjZXNzb3IoaXRlbSk7XHJcbiAgICAgICAgcmVzdWx0W2tleV0gPSBpdGVtO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNoZXJyeVBpY2tQcm9wczxUPiAob2JqOiBULCBwcm9wc1RvUGljazogc3RyaW5nW10pOiBQYXJ0aWFsPFQ+IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xyXG4gICAgZm9yIChjb25zdCBwYXJhbSBvZiBwcm9wc1RvUGljaykge1xyXG4gICAgICBpZiAocGFyYW0gaW4gb2JqKSByZXN1bHRbcGFyYW1dID0gb2JqW3BhcmFtXTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQgYXMgUGFydGlhbDxUPjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRpc3RpbmN0PFQ+IChhOiBUW10sIGtleUFjY2Vzc29yPzogKGl0ZW06IFQpID0+IGFueSkge1xyXG4gICAgY29uc3QgbWFwID0gYXJyYXlUb01hcChhLCBrZXlBY2Nlc3NvciB8fCAoeCA9PiB4KSk7XHJcbiAgICByZXR1cm4gT2JqZWN0LmtleXMobWFwKS5tYXAoa2V5ID0+IG1hcFtrZXldKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNoYWxsb3dFcXVhbHMoYTogYW55LCBiOiBhbnkpIHtcclxuICAgIGlmIChhID09PSBiKSByZXR1cm4gdHJ1ZTtcclxuICAgIGlmICghYSB8fCAhYikgcmV0dXJuIGZhbHNlO1xyXG4gICAgaWYgKHR5cGVvZiBhICE9PSAnb2JqZWN0JyB8fCB0eXBlb2YgYiAhPT0gJ29iamVjdCcpIHJldHVybiBmYWxzZTtcclxuICAgIGNvbnN0IGtleXNBID0gT2JqZWN0LmtleXMoYSk7XHJcbiAgICBjb25zdCBrZXlzQiA9IE9iamVjdC5rZXlzKGIpO1xyXG4gICAgaWYgKGtleXNBLmxlbmd0aCAhPT0ga2V5c0IubGVuZ3RoKSByZXR1cm4gZmFsc2U7XHJcbiAgICBmb3IgKGxldCBpPTAsIGw9a2V5c0EubGVuZ3RoOyBpPGw7ICsraSkge1xyXG4gICAgICAgIGNvbnN0IGtleSA9IGtleXNBW2ldO1xyXG4gICAgICAgIGlmIChrZXlzQltpXSAhPT0ga2V5KSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgaWYgKGFba2V5XSAhPT0gYltrZXldKSByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG4iLCIvKiAoaWdub3JlZCkgKi8iLCIvKiAoaWdub3JlZCkgKi8iLCIvKiAoaWdub3JlZCkgKi8iLCJtb2R1bGUuZXhwb3J0cyA9IGpRdWVyeTsiLCJtb2R1bGUuZXhwb3J0cyA9IFJlYWN0OyIsIm1vZHVsZS5leHBvcnRzID0gUmVhY3RET007Il0sInNvdXJjZVJvb3QiOiIifQ==