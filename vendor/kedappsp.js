var kedappsp =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// install a JSONP callback for chunk loading
/******/ 	function webpackJsonpCallback(data) {
/******/ 		var chunkIds = data[0];
/******/ 		var moreModules = data[1];
/******/ 		var executeModules = data[2];
/******/
/******/ 		// add "moreModules" to the modules object,
/******/ 		// then flag all "chunkIds" as loaded and fire callback
/******/ 		var moduleId, chunkId, i = 0, resolves = [];
/******/ 		for(;i < chunkIds.length; i++) {
/******/ 			chunkId = chunkIds[i];
/******/ 			if(installedChunks[chunkId]) {
/******/ 				resolves.push(installedChunks[chunkId][0]);
/******/ 			}
/******/ 			installedChunks[chunkId] = 0;
/******/ 		}
/******/ 		for(moduleId in moreModules) {
/******/ 			if(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {
/******/ 				modules[moduleId] = moreModules[moduleId];
/******/ 			}
/******/ 		}
/******/ 		if(parentJsonpFunction) parentJsonpFunction(data);
/******/
/******/ 		while(resolves.length) {
/******/ 			resolves.shift()();
/******/ 		}
/******/
/******/ 		// add entry modules from loaded chunk to deferred list
/******/ 		deferredModules.push.apply(deferredModules, executeModules || []);
/******/
/******/ 		// run deferred modules when all chunks ready
/******/ 		return checkDeferredModules();
/******/ 	};
/******/ 	function checkDeferredModules() {
/******/ 		var result;
/******/ 		for(var i = 0; i < deferredModules.length; i++) {
/******/ 			var deferredModule = deferredModules[i];
/******/ 			var fulfilled = true;
/******/ 			for(var j = 1; j < deferredModule.length; j++) {
/******/ 				var depId = deferredModule[j];
/******/ 				if(installedChunks[depId] !== 0) fulfilled = false;
/******/ 			}
/******/ 			if(fulfilled) {
/******/ 				deferredModules.splice(i--, 1);
/******/ 				result = __webpack_require__(__webpack_require__.s = deferredModule[0]);
/******/ 			}
/******/ 		}
/******/
/******/ 		return result;
/******/ 	}
/******/
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// object to store loaded and loading chunks
/******/ 	// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 	// Promise = chunk loading, 0 = chunk loaded
/******/ 	var installedChunks = {
/******/ 		"kedappsp": 0
/******/ 	};
/******/
/******/ 	var deferredModules = [];
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	var jsonpArray = window["webpackJsonp_name_"] = window["webpackJsonp_name_"] || [];
/******/ 	var oldJsonpFunction = jsonpArray.push.bind(jsonpArray);
/******/ 	jsonpArray.push = webpackJsonpCallback;
/******/ 	jsonpArray = jsonpArray.slice();
/******/ 	for(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);
/******/ 	var parentJsonpFunction = oldJsonpFunction;
/******/
/******/
/******/ 	// add entry module to deferred list
/******/ 	deferredModules.push(["./src/elements/KEDAppSubjectPlanner/webpack-entry.ts","vendors"]);
/******/ 	// run deferred modules when ready
/******/ 	return checkDeferredModules();
/******/ })
/************************************************************************/
/******/ ({

/***/ "./kedbackend/KED.Backend.API/schema.json":
/*!************************************************!*\
  !*** ./kedbackend/KED.Backend.API/schema.json ***!
  \************************************************/
/*! exports provided: accessClaimDefinitions, realmClaim, specialRoles, defaultAccessClaimTypes, defaultAcl, tables, default */
/***/ (function(module) {

module.exports = {"accessClaimDefinitions":{"email":"{http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress}","role":"{http://schemas.microsoft.com/ws/2008/06/identity/claims/role}","school":"{school}","schoolRole":"{school}/{http://schemas.microsoft.com/ws/2008/06/identity/claims/role}","tutorFor":"{tutorFor}"},"realmClaim":"realm","specialRoles":{"userRole":"USER","adminRole":"ADMIN"},"defaultAccessClaimTypes":["role"],"defaultAcl":["role:USER:R"],"tables":{"branches":{"accessClaimTypes":["role","schoolRole","email"],"sharingAccessPerRole":{"USER":{"email":["*"],"schoolRole":["*"],"role":["*"]}},"relationships":{"parents":"branches","approvedChildren":"branches"}},"global":{"accessClaimTypes":["role","schoolRole"],"relationships":{"courseInstances":"courseInstances"}},"courseInstances":{"accessClaimTypes":["role","schoolRole"],"sharingAccessPerRole":{"USER":{"schoolRole":["*"],"role":["*"]}},"defaultAcl":["role:USER:R","schoolRole:{school}/EMPLOYEE:S"],"relationships":{"abilities":"abilities","centralContent":"central-content","knowledgeRequirements":"knowledge-requirements","blocks":"courseBlocks","tabs":"courseTabs"}},"courseBlocks":{"accessClaimTypes":["role","schoolRole"],"sharingAccessPerRole":{"USER":{"schoolRole":["*"],"role":["*"]}},"defaultAcl":["role:USER:R","schoolRole:{school}/EMPLOYEE:S"],"relationships":{"abilities":"abilities","centralContent":"central-content","knowledgeRequirements":"knowledge-requirements","tabs":"courseTabs","tasks":"tasks"}},"courseTabs":{"accessClaimTypes":["role","schoolRole"],"sharingAccessPerRole":{"USER":{"schoolRole":["*"],"role":["*"]}},"defaultAcl":["role:USER:R","schoolRole:{school}/EMPLOYEE:S"],"relationships":{"abilities":"abilities","centralContent":"central-content","knowledgeRequirements":"knowledge-requirements","contents":"courseContents"}},"courseContents":{"accessClaimTypes":["role","schoolRole"],"sharingAccessPerRole":{"USER":{"schoolRole":["*"],"role":["*"]}},"defaultAcl":["role:USER:R","schoolRole:{school}/EMPLOYEE:S"],"relationships":{"tasks":"tasks"}},"weekplans":{"accessClaimTypes":["email","tutorFor"],"sharingAccessPerRole":{"USER":{"email":["{email}:*","{tutorFor}:*"],"tutorFor":["{tutorFor}:*"]}},"defaultAcl":["email:{email}:S"]},"weekplans-ks":{"accessClaimTypes":["email","tutorFor"],"sharingAccessPerRole":{"USER":{"email":["{email}:*","{tutorFor}:*"],"tutorFor":["{tutorFor}:*"]}},"defaultAcl":["email:{email}:S"]},"usertasks":{"accessClaimTypes":["email","schoolRole","tutorFor"],"sharingAccessPerRole":{"USER":{"email":["{email}:*","{tutorFor}:*"],"schoolRole":["{school}/EMPLOYEE:*"],"tutorFor":["{tutorFor}:*"]}},"defaultAcl":["email:{email}:S"],"relationships":{"task":"tasks","course":"courses"}},"userhiddencourses":{"accessClaimTypes":["email"],"sharingAccessPerRole":{"USER":{"email":["{email}:*"]}},"defaultAcl":["email:{email}:S"],"relationships":{}},"usercalendarvisibility":{"accessClaimTypes":["email"],"sharingAccessPerRole":{"USER":{"email":["{email}:*"]}},"defaultAcl":["email:{email}:S"],"relationships":{}},"subjects":{"relationships":{"courseTemplates":"courses","abilities":"abilities"}},"schools":{"accessClaimTypes":["role","schoolRole"],"relationships":{"courses":"courses","activeCourses":"courses"}},"courses":{"accessClaimTypes":["role","schoolRole"],"sharingAccessPerRole":{"EMPLOYEE":{"schoolRole":["{school}/EMPLOYEE:*"],"role":["USER:R"]}},"defaultAcl":["schoolRole:{school}/EMPLOYEE:*"],"relationships":{"templateChain":"courses","centralContent":"central-content","knowledgeRequirements":"knowledge-requirements","abilities":"abilities","images":"images","tasks":"tasks"}},"tasks":{"accessClaimTypes":["role","schoolRole"],"sharingAccessPerRole":{"EMPLOYEE":{"schoolRole":["{school}/EMPLOYEE:*"],"role":["USER:R"]}},"defaultAcl":["schoolRole:{school}/EMPLOYEE:S","role:USER:R"],"relationships":{"knowledgeRequirements":"knowledge-requirements","centralContent":"central-content","abilities":"abilities"}},"images":{"accessClaimTypes":["role","schoolRole","email"],"sharingAccessPerRole":{"EMPLOYEE":{"schoolRole":["{school}/EMPLOYEE:*"],"role":["USER:R"]},"USER":{"email":["{email}:*"]}}},"central-content":{"accessClaimTypes":["role"],"defaultAcl":["role:USER:R"]},"knowledge-requirements":{"accessClaimTypes":["role"],"defaultAcl":["role:USER:R"]},"abilities":{"accessClaimTypes":["role"],"defaultAcl":["role:USER:R"]},"notes":{"accessClaimTypes":["email"],"sharingAccessPerRole":{"USER":{"email":["{email}:*"]}},"defaultAcl":["email:{email}:S"],"relationships":{}}}};

/***/ }),

/***/ "./kedbackend/client.js":
/*!******************************!*\
  !*** ./kedbackend/client.js ***!
  \******************************/
/*! exports provided: KedBearerProvider, RestClient, HttpError, KedBackendClient, BatchRunner, createUUID, avoidSimultanousCalls, getGlobalId, computePredestinatedId, updateArray, DocumentAccess, hasAccess */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./js/dist/js/ked-backend-client */ "./kedbackend/js/dist/js/ked-backend-client/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBearerProvider", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["KedBearerProvider"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RestClient", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["RestClient"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "HttpError", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["HttpError"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendClient", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["KedBackendClient"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BatchRunner", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["BatchRunner"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createUUID", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["createUUID"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "avoidSimultanousCalls", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["avoidSimultanousCalls"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getGlobalId", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["getGlobalId"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "computePredestinatedId", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["computePredestinatedId"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "updateArray", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["updateArray"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DocumentAccess", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["DocumentAccess"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "hasAccess", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["hasAccess"]; });



/***/ }),

/***/ "./kedbackend/clientweb.js":
/*!*********************************!*\
  !*** ./kedbackend/clientweb.js ***!
  \*********************************/
/*! exports provided: storage, WebServerBearerProvider, isomorphic, KedBackendClientWeb */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _js_dist_js_ked_backend_client_web__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./js/dist/js/ked-backend-client-web */ "./kedbackend/js/dist/js/ked-backend-client-web/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "storage", function() { return _js_dist_js_ked_backend_client_web__WEBPACK_IMPORTED_MODULE_0__["storage"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "WebServerBearerProvider", function() { return _js_dist_js_ked_backend_client_web__WEBPACK_IMPORTED_MODULE_0__["WebServerBearerProvider"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "isomorphic", function() { return _js_dist_js_ked_backend_client_web__WEBPACK_IMPORTED_MODULE_0__["isomorphic"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendClientWeb", function() { return _js_dist_js_ked_backend_client_web__WEBPACK_IMPORTED_MODULE_0__["KedBackendClientWeb"]; });



/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client-web/bearer-storage-sessionstorage.js":
/*!***************************************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client-web/bearer-storage-sessionstorage.js ***!
  \***************************************************************************************/
/*! exports provided: BearerStorageSessionStorage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BearerStorageSessionStorage", function() { return BearerStorageSessionStorage; });
var BearerStorageSessionStorage = /** @class */ (function () {
    function BearerStorageSessionStorage() {
    }
    BearerStorageSessionStorage.prototype.save = function (id, tokenInfo) {
        sessionStorage.setItem("bearer-" + id, JSON.stringify(tokenInfo));
    };
    BearerStorageSessionStorage.prototype.load = function (id) {
        try {
            var json = sessionStorage.getItem("bearer-" + id);
            return Promise.resolve(json ? JSON.parse(json) : { token: null, expires: 0 });
        }
        catch (ex) {
            return Promise.resolve({ token: null, expires: 0 });
        }
    };
    return BearerStorageSessionStorage;
}());

//# sourceMappingURL=bearer-storage-sessionstorage.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client-web/hash-restorer.js":
/*!***********************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client-web/hash-restorer.js ***!
  \***********************************************************************/
/*! exports provided: rememberHashLocation */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rememberHashLocation", function() { return rememberHashLocation; });
var redirHash = sessionStorage.getItem("redir-hash");
if (redirHash)
    try {
        var _a = JSON.parse(redirHash), time = _a.time, hash = _a.hash;
        if (time && time > Date.now() - 60000) {
            sessionStorage.removeItem("redir-hash");
            location.hash = hash;
        }
    }
    catch (_) { }
function rememberHashLocation() {
    sessionStorage.setItem("redir-hash", JSON.stringify({ time: Date.now(), hash: location.hash }));
}
//# sourceMappingURL=hash-restorer.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client-web/index.js":
/*!***************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client-web/index.js ***!
  \***************************************************************/
/*! exports provided: storage, WebServerBearerProvider, isomorphic, KedBackendClientWeb */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "storage", function() { return storage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WebServerBearerProvider", function() { return WebServerBearerProvider; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isomorphic", function() { return isomorphic; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedBackendClientWeb", function() { return KedBackendClientWeb; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _ked_backend_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ked-backend-client */ "./kedbackend/js/dist/js/ked-backend-client/index.js");
/* harmony import */ var _bearer_storage_sessionstorage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./bearer-storage-sessionstorage */ "./kedbackend/js/dist/js/ked-backend-client-web/bearer-storage-sessionstorage.js");
/* harmony import */ var _ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../ked-backend-client/utils */ "./kedbackend/js/dist/js/ked-backend-client/utils.js");
/* harmony import */ var _ked_model_migrator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../ked-model-migrator */ "./kedbackend/js/dist/js/ked-model-migrator/index.js");
/* harmony import */ var _hash_restorer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./hash-restorer */ "./kedbackend/js/dist/js/ked-backend-client-web/hash-restorer.js");







Object(_ked_model_migrator__WEBPACK_IMPORTED_MODULE_4__["KedModelMigratorMixin"])(_ked_backend_client__WEBPACK_IMPORTED_MODULE_1__["KedBackendClient"].prototype);
var storage = new _bearer_storage_sessionstorage__WEBPACK_IMPORTED_MODULE_2__["BearerStorageSessionStorage"]();
var timeOfPageLoad = Date.now();
var WebServerBearerProvider = /** @class */ (function () {
    function WebServerBearerProvider(tokenPath, tokenResponseMapper, tokenId) {
        this.tokenPath = tokenPath;
        this.tokenResponseMapper = tokenResponseMapper;
        this.tokenId = tokenId;
        this.tokenInfo = { token: null, expires: 0 };
        this.getBearer = Object(_ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_3__["avoidSimultanousCalls"])(this.getBearer.bind(this));
        this.refreshBearer = Object(_ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_3__["avoidSimultanousCalls"])(this.refreshBearer.bind(this));
    }
    WebServerBearerProvider.prototype.getBearer = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (!!this.tokenInfo.token) return [3 /*break*/, 2];
                        if (!this.tokenId) return [3 /*break*/, 2];
                        _a = this;
                        return [4 /*yield*/, storage.load(this.tokenId)];
                    case 1:
                        _a.tokenInfo = _b.sent();
                        _b.label = 2;
                    case 2:
                        if (!(this.tokenInfo.expires < Date.now())) return [3 /*break*/, 4];
                        return [4 /*yield*/, this.refreshBearer()];
                    case 3:
                        _b.sent();
                        _b.label = 4;
                    case 4: return [2 /*return*/, this.tokenInfo];
                }
            });
        });
    };
    WebServerBearerProvider.prototype.refreshBearer = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, _c, _d;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_e) {
                switch (_e.label) {
                    case 0: return [4 /*yield*/, fetch(this.tokenPath, {
                            headers: { Accept: "text/plain; application/json" },
                            redirect: 'manual',
                            cache: 'no-cache',
                            credentials: "same-origin"
                        })];
                    case 1:
                        res = _e.sent();
                        if (res.status === 302 || (!res.status && res.type === "opaqueredirect")) {
                            // User session timed out and server wants to redirect entire page to login page
                            // Time to reload current page to force a redirect of the entire page instead for
                            // just redirecting to /api/token or whatever.
                            if (Date.now() - timeOfPageLoad > 60000) { // prohibit endless loop of reloading self.
                                this.wantsRedirect = true; // So that listeners to onbeforeunload could show alternate message.
                                console.log("Redirect wanted. Reload page.");
                                Object(_hash_restorer__WEBPACK_IMPORTED_MODULE_5__["rememberHashLocation"])();
                                window.location.reload(true);
                                throw new _ked_backend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"](302, "Redirected");
                            }
                        }
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = Error.bind;
                        _b = "HTTP" + res.status + " ";
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(Error, [void 0, _b + (_e.sent())]))();
                    case 3:
                        _c = this;
                        _d = this.tokenResponseMapper;
                        return [4 /*yield*/, res.text()];
                    case 4:
                        _c.tokenInfo = _d.apply(this, [_e.sent()]);
                        storage.save(this.tokenId, this.tokenInfo);
                        return [2 /*return*/, this.tokenInfo];
                }
            });
        });
    };
    return WebServerBearerProvider;
}());

var isomorphic = { fetch: fetch.bind(self), btoa: btoa.bind(self) };
var KedBackendClientWeb = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](KedBackendClientWeb, _super);
    function KedBackendClientWeb(apiBaseUrl, providerOrTokenPath, options) {
        var _this = this;
        var bearerProvider = typeof providerOrTokenPath !== 'string' ?
            providerOrTokenPath :
            new WebServerBearerProvider(providerOrTokenPath, (options && options.tokenResponseMapper) || (function (x) { return ({ token: x, expires: Date.now() + 59 * 60 * 60 }); }), options && options.tokenId);
        _this = _super.call(this, isomorphic, bearerProvider, apiBaseUrl) || this;
        return _this;
    }
    return KedBackendClientWeb;
}(_ked_backend_client__WEBPACK_IMPORTED_MODULE_1__["KedBackendClient"]));

//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client/access-control.js":
/*!********************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client/access-control.js ***!
  \********************************************************************/
/*! exports provided: DocumentAccess, hasAccess */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DocumentAccess", function() { return DocumentAccess; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasAccess", function() { return hasAccess; });
var DocumentAccess = /** @class */ (function () {
    function DocumentAccess(accessClaimType, accessClaimValue, right) {
        this.accessClaimType = accessClaimType;
        this.accessClaimValue = accessClaimValue;
        this.right = right;
    }
    DocumentAccess.fromString = function (ac) {
        if (!ac)
            return null;
        var split = ac.split(':');
        if (split.length < 3)
            throw new Error("Invalid access string: " + ac);
        var claimType = DocumentAccess.unescape(split[0]);
        var claimValue = DocumentAccess.unescape(split[1]);
        var right = split[2];
        if (right !== 'R' && right !== 'W' && right !== 'S')
            throw new Error("Invalid access string: " + ac);
        return new DocumentAccess(claimType, claimValue, right);
    };
    DocumentAccess.escape = function (accessComponent) {
        return accessComponent.replace(/\%/g, "%25").replace(/\:/g, "%3A");
    };
    DocumentAccess.unescape = function (accessComponent) {
        return accessComponent.replace(/\%3A/g, ":").replace(/\%25/g, "%");
    };
    DocumentAccess.prototype.toString = function () {
        return DocumentAccess.escape(this.accessClaimType) + ":" +
            DocumentAccess.escape(this.accessClaimValue) + ":" +
            this.right;
    };
    DocumentAccess.fromStringArray = function (acl) {
        return acl
            .map(function (ac) { return DocumentAccess.fromString(ac); })
            .filter(function (ac) { return ac; });
    };
    DocumentAccess.toStringArray = function (acl) {
        return acl.map(function (ac) { return ac.toString(); });
    };
    return DocumentAccess;
}());

function hasAccess(acl, userClaims, requestedRight) {
    if (userClaims.some(function (claim) { return claim.type === 'role' && claim.value === "ADMIN"; }))
        return true;
    return acl.some(function (a) {
        return userClaims.some(function (c) {
            return a.accessClaimType === c.type &&
                a.accessClaimValue === c.value && ((a.right === 'R' && requestedRight === 'R') ||
                (a.right === 'W' && ['R', 'W'].indexOf(requestedRight) >= 0) ||
                (a.right === 'S'));
        });
    });
}
//# sourceMappingURL=access-control.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client/http-error.js":
/*!****************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client/http-error.js ***!
  \****************************************************************/
/*! exports provided: HttpError */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HttpError", function() { return HttpError; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");

var HttpError = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](HttpError, _super);
    function HttpError(code, message) {
        var _this = _super.call(this, "HTTP" + code + " " + message) || this;
        _this.code = code;
        _this.message = message;
        _this.name = "http" + code;
        _this.message = "HTTP" + code + " " + message;
        return _this;
    }
    return HttpError;
}(Error));

//# sourceMappingURL=http-error.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client/index.js":
/*!***********************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client/index.js ***!
  \***********************************************************/
/*! exports provided: KedBearerProvider, RestClient, HttpError, KedBackendClient, BatchRunner, createUUID, avoidSimultanousCalls, getGlobalId, computePredestinatedId, updateArray, DocumentAccess, hasAccess */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedBackendClient", function() { return KedBackendClient; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BatchRunner", function() { return BatchRunner; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _restclient__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./restclient */ "./kedbackend/js/dist/js/ked-backend-client/restclient.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RestClient", function() { return _restclient__WEBPACK_IMPORTED_MODULE_1__["RestClient"]; });

/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ "./kedbackend/js/dist/js/ked-backend-client/utils.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createUUID", function() { return _utils__WEBPACK_IMPORTED_MODULE_2__["createUUID"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "avoidSimultanousCalls", function() { return _utils__WEBPACK_IMPORTED_MODULE_2__["avoidSimultanousCalls"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getGlobalId", function() { return _utils__WEBPACK_IMPORTED_MODULE_2__["getGlobalId"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "computePredestinatedId", function() { return _utils__WEBPACK_IMPORTED_MODULE_2__["computePredestinatedId"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "updateArray", function() { return _utils__WEBPACK_IMPORTED_MODULE_2__["updateArray"]; });

/* harmony import */ var _ked_bearer_provider__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ked-bearer-provider */ "./kedbackend/js/dist/js/ked-backend-client/ked-bearer-provider.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBearerProvider", function() { return _ked_bearer_provider__WEBPACK_IMPORTED_MODULE_3__["KedBearerProvider"]; });

/* harmony import */ var _access_control__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./access-control */ "./kedbackend/js/dist/js/ked-backend-client/access-control.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DocumentAccess", function() { return _access_control__WEBPACK_IMPORTED_MODULE_4__["DocumentAccess"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "hasAccess", function() { return _access_control__WEBPACK_IMPORTED_MODULE_4__["hasAccess"]; });

/* harmony import */ var _http_error__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./http-error */ "./kedbackend/js/dist/js/ked-backend-client/http-error.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "HttpError", function() { return _http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"]; });

/* empty/unused harmony star reexport */








;
var KedBackendClient = /** @class */ (function () {
    function KedBackendClient(isomorphic, bearerProvider, baseUrl) {
        this.http = new _restclient__WEBPACK_IMPORTED_MODULE_1__["RestClient"](isomorphic, baseUrl, { bearerProvider: bearerProvider });
    }
    KedBackendClient.prototype.getMyClaims = function (table, fetchOptions) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("me/claims/" + (table || ""), null, fetchOptions)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = _http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(_http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4: return [2 /*return*/, _c.sent()];
                }
            });
        });
    };
    KedBackendClient.prototype.get = function (table, id, options, fetchOptions) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get(table + "/" + id, options, fetchOptions)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = _http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(_http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4: return [2 /*return*/, _c.sent()];
                }
            });
        });
    };
    KedBackendClient.prototype.list = function (table, options, fetchOptions) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var query, res, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        query = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, options);
                        if (options && options.mutationsOnEmpty)
                            query.mutationsOnEmpty = JSON.stringify(options.mutationsOnEmpty);
                        return [4 /*yield*/, this.http.get("" + table, query, fetchOptions)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = _http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(_http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4: return [2 /*return*/, _c.sent()];
                }
            });
        });
    };
    KedBackendClient.prototype.batch = function (reqs, fetchOptions) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        // Reorder operations so that 'add's come first and 'delete's come last:
                        reqs = reqs.slice().sort(function (req1, req2) {
                            return req1.op === 'add' ? -1 : req2.op === 'add' ? 1 :
                                req1.op === 'delete' ? 1 : req2.op === 'delete' ? -1 : 0;
                        });
                        return [4 /*yield*/, this.http.post("batch", reqs, fetchOptions)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = _http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(_http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4: return [2 /*return*/, _c.sent()];
                }
            });
        });
    };
    KedBackendClient.prototype.do = function (scopeFn) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var runner;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        runner = new BatchRunner();
                        scopeFn(runner);
                        return [4 /*yield*/, this.batch(runner.mutationRequests)];
                    case 1: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    KedBackendClient.prototype.deleteRealm = function (realm) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.delete("realms/" + realm)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = _http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(_http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4: return [2 /*return*/, _c.sent()];
                }
            });
        });
    };
    KedBackendClient.prototype.add = function (table, doc, branchId) {
        return this.do(function (r) { return r.add(table, doc); });
    };
    KedBackendClient.prototype.put = function (table, doc) {
        return this.do(function (r) { return r.put(table, doc); });
    };
    KedBackendClient.prototype.update = function (table, id, deltaDoc, branchId) {
        return this.do(function (r) { return r.update(table, id, deltaDoc, branchId); });
    };
    KedBackendClient.prototype.merge = function (branchId, targetBranchId) {
        return this.do(function (r) { return r.merge(branchId, targetBranchId); });
    };
    KedBackendClient.prototype.clearBranch = function (branchId) {
        return this.do(function (r) { return r.clearBranch(branchId); });
    };
    KedBackendClient.prototype.delete = function (table, id) {
        return this.do(function (r) { return r.delete(table, id); });
    };
    KedBackendClient.prototype.share = function (table, id, acl) {
        return this.do(function (r) { return r.share(table, id, acl); });
    };
    KedBackendClient.prototype.unshare = function (table, id, acl) {
        return this.do(function (r) { return r.unshare(table, id, acl); });
    };
    KedBackendClient.prototype.link = function (sourceTable, sourceId, targetTable, targetId, label) {
        return this.do(function (r) { return r.link(sourceTable, sourceId, targetTable, targetId, label); });
    };
    KedBackendClient.prototype.link2 = function (sourceTable, sourceId, targetId, label, branchId) {
        return this.do(function (r) { return r.link2(sourceTable, sourceId, label, targetId, branchId); });
    };
    KedBackendClient.prototype.unlink = function (sourceTable, sourceId, targetTable, targetId, label) {
        return this.do(function (r) { return r.unlink(sourceTable, sourceId, targetTable, targetId, label); });
    };
    KedBackendClient.prototype.unlink2 = function (sourceTable, sourceId, targetId, label, branchId) {
        return this.do(function (r) { return r.unlink2(sourceTable, sourceId, label, targetId, branchId); });
    };
    KedBackendClient.prototype.undoLink = function (sourceTable, sourceId, targetId, label, branchId) {
        return this.do(function (r) { return r.undoLink(sourceTable, sourceId, label, targetId, branchId); });
    };
    return KedBackendClient;
}());

var BatchRunner = /** @class */ (function () {
    function BatchRunner() {
        this.mutationRequests = [];
    }
    BatchRunner.prototype.add = function (table, doc, branchId) {
        this.mutationRequests.push({ op: 'add', table: table, doc: doc, branchId: branchId });
        return this;
    };
    BatchRunner.prototype.put = function (table, doc) {
        doc = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, doc);
        delete doc.acl; // Forbidden to send acl with put() calls.
        this.mutationRequests.push({ op: 'put', table: table, doc: doc });
        return this;
    };
    BatchRunner.prototype.update = function (table, id, deltaDoc, branchId) {
        deltaDoc = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, deltaDoc);
        this.mutationRequests.push({ op: 'update', table: table, id: id, deltaDoc: deltaDoc, branchId: branchId });
    };
    BatchRunner.prototype.merge = function (branchId, targetBranchId) {
        this.mutationRequests.push({ op: 'merge', branchId: branchId, targetBranchId: targetBranchId });
    };
    BatchRunner.prototype.clearBranch = function (branchId) {
        this.mutationRequests.push({ op: 'clear-branch', branchId: branchId });
    };
    BatchRunner.prototype.delete = function (table, id) {
        this.mutationRequests.push({ op: 'delete', table: table, id: id });
        return this;
    };
    BatchRunner.prototype.share = function (table, id, acl) {
        this.mutationRequests.push({ op: 'share', table: table, id: id, acl: acl });
        return this;
    };
    BatchRunner.prototype.unshare = function (table, id, acl) {
        this.mutationRequests.push({ op: 'unshare', table: table, id: id, acl: acl });
        return this;
    };
    BatchRunner.prototype.link = function (sourceTable, sourceId, targetTable, targetId, label) {
        this.mutationRequests.push({ op: 'link', sourceTable: sourceTable, sourceId: sourceId, targetTable: targetTable, targetId: targetId, label: label });
        return this;
    };
    BatchRunner.prototype.link2 = function (sourceTable, sourceId, label, targetId, branchId) {
        this.mutationRequests.push({ op: 'link', sourceTable: sourceTable, sourceId: sourceId, targetId: targetId, label: label, branchId: branchId });
    };
    BatchRunner.prototype.unlink = function (sourceTable, sourceId, targetTable, targetId, label) {
        this.mutationRequests.push({ op: 'unlink', sourceTable: sourceTable, sourceId: sourceId, targetTable: targetTable, targetId: targetId, label: label });
        return this;
    };
    BatchRunner.prototype.unlink2 = function (sourceTable, sourceId, label, targetId, branchId) {
        this.mutationRequests.push({ op: 'unlink', sourceTable: sourceTable, sourceId: sourceId, targetId: targetId, label: label, branchId: branchId });
        return this;
    };
    BatchRunner.prototype.undoLink = function (sourceTable, sourceId, label, targetId, branchId) {
        this.mutationRequests.push({ op: 'undo-link', sourceTable: sourceTable, sourceId: sourceId, targetId: targetId, label: label, branchId: branchId });
    };
    return BatchRunner;
}());

//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client/ked-bearer-provider.js":
/*!*************************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client/ked-bearer-provider.js ***!
  \*************************************************************************/
/*! exports provided: KedBearerProvider */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedBearerProvider", function() { return KedBearerProvider; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _restclient__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./restclient */ "./kedbackend/js/dist/js/ked-backend-client/restclient.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ "./kedbackend/js/dist/js/ked-backend-client/utils.js");



var KedBearerProvider = /** @class */ (function () {
    function KedBearerProvider(isomorphic, storage, tokenId, clientId, clientSecret, tokenUrl, tokenQuery) {
        this.isomorphic = isomorphic;
        this.storage = storage;
        this.tokenId = tokenId;
        this.clientId = clientId;
        this.clientSecret = clientSecret;
        this.tokenUrl = tokenUrl;
        this.tokenQuery = tokenQuery;
        this.tokenInfo = { token: null, expires: 0 };
        this.client = new _restclient__WEBPACK_IMPORTED_MODULE_1__["RestClient"](isomorphic, "", {
            username: this.clientId,
            password: this.clientSecret
        });
        this.getBearer = Object(_utils__WEBPACK_IMPORTED_MODULE_2__["avoidSimultanousCalls"])(this.getBearer.bind(this));
        this.refreshBearer = Object(_utils__WEBPACK_IMPORTED_MODULE_2__["avoidSimultanousCalls"])(this.refreshBearer.bind(this));
    }
    KedBearerProvider.prototype.getBearer = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, token, expires, _b, e_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _a = this.tokenInfo, token = _a.token, expires = _a.expires;
                        if (token && expires >= Date.now())
                            return [2 /*return*/, this.tokenInfo];
                        _c.label = 1;
                    case 1:
                        _c.trys.push([1, 4, , 6]);
                        _b = this;
                        return [4 /*yield*/, this.storage.load(this.clientId + "/" + this.tokenId)];
                    case 2:
                        _b.tokenInfo = _c.sent();
                        if (this.tokenInfo.token && this.tokenInfo.expires >= Date.now())
                            return [2 /*return*/, this.tokenInfo];
                        return [4 /*yield*/, this.refreshBearer()];
                    case 3:
                        _c.sent();
                        return [2 /*return*/, this.tokenInfo];
                    case 4:
                        e_1 = _c.sent();
                        return [4 /*yield*/, this.refreshBearer()];
                    case 5:
                        _c.sent();
                        return [2 /*return*/, this.tokenInfo];
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    KedBearerProvider.prototype.refreshBearer = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, retries, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        retries = 0;
                        _c.label = 1;
                    case 1:
                        if (!(retries < 6)) return [3 /*break*/, 5];
                        console.log("Retrieving token for " + this.tokenId);
                        return [4 /*yield*/, this.client.get(this.tokenUrl, this.tokenQuery, { cache: 'reload' })];
                    case 2:
                        res = _c.sent();
                        if (res.status !== 200) {
                            console.warn("Got " + res.status + " " + res.statusText);
                            return [3 /*break*/, 4];
                        }
                        _a = this;
                        _b = {};
                        return [4 /*yield*/, res.text()];
                    case 3:
                        _a.tokenInfo = (_b.token = _c.sent(), _b.expires = Date.now() + 59 * 60 * 1000, _b);
                        console.log("Got token for " + this.tokenId + ": " + JSON.stringify(this.tokenInfo));
                        this.storage.save(this.clientId + "/" + this.tokenId, this.tokenInfo);
                        return [2 /*return*/, this.tokenInfo];
                    case 4:
                        ++retries;
                        return [3 /*break*/, 1];
                    case 5: throw new Error("Failed to retrieve token for " + JSON.stringify(this.tokenId));
                }
            });
        });
    };
    return KedBearerProvider;
}());

//# sourceMappingURL=ked-bearer-provider.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client/restclient.js":
/*!****************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client/restclient.js ***!
  \****************************************************************/
/*! exports provided: RestClient */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RestClient", function() { return RestClient; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ "./kedbackend/js/dist/js/ked-backend-client/utils.js");
/* harmony import */ var _observable_emitter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../observable/emitter */ "./kedbackend/js/dist/js/observable/emitter.js");
/*
declare var Buffer; // node built-in


function basicAuthHeader(username, password) {
    return "Basic " + new Buffer(username + ":" + password).toString("base64");
}
*/



var RestClient = /** @class */ (function () {
    function RestClient(isomorphic, baseUrl, options) {
        this.isomorphic = isomorphic;
        this.baseUrl = baseUrl;
        this.options = options;
        this.numOutstandingOperations = 0;
        this._status = new _observable_emitter__WEBPACK_IMPORTED_MODULE_2__["Emitter"](this);
        this.fetchOptions = { mode: 'cors' };
        this.authHeader = options.bearer ?
            "Bearer " + options.bearer :
            options.username ?
                "Basic " + isomorphic.btoa(options.username + ":" + (options.password || "")) :
                null;
        this.bearerProvider = options.bearerProvider || null;
    }
    Object.defineProperty(RestClient.prototype, "status", {
        get: function () {
            return this._status;
        },
        enumerable: true,
        configurable: true
    });
    RestClient.prototype.fetch = function (path, method, headers, query, fetchOptions) {
        var _this = this;
        ++this.numOutstandingOperations;
        this._status.dispatch(this);
        return this._fetch(path, method, headers, query, fetchOptions)
            .then(function (res) {
            --_this.numOutstandingOperations;
            _this._status.dispatch(_this);
            return res;
        }).catch(function (err) {
            --_this.numOutstandingOperations;
            _this._status.dispatch(_this);
            return Promise.reject(err);
        });
    };
    RestClient.prototype._fetch = function (path, method, headers, query, fetchOptions) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var queryStr, _a, authHeader, tokenInfo, bearerProvider, _b, _c, url, res, wwwauth, _d;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_e) {
                switch (_e.label) {
                    case 0:
                        if (fetchOptions && fetchOptions.cache === 'no-cache') {
                            // Workaround for back-button not respecting cache control in Chrome/Opera.
                            // Append a query parameter to force a cache entry
                            query = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, query, { nocache: Object(_utils__WEBPACK_IMPORTED_MODULE_1__["createUUID"])() });
                        }
                        queryStr = query && Object.keys(query).filter(function (key) { return query[key] !== undefined; }).map(function (key) {
                            return encodeURIComponent(key) +
                                "=" +
                                encodeURIComponent(query[key]);
                        })
                            .join('&');
                        _a = this, authHeader = _a.authHeader, tokenInfo = _a.tokenInfo, bearerProvider = _a.bearerProvider;
                        if (!(!authHeader && !tokenInfo && bearerProvider)) return [3 /*break*/, 2];
                        _b = this;
                        return [4 /*yield*/, bearerProvider.getBearer()];
                    case 1:
                        _b.tokenInfo = tokenInfo = _e.sent();
                        _e.label = 2;
                    case 2:
                        if (!tokenInfo) return [3 /*break*/, 5];
                        if (!(tokenInfo.expires < Date.now())) return [3 /*break*/, 4];
                        console.log("Token expired. Refresh it:");
                        _c = this;
                        return [4 /*yield*/, bearerProvider.refreshBearer()];
                    case 3:
                        _c.tokenInfo = tokenInfo = _e.sent();
                        _e.label = 4;
                    case 4:
                        authHeader = "Bearer " + tokenInfo.token;
                        _e.label = 5;
                    case 5:
                        // In one way or another, we've concluded an Authorization header to use:
                        if (authHeader) {
                            headers.Authorization = authHeader;
                        }
                        url = this.baseUrl + path + (queryStr ? "?" + queryStr : "");
                        return [4 /*yield*/, this.isomorphic.fetch(url, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.fetchOptions, { headers: headers, method: method }, fetchOptions))];
                    case 6:
                        res = _e.sent();
                        if (!(res.status == 401 && this.bearerProvider)) return [3 /*break*/, 9];
                        wwwauth = res.headers.get("www-authenticate");
                        console.log("Got " + res.status + " from " + (this.baseUrl + path));
                        if (!(wwwauth && /Bearer/i.test(wwwauth))) return [3 /*break*/, 9];
                        _d = this;
                        return [4 /*yield*/, this.bearerProvider.refreshBearer()];
                    case 7:
                        _d.tokenInfo = _e.sent();
                        headers.Authorization = "Bearer " + this.tokenInfo.token;
                        return [4 /*yield*/, this.isomorphic.fetch(url, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.fetchOptions, { headers: headers, method: method }, fetchOptions))];
                    case 8:
                        res = _e.sent();
                        _e.label = 9;
                    case 9: return [2 /*return*/, res];
                }
            });
        });
    };
    RestClient.prototype.get = function (path, query, fetchOptions) {
        return this.fetch(path, "GET", { Accept: "application/json; text/plain" }, query, fetchOptions);
    };
    RestClient.prototype.post = function (path, data, fetchOptions) {
        return this.fetch(path, "POST", {
            "Content-Type": "application/json",
            "Accept": "application/json"
        }, null, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, fetchOptions, { body: JSON.stringify(data) }));
    };
    RestClient.prototype.delete = function (path, query, body, fetchOptions) {
        return this.fetch(path, "DELETE", { Accept: "application/json; text/plain" }, query, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, fetchOptions, { body: body }));
    };
    return RestClient;
}());

//# sourceMappingURL=restclient.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client/utils.js":
/*!***********************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client/utils.js ***!
  \***********************************************************/
/*! exports provided: createUUID, avoidSimultanousCalls, getGlobalId, computePredestinatedId, updateArray */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createUUID", function() { return createUUID; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "avoidSimultanousCalls", function() { return avoidSimultanousCalls; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getGlobalId", function() { return getGlobalId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computePredestinatedId", function() { return computePredestinatedId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateArray", function() { return updateArray; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");

function createUUID() {
    // Decent solution from http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript
    var d = Date.now();
    var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
        var r = (d + Math.random() * 16) % 16 | 0;
        d = Math.floor(d / 16);
        return (c === 'x' ? r : (r & 0x7 | 0x8)).toString(16);
    });
    return uuid;
}
function avoidSimultanousCalls(method) {
    var ongoingPromise = null;
    return function () {
        if (!ongoingPromise) {
            ongoingPromise = method.apply(this, arguments).then(function (result) {
                ongoingPromise = null;
                return result;
            });
        }
        return ongoingPromise;
    };
}
function getGlobalId(realm) {
    var prefix = 'ec96b3be-45fc-41d3-b69e-';
    var pad = ['50', '08', 'e1', '40', 'e4', 'e7'];
    if (realm.length > 6)
        throw new Error("Too long realm");
    for (var i = 0; i < realm.length; ++i) {
        var hex = realm.charCodeAt(i).toString(16);
        pad[i] = hex.length === 2 ?
            hex :
            '0' + hex;
    }
    return prefix + pad.join('');
}
function computePredestinatedId(input) {
    return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
        var encoder, data, digest, _a, i;
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
            switch (_b.label) {
                case 0:
                    encoder = new TextEncoder();
                    data = encoder.encode(input);
                    _a = Uint8Array.bind;
                    return [4 /*yield*/, crypto.subtle.digest('SHA-256', data)];
                case 1:
                    digest = new (_a.apply(Uint8Array, [void 0, _b.sent()]))();
                    i = 0;
                    return [2 /*return*/, 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
                            var nibble = digest[i++] % 16 | 0;
                            var washedNibble = c === 'x' ?
                                nibble :
                                nibble & 0x7 | 0x8;
                            return washedNibble.toString(16);
                        })];
            }
        });
    });
}
/*export function buf2hex(buffer: ArrayBuffer) {
  return Array.prototype.map.call(
    new Uint8Array(buffer),
    (x: number) => ('00' + x.toString(16)).slice(-2)).join('');
}*/
function updateArray(a, mapper) {
    var retval = a;
    for (var i = 0, l = a.length; i < l; ++i) {
        var t = a[i];
        var mapped = mapper(t);
        if (mapped !== t) {
            if (retval === a)
                retval = a.slice();
            retval[i] = mapped;
        }
    }
    return retval;
}
/*
export function updateArray<T>(a: T[], mapper: (t: T) => T | false): T[] {
  let retval = a;
  let j = 0;
  for (let i=0,l=a.length; i<l; ++i, ++j) {
    const t = a[i];
    const mapped = mapper(t);
    if (mapped === false) {
      // Mapper wants to delete this doc.
      if (retval === a) retval = a.slice();
      retval.splice(j, 1);
      --j; // compensate for ++j
    } else if (mapped !== t) {
      if (retval === a) retval = a.slice();
      retval[j] = mapped;
    }
  }
  return retval;
}
*/ 
//# sourceMappingURL=utils.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/cache-bust.js":
/*!**************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/cache-bust.js ***!
  \**************************************************************/
/*! exports provided: CacheBust */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CacheBust", function() { return CacheBust; });
/* harmony import */ var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json");
var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_0___namespace = /*#__PURE__*/__webpack_require__.t(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json", 1);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ "./kedbackend/js/dist/js/ked-backend-repo/utils.js");


var CacheBust = /** @class */ (function () {
    function CacheBust() {
    }
    CacheBust.getCacheBust = function (table, query, user, includes) {
        var involvedItems = CacheBust.getInvolvedItems(table, query, includes);
        return involvedItems
            .map(function (item) { return localStorage.getItem("cache-bust-" + user + "-" + item); })
            .filter(function (value) { return !!value; })
            .join('/') || 'static';
    };
    CacheBust.invalidateCache = function (reqs, user) {
        for (var _i = 0, _a = CacheBust.getCacheInvalidations(reqs); _i < _a.length; _i++) {
            var item = _a[_i];
            localStorage.setItem("cache-bust-" + user + "-" + item, '' + Date.now());
        }
    };
    CacheBust.getInvolvedItems = function (table, query, includes) {
        var hasEdgesFrom = query.hasEdgesFrom;
        var relatedTables = includes
            .map(function (label) { return kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_0__["tables"][table].relationships[label]; })
            .filter(function (table) { return !!table; });
        if (hasEdgesFrom)
            relatedTables.push("hef" + table);
        return [table, 'master', query.branchId].filter(function (x) { return !!x; }).concat(relatedTables).sort();
    };
    CacheBust.getCacheInvalidations = function (reqs) {
        var invalidationSet = {};
        reqs.forEach(function (req) {
            switch (req.op) {
                case 'add':
                case 'put':
                case 'delete':
                case 'update':
                    invalidationSet[req.table] = true;
                    break;
                case 'link':
                case 'unlink':
                case 'undo-link':
                    invalidationSet[req.sourceTable] = true;
                    invalidationSet["hef-" + Object(_utils__WEBPACK_IMPORTED_MODULE_1__["getTableFromLabel"])(req.sourceTable, req.label)] = true;
                    break;
                case 'clear-branch':
                    invalidationSet[req.branchId] = true;
                    break;
                case 'merge':
                    invalidationSet[req.branchId] = true;
                    invalidationSet[req.targetBranchId || "master"] = true;
                    break;
            }
        });
        return Object.keys(invalidationSet);
    };
    return CacheBust;
}());

//# sourceMappingURL=cache-bust.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/delta-collection/apply-mutations-on-deltas.js":
/*!**********************************************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/delta-collection/apply-mutations-on-deltas.js ***!
  \**********************************************************************************************/
/*! exports provided: applyMutationsOnDeltas */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "applyMutationsOnDeltas", function() { return applyMutationsOnDeltas; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _delta_merge__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../delta-merge */ "./kedbackend/js/dist/js/ked-backend-repo/delta-merge.js");


function applyMutationsOnDeltas(branchId, deltas, mutations, optimistic, userDisplayName, hasAdditionalFilter) {
    var _loop_1 = function (m) {
        switch (m.op) {
            case 'add-related':
                //
                // AddRelated RepoMutation
                //
                if (!hasAdditionalFilter && m.branchId === branchId) {
                    deltas = [{
                            type: 'add',
                            sourceId: m.id,
                            targetId: m.relatedDoc.id,
                            label: m.graphProp,
                            sourceTable: m.table,
                            $meta: optimistic ? 'adding' : 'persisted',
                            dateTime: Date.now(),
                            targetName: m.relatedDoc.name,
                            contributor: userDisplayName
                        }].concat(deltas);
                }
                break;
            case 'clear-branch':
                //
                // ClearBranch RepoMutation
                //
                if (m.branchId === branchId) {
                    deltas = [];
                }
                break;
            case 'delete':
                //
                // Delete RepoMutation
                //
                // This type of mutation can not be performed onto branches. There's no branchId property on m.
                break;
            case 'merge':
                //
                // Merge RepoMutation
                //
                if (m.branchId === branchId) {
                    deltas = [];
                }
                else if (m.targetBranchId === branchId) {
                    // This change will append new deltas to our deltas array but we don't know what would come.
                    // Need to refetch from server.
                    if (!optimistic)
                        return { value: null }; // Caller should check for null and re-fetch data from server.
                }
                break;
            case 'remove-related':
                //
                // Remove-Related RepoMutation
                //
                if (hasAdditionalFilter || m.branchId !== branchId)
                    return "continue";
                deltas = [{
                        type: 'remove',
                        sourceId: m.id,
                        targetId: m.relatedDoc.id,
                        targetName: m.relatedDoc.name,
                        label: m.graphProp,
                        sourceTable: m.table,
                        contributor: userDisplayName,
                        dateTime: Date.now(),
                        $meta: optimistic ? 'adding' : 'persisted'
                    }].concat(deltas);
                break;
            case 'undo-link':
                //
                // Undo-Link RepoMutation
                //
                if (m.branchId !== branchId)
                    return "continue";
                {
                    var idx = deltas.findIndex(function (d) {
                        return (d.type === 'add' || d.type === 'remove' || d.type === 'undo-link') &&
                            d.sourceId === m.id &&
                            d.targetId === m.relatedId;
                    });
                    if (idx < 0)
                        return "continue";
                    // Found an "add" or "remove" delta to change:
                    if (optimistic) {
                        var deltaRelation = deltas[idx];
                        // Mark the existing add/remove delta as currenlty being deleted
                        deltas = deltas.slice(0, idx).concat([
                            tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, deltaRelation, { $meta: optimistic ? 'removing' : 'persisted' })
                        ], deltas.slice(idx + 1));
                    }
                    else {
                        // Persisted. Just remove it:
                        deltas = deltas.slice(0, idx).concat(deltas.slice(idx + 1));
                    }
                }
                break;
            case 'update':
                //
                // Update RepoMutation
                //
                if (m.branchId !== branchId)
                    return "continue";
                {
                    var idx = deltas.findIndex(function (delta) {
                        return delta.type === 'modify' &&
                            delta.targetId === m.id;
                    });
                    if (idx < 0 && !hasAdditionalFilter) {
                        deltas = [{
                                type: 'modify',
                                table: m.table,
                                targetId: m.id,
                                targetName: m.targetName,
                                data: m.deltaDoc,
                                dateTime: Date.now(),
                                contributors: [userDisplayName],
                                $meta: optimistic ? 'adding' : 'persisted',
                            }].concat(deltas);
                    }
                    else {
                        var existingDeltaDoc = deltas[idx];
                        var contributors = existingDeltaDoc.contributors.slice();
                        if (!contributors.includes(userDisplayName)) {
                            contributors.push(userDisplayName);
                        }
                        var newData = Object(_delta_merge__WEBPACK_IMPORTED_MODULE_1__["mergeDeltas"])(existingDeltaDoc.data, m.deltaDoc, { removeUnsetProps: true });
                        if (!optimistic && Object.keys(newData).length === 0) {
                            // Committed mutation that resets a deltaDoc. Remove the deltaDoc entirely:
                            deltas = deltas.slice(0, idx).concat(deltas.slice(idx + 1));
                        }
                        else {
                            // 
                            deltas = [
                                {
                                    type: 'modify',
                                    table: m.table,
                                    targetId: m.id,
                                    targetName: m.targetName,
                                    data: newData,
                                    dateTime: Date.now(),
                                    contributors: contributors,
                                    $meta: optimistic ? 'updating' : 'persisted',
                                }
                            ].concat(deltas.slice(0, idx), deltas.slice(idx + 1));
                        }
                    }
                }
                break;
        }
    };
    for (var _i = 0, mutations_1 = mutations; _i < mutations_1.length; _i++) {
        var m = mutations_1[_i];
        var state_1 = _loop_1(m);
        if (typeof state_1 === "object")
            return state_1.value;
    }
    return deltas;
}
//# sourceMappingURL=apply-mutations-on-deltas.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/delta-collection/delta-cache.js":
/*!********************************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/delta-collection/delta-cache.js ***!
  \********************************************************************************/
/*! exports provided: DeltaCache */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DeltaCache", function() { return DeltaCache; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _ked_backend_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../ked-backend-client */ "./kedbackend/js/dist/js/ked-backend-client/index.js");
/* harmony import */ var _apply_mutations_on_deltas__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./apply-mutations-on-deltas */ "./kedbackend/js/dist/js/ked-backend-repo/delta-collection/apply-mutations-on-deltas.js");



var DeltaCache = /** @class */ (function () {
    function DeltaCache(getClient, getUser, getUserDisplayName) {
        this.getClient = getClient;
        this.getUser = getUser;
        this.getUserDisplayName = getUserDisplayName;
        this.lookup = {};
    }
    DeltaCache.prototype.applyMutations = function (mutations, _a) {
        var optimistic = (_a === void 0 ? { optimistic: false } : _a).optimistic;
        // Apply mutations locally onto the DeltaCache and notify their subscribers
        for (var _i = 0, _b = Object.keys(this.lookup); _i < _b.length; _i++) {
            var queryKey = _b[_i];
            var cacheEntry = this.lookup[queryKey];
            if (cacheEntry.value) {
                // Instead here: Store the mutations on cacheEntry. No matter if it yet has value or not.
                // Then apply mutation whenever subscribing! (Better handling of mutations that arrives before fetch() is done)
                // (See how I handle this in query-set.ts)
                var newValue = Object(_apply_mutations_on_deltas__WEBPACK_IMPORTED_MODULE_2__["applyMutationsOnDeltas"])(cacheEntry.query.branchId, cacheEntry.value, mutations, optimistic, this.getUserDisplayName(), !!cacheEntry.query.tags);
                if (newValue === null) {
                    // The mutation requires cacheEntry to be refetched from server
                    if (!optimistic) {
                        // Caller has successfully performed the mutations and got success back from server.
                        // It's ok to refetch the deltas from server now:
                        cacheEntry.fetch();
                        // After fetch completes, it will notify the subscribers.
                    }
                }
                if (newValue !== cacheEntry.value) {
                    cacheEntry.optimisticValue = newValue;
                    if (!optimistic)
                        cacheEntry.value = newValue;
                    cacheEntry.notify(newValue);
                }
            }
        }
    };
    DeltaCache.prototype.subscribe = function (query, observer) {
        var _this = this;
        var cacheEntry = this.lookup[query.branchId + query.tags];
        if (!cacheEntry) {
            cacheEntry = new DeltaCacheEntry(this.getClient(), query);
            this.lookup[query.branchId + query.tags] = cacheEntry;
        }
        if (cacheEntry.cleanupTimer) {
            clearTimeout(cacheEntry.cleanupTimer);
            cacheEntry.cleanupTimer = null;
        }
        var subscription = {
            unsubscribe: function () {
                cacheEntry.subscribers = cacheEntry.subscribers.filter(function (_a) {
                    var o = _a.observer;
                    return o !== observer;
                });
                if (cacheEntry.subscribers.length === 0) {
                    cacheEntry.cleanupTimer = setTimeout(function () {
                        if (cacheEntry.subscribers.length === 0) {
                            delete _this.lookup[query.branchId + query.tags];
                        }
                    }, 100);
                }
            }
        };
        cacheEntry.subscribers.push({ observer: observer, subscription: subscription });
        if (cacheEntry.value) {
            // Value has been successfully retrieved already. Pick from cache.
            observer(cacheEntry.optimisticValue || cacheEntry.value, null, subscription);
        }
        else if (cacheEntry.isFetching) {
            // A value is on its way. Sit back and relax. All registered
            // observers (including this one) will be notified when data arrives
            // or fails.
        }
        else if (cacheEntry.error) {
            observer(null, cacheEntry.error, subscription);
        }
        else {
            cacheEntry.fetch();
        }
        return subscription;
    };
    return DeltaCache;
}());

var DeltaCacheEntry = /** @class */ (function () {
    function DeltaCacheEntry(client, query) {
        this.fetchOperationId = 0; // Makes sure a re-fetch will discard the result from any ongoing fetch.
        this.client = client;
        this.query = query;
        this.value = null;
        this.error = null;
        this.optimisticValue = null;
        this.subscribers = [];
        this.isFetching = false;
        this.cleanupTimer = null;
    }
    DeltaCacheEntry.prototype.fetch = function () {
        var _this = this;
        var fetchOperationId = ++this.fetchOperationId;
        this.isFetching = true;
        this.fetchFromServer().then(function (value) {
            // Success
            if (fetchOperationId === _this.fetchOperationId) {
                _this.isFetching = false;
                value.sort(function (a, b) { return b.dateTime - a.dateTime; }); // Latest first
                _this.value = value;
                _this.optimisticValue = value;
                _this.notify(value);
            }
        }).catch(function (error) {
            // Fail
            if (fetchOperationId === _this.fetchOperationId) {
                _this.isFetching = false;
                _this.error = error;
                _this.fail(error);
            }
        });
    };
    DeltaCacheEntry.prototype.fetchFromServer = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        if (!this.query.branchId)
                            throw new Error('Deltas only available on branches');
                        return [4 /*yield*/, this.client.http.get('deltas', this.query)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status >= 300 || res.status < 200)) return [3 /*break*/, 3];
                        _a = _ked_backend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(_ked_backend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4: return [2 /*return*/, _c.sent()];
                }
            });
        });
    };
    DeltaCacheEntry.prototype.notify = function (value) {
        for (var _i = 0, _a = this.subscribers; _i < _a.length; _i++) {
            var _b = _a[_i], observer = _b.observer, subscription = _b.subscription;
            observer(value, null, subscription);
        }
    };
    DeltaCacheEntry.prototype.fail = function (error) {
        var copy = this.subscribers.slice();
        this.subscribers = [];
        for (var _i = 0, copy_1 = copy; _i < copy_1.length; _i++) {
            var _a = copy_1[_i], observer = _a.observer, subscription = _a.subscription;
            observer(null, error, subscription);
        }
    };
    return DeltaCacheEntry;
}());
//# sourceMappingURL=delta-cache.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/delta-collection/delta-collection.js":
/*!*************************************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/delta-collection/delta-collection.js ***!
  \*************************************************************************************/
/*! exports provided: DeltaCollection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DeltaCollection", function() { return DeltaCollection; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _observable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../observable */ "./kedbackend/js/dist/js/observable/index.js");


var DeltaCollection = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](DeltaCollection, _super);
    function DeltaCollection(deltaCache, query) {
        var _this = _super.call(this, function (observer) { return _this.deltaCache.subscribe(query, observer); }) || this;
        _this.deltaCache = deltaCache;
        _this.query = query;
        return _this;
    }
    DeltaCollection.prototype.tags = function () {
        var tags = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            tags[_i] = arguments[_i];
        }
        return new DeltaCollection(this.deltaCache, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.query, { tags: tags }));
    };
    return DeltaCollection;
}(_observable__WEBPACK_IMPORTED_MODULE_1__["Collection"]));

//# sourceMappingURL=delta-collection.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/delta-merge.js":
/*!***************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/delta-merge.js ***!
  \***************************************************************/
/*! exports provided: applyDelta, mergeDeltas */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "applyDelta", function() { return applyDelta; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mergeDeltas", function() { return mergeDeltas; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");

function applyDelta(doc, delta) {
    var keys = Object.keys(delta);
    var targetDoc = doc;
    for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {
        var key = keys_1[_i];
        if (targetDoc === doc)
            targetDoc = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, doc);
        var val = delta[key];
        if (val && typeof val === 'object') {
            var metaInstructions = Object.keys(val)
                .filter(function (key) { return key.startsWith('$'); });
            if (metaInstructions.length > 0) {
                var _loop_1 = function (mi) {
                    var miValue = val[mi];
                    switch (mi) {
                        case "$unset": {
                            // Do nothing on target doc!
                            targetDoc.$wasUnset = true; // Just mark it for re-retrieval after successful posting changes.
                            break;
                        }
                        case "$add": {
                            var valuesToAdd = miValue;
                            if (!Array.isArray(valuesToAdd)) {
                                throw new Error("$add instruction must contain array");
                            }
                            var targetArray = targetDoc[key];
                            if (!Array.isArray(targetArray)) {
                                targetArray = [];
                            }
                            else {
                                targetArray = targetArray.slice(); // On JS side, we must be immutable
                            }
                            targetDoc[key] = targetArray;
                            for (var _i = 0, valuesToAdd_1 = valuesToAdd; _i < valuesToAdd_1.length; _i++) {
                                var v = valuesToAdd_1[_i];
                                if (!targetArray.includes(v)) { // avoid dups
                                    targetArray.push(v);
                                }
                            }
                            break;
                        }
                        case "$remove": {
                            var valuesToRemove_1 = miValue;
                            if (!Array.isArray(valuesToRemove_1)) {
                                throw new Error("$remove instruction must contain array");
                            }
                            var targetArray = targetDoc[key];
                            if (!Array.isArray(targetArray)) {
                                targetArray = [];
                            }
                            targetDoc[key] = targetArray.filter(function (t) { return !valuesToRemove_1.includes(t); });
                            break;
                        }
                    }
                };
                for (var _a = 0, metaInstructions_1 = metaInstructions; _a < metaInstructions_1.length; _a++) {
                    var mi = metaInstructions_1[_a];
                    _loop_1(mi);
                }
                continue;
            }
        }
        targetDoc[key] = val;
    }
    return targetDoc;
}
// {name: "Ulla"}, {name: {$unset:0}
// {tags: {$add: "hej"}}, {tags: {$unset:0}"}
function mergeDeltas(delta1, delta2, _a) {
    var removeUnsetProps = (_a === void 0 ? { removeUnsetProps: false } : _a).removeUnsetProps;
    //return {...delta1, ...delta2};
    var keys = Object.keys(delta2);
    var targetDelta = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, delta1);
    for (var _i = 0, keys_2 = keys; _i < keys_2.length; _i++) {
        var key = keys_2[_i];
        var val = delta2[key];
        if (val && typeof val === 'object') {
            var metaInstructions = Object.keys(val)
                .filter(function (key) { return key.startsWith('$'); });
            if (metaInstructions.length > 0) {
                var _loop_2 = function (mi) {
                    var miValue = val[mi];
                    switch (mi) {
                        case "$unset": {
                            if (removeUnsetProps) {
                                delete targetDelta[key];
                            }
                            else {
                                // No matter if targetDelta is empty or has value. Set it to {$unset:0}
                                // to make sure the very end result will have {$unset:0}
                                targetDelta[key] = { $unset: 0 };
                            }
                            break;
                        }
                        case "$add": {
                            var valuesToAdd_2 = miValue;
                            if (!Array.isArray(valuesToAdd_2)) {
                                throw new Error("$add instruction must contain array");
                            }
                            var targetMetaProp = targetDelta[key];
                            targetMetaProp = targetMetaProp ? tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, targetMetaProp) : {};
                            targetDelta[key] = targetMetaProp;
                            // First, just check if target metaProp has {$remove: [...items]}
                            // If so, remove any equal items from there before merging the {$add: [...]} arrays.
                            var targetRemoveArray = targetMetaProp.$remove;
                            if (Array.isArray(targetRemoveArray)) {
                                targetMetaProp.$remove =
                                    targetRemoveArray.filter(function (t) { return !valuesToAdd_2.includes(t); });
                                if (targetMetaProp.$remove.length === 0) {
                                    // If $remove array became emtpy. Remove the $remove prop.
                                    delete targetMetaProp.$remove;
                                }
                            }
                            // Now it's time to merge or create target $add array.
                            var targetAddArray = targetMetaProp.$add;
                            targetAddArray = targetAddArray ? targetAddArray.concat(valuesToAdd_2) : valuesToAdd_2.slice();
                            targetMetaProp.$add = targetAddArray;
                            break;
                        }
                        case "$remove": {
                            var valuesToRemove_2 = miValue;
                            if (!Array.isArray(valuesToRemove_2)) {
                                throw new Error("$remove instruction must contain array");
                            }
                            var targetMetaProp = targetDelta[key];
                            targetMetaProp = targetMetaProp ? tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, targetMetaProp) : {};
                            targetDelta[key] = targetMetaProp;
                            // First, just check if target metaProp has {$add: [...items]}
                            // If so, remove any equal items from there before merging the {$remove: [...]} arrays.
                            var targetAddArray = targetMetaProp.$remove;
                            if (Array.isArray(targetAddArray)) {
                                targetMetaProp.$add =
                                    targetAddArray.filter(function (t) { return !valuesToRemove_2.includes(t); });
                                if (targetMetaProp.$add.length === 0) {
                                    // If $add array became emtpy. Remove the $add prop.
                                    delete targetMetaProp.$add;
                                }
                            }
                            // Now it's time to merge or create target $remove array.
                            var targetRemoveArray = targetMetaProp.$remove;
                            targetRemoveArray = targetRemoveArray ? targetRemoveArray.concat(valuesToRemove_2) : valuesToRemove_2.slice();
                            targetMetaProp.$remove = targetRemoveArray;
                            break;
                        }
                    }
                };
                for (var _b = 0, metaInstructions_2 = metaInstructions; _b < metaInstructions_2.length; _b++) {
                    var mi = metaInstructions_2[_b];
                    _loop_2(mi);
                }
                continue;
            }
        }
        targetDelta[key] = val;
    }
    return targetDelta;
}
//# sourceMappingURL=delta-merge.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/index.js":
/*!*********************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/index.js ***!
  \*********************************************************/
/*! exports provided: KedBackendCollection, KedBackendQuery, KedBackendRepo, KedBackendSubscription, KedBackendWriter, MutationQueue, QuerySet, mixin */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _kedbackend_collection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./kedbackend-collection */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-collection.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendCollection", function() { return _kedbackend_collection__WEBPACK_IMPORTED_MODULE_0__["KedBackendCollection"]; });

/* harmony import */ var _kedbackend_query__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./kedbackend-query */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-query.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendQuery", function() { return _kedbackend_query__WEBPACK_IMPORTED_MODULE_1__["KedBackendQuery"]; });

/* harmony import */ var _kedbackend_repo__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./kedbackend-repo */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-repo.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendRepo", function() { return _kedbackend_repo__WEBPACK_IMPORTED_MODULE_2__["KedBackendRepo"]; });

/* harmony import */ var _kedbackend_subscription__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./kedbackend-subscription */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-subscription.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendSubscription", function() { return _kedbackend_subscription__WEBPACK_IMPORTED_MODULE_3__["KedBackendSubscription"]; });

/* harmony import */ var _kedbackend_writer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./kedbackend-writer */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-writer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendWriter", function() { return _kedbackend_writer__WEBPACK_IMPORTED_MODULE_4__["KedBackendWriter"]; });

/* harmony import */ var _mutation_queue__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./mutation-queue */ "./kedbackend/js/dist/js/ked-backend-repo/mutation-queue.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MutationQueue", function() { return _mutation_queue__WEBPACK_IMPORTED_MODULE_5__["MutationQueue"]; });

/* harmony import */ var _query_set__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./query-set */ "./kedbackend/js/dist/js/ked-backend-repo/query-set.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "QuerySet", function() { return _query_set__WEBPACK_IMPORTED_MODULE_6__["QuerySet"]; });

/* harmony import */ var _observable_mixin__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../observable/mixin */ "./kedbackend/js/dist/js/observable/mixin.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "mixin", function() { return _observable_mixin__WEBPACK_IMPORTED_MODULE_7__["mixin"]; });









//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-collection.js":
/*!*************************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/kedbackend-collection.js ***!
  \*************************************************************************/
/*! exports provided: KedBackendCollection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedBackendCollection", function() { return KedBackendCollection; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _ked_backend_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ked-backend-client */ "./kedbackend/js/dist/js/ked-backend-client/index.js");
/* harmony import */ var _kedbackend_subscription__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./kedbackend-subscription */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-subscription.js");
/* harmony import */ var _cache_bust__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./cache-bust */ "./kedbackend/js/dist/js/ked-backend-repo/cache-bust.js");
/* harmony import */ var _kedbackend_query__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./kedbackend-query */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-query.js");
/* harmony import */ var _observable_collection__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../observable/collection */ "./kedbackend/js/dist/js/observable/collection.js");






/**
 * Represents a "live" query against a table or filtered table.
 */
var KedBackendCollection = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](KedBackendCollection, _super);
    function KedBackendCollection(repo, table, query) {
        var _this = _super.call(this, function (observer) {
            var subscription = new _kedbackend_subscription__WEBPACK_IMPORTED_MODULE_2__["KedBackendSubscription"](observer, _this);
            _this.repo.querySet.subscribe(subscription);
            return subscription;
        }) || this;
        _this.repo = repo;
        _this.table = table;
        _this.query = query;
        return _this;
    }
    Object.defineProperty(KedBackendCollection.prototype, "queryKey", {
        get: function () {
            return _kedbackend_query__WEBPACK_IMPORTED_MODULE_4__["KedBackendQuery"].queryKey(this.table, this.query);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(KedBackendCollection.prototype, "includes", {
        get: function () {
            return this._includes || (this._includes = [].concat(this.query.include || []));
        },
        enumerable: true,
        configurable: true
    });
    KedBackendCollection.prototype.applyQuery = function (query) {
        return new KedBackendCollection(this.repo, this.table, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.query, query));
    };
    KedBackendCollection.prototype.addToQueryArrayProp = function (arrayProp, entries) {
        var _a;
        return this.applyQuery((_a = {}, _a[arrayProp] = (this.query[arrayProp] || []).concat(entries), _a));
    };
    KedBackendCollection.prototype.addFlags = function () {
        var flags = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            flags[_i] = arguments[_i];
        }
        return this.addToQueryArrayProp("flags", flags);
    };
    KedBackendCollection.prototype.debug = function () {
        return this.applyQuery({ debug: true });
    };
    KedBackendCollection.prototype.idsOnly = function () {
        return this.addFlags("idsOnly");
    };
    KedBackendCollection.prototype.idsAndNamesOnly = function () {
        return this.addFlags("idsAndNamesOnly");
    };
    KedBackendCollection.prototype.includeIdsOnly = function () {
        return this.addFlags("includeIdsOnly");
    };
    KedBackendCollection.prototype.includeIdsAndNamesOnly = function () {
        return this.addFlags("includeIdsAndNamesOnly");
    };
    KedBackendCollection.prototype.between = function (from, to) {
        return this.applyQuery({ from: from, to: to });
    };
    KedBackendCollection.prototype.role = function (role) {
        return this.applyQuery({ role: role });
    };
    KedBackendCollection.prototype.hasEdgesFrom = function (ids, options) {
        if (ids.length === 0 || ids.some(function (id) { return !id; }))
            throw new Error("Invalid id list given to Collection.hasEdgesFrom(" + JSON.stringify(ids) + ")");
        var hef = this.addToQueryArrayProp("hasEdgesFrom", ids);
        return options && options.includeDeltaEdges ?
            hef.addFlags("includeDeltaEdges") :
            hef;
    };
    KedBackendCollection.prototype.hasEdgesTo = function (ids, options) {
        if (ids.length === 0 || ids.some(function (id) { return !id; }))
            throw new Error("Invalid id list given to Collection.hasEdgesTo(" + JSON.stringify(ids) + ")");
        var het = this.addToQueryArrayProp("hasEdgesTo", ids);
        return options && options.includeDeltaEdges ?
            het.addFlags("includeDeltaEdges") :
            het;
    };
    KedBackendCollection.prototype.id = function (id) {
        var _this = this;
        return this.applyQuery({ ids: [id] }).single({
            onZero: function () { throw new Error("Could not find entity in " + _this.table + " with id " + id); },
            onMany: function () { throw new Error("Multiple entries in " + _this.table + " with id " + id); },
        });
    };
    KedBackendCollection.prototype.ids = function (ids) {
        return this.applyQuery({ ids: ids });
    };
    KedBackendCollection.prototype.name = function (name) {
        return this.applyQuery({ name: name });
    };
    KedBackendCollection.prototype.tags = function () {
        var tags = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            tags[_i] = arguments[_i];
        }
        return this.applyQuery({ tags: tags });
    };
    KedBackendCollection.prototype.branchId = function (branchId) {
        return this.applyQuery({ branchId: branchId });
    };
    KedBackendCollection.prototype.include = function () {
        var graphs = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            graphs[_i] = arguments[_i];
        }
        return this.addToQueryArrayProp("include", graphs);
    };
    KedBackendCollection.prototype.cacheOptimized = function () {
        return this.applyQuery({ cacheBust: _cache_bust__WEBPACK_IMPORTED_MODULE_3__["CacheBust"].getCacheBust(this.table, this.query, this.repo.getUser(), this.includes) });
    };
    KedBackendCollection.prototype.mutationsOnEmpty = function (mutationFactory) {
        var tx = new _ked_backend_client__WEBPACK_IMPORTED_MODULE_1__["BatchRunner"]();
        mutationFactory(tx);
        return this.applyQuery({ mutationsOnEmpty: tx.mutationRequests });
    };
    KedBackendCollection.prototype.single = function (throwers) {
        var _this = this;
        var _a = throwers || {}, onZero = _a.onZero, onMany = _a.onMany;
        return this.toValue().map(function (items) {
            if (items.length === 0) {
                if (onZero)
                    onZero();
                else
                    throw new Error("Single item of " + _this.table + " expected to be returned by query " + JSON.stringify(_this.query) + " but none was found.");
            }
            if (items.length > 1) {
                debugger;
                if (onMany)
                    onMany();
                else
                    console.log("Single item of " + _this.table + " expected to be returned by query " + JSON.stringify(_this.query) + " but " + items.length + " was found.");
            }
            return items[0];
        });
    };
    /*combineLatest<TOther>(other: QueryObservable<TOther>) {
      return this.render(x => x).combineLatest(other);
    }*/
    KedBackendCollection.prototype.update = function (doc, changes, debounce) {
        if (debounce === void 0) { debounce = 1000; }
        this.repo.writer.mutate([{
                op: 'update',
                table: this.table,
                branchId: this.query.branchId,
                id: doc.id,
                deltaDoc: changes,
                targetName: doc.name
            }], debounce);
    };
    KedBackendCollection.prototype.addRelated = function (id, label, relatedDoc) {
        this.repo.writer.mutate([{
                op: 'add-related',
                table: this.table,
                branchId: this.query.branchId,
                id: id,
                graphProp: label,
                relatedDoc: relatedDoc
            }], 0);
    };
    KedBackendCollection.prototype.removeRelated = function (id, label, relatedDoc) {
        this.repo.writer.mutate([{
                op: 'remove-related',
                table: this.table,
                branchId: this.query.branchId,
                id: id,
                graphProp: label,
                relatedDoc: relatedDoc
            }], 0);
    };
    KedBackendCollection.prototype.undoLink = function (id, label, relatedId) {
        if (!this.query.branchId)
            throw new Error("undo links can only be performed on branches");
        this.repo.writer.mutate([{
                op: 'undo-link',
                table: this.table,
                branchId: this.query.branchId,
                id: id,
                graphProp: label,
                relatedId: relatedId
            }], 0);
    };
    KedBackendCollection.prototype.delete = function () {
        var _this = this;
        var ids = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            ids[_i] = arguments[_i];
        }
        this.repo.writer.mutate(ids.map(function (id) { return ({
            op: 'delete',
            table: _this.table,
            id: id
        }); }), 0);
    };
    KedBackendCollection.prototype.unsubscribe = function (subscription) {
        this.repo.querySet.unsubscribe(subscription);
    };
    return KedBackendCollection;
}(_observable_collection__WEBPACK_IMPORTED_MODULE_5__["Collection"]));

/*mixin(
  KedBackendCollection.prototype,
  MappedCollection.prototype,
  "map", "flat", "concat", "render", "load");*/
//# sourceMappingURL=kedbackend-collection.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-query.js":
/*!********************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/kedbackend-query.js ***!
  \********************************************************************/
/*! exports provided: KedBackendQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedBackendQuery", function() { return KedBackendQuery; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ked-backend-client/utils */ "./kedbackend/js/dist/js/ked-backend-client/utils.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ "./kedbackend/js/dist/js/ked-backend-repo/utils.js");
/* harmony import */ var _delta_merge__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./delta-merge */ "./kedbackend/js/dist/js/ked-backend-repo/delta-merge.js");




var KedBackendQuery = /** @class */ (function () {
    function KedBackendQuery(table, query, user, repo, mutationQueue) {
        this.table = table;
        this.query = query;
        this.user = user;
        this.repo = repo;
        this.mutationQueue = mutationQueue;
        this.subscriptions = [];
        this.data = [];
        this.gotInitialResponse = false;
        this.invalid = false;
        this.loadedVersion = 0;
        this._loadPromise = null;
        this.includes = query.include ?
            typeof query.include === 'string' ?
                [query.include] :
                query.include :
            [];
    }
    KedBackendQuery.queryKey = function (table, query) {
        var mutationsOnEmpty = query.mutationsOnEmpty, comparableProps = tslib__WEBPACK_IMPORTED_MODULE_0__["__rest"](query, ["mutationsOnEmpty"]);
        return table + JSON.stringify(comparableProps);
    };
    Object.defineProperty(KedBackendQuery.prototype, "queryKey", {
        get: function () {
            return KedBackendQuery.queryKey(this.table, this.query);
        },
        enumerable: true,
        configurable: true
    });
    KedBackendQuery.prototype.subscribe = function (subscription) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var data, data;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.subscriptions.push(subscription);
                        if (!(this.gotInitialResponse && !this.invalid)) return [3 /*break*/, 1];
                        data = this.getDataWithMutationsApplied(this.mutationQueue.get(), true, this.data);
                        subscription.notifySubscriber(data, this.error);
                        return [3 /*break*/, 4];
                    case 1:
                        data = this.queryLocally();
                        if (!data) return [3 /*break*/, 2];
                        this.data = data;
                        this.error = null;
                        subscription.notifySubscriber(data, this.error);
                        return [3 /*break*/, 4];
                    case 2: return [4 /*yield*/, this.load()];
                    case 3:
                        _a.sent();
                        _a.label = 4;
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    KedBackendQuery.prototype.load = function (version) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var loadPromise;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (this.gotInitialResponse) {
                            // mutationsOnEmpty should never be used twice.
                            delete this.query.mutationsOnEmpty;
                        }
                        if (!(!version && this._loadPromise)) return [3 /*break*/, 2];
                        return [4 /*yield*/, this._loadPromise];
                    case 1: 
                    // loading is ongoing, and caller does not require a recent refresh.
                    // wait for the ongoing load to complete
                    return [2 /*return*/, _a.sent()];
                    case 2:
                        version = version || this.repo.writer.persistedVersion.value;
                        loadPromise = this._loadPromise = this._load(version).then(function (data) {
                            if (_this._loadPromise === loadPromise) {
                                _this.data = data;
                                _this.loadedVersion = Math.max(_this.loadedVersion, version);
                            }
                        }).catch(function (error) {
                            if (_this._loadPromise === loadPromise) {
                                // Noone has refreshed our load. The error is the final result. Set it.
                                _this.error = error;
                            }
                        }).then(function () {
                            if (_this._loadPromise === loadPromise) {
                                // Noone has refreshed our load. We're finished. Data or error is already set.
                                // Mark gotInitialResponse to true and notify subscribers.
                                _this._loadPromise = null;
                                _this.gotInitialResponse = true;
                                _this.notifySubscribers(_this.mutationQueue.get());
                            }
                            else {
                                // A more recent call to load() is ongoing, OR was ongoing but responded
                                // before us.
                                // In any case return this._loadPromise. If it's ongoing we'll wait for it
                                // to finish. If it's null, we'll be returning finally here without
                                // any action, because the action was taken by the refresher.
                                return _this._loadPromise; // Wait for the refreshed load to complete
                            }
                        });
                        return [4 /*yield*/, loadPromise];
                    case 3:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    KedBackendQuery.prototype._load = function (version) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!this.mutationQueue.affectsQuery(this.table, this.query, this.includes)) return [3 /*break*/, 2];
                        // There are outgoing mutations that affects this query.
                        // Need to wait till they reach server and server responds with OK before querying
                        // the server. Otherwise, we may get inaccurate data from server.
                        return [4 /*yield*/, this.repo.writer.waitForVersionToPersist(version)];
                    case 1:
                        // There are outgoing mutations that affects this query.
                        // Need to wait till they reach server and server responds with OK before querying
                        // the server. Otherwise, we may get inaccurate data from server.
                        _a.sent();
                        _a.label = 2;
                    case 2: return [4 /*yield*/, this.queryServer()];
                    case 3: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    KedBackendQuery.prototype.unsubscribe = function (subscription) {
        this.subscriptions = this.subscriptions.filter(function (s) { return s !== subscription; });
    };
    KedBackendQuery.prototype.commitMutations = function (mutations, version) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _i, mutations_1, m, data;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!this.data) return [3 /*break*/, 9];
                        _i = 0, mutations_1 = mutations;
                        _a.label = 1;
                    case 1:
                        if (!(_i < mutations_1.length)) return [3 /*break*/, 8];
                        m = mutations_1[_i];
                        if (!(m.op === 'clear-branch' && (m.branchId === this.query.branchId))) return [3 /*break*/, 3];
                        return [4 /*yield*/, this.refreshOrInvalidate(version)];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                    case 3:
                        if (!(m.op === 'merge' && (!m.targetBranchId ||
                            m.branchId === this.query.branchId ||
                            m.targetBranchId === this.query.branchId))) return [3 /*break*/, 5];
                        return [4 /*yield*/, this.refreshOrInvalidate(version)];
                    case 4:
                        _a.sent();
                        return [2 /*return*/];
                    case 5:
                        if (!(m.op === 'update' && ((m.deltaDoc.tags && this.query.tags) ||
                            (m.deltaDoc.name && this.query.name)))) return [3 /*break*/, 7];
                        // A tag may have been added, or renamed, and
                        // the query is dependent on the same property.
                        // The query must be refreshed from server as we cannot
                        // commit the mutations locally as we don't have all info.
                        return [4 /*yield*/, this.refreshOrInvalidate(version)];
                    case 6:
                        // A tag may have been added, or renamed, and
                        // the query is dependent on the same property.
                        // The query must be refreshed from server as we cannot
                        // commit the mutations locally as we don't have all info.
                        _a.sent();
                        return [2 /*return*/];
                    case 7:
                        _i++;
                        return [3 /*break*/, 1];
                    case 8:
                        data = this.getDataWithMutationsApplied(mutations, false, this.data);
                        this.data = data;
                        _a.label = 9;
                    case 9: return [2 /*return*/];
                }
            });
        });
    };
    KedBackendQuery.prototype.refreshOrInvalidate = function (version) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!(this.subscriptions.length === 0)) return [3 /*break*/, 1];
                        this.invalid = true;
                        return [3 /*break*/, 3];
                    case 1: return [4 /*yield*/, this.load(version)];
                    case 2:
                        _a.sent();
                        _a.label = 3;
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    KedBackendQuery.prototype.notifySubscribers = function (optimisticMutations) {
        var _this = this;
        if (this.data && this.gotInitialResponse) {
            var data_1 = this.getDataWithMutationsApplied(optimisticMutations, true, this.data);
            this.subscriptions.forEach(function (s) {
                s.notifySubscriber(data_1, _this.error);
            });
        }
    };
    KedBackendQuery.prototype.queryLocally = function () {
        return this.repo.querySet.queryLocally(this.table, this.query, this.includes);
    };
    KedBackendQuery.prototype.queryServer = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var data;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.repo.getClient().list(this.table, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.query))];
                    case 1:
                        data = _a.sent();
                        return [2 /*return*/, data];
                }
            });
        });
    };
    KedBackendQuery.prototype.getDataWithMutationsApplied = function (mutations, optimistic, data) {
        var _this = this;
        mutations.forEach(function (mutation) {
            data = _this.applyMutationsOnData(data, mutation, optimistic);
        });
        return data;
    };
    KedBackendQuery.prototype.applyMutationsOnData = function (data, m, optimistic) {
        if (Object(_utils__WEBPACK_IMPORTED_MODULE_2__["branchSensitive"])(m) && m.branchId != this.query.branchId)
            return data;
        var _a = this, table = _a.table, includes = _a.includes, listOptions = _a.query;
        var sourceIds = listOptions.hasEdgesFrom ? [].concat(listOptions.hasEdgesFrom || []) : [];
        var requestedTags = listOptions.tags ? [].concat(listOptions.tags || []) : [];
        switch (m.op) {
            case 'update': {
                return Object(_ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_1__["updateArray"])(data, function (doc) {
                    if (doc.id === m.id) {
                        // Apply delta on updated document
                        var updatedDoc = Object(_delta_merge__WEBPACK_IMPORTED_MODULE_3__["applyDelta"])(doc, m.deltaDoc);
                        if (optimistic)
                            updatedDoc.$meta = 'updating';
                        return updatedDoc;
                    }
                    // If id does not apply to this doc, search in graphs the id is found
                    // among graph included docs, and if so, update that one:
                    includes.forEach(function (label) {
                        var _a;
                        var includedDocs = doc[label];
                        if (includedDocs) {
                            var updatedArray = Object(_ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_1__["updateArray"])(includedDocs, function (related) {
                                if (related.id !== m.id)
                                    return related;
                                var updatedRelated = Object(_delta_merge__WEBPACK_IMPORTED_MODULE_3__["applyDelta"])(related, m.deltaDoc);
                                if (optimistic)
                                    updatedRelated.$meta = 'updating';
                                return updatedRelated;
                            });
                            if (updatedArray !== includedDocs) {
                                doc = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, doc, (_a = {}, _a[label] = updatedArray, _a));
                            }
                        }
                    });
                    return doc;
                });
            }
            case 'add-related':
                if (table === m.table && includes.indexOf(m.graphProp) !== -1) {
                    // If expression is `db.courseBlocks....whatever.. .include("abilities")`, detect: db.courseBlocks.addRelated(blockId, 'abilities', ...)
                    // ...because table = 'courseBlocks' and includes has "abilities".
                    return Object(_ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_1__["updateArray"])(data, function (doc) {
                        var _a;
                        if (doc.id !== m.id)
                            return doc;
                        var relatedDoc = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, m.relatedDoc);
                        if (optimistic)
                            relatedDoc.$meta = 'adding';
                        return tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, doc, (_a = {}, _a[m.graphProp] = doc[m.graphProp].concat([relatedDoc]), _a));
                    });
                }
                if (listOptions.hasEdgesFrom) {
                    if (sourceIds.includes(m.id)) {
                        // If expression is:
                        //   `db.courseBlocks.hasEdgesFrom([courseId])`  (meaning table='courseBlocks' and sourceIds includes courseId)
                        // , detect: db.courseInstances.addRelated(courseId, 'courseBlocks', ....) // m.graphProp === 'blocks'--> getTableFromLabel --> 'courseBlocks'
                        if (table === Object(_utils__WEBPACK_IMPORTED_MODULE_2__["getTableFromLabel"])(m.table, m.graphProp)) {
                            if (!listOptions.tags)
                                return data.concat(this.setGraphProps(m.relatedDoc));
                            if (m.relatedDoc.tags && requestedTags.some(function (tag) { return m.relatedDoc.tags.includes(tag); })) {
                                return data.concat(this.setGraphProps(m.relatedDoc));
                            }
                        }
                    }
                }
                if (listOptions.ids && listOptions.ids.some(function (id) { return id === m.relatedDoc.id; })) {
                    // A certain ID is observed. A doc with this id is being added.
                    // Add the doc to the result. Exactly this WILL happen in the following typical scenario:
                    // 1. User adds a related document to a list.
                    // 2. Document remains within the MutationQueue while batch-request is being processed by server.
                    // 3. User clicks the added item to edit or view it (or our component redirects to its editor)
                    // 4. A new query of that particular ID is subscribed to {ids=[theId]}
                    //    KedBackendQuery.subscribe then does this:
                    //      1. Call queryLocally() before querying server
                    //      2. queryLocally() inspects mutations and finds a match, returning an empty list
                    //         (assumes as we are adding it, it can't exist on the server anyway)
                    //      3. KedBackendQUery applies mutations onto the empty list, and ends up here to add
                    //         it optimistically.
                    //      4. When server responds with 200 OK, calls us here again with optimistic=false
                    //         to "persist" it in the query's data array.
                    //      4B: If not 200 OK, mutation may be gone and the subscriber will se an error page
                    //         "Could not find entity with id X." along with a red error message on the screen
                    //         about that it failed to save on server.
                    return data.concat(this.setGraphProps(m.relatedDoc));
                }
                return data;
            case 'remove-related':
                if (table === m.table && includes.indexOf(m.graphProp) !== -1) {
                    return Object(_ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_1__["updateArray"])(data, function (doc) {
                        var _a;
                        var includedDocs = doc[m.graphProp];
                        if (!includedDocs)
                            return doc;
                        if (doc.id !== m.id)
                            return doc;
                        return tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, doc, (_a = {}, _a[m.graphProp] = optimistic ?
                            // Mark related-doc-to-remove with $meta: 'deleting'
                            includedDocs.map(function (d) { return d.id !== m.relatedDoc.id ?
                                d : tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, d, { $meta: 'deleting' }); }) :
                            // Delete related-doc-to-remove from doc[grapProp]:
                            includedDocs.filter(function (d) { return d.id !== m.relatedDoc.id; }), _a));
                    });
                }
                if (listOptions.hasEdgesFrom) {
                    if (sourceIds.includes(m.id))
                        return optimistic ?
                            data.map(function (d) { return d.id === m.relatedDoc.id ? tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, d, { $meta: 'deleting' }) : d; }) :
                            data.filter(function (d) { return d.id !== m.relatedDoc.id; });
                }
                return data;
            case 'delete':
                if (table === m.table) {
                    return data.filter(function (d) { return d.id !== m.id; });
                }
                else if (listOptions.include) {
                    var includedTables = includes
                        .map(function (label) { return ({ label: label, table: Object(_utils__WEBPACK_IMPORTED_MODULE_2__["getTableFromLabel"])(table, label) }); });
                    var labels_1 = includedTables.filter(function (_a) {
                        var table = _a.table;
                        return table === m.table;
                    });
                    if (labels_1.length > 0) {
                        return Object(_ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_1__["updateArray"])(data, function (doc) {
                            labels_1.forEach(function (_a) {
                                var label = _a.label;
                                var _b;
                                var relatedDocs = doc[label];
                                if (relatedDocs) {
                                    doc = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, doc, (_b = {}, _b[label] = optimistic ?
                                        relatedDocs.map(function (d) { return d.id === m.id ? tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, d, { $meta: 'deleting' }) : d; }) :
                                        relatedDocs.filter(function (_a) {
                                            var id = _a.id;
                                            return id !== m.id;
                                        }), _b));
                                }
                            });
                            return doc;
                        });
                    }
                }
                return data;
            default:
                return data;
        }
    };
    KedBackendQuery.prototype.setGraphProps = function (doc) {
        var copy = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, doc);
        this.includes.forEach(function (label) { return copy[label] = copy[label] || []; });
        return copy;
    };
    return KedBackendQuery;
}());

//# sourceMappingURL=kedbackend-query.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-repo.js":
/*!*******************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/kedbackend-repo.js ***!
  \*******************************************************************/
/*! exports provided: KedBackendRepo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedBackendRepo", function() { return KedBackendRepo; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json");
var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_1___namespace = /*#__PURE__*/__webpack_require__.t(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json", 1);
/* harmony import */ var _kedbackend_collection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./kedbackend-collection */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-collection.js");
/* harmony import */ var _query_set__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./query-set */ "./kedbackend/js/dist/js/ked-backend-repo/query-set.js");
/* harmony import */ var _mutation_queue__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./mutation-queue */ "./kedbackend/js/dist/js/ked-backend-repo/mutation-queue.js");
/* harmony import */ var _kedbackend_writer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./kedbackend-writer */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-writer.js");
/* harmony import */ var _delta_collection_delta_collection__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./delta-collection/delta-collection */ "./kedbackend/js/dist/js/ked-backend-repo/delta-collection/delta-collection.js");







var KedBackendRepo = /** @class */ (function () {
    function KedBackendRepo(getClient, getUser, getUserDisplayName, defaultQueryOptions, mutationQueue, querySet, writer, cacheOptimized) {
        var _this = this;
        this.getClient = getClient;
        this.getUser = getUser;
        this.getUserDisplayName = getUserDisplayName;
        this.defaultQueryOptions = defaultQueryOptions;
        this.mutationQueue = mutationQueue;
        this.querySet = querySet;
        this.writer = writer;
        this.cacheOptimized = cacheOptimized;
        if (!defaultQueryOptions)
            this.defaultQueryOptions = {};
        if (!mutationQueue)
            this.mutationQueue = new _mutation_queue__WEBPACK_IMPORTED_MODULE_4__["MutationQueue"]();
        if (!querySet)
            this.querySet = new _query_set__WEBPACK_IMPORTED_MODULE_3__["QuerySet"](this.mutationQueue);
        if (!writer)
            this.writer = new _kedbackend_writer__WEBPACK_IMPORTED_MODULE_5__["KedBackendWriter"](this.mutationQueue, this.querySet, getClient, getUser, getUserDisplayName);
        Object.keys(kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_1__["tables"]).forEach(function (table) {
            var collection = new _kedbackend_collection__WEBPACK_IMPORTED_MODULE_2__["KedBackendCollection"](_this, table, defaultQueryOptions || {});
            if (cacheOptimized) {
                collection = collection.cacheOptimized();
            }
            _this[table] = collection;
        });
        this.deltas = new _delta_collection_delta_collection__WEBPACK_IMPORTED_MODULE_6__["DeltaCollection"](this.writer.deltaCache, {
            branchId: this.defaultQueryOptions.branchId // If branchId is undefined. DeltaCollection will respond with Error on subscribe()
        });
    }
    KedBackendRepo.prototype.table = function (tableName) {
        var collection = new _kedbackend_collection__WEBPACK_IMPORTED_MODULE_2__["KedBackendCollection"](this, tableName, this.defaultQueryOptions);
        if (this.cacheOptimized)
            collection = collection.cacheOptimized();
        return collection;
    };
    KedBackendRepo.prototype._clone = function (queryOptions, cacheOptimized) {
        var clone = new KedBackendRepo(this.getClient, this.getUser, this.getUserDisplayName, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.defaultQueryOptions, queryOptions), this.mutationQueue, this.querySet, this.writer, cacheOptimized === undefined ? this.cacheOptimized : cacheOptimized);
        return clone;
    };
    KedBackendRepo.prototype.branch = function (branchId) {
        return this._clone({ branchId: branchId });
    };
    KedBackendRepo.prototype.role = function (role) {
        return this._clone({ role: role });
    };
    KedBackendRepo.prototype.optimizeCache = function () {
        return this._clone({}, true);
    };
    KedBackendRepo.prototype.clearBranch = function () {
        if (!this.defaultQueryOptions.branchId)
            throw new Error("Cannot clear master branch");
        this.writer.mutate([{ op: 'clear-branch', branchId: this.defaultQueryOptions.branchId }], 0);
    };
    KedBackendRepo.prototype.merge = function (targetBranchId) {
        if (!this.defaultQueryOptions.branchId)
            throw new Error("Cannot merge from master branch");
        this.writer.mutate([{ op: 'merge', branchId: this.defaultQueryOptions.branchId, targetBranchId: targetBranchId }], 0);
    };
    KedBackendRepo.prototype.saveNow = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.writer.waitForVersionToPersist(this.writer.currentVersion)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    return KedBackendRepo;
}());

//# sourceMappingURL=kedbackend-repo.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-subscription.js":
/*!***************************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/kedbackend-subscription.js ***!
  \***************************************************************************/
/*! exports provided: KedBackendSubscription */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedBackendSubscription", function() { return KedBackendSubscription; });
var KedBackendSubscription = /** @class */ (function () {
    function KedBackendSubscription(subscriber, collection) {
        this.subscriber = subscriber;
        this.collection = collection;
    }
    KedBackendSubscription.prototype.notifySubscriber = function (data, error) {
        try {
            if (error)
                this.subscriber([], error, this);
            else if (data !== this.lastNotifiedData) { // Will in-fact be equal by reference if data is same as last notification (as we use an immutable approach on data)
                this.lastNotifiedData = data;
                this.subscriber(data, error, this);
            }
        }
        catch (ex) {
            try {
                this.subscriber([], ex, this);
            }
            catch (ex2) {
                console.error("Error while notifying KedBackendSubscriber:", ex2, 'originally notified error:', ex);
            }
        }
    };
    KedBackendSubscription.prototype.unsubscribe = function () {
        this.collection.unsubscribe(this);
    };
    return KedBackendSubscription;
}());

//# sourceMappingURL=kedbackend-subscription.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-writer.js":
/*!*********************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/kedbackend-writer.js ***!
  \*********************************************************************/
/*! exports provided: KedBackendWriter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedBackendWriter", function() { return KedBackendWriter; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _mutation_queue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./mutation-queue */ "./kedbackend/js/dist/js/ked-backend-repo/mutation-queue.js");
/* harmony import */ var _ked_backend_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../ked-backend-client */ "./kedbackend/js/dist/js/ked-backend-client/index.js");
/* harmony import */ var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json");
var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_3___namespace = /*#__PURE__*/__webpack_require__.t(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json", 1);
/* harmony import */ var _cache_bust__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./cache-bust */ "./kedbackend/js/dist/js/ked-backend-repo/cache-bust.js");
/* harmony import */ var _observable__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../observable */ "./kedbackend/js/dist/js/observable/index.js");
/* harmony import */ var _delta_collection_delta_cache__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./delta-collection/delta-cache */ "./kedbackend/js/dist/js/ked-backend-repo/delta-collection/delta-cache.js");







var KedBackendWriter = /** @class */ (function () {
    function KedBackendWriter(mutationQueue, querySet, getClient, getUser, getUserDisplayName) {
        this.mutationQueue = mutationQueue;
        this.querySet = querySet;
        this.getClient = getClient;
        this.getUser = getUser;
        this.getUserDisplayName = getUserDisplayName;
        this._timeoutId = null;
        this._isSavingPromise = null;
        this.currentVersion = 0;
        this.persistedVersion = new _observable__WEBPACK_IMPORTED_MODULE_5__["Emitter"](0);
        this.errorSubscribers = [];
        this.stateSubscribers = [];
        this.deltaCache = new _delta_collection_delta_cache__WEBPACK_IMPORTED_MODULE_6__["DeltaCache"](getClient, getUser, getUserDisplayName);
    }
    Object.defineProperty(KedBackendWriter.prototype, "isSaving", {
        get: function () { return !!this._isSavingPromise; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(KedBackendWriter.prototype, "isEdited", {
        get: function () { return this.mutationQueue.get().length > 0; },
        enumerable: true,
        configurable: true
    });
    KedBackendWriter.prototype.onError = function (callback) {
        this.errorSubscribers.push(callback);
    };
    KedBackendWriter.prototype.onStateChange = function (callback) {
        this.stateSubscribers.push(callback);
    };
    KedBackendWriter.prototype.off = function (callback) {
        this.errorSubscribers = this.errorSubscribers.filter(function (s) { return s !== callback; });
        this.stateSubscribers = this.stateSubscribers.filter(function (s) { return s !== callback; });
    };
    KedBackendWriter.prototype.dispatchError = function (error, retryable) {
        var _this = this;
        this.errorSubscribers.forEach(function (callback) {
            try {
                callback(error, retryable, _this);
            }
            catch (_) { }
        });
    };
    KedBackendWriter.prototype.dispatchStateChange = function () {
        var _this = this;
        this.stateSubscribers.forEach(function (callback) {
            try {
                callback(_this);
            }
            catch (_) { }
        });
    };
    KedBackendWriter.prototype.mutate = function (mutations, debounce) {
        this.mutationQueue.add(mutations);
        ++this.currentVersion;
        this.dispatchStateChange();
        this.querySet.notifySubscribers();
        this.deltaCache.applyMutations(this.mutationQueue.get(), { optimistic: true });
        if (!this._isSavingPromise) {
            if (this._timeoutId)
                clearTimeout(this._timeoutId);
            this._timeoutId = setTimeout(this.save.bind(this), debounce);
        }
        // If isSaving, we don't need to do anything, becase it will re-check if additional
        // mutations have come, when saving is done.
    };
    KedBackendWriter.prototype.retrySave = function () {
        return this.save();
    };
    KedBackendWriter.prototype.waitForVersionToPersist = function (version) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var persistedVersion;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.persistedVersion.load()];
                    case 1:
                        persistedVersion = _a.sent();
                        if (!(persistedVersion < version)) return [3 /*break*/, 3];
                        this.save(); // Be more eager to save
                        return [4 /*yield*/, this.persistedVersion.filter(function (persistedVersion) { return persistedVersion >= version; }).load()];
                    case 2:
                        _a.sent();
                        _a.label = 3;
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    KedBackendWriter.prototype.save = function () {
        var _this = this;
        if (this._timeoutId)
            clearTimeout(this._timeoutId);
        if (this._isSavingPromise)
            return this._isSavingPromise;
        if (!this.isEdited)
            return Promise.resolve();
        this._timeoutId = null;
        this._isSavingPromise = this._save();
        this._isSavingPromise.catch(function () { }).then(function () { return _this._isSavingPromise = null; });
        return this._isSavingPromise;
    };
    KedBackendWriter.prototype._save = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var mutations, version, mutationRequests, res_1, etagMutations, error_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.dispatchStateChange();
                        mutations = this.mutationQueue.get();
                        version = this.currentVersion;
                        this.mutationQueue.moveToSavingQueue();
                        mutationRequests = this.mapMutations(mutations);
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 6, 11, 12]);
                        return [4 /*yield*/, this.getClient().batch(mutationRequests)];
                    case 2:
                        res_1 = _a.sent();
                        etagMutations = Object.keys(res_1.newEtags).map(function (id) { return ({
                            op: 'update',
                            table: null,
                            id: id,
                            deltaDoc: { $etag: res_1.newEtags[id] },
                            targetName: null // We don't have the target name. But this mutation won't be visible in a DeltaCollection anyway, so it wont be used.
                        }); });
                        // Invalidate cache
                        _cache_bust__WEBPACK_IMPORTED_MODULE_4__["CacheBust"].invalidateCache(mutationRequests, this.getUser());
                        // Commmit mutations along with etagMutations into queries cached data
                        this.persistedVersion.dispatch(version);
                        this.deltaCache.applyMutations(mutations, { optimistic: false });
                        return [4 /*yield*/, this.querySet.commitMutations(_mutation_queue__WEBPACK_IMPORTED_MODULE_1__["MutationQueue"].merge(mutations, etagMutations), version)];
                    case 3:
                        _a.sent();
                        // On success, clear saving queue as the mutations will now be committed to all query's data instead.
                        this.mutationQueue.clearSavingQueue();
                        this.dispatchStateChange(); // isEdited may have turned to false
                        // Finally, notify subscribers so that views get updated with committed results
                        this.querySet.notifySubscribers();
                        if (!(this.mutationQueue.get().length > 0)) return [3 /*break*/, 5];
                        // Additional mutations happend while we were saving. Handle them as well.
                        return [4 /*yield*/, this._save()];
                    case 4:
                        // Additional mutations happend while we were saving. Handle them as well.
                        _a.sent();
                        _a.label = 5;
                    case 5: return [3 /*break*/, 12];
                    case 6:
                        error_1 = _a.sent();
                        this.persistedVersion.dispatchError(error_1);
                        if (!(error_1 && error_1.name && error_1.name.startsWith("http4"))) return [3 /*break*/, 9];
                        // Access Control denied, bad request or similar. Throw mutations away.
                        this.dispatchError(error_1, false);
                        this.mutationQueue.clearSavingQueue();
                        this.dispatchStateChange(); // isEdited may have turned to false
                        this.querySet.notifySubscribers();
                        if (!(this.mutationQueue.get().length > 0)) return [3 /*break*/, 8];
                        // Ho ho! Additional mutations happend while we were saving. Handle them alone. THey might be more lucky.
                        return [4 /*yield*/, this._save()];
                    case 7:
                        // Ho ho! Additional mutations happend while we were saving. Handle them alone. THey might be more lucky.
                        _a.sent();
                        _a.label = 8;
                    case 8: return [3 /*break*/, 10];
                    case 9:
                        this.dispatchError(error_1, true);
                        _a.label = 10;
                    case 10: return [3 /*break*/, 12];
                    case 11:
                        this.dispatchStateChange();
                        return [7 /*endfinally*/];
                    case 12: return [2 /*return*/];
                }
            });
        });
    };
    KedBackendWriter.prototype.mapMutations = function (mutations) {
        var br = new _ked_backend_client__WEBPACK_IMPORTED_MODULE_2__["BatchRunner"]();
        mutations.forEach(function (m) {
            switch (m.op) {
                case 'update':
                    br.update(m.table, m.id, m.deltaDoc, m.branchId);
                    break;
                case 'add-related':
                    if (!m.relatedDoc.$etag) {
                        // No $etag means this is a new document. Add it before linking to it:
                        br.add(kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_3__["tables"][m.table].relationships[m.graphProp], m.relatedDoc, m.branchId);
                    }
                    br.link2(m.table, m.id, m.graphProp, m.relatedDoc.id, m.branchId);
                    break;
                case 'remove-related':
                    br.unlink2(m.table, m.id, m.graphProp, m.relatedDoc.id, m.branchId);
                    break;
                case 'undo-link':
                    br.undoLink(m.table, m.id, m.graphProp, m.relatedId, m.branchId);
                    break;
                case 'delete':
                    br.delete(m.table, m.id);
                    break;
                case 'clear-branch':
                    br.clearBranch(m.branchId);
                    break;
                case 'merge':
                    br.merge(m.branchId, m.targetBranchId);
                    break;
            }
        });
        return br.mutationRequests;
    };
    return KedBackendWriter;
}());

//# sourceMappingURL=kedbackend-writer.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/mutation-queue.js":
/*!******************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/mutation-queue.js ***!
  \******************************************************************/
/*! exports provided: MutationQueue */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MutationQueue", function() { return MutationQueue; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ "./kedbackend/js/dist/js/ked-backend-repo/utils.js");
/* harmony import */ var _delta_merge__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./delta-merge */ "./kedbackend/js/dist/js/ked-backend-repo/delta-merge.js");



var MutationQueue = /** @class */ (function () {
    function MutationQueue() {
        this.queue = [];
        this.savingQueue = [];
    }
    MutationQueue.prototype.add = function (mutations) {
        this.queue = MutationQueue.merge(this.queue, mutations);
    };
    MutationQueue.prototype.moveToSavingQueue = function () {
        this.savingQueue = MutationQueue.merge(this.savingQueue, this.queue);
        this.queue = [];
    };
    MutationQueue.prototype.clearSavingQueue = function () {
        this.savingQueue = [];
    };
    MutationQueue.prototype.get = function () {
        return this.savingQueue.concat(this.queue);
    };
    MutationQueue.prototype.affectsQuery = function (table, query, includes) {
        var mutations = this.get();
        if (mutations.some(function (m) { return m.op === 'merge' || m.op === 'clear-branch'; }))
            return true;
        if (query.ids) {
            // A query with "ids" filter will be easy to detect a no-match on:
            return mutations.some(function (m) { return Object(_utils__WEBPACK_IMPORTED_MODULE_1__["globalOp"])(m) || (!Object(_utils__WEBPACK_IMPORTED_MODULE_1__["branchSensitive"])(m) || m.branchId === query.branchId) &&
                query.ids.includes(m.id); });
        }
        // Otherwise, check if mutations affect same branch and table. Could be done more fine grained,
        // but that would only be a suboptimization.
        return mutations.some(function (m) {
            return m.op === 'delete' ?
                m.table === table || (includes.some(function (label) { return Object(_utils__WEBPACK_IMPORTED_MODULE_1__["getTableFromLabel"])(table, label) === m.table; })) :
                Object(_utils__WEBPACK_IMPORTED_MODULE_1__["globalOp"])(m) ? true :
                    m.branchId == query.branchId &&
                        (m.table === table || (m.op !== 'update' && ([table].concat(includes.map(function (label) { return Object(_utils__WEBPACK_IMPORTED_MODULE_1__["getTableFromLabel"])(table, label); })).some(function (table) { return Object(_utils__WEBPACK_IMPORTED_MODULE_1__["getTableFromLabel"])(m.table, m.graphProp) === table; }))));
        });
    };
    MutationQueue.merge = function (queue1, queue2) {
        var mutableQueue1 = queue1.slice();
        var mutableQueue2 = queue2.slice();
        //if (mutableQueue1.length > 0) debugger;
        var len = queue1.length;
        var _loop_1 = function (i) {
            var m = queue1[i];
            if (m.op === 'update') {
                var overlappingIdOpIdx = mutableQueue2.findIndex(function (newMut) {
                    return newMut.op === 'update' &&
                        newMut.branchId === m.branchId &&
                        newMut.id === m.id;
                });
                if (overlappingIdOpIdx >= 0) {
                    mutableQueue1[i] = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, m, { deltaDoc: Object(_delta_merge__WEBPACK_IMPORTED_MODULE_2__["mergeDeltas"])(m.deltaDoc, mutableQueue2[overlappingIdOpIdx].deltaDoc) });
                    mutableQueue2.splice(overlappingIdOpIdx, 1);
                }
            }
        };
        for (var i = 0; i < len; ++i) {
            _loop_1(i);
        }
        return mutableQueue1.concat(mutableQueue2);
    };
    return MutationQueue;
}());

//# sourceMappingURL=mutation-queue.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/query-set.js":
/*!*************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/query-set.js ***!
  \*************************************************************/
/*! exports provided: QuerySet */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QuerySet", function() { return QuerySet; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _kedbackend_query__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./kedbackend-query */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-query.js");
/* harmony import */ var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json");
var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_2___namespace = /*#__PURE__*/__webpack_require__.t(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json", 1);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils */ "./kedbackend/js/dist/js/ked-backend-repo/utils.js");




var QuerySet = /** @class */ (function () {
    function QuerySet(mutationQueue) {
        this.mutationQueue = mutationQueue;
        this.queries = [];
    }
    QuerySet.prototype.commitMutations = function (mutations, version) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Promise.all(this.queries.map(function (q) { return q.commitMutations(mutations, version); }))];
                    case 1:
                        _a.sent();
                        this.cleanupInvalidQueries();
                        return [2 /*return*/];
                }
            });
        });
    };
    QuerySet.prototype.cleanupInvalidQueries = function () {
        this.queries = this.queries.filter(function (q) {
            if (q.invalid) {
                if (q.timeoutHandle) {
                    clearTimeout(q.timeoutHandle);
                    q.timeoutHandle = null;
                }
                return false;
            }
            return true;
        });
    };
    QuerySet.prototype.notifySubscribers = function () {
        var optimisticMutations = this.mutationQueue.get();
        this.queries.forEach(function (q) {
            q.notifySubscribers(optimisticMutations);
        });
    };
    QuerySet.prototype.findQuery = function (table, query) {
        return this.queries.find(function (q) { return q.queryKey === _kedbackend_query__WEBPACK_IMPORTED_MODULE_1__["KedBackendQuery"].queryKey(table, query); });
    };
    QuerySet.prototype.queryLocally = function (table, query, includes) {
        // For now, only handle this very common and special case (which
        // will save a lot of unnescessary network traffic if I am thinking right...)
        var mutations = this.mutationQueue.get();
        // Check if the query wants to get a single entity by its ID:
        if (query.ids && query.ids.length === 1) {
            // And if so, if we have an outgoing mutation to create that entity:
            if (mutations.some(function (m) { return m.op === 'add-related' && m.relatedDoc.id === query.ids[0]; })) {
                // Then return an EMPTY response, signalling that we can resolve this locally,
                // but let the optistic feature of KedBackendQuery apply the mutation before
                // notifying subscribers (we don't want it to be persistent before the server
                // has accepted the mutation)
                return [];
            }
        }
        // OK, another quite common case is when we ask for a certain ID and that ID replies
        // within another query
        if (query.hasEdgesFrom || query.hasEdgesTo)
            return null; // Not possible to handle
        if (!query.ids)
            return null; // For now, just take hight for this particular and most common case!
        var _loop_1 = function (q) {
            if (!q.gotInitialResponse)
                return "continue";
            if (q.query.branchId !== query.branchId)
                return "continue";
            if (q.query.flags)
                return "continue"; // It would be complex to support various flags. Query's data may include ids only. Can't rely on the query.
            var qIncludes = q.includes;
            if (qIncludes.length > 0 && (!query.include || query.include.length === 0)) {
                // We don't include, but this query does. Check if we can find our result within it.
                var label = qIncludes.find(function (l) { return kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_2__["tables"][q.table]["relationships"][l] === table; });
                if (label) {
                    var res_1 = {};
                    for (var _i = 0, _a = q.data; _i < _a.length; _i++) {
                        var entity = _a[_i];
                        var subData = Object(_utils__WEBPACK_IMPORTED_MODULE_3__["queryArray"])(query, entity[label]);
                        subData.forEach(function (r) { return res_1[r.id] = r; });
                    }
                    var result_1 = Object.keys(res_1).map(function (id) { return res_1[id]; });
                    // Only return result if we could look up every requested ID:
                    if (!query.ids.every(function (id) { return result_1.some(function (x) { return x.id === id; }); }))
                        return "continue";
                    return { value: result_1 };
                }
            }
            if (!includes.every(function (label) { return qIncludes.includes(label); }))
                return "continue";
            // Lastly, if the query includes all graphs that we do, pick the subset from that query.
            // Concrete example: We observe a certain Task by ID and want its knowledgeRequirements along with it,
            // and there's another query of all tasks that also includes knowledgeRequirements. Use it. 
            if (q.table === table) {
                var result_2 = Object(_utils__WEBPACK_IMPORTED_MODULE_3__["queryArray"])(query, q.data);
                // Only return result if we could look up every requested ID:
                if (!query.ids.every(function (id) { return result_2.some(function (x) { return x.id === id; }); }))
                    return "continue";
                return { value: result_2 };
            }
        };
        for (var _i = 0, _a = this.queries; _i < _a.length; _i++) {
            var q = _a[_i];
            var state_1 = _loop_1(q);
            if (typeof state_1 === "object")
                return state_1.value;
        }
    };
    QuerySet.prototype.subscribe = function (subscription) {
        var _a = subscription.collection, table = _a.table, query = _a.query, repo = _a.repo;
        var kbQuery = this.findQuery(table, query);
        if (!kbQuery) {
            kbQuery = new _kedbackend_query__WEBPACK_IMPORTED_MODULE_1__["KedBackendQuery"](table, query, repo.getUser(), repo, this.mutationQueue);
            this.queries.push(kbQuery);
        }
        else {
            if (kbQuery.timeoutHandle) {
                clearTimeout(kbQuery.timeoutHandle);
                kbQuery.timeoutHandle = null;
            }
        }
        kbQuery.subscribe(subscription);
    };
    QuerySet.prototype.unsubscribe = function (subscription) {
        var _this = this;
        var _a = subscription.collection, table = _a.table, query = _a.query, repo = _a.repo;
        var kbQuery = this.findQuery(table, query);
        if (kbQuery) {
            // Prohibit further notifications to this subscription:
            kbQuery.unsubscribe(subscription);
            // Release unnescessary memory when there are no more subscriptions of this query, by removing the query itself
            // To that in a delayed manner, so that an unsubscribe() followed by an immediate subscribe() don't have to re-query the server:
            if (kbQuery.subscriptions.length === 0) {
                // Schedule for garbage collection in 5 minutes:
                kbQuery.timeoutHandle = setTimeout(function () {
                    // Check if kbQuery still has no subscriptions (not certain! A new subscriber may have come along...)
                    if (kbQuery.subscriptions.length === 0) {
                        // Still no subscriptions on it, time to release some memory and forget the in-memory cache of the query result
                        _this.queries = _this.queries.filter(function (q) { return q !== kbQuery; });
                    }
                }, this.queries.length > 50 ?
                    500 : // Don't host too many queries. Garbage collect this within 500 ms
                    5 * 60000); // Allow query in memory for another 5 minutes
            }
        }
    };
    return QuerySet;
}());

//# sourceMappingURL=query-set.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/utils.js":
/*!*********************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/utils.js ***!
  \*********************************************************/
/*! exports provided: getTableFromLabel, queryArray, AND, getFilterFromQuery, branchSensitive, globalOp */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTableFromLabel", function() { return getTableFromLabel; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryArray", function() { return queryArray; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AND", function() { return AND; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFilterFromQuery", function() { return getFilterFromQuery; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "branchSensitive", function() { return branchSensitive; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "globalOp", function() { return globalOp; });
/* harmony import */ var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json");
var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_0___namespace = /*#__PURE__*/__webpack_require__.t(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json", 1);

function getTableFromLabel(table, label) {
    return kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_0__["tables"][table].relationships[label];
}
function queryArray(query, data) {
    var filter = getFilterFromQuery(query);
    return data.filter(filter);
}
function AND(filter1, filter2) {
    return function (x) { return filter1(x) && filter2(x); };
}
function getFilterFromQuery(query) {
    var filter = function (x) { return true; };
    if (query.from)
        return AND(filter, function (x) { return x.dateTime >= query.from; });
    if (query.to)
        return AND(filter, function (x) { return x.dateTime < query.to; });
    if (query.ids)
        return AND(filter, function (x) { return query.ids.includes(x.id); });
    if (query.name)
        return AND(filter, function (x) { return x.name === query.name; });
    if (query.tags)
        return AND(filter, function (x) { return x.tags && [].concat(query.tags || []).some(function (tag) { return x.tags.includes(tag); }); });
    // query.hasEdgesFrom and query.hasEdgesTo cannot by filtered here
    return filter;
}
function branchSensitive(m) {
    return m.op !== 'delete';
}
function globalOp(m) {
    return m.op === 'clear-branch' || m.op === 'merge';
}
//# sourceMappingURL=utils.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-model-migrator/index.js":
/*!***********************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-model-migrator/index.js ***!
  \***********************************************************/
/*! exports provided: KedModelMigratorMixin */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedModelMigratorMixin", function() { return KedModelMigratorMixin; });
/* harmony import */ var _migrate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./migrate */ "./kedbackend/js/dist/js/ked-model-migrator/migrate.js");

var KedModelMigratorMixin = function (client) {
    if (client.__migrator_mixed_in)
        return;
    client.__migrator_mixed_in = true;
    var get = client.get;
    var list = client.list;
    client.get = function (table, id, options) {
        var include = options && options.include;
        return get.apply(this, arguments).then(function (result) {
            Object(_migrate__WEBPACK_IMPORTED_MODULE_0__["default"])(result, table, include && include.toString().split(','));
            return result;
        });
    };
    client.list = function (table, options) {
        var include = options && options.include;
        return list.apply(this, arguments).then(function (result) {
            result.forEach(function (doc) { return Object(_migrate__WEBPACK_IMPORTED_MODULE_0__["default"])(doc, table, include && include.toString().split(',')); });
            return result;
        });
    };
    return client;
};
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-model-migrator/migrate-course.js":
/*!********************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-model-migrator/migrate-course.js ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return migrateCourse; });
/* harmony import */ var _migrate_task__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./migrate-task */ "./kedbackend/js/dist/js/ked-model-migrator/migrate-task.js");

function migrateCourse(course, graphs) {
    if (!course.modules)
        course.modules = [];
    course.modules.forEach(function (module) {
        if (!module.resources) {
            module.resources = [];
        }
        if (!module.taskIds) {
            module.taskIds = [];
        }
    });
    if (!course.responsibleTeachers) {
        course.responsibleTeachers = [];
    }
    // Earlier wrong spelling of resources
    if ('resourses' in course && !('resources' in course)) {
        course.resources = course.resourses;
        delete course.resourses;
    }
    if (!course.resources) {
        course.resources = [];
    }
    if (graphs) {
        graphs.forEach(function (label) {
            switch (label) {
                case 'tasks':
                    course.tasks.forEach(function (task) { return Object(_migrate_task__WEBPACK_IMPORTED_MODULE_0__["default"])(task); });
                    break;
            }
        });
    }
}
//# sourceMappingURL=migrate-course.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-model-migrator/migrate-task.js":
/*!******************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-model-migrator/migrate-task.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return migrateTask; });
function migrateTask(task) {
    if (!task.resources)
        task.resources = [];
}
//# sourceMappingURL=migrate-task.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-model-migrator/migrate.js":
/*!*************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-model-migrator/migrate.js ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return migrate; });
/* harmony import */ var _migrate_course__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./migrate-course */ "./kedbackend/js/dist/js/ked-model-migrator/migrate-course.js");
/* harmony import */ var _migrate_task__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./migrate-task */ "./kedbackend/js/dist/js/ked-model-migrator/migrate-task.js");


function migrate(doc, table, graphs) {
    switch (table) {
        case "courses":
            Object(_migrate_course__WEBPACK_IMPORTED_MODULE_0__["default"])(doc, graphs);
            break;
        case "tasks":
            Object(_migrate_task__WEBPACK_IMPORTED_MODULE_1__["default"])(doc);
            break;
    }
}
//# sourceMappingURL=migrate.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/collection.js":
/*!********************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/collection.js ***!
  \********************************************************/
/*! exports provided: Collection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Collection", function() { return Collection; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _observable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./observable */ "./kedbackend/js/dist/js/observable/observable.js");
/* harmony import */ var _map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./map */ "./kedbackend/js/dist/js/observable/map.js");
/* harmony import */ var _value__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./value */ "./kedbackend/js/dist/js/observable/value.js");
/* harmony import */ var _emitter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./emitter */ "./kedbackend/js/dist/js/observable/emitter.js");





var Collection = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Collection, _super);
    function Collection(subscribe) {
        return _super.call(this, subscribe) || this;
    }
    Collection.prototype._map = function (mapper) {
        throw "mixedin";
    };
    Collection.from = function (x) {
        if (x.subscribe)
            return new Collection(function (s) { return x.subscribe(s); });
        if (Array.isArray(x)) {
            var emitter_1 = new _emitter__WEBPACK_IMPORTED_MODULE_4__["Emitter"](x);
            return new Collection(function (s) { return emitter_1.subscribe(s); });
        }
        throw new Error("ObservableCollection.from() can only take arrays or observables");
    };
    Collection.prototype.map = function (mapper) {
        return this._map(function (items) { return items.map(function (item) { return mapper(item); }); });
    };
    Collection.prototype.flat = function () {
        return this._map(function (items) { return [].concat.apply([], items); });
    };
    Collection.prototype.filter = function (filter) {
        return this._map(function (items) { return items.filter(filter); });
    };
    Collection.prototype.concat = function (other) {
        return Collection.from(this.toValue().combineLatest(other).map(function (_a) {
            var me = _a[0], other = _a[1];
            return me.concat(other);
        }));
    };
    Collection.prototype.orderBy = function (prop) {
        return this.toValue().map(function (array) { return array.slice().sort(function (a, b) {
            var aProp = a && a[prop];
            var bProp = b && b[prop];
            return aProp > bProp ? 1 : aProp < bProp ? -1 : 0;
        }); }).toCollection(function (x) { return x; });
    };
    Collection.prototype.toValue = function () {
        var _this = this;
        return new _value__WEBPACK_IMPORTED_MODULE_3__["Value"](function (s) { return _this.subscribe(s); });
    };
    Collection.prototype.groupBy = function (prop) {
        return this.toValue().map(function (items) {
            var rv = {};
            items.forEach(function (item) {
                var list = rv[item[prop]] || (rv[item[prop]] = []);
                list.push(item);
            });
            return rv;
        });
    };
    Collection.prototype.first = function () {
        return this.toValue().map(function (arr) { return arr[0]; });
    };
    return Collection;
}(_observable__WEBPACK_IMPORTED_MODULE_1__["Observable"]));

Collection.prototype._map = Object(_map__WEBPACK_IMPORTED_MODULE_2__["initMapMethod"])(Collection);
//# sourceMappingURL=collection.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/emitter.js":
/*!*****************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/emitter.js ***!
  \*****************************************************/
/*! exports provided: Emitter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Emitter", function() { return Emitter; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _value__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./value */ "./kedbackend/js/dist/js/observable/value.js");


var Emitter = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Emitter, _super);
    function Emitter(initialValue) {
        var _this = _super.call(this, function (observer) {
            var subscription = {
                unsubscribe: function () { return _this.subscribers = _this.subscribers.filter(function (_a) {
                    var s = _a[0];
                    return s !== observer;
                }); },
            };
            _this.subscribers.push([observer, subscription]);
            if (_this.error)
                observer(null, _this.error, subscription);
            else
                observer(_this.value, undefined, subscription);
            return subscription;
        }) || this;
        _this.subscribers = [];
        _this.value = initialValue;
        return _this;
    }
    Emitter.prototype.dispatch = function (value) {
        this.value = value;
        this.error = undefined;
        this._dispatch();
    };
    Emitter.prototype.dispatchError = function (error) {
        this.error = error;
        this._dispatch();
    };
    Emitter.prototype._dispatch = function () {
        var _this = this;
        this.subscribers.forEach(function (_a) {
            var observer = _a[0], subscription = _a[1];
            try {
                observer(_this.value, _this.error, subscription);
            }
            catch (err) {
                observer(null, err, subscription);
            }
        });
    };
    return Emitter;
}(_value__WEBPACK_IMPORTED_MODULE_1__["Value"]));

//# sourceMappingURL=emitter.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/fiber-context.js":
/*!***********************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/fiber-context.js ***!
  \***********************************************************/
/*! exports provided: FiberContext */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FiberContext", function() { return FiberContext; });
var stack = [];
var currentFiber = null;
var providers = [function () { return currentFiber; }];
function pushFiber(fiber) {
    stack.push(currentFiber);
    currentFiber = fiber;
}
function popFiber() {
    currentFiber = stack.pop();
}
var FiberContext = {
    get current() { return currentFiber; },
    /*run: function rerun<R>(fiber: Fiber, fn: ()=>R): R | Promise<R> {
      pushFiber(fiber);
      try {
        return Promise.resolve(fn());
      } catch (p) {
        if (p && typeof p.then === 'function') {
          return p.then(()=>rerun(fiber, fn));
        } else {
          return Promise.reject(p);
        }
      } finally {
        popFiber();
      }
    },*/
    addProvider: function (getCurrentFiber) {
        providers.push(getCurrentFiber);
        setCurrentGetterFromProviders();
    },
    removeProvider: function (getCurrentFiber) {
        providers = providers.filter(function (p) { return p !== getCurrentFiber; });
        setCurrentGetterFromProviders();
    }
};
function setCurrentGetterFromProviders() {
    Object.defineProperty(FiberContext, "current", {
        get: providers.reduce(function (p, c) { return function () { return p() || c(); }; }),
        set: function () { throw new Error("Use FiberContext.push() to change current fiber"); }
    });
}
//# sourceMappingURL=fiber-context.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/index.js":
/*!***************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/index.js ***!
  \***************************************************/
/*! exports provided: Observable, Value, Collection, Emitter, FiberContext */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _observable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./observable */ "./kedbackend/js/dist/js/observable/observable.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Observable", function() { return _observable__WEBPACK_IMPORTED_MODULE_0__["Observable"]; });

/* harmony import */ var _value__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./value */ "./kedbackend/js/dist/js/observable/value.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Value", function() { return _value__WEBPACK_IMPORTED_MODULE_1__["Value"]; });

/* harmony import */ var _collection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./collection */ "./kedbackend/js/dist/js/observable/collection.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Collection", function() { return _collection__WEBPACK_IMPORTED_MODULE_2__["Collection"]; });

/* harmony import */ var _emitter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./emitter */ "./kedbackend/js/dist/js/observable/emitter.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Emitter", function() { return _emitter__WEBPACK_IMPORTED_MODULE_3__["Emitter"]; });

/* harmony import */ var _fiber_context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./fiber-context */ "./kedbackend/js/dist/js/observable/fiber-context.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FiberContext", function() { return _fiber_context__WEBPACK_IMPORTED_MODULE_4__["FiberContext"]; });






//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/map.js":
/*!*************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/map.js ***!
  \*************************************************/
/*! exports provided: initMapMethod */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "initMapMethod", function() { return initMapMethod; });
function initMapMethod(ctor) {
    return function (mapper) {
        var _this = this;
        return new ctor(function (observer) { return _this.subscribe(function (value, error, subscription) {
            if (error)
                observer(null, error, subscription);
            else
                try {
                    observer(mapper(value), error, subscription);
                }
                catch (err) {
                    observer(null, err, subscription);
                }
        }); });
    };
}
//# sourceMappingURL=map.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/mixin.js":
/*!***************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/mixin.js ***!
  \***************************************************/
/*! exports provided: mixin */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mixin", function() { return mixin; });
function mixin(targetProto, mixinProto) {
    var props = [];
    for (var _i = 2; _i < arguments.length; _i++) {
        props[_i - 2] = arguments[_i];
    }
    props.forEach(function (prop) { return targetProto[prop] = mixinProto[prop]; });
}
//# sourceMappingURL=mixin.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/observable.js":
/*!********************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/observable.js ***!
  \********************************************************/
/*! exports provided: Observable */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Observable", function() { return Observable; });
var Observable = /** @class */ (function () {
    //static get [Symbol.species]() { return this; }
    function Observable(_subscribe) {
        this._subscribe = _subscribe;
    }
    Observable.prototype.subscribe = function (observer) {
        try {
            return this._subscribe(function (items, error, subscription) {
                try {
                    observer(items, error, subscription);
                }
                catch (err) {
                    observer(null, err, subscription);
                }
            });
        }
        catch (error) {
            observer(null, error, { unsubscribe: function () { } });
        }
    };
    return Observable;
}());

//# sourceMappingURL=observable.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/value.js":
/*!***************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/value.js ***!
  \***************************************************/
/*! exports provided: Value */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Value", function() { return Value; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _observable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./observable */ "./kedbackend/js/dist/js/observable/observable.js");
/* harmony import */ var _map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./map */ "./kedbackend/js/dist/js/observable/map.js");
/* harmony import */ var _collection__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./collection */ "./kedbackend/js/dist/js/observable/collection.js");
/* harmony import */ var _fiber_context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./fiber-context */ "./kedbackend/js/dist/js/observable/fiber-context.js");





var Value = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Value, _super);
    function Value(subscribe) {
        return _super.call(this, subscribe) || this;
    }
    Value.from = function (x) {
        if (x.subscribe)
            return new Value(function (s) { return x.subscribe(s); });
        throw new Error("Value.from() can only take observables");
    };
    Value.prototype.read = function () {
        var resolved = false, result, err, notify;
        var subscription = this.subscribe(function (value, error, subsciption) {
            resolved = true;
            result = value;
            err = error;
            if (error && notify)
                notify(null, error, subsciption);
            else if (notify)
                notify(value, null, subsciption);
        });
        if (resolved) {
            var currentFiber = _fiber_context__WEBPACK_IMPORTED_MODULE_4__["FiberContext"].current;
            if (!currentFiber) {
                subscription.unsubscribe();
                throw new Error("Invalid Fiber Context");
            }
            if (err) {
                subscription.unsubscribe();
                throw err;
            }
            var subscriptions = currentFiber.subscriptions, observer = currentFiber.observer;
            subscriptions.push(subscription);
            notify = observer;
            return result;
        }
        throw new Promise(function (resolve, reject) {
            notify = function (value, error, subscription) {
                subscription.unsubscribe();
                if (error)
                    reject(error);
                else
                    resolve(value);
            };
        });
    };
    Value.prototype.load = function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.subscribe(function (value, error, subsciption) {
                if (error)
                    reject(error);
                else
                    resolve(value);
                subsciption.unsubscribe();
            });
        });
    };
    Value.prototype.filter = function (fn) {
        var _this = this;
        return new Value(function (observer) { return _this.subscribe(function (value, error, subscription) {
            if (error)
                observer(null, error, subscription);
            else if (fn(value))
                observer(value, error, subscription);
        }); });
    };
    Value.prototype.log = function (prefix) {
        return this.map(function (x) {
            console.log(prefix, x);
            return x;
        });
    };
    Value.prototype.toCollection = function (mapper) {
        var _this = this;
        return new _collection__WEBPACK_IMPORTED_MODULE_3__["Collection"](function (s) { return _this.map(mapper).subscribe(s); });
    };
    Value.prototype.combineLatest = function (other) {
        var _this = this;
        return new Value(function (observer) {
            var values = [null, null];
            var mySubscription, otherSubscription;
            var subscription = {
                unsubscribe: function () {
                    mySubscription.unsubscribe();
                    otherSubscription.unsubscribe();
                }
            };
            mySubscription = _this.subscribe(function (items, error, s) {
                if (error) {
                    s.unsubscribe();
                    observer(null, error, subscription);
                }
                values[0] = items;
                if (values[1] !== null)
                    observer(values, null, subscription);
            });
            otherSubscription = other.subscribe(function (value, error, s) {
                if (error) {
                    s.unsubscribe();
                    observer(null, error, subscription);
                }
                values[1] = value;
                if (values[0] !== null)
                    observer(values, null, subscription);
            });
            return subscription;
        });
    };
    Value.prototype.switchMap = function (mapper) {
        var _this = this;
        return new Value(function (observer) {
            var mappedSubscription = null;
            var subscription = null;
            var returnedSubscription = {
                unsubscribe: function () {
                    subscription.unsubscribe();
                    if (mappedSubscription) {
                        mappedSubscription.unsubscribe();
                        mappedSubscription = null;
                    }
                }
            };
            subscription = _this.subscribe(function (item, error, s) {
                subscription = s;
                if (mappedSubscription) {
                    mappedSubscription.unsubscribe();
                    mappedSubscription = null;
                }
                if (error)
                    observer(null, error, returnedSubscription);
                else {
                    try {
                        var observableOrValue = mapper(item);
                        if (observableOrValue && typeof observableOrValue.subscribe === 'function') {
                            mappedSubscription = observableOrValue.subscribe(function (value, error, s) {
                                mappedSubscription = s;
                                observer(value, error, returnedSubscription);
                            });
                        }
                        else {
                            observer(observableOrValue, null, subscription);
                        }
                    }
                    catch (error) {
                        observer(null, error, subscription);
                    }
                }
            });
            return returnedSubscription;
        });
    };
    return Value;
}(_observable__WEBPACK_IMPORTED_MODULE_1__["Observable"]));

Value.prototype.map = Object(_map__WEBPACK_IMPORTED_MODULE_2__["initMapMethod"])(Value);
//# sourceMappingURL=value.js.map

/***/ }),

/***/ "./kedbackend/observable.js":
/*!**********************************!*\
  !*** ./kedbackend/observable.js ***!
  \**********************************/
/*! exports provided: Observable, Value, Collection, Emitter, FiberContext */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _js_dist_js_observable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./js/dist/js/observable */ "./kedbackend/js/dist/js/observable/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Observable", function() { return _js_dist_js_observable__WEBPACK_IMPORTED_MODULE_0__["Observable"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Value", function() { return _js_dist_js_observable__WEBPACK_IMPORTED_MODULE_0__["Value"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Collection", function() { return _js_dist_js_observable__WEBPACK_IMPORTED_MODULE_0__["Collection"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Emitter", function() { return _js_dist_js_observable__WEBPACK_IMPORTED_MODULE_0__["Emitter"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FiberContext", function() { return _js_dist_js_observable__WEBPACK_IMPORTED_MODULE_0__["FiberContext"]; });




/***/ }),

/***/ "./kedbackend/repo.js":
/*!****************************!*\
  !*** ./kedbackend/repo.js ***!
  \****************************/
/*! exports provided: KedBackendCollection, KedBackendQuery, KedBackendRepo, KedBackendSubscription, KedBackendWriter, MutationQueue, QuerySet, mixin */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _js_dist_js_ked_backend_repo__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./js/dist/js/ked-backend-repo */ "./kedbackend/js/dist/js/ked-backend-repo/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendCollection", function() { return _js_dist_js_ked_backend_repo__WEBPACK_IMPORTED_MODULE_0__["KedBackendCollection"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendQuery", function() { return _js_dist_js_ked_backend_repo__WEBPACK_IMPORTED_MODULE_0__["KedBackendQuery"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendRepo", function() { return _js_dist_js_ked_backend_repo__WEBPACK_IMPORTED_MODULE_0__["KedBackendRepo"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendSubscription", function() { return _js_dist_js_ked_backend_repo__WEBPACK_IMPORTED_MODULE_0__["KedBackendSubscription"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendWriter", function() { return _js_dist_js_ked_backend_repo__WEBPACK_IMPORTED_MODULE_0__["KedBackendWriter"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MutationQueue", function() { return _js_dist_js_ked_backend_repo__WEBPACK_IMPORTED_MODULE_0__["MutationQueue"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "QuerySet", function() { return _js_dist_js_ked_backend_repo__WEBPACK_IMPORTED_MODULE_0__["QuerySet"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "mixin", function() { return _js_dist_js_ked_backend_repo__WEBPACK_IMPORTED_MODULE_0__["mixin"]; });




/***/ }),

/***/ "./node_modules/moment/locale sync recursive sv|en":
/*!***********************************************!*\
  !*** ./node_modules/moment/locale sync sv|en ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./en-SG": "./node_modules/moment/locale/en-SG.js",
	"./en-SG.js": "./node_modules/moment/locale/en-SG.js",
	"./en-au": "./node_modules/moment/locale/en-au.js",
	"./en-au.js": "./node_modules/moment/locale/en-au.js",
	"./en-ca": "./node_modules/moment/locale/en-ca.js",
	"./en-ca.js": "./node_modules/moment/locale/en-ca.js",
	"./en-gb": "./node_modules/moment/locale/en-gb.js",
	"./en-gb.js": "./node_modules/moment/locale/en-gb.js",
	"./en-ie": "./node_modules/moment/locale/en-ie.js",
	"./en-ie.js": "./node_modules/moment/locale/en-ie.js",
	"./en-il": "./node_modules/moment/locale/en-il.js",
	"./en-il.js": "./node_modules/moment/locale/en-il.js",
	"./en-nz": "./node_modules/moment/locale/en-nz.js",
	"./en-nz.js": "./node_modules/moment/locale/en-nz.js",
	"./sv": "./node_modules/moment/locale/sv.js",
	"./sv.js": "./node_modules/moment/locale/sv.js"
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	if(!__webpack_require__.o(map, req)) {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return map[req];
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = "./node_modules/moment/locale sync recursive sv|en";

/***/ }),

/***/ "./src/access-control/get-user-claims.ts":
/*!***********************************************!*\
  !*** ./src/access-control/get-user-claims.ts ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return getUserClaims; });
function getUserClaims(user) {
    return [{
            type: "email",
            value: user.mail
        }, {
            type: "school",
            value: user.school
        }].concat(user.roles.map(function (role) { return ({
        type: "role",
        value: role
    }); })).concat(user.roles.map(function (role) { return ({
        type: "schoolRole",
        value: user.school + "/" + role
    }); }));
}


/***/ }),

/***/ "./src/access-control/index.ts":
/*!*************************************!*\
  !*** ./src/access-control/index.ts ***!
  \*************************************/
/*! exports provided: getUserClaims, IMPERSONATION_QUERY_PARAMS, hasAccess, hasReadAccess, hasWriteAccess, hasShareAccess, isTeacherAtSchool, isAdminOrTeacherAtSchool, impersonationEnv, actAs, preserveImpersonationQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IMPERSONATION_QUERY_PARAMS", function() { return IMPERSONATION_QUERY_PARAMS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasAccess", function() { return hasAccess; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasReadAccess", function() { return hasReadAccess; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasWriteAccess", function() { return hasWriteAccess; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasShareAccess", function() { return hasShareAccess; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isTeacherAtSchool", function() { return isTeacherAtSchool; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isAdminOrTeacherAtSchool", function() { return isAdminOrTeacherAtSchool; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "impersonationEnv", function() { return impersonationEnv; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "actAs", function() { return actAs; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "preserveImpersonationQuery", function() { return preserveImpersonationQuery; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _get_user_claims__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./get-user-claims */ "./src/access-control/get-user-claims.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getUserClaims", function() { return _get_user_claims__WEBPACK_IMPORTED_MODULE_2__["default"]; });

/* harmony import */ var _utils_query_string__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/query-string */ "./src/utils/query-string.ts");





var IMPERSONATION_QUERY_PARAMS = [
    "user",
    "role",
    "school",
    "debug",
    "testVersion",
    "testversion",
    "features",
    "schoolType",
    "schooltype"
];
function hasAccess(user, doc, requestedRight) {
    var claims = Object(_get_user_claims__WEBPACK_IMPORTED_MODULE_2__["default"])(user);
    if (requestedRight !== 'R' && user.tutorFor) {
        claims = claims.filter(function (claim) { return claim.type !== 'email'; });
    }
    var result = Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["hasAccess"])(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["DocumentAccess"].fromStringArray(doc.acl || []), claims, requestedRight);
    //console.log(`Has ${requestedRight} access to ${doc.name}/${doc.id}: ${result}`);
    return result;
}
function hasReadAccess(user, doc) {
    return hasAccess(user, doc, 'R');
}
function hasWriteAccess(user, doc) {
    return hasAccess(user, doc, 'W');
}
function hasShareAccess(user, doc) {
    return hasAccess(user, doc, 'S');
}
function isTeacherAtSchool(user, school) {
    var isTeacher = user.roles.some(function (role) { return role === 'EMPLOYEE' || role === 'ADMIN'; });
    var belongsToSchool = (school || "").toLowerCase() === user.school.toLowerCase();
    return (isTeacher && belongsToSchool);
}
function isAdminOrTeacherAtSchool(user, school) {
    return user.roles.includes("ADMIN") || isTeacherAtSchool(user, school);
}
var impersonationEnv = {
    actAs: function (options) {
        var role = options.role, school = options.school, url = options.url;
        var currentQuery = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_3__["parseQueryString"])(location.search);
        var newQuery = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, currentQuery, { role: role, school: school });
        var newQueryString = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_3__["generateQueryString"])(newQuery);
        if (url) {
            location.href = "" + url + newQueryString;
        }
        else {
            location.hash = "#";
            location.search = newQueryString;
        }
    }
};
function actAs(options) {
    impersonationEnv.actAs(options);
}
function preserveImpersonationQuery(url, query) {
    var e_1, _a;
    var currentQuery = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_3__["parseQueryString"])(location.search);
    var preservedQuery = {};
    try {
        for (var IMPERSONATION_QUERY_PARAMS_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](IMPERSONATION_QUERY_PARAMS), IMPERSONATION_QUERY_PARAMS_1_1 = IMPERSONATION_QUERY_PARAMS_1.next(); !IMPERSONATION_QUERY_PARAMS_1_1.done; IMPERSONATION_QUERY_PARAMS_1_1 = IMPERSONATION_QUERY_PARAMS_1.next()) {
            var param = IMPERSONATION_QUERY_PARAMS_1_1.value;
            if (currentQuery[param])
                preservedQuery[param] = currentQuery[param];
        }
    }
    catch (e_1_1) { e_1 = { error: e_1_1 }; }
    finally {
        try {
            if (IMPERSONATION_QUERY_PARAMS_1_1 && !IMPERSONATION_QUERY_PARAMS_1_1.done && (_a = IMPERSONATION_QUERY_PARAMS_1.return)) _a.call(IMPERSONATION_QUERY_PARAMS_1);
        }
        finally { if (e_1) throw e_1.error; }
    }
    var newQueryString = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_3__["generateQueryString"])(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, preservedQuery, query));
    var pHash = url.indexOf('#');
    return pHash >= 0 ?
        "" + url.substr(0, pHash) + newQueryString + url.substr(pHash) :
        "" + url + newQueryString;
}


/***/ }),

/***/ "./src/apis/buttons.tsx":
/*!******************************!*\
  !*** ./src/apis/buttons.tsx ***!
  \******************************/
/*! exports provided: DriveButton */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DriveButton", function() { return DriveButton; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var IconDrive = function (_a) {
    var _b = _a.size, size = _b === void 0 ? 30 : _b;
    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("svg", { width: size, version: "1.1", xmlns: "http://www.w3.org/2000/svg", xmlnsXlink: "http://www.w3.org/1999/xlink", viewBox: "0 0 508.52 508.52", fill: "#ffffff", style: { verticalAlign: "middle", marginRight: "4px" } },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("polygon", { points: "484.492,284.58 339.024,32.577 169.496,32.577 314.996,284.58" }),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("polygon", { points: "145.437,74.276 0,326.279 84.764,473.05 230.169,221.143" }),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("polygon", { points: "234.396,316.363 143.371,475.943 423.756,475.943 508.52,316.36" })));
};
var IconClassroom = function (_a) {
    var _b = _a.size, size = _b === void 0 ? 30 : _b;
    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("svg", { width: size, xmlns: "http://www.w3.org/2000/svg", xmlnsXlink: "http://www.w3.org/1999/xlink", viewBox: "0 0 24 24", version: "1.1" },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("path", { d: "M5 2C3.348 2 2 3.348 2 5v14c0 1.652 1.348 3 3 3h14c1.652 0 3-1.348 3-3V5c0-1.652-1.348-3-3-3zm0 2h14c.55 0 1 .45 1 1v14c0 .55-.45 1-1 1h-1v-2h-5v2H5c-.55 0-1-.45-1-1V5c0-.55.45-1 1-1zm7 2a1.999 1.999 0 1 0 0 4 1.999 1.999 0 1 0 0-4zM7.5 8a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm9 0a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM12 11c-2.66 0-3.5 2.5-3.5 2.5 0-.848.5-1.5.5-1.5-.3-.188-1.07-.313-1.438-.313-1.214 0-2.562 1.192-2.562 2V16h14v-2.313c0-.808-1.512-2-2.563-2-.367 0-1.136.126-1.437.313 0 0 .5.652.5 1.5 0 0-.84-2.5-3.5-2.5z" })));
};
var DriveButton = function (_a) {
    var _b = _a.label, label = _b === void 0 ? 'Google Drive' : _b, action = _a.action;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("a", { className: "btn", onClick: action },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(IconDrive, { size: 16 }),
        " ",
        label);
};


/***/ }),

/***/ "./src/apis/edsclient.ts":
/*!*******************************!*\
  !*** ./src/apis/edsclient.ts ***!
  \*******************************/
/*! exports provided: EdsClient, EDSPeriod, parseJsonDate_old */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EdsClient", function() { return EdsClient; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EDSPeriod", function() { return EDSPeriod; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseJsonDate_old", function() { return parseJsonDate_old; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _utils_school_term__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/school-term */ "./src/utils/school-term.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _mock_mock_eds_data_json__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./mock/mock-eds-data.json */ "./src/apis/mock/mock-eds-data.json");
var _mock_mock_eds_data_json__WEBPACK_IMPORTED_MODULE_4___namespace = /*#__PURE__*/__webpack_require__.t(/*! ./mock/mock-eds-data.json */ "./src/apis/mock/mock-eds-data.json", 1);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _utils_make_suspense_api__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/make-suspense-api */ "./src/utils/make-suspense-api.ts");








var EdsClient = /** @class */ (function () {
    function EdsClient(isomorphic, baseUrl, bearerProvider, userEmailGetter) {
        var _this = this;
        this.http = new kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["RestClient"](isomorphic, baseUrl, { bearerProvider: bearerProvider });
        this.userEmailGetter = userEmailGetter;
        var isApiMethod = function (m) {
            return typeof _this[m] === 'function' &&
                m !== 'constructor' && // Since makeSuspenseApi() walks prototype chain
                m !== 'privatizingCacheBust' &&
                m !== 'userEmailGetter';
        } // List non-API methods here...
        ;
        Object.keys(EdsClient.prototype).forEach(function (method) {
            if (isApiMethod(method)) {
                _this[method] = avoidSimultanousCalls(_this[method]);
            }
        });
        this.suspense = Object(_utils_make_suspense_api__WEBPACK_IMPORTED_MODULE_6__["makeSuspenseApi"])(this, { isApiMethod: isApiMethod });
    }
    EdsClient.prototype.privatizingCacheBust = function () {
        return { user: this.userEmailGetter() };
    };
    /**
       * Retrieve active courses for current logged in student.
       *
       * @param courseCode Short-name of the course. Optional.
       */
    EdsClient.prototype.getActiveCourses = function (q) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var query, res, _a, _b, json, ex_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _c.trys.push([0, 5, , 6]);
                        query = this.privatizingCacheBust();
                        if (q) {
                            if (q.courseCode)
                                query.CourseCode = q.courseCode;
                            if (q.periodName)
                                query.PeriodName = q.periodName;
                        }
                        return [4 /*yield*/, this.http.get("studentactivecourses", query)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.courses];
                    case 5:
                        ex_1 = _c.sent();
                        console.error("Error from EDS: " + ex_1);
                        throw new Error(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Kunde tyv\u00E4rr inte ladda terminsm\u00E5l eller avklarade steg fr\u00E5n EDS. F\u00F6rs\u00F6k igen senare..."], ["Kunde tyv\u00E4rr inte ladda terminsm\u00E5l eller avklarade steg fr\u00E5n EDS. F\u00F6rs\u00F6k igen senare..."]))));
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    /**
     * Retrieve latest assessments for current logged in user.
     *
     * @param limit Optional limit
     */
    EdsClient.prototype.getLatestAssessments = function (limit) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var query, res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        query = this.privatizingCacheBust();
                        if (!isNaN(limit))
                            query.Count = limit;
                        return [4 /*yield*/, this.http.get("studentassessments", query)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.assessments];
                }
            });
        });
    };
    /**
     * Retrieve studyplans for current logged-in user
     */
    EdsClient.prototype.getStudentGoals = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("studentgoals", this.privatizingCacheBust())];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.studentGoals];
                }
            });
        });
    };
    EdsClient.prototype.getStudentFutureAbilities = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("studentFutureAbilities", this.privatizingCacheBust())];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.studentFutureAbilities];
                }
            });
        });
    };
    EdsClient.prototype.getTeacherTutorStudents = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("teachertutorstudents", this.privatizingCacheBust())];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.students];
                }
            });
        });
    };
    /**
     * getSchoolTuitionGroups()
     *
     * Return tuitiongroups for school
     *
     * @param schoolName - name of school
     * @param courseCode - Skolverkets code for course
     */
    EdsClient.prototype.getSchoolTuitionGroups = function (q) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("SchoolTuitionGroups", tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.privatizingCacheBust(), q))];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.schoolTuitionGroups];
                }
            });
        });
    };
    /**
     * getTuitionGroupStudents()
     *
     * Return name and mailadresses for tutitiongroups in schools
     *
     * @param schoolName - name of school
     * @param tuitionGroupName - tuition gruop name in EDS
     */
    EdsClient.prototype.getTuitionGroupStudents = function (q) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("TuitionGroupStudents", tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.privatizingCacheBust(), q))];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.tuitionGroupStudents];
                }
            });
        });
    };
    /**
     * getSchoolTeachers()
     *
     * Return name and mailadresses for tutitiongroups in schools
     *
     * @param schoolName - name of school
     */
    EdsClient.prototype.getSchoolTeachers = function (q) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("SchoolTeachers", tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.privatizingCacheBust(), q))];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.schoolTeachers];
                }
            });
        });
    };
    // we assume that the EDS will return the current academic year dates determined by the current date
    EdsClient.prototype.getAcademicYearTerms = function (schoolLocale, date) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var holidays, addYear, firstTermYear, secondTermYear, firstTermYearMoment, secondTermYearMoment, startFirstTermDate, endFirstTermDate, startSecondTermDate, endSecondTermDate, firstTerm, secondTerm;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                // mock data
                switch (schoolLocale) {
                    case 'en_sin':
                        return [2 /*return*/, _mock_mock_eds_data_json__WEBPACK_IMPORTED_MODULE_4__.SouthIndia.filter(function (f) { return moment__WEBPACK_IMPORTED_MODULE_5___default()(date).isSameOrAfter(f.firstTerm.startDate) && moment__WEBPACK_IMPORTED_MODULE_5___default()(date).isSameOrBefore(f.secondTerm.endDate); })[0]];
                    case 'en_nin':
                        return [2 /*return*/, _mock_mock_eds_data_json__WEBPACK_IMPORTED_MODULE_4__.NorthIndia.filter(function (f) { return moment__WEBPACK_IMPORTED_MODULE_5___default()(date).isSameOrAfter(f.firstTerm.startDate) && moment__WEBPACK_IMPORTED_MODULE_5___default()(date).isSameOrBefore(f.secondTerm.endDate); })[0]];
                    case 'sv':
                        {
                            holidays = [];
                            addYear = date.getMonth() >= 6;
                            firstTermYear = addYear ? date.getFullYear() : date.getFullYear() - 1;
                            secondTermYear = addYear ? date.getFullYear() + 1 : date.getFullYear();
                            firstTermYearMoment = moment__WEBPACK_IMPORTED_MODULE_5___default()(firstTermYear.toString(), "YYYY");
                            secondTermYearMoment = moment__WEBPACK_IMPORTED_MODULE_5___default()(secondTermYear.toString(), "YYYY");
                            if (firstTermYearMoment.week() != 1) {
                                firstTermYearMoment = firstTermYearMoment.clone().add(1, 'week');
                            }
                            if (secondTermYearMoment.week() != 1) {
                                secondTermYearMoment = secondTermYearMoment.clone().add(1, 'week');
                            }
                            startFirstTermDate = moment__WEBPACK_IMPORTED_MODULE_5___default()(firstTermYearMoment.clone()).week(32).startOf('week');
                            endFirstTermDate = moment__WEBPACK_IMPORTED_MODULE_5___default()(firstTermYearMoment.clone()).week(51).endOf('week');
                            startSecondTermDate = moment__WEBPACK_IMPORTED_MODULE_5___default()(secondTermYearMoment.clone());
                            endSecondTermDate = moment__WEBPACK_IMPORTED_MODULE_5___default()(secondTermYearMoment.clone()).week(25).endOf('week');
                            firstTerm = { startDate: new Date(firstTermYear, startFirstTermDate.month(), startFirstTermDate.date()).toDateString(), endDate: new Date(firstTermYear, endFirstTermDate.month(), endFirstTermDate.date()).toDateString() };
                            secondTerm = { startDate: new Date(secondTermYear, startSecondTermDate.month(), startSecondTermDate.date()).toDateString(), endDate: new Date(secondTermYear, endSecondTermDate.month(), endSecondTermDate.date()).toDateString() };
                            return [2 /*return*/, { firstTerm: firstTerm, secondTerm: secondTerm, holidays: holidays }];
                        }
                }
                return [2 /*return*/];
            });
        });
    };
    return EdsClient;
}());

var EDSPeriod = /** @class */ (function () {
    function EDSPeriod(periodStringOrSchoolTerm) {
        if (typeof periodStringOrSchoolTerm === 'string') {
            this.period = periodStringOrSchoolTerm;
            this.term = this.period.startsWith('HT') ? 'AT' : 'ST';
            this.year = parseInt(this.period.substr(2));
            if (isNaN(this.year))
                throw new Error("Invalid period: " + this.period);
        }
        else {
            var schoolTerm = new _utils_school_term__WEBPACK_IMPORTED_MODULE_2__["SchoolTerm"](periodStringOrSchoolTerm);
            this.period = (schoolTerm.term === 'AT' ? "HT" : "VT") + schoolTerm.year;
            this.term = schoolTerm.term;
            this.year = schoolTerm.year;
        }
    }
    Object.defineProperty(EDSPeriod.prototype, "schoolTerm", {
        get: function () {
            return new _utils_school_term__WEBPACK_IMPORTED_MODULE_2__["SchoolTerm"]({
                academicYear: this.term === 'AT' ?
                    this.year + "/" + (this.year + 1) :
                    this.year - 1 + "/" + this.year,
                term: this.term
            });
        },
        enumerable: true,
        configurable: true
    });
    EDSPeriod.prototype.toString = function () {
        return this.period;
    };
    EDSPeriod.prototype.valueOf = function () {
        return this.year + ":" + (this.term === 'ST' ? "1" : "2");
    };
    return EDSPeriod;
}());

function parseJsonDate_old(jsonDateStr) {
    var date = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["dateTimeReviver"])("", jsonDateStr);
    if (!(date instanceof Date))
        throw new Error("Invalid JSON date string: " + jsonDateStr);
    return date;
}
function avoidSimultanousCalls(method) {
    var ongoingPromises = {};
    return function () {
        var argsJson = JSON.stringify([].slice.call(arguments));
        if (!ongoingPromises[argsJson]) {
            ongoingPromises[argsJson] = method.apply(this, arguments).then(function (result) {
                delete ongoingPromises[argsJson];
                return result;
            });
        }
        return ongoingPromises[argsJson];
    };
}
var templateObject_1;


/***/ }),

/***/ "./src/apis/google-picker.ts":
/*!***********************************!*\
  !*** ./src/apis/google-picker.ts ***!
  \***********************************/
/*! exports provided: GooglePicker */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GooglePicker", function() { return GooglePicker; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");


/**
 * GooglePicker
 * Includes the initiation of the correct api:s.
 * Certain options can be passed to the constructor
 * and there could be others worth incorporating (i.e. Team Drive-support).
 *
 * Right now two options are handled:
 * - upload: if a user can upload to Drive in the Google Drive Picker
 * - multiple: if a user can select multiple files
 *
 * Compared to GoogleCalendar the tokenProvider is set in the constructor
 * and is not passed as an argument. We could probably do the same in GoogleCalendar
 * because the env is globally available at all times.
 *
 * We could probably split this into google-picker and google-drive where google-drive
 * handles the explicit calls to the google drive api.
 */
var GooglePicker = /** @class */ (function () {
    function GooglePicker(options) {
        this.googleTokenProvider = _globals_KED_env__WEBPACK_IMPORTED_MODULE_1__["default"].googleTokenProvider;
        this.options = options || { upload: false, multiple: false };
    }
    GooglePicker.prototype.ensureInited = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var CLIENT_ID;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!(typeof gapi === "undefined")) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.loadGapi()];
                    case 1:
                        _a.sent();
                        _a.label = 2;
                    case 2:
                        CLIENT_ID = "421572262269-u68v5lf5o8ss5t68l8gkq3pfarh6dbkv.apps.googleusercontent.com";
                        return [4 /*yield*/, new Promise(function (resolve, reject) {
                                gapi.load("client:auth2", function () {
                                    // Calls authorize without prompting the user. If authorization hasn't been given by
                                    // the user an error is returned and we call authorize again with consent-screen
                                    return gapi.auth2.authorize({
                                        client_id: CLIENT_ID,
                                        scope: 'https://www.googleapis.com/auth/drive',
                                        response_type: 'id_token permission',
                                        prompt: 'none'
                                    }, function (resp) {
                                        if (resp.error) {
                                            return gapi.auth2.authorize({
                                                client_id: CLIENT_ID,
                                                scope: 'https://www.googleapis.com/auth/drive',
                                                response_type: 'id_token permission',
                                                prompt: 'consent'
                                            }, function (resp) {
                                                if (resp.error) {
                                                    reject('Picker: No access token');
                                                }
                                                else {
                                                    _this.authToken = resp.access_token;
                                                    resolve();
                                                }
                                            });
                                        }
                                        else {
                                            _this.authToken = resp.access_token;
                                            resolve();
                                        }
                                    });
                                });
                            })];
                    case 3:
                        _a.sent();
                        if (!(typeof google === "undefined" || typeof google.picker === "undefined")) return [3 /*break*/, 5];
                        return [4 /*yield*/, new Promise(function (resolve) {
                                gapi.load("picker", function () { resolve(); });
                            })];
                    case 4:
                        _a.sent();
                        _a.label = 5;
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    GooglePicker.prototype.loadGapi = function () {
        return new Promise(function (resolve, reject) {
            if (typeof gapi !== "undefined")
                return resolve();
            var script = document.createElement("script");
            script.src = "https://apis.google.com/js/client.js?onload=gaapi_loaded";
            document.getElementsByTagName("head")[0].appendChild(script);
            window.gaapi_loaded = resolve;
        });
    };
    /**
     * show()
     *
     * If a single file is requested from the picker a list of files with one element is returned.
     * It is up to the caller to handle the list in a relevant manner.
     *
     * More data from the file could be extracted if it is deemed necessary.
     *
     */
    GooglePicker.prototype.show = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.ensureInited()];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, new Promise(function (resolve, reject) {
                                var callback = function (response) {
                                    if (response['action'] == google.picker.Action.CANCEL) {
                                        reject();
                                    }
                                    else if (response['action'] == google.picker.Action.PICKED) {
                                        var selected_1 = [];
                                        response.docs.forEach(function (doc) {
                                            var fileId = doc.id, mimeType = doc.mimeType, name = doc.name, modifiedTime = doc.modifiedTime, iconUrl = doc.iconUrl, url = doc.url;
                                            var canExport = mimeType.includes('google-apps');
                                            selected_1.push({ fileId: fileId, mimeType: mimeType, name: name, modifiedTime: modifiedTime, canExport: canExport, iconUrl: iconUrl, url: url });
                                            // update permissions to read by all in domain
                                            _this.updatePermissions(fileId);
                                        });
                                        console.log(selected_1);
                                        resolve(selected_1);
                                    }
                                };
                                var pickerbuilder = new google.picker.PickerBuilder()
                                    .addView(new google.picker.DocsView()
                                    .setOwnedByMe(true) // should this be an option?
                                    .setIncludeFolders(true))
                                    .setLocale("sv") // should this be an option?
                                    .setSize(1051, 650) // should this be an option?
                                    .setOAuthToken(_this.authToken) // temp
                                    .setCallback(callback);
                                if (_this.options.upload) {
                                    pickerbuilder.addView(new google.picker.DocsUploadView().setIncludeFolders(true));
                                }
                                if (_this.options.multiple) {
                                    pickerbuilder.enableFeature(google.picker.Feature.MULTISELECT_ENABLED);
                                }
                                _this.picker = pickerbuilder.build();
                                _this.picker.setVisible(true);
                            })];
                }
            });
        });
    };
    /**
     * updatePermissions()
     *
     * @param fileId
     *
     * Make the file accessible to all in the domain. Should be unnecessary but some
     * teachers have changed their default permissions.
     * We don't care right now if this fails because this is just an extra precaution.
     * If we plan on using this on other domains the domain-attribute needs to be dynamic.
     *
     */
    GooglePicker.prototype.updatePermissions = function (fileId) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, gapi.client.init({
                            discoveryDocs: ["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"]
                        })];
                    case 1:
                        _a.sent();
                        gapi.client.drive.permissions.create({
                            fileId: fileId,
                            sendNotificationEmail: false,
                            role: 'reader',
                            type: 'domain',
                            domain: 'kunskapsskolan.se'
                        });
                        return [2 /*return*/];
                }
            });
        });
    };
    /**
     * downloadFile()
     * @param file
     *
     * When Classroom has been integrated we will want to handle only the fileId:s
     * so that editing capabilities are peserved on the file (if it is a google-apps file)
     * Right now google-apps files are converted to pdf and passed into the current flow.
     *
     * TODO: error handling
     */
    GooglePicker.prototype.downloadFile = function (_a) {
        var file = _a.file, limitSize = _a.limitSize;
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var xhrDownload_1;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0: 
                    // A file that can be exported to PDF is retreived with
                    // file.export() from Drive, converted to a blob and then
                    // to a File.
                    // A file that can not be exported to PDF is retrieved
                    // through XHR and converted to a File.
                    // If we don't need to handle the physical files on the client
                    // we could save only the fileId:s and display filename and mimeType
                    // for the file in our listings. When/if we use Google Classroom for
                    // our task-handling that would be the preferred approach to keep
                    // the file as an editable Google file
                    // Init the drive-api (only needed for download so not loaded initially)
                    return [4 /*yield*/, gapi.client.init({
                            discoveryDocs: ["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"]
                        })];
                    case 1:
                        // A file that can be exported to PDF is retreived with
                        // file.export() from Drive, converted to a blob and then
                        // to a File.
                        // A file that can not be exported to PDF is retrieved
                        // through XHR and converted to a File.
                        // If we don't need to handle the physical files on the client
                        // we could save only the fileId:s and display filename and mimeType
                        // for the file in our listings. When/if we use Google Classroom for
                        // our task-handling that would be the preferred approach to keep
                        // the file as an editable Google file
                        // Init the drive-api (only needed for download so not loaded initially)
                        _b.sent();
                        if (file.canExport) {
                            return [2 /*return*/, new Promise(function (resolve, reject) {
                                    gapi.client.drive.files.export({
                                        fileId: file.fileId,
                                        mimeType: 'application/pdf'
                                    }).then(function (resp) {
                                        var len = resp.body.length;
                                        var data = new Uint8Array(new ArrayBuffer(len));
                                        for (var i = 0; i < len; i++) {
                                            data[i] = resp.body.charCodeAt(i);
                                        }
                                        var blob = new Blob([data], { type: 'application/pdf' });
                                        var filename = file.name + '.pdf';
                                        resolve(new File([blob], filename, { type: 'application/pdf', lastModified: file.modifiedTime }));
                                    });
                                })];
                        }
                        else {
                            xhrDownload_1 = function (file) {
                                return new Promise(function (resolve, reject) {
                                    var xhr = new XMLHttpRequest();
                                    xhr.open("GET", "https://www.googleapis.com/drive/v3/files/" + file.fileId + '?alt=media', true);
                                    xhr.setRequestHeader('Authorization', 'Bearer ' + _this.authToken);
                                    xhr.responseType = 'blob';
                                    xhr.onload = function () {
                                        resolve(new File([xhr.response], file.name, { type: file.mimeType, lastModified: file.modifiedTime }));
                                    };
                                    xhr.send();
                                });
                            };
                            return [2 /*return*/, new Promise(function (resolve, reject) {
                                    if (limitSize !== undefined) {
                                        gapi.client.drive.files.get({
                                            fileId: file.fileId,
                                            fields: 'size'
                                        }).then(function (resp) {
                                            var size = Number(resp.result.size);
                                            if (size > limitSize * 1024 * 1024) {
                                                reject('GooglePickerError: Filsize is too laarge');
                                            }
                                        }).then(function () {
                                            xhrDownload_1(file).then(function (resp) {
                                                resolve(resp);
                                            });
                                        });
                                    }
                                    else {
                                        xhrDownload_1(file).then(function (resp) {
                                            resolve(resp);
                                        });
                                    }
                                })];
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    return GooglePicker;
}());



/***/ }),

/***/ "./src/apis/mock/mock-eds-data.json":
/*!******************************************!*\
  !*** ./src/apis/mock/mock-eds-data.json ***!
  \******************************************/
/*! exports provided: SouthIndia, NorthIndia, default */
/***/ (function(module) {

module.exports = {"SouthIndia":[{"firstTerm":{"startDate":"2015-06-01T00:00:00.000Z","endDate":"2015-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2015-11-01T00:00:00.000Z","endDate":"2016-03-27T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2016-06-23T00:00:00.000Z","endDate":"2016-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2016-11-01T00:00:00.000Z","endDate":"2017-03-25T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2017-06-05T00:00:00.000Z","endDate":"2017-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2017-11-01T00:00:00.000Z","endDate":"2018-03-30T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2018-06-04T00:00:00.000Z","endDate":"2018-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2018-11-01T00:00:00.000Z","endDate":"2019-04-29T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2019-06-03T00:00:00.000Z","endDate":"2019-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2019-11-01T00:00:00.000Z","endDate":"2020-03-27T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2020-06-01T00:00:00.000Z","endDate":"2020-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2020-11-01T00:00:00.000Z","endDate":"2021-03-26T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2021-06-06T00:00:00.000Z","endDate":"2021-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2021-11-01T00:00:00.000Z","endDate":"2022-03-25T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2022-06-05T00:00:00.000Z","endDate":"2022-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2022-11-01T00:00:00.000Z","endDate":"2023-03-31T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2023-06-04T00:00:00.000Z","endDate":"2023-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2023-11-01T00:00:00.000Z","endDate":"2024-03-29T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2024-06-03T00:00:00.000Z","endDate":"2024-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2024-11-01T00:00:00.000Z","endDate":"2025-03-28T00:00:00.000Z"},"holidays":[]}],"NorthIndia":[{"firstTerm":{"startDate":"2024-04-03T00:00:00.000Z","endDate":"2024-09-30T00:00:00.000Z"},"secondTerm":{"startDate":"2024-10-01T00:00:00.000Z","endDate":"2025-04-02T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2023-04-05T00:00:00.000Z","endDate":"2023-10-01T00:00:00.000Z"},"secondTerm":{"startDate":"2023-10-02T00:00:00.000Z","endDate":"2024-04-02T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2022-04-06T00:00:00.000Z","endDate":"2022-10-03T00:00:00.000Z"},"secondTerm":{"startDate":"2022-10-04T00:00:00.000Z","endDate":"2023-04-04T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2021-04-01T00:00:00.000Z","endDate":"2021-10-04T00:00:00.000Z"},"secondTerm":{"startDate":"2021-10-05T00:00:00.000Z","endDate":"2022-04-05T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2020-04-01T00:00:00.000Z","endDate":"2020-09-28T00:00:00.000Z"},"secondTerm":{"startDate":"2020-09-29T00:00:00.000Z","endDate":"2021-03-31T00:00:00.000Z"},"holidays":[{"startDate":"2020-05-17","endDate":"2020-06-28"}]},{"firstTerm":{"startDate":"2019-04-04T00:00:00.000Z","endDate":"2019-09-30T00:00:00.000Z"},"secondTerm":{"startDate":"2019-10-01T00:00:00.000Z","endDate":"2020-03-31T00:00:00.000Z"},"holidays":[{"startDate":"2019-05-19","endDate":"2019-06-29"}]},{"firstTerm":{"startDate":"2018-04-04T00:00:00.000Z","endDate":"2018-09-30T00:00:00.000Z"},"secondTerm":{"startDate":"2018-10-01T00:00:00.000Z","endDate":"2019-04-03T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2017-04-05T00:00:00.000Z","endDate":"2017-10-02T00:00:00.000Z"},"secondTerm":{"startDate":"2017-10-03T00:00:00.000Z","endDate":"2018-04-03T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2016-04-06T00:00:00.000Z","endDate":"2016-10-03T00:00:00.000Z"},"secondTerm":{"startDate":"2016-10-04T00:00:00.000Z","endDate":"2017-04-04T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2015-04-01T00:00:00.000Z","endDate":"2015-10-05T00:00:00.000Z"},"secondTerm":{"startDate":"2015-10-06T00:00:00.000Z","endDate":"2016-04-05T00:00:00.000Z"},"holidays":[]}]};

/***/ }),

/***/ "./src/components/calendar/course-name-to-css-class.ts":
/*!*************************************************************!*\
  !*** ./src/components/calendar/course-name-to-css-class.ts ***!
  \*************************************************************/
/*! exports provided: courseNameToCssClass */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "courseNameToCssClass", function() { return courseNameToCssClass; });
function courseNameToCssClass(cssPrefix, courseName) {
    return "" + cssPrefix + courseName.substr(0, 3).toLowerCase();
}


/***/ }),

/***/ "./src/components/charts/charts-utils.ts":
/*!***********************************************!*\
  !*** ./src/components/charts/charts-utils.ts ***!
  \***********************************************/
/*! exports provided: getWeekplannerProgressData */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getWeekplannerProgressData", function() { return getWeekplannerProgressData; });
function getWeekplannerProgressData(taskSets) {
    var chartTasks = { completedTasks: 0, totalNumberOfTasks: 0, subjectData: {} };
    taskSets.forEach(function (elem) { return elem.learningGoals.forEach(function (x) {
        var subjectCompletedTasks = x.tasks.filter(function (t) { return t.done; }).length;
        chartTasks.subjectData[elem.courseName] = { completedNumberOfTasks: subjectCompletedTasks, numberOfTasks: x.tasks.length };
        chartTasks.completedTasks += subjectCompletedTasks;
        chartTasks.totalNumberOfTasks += x.tasks.length;
    }); });
    return chartTasks;
}


/***/ }),

/***/ "./src/components/charts/goal-progress.tsx":
/*!*************************************************!*\
  !*** ./src/components/charts/goal-progress.tsx ***!
  \*************************************************/
/*! exports provided: GoalProgress */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GoalProgress", function() { return GoalProgress; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var GoalProgress = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](GoalProgress, _super);
    function GoalProgress() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.createProgress = function () {
            var _a = _this.props, numberOfTasks = _a.numberOfTasks, completedNumberOfTasks = _a.completedNumberOfTasks, maximumTasksDisplayed = _a.maximumTasksDisplayed, backgroundColor = _a.backgroundColor, progressColor = _a.progressColor;
            var progress = [];
            if (numberOfTasks > maximumTasksDisplayed) {
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "progress-overview" },
                    " ",
                    completedNumberOfTasks,
                    " / ",
                    numberOfTasks,
                    " ");
            }
            for (var taskNo = 1; taskNo <= numberOfTasks; taskNo++) {
                progress.push(react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("svg", { key: taskNo },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("circle", { className: "circle-chart-background", fill: taskNo > completedNumberOfTasks ? backgroundColor : progressColor, cx: "8", cy: "8", r: "8" })));
            }
            return progress;
        };
        return _this;
    }
    GoalProgress.prototype.render = function () {
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "goals-progress" }, this.createProgress());
    };
    GoalProgress.defaultProps = {
        numberofTasks: 0,
        completedNumberOfTasks: 0,
        maximumTasksDisplayed: 10,
        backgroundColor: "lightgrey",
        progressColor: "#3dbca2",
    };
    return GoalProgress;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/charts/progress.tsx":
/*!********************************************!*\
  !*** ./src/components/charts/progress.tsx ***!
  \********************************************/
/*! exports provided: Progress */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Progress", function() { return Progress; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var Progress = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Progress, _super);
    function Progress() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Progress.prototype.render = function () {
        var _a = this.props, percentage = _a.percentage, backgroundColor = _a.backgroundColor, progressColor = _a.progressColor;
        var roundedPercentage = Math.round(percentage);
        return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("svg", { className: "progress-chart", width: "100%", height: "25" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("rect", { fill: backgroundColor, width: "100%", height: "100%", rx: "4" }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("rect", { className: "fill", fill: progressColor, width: roundedPercentage + "%", height: "100%", rx: "4" }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("text", { className: "filled-text", textAnchor: "middle", x: "50%", y: "50%", dy: ".3em" }, roundedPercentage + "%")));
    };
    Progress.defaultProps = {
        percentage: 0,
        backgroundColor: "#F1F5F4",
        progressColor: "#3dbca2",
    };
    return Progress;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/course-builder-ks/common/banner.tsx":
/*!************************************************************!*\
  !*** ./src/components/course-builder-ks/common/banner.tsx ***!
  \************************************************************/
/*! exports provided: LazyBanner, Banner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LazyBanner", function() { return LazyBanner; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Banner", function() { return Banner; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/es/index.js");
/* harmony import */ var kedbackend_observable__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kedbackend/observable */ "./kedbackend/observable.js");
/* harmony import */ var _utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utility-components/lazy-content */ "./src/components/utility-components/lazy-content.tsx");
/* harmony import */ var _course_builder_sub_components_ellipsis_loader__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../course-builder/sub-components/ellipsis-loader */ "./src/components/course-builder/sub-components/ellipsis-loader.tsx");
/* harmony import */ var _access_control__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../access-control */ "./src/access-control/index.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");








var LazyBanner = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](LazyBanner, _super);
    function LazyBanner() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.dragState = new kedbackend_observable__WEBPACK_IMPORTED_MODULE_3__["Emitter"]({ tabBeingDragged: '', tabBeingHovered: '', insertBefore: false, originClientX: -1 });
        return _this;
    }
    LazyBanner.prototype.render = function () {
        var _this = this;
        var lazyProps = this.props.lazyProps;
        return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-row sv-layout sv-skip-spacer", style: { overflow: "visible" } },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-layout sv-skip-spacer sv-column-12" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-script-portlet sv-portlet sv-skip-spacer" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_4__["LazyContent"], { noError: true }, lazyProps.map(function (_a) {
                        var backgroundImage = _a.backgroundImage;
                        return backgroundImage && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("style", null, "\n              .pageHeader {\n                background-image: url('" + backgroundImage + "') !important;\n              }\n            ");
                    })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "pageHeader" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h1", null,
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_4__["LazyContent"], { noError: true }, lazyProps.map(function (props) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null, props.title); })))),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_4__["LazyContent"], { noError: true }, lazyProps.map(function (_a) {
                            var cornerBox = _a.cornerBox;
                            return cornerBox &&
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "pageHeaderCornerBox" }, cornerBox);
                        })),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "buttonsField" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "buttonsContainer" },
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_4__["LazyContent"], { spinner: react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_ellipsis_loader__WEBPACK_IMPORTED_MODULE_5__["EllipsisLoader"], null) }, lazyProps.map(function (_a) {
                                    var tabs = _a.tabs, buttons = _a.buttons, activeTab = _a.activeTab, blocks = _a.blocks, sortableTabs = _a.sortableTabs, onTabDrop = _a.onTabDrop;
                                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                                        blocks ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" }, blocks.map(function (block) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: block.id, className: "horizontalItem top" },
                                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-vertical" },
                                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", null, block.name)),
                                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn-group" }, block.steps.map(function (step) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], { key: step.stepNo },
                                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Link"], { to: step.link, className: "btn btn-small step-button" + (step.isActive ? " activePage" : "") }, step.stepNo),
                                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", null)); }))))); })) : null,
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: 'horizontalMenu' },
                                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_4__["LazyContent"], null, _this.dragState.map(function (_a) {
                                                var tabBeingDragged = _a.tabBeingDragged, tabBeingHovered = _a.tabBeingHovered, insertBefore = _a.insertBefore, originClientX = _a.originClientX;
                                                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("ul", { className: sortableTabs ? "sortable" : null, onDrop: onTabDrop ? function (ev) {
                                                        if (tabBeingHovered && tabBeingDragged) {
                                                            onTabDrop(tabBeingDragged, tabBeingHovered, insertBefore ?
                                                                'before' : 'after');
                                                        }
                                                        _this.dragState.dispatch(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, _this.dragState.value, { tabBeingHovered: '', tabBeingDragged: '' }));
                                                    } : null },
                                                    tabs.map(function (_a, idx) {
                                                        var name = _a.name, key = _a.key, link = _a.link, onClick = _a.onClick, draggable = _a.draggable;
                                                        var isActive = activeTab === key || (activeTab === '$' && idx === 0);
                                                        var dragState = _this.dragState;
                                                        name = name || Object(_utils_utils__WEBPACK_IMPORTED_MODULE_7__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["(Namnl\u00F6s flik)"], ["(Namnl\u00F6s flik)"])));
                                                        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], { key: key },
                                                            insertBefore && tabBeingHovered === key ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("li", { className: "drop-target", onDragOver: function (ev) { return ev.preventDefault(); } }, "\u00A0") : null,
                                                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("li", { className: [
                                                                    isActive ? "activePage" : "",
                                                                    key === tabBeingDragged ? "drag-source" : "",
                                                                    sortableTabs && draggable ? "draggable" : ""
                                                                ].filter(function (x) { return x; }).join(' '), draggable: sortableTabs && draggable, onDragStart: sortableTabs && draggable ? function (ev) {
                                                                    ev.dataTransfer.effectAllowed = "move";
                                                                    dragState.dispatch(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, dragState.value, { originClientX: ev.clientX, tabBeingDragged: key }));
                                                                } : null, onDragOver: sortableTabs ? function (ev) {
                                                                    if (tabBeingDragged === key) {
                                                                        dragState.dispatch(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, dragState.value, { tabBeingHovered: '' }));
                                                                        return;
                                                                    }
                                                                    if (!tabBeingDragged)
                                                                        return;
                                                                    ev.preventDefault();
                                                                    ev.dataTransfer.dropEffect = "move";
                                                                    //console.log("onDragOver: " + name + ". idx: " + idx + ". otherIdx: " + otherIdx);
                                                                    dragState.dispatch(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, dragState.value, { tabBeingHovered: key, insertBefore: originClientX > ev.clientX }));
                                                                } : null, onDragEnd: function (ev) {
                                                                    _this.dragState.dispatch(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, dragState.value, { tabBeingHovered: '', tabBeingDragged: '' }));
                                                                } }, link ? link.startsWith(":") ?
                                                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: Object(_access_control__WEBPACK_IMPORTED_MODULE_6__["preserveImpersonationQuery"])(link.substr(1), {}) }, name) :
                                                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Link"], { to: link }, name) :
                                                                onClick ?
                                                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { onClick: onClick }, name) :
                                                                    name),
                                                            !insertBefore && tabBeingHovered === key ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("li", { className: "drop-target", onDragOver: function (ev) { return ev.preventDefault(); } }, "\u00A0") : null);
                                                    }),
                                                    buttons && buttons.map(function (btn, idx) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("li", { className: "action-tab", key: "btn" + idx }, btn); }));
                                            }))));
                                })))))))));
    };
    return LazyBanner;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

var Banner = function (props) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](LazyBanner, { lazyProps: new kedbackend_observable__WEBPACK_IMPORTED_MODULE_3__["Emitter"](props) }); };
var templateObject_1;


/***/ }),

/***/ "./src/components/course-builder-ks/common/dialog-content.tsx":
/*!********************************************************************!*\
  !*** ./src/components/course-builder-ks/common/dialog-content.tsx ***!
  \********************************************************************/
/*! exports provided: setupDialogs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setupDialogs", function() { return setupDialogs; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_dialogs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utility-components/dialogs */ "./src/components/utility-components/dialogs.tsx");
/* harmony import */ var _dialog_context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./dialog-context */ "./src/components/course-builder-ks/common/dialog-context.ts");




var setupDialogs = function (Component) {
    return /** @class */ (function (_super) {
        tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](DialogContent, _super);
        function DialogContent(props) {
            var _this = _super.call(this, props) || this;
            _this.state = {
                dialogs: []
            };
            _this.openDialog = _this.openDialog.bind(_this);
            _this.closeDialog = _this.closeDialog.bind(_this);
            return _this;
        }
        DialogContent.prototype.openDialog = function (dialog) {
            this.setState({ dialogs: tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](this.state.dialogs, [dialog]) });
        };
        DialogContent.prototype.closeDialog = function () {
            this.setState({ dialogs: this.state.dialogs.slice(0, this.state.dialogs.length - 1) });
        };
        DialogContent.prototype.render = function () {
            var dialogs = this.state.dialogs;
            return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_dialog_context__WEBPACK_IMPORTED_MODULE_3__["DialogsContext"].Provider, { value: { openDialog: this.openDialog, closeDialog: this.closeDialog } },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(Component, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.props)),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_dialogs__WEBPACK_IMPORTED_MODULE_2__["Dialogs"], { dialogs: dialogs, popDialog: this.closeDialog }));
        };
        return DialogContent;
    }(react__WEBPACK_IMPORTED_MODULE_1___default.a.Component));
};


/***/ }),

/***/ "./src/components/course-builder-ks/common/dialog-context.ts":
/*!*******************************************************************!*\
  !*** ./src/components/course-builder-ks/common/dialog-context.ts ***!
  \*******************************************************************/
/*! exports provided: DialogsContext */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DialogsContext", function() { return DialogsContext; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var DialogsContext = react__WEBPACK_IMPORTED_MODULE_0___default.a.createContext({ openDialog: null, closeDialog: null });


/***/ }),

/***/ "./src/components/course-builder-ks/common/future-abilities-box.tsx":
/*!**************************************************************************!*\
  !*** ./src/components/course-builder-ks/common/future-abilities-box.tsx ***!
  \**************************************************************************/
/*! exports provided: FutureAbilitiesBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FutureAbilitiesBox", function() { return FutureAbilitiesBox; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");


var FutureAbilitiesBox = function (_a) {
    var title = _a.title, selectedFAs = _a.selectedFAs;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_1__["OpenCloseBox"], { title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p", null, title), className: "larger" },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "abilityList" }, selectedFAs.map(function (fa) {
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { key: fa, className: "contentPart" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "contentText" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p", null, fa)));
        })));
};


/***/ }),

/***/ "./src/components/course-builder-ks/common/select-word-bank.tsx":
/*!**********************************************************************!*\
  !*** ./src/components/course-builder-ks/common/select-word-bank.tsx ***!
  \**********************************************************************/
/*! exports provided: SelectWordBank */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SelectWordBank", function() { return SelectWordBank; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _viewer_editor_course_contents_word_bank_content_settings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../viewer-editor/course-contents/word-bank-content-settings */ "./src/components/course-builder-ks/viewer-editor/course-contents/word-bank-content-settings.tsx");
/* harmony import */ var _course_builder_sub_components_ellipsis_loader__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../course-builder/sub-components/ellipsis-loader */ "./src/components/course-builder/sub-components/ellipsis-loader.tsx");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");




var SelectWordBank = function (_a) {
    var subject = _a.subject, step = _a.step, onSelect = _a.onSelect;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { style: { minHeight: 400 } },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0__["Suspense"], { fallback: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_course_builder_sub_components_ellipsis_loader__WEBPACK_IMPORTED_MODULE_2__["EllipsisLoader"], null) },
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_viewer_editor_course_contents_word_bank_content_settings__WEBPACK_IMPORTED_MODULE_1__["WordBankContentSettings"], { subjectName: subject, stepNo: step, onChange: function (_a) {
                    var name = _a.name, key = _a.key;
                    var url = _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_3__["cfg"].KED_WORDBANKS_URL + "?subject=" + subject + "&step=" + step + "&list=" + key;
                    onSelect({ name: name, url: url });
                } })));
};


/***/ }),

/***/ "./src/components/course-builder-ks/common/two-columns-page.tsx":
/*!**********************************************************************!*\
  !*** ./src/components/course-builder-ks/common/two-columns-page.tsx ***!
  \**********************************************************************/
/*! exports provided: TwoColumnsPage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TwoColumnsPage", function() { return TwoColumnsPage; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var TwoColumnsPage = function (_a) {
    var left = _a.left, right = _a.right, rightWidth = _a.rightWidth;
    return (react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "sv-row sv-layout" },
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "sv-layout sv-skip-spacer sv-column-12" },
            react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "sv-spacer-20pxvt sv-vertical sv-layout sv-skip-spacer" },
                react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "pagecontent sv-layout sv-spacer-20pxvt sv-skip-spacer" },
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "sv-row sv-layout sv-skip-spacer" },
                        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "sv-layout sv-skip-spacer sv-column-" + (12 - rightWidth) }, left),
                        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "sv-layout sv-column-" + rightWidth }, right)))))));
};


/***/ }),

/***/ "./src/components/course-builder-ks/logic/change-sort-order.ts":
/*!*********************************************************************!*\
  !*** ./src/components/course-builder-ks/logic/change-sort-order.ts ***!
  \*********************************************************************/
/*! exports provided: reorder */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "reorder", function() { return reorder; });
function reorder(docs, sourceId, targetId, placement) {
    var docsWithIdx = docs.map(function (doc, idx) { return ({ doc: doc, idx: idx }); });
    var sourceWithIdx = docsWithIdx.filter(function (_a) {
        var doc = _a.doc;
        return doc.id === sourceId;
    })[0];
    var targetWithIdx = docsWithIdx.filter(function (_a) {
        var doc = _a.doc;
        return doc.id === targetId;
    })[0];
    if (sourceWithIdx && targetWithIdx) {
        var targetIdx = targetWithIdx.idx;
        var newOrder = sourceWithIdx.doc.order;
        if (placement === 'after') {
            // Place source after target
            if (targetIdx === docs.length - 1) {
                // Target is last
                newOrder = Date.now(); // Date.now() is always last (unless a tab is meaningfully given a future order - then let it stay last!)
            }
            else {
                // Give an order between target and its current neighbour to the right
                newOrder = docs[targetIdx].order + Math.random() * (docs[targetIdx + 1].order - docs[targetIdx].order);
            }
        }
        else {
            // Place source before target
            if (targetIdx === 0) {
                // Target is first
                newOrder = Math.round(docs[0].order - 100 - 10000 * Math.random());
            }
            else {
                // Give an order between target and its current neighbor to the left
                newOrder = docs[targetIdx - 1].order + Math.random() * (docs[targetIdx].order - docs[targetIdx - 1].order);
            }
        }
        return newOrder;
    }
    return 0;
}


/***/ }),

/***/ "./src/components/course-builder-ks/logic/compute-task-tags-and-subject.ts":
/*!*********************************************************************************!*\
  !*** ./src/components/course-builder-ks/logic/compute-task-tags-and-subject.ts ***!
  \*********************************************************************************/
/*! exports provided: computeTaskTagsAndSubject */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computeTaskTagsAndSubject", function() { return computeTaskTagsAndSubject; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");


function computeTaskTagsAndSubject(course, tab, block) {
    var tags = [course.id];
    if (tab.tabClass === 'mission-tab') {
        // If task belongs to a mission tab,
        // it should be tagged with all the subjects of the course
        var otherSubjectTabs = course.tabs
            .filter(function (tab) { return tab.tabClass === 'subject-tab'; });
        var subjects = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["distinct"])(otherSubjectTabs.map(function (tab) { return tab.subject; }), function (s) { return s.subjectCode; });
        var courseCodeTags = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["distinct"])(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["flatten"])(otherSubjectTabs.map(function (tab) { return tab.tags.filter(function (tag) { return tag.startsWith("course:"); }); })));
        tags.push.apply(tags, tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](subjects.map(function (s) { return "sub:" + s.subjectCode; })));
        tags.push.apply(tags, tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](courseCodeTags));
        var subject = subjects.map(function (s) { return s.subjectName; }).join(', ');
        return { tags: tags, subject: subject };
    }
    else {
        tags.push.apply(tags, tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"]((tab || block).tags.filter(function (tag) { return tag.startsWith("course:"); })));
        if (course.type === 'theme-course')
            tags.push.apply(tags, tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](tab.tags.filter(function (tag) { return tag.startsWith("sub:"); })));
        else
            tags.push.apply(tags, tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](block.tags.filter(function (tag) { return tag.startsWith("sub:"); })));
        var subject = course.type === 'theme-course' ?
            tab.subject.subjectName :
            course.subject.subjectName;
        return { tags: tags, subject: subject };
    }
}


/***/ }),

/***/ "./src/components/course-builder-ks/logic/course-instance-tags.ts":
/*!************************************************************************!*\
  !*** ./src/components/course-builder-ks/logic/course-instance-tags.ts ***!
  \************************************************************************/
/*! exports provided: getSubjectCodes, getSchoolYears, computeCourseInstanceTags, computeTagsFromSchoolYears, computeTagsFromSubjectCodes */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSubjectCodes", function() { return getSubjectCodes; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSchoolYears", function() { return getSchoolYears; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computeCourseInstanceTags", function() { return computeCourseInstanceTags; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computeTagsFromSchoolYears", function() { return computeTagsFromSchoolYears; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computeTagsFromSubjectCodes", function() { return computeTagsFromSubjectCodes; });
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");

function getSubjectCodes(tags) {
    return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_0__["distinct"])((tags || [])
        .filter(function (tag) { return tag.startsWith("sub:"); })
        .map(function (tag) { return tag.substr("sub:".length); }));
    ;
}
function getSchoolYears(tags) {
    return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_0__["distinct"])((tags || [])
        .filter(function (tag) { return tag.startsWith("course:"); })
        .map(function (tag) { return tag.substr(tag.indexOf("|") + 1); }) // School year is concatenated as pipe + schoolyear. Example: "GRGRFYS01|4-6"
    );
}
function computeCourseInstanceTags(tags, subjectCodes, schoolYears) {
    var otherTags = (tags || []).filter(function (tag) { return !tag.startsWith("course:") && !tag.startsWith("sub:"); });
    var subjectTags = subjectCodes.map(function (sub) { return "sub:" + sub; });
    var courseTags = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_0__["flatten"])(subjectCodes.map(function (sub) {
        return schoolYears.map(function (schoolYear) {
            return "course:" + sub + "|" + schoolYear;
        });
    }));
    return otherTags
        .concat(subjectTags)
        .concat(courseTags);
}
function computeTagsFromSchoolYears(tags, schoolYears) {
    //schoolYears = schoolYears.map(afterColon);
    var subjectCodes = getSubjectCodes(tags);
    return computeCourseInstanceTags(tags, subjectCodes, schoolYears);
}
function computeTagsFromSubjectCodes(tags, subjectCodes) {
    //subjectCodes = subjectCodes.map(afterColon);
    var schoolYears = getSchoolYears(tags);
    return computeCourseInstanceTags(tags, subjectCodes, schoolYears);
}
function afterColon(str) {
    var pColon = str.indexOf(':');
    return pColon >= 0 ?
        str.substr(pColon + 1) :
        str;
}


/***/ }),

/***/ "./src/components/course-builder-ks/logic/get-course-codes-from-tags.ts":
/*!******************************************************************************!*\
  !*** ./src/components/course-builder-ks/logic/get-course-codes-from-tags.ts ***!
  \******************************************************************************/
/*! exports provided: getCourseCodesFromTags */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getCourseCodesFromTags", function() { return getCourseCodesFromTags; });
function getCourseCodesFromTags(tags) {
    return (tags || [])
        .filter(function (tag) { return tag.startsWith("course:"); })
        .map(function (courseTag) { return courseTag.substr("course:".length); });
}


/***/ }),

/***/ "./src/components/course-builder-ks/logic/get-draft-id.ts":
/*!****************************************************************!*\
  !*** ./src/components/course-builder-ks/logic/get-draft-id.ts ***!
  \****************************************************************/
/*! exports provided: getDraftId */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getDraftId", function() { return getDraftId; });
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../globals/db */ "./src/globals/db.ts");

function getDraftId(school, courseId) {
    return _globals_db__WEBPACK_IMPORTED_MODULE_0__["db"].schools.name(school).single() // Get the school Observable
        .switchMap(function (school) {
        return _globals_db__WEBPACK_IMPORTED_MODULE_0__["db"].branches
            .hasEdgesFrom([school.officialBranchId]) // The official draft has edges from the official school branch
            .name("draft") // There might be other personal drafts in future. Requirement of the common draft is that it is named "draft"
            .tags(courseId) // Find the one tagged with the courseId. There are several drafts - one for each course.
            .idsOnly()
            .map(function (_a) {
            var id = _a.id;
            return id;
        })
            .first();
    });
}


/***/ }),

/***/ "./src/components/course-builder-ks/logic/get-standard-courses-with-ordered-requirements.ts":
/*!**************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/logic/get-standard-courses-with-ordered-requirements.ts ***!
  \**************************************************************************************************/
/*! exports provided: getStandardCoursesWithOrderedRequirements */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getStandardCoursesWithOrderedRequirements", function() { return getStandardCoursesWithOrderedRequirements; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var kedbackend_observable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kedbackend/observable */ "./kedbackend/observable.js");
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _ordered_requirements__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ordered-requirements */ "./src/components/course-builder-ks/logic/ordered-requirements.ts");




function getStandardCoursesWithOrderedRequirements(courseCodes) {
    var _a;
    var courseCodeTags = courseCodes.map(function (code) { return code.startsWith('course:') ? code : "course:" + code; });
    if (courseCodeTags.length === 0)
        return new kedbackend_observable__WEBPACK_IMPORTED_MODULE_1__["Emitter"]([]);
    return (_a = _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].courses.include("abilities", "centralContent", "knowledgeRequirements")).tags.apply(_a, tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](courseCodeTags)).filter(function (course) { return course.isTemplate; }) // BUGBUG: In KG, we would need this filter, not KS. Need another authorized way of getting the standard course only!
        .map(function (course) { return (tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, course, { abilities: Object(_ordered_requirements__WEBPACK_IMPORTED_MODULE_3__["getOrderedDocs"])(course.abilities, course.abilitiesOrder), centralContent: Object(_ordered_requirements__WEBPACK_IMPORTED_MODULE_3__["getOrderedDocs"])(course.centralContent, course.centralContentOrder), knowledgeRequirements: Object(_ordered_requirements__WEBPACK_IMPORTED_MODULE_3__["getOrderedDocs"])(course.knowledgeRequirements, course.knowledgeRequirementsOrder) })); }).toValue();
}


/***/ }),

/***/ "./src/components/course-builder-ks/logic/is-employee.ts":
/*!***************************************************************!*\
  !*** ./src/components/course-builder-ks/logic/is-employee.ts ***!
  \***************************************************************/
/*! exports provided: isEmployee */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isEmployee", function() { return isEmployee; });
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _access_control__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../access-control */ "./src/access-control/index.ts");


function isEmployee(atSchool) {
    return atSchool ?
        Object(_access_control__WEBPACK_IMPORTED_MODULE_1__["isTeacherAtSchool"])(_globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser, atSchool) || _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser.roles.includes("ADMIN") :
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser.roles.some(function (role) { return role === 'EMPLOYEE' || role === 'ADMIN'; });
}


/***/ }),

/***/ "./src/components/course-builder-ks/logic/is-ked-staff.ts":
/*!****************************************************************!*\
  !*** ./src/components/course-builder-ks/logic/is-ked-staff.ts ***!
  \****************************************************************/
/*! exports provided: isKedStaff */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isKedStaff", function() { return isKedStaff; });
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _access_control__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../access-control */ "./src/access-control/index.ts");


function isKedStaff() {
    return Object(_access_control__WEBPACK_IMPORTED_MODULE_1__["isAdminOrTeacherAtSchool"])(_globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser, "standard");
}


/***/ }),

/***/ "./src/components/course-builder-ks/logic/list-course-instances.ts":
/*!*************************************************************************!*\
  !*** ./src/components/course-builder-ks/logic/list-course-instances.ts ***!
  \*************************************************************************/
/*! exports provided: listCourseInstances */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "listCourseInstances", function() { return listCourseInstances; });
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../globals/db */ "./src/globals/db.ts");

function listCourseInstances() {
    return _globals_db__WEBPACK_IMPORTED_MODULE_0__["db"].courseInstances.hasEdgesFrom([_globals_db__WEBPACK_IMPORTED_MODULE_0__["globalId"]]);
}


/***/ }),

/***/ "./src/components/course-builder-ks/logic/ordered-requirements.ts":
/*!************************************************************************!*\
  !*** ./src/components/course-builder-ks/logic/ordered-requirements.ts ***!
  \************************************************************************/
/*! exports provided: getOrderedDocs, resolveRequirementOrder */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getOrderedDocs", function() { return getOrderedDocs; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "resolveRequirementOrder", function() { return resolveRequirementOrder; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var kedbackend_observable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kedbackend/observable */ "./kedbackend/observable.js");
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");




function getOrderedDocs(docs, order, _a) {
    var appendLeftovers = (_a === void 0 ? { appendLeftovers: false } : _a).appendLeftovers;
    // Mark doc IDs that where present in given 'order' array.
    // Will be used to find left-overs that were not present in the 'order' array.
    var markedDocs = {};
    if (!docs || !order) {
        // Special case: no docs or no order. Don't fail. Just return docs as is.
        return docs;
    }
    // Map given 'order' array to corresponding docs. Also mark in markedDocs.
    var result = (docs && order ?
        order.map(function (id) {
            markedDocs[id] = true;
            return docs.find(function (doc) { return doc.id === id; });
        }).filter(function (doc) { return !!doc; }) :
        docs);
    if (appendLeftovers) {
        // If any leftovers are there, concat them at the end:
        var leftOvers = docs.filter(function (doc) { return !markedDocs[doc.id]; });
        return result.concat(leftOvers);
    }
    else {
        return result;
    }
}
function resolveRequirementOrder(obj, orderDefiner) {
    var _a;
    var orderDefiningDocObservable;
    if (orderDefiner) {
        // User provided the orderDefining doc (use case is when obj is a Course or Subject, which contains its order by itself. User then provides the Course or Subject in both args)
        orderDefiningDocObservable = new kedbackend_observable__WEBPACK_IMPORTED_MODULE_1__["Emitter"]([orderDefiner]);
    }
    else {
        var courseCodes = obj.tags.filter(function (tag) { return tag.startsWith("course:"); });
        if (courseCodes.length === 0) {
            return new kedbackend_observable__WEBPACK_IMPORTED_MODULE_1__["Emitter"](obj); // No course tags. Not possible to resolve order.
        }
        orderDefiningDocObservable = (_a = _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].courses).tags.apply(_a, tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](courseCodes)).toValue();
    }
    return orderDefiningDocObservable.map(function (orderHolders) {
        var abilitiesOrder = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["flatten"])(orderHolders.map(function (orderHolder) { return orderHolder.abilitiesOrder || []; }));
        var ccOrder = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["flatten"])(orderHolders.map(function (orderHolder) { return orderHolder.centralContentOrder || []; }));
        var krOrder = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["flatten"])(orderHolders.map(function (orderHolder) { return orderHolder.knowledgeRequirementsOrder || []; }));
        var objClone = Object.assign({}, obj);
        if (objClone.abilities)
            objClone.abilities = getOrderedDocs(obj.abilities, abilitiesOrder);
        if (objClone.centralContent)
            objClone.centralContent = getOrderedDocs(obj.centralContent, ccOrder);
        if (objClone.knowledgeRequirements)
            objClone.knowledgeRequirements = getOrderedDocs(obj.knowledgeRequirements, krOrder);
        return objClone;
    });
}


/***/ }),

/***/ "./src/components/course-builder-ks/logic/publish-course.ts":
/*!******************************************************************!*\
  !*** ./src/components/course-builder-ks/logic/publish-course.ts ***!
  \******************************************************************/
/*! exports provided: publishCourse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "publishCourse", function() { return publishCourse; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");



function publishCourse(_a) {
    var school = _a.school, draftRepo = _a.draftRepo, course = _a.course;
    return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
        var destinationRepo, schoolBranchId;
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
            switch (_b.label) {
                case 0:
                    if (!(school === "standard")) return [3 /*break*/, 1];
                    // Editing Standard School should merge to reality.
                    draftRepo.merge();
                    destinationRepo = _globals_db__WEBPACK_IMPORTED_MODULE_1__["db"];
                    return [3 /*break*/, 3];
                case 1: return [4 /*yield*/, _globals_db__WEBPACK_IMPORTED_MODULE_1__["db"].schools.name(school).single().map(function (school) { return school.officialBranchId; }).load()];
                case 2:
                    schoolBranchId = _b.sent();
                    draftRepo.merge(schoolBranchId);
                    destinationRepo = _globals_db__WEBPACK_IMPORTED_MODULE_1__["db"].branch(schoolBranchId);
                    _b.label = 3;
                case 3:
                    destinationRepo.courseInstances.update(course, {
                        modifiedDate: Date.now(),
                        modifiedBy: {
                            name: _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.displayName,
                            url: "mailto:" + _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.mail
                        }
                    });
                    return [2 /*return*/];
            }
        });
    });
}


/***/ }),

/***/ "./src/components/course-builder-ks/logic/task-order.ts":
/*!**************************************************************!*\
  !*** ./src/components/course-builder-ks/logic/task-order.ts ***!
  \**************************************************************/
/*! exports provided: getSortedTasks, computeUpdatedOrder */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSortedTasks", function() { return getSortedTasks; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computeUpdatedOrder", function() { return computeUpdatedOrder; });
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _ordered_requirements__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ordered-requirements */ "./src/components/course-builder-ks/logic/ordered-requirements.ts");


function getSortedTasks(content) {
    return Object(_ordered_requirements__WEBPACK_IMPORTED_MODULE_1__["getOrderedDocs"])(content.tasks, content.taskOrder, { appendLeftovers: true });
}
function computeUpdatedOrder(docs, currentOrder, source, target, placement, _a) {
    var appendLeftovers = (_a === void 0 ? { appendLeftovers: false } : _a).appendLeftovers;
    var orderedIds = Object(_ordered_requirements__WEBPACK_IMPORTED_MODULE_1__["getOrderedDocs"])(docs, currentOrder, { appendLeftovers: true }).map(function (t) { return t.id; });
    var placeBefore = placement === 'before';
    var result = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_0__["flatten"])(orderedIds
        .filter(function (id) { return id !== source.id; }) // Remove source id
        .map(function (id) { return id !== target.id ?
        // We're not on target
        id :
        // We're on target. Place before or after?
        placeBefore ?
            [source.id, id] :
            [id, source.id]; }));
    return result;
}


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/add-content-button.tsx":
/*!*******************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/add-content-button.tsx ***!
  \*******************************************************************************/
/*! exports provided: AddContentButton */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AddContentButton", function() { return AddContentButton; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");





var CONTENT_TYPES = {
    "rich-text": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Textruta"], ["Textruta"]))),
    "youtube-movie": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Youtube film"], ["Youtube film"]))),
    "learning-goals": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4randem\u00E5l och uppgifter"], ["L\u00E4randem\u00E5l och uppgifter"]))),
    "resource-list": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Resurslista"], ["Resurslista"]))),
    "embedded-html": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Inb\u00E4ddad HTML"], ["Inb\u00E4ddad HTML"]))),
    "word-bank": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_6 || (templateObject_6 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ordbank"], ["Ordbank"])))
};
var ADD_TITLES = {
    "rich-text": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_7 || (templateObject_7 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4gg till text"], ["L\u00E4gg till text"]))),
    "youtube-movie": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_8 || (templateObject_8 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4gg till youtube film"], ["L\u00E4gg till youtube film"]))),
    "learning-goals": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_9 || (templateObject_9 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4gg till l\u00E4randem\u00E5l och uppgifter"], ["L\u00E4gg till l\u00E4randem\u00E5l och uppgifter"]))),
    "resource-list": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_10 || (templateObject_10 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4gg till resurslista"], ["L\u00E4gg till resurslista"]))),
    "embedded-html": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_11 || (templateObject_11 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4gg till inb\u00E4ddad HTML"], ["L\u00E4gg till inb\u00E4ddad HTML"]))),
    "word-bank": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_12 || (templateObject_12 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4gg till ordbank"], ["L\u00E4gg till ordbank"])))
};
var AddContentButton = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](AddContentButton, _super);
    function AddContentButton(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            open: false,
            contentType: 'rich-text'
        };
        return _this;
    }
    AddContentButton.prototype.createContent = function () {
        var _a = this.props, tab = _a.tab, branch = _a.branch, type = _a.type;
        var newContent = this.newContent(type || this.state.contentType);
        branch.courseTabs.addRelated(tab.id, "contents", newContent);
        this.setState({ open: false });
    };
    AddContentButton.prototype.newContent = function (contentType) {
        switch (contentType) {
            case "rich-text": return this.newRichText();
            case "learning-goals": return this.newLearningGoal();
            case "embedded-html": return this.newEmbeddedHTML();
            case "word-bank": return this.newWordBank();
            case "resource-list": return this.newResourceList();
            default: throw new Error("Not implemented");
        }
    };
    AddContentButton.prototype.newWordBank = function () {
        return {
            type: 'word-bank',
            tags: [this.props.course.id],
            id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])(),
            order: Date.now(),
            locked: this.props.tab.locked,
            lockDelete: Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_4__["isKedStaff"])(),
            hidden: false,
            selectedWordBank: null
        };
    };
    AddContentButton.prototype.newRichText = function () {
        return {
            type: "rich-text",
            tags: [this.props.course.id],
            id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])(),
            order: Date.now(),
            locked: this.props.tab.locked,
            lockDelete: Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_4__["isKedStaff"])(),
            hidden: false,
            html: '',
        };
    };
    AddContentButton.prototype.newEmbeddedHTML = function () {
        return {
            type: "embedded-html",
            tags: [this.props.course.id],
            id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])(),
            order: Date.now(),
            locked: this.props.tab.locked,
            lockDelete: Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_4__["isKedStaff"])(),
            hidden: false,
            html: ''
        };
    };
    AddContentButton.prototype.newLearningGoal = function () {
        return {
            type: "learning-goals",
            tags: [this.props.course.id],
            id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])(),
            locked: this.props.tab.locked,
            lockDelete: Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_4__["isKedStaff"])(),
            hidden: false,
            hasCommonLearningGoals: this.props.course.type === 'theme-course',
            commonLearningGoals: [],
            order: Date.now(),
            hiddenTasks: [],
        };
    };
    AddContentButton.prototype.newResourceList = function () {
        return {
            type: "resource-list",
            tags: [this.props.course.id],
            id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])(),
            locked: this.props.tab.locked,
            lockDelete: Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_4__["isKedStaff"])(),
            order: Date.now(),
            hidden: false,
            resources: []
        };
    };
    AddContentButton.prototype.render = function () {
        var _this = this;
        if (this.state.open) {
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("select", { onChange: function (ev) { return _this.setState({ contentType: ev.target.value }); } }, Object.keys(CONTENT_TYPES).map(function (contentType) {
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("option", { key: contentType, value: contentType }, CONTENT_TYPES[contentType]);
                })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "btn pull-right", onClick: function () { return _this.setState({ open: false }); } }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_13 || (templateObject_13 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Avbryt"], ["Avbryt"])))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "btn btn-default", onClick: function () { return _this.createContent(); } }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_14 || (templateObject_14 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Skapa"], ["Skapa"])))));
        }
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "btn", onClick: function () {
                    if (_this.props.type) {
                        _this.createContent();
                    }
                    else {
                        _this.setState({ open: true });
                    }
                } },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-plus", "aria-hidden": "true" }),
                this.props.type ? ADD_TITLES[this.props.type] : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_15 || (templateObject_15 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4gg till inneh\u00E5ll"], ["L\u00E4gg till inneh\u00E5ll"])))),
            "\u00A0");
    };
    return AddContentButton;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8, templateObject_9, templateObject_10, templateObject_11, templateObject_12, templateObject_13, templateObject_14, templateObject_15;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/add-tab-button.tsx":
/*!***************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/add-tab-button.tsx ***!
  \***************************************************************************/
/*! exports provided: AddTabButton */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AddTabButton", function() { return AddTabButtonWithRouter; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var react_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router */ "./node_modules/react-router/es/index.js");
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");






var AddTabButton = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](AddTabButton, _super);
    function AddTabButton(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            editingName: false,
            name: ""
        };
        return _this;
    }
    AddTabButton.prototype.createTab = function (tabName) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, type, branch, draftId, course, school, history, block, stepNo, tabTemplate, newTab;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        this.setState({ editingName: false, name: "" });
                        _a = this.props, type = _a.type, branch = _a.branch, draftId = _a.draftId, course = _a.course, school = _a.school, history = _a.history, block = _a.block, stepNo = _a.stepNo;
                        tabTemplate = {
                            id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])(),
                            tabTitle: tabName,
                            name: tabName,
                            order: Date.now(),
                            locked: Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_5__["isKedStaff"])() ? true : false,
                            acl: ["role:USER:R", "schoolRole:" + school + "/EMPLOYEE:S"],
                        };
                        newTab = (type === 'theme-course-tab' ?
                            tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({ type: 'theme-course-tab', tabClass: 'content-tab', tags: [this.props.course.id] }, tabTemplate) :
                            tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({ type: 'step-course-tab', tabClass: 'content-tab', tags: tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](block.tags) }, tabTemplate, { stepNo: stepNo }));
                        /*const topContent: RichTextContent = {
                          type: 'rich-text',
                          id: createUUID(),
                          tags: [this.props.course.id],
                          html: `<h2>${tabName}</h2`,
                          order: Date.now(),
                          locked: true,
                          hidden: false
                        };*/
                        if (newTab.type === 'step-course-tab') {
                            branch.courseBlocks.addRelated(block.id, "tabs", newTab);
                        }
                        else {
                            branch.courseInstances.addRelated(course.id, "tabs", newTab);
                        }
                        //branch.courseTabs.addRelated(newTab.id, "contents", topContent);
                        return [4 /*yield*/, branch.saveNow()];
                    case 1:
                        //branch.courseTabs.addRelated(newTab.id, "contents", topContent);
                        _b.sent();
                        history.push("/" + school + "/courses/" + course.id + "/tabs/" + newTab.id + "/drafts/" + draftId + "/edit");
                        return [2 /*return*/];
                }
            });
        });
    };
    AddTabButton.prototype.render = function () {
        var _this = this;
        var _a = this.props, school = _a.school, course = _a.course, branch = _a.branch;
        var _b = this.state, editingName = _b.editingName, name = _b.name;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { onClick: editingName ? null : function (ev) { return _this.setState({ editingName: true, name: '' }); } },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-plus", "aria-hidden": "true" }),
                !editingName ?
                    ' ' + Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ny flik"], ["Ny flik"]))) :
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { type: "text", style: { color: "black" }, autoFocus: true, placeholder: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Fliknamn"], ["Fliknamn"]))), value: name, size: 30, onChange: function (ev) { return _this.setState({ name: ev.target.value }); }, onKeyPress: function (ev) {
                            if (ev.key === 'Enter') {
                                _this.createTab(name);
                            }
                        }, onBlur: function () { return _this.setState({ editingName: false }); } })));
    };
    return AddTabButton;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));
var AddTabButtonWithRouter = Object(react_router__WEBPACK_IMPORTED_MODULE_4__["withRouter"])(AddTabButton);

var templateObject_1, templateObject_2;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/clickable-school-div.tsx":
/*!*********************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/clickable-school-div.tsx ***!
  \*********************************************************************************/
/*! exports provided: ClickableSchoolDiv */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ClickableSchoolDiv", function() { return ClickableSchoolDiv; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../course-builder/sub-components/spinner */ "./src/components/course-builder/sub-components/spinner.tsx");
/* harmony import */ var react_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router */ "./node_modules/react-router/es/index.js");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _access_control__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../access-control */ "./src/access-control/index.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _logic_get_draft_id__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../logic/get-draft-id */ "./src/components/course-builder-ks/logic/get-draft-id.ts");









var ClickableSchoolDivWithRouter = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](ClickableSchoolDivWithRouter, _super);
    function ClickableSchoolDivWithRouter(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            open: false
        };
        return _this;
    }
    ClickableSchoolDivWithRouter.prototype.open = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var schools;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.setState({ open: true });
                        if (!!this.state.schools) return [3 /*break*/, 2];
                        return [4 /*yield*/, _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].schools
                                .tags("primary")
                                .map(function (_a) {
                                var id = _a.id, name = _a.name, displayName = _a.displayName;
                                return ({ id: id, name: name, displayName: displayName || name || "<namnls>" });
                            })
                                .toValue().load()];
                    case 1:
                        schools = _a.sent();
                        this.setState({ schools: schools });
                        _a.label = 2;
                    case 2: return [2 /*return*/];
                }
            });
        });
    };
    ClickableSchoolDivWithRouter.prototype.close = function () {
        this.setState({ open: false });
    };
    ClickableSchoolDivWithRouter.prototype.selectSchool = function (school) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            function getRoute() {
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
                    var otherDraftId, _a;
                    return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                        switch (_b.label) {
                            case 0:
                                _a = draftId;
                                if (!_a) return [3 /*break*/, 2];
                                return [4 /*yield*/, Object(_logic_get_draft_id__WEBPACK_IMPORTED_MODULE_8__["getDraftId"])(school, courseId).load()];
                            case 1:
                                _a = (_b.sent());
                                _b.label = 2;
                            case 2:
                                otherDraftId = _a;
                                if (taskId && contentId && otherDraftId && (Object(_access_control__WEBPACK_IMPORTED_MODULE_6__["isAdminOrTeacherAtSchool"])(_globals_KED_env__WEBPACK_IMPORTED_MODULE_7__["default"].currentUser, school) || canImpersonate)) {
                                    return [2 /*return*/, "/" + school + "/courses/" + courseId + "/tabs/" + (tabId || "$") + "/contents/" + contentId + "/tasks/" + taskId + "/drafts/" + otherDraftId + "/edit"];
                                }
                                else if (taskId) {
                                    return [2 /*return*/, "/" + school + "/courses/" + courseId + "/tabs/" + (tabId || "$") + "/tasks/" + taskId];
                                }
                                else if (otherDraftId && (Object(_access_control__WEBPACK_IMPORTED_MODULE_6__["isAdminOrTeacherAtSchool"])(_globals_KED_env__WEBPACK_IMPORTED_MODULE_7__["default"].currentUser, school) || canImpersonate)) {
                                    return [2 /*return*/, "/" + school + "/courses/" + courseId + "/tabs/" + (tabId || "$") + "/drafts/" + otherDraftId + "/edit"];
                                }
                                else {
                                    return [2 /*return*/, "/" + school + "/courses/" + courseId + "/tabs/" + (tabId || "$")];
                                }
                                return [2 /*return*/];
                        }
                    });
                });
            }
            var _a, match, history, _b, courseId, tabId, draftId, contentId, taskId, canImpersonate, route, baseUrl;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _a = this.props, match = _a.match, history = _a.history;
                        _b = match.params, courseId = _b.courseId, tabId = _b.tabId, draftId = _b.draftId, contentId = _b.contentId, taskId = _b.taskId;
                        canImpersonate = _globals_KED_env__WEBPACK_IMPORTED_MODULE_7__["default"].currentUser.roles.includes("ADMIN") || // Is admin
                            location.search.includes('role=');
                        if (!(school !== this.props.school)) return [3 /*break*/, 2];
                        return [4 /*yield*/, getRoute()];
                    case 1:
                        route = _c.sent();
                        if (canImpersonate) {
                            baseUrl = Object(_access_control__WEBPACK_IMPORTED_MODULE_6__["preserveImpersonationQuery"])(location.pathname, school === 'standard' ?
                                { role: undefined, school: school } :
                                { role: "EMPLOYEE", school: school });
                            location.href = baseUrl + "#" + route;
                        }
                        else {
                            // Not an admin, just redirect to the route and normal access control will apply
                            history.push(route);
                        }
                        _c.label = 2;
                    case 2:
                        this.close();
                        return [2 /*return*/];
                }
            });
        });
    };
    ClickableSchoolDivWithRouter.prototype.render = function () {
        var _this = this;
        var _a = this.props, school = _a.school, draftId = _a.draftId, displayName = _a.displayName;
        var _b = this.state, open = _b.open, schools = _b.schools;
        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { tabIndex: 1, style: { outline: 0 }, onBlur: function () { return _this.close(); } }, !open ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h5", { onClick: function () { return _this.open(); } }, school !== "standard" ? (displayName || school) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Standard"], ["Standard"])))),
            draftId && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", { className: "pageSideText" }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Arbetsversion"], ["Arbetsversion"]))))) : !schools ?
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_3__["Spinner"], null) : react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h5", { onClick: function () { return _this.close(); } }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["V\u00E4xla skola"], ["V\u00E4xla skola"])))),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("ul", null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("li", { onClick: function () { return _this.selectSchool("standard"); } }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Standard"], ["Standard"])))),
                schools.filter(function (_a) {
                    var name = _a.name;
                    return name !== 'standard';
                })
                    .sort(function (a, b) { return a.displayName.localeCompare(b.displayName, ["sv", "en"]); })
                    .map(function (_a) {
                    var id = _a.id, school = _a.name, displayName = _a.displayName;
                    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("li", { key: id, onClick: function () { return _this.selectSchool(school); } }, displayName);
                }))));
    };
    return ClickableSchoolDivWithRouter;
}(react__WEBPACK_IMPORTED_MODULE_1___default.a.Component));
var ClickableSchoolDiv = Object(react_router__WEBPACK_IMPORTED_MODULE_4__["withRouter"])(ClickableSchoolDivWithRouter);
var templateObject_1, templateObject_2, templateObject_3, templateObject_4;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-area.tsx":
/*!************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-area.tsx ***!
  \************************************************************************/
/*! exports provided: CourseArea */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CourseArea", function() { return CourseArea; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var kedbackend_observable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend/observable */ "./kedbackend/observable.js");
/* harmony import */ var _course_tab_area__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./course-tab-area */ "./src/components/course-builder-ks/viewer-editor/course-tab-area.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _editor_footer_buttons__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./editor-footer-buttons */ "./src/components/course-builder-ks/viewer-editor/editor-footer-buttons.tsx");
/* harmony import */ var _common_two_columns_page__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common/two-columns-page */ "./src/components/course-builder-ks/common/two-columns-page.tsx");
/* harmony import */ var _weekplanner_weekplanner__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../weekplanner/weekplanner */ "./src/components/weekplanner/weekplanner.tsx");
/* harmony import */ var _access_control__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../access-control */ "./src/access-control/index.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/es/index.js");
/* harmony import */ var _utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../utility-components/horizontal-item */ "./src/components/utility-components/horizontal-item.tsx");
/* harmony import */ var _utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../utility-components/align-horizontal */ "./src/components/utility-components/align-horizontal.tsx");
/* harmony import */ var _logic_publish_course__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../logic/publish-course */ "./src/components/course-builder-ks/logic/publish-course.ts");
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../utility-components/lazy-content */ "./src/components/utility-components/lazy-content.tsx");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _version_history_version_history_box__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./version-history/version-history-box */ "./src/components/course-builder-ks/viewer-editor/version-history/version-history-box.tsx");
/* harmony import */ var _course_contents_resource_list_view__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./course-contents/resource-list-view */ "./src/components/course-builder-ks/viewer-editor/course-contents/resource-list-view.tsx");
var _this = undefined;




















var CourseArea = Object(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["withRouter"])(function (_a) {
    var school = _a.school, courseId = _a.courseId, draftId = _a.draftId, course = _a.course, branch = _a.branch, tabs = _a.tabs, activeTab = _a.activeTab, editMode = _a.editMode, history = _a.history, block = _a.block;
    var tab = tabs.filter(function (tab) { return tab.id === activeTab; })[0] || tabs[0];
    var currentTabResources = branch.courseContents.hasEdgesFrom([tab.id]).filter(function (x) { return x.type === "resource-list"; }).first();
    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_common_two_columns_page__WEBPACK_IMPORTED_MODULE_6__["TwoColumnsPage"], { right: editMode && draftId ?
            // In edit mode, show the draft edits to the right
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_version_history_version_history_box__WEBPACK_IMPORTED_MODULE_18__["VersionHistoryBox"], { isAdmin: school === 'standard', branchId: draftId, branchType: "draft-branch" })) :
            // In view mode, show WeekPlanner to the right
            // In view mode, show Resources to the right
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_weekplanner_weekplanner__WEBPACK_IMPORTED_MODULE_7__["WeekPlanner"], { env: _globals_KED_env__WEBPACK_IMPORTED_MODULE_9__["default"], viewCourseUrl: _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_10__["default"].KED_COURSE_VIEWER_URL }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_contents_resource_list_view__WEBPACK_IMPORTED_MODULE_19__["ResourceListView"], { content: currentTabResources })), rightWidth: 5, left: react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_tab_area__WEBPACK_IMPORTED_MODULE_3__["CourseTabArea"], { school: school, course: course, branch: branch, tab: tab, editMode: editMode, draftId: draftId, block: block, lazyContents: tab ?
                    branch.courseContents.include("tasks").hasEdgesFrom([tab.id]).toValue() :
                    new kedbackend_observable__WEBPACK_IMPORTED_MODULE_2__["Emitter"]([]) }),
            !editMode ? _globals_KED_env__WEBPACK_IMPORTED_MODULE_9__["default"].currentUser.roles.includes("ADMIN") || Object(_access_control__WEBPACK_IMPORTED_MODULE_8__["isTeacherAtSchool"])(_globals_KED_env__WEBPACK_IMPORTED_MODULE_9__["default"].currentUser, school) ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_13__["AlignHorizontal"], null,
                    draftId && react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_12__["HorizontalItem"], null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { className: "btn btn-large btn-warning", onClick: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                                    switch (_a.label) {
                                        case 0: return [4 /*yield*/, Object(_logic_publish_course__WEBPACK_IMPORTED_MODULE_14__["publishCourse"])({
                                                school: school,
                                                course: course,
                                                draftRepo: _globals_db__WEBPACK_IMPORTED_MODULE_15__["db"].branch(draftId)
                                            })];
                                        case 1:
                                            _a.sent();
                                            return [4 /*yield*/, _globals_db__WEBPACK_IMPORTED_MODULE_15__["db"].saveNow()];
                                        case 2:
                                            _a.sent();
                                            history.push("/" + school + "/courses/" + courseId + "/tabs/" + (tab ? tab.id : '$'));
                                            return [2 /*return*/];
                                    }
                                });
                            }); } },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-lg fa-play", "aria-hidden": true }),
                            "\u00A0", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Publicera"], ["Publicera"]))))),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_16__["LazyContent"], null, _globals_db__WEBPACK_IMPORTED_MODULE_15__["CourseInstances"].getBranchId(_globals_db__WEBPACK_IMPORTED_MODULE_15__["db"].schools.name(school).single(), courseId).map(function (existingDraftId) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_12__["HorizontalItem"], null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { className: "btn btn-large", onClick: existingDraftId ?
                                    // Navigate to edit existing draft
                                    function () { return history.push("/" + school + "/courses/" + courseId + "/tabs/" + (tab ? tab.id : '$') + "/drafts/" + existingDraftId + "/edit"); } :
                                    // Create a draft for the branch and then navigate to it
                                    function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                                        var schoolEntity, newDraftId, newDraftBranchDoc, error_1;
                                        return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                                            switch (_a.label) {
                                                case 0:
                                                    _a.trys.push([0, 4, , 5]);
                                                    return [4 /*yield*/, _globals_db__WEBPACK_IMPORTED_MODULE_15__["db"].schools.name(school).single().load()];
                                                case 1:
                                                    schoolEntity = _a.sent();
                                                    return [4 /*yield*/, Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_17__["computePredestinatedId"])(schoolEntity.officialBranchId + courseId + "draft")];
                                                case 2:
                                                    newDraftId = _a.sent();
                                                    newDraftBranchDoc = {
                                                        id: newDraftId,
                                                        acl: [
                                                            "role:USER:R",
                                                            "schoolRole:" + schoolEntity.name + "/EMPLOYEE:S"
                                                        ],
                                                        name: 'draft',
                                                        schoolId: schoolEntity.id,
                                                        treeParentId: schoolEntity.officialBranchId,
                                                        tags: [courseId]
                                                    };
                                                    _globals_db__WEBPACK_IMPORTED_MODULE_15__["db"].branches.addRelated(schoolEntity.officialBranchId, "approvedChildren", newDraftBranchDoc);
                                                    return [4 /*yield*/, _globals_db__WEBPACK_IMPORTED_MODULE_15__["db"].saveNow()];
                                                case 3:
                                                    _a.sent();
                                                    history.push("/" + school + "/courses/" + courseId + "/tabs/" + (tab ? tab.id : '$') + "/drafts/" + newDraftId + "/edit");
                                                    return [3 /*break*/, 5];
                                                case 4:
                                                    error_1 = _a.sent();
                                                    Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["showError"])(error_1);
                                                    return [3 /*break*/, 5];
                                                case 5: return [2 /*return*/];
                                            }
                                        });
                                    }); } }, existingDraftId ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-lg fa-pencil" }),
                                " ",
                                draftId ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Forts\u00E4tt redigera"], ["Forts\u00E4tt redigera"]))) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Redigera"], ["Redigera"])))) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-lg fa-plus" }),
                                " ", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Skapa skolans version av kursen"], ["Skapa skolans version av kursen"])))))),
                        draftId || !existingDraftId ? undefined : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_12__["HorizontalItem"], null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { className: "btn btn-large", onClick: function () { return history.push("/" + school + "/courses/" + courseId + "/tabs/" + (tab ? tab.id : '$') + "/drafts/" + existingDraftId); } },
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-eye" }),
                                " ", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Visa redigerad version"], ["Visa redigerad version"])))))); })),
                    draftId && react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_12__["HorizontalItem"], null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { className: "btn btn-large", onClick: function () {
                                history.push("/" + school + "/courses/" + courseId + "/tabs/" + (tab ? tab.id : '$'));
                            } },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-lg fa-arrow-left" }),
                            " ", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_6 || (templateObject_6 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Avsluta redigering"], ["Avsluta redigering"]))))))) : undefined :
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_editor_footer_buttons__WEBPACK_IMPORTED_MODULE_5__["EditorFooterButtons"], { school: school, course: course, tab: tab, activeTab: activeTab, draftId: draftId, courseType: course.type, blockId: block && block.id }))) });
});
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/add-task-button.tsx":
/*!********************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/add-task-button.tsx ***!
  \********************************************************************************************/
/*! exports provided: AddTaskButton */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AddTaskButton", function() { return AddTaskButtonWithRouter; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var react_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router */ "./node_modules/react-router/es/index.js");
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");
/* harmony import */ var _logic_compute_task_tags_and_subject__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../logic/compute-task-tags-and-subject */ "./src/components/course-builder-ks/logic/compute-task-tags-and-subject.ts");







var AddTaskButton = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](AddTaskButton, _super);
    function AddTaskButton(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            editingName: false,
            name: ""
        };
        return _this;
    }
    AddTaskButton.prototype.createTask = function (taskName) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, branch, draftId, course, tab, school, content, history, block, learningGoal, _b, tags, subject, newTask;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        this.setState({ editingName: false, name: "" });
                        _a = this.props, branch = _a.branch, draftId = _a.draftId, course = _a.course, tab = _a.tab, school = _a.school, content = _a.content, history = _a.history, block = _a.block, learningGoal = _a.learningGoal;
                        _b = Object(_logic_compute_task_tags_and_subject__WEBPACK_IMPORTED_MODULE_6__["computeTaskTagsAndSubject"])(course, tab, block), tags = _b.tags, subject = _b.subject;
                        newTask = {
                            id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])(),
                            tags: tags,
                            name: taskName,
                            acl: ["role:USER:R", "schoolRole:" + school + "/EMPLOYEE:S"],
                            url: "",
                            taskType: 'task',
                            learningGoal: learningGoal,
                            futureAbilities: [],
                            resources: [],
                            subject: subject
                        };
                        branch.courseContents.addRelated(content.id, "tasks", newTask);
                        return [4 /*yield*/, branch.saveNow()];
                    case 1:
                        _c.sent();
                        history.push("/" + school + "/courses/" + course.id + "/tabs/" + tab.id + "/contents/" + content.id + "/tasks/" + newTask.id + "/drafts/" + draftId + "/edit");
                        return [2 /*return*/];
                }
            });
        });
    };
    AddTaskButton.prototype.render = function () {
        var _this = this;
        var _a = this.state, editingName = _a.editingName, name = _a.name;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "btn", onClick: editingName ? null : function (ev) { return _this.setState({ editingName: true, name: '' }); } },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-plus", "aria-hidden": "true" }),
                !editingName ?
                    ' ' + (Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_5__["isKedStaff"])() ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4gg till uppgift"], ["L\u00E4gg till uppgift"]))) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4gg till egen uppgift"], ["L\u00E4gg till egen uppgift"])))) :
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { type: "text", autoFocus: true, placeholder: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppgiftens namn"], ["Uppgiftens namn"]))), value: name, size: 50, onChange: function (ev) { return _this.setState({ name: ev.target.value }); }, onKeyPress: function (ev) {
                            if (ev.key === 'Enter') {
                                _this.createTask(name);
                            }
                        }, onBlur: function () { return _this.setState({ editingName: false }); } })));
    };
    return AddTaskButton;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));
var AddTaskButtonWithRouter = Object(react_router__WEBPACK_IMPORTED_MODULE_4__["withRouter"])(AddTaskButton);

var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/content-box.tsx":
/*!****************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/content-box.tsx ***!
  \****************************************************************************************/
/*! exports provided: CourseContentBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CourseContentBox", function() { return CourseContentBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _rich_text__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./rich-text */ "./src/components/course-builder-ks/viewer-editor/course-contents/rich-text.tsx");
/* harmony import */ var _learning_tasks_content_box__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./learning-tasks-content-box */ "./src/components/course-builder-ks/viewer-editor/course-contents/learning-tasks-content-box.tsx");
/* harmony import */ var _embedded_html__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./embedded-html */ "./src/components/course-builder-ks/viewer-editor/course-contents/embedded-html.tsx");
/* harmony import */ var _word_bank_content_box__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./word-bank-content-box */ "./src/components/course-builder-ks/viewer-editor/course-contents/word-bank-content-box.tsx");
/* harmony import */ var _resource_list__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./resource-list */ "./src/components/course-builder-ks/viewer-editor/course-contents/resource-list.tsx");







/*export const ContentBox = ({repo, content}: CourseContentProps)=> (
  <div className={["course-content-box", "ked_boxed"].join(' ')} style={{position: 'relative'}}>
    <ConcreteComponent {...{repo, content}} />
    <div style={{position: 'absolute', top: 0, right: 0}}>
        {moduleOrderedIndex > 0 && <span>
          <i className="fa fa-arrow-circle-up selectable"
            aria-hidden="true"
            onClick={()=>this.props.onReorder(-1)} /> </span>}
        {moduleOrderedIndex < course.modules.length - 1 && <span>
          <i className="fa fa-arrow-circle-down selectable"
            aria-hidden="true"
            onClick={()=>this.props.onReorder(1)} /> </span>}
        <RemoveItem
          title="Ta bort modulen"
          style={{display: 'inline-block'}}
          onClick={()=>confirm(L`Ta bort modul ${module.name}?`) && host.update({modules: {$splice: [[moduleIndex, 1]]}})} />
      </div>
  </div>
)*/
function CourseContentBox(_a) {
    var repo = _a.repo, content = _a.content, siblingContents = _a.siblingContents, editMode = _a.editMode, course = _a.course, draftId = _a.draftId, school = _a.school, courseTab = _a.courseTab, reportNumChars = _a.reportNumChars, maxChars = _a.maxChars, block = _a.block;
    switch (content.type) {
        case "rich-text": return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_rich_text__WEBPACK_IMPORTED_MODULE_2__["RichTextContentBox"], tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, { repo: repo, content: content, editMode: editMode, reportNumChars: reportNumChars, maxChars: maxChars }));
        case "learning-goals": return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_learning_tasks_content_box__WEBPACK_IMPORTED_MODULE_3__["LearningTasksContentBox"], tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, {
            repo: repo,
            content: content,
            editMode: editMode,
            course: course,
            draftId: draftId,
            courseTab: courseTab,
            school: school,
            block: block
        }));
        case "resource-list": return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_resource_list__WEBPACK_IMPORTED_MODULE_6__["ResourceListContentBox"], tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, { repo: repo, content: content, editMode: editMode }));
        case "embedded-html": return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_embedded_html__WEBPACK_IMPORTED_MODULE_4__["EmbeddedHTMLContentBox"], tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, { repo: repo, content: content, editMode: editMode, reportNumChars: reportNumChars, maxChars: maxChars }));
        case "word-bank": return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_word_bank_content_box__WEBPACK_IMPORTED_MODULE_5__["WordBankContentBox"], tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, {
            repo: repo,
            editMode: editMode,
            content: content,
            siblingWordBanks: siblingContents.filter(function (c) { return c.type === 'word-bank' && c.id !== content.id; }),
            course: course,
            courseTab: courseTab
        }));
        default: return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null,
            "Ok\u00E4nd inneh\u00E5llstyp: ",
            content.type);
    }
}


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/course-content-types.ts":
/*!************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/course-content-types.ts ***!
  \************************************************************************************************/
/*! exports provided: COURSE_CONTENT_TYPES */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "COURSE_CONTENT_TYPES", function() { return COURSE_CONTENT_TYPES; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");


var COURSE_CONTENT_TYPES = {
    "rich-text": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Textruta"], ["Textruta"]))),
    "youtube-movie": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Youtube film"], ["Youtube film"]))),
    "learning-goals": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4randem\u00E5l och uppgifter"], ["L\u00E4randem\u00E5l och uppgifter"]))),
    "resource-list": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Resurslista"], ["Resurslista"]))),
    "embedded-html": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Inb\u00E4ddad HTML"], ["Inb\u00E4ddad HTML"]))),
    "word-bank": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_6 || (templateObject_6 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ordbank"], ["Ordbank"])))
};
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/embedded-html.tsx":
/*!******************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/embedded-html.tsx ***!
  \******************************************************************************************/
/*! exports provided: EmbeddedHTMLContentBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EmbeddedHTMLContentBox", function() { return EmbeddedHTMLContentBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");




var EmbeddedHTMLContentBox = function (_a) {
    var content = _a.content, repo = _a.repo, editMode = _a.editMode, reportNumChars = _a.reportNumChars, maxChars = _a.maxChars;
    return editMode && (!content.locked || Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_2__["isKedStaff"])()) ?
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h4", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Inb\u00E4ddat material"], ["Inb\u00E4ddat material"])))),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Klipp in HTML kod nedan"], ["Klipp in HTML kod nedan"])))),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("textarea", { style: { width: "100%", height: "100px" }, value: content.html, onChange: function (_a) {
                    var html = _a.target.value;
                    if (html.length > maxChars)
                        return;
                    repo.courseContents.update(content, { html: html });
                    reportNumChars(html.length);
                } })) :
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { dangerouslySetInnerHTML: { __html: content.html } });
};
var templateObject_1, templateObject_2;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/index.ts":
/*!*********************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/index.ts ***!
  \*********************************************************************************/
/*! exports provided: COURSE_CONTENT_TYPES, CourseContentBox, RichTextContentBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _course_content_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./course-content-types */ "./src/components/course-builder-ks/viewer-editor/course-contents/course-content-types.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "COURSE_CONTENT_TYPES", function() { return _course_content_types__WEBPACK_IMPORTED_MODULE_0__["COURSE_CONTENT_TYPES"]; });

/* harmony import */ var _content_box__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./content-box */ "./src/components/course-builder-ks/viewer-editor/course-contents/content-box.tsx");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CourseContentBox", function() { return _content_box__WEBPACK_IMPORTED_MODULE_1__["CourseContentBox"]; });

/* harmony import */ var _rich_text__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./rich-text */ "./src/components/course-builder-ks/viewer-editor/course-contents/rich-text.tsx");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RichTextContentBox", function() { return _rich_text__WEBPACK_IMPORTED_MODULE_2__["RichTextContentBox"]; });






/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/learning-tasks-content-box.tsx":
/*!*******************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/learning-tasks-content-box.tsx ***!
  \*******************************************************************************************************/
/*! exports provided: LearningTasksContentBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LearningTasksContentBox", function() { return LearningTasksContentBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _learning_tasks_settings__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./learning-tasks-settings */ "./src/components/course-builder-ks/viewer-editor/course-contents/learning-tasks-settings.tsx");
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");
/* harmony import */ var _learning_tasks_with_common_goals__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./learning-tasks-with-common-goals */ "./src/components/course-builder-ks/viewer-editor/course-contents/learning-tasks-with-common-goals.tsx");
/* harmony import */ var _learning_tasks_with_separate_goals__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./learning-tasks-with-separate-goals */ "./src/components/course-builder-ks/viewer-editor/course-contents/learning-tasks-with-separate-goals.tsx");







var LearningTasksContentBox = function (_a) {
    var content = _a.content, editMode = _a.editMode, repo = _a.repo, course = _a.course, school = _a.school, draftId = _a.draftId, courseTab = _a.courseTab, block = _a.block;
    var hasCommonLearningGoals = content.hasCommonLearningGoals, commonLearningGoals = content.commonLearningGoals, tasks = content.tasks;
    var refinedLearningGoals = commonLearningGoals
        .map(function (goal) { return goal.trim(); }).filter(function (goal) { return !!goal; });
    return (react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "ked_boxed" },
        editMode && (!content.locked || Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_4__["isKedStaff"])()) ?
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_learning_tasks_settings__WEBPACK_IMPORTED_MODULE_3__["LearningTasksSettings"], { course: course, content: content, repo: repo, tab: courseTab }) :
            courseTab.tabClass !== 'mission-tab' ?
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h2", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4randem\u00E5l och uppgifter"], ["L\u00E4randem\u00E5l och uppgifter"])))) :
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h2", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppdrag"], ["Uppdrag"])))),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("hr", null),
        hasCommonLearningGoals && courseTab.tabClass !== 'mission-tab' ?
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_learning_tasks_with_common_goals__WEBPACK_IMPORTED_MODULE_5__["LearningTasksWithCommonGoals"], tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, { content: content, editMode: editMode, repo: repo, course: course, school: school, draftId: draftId, courseTab: courseTab, block: block, learningGoals: refinedLearningGoals })) :
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_learning_tasks_with_separate_goals__WEBPACK_IMPORTED_MODULE_6__["LearningTasksWithSeparateGoals"], tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, { content: content, editMode: editMode, repo: repo, course: course, school: school, draftId: draftId, courseTab: courseTab, block: block, learningGoals: refinedLearningGoals }))));
};
var templateObject_1, templateObject_2;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/learning-tasks-settings.tsx":
/*!****************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/learning-tasks-settings.tsx ***!
  \****************************************************************************************************/
/*! exports provided: LearningTasksSettings */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LearningTasksSettings", function() { return LearningTasksSettings; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utility-components/align-horizontal */ "./src/components/utility-components/align-horizontal.tsx");
/* harmony import */ var _utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../utility-components/horizontal-item */ "./src/components/utility-components/horizontal-item.tsx");
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");






var LearningTasksSettings = function (_a) {
    var tab = _a.tab, content = _a.content, repo = _a.repo;
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h2", null, tab.tabClass !== 'mission-tab' ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4randem\u00E5l och uppgifter"], ["L\u00E4randem\u00E5l och uppgifter"]))) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppdrag"], ["Uppdrag"])))),
        Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_5__["isKedStaff"])() && tab.tabClass !== 'mission-tab' ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_3__["AlignHorizontal"], null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_4__["HorizontalItem"], null,
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("input", { type: "checkbox", checked: content.hasCommonLearningGoals, onChange: function (ev) { return repo.courseContents.update(content, { hasCommonLearningGoals: !!ev.target.checked }); } })),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_4__["HorizontalItem"], null,
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null,
                            "\u00A0", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Specificera gemensamma l\u00E4randem\u00E5l f\u00F6r samtliga uppgifter"], ["Specificera gemensamma l\u00E4randem\u00E5l f\u00F6r samtliga uppgifter"]))))))),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, content.hasCommonLearningGoals ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ange de gemensamma l\u00E4randem\u00E5len. Ange ett l\u00E4randem\u00E5l per rad."], ["Ange de gemensamma l\u00E4randem\u00E5len. Ange ett l\u00E4randem\u00E5l per rad."]))) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ange ett l\u00E4randem\u00E5l per rad."], ["Ange ett l\u00E4randem\u00E5l per rad."])))),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("textarea", { className: "learning-goal-box", value: content.commonLearningGoals.join('\n'), onChange: function (ev) { return repo.courseContents.update(content, {
                        commonLearningGoals: ev.target.value.split('\n')
                    }); } }))) : null);
};
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/learning-tasks-with-common-goals.tsx":
/*!*************************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/learning-tasks-with-common-goals.tsx ***!
  \*************************************************************************************************************/
/*! exports provided: LearningTasksWithCommonGoals */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LearningTasksWithCommonGoals", function() { return LearningTasksWithCommonGoals; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _course_viewer_subcomponents_task_list__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../course-viewer/subcomponents/task-list */ "./src/components/course-viewer/subcomponents/task-list.tsx");
/* harmony import */ var _add_task_button__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./add-task-button */ "./src/components/course-builder-ks/viewer-editor/course-contents/add-task-button.tsx");
/* harmony import */ var _utility_components_sortable_task_list__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../utility-components/sortable-task-list */ "./src/components/utility-components/sortable-task-list.tsx");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/es/index.js");
/* harmony import */ var _logic_task_order__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../logic/task-order */ "./src/components/course-builder-ks/logic/task-order.ts");







var LearningTasksWithCommonGoals = function (_a) {
    var school = _a.school, repo = _a.repo, content = _a.content, draftId = _a.draftId, editMode = _a.editMode, course = _a.course, courseTab = _a.courseTab, learningGoals = _a.learningGoals, block = _a.block;
    var tasks = Object(_logic_task_order__WEBPACK_IMPORTED_MODULE_6__["getSortedTasks"])(content);
    var subjectToTasksLookup = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["arrayToLookup"])(tasks, function (t) { return t.subject || ""; });
    var subject = course.type === 'step-course' ?
        course.subject :
        courseTab.subject;
    if (subject && !subjectToTasksLookup[subject.subjectName]) {
        // Make sure we have at least one subject heading if task list is empty:
        subjectToTasksLookup[subject.subjectName] = [];
    }
    // TODO: Kolla hr och i learning-tasks-with-separate-goals.
    //  * Behvs subject-lookup?
    //  * Kan vi bryta vy-varianten frn edit varianten? (i bda fallen?)
    // Sedan:
    //  * Implementera edit varianterna. Lgg till.
    //  * Implementera sortering funktionalitet i SortableTaskList.
    //  * I all vyer av tasks (subject planner + courseviewer): 
    //    * G igenom alla task i den ordningen dom redan r i
    //    * 
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, Object.keys(subjectToTasksLookup).map(function (subject) {
        var taskList = subjectToTasksLookup[subject];
        var learningModuleTasks = taskList.map(function (task) { return ({
            id: task.id,
            name: task.name,
            url: editMode ?
                "#/" + school + "/courses/" + course.id + "/tabs/" + courseTab.id + "/contents/" + content.id + "/tasks/" + task.id + "/drafts/" + draftId + "/edit" :
                draftId ?
                    "#/" + school + "/courses/" + course.id + "/tabs/" + courseTab.id + "/contents/" + content.id + "/tasks/" + task.id + "/drafts/" + draftId :
                    "#/" + school + "/courses/" + course.id + "/tabs/" + courseTab.id + "/tasks/" + task.id,
            courseName: course.name,
            learningGoal: subject,
            step: courseTab.type === 'step-course-tab' ? courseTab.stepNo : undefined,
            task: task,
            courseInfo: {
                school: school,
                course: course.id,
                tab: courseTab.id
            }
        }); });
        function linkToTask(task) {
            return "/" + school + "/courses/" + course.id + "/tabs/" + courseTab.id + "/contents/" + content.id + "/tasks/" + task.id + "/drafts/" + draftId + "/edit";
        }
        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { key: subject },
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h5", null, subject),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("ul", null, learningGoals.map(function (lg) { return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("li", { key: lg }, lg); })),
            !editMode ?
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_course_viewer_subcomponents_task_list__WEBPACK_IMPORTED_MODULE_2__["TaskList"], { learningTasks: learningModuleTasks }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_utility_components_sortable_task_list__WEBPACK_IMPORTED_MODULE_4__["SortableTaskList"], { taskMetas: learningModuleTasks.map(function (_a) {
                        var task = _a.task;
                        return ({ task: task, isTaskOwner: true });
                    }), renderEditLink: function (_a) {
                        var task = _a.task;
                        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_5__["Link"], { to: linkToTask(task), className: "editItem" }),
                            "\u00A0");
                    }, renderLink: function (_a) {
                        var task = _a.task;
                        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_5__["Link"], { to: linkToTask(task) }, task.name);
                    }, onSort: function (source, target, placement) {
                        var updatedOrder = Object(_logic_task_order__WEBPACK_IMPORTED_MODULE_6__["computeUpdatedOrder"])(content.tasks, content.taskOrder, source, target, placement, { appendLeftovers: true });
                        repo.courseContents.update(content, { taskOrder: updatedOrder });
                    } }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_add_task_button__WEBPACK_IMPORTED_MODULE_3__["AddTaskButton"], { branch: repo, content: content, course: course, school: school, draftId: draftId, tab: courseTab, block: block, learningGoal: subject }))));
    }));
};


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/learning-tasks-with-separate-goals.tsx":
/*!***************************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/learning-tasks-with-separate-goals.tsx ***!
  \***************************************************************************************************************/
/*! exports provided: LearningTasksWithSeparateGoals */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LearningTasksWithSeparateGoals", function() { return LearningTasksWithSeparateGoals; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _course_viewer_subcomponents_task_list__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../course-viewer/subcomponents/task-list */ "./src/components/course-viewer/subcomponents/task-list.tsx");
/* harmony import */ var _add_task_button__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./add-task-button */ "./src/components/course-builder-ks/viewer-editor/course-contents/add-task-button.tsx");
/* harmony import */ var _utility_components_sortable_task_list__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../utility-components/sortable-task-list */ "./src/components/utility-components/sortable-task-list.tsx");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/es/index.js");
/* harmony import */ var _logic_task_order__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../logic/task-order */ "./src/components/course-builder-ks/logic/task-order.ts");








var LearningTasksWithSeparateGoals = function (_a) {
    var school = _a.school, repo = _a.repo, content = _a.content, draftId = _a.draftId, editMode = _a.editMode, course = _a.course, courseTab = _a.courseTab, learningGoals = _a.learningGoals, block = _a.block;
    var tasks = Object(_logic_task_order__WEBPACK_IMPORTED_MODULE_7__["getSortedTasks"])(content);
    var cathegorizedTasks = {};
    var goalToTasksLookup = learningGoals.reduce(function (res, goal) {
        res[goal] = tasks.filter(function (task) {
            if (task.learningGoal && task.learningGoal.split('\n')
                .map(function (line) { return line.trim().toLowerCase(); })
                .includes(goal.toLowerCase())) {
                cathegorizedTasks[task.id] = true;
                return true;
            }
        });
        return res;
    }, {});
    var uncathegorizedTasks = tasks.filter(function (t) { return !cathegorizedTasks[t.id]; });
    if (courseTab.tabClass === 'mission-tab' || tasks.length === 0) {
        goalToTasksLookup[''] = uncathegorizedTasks;
    }
    else if (uncathegorizedTasks.length > 0) {
        goalToTasksLookup[Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00D6vergripande"], ["\u00D6vergripande"])))] = uncathegorizedTasks;
    }
    function linkToTask(task) {
        return "/" + school + "/courses/" + course.id + "/tabs/" + courseTab.id + "/contents/" + content.id + "/tasks/" + task.id + "/drafts/" + draftId + "/edit";
    }
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null, Object.keys(goalToTasksLookup).map(function (goal) {
        var taskList = goalToTasksLookup[goal];
        var learningModuleTasks = taskList.map(function (task) { return ({
            id: task.id,
            name: task.name,
            url: editMode ?
                "#/" + school + "/courses/" + course.id + "/tabs/" + courseTab.id + "/contents/" + content.id + "/tasks/" + task.id + "/drafts/" + draftId + "/edit" :
                draftId ?
                    "#/" + school + "/courses/" + course.id + "/tabs/" + courseTab.id + "/contents/" + content.id + "/tasks/" + task.id + "/drafts/" + draftId :
                    "#/" + school + "/courses/" + course.id + "/tabs/" + courseTab.id + "/tasks/" + task.id,
            courseName: course.name,
            learningGoal: courseTab.tabClass === 'mission-tab' ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppdrag"], ["Uppdrag"]))) : goal,
            step: courseTab.type === 'step-course-tab' ? courseTab.stepNo : undefined,
            task: task,
            courseInfo: {
                school: school,
                course: course.id,
                tab: courseTab.id
            }
        }); });
        return (react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { key: goal },
            goal && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h4", null, goal),
            !editMode ?
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_viewer_subcomponents_task_list__WEBPACK_IMPORTED_MODULE_3__["TaskList"], { learningTasks: learningModuleTasks }) :
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_sortable_task_list__WEBPACK_IMPORTED_MODULE_5__["SortableTaskList"], { taskMetas: learningModuleTasks.map(function (_a) {
                            var task = _a.task;
                            return ({ task: task, isTaskOwner: true });
                        }), renderEditLink: function (_a) {
                            var task = _a.task;
                            return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_6__["Link"], { to: linkToTask(task), className: "editItem" }),
                                "\u00A0");
                        }, renderLink: function (_a) {
                            var task = _a.task;
                            return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_6__["Link"], { to: linkToTask(task) }, task.name);
                        }, onSort: function (source, target, placement) {
                            var updatedOrder = Object(_logic_task_order__WEBPACK_IMPORTED_MODULE_7__["computeUpdatedOrder"])(content.tasks, content.taskOrder, source, target, placement, { appendLeftovers: true });
                            repo.courseContents.update(content, { taskOrder: updatedOrder });
                        } }),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_add_task_button__WEBPACK_IMPORTED_MODULE_4__["AddTaskButton"], { branch: repo, content: content, course: course, school: school, draftId: draftId, tab: courseTab, block: block, learningGoal: goal }))));
    }));
};
var templateObject_1, templateObject_2;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/resource-list-view.tsx":
/*!***********************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/resource-list-view.tsx ***!
  \***********************************************************************************************/
/*! exports provided: ResourceListView */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ResourceListView", function() { return ResourceListView; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utility_components_live_query_view__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../utility-components/live-query-view */ "./src/components/utility-components/live-query-view.tsx");


var ResourceListView = Object(_utility_components_live_query_view__WEBPACK_IMPORTED_MODULE_1__["liveQueryView"])(function (_a) {
    var content = _a.content;
    return content.map(function (contentResources) {
        var resourceList = contentResources;
        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, resourceList && resourceList.resources.length > 0 && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "ked_boxed kpMenu" },
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h2", null, "Resurser"),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("hr", null),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "taskContainer" }, resourceList.resources.map(function (res) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("a", { href: res.url }, res.name)));
            }))));
    });
});


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/resource-list.tsx":
/*!******************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/resource-list.tsx ***!
  \******************************************************************************************/
/*! exports provided: ResourceListContentBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ResourceListContentBox", function() { return ResourceListContentBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");
/* harmony import */ var _common_dialog_context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/dialog-context */ "./src/components/course-builder-ks/common/dialog-context.ts");
/* harmony import */ var _course_builder_modal_pages_edit_resource__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../course-builder/modal-pages/edit-resource */ "./src/components/course-builder/modal-pages/edit-resource.tsx");






var ResourceListContentBox = function (_a) {
    var content = _a.content, editMode = _a.editMode, repo = _a.repo;
    var resources = content.resources;
    var context = Object(react__WEBPACK_IMPORTED_MODULE_1__["useContext"])(_common_dialog_context__WEBPACK_IMPORTED_MODULE_4__["DialogsContext"]);
    return editMode && (!content.locked || Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_3__["isKedStaff"])()) ?
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "ked_boxed" },
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h4", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Resurser"], ["Resurser"])))),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "taskContainer" }, resources.map(function (resource, idx) {
                return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "align-horizontal", key: idx },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("a", { className: "editItem", onClick: function () { return context.openDialog(react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_modal_pages_edit_resource__WEBPACK_IMPORTED_MODULE_5__["EditResource"], { title: "Edit resource", resource: resource, onSave: function (res) {
                                    resources[idx] = res;
                                    repo.courseContents.update(content, { resources: tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](resources) });
                                    context.closeDialog();
                                }, onDelete: function () {
                                    resources.splice(idx, 1);
                                    repo.courseContents.update(content, { resources: tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](resources) });
                                    context.closeDialog();
                                } })); } }),
                        "\u00A0"),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "align-horizontal" },
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" },
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("a", { href: resource.url }, resource.name)))));
            })),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("a", { className: "btn", onClick: function () { return context.openDialog(react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_modal_pages_edit_resource__WEBPACK_IMPORTED_MODULE_5__["EditResource"], { title: "Resurs", onSave: function (resource) { repo.courseContents.update(content, { resources: tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](resources, [resource]) }); context.closeDialog(); } })); } },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-plus", "aria-hidden": "true" }), Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4gg till resurs"], ["L\u00E4gg till resurs"]))))) : react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null);
};
var templateObject_1, templateObject_2;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/rich-text.tsx":
/*!**************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/rich-text.tsx ***!
  \**************************************************************************************/
/*! exports provided: RichTextContentBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RichTextContentBox", function() { return RichTextContentBox; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utility_components_wysiwyg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../utility-components/wysiwyg */ "./src/components/utility-components/wysiwyg/index.tsx");
/* harmony import */ var _utility_components_wysiwyg_actions_sv__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utility-components/wysiwyg/actions-sv */ "./src/components/utility-components/wysiwyg/actions-sv.ts");
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");




var RichTextContentBox = function (_a) {
    var content = _a.content, repo = _a.repo, editMode = _a.editMode, reportNumChars = _a.reportNumChars, maxChars = _a.maxChars;
    return editMode ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null,
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_utility_components_wysiwyg__WEBPACK_IMPORTED_MODULE_1__["Wysiwyg"], { html: content.html, defaultActions: _utility_components_wysiwyg_actions_sv__WEBPACK_IMPORTED_MODULE_2__["default"], readOnly: !editMode || (content.locked && !Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_3__["isKedStaff"])()), reportNumChars: reportNumChars, maxChars: maxChars, actions: [
                "bold",
                "italic",
                "underline",
                "strikethrough",
                "heading2",
                "heading3",
                "olist",
                "ulist",
                "line",
                "link",
                "image"
            ], onChange: editMode && (function (html) { return repo.courseContents.update(content, { html: html }); }) })) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null,
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "rich-text-readonly", dangerouslySetInnerHTML: { __html: content.html } }));
};


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/word-bank-content-box.tsx":
/*!**************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/word-bank-content-box.tsx ***!
  \**************************************************************************************************/
/*! exports provided: WordBankContentBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WordBankContentBox", function() { return WordBankContentBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var _word_bank_content_settings__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./word-bank-content-settings */ "./src/components/course-builder-ks/viewer-editor/course-contents/word-bank-content-settings.tsx");
/* harmony import */ var _course_builder_sub_components_ellipsis_loader__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../course-builder/sub-components/ellipsis-loader */ "./src/components/course-builder/sub-components/ellipsis-loader.tsx");
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");






function WordBankContentBox(_a) {
    var repo = _a.repo, content = _a.content, siblingWordBanks = _a.siblingWordBanks, editMode = _a.editMode, course = _a.course, courseTab = _a.courseTab;
    var selectedWordBank = content.selectedWordBank;
    var subjectName = course.subject.subjectName;
    var stepNo = courseTab.stepNo;
    var iframeSrc = selectedWordBank && _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_2__["cfg"].KED_WORDBANKS_URL + "?preview=true&subject=" + subjectName + "&step=" + stepNo + "&list=" + selectedWordBank.key;
    var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(200), 2), iframeHeight = _b[0], setIframeHeight = _b[1];
    var iframeRef = Object(react__WEBPACK_IMPORTED_MODULE_1__["useRef"])();
    var wordBanksAlreadyAdded = siblingWordBanks.map(function (c) { return c.selectedWordBank && c.selectedWordBank.key; })
        .filter(function (key) { return !!key; });
    Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function () { return setIframeHeight(200); }, [selectedWordBank && selectedWordBank.key]); // Reset iframe height whenever selected word bank changes and let onload fix it.
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
        editMode && (!content.locked || Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_5__["isKedStaff"])()) && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Suspense, { fallback: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_sub_components_ellipsis_loader__WEBPACK_IMPORTED_MODULE_4__["EllipsisLoader"], null) },
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_word_bank_content_settings__WEBPACK_IMPORTED_MODULE_3__["WordBankContentSettings"], tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, { subjectName: subjectName, stepNo: stepNo, wordBanksAlreadyAdded: wordBanksAlreadyAdded }, { selectedWordBank: selectedWordBank, onChange: function (_a) {
                    var name = _a.name, key = _a.key;
                    repo.courseContents.update(content, { selectedWordBank: { name: name, key: key } });
                } }))),
        selectedWordBank &&
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("iframe", { ref: iframeRef, scrolling: "no", frameBorder: "0", style: {
                    width: "100%",
                    height: iframeHeight,
                    padding: 0,
                    margin: 0
                }, src: iframeSrc, onLoad: function () {
                    setIframeHeight(iframeRef.current.contentWindow.document.body.scrollHeight);
                } }));
}


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/word-bank-content-settings.tsx":
/*!*******************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/word-bank-content-settings.tsx ***!
  \*******************************************************************************************************/
/*! exports provided: WordBankContentSettings */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WordBankContentSettings", function() { return WordBankContentSettings; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var fetch_suspense__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! fetch-suspense */ "./node_modules/fetch-suspense/fetch-suspense.js");
/* harmony import */ var fetch_suspense__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(fetch_suspense__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var react_select__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-select */ "./node_modules/react-select/dist/react-select.esm.js");






function WordBankContentSettings(_a) {
    var subjectName = _a.subjectName, stepNo = _a.stepNo, selectedWordBank = _a.selectedWordBank, wordBanksAlreadyAdded = _a.wordBanksAlreadyAdded, onChange = _a.onChange;
    var apiUrl = _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_2__["cfg"].KED_ENUM_WORDBANKS_URL + "?sv.contenttype=application/json&subject=" + subjectName + "&step=" + stepNo;
    var availableWordBanks = fetch_suspense__WEBPACK_IMPORTED_MODULE_3___default()(apiUrl);
    // Filter out word banks that was already added to the same tab
    availableWordBanks = availableWordBanks.filter(function (_a) {
        var order = _a.order;
        return (selectedWordBank && order === selectedWordBank.key) ||
            !wordBanksAlreadyAdded ||
            !wordBanksAlreadyAdded.includes(order);
    });
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h3", null, selectedWordBank ? selectedWordBank.name : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["V\u00E4lj ordbank"], ["V\u00E4lj ordbank"])))),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_select__WEBPACK_IMPORTED_MODULE_5__["default"], { isMulti: false, placeholder: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["V\u00E4lj bland ordbanker f\u00F6r ", ", steg ", ""], ["V\u00E4lj bland ordbanker f\u00F6r ", ", steg ", ""])), subjectName, stepNo), noOptionsMessage: function () { return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Kunde inte hitta tillg\u00E4ngliga ordbanker f\u00F6r ", ", steg ", ""], ["Kunde inte hitta tillg\u00E4ngliga ordbanker f\u00F6r ", ", steg ", ""])), subjectName, stepNo); }, options: availableWordBanks.map(function (_a) {
                var name = _a.name, id = _a.id, order = _a.order, url = _a.url;
                return ({ label: name, value: order });
            }), value: selectedWordBank && { label: selectedWordBank.name, value: selectedWordBank.key }, onChange: function (option) { return onChange({ name: option.label, key: option.value }); } }));
}
var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-tab-area.tsx":
/*!****************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-tab-area.tsx ***!
  \****************************************************************************/
/*! exports provided: CourseTabArea */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CourseTabArea", function() { return CourseTabArea; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_live_query_view__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utility-components/live-query-view */ "./src/components/utility-components/live-query-view.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _add_content_button__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./add-content-button */ "./src/components/course-builder-ks/viewer-editor/add-content-button.tsx");
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");
/* harmony import */ var _tab_settings__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./tab-settings */ "./src/components/course-builder-ks/viewer-editor/tab-settings.tsx");
/* harmony import */ var _course_tab_content_box__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./course-tab-content-box */ "./src/components/course-builder-ks/viewer-editor/course-tab-content-box.tsx");
/* harmony import */ var _tab_settings_admin__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./tab-settings-admin */ "./src/components/course-builder-ks/viewer-editor/tab-settings-admin.tsx");









var CourseTabArea = Object(_utility_components_live_query_view__WEBPACK_IMPORTED_MODULE_2__["liveQueryView"])(function (_a) {
    var course = _a.course, branch = _a.branch, block = _a.block, tab = _a.tab, editMode = _a.editMode, lazyContents = _a.lazyContents, school = _a.school, draftId = _a.draftId;
    return lazyContents.map(function (contents) {
        if (!tab) {
            if (editMode)
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Denna kurs saknar inneh\u00E5ll. Skapa ny flik genom knappen ovan"], ["Denna kurs saknar inneh\u00E5ll. Skapa ny flik genom knappen ovan"]))));
            else
                return Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_5__["isKedStaff"])() ?
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Denna kurs saknar inneh\u00E5ll. V\u00E4lj Redigera knappen f\u00F6r att l\u00E4gga till flikar."], ["Denna kurs saknar inneh\u00E5ll. V\u00E4lj Redigera knappen f\u00F6r att l\u00E4gga till flikar."])))) :
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Denna kurs saknar inneh\u00E5ll."], ["Denna kurs saknar inneh\u00E5ll."]))));
        }
        contents = contents.slice().sort(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["compareProp"])("order"));
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
            editMode ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_5__["isKedStaff"])() || !tab.locked ?
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_tab_settings__WEBPACK_IMPORTED_MODULE_6__["TabSettings"], { course: course, tab: tab, repo: branch }) :
                    null,
                Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_5__["isKedStaff"])() ?
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_tab_settings_admin__WEBPACK_IMPORTED_MODULE_8__["TabSettingsAdmin"], { course: course, tab: tab, repo: branch, block: block }) :
                    null) : null,
            contents.map(function (content, contentOrderIndex) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_tab_content_box__WEBPACK_IMPORTED_MODULE_7__["CourseTabContentBox"], { key: content.id, content: content, branch: branch, contentOrderIndex: contentOrderIndex, contents: contents, course: course, draftId: draftId, editMode: editMode, school: school, block: block, tab: tab }); }),
            !!editMode && (Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_5__["isKedStaff"])() || !tab.locked) && react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                tab.tabClass === 'word-bank-tab' &&
                    // [ Add Word Bank ] button
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_content_button__WEBPACK_IMPORTED_MODULE_4__["AddContentButton"], { type: "word-bank", tab: tab, branch: branch, course: course }),
                tab.tabClass !== 'word-bank-tab' &&
                    (tab.tabClass === 'mission-tab' || tab.tabClass === 'subject-tab' || course.type === 'step-course') &&
                    !contents.some(function (c) { return c.type === 'learning-goals'; }) &&
                    // [ Add Learning Goals ] button
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_content_button__WEBPACK_IMPORTED_MODULE_4__["AddContentButton"], { type: "learning-goals", tab: tab, branch: branch, course: course }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_content_button__WEBPACK_IMPORTED_MODULE_4__["AddContentButton"], { type: "rich-text", tab: tab, branch: branch, course: course }),
                contents.filter(function (c) { return c.type == "resource-list"; }).length == 0 &&
                    // [ Add Resource ] button
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_content_button__WEBPACK_IMPORTED_MODULE_4__["AddContentButton"], { type: "resource-list", tab: tab, branch: branch, course: course }),
                tab.tabClass === 'intro-tab' || tab.tabClass === 'run-up-tab' &&
                    // [ Add Embedded HTML ] button
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_content_button__WEBPACK_IMPORTED_MODULE_4__["AddContentButton"], { type: "embedded-html", tab: tab, branch: branch, course: course })));
    });
});
var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-tab-content-box.tsx":
/*!***********************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-tab-content-box.tsx ***!
  \***********************************************************************************/
/*! exports provided: CourseTabContentBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CourseTabContentBox", function() { return CourseTabContentBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");
/* harmony import */ var _course_contents__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./course-contents */ "./src/components/course-builder-ks/viewer-editor/course-contents/index.ts");
/* harmony import */ var _utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utility-components/align-horizontal */ "./src/components/utility-components/align-horizontal.tsx");
/* harmony import */ var _utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utility-components/horizontal-item */ "./src/components/utility-components/horizontal-item.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _course_builder_sub_components_remove_item__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../course-builder/sub-components/remove-item */ "./src/components/course-builder/sub-components/remove-item.tsx");
/* harmony import */ var kedbackend_observable__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! kedbackend/observable */ "./kedbackend/observable.js");
/* harmony import */ var _utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../utility-components/lazy-content */ "./src/components/utility-components/lazy-content.tsx");
/* harmony import */ var _logic_change_sort_order__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../logic/change-sort-order */ "./src/components/course-builder-ks/logic/change-sort-order.ts");











var MAX_CHARS_IN_CONTENTS = 4000;
var CourseTabContentBox = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](CourseTabContentBox, _super);
    function CourseTabContentBox(props) {
        var _this = _super.call(this, props) || this;
        _this.numCharsObservable = new kedbackend_observable__WEBPACK_IMPORTED_MODULE_8__["Emitter"](0); // Dedicated state for a sub-part of the generated DOM (avoid infinite loop)
        _this.state = {
        //numChars: 0
        };
        return _this;
    }
    CourseTabContentBox.prototype.render = function () {
        var _a = this.props, editMode = _a.editMode, content = _a.content, branch = _a.branch, course = _a.course, tab = _a.tab, school = _a.school, draftId = _a.draftId, contentOrderIndex = _a.contentOrderIndex, contents = _a.contents, block = _a.block;
        var kedStaff = Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_2__["isKedStaff"])();
        //const { numChars } = this.state;
        var numCharsObservable = this.numCharsObservable;
        return !editMode || (content.locked && !kedStaff) ?
            //
            // Not edit mode:
            //
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_contents__WEBPACK_IMPORTED_MODULE_3__["CourseContentBox"], { key: content.id, repo: branch, content: content, siblingContents: contents, course: course, editMode: editMode, courseTab: tab, school: school, draftId: draftId, block: block }) :
            //
            // Edit mode:
            //
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { key: content.id, className: ["course-content-box", content.type !== 'learning-goals' && "ked_boxed"].filter(function (x) { return !!x; }).join(' '), style: { position: 'relative' } },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_4__["AlignHorizontal"], null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_5__["HorizontalItem"], null,
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", { className: "box-mini-label" }, _course_contents__WEBPACK_IMPORTED_MODULE_3__["COURSE_CONTENT_TYPES"][content.type])),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_5__["HorizontalItem"], null, kedStaff ?
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
                            "\u00A0",
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("input", { type: "checkbox", checked: !content.locked, onChange: function (ev) { return branch.courseContents.update(content, { locked: !ev.target.checked }); } }), Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Till\u00E5t redigering"], ["Till\u00E5t redigering"]))),
                            !content.locked ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
                                "\u00A0",
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("input", { type: "checkbox", checked: !content.lockDelete, onChange: function (ev) { return branch.courseContents.update(content, { lockDelete: !ev.target.checked }); } }), Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Till\u00E5t d\u00F6lja rutan"], ["Till\u00E5t d\u00F6lja rutan"])))) : null) : null)),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_contents__WEBPACK_IMPORTED_MODULE_3__["CourseContentBox"], { repo: branch, content: content, siblingContents: contents, course: course, editMode: true, school: school, draftId: draftId, courseTab: tab, maxChars: MAX_CHARS_IN_CONTENTS, reportNumChars: function (numChars) {
                        // Avoid setting state because it turns out to be infinite loop.
                        // (setState() leads to re-render of this whole component, leading to
                        // re-render of CourseContentBox, that calls reportNumChars etc...)
                        // Instead we communicate this particular state to a dedicated Observable
                        // that will only update the particular component that is affected by it.
                        numCharsObservable.dispatch(numChars);
                        //this.setState({ numChars });
                    }, block: block }),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { style: { position: 'absolute', top: 0, right: 0 } },
                    (kedStaff || !content.locked) && contentOrderIndex > 0 && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("span", null,
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-arrow-circle-up selectable", "aria-hidden": "true", onClick: function () {
                                var newOrder = Object(_logic_change_sort_order__WEBPACK_IMPORTED_MODULE_10__["reorder"])(contents, content.id, contents[contentOrderIndex - 1].id, "before");
                                if (newOrder) {
                                    branch.courseContents.update(content, { order: newOrder });
                                }
                            } }),
                        " "),
                    (kedStaff || !content.locked) && contentOrderIndex < contents.length - 1 && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("span", null,
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-arrow-circle-down selectable", "aria-hidden": "true", onClick: function () {
                                var newOrder = Object(_logic_change_sort_order__WEBPACK_IMPORTED_MODULE_10__["reorder"])(contents, content.id, contents[contentOrderIndex + 1].id, "after");
                                if (newOrder) {
                                    branch.courseContents.update(content, { order: newOrder });
                                }
                            } }),
                        " "),
                    kedStaff || !content.lockDelete ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_sub_components_remove_item__WEBPACK_IMPORTED_MODULE_7__["RemoveItem"], { title: school === 'standard' ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ta bort inneh\u00E5llsrutan"], ["Ta bort inneh\u00E5llsrutan"]))) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["D\u00F6lj inneh\u00E5llsrutan"], ["D\u00F6lj inneh\u00E5llsrutan"]))), style: { display: 'inline-block' }, onClick: function () { return confirm(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ta bort inneh\u00E5ll?"], ["Ta bort inneh\u00E5ll?"])))) && branch.courseTabs.removeRelated(tab.id, "contents", content); } })
                        : null),
                content.type === 'rich-text' ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_9__["LazyContent"], null, numCharsObservable.map(function (numChars) {
                    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: ["char-counter-bottom"].concat(numChars >= MAX_CHARS_IN_CONTENTS ? "overflowed" : []).join(' ') }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_6 || (templateObject_6 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Texten inneh\u00E5ller ", " av max ", " till\u00E5tna tecken"], ["Texten inneh\u00E5ller ", " av max ", " till\u00E5tna tecken"])), numChars, MAX_CHARS_IN_CONTENTS));
                })) :
                    undefined);
    };
    return CourseTabContentBox;
}(react__WEBPACK_IMPORTED_MODULE_1___default.a.Component));

var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-tab/tab-classes.ts":
/*!**********************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-tab/tab-classes.ts ***!
  \**********************************************************************************/
/*! exports provided: CourseTabClasses, TabTypesPerCourseType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CourseTabClasses", function() { return CourseTabClasses; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TabTypesPerCourseType", function() { return TabTypesPerCourseType; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");


var CourseTabClasses = {
    "intro-tab": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Introduktionsflik"], ["Introduktionsflik"]))),
    "run-up-tab": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Upptaktsflik"], ["Upptaktsflik"]))),
    "subject-tab": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4mnesflik"], ["\u00C4mnesflik"]))),
    "mission-tab": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppdragsflik"], ["Uppdragsflik"]))),
    "content-tab": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Generell flik"], ["Generell flik"]))),
    "teacher-tab": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_6 || (templateObject_6 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4rarsida"], ["L\u00E4rarsida"]))),
    "word-bank-tab": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_7 || (templateObject_7 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ordbank"], ["Ordbank"])))
};
var TabTypesPerCourseType = {
    "step-course": [
        "content-tab",
        "intro-tab",
        "teacher-tab",
        "word-bank-tab"
    ],
    "theme-course": [
        "content-tab",
        "run-up-tab",
        "subject-tab",
        "mission-tab",
        "teacher-tab"
    ]
};
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-viewer-page.tsx":
/*!*******************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-viewer-page.tsx ***!
  \*******************************************************************************/
/*! exports provided: CourseViewerPage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CourseViewerPage", function() { return CourseViewerPage; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _common_banner__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/banner */ "./src/components/course-builder-ks/common/banner.tsx");
/* harmony import */ var kedbackend_observable__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! kedbackend/observable */ "./kedbackend/observable.js");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var _access_control__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../access-control */ "./src/access-control/index.ts");
/* harmony import */ var _add_tab_button__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./add-tab-button */ "./src/components/course-builder-ks/viewer-editor/add-tab-button.tsx");
/* harmony import */ var react_router__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react-router */ "./node_modules/react-router/es/index.js");
/* harmony import */ var _course_area__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./course-area */ "./src/components/course-builder-ks/viewer-editor/course-area.tsx");
/* harmony import */ var _task_task_editor__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./task/task-editor */ "./src/components/course-builder-ks/viewer-editor/task/task-editor.tsx");
/* harmony import */ var _clickable_school_div__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./clickable-school-div */ "./src/components/course-builder-ks/viewer-editor/clickable-school-div.tsx");
/* harmony import */ var _logic_is_employee__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../logic/is-employee */ "./src/components/course-builder-ks/logic/is-employee.ts");
/* harmony import */ var _task_viewer_task_viewer_page__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./task/viewer/task-viewer-page */ "./src/components/course-builder-ks/viewer-editor/task/viewer/task-viewer-page.tsx");
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");
/* harmony import */ var _utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../utility-components/lazy-content */ "./src/components/utility-components/lazy-content.tsx");
/* harmony import */ var _logic_change_sort_order__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../logic/change-sort-order */ "./src/components/course-builder-ks/logic/change-sort-order.ts");


















var CourseViewerPage = Object(react_router__WEBPACK_IMPORTED_MODULE_9__["withRouter"])((function (_a) {
    var school = _a.school, courseId = _a.courseId, activeTab = _a.activeTab, draftId = _a.draftId, editMode = _a.editMode, history = _a.history, contentId = _a.contentId, taskId = _a.taskId;
    var repo = editMode ?
        _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"] : // In edit mode, do not optimize cache, as it prohibits collaboration
        _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].optimizeCache();
    var schoolObservable = repo.schools.name(school).single();
    var branchObservable = draftId ? // In edit mode, draftId is defined.
        new kedbackend_observable__WEBPACK_IMPORTED_MODULE_4__["Emitter"](repo.branch(draftId)) :
        schoolObservable.map(function (school) { return repo.branch(school.officialBranchId); });
    var courseObservable = branchObservable.switchMap(function (branch) {
        return branch.courseInstances.include("blocks", "tabs").id(courseId);
    });
    var intermediateObservable = courseObservable.combineLatest(schoolObservable)
        .switchMap(function (_a) {
        var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](_a, 2), course = _b[0], schoolEntity = _b[1];
        var branch = draftId ?
            repo.branch(draftId) :
            repo.branch(schoolEntity.officialBranchId);
        if (course.type === 'theme-course') {
            return new kedbackend_observable__WEBPACK_IMPORTED_MODULE_4__["Emitter"]({ course: course, tabs: course.tabs, branch: branch, block: null, schoolEntity: schoolEntity });
        }
        if (activeTab && activeTab !== '$')
            return branch.courseBlocks.hasEdgesTo([activeTab]).include("tabs").toValue()
                .map(function (_a) {
                var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](_a, 1), block = _b[0];
                return ({
                    course: course,
                    tabs: block.tabs,
                    branch: branch,
                    block: block || course.blocks[0],
                    schoolEntity: schoolEntity
                });
            });
        if (course.blocks.length > 0)
            return branch.courseBlocks.include("tabs").id(course.blocks[0].id)
                .map(function (block) { return ({
                course: course,
                tabs: block.tabs,
                branch: branch,
                block: block,
                schoolEntity: schoolEntity
            }); });
        return new kedbackend_observable__WEBPACK_IMPORTED_MODULE_4__["Emitter"]({ course: course, tabs: [], branch: branch, block: null, schoolEntity: schoolEntity });
    });
    var bannerPropsObservable = intermediateObservable
        .map(function (_a) {
        var course = _a.course, tabs = _a.tabs, branch = _a.branch, block = _a.block, schoolEntity = _a.schoolEntity;
        return getCourseBannerProps(tabs, editMode, school, schoolEntity, draftId, course, branch, activeTab, block);
    });
    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_common_banner__WEBPACK_IMPORTED_MODULE_3__["LazyBanner"], { lazyProps: bannerPropsObservable }),
        taskId ? editMode ?
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_16__["LazyContent"], null, intermediateObservable.map(function (_a) {
                var branch = _a.branch, block = _a.block, course = _a.course, tabs = _a.tabs;
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_task_task_editor__WEBPACK_IMPORTED_MODULE_11__["TaskEditor"], { school: school, course: course, draftId: draftId, branch: branch, activeTab: activeTab, contentId: contentId, taskId: taskId, blockId: block && block.id });
            })) :
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_task_viewer_task_viewer_page__WEBPACK_IMPORTED_MODULE_14__["TaskViewerPage"], { school: school, courseId: courseId, lazyRepo: branchObservable, activeTab: activeTab, taskId: taskId, contentId: contentId, draftId: draftId }) :
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_16__["LazyContent"], null, intermediateObservable.map(function (_a) {
                var branch = _a.branch, block = _a.block, course = _a.course, tabs = _a.tabs;
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_area__WEBPACK_IMPORTED_MODULE_10__["CourseArea"], { school: school, courseId: courseId, draftId: draftId, course: course, branch: branch, tabs: tabs, activeTab: activeTab, editMode: editMode, block: block });
            })));
}));
function getCourseBannerProps(tabs, editMode, school, schoolEntity, draftId, course, branch, activeTab, block) {
    var _this = this;
    var kedStaff = Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_15__["isKedStaff"])();
    tabs.sort(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["compareProps"])(["stepNo", "order"]));
    var courseId = course.id;
    var activeTabObj = tabs.filter(function (tab) { return tab.id === activeTab; })[0] || tabs[0];
    if (course.type === 'step-course' && activeTabObj && activeTabObj.type === 'step-course-tab') {
        tabs = tabs.filter(function (tab) { return tab.type === 'step-course-tab' && tab.stepNo === activeTabObj.stepNo; });
    }
    var bannerTabs = (Object(_logic_is_employee__WEBPACK_IMPORTED_MODULE_13__["isEmployee"])() ? tabs : tabs.filter(function (tab) { return tab.tabClass !== 'teacher-tab'; }))
        .sort(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["compareProp"])("order")).map(function (tab) { return ({
        key: tab.id,
        name: tab.tabTitle,
        draggable: true,
        link: editMode ?
            "/" + school + "/courses/" + courseId + "/tabs/" + tab.id + (draftId ? "/drafts/" + draftId : '') + "/edit" :
            "/" + school + "/courses/" + courseId + "/tabs/" + tab.id + (draftId ? "/drafts/" + draftId : '')
    }); });
    var buttons = [];
    if (editMode && (kedStaff || course.allowAddTabs)) {
        if (course.type === 'theme-course') {
            buttons.push(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_tab_button__WEBPACK_IMPORTED_MODULE_8__["AddTabButton"], { type: "theme-course-tab", key: "$addTab", school: school, course: course, branch: branch, draftId: draftId }));
        }
        else {
            var stepNo = activeTabObj ?
                activeTabObj.stepNo :
                block.stepNumbers[0] || 1;
            buttons.push(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_tab_button__WEBPACK_IMPORTED_MODULE_8__["AddTabButton"], { type: "step-course-tab", key: "$addTab", school: school, course: course, branch: branch, draftId: draftId, block: block, stepNo: stepNo }));
        }
    }
    if (kedStaff) {
        // Remove the "role" attribute from query, as we want to stop impersonating an Employee when using the admin interface
        buttons.push(react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: Object(_access_control__WEBPACK_IMPORTED_MODULE_7__["preserveImpersonationQuery"])(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_6__["default"].KED_SUBJECT_PLANNER_ADMIN_URL, { role: undefined }) +
                ("#/admin/courses/" + courseId + "/settings"), key: "$settings", title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Inst\u00E4llningar"], ["Inst\u00E4llningar"]))) },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-cog", "aria-hidden": true }),
            "\u00A0"));
    }
    var bannerProps = {
        title: course.name,
        backgroundImage: null,
        tabs: bannerTabs,
        cornerBox: react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_clickable_school_div__WEBPACK_IMPORTED_MODULE_12__["ClickableSchoolDiv"], { school: school, draftId: draftId, displayName: schoolEntity.displayName || school }),
        buttons: buttons,
        activeTab: activeTab || (bannerTabs[0] && bannerTabs[0].key),
        blocks: course.blocks && course.blocks.sort(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["compareProp"])("blockNo")).map(function (_a) {
            var blockId = _a.id, name = _a.name, stepNumbers = _a.stepNumbers;
            return ({
                id: blockId,
                name: name,
                steps: stepNumbers.map(function (stepNo) { return ({
                    isActive: activeTabObj && stepNo === activeTabObj.stepNo,
                    stepNo: stepNo,
                    link: "/" + school + "/courses/" + courseId + "/blocks/" + blockId + "/steps/" + stepNo
                }); })
            });
        }),
        sortableTabs: editMode && (kedStaff || course.allowReorderTabs),
        onTabDrop: function (source, target, placement) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
            var newOrder, sourceTab;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                newOrder = Object(_logic_change_sort_order__WEBPACK_IMPORTED_MODULE_17__["reorder"])(tabs, source, target, placement);
                if (newOrder) {
                    sourceTab = tabs.find(function (t) { return t.id === source; });
                    if (sourceTab) {
                        branch.courseTabs.update(sourceTab, { order: newOrder });
                    }
                }
                return [2 /*return*/];
            });
        }); }
    };
    return bannerProps;
}
var templateObject_1;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/editor-footer-buttons.tsx":
/*!**********************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/editor-footer-buttons.tsx ***!
  \**********************************************************************************/
/*! exports provided: EditorFooterButtons */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditorFooterButtons", function() { return EditorFooterButtons; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var react_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router */ "./node_modules/react-router/es/index.js");
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _logic_publish_course__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../logic/publish-course */ "./src/components/course-builder-ks/logic/publish-course.ts");
/* harmony import */ var _utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../utility-components/horizontal-item */ "./src/components/utility-components/horizontal-item.tsx");
/* harmony import */ var _utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../utility-components/align-horizontal */ "./src/components/utility-components/align-horizontal.tsx");
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");
var _this = undefined;









var EditorFooterButtons = Object(react_router__WEBPACK_IMPORTED_MODULE_3__["withRouter"])(function (_a) {
    var school = _a.school, course = _a.course, tab = _a.tab, activeTab = _a.activeTab, draftId = _a.draftId, history = _a.history, courseType = _a.courseType, blockId = _a.blockId;
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
        tab && (Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_8__["isKedStaff"])() || !tab.locked || course.allowRemoveTabs) ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "btn btn-warning pull-right", onClick: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                var draftRepo, courseTab, contents;
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            draftRepo = _globals_db__WEBPACK_IMPORTED_MODULE_4__["db"].branch(draftId);
                            return [4 /*yield*/, draftRepo.courseTabs
                                    .include("contents")
                                    .includeIdsOnly()
                                    .id(activeTab)
                                    .load()];
                        case 1:
                            courseTab = _a.sent();
                            return [4 /*yield*/, draftRepo.courseContents
                                    .include("tasks")
                                    .includeIdsOnly()
                                    .ids(courseTab.contents.map(function (_a) {
                                    var id = _a.id;
                                    return id;
                                }))
                                    .toValue().load()];
                        case 2:
                            contents = _a.sent();
                            if (Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_8__["isKedStaff"])() && school === 'standard') {
                                //
                                // Only remove related contents and tasks if we are deleting a physical tab here
                                //
                                contents.forEach(function (content) {
                                    content.tasks.forEach(function (task) {
                                        draftRepo.courseContents.removeRelated(content.id, "tasks", task);
                                    });
                                });
                                courseTab.contents.forEach(function (content) {
                                    draftRepo.courseTabs.removeRelated(courseTab.id, "contents", content);
                                });
                            }
                            if (courseType === 'theme-course') {
                                draftRepo.courseInstances.removeRelated(course.id, "tabs", courseTab);
                            }
                            else if (blockId) {
                                draftRepo.courseBlocks.removeRelated(blockId, "tabs", courseTab);
                            }
                            return [4 /*yield*/, _globals_db__WEBPACK_IMPORTED_MODULE_4__["db"].saveNow()];
                        case 3:
                            _a.sent();
                            history.push("/" + school + "/courses/" + course.id + "/tabs/$/drafts/" + draftId + "/edit");
                            return [2 /*return*/];
                    }
                });
            }); } },
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-trash", "aria-hidden": true }),
            "\u00A0", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ta bort fliken"], ["Ta bort fliken"])))) : null,
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_7__["AlignHorizontal"], null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_6__["HorizontalItem"], null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button", { className: "btn", onClick: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                                history.push("/" + school + "/courses/" + course.id + "/tabs/" + (activeTab || '$') + "/drafts/" + draftId);
                                return [2 /*return*/];
                            });
                        }); } },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-eye", "aria-hidden": true }),
                        "\u00A0", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["F\u00F6rhandsgranska"], ["F\u00F6rhandsgranska"]))))),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_6__["HorizontalItem"], null,
                    "\u00A0",
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button", { className: "btn", onClick: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                                history.push("/" + school + "/courses/" + course.id + "/history");
                                return [2 /*return*/];
                            });
                        }); } },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-history", "aria-hidden": true }),
                        "\u00A0", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Versionshistorik"], ["Versionshistorik"]))))),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_6__["HorizontalItem"], null,
                    "\u00A0",
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button", { className: "btn btn-warning", onClick: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                                switch (_a.label) {
                                    case 0: return [4 /*yield*/, Object(_logic_publish_course__WEBPACK_IMPORTED_MODULE_5__["publishCourse"])({
                                            school: school,
                                            course: course,
                                            draftRepo: _globals_db__WEBPACK_IMPORTED_MODULE_4__["db"].branch(draftId)
                                        })];
                                    case 1:
                                        _a.sent();
                                        return [4 /*yield*/, _globals_db__WEBPACK_IMPORTED_MODULE_4__["db"].saveNow()];
                                    case 2:
                                        _a.sent();
                                        history.push("/" + school + "/courses/" + course.id + "/tabs/" + (activeTab || '$'));
                                        return [2 /*return*/];
                                }
                            });
                        }); } },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-play", "aria-hidden": true }),
                        "\u00A0", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Publicera"], ["Publicera"]))))))),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button", { className: "btn", onClick: function () {
                return history.push("/" + school + "/courses/" + course.id + "/tabs/" + (activeTab || '$'));
            } },
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-arrow-left", "aria-hidden": true }),
            "\u00A0", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Avsluta redigering"], ["Avsluta redigering"])))));
});
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/index.tsx":
/*!******************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/index.tsx ***!
  \******************************************************************/
/*! exports provided: SubjectPlannerViewerApp */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SubjectPlannerViewerApp", function() { return SubjectPlannerViewerApp; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/es/index.js");
/* harmony import */ var _utils_error_success_feedback__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/error-success-feedback */ "./src/utils/error-success-feedback.tsx");
/* harmony import */ var _common_banner__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/banner */ "./src/components/course-builder-ks/common/banner.tsx");
/* harmony import */ var _utility_components_loading_indicator__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utility-components/loading-indicator */ "./src/components/utility-components/loading-indicator.tsx");
/* harmony import */ var _utility_components_live_query_view__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../utility-components/live-query-view */ "./src/components/utility-components/live-query-view.tsx");
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _course_viewer_page__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./course-viewer-page */ "./src/components/course-builder-ks/viewer-editor/course-viewer-page.tsx");
/* harmony import */ var _common_two_columns_page__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../common/two-columns-page */ "./src/components/course-builder-ks/common/two-columns-page.tsx");
/* harmony import */ var _weekplanner_weekplanner__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../weekplanner/weekplanner */ "./src/components/weekplanner/weekplanner.tsx");
/* harmony import */ var _list_courses__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./list-courses */ "./src/components/course-builder-ks/viewer-editor/list-courses/index.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var _redirect_to_step__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./redirect-to-step */ "./src/components/course-builder-ks/viewer-editor/redirect-to-step.tsx");
/* harmony import */ var _version_history__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./version-history */ "./src/components/course-builder-ks/viewer-editor/version-history/index.tsx");
/* harmony import */ var _utils_keep_session_alive__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../utils/keep-session-alive */ "./src/utils/keep-session-alive.ts");
/* harmony import */ var _common_dialog_content__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../common/dialog-content */ "./src/components/course-builder-ks/common/dialog-content.tsx");



















// Keep Session Alive
Object(_utils_keep_session_alive__WEBPACK_IMPORTED_MODULE_17__["keepSessionAlive"])();
var GetMySchool = Object(_utility_components_live_query_view__WEBPACK_IMPORTED_MODULE_6__["liveQueryView"])(function (_a) {
    var render = _a.render;
    return _globals_db__WEBPACK_IMPORTED_MODULE_7__["Schools"].mySchool.map(function (school) { return render(school); });
});
var SubjectPlannerViewerApp = Object(_common_dialog_content__WEBPACK_IMPORTED_MODULE_18__["setupDialogs"])(function () { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { onKeyDown: function (ev) {
        if (ev.which === 83 && (ev.ctrlKey || ev.metaKey)) { // CTRL-S
            ev.preventDefault();
            _globals_db__WEBPACK_IMPORTED_MODULE_7__["db"].saveNow().then(function () {
                /*// When saved, exit edit mode so that one can view the result as users see it.
                if (location.hash.endsWith('/edit')) {
                  location.hash = location.hash.substr(0, location.hash.length - '/edit'.length);
                }*/
            });
        }
    } },
    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["HashRouter"], null,
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], { path: "/", exact: true, render: function () { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Redirect"], { to: "/courses" }); } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], { path: "/courses", exact: true, render: function () { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_common_banner__WEBPACK_IMPORTED_MODULE_4__["Banner"], { title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_12__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Kurser"], ["Kurser"]))), tabs: [], activeTab: "$" }),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_common_two_columns_page__WEBPACK_IMPORTED_MODULE_9__["TwoColumnsPage"], { left: react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_list_courses__WEBPACK_IMPORTED_MODULE_11__["ListCourses"], { showInactive: true }), right: react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_weekplanner_weekplanner__WEBPACK_IMPORTED_MODULE_10__["WeekPlanner"], { env: _globals_KED_env__WEBPACK_IMPORTED_MODULE_13__["default"], viewCourseUrl: _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_14__["default"].KED_COURSE_VIEWER_URL }), rightWidth: 5 })); } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], { path: "/courses/:courseId", exact: false, render: function (_a) {
                    var match = _a.match;
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](GetMySchool, { render: function (school) {
                            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Redirect"], { to: "/" + school.name + "/courses/" + match.params.courseId });
                        } });
                } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], { exact: true, path: "/:school/courses/:courseId", render: function (_a) {
                    var match = _a.match;
                    var _b = match.params, school = _b.school, courseId = _b.courseId;
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_viewer_page__WEBPACK_IMPORTED_MODULE_8__["CourseViewerPage"], { school: school, courseId: courseId });
                } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], { exact: true, path: "/:school/courses/:courseId/tabs/:tabId?", render: function (_a) {
                    var match = _a.match;
                    var _b = match.params, school = _b.school, courseId = _b.courseId, tabId = _b.tabId;
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_viewer_page__WEBPACK_IMPORTED_MODULE_8__["CourseViewerPage"], { school: school, courseId: courseId, activeTab: tabId });
                } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], { exact: true, path: "/:school/courses/:courseId/settings/:draftId", render: function (_a) {
                    var match = _a.match;
                    var _b = match.params, school = _b.school, courseId = _b.courseId, draftId = _b.draftId;
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_viewer_page__WEBPACK_IMPORTED_MODULE_8__["CourseViewerPage"], { school: school, courseId: courseId, activeTab: "$settings", draftId: draftId });
                } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], { exact: true, path: "/:school/courses/:courseId/tabs/:tabId/drafts/:draftId", render: function (_a) {
                    var match = _a.match;
                    var _b = match.params, school = _b.school, courseId = _b.courseId, tabId = _b.tabId, draftId = _b.draftId;
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_viewer_page__WEBPACK_IMPORTED_MODULE_8__["CourseViewerPage"], { school: school, courseId: courseId, activeTab: tabId, draftId: draftId });
                } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], { exact: true, path: "/:school/courses/:courseId/tabs/:tabId/drafts/:draftId/edit", render: function (_a) {
                    var match = _a.match;
                    var _b = match.params, school = _b.school, courseId = _b.courseId, tabId = _b.tabId, draftId = _b.draftId;
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_viewer_page__WEBPACK_IMPORTED_MODULE_8__["CourseViewerPage"], { school: school, courseId: courseId, activeTab: tabId, draftId: draftId, editMode: true });
                } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], { exact: true, path: "/:school/courses/:courseId/tabs/:tabId/tasks/:taskId", render: function (_a) {
                    var match = _a.match;
                    var _b = match.params, school = _b.school, courseId = _b.courseId, tabId = _b.tabId, taskId = _b.taskId;
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_viewer_page__WEBPACK_IMPORTED_MODULE_8__["CourseViewerPage"], { school: school, courseId: courseId, activeTab: tabId, taskId: taskId, editMode: false });
                } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], { exact: true, path: "/:school/courses/:courseId/tabs/:tabId/contents/:contentId/tasks/:taskId/drafts/:draftId", render: function (_a) {
                    var match = _a.match;
                    var _b = match.params, school = _b.school, courseId = _b.courseId, tabId = _b.tabId, taskId = _b.taskId, draftId = _b.draftId, contentId = _b.contentId;
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_viewer_page__WEBPACK_IMPORTED_MODULE_8__["CourseViewerPage"], { school: school, courseId: courseId, activeTab: tabId, taskId: taskId, contentId: contentId, draftId: draftId, editMode: false });
                } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], { exact: true, path: "/:school/courses/:courseId/tabs/:tabId/contents/:contentId/tasks/:taskId/drafts/:draftId/edit", render: function (_a) {
                    var match = _a.match;
                    var _b = match.params, school = _b.school, courseId = _b.courseId, tabId = _b.tabId, contentId = _b.contentId, taskId = _b.taskId, draftId = _b.draftId;
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_viewer_page__WEBPACK_IMPORTED_MODULE_8__["CourseViewerPage"], { school: school, courseId: courseId, activeTab: tabId, contentId: contentId, taskId: taskId, draftId: draftId, editMode: true });
                } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], { exact: true, path: "/:school/courses/:courseId/blocks/:blockId/steps/:stepNo", render: function (_a) {
                    var match = _a.match;
                    var _b = match.params, school = _b.school, courseId = _b.courseId, blockId = _b.blockId, stepNo = _b.stepNo;
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_redirect_to_step__WEBPACK_IMPORTED_MODULE_15__["RedirectToStep"], { school: school, courseId: courseId, blockId: blockId, stepNo: stepNo });
                } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], { exact: true, path: "/:school/courses/:courseId/history", render: function (_a) {
                    var match = _a.match;
                    var _b = match.params, school = _b.school, courseId = _b.courseId, blockId = _b.blockId, stepNo = _b.stepNo;
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_version_history__WEBPACK_IMPORTED_MODULE_16__["VersionHistoryPage"], { school: school, courseId: courseId });
                } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utils_error_success_feedback__WEBPACK_IMPORTED_MODULE_3__["ErrorSuccessFeedback"], null),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_loading_indicator__WEBPACK_IMPORTED_MODULE_5__["LoadingIndicator"], null)))); });
var templateObject_1;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/list-courses/index.tsx":
/*!*******************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/list-courses/index.tsx ***!
  \*******************************************************************************/
/*! exports provided: ListCourses */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ListCourses", function() { return ListCourses; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_live_query_view__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utility-components/live-query-view */ "./src/components/utility-components/live-query-view.tsx");
/* harmony import */ var _logic_list_course_instances__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../logic/list-course-instances */ "./src/components/course-builder-ks/logic/list-course-instances.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _student_courses_box__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./student-courses-box */ "./src/components/course-builder-ks/viewer-editor/list-courses/student-courses-box.tsx");






var ListCourses = Object(_utility_components_live_query_view__WEBPACK_IMPORTED_MODULE_2__["liveQueryView"])(function (_a) {
    var showInactive = _a.showInactive;
    return (showInactive ?
        Object(_logic_list_course_instances__WEBPACK_IMPORTED_MODULE_3__["listCourseInstances"])() :
        Object(_logic_list_course_instances__WEBPACK_IMPORTED_MODULE_3__["listCourseInstances"])().tags("active")).orderBy("name")
        .map(function (_a) {
        var id = _a.id, name = _a.name, type = _a.type, description = _a.description, tags = _a.tags;
        return ({
            id: id,
            name: name,
            type: type,
            tags: tags,
            description: description,
            url: "/courses/" + id
        });
    })
        .groupBy("type")
        .map(function (arraysByType) { return ({
        themeCourses: arraysByType["theme-course"],
        stepCourses: arraysByType["step-course"]
    }); })
        .map(function (_a) {
        var themeCourses = _a.themeCourses, stepCourses = _a.stepCourses;
        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
            themeCourses && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_student_courses_box__WEBPACK_IMPORTED_MODULE_5__["StudentCoursesBox"], { title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Temakurser"], ["Temakurser"]))), courses: themeCourses }),
            stepCourses && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_student_courses_box__WEBPACK_IMPORTED_MODULE_5__["StudentCoursesBox"], { title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Stegkurser"], ["Stegkurser"]))), courses: stepCourses }));
    });
});
var templateObject_1, templateObject_2;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/list-courses/student-courses-box.tsx":
/*!*********************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/list-courses/student-courses-box.tsx ***!
  \*********************************************************************************************/
/*! exports provided: StudentCoursesBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StudentCoursesBox", function() { return StudentCoursesBox; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/es/index.js");
/* harmony import */ var _utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utility-components/align-horizontal */ "./src/components/utility-components/align-horizontal.tsx");
/* harmony import */ var _utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utility-components/horizontal-item */ "./src/components/utility-components/horizontal-item.tsx");




var StudentCoursesBox = function (_a) {
    var title = _a.title, courses = _a.courses;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "ked_boxed" },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h3", null, title),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "taskContainer odd-even" }, courses.map(function (_a) {
            var id = _a.id, name = _a.name, description = _a.description, tags = _a.tags;
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_2__["AlignHorizontal"], null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_3__["HorizontalItem"], null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "studentCourse" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_1__["Link"], { to: "/courses/" + id }, name),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p", { className: "small" }, description))),
                tags.includes("active") ? undefined : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_3__["HorizontalItem"], null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "pill incomplete" }, "Inaktiv")));
        })));
};


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/redirect-to-step.tsx":
/*!*****************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/redirect-to-step.tsx ***!
  \*****************************************************************************/
/*! exports provided: RedirectToStep */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RedirectToStep", function() { return RedirectToStep; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utility-components/lazy-content */ "./src/components/utility-components/lazy-content.tsx");
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/es/index.js");





var RedirectToStep = function (_a) {
    var school = _a.school, courseId = _a.courseId, blockId = _a.blockId, stepNo = _a.stepNo;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_1__["LazyContent"], null, _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].optimizeCache().schools.name(school).single()
        .map(function (school) { return _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].branch(school.officialBranchId); })
        .switchMap(function (branchRepo) {
        return branchRepo.courseBlocks.include("tabs").id(blockId)
            .map(function (block) {
            var firstTab = block.tabs.filter(function (tab) { return '' + tab.stepNo === '' + stepNo; }).sort(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["compareProp"])("order"))[0];
            if (firstTab)
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Redirect"], { to: "/" + school + "/courses/" + courseId + "/tabs/" + firstTab.id });
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Redirect"], { to: "/" + school + "/courses/" + courseId });
        });
    }));
};


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/tab-settings-admin.tsx":
/*!*******************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/tab-settings-admin.tsx ***!
  \*******************************************************************************/
/*! exports provided: TabSettingsAdmin */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TabSettingsAdmin", function() { return TabSettingsAdmin; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utility-components/align-horizontal */ "./src/components/utility-components/align-horizontal.tsx");
/* harmony import */ var _utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utility-components/horizontal-item */ "./src/components/utility-components/horizontal-item.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _logic_course_instance_tags__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../logic/course-instance-tags */ "./src/components/course-builder-ks/logic/course-instance-tags.ts");
/* harmony import */ var _tab_settings_requirements__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./tab-settings-requirements */ "./src/components/course-builder-ks/viewer-editor/tab-settings-requirements.tsx");
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");
var _this = undefined;









var TabSettingsAdmin = function (_a) {
    var tab = _a.tab, repo = _a.repo, course = _a.course, block = _a.block;
    var _b = tab.subject ?
        tab.subject :
        course.type === 'theme-course' && course.subjects && course.subjects.length > 0 ?
            { subjectCode: course.subjects[0].code, subjectName: course.subjects[0].name } :
            course.type === 'step-course' ?
                { subjectCode: course.subject.subjectCode, subjectName: course.subject.subjectName } :
                { subjectCode: '', subjectName: '' }, subjectCode = _b.subjectCode, subjectName = _b.subjectName;
    var courseSchoolYears = Object(_logic_course_instance_tags__WEBPACK_IMPORTED_MODULE_5__["getSchoolYears"])(course.tags);
    var schoolYear = Object(_logic_course_instance_tags__WEBPACK_IMPORTED_MODULE_5__["getSchoolYears"])(tab.tags)[0] || courseSchoolYears[0] || null;
    return (
    //
    // Edit "standard" school: Choose tab type
    //
    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "ked_boxed" },
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", { className: "box-mini-label" }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Administrativa Inst\u00E4llningar f\u00F6r fliken ", ""], ["Administrativa Inst\u00E4llningar f\u00F6r fliken ", ""])), tab.name || tab.tabTitle)),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_2__["AlignHorizontal"], null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_3__["HorizontalItem"], null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("input", { type: "checkbox", checked: tab.locked, onChange: function (ev) { return repo.courseTabs.update(tab, { locked: !!ev.target.checked }); } })),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_3__["HorizontalItem"], null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E5s fliken fr\u00E5n redigering f\u00F6rutom d\u00E4r det explicit till\u00E5ts"], ["L\u00E5s fliken fr\u00E5n redigering f\u00F6rutom d\u00E4r det explicit till\u00E5ts"]))))),
        course.type === 'step-course' && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_7__["OpenCloseBox"], { title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Avancerat..."], ["Avancerat..."]))) },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button", { className: "btn", onClick: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                        var schoolYear;
                        return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                            switch (_a.label) {
                                case 0:
                                    schoolYear = Object(_logic_course_instance_tags__WEBPACK_IMPORTED_MODULE_5__["getSchoolYears"])(block.tags)[0];
                                    return [4 /*yield*/, updateSubjectAndSchoolYears(course, course.subject.subjectName, course.subject.subjectCode, schoolYear)];
                                case 1:
                                    _a.sent();
                                    return [2 /*return*/];
                            }
                        });
                    }); } }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["G\u00F6r om kopplingen till \u00E4mne och \u00E5rskursspann"], ["G\u00F6r om kopplingen till \u00E4mne och \u00E5rskursspann"])))))),
        course.type === 'theme-course' && tab.tabClass === 'subject-tab' && !!subjectCode && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null),
            course.subjects.length > 1 && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_2__["AlignHorizontal"], null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_3__["HorizontalItem"], null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("label", { className: "kclabel" }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4mne"], ["\u00C4mne"]))))),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_3__["HorizontalItem"], null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("select", { value: subjectCode, onChange: function (ev) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                            var subjectCode, subjectName;
                            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                                switch (_a.label) {
                                    case 0:
                                        subjectCode = ev.target.value;
                                        subjectName = course.subjects
                                            .filter(function (s) { return s.code === subjectCode; })
                                            .map(function (s) { return s.name; })[0] || subjectCode;
                                        return [4 /*yield*/, updateSubjectAndSchoolYears(course, subjectName, subjectCode, schoolYear)];
                                    case 1:
                                        _a.sent();
                                        return [2 /*return*/];
                                }
                            });
                        }); } }, course.subjects.map(function (_a) {
                        var name = _a.name, code = _a.code;
                        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option", { key: code, value: code }, name);
                    })))),
            courseSchoolYears.length > 1 && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_2__["AlignHorizontal"], null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_3__["HorizontalItem"], null,
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("label", { className: "kclabel" }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_6 || (templateObject_6 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["V\u00E4lj \u00E5rskurs"], ["V\u00E4lj \u00E5rskurs"]))))),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_3__["HorizontalItem"], null,
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("select", { value: schoolYear, onChange: function (ev) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                                var schoolYear, subjectName;
                                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                                    switch (_a.label) {
                                        case 0:
                                            schoolYear = ev.target.value;
                                            subjectName = course.subjects
                                                .filter(function (s) { return s.code === subjectCode; })
                                                .map(function (s) { return s.name; })[0] || subjectCode;
                                            return [4 /*yield*/, updateSubjectAndSchoolYears(course, subjectName, subjectCode, schoolYear)];
                                        case 1:
                                            _a.sent();
                                            return [2 /*return*/];
                                    }
                                });
                            }); } }, courseSchoolYears.map(function (year) { return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option", { key: year, value: year }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_7 || (templateObject_7 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C5rskurs ", ""], ["\u00C5rskurs ", ""])), year)); })))),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_tab_settings_requirements__WEBPACK_IMPORTED_MODULE_6__["TabRequirements"], { repo: repo, tab: tab })),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_7__["OpenCloseBox"], { title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_8 || (templateObject_8 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Avancerat..."], ["Avancerat..."]))) },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button", { className: "btn", onClick: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                                switch (_a.label) {
                                    case 0: return [4 /*yield*/, updateSubjectAndSchoolYears(course, subjectName, subjectCode, schoolYear)];
                                    case 1:
                                        _a.sent();
                                        return [2 /*return*/];
                                }
                            });
                        }); } }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_9 || (templateObject_9 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["G\u00F6r om kopplingen till \u00E4mne och \u00E5rskursspann"], ["G\u00F6r om kopplingen till \u00E4mne och \u00E5rskursspann"])))))))));
    function updateSubjectAndSchoolYears(course, subjectName, subjectCode, schoolYear) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var e_1, _a, tabTags, lgContents, tasks, tasks_1, tasks_1_1, task, tags;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        tabTags = Object(_logic_course_instance_tags__WEBPACK_IMPORTED_MODULE_5__["computeCourseInstanceTags"])(tab.tags, [subjectCode], [schoolYear]);
                        repo.courseTabs.update(tab, {
                            subject: {
                                subjectCode: subjectCode,
                                subjectName: subjectName
                            },
                            tags: tabTags
                        });
                        return [4 /*yield*/, repo.courseContents
                                .hasEdgesFrom([tab.id])
                                .include("tasks")
                                .includeIdsAndNamesOnly()
                                .toValue().load()];
                    case 1:
                        lgContents = _b.sent();
                        tasks = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["flatten"])(lgContents.map(function (c) { return c.tasks; }));
                        try {
                            for (tasks_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](tasks), tasks_1_1 = tasks_1.next(); !tasks_1_1.done; tasks_1_1 = tasks_1.next()) {
                                task = tasks_1_1.value;
                                tags = Object(_logic_course_instance_tags__WEBPACK_IMPORTED_MODULE_5__["computeCourseInstanceTags"])([course.id], [subjectCode], [schoolYear]);
                                repo.tasks.update(task, { tags: tags, subject: subjectName });
                            }
                        }
                        catch (e_1_1) { e_1 = { error: e_1_1 }; }
                        finally {
                            try {
                                if (tasks_1_1 && !tasks_1_1.done && (_a = tasks_1.return)) _a.call(tasks_1);
                            }
                            finally { if (e_1) throw e_1.error; }
                        }
                        return [2 /*return*/];
                }
            });
        });
    }
};
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8, templateObject_9;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/tab-settings-requirements.tsx":
/*!**************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/tab-settings-requirements.tsx ***!
  \**************************************************************************************/
/*! exports provided: TabRequirements */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TabRequirements", function() { return TabRequirements; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _course_builder_sub_components_knowledge_matrix__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../course-builder/sub-components/knowledge-matrix */ "./src/components/course-builder/sub-components/knowledge-matrix.tsx");
/* harmony import */ var _utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utility-components/lazy-content */ "./src/components/utility-components/lazy-content.tsx");
/* harmony import */ var _logic_get_course_codes_from_tags__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../logic/get-course-codes-from-tags */ "./src/components/course-builder-ks/logic/get-course-codes-from-tags.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _logic_get_standard_courses_with_ordered_requirements__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../logic/get-standard-courses-with-ordered-requirements */ "./src/components/course-builder-ks/logic/get-standard-courses-with-ordered-requirements.ts");
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");
/* harmony import */ var _course_builder_sub_components_select_related_docs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../course-builder/sub-components/select-related-docs */ "./src/components/course-builder/sub-components/select-related-docs.tsx");









var TabRequirements = function (_a) {
    var repo = _a.repo, tab = _a.tab;
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_3__["LazyContent"], null, Object(_logic_get_standard_courses_with_ordered_requirements__WEBPACK_IMPORTED_MODULE_6__["getStandardCoursesWithOrderedRequirements"])(Object(_logic_get_course_codes_from_tags__WEBPACK_IMPORTED_MODULE_4__["getCourseCodesFromTags"])(tab.tags))
        .map(function (courseTemplates) { return courseTemplates.length === 0 ?
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Fliken \u00E4r inte kopplad till n\u00E5got \u00E4mne / \u00E5rskurs"], ["Fliken \u00E4r inte kopplad till n\u00E5got \u00E4mne / \u00E5rskurs"]))))
        :
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, courseTemplates.map(function (_a) {
                var id = _a.id, name = _a.name, abilities = _a.abilities, centralContent = _a.centralContent, knowledgeRequirements = _a.knowledgeRequirements;
                return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { key: id },
                    courseTemplates.length === 1 ? undefined : react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h1", null, name),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_7__["OpenCloseBox"], { className: "larger", title: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E5s flikens kunskapskrav"], ["L\u00E5s flikens kunskapskrav"])))) },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Markera de kunskapskrav som \u00E4mnesfliken ska t\u00E4cka."], ["Markera de kunskapskrav som \u00E4mnesfliken ska t\u00E4cka."])))),
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_3__["LazyContent"], null, repo["knowledge-requirements"].hasEdgesFrom([tab.id]).idsOnly().toValue().map(function (tabsKrs) {
                            return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_sub_components_knowledge_matrix__WEBPACK_IMPORTED_MODULE_2__["KnowledgeMatrix"], { knowledgeRequirements: knowledgeRequirements, markedIds: tabsKrs.map(function (_a) {
                                    var id = _a.id;
                                    return id;
                                }), idsToMarkNotOk: {}, markMode: true, onMarkChanged: function (markedId, isMarked) {
                                    // Remove invalid knowledge requirements (those that are not part of the standard course)
                                    // Can happen after changing school year / course or subject.
                                    var invalidKrs = tabsKrs.filter(function (kr) { return !knowledgeRequirements.some(function (_a) {
                                        var id = _a.id;
                                        return kr.id === id;
                                    }); });
                                    invalidKrs.forEach(function (invalidKr) {
                                        repo.courseTabs.removeRelated(tab.id, "knowledgeRequirements", invalidKr);
                                    });
                                    var markedDoc = knowledgeRequirements.filter(function (_a) {
                                        var id = _a.id;
                                        return id === markedId;
                                    })[0];
                                    if (isMarked) {
                                        repo.courseTabs.addRelated(tab.id, "knowledgeRequirements", markedDoc);
                                    }
                                    else {
                                        repo.courseTabs.removeRelated(tab.id, "knowledgeRequirements", markedDoc);
                                    }
                                } });
                        }))),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_3__["LazyContent"], null, repo.abilities.hasEdgesFrom([tab.id]).idsOnly().toValue().map(function (tabAbilities) {
                        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_sub_components_select_related_docs__WEBPACK_IMPORTED_MODULE_8__["SelectRelatedDocs"], { options: abilities, title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E5s flikens f\u00F6rm\u00E5gor"], ["L\u00E5s flikens f\u00F6rm\u00E5gor"]))), markedIds: tabAbilities.map(function (_a) {
                                var id = _a.id;
                                return id;
                            }), markMode: true, 
                            //migratedIds={task && task.migratedTexts && task.migratedTexts.abilities}
                            onMarkChanged: function (markedId, isMarked) {
                                // Remove invalid abilities (those that are not part of the standard course)
                                // Can happen after changing school year / course or subject.
                                var invalidAbilities = tabAbilities.filter(function (a) { return !abilities.some(function (_a) {
                                    var id = _a.id;
                                    return a.id === id;
                                }); });
                                invalidAbilities.forEach(function (invalidAbility) {
                                    repo.courseTabs.removeRelated(tab.id, "abilities", invalidAbility);
                                });
                                var markedDoc = abilities.filter(function (_a) {
                                    var id = _a.id;
                                    return id === markedId;
                                })[0];
                                if (isMarked) {
                                    repo.courseTabs.addRelated(tab.id, "abilities", markedDoc);
                                }
                                else {
                                    repo.courseTabs.removeRelated(tab.id, "abilities", markedDoc);
                                }
                            } });
                    })),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_3__["LazyContent"], null, repo["central-content"].hasEdgesFrom([tab.id]).idsOnly().toValue().map(function (tabsCCs) {
                        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_sub_components_select_related_docs__WEBPACK_IMPORTED_MODULE_8__["SelectRelatedDocs"], { options: centralContent, title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E5s flikens centrala inneh\u00E5ll"], ["L\u00E5s flikens centrala inneh\u00E5ll"]))), markedIds: tabsCCs.map(function (cc) { return cc.id; }), markMode: true, 
                            //migratedIds={task && task.migratedTexts && task.migratedTexts.centralContent}
                            onMarkChanged: function (markedId, isMarked) {
                                // Remove invalid central contents (those that are not part of the standard course)
                                // Can happen after changing school year / course or subject.
                                var invalidCentralContents = tabsCCs.filter(function (cc) { return !centralContent.some(function (_a) {
                                    var id = _a.id;
                                    return cc.id === id;
                                }); });
                                invalidCentralContents.forEach(function (invalidCC) {
                                    repo.courseTabs.removeRelated(tab.id, "centralContent", invalidCC);
                                });
                                var markedDoc = centralContent.filter(function (_a) {
                                    var id = _a.id;
                                    return id === markedId;
                                })[0];
                                if (isMarked) {
                                    repo.courseTabs.addRelated(tab.id, "centralContent", markedDoc);
                                }
                                else {
                                    repo.courseTabs.removeRelated(tab.id, "centralContent", markedDoc);
                                }
                            } });
                    })));
            })); }));
};
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/tab-settings.tsx":
/*!*************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/tab-settings.tsx ***!
  \*************************************************************************/
/*! exports provided: TabSettings */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TabSettings", function() { return TabSettings; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utility-components/align-horizontal */ "./src/components/utility-components/align-horizontal.tsx");
/* harmony import */ var _utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utility-components/horizontal-item */ "./src/components/utility-components/horizontal-item.tsx");
/* harmony import */ var _course_tab_tab_classes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./course-tab/tab-classes */ "./src/components/course-builder-ks/viewer-editor/course-tab/tab-classes.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _logic_course_instance_tags__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../logic/course-instance-tags */ "./src/components/course-builder-ks/logic/course-instance-tags.ts");
/* harmony import */ var _utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../utility-components/form-field-text-input */ "./src/components/utility-components/form-field-text-input.tsx");








var TabSettings = function (_a) {
    var tab = _a.tab, repo = _a.repo, course = _a.course;
    var _b = tab.subject ?
        tab.subject :
        course.type === 'theme-course' && course.subjects && course.subjects.length > 0 ?
            { subjectCode: course.subjects[0].code, subjectName: course.subjects[0].name } :
            { subjectCode: '', subjectName: '' }, subjectCode = _b.subjectCode, subjectName = _b.subjectName;
    var courseSchoolYears = Object(_logic_course_instance_tags__WEBPACK_IMPORTED_MODULE_6__["getSchoolYears"])(course.tags);
    var schoolYear = Object(_logic_course_instance_tags__WEBPACK_IMPORTED_MODULE_6__["getSchoolYears"])(tab.tags)[0] || courseSchoolYears[0] || null;
    return (
    //
    // Edit "standard" school: Choose tab type
    //
    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "ked_boxed" },
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", { className: "box-mini-label" }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Inst\u00E4llningar f\u00F6r fliken ", ""], ["Inst\u00E4llningar f\u00F6r fliken ", ""])), tab.name || tab.tabTitle)),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_2__["AlignHorizontal"], null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_3__["HorizontalItem"], null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("label", { className: "kclabel" }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Flikens typ"], ["Flikens typ"]))))),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_3__["HorizontalItem"], null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("select", { value: tab.tabClass, onChange: function (ev) {
                        return repo.courseTabs.update(tab, ev.target.value === 'subject-tab' ? {
                            tabClass: ev.target.value,
                            subject: { subjectCode: subjectCode, subjectName: subjectName },
                            tags: Object(_logic_course_instance_tags__WEBPACK_IMPORTED_MODULE_6__["computeCourseInstanceTags"])(tab.tags, [subjectCode], [schoolYear])
                        } : {
                            tabClass: ev.target.value,
                        });
                    } }, _course_tab_tab_classes__WEBPACK_IMPORTED_MODULE_4__["TabTypesPerCourseType"][course.type].map(function (tabClass) {
                    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option", { key: tabClass, value: tabClass }, _course_tab_tab_classes__WEBPACK_IMPORTED_MODULE_4__["CourseTabClasses"][tabClass]);
                })))),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_7__["TextInput"], { label: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Flikens namn"], ["Flikens namn"]))), id: "TabSettings:name", value: tab.name || tab.tabTitle, onChange: function (name) {
                return repo.courseTabs.update(tab, {
                    name: name,
                    tabTitle: name // Deprecated. Todo: remove.
                });
            } })));
};
var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/task/left-column/edit-requirements.tsx":
/*!***********************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/task/left-column/edit-requirements.tsx ***!
  \***********************************************************************************************/
/*! exports provided: EditRequirements, EditRequirementsInner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditRequirements", function() { return EditRequirements; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditRequirementsInner", function() { return EditRequirementsInner; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _course_builder_sub_components_knowledge_matrix__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../course-builder/sub-components/knowledge-matrix */ "./src/components/course-builder/sub-components/knowledge-matrix.tsx");
/* harmony import */ var _utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../utility-components/lazy-content */ "./src/components/utility-components/lazy-content.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _logic_ordered_requirements__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../logic/ordered-requirements */ "./src/components/course-builder-ks/logic/ordered-requirements.ts");
/* harmony import */ var _course_builder_sub_components_select_related_docs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../course-builder/sub-components/select-related-docs */ "./src/components/course-builder/sub-components/select-related-docs.tsx");
/* harmony import */ var _utility_components_checklist__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../utility-components/checklist */ "./src/components/utility-components/checklist.tsx");
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");
/* harmony import */ var _contracts_ked_models__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../contracts/ked-models */ "./src/contracts/ked-models.ts");










var EditRequirements = function (_a) {
    var repo = _a.repo, task = _a.task, tabIds = _a.tabIds, uncoveredIds = _a.uncoveredIds, blockId = _a.blockId;
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_3__["LazyContent"], null, blockId ?
        repo.courseBlocks
            .include("abilities", "centralContent", "knowledgeRequirements")
            .id(blockId)
            .map(function (block) { return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(EditRequirementsInner, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, { repo: repo, task: task, uncoveredIds: uncoveredIds, tabOrBlock: block }))); }) :
        repo.courseTabs
            .include("abilities", "centralContent", "knowledgeRequirements")
            .ids(tabIds)
            .toValue().map(function (tabs) { return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, tabs.length === 1 ?
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(EditRequirementsInner, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, { repo: repo, task: task, uncoveredIds: uncoveredIds, tabOrBlock: tabs[0] })) :
            tabs.map(function (tab) { return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_8__["OpenCloseBox"], { key: tab.id, title: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h4", null,
                    tab.name || tab.tabTitle,
                    tab.subject && tab.subject.subjectName && tab.subject.subjectName !== (tab.name || tab.tabTitle) ?
                        " (" + tab.subject.subjectName + ")" : '') },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(EditRequirementsInner, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, { repo: repo, task: task, uncoveredIds: uncoveredIds, tabOrBlock: tab, hasMultipleSubjects: true }))); })); }));
};
var EditRequirementsInner = function (_a) {
    var tabOrBlock = _a.tabOrBlock, repo = _a.repo, task = _a.task, uncoveredIds = _a.uncoveredIds, hasMultipleSubjects = _a.hasMultipleSubjects;
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_3__["LazyContent"], null, Object(_logic_ordered_requirements__WEBPACK_IMPORTED_MODULE_5__["resolveRequirementOrder"])(tabOrBlock).map(function (tab) {
        var subjectName = 'type' in tab && tab.subject && tab.subject.subjectName;
        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
            task.taskType !== 'exercise' && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "ked_boxed" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h3", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["V\u00E4lj kunskapskrav"], ["V\u00E4lj kunskapskrav"])))),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Markera de kunskapskrav som din uppgift t\u00E4cker."], ["Markera de kunskapskrav som din uppgift t\u00E4cker."])))),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_sub_components_knowledge_matrix__WEBPACK_IMPORTED_MODULE_2__["KnowledgeMatrix"], { knowledgeRequirements: tab.knowledgeRequirements, markedIds: task.knowledgeRequirements.map(function (_a) {
                        var id = _a.id;
                        return id;
                    }), explainedRequirements: task.explainedRequirements || {}, idsToMarkNotOk: uncoveredIds, markMode: true, migratedIds: task && task.migratedTexts && task.migratedTexts.knowledgeRequirements, onExplainedRequirementsChanged: function (requirementId, text) {
                        var _a;
                        return repo.tasks.update(task, {
                            explainedRequirements: tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, task.explainedRequirements, (_a = {}, _a[requirementId] = text, _a))
                        });
                    }, onMarkChanged: function (markedId, isMarked) {
                        var _a, _b;
                        var markedDoc = tab.knowledgeRequirements.filter(function (_a) {
                            var id = _a.id;
                            return id === markedId;
                        })[0];
                        if (isMarked) {
                            if (hasMultipleSubjects) {
                                // Mission tabs needs to store the subject name connected to each knowledge requirement:
                                repo.tasks.update(task, { idsToSubjectMap: tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, task.idsToSubjectMap, (_a = {}, _a[markedId] = subjectName, _a)) });
                            }
                            else {
                                repo.tasks.update(task, { idsToSubjectMap: undefined });
                            }
                            repo.tasks.addRelated(task.id, "knowledgeRequirements", markedDoc);
                        }
                        else {
                            if (hasMultipleSubjects) {
                                // Mission tabs needs to delete the subject name connected to each knowledge requirement:
                                repo.tasks.update(task, { idsToSubjectMap: tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, task.idsToSubjectMap, (_b = {}, _b[markedId] = undefined, _b)) });
                            }
                            else {
                                repo.tasks.update(task, { idsToSubjectMap: undefined });
                            }
                            repo.tasks.removeRelated(task.id, "knowledgeRequirements", markedDoc);
                        }
                    } })),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "sv-html-portlet sv-portlet" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_sub_components_select_related_docs__WEBPACK_IMPORTED_MODULE_6__["SelectRelatedDocs"], { title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["V\u00E4lj f\u00F6rm\u00E5gor"], ["V\u00E4lj f\u00F6rm\u00E5gor"]))), options: tab.abilities, markedIds: task.abilities.map(function (a) { return a.id; }), markMode: true, migratedIds: task && task.migratedTexts && task.migratedTexts.abilities, onMarkChanged: function (markedId, isMarked) {
                        var markedDoc = tab.abilities.filter(function (a) { return a.id === markedId; })[0];
                        if (isMarked) {
                            repo.tasks.addRelated(task.id, "abilities", markedDoc);
                        }
                        else {
                            repo.tasks.removeRelated(task.id, "abilities", markedDoc);
                        }
                    } })),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "sv-html-portlet sv-portlet" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_sub_components_select_related_docs__WEBPACK_IMPORTED_MODULE_6__["SelectRelatedDocs"], { title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["V\u00E4lj centralt inneh\u00E5ll"], ["V\u00E4lj centralt inneh\u00E5ll"]))), options: tab.centralContent, markedIds: task.centralContent.map(function (cc) { return cc.id; }), markMode: true, migratedIds: task && task.migratedTexts && task.migratedTexts.centralContent, onMarkChanged: function (markedId, isMarked) {
                        var markedDoc = tab.centralContent.filter(function (a) { return a.id === markedId; })[0];
                        if (isMarked) {
                            repo.tasks.addRelated(task.id, "centralContent", markedDoc);
                        }
                        else {
                            repo.tasks.removeRelated(task.id, "centralContent", markedDoc);
                        }
                    } })),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "sv-html-portlet sv-portlet" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_8__["OpenCloseBox"], { className: "larger", title: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["V\u00E4lj framtidsf\u00F6rm\u00E5gor"], ["V\u00E4lj framtidsf\u00F6rm\u00E5gor"])))) },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_checklist__WEBPACK_IMPORTED_MODULE_7__["Checklist"], { available: _contracts_ked_models__WEBPACK_IMPORTED_MODULE_9__["futureAbilities"].map(function (fa) { return ({ name: fa, key: fa }); }), selected: task.futureAbilities, onChange: function (selectedFas) { return repo.tasks.update(task, { futureAbilities: selectedFas }); } }))));
    }));
};
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/task/right-column/basic-editable-task-fields.tsx":
/*!*********************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/task/right-column/basic-editable-task-fields.tsx ***!
  \*********************************************************************************************************/
/*! exports provided: BasicEditableTaskFields */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BasicEditableTaskFields", function() { return BasicEditableTaskFields; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _course_builder_modal_pages_edit_task_task_migration_box__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../course-builder/modal-pages/edit-task/task-migration-box */ "./src/components/course-builder/modal-pages/edit-task/task-migration-box.tsx");
/* harmony import */ var react_datepicker__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-datepicker */ "./node_modules/react-datepicker/es/index.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _utility_components_checklist__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../utility-components/checklist */ "./src/components/utility-components/checklist.tsx");
/* harmony import */ var _utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../utility-components/lazy-content */ "./src/components/utility-components/lazy-content.tsx");








var BasicEditableTaskFields = function (_a) {
    var task = _a.task, writeAccess = _a.writeAccess, repo = _a.repo, contentId = _a.contentId, tab = _a.tab;
    var tabClass = tab ? tab.tabClass : null; // tab is undefined on step courses. But there are no mission tabs on step courses.
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "align-horizontal spaced" },
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, tabClass === 'mission-tab' ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppdragets namn:"], ["Uppdragets namn:"]))) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppgiftens namn:"], ["Uppgiftens namn:"]))))),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("input", { autoFocus: true, type: "text", size: 35, value: task.name, disabled: !writeAccess, readOnly: !writeAccess, onChange: function (ev) {
                        repo.tasks.update(task, { name: ev.target.value });
                    } }))),
        task.migratedTexts && writeAccess && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_modal_pages_edit_task_task_migration_box__WEBPACK_IMPORTED_MODULE_2__["TaskMigrationBox"], { task: task, course: null, updateLink: function (id, linkOrUnlink) { throw new Error("Not implemented yet"); } }),
        tabClass !== 'mission-tab' && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "align-horizontal spaced" },
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4randem\u00E5l:"], ["L\u00E4randem\u00E5l:"]))))),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_7__["LazyContent"], null, repo.courseContents.id(contentId).map(function (content) {
                    if (content.type !== 'learning-goals')
                        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ej valbart"], ["Ej valbart"]))));
                    var hasCommonLearningGoals = content.hasCommonLearningGoals;
                    var learningGoals = content.commonLearningGoals;
                    var availableGoals = learningGoals.map(function (lg) { return lg.trim(); }).filter(function (lg) { return lg; })
                        .map(function (lg) { return ({
                        name: lg,
                        key: lg
                    }); });
                    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_checklist__WEBPACK_IMPORTED_MODULE_6__["Checklist"], { available: availableGoals, selected: task.learningGoal.split('\n'), onChange: function (goals, goal) {
                            if (hasCommonLearningGoals) {
                                repo.tasks.update(task, { learningGoal: goals.join('\n') });
                            }
                            else {
                                repo.tasks.update(task, { learningGoal: goal });
                            }
                        } });
                })))),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h2", null, tabClass === 'mission-tab' ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppdragstyp"], ["Uppdragstyp"]))) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_6 || (templateObject_6 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppgiftstyp"], ["Uppgiftstyp"])))),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_checklist__WEBPACK_IMPORTED_MODULE_6__["Checklist"], { available: [
                    tabClass !== 'mission-tab' && { name: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_7 || (templateObject_7 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00D6vningsuppgift"], ["\u00D6vningsuppgift"]))), key: 'exercise' },
                    { name: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_8 || (templateObject_8 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppgift"], ["Uppgift"]))), key: "task" },
                    { name: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_9 || (templateObject_9 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Inl\u00E4mningsuppgift"], ["Inl\u00E4mningsuppgift"]))), key: 'assignment' },
                ].filter(function (x) { return x; }), selected: [task.taskType], onChange: function (_, clickedKey) { return repo.tasks.update(task, { taskType: clickedKey }); } }),
            task.taskType === 'assignment' && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, "Inl\u00E4mningsdatum"),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_datepicker__WEBPACK_IMPORTED_MODULE_3__["default"], { nextMonthButtonLabel: "", showWeekNumbers: true, previousMonthButtonLabel: "", selected: task.deadline && moment__WEBPACK_IMPORTED_MODULE_4___default()(task.deadline).toDate(), dateFormat: "YYYY-MM-dd", locale: "sv", popperPlacement: "bottom-start", onChange: function (value) {
                                repo.tasks.update(task, { deadline: moment__WEBPACK_IMPORTED_MODULE_4___default()(value).format("YYYY-MM-DD") });
                            } })),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" }, task.deadline && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("a", { className: "deleteDate", href: "#", title: "Ta bort inl\u00E4mningsdatum", onClick: function (ev) {
                            ev.preventDefault();
                            repo.tasks.update(task, { deadline: null });
                        } }))))));
};
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8, templateObject_9;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/task/right-column/edit-task-form.tsx":
/*!*********************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/task/right-column/edit-task-form.tsx ***!
  \*********************************************************************************************/
/*! exports provided: EditTaskForm */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditTaskForm", function() { return EditTaskForm; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _basic_editable_task_fields__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./basic-editable-task-fields */ "./src/components/course-builder-ks/viewer-editor/task/right-column/basic-editable-task-fields.tsx");
/* harmony import */ var _task_footer_buttons__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./task-footer-buttons */ "./src/components/course-builder-ks/viewer-editor/task/right-column/task-footer-buttons.tsx");
/* harmony import */ var _introduction_text_editor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./introduction-text-editor */ "./src/components/course-builder-ks/viewer-editor/task/right-column/introduction-text-editor.tsx");
/* harmony import */ var _task_description_editor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./task-description-editor */ "./src/components/course-builder-ks/viewer-editor/task/right-column/task-description-editor.tsx");
/* harmony import */ var _task_working_procedure_editor__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./task-working-procedure-editor */ "./src/components/course-builder-ks/viewer-editor/task/right-column/task-working-procedure-editor.tsx");
/* harmony import */ var _task_embedded_html_editor__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./task-embedded-html-editor */ "./src/components/course-builder-ks/viewer-editor/task/right-column/task-embedded-html-editor.tsx");







var EditTaskForm = function (_a) {
    var repo = _a.repo, course = _a.course, draftId = _a.draftId, tabId = _a.tabId, tab = _a.tab, contentId = _a.contentId, writeAccess = _a.writeAccess, task = _a.task, school = _a.school;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null,
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_basic_editable_task_fields__WEBPACK_IMPORTED_MODULE_1__["BasicEditableTaskFields"], { repo: repo, task: task, writeAccess: writeAccess, contentId: contentId, tab: tab }),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_introduction_text_editor__WEBPACK_IMPORTED_MODULE_3__["IntroductionTextEditor"], { repo: repo, task: task, writeAccess: writeAccess }),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_task_description_editor__WEBPACK_IMPORTED_MODULE_4__["TaskDescriptionEditor"], { writeAccess: writeAccess, task: task, repo: repo }),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_task_working_procedure_editor__WEBPACK_IMPORTED_MODULE_5__["TaskWorkingProcedureEditor"], { writeAccess: writeAccess, task: task, repo: repo, step: tab && tab.type === 'step-course-tab' && tab.stepNo }),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_task_embedded_html_editor__WEBPACK_IMPORTED_MODULE_6__["TaskEmbeddedHTMLEditor"], { writeAccess: writeAccess, task: task, repo: repo }),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_task_footer_buttons__WEBPACK_IMPORTED_MODULE_2__["TaskFooterButtons"], { repo: repo, task: task, courseId: course.id, draftId: draftId, tabId: tabId, contentId: contentId, school: school }));
};
/*

  * Inte kunna ndra ordning p lsta rutor om inte isKedStaff().
  * Ingen lgg till uppgifts-knapp om inte editMode.
  *
  * Redigera uppgiftsinnehll
  * Ls lrandemlen till admin alltid
  * Kunna klicka in sig p uppgiften
  * Kunna ta bort uppgift
  * Kunna nollstlla ndringar fr skolan

*/ 


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/task/right-column/introduction-text-editor.tsx":
/*!*******************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/task/right-column/introduction-text-editor.tsx ***!
  \*******************************************************************************************************/
/*! exports provided: IntroductionTextEditor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IntroductionTextEditor", function() { return IntroductionTextEditor; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _utility_components_wysiwyg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../utility-components/wysiwyg */ "./src/components/utility-components/wysiwyg/index.tsx");
/* harmony import */ var _utility_components_wysiwyg_actions_sv__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../utility-components/wysiwyg/actions-sv */ "./src/components/utility-components/wysiwyg/actions-sv.ts");





var IntroductionTextEditor = function (_a) {
    var repo = _a.repo, task = _a.task, writeAccess = _a.writeAccess;
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h4", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Introtext"], ["Introtext"])))),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", { className: "subHeader" }, "(Skriv en introduktion till uppgiften)"),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_wysiwyg__WEBPACK_IMPORTED_MODULE_3__["Wysiwyg"], { actions: [
                "bold",
                "italic",
                "underline",
                "link",
                "image"
            ], defaultActions: _utility_components_wysiwyg_actions_sv__WEBPACK_IMPORTED_MODULE_4__["default"], readOnly: !writeAccess, html: task.content || "", onChange: function (html) { return repo.tasks.update(task, { content: html }); } }));
};
var templateObject_1;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/task/right-column/task-description-editor.tsx":
/*!******************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/task/right-column/task-description-editor.tsx ***!
  \******************************************************************************************************/
/*! exports provided: TaskDescriptionEditor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskDescriptionEditor", function() { return TaskDescriptionEditor; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_wysiwyg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../utility-components/wysiwyg */ "./src/components/utility-components/wysiwyg/index.tsx");
/* harmony import */ var _utility_components_wysiwyg_actions_sv__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../utility-components/wysiwyg/actions-sv */ "./src/components/utility-components/wysiwyg/actions-sv.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _texts__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../texts */ "./src/components/course-builder-ks/viewer-editor/task/texts.ts");






function TaskDescriptionEditor(_a) {
    var writeAccess = _a.writeAccess, task = _a.task, repo = _a.repo;
    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h4", null, _texts__WEBPACK_IMPORTED_MODULE_5__["taskTypeHeadings"][task.taskType] || Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppgift"], ["Uppgift"])))),
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { className: "subHeader" }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["(Skriv in en kort f\u00F6rklaring vad uppgiften g\u00E5r ut p\u00E5)"], ["(Skriv in en kort f\u00F6rklaring vad uppgiften g\u00E5r ut p\u00E5)"])))),
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_wysiwyg__WEBPACK_IMPORTED_MODULE_2__["Wysiwyg"], { actions: [
                "bold",
                "italic",
                "underline",
                "image"
            ], defaultActions: _utility_components_wysiwyg_actions_sv__WEBPACK_IMPORTED_MODULE_3__["default"], readOnly: !writeAccess, html: task.description || "", onChange: function (html) {
                repo.tasks.update(task, { description: html });
            } }));
}
var templateObject_1, templateObject_2;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/task/right-column/task-embedded-html-editor.tsx":
/*!********************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/task/right-column/task-embedded-html-editor.tsx ***!
  \********************************************************************************************************/
/*! exports provided: TaskEmbeddedHTMLEditor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskEmbeddedHTMLEditor", function() { return TaskEmbeddedHTMLEditor; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../utils/utils */ "./src/utils/utils.ts");




var TaskEmbeddedHTMLEditor = function (_a) {
    var task = _a.task, repo = _a.repo;
    return Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_2__["isKedStaff"])() ? task.embeddedHtml ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h4", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Inb\u00E4ddat material"], ["Inb\u00E4ddat material"])))),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Klipp in HTML kod nedan"], ["Klipp in HTML kod nedan"])))),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("textarea", { style: { width: "100%", height: "100px" }, value: task.embeddedHtml, onChange: function (ev) { return repo.tasks.update(task, { embeddedHtml: ev.target.value }); } })) :
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button", { className: "btn", onClick: function () { return repo.tasks.update(task, { embeddedHtml: " " }); } },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-code", "aria-hidden": true }),
                "\u00A0", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4gg till inb\u00E4ddat material"], ["L\u00E4gg till inb\u00E4ddat material"])))),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null)) :
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null);
};
var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/task/right-column/task-footer-buttons.tsx":
/*!**************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/task/right-column/task-footer-buttons.tsx ***!
  \**************************************************************************************************/
/*! exports provided: TaskFooterButtons */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskFooterButtons", function() { return TaskFooterButtons; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var react_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router */ "./node_modules/react-router/es/index.js");
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../utility-components/horizontal-item */ "./src/components/utility-components/horizontal-item.tsx");
/* harmony import */ var _utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../utility-components/align-horizontal */ "./src/components/utility-components/align-horizontal.tsx");
var _this = undefined;







var TaskFooterButtons = Object(react_router__WEBPACK_IMPORTED_MODULE_3__["withRouter"])(function (_a) {
    var school = _a.school, courseId = _a.courseId, tabId = _a.tabId, contentId = _a.contentId, draftId = _a.draftId, task = _a.task, repo = _a.repo, history = _a.history;
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "btn btn-warning pull-right", onClick: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                    return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                        switch (_a.label) {
                            case 0:
                                repo.courseContents.removeRelated(contentId, "tasks", task);
                                return [4 /*yield*/, _globals_db__WEBPACK_IMPORTED_MODULE_4__["db"].saveNow()];
                            case 1:
                                _a.sent();
                                history.push("/" + school + "/courses/" + courseId + "/tabs/" + tabId + "/drafts/" + draftId + "/edit");
                                return [2 /*return*/];
                        }
                    });
                }); } },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-trash", "aria-hidden": true }),
                "\u00A0", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ta bort uppgiften"], ["Ta bort uppgiften"])))),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_6__["AlignHorizontal"], null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_5__["HorizontalItem"], null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button", { className: "btn", onClick: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                                switch (_a.label) {
                                    case 0: return [4 /*yield*/, repo.saveNow()];
                                    case 1:
                                        _a.sent();
                                        history.push("/" + school + "/courses/" + courseId + "/tabs/" + (tabId || '$') + "/contents/" + contentId + "/tasks/" + task.id + "/drafts/" + draftId);
                                        return [2 /*return*/];
                                }
                            });
                        }); } },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-eye", "aria-hidden": true }),
                        "\u00A0", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["F\u00F6rhandsgranska"], ["F\u00F6rhandsgranska"]))))),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_5__["HorizontalItem"], null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button", { className: "btn", onClick: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                                history.push("/" + school + "/courses/" + courseId + "/tabs/" + (tabId || '$') + "/drafts/" + draftId + "/edit");
                                return [2 /*return*/];
                            });
                        }); } },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-arrow-left", "aria-hidden": true }),
                        "\u00A0", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C5terg\u00E5 till fliken"], ["\u00C5terg\u00E5 till fliken"]))))))),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null));
});
var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/task/right-column/task-working-procedure-editor.tsx":
/*!************************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/task/right-column/task-working-procedure-editor.tsx ***!
  \************************************************************************************************************/
/*! exports provided: TaskWorkingProcedureEditor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskWorkingProcedureEditor", function() { return TaskWorkingProcedureEditor; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_wysiwyg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../utility-components/wysiwyg */ "./src/components/utility-components/wysiwyg/index.tsx");
/* harmony import */ var _utility_components_wysiwyg_actions_sv__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../utility-components/wysiwyg/actions-sv */ "./src/components/utility-components/wysiwyg/actions-sv.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _common_dialog_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/dialog-context */ "./src/components/course-builder-ks/common/dialog-context.ts");
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");
/* harmony import */ var _common_select_word_bank__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../common/select-word-bank */ "./src/components/course-builder-ks/common/select-word-bank.tsx");
/* harmony import */ var _utility_components_wysiwyg_restore_selection__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../utility-components/wysiwyg/restore-selection */ "./src/components/utility-components/wysiwyg/restore-selection.ts");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");











function TaskWorkingProcedureEditor(_a) {
    var writeAccess = _a.writeAccess, task = _a.task, repo = _a.repo, step = _a.step;
    var dialogCtx = Object(react__WEBPACK_IMPORTED_MODULE_1__["useContext"])(_common_dialog_context__WEBPACK_IMPORTED_MODULE_5__["DialogsContext"]);
    var actions = [
        "olist",
        "link",
        "image"
    ];
    if (writeAccess && Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_6__["isKedStaff"])() && step != null) {
        // This task is put on a step. We could link to a word bank:
        actions.push({
            name: "listWordBank",
            icon: '<i class="fa fa-book" aria-hidden="true"></i>',
            title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4nka till ordbank"], ["L\u00E4nka till ordbank"]))),
            result: function (ev, wysiwyg) {
                var selection = Object(_utility_components_wysiwyg_restore_selection__WEBPACK_IMPORTED_MODULE_8__["saveSelection"])();
                dialogCtx.openDialog(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_common_select_word_bank__WEBPACK_IMPORTED_MODULE_7__["SelectWordBank"], { subject: task.subject, step: step, onSelect: function (_a) {
                        var name = _a.name, url = _a.url;
                        dialogCtx.closeDialog();
                        Object(_utility_components_wysiwyg_restore_selection__WEBPACK_IMPORTED_MODULE_8__["restoreSelection"])(selection);
                        var elem = document.createElement('a');
                        elem.href = url;
                        elem.appendChild(document.createTextNode(name));
                        document.execCommand('insertHTML', false, elem.outerHTML);
                    } }));
            }
        }, {
            icon: '<i class="fa fa-link" style="color:var(--col-accent)" aria-hidden="true"></i>',
            title: 'Resurs lnk',
            result: function () {
                var url = window.prompt('Ange lnkens URL fr resursen');
                if (url) {
                    //check that the entered URL is the same with the current one
                    var urlObj = new URL('', url);
                    if (urlObj.host !== window.location.host) {
                        Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["showError"])("Invalid Resource URL");
                        return;
                    }
                    //match the resourceId
                    var regex = new RegExp("([^\.]+).([^\.]+)(?=\.html)");
                    var urlResults = regex.exec(urlObj.pathname);
                    if (!_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_9__["cfg"].KED_RESOURCES_URL) {
                        Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["showError"])("Resources URL is not configured");
                        return;
                    }
                    //replace cfg value with the one from the provided url
                    var valueFromConfig = _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_9__["cfg"].KED_RESOURCES_URL.replace("{value}", urlResults[0]);
                    if (valueFromConfig)
                        document.execCommand('createLink', false, valueFromConfig);
                }
            }
        });
    }
    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h4", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Arbetsprocess"], ["Arbetsprocess"])))),
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_wysiwyg__WEBPACK_IMPORTED_MODULE_2__["Wysiwyg"], { actions: actions, defaultActions: _utility_components_wysiwyg_actions_sv__WEBPACK_IMPORTED_MODULE_3__["default"], readOnly: !writeAccess, html: task.workingProcedure || "", onChange: function (html) {
                repo.tasks.update(task, { workingProcedure: html });
            } }));
}
var templateObject_1, templateObject_2;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/task/task-editor.tsx":
/*!*****************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/task/task-editor.tsx ***!
  \*****************************************************************************/
/*! exports provided: TaskEditor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskEditor", function() { return TaskEditor; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_live_query_view__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utility-components/live-query-view */ "./src/components/utility-components/live-query-view.tsx");
/* harmony import */ var _common_two_columns_page__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/two-columns-page */ "./src/components/course-builder-ks/common/two-columns-page.tsx");
/* harmony import */ var _right_column_edit_task_form__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./right-column/edit-task-form */ "./src/components/course-builder-ks/viewer-editor/task/right-column/edit-task-form.tsx");
/* harmony import */ var _logic_ordered_requirements__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../logic/ordered-requirements */ "./src/components/course-builder-ks/logic/ordered-requirements.ts");
/* harmony import */ var _left_column_edit_requirements__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./left-column/edit-requirements */ "./src/components/course-builder-ks/viewer-editor/task/left-column/edit-requirements.tsx");
/* harmony import */ var _logic_is_employee__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../logic/is-employee */ "./src/components/course-builder-ks/logic/is-employee.ts");
/* harmony import */ var _course_builder_courses_business_logic__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../course-builder/courses/business-logic */ "./src/components/course-builder/courses/business-logic.ts");









var TaskEditor = Object(_utility_components_live_query_view__WEBPACK_IMPORTED_MODULE_2__["liveQueryView"])(function (_a) {
    var school = _a.school, course = _a.course, activeTab = _a.activeTab, draftId = _a.draftId, branch = _a.branch, contentId = _a.contentId, taskId = _a.taskId, blockId = _a.blockId;
    var themeCourseTab = course.tabs.find(function (t) { return t.id === activeTab; });
    var involvedTabIds = (themeCourseTab && themeCourseTab.tabClass === 'mission-tab') ?
        course.tabs.filter(function (tab) { return tab.tabClass === 'subject-tab'; }).map(function (tab) { return tab.id; }) :
        [activeTab];
    return branch.tasks
        .include("abilities", "centralContent", "knowledgeRequirements").includeIdsOnly()
        //.debug()
        .hasEdgesFrom([contentId])
        .toValue()
        .combineLatest(branch.courseTabs
        .include("abilities", "centralContent", "knowledgeRequirements")
        .includeIdsOnly()
        .ids(involvedTabIds))
        .switchMap(function (_a) {
        var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](_a, 2), tasks = _b[0], involvedTabs = _b[1];
        var task = tasks.filter(function (t) { return t.id === taskId; })[0];
        var uncoveredIds = Object(_course_builder_courses_business_logic__WEBPACK_IMPORTED_MODULE_8__["getIdsNotCoveredByReqReferencingDocs"])(involvedTabs, tasks);
        return Object(_logic_ordered_requirements__WEBPACK_IMPORTED_MODULE_5__["resolveRequirementOrder"])(task).map(function (task) {
            return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_common_two_columns_page__WEBPACK_IMPORTED_MODULE_3__["TwoColumnsPage"], { left: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_left_column_edit_requirements__WEBPACK_IMPORTED_MODULE_6__["EditRequirements"], { repo: branch, task: task, uncoveredIds: uncoveredIds, tabIds: involvedTabIds, blockId: blockId }), right: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_right_column_edit_task_form__WEBPACK_IMPORTED_MODULE_4__["EditTaskForm"], { repo: branch, school: school, course: course, draftId: draftId, tabId: activeTab, tab: involvedTabs.find(function (t) { return t.id === activeTab; }), contentId: contentId, writeAccess: Object(_logic_is_employee__WEBPACK_IMPORTED_MODULE_7__["isEmployee"])(school), task: task }), rightWidth: 6 });
        });
    });
});


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/task/texts.ts":
/*!**********************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/task/texts.ts ***!
  \**********************************************************************/
/*! exports provided: taskTypeHeadings */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "taskTypeHeadings", function() { return taskTypeHeadings; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");


var taskTypeHeadings = {
    exercise: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00D6vningsuppgift"], ["\u00D6vningsuppgift"]))),
    task: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppgift"], ["Uppgift"]))),
    assignment: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Inl\u00E4mningsuppgift"], ["Inl\u00E4mningsuppgift"])))
};
var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/task/viewer/task-viewer-page.tsx":
/*!*****************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/task/viewer/task-viewer-page.tsx ***!
  \*****************************************************************************************/
/*! exports provided: TaskViewerPage, TaskViewerPageInner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskViewerPage", function() { return TaskViewerPage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskViewerPageInner", function() { return TaskViewerPageInner; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_live_query_view__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../utility-components/live-query-view */ "./src/components/utility-components/live-query-view.tsx");
/* harmony import */ var _common_two_columns_page__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../common/two-columns-page */ "./src/components/course-builder-ks/common/two-columns-page.tsx");
/* harmony import */ var _weekplanner_weekplanner__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../weekplanner/weekplanner */ "./src/components/weekplanner/weekplanner.tsx");
/* harmony import */ var _task_viewer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./task-viewer */ "./src/components/course-builder-ks/viewer-editor/task/viewer/task-viewer.tsx");
/* harmony import */ var _utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../utility-components/lazy-content */ "./src/components/utility-components/lazy-content.tsx");
/* harmony import */ var _logic_ordered_requirements__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../logic/ordered-requirements */ "./src/components/course-builder-ks/logic/ordered-requirements.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var react_router__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react-router */ "./node_modules/react-router/es/index.js");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");












var TaskViewerPage = Object(_utility_components_live_query_view__WEBPACK_IMPORTED_MODULE_2__["liveQueryView"])(function (props) {
    return props.lazyRepo.map(function (repo) { return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(TaskViewerPageInner, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, props, { repo: repo }))); });
});
var TaskViewerPageInner = Object(react_router__WEBPACK_IMPORTED_MODULE_9__["withRouter"])(Object(_utility_components_live_query_view__WEBPACK_IMPORTED_MODULE_2__["liveQueryView"])(function (_a) {
    var school = _a.school, courseId = _a.courseId, activeTab = _a.activeTab, repo = _a.repo, taskId = _a.taskId, draftId = _a.draftId, contentId = _a.contentId, history = _a.history;
    return (repo.tasks
        .include("abilities", "centralContent", "knowledgeRequirements")
        .id(taskId)
        .map(function (task) { return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_common_two_columns_page__WEBPACK_IMPORTED_MODULE_3__["TwoColumnsPage"], { left: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_6__["LazyContent"], null, Object(_logic_ordered_requirements__WEBPACK_IMPORTED_MODULE_7__["resolveRequirementOrder"])(task).map(function (task) { return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_task_viewer__WEBPACK_IMPORTED_MODULE_5__["TaskViewer"], { school: school, task: task, courseId: courseId, abilities: task.abilities, centralContent: task.centralContent, requirements: task.knowledgeRequirements, futureAbilities: task.futureAbilities }),
            draftId && contentId && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("hr", null),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button", { className: "btn", onClick: function () { return history.push("/" + school + "/courses/" + courseId + "/tabs/" + activeTab + "/contents/" + contentId + "/tasks/" + taskId + "/drafts/" + draftId + "/edit"); } },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-lg fa-pencil" }),
                    " ", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_8__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Forts\u00E4tt redigera"], ["Forts\u00E4tt redigera"])))))); })), right: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_weekplanner_weekplanner__WEBPACK_IMPORTED_MODULE_4__["WeekPlanner"], { env: _globals_KED_env__WEBPACK_IMPORTED_MODULE_10__["default"], viewCourseUrl: _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_11__["default"].KED_COURSE_VIEWER_URL }), rightWidth: 5 }); }));
}));
var templateObject_1;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/task/viewer/task-viewer.tsx":
/*!************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/task/viewer/task-viewer.tsx ***!
  \************************************************************************************/
/*! exports provided: TaskViewer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskViewer", function() { return TaskViewer; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _logic_is_employee__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../logic/is-employee */ "./src/components/course-builder-ks/logic/is-employee.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _course_viewer_course_page_task_assignments__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../course-viewer/course-page/task-assignments */ "./src/components/course-viewer/course-page/task-assignments.tsx");
/* harmony import */ var _course_viewer_subcomponents_abilities_box__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../course-viewer/subcomponents/abilities-box */ "./src/components/course-viewer/subcomponents/abilities-box.tsx");
/* harmony import */ var _course_viewer_subcomponents_central_content_box__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../course-viewer/subcomponents/central-content-box */ "./src/components/course-viewer/subcomponents/central-content-box.tsx");
/* harmony import */ var _course_viewer_subcomponents_knowledge_requirements_table__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../course-viewer/subcomponents/knowledge-requirements-table */ "./src/components/course-viewer/subcomponents/knowledge-requirements-table.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _texts__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../texts */ "./src/components/course-builder-ks/viewer-editor/task/texts.ts");
/* harmony import */ var _common_future_abilities_box__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../common/future-abilities-box */ "./src/components/course-builder-ks/common/future-abilities-box.tsx");











var TaskViewer = function (_a) {
    var school = _a.school, task = _a.task, courseId = _a.courseId, abilities = _a.abilities, centralContent = _a.centralContent, requirements = _a.requirements, futureAbilities = _a.futureAbilities;
    var deadlineTooLate = task.deadline && moment__WEBPACK_IMPORTED_MODULE_3___default()(task.deadline).endOf('day') < moment__WEBPACK_IMPORTED_MODULE_3___default()();
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "sv-text-portlet sv-use-margins sv-skip-spacer" },
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "sv-text-portlet-content" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h1", { className: "h1" }, task.name))),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "sv-html-portlet sv-portlet" }, task.content && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { dangerouslySetInnerHTML: { __html: task.content } }))),
        task.description && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "sv-html-portlet sv-portlet" },
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: ["ked_boxed", "taskBox", task.taskType].join(' '), style: { clear: "both" } },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h2", null, _texts__WEBPACK_IMPORTED_MODULE_9__["taskTypeHeadings"][task.taskType] || Object(_utils_utils__WEBPACK_IMPORTED_MODULE_8__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppgift"], ["Uppgift"])))),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { dangerouslySetInnerHTML: { __html: task.description } }))),
        task.workingProcedure && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h3", { className: "h3" }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_8__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Arbetsprocess"], ["Arbetsprocess"])))),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "rich-text-readonly", dangerouslySetInnerHTML: { __html: task.workingProcedure } })),
        task.embeddedHtml && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { dangerouslySetInnerHTML: { __html: task.embeddedHtml } }),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null),
        task.taskType === 'assignment' ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h2", null, "Inl\u00E4mningsuppgift"),
            Object(_logic_is_employee__WEBPACK_IMPORTED_MODULE_2__["isEmployee"])(school) ?
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, "H\u00E4r kan du som l\u00E4rare se elevernas inl\u00E4mnade arbeten.") : Object(_logic_is_employee__WEBPACK_IMPORTED_MODULE_2__["isEmployee"])() ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_8__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Detta \u00E4r en inl\u00E4mningsuppgift med inl\u00E4mningsdatum ", ""], ["Detta \u00E4r en inl\u00E4mningsuppgift med inl\u00E4mningsdatum ", ""])), moment__WEBPACK_IMPORTED_MODULE_3___default()(task.deadline).format('YYYY-MM-DD'))) : react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, ". L\u00E4mna in ditt arbete som en pdf, doc eller odt fil genom att dra det till f\u00E4ltet under."),
                task.deadline ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("b", null,
                        "Den h\u00E4r uppgiften ",
                        deadlineTooLate ? 'skulle varit inlmnad ' : 'skall vara inlmnad ',
                        moment__WEBPACK_IMPORTED_MODULE_3___default()(task.deadline).format('YYYY-MM-DD'))) : undefined),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_viewer_course_page_task_assignments__WEBPACK_IMPORTED_MODULE_4__["TaskAssignments"], { courseId: courseId, taskId: task.id, school: school }),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null)) : undefined,
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "sv-html-portlet sv-portlet sv-skip-spacer" },
            abilities.length > 0 ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_viewer_subcomponents_abilities_box__WEBPACK_IMPORTED_MODULE_5__["AbilitiesBox"], { title: "Den h\u00E4r uppgiften behandlar f\u00F6ljande f\u00F6rm\u00E5gor", className: "larger", headerOpen: false, abilities: abilities }) : null,
            centralContent.length > 0 ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_viewer_subcomponents_central_content_box__WEBPACK_IMPORTED_MODULE_6__["CentralContentBox"], { title: "Den h\u00E4r uppgiften behandlar f\u00F6ljande centrala inneh\u00E5ll", className: "larger", headerOpen: false, centralContent: centralContent }) : null,
            requirements.length > 0 && task.taskType !== 'exercise' ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_viewer_subcomponents_knowledge_requirements_table__WEBPACK_IMPORTED_MODULE_7__["KnowledgeRequirementsBox"], { title: "I den h\u00E4r uppgiften bed\u00F6ms f\u00F6ljande kunskapskrav", className: "larger", headerOpen: false, requirements: requirements, idsToSubjectMap: task.idsToSubjectMap, explainedRequirements: task.explainedRequirements }) : null,
            futureAbilities.length > 0 ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_common_future_abilities_box__WEBPACK_IMPORTED_MODULE_10__["FutureAbilitiesBox"], { title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_8__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["I den h\u00E4r uppgiften behandlas f\u00F6ljande framtidsf\u00F6rm\u00E5gor"], ["I den h\u00E4r uppgiften behandlas f\u00F6ljande framtidsf\u00F6rm\u00E5gor"]))), selectedFAs: futureAbilities }) : null),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("hr", null),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("hr", null),
        task.resources && task.resources.length > 0 && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "sv-html-portlet sv-portlet" },
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h2", null, "Resurser kopplade till uppgiften"),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "taskContainer" }, task.resources.map(function (r, idx) {
                return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { key: idx, className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("a", { href: r.url }, r.name)));
            })),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null)),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null));
};
var templateObject_1, templateObject_2, templateObject_3, templateObject_4;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/version-history/delta-view.tsx":
/*!***************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/version-history/delta-view.tsx ***!
  \***************************************************************************************/
/*! exports provided: DeltaView */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DeltaView", function() { return DeltaView; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utility-components/lazy-content */ "./src/components/utility-components/lazy-content.tsx");
/* harmony import */ var _deltadoc_box__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./deltadoc-box */ "./src/components/course-builder-ks/viewer-editor/version-history/deltadoc-box.tsx");
/* harmony import */ var _deltalink_box__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./deltalink-box */ "./src/components/course-builder-ks/viewer-editor/version-history/deltalink-box.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");







function deltaKey(delta) {
    if (delta.type === 'modify')
        return delta.targetId;
    return delta.sourceId + delta.label + delta.targetId;
}
function DeltaView(_a) {
    var branchId = _a.branchId, tag = _a.tag, editable = _a.editable;
    var deltas = _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].branch(branchId).deltas;
    if (tag) {
        deltas = deltas.tags(tag);
    }
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_3__["LazyContent"], null, deltas.toValue().map(function (deltas) {
        return deltas.length === 0 ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", { style: { opacity: 0.5, fontStyle: 'italic' } }, tag ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Skolans version \u00E4r identisk med orginalet"], ["Skolans version \u00E4r identisk med orginalet"]))) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Det finns inga \u00E4ndringar att publicera."], ["Det finns inga \u00E4ndringar att publicera."]))))) :
            //
            // Normal view (list all changes + option to clear all)
            //
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "taskContainer odd-even" }, deltas.map(function (delta) {
                    var key = deltaKey(delta);
                    return delta.type === 'modify' ?
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_deltadoc_box__WEBPACK_IMPORTED_MODULE_4__["DeltaDocBox"], { delta: delta, editable: editable, key: key, onDelete: function () {
                                // Undo DeltaDoc
                                undoDeltaDoc(delta);
                            } }) :
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_deltalink_box__WEBPACK_IMPORTED_MODULE_5__["DeltaLinkBox"], { delta: delta, editable: editable, key: key, onDelete: function () {
                                // Undo Link
                                undoDeltaRelation(delta);
                            } });
                })),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button", { className: "btn btn-large btn-warning", onClick: function () {
                        var e_1, _a;
                        if (confirm(tag ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C5tg\u00E4rden \u00E5terst\u00E4llet kursen till standard.\n\nVill du forts\u00E4tta?"], ["\u00C5tg\u00E4rden \u00E5terst\u00E4llet kursen till standard.\\n\\nVill du forts\u00E4tta?"]))) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C5tg\u00E4rden raderar samtliga \u00E4ndringar som \u00E4nnu inte \u00E4r publicerade.\n\nVill du forts\u00E4tta?"], ["\u00C5tg\u00E4rden raderar samtliga \u00E4ndringar som \u00E4nnu inte \u00E4r publicerade.\\n\\nVill du forts\u00E4tta?"]))))) {
                            try {
                                for (var deltas_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](deltas), deltas_1_1 = deltas_1.next(); !deltas_1_1.done; deltas_1_1 = deltas_1.next()) {
                                    var delta = deltas_1_1.value;
                                    if (delta.type === 'modify') {
                                        undoDeltaDoc(delta);
                                    }
                                    else {
                                        undoDeltaRelation(delta);
                                    }
                                }
                            }
                            catch (e_1_1) { e_1 = { error: e_1_1 }; }
                            finally {
                                try {
                                    if (deltas_1_1 && !deltas_1_1.done && (_a = deltas_1.return)) _a.call(deltas_1);
                                }
                                finally { if (e_1) throw e_1.error; }
                            }
                        }
                    } }, tag ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C5terst\u00E4ll till orginalet"], ["\u00C5terst\u00E4ll till orginalet"]))) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_6 || (templateObject_6 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Radera alla opublicerade \u00E4ndringar"], ["Radera alla opublicerade \u00E4ndringar"])))));
    }));
    function undoDeltaRelation(delta) {
        _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].branch(branchId).table(delta.sourceTable)
            .undoLink(delta.sourceId, delta.label, delta.targetId);
    }
    function undoDeltaDoc(delta) {
        var undoings = {};
        Object.keys(delta.data).forEach(function (key) {
            undoings[key] = { $unset: 0 };
        });
        _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].branch(branchId).table(delta.table).update({
            id: delta.targetId,
            name: delta.targetName
        }, undoings);
    }
}
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/version-history/deltadoc-box.tsx":
/*!*****************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/version-history/deltadoc-box.tsx ***!
  \*****************************************************************************************/
/*! exports provided: DeltaDocBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DeltaDocBox", function() { return DeltaDocBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _model_friendly_names__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./model-friendly-names */ "./src/components/course-builder-ks/viewer-editor/version-history/model-friendly-names.ts");
/* harmony import */ var _course_builder_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../course-builder/utils */ "./src/components/course-builder/utils.ts");





function DeltaDocBox(_a) {
    var delta = _a.delta, editable = _a.editable, onDelete = _a.onDelete;
    var entityName = delta.targetName && Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["maxLength"])(delta.targetName, 80);
    var classNames = ["schoolCourse"];
    if (delta.$meta)
        classNames.push("entitymeta-" + delta.$meta);
    var friendlyEntityType = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["capitalizeFirst"])(_model_friendly_names__WEBPACK_IMPORTED_MODULE_3__["modelNames"].entityTypes[delta.table] || delta.table);
    var friendlyProps = Object.keys(delta.data).map(function (prop) {
        return ({
            propSpec: _model_friendly_names__WEBPACK_IMPORTED_MODULE_3__["modelNames"].propertyNames[prop],
            prop: prop
        });
    });
    var hasUnknownProps = friendlyProps.some(function (fp) { return !fp.propSpec; });
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: classNames.join(' ') },
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "align-horizontal" },
            editable ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top pull-right" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("a", { className: "removeItem", onClick: onDelete })) : null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" }, entityName ?
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("a", null,
                    friendlyEntityType,
                    " \"",
                    entityName,
                    "\"") :
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("a", null, friendlyEntityType))),
        friendlyProps.filter(function (_a) {
            var propSpec = _a.propSpec;
            return propSpec;
        }).map(function (_a) {
            var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](_a.propSpec, 2), type = _b[0], propName = _b[1], prop = _a.prop;
            return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { key: prop }, type === _model_friendly_names__WEBPACK_IMPORTED_MODULE_3__["deltaTypes"].Obscure ?
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, propName) :
                type === _model_friendly_names__WEBPACK_IMPORTED_MODULE_3__["deltaTypes"].HiddenChange ? null :
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null,
                        propName,
                        ": ",
                        _model_friendly_names__WEBPACK_IMPORTED_MODULE_3__["modelNames"].getPropVal(delta.data[prop])));
        }),
        hasUnknownProps ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", { title: JSON.stringify(delta.data, null, 4) }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndringar i interna egenskaper"], ["\u00C4ndringar i interna egenskaper"]))))) : null,
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", { className: "small" },
                Object(_course_builder_utils__WEBPACK_IMPORTED_MODULE_4__["shortDateFormat"])(delta.dateTime),
                " ",
                delta.contributors.join(', '))));
}
var templateObject_1;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/version-history/deltalink-box.tsx":
/*!******************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/version-history/deltalink-box.tsx ***!
  \******************************************************************************************/
/*! exports provided: DeltaLinkBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DeltaLinkBox", function() { return DeltaLinkBox; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _model_friendly_names__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./model-friendly-names */ "./src/components/course-builder-ks/viewer-editor/version-history/model-friendly-names.ts");
/* harmony import */ var _course_builder_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../course-builder/utils */ "./src/components/course-builder/utils.ts");




function DeltaLinkBox(_a) {
    var delta = _a.delta, editable = _a.editable, onDelete = _a.onDelete;
    var entityName = delta.targetName && Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["maxLength"])(delta.targetName, 80);
    var classNames = ["schoolCourse"];
    if (delta.$meta)
        classNames.push("entitymeta-" + delta.$meta);
    var friendlyOperation = _model_friendly_names__WEBPACK_IMPORTED_MODULE_2__["modelNames"].getModifiedLinkHeading(delta);
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: classNames.join(' ') },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "align-horizontal" },
            editable ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "horizontalItem top pull-right" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("a", { className: "removeItem", onClick: onDelete })) : null,
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "horizontalItem top" }, entityName ?
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("a", null,
                    friendlyOperation,
                    " \"",
                    entityName,
                    "\"") :
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("a", null, friendlyOperation))),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null,
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p", { className: "small" },
                Object(_course_builder_utils__WEBPACK_IMPORTED_MODULE_3__["shortDateFormat"])(delta.dateTime),
                " ",
                delta.contributor)));
}


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/version-history/index.tsx":
/*!**********************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/version-history/index.tsx ***!
  \**********************************************************************************/
/*! exports provided: VersionHistoryPage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VersionHistoryPage", function() { return VersionHistoryPage; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utility-components/lazy-content */ "./src/components/utility-components/lazy-content.tsx");
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _common_banner__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/banner */ "./src/components/course-builder-ks/common/banner.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/es/index.js");
/* harmony import */ var _version_history_box__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./version-history-box */ "./src/components/course-builder-ks/viewer-editor/version-history/version-history-box.tsx");








var VersionHistoryPage = function (_a) {
    var school = _a.school, courseId = _a.courseId;
    var schoolObservable = _globals_db__WEBPACK_IMPORTED_MODULE_3__["db"].schools.name(school).single();
    var draftObservable = _globals_db__WEBPACK_IMPORTED_MODULE_3__["CourseInstances"].getBranchId(schoolObservable, courseId)
        .map(function (draftId) { return _globals_db__WEBPACK_IMPORTED_MODULE_3__["db"].branch(draftId); });
    var branchObservable = schoolObservable.map(function (school) { return _globals_db__WEBPACK_IMPORTED_MODULE_3__["db"].branch(school.officialBranchId); });
    var bannerPropsObservable = draftObservable.switchMap(function (repo) { return repo.courseInstances.id(courseId).map(function (course) { return ({
        title: course.name,
        tabs: [{ name: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Versionshistorik"], ["Versionshistorik"]))), key: "versionhistory" }],
        buttons: [react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_6__["Link"], { to: "/" + school + "/courses/" + courseId, key: "$settings", title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Visa kursen"], ["Visa kursen"]))) },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-eye", "aria-hidden": true }),
                "\u00A0")]
    }); }); });
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_common_banner__WEBPACK_IMPORTED_MODULE_4__["LazyBanner"], { lazyProps: bannerPropsObservable }),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_2__["LazyContent"], null, schoolObservable.map(function (_a) {
            var schoolDisplayName = _a.displayName, officialBranchId = _a.officialBranchId;
            return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_version_history_box__WEBPACK_IMPORTED_MODULE_7__["VersionHistoryBox"], { branchType: "school-branch", branchId: officialBranchId, courseId: courseId, isAdmin: false });
        })));
    /*<button
      className="btn btn-large btn-warning"
      onClick={async ()=>{
        if (confirm(L`Alla modifieringar som gjorts fr skolan ${schoolDisplayName} kommer att frsvinna.
        
        Fortstt?`)) {
          const branch = await branchObservable.load();
          branch.clearBranch();
          db.branches.delete()
        }
      }}
    >{L`terstll kursen till standard`}</button> */
};
var templateObject_1, templateObject_2;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/version-history/model-friendly-names.ts":
/*!************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/version-history/model-friendly-names.ts ***!
  \************************************************************************************************/
/*! exports provided: deltaTypes, modelNames */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "deltaTypes", function() { return deltaTypes; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "modelNames", function() { return modelNames; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");


var Text = Symbol();
var Checkbox = Symbol();
var Obscure = Symbol();
var HiddenChange = Symbol();
var deltaTypes = {
    Text: Text,
    Checkbox: Checkbox,
    Obscure: Obscure,
    HiddenChange: HiddenChange
};
var modelNames = {
    entityTypes: {
        courseBlocks: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["kursblock"], ["kursblock"]))),
        courseContents: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["inneh\u00E5llsruta"], ["inneh\u00E5llsruta"]))),
        courseInstances: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["kurs"], ["kurs"]))),
        courseTabs: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["flik"], ["flik"]))),
        schools: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["skola"], ["skola"]))),
        tasks: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_6 || (templateObject_6 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["uppgift"], ["uppgift"]))),
    },
    modifiedLinks: {
        tabs: [Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_7 || (templateObject_7 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Tillagd flik"], ["Tillagd flik"]))), Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_8 || (templateObject_8 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Borttagen flik"], ["Borttagen flik"])))],
        blocks: [Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_9 || (templateObject_9 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Tillagt block"], ["Tillagt block"]))), Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_10 || (templateObject_10 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Borttaget block"], ["Borttaget block"])))],
        abilities: [Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_11 || (templateObject_11 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Tillagd f\u00F6rm\u00E5ga"], ["Tillagd f\u00F6rm\u00E5ga"]))), Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_12 || (templateObject_12 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Borttagen f\u00F6rm\u00E5ga"], ["Borttagen f\u00F6rm\u00E5ga"])))],
        centralContent: [Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_13 || (templateObject_13 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Tillagt centralt inneh\u00E5ll"], ["Tillagt centralt inneh\u00E5ll"]))), Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_14 || (templateObject_14 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Borttaget centralt inneh\u00E5ll"], ["Borttaget centralt inneh\u00E5ll"])))],
        knowledgeRequirements: [Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_15 || (templateObject_15 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Tillagt kunskapskrav"], ["Tillagt kunskapskrav"]))), Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_16 || (templateObject_16 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Borttaget kunskapskrav"], ["Borttaget kunskapskrav"])))],
        tasks: [Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_17 || (templateObject_17 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Tillagd uppgift"], ["Tillagd uppgift"]))), Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_18 || (templateObject_18 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Borttagen uppgift"], ["Borttagen uppgift"])))],
        contents: [Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_19 || (templateObject_19 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Tillagd inneh\u00E5llsruta"], ["Tillagd inneh\u00E5llsruta"]))), Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_20 || (templateObject_20 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Borttagen inneh\u00E5llsruta"], ["Borttagen inneh\u00E5llsruta"])))]
    },
    propertyNames: {
        allowAddTabs: [Checkbox, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_21 || (templateObject_21 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrat om till\u00E4gg av flik ska vara till\u00E5tet"], ["\u00C4ndrat om till\u00E4gg av flik ska vara till\u00E5tet"])))],
        allowRemoveTabs: [Checkbox, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_22 || (templateObject_22 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrat om borttagning av flik ska vara till\u00E5tet"], ["\u00C4ndrat om borttagning av flik ska vara till\u00E5tet"])))],
        allowReorderTabs: [Checkbox, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_23 || (templateObject_23 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrat om det ska va till\u00E5tet att \u00E4ndra ordning p\u00E5 flik"], ["\u00C4ndrat om det ska va till\u00E5tet att \u00E4ndra ordning p\u00E5 flik"])))],
        assignment: [Checkbox, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_24 || (templateObject_24 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrad flagga f\u00F6r inl\u00E4mningsuppgift"], ["\u00C4ndrad flagga f\u00F6r inl\u00E4mningsuppgift"])))],
        commonLearningGoals: [Text, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_25 || (templateObject_25 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrade gemensamma l\u00E4randem\u00E5l"], ["\u00C4ndrade gemensamma l\u00E4randem\u00E5l"])))],
        content: [Text, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_26 || (templateObject_26 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrad inneh\u00E5llstext"], ["\u00C4ndrad inneh\u00E5llstext"])))],
        createdBy: [HiddenChange, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_27 || (templateObject_27 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Skapad av"], ["Skapad av"])))],
        createdDate: [HiddenChange, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_28 || (templateObject_28 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Skapad datum"], ["Skapad datum"])))],
        dateTime: [Obscure, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_29 || (templateObject_29 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndat datum / tid"], ["\u00C4ndat datum / tid"])))],
        deadline: [Text, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_30 || (templateObject_30 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrat inl\u00E4mningsdatum"], ["\u00C4ndrat inl\u00E4mningsdatum"])))],
        description: [Text, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_31 || (templateObject_31 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrad beskrivning"], ["\u00C4ndrad beskrivning"])))],
        embeddedHtml: [Obscure, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_32 || (templateObject_32 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Lagt till inb\u00E4ddad HTML"], ["Lagt till inb\u00E4ddad HTML"])))],
        explainedRequirements: [Obscure, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_33 || (templateObject_33 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Lagt till egna f\u00F6rklaringar av kunskapskrav"], ["Lagt till egna f\u00F6rklaringar av kunskapskrav"])))],
        futureAbilities: [Text, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_34 || (templateObject_34 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrade framtidsf\u00F6rm\u00E5gor"], ["\u00C4ndrade framtidsf\u00F6rm\u00E5gor"])))],
        hasCommonLearningGoals: [Checkbox, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_35 || (templateObject_35 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrad inst\u00E4llning f\u00F6r gemensamma l\u00E4randem\u00E5l"], ["\u00C4ndrad inst\u00E4llning f\u00F6r gemensamma l\u00E4randem\u00E5l"])))],
        hidden: [Checkbox, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_36 || (templateObject_36 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrad flagga \"g\u00F6md\""], ["\u00C4ndrad flagga \"g\u00F6md\""])))],
        hiddenTasks: [Obscure, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_37 || (templateObject_37 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrat listan p\u00E5 g\u00F6mda uppgifter"], ["\u00C4ndrat listan p\u00E5 g\u00F6mda uppgifter"])))],
        html: [Obscure, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_38 || (templateObject_38 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrat inneh\u00E5ll"], ["\u00C4ndrat inneh\u00E5ll"])))],
        learningGoal: [Text, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_39 || (templateObject_39 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4randem\u00E5l"], ["L\u00E4randem\u00E5l"])))],
        lockDelete: [Checkbox, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_40 || (templateObject_40 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrat flagga: \"l\u00E5s fr\u00E5n borttagning\""], ["\u00C4ndrat flagga: \"l\u00E5s fr\u00E5n borttagning\""])))],
        locked: [Checkbox, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_41 || (templateObject_41 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrad flagga: \"f\u00F6rbjud \u00E4ndring av flikar\""], ["\u00C4ndrad flagga: \"f\u00F6rbjud \u00E4ndring av flikar\""])))],
        migratedTexts: [Obscure, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_42 || (templateObject_42 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndringar i migrerade texter fr\u00E5n skolverket"], ["\u00C4ndringar i migrerade texter fr\u00E5n skolverket"])))],
        modifiedBy: [HiddenChange, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_43 || (templateObject_43 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrad av"], ["\u00C4ndrad av"])))],
        modifiedDate: [HiddenChange, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_44 || (templateObject_44 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndringsdatum"], ["\u00C4ndringsdatum"])))],
        taskOrder: [Obscure, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_45 || (templateObject_45 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrad ordning p\u00E5 uppgifter"], ["\u00C4ndrad ordning p\u00E5 uppgifter"])))],
        name: [Text, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_46 || (templateObject_46 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrat namn"], ["\u00C4ndrat namn"])))],
        order: [Obscure, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_47 || (templateObject_47 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrad ordning"], ["\u00C4ndrad ordning"])))],
        resources: [Obscure, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_48 || (templateObject_48 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrade i resurser"], ["\u00C4ndrade i resurser"])))],
        school: [Text, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_49 || (templateObject_49 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Skola"], ["Skola"])))],
        stepNo: [Text, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_50 || (templateObject_50 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Stegnummer"], ["Stegnummer"])))],
        stepNumbers: [Text, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_51 || (templateObject_51 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Stegnummer"], ["Stegnummer"])))],
        subject: [Text, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_52 || (templateObject_52 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4mne"], ["\u00C4mne"])))],
        subjects: [Obscure, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_53 || (templateObject_53 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4mnen"], ["\u00C4mnen"])))],
        tabClass: [Text, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_54 || (templateObject_54 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Typ av flik"], ["Typ av flik"])))],
        tabTitle: [HiddenChange, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_55 || (templateObject_55 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Fliknamn"], ["Fliknamn"])))],
        taskType: [Text, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_56 || (templateObject_56 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppgiftstyp"], ["Uppgiftstyp"])))],
        url: [Text, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_57 || (templateObject_57 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Url"], ["Url"])))],
        workingProcedure: [Text, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_58 || (templateObject_58 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Arbetsprocess"], ["Arbetsprocess"])))],
        youtubeId: [Obscure, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_59 || (templateObject_59 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Youtube ID"], ["Youtube ID"])))]
    },
    getModifiedLinkHeading: function (delta) {
        var headingSpec = modelNames.modifiedLinks[delta.label];
        if (!headingSpec) {
            return delta.type === 'add' ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_60 || (templateObject_60 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Tillagt objekt"], ["Tillagt objekt"]))) :
                delta.type === 'remove' ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_61 || (templateObject_61 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Borttaget objekt"], ["Borttaget objekt"]))) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_62 || (templateObject_62 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C5ngrad l\u00E4nkning"], ["\u00C5ngrad l\u00E4nkning"]))); // Should never be
        }
        return delta.type === 'add' ?
            headingSpec[0] : delta.type === 'remove' ?
            headingSpec[1] : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_63 || (templateObject_63 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C5ngrad l\u00E4nkning"], ["\u00C5ngrad l\u00E4nkning"]))); // Should never be
    },
    getPropVal: function (p) {
        switch (p) {
            case true: return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_64 || (templateObject_64 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["P\u00E5slaget"], ["P\u00E5slaget"])));
            case false: return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_65 || (templateObject_65 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Avslaget"], ["Avslaget"])));
            case 'primary': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_66 || (templateObject_66 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Grundskola"], ["Grundskola"])));
            case 'gymnasium': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_67 || (templateObject_67 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Gymnasieskola"], ["Gymnasieskola"])));
            case 'exercise': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_68 || (templateObject_68 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00D6vningsuppgift"], ["\u00D6vningsuppgift"])));
            case 'task': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_69 || (templateObject_69 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppgift"], ["Uppgift"])));
            case 'assignment': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_70 || (templateObject_70 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Inl\u00E4mningsuppgift"], ["Inl\u00E4mningsuppgift"])));
            case 'theme-course': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_71 || (templateObject_71 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Temakurs"], ["Temakurs"])));
            case 'step-course': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_72 || (templateObject_72 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Stegkurs"], ["Stegkurs"])));
            case 'intro-tab': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_73 || (templateObject_73 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Introduktionsflik"], ["Introduktionsflik"])));
            case 'run-up-tab': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_74 || (templateObject_74 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Upptakt"], ["Upptakt"])));
            case 'subject-tab': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_75 || (templateObject_75 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4mnesflik"], ["\u00C4mnesflik"])));
            case 'mission-tab': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_76 || (templateObject_76 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppdragsflik"], ["Uppdragsflik"])));
            case 'content-tab': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_77 || (templateObject_77 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Inneh\u00E5llsflik"], ["Inneh\u00E5llsflik"])));
            case 'teacher-tab': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_78 || (templateObject_78 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4rarsida"], ["L\u00E4rarsida"])));
            case 'word-bank-tab': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_79 || (templateObject_79 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ordbank"], ["Ordbank"])));
            default: {
                if (p == null)
                    return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_80 || (templateObject_80 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Nollst\u00E4llt"], ["Nollst\u00E4llt"])));
                if (p === "")
                    return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_81 || (templateObject_81 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["(tomt)"], ["(tomt)"])));
                if (typeof p === 'string')
                    return p;
                if (p.subjectName)
                    return p.subjectName;
                return JSON.stringify(p, null, 2);
            }
        }
    }
};
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8, templateObject_9, templateObject_10, templateObject_11, templateObject_12, templateObject_13, templateObject_14, templateObject_15, templateObject_16, templateObject_17, templateObject_18, templateObject_19, templateObject_20, templateObject_21, templateObject_22, templateObject_23, templateObject_24, templateObject_25, templateObject_26, templateObject_27, templateObject_28, templateObject_29, templateObject_30, templateObject_31, templateObject_32, templateObject_33, templateObject_34, templateObject_35, templateObject_36, templateObject_37, templateObject_38, templateObject_39, templateObject_40, templateObject_41, templateObject_42, templateObject_43, templateObject_44, templateObject_45, templateObject_46, templateObject_47, templateObject_48, templateObject_49, templateObject_50, templateObject_51, templateObject_52, templateObject_53, templateObject_54, templateObject_55, templateObject_56, templateObject_57, templateObject_58, templateObject_59, templateObject_60, templateObject_61, templateObject_62, templateObject_63, templateObject_64, templateObject_65, templateObject_66, templateObject_67, templateObject_68, templateObject_69, templateObject_70, templateObject_71, templateObject_72, templateObject_73, templateObject_74, templateObject_75, templateObject_76, templateObject_77, templateObject_78, templateObject_79, templateObject_80, templateObject_81;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/version-history/version-history-box.tsx":
/*!************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/version-history/version-history-box.tsx ***!
  \************************************************************************************************/
/*! exports provided: VersionHistoryBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VersionHistoryBox", function() { return VersionHistoryBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _delta_view__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./delta-view */ "./src/components/course-builder-ks/viewer-editor/version-history/delta-view.tsx");




function VersionHistoryBox(props) {
    var title = props.branchType === 'school-branch' ?
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h2", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Skolans \u00E4ndringar"], ["Skolans \u00E4ndringar"])))) :
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h3", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Opublicerade \u00E4ndringar"], ["Opublicerade \u00E4ndringar"]))));
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "ked_boxed" },
        title,
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_delta_view__WEBPACK_IMPORTED_MODULE_3__["DeltaView"], { branchId: props.branchId, editable: !props.isAdmin, tag: props.branchType === 'school-branch' ? props.courseId : null }));
}
var templateObject_1, templateObject_2;


/***/ }),

/***/ "./src/components/course-builder/courses/business-logic.ts":
/*!*****************************************************************!*\
  !*** ./src/components/course-builder/courses/business-logic.ts ***!
  \*****************************************************************/
/*! exports provided: getUncoveredKnowledgeRequirements, getIdsNotCoveredByTasks, getIdsNotCoveredByReqReferencingDocs, sanityCheck, getTasksPerId, getSoftAccessList */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getUncoveredKnowledgeRequirements", function() { return getUncoveredKnowledgeRequirements; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getIdsNotCoveredByTasks", function() { return getIdsNotCoveredByTasks; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getIdsNotCoveredByReqReferencingDocs", function() { return getIdsNotCoveredByReqReferencingDocs; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sanityCheck", function() { return sanityCheck; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTasksPerId", function() { return getTasksPerId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSoftAccessList", function() { return getSoftAccessList; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils */ "./src/components/course-builder/utils.ts");



function getUncoveredKnowledgeRequirements(course) {
    var uncoveredRequirements = course.knowledgeRequirements.reduce(function (result, item) {
        result[item.id] = item;
        return result;
    }, {});
    course.tasks.forEach(function (task) {
        task.knowledgeRequirements.forEach(function (kr) {
            delete uncoveredRequirements[kr.id];
        });
    });
    return Object.keys(uncoveredRequirements).map(function (id) { return uncoveredRequirements[id]; });
}
function getIdsNotCoveredByTasks(course) {
    return getIdsNotCoveredByReqReferencingDocs([course], course.tasks);
}
function getIdsNotCoveredByReqReferencingDocs(templates, docsBeingChecked) {
    var uncoveredIds = {};
    // 1. Mark the ids of all knowledge requirements, abilities and central content for this course:
    templates.forEach(function (course) {
        course.knowledgeRequirements.forEach(function (r) {
            uncoveredIds[r.id] = true;
        });
        course.abilities.forEach(function (a) {
            uncoveredIds[a.id] = true;
        });
        course.centralContent.forEach(function (cc) {
            uncoveredIds[cc.id] = true;
        });
    });
    // 2. List all tasks and unmark all ids that they refer to
    docsBeingChecked.forEach(function (doc) {
        doc.knowledgeRequirements.forEach(function (kr) {
            delete uncoveredIds[kr.id];
        });
        doc.abilities.forEach(function (a) {
            delete uncoveredIds[a.id];
        });
        doc.centralContent.forEach(function (cc) {
            delete uncoveredIds[cc.id];
        });
    });
    return uncoveredIds;
}
function sanityCheck(course) {
    function hasDuplicateTasks(course) {
        var taskIds = {};
        return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["flatten"])(course.modules.map(function (module) { return module.taskIds.map(function (taskId) {
            if (taskIds[taskId]) {
                var task = course.tasks.find(function (t) { return t.id === taskId; });
                return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Samma uppgift f\u00F6rekommer flera g\u00E5nger: \"", "\""], ["Samma uppgift f\u00F6rekommer flera g\u00E5nger: \"", "\""])), task.name);
            }
            taskIds[taskId] = true;
        }).filter(function (x) { return x; }); }));
    }
    function tasksWithSameUrl(course) {
        var taskUrls = {};
        return course.tasks.map(function (task) {
            if (task.url) {
                if (taskUrls[task.url]) {
                    return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Tv\u00E5 uppgifter pekar p\u00E5 samma URL: \"", "\" samt \"", "\""], ["Tv\u00E5 uppgifter pekar p\u00E5 samma URL: \"", "\" samt \"", "\""])), taskUrls[task.url].name, task.name);
                }
                taskUrls[task.url] = task;
            }
        }).filter(function (x) { return x; });
    }
    function hasEmptyModuleNames(course) {
        return course.modules.some(function (module) { return module.name === ""; }) && Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Det finns minst en modul utan angivet namn"], ["Det finns minst en modul utan angivet namn"])));
    }
    function hasDuplicateModuleNames(course) {
        var moduleNames = {};
        return course.modules.map(function (module) {
            if (module.name && moduleNames[module.name]) {
                return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Modulen med namn ", " f\u00F6rekommer flera g\u00E5nger"], ["Modulen med namn ", " f\u00F6rekommer flera g\u00E5nger"])), module.name);
            }
            if (module.name)
                moduleNames[module.name] = true;
        });
    }
    var checks = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["flatten"])([
        hasDuplicateTasks(course),
        tasksWithSameUrl(course),
        hasEmptyModuleNames(course),
        hasDuplicateModuleNames(course)
    ]);
    return checks.filter(function (result) { return result; });
}
function getTasksPerId(course) {
    var result = {};
    function add(id, task) {
        var list = result[id] || (result[id] = []);
        list.push(task);
    }
    course.tasks.forEach(function (task) {
        task.abilities.forEach(function (a) { return add(a.id, task); });
        task.centralContent.forEach(function (c) { return add(c.id, task); });
        task.futureAbilities.forEach(function (fa) { return add(fa, task); });
    });
    return result;
}
/** Returns an access list for a course in a backward compatible way */
function getSoftAccessList(course) {
    var responsibleTeachers = course.responsibleTeachers;
    var result = responsibleTeachers.map(function (da) { return ({
        name: da.name,
        email: Object(_utils__WEBPACK_IMPORTED_MODULE_2__["getEmailFromDocAccess"])(da),
        access: da.access || 'edit'
    }); });
    return result;
}
var templateObject_1, templateObject_2, templateObject_3, templateObject_4;


/***/ }),

/***/ "./src/components/course-builder/modal-pages/edit-resource.tsx":
/*!*********************************************************************!*\
  !*** ./src/components/course-builder/modal-pages/edit-resource.tsx ***!
  \*********************************************************************/
/*! exports provided: EditResource */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditResource", function() { return EditResource; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils */ "./src/components/course-builder/utils.ts");
/* harmony import */ var valid_url__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! valid-url */ "./node_modules/valid-url/index.js");
/* harmony import */ var valid_url__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(valid_url__WEBPACK_IMPORTED_MODULE_4__);





var EditResource = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](EditResource, _super);
    function EditResource(props) {
        var _this = _super.call(this, props) || this;
        _this.state = _this.props.resource || { name: '', url: '' };
        return _this;
    }
    EditResource.prototype.save = function () {
        var resource = this.state;
        if (!valid_url__WEBPACK_IMPORTED_MODULE_4___default.a.isUri(resource.url))
            throw new Error(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Angiven URL '", "' \u00E4r ogiltig. Ska b\u00F6rja med exempelvis http:, https: eller mailto:"], ["Angiven URL '", "' \u00E4r ogiltig. Ska b\u00F6rja med exempelvis http:, https: eller mailto:"])), resource.url));
        this.props.onSave(resource);
    };
    EditResource.prototype.render = function () {
        var _this = this;
        var _a = this.props, title = _a.title, onSave = _a.onSave, onDelete = _a.onDelete;
        var resource = this.state;
        var isValidUrl = valid_url__WEBPACK_IMPORTED_MODULE_4___default.a.isUri(this.state.url);
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet sv-skip-spacer" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null, title),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" }, "Namn:"),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { type: "text", autoFocus: true, tabIndex: 1, size: 50, value: resource.name, onChange: function (ev) { return _this.setState({ name: ev.target.value }); } })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top spaced" })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" }, "L\u00E4nk:"),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top " },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { type: "text", tabIndex: 1, size: 50, value: resource.url, onChange: function (ev) { return _this.setState({ url: ev.target.value }); } })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top spaced" })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null)),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet" },
                (resource.createdDate || resource.modifiedDate) && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                    resource.createdDate && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                        "Resursen/L\u00E4nken skapades ",
                        Object(_utils__WEBPACK_IMPORTED_MODULE_3__["dtFormat"])(resource.createdDate),
                        " av ",
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("strong", null, resource.createdBy.name),
                        "."),
                    resource.modifiedDate && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                        "Resursen/L\u00E4nken redigerades senast ",
                        Object(_utils__WEBPACK_IMPORTED_MODULE_3__["dtFormat"])(resource.modifiedDate),
                        " av ",
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("strong", null, resource.modifiedBy.name),
                        "."),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null)),
                onDelete && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { tabIndex: 2, className: "btn btn-warning btn-large pull-right", onClick: function () { return onDelete(); } }, "Ta bort resurs/l\u00E4nk"),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { tabIndex: 1, className: "btn btn-large" + (isValidUrl ? "" : " btn-inactive"), onClick: isValidUrl && (function () { return onSave(resource); }) }, "Spara")));
    };
    return EditResource;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

var templateObject_1;


/***/ }),

/***/ "./src/components/course-builder/modal-pages/edit-task/task-migration-box.tsx":
/*!************************************************************************************!*\
  !*** ./src/components/course-builder/modal-pages/edit-task/task-migration-box.tsx ***!
  \************************************************************************************/
/*! exports provided: TaskMigrationBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskMigrationBox", function() { return TaskMigrationBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");



var TaskMigrationBox = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](TaskMigrationBox, _super);
    function TaskMigrationBox(props) {
        return _super.call(this, props) || this;
    }
    TaskMigrationBox.prototype.render = function () {
        var _a = this.props, task = _a.task, course = _a.course, updateLink = _a.updateLink;
        if (!task.migratedTexts)
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null, "\u00A0");
        var _b = task.migratedTexts, abilities = _b.abilities, centralContent = _b.centralContent, knowledgeRequirements = _b.knowledgeRequirements;
        var krs = Object.keys(knowledgeRequirements || {}).map(function (id) { return (tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, course.knowledgeRequirements.find(function (t) { return t.id === id; }), knowledgeRequirements[id])); }); //.filter(({name}) => !!name);
        var krA = { title: "Uppdaterat kunskapskrav fr betyget A", type: "knowledgeRequirements", items: krs.filter(function (kr) { return kr.gradeStep === 'A'; }) };
        var krC = { title: "Uppdaterat Kunskapskrav fr betyget C", type: "knowledgeRequirements", items: krs.filter(function (kr) { return kr.gradeStep === 'C'; }) };
        var krE = { title: "Uppdaterat kunskapskrav fr betyget E", type: "knowledgeRequirements", items: krs.filter(function (kr) { return kr.gradeStep === 'E'; }) };
        var abs = { title: "Uppdaterade frmgor", type: "abilities", items: Object.keys(abilities || {}).map(function (id) { return (tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, course.abilities.find(function (t) { return t.id === id; }), abilities[id])); }) }; //.filter(({name}) => !!name)};
        var ccs = { title: "Uppdaterat centralt innehll", type: "centralContent", items: Object.keys(centralContent || {}).map(function (id) { return (tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, course.centralContent.find(function (cc) { return cc.id == id; }), centralContent[id])); }) }; //.filter(({name}) => !!name)};
        var tablesToShow = [krA, krC, krE, ccs, abs].filter(function (boxInfo) { return boxInfo.items.length > 0; });
        if (tablesToShow.length === 0)
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null, "\u00A0");
        return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_2__["OpenCloseBox"], { className: "larger", title: react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "warningFlag" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-exclamation-triangle", "aria-hidden": "true" })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, "Uppdaterade formuleringar fr\u00E5n Skolverket")) }, tablesToShow.map(function (_a) {
            var title = _a.title, type = _a.type, items = _a.items;
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: title },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h5", null, title),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("table", null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("thead", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { style: { width: "40%" } }, "Ursprunglig formulering"),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { style: { width: "40%" } }, "Skolverkets nya formulering"),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "T\u00E4cker uppgiften den nya formuleringen?"))),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tbody", null, items.map(function (item) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", { key: item.id },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { dangerouslySetInnerHTML: { __html: item.oldText } }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { dangerouslySetInnerHTML: { __html: item.name } }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { onClick: function () { return updateLink(item.id, true); } }, "Ja - beh\u00E5ll kopplingen"),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { onClick: function () { return updateLink(item.id, false); } }, "Nej - ta bort kopplingen"))); }))));
        })));
    };
    return TaskMigrationBox;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/course-builder/sub-components/ellipsis-loader.tsx":
/*!**************************************************************************!*\
  !*** ./src/components/course-builder/sub-components/ellipsis-loader.tsx ***!
  \**************************************************************************/
/*! exports provided: EllipsisLoader */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EllipsisLoader", function() { return EllipsisLoader; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var EllipsisLoader = function () {
    return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("img", { style: { border: 0, margin: 0, padding: 0 }, className: "ellipsis-loader" });
};


/***/ }),

/***/ "./src/components/course-builder/sub-components/knowledge-matrix.tsx":
/*!***************************************************************************!*\
  !*** ./src/components/course-builder/sub-components/knowledge-matrix.tsx ***!
  \***************************************************************************/
/*! exports provided: KnowledgeMatrix */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KnowledgeMatrix", function() { return KnowledgeMatrix; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");



var KnowledgeMatrix = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](KnowledgeMatrix, _super);
    function KnowledgeMatrix(props) {
        return _super.call(this, props) || this;
    }
    KnowledgeMatrix.prototype.render = function () {
        var _a = this.props, knowledgeRequirements = _a.knowledgeRequirements, markedIds = _a.markedIds, migratedIds = _a.migratedIds, explainedRequirements = _a.explainedRequirements;
        var _b = this.props, idsToMarkNotOk = _b.idsToMarkNotOk, markMode = _b.markMode, onMarkChanged = _b.onMarkChanged, onExplainedRequirementsChanged = _b.onExplainedRequirementsChanged;
        var columns = ["E", "C", "A"];
        var rows = [];
        var reqs = knowledgeRequirements.slice();
        var row = null;
        while (true) {
            row = columns.map(function (grade) {
                var pNext = reqs.findIndex(function (r) { return r.gradeStep && r.gradeStep.toUpperCase() === grade; });
                if (pNext < 0)
                    return null;
                var rv = reqs[pNext];
                reqs.splice(pNext, 1);
                return rv;
            });
            if (row.every(function (r) { return r === null; }))
                break;
            rows.push(row);
        }
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("table", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("thead", null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null, columns.map(function (c) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { key: c }, c); }))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tbody", null, rows.map(function (row, i) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], { key: i },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null, row.map(function (requirement, j) {
                        var isMarkedOK = requirement && markedIds && markedIds.indexOf(requirement.id) >= 0;
                        var isMarkedNotOK = requirement && idsToMarkNotOk && idsToMarkNotOk[requirement.id];
                        var isMigrated = requirement && migratedIds && !!migratedIds[requirement.id];
                        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { key: j, dangerouslySetInnerHTML: { __html: requirement ? requirement.name : "" }, className: (markMode ? "selectable" : "") +
                                (isMigrated ? " migrated" : "") +
                                (isMarkedOK ?
                                    " markedGreen" :
                                    (isMarkedNotOK ?
                                        " markedRed" :
                                        "")), onClick: markMode && requirement ?
                                function () { return onMarkChanged(requirement.id, !isMarkedOK); } :
                                undefined, title: isMigrated ?
                                markMode ?
                                    "Skolverket har uppdaterat textens formulering. Du kan granska \u00E4ndringen genom att f\u00E4lla ut varningsboxen till h\u00F6ger, med titel \"Uppdaterade formuleringar fr\u00E5n Skolverket\"" :
                                    "Skolverket har uppdaterat textens formulering, men detta har \u00E4nnu inte granskats av uppgiftens redigeringsbeh\u00F6rige" :
                                undefined });
                    })),
                    explainedRequirements && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null, row.map(function (requirement, j) {
                        var isMarkedOK = requirement && markedIds && markedIds.indexOf(requirement.id) >= 0;
                        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { key: j }, isMarkedOK ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("textarea", { placeholder: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Beskriv kravet"], ["Beskriv kravet"]))), className: "inputTextBox inputTextLarge", style: { width: "100%" }, readOnly: !markMode, value: explainedRequirements[requirement.id] || "", onChange: onExplainedRequirementsChanged && (function (ev) { return onExplainedRequirementsChanged(requirement.id, ev.target.value); }) }) : undefined);
                    }))); }))));
        { /*return <div>
          <table>
            <thead>
              <tr>
                <th>E</th>
                <th>C</th>
                <th>A</th>
              </tr>
            </thead>
            <tbody>
              {tbody.map((row, i) =>
              <tr key={i}>{row.map((cell, j) => {
                const isMarkedOK = props.markedIds && props.markedIds.indexOf(cell.id) >= 0;
                const isMarkedNotOK = props.idsToMarkNotOk && props.idsToMarkNotOk[cell.id];
                return <td
                  key={j}
                  rowSpan={cell.rowSpan}
                  className={(props.markMode ? "selectable" : "") +
                    (isMarkedOK ?
                      " markedGreen" :
                      (isMarkedNotOK ?
                        " markedRed":
                        ""))}
                  onClick={props.markMode && (()=>props.onMarkChanged(cell.id, !isMarkedOK))}>
                  {cell.html && <div style={{position: 'relative'}}>
                    <p
                      className={cell.type === 'ability' ? 'abilityText' : 'criteriaText'}
                      dangerouslySetInnerHTML={{__html: cell.html}} />
                    {props.editMode && <RemoveItem className="upperRight" onClick={()=>
                      this.setCellIds(
                        cell.type,
                        cell.rowIndex,
                        this.getCellIds(
                          cell.type,
                          cell.rowIndex).filter(id => id != cell.id) )} /> }
                  </div>}
                </td>})}
              </tr>)}
            </tbody>
          </table>
        </div>*/
        }
    };
    return KnowledgeMatrix;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

var templateObject_1;


/***/ }),

/***/ "./src/components/course-builder/sub-components/remove-item.tsx":
/*!**********************************************************************!*\
  !*** ./src/components/course-builder/sub-components/remove-item.tsx ***!
  \**********************************************************************/
/*! exports provided: RemoveItem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RemoveItem", function() { return RemoveItem; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");



;
var RemoveItem = function (_a) {
    var onClick = _a.onClick, className = _a.className, style = _a.style, title = _a.title;
    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { title: title || Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Radera"], ["Radera"]))), className: "removeItem " + (className || ""), onClick: onClick, style: style });
};
var templateObject_1;


/***/ }),

/***/ "./src/components/course-builder/sub-components/select-related-docs.tsx":
/*!******************************************************************************!*\
  !*** ./src/components/course-builder/sub-components/select-related-docs.tsx ***!
  \******************************************************************************/
/*! exports provided: SelectRelatedDocs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SelectRelatedDocs", function() { return SelectRelatedDocs; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");




var SelectRelatedDocs = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](SelectRelatedDocs, _super);
    function SelectRelatedDocs(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {};
        return _this;
    }
    SelectRelatedDocs.prototype.render = function () {
        var _this = this;
        var _a = this.props, options = _a.options, title = _a.title, markedIds = _a.markedIds, markMode = _a.markMode, migratedIds = _a.migratedIds, uncoveredIds = _a.uncoveredIds;
        var groupedOptions = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["arrayToLookup"])(options, function (d) { return d.group || "default"; });
        var groups = Object.keys(groupedOptions);
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_2__["OpenCloseBox"], { title: react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, title), className: "larger" }, groups.map(function (group) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], { key: group },
            groups.length === 1 ? null : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h5", null, group),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null)),
            groupedOptions[group].map(function (option) {
                var isMarked = markedIds.some(function (x) { return x === option.id; });
                var isMigrated = migratedIds && !!migratedIds[option.id];
                var isUncovered = uncoveredIds && uncoveredIds[option.id];
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal", key: option.id, onClick: function () {
                        return markMode && _this.props.onMarkChanged(option.id, !isMarked);
                    } },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top spaced" +
                            (markMode ? " selectable" : "") +
                            (isMarked ? " markedGreen" : (isUncovered ?
                                " markedRed" :
                                "")) +
                            (isMigrated ? " migrated" : ""), title: isMigrated ?
                            markMode ?
                                "Skolverket har uppdaterat textens formulering. Du kan granska \u00E4ndringen genom att f\u00E4lla ut varningsboxen till h\u00F6ger, med titel \"Uppdaterade formuleringar fr\u00E5n Skolverket\"" :
                                "Skolverket har uppdaterat textens formulering, men detta har \u00E4nnu inte granskats av uppgiftens redigeringsbeh\u00F6rige" :
                            undefined },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { dangerouslySetInnerHTML: { __html: option.name } }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null)));
            })); }));
    };
    return SelectRelatedDocs;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/course-builder/sub-components/spinner.tsx":
/*!******************************************************************!*\
  !*** ./src/components/course-builder/sub-components/spinner.tsx ***!
  \******************************************************************/
/*! exports provided: Spinner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Spinner", function() { return Spinner; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var Spinner = function () { return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("span", null,
    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("i", { className: "fa fa-spinner fa-spin", "aria-hidden": "true" }),
    "\u00A0"); };


/***/ }),

/***/ "./src/components/course-builder/utils.ts":
/*!************************************************!*\
  !*** ./src/components/course-builder/utils.ts ***!
  \************************************************/
/*! exports provided: updateDocumentGraphs, dtFormat, shortDateFormat, shortPersonNameFormat, updateModificationStamp, updateCreationStamp, getEmailFromDocAccess, updateModificationAndCreationStamps, applyEtags, readBlob, readBlobAsText, readBlobAsDataUrl, allowCopy, updateCourseBuilderStatus, loadCourse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateDocumentGraphs", function() { return updateDocumentGraphs; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dtFormat", function() { return dtFormat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shortDateFormat", function() { return shortDateFormat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shortPersonNameFormat", function() { return shortPersonNameFormat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateModificationStamp", function() { return updateModificationStamp; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateCreationStamp", function() { return updateCreationStamp; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getEmailFromDocAccess", function() { return getEmailFromDocAccess; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateModificationAndCreationStamps", function() { return updateModificationAndCreationStamps; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "applyEtags", function() { return applyEtags; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "readBlob", function() { return readBlob; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "readBlobAsText", function() { return readBlobAsText; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "readBlobAsDataUrl", function() { return readBlobAsDataUrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "allowCopy", function() { return allowCopy; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateCourseBuilderStatus", function() { return updateCourseBuilderStatus; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "loadCourse", function() { return loadCourse; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var react_addons_update__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-addons-update */ "./node_modules/react-addons-update/index.js");
/* harmony import */ var react_addons_update__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_addons_update__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jquery */ "jquery");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../globals/KED.env */ "./src/globals/KED.env.ts");






function updateDocumentGraphs(oldDoc, newDoc, table, graphs, batch) {
    var e_1, _a;
    var docUpdates = {};
    var docId = newDoc.id;
    var _loop_1 = function (navProp) {
        var e_2, _a, e_3, _b, e_4, _c;
        var foreignTable = graphs[navProp];
        var oldList = oldDoc[navProp] || [];
        var newList = newDoc[navProp];
        if (!newList)
            return "continue";
        var tuples = newList
            .map(function (doc, idx) { return ({ doc: doc, idx: idx }); }); // Create tubles of {doc, array-index} so we can update result
        var added = tuples.filter(function (tuple) { return !oldList.some(function (o) { return o.id === tuple.doc.id; }); }); // Find added items
        try {
            for (var added_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](added), added_1_1 = added_1.next(); !added_1_1.done; added_1_1 = added_1.next()) {
                var a = added_1_1.value;
                var mutatedSubDoc = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, a.doc);
                var meta = mutatedSubDoc.$meta;
                delete mutatedSubDoc.$meta; // Delete $meta so that "add" or "update" does not persiste to next state.
                if (meta === 'add') {
                    if (!mutatedSubDoc.id)
                        mutatedSubDoc.id = Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_2__["createUUID"])(); // Generate ID if not done yet.
                    // Now put an 'add' mutation in the batch queue.
                    batch.add(foreignTable, mutatedSubDoc);
                }
                else if (meta === 'update') {
                    batch.put(foreignTable, mutatedSubDoc);
                }
                batch.link(table, docId, foreignTable, mutatedSubDoc.id, navProp);
                // Update result so that state is reflected after succesful POST to server.
                if (!docUpdates[navProp])
                    docUpdates[navProp] = {};
                docUpdates[navProp][a.idx] = { $set: mutatedSubDoc };
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (added_1_1 && !added_1_1.done && (_a = added_1.return)) _a.call(added_1);
            }
            finally { if (e_2) throw e_2.error; }
        }
        var removed = oldList.filter(function (o) { return !newList.some(function (n) { return n.id === o.id; }); });
        try {
            for (var removed_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](removed), removed_1_1 = removed_1.next(); !removed_1_1.done; removed_1_1 = removed_1.next()) {
                var r = removed_1_1.value;
                batch.unlink(table, docId, foreignTable, r.id, navProp);
            }
        }
        catch (e_3_1) { e_3 = { error: e_3_1 }; }
        finally {
            try {
                if (removed_1_1 && !removed_1_1.done && (_b = removed_1.return)) _b.call(removed_1);
            }
            finally { if (e_3) throw e_3.error; }
        }
        var updated = tuples.filter(function (tuple) { return oldList.some(function (o) { return o.id === tuple.doc.id && tuple.doc.$meta === 'update'; }); });
        try {
            for (var updated_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](updated), updated_1_1 = updated_1.next(); !updated_1_1.done; updated_1_1 = updated_1.next()) {
                var u = updated_1_1.value;
                var mutatedSubDoc = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, u.doc);
                delete mutatedSubDoc.$meta;
                batch.put(foreignTable, mutatedSubDoc);
                // Update result so that $meta is removed from navigation prop after successful POST to server.
                if (!docUpdates[navProp])
                    docUpdates[navProp] = {};
                docUpdates[navProp][u.idx] = { $set: mutatedSubDoc };
            }
        }
        catch (e_4_1) { e_4 = { error: e_4_1 }; }
        finally {
            try {
                if (updated_1_1 && !updated_1_1.done && (_c = updated_1.return)) _c.call(updated_1);
            }
            finally { if (e_4) throw e_4.error; }
        }
    };
    try {
        for (var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](Object.keys(graphs)), _c = _b.next(); !_c.done; _c = _b.next()) {
            var navProp = _c.value;
            _loop_1(navProp);
        }
    }
    catch (e_1_1) { e_1 = { error: e_1_1 }; }
    finally {
        try {
            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
        }
        finally { if (e_1) throw e_1.error; }
    }
    return react_addons_update__WEBPACK_IMPORTED_MODULE_3___default()(newDoc, docUpdates);
}
function dtFormat(dateTime) {
    return moment__WEBPACK_IMPORTED_MODULE_1___default()(dateTime).format('YYMMDD HH:mm');
}
function shortDateFormat(dateTime) {
    return moment__WEBPACK_IMPORTED_MODULE_1___default()(dateTime).format('YYMMDD');
}
function shortPersonNameFormat(name) {
    if (!name)
        return "";
    var names = name.split(' ').filter(function (n) { return !!n; });
    var lastName = names.pop();
    return names.map(function (name) { return name[0] + "."; }).concat(lastName).join(' ');
}
function updateModificationStamp(now, obj, user) {
    return react_addons_update__WEBPACK_IMPORTED_MODULE_3___default()(obj, {
        dateTime: { $set: now },
        modifiedDate: { $set: now },
        modifiedBy: {
            $set: {
                name: user.displayName,
                url: "mailto:" + user.mail
            }
        }
    });
}
function updateCreationStamp(now, obj, user) {
    return react_addons_update__WEBPACK_IMPORTED_MODULE_3___default()(obj, {
        createdDate: { $set: now },
        createdBy: {
            $set: {
                name: user.displayName,
                url: "mailto:" + user.mail
            }
        }
    });
}
function getEmailFromDocAccess(resource) {
    if (resource.email)
        return resource.email;
    return resource.url ?
        resource.url.startsWith('mailto:') ?
            resource.url.substring('mailto:'.length) :
            resource.url :
        resource.url;
}
function updateModificationAndCreationStamps(obj, user) {
    var now = Date.now();
    obj = updateModificationStamp(now, obj, user);
    if (!obj.createdBy)
        obj = updateCreationStamp(now, obj, user);
    return obj;
}
function applyEtags(doc, newEtags, graphs) {
    var e_5, _a;
    var res = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, doc);
    var etag = newEtags[doc.id];
    if (etag)
        res.$etag = etag;
    try {
        for (var graphs_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](graphs), graphs_1_1 = graphs_1.next(); !graphs_1_1.done; graphs_1_1 = graphs_1.next()) {
            var label = graphs_1_1.value;
            var newList = doc[label].map(function (d) { return applyEtags(d, newEtags, []); });
            res[label] = newList;
        }
    }
    catch (e_5_1) { e_5 = { error: e_5_1 }; }
    finally {
        try {
            if (graphs_1_1 && !graphs_1_1.done && (_a = graphs_1.return)) _a.call(graphs_1);
        }
        finally { if (e_5) throw e_5.error; }
    }
    return res;
}
function readBlob(blob, m) {
    return new Promise(function (resolve, reject) {
        var reader = new FileReader();
        reader.onload = function (ev) { return resolve(ev.target.result); };
        reader.onabort = function (ev) { return reject(new Error("file read aborted")); };
        reader.onerror = function (ev) { return reject(ev.target.error); };
        m(reader);
    });
}
function readBlobAsText(blob) {
    return readBlob(blob, function (r) { return r.readAsText(blob); });
}
function readBlobAsDataUrl(blob) {
    return readBlob(blob, function (r) { return r.readAsDataURL(blob); });
}
function allowCopy(e) {
    e.stopPropagation();
    e.preventDefault();
    e.dataTransfer.dropEffect = 'copy';
}
function updateCourseBuilderStatus(status) {
    var div = jquery__WEBPACK_IMPORTED_MODULE_4___default()('div.course-builder')[0];
    if (div)
        div.className = "course-builder" + (status ? " status " + status : "");
}
function loadCourse(id, options) {
    return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
        var client, includeTemplateChain, includeTasks, _a, course, courseTasks, templateChain;
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
            switch (_b.label) {
                case 0:
                    client = _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].kedBackendClient;
                    includeTemplateChain = options && options.includeTemplateChain;
                    includeTasks = !options || !options.include || options.include.indexOf("tasks") !== -1;
                    return [4 /*yield*/, Promise.all([
                            client.get("courses", id, {
                                include: options && options.include ? options.include.filter(function (i) { return i !== "tasks"; }) : [
                                    "centralContent",
                                    "knowledgeRequirements",
                                    "abilities",
                                    "images",
                                    "acl" // Don't include tasks here...
                                ]
                            }),
                            // ... but include tasks here instead so that we can load the graphs for the
                            // tasks as well!
                            includeTasks && client.list("tasks", {
                                hasEdgesFrom: id,
                                include: ['knowledgeRequirements', 'centralContent', 'abilities', 'acl'],
                                flags: ['includeIdsOnly'] // Don't need redundant info that's already on course
                            }),
                            includeTemplateChain && client.list("courses", {
                                hasEdgesFrom: id,
                                flags: ['idsOnly']
                            })
                        ])];
                case 1:
                    _a = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"].apply(void 0, [(_b.sent()), 3]), course = _a[0], courseTasks = _a[1], templateChain = _a[2];
                    course.tasks = courseTasks;
                    // Correct the order of Abilities
                    if (course.abilities && course.abilitiesOrder) {
                        course.abilities = course.abilitiesOrder.map(function (id) {
                            return course.abilities.find(function (a) { return a.id === id; });
                        });
                    }
                    // Correct the order of KnowledgeRequirements
                    if (course.knowledgeRequirements && course.knowledgeRequirementsOrder) {
                        course.knowledgeRequirements = course.knowledgeRequirementsOrder.map(function (id) {
                            return course.knowledgeRequirements.find(function (c) { return c.id === id; });
                        });
                    }
                    // Correct the order of CentralContent
                    if (course.centralContent && course.centralContentOrder) {
                        course.centralContent = course.centralContentOrder.map(function (id) {
                            return course.centralContent.find(function (cc) { return cc.id === id; });
                        }); //.filter(x => !!x);// Debugging somthin' . Normally the last .filter()... part should not be nescessary...
                    }
                    // Include template chain if requested.
                    if (includeTemplateChain)
                        course.templateChain = templateChain;
                    return [2 /*return*/, course];
            }
        });
    });
}


/***/ }),

/***/ "./src/components/course-viewer/course-page/task-assignments.tsx":
/*!***********************************************************************!*\
  !*** ./src/components/course-viewer/course-page/task-assignments.tsx ***!
  \***********************************************************************/
/*! exports provided: TaskAssignments */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskAssignments", function() { return TaskAssignments; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../course-builder/sub-components/spinner */ "./src/components/course-builder/sub-components/spinner.tsx");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _access_control__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../access-control */ "./src/access-control/index.ts");
/* harmony import */ var downloadjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! downloadjs */ "./node_modules/downloadjs/download.js");
/* harmony import */ var downloadjs__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(downloadjs__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _urkund_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./urkund-utils */ "./src/components/course-viewer/course-page/urkund-utils.ts");
/* harmony import */ var _course_builder_ks_logic_is_employee__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../course-builder-ks/logic/is-employee */ "./src/components/course-builder-ks/logic/is-employee.ts");
/* harmony import */ var _apis_google_picker__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../apis/google-picker */ "./src/apis/google-picker.ts");
/* harmony import */ var _apis_buttons__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../apis/buttons */ "./src/apis/buttons.tsx");
/* harmony import */ var _features__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../features */ "./src/features/index.ts");














var MAX_URKUND_FILE_SIZE_MB = 50;
var MAX_NONURKUND_FILE_SIZE_MB = 100;
var ALLOWED_EXTENSIONS = [
    ".pdf",
    ".odt",
    ".docx",
    ".doc",
    ".cad",
    ".wav",
    ".mp3",
    ".mpeg4",
    ".mp4",
    ".zip",
    ".png",
    ".jpg",
    ".jpeg",
    ".gif"
];
var URKUND_EXTENSIONS = [
    ".pdf",
    ".odt",
    ".docx",
    ".doc"
];
var TaskAssignments = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](TaskAssignments, _super);
    function TaskAssignments(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            assignments: [],
            loading: true
        };
        return _this;
    }
    TaskAssignments.prototype.setStatePromised = function (cb) {
        var _this = this;
        return new Promise(function (resolve) { return _super.prototype.setState.call(_this, cb, resolve); });
    };
    TaskAssignments.prototype.componentDidMount = function () {
        this.load();
    };
    TaskAssignments.prototype.componentWillReceiveProps = function (nextProps) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var err_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 4, , 5]);
                        if (!(nextProps.taskId !== this.props.taskId ||
                            nextProps.courseId !== this.props.courseId)) return [3 /*break*/, 3];
                        return [4 /*yield*/, this.setStatePromised(function () { return ({
                                assignments: [],
                                loading: true
                            }); })];
                    case 1:
                        _a.sent();
                        return [4 /*yield*/, this.load()];
                    case 2:
                        _a.sent();
                        _a.label = 3;
                    case 3: return [3 /*break*/, 5];
                    case 4:
                        err_1 = _a.sent();
                        Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["showError"])(err_1);
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    TaskAssignments.prototype.update = function (assignments, assignment) {
        var retval = tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"]([
            assignment
        ], assignments.filter(function (_a) {
            var user = _a.user, filename = _a.filename;
            return user !== assignment.user ||
                filename !== assignment.filename;
        }));
        return retval;
    };
    TaskAssignments.prototype.refreshAssignment = function (assignment) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var client, _a, courseId, taskId, school, user, filename, req, _b, _c, resJson_1, e_1;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_d) {
                switch (_d.label) {
                    case 0:
                        client = _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].kedBackendClient.http;
                        _a = this.props, courseId = _a.courseId, taskId = _a.taskId, school = _a.school;
                        user = assignment.user, filename = assignment.filename;
                        return [4 /*yield*/, this.setState(function (_a) {
                                var assignments = _a.assignments;
                                return ({
                                    assignments: _this.update(assignments, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, assignment, { isRefreshing: true }))
                                });
                            })];
                    case 1:
                        _d.sent();
                        _d.label = 2;
                    case 2:
                        _d.trys.push([2, 8, , 10]);
                        return [4 /*yield*/, client.get("assignments/urkund/" + school + "/" + courseId + "/" + taskId + "/" + user + "/" + filename)];
                    case 3:
                        req = _d.sent();
                        if (!(req.status >= 400)) return [3 /*break*/, 5];
                        _b = kedbackend_client__WEBPACK_IMPORTED_MODULE_6__["HttpError"].bind;
                        _c = [void 0, req.status];
                        return [4 /*yield*/, req.text()];
                    case 4: throw new (_b.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_6__["HttpError"], _c.concat([_d.sent()])))();
                    case 5: return [4 /*yield*/, req.text()];
                    case 6:
                        resJson_1 = _d.sent();
                        return [4 /*yield*/, this.setState(function (_a) {
                                var assignments = _a.assignments;
                                return ({
                                    assignments: _this.update(assignments, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, assignment, { isRefreshing: false, metadata: tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, assignment.metadata, { urkundResponse: resJson_1 }) }))
                                });
                            })];
                    case 7:
                        _d.sent();
                        return [3 /*break*/, 10];
                    case 8:
                        e_1 = _d.sent();
                        return [4 /*yield*/, this.setState(function (_a) {
                                var assignments = _a.assignments;
                                return ({
                                    assignments: _this.update(assignments, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, assignment, { isRefreshing: false, refreshError: e_1 }))
                                });
                            })];
                    case 9:
                        _d.sent();
                        return [3 /*break*/, 10];
                    case 10: return [2 /*return*/];
                }
            });
        });
    };
    TaskAssignments.prototype.load = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var e_2, _a, client, _b, courseId, taskId, school, teacherAtSchool, res, _c, _d, assignments, refreshableAssigments, refreshableAssigments_1, refreshableAssigments_1_1, a, e_2_1, error_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_e) {
                switch (_e.label) {
                    case 0:
                        _e.trys.push([0, 13, , 14]);
                        client = _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].kedBackendClient.http;
                        _b = this.props, courseId = _b.courseId, taskId = _b.taskId, school = _b.school;
                        teacherAtSchool = Object(_access_control__WEBPACK_IMPORTED_MODULE_7__["isTeacherAtSchool"])(_globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser, school);
                        return [4 /*yield*/, (teacherAtSchool ?
                                client.get("assignments/" + school + "/" + courseId + "/" + taskId) :
                                client.get("assignments/" + school + "/" + courseId + "/" + taskId + "/" + _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.mail))];
                    case 1:
                        res = _e.sent();
                        if (!(res.status !== 200)) return [3 /*break*/, 3];
                        _c = kedbackend_client__WEBPACK_IMPORTED_MODULE_6__["HttpError"].bind;
                        _d = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_c.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_6__["HttpError"], _d.concat([_e.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        assignments = _e.sent();
                        this.setState({
                            error: null,
                            loading: false,
                            assignments: assignments
                        });
                        if (!teacherAtSchool) return [3 /*break*/, 12];
                        refreshableAssigments = assignments.filter(function (a) {
                            return a.metadata && // Must have metadata.urkundExternalId Otherwise not possible to refresh
                                !a.metadata.urkundUploadError && ( // Not possible to refresh if upload has failed
                            !a.metadata.urkundLastPoll || // Never checked status yet
                                (['Accepted', 'Submitted'].indexOf(JSON.parse(a.metadata.urkundResponse)[0].Status.State) >= 0 &&
                                    parseInt(a.metadata.urkundLastPoll) < moment__WEBPACK_IMPORTED_MODULE_5___default()().add(-15, "seconds").toDate().getTime()));
                        }
                        // Checked status for a long time ago
                        );
                        _e.label = 5;
                    case 5:
                        _e.trys.push([5, 10, 11, 12]);
                        refreshableAssigments_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](refreshableAssigments), refreshableAssigments_1_1 = refreshableAssigments_1.next();
                        _e.label = 6;
                    case 6:
                        if (!!refreshableAssigments_1_1.done) return [3 /*break*/, 9];
                        a = refreshableAssigments_1_1.value;
                        return [4 /*yield*/, this.refreshAssignment(a)];
                    case 7:
                        _e.sent();
                        _e.label = 8;
                    case 8:
                        refreshableAssigments_1_1 = refreshableAssigments_1.next();
                        return [3 /*break*/, 6];
                    case 9: return [3 /*break*/, 12];
                    case 10:
                        e_2_1 = _e.sent();
                        e_2 = { error: e_2_1 };
                        return [3 /*break*/, 12];
                    case 11:
                        try {
                            if (refreshableAssigments_1_1 && !refreshableAssigments_1_1.done && (_a = refreshableAssigments_1.return)) _a.call(refreshableAssigments_1);
                        }
                        finally { if (e_2) throw e_2.error; }
                        return [7 /*endfinally*/];
                    case 12: return [3 /*break*/, 14];
                    case 13:
                        error_1 = _e.sent();
                        this.setState({
                            loading: false,
                            error: "Kunde inte ladda inl\u00E4mningsuppgifter",
                            assignments: []
                        });
                        console.error(error_1);
                        return [3 /*break*/, 14];
                    case 14: return [2 /*return*/];
                }
            });
        });
    };
    TaskAssignments.prototype.onDrag = function (ev) {
        ev.stopPropagation();
        ev.preventDefault();
        ev.dataTransfer.dropEffect = 'copy';
    };
    TaskAssignments.prototype.verifyAndUpload = function (file) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var error_2;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 3, , 4]);
                        if (!file)
                            return [2 /*return*/];
                        if (this.state.assignments.some(function (a) {
                            return a.user === _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.mail &&
                                a.filename === file.name;
                        })) {
                            if (!confirm("Ers\u00E4tta befintlig fil (" + file.name + ")?")) {
                                return [2 /*return*/];
                            }
                        }
                        if (this.props.school.toLowerCase() !== _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.school.toLowerCase()) {
                            if (!confirm("Uppgiften tillh\u00F6r en annan skola (" + this.props.school + ").\n" +
                                "Vill du \u00E4nd\u00E5 l\u00E4mna in ditt arbete h\u00E4r?")) {
                                return [2 /*return*/];
                            }
                        }
                        this.setState({ uploadingFile: file });
                        return [4 /*yield*/, this.upload(file)];
                    case 1:
                        _a.sent();
                        return [4 /*yield*/, this.load()];
                    case 2:
                        _a.sent();
                        this.setState({
                            uploadingFile: null
                        });
                        return [3 /*break*/, 4];
                    case 3:
                        error_2 = _a.sent();
                        this.setState({
                            error: "Kunde inte ladda upp filen. " + (error_2.message || error_2),
                            uploadingFile: null
                        });
                        console.error(error_2);
                        return [3 /*break*/, 4];
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    TaskAssignments.prototype.upload = function (file) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var client, _a, courseId, taskId, school, mail, isUrkundExtension, lowerFilename, body, res, _b, _c;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_d) {
                switch (_d.label) {
                    case 0:
                        client = _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].kedBackendClient.http;
                        _a = this.props, courseId = _a.courseId, taskId = _a.taskId, school = _a.school;
                        mail = _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.mail;
                        isUrkundExtension = URKUND_EXTENSIONS
                            .indexOf("." + file.name.split('.').reverse()[0].toLowerCase()) >= 0;
                        if (isUrkundExtension) {
                            if (file.size > MAX_URKUND_FILE_SIZE_MB * 1024 * 1024) {
                                throw new Error("Filer av denna typ f\u00E5r inte vara st\u00F6rre \u00E4n " + MAX_URKUND_FILE_SIZE_MB + " MB");
                            }
                        }
                        else {
                            if (file.size > MAX_NONURKUND_FILE_SIZE_MB * 1024 * 1024) {
                                throw new Error("Filen f\u00E5r inte vara st\u00F6rre \u00E4n " + MAX_NONURKUND_FILE_SIZE_MB + " MB");
                            }
                        }
                        lowerFilename = file.name.toLowerCase();
                        if (!ALLOWED_EXTENSIONS.some(function (ext) { return lowerFilename.endsWith(ext); })) {
                            throw new Error("Filens \u00E4ndelse m\u00E5ste vara " + ALLOWED_EXTENSIONS.join(' / '));
                        }
                        body = new FormData();
                        body.append('files', file);
                        return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].kedBackendClient.http.fetch("assignments/" + school + "/" + courseId + "/" + taskId + "/" + mail, 'put', {}, {
                                userDisplayName: _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.displayName
                            }, {
                                body: body
                            })];
                    case 1:
                        res = _d.sent();
                        if (!(res.status !== 200)) return [3 /*break*/, 3];
                        _b = kedbackend_client__WEBPACK_IMPORTED_MODULE_6__["HttpError"].bind;
                        _c = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_b.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_6__["HttpError"], _c.concat([_d.sent()])))();
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    TaskAssignments.prototype.download = function (file) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, blob, err_2;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _c.trys.push([0, 5, , 6]);
                        return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].kedBackendClient.http.fetch(file.mediaLink, 'get', {})];
                    case 1:
                        res = _c.sent();
                        if (!(res.status >= 400)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_6__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_6__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.blob()];
                    case 4:
                        blob = _c.sent();
                        downloadjs__WEBPACK_IMPORTED_MODULE_8___default()(blob, file.filename, file.contentType);
                        return [3 /*break*/, 6];
                    case 5:
                        err_2 = _c.sent();
                        this.setState({ error: "Kunde inte ladda ned filen. " + (err_2.message || err_2) });
                        console.error(err_2);
                        return [3 /*break*/, 6];
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    TaskAssignments.prototype.delete = function (url) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, err_3;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _c.trys.push([0, 6, , 7]);
                        return [4 /*yield*/, this.setStatePromised(function (_a) {
                                var assignments = _a.assignments;
                                return ({ assignments: assignments.map(function (a) { return a.mediaLink === url ? tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, a, { metadata: tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, a.metadata, { $meta: 'delete' }) }) : tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, a); }) });
                            })];
                    case 1:
                        _c.sent();
                        return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].kedBackendClient.http.fetch(url, 'delete', {})];
                    case 2:
                        res = _c.sent();
                        if (!(res.status >= 400)) return [3 /*break*/, 4];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_6__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 3: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_6__["HttpError"], _b.concat([_c.sent()])))();
                    case 4: return [4 /*yield*/, this.load()];
                    case 5:
                        _c.sent();
                        return [3 /*break*/, 7];
                    case 6:
                        err_3 = _c.sent();
                        this.setState({ error: "Kunde inte ta bort filen. " + (err_3.message || err_3) });
                        console.error(err_3);
                        return [3 /*break*/, 7];
                    case 7: return [2 /*return*/];
                }
            });
        });
    };
    TaskAssignments.prototype.render = function () {
        var _this = this;
        var _a = this.props, courseId = _a.courseId, taskId = _a.taskId, school = _a.school;
        var _b = this.state, loading = _b.loading, assignments = _b.assignments, error = _b.error, uploadingFile = _b.uploadingFile;
        var teacherAtThisSchool = Object(_access_control__WEBPACK_IMPORTED_MODULE_7__["isTeacherAtSchool"])(_globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser, school);
        var files = tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](assignments);
        var showGooglePicker = _features__WEBPACK_IMPORTED_MODULE_13__["features"].picker;
        if (uploadingFile) {
            var virtualFile_1 = {
                school: school,
                courseId: courseId,
                taskId: taskId,
                filename: uploadingFile.name,
                size: uploadingFile.size,
                user: _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.mail,
                contentType: uploadingFile.type,
                uploadDate: Date.now(),
                mediaLink: "assignments/" + school + "/" + courseId + "/" + taskId + "/" + _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.mail + "/" + uploadingFile.name,
                metadata: { $meta: 'add', userDisplayName: _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.displayName }
            };
            files = files.filter(function (file) { return file.mediaLink !== virtualFile_1.mediaLink; });
            files = tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](files, [virtualFile_1]);
        }
        files = files.sort(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["compareProps"])([
            "metadata.userDisplayName",
            "filename",
            "uploadDate"
        ], ["sv", "en"], { sensitivity: 'base' }));
        var hasOwnDocs = files.some(function (file) { return file.user === _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.mail; });
        return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { onDragOver: function (ev) { return _this.onDrag(ev); }, onDrop: function (ev) {
                ev.stopPropagation();
                ev.preventDefault();
                _this.verifyAndUpload(ev.dataTransfer.files[0]);
            } },
            error ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { className: "error" }, error)) : undefined,
            loading ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_4__["Spinner"], null),
                " Laddar inl\u00E4mnade filer...") : files.length === 0 ?
                teacherAtThisSchool ?
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, "Ingen elev har l\u00E4mnat in n\u00E5got arbete \u00E4nnu.") :
                    undefined
                : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("table", { className: "task-assignments-table" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("thead", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                                teacherAtThisSchool ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "Elev") : undefined,
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "Filnamn"),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "Inl\u00E4mnat den"),
                                teacherAtThisSchool && react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "Rapport"),
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "Niv\u00E5")),
                                hasOwnDocs && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null))),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tbody", null, files.map(function (file) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", { key: file.mediaLink, style: file.metadata.$meta ? { opacity: 0.5 } : {} },
                            teacherAtThisSchool ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null,
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: "mailto:" + file.user }, file.metadata.userDisplayName || file.user)),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null,
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: "#", onClick: function (ev) {
                                            ev.preventDefault();
                                            ev.stopPropagation();
                                            _this.download(file);
                                        } }, file.filename)),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: "assignment-date-col" }, moment__WEBPACK_IMPORTED_MODULE_5___default()(file.uploadDate).format('YYYY-MM-DD HH:mm')),
                                file.metadata.$meta === 'add' ?
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { colSpan: 2 },
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_4__["Spinner"], null),
                                        " Laddar upp...") :
                                    file.metadata.$meta === 'delete' ?
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { colSpan: 2 },
                                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_4__["Spinner"], null),
                                            " Tar bort...") :
                                        (function () {
                                            var metadata = file.metadata;
                                            var urkundResponses = metadata.urkundResponse && JSON.parse(metadata.urkundResponse);
                                            var urkundResponse = urkundResponses && urkundResponses[0];
                                            if (!urkundResponse && file.metadata.urkundUploadError) {
                                                urkundResponse = {
                                                    Status: {
                                                        ErrorCode: -1,
                                                        Message: file.metadata.urkundUploadError,
                                                        State: 'Error'
                                                    },
                                                    ExternalId: file.metadata.urkundExternalId
                                                };
                                            }
                                            if (file.isRefreshing)
                                                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { colSpan: 2 },
                                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_4__["Spinner"], null),
                                                    " Uppdaterar...");
                                            return urkundResponse ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: "urkund-status-col" },
                                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: urkundResponse.Report && urkundResponse.Report.ReportUrl, onClick: function (ev) {
                                                            if (['Accepted', 'Submitted'].indexOf(urkundResponse.Status.State) === -1)
                                                                return; // Follow HREF instead.
                                                            ev.preventDefault();
                                                            ev.stopPropagation();
                                                            _this.refreshAssignment(file);
                                                        }, target: "_blank", title: Object(_urkund_utils__WEBPACK_IMPORTED_MODULE_9__["getUrkundHoverText"])(urkundResponse) },
                                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: Object(_urkund_utils__WEBPACK_IMPORTED_MODULE_9__["getUrkundStatusClass"])(urkundResponse) }))),
                                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: "urkund-status-col" },
                                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: Object(_urkund_utils__WEBPACK_IMPORTED_MODULE_9__["getUrkundSignificanceClass"])(urkundResponse) }, urkundResponse.Report && typeof urkundResponse.Report.Significance === 'number' ?
                                                        urkundResponse.Report.Significance.toFixed() + "%" : ' '))) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { colSpan: 2 });
                                        })()) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null,
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: "#", onClick: function (ev) {
                                            ev.preventDefault();
                                            ev.stopPropagation();
                                            _this.download(file);
                                        } }, file.filename)),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: "assignment-date-col" }, file.metadata.$meta === 'add' ?
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_4__["Spinner"], null),
                                        " Laddar upp...") :
                                    file.metadata.$meta === 'delete' ?
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_4__["Spinner"], null),
                                            " Tar bort...") :
                                        moment__WEBPACK_IMPORTED_MODULE_5___default()(file.uploadDate).format('YYYY-MM-DD HH:mm'))),
                            hasOwnDocs && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null, !file.metadata.$meta && file.user === _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.mail &&
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: "#", onClick: function (ev) {
                                        ev.stopPropagation();
                                        ev.preventDefault();
                                        if (confirm("Radera inl\u00E4mnad fil " + file.filename + "?"))
                                            _this.delete(file.mediaLink);
                                    } },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-trash" })))); })))),
            Object(_course_builder_ks_logic_is_employee__WEBPACK_IMPORTED_MODULE_10__["isEmployee"])() ? undefined : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "drop-zone task-assignment-drop-zone" },
                    "Droppa ditt f\u00E4rdiga arbete h\u00E4r.",
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null),
                    "Det g\u00E5r ocks\u00E5 bra att anv\u00E4nda bl\u00E4ddra-knappen nedan."),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { type: "file", onChange: function (ev) { return _this.verifyAndUpload(ev.target.files[0]); } }),
                showGooglePicker && react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_apis_buttons__WEBPACK_IMPORTED_MODULE_12__["DriveButton"], { label: "H\u00E4mta fr\u00E5n Google Drive", action: function () {
                        var picker = new _apis_google_picker__WEBPACK_IMPORTED_MODULE_11__["GooglePicker"]({ upload: true });
                        picker.show().then(function (files) {
                            picker.downloadFile({
                                file: files[0],
                                limitSize: MAX_NONURKUND_FILE_SIZE_MB
                            }).then(function (file) { return _this.verifyAndUpload(file); });
                        });
                    } }))));
    };
    return TaskAssignments;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/course-viewer/course-page/urkund-utils.ts":
/*!******************************************************************!*\
  !*** ./src/components/course-viewer/course-page/urkund-utils.ts ***!
  \******************************************************************/
/*! exports provided: getUrkundStatusClass, getUrkundHoverText, getUrkundSignificanceClass */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getUrkundStatusClass", function() { return getUrkundStatusClass; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getUrkundHoverText", function() { return getUrkundHoverText; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getUrkundSignificanceClass", function() { return getUrkundSignificanceClass; });
function getUrkundStatusClass(res) {
    if (!res || !res.Status) {
        return null;
    }
    else
        switch (res.Status.State) {
            case 'Error':
                return "urkund-status urkund-status-error";
            case 'Submitted':
                return "urkund-status urkund-status-submitted";
            case 'Accepted':
                return "urkund-status urkund-status-accepted";
            case 'Analyzed':
                return "urkund-status urkund-status-analyzed";
        }
}
function getUrkundHoverText(res) {
    if (!res || !res.Status)
        return null;
    switch (res.Status.State) {
        case 'Error':
            return res.ExternalId ?
                "Kunde inte tas emot av urkund. Felkod: " + res.Status.ErrorCode + "\n" +
                    ("External ID: " + res.ExternalId + "\nFelmeddelande: " + res.Status.Message)
                :
                    res.Status.Message;
        case 'Submitted':
            return "Filen \u00E4r uppladdad till Urkund. Klicka f\u00F6r att uppdatera status.";
        case 'Accepted':
            return "Filen analyseras fortfarande av Urkund. Klicka f\u00F6r att uppdatera status.";
        case 'Analyzed':
            return "Rapport skapad. Klicka f\u00F6r att \u00F6ppna rapporten i nytt f\u00F6nster";
    }
}
function getUrkundSignificanceClass(res) {
    if (!res || !res.Status)
        return '';
    switch (res.Status.State) {
        case 'Error': return 'urkund-significance-error';
        case 'Submitted': return 'urkund-significance-submitted';
        case 'Accepted': return 'urkund-significance-accepted';
    }
    var report = res.Report;
    if (!report) {
        return "";
    }
    if (report.Significance < 1)
        //return `${cdn}/images/urkund/0.gif`;
        return "urkund-significance urkund-significance-0";
    if (report.Significance < 10)
        //return `${cdn}/images/urkund/1.gif`;
        return "urkund-significance urkund-significance-1";
    if (report.Significance < 25)
        return "urkund-significance urkund-significance-2";
    //return `${cdn}/images/urkund/2.gif`;
    if (report.Significance < 40)
        return "urkund-significance urkund-significance-3";
    //return `${cdn}/images/urkund/3.gif`;
    if (report.Significance < 55)
        return "urkund-significance urkund-significance-4";
    //return `${cdn}/images/urkund/4.gif`;
    if (report.Significance < 70)
        return "urkund-significance urkund-significance-5";
    //return `${cdn}/images/urkund/5.gif`;
    if (report.Significance < 85)
        return "urkund-significance urkund-significance-6";
    //return `${cdn}/images/urkund/6.gif`;
    if (report.Significance < 99.9)
        return "urkund-significance urkund-significance-7";
    //return `${cdn}/images/urkund/7.gif`;
    if (report.Significance >= 99.9)
        return "urkund-significance urkund-significance-8";
    //return `${cdn}/images/urkund/8.gif`;
    return "";
}


/***/ }),

/***/ "./src/components/course-viewer/subcomponents/abilities-box.tsx":
/*!**********************************************************************!*\
  !*** ./src/components/course-viewer/subcomponents/abilities-box.tsx ***!
  \**********************************************************************/
/*! exports provided: AbilitiesBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AbilitiesBox", function() { return AbilitiesBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var AbilitiesBox = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](AbilitiesBox, _super);
    function AbilitiesBox(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            headerOpen: props.headerOpen || false
        };
        return _this;
    }
    AbilitiesBox.prototype.render = function () {
        var _this = this;
        var _a = this.props, title = _a.title, subTitle = _a.subTitle, abilities = _a.abilities, className = _a.className;
        var headerOpen = this.state.headerOpen;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: (className || '') + " openClose" + (headerOpen ? " open" : "") },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "openHeader", onClick: function () { return _this.setState({ headerOpen: !_this.state.headerOpen }); } },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, title)),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "openContent" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "abilityList" },
                    subTitle && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "contentHeader" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h5", null, subTitle)),
                    abilities.map(function (a) {
                        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: a.id, className: "contentPart" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "contentText" },
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { dangerouslySetInnerHTML: { __html: a.name } })));
                    }))));
    };
    return AbilitiesBox;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/course-viewer/subcomponents/central-content-box.tsx":
/*!****************************************************************************!*\
  !*** ./src/components/course-viewer/subcomponents/central-content-box.tsx ***!
  \****************************************************************************/
/*! exports provided: CentralContentBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CentralContentBox", function() { return CentralContentBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var CentralContentBox = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](CentralContentBox, _super);
    function CentralContentBox(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            headerOpen: props.headerOpen || false
        };
        return _this;
    }
    CentralContentBox.prototype.render = function () {
        var _this = this;
        var _a = this.props, title = _a.title, subTitle = _a.subTitle, centralContent = _a.centralContent, className = _a.className;
        var headerOpen = this.state.headerOpen;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: (className || '') + " openClose" + (headerOpen ? " open" : "") },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "openHeader", onClick: function () { return _this.setState({ headerOpen: !_this.state.headerOpen }); } },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, title)),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "openContent" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "abilityList" },
                    subTitle && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "contentHeader" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h5", null, subTitle)),
                    centralContent.map(function (cc) {
                        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: cc.id, className: "contentPart" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "contentText" },
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { dangerouslySetInnerHTML: { __html: cc.name } })));
                    }))));
    };
    return CentralContentBox;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/course-viewer/subcomponents/confirmation.tsx":
/*!*********************************************************************!*\
  !*** ./src/components/course-viewer/subcomponents/confirmation.tsx ***!
  \*********************************************************************/
/*! exports provided: Confirmation */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Confirmation", function() { return Confirmation; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

function Confirmation(props) {
    return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "confirmation-box " + props.className + (props.visible ? " visible" : "") },
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("p", null, props.text),
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("button", { onClick: function () { return props.onConfirm(); } }, "OK"),
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("button", { onClick: function () { return props.onCancel(); } }, "Avbryt"));
}


/***/ }),

/***/ "./src/components/course-viewer/subcomponents/knowledge-requirements-table.tsx":
/*!*************************************************************************************!*\
  !*** ./src/components/course-viewer/subcomponents/knowledge-requirements-table.tsx ***!
  \*************************************************************************************/
/*! exports provided: KnowledgeRequirementsBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KnowledgeRequirementsBox", function() { return KnowledgeRequirementsBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");




var KnowledgeRequirementsBox = function (props) {
    var title = props.title, className = props.className, headerOpen = props.headerOpen, idsToSubjectMap = props.idsToSubjectMap, requirements = props.requirements;
    if (!idsToSubjectMap) {
        // Normal case
        return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_2__["OpenCloseBox"], { title: react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, title), className: className, headerOpen: headerOpen },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](KnowledgeRequirementsTable, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, props)))));
    }
    // Special case: Requirements that spans multiple subjects:
    var requirementsPerSubjectLookup = idsToSubjectMap ?
        Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["arrayToLookup"])(requirements, function (r) { return idsToSubjectMap[r.id] || ""; }) : { "": requirements };
    var reqsPerSubject = Object.keys(requirementsPerSubjectLookup)
        .map(function (subject) { return ({ subject: subject, requirements: requirementsPerSubjectLookup[subject] }); });
    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_2__["OpenCloseBox"], { title: react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, title), className: className, headerOpen: headerOpen }, reqsPerSubject.map(function (_a) {
        var subject = _a.subject, requirements = _a.requirements;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](KnowledgeRequirementsTable, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, props, { key: subject, heading: subject, requirements: requirements })));
    }));
};
var KnowledgeRequirementsTable = function (_a) {
    var requirements = _a.requirements, includedIds = _a.includedIds, explainedRequirements = _a.explainedRequirements, heading = _a.heading;
    var columns = ["E", "C", "A"];
    var rows = [];
    var reqs = requirements.slice();
    var row = null;
    while (true) {
        row = columns.map(function (grade) {
            var pNext = reqs.findIndex(function (r) { return r.gradeStep.toUpperCase() === grade; });
            if (pNext < 0)
                return null;
            var rv = reqs[pNext];
            reqs.splice(pNext, 1);
            return includedIds ?
                (includedIds[rv.id] ? rv : undefined) :
                rv;
        });
        if (row.every(function (r) { return r === null; }))
            break;
        if (!row.every(function (r) { return !r; })) {
            rows.push(row);
        }
    }
    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
        heading && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h4", null, heading),
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("table", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("thead", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null, columns.map(function (c) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { key: c }, c); }))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tbody", null, rows.map(function (row, i) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], { key: i },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", { key: i }, row.map(function (column, j) {
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { key: j, dangerouslySetInnerHTML: { __html: column ? column.name : "" } });
                })),
                explainedRequirements && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null, row.map(function (column, j) {
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { key: j, className: "explained-requirement" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null, (column && explainedRequirements[column.id]) || ""));
                }))); }))));
};


/***/ }),

/***/ "./src/components/course-viewer/subcomponents/task-list.tsx":
/*!******************************************************************!*\
  !*** ./src/components/course-viewer/subcomponents/task-list.tsx ***!
  \******************************************************************/
/*! exports provided: TaskList */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskList", function() { return TaskList; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _repos_user_tasks_repo__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../repos/user-tasks-repo */ "./src/repos/user-tasks-repo.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _confirmation__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./confirmation */ "./src/components/course-viewer/subcomponents/confirmation.tsx");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");









var TaskList = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](TaskList, _super);
    function TaskList(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            userTasks: [],
            weekDate: Date.now(),
            confirmations: []
        };
        _this.onChange = _this.onChange.bind(_this);
        return _this;
    }
    TaskList.prototype.onChange = function (userTasks, persisted) {
        if (persisted.weekDate !== this.state.weekDate) {
            this.setState({
                confirmations: []
            });
        }
        this.setState({
            userTasks: userTasks,
            weekDate: persisted.weekDate
        });
    };
    TaskList.prototype.componentDidMount = function () {
        _repos_user_tasks_repo__WEBPACK_IMPORTED_MODULE_5__["userTasksRepo"].subscribe(this.onChange);
    };
    TaskList.prototype.componentWillUnmount = function () {
        _repos_user_tasks_repo__WEBPACK_IMPORTED_MODULE_5__["userTasksRepo"].unsubscribe(this.onChange);
    };
    TaskList.prototype.toggleTask = function (learningTask) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var userTasks, weekDate, latestTimeStamp, userTask;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        userTasks = this.state.userTasks.filter(function (ut) {
                            return learningTask.task ?
                                ut.task && ut.task.some(function (t) { return t.id === learningTask.id; }) :
                                ut.siteVisionPageId === learningTask.id;
                        });
                        weekDate = this.state.weekDate;
                        if (!(userTasks.length === 0)) return [3 /*break*/, 2];
                        latestTimeStamp = Math.max.apply(Math.max, [weekDate].concat(this.state.userTasks.map(function (t) { return t.dateTime; })));
                        userTask = {
                            id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_4__["createUUID"])(),
                            courseName: learningTask.courseName,
                            dateTime: latestTimeStamp + 2000,
                            learningGoal: learningTask.learningGoal,
                            name: learningTask.name,
                            url: learningTask.url,
                            acl: [
                                // Default ACL: Let user self have full control over this item:
                                new kedbackend_client__WEBPACK_IMPORTED_MODULE_4__["DocumentAccess"]("email", _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.mail, "S"),
                                // Additional ACL: Let employees on same school have read access to it.
                                // This currently only applies to tasks that refer to course tasks (not custom tasks!)
                                new kedbackend_client__WEBPACK_IMPORTED_MODULE_4__["DocumentAccess"]("schoolRole", _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.school + "/EMPLOYEE", "R")
                            ].map(function (ac) { return ac.toString(); })
                        };
                        if (learningTask.task && learningTask.task.deadline) {
                            userTask.deadline = learningTask.task.deadline;
                        }
                        if (learningTask.task) {
                            userTask.task = [learningTask.task];
                            if (learningTask.course) {
                                userTask.course = [learningTask.course];
                            }
                            else if (learningTask.courseInfo) {
                                userTask.courseInfo = learningTask.courseInfo;
                            }
                        }
                        else {
                            userTask.siteVisionPageId = learningTask.id;
                        }
                        if (learningTask.step) {
                            userTask.step = learningTask.step;
                        }
                        return [4 /*yield*/, Promise.all([
                                _repos_user_tasks_repo__WEBPACK_IMPORTED_MODULE_5__["userTasksRepo"].setWeekPlannerBoxOpen(learningTask.courseName, true),
                                _repos_user_tasks_repo__WEBPACK_IMPORTED_MODULE_5__["userTasksRepo"].insert([userTask])
                            ])];
                    case 1:
                        _a.sent();
                        return [3 /*break*/, 4];
                    case 2: 
                    // Already present in weekplanner. It's time to delete those that matched us.
                    return [4 /*yield*/, _repos_user_tasks_repo__WEBPACK_IMPORTED_MODULE_5__["userTasksRepo"].delete(userTasks.map(function (t) { return t.id; }))];
                    case 3:
                        // Already present in weekplanner. It's time to delete those that matched us.
                        _a.sent();
                        _a.label = 4;
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    TaskList.prototype.render = function () {
        var _this = this;
        var intl = this.context.intl;
        var learningTasks = this.props.learningTasks;
        var userTasks = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["arrayToMap"])(this.state.userTasks, function (ut) { return ut.task && ut.task.length > 0 ?
            ut.task.map(function (t) { return t.id; })[0] : // course-builder tasks looked up by id
            ut.siteVisionPageId ? ut.siteVisionPageId : // non-course-builder tasks
                ut.url; });
        var confirmations = this.state.confirmations;
        var weekPlannerWeek = moment__WEBPACK_IMPORTED_MODULE_3___default()(this.state.weekDate).week();
        var currentWeek = moment__WEBPACK_IMPORTED_MODULE_3___default()().week();
        var forWeekString = weekPlannerWeek === currentWeek ? "" :
            weekPlannerWeek === currentWeek + 1 ? intl.formatMessage({ id: "taskList.nextWeekTask", defaultMessage: "fr nsta vecka (v{week})" }, { week: weekPlannerWeek }) :
                weekPlannerWeek === currentWeek - 1 ? intl.formatMessage({ id: "taskList.lastWeekTask", defaultMessage: "fr frra veckan (v{week})" }, { week: weekPlannerWeek }) :
                    intl.formatMessage({ id: "taskList.currentWeekTask", defaultMessage: "fr vecka {week}" }, { week: weekPlannerWeek });
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "taskContainer" }, learningTasks.map(function (learningTask, idx) {
            var taskLookupId = learningTask.id;
            var userTask = userTasks[taskLookupId] || { $meta: 'deleted' }; // No exist = $meta: 'deleted'
            var isWorking = userTask.$meta === 'adding' || userTask.$meta === 'deleting';
            var selected = userTask.$meta !== 'deleted' && userTask.$meta !== 'deleting';
            var describedAction = selected ?
                intl.formatMessage({ id: "taskList.removeTaskFromWeeklyPlanning", defaultMessage: "Ta bort uppgiften frn egen veckoplanering {week}" }, { week: forWeekString }) :
                intl.formatMessage({ id: "taskList.addTaskToWeeklyPlanning", defaultMessage: "Lgg till uppgiften i egen veckoplanering {week}" }, { week: forWeekString });
            var confirmationVisible = confirmations.some(function (tid) { return taskLookupId === tid; });
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: learningTask.id },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: taskLookupId, className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "selectedBox" + (selected ? ' selected' : ''), style: isWorking ? { opacity: 0.5 } : {}, onClick: function () { return !isWorking && weekPlannerWeek === currentWeek ?
                                _this.toggleTask(learningTask) :
                                confirmationVisible ?
                                    _this.setState({ confirmations: confirmations.filter(function (tid) { return tid !== taskLookupId; }) }) :
                                    _this.setState({ confirmations: tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](confirmations).concat(taskLookupId) }); }, title: describedAction })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: learningTask.url }, learningTask.name))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_confirmation__WEBPACK_IMPORTED_MODULE_7__["Confirmation"], { visible: confirmationVisible, text: describedAction, onConfirm: function () {
                        _this.toggleTask(learningTask);
                        _this.setState({ confirmations: confirmations.filter(function (tid) { return tid !== taskLookupId; }) });
                    }, onCancel: function () {
                        _this.setState({ confirmations: confirmations.filter(function (tid) { return tid !== taskLookupId; }) });
                    } }));
        }));
    };
    TaskList.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_8__["LanguageContext"];
    return TaskList;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/utility-components/LanguageContext.tsx":
/*!***************************************************************!*\
  !*** ./src/components/utility-components/LanguageContext.tsx ***!
  \***************************************************************/
/*! exports provided: LanguageContext */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LanguageContext", function() { return LanguageContext; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var LanguageContext = react__WEBPACK_IMPORTED_MODULE_0__["createContext"]({ intl: null });


/***/ }),

/***/ "./src/components/utility-components/SetupLanguageIntl.tsx":
/*!*****************************************************************!*\
  !*** ./src/components/utility-components/SetupLanguageIntl.tsx ***!
  \*****************************************************************/
/*! exports provided: setupIntl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setupIntl", function() { return setupIntl; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");
/* harmony import */ var react_intl_locale_data_en__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-intl/locale-data/en */ "./node_modules/react-intl/locale-data/en.js");
/* harmony import */ var react_intl_locale_data_en__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_intl_locale_data_en__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_intl_locale_data_sv__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-intl/locale-data/sv */ "./node_modules/react-intl/locale-data/sv.js");
/* harmony import */ var react_intl_locale_data_sv__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_intl_locale_data_sv__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _translations_sv_json__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../translations/sv.json */ "./src/translations/sv.json");
var _translations_sv_json__WEBPACK_IMPORTED_MODULE_4___namespace = /*#__PURE__*/__webpack_require__.t(/*! ../../translations/sv.json */ "./src/translations/sv.json", 1);
/* harmony import */ var _translations_en_json__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../translations/en.json */ "./src/translations/en.json");
var _translations_en_json__WEBPACK_IMPORTED_MODULE_5___namespace = /*#__PURE__*/__webpack_require__.t(/*! ../../translations/en.json */ "./src/translations/en.json", 1);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_8__);









var setupIntl = function (Component) {
    return /** @class */ (function (_super) {
        tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](_SetupLanguageIntl, _super);
        function _SetupLanguageIntl(props) {
            var _this = _super.call(this, props) || this;
            Object(react_intl__WEBPACK_IMPORTED_MODULE_1__["addLocaleData"])(tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](react_intl_locale_data_en__WEBPACK_IMPORTED_MODULE_2___default.a, react_intl_locale_data_sv__WEBPACK_IMPORTED_MODULE_3___default.a));
            _this.messages = {
                'sv': _translations_sv_json__WEBPACK_IMPORTED_MODULE_4__,
                'en': _translations_en_json__WEBPACK_IMPORTED_MODULE_5__
            };
            moment__WEBPACK_IMPORTED_MODULE_8___default()().locale(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_7__["default"].KED_LOCALE);
            return _this;
        }
        _SetupLanguageIntl.prototype.render = function () {
            return react__WEBPACK_IMPORTED_MODULE_6__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_1__["IntlProvider"], { locale: _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_7__["default"].KED_LOCALE, messages: this.messages[_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_7__["default"].KED_LOCALE] },
                react__WEBPACK_IMPORTED_MODULE_6__["createElement"](Component, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.props)));
        };
        return _SetupLanguageIntl;
    }(react__WEBPACK_IMPORTED_MODULE_6__["Component"]));
};


/***/ }),

/***/ "./src/components/utility-components/align-horizontal.tsx":
/*!****************************************************************!*\
  !*** ./src/components/utility-components/align-horizontal.tsx ***!
  \****************************************************************/
/*! exports provided: AlignHorizontal */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AlignHorizontal", function() { return AlignHorizontal; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var AlignHorizontal = function (_a) {
    var className = _a.className, classNames = _a.classNames, children = _a.children;
    return (react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"]((classNames || []), (className ? [className] : []), ["align-horizontal"]).join(' ') }, children));
};


/***/ }),

/***/ "./src/components/utility-components/checklist.tsx":
/*!*********************************************************!*\
  !*** ./src/components/utility-components/checklist.tsx ***!
  \*********************************************************/
/*! exports provided: Checklist */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Checklist", function() { return Checklist; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var Checklist = function (_a) {
    var available = _a.available, selected = _a.selected, onChange = _a.onChange;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "taskContainer" }, available.map(function (_a) {
        var key = _a.key, name = _a.name;
        var checked = selected.includes(key);
        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { key: key, className: "align-horizontal" },
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "horizontalItem top", onClick: function () {
                    return onChange(checked ?
                        selected.filter(function (k) { return k != key; }) :
                        selected.concat(key), key, checked);
                } },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "checkBox" + (checked ? " checked" : "") })),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "horizontalItem top" }, name));
    }));
};


/***/ }),

/***/ "./src/components/utility-components/dialogs.tsx":
/*!*******************************************************!*\
  !*** ./src/components/utility-components/dialogs.tsx ***!
  \*******************************************************/
/*! exports provided: Dialogs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Dialogs", function() { return Dialogs; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _course_builder_sub_components_remove_item__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../course-builder/sub-components/remove-item */ "./src/components/course-builder/sub-components/remove-item.tsx");
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-dom */ "react-dom");
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jquery */ "jquery");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_4__);





var Dialogs = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Dialogs, _super);
    function Dialogs(props) {
        return _super.call(this, props) || this;
    }
    Dialogs.prototype.componentDidUpdate = function (prevProps) {
        if (this.lastDiv !== null && prevProps.dialogs.length > this.props.dialogs.length) {
            // A dialog was closed. Now focus the last dialog:
            jquery__WEBPACK_IMPORTED_MODULE_4___default()(Object(react_dom__WEBPACK_IMPORTED_MODULE_3__["findDOMNode"])(this.lastDiv)).find(':input').first().focus();
        }
    };
    Dialogs.prototype.render = function () {
        var _this = this;
        this.lastDiv = null;
        var _a = this.props, dialogs = _a.dialogs, popDialog = _a.popDialog;
        jquery__WEBPACK_IMPORTED_MODULE_4___default()('body').attr('aria-disabled', dialogs.length > 0);
        jquery__WEBPACK_IMPORTED_MODULE_4___default()('body').css('overflow', dialogs.length > 0 ? 'hidden' : 'auto');
        return dialogs.length > 0 && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null, dialogs.map(function (dialog, idx) {
            var div;
            function onKeyPress(ev) {
                if (ev.which === 13 && (!ev.target || ev.target.tagName !== 'TEXTAREA')) {
                    jquery__WEBPACK_IMPORTED_MODULE_4___default()(Object(react_dom__WEBPACK_IMPORTED_MODULE_3__["findDOMNode"])(div)).find('.btn-default').click();
                }
                ev.stopPropagation();
            }
            function onKeyDown(ev) {
                if (ev.which === 27) { // Escape
                    popDialog();
                    ev.stopPropagation();
                    return;
                }
                if (ev.which === 83 && (ev.ctrlKey || ev.metaKey)) { // CTRL-S
                    var domNode = Object(react_dom__WEBPACK_IMPORTED_MODULE_3__["findDOMNode"])(div);
                    ev.preventDefault();
                    var defaultButton = jquery__WEBPACK_IMPORTED_MODULE_4___default()(domNode).find('.btn-default');
                    defaultButton.click();
                    ev.stopPropagation();
                }
            }
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: idx },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "darken" }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "modal-page-wrap" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "modal-page", ref: function (elem) {
                            div = elem;
                            if (idx === dialogs.length - 1)
                                _this.lastDiv = elem;
                        }, tabIndex: 0, "aria-disabled": idx < dialogs.length - 1, onKeyPress: onKeyPress, onKeyDown: onKeyDown },
                        dialog,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_remove_item__WEBPACK_IMPORTED_MODULE_2__["RemoveItem"], { onClick: popDialog }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "stopFloats" }))));
        }));
    };
    return Dialogs;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/utility-components/form-field-text-input.tsx":
/*!*********************************************************************!*\
  !*** ./src/components/utility-components/form-field-text-input.tsx ***!
  \*********************************************************************/
/*! exports provided: TextInput */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TextInput", function() { return TextInput; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _form_field__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./form-field */ "./src/components/utility-components/form-field.tsx");



var TextInput = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](TextInput, _super);
    function TextInput(props) {
        return _super.call(this, props) || this;
    }
    TextInput.prototype.render = function () {
        var _this = this;
        return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_form_field__WEBPACK_IMPORTED_MODULE_2__["FormField"], { label: this.props.label },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { type: "text", autoFocus: this.props.autoFocus, id: this.props.id, size: 35, value: this.props.value, onChange: function (ev) { return _this.props.onChange(ev.target.value); }, placeholder: this.props.placeholder }))));
    };
    return TextInput;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/utility-components/form-field-textarea.tsx":
/*!*******************************************************************!*\
  !*** ./src/components/utility-components/form-field-textarea.tsx ***!
  \*******************************************************************/
/*! exports provided: TextAreaFormField */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TextAreaFormField", function() { return TextAreaFormField; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _form_field__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./form-field */ "./src/components/utility-components/form-field.tsx");



var TextAreaFormField = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](TextAreaFormField, _super);
    function TextAreaFormField(props) {
        return _super.call(this, props) || this;
    }
    TextAreaFormField.prototype.render = function () {
        var _this = this;
        return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_form_field__WEBPACK_IMPORTED_MODULE_2__["FormField"], { label: this.props.label, id: this.props.id },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("textarea", { autoFocus: this.props.autoFocus, id: this.props.id, cols: 35, rows: this.props.rows || 5, value: this.props.value, onChange: function (ev) { return _this.props.onChange(ev.target.value); }, placeholder: this.props.placeholder })),
                !!this.props.children && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem" }, this.props.children))));
    };
    return TextAreaFormField;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/utility-components/form-field.tsx":
/*!**********************************************************!*\
  !*** ./src/components/utility-components/form-field.tsx ***!
  \**********************************************************/
/*! exports provided: FormField */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FormField", function() { return FormField; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


function findId(node) {
    var recucheck = new Set();
    return (function findId(node) {
        if (typeof node === 'string')
            return null;
        if (recucheck.has(node)) {
            return;
        }
        recucheck.add(node);
        if (node.props) {
            if (node.props.id)
                return node.props.id;
            if (node.props.children) {
                return findId(node.props.children);
            }
            return;
        }
        if (node.length) {
            for (var i = 0; i < node.length; ++i) {
                var child = node[i];
                if (child) {
                    var childId = findId(child);
                    if (childId)
                        return childId;
                    //console.log(child);
                }
            }
        }
    })(node);
}
var FormField = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](FormField, _super);
    function FormField(props) {
        return _super.call(this, props) || this;
    }
    FormField.prototype.render = function () {
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("label", { className: "kclabel", htmlFor: this.props.id || findId(this.props.children) }, this.props.label),
            this.props.children);
    };
    return FormField;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/utility-components/horizontal-item.tsx":
/*!***************************************************************!*\
  !*** ./src/components/utility-components/horizontal-item.tsx ***!
  \***************************************************************/
/*! exports provided: HorizontalItem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HorizontalItem", function() { return HorizontalItem; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var HorizontalItem = function (_a) {
    var className = _a.className, classNames = _a.classNames, children = _a.children;
    return (react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"]((classNames || []), (className ? [className] : []), ["horizontalItem"]).join(' ') }, children));
};


/***/ }),

/***/ "./src/components/utility-components/lazy-content.tsx":
/*!************************************************************!*\
  !*** ./src/components/utility-components/lazy-content.tsx ***!
  \************************************************************/
/*! exports provided: LazyContent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LazyContent", function() { return LazyContent; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _live_query_view__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./live-query-view */ "./src/components/utility-components/live-query-view.tsx");


function LazyContent(_a) {
    var children = _a.children, spinner = _a.spinner, onError = _a.onError, noError = _a.noError;
    return react__WEBPACK_IMPORTED_MODULE_0__["createElement"](_live_query_view__WEBPACK_IMPORTED_MODULE_1__["LiveQueryView"], { props: children, spinner: spinner, noError: noError, onError: onError, fn: function (observable) { return observable; } });
}


/***/ }),

/***/ "./src/components/utility-components/live-query-view.tsx":
/*!***************************************************************!*\
  !*** ./src/components/utility-components/live-query-view.tsx ***!
  \***************************************************************/
/*! exports provided: liveQueryView, LiveQueryView */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "liveQueryView", function() { return liveQueryView; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LiveQueryView", function() { return LiveQueryView; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/utils */ "./src/utils/utils.ts");



function liveQueryView(fn, options) {
    return function (props) {
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](LiveQueryView, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({ props: props, fn: fn }, options));
    };
}
var LiveQueryView = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](LiveQueryView, _super);
    function LiveQueryView(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            result: null,
            isLoading: true
        };
        return _this;
    }
    LiveQueryView.prototype.componentDidMount = function () {
        this.subscribe();
    };
    LiveQueryView.prototype.componentWillUnmount = function () {
        this.unsubscribe();
    };
    LiveQueryView.prototype.shouldComponentUpdate = function (nextProps, nextState) {
        return (this.state.error !== nextState.error ||
            this.state.isLoading !== nextState.isLoading ||
            this.state.result !== nextState.result ||
            !Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["shallowEquals"])(nextProps.props, this.props.props));
    };
    LiveQueryView.prototype.componentDidUpdate = function (prevProps) {
        if (!Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["shallowEquals"])(prevProps.props, this.props.props)) {
            this.unsubscribe();
            this.subscribe();
        }
    };
    LiveQueryView.prototype.subscribe = function () {
        var _this = this;
        this.setState({ isLoading: true });
        this.subscription = this.props.fn(this.props.props).subscribe(function (result, error) { return _this.setState({
            result: result,
            error: error,
            isLoading: false
        }); });
    };
    LiveQueryView.prototype.unsubscribe = function () {
        if (this.subscription) {
            this.subscription.unsubscribe();
            this.subscription = null;
        }
    };
    LiveQueryView.prototype.render = function () {
        var _a = this.state, result = _a.result, error = _a.error, isLoading = _a.isLoading;
        var _b = this.props, spinner = _b.spinner, onError = _b.onError, noError = _b.noError;
        //if (!isLoading && !result) debugger;
        return error ?
            noError ? "" : onError ? onError(error) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                "Error: ",
                error.message) :
            isLoading ?
                spinner ? spinner : "" :
                result === undefined ? "" : result;
    };
    return LiveQueryView;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/utility-components/loading-indicator.tsx":
/*!*****************************************************************!*\
  !*** ./src/components/utility-components/loading-indicator.tsx ***!
  \*****************************************************************/
/*! exports provided: LoadingIndicator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LoadingIndicator", function() { return LoadingIndicator; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _live_query_view__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./live-query-view */ "./src/components/utility-components/live-query-view.tsx");
/* harmony import */ var _course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../course-builder/sub-components/spinner */ "./src/components/course-builder/sub-components/spinner.tsx");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../globals/KED.env */ "./src/globals/KED.env.ts");





var LoadingIndicator = Object(_live_query_view__WEBPACK_IMPORTED_MODULE_2__["liveQueryView"])(function () {
    return _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__["default"].kedBackendClient.http.status.combineLatest(_globals_KED_env__WEBPACK_IMPORTED_MODULE_4__["default"].edsClient.http.status)
        .map(function (_a) {
        var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](_a, 2), kedBackendStatus = _b[0], edsStatus = _b[1];
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "loading-indicator" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "indicator" }, kedBackendStatus.numOutstandingOperations > 0 || edsStatus.numOutstandingOperations > 0 ?
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_3__["Spinner"], null) : undefined));
    });
});


/***/ }),

/***/ "./src/components/utility-components/open-close-box.tsx":
/*!**************************************************************!*\
  !*** ./src/components/utility-components/open-close-box.tsx ***!
  \**************************************************************/
/*! exports provided: OpenCloseBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OpenCloseBox", function() { return OpenCloseBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _charts_goal_progress__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../charts/goal-progress */ "./src/components/charts/goal-progress.tsx");
/* REFACTOR: Move this component outside coursebuilder!
   This is a general-purpose component
*/



var OpenCloseBox = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](OpenCloseBox, _super);
    function OpenCloseBox(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            headerOpen: props.headerOpen || false
        };
        return _this;
    }
    OpenCloseBox.prototype.componentWillReceiveProps = function (nextProps) {
        if (nextProps.headerOpen !== this.props.headerOpen) {
            this.setState({ headerOpen: nextProps.headerOpen });
        }
    };
    OpenCloseBox.prototype.render = function () {
        var _this = this;
        var _a = this.props, title = _a.title, className = _a.className, children = _a.children, headerClassName = _a.headerClassName, contentClassName = _a.contentClassName, displayProgress = _a.displayProgress, progressData = _a.progressData, inactivated = _a.inactivated, inactivatedRender = _a.inactivatedRender;
        var headerOpen = this.state.headerOpen;
        if (inactivated)
            return inactivatedRender === 'titleAndChildren' ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null, title),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null, children)) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null, children);
        //var currentProgressData = //progressData();
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: (className || '') + " openClose" + (headerOpen ? " open" : "") },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "openHeader" + (headerClassName ? " " + headerClassName : ""), onClick: function () {
                    if (_this.props.onOpenClose)
                        _this.props.onOpenClose(!_this.state.headerOpen);
                    _this.setState({ headerOpen: !_this.state.headerOpen });
                } },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "openHeaderContainer" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null, title),
                    displayProgress && react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_charts_goal_progress__WEBPACK_IMPORTED_MODULE_2__["GoalProgress"], tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, progressData)))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "openContent" + (contentClassName ? " " + contentClassName : "") }, children));
    };
    return OpenCloseBox;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/utility-components/sortable-task-list.tsx":
/*!******************************************************************!*\
  !*** ./src/components/utility-components/sortable-task-list.tsx ***!
  \******************************************************************/
/*! exports provided: taskHasMigratedTexts, SortableTaskList */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "taskHasMigratedTexts", function() { return taskHasMigratedTexts; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SortableTaskList", function() { return SortableTaskList; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


function taskHasMigratedTexts(task) {
    return task.migratedTexts && Object.keys(task.migratedTexts).some(function (type) {
        return Object.keys(task.migratedTexts[type]).length > 0;
    });
}
function SortableTaskList(_a) {
    var taskMetas = _a.taskMetas, renderEditLink = _a.renderEditLink, renderLink = _a.renderLink, onSort = _a.onSort;
    var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])({
        taskBeingDragged: null,
        taskBeingHovered: null,
        insertBefore: false,
        originClientY: -1
    }), 2), dragState = _b[0], setDragState = _b[1];
    var taskBeingDragged = dragState.taskBeingDragged, taskBeingHovered = dragState.taskBeingHovered, insertBefore = dragState.insertBefore, originClientY = dragState.originClientY;
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "taskContainer sortable", onDrop: function (ev) {
            if (taskBeingHovered && taskBeingDragged) {
                onSort(taskBeingDragged, taskBeingHovered, insertBefore ? 'before' : 'after');
            }
            setDragState(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, dragState, { taskBeingHovered: null, taskBeingDragged: null }));
        } }, taskMetas.map(function (taskMeta) {
        var task = taskMeta.task, isTaskOwner = taskMeta.isTaskOwner;
        var hasMigratedTexts = taskHasMigratedTexts(task);
        var taskId = task.id;
        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, { key: taskId },
            insertBefore && taskBeingHovered === task ?
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "drop-target", onDragOver: function (ev) { return ev.preventDefault(); } }, "\u00A0") :
                null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: ["align-horizontal", "draggable", task === taskBeingDragged && "drag-source"].filter(function (x) { return x; }).join(' '), draggable: true, onDragStart: function (ev) {
                    ev.dataTransfer.effectAllowed = "move";
                    setDragState(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, dragState, { originClientY: ev.clientY, taskBeingDragged: task }));
                }, onDragOver: function (ev) {
                    if (!taskBeingDragged)
                        return;
                    if (taskBeingDragged === task) {
                        setDragState(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, dragState, { taskBeingHovered: null }));
                        return;
                    }
                    ev.preventDefault();
                    ev.dataTransfer.dropEffect = "move";
                    setDragState(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, dragState, { taskBeingHovered: task, insertBefore: originClientY > ev.clientY }));
                }, onDragEnd: function (ev) {
                    setDragState(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, dragState, { taskBeingHovered: null, taskBeingDragged: null }));
                } },
                isTaskOwner && hasMigratedTexts && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { style: { position: 'relative', top: '0.2em', left: '-0.7em' } },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-pagelines", style: { position: 'absolute', top: 0, left: 0, color: '#49c35a' } }))),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" }, renderEditLink(taskMeta)),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" }, renderLink(taskMeta))),
            !insertBefore && taskBeingHovered === task ?
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "drop-target", onDragOver: function (ev) { return ev.preventDefault(); } }, "\u00A0") :
                null);
    }));
}


/***/ }),

/***/ "./src/components/utility-components/wysiwyg/actions-sv.ts":
/*!*****************************************************************!*\
  !*** ./src/components/utility-components/wysiwyg/actions-sv.ts ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _exec__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./exec */ "./src/components/utility-components/wysiwyg/exec.ts");

/* harmony default export */ __webpack_exports__["default"] = ({
    bold: {
        icon: '<b>F</b>',
        title: 'Fetstil',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('bold'); }
    },
    italic: {
        icon: '<i>K</i>',
        title: 'Kursiv',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('italic'); }
    },
    underline: {
        icon: '<u>U</u>',
        title: 'Understruken',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('underline'); }
    },
    strikethrough: {
        icon: '<strike>S</strike>',
        title: 'Struken',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('strikeThrough'); }
    },
    heading1: {
        icon: '<b>H<sub>1</sub></b>',
        title: 'Rubrik 1',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<H1>'); }
    },
    heading2: {
        icon: '<b>H<sub>2</sub></b>',
        title: 'Rubrik 2',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<H2>'); }
    },
    heading3: {
        icon: '<b>H<sub>3</sub></b>',
        title: 'Rubrik 3',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<H3>'); }
    },
    paragraph: {
        icon: '&#182;',
        title: 'Paragraf',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<P>'); }
    },
    quote: {
        icon: '&#8220; &#8221;',
        title: 'Citat',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<BLOCKQUOTE>'); }
    },
    olist: {
        icon: '<i class="fa fa-list-ol" aria-hidden="true"></i>',
        title: 'Ordnad lista',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertOrderedList'); }
    },
    ulist: {
        icon: '<i class="fa fa-list" aria-hidden="true"></i>',
        title: 'Punktlista',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertUnorderedList'); }
    },
    code: {
        icon: '&lt;/&gt;',
        title: 'Programkod',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<PRE>'); }
    },
    line: {
        icon: '&#8213;',
        title: 'Vgrt linje',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertHorizontalRule'); }
    },
    link: {
        icon: '<i class="fa fa-link" aria-hidden="true"></i>',
        title: 'Infoga lnk',
        result: function () {
            var url = window.prompt('Ange lnkens URL');
            if (url)
                Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('createLink', url);
        }
    },
    image: {
        icon: '<i class="fa fa-picture-o" aria-hidden="true"></i>',
        title: 'Infoga bild',
        promptMsg: 'Ange bildens URL',
        result: function (ev, component) {
            var url = window.prompt(this.promptMsg);
            if (url) {
                //exec('insertImage', url);
                var img = document.createElement("img");
                img.src = url;
                img.tabIndex = 1;
                insertElement(img);
                img.onfocus = component.onFocus;
                img.onblur = component.onBlur;
                component.props.onChange(component.contentDiv.innerHTML);
            }
        }
    }
});
function insertElement(element) {
    var sel, range;
    if (window.getSelection && (sel = window.getSelection()).rangeCount) {
        range = sel.getRangeAt(0);
        range.collapse(true);
        range.insertNode(element);
        // Move the caret immediately after the inserted span
        range.setStartAfter(element);
        range.collapse(true);
        sel.removeAllRanges();
        sel.addRange(range);
    }
}


/***/ }),

/***/ "./src/components/utility-components/wysiwyg/actions.ts":
/*!**************************************************************!*\
  !*** ./src/components/utility-components/wysiwyg/actions.ts ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _exec__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./exec */ "./src/components/utility-components/wysiwyg/exec.ts");

/* harmony default export */ __webpack_exports__["default"] = ({
    bold: {
        icon: '<b>B</b>',
        title: 'Bold',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('bold'); }
    },
    italic: {
        icon: '<i>I</i>',
        title: 'Italic',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('italic'); }
    },
    underline: {
        icon: '<u>U</u>',
        title: 'Underline',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('underline'); }
    },
    strikethrough: {
        icon: '<strike>S</strike>',
        title: 'Strike-through',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('strikeThrough'); }
    },
    heading1: {
        icon: '<b>H<sub>1</sub></b>',
        title: 'Heading 1',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<H1>'); }
    },
    heading2: {
        icon: '<b>H<sub>2</sub></b>',
        title: 'Heading 2',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<H2>'); }
    },
    heading3: {
        icon: '<b>H<sub>3</sub></b>',
        title: 'Heading 3',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<H3>'); }
    },
    paragraph: {
        icon: '&#182;',
        title: 'Paragraph',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<P>'); }
    },
    quote: {
        icon: '&#8220; &#8221;',
        title: 'Quote',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<BLOCKQUOTE>'); }
    },
    olist: {
        icon: '&#35;',
        title: 'Ordered List',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertOrderedList'); }
    },
    ulist: {
        icon: '&#8226;',
        title: 'Unordered List',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertUnorderedList'); }
    },
    code: {
        icon: '&lt;/&gt;',
        title: 'Code',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<PRE>'); }
    },
    line: {
        icon: '&#8213;',
        title: 'Horizontal Line',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertHorizontalRule'); }
    },
    link: {
        icon: '&#128279;',
        title: 'Link',
        result: function () {
            var url = window.prompt('Enter the link URL');
            if (url)
                Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('createLink', url);
        }
    },
    image: {
        icon: '&#128247;',
        title: 'Image',
        promptMsg: 'Enter the URL of the image',
        result: function () {
            var url = window.prompt(this.promptMsg);
            if (url)
                Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertImage', url);
        }
    }
});


/***/ }),

/***/ "./src/components/utility-components/wysiwyg/exec.ts":
/*!***********************************************************!*\
  !*** ./src/components/utility-components/wysiwyg/exec.ts ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (command, value) {
    if (value === void 0) { value = null; }
    document.execCommand(command, false, value);
});


/***/ }),

/***/ "./src/components/utility-components/wysiwyg/image-edit-actions.ts":
/*!*************************************************************************!*\
  !*** ./src/components/utility-components/wysiwyg/image-edit-actions.ts ***!
  \*************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return imageEditActions; });
function imageEditActions(cb) {
    return [{
            name: 'float-left',
            icon: "<div style=\"position:relative\">\n      <i class=\"fa fa-align-right\" aria-hidden=\"true\"></i>\n      <div style=\"position:absolute; left:-4px;top:0; transform: scale(0.5); transform-origin: left top\">\n        <i class=\"fa fa-picture-o\" aria-hidden=\"true\"></i>\n      </div>\n    </div>",
            title: 'Lt bilden flyta vnster om text',
            result: function () { return cb('float-left'); }
        }, {
            name: 'float-right',
            icon: "<div style=\"position:relative\">\n      <i class=\"fa fa-align-left\" aria-hidden=\"true\"></i>\n      <div style=\"position:absolute; right:-4px;top:0; transform: scale(0.5); transform-origin: right top\">\n        <i class=\"fa fa-picture-o\" aria-hidden=\"true\"></i>\n      </div>\n    </div>",
            title: 'Lt bilden flyta hger om text',
            result: function () { return cb('float-right'); }
        }, {
            name: 'unfloat',
            icon: "<div style=\"position:relative;\" aria-hidden=\"true\">\n      <div style=\"position:absolute;top:0;left:0\">&#8254;</div>\n      <div style=\"position:absolute;top:0:left:0;transform: scale(0.5); transform-origin: left bottom\">\n        <i class=\"fa fa-picture-o\" aria-hidden=\"true\"></i>\n      </div>\n      <div style=\"position:absolute;top:0;left:0\">_</div>\n    </div>",
            title: 'Placera bilden p egen rad',
            result: function () { return cb('unfloat'); }
        }];
}


/***/ }),

/***/ "./src/components/utility-components/wysiwyg/index.tsx":
/*!*************************************************************!*\
  !*** ./src/components/utility-components/wysiwyg/index.tsx ***!
  \*************************************************************/
/*! exports provided: Wysiwyg */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Wysiwyg", function() { return Wysiwyg; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _exec__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./exec */ "./src/components/utility-components/wysiwyg/exec.ts");
/* harmony import */ var _wash_html__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./wash-html */ "./src/components/utility-components/wysiwyg/wash-html.ts");
/* harmony import */ var _image_edit_actions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./image-edit-actions */ "./src/components/utility-components/wysiwyg/image-edit-actions.ts");
/* harmony import */ var _actions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./actions */ "./src/components/utility-components/wysiwyg/actions.ts");






var classes = {
    actionbar: 'wysiwyg-actionbar',
    button: 'wysiwyg-button',
    content: 'wysiwyg-content',
    focusrect: 'wysiwyg-focusrect',
    focuspoint: 'wysiwyg-focuspoint',
    readonlyContent: 'wysiwyg-content readonly'
};
var Wysiwyg = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Wysiwyg, _super);
    function Wysiwyg(props) {
        var _this = _super.call(this, props) || this;
        _this.state = { focusRect: null };
        _this.onFocus = _this.onFocus.bind(_this);
        _this.onBlur = _this.onBlur.bind(_this);
        _this.onMouseDown = _this.onMouseDown.bind(_this);
        _this.onMouseMove = _this.onMouseMove.bind(_this);
        _this.onMouseUp = _this.onMouseUp.bind(_this);
        return _this;
    }
    Wysiwyg.prototype.componentDidMount = function () {
        var _this = this;
        if (!this.props.readOnly) {
            Array.from(this.contentDiv.querySelectorAll("img,a")).map(function (elem) { return elem; })
                .forEach(function (elem) {
                elem.tabIndex = 1;
                elem.onfocus = _this.onFocus;
                elem.onblur = _this.onBlur;
            });
            document.querySelector(".wysiwyg-content").addEventListener('mousedown', this.onMouseDown);
            document.querySelector(".wysiwyg-content").addEventListener('mousemove', this.onMouseMove);
            document.querySelector(".wysiwyg-content").addEventListener('mouseup', this.onMouseUp);
        }
        if (this.props.reportNumChars) {
            this.props.reportNumChars((this.contentDiv && this.contentDiv.innerText && this.contentDiv.innerText.length) || 0);
        }
    };
    Wysiwyg.prototype.componentDidUpdate = function () {
        var _this = this;
        Array.from(this.contentDiv.querySelectorAll("img,a")).map(function (elem) { return elem; })
            .forEach(function (elem) {
            elem.tabIndex = 1;
            elem.onfocus = _this.onFocus;
            elem.onblur = _this.onBlur;
        });
        if (this.props.reportNumChars) {
            this.props.reportNumChars((this.contentDiv && this.contentDiv.innerText && this.contentDiv.innerText.length) || 0);
        }
    };
    Wysiwyg.prototype.componentWillUnmount = function () {
        document.querySelector(".wysiwyg-content").removeEventListener('mousedown', this.onMouseDown);
        document.querySelector(".wysiwyg-content").removeEventListener('mousemove', this.onMouseMove);
        document.querySelector(".wysiwyg-content").removeEventListener('mouseup', this.onMouseUp);
    };
    Wysiwyg.prototype.shouldComponentUpdate = function (nextProps, nextState) {
        //this.contentDiv.onfocus = this.onFocus;
        //this.contentDiv.onblur = this.onBlur;
        return !this.contentDiv ||
            nextState != this.state ||
            nextProps.readOnly !== this.props.readOnly ||
            Object(_wash_html__WEBPACK_IMPORTED_MODULE_3__["washHtml"])(nextProps.html) !== Object(_wash_html__WEBPACK_IMPORTED_MODULE_3__["washHtml"])(this.contentDiv.innerHTML);
    };
    Wysiwyg.prototype.triggerOnChange = function (html) {
        this.props.onChange && this.props.onChange(Object(_wash_html__WEBPACK_IMPORTED_MODULE_3__["washHtml"])(html));
    };
    Wysiwyg.prototype.onFocus = function (ev) {
        var elem = ev.target;
        if (!elem || !elem.tagName)
            return;
        if (elem.tagName !== 'IMG' && elem.tagName !== 'A')
            return;
        var contentParent = this.contentDiv.parentElement;
        var newState = {
            focusRect: getRelatativeClientRect(contentParent, elem),
        };
        switch (elem.tagName) {
            case 'A':
            case 'IMG':
            default: break;
        }
        this.setState(newState);
        this.focusElem = elem;
    };
    Wysiwyg.prototype.onBlur = function (ev) {
        /*if (ev.relatedTarget) {
          const relatedTarget = ev.relatedTarget as HTMLElement;
          if (relatedTarget.className && relatedTarget.className.split(' ').indexOf(classes.button) >= 0) {
            // A image action button was pressed
            set
            return;
          }
        }*/
        if ((ev.target === this.focusElem && ev.relatedTarget !== this.focusRectDiv) ||
            ev.target === this.focusRectDiv) {
            this.setState({ focusRect: null });
        }
    };
    Wysiwyg.prototype.makeClickable = function (elem) {
        elem.tabIndex = 1;
    };
    Wysiwyg.prototype.onMouseDown = function (ev) {
        if ((ev.target.className || "").split(' ').indexOf(classes.focuspoint) >= 0) {
            var corner = this.getRectCorner(ev);
            this.corner = corner;
            this.resizeStartX = ev.clientX;
        }
    };
    Wysiwyg.prototype.onMouseMove = function (ev) {
        if (this.corner && this.state.focusRect && this.focusElem) {
            ev.preventDefault();
            // TODO: Rkna ut baserat p this.corner hur bildens storlek borde ndras.
            // Leta upp bilden per ID frn this.contentDiv
            // Stt DIV:ens style attribut width till ny width.
            // Om DIV:en redan hade height, stt ny height med samma aspect ratio som innan,
            // annars, stt inte height alls (eller mjligtvis till auto))
            var focusRect = this.focusRectDiv.getBoundingClientRect();
            if (focusRect.width < 32)
                return;
            //const currentWidth = focusRect.width;
            //const currentHeight = focusRect.height;
            //const hasHeightStyle = !this.focusElem.style.height || this.focusElem.style.height === "auto";
            var newWidth = Math.max(32, this.corner.endsWith('l') ?
                focusRect.width + (this.resizeStartX - ev.clientX) :
                //focusRect.right - ev.clientX :
                focusRect.width - (this.resizeStartX - ev.clientX));
            this.resizeStartX = ev.clientX;
            //ev.clientX - focusRect.left;
            var factor = newWidth / focusRect.width;
            var newHeight = focusRect.height * factor;
            this.focusElem.style.width = newWidth + "px";
            this.focusElem.style.height = newHeight + "px";
            this.setState({
                focusRect: getRelatativeClientRect(this.contentDiv.parentElement, this.focusElem),
            });
        }
    };
    Wysiwyg.prototype.onMouseUp = function (ev) {
        if (this.corner && this.state.focusRect && this.focusElem) {
            this.corner = null;
            this.triggerOnChange(this.contentDiv.innerHTML);
        }
    };
    Wysiwyg.prototype.getRectCorner = function (ev) {
        var e_1, _a;
        try {
            for (var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"]((ev.target.className || '').split(' ')), _c = _b.next(); !_c.done; _c = _b.next()) {
                var className = _c.value;
                switch (className) {
                    case 'fpul':
                        return 'ul';
                    case 'fpur':
                        return 'fpur';
                    case 'fplr':
                        return 'lr';
                    case 'fpll':
                        return 'll';
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return null;
    };
    Wysiwyg.prototype.execImageEditAction = function (cmd) {
        //console.log(cmd);
        if (!this.focusElem)
            return;
        //console.log("doing it");
        switch (cmd) {
            case 'float-left':
                this.focusElem.style.cssFloat = 'left';
                break;
            case 'float-right':
                this.focusElem.style.cssFloat = 'right';
                break;
            case 'unfloat':
                this.focusElem.style.cssFloat = '';
                break;
        }
        this.triggerOnChange(this.contentDiv.innerHTML);
        this.setState({ focusRect: getRelatativeClientRect(this.contentDiv.parentElement, this.focusElem) });
    };
    Wysiwyg.prototype.render = function () {
        var _this = this;
        var defaultActions = this.props.defaultActions || _actions__WEBPACK_IMPORTED_MODULE_5__["default"];
        var actionsToUse = this.props.actions ? this.props.actions.map(function (action) {
            return typeof action === 'string' ?
                defaultActions[action] :
                defaultActions[action.name] ? tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, defaultActions[action.name], action) :
                    action;
        })
            : Object.keys(defaultActions).map(function (action) { return defaultActions[action]; });
        if (this.state.focusRect) {
            actionsToUse = actionsToUse.concat(Object(_image_edit_actions__WEBPACK_IMPORTED_MODULE_4__["default"])(function (cmd) { return _this.execImageEditAction(cmd); }));
        }
        var focusRect = this.state.focusRect;
        var _a = this.props, readOnly = _a.readOnly, reportNumChars = _a.reportNumChars, maxChars = _a.maxChars;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: this.props.className },
            !readOnly && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: classes.actionbar }, actionsToUse.map(function (action, idx) {
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { key: idx, className: classes.button, dangerouslySetInnerHTML: { __html: action.icon }, title: action.title, onMouseDown: function (ev) { action.result(ev, _this); }, onMouseUp: function (ev) { return setTimeout(function () { return _this.contentDiv.focus(); }, 10); } });
            })),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: readOnly ? classes.readonlyContent : classes.content, style: { position: 'relative', top: 0, left: 0 } },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "editor", ref: function (div) { return _this.contentDiv = div; }, dangerouslySetInnerHTML: { __html: Object(_wash_html__WEBPACK_IMPORTED_MODULE_3__["washHtml"])(this.props.html) }, contentEditable: !readOnly, onPaste: function (ev) {
                        if (!isNaN(maxChars)) {
                            var target = ev.target, currentTarget = ev.currentTarget;
                            //const textBeingOverwritten = (target as any).innerText || "";
                            var editorText = (currentTarget && currentTarget.innerText) || "";
                            var textBeingPasted = ev.clipboardData.getData("text/plain") || "";
                            if (editorText.length + textBeingPasted.length > maxChars) {
                                ev.preventDefault();
                            }
                        }
                    }, onKeyUp: reportNumChars ? function (ev) {
                        var innerText = ev.target.innerText;
                        reportNumChars(innerText ? innerText.length : 0);
                    } : null, onKeyPress: !isNaN(maxChars) ? function (ev) {
                        var innerText = ev.target.innerText;
                        if (innerText && innerText.length >= maxChars) {
                            ev.preventDefault();
                        }
                    } : null, onInput: function (ev) { return _this.triggerOnChange(ev.target.innerHTML); }, onKeyDown: function (ev) {
                        if (readOnly)
                            return;
                        if (reportNumChars && ev.currentTarget) {
                            reportNumChars((ev.currentTarget.innerText || "").length);
                        }
                        //console.log("Key: " + ev.which);
                        if (ev.which >= 35 && ev.which <= 40) { // home/end/up/down/left/right
                            ev.stopPropagation(); // Prevent entire page from scrolling??
                        }
                        if (ev.which === 9) {
                            ev.preventDefault(); // TAB
                            if (ev.shiftKey) {
                                Object(_exec__WEBPACK_IMPORTED_MODULE_2__["default"])("outdent");
                            }
                            else {
                                Object(_exec__WEBPACK_IMPORTED_MODULE_2__["default"])("indent");
                            }
                        }
                        if ((ev.keyCode === 8 || ev.keyCode === 46) && // Delete or Back buttons
                            _this.focusElem && _this.state.focusRect) {
                            if (_this.focusElem && _this.focusElem.parentElement) {
                                _this.focusElem.parentElement.removeChild(_this.focusElem); // Remove marked image
                            }
                            _this.focusElem = null;
                            _this.setState({ focusRect: null });
                            _this.triggerOnChange(_this.contentDiv.innerHTML);
                        }
                    } }),
                focusRect && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { ref: function (div) { return _this.focusRectDiv = div; }, className: classes.focusrect, onBlur: this.onBlur, tabIndex: 1, style: {
                        outline: 0,
                        position: 'absolute',
                        top: this.state.focusRect.top,
                        left: this.state.focusRect.left,
                        width: this.state.focusRect.width,
                        height: this.state.focusRect.height
                    } },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: classes.focuspoint + " fpul", style: { position: 'absolute', top: 0, left: 0 } }),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: classes.focuspoint + " fpur", style: { position: 'absolute', top: 0, right: 0 } }),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: classes.focuspoint + " fplr", style: { position: 'absolute', bottom: 0, right: 0 } }),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: classes.focuspoint + " fpll", style: { position: 'absolute', bottom: 0, left: 0 } }))));
    };
    return Wysiwyg;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

function getRelatativeClientRect(parent, child) {
    var parentRect = parent.getBoundingClientRect();
    var childRect = child.getBoundingClientRect();
    return {
        top: childRect.top - parentRect.top + parent.scrollTop,
        left: childRect.left - parentRect.left + parent.scrollLeft,
        bottom: childRect.bottom - parentRect.top + parent.scrollTop,
        right: childRect.right - parentRect.left + parent.scrollLeft,
        width: childRect.width,
        height: childRect.height
    };
}


/***/ }),

/***/ "./src/components/utility-components/wysiwyg/restore-selection.ts":
/*!************************************************************************!*\
  !*** ./src/components/utility-components/wysiwyg/restore-selection.ts ***!
  \************************************************************************/
/*! exports provided: saveSelection, restoreSelection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "saveSelection", function() { return saveSelection; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "restoreSelection", function() { return restoreSelection; });
function saveSelection() {
    if (window.getSelection) {
        var sel = window.getSelection();
        if (sel.getRangeAt && sel.rangeCount) {
            return sel.getRangeAt(0);
        }
    }
    else if (document["selection"] && document["selection"].createRange) {
        return document["selection"].createRange();
    }
    return null;
}
function restoreSelection(range) {
    if (range) {
        if (window.getSelection) {
            var sel = window.getSelection();
            sel.removeAllRanges();
            sel.addRange(range);
        }
        else if (document["selection"] && range.select) {
            range.select();
        }
    }
}


/***/ }),

/***/ "./src/components/utility-components/wysiwyg/wash-html.ts":
/*!****************************************************************!*\
  !*** ./src/components/utility-components/wysiwyg/wash-html.ts ***!
  \****************************************************************/
/*! exports provided: washHtml */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "washHtml", function() { return washHtml; });
var parser = new DOMParser();
/** Tags / Attributes Whitelist
 *
 */
var HTML_WASH_POLICY = {
    b: {},
    i: {},
    p: {},
    u: {},
    strike: {},
    pre: {},
    h1: {},
    h2: {},
    h3: {},
    h4: {},
    h5: {},
    img: { src: true, class: true, style: true, tabindex: true },
    a: { href: true, target: true, tabindex: true },
    ul: {},
    ol: {},
    li: {},
    hr: {},
    br: {},
    div: {},
    span: {},
    // table tags:
    table: { border: true },
    tbody: {},
    thead: {},
    tfoot: {},
    tr: {},
    td: { headers: true, colspan: true, rowspan: true },
    th: { abbr: true, headers: true, scope: true, sorted: true, colspan: true, rowspan: true }
};
function washHtml(html) {
    var doc = parser.parseFromString(html, "text/html");
    var childNodes = doc.body.childNodes;
    var modified = false;
    for (var i = 0; i < childNodes.length; ++i) {
        if (washNode(childNodes.item(i))) {
            modified = true;
        }
    }
    return modified ?
        doc.body.innerHTML :
        html; // By returning the original HTML string, we spare the user from refreshing the edit area,
    // which would otherwise put the cursor at the top, losing the position where user where.
}
function washNode(node) {
    var modified = false;
    if (isElement(node)) {
        if (washElement(node)) {
            modified = true;
        }
    }
    if (washChildNodes(node)) {
        modified = true;
    }
    return modified;
}
function washChildNodes(node) {
    var modified = false;
    var childNodes = node.childNodes;
    for (var i = 0; i < childNodes.length; ++i) {
        if (washNode(childNodes.item(i))) {
            modified = true;
        }
    }
    return modified;
}
/** Replace an element with its child nodes.
 *
 */
function removeMiddleElement(element) {
    var childNodes = element.childNodes;
    for (var i = 0; i < childNodes.length; ++i) {
        element.parentNode.insertBefore(childNodes.item(i), element);
    }
    element.remove();
}
function washElement(element) {
    var policy = element.tagName && HTML_WASH_POLICY[element.tagName.toLowerCase()];
    if (!policy) {
        console.warn("Wysiwyg: not allowed tag", element.tagName);
        washChildNodes(element);
        removeMiddleElement(element);
        return true;
    }
    var modified = false;
    for (var i = 0; i < element.attributes.length; ++i) {
        var attr = element.attributes.item(i);
        var allowed = attr.name && !!policy[attr.name.toLowerCase()];
        if (!allowed) {
            modified = true;
            console.warn("Wysiwyg: not allowed attribute", attr.name, "Tag: ", element.tagName);
            element.removeAttribute(attr.name);
        }
    }
    return modified;
}
function isElement(node) {
    return !!node.tagName;
}


/***/ }),

/***/ "./src/components/weekplanner/add-custom-goal.tsx":
/*!********************************************************!*\
  !*** ./src/components/weekplanner/add-custom-goal.tsx ***!
  \********************************************************/
/*! exports provided: AddCustomGoal */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AddCustomGoal", function() { return AddCustomGoal; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");



var AddCustomGoal = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](AddCustomGoal, _super);
    function AddCustomGoal(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            learningGoal: props.learningGoal || ''
        };
        return _this;
    }
    AddCustomGoal.prototype.render = function () {
        var _this = this;
        var learningGoal = this.state.learningGoal;
        var onSave = this.props.onSave;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet sv-skip-spacer" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_2__["FormattedMessage"], { id: "weekplanner.addLearningGoalTitle", defaultMessage: "L\u00E4gg till eget l\u00E4randem\u00E5l" })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_2__["FormattedMessage"], { id: "weekplanner.addLearningGoal", defaultMessage: "M\u00E5l" })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { type: "text", tabIndex: 1, size: 50, autoFocus: true, value: learningGoal, onChange: function (e) { return _this.setState({ learningGoal: e.target.value }); } })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top spaced" })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null)),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { tabIndex: 1, className: "btn btn-large btn-default", onClick: function () { return onSave(learningGoal); } },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_2__["FormattedMessage"], { id: "common.save", defaultMessage: "save" }))));
    };
    return AddCustomGoal;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/weekplanner/add-custom-task.tsx":
/*!********************************************************!*\
  !*** ./src/components/weekplanner/add-custom-task.tsx ***!
  \********************************************************/
/*! exports provided: AddCustomTask */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AddCustomTask", function() { return AddCustomTask; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utility-components/form-field-text-input */ "./src/components/utility-components/form-field-text-input.tsx");
/* harmony import */ var _utility_components_form_field_textarea__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utility-components/form-field-textarea */ "./src/components/utility-components/form-field-textarea.tsx");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");






var AddCustomTask = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](AddCustomTask, _super);
    function AddCustomTask(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            name: '',
            description: '',
            url: ''
        };
        return _this;
    }
    AddCustomTask.prototype.render = function () {
        var _this = this;
        var _a = this.state, name = _a.name, description = _a.description, url = _a.url;
        var _b = this.props, isTask = _b.isTask, onSave = _b.onSave;
        var intl = this.context.intl;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet sv-skip-spacer" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_5__["FormattedMessage"], { id: "customTask.addWorkGoalTitle", defaultMessage: "L\u00E4gg till eget arbetsm\u00E5l" })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_2__["TextInput"], { label: intl.formatMessage({ id: 'common.nameLabel', defaultMessage: 'Namn' }), id: "AddCustomTask:name", placeholder: intl.formatMessage({ id: 'customTask.enterNamePlhd', defaultMessage: 'Ange namn...' }), value: name, autoFocus: true, onChange: function (name) { return _this.setState({ name: name }); } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_textarea__WEBPACK_IMPORTED_MODULE_3__["TextAreaFormField"], { rows: 7, label: intl.formatMessage({ id: 'common.descriptionLabel', defaultMessage: 'Beskrivning' }), id: "AddCustomTask:description", placeholder: intl.formatMessage({ id: 'common.addDescriptionPlhd', defaultMessage: "Lgg till en beskrivning..." }), value: description, onChange: function (description) { return _this.setState({ description: description }); } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_2__["TextInput"], { label: intl.formatMessage({ id: 'common.linkLabel', defaultMessage: 'Lnk' }), id: "AddCustomTask:url", placeholder: "http://www...", value: url, onChange: function (url) { return _this.setState({ url: url }); } })),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { tabIndex: 1, className: "btn btn-large btn-default", onClick: function () { return onSave(name, description, url); } },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_5__["FormattedMessage"], { id: "common.save", defaultMessage: "Spara" }))));
    };
    AddCustomTask.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_4__["LanguageContext"];
    return AddCustomTask;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/weekplanner/add-or-edit-sub-task.tsx":
/*!*************************************************************!*\
  !*** ./src/components/weekplanner/add-or-edit-sub-task.tsx ***!
  \*************************************************************/
/*! exports provided: AddOrEditSubTask */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AddOrEditSubTask", function() { return AddOrEditSubTask; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utility-components/form-field-text-input */ "./src/components/utility-components/form-field-text-input.tsx");
/* harmony import */ var _utility_components_form_field_textarea__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utility-components/form-field-textarea */ "./src/components/utility-components/form-field-textarea.tsx");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");







var AddOrEditSubTask = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](AddOrEditSubTask, _super);
    function AddOrEditSubTask(props) {
        var _this = _super.call(this, props) || this;
        if (props.mode === 'edit') {
            var subTask = props.subTask;
            _this.state = {
                name: subTask.name || '',
                description: subTask.description || '',
                url: subTask.url || ''
            };
        }
        else {
            _this.state = {
                name: '',
                description: '',
                url: ''
            };
        }
        return _this;
    }
    AddOrEditSubTask.prototype.save = function () {
        // Update repo:
        var props = this.props;
        var userTask = props.userTask, closeDialog = props.closeDialog, userTasksRepo = props.userTasksRepo;
        var _a = this.state, name = _a.name, description = _a.description, url = _a.url;
        if (props.mode === 'edit') {
            // Edit existing:
            userTasksRepo.update([userTask], function (ut) {
                var subTasks = ut.subTasks;
                if (subTasks) {
                    ut.subTasks = subTasks.map(function (st) {
                        return st.id === props.subTask.id ? tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, st, { name: name, description: description, url: url }) : tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, st);
                    });
                }
            });
        }
        else {
            // Create new task
            var newSubTask_1 = {
                id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_4__["createUUID"])(),
                name: name,
                description: description,
                url: url
            };
            // Update repo:
            userTasksRepo.update([userTask], function (ut) {
                if (!ut.subTasks) {
                    ut.subTasks = [];
                }
                ut.subTasks = ut.subTasks.concat(newSubTask_1);
            });
        }
        // Close dialog
        closeDialog();
    };
    AddOrEditSubTask.prototype.delete = function () {
        // Update repo:
        var props = this.props;
        if (props.mode !== 'edit') {
            throw new Error("Can only delete in edit mode");
        }
        props.userTasksRepo.update([props.userTask], function (ut) {
            if (ut.subTasks) {
                ut.subTasks = ut.subTasks.filter(function (t) { return t.id !== props.subTask.id; });
            }
        });
        // Close dialog:
        props.closeDialog();
    };
    AddOrEditSubTask.prototype.render = function () {
        var _this = this;
        var _a = this.state, name = _a.name, description = _a.description, url = _a.url;
        var props = this.props;
        var isEditMode = props.mode === 'edit';
        var intl = this.context.intl;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet sv-skip-spacer" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null, isEditMode ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_5__["FormattedMessage"], { id: "addeditsubtask.editSubtask", defaultMessage: 'Redigera underuppgift' }) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_5__["FormattedMessage"], { id: "addeditsubtask.addSubtask", defaultMessage: 'L\u00E4gg till underuppgift' })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_2__["TextInput"], { autoFocus: true, label: intl.formatMessage({ id: 'addeditsubtask.nameLabel', defaultMessage: 'Underuppgiftens namn' }), id: "AddUserSubTask:name", placeholder: "", value: this.state.name, onChange: function (name) { return _this.setState({ name: name }); } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_textarea__WEBPACK_IMPORTED_MODULE_3__["TextAreaFormField"], { label: intl.formatMessage({ id: 'common.descriptionLabel', defaultMessage: 'Beskrivning' }), id: "AddUserSubTask:description", rows: 7, placeholder: "", value: this.state.description, onChange: function (description) { return _this.setState({ description: description }); } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_2__["TextInput"], { label: intl.formatMessage({ id: 'common.linkLabel', defaultMessage: 'Lnk' }), id: "AddUserSubTask:url", placeholder: "", value: this.state.url, onChange: function (url) { return _this.setState({ url: url }); } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null)),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet" },
                props.mode === 'edit' && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { className: "btn btn-warning btn-large pull-right", onClick: function (ev) { return _this.delete(); } },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_5__["FormattedMessage"], { id: "addeditsubtask.deleteSubtask", defaultMessage: "Ta bort underuppgift" })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { tabIndex: 1, className: "btn btn-large btn-default", onClick: function () { return _this.save(); } },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_5__["FormattedMessage"], { id: "common.save", defaultMessage: "Spara" }))));
    };
    AddOrEditSubTask.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_6__["LanguageContext"];
    return AddOrEditSubTask;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/weekplanner/edit-user-task.tsx":
/*!*******************************************************!*\
  !*** ./src/components/weekplanner/edit-user-task.tsx ***!
  \*******************************************************/
/*! exports provided: EditUserTask */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditUserTask", function() { return EditUserTask; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _get_task_type__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./get-task-type */ "./src/components/weekplanner/get-task-type.ts");
/* harmony import */ var react_datepicker__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-datepicker */ "./node_modules/react-datepicker/es/index.js");
/* harmony import */ var _globals_moment_sv_locale__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../globals/moment-sv-locale */ "./src/globals/moment-sv-locale.ts");
/* harmony import */ var _utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utility-components/form-field-text-input */ "./src/components/utility-components/form-field-text-input.tsx");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _utility_components_form_field__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utility-components/form-field */ "./src/components/utility-components/form-field.tsx");
/* harmony import */ var _add_or_edit_sub_task__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./add-or-edit-sub-task */ "./src/components/weekplanner/add-or-edit-sub-task.tsx");
/* harmony import */ var _utility_components_form_field_textarea__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../utility-components/form-field-textarea */ "./src/components/utility-components/form-field-textarea.tsx");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");












var EditUserTask = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](EditUserTask, _super);
    function EditUserTask(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            userTask: props.userTask,
            name: props.userTask.name,
            description: props.userTask.description,
            url: props.userTask.url,
            deadline: props.userTask.deadline,
            subTasks: props.userTask.subTasks
        };
        _this.onUserTasksChanged = _this.onUserTasksChanged.bind(_this);
        return _this;
    }
    EditUserTask.prototype.componentDidMount = function () {
        this.props.userTasksRepo.subscribe(this.onUserTasksChanged);
    };
    EditUserTask.prototype.onUserTasksChanged = function (userTasks) {
        var _this = this;
        var myUserTask = userTasks.find(function (ut) { return ut.id === _this.props.userTask.id; });
        if (!myUserTask) {
            this.props.closeDialog();
            return;
        }
        this.setState({
            userTask: myUserTask,
            subTasks: myUserTask.subTasks
        });
    };
    EditUserTask.prototype.componentWillUnmount = function () {
        this.props.userTasksRepo.unsubscribe(this.onUserTasksChanged);
    };
    EditUserTask.prototype.isModified = function () {
        // Don't count subtask changes! They live their own life and is maintained
        // in add-or-edit-sub-task.tsx. Reason: User would expect added /edited subtasks
        // to be persisted right away. May click away this dialog.
        // Also reason: Can invoke that dialog by itself from other components. From WeekPlanner
        // when clicking the subtask for example!
        var _a = this.state, deadline = _a.deadline, description = _a.description, name = _a.name, url = _a.url, userTask = _a.userTask;
        return (deadline !== userTask.deadline ||
            description !== userTask.description ||
            name !== userTask.name ||
            url !== userTask.url);
    };
    EditUserTask.prototype.addSubTask = function () {
        this.props.openDialog(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_or_edit_sub_task__WEBPACK_IMPORTED_MODULE_8__["AddOrEditSubTask"], { mode: "add", userTask: this.state.userTask, closeDialog: this.props.closeDialog, userTasksRepo: this.props.userTasksRepo }));
    };
    EditUserTask.prototype.editSubTask = function (subTask) {
        this.props.openDialog(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_or_edit_sub_task__WEBPACK_IMPORTED_MODULE_8__["AddOrEditSubTask"], { mode: "edit", subTask: subTask, userTask: this.state.userTask, closeDialog: this.props.closeDialog, userTasksRepo: this.props.userTasksRepo }));
    };
    EditUserTask.prototype.render = function () {
        var _this = this;
        var _a = this.state, name = _a.name, description = _a.description, url = _a.url, deadline = _a.deadline, subTasks = _a.subTasks, showCalendar = _a.showCalendar, userTask = _a.userTask;
        var id = userTask.id, courseName = userTask.courseName;
        var _b = this.props, onUpdate = _b.onUpdate, onDelete = _b.onDelete;
        var isModified = this.isModified();
        var taskType = Object(_get_task_type__WEBPACK_IMPORTED_MODULE_2__["getTaskType"])(userTask);
        var isCustomTask = taskType === 'customTask';
        var expired = moment__WEBPACK_IMPORTED_MODULE_6___default()(userTask.deadline) < moment__WEBPACK_IMPORTED_MODULE_6___default()();
        var intl = this.context.intl;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "editTaskDialog sv-html-portlet sv-portlet sv-skip-spacer" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null, isCustomTask ?
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "task.editWorkGoals", defaultMessage: 'Redigera arbetsm\u00E5l' }) :
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "task.editTask", defaultMessage: 'Redigera uppgift' })),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_5__["TextInput"], { autoFocus: true, label: isCustomTask ? intl.formatMessage({ id: 'task.targetNameLabel', defaultMessage: 'Arbetsmlets namn' }) : intl.formatMessage({ id: 'task.taskNameLabel', defaultMessage: 'Uppgiftens namn' }), id: "EditUserTask:name", placeholder: isCustomTask ? intl.formatMessage({ id: 'task.whatShouldYouDoPlhd', defaultMessage: 'Vad ska du gra?' }) : intl.formatMessage({ id: 'task.enterTaskNamePlhd', defaultMessage: 'Ange uppgiftens namn...' }), value: name, onChange: function (name) { return _this.setState({ name: name }); } }),
            isCustomTask && react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_textarea__WEBPACK_IMPORTED_MODULE_9__["TextAreaFormField"], { rows: 5, label: intl.formatMessage({ id: 'common.descriptionLabel', defaultMessage: 'Beskrivning' }), id: "EditUserTask:description", placeholder: intl.formatMessage({ id: 'common.addDescriptionPlhd', defaultMessage: 'Lgg till en beskrivning...' }), value: description, onChange: function (description) { return _this.setState({ description: description }); } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_5__["TextInput"], { label: intl.formatMessage({ id: 'common.linkLabel', defaultMessage: "Lnk" }), id: "EdutUserTask:url", placeholder: "http(s)://...", value: url, onChange: function (url) { return _this.setState({ url: url }); } })),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field__WEBPACK_IMPORTED_MODULE_7__["FormField"], { label: intl.formatMessage({ id: 'task.setDeadline', defaultMessage: 'Ange deadline' }) }, (deadline || showCalendar) ?
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_datepicker__WEBPACK_IMPORTED_MODULE_3__["default"], { ref: function (elem) { return _this.datePicker = elem; }, id: "EditUserTask:deadline", nextMonthButtonLabel: "", previousMonthButtonLabel: "", showWeekNumbers: true, selected: deadline && moment__WEBPACK_IMPORTED_MODULE_6___default()(deadline).toDate(), autoFocus: showCalendar, dateFormat: "YYYY-MM-dd", className: expired ? "expired" : undefined, locale: intl.locale, popperPlacement: isCustomTask ? "top-start" : "bottom-start", onBlur: function () { return _this.setState({ showCalendar: false }); }, onChange: function (value) {
                                _this.setState({
                                    deadline: value && moment__WEBPACK_IMPORTED_MODULE_6___default()(value).format("YYYY-MM-DD"),
                                    showCalendar: false
                                });
                            } })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "deleteDate", href: "#", title: intl.formatMessage({ id: 'task.removeDeadline', defaultMessage: 'Ta bort deadline' }), onClick: function (ev) {
                                ev.preventDefault();
                                _this.setState({ deadline: null, showCalendar: false });
                            } }))) :
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "top", ref: function () { _this.datePicker = null; } },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "btn", onClick: function (ev) {
                            if (_this.datePicker) {
                                _this.datePicker.setOpen(true);
                            }
                            _this.setState({
                                showCalendar: true
                            });
                        } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-calendar", "aria-hidden": "true" }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "task.setDeadlineLabel", defaultMessage: "Ange deadline..." })))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field__WEBPACK_IMPORTED_MODULE_7__["FormField"], { label: intl.formatMessage({ id: 'task.subTasks', defaultMessage: 'Underuppgifter' }) },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "learningGoalTasks" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "taskContainer" }, subTasks && subTasks.map(function (subTask) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: subTask.id, className: "align-horizontal" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { onClick: function () { return _this.editSubTask(subTask); }, href: "#" }, subTask.name))); }))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { id: "EditUserTask:addSubTask", className: "btn", onClick: function () { return _this.addSubTask(); } },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-plus", "aria-hidden": "true" }),
                            " ",
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "task.addSubtask", defaultMessage: "L\u00E4gg till underuppgift" }))))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "divider large" }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalButton top" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { tabIndex: 1, className: "btn btn-default", onClick: function () {
                            isModified ? onUpdate(function (userTask) {
                                userTask.name = name;
                                userTask.description = description;
                                userTask.url = url;
                                userTask.deadline = deadline;
                            }) : _this.props.closeDialog();
                        } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "common.save", defaultMessage: "Spara" }))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalButton top" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { tabIndex: 1, className: "btn", onClick: function () {
                            _this.props.closeDialog();
                        } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "common.cancel", defaultMessage: "Avbryt" }))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "confirm top pull-right" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { tabIndex: 1, className: "btn btn-warning", onClick: function () {
                            onDelete(id);
                        } }, isCustomTask ?
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "task.removeWorkGoals", defaultMessage: "Ta bort arbetsm\u00E5l" }) :
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "task.removeThisTask", defaultMessage: "Ta bort den h\u00E4r uppgiften" })))));
    };
    EditUserTask.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_11__["LanguageContext"];
    return EditUserTask;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/weekplanner/get-task-type.ts":
/*!*****************************************************!*\
  !*** ./src/components/weekplanner/get-task-type.ts ***!
  \*****************************************************/
/*! exports provided: getTaskType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTaskType", function() { return getTaskType; });
function getTaskType(userTask) {
    return userTask.course && userTask.task && userTask.course.length > 0 && userTask.task.length > 0 ?
        'courseBuilderTask' :
        userTask.siteVisionPageId ?
            'siteVisionTask' :
            userTask.courseInfo ?
                'subjectPlannerTask' :
                'customTask';
}


/***/ }),

/***/ "./src/components/weekplanner/refiner.ts":
/*!***********************************************!*\
  !*** ./src/components/weekplanner/refiner.ts ***!
  \***********************************************/
/*! exports provided: refine */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "refine", function() { return refine; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/utils */ "./src/utils/utils.ts");


function refine(tasks) {
    var e_1, _a, e_2, _b;
    var result = [];
    var mapper = {};
    var tasksPerCourse = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["arrayToLookup"])(tasks, function (t) { return t.courseName || ''; });
    try {
        for (var _c = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](Object.keys(tasksPerCourse).sort().filter(function (x) { return x; }).concat(tasksPerCourse[''] ?
            [''] : [])), _d = _c.next(); !_d.done; _d = _c.next()) {
            var courseName = _d.value;
            var courseTasks = tasksPerCourse[courseName] || tasksPerCourse[''];
            var tasksPerLearningGoal = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["arrayToLookup"])(courseTasks, function (t) { return t.learningGoal; });
            var resultLearningGoals = [];
            try {
                for (var _e = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](Object.keys(tasksPerLearningGoal)), _f = _e.next(); !_f.done; _f = _e.next()) {
                    var learningGoal = _f.value;
                    var lgTasks = tasksPerLearningGoal[learningGoal].sort(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["compareProp"])("dateTime"));
                    var learningGoalTask = lgTasks
                        .filter(function (t) { return t.name == null; }) // If name is undefined or null, this represents a learning goal
                    [0];
                    var url = learningGoalTask && learningGoalTask.url;
                    resultLearningGoals.push({
                        name: learningGoal,
                        allTasks: lgTasks,
                        url: url,
                        step: lgTasks.map(function (t) { return t.step; }).filter(function (step) { return step; })[0],
                        tasks: lgTasks.filter(function (t) { return t.name; })
                    });
                }
            }
            catch (e_2_1) { e_2 = { error: e_2_1 }; }
            finally {
                try {
                    if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
                }
                finally { if (e_2) throw e_2.error; }
            }
            result.push({
                courseName: courseName,
                learningGoals: resultLearningGoals
            });
        }
    }
    catch (e_1_1) { e_1 = { error: e_1_1 }; }
    finally {
        try {
            if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
        }
        finally { if (e_1) throw e_1.error; }
    }
    return result;
}


/***/ }),

/***/ "./src/components/weekplanner/user-tasks-box.tsx":
/*!*******************************************************!*\
  !*** ./src/components/weekplanner/user-tasks-box.tsx ***!
  \*******************************************************/
/*! exports provided: UserTasksBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UserTasksBox", function() { return UserTasksBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");
/* harmony import */ var _access_control__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../access-control */ "./src/access-control/index.ts");
/* harmony import */ var _calendar_course_name_to_css_class__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../calendar/course-name-to-css-class */ "./src/components/calendar/course-name-to-css-class.ts");
/* harmony import */ var _get_task_type__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./get-task-type */ "./src/components/weekplanner/get-task-type.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _features__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../features */ "./src/features/index.ts");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");











;
var UserTasksBox = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](UserTasksBox, _super);
    function UserTasksBox(props) {
        return _super.call(this, props) || this;
    }
    UserTasksBox.prototype.render = function () {
        var _this = this;
        var _a = this.props, courseName = _a.courseName, learningGoals = _a.learningGoals, progressData = _a.progressData, displayProgress = _a.displayProgress;
        var isOpen = !!this.props.openCourses[courseName];
        var features = new _features__WEBPACK_IMPORTED_MODULE_7__["Features"]();
        var intl = this.context.intl;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_2__["OpenCloseBox"], { title: react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h5", null, courseName || react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_9__["FormattedMessage"], { id: "userTasks.goals", defaultMessage: "Egna l\u00E4randem\u00E5l" })), headerOpen: isOpen, className: courseName && Object(_calendar_course_name_to_css_class__WEBPACK_IMPORTED_MODULE_4__["courseNameToCssClass"])('wp-course-', courseName), onOpenClose: function (becameOpen) { return _this.props.setIsOpen(courseName, becameOpen); }, displayProgress: displayProgress, progressData: progressData }, learningGoals.map(function (lg) {
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: lg.name, className: "learningGoalContainer" },
                lg.step && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "stepIndicator" }, lg.step),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "learningGoalText horizontalItem top" }, lg.name),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem" },
                        "\u00A0",
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "trash", href: "#", title: intl.formatMessage({ id: 'userTasks.deleteLearningGoal', defaultMessage: 'Ta bort lrandemlet och dess uppgifter' }), onClick: function (ev) {
                                ev.preventDefault();
                                _this.props.removeLearningGoal(lg);
                            } },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-trash" })))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "learningGoalTasks" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "taskContainer" }, lg.tasks.map(function (userTask) {
                        var isWorking = userTask.$meta === 'adding' || userTask.$meta === 'deleting' || userTask.$meta === 'updating';
                        var taskType = Object(_get_task_type__WEBPACK_IMPORTED_MODULE_5__["getTaskType"])(userTask);
                        var expired = moment__WEBPACK_IMPORTED_MODULE_6___default()(userTask.deadline).startOf('day') < moment__WEBPACK_IMPORTED_MODULE_6___default()().startOf('day');
                        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: userTask.id, style: isWorking ? { opacity: 0.5 } : {} },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "checkBox" + (userTask.done ? " checked" : ""), onClick: function (ev) { return !isWorking && _this.props.setTaskDone(userTask, !userTask.done); } })),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                                    taskType === 'courseBuilderTask' ?
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: getTaskUrl(userTask, _this.props.viewCourseUrl) }, userTask.name) :
                                        taskType === 'subjectPlannerTask' ?
                                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: getSubjectPlannerTaskUrl(userTask) }, userTask.name) :
                                            taskType === 'siteVisionTask' ?
                                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: userTask.url }, userTask.name) :
                                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: !userTask.url ? "link-less" : "", href: userTask.url || undefined, target: (userTask.url + '').toLowerCase().startsWith(location.host.toLowerCase()) ?
                                                        "_self" :
                                                        "_blank" }, userTask.name),
                                    userTask.deadline && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "dateSet" + (expired ? ' expired' : '') },
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { title: moment__WEBPACK_IMPORTED_MODULE_6___default()(userTask.deadline).format("YYYY-MM-DD"), className: "fa fa-calendar", "aria-hidden": "true", onClick: function () { } }))),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top taskEdit" },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "editItem", onClick: function () { return _this.props.editTask(userTask); } }))),
                            userTask.subTasks && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "subtasks" }, userTask.subTasks.map(function (subTask) {
                                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: subTask.id },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "checkBox" + (subTask.done ? " checked" : ""), onClick: function (ev) {
                                                return !isWorking &&
                                                    _this.props.setSubTaskDone(userTask, subTask, !subTask.done);
                                            } })),
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: subTask.url || undefined, target: (userTask.url + '').toLowerCase().startsWith(location.host.toLowerCase()) ?
                                                "_self" :
                                                "_blank", className: subTask.url ?
                                                undefined :
                                                'link-less' }, subTask.name)),
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top taskEdit" },
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "editItem", onClick: function () { return _this.props.editSubTask(userTask, subTask); } })));
                            })));
                    }))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "learningGoalTools" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn addOwnGoal", onClick: function () { return _this.props.addOwnTask(_this.props.courseName, lg.name); } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-plus", "aria-hidden": "true" }),
                        " ",
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_9__["FormattedMessage"], { id: 'userTasks.addLearningGoal', defaultMessage: 'Eget arbetsm\u00E5l' }))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null));
        }));
    };
    UserTasksBox.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_10__["LanguageContext"];
    return UserTasksBox;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

function getTaskUrl(userTask, viewCourseUrl) {
    if (userTask.course && userTask.course.length > 0 && userTask.task && userTask.task.length > 0) {
        var courseUrl = Object(_access_control__WEBPACK_IMPORTED_MODULE_3__["preserveImpersonationQuery"])(viewCourseUrl, { courseId: userTask.course[0].id });
        return courseUrl + "#/task/" + userTask.task[0].id;
    }
    return userTask.url;
}
function getSubjectPlannerTaskUrl(userTask) {
    if (userTask.courseInfo && userTask.task && userTask.task.length > 0) {
        var _a = userTask.courseInfo, school = _a.school, course = _a.course, tab = _a.tab;
        var courseUrl = Object(_access_control__WEBPACK_IMPORTED_MODULE_3__["preserveImpersonationQuery"])(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_8__["default"].KED_SUBJECT_PLANNER_URL, {});
        return courseUrl + "#/" + school + "/courses/" + course + "/tabs/" + tab + "/tasks/" + userTask.task[0].id;
    }
    return userTask.url;
}


/***/ }),

/***/ "./src/components/weekplanner/weekplanner-persisted-state.ts":
/*!*******************************************************************!*\
  !*** ./src/components/weekplanner/weekplanner-persisted-state.ts ***!
  \*******************************************************************/
/*! exports provided: WeekPlannerPersistedState */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WeekPlannerPersistedState", function() { return WeekPlannerPersistedState; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_moment_sv_locale__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../globals/moment-sv-locale */ "./src/globals/moment-sv-locale.ts");



var WeekPlannerPersistedState = /** @class */ (function () {
    function WeekPlannerPersistedState(userOrCopy) {
        if (typeof userOrCopy === 'string') {
            this.user = userOrCopy;
            this.lastWrite = Date.now();
            this.weekDate = Object(_globals_moment_sv_locale__WEBPACK_IMPORTED_MODULE_2__["localMoment"])().startOf('week').valueOf();
            this.openCourses = {};
        }
        else {
            Object.assign(this, userOrCopy);
        }
    }
    WeekPlannerPersistedState.load = function (user) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var cookie, storedData, state;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                cookie = localStorage.getItem('WeekPlannerPersistedState2');
                storedData = cookie && JSON.parse(cookie);
                state = new WeekPlannerPersistedState(user);
                if (storedData)
                    Object.assign(state, storedData);
                return [2 /*return*/, state.user === user && !state.isExpired(moment__WEBPACK_IMPORTED_MODULE_1___default()()) ?
                        state : new WeekPlannerPersistedState(user)];
            });
        });
    };
    WeekPlannerPersistedState.prototype.save = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                this.lastWrite = Date.now();
                json = JSON.stringify(this);
                localStorage.setItem('WeekPlannerPersistedState2', json);
                return [2 /*return*/];
            });
        });
    };
    WeekPlannerPersistedState.prototype.isExpired = function (asOf) {
        return moment__WEBPACK_IMPORTED_MODULE_1___default()(this.lastWrite)
            .isBefore(asOf.add(0 - WeekPlannerPersistedState.EXPIRATION_HOURS, 'hours'));
    };
    WeekPlannerPersistedState.EXPIRATION_HOURS = 12;
    WeekPlannerPersistedState.VERSION = 2;
    return WeekPlannerPersistedState;
}());



/***/ }),

/***/ "./src/components/weekplanner/weekplanner.tsx":
/*!****************************************************!*\
  !*** ./src/components/weekplanner/weekplanner.tsx ***!
  \****************************************************/
/*! exports provided: WeekPlanner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WeekPlanner", function() { return WeekPlanner; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _user_tasks_box__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./user-tasks-box */ "./src/components/weekplanner/user-tasks-box.tsx");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _refiner__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./refiner */ "./src/components/weekplanner/refiner.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _utility_components_dialogs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utility-components/dialogs */ "./src/components/utility-components/dialogs.tsx");
/* harmony import */ var _add_custom_goal__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./add-custom-goal */ "./src/components/weekplanner/add-custom-goal.tsx");
/* harmony import */ var _add_custom_task__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./add-custom-task */ "./src/components/weekplanner/add-custom-task.tsx");
/* harmony import */ var _edit_user_task__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./edit-user-task */ "./src/components/weekplanner/edit-user-task.tsx");
/* harmony import */ var _course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../course-builder/sub-components/spinner */ "./src/components/course-builder/sub-components/spinner.tsx");
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");
/* harmony import */ var _utils_pending_job__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../utils/pending-job */ "./src/utils/pending-job.ts");
/* harmony import */ var _add_or_edit_sub_task__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./add-or-edit-sub-task */ "./src/components/weekplanner/add-or-edit-sub-task.tsx");
/* harmony import */ var _utils_weekutil__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../utils/weekutil */ "./src/utils/weekutil.ts");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");
/* harmony import */ var _charts_progress__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../charts/progress */ "./src/components/charts/progress.tsx");
/* harmony import */ var _charts_charts_utils__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../charts/charts-utils */ "./src/components/charts/charts-utils.ts");
/* harmony import */ var _features__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../features */ "./src/features/index.ts");





















var MAX_STRATEGY_LENGTH = 16384;
var MAX_ASSESSMENT_LENGTH = 16384;
var WeekPlanner = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](WeekPlanner, _super);
    function WeekPlanner(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            userTasks: [],
            weekDate: Date.now(),
            openCourses: {},
            dialogs: [],
            saving: false,
            weekTextsUT: null,
            isLoading: true,
            isCopyingTasks: false
        };
        _this.onChange = _this.onChange.bind(_this);
        _this.weekTextsSavingJob = new _utils_pending_job__WEBPACK_IMPORTED_MODULE_13__["PendingJob"](function () { return _this.saveWeekTexts(); });
        return _this;
    }
    WeekPlanner.prototype.componentDidMount = function () {
        this.props.env.userTasksRepo.subscribe(this.onChange);
    };
    WeekPlanner.prototype.componentWillUnmount = function () {
        this.props.env.userTasksRepo.unsubscribe(this.onChange);
        this.weekTextsSavingJob.stop();
    };
    WeekPlanner.prototype.onChange = function (userTasks, persisted, weekTextsUT) {
        var newState = {
            userTasks: userTasks,
            weekDate: persisted.weekDate,
            openCourses: persisted.openCourses,
            weekTextsUT: weekTextsUT,
            isLoading: false
        };
        if (!this.state.weekTextsUT || (weekTextsUT.dateTime !== this.state.weekTextsUT.dateTime)) {
            // Changing week. Reset to new week's values
            newState.strategy = weekTextsUT.weekTexts.strategy;
            newState.assessment = weekTextsUT.weekTexts.assessment;
        }
        this.setState(newState); // React's use of Pick instead of Partial makes things complex here.
    };
    WeekPlanner.prototype.isWeekTextsEdited = function () {
        var _a = this.state, strategy = _a.strategy, assessment = _a.assessment, weekTextsUT = _a.weekTextsUT;
        return !!weekTextsUT && (strategy !== weekTextsUT.weekTexts.strategy || assessment !== weekTextsUT.weekTexts.assessment);
    };
    WeekPlanner.prototype.saveWeekTexts = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, strategy, assessment, weekTextsUT;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        console.log("Saving texts...");
                        _a = this.state, strategy = _a.strategy, assessment = _a.assessment, weekTextsUT = _a.weekTextsUT;
                        if (!this.isWeekTextsEdited()) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.props.env.userTasksRepo.upsert(weekTextsUT, function (ut) {
                                ut.weekTexts = { strategy: strategy, assessment: assessment };
                            })];
                    case 1:
                        _b.sent();
                        _b.label = 2;
                    case 2: return [2 /*return*/];
                }
            });
        });
    };
    WeekPlanner.prototype.prevWeek = function () {
        //this.saveWeekTexts();
        this.props.env.userTasksRepo.changeWeek(moment__WEBPACK_IMPORTED_MODULE_6___default()(this.state.weekDate).add(-1, 'week').toDate());
    };
    WeekPlanner.prototype.nextWeek = function () {
        //this.saveWeekTexts();
        this.props.env.userTasksRepo.changeWeek(moment__WEBPACK_IMPORTED_MODULE_6___default()(this.state.weekDate).add(1, 'week').toDate());
    };
    WeekPlanner.prototype.openDialog = function (dialog) {
        this.setState({ dialogs: tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](this.state.dialogs, [dialog]) });
    };
    WeekPlanner.prototype.openAddGoalDialog = function () {
        var _this = this;
        this.openDialog(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_custom_goal__WEBPACK_IMPORTED_MODULE_8__["AddCustomGoal"], { onSave: function (learningGoal) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            if (!learningGoal)
                                throw new Error(this.context.intl.formatMessage({ id: 'weekplanner.emptyLearningGoalErr', defaultMessage: 'Lrandemlet kan inte vara tomt' }));
                            if (!!this.state.saving) return [3 /*break*/, 5];
                            this.setState({ saving: true });
                            _a.label = 1;
                        case 1:
                            _a.trys.push([1, , 3, 4]);
                            return [4 /*yield*/, this.addCustomGoal(learningGoal)];
                        case 2:
                            _a.sent();
                            return [3 /*break*/, 4];
                        case 3:
                            this.setState({ saving: false });
                            return [7 /*endfinally*/];
                        case 4:
                            this.closeDialog();
                            _a.label = 5;
                        case 5: return [2 /*return*/];
                    }
                });
            }); } }));
    };
    WeekPlanner.prototype.openAddOwnTaskDialog = function (courseName, learningGoalName) {
        var _this = this;
        this.openDialog(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_custom_task__WEBPACK_IMPORTED_MODULE_9__["AddCustomTask"], { isTask: !courseName, onSave: function (name, description, url) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            if (!name)
                                throw new Error(this.context.intl.formatMessage({ id: 'weekplanner.nameCannotBeEmpty', defaultMessage: 'Namnet kan inte vara tomt' }));
                            if (!!this.state.saving) return [3 /*break*/, 5];
                            this.setState({ saving: true });
                            _a.label = 1;
                        case 1:
                            _a.trys.push([1, , 3, 4]);
                            return [4 /*yield*/, this.addCustomTask(courseName, learningGoalName, name, description, url)];
                        case 2:
                            _a.sent();
                            return [3 /*break*/, 4];
                        case 3:
                            this.setState({ saving: false });
                            return [7 /*endfinally*/];
                        case 4:
                            this.closeDialog();
                            _a.label = 5;
                        case 5: return [2 /*return*/];
                    }
                });
            }); } }));
    };
    WeekPlanner.prototype.editTask = function (userTask) {
        var _this = this;
        this.openDialog(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_edit_user_task__WEBPACK_IMPORTED_MODULE_10__["EditUserTask"], { userTasksRepo: this.props.env.userTasksRepo, userTask: userTask, onUpdate: function (updater) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                var test;
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            test = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, userTask);
                            updater(test);
                            if (!test.name)
                                throw new Error(this.context.intl.formatMessage({ id: 'weekplanner.nameMustNotBeEmpty', defaultMessage: 'Namnet fr inte vara tomt' }));
                            this.closeDialog();
                            return [4 /*yield*/, this.props.env.userTasksRepo.update([userTask], updater)];
                        case 1:
                            _a.sent();
                            return [2 /*return*/];
                    }
                });
            }); }, onDelete: function (id) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            this.closeDialog();
                            return [4 /*yield*/, this.props.env.userTasksRepo.delete([id])];
                        case 1:
                            _a.sent();
                            return [2 /*return*/];
                    }
                });
            }); }, openDialog: function (dialog) { return _this.openDialog(dialog); }, closeDialog: function () { return _this.closeDialog(); } }));
    };
    WeekPlanner.prototype.editSubTask = function (userTask, subTask) {
        var _this = this;
        this.openDialog(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_or_edit_sub_task__WEBPACK_IMPORTED_MODULE_14__["AddOrEditSubTask"], { userTasksRepo: this.props.env.userTasksRepo, mode: "edit", userTask: userTask, subTask: subTask, closeDialog: function () { return _this.closeDialog(); } }));
    };
    WeekPlanner.prototype.closeDialog = function () {
        this.setState({ dialogs: this.state.dialogs.slice(0, this.state.dialogs.length - 1) });
    };
    WeekPlanner.prototype.addCustomGoal = function (learningGoal) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var latestTimeStamp;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        latestTimeStamp = Math.max.apply(Math.max, [this.state.weekDate].concat(this.state.userTasks.map(function (t) { return t.dateTime; })));
                        return [4 /*yield*/, this.props.env.userTasksRepo.insert([{
                                    id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])(),
                                    learningGoal: learningGoal,
                                    dateTime: latestTimeStamp + 2000
                                }])];
                    case 1:
                        _a.sent();
                        return [4 /*yield*/, this.props.env.userTasksRepo.setWeekPlannerBoxOpen("", true)];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    WeekPlanner.prototype.removeLearningGoal = function (learningGoal) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (learningGoal.tasks.length > 0) {
                            if (!confirm(this.context.intl.formatMessage({ id: 'weekplanner.confirmRemoveLearningObjectives', defaultMessage: 'Ta bort lrandeml samt {learningGoalsNumber} uppgifter?' }, { learningGoalsNumber: learningGoal.tasks.length }))) {
                                return [2 /*return*/];
                            }
                        }
                        return [4 /*yield*/, this.props.env.userTasksRepo.delete(learningGoal.allTasks.map(function (t) { return t.id; }))];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    WeekPlanner.prototype.addCustomTask = function (courseName, learningGoal, name, description, url) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var latestTimeStamp;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        latestTimeStamp = Math.max.apply(Math.max, [this.state.weekDate].concat(this.state.userTasks.map(function (t) { return t.dateTime; })));
                        /*const emptyLearningGoalPlaceholder = this.state.userTasks.find(ut =>
                          ut.name == null &&
                          !ut.courseName &&
                          ut.learningGoal === learningGoal);
                    
                        if (emptyLearningGoalPlaceholder) {
                          // Hijack learning-goal placeholder and make it the real task.
                          // This will make the learning goal disappear once this task
                          // is deleted.
                          await userTasksRepo.update([emptyLearningGoalPlaceholder], ut => {
                            Object.assign(ut, { name, description, url });
                          });
                        } else {*/
                        // Add another task to same learning-goal
                        return [4 /*yield*/, this.props.env.userTasksRepo.insert([{
                                    id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])(),
                                    dateTime: latestTimeStamp + 2000,
                                    courseName: courseName,
                                    learningGoal: learningGoal,
                                    name: name,
                                    description: description,
                                    url: url
                                }])];
                    case 1:
                        /*const emptyLearningGoalPlaceholder = this.state.userTasks.find(ut =>
                          ut.name == null &&
                          !ut.courseName &&
                          ut.learningGoal === learningGoal);
                    
                        if (emptyLearningGoalPlaceholder) {
                          // Hijack learning-goal placeholder and make it the real task.
                          // This will make the learning goal disappear once this task
                          // is deleted.
                          await userTasksRepo.update([emptyLearningGoalPlaceholder], ut => {
                            Object.assign(ut, { name, description, url });
                          });
                        } else {*/
                        // Add another task to same learning-goal
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    WeekPlanner.prototype.setIsOpen = function (courseName, isOpen) {
        this.props.env.userTasksRepo.setWeekPlannerBoxOpen(courseName, isOpen);
    };
    WeekPlanner.prototype.setTaskDone = function (task, done) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.props.env.userTasksRepo.setTaskDoneState(task, done)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    WeekPlanner.prototype.setSubTaskDone = function (task, subTask, done) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.props.env.userTasksRepo.setSubTaskDoneState(task, subTask.id, done)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    WeekPlanner.prototype.copyFromPreviousWeek = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, userTasks_1, openCourses, weekDate, prevWeekNo, prevKEDWeek, prevTasks, latestTimeStamp_1, copies;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0: return [4 /*yield*/, this.setState({ isCopyingTasks: true })];
                    case 1:
                        _b.sent();
                        _b.label = 2;
                    case 2:
                        _b.trys.push([2, , 5, 6]);
                        _a = this.state, userTasks_1 = _a.userTasks, openCourses = _a.openCourses, weekDate = _a.weekDate;
                        prevWeekNo = Object(_utils_weekutil__WEBPACK_IMPORTED_MODULE_15__["getAdjustedWeek"])(moment__WEBPACK_IMPORTED_MODULE_6___default()(weekDate).add(-1, 'week'));
                        prevKEDWeek = Object(_utils_weekutil__WEBPACK_IMPORTED_MODULE_15__["KEDWeek"])(moment__WEBPACK_IMPORTED_MODULE_6___default()(weekDate).year(), prevWeekNo);
                        return [4 /*yield*/, this.props.env.kedBackendClient.list("usertasks", {
                                from: prevKEDWeek.notBefore,
                                to: prevKEDWeek.notAfter,
                                role: "USER",
                                include: ["task", "course", "acl"],
                                flags: ["includeIdsOnly"]
                            })];
                    case 3:
                        prevTasks = _b.sent();
                        prevTasks = prevTasks
                            .filter(function (prevTask) { return !prevTask.done; }) // Don't copy done tasks
                            .filter(function (prevTask) { return !!prevTask.name; }) // Don't copy empty learning goals
                            .filter(function (prevTask) { return !userTasks_1.some(function (taskOfCurrentWeek) {
                            return taskOfCurrentWeek.name === prevTask.name &&
                                taskOfCurrentWeek.learningGoal === prevTask.learningGoal &&
                                taskOfCurrentWeek.courseName === prevTask.courseName;
                        }); }); // Ignore identical tasks (already copied)
                        latestTimeStamp_1 = Math.max.apply(Math.max, [weekDate].concat(userTasks_1.map(function (t) { return t.dateTime; })));
                        copies = prevTasks.sort(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["compareProp"])("dateTime")).map(function (task) {
                            var copy = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, task, { dateTime: latestTimeStamp_1 += 1000 });
                            copy.id = Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])();
                            if (copy.subTasks) {
                                copy.subTasks = copy.subTasks.filter(function (st) { return !st.done; });
                            }
                            delete copy.$etag;
                            return copy;
                        });
                        // Store it
                        return [4 /*yield*/, this.props.env.userTasksRepo.insert(copies)];
                    case 4:
                        // Store it
                        _b.sent();
                        return [3 /*break*/, 6];
                    case 5:
                        this.setState({ isCopyingTasks: false });
                        return [7 /*endfinally*/];
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    WeekPlanner.prototype.getHeaderTitle = function () {
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h4", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.logBook", defaultMessage: "Loggbok" }));
    };
    WeekPlanner.prototype.render = function () {
        var _this = this;
        var weekNumber = moment__WEBPACK_IMPORTED_MODULE_6___default()(this.state.weekDate).week();
        var showProgressCharts = _features__WEBPACK_IMPORTED_MODULE_20__["features"].weekplannerCharts;
        //console.log("Weekydate: "  + new Date(this.state.weekDate) + " which is week no " + weekNumber);
        var currentWeek = moment__WEBPACK_IMPORTED_MODULE_6___default()().week();
        var taskSets = Object(_refiner__WEBPACK_IMPORTED_MODULE_4__["refine"])(this.state.userTasks);
        var _a = this.state, dialogs = _a.dialogs, weekTextsUT = _a.weekTextsUT, strategy = _a.strategy, assessment = _a.assessment, isLoading = _a.isLoading, isCopyingTasks = _a.isCopyingTasks;
        var isSaving = weekTextsUT && (weekTextsUT.$meta === 'adding' || weekTextsUT.$meta === 'updating');
        var isStrategyEdited = !!weekTextsUT && (strategy !== weekTextsUT.weekTexts.strategy);
        var isAssessmentEdited = !!weekTextsUT && (assessment !== weekTextsUT.weekTexts.assessment);
        var enableSaveButton = !isSaving && (isStrategyEdited || isAssessmentEdited);
        var chartTasks = Object(_charts_charts_utils__WEBPACK_IMPORTED_MODULE_19__["getWeekplannerProgressData"])(taskSets);
        var percentage = taskSets.length > 0 ? chartTasks.completedTasks / chartTasks.totalNumberOfTasks * 100 : 0;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "ked_boxed weekPlanner" + (weekNumber === currentWeek ? " currentWeek" : ""), onKeyDown: function (ev) {
                    if (ev.which === 83 && ev.ctrlKey) {
                        ev.preventDefault();
                        if (!isSaving && _this.isWeekTextsEdited()) {
                            _this.weekTextsSavingJob.triggerChange(0);
                        }
                    }
                } },
                showProgressCharts && this.getHeaderTitle(),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "widgets" },
                    showProgressCharts ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "progressBar" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_charts_progress__WEBPACK_IMPORTED_MODULE_18__["Progress"], { percentage: percentage })) : this.getHeaderTitle(),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "weekSelect" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.weekNumber", values: { weekNumber: weekNumber }, defaultMessage: "Vecka {weekNumber}" }))),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn-group" },
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { className: "btn", onClick: function () { return _this.prevWeek(); } },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-angle-left", "aria-hidden": "true" })),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { className: "btn", onClick: function () { return _this.nextWeek(); } },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-angle-right", "aria-hidden": "true" })))))),
                taskSets.length > 0 && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                taskSets.map(function (props) {
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_user_tasks_box__WEBPACK_IMPORTED_MODULE_2__["UserTasksBox"], tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({ key: props.courseName }, props, { courseName: props.courseName, learningGoals: props.learningGoals, viewCourseUrl: _this.props.viewCourseUrl, openCourses: _this.state.openCourses, addOwnTask: function (courseName, learningGoalName) { return _this.openAddOwnTaskDialog(courseName, learningGoalName); }, setIsOpen: _this.setIsOpen.bind(_this), setTaskDone: _this.setTaskDone.bind(_this), setSubTaskDone: _this.setSubTaskDone.bind(_this), editTask: function (task) { return _this.editTask(task); }, editSubTask: function (task, subTask) { return _this.editSubTask(task, subTask); }, removeLearningGoal: function (lg) { return _this.removeLearningGoal(lg); }, displayProgress: showProgressCharts, progressData: chartTasks.subjectData[props.courseName] }));
                }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                isLoading ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_11__["Spinner"], null) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn", onClick: function (ev) { return _this.openAddGoalDialog(); } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-list-alt", "aria-hidden": "true" }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.learningGoal", defaultMessage: "Eget l\u00E4randem\u00E5l" })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn", style: isCopyingTasks ? { opacity: 0.5 } : undefined, onClick: function (ev) { return (!isCopyingTasks) && _this.copyFromPreviousWeek(); } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-clone", "aria-hidden": "true" }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.copyPreviousWeekTaks", defaultMessage: "Kopiera ej klara fr\u00E5n f\u00F6reg\u00E5ende vecka" })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_12__["OpenCloseBox"], { title: react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h5", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.strategyAndEvaluation", defaultMessage: "Strategi & Utv\u00E4rdering" })), headerOpen: this.state.openCourses["StratUtv"], onOpenClose: function (becameOpen) { return _this.setIsOpen("StratUtv", becameOpen); } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h3", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.strategy", defaultMessage: "Strategi" })),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.strategyDescription", defaultMessage: "Hur jag ska g\u00F6ra f\u00F6r att l\u00E4ra mig." })),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("textarea", { className: "weekplanner-textarea", disabled: this.props.env.tutored, value: strategy && strategy.substr(0, MAX_STRATEGY_LENGTH), onChange: function (ev) {
                                _this.setState({ strategy: (ev.target.value || '').substr(0, MAX_STRATEGY_LENGTH) });
                                _this.weekTextsSavingJob.triggerChange(500);
                            } }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h3", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.evaluation", defaultMessage: "Utv\u00E4rdering" })),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.evaluationDescription", defaultMessage: "Reflektion kring din arbetsinsats och dina valda strategier under veckan.Utv\u00E4rdera i f\u00F6rh\u00E5llande till dina m\u00E5l." })),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("textarea", { className: "weekplanner-textarea", value: assessment && assessment.substr(0, MAX_ASSESSMENT_LENGTH), disabled: this.props.env.tutored, onChange: function (ev) {
                                _this.setState({ assessment: (ev.target.value || '').substr(0, MAX_ASSESSMENT_LENGTH) });
                                _this.weekTextsSavingJob.triggerChange(500);
                            } }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn", tabIndex: 0, style: enableSaveButton ? {} : { opacity: 0.5 }, onClick: function () { return !isSaving && _this.weekTextsSavingJob.triggerChange(0); } },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-floppy-o", "aria-hidden": "true" }),
                            enableSaveButton ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "common.save", defaultMessage: " Spara" }) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "common.saved", defaultMessage: " Sparad" }))))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_dialogs__WEBPACK_IMPORTED_MODULE_7__["Dialogs"], { dialogs: dialogs, popDialog: function () {
                    _this.setState(function (_a) {
                        var dialogs = _a.dialogs;
                        return ({ dialogs: dialogs.slice(0, dialogs.length - 1) });
                    });
                } }));
    };
    WeekPlanner.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_17__["LanguageContext"];
    return WeekPlanner;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/contracts/ked-models.ts":
/*!*************************************!*\
  !*** ./src/contracts/ked-models.ts ***!
  \*************************************/
/*! exports provided: Course, futureAbilities */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Course", function() { return Course; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "futureAbilities", function() { return futureAbilities; });
var Course = /** @class */ (function () {
    function Course() {
    }
    return Course;
}());

var futureAbilities = [
    "Lra att lra",
    "Samarbeta",
    "Agera globalt",
    "Visa handlingskraft",
    "Vara innovativ",
    "Leva digitalt"
];


/***/ }),

/***/ "./src/elements/KEDAppSubjectPlanner/app.sp.client.tsx":
/*!*************************************************************!*\
  !*** ./src/elements/KEDAppSubjectPlanner/app.sp.client.tsx ***!
  \*************************************************************/
/*! exports provided: KEDAppCourseViewerKS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KEDAppCourseViewerKS", function() { return KEDAppCourseViewerKS; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _global_setters_set_all__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../global-setters/set-all */ "./src/global-setters/set-all.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _components_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../components/course-builder/sub-components/spinner */ "./src/components/course-builder/sub-components/spinner.tsx");
/* harmony import */ var _components_course_builder_ks_viewer_editor__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../components/course-builder-ks/viewer-editor */ "./src/components/course-builder-ks/viewer-editor/index.tsx");
/* harmony import */ var _components_utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../components/utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");
/* harmony import */ var _components_utility_components_SetupLanguageIntl__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../components/utility-components/SetupLanguageIntl */ "./src/components/utility-components/SetupLanguageIntl.tsx");



var bearerPromise = _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].bearerProvider.getBearer(); // Start getting bearer as soon as possible.







var _KEDAppCourseViewerKS = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](_KEDAppCourseViewerKS, _super);
    function _KEDAppCourseViewerKS(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            isTokenLoaded: false
        };
        return _this;
    }
    _KEDAppCourseViewerKS.prototype.componentWillMount = function () {
        var _this = this;
        bearerPromise.then(function () {
            _this.setState({ isTokenLoaded: true });
        }).catch(function (err) {
            Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["showError"])(err);
        });
    };
    _KEDAppCourseViewerKS.prototype.render = function () {
        var intl = this.props.intl;
        return this.state.isTokenLoaded ?
            react__WEBPACK_IMPORTED_MODULE_3__["createElement"](_components_utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_7__["LanguageContext"].Provider, { value: { intl: intl } },
                react__WEBPACK_IMPORTED_MODULE_3__["createElement"](_components_course_builder_ks_viewer_editor__WEBPACK_IMPORTED_MODULE_6__["SubjectPlannerViewerApp"], null)) :
            react__WEBPACK_IMPORTED_MODULE_3__["createElement"]("p", null,
                react__WEBPACK_IMPORTED_MODULE_3__["createElement"](_components_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_5__["Spinner"], null),
                "V.g. v\u00E4nta... autenticerar...");
    };
    return _KEDAppCourseViewerKS;
}(react__WEBPACK_IMPORTED_MODULE_3__["Component"]));
var KEDAppCourseViewerKS = Object(_components_utility_components_SetupLanguageIntl__WEBPACK_IMPORTED_MODULE_9__["setupIntl"])(Object(react_intl__WEBPACK_IMPORTED_MODULE_8__["injectIntl"])(_KEDAppCourseViewerKS));


/***/ }),

/***/ "./src/elements/KEDAppSubjectPlanner/webpack-entry.ts":
/*!************************************************************!*\
  !*** ./src/elements/KEDAppSubjectPlanner/webpack-entry.ts ***!
  \************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _globals_KED__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../globals/KED */ "./src/globals/KED.ts");
/* harmony import */ var _app_sp_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./app.sp.client */ "./src/elements/KEDAppSubjectPlanner/app.sp.client.tsx");



_globals_KED__WEBPACK_IMPORTED_MODULE_1__["default"].components = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, _globals_KED__WEBPACK_IMPORTED_MODULE_1__["default"].components, _app_sp_client__WEBPACK_IMPORTED_MODULE_2__);


/***/ }),

/***/ "./src/features/feature-flags.json":
/*!*****************************************!*\
  !*** ./src/features/feature-flags.json ***!
  \*****************************************/
/*! exports provided: picker, ksTutorComment, kgTutorComment, termplannerCharts, weekplannerCharts, teacherRights, studyGroups, cbCollapseBoxes, default */
/***/ (function(module) {

module.exports = {"picker":"Integrate coursebuilder and subjectplanner with Google Picker","ksTutorComment":"Integrate KSTermplanner with tutor comments","kgTutorComment":"Integrate KSTermplanner  with tutor comments","termplannerCharts":"Integrate KSTermplanner with progress charts","weekplannerCharts":"Integrate Weekplanner with progress charts","teacherRights":"Activate course builder teacher rights","studyGroups":"Add study groups functionality","cbCollapseBoxes":"Course Builder: Collapse modules by default"};

/***/ }),

/***/ "./src/features/features.ts":
/*!**********************************!*\
  !*** ./src/features/features.ts ***!
  \**********************************/
/*! exports provided: Features, features */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Features", function() { return Features; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "features", function() { return features; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_query_string__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/query-string */ "./src/utils/query-string.ts");
/* harmony import */ var _feature_flags_json__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./feature-flags.json */ "./src/features/feature-flags.json");
var _feature_flags_json__WEBPACK_IMPORTED_MODULE_2___namespace = /*#__PURE__*/__webpack_require__.t(/*! ./feature-flags.json */ "./src/features/feature-flags.json", 1);
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");




var Features = /** @class */ (function () {
    function Features() {
        var e_1, _a;
        this._initialized = false;
        var _loop_1 = function (featureName) {
            Object.defineProperty(this_1, featureName, {
                get: function () {
                    if (!this._initialized)
                        this.init();
                    return this._features[featureName];
                },
                set: function (value) {
                    throw new Error('Feature flags cannot be set here');
                }
            });
        };
        var this_1 = this;
        try {
            for (var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](Object.keys(_feature_flags_json__WEBPACK_IMPORTED_MODULE_2__)), _c = _b.next(); !_c.done; _c = _b.next()) {
                var featureName = _c.value;
                _loop_1(featureName);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
    }
    Features.prototype.init = function () {
        var e_2, _a;
        if (this._initialized)
            return;
        var turnedOnFeatures = (_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_3__["cfg"].KED_FEATURES || "").split(',').map(function (name) { return name.trim().toLowerCase(); });
        var query = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_1__["parseQueryString"])(location.search, { toLower: true });
        if (query.testversion) {
            turnedOnFeatures = ["*"];
        }
        if (query.features) {
            turnedOnFeatures = query.features
                .split(',')
                .map(function (feature) { return feature.trim().toLowerCase(); });
        }
        var turnOnAll = turnedOnFeatures.includes('*');
        this._features = {};
        try {
            for (var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](Object.keys(_feature_flags_json__WEBPACK_IMPORTED_MODULE_2__)), _c = _b.next(); !_c.done; _c = _b.next()) {
                var featureName = _c.value;
                this._features[featureName] = turnOnAll ||
                    turnedOnFeatures.includes(featureName.toLowerCase());
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_2) throw e_2.error; }
        }
        this._initialized = true;
    };
    return Features;
}());

var features = new Features();


/***/ }),

/***/ "./src/features/index.ts":
/*!*******************************!*\
  !*** ./src/features/index.ts ***!
  \*******************************/
/*! exports provided: Features, features */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _features__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./features */ "./src/features/features.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Features", function() { return _features__WEBPACK_IMPORTED_MODULE_0__["Features"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "features", function() { return _features__WEBPACK_IMPORTED_MODULE_0__["features"]; });




/***/ }),

/***/ "./src/global-setters/configure.ts":
/*!*****************************************!*\
  !*** ./src/global-setters/configure.ts ***!
  \*****************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(process) {/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");

_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].ENVIRONMENT = "test";
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_API_URL = "https://backend.kedschools.com/kedbackend-next/api/"; // "https://kedbackendtest.azurewebsites.net/api/"
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].EDS_API_URL = "https://edsportalowinapitest.azurewebsites.net/studentportal/"; // "https://edsportalowinapi.azurewebsites.net/api/"
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_TOKEN_URL = ""; // "https://kedauthtest.azurewebsites.net/token"
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_CLIENT_ID = ""; // "devclient", "testclient", "..."
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_CLIENT_SECRET = "";
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_REALM = "SE1"; // "SE1"
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_LOCALE = _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_LOCALE || "sv"; // "sv", "en". Only set from process.env if not set from SiteVision element config.
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_SCHOOL_LOCALE = _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_SCHOOL_LOCALE || "sv"; // "sv", "en_sin", "en_nin". Only set from process.env if not set from SiteVision element config.
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_RESOURCES_URL = _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_RESOURCES_URL || process.env.KED_RESOURCES_URL;

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../node_modules/process/browser.js */ "./node_modules/process/browser.js")))

/***/ }),

/***/ "./src/global-setters/set-all.ts":
/*!***************************************!*\
  !*** ./src/global-setters/set-all.ts ***!
  \***************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _configure__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./configure */ "./src/global-setters/configure.ts");
/* harmony import */ var _set_bearer_providers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./set-bearer-providers */ "./src/global-setters/set-bearer-providers.ts");
/* harmony import */ var _set_ked_backend_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./set-ked-backend-client */ "./src/global-setters/set-ked-backend-client.ts");
/* harmony import */ var _set_eds_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./set-eds-client */ "./src/global-setters/set-eds-client.ts");
/* These scripts assume some of the global vars have already been set:
  * KED.cfg
  * KED.env.currentUser

  The rest will be set here (client side)
*/






/***/ }),

/***/ "./src/global-setters/set-bearer-providers.ts":
/*!****************************************************!*\
  !*** ./src/global-setters/set-bearer-providers.ts ***!
  \****************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_query_string__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/query-string */ "./src/utils/query-string.ts");
/* harmony import */ var kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend/clientweb */ "./kedbackend/clientweb.js");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _access_control_index__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../access-control/index */ "./src/access-control/index.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/utils */ "./src/utils/utils.ts");








function getMergedTokenPath(tokenPath, locationSearch, scopes) {
    // Merge configured query params of token path with params given to current page
    var currentQuery = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_1__["parseQueryString"])(locationSearch);
    var impersonationProps = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_7__["cherryPickProps"])(currentQuery, _access_control_index__WEBPACK_IMPORTED_MODULE_6__["IMPERSONATION_QUERY_PARAMS"]);
    var _a = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_1__["splitUrlAndQuery"])(tokenPath), 2), tokenPathWithoutQuery = _a[0], tokenQueryString = _a[1];
    var tokenPathQuery = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_1__["parseQueryString"])(tokenQueryString);
    return tokenPathWithoutQuery + Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_1__["generateQueryString"])(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, tokenPathQuery, impersonationProps, { scopes: scopes.join(',') }));
}
function getTokenId(mergedTokenPath, userEmail) {
    return mergedTokenPath + "/" + userEmail;
}
function saveUserInfo(user, tokenId) {
    _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser = user;
    sessionStorage.setItem("userInfo" + tokenId, JSON.stringify(user));
}
function loadUserInfo(tokenId) {
    var storedSessionUser = sessionStorage.getItem("userInfo" + tokenId);
    if (storedSessionUser) {
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser = JSON.parse(storedSessionUser);
    }
}
function createBearerProvider(mergedTokenPath, userEmail) {
    var tokenId = getTokenId(mergedTokenPath, userEmail);
    return new kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__["WebServerBearerProvider"](mergedTokenPath, function (responseText) {
        var res = JSON.parse(responseText);
        if (!res.ok)
            throw new Error(res.error);
        if (res.user) {
            saveUserInfo(res.user, tokenId);
        }
        return { token: res.token, expires: Date.now() + 59 * 60 * 1000 };
    }, tokenId);
}
function createGoogleTokenProvider(mergedTokenPath, userEmail) {
    var tokenId = getTokenId(mergedTokenPath, userEmail);
    return new kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__["WebServerBearerProvider"](mergedTokenPath, function (responseText) {
        var res = JSON.parse(responseText);
        if (!res.ok)
            throw new Error(res.error);
        return { token: res.token, expires: Date.now() + 59 * 60 * 1000 };
    }, tokenId);
}
function createTestTokenProvider(tokenUrl, user, scopes) {
    return new kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["KedBearerProvider"](kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__["isomorphic"], kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__["storage"], tokenUrl + user.mail + location.search, _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_CLIENT_ID, _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_CLIENT_SECRET, tokenUrl, {
        email: user.mail.toLowerCase(),
        roles: user.roles,
        school: user.school,
        schoolType: user.schoolType,
        scopes: scopes
    });
}
// env.currentUser.mail is set by SiteVision server initially.
// A response from /api/token may change the mail attribute of the current
// user, so env.currentUser.mail may be different after getting a response.
// However, the initial value is valuable always in order to distinguish the case
// when one normal user logs out and another user logs in.
var initialUserEmail = _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser && _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser.mail; // Initial value of mail. May change.
if (initialUserEmail) {
    // KED
    if (_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_TOKEN_PATH) {
        //
        //
        // Production / SiteVision proxied /api/token to request tokens from:
        //
        //
        var mergedTokenPath = getMergedTokenPath(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_TOKEN_PATH, location.search, [
            "kedbackend",
            "EDS",
        ]);
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].bearerProvider = createBearerProvider(mergedTokenPath, initialUserEmail);
        loadUserInfo(getTokenId(mergedTokenPath, initialUserEmail));
        // Google
        var googleMergedPath = getMergedTokenPath(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_TOKEN_PATH, location.search, [
            "https://www.googleapis.com/auth/calendar.readonly",
        ]);
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].googleTokenProvider = createGoogleTokenProvider(googleMergedPath, initialUserEmail);
    }
    else if (_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_TOKEN_URL && _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_CLIENT_ID && _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_CLIENT_SECRET) {
        //
        //
        // Test - go directly to KEDAUTH server to retrieve tokens
        //
        //
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].bearerProvider = createTestTokenProvider(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_TOKEN_URL, _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser, [
            "kedbackend",
            "EDS",
        ]);
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].googleTokenProvider = createTestTokenProvider(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_TOKEN_URL + "/google", _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser, [
            "https://www.googleapis.com/auth/calendar.readonly",
        ]);
    }
    else {
        throw new Error("Missing configuration parameter KED_TOKEN_PATH");
    }
}


/***/ }),

/***/ "./src/global-setters/set-eds-client.ts":
/*!**********************************************!*\
  !*** ./src/global-setters/set-eds-client.ts ***!
  \**********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend/clientweb */ "./kedbackend/clientweb.js");
/* harmony import */ var _apis_edsclient__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../apis/edsclient */ "./src/apis/edsclient.ts");




_globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].edsClient = new _apis_edsclient__WEBPACK_IMPORTED_MODULE_3__["EdsClient"](kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__["isomorphic"], _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_1__["default"].EDS_API_URL, _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].bearerProvider, function () { return _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser.mail; });


/***/ }),

/***/ "./src/global-setters/set-ked-backend-client.ts":
/*!******************************************************!*\
  !*** ./src/global-setters/set-ked-backend-client.ts ***!
  \******************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend/clientweb */ "./kedbackend/clientweb.js");



_globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].kedBackendClient = new kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__["KedBackendClientWeb"](_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_1__["default"].KED_API_URL, _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].bearerProvider);


/***/ }),

/***/ "./src/globals/KED.cfg.ts":
/*!********************************!*\
  !*** ./src/globals/KED.cfg.ts ***!
  \********************************/
/*! exports provided: default, cfg */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cfg", function() { return cfg; });
/* harmony import */ var _KED__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./KED */ "./src/globals/KED.ts");

;
if (!_KED__WEBPACK_IMPORTED_MODULE_0__["default"].cfg)
    _KED__WEBPACK_IMPORTED_MODULE_0__["default"].cfg = {};
/* harmony default export */ __webpack_exports__["default"] = (_KED__WEBPACK_IMPORTED_MODULE_0__["default"].cfg);
var cfg = _KED__WEBPACK_IMPORTED_MODULE_0__["default"].cfg;


/***/ }),

/***/ "./src/globals/KED.env.ts":
/*!********************************!*\
  !*** ./src/globals/KED.env.ts ***!
  \********************************/
/*! exports provided: default, env */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "env", function() { return env; });
/* harmony import */ var _ked__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ked */ "./src/globals/ked.ts");

if (!_ked__WEBPACK_IMPORTED_MODULE_0__["default"].env)
    _ked__WEBPACK_IMPORTED_MODULE_0__["default"].env = {};
/* harmony default export */ __webpack_exports__["default"] = (_ked__WEBPACK_IMPORTED_MODULE_0__["default"].env);
var env = _ked__WEBPACK_IMPORTED_MODULE_0__["default"].env;


/***/ }),

/***/ "./src/globals/KED.ts":
/*!****************************!*\
  !*** ./src/globals/KED.ts ***!
  \****************************/
/*! exports provided: KED_NAMESPACE, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KED_NAMESPACE", function() { return KED_NAMESPACE; });
var KED_NAMESPACE = "KED";
var result = typeof KED === 'undefined' ? {} : KED;
if (typeof window !== 'undefined' && typeof KED === 'undefined') {
    window[KED_NAMESPACE] = result;
}
/* harmony default export */ __webpack_exports__["default"] = (result);


/***/ }),

/***/ "./src/globals/db.ts":
/*!***************************!*\
  !*** ./src/globals/db.ts ***!
  \***************************/
/*! exports provided: db, globalId, Schools, CourseInstances */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "db", function() { return db; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "globalId", function() { return globalId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Schools", function() { return Schools; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CourseInstances", function() { return CourseInstances; });
/* harmony import */ var _KED_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var kedbackend_repo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kedbackend/repo */ "./kedbackend/repo.js");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _KED_cfg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./KED.cfg */ "./src/globals/KED.cfg.ts");




var db = new kedbackend_repo__WEBPACK_IMPORTED_MODULE_1__["KedBackendRepo"](function () { return _KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].kedBackendClient; }, function () { return _KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser ?
    _KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser.mail :
    ""; }, function () { return _KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser ?
    _KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser.displayName || _KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser.mail :
    ""; });
var globalId = Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_2__["getGlobalId"])(_KED_cfg__WEBPACK_IMPORTED_MODULE_3__["default"].KED_REALM);
var Schools = {
    standardSchool: db.schools.name("standard").cacheOptimized().single(),
    get mySchool() { return db.schools.name(_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser.school).cacheOptimized().single(); }
};
var CourseInstances = {
    getBranchId: function (school, courseId) {
        return school.switchMap(function (school) {
            return db.branches
                .hasEdgesFrom([school.officialBranchId])
                .name("draft")
                .tags(courseId)
                .idsOnly()
                .map(function (_a) {
                var id = _a.id;
                return id;
            })
                .toValue()
                .map(function (ids) { return ids.length > 0 ? ids[0] : undefined; });
        });
    },
    /** Get a DRAFT branch for given course ID and given school.
     * If there is not yet such a branch, create it using mutationsOnEmpty() which will
     * lead to the C# code DocumentRepository.ReadOrMutate() via DocumentController.
     */
    getOrCreateBranchId: function (school, courseId) {
        return db.courseInstances.idsOnly().id(courseId).switchMap(function () {
            return school.switchMap(function (school) {
                return db.branches
                    .hasEdgesFrom([school.officialBranchId])
                    .name("draft")
                    .tags(courseId)
                    .idsOnly()
                    .mutationsOnEmpty(function (tx) {
                    // These 2 mutations will occur server side, atomically.
                    // Will be sent on each request in the query, but will only execute if query results in zero items.
                    //console.log("School:", school);
                    var id = Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_2__["createUUID"])();
                    tx.add("branches", {
                        id: id,
                        acl: [
                            "role:USER:R",
                            "schoolRole:" + school.name + "/EMPLOYEE:S"
                        ],
                        name: 'draft',
                        schoolId: school.id,
                        treeParentId: school.officialBranchId,
                        tags: [courseId]
                    });
                    // Approving the branch makes sure that it was created by an EMPLOYEE on given school.
                    tx.link2("branches", school.officialBranchId, "approvedChildren", id);
                })
                    .single()
                    .map(function (_a) {
                    var id = _a.id;
                    return id;
                });
            });
        });
    },
    getAllDescendantIds: function (courseId) {
        return db.courseBlocks.tags(courseId).idsOnly().concat(db.courseContents.tags(courseId).idsOnly()).concat(db.courseTabs.tags(courseId).idsOnly()).concat(db.tasks.tags(courseId).idsOnly())
            .map(function (x) { return x.id; });
    }
};


/***/ }),

/***/ "./src/globals/ked.ts":
/*!****************************!*\
  !*** ./src/globals/ked.ts ***!
  \****************************/
/*! exports provided: KED_NAMESPACE, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KED_NAMESPACE", function() { return KED_NAMESPACE; });
var KED_NAMESPACE = "KED";
var result = typeof KED === 'undefined' ? {} : KED;
if (typeof window !== 'undefined' && typeof KED === 'undefined') {
    window[KED_NAMESPACE] = result;
}
/* harmony default export */ __webpack_exports__["default"] = (result);


/***/ }),

/***/ "./src/globals/moment-sv-locale.ts":
/*!*****************************************!*\
  !*** ./src/globals/moment-sv-locale.ts ***!
  \*****************************************/
/*! exports provided: localMoment */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "localMoment", function() { return localMoment; });
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");


if (_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_1__["default"].KED_LOCALE === "sv") {
    moment__WEBPACK_IMPORTED_MODULE_0___default.a.updateLocale('sv', {
        months: 'januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december'.split('_'),
        monthsShort: 'jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec'.split('_'),
        weekdays: 'sndag_mndag_tisdag_onsdag_torsdag_fredag_lrdag'.split('_'),
        weekdaysShort: 'sn_mn_tis_ons_tor_fre_lr'.split('_'),
        weekdaysMin: 's_m_ti_on_to_fr_l'.split('_'),
        longDateFormat: {
            LT: 'HH:mm',
            LTS: 'HH:mm:ss',
            L: 'YYYY-MM-DD',
            LL: 'D MMMM YYYY',
            LLL: 'D MMMM YYYY [kl.] HH:mm',
            LLLL: 'dddd D MMMM YYYY [kl.] HH:mm',
            lll: 'D MMM YYYY HH:mm',
            llll: 'ddd D MMM YYYY HH:mm'
        },
        calendar: {
            sameDay: '[Idag] LT',
            nextDay: '[Imorgon] LT',
            lastDay: '[Igr] LT',
            nextWeek: '[P] dddd LT',
            lastWeek: '[I] dddd[s] LT',
            sameElse: 'L'
        },
        relativeTime: {
            future: 'om %s',
            past: 'fr %s sedan',
            s: 'ngra sekunder',
            ss: '%d sekunder',
            m: 'en minut',
            mm: '%d minuter',
            h: 'en timme',
            hh: '%d timmar',
            d: 'en dag',
            dd: '%d dagar',
            M: 'en mnad',
            MM: '%d mnader',
            y: 'ett r',
            yy: '%d r'
        },
        dayOfMonthOrdinalParse: /\d{1,2}(e|a)/,
        ordinal: function (number) {
            var b = number % 10, output = (~~(number % 100 / 10) === 1) ? 'e' :
                (b === 1) ? 'a' :
                    (b === 2) ? 'a' :
                        (b === 3) ? 'e' : 'e';
            return number + output;
        },
        week: {
            dow: 1,
            doy: 4 // The week that contains Jan 4th is the first week of the year.
        }
    });
}
var localMoment = function () {
    return moment__WEBPACK_IMPORTED_MODULE_0___default.a.apply(this, arguments).locale(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_1__["default"].KED_LOCALE);
};


/***/ }),

/***/ "./src/repos/ked-repo.ts":
/*!*******************************!*\
  !*** ./src/repos/ked-repo.ts ***!
  \*******************************/
/*! exports provided: KedRepo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedRepo", function() { return KedRepo; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _repo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./repo */ "./src/repos/repo.ts");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");



var KedRepo = /** @class */ (function () {
    function KedRepo(options) {
        var _this = this;
        var table = options.table, getClient = options.getClient, getQueryOptions = options.getQueryOptions;
        this.mem = new _repo__WEBPACK_IMPORTED_MODULE_1__["Repo"]({ query: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                var queryOptions;
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                    switch (_a.label) {
                        case 0: return [4 /*yield*/, getQueryOptions()];
                        case 1:
                            queryOptions = _a.sent();
                            return [4 /*yield*/, getClient().list(table, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, queryOptions, { cacheBust: this.getCacheBust() }))];
                        case 2: return [2 /*return*/, _a.sent()];
                    }
                });
            }); } });
        this.options = options;
    }
    KedRepo.prototype.getCacheBust = function () {
        var _a = this.options, table = _a.table, user = _a.user;
        var cacheBust = localStorage.getItem('cache-bust-' + table + '-' + user);
        return cacheBust || this.regenerateCacheBust();
    };
    KedRepo.prototype.regenerateCacheBust = function () {
        var _a = this.options, table = _a.table, user = _a.user;
        var cacheBust = Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_2__["createUUID"])();
        localStorage.setItem('cache-bust-' + table + '-' + user, cacheBust);
        return cacheBust;
    };
    KedRepo.prototype.upsert = function (item, updater) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var updatedItem;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!!item.$etag) return [3 /*break*/, 2];
                        updatedItem = Object.assign({}, item);
                        updater(updatedItem);
                        return [4 /*yield*/, this.insert([updatedItem])];
                    case 1: return [2 /*return*/, _a.sent()];
                    case 2: 
                    // We have an $etag, so we can expect it to live on the server.
                    // However, take care of the unlikely situation that it was deleted from server,
                    // and if so, insert it again.
                    return [4 /*yield*/, this.update([item], updater).catch(function (e) {
                            if (e.name === "http404") {
                                var updatedItem = Object.assign({}, item);
                                updater(updatedItem);
                                return _this.insert([updatedItem]);
                            }
                            return Promise.reject(e);
                        })];
                    case 3:
                        // We have an $etag, so we can expect it to live on the server.
                        // However, take care of the unlikely situation that it was deleted from server,
                        // and if so, insert it again.
                        _a.sent();
                        _a.label = 4;
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    KedRepo.prototype.update = function (items, updater) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, getClient, optimistic, table, client, modifiedItems, res;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = this.options, getClient = _a.getClient, optimistic = _a.optimistic, table = _a.table;
                        client = getClient();
                        modifiedItems = items.map(function (item) {
                            var memRepoItem = _this.mem.items.find(function (it) { return it.id === item.id; });
                            item = Object.assign({}, memRepoItem || item);
                            updater(item);
                            return item;
                        });
                        if (!optimistic) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.mem.update(modifiedItems.map(function (x) { return Object.assign({}, x, { $meta: 'updating' }); }))];
                    case 1:
                        _b.sent();
                        _b.label = 2;
                    case 2: return [4 /*yield*/, client.do(function (br) { return modifiedItems.forEach(function (item) { return br.put(table, item); }); })
                            .catch(function (e) { return e.name === "http409" ? // conflict
                            // Get a fresh version from server:
                            client.list(table, { ids: items.map(function (item) { return item.id; }) }, { cache: 'no-cache' }).then(function (freshItems) {
                                // Update local version:
                                var modifiedItems = freshItems.map(function (freshItem) {
                                    // Clone the fresh item
                                    var modified = Object.assign({}, freshItem);
                                    // Re-run the updater on the clone:
                                    updater(modified);
                                    return modified;
                                });
                                // Re-do the the put operation towards the server.
                                return client.do(function (br) { return modifiedItems.forEach(function (item) { return br.put(table, item); }); });
                            }) :
                            // Other unexpected error:
                            Promise.resolve(optimistic &&
                                _this.mem.update(items)) // Undo optimistic update
                                .then(function () {
                                return Promise.reject(e); // Reject with the error no matter.
                            }); })];
                    case 3:
                        res = _b.sent();
                        this.regenerateCacheBust();
                        modifiedItems.forEach(function (item) {
                            item.$etag = res.newEtags[item.id];
                            item.$meta = undefined;
                        });
                        return [4 /*yield*/, this.mem.update(modifiedItems)];
                    case 4:
                        _b.sent(); // Ensures new etag is is applied on next action.
                        return [2 /*return*/];
                }
            });
        });
    };
    KedRepo.prototype.stripGraphs = function (items, graphs) {
        return items.map(function (item) {
            var clone = Object.assign({}, item);
            graphs.forEach(function (graph) {
                if (item[graph]) {
                    clone[graph] = item[graph].map(function (doc) { return ({ id: doc.id }); });
                }
            });
            return clone;
        });
    };
    KedRepo.prototype.insert = function (items) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var e_1, _a, _b, getClient, optimistic, table, getQueryOptions, client, queryOptions, graphs, stripped, br, _loop_1, stripped_1, stripped_1_1, item, res;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _b = this.options, getClient = _b.getClient, optimistic = _b.optimistic, table = _b.table, getQueryOptions = _b.getQueryOptions;
                        client = getClient();
                        return [4 /*yield*/, getQueryOptions()];
                    case 1:
                        queryOptions = _c.sent();
                        graphs = [].concat(queryOptions.include);
                        // Give IDs to each item:
                        items = items.map(function (item) { return item.id ? item : Object.assign({}, item, { id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_2__["createUUID"])() }); });
                        stripped = this.stripGraphs(items, graphs);
                        if (!optimistic) return [3 /*break*/, 3];
                        return [4 /*yield*/, this.mem.insert(stripped.map(function (x) { return Object.assign({}, x, { $meta: 'adding' }); }))];
                    case 2:
                        _c.sent();
                        _c.label = 3;
                    case 3:
                        br = new kedbackend_client__WEBPACK_IMPORTED_MODULE_2__["BatchRunner"]();
                        _loop_1 = function (item) {
                            var e_2, _a;
                            var _loop_2 = function (graph) {
                                var foreignItems = item[graph];
                                if (foreignItems) {
                                    foreignItems.forEach(function (doc) {
                                        br.link2(table, item.id, graph, doc.id);
                                    });
                                }
                            };
                            try {
                                // Also add links to all foreign related items:
                                for (var graphs_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](graphs), graphs_1_1 = graphs_1.next(); !graphs_1_1.done; graphs_1_1 = graphs_1.next()) {
                                    var graph = graphs_1_1.value;
                                    _loop_2(graph);
                                }
                            }
                            catch (e_2_1) { e_2 = { error: e_2_1 }; }
                            finally {
                                try {
                                    if (graphs_1_1 && !graphs_1_1.done && (_a = graphs_1.return)) _a.call(graphs_1);
                                }
                                finally { if (e_2) throw e_2.error; }
                            }
                            br.add(table, item);
                        };
                        try {
                            for (stripped_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](stripped), stripped_1_1 = stripped_1.next(); !stripped_1_1.done; stripped_1_1 = stripped_1.next()) {
                                item = stripped_1_1.value;
                                _loop_1(item);
                            }
                        }
                        catch (e_1_1) { e_1 = { error: e_1_1 }; }
                        finally {
                            try {
                                if (stripped_1_1 && !stripped_1_1.done && (_a = stripped_1.return)) _a.call(stripped_1);
                            }
                            finally { if (e_1) throw e_1.error; }
                        }
                        return [4 /*yield*/, client.batch(br.mutationRequests).catch(function (e) {
                                if (optimistic)
                                    _this.mem.delete(items.map(function (item) { return item.id; }));
                                return Promise.reject(e);
                            })];
                    case 4:
                        res = _c.sent();
                        this.regenerateCacheBust();
                        items.forEach(function (item) { return item.$etag = res.newEtags[item.id]; });
                        if (!optimistic) return [3 /*break*/, 6];
                        return [4 /*yield*/, this.mem.update(items)];
                    case 5:
                        _c.sent(); // Update with new $etag.
                        return [3 /*break*/, 8];
                    case 6: return [4 /*yield*/, this.mem.insert(items)];
                    case 7:
                        _c.sent();
                        _c.label = 8;
                    case 8: return [2 /*return*/];
                }
            });
        });
    };
    KedRepo.prototype.delete = function (ids) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, getClient, optimistic, table, client, res;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = this.options, getClient = _a.getClient, optimistic = _a.optimistic, table = _a.table;
                        client = getClient();
                        if (!optimistic) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.mem.update(ids
                                .map(function (id) { return _this.mem.items.find(function (x) { return x.id === id; }); })
                                .filter(function (x) { return x; })
                                .map(function (x) { return Object.assign({}, x, { $meta: 'deleting' }); }))];
                    case 1:
                        _b.sent();
                        _b.label = 2;
                    case 2: return [4 /*yield*/, client.do(function (br) { return ids.forEach(function (id) { return br.delete(table, id); }); }).catch(function (e) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                            var _this = this;
                            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                                switch (_a.label) {
                                    case 0:
                                        if (!optimistic) return [3 /*break*/, 2];
                                        return [4 /*yield*/, this.mem.update(ids
                                                .map(function (id) { return _this.mem.items.find(function (x) { return x.id === id; }); })
                                                .filter(function (x) { return x; })
                                                .map(function (x) {
                                                x = Object.assign({}, x);
                                                delete x.$meta;
                                                return x;
                                            }))];
                                    case 1:
                                        _a.sent();
                                        _a.label = 2;
                                    case 2: throw e;
                                }
                            });
                        }); })];
                    case 3:
                        res = _b.sent();
                        this.regenerateCacheBust();
                        return [4 /*yield*/, this.mem.delete(ids)];
                    case 4:
                        _b.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    return KedRepo;
}());



/***/ }),

/***/ "./src/repos/repo.ts":
/*!***************************!*\
  !*** ./src/repos/repo.ts ***!
  \***************************/
/*! exports provided: Repo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Repo", function() { return Repo; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

var Repo = /** @class */ (function () {
    function Repo(comm) {
        this.comm = comm;
        this.listPromise = null;
        this.items = null;
        this.subscribers = [];
    }
    Repo.prototype.subscribe = function (subscriber) {
        var _this = this;
        return this.ensureHasData().then(function () {
            subscriber(_this.items, _this.error);
            _this.subscribers.push(subscriber);
        });
    };
    Repo.prototype.unsubscribe = function (subscriber) {
        this.subscribers = this.subscribers.filter(function (s) { return s !== subscriber; });
    };
    Repo.prototype.notifySubscribers = function () {
        var _this = this;
        this.subscribers.forEach(function (s) { return s(_this.items, _this.error); });
    };
    Repo.prototype.ensureHasData = function () {
        if (!this.listPromise)
            this.refreshFromServer();
        return this.listPromise;
    };
    Repo.prototype.refreshFromServer = function () {
        var _this = this;
        this.listPromise = this.comm.query().then(function (items) {
            _this.items = items;
            _this.error = null;
            _this.notifySubscribers();
        }).catch(function (error) {
            _this.error = error;
            _this.items = _this.items || [];
            _this.notifySubscribers();
        });
        return this.listPromise;
    };
    Repo.prototype.update = function (item) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var updatedItems;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.ensureHasData()];
                    case 1:
                        _a.sent();
                        updatedItems = Array.isArray(item) ? item : [item];
                        this.items = this.items.map(function (it) {
                            var updatedItem = updatedItems.find(function (_a) {
                                var id = _a.id;
                                return it.id === id;
                            });
                            return updatedItem ?
                                Object.assign({}, updatedItem) :
                                it;
                        });
                        this.notifySubscribers();
                        return [2 /*return*/];
                }
            });
        });
    };
    Repo.prototype.insert = function (item) {
        var _this = this;
        return this.ensureHasData().then(function () {
            _this.items = _this.items.concat(item);
            _this.notifySubscribers();
        });
    };
    Repo.prototype.delete = function (id) {
        var _this = this;
        var ids = Array.isArray(id) ? id : [id];
        return this.ensureHasData().then(function () {
            _this.items = _this.items.filter(function (it) { return !ids.some(function (id) { return it.id === id; }); });
            _this.notifySubscribers();
        });
    };
    return Repo;
}());



/***/ }),

/***/ "./src/repos/user-tasks-repo.ts":
/*!**************************************!*\
  !*** ./src/repos/user-tasks-repo.ts ***!
  \**************************************/
/*! exports provided: userTasksRepo, UserTasksRepo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "userTasksRepo", function() { return userTasksRepo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UserTasksRepo", function() { return UserTasksRepo; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _ked_repo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ked-repo */ "./src/repos/ked-repo.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _components_weekplanner_weekplanner_persisted_state__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/weekplanner/weekplanner-persisted-state */ "./src/components/weekplanner/weekplanner-persisted-state.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _utils_weekutil__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/weekutil */ "./src/utils/weekutil.ts");







var userTasksRepo = _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].userTasksRepo;
var UserTasksRepo = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](UserTasksRepo, _super);
    function UserTasksRepo(getClient, getCurrentUser) {
        var _this = _super.call(this, {
            getClient: getClient,
            optimistic: true,
            table: "usertasks",
            user: getCurrentUser() ? getCurrentUser().mail : "",
            getQueryOptions: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                var currentUser, userEmail, _a, weekDate, weekNumber, kedWeek;
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                    switch (_b.label) {
                        case 0:
                            currentUser = getCurrentUser();
                            userEmail = currentUser ? currentUser.mail : "";
                            if (!!this.persistedState) return [3 /*break*/, 2];
                            _a = this;
                            return [4 /*yield*/, _components_weekplanner_weekplanner_persisted_state__WEBPACK_IMPORTED_MODULE_3__["WeekPlannerPersistedState"].load(userEmail)];
                        case 1:
                            _a.persistedState = _b.sent();
                            _b.label = 2;
                        case 2:
                            weekDate = this.persistedState.weekDate;
                            weekNumber = moment__WEBPACK_IMPORTED_MODULE_4___default()(weekDate).week();
                            kedWeek = Object(_utils_weekutil__WEBPACK_IMPORTED_MODULE_6__["KEDWeek"])(moment__WEBPACK_IMPORTED_MODULE_4___default()(weekDate).year(), weekNumber);
                            /*const [from, to] = [moment(weekDate).startOf('week'), moment(weekDate).endOf('week')]
                              .map(m => m.toDate().getTime());*/
                            return [2 /*return*/, {
                                    from: kedWeek.notBefore,
                                    to: kedWeek.notAfter,
                                    role: "USER",
                                    include: ["task", "course"],
                                    flags: ["includeIdsOnly"],
                                }];
                    }
                });
            }); }
        }) || this;
        _this.persistedState = null;
        _this.getCurrentUser = getCurrentUser;
        return _this;
    }
    UserTasksRepo.prototype.updatePersistedState = function (stateChanges) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        Object.assign(this.persistedState, stateChanges);
                        return [4 /*yield*/, this.persistedState.save()];
                    case 1:
                        _a.sent();
                        this.mem.notifySubscribers();
                        return [2 /*return*/];
                }
            });
        });
    };
    UserTasksRepo.prototype.setTaskDoneState = function (userTask, done) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, getClient, optimistic, table, client, modifiedItem, similarTasks, identicalTasks;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = this.options, getClient = _a.getClient, optimistic = _a.optimistic, table = _a.table;
                        client = getClient();
                        modifiedItem = Object.assign({}, userTask, { done: done });
                        if (!optimistic) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.mem.update(Object.assign({}, modifiedItem, { $meta: 'updating' }))];
                    case 1:
                        _b.sent();
                        _b.label = 2;
                    case 2: return [4 /*yield*/, client.list('usertasks', {
                            name: userTask.name,
                            role: "USER",
                            include: ["task", "course"],
                            flags: ["includeIdsOnly"],
                            from: moment__WEBPACK_IMPORTED_MODULE_4___default()(this.persistedState.weekDate).add(-3, 'weeks').valueOf(),
                            to: moment__WEBPACK_IMPORTED_MODULE_4___default()(this.persistedState.weekDate).add(3, 'weeks').valueOf()
                        }, {
                            cache: 'no-cache'
                        })];
                    case 3:
                        similarTasks = _b.sent();
                        identicalTasks = similarTasks.filter(function (t) {
                            return t.courseName === userTask.courseName &&
                                t.learningGoal === userTask.learningGoal &&
                                (!userTask.task || t.task.map(function (t) { return t.id; }).join('') === userTask.task.map(function (t) { return t.id; }).join('')) &&
                                (!userTask.course || t.course.map(function (c) { return c.id; }).join('') === userTask.course.map(function (c) { return c.id; }).join(''));
                        });
                        if (identicalTasks.length === 0) {
                            // Workaround for issue in SubjectPlanner migration (usertasks with long names is not found)
                            identicalTasks.push(userTask);
                        }
                        return [4 /*yield*/, this.update(identicalTasks, function (t) { return t.done = done; })];
                    case 4:
                        _b.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    UserTasksRepo.prototype.setSubTaskDoneState = function (userTask, subTaskId, done) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, getClient, optimistic, table, client;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = this.options, getClient = _a.getClient, optimistic = _a.optimistic, table = _a.table;
                        client = getClient();
                        return [4 /*yield*/, this.update([userTask], function (t) { return t.subTasks && t.subTasks.filter(function (st) { return st.id === subTaskId; })
                                .forEach(function (st) { return st.done = done; }); })];
                    case 1:
                        _b.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    UserTasksRepo.prototype.setWeekPlannerBoxOpen = function (courseName, isOpen) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var openCourses;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        openCourses = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.persistedState.openCourses);
                        if (isOpen)
                            openCourses[courseName] = true;
                        else
                            delete openCourses[courseName];
                        return [4 /*yield*/, this.updatePersistedState({ openCourses: openCourses })];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    UserTasksRepo.prototype.changeWeek = function (weekDate) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var persistedState, newPersisted;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        persistedState = this.persistedState;
                        if (!!persistedState) return [3 /*break*/, 2];
                        return [4 /*yield*/, _components_weekplanner_weekplanner_persisted_state__WEBPACK_IMPORTED_MODULE_3__["WeekPlannerPersistedState"].load(this.options.user)];
                    case 1:
                        persistedState = _a.sent();
                        _a.label = 2;
                    case 2:
                        newPersisted = new _components_weekplanner_weekplanner_persisted_state__WEBPACK_IMPORTED_MODULE_3__["WeekPlannerPersistedState"](persistedState);
                        newPersisted.weekDate = moment__WEBPACK_IMPORTED_MODULE_4___default()(weekDate).startOf('week').valueOf();
                        newPersisted.save();
                        this.persistedState = newPersisted;
                        return [4 /*yield*/, this.mem.refreshFromServer()];
                    case 3:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    UserTasksRepo.prototype.subscribe = function (subscriber) {
        var _this = this;
        var proxySubscriber = function (userTasks) {
            subscriber(userTasks.filter(function (ut) { return !ut.weekTexts; }), _this.persistedState, userTasks.filter(function (ut) { return !!ut.weekTexts; })[0] || {
                id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["createUUID"])(),
                dateTime: _this.persistedState.weekDate,
                weekTexts: { assessment: '', strategy: '' },
                acl: [
                    // Default ACL: Let user self have full control over this item:
                    new kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["DocumentAccess"]("email", _this.getCurrentUser().mail, "S"),
                    // Additional ACL: Let employees on same school have read access to it.
                    // This currently only applies to tasks that refer to course tasks (not own tasks!)
                    new kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["DocumentAccess"]("schoolRole", _this.getCurrentUser().school + "/EMPLOYEE", "R")
                ].map(function (ac) { return ac.toString(); })
            });
        };
        proxySubscriber["subscriber"] = subscriber;
        this.mem.subscribe(proxySubscriber);
    };
    UserTasksRepo.prototype.unsubscribe = function (subscriber) {
        this.mem.subscribers = this.mem.subscribers.filter(function (s) { return s["subscriber"] !== subscriber; });
    };
    return UserTasksRepo;
}(_ked_repo__WEBPACK_IMPORTED_MODULE_1__["KedRepo"]));

if (!userTasksRepo) {
    userTasksRepo = _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].userTasksRepo = new UserTasksRepo(function () { return _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].kedBackendClient; }, function () { return _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser; });
    userTasksRepo.mem.ensureHasData();
}


/***/ }),

/***/ "./src/translations/en.json":
/*!**********************************!*\
  !*** ./src/translations/en.json ***!
  \**********************************/
/*! exports provided: addeditsubtask.deleteSubtask, addeditsubtask.editSubtask, addeditsubtask.nameLabel, addeditsubtask.addSubtask, calendar.currentDate, calendar.fullDayEventLocation, calendar.loadCalendarEvents, calendar.loadingCalendar, calendar.weekNumber, common.addDescriptionPlhd, common.cancel, common.changesNotSavedErrorOccured, common.changesNotSavedUnauthorized, common.descriptionLabel, common.errorSavingData, common.linkLabel, common.loading, common.nameLabel, common.save, common.saved, common.saving, common.remove, customTask.addWorkGoalTitle, customTask.enterNamePlhd, learningGoalsLost.overall, task.addSubtask, task.editTask, task.editWorkGoals, task.enterTaskNamePlhd, task.removeDeadline, task.removeThisTask, task.removeWorkGoals, task.setDeadline, task.setDeadlineLabel, task.subTasks, task.targetNameLabel, task.taskNameLabel, task.whatShouldYouDoPlhd, taskList.nextWeekTask, taskList.lastWeekTask, taskList.currentWeekTask, taskList.removeTaskFromWeeklyPlanning, taskList.addTaskToWeeklyPlanning, termplanner.comments, termplanner.course, termplanner.edsGoalGrades, termplanner.englishLanguage, termplanner.finalStep, termplanner.firstTerm, termplanner.hindiLanguage, termplanner.ict, termplanner.loadingTermplanner, termplanner.maths, termplanner.modernLanguage, termplanner.noFinalStepAvailable, termplanner.secondTerm, termplanner.termPlanning, termplanner.weekNumber, termplanner.yoga, tutorNoteDialog.weekComment, test.chooseComponentLabel, test.pageDescription, userTasks.addLearningGoal, userTasks.deleteLearningGoal, userTasks.goals, weekNotebook.title, weekplanner.addLearningGoal, weekplanner.addLearningGoalTitle, weekplanner.confirmRemoveLearningObjectives, weekplanner.copyPreviousWeekTaks, weekplanner.emptyLearningGoalErr, weekplanner.evaluation, weekplanner.evaluationDescription, weekplanner.learningGoal, weekplanner.logBook, weekplanner.nameCannotBeEmpty, weekplanner.nameMustNotBeEmpty, weekplanner.strategy, weekplanner.strategyAndEvaluation, weekplanner.strategyDescription, weekplanner.weekNumber, wysiwyg.bold, wysiwyg.code, wysiwyg.heading1, wysiwyg.heading2, wysiwyg.heading3, wysiwyg.image, wysiwyg.imagePromptMsg, wysiwyg.italic, wysiwyg.line, wysiwyg.link, wysiwyg.olist, wysiwyg.paragraph, wysiwyg.quote, wysiwyg.strikethrough, wysiwyg.ulist, wysiwyg.underline, default */
/***/ (function(module) {

module.exports = {"addeditsubtask.deleteSubtask":"Delete subtask","addeditsubtask.editSubtask":"Edit subtask","addeditsubtask.nameLabel":"Name of subtask","addeditsubtask.addSubtask":"Add sub-task","calendar.currentDate":"Week {week}, {year}","calendar.fullDayEventLocation":"Place: {location}","calendar.loadCalendarEvents":"Load calendar events...","calendar.loadingCalendar":"Loading calendars... (listing...)","calendar.weekNumber":"W{weekNumber}","common.addDescriptionPlhd":"Add description...","common.cancel":"Cancel","common.changesNotSavedErrorOccured":"An error occured while saving data. Your changes were not saved.","common.changesNotSavedUnauthorized":"The changes were not saved due to insufficient authority","common.descriptionLabel":"Description","common.errorSavingData":"An error occured while saving data.","common.linkLabel":"Link","common.loading":"Loading...","common.nameLabel":"Name","common.save":" Save","common.saved":" Saved","common.saving":"Saving","common.remove":"Delete","customTask.addWorkGoalTitle":"Add own working goal","customTask.enterNamePlhd":"Enter Name...","learningGoalsLost.overall":"Overall","task.addSubtask":"Add subtask","task.editTask":"Edit task","task.editWorkGoals":"Edit working goal","task.enterTaskNamePlhd":"Enter the name of task...","task.removeDeadline":"Delete deadline","task.removeThisTask":"Delete this task","task.removeWorkGoals":"Delete working goal","task.setDeadline":"Set deadline","task.setDeadlineLabel":"Set deadline...","task.subTasks":"Subtasks","task.targetNameLabel":"Name of working goal","task.taskNameLabel":"Name of task","task.whatShouldYouDoPlhd":"What should you do?","taskList.nextWeekTask":"for next week (w{week})","taskList.lastWeekTask":"for last week (w{week})","taskList.currentWeekTask":"for week {week}","taskList.removeTaskFromWeeklyPlanning":"Delete task from your weekly planning {week}","taskList.addTaskToWeeklyPlanning":"Add task to your weekly planning {week}","termplanner.comments":"Comments","termplanner.course":"Theme course","termplanner.edsGoalGrades":"Intermediate goals","termplanner.englishLanguage":"Eng","termplanner.finalStep":"Final Step","termplanner.firstTerm":"FT {year}","termplanner.hindiLanguage":"Hindi","termplanner.ict":"ICT","termplanner.loadingTermplanner":"Loading Termplanner","termplanner.maths":"Maths","termplanner.modernLanguage":"MFL","termplanner.noFinalStepAvailable":"No final step available","termplanner.secondTerm":"ST {year}","termplanner.termPlanning":"Term planner","termplanner.weekNumber":"Week","termplanner.yoga":"Yoga","tutorNoteDialog.weekComment":"Note for week {weekNumber}","test.chooseComponentLabel":"Component","test.pageDescription":"Test page for the components on the starting page","userTasks.addLearningGoal":"Own working goal","userTasks.deleteLearningGoal":"Delete learning goal and its tasks","userTasks.goals":"Own learning goal","weekNotebook.title":"Notepad","weekplanner.addLearningGoal":"Goal:","weekplanner.addLearningGoalTitle":"Add own learning goal","weekplanner.confirmRemoveLearningObjectives":"Delete learning goal and {learningGoalsNumber} tasks?","weekplanner.copyPreviousWeekTaks":"Copy from previous week","weekplanner.emptyLearningGoalErr":"The learning goal cannot be empty","weekplanner.evaluation":"Evaluation","weekplanner.evaluationDescription":"Reflection on your work effort and your chosen strategies during the week. Evaluate in relation to your goals.","weekplanner.learningGoal":"Own learning goal","weekplanner.logBook":"Logbook","weekplanner.nameCannotBeEmpty":"Name cannot be empty","weekplanner.nameMustNotBeEmpty":"Name must not be empty","weekplanner.strategy":"Strategy","weekplanner.strategyAndEvaluation":"Strategy & Evaluation","weekplanner.strategyDescription":"What I should do to learn","weekplanner.weekNumber":"Week {weekNumber}","wysiwyg.bold":"Bold","wysiwyg.code":"Code","wysiwyg.heading1":"Heading 1","wysiwyg.heading2":"Heading 2","wysiwyg.heading3":"Heading 3","wysiwyg.image":"Insert image","wysiwyg.imagePromptMsg":"Enter the URL of the image","wysiwyg.italic":"Italics","wysiwyg.line":"Horizontal line","wysiwyg.link":"Insert link","wysiwyg.olist":"Ordered list","wysiwyg.paragraph":"Paragraph","wysiwyg.quote":"Quote","wysiwyg.strikethrough":"Strikethrough","wysiwyg.ulist":"Bullet list","wysiwyg.underline":"Underline"};

/***/ }),

/***/ "./src/translations/sv.json":
/*!**********************************!*\
  !*** ./src/translations/sv.json ***!
  \**********************************/
/*! exports provided: addeditsubtask.addSubtask, addeditsubtask.deleteSubtask, addeditsubtask.editSubtask, addeditsubtask.nameLabel, calendar.currentDate, calendar.fullDayEventLocation, calendar.loadCalendarEvents, calendar.loadingCalendar, calendar.weekNumber, common.addDescriptionPlhd, common.cancel, common.changesNotSavedErrorOccured, common.changesNotSavedUnauthorized, common.descriptionLabel, common.errorSavingData, common.linkLabel, common.loading, common.nameLabel, common.save, common.saved, common.saving, common.remove, customTask.addWorkGoalTitle, customTask.enterNamePlhd, learningGoalsLost.overall, task.addSubtask, task.editTask, task.editWorkGoals, task.enterTaskNamePlhd, task.removeDeadline, task.removeThisTask, task.removeWorkGoals, task.setDeadline, task.setDeadlineLabel, task.subTasks, task.targetNameLabel, task.taskNameLabel, task.whatShouldYouDoPlhd, taskList.nextWeekTask, taskList.lastWeekTask, taskList.currentWeekTask, taskList.removeTaskFromWeeklyPlanning, taskList.addTaskToWeeklyPlanning, termplanner.comments, termplanner.course, termplanner.edsGoalGrades, termplanner.englishLanguage, termplanner.swedishLanguage, termplanner.finalStep, termplanner.firstTerm, termplanner.hindiLanguage, termplanner.loadingTermplanner, termplanner.modernLanguageFullname, termplanner.mathsFullname, termplanner.noFinalStepAvailable, termplanner.swedishLanguageFullName, termplanner.englishLanguageFullName, termplanner.maths, termplanner.modernLanguage, termplanner.secondTerm, termplanner.termPlanning, termplanner.weekNumber, tutorNoteDialog.weekComment, test.chooseComponentLabel, test.pageDescription, userTasks.addLearningGoal, userTasks.deleteLearningGoal, userTasks.goals, weekNotebook.title, weekplanner.addLearningGoal, weekplanner.addLearningGoalTitle, weekplanner.confirmRemoveLearningObjectives, weekplanner.copyPreviousWeekTaks, weekplanner.emptyLearningGoalErr, weekplanner.evaluation, weekplanner.evaluationDescription, weekplanner.learningGoal, weekplanner.logBook, weekplanner.nameCannotBeEmpty, weekplanner.nameMustNotBeEmpty, weekplanner.strategy, weekplanner.strategyAndEvaluation, weekplanner.strategyDescription, weekplanner.weekNumber, wysiwyg.bold, wysiwyg.code, wysiwyg.heading1, wysiwyg.heading2, wysiwyg.heading3, wysiwyg.image, wysiwyg.imagePromptMsg, wysiwyg.italic, wysiwyg.line, wysiwyg.link, wysiwyg.olist, wysiwyg.paragraph, wysiwyg.quote, wysiwyg.strikethrough, wysiwyg.ulist, wysiwyg.underline, default */
/***/ (function(module) {

module.exports = {"addeditsubtask.addSubtask":"Lgg till underuppgift","addeditsubtask.deleteSubtask":"Ta bort underuppgift","addeditsubtask.editSubtask":"Redigera underuppgift","addeditsubtask.nameLabel":"Underuppgiftens namn","calendar.currentDate":"Vecka {week}, {year}","calendar.fullDayEventLocation":"Plats: {location}","calendar.loadCalendarEvents":"Load calendar events...","calendar.loadingCalendar":"Loading calendars... (listing...)","calendar.weekNumber":"V{weekNumber}","common.addDescriptionPlhd":"Lgg till en beskrivning...","common.cancel":"Avbryt","common.changesNotSavedErrorOccured":"Fr tillfllet problem att spara data. Dina ndringar sparades inte.","common.changesNotSavedUnauthorized":"ndringarna sparades inte p.g.a. otillrcklig behrighet.","common.descriptionLabel":"Beskrivning","common.errorSavingData":"Kunde inte spara.","common.linkLabel":"Lnk","common.loading":"Laddar...","common.nameLabel":"Namn","common.save":" Spara","common.saved":" Sparad","common.saving":"Sparar...","common.remove":"Ta bort","customTask.addWorkGoalTitle":"Lgg till eget arbetsml","customTask.enterNamePlhd":"Ange namn...","learningGoalsLost.overall":"vergripande","task.addSubtask":"Lgg till underuppgift","task.editTask":"Redigera uppgift","task.editWorkGoals":"Redigera arbetsml","task.enterTaskNamePlhd":"Ange uppgiftens namn...","task.removeDeadline":"Ta bort deadline","task.removeThisTask":"Ta bort den hr uppgiften","task.removeWorkGoals":"Ta bort arbetsml","task.setDeadline":"Set deadline","task.setDeadlineLabel":"Ange deadline...","task.subTasks":"Underuppgifter","task.targetNameLabel":"Arbetsmlets namn","task.taskNameLabel":"Uppgiftens namn","task.whatShouldYouDoPlhd":"Vad ska du gra?","taskList.nextWeekTask":"fr nsta vecka (v{week})","taskList.lastWeekTask":"fr frra veckan (v{week})","taskList.currentWeekTask":"fr vecka {week}","taskList.removeTaskFromWeeklyPlanning":"Ta bort uppgiften frn egen veckoplanering {week}","taskList.addTaskToWeeklyPlanning":"Lgg till uppgiften i egen veckoplanering {week}","termplanner.comments":"Kommentar","termplanner.course":"Kurs","termplanner.edsGoalGrades":"Terminsml","termplanner.englishLanguage":"Eng","termplanner.swedishLanguage":"Sv/SvA","termplanner.finalStep":"Slutsteg","termplanner.firstTerm":"VT {year}","termplanner.hindiLanguage":"","termplanner.loadingTermplanner":"V.g. vnta medan terminsplaner laddas...","termplanner.modernLanguageFullname":"M.sprk","termplanner.mathsFullname":"Matematik","termplanner.noFinalStepAvailable":"Inget slutsteg tillgngligt","termplanner.swedishLanguageFullName":"Svenska","termplanner.englishLanguageFullName":"Engelska","termplanner.maths":"Ma","termplanner.modernLanguage":"M.spr","termplanner.secondTerm":"HT {year}","termplanner.termPlanning":"Terminsplanering","termplanner.weekNumber":"Vecka","tutorNoteDialog.weekComment":"Kommentar fr vecka {weekNumber}","test.chooseComponentLabel":"Komponent","test.pageDescription":"Testsida fr komponenter till nya startsidan","userTasks.addLearningGoal":"Eget arbetsml","userTasks.deleteLearningGoal":"Ta bort lrandemlet och dess uppgifter","userTasks.goals":"Egna lrandeml","weekNotebook.title":"Anteckningar","weekplanner.addLearningGoal":"Ml:","weekplanner.addLearningGoalTitle":"Lgg till eget lrandeml","weekplanner.confirmRemoveLearningObjectives":"Ta bort lrandeml samt {learningGoalsNumber} uppgifter?","weekplanner.copyPreviousWeekTaks":"Kopiera ej klara frn fregende vecka","weekplanner.emptyLearningGoalErr":"Lrandemlet kan inte vara tomt","weekplanner.evaluation":"Utvrdering","weekplanner.evaluationDescription":"Reflektion kring din arbetsinsats och dina valda strategier under veckan.Utvrdera i frhllande till dina ml.","weekplanner.learningGoal":"Eget lrandeml","weekplanner.logBook":"Loggbok","weekplanner.nameCannotBeEmpty":"Namnet kan inte vara tomt","weekplanner.nameMustNotBeEmpty":"Namnet fr inte vara tomt","weekplanner.strategy":"Strategi","weekplanner.strategyAndEvaluation":"Strategi & Utvrdering","weekplanner.strategyDescription":"Hur jag ska gra fr att lra mig.","weekplanner.weekNumber":"Vecka {weekNumber}","wysiwyg.bold":"Fetstil","wysiwyg.code":"Programkod","wysiwyg.heading1":"Rubrik 1","wysiwyg.heading2":"Rubrik 2","wysiwyg.heading3":"Rubrik 3","wysiwyg.image":"Infoga bild","wysiwyg.imagePromptMsg":"Ange bildens URL","wysiwyg.italic":"Kursiv","wysiwyg.line":"Vgrt linje","wysiwyg.link":"Infoga lnk","wysiwyg.olist":"Ordnad lista","wysiwyg.paragraph":"Paragraf","wysiwyg.quote":"Citat","wysiwyg.strikethrough":"Struken","wysiwyg.ulist":"Punktlista","wysiwyg.underline":"Understruken"};

/***/ }),

/***/ "./src/utils/error-success-feedback.tsx":
/*!**********************************************!*\
  !*** ./src/utils/error-success-feedback.tsx ***!
  \**********************************************/
/*! exports provided: ErrorSuccessFeedback */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ErrorSuccessFeedback", function() { return ErrorSuccessFeedback; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _components_course_builder_sub_components_remove_item__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/course-builder/sub-components/remove-item */ "./src/components/course-builder/sub-components/remove-item.tsx");




var ErrorSuccessFeedback = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](ErrorSuccessFeedback, _super);
    function ErrorSuccessFeedback(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            errors: [],
            infos: []
        };
        _this._unhandledRejection = _this._unhandledRejection.bind(_this);
        _this._error = _this._error.bind(_this);
        _this._customError = _this._customError.bind(_this);
        _this._onInfo = _this._onInfo.bind(_this);
        _this._dbWriterError = _this._dbWriterError.bind(_this);
        _this._dbWriterStateChanged = _this._dbWriterStateChanged.bind(_this);
        return _this;
    }
    ErrorSuccessFeedback.prototype._addError = function (message, details, retryable) {
        var _this = this;
        //console.error(message, {retryable: !!retryable, details});
        this.setState(function (_a) {
            var errors = _a.errors;
            if (errors.some(function (e) { return e.message === message; }))
                return { errors: errors };
            if (errors.length > 2)
                errors = errors.slice(1);
            return {
                errors: errors.concat([{ message: message, details: details, retryable: retryable }])
            };
        });
        // Remove non-retryable errors after 30 seconds:
        if (!retryable)
            setTimeout(function () {
                _this.setState(function (_a) {
                    var errors = _a.errors;
                    return ({
                        errors: errors.filter(function (e) { return e.message !== message; })
                    });
                });
            }, 30000);
    };
    ErrorSuccessFeedback.prototype._addInfo = function (message) {
        var _this = this;
        if (message === "") {
            // Turn off current info messages
            this.setState({ infos: [] });
            return;
        }
        this.setState(function (_a) {
            var infos = _a.infos;
            if (infos.some(function (info) { return info === message; }))
                return { infos: infos };
            if (infos.length > 1)
                infos = infos.slice(1);
            return {
                infos: [message] // was: infos.concat(message). But it sucks!
            };
        });
        // Remove info message after 10 seconds:
        setTimeout(function () {
            _this.setState(function (_a) {
                var infos = _a.infos;
                return ({
                    infos: infos.filter(function (msg) { return msg !== message; })
                });
            });
        }, 10000);
    };
    ErrorSuccessFeedback.prototype._dbWriterError = function (error, retryable) {
        this._addError("Det g\u00E5r inte att spara till servern", error, retryable);
    };
    ErrorSuccessFeedback.prototype._dbWriterStateChanged = function (_a) {
        var isEdited = _a.isEdited, isSaving = _a.isSaving;
        if (!isEdited) {
            // If isEdited is false, a successful write must have happened, and
            // there cannot be any retryable error anymore
            this.setState(function (_a) {
                var errors = _a.errors;
                errors = errors.filter(function (e) { return !e.retryable; });
                return { errors: errors };
            });
        }
        this.setState({
            dbWriterIsEdited: isEdited,
            dbWriterIsSaving: isSaving
        });
    };
    ErrorSuccessFeedback.prototype.componentDidMount = function () {
        window.addEventListener('unhandledrejection', this._unhandledRejection);
        window.addEventListener('error', this._error);
        window.addEventListener('customerror', this._customError);
        window.addEventListener('info', this._onInfo);
        _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].writer.onError(this._dbWriterError);
        _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].writer.onStateChange(this._dbWriterStateChanged);
    };
    ErrorSuccessFeedback.prototype.componentWillUnmount = function () {
        window.removeEventListener('unhandledrejection', this._unhandledRejection);
        window.removeEventListener('error', this._error);
        window.removeEventListener('customerror', this._customError);
        window.removeEventListener('info', this._onInfo);
        _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].writer.off(this._dbWriterError);
        _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].writer.off(this._dbWriterStateChanged);
    };
    ErrorSuccessFeedback.prototype._unhandledRejection = function (ev) {
        this._addError("Ett ok\u00E4nt fel intr\u00E4ffade...", ev.reason);
    };
    ErrorSuccessFeedback.prototype._error = function (ev) {
        this._addError(ev.error ? ev.error.message : "Ett ok\u00E4nt fel intr\u00E4ffade...", ev.error);
    };
    ErrorSuccessFeedback.prototype._customError = function (ev) {
        this._addError(ev.detail);
    };
    ErrorSuccessFeedback.prototype._onInfo = function (ev) {
        this._addInfo(ev.detail);
    };
    ErrorSuccessFeedback.prototype.render = function () {
        var _this = this;
        var _a = this.state, errors = _a.errors, infos = _a.infos, dbWriterIsSaving = _a.dbWriterIsSaving;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "error-success-feedback", style: {
                position: "fixed",
                left: 0,
                top: 0,
                width: "100%",
                pointerEvents: 'none'
            } },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { style: { display: 'table', margin: "0 auto" } },
                errors.filter(function (e) { return !e.retryable || !dbWriterIsSaving; })
                    .map(function (_a) {
                    var message = _a.message, details = _a.details, retryable = _a.retryable, showDetails = _a.showDetails;
                    return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: message, className: "error" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { style: { float: 'left' } }, message),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { style: { pointerEvents: 'auto' } },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_components_course_builder_sub_components_remove_item__WEBPACK_IMPORTED_MODULE_3__["RemoveItem"], { onClick: function () { return _this.removeError(message); } })),
                        details || retryable ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { style: { pointerEvents: 'auto' } },
                            details ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "btn", onClick: function () { return _this.toggleDetails(message); } }, showDetails ? "Dlj detailer" : "Visa detailjer"),
                                "\u00A0") : undefined,
                            showDetails ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, '' + details) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null, "\u00A0"),
                            retryable ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "btn", onClick: function () { return _this.retrySave(); } }, "F\u00F6rs\u00F6k spara nu") : undefined) : undefined));
                }),
                infos.map(function (message) {
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { key: message, className: "info" }, message);
                })));
    };
    ErrorSuccessFeedback.prototype.removeError = function (message) {
        this.setState(function (_a) {
            var errors = _a.errors;
            return ({
                errors: errors.filter(function (e) { return e.message !== message; })
            });
        });
    };
    ErrorSuccessFeedback.prototype.retrySave = function () {
        _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].writer.retrySave();
    };
    ErrorSuccessFeedback.prototype.toggleDetails = function (message) {
        this.setState(function (_a) {
            var errors = _a.errors;
            return ({ errors: errors.map(function (error) { return error.message === message ? tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, error, { showDetails: !error.showDetails }) :
                    error; })
            });
        });
    };
    return ErrorSuccessFeedback;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/utils/keep-session-alive.ts":
/*!*****************************************!*\
  !*** ./src/utils/keep-session-alive.ts ***!
  \*****************************************/
/*! exports provided: keepSessionAlive */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "keepSessionAlive", function() { return keepSessionAlive; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ "jquery");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");



var HEARTBEAT_INTERVAL = 5 * 60 * 1000; // 5 minutes.
var HEARTBEAT_URL = _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_2__["cfg"].KED_KEEP_ALIVE_URL;
var lastActivity = Date.now();
function keepSessionAlive() {
    setInterval(onTimeout, HEARTBEAT_INTERVAL);
    setTimeout(function () { return jquery__WEBPACK_IMPORTED_MODULE_1___default()('body')
        .mousemove(onUserActive)
        .keypress(onUserActive)
        .scroll(onUserActive); }, 100);
}
function onUserActive() {
    lastActivity = Date.now();
}
function onTimeout() {
    var inactivityTime = Date.now() - lastActivity;
    if (inactivityTime < HEARTBEAT_INTERVAL) {
        heartbeat();
    }
}
function heartbeat() {
    return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
        var res, err_1;
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
            switch (_a.label) {
                case 0:
                    console.log("Sending heartbeat request to " + HEARTBEAT_URL);
                    _a.label = 1;
                case 1:
                    _a.trys.push([1, 3, , 4]);
                    return [4 /*yield*/, fetch(HEARTBEAT_URL, {
                            cache: 'no-cache',
                            credentials: 'same-origin'
                        })];
                case 2:
                    res = _a.sent();
                    console.log("Response from " + HEARTBEAT_URL + ": " + res.status + " " + res.statusText);
                    return [3 /*break*/, 4];
                case 3:
                    err_1 = _a.sent();
                    console.warn("Request to " + HEARTBEAT_URL + " failed: " + err_1);
                    return [3 /*break*/, 4];
                case 4: return [2 /*return*/];
            }
        });
    });
}


/***/ }),

/***/ "./src/utils/make-suspense-api.ts":
/*!****************************************!*\
  !*** ./src/utils/make-suspense-api.ts ***!
  \****************************************/
/*! exports provided: makeSuspenseApi */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "makeSuspenseApi", function() { return makeSuspenseApi; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

var DEFAULT_CACHE_EXPIRATION = 30 * 60 * 1000; // 30 minutes.
var defaultOptions = {
    isApiMethod: function (f) { return typeof f === 'function'; },
    cacheExpiration: DEFAULT_CACHE_EXPIRATION
};
function makeSuspenseApi(api, options) {
    if (options === void 0) { options = defaultOptions; }
    options = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, defaultOptions, options);
    var isApiMethod = options.isApiMethod, cacheExpiration = options.cacheExpiration;
    var rv = Object.create(api);
    var cache = {};
    // Walk the instance + prototype chain to generate suspense version of each promise returning method
    for (var proto = api; proto && proto !== Object.prototype; proto = Object.getPrototypeOf(proto)) {
        suspendify(proto);
    }
    function suspendify(proto) {
        Object.keys(proto).forEach(function (prop) {
            if (!rv.hasOwnProperty(prop) && isApiMethod(prop)) {
                rv[prop] = function () {
                    var args = [];
                    for (var _i = 0; _i < arguments.length; _i++) {
                        args[_i] = arguments[_i];
                    }
                    var key = JSON.stringify(tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"]([prop], args));
                    var cachedEntry = cache[key];
                    if (cachedEntry !== undefined) {
                        if (cachedEntry.promise)
                            throw cachedEntry.promise;
                        if (cachedEntry.error)
                            throw cachedEntry.error;
                        if (cachedEntry.timeout > Date.now()) {
                            return cachedEntry.value;
                        }
                    }
                    try {
                        var promise = proto[prop].apply(api, args).then(function (result) {
                            cache[key] = { timeout: Date.now() + cacheExpiration, value: result };
                        }).catch(function (error) {
                            cache[key] = { timeout: Date.now() + cacheExpiration, error: error };
                        });
                        cache[key] = { timeout: Date.now() + cacheExpiration, promise: promise };
                        throw promise;
                    }
                    catch (error) {
                        if (error.then)
                            throw error;
                        cache[key] = { timeout: Date.now() + cacheExpiration, error: error };
                    }
                };
            }
        });
    }
    return rv;
}


/***/ }),

/***/ "./src/utils/pending-job.ts":
/*!**********************************!*\
  !*** ./src/utils/pending-job.ts ***!
  \**********************************/
/*! exports provided: PendingJob */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PendingJob", function() { return PendingJob; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

var PendingJob = /** @class */ (function () {
    function PendingJob(callback) {
        this.timeoutId = null;
        this.cancelled = false;
        this.pending = false;
        this.isJobExecuting = false;
        this.jobCallback = callback;
    }
    PendingJob.prototype.triggerChange = function (throttle) {
        var _this = this;
        if (this.cancelled)
            return;
        this.pending = true;
        if (this.timeoutId !== null)
            clearTimeout(this.timeoutId);
        this.timeoutId = setTimeout(function () { return _this.launchJob(); }, throttle);
    };
    PendingJob.prototype.stop = function () {
        if (this.timeoutId !== null)
            clearTimeout(this.timeoutId);
        this.timeoutId = null;
        this.cancelled = true;
    };
    PendingJob.prototype.launchJob = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (this.cancelled)
                            return [2 /*return*/];
                        if (!this.pending)
                            return [2 /*return*/];
                        if (this.isJobExecuting)
                            return [2 /*return*/];
                        this.timeoutId = null;
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, , 3, 4]);
                        this.isJobExecuting = true;
                        this.pending = false;
                        return [4 /*yield*/, this.jobCallback()];
                    case 2:
                        _a.sent();
                        return [3 /*break*/, 4];
                    case 3:
                        this.isJobExecuting = false;
                        return [7 /*endfinally*/];
                    case 4:
                        if (!this.pending) return [3 /*break*/, 6];
                        return [4 /*yield*/, this.launchJob()];
                    case 5:
                        _a.sent();
                        _a.label = 6;
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    return PendingJob;
}());



/***/ }),

/***/ "./src/utils/query-string.ts":
/*!***********************************!*\
  !*** ./src/utils/query-string.ts ***!
  \***********************************/
/*! exports provided: parseQueryString, generateQueryString, parseHashQueryString, generateHashQueryString, splitUrlAndQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseQueryString", function() { return parseQueryString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generateQueryString", function() { return generateQueryString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseHashQueryString", function() { return parseHashQueryString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generateHashQueryString", function() { return generateHashQueryString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "splitUrlAndQuery", function() { return splitUrlAndQuery; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

function parseQueryString(locationSearch, options) {
    var toLower = (options || {}).toLower;
    var result = {};
    if (locationSearch && locationSearch.length > 1)
        locationSearch.substr(1)
            .split('&')
            .map(function (part) { return part.split('=').map(function (s) { return decodeURIComponent(s.trim()); }); })
            .forEach(function (_a) {
            var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](_a, 2), key = _b[0], value = _b[1];
            return result[toLower ? key.toLowerCase() : key] = value;
        });
    return result;
}
function encodeParams(params) {
    return Object.keys(params).filter(function (key) { return params[key] !== undefined; }).map(function (key) { return encodeURIComponent(key) + "=" + encodeURIComponent(params[key]); }).join('&');
}
function generateQueryString(params) {
    return "?" + encodeParams(params);
}
function parseHashQueryString(locationHash, options) {
    return parseQueryString(locationHash, options);
}
function generateHashQueryString(params) {
    return "#" + encodeParams(params);
}
function splitUrlAndQuery(urlWithPossibleQuery) {
    var pQuery = urlWithPossibleQuery.indexOf('?');
    return pQuery >= 0 ?
        [urlWithPossibleQuery.substr(0, pQuery), urlWithPossibleQuery.substr(pQuery)] :
        [urlWithPossibleQuery, ""];
}


/***/ }),

/***/ "./src/utils/school-moment.ts":
/*!************************************!*\
  !*** ./src/utils/school-moment.ts ***!
  \************************************/
/*! exports provided: getFirstAndLastWeekOfTerm, getTermStartAndEnd, getSchoolMoment, addYear, nextAcademicYear, prevAcademicYear */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFirstAndLastWeekOfTerm", function() { return getFirstAndLastWeekOfTerm; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTermStartAndEnd", function() { return getTermStartAndEnd; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSchoolMoment", function() { return getSchoolMoment; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addYear", function() { return addYear; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "nextAcademicYear", function() { return nextAcademicYear; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "prevAcademicYear", function() { return prevAcademicYear; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_1__);


function getFirstAndLastWeekOfTerm(term) {
    return term === 'AT' ?
        [32, 51] :
        [1, 25];
}
function getTermStartAndEnd(now) {
    return now.month() >= 6 ? // 6 = July in JS Dates and in moment as well!
        [moment__WEBPACK_IMPORTED_MODULE_1___default()(new Date(now.year(), 7, 1)), moment__WEBPACK_IMPORTED_MODULE_1___default()(new Date(now.year(), 11, 31))] : // aug1 - dec31
        [moment__WEBPACK_IMPORTED_MODULE_1___default()(new Date(now.year(), 0, 1)), moment__WEBPACK_IMPORTED_MODULE_1___default()(new Date(now.year(), 6, 31))]; // jan1 - july31
}
function getSchoolMoment(m) {
    var thisYear = m.year();
    var isAutumn = m.month() >= 6; // determine 
    var _a = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](isAutumn ?
        [thisYear, thisYear + 1] :
        [thisYear - 1, thisYear], 2), autumnYear = _a[0], springYear = _a[1];
    var academicYear = '' + autumnYear + '/' + springYear;
    var term = isAutumn ? 'AT' : 'ST';
    var week = m.week();
    return { academicYear: academicYear, term: term, week: week };
}
function addYear(aYear, numYearsToAdd) {
    return aYear.split('/')
        .map(function (yearStr) { return parseInt(yearStr) + numYearsToAdd; })
        .map(function (year) { return '' + year; })
        .join('/');
}
function nextAcademicYear(aYear) {
    return addYear(aYear, 1);
}
function prevAcademicYear(aYear) {
    return addYear(aYear, -1);
}


/***/ }),

/***/ "./src/utils/school-term.ts":
/*!**********************************!*\
  !*** ./src/utils/school-term.ts ***!
  \**********************************/
/*! exports provided: SchoolTerm */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SchoolTerm", function() { return SchoolTerm; });
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _school_moment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./school-moment */ "./src/utils/school-moment.ts");


function isSchoolMoment(obj) {
    return 'academicYear' in obj;
}
var SchoolTerm = /** @class */ (function () {
    function SchoolTerm(dateOrSchoolMoment) {
        var schoolMoment = isSchoolMoment(dateOrSchoolMoment) ?
            dateOrSchoolMoment : Object(_school_moment__WEBPACK_IMPORTED_MODULE_1__["getSchoolMoment"])(moment__WEBPACK_IMPORTED_MODULE_0___default()(dateOrSchoolMoment));
        this.academicYear = schoolMoment.academicYear;
        this.term = schoolMoment.term;
    }
    Object.defineProperty(SchoolTerm.prototype, "year", {
        get: function () {
            return parseInt(this.academicYear
                .split('/')[this.term === 'AT' ? 0 : 1]);
        },
        enumerable: true,
        configurable: true
    });
    SchoolTerm.prototype.nextTerm = function () {
        return new SchoolTerm(this.term === 'AT' ?
            {
                term: 'ST',
                academicYear: this.academicYear
            } :
            {
                term: 'AT',
                academicYear: Object(_school_moment__WEBPACK_IMPORTED_MODULE_1__["addYear"])(this.academicYear, 1)
            });
    };
    SchoolTerm.prototype.prevTerm = function () {
        return new SchoolTerm(this.term === 'AT' ?
            {
                term: 'ST',
                academicYear: Object(_school_moment__WEBPACK_IMPORTED_MODULE_1__["addYear"])(this.academicYear, -1)
            } :
            {
                term: 'AT',
                academicYear: this.academicYear
            });
    };
    SchoolTerm.prototype.toLocaleString = function (intl, shortYear) {
        var year = this.term === 'AT' ?
            this.academicYear.split('/')[0] :
            this.academicYear.split('/')[1];
        if (shortYear)
            year = year.substr(2);
        return this.term === 'AT' ? intl.formatMessage({ id: 'termplanner.secondTerm', defaultMessage: 'HT {year}' }, { year: year }) :
            intl.formatMessage({ id: 'termplanner.firstTerm', defaultMessage: 'VT {year}' }, { year: year });
    };
    return SchoolTerm;
}());



/***/ }),

/***/ "./src/utils/utils.ts":
/*!****************************!*\
  !*** ./src/utils/utils.ts ***!
  \****************************/
/*! exports provided: capitalizeFirst, extend, clone, flatten, compareProp, compareProps, L, TC, dateTimeReviver, showInfo, showError, maxLength, arrayToLookup, arrayToMap, cherryPickProps, distinct, shallowEquals */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "capitalizeFirst", function() { return capitalizeFirst; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "extend", function() { return extend; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clone", function() { return clone; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "flatten", function() { return flatten; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "compareProp", function() { return compareProp; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "compareProps", function() { return compareProps; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "L", function() { return L; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TC", function() { return TC; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dateTimeReviver", function() { return dateTimeReviver; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "showInfo", function() { return showInfo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "showError", function() { return showError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "maxLength", function() { return maxLength; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "arrayToLookup", function() { return arrayToLookup; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "arrayToMap", function() { return arrayToMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cherryPickProps", function() { return cherryPickProps; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "distinct", function() { return distinct; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shallowEquals", function() { return shallowEquals; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

function capitalizeFirst(str) {
    for (var i = 0, l = str.length; i < l; ++i) {
        if (str.charCodeAt(i) < 0x2000) {
            return str.substr(0, i) + str[i].toLocaleUpperCase() + str.substr(i + 1);
        }
    }
    return str;
}
function extend(obj, extension) {
    if (typeof extension !== 'object')
        return obj;
    Object.keys(extension).forEach(function (key) {
        obj[key] = extension[key];
    });
    return obj;
}
function clone(obj, extension) {
    var clone = {};
    Object.getOwnPropertyNames(obj).forEach(function (key) {
        Object.defineProperty(clone, key, Object.getOwnPropertyDescriptor(obj, key));
    });
    if (extension)
        extend(clone, extension);
    return clone;
}
var concat = [].concat;
function flatten(a) {
    return concat.apply([], a);
}
function compareProp(prop) {
    return function (a, b) {
        var aProp = a[prop], bProp = b[prop];
        return aProp > bProp ? 1 : aProp < bProp ? -1 : 0;
    };
}
function compareProps(props, locales, options) {
    props = Array.isArray(props) ? props : [props];
    var localeCompare = function (a, b) {
        return typeof a === 'string' ?
            a.localeCompare(b, locales, options) :
            a < b ? -1 : a > b ? 1 : 0;
    };
    function cmpPart(a, b, firstPart, rest) {
        var firstA = a[firstPart];
        if (firstA == null)
            return -1;
        var firstB = b[firstPart];
        if (firstB == null)
            return 1;
        return rest.length === 0 ?
            localeCompare(firstA, firstB) :
            cmpPart(firstA, firstB, rest[0], rest.slice(1));
    }
    return props
        .map(function (prop) { return prop.split('.'); })
        .map(function (_a) {
        var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](_a), firstPart = _b[0], rest = _b.slice(1);
        return function (a, b) { return cmpPart(a, b, firstPart, rest); };
    })
        .reduce(function (cmp1, cmp2) {
        return function (a, b) { return cmp1(a, b) || cmp2(a, b); };
    });
}
function L(text) {
    var args = [];
    for (var _i = 1; _i < arguments.length; _i++) {
        args[_i - 1] = arguments[_i];
    }
    var first = text[0];
    return buildMessage(text, args);
}
function buildMessage(text, args) {
    var rv = text[0];
    for (var i = 1, l = text.length; i < l; ++i) {
        rv += args[i - 1] + text[i];
    }
    return rv;
}
var TC = /** @class */ (function () {
    function TC(template) {
        extend(this, template);
    }
    return TC;
}());

function dateTimeReviver(key, value) {
    var a;
    if (typeof value === 'string') {
        a = /\/Date\((\d*)\)\//.exec(value);
        if (a) {
            return new Date(+a[1]);
        }
    }
    return value;
}
//let infoSerial = 1;
function showInfo(msg) {
    var event = new CustomEvent('info', { 'detail': msg });
    window.dispatchEvent(event);
}
function showError(errMsg) {
    var msg = typeof errMsg === 'string' ? errMsg : errMsg.message;
    var event = new CustomEvent('customerror', { 'detail': msg });
    console.error(errMsg);
    window.dispatchEvent(event);
}
function maxLength(str, maxLen) {
    return str.length > maxLen ?
        str.substr(0, maxLen - 3) + "..." :
        str;
}
function arrayToLookup(a, keyAccessor) {
    var result = {};
    for (var i = 0, l = a.length; i < l; ++i) {
        var item = a[i];
        var key = keyAccessor(item);
        var array = result[key];
        if (array)
            array.push(item);
        else
            result[key] = [item];
    }
    return result;
}
function arrayToMap(a, keyAccessor) {
    var result = {};
    for (var i = 0, l = a.length; i < l; ++i) {
        var item = a[i];
        var key = keyAccessor(item);
        result[key] = item;
    }
    return result;
}
function cherryPickProps(obj, propsToPick) {
    var e_1, _a;
    var result = {};
    try {
        for (var propsToPick_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](propsToPick), propsToPick_1_1 = propsToPick_1.next(); !propsToPick_1_1.done; propsToPick_1_1 = propsToPick_1.next()) {
            var param = propsToPick_1_1.value;
            if (param in obj)
                result[param] = obj[param];
        }
    }
    catch (e_1_1) { e_1 = { error: e_1_1 }; }
    finally {
        try {
            if (propsToPick_1_1 && !propsToPick_1_1.done && (_a = propsToPick_1.return)) _a.call(propsToPick_1);
        }
        finally { if (e_1) throw e_1.error; }
    }
    return result;
}
function distinct(a, keyAccessor) {
    var map = arrayToMap(a, keyAccessor || (function (x) { return x; }));
    return Object.keys(map).map(function (key) { return map[key]; });
}
function shallowEquals(a, b) {
    if (a === b)
        return true;
    if (!a || !b)
        return false;
    if (typeof a !== 'object' || typeof b !== 'object')
        return false;
    var keysA = Object.keys(a);
    var keysB = Object.keys(b);
    if (keysA.length !== keysB.length)
        return false;
    for (var i = 0, l = keysA.length; i < l; ++i) {
        var key = keysA[i];
        if (keysB[i] !== key)
            return false;
        if (a[key] !== b[key])
            return false;
    }
    return true;
}


/***/ }),

/***/ "./src/utils/weekutil.ts":
/*!*******************************!*\
  !*** ./src/utils/weekutil.ts ***!
  \*******************************/
/*! exports provided: KEDWeek, getAdjustedWeek */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KEDWeek", function() { return KEDWeek; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getAdjustedWeek", function() { return getAdjustedWeek; });
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__);

function KEDWeek(year, week) {
    var m = moment__WEBPACK_IMPORTED_MODULE_0___default()(new Date(year, 1, 1)).week(week);
    var res = {
        year: year,
        week: week,
        notBefore: m.clone().startOf('week').add(-2, 'days').toDate().getTime(),
        notAfter: m.clone().startOf('week').add(5, 'days').toDate().getTime()
    };
    return res;
}
function getAdjustedWeek(m) {
    var clone = m.clone();
    return m.weekday() >= 5 ? // Lrdag 00:00 / Sndag 00:00?
        m.week() + 1 : // Tillhr nsta vecka
        m.week();
}
/*export function getWeekLimits (m: Moment) {
  const clonedSwedish = m.clone().locale('sv');
  const limits = {
    notBefore: clonedSwedish.startOf('week').add(-2, 'days'),
    notAfter: clonedSwedish.startOf('week').add(5, 'days')
  };
}
*/


/***/ }),

/***/ 0:
/*!*****************************************!*\
  !*** ../locale-data/index.js (ignored) ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ 1:
/*!*******************************!*\
  !*** ./lib/locales (ignored) ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ 2:
/*!*******************************!*\
  !*** ./lib/locales (ignored) ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ "jquery":
/*!*************************!*\
  !*** external "jQuery" ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = jQuery;

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "React" ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = React;

/***/ }),

/***/ "react-dom":
/*!***************************!*\
  !*** external "ReactDOM" ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ReactDOM;

/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9jbGllbnQuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9jbGllbnR3ZWIuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLWNsaWVudC13ZWIvYmVhcmVyLXN0b3JhZ2Utc2Vzc2lvbnN0b3JhZ2UuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLWNsaWVudC13ZWIvaGFzaC1yZXN0b3Jlci5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtY2xpZW50LXdlYi9pbmRleC5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtY2xpZW50L2FjY2Vzcy1jb250cm9sLmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9rZWQtYmFja2VuZC1jbGllbnQvaHR0cC1lcnJvci5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtY2xpZW50L2luZGV4LmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9rZWQtYmFja2VuZC1jbGllbnQva2VkLWJlYXJlci1wcm92aWRlci5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtY2xpZW50L3Jlc3RjbGllbnQuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLWNsaWVudC91dGlscy5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtcmVwby9jYWNoZS1idXN0LmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9rZWQtYmFja2VuZC1yZXBvL2RlbHRhLWNvbGxlY3Rpb24vYXBwbHktbXV0YXRpb25zLW9uLWRlbHRhcy5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtcmVwby9kZWx0YS1jb2xsZWN0aW9uL2RlbHRhLWNhY2hlLmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9rZWQtYmFja2VuZC1yZXBvL2RlbHRhLWNvbGxlY3Rpb24vZGVsdGEtY29sbGVjdGlvbi5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtcmVwby9kZWx0YS1tZXJnZS5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtcmVwby9pbmRleC5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtcmVwby9rZWRiYWNrZW5kLWNvbGxlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLXJlcG8va2VkYmFja2VuZC1xdWVyeS5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtcmVwby9rZWRiYWNrZW5kLXJlcG8uanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLXJlcG8va2VkYmFja2VuZC1zdWJzY3JpcHRpb24uanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLXJlcG8va2VkYmFja2VuZC13cml0ZXIuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLXJlcG8vbXV0YXRpb24tcXVldWUuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLXJlcG8vcXVlcnktc2V0LmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9rZWQtYmFja2VuZC1yZXBvL3V0aWxzLmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9rZWQtbW9kZWwtbWlncmF0b3IvaW5kZXguanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1tb2RlbC1taWdyYXRvci9taWdyYXRlLWNvdXJzZS5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLW1vZGVsLW1pZ3JhdG9yL21pZ3JhdGUtdGFzay5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLW1vZGVsLW1pZ3JhdG9yL21pZ3JhdGUuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL29ic2VydmFibGUvY29sbGVjdGlvbi5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMvb2JzZXJ2YWJsZS9lbWl0dGVyLmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9vYnNlcnZhYmxlL2ZpYmVyLWNvbnRleHQuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL29ic2VydmFibGUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL29ic2VydmFibGUvbWFwLmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9vYnNlcnZhYmxlL21peGluLmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9vYnNlcnZhYmxlL29ic2VydmFibGUuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL29ic2VydmFibGUvdmFsdWUuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9vYnNlcnZhYmxlLmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvcmVwby5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9ub2RlX21vZHVsZXMvbW9tZW50L2xvY2FsZSBzeW5jIHN2fGVuIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9hY2Nlc3MtY29udHJvbC9nZXQtdXNlci1jbGFpbXMudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2FjY2Vzcy1jb250cm9sL2luZGV4LnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9hcGlzL2J1dHRvbnMudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9hcGlzL2Vkc2NsaWVudC50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvYXBpcy9nb29nbGUtcGlja2VyLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NhbGVuZGFyL2NvdXJzZS1uYW1lLXRvLWNzcy1jbGFzcy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jaGFydHMvY2hhcnRzLXV0aWxzLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NoYXJ0cy9nb2FsLXByb2dyZXNzLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jaGFydHMvcHJvZ3Jlc3MudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL2NvbW1vbi9iYW5uZXIudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL2NvbW1vbi9kaWFsb2ctY29udGVudC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3MvY29tbW9uL2RpYWxvZy1jb250ZXh0LnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL2NvbW1vbi9mdXR1cmUtYWJpbGl0aWVzLWJveC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3MvY29tbW9uL3NlbGVjdC13b3JkLWJhbmsudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL2NvbW1vbi90d28tY29sdW1ucy1wYWdlLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy9sb2dpYy9jaGFuZ2Utc29ydC1vcmRlci50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy9sb2dpYy9jb21wdXRlLXRhc2stdGFncy1hbmQtc3ViamVjdC50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy9sb2dpYy9jb3Vyc2UtaW5zdGFuY2UtdGFncy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy9sb2dpYy9nZXQtY291cnNlLWNvZGVzLWZyb20tdGFncy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy9sb2dpYy9nZXQtZHJhZnQtaWQudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3MvbG9naWMvZ2V0LXN0YW5kYXJkLWNvdXJzZXMtd2l0aC1vcmRlcmVkLXJlcXVpcmVtZW50cy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy9sb2dpYy9pcy1lbXBsb3llZS50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy9sb2dpYy9pcy1rZWQtc3RhZmYudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3MvbG9naWMvbGlzdC1jb3Vyc2UtaW5zdGFuY2VzLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL2xvZ2ljL29yZGVyZWQtcmVxdWlyZW1lbnRzLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL2xvZ2ljL3B1Ymxpc2gtY291cnNlLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL2xvZ2ljL3Rhc2stb3JkZXIudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci9hZGQtY29udGVudC1idXR0b24udHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvYWRkLXRhYi1idXR0b24udHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvY2xpY2thYmxlLXNjaG9vbC1kaXYudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvY291cnNlLWFyZWEudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvY291cnNlLWNvbnRlbnRzL2FkZC10YXNrLWJ1dHRvbi50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci9jb3Vyc2UtY29udGVudHMvY29udGVudC1ib3gudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvY291cnNlLWNvbnRlbnRzL2NvdXJzZS1jb250ZW50LXR5cGVzLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvY291cnNlLWNvbnRlbnRzL2VtYmVkZGVkLWh0bWwudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvY291cnNlLWNvbnRlbnRzL2luZGV4LnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvY291cnNlLWNvbnRlbnRzL2xlYXJuaW5nLXRhc2tzLWNvbnRlbnQtYm94LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL2NvdXJzZS1jb250ZW50cy9sZWFybmluZy10YXNrcy1zZXR0aW5ncy50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci9jb3Vyc2UtY29udGVudHMvbGVhcm5pbmctdGFza3Mtd2l0aC1jb21tb24tZ29hbHMudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvY291cnNlLWNvbnRlbnRzL2xlYXJuaW5nLXRhc2tzLXdpdGgtc2VwYXJhdGUtZ29hbHMudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvY291cnNlLWNvbnRlbnRzL3Jlc291cmNlLWxpc3Qtdmlldy50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci9jb3Vyc2UtY29udGVudHMvcmVzb3VyY2UtbGlzdC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci9jb3Vyc2UtY29udGVudHMvcmljaC10ZXh0LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL2NvdXJzZS1jb250ZW50cy93b3JkLWJhbmstY29udGVudC1ib3gudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvY291cnNlLWNvbnRlbnRzL3dvcmQtYmFuay1jb250ZW50LXNldHRpbmdzLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL2NvdXJzZS10YWItYXJlYS50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci9jb3Vyc2UtdGFiLWNvbnRlbnQtYm94LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL2NvdXJzZS10YWIvdGFiLWNsYXNzZXMudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci9jb3Vyc2Utdmlld2VyLXBhZ2UudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvZWRpdG9yLWZvb3Rlci1idXR0b25zLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL2luZGV4LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL2xpc3QtY291cnNlcy9pbmRleC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci9saXN0LWNvdXJzZXMvc3R1ZGVudC1jb3Vyc2VzLWJveC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci9yZWRpcmVjdC10by1zdGVwLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL3RhYi1zZXR0aW5ncy1hZG1pbi50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci90YWItc2V0dGluZ3MtcmVxdWlyZW1lbnRzLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL3RhYi1zZXR0aW5ncy50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci90YXNrL2xlZnQtY29sdW1uL2VkaXQtcmVxdWlyZW1lbnRzLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL3Rhc2svcmlnaHQtY29sdW1uL2Jhc2ljLWVkaXRhYmxlLXRhc2stZmllbGRzLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL3Rhc2svcmlnaHQtY29sdW1uL2VkaXQtdGFzay1mb3JtLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL3Rhc2svcmlnaHQtY29sdW1uL2ludHJvZHVjdGlvbi10ZXh0LWVkaXRvci50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci90YXNrL3JpZ2h0LWNvbHVtbi90YXNrLWRlc2NyaXB0aW9uLWVkaXRvci50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci90YXNrL3JpZ2h0LWNvbHVtbi90YXNrLWVtYmVkZGVkLWh0bWwtZWRpdG9yLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL3Rhc2svcmlnaHQtY29sdW1uL3Rhc2stZm9vdGVyLWJ1dHRvbnMudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvdGFzay9yaWdodC1jb2x1bW4vdGFzay13b3JraW5nLXByb2NlZHVyZS1lZGl0b3IudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvdGFzay90YXNrLWVkaXRvci50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci90YXNrL3RleHRzLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvdGFzay92aWV3ZXIvdGFzay12aWV3ZXItcGFnZS50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci90YXNrL3ZpZXdlci90YXNrLXZpZXdlci50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci92ZXJzaW9uLWhpc3RvcnkvZGVsdGEtdmlldy50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci92ZXJzaW9uLWhpc3RvcnkvZGVsdGFkb2MtYm94LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL3ZlcnNpb24taGlzdG9yeS9kZWx0YWxpbmstYm94LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL3ZlcnNpb24taGlzdG9yeS9pbmRleC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci92ZXJzaW9uLWhpc3RvcnkvbW9kZWwtZnJpZW5kbHktbmFtZXMudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci92ZXJzaW9uLWhpc3RvcnkvdmVyc2lvbi1oaXN0b3J5LWJveC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIvY291cnNlcy9idXNpbmVzcy1sb2dpYy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci9tb2RhbC1wYWdlcy9lZGl0LXJlc291cmNlLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci9tb2RhbC1wYWdlcy9lZGl0LXRhc2svdGFzay1taWdyYXRpb24tYm94LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci9zdWItY29tcG9uZW50cy9lbGxpcHNpcy1sb2FkZXIudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyL3N1Yi1jb21wb25lbnRzL2tub3dsZWRnZS1tYXRyaXgudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyL3N1Yi1jb21wb25lbnRzL3JlbW92ZS1pdGVtLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci9zdWItY29tcG9uZW50cy9zZWxlY3QtcmVsYXRlZC1kb2NzLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci9zdWItY29tcG9uZW50cy9zcGlubmVyLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci91dGlscy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2Utdmlld2VyL2NvdXJzZS1wYWdlL3Rhc2stYXNzaWdubWVudHMudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS12aWV3ZXIvY291cnNlLXBhZ2UvdXJrdW5kLXV0aWxzLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS12aWV3ZXIvc3ViY29tcG9uZW50cy9hYmlsaXRpZXMtYm94LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2Utdmlld2VyL3N1YmNvbXBvbmVudHMvY2VudHJhbC1jb250ZW50LWJveC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLXZpZXdlci9zdWJjb21wb25lbnRzL2NvbmZpcm1hdGlvbi50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLXZpZXdlci9zdWJjb21wb25lbnRzL2tub3dsZWRnZS1yZXF1aXJlbWVudHMtdGFibGUudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS12aWV3ZXIvc3ViY29tcG9uZW50cy90YXNrLWxpc3QudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy9MYW5ndWFnZUNvbnRleHQudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy9TZXR1cExhbmd1YWdlSW50bC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS1jb21wb25lbnRzL2FsaWduLWhvcml6b250YWwudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy9jaGVja2xpc3QudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy9kaWFsb2dzLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy91dGlsaXR5LWNvbXBvbmVudHMvZm9ybS1maWVsZC10ZXh0LWlucHV0LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy91dGlsaXR5LWNvbXBvbmVudHMvZm9ybS1maWVsZC10ZXh0YXJlYS50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS1jb21wb25lbnRzL2Zvcm0tZmllbGQudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy9ob3Jpem9udGFsLWl0ZW0udHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy9sYXp5LWNvbnRlbnQudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy9saXZlLXF1ZXJ5LXZpZXcudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy9sb2FkaW5nLWluZGljYXRvci50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS1jb21wb25lbnRzL29wZW4tY2xvc2UtYm94LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy91dGlsaXR5LWNvbXBvbmVudHMvc29ydGFibGUtdGFzay1saXN0LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy91dGlsaXR5LWNvbXBvbmVudHMvd3lzaXd5Zy9hY3Rpb25zLXN2LnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy93eXNpd3lnL2FjdGlvbnMudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS1jb21wb25lbnRzL3d5c2l3eWcvZXhlYy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy91dGlsaXR5LWNvbXBvbmVudHMvd3lzaXd5Zy9pbWFnZS1lZGl0LWFjdGlvbnMudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS1jb21wb25lbnRzL3d5c2l3eWcvaW5kZXgudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy93eXNpd3lnL3Jlc3RvcmUtc2VsZWN0aW9uLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy93eXNpd3lnL3dhc2gtaHRtbC50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy93ZWVrcGxhbm5lci9hZGQtY3VzdG9tLWdvYWwudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3dlZWtwbGFubmVyL2FkZC1jdXN0b20tdGFzay50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvd2Vla3BsYW5uZXIvYWRkLW9yLWVkaXQtc3ViLXRhc2sudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3dlZWtwbGFubmVyL2VkaXQtdXNlci10YXNrLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy93ZWVrcGxhbm5lci9nZXQtdGFzay10eXBlLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3dlZWtwbGFubmVyL3JlZmluZXIudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvd2Vla3BsYW5uZXIvdXNlci10YXNrcy1ib3gudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3dlZWtwbGFubmVyL3dlZWtwbGFubmVyLXBlcnNpc3RlZC1zdGF0ZS50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy93ZWVrcGxhbm5lci93ZWVrcGxhbm5lci50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbnRyYWN0cy9rZWQtbW9kZWxzLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9lbGVtZW50cy9LRURBcHBTdWJqZWN0UGxhbm5lci9hcHAuc3AuY2xpZW50LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvZWxlbWVudHMvS0VEQXBwU3ViamVjdFBsYW5uZXIvd2VicGFjay1lbnRyeS50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvZmVhdHVyZXMvZmVhdHVyZXMudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2ZlYXR1cmVzL2luZGV4LnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9nbG9iYWwtc2V0dGVycy9jb25maWd1cmUudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2dsb2JhbC1zZXR0ZXJzL3NldC1hbGwudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2dsb2JhbC1zZXR0ZXJzL3NldC1iZWFyZXItcHJvdmlkZXJzLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9nbG9iYWwtc2V0dGVycy9zZXQtZWRzLWNsaWVudC50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvZ2xvYmFsLXNldHRlcnMvc2V0LWtlZC1iYWNrZW5kLWNsaWVudC50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvZ2xvYmFscy9LRUQuY2ZnLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9nbG9iYWxzL0tFRC5lbnYudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2dsb2JhbHMvS0VELnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9nbG9iYWxzL2RiLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9nbG9iYWxzL2tlZC50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvZ2xvYmFscy9tb21lbnQtc3YtbG9jYWxlLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9yZXBvcy9rZWQtcmVwby50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvcmVwb3MvcmVwby50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvcmVwb3MvdXNlci10YXNrcy1yZXBvLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy91dGlscy9lcnJvci1zdWNjZXNzLWZlZWRiYWNrLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvdXRpbHMva2VlcC1zZXNzaW9uLWFsaXZlLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy91dGlscy9tYWtlLXN1c3BlbnNlLWFwaS50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvdXRpbHMvcGVuZGluZy1qb2IudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3V0aWxzL3F1ZXJ5LXN0cmluZy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvdXRpbHMvc2Nob29sLW1vbWVudC50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvdXRpbHMvc2Nob29sLXRlcm0udHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3V0aWxzL3V0aWxzLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy91dGlscy93ZWVrdXRpbC50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi4vbG9jYWxlLWRhdGEvaW5kZXguanMgKGlnbm9yZWQpIiwid2VicGFjazovL1tuYW1lXS8uL2xpYi9sb2NhbGVzIChpZ25vcmVkKSIsIndlYnBhY2s6Ly9bbmFtZV0vLi9saWIvbG9jYWxlcyAoaWdub3JlZCk/YTE3NyIsIndlYnBhY2s6Ly9bbmFtZV0vZXh0ZXJuYWwgXCJqUXVlcnlcIiIsIndlYnBhY2s6Ly9bbmFtZV0vZXh0ZXJuYWwgXCJSZWFjdFwiIiwid2VicGFjazovL1tuYW1lXS9leHRlcm5hbCBcIlJlYWN0RE9NXCIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGdCQUFRLG9CQUFvQjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUFpQiw0QkFBNEI7QUFDN0M7QUFDQTtBQUNBLDBCQUFrQiwyQkFBMkI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7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QUNBQSx3Qjs7Ozs7Ozs7Ozs7QUNBQSx1Qjs7Ozs7Ozs7Ozs7QUNBQSwwQiIsImZpbGUiOiJrZWRhcHBzcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIGluc3RhbGwgYSBKU09OUCBjYWxsYmFjayBmb3IgY2h1bmsgbG9hZGluZ1xuIFx0ZnVuY3Rpb24gd2VicGFja0pzb25wQ2FsbGJhY2soZGF0YSkge1xuIFx0XHR2YXIgY2h1bmtJZHMgPSBkYXRhWzBdO1xuIFx0XHR2YXIgbW9yZU1vZHVsZXMgPSBkYXRhWzFdO1xuIFx0XHR2YXIgZXhlY3V0ZU1vZHVsZXMgPSBkYXRhWzJdO1xuXG4gXHRcdC8vIGFkZCBcIm1vcmVNb2R1bGVzXCIgdG8gdGhlIG1vZHVsZXMgb2JqZWN0LFxuIFx0XHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcbiBcdFx0dmFyIG1vZHVsZUlkLCBjaHVua0lkLCBpID0gMCwgcmVzb2x2ZXMgPSBbXTtcbiBcdFx0Zm9yKDtpIDwgY2h1bmtJZHMubGVuZ3RoOyBpKyspIHtcbiBcdFx0XHRjaHVua0lkID0gY2h1bmtJZHNbaV07XG4gXHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKSB7XG4gXHRcdFx0XHRyZXNvbHZlcy5wdXNoKGluc3RhbGxlZENodW5rc1tjaHVua0lkXVswXSk7XG4gXHRcdFx0fVxuIFx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IDA7XG4gXHRcdH1cbiBcdFx0Zm9yKG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG4gXHRcdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcbiBcdFx0XHRcdG1vZHVsZXNbbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuIFx0XHRcdH1cbiBcdFx0fVxuIFx0XHRpZihwYXJlbnRKc29ucEZ1bmN0aW9uKSBwYXJlbnRKc29ucEZ1bmN0aW9uKGRhdGEpO1xuXG4gXHRcdHdoaWxlKHJlc29sdmVzLmxlbmd0aCkge1xuIFx0XHRcdHJlc29sdmVzLnNoaWZ0KCkoKTtcbiBcdFx0fVxuXG4gXHRcdC8vIGFkZCBlbnRyeSBtb2R1bGVzIGZyb20gbG9hZGVkIGNodW5rIHRvIGRlZmVycmVkIGxpc3RcbiBcdFx0ZGVmZXJyZWRNb2R1bGVzLnB1c2guYXBwbHkoZGVmZXJyZWRNb2R1bGVzLCBleGVjdXRlTW9kdWxlcyB8fCBbXSk7XG5cbiBcdFx0Ly8gcnVuIGRlZmVycmVkIG1vZHVsZXMgd2hlbiBhbGwgY2h1bmtzIHJlYWR5XG4gXHRcdHJldHVybiBjaGVja0RlZmVycmVkTW9kdWxlcygpO1xuIFx0fTtcbiBcdGZ1bmN0aW9uIGNoZWNrRGVmZXJyZWRNb2R1bGVzKCkge1xuIFx0XHR2YXIgcmVzdWx0O1xuIFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgZGVmZXJyZWRNb2R1bGVzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0dmFyIGRlZmVycmVkTW9kdWxlID0gZGVmZXJyZWRNb2R1bGVzW2ldO1xuIFx0XHRcdHZhciBmdWxmaWxsZWQgPSB0cnVlO1xuIFx0XHRcdGZvcih2YXIgaiA9IDE7IGogPCBkZWZlcnJlZE1vZHVsZS5sZW5ndGg7IGorKykge1xuIFx0XHRcdFx0dmFyIGRlcElkID0gZGVmZXJyZWRNb2R1bGVbal07XG4gXHRcdFx0XHRpZihpbnN0YWxsZWRDaHVua3NbZGVwSWRdICE9PSAwKSBmdWxmaWxsZWQgPSBmYWxzZTtcbiBcdFx0XHR9XG4gXHRcdFx0aWYoZnVsZmlsbGVkKSB7XG4gXHRcdFx0XHRkZWZlcnJlZE1vZHVsZXMuc3BsaWNlKGktLSwgMSk7XG4gXHRcdFx0XHRyZXN1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IGRlZmVycmVkTW9kdWxlWzBdKTtcbiBcdFx0XHR9XG4gXHRcdH1cblxuIFx0XHRyZXR1cm4gcmVzdWx0O1xuIFx0fVxuXG4gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuIFx0Ly8gdW5kZWZpbmVkID0gY2h1bmsgbm90IGxvYWRlZCwgbnVsbCA9IGNodW5rIHByZWxvYWRlZC9wcmVmZXRjaGVkXG4gXHQvLyBQcm9taXNlID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxuIFx0dmFyIGluc3RhbGxlZENodW5rcyA9IHtcbiBcdFx0XCJrZWRhcHBzcFwiOiAwXG4gXHR9O1xuXG4gXHR2YXIgZGVmZXJyZWRNb2R1bGVzID0gW107XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdHZhciBqc29ucEFycmF5ID0gd2luZG93W1wid2VicGFja0pzb25wX25hbWVfXCJdID0gd2luZG93W1wid2VicGFja0pzb25wX25hbWVfXCJdIHx8IFtdO1xuIFx0dmFyIG9sZEpzb25wRnVuY3Rpb24gPSBqc29ucEFycmF5LnB1c2guYmluZChqc29ucEFycmF5KTtcbiBcdGpzb25wQXJyYXkucHVzaCA9IHdlYnBhY2tKc29ucENhbGxiYWNrO1xuIFx0anNvbnBBcnJheSA9IGpzb25wQXJyYXkuc2xpY2UoKTtcbiBcdGZvcih2YXIgaSA9IDA7IGkgPCBqc29ucEFycmF5Lmxlbmd0aDsgaSsrKSB3ZWJwYWNrSnNvbnBDYWxsYmFjayhqc29ucEFycmF5W2ldKTtcbiBcdHZhciBwYXJlbnRKc29ucEZ1bmN0aW9uID0gb2xkSnNvbnBGdW5jdGlvbjtcblxuXG4gXHQvLyBhZGQgZW50cnkgbW9kdWxlIHRvIGRlZmVycmVkIGxpc3RcbiBcdGRlZmVycmVkTW9kdWxlcy5wdXNoKFtcIi4vc3JjL2VsZW1lbnRzL0tFREFwcFN1YmplY3RQbGFubmVyL3dlYnBhY2stZW50cnkudHNcIixcInZlbmRvcnNcIl0pO1xuIFx0Ly8gcnVuIGRlZmVycmVkIG1vZHVsZXMgd2hlbiByZWFkeVxuIFx0cmV0dXJuIGNoZWNrRGVmZXJyZWRNb2R1bGVzKCk7XG4iLCJleHBvcnQgKiBmcm9tICcuL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtY2xpZW50JzsiLCJleHBvcnQgKiBmcm9tICcuL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtY2xpZW50LXdlYic7IiwidmFyIEJlYXJlclN0b3JhZ2VTZXNzaW9uU3RvcmFnZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEJlYXJlclN0b3JhZ2VTZXNzaW9uU3RvcmFnZSgpIHtcclxuICAgIH1cclxuICAgIEJlYXJlclN0b3JhZ2VTZXNzaW9uU3RvcmFnZS5wcm90b3R5cGUuc2F2ZSA9IGZ1bmN0aW9uIChpZCwgdG9rZW5JbmZvKSB7XHJcbiAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShcImJlYXJlci1cIiArIGlkLCBKU09OLnN0cmluZ2lmeSh0b2tlbkluZm8pKTtcclxuICAgIH07XHJcbiAgICBCZWFyZXJTdG9yYWdlU2Vzc2lvblN0b3JhZ2UucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB2YXIganNvbiA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oXCJiZWFyZXItXCIgKyBpZCk7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoanNvbiA/IEpTT04ucGFyc2UoanNvbikgOiB7IHRva2VuOiBudWxsLCBleHBpcmVzOiAwIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7IHRva2VuOiBudWxsLCBleHBpcmVzOiAwIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gQmVhcmVyU3RvcmFnZVNlc3Npb25TdG9yYWdlO1xyXG59KCkpO1xyXG5leHBvcnQgeyBCZWFyZXJTdG9yYWdlU2Vzc2lvblN0b3JhZ2UgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmVhcmVyLXN0b3JhZ2Utc2Vzc2lvbnN0b3JhZ2UuanMubWFwIiwidmFyIHJlZGlySGFzaCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oXCJyZWRpci1oYXNoXCIpO1xyXG5pZiAocmVkaXJIYXNoKVxyXG4gICAgdHJ5IHtcclxuICAgICAgICB2YXIgX2EgPSBKU09OLnBhcnNlKHJlZGlySGFzaCksIHRpbWUgPSBfYS50aW1lLCBoYXNoID0gX2EuaGFzaDtcclxuICAgICAgICBpZiAodGltZSAmJiB0aW1lID4gRGF0ZS5ub3coKSAtIDYwMDAwKSB7XHJcbiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oXCJyZWRpci1oYXNoXCIpO1xyXG4gICAgICAgICAgICBsb2NhdGlvbi5oYXNoID0gaGFzaDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoXykgeyB9XHJcbmV4cG9ydCBmdW5jdGlvbiByZW1lbWJlckhhc2hMb2NhdGlvbigpIHtcclxuICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oXCJyZWRpci1oYXNoXCIsIEpTT04uc3RyaW5naWZ5KHsgdGltZTogRGF0ZS5ub3coKSwgaGFzaDogbG9jYXRpb24uaGFzaCB9KSk7XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGFzaC1yZXN0b3Jlci5qcy5tYXAiLCJpbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kQ2xpZW50LCBIdHRwRXJyb3IgfSBmcm9tICcuLi9rZWQtYmFja2VuZC1jbGllbnQnO1xyXG5pbXBvcnQgeyBCZWFyZXJTdG9yYWdlU2Vzc2lvblN0b3JhZ2UgfSBmcm9tIFwiLi9iZWFyZXItc3RvcmFnZS1zZXNzaW9uc3RvcmFnZVwiO1xyXG5pbXBvcnQgeyBhdm9pZFNpbXVsdGFub3VzQ2FsbHMgfSBmcm9tICcuLi9rZWQtYmFja2VuZC1jbGllbnQvdXRpbHMnO1xyXG5pbXBvcnQgeyBLZWRNb2RlbE1pZ3JhdG9yTWl4aW4gfSBmcm9tICcuLi9rZWQtbW9kZWwtbWlncmF0b3InO1xyXG5pbXBvcnQgJy4vaGFzaC1yZXN0b3Jlcic7XHJcbmltcG9ydCB7IHJlbWVtYmVySGFzaExvY2F0aW9uIH0gZnJvbSAnLi9oYXNoLXJlc3RvcmVyJztcclxuS2VkTW9kZWxNaWdyYXRvck1peGluKEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlKTtcclxuZXhwb3J0IHZhciBzdG9yYWdlID0gbmV3IEJlYXJlclN0b3JhZ2VTZXNzaW9uU3RvcmFnZSgpO1xyXG52YXIgdGltZU9mUGFnZUxvYWQgPSBEYXRlLm5vdygpO1xyXG52YXIgV2ViU2VydmVyQmVhcmVyUHJvdmlkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBXZWJTZXJ2ZXJCZWFyZXJQcm92aWRlcih0b2tlblBhdGgsIHRva2VuUmVzcG9uc2VNYXBwZXIsIHRva2VuSWQpIHtcclxuICAgICAgICB0aGlzLnRva2VuUGF0aCA9IHRva2VuUGF0aDtcclxuICAgICAgICB0aGlzLnRva2VuUmVzcG9uc2VNYXBwZXIgPSB0b2tlblJlc3BvbnNlTWFwcGVyO1xyXG4gICAgICAgIHRoaXMudG9rZW5JZCA9IHRva2VuSWQ7XHJcbiAgICAgICAgdGhpcy50b2tlbkluZm8gPSB7IHRva2VuOiBudWxsLCBleHBpcmVzOiAwIH07XHJcbiAgICAgICAgdGhpcy5nZXRCZWFyZXIgPSBhdm9pZFNpbXVsdGFub3VzQ2FsbHModGhpcy5nZXRCZWFyZXIuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5yZWZyZXNoQmVhcmVyID0gYXZvaWRTaW11bHRhbm91c0NhbGxzKHRoaXMucmVmcmVzaEJlYXJlci5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuICAgIFdlYlNlcnZlckJlYXJlclByb3ZpZGVyLnByb3RvdHlwZS5nZXRCZWFyZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBfYTtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnRva2VuSW5mby50b2tlbikgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy50b2tlbklkKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBzdG9yYWdlLmxvYWQodGhpcy50b2tlbklkKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50b2tlbkluZm8gPSBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gMjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHRoaXMudG9rZW5JbmZvLmV4cGlyZXMgPCBEYXRlLm5vdygpKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucmVmcmVzaEJlYXJlcigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSA0O1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMudG9rZW5JbmZvXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgV2ViU2VydmVyQmVhcmVyUHJvdmlkZXIucHJvdG90eXBlLnJlZnJlc2hCZWFyZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciByZXMsIF9hLCBfYiwgX2MsIF9kO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2UpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2UubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIGZldGNoKHRoaXMudG9rZW5QYXRoLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7IEFjY2VwdDogXCJ0ZXh0L3BsYWluOyBhcHBsaWNhdGlvbi9qc29uXCIgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZGlyZWN0OiAnbWFudWFsJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlOiAnbm8tY2FjaGUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlZGVudGlhbHM6IFwic2FtZS1vcmlnaW5cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMgPSBfZS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAzMDIgfHwgKCFyZXMuc3RhdHVzICYmIHJlcy50eXBlID09PSBcIm9wYXF1ZXJlZGlyZWN0XCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVc2VyIHNlc3Npb24gdGltZWQgb3V0IGFuZCBzZXJ2ZXIgd2FudHMgdG8gcmVkaXJlY3QgZW50aXJlIHBhZ2UgdG8gbG9naW4gcGFnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGltZSB0byByZWxvYWQgY3VycmVudCBwYWdlIHRvIGZvcmNlIGEgcmVkaXJlY3Qgb2YgdGhlIGVudGlyZSBwYWdlIGluc3RlYWQgZm9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBqdXN0IHJlZGlyZWN0aW5nIHRvIC9hcGkvdG9rZW4gb3Igd2hhdGV2ZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoRGF0ZS5ub3coKSAtIHRpbWVPZlBhZ2VMb2FkID4gNjAwMDApIHsgLy8gcHJvaGliaXQgZW5kbGVzcyBsb29wIG9mIHJlbG9hZGluZyBzZWxmLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2FudHNSZWRpcmVjdCA9IHRydWU7IC8vIFNvIHRoYXQgbGlzdGVuZXJzIHRvIG9uYmVmb3JldW5sb2FkIGNvdWxkIHNob3cgYWx0ZXJuYXRlIG1lc3NhZ2UuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJSZWRpcmVjdCB3YW50ZWQuIFJlbG9hZCBwYWdlLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1lbWJlckhhc2hMb2NhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEh0dHBFcnJvcigzMDIsIFwiUmVkaXJlY3RlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShyZXMuc3RhdHVzICE9IDIwMCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IEVycm9yLmJpbmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iID0gXCJIVFRQXCIgKyByZXMuc3RhdHVzICsgXCIgXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlcy50ZXh0KCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogdGhyb3cgbmV3IChfYS5hcHBseShFcnJvciwgW3ZvaWQgMCwgX2IgKyAoX2Uuc2VudCgpKV0pKSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2MgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZCA9IHRoaXMudG9rZW5SZXNwb25zZU1hcHBlcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzLnRleHQoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYy50b2tlbkluZm8gPSBfZC5hcHBseSh0aGlzLCBbX2Uuc2VudCgpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JhZ2Uuc2F2ZSh0aGlzLnRva2VuSWQsIHRoaXMudG9rZW5JbmZvKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMudG9rZW5JbmZvXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFdlYlNlcnZlckJlYXJlclByb3ZpZGVyO1xyXG59KCkpO1xyXG5leHBvcnQgeyBXZWJTZXJ2ZXJCZWFyZXJQcm92aWRlciB9O1xyXG5leHBvcnQgdmFyIGlzb21vcnBoaWMgPSB7IGZldGNoOiBmZXRjaC5iaW5kKHNlbGYpLCBidG9hOiBidG9hLmJpbmQoc2VsZikgfTtcclxudmFyIEtlZEJhY2tlbmRDbGllbnRXZWIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhLZWRCYWNrZW5kQ2xpZW50V2ViLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gS2VkQmFja2VuZENsaWVudFdlYihhcGlCYXNlVXJsLCBwcm92aWRlck9yVG9rZW5QYXRoLCBvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgYmVhcmVyUHJvdmlkZXIgPSB0eXBlb2YgcHJvdmlkZXJPclRva2VuUGF0aCAhPT0gJ3N0cmluZycgP1xyXG4gICAgICAgICAgICBwcm92aWRlck9yVG9rZW5QYXRoIDpcclxuICAgICAgICAgICAgbmV3IFdlYlNlcnZlckJlYXJlclByb3ZpZGVyKHByb3ZpZGVyT3JUb2tlblBhdGgsIChvcHRpb25zICYmIG9wdGlvbnMudG9rZW5SZXNwb25zZU1hcHBlcikgfHwgKGZ1bmN0aW9uICh4KSB7IHJldHVybiAoeyB0b2tlbjogeCwgZXhwaXJlczogRGF0ZS5ub3coKSArIDU5ICogNjAgKiA2MCB9KTsgfSksIG9wdGlvbnMgJiYgb3B0aW9ucy50b2tlbklkKTtcclxuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGlzb21vcnBoaWMsIGJlYXJlclByb3ZpZGVyLCBhcGlCYXNlVXJsKSB8fCB0aGlzO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIHJldHVybiBLZWRCYWNrZW5kQ2xpZW50V2ViO1xyXG59KEtlZEJhY2tlbmRDbGllbnQpKTtcclxuZXhwb3J0IHsgS2VkQmFja2VuZENsaWVudFdlYiB9O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJ2YXIgRG9jdW1lbnRBY2Nlc3MgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEb2N1bWVudEFjY2VzcyhhY2Nlc3NDbGFpbVR5cGUsIGFjY2Vzc0NsYWltVmFsdWUsIHJpZ2h0KSB7XHJcbiAgICAgICAgdGhpcy5hY2Nlc3NDbGFpbVR5cGUgPSBhY2Nlc3NDbGFpbVR5cGU7XHJcbiAgICAgICAgdGhpcy5hY2Nlc3NDbGFpbVZhbHVlID0gYWNjZXNzQ2xhaW1WYWx1ZTtcclxuICAgICAgICB0aGlzLnJpZ2h0ID0gcmlnaHQ7XHJcbiAgICB9XHJcbiAgICBEb2N1bWVudEFjY2Vzcy5mcm9tU3RyaW5nID0gZnVuY3Rpb24gKGFjKSB7XHJcbiAgICAgICAgaWYgKCFhYylcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgdmFyIHNwbGl0ID0gYWMuc3BsaXQoJzonKTtcclxuICAgICAgICBpZiAoc3BsaXQubGVuZ3RoIDwgMylcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBhY2Nlc3Mgc3RyaW5nOiBcIiArIGFjKTtcclxuICAgICAgICB2YXIgY2xhaW1UeXBlID0gRG9jdW1lbnRBY2Nlc3MudW5lc2NhcGUoc3BsaXRbMF0pO1xyXG4gICAgICAgIHZhciBjbGFpbVZhbHVlID0gRG9jdW1lbnRBY2Nlc3MudW5lc2NhcGUoc3BsaXRbMV0pO1xyXG4gICAgICAgIHZhciByaWdodCA9IHNwbGl0WzJdO1xyXG4gICAgICAgIGlmIChyaWdodCAhPT0gJ1InICYmIHJpZ2h0ICE9PSAnVycgJiYgcmlnaHQgIT09ICdTJylcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBhY2Nlc3Mgc3RyaW5nOiBcIiArIGFjKTtcclxuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50QWNjZXNzKGNsYWltVHlwZSwgY2xhaW1WYWx1ZSwgcmlnaHQpO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50QWNjZXNzLmVzY2FwZSA9IGZ1bmN0aW9uIChhY2Nlc3NDb21wb25lbnQpIHtcclxuICAgICAgICByZXR1cm4gYWNjZXNzQ29tcG9uZW50LnJlcGxhY2UoL1xcJS9nLCBcIiUyNVwiKS5yZXBsYWNlKC9cXDovZywgXCIlM0FcIik7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRBY2Nlc3MudW5lc2NhcGUgPSBmdW5jdGlvbiAoYWNjZXNzQ29tcG9uZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIGFjY2Vzc0NvbXBvbmVudC5yZXBsYWNlKC9cXCUzQS9nLCBcIjpcIikucmVwbGFjZSgvXFwlMjUvZywgXCIlXCIpO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50QWNjZXNzLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gRG9jdW1lbnRBY2Nlc3MuZXNjYXBlKHRoaXMuYWNjZXNzQ2xhaW1UeXBlKSArIFwiOlwiICtcclxuICAgICAgICAgICAgRG9jdW1lbnRBY2Nlc3MuZXNjYXBlKHRoaXMuYWNjZXNzQ2xhaW1WYWx1ZSkgKyBcIjpcIiArXHJcbiAgICAgICAgICAgIHRoaXMucmlnaHQ7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRBY2Nlc3MuZnJvbVN0cmluZ0FycmF5ID0gZnVuY3Rpb24gKGFjbCkge1xyXG4gICAgICAgIHJldHVybiBhY2xcclxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoYWMpIHsgcmV0dXJuIERvY3VtZW50QWNjZXNzLmZyb21TdHJpbmcoYWMpOyB9KVxyXG4gICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChhYykgeyByZXR1cm4gYWM7IH0pO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50QWNjZXNzLnRvU3RyaW5nQXJyYXkgPSBmdW5jdGlvbiAoYWNsKSB7XHJcbiAgICAgICAgcmV0dXJuIGFjbC5tYXAoZnVuY3Rpb24gKGFjKSB7IHJldHVybiBhYy50b1N0cmluZygpOyB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRG9jdW1lbnRBY2Nlc3M7XHJcbn0oKSk7XHJcbmV4cG9ydCB7IERvY3VtZW50QWNjZXNzIH07XHJcbmV4cG9ydCBmdW5jdGlvbiBoYXNBY2Nlc3MoYWNsLCB1c2VyQ2xhaW1zLCByZXF1ZXN0ZWRSaWdodCkge1xyXG4gICAgaWYgKHVzZXJDbGFpbXMuc29tZShmdW5jdGlvbiAoY2xhaW0pIHsgcmV0dXJuIGNsYWltLnR5cGUgPT09ICdyb2xlJyAmJiBjbGFpbS52YWx1ZSA9PT0gXCJBRE1JTlwiOyB9KSlcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIHJldHVybiBhY2wuc29tZShmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgIHJldHVybiB1c2VyQ2xhaW1zLnNvbWUoZnVuY3Rpb24gKGMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGEuYWNjZXNzQ2xhaW1UeXBlID09PSBjLnR5cGUgJiZcclxuICAgICAgICAgICAgICAgIGEuYWNjZXNzQ2xhaW1WYWx1ZSA9PT0gYy52YWx1ZSAmJiAoKGEucmlnaHQgPT09ICdSJyAmJiByZXF1ZXN0ZWRSaWdodCA9PT0gJ1InKSB8fFxyXG4gICAgICAgICAgICAgICAgKGEucmlnaHQgPT09ICdXJyAmJiBbJ1InLCAnVyddLmluZGV4T2YocmVxdWVzdGVkUmlnaHQpID49IDApIHx8XHJcbiAgICAgICAgICAgICAgICAoYS5yaWdodCA9PT0gJ1MnKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hY2Nlc3MtY29udHJvbC5qcy5tYXAiLCJpbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xyXG52YXIgSHR0cEVycm9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoSHR0cEVycm9yLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gSHR0cEVycm9yKGNvZGUsIG1lc3NhZ2UpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBcIkhUVFBcIiArIGNvZGUgKyBcIiBcIiArIG1lc3NhZ2UpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuY29kZSA9IGNvZGU7XHJcbiAgICAgICAgX3RoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XHJcbiAgICAgICAgX3RoaXMubmFtZSA9IFwiaHR0cFwiICsgY29kZTtcclxuICAgICAgICBfdGhpcy5tZXNzYWdlID0gXCJIVFRQXCIgKyBjb2RlICsgXCIgXCIgKyBtZXNzYWdlO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIHJldHVybiBIdHRwRXJyb3I7XHJcbn0oRXJyb3IpKTtcclxuZXhwb3J0IHsgSHR0cEVycm9yIH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWh0dHAtZXJyb3IuanMubWFwIiwiaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcclxuaW1wb3J0IHsgUmVzdENsaWVudCB9IGZyb20gJy4vcmVzdGNsaWVudCc7XHJcbmV4cG9ydCAqIGZyb20gJy4vdXRpbHMnO1xyXG5leHBvcnQgeyBLZWRCZWFyZXJQcm92aWRlciB9IGZyb20gJy4va2VkLWJlYXJlci1wcm92aWRlcic7XHJcbmV4cG9ydCAqIGZyb20gJy4vYWNjZXNzLWNvbnRyb2wnO1xyXG5leHBvcnQgeyBSZXN0Q2xpZW50IH07XHJcbmltcG9ydCB7IEh0dHBFcnJvciB9IGZyb20gJy4vaHR0cC1lcnJvcic7XHJcbmV4cG9ydCB7IEh0dHBFcnJvciB9O1xyXG5leHBvcnQgKiBmcm9tICcuL3Jlc3RjbGllbnQnO1xyXG47XHJcbnZhciBLZWRCYWNrZW5kQ2xpZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gS2VkQmFja2VuZENsaWVudChpc29tb3JwaGljLCBiZWFyZXJQcm92aWRlciwgYmFzZVVybCkge1xyXG4gICAgICAgIHRoaXMuaHR0cCA9IG5ldyBSZXN0Q2xpZW50KGlzb21vcnBoaWMsIGJhc2VVcmwsIHsgYmVhcmVyUHJvdmlkZXI6IGJlYXJlclByb3ZpZGVyIH0pO1xyXG4gICAgfVxyXG4gICAgS2VkQmFja2VuZENsaWVudC5wcm90b3R5cGUuZ2V0TXlDbGFpbXMgPSBmdW5jdGlvbiAodGFibGUsIGZldGNoT3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcmVzLCBfYSwgX2I7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYykge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYy5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5odHRwLmdldChcIm1lL2NsYWltcy9cIiArICh0YWJsZSB8fCBcIlwiKSwgbnVsbCwgZmV0Y2hPcHRpb25zKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMgPSBfYy5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHJlcy5zdGF0dXMgIT0gMjAwKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gSHR0cEVycm9yLmJpbmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iID0gW3ZvaWQgMCwgcmVzLnN0YXR1c107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlcy50ZXh0KCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogdGhyb3cgbmV3IChfYS5hcHBseShIdHRwRXJyb3IsIF9iLmNvbmNhdChbX2Muc2VudCgpXSkpKSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzLmpzb24oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qLywgX2Muc2VudCgpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENsaWVudC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHRhYmxlLCBpZCwgb3B0aW9ucywgZmV0Y2hPcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciByZXMsIF9hLCBfYjtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9jKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmh0dHAuZ2V0KHRhYmxlICsgXCIvXCIgKyBpZCwgb3B0aW9ucywgZmV0Y2hPcHRpb25zKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMgPSBfYy5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHJlcy5zdGF0dXMgIT0gMjAwKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gSHR0cEVycm9yLmJpbmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iID0gW3ZvaWQgMCwgcmVzLnN0YXR1c107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlcy50ZXh0KCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogdGhyb3cgbmV3IChfYS5hcHBseShIdHRwRXJyb3IsIF9iLmNvbmNhdChbX2Muc2VudCgpXSkpKSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzLmpzb24oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qLywgX2Muc2VudCgpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENsaWVudC5wcm90b3R5cGUubGlzdCA9IGZ1bmN0aW9uICh0YWJsZSwgb3B0aW9ucywgZmV0Y2hPcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBxdWVyeSwgcmVzLCBfYSwgX2I7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYykge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYy5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnkgPSB0c2xpYl8xLl9fYXNzaWduKHt9LCBvcHRpb25zKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5tdXRhdGlvbnNPbkVtcHR5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnkubXV0YXRpb25zT25FbXB0eSA9IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMubXV0YXRpb25zT25FbXB0eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuaHR0cC5nZXQoXCJcIiArIHRhYmxlLCBxdWVyeSwgZmV0Y2hPcHRpb25zKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMgPSBfYy5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHJlcy5zdGF0dXMgIT0gMjAwKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gSHR0cEVycm9yLmJpbmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iID0gW3ZvaWQgMCwgcmVzLnN0YXR1c107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlcy50ZXh0KCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogdGhyb3cgbmV3IChfYS5hcHBseShIdHRwRXJyb3IsIF9iLmNvbmNhdChbX2Muc2VudCgpXSkpKSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzLmpzb24oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qLywgX2Muc2VudCgpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENsaWVudC5wcm90b3R5cGUuYmF0Y2ggPSBmdW5jdGlvbiAocmVxcywgZmV0Y2hPcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciByZXMsIF9hLCBfYjtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9jKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZW9yZGVyIG9wZXJhdGlvbnMgc28gdGhhdCAnYWRkJ3MgY29tZSBmaXJzdCBhbmQgJ2RlbGV0ZSdzIGNvbWUgbGFzdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxcyA9IHJlcXMuc2xpY2UoKS5zb3J0KGZ1bmN0aW9uIChyZXExLCByZXEyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVxMS5vcCA9PT0gJ2FkZCcgPyAtMSA6IHJlcTIub3AgPT09ICdhZGQnID8gMSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxMS5vcCA9PT0gJ2RlbGV0ZScgPyAxIDogcmVxMi5vcCA9PT0gJ2RlbGV0ZScgPyAtMSA6IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmh0dHAucG9zdChcImJhdGNoXCIsIHJlcXMsIGZldGNoT3B0aW9ucyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gX2Muc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShyZXMuc3RhdHVzICE9IDIwMCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IEh0dHBFcnJvci5iaW5kO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYiA9IFt2b2lkIDAsIHJlcy5zdGF0dXNdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZXMudGV4dCgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHRocm93IG5ldyAoX2EuYXBwbHkoSHR0cEVycm9yLCBfYi5jb25jYXQoW19jLnNlbnQoKV0pKSkoKTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbNCAvKnlpZWxkKi8sIHJlcy5qc29uKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyIC8qcmV0dXJuKi8sIF9jLnNlbnQoKV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLmRvID0gZnVuY3Rpb24gKHNjb3BlRm4pIHtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHJ1bm5lcjtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBydW5uZXIgPSBuZXcgQmF0Y2hSdW5uZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGVGbihydW5uZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmJhdGNoKHJ1bm5lci5tdXRhdGlvblJlcXVlc3RzKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOiByZXR1cm4gWzIgLypyZXR1cm4qLywgX2Euc2VudCgpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENsaWVudC5wcm90b3R5cGUuZGVsZXRlUmVhbG0gPSBmdW5jdGlvbiAocmVhbG0pIHtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHJlcywgX2EsIF9iO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2MpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2MubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuaHR0cC5kZWxldGUoXCJyZWFsbXMvXCIgKyByZWFsbSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gX2Muc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShyZXMuc3RhdHVzICE9IDIwMCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IEh0dHBFcnJvci5iaW5kO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYiA9IFt2b2lkIDAsIHJlcy5zdGF0dXNdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZXMudGV4dCgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHRocm93IG5ldyAoX2EuYXBwbHkoSHR0cEVycm9yLCBfYi5jb25jYXQoW19jLnNlbnQoKV0pKSkoKTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbNCAvKnlpZWxkKi8sIHJlcy5qc29uKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyIC8qcmV0dXJuKi8sIF9jLnNlbnQoKV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uICh0YWJsZSwgZG9jLCBicmFuY2hJZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRvKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLmFkZCh0YWJsZSwgZG9jKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENsaWVudC5wcm90b3R5cGUucHV0ID0gZnVuY3Rpb24gKHRhYmxlLCBkb2MpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kbyhmdW5jdGlvbiAocikgeyByZXR1cm4gci5wdXQodGFibGUsIGRvYyk7IH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICh0YWJsZSwgaWQsIGRlbHRhRG9jLCBicmFuY2hJZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRvKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLnVwZGF0ZSh0YWJsZSwgaWQsIGRlbHRhRG9jLCBicmFuY2hJZCk7IH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLm1lcmdlID0gZnVuY3Rpb24gKGJyYW5jaElkLCB0YXJnZXRCcmFuY2hJZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRvKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLm1lcmdlKGJyYW5jaElkLCB0YXJnZXRCcmFuY2hJZCk7IH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLmNsZWFyQnJhbmNoID0gZnVuY3Rpb24gKGJyYW5jaElkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZG8oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIuY2xlYXJCcmFuY2goYnJhbmNoSWQpOyB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ2xpZW50LnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAodGFibGUsIGlkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZG8oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIuZGVsZXRlKHRhYmxlLCBpZCk7IH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLnNoYXJlID0gZnVuY3Rpb24gKHRhYmxlLCBpZCwgYWNsKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZG8oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIuc2hhcmUodGFibGUsIGlkLCBhY2wpOyB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ2xpZW50LnByb3RvdHlwZS51bnNoYXJlID0gZnVuY3Rpb24gKHRhYmxlLCBpZCwgYWNsKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZG8oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIudW5zaGFyZSh0YWJsZSwgaWQsIGFjbCk7IH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLmxpbmsgPSBmdW5jdGlvbiAoc291cmNlVGFibGUsIHNvdXJjZUlkLCB0YXJnZXRUYWJsZSwgdGFyZ2V0SWQsIGxhYmVsKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZG8oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIubGluayhzb3VyY2VUYWJsZSwgc291cmNlSWQsIHRhcmdldFRhYmxlLCB0YXJnZXRJZCwgbGFiZWwpOyB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ2xpZW50LnByb3RvdHlwZS5saW5rMiA9IGZ1bmN0aW9uIChzb3VyY2VUYWJsZSwgc291cmNlSWQsIHRhcmdldElkLCBsYWJlbCwgYnJhbmNoSWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kbyhmdW5jdGlvbiAocikgeyByZXR1cm4gci5saW5rMihzb3VyY2VUYWJsZSwgc291cmNlSWQsIGxhYmVsLCB0YXJnZXRJZCwgYnJhbmNoSWQpOyB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ2xpZW50LnByb3RvdHlwZS51bmxpbmsgPSBmdW5jdGlvbiAoc291cmNlVGFibGUsIHNvdXJjZUlkLCB0YXJnZXRUYWJsZSwgdGFyZ2V0SWQsIGxhYmVsKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZG8oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIudW5saW5rKHNvdXJjZVRhYmxlLCBzb3VyY2VJZCwgdGFyZ2V0VGFibGUsIHRhcmdldElkLCBsYWJlbCk7IH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLnVubGluazIgPSBmdW5jdGlvbiAoc291cmNlVGFibGUsIHNvdXJjZUlkLCB0YXJnZXRJZCwgbGFiZWwsIGJyYW5jaElkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZG8oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIudW5saW5rMihzb3VyY2VUYWJsZSwgc291cmNlSWQsIGxhYmVsLCB0YXJnZXRJZCwgYnJhbmNoSWQpOyB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ2xpZW50LnByb3RvdHlwZS51bmRvTGluayA9IGZ1bmN0aW9uIChzb3VyY2VUYWJsZSwgc291cmNlSWQsIHRhcmdldElkLCBsYWJlbCwgYnJhbmNoSWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kbyhmdW5jdGlvbiAocikgeyByZXR1cm4gci51bmRvTGluayhzb3VyY2VUYWJsZSwgc291cmNlSWQsIGxhYmVsLCB0YXJnZXRJZCwgYnJhbmNoSWQpOyB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gS2VkQmFja2VuZENsaWVudDtcclxufSgpKTtcclxuZXhwb3J0IHsgS2VkQmFja2VuZENsaWVudCB9O1xyXG52YXIgQmF0Y2hSdW5uZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBCYXRjaFJ1bm5lcigpIHtcclxuICAgICAgICB0aGlzLm11dGF0aW9uUmVxdWVzdHMgPSBbXTtcclxuICAgIH1cclxuICAgIEJhdGNoUnVubmVyLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAodGFibGUsIGRvYywgYnJhbmNoSWQpIHtcclxuICAgICAgICB0aGlzLm11dGF0aW9uUmVxdWVzdHMucHVzaCh7IG9wOiAnYWRkJywgdGFibGU6IHRhYmxlLCBkb2M6IGRvYywgYnJhbmNoSWQ6IGJyYW5jaElkIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIEJhdGNoUnVubmVyLnByb3RvdHlwZS5wdXQgPSBmdW5jdGlvbiAodGFibGUsIGRvYykge1xyXG4gICAgICAgIGRvYyA9IHRzbGliXzEuX19hc3NpZ24oe30sIGRvYyk7XHJcbiAgICAgICAgZGVsZXRlIGRvYy5hY2w7IC8vIEZvcmJpZGRlbiB0byBzZW5kIGFjbCB3aXRoIHB1dCgpIGNhbGxzLlxyXG4gICAgICAgIHRoaXMubXV0YXRpb25SZXF1ZXN0cy5wdXNoKHsgb3A6ICdwdXQnLCB0YWJsZTogdGFibGUsIGRvYzogZG9jIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIEJhdGNoUnVubmVyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAodGFibGUsIGlkLCBkZWx0YURvYywgYnJhbmNoSWQpIHtcclxuICAgICAgICBkZWx0YURvYyA9IHRzbGliXzEuX19hc3NpZ24oe30sIGRlbHRhRG9jKTtcclxuICAgICAgICB0aGlzLm11dGF0aW9uUmVxdWVzdHMucHVzaCh7IG9wOiAndXBkYXRlJywgdGFibGU6IHRhYmxlLCBpZDogaWQsIGRlbHRhRG9jOiBkZWx0YURvYywgYnJhbmNoSWQ6IGJyYW5jaElkIH0pO1xyXG4gICAgfTtcclxuICAgIEJhdGNoUnVubmVyLnByb3RvdHlwZS5tZXJnZSA9IGZ1bmN0aW9uIChicmFuY2hJZCwgdGFyZ2V0QnJhbmNoSWQpIHtcclxuICAgICAgICB0aGlzLm11dGF0aW9uUmVxdWVzdHMucHVzaCh7IG9wOiAnbWVyZ2UnLCBicmFuY2hJZDogYnJhbmNoSWQsIHRhcmdldEJyYW5jaElkOiB0YXJnZXRCcmFuY2hJZCB9KTtcclxuICAgIH07XHJcbiAgICBCYXRjaFJ1bm5lci5wcm90b3R5cGUuY2xlYXJCcmFuY2ggPSBmdW5jdGlvbiAoYnJhbmNoSWQpIHtcclxuICAgICAgICB0aGlzLm11dGF0aW9uUmVxdWVzdHMucHVzaCh7IG9wOiAnY2xlYXItYnJhbmNoJywgYnJhbmNoSWQ6IGJyYW5jaElkIH0pO1xyXG4gICAgfTtcclxuICAgIEJhdGNoUnVubmVyLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAodGFibGUsIGlkKSB7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblJlcXVlc3RzLnB1c2goeyBvcDogJ2RlbGV0ZScsIHRhYmxlOiB0YWJsZSwgaWQ6IGlkIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIEJhdGNoUnVubmVyLnByb3RvdHlwZS5zaGFyZSA9IGZ1bmN0aW9uICh0YWJsZSwgaWQsIGFjbCkge1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25SZXF1ZXN0cy5wdXNoKHsgb3A6ICdzaGFyZScsIHRhYmxlOiB0YWJsZSwgaWQ6IGlkLCBhY2w6IGFjbCB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBCYXRjaFJ1bm5lci5wcm90b3R5cGUudW5zaGFyZSA9IGZ1bmN0aW9uICh0YWJsZSwgaWQsIGFjbCkge1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25SZXF1ZXN0cy5wdXNoKHsgb3A6ICd1bnNoYXJlJywgdGFibGU6IHRhYmxlLCBpZDogaWQsIGFjbDogYWNsIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIEJhdGNoUnVubmVyLnByb3RvdHlwZS5saW5rID0gZnVuY3Rpb24gKHNvdXJjZVRhYmxlLCBzb3VyY2VJZCwgdGFyZ2V0VGFibGUsIHRhcmdldElkLCBsYWJlbCkge1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25SZXF1ZXN0cy5wdXNoKHsgb3A6ICdsaW5rJywgc291cmNlVGFibGU6IHNvdXJjZVRhYmxlLCBzb3VyY2VJZDogc291cmNlSWQsIHRhcmdldFRhYmxlOiB0YXJnZXRUYWJsZSwgdGFyZ2V0SWQ6IHRhcmdldElkLCBsYWJlbDogbGFiZWwgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgQmF0Y2hSdW5uZXIucHJvdG90eXBlLmxpbmsyID0gZnVuY3Rpb24gKHNvdXJjZVRhYmxlLCBzb3VyY2VJZCwgbGFiZWwsIHRhcmdldElkLCBicmFuY2hJZCkge1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25SZXF1ZXN0cy5wdXNoKHsgb3A6ICdsaW5rJywgc291cmNlVGFibGU6IHNvdXJjZVRhYmxlLCBzb3VyY2VJZDogc291cmNlSWQsIHRhcmdldElkOiB0YXJnZXRJZCwgbGFiZWw6IGxhYmVsLCBicmFuY2hJZDogYnJhbmNoSWQgfSk7XHJcbiAgICB9O1xyXG4gICAgQmF0Y2hSdW5uZXIucHJvdG90eXBlLnVubGluayA9IGZ1bmN0aW9uIChzb3VyY2VUYWJsZSwgc291cmNlSWQsIHRhcmdldFRhYmxlLCB0YXJnZXRJZCwgbGFiZWwpIHtcclxuICAgICAgICB0aGlzLm11dGF0aW9uUmVxdWVzdHMucHVzaCh7IG9wOiAndW5saW5rJywgc291cmNlVGFibGU6IHNvdXJjZVRhYmxlLCBzb3VyY2VJZDogc291cmNlSWQsIHRhcmdldFRhYmxlOiB0YXJnZXRUYWJsZSwgdGFyZ2V0SWQ6IHRhcmdldElkLCBsYWJlbDogbGFiZWwgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgQmF0Y2hSdW5uZXIucHJvdG90eXBlLnVubGluazIgPSBmdW5jdGlvbiAoc291cmNlVGFibGUsIHNvdXJjZUlkLCBsYWJlbCwgdGFyZ2V0SWQsIGJyYW5jaElkKSB7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblJlcXVlc3RzLnB1c2goeyBvcDogJ3VubGluaycsIHNvdXJjZVRhYmxlOiBzb3VyY2VUYWJsZSwgc291cmNlSWQ6IHNvdXJjZUlkLCB0YXJnZXRJZDogdGFyZ2V0SWQsIGxhYmVsOiBsYWJlbCwgYnJhbmNoSWQ6IGJyYW5jaElkIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIEJhdGNoUnVubmVyLnByb3RvdHlwZS51bmRvTGluayA9IGZ1bmN0aW9uIChzb3VyY2VUYWJsZSwgc291cmNlSWQsIGxhYmVsLCB0YXJnZXRJZCwgYnJhbmNoSWQpIHtcclxuICAgICAgICB0aGlzLm11dGF0aW9uUmVxdWVzdHMucHVzaCh7IG9wOiAndW5kby1saW5rJywgc291cmNlVGFibGU6IHNvdXJjZVRhYmxlLCBzb3VyY2VJZDogc291cmNlSWQsIHRhcmdldElkOiB0YXJnZXRJZCwgbGFiZWw6IGxhYmVsLCBicmFuY2hJZDogYnJhbmNoSWQgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEJhdGNoUnVubmVyO1xyXG59KCkpO1xyXG5leHBvcnQgeyBCYXRjaFJ1bm5lciB9O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJpbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xyXG5pbXBvcnQgeyBSZXN0Q2xpZW50IH0gZnJvbSAnLi9yZXN0Y2xpZW50JztcclxuaW1wb3J0IHsgYXZvaWRTaW11bHRhbm91c0NhbGxzIH0gZnJvbSAnLi91dGlscyc7XHJcbnZhciBLZWRCZWFyZXJQcm92aWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEtlZEJlYXJlclByb3ZpZGVyKGlzb21vcnBoaWMsIHN0b3JhZ2UsIHRva2VuSWQsIGNsaWVudElkLCBjbGllbnRTZWNyZXQsIHRva2VuVXJsLCB0b2tlblF1ZXJ5KSB7XHJcbiAgICAgICAgdGhpcy5pc29tb3JwaGljID0gaXNvbW9ycGhpYztcclxuICAgICAgICB0aGlzLnN0b3JhZ2UgPSBzdG9yYWdlO1xyXG4gICAgICAgIHRoaXMudG9rZW5JZCA9IHRva2VuSWQ7XHJcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IGNsaWVudElkO1xyXG4gICAgICAgIHRoaXMuY2xpZW50U2VjcmV0ID0gY2xpZW50U2VjcmV0O1xyXG4gICAgICAgIHRoaXMudG9rZW5VcmwgPSB0b2tlblVybDtcclxuICAgICAgICB0aGlzLnRva2VuUXVlcnkgPSB0b2tlblF1ZXJ5O1xyXG4gICAgICAgIHRoaXMudG9rZW5JbmZvID0geyB0b2tlbjogbnVsbCwgZXhwaXJlczogMCB9O1xyXG4gICAgICAgIHRoaXMuY2xpZW50ID0gbmV3IFJlc3RDbGllbnQoaXNvbW9ycGhpYywgXCJcIiwge1xyXG4gICAgICAgICAgICB1c2VybmFtZTogdGhpcy5jbGllbnRJZCxcclxuICAgICAgICAgICAgcGFzc3dvcmQ6IHRoaXMuY2xpZW50U2VjcmV0XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5nZXRCZWFyZXIgPSBhdm9pZFNpbXVsdGFub3VzQ2FsbHModGhpcy5nZXRCZWFyZXIuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5yZWZyZXNoQmVhcmVyID0gYXZvaWRTaW11bHRhbm91c0NhbGxzKHRoaXMucmVmcmVzaEJlYXJlci5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuICAgIEtlZEJlYXJlclByb3ZpZGVyLnByb3RvdHlwZS5nZXRCZWFyZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBfYSwgdG9rZW4sIGV4cGlyZXMsIF9iLCBlXzE7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYykge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYy5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSB0aGlzLnRva2VuSW5mbywgdG9rZW4gPSBfYS50b2tlbiwgZXhwaXJlcyA9IF9hLmV4cGlyZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0b2tlbiAmJiBleHBpcmVzID49IERhdGUubm93KCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy50b2tlbkluZm9dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYy5sYWJlbCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYy50cnlzLnB1c2goWzEsIDQsICwgNl0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYiA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuc3RvcmFnZS5sb2FkKHRoaXMuY2xpZW50SWQgKyBcIi9cIiArIHRoaXMudG9rZW5JZCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2IudG9rZW5JbmZvID0gX2Muc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50b2tlbkluZm8udG9rZW4gJiYgdGhpcy50b2tlbkluZm8uZXhwaXJlcyA+PSBEYXRlLm5vdygpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMudG9rZW5JbmZvXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5yZWZyZXNoQmVhcmVyKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Muc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy50b2tlbkluZm9dO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZV8xID0gX2Muc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJlZnJlc2hCZWFyZXIoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYy5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnRva2VuSW5mb107XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJlYXJlclByb3ZpZGVyLnByb3RvdHlwZS5yZWZyZXNoQmVhcmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcmVzLCByZXRyaWVzLCBfYSwgX2I7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYykge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYy5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0cmllcyA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jLmxhYmVsID0gMTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHJldHJpZXMgPCA2KSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmV0cmlldmluZyB0b2tlbiBmb3IgXCIgKyB0aGlzLnRva2VuSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmNsaWVudC5nZXQodGhpcy50b2tlblVybCwgdGhpcy50b2tlblF1ZXJ5LCB7IGNhY2hlOiAncmVsb2FkJyB9KV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMgPSBfYy5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzICE9PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkdvdCBcIiArIHJlcy5zdGF0dXMgKyBcIiBcIiArIHJlcy5zdGF0dXNUZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2IgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzLnRleHQoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50b2tlbkluZm8gPSAoX2IudG9rZW4gPSBfYy5zZW50KCksIF9iLmV4cGlyZXMgPSBEYXRlLm5vdygpICsgNTkgKiA2MCAqIDEwMDAsIF9iKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJHb3QgdG9rZW4gZm9yIFwiICsgdGhpcy50b2tlbklkICsgXCI6IFwiICsgSlNPTi5zdHJpbmdpZnkodGhpcy50b2tlbkluZm8pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdG9yYWdlLnNhdmUodGhpcy5jbGllbnRJZCArIFwiL1wiICsgdGhpcy50b2tlbklkLCB0aGlzLnRva2VuSW5mbyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnRva2VuSW5mb107XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICArK3JldHJpZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTogdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIHJldHJpZXZlIHRva2VuIGZvciBcIiArIEpTT04uc3RyaW5naWZ5KHRoaXMudG9rZW5JZCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gS2VkQmVhcmVyUHJvdmlkZXI7XHJcbn0oKSk7XHJcbmV4cG9ydCB7IEtlZEJlYXJlclByb3ZpZGVyIH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWtlZC1iZWFyZXItcHJvdmlkZXIuanMubWFwIiwiLypcclxuZGVjbGFyZSB2YXIgQnVmZmVyOyAvLyBub2RlIGJ1aWx0LWluXHJcblxyXG5cclxuZnVuY3Rpb24gYmFzaWNBdXRoSGVhZGVyKHVzZXJuYW1lLCBwYXNzd29yZCkge1xyXG4gICAgcmV0dXJuIFwiQmFzaWMgXCIgKyBuZXcgQnVmZmVyKHVzZXJuYW1lICsgXCI6XCIgKyBwYXNzd29yZCkudG9TdHJpbmcoXCJiYXNlNjRcIik7XHJcbn1cclxuKi9cclxuaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcclxuaW1wb3J0IHsgY3JlYXRlVVVJRCB9IGZyb20gXCIuL3V0aWxzXCI7XHJcbmltcG9ydCB7IEVtaXR0ZXIgfSBmcm9tICcuLi9vYnNlcnZhYmxlL2VtaXR0ZXInO1xyXG52YXIgUmVzdENsaWVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFJlc3RDbGllbnQoaXNvbW9ycGhpYywgYmFzZVVybCwgb3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMuaXNvbW9ycGhpYyA9IGlzb21vcnBoaWM7XHJcbiAgICAgICAgdGhpcy5iYXNlVXJsID0gYmFzZVVybDtcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgICAgIHRoaXMubnVtT3V0c3RhbmRpbmdPcGVyYXRpb25zID0gMDtcclxuICAgICAgICB0aGlzLl9zdGF0dXMgPSBuZXcgRW1pdHRlcih0aGlzKTtcclxuICAgICAgICB0aGlzLmZldGNoT3B0aW9ucyA9IHsgbW9kZTogJ2NvcnMnIH07XHJcbiAgICAgICAgdGhpcy5hdXRoSGVhZGVyID0gb3B0aW9ucy5iZWFyZXIgP1xyXG4gICAgICAgICAgICBcIkJlYXJlciBcIiArIG9wdGlvbnMuYmVhcmVyIDpcclxuICAgICAgICAgICAgb3B0aW9ucy51c2VybmFtZSA/XHJcbiAgICAgICAgICAgICAgICBcIkJhc2ljIFwiICsgaXNvbW9ycGhpYy5idG9hKG9wdGlvbnMudXNlcm5hbWUgKyBcIjpcIiArIChvcHRpb25zLnBhc3N3b3JkIHx8IFwiXCIpKSA6XHJcbiAgICAgICAgICAgICAgICBudWxsO1xyXG4gICAgICAgIHRoaXMuYmVhcmVyUHJvdmlkZXIgPSBvcHRpb25zLmJlYXJlclByb3ZpZGVyIHx8IG51bGw7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVzdENsaWVudC5wcm90b3R5cGUsIFwic3RhdHVzXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXR1cztcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIFJlc3RDbGllbnQucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24gKHBhdGgsIG1ldGhvZCwgaGVhZGVycywgcXVlcnksIGZldGNoT3B0aW9ucykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgKyt0aGlzLm51bU91dHN0YW5kaW5nT3BlcmF0aW9ucztcclxuICAgICAgICB0aGlzLl9zdGF0dXMuZGlzcGF0Y2godGhpcyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZldGNoKHBhdGgsIG1ldGhvZCwgaGVhZGVycywgcXVlcnksIGZldGNoT3B0aW9ucylcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgICAgICAtLV90aGlzLm51bU91dHN0YW5kaW5nT3BlcmF0aW9ucztcclxuICAgICAgICAgICAgX3RoaXMuX3N0YXR1cy5kaXNwYXRjaChfdGhpcyk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXM7XHJcbiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICAtLV90aGlzLm51bU91dHN0YW5kaW5nT3BlcmF0aW9ucztcclxuICAgICAgICAgICAgX3RoaXMuX3N0YXR1cy5kaXNwYXRjaChfdGhpcyk7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFJlc3RDbGllbnQucHJvdG90eXBlLl9mZXRjaCA9IGZ1bmN0aW9uIChwYXRoLCBtZXRob2QsIGhlYWRlcnMsIHF1ZXJ5LCBmZXRjaE9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHF1ZXJ5U3RyLCBfYSwgYXV0aEhlYWRlciwgdG9rZW5JbmZvLCBiZWFyZXJQcm92aWRlciwgX2IsIF9jLCB1cmwsIHJlcywgd3d3YXV0aCwgX2Q7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfZSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfZS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZldGNoT3B0aW9ucyAmJiBmZXRjaE9wdGlvbnMuY2FjaGUgPT09ICduby1jYWNoZScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdvcmthcm91bmQgZm9yIGJhY2stYnV0dG9uIG5vdCByZXNwZWN0aW5nIGNhY2hlIGNvbnRyb2wgaW4gQ2hyb21lL09wZXJhLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXBwZW5kIGEgcXVlcnkgcGFyYW1ldGVyIHRvIGZvcmNlIGEgY2FjaGUgZW50cnlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5ID0gdHNsaWJfMS5fX2Fzc2lnbih7fSwgcXVlcnksIHsgbm9jYWNoZTogY3JlYXRlVVVJRCgpIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5U3RyID0gcXVlcnkgJiYgT2JqZWN0LmtleXMocXVlcnkpLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBxdWVyeVtrZXldICE9PSB1bmRlZmluZWQ7IH0pLm1hcChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiPVwiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmNvZGVVUklDb21wb25lbnQocXVlcnlba2V5XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuam9pbignJicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IHRoaXMsIGF1dGhIZWFkZXIgPSBfYS5hdXRoSGVhZGVyLCB0b2tlbkluZm8gPSBfYS50b2tlbkluZm8sIGJlYXJlclByb3ZpZGVyID0gX2EuYmVhcmVyUHJvdmlkZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKCFhdXRoSGVhZGVyICYmICF0b2tlbkluZm8gJiYgYmVhcmVyUHJvdmlkZXIpKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2IgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBiZWFyZXJQcm92aWRlci5nZXRCZWFyZXIoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYi50b2tlbkluZm8gPSB0b2tlbkluZm8gPSBfZS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9lLmxhYmVsID0gMjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdG9rZW5JbmZvKSByZXR1cm4gWzMgLypicmVhayovLCA1XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEodG9rZW5JbmZvLmV4cGlyZXMgPCBEYXRlLm5vdygpKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVG9rZW4gZXhwaXJlZC4gUmVmcmVzaCBpdDpcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYmVhcmVyUHJvdmlkZXIucmVmcmVzaEJlYXJlcigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jLnRva2VuSW5mbyA9IHRva2VuSW5mbyA9IF9lLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2UubGFiZWwgPSA0O1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0aEhlYWRlciA9IFwiQmVhcmVyIFwiICsgdG9rZW5JbmZvLnRva2VuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZS5sYWJlbCA9IDU7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJbiBvbmUgd2F5IG9yIGFub3RoZXIsIHdlJ3ZlIGNvbmNsdWRlZCBhbiBBdXRob3JpemF0aW9uIGhlYWRlciB0byB1c2U6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhdXRoSGVhZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzLkF1dGhvcml6YXRpb24gPSBhdXRoSGVhZGVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybCA9IHRoaXMuYmFzZVVybCArIHBhdGggKyAocXVlcnlTdHIgPyBcIj9cIiArIHF1ZXJ5U3RyIDogXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuaXNvbW9ycGhpYy5mZXRjaCh1cmwsIHRzbGliXzEuX19hc3NpZ24oe30sIHRoaXMuZmV0Y2hPcHRpb25zLCB7IGhlYWRlcnM6IGhlYWRlcnMsIG1ldGhvZDogbWV0aG9kIH0sIGZldGNoT3B0aW9ucykpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcyA9IF9lLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVzLnN0YXR1cyA9PSA0MDEgJiYgdGhpcy5iZWFyZXJQcm92aWRlcikpIHJldHVybiBbMyAvKmJyZWFrKi8sIDldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3d3dhdXRoID0gcmVzLmhlYWRlcnMuZ2V0KFwid3d3LWF1dGhlbnRpY2F0ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJHb3QgXCIgKyByZXMuc3RhdHVzICsgXCIgZnJvbSBcIiArICh0aGlzLmJhc2VVcmwgKyBwYXRoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHd3d2F1dGggJiYgL0JlYXJlci9pLnRlc3Qod3d3YXV0aCkpKSByZXR1cm4gWzMgLypicmVhayovLCA5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2QgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmJlYXJlclByb3ZpZGVyLnJlZnJlc2hCZWFyZXIoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA3OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZC50b2tlbkluZm8gPSBfZS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnMuQXV0aG9yaXphdGlvbiA9IFwiQmVhcmVyIFwiICsgdGhpcy50b2tlbkluZm8udG9rZW47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuaXNvbW9ycGhpYy5mZXRjaCh1cmwsIHRzbGliXzEuX19hc3NpZ24oe30sIHRoaXMuZmV0Y2hPcHRpb25zLCB7IGhlYWRlcnM6IGhlYWRlcnMsIG1ldGhvZDogbWV0aG9kIH0sIGZldGNoT3B0aW9ucykpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDg6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcyA9IF9lLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2UubGFiZWwgPSA5O1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgOTogcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHJlc107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFJlc3RDbGllbnQucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChwYXRoLCBxdWVyeSwgZmV0Y2hPcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2gocGF0aCwgXCJHRVRcIiwgeyBBY2NlcHQ6IFwiYXBwbGljYXRpb24vanNvbjsgdGV4dC9wbGFpblwiIH0sIHF1ZXJ5LCBmZXRjaE9wdGlvbnMpO1xyXG4gICAgfTtcclxuICAgIFJlc3RDbGllbnQucHJvdG90eXBlLnBvc3QgPSBmdW5jdGlvbiAocGF0aCwgZGF0YSwgZmV0Y2hPcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2gocGF0aCwgXCJQT1NUXCIsIHtcclxuICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgICAgICAgIFwiQWNjZXB0XCI6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICAgICAgfSwgbnVsbCwgdHNsaWJfMS5fX2Fzc2lnbih7fSwgZmV0Y2hPcHRpb25zLCB7IGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpIH0pKTtcclxuICAgIH07XHJcbiAgICBSZXN0Q2xpZW50LnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAocGF0aCwgcXVlcnksIGJvZHksIGZldGNoT3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZldGNoKHBhdGgsIFwiREVMRVRFXCIsIHsgQWNjZXB0OiBcImFwcGxpY2F0aW9uL2pzb247IHRleHQvcGxhaW5cIiB9LCBxdWVyeSwgdHNsaWJfMS5fX2Fzc2lnbih7fSwgZmV0Y2hPcHRpb25zLCB7IGJvZHk6IGJvZHkgfSkpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBSZXN0Q2xpZW50O1xyXG59KCkpO1xyXG5leHBvcnQgeyBSZXN0Q2xpZW50IH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlc3RjbGllbnQuanMubWFwIiwiaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVVVSUQoKSB7XHJcbiAgICAvLyBEZWNlbnQgc29sdXRpb24gZnJvbSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzEwNTAzNC9ob3ctdG8tY3JlYXRlLWEtZ3VpZC11dWlkLWluLWphdmFzY3JpcHRcclxuICAgIHZhciBkID0gRGF0ZS5ub3coKTtcclxuICAgIHZhciB1dWlkID0gJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCBmdW5jdGlvbiAoYykge1xyXG4gICAgICAgIHZhciByID0gKGQgKyBNYXRoLnJhbmRvbSgpICogMTYpICUgMTYgfCAwO1xyXG4gICAgICAgIGQgPSBNYXRoLmZsb29yKGQgLyAxNik7XHJcbiAgICAgICAgcmV0dXJuIChjID09PSAneCcgPyByIDogKHIgJiAweDcgfCAweDgpKS50b1N0cmluZygxNik7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB1dWlkO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBhdm9pZFNpbXVsdGFub3VzQ2FsbHMobWV0aG9kKSB7XHJcbiAgICB2YXIgb25nb2luZ1Byb21pc2UgPSBudWxsO1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIW9uZ29pbmdQcm9taXNlKSB7XHJcbiAgICAgICAgICAgIG9uZ29pbmdQcm9taXNlID0gbWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBvbmdvaW5nUHJvbWlzZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG9uZ29pbmdQcm9taXNlO1xyXG4gICAgfTtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0R2xvYmFsSWQocmVhbG0pIHtcclxuICAgIHZhciBwcmVmaXggPSAnZWM5NmIzYmUtNDVmYy00MWQzLWI2OWUtJztcclxuICAgIHZhciBwYWQgPSBbJzUwJywgJzA4JywgJ2UxJywgJzQwJywgJ2U0JywgJ2U3J107XHJcbiAgICBpZiAocmVhbG0ubGVuZ3RoID4gNilcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUb28gbG9uZyByZWFsbVwiKTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVhbG0ubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICB2YXIgaGV4ID0gcmVhbG0uY2hhckNvZGVBdChpKS50b1N0cmluZygxNik7XHJcbiAgICAgICAgcGFkW2ldID0gaGV4Lmxlbmd0aCA9PT0gMiA/XHJcbiAgICAgICAgICAgIGhleCA6XHJcbiAgICAgICAgICAgICcwJyArIGhleDtcclxuICAgIH1cclxuICAgIHJldHVybiBwcmVmaXggKyBwYWQuam9pbignJyk7XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVQcmVkZXN0aW5hdGVkSWQoaW5wdXQpIHtcclxuICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBlbmNvZGVyLCBkYXRhLCBkaWdlc3QsIF9hLCBpO1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBlbmNvZGVyLmVuY29kZShpbnB1dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX2EgPSBVaW50OEFycmF5LmJpbmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgY3J5cHRvLnN1YnRsZS5kaWdlc3QoJ1NIQS0yNTYnLCBkYXRhKV07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgZGlnZXN0ID0gbmV3IChfYS5hcHBseShVaW50OEFycmF5LCBbdm9pZCAwLCBfYi5zZW50KCldKSkoKTtcclxuICAgICAgICAgICAgICAgICAgICBpID0gMDtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCBmdW5jdGlvbiAoYykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5pYmJsZSA9IGRpZ2VzdFtpKytdICUgMTYgfCAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHdhc2hlZE5pYmJsZSA9IGMgPT09ICd4JyA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmliYmxlIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaWJibGUgJiAweDcgfCAweDg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gd2FzaGVkTmliYmxlLnRvU3RyaW5nKDE2KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG4vKmV4cG9ydCBmdW5jdGlvbiBidWYyaGV4KGJ1ZmZlcjogQXJyYXlCdWZmZXIpIHtcclxuICByZXR1cm4gQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKFxyXG4gICAgbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKSxcclxuICAgICh4OiBudW1iZXIpID0+ICgnMDAnICsgeC50b1N0cmluZygxNikpLnNsaWNlKC0yKSkuam9pbignJyk7XHJcbn0qL1xyXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlQXJyYXkoYSwgbWFwcGVyKSB7XHJcbiAgICB2YXIgcmV0dmFsID0gYTtcclxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gYS5sZW5ndGg7IGkgPCBsOyArK2kpIHtcclxuICAgICAgICB2YXIgdCA9IGFbaV07XHJcbiAgICAgICAgdmFyIG1hcHBlZCA9IG1hcHBlcih0KTtcclxuICAgICAgICBpZiAobWFwcGVkICE9PSB0KSB7XHJcbiAgICAgICAgICAgIGlmIChyZXR2YWwgPT09IGEpXHJcbiAgICAgICAgICAgICAgICByZXR2YWwgPSBhLnNsaWNlKCk7XHJcbiAgICAgICAgICAgIHJldHZhbFtpXSA9IG1hcHBlZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmV0dmFsO1xyXG59XHJcbi8qXHJcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVBcnJheTxUPihhOiBUW10sIG1hcHBlcjogKHQ6IFQpID0+IFQgfCBmYWxzZSk6IFRbXSB7XHJcbiAgbGV0IHJldHZhbCA9IGE7XHJcbiAgbGV0IGogPSAwO1xyXG4gIGZvciAobGV0IGk9MCxsPWEubGVuZ3RoOyBpPGw7ICsraSwgKytqKSB7XHJcbiAgICBjb25zdCB0ID0gYVtpXTtcclxuICAgIGNvbnN0IG1hcHBlZCA9IG1hcHBlcih0KTtcclxuICAgIGlmIChtYXBwZWQgPT09IGZhbHNlKSB7XHJcbiAgICAgIC8vIE1hcHBlciB3YW50cyB0byBkZWxldGUgdGhpcyBkb2MuXHJcbiAgICAgIGlmIChyZXR2YWwgPT09IGEpIHJldHZhbCA9IGEuc2xpY2UoKTtcclxuICAgICAgcmV0dmFsLnNwbGljZShqLCAxKTtcclxuICAgICAgLS1qOyAvLyBjb21wZW5zYXRlIGZvciArK2pcclxuICAgIH0gZWxzZSBpZiAobWFwcGVkICE9PSB0KSB7XHJcbiAgICAgIGlmIChyZXR2YWwgPT09IGEpIHJldHZhbCA9IGEuc2xpY2UoKTtcclxuICAgICAgcmV0dmFsW2pdID0gbWFwcGVkO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gcmV0dmFsO1xyXG59XHJcbiovIFxyXG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy5qcy5tYXAiLCJpbXBvcnQgKiBhcyBKc29uU2NoZW1hIGZyb20gXCJrZWRiYWNrZW5kLXNjaGVtYS9zY2hlbWEuanNvblwiO1xyXG5pbXBvcnQgeyBnZXRUYWJsZUZyb21MYWJlbCB9IGZyb20gXCIuL3V0aWxzXCI7XHJcbnZhciBDYWNoZUJ1c3QgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBDYWNoZUJ1c3QoKSB7XHJcbiAgICB9XHJcbiAgICBDYWNoZUJ1c3QuZ2V0Q2FjaGVCdXN0ID0gZnVuY3Rpb24gKHRhYmxlLCBxdWVyeSwgdXNlciwgaW5jbHVkZXMpIHtcclxuICAgICAgICB2YXIgaW52b2x2ZWRJdGVtcyA9IENhY2hlQnVzdC5nZXRJbnZvbHZlZEl0ZW1zKHRhYmxlLCBxdWVyeSwgaW5jbHVkZXMpO1xyXG4gICAgICAgIHJldHVybiBpbnZvbHZlZEl0ZW1zXHJcbiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiY2FjaGUtYnVzdC1cIiArIHVzZXIgKyBcIi1cIiArIGl0ZW0pOyB9KVxyXG4gICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gISF2YWx1ZTsgfSlcclxuICAgICAgICAgICAgLmpvaW4oJy8nKSB8fCAnc3RhdGljJztcclxuICAgIH07XHJcbiAgICBDYWNoZUJ1c3QuaW52YWxpZGF0ZUNhY2hlID0gZnVuY3Rpb24gKHJlcXMsIHVzZXIpIHtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gQ2FjaGVCdXN0LmdldENhY2hlSW52YWxpZGF0aW9ucyhyZXFzKTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGl0ZW0gPSBfYVtfaV07XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiY2FjaGUtYnVzdC1cIiArIHVzZXIgKyBcIi1cIiArIGl0ZW0sICcnICsgRGF0ZS5ub3coKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIENhY2hlQnVzdC5nZXRJbnZvbHZlZEl0ZW1zID0gZnVuY3Rpb24gKHRhYmxlLCBxdWVyeSwgaW5jbHVkZXMpIHtcclxuICAgICAgICB2YXIgaGFzRWRnZXNGcm9tID0gcXVlcnkuaGFzRWRnZXNGcm9tO1xyXG4gICAgICAgIHZhciByZWxhdGVkVGFibGVzID0gaW5jbHVkZXNcclxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAobGFiZWwpIHsgcmV0dXJuIEpzb25TY2hlbWEudGFibGVzW3RhYmxlXS5yZWxhdGlvbnNoaXBzW2xhYmVsXTsgfSlcclxuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAodGFibGUpIHsgcmV0dXJuICEhdGFibGU7IH0pO1xyXG4gICAgICAgIGlmIChoYXNFZGdlc0Zyb20pXHJcbiAgICAgICAgICAgIHJlbGF0ZWRUYWJsZXMucHVzaChcImhlZlwiICsgdGFibGUpO1xyXG4gICAgICAgIHJldHVybiBbdGFibGUsICdtYXN0ZXInLCBxdWVyeS5icmFuY2hJZF0uZmlsdGVyKGZ1bmN0aW9uICh4KSB7IHJldHVybiAhIXg7IH0pLmNvbmNhdChyZWxhdGVkVGFibGVzKS5zb3J0KCk7XHJcbiAgICB9O1xyXG4gICAgQ2FjaGVCdXN0LmdldENhY2hlSW52YWxpZGF0aW9ucyA9IGZ1bmN0aW9uIChyZXFzKSB7XHJcbiAgICAgICAgdmFyIGludmFsaWRhdGlvblNldCA9IHt9O1xyXG4gICAgICAgIHJlcXMuZm9yRWFjaChmdW5jdGlvbiAocmVxKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAocmVxLm9wKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdhZGQnOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAncHV0JzpcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6XHJcbiAgICAgICAgICAgICAgICBjYXNlICd1cGRhdGUnOlxyXG4gICAgICAgICAgICAgICAgICAgIGludmFsaWRhdGlvblNldFtyZXEudGFibGVdID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2xpbmsnOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAndW5saW5rJzpcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3VuZG8tbGluayc6XHJcbiAgICAgICAgICAgICAgICAgICAgaW52YWxpZGF0aW9uU2V0W3JlcS5zb3VyY2VUYWJsZV0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGludmFsaWRhdGlvblNldFtcImhlZi1cIiArIGdldFRhYmxlRnJvbUxhYmVsKHJlcS5zb3VyY2VUYWJsZSwgcmVxLmxhYmVsKV0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnY2xlYXItYnJhbmNoJzpcclxuICAgICAgICAgICAgICAgICAgICBpbnZhbGlkYXRpb25TZXRbcmVxLmJyYW5jaElkXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdtZXJnZSc6XHJcbiAgICAgICAgICAgICAgICAgICAgaW52YWxpZGF0aW9uU2V0W3JlcS5icmFuY2hJZF0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGludmFsaWRhdGlvblNldFtyZXEudGFyZ2V0QnJhbmNoSWQgfHwgXCJtYXN0ZXJcIl0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGludmFsaWRhdGlvblNldCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIENhY2hlQnVzdDtcclxufSgpKTtcclxuZXhwb3J0IHsgQ2FjaGVCdXN0IH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhY2hlLWJ1c3QuanMubWFwIiwiaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcclxuaW1wb3J0IHsgbWVyZ2VEZWx0YXMgfSBmcm9tICcuLi9kZWx0YS1tZXJnZSc7XHJcbmV4cG9ydCBmdW5jdGlvbiBhcHBseU11dGF0aW9uc09uRGVsdGFzKGJyYW5jaElkLCBkZWx0YXMsIG11dGF0aW9ucywgb3B0aW1pc3RpYywgdXNlckRpc3BsYXlOYW1lLCBoYXNBZGRpdGlvbmFsRmlsdGVyKSB7XHJcbiAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChtKSB7XHJcbiAgICAgICAgc3dpdGNoIChtLm9wKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ2FkZC1yZWxhdGVkJzpcclxuICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICAvLyBBZGRSZWxhdGVkIFJlcG9NdXRhdGlvblxyXG4gICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgIGlmICghaGFzQWRkaXRpb25hbEZpbHRlciAmJiBtLmJyYW5jaElkID09PSBicmFuY2hJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbHRhcyA9IFt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYWRkJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZUlkOiBtLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SWQ6IG0ucmVsYXRlZERvYy5pZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBtLmdyYXBoUHJvcCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZVRhYmxlOiBtLnRhYmxlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJG1ldGE6IG9wdGltaXN0aWMgPyAnYWRkaW5nJyA6ICdwZXJzaXN0ZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZVRpbWU6IERhdGUubm93KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXROYW1lOiBtLnJlbGF0ZWREb2MubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyaWJ1dG9yOiB1c2VyRGlzcGxheU5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfV0uY29uY2F0KGRlbHRhcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnY2xlYXItYnJhbmNoJzpcclxuICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICAvLyBDbGVhckJyYW5jaCBSZXBvTXV0YXRpb25cclxuICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICBpZiAobS5icmFuY2hJZCA9PT0gYnJhbmNoSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWx0YXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdkZWxldGUnOlxyXG4gICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgIC8vIERlbGV0ZSBSZXBvTXV0YXRpb25cclxuICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICAvLyBUaGlzIHR5cGUgb2YgbXV0YXRpb24gY2FuIG5vdCBiZSBwZXJmb3JtZWQgb250byBicmFuY2hlcy4gVGhlcmUncyBubyBicmFuY2hJZCBwcm9wZXJ0eSBvbiBtLlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ21lcmdlJzpcclxuICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICAvLyBNZXJnZSBSZXBvTXV0YXRpb25cclxuICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICBpZiAobS5icmFuY2hJZCA9PT0gYnJhbmNoSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWx0YXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG0udGFyZ2V0QnJhbmNoSWQgPT09IGJyYW5jaElkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBjaGFuZ2Ugd2lsbCBhcHBlbmQgbmV3IGRlbHRhcyB0byBvdXIgZGVsdGFzIGFycmF5IGJ1dCB3ZSBkb24ndCBrbm93IHdoYXQgd291bGQgY29tZS5cclxuICAgICAgICAgICAgICAgICAgICAvLyBOZWVkIHRvIHJlZmV0Y2ggZnJvbSBzZXJ2ZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFvcHRpbWlzdGljKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbnVsbCB9OyAvLyBDYWxsZXIgc2hvdWxkIGNoZWNrIGZvciBudWxsIGFuZCByZS1mZXRjaCBkYXRhIGZyb20gc2VydmVyLlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3JlbW92ZS1yZWxhdGVkJzpcclxuICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUtUmVsYXRlZCBSZXBvTXV0YXRpb25cclxuICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICBpZiAoaGFzQWRkaXRpb25hbEZpbHRlciB8fCBtLmJyYW5jaElkICE9PSBicmFuY2hJZClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJjb250aW51ZVwiO1xyXG4gICAgICAgICAgICAgICAgZGVsdGFzID0gW3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3JlbW92ZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZUlkOiBtLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRJZDogbS5yZWxhdGVkRG9jLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXROYW1lOiBtLnJlbGF0ZWREb2MubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IG0uZ3JhcGhQcm9wLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VUYWJsZTogbS50YWJsZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJpYnV0b3I6IHVzZXJEaXNwbGF5TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZVRpbWU6IERhdGUubm93KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRtZXRhOiBvcHRpbWlzdGljID8gJ2FkZGluZycgOiAncGVyc2lzdGVkJ1xyXG4gICAgICAgICAgICAgICAgICAgIH1dLmNvbmNhdChkZWx0YXMpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3VuZG8tbGluayc6XHJcbiAgICAgICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAgICAgLy8gVW5kby1MaW5rIFJlcG9NdXRhdGlvblxyXG4gICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgIGlmIChtLmJyYW5jaElkICE9PSBicmFuY2hJZClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJjb250aW51ZVwiO1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpZHggPSBkZWx0YXMuZmluZEluZGV4KGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoZC50eXBlID09PSAnYWRkJyB8fCBkLnR5cGUgPT09ICdyZW1vdmUnIHx8IGQudHlwZSA9PT0gJ3VuZG8tbGluaycpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLnNvdXJjZUlkID09PSBtLmlkICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLnRhcmdldElkID09PSBtLnJlbGF0ZWRJZDtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaWR4IDwgMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiY29udGludWVcIjtcclxuICAgICAgICAgICAgICAgICAgICAvLyBGb3VuZCBhbiBcImFkZFwiIG9yIFwicmVtb3ZlXCIgZGVsdGEgdG8gY2hhbmdlOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpbWlzdGljKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWx0YVJlbGF0aW9uID0gZGVsdGFzW2lkeF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hcmsgdGhlIGV4aXN0aW5nIGFkZC9yZW1vdmUgZGVsdGEgYXMgY3VycmVubHR5IGJlaW5nIGRlbGV0ZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsdGFzID0gZGVsdGFzLnNsaWNlKDAsIGlkeCkuY29uY2F0KFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRzbGliXzEuX19hc3NpZ24oe30sIGRlbHRhUmVsYXRpb24sIHsgJG1ldGE6IG9wdGltaXN0aWMgPyAncmVtb3ZpbmcnIDogJ3BlcnNpc3RlZCcgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgXSwgZGVsdGFzLnNsaWNlKGlkeCArIDEpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBlcnNpc3RlZC4gSnVzdCByZW1vdmUgaXQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbHRhcyA9IGRlbHRhcy5zbGljZSgwLCBpZHgpLmNvbmNhdChkZWx0YXMuc2xpY2UoaWR4ICsgMSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICd1cGRhdGUnOlxyXG4gICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBSZXBvTXV0YXRpb25cclxuICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICBpZiAobS5icmFuY2hJZCAhPT0gYnJhbmNoSWQpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiY29udGludWVcIjtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaWR4ID0gZGVsdGFzLmZpbmRJbmRleChmdW5jdGlvbiAoZGVsdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlbHRhLnR5cGUgPT09ICdtb2RpZnknICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWx0YS50YXJnZXRJZCA9PT0gbS5pZDtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaWR4IDwgMCAmJiAhaGFzQWRkaXRpb25hbEZpbHRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWx0YXMgPSBbe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdtb2RpZnknLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlOiBtLnRhYmxlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldElkOiBtLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldE5hbWU6IG0udGFyZ2V0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBtLmRlbHRhRG9jLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVUaW1lOiBEYXRlLm5vdygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyaWJ1dG9yczogW3VzZXJEaXNwbGF5TmFtZV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJG1ldGE6IG9wdGltaXN0aWMgPyAnYWRkaW5nJyA6ICdwZXJzaXN0ZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfV0uY29uY2F0KGRlbHRhcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXhpc3RpbmdEZWx0YURvYyA9IGRlbHRhc1tpZHhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29udHJpYnV0b3JzID0gZXhpc3RpbmdEZWx0YURvYy5jb250cmlidXRvcnMuc2xpY2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb250cmlidXRvcnMuaW5jbHVkZXModXNlckRpc3BsYXlOYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJpYnV0b3JzLnB1c2godXNlckRpc3BsYXlOYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3RGF0YSA9IG1lcmdlRGVsdGFzKGV4aXN0aW5nRGVsdGFEb2MuZGF0YSwgbS5kZWx0YURvYywgeyByZW1vdmVVbnNldFByb3BzOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW9wdGltaXN0aWMgJiYgT2JqZWN0LmtleXMobmV3RGF0YSkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb21taXR0ZWQgbXV0YXRpb24gdGhhdCByZXNldHMgYSBkZWx0YURvYy4gUmVtb3ZlIHRoZSBkZWx0YURvYyBlbnRpcmVseTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbHRhcyA9IGRlbHRhcy5zbGljZSgwLCBpZHgpLmNvbmNhdChkZWx0YXMuc2xpY2UoaWR4ICsgMSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWx0YXMgPSBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbW9kaWZ5JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGU6IG0udGFibGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldElkOiBtLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXROYW1lOiBtLnRhcmdldE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IG5ld0RhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVUaW1lOiBEYXRlLm5vdygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250cmlidXRvcnM6IGNvbnRyaWJ1dG9ycyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJG1ldGE6IG9wdGltaXN0aWMgPyAndXBkYXRpbmcnIDogJ3BlcnNpc3RlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXS5jb25jYXQoZGVsdGFzLnNsaWNlKDAsIGlkeCksIGRlbHRhcy5zbGljZShpZHggKyAxKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgZm9yICh2YXIgX2kgPSAwLCBtdXRhdGlvbnNfMSA9IG11dGF0aW9uczsgX2kgPCBtdXRhdGlvbnNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICB2YXIgbSA9IG11dGF0aW9uc18xW19pXTtcclxuICAgICAgICB2YXIgc3RhdGVfMSA9IF9sb29wXzEobSk7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBzdGF0ZV8xID09PSBcIm9iamVjdFwiKVxyXG4gICAgICAgICAgICByZXR1cm4gc3RhdGVfMS52YWx1ZTtcclxuICAgIH1cclxuICAgIHJldHVybiBkZWx0YXM7XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwbHktbXV0YXRpb25zLW9uLWRlbHRhcy5qcy5tYXAiLCJpbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xyXG5pbXBvcnQgeyBIdHRwRXJyb3IgfSBmcm9tICcuLi8uLi9rZWQtYmFja2VuZC1jbGllbnQnO1xyXG5pbXBvcnQgeyBhcHBseU11dGF0aW9uc09uRGVsdGFzIH0gZnJvbSAnLi9hcHBseS1tdXRhdGlvbnMtb24tZGVsdGFzJztcclxudmFyIERlbHRhQ2FjaGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEZWx0YUNhY2hlKGdldENsaWVudCwgZ2V0VXNlciwgZ2V0VXNlckRpc3BsYXlOYW1lKSB7XHJcbiAgICAgICAgdGhpcy5nZXRDbGllbnQgPSBnZXRDbGllbnQ7XHJcbiAgICAgICAgdGhpcy5nZXRVc2VyID0gZ2V0VXNlcjtcclxuICAgICAgICB0aGlzLmdldFVzZXJEaXNwbGF5TmFtZSA9IGdldFVzZXJEaXNwbGF5TmFtZTtcclxuICAgICAgICB0aGlzLmxvb2t1cCA9IHt9O1xyXG4gICAgfVxyXG4gICAgRGVsdGFDYWNoZS5wcm90b3R5cGUuYXBwbHlNdXRhdGlvbnMgPSBmdW5jdGlvbiAobXV0YXRpb25zLCBfYSkge1xyXG4gICAgICAgIHZhciBvcHRpbWlzdGljID0gKF9hID09PSB2b2lkIDAgPyB7IG9wdGltaXN0aWM6IGZhbHNlIH0gOiBfYSkub3B0aW1pc3RpYztcclxuICAgICAgICAvLyBBcHBseSBtdXRhdGlvbnMgbG9jYWxseSBvbnRvIHRoZSBEZWx0YUNhY2hlIGFuZCBub3RpZnkgdGhlaXIgc3Vic2NyaWJlcnNcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9iID0gT2JqZWN0LmtleXModGhpcy5sb29rdXApOyBfaSA8IF9iLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgcXVlcnlLZXkgPSBfYltfaV07XHJcbiAgICAgICAgICAgIHZhciBjYWNoZUVudHJ5ID0gdGhpcy5sb29rdXBbcXVlcnlLZXldO1xyXG4gICAgICAgICAgICBpZiAoY2FjaGVFbnRyeS52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gSW5zdGVhZCBoZXJlOiBTdG9yZSB0aGUgbXV0YXRpb25zIG9uIGNhY2hlRW50cnkuIE5vIG1hdHRlciBpZiBpdCB5ZXQgaGFzIHZhbHVlIG9yIG5vdC5cclxuICAgICAgICAgICAgICAgIC8vIFRoZW4gYXBwbHkgbXV0YXRpb24gd2hlbmV2ZXIgc3Vic2NyaWJpbmchIChCZXR0ZXIgaGFuZGxpbmcgb2YgbXV0YXRpb25zIHRoYXQgYXJyaXZlcyBiZWZvcmUgZmV0Y2goKSBpcyBkb25lKVxyXG4gICAgICAgICAgICAgICAgLy8gKFNlZSBob3cgSSBoYW5kbGUgdGhpcyBpbiBxdWVyeS1zZXQudHMpXHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3VmFsdWUgPSBhcHBseU11dGF0aW9uc09uRGVsdGFzKGNhY2hlRW50cnkucXVlcnkuYnJhbmNoSWQsIGNhY2hlRW50cnkudmFsdWUsIG11dGF0aW9ucywgb3B0aW1pc3RpYywgdGhpcy5nZXRVc2VyRGlzcGxheU5hbWUoKSwgISFjYWNoZUVudHJ5LnF1ZXJ5LnRhZ3MpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5ld1ZhbHVlID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIG11dGF0aW9uIHJlcXVpcmVzIGNhY2hlRW50cnkgdG8gYmUgcmVmZXRjaGVkIGZyb20gc2VydmVyXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFvcHRpbWlzdGljKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENhbGxlciBoYXMgc3VjY2Vzc2Z1bGx5IHBlcmZvcm1lZCB0aGUgbXV0YXRpb25zIGFuZCBnb3Qgc3VjY2VzcyBiYWNrIGZyb20gc2VydmVyLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJdCdzIG9rIHRvIHJlZmV0Y2ggdGhlIGRlbHRhcyBmcm9tIHNlcnZlciBub3c6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlRW50cnkuZmV0Y2goKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWZ0ZXIgZmV0Y2ggY29tcGxldGVzLCBpdCB3aWxsIG5vdGlmeSB0aGUgc3Vic2NyaWJlcnMuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG5ld1ZhbHVlICE9PSBjYWNoZUVudHJ5LnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVFbnRyeS5vcHRpbWlzdGljVmFsdWUgPSBuZXdWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW9wdGltaXN0aWMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlRW50cnkudmFsdWUgPSBuZXdWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBjYWNoZUVudHJ5Lm5vdGlmeShuZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRGVsdGFDYWNoZS5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gKHF1ZXJ5LCBvYnNlcnZlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGNhY2hlRW50cnkgPSB0aGlzLmxvb2t1cFtxdWVyeS5icmFuY2hJZCArIHF1ZXJ5LnRhZ3NdO1xyXG4gICAgICAgIGlmICghY2FjaGVFbnRyeSkge1xyXG4gICAgICAgICAgICBjYWNoZUVudHJ5ID0gbmV3IERlbHRhQ2FjaGVFbnRyeSh0aGlzLmdldENsaWVudCgpLCBxdWVyeSk7XHJcbiAgICAgICAgICAgIHRoaXMubG9va3VwW3F1ZXJ5LmJyYW5jaElkICsgcXVlcnkudGFnc10gPSBjYWNoZUVudHJ5O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2FjaGVFbnRyeS5jbGVhbnVwVGltZXIpIHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGNhY2hlRW50cnkuY2xlYW51cFRpbWVyKTtcclxuICAgICAgICAgICAgY2FjaGVFbnRyeS5jbGVhbnVwVGltZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0ge1xyXG4gICAgICAgICAgICB1bnN1YnNjcmliZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgY2FjaGVFbnRyeS5zdWJzY3JpYmVycyA9IGNhY2hlRW50cnkuc3Vic2NyaWJlcnMuZmlsdGVyKGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvID0gX2Eub2JzZXJ2ZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8gIT09IG9ic2VydmVyO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FjaGVFbnRyeS5zdWJzY3JpYmVycy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWNoZUVudHJ5LmNsZWFudXBUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FjaGVFbnRyeS5zdWJzY3JpYmVycy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBfdGhpcy5sb29rdXBbcXVlcnkuYnJhbmNoSWQgKyBxdWVyeS50YWdzXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0sIDEwMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGNhY2hlRW50cnkuc3Vic2NyaWJlcnMucHVzaCh7IG9ic2VydmVyOiBvYnNlcnZlciwgc3Vic2NyaXB0aW9uOiBzdWJzY3JpcHRpb24gfSk7XHJcbiAgICAgICAgaWYgKGNhY2hlRW50cnkudmFsdWUpIHtcclxuICAgICAgICAgICAgLy8gVmFsdWUgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IHJldHJpZXZlZCBhbHJlYWR5LiBQaWNrIGZyb20gY2FjaGUuXHJcbiAgICAgICAgICAgIG9ic2VydmVyKGNhY2hlRW50cnkub3B0aW1pc3RpY1ZhbHVlIHx8IGNhY2hlRW50cnkudmFsdWUsIG51bGwsIHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGNhY2hlRW50cnkuaXNGZXRjaGluZykge1xyXG4gICAgICAgICAgICAvLyBBIHZhbHVlIGlzIG9uIGl0cyB3YXkuIFNpdCBiYWNrIGFuZCByZWxheC4gQWxsIHJlZ2lzdGVyZWRcclxuICAgICAgICAgICAgLy8gb2JzZXJ2ZXJzIChpbmNsdWRpbmcgdGhpcyBvbmUpIHdpbGwgYmUgbm90aWZpZWQgd2hlbiBkYXRhIGFycml2ZXNcclxuICAgICAgICAgICAgLy8gb3IgZmFpbHMuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGNhY2hlRW50cnkuZXJyb3IpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIobnVsbCwgY2FjaGVFbnRyeS5lcnJvciwgc3Vic2NyaXB0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNhY2hlRW50cnkuZmV0Y2goKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRGVsdGFDYWNoZTtcclxufSgpKTtcclxuZXhwb3J0IHsgRGVsdGFDYWNoZSB9O1xyXG52YXIgRGVsdGFDYWNoZUVudHJ5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRGVsdGFDYWNoZUVudHJ5KGNsaWVudCwgcXVlcnkpIHtcclxuICAgICAgICB0aGlzLmZldGNoT3BlcmF0aW9uSWQgPSAwOyAvLyBNYWtlcyBzdXJlIGEgcmUtZmV0Y2ggd2lsbCBkaXNjYXJkIHRoZSByZXN1bHQgZnJvbSBhbnkgb25nb2luZyBmZXRjaC5cclxuICAgICAgICB0aGlzLmNsaWVudCA9IGNsaWVudDtcclxuICAgICAgICB0aGlzLnF1ZXJ5ID0gcXVlcnk7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5lcnJvciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5vcHRpbWlzdGljVmFsdWUgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuc3Vic2NyaWJlcnMgPSBbXTtcclxuICAgICAgICB0aGlzLmlzRmV0Y2hpbmcgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmNsZWFudXBUaW1lciA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBEZWx0YUNhY2hlRW50cnkucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGZldGNoT3BlcmF0aW9uSWQgPSArK3RoaXMuZmV0Y2hPcGVyYXRpb25JZDtcclxuICAgICAgICB0aGlzLmlzRmV0Y2hpbmcgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuZmV0Y2hGcm9tU2VydmVyKCkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgLy8gU3VjY2Vzc1xyXG4gICAgICAgICAgICBpZiAoZmV0Y2hPcGVyYXRpb25JZCA9PT0gX3RoaXMuZmV0Y2hPcGVyYXRpb25JZCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuaXNGZXRjaGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdmFsdWUuc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gYi5kYXRlVGltZSAtIGEuZGF0ZVRpbWU7IH0pOyAvLyBMYXRlc3QgZmlyc3RcclxuICAgICAgICAgICAgICAgIF90aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5vcHRpbWlzdGljVmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIF90aGlzLm5vdGlmeSh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgLy8gRmFpbFxyXG4gICAgICAgICAgICBpZiAoZmV0Y2hPcGVyYXRpb25JZCA9PT0gX3RoaXMuZmV0Y2hPcGVyYXRpb25JZCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuaXNGZXRjaGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuZXJyb3IgPSBlcnJvcjtcclxuICAgICAgICAgICAgICAgIF90aGlzLmZhaWwoZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgRGVsdGFDYWNoZUVudHJ5LnByb3RvdHlwZS5mZXRjaEZyb21TZXJ2ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciByZXMsIF9hLCBfYjtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9jKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucXVlcnkuYnJhbmNoSWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RlbHRhcyBvbmx5IGF2YWlsYWJsZSBvbiBicmFuY2hlcycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmNsaWVudC5odHRwLmdldCgnZGVsdGFzJywgdGhpcy5xdWVyeSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gX2Muc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShyZXMuc3RhdHVzID49IDMwMCB8fCByZXMuc3RhdHVzIDwgMjAwKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gSHR0cEVycm9yLmJpbmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iID0gW3ZvaWQgMCwgcmVzLnN0YXR1c107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlcy50ZXh0KCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogdGhyb3cgbmV3IChfYS5hcHBseShIdHRwRXJyb3IsIF9iLmNvbmNhdChbX2Muc2VudCgpXSkpKSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzLmpzb24oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qLywgX2Muc2VudCgpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgRGVsdGFDYWNoZUVudHJ5LnByb3RvdHlwZS5ub3RpZnkgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5zdWJzY3JpYmVyczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIF9iID0gX2FbX2ldLCBvYnNlcnZlciA9IF9iLm9ic2VydmVyLCBzdWJzY3JpcHRpb24gPSBfYi5zdWJzY3JpcHRpb247XHJcbiAgICAgICAgICAgIG9ic2VydmVyKHZhbHVlLCBudWxsLCBzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBEZWx0YUNhY2hlRW50cnkucHJvdG90eXBlLmZhaWwgPSBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICB2YXIgY29weSA9IHRoaXMuc3Vic2NyaWJlcnMuc2xpY2UoKTtcclxuICAgICAgICB0aGlzLnN1YnNjcmliZXJzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBjb3B5XzEgPSBjb3B5OyBfaSA8IGNvcHlfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIF9hID0gY29weV8xW19pXSwgb2JzZXJ2ZXIgPSBfYS5vYnNlcnZlciwgc3Vic2NyaXB0aW9uID0gX2Euc3Vic2NyaXB0aW9uO1xyXG4gICAgICAgICAgICBvYnNlcnZlcihudWxsLCBlcnJvciwgc3Vic2NyaXB0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIERlbHRhQ2FjaGVFbnRyeTtcclxufSgpKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVsdGEtY2FjaGUuanMubWFwIiwiaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcclxuaW1wb3J0IHsgQ29sbGVjdGlvbiB9IGZyb20gJy4uLy4uL29ic2VydmFibGUnO1xyXG52YXIgRGVsdGFDb2xsZWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoRGVsdGFDb2xsZWN0aW9uLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gRGVsdGFDb2xsZWN0aW9uKGRlbHRhQ2FjaGUsIHF1ZXJ5KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZnVuY3Rpb24gKG9ic2VydmVyKSB7IHJldHVybiBfdGhpcy5kZWx0YUNhY2hlLnN1YnNjcmliZShxdWVyeSwgb2JzZXJ2ZXIpOyB9KSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmRlbHRhQ2FjaGUgPSBkZWx0YUNhY2hlO1xyXG4gICAgICAgIF90aGlzLnF1ZXJ5ID0gcXVlcnk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgRGVsdGFDb2xsZWN0aW9uLnByb3RvdHlwZS50YWdzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB0YWdzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdGFnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IERlbHRhQ29sbGVjdGlvbih0aGlzLmRlbHRhQ2FjaGUsIHRzbGliXzEuX19hc3NpZ24oe30sIHRoaXMucXVlcnksIHsgdGFnczogdGFncyB9KSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIERlbHRhQ29sbGVjdGlvbjtcclxufShDb2xsZWN0aW9uKSk7XHJcbmV4cG9ydCB7IERlbHRhQ29sbGVjdGlvbiB9O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWx0YS1jb2xsZWN0aW9uLmpzLm1hcCIsImltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XHJcbmV4cG9ydCBmdW5jdGlvbiBhcHBseURlbHRhKGRvYywgZGVsdGEpIHtcclxuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZGVsdGEpO1xyXG4gICAgdmFyIHRhcmdldERvYyA9IGRvYztcclxuICAgIGZvciAodmFyIF9pID0gMCwga2V5c18xID0ga2V5czsgX2kgPCBrZXlzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgdmFyIGtleSA9IGtleXNfMVtfaV07XHJcbiAgICAgICAgaWYgKHRhcmdldERvYyA9PT0gZG9jKVxyXG4gICAgICAgICAgICB0YXJnZXREb2MgPSB0c2xpYl8xLl9fYXNzaWduKHt9LCBkb2MpO1xyXG4gICAgICAgIHZhciB2YWwgPSBkZWx0YVtrZXldO1xyXG4gICAgICAgIGlmICh2YWwgJiYgdHlwZW9mIHZhbCA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgdmFyIG1ldGFJbnN0cnVjdGlvbnMgPSBPYmplY3Qua2V5cyh2YWwpXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGtleS5zdGFydHNXaXRoKCckJyk7IH0pO1xyXG4gICAgICAgICAgICBpZiAobWV0YUluc3RydWN0aW9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChtaSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBtaVZhbHVlID0gdmFsW21pXTtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIkdW5zZXRcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRG8gbm90aGluZyBvbiB0YXJnZXQgZG9jIVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RG9jLiR3YXNVbnNldCA9IHRydWU7IC8vIEp1c3QgbWFyayBpdCBmb3IgcmUtcmV0cmlldmFsIGFmdGVyIHN1Y2Nlc3NmdWwgcG9zdGluZyBjaGFuZ2VzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIiRhZGRcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlc1RvQWRkID0gbWlWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh2YWx1ZXNUb0FkZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCIkYWRkIGluc3RydWN0aW9uIG11c3QgY29udGFpbiBhcnJheVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXRBcnJheSA9IHRhcmdldERvY1trZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHRhcmdldEFycmF5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldEFycmF5ID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRBcnJheSA9IHRhcmdldEFycmF5LnNsaWNlKCk7IC8vIE9uIEpTIHNpZGUsIHdlIG11c3QgYmUgaW1tdXRhYmxlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXREb2Nba2V5XSA9IHRhcmdldEFycmF5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCB2YWx1ZXNUb0FkZF8xID0gdmFsdWVzVG9BZGQ7IF9pIDwgdmFsdWVzVG9BZGRfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IHZhbHVlc1RvQWRkXzFbX2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGFyZ2V0QXJyYXkuaW5jbHVkZXModikpIHsgLy8gYXZvaWQgZHVwc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRBcnJheS5wdXNoKHYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIkcmVtb3ZlXCI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZXNUb1JlbW92ZV8xID0gbWlWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh2YWx1ZXNUb1JlbW92ZV8xKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIiRyZW1vdmUgaW5zdHJ1Y3Rpb24gbXVzdCBjb250YWluIGFycmF5XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldEFycmF5ID0gdGFyZ2V0RG9jW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodGFyZ2V0QXJyYXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0QXJyYXkgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldERvY1trZXldID0gdGFyZ2V0QXJyYXkuZmlsdGVyKGZ1bmN0aW9uICh0KSB7IHJldHVybiAhdmFsdWVzVG9SZW1vdmVfMS5pbmNsdWRlcyh0KTsgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfYSA9IDAsIG1ldGFJbnN0cnVjdGlvbnNfMSA9IG1ldGFJbnN0cnVjdGlvbnM7IF9hIDwgbWV0YUluc3RydWN0aW9uc18xLmxlbmd0aDsgX2ErKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBtaSA9IG1ldGFJbnN0cnVjdGlvbnNfMVtfYV07XHJcbiAgICAgICAgICAgICAgICAgICAgX2xvb3BfMShtaSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0YXJnZXREb2Nba2V5XSA9IHZhbDtcclxuICAgIH1cclxuICAgIHJldHVybiB0YXJnZXREb2M7XHJcbn1cclxuLy8ge25hbWU6IFwiVWxsYVwifSwge25hbWU6IHskdW5zZXQ6MH1cclxuLy8ge3RhZ3M6IHskYWRkOiBcImhlalwifX0sIHt0YWdzOiB7JHVuc2V0OjB9XCJ9XHJcbmV4cG9ydCBmdW5jdGlvbiBtZXJnZURlbHRhcyhkZWx0YTEsIGRlbHRhMiwgX2EpIHtcclxuICAgIHZhciByZW1vdmVVbnNldFByb3BzID0gKF9hID09PSB2b2lkIDAgPyB7IHJlbW92ZVVuc2V0UHJvcHM6IGZhbHNlIH0gOiBfYSkucmVtb3ZlVW5zZXRQcm9wcztcclxuICAgIC8vcmV0dXJuIHsuLi5kZWx0YTEsIC4uLmRlbHRhMn07XHJcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGRlbHRhMik7XHJcbiAgICB2YXIgdGFyZ2V0RGVsdGEgPSB0c2xpYl8xLl9fYXNzaWduKHt9LCBkZWx0YTEpO1xyXG4gICAgZm9yICh2YXIgX2kgPSAwLCBrZXlzXzIgPSBrZXlzOyBfaSA8IGtleXNfMi5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICB2YXIga2V5ID0ga2V5c18yW19pXTtcclxuICAgICAgICB2YXIgdmFsID0gZGVsdGEyW2tleV07XHJcbiAgICAgICAgaWYgKHZhbCAmJiB0eXBlb2YgdmFsID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICB2YXIgbWV0YUluc3RydWN0aW9ucyA9IE9iamVjdC5rZXlzKHZhbClcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4ga2V5LnN0YXJ0c1dpdGgoJyQnKTsgfSk7XHJcbiAgICAgICAgICAgIGlmIChtZXRhSW5zdHJ1Y3Rpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHZhciBfbG9vcF8yID0gZnVuY3Rpb24gKG1pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1pVmFsdWUgPSB2YWxbbWldO1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobWkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIiR1bnNldFwiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVtb3ZlVW5zZXRQcm9wcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0YXJnZXREZWx0YVtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gbWF0dGVyIGlmIHRhcmdldERlbHRhIGlzIGVtcHR5IG9yIGhhcyB2YWx1ZS4gU2V0IGl0IHRvIHskdW5zZXQ6MH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0byBtYWtlIHN1cmUgdGhlIHZlcnkgZW5kIHJlc3VsdCB3aWxsIGhhdmUgeyR1bnNldDowfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldERlbHRhW2tleV0gPSB7ICR1bnNldDogMCB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIiRhZGRcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlc1RvQWRkXzIgPSBtaVZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlc1RvQWRkXzIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiJGFkZCBpbnN0cnVjdGlvbiBtdXN0IGNvbnRhaW4gYXJyYXlcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0TWV0YVByb3AgPSB0YXJnZXREZWx0YVtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0TWV0YVByb3AgPSB0YXJnZXRNZXRhUHJvcCA/IHRzbGliXzEuX19hc3NpZ24oe30sIHRhcmdldE1ldGFQcm9wKSA6IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RGVsdGFba2V5XSA9IHRhcmdldE1ldGFQcm9wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmlyc3QsIGp1c3QgY2hlY2sgaWYgdGFyZ2V0IG1ldGFQcm9wIGhhcyB7JHJlbW92ZTogWy4uLml0ZW1zXX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHNvLCByZW1vdmUgYW55IGVxdWFsIGl0ZW1zIGZyb20gdGhlcmUgYmVmb3JlIG1lcmdpbmcgdGhlIHskYWRkOiBbLi4uXX0gYXJyYXlzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldFJlbW92ZUFycmF5ID0gdGFyZ2V0TWV0YVByb3AuJHJlbW92ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRhcmdldFJlbW92ZUFycmF5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldE1ldGFQcm9wLiRyZW1vdmUgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRSZW1vdmVBcnJheS5maWx0ZXIoZnVuY3Rpb24gKHQpIHsgcmV0dXJuICF2YWx1ZXNUb0FkZF8yLmluY2x1ZGVzKHQpOyB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0TWV0YVByb3AuJHJlbW92ZS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgJHJlbW92ZSBhcnJheSBiZWNhbWUgZW10cHkuIFJlbW92ZSB0aGUgJHJlbW92ZSBwcm9wLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGFyZ2V0TWV0YVByb3AuJHJlbW92ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3cgaXQncyB0aW1lIHRvIG1lcmdlIG9yIGNyZWF0ZSB0YXJnZXQgJGFkZCBhcnJheS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXRBZGRBcnJheSA9IHRhcmdldE1ldGFQcm9wLiRhZGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRBZGRBcnJheSA9IHRhcmdldEFkZEFycmF5ID8gdGFyZ2V0QWRkQXJyYXkuY29uY2F0KHZhbHVlc1RvQWRkXzIpIDogdmFsdWVzVG9BZGRfMi5zbGljZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0TWV0YVByb3AuJGFkZCA9IHRhcmdldEFkZEFycmF5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIiRyZW1vdmVcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlc1RvUmVtb3ZlXzIgPSBtaVZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlc1RvUmVtb3ZlXzIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiJHJlbW92ZSBpbnN0cnVjdGlvbiBtdXN0IGNvbnRhaW4gYXJyYXlcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0TWV0YVByb3AgPSB0YXJnZXREZWx0YVtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0TWV0YVByb3AgPSB0YXJnZXRNZXRhUHJvcCA/IHRzbGliXzEuX19hc3NpZ24oe30sIHRhcmdldE1ldGFQcm9wKSA6IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RGVsdGFba2V5XSA9IHRhcmdldE1ldGFQcm9wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmlyc3QsIGp1c3QgY2hlY2sgaWYgdGFyZ2V0IG1ldGFQcm9wIGhhcyB7JGFkZDogWy4uLml0ZW1zXX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHNvLCByZW1vdmUgYW55IGVxdWFsIGl0ZW1zIGZyb20gdGhlcmUgYmVmb3JlIG1lcmdpbmcgdGhlIHskcmVtb3ZlOiBbLi4uXX0gYXJyYXlzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldEFkZEFycmF5ID0gdGFyZ2V0TWV0YVByb3AuJHJlbW92ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRhcmdldEFkZEFycmF5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldE1ldGFQcm9wLiRhZGQgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRBZGRBcnJheS5maWx0ZXIoZnVuY3Rpb24gKHQpIHsgcmV0dXJuICF2YWx1ZXNUb1JlbW92ZV8yLmluY2x1ZGVzKHQpOyB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0TWV0YVByb3AuJGFkZC5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgJGFkZCBhcnJheSBiZWNhbWUgZW10cHkuIFJlbW92ZSB0aGUgJGFkZCBwcm9wLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGFyZ2V0TWV0YVByb3AuJGFkZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3cgaXQncyB0aW1lIHRvIG1lcmdlIG9yIGNyZWF0ZSB0YXJnZXQgJHJlbW92ZSBhcnJheS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXRSZW1vdmVBcnJheSA9IHRhcmdldE1ldGFQcm9wLiRyZW1vdmU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRSZW1vdmVBcnJheSA9IHRhcmdldFJlbW92ZUFycmF5ID8gdGFyZ2V0UmVtb3ZlQXJyYXkuY29uY2F0KHZhbHVlc1RvUmVtb3ZlXzIpIDogdmFsdWVzVG9SZW1vdmVfMi5zbGljZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0TWV0YVByb3AuJHJlbW92ZSA9IHRhcmdldFJlbW92ZUFycmF5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2IgPSAwLCBtZXRhSW5zdHJ1Y3Rpb25zXzIgPSBtZXRhSW5zdHJ1Y3Rpb25zOyBfYiA8IG1ldGFJbnN0cnVjdGlvbnNfMi5sZW5ndGg7IF9iKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbWkgPSBtZXRhSW5zdHJ1Y3Rpb25zXzJbX2JdO1xyXG4gICAgICAgICAgICAgICAgICAgIF9sb29wXzIobWkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGFyZ2V0RGVsdGFba2V5XSA9IHZhbDtcclxuICAgIH1cclxuICAgIHJldHVybiB0YXJnZXREZWx0YTtcclxufVxyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWx0YS1tZXJnZS5qcy5tYXAiLCJleHBvcnQgKiBmcm9tICcuL2tlZGJhY2tlbmQtY29sbGVjdGlvbic7XHJcbmV4cG9ydCAqIGZyb20gJy4va2VkYmFja2VuZC1xdWVyeSc7XHJcbmV4cG9ydCAqIGZyb20gJy4va2VkYmFja2VuZC1yZXBvJztcclxuZXhwb3J0ICogZnJvbSAnLi9rZWRiYWNrZW5kLXN1YnNjcmlwdGlvbic7XHJcbmV4cG9ydCAqIGZyb20gJy4va2VkYmFja2VuZC13cml0ZXInO1xyXG5leHBvcnQgKiBmcm9tICcuL211dGF0aW9uLXF1ZXVlJztcclxuZXhwb3J0ICogZnJvbSAnLi9xdWVyeS1zZXQnO1xyXG5leHBvcnQgKiBmcm9tICcuLi9vYnNlcnZhYmxlL21peGluJztcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwiaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcclxuaW1wb3J0IHsgQmF0Y2hSdW5uZXIgfSBmcm9tICcuLi9rZWQtYmFja2VuZC1jbGllbnQnO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kU3Vic2NyaXB0aW9uIH0gZnJvbSBcIi4va2VkYmFja2VuZC1zdWJzY3JpcHRpb25cIjtcclxuaW1wb3J0IHsgQ2FjaGVCdXN0IH0gZnJvbSAnLi9jYWNoZS1idXN0JztcclxuaW1wb3J0IHsgS2VkQmFja2VuZFF1ZXJ5IH0gZnJvbSAnLi9rZWRiYWNrZW5kLXF1ZXJ5JztcclxuaW1wb3J0IHsgQ29sbGVjdGlvbiB9IGZyb20gJy4uL29ic2VydmFibGUvY29sbGVjdGlvbic7XHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIGEgXCJsaXZlXCIgcXVlcnkgYWdhaW5zdCBhIHRhYmxlIG9yIGZpbHRlcmVkIHRhYmxlLlxyXG4gKi9cclxudmFyIEtlZEJhY2tlbmRDb2xsZWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoS2VkQmFja2VuZENvbGxlY3Rpb24sIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBLZWRCYWNrZW5kQ29sbGVjdGlvbihyZXBvLCB0YWJsZSwgcXVlcnkpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcclxuICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IG5ldyBLZWRCYWNrZW5kU3Vic2NyaXB0aW9uKG9ic2VydmVyLCBfdGhpcyk7XHJcbiAgICAgICAgICAgIF90aGlzLnJlcG8ucXVlcnlTZXQuc3Vic2NyaWJlKHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XHJcbiAgICAgICAgfSkgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5yZXBvID0gcmVwbztcclxuICAgICAgICBfdGhpcy50YWJsZSA9IHRhYmxlO1xyXG4gICAgICAgIF90aGlzLnF1ZXJ5ID0gcXVlcnk7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEtlZEJhY2tlbmRDb2xsZWN0aW9uLnByb3RvdHlwZSwgXCJxdWVyeUtleVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBLZWRCYWNrZW5kUXVlcnkucXVlcnlLZXkodGhpcy50YWJsZSwgdGhpcy5xdWVyeSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLCBcImluY2x1ZGVzXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2luY2x1ZGVzIHx8ICh0aGlzLl9pbmNsdWRlcyA9IFtdLmNvbmNhdCh0aGlzLnF1ZXJ5LmluY2x1ZGUgfHwgW10pKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIEtlZEJhY2tlbmRDb2xsZWN0aW9uLnByb3RvdHlwZS5hcHBseVF1ZXJ5ID0gZnVuY3Rpb24gKHF1ZXJ5KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBLZWRCYWNrZW5kQ29sbGVjdGlvbih0aGlzLnJlcG8sIHRoaXMudGFibGUsIHRzbGliXzEuX19hc3NpZ24oe30sIHRoaXMucXVlcnksIHF1ZXJ5KSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLmFkZFRvUXVlcnlBcnJheVByb3AgPSBmdW5jdGlvbiAoYXJyYXlQcm9wLCBlbnRyaWVzKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFwcGx5UXVlcnkoKF9hID0ge30sIF9hW2FycmF5UHJvcF0gPSAodGhpcy5xdWVyeVthcnJheVByb3BdIHx8IFtdKS5jb25jYXQoZW50cmllcyksIF9hKSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLmFkZEZsYWdzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBmbGFncyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGZsYWdzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmFkZFRvUXVlcnlBcnJheVByb3AoXCJmbGFnc1wiLCBmbGFncyk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLmRlYnVnID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFwcGx5UXVlcnkoeyBkZWJ1ZzogdHJ1ZSB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUuaWRzT25seSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hZGRGbGFncyhcImlkc09ubHlcIik7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLmlkc0FuZE5hbWVzT25seSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hZGRGbGFncyhcImlkc0FuZE5hbWVzT25seVwiKTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUuaW5jbHVkZUlkc09ubHkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkRmxhZ3MoXCJpbmNsdWRlSWRzT25seVwiKTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUuaW5jbHVkZUlkc0FuZE5hbWVzT25seSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hZGRGbGFncyhcImluY2x1ZGVJZHNBbmROYW1lc09ubHlcIik7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLmJldHdlZW4gPSBmdW5jdGlvbiAoZnJvbSwgdG8pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hcHBseVF1ZXJ5KHsgZnJvbTogZnJvbSwgdG86IHRvIH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDb2xsZWN0aW9uLnByb3RvdHlwZS5yb2xlID0gZnVuY3Rpb24gKHJvbGUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hcHBseVF1ZXJ5KHsgcm9sZTogcm9sZSB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUuaGFzRWRnZXNGcm9tID0gZnVuY3Rpb24gKGlkcywgb3B0aW9ucykge1xyXG4gICAgICAgIGlmIChpZHMubGVuZ3RoID09PSAwIHx8IGlkcy5zb21lKGZ1bmN0aW9uIChpZCkgeyByZXR1cm4gIWlkOyB9KSlcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBpZCBsaXN0IGdpdmVuIHRvIENvbGxlY3Rpb24uaGFzRWRnZXNGcm9tKFwiICsgSlNPTi5zdHJpbmdpZnkoaWRzKSArIFwiKVwiKTtcclxuICAgICAgICB2YXIgaGVmID0gdGhpcy5hZGRUb1F1ZXJ5QXJyYXlQcm9wKFwiaGFzRWRnZXNGcm9tXCIsIGlkcyk7XHJcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMgJiYgb3B0aW9ucy5pbmNsdWRlRGVsdGFFZGdlcyA/XHJcbiAgICAgICAgICAgIGhlZi5hZGRGbGFncyhcImluY2x1ZGVEZWx0YUVkZ2VzXCIpIDpcclxuICAgICAgICAgICAgaGVmO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDb2xsZWN0aW9uLnByb3RvdHlwZS5oYXNFZGdlc1RvID0gZnVuY3Rpb24gKGlkcywgb3B0aW9ucykge1xyXG4gICAgICAgIGlmIChpZHMubGVuZ3RoID09PSAwIHx8IGlkcy5zb21lKGZ1bmN0aW9uIChpZCkgeyByZXR1cm4gIWlkOyB9KSlcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBpZCBsaXN0IGdpdmVuIHRvIENvbGxlY3Rpb24uaGFzRWRnZXNUbyhcIiArIEpTT04uc3RyaW5naWZ5KGlkcykgKyBcIilcIik7XHJcbiAgICAgICAgdmFyIGhldCA9IHRoaXMuYWRkVG9RdWVyeUFycmF5UHJvcChcImhhc0VkZ2VzVG9cIiwgaWRzKTtcclxuICAgICAgICByZXR1cm4gb3B0aW9ucyAmJiBvcHRpb25zLmluY2x1ZGVEZWx0YUVkZ2VzID9cclxuICAgICAgICAgICAgaGV0LmFkZEZsYWdzKFwiaW5jbHVkZURlbHRhRWRnZXNcIikgOlxyXG4gICAgICAgICAgICBoZXQ7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLmlkID0gZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5hcHBseVF1ZXJ5KHsgaWRzOiBbaWRdIH0pLnNpbmdsZSh7XHJcbiAgICAgICAgICAgIG9uWmVybzogZnVuY3Rpb24gKCkgeyB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZCBub3QgZmluZCBlbnRpdHkgaW4gXCIgKyBfdGhpcy50YWJsZSArIFwiIHdpdGggaWQgXCIgKyBpZCk7IH0sXHJcbiAgICAgICAgICAgIG9uTWFueTogZnVuY3Rpb24gKCkgeyB0aHJvdyBuZXcgRXJyb3IoXCJNdWx0aXBsZSBlbnRyaWVzIGluIFwiICsgX3RoaXMudGFibGUgKyBcIiB3aXRoIGlkIFwiICsgaWQpOyB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDb2xsZWN0aW9uLnByb3RvdHlwZS5pZHMgPSBmdW5jdGlvbiAoaWRzKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlRdWVyeSh7IGlkczogaWRzIH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDb2xsZWN0aW9uLnByb3RvdHlwZS5uYW1lID0gZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hcHBseVF1ZXJ5KHsgbmFtZTogbmFtZSB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUudGFncyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdGFncyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHRhZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlRdWVyeSh7IHRhZ3M6IHRhZ3MgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLmJyYW5jaElkID0gZnVuY3Rpb24gKGJyYW5jaElkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlRdWVyeSh7IGJyYW5jaElkOiBicmFuY2hJZCB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUuaW5jbHVkZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZ3JhcGhzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgZ3JhcGhzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmFkZFRvUXVlcnlBcnJheVByb3AoXCJpbmNsdWRlXCIsIGdyYXBocyk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLmNhY2hlT3B0aW1pemVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFwcGx5UXVlcnkoeyBjYWNoZUJ1c3Q6IENhY2hlQnVzdC5nZXRDYWNoZUJ1c3QodGhpcy50YWJsZSwgdGhpcy5xdWVyeSwgdGhpcy5yZXBvLmdldFVzZXIoKSwgdGhpcy5pbmNsdWRlcykgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLm11dGF0aW9uc09uRW1wdHkgPSBmdW5jdGlvbiAobXV0YXRpb25GYWN0b3J5KSB7XHJcbiAgICAgICAgdmFyIHR4ID0gbmV3IEJhdGNoUnVubmVyKCk7XHJcbiAgICAgICAgbXV0YXRpb25GYWN0b3J5KHR4KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5hcHBseVF1ZXJ5KHsgbXV0YXRpb25zT25FbXB0eTogdHgubXV0YXRpb25SZXF1ZXN0cyB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUuc2luZ2xlID0gZnVuY3Rpb24gKHRocm93ZXJzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgX2EgPSB0aHJvd2VycyB8fCB7fSwgb25aZXJvID0gX2Eub25aZXJvLCBvbk1hbnkgPSBfYS5vbk1hbnk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudG9WYWx1ZSgpLm1hcChmdW5jdGlvbiAoaXRlbXMpIHtcclxuICAgICAgICAgICAgaWYgKGl0ZW1zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9uWmVybylcclxuICAgICAgICAgICAgICAgICAgICBvblplcm8oKTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTaW5nbGUgaXRlbSBvZiBcIiArIF90aGlzLnRhYmxlICsgXCIgZXhwZWN0ZWQgdG8gYmUgcmV0dXJuZWQgYnkgcXVlcnkgXCIgKyBKU09OLnN0cmluZ2lmeShfdGhpcy5xdWVyeSkgKyBcIiBidXQgbm9uZSB3YXMgZm91bmQuXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpdGVtcy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgICAgICBkZWJ1Z2dlcjtcclxuICAgICAgICAgICAgICAgIGlmIChvbk1hbnkpXHJcbiAgICAgICAgICAgICAgICAgICAgb25NYW55KCk7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJTaW5nbGUgaXRlbSBvZiBcIiArIF90aGlzLnRhYmxlICsgXCIgZXhwZWN0ZWQgdG8gYmUgcmV0dXJuZWQgYnkgcXVlcnkgXCIgKyBKU09OLnN0cmluZ2lmeShfdGhpcy5xdWVyeSkgKyBcIiBidXQgXCIgKyBpdGVtcy5sZW5ndGggKyBcIiB3YXMgZm91bmQuXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtc1swXTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKmNvbWJpbmVMYXRlc3Q8VE90aGVyPihvdGhlcjogUXVlcnlPYnNlcnZhYmxlPFRPdGhlcj4pIHtcclxuICAgICAgcmV0dXJuIHRoaXMucmVuZGVyKHggPT4geCkuY29tYmluZUxhdGVzdChvdGhlcik7XHJcbiAgICB9Ki9cclxuICAgIEtlZEJhY2tlbmRDb2xsZWN0aW9uLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoZG9jLCBjaGFuZ2VzLCBkZWJvdW5jZSkge1xyXG4gICAgICAgIGlmIChkZWJvdW5jZSA9PT0gdm9pZCAwKSB7IGRlYm91bmNlID0gMTAwMDsgfVxyXG4gICAgICAgIHRoaXMucmVwby53cml0ZXIubXV0YXRlKFt7XHJcbiAgICAgICAgICAgICAgICBvcDogJ3VwZGF0ZScsXHJcbiAgICAgICAgICAgICAgICB0YWJsZTogdGhpcy50YWJsZSxcclxuICAgICAgICAgICAgICAgIGJyYW5jaElkOiB0aGlzLnF1ZXJ5LmJyYW5jaElkLFxyXG4gICAgICAgICAgICAgICAgaWQ6IGRvYy5pZCxcclxuICAgICAgICAgICAgICAgIGRlbHRhRG9jOiBjaGFuZ2VzLFxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0TmFtZTogZG9jLm5hbWVcclxuICAgICAgICAgICAgfV0sIGRlYm91bmNlKTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUuYWRkUmVsYXRlZCA9IGZ1bmN0aW9uIChpZCwgbGFiZWwsIHJlbGF0ZWREb2MpIHtcclxuICAgICAgICB0aGlzLnJlcG8ud3JpdGVyLm11dGF0ZShbe1xyXG4gICAgICAgICAgICAgICAgb3A6ICdhZGQtcmVsYXRlZCcsXHJcbiAgICAgICAgICAgICAgICB0YWJsZTogdGhpcy50YWJsZSxcclxuICAgICAgICAgICAgICAgIGJyYW5jaElkOiB0aGlzLnF1ZXJ5LmJyYW5jaElkLFxyXG4gICAgICAgICAgICAgICAgaWQ6IGlkLFxyXG4gICAgICAgICAgICAgICAgZ3JhcGhQcm9wOiBsYWJlbCxcclxuICAgICAgICAgICAgICAgIHJlbGF0ZWREb2M6IHJlbGF0ZWREb2NcclxuICAgICAgICAgICAgfV0sIDApO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDb2xsZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVSZWxhdGVkID0gZnVuY3Rpb24gKGlkLCBsYWJlbCwgcmVsYXRlZERvYykge1xyXG4gICAgICAgIHRoaXMucmVwby53cml0ZXIubXV0YXRlKFt7XHJcbiAgICAgICAgICAgICAgICBvcDogJ3JlbW92ZS1yZWxhdGVkJyxcclxuICAgICAgICAgICAgICAgIHRhYmxlOiB0aGlzLnRhYmxlLFxyXG4gICAgICAgICAgICAgICAgYnJhbmNoSWQ6IHRoaXMucXVlcnkuYnJhbmNoSWQsXHJcbiAgICAgICAgICAgICAgICBpZDogaWQsXHJcbiAgICAgICAgICAgICAgICBncmFwaFByb3A6IGxhYmVsLFxyXG4gICAgICAgICAgICAgICAgcmVsYXRlZERvYzogcmVsYXRlZERvY1xyXG4gICAgICAgICAgICB9XSwgMCk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLnVuZG9MaW5rID0gZnVuY3Rpb24gKGlkLCBsYWJlbCwgcmVsYXRlZElkKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnF1ZXJ5LmJyYW5jaElkKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1bmRvIGxpbmtzIGNhbiBvbmx5IGJlIHBlcmZvcm1lZCBvbiBicmFuY2hlc1wiKTtcclxuICAgICAgICB0aGlzLnJlcG8ud3JpdGVyLm11dGF0ZShbe1xyXG4gICAgICAgICAgICAgICAgb3A6ICd1bmRvLWxpbmsnLFxyXG4gICAgICAgICAgICAgICAgdGFibGU6IHRoaXMudGFibGUsXHJcbiAgICAgICAgICAgICAgICBicmFuY2hJZDogdGhpcy5xdWVyeS5icmFuY2hJZCxcclxuICAgICAgICAgICAgICAgIGlkOiBpZCxcclxuICAgICAgICAgICAgICAgIGdyYXBoUHJvcDogbGFiZWwsXHJcbiAgICAgICAgICAgICAgICByZWxhdGVkSWQ6IHJlbGF0ZWRJZFxyXG4gICAgICAgICAgICB9XSwgMCk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBpZHMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICBpZHNbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yZXBvLndyaXRlci5tdXRhdGUoaWRzLm1hcChmdW5jdGlvbiAoaWQpIHsgcmV0dXJuICh7XHJcbiAgICAgICAgICAgIG9wOiAnZGVsZXRlJyxcclxuICAgICAgICAgICAgdGFibGU6IF90aGlzLnRhYmxlLFxyXG4gICAgICAgICAgICBpZDogaWRcclxuICAgICAgICB9KTsgfSksIDApO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDb2xsZWN0aW9uLnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpcHRpb24pIHtcclxuICAgICAgICB0aGlzLnJlcG8ucXVlcnlTZXQudW5zdWJzY3JpYmUoc3Vic2NyaXB0aW9uKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gS2VkQmFja2VuZENvbGxlY3Rpb247XHJcbn0oQ29sbGVjdGlvbikpO1xyXG5leHBvcnQgeyBLZWRCYWNrZW5kQ29sbGVjdGlvbiB9O1xyXG4vKm1peGluKFxyXG4gIEtlZEJhY2tlbmRDb2xsZWN0aW9uLnByb3RvdHlwZSxcclxuICBNYXBwZWRDb2xsZWN0aW9uLnByb3RvdHlwZSxcclxuICBcIm1hcFwiLCBcImZsYXRcIiwgXCJjb25jYXRcIiwgXCJyZW5kZXJcIiwgXCJsb2FkXCIpOyovXHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWtlZGJhY2tlbmQtY29sbGVjdGlvbi5qcy5tYXAiLCJpbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xyXG5pbXBvcnQgeyB1cGRhdGVBcnJheSB9IGZyb20gJy4uL2tlZC1iYWNrZW5kLWNsaWVudC91dGlscyc7XHJcbmltcG9ydCB7IGJyYW5jaFNlbnNpdGl2ZSwgZ2V0VGFibGVGcm9tTGFiZWwgfSBmcm9tICcuL3V0aWxzJztcclxuaW1wb3J0IHsgYXBwbHlEZWx0YSB9IGZyb20gJy4vZGVsdGEtbWVyZ2UnO1xyXG52YXIgS2VkQmFja2VuZFF1ZXJ5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gS2VkQmFja2VuZFF1ZXJ5KHRhYmxlLCBxdWVyeSwgdXNlciwgcmVwbywgbXV0YXRpb25RdWV1ZSkge1xyXG4gICAgICAgIHRoaXMudGFibGUgPSB0YWJsZTtcclxuICAgICAgICB0aGlzLnF1ZXJ5ID0gcXVlcnk7XHJcbiAgICAgICAgdGhpcy51c2VyID0gdXNlcjtcclxuICAgICAgICB0aGlzLnJlcG8gPSByZXBvO1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25RdWV1ZSA9IG11dGF0aW9uUXVldWU7XHJcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0gW107XHJcbiAgICAgICAgdGhpcy5kYXRhID0gW107XHJcbiAgICAgICAgdGhpcy5nb3RJbml0aWFsUmVzcG9uc2UgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmludmFsaWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmxvYWRlZFZlcnNpb24gPSAwO1xyXG4gICAgICAgIHRoaXMuX2xvYWRQcm9taXNlID0gbnVsbDtcclxuICAgICAgICB0aGlzLmluY2x1ZGVzID0gcXVlcnkuaW5jbHVkZSA/XHJcbiAgICAgICAgICAgIHR5cGVvZiBxdWVyeS5pbmNsdWRlID09PSAnc3RyaW5nJyA/XHJcbiAgICAgICAgICAgICAgICBbcXVlcnkuaW5jbHVkZV0gOlxyXG4gICAgICAgICAgICAgICAgcXVlcnkuaW5jbHVkZSA6XHJcbiAgICAgICAgICAgIFtdO1xyXG4gICAgfVxyXG4gICAgS2VkQmFja2VuZFF1ZXJ5LnF1ZXJ5S2V5ID0gZnVuY3Rpb24gKHRhYmxlLCBxdWVyeSkge1xyXG4gICAgICAgIHZhciBtdXRhdGlvbnNPbkVtcHR5ID0gcXVlcnkubXV0YXRpb25zT25FbXB0eSwgY29tcGFyYWJsZVByb3BzID0gdHNsaWJfMS5fX3Jlc3QocXVlcnksIFtcIm11dGF0aW9uc09uRW1wdHlcIl0pO1xyXG4gICAgICAgIHJldHVybiB0YWJsZSArIEpTT04uc3RyaW5naWZ5KGNvbXBhcmFibGVQcm9wcyk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEtlZEJhY2tlbmRRdWVyeS5wcm90b3R5cGUsIFwicXVlcnlLZXlcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gS2VkQmFja2VuZFF1ZXJ5LnF1ZXJ5S2V5KHRoaXMudGFibGUsIHRoaXMucXVlcnkpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgS2VkQmFja2VuZFF1ZXJ5LnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaXB0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRhLCBkYXRhO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHRoaXMuZ290SW5pdGlhbFJlc3BvbnNlICYmICF0aGlzLmludmFsaWQpKSByZXR1cm4gWzMgLypicmVhayovLCAxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHRoaXMuZ2V0RGF0YVdpdGhNdXRhdGlvbnNBcHBsaWVkKHRoaXMubXV0YXRpb25RdWV1ZS5nZXQoKSwgdHJ1ZSwgdGhpcy5kYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLm5vdGlmeVN1YnNjcmliZXIoZGF0YSwgdGhpcy5lcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHRoaXMucXVlcnlMb2NhbGx5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZGF0YSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24ubm90aWZ5U3Vic2NyaWJlcihkYXRhLCB0aGlzLmVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxvYWQoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gNDtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFF1ZXJ5LnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKHZlcnNpb24pIHtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGxvYWRQcm9taXNlO1xyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmdvdEluaXRpYWxSZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbXV0YXRpb25zT25FbXB0eSBzaG91bGQgbmV2ZXIgYmUgdXNlZCB0d2ljZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnF1ZXJ5Lm11dGF0aW9uc09uRW1wdHk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoIXZlcnNpb24gJiYgdGhpcy5fbG9hZFByb21pc2UpKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5fbG9hZFByb21pc2VdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTogXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbG9hZGluZyBpcyBvbmdvaW5nLCBhbmQgY2FsbGVyIGRvZXMgbm90IHJlcXVpcmUgYSByZWNlbnQgcmVmcmVzaC5cclxuICAgICAgICAgICAgICAgICAgICAvLyB3YWl0IGZvciB0aGUgb25nb2luZyBsb2FkIHRvIGNvbXBsZXRlXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIF9hLnNlbnQoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uID0gdmVyc2lvbiB8fCB0aGlzLnJlcG8ud3JpdGVyLnBlcnNpc3RlZFZlcnNpb24udmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRQcm9taXNlID0gdGhpcy5fbG9hZFByb21pc2UgPSB0aGlzLl9sb2FkKHZlcnNpb24pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5fbG9hZFByb21pc2UgPT09IGxvYWRQcm9taXNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubG9hZGVkVmVyc2lvbiA9IE1hdGgubWF4KF90aGlzLmxvYWRlZFZlcnNpb24sIHZlcnNpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5fbG9hZFByb21pc2UgPT09IGxvYWRQcm9taXNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm9vbmUgaGFzIHJlZnJlc2hlZCBvdXIgbG9hZC4gVGhlIGVycm9yIGlzIHRoZSBmaW5hbCByZXN1bHQuIFNldCBpdC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5lcnJvciA9IGVycm9yO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5fbG9hZFByb21pc2UgPT09IGxvYWRQcm9taXNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm9vbmUgaGFzIHJlZnJlc2hlZCBvdXIgbG9hZC4gV2UncmUgZmluaXNoZWQuIERhdGEgb3IgZXJyb3IgaXMgYWxyZWFkeSBzZXQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFyayBnb3RJbml0aWFsUmVzcG9uc2UgdG8gdHJ1ZSBhbmQgbm90aWZ5IHN1YnNjcmliZXJzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9sb2FkUHJvbWlzZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZ290SW5pdGlhbFJlc3BvbnNlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5ub3RpZnlTdWJzY3JpYmVycyhfdGhpcy5tdXRhdGlvblF1ZXVlLmdldCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEEgbW9yZSByZWNlbnQgY2FsbCB0byBsb2FkKCkgaXMgb25nb2luZywgT1Igd2FzIG9uZ29pbmcgYnV0IHJlc3BvbmRlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJlZm9yZSB1cy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbiBhbnkgY2FzZSByZXR1cm4gdGhpcy5fbG9hZFByb21pc2UuIElmIGl0J3Mgb25nb2luZyB3ZSdsbCB3YWl0IGZvciBpdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRvIGZpbmlzaC4gSWYgaXQncyBudWxsLCB3ZSdsbCBiZSByZXR1cm5pbmcgZmluYWxseSBoZXJlIHdpdGhvdXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbnkgYWN0aW9uLCBiZWNhdXNlIHRoZSBhY3Rpb24gd2FzIHRha2VuIGJ5IHRoZSByZWZyZXNoZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLl9sb2FkUHJvbWlzZTsgLy8gV2FpdCBmb3IgdGhlIHJlZnJlc2hlZCBsb2FkIHRvIGNvbXBsZXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBsb2FkUHJvbWlzZV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFF1ZXJ5LnByb3RvdHlwZS5fbG9hZCA9IGZ1bmN0aW9uICh2ZXJzaW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLm11dGF0aW9uUXVldWUuYWZmZWN0c1F1ZXJ5KHRoaXMudGFibGUsIHRoaXMucXVlcnksIHRoaXMuaW5jbHVkZXMpKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlcmUgYXJlIG91dGdvaW5nIG11dGF0aW9ucyB0aGF0IGFmZmVjdHMgdGhpcyBxdWVyeS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTmVlZCB0byB3YWl0IHRpbGwgdGhleSByZWFjaCBzZXJ2ZXIgYW5kIHNlcnZlciByZXNwb25kcyB3aXRoIE9LIGJlZm9yZSBxdWVyeWluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgc2VydmVyLiBPdGhlcndpc2UsIHdlIG1heSBnZXQgaW5hY2N1cmF0ZSBkYXRhIGZyb20gc2VydmVyLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJlcG8ud3JpdGVyLndhaXRGb3JWZXJzaW9uVG9QZXJzaXN0KHZlcnNpb24pXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZXJlIGFyZSBvdXRnb2luZyBtdXRhdGlvbnMgdGhhdCBhZmZlY3RzIHRoaXMgcXVlcnkuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5lZWQgdG8gd2FpdCB0aWxsIHRoZXkgcmVhY2ggc2VydmVyIGFuZCBzZXJ2ZXIgcmVzcG9uZHMgd2l0aCBPSyBiZWZvcmUgcXVlcnlpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHNlcnZlci4gT3RoZXJ3aXNlLCB3ZSBtYXkgZ2V0IGluYWNjdXJhdGUgZGF0YSBmcm9tIHNlcnZlci5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnF1ZXJ5U2VydmVyKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi8sIF9hLnNlbnQoKV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRRdWVyeS5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaXB0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0gdGhpcy5zdWJzY3JpcHRpb25zLmZpbHRlcihmdW5jdGlvbiAocykgeyByZXR1cm4gcyAhPT0gc3Vic2NyaXB0aW9uOyB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kUXVlcnkucHJvdG90eXBlLmNvbW1pdE11dGF0aW9ucyA9IGZ1bmN0aW9uIChtdXRhdGlvbnMsIHZlcnNpb24pIHtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIF9pLCBtdXRhdGlvbnNfMSwgbSwgZGF0YTtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZGF0YSkgcmV0dXJuIFszIC8qYnJlYWsqLywgOV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pID0gMCwgbXV0YXRpb25zXzEgPSBtdXRhdGlvbnM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKF9pIDwgbXV0YXRpb25zXzEubGVuZ3RoKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgOF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG0gPSBtdXRhdGlvbnNfMVtfaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKG0ub3AgPT09ICdjbGVhci1icmFuY2gnICYmIChtLmJyYW5jaElkID09PSB0aGlzLnF1ZXJ5LmJyYW5jaElkKSkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJlZnJlc2hPckludmFsaWRhdGUodmVyc2lvbildO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShtLm9wID09PSAnbWVyZ2UnICYmICghbS50YXJnZXRCcmFuY2hJZCB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5icmFuY2hJZCA9PT0gdGhpcy5xdWVyeS5icmFuY2hJZCB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbS50YXJnZXRCcmFuY2hJZCA9PT0gdGhpcy5xdWVyeS5icmFuY2hJZCkpKSByZXR1cm4gWzMgLypicmVhayovLCA1XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5yZWZyZXNoT3JJbnZhbGlkYXRlKHZlcnNpb24pXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEobS5vcCA9PT0gJ3VwZGF0ZScgJiYgKChtLmRlbHRhRG9jLnRhZ3MgJiYgdGhpcy5xdWVyeS50YWdzKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKG0uZGVsdGFEb2MubmFtZSAmJiB0aGlzLnF1ZXJ5Lm5hbWUpKSkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDddO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBIHRhZyBtYXkgaGF2ZSBiZWVuIGFkZGVkLCBvciByZW5hbWVkLCBhbmRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHF1ZXJ5IGlzIGRlcGVuZGVudCBvbiB0aGUgc2FtZSBwcm9wZXJ0eS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHF1ZXJ5IG11c3QgYmUgcmVmcmVzaGVkIGZyb20gc2VydmVyIGFzIHdlIGNhbm5vdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb21taXQgdGhlIG11dGF0aW9ucyBsb2NhbGx5IGFzIHdlIGRvbid0IGhhdmUgYWxsIGluZm8uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucmVmcmVzaE9ySW52YWxpZGF0ZSh2ZXJzaW9uKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBIHRhZyBtYXkgaGF2ZSBiZWVuIGFkZGVkLCBvciByZW5hbWVkLCBhbmRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHF1ZXJ5IGlzIGRlcGVuZGVudCBvbiB0aGUgc2FtZSBwcm9wZXJ0eS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHF1ZXJ5IG11c3QgYmUgcmVmcmVzaGVkIGZyb20gc2VydmVyIGFzIHdlIGNhbm5vdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb21taXQgdGhlIG11dGF0aW9ucyBsb2NhbGx5IGFzIHdlIGRvbid0IGhhdmUgYWxsIGluZm8uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2krKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgMV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA4OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gdGhpcy5nZXREYXRhV2l0aE11dGF0aW9uc0FwcGxpZWQobXV0YXRpb25zLCBmYWxzZSwgdGhpcy5kYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSA5O1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgOTogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kUXVlcnkucHJvdG90eXBlLnJlZnJlc2hPckludmFsaWRhdGUgPSBmdW5jdGlvbiAodmVyc2lvbikge1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHRoaXMuc3Vic2NyaXB0aW9ucy5sZW5ndGggPT09IDApKSByZXR1cm4gWzMgLypicmVhayovLCAxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnZhbGlkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxvYWQodmVyc2lvbildO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDM7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRRdWVyeS5wcm90b3R5cGUubm90aWZ5U3Vic2NyaWJlcnMgPSBmdW5jdGlvbiAob3B0aW1pc3RpY011dGF0aW9ucykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHRoaXMuZGF0YSAmJiB0aGlzLmdvdEluaXRpYWxSZXNwb25zZSkge1xyXG4gICAgICAgICAgICB2YXIgZGF0YV8xID0gdGhpcy5nZXREYXRhV2l0aE11dGF0aW9uc0FwcGxpZWQob3B0aW1pc3RpY011dGF0aW9ucywgdHJ1ZSwgdGhpcy5kYXRhKTtcclxuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLmZvckVhY2goZnVuY3Rpb24gKHMpIHtcclxuICAgICAgICAgICAgICAgIHMubm90aWZ5U3Vic2NyaWJlcihkYXRhXzEsIF90aGlzLmVycm9yKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRRdWVyeS5wcm90b3R5cGUucXVlcnlMb2NhbGx5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlcG8ucXVlcnlTZXQucXVlcnlMb2NhbGx5KHRoaXMudGFibGUsIHRoaXMucXVlcnksIHRoaXMuaW5jbHVkZXMpO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRRdWVyeS5wcm90b3R5cGUucXVlcnlTZXJ2ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRhO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucmVwby5nZXRDbGllbnQoKS5saXN0KHRoaXMudGFibGUsIHRzbGliXzEuX19hc3NpZ24oe30sIHRoaXMucXVlcnkpKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgZGF0YV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRRdWVyeS5wcm90b3R5cGUuZ2V0RGF0YVdpdGhNdXRhdGlvbnNBcHBsaWVkID0gZnVuY3Rpb24gKG11dGF0aW9ucywgb3B0aW1pc3RpYywgZGF0YSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgbXV0YXRpb25zLmZvckVhY2goZnVuY3Rpb24gKG11dGF0aW9uKSB7XHJcbiAgICAgICAgICAgIGRhdGEgPSBfdGhpcy5hcHBseU11dGF0aW9uc09uRGF0YShkYXRhLCBtdXRhdGlvbiwgb3B0aW1pc3RpYyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFF1ZXJ5LnByb3RvdHlwZS5hcHBseU11dGF0aW9uc09uRGF0YSA9IGZ1bmN0aW9uIChkYXRhLCBtLCBvcHRpbWlzdGljKSB7XHJcbiAgICAgICAgaWYgKGJyYW5jaFNlbnNpdGl2ZShtKSAmJiBtLmJyYW5jaElkICE9IHRoaXMucXVlcnkuYnJhbmNoSWQpXHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgIHZhciBfYSA9IHRoaXMsIHRhYmxlID0gX2EudGFibGUsIGluY2x1ZGVzID0gX2EuaW5jbHVkZXMsIGxpc3RPcHRpb25zID0gX2EucXVlcnk7XHJcbiAgICAgICAgdmFyIHNvdXJjZUlkcyA9IGxpc3RPcHRpb25zLmhhc0VkZ2VzRnJvbSA/IFtdLmNvbmNhdChsaXN0T3B0aW9ucy5oYXNFZGdlc0Zyb20gfHwgW10pIDogW107XHJcbiAgICAgICAgdmFyIHJlcXVlc3RlZFRhZ3MgPSBsaXN0T3B0aW9ucy50YWdzID8gW10uY29uY2F0KGxpc3RPcHRpb25zLnRhZ3MgfHwgW10pIDogW107XHJcbiAgICAgICAgc3dpdGNoIChtLm9wKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ3VwZGF0ZSc6IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGVBcnJheShkYXRhLCBmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRvYy5pZCA9PT0gbS5pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBcHBseSBkZWx0YSBvbiB1cGRhdGVkIGRvY3VtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cGRhdGVkRG9jID0gYXBwbHlEZWx0YShkb2MsIG0uZGVsdGFEb2MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW1pc3RpYylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWREb2MuJG1ldGEgPSAndXBkYXRpbmcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlZERvYztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgaWQgZG9lcyBub3QgYXBwbHkgdG8gdGhpcyBkb2MsIHNlYXJjaCBpbiBncmFwaHMgdGhlIGlkIGlzIGZvdW5kXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYW1vbmcgZ3JhcGggaW5jbHVkZWQgZG9jcywgYW5kIGlmIHNvLCB1cGRhdGUgdGhhdCBvbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgaW5jbHVkZXMuZm9yRWFjaChmdW5jdGlvbiAobGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5jbHVkZWREb2NzID0gZG9jW2xhYmVsXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluY2x1ZGVkRG9jcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVwZGF0ZWRBcnJheSA9IHVwZGF0ZUFycmF5KGluY2x1ZGVkRG9jcywgZnVuY3Rpb24gKHJlbGF0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVsYXRlZC5pZCAhPT0gbS5pZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlbGF0ZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVwZGF0ZWRSZWxhdGVkID0gYXBwbHlEZWx0YShyZWxhdGVkLCBtLmRlbHRhRG9jKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW1pc3RpYylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFJlbGF0ZWQuJG1ldGEgPSAndXBkYXRpbmcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGVkUmVsYXRlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVwZGF0ZWRBcnJheSAhPT0gaW5jbHVkZWREb2NzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jID0gdHNsaWJfMS5fX2Fzc2lnbih7fSwgZG9jLCAoX2EgPSB7fSwgX2FbbGFiZWxdID0gdXBkYXRlZEFycmF5LCBfYSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRvYztcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgJ2FkZC1yZWxhdGVkJzpcclxuICAgICAgICAgICAgICAgIGlmICh0YWJsZSA9PT0gbS50YWJsZSAmJiBpbmNsdWRlcy5pbmRleE9mKG0uZ3JhcGhQcm9wKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBJZiBleHByZXNzaW9uIGlzIGBkYi5jb3Vyc2VCbG9ja3MuLi4ud2hhdGV2ZXIuLiAuaW5jbHVkZShcImFiaWxpdGllc1wiKWAsIGRldGVjdDogZGIuY291cnNlQmxvY2tzLmFkZFJlbGF0ZWQoYmxvY2tJZCwgJ2FiaWxpdGllcycsIC4uLilcclxuICAgICAgICAgICAgICAgICAgICAvLyAuLi5iZWNhdXNlIHRhYmxlID0gJ2NvdXJzZUJsb2NrcycgYW5kIGluY2x1ZGVzIGhhcyBcImFiaWxpdGllc1wiLlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGVBcnJheShkYXRhLCBmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvYy5pZCAhPT0gbS5pZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkb2M7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWxhdGVkRG9jID0gdHNsaWJfMS5fX2Fzc2lnbih7fSwgbS5yZWxhdGVkRG9jKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGltaXN0aWMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWxhdGVkRG9jLiRtZXRhID0gJ2FkZGluZyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXNzaWduKHt9LCBkb2MsIChfYSA9IHt9LCBfYVttLmdyYXBoUHJvcF0gPSBkb2NbbS5ncmFwaFByb3BdLmNvbmNhdChbcmVsYXRlZERvY10pLCBfYSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGxpc3RPcHRpb25zLmhhc0VkZ2VzRnJvbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzb3VyY2VJZHMuaW5jbHVkZXMobS5pZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgZXhwcmVzc2lvbiBpczpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBgZGIuY291cnNlQmxvY2tzLmhhc0VkZ2VzRnJvbShbY291cnNlSWRdKWAgIChtZWFuaW5nIHRhYmxlPSdjb3Vyc2VCbG9ja3MnIGFuZCBzb3VyY2VJZHMgaW5jbHVkZXMgY291cnNlSWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICwgZGV0ZWN0OiBkYi5jb3Vyc2VJbnN0YW5jZXMuYWRkUmVsYXRlZChjb3Vyc2VJZCwgJ2NvdXJzZUJsb2NrcycsIC4uLi4pIC8vIG0uZ3JhcGhQcm9wID09PSAnYmxvY2tzJy0tPiBnZXRUYWJsZUZyb21MYWJlbCAtLT4gJ2NvdXJzZUJsb2NrcydcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhYmxlID09PSBnZXRUYWJsZUZyb21MYWJlbChtLnRhYmxlLCBtLmdyYXBoUHJvcCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbGlzdE9wdGlvbnMudGFncylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5jb25jYXQodGhpcy5zZXRHcmFwaFByb3BzKG0ucmVsYXRlZERvYykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG0ucmVsYXRlZERvYy50YWdzICYmIHJlcXVlc3RlZFRhZ3Muc29tZShmdW5jdGlvbiAodGFnKSB7IHJldHVybiBtLnJlbGF0ZWREb2MudGFncy5pbmNsdWRlcyh0YWcpOyB9KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLmNvbmNhdCh0aGlzLnNldEdyYXBoUHJvcHMobS5yZWxhdGVkRG9jKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobGlzdE9wdGlvbnMuaWRzICYmIGxpc3RPcHRpb25zLmlkcy5zb21lKGZ1bmN0aW9uIChpZCkgeyByZXR1cm4gaWQgPT09IG0ucmVsYXRlZERvYy5pZDsgfSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBBIGNlcnRhaW4gSUQgaXMgb2JzZXJ2ZWQuIEEgZG9jIHdpdGggdGhpcyBpZCBpcyBiZWluZyBhZGRlZC5cclxuICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIGRvYyB0byB0aGUgcmVzdWx0LiBFeGFjdGx5IHRoaXMgV0lMTCBoYXBwZW4gaW4gdGhlIGZvbGxvd2luZyB0eXBpY2FsIHNjZW5hcmlvOlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIDEuIFVzZXIgYWRkcyBhIHJlbGF0ZWQgZG9jdW1lbnQgdG8gYSBsaXN0LlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIDIuIERvY3VtZW50IHJlbWFpbnMgd2l0aGluIHRoZSBNdXRhdGlvblF1ZXVlIHdoaWxlIGJhdGNoLXJlcXVlc3QgaXMgYmVpbmcgcHJvY2Vzc2VkIGJ5IHNlcnZlci5cclxuICAgICAgICAgICAgICAgICAgICAvLyAzLiBVc2VyIGNsaWNrcyB0aGUgYWRkZWQgaXRlbSB0byBlZGl0IG9yIHZpZXcgaXQgKG9yIG91ciBjb21wb25lbnQgcmVkaXJlY3RzIHRvIGl0cyBlZGl0b3IpXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gNC4gQSBuZXcgcXVlcnkgb2YgdGhhdCBwYXJ0aWN1bGFyIElEIGlzIHN1YnNjcmliZWQgdG8ge2lkcz1bdGhlSWRdfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgIEtlZEJhY2tlbmRRdWVyeS5zdWJzY3JpYmUgdGhlbiBkb2VzIHRoaXM6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAxLiBDYWxsIHF1ZXJ5TG9jYWxseSgpIGJlZm9yZSBxdWVyeWluZyBzZXJ2ZXJcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgIDIuIHF1ZXJ5TG9jYWxseSgpIGluc3BlY3RzIG11dGF0aW9ucyBhbmQgZmluZHMgYSBtYXRjaCwgcmV0dXJuaW5nIGFuIGVtcHR5IGxpc3RcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIChhc3N1bWVzIGFzIHdlIGFyZSBhZGRpbmcgaXQsIGl0IGNhbid0IGV4aXN0IG9uIHRoZSBzZXJ2ZXIgYW55d2F5KVxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgMy4gS2VkQmFja2VuZFFVZXJ5IGFwcGxpZXMgbXV0YXRpb25zIG9udG8gdGhlIGVtcHR5IGxpc3QsIGFuZCBlbmRzIHVwIGhlcmUgdG8gYWRkXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBpdCBvcHRpbWlzdGljYWxseS5cclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgIDQuIFdoZW4gc2VydmVyIHJlc3BvbmRzIHdpdGggMjAwIE9LLCBjYWxscyB1cyBoZXJlIGFnYWluIHdpdGggb3B0aW1pc3RpYz1mYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgdG8gXCJwZXJzaXN0XCIgaXQgaW4gdGhlIHF1ZXJ5J3MgZGF0YSBhcnJheS5cclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgIDRCOiBJZiBub3QgMjAwIE9LLCBtdXRhdGlvbiBtYXkgYmUgZ29uZSBhbmQgdGhlIHN1YnNjcmliZXIgd2lsbCBzZSBhbiBlcnJvciBwYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBcIkNvdWxkIG5vdCBmaW5kIGVudGl0eSB3aXRoIGlkIFguXCIgYWxvbmcgd2l0aCBhIHJlZCBlcnJvciBtZXNzYWdlIG9uIHRoZSBzY3JlZW5cclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIGFib3V0IHRoYXQgaXQgZmFpbGVkIHRvIHNhdmUgb24gc2VydmVyLlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLmNvbmNhdCh0aGlzLnNldEdyYXBoUHJvcHMobS5yZWxhdGVkRG9jKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICAgICAgY2FzZSAncmVtb3ZlLXJlbGF0ZWQnOlxyXG4gICAgICAgICAgICAgICAgaWYgKHRhYmxlID09PSBtLnRhYmxlICYmIGluY2x1ZGVzLmluZGV4T2YobS5ncmFwaFByb3ApICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGVBcnJheShkYXRhLCBmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluY2x1ZGVkRG9jcyA9IGRvY1ttLmdyYXBoUHJvcF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaW5jbHVkZWREb2NzKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRvYztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvYy5pZCAhPT0gbS5pZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkb2M7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXNzaWduKHt9LCBkb2MsIChfYSA9IHt9LCBfYVttLmdyYXBoUHJvcF0gPSBvcHRpbWlzdGljID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hcmsgcmVsYXRlZC1kb2MtdG8tcmVtb3ZlIHdpdGggJG1ldGE6ICdkZWxldGluZydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1ZGVkRG9jcy5tYXAoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGQuaWQgIT09IG0ucmVsYXRlZERvYy5pZCA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZCA6IHRzbGliXzEuX19hc3NpZ24oe30sIGQsIHsgJG1ldGE6ICdkZWxldGluZycgfSk7IH0pIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERlbGV0ZSByZWxhdGVkLWRvYy10by1yZW1vdmUgZnJvbSBkb2NbZ3JhcFByb3BdOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVkZWREb2NzLmZpbHRlcihmdW5jdGlvbiAoZCkgeyByZXR1cm4gZC5pZCAhPT0gbS5yZWxhdGVkRG9jLmlkOyB9KSwgX2EpKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChsaXN0T3B0aW9ucy5oYXNFZGdlc0Zyb20pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc291cmNlSWRzLmluY2x1ZGVzKG0uaWQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3B0aW1pc3RpYyA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLm1hcChmdW5jdGlvbiAoZCkgeyByZXR1cm4gZC5pZCA9PT0gbS5yZWxhdGVkRG9jLmlkID8gdHNsaWJfMS5fX2Fzc2lnbih7fSwgZCwgeyAkbWV0YTogJ2RlbGV0aW5nJyB9KSA6IGQ7IH0pIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuZmlsdGVyKGZ1bmN0aW9uIChkKSB7IHJldHVybiBkLmlkICE9PSBtLnJlbGF0ZWREb2MuaWQ7IH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6XHJcbiAgICAgICAgICAgICAgICBpZiAodGFibGUgPT09IG0udGFibGUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5maWx0ZXIoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGQuaWQgIT09IG0uaWQ7IH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobGlzdE9wdGlvbnMuaW5jbHVkZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmNsdWRlZFRhYmxlcyA9IGluY2x1ZGVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGxhYmVsKSB7IHJldHVybiAoeyBsYWJlbDogbGFiZWwsIHRhYmxlOiBnZXRUYWJsZUZyb21MYWJlbCh0YWJsZSwgbGFiZWwpIH0pOyB9KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbGFiZWxzXzEgPSBpbmNsdWRlZFRhYmxlcy5maWx0ZXIoZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWJsZSA9IF9hLnRhYmxlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFibGUgPT09IG0udGFibGU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxhYmVsc18xLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZUFycmF5KGRhdGEsIGZ1bmN0aW9uIChkb2MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsc18xLmZvckVhY2goZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxhYmVsID0gX2EubGFiZWw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9iO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWxhdGVkRG9jcyA9IGRvY1tsYWJlbF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlbGF0ZWREb2NzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYyA9IHRzbGliXzEuX19hc3NpZ24oe30sIGRvYywgKF9iID0ge30sIF9iW2xhYmVsXSA9IG9wdGltaXN0aWMgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRlZERvY3MubWFwKGZ1bmN0aW9uIChkKSB7IHJldHVybiBkLmlkID09PSBtLmlkID8gdHNsaWJfMS5fX2Fzc2lnbih7fSwgZCwgeyAkbWV0YTogJ2RlbGV0aW5nJyB9KSA6IGQ7IH0pIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0ZWREb2NzLmZpbHRlcihmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWQgPSBfYS5pZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaWQgIT09IG0uaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwgX2IpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkb2M7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRRdWVyeS5wcm90b3R5cGUuc2V0R3JhcGhQcm9wcyA9IGZ1bmN0aW9uIChkb2MpIHtcclxuICAgICAgICB2YXIgY29weSA9IHRzbGliXzEuX19hc3NpZ24oe30sIGRvYyk7XHJcbiAgICAgICAgdGhpcy5pbmNsdWRlcy5mb3JFYWNoKGZ1bmN0aW9uIChsYWJlbCkgeyByZXR1cm4gY29weVtsYWJlbF0gPSBjb3B5W2xhYmVsXSB8fCBbXTsgfSk7XHJcbiAgICAgICAgcmV0dXJuIGNvcHk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEtlZEJhY2tlbmRRdWVyeTtcclxufSgpKTtcclxuZXhwb3J0IHsgS2VkQmFja2VuZFF1ZXJ5IH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWtlZGJhY2tlbmQtcXVlcnkuanMubWFwIiwiaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcclxuaW1wb3J0IHsgdGFibGVzIH0gZnJvbSAna2VkYmFja2VuZC1zY2hlbWEvc2NoZW1hLmpzb24nO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kQ29sbGVjdGlvbiB9IGZyb20gJy4va2VkYmFja2VuZC1jb2xsZWN0aW9uJztcclxuaW1wb3J0IHsgUXVlcnlTZXQgfSBmcm9tICcuL3F1ZXJ5LXNldCc7XHJcbmltcG9ydCB7IE11dGF0aW9uUXVldWUgfSBmcm9tICcuL211dGF0aW9uLXF1ZXVlJztcclxuaW1wb3J0IHsgS2VkQmFja2VuZFdyaXRlciB9IGZyb20gJy4va2VkYmFja2VuZC13cml0ZXInO1xyXG5pbXBvcnQgeyBEZWx0YUNvbGxlY3Rpb24gfSBmcm9tICcuL2RlbHRhLWNvbGxlY3Rpb24vZGVsdGEtY29sbGVjdGlvbic7XHJcbnZhciBLZWRCYWNrZW5kUmVwbyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEtlZEJhY2tlbmRSZXBvKGdldENsaWVudCwgZ2V0VXNlciwgZ2V0VXNlckRpc3BsYXlOYW1lLCBkZWZhdWx0UXVlcnlPcHRpb25zLCBtdXRhdGlvblF1ZXVlLCBxdWVyeVNldCwgd3JpdGVyLCBjYWNoZU9wdGltaXplZCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5nZXRDbGllbnQgPSBnZXRDbGllbnQ7XHJcbiAgICAgICAgdGhpcy5nZXRVc2VyID0gZ2V0VXNlcjtcclxuICAgICAgICB0aGlzLmdldFVzZXJEaXNwbGF5TmFtZSA9IGdldFVzZXJEaXNwbGF5TmFtZTtcclxuICAgICAgICB0aGlzLmRlZmF1bHRRdWVyeU9wdGlvbnMgPSBkZWZhdWx0UXVlcnlPcHRpb25zO1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25RdWV1ZSA9IG11dGF0aW9uUXVldWU7XHJcbiAgICAgICAgdGhpcy5xdWVyeVNldCA9IHF1ZXJ5U2V0O1xyXG4gICAgICAgIHRoaXMud3JpdGVyID0gd3JpdGVyO1xyXG4gICAgICAgIHRoaXMuY2FjaGVPcHRpbWl6ZWQgPSBjYWNoZU9wdGltaXplZDtcclxuICAgICAgICBpZiAoIWRlZmF1bHRRdWVyeU9wdGlvbnMpXHJcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdFF1ZXJ5T3B0aW9ucyA9IHt9O1xyXG4gICAgICAgIGlmICghbXV0YXRpb25RdWV1ZSlcclxuICAgICAgICAgICAgdGhpcy5tdXRhdGlvblF1ZXVlID0gbmV3IE11dGF0aW9uUXVldWUoKTtcclxuICAgICAgICBpZiAoIXF1ZXJ5U2V0KVxyXG4gICAgICAgICAgICB0aGlzLnF1ZXJ5U2V0ID0gbmV3IFF1ZXJ5U2V0KHRoaXMubXV0YXRpb25RdWV1ZSk7XHJcbiAgICAgICAgaWYgKCF3cml0ZXIpXHJcbiAgICAgICAgICAgIHRoaXMud3JpdGVyID0gbmV3IEtlZEJhY2tlbmRXcml0ZXIodGhpcy5tdXRhdGlvblF1ZXVlLCB0aGlzLnF1ZXJ5U2V0LCBnZXRDbGllbnQsIGdldFVzZXIsIGdldFVzZXJEaXNwbGF5TmFtZSk7XHJcbiAgICAgICAgT2JqZWN0LmtleXModGFibGVzKS5mb3JFYWNoKGZ1bmN0aW9uICh0YWJsZSkge1xyXG4gICAgICAgICAgICB2YXIgY29sbGVjdGlvbiA9IG5ldyBLZWRCYWNrZW5kQ29sbGVjdGlvbihfdGhpcywgdGFibGUsIGRlZmF1bHRRdWVyeU9wdGlvbnMgfHwge30pO1xyXG4gICAgICAgICAgICBpZiAoY2FjaGVPcHRpbWl6ZWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24gPSBjb2xsZWN0aW9uLmNhY2hlT3B0aW1pemVkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3RoaXNbdGFibGVdID0gY29sbGVjdGlvbjtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmRlbHRhcyA9IG5ldyBEZWx0YUNvbGxlY3Rpb24odGhpcy53cml0ZXIuZGVsdGFDYWNoZSwge1xyXG4gICAgICAgICAgICBicmFuY2hJZDogdGhpcy5kZWZhdWx0UXVlcnlPcHRpb25zLmJyYW5jaElkIC8vIElmIGJyYW5jaElkIGlzIHVuZGVmaW5lZC4gRGVsdGFDb2xsZWN0aW9uIHdpbGwgcmVzcG9uZCB3aXRoIEVycm9yIG9uIHN1YnNjcmliZSgpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBLZWRCYWNrZW5kUmVwby5wcm90b3R5cGUudGFibGUgPSBmdW5jdGlvbiAodGFibGVOYW1lKSB7XHJcbiAgICAgICAgdmFyIGNvbGxlY3Rpb24gPSBuZXcgS2VkQmFja2VuZENvbGxlY3Rpb24odGhpcywgdGFibGVOYW1lLCB0aGlzLmRlZmF1bHRRdWVyeU9wdGlvbnMpO1xyXG4gICAgICAgIGlmICh0aGlzLmNhY2hlT3B0aW1pemVkKVxyXG4gICAgICAgICAgICBjb2xsZWN0aW9uID0gY29sbGVjdGlvbi5jYWNoZU9wdGltaXplZCgpO1xyXG4gICAgICAgIHJldHVybiBjb2xsZWN0aW9uO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRSZXBvLnByb3RvdHlwZS5fY2xvbmUgPSBmdW5jdGlvbiAocXVlcnlPcHRpb25zLCBjYWNoZU9wdGltaXplZCkge1xyXG4gICAgICAgIHZhciBjbG9uZSA9IG5ldyBLZWRCYWNrZW5kUmVwbyh0aGlzLmdldENsaWVudCwgdGhpcy5nZXRVc2VyLCB0aGlzLmdldFVzZXJEaXNwbGF5TmFtZSwgdHNsaWJfMS5fX2Fzc2lnbih7fSwgdGhpcy5kZWZhdWx0UXVlcnlPcHRpb25zLCBxdWVyeU9wdGlvbnMpLCB0aGlzLm11dGF0aW9uUXVldWUsIHRoaXMucXVlcnlTZXQsIHRoaXMud3JpdGVyLCBjYWNoZU9wdGltaXplZCA9PT0gdW5kZWZpbmVkID8gdGhpcy5jYWNoZU9wdGltaXplZCA6IGNhY2hlT3B0aW1pemVkKTtcclxuICAgICAgICByZXR1cm4gY2xvbmU7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFJlcG8ucHJvdG90eXBlLmJyYW5jaCA9IGZ1bmN0aW9uIChicmFuY2hJZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jbG9uZSh7IGJyYW5jaElkOiBicmFuY2hJZCB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kUmVwby5wcm90b3R5cGUucm9sZSA9IGZ1bmN0aW9uIChyb2xlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Nsb25lKHsgcm9sZTogcm9sZSB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kUmVwby5wcm90b3R5cGUub3B0aW1pemVDYWNoZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY2xvbmUoe30sIHRydWUpO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRSZXBvLnByb3RvdHlwZS5jbGVhckJyYW5jaCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZGVmYXVsdFF1ZXJ5T3B0aW9ucy5icmFuY2hJZClcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGNsZWFyIG1hc3RlciBicmFuY2hcIik7XHJcbiAgICAgICAgdGhpcy53cml0ZXIubXV0YXRlKFt7IG9wOiAnY2xlYXItYnJhbmNoJywgYnJhbmNoSWQ6IHRoaXMuZGVmYXVsdFF1ZXJ5T3B0aW9ucy5icmFuY2hJZCB9XSwgMCk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFJlcG8ucHJvdG90eXBlLm1lcmdlID0gZnVuY3Rpb24gKHRhcmdldEJyYW5jaElkKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmRlZmF1bHRRdWVyeU9wdGlvbnMuYnJhbmNoSWQpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBtZXJnZSBmcm9tIG1hc3RlciBicmFuY2hcIik7XHJcbiAgICAgICAgdGhpcy53cml0ZXIubXV0YXRlKFt7IG9wOiAnbWVyZ2UnLCBicmFuY2hJZDogdGhpcy5kZWZhdWx0UXVlcnlPcHRpb25zLmJyYW5jaElkLCB0YXJnZXRCcmFuY2hJZDogdGFyZ2V0QnJhbmNoSWQgfV0sIDApO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRSZXBvLnByb3RvdHlwZS5zYXZlTm93ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMud3JpdGVyLndhaXRGb3JWZXJzaW9uVG9QZXJzaXN0KHRoaXMud3JpdGVyLmN1cnJlbnRWZXJzaW9uKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEtlZEJhY2tlbmRSZXBvO1xyXG59KCkpO1xyXG5leHBvcnQgeyBLZWRCYWNrZW5kUmVwbyB9O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1rZWRiYWNrZW5kLXJlcG8uanMubWFwIiwidmFyIEtlZEJhY2tlbmRTdWJzY3JpcHRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBLZWRCYWNrZW5kU3Vic2NyaXB0aW9uKHN1YnNjcmliZXIsIGNvbGxlY3Rpb24pIHtcclxuICAgICAgICB0aGlzLnN1YnNjcmliZXIgPSBzdWJzY3JpYmVyO1xyXG4gICAgICAgIHRoaXMuY29sbGVjdGlvbiA9IGNvbGxlY3Rpb247XHJcbiAgICB9XHJcbiAgICBLZWRCYWNrZW5kU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5ub3RpZnlTdWJzY3JpYmVyID0gZnVuY3Rpb24gKGRhdGEsIGVycm9yKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGVycm9yKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdWJzY3JpYmVyKFtdLCBlcnJvciwgdGhpcyk7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEgIT09IHRoaXMubGFzdE5vdGlmaWVkRGF0YSkgeyAvLyBXaWxsIGluLWZhY3QgYmUgZXF1YWwgYnkgcmVmZXJlbmNlIGlmIGRhdGEgaXMgc2FtZSBhcyBsYXN0IG5vdGlmaWNhdGlvbiAoYXMgd2UgdXNlIGFuIGltbXV0YWJsZSBhcHByb2FjaCBvbiBkYXRhKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0Tm90aWZpZWREYXRhID0gZGF0YTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3Vic2NyaWJlcihkYXRhLCBlcnJvciwgdGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGV4KSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN1YnNjcmliZXIoW10sIGV4LCB0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZXgyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igd2hpbGUgbm90aWZ5aW5nIEtlZEJhY2tlbmRTdWJzY3JpYmVyOlwiLCBleDIsICdvcmlnaW5hbGx5IG5vdGlmaWVkIGVycm9yOicsIGV4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kU3Vic2NyaXB0aW9uLnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmNvbGxlY3Rpb24udW5zdWJzY3JpYmUodGhpcyk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEtlZEJhY2tlbmRTdWJzY3JpcHRpb247XHJcbn0oKSk7XHJcbmV4cG9ydCB7IEtlZEJhY2tlbmRTdWJzY3JpcHRpb24gfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9a2VkYmFja2VuZC1zdWJzY3JpcHRpb24uanMubWFwIiwiaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcclxuaW1wb3J0IHsgTXV0YXRpb25RdWV1ZSB9IGZyb20gJy4vbXV0YXRpb24tcXVldWUnO1xyXG5pbXBvcnQgeyBCYXRjaFJ1bm5lciB9IGZyb20gJy4uL2tlZC1iYWNrZW5kLWNsaWVudCc7XHJcbmltcG9ydCB7IHRhYmxlcyB9IGZyb20gJ2tlZGJhY2tlbmQtc2NoZW1hL3NjaGVtYS5qc29uJztcclxuaW1wb3J0IHsgQ2FjaGVCdXN0IH0gZnJvbSAnLi9jYWNoZS1idXN0JztcclxuaW1wb3J0IHsgRW1pdHRlciB9IGZyb20gJy4uL29ic2VydmFibGUnO1xyXG5pbXBvcnQgeyBEZWx0YUNhY2hlIH0gZnJvbSAnLi9kZWx0YS1jb2xsZWN0aW9uL2RlbHRhLWNhY2hlJztcclxudmFyIEtlZEJhY2tlbmRXcml0ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBLZWRCYWNrZW5kV3JpdGVyKG11dGF0aW9uUXVldWUsIHF1ZXJ5U2V0LCBnZXRDbGllbnQsIGdldFVzZXIsIGdldFVzZXJEaXNwbGF5TmFtZSkge1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25RdWV1ZSA9IG11dGF0aW9uUXVldWU7XHJcbiAgICAgICAgdGhpcy5xdWVyeVNldCA9IHF1ZXJ5U2V0O1xyXG4gICAgICAgIHRoaXMuZ2V0Q2xpZW50ID0gZ2V0Q2xpZW50O1xyXG4gICAgICAgIHRoaXMuZ2V0VXNlciA9IGdldFVzZXI7XHJcbiAgICAgICAgdGhpcy5nZXRVc2VyRGlzcGxheU5hbWUgPSBnZXRVc2VyRGlzcGxheU5hbWU7XHJcbiAgICAgICAgdGhpcy5fdGltZW91dElkID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9pc1NhdmluZ1Byb21pc2UgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFZlcnNpb24gPSAwO1xyXG4gICAgICAgIHRoaXMucGVyc2lzdGVkVmVyc2lvbiA9IG5ldyBFbWl0dGVyKDApO1xyXG4gICAgICAgIHRoaXMuZXJyb3JTdWJzY3JpYmVycyA9IFtdO1xyXG4gICAgICAgIHRoaXMuc3RhdGVTdWJzY3JpYmVycyA9IFtdO1xyXG4gICAgICAgIHRoaXMuZGVsdGFDYWNoZSA9IG5ldyBEZWx0YUNhY2hlKGdldENsaWVudCwgZ2V0VXNlciwgZ2V0VXNlckRpc3BsYXlOYW1lKTtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShLZWRCYWNrZW5kV3JpdGVyLnByb3RvdHlwZSwgXCJpc1NhdmluZ1wiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiAhIXRoaXMuX2lzU2F2aW5nUHJvbWlzZTsgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoS2VkQmFja2VuZFdyaXRlci5wcm90b3R5cGUsIFwiaXNFZGl0ZWRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5tdXRhdGlvblF1ZXVlLmdldCgpLmxlbmd0aCA+IDA7IH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgS2VkQmFja2VuZFdyaXRlci5wcm90b3R5cGUub25FcnJvciA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMuZXJyb3JTdWJzY3JpYmVycy5wdXNoKGNhbGxiYWNrKTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kV3JpdGVyLnByb3RvdHlwZS5vblN0YXRlQ2hhbmdlID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5zdGF0ZVN1YnNjcmliZXJzLnB1c2goY2FsbGJhY2spO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRXcml0ZXIucHJvdG90eXBlLm9mZiA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMuZXJyb3JTdWJzY3JpYmVycyA9IHRoaXMuZXJyb3JTdWJzY3JpYmVycy5maWx0ZXIoZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHMgIT09IGNhbGxiYWNrOyB9KTtcclxuICAgICAgICB0aGlzLnN0YXRlU3Vic2NyaWJlcnMgPSB0aGlzLnN0YXRlU3Vic2NyaWJlcnMuZmlsdGVyKGZ1bmN0aW9uIChzKSB7IHJldHVybiBzICE9PSBjYWxsYmFjazsgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFdyaXRlci5wcm90b3R5cGUuZGlzcGF0Y2hFcnJvciA9IGZ1bmN0aW9uIChlcnJvciwgcmV0cnlhYmxlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLmVycm9yU3Vic2NyaWJlcnMuZm9yRWFjaChmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yLCByZXRyeWFibGUsIF90aGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoXykgeyB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFdyaXRlci5wcm90b3R5cGUuZGlzcGF0Y2hTdGF0ZUNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuc3RhdGVTdWJzY3JpYmVycy5mb3JFYWNoKGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soX3RoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChfKSB7IH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kV3JpdGVyLnByb3RvdHlwZS5tdXRhdGUgPSBmdW5jdGlvbiAobXV0YXRpb25zLCBkZWJvdW5jZSkge1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25RdWV1ZS5hZGQobXV0YXRpb25zKTtcclxuICAgICAgICArK3RoaXMuY3VycmVudFZlcnNpb247XHJcbiAgICAgICAgdGhpcy5kaXNwYXRjaFN0YXRlQ2hhbmdlKCk7XHJcbiAgICAgICAgdGhpcy5xdWVyeVNldC5ub3RpZnlTdWJzY3JpYmVycygpO1xyXG4gICAgICAgIHRoaXMuZGVsdGFDYWNoZS5hcHBseU11dGF0aW9ucyh0aGlzLm11dGF0aW9uUXVldWUuZ2V0KCksIHsgb3B0aW1pc3RpYzogdHJ1ZSB9KTtcclxuICAgICAgICBpZiAoIXRoaXMuX2lzU2F2aW5nUHJvbWlzZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fdGltZW91dElkKVxyXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVvdXRJZCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3RpbWVvdXRJZCA9IHNldFRpbWVvdXQodGhpcy5zYXZlLmJpbmQodGhpcyksIGRlYm91bmNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgaXNTYXZpbmcsIHdlIGRvbid0IG5lZWQgdG8gZG8gYW55dGhpbmcsIGJlY2FzZSBpdCB3aWxsIHJlLWNoZWNrIGlmIGFkZGl0aW9uYWxcclxuICAgICAgICAvLyBtdXRhdGlvbnMgaGF2ZSBjb21lLCB3aGVuIHNhdmluZyBpcyBkb25lLlxyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRXcml0ZXIucHJvdG90eXBlLnJldHJ5U2F2ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zYXZlKCk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFdyaXRlci5wcm90b3R5cGUud2FpdEZvclZlcnNpb25Ub1BlcnNpc3QgPSBmdW5jdGlvbiAodmVyc2lvbikge1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcGVyc2lzdGVkVmVyc2lvbjtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnBlcnNpc3RlZFZlcnNpb24ubG9hZCgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcnNpc3RlZFZlcnNpb24gPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHBlcnNpc3RlZFZlcnNpb24gPCB2ZXJzaW9uKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2F2ZSgpOyAvLyBCZSBtb3JlIGVhZ2VyIHRvIHNhdmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5wZXJzaXN0ZWRWZXJzaW9uLmZpbHRlcihmdW5jdGlvbiAocGVyc2lzdGVkVmVyc2lvbikgeyByZXR1cm4gcGVyc2lzdGVkVmVyc2lvbiA+PSB2ZXJzaW9uOyB9KS5sb2FkKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDM7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRXcml0ZXIucHJvdG90eXBlLnNhdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAodGhpcy5fdGltZW91dElkKVxyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fdGltZW91dElkKTtcclxuICAgICAgICBpZiAodGhpcy5faXNTYXZpbmdQcm9taXNlKVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faXNTYXZpbmdQcm9taXNlO1xyXG4gICAgICAgIGlmICghdGhpcy5pc0VkaXRlZClcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgIHRoaXMuX3RpbWVvdXRJZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5faXNTYXZpbmdQcm9taXNlID0gdGhpcy5fc2F2ZSgpO1xyXG4gICAgICAgIHRoaXMuX2lzU2F2aW5nUHJvbWlzZS5jYXRjaChmdW5jdGlvbiAoKSB7IH0pLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuX2lzU2F2aW5nUHJvbWlzZSA9IG51bGw7IH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pc1NhdmluZ1Byb21pc2U7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFdyaXRlci5wcm90b3R5cGUuX3NhdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBtdXRhdGlvbnMsIHZlcnNpb24sIG11dGF0aW9uUmVxdWVzdHMsIHJlc18xLCBldGFnTXV0YXRpb25zLCBlcnJvcl8xO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hTdGF0ZUNoYW5nZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtdXRhdGlvbnMgPSB0aGlzLm11dGF0aW9uUXVldWUuZ2V0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcnNpb24gPSB0aGlzLmN1cnJlbnRWZXJzaW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm11dGF0aW9uUXVldWUubW92ZVRvU2F2aW5nUXVldWUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbXV0YXRpb25SZXF1ZXN0cyA9IHRoaXMubWFwTXV0YXRpb25zKG11dGF0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMSwgNiwgMTEsIDEyXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZ2V0Q2xpZW50KCkuYmF0Y2gobXV0YXRpb25SZXF1ZXN0cyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzXzEgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV0YWdNdXRhdGlvbnMgPSBPYmplY3Qua2V5cyhyZXNfMS5uZXdFdGFncykubWFwKGZ1bmN0aW9uIChpZCkgeyByZXR1cm4gKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wOiAndXBkYXRlJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsdGFEb2M6IHsgJGV0YWc6IHJlc18xLm5ld0V0YWdzW2lkXSB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0TmFtZTogbnVsbCAvLyBXZSBkb24ndCBoYXZlIHRoZSB0YXJnZXQgbmFtZS4gQnV0IHRoaXMgbXV0YXRpb24gd29uJ3QgYmUgdmlzaWJsZSBpbiBhIERlbHRhQ29sbGVjdGlvbiBhbnl3YXksIHNvIGl0IHdvbnQgYmUgdXNlZC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJbnZhbGlkYXRlIGNhY2hlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENhY2hlQnVzdC5pbnZhbGlkYXRlQ2FjaGUobXV0YXRpb25SZXF1ZXN0cywgdGhpcy5nZXRVc2VyKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDb21tbWl0IG11dGF0aW9ucyBhbG9uZyB3aXRoIGV0YWdNdXRhdGlvbnMgaW50byBxdWVyaWVzIGNhY2hlZCBkYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGVyc2lzdGVkVmVyc2lvbi5kaXNwYXRjaCh2ZXJzaW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWx0YUNhY2hlLmFwcGx5TXV0YXRpb25zKG11dGF0aW9ucywgeyBvcHRpbWlzdGljOiBmYWxzZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5xdWVyeVNldC5jb21taXRNdXRhdGlvbnMoTXV0YXRpb25RdWV1ZS5tZXJnZShtdXRhdGlvbnMsIGV0YWdNdXRhdGlvbnMpLCB2ZXJzaW9uKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9uIHN1Y2Nlc3MsIGNsZWFyIHNhdmluZyBxdWV1ZSBhcyB0aGUgbXV0YXRpb25zIHdpbGwgbm93IGJlIGNvbW1pdHRlZCB0byBhbGwgcXVlcnkncyBkYXRhIGluc3RlYWQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubXV0YXRpb25RdWV1ZS5jbGVhclNhdmluZ1F1ZXVlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hTdGF0ZUNoYW5nZSgpOyAvLyBpc0VkaXRlZCBtYXkgaGF2ZSB0dXJuZWQgdG8gZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmluYWxseSwgbm90aWZ5IHN1YnNjcmliZXJzIHNvIHRoYXQgdmlld3MgZ2V0IHVwZGF0ZWQgd2l0aCBjb21taXR0ZWQgcmVzdWx0c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5U2V0Lm5vdGlmeVN1YnNjcmliZXJzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHRoaXMubXV0YXRpb25RdWV1ZS5nZXQoKS5sZW5ndGggPiAwKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZGl0aW9uYWwgbXV0YXRpb25zIGhhcHBlbmQgd2hpbGUgd2Ugd2VyZSBzYXZpbmcuIEhhbmRsZSB0aGVtIGFzIHdlbGwuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuX3NhdmUoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGRpdGlvbmFsIG11dGF0aW9ucyBoYXBwZW5kIHdoaWxlIHdlIHdlcmUgc2F2aW5nLiBIYW5kbGUgdGhlbSBhcyB3ZWxsLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gNTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6IHJldHVybiBbMyAvKmJyZWFrKi8sIDEyXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzEgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGVyc2lzdGVkVmVyc2lvbi5kaXNwYXRjaEVycm9yKGVycm9yXzEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShlcnJvcl8xICYmIGVycm9yXzEubmFtZSAmJiBlcnJvcl8xLm5hbWUuc3RhcnRzV2l0aChcImh0dHA0XCIpKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgOV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFjY2VzcyBDb250cm9sIGRlbmllZCwgYmFkIHJlcXVlc3Qgb3Igc2ltaWxhci4gVGhyb3cgbXV0YXRpb25zIGF3YXkuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFcnJvcihlcnJvcl8xLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubXV0YXRpb25RdWV1ZS5jbGVhclNhdmluZ1F1ZXVlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hTdGF0ZUNoYW5nZSgpOyAvLyBpc0VkaXRlZCBtYXkgaGF2ZSB0dXJuZWQgdG8gZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWVyeVNldC5ub3RpZnlTdWJzY3JpYmVycygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh0aGlzLm11dGF0aW9uUXVldWUuZ2V0KCkubGVuZ3RoID4gMCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBIbyBobyEgQWRkaXRpb25hbCBtdXRhdGlvbnMgaGFwcGVuZCB3aGlsZSB3ZSB3ZXJlIHNhdmluZy4gSGFuZGxlIHRoZW0gYWxvbmUuIFRIZXkgbWlnaHQgYmUgbW9yZSBsdWNreS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5fc2F2ZSgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhvIGhvISBBZGRpdGlvbmFsIG11dGF0aW9ucyBoYXBwZW5kIHdoaWxlIHdlIHdlcmUgc2F2aW5nLiBIYW5kbGUgdGhlbSBhbG9uZS4gVEhleSBtaWdodCBiZSBtb3JlIGx1Y2t5LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gODtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDg6IHJldHVybiBbMyAvKmJyZWFrKi8sIDEwXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFcnJvcihlcnJvcl8xLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxMDtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOiByZXR1cm4gWzMgLypicmVhayovLCAxMl07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaFN0YXRlQ2hhbmdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNyAvKmVuZGZpbmFsbHkqL107XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMjogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kV3JpdGVyLnByb3RvdHlwZS5tYXBNdXRhdGlvbnMgPSBmdW5jdGlvbiAobXV0YXRpb25zKSB7XHJcbiAgICAgICAgdmFyIGJyID0gbmV3IEJhdGNoUnVubmVyKCk7XHJcbiAgICAgICAgbXV0YXRpb25zLmZvckVhY2goZnVuY3Rpb24gKG0pIHtcclxuICAgICAgICAgICAgc3dpdGNoIChtLm9wKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICd1cGRhdGUnOlxyXG4gICAgICAgICAgICAgICAgICAgIGJyLnVwZGF0ZShtLnRhYmxlLCBtLmlkLCBtLmRlbHRhRG9jLCBtLmJyYW5jaElkKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2FkZC1yZWxhdGVkJzpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW0ucmVsYXRlZERvYy4kZXRhZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBObyAkZXRhZyBtZWFucyB0aGlzIGlzIGEgbmV3IGRvY3VtZW50LiBBZGQgaXQgYmVmb3JlIGxpbmtpbmcgdG8gaXQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyLmFkZCh0YWJsZXNbbS50YWJsZV0ucmVsYXRpb25zaGlwc1ttLmdyYXBoUHJvcF0sIG0ucmVsYXRlZERvYywgbS5icmFuY2hJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyLmxpbmsyKG0udGFibGUsIG0uaWQsIG0uZ3JhcGhQcm9wLCBtLnJlbGF0ZWREb2MuaWQsIG0uYnJhbmNoSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAncmVtb3ZlLXJlbGF0ZWQnOlxyXG4gICAgICAgICAgICAgICAgICAgIGJyLnVubGluazIobS50YWJsZSwgbS5pZCwgbS5ncmFwaFByb3AsIG0ucmVsYXRlZERvYy5pZCwgbS5icmFuY2hJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICd1bmRvLWxpbmsnOlxyXG4gICAgICAgICAgICAgICAgICAgIGJyLnVuZG9MaW5rKG0udGFibGUsIG0uaWQsIG0uZ3JhcGhQcm9wLCBtLnJlbGF0ZWRJZCwgbS5icmFuY2hJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdkZWxldGUnOlxyXG4gICAgICAgICAgICAgICAgICAgIGJyLmRlbGV0ZShtLnRhYmxlLCBtLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2NsZWFyLWJyYW5jaCc6XHJcbiAgICAgICAgICAgICAgICAgICAgYnIuY2xlYXJCcmFuY2gobS5icmFuY2hJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdtZXJnZSc6XHJcbiAgICAgICAgICAgICAgICAgICAgYnIubWVyZ2UobS5icmFuY2hJZCwgbS50YXJnZXRCcmFuY2hJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gYnIubXV0YXRpb25SZXF1ZXN0cztcclxuICAgIH07XHJcbiAgICByZXR1cm4gS2VkQmFja2VuZFdyaXRlcjtcclxufSgpKTtcclxuZXhwb3J0IHsgS2VkQmFja2VuZFdyaXRlciB9O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1rZWRiYWNrZW5kLXdyaXRlci5qcy5tYXAiLCJpbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xyXG5pbXBvcnQgeyBnZXRUYWJsZUZyb21MYWJlbCwgYnJhbmNoU2Vuc2l0aXZlLCBnbG9iYWxPcCB9IGZyb20gJy4vdXRpbHMnO1xyXG5pbXBvcnQgeyBtZXJnZURlbHRhcyB9IGZyb20gJy4vZGVsdGEtbWVyZ2UnO1xyXG52YXIgTXV0YXRpb25RdWV1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE11dGF0aW9uUXVldWUoKSB7XHJcbiAgICAgICAgdGhpcy5xdWV1ZSA9IFtdO1xyXG4gICAgICAgIHRoaXMuc2F2aW5nUXVldWUgPSBbXTtcclxuICAgIH1cclxuICAgIE11dGF0aW9uUXVldWUucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChtdXRhdGlvbnMpIHtcclxuICAgICAgICB0aGlzLnF1ZXVlID0gTXV0YXRpb25RdWV1ZS5tZXJnZSh0aGlzLnF1ZXVlLCBtdXRhdGlvbnMpO1xyXG4gICAgfTtcclxuICAgIE11dGF0aW9uUXVldWUucHJvdG90eXBlLm1vdmVUb1NhdmluZ1F1ZXVlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuc2F2aW5nUXVldWUgPSBNdXRhdGlvblF1ZXVlLm1lcmdlKHRoaXMuc2F2aW5nUXVldWUsIHRoaXMucXVldWUpO1xyXG4gICAgICAgIHRoaXMucXVldWUgPSBbXTtcclxuICAgIH07XHJcbiAgICBNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5jbGVhclNhdmluZ1F1ZXVlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuc2F2aW5nUXVldWUgPSBbXTtcclxuICAgIH07XHJcbiAgICBNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2F2aW5nUXVldWUuY29uY2F0KHRoaXMucXVldWUpO1xyXG4gICAgfTtcclxuICAgIE11dGF0aW9uUXVldWUucHJvdG90eXBlLmFmZmVjdHNRdWVyeSA9IGZ1bmN0aW9uICh0YWJsZSwgcXVlcnksIGluY2x1ZGVzKSB7XHJcbiAgICAgICAgdmFyIG11dGF0aW9ucyA9IHRoaXMuZ2V0KCk7XHJcbiAgICAgICAgaWYgKG11dGF0aW9ucy5zb21lKGZ1bmN0aW9uIChtKSB7IHJldHVybiBtLm9wID09PSAnbWVyZ2UnIHx8IG0ub3AgPT09ICdjbGVhci1icmFuY2gnOyB9KSlcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgaWYgKHF1ZXJ5Lmlkcykge1xyXG4gICAgICAgICAgICAvLyBBIHF1ZXJ5IHdpdGggXCJpZHNcIiBmaWx0ZXIgd2lsbCBiZSBlYXN5IHRvIGRldGVjdCBhIG5vLW1hdGNoIG9uOlxyXG4gICAgICAgICAgICByZXR1cm4gbXV0YXRpb25zLnNvbWUoZnVuY3Rpb24gKG0pIHsgcmV0dXJuIGdsb2JhbE9wKG0pIHx8ICghYnJhbmNoU2Vuc2l0aXZlKG0pIHx8IG0uYnJhbmNoSWQgPT09IHF1ZXJ5LmJyYW5jaElkKSAmJlxyXG4gICAgICAgICAgICAgICAgcXVlcnkuaWRzLmluY2x1ZGVzKG0uaWQpOyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gT3RoZXJ3aXNlLCBjaGVjayBpZiBtdXRhdGlvbnMgYWZmZWN0IHNhbWUgYnJhbmNoIGFuZCB0YWJsZS4gQ291bGQgYmUgZG9uZSBtb3JlIGZpbmUgZ3JhaW5lZCxcclxuICAgICAgICAvLyBidXQgdGhhdCB3b3VsZCBvbmx5IGJlIGEgc3Vib3B0aW1pemF0aW9uLlxyXG4gICAgICAgIHJldHVybiBtdXRhdGlvbnMuc29tZShmdW5jdGlvbiAobSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbS5vcCA9PT0gJ2RlbGV0ZScgP1xyXG4gICAgICAgICAgICAgICAgbS50YWJsZSA9PT0gdGFibGUgfHwgKGluY2x1ZGVzLnNvbWUoZnVuY3Rpb24gKGxhYmVsKSB7IHJldHVybiBnZXRUYWJsZUZyb21MYWJlbCh0YWJsZSwgbGFiZWwpID09PSBtLnRhYmxlOyB9KSkgOlxyXG4gICAgICAgICAgICAgICAgZ2xvYmFsT3AobSkgPyB0cnVlIDpcclxuICAgICAgICAgICAgICAgICAgICBtLmJyYW5jaElkID09IHF1ZXJ5LmJyYW5jaElkICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChtLnRhYmxlID09PSB0YWJsZSB8fCAobS5vcCAhPT0gJ3VwZGF0ZScgJiYgKFt0YWJsZV0uY29uY2F0KGluY2x1ZGVzLm1hcChmdW5jdGlvbiAobGFiZWwpIHsgcmV0dXJuIGdldFRhYmxlRnJvbUxhYmVsKHRhYmxlLCBsYWJlbCk7IH0pKS5zb21lKGZ1bmN0aW9uICh0YWJsZSkgeyByZXR1cm4gZ2V0VGFibGVGcm9tTGFiZWwobS50YWJsZSwgbS5ncmFwaFByb3ApID09PSB0YWJsZTsgfSkpKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgTXV0YXRpb25RdWV1ZS5tZXJnZSA9IGZ1bmN0aW9uIChxdWV1ZTEsIHF1ZXVlMikge1xyXG4gICAgICAgIHZhciBtdXRhYmxlUXVldWUxID0gcXVldWUxLnNsaWNlKCk7XHJcbiAgICAgICAgdmFyIG11dGFibGVRdWV1ZTIgPSBxdWV1ZTIuc2xpY2UoKTtcclxuICAgICAgICAvL2lmIChtdXRhYmxlUXVldWUxLmxlbmd0aCA+IDApIGRlYnVnZ2VyO1xyXG4gICAgICAgIHZhciBsZW4gPSBxdWV1ZTEubGVuZ3RoO1xyXG4gICAgICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gKGkpIHtcclxuICAgICAgICAgICAgdmFyIG0gPSBxdWV1ZTFbaV07XHJcbiAgICAgICAgICAgIGlmIChtLm9wID09PSAndXBkYXRlJykge1xyXG4gICAgICAgICAgICAgICAgdmFyIG92ZXJsYXBwaW5nSWRPcElkeCA9IG11dGFibGVRdWV1ZTIuZmluZEluZGV4KGZ1bmN0aW9uIChuZXdNdXQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3TXV0Lm9wID09PSAndXBkYXRlJyAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdNdXQuYnJhbmNoSWQgPT09IG0uYnJhbmNoSWQgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3TXV0LmlkID09PSBtLmlkO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAob3ZlcmxhcHBpbmdJZE9wSWR4ID49IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBtdXRhYmxlUXVldWUxW2ldID0gdHNsaWJfMS5fX2Fzc2lnbih7fSwgbSwgeyBkZWx0YURvYzogbWVyZ2VEZWx0YXMobS5kZWx0YURvYywgbXV0YWJsZVF1ZXVlMltvdmVybGFwcGluZ0lkT3BJZHhdLmRlbHRhRG9jKSB9KTtcclxuICAgICAgICAgICAgICAgICAgICBtdXRhYmxlUXVldWUyLnNwbGljZShvdmVybGFwcGluZ0lkT3BJZHgsIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XHJcbiAgICAgICAgICAgIF9sb29wXzEoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtdXRhYmxlUXVldWUxLmNvbmNhdChtdXRhYmxlUXVldWUyKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTXV0YXRpb25RdWV1ZTtcclxufSgpKTtcclxuZXhwb3J0IHsgTXV0YXRpb25RdWV1ZSB9O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1tdXRhdGlvbi1xdWV1ZS5qcy5tYXAiLCJpbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kUXVlcnkgfSBmcm9tICcuL2tlZGJhY2tlbmQtcXVlcnknO1xyXG5pbXBvcnQgKiBhcyBKc29uU2NoZW1hIGZyb20gJ2tlZGJhY2tlbmQtc2NoZW1hL3NjaGVtYS5qc29uJztcclxuaW1wb3J0IHsgcXVlcnlBcnJheSB9IGZyb20gJy4vdXRpbHMnO1xyXG52YXIgUXVlcnlTZXQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBRdWVyeVNldChtdXRhdGlvblF1ZXVlKSB7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblF1ZXVlID0gbXV0YXRpb25RdWV1ZTtcclxuICAgICAgICB0aGlzLnF1ZXJpZXMgPSBbXTtcclxuICAgIH1cclxuICAgIFF1ZXJ5U2V0LnByb3RvdHlwZS5jb21taXRNdXRhdGlvbnMgPSBmdW5jdGlvbiAobXV0YXRpb25zLCB2ZXJzaW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgUHJvbWlzZS5hbGwodGhpcy5xdWVyaWVzLm1hcChmdW5jdGlvbiAocSkgeyByZXR1cm4gcS5jb21taXRNdXRhdGlvbnMobXV0YXRpb25zLCB2ZXJzaW9uKTsgfSkpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhbnVwSW52YWxpZFF1ZXJpZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBRdWVyeVNldC5wcm90b3R5cGUuY2xlYW51cEludmFsaWRRdWVyaWVzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMucXVlcmllcyA9IHRoaXMucXVlcmllcy5maWx0ZXIoZnVuY3Rpb24gKHEpIHtcclxuICAgICAgICAgICAgaWYgKHEuaW52YWxpZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHEudGltZW91dEhhbmRsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChxLnRpbWVvdXRIYW5kbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHEudGltZW91dEhhbmRsZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgUXVlcnlTZXQucHJvdG90eXBlLm5vdGlmeVN1YnNjcmliZXJzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBvcHRpbWlzdGljTXV0YXRpb25zID0gdGhpcy5tdXRhdGlvblF1ZXVlLmdldCgpO1xyXG4gICAgICAgIHRoaXMucXVlcmllcy5mb3JFYWNoKGZ1bmN0aW9uIChxKSB7XHJcbiAgICAgICAgICAgIHEubm90aWZ5U3Vic2NyaWJlcnMob3B0aW1pc3RpY011dGF0aW9ucyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgUXVlcnlTZXQucHJvdG90eXBlLmZpbmRRdWVyeSA9IGZ1bmN0aW9uICh0YWJsZSwgcXVlcnkpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5xdWVyaWVzLmZpbmQoZnVuY3Rpb24gKHEpIHsgcmV0dXJuIHEucXVlcnlLZXkgPT09IEtlZEJhY2tlbmRRdWVyeS5xdWVyeUtleSh0YWJsZSwgcXVlcnkpOyB9KTtcclxuICAgIH07XHJcbiAgICBRdWVyeVNldC5wcm90b3R5cGUucXVlcnlMb2NhbGx5ID0gZnVuY3Rpb24gKHRhYmxlLCBxdWVyeSwgaW5jbHVkZXMpIHtcclxuICAgICAgICAvLyBGb3Igbm93LCBvbmx5IGhhbmRsZSB0aGlzIHZlcnkgY29tbW9uIGFuZCBzcGVjaWFsIGNhc2UgKHdoaWNoXHJcbiAgICAgICAgLy8gd2lsbCBzYXZlIGEgbG90IG9mIHVubmVzY2Vzc2FyeSBuZXR3b3JrIHRyYWZmaWMgaWYgSSBhbSB0aGlua2luZyByaWdodC4uLilcclxuICAgICAgICB2YXIgbXV0YXRpb25zID0gdGhpcy5tdXRhdGlvblF1ZXVlLmdldCgpO1xyXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBxdWVyeSB3YW50cyB0byBnZXQgYSBzaW5nbGUgZW50aXR5IGJ5IGl0cyBJRDpcclxuICAgICAgICBpZiAocXVlcnkuaWRzICYmIHF1ZXJ5Lmlkcy5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgLy8gQW5kIGlmIHNvLCBpZiB3ZSBoYXZlIGFuIG91dGdvaW5nIG11dGF0aW9uIHRvIGNyZWF0ZSB0aGF0IGVudGl0eTpcclxuICAgICAgICAgICAgaWYgKG11dGF0aW9ucy5zb21lKGZ1bmN0aW9uIChtKSB7IHJldHVybiBtLm9wID09PSAnYWRkLXJlbGF0ZWQnICYmIG0ucmVsYXRlZERvYy5pZCA9PT0gcXVlcnkuaWRzWzBdOyB9KSkge1xyXG4gICAgICAgICAgICAgICAgLy8gVGhlbiByZXR1cm4gYW4gRU1QVFkgcmVzcG9uc2UsIHNpZ25hbGxpbmcgdGhhdCB3ZSBjYW4gcmVzb2x2ZSB0aGlzIGxvY2FsbHksXHJcbiAgICAgICAgICAgICAgICAvLyBidXQgbGV0IHRoZSBvcHRpc3RpYyBmZWF0dXJlIG9mIEtlZEJhY2tlbmRRdWVyeSBhcHBseSB0aGUgbXV0YXRpb24gYmVmb3JlXHJcbiAgICAgICAgICAgICAgICAvLyBub3RpZnlpbmcgc3Vic2NyaWJlcnMgKHdlIGRvbid0IHdhbnQgaXQgdG8gYmUgcGVyc2lzdGVudCBiZWZvcmUgdGhlIHNlcnZlclxyXG4gICAgICAgICAgICAgICAgLy8gaGFzIGFjY2VwdGVkIHRoZSBtdXRhdGlvbilcclxuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBPSywgYW5vdGhlciBxdWl0ZSBjb21tb24gY2FzZSBpcyB3aGVuIHdlIGFzayBmb3IgYSBjZXJ0YWluIElEIGFuZCB0aGF0IElEIHJlcGxpZXNcclxuICAgICAgICAvLyB3aXRoaW4gYW5vdGhlciBxdWVyeVxyXG4gICAgICAgIGlmIChxdWVyeS5oYXNFZGdlc0Zyb20gfHwgcXVlcnkuaGFzRWRnZXNUbylcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7IC8vIE5vdCBwb3NzaWJsZSB0byBoYW5kbGVcclxuICAgICAgICBpZiAoIXF1ZXJ5LmlkcylcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7IC8vIEZvciBub3csIGp1c3QgdGFrZSBoaWdodCBmb3IgdGhpcyBwYXJ0aWN1bGFyIGFuZCBtb3N0IGNvbW1vbiBjYXNlIVxyXG4gICAgICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gKHEpIHtcclxuICAgICAgICAgICAgaWYgKCFxLmdvdEluaXRpYWxSZXNwb25zZSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBcImNvbnRpbnVlXCI7XHJcbiAgICAgICAgICAgIGlmIChxLnF1ZXJ5LmJyYW5jaElkICE9PSBxdWVyeS5icmFuY2hJZClcclxuICAgICAgICAgICAgICAgIHJldHVybiBcImNvbnRpbnVlXCI7XHJcbiAgICAgICAgICAgIGlmIChxLnF1ZXJ5LmZsYWdzKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiY29udGludWVcIjsgLy8gSXQgd291bGQgYmUgY29tcGxleCB0byBzdXBwb3J0IHZhcmlvdXMgZmxhZ3MuIFF1ZXJ5J3MgZGF0YSBtYXkgaW5jbHVkZSBpZHMgb25seS4gQ2FuJ3QgcmVseSBvbiB0aGUgcXVlcnkuXHJcbiAgICAgICAgICAgIHZhciBxSW5jbHVkZXMgPSBxLmluY2x1ZGVzO1xyXG4gICAgICAgICAgICBpZiAocUluY2x1ZGVzLmxlbmd0aCA+IDAgJiYgKCFxdWVyeS5pbmNsdWRlIHx8IHF1ZXJ5LmluY2x1ZGUubGVuZ3RoID09PSAwKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gV2UgZG9uJ3QgaW5jbHVkZSwgYnV0IHRoaXMgcXVlcnkgZG9lcy4gQ2hlY2sgaWYgd2UgY2FuIGZpbmQgb3VyIHJlc3VsdCB3aXRoaW4gaXQuXHJcbiAgICAgICAgICAgICAgICB2YXIgbGFiZWwgPSBxSW5jbHVkZXMuZmluZChmdW5jdGlvbiAobCkgeyByZXR1cm4gSnNvblNjaGVtYS50YWJsZXNbcS50YWJsZV1bXCJyZWxhdGlvbnNoaXBzXCJdW2xdID09PSB0YWJsZTsgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAobGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzXzEgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gcS5kYXRhOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW50aXR5ID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3ViRGF0YSA9IHF1ZXJ5QXJyYXkocXVlcnksIGVudGl0eVtsYWJlbF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJEYXRhLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHJlc18xW3IuaWRdID0gcjsgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHRfMSA9IE9iamVjdC5rZXlzKHJlc18xKS5tYXAoZnVuY3Rpb24gKGlkKSB7IHJldHVybiByZXNfMVtpZF07IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgcmV0dXJuIHJlc3VsdCBpZiB3ZSBjb3VsZCBsb29rIHVwIGV2ZXJ5IHJlcXVlc3RlZCBJRDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXF1ZXJ5Lmlkcy5ldmVyeShmdW5jdGlvbiAoaWQpIHsgcmV0dXJuIHJlc3VsdF8xLnNvbWUoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHguaWQgPT09IGlkOyB9KTsgfSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcImNvbnRpbnVlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IHJlc3VsdF8xIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFpbmNsdWRlcy5ldmVyeShmdW5jdGlvbiAobGFiZWwpIHsgcmV0dXJuIHFJbmNsdWRlcy5pbmNsdWRlcyhsYWJlbCk7IH0pKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiY29udGludWVcIjtcclxuICAgICAgICAgICAgLy8gTGFzdGx5LCBpZiB0aGUgcXVlcnkgaW5jbHVkZXMgYWxsIGdyYXBocyB0aGF0IHdlIGRvLCBwaWNrIHRoZSBzdWJzZXQgZnJvbSB0aGF0IHF1ZXJ5LlxyXG4gICAgICAgICAgICAvLyBDb25jcmV0ZSBleGFtcGxlOiBXZSBvYnNlcnZlIGEgY2VydGFpbiBUYXNrIGJ5IElEIGFuZCB3YW50IGl0cyBrbm93bGVkZ2VSZXF1aXJlbWVudHMgYWxvbmcgd2l0aCBpdCxcclxuICAgICAgICAgICAgLy8gYW5kIHRoZXJlJ3MgYW5vdGhlciBxdWVyeSBvZiBhbGwgdGFza3MgdGhhdCBhbHNvIGluY2x1ZGVzIGtub3dsZWRnZVJlcXVpcmVtZW50cy4gVXNlIGl0LiBcclxuICAgICAgICAgICAgaWYgKHEudGFibGUgPT09IHRhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0XzIgPSBxdWVyeUFycmF5KHF1ZXJ5LCBxLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgLy8gT25seSByZXR1cm4gcmVzdWx0IGlmIHdlIGNvdWxkIGxvb2sgdXAgZXZlcnkgcmVxdWVzdGVkIElEOlxyXG4gICAgICAgICAgICAgICAgaWYgKCFxdWVyeS5pZHMuZXZlcnkoZnVuY3Rpb24gKGlkKSB7IHJldHVybiByZXN1bHRfMi5zb21lKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LmlkID09PSBpZDsgfSk7IH0pKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImNvbnRpbnVlXCI7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogcmVzdWx0XzIgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMucXVlcmllczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIHEgPSBfYVtfaV07XHJcbiAgICAgICAgICAgIHZhciBzdGF0ZV8xID0gX2xvb3BfMShxKTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBzdGF0ZV8xID09PSBcIm9iamVjdFwiKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YXRlXzEudmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFF1ZXJ5U2V0LnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaXB0aW9uKSB7XHJcbiAgICAgICAgdmFyIF9hID0gc3Vic2NyaXB0aW9uLmNvbGxlY3Rpb24sIHRhYmxlID0gX2EudGFibGUsIHF1ZXJ5ID0gX2EucXVlcnksIHJlcG8gPSBfYS5yZXBvO1xyXG4gICAgICAgIHZhciBrYlF1ZXJ5ID0gdGhpcy5maW5kUXVlcnkodGFibGUsIHF1ZXJ5KTtcclxuICAgICAgICBpZiAoIWtiUXVlcnkpIHtcclxuICAgICAgICAgICAga2JRdWVyeSA9IG5ldyBLZWRCYWNrZW5kUXVlcnkodGFibGUsIHF1ZXJ5LCByZXBvLmdldFVzZXIoKSwgcmVwbywgdGhpcy5tdXRhdGlvblF1ZXVlKTtcclxuICAgICAgICAgICAgdGhpcy5xdWVyaWVzLnB1c2goa2JRdWVyeSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoa2JRdWVyeS50aW1lb3V0SGFuZGxlKSB7XHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoa2JRdWVyeS50aW1lb3V0SGFuZGxlKTtcclxuICAgICAgICAgICAgICAgIGtiUXVlcnkudGltZW91dEhhbmRsZSA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAga2JRdWVyeS5zdWJzY3JpYmUoc3Vic2NyaXB0aW9uKTtcclxuICAgIH07XHJcbiAgICBRdWVyeVNldC5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaXB0aW9uKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgX2EgPSBzdWJzY3JpcHRpb24uY29sbGVjdGlvbiwgdGFibGUgPSBfYS50YWJsZSwgcXVlcnkgPSBfYS5xdWVyeSwgcmVwbyA9IF9hLnJlcG87XHJcbiAgICAgICAgdmFyIGtiUXVlcnkgPSB0aGlzLmZpbmRRdWVyeSh0YWJsZSwgcXVlcnkpO1xyXG4gICAgICAgIGlmIChrYlF1ZXJ5KSB7XHJcbiAgICAgICAgICAgIC8vIFByb2hpYml0IGZ1cnRoZXIgbm90aWZpY2F0aW9ucyB0byB0aGlzIHN1YnNjcmlwdGlvbjpcclxuICAgICAgICAgICAga2JRdWVyeS51bnN1YnNjcmliZShzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICAvLyBSZWxlYXNlIHVubmVzY2Vzc2FyeSBtZW1vcnkgd2hlbiB0aGVyZSBhcmUgbm8gbW9yZSBzdWJzY3JpcHRpb25zIG9mIHRoaXMgcXVlcnksIGJ5IHJlbW92aW5nIHRoZSBxdWVyeSBpdHNlbGZcclxuICAgICAgICAgICAgLy8gVG8gdGhhdCBpbiBhIGRlbGF5ZWQgbWFubmVyLCBzbyB0aGF0IGFuIHVuc3Vic2NyaWJlKCkgZm9sbG93ZWQgYnkgYW4gaW1tZWRpYXRlIHN1YnNjcmliZSgpIGRvbid0IGhhdmUgdG8gcmUtcXVlcnkgdGhlIHNlcnZlcjpcclxuICAgICAgICAgICAgaWYgKGtiUXVlcnkuc3Vic2NyaXB0aW9ucy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIC8vIFNjaGVkdWxlIGZvciBnYXJiYWdlIGNvbGxlY3Rpb24gaW4gNSBtaW51dGVzOlxyXG4gICAgICAgICAgICAgICAga2JRdWVyeS50aW1lb3V0SGFuZGxlID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYga2JRdWVyeSBzdGlsbCBoYXMgbm8gc3Vic2NyaXB0aW9ucyAobm90IGNlcnRhaW4hIEEgbmV3IHN1YnNjcmliZXIgbWF5IGhhdmUgY29tZSBhbG9uZy4uLilcclxuICAgICAgICAgICAgICAgICAgICBpZiAoa2JRdWVyeS5zdWJzY3JpcHRpb25zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTdGlsbCBubyBzdWJzY3JpcHRpb25zIG9uIGl0LCB0aW1lIHRvIHJlbGVhc2Ugc29tZSBtZW1vcnkgYW5kIGZvcmdldCB0aGUgaW4tbWVtb3J5IGNhY2hlIG9mIHRoZSBxdWVyeSByZXN1bHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucXVlcmllcyA9IF90aGlzLnF1ZXJpZXMuZmlsdGVyKGZ1bmN0aW9uIChxKSB7IHJldHVybiBxICE9PSBrYlF1ZXJ5OyB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCB0aGlzLnF1ZXJpZXMubGVuZ3RoID4gNTAgP1xyXG4gICAgICAgICAgICAgICAgICAgIDUwMCA6IC8vIERvbid0IGhvc3QgdG9vIG1hbnkgcXVlcmllcy4gR2FyYmFnZSBjb2xsZWN0IHRoaXMgd2l0aGluIDUwMCBtc1xyXG4gICAgICAgICAgICAgICAgICAgIDUgKiA2MDAwMCk7IC8vIEFsbG93IHF1ZXJ5IGluIG1lbW9yeSBmb3IgYW5vdGhlciA1IG1pbnV0ZXNcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gUXVlcnlTZXQ7XHJcbn0oKSk7XHJcbmV4cG9ydCB7IFF1ZXJ5U2V0IH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXF1ZXJ5LXNldC5qcy5tYXAiLCJpbXBvcnQgeyB0YWJsZXMgfSBmcm9tICdrZWRiYWNrZW5kLXNjaGVtYS9zY2hlbWEuanNvbic7XHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRUYWJsZUZyb21MYWJlbCh0YWJsZSwgbGFiZWwpIHtcclxuICAgIHJldHVybiB0YWJsZXNbdGFibGVdLnJlbGF0aW9uc2hpcHNbbGFiZWxdO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBxdWVyeUFycmF5KHF1ZXJ5LCBkYXRhKSB7XHJcbiAgICB2YXIgZmlsdGVyID0gZ2V0RmlsdGVyRnJvbVF1ZXJ5KHF1ZXJ5KTtcclxuICAgIHJldHVybiBkYXRhLmZpbHRlcihmaWx0ZXIpO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBBTkQoZmlsdGVyMSwgZmlsdGVyMikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh4KSB7IHJldHVybiBmaWx0ZXIxKHgpICYmIGZpbHRlcjIoeCk7IH07XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEZpbHRlckZyb21RdWVyeShxdWVyeSkge1xyXG4gICAgdmFyIGZpbHRlciA9IGZ1bmN0aW9uICh4KSB7IHJldHVybiB0cnVlOyB9O1xyXG4gICAgaWYgKHF1ZXJ5LmZyb20pXHJcbiAgICAgICAgcmV0dXJuIEFORChmaWx0ZXIsIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LmRhdGVUaW1lID49IHF1ZXJ5LmZyb207IH0pO1xyXG4gICAgaWYgKHF1ZXJ5LnRvKVxyXG4gICAgICAgIHJldHVybiBBTkQoZmlsdGVyLCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5kYXRlVGltZSA8IHF1ZXJ5LnRvOyB9KTtcclxuICAgIGlmIChxdWVyeS5pZHMpXHJcbiAgICAgICAgcmV0dXJuIEFORChmaWx0ZXIsIGZ1bmN0aW9uICh4KSB7IHJldHVybiBxdWVyeS5pZHMuaW5jbHVkZXMoeC5pZCk7IH0pO1xyXG4gICAgaWYgKHF1ZXJ5Lm5hbWUpXHJcbiAgICAgICAgcmV0dXJuIEFORChmaWx0ZXIsIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4Lm5hbWUgPT09IHF1ZXJ5Lm5hbWU7IH0pO1xyXG4gICAgaWYgKHF1ZXJ5LnRhZ3MpXHJcbiAgICAgICAgcmV0dXJuIEFORChmaWx0ZXIsIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LnRhZ3MgJiYgW10uY29uY2F0KHF1ZXJ5LnRhZ3MgfHwgW10pLnNvbWUoZnVuY3Rpb24gKHRhZykgeyByZXR1cm4geC50YWdzLmluY2x1ZGVzKHRhZyk7IH0pOyB9KTtcclxuICAgIC8vIHF1ZXJ5Lmhhc0VkZ2VzRnJvbSBhbmQgcXVlcnkuaGFzRWRnZXNUbyBjYW5ub3QgYnkgZmlsdGVyZWQgaGVyZVxyXG4gICAgcmV0dXJuIGZpbHRlcjtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gYnJhbmNoU2Vuc2l0aXZlKG0pIHtcclxuICAgIHJldHVybiBtLm9wICE9PSAnZGVsZXRlJztcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gZ2xvYmFsT3AobSkge1xyXG4gICAgcmV0dXJuIG0ub3AgPT09ICdjbGVhci1icmFuY2gnIHx8IG0ub3AgPT09ICdtZXJnZSc7XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbHMuanMubWFwIiwiaW1wb3J0IG1pZ3JhdGUgZnJvbSAnLi9taWdyYXRlJztcclxuZXhwb3J0IHZhciBLZWRNb2RlbE1pZ3JhdG9yTWl4aW4gPSBmdW5jdGlvbiAoY2xpZW50KSB7XHJcbiAgICBpZiAoY2xpZW50Ll9fbWlncmF0b3JfbWl4ZWRfaW4pXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgY2xpZW50Ll9fbWlncmF0b3JfbWl4ZWRfaW4gPSB0cnVlO1xyXG4gICAgdmFyIGdldCA9IGNsaWVudC5nZXQ7XHJcbiAgICB2YXIgbGlzdCA9IGNsaWVudC5saXN0O1xyXG4gICAgY2xpZW50LmdldCA9IGZ1bmN0aW9uICh0YWJsZSwgaWQsIG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgaW5jbHVkZSA9IG9wdGlvbnMgJiYgb3B0aW9ucy5pbmNsdWRlO1xyXG4gICAgICAgIHJldHVybiBnZXQuYXBwbHkodGhpcywgYXJndW1lbnRzKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgbWlncmF0ZShyZXN1bHQsIHRhYmxlLCBpbmNsdWRlICYmIGluY2x1ZGUudG9TdHJpbmcoKS5zcGxpdCgnLCcpKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBjbGllbnQubGlzdCA9IGZ1bmN0aW9uICh0YWJsZSwgb3B0aW9ucykge1xyXG4gICAgICAgIHZhciBpbmNsdWRlID0gb3B0aW9ucyAmJiBvcHRpb25zLmluY2x1ZGU7XHJcbiAgICAgICAgcmV0dXJuIGxpc3QuYXBwbHkodGhpcywgYXJndW1lbnRzKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgcmVzdWx0LmZvckVhY2goZnVuY3Rpb24gKGRvYykgeyByZXR1cm4gbWlncmF0ZShkb2MsIHRhYmxlLCBpbmNsdWRlICYmIGluY2x1ZGUudG9TdHJpbmcoKS5zcGxpdCgnLCcpKTsgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGNsaWVudDtcclxufTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwiaW1wb3J0IG1pZ3JhdGVUYXNrIGZyb20gJy4vbWlncmF0ZS10YXNrJztcclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbWlncmF0ZUNvdXJzZShjb3Vyc2UsIGdyYXBocykge1xyXG4gICAgaWYgKCFjb3Vyc2UubW9kdWxlcylcclxuICAgICAgICBjb3Vyc2UubW9kdWxlcyA9IFtdO1xyXG4gICAgY291cnNlLm1vZHVsZXMuZm9yRWFjaChmdW5jdGlvbiAobW9kdWxlKSB7XHJcbiAgICAgICAgaWYgKCFtb2R1bGUucmVzb3VyY2VzKSB7XHJcbiAgICAgICAgICAgIG1vZHVsZS5yZXNvdXJjZXMgPSBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFtb2R1bGUudGFza0lkcykge1xyXG4gICAgICAgICAgICBtb2R1bGUudGFza0lkcyA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgaWYgKCFjb3Vyc2UucmVzcG9uc2libGVUZWFjaGVycykge1xyXG4gICAgICAgIGNvdXJzZS5yZXNwb25zaWJsZVRlYWNoZXJzID0gW107XHJcbiAgICB9XHJcbiAgICAvLyBFYXJsaWVyIHdyb25nIHNwZWxsaW5nIG9mIHJlc291cmNlc1xyXG4gICAgaWYgKCdyZXNvdXJzZXMnIGluIGNvdXJzZSAmJiAhKCdyZXNvdXJjZXMnIGluIGNvdXJzZSkpIHtcclxuICAgICAgICBjb3Vyc2UucmVzb3VyY2VzID0gY291cnNlLnJlc291cnNlcztcclxuICAgICAgICBkZWxldGUgY291cnNlLnJlc291cnNlcztcclxuICAgIH1cclxuICAgIGlmICghY291cnNlLnJlc291cmNlcykge1xyXG4gICAgICAgIGNvdXJzZS5yZXNvdXJjZXMgPSBbXTtcclxuICAgIH1cclxuICAgIGlmIChncmFwaHMpIHtcclxuICAgICAgICBncmFwaHMuZm9yRWFjaChmdW5jdGlvbiAobGFiZWwpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChsYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAndGFza3MnOlxyXG4gICAgICAgICAgICAgICAgICAgIGNvdXJzZS50YXNrcy5mb3JFYWNoKGZ1bmN0aW9uICh0YXNrKSB7IHJldHVybiBtaWdyYXRlVGFzayh0YXNrKTsgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1taWdyYXRlLWNvdXJzZS5qcy5tYXAiLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBtaWdyYXRlVGFzayh0YXNrKSB7XHJcbiAgICBpZiAoIXRhc2sucmVzb3VyY2VzKVxyXG4gICAgICAgIHRhc2sucmVzb3VyY2VzID0gW107XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWlncmF0ZS10YXNrLmpzLm1hcCIsImltcG9ydCBtaWdyYXRlQ291cnNlIGZyb20gJy4vbWlncmF0ZS1jb3Vyc2UnO1xyXG5pbXBvcnQgbWlncmF0ZVRhc2sgZnJvbSAnLi9taWdyYXRlLXRhc2snO1xyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBtaWdyYXRlKGRvYywgdGFibGUsIGdyYXBocykge1xyXG4gICAgc3dpdGNoICh0YWJsZSkge1xyXG4gICAgICAgIGNhc2UgXCJjb3Vyc2VzXCI6XHJcbiAgICAgICAgICAgIG1pZ3JhdGVDb3Vyc2UoZG9jLCBncmFwaHMpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwidGFza3NcIjpcclxuICAgICAgICAgICAgbWlncmF0ZVRhc2soZG9jKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWlncmF0ZS5qcy5tYXAiLCJpbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSBcIi4vb2JzZXJ2YWJsZVwiO1xyXG5pbXBvcnQgeyBpbml0TWFwTWV0aG9kIH0gZnJvbSBcIi4vbWFwXCI7XHJcbmltcG9ydCB7IFZhbHVlIH0gZnJvbSBcIi4vdmFsdWVcIjtcclxuaW1wb3J0IHsgRW1pdHRlciB9IGZyb20gXCIuL2VtaXR0ZXJcIjtcclxudmFyIENvbGxlY3Rpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhDb2xsZWN0aW9uLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gQ29sbGVjdGlvbihzdWJzY3JpYmUpIHtcclxuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgc3Vic2NyaWJlKSB8fCB0aGlzO1xyXG4gICAgfVxyXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuX21hcCA9IGZ1bmN0aW9uIChtYXBwZXIpIHtcclxuICAgICAgICB0aHJvdyBcIm1peGVkaW5cIjtcclxuICAgIH07XHJcbiAgICBDb2xsZWN0aW9uLmZyb20gPSBmdW5jdGlvbiAoeCkge1xyXG4gICAgICAgIGlmICh4LnN1YnNjcmliZSlcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xsZWN0aW9uKGZ1bmN0aW9uIChzKSB7IHJldHVybiB4LnN1YnNjcmliZShzKTsgfSk7XHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoeCkpIHtcclxuICAgICAgICAgICAgdmFyIGVtaXR0ZXJfMSA9IG5ldyBFbWl0dGVyKHgpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IENvbGxlY3Rpb24oZnVuY3Rpb24gKHMpIHsgcmV0dXJuIGVtaXR0ZXJfMS5zdWJzY3JpYmUocyk7IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJPYnNlcnZhYmxlQ29sbGVjdGlvbi5mcm9tKCkgY2FuIG9ubHkgdGFrZSBhcnJheXMgb3Igb2JzZXJ2YWJsZXNcIik7XHJcbiAgICB9O1xyXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUubWFwID0gZnVuY3Rpb24gKG1hcHBlcikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9tYXAoZnVuY3Rpb24gKGl0ZW1zKSB7IHJldHVybiBpdGVtcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuIG1hcHBlcihpdGVtKTsgfSk7IH0pO1xyXG4gICAgfTtcclxuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmZsYXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hcChmdW5jdGlvbiAoaXRlbXMpIHsgcmV0dXJuIFtdLmNvbmNhdC5hcHBseShbXSwgaXRlbXMpOyB9KTtcclxuICAgIH07XHJcbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5maWx0ZXIgPSBmdW5jdGlvbiAoZmlsdGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hcChmdW5jdGlvbiAoaXRlbXMpIHsgcmV0dXJuIGl0ZW1zLmZpbHRlcihmaWx0ZXIpOyB9KTtcclxuICAgIH07XHJcbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5jb25jYXQgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gQ29sbGVjdGlvbi5mcm9tKHRoaXMudG9WYWx1ZSgpLmNvbWJpbmVMYXRlc3Qob3RoZXIpLm1hcChmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgdmFyIG1lID0gX2FbMF0sIG90aGVyID0gX2FbMV07XHJcbiAgICAgICAgICAgIHJldHVybiBtZS5jb25jYXQob3RoZXIpO1xyXG4gICAgICAgIH0pKTtcclxuICAgIH07XHJcbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5vcmRlckJ5ID0gZnVuY3Rpb24gKHByb3ApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50b1ZhbHVlKCkubWFwKGZ1bmN0aW9uIChhcnJheSkgeyByZXR1cm4gYXJyYXkuc2xpY2UoKS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgIHZhciBhUHJvcCA9IGEgJiYgYVtwcm9wXTtcclxuICAgICAgICAgICAgdmFyIGJQcm9wID0gYiAmJiBiW3Byb3BdO1xyXG4gICAgICAgICAgICByZXR1cm4gYVByb3AgPiBiUHJvcCA/IDEgOiBhUHJvcCA8IGJQcm9wID8gLTEgOiAwO1xyXG4gICAgICAgIH0pOyB9KS50b0NvbGxlY3Rpb24oZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHg7IH0pO1xyXG4gICAgfTtcclxuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLnRvVmFsdWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IFZhbHVlKGZ1bmN0aW9uIChzKSB7IHJldHVybiBfdGhpcy5zdWJzY3JpYmUocyk7IH0pO1xyXG4gICAgfTtcclxuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmdyb3VwQnkgPSBmdW5jdGlvbiAocHJvcCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRvVmFsdWUoKS5tYXAoZnVuY3Rpb24gKGl0ZW1zKSB7XHJcbiAgICAgICAgICAgIHZhciBydiA9IHt9O1xyXG4gICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGlzdCA9IHJ2W2l0ZW1bcHJvcF1dIHx8IChydltpdGVtW3Byb3BdXSA9IFtdKTtcclxuICAgICAgICAgICAgICAgIGxpc3QucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBydjtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5maXJzdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50b1ZhbHVlKCkubWFwKGZ1bmN0aW9uIChhcnIpIHsgcmV0dXJuIGFyclswXTsgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIENvbGxlY3Rpb247XHJcbn0oT2JzZXJ2YWJsZSkpO1xyXG5leHBvcnQgeyBDb2xsZWN0aW9uIH07XHJcbkNvbGxlY3Rpb24ucHJvdG90eXBlLl9tYXAgPSBpbml0TWFwTWV0aG9kKENvbGxlY3Rpb24pO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb2xsZWN0aW9uLmpzLm1hcCIsImltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XHJcbmltcG9ydCB7IFZhbHVlIH0gZnJvbSBcIi4vdmFsdWVcIjtcclxudmFyIEVtaXR0ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhFbWl0dGVyLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gRW1pdHRlcihpbml0aWFsVmFsdWUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcclxuICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IHtcclxuICAgICAgICAgICAgICAgIHVuc3Vic2NyaWJlOiBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5zdWJzY3JpYmVycyA9IF90aGlzLnN1YnNjcmliZXJzLmZpbHRlcihmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IF9hWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzICE9PSBvYnNlcnZlcjtcclxuICAgICAgICAgICAgICAgIH0pOyB9LFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBfdGhpcy5zdWJzY3JpYmVycy5wdXNoKFtvYnNlcnZlciwgc3Vic2NyaXB0aW9uXSk7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5lcnJvcilcclxuICAgICAgICAgICAgICAgIG9ic2VydmVyKG51bGwsIF90aGlzLmVycm9yLCBzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlcihfdGhpcy52YWx1ZSwgdW5kZWZpbmVkLCBzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xyXG4gICAgICAgIH0pIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuc3Vic2NyaWJlcnMgPSBbXTtcclxuICAgICAgICBfdGhpcy52YWx1ZSA9IGluaXRpYWxWYWx1ZTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBFbWl0dGVyLnByb3RvdHlwZS5kaXNwYXRjaCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICB0aGlzLmVycm9yID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuX2Rpc3BhdGNoKCk7XHJcbiAgICB9O1xyXG4gICAgRW1pdHRlci5wcm90b3R5cGUuZGlzcGF0Y2hFcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcclxuICAgICAgICB0aGlzLl9kaXNwYXRjaCgpO1xyXG4gICAgfTtcclxuICAgIEVtaXR0ZXIucHJvdG90eXBlLl9kaXNwYXRjaCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuc3Vic2NyaWJlcnMuZm9yRWFjaChmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgdmFyIG9ic2VydmVyID0gX2FbMF0sIHN1YnNjcmlwdGlvbiA9IF9hWzFdO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIoX3RoaXMudmFsdWUsIF90aGlzLmVycm9yLCBzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIG9ic2VydmVyKG51bGwsIGVyciwgc3Vic2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBFbWl0dGVyO1xyXG59KFZhbHVlKSk7XHJcbmV4cG9ydCB7IEVtaXR0ZXIgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZW1pdHRlci5qcy5tYXAiLCJ2YXIgc3RhY2sgPSBbXTtcclxudmFyIGN1cnJlbnRGaWJlciA9IG51bGw7XHJcbnZhciBwcm92aWRlcnMgPSBbZnVuY3Rpb24gKCkgeyByZXR1cm4gY3VycmVudEZpYmVyOyB9XTtcclxuZnVuY3Rpb24gcHVzaEZpYmVyKGZpYmVyKSB7XHJcbiAgICBzdGFjay5wdXNoKGN1cnJlbnRGaWJlcik7XHJcbiAgICBjdXJyZW50RmliZXIgPSBmaWJlcjtcclxufVxyXG5mdW5jdGlvbiBwb3BGaWJlcigpIHtcclxuICAgIGN1cnJlbnRGaWJlciA9IHN0YWNrLnBvcCgpO1xyXG59XHJcbmV4cG9ydCB2YXIgRmliZXJDb250ZXh0ID0ge1xyXG4gICAgZ2V0IGN1cnJlbnQoKSB7IHJldHVybiBjdXJyZW50RmliZXI7IH0sXHJcbiAgICAvKnJ1bjogZnVuY3Rpb24gcmVydW48Uj4oZmliZXI6IEZpYmVyLCBmbjogKCk9PlIpOiBSIHwgUHJvbWlzZTxSPiB7XHJcbiAgICAgIHB1c2hGaWJlcihmaWJlcik7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmbigpKTtcclxuICAgICAgfSBjYXRjaCAocCkge1xyXG4gICAgICAgIGlmIChwICYmIHR5cGVvZiBwLnRoZW4gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgIHJldHVybiBwLnRoZW4oKCk9PnJlcnVuKGZpYmVyLCBmbikpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgIHBvcEZpYmVyKCk7XHJcbiAgICAgIH1cclxuICAgIH0sKi9cclxuICAgIGFkZFByb3ZpZGVyOiBmdW5jdGlvbiAoZ2V0Q3VycmVudEZpYmVyKSB7XHJcbiAgICAgICAgcHJvdmlkZXJzLnB1c2goZ2V0Q3VycmVudEZpYmVyKTtcclxuICAgICAgICBzZXRDdXJyZW50R2V0dGVyRnJvbVByb3ZpZGVycygpO1xyXG4gICAgfSxcclxuICAgIHJlbW92ZVByb3ZpZGVyOiBmdW5jdGlvbiAoZ2V0Q3VycmVudEZpYmVyKSB7XHJcbiAgICAgICAgcHJvdmlkZXJzID0gcHJvdmlkZXJzLmZpbHRlcihmdW5jdGlvbiAocCkgeyByZXR1cm4gcCAhPT0gZ2V0Q3VycmVudEZpYmVyOyB9KTtcclxuICAgICAgICBzZXRDdXJyZW50R2V0dGVyRnJvbVByb3ZpZGVycygpO1xyXG4gICAgfVxyXG59O1xyXG5mdW5jdGlvbiBzZXRDdXJyZW50R2V0dGVyRnJvbVByb3ZpZGVycygpIHtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGaWJlckNvbnRleHQsIFwiY3VycmVudFwiLCB7XHJcbiAgICAgICAgZ2V0OiBwcm92aWRlcnMucmVkdWNlKGZ1bmN0aW9uIChwLCBjKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiBwKCkgfHwgYygpOyB9OyB9KSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICgpIHsgdGhyb3cgbmV3IEVycm9yKFwiVXNlIEZpYmVyQ29udGV4dC5wdXNoKCkgdG8gY2hhbmdlIGN1cnJlbnQgZmliZXJcIik7IH1cclxuICAgIH0pO1xyXG59XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZpYmVyLWNvbnRleHQuanMubWFwIiwiZXhwb3J0ICogZnJvbSAnLi9vYnNlcnZhYmxlJztcclxuZXhwb3J0ICogZnJvbSAnLi92YWx1ZSc7XHJcbmV4cG9ydCAqIGZyb20gJy4vY29sbGVjdGlvbic7XHJcbmV4cG9ydCAqIGZyb20gJy4vZW1pdHRlcic7XHJcbmV4cG9ydCAqIGZyb20gJy4vZmliZXItY29udGV4dCc7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBpbml0TWFwTWV0aG9kKGN0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAobWFwcGVyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IGN0b3IoZnVuY3Rpb24gKG9ic2VydmVyKSB7IHJldHVybiBfdGhpcy5zdWJzY3JpYmUoZnVuY3Rpb24gKHZhbHVlLCBlcnJvciwgc3Vic2NyaXB0aW9uKSB7XHJcbiAgICAgICAgICAgIGlmIChlcnJvcilcclxuICAgICAgICAgICAgICAgIG9ic2VydmVyKG51bGwsIGVycm9yLCBzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVyKG1hcHBlcih2YWx1ZSksIGVycm9yLCBzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVyKG51bGwsIGVyciwgc3Vic2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICB9KTsgfSk7XHJcbiAgICB9O1xyXG59XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hcC5qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gbWl4aW4odGFyZ2V0UHJvdG8sIG1peGluUHJvdG8pIHtcclxuICAgIHZhciBwcm9wcyA9IFtdO1xyXG4gICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICBwcm9wc1tfaSAtIDJdID0gYXJndW1lbnRzW19pXTtcclxuICAgIH1cclxuICAgIHByb3BzLmZvckVhY2goZnVuY3Rpb24gKHByb3ApIHsgcmV0dXJuIHRhcmdldFByb3RvW3Byb3BdID0gbWl4aW5Qcm90b1twcm9wXTsgfSk7XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWl4aW4uanMubWFwIiwidmFyIE9ic2VydmFibGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICAvL3N0YXRpYyBnZXQgW1N5bWJvbC5zcGVjaWVzXSgpIHsgcmV0dXJuIHRoaXM7IH1cclxuICAgIGZ1bmN0aW9uIE9ic2VydmFibGUoX3N1YnNjcmliZSkge1xyXG4gICAgICAgIHRoaXMuX3N1YnNjcmliZSA9IF9zdWJzY3JpYmU7XHJcbiAgICB9XHJcbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3Vic2NyaWJlKGZ1bmN0aW9uIChpdGVtcywgZXJyb3IsIHN1YnNjcmlwdGlvbikge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlcihpdGVtcywgZXJyb3IsIHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIobnVsbCwgZXJyLCBzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyKG51bGwsIGVycm9yLCB7IHVuc3Vic2NyaWJlOiBmdW5jdGlvbiAoKSB7IH0gfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBPYnNlcnZhYmxlO1xyXG59KCkpO1xyXG5leHBvcnQgeyBPYnNlcnZhYmxlIH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9ic2VydmFibGUuanMubWFwIiwiaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gXCIuL29ic2VydmFibGVcIjtcclxuaW1wb3J0IHsgaW5pdE1hcE1ldGhvZCB9IGZyb20gXCIuL21hcFwiO1xyXG5pbXBvcnQgeyBDb2xsZWN0aW9uIH0gZnJvbSBcIi4vY29sbGVjdGlvblwiO1xyXG5pbXBvcnQgeyBGaWJlckNvbnRleHQgfSBmcm9tICcuL2ZpYmVyLWNvbnRleHQnO1xyXG52YXIgVmFsdWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhWYWx1ZSwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFZhbHVlKHN1YnNjcmliZSkge1xyXG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBzdWJzY3JpYmUpIHx8IHRoaXM7XHJcbiAgICB9XHJcbiAgICBWYWx1ZS5mcm9tID0gZnVuY3Rpb24gKHgpIHtcclxuICAgICAgICBpZiAoeC5zdWJzY3JpYmUpXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVmFsdWUoZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHguc3Vic2NyaWJlKHMpOyB9KTtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJWYWx1ZS5mcm9tKCkgY2FuIG9ubHkgdGFrZSBvYnNlcnZhYmxlc1wiKTtcclxuICAgIH07XHJcbiAgICBWYWx1ZS5wcm90b3R5cGUucmVhZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmVzb2x2ZWQgPSBmYWxzZSwgcmVzdWx0LCBlcnIsIG5vdGlmeTtcclxuICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gdGhpcy5zdWJzY3JpYmUoZnVuY3Rpb24gKHZhbHVlLCBlcnJvciwgc3Vic2NpcHRpb24pIHtcclxuICAgICAgICAgICAgcmVzb2x2ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICByZXN1bHQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgZXJyID0gZXJyb3I7XHJcbiAgICAgICAgICAgIGlmIChlcnJvciAmJiBub3RpZnkpXHJcbiAgICAgICAgICAgICAgICBub3RpZnkobnVsbCwgZXJyb3IsIHN1YnNjaXB0aW9uKTtcclxuICAgICAgICAgICAgZWxzZSBpZiAobm90aWZ5KVxyXG4gICAgICAgICAgICAgICAgbm90aWZ5KHZhbHVlLCBudWxsLCBzdWJzY2lwdGlvbik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHJlc29sdmVkKSB7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50RmliZXIgPSBGaWJlckNvbnRleHQuY3VycmVudDtcclxuICAgICAgICAgICAgaWYgKCFjdXJyZW50RmliZXIpIHtcclxuICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBGaWJlciBDb250ZXh0XCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBzdWJzY3JpcHRpb25zID0gY3VycmVudEZpYmVyLnN1YnNjcmlwdGlvbnMsIG9ic2VydmVyID0gY3VycmVudEZpYmVyLm9ic2VydmVyO1xyXG4gICAgICAgICAgICBzdWJzY3JpcHRpb25zLnB1c2goc3Vic2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgbm90aWZ5ID0gb2JzZXJ2ZXI7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgbm90aWZ5ID0gZnVuY3Rpb24gKHZhbHVlLCBlcnJvciwgc3Vic2NyaXB0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgICAgIGlmIChlcnJvcilcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUodmFsdWUpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFZhbHVlLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgX3RoaXMuc3Vic2NyaWJlKGZ1bmN0aW9uICh2YWx1ZSwgZXJyb3IsIHN1YnNjaXB0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIHN1YnNjaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFZhbHVlLnByb3RvdHlwZS5maWx0ZXIgPSBmdW5jdGlvbiAoZm4pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBuZXcgVmFsdWUoZnVuY3Rpb24gKG9ic2VydmVyKSB7IHJldHVybiBfdGhpcy5zdWJzY3JpYmUoZnVuY3Rpb24gKHZhbHVlLCBlcnJvciwgc3Vic2NyaXB0aW9uKSB7XHJcbiAgICAgICAgICAgIGlmIChlcnJvcilcclxuICAgICAgICAgICAgICAgIG9ic2VydmVyKG51bGwsIGVycm9yLCBzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICBlbHNlIGlmIChmbih2YWx1ZSkpXHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlcih2YWx1ZSwgZXJyb3IsIHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgfSk7IH0pO1xyXG4gICAgfTtcclxuICAgIFZhbHVlLnByb3RvdHlwZS5sb2cgPSBmdW5jdGlvbiAocHJlZml4KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uICh4KSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHByZWZpeCwgeCk7XHJcbiAgICAgICAgICAgIHJldHVybiB4O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFZhbHVlLnByb3RvdHlwZS50b0NvbGxlY3Rpb24gPSBmdW5jdGlvbiAobWFwcGVyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IENvbGxlY3Rpb24oZnVuY3Rpb24gKHMpIHsgcmV0dXJuIF90aGlzLm1hcChtYXBwZXIpLnN1YnNjcmliZShzKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgVmFsdWUucHJvdG90eXBlLmNvbWJpbmVMYXRlc3QgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBuZXcgVmFsdWUoZnVuY3Rpb24gKG9ic2VydmVyKSB7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZXMgPSBbbnVsbCwgbnVsbF07XHJcbiAgICAgICAgICAgIHZhciBteVN1YnNjcmlwdGlvbiwgb3RoZXJTdWJzY3JpcHRpb247XHJcbiAgICAgICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSB7XHJcbiAgICAgICAgICAgICAgICB1bnN1YnNjcmliZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG15U3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgb3RoZXJTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgbXlTdWJzY3JpcHRpb24gPSBfdGhpcy5zdWJzY3JpYmUoZnVuY3Rpb24gKGl0ZW1zLCBlcnJvciwgcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcy51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVyKG51bGwsIGVycm9yLCBzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFsdWVzWzBdID0gaXRlbXM7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWVzWzFdICE9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVyKHZhbHVlcywgbnVsbCwgc3Vic2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG90aGVyU3Vic2NyaXB0aW9uID0gb3RoZXIuc3Vic2NyaWJlKGZ1bmN0aW9uICh2YWx1ZSwgZXJyb3IsIHMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHMudW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlcihudWxsLCBlcnJvciwgc3Vic2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhbHVlc1sxXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlc1swXSAhPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlcih2YWx1ZXMsIG51bGwsIHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFZhbHVlLnByb3RvdHlwZS5zd2l0Y2hNYXAgPSBmdW5jdGlvbiAobWFwcGVyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IFZhbHVlKGZ1bmN0aW9uIChvYnNlcnZlcikge1xyXG4gICAgICAgICAgICB2YXIgbWFwcGVkU3Vic2NyaXB0aW9uID0gbnVsbDtcclxuICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IG51bGw7XHJcbiAgICAgICAgICAgIHZhciByZXR1cm5lZFN1YnNjcmlwdGlvbiA9IHtcclxuICAgICAgICAgICAgICAgIHVuc3Vic2NyaWJlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hcHBlZFN1YnNjcmlwdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXBwZWRTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwcGVkU3Vic2NyaXB0aW9uID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbiA9IF90aGlzLnN1YnNjcmliZShmdW5jdGlvbiAoaXRlbSwgZXJyb3IsIHMpIHtcclxuICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbiA9IHM7XHJcbiAgICAgICAgICAgICAgICBpZiAobWFwcGVkU3Vic2NyaXB0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFwcGVkU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFwcGVkU3Vic2NyaXB0aW9uID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChlcnJvcilcclxuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlcihudWxsLCBlcnJvciwgcmV0dXJuZWRTdWJzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9ic2VydmFibGVPclZhbHVlID0gbWFwcGVyKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JzZXJ2YWJsZU9yVmFsdWUgJiYgdHlwZW9mIG9ic2VydmFibGVPclZhbHVlLnN1YnNjcmliZSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwcGVkU3Vic2NyaXB0aW9uID0gb2JzZXJ2YWJsZU9yVmFsdWUuc3Vic2NyaWJlKGZ1bmN0aW9uICh2YWx1ZSwgZXJyb3IsIHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXBwZWRTdWJzY3JpcHRpb24gPSBzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyKHZhbHVlLCBlcnJvciwgcmV0dXJuZWRTdWJzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlcihvYnNlcnZhYmxlT3JWYWx1ZSwgbnVsbCwgc3Vic2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIobnVsbCwgZXJyb3IsIHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHJldHVybmVkU3Vic2NyaXB0aW9uO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBWYWx1ZTtcclxufShPYnNlcnZhYmxlKSk7XHJcbmV4cG9ydCB7IFZhbHVlIH07XHJcblZhbHVlLnByb3RvdHlwZS5tYXAgPSBpbml0TWFwTWV0aG9kKFZhbHVlKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dmFsdWUuanMubWFwIiwiZXhwb3J0ICogZnJvbSAnLi9qcy9kaXN0L2pzL29ic2VydmFibGUnO1xyXG4iLCJleHBvcnQgKiBmcm9tICcuL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtcmVwbyc7XHJcbiIsInZhciBtYXAgPSB7XG5cdFwiLi9lbi1TR1wiOiBcIi4vbm9kZV9tb2R1bGVzL21vbWVudC9sb2NhbGUvZW4tU0cuanNcIixcblx0XCIuL2VuLVNHLmpzXCI6IFwiLi9ub2RlX21vZHVsZXMvbW9tZW50L2xvY2FsZS9lbi1TRy5qc1wiLFxuXHRcIi4vZW4tYXVcIjogXCIuL25vZGVfbW9kdWxlcy9tb21lbnQvbG9jYWxlL2VuLWF1LmpzXCIsXG5cdFwiLi9lbi1hdS5qc1wiOiBcIi4vbm9kZV9tb2R1bGVzL21vbWVudC9sb2NhbGUvZW4tYXUuanNcIixcblx0XCIuL2VuLWNhXCI6IFwiLi9ub2RlX21vZHVsZXMvbW9tZW50L2xvY2FsZS9lbi1jYS5qc1wiLFxuXHRcIi4vZW4tY2EuanNcIjogXCIuL25vZGVfbW9kdWxlcy9tb21lbnQvbG9jYWxlL2VuLWNhLmpzXCIsXG5cdFwiLi9lbi1nYlwiOiBcIi4vbm9kZV9tb2R1bGVzL21vbWVudC9sb2NhbGUvZW4tZ2IuanNcIixcblx0XCIuL2VuLWdiLmpzXCI6IFwiLi9ub2RlX21vZHVsZXMvbW9tZW50L2xvY2FsZS9lbi1nYi5qc1wiLFxuXHRcIi4vZW4taWVcIjogXCIuL25vZGVfbW9kdWxlcy9tb21lbnQvbG9jYWxlL2VuLWllLmpzXCIsXG5cdFwiLi9lbi1pZS5qc1wiOiBcIi4vbm9kZV9tb2R1bGVzL21vbWVudC9sb2NhbGUvZW4taWUuanNcIixcblx0XCIuL2VuLWlsXCI6IFwiLi9ub2RlX21vZHVsZXMvbW9tZW50L2xvY2FsZS9lbi1pbC5qc1wiLFxuXHRcIi4vZW4taWwuanNcIjogXCIuL25vZGVfbW9kdWxlcy9tb21lbnQvbG9jYWxlL2VuLWlsLmpzXCIsXG5cdFwiLi9lbi1uelwiOiBcIi4vbm9kZV9tb2R1bGVzL21vbWVudC9sb2NhbGUvZW4tbnouanNcIixcblx0XCIuL2VuLW56LmpzXCI6IFwiLi9ub2RlX21vZHVsZXMvbW9tZW50L2xvY2FsZS9lbi1uei5qc1wiLFxuXHRcIi4vc3ZcIjogXCIuL25vZGVfbW9kdWxlcy9tb21lbnQvbG9jYWxlL3N2LmpzXCIsXG5cdFwiLi9zdi5qc1wiOiBcIi4vbm9kZV9tb2R1bGVzL21vbWVudC9sb2NhbGUvc3YuanNcIlxufTtcblxuXG5mdW5jdGlvbiB3ZWJwYWNrQ29udGV4dChyZXEpIHtcblx0dmFyIGlkID0gd2VicGFja0NvbnRleHRSZXNvbHZlKHJlcSk7XG5cdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKGlkKTtcbn1cbmZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0UmVzb2x2ZShyZXEpIHtcblx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhtYXAsIHJlcSkpIHtcblx0XHR2YXIgZSA9IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIgKyByZXEgKyBcIidcIik7XG5cdFx0ZS5jb2RlID0gJ01PRFVMRV9OT1RfRk9VTkQnO1xuXHRcdHRocm93IGU7XG5cdH1cblx0cmV0dXJuIG1hcFtyZXFdO1xufVxud2VicGFja0NvbnRleHQua2V5cyA9IGZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0S2V5cygpIHtcblx0cmV0dXJuIE9iamVjdC5rZXlzKG1hcCk7XG59O1xud2VicGFja0NvbnRleHQucmVzb2x2ZSA9IHdlYnBhY2tDb250ZXh0UmVzb2x2ZTtcbm1vZHVsZS5leHBvcnRzID0gd2VicGFja0NvbnRleHQ7XG53ZWJwYWNrQ29udGV4dC5pZCA9IFwiLi9ub2RlX21vZHVsZXMvbW9tZW50L2xvY2FsZSBzeW5jIHJlY3Vyc2l2ZSBzdnxlblwiOyIsImltcG9ydCB7IFVzZXIgfSBmcm9tIFwiLi4vY29udHJhY3RzL2tlZC1tb2RlbHNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldFVzZXJDbGFpbXMgKHVzZXI6IFVzZXIpIHtcclxuICByZXR1cm4gW3tcclxuICAgIHR5cGU6IFwiZW1haWxcIixcclxuICAgIHZhbHVlOiB1c2VyLm1haWxcclxuICB9LHtcclxuICAgIHR5cGU6IFwic2Nob29sXCIsXHJcbiAgICB2YWx1ZTogdXNlci5zY2hvb2xcclxuICB9XS5jb25jYXQodXNlci5yb2xlcy5tYXAocm9sZSA9PiAoe1xyXG4gICAgdHlwZTogXCJyb2xlXCIsXHJcbiAgICB2YWx1ZTogcm9sZVxyXG4gIH0pKSkuY29uY2F0KHVzZXIucm9sZXMubWFwKHJvbGUgPT4gKHtcclxuICAgIHR5cGU6IFwic2Nob29sUm9sZVwiLFxyXG4gICAgdmFsdWU6IHVzZXIuc2Nob29sICsgXCIvXCIgKyByb2xlXHJcbiAgfSkpKTtcclxufVxyXG4iLCJpbXBvcnQgeyBBY2Nlc3NDbGFpbSwgRG9jdW1lbnRBY2Nlc3MsIGhhc0FjY2VzcyBhcyBfaGFzQWNjZXNzLCBBY2Nlc3NSaWdodCB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcclxuaW1wb3J0IHsgRG9jdW1lbnQgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCBnZXRVc2VyQ2xhaW1zIGZyb20gJy4vZ2V0LXVzZXItY2xhaW1zJztcclxuaW1wb3J0IHsgcGFyc2VRdWVyeVN0cmluZywgZ2VuZXJhdGVRdWVyeVN0cmluZyB9IGZyb20gXCIuLi91dGlscy9xdWVyeS1zdHJpbmdcIjtcclxuaW1wb3J0IHsgVXNlciB9IGZyb20gJy4uL2NvbnRyYWN0cy9rZWQtbW9kZWxzJztcclxuZXhwb3J0IHsgZ2V0VXNlckNsYWltcyB9O1xyXG5cclxuZXhwb3J0IGNvbnN0IElNUEVSU09OQVRJT05fUVVFUllfUEFSQU1TID0gW1xyXG4gIFwidXNlclwiLFxyXG4gIFwicm9sZVwiLFxyXG4gIFwic2Nob29sXCIsXHJcbiAgXCJkZWJ1Z1wiLFxyXG4gIFwidGVzdFZlcnNpb25cIixcclxuICBcInRlc3R2ZXJzaW9uXCIsXHJcbiAgXCJmZWF0dXJlc1wiLFxyXG4gIFwic2Nob29sVHlwZVwiLFxyXG4gIFwic2Nob29sdHlwZVwiXTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBoYXNBY2Nlc3ModXNlcjogVXNlciwgZG9jOiBEb2N1bWVudCwgcmVxdWVzdGVkUmlnaHQ6IEFjY2Vzc1JpZ2h0KSB7XHJcbiAgdmFyIGNsYWltcyA9IGdldFVzZXJDbGFpbXModXNlcik7XHJcbiAgaWYgKHJlcXVlc3RlZFJpZ2h0ICE9PSAnUicgJiYgdXNlci50dXRvckZvcikge1xyXG4gICAgY2xhaW1zID0gY2xhaW1zLmZpbHRlcihjbGFpbSA9PiBjbGFpbS50eXBlICE9PSAnZW1haWwnKTtcclxuICB9XHJcbiAgdmFyIHJlc3VsdCA9IF9oYXNBY2Nlc3MoRG9jdW1lbnRBY2Nlc3MuZnJvbVN0cmluZ0FycmF5KGRvYy5hY2wgfHwgW10pLCBjbGFpbXMsIHJlcXVlc3RlZFJpZ2h0KTtcclxuICAvL2NvbnNvbGUubG9nKGBIYXMgJHtyZXF1ZXN0ZWRSaWdodH0gYWNjZXNzIHRvICR7ZG9jLm5hbWV9LyR7ZG9jLmlkfTogJHtyZXN1bHR9YCk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGhhc1JlYWRBY2Nlc3ModXNlcjogVXNlciwgZG9jOiBEb2N1bWVudCkge1xyXG4gIHJldHVybiBoYXNBY2Nlc3ModXNlciwgZG9jLCAnUicpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaGFzV3JpdGVBY2Nlc3ModXNlcjogVXNlciwgZG9jOiBEb2N1bWVudCkge1xyXG4gIHJldHVybiBoYXNBY2Nlc3ModXNlciwgZG9jLCAnVycpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaGFzU2hhcmVBY2Nlc3ModXNlcjogVXNlciwgZG9jOiBEb2N1bWVudCkge1xyXG4gIHJldHVybiBoYXNBY2Nlc3ModXNlciwgZG9jLCAnUycpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNUZWFjaGVyQXRTY2hvb2wodXNlcjogVXNlciwgc2Nob29sOiBzdHJpbmcpIHtcclxuICBjb25zdCBpc1RlYWNoZXIgPSB1c2VyLnJvbGVzLnNvbWUocm9sZSA9PiByb2xlID09PSAnRU1QTE9ZRUUnIHx8IHJvbGUgPT09ICdBRE1JTicpO1xyXG4gIGNvbnN0IGJlbG9uZ3NUb1NjaG9vbCA9IChzY2hvb2x8fFwiXCIpLnRvTG93ZXJDYXNlKCkgPT09IHVzZXIuc2Nob29sLnRvTG93ZXJDYXNlKCk7XHJcbiAgcmV0dXJuIChpc1RlYWNoZXIgJiYgYmVsb25nc1RvU2Nob29sKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzQWRtaW5PclRlYWNoZXJBdFNjaG9vbCh1c2VyOiBVc2VyLCBzY2hvb2w6IHN0cmluZykge1xyXG4gIHJldHVybiB1c2VyLnJvbGVzLmluY2x1ZGVzKFwiQURNSU5cIikgfHwgaXNUZWFjaGVyQXRTY2hvb2wodXNlciwgc2Nob29sKTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGltcGVyc29uYXRpb25FbnYgPSB7XHJcbiAgYWN0QXMgKG9wdGlvbnM6IHtyb2xlLCBzY2hvb2wsIHVybD99KSB7XHJcbiAgICBjb25zdCB7cm9sZSwgc2Nob29sLCB1cmx9ID0gb3B0aW9ucztcclxuICAgIGNvbnN0IGN1cnJlbnRRdWVyeSA9IHBhcnNlUXVlcnlTdHJpbmcobG9jYXRpb24uc2VhcmNoKTtcclxuICAgIGNvbnN0IG5ld1F1ZXJ5ID0gey4uLmN1cnJlbnRRdWVyeSwgcm9sZSwgc2Nob29sfTtcclxuICAgIGNvbnN0IG5ld1F1ZXJ5U3RyaW5nID0gZ2VuZXJhdGVRdWVyeVN0cmluZyhuZXdRdWVyeSk7XHJcbiAgICBpZiAodXJsKSB7XHJcbiAgICAgIGxvY2F0aW9uLmhyZWYgPSBgJHt1cmx9JHtuZXdRdWVyeVN0cmluZ31gO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbG9jYXRpb24uaGFzaCA9IFwiI1wiO1xyXG4gICAgICBsb2NhdGlvbi5zZWFyY2ggPSBuZXdRdWVyeVN0cmluZztcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhY3RBcyhvcHRpb25zOiB7cm9sZSwgc2Nob29sLCB1cmw/fSkge1xyXG4gIGltcGVyc29uYXRpb25FbnYuYWN0QXMob3B0aW9ucyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwcmVzZXJ2ZUltcGVyc29uYXRpb25RdWVyeSAodXJsOiBzdHJpbmcsIHF1ZXJ5OiB7W25hbWU6IHN0cmluZ10gOiBzdHJpbmd9KSB7XHJcbiAgY29uc3QgY3VycmVudFF1ZXJ5ID0gcGFyc2VRdWVyeVN0cmluZyhsb2NhdGlvbi5zZWFyY2gpO1xyXG4gIGNvbnN0IHByZXNlcnZlZFF1ZXJ5ID0ge307XHJcbiAgZm9yIChjb25zdCBwYXJhbSBvZiBJTVBFUlNPTkFUSU9OX1FVRVJZX1BBUkFNUykge1xyXG4gICAgaWYgKGN1cnJlbnRRdWVyeVtwYXJhbV0pIHByZXNlcnZlZFF1ZXJ5W3BhcmFtXSA9IGN1cnJlbnRRdWVyeVtwYXJhbV07XHJcbiAgfVxyXG4gIGNvbnN0IG5ld1F1ZXJ5U3RyaW5nID0gZ2VuZXJhdGVRdWVyeVN0cmluZyh7Li4ucHJlc2VydmVkUXVlcnksIC4uLnF1ZXJ5fSk7XHJcbiAgY29uc3QgcEhhc2ggPSB1cmwuaW5kZXhPZignIycpO1xyXG4gIHJldHVybiBwSGFzaCA+PSAwID9cclxuICAgIGAke3VybC5zdWJzdHIoMCxwSGFzaCl9JHtuZXdRdWVyeVN0cmluZ30ke3VybC5zdWJzdHIocEhhc2gpfWAgOlxyXG4gICAgYCR7dXJsfSR7bmV3UXVlcnlTdHJpbmd9YDtcclxufVxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XHJcblxyXG5jb25zdCBJY29uRHJpdmUgPSAoeyBzaXplID0gMzAgfSkgPT4gKFxyXG4gIDxzdmdcclxuICAgIHdpZHRoPXtzaXplfVxyXG4gICAgdmVyc2lvbj1cIjEuMVwiXHJcbiAgICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcclxuICAgIHhtbG5zWGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCJcclxuICAgIHZpZXdCb3g9XCIwIDAgNTA4LjUyIDUwOC41MlwiXHJcbiAgICBmaWxsPVwiI2ZmZmZmZlwiXHJcbiAgICBzdHlsZT17e3ZlcnRpY2FsQWxpZ246IFwibWlkZGxlXCIsIG1hcmdpblJpZ2h0OiBcIjRweFwifX1cclxuICA+XHJcbiAgICA8cG9seWdvbiBwb2ludHM9XCI0ODQuNDkyLDI4NC41OCAzMzkuMDI0LDMyLjU3NyAxNjkuNDk2LDMyLjU3NyAzMTQuOTk2LDI4NC41OFwiIC8+XHJcbiAgICA8cG9seWdvbiBwb2ludHM9XCIxNDUuNDM3LDc0LjI3NiAwLDMyNi4yNzkgODQuNzY0LDQ3My4wNSAyMzAuMTY5LDIyMS4xNDNcIiAvPlxyXG4gICAgPHBvbHlnb24gcG9pbnRzPVwiMjM0LjM5NiwzMTYuMzYzIDE0My4zNzEsNDc1Ljk0MyA0MjMuNzU2LDQ3NS45NDMgNTA4LjUyLDMxNi4zNlwiIC8+XHJcbiAgPC9zdmc+XHJcbik7XHJcblxyXG5jb25zdCBJY29uQ2xhc3Nyb29tID0gKHsgc2l6ZSA9IDMwIH0pID0+IChcclxuICA8c3ZnXHJcbiAgICB3aWR0aD17c2l6ZX1cclxuICAgIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxyXG4gICAgeG1sbnNYbGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIlxyXG4gICAgdmlld0JveD1cIjAgMCAyNCAyNFwiXHJcbiAgICB2ZXJzaW9uPVwiMS4xXCJcclxuICA+XHJcbiAgICA8cGF0aCBkPVwiTTUgMkMzLjM0OCAyIDIgMy4zNDggMiA1djE0YzAgMS42NTIgMS4zNDggMyAzIDNoMTRjMS42NTIgMCAzLTEuMzQ4IDMtM1Y1YzAtMS42NTItMS4zNDgtMy0zLTN6bTAgMmgxNGMuNTUgMCAxIC40NSAxIDF2MTRjMCAuNTUtLjQ1IDEtMSAxaC0xdi0yaC01djJINWMtLjU1IDAtMS0uNDUtMS0xVjVjMC0uNTUuNDUtMSAxLTF6bTcgMmExLjk5OSAxLjk5OSAwIDEgMCAwIDQgMS45OTkgMS45OTkgMCAxIDAgMC00ek03LjUgOGExLjUgMS41IDAgMSAwIDAgMyAxLjUgMS41IDAgMCAwIDAtM3ptOSAwYTEuNSAxLjUgMCAxIDAgMCAzIDEuNSAxLjUgMCAwIDAgMC0zek0xMiAxMWMtMi42NiAwLTMuNSAyLjUtMy41IDIuNSAwLS44NDguNS0xLjUuNS0xLjUtLjMtLjE4OC0xLjA3LS4zMTMtMS40MzgtLjMxMy0xLjIxNCAwLTIuNTYyIDEuMTkyLTIuNTYyIDJWMTZoMTR2LTIuMzEzYzAtLjgwOC0xLjUxMi0yLTIuNTYzLTItLjM2NyAwLTEuMTM2LjEyNi0xLjQzNy4zMTMgMCAwIC41LjY1Mi41IDEuNSAwIDAtLjg0LTIuNS0zLjUtMi41elwiIC8+XHJcbiAgPC9zdmc+XHJcbik7XHJcblxyXG5leHBvcnQgY29uc3QgRHJpdmVCdXR0b24gPSAoe2xhYmVsPSdHb29nbGUgRHJpdmUnLCBhY3Rpb259KSA9PiBcclxuICA8YSBjbGFzc05hbWU9XCJidG5cIiBvbkNsaWNrPXthY3Rpb259PjxJY29uRHJpdmUgc2l6ZT17MTZ9IC8+IHtsYWJlbH08L2E+XHJcbiIsImltcG9ydCB7IEVEU0NvdXJzZSwgRURTQXNzZXNzbWVudCwgRURTU3R1ZHlQbGFuLCBFRFNTdHVkZW50RnV0dXJlQWJpbGl0eSwgRURTU3R1ZGVudCwgRURTVHVpdGlvbkdyb3VwLCBFRFNUdWl0aW9uU3R1ZGVudCwgRURTVGVhY2hlciwgTW9ja0VEU0FjYWRlbWljWWVhciwgTW9ja0VEU0RhdGVSYW5nZSB9IGZyb20gJy4uL2NvbnRyYWN0cy9lZHMnO1xyXG5pbXBvcnQgeyBSZXN0Q2xpZW50IH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnQnO1xyXG5pbXBvcnQgeyBJc29tb3JwaGljRW52LCBCZWFyZXJQcm92aWRlciwgSHR0cEVycm9yIH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnQnO1xyXG5pbXBvcnQgeyBTY2hvb2xNb21lbnQgfSBmcm9tICcuLi91dGlscy9zY2hvb2wtbW9tZW50JztcclxuaW1wb3J0IHsgU2Nob29sVGVybSB9IGZyb20gJy4uL3V0aWxzL3NjaG9vbC10ZXJtJztcclxuaW1wb3J0IHsgZGF0ZVRpbWVSZXZpdmVyLCBMIH0gZnJvbSAnLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgbW9ja0pzb25GaWxlIGZyb20gJy4vbW9jay9tb2NrLWVkcy1kYXRhLmpzb24nO1xyXG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcbmltcG9ydCB7IFN1c3BlbnNlQmFzZWRBUEksIG1ha2VTdXNwZW5zZUFwaSB9IGZyb20gJy4uL3V0aWxzL21ha2Utc3VzcGVuc2UtYXBpJztcclxuXHJcbmV4cG9ydCBjbGFzcyBFZHNDbGllbnQge1xyXG4gIGh0dHA6IFJlc3RDbGllbnQ7XHJcbiAgdXNlckVtYWlsR2V0dGVyOiAoKT0+c3RyaW5nO1xyXG4gIHN1c3BlbnNlOiBTdXNwZW5zZUJhc2VkQVBJPEVkc0NsaWVudD47XHJcblxyXG4gIGNvbnN0cnVjdG9yIChcclxuICAgIGlzb21vcnBoaWM6IElzb21vcnBoaWNFbnYsXHJcbiAgICBiYXNlVXJsOiBzdHJpbmcsXHJcbiAgICBiZWFyZXJQcm92aWRlcjogQmVhcmVyUHJvdmlkZXIsXHJcbiAgICB1c2VyRW1haWxHZXR0ZXI6ICgpPT5zdHJpbmdcclxuICApIHtcclxuICAgIHRoaXMuaHR0cCA9IG5ldyBSZXN0Q2xpZW50IChpc29tb3JwaGljLCBiYXNlVXJsLCB7YmVhcmVyUHJvdmlkZXJ9KTtcclxuICAgIHRoaXMudXNlckVtYWlsR2V0dGVyID0gdXNlckVtYWlsR2V0dGVyO1xyXG4gICAgY29uc3QgaXNBcGlNZXRob2QgPSBtID0+XHJcbiAgICAgIHR5cGVvZiB0aGlzW21dID09PSAnZnVuY3Rpb24nICYmXHJcbiAgICAgIG0gIT09ICdjb25zdHJ1Y3RvcicgJiYgLy8gU2luY2UgbWFrZVN1c3BlbnNlQXBpKCkgd2Fsa3MgcHJvdG90eXBlIGNoYWluXHJcbiAgICAgIG0gIT09ICdwcml2YXRpemluZ0NhY2hlQnVzdCcgJiZcclxuICAgICAgbSAhPT0gJ3VzZXJFbWFpbEdldHRlcicgLy8gTGlzdCBub24tQVBJIG1ldGhvZHMgaGVyZS4uLlxyXG4gICAgICA7XHJcblxyXG4gICAgT2JqZWN0LmtleXMoRWRzQ2xpZW50LnByb3RvdHlwZSkuZm9yRWFjaChtZXRob2QgPT4ge1xyXG4gICAgICBpZiAoaXNBcGlNZXRob2QobWV0aG9kKSkge1xyXG4gICAgICAgIHRoaXNbbWV0aG9kXSA9IGF2b2lkU2ltdWx0YW5vdXNDYWxscyh0aGlzW21ldGhvZF0pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHRoaXMuc3VzcGVuc2UgPSBtYWtlU3VzcGVuc2VBcGkodGhpcywge2lzQXBpTWV0aG9kfSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHByaXZhdGl6aW5nQ2FjaGVCdXN0KCkge1xyXG4gICAgcmV0dXJuIHt1c2VyOiB0aGlzLnVzZXJFbWFpbEdldHRlcigpfTtcclxuICB9XHJcblxyXG4vKipcclxuICAgKiBSZXRyaWV2ZSBhY3RpdmUgY291cnNlcyBmb3IgY3VycmVudCBsb2dnZWQgaW4gc3R1ZGVudC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSBjb3Vyc2VDb2RlIFNob3J0LW5hbWUgb2YgdGhlIGNvdXJzZS4gT3B0aW9uYWwuXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0QWN0aXZlQ291cnNlcyhxOiB7Y291cnNlQ29kZT86IHN0cmluZywgcGVyaW9kTmFtZTogc3RyaW5nfSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcXVlcnk6YW55ID0gdGhpcy5wcml2YXRpemluZ0NhY2hlQnVzdCgpO1xyXG4gICAgICBpZiAocSkge1xyXG4gICAgICAgIGlmIChxLmNvdXJzZUNvZGUpIHF1ZXJ5LkNvdXJzZUNvZGUgPSBxLmNvdXJzZUNvZGU7XHJcbiAgICAgICAgaWYgKHEucGVyaW9kTmFtZSkgcXVlcnkuUGVyaW9kTmFtZSA9IHEucGVyaW9kTmFtZTtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmh0dHAuZ2V0KFwic3R1ZGVudGFjdGl2ZWNvdXJzZXNcIiwgcXVlcnkpO1xyXG4gICAgICBpZiAocmVzLnN0YXR1cyAhPSAyMDApIHRocm93IG5ldyBIdHRwRXJyb3IocmVzLnN0YXR1cywgYXdhaXQgcmVzLnRleHQoKSk7XHJcbiAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xyXG4gICAgICByZXR1cm4ganNvbi5jb3Vyc2VzIGFzIEVEU0NvdXJzZVtdO1xyXG4gICAgfSBjYXRjaCAoZXgpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZyb20gRURTOiBcIiArIGV4KTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKExgS3VuZGUgdHl2w6RyciBpbnRlIGxhZGRhIHRlcm1pbnNtw6VsIGVsbGVyIGF2a2xhcmFkZSBzdGVnIGZyw6VuIEVEUy4gRsO2cnPDtmsgaWdlbiBzZW5hcmUuLi5gKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHJpZXZlIGxhdGVzdCBhc3Nlc3NtZW50cyBmb3IgY3VycmVudCBsb2dnZWQgaW4gdXNlci5cclxuICAgKiBcclxuICAgKiBAcGFyYW0gbGltaXQgT3B0aW9uYWwgbGltaXRcclxuICAgKi9cclxuICBhc3luYyBnZXRMYXRlc3RBc3Nlc3NtZW50cyhsaW1pdD86IG51bWJlcikge1xyXG4gICAgY29uc3QgcXVlcnk6YW55ID0gdGhpcy5wcml2YXRpemluZ0NhY2hlQnVzdCgpO1xyXG4gICAgaWYgKCFpc05hTihsaW1pdCkpIHF1ZXJ5LkNvdW50ID0gbGltaXQ7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmh0dHAuZ2V0KFwic3R1ZGVudGFzc2Vzc21lbnRzXCIsIHF1ZXJ5KTtcclxuICAgIGlmIChyZXMuc3RhdHVzICE9IDIwMCkgdGhyb3cgbmV3IEh0dHBFcnJvcihyZXMuc3RhdHVzLCBhd2FpdCByZXMudGV4dCgpKTtcclxuICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xyXG4gICAgcmV0dXJuIGpzb24uYXNzZXNzbWVudHMgYXMgRURTQXNzZXNzbWVudFtdOyAgICBcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHJpZXZlIHN0dWR5cGxhbnMgZm9yIGN1cnJlbnQgbG9nZ2VkLWluIHVzZXJcclxuICAgKi9cclxuICBhc3luYyBnZXRTdHVkZW50R29hbHMoKSB7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmh0dHAuZ2V0KFwic3R1ZGVudGdvYWxzXCIsIHRoaXMucHJpdmF0aXppbmdDYWNoZUJ1c3QoKSk7XHJcbiAgICBpZiAocmVzLnN0YXR1cyAhPSAyMDApIHRocm93IG5ldyBIdHRwRXJyb3IocmVzLnN0YXR1cywgYXdhaXQgcmVzLnRleHQoKSk7XHJcbiAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcclxuICAgIHJldHVybiBqc29uLnN0dWRlbnRHb2FscyBhcyBFRFNTdHVkeVBsYW5bXTsgICAgXHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRTdHVkZW50RnV0dXJlQWJpbGl0aWVzKCkge1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5odHRwLmdldChcInN0dWRlbnRGdXR1cmVBYmlsaXRpZXNcIiwgdGhpcy5wcml2YXRpemluZ0NhY2hlQnVzdCgpKTtcclxuICAgIGlmIChyZXMuc3RhdHVzICE9IDIwMCkgdGhyb3cgbmV3IEh0dHBFcnJvcihyZXMuc3RhdHVzLCBhd2FpdCByZXMudGV4dCgpKTtcclxuICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xyXG4gICAgcmV0dXJuIGpzb24uc3R1ZGVudEZ1dHVyZUFiaWxpdGllcyBhcyBFRFNTdHVkZW50RnV0dXJlQWJpbGl0eVtdO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0VGVhY2hlclR1dG9yU3R1ZGVudHMoKSB7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmh0dHAuZ2V0KFwidGVhY2hlcnR1dG9yc3R1ZGVudHNcIiwgdGhpcy5wcml2YXRpemluZ0NhY2hlQnVzdCgpKTtcclxuICAgIGlmIChyZXMuc3RhdHVzICE9IDIwMCkgdGhyb3cgbmV3IEh0dHBFcnJvcihyZXMuc3RhdHVzLCBhd2FpdCByZXMudGV4dCgpKTtcclxuICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xyXG4gICAgcmV0dXJuIGpzb24uc3R1ZGVudHMgYXMgRURTU3R1ZGVudFtdO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogZ2V0U2Nob29sVHVpdGlvbkdyb3VwcygpXHJcbiAgICogXHJcbiAgICogUmV0dXJuIHR1aXRpb25ncm91cHMgZm9yIHNjaG9vbFxyXG4gICAqIFxyXG4gICAqIEBwYXJhbSBzY2hvb2xOYW1lIC0gbmFtZSBvZiBzY2hvb2xcclxuICAgKiBAcGFyYW0gY291cnNlQ29kZSAtIFNrb2x2ZXJrZXRzIGNvZGUgZm9yIGNvdXJzZVxyXG4gICAqL1xyXG4gIGFzeW5jIGdldFNjaG9vbFR1aXRpb25Hcm91cHMocToge3NjaG9vbE5hbWU6IHN0cmluZywgY291cnNlQ29kZTogc3RyaW5nfSkge1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5odHRwLmdldChcIlNjaG9vbFR1aXRpb25Hcm91cHNcIiwgey4uLnRoaXMucHJpdmF0aXppbmdDYWNoZUJ1c3QoKSwgLi4ucX0pO1xyXG4gICAgaWYgKHJlcy5zdGF0dXMgIT0gMjAwKSB0aHJvdyBuZXcgSHR0cEVycm9yKHJlcy5zdGF0dXMsIGF3YWl0IHJlcy50ZXh0KCkpO1xyXG4gICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XHJcbiAgICByZXR1cm4ganNvbi5zY2hvb2xUdWl0aW9uR3JvdXBzIGFzIEVEU1R1aXRpb25Hcm91cFtdO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogZ2V0VHVpdGlvbkdyb3VwU3R1ZGVudHMoKVxyXG4gICAqIFxyXG4gICAqIFJldHVybiBuYW1lIGFuZCBtYWlsYWRyZXNzZXMgZm9yIHR1dGl0aW9uZ3JvdXBzIGluIHNjaG9vbHNcclxuICAgKiBcclxuICAgKiBAcGFyYW0gc2Nob29sTmFtZSAtIG5hbWUgb2Ygc2Nob29sXHJcbiAgICogQHBhcmFtIHR1aXRpb25Hcm91cE5hbWUgLSB0dWl0aW9uIGdydW9wIG5hbWUgaW4gRURTXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0VHVpdGlvbkdyb3VwU3R1ZGVudHMocToge3NjaG9vbE5hbWU6IHN0cmluZywgdHVpdGlvbkdyb3VwTmFtZTogc3RyaW5nfSkge1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5odHRwLmdldChcIlR1aXRpb25Hcm91cFN0dWRlbnRzXCIsIHsuLi50aGlzLnByaXZhdGl6aW5nQ2FjaGVCdXN0KCksIC4uLnF9KTtcclxuICAgIGlmIChyZXMuc3RhdHVzICE9IDIwMCkgdGhyb3cgbmV3IEh0dHBFcnJvcihyZXMuc3RhdHVzLCBhd2FpdCByZXMudGV4dCgpKTtcclxuICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xyXG4gICAgcmV0dXJuIGpzb24udHVpdGlvbkdyb3VwU3R1ZGVudHMgYXMgRURTVHVpdGlvblN0dWRlbnRbXTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIGdldFNjaG9vbFRlYWNoZXJzKClcclxuICAgKiBcclxuICAgKiBSZXR1cm4gbmFtZSBhbmQgbWFpbGFkcmVzc2VzIGZvciB0dXRpdGlvbmdyb3VwcyBpbiBzY2hvb2xzXHJcbiAgICogXHJcbiAgICogQHBhcmFtIHNjaG9vbE5hbWUgLSBuYW1lIG9mIHNjaG9vbFxyXG4gICAqL1xyXG4gIGFzeW5jIGdldFNjaG9vbFRlYWNoZXJzKHE6IHtzY2hvb2xOYW1lOiBzdHJpbmd9KSB7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmh0dHAuZ2V0KFwiU2Nob29sVGVhY2hlcnNcIiwgey4uLnRoaXMucHJpdmF0aXppbmdDYWNoZUJ1c3QoKSwgLi4ucX0pO1xyXG4gICAgaWYgKHJlcy5zdGF0dXMgIT0gMjAwKSB0aHJvdyBuZXcgSHR0cEVycm9yKHJlcy5zdGF0dXMsIGF3YWl0IHJlcy50ZXh0KCkpO1xyXG4gICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XHJcbiAgICByZXR1cm4ganNvbi5zY2hvb2xUZWFjaGVycyBhcyBFRFNUZWFjaGVyW107XHJcbiAgfVxyXG4gIC8vIHdlIGFzc3VtZSB0aGF0IHRoZSBFRFMgd2lsbCByZXR1cm4gdGhlIGN1cnJlbnQgYWNhZGVtaWMgeWVhciBkYXRlcyBkZXRlcm1pbmVkIGJ5IHRoZSBjdXJyZW50IGRhdGVcclxuICBhc3luYyBnZXRBY2FkZW1pY1llYXJUZXJtcyhzY2hvb2xMb2NhbGU6IHN0cmluZywgZGF0ZTogRGF0ZSkge1xyXG4gICAgLy8gbW9jayBkYXRhXHJcbiAgICBzd2l0Y2ggKHNjaG9vbExvY2FsZSkge1xyXG4gICAgICBjYXNlICdlbl9zaW4nOlxyXG4gICAgICByZXR1cm4gbW9ja0pzb25GaWxlLlNvdXRoSW5kaWEuZmlsdGVyKGYgPT4gbW9tZW50KGRhdGUpLmlzU2FtZU9yQWZ0ZXIoZi5maXJzdFRlcm0uc3RhcnREYXRlKSAmJiBtb21lbnQoZGF0ZSkuaXNTYW1lT3JCZWZvcmUoZi5zZWNvbmRUZXJtLmVuZERhdGUpKVswXSBhcyBNb2NrRURTQWNhZGVtaWNZZWFyO1xyXG4gICAgICBjYXNlICdlbl9uaW4nOlxyXG4gICAgICByZXR1cm4gbW9ja0pzb25GaWxlLk5vcnRoSW5kaWEuZmlsdGVyKGYgPT4gbW9tZW50KGRhdGUpLmlzU2FtZU9yQWZ0ZXIoZi5maXJzdFRlcm0uc3RhcnREYXRlKSAmJiBtb21lbnQoZGF0ZSkuaXNTYW1lT3JCZWZvcmUoZi5zZWNvbmRUZXJtLmVuZERhdGUpKVswXSBhcyBNb2NrRURTQWNhZGVtaWNZZWFyO1xyXG4gICAgICBjYXNlICdzdic6XHJcbiAgICAgIHtcclxuICAgICAgdmFyIGhvbGlkYXlzID0gW10gYXMgTW9ja0VEU0RhdGVSYW5nZVtdO1xyXG4gICAgICB2YXIgYWRkWWVhciA9IGRhdGUuZ2V0TW9udGgoKSA+PSA2O1xyXG4gICAgICBcclxuICAgICAgdmFyIGZpcnN0VGVybVllYXIgPSBhZGRZZWFyID8gZGF0ZS5nZXRGdWxsWWVhcigpIDogZGF0ZS5nZXRGdWxsWWVhcigpIC0gMTtcclxuICAgICAgdmFyIHNlY29uZFRlcm1ZZWFyID0gYWRkWWVhciA/IGRhdGUuZ2V0RnVsbFllYXIoKSArIDEgOiBkYXRlLmdldEZ1bGxZZWFyKCk7XHJcblxyXG4gICAgICAvL1RoZSBzdGFydCBkYXRlIGNhbiBiZSBpbiB0aGUgbGFzdCB3ZWVrIG9mIHRoZSBwcmV2aW91cyB5ZWFyXHJcbiAgICAgICB2YXIgZmlyc3RUZXJtWWVhck1vbWVudCA9IG1vbWVudChmaXJzdFRlcm1ZZWFyLnRvU3RyaW5nKCksIFwiWVlZWVwiKTtcclxuICAgICAgIHZhciBzZWNvbmRUZXJtWWVhck1vbWVudCA9IG1vbWVudChzZWNvbmRUZXJtWWVhci50b1N0cmluZygpLCBcIllZWVlcIik7XHJcblxyXG4gICAgICAgaWYoZmlyc3RUZXJtWWVhck1vbWVudC53ZWVrKCkgIT0gMSlcclxuICAgICAgIHtcclxuICAgICAgICBmaXJzdFRlcm1ZZWFyTW9tZW50ID0gZmlyc3RUZXJtWWVhck1vbWVudC5jbG9uZSgpLmFkZCgxLCAnd2VlaycpO1xyXG4gICAgICAgfVxyXG5cclxuICAgICAgICBpZihzZWNvbmRUZXJtWWVhck1vbWVudC53ZWVrKCkgIT0gMSlcclxuICAgICAgIHtcclxuICAgICAgICBzZWNvbmRUZXJtWWVhck1vbWVudCA9IHNlY29uZFRlcm1ZZWFyTW9tZW50LmNsb25lKCkuYWRkKDEsICd3ZWVrJyk7XHJcbiAgICAgICB9XHJcblxyXG4gICAgICB2YXIgc3RhcnRGaXJzdFRlcm1EYXRlID0gbW9tZW50KGZpcnN0VGVybVllYXJNb21lbnQuY2xvbmUoKSkud2VlaygzMikuc3RhcnRPZignd2VlaycpO1xyXG4gICAgICB2YXIgZW5kRmlyc3RUZXJtRGF0ZSA9IG1vbWVudChmaXJzdFRlcm1ZZWFyTW9tZW50LmNsb25lKCkpLndlZWsoNTEpLmVuZE9mKCd3ZWVrJyk7XHJcblxyXG4gICAgICB2YXIgc3RhcnRTZWNvbmRUZXJtRGF0ZSA9IG1vbWVudChzZWNvbmRUZXJtWWVhck1vbWVudC5jbG9uZSgpKTsgLy8gZG9uJ3Qgc2V0IGFzIHRoZSBzdGFydCBvZiB0aGUgd2VlayBiZWNhdXNlIGl0IGNhbiBiZSBpbiB0aGUgcHJldmlvdXMgeWVhclxyXG4gICAgICB2YXIgZW5kU2Vjb25kVGVybURhdGUgPSBtb21lbnQoc2Vjb25kVGVybVllYXJNb21lbnQuY2xvbmUoKSkud2VlaygyNSkuZW5kT2YoJ3dlZWsnKTtcclxuXHJcbiAgICAgIGNvbnN0IGZpcnN0VGVybSA9IHtzdGFydERhdGU6IG5ldyBEYXRlKGZpcnN0VGVybVllYXIsIHN0YXJ0Rmlyc3RUZXJtRGF0ZS5tb250aCgpLCBzdGFydEZpcnN0VGVybURhdGUuZGF0ZSgpKS50b0RhdGVTdHJpbmcoKSwgZW5kRGF0ZTogbmV3IERhdGUoZmlyc3RUZXJtWWVhciwgZW5kRmlyc3RUZXJtRGF0ZS5tb250aCgpLCBlbmRGaXJzdFRlcm1EYXRlLmRhdGUoKSkudG9EYXRlU3RyaW5nKCl9O1xyXG4gICAgICBjb25zdCBzZWNvbmRUZXJtID0ge3N0YXJ0RGF0ZTogbmV3IERhdGUoc2Vjb25kVGVybVllYXIsIHN0YXJ0U2Vjb25kVGVybURhdGUubW9udGgoKSwgc3RhcnRTZWNvbmRUZXJtRGF0ZS5kYXRlKCkpLnRvRGF0ZVN0cmluZygpLCBlbmREYXRlOiBuZXcgRGF0ZShzZWNvbmRUZXJtWWVhciwgZW5kU2Vjb25kVGVybURhdGUubW9udGgoKSwgZW5kU2Vjb25kVGVybURhdGUuZGF0ZSgpKS50b0RhdGVTdHJpbmcoKX07XHJcbiAgICAgIHJldHVybiB7Zmlyc3RUZXJtLCBzZWNvbmRUZXJtLCBob2xpZGF5c307XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBFRFNQZXJpb2Qge1xyXG4gIHBlcmlvZDogc3RyaW5nO1xyXG4gIHRlcm06ICdBVCcgfCAnU1QnO1xyXG4gIHllYXI6IG51bWJlcjtcclxuICBjb25zdHJ1Y3RvciAocGVyaW9kU3RyaW5nT3JTY2hvb2xUZXJtOiBzdHJpbmcgfCBTY2hvb2xNb21lbnQpIHtcclxuICAgIGlmICh0eXBlb2YgcGVyaW9kU3RyaW5nT3JTY2hvb2xUZXJtID09PSAnc3RyaW5nJykge1xyXG4gICAgICB0aGlzLnBlcmlvZCA9IHBlcmlvZFN0cmluZ09yU2Nob29sVGVybTtcclxuICAgICAgdGhpcy50ZXJtID0gdGhpcy5wZXJpb2Quc3RhcnRzV2l0aCgnSFQnKSA/ICdBVCcgOiAnU1QnO1xyXG4gICAgICB0aGlzLnllYXIgPSBwYXJzZUludCh0aGlzLnBlcmlvZC5zdWJzdHIoMikpO1xyXG4gICAgICBpZiAoaXNOYU4odGhpcy55ZWFyKSkgdGhyb3cgbmV3IEVycm9yIChgSW52YWxpZCBwZXJpb2Q6ICR7dGhpcy5wZXJpb2R9YCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBzY2hvb2xUZXJtID0gbmV3IFNjaG9vbFRlcm0ocGVyaW9kU3RyaW5nT3JTY2hvb2xUZXJtKTtcclxuICAgICAgdGhpcy5wZXJpb2QgPSAoc2Nob29sVGVybS50ZXJtID09PSAnQVQnID8gXCJIVFwiIDogXCJWVFwiKSArIHNjaG9vbFRlcm0ueWVhcjtcclxuICAgICAgdGhpcy50ZXJtID0gc2Nob29sVGVybS50ZXJtO1xyXG4gICAgICB0aGlzLnllYXIgPSBzY2hvb2xUZXJtLnllYXI7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXQgc2Nob29sVGVybSAoKSA6IFNjaG9vbFRlcm0ge1xyXG4gICAgcmV0dXJuIG5ldyBTY2hvb2xUZXJtKHtcclxuICAgICAgYWNhZGVtaWNZZWFyOiB0aGlzLnRlcm0gPT09ICdBVCcgP1xyXG4gICAgICAgIGAke3RoaXMueWVhcn0vJHt0aGlzLnllYXIgKyAxfWAgOlxyXG4gICAgICAgIGAke3RoaXMueWVhci0xfS8ke3RoaXMueWVhcn1gLFxyXG4gICAgICB0ZXJtOiB0aGlzLnRlcm1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdG9TdHJpbmcoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5wZXJpb2Q7XHJcbiAgfVxyXG5cclxuICB2YWx1ZU9mKCkge1xyXG4gICAgcmV0dXJuIHRoaXMueWVhciArIFwiOlwiICsgKHRoaXMudGVybSA9PT0gJ1NUJyA/IFwiMVwiIDogXCIyXCIpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSnNvbkRhdGVfb2xkIChqc29uRGF0ZVN0cjogc3RyaW5nKSA6IERhdGUge1xyXG4gIGNvbnN0IGRhdGUgPSBkYXRlVGltZVJldml2ZXIoXCJcIiwganNvbkRhdGVTdHIpO1xyXG4gIGlmICghKGRhdGUgaW5zdGFuY2VvZiBEYXRlKSkgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBKU09OIGRhdGUgc3RyaW5nOiBcIiArIGpzb25EYXRlU3RyKTtcclxuICByZXR1cm4gZGF0ZTtcclxufVxyXG5cclxuZnVuY3Rpb24gYXZvaWRTaW11bHRhbm91c0NhbGxzPFQsQT4obWV0aG9kOiAoLi4uYXJnczpBW10pPT5Qcm9taXNlPFQ+KSA6ICguLi5hcmdzOkFbXSk9PlByb21pc2U8VD4ge1xyXG4gIGxldCBvbmdvaW5nUHJvbWlzZXM6IHtbYXJnc0pzb246IHN0cmluZ106IFByb21pc2U8VD59ID0ge307XHJcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgY29uc3QgYXJnc0pzb24gPSBKU09OLnN0cmluZ2lmeShbXS5zbGljZS5jYWxsKGFyZ3VtZW50cykpO1xyXG4gICAgaWYgKCFvbmdvaW5nUHJvbWlzZXNbYXJnc0pzb25dKSB7XHJcbiAgICAgIG9uZ29pbmdQcm9taXNlc1thcmdzSnNvbl0gPSBtZXRob2QuYXBwbHkodGhpcywgYXJndW1lbnRzKS50aGVuKHJlc3VsdD0+e1xyXG4gICAgICAgIGRlbGV0ZSBvbmdvaW5nUHJvbWlzZXNbYXJnc0pzb25dO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG9uZ29pbmdQcm9taXNlc1thcmdzSnNvbl07XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IEJlYXJlclByb3ZpZGVyIH0gZnJvbSBcImtlZGJhY2tlbmQvY2xpZW50XCI7XHJcbmltcG9ydCBlbnYgZnJvbSAnLi4vZ2xvYmFscy9LRUQuZW52JztcclxuaW1wb3J0IHsgcmVqZWN0cyB9IGZyb20gJ2Fzc2VydCc7XHJcblxyXG5pbnRlcmZhY2Ugb3B0aW9ucyB7XHJcbiAgdXBsb2FkPzogYm9vbGVhbjtcclxuICBtdWx0aXBsZT86IGJvb2xlYW47XHJcbn1cclxuXHJcbmludGVyZmFjZSBzZWxlY3RlZEZpbGUge1xyXG4gIGZpbGVJZDogc3RyaW5nO1xyXG4gIHVybDogc3RyaW5nO1xyXG4gIG1pbWVUeXBlOiBzdHJpbmc7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIG1vZGlmaWVkVGltZTogbnVtYmVyO1xyXG4gIGNhbkV4cG9ydDogYm9vbGVhbjtcclxuICBpY29uVXJsPzogc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgZG93bmxvYWRBcmdzIHtcclxuICBmaWxlOiBzZWxlY3RlZEZpbGU7XHJcbiAgbGltaXRTaXplPzogbnVtYmVyO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEdvb2dsZVBpY2tlclxyXG4gKiBJbmNsdWRlcyB0aGUgaW5pdGlhdGlvbiBvZiB0aGUgY29ycmVjdCBhcGk6cy5cclxuICogQ2VydGFpbiBvcHRpb25zIGNhbiBiZSBwYXNzZWQgdG8gdGhlIGNvbnN0cnVjdG9yXHJcbiAqIGFuZCB0aGVyZSBjb3VsZCBiZSBvdGhlcnMgd29ydGggaW5jb3Jwb3JhdGluZyAoaS5lLiBUZWFtIERyaXZlLXN1cHBvcnQpLlxyXG4gKiBcclxuICogUmlnaHQgbm93IHR3byBvcHRpb25zIGFyZSBoYW5kbGVkOlxyXG4gKiAtIHVwbG9hZDogaWYgYSB1c2VyIGNhbiB1cGxvYWQgdG8gRHJpdmUgaW4gdGhlIEdvb2dsZSBEcml2ZSBQaWNrZXJcclxuICogLSBtdWx0aXBsZTogaWYgYSB1c2VyIGNhbiBzZWxlY3QgbXVsdGlwbGUgZmlsZXNcclxuICogXHJcbiAqIENvbXBhcmVkIHRvIEdvb2dsZUNhbGVuZGFyIHRoZSB0b2tlblByb3ZpZGVyIGlzIHNldCBpbiB0aGUgY29uc3RydWN0b3JcclxuICogYW5kIGlzIG5vdCBwYXNzZWQgYXMgYW4gYXJndW1lbnQuIFdlIGNvdWxkIHByb2JhYmx5IGRvIHRoZSBzYW1lIGluIEdvb2dsZUNhbGVuZGFyXHJcbiAqIGJlY2F1c2UgdGhlIGVudiBpcyBnbG9iYWxseSBhdmFpbGFibGUgYXQgYWxsIHRpbWVzLlxyXG4gKiBcclxuICogV2UgY291bGQgcHJvYmFibHkgc3BsaXQgdGhpcyBpbnRvIGdvb2dsZS1waWNrZXIgYW5kIGdvb2dsZS1kcml2ZSB3aGVyZSBnb29nbGUtZHJpdmVcclxuICogaGFuZGxlcyB0aGUgZXhwbGljaXQgY2FsbHMgdG8gdGhlIGdvb2dsZSBkcml2ZSBhcGkuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgR29vZ2xlUGlja2VyIHtcclxuICB0b2tlbkV4cGlyYXRpb246IERhdGU7XHJcbiAgZ29vZ2xlVG9rZW5Qcm92aWRlcjogQmVhcmVyUHJvdmlkZXI7XHJcbiAgcGlja2VyOiBnb29nbGUucGlja2VyLlBpY2tlcjtcclxuICBhdXRoVG9rZW46IHN0cmluZztcclxuICBvcHRpb25zOiBvcHRpb25zO1xyXG5cclxuICBjb25zdHJ1Y3RvcihvcHRpb25zPzogb3B0aW9ucykge1xyXG4gICAgdGhpcy5nb29nbGVUb2tlblByb3ZpZGVyID0gZW52Lmdvb2dsZVRva2VuUHJvdmlkZXI7XHJcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zIHx8IHt1cGxvYWQ6IGZhbHNlLCBtdWx0aXBsZTogZmFsc2V9O1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZW5zdXJlSW5pdGVkKCkge1xyXG4gICAgLy8gTG9hZCBHQVBJXHJcbiAgICBpZiAodHlwZW9mIGdhcGkgPT09IFwidW5kZWZpbmVkXCIpIGF3YWl0IHRoaXMubG9hZEdhcGkoKTtcclxuXHJcbiAgICAvLyBLRURTU2Nob29sc1xyXG4gICAgY29uc3QgQ0xJRU5UX0lEID0gXCI0MjE1NzIyNjIyNjktdTY4djVsZjVvOHNzNXQ2OGw4Z2txM3BmYXJoNmRia3YuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb21cIjtcclxuICAgIFxyXG4gICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUscmVqZWN0KSA9PiB7XHJcbiAgICAgIGdhcGkubG9hZChcImNsaWVudDphdXRoMlwiLCAoKSA9PiB7XHJcbiAgICAgICAgLy8gQ2FsbHMgYXV0aG9yaXplIHdpdGhvdXQgcHJvbXB0aW5nIHRoZSB1c2VyLiBJZiBhdXRob3JpemF0aW9uIGhhc24ndCBiZWVuIGdpdmVuIGJ5XHJcbiAgICAgICAgLy8gdGhlIHVzZXIgYW4gZXJyb3IgaXMgcmV0dXJuZWQgYW5kIHdlIGNhbGwgYXV0aG9yaXplIGFnYWluIHdpdGggY29uc2VudC1zY3JlZW5cclxuICAgICAgICByZXR1cm4gZ2FwaS5hdXRoMi5hdXRob3JpemUoe1xyXG4gICAgICAgICAgY2xpZW50X2lkOiBDTElFTlRfSUQsXHJcbiAgICAgICAgICBzY29wZTogJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvZHJpdmUnLFxyXG4gICAgICAgICAgcmVzcG9uc2VfdHlwZTogJ2lkX3Rva2VuIHBlcm1pc3Npb24nLFxyXG4gICAgICAgICAgcHJvbXB0OiAnbm9uZSdcclxuICAgICAgICB9LCAocmVzcCkgPT4ge1xyXG4gICAgICAgICAgaWYgKHJlc3AuZXJyb3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGdhcGkuYXV0aDIuYXV0aG9yaXplKHtcclxuICAgICAgICAgICAgICBjbGllbnRfaWQ6IENMSUVOVF9JRCxcclxuICAgICAgICAgICAgICBzY29wZTogJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvZHJpdmUnLFxyXG4gICAgICAgICAgICAgIHJlc3BvbnNlX3R5cGU6ICdpZF90b2tlbiBwZXJtaXNzaW9uJyxcclxuICAgICAgICAgICAgICBwcm9tcHQ6ICdjb25zZW50J1xyXG4gICAgICAgICAgICB9LCAocmVzcCkgPT4ge1xyXG4gICAgICAgICAgICAgIGlmIChyZXNwLmVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoJ1BpY2tlcjogTm8gYWNjZXNzIHRva2VuJyk7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYXV0aFRva2VuID0gcmVzcC5hY2Nlc3NfdG9rZW47XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0aFRva2VuID0gcmVzcC5hY2Nlc3NfdG9rZW47XHJcbiAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICl9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIExvYWQgUGlja2VyIEFQSVxyXG4gICAgaWYgKHR5cGVvZiBnb29nbGUgPT09IFwidW5kZWZpbmVkXCIgfHwgdHlwZW9mIGdvb2dsZS5waWNrZXIgPT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgZ2FwaS5sb2FkKFwicGlja2VyXCIsICgpID0+IHtyZXNvbHZlKCl9KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBsb2FkR2FwaSgpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGlmICh0eXBlb2YgZ2FwaSAhPT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIHJlc29sdmUoKTtcclxuICAgICAgY29uc3Qgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcclxuICAgICAgc2NyaXB0LnNyYyA9IFwiaHR0cHM6Ly9hcGlzLmdvb2dsZS5jb20vanMvY2xpZW50LmpzP29ubG9hZD1nYWFwaV9sb2FkZWRcIjtcclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdLmFwcGVuZENoaWxkKHNjcmlwdCk7XHJcbiAgICAgICh3aW5kb3cgYXMgYW55KS5nYWFwaV9sb2FkZWQgPSByZXNvbHZlO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBzaG93KClcclxuICAgKiBcclxuICAgKiBJZiBhIHNpbmdsZSBmaWxlIGlzIHJlcXVlc3RlZCBmcm9tIHRoZSBwaWNrZXIgYSBsaXN0IG9mIGZpbGVzIHdpdGggb25lIGVsZW1lbnQgaXMgcmV0dXJuZWQuXHJcbiAgICogSXQgaXMgdXAgdG8gdGhlIGNhbGxlciB0byBoYW5kbGUgdGhlIGxpc3QgaW4gYSByZWxldmFudCBtYW5uZXIuXHJcbiAgICogXHJcbiAgICogTW9yZSBkYXRhIGZyb20gdGhlIGZpbGUgY291bGQgYmUgZXh0cmFjdGVkIGlmIGl0IGlzIGRlZW1lZCBuZWNlc3NhcnkuXHJcbiAgICogXHJcbiAgICovXHJcbiAgYXN5bmMgc2hvdygpIHtcclxuICAgIGF3YWl0IHRoaXMuZW5zdXJlSW5pdGVkKCk7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2U8c2VsZWN0ZWRGaWxlW10+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgY29uc3QgY2FsbGJhY2sgPSAocmVzcG9uc2UpID0+IHtcclxuICAgICAgICBpZiAocmVzcG9uc2VbJ2FjdGlvbiddID09IGdvb2dsZS5waWNrZXIuQWN0aW9uLkNBTkNFTCkge1xyXG4gICAgICAgICAgICByZWplY3QoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlWydhY3Rpb24nXSA9PSBnb29nbGUucGlja2VyLkFjdGlvbi5QSUNLRUQpIHtcclxuICAgICAgICAgIGxldCBzZWxlY3RlZCA9IFtdO1xyXG4gICAgICAgICAgcmVzcG9uc2UuZG9jcy5mb3JFYWNoKChkb2MpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qge2lkOiBmaWxlSWQsIG1pbWVUeXBlLCBuYW1lLCBtb2RpZmllZFRpbWUsIGljb25VcmwsIHVybH0gPSBkb2M7XHJcbiAgICAgICAgICAgIGNvbnN0IGNhbkV4cG9ydCA9IG1pbWVUeXBlLmluY2x1ZGVzKCdnb29nbGUtYXBwcycpO1xyXG4gICAgICAgICAgICBzZWxlY3RlZC5wdXNoKHtmaWxlSWQsIG1pbWVUeXBlLCBuYW1lLCBtb2RpZmllZFRpbWUsIGNhbkV4cG9ydCwgaWNvblVybCwgdXJsfSk7XHJcbiAgICAgICAgICAgIC8vIHVwZGF0ZSBwZXJtaXNzaW9ucyB0byByZWFkIGJ5IGFsbCBpbiBkb21haW5cclxuICAgICAgICAgICAgdGhpcy51cGRhdGVQZXJtaXNzaW9ucyhmaWxlSWQpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhzZWxlY3RlZCk7XHJcbiAgICAgICAgICByZXNvbHZlKHNlbGVjdGVkKTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBwaWNrZXJidWlsZGVyID0gbmV3IGdvb2dsZS5waWNrZXIuUGlja2VyQnVpbGRlcigpXHJcbiAgICAgICAgLmFkZFZpZXcoXHJcbiAgICAgICAgICBuZXcgZ29vZ2xlLnBpY2tlci5Eb2NzVmlldygpXHJcbiAgICAgICAgICAgIC5zZXRPd25lZEJ5TWUodHJ1ZSkgLy8gc2hvdWxkIHRoaXMgYmUgYW4gb3B0aW9uP1xyXG4gICAgICAgICAgICAuc2V0SW5jbHVkZUZvbGRlcnModHJ1ZSlcclxuICAgICAgICApXHJcbiAgICAgICAgLnNldExvY2FsZShcInN2XCIpIC8vIHNob3VsZCB0aGlzIGJlIGFuIG9wdGlvbj9cclxuICAgICAgICAuc2V0U2l6ZSgxMDUxLDY1MCkgLy8gc2hvdWxkIHRoaXMgYmUgYW4gb3B0aW9uP1xyXG4gICAgICAgIC5zZXRPQXV0aFRva2VuKHRoaXMuYXV0aFRva2VuKSAvLyB0ZW1wXHJcbiAgICAgICAgLnNldENhbGxiYWNrKGNhbGxiYWNrKTtcclxuICAgICAgaWYgKHRoaXMub3B0aW9ucy51cGxvYWQpIHtcclxuICAgICAgICBwaWNrZXJidWlsZGVyLmFkZFZpZXcobmV3IGdvb2dsZS5waWNrZXIuRG9jc1VwbG9hZFZpZXcoKS5zZXRJbmNsdWRlRm9sZGVycyh0cnVlKSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5tdWx0aXBsZSkge1xyXG4gICAgICAgIHBpY2tlcmJ1aWxkZXIuZW5hYmxlRmVhdHVyZShnb29nbGUucGlja2VyLkZlYXR1cmUuTVVMVElTRUxFQ1RfRU5BQkxFRCk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5waWNrZXIgPSBwaWNrZXJidWlsZGVyLmJ1aWxkKCk7XHJcbiAgICAgIHRoaXMucGlja2VyLnNldFZpc2libGUodHJ1ZSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIHVwZGF0ZVBlcm1pc3Npb25zKClcclxuICAgKiBcclxuICAgKiBAcGFyYW0gZmlsZUlkIFxyXG4gICAqIFxyXG4gICAqIE1ha2UgdGhlIGZpbGUgYWNjZXNzaWJsZSB0byBhbGwgaW4gdGhlIGRvbWFpbi4gU2hvdWxkIGJlIHVubmVjZXNzYXJ5IGJ1dCBzb21lXHJcbiAgICogdGVhY2hlcnMgaGF2ZSBjaGFuZ2VkIHRoZWlyIGRlZmF1bHQgcGVybWlzc2lvbnMuXHJcbiAgICogV2UgZG9uJ3QgY2FyZSByaWdodCBub3cgaWYgdGhpcyBmYWlscyBiZWNhdXNlIHRoaXMgaXMganVzdCBhbiBleHRyYSBwcmVjYXV0aW9uLlxyXG4gICAqIElmIHdlIHBsYW4gb24gdXNpbmcgdGhpcyBvbiBvdGhlciBkb21haW5zIHRoZSBkb21haW4tYXR0cmlidXRlIG5lZWRzIHRvIGJlIGR5bmFtaWMuXHJcbiAgICogXHJcbiAgICovXHJcbiAgYXN5bmMgdXBkYXRlUGVybWlzc2lvbnMoZmlsZUlkKSB7XHJcbiAgICBhd2FpdCBnYXBpLmNsaWVudC5pbml0KHtcclxuICAgICAgZGlzY292ZXJ5RG9jczogW1wiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vZGlzY292ZXJ5L3YxL2FwaXMvZHJpdmUvdjMvcmVzdFwiXVxyXG4gICAgfSk7XHJcbiAgICBnYXBpLmNsaWVudC5kcml2ZS5wZXJtaXNzaW9ucy5jcmVhdGUoPGFueT57XHJcbiAgICAgIGZpbGVJZDogZmlsZUlkLFxyXG4gICAgICBzZW5kTm90aWZpY2F0aW9uRW1haWw6IGZhbHNlLFxyXG4gICAgICByb2xlOiAncmVhZGVyJyxcclxuICAgICAgdHlwZTogJ2RvbWFpbicsXHJcbiAgICAgIGRvbWFpbjogJ2t1bnNrYXBzc2tvbGFuLnNlJ1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogZG93bmxvYWRGaWxlKClcclxuICAgKiBAcGFyYW0gZmlsZSBcclxuICAgKiBcclxuICAgKiBXaGVuIENsYXNzcm9vbSBoYXMgYmVlbiBpbnRlZ3JhdGVkIHdlIHdpbGwgd2FudCB0byBoYW5kbGUgb25seSB0aGUgZmlsZUlkOnNcclxuICAgKiBzbyB0aGF0IGVkaXRpbmcgY2FwYWJpbGl0aWVzIGFyZSBwZXNlcnZlZCBvbiB0aGUgZmlsZSAoaWYgaXQgaXMgYSBnb29nbGUtYXBwcyBmaWxlKVxyXG4gICAqIFJpZ2h0IG5vdyBnb29nbGUtYXBwcyBmaWxlcyBhcmUgY29udmVydGVkIHRvIHBkZiBhbmQgcGFzc2VkIGludG8gdGhlIGN1cnJlbnQgZmxvdy5cclxuICAgKiBcclxuICAgKiBUT0RPOiBlcnJvciBoYW5kbGluZ1xyXG4gICAqL1xyXG5cclxuICBhc3luYyBkb3dubG9hZEZpbGUoe2ZpbGUsIGxpbWl0U2l6ZX0pIHtcclxuICAgIC8vIEEgZmlsZSB0aGF0IGNhbiBiZSBleHBvcnRlZCB0byBQREYgaXMgcmV0cmVpdmVkIHdpdGhcclxuICAgIC8vIGZpbGUuZXhwb3J0KCkgZnJvbSBEcml2ZSwgY29udmVydGVkIHRvIGEgYmxvYiBhbmQgdGhlblxyXG4gICAgLy8gdG8gYSBGaWxlLlxyXG4gICAgLy8gQSBmaWxlIHRoYXQgY2FuIG5vdCBiZSBleHBvcnRlZCB0byBQREYgaXMgcmV0cmlldmVkXHJcbiAgICAvLyB0aHJvdWdoIFhIUiBhbmQgY29udmVydGVkIHRvIGEgRmlsZS5cclxuXHJcbiAgICAvLyBJZiB3ZSBkb24ndCBuZWVkIHRvIGhhbmRsZSB0aGUgcGh5c2ljYWwgZmlsZXMgb24gdGhlIGNsaWVudFxyXG4gICAgLy8gd2UgY291bGQgc2F2ZSBvbmx5IHRoZSBmaWxlSWQ6cyBhbmQgZGlzcGxheSBmaWxlbmFtZSBhbmQgbWltZVR5cGVcclxuICAgIC8vIGZvciB0aGUgZmlsZSBpbiBvdXIgbGlzdGluZ3MuIFdoZW4vaWYgd2UgdXNlIEdvb2dsZSBDbGFzc3Jvb20gZm9yXHJcbiAgICAvLyBvdXIgdGFzay1oYW5kbGluZyB0aGF0IHdvdWxkIGJlIHRoZSBwcmVmZXJyZWQgYXBwcm9hY2ggdG8ga2VlcFxyXG4gICAgLy8gdGhlIGZpbGUgYXMgYW4gZWRpdGFibGUgR29vZ2xlIGZpbGVcclxuXHJcbiAgICAvLyBJbml0IHRoZSBkcml2ZS1hcGkgKG9ubHkgbmVlZGVkIGZvciBkb3dubG9hZCBzbyBub3QgbG9hZGVkIGluaXRpYWxseSlcclxuICAgIGF3YWl0IGdhcGkuY2xpZW50LmluaXQoe1xyXG4gICAgICBkaXNjb3ZlcnlEb2NzOiBbXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9kaXNjb3ZlcnkvdjEvYXBpcy9kcml2ZS92My9yZXN0XCJdXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoZmlsZS5jYW5FeHBvcnQpIHtcclxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPEZpbGU+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICBnYXBpLmNsaWVudC5kcml2ZS5maWxlcy5leHBvcnQoe1xyXG4gICAgICAgICAgZmlsZUlkOiBmaWxlLmZpbGVJZCxcclxuICAgICAgICAgIG1pbWVUeXBlOiAnYXBwbGljYXRpb24vcGRmJ31cclxuICAgICAgICApLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICBjb25zdCBsZW4gPSByZXNwLmJvZHkubGVuZ3RoO1xyXG4gICAgICAgICAgY29uc3QgZGF0YSA9IG5ldyBVaW50OEFycmF5KG5ldyBBcnJheUJ1ZmZlcihsZW4pKTtcclxuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgZGF0YVtpXSA9IHJlc3AuYm9keS5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtkYXRhXSwge3R5cGU6ICdhcHBsaWNhdGlvbi9wZGYnfSk7XHJcbiAgICAgICAgICBjb25zdCBmaWxlbmFtZSA9IGZpbGUubmFtZSsnLnBkZic7XHJcbiAgICAgICAgICByZXNvbHZlKG5ldyBGaWxlKFtibG9iXSwgZmlsZW5hbWUsIHt0eXBlOiAnYXBwbGljYXRpb24vcGRmJywgbGFzdE1vZGlmaWVkOiBmaWxlLm1vZGlmaWVkVGltZX0pKTtcclxuICAgICAgICB9KVxyXG4gICAgICB9KTsgIFxyXG4gICAgfSBlbHNlIHtcclxuXHJcbiAgICAgIC8vIGEgZmlsZSB0aGF0IGlzbid0IGEgZ29vZ2xlLWFwcHMgZmlsZSBuZWVkcyB0byBiZSBmZXRjaGVkIHZpYSBYSFJcclxuICAgICAgLy8gYmVjYXVzZSByZXNwb25zZVR5cGUgYW5kID9hbHQ9bWVkaWEgbmVlZHMgdG8gYmUgc2V0IHRvIGF2b2lkIENPUlNcclxuICAgICAgY29uc3QgeGhyRG93bmxvYWQgPSAoZmlsZTpzZWxlY3RlZEZpbGUpID0+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8RmlsZT4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgICB4aHIub3BlbihcIkdFVFwiLCBcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2RyaXZlL3YzL2ZpbGVzL1wiK2ZpbGUuZmlsZUlkKyc/YWx0PW1lZGlhJywgdHJ1ZSk7XHJcbiAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQXV0aG9yaXphdGlvbicsJ0JlYXJlciAnK3RoaXMuYXV0aFRva2VuKTtcclxuICAgICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYmxvYidcclxuICAgICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICByZXNvbHZlKG5ldyBGaWxlKFt4aHIucmVzcG9uc2VdLCBmaWxlLm5hbWUsIHt0eXBlOiBmaWxlLm1pbWVUeXBlLCBsYXN0TW9kaWZpZWQ6IGZpbGUubW9kaWZpZWRUaW1lfSkpO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIHhoci5zZW5kKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxGaWxlPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgaWYgKGxpbWl0U2l6ZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICBnYXBpLmNsaWVudC5kcml2ZS5maWxlcy5nZXQoe1xyXG4gICAgICAgICAgICBmaWxlSWQ6IGZpbGUuZmlsZUlkLFxyXG4gICAgICAgICAgICBmaWVsZHM6ICdzaXplJ1xyXG4gICAgICAgICAgfSkudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgc2l6ZSA9IE51bWJlcihyZXNwLnJlc3VsdC5zaXplKTtcclxuICAgICAgICAgICAgaWYgKHNpemUgPiBsaW1pdFNpemUqMTAyNCoxMDI0KSB7XHJcbiAgICAgICAgICAgICAgcmVqZWN0KCdHb29nbGVQaWNrZXJFcnJvcjogRmlsc2l6ZSBpcyB0b28gbGFhcmdlJylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIHhockRvd25sb2FkKGZpbGUpLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHhockRvd25sb2FkKGZpbGUpLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICAgIHJlc29sdmUocmVzcCk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGZ1bmN0aW9uIGNvdXJzZU5hbWVUb0Nzc0NsYXNzKGNzc1ByZWZpeDogc3RyaW5nLCBjb3Vyc2VOYW1lOiBzdHJpbmcpIHtcclxuICByZXR1cm4gYCR7Y3NzUHJlZml4fSR7Y291cnNlTmFtZS5zdWJzdHIoMCwzKS50b0xvd2VyQ2FzZSgpfWA7XHJcbn1cclxuIiwiaW1wb3J0IHsgVXNlclRhc2tzQm94UHJvcHMgfSBmcm9tIFwiLi4vd2Vla3BsYW5uZXIvdXNlci10YXNrcy1ib3hcIjtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRXZWVrcGxhbm5lclByb2dyZXNzRGF0YSh0YXNrU2V0czogUGFydGlhbDxVc2VyVGFza3NCb3hQcm9wcz5bXSkge1xyXG4gICAgdmFyIGNoYXJ0VGFza3M6IHtcclxuICAgICAgICBjb21wbGV0ZWRUYXNrczogbnVtYmVyLCBcclxuICAgICAgICB0b3RhbE51bWJlck9mVGFza3M6IG51bWJlcixcclxuICAgICAgICBzdWJqZWN0RGF0YToge1xyXG4gICAgICAgICAgICBbY29sdW1uSGVhZGVyOiBzdHJpbmddOiB7IGNvbXBsZXRlZE51bWJlck9mVGFza3M6IG51bWJlciwgbnVtYmVyT2ZUYXNrczogbnVtYmVyIH1cclxuICAgICAgICB9XHJcbiAgICB9ID0ge2NvbXBsZXRlZFRhc2tzOiAwLCB0b3RhbE51bWJlck9mVGFza3M6IDAgLCBzdWJqZWN0RGF0YToge319O1xyXG5cclxuICAgIHRhc2tTZXRzLmZvckVhY2goZWxlbSA9PiBlbGVtLmxlYXJuaW5nR29hbHMuZm9yRWFjaCh4ID0+IHtcclxuICAgICAgICB2YXIgc3ViamVjdENvbXBsZXRlZFRhc2tzID0geC50YXNrcy5maWx0ZXIodCA9PiB0LmRvbmUpLmxlbmd0aDtcclxuICAgICAgICBjaGFydFRhc2tzLnN1YmplY3REYXRhW2VsZW0uY291cnNlTmFtZV0gPSB7IGNvbXBsZXRlZE51bWJlck9mVGFza3M6IHN1YmplY3RDb21wbGV0ZWRUYXNrcywgbnVtYmVyT2ZUYXNrczogeC50YXNrcy5sZW5ndGggfTtcclxuICAgICAgICBjaGFydFRhc2tzLmNvbXBsZXRlZFRhc2tzICs9IHN1YmplY3RDb21wbGV0ZWRUYXNrcztcclxuICAgICAgICBjaGFydFRhc2tzLnRvdGFsTnVtYmVyT2ZUYXNrcyArPSB4LnRhc2tzLmxlbmd0aDtcclxuICAgIH0pKTtcclxuICAgIHJldHVybiBjaGFydFRhc2tzO1xyXG59IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICAgIG51bWJlck9mVGFza3M6IG51bWJlcjtcclxuICAgIGNvbXBsZXRlZE51bWJlck9mVGFza3M6IG51bWJlcjtcclxuICAgIG1heGltdW1UYXNrc0Rpc3BsYXllZD86IG51bWJlcjtcclxuICAgIGJhY2tncm91bmRDb2xvcj86IHN0cmluZztcclxuICAgIHByb2dyZXNzQ29sb3I/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBHb2FsUHJvZ3Jlc3MgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHM+IHtcclxuICAgIHB1YmxpYyBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xyXG4gICAgICAgIG51bWJlcm9mVGFza3M6IDAsXHJcbiAgICAgICAgY29tcGxldGVkTnVtYmVyT2ZUYXNrczogMCxcclxuICAgICAgICBtYXhpbXVtVGFza3NEaXNwbGF5ZWQ6IDEwLFxyXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogXCJsaWdodGdyZXlcIixcclxuICAgICAgICBwcm9ncmVzc0NvbG9yOiBcIiMzZGJjYTJcIixcclxuICAgIH07XHJcblxyXG4gICAgY3JlYXRlUHJvZ3Jlc3MgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyBudW1iZXJPZlRhc2tzLCBjb21wbGV0ZWROdW1iZXJPZlRhc2tzLCBtYXhpbXVtVGFza3NEaXNwbGF5ZWQsIGJhY2tncm91bmRDb2xvciwgcHJvZ3Jlc3NDb2xvciB9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBsZXQgcHJvZ3Jlc3MgPSBbXTtcclxuICAgICAgICBpZihudW1iZXJPZlRhc2tzID4gbWF4aW11bVRhc2tzRGlzcGxheWVkKXtcclxuICAgICAgICAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJwcm9ncmVzcy1vdmVydmlld1wiPiB7Y29tcGxldGVkTnVtYmVyT2ZUYXNrc30gLyB7bnVtYmVyT2ZUYXNrc30gPC9kaXY+O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChsZXQgdGFza05vID0gMTsgdGFza05vIDw9IG51bWJlck9mVGFza3M7IHRhc2tObysrKSB7XHJcbiAgICAgICAgICAgIHByb2dyZXNzLnB1c2goXHJcbiAgICAgICAgICAgIDxzdmcga2V5PXt0YXNrTm99PlxyXG4gICAgICAgICAgICAgICAgPGNpcmNsZSBjbGFzc05hbWU9XCJjaXJjbGUtY2hhcnQtYmFja2dyb3VuZFwiIGZpbGw9e3Rhc2tObyA+IGNvbXBsZXRlZE51bWJlck9mVGFza3MgPyBiYWNrZ3JvdW5kQ29sb3IgOiBwcm9ncmVzc0NvbG9yfSBjeD1cIjhcIiBjeT1cIjhcIiByPVwiOFwiIC8+XHJcbiAgICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcHJvZ3Jlc3M7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCl7ICBcclxuICAgICAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJnb2Fscy1wcm9ncmVzc1wiPnt0aGlzLmNyZWF0ZVByb2dyZXNzKCl9PC9kaXY+XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gICAgcGVyY2VudGFnZTogbnVtYmVyO1xyXG4gICAgYmFja2dyb3VuZENvbG9yPzogc3RyaW5nO1xyXG4gICAgcHJvZ3Jlc3NDb2xvcj86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFByb2dyZXNzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzPiB7XHJcbiAgICBwdWJsaWMgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcclxuICAgICAgICBwZXJjZW50YWdlOiAwLFxyXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIjRjFGNUY0XCIsXHJcbiAgICAgICAgcHJvZ3Jlc3NDb2xvcjogXCIjM2RiY2EyXCIsXHJcbiAgICB9O1xyXG5cclxuICAgIHJlbmRlcigpe1xyXG4gICAgICAgIGNvbnN0IHtwZXJjZW50YWdlLCBiYWNrZ3JvdW5kQ29sb3IsIHByb2dyZXNzQ29sb3J9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBjb25zdCByb3VuZGVkUGVyY2VudGFnZSA9IE1hdGgucm91bmQocGVyY2VudGFnZSk7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPHN2ZyBjbGFzc05hbWU9XCJwcm9ncmVzcy1jaGFydFwiIHdpZHRoPVwiMTAwJVwiIGhlaWdodD1cIjI1XCI+XHJcbiAgICAgICAgICAgIDxyZWN0IGZpbGw9e2JhY2tncm91bmRDb2xvcn0gIHdpZHRoPVwiMTAwJVwiIGhlaWdodD1cIjEwMCVcIiByeD1cIjRcIi8+XHJcbiAgICAgICAgICAgIDxyZWN0IGNsYXNzTmFtZT1cImZpbGxcIiBmaWxsPXtwcm9ncmVzc0NvbG9yfSB3aWR0aD17YCR7cm91bmRlZFBlcmNlbnRhZ2V9JWB9IGhlaWdodD1cIjEwMCVcIiByeD1cIjRcIi8+XHJcbiAgICAgICAgICAgIDx0ZXh0IGNsYXNzTmFtZT1cImZpbGxlZC10ZXh0XCIgdGV4dEFuY2hvcj1cIm1pZGRsZVwiIHg9XCI1MCVcIiB5PVwiNTAlXCIgZHk9XCIuM2VtXCI+e2Ake3JvdW5kZWRQZXJjZW50YWdlfSVgfTwvdGV4dD5cdFxyXG4gICAgICAgICAgICA8L3N2Zz5cclxuICAgICAgICApXHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IExpbmsgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcclxuaW1wb3J0IHsgVmFsdWUsIEVtaXR0ZXIgfSBmcm9tICdrZWRiYWNrZW5kL29ic2VydmFibGUnO1xyXG5pbXBvcnQgeyBsaXZlUXVlcnlWaWV3IH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2xpdmUtcXVlcnktdmlldyc7XHJcbmltcG9ydCB7IExhenlDb250ZW50IH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2xhenktY29udGVudCc7XHJcbmltcG9ydCB7IEVsbGlwc2lzTG9hZGVyIH0gZnJvbSAnLi4vLi4vY291cnNlLWJ1aWxkZXIvc3ViLWNvbXBvbmVudHMvZWxsaXBzaXMtbG9hZGVyJztcclxuaW1wb3J0IHsgcHJlc2VydmVJbXBlcnNvbmF0aW9uUXVlcnkgfSBmcm9tICcuLi8uLi8uLi9hY2Nlc3MtY29udHJvbCc7XHJcbmltcG9ydCB7IEwgfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEJhbm5lclByb3BzIHtcclxuICB0aXRsZTogc3RyaW5nLFxyXG4gIGJhY2tncm91bmRJbWFnZT86IHN0cmluZyxcclxuICB0YWJzOiB7IG5hbWU6IHN0cmluZyB8IEpTWC5FbGVtZW50LCBrZXk6IHN0cmluZywgbGluaz86IHN0cmluZywgb25DbGljaz86ICgpID0+IHZvaWQsIGRyYWdnYWJsZT86IGJvb2xlYW4gIH1bXSxcclxuICBidXR0b25zPzogSlNYLkVsZW1lbnRbXSxcclxuICBhY3RpdmVUYWI6IHN0cmluZztcclxuICBjb3JuZXJCb3g/OiBzdHJpbmcgfCBKU1guRWxlbWVudDtcclxuICBibG9ja3M/OiBBcnJheTx7IGlkOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgc3RlcHM6IEFycmF5PHsgbGluazogc3RyaW5nLCBzdGVwTm86IG51bWJlciwgaXNBY3RpdmU6IGJvb2xlYW59PiB9PlxyXG4gIHNvcnRhYmxlVGFicz86IGJvb2xlYW47XHJcbiAgb25UYWJEcm9wPzogKHNvdXJjZTogc3RyaW5nLCB0YXJnZXQ6IHN0cmluZywgcGxhY2VtZW50OiAnYmVmb3JlJyB8ICdhZnRlcicpID0+IHZvaWRcclxufVxyXG5cclxuaW50ZXJmYWNlIExhenlCYW5uZXJQcm9wcyB7XHJcbiAgbGF6eVByb3BzOiBWYWx1ZTxCYW5uZXJQcm9wcz5cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIExhenlCYW5uZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8TGF6eUJhbm5lclByb3BzPiB7XHJcbiAgZHJhZ1N0YXRlID0gbmV3IEVtaXR0ZXIoeyB0YWJCZWluZ0RyYWdnZWQ6ICcnLCB0YWJCZWluZ0hvdmVyZWQ6ICcnLCBpbnNlcnRCZWZvcmU6IGZhbHNlLCBvcmlnaW5DbGllbnRYOiAtMSB9KTtcclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3QgeyBsYXp5UHJvcHMgfSA9IHRoaXMucHJvcHM7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInN2LXJvdyBzdi1sYXlvdXQgc3Ytc2tpcC1zcGFjZXJcIiBzdHlsZT17eyBvdmVyZmxvdzogXCJ2aXNpYmxlXCIgfX0+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdi1sYXlvdXQgc3Ytc2tpcC1zcGFjZXIgc3YtY29sdW1uLTEyXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInN2LXNjcmlwdC1wb3J0bGV0IHN2LXBvcnRsZXQgc3Ytc2tpcC1zcGFjZXJcIj5cclxuICAgICAgICAgICAgPExhenlDb250ZW50IG5vRXJyb3I+XHJcbiAgICAgICAgICAgICAge2xhenlQcm9wcy5tYXAoKHsgYmFja2dyb3VuZEltYWdlIH0pID0+IGJhY2tncm91bmRJbWFnZSAmJiA8c3R5bGU+e2BcclxuICAgICAgICAgICAgICAucGFnZUhlYWRlciB7XHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJyR7YmFja2dyb3VuZEltYWdlfScpICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBgfTwvc3R5bGU+KX1cclxuICAgICAgICAgICAgPC9MYXp5Q29udGVudD5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYWdlSGVhZGVyXCI+XHJcbiAgICAgICAgICAgICAgPGE+XHJcbiAgICAgICAgICAgICAgICA8aDE+PExhenlDb250ZW50IG5vRXJyb3I+e2xhenlQcm9wcy5tYXAocHJvcHMgPT4gPD57cHJvcHMudGl0bGV9PC8+KX08L0xhenlDb250ZW50PjwvaDE+XHJcbiAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgIDxMYXp5Q29udGVudCBub0Vycm9yPntsYXp5UHJvcHMubWFwKCh7IGNvcm5lckJveCB9KSA9PiBjb3JuZXJCb3ggJiZcclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFnZUhlYWRlckNvcm5lckJveFwiPlxyXG4gICAgICAgICAgICAgICAgICB7Y29ybmVyQm94fVxyXG4gICAgICAgICAgICAgICAgPC9kaXY+KX1cclxuICAgICAgICAgICAgICA8L0xhenlDb250ZW50PlxyXG5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dHRvbnNGaWVsZFwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidXR0b25zQ29udGFpbmVyXCI+XHJcbiAgICAgICAgICAgICAgICAgIDxMYXp5Q29udGVudCBzcGlubmVyPXs8RWxsaXBzaXNMb2FkZXIgLz59PntsYXp5UHJvcHMubWFwKCh7IHRhYnMsIGJ1dHRvbnMsIGFjdGl2ZVRhYiwgYmxvY2tzLCBzb3J0YWJsZVRhYnMsIG9uVGFiRHJvcCB9KSA9PiA8PlxyXG4gICAgICAgICAgICAgICAgICAgIHtibG9ja3MgPyA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWxcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIHtibG9ja3MubWFwKGJsb2NrID0+IDxkaXYga2V5PXtibG9jay5pZH0gY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWxpZ24tdmVydGljYWxcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGE+e2Jsb2NrLm5hbWV9PC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ0bi1ncm91cFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YmxvY2suc3RlcHMubWFwKHN0ZXAgPT4gPFJlYWN0LkZyYWdtZW50IGtleT17c3RlcC5zdGVwTm99PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMaW5rXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bz17c3RlcC5saW5rfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtcImJ0biBidG4tc21hbGwgc3RlcC1idXR0b25cIiArIChzdGVwLmlzQWN0aXZlID8gXCIgYWN0aXZlUGFnZVwiIDogXCJcIil9ID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzdGVwLnN0ZXBOb31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0xpbms+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9SZWFjdC5GcmFnbWVudD4pfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+KX1cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj4gOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdob3Jpem9udGFsTWVudSc+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8TGF6eUNvbnRlbnQ+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYWdTdGF0ZS5tYXAoKHsgdGFiQmVpbmdEcmFnZ2VkLCB0YWJCZWluZ0hvdmVyZWQsIGluc2VydEJlZm9yZSwgb3JpZ2luQ2xpZW50WCB9KSA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDx1bFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtzb3J0YWJsZVRhYnMgPyBcInNvcnRhYmxlXCIgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Ecm9wPXtvblRhYkRyb3AgPyBldiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YWJCZWluZ0hvdmVyZWQgJiYgdGFiQmVpbmdEcmFnZ2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25UYWJEcm9wKHRhYkJlaW5nRHJhZ2dlZCwgdGFiQmVpbmdIb3ZlcmVkLCBpbnNlcnRCZWZvcmUgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2JlZm9yZScgOiAnYWZ0ZXInKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYWdTdGF0ZS5kaXNwYXRjaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5kcmFnU3RhdGUudmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiQmVpbmdIb3ZlcmVkOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJCZWluZ0RyYWdnZWQ6ICcnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSA6IG51bGx9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0YWJzLm1hcCgoeyBuYW1lLCBrZXksIGxpbmssIG9uQ2xpY2ssIGRyYWdnYWJsZSB9LCBpZHgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNBY3RpdmUgPSBhY3RpdmVUYWIgPT09IGtleSB8fCAoYWN0aXZlVGFiID09PSAnJCcgJiYgaWR4ID09PSAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qge2RyYWdTdGF0ZX0gPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lID0gbmFtZSB8fCBMYChOYW1ubMO2cyBmbGlrKWA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiA8UmVhY3QuRnJhZ21lbnQga2V5PXtrZXl9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpbnNlcnRCZWZvcmUgJiYgdGFiQmVpbmdIb3ZlcmVkID09PSBrZXkgPyA8bGkgY2xhc3NOYW1lPVwiZHJvcC10YXJnZXRcIiBvbkRyYWdPdmVyPXtldiA9PiBldi5wcmV2ZW50RGVmYXVsdCgpfT4mbmJzcDs8L2xpPiA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQWN0aXZlID8gXCJhY3RpdmVQYWdlXCIgOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXkgPT09IHRhYkJlaW5nRHJhZ2dlZCA/IFwiZHJhZy1zb3VyY2VcIiA6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRhYmxlVGFicyAmJiBkcmFnZ2FibGUgPyBcImRyYWdnYWJsZVwiIDogXCJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXS5maWx0ZXIoeD0+eCkuam9pbignICcpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlPXtzb3J0YWJsZVRhYnMgJiYgZHJhZ2dhYmxlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25EcmFnU3RhcnQ9e3NvcnRhYmxlVGFicyAmJiBkcmFnZ2FibGUgPyBldiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2LmRhdGFUcmFuc2Zlci5lZmZlY3RBbGxvd2VkID0gXCJtb3ZlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdTdGF0ZS5kaXNwYXRjaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZHJhZ1N0YXRlLnZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbkNsaWVudFg6IGV2LmNsaWVudFgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiQmVpbmdEcmFnZ2VkOiBrZXlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRHJhZ092ZXI9e3NvcnRhYmxlVGFicyA/IGV2ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhYkJlaW5nRHJhZ2dlZCA9PT0ga2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ1N0YXRlLmRpc3BhdGNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRyYWdTdGF0ZS52YWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkJlaW5nSG92ZXJlZDogJydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0YWJCZWluZ0RyYWdnZWQpIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXYuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3QgPSBcIm1vdmVcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIm9uRHJhZ092ZXI6IFwiICsgbmFtZSArIFwiLiBpZHg6IFwiICsgaWR4ICsgXCIuIG90aGVySWR4OiBcIiArIG90aGVySWR4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ1N0YXRlLmRpc3BhdGNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5kcmFnU3RhdGUudmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiQmVpbmdIb3ZlcmVkOiBrZXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0QmVmb3JlOiBvcmlnaW5DbGllbnRYID4gZXYuY2xpZW50WH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRHJhZ0VuZD17ZXYgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYWdTdGF0ZS5kaXNwYXRjaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZHJhZ1N0YXRlLnZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkJlaW5nSG92ZXJlZDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiQmVpbmdEcmFnZ2VkOiAnJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmsgPyBsaW5rLnN0YXJ0c1dpdGgoXCI6XCIpID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj17cHJlc2VydmVJbXBlcnNvbmF0aW9uUXVlcnkobGluay5zdWJzdHIoMSksIHt9KX0+e25hbWV9PC9hPiA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMaW5rIHRvPXtsaW5rfT57bmFtZX08L0xpbms+IDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljayA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgb25DbGljaz17b25DbGlja30+e25hbWV9PC9hPiA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyFpbnNlcnRCZWZvcmUgJiYgdGFiQmVpbmdIb3ZlcmVkID09PSBrZXkgPyA8bGkgY2xhc3NOYW1lPVwiZHJvcC10YXJnZXRcIiAgb25EcmFnT3Zlcj17ZXYgPT4gZXYucHJldmVudERlZmF1bHQoKX0+Jm5ic3A7PC9saT4gOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1JlYWN0LkZyYWdtZW50PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YnV0dG9ucyAmJiBidXR0b25zLm1hcCgoYnRuLCBpZHgpID0+IDxsaSBjbGFzc05hbWU9XCJhY3Rpb24tdGFiXCIga2V5PXtgYnRuJHtpZHh9YH0+e2J0bn08L2xpPil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC91bD4pfVxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9MYXp5Q29udGVudD5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgPC8+KX1cclxuICAgICAgICAgICAgICAgICAgPC9MYXp5Q29udGVudD5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIClcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBCYW5uZXIgPSAocHJvcHM6IEJhbm5lclByb3BzKSA9PiA8TGF6eUJhbm5lciBsYXp5UHJvcHM9e25ldyBFbWl0dGVyPEJhbm5lclByb3BzPihwcm9wcyl9IC8+XHJcblxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBEaWFsb2dzIH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2RpYWxvZ3MnO1xyXG5pbXBvcnQgeyBXaXRoR3JhcGhzLCBLZWRCYWNrZW5kUmVwbyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IENvdXJzZUluc3RhbmNlLCBDb3Vyc2VUYWIsIENvdXJzZUJsb2NrIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBEaWFsb2dzQ29udGV4dCB9IGZyb20gJy4vZGlhbG9nLWNvbnRleHQnO1xyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICAgIGRpYWxvZ3M6IGFueVtdO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG59XHJcblxyXG5leHBvcnQgY29uc3Qgc2V0dXBEaWFsb2dzID0gPFAgZXh0ZW5kcyBvYmplY3Q+KENvbXBvbmVudDogUmVhY3QuQ29tcG9uZW50VHlwZTxQPikgPT5cclxuICBjbGFzcyBEaWFsb2dDb250ZW50IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLCBTdGF0ZT4ge1xyXG4gICAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XHJcbiAgICAgIHN1cGVyKHByb3BzKTtcclxuICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICBkaWFsb2dzOiBbXVxyXG4gICAgICB9O1xyXG4gICAgICB0aGlzLm9wZW5EaWFsb2cgPSB0aGlzLm9wZW5EaWFsb2cuYmluZCh0aGlzKTtcclxuICAgICAgdGhpcy5jbG9zZURpYWxvZyA9IHRoaXMuY2xvc2VEaWFsb2cuYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBvcGVuRGlhbG9nKGRpYWxvZykge1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHsgZGlhbG9nczogWy4uLnRoaXMuc3RhdGUuZGlhbG9ncywgZGlhbG9nXSB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZURpYWxvZygpIHtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGRpYWxvZ3M6IHRoaXMuc3RhdGUuZGlhbG9ncy5zbGljZSgwLCB0aGlzLnN0YXRlLmRpYWxvZ3MubGVuZ3RoIC0gMSkgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICBjb25zdCB7IGRpYWxvZ3MgfSA9IHRoaXMuc3RhdGU7XHJcbiAgICAgIHJldHVybiA8RGlhbG9nc0NvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3tvcGVuRGlhbG9nIDogdGhpcy5vcGVuRGlhbG9nLCBjbG9zZURpYWxvZzp0aGlzLmNsb3NlRGlhbG9nfX0+XHJcbiAgICAgICAgPENvbXBvbmVudCB7Li4udGhpcy5wcm9wcyBhcyBQfT48L0NvbXBvbmVudD5cclxuICAgICAgICA8RGlhbG9ncyBkaWFsb2dzPXtkaWFsb2dzfSBwb3BEaWFsb2c9e3RoaXMuY2xvc2VEaWFsb2d9IC8+XHJcbiAgICAgPC9EaWFsb2dzQ29udGV4dC5Qcm92aWRlcj5cclxuICAgIH1cclxuICB9IiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuZXhwb3J0IGNvbnN0IERpYWxvZ3NDb250ZXh0ID0gUmVhY3QuY3JlYXRlQ29udGV4dCh7b3BlbkRpYWxvZzogbnVsbCwgY2xvc2VEaWFsb2c6IG51bGx9KTsiLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBmdXR1cmVBYmlsaXRpZXMgfSBmcm9tICcuLi8uLi8uLi9jb250cmFjdHMva2VkLW1vZGVscyc7XHJcbmltcG9ydCB7IE9wZW5DbG9zZUJveCB9IGZyb20gJy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9vcGVuLWNsb3NlLWJveCc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHRpdGxlOiBzdHJpbmdcclxuICBzZWxlY3RlZEZBczogc3RyaW5nW11cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IEZ1dHVyZUFiaWxpdGllc0JveCA9ICh7XHJcbiAgdGl0bGUsXHJcbiAgc2VsZWN0ZWRGQXNcclxufTogUHJvcHMpID0+IDxPcGVuQ2xvc2VCb3ggdGl0bGU9ezxwPnt0aXRsZX08L3A+fSBjbGFzc05hbWU9XCJsYXJnZXJcIj5cclxuICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJpbGl0eUxpc3RcIj5cclxuICAgICAge3NlbGVjdGVkRkFzLm1hcChmYSA9PlxyXG4gICAgICAgIDxkaXYga2V5PXtmYX0gY2xhc3NOYW1lPVwiY29udGVudFBhcnRcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudFRleHRcIj5cclxuICAgICAgICAgICAgPHA+e2ZhfTwvcD5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICApfVxyXG4gICAgPC9kaXY+XHJcbjwvT3BlbkNsb3NlQm94PlxyXG4iLCJpbXBvcnQgUmVhY3QsIHsgU3VzcGVuc2UgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IFdvcmRCYW5rQ29udGVudFNldHRpbmdzIH0gZnJvbSAnLi4vdmlld2VyLWVkaXRvci9jb3Vyc2UtY29udGVudHMvd29yZC1iYW5rLWNvbnRlbnQtc2V0dGluZ3MnO1xyXG5pbXBvcnQgeyBFbGxpcHNpc0xvYWRlciB9IGZyb20gJy4uLy4uL2NvdXJzZS1idWlsZGVyL3N1Yi1jb21wb25lbnRzL2VsbGlwc2lzLWxvYWRlcic7XHJcbmltcG9ydCB7IGNmZyB9IGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvS0VELmNmZyc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHN1YmplY3Q6IHN0cmluZztcclxuICBzdGVwOiBudW1iZXI7XHJcbiAgb25TZWxlY3Q6IChzZWxlY3RlZFdvcmRCYW5rOiB7bmFtZTogc3RyaW5nLCB1cmw6IHN0cmluZ30pID0+IHZvaWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBTZWxlY3RXb3JkQmFuayA9ICh7c3ViamVjdCwgc3RlcCwgb25TZWxlY3R9OiBQcm9wcykgPT4gPGRpdiBzdHlsZT17e21pbkhlaWdodDogNDAwfX0+PFN1c3BlbnNlIGZhbGxiYWNrPXs8RWxsaXBzaXNMb2FkZXIgLz59PlxyXG4gICAgPFdvcmRCYW5rQ29udGVudFNldHRpbmdzIHN1YmplY3ROYW1lPXtzdWJqZWN0fSBzdGVwTm89e3N0ZXB9IG9uQ2hhbmdlPXsoe25hbWUsIGtleX0pID0+IHtcclxuICAgICAgICBjb25zdCB1cmwgPSBgJHtjZmcuS0VEX1dPUkRCQU5LU19VUkx9P3N1YmplY3Q9JHtzdWJqZWN0fSZzdGVwPSR7c3RlcH0mbGlzdD0ke2tleX1gO1xyXG4gICAgICAgIG9uU2VsZWN0KHtuYW1lLCB1cmx9KTtcclxuICAgICAgfVxyXG4gICAgfSAvPlxyXG4gIDwvU3VzcGVuc2U+XHJcbjwvZGl2PjtcclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBsZWZ0OiBSZWFjdC5SZWFjdE5vZGU7XHJcbiAgcmlnaHQ6IFJlYWN0LlJlYWN0Tm9kZTtcclxuICByaWdodFdpZHRoOiAxIHwgMiB8IDMgfCA0IHwgNSB8IDYgfCA3IHwgOCB8wqA5IHwgMTAgfCAxMTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IFR3b0NvbHVtbnNQYWdlID0gKHsgbGVmdCwgcmlnaHQsIHJpZ2h0V2lkdGggfTogUHJvcHMpID0+IChcclxuICA8ZGl2IGNsYXNzTmFtZT1cInN2LXJvdyBzdi1sYXlvdXRcIj5cclxuICAgIDxkaXYgY2xhc3NOYW1lPVwic3YtbGF5b3V0IHN2LXNraXAtc3BhY2VyIHN2LWNvbHVtbi0xMlwiPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInN2LXNwYWNlci0yMHB4dnQgc3YtdmVydGljYWwgc3YtbGF5b3V0IHN2LXNraXAtc3BhY2VyXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYWdlY29udGVudCBzdi1sYXlvdXQgc3Ytc3BhY2VyLTIwcHh2dCBzdi1za2lwLXNwYWNlclwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdi1yb3cgc3YtbGF5b3V0IHN2LXNraXAtc3BhY2VyXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgc3YtbGF5b3V0IHN2LXNraXAtc3BhY2VyIHN2LWNvbHVtbi0kezEyLXJpZ2h0V2lkdGh9YH0+XHJcbiAgICAgICAgICAgICAge2xlZnR9XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YHN2LWxheW91dCBzdi1jb2x1bW4tJHtyaWdodFdpZHRofWB9PlxyXG4gICAgICAgICAgICAgIHtyaWdodH1cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICA8L2Rpdj5cclxuKTtcclxuIiwiaW50ZXJmYWNlIE9yZGVyZWREb2N1bWVudCB7XHJcbiAgaWQ6IHN0cmluZztcclxuICBvcmRlcjogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVvcmRlcihkb2NzOiBPcmRlcmVkRG9jdW1lbnRbXSwgc291cmNlSWQ6IHN0cmluZywgdGFyZ2V0SWQ6IHN0cmluZywgcGxhY2VtZW50OiAnYmVmb3JlJyB8ICdhZnRlcicpIHtcclxuICBjb25zdCBkb2NzV2l0aElkeCA9IGRvY3MubWFwKChkb2MsIGlkeCkgPT4gKHtkb2MsIGlkeH0pKTtcclxuICBjb25zdCBzb3VyY2VXaXRoSWR4ID0gZG9jc1dpdGhJZHguZmlsdGVyKCh7ZG9jfSkgPT4gZG9jLmlkID09PSBzb3VyY2VJZClbMF07XHJcbiAgY29uc3QgdGFyZ2V0V2l0aElkeCA9IGRvY3NXaXRoSWR4LmZpbHRlcigoe2RvY30pID0+IGRvYy5pZCA9PT0gdGFyZ2V0SWQpWzBdO1xyXG4gIGlmIChzb3VyY2VXaXRoSWR4ICYmIHRhcmdldFdpdGhJZHgpIHtcclxuICAgIGNvbnN0IHRhcmdldElkeCA9IHRhcmdldFdpdGhJZHguaWR4O1xyXG4gICAgbGV0IG5ld09yZGVyID0gc291cmNlV2l0aElkeC5kb2Mub3JkZXI7XHJcbiAgICBpZiAocGxhY2VtZW50ID09PSAnYWZ0ZXInKSB7XHJcbiAgICAgIC8vIFBsYWNlIHNvdXJjZSBhZnRlciB0YXJnZXRcclxuICAgICAgaWYgKHRhcmdldElkeCA9PT0gZG9jcy5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgLy8gVGFyZ2V0IGlzIGxhc3RcclxuICAgICAgICBuZXdPcmRlciA9IERhdGUubm93KCk7IC8vIERhdGUubm93KCkgaXMgYWx3YXlzIGxhc3QgKHVubGVzcyBhIHRhYiBpcyBtZWFuaW5nZnVsbHkgZ2l2ZW4gYSBmdXR1cmUgb3JkZXIgLSB0aGVuIGxldCBpdCBzdGF5IGxhc3QhKVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIEdpdmUgYW4gb3JkZXIgYmV0d2VlbiB0YXJnZXQgYW5kIGl0cyBjdXJyZW50IG5laWdoYm91ciB0byB0aGUgcmlnaHRcclxuICAgICAgICBuZXdPcmRlciA9IGRvY3NbdGFyZ2V0SWR4XS5vcmRlciArIE1hdGgucmFuZG9tKCkgKiAoZG9jc1t0YXJnZXRJZHgrMV0ub3JkZXIgLSBkb2NzW3RhcmdldElkeF0ub3JkZXIpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBQbGFjZSBzb3VyY2UgYmVmb3JlIHRhcmdldFxyXG4gICAgICBpZiAodGFyZ2V0SWR4ID09PSAwKSB7XHJcbiAgICAgICAgLy8gVGFyZ2V0IGlzIGZpcnN0XHJcbiAgICAgICAgbmV3T3JkZXIgPSBNYXRoLnJvdW5kKGRvY3NbMF0ub3JkZXIgLSAxMDAgLSAxMDAwMCAqIE1hdGgucmFuZG9tKCkpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIEdpdmUgYW4gb3JkZXIgYmV0d2VlbiB0YXJnZXQgYW5kIGl0cyBjdXJyZW50IG5laWdoYm9yIHRvIHRoZSBsZWZ0XHJcbiAgICAgICAgbmV3T3JkZXIgPSBkb2NzW3RhcmdldElkeC0xXS5vcmRlciArIE1hdGgucmFuZG9tKCkgKiAoZG9jc1t0YXJnZXRJZHhdLm9yZGVyIC0gZG9jc1t0YXJnZXRJZHgtMV0ub3JkZXIpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBuZXdPcmRlcjtcclxuICB9XHJcbiAgcmV0dXJuIDA7XHJcbn1cclxuIiwiaW1wb3J0IHsgQ291cnNlSW5zdGFuY2UsIENvdXJzZVRhYiwgQ291cnNlQmxvY2ssIFN0ZXBDb3Vyc2VJbnN0YW5jZSB9IGZyb20gXCJrZWRiYWNrZW5kL21vZGVsc1wiO1xyXG5pbXBvcnQgeyBmbGF0dGVuLCBkaXN0aW5jdCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjb21wdXRlVGFza1RhZ3NBbmRTdWJqZWN0KGNvdXJzZTogQ291cnNlSW5zdGFuY2UsIHRhYjogQ291cnNlVGFiLCBibG9jazogQ291cnNlQmxvY2spIHtcclxuICBjb25zdCB0YWdzID0gW2NvdXJzZS5pZF07ICBcclxuICBcclxuICBpZiAodGFiLnRhYkNsYXNzID09PSAnbWlzc2lvbi10YWInKSB7XHJcbiAgICAvLyBJZiB0YXNrIGJlbG9uZ3MgdG8gYSBtaXNzaW9uIHRhYixcclxuICAgIC8vIGl0IHNob3VsZCBiZSB0YWdnZWQgd2l0aCBhbGwgdGhlIHN1YmplY3RzIG9mIHRoZSBjb3Vyc2VcclxuICAgIGNvbnN0IG90aGVyU3ViamVjdFRhYnMgPSBjb3Vyc2UudGFicyFcclxuICAgICAgLmZpbHRlcih0YWIgPT4gdGFiLnRhYkNsYXNzID09PSAnc3ViamVjdC10YWInKTtcclxuXHJcbiAgICBjb25zdCBzdWJqZWN0cyA9IGRpc3RpbmN0KG90aGVyU3ViamVjdFRhYnMubWFwKHRhYiA9PiB0YWIuc3ViamVjdCksIHMgPT4gcy5zdWJqZWN0Q29kZSk7XHJcbiAgICBjb25zdCBjb3Vyc2VDb2RlVGFncyA9IGRpc3RpbmN0KGZsYXR0ZW4oXHJcbiAgICAgIG90aGVyU3ViamVjdFRhYnMubWFwKFxyXG4gICAgICAgIHRhYiA9PiB0YWIudGFncy5maWx0ZXIodGFnID0+IHRhZy5zdGFydHNXaXRoKFwiY291cnNlOlwiKSlcclxuICAgICAgKVxyXG4gICAgKSk7XHJcblxyXG4gICAgdGFncy5wdXNoKC4uLnN1YmplY3RzLm1hcChzID0+IFwic3ViOlwiICsgcy5zdWJqZWN0Q29kZSkpO1xyXG4gICAgdGFncy5wdXNoKC4uLmNvdXJzZUNvZGVUYWdzKTtcclxuICAgIGNvbnN0IHN1YmplY3QgPSBzdWJqZWN0cy5tYXAocyA9PiBzLnN1YmplY3ROYW1lKS5qb2luKCcsICcpO1xyXG4gICAgcmV0dXJuIHsgdGFncywgc3ViamVjdCB9O1xyXG4gIH0gZWxzZSB7XHJcbiAgICB0YWdzLnB1c2goLi4uKHRhYiB8fCBibG9jaykudGFncy5maWx0ZXIodGFnID0+IHRhZy5zdGFydHNXaXRoKFwiY291cnNlOlwiKSkpO1xyXG4gICAgaWYgKGNvdXJzZS50eXBlID09PSAndGhlbWUtY291cnNlJylcclxuICAgICAgdGFncy5wdXNoKC4uLnRhYi50YWdzLmZpbHRlcih0YWcgPT4gdGFnLnN0YXJ0c1dpdGgoXCJzdWI6XCIpKSk7XHJcbiAgICBlbHNlXHJcbiAgICAgIHRhZ3MucHVzaCguLi5ibG9jay50YWdzLmZpbHRlcih0YWcgPT4gdGFnLnN0YXJ0c1dpdGgoXCJzdWI6XCIpKSk7XHJcbiAgICBjb25zdCBzdWJqZWN0ID0gY291cnNlLnR5cGUgPT09ICd0aGVtZS1jb3Vyc2UnID9cclxuICAgICAgdGFiLnN1YmplY3Quc3ViamVjdE5hbWUgOlxyXG4gICAgICAoY291cnNlIGFzIFN0ZXBDb3Vyc2VJbnN0YW5jZSkuc3ViamVjdC5zdWJqZWN0TmFtZTtcclxuICAgIHJldHVybiB7IHRhZ3MsIHN1YmplY3QgfTtcclxuICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCB7IENvdXJzZUluc3RhbmNlIH0gZnJvbSBcImtlZGJhY2tlbmQvbW9kZWxzXCI7XHJcbmltcG9ydCB7IGRpc3RpbmN0LCBmbGF0dGVuIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFN1YmplY3RDb2RlcyAodGFnczogc3RyaW5nW10pIHtcclxuICByZXR1cm4gZGlzdGluY3QoKHRhZ3MgfHzCoFtdKVxyXG4gICAgLmZpbHRlcih0YWcgPT4gdGFnLnN0YXJ0c1dpdGgoXCJzdWI6XCIpKVxyXG4gICAgLm1hcCh0YWcgPT4gdGFnLnN1YnN0cihcInN1YjpcIi5sZW5ndGgpKVxyXG4gICk7O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2Nob29sWWVhcnModGFnczogc3RyaW5nW10pIHtcclxuICByZXR1cm4gZGlzdGluY3QoKHRhZ3MgfHwgW10pXHJcbiAgICAuZmlsdGVyKHRhZyA9PiB0YWcuc3RhcnRzV2l0aChcImNvdXJzZTpcIikpXHJcbiAgICAubWFwKHRhZyA9PiB0YWcuc3Vic3RyKHRhZy5pbmRleE9mKFwifFwiKSArIDEpKSAvLyBTY2hvb2wgeWVhciBpcyBjb25jYXRlbmF0ZWQgYXMgcGlwZSArIHNjaG9vbHllYXIuIEV4YW1wbGU6IFwiR1JHUkZZUzAxfDQtNlwiXHJcbiAgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVDb3Vyc2VJbnN0YW5jZVRhZ3MgKHRhZ3M6IHN0cmluZ1tdLCBzdWJqZWN0Q29kZXM6IHN0cmluZ1tdLCBzY2hvb2xZZWFyczogc3RyaW5nW10pIHtcclxuICBjb25zdCBvdGhlclRhZ3MgPSAodGFncyB8fCBbXSkuZmlsdGVyKHRhZyA9PiAhdGFnLnN0YXJ0c1dpdGgoXCJjb3Vyc2U6XCIpICYmICF0YWcuc3RhcnRzV2l0aChcInN1YjpcIikpO1xyXG4gIGNvbnN0IHN1YmplY3RUYWdzID0gc3ViamVjdENvZGVzLm1hcChzdWIgPT4gXCJzdWI6XCIgKyBzdWIpO1xyXG4gIGNvbnN0IGNvdXJzZVRhZ3MgPSBmbGF0dGVuKFxyXG4gICAgICAgIHN1YmplY3RDb2Rlcy5tYXAoc3ViID0+XHJcbiAgICAgICAgICBzY2hvb2xZZWFycy5tYXAoc2Nob29sWWVhciA9PlxyXG4gICAgICAgICAgICBcImNvdXJzZTpcIiArIHN1YiArIFwifFwiICsgc2Nob29sWWVhcikpKTtcclxuICByZXR1cm4gb3RoZXJUYWdzXHJcbiAgICAuY29uY2F0KHN1YmplY3RUYWdzKVxyXG4gICAgLmNvbmNhdChjb3Vyc2VUYWdzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVUYWdzRnJvbVNjaG9vbFllYXJzKHRhZ3M6IHN0cmluZ1tdLCBzY2hvb2xZZWFyczogc3RyaW5nW10pIHtcclxuICAvL3NjaG9vbFllYXJzID0gc2Nob29sWWVhcnMubWFwKGFmdGVyQ29sb24pO1xyXG4gIGNvbnN0IHN1YmplY3RDb2RlcyA9IGdldFN1YmplY3RDb2Rlcyh0YWdzKTtcclxuICByZXR1cm4gY29tcHV0ZUNvdXJzZUluc3RhbmNlVGFncyh0YWdzLCBzdWJqZWN0Q29kZXMsIHNjaG9vbFllYXJzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVUYWdzRnJvbVN1YmplY3RDb2Rlcyh0YWdzOiBzdHJpbmdbXSwgc3ViamVjdENvZGVzOiBzdHJpbmdbXSkge1xyXG4gIC8vc3ViamVjdENvZGVzID0gc3ViamVjdENvZGVzLm1hcChhZnRlckNvbG9uKTtcclxuICBjb25zdCBzY2hvb2xZZWFycyA9IGdldFNjaG9vbFllYXJzKHRhZ3MpO1xyXG4gIHJldHVybiBjb21wdXRlQ291cnNlSW5zdGFuY2VUYWdzKHRhZ3MsIHN1YmplY3RDb2Rlcywgc2Nob29sWWVhcnMpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhZnRlckNvbG9uIChzdHI6IHN0cmluZykge1xyXG4gIGNvbnN0IHBDb2xvbiA9IHN0ci5pbmRleE9mKCc6Jyk7XHJcbiAgcmV0dXJuIHBDb2xvbiA+PSAwID9cclxuICAgIHN0ci5zdWJzdHIocENvbG9uICsgMSkgOlxyXG4gICAgc3RyO1xyXG59XHJcbiIsIlxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q291cnNlQ29kZXNGcm9tVGFncyh0YWdzOiBzdHJpbmdbXSkge1xyXG4gIHJldHVybiAodGFncyB8fCBbXSlcclxuICAgIC5maWx0ZXIodGFnID0+IHRhZy5zdGFydHNXaXRoKFwiY291cnNlOlwiKSlcclxuICAgIC5tYXAoY291cnNlVGFnID0+IGNvdXJzZVRhZy5zdWJzdHIoXCJjb3Vyc2U6XCIubGVuZ3RoKSk7XHJcbn1cclxuIiwiaW1wb3J0IHsgZGIgfSBmcm9tICcuLi8uLi8uLi9nbG9iYWxzL2RiJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXREcmFmdElkKHNjaG9vbDogc3RyaW5nLCBjb3Vyc2VJZDogc3RyaW5nKSB7XHJcbiAgcmV0dXJuIGRiLnNjaG9vbHMubmFtZShzY2hvb2wpLnNpbmdsZSgpIC8vIEdldCB0aGUgc2Nob29sIE9ic2VydmFibGVcclxuICAgIC5zd2l0Y2hNYXAoc2Nob29sID0+XHJcbiAgICAgIGRiLmJyYW5jaGVzXHJcbiAgICAgICAgLmhhc0VkZ2VzRnJvbShbc2Nob29sLm9mZmljaWFsQnJhbmNoSWRdKSAvLyBUaGUgb2ZmaWNpYWwgZHJhZnQgaGFzIGVkZ2VzIGZyb20gdGhlIG9mZmljaWFsIHNjaG9vbCBicmFuY2hcclxuICAgICAgICAubmFtZShcImRyYWZ0XCIpIC8vIFRoZXJlIG1pZ2h0IGJlIG90aGVyIHBlcnNvbmFsIGRyYWZ0cyBpbiBmdXR1cmUuIFJlcXVpcmVtZW50IG9mIHRoZSBjb21tb24gZHJhZnQgaXMgdGhhdCBpdCBpcyBuYW1lZCBcImRyYWZ0XCJcclxuICAgICAgICAudGFncyhjb3Vyc2VJZCkgLy8gRmluZCB0aGUgb25lIHRhZ2dlZCB3aXRoIHRoZSBjb3Vyc2VJZC4gVGhlcmUgYXJlIHNldmVyYWwgZHJhZnRzIC0gb25lIGZvciBlYWNoIGNvdXJzZS5cclxuICAgICAgICAuaWRzT25seSgpXHJcbiAgICAgICAgLm1hcCgoe2lkfSkgPT4gaWQpXHJcbiAgICAgICAgLmZpcnN0KClcclxuICAgICk7XHJcbn1cclxuXHJcbiIsImltcG9ydCB7IEFiaWxpdHksIENlbnRyYWxDb250ZW50LCBLbm93bGVkZ2VSZXF1aXJlbWVudCwgQ291cnNlIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBWYWx1ZSwgQ29sbGVjdGlvbiwgRW1pdHRlciB9IGZyb20gJ2tlZGJhY2tlbmQvb2JzZXJ2YWJsZSc7XHJcbmltcG9ydCB7IGRiIH0gZnJvbSAnLi4vLi4vLi4vZ2xvYmFscy9kYic7XHJcbmltcG9ydCB7IGdldE9yZGVyZWREb2NzIH0gZnJvbSAnLi9vcmRlcmVkLXJlcXVpcmVtZW50cyc7XHJcbmltcG9ydCB7IFdpdGhHcmFwaHMgfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5cclxuXHJcbmV4cG9ydCB0eXBlIENvdXJzZVdpdGhSZXF1aXJlbWVudHMgPSBXaXRoR3JhcGhzPENvdXJzZSwgXCJhYmlsaXRpZXNcIiB8IFwiY2VudHJhbENvbnRlbnRcIiB8IFwia25vd2xlZGdlUmVxdWlyZW1lbnRzXCI+O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFN0YW5kYXJkQ291cnNlc1dpdGhPcmRlcmVkUmVxdWlyZW1lbnRzKGNvdXJzZUNvZGVzOiBzdHJpbmdbXSk6IFZhbHVlPENvdXJzZVdpdGhSZXF1aXJlbWVudHNbXT4ge1xyXG4gIGNvbnN0IGNvdXJzZUNvZGVUYWdzID0gY291cnNlQ29kZXMubWFwKGNvZGUgPT4gY29kZS5zdGFydHNXaXRoKCdjb3Vyc2U6JykgPyBjb2RlIDogXCJjb3Vyc2U6XCIgKyBjb2RlKTtcclxuICBpZiAoY291cnNlQ29kZVRhZ3MubGVuZ3RoID09PSAwKSByZXR1cm4gbmV3IEVtaXR0ZXIoW10pO1xyXG4gIHJldHVybiBkYi5jb3Vyc2VzLmluY2x1ZGUoXCJhYmlsaXRpZXNcIiwgXCJjZW50cmFsQ29udGVudFwiLCBcImtub3dsZWRnZVJlcXVpcmVtZW50c1wiKVxyXG4gICAgLnRhZ3MoLi4uY291cnNlQ29kZVRhZ3MpXHJcbiAgICAuZmlsdGVyKGNvdXJzZSA9PiBjb3Vyc2UuaXNUZW1wbGF0ZSkgLy8gQlVHQlVHOiBJbiBLRywgd2Ugd291bGQgbmVlZCB0aGlzIGZpbHRlciwgbm90IEtTLiBOZWVkIGFub3RoZXIgYXV0aG9yaXplZCB3YXkgb2YgZ2V0dGluZyB0aGUgc3RhbmRhcmQgY291cnNlIG9ubHkhXHJcbiAgICAubWFwKGNvdXJzZSA9PiAoe1xyXG4gICAgICAuLi5jb3Vyc2UsXHJcbiAgICAgIGFiaWxpdGllczogZ2V0T3JkZXJlZERvY3MoY291cnNlLmFiaWxpdGllcywgY291cnNlLmFiaWxpdGllc09yZGVyKSxcclxuICAgICAgY2VudHJhbENvbnRlbnQ6IGdldE9yZGVyZWREb2NzKGNvdXJzZS5jZW50cmFsQ29udGVudCwgY291cnNlLmNlbnRyYWxDb250ZW50T3JkZXIpLFxyXG4gICAgICBrbm93bGVkZ2VSZXF1aXJlbWVudHM6IGdldE9yZGVyZWREb2NzKGNvdXJzZS5rbm93bGVkZ2VSZXF1aXJlbWVudHMsIGNvdXJzZS5rbm93bGVkZ2VSZXF1aXJlbWVudHNPcmRlcilcclxuICAgIH0pKS50b1ZhbHVlKClcclxufVxyXG4iLCJpbXBvcnQgZW52IGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCB7IGlzVGVhY2hlckF0U2Nob29sIH0gZnJvbSAnLi4vLi4vLi4vYWNjZXNzLWNvbnRyb2wnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzRW1wbG95ZWUoYXRTY2hvb2w/OiBzdHJpbmcpIHtcclxuICByZXR1cm4gYXRTY2hvb2wgP1xyXG4gICAgaXNUZWFjaGVyQXRTY2hvb2woZW52LmN1cnJlbnRVc2VyLCBhdFNjaG9vbCkgfHwgZW52LmN1cnJlbnRVc2VyLnJvbGVzLmluY2x1ZGVzKFwiQURNSU5cIikgOlxyXG4gICAgZW52LmN1cnJlbnRVc2VyLnJvbGVzLnNvbWUocm9sZSA9PiByb2xlID09PSAnRU1QTE9ZRUUnIHx8IHJvbGUgPT09ICdBRE1JTicpO1xyXG59XHJcbiIsImltcG9ydCBlbnYgZnJvbSAnLi4vLi4vLi4vZ2xvYmFscy9LRUQuZW52J1xyXG5pbXBvcnQgeyBpc0FkbWluT3JUZWFjaGVyQXRTY2hvb2wgfSBmcm9tICcuLi8uLi8uLi9hY2Nlc3MtY29udHJvbCc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNLZWRTdGFmZigpIHtcclxuICByZXR1cm4gaXNBZG1pbk9yVGVhY2hlckF0U2Nob29sKGVudi5jdXJyZW50VXNlciwgXCJzdGFuZGFyZFwiKTtcclxufVxyXG4iLCJpbXBvcnQgeyBkYiwgZ2xvYmFsSWQgfSBmcm9tICcuLi8uLi8uLi9nbG9iYWxzL2RiJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBsaXN0Q291cnNlSW5zdGFuY2VzKCkge1xyXG4gIHJldHVybiBkYi5jb3Vyc2VJbnN0YW5jZXMuaGFzRWRnZXNGcm9tKFtnbG9iYWxJZF0pO1xyXG59XHJcbiIsImltcG9ydCB7IENvbGxlY3Rpb24sIEVtaXR0ZXIsIFZhbHVlIH0gZnJvbSAna2VkYmFja2VuZC9vYnNlcnZhYmxlJztcclxuaW1wb3J0IHsgVGFzayB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgZGIgfSBmcm9tICcuLi8uLi8uLi9nbG9iYWxzL2RiJztcclxuaW1wb3J0IHsgZmxhdHRlbiwgZGlzdGluY3QgfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IFdpdGhHcmFwaHMgfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5cclxuLyoqIENvdXJzZSAqL1xyXG5pbnRlcmZhY2UgT3JkZXJEZWZpbmluZ0RvYyB7XHJcbiAga25vd2xlZGdlUmVxdWlyZW1lbnRzT3JkZXI/OiBzdHJpbmdbXSAgIC8vIENvdXJzZVxyXG4gIGNlbnRyYWxDb250ZW50T3JkZXI/OiBzdHJpbmdbXSAgICAgICAgICAvLyBDb3Vyc2VcclxuICBhYmlsaXRpZXNPcmRlcj86IHN0cmluZ1tdICAgICAgICAgICAgICAgLy8gQ291cnNlICsgU3ViamVjdFxyXG59XHJcblxyXG4vKiogQ291cnNlLCBDb3Vyc2VJbnN0YW5jZSwgVGFzaywgTGVhcm5pbmdHb2Fsc0NvbnRlbnQgb3IgQ291cnNlQmxvY2sgKi9cclxuZXhwb3J0IGludGVyZmFjZSBSZXF1aXJlbWVudHNDb250YWluaW5nRG9jIHtcclxuICB0YWdzOiBzdHJpbmdbXTsgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ291cnNlICsgQ291cnNlSW5zdGFuY2UsIFRhc2tcclxuICBjZW50cmFsQ29udGVudD86IHtpZDogc3RyaW5nfVtdOyAgICAgICAgLy8gQ291cnNlICsgTGVhcm5pbmdHb2Fsc0NvbnRlbnQgKyBDb3Vyc2VCbG9jayArIFRhc2tcclxuICBrbm93bGVkZ2VSZXF1aXJlbWVudHM/OiB7aWQ6IHN0cmluZ31bXTsgLy8gQ291cnNlICsgTGVhcm5pbmdHb2Fsc0NvbnRlbnQgKyBDb3Vyc2VCbG9jayArIFRhc2tcclxuICBhYmlsaXRpZXM/OiB7aWQ6IHN0cmluZ31bXTsgLy8gQ291cnNlLCBMZWFybmluZ0dvYWxzQ29udGVudCwgQ291cnNlQmxvY2ssIFRhc2tcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldE9yZGVyZWREb2NzPFQgZXh0ZW5kcyB7aWQ6IHN0cmluZ30+KGRvY3M/OiBUW10sIG9yZGVyPzogc3RyaW5nW10sIHthcHBlbmRMZWZ0b3ZlcnN9ID0ge2FwcGVuZExlZnRvdmVyczpmYWxzZX0pIHtcclxuICAvLyBNYXJrIGRvYyBJRHMgdGhhdCB3aGVyZSBwcmVzZW50IGluIGdpdmVuICdvcmRlcicgYXJyYXkuXHJcbiAgLy8gV2lsbCBiZSB1c2VkIHRvIGZpbmQgbGVmdC1vdmVycyB0aGF0IHdlcmUgbm90IHByZXNlbnQgaW4gdGhlICdvcmRlcicgYXJyYXkuXHJcbiAgY29uc3QgbWFya2VkRG9jczoge1tpZDogc3RyaW5nXTogdHJ1ZX0gPSB7fTtcclxuXHJcbiAgaWYgKCFkb2NzIHx8ICFvcmRlcikge1xyXG4gICAgLy8gU3BlY2lhbCBjYXNlOiBubyBkb2NzIG9yIG5vIG9yZGVyLiBEb24ndCBmYWlsLiBKdXN0IHJldHVybiBkb2NzIGFzIGlzLlxyXG4gICAgcmV0dXJuIGRvY3M7XHJcbiAgfVxyXG5cclxuICAvLyBNYXAgZ2l2ZW4gJ29yZGVyJyBhcnJheSB0byBjb3JyZXNwb25kaW5nIGRvY3MuIEFsc28gbWFyayBpbiBtYXJrZWREb2NzLlxyXG4gIGNvbnN0IHJlc3VsdCA9IChkb2NzICYmIG9yZGVyID9cclxuICAgIG9yZGVyLm1hcChpZCA9PiB7XHJcbiAgICAgIG1hcmtlZERvY3NbaWRdID0gdHJ1ZTtcclxuICAgICAgcmV0dXJuIGRvY3MuZmluZChkb2MgPT4gZG9jLmlkID09PSBpZCk7XHJcbiAgICB9KS5maWx0ZXIoZG9jID0+ICEhZG9jKSA6XHJcbiAgICBkb2NzKTtcclxuXHJcbiAgaWYgKGFwcGVuZExlZnRvdmVycykgeyAgICAgIFxyXG4gICAgLy8gSWYgYW55IGxlZnRvdmVycyBhcmUgdGhlcmUsIGNvbmNhdCB0aGVtIGF0IHRoZSBlbmQ6XHJcbiAgICBjb25zdCBsZWZ0T3ZlcnMgPSBkb2NzLmZpbHRlcihkb2MgPT4gIW1hcmtlZERvY3NbZG9jLmlkXSk7XHJcbiAgICByZXR1cm4gcmVzdWx0LmNvbmNhdChsZWZ0T3ZlcnMpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmVSZXF1aXJlbWVudE9yZGVyPFQgZXh0ZW5kcyBSZXF1aXJlbWVudHNDb250YWluaW5nRG9jPihvYmo6IFQsIG9yZGVyRGVmaW5lcj86IE9yZGVyRGVmaW5pbmdEb2MpOiBWYWx1ZTxUPiB7XHJcbiAgbGV0IG9yZGVyRGVmaW5pbmdEb2NPYnNlcnZhYmxlOiBWYWx1ZTxPcmRlckRlZmluaW5nRG9jW10+O1xyXG4gIGlmIChvcmRlckRlZmluZXIpIHtcclxuICAgIC8vIFVzZXIgcHJvdmlkZWQgdGhlIG9yZGVyRGVmaW5pbmcgZG9jICh1c2UgY2FzZSBpcyB3aGVuIG9iaiBpcyBhIENvdXJzZSBvciBTdWJqZWN0LCB3aGljaCBjb250YWlucyBpdHMgb3JkZXIgYnkgaXRzZWxmLiBVc2VyIHRoZW4gcHJvdmlkZXMgdGhlIENvdXJzZSBvciBTdWJqZWN0IGluIGJvdGggYXJncylcclxuICAgIG9yZGVyRGVmaW5pbmdEb2NPYnNlcnZhYmxlID0gbmV3IEVtaXR0ZXIoW29yZGVyRGVmaW5lcl0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBjb25zdCBjb3Vyc2VDb2RlcyA9IG9iai50YWdzLmZpbHRlcih0YWcgPT4gdGFnLnN0YXJ0c1dpdGgoXCJjb3Vyc2U6XCIpKTtcclxuICAgIGlmIChjb3Vyc2VDb2Rlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIG5ldyBFbWl0dGVyKG9iaik7IC8vIE5vIGNvdXJzZSB0YWdzLiBOb3QgcG9zc2libGUgdG8gcmVzb2x2ZSBvcmRlci5cclxuICAgIH1cclxuICAgIG9yZGVyRGVmaW5pbmdEb2NPYnNlcnZhYmxlID0gZGIuY291cnNlcy50YWdzKC4uLmNvdXJzZUNvZGVzKS50b1ZhbHVlKCk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gb3JkZXJEZWZpbmluZ0RvY09ic2VydmFibGUubWFwKG9yZGVySG9sZGVycyA9PiB7XHJcbiAgICBjb25zdCBhYmlsaXRpZXNPcmRlciA9IGZsYXR0ZW4ob3JkZXJIb2xkZXJzLm1hcChvcmRlckhvbGRlciA9PiBvcmRlckhvbGRlci5hYmlsaXRpZXNPcmRlciB8fCBbXSkpO1xyXG4gICAgY29uc3QgY2NPcmRlciA9IGZsYXR0ZW4ob3JkZXJIb2xkZXJzLm1hcChvcmRlckhvbGRlciA9PiBvcmRlckhvbGRlci5jZW50cmFsQ29udGVudE9yZGVyIHx8IFtdKSk7XHJcbiAgICBjb25zdCBrck9yZGVyID0gZmxhdHRlbihvcmRlckhvbGRlcnMubWFwKG9yZGVySG9sZGVyID0+IG9yZGVySG9sZGVyLmtub3dsZWRnZVJlcXVpcmVtZW50c09yZGVyIHx8IFtdKSk7XHJcbiAgICBjb25zdCBvYmpDbG9uZSA9IE9iamVjdC5hc3NpZ24oe30sIG9iaik7XHJcbiAgICBpZiAob2JqQ2xvbmUuYWJpbGl0aWVzKSBvYmpDbG9uZS5hYmlsaXRpZXMgPSBnZXRPcmRlcmVkRG9jcyhvYmouYWJpbGl0aWVzLCBhYmlsaXRpZXNPcmRlcik7XHJcbiAgICBpZiAob2JqQ2xvbmUuY2VudHJhbENvbnRlbnQpIG9iakNsb25lLmNlbnRyYWxDb250ZW50ID0gZ2V0T3JkZXJlZERvY3Mob2JqLmNlbnRyYWxDb250ZW50LCBjY09yZGVyKTtcclxuICAgIGlmIChvYmpDbG9uZS5rbm93bGVkZ2VSZXF1aXJlbWVudHMpIG9iakNsb25lLmtub3dsZWRnZVJlcXVpcmVtZW50cyA9IGdldE9yZGVyZWREb2NzKG9iai5rbm93bGVkZ2VSZXF1aXJlbWVudHMsIGtyT3JkZXIpO1xyXG4gICAgcmV0dXJuIG9iakNsb25lO1xyXG4gIH0pO1xyXG59XHJcbiIsImltcG9ydCB7IEtlZEJhY2tlbmRSZXBvIH0gZnJvbSBcImtlZGJhY2tlbmQvcmVwb1wiO1xyXG5pbXBvcnQgeyBSb3V0ZUNvbXBvbmVudFByb3BzIH0gZnJvbSAncmVhY3Qtcm91dGVyJztcclxuaW1wb3J0IHsgZGIgfSBmcm9tICcuLi8uLi8uLi9nbG9iYWxzL2RiJztcclxuaW1wb3J0IGVudiBmcm9tICcuLi8uLi8uLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5pbXBvcnQgeyBDb3Vyc2VJbnN0YW5jZSB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUHVibGlzaENvdXJzZUFyZ3VtZW50cyB7XHJcbiAgc2Nob29sOiBzdHJpbmc7XHJcbiAgZHJhZnRSZXBvOiBLZWRCYWNrZW5kUmVwbztcclxuICBjb3Vyc2U6IENvdXJzZUluc3RhbmNlO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHVibGlzaENvdXJzZSh7c2Nob29sLCBkcmFmdFJlcG8sIGNvdXJzZX06IFB1Ymxpc2hDb3Vyc2VBcmd1bWVudHMpIHtcclxuICBsZXQgZGVzdGluYXRpb25SZXBvOiBLZWRCYWNrZW5kUmVwbztcclxuICBpZiAoc2Nob29sID09PSBcInN0YW5kYXJkXCIpIHtcclxuICAgIC8vIEVkaXRpbmcgU3RhbmRhcmQgU2Nob29sIHNob3VsZCBtZXJnZSB0byByZWFsaXR5LlxyXG4gICAgZHJhZnRSZXBvLm1lcmdlKCk7XHJcbiAgICBkZXN0aW5hdGlvblJlcG8gPSBkYjtcclxuICB9XHJcbiAgZWxzZSB7XHJcbiAgICAvLyBFZGl0aW5nIGNlcnRhaW4gc2Nob29sIHNob3VsZCBtZXJnZSB0byBzY2hvb2wgYnJhbmNoLlxyXG4gICAgY29uc3Qgc2Nob29sQnJhbmNoSWQgPSBhd2FpdCBkYi5zY2hvb2xzLm5hbWUoc2Nob29sKS5zaW5nbGUoKS5tYXAoc2Nob29sID0+IHNjaG9vbC5vZmZpY2lhbEJyYW5jaElkKS5sb2FkKCk7XHJcbiAgICBkcmFmdFJlcG8ubWVyZ2Uoc2Nob29sQnJhbmNoSWQpO1xyXG4gICAgZGVzdGluYXRpb25SZXBvID0gZGIuYnJhbmNoKHNjaG9vbEJyYW5jaElkKTtcclxuICB9XHJcbiAgZGVzdGluYXRpb25SZXBvLmNvdXJzZUluc3RhbmNlcy51cGRhdGUoY291cnNlLCB7XHJcbiAgICBtb2RpZmllZERhdGU6IERhdGUubm93KCksXHJcbiAgICBtb2RpZmllZEJ5OiB7XHJcbiAgICAgIG5hbWU6IGVudi5jdXJyZW50VXNlci5kaXNwbGF5TmFtZSxcclxuICAgICAgdXJsOiBgbWFpbHRvOiR7ZW52LmN1cnJlbnRVc2VyLm1haWx9YFxyXG4gICAgfVxyXG4gIH0pO1xyXG4gIC8vYXdhaXQgZGIuc2F2ZU5vdygpO1xyXG4gIC8vaGlzdG9yeS5wdXNoKGAvJHtzY2hvb2x9L2NvdXJzZXMvJHtjb3Vyc2VJZH0vdGFicy8ke2FjdGl2ZVRhYiB8fCAnJCd9YCk7XHJcbn1cclxuXHJcbiIsImltcG9ydCB7IFRhc2ssIExlYXJuaW5nR29hbHNDb250ZW50IH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBjb21wYXJlUHJvcCwgZmxhdHRlbiB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgS2VkQmFja2VuZFJlcG8gfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBnZXRPcmRlcmVkRG9jcyB9IGZyb20gJy4vb3JkZXJlZC1yZXF1aXJlbWVudHMnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFNvcnRlZFRhc2tzKGNvbnRlbnQ6IExlYXJuaW5nR29hbHNDb250ZW50KSB7XHJcbiAgcmV0dXJuIGdldE9yZGVyZWREb2NzKGNvbnRlbnQudGFza3MsIGNvbnRlbnQudGFza09yZGVyLCB7YXBwZW5kTGVmdG92ZXJzOiB0cnVlfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjb21wdXRlVXBkYXRlZE9yZGVyPFQgZXh0ZW5kcyB7aWQ6IHN0cmluZ30+KFxyXG4gIGRvY3M6IFRbXSxcclxuICBjdXJyZW50T3JkZXI6IHN0cmluZ1tdIHwgdW5kZWZpbmVkLFxyXG4gIHNvdXJjZTogVCxcclxuICB0YXJnZXQ6IFQsXHJcbiAgcGxhY2VtZW50OiAnYmVmb3JlJyB8ICdhZnRlcicsXHJcbiAge2FwcGVuZExlZnRvdmVyc30gPSB7YXBwZW5kTGVmdG92ZXJzOiBmYWxzZX0pIDogc3RyaW5nW11cclxue1xyXG4gIGNvbnN0IG9yZGVyZWRJZHMgPSBnZXRPcmRlcmVkRG9jcyhkb2NzLCBjdXJyZW50T3JkZXIsIHthcHBlbmRMZWZ0b3ZlcnM6IHRydWV9KS5tYXAodCA9PiB0LmlkKTtcclxuICBjb25zdCBwbGFjZUJlZm9yZSA9IHBsYWNlbWVudCA9PT0gJ2JlZm9yZSc7XHJcblxyXG4gIGNvbnN0IHJlc3VsdCA9IGZsYXR0ZW4oXHJcbiAgICBvcmRlcmVkSWRzXHJcbiAgICAgIC5maWx0ZXIoaWQgPT4gaWQgIT09IHNvdXJjZS5pZCkgLy8gUmVtb3ZlIHNvdXJjZSBpZFxyXG4gICAgICAubWFwKGlkID0+IGlkICE9PSB0YXJnZXQuaWQgP1xyXG4gICAgICAgIC8vIFdlJ3JlIG5vdCBvbiB0YXJnZXRcclxuICAgICAgICBpZCA6XHJcbiAgICAgICAgLy8gV2UncmUgb24gdGFyZ2V0LiBQbGFjZSBiZWZvcmUgb3IgYWZ0ZXI/XHJcbiAgICAgICAgcGxhY2VCZWZvcmUgP1xyXG4gICAgICAgICAgW3NvdXJjZS5pZCwgaWRdIDpcclxuICAgICAgICAgIFtpZCwgc291cmNlLmlkXVxyXG4gICAgICApXHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgTCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgU3RyaXBHcmFwaHMsIEtlZEJhY2tlbmRSZXBvIH0gZnJvbSAna2VkYmFja2VuZC9yZXBvJztcclxuaW1wb3J0IHsgQ291cnNlSW5zdGFuY2UsIENvdXJzZVRhYiwgQ291cnNlQ29udGVudCwgUmljaFRleHRDb250ZW50LCBMZWFybmluZ0dvYWxzQ29udGVudCwgRW1iZWRkZWRIVE1MQ29udGVudCwgUmVzb3VyY2VMaXN0LCBXb3JkQmFua0NvbnRlbnQgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IGNyZWF0ZVVVSUQgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XHJcbmltcG9ydCB7IGlzS2VkU3RhZmYgfSBmcm9tICcuLi9sb2dpYy9pcy1rZWQtc3RhZmYnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBjb3Vyc2U6IFN0cmlwR3JhcGhzPENvdXJzZUluc3RhbmNlPjtcclxuICB0YWI6IFN0cmlwR3JhcGhzPENvdXJzZVRhYj47XHJcbiAgYnJhbmNoOiBLZWRCYWNrZW5kUmVwbztcclxuICB0eXBlPzoga2V5b2YgdHlwZW9mIEFERF9USVRMRVNcclxufVxyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICBvcGVuOiBib29sZWFuO1xyXG4gIGNvbnRlbnRUeXBlOiBzdHJpbmc7XHJcbn1cclxuXHJcbmNvbnN0IENPTlRFTlRfVFlQRVMgPSB7XHJcbiAgXCJyaWNoLXRleHRcIjogTGBUZXh0cnV0YWAsXHJcbiAgXCJ5b3V0dWJlLW1vdmllXCI6IExgWW91dHViZSBmaWxtYCxcclxuICBcImxlYXJuaW5nLWdvYWxzXCI6IExgTMOkcmFuZGVtw6VsIG9jaCB1cHBnaWZ0ZXJgLFxyXG4gIFwicmVzb3VyY2UtbGlzdFwiOiBMYFJlc3Vyc2xpc3RhYCxcclxuICBcImVtYmVkZGVkLWh0bWxcIjogTGBJbmLDpGRkYWQgSFRNTGAsXHJcbiAgXCJ3b3JkLWJhbmtcIjogTGBPcmRiYW5rYFxyXG59O1xyXG5cclxuY29uc3QgQUREX1RJVExFUzogdHlwZW9mIENPTlRFTlRfVFlQRVMgPSB7XHJcbiAgXCJyaWNoLXRleHRcIjogTGBMw6RnZyB0aWxsIHRleHRgLFxyXG4gIFwieW91dHViZS1tb3ZpZVwiOiBMYEzDpGdnIHRpbGwgeW91dHViZSBmaWxtYCxcclxuICBcImxlYXJuaW5nLWdvYWxzXCI6IExgTMOkZ2cgdGlsbCBsw6RyYW5kZW3DpWwgb2NoIHVwcGdpZnRlcmAsXHJcbiAgXCJyZXNvdXJjZS1saXN0XCI6IExgTMOkZ2cgdGlsbCByZXN1cnNsaXN0YWAsXHJcbiAgXCJlbWJlZGRlZC1odG1sXCI6IExgTMOkZ2cgdGlsbCBpbmLDpGRkYWQgSFRNTGAsXHJcbiAgXCJ3b3JkLWJhbmtcIjogTGBMw6RnZyB0aWxsIG9yZGJhbmtgXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBBZGRDb250ZW50QnV0dG9uIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLCBTdGF0ZT4ge1xyXG4gIGNvbnN0cnVjdG9yIChwcm9wczogUHJvcHMpIHtcclxuICAgIHN1cGVyIChwcm9wcyk7XHJcbiAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICBvcGVuOiBmYWxzZSxcclxuICAgICAgY29udGVudFR5cGU6ICdyaWNoLXRleHQnXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgY3JlYXRlQ29udGVudCgpIHtcclxuICAgIGNvbnN0IHt0YWIsIGJyYW5jaCwgdHlwZX0gPSB0aGlzLnByb3BzO1xyXG4gICAgY29uc3QgbmV3Q29udGVudCA9IHRoaXMubmV3Q29udGVudCh0eXBlIHx8IHRoaXMuc3RhdGUuY29udGVudFR5cGUpO1xyXG4gICAgYnJhbmNoLmNvdXJzZVRhYnMuYWRkUmVsYXRlZCh0YWIuaWQsIFwiY29udGVudHNcIiwgbmV3Q29udGVudCk7XHJcbiAgICB0aGlzLnNldFN0YXRlKHtvcGVuOiBmYWxzZX0pO1xyXG4gIH1cclxuXHJcbiAgbmV3Q29udGVudChjb250ZW50VHlwZTogc3RyaW5nKSA6Q291cnNlQ29udGVudHtcclxuICAgIHN3aXRjaCAoY29udGVudFR5cGUgYXMga2V5b2YgdHlwZW9mIENPTlRFTlRfVFlQRVMpIHtcclxuICAgICAgY2FzZSBcInJpY2gtdGV4dFwiOiByZXR1cm4gdGhpcy5uZXdSaWNoVGV4dCgpO1xyXG4gICAgICBjYXNlIFwibGVhcm5pbmctZ29hbHNcIjogcmV0dXJuIHRoaXMubmV3TGVhcm5pbmdHb2FsKCk7XHJcbiAgICAgIGNhc2UgXCJlbWJlZGRlZC1odG1sXCI6IHJldHVybiB0aGlzLm5ld0VtYmVkZGVkSFRNTCgpO1xyXG4gICAgICBjYXNlIFwid29yZC1iYW5rXCI6IHJldHVybiB0aGlzLm5ld1dvcmRCYW5rKCk7XHJcbiAgICAgIGNhc2UgXCJyZXNvdXJjZS1saXN0XCI6IHJldHVybiB0aGlzLm5ld1Jlc291cmNlTGlzdCgpO1xyXG4gICAgICBkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWRcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBuZXdXb3JkQmFuaygpOiBXb3JkQmFua0NvbnRlbnQge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdHlwZTogJ3dvcmQtYmFuaycsXHJcbiAgICAgIHRhZ3M6IFt0aGlzLnByb3BzLmNvdXJzZS5pZF0sXHJcbiAgICAgIGlkOiBjcmVhdGVVVUlEKCksXHJcbiAgICAgIG9yZGVyOiBEYXRlLm5vdygpLFxyXG4gICAgICBsb2NrZWQ6IHRoaXMucHJvcHMudGFiLmxvY2tlZCxcclxuICAgICAgbG9ja0RlbGV0ZTogaXNLZWRTdGFmZigpLFxyXG4gICAgICBoaWRkZW46IGZhbHNlLFxyXG4gICAgICBzZWxlY3RlZFdvcmRCYW5rOiBudWxsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgbmV3UmljaFRleHQoKTogUmljaFRleHRDb250ZW50IHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHR5cGU6IFwicmljaC10ZXh0XCIsXHJcbiAgICAgIHRhZ3M6IFt0aGlzLnByb3BzLmNvdXJzZS5pZF0sXHJcbiAgICAgIGlkOiBjcmVhdGVVVUlEKCksXHJcbiAgICAgIG9yZGVyOiBEYXRlLm5vdygpLFxyXG4gICAgICBsb2NrZWQ6IHRoaXMucHJvcHMudGFiLmxvY2tlZCxcclxuICAgICAgbG9ja0RlbGV0ZTogaXNLZWRTdGFmZigpLCAvLyBCZWNhdXNlIGlmIGEgdGVhY2hlciB3YXMgYWxsb2VkIHRvIGNyZWF0ZXMgdGhpcywgd2UgbmVlZCB0byBhbGxvdyBoZXIgdG8gZGVsZXRlIGl0IVxyXG4gICAgICBoaWRkZW46IGZhbHNlLFxyXG4gICAgICBodG1sOiAnJyxcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG5ld0VtYmVkZGVkSFRNTCgpOiBFbWJlZGRlZEhUTUxDb250ZW50IHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHR5cGU6IFwiZW1iZWRkZWQtaHRtbFwiLFxyXG4gICAgICB0YWdzOiBbdGhpcy5wcm9wcy5jb3Vyc2UuaWRdLFxyXG4gICAgICBpZDogY3JlYXRlVVVJRCgpLFxyXG4gICAgICBvcmRlcjogRGF0ZS5ub3coKSxcclxuICAgICAgbG9ja2VkOiB0aGlzLnByb3BzLnRhYi5sb2NrZWQsXHJcbiAgICAgIGxvY2tEZWxldGU6IGlzS2VkU3RhZmYoKSxcclxuICAgICAgaGlkZGVuOiBmYWxzZSxcclxuICAgICAgaHRtbDogJydcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG5ld0xlYXJuaW5nR29hbCgpOiBMZWFybmluZ0dvYWxzQ29udGVudCB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB0eXBlOiBcImxlYXJuaW5nLWdvYWxzXCIsXHJcbiAgICAgIHRhZ3M6IFt0aGlzLnByb3BzLmNvdXJzZS5pZF0sXHJcbiAgICAgIGlkOiBjcmVhdGVVVUlEKCksXHJcbiAgICAgIGxvY2tlZDogdGhpcy5wcm9wcy50YWIubG9ja2VkLFxyXG4gICAgICBsb2NrRGVsZXRlOiBpc0tlZFN0YWZmKCksIC8vIEJlY2F1c2UgaWYgYSB0ZWFjaGVyIHdhcyBhbGxvZWQgdG8gY3JlYXRlcyB0aGlzLCB3ZSBuZWVkIHRvIGFsbG93IGhlciB0byBkZWxldGUgaXQhXHJcbiAgICAgIGhpZGRlbjogZmFsc2UsXHJcbiAgICAgIGhhc0NvbW1vbkxlYXJuaW5nR29hbHM6IHRoaXMucHJvcHMuY291cnNlLnR5cGUgPT09ICd0aGVtZS1jb3Vyc2UnLFxyXG4gICAgICBjb21tb25MZWFybmluZ0dvYWxzOiBbXSxcclxuICAgICAgb3JkZXI6IERhdGUubm93KCksXHJcbiAgICAgIGhpZGRlblRhc2tzOiBbXSxcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG5ld1Jlc291cmNlTGlzdCgpOiBSZXNvdXJjZUxpc3Qge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdHlwZTogXCJyZXNvdXJjZS1saXN0XCIsXHJcbiAgICAgIHRhZ3M6IFt0aGlzLnByb3BzLmNvdXJzZS5pZF0sXHJcbiAgICAgIGlkOiBjcmVhdGVVVUlEKCksXHJcbiAgICAgIGxvY2tlZDogdGhpcy5wcm9wcy50YWIubG9ja2VkLFxyXG4gICAgICBsb2NrRGVsZXRlOiBpc0tlZFN0YWZmKCksXHJcbiAgICAgIG9yZGVyOiBEYXRlLm5vdygpLFxyXG4gICAgICBoaWRkZW46IGZhbHNlLFxyXG4gICAgICByZXNvdXJjZXM6IFtdXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBpZiAodGhpcy5zdGF0ZS5vcGVuKSB7XHJcbiAgICAgIHJldHVybiA8ZGl2PlxyXG4gICAgICAgIDxzZWxlY3Qgb25DaGFuZ2U9e2V2ID0+IHRoaXMuc2V0U3RhdGUoe2NvbnRlbnRUeXBlOiBldi50YXJnZXQudmFsdWV9KX0+XHJcbiAgICAgICAgICB7T2JqZWN0LmtleXMoQ09OVEVOVF9UWVBFUykubWFwKGNvbnRlbnRUeXBlID0+XHJcbiAgICAgICAgICAgIDxvcHRpb24ga2V5PXtjb250ZW50VHlwZX0gdmFsdWU9e2NvbnRlbnRUeXBlfT5cclxuICAgICAgICAgICAgICB7Q09OVEVOVF9UWVBFU1tjb250ZW50VHlwZV19XHJcbiAgICAgICAgICAgIDwvb3B0aW9uPil9XHJcbiAgICAgICAgPC9zZWxlY3Q+XHJcbiAgICAgICAgPGEgY2xhc3NOYW1lPVwiYnRuIHB1bGwtcmlnaHRcIiBvbkNsaWNrPXsoKT0+dGhpcy5zZXRTdGF0ZSh7b3BlbjogZmFsc2V9KX0+e0xgQXZicnl0YH08L2E+XHJcbiAgICAgICAgPGEgY2xhc3NOYW1lPVwiYnRuIGJ0bi1kZWZhdWx0XCIgb25DbGljaz17KCk9PnRoaXMuY3JlYXRlQ29udGVudCgpfT57TGBTa2FwYWB9PC9hPlxyXG4gICAgICA8L2Rpdj47XHJcbiAgICB9XHJcbiAgICByZXR1cm4gPD48YVxyXG4gICAgICBjbGFzc05hbWU9XCJidG5cIlxyXG4gICAgICBvbkNsaWNrPXsoKT0+e1xyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnR5cGUpIHtcclxuICAgICAgICAgIHRoaXMuY3JlYXRlQ29udGVudCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHtvcGVuOiB0cnVlfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9fT5cclxuICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1wbHVzXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCIgLz5cclxuICAgICAgICB7dGhpcy5wcm9wcy50eXBlID8gQUREX1RJVExFU1t0aGlzLnByb3BzLnR5cGVdwqA6IExgTMOkZ2cgdGlsbCBpbm5laMOlbGxgfVxyXG4gICAgPC9hPiZuYnNwOzwvPjtcclxuICB9XHJcbn0iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IENvdXJzZVRhYiwgQ291cnNlSW5zdGFuY2UsIFJpY2hUZXh0Q29udGVudCwgQ291cnNlQmxvY2ssIFRoZW1lQ291cnNlVGFiLCBTdGVwQ291cnNlVGFiIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBTdHJpcEdyYXBocywgV2l0aEdyYXBocywgS2VkQmFja2VuZFJlcG8gfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBSZW5hbWVhYmxlVGV4dCB9IGZyb20gJy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9yZW5hbWVhYmxlLXRleHQnO1xyXG5pbXBvcnQgeyBjcmVhdGVVVUlEIH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnQnO1xyXG5pbXBvcnQgeyB3aXRoUm91dGVyLCBSb3V0ZUNvbXBvbmVudFByb3BzIH0gZnJvbSAncmVhY3Qtcm91dGVyJztcclxuaW1wb3J0IHsgZGIgfSBmcm9tICcuLi8uLi8uLi9nbG9iYWxzL2RiJztcclxuaW1wb3J0IHsgaXNLZWRTdGFmZiB9IGZyb20gJy4uL2xvZ2ljL2lzLWtlZC1zdGFmZic7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMgZXh0ZW5kcyBSb3V0ZUNvbXBvbmVudFByb3BzIHtcclxuICB0eXBlOiBcInRoZW1lLWNvdXJzZS10YWJcIiB8IFwic3RlcC1jb3Vyc2UtdGFiXCI7XHJcbiAgY291cnNlOiBTdHJpcEdyYXBoczxDb3Vyc2VJbnN0YW5jZT47XHJcbiAgYnJhbmNoOiBLZWRCYWNrZW5kUmVwbztcclxuICBzY2hvb2w6IHN0cmluZztcclxuICBkcmFmdElkOiBzdHJpbmc7XHJcbiAgYmxvY2s/OiBDb3Vyc2VCbG9jaztcclxuICBzdGVwTm8/OiBudW1iZXI7XHJcbn1cclxuXHJcbmludGVyZmFjZSBTdGF0ZSB7XHJcbiAgZWRpdGluZ05hbWU6IGJvb2xlYW47XHJcbiAgbmFtZTogc3RyaW5nO1xyXG59XHJcblxyXG5jbGFzcyBBZGRUYWJCdXR0b24gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsIFN0YXRlPiB7XHJcbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICBlZGl0aW5nTmFtZTogZmFsc2UsXHJcbiAgICAgIG5hbWU6IFwiXCJcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgY3JlYXRlVGFiKHRhYk5hbWU6IHN0cmluZykge1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7ZWRpdGluZ05hbWU6IGZhbHNlLCBuYW1lOiBcIlwifSk7XHJcbiAgICBjb25zdCB7dHlwZSwgYnJhbmNoLCBkcmFmdElkLCBjb3Vyc2UsIHNjaG9vbCwgaGlzdG9yeSwgYmxvY2ssIHN0ZXBOb30gPSB0aGlzLnByb3BzO1xyXG4gICAgY29uc3QgdGFiVGVtcGxhdGUgPSB7XHJcbiAgICAgIGlkOiBjcmVhdGVVVUlEKCksXHJcbiAgICAgIHRhYlRpdGxlOiB0YWJOYW1lLCAvLyBEZXByZWNhdGVkLiBVc2UgbmFtZSBpbnN0ZWFkLlxyXG4gICAgICBuYW1lOiB0YWJOYW1lLFxyXG4gICAgICBvcmRlcjogRGF0ZS5ub3coKSxcclxuICAgICAgbG9ja2VkOiBpc0tlZFN0YWZmKCkgPyB0cnVlIDogZmFsc2UsXHJcbiAgICAgIGFjbDogWyBcInJvbGU6VVNFUjpSXCIsIGBzY2hvb2xSb2xlOiR7c2Nob29sfS9FTVBMT1lFRTpTYCBdLFxyXG4gICAgICAvL2FiaWxpdGllc09yZGVyOiBbXSxcclxuICAgICAgLy9rbm93bGVkZ2VSZXF1aXJlbWVudHNPcmRlcjogW10sXHJcbiAgICAgIC8vY2VudHJhbENvbnRlbnRPcmRlcjogW11cclxuICAgIH07XHJcbiAgICBjb25zdCBuZXdUYWIgPSAodHlwZSA9PT0gJ3RoZW1lLWNvdXJzZS10YWInID9cclxuICAgICAge1xyXG4gICAgICAgIHR5cGU6ICd0aGVtZS1jb3Vyc2UtdGFiJyxcclxuICAgICAgICB0YWJDbGFzczogJ2NvbnRlbnQtdGFiJyxcclxuICAgICAgICB0YWdzOiBbdGhpcy5wcm9wcy5jb3Vyc2UuaWRdLFxyXG4gICAgICAgIC4uLnRhYlRlbXBsYXRlLFxyXG4gICAgICB9IGFzIFRoZW1lQ291cnNlVGFiIDpcclxuICAgICAge1xyXG4gICAgICAgIHR5cGU6ICdzdGVwLWNvdXJzZS10YWInLFxyXG4gICAgICAgIHRhYkNsYXNzOiAnY29udGVudC10YWInLFxyXG4gICAgICAgIHRhZ3M6IFsuLi5ibG9jay50YWdzXSwgLy8gQ29udGFpbnMgYm90aCBjb3Vyc2VJZCBhbmQgY291cnNlOmNvdXJzZUNvZGVcclxuICAgICAgICAuLi50YWJUZW1wbGF0ZSxcclxuICAgICAgICBzdGVwTm86IHN0ZXBOb1xyXG4gICAgICB9IGFzIFN0ZXBDb3Vyc2VUYWIpO1xyXG5cclxuICAgIC8qY29uc3QgdG9wQ29udGVudDogUmljaFRleHRDb250ZW50ID0ge1xyXG4gICAgICB0eXBlOiAncmljaC10ZXh0JyxcclxuICAgICAgaWQ6IGNyZWF0ZVVVSUQoKSxcclxuICAgICAgdGFnczogW3RoaXMucHJvcHMuY291cnNlLmlkXSxcclxuICAgICAgaHRtbDogYDxoMj4ke3RhYk5hbWV9PC9oMmAsXHJcbiAgICAgIG9yZGVyOiBEYXRlLm5vdygpLFxyXG4gICAgICBsb2NrZWQ6IHRydWUsXHJcbiAgICAgIGhpZGRlbjogZmFsc2VcclxuICAgIH07Ki9cclxuICAgIGlmIChuZXdUYWIudHlwZSA9PT0gJ3N0ZXAtY291cnNlLXRhYicpIHtcclxuICAgICAgYnJhbmNoLmNvdXJzZUJsb2Nrcy5hZGRSZWxhdGVkKGJsb2NrLmlkLCBcInRhYnNcIiwgbmV3VGFiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGJyYW5jaC5jb3Vyc2VJbnN0YW5jZXMuYWRkUmVsYXRlZChjb3Vyc2UuaWQsIFwidGFic1wiLCBuZXdUYWIpO1xyXG4gICAgfVxyXG4gICAgLy9icmFuY2guY291cnNlVGFicy5hZGRSZWxhdGVkKG5ld1RhYi5pZCwgXCJjb250ZW50c1wiLCB0b3BDb250ZW50KTtcclxuICAgIGF3YWl0IGJyYW5jaC5zYXZlTm93KCk7XHJcbiAgICBoaXN0b3J5LnB1c2goYC8ke3NjaG9vbH0vY291cnNlcy8ke2NvdXJzZS5pZH0vdGFicy8ke25ld1RhYi5pZH0vZHJhZnRzLyR7ZHJhZnRJZH0vZWRpdGApO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3Qge3NjaG9vbCwgY291cnNlLCBicmFuY2h9ID0gdGhpcy5wcm9wcztcclxuICAgIGNvbnN0IHtlZGl0aW5nTmFtZSwgbmFtZX0gPSB0aGlzLnN0YXRlO1xyXG4gICAgcmV0dXJuIDw+XHJcbiAgICAgICAgPGFcclxuICAgICAgICAgIG9uQ2xpY2s9e2VkaXRpbmdOYW1lID8gbnVsbCA6IGV2ID0+IHRoaXMuc2V0U3RhdGUoe2VkaXRpbmdOYW1lOiB0cnVlLCBuYW1lOiAnJ30pfT5cclxuICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLXBsdXNcIiBhcmlhLWhpZGRlbj1cInRydWVcIiAvPlxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICAhZWRpdGluZ05hbWUgP1xyXG4gICAgICAgICAgICAgICcgJyArIExgTnkgZmxpa2A6XHJcbiAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcclxuICAgICAgICAgICAgICBzdHlsZT17e2NvbG9yOiBcImJsYWNrXCJ9fVxyXG4gICAgICAgICAgICAgIGF1dG9Gb2N1c1xyXG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtMYEZsaWtuYW1uYH1cclxuICAgICAgICAgICAgICB2YWx1ZT17bmFtZX1cclxuICAgICAgICAgICAgICBzaXplPXszMH1cclxuICAgICAgICAgICAgICBvbkNoYW5nZT17ZXYgPT4gdGhpcy5zZXRTdGF0ZSh7bmFtZTogZXYudGFyZ2V0LnZhbHVlfSl9XHJcbiAgICAgICAgICAgICAgb25LZXlQcmVzcz17ZXYgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGV2LmtleSA9PT0gJ0VudGVyJykge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVRhYihuYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgIG9uQmx1cj17KCk9PnRoaXMuc2V0U3RhdGUoe2VkaXRpbmdOYW1lOiBmYWxzZX0pfVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIDwvYT5cclxuXHJcbiAgICAgICAgey8qICAgICBcclxuICAgICAgICA8UmVuYW1lYWJsZVRleHRcclxuICAgICAgICAgIGVhZ2VyPXtmYWxzZX1cclxuICAgICAgICAgIG1heENoYXJzPXs4MH1cclxuICAgICAgICAgIHRleHQ9e25hbWV9XHJcbiAgICAgICAgICBvbkNoYW5nZT17dmFsdWUgPT4ge1xyXG4gICAgICAgIH19Lz5cclxuICAgICAgICAqL31cclxuICAgIDwvPjtcclxuICB9XHJcbn1cclxuY29uc3QgQWRkVGFiQnV0dG9uV2l0aFJvdXRlciA9IHdpdGhSb3V0ZXIoQWRkVGFiQnV0dG9uKVxyXG5leHBvcnQge0FkZFRhYkJ1dHRvbldpdGhSb3V0ZXIgYXMgQWRkVGFiQnV0dG9ufTtcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgTGF6eUNvbnRlbnQgfSBmcm9tICcuLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvbGF6eS1jb250ZW50JztcclxuaW1wb3J0IHsgZGIsIENvdXJzZUluc3RhbmNlcyB9IGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvZGInO1xyXG5pbXBvcnQgeyBTcGlubmVyIH0gZnJvbSAnLi4vLi4vY291cnNlLWJ1aWxkZXIvc3ViLWNvbXBvbmVudHMvc3Bpbm5lcic7XHJcbmltcG9ydCB7IFJvdXRlQ29tcG9uZW50UHJvcHMsIHdpdGhSb3V0ZXIgfSBmcm9tICdyZWFjdC1yb3V0ZXInO1xyXG5pbXBvcnQgeyBMLCBjb21wYXJlUHJvcCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgaXNUZWFjaGVyQXRTY2hvb2wsIGlzQWRtaW5PclRlYWNoZXJBdFNjaG9vbCwgcHJlc2VydmVJbXBlcnNvbmF0aW9uUXVlcnkgfSBmcm9tICcuLi8uLi8uLi9hY2Nlc3MtY29udHJvbCc7XHJcbmltcG9ydCBlbnYgZnJvbSAnLi4vLi4vLi4vZ2xvYmFscy9LRUQuZW52JztcclxuaW1wb3J0IHsgZ2V0RHJhZnRJZCB9IGZyb20gJy4uL2xvZ2ljL2dldC1kcmFmdC1pZCc7XHJcbmltcG9ydCB7IGlzS2VkU3RhZmYgfSBmcm9tICcuLi9sb2dpYy9pcy1rZWQtc3RhZmYnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIGV4dGVuZHMgUm91dGVDb21wb25lbnRQcm9wcyB7XHJcbiAgc2Nob29sOiBzdHJpbmc7XHJcbiAgZGlzcGxheU5hbWU6IHN0cmluZztcclxuICBkcmFmdElkOiBzdHJpbmc7XHJcbn1cclxuXHJcbmludGVyZmFjZSBTdGF0ZSB7XHJcbiAgb3BlbjogYm9vbGVhbjtcclxuICBzY2hvb2xzPzogQXJyYXk8e2lkOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgZGlzcGxheU5hbWU6IHN0cmluZ30+XHJcbn1cclxuXHJcbmNsYXNzIENsaWNrYWJsZVNjaG9vbERpdldpdGhSb3V0ZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsIFN0YXRlPiB7XHJcbiAgZGl2RWxlbTtcclxuXHJcbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICBvcGVuOiBmYWxzZVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgb3BlbigpIHtcclxuICAgIHRoaXMuc2V0U3RhdGUoe29wZW46IHRydWV9KTtcclxuICAgIGlmICghdGhpcy5zdGF0ZS5zY2hvb2xzKSB7XHJcbiAgICAgIGNvbnN0IHNjaG9vbHMgPSBhd2FpdCBkYi5zY2hvb2xzXHJcbiAgICAgICAgLnRhZ3MoXCJwcmltYXJ5XCIpXHJcbiAgICAgICAgLm1hcCgoe2lkLCBuYW1lLCBkaXNwbGF5TmFtZX0pID0+ICh7aWQsIG5hbWUsIGRpc3BsYXlOYW1lOiBkaXNwbGF5TmFtZSB8fCBuYW1lIHx8IFwiPG5hbW5sw7ZzPlwifSkpXHJcbiAgICAgICAgLnRvVmFsdWUoKS5sb2FkKCk7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe3NjaG9vbHN9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7b3BlbjogZmFsc2V9KTtcclxuICB9XHJcbiAgXHJcbiAgYXN5bmMgc2VsZWN0U2Nob29sIChzY2hvb2w6IHN0cmluZykge1xyXG4gICAgY29uc3Qge21hdGNoLCBoaXN0b3J5fSA9IHRoaXMucHJvcHM7ICAgICAgICAgICBcclxuICAgIGNvbnN0IHtjb3Vyc2VJZCwgdGFiSWQsIGRyYWZ0SWQsIGNvbnRlbnRJZCwgdGFza0lkfSA9IG1hdGNoLnBhcmFtcyBhcyBhbnk7XHJcbiAgICBjb25zdCBjYW5JbXBlcnNvbmF0ZSA9XHJcbiAgICAgIGVudi5jdXJyZW50VXNlci5yb2xlcy5pbmNsdWRlcyhcIkFETUlOXCIpIHx8ICAvLyBJcyBhZG1pblxyXG4gICAgICBsb2NhdGlvbi5zZWFyY2guaW5jbHVkZXMoJ3JvbGU9Jyk7ICAgICAgICAgIC8vIFNlZW1zIHRvIGJlIGltcGVyc29uYXRlZCBhcyBub24tYWRtaW4gKG9ubHkgYWRtaW5zIGNhbiBkbyB0aGF0KVxyXG5cclxuICAgIGFzeW5jIGZ1bmN0aW9uIGdldFJvdXRlKCkge1xyXG4gICAgICBjb25zdCBvdGhlckRyYWZ0SWQgPSBkcmFmdElkICYmIGF3YWl0IGdldERyYWZ0SWQoc2Nob29sLCBjb3Vyc2VJZCkubG9hZCgpO1xyXG4gICAgICBpZiAodGFza0lkICYmIGNvbnRlbnRJZCAmJiBvdGhlckRyYWZ0SWQgJiYgKGlzQWRtaW5PclRlYWNoZXJBdFNjaG9vbChlbnYuY3VycmVudFVzZXIsIHNjaG9vbCkgfHwgY2FuSW1wZXJzb25hdGUpKSB7XHJcbiAgICAgICAgcmV0dXJuIGAvJHtzY2hvb2x9L2NvdXJzZXMvJHtjb3Vyc2VJZH0vdGFicy8ke3RhYklkIHx8IFwiJFwifS9jb250ZW50cy8ke2NvbnRlbnRJZH0vdGFza3MvJHt0YXNrSWR9L2RyYWZ0cy8ke290aGVyRHJhZnRJZH0vZWRpdGA7XHJcbiAgICAgIH0gZWxzZSBpZiAodGFza0lkKSB7XHJcbiAgICAgICAgcmV0dXJuIGAvJHtzY2hvb2x9L2NvdXJzZXMvJHtjb3Vyc2VJZH0vdGFicy8ke3RhYklkIHx8IFwiJFwifS90YXNrcy8ke3Rhc2tJZH1gO1xyXG4gICAgICB9IGVsc2UgaWYgKG90aGVyRHJhZnRJZCAmJiAoaXNBZG1pbk9yVGVhY2hlckF0U2Nob29sKGVudi5jdXJyZW50VXNlciwgc2Nob29sKSB8fCBjYW5JbXBlcnNvbmF0ZSkpIHtcclxuICAgICAgICByZXR1cm4gYC8ke3NjaG9vbH0vY291cnNlcy8ke2NvdXJzZUlkfS90YWJzLyR7dGFiSWQgfHzCoFwiJFwifS9kcmFmdHMvJHtvdGhlckRyYWZ0SWR9L2VkaXRgO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBgLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlSWR9L3RhYnMvJHt0YWJJZCB8fMKgXCIkXCJ9YDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChzY2hvb2wgIT09IHRoaXMucHJvcHMuc2Nob29sKSB7XHJcbiAgICAgIGNvbnN0IHJvdXRlID0gYXdhaXQgZ2V0Um91dGUoKTtcclxuICAgICAgaWYgKGNhbkltcGVyc29uYXRlKSB7XHJcbiAgICAgICAgLy8gSWYgY3VycmVudCB1c2VyIGNhbiBpbXBlcnNvbmF0ZSAoaXMgYWRtaW4gb3IgaXMgYWxyZWFkeSBpbXBlcnNvbmF0aW5nIGVtcGxveWVlIGF0IHNvbWUgc2Nob29sKSxcclxuICAgICAgICAvLyBtYWtlIHN1cmUgdG8gaW1wZXJzb25hdGUgdGhlIGNvcnJlY3Qgc2Nob29sIHdoZW4gc3dpdGNoaW5nIHNjaG9vbCwgc28gdGhhdFxyXG4gICAgICAgIC8vIGFkbWlucyBjYW4gYWN0IGFzIGFuIGVtcGxveWVlIG9uIHRoYXQgc2Nob29sIHdoZW4gbG9va2luZyBhdCB0aGVpciBjb3Vyc2VzLlxyXG4gICAgICAgIC8vIFRoaXMgd2lsbCBtYWtlIGl0IGVhc2llciBmb3IgYWRtaW5zIHRvIHVuZGVyc3RhbmQgd2hhdCBlbXBsb3llZXMgYXQgdGhlIHNjaG9vbFxyXG4gICAgICAgIC8vIGNhbiBkbyB3aXRoIHRoZSBjb3Vyc2VzXHJcbiAgICAgICAgY29uc3QgYmFzZVVybCA9IHByZXNlcnZlSW1wZXJzb25hdGlvblF1ZXJ5KGxvY2F0aW9uLnBhdGhuYW1lLCBzY2hvb2wgPT09ICdzdGFuZGFyZCcgP1xyXG4gICAgICAgICAge3JvbGU6IHVuZGVmaW5lZCwgc2Nob29sfSA6XHJcbiAgICAgICAgICB7cm9sZTogXCJFTVBMT1lFRVwiLCBzY2hvb2x9KTtcclxuICAgICAgICBsb2NhdGlvbi5ocmVmID0gYCR7YmFzZVVybH0jJHtyb3V0ZX1gO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIE5vdCBhbiBhZG1pbiwganVzdCByZWRpcmVjdCB0byB0aGUgcm91dGUgYW5kIG5vcm1hbCBhY2Nlc3MgY29udHJvbCB3aWxsIGFwcGx5XHJcbiAgICAgICAgaGlzdG9yeS5wdXNoKHJvdXRlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhpcy5jbG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3Qge3NjaG9vbCwgZHJhZnRJZCwgZGlzcGxheU5hbWUgfSA9IHRoaXMucHJvcHM7XHJcbiAgICBjb25zdCB7b3Blbiwgc2Nob29sc30gPSB0aGlzLnN0YXRlO1xyXG5cclxuICAgIHJldHVybiA8ZGl2IHRhYkluZGV4PXsxfSBzdHlsZT17e291dGxpbmU6IDB9fSBvbkJsdXI9eygpPT50aGlzLmNsb3NlKCl9PlxyXG4gICAgICB7IW9wZW4gPyA8PlxyXG4gICAgICAgIDxoNSBvbkNsaWNrPXsoKT0+dGhpcy5vcGVuKCl9PntzY2hvb2wgIT09IFwic3RhbmRhcmRcIiA/IChkaXNwbGF5TmFtZSB8fCBzY2hvb2wpIDogTGBTdGFuZGFyZGB9PC9oNT5cclxuICAgICAgICB7ZHJhZnRJZCAmJiA8cCBjbGFzc05hbWU9XCJwYWdlU2lkZVRleHRcIj57TGBBcmJldHN2ZXJzaW9uYH08L3A+fVxyXG4gICAgICA8Lz4gOiAhc2Nob29scyA/XHJcbiAgICAgICAgPFNwaW5uZXIgLz4gOiA8PlxyXG4gICAgICAgICAgPGg1IG9uQ2xpY2s9eygpPT50aGlzLmNsb3NlKCl9PntMYFbDpHhsYSBza29sYWB9PC9oNT5cclxuICAgICAgICAgIDx1bD5cclxuICAgICAgICAgICAgPGxpIG9uQ2xpY2s9eygpPT50aGlzLnNlbGVjdFNjaG9vbChcInN0YW5kYXJkXCIpfT57TGBTdGFuZGFyZGB9PC9saT5cclxuICAgICAgICAgICAge3NjaG9vbHMuZmlsdGVyKCh7bmFtZX0pID0+IG5hbWUgIT09ICdzdGFuZGFyZCcpXHJcbiAgICAgICAgICAgICAgLnNvcnQoKGEsYikgPT4gYS5kaXNwbGF5TmFtZS5sb2NhbGVDb21wYXJlKGIuZGlzcGxheU5hbWUsIFtcInN2XCIsXCJlblwiXSkpXHJcbiAgICAgICAgICAgICAgLm1hcCgoe2lkLCBuYW1lOiBzY2hvb2wsIGRpc3BsYXlOYW1lfSkgPT5cclxuICAgICAgICAgICAgICAgIDxsaSBrZXk9e2lkfVxyXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKT0+dGhpcy5zZWxlY3RTY2hvb2woc2Nob29sKX0+XHJcbiAgICAgICAgICAgICAgICB7ZGlzcGxheU5hbWV9XHJcbiAgICAgICAgICAgIDwvbGk+KX1cclxuICAgICAgICAgIDwvdWw+XHJcbiAgICAgICAgPC8+fVxyXG4gICAgICA8L2Rpdj5cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBDbGlja2FibGVTY2hvb2xEaXYgPSB3aXRoUm91dGVyKENsaWNrYWJsZVNjaG9vbERpdldpdGhSb3V0ZXIpO1xyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEVtaXR0ZXIgfSBmcm9tICdrZWRiYWNrZW5kL29ic2VydmFibGUnO1xyXG5pbXBvcnQgeyBDb3Vyc2VJbnN0YW5jZSwgQnJhbmNoLCBDb3Vyc2VCbG9jaywgQ291cnNlVGFiIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBXaXRoR3JhcGhzLCBLZWRCYWNrZW5kUmVwbyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IENvdXJzZVRhYkFyZWEgfSBmcm9tICcuL2NvdXJzZS10YWItYXJlYSc7XHJcbmltcG9ydCB7IENvdXJzZVNldHRpbmdzQXJlYSB9IGZyb20gJy4vY291cnNlLXNldHRpbmdzLWFyZWEnO1xyXG5pbXBvcnQgeyBMLCBzaG93RXJyb3IsIGNvbXBhcmVQcm9wIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBFZGl0b3JGb290ZXJCdXR0b25zIH0gZnJvbSAnLi9lZGl0b3ItZm9vdGVyLWJ1dHRvbnMnO1xyXG5pbXBvcnQgeyBUd29Db2x1bW5zUGFnZSB9IGZyb20gJy4uL2NvbW1vbi90d28tY29sdW1ucy1wYWdlJztcclxuaW1wb3J0IHsgV2Vla1BsYW5uZXIgfSBmcm9tICcuLi8uLi93ZWVrcGxhbm5lci93ZWVrcGxhbm5lcic7XHJcbmltcG9ydCB7IGlzVGVhY2hlckF0U2Nob29sIH0gZnJvbSAnLi4vLi4vLi4vYWNjZXNzLWNvbnRyb2wnO1xyXG5pbXBvcnQgZW52IGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCBjZmcgZnJvbSAnLi4vLi4vLi4vZ2xvYmFscy9LRUQuY2ZnJztcclxuaW1wb3J0IHsgd2l0aFJvdXRlciwgUm91dGVDb21wb25lbnRQcm9wcyB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xyXG5pbXBvcnQgeyBIb3Jpem9udGFsSXRlbSB9IGZyb20gJy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9ob3Jpem9udGFsLWl0ZW0nO1xyXG5pbXBvcnQgeyBBbGlnbkhvcml6b250YWwgfSBmcm9tICcuLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvYWxpZ24taG9yaXpvbnRhbCc7XHJcbmltcG9ydCB7IHB1Ymxpc2hDb3Vyc2UgfSBmcm9tICcuLi9sb2dpYy9wdWJsaXNoLWNvdXJzZSc7XHJcbmltcG9ydCB7IGRiLCBDb3Vyc2VJbnN0YW5jZXMgfSBmcm9tICcuLi8uLi8uLi9nbG9iYWxzL2RiJztcclxuaW1wb3J0IHsgTGF6eUNvbnRlbnQgfSBmcm9tICcuLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvbGF6eS1jb250ZW50JztcclxuaW1wb3J0IHsgY29tcHV0ZVByZWRlc3RpbmF0ZWRJZCB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcclxuaW1wb3J0IHsgVmVyc2lvbkhpc3RvcnlCb3ggfSBmcm9tICcuL3ZlcnNpb24taGlzdG9yeS92ZXJzaW9uLWhpc3RvcnktYm94JztcclxuaW1wb3J0IHsgUmVzb3VyY2VMaXN0VmlldyB9IGZyb20gJy4vY291cnNlLWNvbnRlbnRzL3Jlc291cmNlLWxpc3Qtdmlldyc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMgZXh0ZW5kcyBSb3V0ZUNvbXBvbmVudFByb3BzIHtcclxuICBzY2hvb2w6IHN0cmluZztcclxuICBjb3Vyc2VJZDogc3RyaW5nO1xyXG4gIGRyYWZ0SWQ6IHN0cmluZztcclxuICBjb3Vyc2U6IFdpdGhHcmFwaHM8Q291cnNlSW5zdGFuY2UsIFwidGFic1wiIHwgXCJibG9ja3NcIj5cclxuICBicmFuY2g6IEtlZEJhY2tlbmRSZXBvXHJcbiAgdGFiczogQ291cnNlVGFiW11cclxuICBhY3RpdmVUYWI6IHN0cmluZztcclxuICBlZGl0TW9kZT86IGJvb2xlYW47XHJcbiAgYmxvY2s6IENvdXJzZUJsb2NrIHwgbnVsbDtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IENvdXJzZUFyZWEgPSB3aXRoUm91dGVyKCh7XHJcbiAgc2Nob29sLFxyXG4gIGNvdXJzZUlkLFxyXG4gIGRyYWZ0SWQsXHJcbiAgY291cnNlLFxyXG4gIGJyYW5jaCxcclxuICB0YWJzLFxyXG4gIGFjdGl2ZVRhYixcclxuICBlZGl0TW9kZSxcclxuICBoaXN0b3J5LFxyXG4gIGJsb2NrXHJcbn06IFByb3BzKSA9PiB7XHJcbiAgY29uc3QgdGFiID0gdGFicy5maWx0ZXIodGFiID0+IHRhYi5pZCA9PT0gYWN0aXZlVGFiKVswXSB8fCB0YWJzWzBdO1xyXG4gIHZhciBjdXJyZW50VGFiUmVzb3VyY2VzID0gYnJhbmNoLmNvdXJzZUNvbnRlbnRzLmhhc0VkZ2VzRnJvbShbdGFiLmlkXSkuZmlsdGVyKHg9PiB4LnR5cGUgPT09IFwicmVzb3VyY2UtbGlzdFwiKS5maXJzdCgpO1xyXG4gIHJldHVybiA8VHdvQ29sdW1uc1BhZ2VcclxuICAgIHJpZ2h0PXtlZGl0TW9kZSAmJiBkcmFmdElkID9cclxuICAgICAgLy8gSW4gZWRpdCBtb2RlLCBzaG93IHRoZSBkcmFmdCBlZGl0cyB0byB0aGUgcmlnaHRcclxuICAgICAgPGRpdj5cclxuICAgICAgICA8VmVyc2lvbkhpc3RvcnlCb3ggaXNBZG1pbj17c2Nob29sID09PSAnc3RhbmRhcmQnfSBicmFuY2hJZD17ZHJhZnRJZH0gYnJhbmNoVHlwZT1cImRyYWZ0LWJyYW5jaFwiIC8+XHJcbiAgICAgIDwvZGl2PiA6XHJcbiAgICAgIC8vIEluIHZpZXcgbW9kZSwgc2hvdyBXZWVrUGxhbm5lciB0byB0aGUgcmlnaHRcclxuICAgICAgLy8gSW4gdmlldyBtb2RlLCBzaG93IFJlc291cmNlcyB0byB0aGUgcmlnaHRcclxuICAgICAgPD5cclxuICAgICAgPFdlZWtQbGFubmVyIGVudj17ZW52fSB2aWV3Q291cnNlVXJsPXtjZmcuS0VEX0NPVVJTRV9WSUVXRVJfVVJMfSAvPlxyXG4gICAgICA8UmVzb3VyY2VMaXN0VmlldyBjb250ZW50PXtjdXJyZW50VGFiUmVzb3VyY2VzfS8+XHJcbiAgICAgIDwvPn1cclxuICAgIHJpZ2h0V2lkdGg9ezV9XHJcbiAgICBsZWZ0PXs8PlxyXG4gICAgICA8Q291cnNlVGFiQXJlYVxyXG4gICAgICAgIHNjaG9vbD17c2Nob29sfVxyXG4gICAgICAgIGNvdXJzZT17Y291cnNlfVxyXG4gICAgICAgIGJyYW5jaD17YnJhbmNofVxyXG4gICAgICAgIHRhYj17dGFifVxyXG4gICAgICAgIGVkaXRNb2RlPXtlZGl0TW9kZX1cclxuICAgICAgICBkcmFmdElkPXtkcmFmdElkfVxyXG4gICAgICAgIGJsb2NrPXtibG9ja31cclxuICAgICAgICBsYXp5Q29udGVudHM9e3RhYiA/XHJcbiAgICAgICAgICBicmFuY2guY291cnNlQ29udGVudHMuaW5jbHVkZShcInRhc2tzXCIpLmhhc0VkZ2VzRnJvbShbdGFiLmlkXSkudG9WYWx1ZSgpIDpcclxuICAgICAgICAgIG5ldyBFbWl0dGVyKFtdKX1cclxuICAgICAgICAvPlxyXG4gICAgICB7IWVkaXRNb2RlID8gZW52LmN1cnJlbnRVc2VyLnJvbGVzLmluY2x1ZGVzKFwiQURNSU5cIikgfHwgaXNUZWFjaGVyQXRTY2hvb2woZW52LmN1cnJlbnRVc2VyLCBzY2hvb2wpID8gPD5cclxuICAgICAgICA8YnIvPlxyXG4gICAgICAgIDxoci8+XHJcbiAgICAgICAgPEFsaWduSG9yaXpvbnRhbD5cclxuICAgICAgICAgIHtkcmFmdElkICYmIDxIb3Jpem9udGFsSXRlbT5cclxuICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ0biBidG4tbGFyZ2UgYnRuLXdhcm5pbmdcIlxyXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e2FzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHB1Ymxpc2hDb3Vyc2Uoe1xyXG4gICAgICAgICAgICAgICAgICBzY2hvb2wsXHJcbiAgICAgICAgICAgICAgICAgIGNvdXJzZTogY291cnNlIGFzIENvdXJzZUluc3RhbmNlLFxyXG4gICAgICAgICAgICAgICAgICBkcmFmdFJlcG86IGRiLmJyYW5jaChkcmFmdElkKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBkYi5zYXZlTm93KCk7XHJcbiAgICAgICAgICAgICAgICBoaXN0b3J5LnB1c2goYC8ke3NjaG9vbH0vY291cnNlcy8ke2NvdXJzZUlkfS90YWJzLyR7dGFiID8gdGFiLmlkIDogJyQnfWApO1xyXG4gICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1sZyBmYS1wbGF5XCIgYXJpYS1oaWRkZW49e3RydWV9IC8+Jm5ic3A7XHJcbiAgICAgICAgICAgICAge0xgUHVibGljZXJhYH1cclxuICAgICAgICAgICAgPC9idXR0b24+XHJcblxyXG4gICAgICAgICAgPC9Ib3Jpem9udGFsSXRlbT59XHJcbiAgICAgICAgICA8TGF6eUNvbnRlbnQ+e1xyXG4gICAgICAgICAgICAgIENvdXJzZUluc3RhbmNlcy5nZXRCcmFuY2hJZChkYi5zY2hvb2xzLm5hbWUoc2Nob29sKS5zaW5nbGUoKSwgY291cnNlSWQpLm1hcChleGlzdGluZ0RyYWZ0SWQgPT4gPD5cclxuICAgICAgICAgICAgICAgIDxIb3Jpem9udGFsSXRlbT5cclxuICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ0biBidG4tbGFyZ2VcIlxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2V4aXN0aW5nRHJhZnRJZCA/IFxyXG4gICAgICAgICAgICAgICAgICAgICAgLy8gTmF2aWdhdGUgdG8gZWRpdCBleGlzdGluZyBkcmFmdFxyXG4gICAgICAgICAgICAgICAgICAgICAgKCk9Pmhpc3RvcnkucHVzaChgLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlSWR9L3RhYnMvJHt0YWIgPyB0YWIuaWQgOiAnJCd9L2RyYWZ0cy8ke2V4aXN0aW5nRHJhZnRJZH0vZWRpdGApIDpcclxuICAgICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhIGRyYWZ0IGZvciB0aGUgYnJhbmNoIGFuZCB0aGVuIG5hdmlnYXRlIHRvIGl0XHJcbiAgICAgICAgICAgICAgICAgICAgICBhc3luYyAoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNjaG9vbEVudGl0eSA9IGF3YWl0IGRiLnNjaG9vbHMubmFtZShzY2hvb2wpLnNpbmdsZSgpLmxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdEcmFmdElkID0gYXdhaXQgY29tcHV0ZVByZWRlc3RpbmF0ZWRJZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjaG9vbEVudGl0eS5vZmZpY2lhbEJyYW5jaElkICsgY291cnNlSWQgKyBcImRyYWZ0XCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdEcmFmdEJyYW5jaERvYzogQnJhbmNoID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IG5ld0RyYWZ0SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2w6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJyb2xlOlVTRVI6UlwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgc2Nob29sUm9sZToke3NjaG9vbEVudGl0eS5uYW1lfS9FTVBMT1lFRTpTYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdkcmFmdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2hvb2xJZDogc2Nob29sRW50aXR5LmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJlZVBhcmVudElkOiBzY2hvb2xFbnRpdHkub2ZmaWNpYWxCcmFuY2hJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ3M6IFtjb3Vyc2VJZF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRiLmJyYW5jaGVzLmFkZFJlbGF0ZWQoc2Nob29sRW50aXR5Lm9mZmljaWFsQnJhbmNoSWQsIFwiYXBwcm92ZWRDaGlsZHJlblwiLCBuZXdEcmFmdEJyYW5jaERvYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgZGIuc2F2ZU5vdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGhpc3RvcnkucHVzaChgLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlSWR9L3RhYnMvJHt0YWIgPyB0YWIuaWQgOiAnJCd9L2RyYWZ0cy8ke25ld0RyYWZ0SWR9L2VkaXRgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93RXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgIHtleGlzdGluZ0RyYWZ0SWQgPyA8PlxyXG4gICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtbGcgZmEtcGVuY2lsXCIgLz4ge2RyYWZ0SWQgPyBMYEZvcnRzw6R0dCByZWRpZ2VyYWA6IExgUmVkaWdlcmFgfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvPiA6IDw+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1sZyBmYS1wbHVzXCIgLz4ge0xgU2thcGEgc2tvbGFucyB2ZXJzaW9uIGF2IGt1cnNlbmB9XHJcbiAgICAgICAgICAgICAgICAgICAgPC8+XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8L0hvcml6b250YWxJdGVtPlxyXG4gICAgICAgICAgICAgICAge2RyYWZ0SWQgfHwgIWV4aXN0aW5nRHJhZnRJZCA/IHVuZGVmaW5lZCA6IDxIb3Jpem9udGFsSXRlbT5cclxuICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ0biBidG4tbGFyZ2VcIlxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpPT5oaXN0b3J5LnB1c2goYC8ke3NjaG9vbH0vY291cnNlcy8ke2NvdXJzZUlkfS90YWJzLyR7dGFiID8gdGFiLmlkIDogJyQnfS9kcmFmdHMvJHtleGlzdGluZ0RyYWZ0SWR9YCl9XHJcbiAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1leWVcIiAvPiB7TGBWaXNhIHJlZGlnZXJhZCB2ZXJzaW9uYH1cclxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8L0hvcml6b250YWxJdGVtPn1cclxuICAgICAgICAgICAgICA8Lz4pXHJcbiAgICAgICAgICB9PC9MYXp5Q29udGVudD5cclxuICAgICAgICAgIHtkcmFmdElkICYmIDxIb3Jpem9udGFsSXRlbT5cclxuICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ0biBidG4tbGFyZ2VcIlxyXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpPT57XHJcbiAgICAgICAgICAgICAgICBoaXN0b3J5LnB1c2goYC8ke3NjaG9vbH0vY291cnNlcy8ke2NvdXJzZUlkfS90YWJzLyR7dGFiID8gdGFiLmlkIDogJyQnfWApO1xyXG4gICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1sZyBmYS1hcnJvdy1sZWZ0XCIgLz4ge0xgQXZzbHV0YSByZWRpZ2VyaW5nYH1cclxuICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICA8L0hvcml6b250YWxJdGVtPn1cclxuICAgICAgICA8L0FsaWduSG9yaXpvbnRhbD5cclxuICAgICAgPC8+OiB1bmRlZmluZWQgOlxyXG4gICAgICAgIDw+XHJcbiAgICAgICAgICA8YnIvPlxyXG4gICAgICAgICAgPGhyIC8+XHJcbiAgICAgICAgICA8RWRpdG9yRm9vdGVyQnV0dG9uc1xyXG4gICAgICAgICAgICBzY2hvb2w9e3NjaG9vbH1cclxuICAgICAgICAgICAgY291cnNlPXtjb3Vyc2UgYXMgQ291cnNlSW5zdGFuY2V9XHJcbiAgICAgICAgICAgIHRhYj17dGFifVxyXG4gICAgICAgICAgICBhY3RpdmVUYWI9e2FjdGl2ZVRhYn1cclxuICAgICAgICAgICAgZHJhZnRJZD17ZHJhZnRJZH1cclxuICAgICAgICAgICAgY291cnNlVHlwZT17Y291cnNlLnR5cGV9XHJcbiAgICAgICAgICAgIGJsb2NrSWQ9e2Jsb2NrICYmIGJsb2NrLmlkfVxyXG4gICAgICAgICAgLz5cclxuICAgICAgICA8Lz5cclxuICAgICAgfVxyXG4gICAgPC8+XHJcbiAgfSAvPlxyXG59KTtcclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBDb3Vyc2VUYWIsIENvdXJzZUluc3RhbmNlLCBSaWNoVGV4dENvbnRlbnQsIFRhc2ssIExlYXJuaW5nR29hbHNDb250ZW50LCBUaGVtZUNvdXJzZVRhYiwgU3RlcENvdXJzZVRhYiwgQ291cnNlQmxvY2ssIFRoZW1lQ291cnNlSW5zdGFuY2UsIFN0ZXBDb3Vyc2VJbnN0YW5jZSB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgU3RyaXBHcmFwaHMsIFdpdGhHcmFwaHMsIEtlZEJhY2tlbmRSZXBvIH0gZnJvbSAna2VkYmFja2VuZC9yZXBvJztcclxuaW1wb3J0IHsgTCB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgY3JlYXRlVVVJRCB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcclxuaW1wb3J0IHsgd2l0aFJvdXRlciwgUm91dGVDb21wb25lbnRQcm9wcyB9IGZyb20gJ3JlYWN0LXJvdXRlcic7XHJcbmltcG9ydCBlbnYgZnJvbSAnLi4vLi4vLi4vLi4vZ2xvYmFscy9LRUQuZW52JztcclxuaW1wb3J0IHsgZGIgfSBmcm9tICcuLi8uLi8uLi8uLi9nbG9iYWxzL2RiJztcclxuaW1wb3J0IHsgZ2V0Q291cnNlQ29kZXNGcm9tVGFncyB9IGZyb20gJy4uLy4uL2xvZ2ljL2dldC1jb3Vyc2UtY29kZXMtZnJvbS10YWdzJztcclxuaW1wb3J0IHsgaXNLZWRTdGFmZiB9IGZyb20gJy4uLy4uL2xvZ2ljL2lzLWtlZC1zdGFmZic7XHJcbmltcG9ydCB7IGNvbXB1dGVUYXNrVGFnc0FuZFN1YmplY3QgfSBmcm9tICcuLi8uLi9sb2dpYy9jb21wdXRlLXRhc2stdGFncy1hbmQtc3ViamVjdCc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMgZXh0ZW5kcyBSb3V0ZUNvbXBvbmVudFByb3BzIHtcclxuICBicmFuY2g6IEtlZEJhY2tlbmRSZXBvO1xyXG4gIHNjaG9vbDogc3RyaW5nO1xyXG4gIGNvdXJzZTogU3RyaXBHcmFwaHM8Q291cnNlSW5zdGFuY2U+O1xyXG4gIHRhYjogU3RyaXBHcmFwaHM8VGhlbWVDb3Vyc2VUYWIgfCBTdGVwQ291cnNlVGFiPjtcclxuICBkcmFmdElkOiBzdHJpbmc7XHJcbiAgY29udGVudDogTGVhcm5pbmdHb2Fsc0NvbnRlbnQ7XHJcbiAgYmxvY2s/OiBDb3Vyc2VCbG9jaztcclxuICBsZWFybmluZ0dvYWw6IHN0cmluZztcclxufVxyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICBlZGl0aW5nTmFtZTogYm9vbGVhbjtcclxuICBuYW1lOiBzdHJpbmc7XHJcbn1cclxuXHJcbmNsYXNzIEFkZFRhc2tCdXR0b24gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsIFN0YXRlPiB7XHJcbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICBlZGl0aW5nTmFtZTogZmFsc2UsXHJcbiAgICAgIG5hbWU6IFwiXCJcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgY3JlYXRlVGFzayh0YXNrTmFtZTogc3RyaW5nKSB7XHJcbiAgICB0aGlzLnNldFN0YXRlKHtlZGl0aW5nTmFtZTogZmFsc2UsIG5hbWU6IFwiXCJ9KTtcclxuICAgIGNvbnN0IHticmFuY2gsIGRyYWZ0SWQsIGNvdXJzZSwgdGFiLCBzY2hvb2wsIGNvbnRlbnQsIGhpc3RvcnksIGJsb2NrLCBsZWFybmluZ0dvYWx9ID0gdGhpcy5wcm9wcztcclxuICAgIC8vY29uc3QgY291cnNlID0gYXdhaXQgZGIuY291cnNlSW5zdGFuY2VzLmlkKGNvdXJzZUlkKS5sb2FkKCk7XHJcbiAgICAvL2NvbnN0IGNvdXJzZVZpZXdlclVybEtTID0gZW52LmNvdXJzZVZpZXdlclVybEtTO1xyXG4gICAgY29uc3QgeyB0YWdzLCBzdWJqZWN0IH0gPSBjb21wdXRlVGFza1RhZ3NBbmRTdWJqZWN0KGNvdXJzZSBhcyBDb3Vyc2VJbnN0YW5jZSwgdGFiIGFzIENvdXJzZVRhYiwgYmxvY2spO1xyXG4gICAgY29uc3QgbmV3VGFzazogVGFzayA9IHtcclxuICAgICAgaWQ6IGNyZWF0ZVVVSUQoKSxcclxuICAgICAgdGFncyxcclxuICAgICAgbmFtZTogdGFza05hbWUsXHJcbiAgICAgIGFjbDogWyBcInJvbGU6VVNFUjpSXCIsIGBzY2hvb2xSb2xlOiR7c2Nob29sfS9FTVBMT1lFRTpTYCBdLFxyXG4gICAgICB1cmw6IFwiXCIsXHJcbiAgICAgIHRhc2tUeXBlOiAndGFzaycsXHJcbiAgICAgIGxlYXJuaW5nR29hbDogbGVhcm5pbmdHb2FsLFxyXG4gICAgICBmdXR1cmVBYmlsaXRpZXM6IFtdLFxyXG4gICAgICByZXNvdXJjZXM6IFtdLFxyXG4gICAgICBzdWJqZWN0XHJcbiAgICB9O1xyXG4gICAgYnJhbmNoLmNvdXJzZUNvbnRlbnRzLmFkZFJlbGF0ZWQoY29udGVudC5pZCwgXCJ0YXNrc1wiLCBuZXdUYXNrKTtcclxuICAgIGF3YWl0IGJyYW5jaC5zYXZlTm93KCk7XHJcbiAgICBoaXN0b3J5LnB1c2goYC8ke3NjaG9vbH0vY291cnNlcy8ke2NvdXJzZS5pZH0vdGFicy8ke3RhYi5pZH0vY29udGVudHMvJHtjb250ZW50LmlkfS90YXNrcy8ke25ld1Rhc2suaWR9L2RyYWZ0cy8ke2RyYWZ0SWR9L2VkaXRgKTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHtlZGl0aW5nTmFtZSwgbmFtZX0gPSB0aGlzLnN0YXRlO1xyXG4gICAgcmV0dXJuIDw+XHJcbiAgICAgICAgPGEgY2xhc3NOYW1lPVwiYnRuXCJcclxuICAgICAgICAgIG9uQ2xpY2s9e2VkaXRpbmdOYW1lID8gbnVsbCA6IGV2ID0+IHRoaXMuc2V0U3RhdGUoe2VkaXRpbmdOYW1lOiB0cnVlLCBuYW1lOiAnJ30pfT5cclxuICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLXBsdXNcIiBhcmlhLWhpZGRlbj1cInRydWVcIiAvPlxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICAhZWRpdGluZ05hbWUgP1xyXG4gICAgICAgICAgICAgICcgJyArIChpc0tlZFN0YWZmKCkgPyBMYEzDpGdnIHRpbGwgdXBwZ2lmdGAgOiBMYEzDpGdnIHRpbGwgZWdlbiB1cHBnaWZ0YCk6XHJcbiAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcclxuICAgICAgICAgICAgICBhdXRvRm9jdXNcclxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17TGBVcHBnaWZ0ZW5zIG5hbW5gfVxyXG4gICAgICAgICAgICAgIHZhbHVlPXtuYW1lfVxyXG4gICAgICAgICAgICAgIHNpemU9ezUwfVxyXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXtldiA9PiB0aGlzLnNldFN0YXRlKHtuYW1lOiBldi50YXJnZXQudmFsdWV9KX1cclxuICAgICAgICAgICAgICBvbktleVByZXNzPXtldiA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXYua2V5ID09PSAnRW50ZXInKSB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlVGFzayhuYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgIG9uQmx1cj17KCk9PnRoaXMuc2V0U3RhdGUoe2VkaXRpbmdOYW1lOiBmYWxzZX0pfVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIDwvYT5cclxuICAgIDwvPjtcclxuICB9XHJcbn1cclxuY29uc3QgQWRkVGFza0J1dHRvbldpdGhSb3V0ZXIgPSB3aXRoUm91dGVyKEFkZFRhc2tCdXR0b24pXHJcbmV4cG9ydCB7QWRkVGFza0J1dHRvbldpdGhSb3V0ZXIgYXMgQWRkVGFza0J1dHRvbn07XHJcblxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBDb3Vyc2VDb250ZW50LCBSZXNvdXJjZUxpc3QsIENvdXJzZUluc3RhbmNlLCBSaWNoVGV4dENvbnRlbnQsIExlYXJuaW5nR29hbHNDb250ZW50LCBDb3Vyc2VUYWIsIENvdXJzZUJsb2NrLCBFbWJlZGRlZEhUTUxDb250ZW50LCBXb3JkQmFua0NvbnRlbnQsIFN0ZXBDb3Vyc2VJbnN0YW5jZSwgU3RlcENvdXJzZVRhYiB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgS2VkQmFja2VuZFJlcG8sIFN0cmlwR3JhcGhzLCBXaXRoR3JhcGhzIH0gZnJvbSAna2VkYmFja2VuZC9yZXBvJztcclxuaW1wb3J0IHsgUmljaFRleHRDb250ZW50Qm94IH0gZnJvbSAnLi9yaWNoLXRleHQnO1xyXG5pbXBvcnQgeyBMZWFybmluZ1Rhc2tzQ29udGVudEJveCB9IGZyb20gJy4vbGVhcm5pbmctdGFza3MtY29udGVudC1ib3gnO1xyXG5pbXBvcnQgeyBFbWJlZGRlZEhUTUxDb250ZW50Qm94IH0gZnJvbSAnLi9lbWJlZGRlZC1odG1sJztcclxuaW1wb3J0IHsgV29yZEJhbmtDb250ZW50Qm94IH0gZnJvbSAnLi93b3JkLWJhbmstY29udGVudC1ib3gnO1xyXG5pbXBvcnQgeyBSZXNvdXJjZUxpc3RDb250ZW50Qm94IH0gZnJvbSAnLi9yZXNvdXJjZS1saXN0JztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ291cnNlQ29udGVudFByb3BzIHtcclxuICByZXBvOiBLZWRCYWNrZW5kUmVwbztcclxuICBjb3Vyc2U6IFN0cmlwR3JhcGhzPENvdXJzZUluc3RhbmNlPjtcclxuICBjb250ZW50OiBXaXRoR3JhcGhzPENvdXJzZUNvbnRlbnQsIFwidGFza3NcIj47XHJcbiAgc2libGluZ0NvbnRlbnRzOiBXaXRoR3JhcGhzPENvdXJzZUNvbnRlbnQsIFwidGFza3NcIj5bXTsgLy8gU2libGluZyBjb250ZW50cyBpbmNsdWRpbmcgc2VsZlxyXG4gIGVkaXRNb2RlOiBib29sZWFuO1xyXG4gIHNjaG9vbDogc3RyaW5nO1xyXG4gIGNvdXJzZVRhYjogU3RyaXBHcmFwaHM8Q291cnNlVGFiPjtcclxuICBkcmFmdElkOiBzdHJpbmc7XHJcbiAgcmVwb3J0TnVtQ2hhcnM/OiAobnVtQ2hhcnM6IG51bWJlcikgPT4gdm9pZDtcclxuICBtYXhDaGFycz86IG51bWJlcjtcclxuICBibG9jaz86IENvdXJzZUJsb2NrO1xyXG59XHJcblxyXG4vKmV4cG9ydCBjb25zdCBDb250ZW50Qm94ID0gKHtyZXBvLCBjb250ZW50fTogQ291cnNlQ29udGVudFByb3BzKT0+IChcclxuICA8ZGl2IGNsYXNzTmFtZT17W1wiY291cnNlLWNvbnRlbnQtYm94XCIsIFwia2VkX2JveGVkXCJdLmpvaW4oJyAnKX0gc3R5bGU9e3twb3NpdGlvbjogJ3JlbGF0aXZlJ319PlxyXG4gICAgPENvbmNyZXRlQ29tcG9uZW50IHsuLi57cmVwbywgY29udGVudH19IC8+ICAgIFxyXG4gICAgPGRpdiBzdHlsZT17e3Bvc2l0aW9uOiAnYWJzb2x1dGUnLCB0b3A6IDAsIHJpZ2h0OiAwfX0+XHJcbiAgICAgICAge21vZHVsZU9yZGVyZWRJbmRleCA+IDAgJiYgPHNwYW4+XHJcbiAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1hcnJvdy1jaXJjbGUtdXAgc2VsZWN0YWJsZVwiXHJcbiAgICAgICAgICAgIGFyaWEtaGlkZGVuPVwidHJ1ZVwiXHJcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpPT50aGlzLnByb3BzLm9uUmVvcmRlcigtMSl9IC8+IDwvc3Bhbj59XHJcbiAgICAgICAge21vZHVsZU9yZGVyZWRJbmRleCA8IGNvdXJzZS5tb2R1bGVzLmxlbmd0aCAtIDEgJiYgPHNwYW4+XHJcbiAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1hcnJvdy1jaXJjbGUtZG93biBzZWxlY3RhYmxlXCJcclxuICAgICAgICAgICAgYXJpYS1oaWRkZW49XCJ0cnVlXCJcclxuICAgICAgICAgICAgb25DbGljaz17KCk9PnRoaXMucHJvcHMub25SZW9yZGVyKDEpfSAvPiA8L3NwYW4+fVxyXG4gICAgICAgIDxSZW1vdmVJdGVtXHJcbiAgICAgICAgICB0aXRsZT1cIlRhIGJvcnQgbW9kdWxlblwiXHJcbiAgICAgICAgICBzdHlsZT17e2Rpc3BsYXk6ICdpbmxpbmUtYmxvY2snfX1cclxuICAgICAgICAgIG9uQ2xpY2s9eygpPT5jb25maXJtKExgVGEgYm9ydCBtb2R1bCAke21vZHVsZS5uYW1lfT9gKSAmJiBob3N0LnVwZGF0ZSh7bW9kdWxlczogeyRzcGxpY2U6IFtbbW9kdWxlSW5kZXgsIDFdXX19KX0gLz5cclxuICAgICAgPC9kaXY+ICAgIFxyXG4gIDwvZGl2PlxyXG4pKi9cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBDb3Vyc2VDb250ZW50Qm94KHtyZXBvLCBjb250ZW50LCBzaWJsaW5nQ29udGVudHMsIGVkaXRNb2RlLCBjb3Vyc2UsIGRyYWZ0SWQsIHNjaG9vbCwgY291cnNlVGFiLCByZXBvcnROdW1DaGFycywgbWF4Q2hhcnMsIGJsb2NrfTogQ291cnNlQ29udGVudFByb3BzKSB7XHJcbiAgc3dpdGNoIChjb250ZW50LnR5cGUpIHtcclxuICAgIGNhc2UgXCJyaWNoLXRleHRcIjogcmV0dXJuIDxSaWNoVGV4dENvbnRlbnRCb3ggey4uLntyZXBvLCBjb250ZW50OiBjb250ZW50IGFzIFJpY2hUZXh0Q29udGVudCwgZWRpdE1vZGUsIHJlcG9ydE51bUNoYXJzLCBtYXhDaGFyc319IC8+XHJcbiAgICBjYXNlIFwibGVhcm5pbmctZ29hbHNcIjogcmV0dXJuIDxMZWFybmluZ1Rhc2tzQ29udGVudEJveCB7Li4ue1xyXG4gICAgICByZXBvLFxyXG4gICAgICBjb250ZW50OiBjb250ZW50IGFzIFdpdGhHcmFwaHM8TGVhcm5pbmdHb2Fsc0NvbnRlbnQsIFwidGFza3NcIj4sXHJcbiAgICAgIGVkaXRNb2RlLFxyXG4gICAgICBjb3Vyc2UsXHJcbiAgICAgIGRyYWZ0SWQsXHJcbiAgICAgIGNvdXJzZVRhYixcclxuICAgICAgc2Nob29sLFxyXG4gICAgICBibG9ja319IC8+XHJcbiAgICBjYXNlIFwicmVzb3VyY2UtbGlzdFwiOiByZXR1cm4gPFJlc291cmNlTGlzdENvbnRlbnRCb3ggey4uLntyZXBvLCBjb250ZW50OiBjb250ZW50IGFzIFJlc291cmNlTGlzdCwgZWRpdE1vZGV9fSAvPlxyXG4gICAgY2FzZSBcImVtYmVkZGVkLWh0bWxcIjogcmV0dXJuIDxFbWJlZGRlZEhUTUxDb250ZW50Qm94IHsuLi57cmVwbywgY29udGVudDogY29udGVudCBhcyBFbWJlZGRlZEhUTUxDb250ZW50LCBlZGl0TW9kZSwgcmVwb3J0TnVtQ2hhcnMsIG1heENoYXJzfX0gLz5cclxuICAgIGNhc2UgXCJ3b3JkLWJhbmtcIjogcmV0dXJuIDxXb3JkQmFua0NvbnRlbnRCb3ggey4uLntcclxuICAgICAgcmVwbyxcclxuICAgICAgZWRpdE1vZGUsIFxyXG4gICAgICBjb250ZW50OiBjb250ZW50IGFzIFdvcmRCYW5rQ29udGVudCxcclxuICAgICAgc2libGluZ1dvcmRCYW5rczogc2libGluZ0NvbnRlbnRzLmZpbHRlcihjID0+IGMudHlwZSA9PT0gJ3dvcmQtYmFuaycgJiYgYy5pZCAhPT0gY29udGVudC5pZCkgYXMgV29yZEJhbmtDb250ZW50W10sXHJcbiAgICAgIGNvdXJzZTogY291cnNlIGFzIFN0ZXBDb3Vyc2VJbnN0YW5jZSxcclxuICAgICAgY291cnNlVGFiOiBjb3Vyc2VUYWIgYXMgV2l0aEdyYXBoczxTdGVwQ291cnNlVGFiLCBcImNvbnRlbnRzXCI+fX0gLz5cclxuICAgIGRlZmF1bHQ6IHJldHVybiA8cD5Pa8OkbmQgaW5uZWjDpWxsc3R5cDoge2NvbnRlbnQudHlwZX08L3A+O1xyXG4gIH1cclxufSIsImltcG9ydCB7IEwgfSBmcm9tICcuLi8uLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IENvdXJzZUNvbnRlbnQgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcblxyXG5leHBvcnQgdHlwZSBDb3Vyc2VDb250ZW50VHlwZXMgPSBDb3Vyc2VDb250ZW50W1widHlwZVwiXTtcclxuXHJcbmV4cG9ydCBjb25zdCBDT1VSU0VfQ09OVEVOVF9UWVBFUzoge1t0eXBlIGluIENvdXJzZUNvbnRlbnRUeXBlc106IHN0cmluZ30gPSB7XHJcbiAgXCJyaWNoLXRleHRcIjogTGBUZXh0cnV0YWAsXHJcbiAgXCJ5b3V0dWJlLW1vdmllXCI6IExgWW91dHViZSBmaWxtYCxcclxuICBcImxlYXJuaW5nLWdvYWxzXCI6IExgTMOkcmFuZGVtw6VsIG9jaCB1cHBnaWZ0ZXJgLFxyXG4gIFwicmVzb3VyY2UtbGlzdFwiOiBMYFJlc3Vyc2xpc3RhYCxcclxuICBcImVtYmVkZGVkLWh0bWxcIjogTGBJbmLDpGRkYWQgSFRNTGAsXHJcbiAgXCJ3b3JkLWJhbmtcIjogTGBPcmRiYW5rYFxyXG59O1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBFbWJlZGRlZEhUTUxDb250ZW50IH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kUmVwbyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IGlzS2VkU3RhZmYgfSBmcm9tICcuLi8uLi9sb2dpYy9pcy1rZWQtc3RhZmYnO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICByZXBvOiBLZWRCYWNrZW5kUmVwbztcclxuICBjb250ZW50OiBFbWJlZGRlZEhUTUxDb250ZW50O1xyXG4gIGVkaXRNb2RlOiBib29sZWFuO1xyXG4gIG1heENoYXJzPzogbnVtYmVyO1xyXG4gIHJlcG9ydE51bUNoYXJzPzogKG51bUNoYXJzOiBudW1iZXIpID0+IHZvaWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBFbWJlZGRlZEhUTUxDb250ZW50Qm94ID0gKHtjb250ZW50LCByZXBvLCBlZGl0TW9kZSwgcmVwb3J0TnVtQ2hhcnMsIG1heENoYXJzfTogUHJvcHMpID0+XHJcbiAgZWRpdE1vZGUgJiYgKCFjb250ZW50LmxvY2tlZCB8fCBpc0tlZFN0YWZmKCkpID9cclxuICAgIDxkaXY+XHJcbiAgICAgIDxoND57TGBJbmLDpGRkYXQgbWF0ZXJpYWxgfTwvaDQ+XHJcbiAgICAgIDxwPntMYEtsaXBwIGluIEhUTUwga29kIG5lZGFuYH08L3A+XHJcbiAgICAgIDx0ZXh0YXJlYSBzdHlsZT17e3dpZHRoOiBcIjEwMCVcIiwgaGVpZ2h0OiBcIjEwMHB4XCJ9fVxyXG4gICAgICAgIHZhbHVlPXtjb250ZW50Lmh0bWx9XHJcbiAgICAgICAgb25DaGFuZ2U9eyh7dGFyZ2V0OiB7dmFsdWU6IGh0bWx9fSkgPT5cclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGh0bWwubGVuZ3RoID4gbWF4Q2hhcnMpIHJldHVybjtcclxuICAgICAgICAgICAgcmVwby5jb3Vyc2VDb250ZW50cy51cGRhdGU8RW1iZWRkZWRIVE1MQ29udGVudD4oY29udGVudCwge2h0bWx9KTtcclxuICAgICAgICAgICAgcmVwb3J0TnVtQ2hhcnMoaHRtbC5sZW5ndGgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gLz5cclxuICAgIDwvZGl2PiA6XHJcbiAgICA8ZGl2IGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXt7X19odG1sOiBjb250ZW50Lmh0bWx9fSAvPjtcclxuIiwiZXhwb3J0ICogZnJvbSAnLi9jb3Vyc2UtY29udGVudC10eXBlcyc7XHJcbmV4cG9ydCAqIGZyb20gJy4vY29udGVudC1ib3gnO1xyXG5leHBvcnQgKiBmcm9tICcuL3JpY2gtdGV4dCc7XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRSZXBvLCBXaXRoR3JhcGhzLCBTdHJpcEdyYXBocyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IExlYXJuaW5nR29hbHNDb250ZW50LCBDb3Vyc2VJbnN0YW5jZSwgQ291cnNlVGFiLCBUaGVtZUNvdXJzZUluc3RhbmNlLCBDb3Vyc2VCbG9jayB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgTCB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgTGVhcm5pbmdUYXNrc1NldHRpbmdzIH0gZnJvbSAnLi9sZWFybmluZy10YXNrcy1zZXR0aW5ncyc7XHJcbmltcG9ydCB7IGlzS2VkU3RhZmYgfSBmcm9tICcuLi8uLi9sb2dpYy9pcy1rZWQtc3RhZmYnO1xyXG5pbXBvcnQgeyBMZWFybmluZ1Rhc2tzV2l0aENvbW1vbkdvYWxzIH0gZnJvbSAnLi9sZWFybmluZy10YXNrcy13aXRoLWNvbW1vbi1nb2Fscyc7XHJcbmltcG9ydCB7IExlYXJuaW5nVGFza3NXaXRoU2VwYXJhdGVHb2FscyB9IGZyb20gJy4vbGVhcm5pbmctdGFza3Mtd2l0aC1zZXBhcmF0ZS1nb2Fscyc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHJlcG86IEtlZEJhY2tlbmRSZXBvO1xyXG4gIGNvdXJzZTogU3RyaXBHcmFwaHM8Q291cnNlSW5zdGFuY2U+O1xyXG4gIGNvbnRlbnQ6IFdpdGhHcmFwaHM8TGVhcm5pbmdHb2Fsc0NvbnRlbnQsIFwidGFza3NcIj47XHJcbiAgZWRpdE1vZGU6IGJvb2xlYW47XHJcbiAgc2Nob29sOiBzdHJpbmc7XHJcbiAgZHJhZnRJZDogc3RyaW5nO1xyXG4gIGNvdXJzZVRhYjogU3RyaXBHcmFwaHM8Q291cnNlVGFiPjtcclxuICBibG9jaz86IENvdXJzZUJsb2NrO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IExlYXJuaW5nVGFza3NDb250ZW50Qm94ID0gKHtjb250ZW50LCBlZGl0TW9kZSwgcmVwbywgY291cnNlLCBzY2hvb2wsIGRyYWZ0SWQsIGNvdXJzZVRhYiwgYmxvY2t9OiBQcm9wcykgPT4ge1xyXG4gIGNvbnN0IHsgaGFzQ29tbW9uTGVhcm5pbmdHb2FscywgY29tbW9uTGVhcm5pbmdHb2FscywgdGFza3MgfSA9IGNvbnRlbnQ7XHJcbiAgY29uc3QgcmVmaW5lZExlYXJuaW5nR29hbHMgPSBjb21tb25MZWFybmluZ0dvYWxzXHJcbiAgICAubWFwKGdvYWwgPT4gZ29hbC50cmltKCkpLmZpbHRlcihnb2FsID0+ICEhZ29hbCk7XHJcbiAgXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXYgY2xhc3NOYW1lPVwia2VkX2JveGVkXCI+XHJcbiAgICB7ZWRpdE1vZGUgJiYgKCFjb250ZW50LmxvY2tlZCB8fCBpc0tlZFN0YWZmKCkpID9cclxuICAgICAgPExlYXJuaW5nVGFza3NTZXR0aW5ncyBjb3Vyc2U9e2NvdXJzZX0gY29udGVudD17Y29udGVudH0gcmVwbz17cmVwb30gdGFiPXtjb3Vyc2VUYWJ9IC8+OlxyXG4gICAgICBjb3Vyc2VUYWIudGFiQ2xhc3MgIT09ICdtaXNzaW9uLXRhYicgP1xyXG4gICAgICAgIDxoMj57TGBMw6RyYW5kZW3DpWwgb2NoIHVwcGdpZnRlcmB9PC9oMj4gOlxyXG4gICAgICAgIDxoMj57TGBVcHBkcmFnYH08L2gyPlxyXG4gICAgICB9XHJcbiAgICA8aHIgLz5cclxuICAgIHtoYXNDb21tb25MZWFybmluZ0dvYWxzICYmIGNvdXJzZVRhYi50YWJDbGFzcyAhPT0gJ21pc3Npb24tdGFiJyA/XHJcbiAgICAgIDxMZWFybmluZ1Rhc2tzV2l0aENvbW1vbkdvYWxzIHsuLi57Y29udGVudCwgZWRpdE1vZGUsIHJlcG8sIGNvdXJzZSwgc2Nob29sLCBkcmFmdElkLCBjb3Vyc2VUYWIsIGJsb2NrLCBsZWFybmluZ0dvYWxzOiByZWZpbmVkTGVhcm5pbmdHb2Fsc319IC8+IDpcclxuICAgICAgPExlYXJuaW5nVGFza3NXaXRoU2VwYXJhdGVHb2FscyB7Li4ue2NvbnRlbnQsIGVkaXRNb2RlLCByZXBvLCBjb3Vyc2UsIHNjaG9vbCwgZHJhZnRJZCwgY291cnNlVGFiLCBibG9jaywgbGVhcm5pbmdHb2FsczogcmVmaW5lZExlYXJuaW5nR29hbHN9fSAvPlxyXG4gICAgfVxyXG4gICAgPC9kaXY+XHJcbiAgKTtcclxufVxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBMZWFybmluZ0dvYWxzQ29udGVudCwgQ291cnNlSW5zdGFuY2UsIENvdXJzZVRhYiB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgS2VkQmFja2VuZFJlcG8sIFN0cmlwR3JhcGhzIH0gZnJvbSAna2VkYmFja2VuZC9yZXBvJztcclxuaW1wb3J0IHsgTCB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgQWxpZ25Ib3Jpem9udGFsIH0gZnJvbSAnLi4vLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2FsaWduLWhvcml6b250YWwnO1xyXG5pbXBvcnQgeyBIb3Jpem9udGFsSXRlbSB9IGZyb20gJy4uLy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9ob3Jpem9udGFsLWl0ZW0nO1xyXG5pbXBvcnQgeyBpc0tlZFN0YWZmIH0gZnJvbSAnLi4vLi4vbG9naWMvaXMta2VkLXN0YWZmJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgY291cnNlOiBTdHJpcEdyYXBoczxDb3Vyc2VJbnN0YW5jZT4sXHJcbiAgY29udGVudDogTGVhcm5pbmdHb2Fsc0NvbnRlbnQ7XHJcbiAgcmVwbzogS2VkQmFja2VuZFJlcG87XHJcbiAgdGFiOiBTdHJpcEdyYXBoczxDb3Vyc2VUYWI+O1xyXG59XHJcbmV4cG9ydCBjb25zdCBMZWFybmluZ1Rhc2tzU2V0dGluZ3MgPSAoe3RhYiwgY29udGVudCwgcmVwb306IFByb3BzKSA9PiA8ZGl2PlxyXG4gIDxoMj57dGFiLnRhYkNsYXNzICE9PSAnbWlzc2lvbi10YWInID9cclxuICAgIExgTMOkcmFuZGVtw6VsIG9jaCB1cHBnaWZ0ZXJgIDpcclxuICAgIExgVXBwZHJhZ2B9PC9oMj5cclxuICB7aXNLZWRTdGFmZigpICYmIHRhYi50YWJDbGFzcyAhPT0gJ21pc3Npb24tdGFiJyA/IDw+XHJcbiAgICA8ZGl2PjxBbGlnbkhvcml6b250YWw+XHJcbiAgICAgIDxIb3Jpem9udGFsSXRlbT5cclxuICAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgY2hlY2tlZD17Y29udGVudC5oYXNDb21tb25MZWFybmluZ0dvYWxzfVxyXG4gICAgICAgIG9uQ2hhbmdlPXtldiA9PiByZXBvLmNvdXJzZUNvbnRlbnRzLnVwZGF0ZTxMZWFybmluZ0dvYWxzQ29udGVudD4oY29udGVudCwge2hhc0NvbW1vbkxlYXJuaW5nR29hbHM6ICEhZXYudGFyZ2V0LmNoZWNrZWR9KX0gLz5cclxuICAgICAgPC9Ib3Jpem9udGFsSXRlbT5cclxuICAgICAgPEhvcml6b250YWxJdGVtPlxyXG4gICAgICAgIDxwPlxyXG4gICAgICAgICZuYnNwO3tMYFNwZWNpZmljZXJhIGdlbWVuc2FtbWEgbMOkcmFuZGVtw6VsIGbDtnIgc2FtdGxpZ2EgdXBwZ2lmdGVyYH1cclxuICAgICAgICA8L3A+XHJcbiAgICAgIDwvSG9yaXpvbnRhbEl0ZW0+XHJcbiAgICA8L0FsaWduSG9yaXpvbnRhbD48L2Rpdj5cclxuXHJcbiAgICA8ZGl2PlxyXG4gICAgICA8cD5cclxuICAgICAgICAgIHtjb250ZW50Lmhhc0NvbW1vbkxlYXJuaW5nR29hbHMgP1xyXG4gICAgICAgICAgICBMYEFuZ2UgZGUgZ2VtZW5zYW1tYSBsw6RyYW5kZW3DpWxlbi4gQW5nZSBldHQgbMOkcmFuZGVtw6VsIHBlciByYWQuYCA6XHJcbiAgICAgICAgICAgIExgQW5nZSBldHQgbMOkcmFuZGVtw6VsIHBlciByYWQuYFxyXG4gICAgICAgICAgfVxyXG4gICAgICA8L3A+XHJcbiAgICAgICAgPHRleHRhcmVhIGNsYXNzTmFtZT1cImxlYXJuaW5nLWdvYWwtYm94XCIgdmFsdWU9e2NvbnRlbnQuY29tbW9uTGVhcm5pbmdHb2Fscy5qb2luKCdcXG4nKX1cclxuICAgICAgICAgIG9uQ2hhbmdlPXtldiA9PiByZXBvLmNvdXJzZUNvbnRlbnRzLnVwZGF0ZTxMZWFybmluZ0dvYWxzQ29udGVudD4oY29udGVudCwge1xyXG4gICAgICAgICAgICBjb21tb25MZWFybmluZ0dvYWxzOiBldi50YXJnZXQudmFsdWUuc3BsaXQoJ1xcbicpXHJcbiAgICAgICAgICB9KX0gLz5cclxuICAgIDwvZGl2PlxyXG4gIDwvPiA6IG51bGx9XHJcbjwvZGl2PlxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kUmVwbywgV2l0aEdyYXBocywgU3RyaXBHcmFwaHMgfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBMZWFybmluZ0dvYWxzQ29udGVudCwgQ291cnNlSW5zdGFuY2UsIENvdXJzZUJsb2NrLCBDb3Vyc2VUYWIsIFN0ZXBDb3Vyc2VUYWIsIFRoZW1lQ291cnNlVGFiLCBTdGVwQ291cnNlSW5zdGFuY2UsIFRhc2sgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IEwsIGFycmF5VG9Mb29rdXAgfSBmcm9tICcuLi8uLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IFRhc2tMaXN0LCBMZWFybmluZ01vZHVsZVRhc2sgfSBmcm9tICcuLi8uLi8uLi9jb3Vyc2Utdmlld2VyL3N1YmNvbXBvbmVudHMvdGFzay1saXN0JztcclxuaW1wb3J0IHsgQWRkVGFza0J1dHRvbiB9IGZyb20gJy4vYWRkLXRhc2stYnV0dG9uJztcclxuaW1wb3J0IHsgU29ydGFibGVUYXNrTGlzdCB9IGZyb20gJy4uLy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9zb3J0YWJsZS10YXNrLWxpc3QnO1xyXG5pbXBvcnQgeyBMaW5rIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XHJcbmltcG9ydCB7IGNvbXB1dGVVcGRhdGVkT3JkZXIsIGdldFNvcnRlZFRhc2tzIH0gZnJvbSAnLi4vLi4vbG9naWMvdGFzay1vcmRlcic7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHNjaG9vbDogc3RyaW5nO1xyXG4gIHJlcG86IEtlZEJhY2tlbmRSZXBvO1xyXG4gIGNvdXJzZTogU3RyaXBHcmFwaHM8Q291cnNlSW5zdGFuY2U+O1xyXG4gIGNvdXJzZVRhYjogU3RyaXBHcmFwaHM8Q291cnNlVGFiPjtcclxuICBjb250ZW50OiBXaXRoR3JhcGhzPExlYXJuaW5nR29hbHNDb250ZW50LCBcInRhc2tzXCI+O1xyXG4gIGRyYWZ0SWQ6IHN0cmluZztcclxuICBlZGl0TW9kZTogYm9vbGVhbjtcclxuICBsZWFybmluZ0dvYWxzOiBzdHJpbmdbXTtcclxuICBibG9jaz86IENvdXJzZUJsb2NrO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgTGVhcm5pbmdUYXNrc1dpdGhDb21tb25Hb2FscyA9ICh7IHNjaG9vbCwgcmVwbywgY29udGVudCwgZHJhZnRJZCwgZWRpdE1vZGUsIGNvdXJzZSwgY291cnNlVGFiLCBsZWFybmluZ0dvYWxzLCBibG9jayB9OiBQcm9wcykgPT4ge1xyXG4gIGNvbnN0IHRhc2tzID0gZ2V0U29ydGVkVGFza3MoY29udGVudCk7XHJcbiAgY29uc3Qgc3ViamVjdFRvVGFza3NMb29rdXAgPSBhcnJheVRvTG9va3VwKHRhc2tzLCB0ID0+IHQuc3ViamVjdCB8fCBcIlwiKTtcclxuICBjb25zdCBzdWJqZWN0ID0gY291cnNlLnR5cGUgPT09ICdzdGVwLWNvdXJzZScgP1xyXG4gICAgKGNvdXJzZSBhcyBTdGVwQ291cnNlSW5zdGFuY2UpLnN1YmplY3QgOlxyXG4gICAgY291cnNlVGFiLnN1YmplY3Q7XHJcblxyXG4gIGlmIChzdWJqZWN0ICYmICFzdWJqZWN0VG9UYXNrc0xvb2t1cFtzdWJqZWN0LnN1YmplY3ROYW1lXSkge1xyXG4gICAgLy8gTWFrZSBzdXJlIHdlIGhhdmUgYXQgbGVhc3Qgb25lIHN1YmplY3QgaGVhZGluZyBpZiB0YXNrIGxpc3QgaXMgZW1wdHk6XHJcbiAgICBzdWJqZWN0VG9UYXNrc0xvb2t1cFtzdWJqZWN0LnN1YmplY3ROYW1lXSA9IFtdO1xyXG4gIH1cclxuICAvLyBUT0RPOiBLb2xsYSBow6RyIG9jaCBpIGxlYXJuaW5nLXRhc2tzLXdpdGgtc2VwYXJhdGUtZ29hbHMuXHJcbiAgLy8gICogQmVow7Z2cyBzdWJqZWN0LWxvb2t1cD9cclxuICAvLyAgKiBLYW4gdmkgYnJ5dGEgdnktdmFyaWFudGVuIGZyw6VuIGVkaXQgdmFyaWFudGVuPyAoaSBiw6VkYSBmYWxsZW4/KVxyXG4gIC8vIFNlZGFuOlxyXG4gIC8vICAqIEltcGxlbWVudGVyYSBlZGl0IHZhcmlhbnRlcm5hLiBMw6RnZyB0aWxsLlxyXG4gIC8vICAqIEltcGxlbWVudGVyYSBzb3J0ZXJpbmcgZnVua3Rpb25hbGl0ZXQgaSBTb3J0YWJsZVRhc2tMaXN0LlxyXG4gIC8vICAqIEkgYWxsIHZ5ZXIgYXYgdGFza3MgKHN1YmplY3QgcGxhbm5lciArIGNvdXJzZXZpZXdlcik6IFxyXG4gIC8vICAgICogR8OlIGlnZW5vbSBhbGxhIHRhc2sgaSBkZW4gb3JkbmluZ2VuIGRvbSByZWRhbiDDpHIgaVxyXG4gIC8vICAgICogXHJcbiAgcmV0dXJuIDw+XHJcbiAgICB7T2JqZWN0LmtleXMoc3ViamVjdFRvVGFza3NMb29rdXApLm1hcChzdWJqZWN0ID0+IHtcclxuICAgICAgY29uc3QgdGFza0xpc3QgPSBzdWJqZWN0VG9UYXNrc0xvb2t1cFtzdWJqZWN0XTtcclxuICAgICAgY29uc3QgbGVhcm5pbmdNb2R1bGVUYXNrczogTGVhcm5pbmdNb2R1bGVUYXNrW10gPSB0YXNrTGlzdC5tYXAodGFzayA9PiAoe1xyXG4gICAgICAgIGlkOiB0YXNrLmlkLFxyXG4gICAgICAgIG5hbWU6IHRhc2submFtZSxcclxuICAgICAgICB1cmw6IGVkaXRNb2RlID9cclxuICAgICAgICAgIGAjLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlLmlkfS90YWJzLyR7Y291cnNlVGFiLmlkfS9jb250ZW50cy8ke2NvbnRlbnQuaWR9L3Rhc2tzLyR7dGFzay5pZH0vZHJhZnRzLyR7ZHJhZnRJZH0vZWRpdGAgOlxyXG4gICAgICAgICAgZHJhZnRJZCA/XHJcbiAgICAgICAgICAgIGAjLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlLmlkfS90YWJzLyR7Y291cnNlVGFiLmlkfS9jb250ZW50cy8ke2NvbnRlbnQuaWR9L3Rhc2tzLyR7dGFzay5pZH0vZHJhZnRzLyR7ZHJhZnRJZH1gIDpcclxuICAgICAgICAgICAgYCMvJHtzY2hvb2x9L2NvdXJzZXMvJHtjb3Vyc2UuaWR9L3RhYnMvJHtjb3Vyc2VUYWIuaWR9L3Rhc2tzLyR7dGFzay5pZH1gLFxyXG4gICAgICAgIGNvdXJzZU5hbWU6IGNvdXJzZS5uYW1lLFxyXG4gICAgICAgIGxlYXJuaW5nR29hbDogc3ViamVjdCxcclxuICAgICAgICBzdGVwOiBjb3Vyc2VUYWIudHlwZSA9PT0gJ3N0ZXAtY291cnNlLXRhYicgPyAoY291cnNlVGFiIGFzIFN0ZXBDb3Vyc2VUYWIpLnN0ZXBObyA6IHVuZGVmaW5lZCxcclxuICAgICAgICB0YXNrLFxyXG4gICAgICAgIGNvdXJzZUluZm86IHtcclxuICAgICAgICAgIHNjaG9vbCxcclxuICAgICAgICAgIGNvdXJzZTogY291cnNlLmlkLFxyXG4gICAgICAgICAgdGFiOiBjb3Vyc2VUYWIuaWRcclxuICAgICAgICB9XHJcbiAgICAgIH0pKTtcclxuXHJcbiAgICAgIGZ1bmN0aW9uIGxpbmtUb1Rhc2sgKHRhc2s6IFRhc2spIHtcclxuICAgICAgICByZXR1cm4gYC8ke3NjaG9vbH0vY291cnNlcy8ke2NvdXJzZS5pZH0vdGFicy8ke2NvdXJzZVRhYi5pZH0vY29udGVudHMvJHtjb250ZW50LmlkfS90YXNrcy8ke3Rhc2suaWR9L2RyYWZ0cy8ke2RyYWZ0SWR9L2VkaXRgO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gKFxyXG4gICAgICAgIDxkaXYga2V5PXtzdWJqZWN0fT5cclxuICAgICAgICAgIDxoNT57c3ViamVjdH08L2g1PlxyXG4gICAgICAgICAgPHVsPlxyXG4gICAgICAgICAgICB7bGVhcm5pbmdHb2Fscy5tYXAobGcgPT4gPGxpIGtleT17bGd9PntsZ308L2xpPil9XHJcbiAgICAgICAgICA8L3VsPlxyXG4gICAgICAgICAgeyFlZGl0TW9kZSA/XHJcbiAgICAgICAgICAgIDxUYXNrTGlzdCBsZWFybmluZ1Rhc2tzPXtsZWFybmluZ01vZHVsZVRhc2tzfSAvPiA6IDw+XHJcbiAgICAgICAgICAgICAgPFNvcnRhYmxlVGFza0xpc3RcclxuICAgICAgICAgICAgICAgIHRhc2tNZXRhcz17bGVhcm5pbmdNb2R1bGVUYXNrcy5tYXAoKHt0YXNrfSkgPT4gKHt0YXNrLCBpc1Rhc2tPd25lcjogdHJ1ZX0pKX1cclxuICAgICAgICAgICAgICAgIHJlbmRlckVkaXRMaW5rPXsoe3Rhc2t9KSA9PiA8PjxMaW5rIHRvPXtsaW5rVG9UYXNrKHRhc2spfSBjbGFzc05hbWU9XCJlZGl0SXRlbVwiLz4mbmJzcDs8Lz59XHJcbiAgICAgICAgICAgICAgICByZW5kZXJMaW5rPXsoe3Rhc2t9KSA9PiA8TGluayB0bz17bGlua1RvVGFzayh0YXNrKX0+e3Rhc2submFtZX08L0xpbms+IH1cclxuICAgICAgICAgICAgICAgIG9uU29ydD17KHNvdXJjZSwgdGFyZ2V0LCBwbGFjZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZE9yZGVyID0gY29tcHV0ZVVwZGF0ZWRPcmRlciAoXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudC50YXNrcyxcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50LnRhc2tPcmRlcixcclxuICAgICAgICAgICAgICAgICAgICBzb3VyY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LFxyXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudCxcclxuICAgICAgICAgICAgICAgICAgICB7YXBwZW5kTGVmdG92ZXJzOiB0cnVlfSk7XHJcbiAgICAgICAgICAgICAgICAgIHJlcG8uY291cnNlQ29udGVudHMudXBkYXRlPExlYXJuaW5nR29hbHNDb250ZW50Pihjb250ZW50LCB7dGFza09yZGVyOiB1cGRhdGVkT3JkZXJ9KTsgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH19IC8+XHJcbiAgICAgICAgICAgICAgPEFkZFRhc2tCdXR0b25cclxuICAgICAgICAgICAgICAgIGJyYW5jaD17cmVwb31cclxuICAgICAgICAgICAgICAgIGNvbnRlbnQ9e2NvbnRlbnR9XHJcbiAgICAgICAgICAgICAgICBjb3Vyc2U9e2NvdXJzZX1cclxuICAgICAgICAgICAgICAgIHNjaG9vbD17c2Nob29sfVxyXG4gICAgICAgICAgICAgICAgZHJhZnRJZD17ZHJhZnRJZH1cclxuICAgICAgICAgICAgICAgIHRhYj17Y291cnNlVGFifVxyXG4gICAgICAgICAgICAgICAgYmxvY2s9e2Jsb2NrfVxyXG4gICAgICAgICAgICAgICAgbGVhcm5pbmdHb2FsPXtzdWJqZWN0fSAvPlxyXG5cclxuICAgICAgICAgICAgPC8+fVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICApO1xyXG4gICAgfSl9PC8+O1xyXG59XHJcblxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kUmVwbywgV2l0aEdyYXBocywgU3RyaXBHcmFwaHMgfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBMZWFybmluZ0dvYWxzQ29udGVudCwgQ291cnNlSW5zdGFuY2UsIENvdXJzZUJsb2NrLCBDb3Vyc2VUYWIsIFN0ZXBDb3Vyc2VUYWIsIFRoZW1lQ291cnNlVGFiLCBUYXNrIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBMLCBhcnJheVRvTG9va3VwIH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBUYXNrTGlzdCwgTGVhcm5pbmdNb2R1bGVUYXNrIH0gZnJvbSAnLi4vLi4vLi4vY291cnNlLXZpZXdlci9zdWJjb21wb25lbnRzL3Rhc2stbGlzdCc7XHJcbmltcG9ydCB7IEFkZFRhc2tCdXR0b24gfSBmcm9tICcuL2FkZC10YXNrLWJ1dHRvbic7XHJcbmltcG9ydCB7IFNvcnRhYmxlVGFza0xpc3QgfSBmcm9tICcuLi8uLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvc29ydGFibGUtdGFzay1saXN0JztcclxuaW1wb3J0IHsgTGluayB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xyXG5pbXBvcnQgeyBjb21wdXRlVXBkYXRlZE9yZGVyLCBnZXRTb3J0ZWRUYXNrcyB9IGZyb20gJy4uLy4uL2xvZ2ljL3Rhc2stb3JkZXInO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBzY2hvb2w6IHN0cmluZztcclxuICByZXBvOiBLZWRCYWNrZW5kUmVwbztcclxuICBjb3Vyc2U6IFN0cmlwR3JhcGhzPENvdXJzZUluc3RhbmNlPjtcclxuICBjb3Vyc2VUYWI6IFN0cmlwR3JhcGhzPENvdXJzZVRhYj47XHJcbiAgY29udGVudDogV2l0aEdyYXBoczxMZWFybmluZ0dvYWxzQ29udGVudCwgXCJ0YXNrc1wiPjtcclxuICBkcmFmdElkOiBzdHJpbmc7XHJcbiAgZWRpdE1vZGU6IGJvb2xlYW47XHJcbiAgbGVhcm5pbmdHb2Fsczogc3RyaW5nW107XHJcbiAgYmxvY2s/OiBDb3Vyc2VCbG9jaztcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IExlYXJuaW5nVGFza3NXaXRoU2VwYXJhdGVHb2FscyA9ICh7IHNjaG9vbCwgcmVwbywgY29udGVudCwgZHJhZnRJZCwgZWRpdE1vZGUsIGNvdXJzZSwgY291cnNlVGFiLCBsZWFybmluZ0dvYWxzLCBibG9jayB9OiBQcm9wcykgPT4ge1xyXG4gIGNvbnN0IHRhc2tzID0gZ2V0U29ydGVkVGFza3MoY29udGVudCk7XHJcbiAgY29uc3QgY2F0aGVnb3JpemVkVGFza3M6IHsgW2lkOiBzdHJpbmddOiB0cnVlIH0gPSB7fTtcclxuICBjb25zdCBnb2FsVG9UYXNrc0xvb2t1cCA9IGxlYXJuaW5nR29hbHMucmVkdWNlKChyZXMsIGdvYWwpID0+IHtcclxuICAgIHJlc1tnb2FsXSA9IHRhc2tzLmZpbHRlcih0YXNrID0+IHtcclxuICAgICAgaWYgKHRhc2subGVhcm5pbmdHb2FsICYmIHRhc2subGVhcm5pbmdHb2FsLnNwbGl0KCdcXG4nKVxyXG4gICAgICAgIC5tYXAobGluZSA9PiBsaW5lLnRyaW0oKS50b0xvd2VyQ2FzZSgpKVxyXG4gICAgICAgIC5pbmNsdWRlcyhnb2FsLnRvTG93ZXJDYXNlKCkpKSB7XHJcbiAgICAgICAgY2F0aGVnb3JpemVkVGFza3NbdGFzay5pZF0gPSB0cnVlO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiByZXM7XHJcbiAgfSwge30gYXMgeyBbbGc6IHN0cmluZ106IFRhc2tbXSB9KTtcclxuXHJcbiAgY29uc3QgdW5jYXRoZWdvcml6ZWRUYXNrcyA9IHRhc2tzLmZpbHRlcih0ID0+ICFjYXRoZWdvcml6ZWRUYXNrc1t0LmlkXSk7XHJcbiAgaWYgKGNvdXJzZVRhYi50YWJDbGFzcyA9PT0gJ21pc3Npb24tdGFiJyB8fCB0YXNrcy5sZW5ndGggPT09IDApIHtcclxuICAgIGdvYWxUb1Rhc2tzTG9va3VwWycnXSA9IHVuY2F0aGVnb3JpemVkVGFza3M7XHJcbiAgfSBlbHNlIGlmICh1bmNhdGhlZ29yaXplZFRhc2tzLmxlbmd0aCA+IDApIHtcclxuICAgIGdvYWxUb1Rhc2tzTG9va3VwW0xgw5Z2ZXJncmlwYW5kZWBdID0gdW5jYXRoZWdvcml6ZWRUYXNrcztcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGxpbmtUb1Rhc2sodGFzazogVGFzaykge1xyXG4gICAgcmV0dXJuIGAvJHtzY2hvb2x9L2NvdXJzZXMvJHtjb3Vyc2UuaWR9L3RhYnMvJHtjb3Vyc2VUYWIuaWR9L2NvbnRlbnRzLyR7Y29udGVudC5pZH0vdGFza3MvJHt0YXNrLmlkfS9kcmFmdHMvJHtkcmFmdElkfS9lZGl0YDtcclxuICB9XHJcblxyXG4gIHJldHVybiA8PlxyXG4gICAge09iamVjdC5rZXlzKGdvYWxUb1Rhc2tzTG9va3VwKS5tYXAoZ29hbCA9PiB7XHJcbiAgICAgIGNvbnN0IHRhc2tMaXN0ID0gZ29hbFRvVGFza3NMb29rdXBbZ29hbF07XHJcbiAgICAgIGNvbnN0IGxlYXJuaW5nTW9kdWxlVGFza3M6IExlYXJuaW5nTW9kdWxlVGFza1tdID0gdGFza0xpc3QubWFwKHRhc2sgPT4gKHtcclxuICAgICAgICBpZDogdGFzay5pZCxcclxuICAgICAgICBuYW1lOiB0YXNrLm5hbWUsXHJcbiAgICAgICAgdXJsOiBlZGl0TW9kZSA/XHJcbiAgICAgICAgICBgIy8ke3NjaG9vbH0vY291cnNlcy8ke2NvdXJzZS5pZH0vdGFicy8ke2NvdXJzZVRhYi5pZH0vY29udGVudHMvJHtjb250ZW50LmlkfS90YXNrcy8ke3Rhc2suaWR9L2RyYWZ0cy8ke2RyYWZ0SWR9L2VkaXRgIDpcclxuICAgICAgICAgIGRyYWZ0SWQgP1xyXG4gICAgICAgICAgICBgIy8ke3NjaG9vbH0vY291cnNlcy8ke2NvdXJzZS5pZH0vdGFicy8ke2NvdXJzZVRhYi5pZH0vY29udGVudHMvJHtjb250ZW50LmlkfS90YXNrcy8ke3Rhc2suaWR9L2RyYWZ0cy8ke2RyYWZ0SWR9YCA6XHJcbiAgICAgICAgICAgIGAjLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlLmlkfS90YWJzLyR7Y291cnNlVGFiLmlkfS90YXNrcy8ke3Rhc2suaWR9YCxcclxuICAgICAgICBjb3Vyc2VOYW1lOiBjb3Vyc2UubmFtZSxcclxuICAgICAgICBsZWFybmluZ0dvYWw6IGNvdXJzZVRhYi50YWJDbGFzcyA9PT0gJ21pc3Npb24tdGFiJyA/IExgVXBwZHJhZ2AgOiBnb2FsLFxyXG4gICAgICAgIHN0ZXA6IGNvdXJzZVRhYi50eXBlID09PSAnc3RlcC1jb3Vyc2UtdGFiJyA/IChjb3Vyc2VUYWIgYXMgU3RlcENvdXJzZVRhYikuc3RlcE5vIDogdW5kZWZpbmVkLFxyXG4gICAgICAgIHRhc2ssXHJcbiAgICAgICAgY291cnNlSW5mbzoge1xyXG4gICAgICAgICAgc2Nob29sLFxyXG4gICAgICAgICAgY291cnNlOiBjb3Vyc2UuaWQsXHJcbiAgICAgICAgICB0YWI6IGNvdXJzZVRhYi5pZFxyXG4gICAgICAgIH1cclxuICAgICAgfSkpO1xyXG4gICAgICByZXR1cm4gKFxyXG4gICAgICAgIDxkaXYga2V5PXtnb2FsfT5cclxuICAgICAgICAgIHtnb2FsICYmIDxoND57Z29hbH08L2g0Pn1cclxuICAgICAgICAgIHshZWRpdE1vZGUgP1xyXG4gICAgICAgICAgICA8VGFza0xpc3QgbGVhcm5pbmdUYXNrcz17bGVhcm5pbmdNb2R1bGVUYXNrc30gLz4gOlxyXG4gICAgICAgICAgICA8PlxyXG4gICAgICAgICAgICAgIDxTb3J0YWJsZVRhc2tMaXN0XHJcbiAgICAgICAgICAgICAgICB0YXNrTWV0YXM9e2xlYXJuaW5nTW9kdWxlVGFza3MubWFwKCh7IHRhc2sgfSkgPT4gKHsgdGFzaywgaXNUYXNrT3duZXI6IHRydWUgfSkpfVxyXG4gICAgICAgICAgICAgICAgcmVuZGVyRWRpdExpbms9eyh7IHRhc2sgfSkgPT4gPD48TGluayB0bz17bGlua1RvVGFzayh0YXNrKX0gY2xhc3NOYW1lPVwiZWRpdEl0ZW1cIiAvPiZuYnNwOzwvPn1cclxuICAgICAgICAgICAgICAgIHJlbmRlckxpbms9eyh7IHRhc2sgfSkgPT4gPExpbmsgdG89e2xpbmtUb1Rhc2sodGFzayl9Pnt0YXNrLm5hbWV9PC9MaW5rPn1cclxuICAgICAgICAgICAgICAgIG9uU29ydD17KHNvdXJjZSwgdGFyZ2V0LCBwbGFjZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZE9yZGVyID0gY29tcHV0ZVVwZGF0ZWRPcmRlcihcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50LnRhc2tzLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQudGFza09yZGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZSxcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50LFxyXG4gICAgICAgICAgICAgICAgICAgIHsgYXBwZW5kTGVmdG92ZXJzOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgICByZXBvLmNvdXJzZUNvbnRlbnRzLnVwZGF0ZTxMZWFybmluZ0dvYWxzQ29udGVudD4oY29udGVudCwgeyB0YXNrT3JkZXI6IHVwZGF0ZWRPcmRlciB9KTtcclxuICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICA8QWRkVGFza0J1dHRvblxyXG4gICAgICAgICAgICAgICAgYnJhbmNoPXtyZXBvfVxyXG4gICAgICAgICAgICAgICAgY29udGVudD17Y29udGVudH1cclxuICAgICAgICAgICAgICAgIGNvdXJzZT17Y291cnNlfVxyXG4gICAgICAgICAgICAgICAgc2Nob29sPXtzY2hvb2x9XHJcbiAgICAgICAgICAgICAgICBkcmFmdElkPXtkcmFmdElkfVxyXG4gICAgICAgICAgICAgICAgdGFiPXtjb3Vyc2VUYWJ9XHJcbiAgICAgICAgICAgICAgICBibG9jaz17YmxvY2t9XHJcbiAgICAgICAgICAgICAgICBsZWFybmluZ0dvYWw9e2dvYWx9IC8+XHJcbiAgICAgICAgICAgIDwvPlxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICApO1xyXG4gICAgfSl9PC8+O1xyXG59XHJcblxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBTdHJpcEdyYXBocyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IFJlc291cmNlTGlzdCwgQ291cnNlQ29udGVudCB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgVmFsdWUgfSBmcm9tICdrZWRiYWNrZW5kL29ic2VydmFibGUnO1xyXG5pbXBvcnQgeyBsaXZlUXVlcnlWaWV3IH0gZnJvbSAnLi4vLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2xpdmUtcXVlcnktdmlldyc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gICAgY29udGVudDogVmFsdWU8U3RyaXBHcmFwaHM8Q291cnNlQ29udGVudD4+O1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgUmVzb3VyY2VMaXN0VmlldyA9IGxpdmVRdWVyeVZpZXcoKHsgY29udGVudCB9OiBQcm9wcykgPT5cclxuICAgIGNvbnRlbnQubWFwKGNvbnRlbnRSZXNvdXJjZXMgPT4ge1xyXG4gICAgICAgIHZhciByZXNvdXJjZUxpc3QgPSAoY29udGVudFJlc291cmNlcyBhcyBSZXNvdXJjZUxpc3QpO1xyXG4gICAgICAgIHJldHVybiA8ZGl2PlxyXG4gICAgICAgICAgICB7cmVzb3VyY2VMaXN0ICYmIHJlc291cmNlTGlzdC5yZXNvdXJjZXMubGVuZ3RoID4gMCAmJiA8ZGl2IGNsYXNzTmFtZT1cImtlZF9ib3hlZCBrcE1lbnVcIj5cclxuICAgICAgICAgICAgICAgIDxoMj5SZXN1cnNlcjwvaDI+XHJcbiAgICAgICAgICAgICAgICA8aHIgLz5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGFza0NvbnRhaW5lclwiPlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VMaXN0LnJlc291cmNlcy5tYXAocmVzID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWxcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPXtyZXMudXJsfT57cmVzLm5hbWV9PC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICA8L2Rpdj5cclxuICAgIH0pKVxyXG4iLCJpbXBvcnQgUmVhY3QsIHsgdXNlQ29udGV4dCB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgTCB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgaXNLZWRTdGFmZiB9IGZyb20gJy4uLy4uL2xvZ2ljL2lzLWtlZC1zdGFmZic7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRSZXBvIH0gZnJvbSAna2VkYmFja2VuZC9yZXBvJztcclxuaW1wb3J0IHsgUmVzb3VyY2VMaXN0IH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBEaWFsb2dzQ29udGV4dCB9IGZyb20gJy4uLy4uL2NvbW1vbi9kaWFsb2ctY29udGV4dCc7XHJcbmltcG9ydCB7IEVkaXRSZXNvdXJjZSB9IGZyb20gJy4uLy4uLy4uL2NvdXJzZS1idWlsZGVyL21vZGFsLXBhZ2VzL2VkaXQtcmVzb3VyY2UnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICAgIHJlcG86IEtlZEJhY2tlbmRSZXBvO1xyXG4gICAgY29udGVudDogUmVzb3VyY2VMaXN0O1xyXG4gICAgZWRpdE1vZGU6IGJvb2xlYW47XHJcbiAgfVxyXG5cclxuZXhwb3J0IGNvbnN0IFJlc291cmNlTGlzdENvbnRlbnRCb3ggPSAoeyBjb250ZW50LCBlZGl0TW9kZSwgcmVwbyB9OiBQcm9wcykgPT4ge1xyXG4gICAgY29uc3QgeyByZXNvdXJjZXMgfSA9IGNvbnRlbnQ7XHJcbiAgICBsZXQgY29udGV4dCA9IHVzZUNvbnRleHQoRGlhbG9nc0NvbnRleHQpO1xyXG4gICAgcmV0dXJuIGVkaXRNb2RlICYmICghY29udGVudC5sb2NrZWQgfHwgaXNLZWRTdGFmZigpKSA/XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwia2VkX2JveGVkXCI+XHJcbiAgICAgICAgICAgICAgICA8aDQ+e0xgUmVzdXJzZXJgfTwvaDQ+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRhc2tDb250YWluZXJcIj5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvdXJjZXMubWFwKChyZXNvdXJjZSwgaWR4KSA9PiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCIga2V5PXtpZHh9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBjbGFzc05hbWU9XCJlZGl0SXRlbVwiIG9uQ2xpY2s9eygpPT4gY29udGV4dC5vcGVuRGlhbG9nKDxFZGl0UmVzb3VyY2UgdGl0bGU9XCJFZGl0IHJlc291cmNlXCIgcmVzb3VyY2U9e3Jlc291cmNlfSBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TYXZlPXsocmVzKT0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VzW2lkeF0gPSByZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcG8uY291cnNlQ29udGVudHMudXBkYXRlPFJlc291cmNlTGlzdD4oY29udGVudCwge3Jlc291cmNlczogWy4uLnJlc291cmNlc119KTsgY29udGV4dC5jbG9zZURpYWxvZygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRGVsZXRlPXsoKT0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VzLnNwbGljZShpZHgsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBvLmNvdXJzZUNvbnRlbnRzLnVwZGF0ZTxSZXNvdXJjZUxpc3Q+KGNvbnRlbnQsIHtyZXNvdXJjZXM6IFsuLi5yZXNvdXJjZXNdIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuY2xvc2VEaWFsb2coKTt9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+KX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9hPiZuYnNwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj17cmVzb3VyY2UudXJsfT57cmVzb3VyY2UubmFtZX08L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PiAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+IFxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGEgY2xhc3NOYW1lPVwiYnRuXCIgb25DbGljayA9IHsoKT0+IGNvbnRleHQub3BlbkRpYWxvZyg8RWRpdFJlc291cmNlIHRpdGxlPVwiUmVzdXJzXCIgb25TYXZlPXsocmVzb3VyY2UpID0+IHtyZXBvLmNvdXJzZUNvbnRlbnRzLnVwZGF0ZTxSZXNvdXJjZUxpc3Q+KGNvbnRlbnQsIHtyZXNvdXJjZXM6IFsuLi5yZXNvdXJjZXMsIHJlc291cmNlXX0pOyBjb250ZXh0LmNsb3NlRGlhbG9nKCk7fX0vPil9PjxpIGNsYXNzTmFtZT1cImZhIGZhLXBsdXNcIiBhcmlhLWhpZGRlbj1cInRydWVcIiAvPntMYEzDpGdnIHRpbGwgcmVzdXJzYH08L2E+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj4gOiA8ZGl2PjwvZGl2PiAgICAgXHJcbn0iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBSaWNoVGV4dENvbnRlbnQgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IFd5c2l3eWcgfSBmcm9tICcuLi8uLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvd3lzaXd5Zyc7XHJcbmltcG9ydCBhY3Rpb25zIGZyb20gJy4uLy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy93eXNpd3lnL2FjdGlvbnMtc3YnO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kUmVwbyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IGlzS2VkU3RhZmYgfSBmcm9tICcuLi8uLi9sb2dpYy9pcy1rZWQtc3RhZmYnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICByZXBvOiBLZWRCYWNrZW5kUmVwbztcclxuICBjb250ZW50OiBSaWNoVGV4dENvbnRlbnQ7XHJcbiAgZWRpdE1vZGU6IGJvb2xlYW47XHJcbiAgbWF4Q2hhcnM/OiBudW1iZXI7XHJcbiAgcmVwb3J0TnVtQ2hhcnM/OiAobnVtQ2hhcnM6IG51bWJlcikgPT4gdm9pZDtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IFJpY2hUZXh0Q29udGVudEJveCA9ICh7Y29udGVudCwgcmVwbywgZWRpdE1vZGUsIHJlcG9ydE51bUNoYXJzLCBtYXhDaGFyc306IFByb3BzKSA9PiBlZGl0TW9kZSA/IDxkaXY+XHJcbiAgPFd5c2l3eWdcclxuICAgIGh0bWw9e2NvbnRlbnQuaHRtbH1cclxuICAgIGRlZmF1bHRBY3Rpb25zPXthY3Rpb25zfVxyXG4gICAgcmVhZE9ubHk9eyFlZGl0TW9kZSB8fCAoY29udGVudC5sb2NrZWQgJiYgIWlzS2VkU3RhZmYoKSkgfVxyXG4gICAgcmVwb3J0TnVtQ2hhcnM9e3JlcG9ydE51bUNoYXJzfVxyXG4gICAgbWF4Q2hhcnM9e21heENoYXJzfVxyXG4gICAgYWN0aW9ucz17W1xyXG4gICAgICBcImJvbGRcIixcclxuICAgICAgXCJpdGFsaWNcIixcclxuICAgICAgXCJ1bmRlcmxpbmVcIixcclxuICAgICAgXCJzdHJpa2V0aHJvdWdoXCIsXHJcbiAgICAgIFwiaGVhZGluZzJcIixcclxuICAgICAgXCJoZWFkaW5nM1wiLFxyXG4gICAgICBcIm9saXN0XCIsXHJcbiAgICAgIFwidWxpc3RcIixcclxuICAgICAgXCJsaW5lXCIsXHJcbiAgICAgIFwibGlua1wiLFxyXG4gICAgICBcImltYWdlXCJdfVxyXG4gICAgb25DaGFuZ2U9e2VkaXRNb2RlICYmIChodG1sID0+IHJlcG8uY291cnNlQ29udGVudHMudXBkYXRlPFJpY2hUZXh0Q29udGVudD4oY29udGVudCwge2h0bWx9KSl9IC8+XHJcblxyXG48L2Rpdj4gOiA8ZGl2PlxyXG4gIDxkaXYgY2xhc3NOYW1lPVwicmljaC10ZXh0LXJlYWRvbmx5XCIgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3tfX2h0bWw6IGNvbnRlbnQuaHRtbH19IC8+XHJcbjwvZGl2PjtcclxuIiwiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VSZWYsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgS2VkQmFja2VuZFJlcG8sIFdpdGhHcmFwaHMgfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBXb3JkQmFua0NvbnRlbnQsIFN0ZXBDb3Vyc2VJbnN0YW5jZSwgU3RlcENvdXJzZVRhYiB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgY2ZnIH0gZnJvbSAnLi4vLi4vLi4vLi4vZ2xvYmFscy9LRUQuY2ZnJztcclxuaW1wb3J0IHsgV29yZEJhbmtDb250ZW50U2V0dGluZ3MgfSBmcm9tICcuL3dvcmQtYmFuay1jb250ZW50LXNldHRpbmdzJztcclxuaW1wb3J0IHsgU3Bpbm5lciB9IGZyb20gJy4uLy4uLy4uL2NvdXJzZS1idWlsZGVyL3N1Yi1jb21wb25lbnRzL3NwaW5uZXInO1xyXG5pbXBvcnQgeyBFbGxpcHNpc0xvYWRlciB9IGZyb20gJy4uLy4uLy4uL2NvdXJzZS1idWlsZGVyL3N1Yi1jb21wb25lbnRzL2VsbGlwc2lzLWxvYWRlcic7XHJcbmltcG9ydCB7IGlzS2VkU3RhZmYgfSBmcm9tICcuLi8uLi9sb2dpYy9pcy1rZWQtc3RhZmYnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICByZXBvOiBLZWRCYWNrZW5kUmVwb1xyXG4gIGNvbnRlbnQ6IFdvcmRCYW5rQ29udGVudFxyXG4gIHNpYmxpbmdXb3JkQmFua3M6IFdvcmRCYW5rQ29udGVudFtdXHJcbiAgZWRpdE1vZGU6IGJvb2xlYW5cclxuICBjb3Vyc2U6IFN0ZXBDb3Vyc2VJbnN0YW5jZVxyXG4gIGNvdXJzZVRhYjogU3RlcENvdXJzZVRhYlxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gV29yZEJhbmtDb250ZW50Qm94KHtyZXBvLCBjb250ZW50LCBzaWJsaW5nV29yZEJhbmtzLCBlZGl0TW9kZSwgY291cnNlLCBjb3Vyc2VUYWJ9OiBQcm9wcykge1xyXG4gIGNvbnN0IHtzZWxlY3RlZFdvcmRCYW5rfSA9IGNvbnRlbnQ7XHJcbiAgY29uc3Qge3N1YmplY3ROYW1lfSA9IGNvdXJzZS5zdWJqZWN0O1xyXG4gIGNvbnN0IHtzdGVwTm99ID0gY291cnNlVGFiO1xyXG4gIGNvbnN0IGlmcmFtZVNyYyA9IHNlbGVjdGVkV29yZEJhbmsgJiYgYCR7Y2ZnLktFRF9XT1JEQkFOS1NfVVJMfT9wcmV2aWV3PXRydWUmc3ViamVjdD0ke3N1YmplY3ROYW1lfSZzdGVwPSR7c3RlcE5vfSZsaXN0PSR7c2VsZWN0ZWRXb3JkQmFuay5rZXl9YDtcclxuICBjb25zdCBbaWZyYW1lSGVpZ2h0LCBzZXRJZnJhbWVIZWlnaHRdID0gdXNlU3RhdGUoMjAwKTtcclxuICBjb25zdCBpZnJhbWVSZWYgPSB1c2VSZWY8SFRNTElGcmFtZUVsZW1lbnQ+KCk7XHJcbiAgY29uc3Qgd29yZEJhbmtzQWxyZWFkeUFkZGVkID0gc2libGluZ1dvcmRCYW5rcy5tYXAoYyA9PiBjLnNlbGVjdGVkV29yZEJhbmsgJiYgYy5zZWxlY3RlZFdvcmRCYW5rLmtleSlcclxuICAgIC5maWx0ZXIoa2V5ID0+ICEha2V5KTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpPT5zZXRJZnJhbWVIZWlnaHQoMjAwKSwgW3NlbGVjdGVkV29yZEJhbmsgJiYgc2VsZWN0ZWRXb3JkQmFuay5rZXldKTsvLyBSZXNldCBpZnJhbWUgaGVpZ2h0IHdoZW5ldmVyIHNlbGVjdGVkIHdvcmQgYmFuayBjaGFuZ2VzIGFuZCBsZXQgb25sb2FkIGZpeCBpdC5cclxuICAgIFxyXG4gIHJldHVybiA8PlxyXG4gICAge2VkaXRNb2RlICYmICghY29udGVudC5sb2NrZWQgfHwgaXNLZWRTdGFmZigpKSAmJiA8UmVhY3QuU3VzcGVuc2UgZmFsbGJhY2s9ezxFbGxpcHNpc0xvYWRlci8+fT5cclxuICAgICAgPFdvcmRCYW5rQ29udGVudFNldHRpbmdzIHsuLi57c3ViamVjdE5hbWUsIHN0ZXBObywgd29yZEJhbmtzQWxyZWFkeUFkZGVkIH19XHJcbiAgICAgICAgc2VsZWN0ZWRXb3JkQmFuaz17c2VsZWN0ZWRXb3JkQmFua31cclxuICAgICAgICBvbkNoYW5nZT17KHtuYW1lLCBrZXl9KSA9PiB7XHJcbiAgICAgICAgICByZXBvLmNvdXJzZUNvbnRlbnRzLnVwZGF0ZTxXb3JkQmFua0NvbnRlbnQ+KGNvbnRlbnQsIHtzZWxlY3RlZFdvcmRCYW5rOiB7bmFtZSwga2V5fX0pO1xyXG4gICAgICAgIH19XHJcbiAgICAgIC8+XHJcbiAgICA8L1JlYWN0LlN1c3BlbnNlPn1cclxuICAgIHtzZWxlY3RlZFdvcmRCYW5rICYmIFxyXG4gICAgICA8aWZyYW1lXHJcbiAgICAgICAgcmVmPXtpZnJhbWVSZWZ9XHJcbiAgICAgICAgc2Nyb2xsaW5nPVwibm9cIlxyXG4gICAgICAgIGZyYW1lQm9yZGVyPVwiMFwiXHJcbiAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgIHdpZHRoOiBcIjEwMCVcIixcclxuICAgICAgICAgIGhlaWdodDogaWZyYW1lSGVpZ2h0LFxyXG4gICAgICAgICAgcGFkZGluZzogMCxcclxuICAgICAgICAgIG1hcmdpbjogMFxyXG4gICAgICAgIH19XHJcbiAgICAgICAgc3JjPXtpZnJhbWVTcmN9XHJcbiAgICAgICAgb25Mb2FkPXsoKT0+e1xyXG4gICAgICAgICAgc2V0SWZyYW1lSGVpZ2h0KGlmcmFtZVJlZi5jdXJyZW50LmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQpO1xyXG4gICAgICAgIH19IC8+XHJcbiAgICB9XHJcbiAgPC8+O1xyXG59XHJcblxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBjZmcgfSBmcm9tICcuLi8uLi8uLi8uLi9nbG9iYWxzL0tFRC5jZmcnO1xyXG5pbXBvcnQgdXNlRmV0Y2ggZnJvbSAnZmV0Y2gtc3VzcGVuc2UnO1xyXG5pbXBvcnQgeyBDaGVja2xpc3QgfSBmcm9tICcuLi8uLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvY2hlY2tsaXN0JztcclxuaW1wb3J0IHsgTCB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IFNlbGVjdCBmcm9tICdyZWFjdC1zZWxlY3QnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBzdWJqZWN0TmFtZTogc3RyaW5nXHJcbiAgc3RlcE5vOiBudW1iZXJcclxuICBzZWxlY3RlZFdvcmRCYW5rPzoge25hbWU6IHN0cmluZywga2V5OiBzdHJpbmd9XHJcbiAgd29yZEJhbmtzQWxyZWFkeUFkZGVkPzogc3RyaW5nW11cclxuICBvbkNoYW5nZTogKHdvcmRCYW5rOiB7bmFtZTogc3RyaW5nLCBrZXk6IHN0cmluZ30pID0+IHZvaWRcclxufVxyXG5cclxuaW50ZXJmYWNlIEF2YWlsYWJsZVdvcmRCYW5rIHtcclxuICBpZDogc3RyaW5nO1xyXG4gIG5hbWU6IHN0cmluZztcclxuICBvcmRlcjogc3RyaW5nO1xyXG4gIHVybDogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gV29yZEJhbmtDb250ZW50U2V0dGluZ3MgKHtzdWJqZWN0TmFtZSwgc3RlcE5vLCBzZWxlY3RlZFdvcmRCYW5rLCB3b3JkQmFua3NBbHJlYWR5QWRkZWQsIG9uQ2hhbmdlfTogUHJvcHMpIHtcclxuICBjb25zdCBhcGlVcmwgPSBgJHtjZmcuS0VEX0VOVU1fV09SREJBTktTX1VSTH0/c3YuY29udGVudHR5cGU9YXBwbGljYXRpb24vanNvbiZzdWJqZWN0PSR7c3ViamVjdE5hbWV9JnN0ZXA9JHtzdGVwTm99YDtcclxuICBsZXQgYXZhaWxhYmxlV29yZEJhbmtzID0gdXNlRmV0Y2goYXBpVXJsKSBhcyBBdmFpbGFibGVXb3JkQmFua1tdO1xyXG5cclxuICAvLyBGaWx0ZXIgb3V0IHdvcmQgYmFua3MgdGhhdCB3YXMgYWxyZWFkeSBhZGRlZCB0byB0aGUgc2FtZSB0YWJcclxuICBhdmFpbGFibGVXb3JkQmFua3MgPSBhdmFpbGFibGVXb3JkQmFua3MuZmlsdGVyKCh7b3JkZXJ9KSA9PlxyXG4gICAgKHNlbGVjdGVkV29yZEJhbmsgJiYgb3JkZXIgPT09IHNlbGVjdGVkV29yZEJhbmsua2V5KSB8fFxyXG4gICAgIXdvcmRCYW5rc0FscmVhZHlBZGRlZCB8fFxyXG4gICAgIXdvcmRCYW5rc0FscmVhZHlBZGRlZC5pbmNsdWRlcyhvcmRlcikpO1xyXG4gIFxyXG4gIHJldHVybiA8ZGl2PlxyXG4gICAgPGgzPntzZWxlY3RlZFdvcmRCYW5rID8gc2VsZWN0ZWRXb3JkQmFuay5uYW1lIDogTGBWw6RsaiBvcmRiYW5rYH08L2gzPlxyXG4gICAgPFNlbGVjdFxyXG4gICAgICBpc011bHRpPXtmYWxzZX1cclxuICAgICAgcGxhY2Vob2xkZXI9e0xgVsOkbGogYmxhbmQgb3JkYmFua2VyIGbDtnIgJHtzdWJqZWN0TmFtZX0sIHN0ZWcgJHtzdGVwTm99YH1cclxuICAgICAgbm9PcHRpb25zTWVzc2FnZT17KCk9PkxgS3VuZGUgaW50ZSBoaXR0YSB0aWxsZ8OkbmdsaWdhIG9yZGJhbmtlciBmw7ZyICR7c3ViamVjdE5hbWV9LCBzdGVnICR7c3RlcE5vfWB9XHJcbiAgICAgIG9wdGlvbnM9e2F2YWlsYWJsZVdvcmRCYW5rcy5tYXAoKHtuYW1lLCBpZCwgb3JkZXIsIHVybH0pID0+ICh7bGFiZWw6IG5hbWUsIHZhbHVlOiBvcmRlcn0pKX1cclxuICAgICAgdmFsdWU9e3NlbGVjdGVkV29yZEJhbmsgJiYge2xhYmVsOiBzZWxlY3RlZFdvcmRCYW5rLm5hbWUsIHZhbHVlOiBzZWxlY3RlZFdvcmRCYW5rLmtleX19XHJcbiAgICAgIG9uQ2hhbmdlPXsob3B0aW9uOiB7bGFiZWw6IHN0cmluZywgdmFsdWU6IHN0cmluZ30pID0+IG9uQ2hhbmdlKHtuYW1lOiBvcHRpb24ubGFiZWwsIGtleTogb3B0aW9uLnZhbHVlfSl9IC8+XHJcbiAgPC9kaXY+O1xyXG59XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgVmFsdWUsIEVtaXR0ZXIgfSBmcm9tICdrZWRiYWNrZW5kL29ic2VydmFibGUnO1xyXG5pbXBvcnQgeyBDb3Vyc2VDb250ZW50LCBDb3Vyc2VJbnN0YW5jZSwgVGhlbWVDb3Vyc2VJbnN0YW5jZSwgVGhlbWVDb3Vyc2VUYWIsIENvdXJzZVRhYiwgQ291cnNlQmxvY2sgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IGxpdmVRdWVyeVZpZXcgfSBmcm9tICcuLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvbGl2ZS1xdWVyeS12aWV3JztcclxuaW1wb3J0IHsgY29tcGFyZVByb3AsIEwgfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRSZXBvLCBXaXRoR3JhcGhzLCBTdHJpcEdyYXBocyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IEFkZENvbnRlbnRCdXR0b24gfSBmcm9tICcuL2FkZC1jb250ZW50LWJ1dHRvbic7XHJcbmltcG9ydCB7IENvdXJzZUNvbnRlbnRCb3gsIENPVVJTRV9DT05URU5UX1RZUEVTIH0gZnJvbSAnLi9jb3Vyc2UtY29udGVudHMnO1xyXG5pbXBvcnQgeyBSZW1vdmVJdGVtIH0gZnJvbSAnLi4vLi4vY291cnNlLWJ1aWxkZXIvc3ViLWNvbXBvbmVudHMvcmVtb3ZlLWl0ZW0nO1xyXG5pbXBvcnQgeyBBbGlnbkhvcml6b250YWwgfSBmcm9tICcuLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvYWxpZ24taG9yaXpvbnRhbCc7XHJcbmltcG9ydCB7IEhvcml6b250YWxJdGVtIH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2hvcml6b250YWwtaXRlbSc7XHJcbmltcG9ydCB7IENvdXJzZVRhYkNsYXNzZXMgfSBmcm9tICcuL2NvdXJzZS10YWIvdGFiLWNsYXNzZXMnO1xyXG5pbXBvcnQgeyBpc0tlZFN0YWZmIH0gZnJvbSAnLi4vbG9naWMvaXMta2VkLXN0YWZmJztcclxuaW1wb3J0IHsgVGFiU2V0dGluZ3MgfSBmcm9tICcuL3RhYi1zZXR0aW5ncyc7XHJcbmltcG9ydCB7IExhenlDb250ZW50IH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2xhenktY29udGVudCc7XHJcbmltcG9ydCB7IENvdXJzZVRhYkNvbnRlbnRCb3ggfSBmcm9tICcuL2NvdXJzZS10YWItY29udGVudC1ib3gnO1xyXG5pbXBvcnQgeyBUYWJTZXR0aW5nc0FkbWluIH0gZnJvbSAnLi90YWItc2V0dGluZ3MtYWRtaW4nO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBzY2hvb2w6IHN0cmluZztcclxuICBkcmFmdElkOiBzdHJpbmc7XHJcbiAgY291cnNlOiBXaXRoR3JhcGhzPENvdXJzZUluc3RhbmNlLCBcInRhYnNcIiB8IFwiYmxvY2tzXCI+O1xyXG4gIGJyYW5jaDogS2VkQmFja2VuZFJlcG87XHJcbiAgYmxvY2s6IENvdXJzZUJsb2NrIHwgbnVsbDtcclxuICB0YWI6IFN0cmlwR3JhcGhzPENvdXJzZVRhYj4sXHJcbiAgZWRpdE1vZGU/OiBib29sZWFuXHJcbiAgbGF6eUNvbnRlbnRzOiBWYWx1ZTxXaXRoR3JhcGhzPENvdXJzZUNvbnRlbnQsIFwidGFza3NcIj5bXT47XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBDb3Vyc2VUYWJBcmVhID0gbGl2ZVF1ZXJ5VmlldygoeyBjb3Vyc2UsIGJyYW5jaCwgYmxvY2ssIHRhYiwgZWRpdE1vZGUsIGxhenlDb250ZW50cywgc2Nob29sLCBkcmFmdElkIH06IFByb3BzKSA9PlxyXG4gIGxhenlDb250ZW50cy5tYXAoY29udGVudHMgPT4ge1xyXG4gICAgaWYgKCF0YWIpIHtcclxuICAgICAgaWYgKGVkaXRNb2RlKVxyXG4gICAgICAgIHJldHVybiA8cD57TGBEZW5uYSBrdXJzIHNha25hciBpbm5laMOlbGwuIFNrYXBhIG55IGZsaWsgZ2Vub20ga25hcHBlbiBvdmFuYH08L3A+XHJcbiAgICAgIGVsc2VcclxuICAgICAgICByZXR1cm4gaXNLZWRTdGFmZigpID9cclxuICAgICAgICAgIDxwPntMYERlbm5hIGt1cnMgc2FrbmFyIGlubmVow6VsbC4gVsOkbGogUmVkaWdlcmEga25hcHBlbiBmw7ZyIGF0dCBsw6RnZ2EgdGlsbCBmbGlrYXIuYH08L3A+IDpcclxuICAgICAgICAgIDxwPntMYERlbm5hIGt1cnMgc2FrbmFyIGlubmVow6VsbC5gfTwvcD5cclxuICAgIH1cclxuICAgIGNvbnRlbnRzID0gY29udGVudHMuc2xpY2UoKS5zb3J0KGNvbXBhcmVQcm9wKFwib3JkZXJcIikpO1xyXG4gICAgcmV0dXJuIDxkaXY+XHJcbiAgICAgIHtlZGl0TW9kZSA/IDw+XHJcbiAgICAgICAge2lzS2VkU3RhZmYoKSB8fCAhdGFiLmxvY2tlZCA/XHJcbiAgICAgICAgICA8VGFiU2V0dGluZ3MgY291cnNlPXtjb3Vyc2UgYXMgQ291cnNlSW5zdGFuY2V9IHRhYj17dGFifSByZXBvPXticmFuY2h9IC8+IDpcclxuICAgICAgICAgIG51bGx9XHJcbiAgICAgICAge2lzS2VkU3RhZmYoKSA/XHJcbiAgICAgICAgICA8VGFiU2V0dGluZ3NBZG1pbiBjb3Vyc2U9e2NvdXJzZSBhcyBDb3Vyc2VJbnN0YW5jZX0gdGFiPXt0YWJ9IHJlcG89e2JyYW5jaH0gYmxvY2s9e2Jsb2NrfSAvPiA6XHJcbiAgICAgICAgICBudWxsfVxyXG4gICAgICA8Lz4gOiBudWxsXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHtjb250ZW50cy5tYXAoKGNvbnRlbnQsIGNvbnRlbnRPcmRlckluZGV4KSA9PiA8Q291cnNlVGFiQ29udGVudEJveFxyXG4gICAgICAgIGtleT17Y29udGVudC5pZH1cclxuICAgICAgICBjb250ZW50PXtjb250ZW50fVxyXG4gICAgICAgIGJyYW5jaD17YnJhbmNofVxyXG4gICAgICAgIGNvbnRlbnRPcmRlckluZGV4PXtjb250ZW50T3JkZXJJbmRleH1cclxuICAgICAgICBjb250ZW50cz17Y29udGVudHN9XHJcbiAgICAgICAgY291cnNlPXtjb3Vyc2V9XHJcbiAgICAgICAgZHJhZnRJZD17ZHJhZnRJZH1cclxuICAgICAgICBlZGl0TW9kZT17ZWRpdE1vZGV9XHJcbiAgICAgICAgc2Nob29sPXtzY2hvb2x9XHJcbiAgICAgICAgYmxvY2s9e2Jsb2NrfVxyXG4gICAgICAgIHRhYj17dGFifSAvPil9XHJcblxyXG4gICAgICAgIHshIWVkaXRNb2RlICYmIChpc0tlZFN0YWZmKCkgfHwgIXRhYi5sb2NrZWQpICYmIDw+XHJcblxyXG4gICAgICAgICAge3RhYi50YWJDbGFzcyA9PT0gJ3dvcmQtYmFuay10YWInICYmXHJcblxyXG4gICAgICAgICAgICAvLyBbIEFkZCBXb3JkIEJhbmsgXSBidXR0b25cclxuICAgICAgICAgICAgPEFkZENvbnRlbnRCdXR0b24gdHlwZT1cIndvcmQtYmFua1wiIHRhYj17dGFifSBicmFuY2g9e2JyYW5jaH0gY291cnNlPXtjb3Vyc2V9IC8+fVxyXG5cclxuICAgICAgICAgIHt0YWIudGFiQ2xhc3MgIT09ICd3b3JkLWJhbmstdGFiJyAmJlxyXG4gICAgICAgICAgICh0YWIudGFiQ2xhc3MgPT09ICdtaXNzaW9uLXRhYicgfHwgdGFiLnRhYkNsYXNzID09PSAnc3ViamVjdC10YWInIHx8IGNvdXJzZS50eXBlID09PSAnc3RlcC1jb3Vyc2UnKSAmJlxyXG4gICAgICAgICAgICFjb250ZW50cy5zb21lKGMgPT4gYy50eXBlID09PSAnbGVhcm5pbmctZ29hbHMnKSAmJlxyXG5cclxuICAgICAgICAgICAgLy8gWyBBZGQgTGVhcm5pbmcgR29hbHMgXSBidXR0b25cclxuICAgICAgICAgICAgPEFkZENvbnRlbnRCdXR0b24gdHlwZT1cImxlYXJuaW5nLWdvYWxzXCIgdGFiPXt0YWJ9IGJyYW5jaD17YnJhbmNofSBjb3Vyc2U9e2NvdXJzZX0gLz5cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICB7IC8vIFsgQWRkIFRleHQgXSBidXR0b25cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIDxBZGRDb250ZW50QnV0dG9uIHR5cGU9XCJyaWNoLXRleHRcIiB0YWI9e3RhYn0gYnJhbmNoPXticmFuY2h9IGNvdXJzZT17Y291cnNlfSAvPlxyXG5cclxuICAgICAgICAgIHtjb250ZW50cy5maWx0ZXIoYz0+IGMudHlwZSA9PSBcInJlc291cmNlLWxpc3RcIikubGVuZ3RoID09IDAgJiZcclxuICAgICAgICAgICAgIC8vIFsgQWRkIFJlc291cmNlIF0gYnV0dG9uXHJcbiAgICAgICAgICAgICA8QWRkQ29udGVudEJ1dHRvbiB0eXBlPVwicmVzb3VyY2UtbGlzdFwiIHRhYj17dGFifSBicmFuY2g9e2JyYW5jaH0gY291cnNlPXtjb3Vyc2V9IC8+XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAge3RhYi50YWJDbGFzcyA9PT0gJ2ludHJvLXRhYicgfHwgdGFiLnRhYkNsYXNzID09PSAncnVuLXVwLXRhYicgJiZcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBbIEFkZCBFbWJlZGRlZCBIVE1MIF0gYnV0dG9uXHJcbiAgICAgICAgICAgIDxBZGRDb250ZW50QnV0dG9uIHR5cGU9XCJlbWJlZGRlZC1odG1sXCIgdGFiPXt0YWJ9IGJyYW5jaD17YnJhbmNofSBjb3Vyc2U9e2NvdXJzZX0gLz59XHJcbiAgICAgICAgPC8+XHJcbiAgICAgIH1cclxuICAgIDwvZGl2PlxyXG4gIH0pXHJcbilcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgV2l0aEdyYXBocywgS2VkQmFja2VuZFJlcG8sIFN0cmlwR3JhcGhzIH0gZnJvbSAna2VkYmFja2VuZC9yZXBvJztcclxuaW1wb3J0IHsgQ291cnNlQ29udGVudCwgQ291cnNlSW5zdGFuY2UsIENvdXJzZVRhYiwgQ291cnNlQmxvY2sgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IGlzS2VkU3RhZmYgfSBmcm9tICcuLi9sb2dpYy9pcy1rZWQtc3RhZmYnO1xyXG5pbXBvcnQgeyBDb3Vyc2VDb250ZW50Qm94LCBDT1VSU0VfQ09OVEVOVF9UWVBFUyB9IGZyb20gJy4vY291cnNlLWNvbnRlbnRzJztcclxuaW1wb3J0IHsgQWxpZ25Ib3Jpem9udGFsIH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2FsaWduLWhvcml6b250YWwnO1xyXG5pbXBvcnQgeyBIb3Jpem9udGFsSXRlbSB9IGZyb20gJy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9ob3Jpem9udGFsLWl0ZW0nO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBSZW1vdmVJdGVtIH0gZnJvbSAnLi4vLi4vY291cnNlLWJ1aWxkZXIvc3ViLWNvbXBvbmVudHMvcmVtb3ZlLWl0ZW0nO1xyXG5pbXBvcnQgeyBFbWl0dGVyIH0gZnJvbSAna2VkYmFja2VuZC9vYnNlcnZhYmxlJztcclxuaW1wb3J0IHsgTGF6eUNvbnRlbnQgfSBmcm9tICcuLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvbGF6eS1jb250ZW50JztcclxuaW1wb3J0IHsgcmVvcmRlciB9IGZyb20gJy4uL2xvZ2ljL2NoYW5nZS1zb3J0LW9yZGVyJztcclxuXHJcbmNvbnN0IE1BWF9DSEFSU19JTl9DT05URU5UUyA9IDQwMDA7XHJcblxyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBlZGl0TW9kZTogYm9vbGVhblxyXG4gIGNvbnRlbnQ6IFdpdGhHcmFwaHM8Q291cnNlQ29udGVudCwgXCJ0YXNrc1wiPlxyXG4gIGNvbnRlbnRzOiBXaXRoR3JhcGhzPENvdXJzZUNvbnRlbnQsIFwidGFza3NcIj5bXVxyXG4gIGJyYW5jaDogS2VkQmFja2VuZFJlcG87XHJcbiAgY291cnNlOiBXaXRoR3JhcGhzPENvdXJzZUluc3RhbmNlLCBcInRhYnNcIiB8IFwiYmxvY2tzXCI+O1xyXG4gIHRhYjogU3RyaXBHcmFwaHM8Q291cnNlVGFiPjtcclxuICBzY2hvb2w6IHN0cmluZztcclxuICBkcmFmdElkOiBzdHJpbmc7XHJcbiAgY29udGVudE9yZGVySW5kZXg6IG51bWJlcjtcclxuICBibG9jazogQ291cnNlQmxvY2sgfCBudWxsO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ291cnNlVGFiQ29udGVudEJveCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcz4ge1xyXG4gIG51bUNoYXJzT2JzZXJ2YWJsZSA9IG5ldyBFbWl0dGVyKDApOyAvLyBEZWRpY2F0ZWQgc3RhdGUgZm9yIGEgc3ViLXBhcnQgb2YgdGhlIGdlbmVyYXRlZCBET00gKGF2b2lkIGluZmluaXRlIGxvb3ApXHJcblxyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgLy9udW1DaGFyczogMFxyXG4gICAgfVxyXG4gIH1cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7IGVkaXRNb2RlLCBjb250ZW50LCBicmFuY2gsIGNvdXJzZSwgdGFiLCBzY2hvb2wsIGRyYWZ0SWQsIGNvbnRlbnRPcmRlckluZGV4LCBjb250ZW50cywgYmxvY2sgfSA9IHRoaXMucHJvcHM7XHJcbiAgICBjb25zdCBrZWRTdGFmZiA9IGlzS2VkU3RhZmYoKTtcclxuICAgIC8vY29uc3QgeyBudW1DaGFycyB9ID0gdGhpcy5zdGF0ZTtcclxuICAgIGNvbnN0IHsgbnVtQ2hhcnNPYnNlcnZhYmxlIH0gPSB0aGlzO1xyXG4gICAgcmV0dXJuICFlZGl0TW9kZSB8fCAoY29udGVudC5sb2NrZWQgJiYgIWtlZFN0YWZmKSA/XHJcbiAgICAgIC8vXHJcbiAgICAgIC8vIE5vdCBlZGl0IG1vZGU6XHJcbiAgICAgIC8vXHJcbiAgICAgIDxDb3Vyc2VDb250ZW50Qm94XHJcbiAgICAgICAga2V5PXtjb250ZW50LmlkfVxyXG4gICAgICAgIHJlcG89e2JyYW5jaH1cclxuICAgICAgICBjb250ZW50PXtjb250ZW50fVxyXG4gICAgICAgIHNpYmxpbmdDb250ZW50cz17Y29udGVudHN9XHJcbiAgICAgICAgY291cnNlPXtjb3Vyc2V9XHJcbiAgICAgICAgZWRpdE1vZGU9e2VkaXRNb2RlfVxyXG4gICAgICAgIGNvdXJzZVRhYj17dGFifVxyXG4gICAgICAgIHNjaG9vbD17c2Nob29sfVxyXG4gICAgICAgIGRyYWZ0SWQ9e2RyYWZ0SWR9XHJcbiAgICAgICAgYmxvY2s9e2Jsb2NrfSAvPiA6XHJcbiAgICAgIC8vXHJcbiAgICAgIC8vIEVkaXQgbW9kZTpcclxuICAgICAgLy9cclxuICAgICAgPGRpdiBrZXk9e2NvbnRlbnQuaWR9IGNsYXNzTmFtZT17W1wiY291cnNlLWNvbnRlbnQtYm94XCIsIGNvbnRlbnQudHlwZSAhPT0gJ2xlYXJuaW5nLWdvYWxzJyAmJiBcImtlZF9ib3hlZFwiXS5maWx0ZXIoeCA9PiAhIXgpLmpvaW4oJyAnKX0gc3R5bGU9e3sgcG9zaXRpb246ICdyZWxhdGl2ZScgfX0+XHJcbiAgICAgICAgPEFsaWduSG9yaXpvbnRhbD5cclxuICAgICAgICAgIDxIb3Jpem9udGFsSXRlbT5cclxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiYm94LW1pbmktbGFiZWxcIj57Q09VUlNFX0NPTlRFTlRfVFlQRVNbY29udGVudC50eXBlXX08L3A+XHJcbiAgICAgICAgICA8L0hvcml6b250YWxJdGVtPlxyXG4gICAgICAgICAgPEhvcml6b250YWxJdGVtPlxyXG4gICAgICAgICAgICB7a2VkU3RhZmYgP1xyXG4gICAgICAgICAgICAgIDw+XHJcbiAgICAgICAgICAgICAgICAmbmJzcDtcclxuICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICB0eXBlPVwiY2hlY2tib3hcIiBjaGVja2VkPXshY29udGVudC5sb2NrZWR9XHJcbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtldiA9PiBicmFuY2guY291cnNlQ29udGVudHMudXBkYXRlKGNvbnRlbnQsIHsgbG9ja2VkOiAhZXYudGFyZ2V0LmNoZWNrZWQgfSl9IC8+XHJcbiAgICAgICAgICAgICAgICB7TGBUaWxsw6V0IHJlZGlnZXJpbmdgfVxyXG4gICAgICAgICAgICAgICAgeyFjb250ZW50LmxvY2tlZCA/IDw+XHJcbiAgICAgICAgICAgICAgICAgICZuYnNwO1xyXG4gICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICB0eXBlPVwiY2hlY2tib3hcIiBjaGVja2VkPXshY29udGVudC5sb2NrRGVsZXRlfVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtldiA9PiBicmFuY2guY291cnNlQ29udGVudHMudXBkYXRlKGNvbnRlbnQsIHsgbG9ja0RlbGV0ZTogIWV2LnRhcmdldC5jaGVja2VkIH0pfSAvPlxyXG4gICAgICAgICAgICAgICAgICB7TGBUaWxsw6V0IGTDtmxqYSBydXRhbmB9XHJcbiAgICAgICAgICAgICAgICA8Lz4gOiBudWxsfVxyXG4gICAgICAgICAgICAgIDwvPiA6IG51bGx9XHJcbiAgICAgICAgICA8L0hvcml6b250YWxJdGVtPlxyXG4gICAgICAgIDwvQWxpZ25Ib3Jpem9udGFsPlxyXG4gICAgICAgIDxDb3Vyc2VDb250ZW50Qm94XHJcbiAgICAgICAgICByZXBvPXticmFuY2h9XHJcbiAgICAgICAgICBjb250ZW50PXtjb250ZW50fVxyXG4gICAgICAgICAgc2libGluZ0NvbnRlbnRzPXtjb250ZW50c31cclxuICAgICAgICAgIGNvdXJzZT17Y291cnNlfVxyXG4gICAgICAgICAgZWRpdE1vZGU9e3RydWV9XHJcbiAgICAgICAgICBzY2hvb2w9e3NjaG9vbH1cclxuICAgICAgICAgIGRyYWZ0SWQ9e2RyYWZ0SWR9XHJcbiAgICAgICAgICBjb3Vyc2VUYWI9e3RhYn1cclxuICAgICAgICAgIG1heENoYXJzPXtNQVhfQ0hBUlNfSU5fQ09OVEVOVFN9XHJcbiAgICAgICAgICByZXBvcnROdW1DaGFycz17bnVtQ2hhcnMgPT4ge1xyXG4gICAgICAgICAgICAvLyBBdm9pZCBzZXR0aW5nIHN0YXRlIGJlY2F1c2UgaXQgdHVybnMgb3V0IHRvIGJlIGluZmluaXRlIGxvb3AuXHJcbiAgICAgICAgICAgIC8vIChzZXRTdGF0ZSgpIGxlYWRzIHRvIHJlLXJlbmRlciBvZiB0aGlzIHdob2xlIGNvbXBvbmVudCwgbGVhZGluZyB0b1xyXG4gICAgICAgICAgICAvLyByZS1yZW5kZXIgb2YgQ291cnNlQ29udGVudEJveCwgdGhhdCBjYWxscyByZXBvcnROdW1DaGFycyBldGMuLi4pXHJcbiAgICAgICAgICAgIC8vIEluc3RlYWQgd2UgY29tbXVuaWNhdGUgdGhpcyBwYXJ0aWN1bGFyIHN0YXRlIHRvIGEgZGVkaWNhdGVkIE9ic2VydmFibGVcclxuICAgICAgICAgICAgLy8gdGhhdCB3aWxsIG9ubHkgdXBkYXRlIHRoZSBwYXJ0aWN1bGFyIGNvbXBvbmVudCB0aGF0IGlzIGFmZmVjdGVkIGJ5IGl0LlxyXG4gICAgICAgICAgICBudW1DaGFyc09ic2VydmFibGUuZGlzcGF0Y2gobnVtQ2hhcnMpO1xyXG4gICAgICAgICAgICAvL3RoaXMuc2V0U3RhdGUoeyBudW1DaGFycyB9KTtcclxuICAgICAgICAgIH19XHJcbiAgICAgICAgICBibG9jaz17YmxvY2t9XHJcbiAgICAgICAgLz5cclxuICAgICAgICA8ZGl2IHN0eWxlPXt7IHBvc2l0aW9uOiAnYWJzb2x1dGUnLCB0b3A6IDAsIHJpZ2h0OiAwIH19PlxyXG4gICAgICAgICAgeyhrZWRTdGFmZiB8fCAhY29udGVudC5sb2NrZWQpICYmIGNvbnRlbnRPcmRlckluZGV4ID4gMCAmJiA8c3Bhbj5cclxuICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtYXJyb3ctY2lyY2xlLXVwIHNlbGVjdGFibGVcIlxyXG4gICAgICAgICAgICAgIGFyaWEtaGlkZGVuPVwidHJ1ZVwiXHJcbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3T3JkZXIgPSByZW9yZGVyKGNvbnRlbnRzLCBjb250ZW50LmlkLCBjb250ZW50c1tjb250ZW50T3JkZXJJbmRleCAtIDFdLmlkLCBcImJlZm9yZVwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChuZXdPcmRlcikge1xyXG4gICAgICAgICAgICAgICAgICBicmFuY2guY291cnNlQ29udGVudHMudXBkYXRlKGNvbnRlbnQsIHsgb3JkZXI6IG5ld09yZGVyIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH19IC8+IDwvc3Bhbj59XHJcbiAgICAgICAgICB7KGtlZFN0YWZmIHx8ICFjb250ZW50LmxvY2tlZCkgJiYgY29udGVudE9yZGVySW5kZXggPCBjb250ZW50cy5sZW5ndGggLSAxICYmIDxzcGFuPlxyXG4gICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1hcnJvdy1jaXJjbGUtZG93biBzZWxlY3RhYmxlXCJcclxuICAgICAgICAgICAgICBhcmlhLWhpZGRlbj1cInRydWVcIlxyXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld09yZGVyID0gcmVvcmRlcihjb250ZW50cywgY29udGVudC5pZCwgY29udGVudHNbY29udGVudE9yZGVySW5kZXggKyAxXS5pZCwgXCJhZnRlclwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChuZXdPcmRlcikge1xyXG4gICAgICAgICAgICAgICAgICBicmFuY2guY291cnNlQ29udGVudHMudXBkYXRlKGNvbnRlbnQsIHsgb3JkZXI6IG5ld09yZGVyIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH19IC8+IDwvc3Bhbj59XHJcbiAgICAgICAgICB7a2VkU3RhZmYgfHwgIWNvbnRlbnQubG9ja0RlbGV0ZSA/IDxSZW1vdmVJdGVtXHJcbiAgICAgICAgICAgIHRpdGxlPXtzY2hvb2wgPT09ICdzdGFuZGFyZCcgPyBMYFRhIGJvcnQgaW5uZWjDpWxsc3J1dGFuYCA6IExgRMO2bGogaW5uZWjDpWxsc3J1dGFuYH1cclxuICAgICAgICAgICAgc3R5bGU9e3sgZGlzcGxheTogJ2lubGluZS1ibG9jaycgfX1cclxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gY29uZmlybShMYFRhIGJvcnQgaW5uZWjDpWxsP2ApICYmIGJyYW5jaC5jb3Vyc2VUYWJzLnJlbW92ZVJlbGF0ZWQodGFiLmlkLCBcImNvbnRlbnRzXCIsIGNvbnRlbnQpfSAvPlxyXG4gICAgICAgICAgICA6IG51bGx9XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAge2NvbnRlbnQudHlwZSA9PT0gJ3JpY2gtdGV4dCcgPyA8TGF6eUNvbnRlbnQ+e1xyXG4gICAgICAgICAgbnVtQ2hhcnNPYnNlcnZhYmxlLm1hcChudW1DaGFycyA9PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17W1wiY2hhci1jb3VudGVyLWJvdHRvbVwiXS5jb25jYXQobnVtQ2hhcnMgPj0gTUFYX0NIQVJTX0lOX0NPTlRFTlRTID8gXCJvdmVyZmxvd2VkXCIgOiBbXSkuam9pbignICcpfT5cclxuICAgICAgICAgICAgICB7TGBUZXh0ZW4gaW5uZWjDpWxsZXIgJHtudW1DaGFyc30gYXYgbWF4ICR7TUFYX0NIQVJTX0lOX0NPTlRFTlRTfSB0aWxsw6V0bmEgdGVja2VuYH1cclxuICAgICAgICAgICAgPC9kaXY+KVxyXG4gICAgICAgICAgfTwvTGF6eUNvbnRlbnQ+IDpcclxuICAgICAgICAgIHVuZGVmaW5lZH1cclxuICAgICAgPC9kaXY+XHJcblxyXG4gIH1cclxufSIsImltcG9ydCB7IEwgfSBmcm9tICcuLi8uLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IENvdXJzZUluc3RhbmNlIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5cclxuZXhwb3J0IGNvbnN0IENvdXJzZVRhYkNsYXNzZXMgPSB7XHJcbiAgXCJpbnRyby10YWJcIjogTGBJbnRyb2R1a3Rpb25zZmxpa2AsXHJcbiAgXCJydW4tdXAtdGFiXCI6IExgVXBwdGFrdHNmbGlrYCxcclxuICBcInN1YmplY3QtdGFiXCI6IExgw4RtbmVzZmxpa2AsXHJcbiAgXCJtaXNzaW9uLXRhYlwiOiBMYFVwcGRyYWdzZmxpa2AsXHJcbiAgXCJjb250ZW50LXRhYlwiOiBMYEdlbmVyZWxsIGZsaWtgLFxyXG4gIFwidGVhY2hlci10YWJcIjogTGBMw6RyYXJzaWRhYCxcclxuICBcIndvcmQtYmFuay10YWJcIjogTGBPcmRiYW5rYFxyXG59XHJcblxyXG50eXBlIFRhYlR5cGVPcHRJbiA9IHtbVGFiVHlwZSBpbiBrZXlvZiB0eXBlb2YgQ291cnNlVGFiQ2xhc3Nlc10/OiBib29sZWFufTtcclxuXHJcbmV4cG9ydCBjb25zdCBUYWJUeXBlc1BlckNvdXJzZVR5cGU6IHtbQ291cnNlVHlwZSBpbiBDb3Vyc2VJbnN0YW5jZVtcInR5cGVcIl1dOiBBcnJheTxrZXlvZiB0eXBlb2YgQ291cnNlVGFiQ2xhc3Nlcz59ID0ge1xyXG4gIFwic3RlcC1jb3Vyc2VcIjogW1xyXG4gICAgXCJjb250ZW50LXRhYlwiLFxyXG4gICAgXCJpbnRyby10YWJcIixcclxuICAgIFwidGVhY2hlci10YWJcIixcclxuICAgIFwid29yZC1iYW5rLXRhYlwiXHJcbiAgXSxcclxuICBcInRoZW1lLWNvdXJzZVwiOiBbXHJcbiAgICBcImNvbnRlbnQtdGFiXCIsXHJcbiAgICBcInJ1bi11cC10YWJcIixcclxuICAgIFwic3ViamVjdC10YWJcIixcclxuICAgIFwibWlzc2lvbi10YWJcIixcclxuICAgIFwidGVhY2hlci10YWJcIlxyXG4gIF1cclxufTtcclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBkYiwgQ291cnNlSW5zdGFuY2VzIH0gZnJvbSAnLi4vLi4vLi4vZ2xvYmFscy9kYic7XHJcbmltcG9ydCB7IEJhbm5lclByb3BzLCBMYXp5QmFubmVyIH0gZnJvbSAnLi4vY29tbW9uL2Jhbm5lcic7XHJcbmltcG9ydCB7IEVtaXR0ZXIsIENvbGxlY3Rpb24sIE9ic2VydmFibGUsIFZhbHVlIH0gZnJvbSAna2VkYmFja2VuZC9vYnNlcnZhYmxlJztcclxuaW1wb3J0IHsgTCwgc2hvd0Vycm9yLCBjb21wYXJlUHJvcCwgY29tcGFyZVByb3BzIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgY2ZnIGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvS0VELmNmZyc7XHJcbmltcG9ydCB7IGlzVGVhY2hlckF0U2Nob29sLCBwcmVzZXJ2ZUltcGVyc29uYXRpb25RdWVyeSB9IGZyb20gJy4uLy4uLy4uL2FjY2Vzcy1jb250cm9sJztcclxuaW1wb3J0IHsgQWRkVGFiQnV0dG9uIH0gZnJvbSAnLi9hZGQtdGFiLWJ1dHRvbic7XHJcbmltcG9ydCB7IHdpdGhSb3V0ZXIsIFJvdXRlQ29tcG9uZW50UHJvcHMgfSBmcm9tICdyZWFjdC1yb3V0ZXInO1xyXG5pbXBvcnQgeyBDb3Vyc2VBcmVhIH0gZnJvbSAnLi9jb3Vyc2UtYXJlYSc7XHJcbmltcG9ydCB7IExpbmsgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcclxuaW1wb3J0IHsgVGFza0VkaXRvciB9IGZyb20gJy4vdGFzay90YXNrLWVkaXRvcic7XHJcbmltcG9ydCB7IENsaWNrYWJsZVNjaG9vbERpdiB9IGZyb20gJy4vY2xpY2thYmxlLXNjaG9vbC1kaXYnO1xyXG5pbXBvcnQgeyBpc0VtcGxveWVlIH0gZnJvbSAnLi4vbG9naWMvaXMtZW1wbG95ZWUnO1xyXG5pbXBvcnQgeyBUYXNrVmlld2VyUGFnZSB9IGZyb20gJy4vdGFzay92aWV3ZXIvdGFzay12aWV3ZXItcGFnZSc7XHJcbmltcG9ydCB7IGlzS2VkU3RhZmYgfSBmcm9tICcuLi9sb2dpYy9pcy1rZWQtc3RhZmYnO1xyXG5pbXBvcnQgeyBDb3Vyc2VUYWIsIFRoZW1lQ291cnNlVGFiLCBUaGVtZUNvdXJzZUluc3RhbmNlLCBDb3Vyc2VJbnN0YW5jZSwgQ291cnNlQmxvY2ssIFN0ZXBDb3Vyc2VUYWIsIFNjaG9vbCB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgS2VkQmFja2VuZFJlcG8sIFdpdGhHcmFwaHMsIFN0cmlwR3JhcGhzIH0gZnJvbSAna2VkYmFja2VuZC9yZXBvJztcclxuaW1wb3J0IHsgTGF6eUNvbnRlbnQgfSBmcm9tICcuLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvbGF6eS1jb250ZW50JztcclxuaW1wb3J0IHsgcmVvcmRlciB9IGZyb20gJy4uL2xvZ2ljL2NoYW5nZS1zb3J0LW9yZGVyJztcclxuaW1wb3J0IHsgSW5qZWN0ZWRJbnRsUHJvcHMsIGluamVjdEludGwgfSBmcm9tICdyZWFjdC1pbnRsJztcclxuaW1wb3J0IHsgc2V0dXBJbnRsIH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL1NldHVwTGFuZ3VhZ2VJbnRsJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyBleHRlbmRzIFJvdXRlQ29tcG9uZW50UHJvcHM8YW55PiB7XHJcbiAgc2Nob29sOiBzdHJpbmc7XHJcbiAgY291cnNlSWQ6IHN0cmluZztcclxuICBhY3RpdmVUYWI/OiBzdHJpbmc7XHJcbiAgZHJhZnRJZD86IHN0cmluZztcclxuICBlZGl0TW9kZT86IGJvb2xlYW47XHJcbiAgY29udGVudElkPzogc3RyaW5nO1xyXG4gIHRhc2tJZD86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IENvdXJzZVZpZXdlclBhZ2UgPSB3aXRoUm91dGVyKCgoeyBzY2hvb2wsIGNvdXJzZUlkLCBhY3RpdmVUYWIsIGRyYWZ0SWQsIGVkaXRNb2RlLCBoaXN0b3J5LCBjb250ZW50SWQsIHRhc2tJZCB9OiBQcm9wcyApID0+IHtcclxuICBjb25zdCByZXBvID0gZWRpdE1vZGUgP1xyXG4gICAgZGIgOiAvLyBJbiBlZGl0IG1vZGUsIGRvIG5vdCBvcHRpbWl6ZSBjYWNoZSwgYXMgaXQgcHJvaGliaXRzIGNvbGxhYm9yYXRpb25cclxuICAgIGRiLm9wdGltaXplQ2FjaGUoKTtcclxuXHJcbiAgY29uc3Qgc2Nob29sT2JzZXJ2YWJsZSA9IHJlcG8uc2Nob29scy5uYW1lKHNjaG9vbCkuc2luZ2xlKCk7XHJcblxyXG4gIGNvbnN0IGJyYW5jaE9ic2VydmFibGUgPSBkcmFmdElkID8gLy8gSW4gZWRpdCBtb2RlLCBkcmFmdElkIGlzIGRlZmluZWQuXHJcbiAgICBuZXcgRW1pdHRlcihyZXBvLmJyYW5jaChkcmFmdElkKSkgOlxyXG4gICAgc2Nob29sT2JzZXJ2YWJsZS5tYXAoc2Nob29sID0+IHJlcG8uYnJhbmNoKHNjaG9vbC5vZmZpY2lhbEJyYW5jaElkKSk7XHJcblxyXG4gIGNvbnN0IGNvdXJzZU9ic2VydmFibGUgPSBicmFuY2hPYnNlcnZhYmxlLnN3aXRjaE1hcChicmFuY2ggPT5cclxuICAgIGJyYW5jaC5jb3Vyc2VJbnN0YW5jZXMuaW5jbHVkZShcImJsb2Nrc1wiLCBcInRhYnNcIikuaWQoY291cnNlSWQpKTtcclxuXHJcbiAgY29uc3QgaW50ZXJtZWRpYXRlT2JzZXJ2YWJsZTogVmFsdWU8e1xyXG4gICAgY291cnNlOiBXaXRoR3JhcGhzPENvdXJzZUluc3RhbmNlLCBcImJsb2Nrc1wiIHwgXCJ0YWJzXCI+XHJcbiAgICB0YWJzOiBDb3Vyc2VUYWJbXVxyXG4gICAgYnJhbmNoOiBLZWRCYWNrZW5kUmVwbyxcclxuICAgIGJsb2NrOiBDb3Vyc2VCbG9jayB8IG51bGwsXHJcbiAgICBzY2hvb2xFbnRpdHk6IFNjaG9vbFxyXG4gIH0+ID0gY291cnNlT2JzZXJ2YWJsZS5jb21iaW5lTGF0ZXN0KHNjaG9vbE9ic2VydmFibGUpXHJcbiAgICAuc3dpdGNoTWFwKChbY291cnNlLCBzY2hvb2xFbnRpdHldKSA9PiB7XHJcbiAgICAgIGNvbnN0IGJyYW5jaCA9IGRyYWZ0SWQgP1xyXG4gICAgICAgIHJlcG8uYnJhbmNoKGRyYWZ0SWQpIDpcclxuICAgICAgICByZXBvLmJyYW5jaChzY2hvb2xFbnRpdHkub2ZmaWNpYWxCcmFuY2hJZCk7XHJcblxyXG4gICAgICBpZiAoY291cnNlLnR5cGUgPT09ICd0aGVtZS1jb3Vyc2UnKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBFbWl0dGVyKHtjb3Vyc2UsIHRhYnM6IGNvdXJzZS50YWJzLCBicmFuY2gsIGJsb2NrOiBudWxsLCBzY2hvb2xFbnRpdHl9KTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoYWN0aXZlVGFiICYmIGFjdGl2ZVRhYiAhPT0gJyQnKVxyXG4gICAgICAgIHJldHVybiBicmFuY2guY291cnNlQmxvY2tzLmhhc0VkZ2VzVG8oW2FjdGl2ZVRhYl0pLmluY2x1ZGUoXCJ0YWJzXCIpLnRvVmFsdWUoKVxyXG4gICAgICAgICAgLm1hcCgoW2Jsb2NrXSkgPT4gKHtcclxuICAgICAgICAgICAgY291cnNlLFxyXG4gICAgICAgICAgICB0YWJzOiBibG9jay50YWJzLFxyXG4gICAgICAgICAgICBicmFuY2gsXHJcbiAgICAgICAgICAgIGJsb2NrOiBibG9jayB8fCBjb3Vyc2UuYmxvY2tzWzBdLFxyXG4gICAgICAgICAgICBzY2hvb2xFbnRpdHlcclxuICAgICAgICAgIH0pKTtcclxuICAgICAgaWYgKGNvdXJzZS5ibG9ja3MubGVuZ3RoID4gMClcclxuICAgICAgICByZXR1cm4gYnJhbmNoLmNvdXJzZUJsb2Nrcy5pbmNsdWRlKFwidGFic1wiKS5pZChjb3Vyc2UuYmxvY2tzWzBdLmlkKVxyXG4gICAgICAgICAgLm1hcChibG9jayA9PiAoe1xyXG4gICAgICAgICAgICBjb3Vyc2UsXHJcbiAgICAgICAgICAgIHRhYnM6IGJsb2NrLnRhYnMsXHJcbiAgICAgICAgICAgIGJyYW5jaCxcclxuICAgICAgICAgICAgYmxvY2ssXHJcbiAgICAgICAgICAgIHNjaG9vbEVudGl0eVxyXG4gICAgICAgICAgfSkpO1xyXG4gICAgICByZXR1cm4gbmV3IEVtaXR0ZXIoe2NvdXJzZSwgdGFiczogW10sIGJyYW5jaCwgYmxvY2s6IG51bGwsIHNjaG9vbEVudGl0eX0pO1xyXG4gICAgfSk7XHJcblxyXG4gIGNvbnN0IGJhbm5lclByb3BzT2JzZXJ2YWJsZSA9IGludGVybWVkaWF0ZU9ic2VydmFibGVcclxuICAgIC5tYXA8QmFubmVyUHJvcHM+KCh7Y291cnNlLCB0YWJzLCBicmFuY2gsIGJsb2NrLCBzY2hvb2xFbnRpdHl9KSA9PiB7XHJcbiAgICAgIHJldHVybiBnZXRDb3Vyc2VCYW5uZXJQcm9wcyhcclxuICAgICAgICB0YWJzLFxyXG4gICAgICAgIGVkaXRNb2RlLFxyXG4gICAgICAgIHNjaG9vbCxcclxuICAgICAgICBzY2hvb2xFbnRpdHksXHJcbiAgICAgICAgZHJhZnRJZCxcclxuICAgICAgICBjb3Vyc2UgYXMgQ291cnNlSW5zdGFuY2UsXHJcbiAgICAgICAgYnJhbmNoLFxyXG4gICAgICAgIGFjdGl2ZVRhYixcclxuICAgICAgICBibG9jaylcclxuICAgIH0pO1xyXG5cclxuICByZXR1cm4gPD5cclxuICAgIDxMYXp5QmFubmVyXHJcbiAgICAgIGxhenlQcm9wcz17YmFubmVyUHJvcHNPYnNlcnZhYmxlfVxyXG4gICAgLz5cclxuICAgICAge1xyXG4gICAgICAgIHRhc2tJZCA/IGVkaXRNb2RlID9cclxuICAgICAgICAgIDxMYXp5Q29udGVudD5cclxuICAgICAgICAgICAge2ludGVybWVkaWF0ZU9ic2VydmFibGUubWFwKCh7YnJhbmNoLCBibG9jaywgY291cnNlLCB0YWJzfSkgPT4gPFRhc2tFZGl0b3JcclxuICAgICAgICAgICAgICBzY2hvb2w9e3NjaG9vbH1cclxuICAgICAgICAgICAgICBjb3Vyc2U9e2NvdXJzZX1cclxuICAgICAgICAgICAgICBkcmFmdElkPXtkcmFmdElkfVxyXG4gICAgICAgICAgICAgIGJyYW5jaD17YnJhbmNofVxyXG4gICAgICAgICAgICAgIGFjdGl2ZVRhYj17YWN0aXZlVGFifVxyXG4gICAgICAgICAgICAgIGNvbnRlbnRJZD17Y29udGVudElkfVxyXG4gICAgICAgICAgICAgIHRhc2tJZD17dGFza0lkfVxyXG4gICAgICAgICAgICAgIGJsb2NrSWQ9e2Jsb2NrICYmIGJsb2NrLmlkfVxyXG4gICAgICAgICAgICAvPil9XHJcbiAgICAgICAgICA8L0xhenlDb250ZW50PiA6XHJcbiAgICAgICAgICA8VGFza1ZpZXdlclBhZ2VcclxuICAgICAgICAgICAgc2Nob29sPXtzY2hvb2x9XHJcbiAgICAgICAgICAgIGNvdXJzZUlkPXtjb3Vyc2VJZH1cclxuICAgICAgICAgICAgbGF6eVJlcG89e2JyYW5jaE9ic2VydmFibGV9XHJcbiAgICAgICAgICAgIGFjdGl2ZVRhYj17YWN0aXZlVGFifVxyXG4gICAgICAgICAgICB0YXNrSWQ9e3Rhc2tJZH1cclxuICAgICAgICAgICAgY29udGVudElkPXtjb250ZW50SWR9XHJcbiAgICAgICAgICAgIGRyYWZ0SWQ9e2RyYWZ0SWR9XHJcbiAgICAgICAgLz4gOlxyXG4gICAgICAgIDxMYXp5Q29udGVudD5cclxuICAgICAgICAgIHtpbnRlcm1lZGlhdGVPYnNlcnZhYmxlLm1hcCgoe2JyYW5jaCwgYmxvY2ssIGNvdXJzZSwgdGFic30pID0+IFxyXG4gICAgICAgICAgICA8Q291cnNlQXJlYVxyXG4gICAgICAgICAgICAgIHNjaG9vbD17c2Nob29sfVxyXG4gICAgICAgICAgICAgIGNvdXJzZUlkPXtjb3Vyc2VJZH1cclxuICAgICAgICAgICAgICBkcmFmdElkPXtkcmFmdElkfVxyXG4gICAgICAgICAgICAgIGNvdXJzZT17Y291cnNlfVxyXG4gICAgICAgICAgICAgIGJyYW5jaD17YnJhbmNofVxyXG4gICAgICAgICAgICAgIHRhYnM9e3RhYnN9XHJcbiAgICAgICAgICAgICAgYWN0aXZlVGFiPXthY3RpdmVUYWJ9XHJcbiAgICAgICAgICAgICAgZWRpdE1vZGU9e2VkaXRNb2RlfVxyXG4gICAgICAgICAgICAgIGJsb2NrPXtibG9ja31cclxuICAgICAgICAgIC8+KX1cclxuICAgICAgICA8L0xhenlDb250ZW50PlxyXG4gICAgICB9XHJcbiAgPC8+XHJcbn0pKTtcclxuXHJcbmZ1bmN0aW9uIGdldENvdXJzZUJhbm5lclByb3BzKFxyXG4gIHRhYnM6IENvdXJzZVRhYltdLFxyXG4gIGVkaXRNb2RlOiBib29sZWFuLFxyXG4gIHNjaG9vbDogc3RyaW5nLFxyXG4gIHNjaG9vbEVudGl0eTogU2Nob29sLFxyXG4gIGRyYWZ0SWQ6IHN0cmluZyxcclxuICBjb3Vyc2U6IENvdXJzZUluc3RhbmNlLFxyXG4gIGJyYW5jaDogS2VkQmFja2VuZFJlcG8sXHJcbiAgYWN0aXZlVGFiOiBzdHJpbmcsXHJcbiAgYmxvY2s/OiBDb3Vyc2VCbG9jaykgOiBCYW5uZXJQcm9wc1xyXG57XHJcbiAgY29uc3Qga2VkU3RhZmYgPSBpc0tlZFN0YWZmKCk7XHJcbiAgdGFicy5zb3J0KGNvbXBhcmVQcm9wcyhbXCJzdGVwTm9cIiwgXCJvcmRlclwiXSkpO1xyXG4gIGNvbnN0IGNvdXJzZUlkID0gY291cnNlLmlkO1xyXG4gIGNvbnN0IGFjdGl2ZVRhYk9iaiA9IHRhYnMuZmlsdGVyKHRhYiA9PiB0YWIuaWQgPT09IGFjdGl2ZVRhYilbMF0gfHwgdGFic1swXTtcclxuICBpZiAoY291cnNlLnR5cGUgPT09ICdzdGVwLWNvdXJzZScgJiYgYWN0aXZlVGFiT2JqICYmIGFjdGl2ZVRhYk9iai50eXBlID09PSAnc3RlcC1jb3Vyc2UtdGFiJykge1xyXG4gICAgdGFicyA9IHRhYnMuZmlsdGVyKHRhYiA9PiB0YWIudHlwZSA9PT0gJ3N0ZXAtY291cnNlLXRhYicgJiYgdGFiLnN0ZXBObyA9PT0gYWN0aXZlVGFiT2JqLnN0ZXBObyk7XHJcbiAgfVxyXG4gIGNvbnN0IGJhbm5lclRhYnMgPSAoaXNFbXBsb3llZSgpID8gdGFicyA6IHRhYnMuZmlsdGVyKHRhYiA9PiB0YWIudGFiQ2xhc3MgIT09ICd0ZWFjaGVyLXRhYicpKVxyXG4gICAgLnNvcnQoY29tcGFyZVByb3AoXCJvcmRlclwiKSkubWFwPEJhbm5lclByb3BzW1widGFic1wiXVtudW1iZXJdPih0YWIgPT4gKHtcclxuICAgICAga2V5OiB0YWIuaWQsXHJcbiAgICAgIG5hbWU6IHRhYi50YWJUaXRsZSwgLy8gVE9ETzogUmVwbGFjZSB3aXRoIHRhYi5uYW1lIVxyXG4gICAgICBkcmFnZ2FibGU6IHRydWUsXHJcbiAgICAgIGxpbms6IGVkaXRNb2RlID9cclxuICAgICAgICBgLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlSWR9L3RhYnMvJHt0YWIuaWR9JHtkcmFmdElkID8gYC9kcmFmdHMvJHtkcmFmdElkfWAgOiAnJ30vZWRpdGAgOlxyXG4gICAgICAgIGAvJHtzY2hvb2x9L2NvdXJzZXMvJHtjb3Vyc2VJZH0vdGFicy8ke3RhYi5pZH0ke2RyYWZ0SWQgPyBgL2RyYWZ0cy8ke2RyYWZ0SWR9YCA6ICcnfWBcclxuICAgIH0pKTtcclxuICBjb25zdCBidXR0b25zOiBKU1guRWxlbWVudFtdID0gW107XHJcbiAgaWYgKGVkaXRNb2RlICYmIChrZWRTdGFmZiB8fCBjb3Vyc2UuYWxsb3dBZGRUYWJzKSkge1xyXG4gICAgaWYgKGNvdXJzZS50eXBlID09PSAndGhlbWUtY291cnNlJykge1xyXG4gICAgICBidXR0b25zLnB1c2goPEFkZFRhYkJ1dHRvblxyXG4gICAgICAgICAgdHlwZT1cInRoZW1lLWNvdXJzZS10YWJcIlxyXG4gICAgICAgICAga2V5PVwiJGFkZFRhYlwiIHNjaG9vbD17c2Nob29sfSBjb3Vyc2U9e2NvdXJzZX0gYnJhbmNoPXticmFuY2h9IGRyYWZ0SWQ9e2RyYWZ0SWR9IC8+KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IHN0ZXBObyA9IGFjdGl2ZVRhYk9iaiA/XHJcbiAgICAgICAgKGFjdGl2ZVRhYk9iaiBhcyBTdGVwQ291cnNlVGFiKS5zdGVwTm8gOlxyXG4gICAgICAgIGJsb2NrLnN0ZXBOdW1iZXJzWzBdIHx8IDE7XHJcbiAgICAgIGJ1dHRvbnMucHVzaCg8QWRkVGFiQnV0dG9uXHJcbiAgICAgICAgdHlwZT1cInN0ZXAtY291cnNlLXRhYlwiXHJcbiAgICAgICAga2V5PVwiJGFkZFRhYlwiXHJcbiAgICAgICAgc2Nob29sPXtzY2hvb2x9IGNvdXJzZT17Y291cnNlfSBicmFuY2g9e2JyYW5jaH0gZHJhZnRJZD17ZHJhZnRJZH0gYmxvY2s9e2Jsb2NrfSBzdGVwTm89e3N0ZXBOb31cclxuICAgICAgLz4pO1xyXG4gICAgfVxyXG4gIH1cclxuICBpZiAoa2VkU3RhZmYpIHtcclxuICAgIC8vIFJlbW92ZSB0aGUgXCJyb2xlXCIgYXR0cmlidXRlIGZyb20gcXVlcnksIGFzIHdlIHdhbnQgdG8gc3RvcCBpbXBlcnNvbmF0aW5nIGFuIEVtcGxveWVlIHdoZW4gdXNpbmcgdGhlIGFkbWluIGludGVyZmFjZVxyXG4gICAgYnV0dG9ucy5wdXNoKDxhXHJcbiAgICAgIGhyZWY9e3ByZXNlcnZlSW1wZXJzb25hdGlvblF1ZXJ5KGNmZy5LRURfU1VCSkVDVF9QTEFOTkVSX0FETUlOX1VSTCwge3JvbGU6IHVuZGVmaW5lZH0pICtcclxuICAgICAgICBgIy9hZG1pbi9jb3Vyc2VzLyR7Y291cnNlSWR9L3NldHRpbmdzYH1cclxuICAgICAga2V5PVwiJHNldHRpbmdzXCJcclxuICAgICAgdGl0bGU9e0xgSW5zdMOkbGxuaW5nYXJgfVxyXG4gICAgPlxyXG4gICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1jb2dcIiBhcmlhLWhpZGRlbj17dHJ1ZX0gLz4mbmJzcDtcclxuICAgIDwvYT4pO1xyXG4gIH1cclxuICBjb25zdCBiYW5uZXJQcm9wczogQmFubmVyUHJvcHMgPSB7XHJcbiAgICB0aXRsZTogY291cnNlLm5hbWUsXHJcbiAgICBiYWNrZ3JvdW5kSW1hZ2U6IG51bGwsXHJcbiAgICB0YWJzOiBiYW5uZXJUYWJzLFxyXG4gICAgY29ybmVyQm94OiA8Q2xpY2thYmxlU2Nob29sRGl2IHNjaG9vbD17c2Nob29sfSBkcmFmdElkPXtkcmFmdElkfSBkaXNwbGF5TmFtZT17c2Nob29sRW50aXR5LmRpc3BsYXlOYW1lIHx8IHNjaG9vbH0gLz4sXHJcbiAgICBidXR0b25zLFxyXG4gICAgYWN0aXZlVGFiOiBhY3RpdmVUYWIgfHwgKGJhbm5lclRhYnNbMF0gJiYgYmFubmVyVGFic1swXS5rZXkpLFxyXG4gICAgYmxvY2tzOiBjb3Vyc2UuYmxvY2tzICYmIGNvdXJzZS5ibG9ja3Muc29ydChjb21wYXJlUHJvcChcImJsb2NrTm9cIikpLm1hcCgoe2lkOiBibG9ja0lkLCBuYW1lLCBzdGVwTnVtYmVyc30pID0+ICh7XHJcbiAgICAgIGlkOiBibG9ja0lkLFxyXG4gICAgICBuYW1lLFxyXG4gICAgICBzdGVwczogc3RlcE51bWJlcnMubWFwKHN0ZXBObyA9PiAoe1xyXG4gICAgICAgIGlzQWN0aXZlOiBhY3RpdmVUYWJPYmogJiYgc3RlcE5vID09PSAoYWN0aXZlVGFiT2JqIGFzIFN0ZXBDb3Vyc2VUYWIpLnN0ZXBObyxcclxuICAgICAgICBzdGVwTm8sXHJcbiAgICAgICAgbGluazogYC8ke3NjaG9vbH0vY291cnNlcy8ke2NvdXJzZUlkfS9ibG9ja3MvJHtibG9ja0lkfS9zdGVwcy8ke3N0ZXBOb31gXHJcbiAgICAgIH0pKVxyXG4gICAgfSkpLFxyXG4gICAgc29ydGFibGVUYWJzOiBlZGl0TW9kZSAmJiAoa2VkU3RhZmYgfHwgY291cnNlLmFsbG93UmVvcmRlclRhYnMpLFxyXG4gICAgb25UYWJEcm9wOiBhc3luYyAoc291cmNlLCB0YXJnZXQsIHBsYWNlbWVudCkgPT4ge1xyXG4gICAgICBjb25zdCBuZXdPcmRlciA9IHJlb3JkZXIodGFicywgc291cmNlLCB0YXJnZXQsIHBsYWNlbWVudCk7XHJcbiAgICAgIGlmIChuZXdPcmRlcikge1xyXG4gICAgICAgIGNvbnN0IHNvdXJjZVRhYiA9IHRhYnMuZmluZCh0ID0+IHQuaWQgPT09IHNvdXJjZSk7XHJcbiAgICAgICAgaWYgKHNvdXJjZVRhYikge1xyXG4gICAgICAgICAgYnJhbmNoLmNvdXJzZVRhYnMudXBkYXRlKHNvdXJjZVRhYiwge29yZGVyOiBuZXdPcmRlcn0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcbiAgcmV0dXJuIGJhbm5lclByb3BzO1xyXG59XHJcblxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kUmVwbywgU3RyaXBHcmFwaHMgfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyB3aXRoUm91dGVyLCBSb3V0ZVByb3BzLCBSb3V0ZUNvbXBvbmVudFByb3BzIH0gZnJvbSAncmVhY3Qtcm91dGVyJztcclxuaW1wb3J0IHsgTGluayB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xyXG5pbXBvcnQgeyBkYiB9IGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvZGInO1xyXG5pbXBvcnQgZW52IGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCB7IHB1Ymxpc2hDb3Vyc2UgfSBmcm9tICcuLi9sb2dpYy9wdWJsaXNoLWNvdXJzZSc7XHJcbmltcG9ydCB7IEhvcml6b250YWxJdGVtIH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2hvcml6b250YWwtaXRlbSc7XHJcbmltcG9ydCB7IEFsaWduSG9yaXpvbnRhbCB9IGZyb20gJy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9hbGlnbi1ob3Jpem9udGFsJztcclxuaW1wb3J0IHsgaXNLZWRTdGFmZiB9IGZyb20gJy4uL2xvZ2ljL2lzLWtlZC1zdGFmZic7XHJcbmltcG9ydCB7IENvdXJzZVRhYiwgQ291cnNlSW5zdGFuY2UgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IERvY3VtZW50QWNjZXNzLCBoYXNBY2Nlc3MgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XHJcbmltcG9ydCB7IGhhc1dyaXRlQWNjZXNzLCBoYXNTaGFyZUFjY2VzcyB9IGZyb20gJy4uLy4uLy4uL2FjY2Vzcy1jb250cm9sJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgc2Nob29sOiBzdHJpbmc7XHJcbiAgY291cnNlOiBDb3Vyc2VJbnN0YW5jZTtcclxuICB0YWI6IFN0cmlwR3JhcGhzPENvdXJzZVRhYj47XHJcbiAgYWN0aXZlVGFiOiBzdHJpbmc7XHJcbiAgZHJhZnRJZDogc3RyaW5nO1xyXG4gIGJsb2NrSWQ/OiBzdHJpbmc7XHJcbiAgY291cnNlVHlwZTogJ3RoZW1lLWNvdXJzZScgfCAnc3RlcC1jb3Vyc2UnXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBFZGl0b3JGb290ZXJCdXR0b25zID0gd2l0aFJvdXRlcigoeyBzY2hvb2wsIGNvdXJzZSwgdGFiLCBhY3RpdmVUYWIsIGRyYWZ0SWQsIGhpc3RvcnksIGNvdXJzZVR5cGUsIGJsb2NrSWQgfTogUHJvcHMgJiBSb3V0ZUNvbXBvbmVudFByb3BzKSA9PiA8PlxyXG4gIHt0YWIgJiYgKGlzS2VkU3RhZmYoKSB8fCAhdGFiLmxvY2tlZCB8fCBjb3Vyc2UuYWxsb3dSZW1vdmVUYWJzKSA/IDxkaXYgY2xhc3NOYW1lPVwiYnRuIGJ0bi13YXJuaW5nIHB1bGwtcmlnaHRcIiBvbkNsaWNrPXthc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCBkcmFmdFJlcG8gPSBkYi5icmFuY2goZHJhZnRJZCk7XHJcbiAgICBjb25zdCBjb3Vyc2VUYWIgPSBhd2FpdCBkcmFmdFJlcG8uY291cnNlVGFic1xyXG4gICAgICAuaW5jbHVkZShcImNvbnRlbnRzXCIpXHJcbiAgICAgIC5pbmNsdWRlSWRzT25seSgpXHJcbiAgICAgIC5pZChhY3RpdmVUYWIpXHJcbiAgICAgIC5sb2FkKCk7XHJcbiAgICBjb25zdCBjb250ZW50cyA9IGF3YWl0IGRyYWZ0UmVwby5jb3Vyc2VDb250ZW50c1xyXG4gICAgICAuaW5jbHVkZShcInRhc2tzXCIpXHJcbiAgICAgIC5pbmNsdWRlSWRzT25seSgpXHJcbiAgICAgIC5pZHMoY291cnNlVGFiLmNvbnRlbnRzLm1hcCgoe2lkfSkgPT4gaWQpKVxyXG4gICAgICAudG9WYWx1ZSgpLmxvYWQoKTtcclxuICAgIFxyXG4gICAgaWYgKGlzS2VkU3RhZmYoKSAmJiBzY2hvb2wgPT09ICdzdGFuZGFyZCcpIHtcclxuICAgICAgLy9cclxuICAgICAgLy8gT25seSByZW1vdmUgcmVsYXRlZCBjb250ZW50cyBhbmQgdGFza3MgaWYgd2UgYXJlIGRlbGV0aW5nIGEgcGh5c2ljYWwgdGFiIGhlcmVcclxuICAgICAgLy9cclxuICAgICAgY29udGVudHMuZm9yRWFjaChjb250ZW50ID0+IHtcclxuICAgICAgICBjb250ZW50LnRhc2tzLmZvckVhY2godGFzayA9PiB7XHJcbiAgICAgICAgICBkcmFmdFJlcG8uY291cnNlQ29udGVudHMucmVtb3ZlUmVsYXRlZChjb250ZW50LmlkLCBcInRhc2tzXCIsIHRhc2spO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgICAgY291cnNlVGFiLmNvbnRlbnRzLmZvckVhY2goY29udGVudCA9PiB7XHJcbiAgICAgICAgZHJhZnRSZXBvLmNvdXJzZVRhYnMucmVtb3ZlUmVsYXRlZChjb3Vyc2VUYWIuaWQsIFwiY29udGVudHNcIiwgY29udGVudCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGNvdXJzZVR5cGUgPT09ICd0aGVtZS1jb3Vyc2UnKSB7XHJcbiAgICAgIGRyYWZ0UmVwby5jb3Vyc2VJbnN0YW5jZXMucmVtb3ZlUmVsYXRlZChjb3Vyc2UuaWQsIFwidGFic1wiLCBjb3Vyc2VUYWIpO1xyXG4gICAgfSBlbHNlIGlmIChibG9ja0lkKSB7XHJcbiAgICAgIGRyYWZ0UmVwby5jb3Vyc2VCbG9ja3MucmVtb3ZlUmVsYXRlZChibG9ja0lkLCBcInRhYnNcIiwgY291cnNlVGFiKTtcclxuICAgIH1cclxuICAgIGF3YWl0IGRiLnNhdmVOb3coKTtcclxuICAgIGhpc3RvcnkucHVzaChgLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlLmlkfS90YWJzLyQvZHJhZnRzLyR7ZHJhZnRJZH0vZWRpdGApO1xyXG4gIH19PlxyXG4gICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtdHJhc2hcIiBhcmlhLWhpZGRlbj17dHJ1ZX0gLz4mbmJzcDtcclxuICAgICAgICB7TGBUYSBib3J0IGZsaWtlbmB9XHJcbiAgPC9kaXY+IDogbnVsbH1cclxuICA8ZGl2PlxyXG4gICAgPEFsaWduSG9yaXpvbnRhbD5cclxuICAgICAgPEhvcml6b250YWxJdGVtPlxyXG4gICAgICAgIDxidXR0b25cclxuICAgICAgICAgIGNsYXNzTmFtZT1cImJ0blwiXHJcbiAgICAgICAgICBvbkNsaWNrPXthc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGhpc3RvcnkucHVzaChgLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlLmlkfS90YWJzLyR7YWN0aXZlVGFiIHx8ICckJ30vZHJhZnRzLyR7ZHJhZnRJZH1gKTtcclxuICAgICAgICAgIH19XHJcbiAgICAgICAgPlxyXG4gICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtZXllXCIgYXJpYS1oaWRkZW49e3RydWV9IC8+Jm5ic3A7XHJcbiAgICAgICAgICB7TGBGw7ZyaGFuZHNncmFuc2thYH1cclxuICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgPC9Ib3Jpem9udGFsSXRlbT5cclxuICAgICAgPEhvcml6b250YWxJdGVtPlxyXG4gICAgICAgICZuYnNwO1xyXG4gICAgICAgIDxidXR0b25cclxuICAgICAgICAgIGNsYXNzTmFtZT1cImJ0blwiXHJcbiAgICAgICAgICBvbkNsaWNrPXthc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGhpc3RvcnkucHVzaChgLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlLmlkfS9oaXN0b3J5YCk7XHJcbiAgICAgICAgICB9fVxyXG4gICAgICAgID5cclxuICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLWhpc3RvcnlcIiBhcmlhLWhpZGRlbj17dHJ1ZX0gLz4mbmJzcDtcclxuICAgICAgICAgIHtMYFZlcnNpb25zaGlzdG9yaWtgfVxyXG4gICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICA8L0hvcml6b250YWxJdGVtPlxyXG4gICAgICA8SG9yaXpvbnRhbEl0ZW0+XHJcbiAgICAgICAgJm5ic3A7XHJcbiAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgY2xhc3NOYW1lPVwiYnRuIGJ0bi13YXJuaW5nXCJcclxuICAgICAgICAgIG9uQ2xpY2s9e2FzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgYXdhaXQgcHVibGlzaENvdXJzZSh7XHJcbiAgICAgICAgICAgICAgc2Nob29sLFxyXG4gICAgICAgICAgICAgIGNvdXJzZSxcclxuICAgICAgICAgICAgICBkcmFmdFJlcG86IGRiLmJyYW5jaChkcmFmdElkKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYXdhaXQgZGIuc2F2ZU5vdygpO1xyXG4gICAgICAgICAgICBoaXN0b3J5LnB1c2goYC8ke3NjaG9vbH0vY291cnNlcy8ke2NvdXJzZS5pZH0vdGFicy8ke2FjdGl2ZVRhYiB8fCAnJCd9YCk7XHJcbiAgICAgICAgICB9fVxyXG4gID5cclxuICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLXBsYXlcIiBhcmlhLWhpZGRlbj17dHJ1ZX0gLz4mbmJzcDtcclxuICAgICAgICAgIHtMYFB1YmxpY2VyYWB9XHJcbiAgICAgICAgPC9idXR0b24+XHJcbiAgICAgIDwvSG9yaXpvbnRhbEl0ZW0+XHJcbiAgICA8L0FsaWduSG9yaXpvbnRhbD5cclxuICA8L2Rpdj5cclxuICA8YnIvPlxyXG4gIDxidXR0b24gY2xhc3NOYW1lPVwiYnRuXCIgb25DbGljaz17KCk9PlxyXG4gICAgICBoaXN0b3J5LnB1c2goYC8ke3NjaG9vbH0vY291cnNlcy8ke2NvdXJzZS5pZH0vdGFicy8ke2FjdGl2ZVRhYiB8fCAnJCd9YCl9PlxyXG4gICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtYXJyb3ctbGVmdFwiIGFyaWEtaGlkZGVuPXt0cnVlfSAvPiZuYnNwO1xyXG4gICAgey8qc2Nob29sID09PSAnc3RhbmRhcmQnID9cclxuICAgICAgTGBWaXNhIG9mZmljaWVsbGEgc3RhbmRhcmR2ZXJzaW9uZW5gIDpcclxuICBMYFZpc2Egc2tvbGFucyBvZmZpY2llbGxhIHZlcnNpb25gKi8gTGBBdnNsdXRhIHJlZGlnZXJpbmdgfVxyXG5cclxuICA8L2J1dHRvbj5cclxuXHJcbjwvPik7XHJcblxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEhhc2hSb3V0ZXIgYXMgUm91dGVyLCBSb3V0ZSwgTGluaywgUmVkaXJlY3QsIFJvdXRlUHJvcHMsIFJvdXRlQ29tcG9uZW50UHJvcHMgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcclxuaW1wb3J0IHsgRXJyb3JTdWNjZXNzRmVlZGJhY2sgfSBmcm9tICcuLi8uLi8uLi91dGlscy9lcnJvci1zdWNjZXNzLWZlZWRiYWNrJztcclxuaW1wb3J0IHsgQmFubmVyLCBMYXp5QmFubmVyLCBCYW5uZXJQcm9wcyB9IGZyb20gJy4uL2NvbW1vbi9iYW5uZXInO1xyXG5pbXBvcnQgeyBMb2FkaW5nSW5kaWNhdG9yIH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2xvYWRpbmctaW5kaWNhdG9yJztcclxuaW1wb3J0IHsgbGl2ZVF1ZXJ5VmlldyB9IGZyb20gJy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9saXZlLXF1ZXJ5LXZpZXcnO1xyXG5pbXBvcnQgeyBTY2hvb2xzLCBkYiB9IGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvZGInO1xyXG5pbXBvcnQgeyBTY2hvb2wgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IEVtaXR0ZXIgfSBmcm9tICdrZWRiYWNrZW5kL29ic2VydmFibGUnO1xyXG5pbXBvcnQgeyBDb3Vyc2VWaWV3ZXJQYWdlIH0gZnJvbSAnLi9jb3Vyc2Utdmlld2VyLXBhZ2UnO1xyXG5pbXBvcnQgeyBUd29Db2x1bW5zUGFnZSB9IGZyb20gJy4uL2NvbW1vbi90d28tY29sdW1ucy1wYWdlJztcclxuaW1wb3J0IHsgV2Vla1BsYW5uZXIgfSBmcm9tICcuLi8uLi93ZWVrcGxhbm5lci93ZWVrcGxhbm5lcic7XHJcbmltcG9ydCB7IExpc3RDb3Vyc2VzIH0gZnJvbSAnLi9saXN0LWNvdXJzZXMnO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgZW52IGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCBjZmcgZnJvbSAnLi4vLi4vLi4vZ2xvYmFscy9LRUQuY2ZnJztcclxuaW1wb3J0IHsgUmVkaXJlY3RUb1N0ZXAgfSBmcm9tICcuL3JlZGlyZWN0LXRvLXN0ZXAnO1xyXG5pbXBvcnQgeyBWZXJzaW9uSGlzdG9yeVBhZ2UgfSBmcm9tICcuL3ZlcnNpb24taGlzdG9yeSc7XHJcbmltcG9ydCB7IGtlZXBTZXNzaW9uQWxpdmUgfSBmcm9tICcuLi8uLi8uLi91dGlscy9rZWVwLXNlc3Npb24tYWxpdmUnO1xyXG5pbXBvcnQgeyBzZXR1cERpYWxvZ3MgfSBmcm9tICcuLi9jb21tb24vZGlhbG9nLWNvbnRlbnQnO1xyXG5cclxuLy8gS2VlcCBTZXNzaW9uIEFsaXZlXHJcbmtlZXBTZXNzaW9uQWxpdmUoKTtcclxuXHJcbmNvbnN0IEdldE15U2Nob29sID0gbGl2ZVF1ZXJ5Vmlldzx7cmVuZGVyOiAoc2Nob29sOiBTY2hvb2wpID0+IGFueX0+KCh7cmVuZGVyfSkgPT5cclxuICBTY2hvb2xzLm15U2Nob29sLm1hcChzY2hvb2wgPT4gcmVuZGVyKHNjaG9vbCkpKTtcclxuXHJcbmV4cG9ydCBjb25zdCBTdWJqZWN0UGxhbm5lclZpZXdlckFwcCA9IHNldHVwRGlhbG9ncygoKT0+IDxkaXZcclxuICBvbktleURvd249e2V2ID0+IHtcclxuICAgIGlmIChldi53aGljaCA9PT0gODMgJiYgKGV2LmN0cmxLZXkgfHwgZXYubWV0YUtleSkpIHsgLy8gQ1RSTC1TXHJcbiAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGRiLnNhdmVOb3coKS50aGVuKCgpPT57XHJcbiAgICAgICAgLyovLyBXaGVuIHNhdmVkLCBleGl0IGVkaXQgbW9kZSBzbyB0aGF0IG9uZSBjYW4gdmlldyB0aGUgcmVzdWx0IGFzIHVzZXJzIHNlZSBpdC5cclxuICAgICAgICBpZiAobG9jYXRpb24uaGFzaC5lbmRzV2l0aCgnL2VkaXQnKSkge1xyXG4gICAgICAgICAgbG9jYXRpb24uaGFzaCA9IGxvY2F0aW9uLmhhc2guc3Vic3RyKDAsIGxvY2F0aW9uLmhhc2gubGVuZ3RoIC0gJy9lZGl0Jy5sZW5ndGgpO1xyXG4gICAgICAgIH0qL1xyXG4gICAgICB9KTtcclxuICAgIH19fT5cclxuICA8Um91dGVyPlxyXG4gICAgPD5cclxuICAgICAgPFJvdXRlIHBhdGg9XCIvXCIgZXhhY3QgcmVuZGVyPXsoKT0+PFJlZGlyZWN0IHRvPXtgL2NvdXJzZXNgfSAvPn0gLz5cclxuICAgICAgPFJvdXRlIHBhdGg9XCIvY291cnNlc1wiIGV4YWN0IHJlbmRlcj17KCk9Pjw+XHJcbiAgICAgICAgPEJhbm5lclxyXG4gICAgICAgICAgdGl0bGU9e0xgS3Vyc2VyYH1cclxuICAgICAgICAgIHRhYnM9e1tdfVxyXG4gICAgICAgICAgYWN0aXZlVGFiPVwiJFwiXHJcbiAgICAgICAgLz5cclxuICAgICAgICA8VHdvQ29sdW1uc1BhZ2VcclxuICAgICAgICAgIGxlZnQ9ezxMaXN0Q291cnNlcyBzaG93SW5hY3RpdmU9e3RydWV9IC8+fVxyXG4gICAgICAgICAgcmlnaHQ9ezxXZWVrUGxhbm5lciBlbnY9e2Vudn0gdmlld0NvdXJzZVVybD17Y2ZnLktFRF9DT1VSU0VfVklFV0VSX1VSTH0gLz59XHJcbiAgICAgICAgICByaWdodFdpZHRoPXs1fVxyXG4gICAgICAgIC8+XHJcbiAgICAgIDwvPn0vPlxyXG5cclxuICAgICAgey8qIFJlZGlyZWN0IGZyb20gXCIvY291cnNlcy8uLi5cIiB0byBcIi97bXlTY2hvb2x9L2NvdXJzZXMvLi4uXCIgKi99XHJcbiAgICAgIDxSb3V0ZSBwYXRoPVwiL2NvdXJzZXMvOmNvdXJzZUlkXCIgZXhhY3Q9e2ZhbHNlfSByZW5kZXI9eyh7bWF0Y2h9KT0+XHJcbiAgICAgICAgPEdldE15U2Nob29sIHJlbmRlcj17KHNjaG9vbDogU2Nob29sKSA9PlxyXG4gICAgICAgICAgPFJlZGlyZWN0IHRvPXtcclxuICAgICAgICAgICAgYC8ke3NjaG9vbC5uYW1lfS9jb3Vyc2VzLyR7bWF0Y2gucGFyYW1zLmNvdXJzZUlkfWB9XHJcbiAgICAgICAgICAvPn1cclxuICAgICAgICAvPn1cclxuICAgICAgLz5cclxuXHJcbiAgICAgIHsvKiBWaWV3IENvdXJzZSB3aXRob3V0IGtub3dpbmcgd2hpY2ggdGFiICovfVxyXG4gICAgICA8Um91dGUgZXhhY3QgcGF0aD1cIi86c2Nob29sL2NvdXJzZXMvOmNvdXJzZUlkXCIgcmVuZGVyPXsoe21hdGNofSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHtzY2hvb2wsIGNvdXJzZUlkfSA9IG1hdGNoLnBhcmFtcztcclxuICAgICAgICByZXR1cm4gPENvdXJzZVZpZXdlclBhZ2VcclxuICAgICAgICAgIHNjaG9vbD17c2Nob29sfVxyXG4gICAgICAgICAgY291cnNlSWQ9e2NvdXJzZUlkfSAvPjtcclxuICAgICAgICB9fSAgLz5cclxuXHJcbiAgICAgIHsvKjxSb3V0ZSBwYXRoPVwiLzpzY2hvb2wvY291cnNlcy86Y291cnNlSWQvZWRpdFwiIHJlbmRlcj17KHttYXRjaH0pID0+IHtcclxuICAgICAgICBjb25zdCB7c2Nob29sLCBjb3Vyc2VJZH0gPSBtYXRjaC5wYXJhbXM7XHJcbiAgICAgICAgcmV0dXJuIDxDb3Vyc2VJbnN0YW5jZVZpZXdcclxuICAgICAgICBzY2hvb2w9e3NjaG9vbH1cclxuICAgICAgICBjb3Vyc2VJZD17Y291cnNlSWR9IC8+O1xyXG4gICAgICAgIH19ICAvPiovfVxyXG5cclxuICAgICAgey8qIFZpZXcgQ291cnNlIHdpdGggY2VydGFpbiBhY3RpdmUgdGFiICovfVxyXG4gICAgICA8Um91dGUgZXhhY3QgcGF0aD1cIi86c2Nob29sL2NvdXJzZXMvOmNvdXJzZUlkL3RhYnMvOnRhYklkP1wiIHJlbmRlcj17KHttYXRjaH0pID0+IHtcclxuICAgICAgICAgIGNvbnN0IHtzY2hvb2wsIGNvdXJzZUlkLCB0YWJJZH0gPSBtYXRjaC5wYXJhbXM7XHJcbiAgICAgICAgICByZXR1cm4gPENvdXJzZVZpZXdlclBhZ2VcclxuICAgICAgICAgICAgc2Nob29sPXtzY2hvb2x9XHJcbiAgICAgICAgICAgIGNvdXJzZUlkPXtjb3Vyc2VJZH1cclxuICAgICAgICAgICAgYWN0aXZlVGFiPXt0YWJJZH0gLz59fSAvPlxyXG5cclxuICAgICAgey8qIFZpZXcgZHJhZnQgd2l0aG91dCBrbm93aW5nIHRhYiAqL31cclxuICAgICAgPFJvdXRlIGV4YWN0IHBhdGg9XCIvOnNjaG9vbC9jb3Vyc2VzLzpjb3Vyc2VJZC9zZXR0aW5ncy86ZHJhZnRJZFwiXHJcbiAgICAgICAgcmVuZGVyPXsoe21hdGNofSkgPT4ge1xyXG4gICAgICAgICAgY29uc3Qge3NjaG9vbCwgY291cnNlSWQsIGRyYWZ0SWR9ID0gbWF0Y2gucGFyYW1zO1xyXG4gICAgICAgICAgcmV0dXJuIDxDb3Vyc2VWaWV3ZXJQYWdlXHJcbiAgICAgICAgICAgIHNjaG9vbD17c2Nob29sfVxyXG4gICAgICAgICAgICBjb3Vyc2VJZD17Y291cnNlSWR9XHJcbiAgICAgICAgICAgIGFjdGl2ZVRhYj1cIiRzZXR0aW5nc1wiXHJcbiAgICAgICAgICAgIGRyYWZ0SWQ9e2RyYWZ0SWR9IC8+fX0gLz5cclxuXHJcbiAgICAgIHsvKiBWaWV3IGRyYWZ0IGFuZCBjZXJ0YWluIHRhYiAqL31cclxuICAgICAgPFJvdXRlIGV4YWN0IHBhdGg9XCIvOnNjaG9vbC9jb3Vyc2VzLzpjb3Vyc2VJZC90YWJzLzp0YWJJZC9kcmFmdHMvOmRyYWZ0SWRcIlxyXG4gICAgICAgIHJlbmRlcj17KHttYXRjaH0pID0+IHtcclxuICAgICAgICAgIGNvbnN0IHtzY2hvb2wsIGNvdXJzZUlkLCB0YWJJZCwgZHJhZnRJZH0gPSBtYXRjaC5wYXJhbXM7XHJcbiAgICAgICAgICByZXR1cm4gPENvdXJzZVZpZXdlclBhZ2VcclxuICAgICAgICAgICAgc2Nob29sPXtzY2hvb2x9XHJcbiAgICAgICAgICAgIGNvdXJzZUlkPXtjb3Vyc2VJZH1cclxuICAgICAgICAgICAgYWN0aXZlVGFiPXt0YWJJZH1cclxuICAgICAgICAgICAgZHJhZnRJZD17ZHJhZnRJZH0gLz59fSAvPlxyXG5cclxuICAgICAgey8qIEVkaXQgZHJhZnQgYW5kIGNlcnRhaW4gdGFiICovfVxyXG4gICAgICA8Um91dGUgZXhhY3QgcGF0aD1cIi86c2Nob29sL2NvdXJzZXMvOmNvdXJzZUlkL3RhYnMvOnRhYklkL2RyYWZ0cy86ZHJhZnRJZC9lZGl0XCJcclxuICAgICAgICByZW5kZXI9eyh7bWF0Y2h9KSA9PiB7XHJcbiAgICAgICAgICBjb25zdCB7c2Nob29sLCBjb3Vyc2VJZCwgdGFiSWQsIGRyYWZ0SWR9ID0gbWF0Y2gucGFyYW1zO1xyXG4gICAgICAgICAgcmV0dXJuIDxDb3Vyc2VWaWV3ZXJQYWdlXHJcbiAgICAgICAgICAgIHNjaG9vbD17c2Nob29sfVxyXG4gICAgICAgICAgICBjb3Vyc2VJZD17Y291cnNlSWR9XHJcbiAgICAgICAgICAgIGFjdGl2ZVRhYj17dGFiSWR9XHJcbiAgICAgICAgICAgIGRyYWZ0SWQ9e2RyYWZ0SWR9XHJcbiAgICAgICAgICAgIGVkaXRNb2RlPXt0cnVlfSAvPn19IC8+XHJcblxyXG4gICAgICB7LyogVmlldyB0YXNrICovfVxyXG4gICAgICA8Um91dGUgZXhhY3QgcGF0aD1cIi86c2Nob29sL2NvdXJzZXMvOmNvdXJzZUlkL3RhYnMvOnRhYklkL3Rhc2tzLzp0YXNrSWRcIlxyXG4gICAgICAgIHJlbmRlcj17KHttYXRjaH0pID0+IHtcclxuICAgICAgICAgIGNvbnN0IHtzY2hvb2wsIGNvdXJzZUlkLCB0YWJJZCwgdGFza0lkfSA9IG1hdGNoLnBhcmFtcztcclxuICAgICAgICAgIHJldHVybiA8Q291cnNlVmlld2VyUGFnZVxyXG4gICAgICAgICAgICBzY2hvb2w9e3NjaG9vbH1cclxuICAgICAgICAgICAgY291cnNlSWQ9e2NvdXJzZUlkfVxyXG4gICAgICAgICAgICBhY3RpdmVUYWI9e3RhYklkfVxyXG4gICAgICAgICAgICB0YXNrSWQ9e3Rhc2tJZH1cclxuICAgICAgICAgICAgZWRpdE1vZGU9e2ZhbHNlfSAvPn19IC8+XHJcblxyXG4gICAgICB7LyogVmlldyB0YXNrIG9uIGNlcnRhaW4gZHJhZnQgKHByZXZpZXcgbW9kZSkgKi99XHJcbiAgICAgIDxSb3V0ZSBleGFjdCBwYXRoPVwiLzpzY2hvb2wvY291cnNlcy86Y291cnNlSWQvdGFicy86dGFiSWQvY29udGVudHMvOmNvbnRlbnRJZC90YXNrcy86dGFza0lkL2RyYWZ0cy86ZHJhZnRJZFwiXHJcbiAgICAgICAgcmVuZGVyPXsoe21hdGNofSkgPT4ge1xyXG4gICAgICAgICAgY29uc3Qge3NjaG9vbCwgY291cnNlSWQsIHRhYklkLCB0YXNrSWQsIGRyYWZ0SWQsIGNvbnRlbnRJZCB9ID0gbWF0Y2gucGFyYW1zO1xyXG4gICAgICAgICAgcmV0dXJuIDxDb3Vyc2VWaWV3ZXJQYWdlXHJcbiAgICAgICAgICAgIHNjaG9vbD17c2Nob29sfVxyXG4gICAgICAgICAgICBjb3Vyc2VJZD17Y291cnNlSWR9XHJcbiAgICAgICAgICAgIGFjdGl2ZVRhYj17dGFiSWR9XHJcbiAgICAgICAgICAgIHRhc2tJZD17dGFza0lkfVxyXG4gICAgICAgICAgICBjb250ZW50SWQ9e2NvbnRlbnRJZH1cclxuICAgICAgICAgICAgZHJhZnRJZD17ZHJhZnRJZH1cclxuICAgICAgICAgICAgZWRpdE1vZGU9e2ZhbHNlfSAvPn19IC8+XHJcblxyXG4gICAgICB7LyogRWRpdCB0YXNrIG9uIGNlcnRhaW4gZHJhZnQgKi99XHJcbiAgICAgIDxSb3V0ZSBleGFjdCBwYXRoPVwiLzpzY2hvb2wvY291cnNlcy86Y291cnNlSWQvdGFicy86dGFiSWQvY29udGVudHMvOmNvbnRlbnRJZC90YXNrcy86dGFza0lkL2RyYWZ0cy86ZHJhZnRJZC9lZGl0XCJcclxuICAgICAgICByZW5kZXI9eyh7bWF0Y2h9KSA9PiB7XHJcbiAgICAgICAgICBjb25zdCB7c2Nob29sLCBjb3Vyc2VJZCwgdGFiSWQsIGNvbnRlbnRJZCwgdGFza0lkLCBkcmFmdElkfSA9IG1hdGNoLnBhcmFtcztcclxuICAgICAgICAgIHJldHVybiA8Q291cnNlVmlld2VyUGFnZVxyXG4gICAgICAgICAgICBzY2hvb2w9e3NjaG9vbH1cclxuICAgICAgICAgICAgY291cnNlSWQ9e2NvdXJzZUlkfVxyXG4gICAgICAgICAgICBhY3RpdmVUYWI9e3RhYklkfVxyXG4gICAgICAgICAgICBjb250ZW50SWQ9e2NvbnRlbnRJZH1cclxuICAgICAgICAgICAgdGFza0lkPXt0YXNrSWR9XHJcbiAgICAgICAgICAgIGRyYWZ0SWQ9e2RyYWZ0SWR9XHJcbiAgICAgICAgICAgIGVkaXRNb2RlPXt0cnVlfSAvPn19IC8+XHJcbiAgICAgIFxyXG4gICAgICB7LyogU3RlcCBjb3Vyc2VzOiBMaW5rIHRvIGNlcnRhaW4gYmxvY2sgYW5kIHN0ZXAgKi99XHJcbiAgICAgIDxSb3V0ZSBleGFjdCBwYXRoPVwiLzpzY2hvb2wvY291cnNlcy86Y291cnNlSWQvYmxvY2tzLzpibG9ja0lkL3N0ZXBzLzpzdGVwTm9cIlxyXG4gICAgICAgIHJlbmRlcj17KHttYXRjaH0pID0+IHtcclxuICAgICAgICAgIGNvbnN0IHtzY2hvb2wsIGNvdXJzZUlkLCBibG9ja0lkLCBzdGVwTm99ID0gbWF0Y2gucGFyYW1zO1xyXG4gICAgICAgICAgcmV0dXJuIDxSZWRpcmVjdFRvU3RlcFxyXG4gICAgICAgICAgICBzY2hvb2w9e3NjaG9vbH1cclxuICAgICAgICAgICAgY291cnNlSWQ9e2NvdXJzZUlkfVxyXG4gICAgICAgICAgICBibG9ja0lkPXtibG9ja0lkfVxyXG4gICAgICAgICAgICBzdGVwTm89e3N0ZXBOb31cclxuICAgICAgICAgICAvPjtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIC8+XHJcblxyXG4gICAgICB7LyogRWRpdCB2ZXJzaW9uIGhpc3RvcnkgKi99XHJcbiAgICAgIDxSb3V0ZSBleGFjdCBwYXRoPVwiLzpzY2hvb2wvY291cnNlcy86Y291cnNlSWQvaGlzdG9yeVwiXHJcbiAgICAgICAgcmVuZGVyPXsoe21hdGNofSkgPT4ge1xyXG4gICAgICAgICAgY29uc3Qge3NjaG9vbCwgY291cnNlSWQsIGJsb2NrSWQsIHN0ZXBOb30gPSBtYXRjaC5wYXJhbXM7XHJcbiAgICAgICAgICByZXR1cm4gPFZlcnNpb25IaXN0b3J5UGFnZVxyXG4gICAgICAgICAgICBzY2hvb2w9e3NjaG9vbH1cclxuICAgICAgICAgICAgY291cnNlSWQ9e2NvdXJzZUlkfVxyXG4gICAgICAgICAgIC8+O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgLz5cclxuXHJcbiAgICAgIDxFcnJvclN1Y2Nlc3NGZWVkYmFjayAvPlxyXG4gICAgICA8TG9hZGluZ0luZGljYXRvciAvPlxyXG4gICAgPC8+XHJcbiAgPC9Sb3V0ZXI+XHJcbjwvZGl2PilcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgbGl2ZVF1ZXJ5VmlldyB9IGZyb20gJy4uLy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9saXZlLXF1ZXJ5LXZpZXcnO1xyXG5pbXBvcnQgeyBsaXN0Q291cnNlSW5zdGFuY2VzIH0gZnJvbSAnLi4vLi4vbG9naWMvbGlzdC1jb3Vyc2UtaW5zdGFuY2VzJztcclxuaW1wb3J0IHsgTCB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgU3R1ZGVudENvdXJzZXNCb3ggfSBmcm9tICcuL3N0dWRlbnQtY291cnNlcy1ib3gnO1xyXG4vL2ltcG9ydCBlbnYgZnJvbSAnLi4vLi4vLi4vLi4vZ2xvYmFscy9LRUQuZW52JztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgc2hvd0luYWN0aXZlPzogYm9vbGVhblxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgTGlzdENvdXJzZXMgPSBsaXZlUXVlcnlWaWV3KCh7c2hvd0luYWN0aXZlfTogUHJvcHMpPT5cclxuICAoc2hvd0luYWN0aXZlID9cclxuICAgIGxpc3RDb3Vyc2VJbnN0YW5jZXMoKSA6XHJcbiAgICBsaXN0Q291cnNlSW5zdGFuY2VzKCkudGFncyhcImFjdGl2ZVwiKVxyXG4gICkgLm9yZGVyQnkoXCJuYW1lXCIpXHJcbiAgICAubWFwKCh7aWQsIG5hbWUsIHR5cGUsIGRlc2NyaXB0aW9uLCB0YWdzfSkgPT4gKHtcclxuICAgICAgaWQsXHJcbiAgICAgIG5hbWUsXHJcbiAgICAgIHR5cGUsXHJcbiAgICAgIHRhZ3MsXHJcbiAgICAgIGRlc2NyaXB0aW9uLFxyXG4gICAgICB1cmw6IGAvY291cnNlcy8ke2lkfWBcclxuICAgIH0pKVxyXG4gICAgLmdyb3VwQnkoXCJ0eXBlXCIpXHJcbiAgICAubWFwKGFycmF5c0J5VHlwZSA9PiAoe1xyXG4gICAgICB0aGVtZUNvdXJzZXM6IGFycmF5c0J5VHlwZVtcInRoZW1lLWNvdXJzZVwiXSxcclxuICAgICAgc3RlcENvdXJzZXM6IGFycmF5c0J5VHlwZVtcInN0ZXAtY291cnNlXCJdXHJcbiAgICB9KSlcclxuICAgIC5tYXAoKHt0aGVtZUNvdXJzZXMsIHN0ZXBDb3Vyc2VzfSkgPT4gPD5cclxuXHJcbiAgICAgIHt0aGVtZUNvdXJzZXMgJiYgPFN0dWRlbnRDb3Vyc2VzQm94IFxyXG4gICAgICAgIHRpdGxlPXtMYFRlbWFrdXJzZXJgfVxyXG4gICAgICAgIGNvdXJzZXM9e3RoZW1lQ291cnNlc31cclxuICAgICAgLz59XHJcblxyXG4gICAgICB7c3RlcENvdXJzZXMgJiYgPFN0dWRlbnRDb3Vyc2VzQm94XHJcbiAgICAgICAgdGl0bGU9e0xgU3RlZ2t1cnNlcmB9XHJcbiAgICAgICAgY291cnNlcz17c3RlcENvdXJzZXN9XHJcbiAgICAgIC8+fVxyXG5cclxuPC8+KSk7XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IExpbmsgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcclxuaW1wb3J0IHsgQWxpZ25Ib3Jpem9udGFsIH0gZnJvbSAnLi4vLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2FsaWduLWhvcml6b250YWwnO1xyXG5pbXBvcnQgeyBIb3Jpem9udGFsSXRlbSB9IGZyb20gJy4uLy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9ob3Jpem9udGFsLWl0ZW0nO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICB0aXRsZTogc3RyaW5nO1xyXG4gIGNvdXJzZXM6IEFycmF5PHtcclxuICAgIG5hbWU6IHN0cmluZyxcclxuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmcsXHJcbiAgICB0YWdzOiBzdHJpbmdbXSxcclxuICAgIHVybDogc3RyaW5nLFxyXG4gICAgaWQ6IHN0cmluZ1xyXG4gIH0+O1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgU3R1ZGVudENvdXJzZXNCb3ggPSAoe3RpdGxlLCBjb3Vyc2VzfTogUHJvcHMpID0+XHJcbiAgPGRpdiBjbGFzc05hbWU9XCJrZWRfYm94ZWRcIj5cclxuICAgIDxoMz57dGl0bGV9PC9oMz5cclxuICAgIDxkaXYgY2xhc3NOYW1lPVwidGFza0NvbnRhaW5lciBvZGQtZXZlblwiPlxyXG4gICAgICB7Y291cnNlcy5tYXAoKHtpZCwgbmFtZSwgZGVzY3JpcHRpb24sIHRhZ3N9KSA9PlxyXG4gICAgICAgIDxBbGlnbkhvcml6b250YWw+XHJcbiAgICAgICAgICA8SG9yaXpvbnRhbEl0ZW0+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3R1ZGVudENvdXJzZVwiPlxyXG4gICAgICAgICAgICAgIDxMaW5rIHRvPXtgL2NvdXJzZXMvJHtpZH1gfT57bmFtZX08L0xpbms+XHJcbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwic21hbGxcIj57ZGVzY3JpcHRpb259PC9wPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvSG9yaXpvbnRhbEl0ZW0+XHJcbiAgICAgICAgICB7dGFncy5pbmNsdWRlcyhcImFjdGl2ZVwiKSA/IHVuZGVmaW5lZCA6IDxIb3Jpem9udGFsSXRlbT5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwaWxsIGluY29tcGxldGVcIj5JbmFrdGl2PC9kaXY+XHJcbiAgICAgICAgICA8L0hvcml6b250YWxJdGVtPn1cclxuICAgICAgICA8L0FsaWduSG9yaXpvbnRhbD5cclxuICAgICAgKX1cclxuICAgIDwvZGl2PlxyXG4gIDwvZGl2PlxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBMYXp5Q29udGVudCB9IGZyb20gJy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9sYXp5LWNvbnRlbnQnO1xyXG5pbXBvcnQgeyBkYiB9IGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvZGInO1xyXG5pbXBvcnQgeyBjb21wYXJlUHJvcCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgUmVkaXJlY3QgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgc2Nob29sOiBzdHJpbmdcclxuICBjb3Vyc2VJZDogc3RyaW5nXHJcbiAgYmxvY2tJZDogc3RyaW5nXHJcbiAgc3RlcE5vOiBzdHJpbmcgfCBudW1iZXJcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IFJlZGlyZWN0VG9TdGVwID0gKHtcclxuICBzY2hvb2wsXHJcbiAgY291cnNlSWQsXHJcbiAgYmxvY2tJZCxcclxuICBzdGVwTm9cclxufTogUHJvcHMpID0+IDxMYXp5Q29udGVudD57XHJcbiAgZGIub3B0aW1pemVDYWNoZSgpLnNjaG9vbHMubmFtZShzY2hvb2wpLnNpbmdsZSgpXHJcbiAgICAubWFwKHNjaG9vbCA9PiBkYi5icmFuY2goc2Nob29sLm9mZmljaWFsQnJhbmNoSWQpKVxyXG4gICAgLnN3aXRjaE1hcChicmFuY2hSZXBvID0+XHJcbiAgICAgIGJyYW5jaFJlcG8uY291cnNlQmxvY2tzLmluY2x1ZGUoXCJ0YWJzXCIpLmlkKGJsb2NrSWQpXHJcbiAgICAgICAgLm1hcChibG9jayA9PiB7XHJcbiAgICAgICAgICBjb25zdCBmaXJzdFRhYiA9IGJsb2NrLnRhYnMuZmlsdGVyKHRhYiA9PiAnJyt0YWIuc3RlcE5vID09PSAnJytzdGVwTm8pLnNvcnQoY29tcGFyZVByb3AoXCJvcmRlclwiKSlbMF07XHJcbiAgICAgICAgICBpZiAoZmlyc3RUYWIpXHJcbiAgICAgICAgICAgIHJldHVybiA8UmVkaXJlY3RcclxuICAgICAgICAgICAgICB0bz17YC8ke3NjaG9vbH0vY291cnNlcy8ke2NvdXJzZUlkfS90YWJzLyR7Zmlyc3RUYWIuaWR9YH1cclxuICAgICAgICAgICAgLz47XHJcbiAgICAgICAgICByZXR1cm4gPFJlZGlyZWN0XHJcbiAgICAgICAgICAgIHRvPXtgLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlSWR9YH1cclxuICAgICAgICAgIC8+O1xyXG4gICAgICAgIH0pKVxyXG59PC9MYXp5Q29udGVudD4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBBbGlnbkhvcml6b250YWwgfSBmcm9tICcuLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvYWxpZ24taG9yaXpvbnRhbCc7XHJcbmltcG9ydCB7IENvdXJzZUluc3RhbmNlLCBDb3Vyc2VUYWIsIENvdXJzZUJsb2NrLCBUaGVtZUNvdXJzZUluc3RhbmNlIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBIb3Jpem9udGFsSXRlbSB9IGZyb20gJy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9ob3Jpem9udGFsLWl0ZW0nO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kUmVwbywgU3RyaXBHcmFwaHMgfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBmbGF0dGVuIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBnZXRTY2hvb2xZZWFycywgY29tcHV0ZUNvdXJzZUluc3RhbmNlVGFncyB9IGZyb20gJy4uL2xvZ2ljL2NvdXJzZS1pbnN0YW5jZS10YWdzJztcclxuaW1wb3J0IHsgVGFiUmVxdWlyZW1lbnRzIH0gZnJvbSAnLi90YWItc2V0dGluZ3MtcmVxdWlyZW1lbnRzJztcclxuaW1wb3J0IHsgT3BlbkNsb3NlQm94IH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL29wZW4tY2xvc2UtYm94JztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgY291cnNlOiBDb3Vyc2VJbnN0YW5jZTtcclxuICB0YWI6IFN0cmlwR3JhcGhzPENvdXJzZVRhYj47XHJcbiAgYmxvY2s/OiBDb3Vyc2VCbG9jaztcclxuICByZXBvOiBLZWRCYWNrZW5kUmVwbztcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IFRhYlNldHRpbmdzQWRtaW4gPSAoeyB0YWIsIHJlcG8sIGNvdXJzZSwgYmxvY2sgfTogUHJvcHMpID0+IHtcclxuICBjb25zdCB7IHN1YmplY3RDb2RlLCBzdWJqZWN0TmFtZSB9ID0gdGFiLnN1YmplY3QgP1xyXG4gICAgdGFiLnN1YmplY3QgOlxyXG4gICAgY291cnNlLnR5cGUgPT09ICd0aGVtZS1jb3Vyc2UnICYmIGNvdXJzZS5zdWJqZWN0cyAmJiBjb3Vyc2Uuc3ViamVjdHMubGVuZ3RoID4gMCA/XHJcbiAgICAgIHsgc3ViamVjdENvZGU6IGNvdXJzZS5zdWJqZWN0c1swXS5jb2RlLCBzdWJqZWN0TmFtZTogY291cnNlLnN1YmplY3RzWzBdLm5hbWUgfSA6XHJcbiAgICAgIGNvdXJzZS50eXBlID09PSAnc3RlcC1jb3Vyc2UnID9cclxuICAgICAgICB7IHN1YmplY3RDb2RlOiBjb3Vyc2Uuc3ViamVjdC5zdWJqZWN0Q29kZSwgc3ViamVjdE5hbWU6IGNvdXJzZS5zdWJqZWN0LnN1YmplY3ROYW1lIH0gOlxyXG4gICAgICAgIHsgc3ViamVjdENvZGU6ICcnLCBzdWJqZWN0TmFtZTogJycgfTtcclxuICBjb25zdCBjb3Vyc2VTY2hvb2xZZWFycyA9IGdldFNjaG9vbFllYXJzKGNvdXJzZS50YWdzKTtcclxuICBjb25zdCBzY2hvb2xZZWFyOiBudWxsIHwgc3RyaW5nID0gZ2V0U2Nob29sWWVhcnModGFiLnRhZ3MpWzBdIHx8IGNvdXJzZVNjaG9vbFllYXJzWzBdIHx8IG51bGw7XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICAvL1xyXG4gICAgLy8gRWRpdCBcInN0YW5kYXJkXCIgc2Nob29sOiBDaG9vc2UgdGFiIHR5cGVcclxuICAgIC8vXHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImtlZF9ib3hlZFwiPlxyXG4gICAgICA8cCBjbGFzc05hbWU9XCJib3gtbWluaS1sYWJlbFwiPntMYEFkbWluaXN0cmF0aXZhIEluc3TDpGxsbmluZ2FyIGbDtnIgZmxpa2VuICR7dGFiLm5hbWUgfHwgdGFiLnRhYlRpdGxlfWB9PC9wPlxyXG4gICAgICA8QWxpZ25Ib3Jpem9udGFsPlxyXG4gICAgICAgIDxIb3Jpem9udGFsSXRlbT5cclxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBjaGVja2VkPXt0YWIubG9ja2VkfVxyXG4gICAgICAgICAgICBvbkNoYW5nZT17ZXYgPT4gcmVwby5jb3Vyc2VUYWJzLnVwZGF0ZSh0YWIsIHsgbG9ja2VkOiAhIWV2LnRhcmdldC5jaGVja2VkIH0pfSAvPlxyXG4gICAgICAgIDwvSG9yaXpvbnRhbEl0ZW0+XHJcbiAgICAgICAgPEhvcml6b250YWxJdGVtPlxyXG4gICAgICAgICAge0xgTMOlcyBmbGlrZW4gZnLDpW4gcmVkaWdlcmluZyBmw7ZydXRvbSBkw6RyIGRldCBleHBsaWNpdCB0aWxsw6V0c2B9XHJcbiAgICAgICAgPC9Ib3Jpem9udGFsSXRlbT5cclxuICAgICAgPC9BbGlnbkhvcml6b250YWw+XHJcbiAgICAgIHtjb3Vyc2UudHlwZSA9PT0gJ3N0ZXAtY291cnNlJyAmJiA8PlxyXG4gICAgICAgIDxici8+XHJcbiAgICAgICAgPE9wZW5DbG9zZUJveCB0aXRsZT17TGBBdmFuY2VyYXQuLi5gfT5cclxuICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiYnRuXCIgb25DbGljaz17YXN5bmMgKCk9PntcclxuICAgICAgICAgICAgY29uc3Qgc2Nob29sWWVhciA9IGdldFNjaG9vbFllYXJzKGJsb2NrLnRhZ3MpWzBdO1xyXG4gICAgICAgICAgICBhd2FpdCB1cGRhdGVTdWJqZWN0QW5kU2Nob29sWWVhcnMoY291cnNlLCBjb3Vyc2Uuc3ViamVjdC5zdWJqZWN0TmFtZSwgY291cnNlLnN1YmplY3Quc3ViamVjdENvZGUsIHNjaG9vbFllYXIpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgfT57TGBHw7ZyIG9tIGtvcHBsaW5nZW4gdGlsbCDDpG1uZSBvY2ggw6Vyc2t1cnNzcGFubmB9PC9idXR0b24+XHJcbiAgICAgICAgPC9PcGVuQ2xvc2VCb3g+XHJcbiAgICAgIDwvPn1cclxuICAgICAge2NvdXJzZS50eXBlID09PSAndGhlbWUtY291cnNlJyAmJiB0YWIudGFiQ2xhc3MgPT09ICdzdWJqZWN0LXRhYicgJiYgISFzdWJqZWN0Q29kZSAmJiA8PlxyXG4gICAgICAgIDxici8+XHJcbiAgICAgICAge2NvdXJzZS5zdWJqZWN0cy5sZW5ndGggPiAxICYmIDxBbGlnbkhvcml6b250YWw+XHJcbiAgICAgICAgICA8SG9yaXpvbnRhbEl0ZW0+XHJcbiAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJrY2xhYmVsXCI+e0xgw4RtbmVgfTwvbGFiZWw+XHJcbiAgICAgICAgICA8L0hvcml6b250YWxJdGVtPlxyXG4gICAgICAgICAgPEhvcml6b250YWxJdGVtPlxyXG4gICAgICAgICAgICA8c2VsZWN0XHJcbiAgICAgICAgICAgICAgdmFsdWU9e3N1YmplY3RDb2RlfVxyXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXthc3luYyBldiA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhpcyB0YWIncyBzdWJqZWN0IGFuZCB0YWdzXHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdWJqZWN0Q29kZSA9IGV2LnRhcmdldC52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN1YmplY3ROYW1lID0gY291cnNlLnN1YmplY3RzXHJcbiAgICAgICAgICAgICAgICAgIC5maWx0ZXIocyA9PiBzLmNvZGUgPT09IHN1YmplY3RDb2RlKVxyXG4gICAgICAgICAgICAgICAgICAubWFwKHMgPT4gcy5uYW1lKVswXSB8fCBzdWJqZWN0Q29kZTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHVwZGF0ZVN1YmplY3RBbmRTY2hvb2xZZWFycyhjb3Vyc2UsIHN1YmplY3ROYW1lLCBzdWJqZWN0Q29kZSwgc2Nob29sWWVhcik7XHJcbiAgICAgICAgICAgICAgfX0+XHJcbiAgICAgICAgICAgICAge2NvdXJzZS5zdWJqZWN0cy5tYXAoKHsgbmFtZSwgY29kZSB9KSA9PlxyXG4gICAgICAgICAgICAgICAgPG9wdGlvbiBrZXk9e2NvZGV9IHZhbHVlPXtjb2RlfT57bmFtZX08L29wdGlvbj4pfVxyXG4gICAgICAgICAgICA8L3NlbGVjdD5cclxuICAgICAgICAgIDwvSG9yaXpvbnRhbEl0ZW0+XHJcbiAgICAgICAgPC9BbGlnbkhvcml6b250YWw+fVxyXG4gICAgICAgIHtjb3Vyc2VTY2hvb2xZZWFycy5sZW5ndGggPiAxICYmIDw+XHJcblxyXG4gICAgICAgICAgPEFsaWduSG9yaXpvbnRhbD5cclxuICAgICAgICAgICAgPEhvcml6b250YWxJdGVtPlxyXG4gICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJrY2xhYmVsXCI+e0xgVsOkbGogw6Vyc2t1cnNgfTwvbGFiZWw+XHJcbiAgICAgICAgICAgIDwvSG9yaXpvbnRhbEl0ZW0+XHJcbiAgICAgICAgICAgIDxIb3Jpem9udGFsSXRlbT5cclxuICAgICAgICAgICAgICA8c2VsZWN0IHZhbHVlPXtzY2hvb2xZZWFyfVxyXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e2FzeW5jIGV2ID0+IHtcclxuICAgICAgICAgICAgICAgICAgY29uc3Qgc2Nob29sWWVhciA9IGV2LnRhcmdldC52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgY29uc3Qgc3ViamVjdE5hbWUgPSBjb3Vyc2Uuc3ViamVjdHNcclxuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKHMgPT4gcy5jb2RlID09PSBzdWJqZWN0Q29kZSlcclxuICAgICAgICAgICAgICAgICAgICAubWFwKHMgPT4gcy5uYW1lKVswXSB8fCBzdWJqZWN0Q29kZTtcclxuICAgICAgICAgICAgICAgICAgYXdhaXQgdXBkYXRlU3ViamVjdEFuZFNjaG9vbFllYXJzKGNvdXJzZSwgc3ViamVjdE5hbWUsIHN1YmplY3RDb2RlLCBzY2hvb2xZZWFyKTtcclxuICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAge2NvdXJzZVNjaG9vbFllYXJzLm1hcCh5ZWFyID0+IDxvcHRpb24ga2V5PXt5ZWFyfSB2YWx1ZT17eWVhcn0+e0xgw4Vyc2t1cnMgJHt5ZWFyfWB9PC9vcHRpb24+KX1cclxuICAgICAgICAgICAgICA8L3NlbGVjdD5cclxuICAgICAgICAgICAgPC9Ib3Jpem9udGFsSXRlbT5cclxuICAgICAgICAgIDwvQWxpZ25Ib3Jpem9udGFsPlxyXG4gICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgPFRhYlJlcXVpcmVtZW50cyByZXBvPXtyZXBvfSB0YWI9e3RhYn0gLz5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGJyLz5cclxuICAgICAgICAgIDxPcGVuQ2xvc2VCb3ggdGl0bGU9e0xgQXZhbmNlcmF0Li4uYH0+XHJcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiYnRuXCIgb25DbGljaz17YXN5bmMgKCk9PntcclxuICAgICAgICAgICAgICBhd2FpdCB1cGRhdGVTdWJqZWN0QW5kU2Nob29sWWVhcnMoY291cnNlLCBzdWJqZWN0TmFtZSwgc3ViamVjdENvZGUsIHNjaG9vbFllYXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0+e0xgR8O2ciBvbSBrb3BwbGluZ2VuIHRpbGwgw6RtbmUgb2NoIMOlcnNrdXJzc3Bhbm5gfTwvYnV0dG9uPlxyXG4gICAgICAgICAgPC9PcGVuQ2xvc2VCb3g+XHJcblxyXG4gICAgICAgIDwvPn1cclxuICAgICAgPC8+fVxyXG4gICAgPC9kaXY+XHJcbiAgKTtcclxuXHJcbiAgYXN5bmMgZnVuY3Rpb24gdXBkYXRlU3ViamVjdEFuZFNjaG9vbFllYXJzKGNvdXJzZTogU3RyaXBHcmFwaHM8Q291cnNlSW5zdGFuY2U+LCBzdWJqZWN0TmFtZTogc3RyaW5nLCBzdWJqZWN0Q29kZTogc3RyaW5nLCBzY2hvb2xZZWFyOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IHRhYlRhZ3MgPSBjb21wdXRlQ291cnNlSW5zdGFuY2VUYWdzKHRhYi50YWdzLCBbc3ViamVjdENvZGVdLCBbc2Nob29sWWVhcl0pO1xyXG5cclxuICAgIHJlcG8uY291cnNlVGFicy51cGRhdGUodGFiLCB7XHJcbiAgICAgIHN1YmplY3Q6IHtcclxuICAgICAgICBzdWJqZWN0Q29kZSxcclxuICAgICAgICBzdWJqZWN0TmFtZVxyXG4gICAgICB9LFxyXG4gICAgICB0YWdzOiB0YWJUYWdzXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBBbHNvIHVwZGF0ZSBhbGwgdGFza3MgY29ubmVjdGVkIHRvIHRoaXMgdGFiXHJcbiAgICAvLyBOZWVkIHRvIG1vdmUgdGhlbSB0byB0aGUgbmV3IHN1YmplY3RcclxuICAgIGNvbnN0IGxnQ29udGVudHMgPSBhd2FpdCByZXBvLmNvdXJzZUNvbnRlbnRzXHJcbiAgICAgIC5oYXNFZGdlc0Zyb20oW3RhYi5pZF0pXHJcbiAgICAgIC5pbmNsdWRlKFwidGFza3NcIilcclxuICAgICAgLmluY2x1ZGVJZHNBbmROYW1lc09ubHkoKVxyXG4gICAgICAudG9WYWx1ZSgpLmxvYWQoKTtcclxuICAgIGNvbnN0IHRhc2tzID0gZmxhdHRlbihsZ0NvbnRlbnRzLm1hcChjID0+IGMudGFza3MpKTtcclxuICAgIGZvciAoY29uc3QgdGFzayBvZiB0YXNrcykge1xyXG4gICAgICBjb25zdCB0YWdzID0gY29tcHV0ZUNvdXJzZUluc3RhbmNlVGFncyhbY291cnNlLmlkXSwgW3N1YmplY3RDb2RlXSwgW3NjaG9vbFllYXJdKTtcclxuICAgICAgcmVwby50YXNrcy51cGRhdGUodGFzaywge3RhZ3MsIHN1YmplY3Q6IHN1YmplY3ROYW1lfSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRSZXBvLCBXaXRoR3JhcGhzLCBTdHJpcEdyYXBocyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IFRhc2ssIFRoZW1lQ291cnNlVGFiLCBDb3Vyc2VUYWIgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IEtub3dsZWRnZU1hdHJpeCB9IGZyb20gJy4uLy4uL2NvdXJzZS1idWlsZGVyL3N1Yi1jb21wb25lbnRzL2tub3dsZWRnZS1tYXRyaXgnO1xyXG5pbXBvcnQgeyBMYXp5Q29udGVudCB9IGZyb20gJy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9sYXp5LWNvbnRlbnQnO1xyXG5pbXBvcnQgeyBnZXRDb3Vyc2VDb2Rlc0Zyb21UYWdzIH0gZnJvbSAnLi4vbG9naWMvZ2V0LWNvdXJzZS1jb2Rlcy1mcm9tLXRhZ3MnO1xyXG5pbXBvcnQgeyBMLCBzaG93RXJyb3IgfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IGdldFN0YW5kYXJkQ291cnNlc1dpdGhPcmRlcmVkUmVxdWlyZW1lbnRzIH0gZnJvbSAnLi4vbG9naWMvZ2V0LXN0YW5kYXJkLWNvdXJzZXMtd2l0aC1vcmRlcmVkLXJlcXVpcmVtZW50cyc7XHJcbmltcG9ydCB7IE9wZW5DbG9zZUJveCB9IGZyb20gJy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9vcGVuLWNsb3NlLWJveCc7XHJcbmltcG9ydCB7IFNlbGVjdFJlbGF0ZWREb2NzIH0gZnJvbSAnLi4vLi4vY291cnNlLWJ1aWxkZXIvc3ViLWNvbXBvbmVudHMvc2VsZWN0LXJlbGF0ZWQtZG9jcyc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHJlcG86IEtlZEJhY2tlbmRSZXBvXHJcbiAgdGFiOiBTdHJpcEdyYXBoczxDb3Vyc2VUYWI+XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBUYWJSZXF1aXJlbWVudHMgPSAoe1xyXG4gIHJlcG8sXHJcbiAgdGFiXHJcbn06IFByb3BzKSA9PiA8TGF6eUNvbnRlbnQ+e1xyXG4gIGdldFN0YW5kYXJkQ291cnNlc1dpdGhPcmRlcmVkUmVxdWlyZW1lbnRzKFxyXG4gICAgZ2V0Q291cnNlQ29kZXNGcm9tVGFncyh0YWIudGFncykpXHJcbiAgLm1hcChjb3Vyc2VUZW1wbGF0ZXMgPT4gY291cnNlVGVtcGxhdGVzLmxlbmd0aCA9PT0gMCA/XHJcblxyXG4gICAgPHA+e0xgRmxpa2VuIMOkciBpbnRlIGtvcHBsYWQgdGlsbCBuw6Vnb3Qgw6RtbmUgLyDDpXJza3Vyc2B9PC9wPlxyXG4gICAgOlxyXG5cclxuICAgIDxkaXY+XHJcbiAgICAgIHtjb3Vyc2VUZW1wbGF0ZXMubWFwKCh7aWQsIG5hbWUsIGFiaWxpdGllcywgY2VudHJhbENvbnRlbnQsIGtub3dsZWRnZVJlcXVpcmVtZW50c30pID0+IDxkaXYga2V5PXtpZH0+XHJcbiAgICAgICAge2NvdXJzZVRlbXBsYXRlcy5sZW5ndGggPT09IDEgPyB1bmRlZmluZWQgOiA8aDE+e25hbWV9PC9oMT59XHJcbiAgICAgICAgICA8T3BlbkNsb3NlQm94IGNsYXNzTmFtZT1cImxhcmdlclwiIHRpdGxlPXs8cD57TGBMw6VzIGZsaWtlbnMga3Vuc2thcHNrcmF2YH08L3A+fT5cclxuICAgICAgICAgICAgPHA+XHJcbiAgICAgICAgICAgICAgICB7TGBNYXJrZXJhIGRlIGt1bnNrYXBza3JhdiBzb20gw6RtbmVzZmxpa2VuIHNrYSB0w6Rja2EuYH1cclxuICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICA8TGF6eUNvbnRlbnQ+e1xyXG4gICAgICAgICAgICAgIHJlcG9bXCJrbm93bGVkZ2UtcmVxdWlyZW1lbnRzXCJdLmhhc0VkZ2VzRnJvbShbdGFiLmlkXSkuaWRzT25seSgpLnRvVmFsdWUoKS5tYXAodGFic0tycyA9PiB7ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDxLbm93bGVkZ2VNYXRyaXhcclxuICAgICAgICAgICAgICAgICAga25vd2xlZGdlUmVxdWlyZW1lbnRzPXtrbm93bGVkZ2VSZXF1aXJlbWVudHN9XHJcbiAgICAgICAgICAgICAgICAgIG1hcmtlZElkcz17dGFic0tycy5tYXAoKHtpZH0pID0+IGlkKX1cclxuICAgICAgICAgICAgICAgICAgaWRzVG9NYXJrTm90T2s9e3t9fVxyXG4gICAgICAgICAgICAgICAgICBtYXJrTW9kZT17dHJ1ZX1cclxuICAgICAgICAgICAgICAgICAgb25NYXJrQ2hhbmdlZD17KG1hcmtlZElkOiBzdHJpbmcsIGlzTWFya2VkOiBib29sZWFuKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIGludmFsaWQga25vd2xlZGdlIHJlcXVpcmVtZW50cyAodGhvc2UgdGhhdCBhcmUgbm90IHBhcnQgb2YgdGhlIHN0YW5kYXJkIGNvdXJzZSlcclxuICAgICAgICAgICAgICAgICAgICAvLyBDYW4gaGFwcGVuIGFmdGVyIGNoYW5naW5nIHNjaG9vbCB5ZWFyIC8gY291cnNlIG9yIHN1YmplY3QuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW52YWxpZEtycyA9IHRhYnNLcnMuZmlsdGVyKGtyID0+ICFrbm93bGVkZ2VSZXF1aXJlbWVudHMuc29tZSgoe2lkfSkgPT4ga3IuaWQgPT09IGlkKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW52YWxpZEtycy5mb3JFYWNoKGludmFsaWRLciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICByZXBvLmNvdXJzZVRhYnMucmVtb3ZlUmVsYXRlZCh0YWIuaWQsIFwia25vd2xlZGdlUmVxdWlyZW1lbnRzXCIsIGludmFsaWRLcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFya2VkRG9jID0ga25vd2xlZGdlUmVxdWlyZW1lbnRzLmZpbHRlcigoe2lkfSkgPT4gaWQgPT09IG1hcmtlZElkKVswXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNNYXJrZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHJlcG8uY291cnNlVGFicy5hZGRSZWxhdGVkKHRhYi5pZCwgXCJrbm93bGVkZ2VSZXF1aXJlbWVudHNcIiwgbWFya2VkRG9jKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmVwby5jb3Vyc2VUYWJzLnJlbW92ZVJlbGF0ZWQodGFiLmlkLCBcImtub3dsZWRnZVJlcXVpcmVtZW50c1wiLCBtYXJrZWREb2MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgfSl9PC9MYXp5Q29udGVudD5cclxuICAgICAgICAgIDwvT3BlbkNsb3NlQm94PlxyXG5cclxuICAgICAgICAgIDxMYXp5Q29udGVudD57XHJcbiAgICAgICAgICAgIHJlcG8uYWJpbGl0aWVzLmhhc0VkZ2VzRnJvbShbdGFiLmlkXSkuaWRzT25seSgpLnRvVmFsdWUoKS5tYXAodGFiQWJpbGl0aWVzID0+IHtcclxuICAgICAgICAgICAgICByZXR1cm4gPFNlbGVjdFJlbGF0ZWREb2NzXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zPXthYmlsaXRpZXN9XHJcbiAgICAgICAgICAgICAgICB0aXRsZT17TGBMw6VzIGZsaWtlbnMgZsO2cm3DpWdvcmB9XHJcbiAgICAgICAgICAgICAgICBtYXJrZWRJZHM9e3RhYkFiaWxpdGllcy5tYXAoKHtpZH0pID0+IGlkKX1cclxuICAgICAgICAgICAgICAgIG1hcmtNb2RlPXt0cnVlfVxyXG4gICAgICAgICAgICAgICAgLy9taWdyYXRlZElkcz17dGFzayAmJiB0YXNrLm1pZ3JhdGVkVGV4dHMgJiYgdGFzay5taWdyYXRlZFRleHRzLmFiaWxpdGllc31cclxuICAgICAgICAgICAgICAgIG9uTWFya0NoYW5nZWQ9eyhtYXJrZWRJZCwgaXNNYXJrZWQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIGludmFsaWQgYWJpbGl0aWVzICh0aG9zZSB0aGF0IGFyZSBub3QgcGFydCBvZiB0aGUgc3RhbmRhcmQgY291cnNlKVxyXG4gICAgICAgICAgICAgICAgICAvLyBDYW4gaGFwcGVuIGFmdGVyIGNoYW5naW5nIHNjaG9vbCB5ZWFyIC8gY291cnNlIG9yIHN1YmplY3QuXHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGludmFsaWRBYmlsaXRpZXMgPSB0YWJBYmlsaXRpZXMuZmlsdGVyKGEgPT4gIWFiaWxpdGllcy5zb21lKCh7aWR9KSA9PiBhLmlkID09PSBpZCkpO1xyXG4gICAgICAgICAgICAgICAgICBpbnZhbGlkQWJpbGl0aWVzLmZvckVhY2goaW52YWxpZEFiaWxpdHkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcG8uY291cnNlVGFicy5yZW1vdmVSZWxhdGVkKHRhYi5pZCwgXCJhYmlsaXRpZXNcIiwgaW52YWxpZEFiaWxpdHkpO1xyXG4gICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgY29uc3QgbWFya2VkRG9jID0gYWJpbGl0aWVzLmZpbHRlcigoe2lkfSkgPT4gaWQgPT09IG1hcmtlZElkKVswXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNNYXJrZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHJlcG8uY291cnNlVGFicy5hZGRSZWxhdGVkKHRhYi5pZCwgXCJhYmlsaXRpZXNcIiwgbWFya2VkRG9jKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmVwby5jb3Vyc2VUYWJzLnJlbW92ZVJlbGF0ZWQodGFiLmlkLCBcImFiaWxpdGllc1wiLCBtYXJrZWREb2MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgIH0pfTwvTGF6eUNvbnRlbnQ+XHJcblxyXG4gICAgICAgICAgPExhenlDb250ZW50PntcclxuICAgICAgICAgICAgcmVwb1tcImNlbnRyYWwtY29udGVudFwiXS5oYXNFZGdlc0Zyb20oW3RhYi5pZF0pLmlkc09ubHkoKS50b1ZhbHVlKCkubWFwKHRhYnNDQ3MgPT4ge1xyXG5cclxuICAgICAgICAgICAgICByZXR1cm4gPFNlbGVjdFJlbGF0ZWREb2NzXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zPXtjZW50cmFsQ29udGVudH1cclxuICAgICAgICAgICAgICAgIHRpdGxlPXtMYEzDpXMgZmxpa2VucyBjZW50cmFsYSBpbm5laMOlbGxgfVxyXG4gICAgICAgICAgICAgICAgbWFya2VkSWRzPXt0YWJzQ0NzLm1hcChjYyA9PiBjYy5pZCl9XHJcbiAgICAgICAgICAgICAgICBtYXJrTW9kZT17dHJ1ZX1cclxuICAgICAgICAgICAgICAgIC8vbWlncmF0ZWRJZHM9e3Rhc2sgJiYgdGFzay5taWdyYXRlZFRleHRzICYmIHRhc2subWlncmF0ZWRUZXh0cy5jZW50cmFsQ29udGVudH1cclxuICAgICAgICAgICAgICAgIG9uTWFya0NoYW5nZWQ9eyhtYXJrZWRJZCwgaXNNYXJrZWQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIGludmFsaWQgY2VudHJhbCBjb250ZW50cyAodGhvc2UgdGhhdCBhcmUgbm90IHBhcnQgb2YgdGhlIHN0YW5kYXJkIGNvdXJzZSlcclxuICAgICAgICAgICAgICAgICAgLy8gQ2FuIGhhcHBlbiBhZnRlciBjaGFuZ2luZyBzY2hvb2wgeWVhciAvIGNvdXJzZSBvciBzdWJqZWN0LlxyXG4gICAgICAgICAgICAgICAgICBjb25zdCBpbnZhbGlkQ2VudHJhbENvbnRlbnRzID0gdGFic0NDcy5maWx0ZXIoY2MgPT4gIWNlbnRyYWxDb250ZW50LnNvbWUoKHtpZH0pID0+IGNjLmlkID09PSBpZCkpO1xyXG4gICAgICAgICAgICAgICAgICBpbnZhbGlkQ2VudHJhbENvbnRlbnRzLmZvckVhY2goaW52YWxpZENDID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXBvLmNvdXJzZVRhYnMucmVtb3ZlUmVsYXRlZCh0YWIuaWQsIFwiY2VudHJhbENvbnRlbnRcIiwgaW52YWxpZENDKTtcclxuICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG1hcmtlZERvYyA9IGNlbnRyYWxDb250ZW50LmZpbHRlcigoe2lkfSkgPT4gaWQgPT09IG1hcmtlZElkKVswXTtcclxuICAgICAgICAgICAgICAgICAgaWYgKGlzTWFya2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVwby5jb3Vyc2VUYWJzLmFkZFJlbGF0ZWQodGFiLmlkLCBcImNlbnRyYWxDb250ZW50XCIsIG1hcmtlZERvYyk7XHJcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVwby5jb3Vyc2VUYWJzLnJlbW92ZVJlbGF0ZWQodGFiLmlkLCBcImNlbnRyYWxDb250ZW50XCIsIG1hcmtlZERvYyk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgLz4gIFxyXG4gICAgICAgICAgICB9KX08L0xhenlDb250ZW50PlxyXG5cclxuXHJcbiAgICAgIDwvZGl2Pil9XHJcbiAgICA8L2Rpdj5cclxuICApXHJcbn08L0xhenlDb250ZW50PiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEFsaWduSG9yaXpvbnRhbCB9IGZyb20gJy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9hbGlnbi1ob3Jpem9udGFsJztcclxuaW1wb3J0IHsgQ291cnNlSW5zdGFuY2UsIENvdXJzZVRhYiB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgSG9yaXpvbnRhbEl0ZW0gfSBmcm9tICcuLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvaG9yaXpvbnRhbC1pdGVtJztcclxuaW1wb3J0IHsgS2VkQmFja2VuZFJlcG8sIFN0cmlwR3JhcGhzIH0gZnJvbSAna2VkYmFja2VuZC9yZXBvJztcclxuaW1wb3J0IHsgQ291cnNlVGFiQ2xhc3NlcywgVGFiVHlwZXNQZXJDb3Vyc2VUeXBlIH0gZnJvbSAnLi9jb3Vyc2UtdGFiL3RhYi1jbGFzc2VzJztcclxuaW1wb3J0IHsgTCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgZ2V0U2Nob29sWWVhcnMsIGNvbXB1dGVDb3Vyc2VJbnN0YW5jZVRhZ3MgfSBmcm9tICcuLi9sb2dpYy9jb3Vyc2UtaW5zdGFuY2UtdGFncyc7XHJcbmltcG9ydCB7IFRleHRJbnB1dCB9IGZyb20gJy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9mb3JtLWZpZWxkLXRleHQtaW5wdXQnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBjb3Vyc2U6IENvdXJzZUluc3RhbmNlO1xyXG4gIHRhYjogU3RyaXBHcmFwaHM8Q291cnNlVGFiPjtcclxuICByZXBvOiBLZWRCYWNrZW5kUmVwbztcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IFRhYlNldHRpbmdzID0gKHsgdGFiLCByZXBvLCBjb3Vyc2UgfTogUHJvcHMpID0+IHtcclxuICBjb25zdCB7IHN1YmplY3RDb2RlLCBzdWJqZWN0TmFtZSB9ID0gdGFiLnN1YmplY3QgP1xyXG4gICAgdGFiLnN1YmplY3QgOlxyXG4gICAgY291cnNlLnR5cGUgPT09ICd0aGVtZS1jb3Vyc2UnICYmIGNvdXJzZS5zdWJqZWN0cyAmJiBjb3Vyc2Uuc3ViamVjdHMubGVuZ3RoID4gMCA/XHJcbiAgICAgIHsgc3ViamVjdENvZGU6IGNvdXJzZS5zdWJqZWN0c1swXS5jb2RlLCBzdWJqZWN0TmFtZTogY291cnNlLnN1YmplY3RzWzBdLm5hbWUgfSA6XHJcbiAgICAgIHsgc3ViamVjdENvZGU6ICcnLCBzdWJqZWN0TmFtZTogJycgfTtcclxuICBjb25zdCBjb3Vyc2VTY2hvb2xZZWFycyA9IGdldFNjaG9vbFllYXJzKGNvdXJzZS50YWdzKTtcclxuICBjb25zdCBzY2hvb2xZZWFyOiBudWxsIHwgc3RyaW5nID0gZ2V0U2Nob29sWWVhcnModGFiLnRhZ3MpWzBdIHx8IGNvdXJzZVNjaG9vbFllYXJzWzBdIHx8IG51bGw7XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICAvL1xyXG4gICAgLy8gRWRpdCBcInN0YW5kYXJkXCIgc2Nob29sOiBDaG9vc2UgdGFiIHR5cGVcclxuICAgIC8vXHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImtlZF9ib3hlZFwiPlxyXG4gICAgICA8cCBjbGFzc05hbWU9XCJib3gtbWluaS1sYWJlbFwiPntMYEluc3TDpGxsbmluZ2FyIGbDtnIgZmxpa2VuICR7dGFiLm5hbWUgfHwgdGFiLnRhYlRpdGxlfWB9PC9wPlxyXG4gICAgICA8QWxpZ25Ib3Jpem9udGFsPlxyXG4gICAgICAgIDxIb3Jpem9udGFsSXRlbT5cclxuICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJrY2xhYmVsXCI+e0xgRmxpa2VucyB0eXBgfTwvbGFiZWw+XHJcbiAgICAgICAgPC9Ib3Jpem9udGFsSXRlbT5cclxuICAgICAgICA8SG9yaXpvbnRhbEl0ZW0+XHJcbiAgICAgICAgICA8c2VsZWN0XHJcbiAgICAgICAgICAgIHZhbHVlPXt0YWIudGFiQ2xhc3N9XHJcbiAgICAgICAgICAgIG9uQ2hhbmdlPXtldiA9PlxyXG4gICAgICAgICAgICAgIHJlcG8uY291cnNlVGFicy51cGRhdGUodGFiLCBldi50YXJnZXQudmFsdWUgPT09ICdzdWJqZWN0LXRhYicgPyB7XHJcbiAgICAgICAgICAgICAgICB0YWJDbGFzczogZXYudGFyZ2V0LnZhbHVlIGFzIGtleW9mIHR5cGVvZiBDb3Vyc2VUYWJDbGFzc2VzLFxyXG4gICAgICAgICAgICAgICAgc3ViamVjdDogeyBzdWJqZWN0Q29kZSwgc3ViamVjdE5hbWUgfSxcclxuICAgICAgICAgICAgICAgIHRhZ3M6IGNvbXB1dGVDb3Vyc2VJbnN0YW5jZVRhZ3ModGFiLnRhZ3MsIFtzdWJqZWN0Q29kZV0sIFtzY2hvb2xZZWFyXSlcclxuICAgICAgICAgICAgICB9IDoge1xyXG4gICAgICAgICAgICAgICAgICB0YWJDbGFzczogZXYudGFyZ2V0LnZhbHVlIGFzIGtleW9mIHR5cGVvZiBDb3Vyc2VUYWJDbGFzc2VzLFxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgPlxyXG4gICAgICAgICAgICB7VGFiVHlwZXNQZXJDb3Vyc2VUeXBlW2NvdXJzZS50eXBlXS5tYXAodGFiQ2xhc3MgPT5cclxuICAgICAgICAgICAgICA8b3B0aW9uIGtleT17dGFiQ2xhc3N9IHZhbHVlPXt0YWJDbGFzc30+XHJcbiAgICAgICAgICAgICAgICB7Q291cnNlVGFiQ2xhc3Nlc1t0YWJDbGFzc119XHJcbiAgICAgICAgICAgICAgPC9vcHRpb24+KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICA8L3NlbGVjdD5cclxuICAgICAgICA8L0hvcml6b250YWxJdGVtPlxyXG4gICAgICA8L0FsaWduSG9yaXpvbnRhbD5cclxuICAgICAgPFRleHRJbnB1dCBsYWJlbD17TGBGbGlrZW5zIG5hbW5gfSBpZD1cIlRhYlNldHRpbmdzOm5hbWVcIiB2YWx1ZT17dGFiLm5hbWUgfHwgdGFiLnRhYlRpdGxlfVxyXG4gICAgICAgIG9uQ2hhbmdlPXtuYW1lID0+XHJcbiAgICAgICAgICByZXBvLmNvdXJzZVRhYnMudXBkYXRlKHRhYiwge1xyXG4gICAgICAgICAgICBuYW1lLFxyXG4gICAgICAgICAgICB0YWJUaXRsZTogbmFtZSAvLyBEZXByZWNhdGVkLiBUb2RvOiByZW1vdmUuXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH0gLz5cclxuICAgIDwvZGl2PlxyXG4gICk7XHJcbn1cclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgS2VkQmFja2VuZFJlcG8sIFdpdGhHcmFwaHMsIFN0cmlwR3JhcGhzIH0gZnJvbSAna2VkYmFja2VuZC9yZXBvJztcclxuaW1wb3J0IHsgVGFzaywgQ291cnNlQmxvY2ssIENvdXJzZVRhYiB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgS25vd2xlZGdlTWF0cml4IH0gZnJvbSAnLi4vLi4vLi4vLi4vY291cnNlLWJ1aWxkZXIvc3ViLWNvbXBvbmVudHMva25vd2xlZGdlLW1hdHJpeCc7XHJcbmltcG9ydCB7IExhenlDb250ZW50IH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2xhenktY29udGVudCc7XHJcbmltcG9ydCB7IGdldENvdXJzZUNvZGVzRnJvbVRhZ3MgfSBmcm9tICcuLi8uLi8uLi9sb2dpYy9nZXQtY291cnNlLWNvZGVzLWZyb20tdGFncyc7XHJcbmltcG9ydCB7IEwsIHNob3dFcnJvciB9IGZyb20gJy4uLy4uLy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgZ2V0U3RhbmRhcmRDb3Vyc2VzV2l0aE9yZGVyZWRSZXF1aXJlbWVudHMgfSBmcm9tICcuLi8uLi8uLi9sb2dpYy9nZXQtc3RhbmRhcmQtY291cnNlcy13aXRoLW9yZGVyZWQtcmVxdWlyZW1lbnRzJztcclxuaW1wb3J0IHsgcmVzb2x2ZVJlcXVpcmVtZW50T3JkZXIsIFJlcXVpcmVtZW50c0NvbnRhaW5pbmdEb2MgfSBmcm9tICcuLi8uLi8uLi9sb2dpYy9vcmRlcmVkLXJlcXVpcmVtZW50cyc7XHJcbmltcG9ydCB7IFNlbGVjdFJlbGF0ZWREb2NzIH0gZnJvbSAnLi4vLi4vLi4vLi4vY291cnNlLWJ1aWxkZXIvc3ViLWNvbXBvbmVudHMvc2VsZWN0LXJlbGF0ZWQtZG9jcyc7XHJcbmltcG9ydCB7IENoZWNrbGlzdCB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9jaGVja2xpc3QnO1xyXG5pbXBvcnQgeyBPcGVuQ2xvc2VCb3ggfSBmcm9tICcuLi8uLi8uLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvb3Blbi1jbG9zZS1ib3gnO1xyXG5pbXBvcnQgeyBmdXR1cmVBYmlsaXRpZXMgfSBmcm9tICcuLi8uLi8uLi8uLi8uLi9jb250cmFjdHMva2VkLW1vZGVscyc7XHJcbmltcG9ydCB7IFJlcXNSZWZlcmVuY2luZ0RvYyB9IGZyb20gJy4uLy4uLy4uLy4uL2NvdXJzZS1idWlsZGVyL2NvdXJzZXMvYnVzaW5lc3MtbG9naWMnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICByZXBvOiBLZWRCYWNrZW5kUmVwb1xyXG4gIHRhc2s6IFN0cmlwR3JhcGhzPFRhc2s+ICYgUmVxc1JlZmVyZW5jaW5nRG9jXHJcbiAgdGFiSWRzOiBzdHJpbmdbXSxcclxuICB1bmNvdmVyZWRJZHM6IHsgW2lkOiBzdHJpbmddOiB0cnVlIH0sXHJcbiAgYmxvY2tJZDogc3RyaW5nIHwgbnVsbFxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgRWRpdFJlcXVpcmVtZW50cyA9ICh7XHJcbiAgcmVwbyxcclxuICB0YXNrLFxyXG4gIHRhYklkcyxcclxuICB1bmNvdmVyZWRJZHMsXHJcbiAgYmxvY2tJZFxyXG59OiBQcm9wcykgPT4ge1xyXG4gIHJldHVybiA8TGF6eUNvbnRlbnQ+e1xyXG4gICAgYmxvY2tJZCA/XHJcblxyXG4gICAgICByZXBvLmNvdXJzZUJsb2Nrc1xyXG4gICAgICAgIC5pbmNsdWRlKFwiYWJpbGl0aWVzXCIsIFwiY2VudHJhbENvbnRlbnRcIiwgXCJrbm93bGVkZ2VSZXF1aXJlbWVudHNcIilcclxuICAgICAgICAuaWQoYmxvY2tJZClcclxuICAgICAgICAubWFwKGJsb2NrID0+IDxkaXY+XHJcbiAgICAgICAgICA8RWRpdFJlcXVpcmVtZW50c0lubmVyIHsuLi57cmVwbywgdGFzaywgdW5jb3ZlcmVkSWRzLCB0YWJPckJsb2NrOiBibG9ja319IC8+XHJcbiAgICAgICAgPC9kaXY+KSA6XHJcblxyXG4gICAgICByZXBvLmNvdXJzZVRhYnNcclxuICAgICAgICAuaW5jbHVkZShcImFiaWxpdGllc1wiLCBcImNlbnRyYWxDb250ZW50XCIsIFwia25vd2xlZGdlUmVxdWlyZW1lbnRzXCIpXHJcbiAgICAgICAgLmlkcyh0YWJJZHMpXHJcbiAgICAgICAgLnRvVmFsdWUoKS5tYXAodGFicyA9PiA8ZGl2PlxyXG4gICAgICAgICAge3RhYnMubGVuZ3RoID09PSAxID9cclxuICAgICAgICAgICAgPEVkaXRSZXF1aXJlbWVudHNJbm5lciB7Li4ue3JlcG8sIHRhc2ssIHVuY292ZXJlZElkcywgdGFiT3JCbG9jazogdGFic1swXX19IC8+IDpcclxuICAgICAgICAgIHRhYnMubWFwKHRhYiA9PiA8T3BlbkNsb3NlQm94IGtleT17dGFiLmlkfSB0aXRsZT17PGg0Pnt0YWIubmFtZSB8fCB0YWIudGFiVGl0bGV9e1xyXG4gICAgICAgICAgICB0YWIuc3ViamVjdCAmJiB0YWIuc3ViamVjdC5zdWJqZWN0TmFtZSAmJiB0YWIuc3ViamVjdC5zdWJqZWN0TmFtZSAhPT0gKHRhYi5uYW1lIHx8IHRhYi50YWJUaXRsZSkgP1xyXG4gICAgICAgICAgICAgIGAgKCR7dGFiLnN1YmplY3Quc3ViamVjdE5hbWV9KWA6ICcnXHJcbiAgICAgICAgICB9PC9oND59PlxyXG4gICAgICAgICAgICAgIDxFZGl0UmVxdWlyZW1lbnRzSW5uZXIgey4uLntyZXBvLCB0YXNrLCB1bmNvdmVyZWRJZHMsIHRhYk9yQmxvY2s6IHRhYiwgaGFzTXVsdGlwbGVTdWJqZWN0czogdHJ1ZX19IC8+XHJcbiAgICAgICAgICAgIDwvT3BlbkNsb3NlQm94PiApXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICA8L2Rpdj4pXHJcbiAgfTwvTGF6eUNvbnRlbnQ+XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBFZGl0UmVxdWlyZW1lbnRzSW5uZXIgPSAoe1xyXG4gIHRhYk9yQmxvY2s6IHRhYk9yQmxvY2ssXHJcbiAgcmVwbyxcclxuICB0YXNrLFxyXG4gIHVuY292ZXJlZElkcyxcclxuICBoYXNNdWx0aXBsZVN1YmplY3RzXHJcbn06IHtcclxuICByZXBvOiBLZWRCYWNrZW5kUmVwb1xyXG4gIHRhc2s6IFN0cmlwR3JhcGhzPFRhc2s+ICYgUmVxc1JlZmVyZW5jaW5nRG9jXHJcbiAgdW5jb3ZlcmVkSWRzOiB7IFtpZDogc3RyaW5nXTogdHJ1ZSB9LFxyXG4gIHRhYk9yQmxvY2s6XHJcbiAgICBXaXRoR3JhcGhzPENvdXJzZVRhYiwgXCJhYmlsaXRpZXNcIiB8IFwiY2VudHJhbENvbnRlbnRcIiB8IFwia25vd2xlZGdlUmVxdWlyZW1lbnRzXCI+IHxcclxuICAgIFdpdGhHcmFwaHM8Q291cnNlQmxvY2ssIFwiYWJpbGl0aWVzXCIgfCBcImNlbnRyYWxDb250ZW50XCIgfCBcImtub3dsZWRnZVJlcXVpcmVtZW50c1wiPixcclxuICBoYXNNdWx0aXBsZVN1YmplY3RzPzogYm9vbGVhblxyXG59KSA9PiA8TGF6eUNvbnRlbnQ+e1xyXG4gIHJlc29sdmVSZXF1aXJlbWVudE9yZGVyKHRhYk9yQmxvY2spLm1hcCh0YWIgPT4ge1xyXG4gICAgY29uc3Qgc3ViamVjdE5hbWUgPSAndHlwZScgaW4gdGFiICYmIHRhYi5zdWJqZWN0ICYmIHRhYi5zdWJqZWN0LnN1YmplY3ROYW1lO1xyXG4gICAgcmV0dXJuIDw+XHJcbiAgICAgIHt0YXNrLnRhc2tUeXBlICE9PSAnZXhlcmNpc2UnICYmIDxkaXYgY2xhc3NOYW1lPVwia2VkX2JveGVkXCI+XHJcbiAgICAgICAgPGgzPntMYFbDpGxqIGt1bnNrYXBza3JhdmB9PC9oMz5cclxuICAgICAgICA8cD5cclxuICAgICAgICAgIHtMYE1hcmtlcmEgZGUga3Vuc2thcHNrcmF2IHNvbSBkaW4gdXBwZ2lmdCB0w6Rja2VyLmB9XHJcbiAgICAgICAgPC9wPlxyXG4gICAgICAgIDxLbm93bGVkZ2VNYXRyaXhcclxuICAgICAgICAgIGtub3dsZWRnZVJlcXVpcmVtZW50cz17dGFiLmtub3dsZWRnZVJlcXVpcmVtZW50c31cclxuICAgICAgICAgIG1hcmtlZElkcz17dGFzay5rbm93bGVkZ2VSZXF1aXJlbWVudHMubWFwKCh7IGlkIH0pID0+IGlkKX1cclxuICAgICAgICAgIGV4cGxhaW5lZFJlcXVpcmVtZW50cz17dGFzay5leHBsYWluZWRSZXF1aXJlbWVudHMgfHwge319XHJcbiAgICAgICAgICBpZHNUb01hcmtOb3RPaz17dW5jb3ZlcmVkSWRzfVxyXG4gICAgICAgICAgbWFya01vZGU9e3RydWV9XHJcbiAgICAgICAgICBtaWdyYXRlZElkcz17dGFzayAmJiB0YXNrLm1pZ3JhdGVkVGV4dHMgJiYgdGFzay5taWdyYXRlZFRleHRzLmtub3dsZWRnZVJlcXVpcmVtZW50c31cclxuICAgICAgICAgIG9uRXhwbGFpbmVkUmVxdWlyZW1lbnRzQ2hhbmdlZD17KHJlcXVpcmVtZW50SWQsIHRleHQpID0+XHJcbiAgICAgICAgICAgIHJlcG8udGFza3MudXBkYXRlKHRhc2ssIHtcclxuICAgICAgICAgICAgICBleHBsYWluZWRSZXF1aXJlbWVudHM6IHtcclxuICAgICAgICAgICAgICAgIC4uLnRhc2suZXhwbGFpbmVkUmVxdWlyZW1lbnRzLFxyXG4gICAgICAgICAgICAgICAgW3JlcXVpcmVtZW50SWRdOiB0ZXh0XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KX1cclxuICAgICAgICAgIG9uTWFya0NoYW5nZWQ9eyhtYXJrZWRJZDogc3RyaW5nLCBpc01hcmtlZDogYm9vbGVhbikgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtYXJrZWREb2MgPSB0YWIua25vd2xlZGdlUmVxdWlyZW1lbnRzLmZpbHRlcigoeyBpZCB9KSA9PiBpZCA9PT0gbWFya2VkSWQpWzBdO1xyXG4gICAgICAgICAgICBpZiAoaXNNYXJrZWQpIHtcclxuICAgICAgICAgICAgICBpZiAoaGFzTXVsdGlwbGVTdWJqZWN0cykge1xyXG4gICAgICAgICAgICAgICAgLy8gTWlzc2lvbiB0YWJzIG5lZWRzIHRvIHN0b3JlIHRoZSBzdWJqZWN0IG5hbWUgY29ubmVjdGVkIHRvIGVhY2gga25vd2xlZGdlIHJlcXVpcmVtZW50OlxyXG4gICAgICAgICAgICAgICAgcmVwby50YXNrcy51cGRhdGUodGFzaywge2lkc1RvU3ViamVjdE1hcDogey4uLnRhc2suaWRzVG9TdWJqZWN0TWFwLCBbbWFya2VkSWRdOiBzdWJqZWN0TmFtZX19KTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVwby50YXNrcy51cGRhdGUodGFzaywge2lkc1RvU3ViamVjdE1hcDogdW5kZWZpbmVkfSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHJlcG8udGFza3MuYWRkUmVsYXRlZCh0YXNrLmlkLCBcImtub3dsZWRnZVJlcXVpcmVtZW50c1wiLCBtYXJrZWREb2MpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGlmIChoYXNNdWx0aXBsZVN1YmplY3RzKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBNaXNzaW9uIHRhYnMgbmVlZHMgdG8gZGVsZXRlIHRoZSBzdWJqZWN0IG5hbWUgY29ubmVjdGVkIHRvIGVhY2gga25vd2xlZGdlIHJlcXVpcmVtZW50OlxyXG4gICAgICAgICAgICAgICAgcmVwby50YXNrcy51cGRhdGUodGFzaywge2lkc1RvU3ViamVjdE1hcDogey4uLnRhc2suaWRzVG9TdWJqZWN0TWFwLCBbbWFya2VkSWRdOiB1bmRlZmluZWR9fSk7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlcG8udGFza3MudXBkYXRlKHRhc2ssIHtpZHNUb1N1YmplY3RNYXA6IHVuZGVmaW5lZH0pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICByZXBvLnRhc2tzLnJlbW92ZVJlbGF0ZWQodGFzay5pZCwgXCJrbm93bGVkZ2VSZXF1aXJlbWVudHNcIiwgbWFya2VkRG9jKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfX1cclxuICAgICAgICAvPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgfVxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInN2LWh0bWwtcG9ydGxldCBzdi1wb3J0bGV0XCI+XHJcbiAgICAgICAgPFNlbGVjdFJlbGF0ZWREb2NzXHJcbiAgICAgICAgICB0aXRsZT17TGBWw6RsaiBmw7ZybcOlZ29yYH1cclxuICAgICAgICAgIG9wdGlvbnM9e3RhYi5hYmlsaXRpZXN9XHJcbiAgICAgICAgICBtYXJrZWRJZHM9e3Rhc2suYWJpbGl0aWVzLm1hcChhID0+IGEuaWQpfVxyXG4gICAgICAgICAgbWFya01vZGU9e3RydWV9XHJcbiAgICAgICAgICBtaWdyYXRlZElkcz17dGFzayAmJiB0YXNrLm1pZ3JhdGVkVGV4dHMgJiYgdGFzay5taWdyYXRlZFRleHRzLmFiaWxpdGllc31cclxuICAgICAgICAgIG9uTWFya0NoYW5nZWQ9eyhtYXJrZWRJZCwgaXNNYXJrZWQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbWFya2VkRG9jID0gdGFiLmFiaWxpdGllcy5maWx0ZXIoYSA9PiBhLmlkID09PSBtYXJrZWRJZClbMF07XHJcbiAgICAgICAgICAgIGlmIChpc01hcmtlZCkge1xyXG4gICAgICAgICAgICAgIHJlcG8udGFza3MuYWRkUmVsYXRlZCh0YXNrLmlkLCBcImFiaWxpdGllc1wiLCBtYXJrZWREb2MpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHJlcG8udGFza3MucmVtb3ZlUmVsYXRlZCh0YXNrLmlkLCBcImFiaWxpdGllc1wiLCBtYXJrZWREb2MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9fVxyXG4gICAgICAgIC8+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInN2LWh0bWwtcG9ydGxldCBzdi1wb3J0bGV0XCI+XHJcbiAgICAgICAgPFNlbGVjdFJlbGF0ZWREb2NzXHJcbiAgICAgICAgICB0aXRsZT17TGBWw6RsaiBjZW50cmFsdCBpbm5laMOlbGxgfVxyXG4gICAgICAgICAgb3B0aW9ucz17dGFiLmNlbnRyYWxDb250ZW50fVxyXG4gICAgICAgICAgbWFya2VkSWRzPXt0YXNrLmNlbnRyYWxDb250ZW50Lm1hcChjYyA9PiBjYy5pZCl9XHJcbiAgICAgICAgICBtYXJrTW9kZT17dHJ1ZX1cclxuICAgICAgICAgIG1pZ3JhdGVkSWRzPXt0YXNrICYmIHRhc2subWlncmF0ZWRUZXh0cyAmJiB0YXNrLm1pZ3JhdGVkVGV4dHMuY2VudHJhbENvbnRlbnR9XHJcbiAgICAgICAgICBvbk1hcmtDaGFuZ2VkPXsobWFya2VkSWQsIGlzTWFya2VkKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1hcmtlZERvYyA9IHRhYi5jZW50cmFsQ29udGVudC5maWx0ZXIoYSA9PiBhLmlkID09PSBtYXJrZWRJZClbMF07XHJcbiAgICAgICAgICAgIGlmIChpc01hcmtlZCkge1xyXG4gICAgICAgICAgICAgIHJlcG8udGFza3MuYWRkUmVsYXRlZCh0YXNrLmlkLCBcImNlbnRyYWxDb250ZW50XCIsIG1hcmtlZERvYyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgcmVwby50YXNrcy5yZW1vdmVSZWxhdGVkKHRhc2suaWQsIFwiY2VudHJhbENvbnRlbnRcIiwgbWFya2VkRG9jKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfX1cclxuICAgICAgICAvPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdi1odG1sLXBvcnRsZXQgc3YtcG9ydGxldFwiPlxyXG4gICAgICAgIDxPcGVuQ2xvc2VCb3ggY2xhc3NOYW1lPVwibGFyZ2VyXCIgdGl0bGU9ezxwPntMYFbDpGxqIGZyYW10aWRzZsO2cm3DpWdvcmB9PC9wPn0+XHJcbiAgICAgICAgICA8YnIgLz5cclxuICAgICAgICAgIDxDaGVja2xpc3RcclxuICAgICAgICAgICAgYXZhaWxhYmxlPXtmdXR1cmVBYmlsaXRpZXMubWFwKGZhID0+ICh7IG5hbWU6IGZhLCBrZXk6IGZhIH0pKX1cclxuICAgICAgICAgICAgc2VsZWN0ZWQ9e3Rhc2suZnV0dXJlQWJpbGl0aWVzfVxyXG4gICAgICAgICAgICBvbkNoYW5nZT17c2VsZWN0ZWRGYXMgPT4gcmVwby50YXNrcy51cGRhdGUodGFzaywgeyBmdXR1cmVBYmlsaXRpZXM6IHNlbGVjdGVkRmFzIH0pfVxyXG4gICAgICAgICAgLz5cclxuICAgICAgICA8L09wZW5DbG9zZUJveD5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8Lz47XHJcbiAgfSlcclxufTwvTGF6eUNvbnRlbnQ+IiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgVGFzaywgTGVhcm5pbmdHb2Fsc0NvbnRlbnQsIENvdXJzZUluc3RhbmNlLCBDb3Vyc2VUYWIgfSBmcm9tIFwia2VkYmFja2VuZC9tb2RlbHNcIjtcclxuaW1wb3J0IHsgS2VkQmFja2VuZFJlcG8sIFdpdGhHcmFwaHMsIFN0cmlwR3JhcGhzIH0gZnJvbSAna2VkYmFja2VuZC9yZXBvJztcclxuaW1wb3J0IHsgVGFza01pZ3JhdGlvbkJveCB9IGZyb20gJy4uLy4uLy4uLy4uL2NvdXJzZS1idWlsZGVyL21vZGFsLXBhZ2VzL2VkaXQtdGFzay90YXNrLW1pZ3JhdGlvbi1ib3gnO1xyXG5pbXBvcnQgUmVhY3REYXRlUGlja2VyIGZyb20gJ3JlYWN0LWRhdGVwaWNrZXInO1xyXG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcbmltcG9ydCB7IEwgfSBmcm9tICcuLi8uLi8uLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IENoZWNrbGlzdCB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9jaGVja2xpc3QnO1xyXG5pbXBvcnQgeyBMYXp5Q29udGVudCB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9sYXp5LWNvbnRlbnQnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICB0YXNrOiBUYXNrO1xyXG4gIHdyaXRlQWNjZXNzOiBib29sZWFuO1xyXG4gIHJlcG86IEtlZEJhY2tlbmRSZXBvO1xyXG4gIGNvbnRlbnRJZDogc3RyaW5nO1xyXG4gIHRhYjogU3RyaXBHcmFwaHM8Q291cnNlVGFiPjtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IEJhc2ljRWRpdGFibGVUYXNrRmllbGRzID0gKHt0YXNrLCB3cml0ZUFjY2VzcywgcmVwbywgY29udGVudElkLCB0YWJ9OiBQcm9wcykgPT4ge1xyXG4gIGNvbnN0IHRhYkNsYXNzID0gdGFiID8gdGFiLnRhYkNsYXNzIDogbnVsbDsgLy8gdGFiIGlzIHVuZGVmaW5lZCBvbiBzdGVwIGNvdXJzZXMuIEJ1dCB0aGVyZSBhcmUgbm8gbWlzc2lvbiB0YWJzIG9uIHN0ZXAgY291cnNlcy5cclxuICByZXR1cm4gPGRpdj5cclxuICAgIDxkaXYgY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbCBzcGFjZWRcIj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICA8cD57dGFiQ2xhc3MgPT09ICdtaXNzaW9uLXRhYicgP1xyXG4gICAgICAgICAgTGBVcHBkcmFnZXRzIG5hbW46YCA6XHJcbiAgICAgICAgICBMYFVwcGdpZnRlbnMgbmFtbjpgfTwvcD5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgPGlucHV0IGF1dG9Gb2N1cyB0eXBlPVwidGV4dFwiIHNpemU9ezM1fSB2YWx1ZT17dGFzay5uYW1lfSBkaXNhYmxlZD17IXdyaXRlQWNjZXNzfSByZWFkT25seT17IXdyaXRlQWNjZXNzfSBvbkNoYW5nZT17ZXYgPT4ge1xyXG4gICAgICAgICAgcmVwby50YXNrcy51cGRhdGUodGFzaywge25hbWU6IGV2LnRhcmdldC52YWx1ZX0pO1xyXG4gICAgICAgIH0gfSAvPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG5cclxuICAgIHt0YXNrLm1pZ3JhdGVkVGV4dHMgJiYgd3JpdGVBY2Nlc3MgJiYgPFRhc2tNaWdyYXRpb25Cb3ggdGFzaz17dGFza30gY291cnNlPXtudWxsfSB1cGRhdGVMaW5rPXsoaWQsIGxpbmtPclVubGluaykgPT5cclxuICAgICAgICB7dGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkIHlldFwiKTt9fSAvPn1cclxuICAgIFxyXG4gICAge3RhYkNsYXNzICE9PSAnbWlzc2lvbi10YWInICYmIDxkaXYgY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbCBzcGFjZWRcIj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICA8cD57TGBMw6RyYW5kZW3DpWw6YH08L3A+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgIDxMYXp5Q29udGVudD57cmVwby5jb3Vyc2VDb250ZW50cy5pZChjb250ZW50SWQpLm1hcChjb250ZW50ID0+IHtcclxuICAgICAgICAgIGlmIChjb250ZW50LnR5cGUgIT09ICdsZWFybmluZy1nb2FscycpIHJldHVybiA8cD57TGBFaiB2YWxiYXJ0YH08L3A+O1xyXG4gICAgICAgICAgY29uc3Qge2hhc0NvbW1vbkxlYXJuaW5nR29hbHN9ID0gKGNvbnRlbnQgYXMgTGVhcm5pbmdHb2Fsc0NvbnRlbnQpO1xyXG4gICAgICAgICAgY29uc3QgbGVhcm5pbmdHb2FscyA9IChjb250ZW50IGFzIExlYXJuaW5nR29hbHNDb250ZW50KS5jb21tb25MZWFybmluZ0dvYWxzO1xyXG4gICAgICAgICAgY29uc3QgYXZhaWxhYmxlR29hbHMgPSBsZWFybmluZ0dvYWxzLm1hcChsZyA9PiBsZy50cmltKCkpLmZpbHRlcihsZyA9PiBsZylcclxuICAgICAgICAgICAgICAubWFwKGxnID0+ICh7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBsZyxcclxuICAgICAgICAgICAgICAgIGtleTogbGdcclxuICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICByZXR1cm4gPENoZWNrbGlzdFxyXG4gICAgICAgICAgICAgIGF2YWlsYWJsZT17YXZhaWxhYmxlR29hbHN9XHJcbiAgICAgICAgICAgICAgc2VsZWN0ZWQ9e3Rhc2subGVhcm5pbmdHb2FsLnNwbGl0KCdcXG4nKX1cclxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGdvYWxzLCBnb2FsKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaGFzQ29tbW9uTGVhcm5pbmdHb2Fscykge1xyXG4gICAgICAgICAgICAgICAgICByZXBvLnRhc2tzLnVwZGF0ZSh0YXNrLCB7bGVhcm5pbmdHb2FsOiBnb2Fscy5qb2luKCdcXG4nKX0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgcmVwby50YXNrcy51cGRhdGUodGFzaywge2xlYXJuaW5nR29hbDogZ29hbH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAvPjtcclxuICAgICAgICB9KX08L0xhenlDb250ZW50PiAgICAgIFxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2Pn1cclxuICAgIFxyXG5cclxuICAgIDw+PGgyPnt0YWJDbGFzcyA9PT0gJ21pc3Npb24tdGFiJyA/IExgVXBwZHJhZ3N0eXBgIDogTGBVcHBnaWZ0c3R5cGB9PC9oMj5cclxuICAgICAgPENoZWNrbGlzdCBhdmFpbGFibGU9e1tcclxuICAgICAgICB0YWJDbGFzcyAhPT0gJ21pc3Npb24tdGFiJyAmJiB7bmFtZTogTGDDlnZuaW5nc3VwcGdpZnRgLCBrZXk6ICdleGVyY2lzZSd9LFxyXG4gICAgICAgIHtuYW1lOiBMYFVwcGdpZnRgLCBrZXk6IFwidGFza1wifSxcclxuICAgICAgICB7bmFtZTogTGBJbmzDpG1uaW5nc3VwcGdpZnRgLCBrZXk6ICdhc3NpZ25tZW50J30sXHJcbiAgICAgIF0uZmlsdGVyKHg9PngpfVxyXG4gICAgICAgIHNlbGVjdGVkPXtbdGFzay50YXNrVHlwZV19XHJcbiAgICAgICAgb25DaGFuZ2U9eyhfLCBjbGlja2VkS2V5KSA9PiByZXBvLnRhc2tzLnVwZGF0ZSh0YXNrLCB7dGFza1R5cGU6IGNsaWNrZWRLZXkgYXMgYW55fSl9XHJcbiAgICAgIC8+XHJcbiAgICAgIHt0YXNrLnRhc2tUeXBlID09PSAnYXNzaWdubWVudCcgJiYgPD5cclxuICAgICAgICA8cD5JbmzDpG1uaW5nc2RhdHVtPC9wPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbFwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICAgICAgPFJlYWN0RGF0ZVBpY2tlciBuZXh0TW9udGhCdXR0b25MYWJlbD1cIlwiIHNob3dXZWVrTnVtYmVycz17dHJ1ZX0gcHJldmlvdXNNb250aEJ1dHRvbkxhYmVsPVwiXCIgc2VsZWN0ZWQ9e3Rhc2suZGVhZGxpbmUgJiYgbW9tZW50KHRhc2suZGVhZGxpbmUpLnRvRGF0ZSgpfSBkYXRlRm9ybWF0PVwiWVlZWS1NTS1kZFwiIGxvY2FsZT17XCJzdlwifSBwb3BwZXJQbGFjZW1lbnQ9XCJib3R0b20tc3RhcnRcIiBvbkNoYW5nZT17dmFsdWUgPT4ge1xyXG4gICAgICAgICAgICAgIHJlcG8udGFza3MudXBkYXRlKHRhc2ssIHtkZWFkbGluZTogbW9tZW50KHZhbHVlKS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpfSApO1xyXG4gICAgICAgICAgICB9IH0gLz5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICAgICAge3Rhc2suZGVhZGxpbmUgJiYgPGEgY2xhc3NOYW1lPVwiZGVsZXRlRGF0ZVwiIGhyZWY9XCIjXCIgdGl0bGU9XCJUYSBib3J0IGlubMOkbW5pbmdzZGF0dW1cIiBvbkNsaWNrPXtldiA9PiB7XHJcbiAgICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICByZXBvLnRhc2tzLnVwZGF0ZSh0YXNrLCB7ZGVhZGxpbmU6IG51bGx9KTtcclxuICAgICAgICAgICAgfX0+PC9hPn1cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8Lz59XHJcbiAgICA8Lz5cclxuICA8L2Rpdj47XHJcbn1cclxuIiwiaW1wb3J0IFJlYWN0LCB7IHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRSZXBvLCBTdHJpcEdyYXBocywgV2l0aEdyYXBocyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IFRhc2ssIENvdXJzZUluc3RhbmNlLCBTdGVwQ291cnNlVGFiLCBDb3Vyc2VUYWIsIFRoZW1lQ291cnNlVGFiIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBGb3JtRmllbGQgfSBmcm9tICcuLi8uLi8uLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvZm9ybS1maWVsZCc7XHJcbmltcG9ydCB7IFRleHRJbnB1dCB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9mb3JtLWZpZWxkLXRleHQtaW5wdXQnO1xyXG5pbXBvcnQgeyBMLCBjb21wYXJlUHJvcHMgfSBmcm9tICcuLi8uLi8uLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IEJhc2ljRWRpdGFibGVUYXNrRmllbGRzIH0gZnJvbSAnLi9iYXNpYy1lZGl0YWJsZS10YXNrLWZpZWxkcyc7XHJcbmltcG9ydCB7IFRhc2tGb290ZXJCdXR0b25zIH0gZnJvbSAnLi90YXNrLWZvb3Rlci1idXR0b25zJztcclxuaW1wb3J0IHsgSW50cm9kdWN0aW9uVGV4dEVkaXRvciB9IGZyb20gJy4vaW50cm9kdWN0aW9uLXRleHQtZWRpdG9yJztcclxuaW1wb3J0IHsgVGFza0Rlc2NyaXB0aW9uRWRpdG9yIH0gZnJvbSAnLi90YXNrLWRlc2NyaXB0aW9uLWVkaXRvcic7XHJcbmltcG9ydCB7IFRhc2tXb3JraW5nUHJvY2VkdXJlRWRpdG9yIH0gZnJvbSAnLi90YXNrLXdvcmtpbmctcHJvY2VkdXJlLWVkaXRvcic7XHJcbmltcG9ydCB7IFRhc2tFbWJlZGRlZEhUTUxFZGl0b3IgfSBmcm9tICcuL3Rhc2stZW1iZWRkZWQtaHRtbC1lZGl0b3InO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICByZXBvOiBLZWRCYWNrZW5kUmVwbztcclxuICBjb3Vyc2U6IFdpdGhHcmFwaHM8Q291cnNlSW5zdGFuY2UsIFwidGFic1wiIHwgXCJibG9ja3NcIj47XHJcbiAgdGFiOiBDb3Vyc2VUYWI7XHJcbiAgdGFiSWQ6IHN0cmluZztcclxuICBjb250ZW50SWQ6IHN0cmluZztcclxuICB3cml0ZUFjY2VzczogYm9vbGVhbjtcclxuICBkcmFmdElkOiBzdHJpbmc7XHJcbiAgc2Nob29sOiBzdHJpbmc7XHJcbiAgdGFzazogU3RyaXBHcmFwaHM8VGFzaz47XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBFZGl0VGFza0Zvcm0gPSAoe3JlcG8sIGNvdXJzZSwgZHJhZnRJZCwgdGFiSWQsIHRhYiwgY29udGVudElkLCB3cml0ZUFjY2VzcywgdGFzaywgc2Nob29sfTogUHJvcHMpID0+IHtcclxuICByZXR1cm4gPD5cclxuICAgIDxCYXNpY0VkaXRhYmxlVGFza0ZpZWxkcyByZXBvPXtyZXBvfSB0YXNrPXt0YXNrfSB3cml0ZUFjY2Vzcz17d3JpdGVBY2Nlc3N9IGNvbnRlbnRJZD17Y29udGVudElkfSB0YWI9e3RhYn0gLz5cclxuICAgIDxJbnRyb2R1Y3Rpb25UZXh0RWRpdG9yIHJlcG89e3JlcG99IHRhc2s9e3Rhc2t9IHdyaXRlQWNjZXNzPXt3cml0ZUFjY2Vzc30gLz5cclxuICAgIDxUYXNrRGVzY3JpcHRpb25FZGl0b3Igd3JpdGVBY2Nlc3M9e3dyaXRlQWNjZXNzfSB0YXNrPXt0YXNrfSByZXBvPXtyZXBvfSAvPlxyXG4gICAgPFRhc2tXb3JraW5nUHJvY2VkdXJlRWRpdG9yIHdyaXRlQWNjZXNzPXt3cml0ZUFjY2Vzc30gdGFzaz17dGFza30gcmVwbz17cmVwb30gc3RlcD17dGFiICYmIHRhYi50eXBlID09PSAnc3RlcC1jb3Vyc2UtdGFiJyAmJiB0YWIuc3RlcE5vfSAvPlxyXG4gICAgPFRhc2tFbWJlZGRlZEhUTUxFZGl0b3Igd3JpdGVBY2Nlc3M9e3dyaXRlQWNjZXNzfSB0YXNrPXt0YXNrfSByZXBvPXtyZXBvfSAvPlxyXG4gICAgPFRhc2tGb290ZXJCdXR0b25zIHJlcG89e3JlcG99IHRhc2s9e3Rhc2t9IGNvdXJzZUlkPXtjb3Vyc2UuaWR9IGRyYWZ0SWQ9e2RyYWZ0SWR9IHRhYklkPXt0YWJJZH0gY29udGVudElkPXtjb250ZW50SWR9IHNjaG9vbD17c2Nob29sfSAvPlxyXG4gIDwvPjtcclxufVxyXG5cclxuLypcclxuXHJcbiAgKiBJbnRlIGt1bm5hIMOkbmRyYSBvcmRuaW5nIHDDpSBsw6VzdGEgcnV0b3Igb20gaW50ZSBpc0tlZFN0YWZmKCkuXHJcbiAgKiBJbmdlbiBsw6RnZyB0aWxsIHVwcGdpZnRzLWtuYXBwIG9tIGludGUgZWRpdE1vZGUuXHJcbiAgKiBcclxuICAqIFJlZGlnZXJhIHVwcGdpZnRzaW5uZWjDpWxsXHJcbiAgKiBMw6VzIGzDpHJhbmRlbcOlbGVuIHRpbGwgYWRtaW4gYWxsdGlkXHJcbiAgKiBLdW5uYSBrbGlja2EgaW4gc2lnIHDDpSB1cHBnaWZ0ZW5cclxuICAqIEt1bm5hIHRhIGJvcnQgdXBwZ2lmdFxyXG4gICogS3VubmEgbm9sbHN0w6RsbGEgw6RuZHJpbmdhciBmw7ZyIHNrb2xhblxyXG5cclxuKi8iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kUmVwbyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IFRhc2sgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IEwgfSBmcm9tICcuLi8uLi8uLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IFd5c2l3eWcgfSBmcm9tICcuLi8uLi8uLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvd3lzaXd5Zyc7XHJcbmltcG9ydCBhY3Rpb25zX3N3ZWRpc2ggZnJvbSAnLi4vLi4vLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL3d5c2l3eWcvYWN0aW9ucy1zdic7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHJlcG86IEtlZEJhY2tlbmRSZXBvXHJcbiAgdGFzazogVGFza1xyXG4gIHdyaXRlQWNjZXNzOiBib29sZWFuXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBJbnRyb2R1Y3Rpb25UZXh0RWRpdG9yID0gKHtyZXBvLCB0YXNrLCB3cml0ZUFjY2Vzc306IFByb3BzKT0+IDw+XHJcbiAgPGg0PntMYEludHJvdGV4dGB9PC9oND5cclxuICA8cCBjbGFzc05hbWU9XCJzdWJIZWFkZXJcIj4oU2tyaXYgZW4gaW50cm9kdWt0aW9uIHRpbGwgdXBwZ2lmdGVuKTwvcD5cclxuICA8V3lzaXd5Z1xyXG4gICAgYWN0aW9ucz17W1xyXG4gICAgICBcImJvbGRcIixcclxuICAgICAgXCJpdGFsaWNcIixcclxuICAgICAgXCJ1bmRlcmxpbmVcIixcclxuICAgICAgXCJsaW5rXCIsXHJcbiAgICAgIFwiaW1hZ2VcIlxyXG4gICAgXX1cclxuICAgIGRlZmF1bHRBY3Rpb25zPXthY3Rpb25zX3N3ZWRpc2h9XHJcbiAgICByZWFkT25seT17IXdyaXRlQWNjZXNzfVxyXG4gICAgaHRtbD17dGFzay5jb250ZW50IHx8IFwiXCJ9XHJcbiAgICBvbkNoYW5nZT17aHRtbCA9PiByZXBvLnRhc2tzLnVwZGF0ZSh0YXNrLCB7Y29udGVudDogaHRtbH0pfSAgLz5cclxuPC8+XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgVGFzayB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgV3lzaXd5ZyB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy93eXNpd3lnJztcclxuaW1wb3J0IGFjdGlvbnNfc3dlZGlzaCBmcm9tICcuLi8uLi8uLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvd3lzaXd5Zy9hY3Rpb25zLXN2JztcclxuaW1wb3J0IHsgS2VkQmFja2VuZFJlcG8gfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyB0YXNrVHlwZUhlYWRpbmdzIH0gZnJvbSAnLi4vdGV4dHMnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFRhc2tEZXNjcmlwdGlvbkVkaXRvcih7IHdyaXRlQWNjZXNzLCB0YXNrLCByZXBvIH06IHsgd3JpdGVBY2Nlc3M6IGJvb2xlYW4sIHRhc2s6IFRhc2ssIHJlcG86IEtlZEJhY2tlbmRSZXBvIH0pIHtcclxuICAgIHJldHVybiA8PlxyXG4gICAgICAgIDxoND57dGFza1R5cGVIZWFkaW5nc1t0YXNrLnRhc2tUeXBlXSB8fCBMYFVwcGdpZnRgfTwvaDQ+XHJcbiAgICAgICAgPHAgY2xhc3NOYW1lPVwic3ViSGVhZGVyXCI+e0xgKFNrcml2IGluIGVuIGtvcnQgZsO2cmtsYXJpbmcgdmFkIHVwcGdpZnRlbiBnw6VyIHV0IHDDpSlgfTwvcD5cclxuICAgICAgICA8V3lzaXd5ZyBhY3Rpb25zPXtbXHJcbiAgICAgICAgICAgIFwiYm9sZFwiLFxyXG4gICAgICAgICAgICBcIml0YWxpY1wiLFxyXG4gICAgICAgICAgICBcInVuZGVybGluZVwiLFxyXG4gICAgICAgICAgICBcImltYWdlXCJcclxuICAgICAgICBdfSBkZWZhdWx0QWN0aW9ucz17YWN0aW9uc19zd2VkaXNofSByZWFkT25seT17IXdyaXRlQWNjZXNzfSBodG1sPXt0YXNrLmRlc2NyaXB0aW9uIHx8IFwiXCJ9IG9uQ2hhbmdlPXtodG1sID0+IHtcclxuICAgICAgICAgICAgcmVwby50YXNrcy51cGRhdGUodGFzaywgeyBkZXNjcmlwdGlvbjogaHRtbCB9KTtcclxuICAgICAgICB9fSAvPlxyXG4gICAgPC8+O1xyXG59XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IFRhc2sgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRSZXBvIH0gZnJvbSAna2VkYmFja2VuZC9yZXBvJztcclxuaW1wb3J0IHsgaXNLZWRTdGFmZiB9IGZyb20gJy4uLy4uLy4uL2xvZ2ljL2lzLWtlZC1zdGFmZic7XHJcbmltcG9ydCB7IEwgfSBmcm9tICcuLi8uLi8uLi8uLi8uLi91dGlscy91dGlscyc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHdyaXRlQWNjZXNzOiBib29sZWFuXHJcbiAgdGFzazogVGFza1xyXG4gIHJlcG86IEtlZEJhY2tlbmRSZXBvXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBUYXNrRW1iZWRkZWRIVE1MRWRpdG9yID0gKHt0YXNrLCByZXBvfTogUHJvcHMpID0+IGlzS2VkU3RhZmYoKSA/IHRhc2suZW1iZWRkZWRIdG1sID8gPGRpdj5cclxuICA8aDQ+e0xgSW5iw6RkZGF0IG1hdGVyaWFsYH08L2g0PlxyXG4gIDxwPntMYEtsaXBwIGluIEhUTUwga29kIG5lZGFuYH08L3A+XHJcbiAgPHRleHRhcmVhIHN0eWxlPXt7d2lkdGg6IFwiMTAwJVwiLCBoZWlnaHQ6IFwiMTAwcHhcIn19XHJcbiAgICB2YWx1ZT17dGFzay5lbWJlZGRlZEh0bWx9XHJcbiAgICBvbkNoYW5nZT17ZXYgPT4gcmVwby50YXNrcy51cGRhdGUodGFzaywge2VtYmVkZGVkSHRtbDogZXYudGFyZ2V0LnZhbHVlfSl9IC8+XHJcbjwvZGl2PiA6XHJcbjxkaXY+XHJcbiAgPGJ1dHRvbiBjbGFzc05hbWU9XCJidG5cIlxyXG4gICAgb25DbGljaz17KCk9PnJlcG8udGFza3MudXBkYXRlKHRhc2ssIHtlbWJlZGRlZEh0bWw6IFwiIFwifSl9XHJcbiAgPlxyXG4gICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtY29kZVwiIGFyaWEtaGlkZGVuIC8+Jm5ic3A7e0xgTMOkZ2cgdGlsbCBpbmLDpGRkYXQgbWF0ZXJpYWxgfVxyXG4gIDwvYnV0dG9uPlxyXG4gIDxici8+XHJcbiAgPGJyLz5cclxuPC9kaXY+IDpcclxuPGRpdiAvPjtcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgS2VkQmFja2VuZFJlcG8gfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyB3aXRoUm91dGVyLCBSb3V0ZVByb3BzLCBSb3V0ZUNvbXBvbmVudFByb3BzIH0gZnJvbSAncmVhY3Qtcm91dGVyJztcclxuaW1wb3J0IHsgTGluayB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xyXG5pbXBvcnQgeyBkYiB9IGZyb20gJy4uLy4uLy4uLy4uLy4uL2dsb2JhbHMvZGInO1xyXG5pbXBvcnQgZW52IGZyb20gJy4uLy4uLy4uLy4uLy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCB7IHB1Ymxpc2hDb3Vyc2UgfSBmcm9tICcuLi8uLi8uLi9sb2dpYy9wdWJsaXNoLWNvdXJzZSc7XHJcbmltcG9ydCB7IEhvcml6b250YWxJdGVtIH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2hvcml6b250YWwtaXRlbSc7XHJcbmltcG9ydCB7IEFsaWduSG9yaXpvbnRhbCB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9hbGlnbi1ob3Jpem9udGFsJztcclxuaW1wb3J0IHsgVGFzayB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgc2Nob29sOiBzdHJpbmc7XHJcbiAgY291cnNlSWQ6IHN0cmluZztcclxuICB0YWJJZDogc3RyaW5nO1xyXG4gIGNvbnRlbnRJZDogc3RyaW5nO1xyXG4gIGRyYWZ0SWQ6IHN0cmluZztcclxuICB0YXNrOiBUYXNrO1xyXG4gIHJlcG86IEtlZEJhY2tlbmRSZXBvO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgVGFza0Zvb3RlckJ1dHRvbnMgPSB3aXRoUm91dGVyKCh7IHNjaG9vbCwgY291cnNlSWQsIHRhYklkLCBjb250ZW50SWQsIGRyYWZ0SWQsIHRhc2ssIHJlcG8sIGhpc3RvcnkgfTogUHJvcHMgJiBSb3V0ZUNvbXBvbmVudFByb3BzKSA9PiA8PlxyXG4gIDxkaXY+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnRuIGJ0bi13YXJuaW5nIHB1bGwtcmlnaHRcIiBvbkNsaWNrPXthc3luYyAoKSA9PiB7XHJcbiAgICAgIHJlcG8uY291cnNlQ29udGVudHMucmVtb3ZlUmVsYXRlZChjb250ZW50SWQsIFwidGFza3NcIiwgdGFzayk7XHJcbiAgICAgIGF3YWl0IGRiLnNhdmVOb3coKTtcclxuICAgICAgaGlzdG9yeS5wdXNoKGAvJHtzY2hvb2x9L2NvdXJzZXMvJHtjb3Vyc2VJZH0vdGFicy8ke3RhYklkfS9kcmFmdHMvJHtkcmFmdElkfS9lZGl0YCk7XHJcbiAgICB9fT5cclxuICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtdHJhc2hcIiBhcmlhLWhpZGRlbj17dHJ1ZX0gLz4mbmJzcDtcclxuICAgICAgICB7TGBUYSBib3J0IHVwcGdpZnRlbmB9XHJcbiAgICA8L2Rpdj5cclxuICAgIDxBbGlnbkhvcml6b250YWw+XHJcbiAgICAgIDxIb3Jpem9udGFsSXRlbT5cclxuICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICBjbGFzc05hbWU9XCJidG5cIlxyXG4gICAgICAgICAgb25DbGljaz17YXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBhd2FpdCByZXBvLnNhdmVOb3coKTtcclxuICAgICAgICAgICAgaGlzdG9yeS5wdXNoKGAvJHtzY2hvb2x9L2NvdXJzZXMvJHtjb3Vyc2VJZH0vdGFicy8ke3RhYklkIHx8ICckJ30vY29udGVudHMvJHtjb250ZW50SWR9L3Rhc2tzLyR7dGFzay5pZH0vZHJhZnRzLyR7ZHJhZnRJZH1gKTtcclxuICAgICAgICAgIH19XHJcbiAgICAgICAgPlxyXG4gICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtZXllXCIgYXJpYS1oaWRkZW49e3RydWV9IC8+Jm5ic3A7XHJcbiAgICAgICAgICB7TGBGw7ZyaGFuZHNncmFuc2thYH1cclxuICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgPC9Ib3Jpem9udGFsSXRlbT5cclxuICAgICAgPEhvcml6b250YWxJdGVtPlxyXG4gICAgICAgIDxidXR0b25cclxuICAgICAgICAgIGNsYXNzTmFtZT1cImJ0blwiXHJcbiAgICAgICAgICBvbkNsaWNrPXthc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGhpc3RvcnkucHVzaChgLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlSWR9L3RhYnMvJHt0YWJJZCB8fCAnJCd9L2RyYWZ0cy8ke2RyYWZ0SWR9L2VkaXRgKTtcclxuICAgICAgICAgIH19XHJcbiAgICAgICAgPlxyXG4gICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtYXJyb3ctbGVmdFwiIGFyaWEtaGlkZGVuPXt0cnVlfSAvPiZuYnNwO1xyXG4gICAgICAgICAge0xgw4V0ZXJnw6UgdGlsbCBmbGlrZW5gfVxyXG4gICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICA8L0hvcml6b250YWxJdGVtPlxyXG4gICAgICB7Lyo8SG9yaXpvbnRhbEl0ZW0+XHJcbiAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgY2xhc3NOYW1lPVwiYnRuIGJ0bi13YXJuaW5nXCJcclxuICAgICAgICAgIG9uQ2xpY2s9e2FzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgYXdhaXQgcHVibGlzaENvdXJzZSh7XHJcbiAgICAgICAgICAgICAgc2Nob29sLFxyXG4gICAgICAgICAgICAgIGNvdXJzZUlkLFxyXG4gICAgICAgICAgICAgIGRyYWZ0UmVwbzogcmVwb1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYXdhaXQgZGIuc2F2ZU5vdygpO1xyXG4gICAgICAgICAgICBoaXN0b3J5LnB1c2goYC8ke3NjaG9vbH0vY291cnNlcy8ke2NvdXJzZUlkfS90YWJzLyR7dGFiSWQgfHwgJyQnfWApO1xyXG4gICAgICAgICAgfX1cclxuICA+XHJcbiAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1wbGF5XCIgYXJpYS1oaWRkZW49e3RydWV9IC8+Jm5ic3A7XHJcbiAgICAgICAgICB7TGBQdWJsaWNlcmFgfVxyXG4gICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICA8L0hvcml6b250YWxJdGVtPiovfVxyXG4gICAgPC9BbGlnbkhvcml6b250YWw+XHJcbiAgPC9kaXY+XHJcbiAgPGJyLz5cclxuICB7Lyo8YnV0dG9uIGNsYXNzTmFtZT1cImJ0blwiIG9uQ2xpY2s9eygpPT5cclxuICAgICAgaGlzdG9yeS5wdXNoKGAvJHtzY2hvb2x9L2NvdXJzZXMvJHtjb3Vyc2VJZH0vdGFicy8ke3RhYklkIHx8ICckJ30vdGFza3MvJHt0YXNrSWR9YCl9PlxyXG4gICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtYXJyb3ctbGVmdFwiIGFyaWEtaGlkZGVuPXt0cnVlfSAvPiZuYnNwO1xyXG4gICAge0xgQXZzbHV0YSByZWRpZ2VyaW5nYH1cclxuXHJcbiAgPC9idXR0b24+Ki99XHJcbjwvPik7XHJcblxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IHVzZUNvbnRleHQgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IFRhc2sgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IFd5c2l3eWcsIEFjdGlvbiB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy93eXNpd3lnJztcclxuaW1wb3J0IGFjdGlvbnNfc3dlZGlzaCBmcm9tICcuLi8uLi8uLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvd3lzaXd5Zy9hY3Rpb25zLXN2JztcclxuaW1wb3J0IHsgS2VkQmFja2VuZFJlcG8gfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBMLCBzaG93RXJyb3IgfSBmcm9tICcuLi8uLi8uLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IERpYWxvZ3NDb250ZXh0IH0gZnJvbSAnLi4vLi4vLi4vY29tbW9uL2RpYWxvZy1jb250ZXh0JztcclxuaW1wb3J0IHsgaXNLZWRTdGFmZiB9IGZyb20gJy4uLy4uLy4uL2xvZ2ljL2lzLWtlZC1zdGFmZic7XHJcbmltcG9ydCB7IFNlbGVjdFdvcmRCYW5rIH0gZnJvbSAnLi4vLi4vLi4vY29tbW9uL3NlbGVjdC13b3JkLWJhbmsnO1xyXG5pbXBvcnQgeyBzYXZlU2VsZWN0aW9uLCByZXN0b3JlU2VsZWN0aW9uIH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL3d5c2l3eWcvcmVzdG9yZS1zZWxlY3Rpb24nO1xyXG5pbXBvcnQgeyBjZmcgfSBmcm9tICcuLi8uLi8uLi8uLi8uLi9nbG9iYWxzL0tFRC5jZmcnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFRhc2tXb3JraW5nUHJvY2VkdXJlRWRpdG9yKHsgd3JpdGVBY2Nlc3MsIHRhc2ssIHJlcG8sIHN0ZXAgfTogeyB3cml0ZUFjY2VzczogYm9vbGVhbiwgdGFzazogVGFzaywgcmVwbzogS2VkQmFja2VuZFJlcG8sIHN0ZXA/OiBudW1iZXIgfSkge1xyXG4gIGNvbnN0IGRpYWxvZ0N0eCA9IHVzZUNvbnRleHQoRGlhbG9nc0NvbnRleHQpO1xyXG5cclxuICBjb25zdCBhY3Rpb25zOiAoUGFydGlhbDxBY3Rpb24+IHwgc3RyaW5nKVtdID0gW1xyXG4gICAgXCJvbGlzdFwiLFxyXG4gICAgXCJsaW5rXCIsXHJcbiAgICBcImltYWdlXCJcclxuICBdO1xyXG5cclxuICBpZiAod3JpdGVBY2Nlc3MgJiYgaXNLZWRTdGFmZigpICYmIHN0ZXAgIT0gbnVsbCkge1xyXG4gICAgLy8gVGhpcyB0YXNrIGlzIHB1dCBvbiBhIHN0ZXAuIFdlIGNvdWxkIGxpbmsgdG8gYSB3b3JkIGJhbms6XHJcbiAgICBhY3Rpb25zLnB1c2goe1xyXG4gICAgICBuYW1lOiBcImxpc3RXb3JkQmFua1wiLFxyXG4gICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1ib29rXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPicsXHJcbiAgICAgIHRpdGxlOiBMYEzDpG5rYSB0aWxsIG9yZGJhbmtgLFxyXG4gICAgICByZXN1bHQoZXYsIHd5c2l3eWcpIHtcclxuICAgICAgICBjb25zdCBzZWxlY3Rpb24gPSBzYXZlU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgZGlhbG9nQ3R4Lm9wZW5EaWFsb2coPFNlbGVjdFdvcmRCYW5rIHN1YmplY3Q9e3Rhc2suc3ViamVjdH0gc3RlcD17c3RlcH0gb25TZWxlY3Q9eyh7IG5hbWUsIHVybCB9KSA9PiB7XHJcbiAgICAgICAgICBkaWFsb2dDdHguY2xvc2VEaWFsb2coKTtcclxuICAgICAgICAgIHJlc3RvcmVTZWxlY3Rpb24oc2VsZWN0aW9uKTtcclxuICAgICAgICAgIGNvbnN0IGVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgICAgICAgICBlbGVtLmhyZWYgPSB1cmw7XHJcbiAgICAgICAgICBlbGVtLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG5hbWUpKTtcclxuICAgICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRIVE1MJywgZmFsc2UsIGVsZW0ub3V0ZXJIVE1MKTtcclxuICAgICAgICB9IH0gLz4pO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWxpbmtcIiBzdHlsZT1cImNvbG9yOnZhcigtLWNvbC1hY2NlbnQpXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPicsXHJcbiAgICAgICAgdGl0bGU6ICdSZXN1cnMgbMOkbmsnLFxyXG4gICAgICAgIHJlc3VsdDogKCkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgdXJsID0gd2luZG93LnByb21wdCgnQW5nZSBsw6Rua2VucyBVUkwgZsO2ciByZXN1cnNlbicpXHJcbiAgICAgICAgICBpZih1cmwpIHtcclxuICAgICAgICAgICAgLy9jaGVjayB0aGF0IHRoZSBlbnRlcmVkIFVSTCBpcyB0aGUgc2FtZSB3aXRoIHRoZSBjdXJyZW50IG9uZVxyXG4gICAgICAgICAgICBjb25zdCB1cmxPYmogPSBuZXcgVVJMKCcnLCB1cmwpO1xyXG4gICAgICAgICAgICBpZih1cmxPYmouaG9zdCAhPT0gd2luZG93LmxvY2F0aW9uLmhvc3QpIHtcclxuICAgICAgICAgICAgICBzaG93RXJyb3IoXCJJbnZhbGlkIFJlc291cmNlIFVSTFwiKTsgXHJcbiAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvL21hdGNoIHRoZSByZXNvdXJjZUlkXHJcbiAgICAgICAgICAgIHZhciByZWdleCA9IG5ldyBSZWdFeHAoXCIoW15cXC5dKykuKFteXFwuXSspKD89XFwuaHRtbClcIik7XHJcbiAgICAgICAgICAgIHZhciB1cmxSZXN1bHRzID0gcmVnZXguZXhlYyh1cmxPYmoucGF0aG5hbWUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYoIWNmZy5LRURfUkVTT1VSQ0VTX1VSTCkge1xyXG4gICAgICAgICAgICAgIHNob3dFcnJvcihcIlJlc291cmNlcyBVUkwgaXMgbm90IGNvbmZpZ3VyZWRcIik7IFxyXG4gICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL3JlcGxhY2UgY2ZnIHZhbHVlIHdpdGggdGhlIG9uZSBmcm9tIHRoZSBwcm92aWRlZCB1cmxcclxuICAgICAgICAgICAgdmFyIHZhbHVlRnJvbUNvbmZpZyA9IGNmZy5LRURfUkVTT1VSQ0VTX1VSTC5yZXBsYWNlKFwie3ZhbHVlfVwiLCB1cmxSZXN1bHRzWzBdKTtcclxuICAgICAgICAgICAgaWYodmFsdWVGcm9tQ29uZmlnKSBkb2N1bWVudC5leGVjQ29tbWFuZCgnY3JlYXRlTGluaycsIGZhbHNlLCB2YWx1ZUZyb21Db25maWcpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIDw+XHJcbiAgICA8aDQ+e0xgQXJiZXRzcHJvY2Vzc2B9PC9oND5cclxuICAgIDxXeXNpd3lnIGFjdGlvbnM9e2FjdGlvbnN9IGRlZmF1bHRBY3Rpb25zPXthY3Rpb25zX3N3ZWRpc2h9IHJlYWRPbmx5PXshd3JpdGVBY2Nlc3N9IGh0bWw9e3Rhc2sud29ya2luZ1Byb2NlZHVyZSB8fCBcIlwifSBvbkNoYW5nZT17aHRtbCA9PiB7XHJcbiAgICAgIHJlcG8udGFza3MudXBkYXRlKHRhc2ssIHsgd29ya2luZ1Byb2NlZHVyZTogaHRtbCB9KTtcclxuICAgIH19IC8+XHJcbiAgPC8+O1xyXG59XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IGxpdmVRdWVyeVZpZXcgfSBmcm9tICcuLi8uLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvbGl2ZS1xdWVyeS12aWV3JztcclxuaW1wb3J0IHsgVmFsdWUgfSBmcm9tICdrZWRiYWNrZW5kL29ic2VydmFibGUnO1xyXG5pbXBvcnQgeyBXaXRoR3JhcGhzLCBLZWRCYWNrZW5kUmVwbyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IENvdXJzZUluc3RhbmNlLCBUYXNrLCBDb3Vyc2VUYWIgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IFR3b0NvbHVtbnNQYWdlIH0gZnJvbSAnLi4vLi4vY29tbW9uL3R3by1jb2x1bW5zLXBhZ2UnO1xyXG5pbXBvcnQgeyBFZGl0VGFza0Zvcm0gfSBmcm9tICcuL3JpZ2h0LWNvbHVtbi9lZGl0LXRhc2stZm9ybSc7XHJcbmltcG9ydCB7IFRhc2tWaWV3ZXIgfSBmcm9tICcuL3ZpZXdlci90YXNrLXZpZXdlcic7XHJcbmltcG9ydCB7IExhenlDb250ZW50IH0gZnJvbSAnLi4vLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2xhenktY29udGVudCc7XHJcbmltcG9ydCB7IHJlc29sdmVSZXF1aXJlbWVudE9yZGVyIH0gZnJvbSAnLi4vLi4vbG9naWMvb3JkZXJlZC1yZXF1aXJlbWVudHMnO1xyXG5pbXBvcnQgeyBFZGl0UmVxdWlyZW1lbnRzIH0gZnJvbSAnLi9sZWZ0LWNvbHVtbi9lZGl0LXJlcXVpcmVtZW50cyc7XHJcbmltcG9ydCB7IGlzVGVhY2hlckF0U2Nob29sIH0gZnJvbSAnLi4vLi4vLi4vLi4vYWNjZXNzLWNvbnRyb2wnO1xyXG5pbXBvcnQgeyBpc0tlZFN0YWZmIH0gZnJvbSAnLi4vLi4vbG9naWMvaXMta2VkLXN0YWZmJztcclxuaW1wb3J0IHsgaXNFbXBsb3llZSB9IGZyb20gJy4uLy4uL2xvZ2ljL2lzLWVtcGxveWVlJztcclxuXHJcbmltcG9ydCB7IGdldElkc05vdENvdmVyZWRCeVJlcVJlZmVyZW5jaW5nRG9jcyB9IGZyb20gJy4uLy4uLy4uL2NvdXJzZS1idWlsZGVyL2NvdXJzZXMvYnVzaW5lc3MtbG9naWMnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQcm9wcyB7XHJcbiAgc2Nob29sOiBzdHJpbmc7XHJcbiAgY291cnNlOiBXaXRoR3JhcGhzPENvdXJzZUluc3RhbmNlLCBcInRhYnNcIiB8IFwiYmxvY2tzXCI+O1xyXG4gIGRyYWZ0SWQ6IHN0cmluZztcclxuICBicmFuY2g6IEtlZEJhY2tlbmRSZXBvXHJcbiAgYWN0aXZlVGFiOiBzdHJpbmc7XHJcbiAgY29udGVudElkOiBzdHJpbmc7XHJcbiAgdGFza0lkOiBzdHJpbmc7XHJcbiAgYmxvY2tJZDogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgVGFza0VkaXRvciA9IGxpdmVRdWVyeVZpZXcoKHtcclxuICBzY2hvb2wsXHJcbiAgY291cnNlLFxyXG4gIGFjdGl2ZVRhYixcclxuICBkcmFmdElkLFxyXG4gIGJyYW5jaCxcclxuICBjb250ZW50SWQsXHJcbiAgdGFza0lkLFxyXG4gIGJsb2NrSWQgfTogUHJvcHMpID0+XHJcbntcclxuICBjb25zdCB0aGVtZUNvdXJzZVRhYiA9IGNvdXJzZS50YWJzLmZpbmQodCA9PiB0LmlkID09PSBhY3RpdmVUYWIpO1xyXG4gIGNvbnN0IGludm9sdmVkVGFiSWRzID0gKHRoZW1lQ291cnNlVGFiICYmIHRoZW1lQ291cnNlVGFiLnRhYkNsYXNzID09PSAnbWlzc2lvbi10YWInKSA/XHJcbiAgICBjb3Vyc2UudGFicy5maWx0ZXIodGFiID0+IHRhYi50YWJDbGFzcyA9PT0gJ3N1YmplY3QtdGFiJykubWFwKHRhYiA9PiB0YWIuaWQpIDpcclxuICAgIFthY3RpdmVUYWJdO1xyXG4gIHJldHVybiBicmFuY2gudGFza3NcclxuICAgIC5pbmNsdWRlKFwiYWJpbGl0aWVzXCIsIFwiY2VudHJhbENvbnRlbnRcIiwgXCJrbm93bGVkZ2VSZXF1aXJlbWVudHNcIikuaW5jbHVkZUlkc09ubHkoKVxyXG4gICAgLy8uZGVidWcoKVxyXG4gICAgLmhhc0VkZ2VzRnJvbShbY29udGVudElkXSlcclxuICAgIC50b1ZhbHVlKClcclxuICAgIC5jb21iaW5lTGF0ZXN0KFxyXG4gICAgICBicmFuY2guY291cnNlVGFic1xyXG4gICAgICAgIC5pbmNsdWRlKFwiYWJpbGl0aWVzXCIsIFwiY2VudHJhbENvbnRlbnRcIiwgXCJrbm93bGVkZ2VSZXF1aXJlbWVudHNcIilcclxuICAgICAgICAuaW5jbHVkZUlkc09ubHkoKVxyXG4gICAgICAgIC5pZHMoaW52b2x2ZWRUYWJJZHMpKVxyXG4gICAgLnN3aXRjaE1hcCgoW3Rhc2tzLCBpbnZvbHZlZFRhYnNdKSA9PiB7XHJcbiAgICAgIGNvbnN0IHRhc2sgPSB0YXNrcy5maWx0ZXIodCA9PiB0LmlkID09PSB0YXNrSWQpWzBdO1xyXG4gICAgICBjb25zdCB1bmNvdmVyZWRJZHMgPSBnZXRJZHNOb3RDb3ZlcmVkQnlSZXFSZWZlcmVuY2luZ0RvY3MoaW52b2x2ZWRUYWJzLCB0YXNrcyk7XHJcbiAgICAgIHJldHVybiByZXNvbHZlUmVxdWlyZW1lbnRPcmRlcih0YXNrKS5tYXAodGFzayA9PiB7XHJcbiAgICAgICAgcmV0dXJuIDxUd29Db2x1bW5zUGFnZVxyXG4gICAgICAgICAgbGVmdD17PEVkaXRSZXF1aXJlbWVudHNcclxuICAgICAgICAgICAgcmVwbz17YnJhbmNofVxyXG4gICAgICAgICAgICB0YXNrPXt0YXNrfVxyXG4gICAgICAgICAgICB1bmNvdmVyZWRJZHM9e3VuY292ZXJlZElkc31cclxuICAgICAgICAgICAgdGFiSWRzPXtpbnZvbHZlZFRhYklkc31cclxuICAgICAgICAgICAgYmxvY2tJZD17YmxvY2tJZH0gLz59IC8vIFZpZCBcIlVwcGRyYWdcIiwgc2tpY2thIGluIGFsbGEgw6RtbmVzZmxpa2FycyBJRCBow6RyIVxyXG4gICAgICAgICAgcmlnaHQ9ezxFZGl0VGFza0Zvcm1cclxuICAgICAgICAgICAgcmVwbz17YnJhbmNofVxyXG4gICAgICAgICAgICBzY2hvb2w9e3NjaG9vbH1cclxuICAgICAgICAgICAgY291cnNlPXtjb3Vyc2V9XHJcbiAgICAgICAgICAgIGRyYWZ0SWQ9e2RyYWZ0SWR9XHJcbiAgICAgICAgICAgIHRhYklkPXthY3RpdmVUYWJ9XHJcbiAgICAgICAgICAgIHRhYj17aW52b2x2ZWRUYWJzLmZpbmQodCA9PiB0LmlkID09PSBhY3RpdmVUYWIpIGFzIENvdXJzZVRhYn1cclxuICAgICAgICAgICAgY29udGVudElkPXtjb250ZW50SWR9XHJcbiAgICAgICAgICAgIHdyaXRlQWNjZXNzPXtpc0VtcGxveWVlKHNjaG9vbCl9XHJcbiAgICAgICAgICAgIHRhc2s9e3Rhc2t9XHJcbiAgICAgICAgICAvPn1cclxuICAgICAgICAgIHJpZ2h0V2lkdGg9ezZ9XHJcbiAgICAgICAgLz5cclxuICAgICAgfSlcclxuICAgIH0pXHJcbn0pO1xyXG4iLCJpbXBvcnQgeyBUYXNrVHlwZSB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgTCB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuZXhwb3J0IGNvbnN0IHRhc2tUeXBlSGVhZGluZ3MgPSB7XHJcbiAgZXhlcmNpc2U6IExgw5Z2bmluZ3N1cHBnaWZ0YCxcclxuICB0YXNrOiBMYFVwcGdpZnRgLFxyXG4gIGFzc2lnbm1lbnQ6IExgSW5sw6RtbmluZ3N1cHBnaWZ0YFxyXG59O1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBsaXZlUXVlcnlWaWV3IH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2xpdmUtcXVlcnktdmlldyc7XHJcbmltcG9ydCB7IFZhbHVlIH0gZnJvbSAna2VkYmFja2VuZC9vYnNlcnZhYmxlJztcclxuaW1wb3J0IHsgV2l0aEdyYXBocywgS2VkQmFja2VuZFJlcG8gfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBDb3Vyc2VJbnN0YW5jZSwgVGFzayB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgVHdvQ29sdW1uc1BhZ2UgfSBmcm9tICcuLi8uLi8uLi9jb21tb24vdHdvLWNvbHVtbnMtcGFnZSc7XHJcbmltcG9ydCB7IEVkaXRUYXNrRm9ybSB9IGZyb20gJy4uL3JpZ2h0LWNvbHVtbi9lZGl0LXRhc2stZm9ybSc7XHJcbmltcG9ydCB7IFdlZWtQbGFubmVyIH0gZnJvbSAnLi4vLi4vLi4vLi4vd2Vla3BsYW5uZXIvd2Vla3BsYW5uZXInO1xyXG5pbXBvcnQgeyBUYXNrVmlld2VyIH0gZnJvbSAnLi90YXNrLXZpZXdlcic7XHJcbmltcG9ydCB7IExhenlDb250ZW50IH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2xhenktY29udGVudCc7XHJcbmltcG9ydCB7IHJlc29sdmVSZXF1aXJlbWVudE9yZGVyIH0gZnJvbSAnLi4vLi4vLi4vbG9naWMvb3JkZXJlZC1yZXF1aXJlbWVudHMnO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBSb3V0ZUNvbXBvbmVudFByb3BzLCB3aXRoUm91dGVyIH0gZnJvbSAncmVhY3Qtcm91dGVyJztcclxuaW1wb3J0IHsgQWxpZ25Ib3Jpem9udGFsIH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2FsaWduLWhvcml6b250YWwnO1xyXG5pbXBvcnQgZW52IGZyb20gJy4uLy4uLy4uLy4uLy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCBjZmcgZnJvbSAnLi4vLi4vLi4vLi4vLi4vZ2xvYmFscy9LRUQuY2ZnJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUHJvcHN7XHJcbiAgc2Nob29sOiBzdHJpbmc7XHJcbiAgY291cnNlSWQ6IHN0cmluZztcclxuICBsYXp5UmVwbzogVmFsdWU8S2VkQmFja2VuZFJlcG8+XHJcbiAgYWN0aXZlVGFiOiBzdHJpbmc7XHJcbiAgdGFza0lkOiBzdHJpbmc7XHJcbiAgZHJhZnRJZD86IHN0cmluZztcclxuICBjb250ZW50SWQ/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBUYXNrVmlld2VyUGFnZSA9IGxpdmVRdWVyeVZpZXcoKHByb3BzOiBQcm9wcykgPT5cclxuICBwcm9wcy5sYXp5UmVwby5tYXAocmVwbyA9PiA8VGFza1ZpZXdlclBhZ2VJbm5lciB7Li4uey4uLnByb3BzLCByZXBvfX0gLz4pKTtcclxuXHJcbmV4cG9ydCBjb25zdCBUYXNrVmlld2VyUGFnZUlubmVyID0gd2l0aFJvdXRlcihsaXZlUXVlcnlWaWV3KCh7XHJcbiAgc2Nob29sLCBjb3Vyc2VJZCwgYWN0aXZlVGFiLCByZXBvLCB0YXNrSWQsIGRyYWZ0SWQsIGNvbnRlbnRJZCwgaGlzdG9yeX06IFByb3BzICYge3JlcG86IEtlZEJhY2tlbmRSZXBvfSAmIFJvdXRlQ29tcG9uZW50UHJvcHMpID0+IChcclxuICAgIHJlcG8udGFza3NcclxuICAgICAgLmluY2x1ZGUoXCJhYmlsaXRpZXNcIiwgXCJjZW50cmFsQ29udGVudFwiLCBcImtub3dsZWRnZVJlcXVpcmVtZW50c1wiKVxyXG4gICAgICAuaWQodGFza0lkKVxyXG4gICAgICAubWFwKCh0YXNrKSA9PiA8VHdvQ29sdW1uc1BhZ2VcclxuICAgICAgICBsZWZ0PXs8TGF6eUNvbnRlbnQ+e3Jlc29sdmVSZXF1aXJlbWVudE9yZGVyKHRhc2spLm1hcCh0YXNrID0+IDw+XHJcbiAgICAgICAgICAgIDxUYXNrVmlld2VyXHJcbiAgICAgICAgICAgICAgc2Nob29sPXtzY2hvb2x9XHJcbiAgICAgICAgICAgICAgdGFzaz17dGFza31cclxuICAgICAgICAgICAgICBjb3Vyc2VJZD17Y291cnNlSWR9XHJcbiAgICAgICAgICAgICAgYWJpbGl0aWVzPXt0YXNrLmFiaWxpdGllc31cclxuICAgICAgICAgICAgICBjZW50cmFsQ29udGVudD17dGFzay5jZW50cmFsQ29udGVudH1cclxuICAgICAgICAgICAgICByZXF1aXJlbWVudHM9e3Rhc2sua25vd2xlZGdlUmVxdWlyZW1lbnRzfVxyXG4gICAgICAgICAgICAgIGZ1dHVyZUFiaWxpdGllcz17dGFzay5mdXR1cmVBYmlsaXRpZXN9XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgIHtkcmFmdElkICYmIGNvbnRlbnRJZCAmJiA8PlxyXG4gICAgICAgICAgICAgIDxociAvPlxyXG4gICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ0blwiXHJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKT0+aGlzdG9yeS5wdXNoKGAvJHtzY2hvb2x9L2NvdXJzZXMvJHtjb3Vyc2VJZH0vdGFicy8ke2FjdGl2ZVRhYn0vY29udGVudHMvJHtjb250ZW50SWR9L3Rhc2tzLyR7dGFza0lkfS9kcmFmdHMvJHtkcmFmdElkfS9lZGl0YCl9XHJcbiAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtbGcgZmEtcGVuY2lsXCIgLz4ge0xgRm9ydHPDpHR0IHJlZGlnZXJhYH1cclxuICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgPC8+fVxyXG4gICAgICAgICAgPC8+KX1cclxuICAgICAgICA8L0xhenlDb250ZW50Pn1cclxuICAgICAgICByaWdodD17PFdlZWtQbGFubmVyIGVudj17ZW52fSB2aWV3Q291cnNlVXJsPXtjZmcuS0VEX0NPVVJTRV9WSUVXRVJfVVJMfSAvPn1cclxuICAgICAgICByaWdodFdpZHRoPXs1fVxyXG4gICAgICAvPilcclxuKSkpO1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kUmVwbyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IFRhc2ssIEFiaWxpdHksIENlbnRyYWxDb250ZW50LCBLbm93bGVkZ2VSZXF1aXJlbWVudCB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgaXNFbXBsb3llZSB9IGZyb20gJy4uLy4uLy4uL2xvZ2ljL2lzLWVtcGxveWVlJztcclxuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xyXG5pbXBvcnQgeyBUYXNrQXNzaWdubWVudHMgfSBmcm9tICcuLi8uLi8uLi8uLi9jb3Vyc2Utdmlld2VyL2NvdXJzZS1wYWdlL3Rhc2stYXNzaWdubWVudHMnO1xyXG5pbXBvcnQgeyBBYmlsaXRpZXNCb3ggfSBmcm9tICcuLi8uLi8uLi8uLi9jb3Vyc2Utdmlld2VyL3N1YmNvbXBvbmVudHMvYWJpbGl0aWVzLWJveCc7XHJcbmltcG9ydCB7IENlbnRyYWxDb250ZW50Qm94IH0gZnJvbSAnLi4vLi4vLi4vLi4vY291cnNlLXZpZXdlci9zdWJjb21wb25lbnRzL2NlbnRyYWwtY29udGVudC1ib3gnO1xyXG5pbXBvcnQgeyBLbm93bGVkZ2VSZXF1aXJlbWVudHNCb3ggfSBmcm9tICcuLi8uLi8uLi8uLi9jb3Vyc2Utdmlld2VyL3N1YmNvbXBvbmVudHMva25vd2xlZGdlLXJlcXVpcmVtZW50cy10YWJsZSc7XHJcbmltcG9ydCB7IEwgfSBmcm9tICcuLi8uLi8uLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IHRhc2tUeXBlSGVhZGluZ3MgfSBmcm9tICcuLi90ZXh0cyc7XHJcbmltcG9ydCB7IEZ1dHVyZUFiaWxpdGllc0JveCB9IGZyb20gJy4uLy4uLy4uL2NvbW1vbi9mdXR1cmUtYWJpbGl0aWVzLWJveCc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHNjaG9vbDogc3RyaW5nO1xyXG4gIHRhc2s6IFRhc2s7XHJcbiAgY291cnNlSWQ6IHN0cmluZztcclxuICBhYmlsaXRpZXM6IEFiaWxpdHlbXTtcclxuICBjZW50cmFsQ29udGVudDogQ2VudHJhbENvbnRlbnRbXTtcclxuICByZXF1aXJlbWVudHM6IEtub3dsZWRnZVJlcXVpcmVtZW50W107XHJcbiAgZnV0dXJlQWJpbGl0aWVzOiBzdHJpbmdbXTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IFRhc2tWaWV3ZXIgPSAoeyBzY2hvb2wsIHRhc2ssIGNvdXJzZUlkLCBhYmlsaXRpZXMsIGNlbnRyYWxDb250ZW50LCByZXF1aXJlbWVudHMsIGZ1dHVyZUFiaWxpdGllcyB9OiBQcm9wcykgPT4ge1xyXG4gIGNvbnN0IGRlYWRsaW5lVG9vTGF0ZSA9IHRhc2suZGVhZGxpbmUgJiYgbW9tZW50KHRhc2suZGVhZGxpbmUpLmVuZE9mKCdkYXknKSA8IG1vbWVudCgpO1xyXG4gIFxyXG4gIHJldHVybiA8ZGl2PlxyXG4gICAgPGRpdiBjbGFzc05hbWU9XCJzdi10ZXh0LXBvcnRsZXQgc3YtdXNlLW1hcmdpbnMgc3Ytc2tpcC1zcGFjZXJcIj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdi10ZXh0LXBvcnRsZXQtY29udGVudFwiPlxyXG4gICAgICAgIDxoMSBjbGFzc05hbWU9XCJoMVwiPnt0YXNrLm5hbWV9PC9oMT5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICAgIDxkaXYgY2xhc3NOYW1lPVwic3YtaHRtbC1wb3J0bGV0IHN2LXBvcnRsZXRcIj5cclxuICAgICAge3Rhc2suY29udGVudCAmJiA8PlxyXG4gICAgICAgIDxkaXYgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3sgX19odG1sOiB0YXNrLmNvbnRlbnQgfX0gLz5cclxuICAgICAgPC8+fVxyXG4gICAgPC9kaXY+XHJcbiAgICB7dGFzay5kZXNjcmlwdGlvbiAmJiA8ZGl2IGNsYXNzTmFtZT1cInN2LWh0bWwtcG9ydGxldCBzdi1wb3J0bGV0XCI+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtbXCJrZWRfYm94ZWRcIiwgXCJ0YXNrQm94XCIsIHRhc2sudGFza1R5cGVdLmpvaW4oJyAnKX0gc3R5bGU9e3tjbGVhcjpcImJvdGhcIn19PlxyXG4gICAgICAgIDxoMj57dGFza1R5cGVIZWFkaW5nc1t0YXNrLnRhc2tUeXBlXSB8fCBMYFVwcGdpZnRgfTwvaDI+XHJcbiAgICAgICAgPGRpdiBkYW5nZXJvdXNseVNldElubmVySFRNTD17e19faHRtbDogdGFzay5kZXNjcmlwdGlvbn19IC8+XHJcbiAgICAgIDwvZGl2PiAgICAgIFxyXG4gICAgPC9kaXY+fVxyXG4gICAge3Rhc2sud29ya2luZ1Byb2NlZHVyZSAmJiA8ZGl2PlxyXG4gICAgICA8aDMgY2xhc3NOYW1lPVwiaDNcIj57TGBBcmJldHNwcm9jZXNzYH08L2gzPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInJpY2gtdGV4dC1yZWFkb25seVwiIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXt7X19odG1sOiB0YXNrLndvcmtpbmdQcm9jZWR1cmV9fSAvPlxyXG4gICAgPC9kaXY+fVxyXG4gICAge3Rhc2suZW1iZWRkZWRIdG1sICYmIDxkaXYgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3tfX2h0bWw6IHRhc2suZW1iZWRkZWRIdG1sfX0gLz59XHJcbiAgICA8YnIgLz5cclxuICAgIHt0YXNrLnRhc2tUeXBlID09PSAnYXNzaWdubWVudCcgPyA8PlxyXG4gICAgICA8aDI+SW5sw6RtbmluZ3N1cHBnaWZ0PC9oMj5cclxuICAgICAge2lzRW1wbG95ZWUoc2Nob29sKSA/XHJcbiAgICAgICAgPHA+SMOkciBrYW4gZHUgc29tIGzDpHJhcmUgc2UgZWxldmVybmFzIGlubMOkbW5hZGUgYXJiZXRlbi5cclxuICAgIDwvcD4gOiBpc0VtcGxveWVlKCkgPyA8cD5cclxuICAgICAgICB7TGBEZXR0YSDDpHIgZW4gaW5sw6RtbmluZ3N1cHBnaWZ0IG1lZCBpbmzDpG1uaW5nc2RhdHVtICR7bW9tZW50KHRhc2suZGVhZGxpbmUpLmZvcm1hdCgnWVlZWS1NTS1ERCcpfWB9XHJcbiAgICA8L3A+IDogPD5cclxuICAgICAgICAgIDxwPi4gTMOkbW5hIGluIGRpdHQgYXJiZXRlIHNvbSBlbiBwZGYsIGRvYyBlbGxlciBvZHQgZmlsXHJcbiAgICAgICAgICAgIGdlbm9tIGF0dCBkcmEgZGV0IHRpbGwgZsOkbHRldCB1bmRlci5cclxuICAgICAgPC9wPlxyXG4gICAgICAgICAge3Rhc2suZGVhZGxpbmUgPyA8cD48Yj5cclxuICAgICAgICAgICAgRGVuIGjDpHIgdXBwZ2lmdGVuIHtkZWFkbGluZVRvb0xhdGUgPyAnc2t1bGxlIHZhcml0IGlubMOkbW5hZCAnIDogJ3NrYWxsIHZhcmEgaW5sw6RtbmFkICd9XHJcbiAgICAgICAgICAgIHttb21lbnQodGFzay5kZWFkbGluZSkuZm9ybWF0KCdZWVlZLU1NLUREJyl9XHJcbiAgICAgICAgICA8L2I+PC9wPiA6IHVuZGVmaW5lZH1cclxuICAgICAgICA8Lz59XHJcbiAgICAgIDxUYXNrQXNzaWdubWVudHNcclxuICAgICAgICBjb3Vyc2VJZD17Y291cnNlSWR9XHJcbiAgICAgICAgdGFza0lkPXt0YXNrLmlkfVxyXG4gICAgICAgIHNjaG9vbD17c2Nob29sfVxyXG4gICAgICAvPlxyXG4gICAgICA8YnIgLz5cclxuICAgIDwvPiA6IHVuZGVmaW5lZH1cclxuICAgIDxkaXYgY2xhc3NOYW1lPVwic3YtaHRtbC1wb3J0bGV0IHN2LXBvcnRsZXQgc3Ytc2tpcC1zcGFjZXJcIj5cclxuICAgICAge2FiaWxpdGllcy5sZW5ndGggPiAwID8gPEFiaWxpdGllc0JveFxyXG4gICAgICAgIHRpdGxlPVwiRGVuIGjDpHIgdXBwZ2lmdGVuIGJlaGFuZGxhciBmw7ZsamFuZGUgZsO2cm3DpWdvclwiXHJcbiAgICAgICAgY2xhc3NOYW1lPVwibGFyZ2VyXCJcclxuICAgICAgICBoZWFkZXJPcGVuPXtmYWxzZX1cclxuICAgICAgICBhYmlsaXRpZXM9e2FiaWxpdGllc30gLz4gOiBudWxsfVxyXG5cclxuICAgICAge2NlbnRyYWxDb250ZW50Lmxlbmd0aCA+IDAgPyA8Q2VudHJhbENvbnRlbnRCb3hcclxuICAgICAgICB0aXRsZT1cIkRlbiBow6RyIHVwcGdpZnRlbiBiZWhhbmRsYXIgZsO2bGphbmRlIGNlbnRyYWxhIGlubmVow6VsbFwiXHJcbiAgICAgICAgY2xhc3NOYW1lPVwibGFyZ2VyXCJcclxuICAgICAgICBoZWFkZXJPcGVuPXtmYWxzZX1cclxuICAgICAgICBjZW50cmFsQ29udGVudD17Y2VudHJhbENvbnRlbnR9IC8+IDogbnVsbCB9XHJcblxyXG4gICAgICB7cmVxdWlyZW1lbnRzLmxlbmd0aCA+IDAgJiYgdGFzay50YXNrVHlwZSAhPT0gJ2V4ZXJjaXNlJyA/IDxLbm93bGVkZ2VSZXF1aXJlbWVudHNCb3hcclxuICAgICAgICB0aXRsZT1cIkkgZGVuIGjDpHIgdXBwZ2lmdGVuIGJlZMO2bXMgZsO2bGphbmRlIGt1bnNrYXBza3JhdlwiXHJcbiAgICAgICAgY2xhc3NOYW1lPVwibGFyZ2VyXCJcclxuICAgICAgICBoZWFkZXJPcGVuPXtmYWxzZX1cclxuICAgICAgICByZXF1aXJlbWVudHM9e3JlcXVpcmVtZW50c31cclxuICAgICAgICBpZHNUb1N1YmplY3RNYXA9e3Rhc2suaWRzVG9TdWJqZWN0TWFwfVxyXG4gICAgICAgIGV4cGxhaW5lZFJlcXVpcmVtZW50cz17dGFzay5leHBsYWluZWRSZXF1aXJlbWVudHN9XHJcbiAgICAgIC8+IDogbnVsbH1cclxuXHJcbiAgICAgIHtmdXR1cmVBYmlsaXRpZXMubGVuZ3RoID4gMCA/IDxGdXR1cmVBYmlsaXRpZXNCb3hcclxuICAgICAgICB0aXRsZT17TGBJIGRlbiBow6RyIHVwcGdpZnRlbiBiZWhhbmRsYXMgZsO2bGphbmRlIGZyYW10aWRzZsO2cm3DpWdvcmB9XHJcbiAgICAgICAgc2VsZWN0ZWRGQXM9e2Z1dHVyZUFiaWxpdGllc31cclxuICAgICAgLz46IG51bGx9XHJcbiAgICA8L2Rpdj5cclxuICAgIDxociAvPlxyXG4gICAgey8qdXNlclRhc2sgIT09IHVuZGVmaW5lZCAmJiA8ZGl2IGNsYXNzTmFtZT1cInRhc2tDb250YWluZXJcIj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgY2xhc3NOYW1lPXtgc2VsZWN0ZWRCb3gke3VzZXJUYXNrICYmIHVzZXJUYXNrLiRtZXRhICE9PSAnZGVsZXRpbmcnID8gJyBzZWxlY3RlZCcgOiAnJ31gfVxyXG4gICAgICAgICAgICBzdHlsZT17aXNXb3JraW5nID8geyBvcGFjaXR5OiAwLjUgfSA6IHt9fVxyXG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiAhaXNXb3JraW5nICYmIHRoaXMudG9nZ2xlVGFzaygpfT5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgICB7dXNlclRhc2sgP1xyXG4gICAgICAgICAgICBMYFRhIGJvcnQgdXBwZ2lmdGVuIGZyw6VuICR7Zm9yV2Vla1N0cmluZ31gIDpcclxuICAgICAgICAgICAgTGBMw6RnZyB0aWxsIHVwcGdpZnRlbiBpICR7Zm9yV2Vla1N0cmluZ31gfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PiovfVxyXG4gICAgPGhyIC8+XHJcbiAgICB7dGFzay5yZXNvdXJjZXMgJiYgdGFzay5yZXNvdXJjZXMubGVuZ3RoID4gMCAmJiA8ZGl2IGNsYXNzTmFtZT1cInN2LWh0bWwtcG9ydGxldCBzdi1wb3J0bGV0XCI+XHJcbiAgICAgIDxoMj5SZXN1cnNlciBrb3BwbGFkZSB0aWxsIHVwcGdpZnRlbjwvaDI+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGFza0NvbnRhaW5lclwiPlxyXG4gICAgICAgIHt0YXNrLnJlc291cmNlcy5tYXAoKHIsIGlkeCkgPT5cclxuICAgICAgICAgIDxkaXYga2V5PXtpZHh9IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWxcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICAgICAgICA8YSBocmVmPXtyLnVybH0+e3IubmFtZX08L2E+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKX1cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxiciAvPlxyXG4gICAgPC9kaXY+fVxyXG5cclxuICAgPGJyIC8+XHJcbiAgPC9kaXY+XHJcbn0iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBkYiB9IGZyb20gJy4uLy4uLy4uLy4uL2dsb2JhbHMvZGInO1xyXG5pbXBvcnQgeyBMYXp5Q29udGVudCB9IGZyb20gJy4uLy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9sYXp5LWNvbnRlbnQnO1xyXG5pbXBvcnQgeyBEZWx0YSwgRGVsdGFEb2MsIERlbHRhUmVsYXRpb24gfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IERlbHRhRG9jQm94IH0gZnJvbSAnLi9kZWx0YWRvYy1ib3gnO1xyXG5pbXBvcnQgeyBEZWx0YUxpbmtCb3ggfSBmcm9tICcuL2RlbHRhbGluay1ib3gnO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBicmFuY2hJZDogc3RyaW5nO1xyXG4gIGVkaXRhYmxlOiBib29sZWFuO1xyXG4gIHRhZz86IHN0cmluZztcclxufVxyXG5cclxuZnVuY3Rpb24gZGVsdGFLZXkoZGVsdGE6IERlbHRhKSB7XHJcbiAgaWYgKGRlbHRhLnR5cGUgPT09ICdtb2RpZnknKVxyXG4gICAgcmV0dXJuIGRlbHRhLnRhcmdldElkO1xyXG4gIHJldHVybiBkZWx0YS5zb3VyY2VJZCArIGRlbHRhLmxhYmVsICsgZGVsdGEudGFyZ2V0SWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBEZWx0YVZpZXcgKHticmFuY2hJZCwgdGFnLCBlZGl0YWJsZX06IFByb3BzKSB7XHJcbiAgbGV0IGRlbHRhcyA9IGRiLmJyYW5jaChicmFuY2hJZCkuZGVsdGFzO1xyXG4gIGlmICh0YWcpIHtcclxuICAgIGRlbHRhcyA9IGRlbHRhcy50YWdzKHRhZyk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gPExhenlDb250ZW50PlxyXG4gICAge2RlbHRhcy50b1ZhbHVlKCkubWFwKGRlbHRhcyA9PlxyXG4gICAgICBkZWx0YXMubGVuZ3RoID09PSAwID8gPGRpdj5cclxuICAgICAgICA8cCBzdHlsZT17e29wYWNpdHk6IDAuNSwgZm9udFN0eWxlOiAnaXRhbGljJ319Pnt0YWcgP1xyXG4gICAgICAgICAgTGBTa29sYW5zIHZlcnNpb24gw6RyIGlkZW50aXNrIG1lZCBvcmdpbmFsZXRgIDpcclxuICAgICAgICAgIExgRGV0IGZpbm5zIGluZ2Egw6RuZHJpbmdhciBhdHQgcHVibGljZXJhLmB9PC9wPlxyXG4gICAgICA8L2Rpdj4gOlxyXG5cclxuICAgICAgLy9cclxuICAgICAgLy8gTm9ybWFsIHZpZXcgKGxpc3QgYWxsIGNoYW5nZXMgKyBvcHRpb24gdG8gY2xlYXIgYWxsKVxyXG4gICAgICAvL1xyXG4gICAgICA8PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGFza0NvbnRhaW5lciBvZGQtZXZlblwiPlxyXG4gICAgICAgICAge2RlbHRhcy5tYXAoZGVsdGEgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBrZXkgPSBkZWx0YUtleShkZWx0YSk7XHJcbiAgICAgICAgICAgIHJldHVybiBkZWx0YS50eXBlID09PSAnbW9kaWZ5JyA/XHJcbiAgICAgICAgICAgICAgPERlbHRhRG9jQm94IGRlbHRhPXtkZWx0YX0gZWRpdGFibGU9e2VkaXRhYmxlfSBrZXk9e2tleX0gb25EZWxldGU9eygpPT57XHJcbiAgICAgICAgICAgICAgICAvLyBVbmRvIERlbHRhRG9jXHJcbiAgICAgICAgICAgICAgICB1bmRvRGVsdGFEb2MoZGVsdGEpO1xyXG4gICAgICAgICAgICAgIH19IC8+IDpcclxuICAgICAgICAgICAgICA8RGVsdGFMaW5rQm94IGRlbHRhPXtkZWx0YX0gZWRpdGFibGU9e2VkaXRhYmxlfSBrZXk9e2tleX0gb25EZWxldGU9eygpPT57XHJcbiAgICAgICAgICAgICAgICAvLyBVbmRvIExpbmtcclxuICAgICAgICAgICAgICAgIHVuZG9EZWx0YVJlbGF0aW9uKGRlbHRhKTtcclxuICAgICAgICAgICAgICB9fSAvPjtcclxuICAgICAgICAgIH0pfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiYnRuIGJ0bi1sYXJnZSBidG4td2FybmluZ1wiXHJcbiAgICAgICAgICBvbkNsaWNrPXsoKT0+e1xyXG4gICAgICAgICAgICBpZiAoY29uZmlybSh0YWcgP1xyXG4gICAgICAgICAgICAgIExgw4V0Z8OkcmRlbiDDpXRlcnN0w6RsbGV0IGt1cnNlbiB0aWxsIHN0YW5kYXJkLlxcblxcblZpbGwgZHUgZm9ydHPDpHR0YT9gIDogXHJcbiAgICAgICAgICAgICAgTGDDhXRnw6RyZGVuIHJhZGVyYXIgc2FtdGxpZ2Egw6RuZHJpbmdhciBzb20gw6RubnUgaW50ZSDDpHIgcHVibGljZXJhZGUuXFxuXFxuVmlsbCBkdSBmb3J0c8OkdHRhP2ApKVxyXG4gICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZGVsdGEgb2YgZGVsdGFzKSB7XHJcbiAgICAgICAgICAgICAgICAgIGlmIChkZWx0YS50eXBlID09PSAnbW9kaWZ5Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIHVuZG9EZWx0YURvYyhkZWx0YSk7XHJcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdW5kb0RlbHRhUmVsYXRpb24oZGVsdGEpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfX1cclxuICAgICAgICA+e3RhZyA/XHJcbiAgICAgICAgICBMYMOFdGVyc3TDpGxsIHRpbGwgb3JnaW5hbGV0YDpcclxuICAgICAgICAgIExgUmFkZXJhIGFsbGEgb3B1YmxpY2VyYWRlIMOkbmRyaW5nYXJgXHJcbiAgICAgICAgICB9PC9idXR0b24+XHJcbiAgICAgIDwvPlxyXG4gICAgKX1cclxuICA8L0xhenlDb250ZW50PlxyXG5cclxuICBmdW5jdGlvbiB1bmRvRGVsdGFSZWxhdGlvbihkZWx0YTogRGVsdGFSZWxhdGlvbikge1xyXG4gICAgZGIuYnJhbmNoKGJyYW5jaElkKS50YWJsZShkZWx0YS5zb3VyY2VUYWJsZSlcclxuICAgICAgLnVuZG9MaW5rKGRlbHRhLnNvdXJjZUlkLCBkZWx0YS5sYWJlbCwgZGVsdGEudGFyZ2V0SWQpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gdW5kb0RlbHRhRG9jKGRlbHRhOiBEZWx0YURvYykge1xyXG4gICAgY29uc3QgdW5kb2luZ3MgPSB7fTtcclxuICAgIE9iamVjdC5rZXlzKGRlbHRhLmRhdGEpLmZvckVhY2goa2V5ID0+IHtcclxuICAgICAgdW5kb2luZ3Nba2V5XSA9IHsgJHVuc2V0OiAwIH07XHJcbiAgICB9KTtcclxuICAgIGRiLmJyYW5jaChicmFuY2hJZCkudGFibGUoZGVsdGEudGFibGUpLnVwZGF0ZSh7XHJcbiAgICAgIGlkOiBkZWx0YS50YXJnZXRJZCxcclxuICAgICAgbmFtZTogZGVsdGEudGFyZ2V0TmFtZVxyXG4gICAgfSwgdW5kb2luZ3MpO1xyXG4gIH1cclxufSIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IERlbHRhRG9jIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBtYXhMZW5ndGgsIGNhcGl0YWxpemVGaXJzdCwgTCB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgbW9kZWxOYW1lcywgRnJpZW5kbHlQcm9wU3BlYywgZGVsdGFUeXBlcyB9IGZyb20gJy4vbW9kZWwtZnJpZW5kbHktbmFtZXMnO1xyXG5pbXBvcnQgeyBzaG9ydERhdGVGb3JtYXQgfSBmcm9tICcuLi8uLi8uLi9jb3Vyc2UtYnVpbGRlci91dGlscyc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIGRlbHRhOiBEZWx0YURvY1xyXG4gIGVkaXRhYmxlOiBib29sZWFuXHJcbiAgb25EZWxldGU6ICgpPT52b2lkXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBEZWx0YURvY0JveCAoe2RlbHRhLCBlZGl0YWJsZSwgb25EZWxldGV9OiBQcm9wcykge1xyXG4gIGNvbnN0IGVudGl0eU5hbWUgPSBkZWx0YS50YXJnZXROYW1lICYmIG1heExlbmd0aChkZWx0YS50YXJnZXROYW1lLCA4MCk7XHJcbiAgY29uc3QgY2xhc3NOYW1lcyA9IFtcInNjaG9vbENvdXJzZVwiXTtcclxuICBpZiAoZGVsdGEuJG1ldGEpIGNsYXNzTmFtZXMucHVzaChgZW50aXR5bWV0YS0ke2RlbHRhLiRtZXRhfWApO1xyXG5cclxuICBjb25zdCBmcmllbmRseUVudGl0eVR5cGUgPSBjYXBpdGFsaXplRmlyc3QoXHJcbiAgICBtb2RlbE5hbWVzLmVudGl0eVR5cGVzW2RlbHRhLnRhYmxlXSB8fCBkZWx0YS50YWJsZSk7XHJcblxyXG4gIGNvbnN0IGZyaWVuZGx5UHJvcHMgPSBPYmplY3Qua2V5cyhkZWx0YS5kYXRhKS5tYXAocHJvcCA9PlxyXG4gICAgKHtcclxuICAgICAgcHJvcFNwZWM6IG1vZGVsTmFtZXMucHJvcGVydHlOYW1lc1twcm9wXSBhcyBGcmllbmRseVByb3BTcGVjLFxyXG4gICAgICBwcm9wXHJcbiAgICB9KSk7XHJcbiAgY29uc3QgaGFzVW5rbm93blByb3BzID0gZnJpZW5kbHlQcm9wcy5zb21lKGZwID0+ICFmcC5wcm9wU3BlYyk7XHJcbiAgXHJcbiAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzLmpvaW4oJyAnKX0+XHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWxcIj5cclxuICAgICAge2VkaXRhYmxlID8gPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3AgcHVsbC1yaWdodFwiPlxyXG4gICAgICAgIDxhIGNsYXNzTmFtZT1cInJlbW92ZUl0ZW1cIiBvbkNsaWNrPXtvbkRlbGV0ZX0+PC9hPlxyXG4gICAgICA8L2Rpdj4gOiBudWxsfVxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgIHtlbnRpdHlOYW1lID9cclxuICAgICAgICAgIDxhPntmcmllbmRseUVudGl0eVR5cGV9IFwie2VudGl0eU5hbWV9XCI8L2E+IDpcclxuICAgICAgICAgIDxhPntmcmllbmRseUVudGl0eVR5cGV9PC9hPn1cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICAgIHtmcmllbmRseVByb3BzLmZpbHRlcigoe3Byb3BTcGVjfSkgPT4gcHJvcFNwZWMpLm1hcCgoe3Byb3BTcGVjOiBbdHlwZSwgcHJvcE5hbWVdLCBwcm9wfSkgPT5cclxuICAgICAgPGRpdiBrZXk9e3Byb3B9PlxyXG4gICAgICAgIHt0eXBlID09PSBkZWx0YVR5cGVzLk9ic2N1cmUgP1xyXG4gICAgICAgICAgPHA+e3Byb3BOYW1lfTwvcD4gOlxyXG4gICAgICAgICAgdHlwZSA9PT0gZGVsdGFUeXBlcy5IaWRkZW5DaGFuZ2UgPyBudWxsIDpcclxuICAgICAgICAgIDxwPntwcm9wTmFtZX06IHttb2RlbE5hbWVzLmdldFByb3BWYWwoZGVsdGEuZGF0YVtwcm9wXSl9PC9wPn1cclxuICAgICAgPC9kaXY+KX1cclxuICAgIHtoYXNVbmtub3duUHJvcHMgPyA8ZGl2PlxyXG4gICAgICA8cCB0aXRsZT17SlNPTi5zdHJpbmdpZnkoZGVsdGEuZGF0YSwgbnVsbCwgNCl9PntMYMOEbmRyaW5nYXIgaSBpbnRlcm5hIGVnZW5za2FwZXJgfTwvcD5cclxuICAgIDwvZGl2PiA6IG51bGx9XHJcbiAgICA8ZGl2PlxyXG4gICAgICA8cCBjbGFzc05hbWU9XCJzbWFsbFwiPlxyXG4gICAgICAgICAge3Nob3J0RGF0ZUZvcm1hdChkZWx0YS5kYXRlVGltZSl9IHtkZWx0YS5jb250cmlidXRvcnMuam9pbignLCAnKX1cclxuICAgICAgPC9wPlxyXG4gICAgPC9kaXY+XHJcbiAgPC9kaXY+O1xyXG59IiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgRGVsdGFSZWxhdGlvbiB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgbWF4TGVuZ3RoLCBMIH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBtb2RlbE5hbWVzLCBGcmllbmRseVByb3BTcGVjLCBkZWx0YVR5cGVzIH0gZnJvbSAnLi9tb2RlbC1mcmllbmRseS1uYW1lcyc7XHJcbmltcG9ydCB7IHNob3J0RGF0ZUZvcm1hdCB9IGZyb20gJy4uLy4uLy4uL2NvdXJzZS1idWlsZGVyL3V0aWxzJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgZGVsdGE6IERlbHRhUmVsYXRpb25cclxuICBlZGl0YWJsZTogYm9vbGVhblxyXG4gIG9uRGVsZXRlOiAoKT0+dm9pZFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gRGVsdGFMaW5rQm94ICh7ZGVsdGEsIGVkaXRhYmxlLCBvbkRlbGV0ZX06IFByb3BzKSB7XHJcbiAgY29uc3QgZW50aXR5TmFtZSA9IGRlbHRhLnRhcmdldE5hbWUgJiYgbWF4TGVuZ3RoKGRlbHRhLnRhcmdldE5hbWUsIDgwKTtcclxuICBjb25zdCBjbGFzc05hbWVzID0gW1wic2Nob29sQ291cnNlXCJdO1xyXG4gIGlmIChkZWx0YS4kbWV0YSkgY2xhc3NOYW1lcy5wdXNoKGBlbnRpdHltZXRhLSR7ZGVsdGEuJG1ldGF9YCk7XHJcblxyXG4gIGNvbnN0IGZyaWVuZGx5T3BlcmF0aW9uID0gbW9kZWxOYW1lcy5nZXRNb2RpZmllZExpbmtIZWFkaW5nKGRlbHRhKTtcclxuICBcclxuICByZXR1cm4gPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXMuam9pbignICcpfT5cclxuICAgIDxkaXYgY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbFwiPlxyXG4gICAgICB7ZWRpdGFibGUgPyA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcCBwdWxsLXJpZ2h0XCI+XHJcbiAgICAgICAgPGEgY2xhc3NOYW1lPVwicmVtb3ZlSXRlbVwiIG9uQ2xpY2s9e29uRGVsZXRlfT48L2E+XHJcbiAgICAgIDwvZGl2PiA6IG51bGx9XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAge2VudGl0eU5hbWUgP1xyXG4gICAgICAgICAgPGE+e2ZyaWVuZGx5T3BlcmF0aW9ufSBcIntlbnRpdHlOYW1lfVwiPC9hPiA6XHJcbiAgICAgICAgICA8YT57ZnJpZW5kbHlPcGVyYXRpb259PC9hPn1cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICAgIDxkaXY+XHJcbiAgICAgIDxwIGNsYXNzTmFtZT1cInNtYWxsXCI+XHJcbiAgICAgICAgICB7c2hvcnREYXRlRm9ybWF0KGRlbHRhLmRhdGVUaW1lKX0ge2RlbHRhLmNvbnRyaWJ1dG9yfVxyXG4gICAgICA8L3A+XHJcbiAgICA8L2Rpdj5cclxuICA8L2Rpdj47XHJcbn0iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBMYXp5Q29udGVudCB9IGZyb20gJy4uLy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9sYXp5LWNvbnRlbnQnO1xyXG5pbXBvcnQgeyBkYiwgQ291cnNlSW5zdGFuY2VzIH0gZnJvbSAnLi4vLi4vLi4vLi4vZ2xvYmFscy9kYic7XHJcbmltcG9ydCB7IExhenlCYW5uZXIsIEJhbm5lclByb3BzIH0gZnJvbSAnLi4vLi4vY29tbW9uL2Jhbm5lcic7XHJcbmltcG9ydCB7IEVtaXR0ZXIgfSBmcm9tICdrZWRiYWNrZW5kL29ic2VydmFibGUnO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBMaW5rIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XHJcbmltcG9ydCB7IFZlcnNpb25IaXN0b3J5Qm94IH0gZnJvbSAnLi92ZXJzaW9uLWhpc3RvcnktYm94JztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgc2Nob29sOiBzdHJpbmdcclxuICBjb3Vyc2VJZDogc3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBWZXJzaW9uSGlzdG9yeVBhZ2UgPSAoe3NjaG9vbCwgY291cnNlSWR9OiBQcm9wcykgPT4ge1xyXG4gIGNvbnN0IHNjaG9vbE9ic2VydmFibGUgPSBkYi5zY2hvb2xzLm5hbWUoc2Nob29sKS5zaW5nbGUoKTtcclxuICBjb25zdCBkcmFmdE9ic2VydmFibGUgPVxyXG4gICAgQ291cnNlSW5zdGFuY2VzLmdldEJyYW5jaElkKHNjaG9vbE9ic2VydmFibGUsIGNvdXJzZUlkKVxyXG4gICAgICAubWFwKGRyYWZ0SWQgPT4gZGIuYnJhbmNoKGRyYWZ0SWQpKTtcclxuXHJcbiAgY29uc3QgYnJhbmNoT2JzZXJ2YWJsZSA9XHJcbiAgICBzY2hvb2xPYnNlcnZhYmxlLm1hcChzY2hvb2wgPT4gZGIuYnJhbmNoKHNjaG9vbC5vZmZpY2lhbEJyYW5jaElkKSk7XHJcblxyXG4gIGNvbnN0IGJhbm5lclByb3BzT2JzZXJ2YWJsZSA9XHJcbiAgICBkcmFmdE9ic2VydmFibGUuc3dpdGNoTWFwKHJlcG8gPT4gcmVwby5jb3Vyc2VJbnN0YW5jZXMuaWQoY291cnNlSWQpLm1hcChjb3Vyc2UgPT4gKHtcclxuICAgICAgdGl0bGU6IGNvdXJzZS5uYW1lLFxyXG4gICAgICB0YWJzOiBbe25hbWU6IExgVmVyc2lvbnNoaXN0b3Jpa2AsIGtleTpgdmVyc2lvbmhpc3RvcnlgfV0sXHJcbiAgICAgIGJ1dHRvbnM6IFs8TGlua1xyXG4gICAgICAgIHRvPXtgLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlSWR9YH1cclxuICAgICAgICBrZXk9XCIkc2V0dGluZ3NcIlxyXG4gICAgICAgIHRpdGxlPXtMYFZpc2Ega3Vyc2VuYH1cclxuICAgICAgPlxyXG4gICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLWV5ZVwiIGFyaWEtaGlkZGVuPXt0cnVlfSAvPiZuYnNwO1xyXG4gICAgICA8L0xpbms+XVxyXG4gICAgfSBhcyBCYW5uZXJQcm9wcykpKTtcclxuICByZXR1cm4gPD5cclxuICAgIDxMYXp5QmFubmVyIGxhenlQcm9wcz17YmFubmVyUHJvcHNPYnNlcnZhYmxlfSAvPlxyXG4gICAgPExhenlDb250ZW50PntcclxuICAgICAgc2Nob29sT2JzZXJ2YWJsZS5tYXAoKHtkaXNwbGF5TmFtZTogc2Nob29sRGlzcGxheU5hbWUsIG9mZmljaWFsQnJhbmNoSWR9KSA9PiBcclxuICAgICAgICA8VmVyc2lvbkhpc3RvcnlCb3hcclxuICAgICAgICAgIGJyYW5jaFR5cGU9XCJzY2hvb2wtYnJhbmNoXCJcclxuICAgICAgICAgIGJyYW5jaElkPXtvZmZpY2lhbEJyYW5jaElkfVxyXG4gICAgICAgICAgY291cnNlSWQ9e2NvdXJzZUlkfVxyXG4gICAgICAgICAgaXNBZG1pbj17ZmFsc2V9XHJcbiAgICAgICAgICAvPlxyXG4gICAgKVxyXG4gIH08L0xhenlDb250ZW50PlxyXG4gIDwvPlxyXG5cclxuICAvKjxidXR0b25cclxuICAgIGNsYXNzTmFtZT1cImJ0biBidG4tbGFyZ2UgYnRuLXdhcm5pbmdcIlxyXG4gICAgb25DbGljaz17YXN5bmMgKCk9PntcclxuICAgICAgaWYgKGNvbmZpcm0oTGBBbGxhIG1vZGlmaWVyaW5nYXIgc29tIGdqb3J0cyBmw7ZyIHNrb2xhbiAke3NjaG9vbERpc3BsYXlOYW1lfSBrb21tZXIgYXR0IGbDtnJzdmlubmEuXHJcbiAgICAgIFxyXG4gICAgICBGb3J0c8OkdHQ/YCkpIHtcclxuICAgICAgICBjb25zdCBicmFuY2ggPSBhd2FpdCBicmFuY2hPYnNlcnZhYmxlLmxvYWQoKTtcclxuICAgICAgICBicmFuY2guY2xlYXJCcmFuY2goKTtcclxuICAgICAgICBkYi5icmFuY2hlcy5kZWxldGUoKVxyXG4gICAgICB9XHJcbiAgICB9fVxyXG4gID57TGDDhXRlcnN0w6RsbCBrdXJzZW4gdGlsbCBzdGFuZGFyZGB9PC9idXR0b24+ICovXHJcblxyXG59XHJcbiIsImltcG9ydCB7IEtlZFRhYmxlTmFtZSB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IEwgfSBmcm9tICcuLi8uLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IENvdXJzZUluc3RhbmNlLCBDb3Vyc2VCbG9jaywgQ291cnNlQ29udGVudCwgQ291cnNlVGFiLCBUYXNrLCBEZWx0YVJlbGF0aW9uIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5cclxuY29uc3QgVGV4dCA9IFN5bWJvbCgpO1xyXG5jb25zdCBDaGVja2JveCA9IFN5bWJvbCgpO1xyXG5jb25zdCBPYnNjdXJlID0gU3ltYm9sKCk7XHJcbmNvbnN0IEhpZGRlbkNoYW5nZSA9IFN5bWJvbCgpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGRlbHRhVHlwZXMgPSB7XHJcbiAgVGV4dCxcclxuICBDaGVja2JveCxcclxuICBPYnNjdXJlLFxyXG4gIEhpZGRlbkNoYW5nZVxyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgRnJpZW5kbHlQcm9wU3BlYyA9IFtQcm9wZXJ0eVR5cGUsIHN0cmluZ107XHJcblxyXG50eXBlIFByb3BlcnR5VHlwZSA9IHR5cGVvZiBUZXh0IHwgdHlwZW9mIENoZWNrYm94IHwgdHlwZW9mIE9ic2N1cmUgfCB0eXBlb2YgSGlkZGVuQ2hhbmdlO1xyXG50eXBlIFByb3BlcnR5TWFwPFQ+ID0ge1tQIGluIGtleW9mIFRdPzogRnJpZW5kbHlQcm9wU3BlY307XHJcblxyXG5pbnRlcmZhY2UgTW9kZWxOYW1lcyB7XHJcbiAgZW50aXR5VHlwZXM6IHtbdGFibGVOYW1lT3JMYWJlbCBpbiBLZWRUYWJsZU5hbWVdPzogc3RyaW5nfVxyXG4gIG1vZGlmaWVkTGlua3M6IHtbbGFiZWw6IHN0cmluZ106IFtzdHJpbmcsIHN0cmluZ119XHJcbiAgcHJvcGVydHlOYW1lczpcclxuICAgIFByb3BlcnR5TWFwPENvdXJzZUluc3RhbmNlPiAmXHJcbiAgICBQcm9wZXJ0eU1hcDxDb3Vyc2VCbG9jaz4gJlxyXG4gICAgUHJvcGVydHlNYXA8Q291cnNlQ29udGVudD4gJlxyXG4gICAgUHJvcGVydHlNYXA8Q291cnNlVGFiPiAmXHJcbiAgICBQcm9wZXJ0eU1hcDxUYXNrPlxyXG4gIGdldE1vZGlmaWVkTGlua0hlYWRpbmcoZGVsdGFSZWxhdGlvbjogRGVsdGFSZWxhdGlvbik6IHN0cmluZztcclxuICBnZXRQcm9wVmFsKHA6IGFueSk6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IG1vZGVsTmFtZXM6IE1vZGVsTmFtZXMgPSB7XHJcbiAgZW50aXR5VHlwZXM6IHtcclxuICAgIGNvdXJzZUJsb2NrczogTGBrdXJzYmxvY2tgLFxyXG4gICAgY291cnNlQ29udGVudHM6IExgaW5uZWjDpWxsc3J1dGFgLFxyXG4gICAgY291cnNlSW5zdGFuY2VzOiBMYGt1cnNgLFxyXG4gICAgY291cnNlVGFiczogTGBmbGlrYCxcclxuICAgIHNjaG9vbHM6IExgc2tvbGFgLFxyXG4gICAgdGFza3M6IExgdXBwZ2lmdGAsXHJcbiAgfSxcclxuICBtb2RpZmllZExpbmtzOiB7XHJcbiAgICB0YWJzOiBbTGBUaWxsYWdkIGZsaWtgLCBMYEJvcnR0YWdlbiBmbGlrYF0sXHJcbiAgICBibG9ja3M6IFtMYFRpbGxhZ3QgYmxvY2tgLCBMYEJvcnR0YWdldCBibG9ja2BdLFxyXG4gICAgYWJpbGl0aWVzOiBbTGBUaWxsYWdkIGbDtnJtw6VnYWAsIExgQm9ydHRhZ2VuIGbDtnJtw6VnYWBdLFxyXG4gICAgY2VudHJhbENvbnRlbnQ6IFtMYFRpbGxhZ3QgY2VudHJhbHQgaW5uZWjDpWxsYCwgTGBCb3J0dGFnZXQgY2VudHJhbHQgaW5uZWjDpWxsYF0sXHJcbiAgICBrbm93bGVkZ2VSZXF1aXJlbWVudHM6IFtMYFRpbGxhZ3Qga3Vuc2thcHNrcmF2YCwgTGBCb3J0dGFnZXQga3Vuc2thcHNrcmF2YF0sXHJcbiAgICB0YXNrczogW0xgVGlsbGFnZCB1cHBnaWZ0YCwgTGBCb3J0dGFnZW4gdXBwZ2lmdGBdLFxyXG4gICAgY29udGVudHM6IFtMYFRpbGxhZ2QgaW5uZWjDpWxsc3J1dGFgLCBMYEJvcnR0YWdlbiBpbm5laMOlbGxzcnV0YWBdXHJcbiAgfSxcclxuICBwcm9wZXJ0eU5hbWVzOiB7XHJcbiAgICBhbGxvd0FkZFRhYnM6IFtDaGVja2JveCwgTGDDhG5kcmF0IG9tIHRpbGzDpGdnIGF2IGZsaWsgc2thIHZhcmEgdGlsbMOldGV0YF0sXHJcbiAgICBhbGxvd1JlbW92ZVRhYnM6IFtDaGVja2JveCwgTGDDhG5kcmF0IG9tIGJvcnR0YWduaW5nIGF2IGZsaWsgc2thIHZhcmEgdGlsbMOldGV0YF0sXHJcbiAgICBhbGxvd1Jlb3JkZXJUYWJzOiBbQ2hlY2tib3gsIExgw4RuZHJhdCBvbSBkZXQgc2thIHZhIHRpbGzDpXRldCBhdHQgw6RuZHJhIG9yZG5pbmcgcMOlIGZsaWtgXSxcclxuICAgIGFzc2lnbm1lbnQ6IFtDaGVja2JveCwgTGDDhG5kcmFkIGZsYWdnYSBmw7ZyIGlubMOkbW5pbmdzdXBwZ2lmdGBdLFxyXG4gICAgY29tbW9uTGVhcm5pbmdHb2FsczogW1RleHQsIExgw4RuZHJhZGUgZ2VtZW5zYW1tYSBsw6RyYW5kZW3DpWxgXSxcclxuICAgIGNvbnRlbnQ6IFtUZXh0LCBMYMOEbmRyYWQgaW5uZWjDpWxsc3RleHRgXSxcclxuICAgIGNyZWF0ZWRCeTogW0hpZGRlbkNoYW5nZSwgTGBTa2FwYWQgYXZgXSxcclxuICAgIGNyZWF0ZWREYXRlOiBbSGlkZGVuQ2hhbmdlLCBMYFNrYXBhZCBkYXR1bWBdLFxyXG4gICAgZGF0ZVRpbWU6IFtPYnNjdXJlLCBMYMOEbmRhdCBkYXR1bSAvIHRpZGBdLFxyXG4gICAgZGVhZGxpbmU6IFtUZXh0LCBMYMOEbmRyYXQgaW5sw6RtbmluZ3NkYXR1bWBdLFxyXG4gICAgZGVzY3JpcHRpb246IFtUZXh0LCBMYMOEbmRyYWQgYmVza3Jpdm5pbmdgXSxcclxuICAgIGVtYmVkZGVkSHRtbDogW09ic2N1cmUsIExgTGFndCB0aWxsIGluYsOkZGRhZCBIVE1MYF0sXHJcbiAgICBleHBsYWluZWRSZXF1aXJlbWVudHM6IFtPYnNjdXJlLCBMYExhZ3QgdGlsbCBlZ25hIGbDtnJrbGFyaW5nYXIgYXYga3Vuc2thcHNrcmF2YF0sXHJcbiAgICBmdXR1cmVBYmlsaXRpZXM6IFtUZXh0LCBMYMOEbmRyYWRlIGZyYW10aWRzZsO2cm3DpWdvcmBdLFxyXG4gICAgaGFzQ29tbW9uTGVhcm5pbmdHb2FsczogW0NoZWNrYm94LCBMYMOEbmRyYWQgaW5zdMOkbGxuaW5nIGbDtnIgZ2VtZW5zYW1tYSBsw6RyYW5kZW3DpWxgXSxcclxuICAgIGhpZGRlbjogW0NoZWNrYm94LCBMYMOEbmRyYWQgZmxhZ2dhIFwiZ8O2bWRcImBdLCAvLyBUaGlzIHByb3Agc2hvdWxkIG5vdCBiZSB1c2VkIEkgdGhpbmtcclxuICAgIGhpZGRlblRhc2tzOiBbT2JzY3VyZSwgTGDDhG5kcmF0IGxpc3RhbiBww6UgZ8O2bWRhIHVwcGdpZnRlcmBdLCAvLyBJIHRoaW5rIHRoaXMgcHJvcCBzaG91bGQgbm90IGJlIHVzZWRcclxuICAgIGh0bWw6IFtPYnNjdXJlLCBMYMOEbmRyYXQgaW5uZWjDpWxsYF0sXHJcbiAgICBsZWFybmluZ0dvYWw6IFtUZXh0LCBMYEzDpHJhbmRlbcOlbGBdLFxyXG4gICAgbG9ja0RlbGV0ZTogW0NoZWNrYm94LCBMYMOEbmRyYXQgZmxhZ2dhOiBcImzDpXMgZnLDpW4gYm9ydHRhZ25pbmdcImBdLFxyXG4gICAgbG9ja2VkOiBbQ2hlY2tib3gsIExgw4RuZHJhZCBmbGFnZ2E6IFwiZsO2cmJqdWQgw6RuZHJpbmcgYXYgZmxpa2FyXCJgXSxcclxuICAgIG1pZ3JhdGVkVGV4dHM6IFtPYnNjdXJlLCBMYMOEbmRyaW5nYXIgaSBtaWdyZXJhZGUgdGV4dGVyIGZyw6VuIHNrb2x2ZXJrZXRgXSxcclxuICAgIG1vZGlmaWVkQnk6IFtIaWRkZW5DaGFuZ2UsIExgw4RuZHJhZCBhdmBdLFxyXG4gICAgbW9kaWZpZWREYXRlOiBbSGlkZGVuQ2hhbmdlLCBMYMOEbmRyaW5nc2RhdHVtYF0sXHJcbiAgICB0YXNrT3JkZXI6IFtPYnNjdXJlLCBMYMOEbmRyYWQgb3JkbmluZyBww6UgdXBwZ2lmdGVyYF0sXHJcbiAgICBuYW1lOiBbVGV4dCwgTGDDhG5kcmF0IG5hbW5gXSxcclxuICAgIG9yZGVyOiBbT2JzY3VyZSwgTGDDhG5kcmFkIG9yZG5pbmdgXSxcclxuICAgIHJlc291cmNlczogW09ic2N1cmUsIExgw4RuZHJhZGUgaSByZXN1cnNlcmBdLFxyXG4gICAgc2Nob29sOiBbVGV4dCwgTGBTa29sYWBdLCAvLyBNdXN0IG5ldmVyIGJlIHVuZG9uZSBpc29sYXRlZCB3aXRob3V0IGxvZ2ljXHJcbiAgICBzdGVwTm86IFtUZXh0LCBMYFN0ZWdudW1tZXJgXSwgLy8gTXVzdCBuZXZlciBiZSB1bmRvbmUgaXNvbGF0ZWQgd2l0aG91dCBsb2dpY1xyXG4gICAgc3RlcE51bWJlcnM6IFtUZXh0LCBMYFN0ZWdudW1tZXJgXSwvLyBNdXN0IG5ldmVyIGJlIHVuZG9uZSBpc29sYXRlZCB3aXRob3V0IGxvZ2ljXHJcbiAgICBzdWJqZWN0OiBbVGV4dCwgTGDDhG1uZWBdLCAvLyBNdXN0IG5ldmVyIGJlIHVuZG9uZSBpc29sYXRlZCB3aXRob3V0IGxvZ2ljXHJcbiAgICBzdWJqZWN0czogW09ic2N1cmUsIExgw4RtbmVuYF0sIC8vIE11c3QgbmV2ZXIgYmUgdW5kb25lIGlzb2xhdGVkIHdpdGhvdXQgbG9naWNcclxuICAgIHRhYkNsYXNzOiBbVGV4dCwgTGBUeXAgYXYgZmxpa2BdLCAvLyBNdXN0IG5ldmVyIGJlIHVuZG9uZSBpc29sYXRlZCB3aXRob3V0IGxvZ2ljXHJcbiAgICB0YWJUaXRsZTogW0hpZGRlbkNoYW5nZSwgTGBGbGlrbmFtbmBdLCAvLyBEZXByZWNhdGVkXHJcbiAgICB0YXNrVHlwZTogW1RleHQsIExgVXBwZ2lmdHN0eXBgXSxcclxuICAgIHVybDogW1RleHQsIExgVXJsYF0sXHJcbiAgICB3b3JraW5nUHJvY2VkdXJlOiBbVGV4dCwgTGBBcmJldHNwcm9jZXNzYF0sXHJcbiAgICB5b3V0dWJlSWQ6IFtPYnNjdXJlLCBMYFlvdXR1YmUgSURgXVxyXG4gIH0sXHJcbiAgZ2V0TW9kaWZpZWRMaW5rSGVhZGluZyhkZWx0YTogRGVsdGFSZWxhdGlvbikge1xyXG4gICAgY29uc3QgaGVhZGluZ1NwZWMgPSBtb2RlbE5hbWVzLm1vZGlmaWVkTGlua3NbZGVsdGEubGFiZWxdO1xyXG4gICAgaWYgKCFoZWFkaW5nU3BlYykge1xyXG4gICAgICByZXR1cm4gZGVsdGEudHlwZSA9PT0gJ2FkZCcgPyBMYFRpbGxhZ3Qgb2JqZWt0YCA6XHJcbiAgICAgICBkZWx0YS50eXBlID09PSAncmVtb3ZlJyA/IExgQm9ydHRhZ2V0IG9iamVrdGAgOlxyXG4gICAgICAgTGDDhW5ncmFkIGzDpG5rbmluZ2A7IC8vIFNob3VsZCBuZXZlciBiZVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRlbHRhLnR5cGUgPT09ICdhZGQnID9cclxuICAgICAgaGVhZGluZ1NwZWNbMF0gOiBkZWx0YS50eXBlID09PSAncmVtb3ZlJyA/XHJcbiAgICAgIGhlYWRpbmdTcGVjWzFdIDogTGDDhW5ncmFkIGzDpG5rbmluZ2A7IC8vIFNob3VsZCBuZXZlciBiZVxyXG4gIH0sXHJcbiAgZ2V0UHJvcFZhbChwKSB7XHJcbiAgICBzd2l0Y2ggKHApIHtcclxuICAgICAgY2FzZSB0cnVlOiByZXR1cm4gTGBQw6VzbGFnZXRgO1xyXG4gICAgICBjYXNlIGZhbHNlOiByZXR1cm4gTGBBdnNsYWdldGA7XHJcbiAgICAgIGNhc2UgJ3ByaW1hcnknOiByZXR1cm4gTGBHcnVuZHNrb2xhYDtcclxuICAgICAgY2FzZSAnZ3ltbmFzaXVtJzogcmV0dXJuIExgR3ltbmFzaWVza29sYWA7XHJcbiAgICAgIGNhc2UgJ2V4ZXJjaXNlJzogcmV0dXJuIExgw5Z2bmluZ3N1cHBnaWZ0YDtcclxuICAgICAgY2FzZSAndGFzayc6IHJldHVybiBMYFVwcGdpZnRgO1xyXG4gICAgICBjYXNlICdhc3NpZ25tZW50JzogcmV0dXJuIExgSW5sw6RtbmluZ3N1cHBnaWZ0YDtcclxuICAgICAgY2FzZSAndGhlbWUtY291cnNlJzogcmV0dXJuIExgVGVtYWt1cnNgO1xyXG4gICAgICBjYXNlICdzdGVwLWNvdXJzZSc6IHJldHVybiBMYFN0ZWdrdXJzYDtcclxuICAgICAgY2FzZSAnaW50cm8tdGFiJzogcmV0dXJuIExgSW50cm9kdWt0aW9uc2ZsaWtgO1xyXG4gICAgICBjYXNlICdydW4tdXAtdGFiJzogcmV0dXJuIExgVXBwdGFrdGA7XHJcbiAgICAgIGNhc2UgJ3N1YmplY3QtdGFiJzogcmV0dXJuIExgw4RtbmVzZmxpa2A7XHJcbiAgICAgIGNhc2UgJ21pc3Npb24tdGFiJzogcmV0dXJuIExgVXBwZHJhZ3NmbGlrYDtcclxuICAgICAgY2FzZSAnY29udGVudC10YWInOiByZXR1cm4gTGBJbm5laMOlbGxzZmxpa2A7XHJcbiAgICAgIGNhc2UgJ3RlYWNoZXItdGFiJzogcmV0dXJuIExgTMOkcmFyc2lkYWA7XHJcbiAgICAgIGNhc2UgJ3dvcmQtYmFuay10YWInOiByZXR1cm4gTGBPcmRiYW5rYDtcclxuICAgICAgZGVmYXVsdDoge1xyXG4gICAgICAgIGlmIChwID09IG51bGwpIHJldHVybiBMYE5vbGxzdMOkbGx0YDtcclxuICAgICAgICBpZiAocCA9PT0gXCJcIikgcmV0dXJuIExgKHRvbXQpYDtcclxuICAgICAgICBpZiAodHlwZW9mIHAgPT09ICdzdHJpbmcnKSByZXR1cm4gcDtcclxuICAgICAgICBpZiAocC5zdWJqZWN0TmFtZSkgcmV0dXJuIHAuc3ViamVjdE5hbWU7XHJcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHAsIG51bGwsIDIpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59IiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgTCB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgRGVsdGFWaWV3IH0gZnJvbSAnLi9kZWx0YS12aWV3JztcclxuXHJcbnR5cGUgUHJvcHMgPSB7XHJcbiAgYnJhbmNoSWQ6IHN0cmluZ1xyXG4gIGJyYW5jaFR5cGU6ICdzY2hvb2wtYnJhbmNoJ1xyXG4gIGNvdXJzZUlkOiBzdHJpbmdcclxuICBpc0FkbWluOiBib29sZWFuXHJcbn0gfCB7XHJcbiAgYnJhbmNoSWQ6IHN0cmluZ1xyXG4gIGJyYW5jaFR5cGU6ICdkcmFmdC1icmFuY2gnXHJcbiAgaXNBZG1pbjogYm9vbGVhblxyXG59XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFZlcnNpb25IaXN0b3J5Qm94KHByb3BzOiBQcm9wcykge1xyXG4gIGNvbnN0IHRpdGxlID0gcHJvcHMuYnJhbmNoVHlwZSA9PT0gJ3NjaG9vbC1icmFuY2gnID9cclxuICAgIDxoMj57TGBTa29sYW5zIMOkbmRyaW5nYXJgfTwvaDI+IDpcclxuICAgIDxoMz57TGBPcHVibGljZXJhZGUgw6RuZHJpbmdhcmB9PC9oMz47XHJcblxyXG4gIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cImtlZF9ib3hlZFwiPlxyXG4gICAge3RpdGxlfVxyXG4gICAgPERlbHRhVmlld1xyXG4gICAgICBicmFuY2hJZD17cHJvcHMuYnJhbmNoSWR9XHJcbiAgICAgIGVkaXRhYmxlPXshcHJvcHMuaXNBZG1pbn1cclxuICAgICAgdGFnPXtwcm9wcy5icmFuY2hUeXBlID09PSAnc2Nob29sLWJyYW5jaCcgPyBwcm9wcy5jb3Vyc2VJZCA6IG51bGx9IC8+XHJcbiAgPC9kaXY+O1xyXG59XHJcbiIsImltcG9ydCB7IERvY3VtZW50LCBDb3Vyc2UsIEtub3dsZWRnZVJlcXVpcmVtZW50LCBDb3Vyc2VNb2R1bGUsIFRhc2ssIFNvZnREb2N1bWVudEFjY2VzcyB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgZmxhdHRlbiwgTCB9IGZyb20gXCIuLi8uLi8uLi91dGlscy91dGlsc1wiO1xyXG5pbXBvcnQgeyBXaXRoR3JhcGhzIH0gZnJvbSAna2VkYmFja2VuZC9yZXBvJztcclxuaW1wb3J0IHsgZ2V0RW1haWxGcm9tRG9jQWNjZXNzIH0gZnJvbSAnLi4vdXRpbHMnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFVuY292ZXJlZEtub3dsZWRnZVJlcXVpcmVtZW50cyhjb3Vyc2U6IENvdXJzZSkge1xyXG4gIGNvbnN0IHVuY292ZXJlZFJlcXVpcmVtZW50cyA9IGNvdXJzZS5rbm93bGVkZ2VSZXF1aXJlbWVudHMucmVkdWNlKChyZXN1bHQsIGl0ZW0pID0+IHtcclxuICAgIHJlc3VsdFtpdGVtLmlkXSA9IGl0ZW07XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH0sIHt9IGFzIHsgW2lkOiBzdHJpbmddOiBLbm93bGVkZ2VSZXF1aXJlbWVudCB9KTtcclxuXHJcbiAgY291cnNlLnRhc2tzLmZvckVhY2godGFzayA9PiB7XHJcbiAgICB0YXNrLmtub3dsZWRnZVJlcXVpcmVtZW50cy5mb3JFYWNoKGtyID0+IHtcclxuICAgICAgZGVsZXRlIHVuY292ZXJlZFJlcXVpcmVtZW50c1trci5pZF07XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIE9iamVjdC5rZXlzKHVuY292ZXJlZFJlcXVpcmVtZW50cykubWFwKGlkID0+IHVuY292ZXJlZFJlcXVpcmVtZW50c1tpZF0pO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFJlcXNSZWZlcmVuY2luZ0RvYyB7XHJcbiAga25vd2xlZGdlUmVxdWlyZW1lbnRzOiBBcnJheTx7aWQ6IHN0cmluZ30+XHJcbiAgYWJpbGl0aWVzOiBBcnJheTx7aWQ6IHN0cmluZ30+XHJcbiAgY2VudHJhbENvbnRlbnQ6IEFycmF5PHtpZDogc3RyaW5nfT5cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldElkc05vdENvdmVyZWRCeVRhc2tzKGNvdXJzZTogQ291cnNlKSA6IHtbaWQ6IHN0cmluZ106IHRydWV9IHtcclxuICByZXR1cm4gZ2V0SWRzTm90Q292ZXJlZEJ5UmVxUmVmZXJlbmNpbmdEb2NzKFxyXG4gICAgW2NvdXJzZSBhcyBXaXRoR3JhcGhzPENvdXJzZSwgXCJhYmlsaXRpZXNcIiB8IFwiY2VudHJhbENvbnRlbnRcIiB8IFwia25vd2xlZGdlUmVxdWlyZW1lbnRzXCI+XSxcclxuICAgIGNvdXJzZS50YXNrcyBhcyBXaXRoR3JhcGhzPFRhc2ssIFwiYWJpbGl0aWVzXCIgfCBcImNlbnRyYWxDb250ZW50XCIgfCBcImtub3dsZWRnZVJlcXVpcmVtZW50c1wiPltdKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldElkc05vdENvdmVyZWRCeVJlcVJlZmVyZW5jaW5nRG9jcyhcclxuICB0ZW1wbGF0ZXM6IFJlcXNSZWZlcmVuY2luZ0RvY1tdLFxyXG4gIGRvY3NCZWluZ0NoZWNrZWQ6IFJlcXNSZWZlcmVuY2luZ0RvY1tdKSA6IHtbaWQ6IHN0cmluZ106IHRydWV9XHJcbntcclxuICBjb25zdCB1bmNvdmVyZWRJZHMgPSB7fTtcclxuICAvLyAxLiBNYXJrIHRoZSBpZHMgb2YgYWxsIGtub3dsZWRnZSByZXF1aXJlbWVudHMsIGFiaWxpdGllcyBhbmQgY2VudHJhbCBjb250ZW50IGZvciB0aGlzIGNvdXJzZTpcclxuICB0ZW1wbGF0ZXMuZm9yRWFjaChjb3Vyc2UgPT4ge1xyXG4gICAgY291cnNlLmtub3dsZWRnZVJlcXVpcmVtZW50cy5mb3JFYWNoKHIgPT4ge1xyXG4gICAgICB1bmNvdmVyZWRJZHNbci5pZF0gPSB0cnVlO1xyXG4gICAgfSk7XHJcbiAgICBjb3Vyc2UuYWJpbGl0aWVzLmZvckVhY2goYSA9PiB7XHJcbiAgICAgIHVuY292ZXJlZElkc1thLmlkXSA9IHRydWU7XHJcbiAgICB9KTtcclxuICAgIGNvdXJzZS5jZW50cmFsQ29udGVudC5mb3JFYWNoKGNjID0+IHtcclxuICAgICAgdW5jb3ZlcmVkSWRzW2NjLmlkXSA9IHRydWU7XHJcbiAgICB9KTtcclxuICB9KTtcclxuICAvLyAyLiBMaXN0IGFsbCB0YXNrcyBhbmQgdW5tYXJrIGFsbCBpZHMgdGhhdCB0aGV5IHJlZmVyIHRvXHJcbiAgZG9jc0JlaW5nQ2hlY2tlZC5mb3JFYWNoKGRvYyA9PiB7XHJcbiAgICBkb2Mua25vd2xlZGdlUmVxdWlyZW1lbnRzLmZvckVhY2goa3IgPT4ge1xyXG4gICAgICBkZWxldGUgdW5jb3ZlcmVkSWRzW2tyLmlkXTtcclxuICAgIH0pO1xyXG4gICAgZG9jLmFiaWxpdGllcy5mb3JFYWNoKGEgPT4ge1xyXG4gICAgICBkZWxldGUgdW5jb3ZlcmVkSWRzW2EuaWRdO1xyXG4gICAgfSk7XHJcbiAgICBkb2MuY2VudHJhbENvbnRlbnQuZm9yRWFjaChjYyA9PiB7XHJcbiAgICAgIGRlbGV0ZSB1bmNvdmVyZWRJZHNbY2MuaWRdO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbiAgcmV0dXJuIHVuY292ZXJlZElkcztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNhbml0eUNoZWNrIChjb3Vyc2U6IENvdXJzZSkge1xyXG4gIGZ1bmN0aW9uIGhhc0R1cGxpY2F0ZVRhc2tzKGNvdXJzZTogQ291cnNlKSB7XHJcbiAgICBjb25zdCB0YXNrSWRzOiB7W2lkOnN0cmluZ106IGJvb2xlYW59ID0ge307XHJcbiAgICByZXR1cm4gZmxhdHRlbihjb3Vyc2UubW9kdWxlcy5tYXAobW9kdWxlID0+IG1vZHVsZS50YXNrSWRzLm1hcCh0YXNrSWQgPT4ge1xyXG4gICAgICBpZiAodGFza0lkc1t0YXNrSWRdKSB7XHJcbiAgICAgICAgY29uc3QgdGFzayA9IGNvdXJzZS50YXNrcy5maW5kKHQgPT4gdC5pZCA9PT0gdGFza0lkKTtcclxuICAgICAgICByZXR1cm4gTGBTYW1tYSB1cHBnaWZ0IGbDtnJla29tbWVyIGZsZXJhIGfDpW5nZXI6IFwiJHt0YXNrLm5hbWV9XCJgO1xyXG4gICAgICB9XHJcbiAgICAgIHRhc2tJZHNbdGFza0lkXSA9IHRydWU7XHJcbiAgICB9KS5maWx0ZXIoeCA9PiB4KSkpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gdGFza3NXaXRoU2FtZVVybChjb3Vyc2U6IENvdXJzZSkge1xyXG4gICAgY29uc3QgdGFza1VybHM6IHtbdXJsOnN0cmluZ106IFRhc2t9ID0ge307XHJcbiAgICByZXR1cm4gY291cnNlLnRhc2tzLm1hcCh0YXNrID0+IHtcclxuICAgICAgaWYgKHRhc2sudXJsKSB7XHJcbiAgICAgICAgaWYgKHRhc2tVcmxzW3Rhc2sudXJsXSkge1xyXG4gICAgICAgICAgcmV0dXJuIExgVHbDpSB1cHBnaWZ0ZXIgcGVrYXIgcMOlIHNhbW1hIFVSTDogXCIke3Rhc2tVcmxzW3Rhc2sudXJsXS5uYW1lfVwiIHNhbXQgXCIke3Rhc2submFtZX1cImA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRhc2tVcmxzW3Rhc2sudXJsXSA9IHRhc2s7XHJcbiAgICAgIH1cclxuICAgIH0pLmZpbHRlcih4ID0+IHgpOyAgXHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBoYXNFbXB0eU1vZHVsZU5hbWVzKGNvdXJzZTogQ291cnNlKSB7XHJcbiAgICByZXR1cm4gY291cnNlLm1vZHVsZXMuc29tZSAobW9kdWxlID0+IG1vZHVsZS5uYW1lID09PSBcIlwiKSAmJlxyXG4gICAgICBMYERldCBmaW5ucyBtaW5zdCBlbiBtb2R1bCB1dGFuIGFuZ2l2ZXQgbmFtbmA7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBoYXNEdXBsaWNhdGVNb2R1bGVOYW1lcyhjb3Vyc2U6IENvdXJzZSkge1xyXG4gICAgY29uc3QgbW9kdWxlTmFtZXM6IHtbbmFtZTogc3RyaW5nXTogdHJ1ZX0gPSB7fTtcclxuICAgIHJldHVybiBjb3Vyc2UubW9kdWxlcy5tYXAobW9kdWxlID0+IHtcclxuICAgICAgaWYgKG1vZHVsZS5uYW1lICYmIG1vZHVsZU5hbWVzW21vZHVsZS5uYW1lXSkge1xyXG4gICAgICAgIHJldHVybiBMYE1vZHVsZW4gbWVkIG5hbW4gJHttb2R1bGUubmFtZX0gZsO2cmVrb21tZXIgZmxlcmEgZ8OlbmdlcmA7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKG1vZHVsZS5uYW1lKSBtb2R1bGVOYW1lc1ttb2R1bGUubmFtZV0gPSB0cnVlO1xyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGNvbnN0IGNoZWNrcyA9IGZsYXR0ZW4oW1xyXG4gICAgaGFzRHVwbGljYXRlVGFza3MoY291cnNlKSxcclxuICAgIHRhc2tzV2l0aFNhbWVVcmwoY291cnNlKSxcclxuICAgIGhhc0VtcHR5TW9kdWxlTmFtZXMoY291cnNlKSxcclxuICAgIGhhc0R1cGxpY2F0ZU1vZHVsZU5hbWVzKGNvdXJzZSlcclxuICBdKTtcclxuXHJcbiAgcmV0dXJuIGNoZWNrcy5maWx0ZXIgKHJlc3VsdCA9PiByZXN1bHQpO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFRhc2tzUGVySWQgKGNvdXJzZTogQ291cnNlKSB7XHJcbiAgY29uc3QgcmVzdWx0OiB7W2lkOiBzdHJpbmddOiBUYXNrW119ID0ge307XHJcbiAgZnVuY3Rpb24gYWRkKGlkOiBzdHJpbmcsIHRhc2s6IFRhc2spIHtcclxuICAgIGNvbnN0IGxpc3QgPSByZXN1bHRbaWRdIHx8IChyZXN1bHRbaWRdID0gW10pO1xyXG4gICAgbGlzdC5wdXNoKHRhc2spO1xyXG4gIH1cclxuICBjb3Vyc2UudGFza3MuZm9yRWFjaCh0YXNrID0+IHtcclxuICAgIHRhc2suYWJpbGl0aWVzLmZvckVhY2goYSA9PiBhZGQoYS5pZCwgdGFzaykpO1xyXG4gICAgdGFzay5jZW50cmFsQ29udGVudC5mb3JFYWNoKGMgPT4gYWRkKGMuaWQsIHRhc2spKTtcclxuICAgIHRhc2suZnV0dXJlQWJpbGl0aWVzLmZvckVhY2goZmEgPT4gYWRkKGZhLCB0YXNrKSk7XHJcbiAgfSk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuLyoqIFJldHVybnMgYW4gYWNjZXNzIGxpc3QgZm9yIGEgY291cnNlIGluIGEgYmFja3dhcmQgY29tcGF0aWJsZSB3YXkgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFNvZnRBY2Nlc3NMaXN0IChjb3Vyc2U6IENvdXJzZSk6IFNvZnREb2N1bWVudEFjY2Vzc1tdIHtcclxuICBjb25zdCB7cmVzcG9uc2libGVUZWFjaGVyc30gPSBjb3Vyc2U7XHJcbiAgY29uc3QgcmVzdWx0ID0gcmVzcG9uc2libGVUZWFjaGVycy5tYXAoZGEgPT4oe1xyXG4gICAgbmFtZTogZGEubmFtZSxcclxuICAgIGVtYWlsOiBnZXRFbWFpbEZyb21Eb2NBY2Nlc3MoZGEpLFxyXG4gICAgYWNjZXNzOiBkYS5hY2Nlc3MgfHwgJ2VkaXQnXHJcbiAgfSBhcyBTb2Z0RG9jdW1lbnRBY2Nlc3MpKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgTCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgU2Nob29sQ291cnNlcyB9IGZyb20gJy4uL3N1Yi1jb21wb25lbnRzL3NjaG9vbC1jb3Vyc2VzJztcclxuaW1wb3J0IHsgUmVzb3VyY2UgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IGR0Rm9ybWF0IH0gZnJvbSAnLi4vdXRpbHMnO1xyXG5pbXBvcnQgeyBEaWFsb2cgfSBmcm9tICcuLi9pbnRlcmZhY2VzL2NvdXJzZS1lZGl0b3ItaG9zdCc7XHJcbmltcG9ydCB2YWxpZFVybCBmcm9tICd2YWxpZC11cmwnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICByZXNvdXJjZT86IFJlc291cmNlO1xyXG4gIHRpdGxlOiBzdHJpbmc7XHJcbiAgb25TYXZlOiAobmV3UmVzb3VyY2U6IFJlc291cmNlKSA9PiB2b2lkO1xyXG4gIG9uRGVsZXRlPzogKCk9PnZvaWQ7XHJcbn1cclxuXHJcbnR5cGUgU3RhdGUgPSBSZXNvdXJjZTtcclxuXHJcbmV4cG9ydCBjbGFzcyBFZGl0UmVzb3VyY2UgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsU3RhdGU+IGltcGxlbWVudHMgRGlhbG9nIHtcclxuICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICAgIHRoaXMuc3RhdGUgPSB0aGlzLnByb3BzLnJlc291cmNlIHx8IHtuYW1lOiAnJywgdXJsOiAnJ307XHJcbiAgfVxyXG5cclxuICBzYXZlKCkge1xyXG4gICAgY29uc3QgcmVzb3VyY2UgPSB0aGlzLnN0YXRlO1xyXG4gICAgaWYgKCF2YWxpZFVybC5pc1VyaShyZXNvdXJjZS51cmwpKSB0aHJvdyBuZXcgRXJyb3IoTGBBbmdpdmVuIFVSTCAnJHtyZXNvdXJjZS51cmx9JyDDpHIgb2dpbHRpZy4gU2thIGLDtnJqYSBtZWQgZXhlbXBlbHZpcyBodHRwOiwgaHR0cHM6IGVsbGVyIG1haWx0bzpgKTtcclxuICAgIHRoaXMucHJvcHMub25TYXZlKHJlc291cmNlKTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHt0aXRsZSwgb25TYXZlLCBvbkRlbGV0ZX0gPSB0aGlzLnByb3BzO1xyXG4gICAgY29uc3QgcmVzb3VyY2UgPSB0aGlzLnN0YXRlO1xyXG4gICAgY29uc3QgaXNWYWxpZFVybCA9IHZhbGlkVXJsLmlzVXJpKHRoaXMuc3RhdGUudXJsKTtcclxuXHJcbiAgICByZXR1cm4gPGRpdj48ZGl2IGNsYXNzTmFtZT1cInN2LWh0bWwtcG9ydGxldCBzdi1wb3J0bGV0IHN2LXNraXAtc3BhY2VyXCI+XHJcbiAgICAgIDxoMj57dGl0bGV9PC9oMj5cclxuICAgICAgPGhyIC8+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbFwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+TmFtbjo8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgYXV0b0ZvY3VzXHJcbiAgICAgICAgICAgIHRhYkluZGV4PXsxfVxyXG4gICAgICAgICAgICBzaXplPXs1MH1cclxuICAgICAgICAgICAgdmFsdWU9e3Jlc291cmNlLm5hbWV9XHJcbiAgICAgICAgICAgIG9uQ2hhbmdlPXtldj0+dGhpcy5zZXRTdGF0ZSh7bmFtZTogZXYudGFyZ2V0LnZhbHVlfSl9IC8+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3Agc3BhY2VkXCI+PC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWxcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPkzDpG5rOjwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wIFwiPlxyXG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCJcclxuICAgICAgICAgICAgdGFiSW5kZXg9ezF9XHJcbiAgICAgICAgICAgIHNpemU9ezUwfVxyXG4gICAgICAgICAgICB2YWx1ZT17cmVzb3VyY2UudXJsfVxyXG4gICAgICAgICAgICBvbkNoYW5nZT17ZXY9PnRoaXMuc2V0U3RhdGUoe3VybDogZXYudGFyZ2V0LnZhbHVlfSl9IC8+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3Agc3BhY2VkXCI+PC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8YnIgLz48L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdi1odG1sLXBvcnRsZXQgc3YtcG9ydGxldFwiPlxyXG4gICAgICAgIHsocmVzb3VyY2UuY3JlYXRlZERhdGUgfHwgcmVzb3VyY2UubW9kaWZpZWREYXRlKSAmJiA8ZGl2PlxyXG4gICAgICAgICAge3Jlc291cmNlLmNyZWF0ZWREYXRlICYmIDxwPlxyXG4gICAgICAgICAgICBSZXN1cnNlbi9Mw6Rua2VuIHNrYXBhZGVzIHtkdEZvcm1hdChyZXNvdXJjZS5jcmVhdGVkRGF0ZSl9IGF2IDxzdHJvbmc+e3Jlc291cmNlLmNyZWF0ZWRCeS5uYW1lfTwvc3Ryb25nPi5cclxuICAgICAgICAgIDwvcD59XHJcbiAgICAgICAgICB7cmVzb3VyY2UubW9kaWZpZWREYXRlICYmIDxwPlxyXG4gICAgICAgICAgICBSZXN1cnNlbi9Mw6Rua2VuIHJlZGlnZXJhZGVzIHNlbmFzdCB7ZHRGb3JtYXQocmVzb3VyY2UubW9kaWZpZWREYXRlKX0gYXYgPHN0cm9uZz57cmVzb3VyY2UubW9kaWZpZWRCeS5uYW1lfTwvc3Ryb25nPi5cclxuICAgICAgICAgIDwvcD59XHJcbiAgICAgICAgICA8YnIgLz48YnIvPlxyXG4gICAgICAgIDwvZGl2Pn1cclxuICAgICAgICB7b25EZWxldGUgJiYgPGRpdiB0YWJJbmRleD17Mn0gY2xhc3NOYW1lPVwiYnRuIGJ0bi13YXJuaW5nIGJ0bi1sYXJnZSBwdWxsLXJpZ2h0XCIgb25DbGljaz17KCk9Pm9uRGVsZXRlKCl9PlxyXG4gICAgICAgICAgVGEgYm9ydCByZXN1cnMvbMOkbmtcclxuICAgICAgICA8L2Rpdj59XHJcbiAgICAgICAgPGEgdGFiSW5kZXg9ezF9IGNsYXNzTmFtZT17XCJidG4gYnRuLWxhcmdlXCIgKyAoaXNWYWxpZFVybCA/IFwiXCIgOiBcIiBidG4taW5hY3RpdmVcIil9IG9uQ2xpY2s9e2lzVmFsaWRVcmwgJiYgKCgpID0+IG9uU2F2ZShyZXNvdXJjZSkpfT5TcGFyYTwvYT5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQge1Rhc2ssIENvdXJzZX0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBPcGVuQ2xvc2VCb3ggfSBmcm9tICcuLi8uLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvb3Blbi1jbG9zZS1ib3gnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICB0YXNrOiBUYXNrO1xyXG4gIGNvdXJzZTogQ291cnNlO1xyXG4gIHVwZGF0ZUxpbms6IChpZDogc3RyaW5nLCBsaW5rT3JVbmxpbms6IGJvb2xlYW4pID0+IHZvaWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBUYXNrTWlncmF0aW9uQm94IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzPiB7XHJcbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7dGFzaywgY291cnNlLCB1cGRhdGVMaW5rfSA9IHRoaXMucHJvcHM7XHJcbiAgICBpZiAoIXRhc2subWlncmF0ZWRUZXh0cykgcmV0dXJuIDw+Jm5ic3A7PC8+O1xyXG4gICAgY29uc3Qge2FiaWxpdGllcywgY2VudHJhbENvbnRlbnQsIGtub3dsZWRnZVJlcXVpcmVtZW50c30gPSB0YXNrLm1pZ3JhdGVkVGV4dHM7XHJcbiAgICBjb25zdCBrcnMgPSBPYmplY3Qua2V5cyhrbm93bGVkZ2VSZXF1aXJlbWVudHMgfHwge30pLm1hcChpZCA9PiAoe1xyXG4gICAgICAuLi5jb3Vyc2Uua25vd2xlZGdlUmVxdWlyZW1lbnRzLmZpbmQodCA9PiB0LmlkID09PSBpZCksXHJcbiAgICAgIC4uLmtub3dsZWRnZVJlcXVpcmVtZW50c1tpZF1cclxuICAgIH0pKS8vLmZpbHRlcigoe25hbWV9KSA9PiAhIW5hbWUpO1xyXG4gICAgY29uc3Qga3JBID0ge3RpdGxlOiBcIlVwcGRhdGVyYXQga3Vuc2thcHNrcmF2IGbDtnIgYmV0eWdldCBBXCIsIHR5cGU6IFwia25vd2xlZGdlUmVxdWlyZW1lbnRzXCIsIGl0ZW1zOiBrcnMuZmlsdGVyKGtyID0+IGtyLmdyYWRlU3RlcCA9PT0gJ0EnKX07XHJcbiAgICBjb25zdCBrckMgPSB7dGl0bGU6IFwiVXBwZGF0ZXJhdCBLdW5za2Fwc2tyYXYgZsO2ciBiZXR5Z2V0IENcIiwgdHlwZTogXCJrbm93bGVkZ2VSZXF1aXJlbWVudHNcIiwgaXRlbXM6IGtycy5maWx0ZXIoa3IgPT4ga3IuZ3JhZGVTdGVwID09PSAnQycpfTtcclxuICAgIGNvbnN0IGtyRSA9IHt0aXRsZTogXCJVcHBkYXRlcmF0IGt1bnNrYXBza3JhdiBmw7ZyIGJldHlnZXQgRVwiLCB0eXBlOiBcImtub3dsZWRnZVJlcXVpcmVtZW50c1wiLCBpdGVtczoga3JzLmZpbHRlcihrciA9PiBrci5ncmFkZVN0ZXAgPT09ICdFJyl9O1xyXG4gICAgY29uc3QgYWJzID0ge3RpdGxlOiBcIlVwcGRhdGVyYWRlIGbDtnJtw6Vnb3JcIiwgdHlwZTogXCJhYmlsaXRpZXNcIiwgaXRlbXM6IE9iamVjdC5rZXlzKGFiaWxpdGllcyB8fCB7fSkubWFwKGlkID0+ICh7XHJcbiAgICAgIC4uLmNvdXJzZS5hYmlsaXRpZXMuZmluZCh0ID0+IHQuaWQgPT09IGlkKSxcclxuICAgICAgLi4uYWJpbGl0aWVzW2lkXX0pXHJcbiAgICApfS8vLmZpbHRlcigoe25hbWV9KSA9PiAhIW5hbWUpfTtcclxuICAgIGNvbnN0IGNjcyA9IHt0aXRsZTogXCJVcHBkYXRlcmF0IGNlbnRyYWx0IGlubmVow6VsbFwiLCB0eXBlOiBcImNlbnRyYWxDb250ZW50XCIsIGl0ZW1zOiBPYmplY3Qua2V5cyhjZW50cmFsQ29udGVudCB8fCB7fSkubWFwKGlkID0+ICh7XHJcbiAgICAgIC4uLmNvdXJzZS5jZW50cmFsQ29udGVudC5maW5kKGNjID0+IGNjLmlkID09IGlkKSxcclxuICAgICAgLi4uY2VudHJhbENvbnRlbnRbaWRdXHJcbiAgICAgIH0pXHJcbiAgICApfS8vLmZpbHRlcigoe25hbWV9KSA9PiAhIW5hbWUpfTtcclxuICAgIGNvbnN0IHRhYmxlc1RvU2hvdyA9IFtrckEsIGtyQywga3JFLCBjY3MsIGFic10uZmlsdGVyKGJveEluZm8gPT4gYm94SW5mby5pdGVtcy5sZW5ndGggPiAwKTtcclxuICAgIGlmICh0YWJsZXNUb1Nob3cubGVuZ3RoID09PSAwKSByZXR1cm4gPD4mbmJzcDs8Lz47XHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgPE9wZW5DbG9zZUJveCBjbGFzc05hbWU9XCJsYXJnZXJcIiB0aXRsZT17PGRpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIndhcm5pbmdGbGFnXCI+XHJcbiAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1leGNsYW1hdGlvbi10cmlhbmdsZVwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8cD5VcHBkYXRlcmFkZSBmb3JtdWxlcmluZ2FyIGZyw6VuIFNrb2x2ZXJrZXQ8L3A+XHJcbiAgICAgIDwvZGl2Pn0+XHJcbiAgICAgICAge3RhYmxlc1RvU2hvdy5tYXAoKHt0aXRsZSwgdHlwZSwgaXRlbXN9KSA9PiA8ZGl2IGtleT17dGl0bGV9PlxyXG4gICAgICAgICAgPGg1Pnt0aXRsZX08L2g1PlxyXG4gICAgICAgICAgPHRhYmxlPlxyXG4gICAgICAgICAgICA8dGhlYWQ+XHJcbiAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgPHRoIHN0eWxlPXt7d2lkdGg6IFwiNDAlXCJ9fT5VcnNwcnVuZ2xpZyBmb3JtdWxlcmluZzwvdGg+XHJcbiAgICAgICAgICAgICAgICA8dGggc3R5bGU9e3t3aWR0aDogXCI0MCVcIn19PlNrb2x2ZXJrZXRzIG55YSBmb3JtdWxlcmluZzwvdGg+XHJcbiAgICAgICAgICAgICAgICA8dGg+VMOkY2tlciB1cHBnaWZ0ZW4gZGVuIG55YSBmb3JtdWxlcmluZ2VuPzwvdGg+XHJcbiAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgPC90aGVhZD5cclxuICAgICAgICAgICAgPHRib2R5PlxyXG4gICAgICAgICAgICAgIHtpdGVtcy5tYXAoaXRlbSA9PiA8dHIga2V5PXtpdGVtLmlkfT5cclxuICAgICAgICAgICAgICAgIDx0ZCBkYW5nZXJvdXNseVNldElubmVySFRNTD17e19faHRtbDogaXRlbS5vbGRUZXh0fX0gLz5cclxuICAgICAgICAgICAgICAgIDx0ZCBkYW5nZXJvdXNseVNldElubmVySFRNTD17e19faHRtbDogaXRlbS5uYW1lfX0gLz5cclxuICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKT0+dXBkYXRlTGluayhpdGVtLmlkLCB0cnVlKX0+SmEgLSBiZWjDpWxsIGtvcHBsaW5nZW48L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKT0+dXBkYXRlTGluayhpdGVtLmlkLCBmYWxzZSl9Pk5laiAtIHRhIGJvcnQga29wcGxpbmdlbjwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICA8L3RyPil9XHJcbiAgICAgICAgICAgIDwvdGJvZHk+XHJcbiAgICAgICAgICA8L3RhYmxlPlxyXG4gICAgICAgIDwvZGl2Pil9XHJcbiAgICAgIDwvT3BlbkNsb3NlQm94PlxyXG5cclxuICAgIClcclxuICB9XHJcbn0iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcblxyXG5leHBvcnQgY29uc3QgRWxsaXBzaXNMb2FkZXIgPSAoKSA9PlxyXG4gIDxpbWdcclxuICAgIHN0eWxlPXt7Ym9yZGVyOiAwLCBtYXJnaW46IDAsIHBhZGRpbmc6IDB9fVxyXG4gICAgY2xhc3NOYW1lPVwiZWxsaXBzaXMtbG9hZGVyXCIgLz47XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHtBYmlsaXR5LCBLbm93bGVkZ2VSZXF1aXJlbWVudH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgZW52IGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCB7UmVtb3ZlSXRlbX0gZnJvbSAnLi9yZW1vdmUtaXRlbSc7XHJcbmltcG9ydCB1cGRhdGUgZnJvbSAncmVhY3QtYWRkb25zLXVwZGF0ZSc7XHJcbmltcG9ydCB7IEwgfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIGtub3dsZWRnZVJlcXVpcmVtZW50czogS25vd2xlZGdlUmVxdWlyZW1lbnRbXTtcclxuICBpZHNUb01hcmtOb3RPaz86IHtbaWQ6IHN0cmluZ106IHRydWV9O1xyXG4gIGV4cGxhaW5lZFJlcXVpcmVtZW50cz86IHtbcmVxdWlyZW1lbnRJZDogc3RyaW5nXTogc3RyaW5nfVxyXG4gIC8vIFByb3BzIHVzZWQgaW4gZWRpdCBtb2RlIChlZGl0aW5nIGNvdXJzZSB0ZW1wbGF0ZXMpXHJcbiAgLy9jb3ZlcmVkSWRzPzogc3RyaW5nW107XHJcbiAgLy8gUHJvcHMgdXNlZCBpbiBtYXJrIG1vZGUgKGVkaXRpbmcgdGFza3MpXHJcbiAgbWFya01vZGU/OiBib29sZWFuO1xyXG4gIG1hcmtlZElkcz86IHN0cmluZ1tdO1xyXG4gIG1pZ3JhdGVkSWRzPzoge1tpZDogc3RyaW5nXTogYW55fTtcclxuICBvbk1hcmtDaGFuZ2VkOiAoaWQ6IHN0cmluZywgaXNNYXJrZWQ6IGJvb2xlYW4pID0+IHZvaWQ7XHJcbiAgb25FeHBsYWluZWRSZXF1aXJlbWVudHNDaGFuZ2VkPzogKHJlcUlkOiBzdHJpbmcsIHRleHQ6IHN0cmluZykgPT4gdm9pZDtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEtub3dsZWRnZU1hdHJpeCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcywge30+IHtcclxuICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHsga25vd2xlZGdlUmVxdWlyZW1lbnRzLCBtYXJrZWRJZHMsIG1pZ3JhdGVkSWRzLCBleHBsYWluZWRSZXF1aXJlbWVudHMgfSA9IHRoaXMucHJvcHM7XHJcbiAgICBjb25zdCB7IGlkc1RvTWFya05vdE9rLCBtYXJrTW9kZSwgb25NYXJrQ2hhbmdlZCwgb25FeHBsYWluZWRSZXF1aXJlbWVudHNDaGFuZ2VkIH0gPSB0aGlzLnByb3BzO1xyXG5cclxuICAgIGNvbnN0IGNvbHVtbnMgPSBbXCJFXCIsIFwiQ1wiLCBcIkFcIl07XHJcbiAgICBjb25zdCByb3dzOiBLbm93bGVkZ2VSZXF1aXJlbWVudFtdW10gPSBbXTtcclxuICAgIGNvbnN0IHJlcXMgPSBrbm93bGVkZ2VSZXF1aXJlbWVudHMuc2xpY2UoKTtcclxuICAgIGxldCByb3c6IEtub3dsZWRnZVJlcXVpcmVtZW50W10gfCBudWxsID0gbnVsbDtcclxuICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgIHJvdyA9IGNvbHVtbnMubWFwKGdyYWRlID0+IHtcclxuICAgICAgICBjb25zdCBwTmV4dCA9IHJlcXMuZmluZEluZGV4KHIgPT4gci5ncmFkZVN0ZXAgJiYgci5ncmFkZVN0ZXAudG9VcHBlckNhc2UoKSA9PT0gZ3JhZGUpO1xyXG4gICAgICAgIGlmIChwTmV4dCA8IDApIHJldHVybiBudWxsO1xyXG4gICAgICAgIGNvbnN0IHJ2ID0gcmVxc1twTmV4dF07XHJcbiAgICAgICAgcmVxcy5zcGxpY2UocE5leHQsIDEpO1xyXG4gICAgICAgIHJldHVybiBydjtcclxuICAgICAgfSk7XHJcbiAgICAgIGlmIChyb3cuZXZlcnkociA9PiByID09PSBudWxsKSlcclxuICAgICAgICBicmVhaztcclxuICAgICAgcm93cy5wdXNoKHJvdyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIDxkaXY+XHJcbiAgICAgIDx0YWJsZT5cclxuICAgICAgICA8dGhlYWQ+XHJcbiAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgIHtjb2x1bW5zLm1hcChjID0+IDx0aCBrZXk9e2N9PntjfTwvdGg+KX1cclxuICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgPC90aGVhZD5cclxuICAgICAgICA8dGJvZHk+XHJcbiAgICAgICAgICB7cm93cy5tYXAoKHJvdyxpKSA9PiA8UmVhY3QuRnJhZ21lbnQga2V5PXtpfT5cclxuICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgIHtyb3cubWFwKChyZXF1aXJlbWVudCxqKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpc01hcmtlZE9LID0gcmVxdWlyZW1lbnQgJiYgbWFya2VkSWRzICYmIG1hcmtlZElkcy5pbmRleE9mKHJlcXVpcmVtZW50LmlkKSA+PSAwO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaXNNYXJrZWROb3RPSyA9IHJlcXVpcmVtZW50ICYmIGlkc1RvTWFya05vdE9rICYmIGlkc1RvTWFya05vdE9rW3JlcXVpcmVtZW50LmlkXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlzTWlncmF0ZWQgPSByZXF1aXJlbWVudCAmJiBtaWdyYXRlZElkcyAmJiAhIW1pZ3JhdGVkSWRzW3JlcXVpcmVtZW50LmlkXTtcclxuICAgICAgICAgICAgICAgIHJldHVybiA8dGRcclxuICAgICAgICAgICAgICAgICAga2V5PXtqfVxyXG4gICAgICAgICAgICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTD17e19faHRtbDogcmVxdWlyZW1lbnQgPyByZXF1aXJlbWVudC5uYW1lIDogXCJcIn19XHJcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17KG1hcmtNb2RlID8gXCJzZWxlY3RhYmxlXCIgOiBcIlwiKSArXHJcbiAgICAgICAgICAgICAgICAgIChpc01pZ3JhdGVkID8gXCIgbWlncmF0ZWRcIiA6IFwiXCIpICtcclxuICAgICAgICAgICAgICAgICAgKGlzTWFya2VkT0sgP1xyXG4gICAgICAgICAgICAgICAgICAgIFwiIG1hcmtlZEdyZWVuXCIgOlxyXG4gICAgICAgICAgICAgICAgICAgIChpc01hcmtlZE5vdE9LID9cclxuICAgICAgICAgICAgICAgICAgICAgIFwiIG1hcmtlZFJlZFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgXCJcIikpfVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e21hcmtNb2RlICYmIHJlcXVpcmVtZW50ID9cclxuICAgICAgICAgICAgICAgICAgICAgICgpPT5vbk1hcmtDaGFuZ2VkKHJlcXVpcmVtZW50LmlkLCAhaXNNYXJrZWRPSykgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkfVxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPXtpc01pZ3JhdGVkID9cclxuICAgICAgICAgICAgICAgICAgICAgIG1hcmtNb2RlID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgYFNrb2x2ZXJrZXQgaGFyIHVwcGRhdGVyYXQgdGV4dGVucyBmb3JtdWxlcmluZy4gRHUga2FuIGdyYW5za2Egw6RuZHJpbmdlbiBnZW5vbSBhdHQgZsOkbGxhIHV0IHZhcm5pbmdzYm94ZW4gdGlsbCBow7ZnZXIsIG1lZCB0aXRlbCBcIlVwcGRhdGVyYWRlIGZvcm11bGVyaW5nYXIgZnLDpW4gU2tvbHZlcmtldFwiYCA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGBTa29sdmVya2V0IGhhciB1cHBkYXRlcmF0IHRleHRlbnMgZm9ybXVsZXJpbmcsIG1lbiBkZXR0YSBoYXIgw6RubnUgaW50ZSBncmFuc2thdHMgYXYgdXBwZ2lmdGVucyByZWRpZ2VyaW5nc2JlaMO2cmlnZWAgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkfSAvPlxyXG4gICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICB7ZXhwbGFpbmVkUmVxdWlyZW1lbnRzICYmIDx0cj5cclxuICAgICAgICAgICAgICB7cm93Lm1hcCgocmVxdWlyZW1lbnQsaikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaXNNYXJrZWRPSyA9IHJlcXVpcmVtZW50ICYmIG1hcmtlZElkcyAmJiBtYXJrZWRJZHMuaW5kZXhPZihyZXF1aXJlbWVudC5pZCkgPj0gMDtcclxuICAgICAgICAgICAgICAgIHJldHVybiA8dGQga2V5PXtqfT5cclxuICAgICAgICAgICAgICAgICAge2lzTWFya2VkT0sgPyA8dGV4dGFyZWFcclxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17TGBCZXNrcml2IGtyYXZldGB9XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaW5wdXRUZXh0Qm94IGlucHV0VGV4dExhcmdlXCIgc3R5bGU9e3t3aWR0aDogXCIxMDAlXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5PXshbWFya01vZGV9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2V4cGxhaW5lZFJlcXVpcmVtZW50c1tyZXF1aXJlbWVudC5pZF0gfHwgXCJcIn1cclxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17b25FeHBsYWluZWRSZXF1aXJlbWVudHNDaGFuZ2VkICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgIGV2ID0+IG9uRXhwbGFpbmVkUmVxdWlyZW1lbnRzQ2hhbmdlZChyZXF1aXJlbWVudC5pZCwgZXYudGFyZ2V0LnZhbHVlKSl9XHJcbiAgICAgICAgICAgICAgICAgIC8+IDogdW5kZWZpbmVkfVxyXG4gICAgICAgICAgICAgICAgICA8L3RkPn0pfVxyXG4gICAgICAgICAgICA8L3RyPn1cclxuICAgICAgICAgICAgPC9SZWFjdC5GcmFnbWVudD5cclxuICAgICAgICAgICl9XHJcbiAgICAgICAgPC90Ym9keT5cclxuICAgICAgPC90YWJsZT5cclxuICAgIDwvZGl2PlxyXG5cclxuICAgIHsvKnJldHVybiA8ZGl2PlxyXG4gICAgICA8dGFibGU+XHJcbiAgICAgICAgPHRoZWFkPlxyXG4gICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICA8dGg+RTwvdGg+XHJcbiAgICAgICAgICAgIDx0aD5DPC90aD5cclxuICAgICAgICAgICAgPHRoPkE8L3RoPlxyXG4gICAgICAgICAgPC90cj5cclxuICAgICAgICA8L3RoZWFkPlxyXG4gICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgIHt0Ym9keS5tYXAoKHJvdywgaSkgPT4gXHJcbiAgICAgICAgICA8dHIga2V5PXtpfT57cm93Lm1hcCgoY2VsbCwgaikgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpc01hcmtlZE9LID0gcHJvcHMubWFya2VkSWRzICYmIHByb3BzLm1hcmtlZElkcy5pbmRleE9mKGNlbGwuaWQpID49IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzTWFya2VkTm90T0sgPSBwcm9wcy5pZHNUb01hcmtOb3RPayAmJiBwcm9wcy5pZHNUb01hcmtOb3RPa1tjZWxsLmlkXTtcclxuICAgICAgICAgICAgcmV0dXJuIDx0ZFxyXG4gICAgICAgICAgICAgIGtleT17an1cclxuICAgICAgICAgICAgICByb3dTcGFuPXtjZWxsLnJvd1NwYW59XHJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXsocHJvcHMubWFya01vZGUgPyBcInNlbGVjdGFibGVcIiA6IFwiXCIpICtcclxuICAgICAgICAgICAgICAgIChpc01hcmtlZE9LID9cclxuICAgICAgICAgICAgICAgICAgXCIgbWFya2VkR3JlZW5cIiA6XHJcbiAgICAgICAgICAgICAgICAgIChpc01hcmtlZE5vdE9LID9cclxuICAgICAgICAgICAgICAgICAgICBcIiBtYXJrZWRSZWRcIjpcclxuICAgICAgICAgICAgICAgICAgICBcIlwiKSl9XHJcbiAgICAgICAgICAgICAgb25DbGljaz17cHJvcHMubWFya01vZGUgJiYgKCgpPT5wcm9wcy5vbk1hcmtDaGFuZ2VkKGNlbGwuaWQsICFpc01hcmtlZE9LKSl9PlxyXG4gICAgICAgICAgICAgIHtjZWxsLmh0bWwgJiYgPGRpdiBzdHlsZT17e3Bvc2l0aW9uOiAncmVsYXRpdmUnfX0+XHJcbiAgICAgICAgICAgICAgICA8cFxyXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2NlbGwudHlwZSA9PT0gJ2FiaWxpdHknID8gJ2FiaWxpdHlUZXh0JyA6ICdjcml0ZXJpYVRleHQnfVxyXG4gICAgICAgICAgICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTD17e19faHRtbDogY2VsbC5odG1sfX0gLz5cclxuICAgICAgICAgICAgICAgIHtwcm9wcy5lZGl0TW9kZSAmJiA8UmVtb3ZlSXRlbSBjbGFzc05hbWU9XCJ1cHBlclJpZ2h0XCIgb25DbGljaz17KCk9PlxyXG4gICAgICAgICAgICAgICAgICB0aGlzLnNldENlbGxJZHMoXHJcbiAgICAgICAgICAgICAgICAgICAgY2VsbC50eXBlLFxyXG4gICAgICAgICAgICAgICAgICAgIGNlbGwucm93SW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRDZWxsSWRzKFxyXG4gICAgICAgICAgICAgICAgICAgICAgY2VsbC50eXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgY2VsbC5yb3dJbmRleCkuZmlsdGVyKGlkID0+IGlkICE9IGNlbGwuaWQpICl9IC8+IH1cclxuICAgICAgICAgICAgICA8L2Rpdj59XHJcbiAgICAgICAgICAgIDwvdGQ+fSl9XHJcbiAgICAgICAgICA8L3RyPil9XHJcbiAgICAgICAgPC90Ym9keT5cclxuICAgICAgPC90YWJsZT5cclxuICAgIDwvZGl2PiovfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEwgfSBmcm9tIFwiLi4vLi4vLi4vdXRpbHMvdXRpbHNcIjtcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgb25DbGljayxcclxuICBjbGFzc05hbWU/LFxyXG4gIHN0eWxlPyxcclxuICB0aXRsZT9cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBSZW1vdmVJdGVtID0gKHsgb25DbGljaywgY2xhc3NOYW1lLCBzdHlsZSwgdGl0bGUgfTogUHJvcHMpID0+XHJcblxyXG4gIDxkaXZcclxuICAgIHRpdGxlPXt0aXRsZSB8fCBMYFJhZGVyYWB9XHJcbiAgICBjbGFzc05hbWU9e1wicmVtb3ZlSXRlbSBcIiArIChjbGFzc05hbWUgfHwgXCJcIil9XHJcbiAgICBvbkNsaWNrPXtvbkNsaWNrfSBzdHlsZT17c3R5bGV9IC8+XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgQ291cnNlLCBDb3Vyc2VNb2R1bGUsIFRhc2ssIERvY3VtZW50IH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBPcGVuQ2xvc2VCb3ggfSBmcm9tIFwiLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL29wZW4tY2xvc2UtYm94XCI7XHJcbmltcG9ydCB7IGFycmF5VG9Mb29rdXAgfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IGdldFVuY292ZXJlZEtub3dsZWRnZVJlcXVpcmVtZW50cyB9IGZyb20gJy4uL2NvdXJzZXMvYnVzaW5lc3MtbG9naWMnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBvcHRpb25zOiAoRG9jdW1lbnQgJiB7Z3JvdXA/OiBzdHJpbmd9KVtdO1xyXG4gIHRpdGxlO1xyXG4gIG1hcmtNb2RlOiBib29sZWFuO1xyXG4gIG1hcmtlZElkczogc3RyaW5nW107XHJcbiAgbWlncmF0ZWRJZHM/OiB7W2lkOiBzdHJpbmddOiBhbnl9O1xyXG4gIHVuY292ZXJlZElkcz86IHtbaWQ6IHN0cmluZ106IHRydWV9O1xyXG4gIG9uTWFya0NoYW5nZWQ6IChpZDogc3RyaW5nLCBpc01hcmtlZDogYm9vbGVhbikgPT4gdm9pZDtcclxufVxyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFNlbGVjdFJlbGF0ZWREb2NzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLFN0YXRlPiB7XHJcbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB0aGlzLnN0YXRlID0ge307XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7b3B0aW9ucywgdGl0bGUsIG1hcmtlZElkcywgbWFya01vZGUsIG1pZ3JhdGVkSWRzLCB1bmNvdmVyZWRJZHN9ID0gdGhpcy5wcm9wcztcclxuICAgIGNvbnN0IGdyb3VwZWRPcHRpb25zID0gYXJyYXlUb0xvb2t1cChvcHRpb25zLCBkID0+IGQuZ3JvdXAgfHwgXCJkZWZhdWx0XCIpO1xyXG4gICAgY29uc3QgZ3JvdXBzID0gT2JqZWN0LmtleXMoZ3JvdXBlZE9wdGlvbnMpO1xyXG4gICAgcmV0dXJuIDxPcGVuQ2xvc2VCb3ggdGl0bGU9ezxwPnt0aXRsZX08L3A+fSBjbGFzc05hbWU9XCJsYXJnZXJcIj5cclxuICAgICAgICB7Z3JvdXBzLm1hcChncm91cCA9PiA8UmVhY3QuRnJhZ21lbnQga2V5PXtncm91cH0+XHJcbiAgICAgICAgICB7Z3JvdXBzLmxlbmd0aCA9PT0gMSA/IG51bGwgOiA8Pjxici8+PGg1Pntncm91cH08L2g1Pjxoci8+PC8+fVxyXG4gICAgICAgICAge2dyb3VwZWRPcHRpb25zW2dyb3VwXS5tYXAob3B0aW9uID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaXNNYXJrZWQgPSBtYXJrZWRJZHMuc29tZSh4ID0+IHggPT09IG9wdGlvbi5pZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzTWlncmF0ZWQgPSBtaWdyYXRlZElkcyAmJiAhIW1pZ3JhdGVkSWRzW29wdGlvbi5pZF07XHJcbiAgICAgICAgICAgIGNvbnN0IGlzVW5jb3ZlcmVkID0gdW5jb3ZlcmVkSWRzICYmIHVuY292ZXJlZElkc1tvcHRpb24uaWRdO1xyXG4gICAgICAgICAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCIga2V5PXtvcHRpb24uaWR9IG9uQ2xpY2s9eygpPT5cclxuICAgICAgICAgICAgICBtYXJrTW9kZSAmJiB0aGlzLnByb3BzLm9uTWFya0NoYW5nZWQob3B0aW9uLmlkLCAhaXNNYXJrZWQpfT5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17XCJob3Jpem9udGFsSXRlbSB0b3Agc3BhY2VkXCIgK1xyXG4gICAgICAgICAgICAgICAgKG1hcmtNb2RlID8gXCIgc2VsZWN0YWJsZVwiIDogXCJcIikgK1xyXG4gICAgICAgICAgICAgICAgKGlzTWFya2VkID8gXCIgbWFya2VkR3JlZW5cIiA6IChpc1VuY292ZXJlZCA/XHJcbiAgICAgICAgICAgICAgICAgIFwiIG1hcmtlZFJlZFwiOlxyXG4gICAgICAgICAgICAgICAgICBcIlwiKSkgK1xyXG4gICAgICAgICAgICAgICAgKGlzTWlncmF0ZWQgPyBcIiBtaWdyYXRlZFwiIDogXCJcIil9XHJcbiAgICAgICAgICAgICAgICB0aXRsZT17aXNNaWdyYXRlZCA/XHJcbiAgICAgICAgICAgICAgICAgIG1hcmtNb2RlID9cclxuICAgICAgICAgICAgICAgICAgICBgU2tvbHZlcmtldCBoYXIgdXBwZGF0ZXJhdCB0ZXh0ZW5zIGZvcm11bGVyaW5nLiBEdSBrYW4gZ3JhbnNrYSDDpG5kcmluZ2VuIGdlbm9tIGF0dCBmw6RsbGEgdXQgdmFybmluZ3Nib3hlbiB0aWxsIGjDtmdlciwgbWVkIHRpdGVsIFwiVXBwZGF0ZXJhZGUgZm9ybXVsZXJpbmdhciBmcsOlbiBTa29sdmVya2V0XCJgIDpcclxuICAgICAgICAgICAgICAgICAgICBgU2tvbHZlcmtldCBoYXIgdXBwZGF0ZXJhdCB0ZXh0ZW5zIGZvcm11bGVyaW5nLCBtZW4gZGV0dGEgaGFyIMOkbm51IGludGUgZ3JhbnNrYXRzIGF2IHVwcGdpZnRlbnMgcmVkaWdlcmluZ3NiZWjDtnJpZ2VgIDpcclxuICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkfT5cclxuICAgICAgICAgICAgICAgIDxwIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXt7X19odG1sOiBvcHRpb24ubmFtZX19IC8+XHJcbiAgICAgICAgICAgICAgICA8YnIgLz5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+O1xyXG4gICAgICAgICAgfSl9XHJcbiAgICAgICAgPC9SZWFjdC5GcmFnbWVudD4pfVxyXG4gICAgPC9PcGVuQ2xvc2VCb3g+XHJcbiAgfVxyXG59IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5cclxuZXhwb3J0IGNvbnN0IFNwaW5uZXIgPSAoKT0+IDxzcGFuPjxpIGNsYXNzTmFtZT1cImZhIGZhLXNwaW5uZXIgZmEtc3BpblwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4mbmJzcDs8L3NwYW4+O1xyXG4iLCJpbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcbmltcG9ydCB7IEwgfSBmcm9tICcuLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IERvY3VtZW50LCBSZXNvdXJjZSwgTW9kaWZpY2F0aW9uVHJhY2tlZCwgQ291cnNlLCBUYXNrLCBTb2Z0RG9jdW1lbnRBY2Nlc3MgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IEJhdGNoUnVubmVyLCBjcmVhdGVVVUlEIH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnQnO1xyXG5pbXBvcnQgdXBkYXRlIGZyb20gJ3JlYWN0LWFkZG9ucy11cGRhdGUnO1xyXG5pbXBvcnQgeyBVc2VyIH0gZnJvbSAnLi4vLi4vY29udHJhY3RzL2tlZC1tb2RlbHMnO1xyXG5pbXBvcnQgJCBmcm9tICdqcXVlcnknO1xyXG5pbXBvcnQgZW52IGZyb20gJy4uLy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCB7IGdldEZpcnN0QW5kTGFzdFdlZWtPZlRlcm0gfSBmcm9tICcuLi8uLi91dGlscy9zY2hvb2wtbW9tZW50JztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVEb2N1bWVudEdyYXBocyhvbGREb2MsIG5ld0RvYywgdGFibGU6IHN0cmluZywgZ3JhcGhzOiB7IFtsYWJlbDogc3RyaW5nXTogc3RyaW5nIH0sIGJhdGNoOiBCYXRjaFJ1bm5lcikge1xyXG4gIGNvbnN0IGRvY1VwZGF0ZXMgPSB7fTtcclxuICBjb25zdCBkb2NJZCA9IG5ld0RvYy5pZDtcclxuICBmb3IgKGxldCBuYXZQcm9wIG9mIE9iamVjdC5rZXlzKGdyYXBocykpIHtcclxuICAgIGNvbnN0IGZvcmVpZ25UYWJsZSA9IGdyYXBoc1tuYXZQcm9wXTtcclxuICAgIGNvbnN0IG9sZExpc3Q6IERvY3VtZW50W10gPSBvbGREb2NbbmF2UHJvcF0gfHwgW107XHJcbiAgICBjb25zdCBuZXdMaXN0OiBEb2N1bWVudFtdID0gbmV3RG9jW25hdlByb3BdO1xyXG4gICAgaWYgKCFuZXdMaXN0KSBjb250aW51ZTtcclxuICAgIGNvbnN0IHR1cGxlcyA9IG5ld0xpc3RcclxuICAgICAgLm1hcCgoZG9jLCBpZHgpPT4oe2RvYywgaWR4fSkpOyAvLyBDcmVhdGUgdHVibGVzIG9mIHtkb2MsIGFycmF5LWluZGV4fSBzbyB3ZSBjYW4gdXBkYXRlIHJlc3VsdFxyXG4gICAgY29uc3QgYWRkZWQgPSB0dXBsZXMuZmlsdGVyKHR1cGxlID0+ICFvbGRMaXN0LnNvbWUobyA9PiBvLmlkID09PSB0dXBsZS5kb2MuaWQpKTsgLy8gRmluZCBhZGRlZCBpdGVtc1xyXG5cclxuICAgIGZvciAobGV0IGEgb2YgYWRkZWQpIHtcclxuICAgICAgY29uc3QgbXV0YXRlZFN1YkRvYyA9IHsuLi5hLmRvY307XHJcbiAgICAgIGNvbnN0IG1ldGEgPSBtdXRhdGVkU3ViRG9jLiRtZXRhO1xyXG4gICAgICBkZWxldGUgbXV0YXRlZFN1YkRvYy4kbWV0YTsgLy8gRGVsZXRlICRtZXRhIHNvIHRoYXQgXCJhZGRcIiBvciBcInVwZGF0ZVwiIGRvZXMgbm90IHBlcnNpc3RlIHRvIG5leHQgc3RhdGUuXHJcbiAgICAgIGlmIChtZXRhID09PSAnYWRkJykge1xyXG4gICAgICAgIGlmICghbXV0YXRlZFN1YkRvYy5pZCkgbXV0YXRlZFN1YkRvYy5pZCA9IGNyZWF0ZVVVSUQoKTsgLy8gR2VuZXJhdGUgSUQgaWYgbm90IGRvbmUgeWV0LlxyXG4gICAgICAgIC8vIE5vdyBwdXQgYW4gJ2FkZCcgbXV0YXRpb24gaW4gdGhlIGJhdGNoIHF1ZXVlLlxyXG4gICAgICAgIGJhdGNoLmFkZChmb3JlaWduVGFibGUsIG11dGF0ZWRTdWJEb2MpO1xyXG4gICAgICB9IGVsc2UgaWYgKG1ldGEgPT09ICd1cGRhdGUnKSB7XHJcbiAgICAgICAgYmF0Y2gucHV0KGZvcmVpZ25UYWJsZSwgbXV0YXRlZFN1YkRvYyk7XHJcbiAgICAgIH1cclxuICAgICAgYmF0Y2gubGluayh0YWJsZSwgZG9jSWQsIGZvcmVpZ25UYWJsZSwgbXV0YXRlZFN1YkRvYy5pZCwgbmF2UHJvcCk7XHJcblxyXG4gICAgICAvLyBVcGRhdGUgcmVzdWx0IHNvIHRoYXQgc3RhdGUgaXMgcmVmbGVjdGVkIGFmdGVyIHN1Y2Nlc2Z1bCBQT1NUIHRvIHNlcnZlci5cclxuICAgICAgaWYgKCFkb2NVcGRhdGVzW25hdlByb3BdKSBkb2NVcGRhdGVzW25hdlByb3BdID0ge307XHJcbiAgICAgIGRvY1VwZGF0ZXNbbmF2UHJvcF1bYS5pZHhdID0geyRzZXQ6IG11dGF0ZWRTdWJEb2N9O1xyXG4gICAgfVxyXG4gICAgY29uc3QgcmVtb3ZlZCA9IG9sZExpc3QuZmlsdGVyKG8gPT4gIW5ld0xpc3Quc29tZShuID0+IG4uaWQgPT09IG8uaWQpKTtcclxuICAgIGZvciAobGV0IHIgb2YgcmVtb3ZlZCkge1xyXG4gICAgICBiYXRjaC51bmxpbmsodGFibGUsIGRvY0lkLCBmb3JlaWduVGFibGUsIHIuaWQsIG5hdlByb3ApO1xyXG4gICAgfVxyXG4gICAgY29uc3QgdXBkYXRlZCA9IHR1cGxlcy5maWx0ZXIodHVwbGUgPT4gb2xkTGlzdC5zb21lKG8gPT4gby5pZCA9PT0gdHVwbGUuZG9jLmlkICYmIHR1cGxlLmRvYy4kbWV0YSA9PT0gJ3VwZGF0ZScpKTtcclxuICAgIGZvciAobGV0IHUgb2YgdXBkYXRlZCkge1xyXG4gICAgICBjb25zdCBtdXRhdGVkU3ViRG9jID0gey4uLnUuZG9jfTtcclxuICAgICAgZGVsZXRlIG11dGF0ZWRTdWJEb2MuJG1ldGE7XHJcbiAgICAgIGJhdGNoLnB1dChmb3JlaWduVGFibGUsIG11dGF0ZWRTdWJEb2MpO1xyXG5cclxuICAgICAgLy8gVXBkYXRlIHJlc3VsdCBzbyB0aGF0ICRtZXRhIGlzIHJlbW92ZWQgZnJvbSBuYXZpZ2F0aW9uIHByb3AgYWZ0ZXIgc3VjY2Vzc2Z1bCBQT1NUIHRvIHNlcnZlci5cclxuICAgICAgaWYgKCFkb2NVcGRhdGVzW25hdlByb3BdKSBkb2NVcGRhdGVzW25hdlByb3BdID0ge307XHJcbiAgICAgIGRvY1VwZGF0ZXNbbmF2UHJvcF1bdS5pZHhdID0geyRzZXQ6IG11dGF0ZWRTdWJEb2N9O1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gdXBkYXRlKG5ld0RvYywgZG9jVXBkYXRlcyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkdEZvcm1hdChkYXRlVGltZTogbnVtYmVyIHwgRGF0ZSB8IG1vbWVudC5Nb21lbnQpIHtcclxuICByZXR1cm4gbW9tZW50KGRhdGVUaW1lKS5mb3JtYXQoJ1lZTU1ERCBISDptbScpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2hvcnREYXRlRm9ybWF0KGRhdGVUaW1lOiBudW1iZXIgfCBEYXRlIHwgbW9tZW50Lk1vbWVudCkge1xyXG4gIHJldHVybiBtb21lbnQoZGF0ZVRpbWUpLmZvcm1hdCgnWVlNTUREJyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzaG9ydFBlcnNvbk5hbWVGb3JtYXQobmFtZTogc3RyaW5nKSB7XHJcbiAgaWYgKCFuYW1lKSByZXR1cm4gXCJcIjtcclxuICBjb25zdCBuYW1lcyA9IG5hbWUuc3BsaXQoJyAnKS5maWx0ZXIobiA9PiAhIW4pO1xyXG4gIGNvbnN0IGxhc3ROYW1lID0gbmFtZXMucG9wKCk7XHJcbiAgcmV0dXJuIG5hbWVzLm1hcChuYW1lID0+IGAke25hbWVbMF19LmApLmNvbmNhdChsYXN0TmFtZSkuam9pbignICcpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlTW9kaWZpY2F0aW9uU3RhbXAgKG5vdzogbnVtYmVyLCBvYmo6IE1vZGlmaWNhdGlvblRyYWNrZWQsIHVzZXI6IFVzZXIpIHtcclxuICByZXR1cm4gdXBkYXRlKG9iaiwge1xyXG4gICAgZGF0ZVRpbWU6IHskc2V0OiBub3d9LCAvLyBGb3IgcXVlcmllcy4uLlxyXG4gICAgbW9kaWZpZWREYXRlOiB7JHNldDogbm93fSxcclxuICAgIG1vZGlmaWVkQnk6IHtcclxuICAgICAgJHNldDoge1xyXG4gICAgICAgIG5hbWU6IHVzZXIuZGlzcGxheU5hbWUsXHJcbiAgICAgICAgdXJsOiBcIm1haWx0bzpcIiArIHVzZXIubWFpbFxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVDcmVhdGlvblN0YW1wPFQgZXh0ZW5kcyBNb2RpZmljYXRpb25UcmFja2VkPiAobm93OiBudW1iZXIsIG9iajogVCwgdXNlcjogVXNlcik6IFQge1xyXG4gIHJldHVybiB1cGRhdGUob2JqLCB7XHJcbiAgICBjcmVhdGVkRGF0ZTogeyRzZXQ6IG5vd30sXHJcbiAgICBjcmVhdGVkQnk6IHtcclxuICAgICAgJHNldDoge1xyXG4gICAgICAgIG5hbWU6IHVzZXIuZGlzcGxheU5hbWUsXHJcbiAgICAgICAgdXJsOiBcIm1haWx0bzpcIiArIHVzZXIubWFpbFxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRFbWFpbEZyb21Eb2NBY2Nlc3MgKHJlc291cmNlOiBTb2Z0RG9jdW1lbnRBY2Nlc3MpIHtcclxuICBpZiAocmVzb3VyY2UuZW1haWwpIHJldHVybiByZXNvdXJjZS5lbWFpbDtcclxuICByZXR1cm4gcmVzb3VyY2UudXJsID9cclxuICAgIHJlc291cmNlLnVybC5zdGFydHNXaXRoKCdtYWlsdG86JykgP1xyXG4gICAgICByZXNvdXJjZS51cmwuc3Vic3RyaW5nKCdtYWlsdG86Jy5sZW5ndGgpIDpcclxuICAgICAgcmVzb3VyY2UudXJsIDpcclxuICAgIHJlc291cmNlLnVybDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZU1vZGlmaWNhdGlvbkFuZENyZWF0aW9uU3RhbXBzKG9iajogTW9kaWZpY2F0aW9uVHJhY2tlZCwgdXNlcjogVXNlcikge1xyXG4gIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XHJcbiAgb2JqID0gdXBkYXRlTW9kaWZpY2F0aW9uU3RhbXAobm93LCBvYmosIHVzZXIpO1xyXG4gIGlmICghb2JqLmNyZWF0ZWRCeSkgb2JqID0gdXBkYXRlQ3JlYXRpb25TdGFtcChub3csIG9iaiwgdXNlcik7XHJcbiAgcmV0dXJuIG9iajtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5RXRhZ3MoZG9jOiBEb2N1bWVudCwgbmV3RXRhZ3M6IHtbaWQ6IHN0cmluZ106IHN0cmluZ30sIGdyYXBoczogc3RyaW5nW10pIHtcclxuICBjb25zdCByZXMgPSB7Li4uZG9jfTtcclxuICBjb25zdCBldGFnID0gbmV3RXRhZ3NbZG9jLmlkXTtcclxuICBpZiAoZXRhZylcclxuICAgIHJlcy4kZXRhZyA9IGV0YWc7XHJcbiAgZm9yIChsZXQgbGFiZWwgb2YgZ3JhcGhzKSB7XHJcbiAgICBjb25zdCBuZXdMaXN0ID0gZG9jW2xhYmVsXS5tYXAoZCA9PiBhcHBseUV0YWdzKGQsIG5ld0V0YWdzLCBbXSkpO1xyXG4gICAgcmVzW2xhYmVsXSA9IG5ld0xpc3Q7XHJcbiAgfVxyXG4gIHJldHVybiByZXM7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZWFkQmxvYihibG9iOiBCbG9iLCBtOiAocjpGaWxlUmVhZGVyKT0+dm9pZCkge1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG4gICAgcmVhZGVyLm9ubG9hZCA9IGV2ID0+IHJlc29sdmUoKGV2LnRhcmdldCBhcyBhbnkpLnJlc3VsdCk7XHJcbiAgICByZWFkZXIub25hYm9ydCA9IGV2ID0+IHJlamVjdChuZXcgRXJyb3IoXCJmaWxlIHJlYWQgYWJvcnRlZFwiKSk7XHJcbiAgICByZWFkZXIub25lcnJvciA9IGV2ID0+IHJlamVjdCgoZXYudGFyZ2V0IGFzIGFueSkuZXJyb3IpO1xyXG4gICAgbShyZWFkZXIpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVhZEJsb2JBc1RleHQgKGJsb2I6IEJsb2IpIHtcclxuICByZXR1cm4gcmVhZEJsb2IoYmxvYiwgcj0+ci5yZWFkQXNUZXh0KGJsb2IpKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlYWRCbG9iQXNEYXRhVXJsIChibG9iOiBCbG9iKSB7XHJcbiAgcmV0dXJuIHJlYWRCbG9iKGJsb2IsIHI9PnIucmVhZEFzRGF0YVVSTChibG9iKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhbGxvd0NvcHkoZTogUmVhY3QuRHJhZ0V2ZW50PEhUTUxEaXZFbGVtZW50Pikge1xyXG4gIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGUuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3QgPSAnY29weSc7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVDb3Vyc2VCdWlsZGVyU3RhdHVzKHN0YXR1czogJ3Vuc2F2ZWQnIHwgJ3NhdmVkJyB8ICdlcnJvcicgfCAnJykge1xyXG4gIGNvbnN0IGRpdiA9ICQoJ2Rpdi5jb3Vyc2UtYnVpbGRlcicpWzBdO1xyXG4gIGlmIChkaXYpIGRpdi5jbGFzc05hbWUgPSBcImNvdXJzZS1idWlsZGVyXCIgKyAoc3RhdHVzID8gXCIgc3RhdHVzIFwiICsgc3RhdHVzIDogXCJcIik7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2FkQ291cnNlKGlkOiBzdHJpbmcsIG9wdGlvbnM/OiB7XHJcbiAgICBpbmNsdWRlVGVtcGxhdGVDaGFpbj86IGJvb2xlYW4sXHJcbiAgICBpbmNsdWRlPzogc3RyaW5nW11cclxuICB9KTogUHJvbWlzZTxDb3Vyc2U+XHJcbntcclxuICBjb25zdCBjbGllbnQgPSBlbnYua2VkQmFja2VuZENsaWVudDtcclxuICBjb25zdCBpbmNsdWRlVGVtcGxhdGVDaGFpbiA9IG9wdGlvbnMgJiYgb3B0aW9ucy5pbmNsdWRlVGVtcGxhdGVDaGFpbjtcclxuICBjb25zdCBpbmNsdWRlVGFza3MgPSAhb3B0aW9ucyB8fCAhb3B0aW9ucy5pbmNsdWRlIHx8IG9wdGlvbnMuaW5jbHVkZS5pbmRleE9mKFwidGFza3NcIikgIT09IC0xO1xyXG4gIGNvbnN0IFtjb3Vyc2UsIGNvdXJzZVRhc2tzLCB0ZW1wbGF0ZUNoYWluXSA9IChhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICBjbGllbnQuZ2V0KFwiY291cnNlc1wiLCBpZCwge1xyXG4gICAgICBpbmNsdWRlOiBvcHRpb25zICYmIG9wdGlvbnMuaW5jbHVkZSA/IG9wdGlvbnMuaW5jbHVkZS5maWx0ZXIoaSA9PiBpICE9PSBcInRhc2tzXCIpIDogW1xyXG4gICAgICAgIFwiY2VudHJhbENvbnRlbnRcIixcclxuICAgICAgICBcImtub3dsZWRnZVJlcXVpcmVtZW50c1wiLFxyXG4gICAgICAgIFwiYWJpbGl0aWVzXCIsXHJcbiAgICAgICAgXCJpbWFnZXNcIixcclxuICAgICAgICBcImFjbFwiIC8vIERvbid0IGluY2x1ZGUgdGFza3MgaGVyZS4uLlxyXG4gICAgICBdXHJcbiAgICB9KSxcclxuICAgIC8vIC4uLiBidXQgaW5jbHVkZSB0YXNrcyBoZXJlIGluc3RlYWQgc28gdGhhdCB3ZSBjYW4gbG9hZCB0aGUgZ3JhcGhzIGZvciB0aGVcclxuICAgIC8vIHRhc2tzIGFzIHdlbGwhXHJcbiAgICBpbmNsdWRlVGFza3MgJiYgY2xpZW50Lmxpc3QoXCJ0YXNrc1wiLCB7XHJcbiAgICAgIGhhc0VkZ2VzRnJvbTogaWQsXHJcbiAgICAgIGluY2x1ZGU6IFsna25vd2xlZGdlUmVxdWlyZW1lbnRzJywgJ2NlbnRyYWxDb250ZW50JywgJ2FiaWxpdGllcycsICdhY2wnXSxcclxuICAgICAgZmxhZ3M6IFsnaW5jbHVkZUlkc09ubHknXSAvLyBEb24ndCBuZWVkIHJlZHVuZGFudCBpbmZvIHRoYXQncyBhbHJlYWR5IG9uIGNvdXJzZVxyXG4gICAgfSksXHJcbiAgICBpbmNsdWRlVGVtcGxhdGVDaGFpbiAmJiBjbGllbnQubGlzdChcImNvdXJzZXNcIiwge1xyXG4gICAgICBoYXNFZGdlc0Zyb206IGlkLFxyXG4gICAgICBmbGFnczogWydpZHNPbmx5J11cclxuICAgIH0pXHJcbiAgXSkpIGFzIFtDb3Vyc2UsIFRhc2tbXSwgQ291cnNlW11dO1xyXG4gIGNvdXJzZS50YXNrcyA9IGNvdXJzZVRhc2tzO1xyXG5cclxuICAvLyBDb3JyZWN0IHRoZSBvcmRlciBvZiBBYmlsaXRpZXNcclxuICBpZiAoY291cnNlLmFiaWxpdGllcyAmJiBjb3Vyc2UuYWJpbGl0aWVzT3JkZXIpIHtcclxuICAgIGNvdXJzZS5hYmlsaXRpZXMgPSBjb3Vyc2UuYWJpbGl0aWVzT3JkZXIubWFwKGlkID0+XHJcbiAgICAgIGNvdXJzZS5hYmlsaXRpZXMuZmluZChhID0+IGEuaWQgPT09IGlkKSk7XHJcbiAgfVxyXG5cclxuICAvLyBDb3JyZWN0IHRoZSBvcmRlciBvZiBLbm93bGVkZ2VSZXF1aXJlbWVudHNcclxuICBpZiAoY291cnNlLmtub3dsZWRnZVJlcXVpcmVtZW50cyAmJiBjb3Vyc2Uua25vd2xlZGdlUmVxdWlyZW1lbnRzT3JkZXIpIHtcclxuICAgIGNvdXJzZS5rbm93bGVkZ2VSZXF1aXJlbWVudHMgPSBjb3Vyc2Uua25vd2xlZGdlUmVxdWlyZW1lbnRzT3JkZXIubWFwKGlkID0+XHJcbiAgICAgIGNvdXJzZS5rbm93bGVkZ2VSZXF1aXJlbWVudHMuZmluZChjID0+IGMuaWQgPT09IGlkKSk7XHJcbiAgfVxyXG5cclxuICAvLyBDb3JyZWN0IHRoZSBvcmRlciBvZiBDZW50cmFsQ29udGVudFxyXG4gIGlmIChjb3Vyc2UuY2VudHJhbENvbnRlbnQgJiYgY291cnNlLmNlbnRyYWxDb250ZW50T3JkZXIpIHtcclxuICAgIGNvdXJzZS5jZW50cmFsQ29udGVudCA9IGNvdXJzZS5jZW50cmFsQ29udGVudE9yZGVyLm1hcChpZCA9PlxyXG4gICAgICBjb3Vyc2UuY2VudHJhbENvbnRlbnQuZmluZChjYyA9PiBjYy5pZCA9PT0gaWQpKTsvLy5maWx0ZXIoeCA9PiAhIXgpOy8vIERlYnVnZ2luZyBzb210aGluJyAuIE5vcm1hbGx5IHRoZSBsYXN0IC5maWx0ZXIoKS4uLiBwYXJ0IHNob3VsZCBub3QgYmUgbmVzY2Vzc2FyeS4uLlxyXG4gIH1cclxuICBcclxuICAvLyBJbmNsdWRlIHRlbXBsYXRlIGNoYWluIGlmIHJlcXVlc3RlZC5cclxuICBpZiAoaW5jbHVkZVRlbXBsYXRlQ2hhaW4pIGNvdXJzZS50ZW1wbGF0ZUNoYWluID0gdGVtcGxhdGVDaGFpbjtcclxuICByZXR1cm4gY291cnNlO1xyXG59XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IGVudiBmcm9tICcuLi8uLi8uLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5pbXBvcnQgeyBBc3NpZ25tZW50LCBVcmt1bmRSZXNwb25zZSB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgc2hvd0Vycm9yLCBjb21wYXJlUHJvcHMgfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IFNwaW5uZXIgfSBmcm9tICcuLi8uLi9jb3Vyc2UtYnVpbGRlci9zdWItY29tcG9uZW50cy9zcGlubmVyJztcclxuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xyXG5pbXBvcnQgeyBIdHRwRXJyb3IsIGNyZWF0ZVVVSUQgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XHJcbmltcG9ydCB7IGhhc1dyaXRlQWNjZXNzLCBpc1RlYWNoZXJBdFNjaG9vbCB9IGZyb20gJy4uLy4uLy4uL2FjY2Vzcy1jb250cm9sJztcclxuaW1wb3J0IGRvd25sb2FkIGZyb20gJ2Rvd25sb2FkanMnO1xyXG5pbXBvcnQge1xyXG4gIGdldFVya3VuZFNpZ25pZmljYW5jZUNsYXNzLFxyXG4gIGdldFVya3VuZFN0YXR1c0NsYXNzLFxyXG4gIGdldFVya3VuZEhvdmVyVGV4dH0gZnJvbSAnLi91cmt1bmQtdXRpbHMnO1xyXG5pbXBvcnQgeyBpc0VtcGxveWVlIH0gZnJvbSAnLi4vLi4vY291cnNlLWJ1aWxkZXIta3MvbG9naWMvaXMtZW1wbG95ZWUnO1xyXG5pbXBvcnQgeyBHb29nbGVQaWNrZXIgfSBmcm9tICcuLi8uLi8uLi9hcGlzL2dvb2dsZS1waWNrZXInO1xyXG5pbXBvcnQgeyBEcml2ZUJ1dHRvbiB9IGZyb20gXCIuLi8uLi8uLi9hcGlzL2J1dHRvbnNcIjtcclxuaW1wb3J0IHsgZmVhdHVyZXMgfSBmcm9tICcuLi8uLi8uLi9mZWF0dXJlcyc7XHJcblxyXG5jb25zdCBNQVhfVVJLVU5EX0ZJTEVfU0laRV9NQiA9IDUwO1xyXG5jb25zdCBNQVhfTk9OVVJLVU5EX0ZJTEVfU0laRV9NQiA9IDEwMDtcclxuY29uc3QgQUxMT1dFRF9FWFRFTlNJT05TID0gW1xyXG4gIFwiLnBkZlwiLFxyXG4gIFwiLm9kdFwiLFxyXG4gIFwiLmRvY3hcIixcclxuICBcIi5kb2NcIixcclxuICBcIi5jYWRcIixcclxuICBcIi53YXZcIixcclxuICBcIi5tcDNcIixcclxuICBcIi5tcGVnNFwiLFxyXG4gIFwiLm1wNFwiLFxyXG4gIFwiLnppcFwiLFxyXG4gIFwiLnBuZ1wiLFxyXG4gIFwiLmpwZ1wiLFxyXG4gIFwiLmpwZWdcIixcclxuICBcIi5naWZcIlxyXG5dO1xyXG5jb25zdCBVUktVTkRfRVhURU5TSU9OUyA9IFtcclxuICBcIi5wZGZcIixcclxuICBcIi5vZHRcIixcclxuICBcIi5kb2N4XCIsXHJcbiAgXCIuZG9jXCJcclxuXTtcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgY291cnNlSWQ6IHN0cmluZztcclxuICB0YXNrSWQ6IHN0cmluZztcclxuICBzY2hvb2w6IHN0cmluZztcclxufVxyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICBhc3NpZ25tZW50czogQXNzaWdubWVudFtdO1xyXG4gIGxvYWRpbmc6IGJvb2xlYW47XHJcbiAgdXBsb2FkaW5nRmlsZT86IEZpbGU7XHJcbiAgZXJyb3I/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBUYXNrQXNzaWdubWVudHMgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsIFN0YXRlPiB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICBhc3NpZ25tZW50czogW10sXHJcbiAgICAgIGxvYWRpbmc6IHRydWVcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRTdGF0ZVByb21pc2VkKGNiOiAocHJldlN0YXRlOiBSZWFkb25seTxTdGF0ZT4sIHByb3BzOiBQcm9wcykgPT4gUGFydGlhbDxTdGF0ZT4pIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHN1cGVyLnNldFN0YXRlKGNiIGFzIGFueSwgcmVzb2x2ZSkpO1xyXG4gIH0gIFxyXG5cclxuICBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgIHRoaXMubG9hZCgpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHM6IFByb3BzKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAobmV4dFByb3BzLnRhc2tJZCAhPT0gdGhpcy5wcm9wcy50YXNrSWQgfHxcclxuICAgICAgICAgIG5leHRQcm9wcy5jb3Vyc2VJZCAhPT0gdGhpcy5wcm9wcy5jb3Vyc2VJZClcclxuICAgICAge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2V0U3RhdGVQcm9taXNlZCgoKT0+KHtcclxuICAgICAgICAgIGFzc2lnbm1lbnRzOiBbXSxcclxuICAgICAgICAgIGxvYWRpbmc6IHRydWVcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkKCk7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICBzaG93RXJyb3IoZXJyKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHVwZGF0ZShhc3NpZ25tZW50czogQXNzaWdubWVudFtdLCBhc3NpZ25tZW50OiBBc3NpZ25tZW50KTogQXNzaWdubWVudFtdIHtcclxuICAgIGNvbnN0IHJldHZhbCA9IFtcclxuICAgICAgYXNzaWdubWVudCxcclxuICAgICAgLi4uYXNzaWdubWVudHMuZmlsdGVyKCh7dXNlciwgZmlsZW5hbWV9KSA9PlxyXG4gICAgICAgIHVzZXIgIT09IGFzc2lnbm1lbnQudXNlciB8fFxyXG4gICAgICAgIGZpbGVuYW1lICE9PSBhc3NpZ25tZW50LmZpbGVuYW1lKV07XHJcbiAgICByZXR1cm4gcmV0dmFsO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgcmVmcmVzaEFzc2lnbm1lbnQoYXNzaWdubWVudDogQXNzaWdubWVudCkge1xyXG4gICAgY29uc3QgY2xpZW50ID0gZW52LmtlZEJhY2tlbmRDbGllbnQuaHR0cDtcclxuICAgIGNvbnN0IHtjb3Vyc2VJZCwgdGFza0lkLCBzY2hvb2x9ID0gdGhpcy5wcm9wcztcclxuICAgIGNvbnN0IHt1c2VyLCBmaWxlbmFtZX0gPSBhc3NpZ25tZW50O1xyXG4gICAgYXdhaXQgdGhpcy5zZXRTdGF0ZSgoe2Fzc2lnbm1lbnRzfSkgPT4gKHtcclxuICAgICAgYXNzaWdubWVudHM6IHRoaXMudXBkYXRlKGFzc2lnbm1lbnRzLCB7Li4uYXNzaWdubWVudCwgaXNSZWZyZXNoaW5nOiB0cnVlfSlcclxuICAgIH0pKTtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlcSA9IGF3YWl0IGNsaWVudC5nZXQoYGFzc2lnbm1lbnRzL3Vya3VuZC8ke3NjaG9vbH0vJHtjb3Vyc2VJZH0vJHt0YXNrSWR9LyR7dXNlcn0vJHtmaWxlbmFtZX1gKTtcclxuICAgICAgaWYgKHJlcS5zdGF0dXMgPj0gNDAwKSB0aHJvdyBuZXcgSHR0cEVycm9yKHJlcS5zdGF0dXMsIGF3YWl0IHJlcS50ZXh0KCkpO1xyXG4gICAgICBjb25zdCByZXNKc29uID0gYXdhaXQgcmVxLnRleHQoKTtcclxuICAgICAgYXdhaXQgdGhpcy5zZXRTdGF0ZSgoe2Fzc2lnbm1lbnRzfSkgPT4gKHtcclxuICAgICAgICBhc3NpZ25tZW50czogdGhpcy51cGRhdGUoYXNzaWdubWVudHMsIHsuLi5hc3NpZ25tZW50LCBpc1JlZnJlc2hpbmc6IGZhbHNlLCBtZXRhZGF0YToge1xyXG4gICAgICAgICAgLi4uYXNzaWdubWVudC5tZXRhZGF0YSxcclxuICAgICAgICAgIHVya3VuZFJlc3BvbnNlOiByZXNKc29uXHJcbiAgICAgICAgfX0pXHJcbiAgICAgIH0pKTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgYXdhaXQgdGhpcy5zZXRTdGF0ZSgoe2Fzc2lnbm1lbnRzfSkgPT4gKHtcclxuICAgICAgICBhc3NpZ25tZW50czogdGhpcy51cGRhdGUoYXNzaWdubWVudHMsIHtcclxuICAgICAgICAgIC4uLmFzc2lnbm1lbnQsXHJcbiAgICAgICAgICBpc1JlZnJlc2hpbmc6IGZhbHNlLFxyXG4gICAgICAgICAgcmVmcmVzaEVycm9yOiBlXHJcbiAgICAgICAgfSlcclxuICAgICAgfSkpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgbG9hZCgpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGNsaWVudCA9IGVudi5rZWRCYWNrZW5kQ2xpZW50Lmh0dHA7XHJcbiAgICAgIGNvbnN0IHtjb3Vyc2VJZCwgdGFza0lkLCBzY2hvb2x9ID0gdGhpcy5wcm9wcztcclxuICAgICAgY29uc3QgdGVhY2hlckF0U2Nob29sID0gaXNUZWFjaGVyQXRTY2hvb2woZW52LmN1cnJlbnRVc2VyLCBzY2hvb2wpO1xyXG4gICAgICBjb25zdCByZXMgPSBhd2FpdCAodGVhY2hlckF0U2Nob29sID9cclxuICAgICAgICBjbGllbnQuZ2V0KGBhc3NpZ25tZW50cy8ke3NjaG9vbH0vJHtjb3Vyc2VJZH0vJHt0YXNrSWR9YCkgOlxyXG4gICAgICAgIGNsaWVudC5nZXQoYGFzc2lnbm1lbnRzLyR7c2Nob29sfS8ke2NvdXJzZUlkfS8ke3Rhc2tJZH0vJHtlbnYuY3VycmVudFVzZXIubWFpbH1gKSk7XHJcbiAgICAgIGlmIChyZXMuc3RhdHVzICE9PSAyMDApIHtcclxuICAgICAgICB0aHJvdyBuZXcgSHR0cEVycm9yKHJlcy5zdGF0dXMsIGF3YWl0IHJlcy50ZXh0KCkpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBhc3NpZ25tZW50cyA9IGF3YWl0IHJlcy5qc29uKCkgYXMgQXNzaWdubWVudFtdO1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICBlcnJvcjogbnVsbCxcclxuICAgICAgICBsb2FkaW5nOiBmYWxzZSxcclxuICAgICAgICBhc3NpZ25tZW50c1xyXG4gICAgICB9KTtcclxuICAgICAgaWYgKHRlYWNoZXJBdFNjaG9vbCkge1xyXG4gICAgICAgIGNvbnN0IHJlZnJlc2hhYmxlQXNzaWdtZW50cyA9IGFzc2lnbm1lbnRzLmZpbHRlcihhID0+XHJcbiAgICAgICAgICBhLm1ldGFkYXRhICYmIC8vIE11c3QgaGF2ZSBtZXRhZGF0YS51cmt1bmRFeHRlcm5hbElkIE90aGVyd2lzZSBub3QgcG9zc2libGUgdG8gcmVmcmVzaFxyXG4gICAgICAgICAgIWEubWV0YWRhdGEudXJrdW5kVXBsb2FkRXJyb3IgJiYgKCAvLyBOb3QgcG9zc2libGUgdG8gcmVmcmVzaCBpZiB1cGxvYWQgaGFzIGZhaWxlZFxyXG4gICAgICAgICAgICAhYS5tZXRhZGF0YS51cmt1bmRMYXN0UG9sbCB8fCAvLyBOZXZlciBjaGVja2VkIHN0YXR1cyB5ZXRcclxuICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgIFsnQWNjZXB0ZWQnLCAnU3VibWl0dGVkJ10uaW5kZXhPZigoSlNPTi5wYXJzZShhLm1ldGFkYXRhLnVya3VuZFJlc3BvbnNlKVswXSBhcyBVcmt1bmRSZXNwb25zZSkuU3RhdHVzLlN0YXRlKSA+PSAwICYmXHJcbiAgICAgICAgICAgICAgcGFyc2VJbnQoYS5tZXRhZGF0YS51cmt1bmRMYXN0UG9sbCkgPCBtb21lbnQoKS5hZGQoLTE1LCBcInNlY29uZHNcIikudG9EYXRlKCkuZ2V0VGltZSgpKVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIC8vIENoZWNrZWQgc3RhdHVzIGZvciBhIGxvbmcgdGltZSBhZ29cclxuICAgICAgICAgICk7XHJcbiAgICAgICAgZm9yIChsZXQgYSBvZiByZWZyZXNoYWJsZUFzc2lnbWVudHMpIHtcclxuICAgICAgICAgIGF3YWl0IHRoaXMucmVmcmVzaEFzc2lnbm1lbnQoYSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICBsb2FkaW5nOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogYEt1bmRlIGludGUgbGFkZGEgaW5sw6RtbmluZ3N1cHBnaWZ0ZXJgLFxyXG4gICAgICAgIGFzc2lnbm1lbnRzOiBbXVxyXG4gICAgICB9KTtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbkRyYWcgKGV2OiBSZWFjdC5EcmFnRXZlbnQ8SFRNTERpdkVsZW1lbnQ+KSB7XHJcbiAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBldi5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9ICdjb3B5JztcclxuICB9XHJcbiAgXHJcbiAgYXN5bmMgdmVyaWZ5QW5kVXBsb2FkKGZpbGU6IEZpbGUpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmICghZmlsZSkgcmV0dXJuO1xyXG4gICAgICBpZiAodGhpcy5zdGF0ZS5hc3NpZ25tZW50cy5zb21lKGEgPT5cclxuICAgICAgICBhLnVzZXIgPT09IGVudi5jdXJyZW50VXNlci5tYWlsICYmXHJcbiAgICAgICAgYS5maWxlbmFtZSA9PT0gZmlsZS5uYW1lKSlcclxuICAgICAge1xyXG4gICAgICAgIGlmICghY29uZmlybShgRXJzw6R0dGEgYmVmaW50bGlnIGZpbCAoJHtmaWxlLm5hbWV9KT9gKSkge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5wcm9wcy5zY2hvb2wudG9Mb3dlckNhc2UoKSAhPT0gZW52LmN1cnJlbnRVc2VyLnNjaG9vbC50b0xvd2VyQ2FzZSgpKSB7XHJcbiAgICAgICAgaWYgKCFjb25maXJtKGBVcHBnaWZ0ZW4gdGlsbGjDtnIgZW4gYW5uYW4gc2tvbGEgKCR7dGhpcy5wcm9wcy5zY2hvb2x9KS5cXG5gK1xyXG4gICAgICAgICAgYFZpbGwgZHUgw6RuZMOlIGzDpG1uYSBpbiBkaXR0IGFyYmV0ZSBow6RyP2ApKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7dXBsb2FkaW5nRmlsZTogZmlsZX0pO1xyXG4gICAgICBhd2FpdCB0aGlzLnVwbG9hZChmaWxlKTtcclxuICAgICAgYXdhaXQgdGhpcy5sb2FkKCk7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgIHVwbG9hZGluZ0ZpbGU6IG51bGxcclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICBlcnJvcjogXCJLdW5kZSBpbnRlIGxhZGRhIHVwcCBmaWxlbi4gXCIgKyAoZXJyb3IubWVzc2FnZSB8fCBlcnJvciksXHJcbiAgICAgICAgdXBsb2FkaW5nRmlsZTogbnVsbFxyXG4gICAgICB9KTtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIGFzeW5jIHVwbG9hZChmaWxlOiBGaWxlKSB7XHJcbiAgICBjb25zdCBjbGllbnQgPSBlbnYua2VkQmFja2VuZENsaWVudC5odHRwO1xyXG4gICAgY29uc3Qge2NvdXJzZUlkLCB0YXNrSWQsIHNjaG9vbH0gPSB0aGlzLnByb3BzO1xyXG4gICAgY29uc3Qge21haWx9ID0gZW52LmN1cnJlbnRVc2VyO1xyXG4gICAgY29uc3QgaXNVcmt1bmRFeHRlbnNpb24gPSBVUktVTkRfRVhURU5TSU9OU1xyXG4gICAgICAuaW5kZXhPZihcIi5cIitmaWxlLm5hbWUuc3BsaXQoJy4nKS5yZXZlcnNlKClbMF0udG9Mb3dlckNhc2UoKSkgPj0gMDtcclxuICAgIGlmIChpc1Vya3VuZEV4dGVuc2lvbikge1xyXG4gICAgICBpZiAoZmlsZS5zaXplID4gTUFYX1VSS1VORF9GSUxFX1NJWkVfTUIgKiAxMDI0ICogMTAyNCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmlsZXIgYXYgZGVubmEgdHlwIGbDpXIgaW50ZSB2YXJhIHN0w7ZycmUgw6RuICR7TUFYX1VSS1VORF9GSUxFX1NJWkVfTUJ9IE1CYCk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmIChmaWxlLnNpemUgPiBNQVhfTk9OVVJLVU5EX0ZJTEVfU0laRV9NQiAqIDEwMjQgKiAxMDI0KSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGaWxlbiBmw6VyIGludGUgdmFyYSBzdMO2cnJlIMOkbiAke01BWF9OT05VUktVTkRfRklMRV9TSVpFX01CfSBNQmApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBsb3dlckZpbGVuYW1lID0gZmlsZS5uYW1lLnRvTG93ZXJDYXNlKCk7XHJcbiAgICBpZiAoIUFMTE9XRURfRVhURU5TSU9OUy5zb21lKGV4dCA9PiBsb3dlckZpbGVuYW1lLmVuZHNXaXRoKGV4dCkpKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmlsZW5zIMOkbmRlbHNlIG3DpXN0ZSB2YXJhICR7QUxMT1dFRF9FWFRFTlNJT05TLmpvaW4oJyAvICcpfWApO1xyXG4gICAgfSBcclxuICAgIGNvbnN0IGJvZHkgPSBuZXcgRm9ybURhdGEoKTtcclxuICAgIGJvZHkuYXBwZW5kKCdmaWxlcycsIGZpbGUpO1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgZW52LmtlZEJhY2tlbmRDbGllbnQuaHR0cC5mZXRjaChcclxuICAgICAgYGFzc2lnbm1lbnRzLyR7c2Nob29sfS8ke2NvdXJzZUlkfS8ke3Rhc2tJZH0vJHttYWlsfWAsXHJcbiAgICAgICdwdXQnLFxyXG4gICAgICB7fSxcclxuICAgICAge1xyXG4gICAgICAgIHVzZXJEaXNwbGF5TmFtZTogZW52LmN1cnJlbnRVc2VyLmRpc3BsYXlOYW1lXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBib2R5XHJcbiAgICAgIH0pO1xyXG4gICAgaWYgKHJlcy5zdGF0dXMgIT09IDIwMCkge1xyXG4gICAgICB0aHJvdyBuZXcgSHR0cEVycm9yKHJlcy5zdGF0dXMsIGF3YWl0IHJlcy50ZXh0KCkpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZG93bmxvYWQoZmlsZTogQXNzaWdubWVudCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcmVzID0gYXdhaXQgZW52LmtlZEJhY2tlbmRDbGllbnQuaHR0cC5mZXRjaChmaWxlLm1lZGlhTGluaywgJ2dldCcsIHt9KTtcclxuICAgICAgaWYgKHJlcy5zdGF0dXMgPj0gNDAwKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEh0dHBFcnJvcihyZXMuc3RhdHVzLCBhd2FpdCByZXMudGV4dCgpKTtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBibG9iID0gYXdhaXQgcmVzLmJsb2IoKTtcclxuICAgICAgZG93bmxvYWQoYmxvYiwgZmlsZS5maWxlbmFtZSwgZmlsZS5jb250ZW50VHlwZSk7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7ZXJyb3I6IFwiS3VuZGUgaW50ZSBsYWRkYSBuZWQgZmlsZW4uIFwiICsgKGVyci5tZXNzYWdlIHx8IGVycil9KTtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgfSAgICBcclxuICB9XHJcblxyXG4gIGFzeW5jIGRlbGV0ZSh1cmw6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgdGhpcy5zZXRTdGF0ZVByb21pc2VkKCh7YXNzaWdubWVudHN9KSA9PiAoe2Fzc2lnbm1lbnRzOiBhc3NpZ25tZW50cy5tYXAoYSA9PiBhLm1lZGlhTGluayA9PT0gdXJsID9cclxuICAgICAgICB7Li4uYSwgbWV0YWRhdGE6IHsuLi5hLm1ldGFkYXRhLCAkbWV0YTogJ2RlbGV0ZSd9fSA6IHsuLi5hfSl9KSk7XHJcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGVudi5rZWRCYWNrZW5kQ2xpZW50Lmh0dHAuZmV0Y2godXJsLCAnZGVsZXRlJywge30pO1xyXG4gICAgICBpZiAocmVzLnN0YXR1cyA+PSA0MDApIHtcclxuICAgICAgICB0aHJvdyBuZXcgSHR0cEVycm9yKHJlcy5zdGF0dXMsIGF3YWl0IHJlcy50ZXh0KCkpO1xyXG4gICAgICB9XHJcbiAgICAgIGF3YWl0IHRoaXMubG9hZCgpO1xyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe2Vycm9yOiBcIkt1bmRlIGludGUgdGEgYm9ydCBmaWxlbi4gXCIgKyAoZXJyLm1lc3NhZ2UgfHwgZXJyKX0pO1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7Y291cnNlSWQsIHRhc2tJZCwgc2Nob29sfSA9IHRoaXMucHJvcHM7XHJcbiAgICBjb25zdCB7bG9hZGluZywgYXNzaWdubWVudHMsIGVycm9yLCB1cGxvYWRpbmdGaWxlfSA9IHRoaXMuc3RhdGU7XHJcbiAgICBjb25zdCB0ZWFjaGVyQXRUaGlzU2Nob29sID0gaXNUZWFjaGVyQXRTY2hvb2woZW52LmN1cnJlbnRVc2VyLCBzY2hvb2wpO1xyXG4gICAgbGV0IGZpbGVzID0gWy4uLmFzc2lnbm1lbnRzXTtcclxuICAgIGNvbnN0IHNob3dHb29nbGVQaWNrZXIgPSBmZWF0dXJlcy5waWNrZXI7XHJcbiAgICBcclxuICAgIGlmICh1cGxvYWRpbmdGaWxlKSB7XHJcbiAgICAgIGNvbnN0IHZpcnR1YWxGaWxlOiBBc3NpZ25tZW50ID0ge1xyXG4gICAgICAgIHNjaG9vbCxcclxuICAgICAgICBjb3Vyc2VJZCxcclxuICAgICAgICB0YXNrSWQsXHJcbiAgICAgICAgZmlsZW5hbWU6IHVwbG9hZGluZ0ZpbGUubmFtZSxcclxuICAgICAgICBzaXplOiB1cGxvYWRpbmdGaWxlLnNpemUsXHJcbiAgICAgICAgdXNlcjogZW52LmN1cnJlbnRVc2VyLm1haWwsXHJcbiAgICAgICAgY29udGVudFR5cGU6IHVwbG9hZGluZ0ZpbGUudHlwZSxcclxuICAgICAgICB1cGxvYWREYXRlOiBEYXRlLm5vdygpLFxyXG4gICAgICAgIG1lZGlhTGluazogYGFzc2lnbm1lbnRzLyR7c2Nob29sfS8ke2NvdXJzZUlkfS8ke3Rhc2tJZH0vJHtlbnYuY3VycmVudFVzZXIubWFpbH0vJHt1cGxvYWRpbmdGaWxlLm5hbWV9YCxcclxuICAgICAgICBtZXRhZGF0YTogeyRtZXRhOiAnYWRkJywgdXNlckRpc3BsYXlOYW1lOiBlbnYuY3VycmVudFVzZXIuZGlzcGxheU5hbWV9IGFzIEFzc2lnbm1lbnRbXCJtZXRhZGF0YVwiXVxyXG4gICAgICB9O1xyXG4gICAgICBmaWxlcyA9IGZpbGVzLmZpbHRlcihmaWxlID0+IGZpbGUubWVkaWFMaW5rICE9PSB2aXJ0dWFsRmlsZS5tZWRpYUxpbmspO1xyXG4gICAgICBmaWxlcyA9IFsuLi5maWxlcywgdmlydHVhbEZpbGVdO1xyXG4gICAgfVxyXG4gICAgZmlsZXMgPSBmaWxlcy5zb3J0KGNvbXBhcmVQcm9wcyhbXHJcbiAgICAgIFwibWV0YWRhdGEudXNlckRpc3BsYXlOYW1lXCIsXHJcbiAgICAgIFwiZmlsZW5hbWVcIixcclxuICAgICAgXCJ1cGxvYWREYXRlXCJcclxuICAgICAgXSwgW1wic3ZcIiwgXCJlblwiXSwge3NlbnNpdGl2aXR5OiAnYmFzZSd9KSk7XHJcbiAgICBjb25zdCBoYXNPd25Eb2NzID0gZmlsZXMuc29tZShmaWxlID0+IGZpbGUudXNlciA9PT0gZW52LmN1cnJlbnRVc2VyLm1haWwpO1xyXG4gICAgXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IG9uRHJhZ092ZXI9e2V2ID0+IHRoaXMub25EcmFnKGV2KX0gb25Ecm9wPXtldj0+e1xyXG4gICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdGhpcy52ZXJpZnlBbmRVcGxvYWQoZXYuZGF0YVRyYW5zZmVyLmZpbGVzWzBdKTtcclxuICAgICAgfX0+XHJcbiAgICAgICAge2Vycm9yID8gPD5cclxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImVycm9yXCI+e2Vycm9yfTwvcD5cclxuICAgICAgICA8Lz46IHVuZGVmaW5lZH1cclxuICAgICAgICB7bG9hZGluZyA/IDw+XHJcbiAgICAgICAgICA8U3Bpbm5lciAvPiBMYWRkYXIgaW5sw6RtbmFkZSBmaWxlci4uLlxyXG4gICAgICAgIDwvPiA6IGZpbGVzLmxlbmd0aCA9PT0gMCA/XHJcbiAgICAgICAgICB0ZWFjaGVyQXRUaGlzU2Nob29sID9cclxuICAgICAgICAgICAgPHA+SW5nZW4gZWxldiBoYXIgbMOkbW5hdCBpbiBuw6Vnb3QgYXJiZXRlIMOkbm51LjwvcD4gOlxyXG4gICAgICAgICAgICB1bmRlZmluZWRcclxuICAgICAgICA6IDw+XHJcbiAgICAgICAgICA8dGFibGUgY2xhc3NOYW1lPVwidGFzay1hc3NpZ25tZW50cy10YWJsZVwiPjx0aGVhZD48dHI+XHJcbiAgICAgICAgICAgIHt0ZWFjaGVyQXRUaGlzU2Nob29sID8gPHRoPkVsZXY8L3RoPiA6IHVuZGVmaW5lZH1cclxuICAgICAgICAgICAgPHRoPkZpbG5hbW48L3RoPlxyXG4gICAgICAgICAgICA8dGg+SW5sw6RtbmF0IGRlbjwvdGg+XHJcbiAgICAgICAgICAgIHt0ZWFjaGVyQXRUaGlzU2Nob29sICYmIDw+XHJcbiAgICAgICAgICAgICAgPHRoPlJhcHBvcnQ8L3RoPlxyXG4gICAgICAgICAgICAgIDx0aD5OaXbDpTwvdGg+XHJcbiAgICAgICAgICAgIDwvPn1cclxuICAgICAgICAgICAge2hhc093bkRvY3MgJiYgPHRoIC8+fVxyXG4gICAgICAgICAgPC90cj48L3RoZWFkPjx0Ym9keT57XHJcbiAgICAgICAgICAgIGZpbGVzLm1hcChmaWxlID0+IDx0clxyXG4gICAgICAgICAgICAgIGtleT17ZmlsZS5tZWRpYUxpbmt9XHJcbiAgICAgICAgICAgICAgc3R5bGU9e2ZpbGUubWV0YWRhdGEuJG1ldGEgPyB7b3BhY2l0eTogMC41fToge319XHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICB7dGVhY2hlckF0VGhpc1NjaG9vbCA/IDw+PHRkPlxyXG4gICAgICAgICAgICAgICAgICA8YSBocmVmPXtgbWFpbHRvOiR7ZmlsZS51c2VyfWB9PlxyXG4gICAgICAgICAgICAgICAgICAgIHtmaWxlLm1ldGFkYXRhLnVzZXJEaXNwbGF5TmFtZSB8fCBmaWxlLnVzZXJ9XHJcbiAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQ+PGEgaHJlZj1cIiNcIiBvbkNsaWNrPXtldiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLmRvd25sb2FkKGZpbGUpO1xyXG4gICAgICAgICAgICAgICAgfX0+e2ZpbGUuZmlsZW5hbWV9PC9hPjwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwiYXNzaWdubWVudC1kYXRlLWNvbFwiPnttb21lbnQoZmlsZS51cGxvYWREYXRlKS5mb3JtYXQoJ1lZWVktTU0tREQgSEg6bW0nKX08L3RkPlxyXG4gICAgICAgICAgICAgICAge2ZpbGUubWV0YWRhdGEuJG1ldGEgPT09ICdhZGQnID9cclxuICAgICAgICAgICAgICAgICAgPHRkIGNvbFNwYW49ezJ9PjxTcGlubmVyIC8+IExhZGRhciB1cHAuLi48L3RkPjpcclxuICAgICAgICAgICAgICAgICAgZmlsZS5tZXRhZGF0YS4kbWV0YSA9PT0gJ2RlbGV0ZScgP1xyXG4gICAgICAgICAgICAgICAgICA8dGQgY29sU3Bhbj17Mn0+PFNwaW5uZXIgLz4gVGFyIGJvcnQuLi48L3RkPiA6XHJcbiAgICAgICAgICAgICAgICAgICgoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHttZXRhZGF0YX0gPSBmaWxlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVya3VuZFJlc3BvbnNlczogVXJrdW5kUmVzcG9uc2VbXSA9IG1ldGFkYXRhLnVya3VuZFJlc3BvbnNlICYmIEpTT04ucGFyc2UobWV0YWRhdGEudXJrdW5kUmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB1cmt1bmRSZXNwb25zZSA9IHVya3VuZFJlc3BvbnNlcyAmJiB1cmt1bmRSZXNwb25zZXNbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF1cmt1bmRSZXNwb25zZSAmJiBmaWxlLm1ldGFkYXRhLnVya3VuZFVwbG9hZEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICB1cmt1bmRSZXNwb25zZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgU3RhdHVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgRXJyb3JDb2RlOiAtMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlOiBmaWxlLm1ldGFkYXRhLnVya3VuZFVwbG9hZEVycm9yLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFN0YXRlOiAnRXJyb3InXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEV4dGVybmFsSWQ6IGZpbGUubWV0YWRhdGEudXJrdW5kRXh0ZXJuYWxJZFxyXG4gICAgICAgICAgICAgICAgICAgICAgfSBhcyBVcmt1bmRSZXNwb25zZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGUuaXNSZWZyZXNoaW5nKSByZXR1cm4gPHRkIGNvbFNwYW49ezJ9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgPFNwaW5uZXIgLz4gVXBwZGF0ZXJhci4uLlxyXG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+O1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1cmt1bmRSZXNwb25zZSA/IDw+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwidXJrdW5kLXN0YXR1cy1jb2xcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBocmVmPXt1cmt1bmRSZXNwb25zZS5SZXBvcnQgJiYgdXJrdW5kUmVzcG9uc2UuUmVwb3J0LlJlcG9ydFVybH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtldj0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFsnQWNjZXB0ZWQnLCAnU3VibWl0dGVkJ10uaW5kZXhPZih1cmt1bmRSZXNwb25zZS5TdGF0dXMuU3RhdGUpID09PSAtMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBGb2xsb3cgSFJFRiBpbnN0ZWFkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoQXNzaWdubWVudChmaWxlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldD1cIl9ibGFua1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e2dldFVya3VuZEhvdmVyVGV4dCh1cmt1bmRSZXNwb25zZSl9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtnZXRVcmt1bmRTdGF0dXNDbGFzcyh1cmt1bmRSZXNwb25zZSl9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwidXJrdW5kLXN0YXR1cy1jb2xcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2dldFVya3VuZFNpZ25pZmljYW5jZUNsYXNzKHVya3VuZFJlc3BvbnNlKX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAge3Vya3VuZFJlc3BvbnNlLlJlcG9ydCAmJiB0eXBlb2YgdXJrdW5kUmVzcG9uc2UuUmVwb3J0LlNpZ25pZmljYW5jZSA9PT0gJ251bWJlcicgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7dXJrdW5kUmVzcG9uc2UuUmVwb3J0LlNpZ25pZmljYW5jZS50b0ZpeGVkKCl9JWAgOiAnICd9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8Lz4gOiA8dGQgY29sU3Bhbj17Mn0vPlxyXG4gICAgICAgICAgICAgICAgICB9KSgpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgPC8+IDogPD5cclxuICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIiNcIiBvbkNsaWNrPXtldiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRvd25sb2FkKGZpbGUpO1xyXG4gICAgICAgICAgICAgICAgICB9fT57ZmlsZS5maWxlbmFtZX08L2E+XHJcbiAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cImFzc2lnbm1lbnQtZGF0ZS1jb2xcIj57ZmlsZS5tZXRhZGF0YS4kbWV0YSA9PT0gJ2FkZCcgP1xyXG4gICAgICAgICAgICAgICAgICA8PjxTcGlubmVyIC8+IExhZGRhciB1cHAuLi48Lz4gOlxyXG4gICAgICAgICAgICAgICAgICBmaWxlLm1ldGFkYXRhLiRtZXRhID09PSAnZGVsZXRlJyA/XHJcbiAgICAgICAgICAgICAgICAgIDw+PFNwaW5uZXIgLz4gVGFyIGJvcnQuLi48Lz4gOlxyXG4gICAgICAgICAgICAgICAgICBtb21lbnQoZmlsZS51cGxvYWREYXRlKS5mb3JtYXQoJ1lZWVktTU0tREQgSEg6bW0nKX08L3RkPlxyXG4gICAgICAgICAgICAgIDwvPn1cclxuICAgICAgICAgICAgICB7aGFzT3duRG9jcyAmJiA8dGQ+eyFmaWxlLm1ldGFkYXRhLiRtZXRhICYmIGZpbGUudXNlciA9PT0gZW52LmN1cnJlbnRVc2VyLm1haWwgJiZcclxuICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjXCIgb25DbGljaz17ZXYgPT4ge1xyXG4gICAgICAgICAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm0oYFJhZGVyYSBpbmzDpG1uYWQgZmlsICR7ZmlsZS5maWxlbmFtZX0/YCkpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGUoZmlsZS5tZWRpYUxpbmspO1xyXG4gICAgICAgICAgICAgICAgfX0+PGkgY2xhc3NOYW1lPVwiZmEgZmEtdHJhc2hcIi8+PC9hPn08L3RkPn1cclxuICAgICAgICAgICAgPC90cj4pXHJcbiAgICAgICAgICB9PC90Ym9keT48L3RhYmxlPlxyXG4gICAgICAgIDwvPn1cclxuICAgICAgICB7aXNFbXBsb3llZSgpID8gdW5kZWZpbmVkIDogPD5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRyb3Atem9uZSB0YXNrLWFzc2lnbm1lbnQtZHJvcC16b25lXCI+XHJcbiAgICAgICAgICAgIERyb3BwYSBkaXR0IGbDpHJkaWdhIGFyYmV0ZSBow6RyLjxici8+RGV0IGfDpXIgb2Nrc8OlIGJyYSBhdHQgYW52w6RuZGEgYmzDpGRkcmEta25hcHBlbiBuZWRhbi5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJmaWxlXCIgb25DaGFuZ2U9e2V2ID0+IHRoaXMudmVyaWZ5QW5kVXBsb2FkKGV2LnRhcmdldC5maWxlc1swXSl9IC8+XHJcbiAgICAgICAgICB7c2hvd0dvb2dsZVBpY2tlciAmJiA8RHJpdmVCdXR0b24gbGFiZWw9XCJIw6RtdGEgZnLDpW4gR29vZ2xlIERyaXZlXCIgYWN0aW9uPXsoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBpY2tlciA9IG5ldyBHb29nbGVQaWNrZXIoe3VwbG9hZDp0cnVlfSk7XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHBpY2tlci5zaG93KCkudGhlbihmaWxlcyA9PiB7XHJcbiAgICAgICAgICAgICAgcGlja2VyLmRvd25sb2FkRmlsZSh7XHJcbiAgICAgICAgICAgICAgICAgZmlsZTogZmlsZXNbMF0sXHJcbiAgICAgICAgICAgICAgICBsaW1pdFNpemU6IE1BWF9OT05VUktVTkRfRklMRV9TSVpFX01CXHJcbiAgICAgICAgICAgICAgfSkudGhlbihmaWxlID0+IHRoaXMudmVyaWZ5QW5kVXBsb2FkKGZpbGUpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9fSAvPlxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIDwvPn1cclxuICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG5cclxuICB9XHJcbn0iLCJpbXBvcnQge1Vya3VuZFJlc3BvbnNlfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VXJrdW5kU3RhdHVzQ2xhc3MgKHJlczogVXJrdW5kUmVzcG9uc2UpIHtcclxuICBpZiAoIXJlcyB8fCAhcmVzLlN0YXR1cykge1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfSBlbHNlIHN3aXRjaCAocmVzLlN0YXR1cy5TdGF0ZSkge1xyXG4gICAgY2FzZSAnRXJyb3InOlxyXG4gICAgICByZXR1cm4gYHVya3VuZC1zdGF0dXMgdXJrdW5kLXN0YXR1cy1lcnJvcmA7XHJcbiAgICBjYXNlICdTdWJtaXR0ZWQnOlxyXG4gICAgICByZXR1cm4gYHVya3VuZC1zdGF0dXMgdXJrdW5kLXN0YXR1cy1zdWJtaXR0ZWRgO1xyXG4gICAgY2FzZSAnQWNjZXB0ZWQnOlxyXG4gICAgICByZXR1cm4gYHVya3VuZC1zdGF0dXMgdXJrdW5kLXN0YXR1cy1hY2NlcHRlZGA7XHJcbiAgICBjYXNlICdBbmFseXplZCc6XHJcbiAgICAgIHJldHVybiBgdXJrdW5kLXN0YXR1cyB1cmt1bmQtc3RhdHVzLWFuYWx5emVkYDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRVcmt1bmRIb3ZlclRleHQgKHJlczogVXJrdW5kUmVzcG9uc2UpIHtcclxuICBpZiAoIXJlcyB8fCAhcmVzLlN0YXR1cykgcmV0dXJuIG51bGw7XHJcbiAgc3dpdGNoIChyZXMuU3RhdHVzLlN0YXRlKSB7XHJcbiAgICBjYXNlICdFcnJvcic6XHJcbiAgICAgIHJldHVybiByZXMuRXh0ZXJuYWxJZCA/XHJcbiAgICAgICAgYEt1bmRlIGludGUgdGFzIGVtb3QgYXYgdXJrdW5kLiBGZWxrb2Q6ICR7cmVzLlN0YXR1cy5FcnJvckNvZGV9XFxuYCtcclxuICAgICAgICBgRXh0ZXJuYWwgSUQ6ICR7cmVzLkV4dGVybmFsSWR9XFxuRmVsbWVkZGVsYW5kZTogJHtyZXMuU3RhdHVzLk1lc3NhZ2V9YFxyXG4gICAgICAgIDpcclxuICAgICAgICByZXMuU3RhdHVzLk1lc3NhZ2U7XHJcbiAgICBjYXNlICdTdWJtaXR0ZWQnOlxyXG4gICAgICByZXR1cm4gYEZpbGVuIMOkciB1cHBsYWRkYWQgdGlsbCBVcmt1bmQuIEtsaWNrYSBmw7ZyIGF0dCB1cHBkYXRlcmEgc3RhdHVzLmA7XHJcbiAgICBjYXNlICdBY2NlcHRlZCc6XHJcbiAgICAgIHJldHVybiBgRmlsZW4gYW5hbHlzZXJhcyBmb3J0ZmFyYW5kZSBhdiBVcmt1bmQuIEtsaWNrYSBmw7ZyIGF0dCB1cHBkYXRlcmEgc3RhdHVzLmA7XHJcbiAgICBjYXNlICdBbmFseXplZCc6XHJcbiAgICAgIHJldHVybiBgUmFwcG9ydCBza2FwYWQuIEtsaWNrYSBmw7ZyIGF0dCDDtnBwbmEgcmFwcG9ydGVuIGkgbnl0dCBmw7Zuc3RlcmA7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VXJrdW5kU2lnbmlmaWNhbmNlQ2xhc3MgKHJlczogVXJrdW5kUmVzcG9uc2UpIHtcclxuICBpZiAoIXJlcyB8fCAhcmVzLlN0YXR1cykgcmV0dXJuICcnO1xyXG5cclxuICBzd2l0Y2ggKHJlcy5TdGF0dXMuU3RhdGUpIHtcclxuICAgIGNhc2UgJ0Vycm9yJzogcmV0dXJuICd1cmt1bmQtc2lnbmlmaWNhbmNlLWVycm9yJztcclxuICAgIGNhc2UgJ1N1Ym1pdHRlZCc6IHJldHVybiAndXJrdW5kLXNpZ25pZmljYW5jZS1zdWJtaXR0ZWQnO1xyXG4gICAgY2FzZSAnQWNjZXB0ZWQnOiByZXR1cm4gJ3Vya3VuZC1zaWduaWZpY2FuY2UtYWNjZXB0ZWQnO1xyXG4gIH1cclxuICBjb25zdCByZXBvcnQgPSByZXMuUmVwb3J0O1xyXG4gIGlmICghcmVwb3J0KSB7XHJcbiAgICByZXR1cm4gXCJcIjtcclxuICB9XHJcbiAgaWYgKHJlcG9ydC5TaWduaWZpY2FuY2UgPCAxKVxyXG4gICAgLy9yZXR1cm4gYCR7Y2RufS9pbWFnZXMvdXJrdW5kLzAuZ2lmYDtcclxuICAgIHJldHVybiBcInVya3VuZC1zaWduaWZpY2FuY2UgdXJrdW5kLXNpZ25pZmljYW5jZS0wXCI7XHJcbiAgaWYgKHJlcG9ydC5TaWduaWZpY2FuY2UgPCAxMClcclxuICAgIC8vcmV0dXJuIGAke2Nkbn0vaW1hZ2VzL3Vya3VuZC8xLmdpZmA7XHJcbiAgICByZXR1cm4gXCJ1cmt1bmQtc2lnbmlmaWNhbmNlIHVya3VuZC1zaWduaWZpY2FuY2UtMVwiO1xyXG4gIGlmIChyZXBvcnQuU2lnbmlmaWNhbmNlIDwgMjUpXHJcbiAgICByZXR1cm4gXCJ1cmt1bmQtc2lnbmlmaWNhbmNlIHVya3VuZC1zaWduaWZpY2FuY2UtMlwiO1xyXG4gICAgLy9yZXR1cm4gYCR7Y2RufS9pbWFnZXMvdXJrdW5kLzIuZ2lmYDtcclxuICBpZiAocmVwb3J0LlNpZ25pZmljYW5jZSA8IDQwKVxyXG4gICAgcmV0dXJuIFwidXJrdW5kLXNpZ25pZmljYW5jZSB1cmt1bmQtc2lnbmlmaWNhbmNlLTNcIjtcclxuICAgIC8vcmV0dXJuIGAke2Nkbn0vaW1hZ2VzL3Vya3VuZC8zLmdpZmA7XHJcbiAgaWYgKHJlcG9ydC5TaWduaWZpY2FuY2UgPCA1NSlcclxuICAgIHJldHVybiBcInVya3VuZC1zaWduaWZpY2FuY2UgdXJrdW5kLXNpZ25pZmljYW5jZS00XCI7XHJcbiAgICAvL3JldHVybiBgJHtjZG59L2ltYWdlcy91cmt1bmQvNC5naWZgO1xyXG4gIGlmIChyZXBvcnQuU2lnbmlmaWNhbmNlIDwgNzApXHJcbiAgICByZXR1cm4gXCJ1cmt1bmQtc2lnbmlmaWNhbmNlIHVya3VuZC1zaWduaWZpY2FuY2UtNVwiO1xyXG4gICAgLy9yZXR1cm4gYCR7Y2RufS9pbWFnZXMvdXJrdW5kLzUuZ2lmYDtcclxuICBpZiAocmVwb3J0LlNpZ25pZmljYW5jZSA8IDg1KVxyXG4gICAgcmV0dXJuIFwidXJrdW5kLXNpZ25pZmljYW5jZSB1cmt1bmQtc2lnbmlmaWNhbmNlLTZcIjtcclxuICAgIC8vcmV0dXJuIGAke2Nkbn0vaW1hZ2VzL3Vya3VuZC82LmdpZmA7XHJcbiAgaWYgKHJlcG9ydC5TaWduaWZpY2FuY2UgPCA5OS45KVxyXG4gICAgcmV0dXJuIFwidXJrdW5kLXNpZ25pZmljYW5jZSB1cmt1bmQtc2lnbmlmaWNhbmNlLTdcIjtcclxuICAgIC8vcmV0dXJuIGAke2Nkbn0vaW1hZ2VzL3Vya3VuZC83LmdpZmA7XHJcbiAgaWYgKHJlcG9ydC5TaWduaWZpY2FuY2UgPj0gOTkuOSlcclxuICAgIHJldHVybiBcInVya3VuZC1zaWduaWZpY2FuY2UgdXJrdW5kLXNpZ25pZmljYW5jZS04XCI7XHJcbiAgICAvL3JldHVybiBgJHtjZG59L2ltYWdlcy91cmt1bmQvOC5naWZgO1xyXG4gIHJldHVybiBcIlwiO1xyXG59XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgQWJpbGl0eSB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgdGl0bGU6IHN0cmluZztcclxuICBzdWJUaXRsZT86IHN0cmluZztcclxuICBhYmlsaXRpZXM6IEFiaWxpdHlbXTtcclxuICBjbGFzc05hbWU/OiBzdHJpbmc7XHJcbiAgaGVhZGVyT3Blbj86IGJvb2xlYW47XHJcbn1cclxuXHJcbmludGVyZmFjZSBTdGF0ZSB7XHJcbiAgaGVhZGVyT3BlbjogYm9vbGVhbjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEFiaWxpdGllc0JveCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcyxTdGF0ZT4ge1xyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgaGVhZGVyT3BlbjogcHJvcHMuaGVhZGVyT3BlbiB8fCBmYWxzZVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHsgdGl0bGUsIHN1YlRpdGxlLCBhYmlsaXRpZXMsIGNsYXNzTmFtZSB9ID0gdGhpcy5wcm9wcztcclxuICAgIGNvbnN0IHsgaGVhZGVyT3BlbiB9ID0gdGhpcy5zdGF0ZTtcclxuXHJcbiAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9eyhjbGFzc05hbWV8fCcnKSArIFwiIG9wZW5DbG9zZVwiICsgKGhlYWRlck9wZW4gPyBcIiBvcGVuXCIgOiBcIlwiKX0+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwib3BlbkhlYWRlclwiIG9uQ2xpY2s9eygpID0+IHRoaXMuc2V0U3RhdGUoeyBoZWFkZXJPcGVuOiAhdGhpcy5zdGF0ZS5oZWFkZXJPcGVuIH0pfT5cclxuICAgICAgICA8cD57dGl0bGV9PC9wPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJvcGVuQ29udGVudFwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJpbGl0eUxpc3RcIj5cclxuICAgICAgICAgIHtzdWJUaXRsZSAmJiA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnRIZWFkZXJcIj5cclxuICAgICAgICAgICAgPGg1PntzdWJUaXRsZX08L2g1PlxyXG4gICAgICAgICAgPC9kaXY+fVxyXG4gICAgICAgICAge2FiaWxpdGllcy5tYXAoYSA9PlxyXG4gICAgICAgICAgICA8ZGl2IGtleT17YS5pZH0gY2xhc3NOYW1lPVwiY29udGVudFBhcnRcIj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnRUZXh0XCI+XHJcbiAgICAgICAgICAgICAgICA8cCBkYW5nZXJvdXNseVNldElubmVySFRNTD17e19faHRtbDogYS5uYW1lfX0gLz5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICApfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PjtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBDZW50cmFsQ29udGVudCB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgdGl0bGU6IHN0cmluZztcclxuICBzdWJUaXRsZT86IHN0cmluZztcclxuICBjZW50cmFsQ29udGVudDogQ2VudHJhbENvbnRlbnRbXTtcclxuICBjbGFzc05hbWU/OiBzdHJpbmc7XHJcbiAgaGVhZGVyT3Blbj86IGJvb2xlYW47XHJcbn1cclxuXHJcbmludGVyZmFjZSBTdGF0ZSB7XHJcbiAgaGVhZGVyT3BlbjogYm9vbGVhbjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENlbnRyYWxDb250ZW50Qm94IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLFN0YXRlPiB7XHJcbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICBoZWFkZXJPcGVuOiBwcm9wcy5oZWFkZXJPcGVuIHx8IGZhbHNlXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3QgeyB0aXRsZSwgc3ViVGl0bGUsIGNlbnRyYWxDb250ZW50LCBjbGFzc05hbWUgfSA9IHRoaXMucHJvcHM7XHJcbiAgICBjb25zdCB7IGhlYWRlck9wZW4gfSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPXsoY2xhc3NOYW1lIHx8ICcnKSArIFwiIG9wZW5DbG9zZVwiICsgKGhlYWRlck9wZW4gPyBcIiBvcGVuXCIgOiBcIlwiKX0+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwib3BlbkhlYWRlclwiIG9uQ2xpY2s9eygpID0+IHRoaXMuc2V0U3RhdGUoeyBoZWFkZXJPcGVuOiAhdGhpcy5zdGF0ZS5oZWFkZXJPcGVuIH0pfT5cclxuICAgICAgICA8cD57dGl0bGV9PC9wPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJvcGVuQ29udGVudFwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJpbGl0eUxpc3RcIj5cclxuICAgICAgICAgIHtzdWJUaXRsZSAmJiA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnRIZWFkZXJcIj5cclxuICAgICAgICAgICAgPGg1PntzdWJUaXRsZX08L2g1PlxyXG4gICAgICAgICAgPC9kaXY+fVxyXG4gICAgICAgICAge2NlbnRyYWxDb250ZW50Lm1hcChjYyA9PlxyXG4gICAgICAgICAgICA8ZGl2IGtleT17Y2MuaWR9IGNsYXNzTmFtZT1cImNvbnRlbnRQYXJ0XCI+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50VGV4dFwiPlxyXG4gICAgICAgICAgICAgICAgPHAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3tfX2h0bWw6IGNjLm5hbWV9fSAvPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICl9XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+O1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHZpc2libGU6IGJvb2xlYW47XHJcbiAgdGV4dDogc3RyaW5nO1xyXG4gIGNsYXNzTmFtZT86IHN0cmluZztcclxuICBvbkNvbmZpcm06ICgpPT52b2lkO1xyXG4gIG9uQ2FuY2VsOiAoKT0+dm9pZDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIENvbmZpcm1hdGlvbiAocHJvcHM6IFByb3BzKSB7XHJcbiAgcmV0dXJuIDxkaXZcclxuICAgIGNsYXNzTmFtZT17YGNvbmZpcm1hdGlvbi1ib3ggJHtwcm9wcy5jbGFzc05hbWV9JHtwcm9wcy52aXNpYmxlID8gXCIgdmlzaWJsZVwiIDogXCJcIn1gfT5cclxuICAgIDxwPntwcm9wcy50ZXh0fTwvcD5cclxuICAgIDxidXR0b24gb25DbGljaz17KCk9PnByb3BzLm9uQ29uZmlybSgpfT5PSzwvYnV0dG9uPlxyXG4gICAgPGJ1dHRvbiBvbkNsaWNrPXsoKT0+cHJvcHMub25DYW5jZWwoKX0+QXZicnl0PC9idXR0b24+XHJcbiAgPC9kaXY+O1xyXG59XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgS25vd2xlZGdlUmVxdWlyZW1lbnQgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IE9wZW5DbG9zZUJveCB9IGZyb20gXCIuLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvb3Blbi1jbG9zZS1ib3hcIjtcclxuaW1wb3J0IHsgYXJyYXlUb0xvb2t1cCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgdGl0bGU6IHN0cmluZztcclxuICBjbGFzc05hbWU/OiBzdHJpbmc7XHJcbiAgcmVxdWlyZW1lbnRzOiBLbm93bGVkZ2VSZXF1aXJlbWVudFtdO1xyXG4gIGV4cGxhaW5lZFJlcXVpcmVtZW50cz86IHtbcmVxdWlyZW1lbnRJZDogc3RyaW5nXTogc3RyaW5nfTtcclxuICBpZHNUb1N1YmplY3RNYXA/OiB7W3JlcXVpcmVtZW5kSWQ6IHN0cmluZ106IHN0cmluZ307XHJcbiAgaW5jbHVkZWRJZHM/OiB7W2lkOiBzdHJpbmddIDogdHJ1ZX07XHJcbiAgaGVhZGVyT3Blbj86IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBLbm93bGVkZ2VSZXF1aXJlbWVudHNCb3ggPSAocHJvcHM6IFByb3BzKSA9PiB7XHJcbiAgY29uc3Qge3RpdGxlLCBjbGFzc05hbWUsIGhlYWRlck9wZW4sIGlkc1RvU3ViamVjdE1hcCwgcmVxdWlyZW1lbnRzfSA9IHByb3BzO1xyXG4gIGlmICghaWRzVG9TdWJqZWN0TWFwKSB7XHJcbiAgICAvLyBOb3JtYWwgY2FzZVxyXG4gICAgcmV0dXJuIChcclxuICAgICAgPE9wZW5DbG9zZUJveCB0aXRsZT17PHA+e3RpdGxlfTwvcD59IGNsYXNzTmFtZT17Y2xhc3NOYW1lfSBoZWFkZXJPcGVuPXtoZWFkZXJPcGVufT5cclxuICAgICAgICA8S25vd2xlZGdlUmVxdWlyZW1lbnRzVGFibGUgey4uLnsuLi5wcm9wc319IC8+XHJcbiAgICAgIDwvT3BlbkNsb3NlQm94PlxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8vIFNwZWNpYWwgY2FzZTogUmVxdWlyZW1lbnRzIHRoYXQgc3BhbnMgbXVsdGlwbGUgc3ViamVjdHM6XHJcbiAgY29uc3QgcmVxdWlyZW1lbnRzUGVyU3ViamVjdExvb2t1cCA9IGlkc1RvU3ViamVjdE1hcCA/XHJcbiAgICBhcnJheVRvTG9va3VwKHJlcXVpcmVtZW50cywgciA9PiBpZHNUb1N1YmplY3RNYXBbci5pZF0gfHwgXCJcIikgOiB7XCJcIjogcmVxdWlyZW1lbnRzfTtcclxuICBjb25zdCByZXFzUGVyU3ViamVjdCA9IE9iamVjdC5rZXlzKHJlcXVpcmVtZW50c1BlclN1YmplY3RMb29rdXApXHJcbiAgICAubWFwKHN1YmplY3QgPT4gKHtzdWJqZWN0LCByZXF1aXJlbWVudHM6IHJlcXVpcmVtZW50c1BlclN1YmplY3RMb29rdXBbc3ViamVjdF19KSk7XHJcblxyXG4gIHJldHVybiA8T3BlbkNsb3NlQm94IHRpdGxlPXs8cD57dGl0bGV9PC9wPn0gY2xhc3NOYW1lPXtjbGFzc05hbWV9IGhlYWRlck9wZW49e2hlYWRlck9wZW59PlxyXG4gICAge3JlcXNQZXJTdWJqZWN0Lm1hcCgoe3N1YmplY3QsIHJlcXVpcmVtZW50c30pID0+IDxLbm93bGVkZ2VSZXF1aXJlbWVudHNUYWJsZSB7Li4ue1xyXG4gICAgICAuLi5wcm9wcyxcclxuICAgICAga2V5OiBzdWJqZWN0LFxyXG4gICAgICBoZWFkaW5nOiBzdWJqZWN0LFxyXG4gICAgICByZXF1aXJlbWVudHNcclxuICAgIH19IC8+KX1cclxuICA8L09wZW5DbG9zZUJveD47XHJcbn1cclxuXHJcbmNvbnN0IEtub3dsZWRnZVJlcXVpcmVtZW50c1RhYmxlID0gKHtcclxuICByZXF1aXJlbWVudHMsXHJcbiAgaW5jbHVkZWRJZHMsXHJcbiAgZXhwbGFpbmVkUmVxdWlyZW1lbnRzLFxyXG4gIGhlYWRpbmcgfTogUHJvcHMgJiB7aGVhZGluZz86IHN0cmluZ30pID0+XHJcbntcclxuICBjb25zdCBjb2x1bW5zID0gW1wiRVwiLCBcIkNcIiwgXCJBXCJdO1xyXG4gIGNvbnN0IHJvd3M6IEtub3dsZWRnZVJlcXVpcmVtZW50W11bXSA9IFtdO1xyXG4gIGNvbnN0IHJlcXMgPSByZXF1aXJlbWVudHMuc2xpY2UoKTtcclxuICBsZXQgcm93OiBLbm93bGVkZ2VSZXF1aXJlbWVudFtdIHwgbnVsbCA9IG51bGw7XHJcbiAgd2hpbGUgKHRydWUpIHtcclxuICAgIHJvdyA9IGNvbHVtbnMubWFwKGdyYWRlID0+IHtcclxuICAgICAgY29uc3QgcE5leHQgPSByZXFzLmZpbmRJbmRleChyID0+IHIuZ3JhZGVTdGVwLnRvVXBwZXJDYXNlKCkgPT09IGdyYWRlKTtcclxuICAgICAgaWYgKHBOZXh0IDwgMCkgcmV0dXJuIG51bGw7XHJcbiAgICAgIGNvbnN0IHJ2ID0gcmVxc1twTmV4dF07XHJcbiAgICAgIHJlcXMuc3BsaWNlKHBOZXh0LCAxKTtcclxuICAgICAgcmV0dXJuIGluY2x1ZGVkSWRzID9cclxuICAgICAgICAoaW5jbHVkZWRJZHNbcnYuaWRdID8gcnYgOiB1bmRlZmluZWQpIDpcclxuICAgICAgICBydjtcclxuICAgIH0pO1xyXG4gICAgaWYgKHJvdy5ldmVyeShyID0+IHIgPT09IG51bGwpKVxyXG4gICAgICBicmVhaztcclxuICAgIGlmICghcm93LmV2ZXJ5KHIgPT4gIXIpKSB7XHJcbiAgICAgIHJvd3MucHVzaChyb3cpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIDw+XHJcbiAgICB7aGVhZGluZyAmJiA8aDQ+e2hlYWRpbmd9PC9oND59XHJcbiAgICA8dGFibGU+XHJcbiAgICAgIDx0aGVhZD5cclxuICAgICAgICA8dHI+XHJcbiAgICAgICAgICB7Y29sdW1ucy5tYXAoYyA9PiA8dGgga2V5PXtjfT57Y308L3RoPil9XHJcbiAgICAgICAgPC90cj5cclxuICAgICAgPC90aGVhZD5cclxuICAgICAgPHRib2R5PlxyXG4gICAgICAgIHtyb3dzLm1hcCgocm93LGkpID0+IDxSZWFjdC5GcmFnbWVudCBrZXk9e2l9PlxyXG4gICAgICAgICAgICA8dHIga2V5PXtpfT5cclxuICAgICAgICAgICAgICB7cm93Lm1hcCgoY29sdW1uLGopID0+XHJcbiAgICAgICAgICAgICAgICA8dGQga2V5PXtqfSBkYW5nZXJvdXNseVNldElubmVySFRNTD17e19faHRtbDogY29sdW1uID8gY29sdW1uLm5hbWUgOiBcIlwifX0gLz5cclxuICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICB7ZXhwbGFpbmVkUmVxdWlyZW1lbnRzICYmIDx0cj5cclxuICAgICAgICAgICAgICB7cm93Lm1hcCgoY29sdW1uLGopID0+XHJcbiAgICAgICAgICAgICAgICA8dGQga2V5PXtqfSBjbGFzc05hbWU9XCJleHBsYWluZWQtcmVxdWlyZW1lbnRcIj5cclxuICAgICAgICAgICAgICAgICAgPGRpdj57KGNvbHVtbiAmJiBleHBsYWluZWRSZXF1aXJlbWVudHNbY29sdW1uLmlkXSkgfHwgXCJcIn08L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvdGQ+KX1cclxuICAgICAgICAgICAgPC90cj59XHJcbiAgICAgICAgICA8L1JlYWN0LkZyYWdtZW50PlxyXG4gICAgICAgICl9XHJcbiAgICAgIDwvdGJvZHk+XHJcbiAgICA8L3RhYmxlPlxyXG4gIDwvPjtcclxufVxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IENvdXJzZSwgQ291cnNlTW9kdWxlLCBUYXNrLCBVc2VyVGFzayB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IGVudiBmcm9tICcuLi8uLi8uLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5pbXBvcnQgeyBXZWVrUGxhbm5lclBlcnNpc3RlZFN0YXRlIH0gZnJvbSBcIi4uLy4uL3dlZWtwbGFubmVyL3dlZWtwbGFubmVyLXBlcnNpc3RlZC1zdGF0ZVwiO1xyXG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcbmltcG9ydCB7IGNyZWF0ZVVVSUQsIEJhdGNoUnVubmVyLCBEb2N1bWVudEFjY2VzcyB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcclxuaW1wb3J0IHsgdXNlclRhc2tzUmVwbyB9IGZyb20gJy4uLy4uLy4uL3JlcG9zL3VzZXItdGFza3MtcmVwbyc7XHJcbmltcG9ydCB7IGFycmF5VG9NYXAsIEwgfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IFNwaW5uZXIgfSBmcm9tICcuLi8uLi9jb3Vyc2UtYnVpbGRlci9zdWItY29tcG9uZW50cy9zcGlubmVyJztcclxuaW1wb3J0IHsgQ29uZmlybWF0aW9uIH0gZnJvbSAnLi9jb25maXJtYXRpb24nO1xyXG5pbXBvcnQgeyBMYW5ndWFnZUNvbnRleHQgfSBmcm9tICcuLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvTGFuZ3VhZ2VDb250ZXh0JztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgbGVhcm5pbmdUYXNrczogTGVhcm5pbmdNb2R1bGVUYXNrW11cclxufVxyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICB3ZWVrRGF0ZTogbnVtYmVyO1xyXG4gIHVzZXJUYXNrczogVXNlclRhc2tbXTtcclxuICBjb25maXJtYXRpb25zOiBzdHJpbmdbXTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBMZWFybmluZ01vZHVsZVRhc2sge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIHVybDogc3RyaW5nO1xyXG4gIC8qKiBjb3Vyc2VOYW1lXHJcbiAgICogRm9yIEtHOiBjb3Vyc2VOYW1lXHJcbiAgICogRm9yIEtTOiBTdWJqZWN0IG5hbWVcclxuICAgKi9cclxuICBjb3Vyc2VOYW1lOiBzdHJpbmc7XHJcbiAgLyoqIGxlYXJuaW5nR29hbFxyXG4gICAqIEZvciBLRzogbW9kdWxlIG5hbWUgb3IgbGVhcm5pbmcgZ29hbCBvZiB0aGUgdGFza1xyXG4gICAqIEZvciBLUy9zdGVwLWNvdXJzZTogY291cnNlIG5hbWVcclxuICAgKiBGb3IgS1MvdGhlbWUtY291cnNlOiBsZWFybmluZyBnb2FsXHJcbiAgICovXHJcbiAgbGVhcm5pbmdHb2FsOiBzdHJpbmc7XHJcbiAgLyoqIFN0ZXBcclxuICAgKiBPbmx5IHByZXNlbnQgaW4gS1Mvc3RlcC1jb3Vyc2VcclxuICAgKi9cclxuICBzdGVwPzogbnVtYmVyO1xyXG4gIC8qKiB0YXNrXHJcbiAgICogT25seSBmb3IgY291cnNlcyBidWlsdCBieSBjb3Vyc2VidWlsZGVyXHJcbiAgICovXHJcbiAgdGFzaz86IFRhc2s7XHJcbiAgLyoqIGNvdXJzZVxyXG4gICAqIE9ubHkgZm9yIGNvdXJzZXMgYnVpbHQgYnkgY291cnNlYnVpbGRlclxyXG4gICAqL1xyXG4gIGNvdXJzZT86IENvdXJzZTtcclxuICAvKiogY291cnNlSW5mb1xyXG4gICAqIE9ubHkgZm9yIGNvdXJzZXMgYnVpbGQgYnkgc3ViamVjdHBsYW5uZXJcclxuICAgKi9cclxuICBjb3Vyc2VJbmZvPzoge1xyXG4gICAgc2Nob29sOiBzdHJpbmcgLy8gU2Nob29sIG5hbWVcclxuICAgIGNvdXJzZTogc3RyaW5nIC8vIENvdXJzZSBJbnN0YW5jZSBJRFxyXG4gICAgdGFiOiBzdHJpbmcgICAgLy8gQ291cnNlVGFiIElEXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVGFza0xpc3QgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsU3RhdGU+IHtcclxuICBzdGF0aWMgY29udGV4dFR5cGUgPSBMYW5ndWFnZUNvbnRleHQ7XHJcbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICB1c2VyVGFza3M6IFtdLFxyXG4gICAgICB3ZWVrRGF0ZTogRGF0ZS5ub3coKSxcclxuICAgICAgY29uZmlybWF0aW9uczogW11cclxuICAgIH1cclxuICAgIHRoaXMub25DaGFuZ2UgPSB0aGlzLm9uQ2hhbmdlLmJpbmQodGhpcyk7ICAgIFxyXG4gIH1cclxuXHJcbiAgb25DaGFuZ2UgKHVzZXJUYXNrczogVXNlclRhc2tbXSwgcGVyc2lzdGVkOiBXZWVrUGxhbm5lclBlcnNpc3RlZFN0YXRlKSB7XHJcbiAgICBpZiAocGVyc2lzdGVkLndlZWtEYXRlICE9PSB0aGlzLnN0YXRlLndlZWtEYXRlKSB7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgIGNvbmZpcm1hdGlvbnM6IFtdXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgdXNlclRhc2tzLFxyXG4gICAgICB3ZWVrRGF0ZTogcGVyc2lzdGVkLndlZWtEYXRlXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gICAgdXNlclRhc2tzUmVwby5zdWJzY3JpYmUodGhpcy5vbkNoYW5nZSk7XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcclxuICAgIHVzZXJUYXNrc1JlcG8udW5zdWJzY3JpYmUodGhpcy5vbkNoYW5nZSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyB0b2dnbGVUYXNrIChsZWFybmluZ1Rhc2s6IExlYXJuaW5nTW9kdWxlVGFzaykge1xyXG4gICAgY29uc3QgdXNlclRhc2tzID0gdGhpcy5zdGF0ZS51c2VyVGFza3MuZmlsdGVyKHV0ID0+IHtcclxuICAgICAgcmV0dXJuIGxlYXJuaW5nVGFzay50YXNrID9cclxuICAgICAgICB1dC50YXNrICYmIHV0LnRhc2suc29tZSh0ID0+IHQuaWQgPT09IGxlYXJuaW5nVGFzay5pZCkgOlxyXG4gICAgICAgIHV0LnNpdGVWaXNpb25QYWdlSWQgPT09IGxlYXJuaW5nVGFzay5pZDtcclxuICAgIH0pO1xyXG4gICAgY29uc3Qge3dlZWtEYXRlfSA9IHRoaXMuc3RhdGU7XHJcbiAgICBcclxuICAgIGlmICh1c2VyVGFza3MubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIC8vIE5vIHRhc2sgbWF0Y2hlcyB0aGlzIGxlYXJuaW5nTW9kdWxlVGFzayAtIG5vdCBwcmVzZW50IGluIHdlZWtwbGFubmVyLlxyXG4gICAgICBsZXQgbGF0ZXN0VGltZVN0YW1wID0gTWF0aC5tYXguYXBwbHkoXHJcbiAgICAgICAgTWF0aC5tYXgsXHJcbiAgICAgICAgW3dlZWtEYXRlXS5jb25jYXQodGhpcy5zdGF0ZS51c2VyVGFza3MubWFwKHQgPT4gdC5kYXRlVGltZSkpKTtcclxuXHJcbiAgICAgIGNvbnN0IHVzZXJUYXNrOiBVc2VyVGFzayA9IHtcclxuICAgICAgICBpZDogY3JlYXRlVVVJRCgpLFxyXG4gICAgICAgIGNvdXJzZU5hbWU6IGxlYXJuaW5nVGFzay5jb3Vyc2VOYW1lLFxyXG4gICAgICAgIGRhdGVUaW1lOiBsYXRlc3RUaW1lU3RhbXAgKyAyMDAwLFxyXG4gICAgICAgIGxlYXJuaW5nR29hbDogbGVhcm5pbmdUYXNrLmxlYXJuaW5nR29hbCxcclxuICAgICAgICBuYW1lOiBsZWFybmluZ1Rhc2submFtZSxcclxuICAgICAgICB1cmw6IGxlYXJuaW5nVGFzay51cmwsXHJcbiAgICAgICAgYWNsOiBbXHJcbiAgICAgICAgICAvLyBEZWZhdWx0IEFDTDogTGV0IHVzZXIgc2VsZiBoYXZlIGZ1bGwgY29udHJvbCBvdmVyIHRoaXMgaXRlbTpcclxuICAgICAgICAgIG5ldyBEb2N1bWVudEFjY2VzcyhcImVtYWlsXCIsIGVudi5jdXJyZW50VXNlci5tYWlsLCBcIlNcIiksXHJcbiAgICAgICAgICAvLyBBZGRpdGlvbmFsIEFDTDogTGV0IGVtcGxveWVlcyBvbiBzYW1lIHNjaG9vbCBoYXZlIHJlYWQgYWNjZXNzIHRvIGl0LlxyXG4gICAgICAgICAgLy8gVGhpcyBjdXJyZW50bHkgb25seSBhcHBsaWVzIHRvIHRhc2tzIHRoYXQgcmVmZXIgdG8gY291cnNlIHRhc2tzIChub3QgY3VzdG9tIHRhc2tzISlcclxuICAgICAgICAgIG5ldyBEb2N1bWVudEFjY2VzcyhcInNjaG9vbFJvbGVcIiwgYCR7ZW52LmN1cnJlbnRVc2VyLnNjaG9vbH0vRU1QTE9ZRUVgLCBcIlJcIilcclxuICAgICAgICBdLm1hcChhYyA9PiBhYy50b1N0cmluZygpKVxyXG4gICAgICB9O1xyXG4gICAgICBpZiAobGVhcm5pbmdUYXNrLnRhc2sgJiYgbGVhcm5pbmdUYXNrLnRhc2suZGVhZGxpbmUpIHtcclxuICAgICAgICB1c2VyVGFzay5kZWFkbGluZSA9IGxlYXJuaW5nVGFzay50YXNrLmRlYWRsaW5lO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChsZWFybmluZ1Rhc2sudGFzaykge1xyXG4gICAgICAgIHVzZXJUYXNrLnRhc2sgPSBbbGVhcm5pbmdUYXNrLnRhc2tdO1xyXG4gICAgICAgIGlmIChsZWFybmluZ1Rhc2suY291cnNlKSB7XHJcbiAgICAgICAgICB1c2VyVGFzay5jb3Vyc2UgPSBbbGVhcm5pbmdUYXNrLmNvdXJzZV07XHJcbiAgICAgICAgfSBlbHNlIGlmIChsZWFybmluZ1Rhc2suY291cnNlSW5mbykge1xyXG4gICAgICAgICAgdXNlclRhc2suY291cnNlSW5mbyA9IGxlYXJuaW5nVGFzay5jb3Vyc2VJbmZvO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB1c2VyVGFzay5zaXRlVmlzaW9uUGFnZUlkID0gbGVhcm5pbmdUYXNrLmlkO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChsZWFybmluZ1Rhc2suc3RlcCkge1xyXG4gICAgICAgIHVzZXJUYXNrLnN0ZXAgPSBsZWFybmluZ1Rhc2suc3RlcDtcclxuICAgICAgfVxyXG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgdXNlclRhc2tzUmVwby5zZXRXZWVrUGxhbm5lckJveE9wZW4obGVhcm5pbmdUYXNrLmNvdXJzZU5hbWUsIHRydWUpLFxyXG4gICAgICAgIHVzZXJUYXNrc1JlcG8uaW5zZXJ0KFt1c2VyVGFza10pXSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBBbHJlYWR5IHByZXNlbnQgaW4gd2Vla3BsYW5uZXIuIEl0J3MgdGltZSB0byBkZWxldGUgdGhvc2UgdGhhdCBtYXRjaGVkIHVzLlxyXG4gICAgICBhd2FpdCB1c2VyVGFza3NSZXBvLmRlbGV0ZSh1c2VyVGFza3MubWFwKHQgPT4gdC5pZCkpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7aW50bH0gPSB0aGlzLmNvbnRleHQ7XHJcbiAgICBjb25zdCB7bGVhcm5pbmdUYXNrc30gPSB0aGlzLnByb3BzO1xyXG4gICAgY29uc3QgdXNlclRhc2tzID0gYXJyYXlUb01hcCh0aGlzLnN0YXRlLnVzZXJUYXNrcywgdXQgPT4gdXQudGFzayAmJiB1dC50YXNrLmxlbmd0aCA+IDAgP1xyXG4gICAgICB1dC50YXNrLm1hcCh0ID0+IHQuaWQpWzBdIDogLy8gY291cnNlLWJ1aWxkZXIgdGFza3MgbG9va2VkIHVwIGJ5IGlkXHJcbiAgICAgIHV0LnNpdGVWaXNpb25QYWdlSWQgPyB1dC5zaXRlVmlzaW9uUGFnZUlkIDogLy8gbm9uLWNvdXJzZS1idWlsZGVyIHRhc2tzXHJcbiAgICAgIHV0LnVybCk7XHJcbiAgICBjb25zdCB7Y29uZmlybWF0aW9uc30gPSB0aGlzLnN0YXRlO1xyXG4gICAgY29uc3Qgd2Vla1BsYW5uZXJXZWVrID0gbW9tZW50KHRoaXMuc3RhdGUud2Vla0RhdGUpLndlZWsoKTtcclxuICAgIGNvbnN0IGN1cnJlbnRXZWVrID0gbW9tZW50KCkud2VlaygpO1xyXG4gICAgY29uc3QgZm9yV2Vla1N0cmluZyA9IHdlZWtQbGFubmVyV2VlayA9PT0gY3VycmVudFdlZWsgPyBcIlwiIDpcclxuICAgIHdlZWtQbGFubmVyV2VlayA9PT0gY3VycmVudFdlZWsgKyAxID8gaW50bC5mb3JtYXRNZXNzYWdlKHtpZDpcInRhc2tMaXN0Lm5leHRXZWVrVGFza1wiLCBkZWZhdWx0TWVzc2FnZTpcImbDtnIgbsOkc3RhIHZlY2thICh2e3dlZWt9KVwifSwge3dlZWs6IHdlZWtQbGFubmVyV2Vla30pIDpcclxuICAgIHdlZWtQbGFubmVyV2VlayA9PT0gY3VycmVudFdlZWsgLSAxID8gaW50bC5mb3JtYXRNZXNzYWdlKHtpZDpcInRhc2tMaXN0Lmxhc3RXZWVrVGFza1wiLCBkZWZhdWx0TWVzc2FnZTpcImbDtnIgZsO2cnJhIHZlY2thbiAodnt3ZWVrfSlcIn0sIHt3ZWVrOiB3ZWVrUGxhbm5lcldlZWt9KSA6XHJcbiAgICBpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOlwidGFza0xpc3QuY3VycmVudFdlZWtUYXNrXCIsIGRlZmF1bHRNZXNzYWdlOlwiZsO2ciB2ZWNrYSB7d2Vla31cIn0sIHt3ZWVrOiB3ZWVrUGxhbm5lcldlZWt9KTtcclxuXHJcbiAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJ0YXNrQ29udGFpbmVyXCI+XHJcbiAgICAgIHtsZWFybmluZ1Rhc2tzLm1hcCgobGVhcm5pbmdUYXNrLCBpZHgpID0+IHtcclxuICAgICAgICBjb25zdCB0YXNrTG9va3VwSWQgPSBsZWFybmluZ1Rhc2suaWQ7XHJcbiAgICAgICAgY29uc3QgdXNlclRhc2sgPSB1c2VyVGFza3NbdGFza0xvb2t1cElkXSB8fCB7JG1ldGE6ICdkZWxldGVkJ30gYXMgUGFydGlhbDxVc2VyVGFzaz47IC8vIE5vIGV4aXN0ID0gJG1ldGE6ICdkZWxldGVkJ1xyXG4gICAgICAgIGNvbnN0IGlzV29ya2luZyA9IHVzZXJUYXNrLiRtZXRhID09PSAnYWRkaW5nJyB8fCB1c2VyVGFzay4kbWV0YSA9PT0gJ2RlbGV0aW5nJztcclxuICAgICAgICBjb25zdCBzZWxlY3RlZCA9IHVzZXJUYXNrLiRtZXRhICE9PSAnZGVsZXRlZCcgJiYgdXNlclRhc2suJG1ldGEgIT09ICdkZWxldGluZyc7XHJcbiAgICAgICAgY29uc3QgZGVzY3JpYmVkQWN0aW9uID0gc2VsZWN0ZWQgP1xyXG4gICAgICAgIGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6XCJ0YXNrTGlzdC5yZW1vdmVUYXNrRnJvbVdlZWtseVBsYW5uaW5nXCIsIGRlZmF1bHRNZXNzYWdlOlwiVGEgYm9ydCB1cHBnaWZ0ZW4gZnLDpW4gZWdlbiB2ZWNrb3BsYW5lcmluZyB7d2Vla31cIn0sIHt3ZWVrOiBmb3JXZWVrU3RyaW5nfSk6XHJcbiAgICAgICAgaW50bC5mb3JtYXRNZXNzYWdlKHtpZDpcInRhc2tMaXN0LmFkZFRhc2tUb1dlZWtseVBsYW5uaW5nXCIsIGRlZmF1bHRNZXNzYWdlOlwiTMOkZ2cgdGlsbCB1cHBnaWZ0ZW4gaSBlZ2VuIHZlY2tvcGxhbmVyaW5nIHt3ZWVrfVwifSwge3dlZWs6IGZvcldlZWtTdHJpbmd9KVxyXG4gICAgICAgIGNvbnN0IGNvbmZpcm1hdGlvblZpc2libGUgPVxyXG4gICAgICAgICAgY29uZmlybWF0aW9ucy5zb21lKHRpZCA9PiB0YXNrTG9va3VwSWQgPT09IHRpZCk7XHJcblxyXG4gICAgICAgIHJldHVybiA8ZGl2IGtleT17bGVhcm5pbmdUYXNrLmlkfT48ZGl2IGtleT17dGFza0xvb2t1cElkfSBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHNlbGVjdGVkQm94JHtzZWxlY3RlZCA/ICcgc2VsZWN0ZWQnIDogJyd9YH1cclxuICAgICAgICAgICAgICAgIHN0eWxlPXtpc1dvcmtpbmcgPyB7b3BhY2l0eTogMC41fToge319XHJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKT0+IWlzV29ya2luZyAmJiB3ZWVrUGxhbm5lcldlZWsgPT09IGN1cnJlbnRXZWVrID9cclxuICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVUYXNrKGxlYXJuaW5nVGFzaykgOlxyXG4gICAgICAgICAgICAgICAgICBjb25maXJtYXRpb25WaXNpYmxlID8gXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7Y29uZmlybWF0aW9uczogY29uZmlybWF0aW9ucy5maWx0ZXIodGlkID0+IHRpZCAhPT0gdGFza0xvb2t1cElkKX0pIDpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtjb25maXJtYXRpb25zOiBbLi4uY29uZmlybWF0aW9uc10uY29uY2F0KHRhc2tMb29rdXBJZCl9KX1cclxuICAgICAgICAgICAgICAgIHRpdGxlPXtkZXNjcmliZWRBY3Rpb259PlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgICA8YSBocmVmPXtsZWFybmluZ1Rhc2sudXJsfT57bGVhcm5pbmdUYXNrLm5hbWV9PC9hPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPENvbmZpcm1hdGlvblxyXG4gICAgICAgICAgICB2aXNpYmxlPXtjb25maXJtYXRpb25WaXNpYmxlfVxyXG4gICAgICAgICAgICB0ZXh0PXtkZXNjcmliZWRBY3Rpb259XHJcbiAgICAgICAgICAgIG9uQ29uZmlybT17KCk9PntcclxuICAgICAgICAgICAgICB0aGlzLnRvZ2dsZVRhc2sobGVhcm5pbmdUYXNrKTtcclxuICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtjb25maXJtYXRpb25zOiBjb25maXJtYXRpb25zLmZpbHRlcih0aWQgPT4gdGlkICE9PSB0YXNrTG9va3VwSWQpfSk7XHJcbiAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgIG9uQ2FuY2VsPXsoKT0+e1xyXG4gICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2NvbmZpcm1hdGlvbnM6IGNvbmZpcm1hdGlvbnMuZmlsdGVyKHRpZCA9PiB0aWQgIT09IHRhc2tMb29rdXBJZCl9KTtcclxuICAgICAgICAgICAgfX0gLz5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICB9XHJcbiAgICAgICl9XHJcbiAgICA8L2Rpdj5cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5leHBvcnQgY29uc3QgTGFuZ3VhZ2VDb250ZXh0ID0gUmVhY3QuY3JlYXRlQ29udGV4dCh7aW50bDogbnVsbH0pOyIsImltcG9ydCB7SW50bFByb3ZpZGVyLCBhZGRMb2NhbGVEYXRhfSBmcm9tICdyZWFjdC1pbnRsJztcclxuaW1wb3J0IGxvY2FsZV9lbiBmcm9tICdyZWFjdC1pbnRsL2xvY2FsZS1kYXRhL2VuJztcclxuaW1wb3J0IGxvY2FsZV9zdiBmcm9tICdyZWFjdC1pbnRsL2xvY2FsZS1kYXRhL3N2JztcclxuaW1wb3J0IG1lc3NhZ2VzX3N2IGZyb20gXCIuLi8uLi90cmFuc2xhdGlvbnMvc3YuanNvblwiO1xyXG5pbXBvcnQgbWVzc2FnZXNfZW4gZnJvbSBcIi4uLy4uL3RyYW5zbGF0aW9ucy9lbi5qc29uXCI7XHJcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IGNmZyBmcm9tICcuLi8uLi9nbG9iYWxzL0tFRC5jZmcnO1xyXG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcblxyXG5leHBvcnQgY29uc3Qgc2V0dXBJbnRsID0gPFAgZXh0ZW5kcyBvYmplY3Q+KENvbXBvbmVudDogUmVhY3QuQ29tcG9uZW50VHlwZTxQPikgPT5cclxuICAgIGNsYXNzIF9TZXR1cExhbmd1YWdlSW50bCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQPntcclxuICAgICAgICBtZXNzYWdlcyA6IG9iamVjdDtcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3IocHJvcHMpe1xyXG4gICAgICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICAgICAgICAgIGFkZExvY2FsZURhdGEoWy4uLmxvY2FsZV9lbiwuLi5sb2NhbGVfc3ZdKTtcclxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlcyA9IHtcclxuICAgICAgICAgICAgJ3N2JzogbWVzc2FnZXNfc3YsXHJcbiAgICAgICAgICAgICdlbic6IG1lc3NhZ2VzX2VuXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIG1vbWVudCgpLmxvY2FsZShjZmcuS0VEX0xPQ0FMRSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZW5kZXIoKXtcclxuICAgICAgICAgICAgcmV0dXJuIDxJbnRsUHJvdmlkZXIgbG9jYWxlPXtjZmcuS0VEX0xPQ0FMRX0gbWVzc2FnZXM9e3RoaXMubWVzc2FnZXNbY2ZnLktFRF9MT0NBTEVdfT5cclxuICAgICAgICAgICAgICAgIDxDb21wb25lbnQgey4uLnRoaXMucHJvcHMgYXMgUH0gLz5cclxuICAgICAgICAgICAgPC9JbnRsUHJvdmlkZXI+XHJcbiAgICAgICAgfVxyXG4gICAgfSIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcblxyXG5leHBvcnQgY29uc3QgQWxpZ25Ib3Jpem9udGFsID0gKHtjbGFzc05hbWUsIGNsYXNzTmFtZXMsIGNoaWxkcmVufToge2NsYXNzTmFtZT86IHN0cmluZywgY2xhc3NOYW1lcz86IHN0cmluZ1tdLCBjaGlsZHJlbjogYW55fSkgPT4gKFxyXG4gIDxkaXYgY2xhc3NOYW1lPXtbLi4uKGNsYXNzTmFtZXMgfHwgW10pLCAuLi4oY2xhc3NOYW1lID8gW2NsYXNzTmFtZV0gOiBbXSksIFwiYWxpZ24taG9yaXpvbnRhbFwiXS5qb2luKCcgJyl9PlxyXG4gICAge2NoaWxkcmVufVxyXG4gIDwvZGl2PlxyXG4pXHJcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIGF2YWlsYWJsZToge25hbWU6IHN0cmluZywga2V5OiBzdHJpbmd9W11cclxuICBzZWxlY3RlZDogc3RyaW5nW11cclxuICBvbkNoYW5nZTogKHNlbGVjdGVkOiBzdHJpbmdbXSwgY2xpY2tlZEtleTogc3RyaW5nLCB3YXNDaGVja2VkOiBib29sZWFuKSA9PiB2b2lkO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgQ2hlY2tsaXN0ID0gKHthdmFpbGFibGUsIHNlbGVjdGVkLCBvbkNoYW5nZX06IFByb3BzKSA9PiA8ZGl2IGNsYXNzTmFtZT1cInRhc2tDb250YWluZXJcIj5cclxuICB7XHJcbiAgICBhdmFpbGFibGUubWFwKCh7a2V5LCBuYW1lfSkgPT4ge1xyXG4gICAgICBjb25zdCBjaGVja2VkID0gc2VsZWN0ZWQuaW5jbHVkZXMoa2V5KTtcclxuICAgICAgcmV0dXJuIDxkaXYga2V5PXtrZXl9IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWxcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCIgb25DbGljaz17KCk9PlxyXG4gICAgICAgICAgICBvbkNoYW5nZShjaGVja2VkID9cclxuICAgICAgICAgICAgICBzZWxlY3RlZC5maWx0ZXIoayA9PiBrICE9IGtleSkgOlxyXG4gICAgICAgICAgICAgIHNlbGVjdGVkLmNvbmNhdChrZXkpLFxyXG4gICAgICAgICAgICAgIGtleSxcclxuICAgICAgICAgICAgICBjaGVja2VkKX0+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtcImNoZWNrQm94XCIgKyAoY2hlY2tlZCA/IFwiIGNoZWNrZWRcIiA6IFwiXCIpfT48L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj57bmFtZX08L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgfVxyXG4gICAgKVxyXG4gIH1cclxuPC9kaXY+XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgUmVtb3ZlSXRlbSB9IGZyb20gJy4uL2NvdXJzZS1idWlsZGVyL3N1Yi1jb21wb25lbnRzL3JlbW92ZS1pdGVtJztcclxuaW1wb3J0IHsgZmluZERPTU5vZGUgfSBmcm9tICdyZWFjdC1kb20nO1xyXG5pbXBvcnQgJCBmcm9tICdqcXVlcnknO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBkaWFsb2dzOiBSZWFjdC5Db21wb25lbnRbXTtcclxuICBwb3BEaWFsb2c6ICgpPT52b2lkO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRGlhbG9ncyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcz4ge1xyXG4gIGxhc3REaXY6IEhUTUxEaXZFbGVtZW50IHwgbnVsbDtcclxuXHJcbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzOiBQcm9wcykge1xyXG4gICAgaWYgKHRoaXMubGFzdERpdiAhPT0gbnVsbCAmJiBwcmV2UHJvcHMuZGlhbG9ncy5sZW5ndGggPiB0aGlzLnByb3BzLmRpYWxvZ3MubGVuZ3RoKSB7XHJcbiAgICAgIC8vIEEgZGlhbG9nIHdhcyBjbG9zZWQuIE5vdyBmb2N1cyB0aGUgbGFzdCBkaWFsb2c6XHJcbiAgICAgICQoZmluZERPTU5vZGUodGhpcy5sYXN0RGl2KSkuZmluZCgnOmlucHV0JykuZmlyc3QoKS5mb2N1cygpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyICgpIHtcclxuICAgIHRoaXMubGFzdERpdiA9IG51bGw7XHJcbiAgICBjb25zdCB7ZGlhbG9ncywgcG9wRGlhbG9nfSA9IHRoaXMucHJvcHM7XHJcbiAgICAkKCdib2R5JykuYXR0cignYXJpYS1kaXNhYmxlZCcsIGRpYWxvZ3MubGVuZ3RoID4gMCk7XHJcbiAgICAkKCdib2R5JykuY3NzKCdvdmVyZmxvdycsIGRpYWxvZ3MubGVuZ3RoID4gMCA/ICdoaWRkZW4nIDogJ2F1dG8nKTtcclxuXHJcbiAgICByZXR1cm4gZGlhbG9ncy5sZW5ndGggPiAwICYmIDxkaXY+XHJcbiAgICAgIHtkaWFsb2dzLm1hcCgoZGlhbG9nLCBpZHgpID0+IHtcclxuICAgICAgICBsZXQgZGl2OiBIVE1MRGl2RWxlbWVudDtcclxuICAgICAgICBmdW5jdGlvbiBvbktleVByZXNzKGV2OiBSZWFjdC5LZXlib2FyZEV2ZW50PEhUTUxEaXZFbGVtZW50Pikge1xyXG4gICAgICAgICAgaWYgKGV2LndoaWNoID09PSAxMyAmJiAoIWV2LnRhcmdldCB8fCAoZXYudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS50YWdOYW1lICE9PSAnVEVYVEFSRUEnKSkge1xyXG4gICAgICAgICAgICAkKGZpbmRET01Ob2RlKGRpdikpLmZpbmQoJy5idG4tZGVmYXVsdCcpLmNsaWNrKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZnVuY3Rpb24gb25LZXlEb3duKGV2KSB7XHJcbiAgICAgICAgICBpZiAoZXYud2hpY2ggPT09IDI3KSB7IC8vIEVzY2FwZVxyXG4gICAgICAgICAgICBwb3BEaWFsb2coKTtcclxuICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChldi53aGljaCA9PT0gODMgJiYgKGV2LmN0cmxLZXkgfHwgZXYubWV0YUtleSkpIHsgLy8gQ1RSTC1TXHJcbiAgICAgICAgICAgIGNvbnN0IGRvbU5vZGUgPSBmaW5kRE9NTm9kZShkaXYpO1xyXG4gICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBjb25zdCBkZWZhdWx0QnV0dG9uID0gJChkb21Ob2RlKS5maW5kKCcuYnRuLWRlZmF1bHQnKTtcclxuICAgICAgICAgICAgZGVmYXVsdEJ1dHRvbi5jbGljaygpO1xyXG4gICAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIDxkaXYga2V5PXtpZHh9PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImRhcmtlblwiIC8+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwibW9kYWwtcGFnZS13cmFwXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtb2RhbC1wYWdlXCIgcmVmPXtlbGVtID0+IHtcclxuICAgICAgICAgIGRpdiA9IGVsZW07XHJcbiAgICAgICAgICBpZiAoaWR4ID09PSBkaWFsb2dzLmxlbmd0aCAtIDEpIHRoaXMubGFzdERpdiA9IGVsZW07XHJcbiAgICAgICAgfX1cclxuICAgICAgICAgICAgdGFiSW5kZXg9ezB9XHJcbiAgICAgICAgICAgIGFyaWEtZGlzYWJsZWQ9e2lkeCA8IGRpYWxvZ3MubGVuZ3RoIC0gMX1cclxuICAgICAgICAgICAgb25LZXlQcmVzcz17b25LZXlQcmVzc31cclxuICAgICAgICAgICAgb25LZXlEb3duPXtvbktleURvd259PlxyXG4gICAgICAgICAge2RpYWxvZ31cclxuICAgICAgICAgIDxSZW1vdmVJdGVtIG9uQ2xpY2s9e3BvcERpYWxvZ30gLz5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3RvcEZsb2F0c1wiPjwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2Pn0pfVxyXG4gIDwvZGl2PjtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBGb3JtRmllbGQgfSBmcm9tICcuL2Zvcm0tZmllbGQnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBsYWJlbDogYW55O1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgdmFsdWU6IHN0cmluZztcclxuICBwbGFjZWhvbGRlcj86IHN0cmluZztcclxuICBhdXRvRm9jdXM/OiBib29sZWFuO1xyXG4gIG9uQ2hhbmdlOiAodmFsdWU6IHN0cmluZykgPT4gdm9pZDtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFRleHRJbnB1dCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcz4ge1xyXG4gIGNvbnN0cnVjdG9yIChwcm9wczogUHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxGb3JtRmllbGQgbGFiZWw9e3RoaXMucHJvcHMubGFiZWx9PlxyXG4gICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGF1dG9Gb2N1cz17dGhpcy5wcm9wcy5hdXRvRm9jdXN9IGlkPXt0aGlzLnByb3BzLmlkfSBzaXplPXszNX0gdmFsdWU9e3RoaXMucHJvcHMudmFsdWV9XHJcbiAgICAgICAgICAgICAgb25DaGFuZ2U9e2V2ID0+IHRoaXMucHJvcHMub25DaGFuZ2UoZXYudGFyZ2V0LnZhbHVlKX1cclxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17dGhpcy5wcm9wcy5wbGFjZWhvbGRlcn0gLz5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICA8L0Zvcm1GaWVsZD5cclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEZvcm1GaWVsZCB9IGZyb20gJy4vZm9ybS1maWVsZCc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIGxhYmVsOiBhbnk7XHJcbiAgaWQ6IHN0cmluZztcclxuICB2YWx1ZTogc3RyaW5nO1xyXG4gIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xyXG4gIGF1dG9Gb2N1cz86IGJvb2xlYW47XHJcbiAgcm93cz86IG51bWJlcjtcclxuICBjaGlsZHJlbj87XHJcbiAgb25DaGFuZ2U6ICh2YWx1ZTogc3RyaW5nKSA9PiB2b2lkO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVGV4dEFyZWFGb3JtRmllbGQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHM+IHtcclxuICBjb25zdHJ1Y3RvciAocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8Rm9ybUZpZWxkIGxhYmVsPXt0aGlzLnByb3BzLmxhYmVsfSBpZD17dGhpcy5wcm9wcy5pZH0+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgICA8dGV4dGFyZWEgYXV0b0ZvY3VzPXt0aGlzLnByb3BzLmF1dG9Gb2N1c30gaWQ9e3RoaXMucHJvcHMuaWR9IGNvbHM9ezM1fSByb3dzPXt0aGlzLnByb3BzLnJvd3MgfHwgNX0gdmFsdWU9e3RoaXMucHJvcHMudmFsdWV9XHJcbiAgICAgICAgICAgICAgb25DaGFuZ2U9e2V2ID0+IHRoaXMucHJvcHMub25DaGFuZ2UoZXYudGFyZ2V0LnZhbHVlKX1cclxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17dGhpcy5wcm9wcy5wbGFjZWhvbGRlcn0gLz5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgeyEhdGhpcy5wcm9wcy5jaGlsZHJlbiAmJiA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtXCI+XHJcbiAgICAgICAgICAgIHt0aGlzLnByb3BzLmNoaWxkcmVufVxyXG4gICAgICAgICAgPC9kaXY+fVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L0Zvcm1GaWVsZD5cclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIGxhYmVsOiBhbnk7XHJcbiAgY2hpbGRyZW46IGFueTtcclxuICBpZD86IHN0cmluZztcclxufVxyXG5cclxuZnVuY3Rpb24gZmluZElkKG5vZGUpIHtcclxuICBjb25zdCByZWN1Y2hlY2sgPSBuZXcgU2V0KCk7XHJcbiAgcmV0dXJuIChmdW5jdGlvbiBmaW5kSWQobm9kZSl7XHJcbiAgICBpZiAodHlwZW9mIG5vZGUgPT09ICdzdHJpbmcnKSByZXR1cm4gbnVsbDtcclxuICAgIGlmIChyZWN1Y2hlY2suaGFzKG5vZGUpKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHJlY3VjaGVjay5hZGQobm9kZSk7XHJcbiAgICBpZiAobm9kZS5wcm9wcykge1xyXG4gICAgICBpZiAobm9kZS5wcm9wcy5pZCkgcmV0dXJuIG5vZGUucHJvcHMuaWQ7XHJcbiAgICAgIGlmIChub2RlLnByb3BzLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgcmV0dXJuIGZpbmRJZChub2RlLnByb3BzLmNoaWxkcmVuKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAobm9kZS5sZW5ndGgpIHtcclxuICAgICAgZm9yIChsZXQgaT0wO2k8bm9kZS5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgIGNvbnN0IGNoaWxkID0gbm9kZVtpXTtcclxuICAgICAgICBpZiAoY2hpbGQpIHtcclxuICAgICAgICAgIGNvbnN0IGNoaWxkSWQgPSBmaW5kSWQoY2hpbGQpO1xyXG4gICAgICAgICAgaWYgKGNoaWxkSWQpIHJldHVybiBjaGlsZElkO1xyXG4gICAgICAgICAgLy9jb25zb2xlLmxvZyhjaGlsZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSkobm9kZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBGb3JtRmllbGQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHM+IHtcclxuICBjb25zdHJ1Y3RvciAocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICByZXR1cm4gPD5cclxuICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwia2NsYWJlbFwiIGh0bWxGb3I9e3RoaXMucHJvcHMuaWQgfHwgZmluZElkKHRoaXMucHJvcHMuY2hpbGRyZW4pfT57dGhpcy5wcm9wcy5sYWJlbH08L2xhYmVsPlxyXG4gICAgICAgIHt0aGlzLnByb3BzLmNoaWxkcmVufVxyXG4gICAgPC8+XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcblxyXG5leHBvcnQgY29uc3QgSG9yaXpvbnRhbEl0ZW0gPSAoe2NsYXNzTmFtZSwgY2xhc3NOYW1lcywgY2hpbGRyZW59OiB7Y2xhc3NOYW1lPzogc3RyaW5nLCBjbGFzc05hbWVzPzogc3RyaW5nW10sIGNoaWxkcmVuOiBhbnl9KSA9PiAoXHJcbiAgPGRpdiBjbGFzc05hbWU9e1suLi4oY2xhc3NOYW1lcyB8fCBbXSksIC4uLihjbGFzc05hbWUgPyBbY2xhc3NOYW1lXSA6IFtdKSwgXCJob3Jpem9udGFsSXRlbVwiXS5qb2luKCcgJyl9PlxyXG4gICAge2NoaWxkcmVufVxyXG4gIDwvZGl2PlxyXG4pXHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ2tlZGJhY2tlbmQvb2JzZXJ2YWJsZSc7XHJcbmltcG9ydCB7IExpdmVRdWVyeVZpZXcgfSBmcm9tICcuL2xpdmUtcXVlcnktdmlldyc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIGNoaWxkcmVuOiBPYnNlcnZhYmxlPEpTWC5FbGVtZW50PjtcclxuICBzcGlubmVyPzogSlNYLkVsZW1lbnQ7XHJcbiAgbm9FcnJvcj86IGJvb2xlYW47XHJcbiAgb25FcnJvcj86IChlcnJvcjogRXJyb3IpID0+IEpTWC5FbGVtZW50O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gTGF6eUNvbnRlbnQoe2NoaWxkcmVuLCBzcGlubmVyLCBvbkVycm9yLCBub0Vycm9yfTogUHJvcHMpIHtcclxuICByZXR1cm4gPExpdmVRdWVyeVZpZXdcclxuICAgIHByb3BzPXtjaGlsZHJlbn1cclxuICAgIHNwaW5uZXI9e3NwaW5uZXJ9XHJcbiAgICBub0Vycm9yPXtub0Vycm9yfVxyXG4gICAgb25FcnJvcj17b25FcnJvcn1cclxuICAgIGZuPXtvYnNlcnZhYmxlID0+IG9ic2VydmFibGV9IC8+O1xyXG59XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgU3Bpbm5lciB9IGZyb20gJy4uL2NvdXJzZS1idWlsZGVyL3N1Yi1jb21wb25lbnRzL3NwaW5uZXInO1xyXG5pbXBvcnQgeyBzaGFsbG93RXF1YWxzIH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBTdWJzY3JpcHRpb24gfSBmcm9tICdrZWRiYWNrZW5kL29ic2VydmFibGUnO1xyXG5cclxuaW50ZXJmYWNlIE9wdGlvbnMge1xyXG4gIHNwaW5uZXI/OiBKU1guRWxlbWVudDtcclxuICBvbkVycm9yPzogKGVycm9yOiBFcnJvcikgPT4gSlNYLkVsZW1lbnQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBsaXZlUXVlcnlWaWV3PFRQcm9wcz4oXHJcbiAgZm46IChwcm9wczogVFByb3BzKSA9PiBPYnNlcnZhYmxlPEpTWC5FbGVtZW50PixcclxuICBvcHRpb25zPzogT3B0aW9ucyk6IChwcm9wczogVFByb3BzKSA9PiBKU1guRWxlbWVudFxyXG57XHJcbiAgcmV0dXJuIChwcm9wczogVFByb3BzKT0+e1xyXG4gICAgcmV0dXJuIDxMaXZlUXVlcnlWaWV3IHByb3BzPXtwcm9wc30gZm49e2ZufSB7Li4ub3B0aW9uc30gLz47XHJcbiAgfVxyXG59XHJcblxyXG5pbnRlcmZhY2UgUHJvcHM8VFByb3BzPiB7XHJcbiAgcHJvcHM6IFRQcm9wcztcclxuICBzcGlubmVyPzogSlNYLkVsZW1lbnQ7XHJcbiAgbm9FcnJvcj86IGJvb2xlYW47XHJcbiAgb25FcnJvcj86IChlcnJvcjogRXJyb3IpID0+IEpTWC5FbGVtZW50O1xyXG4gIGZuOiAocHJvcHM6IFRQcm9wcykgPT4gT2JzZXJ2YWJsZTxKU1guRWxlbWVudD47XHJcbn1cclxuXHJcbmludGVyZmFjZSBTdGF0ZSB7XHJcbiAgcmVzdWx0OiBKU1guRWxlbWVudDtcclxuICBlcnJvcj86IEVycm9yO1xyXG4gIGlzTG9hZGluZzogYm9vbGVhbjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIExpdmVRdWVyeVZpZXc8VFByb3BzPiBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wczxUUHJvcHM+LCBTdGF0ZT4ge1xyXG4gIHByaXZhdGUgc3Vic2NyaXB0aW9uPzogU3Vic2NyaXB0aW9uO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHM8VFByb3BzPikge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgcmVzdWx0OiBudWxsLFxyXG4gICAgICBpc0xvYWRpbmc6IHRydWVcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgIHRoaXMuc3Vic2NyaWJlKCk7XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcclxuICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcclxuICB9XHJcblxyXG4gIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHM6IFByb3BzPFRQcm9wcz4sIG5leHRTdGF0ZTogU3RhdGUpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIHRoaXMuc3RhdGUuZXJyb3IgIT09IG5leHRTdGF0ZS5lcnJvciB8fFxyXG4gICAgICB0aGlzLnN0YXRlLmlzTG9hZGluZyAhPT0gbmV4dFN0YXRlLmlzTG9hZGluZyB8fFxyXG4gICAgICB0aGlzLnN0YXRlLnJlc3VsdCAhPT0gbmV4dFN0YXRlLnJlc3VsdCB8fFxyXG4gICAgICAhc2hhbGxvd0VxdWFscyhuZXh0UHJvcHMucHJvcHMsIHRoaXMucHJvcHMucHJvcHMpXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wczogUHJvcHM8VFByb3BzPikge1xyXG4gICAgaWYgKCFzaGFsbG93RXF1YWxzKHByZXZQcm9wcy5wcm9wcywgdGhpcy5wcm9wcy5wcm9wcykpIHtcclxuICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xyXG4gICAgICB0aGlzLnN1YnNjcmliZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3Vic2NyaWJlKCkge1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7aXNMb2FkaW5nOiB0cnVlfSBhcyBhbnkpO1xyXG4gICAgdGhpcy5zdWJzY3JpcHRpb24gPSB0aGlzLnByb3BzLmZuKHRoaXMucHJvcHMucHJvcHMpLnN1YnNjcmliZSgocmVzdWx0LCBlcnJvcikgPT4gdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIHJlc3VsdCxcclxuICAgICAgZXJyb3IsXHJcbiAgICAgIGlzTG9hZGluZzogZmFsc2VcclxuICAgIH0pKTtcclxuICB9XHJcblxyXG4gIHVuc3Vic2NyaWJlKCkge1xyXG4gICAgaWYgKHRoaXMuc3Vic2NyaXB0aW9uKSB7XHJcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9uID0gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIFxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHtyZXN1bHQsIGVycm9yLCBpc0xvYWRpbmd9ID0gdGhpcy5zdGF0ZTtcclxuICAgIGNvbnN0IHtzcGlubmVyLCBvbkVycm9yLCBub0Vycm9yfSA9IHRoaXMucHJvcHM7XHJcbiAgICAvL2lmICghaXNMb2FkaW5nICYmICFyZXN1bHQpIGRlYnVnZ2VyO1xyXG4gICAgcmV0dXJuIGVycm9yID9cclxuICAgICAgbm9FcnJvciA/IFwiXCIgOiBvbkVycm9yID8gb25FcnJvcihlcnJvcikgOiA8cD5FcnJvcjoge2Vycm9yLm1lc3NhZ2V9PC9wPiA6XHJcbiAgICAgIGlzTG9hZGluZyA/XHJcbiAgICAgICAgc3Bpbm5lciA/IHNwaW5uZXIgOiBcIlwiIDpcclxuICAgICAgICByZXN1bHQgPT09IHVuZGVmaW5lZCA/IFwiXCIgOiByZXN1bHQ7XHJcbiAgfVxyXG59IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBSZXN0Q2xpZW50U3RhdHVzIH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnQnO1xyXG5pbXBvcnQgeyBWYWx1ZSB9IGZyb20gJ2tlZGJhY2tlbmQvb2JzZXJ2YWJsZSc7XHJcbmltcG9ydCB7IGxpdmVRdWVyeVZpZXcgfSBmcm9tICcuL2xpdmUtcXVlcnktdmlldyc7XHJcbmltcG9ydCB7IFNwaW5uZXIgfSBmcm9tICcuLi9jb3Vyc2UtYnVpbGRlci9zdWItY29tcG9uZW50cy9zcGlubmVyJztcclxuaW1wb3J0IGVudiBmcm9tICcuLi8uLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5pbXBvcnQgeyBFbGxpcHNpc0xvYWRlciB9IGZyb20gJy4uL2NvdXJzZS1idWlsZGVyL3N1Yi1jb21wb25lbnRzL2VsbGlwc2lzLWxvYWRlcic7XHJcblxyXG5leHBvcnQgY29uc3QgTG9hZGluZ0luZGljYXRvciA9IGxpdmVRdWVyeVZpZXcoKCkgPT5cclxuICBlbnYua2VkQmFja2VuZENsaWVudC5odHRwLnN0YXR1cy5jb21iaW5lTGF0ZXN0KGVudi5lZHNDbGllbnQuaHR0cC5zdGF0dXMpXHJcbiAgLm1hcCgoW2tlZEJhY2tlbmRTdGF0dXMsIGVkc1N0YXR1c10pPT48ZGl2IGNsYXNzTmFtZT1cImxvYWRpbmctaW5kaWNhdG9yXCI+PGRpdiBjbGFzc05hbWU9XCJpbmRpY2F0b3JcIj5cclxuICAgIHtrZWRCYWNrZW5kU3RhdHVzLm51bU91dHN0YW5kaW5nT3BlcmF0aW9ucyA+IDAgfHwgZWRzU3RhdHVzLm51bU91dHN0YW5kaW5nT3BlcmF0aW9ucyA+IDAgP1xyXG4gICAgICA8U3Bpbm5lciAvPiA6IHVuZGVmaW5lZH1cclxuPC9kaXY+PC9kaXY+KSk7XHJcbiIsIi8qIFJFRkFDVE9SOiBNb3ZlIHRoaXMgY29tcG9uZW50IG91dHNpZGUgY291cnNlYnVpbGRlciFcclxuICAgVGhpcyBpcyBhIGdlbmVyYWwtcHVycG9zZSBjb21wb25lbnRcclxuKi9cclxuXHJcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgR29hbFByb2dyZXNzIH0gZnJvbSAnLi4vY2hhcnRzL2dvYWwtcHJvZ3Jlc3MnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICB0aXRsZTogc3RyaW5nIHwgSlNYLkVsZW1lbnQ7XHJcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xyXG4gIGhlYWRlckNsYXNzTmFtZT86IHN0cmluZztcclxuICBjb250ZW50Q2xhc3NOYW1lPzogc3RyaW5nO1xyXG4gIGhlYWRlck9wZW4/OiBib29sZWFuO1xyXG4gIGluYWN0aXZhdGVkPzogYm9vbGVhbjtcclxuICBpbmFjdGl2YXRlZFJlbmRlcj86ICdjaGlsZHJlbicgfCAndGl0bGVBbmRDaGlsZHJlbic7XHJcbiAgb25PcGVuQ2xvc2U/OiAoYmVjYW1lT3BlbjogYm9vbGVhbikgPT4gdm9pZDtcclxuICBkaXNwbGF5UHJvZ3Jlc3M/OiBib29sZWFuO1xyXG4gIHByb2dyZXNzRGF0YT86IHtjb21wbGV0ZWROdW1iZXJPZlRhc2tzOiBudW1iZXIsIG51bWJlck9mVGFza3M6IG51bWJlcn07XHJcbiAgY2hpbGRyZW47XHJcbn1cclxuXHJcbmludGVyZmFjZSBTdGF0ZSB7XHJcbiAgaGVhZGVyT3BlbjogYm9vbGVhbjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIE9wZW5DbG9zZUJveCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcyxTdGF0ZT4ge1xyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgaGVhZGVyT3BlbjogcHJvcHMuaGVhZGVyT3BlbiB8fCBmYWxzZVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgKG5leHRQcm9wczogUHJvcHMpIHtcclxuICAgIGlmIChuZXh0UHJvcHMuaGVhZGVyT3BlbiAhPT0gdGhpcy5wcm9wcy5oZWFkZXJPcGVuKSB7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe2hlYWRlck9wZW46IG5leHRQcm9wcy5oZWFkZXJPcGVufSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7IHRpdGxlLCBjbGFzc05hbWUsIGNoaWxkcmVuLCBoZWFkZXJDbGFzc05hbWUsIGNvbnRlbnRDbGFzc05hbWUsIGRpc3BsYXlQcm9ncmVzcywgcHJvZ3Jlc3NEYXRhLFxyXG4gICAgICBpbmFjdGl2YXRlZCwgaW5hY3RpdmF0ZWRSZW5kZXIgfSA9IHRoaXMucHJvcHM7XHJcbiAgICBjb25zdCB7IGhlYWRlck9wZW4gfSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgaWYgKGluYWN0aXZhdGVkKSByZXR1cm4gaW5hY3RpdmF0ZWRSZW5kZXIgPT09ICd0aXRsZUFuZENoaWxkcmVuJyA/IDw+XHJcbiAgICAgIDw+e3RpdGxlfTwvPlxyXG4gICAgICA8PntjaGlsZHJlbn08Lz5cclxuICAgIDwvPiA6IDw+XHJcbiAgICAgIHtjaGlsZHJlbn1cclxuICAgIDwvPjtcclxuXHJcbiAgICAvL3ZhciBjdXJyZW50UHJvZ3Jlc3NEYXRhID0gLy9wcm9ncmVzc0RhdGEoKTtcclxuICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT17KGNsYXNzTmFtZXx8JycpICsgXCIgb3BlbkNsb3NlXCIgKyAoaGVhZGVyT3BlbiA/IFwiIG9wZW5cIiA6IFwiXCIpfT5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9e1wib3BlbkhlYWRlclwiICsgKGhlYWRlckNsYXNzTmFtZSA/IFwiIFwiICsgaGVhZGVyQ2xhc3NOYW1lIDogXCJcIil9XHJcbiAgICAgICAgb25DbGljaz17KCkgPT4ge1xyXG4gICAgICAgICAgaWYgKHRoaXMucHJvcHMub25PcGVuQ2xvc2UpIHRoaXMucHJvcHMub25PcGVuQ2xvc2UoIXRoaXMuc3RhdGUuaGVhZGVyT3Blbik7XHJcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgaGVhZGVyT3BlbjogIXRoaXMuc3RhdGUuaGVhZGVyT3BlbiB9KTtcclxuICAgICAgICB9fSA+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJvcGVuSGVhZGVyQ29udGFpbmVyXCI+XHJcbiAgICAgICAgICA8ZGl2Pnt0aXRsZX08L2Rpdj5cclxuICAgICAgICAgIHtkaXNwbGF5UHJvZ3Jlc3MgJiYgPEdvYWxQcm9ncmVzcyB7Li4ucHJvZ3Jlc3NEYXRhfS8+fVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9e1wib3BlbkNvbnRlbnRcIiArIChjb250ZW50Q2xhc3NOYW1lID8gXCIgXCIgKyBjb250ZW50Q2xhc3NOYW1lIDogXCJcIil9PlxyXG4gICAgICAgIHtjaGlsZHJlbn1cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj47XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgVGFzayB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVGFza1dpdGhNZXRhZGF0YSB7XHJcbiAgdGFzazogVGFzaztcclxuICBpc1Rhc2tPd25lcjogYm9vbGVhbjtcclxufVxyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICB0YXNrTWV0YXM6IFRhc2tXaXRoTWV0YWRhdGFbXTtcclxuICBvblNvcnQ6IChzb3VyY2U6IFRhc2ssIHRhcmdldDogVGFzaywgcGxhY2VtZW50OiAnYmVmb3JlJyB8ICdhZnRlcicpID0+IHZvaWQ7XHJcbiAgcmVuZGVyRWRpdExpbms/OiAodGFza01ldGE6IFRhc2tXaXRoTWV0YWRhdGEpID0+IGFueTtcclxuICByZW5kZXJMaW5rOiAodGFza01ldGE6IFRhc2tXaXRoTWV0YWRhdGEpID0+IGFueTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHRhc2tIYXNNaWdyYXRlZFRleHRzKHRhc2s6IFRhc2spIHtcclxuICByZXR1cm4gdGFzay5taWdyYXRlZFRleHRzICYmIE9iamVjdC5rZXlzKHRhc2subWlncmF0ZWRUZXh0cykuc29tZSh0eXBlID0+XHJcbiAgICBPYmplY3Qua2V5cyh0YXNrLm1pZ3JhdGVkVGV4dHNbdHlwZV0pLmxlbmd0aCA+IDApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gU29ydGFibGVUYXNrTGlzdCh7dGFza01ldGFzLCByZW5kZXJFZGl0TGluaywgcmVuZGVyTGluaywgb25Tb3J0fTogUHJvcHMpIHtcclxuICBjb25zdCBbZHJhZ1N0YXRlLCBzZXREcmFnU3RhdGVdID0gdXNlU3RhdGUoe1xyXG4gICAgdGFza0JlaW5nRHJhZ2dlZDogbnVsbCBhcyBUYXNrIHwgbnVsbCxcclxuICAgIHRhc2tCZWluZ0hvdmVyZWQ6IG51bGwgYXMgVGFzayB8IG51bGwsXHJcbiAgICBpbnNlcnRCZWZvcmU6IGZhbHNlLFxyXG4gICAgb3JpZ2luQ2xpZW50WTogLTFcclxuICB9KTtcclxuICBjb25zdCB7dGFza0JlaW5nRHJhZ2dlZCwgdGFza0JlaW5nSG92ZXJlZCwgaW5zZXJ0QmVmb3JlLCBvcmlnaW5DbGllbnRZfSA9IGRyYWdTdGF0ZTtcclxuXHJcbiAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwidGFza0NvbnRhaW5lciBzb3J0YWJsZVwiXHJcbiAgICAgIG9uRHJvcD17ZXYgPT4ge1xyXG4gICAgICAgIGlmICh0YXNrQmVpbmdIb3ZlcmVkICYmIHRhc2tCZWluZ0RyYWdnZWQpIHtcclxuICAgICAgICAgIG9uU29ydCh0YXNrQmVpbmdEcmFnZ2VkLCB0YXNrQmVpbmdIb3ZlcmVkLCBpbnNlcnRCZWZvcmUgPyAnYmVmb3JlJyA6ICdhZnRlcicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZXREcmFnU3RhdGUoey4uLmRyYWdTdGF0ZSwgdGFza0JlaW5nSG92ZXJlZDogbnVsbCwgdGFza0JlaW5nRHJhZ2dlZDogbnVsbH0pO1xyXG4gICAgICB9fVxyXG4gICAgPlxyXG4gIHt0YXNrTWV0YXMubWFwKHRhc2tNZXRhID0+IHtcclxuICAgIGNvbnN0IHt0YXNrLCBpc1Rhc2tPd25lcn0gPSB0YXNrTWV0YTtcclxuICAgIGNvbnN0IGhhc01pZ3JhdGVkVGV4dHMgPSB0YXNrSGFzTWlncmF0ZWRUZXh0cyh0YXNrKTtcclxuICAgIGNvbnN0IHRhc2tJZCA9IHRhc2suaWQ7XHJcblxyXG4gICAgcmV0dXJuIDxSZWFjdC5GcmFnbWVudCBrZXk9e3Rhc2tJZH0+XHJcblxyXG4gICAgICB7aW5zZXJ0QmVmb3JlICYmIHRhc2tCZWluZ0hvdmVyZWQgPT09IHRhc2sgP1xyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZHJvcC10YXJnZXRcIiBvbkRyYWdPdmVyPXtldiA9PiBldi5wcmV2ZW50RGVmYXVsdCgpfT4mbmJzcDs8L2Rpdj4gOlxyXG4gICAgICAgIG51bGxcclxuICAgICAgfVxyXG5cclxuICAgICAgPGRpdlxyXG4gICAgICAgIGNsYXNzTmFtZT17W1wiYWxpZ24taG9yaXpvbnRhbFwiLCBcImRyYWdnYWJsZVwiLCB0YXNrID09PSB0YXNrQmVpbmdEcmFnZ2VkICYmIFwiZHJhZy1zb3VyY2VcIl0uZmlsdGVyKHg9PngpLmpvaW4oJyAnKX1cclxuICAgICAgICBkcmFnZ2FibGU9e3RydWV9XHJcbiAgICAgICAgb25EcmFnU3RhcnQ9e2V2ID0+IHtcclxuICAgICAgICAgIGV2LmRhdGFUcmFuc2Zlci5lZmZlY3RBbGxvd2VkID0gXCJtb3ZlXCI7XHJcbiAgICAgICAgICBzZXREcmFnU3RhdGUoey4uLmRyYWdTdGF0ZSwgb3JpZ2luQ2xpZW50WTogZXYuY2xpZW50WSwgdGFza0JlaW5nRHJhZ2dlZDogdGFza30pXHJcbiAgICAgICAgfX1cclxuICAgICAgICBvbkRyYWdPdmVyPXtldiA9PiB7XHJcbiAgICAgICAgICBpZiAoIXRhc2tCZWluZ0RyYWdnZWQpIHJldHVybjtcclxuICAgICAgICAgIGlmICh0YXNrQmVpbmdEcmFnZ2VkID09PSB0YXNrKSB7XHJcbiAgICAgICAgICAgIHNldERyYWdTdGF0ZSh7Li4uZHJhZ1N0YXRlLCB0YXNrQmVpbmdIb3ZlcmVkOiBudWxsfSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICBldi5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9IFwibW92ZVwiO1xyXG4gICAgICAgICAgc2V0RHJhZ1N0YXRlKHsuLi5kcmFnU3RhdGUsIHRhc2tCZWluZ0hvdmVyZWQ6IHRhc2ssIGluc2VydEJlZm9yZTogb3JpZ2luQ2xpZW50WSA+IGV2LmNsaWVudFl9KTtcclxuICAgICAgICB9fVxyXG4gICAgICAgIG9uRHJhZ0VuZD17ZXYgPT4ge1xyXG4gICAgICAgICAgc2V0RHJhZ1N0YXRlKHsuLi5kcmFnU3RhdGUsIHRhc2tCZWluZ0hvdmVyZWQ6IG51bGwsIHRhc2tCZWluZ0RyYWdnZWQ6IG51bGx9KTtcclxuICAgICAgICB9fT5cclxuICAgICAgICB7aXNUYXNrT3duZXIgJiYgaGFzTWlncmF0ZWRUZXh0cyAmJiA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgPGRpdiBzdHlsZT17e3Bvc2l0aW9uOidyZWxhdGl2ZScsIHRvcDonMC4yZW0nLCBsZWZ0OiAnLTAuN2VtJ319PlxyXG4gICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1wYWdlbGluZXNcIiBzdHlsZT17e3Bvc2l0aW9uOidhYnNvbHV0ZScsIHRvcDogMCwgbGVmdDogMCwgY29sb3I6JyM0OWMzNWEnfX0gLz5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2Pn1cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAge3JlbmRlckVkaXRMaW5rKHRhc2tNZXRhKX1cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAge3JlbmRlckxpbmsodGFza01ldGEpfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuXHJcbiAgICAgIHshaW5zZXJ0QmVmb3JlICYmIHRhc2tCZWluZ0hvdmVyZWQgPT09IHRhc2sgP1xyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZHJvcC10YXJnZXRcIiBvbkRyYWdPdmVyPXtldiA9PiBldi5wcmV2ZW50RGVmYXVsdCgpfT4mbmJzcDs8L2Rpdj4gOlxyXG4gICAgICAgIG51bGxcclxuICAgICAgfVxyXG5cclxuICAgIDwvUmVhY3QuRnJhZ21lbnQ+O1xyXG4gIH0pfVxyXG4gIDwvZGl2PjtcclxufVxyXG4iLCJpbXBvcnQgZXhlYyBmcm9tICcuL2V4ZWMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gIGJvbGQ6IHtcclxuICAgIGljb246ICc8Yj5GPC9iPicsXHJcbiAgICB0aXRsZTogJ0ZldHN0aWwnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdib2xkJylcclxuICB9LFxyXG4gIGl0YWxpYzoge1xyXG4gICAgaWNvbjogJzxpPks8L2k+JyxcclxuICAgIHRpdGxlOiAnS3Vyc2l2JyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnaXRhbGljJylcclxuICB9LFxyXG4gIHVuZGVybGluZToge1xyXG4gICAgaWNvbjogJzx1PlU8L3U+JyxcclxuICAgIHRpdGxlOiAnVW5kZXJzdHJ1a2VuJyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygndW5kZXJsaW5lJylcclxuICB9LFxyXG4gIHN0cmlrZXRocm91Z2g6IHtcclxuICAgIGljb246ICc8c3RyaWtlPlM8L3N0cmlrZT4nLFxyXG4gICAgdGl0bGU6ICdTdHJ1a2VuJyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnc3RyaWtlVGhyb3VnaCcpXHJcbiAgfSxcclxuICBoZWFkaW5nMToge1xyXG4gICAgaWNvbjogJzxiPkg8c3ViPjE8L3N1Yj48L2I+JyxcclxuICAgIHRpdGxlOiAnUnVicmlrIDEnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdmb3JtYXRCbG9jaycsICc8SDE+JylcclxuICB9LFxyXG4gIGhlYWRpbmcyOiB7XHJcbiAgICBpY29uOiAnPGI+SDxzdWI+Mjwvc3ViPjwvYj4nLFxyXG4gICAgdGl0bGU6ICdSdWJyaWsgMicsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2Zvcm1hdEJsb2NrJywgJzxIMj4nKVxyXG4gIH0sXHJcbiAgaGVhZGluZzM6IHtcclxuICAgIGljb246ICc8Yj5IPHN1Yj4zPC9zdWI+PC9iPicsXHJcbiAgICB0aXRsZTogJ1J1YnJpayAzJyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnZm9ybWF0QmxvY2snLCAnPEgzPicpXHJcbiAgfSxcclxuICBwYXJhZ3JhcGg6IHtcclxuICAgIGljb246ICcmIzE4MjsnLFxyXG4gICAgdGl0bGU6ICdQYXJhZ3JhZicsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2Zvcm1hdEJsb2NrJywgJzxQPicpXHJcbiAgfSxcclxuICBxdW90ZToge1xyXG4gICAgaWNvbjogJyYjODIyMDsgJiM4MjIxOycsXHJcbiAgICB0aXRsZTogJ0NpdGF0JyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnZm9ybWF0QmxvY2snLCAnPEJMT0NLUVVPVEU+JylcclxuICB9LFxyXG4gIG9saXN0OiB7XHJcbiAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1saXN0LW9sXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPicsXHJcbiAgICB0aXRsZTogJ09yZG5hZCBsaXN0YScsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2luc2VydE9yZGVyZWRMaXN0JylcclxuICB9LFxyXG4gIHVsaXN0OiB7XHJcbiAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1saXN0XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPicsXHJcbiAgICB0aXRsZTogJ1B1bmt0bGlzdGEnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdpbnNlcnRVbm9yZGVyZWRMaXN0JylcclxuICB9LFxyXG4gIGNvZGU6IHtcclxuICAgIGljb246ICcmbHQ7LyZndDsnLFxyXG4gICAgdGl0bGU6ICdQcm9ncmFta29kJyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnZm9ybWF0QmxvY2snLCAnPFBSRT4nKVxyXG4gIH0sXHJcbiAgbGluZToge1xyXG4gICAgaWNvbjogJyYjODIxMzsnLFxyXG4gICAgdGl0bGU6ICdWw6VncsOkdCBsaW5qZScsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2luc2VydEhvcml6b250YWxSdWxlJylcclxuICB9LFxyXG4gIGxpbms6IHtcclxuICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWxpbmtcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+JyxcclxuICAgIHRpdGxlOiAnSW5mb2dhIGzDpG5rJyxcclxuICAgIHJlc3VsdDogKCkgPT4ge1xyXG4gICAgICBjb25zdCB1cmwgPSB3aW5kb3cucHJvbXB0KCdBbmdlIGzDpG5rZW5zIFVSTCcpXHJcbiAgICAgIGlmICh1cmwpIGV4ZWMoJ2NyZWF0ZUxpbmsnLCB1cmwpXHJcbiAgICB9XHJcbiAgfSxcclxuICBpbWFnZToge1xyXG4gICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtcGljdHVyZS1vXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPicsXHJcbiAgICB0aXRsZTogJ0luZm9nYSBiaWxkJyxcclxuICAgIHByb21wdE1zZzogJ0FuZ2UgYmlsZGVucyBVUkwnLFxyXG4gICAgcmVzdWx0IChldiwgY29tcG9uZW50KSB7XHJcbiAgICAgIGNvbnN0IHVybCA9IHdpbmRvdy5wcm9tcHQodGhpcy5wcm9tcHRNc2cpO1xyXG4gICAgICBpZiAodXJsKSB7XHJcbiAgICAgICAgLy9leGVjKCdpbnNlcnRJbWFnZScsIHVybCk7XHJcbiAgICAgICAgY29uc3QgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICAgICAgICBpbWcuc3JjID0gdXJsO1xyXG4gICAgICAgIGltZy50YWJJbmRleCA9IDE7XHJcbiAgICAgICAgaW5zZXJ0RWxlbWVudChpbWcpO1xyXG4gICAgICAgIGltZy5vbmZvY3VzID0gY29tcG9uZW50Lm9uRm9jdXM7XHJcbiAgICAgICAgaW1nLm9uYmx1ciA9IGNvbXBvbmVudC5vbkJsdXI7XHJcbiAgICAgICAgY29tcG9uZW50LnByb3BzLm9uQ2hhbmdlKGNvbXBvbmVudC5jb250ZW50RGl2LmlubmVySFRNTCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGluc2VydEVsZW1lbnQoZWxlbWVudDogSFRNTEVsZW1lbnQpIHtcclxuICAgIHZhciBzZWwsIHJhbmdlO1xyXG4gICAgaWYgKHdpbmRvdy5nZXRTZWxlY3Rpb24gJiYgKHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKSkucmFuZ2VDb3VudCkge1xyXG4gICAgICAgIHJhbmdlID0gc2VsLmdldFJhbmdlQXQoMCk7XHJcbiAgICAgICAgcmFuZ2UuY29sbGFwc2UodHJ1ZSk7XHJcbiAgICAgICAgcmFuZ2UuaW5zZXJ0Tm9kZShlbGVtZW50KTtcclxuICAgICAgICAvLyBNb3ZlIHRoZSBjYXJldCBpbW1lZGlhdGVseSBhZnRlciB0aGUgaW5zZXJ0ZWQgc3BhblxyXG4gICAgICAgIHJhbmdlLnNldFN0YXJ0QWZ0ZXIoZWxlbWVudCk7XHJcbiAgICAgICAgcmFuZ2UuY29sbGFwc2UodHJ1ZSk7XHJcbiAgICAgICAgc2VsLnJlbW92ZUFsbFJhbmdlcygpO1xyXG4gICAgICAgIHNlbC5hZGRSYW5nZShyYW5nZSk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IGV4ZWMgZnJvbSAnLi9leGVjJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBib2xkOiB7XHJcbiAgICBpY29uOiAnPGI+QjwvYj4nLFxyXG4gICAgdGl0bGU6ICdCb2xkJyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnYm9sZCcpXHJcbiAgfSxcclxuICBpdGFsaWM6IHtcclxuICAgIGljb246ICc8aT5JPC9pPicsXHJcbiAgICB0aXRsZTogJ0l0YWxpYycsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2l0YWxpYycpXHJcbiAgfSxcclxuICB1bmRlcmxpbmU6IHtcclxuICAgIGljb246ICc8dT5VPC91PicsXHJcbiAgICB0aXRsZTogJ1VuZGVybGluZScsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ3VuZGVybGluZScpXHJcbiAgfSxcclxuICBzdHJpa2V0aHJvdWdoOiB7XHJcbiAgICBpY29uOiAnPHN0cmlrZT5TPC9zdHJpa2U+JyxcclxuICAgIHRpdGxlOiAnU3RyaWtlLXRocm91Z2gnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdzdHJpa2VUaHJvdWdoJylcclxuICB9LFxyXG4gIGhlYWRpbmcxOiB7XHJcbiAgICBpY29uOiAnPGI+SDxzdWI+MTwvc3ViPjwvYj4nLFxyXG4gICAgdGl0bGU6ICdIZWFkaW5nIDEnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdmb3JtYXRCbG9jaycsICc8SDE+JylcclxuICB9LFxyXG4gIGhlYWRpbmcyOiB7XHJcbiAgICBpY29uOiAnPGI+SDxzdWI+Mjwvc3ViPjwvYj4nLFxyXG4gICAgdGl0bGU6ICdIZWFkaW5nIDInLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdmb3JtYXRCbG9jaycsICc8SDI+JylcclxuICB9LFxyXG4gIGhlYWRpbmczOiB7XHJcbiAgICBpY29uOiAnPGI+SDxzdWI+Mzwvc3ViPjwvYj4nLFxyXG4gICAgdGl0bGU6ICdIZWFkaW5nIDMnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdmb3JtYXRCbG9jaycsICc8SDM+JylcclxuICB9LFxyXG4gIHBhcmFncmFwaDoge1xyXG4gICAgaWNvbjogJyYjMTgyOycsXHJcbiAgICB0aXRsZTogJ1BhcmFncmFwaCcsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2Zvcm1hdEJsb2NrJywgJzxQPicpXHJcbiAgfSxcclxuICBxdW90ZToge1xyXG4gICAgaWNvbjogJyYjODIyMDsgJiM4MjIxOycsXHJcbiAgICB0aXRsZTogJ1F1b3RlJyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnZm9ybWF0QmxvY2snLCAnPEJMT0NLUVVPVEU+JylcclxuICB9LFxyXG4gIG9saXN0OiB7XHJcbiAgICBpY29uOiAnJiMzNTsnLFxyXG4gICAgdGl0bGU6ICdPcmRlcmVkIExpc3QnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdpbnNlcnRPcmRlcmVkTGlzdCcpXHJcbiAgfSxcclxuICB1bGlzdDoge1xyXG4gICAgaWNvbjogJyYjODIyNjsnLFxyXG4gICAgdGl0bGU6ICdVbm9yZGVyZWQgTGlzdCcsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2luc2VydFVub3JkZXJlZExpc3QnKVxyXG4gIH0sXHJcbiAgY29kZToge1xyXG4gICAgaWNvbjogJyZsdDsvJmd0OycsXHJcbiAgICB0aXRsZTogJ0NvZGUnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdmb3JtYXRCbG9jaycsICc8UFJFPicpXHJcbiAgfSxcclxuICBsaW5lOiB7XHJcbiAgICBpY29uOiAnJiM4MjEzOycsXHJcbiAgICB0aXRsZTogJ0hvcml6b250YWwgTGluZScsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2luc2VydEhvcml6b250YWxSdWxlJylcclxuICB9LFxyXG4gIGxpbms6IHtcclxuICAgIGljb246ICcmIzEyODI3OTsnLFxyXG4gICAgdGl0bGU6ICdMaW5rJyxcclxuICAgIHJlc3VsdDogKCkgPT4ge1xyXG4gICAgICBjb25zdCB1cmwgPSB3aW5kb3cucHJvbXB0KCdFbnRlciB0aGUgbGluayBVUkwnKVxyXG4gICAgICBpZiAodXJsKSBleGVjKCdjcmVhdGVMaW5rJywgdXJsKVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgaW1hZ2U6IHtcclxuICAgIGljb246ICcmIzEyODI0NzsnLFxyXG4gICAgdGl0bGU6ICdJbWFnZScsXHJcbiAgICBwcm9tcHRNc2c6ICdFbnRlciB0aGUgVVJMIG9mIHRoZSBpbWFnZScsXHJcbiAgICByZXN1bHQgKCkge1xyXG4gICAgICBjb25zdCB1cmwgPSB3aW5kb3cucHJvbXB0KHRoaXMucHJvbXB0TXNnKVxyXG4gICAgICBpZiAodXJsKSBleGVjKCdpbnNlcnRJbWFnZScsIHVybClcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgKGNvbW1hbmQsIHZhbHVlID0gbnVsbCkgPT4ge1xyXG4gIGRvY3VtZW50LmV4ZWNDb21tYW5kKGNvbW1hbmQsIGZhbHNlLCB2YWx1ZSlcclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpbWFnZUVkaXRBY3Rpb25zKGNiKSB7XHJcbiAgcmV0dXJuIFt7XHJcbiAgICBuYW1lOiAnZmxvYXQtbGVmdCcsXHJcbiAgICBpY29uOiBgPGRpdiBzdHlsZT1cInBvc2l0aW9uOnJlbGF0aXZlXCI+XHJcbiAgICAgIDxpIGNsYXNzPVwiZmEgZmEtYWxpZ24tcmlnaHRcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XHJcbiAgICAgIDxkaXYgc3R5bGU9XCJwb3NpdGlvbjphYnNvbHV0ZTsgbGVmdDotNHB4O3RvcDowOyB0cmFuc2Zvcm06IHNjYWxlKDAuNSk7IHRyYW5zZm9ybS1vcmlnaW46IGxlZnQgdG9wXCI+XHJcbiAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS1waWN0dXJlLW9cIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+YCxcclxuICAgIHRpdGxlOiAnTMOldCBiaWxkZW4gZmx5dGEgdsOkbnN0ZXIgb20gdGV4dCcsXHJcbiAgICByZXN1bHQ6ICgpID0+IGNiKCdmbG9hdC1sZWZ0JylcclxuICB9LCB7XHJcbiAgICBuYW1lOiAnZmxvYXQtcmlnaHQnLFxyXG4gICAgaWNvbjogYDxkaXYgc3R5bGU9XCJwb3NpdGlvbjpyZWxhdGl2ZVwiPlxyXG4gICAgICA8aSBjbGFzcz1cImZhIGZhLWFsaWduLWxlZnRcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XHJcbiAgICAgIDxkaXYgc3R5bGU9XCJwb3NpdGlvbjphYnNvbHV0ZTsgcmlnaHQ6LTRweDt0b3A6MDsgdHJhbnNmb3JtOiBzY2FsZSgwLjUpOyB0cmFuc2Zvcm0tb3JpZ2luOiByaWdodCB0b3BcIj5cclxuICAgICAgICA8aSBjbGFzcz1cImZhIGZhLXBpY3R1cmUtb1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5gLFxyXG4gICAgdGl0bGU6ICdMw6V0IGJpbGRlbiBmbHl0YSBow7ZnZXIgb20gdGV4dCcsXHJcbiAgICByZXN1bHQ6ICgpID0+IGNiKCdmbG9hdC1yaWdodCcpXHJcbiAgfSwge1xyXG4gICAgbmFtZTogJ3VuZmxvYXQnLFxyXG4gICAgaWNvbjogYDxkaXYgc3R5bGU9XCJwb3NpdGlvbjpyZWxhdGl2ZTtcIiBhcmlhLWhpZGRlbj1cInRydWVcIj5cclxuICAgICAgPGRpdiBzdHlsZT1cInBvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MFwiPiYjODI1NDs8L2Rpdj5cclxuICAgICAgPGRpdiBzdHlsZT1cInBvc2l0aW9uOmFic29sdXRlO3RvcDowOmxlZnQ6MDt0cmFuc2Zvcm06IHNjYWxlKDAuNSk7IHRyYW5zZm9ybS1vcmlnaW46IGxlZnQgYm90dG9tXCI+XHJcbiAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS1waWN0dXJlLW9cIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IHN0eWxlPVwicG9zaXRpb246YWJzb2x1dGU7dG9wOjA7bGVmdDowXCI+XzwvZGl2PlxyXG4gICAgPC9kaXY+YCxcclxuICAgIHRpdGxlOiAnUGxhY2VyYSBiaWxkZW4gcMOlIGVnZW4gcmFkJyxcclxuICAgIHJlc3VsdDogKCkgPT4gY2IoJ3VuZmxvYXQnKVxyXG4gIH1dO1xyXG59XHJcblxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBleGVjIGZyb20gJy4vZXhlYyc7XHJcbmltcG9ydCB7d2FzaEh0bWx9IGZyb20gJy4vd2FzaC1odG1sJztcclxuaW1wb3J0IGltYWdlRWRpdEFjdGlvbnMgZnJvbSAnLi9pbWFnZS1lZGl0LWFjdGlvbnMnO1xyXG5pbXBvcnQgYWN0aW9ucyBmcm9tICcuL2FjdGlvbnMnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBBY3Rpb24ge1xyXG4gIG5hbWU/OiBzdHJpbmc7XHJcbiAgaWNvbjogc3RyaW5nO1xyXG4gIHRpdGxlOiBzdHJpbmc7XHJcbiAgcHJvbXB0TXNnPzogc3RyaW5nO1xyXG4gIHJlc3VsdDogKGV2OiBSZWFjdC5Nb3VzZUV2ZW50PEhUTUxCdXR0b25FbGVtZW50PiwgY29tcG9uZW50OiBXeXNpd3lnKSA9PiB2b2lkO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIGNsYXNzTmFtZT86IHN0cmluZztcclxuICBodG1sOiBzdHJpbmc7XHJcbiAgb25DaGFuZ2U/OiAoaHRtbDogc3RyaW5nKSA9PiB2b2lkO1xyXG4gIHJlcG9ydE51bUNoYXJzPzogKG51bUNoYXJzOiBudW1iZXIpID0+IHZvaWQ7XHJcbiAgbWF4Q2hhcnM/OiBudW1iZXI7XHJcbiAgZGVmYXVsdEFjdGlvbnM/OiB7W25hbWU6IHN0cmluZ106IEFjdGlvbn07XHJcbiAgYWN0aW9ucz86IChQYXJ0aWFsPEFjdGlvbj4gfCBzdHJpbmcpW107XHJcbiAgcmVhZE9ubHk/OiBib29sZWFuO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgU3RhdGUge1xyXG4gIGZvY3VzUmVjdDogQ2xpZW50UmVjdCB8IG51bGw7XHJcbn1cclxuXHJcbmNvbnN0IGNsYXNzZXMgPSB7XHJcbiAgYWN0aW9uYmFyOiAnd3lzaXd5Zy1hY3Rpb25iYXInLFxyXG4gIGJ1dHRvbjogJ3d5c2l3eWctYnV0dG9uJyxcclxuICBjb250ZW50OiAnd3lzaXd5Zy1jb250ZW50JyxcclxuICBmb2N1c3JlY3Q6ICd3eXNpd3lnLWZvY3VzcmVjdCcsXHJcbiAgZm9jdXNwb2ludDogJ3d5c2l3eWctZm9jdXNwb2ludCcsXHJcbiAgcmVhZG9ubHlDb250ZW50OiAnd3lzaXd5Zy1jb250ZW50IHJlYWRvbmx5J1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgV3lzaXd5ZyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcyxTdGF0ZT4ge1xyXG4gIGNvbnRlbnREaXY6IEhUTUxEaXZFbGVtZW50O1xyXG4gIGZvY3VzUmVjdERpdjogSFRNTERpdkVsZW1lbnQ7XHJcbiAgZm9jdXNFbGVtOiBIVE1MRWxlbWVudCB8IG51bGw7XHJcbiAgY29ybmVyOiBzdHJpbmc7XHJcbiAgcmVzaXplU3RhcnRYOiBudW1iZXI7XHJcblxyXG4gIGNvbnN0cnVjdG9yIChwcm9wczogUHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICAgIHRoaXMuc3RhdGUgPSB7Zm9jdXNSZWN0OiBudWxsfTtcclxuICAgIHRoaXMub25Gb2N1cyA9IHRoaXMub25Gb2N1cy5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5vbkJsdXIgPSB0aGlzLm9uQmx1ci5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5vbk1vdXNlRG93biA9IHRoaXMub25Nb3VzZURvd24uYmluZCh0aGlzKTtcclxuICAgIHRoaXMub25Nb3VzZU1vdmUgPSB0aGlzLm9uTW91c2VNb3ZlLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLm9uTW91c2VVcCA9IHRoaXMub25Nb3VzZVVwLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgIGlmICghdGhpcy5wcm9wcy5yZWFkT25seSkge1xyXG4gICAgICBBcnJheS5mcm9tKHRoaXMuY29udGVudERpdi5xdWVyeVNlbGVjdG9yQWxsKFwiaW1nLGFcIikpLm1hcChlbGVtID0+IChlbGVtIGFzIChIVE1MSW1hZ2VFbGVtZW50IHwgSFRNTEFuY2hvckVsZW1lbnQpKSlcclxuICAgICAgLmZvckVhY2goZWxlbSA9PiB7XHJcbiAgICAgICAgZWxlbS50YWJJbmRleCA9IDE7XHJcbiAgICAgICAgZWxlbS5vbmZvY3VzID0gdGhpcy5vbkZvY3VzO1xyXG4gICAgICAgIGVsZW0ub25ibHVyID0gdGhpcy5vbkJsdXIgYXMgYW55O1xyXG4gICAgICB9KTtcclxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53eXNpd3lnLWNvbnRlbnRcIikuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5vbk1vdXNlRG93bik7XHJcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud3lzaXd5Zy1jb250ZW50XCIpLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMub25Nb3VzZU1vdmUpO1xyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnd5c2l3eWctY29udGVudFwiKS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5vbk1vdXNlVXApO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMucHJvcHMucmVwb3J0TnVtQ2hhcnMpIHtcclxuICAgICAgdGhpcy5wcm9wcy5yZXBvcnROdW1DaGFycygodGhpcy5jb250ZW50RGl2ICYmIHRoaXMuY29udGVudERpdi5pbm5lclRleHQgJiYgdGhpcy5jb250ZW50RGl2LmlubmVyVGV4dC5sZW5ndGgpIHx8IDApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50RGlkVXBkYXRlKCkge1xyXG4gICAgQXJyYXkuZnJvbSh0aGlzLmNvbnRlbnREaXYucXVlcnlTZWxlY3RvckFsbChcImltZyxhXCIpKS5tYXAoZWxlbSA9PiAoZWxlbSBhcyAoSFRNTEltYWdlRWxlbWVudCB8IEhUTUxBbmNob3JFbGVtZW50KSkpXHJcbiAgICAuZm9yRWFjaChlbGVtID0+IHtcclxuICAgICAgZWxlbS50YWJJbmRleCA9IDE7XHJcbiAgICAgIGVsZW0ub25mb2N1cyA9IHRoaXMub25Gb2N1cztcclxuICAgICAgZWxlbS5vbmJsdXIgPSB0aGlzLm9uQmx1ciBhcyBhbnk7XHJcbiAgICB9KTtcclxuICAgIGlmICh0aGlzLnByb3BzLnJlcG9ydE51bUNoYXJzKSB7XHJcbiAgICAgIHRoaXMucHJvcHMucmVwb3J0TnVtQ2hhcnMoKHRoaXMuY29udGVudERpdiAmJiB0aGlzLmNvbnRlbnREaXYuaW5uZXJUZXh0ICYmIHRoaXMuY29udGVudERpdi5pbm5lclRleHQubGVuZ3RoKSB8fCAwKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53eXNpd3lnLWNvbnRlbnRcIikucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5vbk1vdXNlRG93bik7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnd5c2l3eWctY29udGVudFwiKS5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLm9uTW91c2VNb3ZlKTtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud3lzaXd5Zy1jb250ZW50XCIpLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLm9uTW91c2VVcCk7XHJcbiAgfVxyXG5cclxuICBzaG91bGRDb21wb25lbnRVcGRhdGUobmV4dFByb3BzOiBQcm9wcywgbmV4dFN0YXRlOiBTdGF0ZSkge1xyXG4gICAgLy90aGlzLmNvbnRlbnREaXYub25mb2N1cyA9IHRoaXMub25Gb2N1cztcclxuICAgIC8vdGhpcy5jb250ZW50RGl2Lm9uYmx1ciA9IHRoaXMub25CbHVyO1xyXG4gICAgcmV0dXJuICF0aGlzLmNvbnRlbnREaXYgfHxcclxuICAgICAgbmV4dFN0YXRlICE9IHRoaXMuc3RhdGUgfHxcclxuICAgICAgbmV4dFByb3BzLnJlYWRPbmx5ICE9PSB0aGlzLnByb3BzLnJlYWRPbmx5IHx8XHJcbiAgICAgIHdhc2hIdG1sKG5leHRQcm9wcy5odG1sKSAhPT0gd2FzaEh0bWwodGhpcy5jb250ZW50RGl2LmlubmVySFRNTCk7XHJcbiAgfVxyXG5cclxuICB0cmlnZ2VyT25DaGFuZ2UoaHRtbDogc3RyaW5nKSB7XHJcbiAgICB0aGlzLnByb3BzLm9uQ2hhbmdlICYmIHRoaXMucHJvcHMub25DaGFuZ2Uod2FzaEh0bWwoaHRtbCkpO1xyXG4gIH1cclxuXHJcbiAgb25Gb2N1cyhldjogRm9jdXNFdmVudCkge1xyXG4gICAgY29uc3QgZWxlbSA9IGV2LnRhcmdldCBhcyBIVE1MRWxlbWVudDtcclxuICAgIGlmICghZWxlbSB8fCAhZWxlbS50YWdOYW1lKSByZXR1cm47XHJcbiAgICBpZiAoZWxlbS50YWdOYW1lICE9PSAnSU1HJyAmJiBlbGVtLnRhZ05hbWUgIT09ICdBJykgcmV0dXJuO1xyXG4gICAgY29uc3QgY29udGVudFBhcmVudCA9IHRoaXMuY29udGVudERpdi5wYXJlbnRFbGVtZW50O1xyXG4gICAgY29uc3QgbmV3U3RhdGUgPSB7XHJcbiAgICAgIGZvY3VzUmVjdDogZ2V0UmVsYXRhdGl2ZUNsaWVudFJlY3QoY29udGVudFBhcmVudCwgZWxlbSksXHJcbiAgICB9XHJcbiAgICBzd2l0Y2ggKGVsZW0udGFnTmFtZSkge1xyXG4gICAgICBjYXNlICdBJzpcclxuICAgICAgY2FzZSAnSU1HJzpcclxuXHJcbiAgICAgIGRlZmF1bHQ6IGJyZWFrO1xyXG4gICAgfVxyXG4gICAgdGhpcy5zZXRTdGF0ZShuZXdTdGF0ZSk7XHJcbiAgICB0aGlzLmZvY3VzRWxlbSA9IGVsZW07XHJcbiAgfVxyXG5cclxuICBvbkJsdXIoZXY6IFJlYWN0LkZvY3VzRXZlbnQ8SFRNTERpdkVsZW1lbnQ+KSB7XHJcbiAgICAvKmlmIChldi5yZWxhdGVkVGFyZ2V0KSB7XHJcbiAgICAgIGNvbnN0IHJlbGF0ZWRUYXJnZXQgPSBldi5yZWxhdGVkVGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICBpZiAocmVsYXRlZFRhcmdldC5jbGFzc05hbWUgJiYgcmVsYXRlZFRhcmdldC5jbGFzc05hbWUuc3BsaXQoJyAnKS5pbmRleE9mKGNsYXNzZXMuYnV0dG9uKSA+PSAwKSB7XHJcbiAgICAgICAgLy8gQSBpbWFnZSBhY3Rpb24gYnV0dG9uIHdhcyBwcmVzc2VkXHJcbiAgICAgICAgc2V0XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICB9Ki9cclxuICAgIGlmICgoZXYudGFyZ2V0ID09PSB0aGlzLmZvY3VzRWxlbSAmJiBldi5yZWxhdGVkVGFyZ2V0ICE9PSB0aGlzLmZvY3VzUmVjdERpdikgfHxcclxuICAgICAgZXYudGFyZ2V0ID09PSB0aGlzLmZvY3VzUmVjdERpdilcclxuICAgIHtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7Zm9jdXNSZWN0OiBudWxsfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBtYWtlQ2xpY2thYmxlKGVsZW06IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgZWxlbS50YWJJbmRleCA9IDE7XHJcbiAgfVxyXG5cclxuICBvbk1vdXNlRG93bihldikge1xyXG4gICAgaWYgKChldi50YXJnZXQuY2xhc3NOYW1lIHx8IFwiXCIpLnNwbGl0KCcgJykuaW5kZXhPZihjbGFzc2VzLmZvY3VzcG9pbnQpID49IDApIHtcclxuICAgICAgY29uc3QgY29ybmVyID0gdGhpcy5nZXRSZWN0Q29ybmVyKGV2KTtcclxuICAgICAgdGhpcy5jb3JuZXIgPSBjb3JuZXI7XHJcbiAgICAgIHRoaXMucmVzaXplU3RhcnRYID0gZXYuY2xpZW50WDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uTW91c2VNb3ZlKGV2OiBNb3VzZUV2ZW50KSB7XHJcbiAgICBpZiAodGhpcy5jb3JuZXIgJiYgdGhpcy5zdGF0ZS5mb2N1c1JlY3QgJiYgdGhpcy5mb2N1c0VsZW0pIHtcclxuICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgLy8gVE9ETzogUsOka25hIHV0IGJhc2VyYXQgcMOlIHRoaXMuY29ybmVyIGh1ciBiaWxkZW5zIHN0b3JsZWsgYm9yZGUgw6RuZHJhcy5cclxuICAgICAgLy8gTGV0YSB1cHAgYmlsZGVuIHBlciBJRCBmcsOlbiB0aGlzLmNvbnRlbnREaXZcclxuICAgICAgLy8gU8OkdHQgRElWOmVucyBzdHlsZSBhdHRyaWJ1dCB3aWR0aCB0aWxsIG55IHdpZHRoLlxyXG4gICAgICAvLyBPbSBESVY6ZW4gcmVkYW4gaGFkZSBoZWlnaHQsIHPDpHR0IG55IGhlaWdodCBtZWQgc2FtbWEgYXNwZWN0IHJhdGlvIHNvbSBpbm5hbixcclxuICAgICAgLy8gYW5uYXJzLCBzw6R0dCBpbnRlIGhlaWdodCBhbGxzIChlbGxlciBtw7ZqbGlndHZpcyB0aWxsIGF1dG8pKVxyXG4gICAgICBjb25zdCBmb2N1c1JlY3QgPSB0aGlzLmZvY3VzUmVjdERpdi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgaWYgKGZvY3VzUmVjdC53aWR0aCA8IDMyKSByZXR1cm47XHJcbiAgICAgIC8vY29uc3QgY3VycmVudFdpZHRoID0gZm9jdXNSZWN0LndpZHRoO1xyXG4gICAgICAvL2NvbnN0IGN1cnJlbnRIZWlnaHQgPSBmb2N1c1JlY3QuaGVpZ2h0O1xyXG4gICAgICAvL2NvbnN0IGhhc0hlaWdodFN0eWxlID0gIXRoaXMuZm9jdXNFbGVtLnN0eWxlLmhlaWdodCB8fCB0aGlzLmZvY3VzRWxlbS5zdHlsZS5oZWlnaHQgPT09IFwiYXV0b1wiO1xyXG4gICAgICBjb25zdCBuZXdXaWR0aCA9IE1hdGgubWF4KDMyLCB0aGlzLmNvcm5lci5lbmRzV2l0aCgnbCcpID9cclxuICAgICAgICBmb2N1c1JlY3Qud2lkdGggKyAodGhpcy5yZXNpemVTdGFydFggLSBldi5jbGllbnRYKSA6XHJcbiAgICAgICAgLy9mb2N1c1JlY3QucmlnaHQgLSBldi5jbGllbnRYIDpcclxuICAgICAgICBmb2N1c1JlY3Qud2lkdGggLSAodGhpcy5yZXNpemVTdGFydFggLSBldi5jbGllbnRYKSk7XHJcbiAgICAgIHRoaXMucmVzaXplU3RhcnRYID0gZXYuY2xpZW50WDtcclxuICAgICAgICAvL2V2LmNsaWVudFggLSBmb2N1c1JlY3QubGVmdDtcclxuICAgICAgY29uc3QgZmFjdG9yID0gbmV3V2lkdGggLyBmb2N1c1JlY3Qud2lkdGg7XHJcbiAgICAgIGNvbnN0IG5ld0hlaWdodCA9IGZvY3VzUmVjdC5oZWlnaHQgKiBmYWN0b3I7XHJcbiAgICAgIHRoaXMuZm9jdXNFbGVtLnN0eWxlLndpZHRoID0gbmV3V2lkdGggKyBcInB4XCI7XHJcbiAgICAgIHRoaXMuZm9jdXNFbGVtLnN0eWxlLmhlaWdodCA9IG5ld0hlaWdodCArIFwicHhcIjtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgZm9jdXNSZWN0OiBnZXRSZWxhdGF0aXZlQ2xpZW50UmVjdCh0aGlzLmNvbnRlbnREaXYucGFyZW50RWxlbWVudCwgdGhpcy5mb2N1c0VsZW0pLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uTW91c2VVcChldikge1xyXG4gICAgaWYgKHRoaXMuY29ybmVyICYmIHRoaXMuc3RhdGUuZm9jdXNSZWN0ICYmIHRoaXMuZm9jdXNFbGVtKSB7XHJcbiAgICAgIHRoaXMuY29ybmVyID0gbnVsbDtcclxuICAgICAgdGhpcy50cmlnZ2VyT25DaGFuZ2UodGhpcy5jb250ZW50RGl2LmlubmVySFRNTCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRSZWN0Q29ybmVyKGV2KSB7XHJcbiAgICBmb3IgKGNvbnN0IGNsYXNzTmFtZSBvZiAoZXYudGFyZ2V0LmNsYXNzTmFtZSB8fCAnJykuc3BsaXQoJyAnKSkge1xyXG4gICAgICBzd2l0Y2ggKGNsYXNzTmFtZSkge1xyXG4gICAgICAgIGNhc2UgJ2ZwdWwnOlxyXG4gICAgICAgICAgcmV0dXJuICd1bCc7XHJcbiAgICAgICAgY2FzZSAnZnB1cic6XHJcbiAgICAgICAgICByZXR1cm4gJ2ZwdXInO1xyXG4gICAgICAgIGNhc2UgJ2ZwbHInOlxyXG4gICAgICAgICAgcmV0dXJuICdscic7XHJcbiAgICAgICAgY2FzZSAnZnBsbCc6XHJcbiAgICAgICAgICByZXR1cm4gJ2xsJztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICBleGVjSW1hZ2VFZGl0QWN0aW9uIChjbWQ6IHN0cmluZykge1xyXG4gICAgLy9jb25zb2xlLmxvZyhjbWQpO1xyXG4gICAgaWYgKCF0aGlzLmZvY3VzRWxlbSkgcmV0dXJuO1xyXG4gICAgLy9jb25zb2xlLmxvZyhcImRvaW5nIGl0XCIpO1xyXG4gICAgc3dpdGNoIChjbWQpIHtcclxuICAgICAgY2FzZSAnZmxvYXQtbGVmdCc6XHJcbiAgICAgICAgdGhpcy5mb2N1c0VsZW0uc3R5bGUuY3NzRmxvYXQgPSAnbGVmdCc7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2Zsb2F0LXJpZ2h0JzpcclxuICAgICAgICB0aGlzLmZvY3VzRWxlbS5zdHlsZS5jc3NGbG9hdCA9ICdyaWdodCc7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ3VuZmxvYXQnOlxyXG4gICAgICAgIHRoaXMuZm9jdXNFbGVtLnN0eWxlLmNzc0Zsb2F0ID0gJyc7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICB0aGlzLnRyaWdnZXJPbkNoYW5nZSh0aGlzLmNvbnRlbnREaXYuaW5uZXJIVE1MKTtcclxuICAgIHRoaXMuc2V0U3RhdGUoe2ZvY3VzUmVjdDogZ2V0UmVsYXRhdGl2ZUNsaWVudFJlY3QodGhpcy5jb250ZW50RGl2LnBhcmVudEVsZW1lbnQsIHRoaXMuZm9jdXNFbGVtKX0pO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3QgZGVmYXVsdEFjdGlvbnMgPSB0aGlzLnByb3BzLmRlZmF1bHRBY3Rpb25zIHx8IGFjdGlvbnM7XHJcbiAgICBsZXQgYWN0aW9uc1RvVXNlID0gdGhpcy5wcm9wcy5hY3Rpb25zID8gdGhpcy5wcm9wcy5hY3Rpb25zLm1hcChhY3Rpb24gPT5cclxuICAgICAgdHlwZW9mIGFjdGlvbiA9PT0gJ3N0cmluZycgP1xyXG4gICAgICAgIGRlZmF1bHRBY3Rpb25zW2FjdGlvbl0gOlxyXG4gICAgICAgIGRlZmF1bHRBY3Rpb25zW2FjdGlvbi5uYW1lXSA/XHJcbiAgICAgICAgICB7IC4uLmRlZmF1bHRBY3Rpb25zW2FjdGlvbi5uYW1lXSwgLi4uYWN0aW9uIH0gOlxyXG4gICAgICAgICAgYWN0aW9uKVxyXG4gICAgOiBPYmplY3Qua2V5cyhkZWZhdWx0QWN0aW9ucykubWFwKGFjdGlvbiA9PiBkZWZhdWx0QWN0aW9uc1thY3Rpb25dKTtcclxuXHJcbiAgICBpZiAodGhpcy5zdGF0ZS5mb2N1c1JlY3QpIHtcclxuICAgICAgYWN0aW9uc1RvVXNlID0gYWN0aW9uc1RvVXNlLmNvbmNhdChpbWFnZUVkaXRBY3Rpb25zKGNtZCA9PiB0aGlzLmV4ZWNJbWFnZUVkaXRBY3Rpb24oY21kKSkpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHtmb2N1c1JlY3R9ID0gdGhpcy5zdGF0ZTtcclxuICAgIGNvbnN0IHtyZWFkT25seSwgcmVwb3J0TnVtQ2hhcnMsIG1heENoYXJzfSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPXt0aGlzLnByb3BzLmNsYXNzTmFtZX0+XHJcbiAgICAgIHshcmVhZE9ubHkgJiYgPGRpdiBjbGFzc05hbWU9e2NsYXNzZXMuYWN0aW9uYmFyfT5cclxuICAgICAgICB7YWN0aW9uc1RvVXNlLm1hcCgoYWN0aW9uLCBpZHgpID0+XHJcbiAgICAgICAgICA8YnV0dG9uIGtleT17aWR4fSBjbGFzc05hbWU9e2NsYXNzZXMuYnV0dG9ufVxyXG4gICAgICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTD17e19faHRtbDogYWN0aW9uLmljb259fVxyXG4gICAgICAgICAgICB0aXRsZT17YWN0aW9uLnRpdGxlfVxyXG4gICAgICAgICAgICBvbk1vdXNlRG93bj17ZXY9PnthY3Rpb24ucmVzdWx0KGV2LCB0aGlzKX19XHJcbiAgICAgICAgICAgIG9uTW91c2VVcD17ZXY9PnNldFRpbWVvdXQoKCk9PnRoaXMuY29udGVudERpdi5mb2N1cygpLCAxMCl9XHJcbiAgICAgICAgICAvPil9XHJcbiAgICAgIDwvZGl2Pn1cclxuICAgICAgPGRpdiBjbGFzc05hbWU9e3JlYWRPbmx5ID8gY2xhc3Nlcy5yZWFkb25seUNvbnRlbnQgOiBjbGFzc2VzLmNvbnRlbnR9IHN0eWxlPXt7cG9zaXRpb246ICdyZWxhdGl2ZScsIHRvcDogMCwgbGVmdDogMH19PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZWRpdG9yXCJcclxuICAgICAgICAgIHJlZj17ZGl2ID0+IHRoaXMuY29udGVudERpdiA9IGRpdn1cclxuICAgICAgICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXt7X19odG1sOiB3YXNoSHRtbCh0aGlzLnByb3BzLmh0bWwpfX1cclxuICAgICAgICAgIGNvbnRlbnRFZGl0YWJsZT17IXJlYWRPbmx5fVxyXG4gICAgICAgICAgb25QYXN0ZT17ZXYgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWlzTmFOKG1heENoYXJzKSkge1xyXG4gICAgICAgICAgICAgIGNvbnN0IHt0YXJnZXQsIGN1cnJlbnRUYXJnZXR9ID0gZXY7XHJcbiAgICAgICAgICAgICAgLy9jb25zdCB0ZXh0QmVpbmdPdmVyd3JpdHRlbiA9ICh0YXJnZXQgYXMgYW55KS5pbm5lclRleHQgfHwgXCJcIjtcclxuICAgICAgICAgICAgICBjb25zdCBlZGl0b3JUZXh0ID0gKGN1cnJlbnRUYXJnZXQgJiYgY3VycmVudFRhcmdldC5pbm5lclRleHQpIHx8IFwiXCI7XHJcbiAgICAgICAgICAgICAgY29uc3QgdGV4dEJlaW5nUGFzdGVkID0gZXYuY2xpcGJvYXJkRGF0YS5nZXREYXRhKFwidGV4dC9wbGFpblwiKSB8fCBcIlwiO1xyXG4gICAgICAgICAgICAgIGlmIChlZGl0b3JUZXh0Lmxlbmd0aCArIHRleHRCZWluZ1Bhc3RlZC5sZW5ndGggPiBtYXhDaGFycykge1xyXG4gICAgICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH19XHJcbiAgICAgICAgICBvbktleVVwPXtyZXBvcnROdW1DaGFycyA/IGV2ID0+IHtcclxuICAgICAgICAgICAgY29uc3Qge2lubmVyVGV4dH0gPSAoZXYudGFyZ2V0IGFzIGFueSk7XHJcbiAgICAgICAgICAgIHJlcG9ydE51bUNoYXJzKGlubmVyVGV4dCA/IGlubmVyVGV4dC5sZW5ndGggOiAwKTtcclxuICAgICAgICAgIH0gOiBudWxsfVxyXG4gICAgICAgICAgb25LZXlQcmVzcz17IWlzTmFOKG1heENoYXJzKSA/IGV2ID0+IHtcclxuICAgICAgICAgICAgY29uc3Qge2lubmVyVGV4dH0gPSAoZXYudGFyZ2V0IGFzIGFueSk7XHJcbiAgICAgICAgICAgIGlmIChpbm5lclRleHQgJiYgaW5uZXJUZXh0Lmxlbmd0aCA+PSBtYXhDaGFycykge1xyXG4gICAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gOiBudWxsfVxyXG4gICAgICAgICAgb25JbnB1dD17ZXYgPT4gdGhpcy50cmlnZ2VyT25DaGFuZ2UoKGV2LnRhcmdldCBhcyBhbnkpLmlubmVySFRNTCl9XHJcbiAgICAgICAgICBvbktleURvd249e2V2ID0+IHtcclxuICAgICAgICAgICAgaWYgKHJlYWRPbmx5KSByZXR1cm47XHJcbiAgICAgICAgICAgIGlmIChyZXBvcnROdW1DaGFycyAmJiBldi5jdXJyZW50VGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgcmVwb3J0TnVtQ2hhcnMoKGV2LmN1cnJlbnRUYXJnZXQuaW5uZXJUZXh0IHx8IFwiXCIpLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJLZXk6IFwiICsgZXYud2hpY2gpO1xyXG4gICAgICAgICAgICBpZiAoZXYud2hpY2ggPj0gMzUgJiYgZXYud2hpY2ggPD0gNDApIHsvLyBob21lL2VuZC91cC9kb3duL2xlZnQvcmlnaHRcclxuICAgICAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTsgLy8gUHJldmVudCBlbnRpcmUgcGFnZSBmcm9tIHNjcm9sbGluZz8/XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGV2LndoaWNoID09PSA5KSB7XHJcbiAgICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTsvLyBUQUJcclxuICAgICAgICAgICAgICBpZiAoZXYuc2hpZnRLZXkpIHtcclxuICAgICAgICAgICAgICAgIGV4ZWMoXCJvdXRkZW50XCIpO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBleGVjKFwiaW5kZW50XCIpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgIChldi5rZXlDb2RlID09PSA4IHx8IGV2LmtleUNvZGUgPT09IDQ2KSAmJiAvLyBEZWxldGUgb3IgQmFjayBidXR0b25zXHJcbiAgICAgICAgICAgICAgdGhpcy5mb2N1c0VsZW0gJiYgdGhpcy5zdGF0ZS5mb2N1c1JlY3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBpZiAodGhpcy5mb2N1c0VsZW0gJiYgdGhpcy5mb2N1c0VsZW0ucGFyZW50RWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mb2N1c0VsZW0ucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLmZvY3VzRWxlbSk7IC8vIFJlbW92ZSBtYXJrZWQgaW1hZ2VcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgdGhpcy5mb2N1c0VsZW0gPSBudWxsO1xyXG4gICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2ZvY3VzUmVjdDogbnVsbH0pO1xyXG4gICAgICAgICAgICAgIHRoaXMudHJpZ2dlck9uQ2hhbmdlKHRoaXMuY29udGVudERpdi5pbm5lckhUTUwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9fVxyXG4gICAgICAgIC8+XHJcbiAgICAgICAge2ZvY3VzUmVjdCAmJiA8ZGl2XHJcbiAgICAgICAgICByZWY9e2RpdiA9PiB0aGlzLmZvY3VzUmVjdERpdiA9IGRpdn1cclxuICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3Nlcy5mb2N1c3JlY3R9XHJcbiAgICAgICAgICBvbkJsdXI9e3RoaXMub25CbHVyfVxyXG4gICAgICAgICAgdGFiSW5kZXg9ezF9XHJcbiAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICBvdXRsaW5lOiAwLFxyXG4gICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcclxuICAgICAgICAgICAgdG9wOiB0aGlzLnN0YXRlLmZvY3VzUmVjdC50b3AsXHJcbiAgICAgICAgICAgIGxlZnQ6IHRoaXMuc3RhdGUuZm9jdXNSZWN0LmxlZnQsXHJcbiAgICAgICAgICAgIHdpZHRoOiB0aGlzLnN0YXRlLmZvY3VzUmVjdC53aWR0aCxcclxuICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLnN0YXRlLmZvY3VzUmVjdC5oZWlnaHR9fT5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc2VzLmZvY3VzcG9pbnQgKyBcIiBmcHVsXCJ9IHN0eWxlPXt7cG9zaXRpb246J2Fic29sdXRlJywgdG9wOjAsIGxlZnQ6MH19IC8+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3Nlcy5mb2N1c3BvaW50ICsgXCIgZnB1clwifSBzdHlsZT17e3Bvc2l0aW9uOidhYnNvbHV0ZScsIHRvcDowLCByaWdodDowfX0gLz5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc2VzLmZvY3VzcG9pbnQgKyBcIiBmcGxyXCJ9IHN0eWxlPXt7cG9zaXRpb246J2Fic29sdXRlJywgYm90dG9tOjAsIHJpZ2h0OjB9fSAvPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzZXMuZm9jdXNwb2ludCArIFwiIGZwbGxcIn0gc3R5bGU9e3twb3NpdGlvbjonYWJzb2x1dGUnLCBib3R0b206MCwgbGVmdDowfX0gLz5cclxuICAgICAgICA8L2Rpdj59XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRSZWxhdGF0aXZlQ2xpZW50UmVjdCAocGFyZW50OiBIVE1MRWxlbWVudCwgY2hpbGQ6IEhUTUxFbGVtZW50KSA6IENsaWVudFJlY3Qge1xyXG4gIGNvbnN0IHBhcmVudFJlY3QgPSBwYXJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgY29uc3QgY2hpbGRSZWN0ID0gY2hpbGQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgcmV0dXJuIHtcclxuICAgIHRvcDogY2hpbGRSZWN0LnRvcCAtIHBhcmVudFJlY3QudG9wICsgcGFyZW50LnNjcm9sbFRvcCxcclxuICAgIGxlZnQ6IGNoaWxkUmVjdC5sZWZ0IC0gcGFyZW50UmVjdC5sZWZ0ICsgcGFyZW50LnNjcm9sbExlZnQsXHJcbiAgICBib3R0b206IGNoaWxkUmVjdC5ib3R0b20gLSBwYXJlbnRSZWN0LnRvcCArIHBhcmVudC5zY3JvbGxUb3AsXHJcbiAgICByaWdodDogY2hpbGRSZWN0LnJpZ2h0IC0gcGFyZW50UmVjdC5sZWZ0ICsgcGFyZW50LnNjcm9sbExlZnQsXHJcbiAgICB3aWR0aDogY2hpbGRSZWN0LndpZHRoLFxyXG4gICAgaGVpZ2h0OiBjaGlsZFJlY3QuaGVpZ2h0XHJcbiAgfTtcclxufVxyXG4iLCJcclxuZXhwb3J0IGZ1bmN0aW9uIHNhdmVTZWxlY3Rpb24oKSB7XHJcbiAgaWYgKHdpbmRvdy5nZXRTZWxlY3Rpb24pIHtcclxuICAgICAgdmFyIHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcclxuICAgICAgaWYgKHNlbC5nZXRSYW5nZUF0ICYmIHNlbC5yYW5nZUNvdW50KSB7XHJcbiAgICAgICAgICByZXR1cm4gc2VsLmdldFJhbmdlQXQoMCk7XHJcbiAgICAgIH1cclxuICB9IGVsc2UgaWYgKGRvY3VtZW50W1wic2VsZWN0aW9uXCJdICYmIGRvY3VtZW50W1wic2VsZWN0aW9uXCJdLmNyZWF0ZVJhbmdlKSB7XHJcbiAgICAgIHJldHVybiBkb2N1bWVudFtcInNlbGVjdGlvblwiXS5jcmVhdGVSYW5nZSgpO1xyXG4gIH1cclxuICByZXR1cm4gbnVsbDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlc3RvcmVTZWxlY3Rpb24ocmFuZ2UpIHtcclxuICBpZiAocmFuZ2UpIHtcclxuICAgICAgaWYgKHdpbmRvdy5nZXRTZWxlY3Rpb24pIHtcclxuICAgICAgICAgIHZhciBzZWwgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICBzZWwucmVtb3ZlQWxsUmFuZ2VzKCk7XHJcbiAgICAgICAgICBzZWwuYWRkUmFuZ2UocmFuZ2UpO1xyXG4gICAgICB9IGVsc2UgaWYgKGRvY3VtZW50W1wic2VsZWN0aW9uXCJdICYmIHJhbmdlLnNlbGVjdCkge1xyXG4gICAgICAgICAgcmFuZ2Uuc2VsZWN0KCk7XHJcbiAgICAgIH1cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcclxuXHJcbmNvbnN0IHBhcnNlciA9IG5ldyBET01QYXJzZXIoKTtcclxuXHJcbnR5cGUgSFRNTFBvbGljeSA9IHtbdGFnTmFtZUxvd2VyOiBzdHJpbmddOiB7W2F0dHJpYnV0ZUxvd2VyOiBzdHJpbmddOiBib29sZWFufX07XHJcblxyXG4vKiogVGFncyAvIEF0dHJpYnV0ZXMgV2hpdGVsaXN0XHJcbiAqIFxyXG4gKi9cclxuY29uc3QgSFRNTF9XQVNIX1BPTElDWTogSFRNTFBvbGljeSA9IHtcclxuICBiOiB7fSwgIC8vIGJvbGRcclxuICBpOiB7fSwgIC8vIGl0YWxpY1xyXG4gIHA6IHt9LCAgLy8gcGFyYWdyYXBoXHJcbiAgdToge30sICAvLyB1bmRlcmxpbmVcclxuICBzdHJpa2U6IHt9LCAvLyBzdHJpa2UtdGhyb3VnaFxyXG4gIHByZToge30sIC8vIHVuZm9ybWF0dGVkXHJcbiAgaDE6IHt9LCAvLyBoZWFkaW5nIDFcclxuICBoMjoge30sIC8vIGhlYWRpbmcgMlxyXG4gIGgzOiB7fSwgLy8gaGVhZGluZyAzXHJcbiAgaDQ6IHt9LCAvLyBoZWFkaW5nIDRcclxuICBoNToge30sIC8vIGhlYWRpbmcgNVxyXG4gIGltZzoge3NyYzogdHJ1ZSwgY2xhc3M6IHRydWUsIHN0eWxlOiB0cnVlLCB0YWJpbmRleDogdHJ1ZX0sIC8vIGltYWdlLiBXZSBzZXQgc3R5bGUgYW5kIHRhYmluZGV4IG91cnNlbHZlcy4gQWNjZXB0IHRoYXQuXHJcbiAgYToge2hyZWY6IHRydWUsIHRhcmdldDogdHJ1ZSwgdGFiaW5kZXg6IHRydWV9LCAvLyBsaW5rXHJcbiAgdWw6IHt9LCAvLyBVbm9yZGVyZWQgbGlzdFxyXG4gIG9sOiB7fSwgLy8gT3JkZXJlZCBsaXN0XHJcbiAgbGk6IHt9LCAvLyBsaXN0IGl0ZW1cclxuICBocjoge30sIC8vIEhvcml6b250YWwgcnVsZVxyXG4gIGJyOiB7fSwgLy8gQnJlYWsgbGluZVxyXG4gIGRpdjoge30sLy8gT2Ygc29tZSByZWFzb24sIGRpdnMgYXJlIHNvbWV0aW1lcyBpbnNlcnRlZCB3aGVuIHByZXNzaW5nIEVOVEVSIGluIHRoZSB3eXNpd3lnIGVkaXRvci5cclxuICBzcGFuOiB7fSwvLyBTcGFucyBhcmUgaGFybWxlc3MsIGp1c3QgcmVtb3ZlIHRoZWlyIHN0eWxlIGFuZCBvdGhlciBhdHRyaWJ1dGVzIGFuZCBJIGZlZWwgZ3JlYXQuXHJcbiAgLy8gdGFibGUgdGFnczpcclxuICB0YWJsZToge2JvcmRlcjogdHJ1ZX0sXHJcbiAgdGJvZHk6IHt9LFxyXG4gIHRoZWFkOiB7fSxcclxuICB0Zm9vdDoge30sXHJcbiAgdHI6IHt9LFxyXG4gIHRkOiB7aGVhZGVyczogdHJ1ZSwgY29sc3BhbjogdHJ1ZSwgcm93c3BhbjogdHJ1ZX0sXHJcbiAgdGg6IHthYmJyOiB0cnVlLCBoZWFkZXJzOiB0cnVlLCBzY29wZTogdHJ1ZSwgc29ydGVkOiB0cnVlLCBjb2xzcGFuOiB0cnVlLCByb3dzcGFuOiB0cnVlfVxyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHdhc2hIdG1sIChodG1sOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gIGNvbnN0IGRvYyA9IHBhcnNlci5wYXJzZUZyb21TdHJpbmcoaHRtbCwgXCJ0ZXh0L2h0bWxcIik7XHJcbiAgY29uc3Qge2NoaWxkTm9kZXN9ID0gZG9jLmJvZHk7XHJcbiAgbGV0IG1vZGlmaWVkID0gZmFsc2U7XHJcbiAgZm9yIChsZXQgaT0wOyBpPGNoaWxkTm9kZXMubGVuZ3RoOyArK2kpIHtcclxuICAgIGlmICh3YXNoTm9kZShjaGlsZE5vZGVzLml0ZW0oaSkpKSB7XHJcbiAgICAgIG1vZGlmaWVkID0gdHJ1ZTtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIG1vZGlmaWVkID9cclxuICAgIGRvYy5ib2R5LmlubmVySFRNTCA6XHJcbiAgICBodG1sOyAvLyBCeSByZXR1cm5pbmcgdGhlIG9yaWdpbmFsIEhUTUwgc3RyaW5nLCB3ZSBzcGFyZSB0aGUgdXNlciBmcm9tIHJlZnJlc2hpbmcgdGhlIGVkaXQgYXJlYSxcclxuICAgICAgICAgIC8vIHdoaWNoIHdvdWxkIG90aGVyd2lzZSBwdXQgdGhlIGN1cnNvciBhdCB0aGUgdG9wLCBsb3NpbmcgdGhlIHBvc2l0aW9uIHdoZXJlIHVzZXIgd2hlcmUuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHdhc2hOb2RlKG5vZGU6IE5vZGUgfCBFbGVtZW50IHwgSFRNTEVsZW1lbnQpOiBib29sZWFuIHtcclxuICBsZXQgbW9kaWZpZWQgPSBmYWxzZTtcclxuICBpZiAoaXNFbGVtZW50KG5vZGUpKSB7XHJcbiAgICBpZiAod2FzaEVsZW1lbnQobm9kZSkpIHtcclxuICAgICAgbW9kaWZpZWQgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuICBpZiAod2FzaENoaWxkTm9kZXMobm9kZSkpIHtcclxuICAgIG1vZGlmaWVkID0gdHJ1ZTtcclxuICB9XHJcbiAgcmV0dXJuIG1vZGlmaWVkO1xyXG59XHJcblxyXG5mdW5jdGlvbiB3YXNoQ2hpbGROb2Rlcyhub2RlOiBOb2RlKSB7XHJcbiAgbGV0IG1vZGlmaWVkID0gZmFsc2U7XHJcbiAgY29uc3Qge2NoaWxkTm9kZXN9ID0gbm9kZTtcclxuICBmb3IgKGxldCBpPTA7IGk8Y2hpbGROb2Rlcy5sZW5ndGg7ICsraSkge1xyXG4gICAgaWYgKHdhc2hOb2RlKGNoaWxkTm9kZXMuaXRlbShpKSkpIHtcclxuICAgICAgbW9kaWZpZWQgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gbW9kaWZpZWQ7XHJcbn0gXHJcblxyXG4vKiogUmVwbGFjZSBhbiBlbGVtZW50IHdpdGggaXRzIGNoaWxkIG5vZGVzLlxyXG4gKiBcclxuICovXHJcbmZ1bmN0aW9uIHJlbW92ZU1pZGRsZUVsZW1lbnQoZWxlbWVudDogRWxlbWVudCkge1xyXG4gIGNvbnN0IHtjaGlsZE5vZGVzfSA9IGVsZW1lbnQ7XHJcbiAgZm9yIChsZXQgaT0wOyBpPGNoaWxkTm9kZXMubGVuZ3RoOyArK2kpIHtcclxuICAgIGVsZW1lbnQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoY2hpbGROb2Rlcy5pdGVtKGkpLCBlbGVtZW50KTtcclxuICB9XHJcbiAgZWxlbWVudC5yZW1vdmUoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gd2FzaEVsZW1lbnQoZWxlbWVudDogRWxlbWVudCk6IGJvb2xlYW4ge1xyXG4gIGNvbnN0IHBvbGljeSA9IGVsZW1lbnQudGFnTmFtZSAmJiBIVE1MX1dBU0hfUE9MSUNZW2VsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpXTtcclxuICBpZiAoIXBvbGljeSkge1xyXG4gICAgY29uc29sZS53YXJuKFwiV3lzaXd5Zzogbm90IGFsbG93ZWQgdGFnXCIsIGVsZW1lbnQudGFnTmFtZSk7XHJcbiAgICB3YXNoQ2hpbGROb2RlcyhlbGVtZW50KTtcclxuICAgIHJlbW92ZU1pZGRsZUVsZW1lbnQoZWxlbWVudCk7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcbiAgbGV0IG1vZGlmaWVkID0gZmFsc2U7XHJcbiAgZm9yIChsZXQgaT0wOyBpPGVsZW1lbnQuYXR0cmlidXRlcy5sZW5ndGg7ICsraSkge1xyXG4gICAgY29uc3QgYXR0ciA9IGVsZW1lbnQuYXR0cmlidXRlcy5pdGVtKGkpO1xyXG4gICAgY29uc3QgYWxsb3dlZCA9IGF0dHIubmFtZSAmJiAhIXBvbGljeVthdHRyLm5hbWUudG9Mb3dlckNhc2UoKV07XHJcbiAgICBpZiAoIWFsbG93ZWQpIHtcclxuICAgICAgbW9kaWZpZWQgPSB0cnVlO1xyXG4gICAgICBjb25zb2xlLndhcm4oXCJXeXNpd3lnOiBub3QgYWxsb3dlZCBhdHRyaWJ1dGVcIiwgYXR0ci5uYW1lLCBcIlRhZzogXCIsIGVsZW1lbnQudGFnTmFtZSk7XHJcbiAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKGF0dHIubmFtZSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBtb2RpZmllZDtcclxufVxyXG5cclxuZnVuY3Rpb24gaXNFbGVtZW50KG5vZGU6IE5vZGUpIDogbm9kZSBpcyBFbGVtZW50IHtcclxuICByZXR1cm4gISEobm9kZSBhcyBFbGVtZW50KS50YWdOYW1lO1xyXG59XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHtGb3JtYXR0ZWRNZXNzYWdlfSBmcm9tICdyZWFjdC1pbnRsJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgbGVhcm5pbmdHb2FsPzogc3RyaW5nO1xyXG4gIG9uU2F2ZTogKGxlYXJuaW5nR29hbDogc3RyaW5nKSA9PiB2b2lkO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgU3RhdGUge1xyXG4gIGxlYXJuaW5nR29hbDogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQWRkQ3VzdG9tR29hbCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcyxTdGF0ZT4ge1xyXG4gIGNvbnN0cnVjdG9yIChwcm9wczogUHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKVxyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgbGVhcm5pbmdHb2FsOiBwcm9wcy5sZWFybmluZ0dvYWwgfHwgJydcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHtsZWFybmluZ0dvYWx9ID0gdGhpcy5zdGF0ZTtcclxuICAgIGNvbnN0IHtvblNhdmV9ID0gdGhpcy5wcm9wcztcclxuICAgIHJldHVybiA8ZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInN2LWh0bWwtcG9ydGxldCBzdi1wb3J0bGV0IHN2LXNraXAtc3BhY2VyXCI+XHJcbiAgICAgICAgICA8aDI+PEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJ3ZWVrcGxhbm5lci5hZGRMZWFybmluZ0dvYWxUaXRsZVwiIGRlZmF1bHRNZXNzYWdlPVwiTMOkZ2cgdGlsbCBlZ2V0IGzDpHJhbmRlbcOlbFwiLz48L2gyPlxyXG4gICAgICAgICAgPGhyIC8+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWxcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJ3ZWVrcGxhbm5lci5hZGRMZWFybmluZ0dvYWxcIiBkZWZhdWx0TWVzc2FnZT1cIk3DpWxcIi8+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIHRhYkluZGV4PXsxfSBzaXplPXs1MH0gYXV0b0ZvY3VzXHJcbiAgICAgICAgICAgICAgICB2YWx1ZT17bGVhcm5pbmdHb2FsfVxyXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e2UgPT4gdGhpcy5zZXRTdGF0ZSh7bGVhcm5pbmdHb2FsOiBlLnRhcmdldC52YWx1ZX0pfSAvPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3Agc3BhY2VkXCIgLz5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGJyIC8+PC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3YtaHRtbC1wb3J0bGV0IHN2LXBvcnRsZXRcIj5cclxuICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICB0YWJJbmRleD17MX1cclxuICAgICAgICAgIGNsYXNzTmFtZT1cImJ0biBidG4tbGFyZ2UgYnRuLWRlZmF1bHRcIlxyXG4gICAgICAgICAgb25DbGljaz17KCk9Pm9uU2F2ZShsZWFybmluZ0dvYWwpfT48Rm9ybWF0dGVkTWVzc2FnZSBpZD1cImNvbW1vbi5zYXZlXCIgZGVmYXVsdE1lc3NhZ2U9XCJzYXZlXCIvPjwvYnV0dG9uPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gIH1cclxufVxyXG5cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBUZXh0SW5wdXQgfSBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvZm9ybS1maWVsZC10ZXh0LWlucHV0JztcclxuaW1wb3J0IHsgVGV4dEFyZWFGb3JtRmllbGQgfSBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvZm9ybS1maWVsZC10ZXh0YXJlYSc7XHJcbmltcG9ydCB7TGFuZ3VhZ2VDb250ZXh0fSBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvTGFuZ3VhZ2VDb250ZXh0JztcclxuaW1wb3J0IHtGb3JtYXR0ZWRNZXNzYWdlfSBmcm9tICdyZWFjdC1pbnRsJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgaXNUYXNrOiBib29sZWFuXHJcbiAgb25TYXZlOiAobmFtZTogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nLCB1cmw6IHN0cmluZykgPT4gdm9pZDtcclxufVxyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgZGVzY3JpcHRpb246IHN0cmluZztcclxuICB1cmw6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEFkZEN1c3RvbVRhc2sgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsU3RhdGU+IHtcclxuICBzdGF0aWMgY29udGV4dFR5cGUgPSBMYW5ndWFnZUNvbnRleHQ7XHJcbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcylcclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIG5hbWU6ICcnLFxyXG4gICAgICBkZXNjcmlwdGlvbjogJycsXHJcbiAgICAgIHVybDogJydcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHsgbmFtZSwgZGVzY3JpcHRpb24sIHVybCB9ID0gdGhpcy5zdGF0ZTtcclxuICAgIGNvbnN0IHsgaXNUYXNrLCBvblNhdmUgfSA9IHRoaXMucHJvcHM7XHJcbiAgICBjb25zdCB7aW50bH0gPSB0aGlzLmNvbnRleHQ7XHJcbiAgICByZXR1cm4gPGRpdj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdi1odG1sLXBvcnRsZXQgc3YtcG9ydGxldCBzdi1za2lwLXNwYWNlclwiPlxyXG4gICAgICAgIDxoMj48Rm9ybWF0dGVkTWVzc2FnZSBpZD1cImN1c3RvbVRhc2suYWRkV29ya0dvYWxUaXRsZVwiIGRlZmF1bHRNZXNzYWdlPVwiTMOkZ2cgdGlsbCBlZ2V0IGFyYmV0c23DpWxcIi8+PC9oMj5cclxuICAgICAgICA8aHIgLz5cclxuICAgICAgICA8VGV4dElucHV0XHJcbiAgICAgICAgICBsYWJlbD17aW50bC5mb3JtYXRNZXNzYWdlKHtpZDonY29tbW9uLm5hbWVMYWJlbCcsIGRlZmF1bHRNZXNzYWdlOiAnTmFtbid9KX1cclxuICAgICAgICAgIGlkPVwiQWRkQ3VzdG9tVGFzazpuYW1lXCJcclxuICAgICAgICAgIHBsYWNlaG9sZGVyPXtpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOidjdXN0b21UYXNrLmVudGVyTmFtZVBsaGQnLCBkZWZhdWx0TWVzc2FnZTogJ0FuZ2UgbmFtbi4uLid9KX1cclxuICAgICAgICAgIHZhbHVlPXtuYW1lfVxyXG4gICAgICAgICAgYXV0b0ZvY3VzXHJcbiAgICAgICAgICBvbkNoYW5nZT17bmFtZSA9PiB0aGlzLnNldFN0YXRlKHtuYW1lfSl9IC8+XHJcblxyXG4gICAgICAgIDxUZXh0QXJlYUZvcm1GaWVsZFxyXG4gICAgICAgICAgcm93cz17N31cclxuICAgICAgICAgIGxhYmVsPSB7aW50bC5mb3JtYXRNZXNzYWdlKHtpZDonY29tbW9uLmRlc2NyaXB0aW9uTGFiZWwnLCBkZWZhdWx0TWVzc2FnZTonQmVza3Jpdm5pbmcnfSl9XHJcbiAgICAgICAgICBpZD1cIkFkZEN1c3RvbVRhc2s6ZGVzY3JpcHRpb25cIlxyXG4gICAgICAgICAgcGxhY2Vob2xkZXI9e2ludGwuZm9ybWF0TWVzc2FnZSh7aWQ6J2NvbW1vbi5hZGREZXNjcmlwdGlvblBsaGQnLCBkZWZhdWx0TWVzc2FnZTogXCJMw6RnZyB0aWxsIGVuIGJlc2tyaXZuaW5nLi4uXCJ9KX1cclxuICAgICAgICAgIHZhbHVlPXtkZXNjcmlwdGlvbn1cclxuICAgICAgICAgIG9uQ2hhbmdlPXtkZXNjcmlwdGlvbj0+dGhpcy5zZXRTdGF0ZSh7ZGVzY3JpcHRpb259KX0gLz5cclxuXHJcbiAgICAgICAgPFRleHRJbnB1dFxyXG4gICAgICAgICAgbGFiZWw9IHtpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOidjb21tb24ubGlua0xhYmVsJywgZGVmYXVsdE1lc3NhZ2U6J0zDpG5rJ30pfSBcclxuICAgICAgICAgIGlkPVwiQWRkQ3VzdG9tVGFzazp1cmxcIlxyXG4gICAgICAgICAgcGxhY2Vob2xkZXI9XCJodHRwOi8vd3d3Li4uXCJcclxuICAgICAgICAgIHZhbHVlPXt1cmx9XHJcbiAgICAgICAgICBvbkNoYW5nZT17dXJsID0+IHRoaXMuc2V0U3RhdGUoe3VybH0pfSAvPlxyXG5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3YtaHRtbC1wb3J0bGV0IHN2LXBvcnRsZXRcIj5cclxuICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICB0YWJJbmRleD17MX1cclxuICAgICAgICAgIGNsYXNzTmFtZT1cImJ0biBidG4tbGFyZ2UgYnRuLWRlZmF1bHRcIlxyXG4gICAgICAgICAgb25DbGljaz17KCkgPT4gb25TYXZlKG5hbWUsIGRlc2NyaXB0aW9uLCB1cmwpfT48Rm9ybWF0dGVkTWVzc2FnZSBpZD1cImNvbW1vbi5zYXZlXCIgZGVmYXVsdE1lc3NhZ2U9XCJTcGFyYVwiLz48L2J1dHRvbj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgVGV4dElucHV0IH0gZnJvbSAnLi4vdXRpbGl0eS1jb21wb25lbnRzL2Zvcm0tZmllbGQtdGV4dC1pbnB1dCc7XHJcbmltcG9ydCB7IFRleHRBcmVhRm9ybUZpZWxkIH0gZnJvbSAnLi4vdXRpbGl0eS1jb21wb25lbnRzL2Zvcm0tZmllbGQtdGV4dGFyZWEnO1xyXG5pbXBvcnQgeyBVc2VyVGFzaywgVXNlclN1YlRhc2sgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IGNyZWF0ZVVVSUQgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XHJcbmltcG9ydCB7IFVzZXJUYXNrc1JlcG8gfSBmcm9tICcuLi8uLi9yZXBvcy91c2VyLXRhc2tzLXJlcG8nO1xyXG5pbXBvcnQge0Zvcm1hdHRlZE1lc3NhZ2V9IGZyb20gJ3JlYWN0LWludGwnO1xyXG5pbXBvcnQge0xhbmd1YWdlQ29udGV4dH0gZnJvbSAnLi4vdXRpbGl0eS1jb21wb25lbnRzL0xhbmd1YWdlQ29udGV4dCc7XHJcblxyXG50eXBlIFByb3BzID0ge1xyXG4gIC8vIEVkaXQgTW9kZVxyXG4gIG1vZGU6ICdhZGQnO1xyXG4gIHVzZXJUYXNrOiBVc2VyVGFzaztcclxuICBjbG9zZURpYWxvZztcclxuICB1c2VyVGFza3NSZXBvOiBVc2VyVGFza3NSZXBvXHJcbn0gfCB7XHJcbiAgbW9kZTogJ2VkaXQnO1xyXG4gIHVzZXJUYXNrOiBVc2VyVGFzaztcclxuICBzdWJUYXNrOiBVc2VyU3ViVGFzaztcclxuICBjbG9zZURpYWxvZzogKCk9PnZvaWQ7XHJcbiAgdXNlclRhc2tzUmVwbzogVXNlclRhc2tzUmVwb1xyXG59XHJcblxyXG5pbnRlcmZhY2UgU3RhdGUge1xyXG4gIG5hbWU6IHN0cmluZztcclxuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xyXG4gIHVybDogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQWRkT3JFZGl0U3ViVGFzayBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcyxTdGF0ZT4ge1xyXG4gIHN0YXRpYyBjb250ZXh0VHlwZSA9IExhbmd1YWdlQ29udGV4dDtcclxuICBjb25zdHJ1Y3RvciAocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICBpZiAocHJvcHMubW9kZSA9PT0gJ2VkaXQnKSB7XHJcbiAgICAgIGNvbnN0IHtzdWJUYXNrfSA9IHByb3BzO1xyXG4gICAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICAgIG5hbWU6IHN1YlRhc2submFtZSB8fCAnJyxcclxuICAgICAgICBkZXNjcmlwdGlvbjogc3ViVGFzay5kZXNjcmlwdGlvbiB8fCAnJyxcclxuICAgICAgICB1cmw6IHN1YlRhc2sudXJsIHx8ICcnXHJcbiAgICAgIH07XHJcbiAgICB9IGVsc2UgeyAgXHJcbiAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgbmFtZTogJycsXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICcnLFxyXG4gICAgICAgIHVybDogJydcclxuICAgICAgfTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNhdmUoKSB7XHJcbiAgICAvLyBVcGRhdGUgcmVwbzpcclxuICAgIGNvbnN0IHtwcm9wc30gPSB0aGlzO1xyXG4gICAgY29uc3Qge3VzZXJUYXNrLCBjbG9zZURpYWxvZywgdXNlclRhc2tzUmVwb30gPSBwcm9wcztcclxuICAgIGNvbnN0IHtuYW1lLCBkZXNjcmlwdGlvbiwgdXJsfSA9IHRoaXMuc3RhdGU7XHJcbiAgICBpZiAocHJvcHMubW9kZSA9PT0gJ2VkaXQnKSB7XHJcbiAgICAgIC8vIEVkaXQgZXhpc3Rpbmc6XHJcbiAgICAgIHVzZXJUYXNrc1JlcG8udXBkYXRlKFt1c2VyVGFza10sIHV0ID0+IHtcclxuICAgICAgICBjb25zdCB7c3ViVGFza3N9ID0gdXQ7XHJcbiAgICAgICAgaWYgKHN1YlRhc2tzKSB7XHJcbiAgICAgICAgICB1dC5zdWJUYXNrcyA9IHN1YlRhc2tzLm1hcChzdCA9PlxyXG4gICAgICAgICAgICBzdC5pZCA9PT0gcHJvcHMuc3ViVGFzay5pZCA/IHsuLi5zdCwgbmFtZSwgZGVzY3JpcHRpb24sIHVybH0gOlxyXG4gICAgICAgICAgICB7Li4uc3R9XHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBDcmVhdGUgbmV3IHRhc2tcclxuICAgICAgY29uc3QgbmV3U3ViVGFzayA9IHtcclxuICAgICAgICBpZDogY3JlYXRlVVVJRCgpLFxyXG4gICAgICAgIG5hbWUsXHJcbiAgICAgICAgZGVzY3JpcHRpb24sXHJcbiAgICAgICAgdXJsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyBVcGRhdGUgcmVwbzpcclxuICAgICAgdXNlclRhc2tzUmVwby51cGRhdGUoW3VzZXJUYXNrXSwgdXQgPT4ge1xyXG4gICAgICAgIGlmICghdXQuc3ViVGFza3MpIHtcclxuICAgICAgICAgIHV0LnN1YlRhc2tzID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHV0LnN1YlRhc2tzID0gdXQuc3ViVGFza3MuY29uY2F0KG5ld1N1YlRhc2spO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDbG9zZSBkaWFsb2dcclxuICAgIGNsb3NlRGlhbG9nKCk7ICAgIFxyXG4gIH1cclxuXHJcbiAgZGVsZXRlKCkge1xyXG4gICAgLy8gVXBkYXRlIHJlcG86XHJcbiAgICBjb25zdCBwcm9wcyA9IHRoaXMucHJvcHM7ICBcclxuICAgIGlmIChwcm9wcy5tb2RlICE9PSAnZWRpdCcpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FuIG9ubHkgZGVsZXRlIGluIGVkaXQgbW9kZVwiKTtcclxuICAgIH1cclxuICAgIHByb3BzLnVzZXJUYXNrc1JlcG8udXBkYXRlKFtwcm9wcy51c2VyVGFza10sIHV0ID0+IHtcclxuICAgICAgaWYgKHV0LnN1YlRhc2tzKSB7XHJcbiAgICAgICAgdXQuc3ViVGFza3MgPSB1dC5zdWJUYXNrcy5maWx0ZXIodCA9PiB0LmlkICE9PSBwcm9wcy5zdWJUYXNrLmlkKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gQ2xvc2UgZGlhbG9nOlxyXG4gICAgcHJvcHMuY2xvc2VEaWFsb2coKTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHtuYW1lLCBkZXNjcmlwdGlvbiwgdXJsfSA9IHRoaXMuc3RhdGU7XHJcbiAgICBjb25zdCB7cHJvcHN9ID0gdGhpcztcclxuICAgIGNvbnN0IGlzRWRpdE1vZGUgPSBwcm9wcy5tb2RlID09PSAnZWRpdCc7XHJcbiAgICBjb25zdCB7aW50bH0gPSB0aGlzLmNvbnRleHQ7XHJcbiAgICByZXR1cm4gPD5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdi1odG1sLXBvcnRsZXQgc3YtcG9ydGxldCBzdi1za2lwLXNwYWNlclwiPlxyXG4gICAgICAgIDxoMj57aXNFZGl0TW9kZSA/IDxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwiYWRkZWRpdHN1YnRhc2suZWRpdFN1YnRhc2tcIiBkZWZhdWx0TWVzc2FnZT0nUmVkaWdlcmEgdW5kZXJ1cHBnaWZ0Jy8+IDogPEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJhZGRlZGl0c3VidGFzay5hZGRTdWJ0YXNrXCIgZGVmYXVsdE1lc3NhZ2U9J0zDpGdnIHRpbGwgdW5kZXJ1cHBnaWZ0Jy8+IH08L2gyPlxyXG4gICAgICAgIDxociAvPlxyXG4gICAgICAgIDxUZXh0SW5wdXRcclxuICAgICAgICAgIGF1dG9Gb2N1c1xyXG4gICAgICAgICAgbGFiZWw9IHtpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOidhZGRlZGl0c3VidGFzay5uYW1lTGFiZWwnLCBkZWZhdWx0TWVzc2FnZTonVW5kZXJ1cHBnaWZ0ZW5zIG5hbW4nfSl9XHJcbiAgICAgICAgICBpZD1cIkFkZFVzZXJTdWJUYXNrOm5hbWVcIlxyXG4gICAgICAgICAgcGxhY2Vob2xkZXI9XCJcIlxyXG4gICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUubmFtZX1cclxuICAgICAgICAgIG9uQ2hhbmdlPXtuYW1lID0+IHRoaXMuc2V0U3RhdGUoe25hbWV9KX1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICA8VGV4dEFyZWFGb3JtRmllbGRcclxuICAgICAgICAgIGxhYmVsPSB7aW50bC5mb3JtYXRNZXNzYWdlKHtpZDonY29tbW9uLmRlc2NyaXB0aW9uTGFiZWwnLCBkZWZhdWx0TWVzc2FnZTonQmVza3Jpdm5pbmcnfSl9XHJcbiAgICAgICAgICBpZD1cIkFkZFVzZXJTdWJUYXNrOmRlc2NyaXB0aW9uXCJcclxuICAgICAgICAgIHJvd3M9ezd9XHJcbiAgICAgICAgICBwbGFjZWhvbGRlcj1cIlwiXHJcbiAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5kZXNjcmlwdGlvbn1cclxuICAgICAgICAgIG9uQ2hhbmdlPXtkZXNjcmlwdGlvbiA9PiB0aGlzLnNldFN0YXRlKHtkZXNjcmlwdGlvbn0pfVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgIDxUZXh0SW5wdXRcclxuICAgICAgICAgIGxhYmVsPSB7aW50bC5mb3JtYXRNZXNzYWdlKHtpZDonY29tbW9uLmxpbmtMYWJlbCcsIGRlZmF1bHRNZXNzYWdlOidMw6Ruayd9KX1cclxuICAgICAgICAgIGlkPVwiQWRkVXNlclN1YlRhc2s6dXJsXCJcclxuICAgICAgICAgIHBsYWNlaG9sZGVyPVwiXCJcclxuICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLnVybH1cclxuICAgICAgICAgIG9uQ2hhbmdlPXt1cmwgPT4gdGhpcy5zZXRTdGF0ZSh7dXJsfSl9XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgPGJyIC8+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInN2LWh0bWwtcG9ydGxldCBzdi1wb3J0bGV0XCI+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgcHJvcHMubW9kZSA9PT0gJ2VkaXQnICYmIDxidXR0b24gY2xhc3NOYW1lPVwiYnRuIGJ0bi13YXJuaW5nIGJ0bi1sYXJnZSBwdWxsLXJpZ2h0XCJcclxuICAgICAgICAgIG9uQ2xpY2s9e2V2ID0+IHRoaXMuZGVsZXRlKCl9PlxyXG4gICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJhZGRlZGl0c3VidGFzay5kZWxldGVTdWJ0YXNrXCIgZGVmYXVsdE1lc3NhZ2U9XCJUYSBib3J0IHVuZGVydXBwZ2lmdFwiLz48L2J1dHRvbj59XHJcbiAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgdGFiSW5kZXg9ezF9XHJcbiAgICAgICAgICBjbGFzc05hbWU9XCJidG4gYnRuLWxhcmdlIGJ0bi1kZWZhdWx0XCJcclxuICAgICAgICAgIG9uQ2xpY2s9eygpPT50aGlzLnNhdmUoKX0+PEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJjb21tb24uc2F2ZVwiIGRlZmF1bHRNZXNzYWdlPVwiU3BhcmFcIi8+PC9idXR0b24+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC8+XHJcbiAgfVxyXG59XHJcblxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IFVzZXJUYXNrLCBVc2VyU3ViVGFzayB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgUmVuYW1lYWJsZVRleHQgfSBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvcmVuYW1lYWJsZS10ZXh0JztcclxuaW1wb3J0IHsgTCB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgZ2V0VGFza1R5cGUgfSBmcm9tICcuL2dldC10YXNrLXR5cGUnO1xyXG5pbXBvcnQgUmVhY3REYXRlUGlja2VyLCB7IFJlYWN0RGF0ZVBpY2tlclByb3BzIH0gZnJvbSAncmVhY3QtZGF0ZXBpY2tlcic7XHJcbmltcG9ydCAnLi4vLi4vZ2xvYmFscy9tb21lbnQtc3YtbG9jYWxlJztcclxuaW1wb3J0IHtUZXh0SW5wdXR9IGZyb20gJy4uL3V0aWxpdHktY29tcG9uZW50cy9mb3JtLWZpZWxkLXRleHQtaW5wdXQnO1xyXG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcbmltcG9ydCB7IEZvcm1GaWVsZCB9IGZyb20gJy4uL3V0aWxpdHktY29tcG9uZW50cy9mb3JtLWZpZWxkJztcclxuaW1wb3J0IHsgQWRkT3JFZGl0U3ViVGFzayB9IGZyb20gJy4vYWRkLW9yLWVkaXQtc3ViLXRhc2snO1xyXG5pbXBvcnQgeyBjcmVhdGVVVUlEIH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnQnO1xyXG5pbXBvcnQgdXBkYXRlIGZyb20gJ3JlYWN0LWFkZG9ucy11cGRhdGUnO1xyXG5pbXBvcnQgeyBVc2VyVGFza3NSZXBvIH0gZnJvbSAnLi4vLi4vcmVwb3MvdXNlci10YXNrcy1yZXBvJztcclxuaW1wb3J0IHsgVGV4dEFyZWFGb3JtRmllbGQgfSBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvZm9ybS1maWVsZC10ZXh0YXJlYSc7XHJcbmltcG9ydCB7IEZvcm1hdHRlZE1lc3NhZ2UgfSBmcm9tICdyZWFjdC1pbnRsJztcclxuaW1wb3J0IHtMYW5ndWFnZUNvbnRleHR9IGZyb20gXCIuLi91dGlsaXR5LWNvbXBvbmVudHMvTGFuZ3VhZ2VDb250ZXh0XCJcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgdXNlclRhc2s6IFVzZXJUYXNrO1xyXG4gIG9uVXBkYXRlOiAodXBkYXRlcjogKHVzZXJUYXNrOiBVc2VyVGFzaykgPT4gdm9pZCkgPT4gdm9pZDtcclxuICBvbkRlbGV0ZTogKHVzZXJUYXNrSWQ6IHN0cmluZykgPT4gdm9pZDtcclxuICBvcGVuRGlhbG9nOiAoZGlhbG9nKSA9PiB2b2lkO1xyXG4gIGNsb3NlRGlhbG9nOiAoKT0+dm9pZDtcclxuICB1c2VyVGFza3NSZXBvOiBVc2VyVGFza3NSZXBvXHJcbn1cclxuXHJcbmludGVyZmFjZSBTdGF0ZSB7XHJcbiAgdXNlclRhc2s6IFVzZXJUYXNrO1xyXG4gIG5hbWU6IHN0cmluZztcclxuICBkZXNjcmlwdGlvbj86IHN0cmluZztcclxuICBkZWFkbGluZT86IHN0cmluZztcclxuICB1cmw6IHN0cmluZztcclxuICBzdWJUYXNrcz86IFVzZXJTdWJUYXNrW107XHJcbiAgc2hvd0NhbGVuZGFyPzogYm9vbGVhbjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEVkaXRVc2VyVGFzayBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcyxTdGF0ZT4ge1xyXG4gIGRhdGVQaWNrZXI6IGFueTtcclxuICBzdGF0aWMgY29udGV4dFR5cGUgPSBMYW5ndWFnZUNvbnRleHQ7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgdXNlclRhc2s6IHByb3BzLnVzZXJUYXNrLFxyXG4gICAgICBuYW1lOiBwcm9wcy51c2VyVGFzay5uYW1lLFxyXG4gICAgICBkZXNjcmlwdGlvbjogcHJvcHMudXNlclRhc2suZGVzY3JpcHRpb24sXHJcbiAgICAgIHVybDogcHJvcHMudXNlclRhc2sudXJsLFxyXG4gICAgICBkZWFkbGluZTogcHJvcHMudXNlclRhc2suZGVhZGxpbmUsXHJcbiAgICAgIHN1YlRhc2tzOiBwcm9wcy51c2VyVGFzay5zdWJUYXNrc1xyXG4gICAgfVxyXG4gICAgdGhpcy5vblVzZXJUYXNrc0NoYW5nZWQgPSB0aGlzLm9uVXNlclRhc2tzQ2hhbmdlZC5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICB0aGlzLnByb3BzLnVzZXJUYXNrc1JlcG8uc3Vic2NyaWJlKHRoaXMub25Vc2VyVGFza3NDaGFuZ2VkKTtcclxuICB9XHJcblxyXG4gIG9uVXNlclRhc2tzQ2hhbmdlZCh1c2VyVGFza3M6IFVzZXJUYXNrW10pIHtcclxuICAgIGNvbnN0IG15VXNlclRhc2sgPSB1c2VyVGFza3MuZmluZCh1dCA9PiB1dC5pZCA9PT0gdGhpcy5wcm9wcy51c2VyVGFzay5pZCk7XHJcbiAgICBpZiAoIW15VXNlclRhc2spIHtcclxuICAgICAgdGhpcy5wcm9wcy5jbG9zZURpYWxvZygpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgdXNlclRhc2s6IG15VXNlclRhc2ssXHJcbiAgICAgIHN1YlRhc2tzOiBteVVzZXJUYXNrLnN1YlRhc2tzXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xyXG4gICAgdGhpcy5wcm9wcy51c2VyVGFza3NSZXBvLnVuc3Vic2NyaWJlKHRoaXMub25Vc2VyVGFza3NDaGFuZ2VkKTtcclxuICB9XHJcblxyXG4gIGlzTW9kaWZpZWQoKSB7XHJcbiAgICAvLyBEb24ndCBjb3VudCBzdWJ0YXNrIGNoYW5nZXMhIFRoZXkgbGl2ZSB0aGVpciBvd24gbGlmZSBhbmQgaXMgbWFpbnRhaW5lZFxyXG4gICAgLy8gaW4gYWRkLW9yLWVkaXQtc3ViLXRhc2sudHN4LiBSZWFzb246IFVzZXIgd291bGQgZXhwZWN0IGFkZGVkIC9lZGl0ZWQgc3VidGFza3NcclxuICAgIC8vIHRvIGJlIHBlcnNpc3RlZCByaWdodCBhd2F5LiBNYXkgY2xpY2sgYXdheSB0aGlzIGRpYWxvZy5cclxuICAgIC8vIEFsc28gcmVhc29uOiBDYW4gaW52b2tlIHRoYXQgZGlhbG9nIGJ5IGl0c2VsZiBmcm9tIG90aGVyIGNvbXBvbmVudHMuIEZyb20gV2Vla1BsYW5uZXJcclxuICAgIC8vIHdoZW4gY2xpY2tpbmcgdGhlIHN1YnRhc2sgZm9yIGV4YW1wbGUhXHJcblxyXG4gICAgY29uc3Qge2RlYWRsaW5lLCBkZXNjcmlwdGlvbiwgbmFtZSwgdXJsLCB1c2VyVGFza30gPSB0aGlzLnN0YXRlO1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgZGVhZGxpbmUgIT09IHVzZXJUYXNrLmRlYWRsaW5lIHx8XHJcbiAgICAgIGRlc2NyaXB0aW9uICE9PSB1c2VyVGFzay5kZXNjcmlwdGlvbiB8fFxyXG4gICAgICBuYW1lICE9PSB1c2VyVGFzay5uYW1lIHx8XHJcbiAgICAgIHVybCAhPT0gdXNlclRhc2sudXJsKTtcclxuICB9XHJcblxyXG4gIGFkZFN1YlRhc2soKTogYW55IHtcclxuICAgIHRoaXMucHJvcHMub3BlbkRpYWxvZyg8QWRkT3JFZGl0U3ViVGFza1xyXG4gICAgICBtb2RlPVwiYWRkXCJcclxuICAgICAgdXNlclRhc2s9e3RoaXMuc3RhdGUudXNlclRhc2t9XHJcbiAgICAgIGNsb3NlRGlhbG9nPXt0aGlzLnByb3BzLmNsb3NlRGlhbG9nfVxyXG4gICAgICB1c2VyVGFza3NSZXBvPXt0aGlzLnByb3BzLnVzZXJUYXNrc1JlcG99XHJcbiAgICAvPik7XHJcbiAgfVxyXG5cclxuICBlZGl0U3ViVGFzayhzdWJUYXNrOiBVc2VyU3ViVGFzaykge1xyXG4gICAgdGhpcy5wcm9wcy5vcGVuRGlhbG9nKDxBZGRPckVkaXRTdWJUYXNrXHJcbiAgICAgIG1vZGU9XCJlZGl0XCJcclxuICAgICAgc3ViVGFzaz17c3ViVGFza31cclxuICAgICAgdXNlclRhc2s9e3RoaXMuc3RhdGUudXNlclRhc2t9XHJcbiAgICAgIGNsb3NlRGlhbG9nPXt0aGlzLnByb3BzLmNsb3NlRGlhbG9nfVxyXG4gICAgICB1c2VyVGFza3NSZXBvPXt0aGlzLnByb3BzLnVzZXJUYXNrc1JlcG99XHJcbiAgICAvPik7XHJcbiAgfVxyXG4gIFxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHsgbmFtZSwgZGVzY3JpcHRpb24sIHVybCwgZGVhZGxpbmUsIHN1YlRhc2tzLCBzaG93Q2FsZW5kYXIsIHVzZXJUYXNrIH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgY29uc3QgeyBpZCwgY291cnNlTmFtZSB9ID0gdXNlclRhc2s7XHJcbiAgICBjb25zdCB7IG9uVXBkYXRlLCBvbkRlbGV0ZSB9ID0gdGhpcy5wcm9wcztcclxuICAgIGNvbnN0IGlzTW9kaWZpZWQgPSB0aGlzLmlzTW9kaWZpZWQoKTtcclxuXHJcbiAgICBjb25zdCB0YXNrVHlwZSA9IGdldFRhc2tUeXBlKHVzZXJUYXNrKTtcclxuICAgIGNvbnN0IGlzQ3VzdG9tVGFzayA9IHRhc2tUeXBlID09PSAnY3VzdG9tVGFzayc7XHJcbiAgICBjb25zdCBleHBpcmVkID0gbW9tZW50KHVzZXJUYXNrLmRlYWRsaW5lKSA8IG1vbWVudCgpO1xyXG4gICAgY29uc3Qge2ludGx9ID0gdGhpcy5jb250ZXh0O1xyXG5cclxuICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cImVkaXRUYXNrRGlhbG9nIHN2LWh0bWwtcG9ydGxldCBzdi1wb3J0bGV0IHN2LXNraXAtc3BhY2VyXCI+XHJcbiAgICAgIDxoMj57aXNDdXN0b21UYXNrID8gXHJcbiAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJ0YXNrLmVkaXRXb3JrR29hbHNcIiBkZWZhdWx0TWVzc2FnZT0nUmVkaWdlcmEgYXJiZXRzbcOlbCcvPiA6IFxyXG4gICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwidGFzay5lZGl0VGFza1wiIGRlZmF1bHRNZXNzYWdlPSdSZWRpZ2VyYSB1cHBnaWZ0Jy8+fVxyXG4gICAgICA8L2gyPlxyXG4gICAgICA8aHIgLz5cclxuICAgICAgPFRleHRJbnB1dFxyXG4gICAgICAgIGF1dG9Gb2N1c1xyXG4gICAgICAgIGxhYmVsPXtpc0N1c3RvbVRhc2sgPyBpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOiAndGFzay50YXJnZXROYW1lTGFiZWwnLCBkZWZhdWx0TWVzc2FnZTogJ0FyYmV0c23DpWxldHMgbmFtbid9KSAgOiBpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOiAndGFzay50YXNrTmFtZUxhYmVsJywgZGVmYXVsdE1lc3NhZ2U6ICdVcHBnaWZ0ZW5zIG5hbW4nfSl9XHJcbiAgICAgICAgaWQ9XCJFZGl0VXNlclRhc2s6bmFtZVwiXHJcbiAgICAgICAgcGxhY2Vob2xkZXI9e2lzQ3VzdG9tVGFzayA/IGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6ICd0YXNrLndoYXRTaG91bGRZb3VEb1BsaGQnLCBkZWZhdWx0TWVzc2FnZTogJ1ZhZCBza2EgZHUgZ8O2cmE/J30pIDogaW50bC5mb3JtYXRNZXNzYWdlKHtpZDogJ3Rhc2suZW50ZXJUYXNrTmFtZVBsaGQnLCBkZWZhdWx0TWVzc2FnZTogJ0FuZ2UgdXBwZ2lmdGVucyBuYW1uLi4uJ30pIH1cclxuICAgICAgICB2YWx1ZT17bmFtZX1cclxuICAgICAgICBvbkNoYW5nZT17bmFtZSA9PiB0aGlzLnNldFN0YXRlKHtuYW1lfSl9IC8+XHJcbiAgICAgIFxyXG4gICAgICB7aXNDdXN0b21UYXNrICYmIDw+XHJcbiAgICAgICAgPFRleHRBcmVhRm9ybUZpZWxkXHJcbiAgICAgICAgICByb3dzPXs1fVxyXG4gICAgICAgICAgbGFiZWw9IHtpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOiAnY29tbW9uLmRlc2NyaXB0aW9uTGFiZWwnLCBkZWZhdWx0TWVzc2FnZTogJ0Jlc2tyaXZuaW5nJ30pfVxyXG4gICAgICAgICAgaWQ9XCJFZGl0VXNlclRhc2s6ZGVzY3JpcHRpb25cIlxyXG4gICAgICAgICAgcGxhY2Vob2xkZXI9e2ludGwuZm9ybWF0TWVzc2FnZSh7aWQ6ICdjb21tb24uYWRkRGVzY3JpcHRpb25QbGhkJywgZGVmYXVsdE1lc3NhZ2U6ICdMw6RnZyB0aWxsIGVuIGJlc2tyaXZuaW5nLi4uJ30pfVxyXG4gICAgICAgICAgdmFsdWU9e2Rlc2NyaXB0aW9ufVxyXG4gICAgICAgICAgb25DaGFuZ2U9e2Rlc2NyaXB0aW9uPT50aGlzLnNldFN0YXRlKHtkZXNjcmlwdGlvbn0pfSAvPlxyXG5cclxuICAgICAgICA8VGV4dElucHV0XHJcbiAgICAgICAgICBsYWJlbD17aW50bC5mb3JtYXRNZXNzYWdlKHtpZDonY29tbW9uLmxpbmtMYWJlbCcsIGRlZmF1bHRNZXNzYWdlOlwiTMOkbmtcIn0pfVxyXG4gICAgICAgICAgaWQ9XCJFZHV0VXNlclRhc2s6dXJsXCJcclxuICAgICAgICAgIHBsYWNlaG9sZGVyPVwiaHR0cChzKTovLy4uLlwiXHJcbiAgICAgICAgICB2YWx1ZT17dXJsfVxyXG4gICAgICAgICAgb25DaGFuZ2U9e3VybCA9PiB0aGlzLnNldFN0YXRlKHt1cmx9KX0gPlxyXG5cclxuICAgICAgICA8L1RleHRJbnB1dD48Lz59XHJcblxyXG4gICAgICAgIDxGb3JtRmllbGQgbGFiZWw9e2ludGwuZm9ybWF0TWVzc2FnZSh7aWQ6ICd0YXNrLnNldERlYWRsaW5lJywgZGVmYXVsdE1lc3NhZ2U6ICdBbmdlIGRlYWRsaW5lJ30pfT5cclxuICAgICAgICAgIHsoZGVhZGxpbmUgfHwgc2hvd0NhbGVuZGFyKSA/XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbFwiPlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgICAgICAgICA8UmVhY3REYXRlUGlja2VyIHJlZj17ZWxlbSA9PiB0aGlzLmRhdGVQaWNrZXIgPSBlbGVtfVxyXG4gICAgICAgICAgICAgICAgICBpZD1cIkVkaXRVc2VyVGFzazpkZWFkbGluZVwiXHJcbiAgICAgICAgICAgICAgICAgIG5leHRNb250aEJ1dHRvbkxhYmVsPVwiXCIgXHJcbiAgICAgICAgICAgICAgICAgIHByZXZpb3VzTW9udGhCdXR0b25MYWJlbD1cIlwiIFxyXG4gICAgICAgICAgICAgICAgICBzaG93V2Vla051bWJlcnM9e3RydWV9XHJcbiAgICAgICAgICAgICAgICAgIHNlbGVjdGVkPXtkZWFkbGluZSAmJiBtb21lbnQoZGVhZGxpbmUpLnRvRGF0ZSgpfVxyXG4gICAgICAgICAgICAgICAgICBhdXRvRm9jdXM9e3Nob3dDYWxlbmRhcn1cclxuICAgICAgICAgICAgICAgICAgZGF0ZUZvcm1hdD1cIllZWVktTU0tZGRcIlxyXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2V4cGlyZWQgPyBcImV4cGlyZWRcIiA6IHVuZGVmaW5lZH1cclxuICAgICAgICAgICAgICAgICAgbG9jYWxlPXtpbnRsLmxvY2FsZX1cclxuICAgICAgICAgICAgICAgICAgcG9wcGVyUGxhY2VtZW50PXtpc0N1c3RvbVRhc2sgPyBcInRvcC1zdGFydFwiIDogXCJib3R0b20tc3RhcnRcIn1cclxuICAgICAgICAgICAgICAgICAgb25CbHVyPXsoKT0+dGhpcy5zZXRTdGF0ZSh7c2hvd0NhbGVuZGFyOiBmYWxzZX0pfVxyXG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dmFsdWU9PntcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgIGRlYWRsaW5lOiB2YWx1ZSAmJiBtb21lbnQodmFsdWUpLmZvcm1hdChcIllZWVktTU0tRERcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgICBzaG93Q2FsZW5kYXI6IGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgICAgICAgICA8YSBjbGFzc05hbWU9XCJkZWxldGVEYXRlXCIgaHJlZj1cIiNcIiB0aXRsZT17aW50bC5mb3JtYXRNZXNzYWdlKHtpZDogJ3Rhc2sucmVtb3ZlRGVhZGxpbmUnLCBkZWZhdWx0TWVzc2FnZTogJ1RhIGJvcnQgZGVhZGxpbmUnfSl9IG9uQ2xpY2s9e2V2PT57XHJcbiAgICAgICAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2RlYWRsaW5lOiBudWxsLCBzaG93Q2FsZW5kYXI6IGZhbHNlfSk7XHJcbiAgICAgICAgICAgICAgICB9fT48L2E+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PiA6XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidG9wXCIgcmVmPXsoKT0+e3RoaXMuZGF0ZVBpY2tlciA9IG51bGx9fT5cclxuICAgICAgICAgICAgICAgIDxhIGNsYXNzTmFtZT1cImJ0blwiIG9uQ2xpY2s9e2V2ID0+IHtcclxuICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0ZVBpY2tlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0ZVBpY2tlci5zZXRPcGVuKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHNob3dDYWxlbmRhcjogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH19PlxyXG4gICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtY2FsZW5kYXJcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+PEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJ0YXNrLnNldERlYWRsaW5lTGFiZWxcIiBkZWZhdWx0TWVzc2FnZT1cIkFuZ2UgZGVhZGxpbmUuLi5cIi8+XHJcbiAgICAgICAgICAgICAgPC9hPiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDwvZGl2Pn1cclxuICAgICAgICA8L0Zvcm1GaWVsZD5cclxuICAgICAgPEZvcm1GaWVsZCBsYWJlbD17aW50bC5mb3JtYXRNZXNzYWdlKHtpZDogJ3Rhc2suc3ViVGFza3MnLCBkZWZhdWx0TWVzc2FnZTogJ1VuZGVydXBwZ2lmdGVyJ30pfSA+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsZWFybmluZ0dvYWxUYXNrc1wiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YXNrQ29udGFpbmVyXCI+XHJcblxyXG4gICAgICAgICAgICAgIHtzdWJUYXNrcyAmJiBzdWJUYXNrcy5tYXAoc3ViVGFzayA9PiA8ZGl2IGtleT17c3ViVGFzay5pZH0gY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbFwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj48YVxyXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKT0+dGhpcy5lZGl0U3ViVGFzayhzdWJUYXNrKX1cclxuICAgICAgICAgICAgICAgICAgaHJlZj1cIiNcIj57c3ViVGFzay5uYW1lfTwvYT48L2Rpdj5cclxuICAgICAgICAgICAgICA8L2Rpdj4pfVxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRvcFwiPlxyXG4gICAgICAgICAgICA8YnV0dG9uIGlkPVwiRWRpdFVzZXJUYXNrOmFkZFN1YlRhc2tcIiBjbGFzc05hbWU9XCJidG5cIlxyXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpPT50aGlzLmFkZFN1YlRhc2soKX0+XHJcbiAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtcGx1c1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4gPEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJ0YXNrLmFkZFN1YnRhc2tcIiBkZWZhdWx0TWVzc2FnZT1cIkzDpGdnIHRpbGwgdW5kZXJ1cHBnaWZ0XCIvPlxyXG4gICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L0Zvcm1GaWVsZD5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJkaXZpZGVyIGxhcmdlXCIgLz5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsQnV0dG9uIHRvcFwiPlxyXG4gICAgICAgICAgPGJ1dHRvbiB0YWJJbmRleD17MX1cclxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnRuIGJ0bi1kZWZhdWx0XCJcclxuICAgICAgICAgICAgb25DbGljaz17KCk9PntcclxuICAgICAgICAgICAgICBpc01vZGlmaWVkID8gb25VcGRhdGUodXNlclRhc2sgPT4ge1xyXG4gICAgICAgICAgICAgICAgdXNlclRhc2submFtZSA9IG5hbWU7XHJcbiAgICAgICAgICAgICAgICB1c2VyVGFzay5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xyXG4gICAgICAgICAgICAgICAgdXNlclRhc2sudXJsID0gdXJsO1xyXG4gICAgICAgICAgICAgICAgdXNlclRhc2suZGVhZGxpbmUgPSBkZWFkbGluZTtcclxuICAgICAgICAgICAgICB9KSA6IHRoaXMucHJvcHMuY2xvc2VEaWFsb2coKTtcclxuICAgICAgICAgICAgfX0+PEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJjb21tb24uc2F2ZVwiIGRlZmF1bHRNZXNzYWdlPVwiU3BhcmFcIi8+IFxyXG4gICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxCdXR0b24gdG9wXCI+XHJcbiAgICAgICAgICA8YnV0dG9uIHRhYkluZGV4PXsxfVxyXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJidG5cIlxyXG4gICAgICAgICAgICBvbkNsaWNrPXsoKT0+e1xyXG4gICAgICAgICAgICAgIHRoaXMucHJvcHMuY2xvc2VEaWFsb2coKTtcclxuICAgICAgICAgICAgfX0+PEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJjb21tb24uY2FuY2VsXCIgZGVmYXVsdE1lc3NhZ2U9XCJBdmJyeXRcIi8+PC9idXR0b24+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb25maXJtIHRvcCBwdWxsLXJpZ2h0XCI+XHJcbiAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgIHRhYkluZGV4PXsxfVxyXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJidG4gYnRuLXdhcm5pbmdcIlxyXG4gICAgICAgICAgICBvbkNsaWNrPXsoKT0+e1xyXG4gICAgICAgICAgICAgIG9uRGVsZXRlKGlkKTtcclxuICAgICAgICAgICAgfX0+e2lzQ3VzdG9tVGFzayA/XHJcbiAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJ0YXNrLnJlbW92ZVdvcmtHb2Fsc1wiIGRlZmF1bHRNZXNzYWdlPVwiVGEgYm9ydCBhcmJldHNtw6VsXCIvPiA6XHJcbiAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJ0YXNrLnJlbW92ZVRoaXNUYXNrXCIgZGVmYXVsdE1lc3NhZ2U9XCJUYSBib3J0IGRlbiBow6RyIHVwcGdpZnRlblwiLz5cclxuICAgICAgICAgIH08L2J1dHRvbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgIFxyXG4gICAgICB7Lyo8ZGl2IGNsYXNzTmFtZT1cImJ0biBidG4td2FybmluZyBidG4tbGFyZ2UgcHVsbC1yaWdodFwiIG9uQ2xpY2s9e2V2ID0+IG9uRGVsZXRlKGlkKX0+XHJcbiAgICAgICAge0xgVGEgYm9ydCBhcmJldHNtw6VsYH08L2Rpdj5cclxuICAgICAge2lzTW9kaWZpZWQgJiZcclxuICAgICAgICA8ZGl2XHJcbiAgICAgICAgICBjbGFzc05hbWU9XCJidG4gYnRuLWxhcmdlIGJ0bi1kZWZhdWx0XCJcclxuICAgICAgICAgIHRhYkluZGV4PXswfVxyXG4gICAgICAgICAgb25DbGljaz17KCk9Pm9uVXBkYXRlKHVzZXJUYXNrID0+IHtcclxuICAgICAgICAgICAgdXNlclRhc2submFtZSA9IG5hbWU7XHJcbiAgICAgICAgICAgIHVzZXJUYXNrLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XHJcbiAgICAgICAgICAgIHVzZXJUYXNrLnVybCA9IHVybDtcclxuICAgICAgICAgIH0pfT4gU3BhcmE8L2Rpdj59Ki99XHJcbiAgICA8L2Rpdj5cclxuICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCB7IFVzZXJUYXNrIH0gZnJvbSBcImtlZGJhY2tlbmQvbW9kZWxzXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGFza1R5cGUgKHVzZXJUYXNrOiBVc2VyVGFzaykgOiAnY291cnNlQnVpbGRlclRhc2snIHwgJ3NpdGVWaXNpb25UYXNrJyB8ICdzdWJqZWN0UGxhbm5lclRhc2snIHwgJ2N1c3RvbVRhc2snIHtcclxuICByZXR1cm4gdXNlclRhc2suY291cnNlICYmIHVzZXJUYXNrLnRhc2sgJiYgdXNlclRhc2suY291cnNlLmxlbmd0aCA+IDAgJiYgdXNlclRhc2sudGFzay5sZW5ndGggPiAwID9cclxuICAgICdjb3Vyc2VCdWlsZGVyVGFzaycgOlxyXG4gICAgdXNlclRhc2suc2l0ZVZpc2lvblBhZ2VJZCA/XHJcbiAgICAgICdzaXRlVmlzaW9uVGFzaycgOlxyXG4gICAgICAgIHVzZXJUYXNrLmNvdXJzZUluZm8gP1xyXG4gICAgICAgICAgJ3N1YmplY3RQbGFubmVyVGFzaycgOlxyXG4gICAgICAgICAgJ2N1c3RvbVRhc2snO1xyXG59XHJcbiIsImltcG9ydCB7IFVzZXJUYXNrIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBVc2VyVGFza3NCb3hQcm9wcyB9IGZyb20gJy4vdXNlci10YXNrcy1ib3gnO1xyXG5pbXBvcnQgeyBhcnJheVRvTWFwLCBhcnJheVRvTG9va3VwLCBjb21wYXJlUHJvcCwgTCB9IGZyb20gXCIuLi8uLi91dGlscy91dGlsc1wiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBWaXJ0dWFsTGVhcm5pbmdHb2FsIHtcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgYWxsVGFza3M6IFVzZXJUYXNrW107XHJcbiAgc3RlcD86IG51bWJlcjtcclxuICB1cmw/OiBzdHJpbmc7XHJcbiAgdGFza3M6IFVzZXJUYXNrW107XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZWZpbmUodGFza3M6IFVzZXJUYXNrW10pIHtcclxuICBjb25zdCByZXN1bHQgPSBbXSBhcyBQYXJ0aWFsPFVzZXJUYXNrc0JveFByb3BzPltdO1xyXG4gIGNvbnN0IG1hcHBlciA9IHt9IGFzIHsgW25hbWU6IHN0cmluZ106IFVzZXJUYXNrc0JveFByb3BzIH07XHJcbiAgY29uc3QgdGFza3NQZXJDb3Vyc2UgPSBhcnJheVRvTG9va3VwKHRhc2tzLCB0ID0+IHQuY291cnNlTmFtZSB8fCAnJyk7XHJcbiAgZm9yIChjb25zdCBjb3Vyc2VOYW1lIG9mIE9iamVjdC5rZXlzKHRhc2tzUGVyQ291cnNlKS5zb3J0KCkuZmlsdGVyKHggPT4geCkuY29uY2F0KHRhc2tzUGVyQ291cnNlWycnXSA/XHJcbiAgICBbJyddIDogW10pKSB7XHJcbiAgICBjb25zdCBjb3Vyc2VUYXNrcyA9IHRhc2tzUGVyQ291cnNlW2NvdXJzZU5hbWVdIHx8IHRhc2tzUGVyQ291cnNlWycnXTtcclxuICAgIGNvbnN0IHRhc2tzUGVyTGVhcm5pbmdHb2FsID0gYXJyYXlUb0xvb2t1cChjb3Vyc2VUYXNrcywgdCA9PiB0LmxlYXJuaW5nR29hbCk7XHJcbiAgICBjb25zdCByZXN1bHRMZWFybmluZ0dvYWxzOiBWaXJ0dWFsTGVhcm5pbmdHb2FsW10gPSBbXTtcclxuICAgIGZvciAoY29uc3QgbGVhcm5pbmdHb2FsIG9mIE9iamVjdC5rZXlzKHRhc2tzUGVyTGVhcm5pbmdHb2FsKSkge1xyXG4gICAgICBjb25zdCBsZ1Rhc2tzID0gdGFza3NQZXJMZWFybmluZ0dvYWxbbGVhcm5pbmdHb2FsXS5zb3J0KGNvbXBhcmVQcm9wKFwiZGF0ZVRpbWVcIikpO1xyXG4gICAgICBjb25zdCBsZWFybmluZ0dvYWxUYXNrID0gbGdUYXNrc1xyXG4gICAgICAgIC5maWx0ZXIodCA9PiB0Lm5hbWUgPT0gbnVsbCkgLy8gSWYgbmFtZSBpcyB1bmRlZmluZWQgb3IgbnVsbCwgdGhpcyByZXByZXNlbnRzIGEgbGVhcm5pbmcgZ29hbFxyXG4gICAgICAgIFswXTtcclxuICAgICAgY29uc3QgdXJsID0gbGVhcm5pbmdHb2FsVGFzayAmJiBsZWFybmluZ0dvYWxUYXNrLnVybDtcclxuICAgICAgcmVzdWx0TGVhcm5pbmdHb2Fscy5wdXNoKHtcclxuICAgICAgICBuYW1lOiBsZWFybmluZ0dvYWwsXHJcbiAgICAgICAgYWxsVGFza3M6IGxnVGFza3MsXHJcbiAgICAgICAgdXJsLFxyXG4gICAgICAgIHN0ZXA6IGxnVGFza3MubWFwKHQgPT4gdC5zdGVwKS5maWx0ZXIoc3RlcCA9PiBzdGVwKVswXSxcclxuICAgICAgICB0YXNrczogbGdUYXNrcy5maWx0ZXIodCA9PiB0Lm5hbWUpXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmVzdWx0LnB1c2goe1xyXG4gICAgICBjb3Vyc2VOYW1lLFxyXG4gICAgICBsZWFybmluZ0dvYWxzOiByZXN1bHRMZWFybmluZ0dvYWxzXHJcbiAgICB9KTtcclxuICB9XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IFVzZXJUYXNrLCBUYXNrLCBVc2VyU3ViVGFzayB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgT3BlbkNsb3NlQm94IH0gZnJvbSAnLi4vdXRpbGl0eS1jb21wb25lbnRzL29wZW4tY2xvc2UtYm94JztcclxuaW1wb3J0IHsgTCB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgcHJlc2VydmVJbXBlcnNvbmF0aW9uUXVlcnkgfSBmcm9tICcuLi8uLi9hY2Nlc3MtY29udHJvbCc7XHJcbmltcG9ydCB7IGNvdXJzZU5hbWVUb0Nzc0NsYXNzIH0gZnJvbSAnLi4vY2FsZW5kYXIvY291cnNlLW5hbWUtdG8tY3NzLWNsYXNzJztcclxuaW1wb3J0IHsgZ2V0VGFza1R5cGUgfSBmcm9tICcuL2dldC10YXNrLXR5cGUnO1xyXG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcbmltcG9ydCB7IFZpcnR1YWxMZWFybmluZ0dvYWwgfSBmcm9tICcuL3JlZmluZXInO1xyXG5pbXBvcnQgeyBGZWF0dXJlcyB9IGZyb20gJy4uLy4uL2ZlYXR1cmVzJztcclxuaW1wb3J0IGNmZyBmcm9tICcuLi8uLi9nbG9iYWxzL0tFRC5jZmcnO1xyXG5pbXBvcnQge0Zvcm1hdHRlZE1lc3NhZ2V9IGZyb20gJ3JlYWN0LWludGwnO1xyXG5pbXBvcnQge0xhbmd1YWdlQ29udGV4dH0gZnJvbSAnLi4vdXRpbGl0eS1jb21wb25lbnRzL0xhbmd1YWdlQ29udGV4dCc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFVzZXJUYXNrc0JveFByb3BzIHtcclxuICBjb3Vyc2VOYW1lOiBzdHJpbmc7XHJcbiAgbGVhcm5pbmdHb2FsczogVmlydHVhbExlYXJuaW5nR29hbFtdLFxyXG4gIHZpZXdDb3Vyc2VVcmw6IHN0cmluZztcclxuICBvcGVuQ291cnNlcz86IHsgW3BhdGg6IHN0cmluZ106IGJvb2xlYW4gfTtcclxuICBzZXRJc09wZW4/OiAoY291cnNlTmFtZTogc3RyaW5nLCBpc09wZW46IGJvb2xlYW4pID0+IHZvaWQ7XHJcbiAgc2V0VGFza0RvbmU/OiAodGFzazogVXNlclRhc2ssIGRvbmU6IGJvb2xlYW4pID0+IHZvaWQ7XHJcbiAgc2V0U3ViVGFza0RvbmU6ICh0YXNrOiBVc2VyVGFzaywgc3ViVGFzazogVXNlclN1YlRhc2ssIGRvbmU6IGJvb2xlYW4pID0+IHZvaWQ7XHJcbiAgYWRkT3duVGFzaz86IChjb3Vyc2VOYW1lOiBzdHJpbmcsIGxlYXJuaW5nR29hbE5hbWU6IHN0cmluZykgPT4gdm9pZDtcclxuICBlZGl0VGFzazogKHRhc2s6IFVzZXJUYXNrKSA9PiB2b2lkO1xyXG4gIGVkaXRTdWJUYXNrOiAodGFzazogVXNlclRhc2ssIHN1YlRhc2s6IFVzZXJTdWJUYXNrKSA9PiB2b2lkO1xyXG4gIHJlbW92ZUxlYXJuaW5nR29hbDogKGxnOiBWaXJ0dWFsTGVhcm5pbmdHb2FsKT0+dm9pZDtcclxuICBkaXNwbGF5UHJvZ3Jlc3M6IGJvb2xlYW47XHJcbiAgcHJvZ3Jlc3NEYXRhOiB7Y29tcGxldGVkTnVtYmVyT2ZUYXNrczogbnVtYmVyLCBudW1iZXJPZlRhc2tzOiBudW1iZXJ9O1xyXG59O1xyXG5cclxuZXhwb3J0IGNsYXNzIFVzZXJUYXNrc0JveCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxVc2VyVGFza3NCb3hQcm9wcz4ge1xyXG4gIHN0YXRpYyBjb250ZXh0VHlwZSA9IExhbmd1YWdlQ29udGV4dDtcclxuICBjb25zdHJ1Y3Rvcihwcm9wczogVXNlclRhc2tzQm94UHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICB9XHJcblxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7XHJcbiAgICAgIGNvdXJzZU5hbWUsXHJcbiAgICAgIGxlYXJuaW5nR29hbHMsIFxyXG4gICAgICBwcm9ncmVzc0RhdGEsXHJcbiAgICAgIGRpc3BsYXlQcm9ncmVzc1xyXG4gICAgfSA9IHRoaXMucHJvcHM7XHJcbiAgICBjb25zdCBpc09wZW4gPSAhIXRoaXMucHJvcHMub3BlbkNvdXJzZXNbY291cnNlTmFtZV07XHJcbiAgICBjb25zdCBmZWF0dXJlcyA9IG5ldyBGZWF0dXJlcygpO1xyXG4gICAgY29uc3Qge2ludGx9ID0gdGhpcy5jb250ZXh0O1xyXG5cclxuICAgIHJldHVybiA8T3BlbkNsb3NlQm94XHJcbiAgdGl0bGU9ezxoNT57Y291cnNlTmFtZSB8fCA8Rm9ybWF0dGVkTWVzc2FnZSBpZD1cInVzZXJUYXNrcy5nb2Fsc1wiICBkZWZhdWx0TWVzc2FnZT1cIkVnbmEgbMOkcmFuZGVtw6VsXCIvPiB9PC9oNT59XHJcbiAgICAgIGhlYWRlck9wZW49e2lzT3Blbn1cclxuICAgICAgY2xhc3NOYW1lPXtjb3Vyc2VOYW1lICYmIGNvdXJzZU5hbWVUb0Nzc0NsYXNzKCd3cC1jb3Vyc2UtJywgY291cnNlTmFtZSl9XHJcbiAgICAgIG9uT3BlbkNsb3NlPXtiZWNhbWVPcGVuID0+IHRoaXMucHJvcHMuc2V0SXNPcGVuKGNvdXJzZU5hbWUsIGJlY2FtZU9wZW4pfVxyXG4gICAgICBkaXNwbGF5UHJvZ3Jlc3M9IHtkaXNwbGF5UHJvZ3Jlc3N9ICAgICAgIFxyXG4gICAgICBwcm9ncmVzc0RhdGEgPSB7cHJvZ3Jlc3NEYXRhfVxyXG4gICAgICA+XHJcbiAgICAgIHtsZWFybmluZ0dvYWxzLm1hcChsZyA9PlxyXG4gICAgICAgIDxkaXYga2V5PXtsZy5uYW1lfSBjbGFzc05hbWU9XCJsZWFybmluZ0dvYWxDb250YWluZXJcIj5cclxuICAgICAgICAgIHtsZy5zdGVwICYmIDxkaXYgY2xhc3NOYW1lPVwic3RlcEluZGljYXRvclwiPntsZy5zdGVwfTwvZGl2Pn1cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbFwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxlYXJuaW5nR29hbFRleHQgaG9yaXpvbnRhbEl0ZW0gdG9wXCI+e2xnLm5hbWV9PC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW1cIj5cclxuICAgICAgICAgICAgICAmbmJzcDs8YVxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidHJhc2hcIlxyXG4gICAgICAgICAgICAgICAgaHJlZj1cIiNcIlxyXG4gICAgICAgICAgICAgICAgIHRpdGxlPXtpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOid1c2VyVGFza3MuZGVsZXRlTGVhcm5pbmdHb2FsJywgZGVmYXVsdE1lc3NhZ2U6ICdUYSBib3J0IGzDpHJhbmRlbcOlbGV0IG9jaCBkZXNzIHVwcGdpZnRlcid9KX1cclxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2V2PT57XHJcbiAgICAgICAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMucmVtb3ZlTGVhcm5pbmdHb2FsKGxnKTtcclxuICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtdHJhc2hcIiAvPlxyXG4gICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxlYXJuaW5nR29hbFRhc2tzXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGFza0NvbnRhaW5lclwiPlxyXG4gICAgICAgICAgICAgIHtsZy50YXNrcy5tYXAodXNlclRhc2sgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaXNXb3JraW5nID0gdXNlclRhc2suJG1ldGEgPT09ICdhZGRpbmcnIHx8IHVzZXJUYXNrLiRtZXRhID09PSAnZGVsZXRpbmcnIHx8IHVzZXJUYXNrLiRtZXRhID09PSAndXBkYXRpbmcnO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tUeXBlID0gZ2V0VGFza1R5cGUodXNlclRhc2spO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZXhwaXJlZCA9IG1vbWVudCh1c2VyVGFzay5kZWFkbGluZSkuc3RhcnRPZignZGF5JykgPCBtb21lbnQoKS5zdGFydE9mKCdkYXknKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gPGRpdiBrZXk9e3VzZXJUYXNrLmlkfSBzdHlsZT17aXNXb3JraW5nID8geyBvcGFjaXR5OiAwLjUgfSA6IHt9fT5cclxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtcImNoZWNrQm94XCIgKyAodXNlclRhc2suZG9uZSA/IFwiIGNoZWNrZWRcIiA6IFwiXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtldiA9PiAhaXNXb3JraW5nICYmIHRoaXMucHJvcHMuc2V0VGFza0RvbmUodXNlclRhc2ssICF1c2VyVGFzay5kb25lKX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAge3Rhc2tUeXBlID09PSAnY291cnNlQnVpbGRlclRhc2snID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj17Z2V0VGFza1VybCh1c2VyVGFzaywgdGhpcy5wcm9wcy52aWV3Q291cnNlVXJsKX0+e3VzZXJUYXNrLm5hbWV9PC9hPiA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgdGFza1R5cGUgPT09ICdzdWJqZWN0UGxhbm5lclRhc2snID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj17Z2V0U3ViamVjdFBsYW5uZXJUYXNrVXJsKHVzZXJUYXNrKX0+e3VzZXJUYXNrLm5hbWV9PC9hPiA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tUeXBlID09PSAnc2l0ZVZpc2lvblRhc2snID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPXt1c2VyVGFzay51cmx9Pnt1c2VyVGFzay5uYW1lfTwvYT4gOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9eyF1c2VyVGFzay51cmwgPyBcImxpbmstbGVzc1wiOiBcIlwifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZj17dXNlclRhc2sudXJsIHx8IHVuZGVmaW5lZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldD17KHVzZXJUYXNrLnVybCsnJykudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKGxvY2F0aW9uLmhvc3QudG9Mb3dlckNhc2UoKSkgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIl9zZWxmXCIgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIl9ibGFua1wifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgID57dXNlclRhc2submFtZX08L2E+fVxyXG4gICAgICAgICAgICAgICAgICAgICAge3VzZXJUYXNrLmRlYWRsaW5lICYmIDxkaXYgY2xhc3NOYW1lPXtcImRhdGVTZXRcIiArIChleHBpcmVkID8gJyBleHBpcmVkJyA6ICcnKX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpIHRpdGxlPXttb21lbnQodXNlclRhc2suZGVhZGxpbmUpLmZvcm1hdChcIllZWVktTU0tRERcIil9IGNsYXNzTmFtZT1cImZhIGZhLWNhbGVuZGFyXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKT0+e319PjwvaT5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pn1cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcCB0YXNrRWRpdFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBjbGFzc05hbWU9XCJlZGl0SXRlbVwiIG9uQ2xpY2s9eygpID0+IHRoaXMucHJvcHMuZWRpdFRhc2sodXNlclRhc2spfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+IFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgIHt1c2VyVGFzay5zdWJUYXNrcyAmJiA8ZGl2IGNsYXNzTmFtZT1cInN1YnRhc2tzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAge3VzZXJUYXNrLnN1YlRhc2tzLm1hcChzdWJUYXNrID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17c3ViVGFzay5pZH0gPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17XCJjaGVja0JveFwiICsgKHN1YlRhc2suZG9uZSA/IFwiIGNoZWNrZWRcIiA6IFwiXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17ZXYgPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIWlzV29ya2luZyAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnNldFN1YlRhc2tEb25lKHVzZXJUYXNrLCBzdWJUYXNrLCAhc3ViVGFzay5kb25lKX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBocmVmPXtzdWJUYXNrLnVybCB8fCB1bmRlZmluZWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ9eyh1c2VyVGFzay51cmwrJycpLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aChsb2NhdGlvbi5ob3N0LnRvTG93ZXJDYXNlKCkpID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiX3NlbGZcIiA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIl9ibGFua1wifVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViVGFzay51cmwgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2xpbmstbGVzcydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9PntzdWJUYXNrLm5hbWV9PC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3AgdGFza0VkaXRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBjbGFzc05hbWU9XCJlZGl0SXRlbVwiIG9uQ2xpY2s9eygpID0+IHRoaXMucHJvcHMuZWRpdFN1YlRhc2sodXNlclRhc2ssIHN1YlRhc2spfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pil9XHJcbiAgICAgICAgICAgICAgICAgIDwvZGl2Pn1cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGVhcm5pbmdHb2FsVG9vbHNcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidG4gYWRkT3duR29hbFwiXHJcbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gdGhpcy5wcm9wcy5hZGRPd25UYXNrKHRoaXMucHJvcHMuY291cnNlTmFtZSwgbGcubmFtZSl9PlxyXG4gICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLXBsdXNcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+IDxGb3JtYXR0ZWRNZXNzYWdlIGlkPSd1c2VyVGFza3MuYWRkTGVhcm5pbmdHb2FsJyBkZWZhdWx0TWVzc2FnZT0nRWdldCBhcmJldHNtw6VsJy8+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8YnIgLz5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgKX1cclxuICAgIDwvT3BlbkNsb3NlQm94PlxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0VGFza1VybCh1c2VyVGFzazogVXNlclRhc2ssIHZpZXdDb3Vyc2VVcmw6IHN0cmluZykge1xyXG4gIGlmICh1c2VyVGFzay5jb3Vyc2UgJiYgdXNlclRhc2suY291cnNlLmxlbmd0aCA+IDAgJiYgdXNlclRhc2sudGFzayAmJiB1c2VyVGFzay50YXNrLmxlbmd0aCA+IDApIHtcclxuICAgIGNvbnN0IGNvdXJzZVVybCA9IHByZXNlcnZlSW1wZXJzb25hdGlvblF1ZXJ5KHZpZXdDb3Vyc2VVcmwsIHsgY291cnNlSWQ6IHVzZXJUYXNrLmNvdXJzZVswXS5pZCB9KTtcclxuICAgIHJldHVybiBgJHtjb3Vyc2VVcmx9Iy90YXNrLyR7dXNlclRhc2sudGFza1swXS5pZH1gO1xyXG4gIH1cclxuICByZXR1cm4gdXNlclRhc2sudXJsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRTdWJqZWN0UGxhbm5lclRhc2tVcmwodXNlclRhc2s6IFVzZXJUYXNrKSB7XHJcbiAgaWYgKHVzZXJUYXNrLmNvdXJzZUluZm8gJiYgdXNlclRhc2sudGFzayAmJiB1c2VyVGFzay50YXNrLmxlbmd0aCA+IDApIHtcclxuICAgIGNvbnN0IHtzY2hvb2wsIGNvdXJzZSwgdGFiIH0gPSB1c2VyVGFzay5jb3Vyc2VJbmZvO1xyXG4gICAgY29uc3QgY291cnNlVXJsID0gcHJlc2VydmVJbXBlcnNvbmF0aW9uUXVlcnkoY2ZnLktFRF9TVUJKRUNUX1BMQU5ORVJfVVJMLCB7fSk7XHJcbiAgICByZXR1cm4gYCR7Y291cnNlVXJsfSMvJHtzY2hvb2x9L2NvdXJzZXMvJHtjb3Vyc2V9L3RhYnMvJHt0YWJ9L3Rhc2tzLyR7dXNlclRhc2sudGFza1swXS5pZH1gO1xyXG4gIH1cclxuICByZXR1cm4gdXNlclRhc2sudXJsO1xyXG59XHJcbiIsImltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcclxuaW1wb3J0IHsgbG9jYWxNb21lbnQgfSBmcm9tICcuLi8uLi9nbG9iYWxzL21vbWVudC1zdi1sb2NhbGUnO1xyXG5cclxudHlwZSBNb21lbnQgPSBtb21lbnQuTW9tZW50O1xyXG5cclxuZXhwb3J0IGNsYXNzIFdlZWtQbGFubmVyUGVyc2lzdGVkU3RhdGUge1xyXG4gIHN0YXRpYyBFWFBJUkFUSU9OX0hPVVJTID0gMTI7XHJcbiAgc3RhdGljIFZFUlNJT04gPSAyO1xyXG5cclxuICB1c2VyOiBzdHJpbmc7XHJcbiAgbGFzdFdyaXRlOiBudW1iZXI7XHJcbiAgd2Vla0RhdGU6IG51bWJlcjtcclxuICBvcGVuQ291cnNlczogeyBbcGF0aDogc3RyaW5nXTogYm9vbGVhbiB9XHJcblxyXG4gIGNvbnN0cnVjdG9yICh1c2VyT3JDb3B5OiBzdHJpbmcgfCBXZWVrUGxhbm5lclBlcnNpc3RlZFN0YXRlKSB7XHJcbiAgICBpZiAodHlwZW9mIHVzZXJPckNvcHkgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIHRoaXMudXNlciA9IHVzZXJPckNvcHk7XHJcbiAgICAgIHRoaXMubGFzdFdyaXRlID0gRGF0ZS5ub3coKTtcclxuICAgICAgdGhpcy53ZWVrRGF0ZSA9IGxvY2FsTW9tZW50KCkuc3RhcnRPZignd2VlaycpLnZhbHVlT2YoKTtcclxuICAgICAgdGhpcy5vcGVuQ291cnNlcyA9IHt9O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCB1c2VyT3JDb3B5KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0YXRpYyBhc3luYyBsb2FkKHVzZXI6IHN0cmluZykge1xyXG4gICAgY29uc3QgY29va2llID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ1dlZWtQbGFubmVyUGVyc2lzdGVkU3RhdGUyJyk7XHJcbiAgICBjb25zdCBzdG9yZWREYXRhID0gY29va2llICYmIChKU09OLnBhcnNlKGNvb2tpZSkgYXMgV2Vla1BsYW5uZXJQZXJzaXN0ZWRTdGF0ZSk7XHJcbiAgICBjb25zdCBzdGF0ZSA9IG5ldyBXZWVrUGxhbm5lclBlcnNpc3RlZFN0YXRlKHVzZXIpO1xyXG4gICAgaWYgKHN0b3JlZERhdGEpIE9iamVjdC5hc3NpZ24oc3RhdGUsIHN0b3JlZERhdGEpO1xyXG5cclxuICAgIHJldHVybiBzdGF0ZS51c2VyID09PSB1c2VyICYmICFzdGF0ZS5pc0V4cGlyZWQobW9tZW50KCkpID9cclxuICAgICAgc3RhdGUgOiBuZXcgV2Vla1BsYW5uZXJQZXJzaXN0ZWRTdGF0ZSh1c2VyKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHNhdmUoKSB7XHJcbiAgICB0aGlzLmxhc3RXcml0ZSA9IERhdGUubm93KCk7XHJcbiAgICBjb25zdCBqc29uID0gSlNPTi5zdHJpbmdpZnkodGhpcyk7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnV2Vla1BsYW5uZXJQZXJzaXN0ZWRTdGF0ZTInLCBqc29uKTtcclxuICB9XHJcblxyXG4gIGlzRXhwaXJlZCAoYXNPZjogTW9tZW50KSB7XHJcbiAgICAgIHJldHVybiBtb21lbnQodGhpcy5sYXN0V3JpdGUpXHJcbiAgICAgICAgLmlzQmVmb3JlKFxyXG4gICAgICAgICAgICBhc09mLmFkZChcclxuICAgICAgICAgICAgICAgIDAtV2Vla1BsYW5uZXJQZXJzaXN0ZWRTdGF0ZS5FWFBJUkFUSU9OX0hPVVJTLCAnaG91cnMnKVxyXG4gICAgICAgICk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgVXNlclRhc2tzQm94IH0gZnJvbSAnLi91c2VyLXRhc2tzLWJveCc7XHJcbmltcG9ydCB7IFVzZXJUYXNrLCBVc2VyU3ViVGFzayB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgY3JlYXRlVVVJRCwgSHR0cEVycm9yIH0gZnJvbSBcImtlZGJhY2tlbmQvY2xpZW50XCI7XHJcbmltcG9ydCB7IHJlZmluZSwgVmlydHVhbExlYXJuaW5nR29hbCB9IGZyb20gJy4vcmVmaW5lcic7XHJcbmltcG9ydCB7IEVudiB9IGZyb20gJy4uLy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCB7IEwsIGNvbXBhcmVQcm9wIH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcbi8vaW1wb3J0IHsgQ3VzdG9tR29hbCB9IGZyb20gJy4uLy4uL2NvbnRyYWN0cy9rZWQtbW9kZWxzJztcclxuaW1wb3J0IHsgVFNPTiB9IGZyb20gJy4uLy4uL3V0aWxzL3Rzb24nO1xyXG5pbXBvcnQgeyBXZWVrUGxhbm5lclBlcnNpc3RlZFN0YXRlIH0gZnJvbSAnLi93ZWVrcGxhbm5lci1wZXJzaXN0ZWQtc3RhdGUnO1xyXG5pbXBvcnQgeyBSZW1vdmVJdGVtIH0gZnJvbSAnLi4vY291cnNlLWJ1aWxkZXIvc3ViLWNvbXBvbmVudHMvcmVtb3ZlLWl0ZW0nO1xyXG5pbXBvcnQgeyBEaWFsb2dzIH0gZnJvbSAnLi4vdXRpbGl0eS1jb21wb25lbnRzL2RpYWxvZ3MnO1xyXG5pbXBvcnQgeyBBZGRDdXN0b21Hb2FsIH0gZnJvbSAnLi9hZGQtY3VzdG9tLWdvYWwnO1xyXG5pbXBvcnQgeyBBZGRDdXN0b21UYXNrIH0gZnJvbSAnLi9hZGQtY3VzdG9tLXRhc2snO1xyXG5pbXBvcnQgeyBFZGl0VXNlclRhc2sgfSBmcm9tICcuL2VkaXQtdXNlci10YXNrJztcclxuaW1wb3J0IHsgU3Bpbm5lciB9IGZyb20gJy4uL2NvdXJzZS1idWlsZGVyL3N1Yi1jb21wb25lbnRzL3NwaW5uZXInO1xyXG5pbXBvcnQgeyBPcGVuQ2xvc2VCb3ggfSBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvb3Blbi1jbG9zZS1ib3gnO1xyXG5pbXBvcnQgeyBQZW5kaW5nSm9iIH0gZnJvbSAnLi4vLi4vdXRpbHMvcGVuZGluZy1qb2InO1xyXG5pbXBvcnQgeyBBZGRPckVkaXRTdWJUYXNrIH0gZnJvbSAnLi9hZGQtb3ItZWRpdC1zdWItdGFzayc7XHJcbmltcG9ydCB7IGdldEFkanVzdGVkV2VlaywgS0VEV2VlayB9IGZyb20gJy4uLy4uL3V0aWxzL3dlZWt1dGlsJztcclxuaW1wb3J0IHsgRm9ybWF0dGVkTWVzc2FnZSB9IGZyb20gJ3JlYWN0LWludGwnO1xyXG5pbXBvcnQge0xhbmd1YWdlQ29udGV4dH0gZnJvbSAnLi4vdXRpbGl0eS1jb21wb25lbnRzL0xhbmd1YWdlQ29udGV4dCc7XHJcbmltcG9ydCB7IFByb2dyZXNzIH0gZnJvbSAnLi4vY2hhcnRzL3Byb2dyZXNzJztcclxuaW1wb3J0IHtnZXRXZWVrcGxhbm5lclByb2dyZXNzRGF0YX0gZnJvbSAnLi4vY2hhcnRzL2NoYXJ0cy11dGlscydcclxuaW1wb3J0IHsgZmVhdHVyZXMgfSBmcm9tICcuLi8uLi9mZWF0dXJlcyc7XHJcblxyXG5jb25zdCBNQVhfU1RSQVRFR1lfTEVOR1RIID0gMTYzODQ7XHJcbmNvbnN0IE1BWF9BU1NFU1NNRU5UX0xFTkdUSCA9IDE2Mzg0O1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICB2aWV3Q291cnNlVXJsOiBzdHJpbmc7XHJcbiAgZW52OiBFbnY7XHJcbn1cclxuXHJcbmludGVyZmFjZSBTdGF0ZSB7XHJcbiAgd2Vla0RhdGU6IG51bWJlcjtcclxuICBkaWFsb2dzOiBhbnlbXTtcclxuICB1c2VyVGFza3M6IFVzZXJUYXNrW107XHJcbiAgb3BlbkNvdXJzZXM6IHsgW3BhdGg6IHN0cmluZ106IGJvb2xlYW4gfVxyXG4gIHN0cmF0ZWd5Pzogc3RyaW5nO1xyXG4gIGFzc2Vzc21lbnQ/OiBzdHJpbmc7XHJcbiAgd2Vla1RleHRzVVQ6IFVzZXJUYXNrIHwgbnVsbDtcclxuICBzYXZpbmc6IGJvb2xlYW47XHJcbiAgaXNMb2FkaW5nOiBib29sZWFuO1xyXG4gIGlzQ29weWluZ1Rhc2tzOiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgV2Vla1BsYW5uZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsIFN0YXRlPiB7XHJcbiAgd2Vla1RleHRzU2F2aW5nSm9iOiBQZW5kaW5nSm9iO1xyXG4gIHN0YXRpYyBjb250ZXh0VHlwZSA9IExhbmd1YWdlQ29udGV4dDtcclxuXHJcbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICB1c2VyVGFza3M6IFtdLFxyXG4gICAgICB3ZWVrRGF0ZTogRGF0ZS5ub3coKSxcclxuICAgICAgb3BlbkNvdXJzZXM6IHt9LFxyXG4gICAgICBkaWFsb2dzOiBbXSxcclxuICAgICAgc2F2aW5nOiBmYWxzZSxcclxuICAgICAgd2Vla1RleHRzVVQ6IG51bGwsXHJcbiAgICAgIGlzTG9hZGluZzogdHJ1ZSxcclxuICAgICAgaXNDb3B5aW5nVGFza3M6IGZhbHNlXHJcbiAgICB9XHJcbiAgICB0aGlzLm9uQ2hhbmdlID0gdGhpcy5vbkNoYW5nZS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy53ZWVrVGV4dHNTYXZpbmdKb2IgPSBuZXcgUGVuZGluZ0pvYigoKT0+dGhpcy5zYXZlV2Vla1RleHRzKCkpO1xyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICB0aGlzLnByb3BzLmVudi51c2VyVGFza3NSZXBvLnN1YnNjcmliZSh0aGlzLm9uQ2hhbmdlKTtcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xyXG4gICAgdGhpcy5wcm9wcy5lbnYudXNlclRhc2tzUmVwby51bnN1YnNjcmliZSh0aGlzLm9uQ2hhbmdlKTtcclxuICAgIHRoaXMud2Vla1RleHRzU2F2aW5nSm9iLnN0b3AoKTtcclxuICB9XHJcblxyXG4gIG9uQ2hhbmdlKHVzZXJUYXNrczogVXNlclRhc2tbXSwgcGVyc2lzdGVkOiBXZWVrUGxhbm5lclBlcnNpc3RlZFN0YXRlLCB3ZWVrVGV4dHNVVDogVXNlclRhc2spIHtcclxuICAgIGNvbnN0IG5ld1N0YXRlIDogUGFydGlhbDxTdGF0ZT4gPSB7XHJcbiAgICAgIHVzZXJUYXNrcyxcclxuICAgICAgd2Vla0RhdGU6IHBlcnNpc3RlZC53ZWVrRGF0ZSxcclxuICAgICAgb3BlbkNvdXJzZXM6IHBlcnNpc3RlZC5vcGVuQ291cnNlcyxcclxuICAgICAgd2Vla1RleHRzVVQsXHJcbiAgICAgIGlzTG9hZGluZzogZmFsc2VcclxuICAgIH1cclxuICAgIGlmICghdGhpcy5zdGF0ZS53ZWVrVGV4dHNVVCB8fCAod2Vla1RleHRzVVQuZGF0ZVRpbWUgIT09IHRoaXMuc3RhdGUud2Vla1RleHRzVVQuZGF0ZVRpbWUpKSB7XHJcbiAgICAgIC8vIENoYW5naW5nIHdlZWsuIFJlc2V0IHRvIG5ldyB3ZWVrJ3MgdmFsdWVzXHJcbiAgICAgIG5ld1N0YXRlLnN0cmF0ZWd5ID0gd2Vla1RleHRzVVQud2Vla1RleHRzLnN0cmF0ZWd5O1xyXG4gICAgICBuZXdTdGF0ZS5hc3Nlc3NtZW50ID0gd2Vla1RleHRzVVQud2Vla1RleHRzLmFzc2Vzc21lbnQ7XHJcbiAgICB9XHJcbiAgICB0aGlzLnNldFN0YXRlKG5ld1N0YXRlIGFzIGFueSk7IC8vIFJlYWN0J3MgdXNlIG9mIFBpY2sgaW5zdGVhZCBvZiBQYXJ0aWFsIG1ha2VzIHRoaW5ncyBjb21wbGV4IGhlcmUuXHJcbiAgfVxyXG5cclxuICBpc1dlZWtUZXh0c0VkaXRlZCgpIHtcclxuICAgIGNvbnN0IHsgc3RyYXRlZ3ksIGFzc2Vzc21lbnQsIHdlZWtUZXh0c1VUIH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgcmV0dXJuICEhd2Vla1RleHRzVVQgJiYgKHN0cmF0ZWd5ICE9PSB3ZWVrVGV4dHNVVC53ZWVrVGV4dHMuc3RyYXRlZ3kgfHwgYXNzZXNzbWVudCAhPT0gd2Vla1RleHRzVVQud2Vla1RleHRzLmFzc2Vzc21lbnQpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBzYXZlV2Vla1RleHRzKCkge1xyXG4gICAgY29uc29sZS5sb2coXCJTYXZpbmcgdGV4dHMuLi5cIik7XHJcbiAgICBjb25zdCB7IHN0cmF0ZWd5LCBhc3Nlc3NtZW50LCB3ZWVrVGV4dHNVVCB9ID0gdGhpcy5zdGF0ZTtcclxuICAgIGlmICh0aGlzLmlzV2Vla1RleHRzRWRpdGVkKCkpIHtcclxuICAgICAgYXdhaXQgdGhpcy5wcm9wcy5lbnYudXNlclRhc2tzUmVwby51cHNlcnQod2Vla1RleHRzVVQsIHV0ID0+IHtcclxuICAgICAgICB1dC53ZWVrVGV4dHMgPSB7IHN0cmF0ZWd5LCBhc3Nlc3NtZW50IH07XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJldldlZWsoKSB7XHJcbiAgICAvL3RoaXMuc2F2ZVdlZWtUZXh0cygpO1xyXG4gICAgdGhpcy5wcm9wcy5lbnYudXNlclRhc2tzUmVwby5jaGFuZ2VXZWVrKG1vbWVudCh0aGlzLnN0YXRlLndlZWtEYXRlKS5hZGQoLTEsICd3ZWVrJykudG9EYXRlKCkpO1xyXG4gIH1cclxuXHJcbiAgbmV4dFdlZWsoKSB7XHJcbiAgICAvL3RoaXMuc2F2ZVdlZWtUZXh0cygpO1xyXG4gICAgdGhpcy5wcm9wcy5lbnYudXNlclRhc2tzUmVwby5jaGFuZ2VXZWVrKG1vbWVudCh0aGlzLnN0YXRlLndlZWtEYXRlKS5hZGQoMSwgJ3dlZWsnKS50b0RhdGUoKSk7XHJcbiAgfVxyXG5cclxuICBvcGVuRGlhbG9nKGRpYWxvZykge1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7IGRpYWxvZ3M6IFsuLi50aGlzLnN0YXRlLmRpYWxvZ3MsIGRpYWxvZ10gfSk7XHJcbiAgfVxyXG5cclxuICBvcGVuQWRkR29hbERpYWxvZygpIHtcclxuICAgIHRoaXMub3BlbkRpYWxvZyg8QWRkQ3VzdG9tR29hbFxyXG4gICAgICBvblNhdmU9e2FzeW5jIChsZWFybmluZ0dvYWw6IHN0cmluZykgPT4ge1xyXG4gICAgICAgIGlmICghbGVhcm5pbmdHb2FsKSB0aHJvdyBuZXcgRXJyb3IgKHRoaXMuY29udGV4dC5pbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOid3ZWVrcGxhbm5lci5lbXB0eUxlYXJuaW5nR29hbEVycicsIGRlZmF1bHRNZXNzYWdlOiAnTMOkcmFuZGVtw6VsZXQga2FuIGludGUgdmFyYSB0b210J30pKTtcclxuICAgICAgICBpZiAoIXRoaXMuc3RhdGUuc2F2aW5nKSB7XHJcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgc2F2aW5nOiB0cnVlIH0pO1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGRDdXN0b21Hb2FsKGxlYXJuaW5nR29hbCk7XHJcbiAgICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgc2F2aW5nOiBmYWxzZSB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2coKTtcclxuICAgICAgICB9XHJcbiAgICAgIH19IC8+KTtcclxuICB9XHJcblxyXG4gIG9wZW5BZGRPd25UYXNrRGlhbG9nKGNvdXJzZU5hbWU6IHN0cmluZywgbGVhcm5pbmdHb2FsTmFtZTogc3RyaW5nKSB7XHJcbiAgICB0aGlzLm9wZW5EaWFsb2coPEFkZEN1c3RvbVRhc2tcclxuICAgICAgaXNUYXNrPXshY291cnNlTmFtZX1cclxuICAgICAgb25TYXZlPXthc3luYyAobmFtZTogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nLCB1cmw6IHN0cmluZykgPT4ge1xyXG4gICAgICAgIGlmICghbmFtZSkgdGhyb3cgbmV3IEVycm9yICh0aGlzLmNvbnRleHQuaW50bC5mb3JtYXRNZXNzYWdlKHtpZDond2Vla3BsYW5uZXIubmFtZUNhbm5vdEJlRW1wdHknLCBkZWZhdWx0TWVzc2FnZTogJ05hbW5ldCBrYW4gaW50ZSB2YXJhIHRvbXQnfSkpO1xyXG4gICAgICAgIGlmICghdGhpcy5zdGF0ZS5zYXZpbmcpIHtcclxuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBzYXZpbmc6IHRydWUgfSk7XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFkZEN1c3RvbVRhc2soY291cnNlTmFtZSwgbGVhcm5pbmdHb2FsTmFtZSwgbmFtZSwgZGVzY3JpcHRpb24sIHVybCk7XHJcbiAgICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgc2F2aW5nOiBmYWxzZSB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2coKTtcclxuICAgICAgICB9XHJcbiAgICAgIH19IC8+KTtcclxuICB9XHJcblxyXG4gIGVkaXRUYXNrKHVzZXJUYXNrOiBVc2VyVGFzaykge1xyXG4gICAgdGhpcy5vcGVuRGlhbG9nKDxFZGl0VXNlclRhc2tcclxuICAgICAgdXNlclRhc2tzUmVwbz17dGhpcy5wcm9wcy5lbnYudXNlclRhc2tzUmVwb31cclxuICAgICAgdXNlclRhc2s9e3VzZXJUYXNrfVxyXG4gICAgICBvblVwZGF0ZT17YXN5bmMgKHVwZGF0ZXI6ICh1dDogVXNlclRhc2spID0+IHZvaWQpID0+IHtcclxuICAgICAgICBjb25zdCB0ZXN0ID0gey4uLnVzZXJUYXNrfTtcclxuICAgICAgICB1cGRhdGVyKHRlc3QpO1xyXG4gICAgICAgIGlmICghdGVzdC5uYW1lKSB0aHJvdyBuZXcgRXJyb3IgKHRoaXMuY29udGV4dC5pbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOid3ZWVrcGxhbm5lci5uYW1lTXVzdE5vdEJlRW1wdHknLCBkZWZhdWx0TWVzc2FnZTogJ05hbW5ldCBmw6VyIGludGUgdmFyYSB0b210J30pKTtcclxuICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKCk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5wcm9wcy5lbnYudXNlclRhc2tzUmVwby51cGRhdGUoW3VzZXJUYXNrXSwgdXBkYXRlcik7XHJcbiAgICAgIH19XHJcbiAgICAgIG9uRGVsZXRlPXthc3luYyBpZCA9PiB7XHJcbiAgICAgICAgdGhpcy5jbG9zZURpYWxvZygpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMucHJvcHMuZW52LnVzZXJUYXNrc1JlcG8uZGVsZXRlKFtpZF0pO1xyXG4gICAgICB9fVxyXG4gICAgICBvcGVuRGlhbG9nPXtkaWFsb2c9PnRoaXMub3BlbkRpYWxvZyhkaWFsb2cpfVxyXG4gICAgICBjbG9zZURpYWxvZz17KCk9PnRoaXMuY2xvc2VEaWFsb2coKX1cclxuICAgIC8+KTtcclxuICB9XHJcblxyXG4gIGVkaXRTdWJUYXNrKHVzZXJUYXNrOiBVc2VyVGFzaywgc3ViVGFzazogVXNlclN1YlRhc2spIHtcclxuICAgIHRoaXMub3BlbkRpYWxvZyg8QWRkT3JFZGl0U3ViVGFza1xyXG4gICAgICB1c2VyVGFza3NSZXBvPXt0aGlzLnByb3BzLmVudi51c2VyVGFza3NSZXBvfVxyXG4gICAgICBtb2RlPVwiZWRpdFwiXHJcbiAgICAgIHVzZXJUYXNrPXt1c2VyVGFza31cclxuICAgICAgc3ViVGFzaz17c3ViVGFza31cclxuICAgICAgY2xvc2VEaWFsb2c9eygpPT50aGlzLmNsb3NlRGlhbG9nKCl9XHJcbiAgICAvPik7XHJcbiAgfVxyXG5cclxuICBjbG9zZURpYWxvZygpIHtcclxuICAgIHRoaXMuc2V0U3RhdGUoeyBkaWFsb2dzOiB0aGlzLnN0YXRlLmRpYWxvZ3Muc2xpY2UoMCwgdGhpcy5zdGF0ZS5kaWFsb2dzLmxlbmd0aCAtIDEpIH0pO1xyXG4gIH1cclxuXHJcblxyXG5cclxuICBhc3luYyBhZGRDdXN0b21Hb2FsKGxlYXJuaW5nR29hbDogc3RyaW5nKSB7XHJcbiAgICBsZXQgbGF0ZXN0VGltZVN0YW1wID0gTWF0aC5tYXguYXBwbHkoXHJcbiAgICAgIE1hdGgubWF4LFxyXG4gICAgICBbdGhpcy5zdGF0ZS53ZWVrRGF0ZV0uY29uY2F0KHRoaXMuc3RhdGUudXNlclRhc2tzLm1hcCh0ID0+IHQuZGF0ZVRpbWUpKSk7XHJcblxyXG4gICAgYXdhaXQgdGhpcy5wcm9wcy5lbnYudXNlclRhc2tzUmVwby5pbnNlcnQoW3tcclxuICAgICAgaWQ6IGNyZWF0ZVVVSUQoKSxcclxuICAgICAgbGVhcm5pbmdHb2FsLFxyXG4gICAgICBkYXRlVGltZTogbGF0ZXN0VGltZVN0YW1wICsgMjAwMFxyXG4gICAgfV0pO1xyXG5cclxuICAgIGF3YWl0IHRoaXMucHJvcHMuZW52LnVzZXJUYXNrc1JlcG8uc2V0V2Vla1BsYW5uZXJCb3hPcGVuKFwiXCIsIHRydWUpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgcmVtb3ZlTGVhcm5pbmdHb2FsKGxlYXJuaW5nR29hbDogVmlydHVhbExlYXJuaW5nR29hbCkge1xyXG4gICAgaWYgKGxlYXJuaW5nR29hbC50YXNrcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGlmICghY29uZmlybSh0aGlzLmNvbnRleHQuaW50bC5mb3JtYXRNZXNzYWdlKHtpZDond2Vla3BsYW5uZXIuY29uZmlybVJlbW92ZUxlYXJuaW5nT2JqZWN0aXZlcycsIGRlZmF1bHRNZXNzYWdlOiAnVGEgYm9ydCBsw6RyYW5kZW3DpWwgc2FtdCB7bGVhcm5pbmdHb2Fsc051bWJlcn0gdXBwZ2lmdGVyPyd9LCB7bGVhcm5pbmdHb2Fsc051bWJlcjogbGVhcm5pbmdHb2FsLnRhc2tzLmxlbmd0aH0pKSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgYXdhaXQgdGhpcy5wcm9wcy5lbnYudXNlclRhc2tzUmVwby5kZWxldGUobGVhcm5pbmdHb2FsLmFsbFRhc2tzLm1hcCh0ID0+IHQuaWQpKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGFkZEN1c3RvbVRhc2soY291cnNlTmFtZTogc3RyaW5nLCBsZWFybmluZ0dvYWw6IHN0cmluZywgbmFtZTogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nLCB1cmw6IHN0cmluZykge1xyXG4gICAgbGV0IGxhdGVzdFRpbWVTdGFtcCA9IE1hdGgubWF4LmFwcGx5KFxyXG4gICAgICBNYXRoLm1heCxcclxuICAgICAgW3RoaXMuc3RhdGUud2Vla0RhdGVdLmNvbmNhdCh0aGlzLnN0YXRlLnVzZXJUYXNrcy5tYXAodCA9PiB0LmRhdGVUaW1lKSkpO1xyXG5cclxuICAgIC8qY29uc3QgZW1wdHlMZWFybmluZ0dvYWxQbGFjZWhvbGRlciA9IHRoaXMuc3RhdGUudXNlclRhc2tzLmZpbmQodXQgPT5cclxuICAgICAgdXQubmFtZSA9PSBudWxsICYmXHJcbiAgICAgICF1dC5jb3Vyc2VOYW1lICYmXHJcbiAgICAgIHV0LmxlYXJuaW5nR29hbCA9PT0gbGVhcm5pbmdHb2FsKTtcclxuXHJcbiAgICBpZiAoZW1wdHlMZWFybmluZ0dvYWxQbGFjZWhvbGRlcikge1xyXG4gICAgICAvLyBIaWphY2sgbGVhcm5pbmctZ29hbCBwbGFjZWhvbGRlciBhbmQgbWFrZSBpdCB0aGUgcmVhbCB0YXNrLlxyXG4gICAgICAvLyBUaGlzIHdpbGwgbWFrZSB0aGUgbGVhcm5pbmcgZ29hbCBkaXNhcHBlYXIgb25jZSB0aGlzIHRhc2tcclxuICAgICAgLy8gaXMgZGVsZXRlZC5cclxuICAgICAgYXdhaXQgdXNlclRhc2tzUmVwby51cGRhdGUoW2VtcHR5TGVhcm5pbmdHb2FsUGxhY2Vob2xkZXJdLCB1dCA9PiB7XHJcbiAgICAgICAgT2JqZWN0LmFzc2lnbih1dCwgeyBuYW1lLCBkZXNjcmlwdGlvbiwgdXJsIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7Ki9cclxuICAgICAgLy8gQWRkIGFub3RoZXIgdGFzayB0byBzYW1lIGxlYXJuaW5nLWdvYWxcclxuICAgICAgYXdhaXQgdGhpcy5wcm9wcy5lbnYudXNlclRhc2tzUmVwby5pbnNlcnQoW3tcclxuICAgICAgICBpZDogY3JlYXRlVVVJRCgpLFxyXG4gICAgICAgIGRhdGVUaW1lOiBsYXRlc3RUaW1lU3RhbXAgKyAyMDAwLFxyXG4gICAgICAgIGNvdXJzZU5hbWUsXHJcbiAgICAgICAgbGVhcm5pbmdHb2FsLFxyXG4gICAgICAgIG5hbWUsXHJcbiAgICAgICAgZGVzY3JpcHRpb24sXHJcbiAgICAgICAgdXJsXHJcbiAgICAgIH1dKTtcclxuICAgIC8vfVxyXG4gIH1cclxuXHJcbiAgc2V0SXNPcGVuKGNvdXJzZU5hbWU6IHN0cmluZywgaXNPcGVuOiBib29sZWFuKSB7XHJcbiAgICB0aGlzLnByb3BzLmVudi51c2VyVGFza3NSZXBvLnNldFdlZWtQbGFubmVyQm94T3Blbihjb3Vyc2VOYW1lLCBpc09wZW4pO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgc2V0VGFza0RvbmUodGFzazogVXNlclRhc2ssIGRvbmU6IGJvb2xlYW4pIHtcclxuICAgIGF3YWl0IHRoaXMucHJvcHMuZW52LnVzZXJUYXNrc1JlcG8uc2V0VGFza0RvbmVTdGF0ZSh0YXNrLCBkb25lKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHNldFN1YlRhc2tEb25lKHRhc2s6IFVzZXJUYXNrLCBzdWJUYXNrOiBVc2VyU3ViVGFzaywgZG9uZTogYm9vbGVhbikge1xyXG4gICAgYXdhaXQgdGhpcy5wcm9wcy5lbnYudXNlclRhc2tzUmVwby5zZXRTdWJUYXNrRG9uZVN0YXRlKHRhc2ssIHN1YlRhc2suaWQsIGRvbmUpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgY29weUZyb21QcmV2aW91c1dlZWsoKSB7XHJcbiAgICBhd2FpdCB0aGlzLnNldFN0YXRlKHtpc0NvcHlpbmdUYXNrczogdHJ1ZX0pO1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgeyB1c2VyVGFza3MsIG9wZW5Db3Vyc2VzLCB3ZWVrRGF0ZSB9ID0gdGhpcy5zdGF0ZTtcclxuXHJcbiAgICAgIGNvbnN0IHByZXZXZWVrTm8gPSBnZXRBZGp1c3RlZFdlZWsgKG1vbWVudCh3ZWVrRGF0ZSkuYWRkKC0xLCAnd2VlaycpLCApO1xyXG4gICAgICBjb25zdCBwcmV2S0VEV2VlayA9IEtFRFdlZWsobW9tZW50KHdlZWtEYXRlKS55ZWFyKCksIHByZXZXZWVrTm8pO1xyXG4gICAgICAvLyBSZWFkIGxhc3Qgd2VlaydzIGdvYWxzIGFuZCB0YXNrc1xyXG4gICAgICBsZXQgcHJldlRhc2tzID0gYXdhaXQgdGhpcy5wcm9wcy5lbnYua2VkQmFja2VuZENsaWVudC5saXN0PFVzZXJUYXNrPihcInVzZXJ0YXNrc1wiLCB7XHJcbiAgICAgICAgZnJvbTogcHJldktFRFdlZWsubm90QmVmb3JlLFxyXG4gICAgICAgIHRvOiBwcmV2S0VEV2Vlay5ub3RBZnRlcixcclxuICAgICAgICByb2xlOiBcIlVTRVJcIixcclxuICAgICAgICBpbmNsdWRlOiBbXCJ0YXNrXCIsIFwiY291cnNlXCIsIFwiYWNsXCJdLFxyXG4gICAgICAgIGZsYWdzOiBbXCJpbmNsdWRlSWRzT25seVwiXVxyXG4gICAgICB9KTtcclxuICAgICAgcHJldlRhc2tzID0gcHJldlRhc2tzXHJcbiAgICAgICAgLmZpbHRlcihwcmV2VGFzayA9PiAhcHJldlRhc2suZG9uZSkgIC8vIERvbid0IGNvcHkgZG9uZSB0YXNrc1xyXG4gICAgICAgIC5maWx0ZXIocHJldlRhc2sgPT4gISFwcmV2VGFzay5uYW1lKSAvLyBEb24ndCBjb3B5IGVtcHR5IGxlYXJuaW5nIGdvYWxzXHJcbiAgICAgICAgLmZpbHRlcihwcmV2VGFzayA9PiAhdXNlclRhc2tzLnNvbWUodGFza09mQ3VycmVudFdlZWsgPT5cclxuICAgICAgICAgIHRhc2tPZkN1cnJlbnRXZWVrLm5hbWUgPT09IHByZXZUYXNrLm5hbWUgJiZcclxuICAgICAgICAgIHRhc2tPZkN1cnJlbnRXZWVrLmxlYXJuaW5nR29hbCA9PT0gcHJldlRhc2subGVhcm5pbmdHb2FsICYmXHJcbiAgICAgICAgICB0YXNrT2ZDdXJyZW50V2Vlay5jb3Vyc2VOYW1lID09PSBwcmV2VGFzay5jb3Vyc2VOYW1lKSk7IC8vIElnbm9yZSBpZGVudGljYWwgdGFza3MgKGFscmVhZHkgY29waWVkKVxyXG5cclxuICAgICAgLy8gTm93IGNyZWF0ZSBjb3BpZXMgYnV0IHBsYWNlIHRoZW0gaW4gdGhlIGN1cnJlbnQgd2Vlay5cclxuICAgICAgbGV0IGxhdGVzdFRpbWVTdGFtcCA9IE1hdGgubWF4LmFwcGx5KE1hdGgubWF4LCBbd2Vla0RhdGVdLmNvbmNhdCh1c2VyVGFza3MubWFwKHQgPT4gdC5kYXRlVGltZSkpKTtcclxuXHJcbiAgICAgIGNvbnN0IGNvcGllcyA9IHByZXZUYXNrcy5zb3J0KGNvbXBhcmVQcm9wKFwiZGF0ZVRpbWVcIikpLm1hcCh0YXNrID0+IHtcclxuICAgICAgICBjb25zdCBjb3B5OiBVc2VyVGFzayA9IHsgLi4udGFzaywgZGF0ZVRpbWU6IGxhdGVzdFRpbWVTdGFtcCArPSAxMDAwIH07XHJcbiAgICAgICAgY29weS5pZCA9IGNyZWF0ZVVVSUQoKTtcclxuICAgICAgICBpZiAoY29weS5zdWJUYXNrcykge1xyXG4gICAgICAgICAgY29weS5zdWJUYXNrcyA9IGNvcHkuc3ViVGFza3MuZmlsdGVyKHN0ID0+ICFzdC5kb25lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGVsZXRlIGNvcHkuJGV0YWc7XHJcbiAgICAgICAgcmV0dXJuIGNvcHk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gU3RvcmUgaXRcclxuICAgICAgYXdhaXQgdGhpcy5wcm9wcy5lbnYudXNlclRhc2tzUmVwby5pbnNlcnQoY29waWVzKTtcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe2lzQ29weWluZ1Rhc2tzOiBmYWxzZX0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0SGVhZGVyVGl0bGUoKXtcclxuICAgIHJldHVybiA8aDQ+PEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJ3ZWVrcGxhbm5lci5sb2dCb29rXCIgIGRlZmF1bHRNZXNzYWdlPVwiTG9nZ2Jva1wiLz48L2g0PjtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHdlZWtOdW1iZXIgPSBtb21lbnQodGhpcy5zdGF0ZS53ZWVrRGF0ZSkud2VlaygpO1xyXG4gICAgY29uc3Qgc2hvd1Byb2dyZXNzQ2hhcnRzID0gZmVhdHVyZXMud2Vla3BsYW5uZXJDaGFydHM7XHJcbiAgICAvL2NvbnNvbGUubG9nKFwiV2Vla3lkYXRlOiBcIiAgKyBuZXcgRGF0ZSh0aGlzLnN0YXRlLndlZWtEYXRlKSArIFwiIHdoaWNoIGlzIHdlZWsgbm8gXCIgKyB3ZWVrTnVtYmVyKTtcclxuICAgIGNvbnN0IGN1cnJlbnRXZWVrID0gbW9tZW50KCkud2VlaygpO1xyXG4gICAgY29uc3QgdGFza1NldHMgPSByZWZpbmUodGhpcy5zdGF0ZS51c2VyVGFza3MpO1xyXG4gICAgY29uc3QgeyBkaWFsb2dzLCB3ZWVrVGV4dHNVVCwgc3RyYXRlZ3ksIGFzc2Vzc21lbnQsIGlzTG9hZGluZywgaXNDb3B5aW5nVGFza3MgfSA9IHRoaXMuc3RhdGU7XHJcbiAgICBjb25zdCBpc1NhdmluZyA9IHdlZWtUZXh0c1VUICYmICh3ZWVrVGV4dHNVVC4kbWV0YSA9PT0gJ2FkZGluZycgfHwgd2Vla1RleHRzVVQuJG1ldGEgPT09ICd1cGRhdGluZycpO1xyXG4gICAgY29uc3QgaXNTdHJhdGVneUVkaXRlZCA9ICEhd2Vla1RleHRzVVQgJiYgKHN0cmF0ZWd5ICE9PSB3ZWVrVGV4dHNVVC53ZWVrVGV4dHMuc3RyYXRlZ3kpO1xyXG4gICAgY29uc3QgaXNBc3Nlc3NtZW50RWRpdGVkID0gISF3ZWVrVGV4dHNVVCAmJiAoYXNzZXNzbWVudCAhPT0gd2Vla1RleHRzVVQud2Vla1RleHRzLmFzc2Vzc21lbnQpO1xyXG4gICAgY29uc3QgZW5hYmxlU2F2ZUJ1dHRvbiA9ICFpc1NhdmluZyAmJiAoaXNTdHJhdGVneUVkaXRlZCB8fCBpc0Fzc2Vzc21lbnRFZGl0ZWQpO1xyXG5cclxuICAgIHZhciBjaGFydFRhc2tzID0gZ2V0V2Vla3BsYW5uZXJQcm9ncmVzc0RhdGEodGFza1NldHMpO1xyXG5cclxuICAgIHZhciBwZXJjZW50YWdlID0gdGFza1NldHMubGVuZ3RoID4gMCA/IGNoYXJ0VGFza3MuY29tcGxldGVkVGFza3MgLyBjaGFydFRhc2tzLnRvdGFsTnVtYmVyT2ZUYXNrcyAqIDEwMCA6IDA7XHJcbiAgICByZXR1cm4gPGRpdj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9e2BrZWRfYm94ZWQgd2Vla1BsYW5uZXIke3dlZWtOdW1iZXIgPT09IGN1cnJlbnRXZWVrID8gXCIgY3VycmVudFdlZWtcIiA6IFwiXCJ9YH1cclxuICAgICAgICBvbktleURvd249e2V2ID0+IHtcclxuICAgICAgICAgIGlmIChldi53aGljaCA9PT0gODMgJiYgZXYuY3RybEtleSkge1xyXG4gICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBpZiAoIWlzU2F2aW5nICYmIHRoaXMuaXNXZWVrVGV4dHNFZGl0ZWQoKSkge1xyXG4gICAgICAgICAgICAgIHRoaXMud2Vla1RleHRzU2F2aW5nSm9iLnRyaWdnZXJDaGFuZ2UoMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9fT5cclxuICAgICAgICB7c2hvd1Byb2dyZXNzQ2hhcnRzICYmIHRoaXMuZ2V0SGVhZGVyVGl0bGUoKX1cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIndpZGdldHNcIj5cclxuICAgICAgICAgIHtzaG93UHJvZ3Jlc3NDaGFydHMgPyA8ZGl2IGNsYXNzTmFtZT1cInByb2dyZXNzQmFyXCI+PFByb2dyZXNzIHBlcmNlbnRhZ2UgPSB7cGVyY2VudGFnZX0vPjwvZGl2PiA6IHRoaXMuZ2V0SGVhZGVyVGl0bGUoKX1cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgd2Vla1NlbGVjdGB9PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtXCI+XHJcbiAgICAgICAgICAgICAgPHA+PEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJ3ZWVrcGxhbm5lci53ZWVrTnVtYmVyXCIgdmFsdWVzPXt7d2Vla051bWJlcjogd2Vla051bWJlcn19IGRlZmF1bHRNZXNzYWdlPVwiVmVja2Ege3dlZWtOdW1iZXJ9XCIvPjwvcD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW1cIj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ0bi1ncm91cFwiPlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJidG5cIiBvbkNsaWNrPXsoKSA9PiB0aGlzLnByZXZXZWVrKCl9PlxyXG4gICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1hbmdsZS1sZWZ0XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPlxyXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImJ0blwiIG9uQ2xpY2s9eygpID0+IHRoaXMubmV4dFdlZWsoKX0+XHJcbiAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLWFuZ2xlLXJpZ2h0XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPlxyXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgIHt0YXNrU2V0cy5sZW5ndGggPiAwICYmIDxociAvPn1cclxuXHJcbiAgICAgICAge3Rhc2tTZXRzLm1hcChwcm9wcyA9PlxyXG4gICAgICAgICAgPFVzZXJUYXNrc0JveFxyXG4gICAgICAgICAgICBrZXk9e3Byb3BzLmNvdXJzZU5hbWV9XHJcbiAgICAgICAgICAgIHsuLi5wcm9wc31cclxuICAgICAgICAgICAgY291cnNlTmFtZT17cHJvcHMuY291cnNlTmFtZX1cclxuICAgICAgICAgICAgbGVhcm5pbmdHb2Fscz17cHJvcHMubGVhcm5pbmdHb2Fsc31cclxuICAgICAgICAgICAgdmlld0NvdXJzZVVybD17dGhpcy5wcm9wcy52aWV3Q291cnNlVXJsfVxyXG4gICAgICAgICAgICBvcGVuQ291cnNlcz17dGhpcy5zdGF0ZS5vcGVuQ291cnNlc31cclxuICAgICAgICAgICAgYWRkT3duVGFzaz17KGNvdXJzZU5hbWU6IHN0cmluZywgbGVhcm5pbmdHb2FsTmFtZTogc3RyaW5nKSA9PiB0aGlzLm9wZW5BZGRPd25UYXNrRGlhbG9nKGNvdXJzZU5hbWUsIGxlYXJuaW5nR29hbE5hbWUpfVxyXG4gICAgICAgICAgICBzZXRJc09wZW49e3RoaXMuc2V0SXNPcGVuLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgIHNldFRhc2tEb25lPXt0aGlzLnNldFRhc2tEb25lLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgIHNldFN1YlRhc2tEb25lPXt0aGlzLnNldFN1YlRhc2tEb25lLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgIGVkaXRUYXNrPXt0YXNrID0+IHRoaXMuZWRpdFRhc2sodGFzayl9XHJcbiAgICAgICAgICAgIGVkaXRTdWJUYXNrPXsodGFzaywgc3ViVGFzaykgPT4gdGhpcy5lZGl0U3ViVGFzayh0YXNrLCBzdWJUYXNrKX1cclxuICAgICAgICAgICAgcmVtb3ZlTGVhcm5pbmdHb2FsPXtsZyA9PiB0aGlzLnJlbW92ZUxlYXJuaW5nR29hbChsZyl9IFxyXG4gICAgICAgICAgICBkaXNwbGF5UHJvZ3Jlc3MgPSB7c2hvd1Byb2dyZXNzQ2hhcnRzfVxyXG4gICAgICAgICAgICBwcm9ncmVzc0RhdGEgPSB7Y2hhcnRUYXNrcy5zdWJqZWN0RGF0YVtwcm9wcy5jb3Vyc2VOYW1lXX0gLz4pfVxyXG5cclxuICAgICAgICA8aHIgLz5cclxuXHJcbiAgICAgICAge2lzTG9hZGluZyA/IDxTcGlubmVyIC8+IDogPGRpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnRuXCIgb25DbGljaz17ZXYgPT4gdGhpcy5vcGVuQWRkR29hbERpYWxvZygpfT5cclxuICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtbGlzdC1hbHRcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XHJcbiAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwid2Vla3BsYW5uZXIubGVhcm5pbmdHb2FsXCIgZGVmYXVsdE1lc3NhZ2U9XCJFZ2V0IGzDpHJhbmRlbcOlbFwiLz5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidG5cIiBzdHlsZT17aXNDb3B5aW5nVGFza3MgPyB7b3BhY2l0eTogMC41fSA6IHVuZGVmaW5lZH0gb25DbGljaz17ZXYgPT4gKCFpc0NvcHlpbmdUYXNrcykgJiYgdGhpcy5jb3B5RnJvbVByZXZpb3VzV2VlaygpfT5cclxuICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtY2xvbmVcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XHJcbiAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwid2Vla3BsYW5uZXIuY29weVByZXZpb3VzV2Vla1Rha3NcIiBkZWZhdWx0TWVzc2FnZT1cIktvcGllcmEgZWoga2xhcmEgZnLDpW4gZsO2cmVnw6VlbmRlIHZlY2thXCIvPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8T3BlbkNsb3NlQm94XHJcbiAgICAgICAgICAgIHRpdGxlPXs8aDU+PEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJ3ZWVrcGxhbm5lci5zdHJhdGVneUFuZEV2YWx1YXRpb25cIiBkZWZhdWx0TWVzc2FnZT1cIlN0cmF0ZWdpICYgVXR2w6RyZGVyaW5nXCIvPjwvaDU+fVxyXG4gICAgICAgICAgICBoZWFkZXJPcGVuPXt0aGlzLnN0YXRlLm9wZW5Db3Vyc2VzW1wiU3RyYXRVdHZcIl19XHJcbiAgICAgICAgICAgIG9uT3BlbkNsb3NlPXtiZWNhbWVPcGVuID0+IHRoaXMuc2V0SXNPcGVuKFwiU3RyYXRVdHZcIiwgYmVjYW1lT3Blbil9XHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIDxoMz48Rm9ybWF0dGVkTWVzc2FnZSBpZD1cIndlZWtwbGFubmVyLnN0cmF0ZWd5XCIgZGVmYXVsdE1lc3NhZ2U9XCJTdHJhdGVnaVwiLz48L2gzPlxyXG4gICAgICAgICAgICA8cD48Rm9ybWF0dGVkTWVzc2FnZSBpZD1cIndlZWtwbGFubmVyLnN0cmF0ZWd5RGVzY3JpcHRpb25cIiBkZWZhdWx0TWVzc2FnZT1cIkh1ciBqYWcgc2thIGfDtnJhIGbDtnIgYXR0IGzDpHJhIG1pZy5cIi8+PC9wPlxyXG4gICAgICAgICAgICA8aHIvPlxyXG4gICAgICAgICAgICA8dGV4dGFyZWFcclxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3ZWVrcGxhbm5lci10ZXh0YXJlYVwiXHJcbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e3RoaXMucHJvcHMuZW52LnR1dG9yZWR9XHJcbiAgICAgICAgICAgICAgdmFsdWU9e3N0cmF0ZWd5ICYmIHN0cmF0ZWd5LnN1YnN0cigwLCBNQVhfU1RSQVRFR1lfTEVOR1RIKX1cclxuICAgICAgICAgICAgICBvbkNoYW5nZT17ZXYgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c3RyYXRlZ3k6IChldi50YXJnZXQudmFsdWUgfHwgJycpLnN1YnN0cigwLCBNQVhfU1RSQVRFR1lfTEVOR1RIKX0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy53ZWVrVGV4dHNTYXZpbmdKb2IudHJpZ2dlckNoYW5nZSg1MDApO1xyXG4gICAgICAgICAgICAgIH19IC8+XHJcblxyXG4gICAgICAgICAgICA8aDM+PEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJ3ZWVrcGxhbm5lci5ldmFsdWF0aW9uXCIgZGVmYXVsdE1lc3NhZ2U9XCJVdHbDpHJkZXJpbmdcIi8+PC9oMz5cclxuICAgICAgICAgICAgPHA+PEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJ3ZWVrcGxhbm5lci5ldmFsdWF0aW9uRGVzY3JpcHRpb25cIiBkZWZhdWx0TWVzc2FnZT1cIlJlZmxla3Rpb24ga3JpbmcgZGluIGFyYmV0c2luc2F0cyBvY2ggZGluYSB2YWxkYSBzdHJhdGVnaWVyIHVuZGVyIHZlY2thbi5VdHbDpHJkZXJhIGkgZsO2cmjDpWxsYW5kZSB0aWxsIGRpbmEgbcOlbC5cIi8+PC9wPlxyXG4gICAgICAgICAgICA8aHIvPlxyXG4gICAgICAgICAgICA8dGV4dGFyZWFcclxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3ZWVrcGxhbm5lci10ZXh0YXJlYVwiXHJcbiAgICAgICAgICAgICAgdmFsdWU9e2Fzc2Vzc21lbnQgJiYgYXNzZXNzbWVudC5zdWJzdHIoMCwgTUFYX0FTU0VTU01FTlRfTEVOR1RIKX1cclxuICAgICAgICAgICAgICBkaXNhYmxlZD17dGhpcy5wcm9wcy5lbnYudHV0b3JlZH1cclxuICAgICAgICAgICAgICBvbkNoYW5nZT17ZXYgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7YXNzZXNzbWVudDogKGV2LnRhcmdldC52YWx1ZSB8fCAnJykuc3Vic3RyKDAsIE1BWF9BU1NFU1NNRU5UX0xFTkdUSCl9KVxyXG4gICAgICAgICAgICAgICAgdGhpcy53ZWVrVGV4dHNTYXZpbmdKb2IudHJpZ2dlckNoYW5nZSg1MDApO1xyXG4gICAgICAgICAgICAgIH0gfS8+XHJcbiAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidG5cIlxyXG4gICAgICAgICAgICAgIHRhYkluZGV4PXswfVxyXG4gICAgICAgICAgICAgIHN0eWxlPXtlbmFibGVTYXZlQnV0dG9uID8ge30gOiB7b3BhY2l0eTogMC41fX1cclxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKT0+IWlzU2F2aW5nICYmIHRoaXMud2Vla1RleHRzU2F2aW5nSm9iLnRyaWdnZXJDaGFuZ2UoMCl9PlxyXG4gICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtZmxvcHB5LW9cIiBhcmlhLWhpZGRlbj1cInRydWVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICB7ZW5hYmxlU2F2ZUJ1dHRvbiA/IDxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwiY29tbW9uLnNhdmVcIiBkZWZhdWx0TWVzc2FnZT1cIiBTcGFyYVwiLz4gOiA8Rm9ybWF0dGVkTWVzc2FnZSBpZD1cImNvbW1vbi5zYXZlZFwiIGRlZmF1bHRNZXNzYWdlPVwiIFNwYXJhZFwiLz59XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvT3BlbkNsb3NlQm94PlxyXG5cclxuICAgICAgICA8L2Rpdj59XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8RGlhbG9nc1xyXG4gICAgICAgIGRpYWxvZ3M9e2RpYWxvZ3N9XHJcbiAgICAgICAgcG9wRGlhbG9nPXsoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoXHJcbiAgICAgICAgICAgICAgKHtkaWFsb2dzfSkgPT4gKHsgZGlhbG9nczogZGlhbG9ncy5zbGljZSgwLCBkaWFsb2dzLmxlbmd0aCAtIDEpIH0pKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IC8+XHJcbiAgICA8L2Rpdj5cclxuICB9XHJcbn0iLCJpbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcblxyXG5leHBvcnQgdHlwZSBUZXJtID0gJ0FUJyB8ICdTVCc7IC8vIHNob3VsZCBiZSBjaGFuZ2VkIGludG8gRmlyc3QgVGVybSAvIFNlY29uZCBUZXJtXHJcbmV4cG9ydCB0eXBlIEFjYWRlbWljWWVhciA9IHN0cmluZzsgLy8gXCIyMDE2LzIwMTdcIiwgXCIyMDE3LzIwMThcIiwgLi4uXHJcbmV4cG9ydCB0eXBlIFNjaG9vbEdyYWRlID0gbnVtYmVyOyAvLyAwLTkgKGdydW5kc2tvbGEpLCAxMC0xMyAoZ3ltbmFzaXVtKVxyXG5leHBvcnQgdHlwZSBHcmFkZSA9ICdBJyB8ICdCJyB8ICdDJyB8ICdEJyB8ICdFJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVXNlciB7XHJcbiAgICB1c2VybmFtZT86IHN0cmluZztcclxuICAgIG1haWw6IHN0cmluZztcclxuICAgIGRpc3BsYXlOYW1lOiBzdHJpbmc7XHJcbiAgICByb2xlczogc3RyaW5nW107XHJcbiAgICBzY2hvb2xHcmFkZT86IG51bWJlcjtcclxuICAgIHNjaG9vbD86IHN0cmluZztcclxuICAgIHNjaG9vbFR5cGU/OiBzdHJpbmc7XHJcbiAgICB0dXRvckZvcj86IHN0cmluZztcclxuICAgIGdyb3Vwcz86IHN0cmluZ1tdO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEFjYWRlbWljWWVhclN0cnVjdHVyZVxyXG57XHJcbiBhY2FkZW1pY1llYXIgOiBBY2FkZW1pY1llYXI7XHJcbiBzdGFydERhdGU6IG1vbWVudC5Nb21lbnQ7XHJcbiBlbmREYXRlOiBtb21lbnQuTW9tZW50O1xyXG4gYWNhZGVtaWNTdGFydFdlZWs6IG51bWJlcjtcclxuIGFjYWRlbWljRW5kV2VlazogbnVtYmVyO1xyXG4gaG9saWRheXM6IHtzdGFydERhdGU6IHN0cmluZywgZW5kRGF0ZTogc3RyaW5nfVtdO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIExlYXJuaW5nTW9kdWxlVGFza3Mge1xyXG4gICAgbW9kdWxlTmFtZTogc3RyaW5nO1xyXG4gICAgdXJsPzogc3RyaW5nO1xyXG4gICAgc3ViamVjdDogU2Nob29sU3ViamVjdDtcclxuICAgIGNvbW1vblRhc2tzPzogTGVhcm5pbmdUYXNrW107XHJcbiAgICBsZWFybmluZ0dvYWxzOiBMZWFybmluZ0dvYWxbXTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBMZWFybmluZ0dvYWwge1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgdGFza3M/OiBMZWFybmluZ1Rhc2tbXTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBDdXN0b21Hb2FsIHtcclxuICBuYW1lOiBzdHJpbmcsXHJcbiAgdXJsOiBzdHJpbmcsXHJcbiAgY291cnNlOiBzdHJpbmcsXHJcbiAgZGVzY3JpcHRpb246IHN0cmluZ1xyXG59XHJcblxyXG5cclxuLypleHBvcnQgaW50ZXJmYWNlIExlYXJuaW5nR29hbCB7XHJcbiAgICBpZD86IHN0cmluZztcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIGNvdXJzZUlkPzogc3RyaW5nO1xyXG4gICAgc3ViamVjdElkPzogc3RyaW5nO1xyXG59Ki9cclxuXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIExlYXJuaW5nVGFzayB7XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICB1cmw/OiBzdHJpbmc7XHJcbiAgICBkZXNjcmlwdGlvbj86IHN0cmluZztcclxuICAgIGRvbmU/OiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIExlYXJuaW5nQ291cnNlIHtcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIHVybD86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTY2hvb2xTdWJqZWN0IHtcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIGNvdXJzZTogTGVhcm5pbmdDb3Vyc2U7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDb3Vyc2Uge1xyXG4gICAgLy9TY2hlbWE6IFwiW3llYXIrdGVybStzY2hvb2xZZWFyK25hbWVdLHNvcnRvcmRlclwiO1xyXG4gICAgaWQ/OiBzdHJpbmc7XHJcbiAgICAvL2FZZWFyOiBzdHJpbmc7IC8vIEFjYWRlbWljIFllYXIgLyBMw6Rzw6VyIC8gXCIyMDE2LzIwMTdcIiwgXCIyMDE3LzIwMThcIiwgLi4uXHJcbiAgICAvL3NjaG9vbEdyYWRlOiBudW1iZXI7IC8vIMOFcnNrdXJzICgwLTkgZ3J1bmRza29sYSwgMTAtMTMgZ3ltbmFzaXVtKS4gMTAwID0gZWogYnVuZGV0IHRpbGwgw6Vyc2t1cnMuXHJcbiAgICAvL3Rlcm0/OiBUZXJtOyAvLyBBVCAoQXV0dW1uIFRlcm0pIC8gU1QgKFNwcmluZyBUZXJtKVxyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgcG9pbnRzPzogbnVtYmVyO1xyXG4gICAgbW9kdWxlcz86IENvdXJzZU1vZHVsZVtdO1xyXG4gICAgbGVhcm5pbmdHb2Fscz86IExlYXJuaW5nR29hbFtdO1xyXG4gICAgdXJsPzogc3RyaW5nO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBDb3Vyc2VNb2R1bGUge1xyXG4gICAgaWQ/OiBzdHJpbmc7XHJcbiAgICBjb3Vyc2VJZDogc3RyaW5nO1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgcmVhZG9ubHkgdXJsOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVGFyZ2V0R3JhZGUge1xyXG4gICAgaWQ/OiBzdHJpbmc7XHJcbiAgICB1c2VyOiBzdHJpbmc7XHJcbiAgICBjb3Vyc2VJZD86IHN0cmluZztcclxuICAgIHN1YmplY3RJZD86IHN0cmluZztcclxuICAgIGFZZWFyPzogQWNhZGVtaWNZZWFyOyAvLyBMw6Rzw6VyLCB0ZXggXCIyMDE2LzIwMTdcIi4gbnVsbCBtZWFucyBmaW5hbCBnb2FsLlxyXG4gICAgdGVybT86IFRlcm07IC8vIG51bGwgbWVhbnMgZmluYWwgZ29hbC5cclxuICAgIGdyYWRlOiBHcmFkZTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBjb25zdCBmdXR1cmVBYmlsaXRpZXMgPSBbXHJcbiAgICBcIkzDpHJhIGF0dCBsw6RyYVwiLFxyXG4gICAgXCJTYW1hcmJldGFcIixcclxuICAgIFwiQWdlcmEgZ2xvYmFsdFwiLFxyXG4gICAgXCJWaXNhIGhhbmRsaW5nc2tyYWZ0XCIsXHJcbiAgICBcIlZhcmEgaW5ub3ZhdGl2XCIsXHJcbiAgICBcIkxldmEgZGlnaXRhbHRcIl07XHJcbiIsImltcG9ydCAnLi4vLi4vZ2xvYmFsLXNldHRlcnMvc2V0LWFsbCc7XHJcbmltcG9ydCBlbnYgZnJvbSAnLi4vLi4vZ2xvYmFscy9LRUQuZW52JztcclxuY29uc3QgYmVhcmVyUHJvbWlzZSA9IGVudi5iZWFyZXJQcm92aWRlci5nZXRCZWFyZXIoKTsgLy8gU3RhcnQgZ2V0dGluZyBiZWFyZXIgYXMgc29vbiBhcyBwb3NzaWJsZS5cclxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBzaG93RXJyb3IsIHNob3dJbmZvIH0gZnJvbSBcIi4uLy4uL3V0aWxzL3V0aWxzXCI7XHJcbmltcG9ydCB7IFNwaW5uZXIgfSBmcm9tIFwiLi4vLi4vY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci9zdWItY29tcG9uZW50cy9zcGlubmVyXCI7XHJcbmltcG9ydCB7IFN1YmplY3RQbGFubmVyVmlld2VyQXBwIH0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yJztcclxuaW1wb3J0IHsgTGFuZ3VhZ2VDb250ZXh0IH0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy91dGlsaXR5LWNvbXBvbmVudHMvTGFuZ3VhZ2VDb250ZXh0JztcclxuaW1wb3J0IHsgSW5qZWN0ZWRJbnRsUHJvcHMsIGluamVjdEludGwgfSBmcm9tICdyZWFjdC1pbnRsJztcclxuaW1wb3J0IHsgc2V0dXBJbnRsIH0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy91dGlsaXR5LWNvbXBvbmVudHMvU2V0dXBMYW5ndWFnZUludGwnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIGV4dGVuZHMgSW5qZWN0ZWRJbnRsUHJvcHN7XHJcbiAgZmVlZGJhY2tVcmw6IHN0cmluZztcclxufVxyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICBpc1Rva2VuTG9hZGVkOiBib29sZWFuO1xyXG59XHJcblxyXG5jbGFzcyBfS0VEQXBwQ291cnNlVmlld2VyS1MgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsU3RhdGU+IHtcclxuICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIGlzVG9rZW5Mb2FkZWQ6IGZhbHNlXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnRXaWxsTW91bnQoKSB7XHJcbiAgICBiZWFyZXJQcm9taXNlLnRoZW4oKCk9PntcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7aXNUb2tlbkxvYWRlZDogdHJ1ZX0pO1xyXG4gICAgfSkuY2F0Y2goZXJyID0+IHtcclxuICAgICAgc2hvd0Vycm9yKGVycik7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHtpbnRsfSA9IHRoaXMucHJvcHM7XHJcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5pc1Rva2VuTG9hZGVkID9cclxuICAgIDxMYW5ndWFnZUNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3tpbnRsfX0+XHJcbiAgICAgIDxTdWJqZWN0UGxhbm5lclZpZXdlckFwcCAvPlxyXG4gICAgPC9MYW5ndWFnZUNvbnRleHQuUHJvdmlkZXI+IDpcclxuICAgICAgPHA+PFNwaW5uZXIvPlYuZy4gdsOkbnRhLi4uIGF1dGVudGljZXJhci4uLjwvcD5cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBLRURBcHBDb3Vyc2VWaWV3ZXJLUyA9IHNldHVwSW50bChpbmplY3RJbnRsKF9LRURBcHBDb3Vyc2VWaWV3ZXJLUykpO1xyXG4iLCJpbXBvcnQgS0VEIGZyb20gJy4uLy4uL2dsb2JhbHMvS0VEJztcclxuaW1wb3J0ICogYXMgY29tcG9uZW50cyBmcm9tICcuL2FwcC5zcC5jbGllbnQnO1xyXG5LRUQuY29tcG9uZW50cyA9IHsuLi5LRUQuY29tcG9uZW50cywgLi4uY29tcG9uZW50c307XHJcbiIsImltcG9ydCB7IHBhcnNlUXVlcnlTdHJpbmcgfSBmcm9tICcuLi91dGlscy9xdWVyeS1zdHJpbmcnO1xyXG5pbXBvcnQgRmVhdHVyZURlc2NyaXB0aW9ucyBmcm9tICcuL2ZlYXR1cmUtZmxhZ3MuanNvbic7XHJcbmltcG9ydCB7IGNmZyB9IGZyb20gJy4uL2dsb2JhbHMvS0VELmNmZyc7XHJcblxyXG50eXBlIEZlYXR1cmVGbGFncyA9IHtyZWFkb25seSBbUCBpbiBrZXlvZiB0eXBlb2YgRmVhdHVyZURlc2NyaXB0aW9uc106IGJvb2xlYW59O1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBGZWF0dXJlcyBleHRlbmRzIEZlYXR1cmVGbGFncyB7fVxyXG5cclxuZXhwb3J0IGNsYXNzIEZlYXR1cmVzIHtcclxuICBwcml2YXRlIF9mZWF0dXJlczogRmVhdHVyZUZsYWdzO1xyXG4gIHByaXZhdGUgX2luaXRpYWxpemVkID0gZmFsc2U7XHJcblxyXG4gIGluaXQoKSB7XHJcbiAgICBpZiAodGhpcy5faW5pdGlhbGl6ZWQpIHJldHVybjtcclxuICAgIGxldCB0dXJuZWRPbkZlYXR1cmVzID0gKGNmZy5LRURfRkVBVFVSRVMgfHwgXCJcIikuc3BsaXQoJywnKS5tYXAobmFtZSA9PiBuYW1lLnRyaW0oKS50b0xvd2VyQ2FzZSgpKTtcclxuICAgIGNvbnN0IHF1ZXJ5ID0gcGFyc2VRdWVyeVN0cmluZyhsb2NhdGlvbi5zZWFyY2gsIHt0b0xvd2VyOiB0cnVlfSk7XHJcblxyXG4gICAgaWYgKHF1ZXJ5LnRlc3R2ZXJzaW9uKSB7XHJcbiAgICAgIHR1cm5lZE9uRmVhdHVyZXMgPSBbXCIqXCJdO1xyXG4gICAgfVxyXG4gICAgaWYgKHF1ZXJ5LmZlYXR1cmVzKSB7XHJcbiAgICAgIHR1cm5lZE9uRmVhdHVyZXMgPSBxdWVyeS5mZWF0dXJlc1xyXG4gICAgICAgIC5zcGxpdCgnLCcpXHJcbiAgICAgICAgLm1hcChmZWF0dXJlID0+IGZlYXR1cmUudHJpbSgpLnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgdHVybk9uQWxsID0gdHVybmVkT25GZWF0dXJlcy5pbmNsdWRlcygnKicpO1xyXG4gICAgdGhpcy5fZmVhdHVyZXMgPSB7fSBhcyBGZWF0dXJlRmxhZ3M7XHJcbiAgICBmb3IgKGNvbnN0IGZlYXR1cmVOYW1lIG9mIE9iamVjdC5rZXlzKEZlYXR1cmVEZXNjcmlwdGlvbnMpKSB7XHJcbiAgICAgIHRoaXMuX2ZlYXR1cmVzW2ZlYXR1cmVOYW1lXSA9IHR1cm5PbkFsbCB8fFxyXG4gICAgICAgIHR1cm5lZE9uRmVhdHVyZXMuaW5jbHVkZXMoZmVhdHVyZU5hbWUudG9Mb3dlckNhc2UoKSlcclxuICAgIH1cclxuICAgIHRoaXMuX2luaXRpYWxpemVkID0gdHJ1ZTsgICAgXHJcbiAgfVxyXG5cclxuICBjb25zdHJ1Y3RvciAoKSB7XHJcbiAgICBmb3IgKGNvbnN0IGZlYXR1cmVOYW1lIG9mIE9iamVjdC5rZXlzKEZlYXR1cmVEZXNjcmlwdGlvbnMpKSB7XHJcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBmZWF0dXJlTmFtZSwge1xyXG4gICAgICAgIGdldCgpIHtcclxuICAgICAgICAgIGlmICghdGhpcy5faW5pdGlhbGl6ZWQpIHRoaXMuaW5pdCgpO1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2ZlYXR1cmVzW2ZlYXR1cmVOYW1lXTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldCh2YWx1ZSkge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGZWF0dXJlIGZsYWdzIGNhbm5vdCBiZSBzZXQgaGVyZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBmZWF0dXJlcyA9IG5ldyBGZWF0dXJlcygpO1xyXG4iLCJleHBvcnQgKiBmcm9tICcuL2ZlYXR1cmVzJztcclxuIiwiaW1wb3J0IGNmZyBmcm9tICcuLi9nbG9iYWxzL0tFRC5jZmcnO1xyXG5cclxuZGVjbGFyZSB2YXIgcHJvY2VzczogYW55O1xyXG5cclxuY2ZnLkVOVklST05NRU5UID0gcHJvY2Vzcy5lbnYuRU5WSVJPTk1FTlQgYXMgXCJwcm9kdWN0aW9uXCIgfCBcImRldmVsb3BtZW50XCIgfCBcInRlc3RcIjtcclxuY2ZnLktFRF9BUElfVVJMID0gcHJvY2Vzcy5lbnYuS0VEX0FQSV9VUkw7IC8vIFwiaHR0cHM6Ly9rZWRiYWNrZW5kdGVzdC5henVyZXdlYnNpdGVzLm5ldC9hcGkvXCJcclxuY2ZnLkVEU19BUElfVVJMID0gcHJvY2Vzcy5lbnYuRURTX0FQSV9VUkw7IC8vIFwiaHR0cHM6Ly9lZHNwb3J0YWxvd2luYXBpLmF6dXJld2Vic2l0ZXMubmV0L2FwaS9cIlxyXG5jZmcuS0VEX1RPS0VOX1VSTCA9IHByb2Nlc3MuZW52LktFRF9UT0tFTl9VUkw7IC8vIFwiaHR0cHM6Ly9rZWRhdXRodGVzdC5henVyZXdlYnNpdGVzLm5ldC90b2tlblwiXHJcbmNmZy5LRURfQ0xJRU5UX0lEID0gcHJvY2Vzcy5lbnYuS0VEX0NMSUVOVF9JRDsgLy8gXCJkZXZjbGllbnRcIiwgXCJ0ZXN0Y2xpZW50XCIsIFwiLi4uXCJcclxuY2ZnLktFRF9DTElFTlRfU0VDUkVUID0gcHJvY2Vzcy5lbnYuS0VEX0NMSUVOVF9TRUNSRVQ7XHJcbmNmZy5LRURfUkVBTE0gPSBwcm9jZXNzLmVudi5LRURfUkVBTE07IC8vIFwiU0UxXCJcclxuY2ZnLktFRF9MT0NBTEUgPSBjZmcuS0VEX0xPQ0FMRSB8fCBwcm9jZXNzLmVudi5LRURfTE9DQUxFOyAvLyBcInN2XCIsIFwiZW5cIi4gT25seSBzZXQgZnJvbSBwcm9jZXNzLmVudiBpZiBub3Qgc2V0IGZyb20gU2l0ZVZpc2lvbiBlbGVtZW50IGNvbmZpZy5cclxuY2ZnLktFRF9TQ0hPT0xfTE9DQUxFID0gY2ZnLktFRF9TQ0hPT0xfTE9DQUxFIHx8IHByb2Nlc3MuZW52LktFRF9TQ0hPT0xfTE9DQUxFOyAvLyBcInN2XCIsIFwiZW5fc2luXCIsIFwiZW5fbmluXCIuIE9ubHkgc2V0IGZyb20gcHJvY2Vzcy5lbnYgaWYgbm90IHNldCBmcm9tIFNpdGVWaXNpb24gZWxlbWVudCBjb25maWcuXHJcbmNmZy5LRURfUkVTT1VSQ0VTX1VSTCA9IGNmZy5LRURfUkVTT1VSQ0VTX1VSTCB8fCBwcm9jZXNzLmVudi5LRURfUkVTT1VSQ0VTX1VSTDtcclxuIiwiLyogVGhlc2Ugc2NyaXB0cyBhc3N1bWUgc29tZSBvZiB0aGUgZ2xvYmFsIHZhcnMgaGF2ZSBhbHJlYWR5IGJlZW4gc2V0OlxyXG4gICogS0VELmNmZ1xyXG4gICogS0VELmVudi5jdXJyZW50VXNlclxyXG5cclxuICBUaGUgcmVzdCB3aWxsIGJlIHNldCBoZXJlIChjbGllbnQgc2lkZSlcclxuKi9cclxuaW1wb3J0ICcuL2NvbmZpZ3VyZSc7XHJcbmltcG9ydCAnLi9zZXQtYmVhcmVyLXByb3ZpZGVycyc7XHJcbmltcG9ydCAnLi9zZXQta2VkLWJhY2tlbmQtY2xpZW50JztcclxuaW1wb3J0ICcuL3NldC1lZHMtY2xpZW50JztcclxuIiwiaW1wb3J0IHsgcGFyc2VRdWVyeVN0cmluZywgZ2VuZXJhdGVRdWVyeVN0cmluZywgc3BsaXRVcmxBbmRRdWVyeSB9IGZyb20gXCIuLi91dGlscy9xdWVyeS1zdHJpbmdcIjtcclxuaW1wb3J0IHsgS2VkQmFja2VuZENsaWVudFdlYiwgV2ViU2VydmVyQmVhcmVyUHJvdmlkZXIsIGlzb21vcnBoaWMsIHN0b3JhZ2UgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudHdlYic7XHJcbmltcG9ydCB7IEJlYXJlclByb3ZpZGVyLCBLZWRCZWFyZXJQcm92aWRlciB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcclxuaW1wb3J0IGNmZyBmcm9tICcuLi9nbG9iYWxzL0tFRC5jZmcnO1xyXG5pbXBvcnQgZW52IGZyb20gJy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCB7IFVzZXIgfSBmcm9tIFwiLi4vY29udHJhY3RzL2tlZC1tb2RlbHNcIjtcclxuaW1wb3J0IHsgSU1QRVJTT05BVElPTl9RVUVSWV9QQVJBTVMgfSBmcm9tIFwiLi4vYWNjZXNzLWNvbnRyb2wvaW5kZXhcIjtcclxuaW1wb3J0IHsgY2hlcnJ5UGlja1Byb3BzIH0gZnJvbSBcIi4uL3V0aWxzL3V0aWxzXCI7XHJcblxyXG5mdW5jdGlvbiBnZXRNZXJnZWRUb2tlblBhdGgodG9rZW5QYXRoOiBzdHJpbmcsIGxvY2F0aW9uU2VhcmNoOiBzdHJpbmcsIHNjb3Blczogc3RyaW5nW10pIHtcclxuICAvLyBNZXJnZSBjb25maWd1cmVkIHF1ZXJ5IHBhcmFtcyBvZiB0b2tlbiBwYXRoIHdpdGggcGFyYW1zIGdpdmVuIHRvIGN1cnJlbnQgcGFnZVxyXG4gIGNvbnN0IGN1cnJlbnRRdWVyeSA9IHBhcnNlUXVlcnlTdHJpbmcobG9jYXRpb25TZWFyY2gpO1xyXG4gIGNvbnN0IGltcGVyc29uYXRpb25Qcm9wcyA9IGNoZXJyeVBpY2tQcm9wcyhjdXJyZW50UXVlcnksIElNUEVSU09OQVRJT05fUVVFUllfUEFSQU1TKTtcclxuICBjb25zdCBbdG9rZW5QYXRoV2l0aG91dFF1ZXJ5LCB0b2tlblF1ZXJ5U3RyaW5nXSA9IHNwbGl0VXJsQW5kUXVlcnkodG9rZW5QYXRoKTtcclxuICBjb25zdCB0b2tlblBhdGhRdWVyeSA9IHBhcnNlUXVlcnlTdHJpbmcodG9rZW5RdWVyeVN0cmluZyk7XHJcbiAgcmV0dXJuIHRva2VuUGF0aFdpdGhvdXRRdWVyeSArIGdlbmVyYXRlUXVlcnlTdHJpbmcoe1xyXG4gICAgLi4udG9rZW5QYXRoUXVlcnksXHJcbiAgICAuLi5pbXBlcnNvbmF0aW9uUHJvcHMsXHJcbiAgICBzY29wZXM6IHNjb3Blcy5qb2luKCcsJylcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0VG9rZW5JZChtZXJnZWRUb2tlblBhdGg6IHN0cmluZywgdXNlckVtYWlsOiBzdHJpbmcpIHtcclxuICByZXR1cm4gbWVyZ2VkVG9rZW5QYXRoICsgXCIvXCIgKyB1c2VyRW1haWw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNhdmVVc2VySW5mbyh1c2VyOiBVc2VyLCB0b2tlbklkOiBzdHJpbmcpIHtcclxuICBlbnYuY3VycmVudFVzZXIgPSB1c2VyO1xyXG4gIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oXCJ1c2VySW5mb1wiICsgdG9rZW5JZCwgSlNPTi5zdHJpbmdpZnkodXNlcikpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBsb2FkVXNlckluZm8odG9rZW5JZDogc3RyaW5nKSB7XHJcbiAgY29uc3Qgc3RvcmVkU2Vzc2lvblVzZXIgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKFwidXNlckluZm9cIiArIHRva2VuSWQpO1xyXG4gIGlmIChzdG9yZWRTZXNzaW9uVXNlcikge1xyXG4gICAgZW52LmN1cnJlbnRVc2VyID0gSlNPTi5wYXJzZShzdG9yZWRTZXNzaW9uVXNlcik7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVCZWFyZXJQcm92aWRlcihtZXJnZWRUb2tlblBhdGg6IHN0cmluZywgdXNlckVtYWlsOiBzdHJpbmcpIHtcclxuICBjb25zdCB0b2tlbklkID0gZ2V0VG9rZW5JZChtZXJnZWRUb2tlblBhdGgsIHVzZXJFbWFpbCk7XHJcbiAgcmV0dXJuIG5ldyBXZWJTZXJ2ZXJCZWFyZXJQcm92aWRlcihtZXJnZWRUb2tlblBhdGgsIHJlc3BvbnNlVGV4dCA9PiB7XHJcbiAgICBjb25zdCByZXMgPSBKU09OLnBhcnNlKHJlc3BvbnNlVGV4dCkgYXMgeyBvazogYm9vbGVhbiwgZXJyb3I/OiBzdHJpbmcsIHRva2VuPzogc3RyaW5nLCB1c2VyPzogVXNlciB9O1xyXG4gICAgaWYgKCFyZXMub2spIHRocm93IG5ldyBFcnJvcihyZXMuZXJyb3IpO1xyXG4gICAgaWYgKHJlcy51c2VyKSB7XHJcbiAgICAgIHNhdmVVc2VySW5mbyhyZXMudXNlciwgdG9rZW5JZCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4geyB0b2tlbjogcmVzLnRva2VuLCBleHBpcmVzOiBEYXRlLm5vdygpICsgNTkgKiA2MCAqIDEwMDAgfTtcclxuICB9LCB0b2tlbklkKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlR29vZ2xlVG9rZW5Qcm92aWRlcihtZXJnZWRUb2tlblBhdGg6IHN0cmluZywgdXNlckVtYWlsOiBzdHJpbmcpIHtcclxuICBjb25zdCB0b2tlbklkID0gZ2V0VG9rZW5JZChtZXJnZWRUb2tlblBhdGgsIHVzZXJFbWFpbCk7XHJcbiAgcmV0dXJuIG5ldyBXZWJTZXJ2ZXJCZWFyZXJQcm92aWRlcihtZXJnZWRUb2tlblBhdGgsIHJlc3BvbnNlVGV4dCA9PiB7XHJcbiAgICBjb25zdCByZXMgPSBKU09OLnBhcnNlKHJlc3BvbnNlVGV4dCkgYXMgeyBvazogYm9vbGVhbiwgZXJyb3I/OiBzdHJpbmcsIHRva2VuPzogc3RyaW5nLCB1c2VyPzogVXNlciB9O1xyXG4gICAgaWYgKCFyZXMub2spIHRocm93IG5ldyBFcnJvcihyZXMuZXJyb3IpO1xyXG4gICAgcmV0dXJuIHsgdG9rZW46IHJlcy50b2tlbiwgZXhwaXJlczogRGF0ZS5ub3coKSArIDU5ICogNjAgKiAxMDAwIH07XHJcbiAgfSwgdG9rZW5JZCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVRlc3RUb2tlblByb3ZpZGVyKHRva2VuVXJsOiBzdHJpbmcsIHVzZXI6IFVzZXIsIHNjb3Blczogc3RyaW5nW10pIHtcclxuICByZXR1cm4gbmV3IEtlZEJlYXJlclByb3ZpZGVyKFxyXG4gICAgaXNvbW9ycGhpYyxcclxuICAgIHN0b3JhZ2UsXHJcbiAgICB0b2tlblVybCArIHVzZXIubWFpbCArIGxvY2F0aW9uLnNlYXJjaCxcclxuICAgIGNmZy5LRURfQ0xJRU5UX0lELFxyXG4gICAgY2ZnLktFRF9DTElFTlRfU0VDUkVULFxyXG4gICAgdG9rZW5VcmwsIHtcclxuICAgICAgZW1haWw6IHVzZXIubWFpbC50b0xvd2VyQ2FzZSgpLFxyXG4gICAgICByb2xlczogdXNlci5yb2xlcyxcclxuICAgICAgc2Nob29sOiB1c2VyLnNjaG9vbCxcclxuICAgICAgc2Nob29sVHlwZTogdXNlci5zY2hvb2xUeXBlLFxyXG4gICAgICBzY29wZXNcclxuICAgIH0pO1xyXG59XHJcblxyXG4vLyBlbnYuY3VycmVudFVzZXIubWFpbCBpcyBzZXQgYnkgU2l0ZVZpc2lvbiBzZXJ2ZXIgaW5pdGlhbGx5LlxyXG4vLyBBIHJlc3BvbnNlIGZyb20gL2FwaS90b2tlbiBtYXkgY2hhbmdlIHRoZSBtYWlsIGF0dHJpYnV0ZSBvZiB0aGUgY3VycmVudFxyXG4vLyB1c2VyLCBzbyBlbnYuY3VycmVudFVzZXIubWFpbCBtYXkgYmUgZGlmZmVyZW50IGFmdGVyIGdldHRpbmcgYSByZXNwb25zZS5cclxuLy8gSG93ZXZlciwgdGhlIGluaXRpYWwgdmFsdWUgaXMgdmFsdWFibGUgYWx3YXlzIGluIG9yZGVyIHRvIGRpc3Rpbmd1aXNoIHRoZSBjYXNlXHJcbi8vIHdoZW4gb25lIG5vcm1hbCB1c2VyIGxvZ3Mgb3V0IGFuZCBhbm90aGVyIHVzZXIgbG9ncyBpbi5cclxuY29uc3QgaW5pdGlhbFVzZXJFbWFpbCA9IGVudi5jdXJyZW50VXNlciAmJiBlbnYuY3VycmVudFVzZXIubWFpbDsgLy8gSW5pdGlhbCB2YWx1ZSBvZiBtYWlsLiBNYXkgY2hhbmdlLlxyXG5pZiAoaW5pdGlhbFVzZXJFbWFpbCkge1xyXG4gIC8vIEtFRFxyXG4gIGlmIChjZmcuS0VEX1RPS0VOX1BBVEgpIHtcclxuICAgIC8vXHJcbiAgICAvL1xyXG4gICAgLy8gUHJvZHVjdGlvbiAvIFNpdGVWaXNpb24gcHJveGllZCAvYXBpL3Rva2VuIHRvIHJlcXVlc3QgdG9rZW5zIGZyb206XHJcbiAgICAvL1xyXG4gICAgLy9cclxuICAgIGNvbnN0IG1lcmdlZFRva2VuUGF0aCA9IGdldE1lcmdlZFRva2VuUGF0aChcclxuICAgICAgY2ZnLktFRF9UT0tFTl9QQVRILFxyXG4gICAgICBsb2NhdGlvbi5zZWFyY2gsIFtcclxuICAgICAgICBcImtlZGJhY2tlbmRcIixcclxuICAgICAgICBcIkVEU1wiLFxyXG4gICAgICBdKTtcclxuICAgIGVudi5iZWFyZXJQcm92aWRlciA9IGNyZWF0ZUJlYXJlclByb3ZpZGVyKG1lcmdlZFRva2VuUGF0aCwgaW5pdGlhbFVzZXJFbWFpbCk7XHJcbiAgICBsb2FkVXNlckluZm8oZ2V0VG9rZW5JZChtZXJnZWRUb2tlblBhdGgsIGluaXRpYWxVc2VyRW1haWwpKTtcclxuXHJcbiAgICAvLyBHb29nbGVcclxuICAgIGNvbnN0IGdvb2dsZU1lcmdlZFBhdGggPSBnZXRNZXJnZWRUb2tlblBhdGgoXHJcbiAgICAgIGNmZy5LRURfVE9LRU5fUEFUSCxcclxuICAgICAgbG9jYXRpb24uc2VhcmNoLCBbXHJcbiAgICAgICAgXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL2NhbGVuZGFyLnJlYWRvbmx5XCIsXHJcbiAgICAgIF0pO1xyXG4gICAgZW52Lmdvb2dsZVRva2VuUHJvdmlkZXIgPSBjcmVhdGVHb29nbGVUb2tlblByb3ZpZGVyKGdvb2dsZU1lcmdlZFBhdGgsIGluaXRpYWxVc2VyRW1haWwpO1xyXG4gIH0gZWxzZSBpZiAoY2ZnLktFRF9UT0tFTl9VUkwgJiYgY2ZnLktFRF9DTElFTlRfSUQgJiYgY2ZnLktFRF9DTElFTlRfU0VDUkVUKSB7XHJcbiAgICAvL1xyXG4gICAgLy9cclxuICAgIC8vIFRlc3QgLSBnbyBkaXJlY3RseSB0byBLRURBVVRIIHNlcnZlciB0byByZXRyaWV2ZSB0b2tlbnNcclxuICAgIC8vXHJcbiAgICAvL1xyXG4gICAgZW52LmJlYXJlclByb3ZpZGVyID0gY3JlYXRlVGVzdFRva2VuUHJvdmlkZXIoY2ZnLktFRF9UT0tFTl9VUkwsIGVudi5jdXJyZW50VXNlciwgW1xyXG4gICAgICBcImtlZGJhY2tlbmRcIixcclxuICAgICAgXCJFRFNcIixcclxuICAgIF0pO1xyXG4gICAgZW52Lmdvb2dsZVRva2VuUHJvdmlkZXIgPSBjcmVhdGVUZXN0VG9rZW5Qcm92aWRlcihjZmcuS0VEX1RPS0VOX1VSTCArIFwiL2dvb2dsZVwiLCBlbnYuY3VycmVudFVzZXIsIFtcclxuICAgICAgXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL2NhbGVuZGFyLnJlYWRvbmx5XCIsXHJcbiAgICBdKTtcclxuICB9IGVsc2Uge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVyIEtFRF9UT0tFTl9QQVRIYCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBlbnYgZnJvbSAnLi4vZ2xvYmFscy9LRUQuZW52JztcclxuaW1wb3J0IGNmZyBmcm9tICcuLi9nbG9iYWxzL0tFRC5jZmcnO1xyXG5pbXBvcnQgeyBpc29tb3JwaGljIH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnR3ZWInO1xyXG5pbXBvcnQgeyBFZHNDbGllbnQgfSBmcm9tICcuLi9hcGlzL2Vkc2NsaWVudCc7XHJcblxyXG5lbnYuZWRzQ2xpZW50ID0gbmV3IEVkc0NsaWVudCAoXHJcbiAgaXNvbW9ycGhpYyxcclxuICBjZmcuRURTX0FQSV9VUkwsXHJcbiAgZW52LmJlYXJlclByb3ZpZGVyLFxyXG4gICgpPT5lbnYuY3VycmVudFVzZXIubWFpbCk7XHJcblxyXG4iLCJpbXBvcnQgZW52IGZyb20gJy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCBjZmcgZnJvbSAnLi4vZ2xvYmFscy9LRUQuY2ZnJztcclxuaW1wb3J0IHsgS2VkQmFja2VuZENsaWVudFdlYiB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50d2ViJztcclxuXHJcbmVudi5rZWRCYWNrZW5kQ2xpZW50ID0gbmV3IEtlZEJhY2tlbmRDbGllbnRXZWIgKFxyXG4gIGNmZy5LRURfQVBJX1VSTCxcclxuICBlbnYuYmVhcmVyUHJvdmlkZXIpO1xyXG5cclxuIiwiaW1wb3J0IEtFRCBmcm9tICcuL0tFRCc7XHJcblxyXG4vKiBUaGlzIGRlZmF1bHQgY29uZmlndXJhdGlvbiBpcyB1c2VkIGFzIGEgZmFsbGJhY2suXHJcbk5vcm1hbGx5IGJvdGggdGVzdCBwYWdlcyBhbmQgcHJvZHVjdGlvbiBwYWdlcyB3aWxsIG92ZXJyaWRlIHRoZXNlIGNvbmZpZ3JhdGlvbnNcclxuKi9cclxuLypjb25zdCBkZWZhdWx0Q29uZmlndXJhdGlvbiA9IHtcclxuICAvLyBFbnZpcm9ubWVudFxyXG4gIEVOVklST05NRU5UOiAnZGV2ZWxvcG1lbnQnIGFzICdwcm9kdWN0aW9uJyB8ICdkZXZlbG9wbWVudCcgfCAndGVzdCcsXHJcbiAgLy8gQXV0aGVudGljYXRpb24gU2VydmVyOlxyXG4gIEtFRF9UT0tFTl9VUkw6ICdodHRwczovL2tlZGF1dGh0ZXN0LmF6dXJld2Vic2l0ZXMubmV0L3Rva2VuJyxcclxuICBLRURfVE9LRU5fUEFUSDogJy9hcGkvdG9rZW4uU2tyaXB0LnBvcnRsZXQ/c3YuY29udGVudHR5cGU9YXBwbGljYXRpb24vanNvbicsXHJcbiAgS0VEX0NMSUVOVF9JRDogJ2RldmNsaWVudCcsXHJcbiAgS0VEX0NMSUVOVF9TRUNSRVQ6ICc0ZlJkZlFwV3RKcWpUV2YnLFxyXG4gIC8vIFNlcnZpY2VzOlxyXG4gIEtFRF9BUElfVVJMOiAnaHR0cHM6Ly9rZWRiYWNrZW5kdGVzdC5henVyZXdlYnNpdGVzLm5ldC9hcGkvJywgIFxyXG4gIEVEU19BUElfVVJMOiAnaHR0cHM6Ly9lZHNwb3J0YWxvd2luYXBpLmF6dXJld2Vic2l0ZXMubmV0L2FwaS8nXHJcbn0qL1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJS2VkQ29uZmlndXJhdGlvbiB7XHJcbiAgRU5WSVJPTk1FTlQ6ICdwcm9kdWN0aW9uJyB8ICdkZXZlbG9wbWVudCcgfCAndGVzdCc7XHJcbiAgS0VEX1JFQUxNOiBzdHJpbmc7XHJcbiAgS0VEX1RPS0VOX1VSTDogc3RyaW5nO1xyXG4gIEtFRF9UT0tFTl9QQVRIOiBzdHJpbmc7XHJcbiAgS0VEX0NMSUVOVF9JRDogc3RyaW5nO1xyXG4gIEtFRF9DTElFTlRfU0VDUkVUOiBzdHJpbmc7XHJcbiAgS0VEX0FQSV9VUkw6IHN0cmluZztcclxuICBFRFNfQVBJX1VSTDogc3RyaW5nO1xyXG4gIEtFRF9MT0NBTEU6IHN0cmluZztcclxuICBLRURfU0NIT09MX0xPQ0FMRTogc3RyaW5nO1xyXG4gIEtFRF9DT1VSU0VfQlVJTERFUl9VUkw6IHN0cmluZztcclxuICBLRURfQ09VUlNFX1ZJRVdFUl9VUkw6IHN0cmluZztcclxuICBLRURfU1VCSkVDVF9QTEFOTkVSX0FETUlOX1VSTDogc3RyaW5nO1xyXG4gIEtFRF9TVUJKRUNUX1BMQU5ORVJfVVJMOiBzdHJpbmc7XHJcbiAgS0VEX0ZFQVRVUkVTOiBzdHJpbmc7XHJcbiAgS0VEX0tFRVBfQUxJVkVfVVJMOiBzdHJpbmc7XHJcbiAgS0VEX0VOVU1fV09SREJBTktTX1VSTDogc3RyaW5nO1xyXG4gIEtFRF9XT1JEQkFOS1NfVVJMOiBzdHJpbmc7XHJcbiAgS0VEX1JFU09VUkNFU19VUkw6IHN0cmluZztcclxufTtcclxuXHJcbmlmICghS0VELmNmZykgS0VELmNmZyA9IHt9O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgS0VELmNmZyBhcyBJS2VkQ29uZmlndXJhdGlvbjtcclxuZXhwb3J0IGNvbnN0IGNmZzogSUtlZENvbmZpZ3VyYXRpb24gPSBLRUQuY2ZnO1xyXG4iLCJpbXBvcnQge1VzZXIsIExlYXJuaW5nTW9kdWxlVGFza3N9IGZyb20gJy4uL2NvbnRyYWN0cy9rZWQtbW9kZWxzJztcclxuaW1wb3J0IHsgS2VkQmFja2VuZENsaWVudCwgQmVhcmVyUHJvdmlkZXIgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XHJcbmltcG9ydCB7VXNlclRhc2t9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHtLZWRSZXBvfSBmcm9tICcuLi9yZXBvcy9rZWQtcmVwbyc7XHJcbmltcG9ydCB7RWRzQ2xpZW50fSBmcm9tICcuLi9hcGlzL2Vkc2NsaWVudCc7XHJcbmltcG9ydCBLRUQgZnJvbSAnLi9rZWQnO1xyXG5pbXBvcnQgeyBLU1Rlcm1QbGFubmVyUmVwbyB9IGZyb20gJy4uL3JlcG9zL2tzLXRlcm1wbGFubmVyLXJlcG8nO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBFbnYge1xyXG4gICAgY3VycmVudFVzZXI/OiBVc2VyO1xyXG4gICAgbGVhcm5pbmdNb2R1bGVUYXNrcz86IExlYXJuaW5nTW9kdWxlVGFza3M7XHJcbiAgICBiZWFyZXJQcm92aWRlcj86IEJlYXJlclByb3ZpZGVyO1xyXG4gICAgZ29vZ2xlVG9rZW5Qcm92aWRlcj86IEJlYXJlclByb3ZpZGVyO1xyXG4gICAga2VkQmFja2VuZENsaWVudD86IEtlZEJhY2tlbmRDbGllbnQ7XHJcbiAgICBlZHNDbGllbnQ/OiBFZHNDbGllbnQ7XHJcbiAgICB1c2VyVGFza3NSZXBvPztcclxuICAgIGhpZGRlbkNvdXJzZXNSZXBvPztcclxuICAgIHdlZWtOb3Rlc1JlcG8/O1xyXG4gICAga2dUZXJtUGxhbm5lclJlcG8/O1xyXG4gICAga3NUZXJtUGxhbm5lclJlcG8/OiBLU1Rlcm1QbGFubmVyUmVwb1xyXG4gICAgdHV0b3JlZDogYm9vbGVhbjtcclxuICAgIGVycm9yPzogRXJyb3I7XHJcbn1cclxuXHJcbmlmICghS0VELmVudikgS0VELmVudiA9IHt9O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgS0VELmVudiBhcyBFbnY7XHJcbmV4cG9ydCBjb25zdCBlbnY6IEVudiA9IEtFRC5lbnY7XHJcbiIsIlxyXG5leHBvcnQgY29uc3QgS0VEX05BTUVTUEFDRSA9IFwiS0VEXCI7XHJcblxyXG5kZWNsYXJlIHZhciBLRUQ6IGFueTtcclxuXHJcbnZhciByZXN1bHQgPSB0eXBlb2YgS0VEID09PSAndW5kZWZpbmVkJyA/IHt9IDogS0VEO1xyXG5cclxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBLRUQgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICB3aW5kb3dbS0VEX05BTUVTUEFDRV0gPSByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHJlc3VsdDtcclxuIiwiaW1wb3J0IGVudiBmcm9tICcuL0tFRC5lbnYnO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kUmVwbyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IGdldEdsb2JhbElkLCBjcmVhdGVVVUlEIH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnQnO1xyXG5pbXBvcnQgY2ZnIGZyb20gJy4vS0VELmNmZyc7XHJcbmltcG9ydCB7IFNjaG9vbCwgQnJhbmNoIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBWYWx1ZSB9IGZyb20gJ2tlZGJhY2tlbmQvb2JzZXJ2YWJsZSc7XHJcblxyXG5leHBvcnQgY29uc3QgZGIgPSBuZXcgS2VkQmFja2VuZFJlcG8oXHJcbiAgKCk9PmVudi5rZWRCYWNrZW5kQ2xpZW50LFxyXG4gICgpPT5lbnYuY3VycmVudFVzZXIgP1xyXG4gICAgZW52LmN1cnJlbnRVc2VyLm1haWwgOlxyXG4gICAgXCJcIixcclxuICAoKT0+ZW52LmN1cnJlbnRVc2VyID9cclxuICAgIGVudi5jdXJyZW50VXNlci5kaXNwbGF5TmFtZSB8fCBlbnYuY3VycmVudFVzZXIubWFpbCA6XHJcbiAgICBcIlwiKTtcclxuXHJcbmV4cG9ydCBjb25zdCBnbG9iYWxJZCA9IGdldEdsb2JhbElkKGNmZy5LRURfUkVBTE0pO1xyXG5leHBvcnQgY29uc3QgU2Nob29scyA9IHtcclxuICBzdGFuZGFyZFNjaG9vbDogZGIuc2Nob29scy5uYW1lKFwic3RhbmRhcmRcIikuY2FjaGVPcHRpbWl6ZWQoKS5zaW5nbGUoKSxcclxuICBnZXQgbXlTY2hvb2wgKCkgeyByZXR1cm4gZGIuc2Nob29scy5uYW1lKGVudi5jdXJyZW50VXNlci5zY2hvb2wpLmNhY2hlT3B0aW1pemVkKCkuc2luZ2xlKCk7IH1cclxufTtcclxuZXhwb3J0IGNvbnN0IENvdXJzZUluc3RhbmNlcyA9IHtcclxuICBnZXRCcmFuY2hJZChzY2hvb2w6IFZhbHVlPFNjaG9vbD4sIGNvdXJzZUlkOiBzdHJpbmcpIHtcclxuICAgIHJldHVybiBzY2hvb2wuc3dpdGNoTWFwKHNjaG9vbCA9PlxyXG4gICAgICBkYi5icmFuY2hlc1xyXG4gICAgICAgIC5oYXNFZGdlc0Zyb20oW3NjaG9vbC5vZmZpY2lhbEJyYW5jaElkXSlcclxuICAgICAgICAubmFtZShcImRyYWZ0XCIpXHJcbiAgICAgICAgLnRhZ3MoY291cnNlSWQpXHJcbiAgICAgICAgLmlkc09ubHkoKVxyXG4gICAgICAgIC5tYXAoKHtpZH0pID0+IGlkKVxyXG4gICAgICAgIC50b1ZhbHVlKClcclxuICAgICAgICAubWFwKGlkcyA9PiBpZHMubGVuZ3RoID4gMCA/IGlkc1swXSA6IHVuZGVmaW5lZCkpO1xyXG4gIH0sXHJcblxyXG4gIC8qKiBHZXQgYSBEUkFGVCBicmFuY2ggZm9yIGdpdmVuIGNvdXJzZSBJRCBhbmQgZ2l2ZW4gc2Nob29sLlxyXG4gICAqIElmIHRoZXJlIGlzIG5vdCB5ZXQgc3VjaCBhIGJyYW5jaCwgY3JlYXRlIGl0IHVzaW5nIG11dGF0aW9uc09uRW1wdHkoKSB3aGljaCB3aWxsXHJcbiAgICogbGVhZCB0byB0aGUgQyMgY29kZSBEb2N1bWVudFJlcG9zaXRvcnkuUmVhZE9yTXV0YXRlKCkgdmlhIERvY3VtZW50Q29udHJvbGxlci5cclxuICAgKi9cclxuICBnZXRPckNyZWF0ZUJyYW5jaElkKHNjaG9vbDogVmFsdWU8U2Nob29sPiwgY291cnNlSWQ6IHN0cmluZykge1xyXG4gICAgcmV0dXJuIGRiLmNvdXJzZUluc3RhbmNlcy5pZHNPbmx5KCkuaWQoY291cnNlSWQpLnN3aXRjaE1hcCgoKT0+IC8vIFRIaXMgZmlyc3QgbGluZSB2ZXJpZmllcyBjb3Vyc2UgZXhpc3RzLiBJZiBkZWxldGVkLCBkb24ndCB0cnkgdG8gcmVjcmVhdGUgaXRzIGJyYW5jaCFcclxuICAgICAgc2Nob29sLnN3aXRjaE1hcChzY2hvb2wgPT4gXHJcbiAgICAgIGRiLmJyYW5jaGVzXHJcbiAgICAgICAgLmhhc0VkZ2VzRnJvbShbc2Nob29sLm9mZmljaWFsQnJhbmNoSWRdKVxyXG4gICAgICAgIC5uYW1lKFwiZHJhZnRcIilcclxuICAgICAgICAudGFncyhjb3Vyc2VJZClcclxuICAgICAgICAuaWRzT25seSgpXHJcbiAgICAgICAgLm11dGF0aW9uc09uRW1wdHkodHggPT4ge1xyXG4gICAgICAgICAgLy8gVGhlc2UgMiBtdXRhdGlvbnMgd2lsbCBvY2N1ciBzZXJ2ZXIgc2lkZSwgYXRvbWljYWxseS5cclxuICAgICAgICAgIC8vIFdpbGwgYmUgc2VudCBvbiBlYWNoIHJlcXVlc3QgaW4gdGhlIHF1ZXJ5LCBidXQgd2lsbCBvbmx5IGV4ZWN1dGUgaWYgcXVlcnkgcmVzdWx0cyBpbiB6ZXJvIGl0ZW1zLlxyXG4gICAgICAgICAgLy9jb25zb2xlLmxvZyhcIlNjaG9vbDpcIiwgc2Nob29sKTtcclxuICAgICAgICAgIGNvbnN0IGlkID0gY3JlYXRlVVVJRCgpO1xyXG4gICAgICAgICAgdHguYWRkKFwiYnJhbmNoZXNcIiwge1xyXG4gICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgYWNsOiBbXHJcbiAgICAgICAgICAgICAgXCJyb2xlOlVTRVI6UlwiLFxyXG4gICAgICAgICAgICAgIGBzY2hvb2xSb2xlOiR7c2Nob29sLm5hbWV9L0VNUExPWUVFOlNgXHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIG5hbWU6ICdkcmFmdCcsXHJcbiAgICAgICAgICAgIHNjaG9vbElkOiBzY2hvb2wuaWQsXHJcbiAgICAgICAgICAgIHRyZWVQYXJlbnRJZDogc2Nob29sLm9mZmljaWFsQnJhbmNoSWQsXHJcbiAgICAgICAgICAgIHRhZ3M6IFtjb3Vyc2VJZF1cclxuICAgICAgICAgIH0gYXMgQnJhbmNoKTtcclxuICAgICAgICAgIC8vIEFwcHJvdmluZyB0aGUgYnJhbmNoIG1ha2VzIHN1cmUgdGhhdCBpdCB3YXMgY3JlYXRlZCBieSBhbiBFTVBMT1lFRSBvbiBnaXZlbiBzY2hvb2wuXHJcbiAgICAgICAgICB0eC5saW5rMihcImJyYW5jaGVzXCIsIHNjaG9vbC5vZmZpY2lhbEJyYW5jaElkLCBcImFwcHJvdmVkQ2hpbGRyZW5cIiwgaWQpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnNpbmdsZSgpXHJcbiAgICAgICAgLm1hcCgoe2lkfSkgPT4gaWQpKSk7XHJcbiAgfSxcclxuXHJcbiAgZ2V0QWxsRGVzY2VuZGFudElkcyhjb3Vyc2VJZDogc3RyaW5nKSB7XHJcbiAgICByZXR1cm4gZGIuY291cnNlQmxvY2tzLnRhZ3MoY291cnNlSWQpLmlkc09ubHkoKS5jb25jYXQoXHJcbiAgICAgIGRiLmNvdXJzZUNvbnRlbnRzLnRhZ3MoY291cnNlSWQpLmlkc09ubHkoKSkuY29uY2F0KFxyXG4gICAgICBkYi5jb3Vyc2VUYWJzLnRhZ3MoY291cnNlSWQpLmlkc09ubHkoKSkuY29uY2F0KFxyXG4gICAgICBkYi50YXNrcy50YWdzKGNvdXJzZUlkKS5pZHNPbmx5KCkpXHJcbiAgICAgIC5tYXAoeCA9PiB4LmlkKTtcclxuICB9XHJcbn1cclxuIiwiXHJcbmV4cG9ydCBjb25zdCBLRURfTkFNRVNQQUNFID0gXCJLRURcIjtcclxuXHJcbmRlY2xhcmUgdmFyIEtFRDogYW55O1xyXG5cclxudmFyIHJlc3VsdCA9IHR5cGVvZiBLRUQgPT09ICd1bmRlZmluZWQnID8ge30gOiBLRUQ7XHJcblxyXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIEtFRCA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIHdpbmRvd1tLRURfTkFNRVNQQUNFXSA9IHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgcmVzdWx0O1xyXG4iLCJpbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcbmltcG9ydCBjZmcgZnJvbSAnLi4vZ2xvYmFscy9LRUQuY2ZnJztcclxuXHJcbmlmIChjZmcuS0VEX0xPQ0FMRSA9PT0gXCJzdlwiKSB7XHJcbiAgICBtb21lbnQudXBkYXRlTG9jYWxlKCdzdicsIHtcclxuICAgICAgICBtb250aHM6ICdqYW51YXJpX2ZlYnJ1YXJpX21hcnNfYXByaWxfbWFqX2p1bmlfanVsaV9hdWd1c3RpX3NlcHRlbWJlcl9va3RvYmVyX25vdmVtYmVyX2RlY2VtYmVyJy5zcGxpdCgnXycpLFxyXG4gICAgICAgIG1vbnRoc1Nob3J0OiAnamFuX2ZlYl9tYXJfYXByX21hal9qdW5fanVsX2F1Z19zZXBfb2t0X25vdl9kZWMnLnNwbGl0KCdfJyksXHJcbiAgICAgICAgd2Vla2RheXM6ICdzw7ZuZGFnX23DpW5kYWdfdGlzZGFnX29uc2RhZ190b3JzZGFnX2ZyZWRhZ19sw7ZyZGFnJy5zcGxpdCgnXycpLFxyXG4gICAgICAgIHdlZWtkYXlzU2hvcnQ6ICdzw7ZuX23DpW5fdGlzX29uc190b3JfZnJlX2zDtnInLnNwbGl0KCdfJyksXHJcbiAgICAgICAgd2Vla2RheXNNaW46ICdzw7ZfbcOlX3RpX29uX3RvX2ZyX2zDticuc3BsaXQoJ18nKSxcclxuICAgICAgICBsb25nRGF0ZUZvcm1hdDoge1xyXG4gICAgICAgICAgICBMVDogJ0hIOm1tJyxcclxuICAgICAgICAgICAgTFRTOiAnSEg6bW06c3MnLFxyXG4gICAgICAgICAgICBMOiAnWVlZWS1NTS1ERCcsXHJcbiAgICAgICAgICAgIExMOiAnRCBNTU1NIFlZWVknLFxyXG4gICAgICAgICAgICBMTEw6ICdEIE1NTU0gWVlZWSBba2wuXSBISDptbScsXHJcbiAgICAgICAgICAgIExMTEw6ICdkZGRkIEQgTU1NTSBZWVlZIFtrbC5dIEhIOm1tJyxcclxuICAgICAgICAgICAgbGxsOiAnRCBNTU0gWVlZWSBISDptbScsXHJcbiAgICAgICAgICAgIGxsbGw6ICdkZGQgRCBNTU0gWVlZWSBISDptbSdcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNhbGVuZGFyOiB7XHJcbiAgICAgICAgICAgIHNhbWVEYXk6ICdbSWRhZ10gTFQnLFxyXG4gICAgICAgICAgICBuZXh0RGF5OiAnW0ltb3Jnb25dIExUJyxcclxuICAgICAgICAgICAgbGFzdERheTogJ1tJZ8Olcl0gTFQnLFxyXG4gICAgICAgICAgICBuZXh0V2VlazogJ1tQw6VdIGRkZGQgTFQnLFxyXG4gICAgICAgICAgICBsYXN0V2VlazogJ1tJXSBkZGRkW3NdIExUJyxcclxuICAgICAgICAgICAgc2FtZUVsc2U6ICdMJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVsYXRpdmVUaW1lOiB7XHJcbiAgICAgICAgICAgIGZ1dHVyZTogJ29tICVzJyxcclxuICAgICAgICAgICAgcGFzdDogJ2bDtnIgJXMgc2VkYW4nLFxyXG4gICAgICAgICAgICBzOiAnbsOlZ3JhIHNla3VuZGVyJyxcclxuICAgICAgICAgICAgc3M6ICclZCBzZWt1bmRlcicsXHJcbiAgICAgICAgICAgIG06ICdlbiBtaW51dCcsXHJcbiAgICAgICAgICAgIG1tOiAnJWQgbWludXRlcicsXHJcbiAgICAgICAgICAgIGg6ICdlbiB0aW1tZScsXHJcbiAgICAgICAgICAgIGhoOiAnJWQgdGltbWFyJyxcclxuICAgICAgICAgICAgZDogJ2VuIGRhZycsXHJcbiAgICAgICAgICAgIGRkOiAnJWQgZGFnYXInLFxyXG4gICAgICAgICAgICBNOiAnZW4gbcOlbmFkJyxcclxuICAgICAgICAgICAgTU06ICclZCBtw6VuYWRlcicsXHJcbiAgICAgICAgICAgIHk6ICdldHQgw6VyJyxcclxuICAgICAgICAgICAgeXk6ICclZCDDpXInXHJcbiAgICAgICAgfSxcclxuICAgICAgICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn0oZXxhKS8sXHJcbiAgICAgICAgb3JkaW5hbDogZnVuY3Rpb24gKG51bWJlcikge1xyXG4gICAgICAgICAgICB2YXIgYiA9IG51bWJlciAlIDEwLFxyXG4gICAgICAgICAgICAgICAgb3V0cHV0ID0gKH5+KG51bWJlciAlIDEwMCAvIDEwKSA9PT0gMSkgPyAnZScgOlxyXG4gICAgICAgICAgICAgICAgICAgIChiID09PSAxKSA/ICdhJyA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChiID09PSAyKSA/ICdhJyA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoYiA9PT0gMykgPyAnZScgOiAnZSc7XHJcbiAgICAgICAgICAgIHJldHVybiBudW1iZXIgKyBvdXRwdXQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICB3ZWVrOiB7XHJcbiAgICAgICAgICAgIGRvdzogMSwgLy8gTW9uZGF5IGlzIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWsuXHJcbiAgICAgICAgICAgIGRveTogNCAgLy8gVGhlIHdlZWsgdGhhdCBjb250YWlucyBKYW4gNHRoIGlzIHRoZSBmaXJzdCB3ZWVrIG9mIHRoZSB5ZWFyLlxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcbmV4cG9ydCBjb25zdCBsb2NhbE1vbWVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiBtb21lbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKS5sb2NhbGUoY2ZnLktFRF9MT0NBTEUpO1xyXG59XHJcbiIsImltcG9ydCB7IFJlcG8sIFJlcG9Db21tdW5pY2F0b3J9IGZyb20gJy4vcmVwbyc7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRDbGllbnQsIExpc3RPcHRpb25zLCBCYXRjaFJ1bm5lciwgY3JlYXRlVVVJRCB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcclxuaW1wb3J0IHsgRG9jdW1lbnR9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgS2VkUmVwb09wdGlvbnM8VCBleHRlbmRzIERvY3VtZW50PiB7XHJcbiAgZ2V0Q2xpZW50OiAoKT0+S2VkQmFja2VuZENsaWVudDtcclxuICBnZXRRdWVyeU9wdGlvbnM6ICgpPT5Qcm9taXNlPExpc3RPcHRpb25zPjtcclxuICBvcHRpbWlzdGljOiBib29sZWFuO1xyXG4gIHRhYmxlOiBzdHJpbmc7XHJcbiAgdXNlcjogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgS2VkUmVwbzxUIGV4dGVuZHMgRG9jdW1lbnQ+IHtcclxuICBtZW06IFJlcG88VD47XHJcbiAgb3B0aW9uczogS2VkUmVwb09wdGlvbnM8VD47XHJcbiAgXHJcbiAgY29uc3RydWN0b3Iob3B0aW9uczogS2VkUmVwb09wdGlvbnM8VD4pIHtcclxuICAgIGNvbnN0IHt0YWJsZSwgZ2V0Q2xpZW50LCBnZXRRdWVyeU9wdGlvbnN9ID0gb3B0aW9ucztcclxuICAgIHRoaXMubWVtID0gbmV3IFJlcG88VD4oe3F1ZXJ5OiBhc3luYyAoKT0+e1xyXG4gICAgICBjb25zdCBxdWVyeU9wdGlvbnMgPSBhd2FpdCBnZXRRdWVyeU9wdGlvbnMoKTtcclxuICAgICAgcmV0dXJuIGF3YWl0IGdldENsaWVudCgpLmxpc3Q8VD4odGFibGUsIHtcclxuICAgICAgICAuLi5xdWVyeU9wdGlvbnMsXHJcbiAgICAgICAgY2FjaGVCdXN0OiB0aGlzLmdldENhY2hlQnVzdCgpfSk7XHJcbiAgICB9fSk7XHJcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRDYWNoZUJ1c3QoKSB7XHJcbiAgICBjb25zdCB7dGFibGUsIHVzZXJ9ID0gdGhpcy5vcHRpb25zO1xyXG4gICAgY29uc3QgY2FjaGVCdXN0ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhY2hlLWJ1c3QtJyArIHRhYmxlICsgJy0nICsgdXNlcik7XHJcbiAgICByZXR1cm4gY2FjaGVCdXN0IHx8IHRoaXMucmVnZW5lcmF0ZUNhY2hlQnVzdCgpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByZWdlbmVyYXRlQ2FjaGVCdXN0KCkge1xyXG4gICAgY29uc3Qge3RhYmxlLCB1c2VyfSA9IHRoaXMub3B0aW9ucztcclxuICAgIGNvbnN0IGNhY2hlQnVzdCA9IGNyZWF0ZVVVSUQoKTtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjYWNoZS1idXN0LScgKyB0YWJsZSArICctJyArIHVzZXIsIGNhY2hlQnVzdCk7XHJcbiAgICByZXR1cm4gY2FjaGVCdXN0O1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgdXBzZXJ0KGl0ZW06IFQsIHVwZGF0ZXI6IChpdGVtOiBUKSA9PiB2b2lkKSB7XHJcbiAgICBpZiAoIWl0ZW0uJGV0YWcpIHtcclxuICAgICAgLy8gSXRlbXMgd2l0aG91dCAkZXRhZyBjYW5ub3QgYmUgcmV0cmlldmVkIGZyb20gc2VydmVyLCBzbyBpdCBzaG91bGQgYmUgaW5zZXJ0ZWQuXHJcbiAgICAgIGNvbnN0IHVwZGF0ZWRJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgaXRlbSk7XHJcbiAgICAgIHVwZGF0ZXIodXBkYXRlZEl0ZW0pO1xyXG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5pbnNlcnQoW3VwZGF0ZWRJdGVtXSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBXZSBoYXZlIGFuICRldGFnLCBzbyB3ZSBjYW4gZXhwZWN0IGl0IHRvIGxpdmUgb24gdGhlIHNlcnZlci5cclxuICAgICAgLy8gSG93ZXZlciwgdGFrZSBjYXJlIG9mIHRoZSB1bmxpa2VseSBzaXR1YXRpb24gdGhhdCBpdCB3YXMgZGVsZXRlZCBmcm9tIHNlcnZlcixcclxuICAgICAgLy8gYW5kIGlmIHNvLCBpbnNlcnQgaXQgYWdhaW4uXHJcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKFtpdGVtXSwgdXBkYXRlcikuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgaWYgKGUubmFtZSA9PT0gXCJodHRwNDA0XCIpIHtcclxuICAgICAgICAgIGNvbnN0IHVwZGF0ZWRJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgaXRlbSk7XHJcbiAgICAgICAgICB1cGRhdGVyKHVwZGF0ZWRJdGVtKTtcclxuICAgICAgICAgIHJldHVybiB0aGlzLmluc2VydChbdXBkYXRlZEl0ZW1dKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGUpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIHVwZGF0ZShpdGVtczogVFtdLCB1cGRhdGVyOiAoaXRlbTogVCkgPT4gdm9pZCkge1xyXG4gICAgY29uc3Qge2dldENsaWVudCwgb3B0aW1pc3RpYywgdGFibGV9ID0gdGhpcy5vcHRpb25zO1xyXG4gICAgY29uc3QgY2xpZW50ID0gZ2V0Q2xpZW50KCk7XHJcbiAgICBjb25zdCBtb2RpZmllZEl0ZW1zOiBUW10gPSBpdGVtcy5tYXAoaXRlbSA9PiB7XHJcbiAgICAgIGNvbnN0IG1lbVJlcG9JdGVtID0gdGhpcy5tZW0uaXRlbXMuZmluZChpdCA9PiBpdC5pZCA9PT0gaXRlbS5pZCk7XHJcbiAgICAgIGl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCBtZW1SZXBvSXRlbSB8fCBpdGVtKTtcclxuICAgICAgdXBkYXRlcihpdGVtKTtcclxuICAgICAgcmV0dXJuIGl0ZW07XHJcbiAgICB9KTtcclxuICAgIGlmIChvcHRpbWlzdGljKSBhd2FpdCB0aGlzLm1lbS51cGRhdGUobW9kaWZpZWRJdGVtcy5tYXAoeCA9PiBPYmplY3QuYXNzaWduKHt9LCB4LCB7JG1ldGE6ICd1cGRhdGluZyd9KSkpO1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgY2xpZW50LmRvIChiciA9PiBtb2RpZmllZEl0ZW1zLmZvckVhY2goaXRlbSA9PiBici5wdXQodGFibGUsIGl0ZW0pKSlcclxuICAgIC5jYXRjaChlID0+IGUubmFtZSA9PT0gXCJodHRwNDA5XCIgPyAvLyBjb25mbGljdFxyXG4gICAgICAvLyBHZXQgYSBmcmVzaCB2ZXJzaW9uIGZyb20gc2VydmVyOlxyXG4gICAgICBjbGllbnQubGlzdDxUPih0YWJsZSwge2lkczogaXRlbXMubWFwKGl0ZW0gPT4gaXRlbS5pZCl9LCB7Y2FjaGU6ICduby1jYWNoZSd9KS50aGVuKGZyZXNoSXRlbXMgPT4ge1xyXG4gICAgICAgIC8vIFVwZGF0ZSBsb2NhbCB2ZXJzaW9uOlxyXG4gICAgICAgIGNvbnN0IG1vZGlmaWVkSXRlbXMgPSBmcmVzaEl0ZW1zLm1hcChmcmVzaEl0ZW0gPT4ge1xyXG4gICAgICAgICAgLy8gQ2xvbmUgdGhlIGZyZXNoIGl0ZW1cclxuICAgICAgICAgIGNvbnN0IG1vZGlmaWVkID0gT2JqZWN0LmFzc2lnbih7fSwgZnJlc2hJdGVtKTtcclxuICAgICAgICAgIC8vIFJlLXJ1biB0aGUgdXBkYXRlciBvbiB0aGUgY2xvbmU6XHJcbiAgICAgICAgICB1cGRhdGVyKG1vZGlmaWVkKTtcclxuICAgICAgICAgIHJldHVybiBtb2RpZmllZDtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBSZS1kbyB0aGUgdGhlIHB1dCBvcGVyYXRpb24gdG93YXJkcyB0aGUgc2VydmVyLlxyXG4gICAgICAgIHJldHVybiBjbGllbnQuZG8oYnIgPT4gbW9kaWZpZWRJdGVtcy5mb3JFYWNoKGl0ZW0gPT4gYnIucHV0KHRhYmxlLCBpdGVtKSkpO1xyXG4gICAgICB9KSA6XHJcbiAgICAgIC8vIE90aGVyIHVuZXhwZWN0ZWQgZXJyb3I6XHJcbiAgICAgIFByb21pc2UucmVzb2x2ZShvcHRpbWlzdGljICYmXHJcbiAgICAgICAgdGhpcy5tZW0udXBkYXRlKGl0ZW1zKSkgLy8gVW5kbyBvcHRpbWlzdGljIHVwZGF0ZVxyXG4gICAgICAudGhlbigoKT0+e1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlKTsgLy8gUmVqZWN0IHdpdGggdGhlIGVycm9yIG5vIG1hdHRlci5cclxuICAgICAgfSkpO1xyXG4gICAgdGhpcy5yZWdlbmVyYXRlQ2FjaGVCdXN0KCk7XHJcbiAgICBtb2RpZmllZEl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgIGl0ZW0uJGV0YWcgPSByZXMubmV3RXRhZ3NbaXRlbS5pZF07XHJcbiAgICAgIGl0ZW0uJG1ldGEgPSB1bmRlZmluZWQ7XHJcbiAgICB9KTtcclxuICAgIGF3YWl0IHRoaXMubWVtLnVwZGF0ZShtb2RpZmllZEl0ZW1zKTsgLy8gRW5zdXJlcyBuZXcgZXRhZyBpcyBpcyBhcHBsaWVkIG9uIG5leHQgYWN0aW9uLlxyXG4gIH1cclxuXHJcbiAgc3RyaXBHcmFwaHMgKGl0ZW1zOiBUW10sIGdyYXBoczogc3RyaW5nW10pIHtcclxuICAgIHJldHVybiBpdGVtcy5tYXAoaXRlbSA9PiB7XHJcbiAgICAgIGNvbnN0IGNsb25lID0gT2JqZWN0LmFzc2lnbih7fSwgaXRlbSk7XHJcbiAgICAgIGdyYXBocy5mb3JFYWNoKGdyYXBoID0+IHtcclxuICAgICAgICBpZiAoaXRlbVtncmFwaF0pIHtcclxuICAgICAgICAgIGNsb25lW2dyYXBoXSA9IChpdGVtW2dyYXBoXSBhcyB7aWQ6c3RyaW5nfVtdKS5tYXAgKGRvYyA9PiAoe2lkOiBkb2MuaWR9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIGNsb25lO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBpbnNlcnQoaXRlbXM6IFRbXSkge1xyXG4gICAgY29uc3Qge2dldENsaWVudCwgb3B0aW1pc3RpYywgdGFibGUsIGdldFF1ZXJ5T3B0aW9uc30gPSB0aGlzLm9wdGlvbnM7XHJcbiAgICBjb25zdCBjbGllbnQgPSBnZXRDbGllbnQoKTtcclxuICAgIGNvbnN0IHF1ZXJ5T3B0aW9ucyA9IGF3YWl0IGdldFF1ZXJ5T3B0aW9ucygpO1xyXG4gICAgY29uc3QgZ3JhcGhzID0gW10uY29uY2F0KHF1ZXJ5T3B0aW9ucy5pbmNsdWRlKTtcclxuICAgIC8vIEdpdmUgSURzIHRvIGVhY2ggaXRlbTpcclxuICAgIGl0ZW1zID0gaXRlbXMubWFwKGl0ZW0gPT4gaXRlbS5pZCA/IGl0ZW0gOiBPYmplY3QuYXNzaWduKHt9LCBpdGVtLCB7aWQ6IGNyZWF0ZVVVSUQoKX0pKTtcclxuICAgIGNvbnN0IHN0cmlwcGVkID0gdGhpcy5zdHJpcEdyYXBocyhpdGVtcywgZ3JhcGhzKTtcclxuICAgIGlmIChvcHRpbWlzdGljKSBhd2FpdCB0aGlzLm1lbS5pbnNlcnQoc3RyaXBwZWQubWFwKHggPT4gT2JqZWN0LmFzc2lnbih7fSwgeCwgeyRtZXRhOiAnYWRkaW5nJ30pKSk7XHJcbiAgICBjb25zdCBiciA9IG5ldyBCYXRjaFJ1bm5lcigpO1xyXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIHN0cmlwcGVkKSB7XHJcbiAgICAgIC8vIEFsc28gYWRkIGxpbmtzIHRvIGFsbCBmb3JlaWduIHJlbGF0ZWQgaXRlbXM6XHJcbiAgICAgIGZvciAoY29uc3QgZ3JhcGggb2YgZ3JhcGhzKSB7XHJcbiAgICAgICAgY29uc3QgZm9yZWlnbkl0ZW1zOiBEb2N1bWVudFtdID0gaXRlbVtncmFwaF07XHJcbiAgICAgICAgaWYgKGZvcmVpZ25JdGVtcykge1xyXG4gICAgICAgICAgZm9yZWlnbkl0ZW1zLmZvckVhY2goZG9jID0+IHtcclxuICAgICAgICAgICAgYnIubGluazIodGFibGUsIGl0ZW0uaWQsIGdyYXBoLCBkb2MuaWQpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGJyLmFkZCh0YWJsZSwgaXRlbSk7XHJcbiAgICB9XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCBjbGllbnQuYmF0Y2goYnIubXV0YXRpb25SZXF1ZXN0cykuY2F0Y2goZSA9PiB7XHJcbiAgICAgIGlmIChvcHRpbWlzdGljKSB0aGlzLm1lbS5kZWxldGUoaXRlbXMubWFwKGl0ZW0gPT4gaXRlbS5pZCkpO1xyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZSk7XHJcbiAgICB9KVxyXG4gICAgdGhpcy5yZWdlbmVyYXRlQ2FjaGVCdXN0KCk7XHJcbiAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4gaXRlbS4kZXRhZyA9IHJlcy5uZXdFdGFnc1tpdGVtLmlkXSk7XHJcbiAgICBpZiAob3B0aW1pc3RpYylcclxuICAgICAgYXdhaXQgdGhpcy5tZW0udXBkYXRlKGl0ZW1zKTsgLy8gVXBkYXRlIHdpdGggbmV3ICRldGFnLlxyXG4gICAgZWxzZVxyXG4gICAgICBhd2FpdCB0aGlzLm1lbS5pbnNlcnQoaXRlbXMpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZGVsZXRlIChpZHM6IHN0cmluZ1tdKSB7XHJcbiAgICBjb25zdCB7Z2V0Q2xpZW50LCBvcHRpbWlzdGljLCB0YWJsZX0gPSB0aGlzLm9wdGlvbnM7XHJcbiAgICBjb25zdCBjbGllbnQgPSBnZXRDbGllbnQoKTtcclxuICAgIGlmIChvcHRpbWlzdGljKSBhd2FpdCB0aGlzLm1lbS51cGRhdGUoaWRzXHJcbiAgICAgIC5tYXAoaWQgPT4gdGhpcy5tZW0uaXRlbXMuZmluZCh4ID0+IHguaWQgPT09IGlkKSlcclxuICAgICAgLmZpbHRlcih4ID0+IHgpXHJcbiAgICAgIC5tYXAoeCA9PiBPYmplY3QuYXNzaWduKHt9LCB4LCB7JG1ldGE6ICdkZWxldGluZyd9KSkpO1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgY2xpZW50LmRvIChiciA9PiBpZHMuZm9yRWFjaChpZCA9PiBici5kZWxldGUodGFibGUsIGlkKSkpLmNhdGNoKGFzeW5jIGUgPT4ge1xyXG4gICAgICBpZiAob3B0aW1pc3RpYykge1xyXG4gICAgICAgIGF3YWl0IHRoaXMubWVtLnVwZGF0ZShpZHNcclxuICAgICAgICAgIC5tYXAoaWQgPT4gdGhpcy5tZW0uaXRlbXMuZmluZCh4ID0+IHguaWQgPT09IGlkKSlcclxuICAgICAgICAgIC5maWx0ZXIoeCA9PiB4KVxyXG4gICAgICAgICAgLm1hcCh4ID0+IHtcclxuICAgICAgICAgICAgeCA9IE9iamVjdC5hc3NpZ24oe30sIHgpO1xyXG4gICAgICAgICAgICBkZWxldGUgeC4kbWV0YTtcclxuICAgICAgICAgICAgcmV0dXJuIHg7XHJcbiAgICAgICAgICB9KSk7XHJcbiAgICAgIH1cclxuICAgICAgdGhyb3cgZTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5yZWdlbmVyYXRlQ2FjaGVCdXN0KCk7XHJcbiAgICBhd2FpdCB0aGlzLm1lbS5kZWxldGUoaWRzKTtcclxuICB9XHJcbn1cclxuIiwiXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFJlcG9Db21tdW5pY2F0b3I8VCBleHRlbmRzIHtpZDogc3RyaW5nfT4ge1xyXG4gIHF1ZXJ5KCk6IFByb21pc2U8VFtdPjtcclxufVxyXG5cclxudHlwZSBTdWJzY3JpYmVyPFQ+ID0gKGl0ZW1zOlRbXSwgZXJyb3I6IHVuZGVmaW5lZCB8IEVycm9yKSA9PiBhbnk7XHJcblxyXG5leHBvcnQgY2xhc3MgUmVwbzxUIGV4dGVuZHMge2lkOiBzdHJpbmd9PiB7XHJcbiAgbGlzdFByb21pc2U6IFByb21pc2U8dm9pZD47XHJcbiAgaXRlbXM6IFRbXTtcclxuICBlcnJvcj86IEVycm9yO1xyXG4gIHN1YnNjcmliZXJzOiBTdWJzY3JpYmVyPFQ+W107XHJcblxyXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBjb21tOiBSZXBvQ29tbXVuaWNhdG9yPFQ+KSB7XHJcbiAgICB0aGlzLmxpc3RQcm9taXNlID0gbnVsbDtcclxuICAgIHRoaXMuaXRlbXMgPSBudWxsO1xyXG4gICAgdGhpcy5zdWJzY3JpYmVycyA9IFtdO1xyXG4gIH1cclxuXHJcbiAgc3Vic2NyaWJlKHN1YnNjcmliZXI6IFN1YnNjcmliZXI8VD4pIHtcclxuICAgIHJldHVybiB0aGlzLmVuc3VyZUhhc0RhdGEoKS50aGVuKCgpPT57XHJcbiAgICAgIHN1YnNjcmliZXIodGhpcy5pdGVtcywgdGhpcy5lcnJvcik7XHJcbiAgICAgIHRoaXMuc3Vic2NyaWJlcnMucHVzaChzdWJzY3JpYmVyKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdW5zdWJzY3JpYmUoc3Vic2NyaWJlcjogU3Vic2NyaWJlcjxUPikge1xyXG4gICAgdGhpcy5zdWJzY3JpYmVycyA9IHRoaXMuc3Vic2NyaWJlcnMuZmlsdGVyIChzID0+IHMgIT09IHN1YnNjcmliZXIpO1xyXG4gIH1cclxuXHJcbiAgbm90aWZ5U3Vic2NyaWJlcnMoKSB7XHJcbiAgICB0aGlzLnN1YnNjcmliZXJzLmZvckVhY2gocyA9PiBzKHRoaXMuaXRlbXMsIHRoaXMuZXJyb3IpKTtcclxuICB9XHJcblxyXG4gIGVuc3VyZUhhc0RhdGEoKSB7XHJcbiAgICBpZiAoIXRoaXMubGlzdFByb21pc2UpIHRoaXMucmVmcmVzaEZyb21TZXJ2ZXIoKTtcclxuICAgIHJldHVybiB0aGlzLmxpc3RQcm9taXNlO1xyXG4gIH1cclxuXHJcbiAgcmVmcmVzaEZyb21TZXJ2ZXIoKSB7XHJcbiAgICB0aGlzLmxpc3RQcm9taXNlID0gdGhpcy5jb21tLnF1ZXJ5KCkudGhlbihpdGVtcyA9PiB7XHJcbiAgICAgIHRoaXMuaXRlbXMgPSBpdGVtcztcclxuICAgICAgdGhpcy5lcnJvciA9IG51bGw7XHJcbiAgICAgIHRoaXMubm90aWZ5U3Vic2NyaWJlcnMoKTtcclxuICAgIH0pLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xyXG4gICAgICB0aGlzLml0ZW1zID0gdGhpcy5pdGVtcyB8fCBbXTtcclxuICAgICAgdGhpcy5ub3RpZnlTdWJzY3JpYmVycygpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdGhpcy5saXN0UHJvbWlzZTtcclxuICB9XHJcbiAgXHJcbiAgYXN5bmMgdXBkYXRlKGl0ZW06IFQgfCBUW10pIHtcclxuICAgIGF3YWl0IHRoaXMuZW5zdXJlSGFzRGF0YSgpO1xyXG4gICAgY29uc3QgdXBkYXRlZEl0ZW1zID0gQXJyYXkuaXNBcnJheShpdGVtKSA/IGl0ZW0gOiBbaXRlbV07XHJcbiAgICB0aGlzLml0ZW1zID0gdGhpcy5pdGVtcy5tYXAoaXQgPT4ge1xyXG4gICAgICBjb25zdCB1cGRhdGVkSXRlbSA9IHVwZGF0ZWRJdGVtcy5maW5kKCh7aWR9KSA9PiBpdC5pZCA9PT0gaWQpO1xyXG4gICAgICByZXR1cm4gdXBkYXRlZEl0ZW0gP1xyXG4gICAgICAgIE9iamVjdC5hc3NpZ24oe30sIHVwZGF0ZWRJdGVtKSA6XHJcbiAgICAgICAgaXQ7XHJcbiAgICB9KTtcclxuICAgIHRoaXMubm90aWZ5U3Vic2NyaWJlcnMoKTtcclxuICB9XHJcblxyXG4gIGluc2VydChpdGVtOiBUIHwgVFtdKSB7XHJcbiAgICByZXR1cm4gdGhpcy5lbnN1cmVIYXNEYXRhKCkudGhlbigoKT0+e1xyXG4gICAgICB0aGlzLml0ZW1zID0gdGhpcy5pdGVtcy5jb25jYXQoaXRlbSk7XHJcbiAgICAgIHRoaXMubm90aWZ5U3Vic2NyaWJlcnMoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlKGlkOiBzdHJpbmcgfCBzdHJpbmdbXSkge1xyXG4gICAgY29uc3QgaWRzID0gQXJyYXkuaXNBcnJheShpZCkgPyBpZCA6IFtpZF07XHJcbiAgICByZXR1cm4gdGhpcy5lbnN1cmVIYXNEYXRhKCkudGhlbigoKT0+e1xyXG4gICAgICB0aGlzLml0ZW1zID0gdGhpcy5pdGVtcy5maWx0ZXIoaXQgPT4gIWlkcy5zb21lKGlkID0+IGl0LmlkID09PSBpZCkpO1xyXG4gICAgICB0aGlzLm5vdGlmeVN1YnNjcmliZXJzKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHtLZWRSZXBvfSBmcm9tICcuL2tlZC1yZXBvJztcclxuaW1wb3J0IHsgVXNlclRhc2ssIFVzZXJTdWJUYXNrIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgZW52IGZyb20gJy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCB7IFdlZWtQbGFubmVyUGVyc2lzdGVkU3RhdGUgfSBmcm9tIFwiLi4vY29tcG9uZW50cy93ZWVrcGxhbm5lci93ZWVrcGxhbm5lci1wZXJzaXN0ZWQtc3RhdGVcIjtcclxuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xyXG5pbXBvcnQgeyBjcmVhdGVVVUlELCBEb2N1bWVudEFjY2VzcywgS2VkQmFja2VuZENsaWVudCB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcclxuaW1wb3J0IHsgZ2V0QWRqdXN0ZWRXZWVrLCBLRURXZWVrIH0gZnJvbSAnLi4vdXRpbHMvd2Vla3V0aWwnO1xyXG5pbXBvcnQgeyBVc2VyIH0gZnJvbSAnLi4vY29udHJhY3RzL2tlZC1tb2RlbHMnO1xyXG5cclxuZXhwb3J0IGxldCB1c2VyVGFza3NSZXBvID0gZW52LnVzZXJUYXNrc1JlcG8gYXMgVXNlclRhc2tzUmVwbztcclxuXHJcbmV4cG9ydCBjbGFzcyBVc2VyVGFza3NSZXBvIGV4dGVuZHMgS2VkUmVwbzxVc2VyVGFzaz4ge1xyXG4gIHBlcnNpc3RlZFN0YXRlOiBXZWVrUGxhbm5lclBlcnNpc3RlZFN0YXRlIHwgbnVsbDtcclxuICBnZXRDdXJyZW50VXNlcjogKCk9PlVzZXI7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGdldENsaWVudDogKCk9PktlZEJhY2tlbmRDbGllbnQsIGdldEN1cnJlbnRVc2VyOiAoKT0+VXNlcikgeyAgICBcclxuICAgIHN1cGVyKHtcclxuICAgICAgZ2V0Q2xpZW50LFxyXG4gICAgICBvcHRpbWlzdGljOiB0cnVlLFxyXG4gICAgICB0YWJsZTogXCJ1c2VydGFza3NcIixcclxuICAgICAgdXNlcjogZ2V0Q3VycmVudFVzZXIoKSA/IGdldEN1cnJlbnRVc2VyKCkubWFpbCA6IFwiXCIsXHJcbiAgICAgIGdldFF1ZXJ5T3B0aW9uczogYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gZ2V0Q3VycmVudFVzZXIoKTtcclxuICAgICAgICBjb25zdCB1c2VyRW1haWwgPSBjdXJyZW50VXNlciA/IGN1cnJlbnRVc2VyLm1haWwgOiBcIlwiO1xyXG4gICAgICAgIGlmICghdGhpcy5wZXJzaXN0ZWRTdGF0ZSlcclxuICAgICAgICAgIHRoaXMucGVyc2lzdGVkU3RhdGUgPSBhd2FpdCBXZWVrUGxhbm5lclBlcnNpc3RlZFN0YXRlLmxvYWQodXNlckVtYWlsKTtcclxuICAgICAgICBjb25zdCB7IHdlZWtEYXRlIH0gPSB0aGlzLnBlcnNpc3RlZFN0YXRlO1xyXG4gICAgICAgIGNvbnN0IHdlZWtOdW1iZXIgPSBtb21lbnQod2Vla0RhdGUpLndlZWsoKTtcclxuICAgICAgICBjb25zdCBrZWRXZWVrID0gS0VEV2Vlayhtb21lbnQod2Vla0RhdGUpLnllYXIoKSwgd2Vla051bWJlcik7XHJcbiAgICAgICAgLypjb25zdCBbZnJvbSwgdG9dID0gW21vbWVudCh3ZWVrRGF0ZSkuc3RhcnRPZignd2VlaycpLCBtb21lbnQod2Vla0RhdGUpLmVuZE9mKCd3ZWVrJyldXHJcbiAgICAgICAgICAubWFwKG0gPT4gbS50b0RhdGUoKS5nZXRUaW1lKCkpOyovXHJcbiAgICAgICAgXHJcbiAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBmcm9tOiBrZWRXZWVrLm5vdEJlZm9yZSxcclxuICAgICAgICAgICAgdG86IGtlZFdlZWsubm90QWZ0ZXIsXHJcbiAgICAgICAgICAgIHJvbGU6IFwiVVNFUlwiLFxyXG4gICAgICAgICAgICBpbmNsdWRlOiBbXCJ0YXNrXCIsIFwiY291cnNlXCJdLFxyXG4gICAgICAgICAgICBmbGFnczogW1wiaW5jbHVkZUlkc09ubHlcIl0sXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgdGhpcy5wZXJzaXN0ZWRTdGF0ZSA9IG51bGw7XHJcbiAgICB0aGlzLmdldEN1cnJlbnRVc2VyID0gZ2V0Q3VycmVudFVzZXI7XHJcbiAgfVxyXG5cclxuICBhc3luYyB1cGRhdGVQZXJzaXN0ZWRTdGF0ZShzdGF0ZUNoYW5nZXM6IFBhcnRpYWw8V2Vla1BsYW5uZXJQZXJzaXN0ZWRTdGF0ZT4pIHtcclxuICAgIE9iamVjdC5hc3NpZ24odGhpcy5wZXJzaXN0ZWRTdGF0ZSwgc3RhdGVDaGFuZ2VzKTtcclxuICAgIGF3YWl0IHRoaXMucGVyc2lzdGVkU3RhdGUuc2F2ZSgpO1xyXG4gICAgdGhpcy5tZW0ubm90aWZ5U3Vic2NyaWJlcnMoKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHNldFRhc2tEb25lU3RhdGUodXNlclRhc2s6IFVzZXJUYXNrLCBkb25lOiBib29sZWFuKSB7XHJcbiAgICBjb25zdCB7Z2V0Q2xpZW50LCBvcHRpbWlzdGljLCB0YWJsZX0gPSB0aGlzLm9wdGlvbnM7XHJcbiAgICBjb25zdCBjbGllbnQgPSBnZXRDbGllbnQoKTtcclxuICAgIGNvbnN0IG1vZGlmaWVkSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIHVzZXJUYXNrLCB7ZG9uZX0pO1xyXG4gICAgaWYgKG9wdGltaXN0aWMpIGF3YWl0IHRoaXMubWVtLnVwZGF0ZShPYmplY3QuYXNzaWduKHt9LCBtb2RpZmllZEl0ZW0sIHskbWV0YTogJ3VwZGF0aW5nJ30pKTtcclxuICAgIC8vIE5vdyBtYWtlIHN1cmUgdG8gY2hhbmdlIHRoZSBzdGF0ZSBmb3Igb3RoZXIgd2Vla3MgYXMgd2VsbDpcclxuICAgIGNvbnN0IHNpbWlsYXJUYXNrcyA9IGF3YWl0IGNsaWVudC5saXN0PFVzZXJUYXNrPigndXNlcnRhc2tzJywge1xyXG4gICAgICBuYW1lOiB1c2VyVGFzay5uYW1lLFxyXG4gICAgICByb2xlOiBcIlVTRVJcIixcclxuICAgICAgaW5jbHVkZTogW1widGFza1wiLFwiY291cnNlXCJdLFxyXG4gICAgICBmbGFnczogW1wiaW5jbHVkZUlkc09ubHlcIl0sXHJcbiAgICAgIGZyb206IG1vbWVudCh0aGlzLnBlcnNpc3RlZFN0YXRlLndlZWtEYXRlKS5hZGQoLTMsICd3ZWVrcycpLnZhbHVlT2YoKSxcclxuICAgICAgdG86IG1vbWVudCh0aGlzLnBlcnNpc3RlZFN0YXRlLndlZWtEYXRlKS5hZGQoMywgJ3dlZWtzJykudmFsdWVPZigpXHJcbiAgICB9LCB7XHJcbiAgICAgIGNhY2hlOiAnbm8tY2FjaGUnXHJcbiAgICB9KTtcclxuICAgIGNvbnN0IGlkZW50aWNhbFRhc2tzID0gc2ltaWxhclRhc2tzLmZpbHRlcih0ID0+XHJcbiAgICAgIHQuY291cnNlTmFtZSA9PT0gdXNlclRhc2suY291cnNlTmFtZSAmJlxyXG4gICAgICB0LmxlYXJuaW5nR29hbCA9PT0gdXNlclRhc2subGVhcm5pbmdHb2FsICYmXHJcbiAgICAgICghdXNlclRhc2sudGFzayB8fCB0LnRhc2subWFwKHQ9PnQuaWQpLmpvaW4oJycpID09PSB1c2VyVGFzay50YXNrLm1hcCh0PT50LmlkKS5qb2luKCcnKSkgJiZcclxuICAgICAgKCF1c2VyVGFzay5jb3Vyc2UgfHwgdC5jb3Vyc2UubWFwKGM9PmMuaWQpLmpvaW4oJycpID09PSB1c2VyVGFzay5jb3Vyc2UubWFwKGM9PmMuaWQpLmpvaW4oJycpKSk7XHJcbiAgICBpZiAoaWRlbnRpY2FsVGFza3MubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIC8vIFdvcmthcm91bmQgZm9yIGlzc3VlIGluIFN1YmplY3RQbGFubmVyIG1pZ3JhdGlvbiAodXNlcnRhc2tzIHdpdGggbG9uZyBuYW1lcyBpcyBub3QgZm91bmQpXHJcbiAgICAgIGlkZW50aWNhbFRhc2tzLnB1c2godXNlclRhc2spXHJcbiAgICB9XHJcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZShpZGVudGljYWxUYXNrcywgdCA9PiB0LmRvbmUgPSBkb25lKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHNldFN1YlRhc2tEb25lU3RhdGUgKHVzZXJUYXNrOiBVc2VyVGFzaywgc3ViVGFza0lkOiBzdHJpbmcsIGRvbmU6IGJvb2xlYW4pIHtcclxuICAgIGNvbnN0IHtnZXRDbGllbnQsIG9wdGltaXN0aWMsIHRhYmxlfSA9IHRoaXMub3B0aW9ucztcclxuICAgIGNvbnN0IGNsaWVudCA9IGdldENsaWVudCgpO1xyXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoW3VzZXJUYXNrXSxcclxuICAgICAgdCA9PiB0LnN1YlRhc2tzICYmIHQuc3ViVGFza3MuZmlsdGVyKHN0ID0+IHN0LmlkID09PSBzdWJUYXNrSWQpXHJcbiAgICAgICAgLmZvckVhY2goc3QgPT4gc3QuZG9uZSA9IGRvbmUpKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHNldFdlZWtQbGFubmVyQm94T3Blbihjb3Vyc2VOYW1lOiBzdHJpbmcsIGlzT3BlbjogYm9vbGVhbikge1xyXG4gICAgY29uc3Qgb3BlbkNvdXJzZXMgPSB7IC4uLnRoaXMucGVyc2lzdGVkU3RhdGUub3BlbkNvdXJzZXMgfTtcclxuICAgIGlmIChpc09wZW4pXHJcbiAgICAgIG9wZW5Db3Vyc2VzW2NvdXJzZU5hbWVdID0gdHJ1ZTtcclxuICAgIGVsc2VcclxuICAgICAgZGVsZXRlIG9wZW5Db3Vyc2VzW2NvdXJzZU5hbWVdO1xyXG4gICAgYXdhaXQgdGhpcy51cGRhdGVQZXJzaXN0ZWRTdGF0ZSh7b3BlbkNvdXJzZXN9KTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGNoYW5nZVdlZWsod2Vla0RhdGU6IERhdGUpIHtcclxuICAgIGxldCBwZXJzaXN0ZWRTdGF0ZSA9IHRoaXMucGVyc2lzdGVkU3RhdGU7XHJcbiAgICBpZiAoIXBlcnNpc3RlZFN0YXRlKSB7XHJcbiAgICAgIHBlcnNpc3RlZFN0YXRlID0gYXdhaXQgV2Vla1BsYW5uZXJQZXJzaXN0ZWRTdGF0ZS5sb2FkKHRoaXMub3B0aW9ucy51c2VyKTtcclxuICAgIH1cclxuICAgIGNvbnN0IG5ld1BlcnNpc3RlZCA9IG5ldyBXZWVrUGxhbm5lclBlcnNpc3RlZFN0YXRlKHBlcnNpc3RlZFN0YXRlKTtcclxuICAgIG5ld1BlcnNpc3RlZC53ZWVrRGF0ZSA9IG1vbWVudCh3ZWVrRGF0ZSkuc3RhcnRPZignd2VlaycpLnZhbHVlT2YoKTtcclxuICAgIG5ld1BlcnNpc3RlZC5zYXZlKCk7XHJcbiAgICB0aGlzLnBlcnNpc3RlZFN0YXRlID0gbmV3UGVyc2lzdGVkO1xyXG4gICAgYXdhaXQgdGhpcy5tZW0ucmVmcmVzaEZyb21TZXJ2ZXIoKTtcclxuICB9XHJcblxyXG4gIHN1YnNjcmliZShzdWJzY3JpYmVyOiAodXNlclRhc2tzOiBVc2VyVGFza1tdLCBwZXJzaXN0ZWRTdGF0ZTogV2Vla1BsYW5uZXJQZXJzaXN0ZWRTdGF0ZSwgd2Vla1RleHRzVVQ6IFVzZXJUYXNrKSA9PiB2b2lkKSB7XHJcbiAgICBjb25zdCBwcm94eVN1YnNjcmliZXIgPSAodXNlclRhc2tzOiBVc2VyVGFza1tdKSA9PiB7XHJcbiAgICAgIHN1YnNjcmliZXIoXHJcbiAgICAgICAgdXNlclRhc2tzLmZpbHRlcih1dCA9PiAhdXQud2Vla1RleHRzKSxcclxuICAgICAgICB0aGlzLnBlcnNpc3RlZFN0YXRlLFxyXG4gICAgICAgIHVzZXJUYXNrcy5maWx0ZXIodXQgPT4gISF1dC53ZWVrVGV4dHMpWzBdIHx8IHtcclxuICAgICAgICAgIGlkOiBjcmVhdGVVVUlEKCksXHJcbiAgICAgICAgICBkYXRlVGltZTogdGhpcy5wZXJzaXN0ZWRTdGF0ZS53ZWVrRGF0ZSxcclxuICAgICAgICAgIHdlZWtUZXh0czoge2Fzc2Vzc21lbnQ6JycsIHN0cmF0ZWd5OicnfSxcclxuICAgICAgICAgIGFjbDogW1xyXG4gICAgICAgICAgICAvLyBEZWZhdWx0IEFDTDogTGV0IHVzZXIgc2VsZiBoYXZlIGZ1bGwgY29udHJvbCBvdmVyIHRoaXMgaXRlbTpcclxuICAgICAgICAgICAgbmV3IERvY3VtZW50QWNjZXNzKFwiZW1haWxcIiwgdGhpcy5nZXRDdXJyZW50VXNlcigpLm1haWwsIFwiU1wiKSxcclxuICAgICAgICAgICAgLy8gQWRkaXRpb25hbCBBQ0w6IExldCBlbXBsb3llZXMgb24gc2FtZSBzY2hvb2wgaGF2ZSByZWFkIGFjY2VzcyB0byBpdC5cclxuICAgICAgICAgICAgLy8gVGhpcyBjdXJyZW50bHkgb25seSBhcHBsaWVzIHRvIHRhc2tzIHRoYXQgcmVmZXIgdG8gY291cnNlIHRhc2tzIChub3Qgb3duIHRhc2tzISlcclxuICAgICAgICAgICAgbmV3IERvY3VtZW50QWNjZXNzKFwic2Nob29sUm9sZVwiLCBgJHt0aGlzLmdldEN1cnJlbnRVc2VyKCkuc2Nob29sfS9FTVBMT1lFRWAsIFwiUlwiKVxyXG4gICAgICAgICAgXS5tYXAoYWMgPT4gYWMudG9TdHJpbmcoKSlcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBwcm94eVN1YnNjcmliZXJbXCJzdWJzY3JpYmVyXCJdID0gc3Vic2NyaWJlcjtcclxuICAgIHRoaXMubWVtLnN1YnNjcmliZShwcm94eVN1YnNjcmliZXIpO1xyXG4gIH1cclxuXHJcbiAgdW5zdWJzY3JpYmUoc3Vic2NyaWJlcjogKHVzZXJUYXNrczogVXNlclRhc2tbXSwgcGVyc2lzdGVkU3RhdGU6IFdlZWtQbGFubmVyUGVyc2lzdGVkU3RhdGUsIHdlZWtUZXh0c1VUOiBVc2VyVGFzaykgPT4gdm9pZCkge1xyXG4gICAgdGhpcy5tZW0uc3Vic2NyaWJlcnMgPSB0aGlzLm1lbS5zdWJzY3JpYmVycy5maWx0ZXIgKHMgPT4gc1tcInN1YnNjcmliZXJcIl0gIT09IHN1YnNjcmliZXIpO1xyXG4gIH1cclxuICBcclxufVxyXG5cclxuaWYgKCF1c2VyVGFza3NSZXBvKSB7XHJcbiAgdXNlclRhc2tzUmVwbyA9IGVudi51c2VyVGFza3NSZXBvID0gbmV3IFVzZXJUYXNrc1JlcG8oXHJcbiAgICAoKT0+ZW52LmtlZEJhY2tlbmRDbGllbnQsXHJcbiAgICAoKT0+ZW52LmN1cnJlbnRVc2VyKTtcclxuICB1c2VyVGFza3NSZXBvLm1lbS5lbnN1cmVIYXNEYXRhKCk7XHJcbn1cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQge0x9IGZyb20gJy4vdXRpbHMnO1xyXG5pbXBvcnQge2RifSBmcm9tICcuLi9nbG9iYWxzL2RiJztcclxuaW1wb3J0IHsgS2VkQmFja2VuZFdyaXRlciB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IFJlbW92ZUl0ZW0gfSBmcm9tICcuLi9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyL3N1Yi1jb21wb25lbnRzL3JlbW92ZS1pdGVtJztcclxuXHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG59XHJcblxyXG5pbnRlcmZhY2UgU3RhdGUge1xyXG4gIGVycm9yczogRXJyb3JTdHJ1Y3RbXTtcclxuICBpbmZvczogc3RyaW5nW107XHJcbiAgLy9kYldyaXRlclJldHJ5YWJsZUVycm9yPzogRXJyb3I7XHJcbiAgZGJXcml0ZXJJc1NhdmluZz86IGJvb2xlYW47XHJcbiAgZGJXcml0ZXJJc0VkaXRlZD86IGJvb2xlYW47XHJcbn1cclxuXHJcbmludGVyZmFjZSBFcnJvclN0cnVjdCB7XHJcbiAgbWVzc2FnZTogc3RyaW5nO1xyXG4gIHJldHJ5YWJsZT86IGJvb2xlYW47XHJcbiAgZGV0YWlscz86IEVycm9yO1xyXG4gIHNob3dEZXRhaWxzPzogYm9vbGVhbjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEVycm9yU3VjY2Vzc0ZlZWRiYWNrIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLFN0YXRlPiB7XHJcbiAgY29uc3RydWN0b3IgKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZT17XHJcbiAgICAgIGVycm9yczogW10sXHJcbiAgICAgIGluZm9zOiBbXVxyXG4gICAgfTtcclxuICAgIHRoaXMuX3VuaGFuZGxlZFJlamVjdGlvbiA9IHRoaXMuX3VuaGFuZGxlZFJlamVjdGlvbi5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5fZXJyb3IgPSB0aGlzLl9lcnJvci5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5fY3VzdG9tRXJyb3IgPSB0aGlzLl9jdXN0b21FcnJvci5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5fb25JbmZvID0gdGhpcy5fb25JbmZvLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLl9kYldyaXRlckVycm9yID0gdGhpcy5fZGJXcml0ZXJFcnJvci5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5fZGJXcml0ZXJTdGF0ZUNoYW5nZWQgPSB0aGlzLl9kYldyaXRlclN0YXRlQ2hhbmdlZC5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBfYWRkRXJyb3IobWVzc2FnZTogc3RyaW5nLCBkZXRhaWxzPzogRXJyb3IsIHJldHJ5YWJsZT86IGJvb2xlYW4pIHtcclxuICAgIC8vY29uc29sZS5lcnJvcihtZXNzYWdlLCB7cmV0cnlhYmxlOiAhIXJldHJ5YWJsZSwgZGV0YWlsc30pO1xyXG4gICAgdGhpcy5zZXRTdGF0ZSgoe2Vycm9yc30pID0+IHtcclxuICAgICAgaWYgKGVycm9ycy5zb21lKGUgPT4gZS5tZXNzYWdlID09PSBtZXNzYWdlKSkgcmV0dXJuIHtlcnJvcnN9O1xyXG4gICAgICBpZiAoZXJyb3JzLmxlbmd0aCA+IDIpIGVycm9ycyA9IGVycm9ycy5zbGljZSgxKTtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBlcnJvcnM6IGVycm9ycy5jb25jYXQoW3ttZXNzYWdlLCBkZXRhaWxzLCByZXRyeWFibGV9XSlcclxuICAgICAgfTtcclxuICAgIH0pO1xyXG4gICAgLy8gUmVtb3ZlIG5vbi1yZXRyeWFibGUgZXJyb3JzIGFmdGVyIDMwIHNlY29uZHM6XHJcbiAgICBpZiAoIXJldHJ5YWJsZSkgc2V0VGltZW91dCgoKT0+e1xyXG4gICAgICB0aGlzLnNldFN0YXRlKCh7ZXJyb3JzfSkgPT4gKHtcclxuICAgICAgICBlcnJvcnM6IGVycm9ycy5maWx0ZXIoZSA9PiBlLm1lc3NhZ2UgIT09IG1lc3NhZ2UpXHJcbiAgICAgIH0pKTtcclxuICAgIH0sIDMwMDAwKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgX2FkZEluZm8obWVzc2FnZTogc3RyaW5nKSB7XHJcbiAgICBpZiAobWVzc2FnZSA9PT0gXCJcIikge1xyXG4gICAgICAvLyBUdXJuIG9mZiBjdXJyZW50IGluZm8gbWVzc2FnZXNcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7aW5mb3M6IFtdfSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMuc2V0U3RhdGUoKHtpbmZvc30pID0+IHtcclxuICAgICAgaWYgKGluZm9zLnNvbWUoaW5mbyA9PiBpbmZvID09PSBtZXNzYWdlKSkgcmV0dXJuIHtpbmZvc307XHJcbiAgICAgIGlmIChpbmZvcy5sZW5ndGggPiAxKSBpbmZvcyA9IGluZm9zLnNsaWNlKDEpO1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGluZm9zOiBbbWVzc2FnZV0gLy8gd2FzOiBpbmZvcy5jb25jYXQobWVzc2FnZSkuIEJ1dCBpdCBzdWNrcyFcclxuICAgICAgfTtcclxuICAgIH0pO1xyXG4gICAgLy8gUmVtb3ZlIGluZm8gbWVzc2FnZSBhZnRlciAxMCBzZWNvbmRzOlxyXG4gICAgc2V0VGltZW91dCgoKT0+e1xyXG4gICAgICB0aGlzLnNldFN0YXRlKCh7aW5mb3N9KSA9PiAoe1xyXG4gICAgICAgIGluZm9zOiBpbmZvcy5maWx0ZXIobXNnID0+IG1zZyAhPT0gbWVzc2FnZSlcclxuICAgICAgfSkpO1xyXG4gICAgfSwgMTAwMDApO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBfZGJXcml0ZXJFcnJvciAoZXJyb3I6IEVycm9yLCByZXRyeWFibGU6IGJvb2xlYW4pIHtcclxuICAgIHRoaXMuX2FkZEVycm9yKGBEZXQgZ8OlciBpbnRlIGF0dCBzcGFyYSB0aWxsIHNlcnZlcm5gLCBlcnJvciwgcmV0cnlhYmxlKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgX2RiV3JpdGVyU3RhdGVDaGFuZ2VkICh7aXNFZGl0ZWQsIGlzU2F2aW5nfTogS2VkQmFja2VuZFdyaXRlcikge1xyXG4gICAgaWYgKCFpc0VkaXRlZCkge1xyXG4gICAgICAvLyBJZiBpc0VkaXRlZCBpcyBmYWxzZSwgYSBzdWNjZXNzZnVsIHdyaXRlIG11c3QgaGF2ZSBoYXBwZW5lZCwgYW5kXHJcbiAgICAgIC8vIHRoZXJlIGNhbm5vdCBiZSBhbnkgcmV0cnlhYmxlIGVycm9yIGFueW1vcmVcclxuICAgICAgdGhpcy5zZXRTdGF0ZSgoe2Vycm9yc30pID0+IHtcclxuICAgICAgICBlcnJvcnMgPSBlcnJvcnMuZmlsdGVyKGUgPT4gIWUucmV0cnlhYmxlKTtcclxuICAgICAgICByZXR1cm4ge2Vycm9yc307XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIGRiV3JpdGVySXNFZGl0ZWQ6IGlzRWRpdGVkLFxyXG4gICAgICBkYldyaXRlcklzU2F2aW5nOiBpc1NhdmluZ1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd1bmhhbmRsZWRyZWplY3Rpb24nLCB0aGlzLl91bmhhbmRsZWRSZWplY3Rpb24pO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgdGhpcy5fZXJyb3IpO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2N1c3RvbWVycm9yJywgdGhpcy5fY3VzdG9tRXJyb3IpO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2luZm8nLCB0aGlzLl9vbkluZm8pO1xyXG4gICAgZGIud3JpdGVyLm9uRXJyb3IodGhpcy5fZGJXcml0ZXJFcnJvcik7XHJcbiAgICBkYi53cml0ZXIub25TdGF0ZUNoYW5nZSh0aGlzLl9kYldyaXRlclN0YXRlQ2hhbmdlZCk7XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcclxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd1bmhhbmRsZWRyZWplY3Rpb24nLCB0aGlzLl91bmhhbmRsZWRSZWplY3Rpb24pO1xyXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgdGhpcy5fZXJyb3IpO1xyXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2N1c3RvbWVycm9yJywgdGhpcy5fY3VzdG9tRXJyb3IpO1xyXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2luZm8nLCB0aGlzLl9vbkluZm8pO1xyXG4gICAgZGIud3JpdGVyLm9mZih0aGlzLl9kYldyaXRlckVycm9yKTtcclxuICAgIGRiLndyaXRlci5vZmYodGhpcy5fZGJXcml0ZXJTdGF0ZUNoYW5nZWQpO1xyXG4gIH1cclxuXHJcbiAgX3VuaGFuZGxlZFJlamVjdGlvbiAoZXY6IEV2ZW50ICYge3JlYXNvbjogRXJyb3J9KSB7XHJcbiAgICB0aGlzLl9hZGRFcnJvcihgRXR0IG9rw6RudCBmZWwgaW50csOkZmZhZGUuLi5gLCBldi5yZWFzb24pO1xyXG4gIH1cclxuXHJcbiAgX2Vycm9yIChldjogRXZlbnQgJiB7ZXJyb3I6IEVycm9yfSkge1xyXG4gICAgdGhpcy5fYWRkRXJyb3IoZXYuZXJyb3IgPyBldi5lcnJvci5tZXNzYWdlIDogYEV0dCBva8OkbnQgZmVsIGludHLDpGZmYWRlLi4uYCwgZXYuZXJyb3IpO1xyXG4gIH1cclxuXHJcbiAgX2N1c3RvbUVycm9yIChldjogQ3VzdG9tRXZlbnQpIHtcclxuICAgIHRoaXMuX2FkZEVycm9yKGV2LmRldGFpbCk7XHJcbiAgfVxyXG5cclxuICBfb25JbmZvKGV2OiBDdXN0b21FdmVudCkge1xyXG4gICAgdGhpcy5fYWRkSW5mbyhldi5kZXRhaWwpO1xyXG4gIH0gXHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHtlcnJvcnMsIGluZm9zLCBkYldyaXRlcklzU2F2aW5nfSA9IHRoaXMuc3RhdGU7XHJcbiAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJlcnJvci1zdWNjZXNzLWZlZWRiYWNrXCIgc3R5bGU9e3tcclxuICAgICAgcG9zaXRpb246IFwiZml4ZWRcIixcclxuICAgICAgbGVmdDogMCxcclxuICAgICAgdG9wOiAwLFxyXG4gICAgICB3aWR0aDogXCIxMDAlXCIsXHJcbiAgICAgIHBvaW50ZXJFdmVudHM6ICdub25lJ1xyXG4gICAgfX0+XHJcbiAgICAgIDxkaXYgc3R5bGU9e3tkaXNwbGF5OiAndGFibGUnLCBtYXJnaW46IFwiMCBhdXRvXCJ9fT5cclxuICAgICAgICB7ZXJyb3JzLmZpbHRlcihlID0+ICFlLnJldHJ5YWJsZSB8fCAhZGJXcml0ZXJJc1NhdmluZylcclxuICAgICAgICAubWFwKCh7bWVzc2FnZSwgZGV0YWlscywgcmV0cnlhYmxlLCBzaG93RGV0YWlsc30pID0+IChcclxuICAgICAgICAgIDxkaXYga2V5PXttZXNzYWdlfSBjbGFzc05hbWU9XCJlcnJvclwiPlxyXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPXt7ZmxvYXQ6J2xlZnQnfX0+e21lc3NhZ2V9PC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3twb2ludGVyRXZlbnRzOiAnYXV0byd9fT5cclxuICAgICAgICAgICAgICA8UmVtb3ZlSXRlbSBvbkNsaWNrPXsoKT0+dGhpcy5yZW1vdmVFcnJvcihtZXNzYWdlKX0gLz5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIHtkZXRhaWxzIHx8IHJldHJ5YWJsZSA/IDxkaXYgc3R5bGU9e3twb2ludGVyRXZlbnRzOiAnYXV0byd9fT5cclxuICAgICAgICAgICAgICB7ZGV0YWlscyA/IDw+PGEgY2xhc3NOYW1lPVwiYnRuXCIgb25DbGljaz17KCk9PnRoaXMudG9nZ2xlRGV0YWlscyhtZXNzYWdlKX0+e3Nob3dEZXRhaWxzID8gXCJEw7ZsaiBkZXRhaWxlclwiIDogXCJWaXNhIGRldGFpbGplclwifTwvYT4mbmJzcDs8Lz4gOiB1bmRlZmluZWR9XHJcbiAgICAgICAgICAgICAge3Nob3dEZXRhaWxzID8gPHA+eycnK2RldGFpbHN9PC9wPjogPD4mbmJzcDs8Lz59XHJcbiAgICAgICAgICAgICAge3JldHJ5YWJsZSA/IDxhIGNsYXNzTmFtZT1cImJ0blwiIG9uQ2xpY2s9eygpPT50aGlzLnJldHJ5U2F2ZSgpfT5Gw7Zyc8O2ayBzcGFyYSBudTwvYT4gOiB1bmRlZmluZWR9XHJcbiAgICAgICAgICAgIDwvZGl2PjogdW5kZWZpbmVkfVxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKSl9XHJcbiAgICAgICAge2luZm9zLm1hcChtZXNzYWdlID0+IFxyXG4gICAgICAgICAgPHAga2V5PXttZXNzYWdlfSBjbGFzc05hbWU9XCJpbmZvXCI+e21lc3NhZ2V9PC9wPlxyXG4gICAgICAgICl9XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+O1xyXG4gIH1cclxuICByZW1vdmVFcnJvcihtZXNzYWdlOiBzdHJpbmcpOiBhbnkge1xyXG4gICAgdGhpcy5zZXRTdGF0ZSgoe2Vycm9yc30pID0+ICh7XHJcbiAgICAgIGVycm9yczogZXJyb3JzLmZpbHRlcihlID0+IGUubWVzc2FnZSAhPT0gbWVzc2FnZSlcclxuICAgIH0pKTtcclxuICB9XHJcblxyXG4gIHJldHJ5U2F2ZSgpIHtcclxuICAgIGRiLndyaXRlci5yZXRyeVNhdmUoKTtcclxuICB9XHJcblxyXG4gIHRvZ2dsZURldGFpbHMobWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICB0aGlzLnNldFN0YXRlKCh7ZXJyb3JzfSkgPT4gKHtlcnJvcnM6IGVycm9ycy5tYXAoZXJyb3IgPT4gZXJyb3IubWVzc2FnZSA9PT0gbWVzc2FnZSA/XHJcbiAgICAgIHtcclxuICAgICAgICAuLi5lcnJvcixcclxuICAgICAgICBzaG93RGV0YWlsczogIWVycm9yLnNob3dEZXRhaWxzXHJcbiAgICAgIH0gOlxyXG4gICAgICBlcnJvcilcclxuICAgIH0pKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcclxuaW1wb3J0IHsgY2ZnIH0gZnJvbSAnLi4vZ2xvYmFscy9LRUQuY2ZnJztcclxuXHJcbmNvbnN0IEhFQVJUQkVBVF9JTlRFUlZBTCA9IDUgKiA2MCAqIDEwMDA7IC8vIDUgbWludXRlcy5cclxuY29uc3QgSEVBUlRCRUFUX1VSTCA9IGNmZy5LRURfS0VFUF9BTElWRV9VUkw7XHJcblxyXG5sZXQgbGFzdEFjdGl2aXR5ID0gRGF0ZS5ub3coKTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBrZWVwU2Vzc2lvbkFsaXZlKCkge1xyXG4gIHNldEludGVydmFsKG9uVGltZW91dCwgSEVBUlRCRUFUX0lOVEVSVkFMKTtcclxuICBzZXRUaW1lb3V0KCgpPT4kKCdib2R5JylcclxuICAgIC5tb3VzZW1vdmUob25Vc2VyQWN0aXZlKVxyXG4gICAgLmtleXByZXNzKG9uVXNlckFjdGl2ZSlcclxuICAgIC5zY3JvbGwob25Vc2VyQWN0aXZlKSwgMTAwKTtcclxufVxyXG5cclxuZnVuY3Rpb24gb25Vc2VyQWN0aXZlKCkge1xyXG4gIGxhc3RBY3Rpdml0eSA9IERhdGUubm93KCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uVGltZW91dCgpIHtcclxuICBjb25zdCBpbmFjdGl2aXR5VGltZSA9IERhdGUubm93KCkgLSBsYXN0QWN0aXZpdHk7XHJcbiAgaWYgKGluYWN0aXZpdHlUaW1lIDwgSEVBUlRCRUFUX0lOVEVSVkFMKSB7XHJcbiAgICBoZWFydGJlYXQoKTtcclxuICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGhlYXJ0YmVhdCgpIHtcclxuICBjb25zb2xlLmxvZyhgU2VuZGluZyBoZWFydGJlYXQgcmVxdWVzdCB0byAke0hFQVJUQkVBVF9VUkx9YCk7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKEhFQVJUQkVBVF9VUkwsIHtcclxuICAgICAgY2FjaGU6ICduby1jYWNoZScsXHJcbiAgICAgIGNyZWRlbnRpYWxzOiAnc2FtZS1vcmlnaW4nXHJcbiAgICB9KTtcclxuICAgIGNvbnNvbGUubG9nKGBSZXNwb25zZSBmcm9tICR7SEVBUlRCRUFUX1VSTH06ICR7cmVzLnN0YXR1c30gJHtyZXMuc3RhdHVzVGV4dH1gKTtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIGNvbnNvbGUud2FybihgUmVxdWVzdCB0byAke0hFQVJUQkVBVF9VUkx9IGZhaWxlZDogJHtlcnJ9YCk7XHJcbiAgfVxyXG59XHJcbiIsImNvbnN0IERFRkFVTFRfQ0FDSEVfRVhQSVJBVElPTiA9IDMwICogNjAgKiAxMDAwOyAvLyAzMCBtaW51dGVzLlxyXG5cclxudHlwZSBQcm9taXNlUmV0dXJuaW5nTWV0aG9kTmFtZXM8QVBJPiA9IHtcclxuICBbTUVUSE9EIGluIGtleW9mIEFQSV06IEFQSVtNRVRIT0RdIGV4dGVuZHMgKC4uLmFyZ3M6IGFueVtdKSA9PiBQcm9taXNlPGFueT4gPyBNRVRIT0QgOiBuZXZlclxyXG59XHJcblxyXG50eXBlIENvbnZlcnRNZXRob2RUb1N1c3BlbnNlPEY+ID0gRiBleHRlbmRzICguLi5hcmdzOiBpbmZlciBBKSA9PiBQcm9taXNlPGluZmVyIFI+ID9cclxuICAoLi4uYXJnczogQSkgPT4gUiA6XHJcbiAgRjtcclxuXHJcbmV4cG9ydCB0eXBlIFN1c3BlbnNlQmFzZWRBUEk8QVBJPiA9IHtcclxuICBbTUVUSE9EIGluIGtleW9mIFByb21pc2VSZXR1cm5pbmdNZXRob2ROYW1lczxBUEk+XTogQ29udmVydE1ldGhvZFRvU3VzcGVuc2U8QVBJW01FVEhPRF0+XHJcbn1cclxuXHJcbnR5cGUgT3B0aW9ucyA9IHtcclxuICBpc0FwaU1ldGhvZD86IChwcm9wOiBzdHJpbmcpPT5ib29sZWFuLFxyXG4gIGNhY2hlRXhwaXJhdGlvbj86IG51bWJlclxyXG59XHJcblxyXG5jb25zdCBkZWZhdWx0T3B0aW9uczogT3B0aW9ucyA9IHtcclxuICBpc0FwaU1ldGhvZDogZiA9PiB0eXBlb2YgZiA9PT0gJ2Z1bmN0aW9uJyxcclxuICBjYWNoZUV4cGlyYXRpb246IERFRkFVTFRfQ0FDSEVfRVhQSVJBVElPTlxyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VTdXNwZW5zZUFwaTxBUEk+KGFwaTogQVBJLCBvcHRpb25zID0gZGVmYXVsdE9wdGlvbnMpOiBTdXNwZW5zZUJhc2VkQVBJPEFQST5cclxue1xyXG4gIG9wdGlvbnMgPSB7Li4uZGVmYXVsdE9wdGlvbnMsIC4uLm9wdGlvbnN9O1xyXG4gIGNvbnN0IHtpc0FwaU1ldGhvZCwgY2FjaGVFeHBpcmF0aW9ufSA9IG9wdGlvbnM7XHJcblxyXG4gIGNvbnN0IHJ2OiBTdXNwZW5zZUJhc2VkQVBJPEFQST4gPSBPYmplY3QuY3JlYXRlKGFwaSBhcyBhbnkpIGFzIFN1c3BlbnNlQmFzZWRBUEk8QVBJPjtcclxuICBjb25zdCBjYWNoZToge1trZXk6IHN0cmluZ106IHt0aW1lb3V0OiBudW1iZXIsIHZhbHVlPzogYW55LCBlcnJvcj86IGFueSwgcHJvbWlzZT86IFByb21pc2U8YW55Pn19ID0ge307XHJcblxyXG4gIC8vIFdhbGsgdGhlIGluc3RhbmNlICsgcHJvdG90eXBlIGNoYWluIHRvIGdlbmVyYXRlIHN1c3BlbnNlIHZlcnNpb24gb2YgZWFjaCBwcm9taXNlIHJldHVybmluZyBtZXRob2RcclxuICBmb3IgKGxldCBwcm90byA9IGFwaTsgcHJvdG8gJiYgcHJvdG8gIT09IE9iamVjdC5wcm90b3R5cGU7IHByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHByb3RvKSkge1xyXG4gICAgc3VzcGVuZGlmeShwcm90byk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzdXNwZW5kaWZ5KHByb3RvKSB7XHJcbiAgICBPYmplY3Qua2V5cyhwcm90bykuZm9yRWFjaChwcm9wID0+IHtcclxuICAgICAgaWYgKCFydi5oYXNPd25Qcm9wZXJ0eShwcm9wKSAmJiBpc0FwaU1ldGhvZChwcm9wKSkge1xyXG4gICAgICAgIHJ2W3Byb3BdID0gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcclxuICAgICAgICAgIGNvbnN0IGtleSA9IEpTT04uc3RyaW5naWZ5KFtwcm9wLCAuLi5hcmdzXSk7XHJcbiAgICAgICAgICBjb25zdCBjYWNoZWRFbnRyeSA9IGNhY2hlW2tleV07XHJcbiAgICAgICAgICBpZiAoY2FjaGVkRW50cnkgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBpZiAoY2FjaGVkRW50cnkucHJvbWlzZSkgdGhyb3cgY2FjaGVkRW50cnkucHJvbWlzZTtcclxuICAgICAgICAgICAgaWYgKGNhY2hlZEVudHJ5LmVycm9yKSB0aHJvdyBjYWNoZWRFbnRyeS5lcnJvcjtcclxuICAgICAgICAgICAgaWYgKGNhY2hlZEVudHJ5LnRpbWVvdXQgPiBEYXRlLm5vdygpKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGNhY2hlZEVudHJ5LnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBwcm9taXNlID0gcHJvdG9bcHJvcF0uYXBwbHkoYXBpLCBhcmdzKS50aGVuKHJlc3VsdCA9PiB7XHJcbiAgICAgICAgICAgICAgY2FjaGVba2V5XSA9IHt0aW1lb3V0OiBEYXRlLm5vdygpICsgY2FjaGVFeHBpcmF0aW9uLCB2YWx1ZTogcmVzdWx0fTtcclxuICAgICAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgICAgICAgIGNhY2hlW2tleV0gPSB7dGltZW91dDogRGF0ZS5ub3coKSArIGNhY2hlRXhwaXJhdGlvbiwgZXJyb3J9O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY2FjaGVba2V5XSA9IHt0aW1lb3V0OiBEYXRlLm5vdygpICsgY2FjaGVFeHBpcmF0aW9uLCBwcm9taXNlfTtcclxuICAgICAgICAgICAgdGhyb3cgcHJvbWlzZTtcclxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGlmIChlcnJvci50aGVuKSB0aHJvdyBlcnJvcjtcclxuICAgICAgICAgICAgY2FjaGVba2V5XSA9IHt0aW1lb3V0OiBEYXRlLm5vdygpICsgY2FjaGVFeHBpcmF0aW9uLCBlcnJvcn07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBhcyBhbnk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHJ2O1xyXG59XHJcbiIsIlxyXG5leHBvcnQgY2xhc3MgUGVuZGluZ0pvYiB7XHJcbiAgcHJpdmF0ZSB0aW1lb3V0SWQgPSBudWxsO1xyXG4gIHByaXZhdGUgY2FuY2VsbGVkID0gZmFsc2U7XHJcbiAgcHJpdmF0ZSBwZW5kaW5nID0gZmFsc2U7XHJcbiAgcHJpdmF0ZSBpc0pvYkV4ZWN1dGluZyA9IGZhbHNlO1xyXG4gIHByaXZhdGUgam9iQ2FsbGJhY2s6ICgpPT5Qcm9taXNlPGFueT47XHJcbiAgXHJcbiAgY29uc3RydWN0b3IoY2FsbGJhY2s6ICgpPT5Qcm9taXNlPGFueT4pIHtcclxuICAgIHRoaXMuam9iQ2FsbGJhY2sgPSBjYWxsYmFjaztcclxuICB9XHJcblxyXG4gIHRyaWdnZXJDaGFuZ2UodGhyb3R0bGU6IG51bWJlcik6IGFueSB7XHJcbiAgICBpZiAodGhpcy5jYW5jZWxsZWQpIHJldHVybjtcclxuICAgIHRoaXMucGVuZGluZyA9IHRydWU7XHJcbiAgICBpZiAodGhpcy50aW1lb3V0SWQgIT09IG51bGwpXHJcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRJZCk7XHJcbiAgICB0aGlzLnRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCk9PnRoaXMubGF1bmNoSm9iKCksIHRocm90dGxlKTtcclxuICB9XHJcblxyXG4gIHN0b3AoKSB7XHJcbiAgICBpZiAodGhpcy50aW1lb3V0SWQgIT09IG51bGwpXHJcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRJZCk7XHJcbiAgICB0aGlzLnRpbWVvdXRJZCA9IG51bGw7XHJcbiAgICB0aGlzLmNhbmNlbGxlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIGxhdW5jaEpvYigpIHtcclxuICAgIGlmICh0aGlzLmNhbmNlbGxlZCkgcmV0dXJuO1xyXG4gICAgaWYgKCF0aGlzLnBlbmRpbmcpIHJldHVybjtcclxuICAgIGlmICh0aGlzLmlzSm9iRXhlY3V0aW5nKSByZXR1cm47XHJcbiAgICB0aGlzLnRpbWVvdXRJZCA9IG51bGw7XHJcbiAgICB0cnkge1xyXG4gICAgICB0aGlzLmlzSm9iRXhlY3V0aW5nID0gdHJ1ZTtcclxuICAgICAgdGhpcy5wZW5kaW5nID0gZmFsc2U7XHJcbiAgICAgIGF3YWl0IHRoaXMuam9iQ2FsbGJhY2soKTtcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIHRoaXMuaXNKb2JFeGVjdXRpbmcgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnBlbmRpbmcpXHJcbiAgICAgIGF3YWl0IHRoaXMubGF1bmNoSm9iKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBpbnRlcmZhY2UgUGFyc2VRdWVyeVN0cmluZ09wdGlvbnMge1xyXG4gIHRvTG93ZXI/OiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VRdWVyeVN0cmluZyhsb2NhdGlvblNlYXJjaDogc3RyaW5nLCBvcHRpb25zPzogUGFyc2VRdWVyeVN0cmluZ09wdGlvbnMpOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9IHtcclxuICBjb25zdCB7dG9Mb3dlcn0gPSAob3B0aW9ucyB8fMKge30pIGFzIFBhcnNlUXVlcnlTdHJpbmdPcHRpb25zO1xyXG4gIGNvbnN0IHJlc3VsdCA9IHt9O1xyXG4gIGlmIChsb2NhdGlvblNlYXJjaCAmJiBsb2NhdGlvblNlYXJjaC5sZW5ndGggPiAxKVxyXG4gICAgbG9jYXRpb25TZWFyY2guc3Vic3RyKDEpXHJcbiAgICAgIC5zcGxpdCgnJicpXHJcbiAgICAgIC5tYXAocGFydCA9PiBwYXJ0LnNwbGl0KCc9JykubWFwKHMgPT4gZGVjb2RlVVJJQ29tcG9uZW50KHMudHJpbSgpKSkpXHJcbiAgICAgIC5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHJlc3VsdFt0b0xvd2VyID8ga2V5LnRvTG93ZXJDYXNlKCkgOiBrZXldID0gdmFsdWUpO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVuY29kZVBhcmFtcyhwYXJhbXM6IHtba2V5OiBzdHJpbmddOnN0cmluZ30pIHtcclxuICByZXR1cm4gT2JqZWN0LmtleXMocGFyYW1zKS5maWx0ZXIoa2V5ID0+IHBhcmFtc1trZXldICE9PSB1bmRlZmluZWQpLm1hcChrZXkgPT4gYCR7ZW5jb2RlVVJJQ29tcG9uZW50KGtleSl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHBhcmFtc1trZXldKX1gKS5qb2luKCcmJyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVF1ZXJ5U3RyaW5nKHBhcmFtczoge1trZXk6IHN0cmluZ106c3RyaW5nfSkge1xyXG4gIHJldHVybiBcIj9cIiArIGVuY29kZVBhcmFtcyhwYXJhbXMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VIYXNoUXVlcnlTdHJpbmcobG9jYXRpb25IYXNoOiBzdHJpbmcsIG9wdGlvbnM/OiBQYXJzZVF1ZXJ5U3RyaW5nT3B0aW9ucykge1xyXG4gIHJldHVybiBwYXJzZVF1ZXJ5U3RyaW5nKGxvY2F0aW9uSGFzaCwgb3B0aW9ucyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUhhc2hRdWVyeVN0cmluZyhwYXJhbXM6IHtba2V5OiBzdHJpbmddOnN0cmluZ30pIHtcclxuICByZXR1cm4gXCIjXCIgKyBlbmNvZGVQYXJhbXMocGFyYW1zKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNwbGl0VXJsQW5kUXVlcnkgKHVybFdpdGhQb3NzaWJsZVF1ZXJ5OiBzdHJpbmcpIHtcclxuICBjb25zdCBwUXVlcnkgPSB1cmxXaXRoUG9zc2libGVRdWVyeS5pbmRleE9mKCc/Jyk7XHJcbiAgcmV0dXJuIHBRdWVyeSA+PSAwID9cclxuICAgIFt1cmxXaXRoUG9zc2libGVRdWVyeS5zdWJzdHIoMCwgcFF1ZXJ5KSwgdXJsV2l0aFBvc3NpYmxlUXVlcnkuc3Vic3RyKHBRdWVyeSldIDpcclxuICAgIFt1cmxXaXRoUG9zc2libGVRdWVyeSwgXCJcIl07XHJcbn1cclxuIiwiaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xyXG5pbXBvcnQgeyBUZXJtLCBBY2FkZW1pY1llYXIgfSBmcm9tICcuLi9jb250cmFjdHMva2VkLW1vZGVscyc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNjaG9vbE1vbWVudCB7XHJcbiAgYWNhZGVtaWNZZWFyOiBBY2FkZW1pY1llYXI7XHJcbiAgdGVybTogVGVybTtcclxuICB3ZWVrPzogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Rmlyc3RBbmRMYXN0V2Vla09mVGVybSh0ZXJtOiBUZXJtKSB7XHJcbiAgcmV0dXJuIHRlcm0gPT09ICdBVCcgP1xyXG4gICAgWzMyLCA1MV0gOlxyXG4gICAgWzEsIDI1XTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFRlcm1TdGFydEFuZEVuZChub3c6IG1vbWVudC5Nb21lbnQpIDogbW9tZW50Lk1vbWVudFtdIHtcclxuICAgIHJldHVybiBub3cubW9udGgoKSA+PSA2ID8gLy8gNiA9IEp1bHkgaW4gSlMgRGF0ZXMgYW5kIGluIG1vbWVudCBhcyB3ZWxsIVxyXG4gICAgW21vbWVudChuZXcgRGF0ZShub3cueWVhcigpLCA3LCAxKSksIG1vbWVudChuZXcgRGF0ZShub3cueWVhcigpLCAxMSwgMzEpKV0gOiAvLyBhdWcxIC0gZGVjMzFcclxuICAgIFttb21lbnQobmV3IERhdGUobm93LnllYXIoKSwgMCwgMSkpLCBtb21lbnQobmV3IERhdGUobm93LnllYXIoKSwgNiwgMzEpKV07IC8vIGphbjEgLSBqdWx5MzFcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFNjaG9vbE1vbWVudChtOiBtb21lbnQuTW9tZW50KTogU2Nob29sTW9tZW50IHtcclxuICBjb25zdCB0aGlzWWVhciA9IG0ueWVhcigpO1xyXG4gIGNvbnN0IGlzQXV0dW1uID0gbS5tb250aCgpID49IDY7IC8vIGRldGVybWluZSBcclxuICBjb25zdCBbYXV0dW1uWWVhciwgc3ByaW5nWWVhcl0gPSBpc0F1dHVtbiA/XHJcbiAgICBbdGhpc1llYXIsIHRoaXNZZWFyICsgMV0gOlxyXG4gICAgW3RoaXNZZWFyIC0gMSwgdGhpc1llYXJdO1xyXG4gIGNvbnN0IGFjYWRlbWljWWVhciA9ICcnICsgYXV0dW1uWWVhciArICcvJyArIHNwcmluZ1llYXI7XHJcbiAgY29uc3QgdGVybSA9IGlzQXV0dW1uID8gJ0FUJyA6ICdTVCc7XHJcbiAgY29uc3Qgd2VlayA9IG0ud2VlaygpO1xyXG4gIHJldHVybiB7IGFjYWRlbWljWWVhciwgdGVybSwgd2VlayB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYWRkWWVhcihhWWVhcjogQWNhZGVtaWNZZWFyLCBudW1ZZWFyc1RvQWRkOiBudW1iZXIpOiBBY2FkZW1pY1llYXIge1xyXG4gIHJldHVybiBhWWVhci5zcGxpdCgnLycpXHJcbiAgICAubWFwKHllYXJTdHIgPT4gcGFyc2VJbnQoeWVhclN0cikgKyBudW1ZZWFyc1RvQWRkKVxyXG4gICAgLm1hcCh5ZWFyID0+ICcnICsgeWVhcilcclxuICAgIC5qb2luKCcvJyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBuZXh0QWNhZGVtaWNZZWFyKGFZZWFyOiBBY2FkZW1pY1llYXIpOiBBY2FkZW1pY1llYXIge1xyXG4gIHJldHVybiBhZGRZZWFyKGFZZWFyLCAxKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHByZXZBY2FkZW1pY1llYXIoYVllYXI6IEFjYWRlbWljWWVhcik6IEFjYWRlbWljWWVhciB7XHJcbiAgcmV0dXJuIGFkZFllYXIoYVllYXIsIC0xKTtcclxufVxyXG4iLCJpbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcbmltcG9ydCB7IFNjaG9vbE1vbWVudCwgZ2V0U2Nob29sTW9tZW50LCBhZGRZZWFyIH0gZnJvbSAnLi9zY2hvb2wtbW9tZW50JztcclxuaW1wb3J0IHsgQWNhZGVtaWNZZWFyLCBUZXJtIH0gZnJvbSAnLi4vY29udHJhY3RzL2tlZC1tb2RlbHMnO1xyXG5pbXBvcnQge0luamVjdGVkSW50bH0gZnJvbSAncmVhY3QtaW50bCc7XHJcblxyXG50eXBlIE1vbWVudCA9IG1vbWVudC5Nb21lbnQ7XHJcblxyXG5mdW5jdGlvbiBpc1NjaG9vbE1vbWVudChvYmo6IERhdGUgfCBTY2hvb2xNb21lbnQpOiBvYmogaXMgU2Nob29sTW9tZW50IHtcclxuICByZXR1cm4gJ2FjYWRlbWljWWVhcicgaW4gb2JqO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgU2Nob29sVGVybSB7XHJcbiAgYWNhZGVtaWNZZWFyOiBBY2FkZW1pY1llYXI7XHJcbiAgdGVybTogVGVybTtcclxuXHJcbiAgY29uc3RydWN0b3IoZGF0ZU9yU2Nob29sTW9tZW50OiBEYXRlIHwgU2Nob29sTW9tZW50KSB7XHJcbiAgICBjb25zdCBzY2hvb2xNb21lbnQgPSBpc1NjaG9vbE1vbWVudChkYXRlT3JTY2hvb2xNb21lbnQpID9cclxuICAgICAgZGF0ZU9yU2Nob29sTW9tZW50IDogZ2V0U2Nob29sTW9tZW50KG1vbWVudChkYXRlT3JTY2hvb2xNb21lbnQpKTtcclxuICAgIHRoaXMuYWNhZGVtaWNZZWFyID0gc2Nob29sTW9tZW50LmFjYWRlbWljWWVhcjtcclxuICAgIHRoaXMudGVybSA9IHNjaG9vbE1vbWVudC50ZXJtO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHllYXIoKSB7XHJcbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5hY2FkZW1pY1llYXJcclxuICAgICAgICAuc3BsaXQoJy8nKVt0aGlzLnRlcm0gPT09ICdBVCcgPyAwIDogMV0pO1xyXG4gIH1cclxuXHJcbiAgbmV4dFRlcm0oKSB7XHJcbiAgICByZXR1cm4gbmV3IFNjaG9vbFRlcm0odGhpcy50ZXJtID09PSAnQVQnID9cclxuICAgICAge1xyXG4gICAgICAgIHRlcm06ICdTVCcsXHJcbiAgICAgICAgYWNhZGVtaWNZZWFyOiB0aGlzLmFjYWRlbWljWWVhclxyXG4gICAgICB9IDpcclxuICAgICAge1xyXG4gICAgICAgIHRlcm06ICdBVCcsXHJcbiAgICAgICAgYWNhZGVtaWNZZWFyOiBhZGRZZWFyKHRoaXMuYWNhZGVtaWNZZWFyLCAxKVxyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIHByZXZUZXJtKCkge1xyXG4gICAgcmV0dXJuIG5ldyBTY2hvb2xUZXJtKHRoaXMudGVybSA9PT0gJ0FUJyA/XHJcbiAgICAgIHtcclxuICAgICAgICB0ZXJtOiAnU1QnLFxyXG4gICAgICAgIGFjYWRlbWljWWVhcjogYWRkWWVhcih0aGlzLmFjYWRlbWljWWVhciwgLTEpXHJcbiAgICAgIH0gOlxyXG4gICAgICB7XHJcbiAgICAgICAgdGVybTogJ0FUJyxcclxuICAgICAgICBhY2FkZW1pY1llYXI6IHRoaXMuYWNhZGVtaWNZZWFyXHJcbiAgICAgIH0pO1xyXG4gICAgXHJcbiAgfVxyXG5cclxuICB0b0xvY2FsZVN0cmluZyhpbnRsOiBJbmplY3RlZEludGwsIHNob3J0WWVhcj86IGJvb2xlYW4pIHtcclxuICAgIGxldCB5ZWFyID0gdGhpcy50ZXJtID09PSAnQVQnID9cclxuICAgICAgdGhpcy5hY2FkZW1pY1llYXIuc3BsaXQoJy8nKVswXTpcclxuICAgICAgdGhpcy5hY2FkZW1pY1llYXIuc3BsaXQoJy8nKVsxXTtcclxuXHJcbiAgICBpZiAoc2hvcnRZZWFyKVxyXG4gICAgICB5ZWFyID0geWVhci5zdWJzdHIoMik7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMudGVybSA9PT0gJ0FUJyA/IGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6J3Rlcm1wbGFubmVyLnNlY29uZFRlcm0nLCBkZWZhdWx0TWVzc2FnZTonSFQge3llYXJ9J30sIHt5ZWFyOiB5ZWFyfSkgOiBcclxuICAgIGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6J3Rlcm1wbGFubmVyLmZpcnN0VGVybScsIGRlZmF1bHRNZXNzYWdlOidWVCB7eWVhcn0nfSwge3llYXI6IHllYXJ9KTtcclxuICB9XHJcbn1cclxuIiwiXHJcbmV4cG9ydCBmdW5jdGlvbiBjYXBpdGFsaXplRmlyc3QgKHN0cikge1xyXG4gICAgZm9yIChsZXQgaT0wLCBsPXN0ci5sZW5ndGg7IGk8bDsgKytpKSB7XHJcbiAgICAgICAgaWYgKHN0ci5jaGFyQ29kZUF0KGkpIDwgMHgyMDAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdHIuc3Vic3RyKDAsIGkpICsgc3RyW2ldLnRvTG9jYWxlVXBwZXJDYXNlKCkgKyBzdHIuc3Vic3RyKGkgKyAxKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3RyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kKG9iaiwgZXh0ZW5zaW9uKSB7XHJcbiAgICBpZiAodHlwZW9mIGV4dGVuc2lvbiAhPT0gJ29iamVjdCcpIHJldHVybiBvYmo7XHJcbiAgICBPYmplY3Qua2V5cyhleHRlbnNpb24pLmZvckVhY2goa2V5ID0+IHtcclxuICAgICAgICBvYmpba2V5XSA9IGV4dGVuc2lvbltrZXldO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gb2JqO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2xvbmU8VCxFPiAob2JqIDogVCwgZXh0ZW5zaW9uPzogRSkge1xyXG4gICAgbGV0IGNsb25lID0ge307XHJcbiAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhvYmopLmZvckVhY2goa2V5ID0+IHtcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY2xvbmUsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkpO1xyXG4gICAgfSk7XHJcbiAgICBpZiAoZXh0ZW5zaW9uKSBleHRlbmQoY2xvbmUsIGV4dGVuc2lvbik7XHJcbiAgICByZXR1cm4gY2xvbmUgYXMgKFQgJiBFKTtcclxufVxyXG5cclxuY29uc3QgY29uY2F0ID0gW10uY29uY2F0O1xyXG5leHBvcnQgZnVuY3Rpb24gZmxhdHRlbjxUPiAoYSA6IChUIHwgVFtdKVtdKSB7XHJcbiAgICByZXR1cm4gY29uY2F0LmFwcGx5KFtdLCBhKSBhcyBUW107XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjb21wYXJlUHJvcDxUPihwcm9wOmtleW9mIFQpIHtcclxuICAgIHJldHVybiAoYTogVCxiOiBUKSA9PiB7XHJcbiAgICAgICAgY29uc3QgYVByb3AgPSBhW3Byb3BdLCBiUHJvcCA9IGJbcHJvcF07XHJcbiAgICAgICAgcmV0dXJuIGFQcm9wID4gYlByb3AgPyAxIDogYVByb3AgPCBiUHJvcCA/IC0xIDogMDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbXBhcmVQcm9wcyhcclxuICAgIHByb3BzOiBzdHJpbmcgfCBzdHJpbmdbXSxcclxuICAgIGxvY2FsZXM/OiBzdHJpbmcgfCBzdHJpbmdbXSxcclxuICAgIG9wdGlvbnM/OiBJbnRsLkNvbGxhdG9yT3B0aW9ucyk6IChhOiBhbnksIGI6IGFueSkgPT4gbnVtYmVyXHJcbntcclxuICAgIHByb3BzID0gQXJyYXkuaXNBcnJheShwcm9wcykgPyBwcm9wcyA6IFtwcm9wc107XHJcblxyXG4gICAgY29uc3QgbG9jYWxlQ29tcGFyZSA9IChhLGIpID0+XHJcbiAgICAgICAgdHlwZW9mIGEgPT09ICdzdHJpbmcnID9cclxuICAgICAgICAgICAgYS5sb2NhbGVDb21wYXJlKGIsIGxvY2FsZXMsIG9wdGlvbnMpIDpcclxuICAgICAgICAgICAgYSA8IGIgPyAtMSA6IGEgPiBiID8gMSA6IDA7XHJcblxyXG4gICAgZnVuY3Rpb24gY21wUGFydCAoYSxiLGZpcnN0UGFydDogc3RyaW5nLHJlc3Q6IHN0cmluZ1tdKSB7XHJcbiAgICAgICAgY29uc3QgZmlyc3RBID0gYVtmaXJzdFBhcnRdO1xyXG4gICAgICAgIGlmIChmaXJzdEEgPT0gbnVsbCkgcmV0dXJuIC0xO1xyXG4gICAgICAgIGNvbnN0IGZpcnN0QiA9IGJbZmlyc3RQYXJ0XTtcclxuICAgICAgICBpZiAoZmlyc3RCID09IG51bGwpIHJldHVybiAxO1xyXG4gICAgICAgIHJldHVybiByZXN0Lmxlbmd0aCA9PT0gMCA/XHJcbiAgICAgICAgICAgIGxvY2FsZUNvbXBhcmUoZmlyc3RBLCBmaXJzdEIpIDpcclxuICAgICAgICAgICAgY21wUGFydChmaXJzdEEsIGZpcnN0QiwgcmVzdFswXSwgcmVzdC5zbGljZSgxKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHByb3BzXHJcbiAgICAgICAgLm1hcChwcm9wID0+IHByb3Auc3BsaXQoJy4nKSlcclxuICAgICAgICAubWFwKChbZmlyc3RQYXJ0LCAuLi5yZXN0XSkgPT4gKGEsYikgPT4gY21wUGFydChhLGIsIGZpcnN0UGFydCwgcmVzdCkpXHJcbiAgICAgICAgLnJlZHVjZSgoY21wMSwgY21wMikgPT5cclxuICAgICAgICAgICAgKGEsYikgPT4gY21wMShhLGIpIHx8IGNtcDIoYSxiKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBMKHRleHQsIC4uLmFyZ3MpIHtcclxuICAgIGxldCBmaXJzdCA9IHRleHRbMF07XHJcbiAgICByZXR1cm4gYnVpbGRNZXNzYWdlKHRleHQsIGFyZ3MpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBidWlsZE1lc3NhZ2UgKHRleHQsIGFyZ3MpIHtcclxuICAgIGxldCBydiA9IHRleHRbMF07XHJcbiAgICBmb3IgKGxldCBpPTEsIGw9dGV4dC5sZW5ndGg7IGk8bDsgKytpKSB7XHJcbiAgICAgICAgcnYgKz0gYXJnc1tpLTFdICsgdGV4dFtpXTtcclxuICAgIH1cclxuICAgIHJldHVybiBydjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFRDPFQ+IHtcclxuICAgIGNvbnN0cnVjdG9yKHRlbXBsYXRlOiBUKSB7XHJcbiAgICAgICAgZXh0ZW5kKHRoaXMsIHRlbXBsYXRlKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRhdGVUaW1lUmV2aXZlciAoa2V5LCB2YWx1ZSkge1xyXG4gICAgdmFyIGE7XHJcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIGEgPSAvXFwvRGF0ZVxcKChcXGQqKVxcKVxcLy8uZXhlYyh2YWx1ZSk7XHJcbiAgICAgICAgaWYgKGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKCthWzFdKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbn1cclxuXHJcbi8vbGV0IGluZm9TZXJpYWwgPSAxO1xyXG5leHBvcnQgZnVuY3Rpb24gc2hvd0luZm8gKG1zZykge1xyXG4gICAgdmFyIGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdpbmZvJywgeyAnZGV0YWlsJzogbXNnIH0pO1xyXG4gICAgd2luZG93LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2hvd0Vycm9yIChlcnJNc2c6IHN0cmluZyB8IEVycm9yKSB7XHJcbiAgICBjb25zdCBtc2cgPSB0eXBlb2YgZXJyTXNnID09PSAnc3RyaW5nJyA/IGVyck1zZyA6IGVyck1zZy5tZXNzYWdlO1xyXG4gICAgdmFyIGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdjdXN0b21lcnJvcicsIHsgJ2RldGFpbCc6IG1zZyB9KTtcclxuICAgIGNvbnNvbGUuZXJyb3IoZXJyTXNnKTtcclxuICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1heExlbmd0aChzdHI6IHN0cmluZywgbWF4TGVuOiBudW1iZXIpIHtcclxuICAgIHJldHVybiBzdHIubGVuZ3RoID4gbWF4TGVuID9cclxuICAgICAgICBzdHIuc3Vic3RyKDAsIG1heExlbiAtIDMpICsgXCIuLi5cIiA6XHJcbiAgICAgICAgc3RyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYXJyYXlUb0xvb2t1cDxUPihhOiBUW10sIGtleUFjY2Vzc29yOiAoaXRlbTogVCkgPT4gc3RyaW5nIHwgbnVtYmVyKSB7XHJcbiAgICBjb25zdCByZXN1bHQgOiB7W2tleTogc3RyaW5nXSA6IFRbXX0gPSB7fTtcclxuICAgIGZvciAobGV0IGk9MCwgbD1hLmxlbmd0aDsgaTxsOyArK2kpIHtcclxuICAgICAgICBjb25zdCBpdGVtID0gYVtpXTtcclxuICAgICAgICBjb25zdCBrZXkgPSBrZXlBY2Nlc3NvcihpdGVtKTtcclxuICAgICAgICBsZXQgYXJyYXkgPSByZXN1bHRba2V5XTtcclxuICAgICAgICBpZiAoYXJyYXkpIGFycmF5LnB1c2goaXRlbSk7XHJcbiAgICAgICAgZWxzZSByZXN1bHRba2V5XSA9IFtpdGVtXTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhcnJheVRvTWFwPFQ+KGE6IFRbXSwga2V5QWNjZXNzb3I6IChpdGVtOiBUKSA9PiBzdHJpbmcgfCBudW1iZXIpIHtcclxuICAgIGNvbnN0IHJlc3VsdCA6IHtba2V5OiBzdHJpbmddIDogVH0gPSB7fTtcclxuICAgIGZvciAobGV0IGk9MCwgbD1hLmxlbmd0aDsgaTxsOyArK2kpIHtcclxuICAgICAgICBjb25zdCBpdGVtID0gYVtpXTtcclxuICAgICAgICBjb25zdCBrZXkgPSBrZXlBY2Nlc3NvcihpdGVtKTtcclxuICAgICAgICByZXN1bHRba2V5XSA9IGl0ZW07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2hlcnJ5UGlja1Byb3BzPFQ+IChvYmo6IFQsIHByb3BzVG9QaWNrOiBzdHJpbmdbXSk6IFBhcnRpYWw8VD4ge1xyXG4gICAgY29uc3QgcmVzdWx0ID0ge307XHJcbiAgICBmb3IgKGNvbnN0IHBhcmFtIG9mIHByb3BzVG9QaWNrKSB7XHJcbiAgICAgIGlmIChwYXJhbSBpbiBvYmopIHJlc3VsdFtwYXJhbV0gPSBvYmpbcGFyYW1dO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdCBhcyBQYXJ0aWFsPFQ+O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZGlzdGluY3Q8VD4gKGE6IFRbXSwga2V5QWNjZXNzb3I/OiAoaXRlbTogVCkgPT4gYW55KSB7XHJcbiAgICBjb25zdCBtYXAgPSBhcnJheVRvTWFwKGEsIGtleUFjY2Vzc29yIHx8ICh4ID0+IHgpKTtcclxuICAgIHJldHVybiBPYmplY3Qua2V5cyhtYXApLm1hcChrZXkgPT4gbWFwW2tleV0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2hhbGxvd0VxdWFscyhhOiBhbnksIGI6IGFueSkge1xyXG4gICAgaWYgKGEgPT09IGIpIHJldHVybiB0cnVlO1xyXG4gICAgaWYgKCFhIHx8ICFiKSByZXR1cm4gZmFsc2U7XHJcbiAgICBpZiAodHlwZW9mIGEgIT09ICdvYmplY3QnIHx8IHR5cGVvZiBiICE9PSAnb2JqZWN0JykgcmV0dXJuIGZhbHNlO1xyXG4gICAgY29uc3Qga2V5c0EgPSBPYmplY3Qua2V5cyhhKTtcclxuICAgIGNvbnN0IGtleXNCID0gT2JqZWN0LmtleXMoYik7XHJcbiAgICBpZiAoa2V5c0EubGVuZ3RoICE9PSBrZXlzQi5sZW5ndGgpIHJldHVybiBmYWxzZTtcclxuICAgIGZvciAobGV0IGk9MCwgbD1rZXlzQS5sZW5ndGg7IGk8bDsgKytpKSB7XHJcbiAgICAgICAgY29uc3Qga2V5ID0ga2V5c0FbaV07XHJcbiAgICAgICAgaWYgKGtleXNCW2ldICE9PSBrZXkpIHJldHVybiBmYWxzZTtcclxuICAgICAgICBpZiAoYVtrZXldICE9PSBiW2tleV0pIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbiIsImltcG9ydCBtb21lbnQsIHsgTW9tZW50IH0gZnJvbSBcIm1vbWVudFwiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEtFRFdlZWsgKHllYXI6IG51bWJlciwgd2VlazogbnVtYmVyKSB7XHJcbiAgY29uc3QgbSA9IG1vbWVudChuZXcgRGF0ZSh5ZWFyLCAxLCAxKSkud2Vlayh3ZWVrKTtcclxuICBjb25zdCByZXMgPSB7XHJcbiAgICB5ZWFyLFxyXG4gICAgd2VlayxcclxuICAgIG5vdEJlZm9yZTogbS5jbG9uZSgpLnN0YXJ0T2YoJ3dlZWsnKS5hZGQoLTIsICdkYXlzJykudG9EYXRlKCkuZ2V0VGltZSgpLFxyXG4gICAgbm90QWZ0ZXI6IG0uY2xvbmUoKS5zdGFydE9mKCd3ZWVrJykuYWRkKDUsICdkYXlzJykudG9EYXRlKCkuZ2V0VGltZSgpXHJcbiAgfTtcclxuICByZXR1cm4gcmVzO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWRqdXN0ZWRXZWVrKG06IE1vbWVudCkge1xyXG4gIGNvbnN0IGNsb25lID0gbS5jbG9uZSgpO1xyXG4gIHJldHVybiBtLndlZWtkYXkoKSA+PSA1ID8gLy8gTMO2cmRhZyAwMDowMCAvIFPDtm5kYWcgMDA6MDA/XHJcbiAgICAgIG0ud2VlaygpICsgMSA6IC8vIFRpbGxow7ZyIG7DpHN0YSB2ZWNrYVxyXG4gICAgICBtLndlZWsoKTtcclxufVxyXG5cclxuLypleHBvcnQgZnVuY3Rpb24gZ2V0V2Vla0xpbWl0cyAobTogTW9tZW50KSB7XHJcbiAgY29uc3QgY2xvbmVkU3dlZGlzaCA9IG0uY2xvbmUoKS5sb2NhbGUoJ3N2Jyk7XHJcbiAgY29uc3QgbGltaXRzID0ge1xyXG4gICAgbm90QmVmb3JlOiBjbG9uZWRTd2VkaXNoLnN0YXJ0T2YoJ3dlZWsnKS5hZGQoLTIsICdkYXlzJyksXHJcbiAgICBub3RBZnRlcjogY2xvbmVkU3dlZGlzaC5zdGFydE9mKCd3ZWVrJykuYWRkKDUsICdkYXlzJylcclxuICB9O1xyXG59XHJcbiovXHJcbiIsIi8qIChpZ25vcmVkKSAqLyIsIi8qIChpZ25vcmVkKSAqLyIsIi8qIChpZ25vcmVkKSAqLyIsIm1vZHVsZS5leHBvcnRzID0galF1ZXJ5OyIsIm1vZHVsZS5leHBvcnRzID0gUmVhY3Q7IiwibW9kdWxlLmV4cG9ydHMgPSBSZWFjdERPTTsiXSwic291cmNlUm9vdCI6IiJ9