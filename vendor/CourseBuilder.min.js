(window.webpackJsonp_name_=window.webpackJsonp_name_||[]).push([[5],{305:function(e,t,a){"use strict";a.r(t);var n,r,s=a(0),l=a(3),o=a.n(l),i=a(6),c=a(311),u=a(302),d=a(113),m=a(210),p=a(158),h=function(e){return l.createElement(p.a,{title:Object(i.a)(n||(n=Object(s.e)(["Lägg till skola"],["Lägg till skola"]))),type:e.type,feedbackUrl:e.feedbackUrl})},v=a(4),f=a(126),b=a(104),g=a(208),k=function(e){function t(t){var a=e.call(this,t)||this;return a.state={isListingSubjects:!0,primarySchoolSubjects:[],uploadedSubject:null},a}return Object(s.c)(t,e),t.prototype.render=function(){return l.createElement("div",null,l.createElement(b.a,{title:Object(i.a)(r||(r=Object(s.e)(["Ämnen"],["Ämnen"]))),activePage:"subjects",routes:{feedback:this.props.feedbackUrl}}),l.createElement(g.a,{linkPrefix:"/subjects/"}))},t}(l.Component),E=a(56),O=a(91),C=a(2),y=a(190),j=a(107),N=a(127),T=a(92),w=a(160),S=a(129),U=function(e){var t=e.resources,a=e.onUpdate,n=e.host,r=t.sort(Object(i.h)("order"));var s=T.b.picker;return l.createElement("div",null,Object(w.a)({objectList:r,renderEditLink:function(e){var t=r.indexOf(e);return l.createElement("a",{className:"editItem",onClick:function(){return n.openDialog({Component:y.a,props:{title:"Redigera resurs",resource:e,onSave:function(e){var r=Object(O.m)(e,v.a.currentUser);a({$splice:[[t,1,r]]}),n.closeDialog()},onDelete:function(){a({$splice:[[t,1]]}),n.closeDialog()}}})}})},renderLink:function(e){return l.createElement("a",{href:e.url,target:"_blank"},e.name)},onSort:function(e,t,n){var s=r.map((function(e,t){return{id:t.toString(),order:e.order||Date.now()}})),l=r.indexOf(e).toString(),o=Object(S.a)(s,l,r.indexOf(t).toString(),n);e.order=o;var i=Object(O.m)(e,v.a.currentUser);a({$splice:[[l,1,i]]})}}),l.createElement("div",{className:"horizontal-align spaced"},l.createElement("div",{className:"horizontaItem top"},l.createElement("a",{className:"btn",onClick:function(){return n.openDialog({Component:y.a,props:{title:"Lägg till resurs",onSave:function(e){e.order=Date.now();var t=Object(O.m)(e,v.a.currentUser);a({$push:[t]}),n.closeDialog()}}})}},l.createElement("i",{className:"fas fa-paperclip","aria-hidden":!0})," Lägg till resurs")),s&&l.createElement("div",{className:"horizontaItem top"},l.createElement(j.b,{label:"Lägg till från Drive",action:function(){new N.a({upload:!0,multiple:!0}).show().then((function(e){e.forEach((function(e){var t={url:e.url,name:e.name},n=Object(O.m)(t,v.a.currentUser);a({$push:[n]})}))}))}}))))},I=a(142),D=a(125),z=a.n(D),R=a(23),x=a(130),M=a(159),P=a.n(M),B=function(){function e(e){this.queryer=e,this.promise=null,this.result=null}return e.prototype.query=function(){var e=this;return this.promise?this.promise:this.promise=this.queryer().then((function(t){return e.result=t}))},e.prototype.reset=function(){this.promise=null},e}(),L=a(20);function A(e){var t=e.searchMarkedIds,a=e.searchResult,n=e.task,r=e.editTask;e.writeAccess,e.taskCustomization;return l.createElement("div",{className:"task-search-result"+(r.state.task||r.state.previewTaskContent?"":" fixed")},0===t.length?l.createElement("h2",null,"Samtliga uppgifter för kursen"):l.createElement("h2",null,"Uppgifter som täcker valda filter"),l.createElement("table",null,l.createElement("tbody",null,a.filter(n?function(e){return e.id===n.id}:function(){return!0}).map((function(e){return l.createElement(l.Fragment,{key:e.id},l.createElement("tr",null,l.createElement("td",null,l.createElement("div",{tabIndex:1,className:"checkBox"+(n&&n.id===e.id?" checked":""),onClick:function(){return s(e)}})),l.createElement("td",null,e.content?l.createElement("a",{href:"#",onClick:function(t){s(e),t.preventDefault(),t.stopPropagation()}},e.name):l.createElement("a",{href:e.url,target:"_blank"},e.name)),l.createElement("td",null,Object(O.i)(e.modifiedBy.name)),l.createElement("td",null,e.school||"Standard"),l.createElement("td",null,Object(O.h)(e.modifiedDate))))})))),l.createElement("br",null),l.createElement("hr",null));function s(e){n&&n.id===e.id?r.updateSearchMarkedIds(t):(Object(E.findDOMNode)(r).parentElement.scrollTop=0,r.setStatePromised({task:e,previewTaskContent:null}))}}var K=a(145),F=a(5),$=a.n(F),_=a(193),G=a(100),V=a(102);function q(e){var t=e.writeAccess,a=e.task,n=e.editTask;return l.createElement(G.a,{actions:["bold","italic","underline","strikethrough","heading2","heading3","olist","ulist","outdent","indent","line","link","image"],defaultActions:V.a,readOnly:!t,html:a.content,onChange:function(e){var t=Object(s.a)({},a);t.content=e,n.setState({task:t})}})}var W=a(155),H=a(114);function Y(e){var t=e.task,a=e.course,n=e.writeAccess,r=e.features,s=e.editTask,o=e.templates,i=r.picker;return void 0===t.contentType&&(t.contentType=""!=t.url?"url":"desc"),l.createElement("div",null,l.createElement("h2",null,"Uppgiftens namn och länk"),l.createElement("div",{className:"align-horizontal spaced"},l.createElement("div",{className:"horizontalItem top"},l.createElement("p",null,"Uppgiftens namn:")),l.createElement("div",{className:"horizontalItem top"},l.createElement("input",{autoFocus:!0,type:"text",size:35,value:t.name,disabled:!n,readOnly:!n,onChange:function(e){s.updateTaskOrCustomization("name",{$set:e.target.value})}}))),t.migratedTexts&&n&&l.createElement(_.a,{task:t,course:a,updateLink:function(e,t){return s.updateLink(e,t)}}),l.createElement("h2",null,"Innehållstyp"),l.createElement("div",{className:"align-horizontal spaced"},l.createElement("div",{className:"horizontalItem top"},l.createElement("p",null,"Välj:")),l.createElement("div",{className:"horizontalItem top"},l.createElement("select",{value:t.contentType,onChange:function(e){s.updateTaskOrCustomization("contentType",{$set:e.target.value})}},l.createElement("option",{value:"url"},"Länk"),l.createElement("option",{value:"desc"},"Beskrivning")))),"url"==t.contentType?l.createElement("div",{className:"align-horizontal spaced"},l.createElement("div",{className:"horizontalItem top"},l.createElement("p",null,"URL:")),l.createElement("div",{className:"horizontalItem top align-horizontal"},l.createElement("div",{className:"horizontalItem top"},l.createElement("input",{className:"horizontalItem",type:"text",size:35,value:t.url,disabled:!n,readOnly:!n,onChange:function(e){s.updateTaskOrCustomization("url",{$set:e.target.value})}})),l.createElement("div",{className:"horizontalItem top"},i&&l.createElement(j.b,{label:"",action:function(){new N.a({upload:!0}).show().then((function(e){var a=e[0].url,n=a.substr(0,a.lastIndexOf("/"))+"/view";n!=t.url&&s.updateTaskOrCustomization("url",{$set:n})}))}})))):l.createElement(l.Fragment,null,(n||!!t.content)&&l.createElement(q,{writeAccess:n,task:t,editTask:s})),l.createElement(l.Fragment,null,l.createElement("h2",null,"Inlämningsuppgift"),l.createElement(W.b,{state:s.getTaskProp("assignment")?"checked":"",onChange:function(){s.updateTaskOrCustomization("assignment",{$set:!s.getTaskProp("assignment")})},label:"Den här uppgiften är en inlämningsuppgift"}),t.assignment&&r.picker&&l.createElement(l.Fragment,null,l.createElement("div",{className:"align-horizontal spaced"},l.createElement("div",{className:"horizontalItem top"},l.createElement("p",null,"Välj mall:")),l.createElement("div",{className:"horizontalItem top"},l.createElement("select",{value:t.templateFile?t.templateFile.fileId:"-",onChange:function(e){var t=e.target.value;if("-"===t)s.updateTemplateView(null);else if(t.startsWith("t:"))s.updateTemplateView({fileId:t});else{new N.a({limitType:"google-apps"}).show().then((function(e){return s.updateTemplateView(e[0])}))}}},l.createElement("option",{value:"-"},"Ingen mall"),o?o.map((function(e,t){return l.createElement("option",{key:t,value:"t:"+e.fileId},e.grade?e.grade+": ":"",e.title)})):null,t.templateFile&&!t.templateFile.fileId.startsWith("t:")?l.createElement("option",{value:t.templateFile.fileId},"Egen mall: ",t.templateFile.name):l.createElement("option",{value:"4"},"Egen mall")))),t.templateFile&&l.createElement("div",{className:"spaced"},l.createElement(H.a,{size:"large",thumbnail:t.templateFile.iconUrl,title:t.templateFile.name,url:t.templateFile.url}),a.googleCreateClassrooms&&l.createElement("p",null,l.createElement("em",null,"Obs! Uppgiften hamnar i kursens Classroom som en inlämingsuppgift.")))),s.getTaskProp("assignment")&&l.createElement(l.Fragment,null,l.createElement("p",null,"Inlämningsdatum"),l.createElement("div",{className:"align-horizontal"},l.createElement("div",{className:"horizontalItem top"},l.createElement(K.a,{nextMonthButtonLabel:"",previousMonthButtonLabel:"",showWeekNumbers:!0,selected:s.getTaskProp("deadline")&&$()(s.getTaskProp("deadline")).toDate(),dateFormat:"yyyy-MM-dd",locale:"sv",popperPlacement:"bottom-start",onChange:function(e){s.updateTaskOrCustomization("deadline",{$set:$()(e).format("YYYY-MM-DD")})}})),l.createElement("div",{className:"horizontalItem top"},s.getTaskProp("deadline")&&l.createElement("a",{className:"deleteDate",href:"#",title:"Ta bort inlämningsdatum",onClick:function(e){e.preventDefault(),s.updateTaskOrCustomization("deadline",{$set:null})}}))),l.createElement(W.b,{state:null==t.sendToUrkund||t.sendToUrkund?"checked":"",onChange:function(){return s.updateTaskOrCustomization("sendToUrkund",{$set:null!=t.sendToUrkund&&!t.sendToUrkund})},label:"Skicka inlämningar till Urkund"}),t.templateFile&&l.createElement(W.b,{state:t.additionalUploads?"checked":"",label:"Tillåt inlämning av andra/ytterligare filer",onChange:function(){return s.updateTaskOrCustomization("additionalUploads",{$set:null==t.additionalUploads||!t.additionalUploads})}}))))}function J(e){var t=e.task;return l.createElement(l.Fragment,null,l.createElement("h3",null,"Uppgiftens status"),t.createdBy&&t.createdDate&&l.createElement("p",null,"Uppgiften skapades ",Object(O.c)(t.createdDate)," av ",l.createElement("strong",null,t.createdBy.name),"."),t.modifiedBy&&t.modifiedDate&&l.createElement("p",null,"Uppgiften redigerades senast ",Object(O.c)(t.modifiedDate)," av ",l.createElement("strong",null,t.modifiedBy.name),"."))}function Q(e){var t=e.writeAccess,a=e.editTask;return l.createElement(l.Fragment,null,!!a.props.onDelete&&l.createElement("div",{className:"btn btn-warning btn-large pull-right",onClick:function(){return a.props.onDelete()}},"Ta bort från kursmodul"),l.createElement("div",{className:"pull-right"}," "),l.createElement("div",{className:"btn btn-warning btn-large pull-right",onClick:function(){return a.props.onCancel()}},"Avbryt"),l.createElement("div",{className:"btn btn-large",onClick:function(){return a.save().catch(i.n)}},"Spara"),!t&&l.createElement("div",{className:"btn btn-large",onClick:function(){return a.copyTask().catch(i.n)}},"Skapa kopia av den här uppgiften"))}function X(e){var t=e.writeAccess,a=e.task,n=e.taskCustomization,r=e.editTask;return l.createElement(l.Fragment,null,l.createElement(l.Fragment,null,l.createElement("h3",null,"Uppgiftens lärandemål"),l.createElement("div",null,l.createElement("textarea",{className:"inputTextBox learning-goal-box",disabled:!t,value:a.learningGoal,onChange:function(e){var t=Object(s.a)({},a);t.learningGoal=e.target.value,r.setStatePromised({task:t})}}))),l.createElement("br",null),l.createElement(l.Fragment,null,n&&n.resources?l.createElement("h3",null,"Resurser för uppgiften (modifierad för denna kursinstans)"):l.createElement("h3",null,"Resurser kopplade till uppgiften"),l.createElement(U,{resources:n&&n.resources||a.resources,host:r.props.host,onUpdate:function(e){r.updateTaskOrCustomization("resources",e)}})))}var Z,ee,te,ae,ne,re,se,le,oe,ie,ce,ue,de,me,pe,he,ve,fe,be,ge,ke,Ee,Oe=a(128),Ce=a(192),ye=a(139),je=function(e){function t(t){var a=e.call(this,t)||this;a.features=new T.a;var n=!t.task||Object(R.c)(v.a.currentUser,t.task);return a.state={title:t.task?n?Object(i.a)(Z||(Z=Object(s.e)(['Redigera uppgift till "','"'],['Redigera uppgift till "','"'])),t.module.name):Object(i.a)(ee||(ee=Object(s.e)(['Visa uppgift till "','"'],['Visa uppgift till "','"'])),t.module.name):t.searchMode?Object(i.a)(te||(te=Object(s.e)(['Sök ny uppgift till "','"'],['Sök ny uppgift till "','"'])),t.module.name):Object(i.a)(ae||(ae=Object(s.e)(['Lägg till egen uppgift till "','"'],['Lägg till egen uppgift till "','"'])),t.module.name),futureAbilitiesOpen:!1,taskCustomization:t.taskCustomization||{},task:t.task?Object(s.a)({$meta:t.task.$meta||"update"},t.task):t.searchMode?null:{id:Object(C.i)(),$meta:"add",tags:["sub:"+t.course.subjectCode,"course:"+t.course.code],school:!t.course.isTemplate&&v.a.currentUser.school,resources:[],abilities:[],centralContent:[],futureAbilities:[],knowledgeRequirements:[],name:"",url:"",acl:t.course.isTemplate?["role:USER:R"]:["role:USER:R","schoolRole:"+v.a.currentUser.school+"/EMPLOYEE:S"]},searchMarkedIds:t.searchMode&&[],searchResult:t.searchMode&&[],isSearching:t.searchMode},t.searchMode&&(a.searchResponse=new B((function(){return v.a.kedBackendClient.list("tasks",{tags:"course:"+t.course.code,include:["knowledgeRequirements","abilities","centralContent"],flags:["includeIdsOnly"]})}))),a}return Object(s.c)(t,e),t.prototype.setStatePromised=function(t){var a=this;return new Promise((function(n){return e.prototype.setState.call(a,(function(){return t}),n)}))},t.prototype.componentDidMount=function(){return Object(s.b)(this,void 0,void 0,(function(){var e,t=this;return Object(s.d)(this,(function(a){switch(a.label){case 0:if(!this.props.searchMode)return[3,8];this.setStatePromised({isSearching:!0}),a.label=1;case 1:return a.trys.push([1,5,6,8]),[4,this.searchResponse.query()];case 2:return a.sent(),this.state.searchMarkedIds&&0===this.state.searchMarkedIds.length?[4,this.updateSearchResult(this.state.searchMarkedIds)]:[3,4];case 3:a.sent(),a.label=4;case 4:return[3,8];case 5:return e=a.sent(),Object(i.n)(e),[3,8];case 6:return[4,this.setStatePromised({isSearching:!1})];case 7:return a.sent(),[7];case 8:return T.b.picker?[4,fetch(Ce.a).then((function(e){return e.json()})).then((function(e){if(t.setStatePromised({templates:e}),t.state.task&&t.state.task.templateFile){var a=t.state.task.templateFile;a.fileId&&t.updateTemplateView(a)}}))]:[3,10];case 9:a.sent(),a.label=10;case 10:return[2]}}))}))},t.prototype.updateSearchMarkedIds=function(e){return Object(s.b)(this,void 0,void 0,(function(){var t;return Object(s.d)(this,(function(a){switch(a.label){case 0:return t=this.setStatePromised({task:null,searchMarkedIds:e,previewTaskContent:null}),this.searchResponse.result?[3,3]:[4,this.searchResponse.promise];case 1:return a.sent(),[4,t];case 2:a.sent(),e=this.state.searchMarkedIds,a.label=3;case 3:return[4,this.updateSearchResult(e)];case 4:return a.sent(),[2]}}))}))},t.prototype.updateSearchResult=function(e){return Object(s.b)(this,void 0,void 0,(function(){var t,a;return Object(s.d)(this,(function(n){switch(n.label){case 0:return[4,this.searchResponse.query()];case 1:return t=n.sent(),a=t.filter((function(t){return e.every((function(e){return t.knowledgeRequirements.some((function(t){return t.id===e}))||t.abilities.some((function(t){return t.id===e}))||t.centralContent.some((function(t){return t.id===e}))}))})),this.setStatePromised({searchResult:a}),[2]}}))}))},t.prototype.onMarkChanged=function(e,t){if(this.props.searchMode){var a=this.state.searchMarkedIds;this.updateSearchMarkedIds(t?a.concat(e):a.filter((function(t){return t!==e}))).catch(i.n)}else this.updateLink(e,t)},t.prototype.updateLink=function(e,t){var a=this.props.course,n=this.state.task,r=a.abilities.find((function(t){return t.id===e})),l=a.knowledgeRequirements.find((function(t){return t.id===e})),o=a.centralContent.find((function(t){return t.id===e})),i=Object(s.f)(r?["abilities",r]:l?["knowledgeRequirements",l]:o?["centralContent",o]:[null,null],2),c=i[0],u=i[1];if(c){var d=n[c].slice(),m=d.findIndex((function(t){return t.id===e}));t?m<0&&d.push(u):m>=0&&d.splice(m,1);var p=Object(s.a)({},n);p[c]=d,n&&n.migratedTexts&&(p.migratedTexts=Object(s.a)({},n.migratedTexts),n.migratedTexts[c]&&(p.migratedTexts[c]=Object(s.a)({},n.migratedTexts[c]),delete p.migratedTexts[c][e])),this.setStatePromised({task:p})}else console.error("Could not find marked id "+e)},t.prototype.updateTemplateView=function(e){return Object(s.b)(this,void 0,void 0,(function(){var t,a,n,r;return Object(s.d)(this,(function(s){switch(s.label){case 0:return t=new Oe.a,e&&e.fileId.startsWith("t:")?(a=e.fileId.replace("t:",""),[4,t.getFile(a)]):[3,2];case 1:(n=s.sent())?(n.fileId="t:"+n.fileId,r=this.state.templates.filter((function(e){return e.fileId==a}))[0],n.name=r?r.title:n.name,e={fileId:n.fileId,name:n.name,mimeType:n.mimeType,modifiedTime:Number(n.modiifiedTime),url:n.url,iconUrl:n.thumbnailUrl}):e=null,s.label=2;case 2:return this.updateTaskOrCustomization("templateFile",{$set:e}),[2]}}))}))},t.prototype.save=function(){return Object(s.b)(this,void 0,void 0,(function(){var e,t,a;return Object(s.d)(this,(function(n){switch(n.label){case 0:if(e=this.state,t=e.task,a=e.taskCustomization,!Object(R.c)(v.a.currentUser,t))return[3,5];if(null==t.sendToUrkund&&(t.sendToUrkund=!0),!t.url&&!t.content)throw new Error(Object(i.a)(ne||(ne=Object(s.e)(["Uppgiften måste antingen ha en URL eller ett innehåll"],["Uppgiften måste antingen ha en URL eller ett innehåll"]))));if(t.url&&!P.a.isUri(t.url))throw new Error(Object(i.a)(re||(re=Object(s.e)(["Angiven URL '","' är ogiltig. Den ska börja med http: eller https:"],["Angiven URL '","' är ogiltig. Den ska börja med http: eller https:"])),t.url));return this.props.task&&this.props.task.id!==t.id?[4,this.props.onReplace(this.props.task.id,t)]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,this.props.onSave(t,null)];case 3:n.sent(),n.label=4;case 4:return[3,9];case 5:return this.props.searchMode?[4,this.props.onSave(t,a)]:[3,7];case 6:return n.sent(),[3,9];case 7:if(this.props.course.isTemplate&&"add"===t.$meta)throw new Error(Object(i.a)(se||(se=Object(s.e)(["Du saknar behörighet för att spara nya versioner av uppgifter i kursmallen"],["Du saknar behörighet för att spara nya versioner av uppgifter i kursmallen"]))));return[4,this.props.onSaveCustomization(a)];case 8:n.sent(),n.label=9;case 9:return[2]}}))}))},t.prototype.copyTask=function(){return Object(s.b)(this,void 0,void 0,(function(){var e;return Object(s.d)(this,(function(t){switch(t.label){case 0:return(e=Object(s.a)(Object(s.a)(Object(s.a)({},this.state.task),this.state.taskCustomization||{}),{id:Object(C.i)(),acl:this.props.course.isTemplate?["role:USER:R"]:["role:USER:R","schoolRole:"+v.a.currentUser.school+"/EMPLOYEE:S"],school:this.props.course.school})).$meta="add",[4,this.setStatePromised({task:e,title:Object(i.a)(le||(le=Object(s.e)(['Redigera kopierad uppgift till "','"'],['Redigera kopierad uppgift till "','"'])),this.props.module.name),taskCustomization:void 0})];case 1:return t.sent(),[2]}}))}))},t.prototype.getTaskProp=function(e){var t=this.state,a=t.task,n=t.taskCustomization,r=n&&n[e];return void 0!==r?r:a[e]},t.prototype.updateTaskOrCustomization=function(e,t){var a=this.state,n=a.task,r=a.taskCustomization;if(!(n&&Object(R.c)(v.a.currentUser,n))||r&&void 0!==r[e]){var l=Object(s.a)({},r);l[e]=z()(l[e]||n[e],t),this.setStatePromised({taskCustomization:l})}else{var o=Object(s.a)({},n);o[e]=z()(n[e],t),this.setStatePromised({task:o})}},t.prototype.render=function(){var e=this.props,t=e.course,a=(e.module,e.onCancel,e.onDelete,e.idsNotCoveredByAnyTask),n=e.searchMode,r=this.state,s=r.task,o=r.taskCustomization,i=r.title,c=r.searchResult,u=r.searchMarkedIds,d=r.isSearching,m=r.templates,p=n?u:s.centralContent.map((function(e){return e.id})).concat(s.abilities.map((function(e){return e.id}))).concat(s.knowledgeRequirements.map((function(e){return e.id}))),h=s&&Object(R.c)(v.a.currentUser,s),f=(s&&P.a.isUri(s.url),this.features);return l.createElement(l.Fragment,null,l.createElement("h1",null,i),l.createElement("div",{className:"sv-layout sv-skip-spacer sv-column-6"},l.createElement("div",{className:"sv-html-portlet sv-portlet sv-skip-spacer"},l.createElement("div",{className:"ked_boxed"},l.createElement("h3",null,n?"Filtrera på kunskapskrav":h?"Välj kunskapskrav":"Kunskapskrav"),n?l.createElement("p",null,"Markera de kunskapskrav som uppgiften måste täcka."):h&&l.createElement("p",null,"Markera de kunskapskrav som din uppgift täcker."),l.createElement(I.a,{knowledgeRequirements:t.knowledgeRequirements,markedIds:p,idsToMarkNotOk:a,markMode:n||h,migratedIds:s&&s.migratedTexts&&s.migratedTexts.knowledgeRequirements,onMarkChanged:this.onMarkChanged.bind(this)}))),l.createElement("div",{className:"sv-html-portlet sv-portlet"},l.createElement(x.a,{options:t.abilities,title:h||n?"Välj förmågor":"Förmågor",markedIds:p,markMode:h||n,migratedIds:s&&s.migratedTexts&&s.migratedTexts.abilities,onMarkChanged:this.onMarkChanged.bind(this)})),l.createElement("div",{className:"sv-html-portlet sv-portlet"},l.createElement(x.a,{options:t.centralContent,title:h||n?"Välj centralt innehåll":"Centralt innehåll",markedIds:p,markMode:h||n,migratedIds:s&&s.migratedTexts&&s.migratedTexts.centralContent,onMarkChanged:this.onMarkChanged.bind(this)}))),l.createElement("div",{className:"sv-layout sv-column-6"},l.createElement("div",{className:"sv-html-portlet sv-portlet sv-skip-spacer"},d&&l.createElement("p",null,l.createElement(L.b,null)," Laddar uppgifter..."),c?l.createElement(l.Fragment,null,l.createElement(A,{searchMarkedIds:u,searchResult:c,task:s,writeAccess:h,taskCustomization:o,editTask:this}),this.state.previewTaskContent?l.createElement("div",{dangerouslySetInnerHTML:{__html:Object(ye.a)(this.state.previewTaskContent)}}):s&&l.createElement(X,{writeAccess:h,task:s,taskCustomization:o,editTask:this}),s&&l.createElement(J,{task:s})):l.createElement(l.Fragment,null,s&&l.createElement(Y,{task:s,course:t,writeAccess:h,features:f,editTask:this,templates:m}),s&&l.createElement(X,{writeAccess:h,task:s,taskCustomization:o,editTask:this}),s&&l.createElement(J,{task:s}))),s&&l.createElement("div",{className:"sv-html-portlet sv-portlet"},l.createElement("hr",null),l.createElement("br",null),l.createElement(Q,{writeAccess:h,editTask:this}))))},t}(l.Component),Ne=a(161),Te=a(108),we=function(e){function t(t){var a=e.call(this,t)||this;return a.state={},a}return Object(s.c)(t,e),t.prototype.openTaskDialog=function(e){var t=this.props,a=t.taskCustomizations,n=t.course,r=t.host,s=t.module,l=(t.taskIds,t.onTaskAdded,t.onTaskUpdated),o=t.onTaskCustomizationUpdated,i=t.onTaskDeleted,c=t.idsNotCoveredByAnyTask,u=t.onTaskReplaced;r.openDialog({Component:je,props:{task:e,taskCustomization:a&&a[e.id],module:s,course:n,host:r,idsNotCoveredByAnyTask:c,onSave:function(e){var t=Object(O.m)(e,v.a.currentUser);l(t),r.closeDialog()},onSaveCustomization:function(t){o(e.id,t),r.closeDialog()},onDelete:function(){i(e.id),r.closeDialog()},onReplace:function(e,t){u(e,t),r.closeDialog()},onCancel:function(){return r.closeDialog()}}})},t.prototype.render=function(){var e=this,t=this.props,a=Object(Te.a)(t.course.tasks,t.taskIds,{appendLeftovers:!1});return l.createElement("div",null,l.createElement(Ne.a,{taskMetas:a.map((function(e){return{task:e,isTaskOwner:Object(R.c)(v.a.currentUser,e)}})),renderEditLink:function(t){var a=t.task,n=t.isTaskOwner;return l.createElement("div",{className:n?"editItem":"viewItem",onClick:function(){return e.openTaskDialog(a)}})},renderLink:function(t){var a=t.task;return a.content?l.createElement("a",{href:"#",onClick:function(t){t.preventDefault(),e.openTaskDialog(a)}},a.name):l.createElement("a",{href:a.url,target:"_blank"},a.name)},onSort:function(t,a,n){e.props.onTasksReordered(t,a,n)}}),l.createElement("br",null),l.createElement("a",{className:"btn",onClick:function(){var a=e.props,n=a.course,r=a.host,s=a.idsNotCoveredByAnyTask,l=a.module,o=a.onTaskAdded;a.onTaskCustomizationUpdated;t.host.openDialog({Component:je,props:{searchMode:!0,module:l,course:n,host:r,idsNotCoveredByAnyTask:s,onSave:function(e,t){e=Object(O.m)(e,v.a.currentUser),o(e,t),r.closeDialog()},onCancel:function(){return r.closeDialog()}}})}},l.createElement("i",{className:"fas fa-search","aria-hidden":!0})," Sök uppgift")," ",l.createElement("a",{onClick:function(){var t=e.props,a=t.course,n=t.host,r=t.module,s=(t.taskIds,t.onTaskAdded),l=(t.onTaskUpdated,t.onTaskDeleted,t.idsNotCoveredByAnyTask);n.openDialog({Component:je,props:{module:r,course:a,host:n,idsNotCoveredByAnyTask:l,onSave:function(e){e=Object(O.m)(e,v.a.currentUser),s(e),n.closeDialog()},onCancel:function(){return n.closeDialog()}}})},className:"btn"},l.createElement("i",{className:"fas fa-plus","aria-hidden":!0})," Lägg till egen uppgift"))},t}(l.Component),Se=a(105),Ue=a(90),Ie=a(187),De=a(162),ze=function(e){function t(t){var a=e.call(this,t)||this;return a.state={editMandatoryContent:!1},a}return Object(s.c)(t,e),t.prototype.getModuleIndex=function(){var e=this.props,t=e.course,a=e.module;return t.modules.findIndex((function(e){return e.id===a.id}))},t.prototype.getModuleOrderIndex=function(){var e=this.props,t=(e.course,e.module);return this.props.getOrderedModules().findIndex((function(e){return e.id===t.id}))},t.prototype.updateModule=function(e){var t=this.props.module,a=z()(t,e),n=this.getModuleIndex();this.props.host.update({modules:{$splice:[[n,1,a]]}})},t.prototype.onTaskAdded=function(e,t){var a={},n=this.props.module.taskIds.slice();n.push(e.id),this.props.course.tasks.some((function(t){return t.id===e.id}))||(a.tasks={$push:[e]});var r=Object(s.a)({},this.props.module.taskCustomizations||{});t&&(r[e.id]=t);var l=this.getModuleIndex();a.modules={},a.modules[l]={taskIds:{$set:n},taskCustomizations:{$set:r}},this.props.host.update(a)},t.prototype.onTaskUpdated=function(e){if(!e.$meta)throw new Error(Object(i.a)(oe||(oe=Object(s.e)(["Hoppsan, blev lite knas. Fel ID: ",""],["Hoppsan, blev lite knas. Fel ID: ",""])),"Pa7Dq"));var t=this.props.course.tasks.findIndex((function(t){return t.id===e.id}));t>=0&&this.props.host.update({tasks:{$splice:[[t,1,e]]}})},t.prototype.onTaskCustomized=function(e,t){var a=Object(s.a)({},this.props.module.taskCustomizations||{});a[e]=t,this.updateModule({taskCustomizations:{$set:a}})},t.prototype.onTaskDeleted=function(e){this.updateModule({taskIds:{$set:this.props.module.taskIds.filter((function(t){return t!==e}))},taskCustomizations:{$apply:function(t){var a=Object(s.a)({},t);return delete a[e],a}}})},t.prototype.onTaskReplaced=function(e,t){var a=this.props.module.taskIds.indexOf(e);if(a<0)Object(i.n)(Object(i.a)(ie||(ie=Object(s.e)(["Kunde inte spara uppgift. Felkod d72kQ"],["Kunde inte spara uppgift. Felkod d72kQ"]))));else{var n={taskIds:{$splice:[[a,1,t.id]]},taskCustomizations:{$apply:function(t){var a=Object(s.a)({},t);return delete a[e],a}}},r=z()(this.props.module,n),l=this.getModuleIndex();this.props.host.update({modules:{$splice:[[l,1,r]]},tasks:{$set:this.props.course.tasks.concat(t)}})}},t.prototype.onTasksReordered=function(e,t,a){var n=Object(De.a)(this.props.course.tasks,this.props.module.taskIds,e,t,a,{appendLeftovers:!1});this.updateModule({taskIds:{$set:n}})},t.prototype.render=function(){for(var e=this,t=this.props,a=t.course,n=t.host,r=t.module,o=t.idsNotCoveredByAnyTask,c=this.getModuleIndex(),u=this.getModuleOrderIndex(),d=this.updateModule.bind(this),m=1,p=["--"],h=["--"],v=0;v<51;++v)p.push(""+m),h.push(""+ ++m);return l.createElement(Ue.a,{inactivated:!T.b.cbCollapseBoxes,title:l.createElement(l.Fragment,null,l.createElement("div",{style:{float:"right"}},u>0&&l.createElement("span",null,l.createElement("i",{className:"fas fa-arrow-circle-up selectable","aria-hidden":"true",onClick:function(t){t.stopPropagation(),e.props.onReorder(-1)}})," "),u<a.modules.length-1&&l.createElement("span",null,l.createElement("i",{className:"fas fa-arrow-circle-down selectable","aria-hidden":"true",onClick:function(t){t.stopPropagation(),e.props.onReorder(1)}})," "),l.createElement(Se.a,{title:"Ta bort modulen",style:{display:"inline-block"},onClick:function(e){e.stopPropagation(),confirm(Object(i.a)(ce||(ce=Object(s.e)(["Ta bort modul ","?"],["Ta bort modul ","?"])),r.name))&&n.update({modules:{$splice:[[c,1]]}})}})),l.createElement("p",null,r.name)),headerOpen:"Ny kursmodul"==r.name},l.createElement("div",{className:"course-module ked_boxed",style:{position:"relative"}},l.createElement(Ie.a,{text:r.name,tag:"h3",className:"renameable-text",maxChars:100,placeholder:"Namnlös modul",onChange:function(e){return d({name:{$set:e}})}}),l.createElement("div",{className:"align-horizontal spaced"},l.createElement("div",{className:"horizontalItem center"},l.createElement("p",null,"Startvecka")),l.createElement("div",{className:"horizontalItem center"},l.createElement("select",{value:r.startWeek||"--",onChange:function(e){return d({startWeek:{$set:"--"===e.target.value?void 0:parseInt(e.target.value)}})}},p.map((function(e){return l.createElement("option",{key:e,value:e},e)})))),l.createElement("div",{className:"horizontalItem center"},l.createElement("p",null,"Slutvecka")),l.createElement("div",{className:"horizontalItem center"},l.createElement("select",{value:r.endWeek||"--",onChange:function(e){return d({endWeek:{$set:"--"===e.target.value?void 0:parseInt(e.target.value)}})}},h.map((function(e){return l.createElement("option",{key:e,value:e},e)}))))),l.createElement("h4",null,"Kursmodulens introduktion"),l.createElement(G.a,{actions:["bold","italic","underline","strikethrough","heading2","heading3","olist","ulist","outdent","indent","line","link","image"],defaultActions:V.a,html:r.mandatoryContent,onChange:function(e){d({mandatoryContent:{$set:e}})}}),l.createElement("h4",null,"Uppgifter"),l.createElement(we,{taskIds:r.taskIds,taskCustomizations:r.taskCustomizations,course:a,module:r,host:n,idsNotCoveredByAnyTask:o,onTaskAdded:function(t,a){return e.onTaskAdded(t,a)},onTaskUpdated:function(t){return e.onTaskUpdated(t)},onTaskCustomizationUpdated:function(t,a){return e.onTaskCustomized(t,a)},onTaskDeleted:function(t){return e.onTaskDeleted(t)},onTaskReplaced:function(t,a){return e.onTaskReplaced(t,a)},onTasksReordered:function(t,a,n){return e.onTasksReordered(t,a,n)}}),l.createElement("h4",null,"Modulresurser"),l.createElement("p",{className:"subHeader"},"(Eventuella resuser för redovisning av modulen samt för modulen som helhet)"),l.createElement(U,{resources:r.resources,onUpdate:function(e){return d({resources:e})},host:n}),l.createElement("div",{style:{position:"absolute",top:0,right:0}},u>0&&l.createElement("span",null,l.createElement("i",{className:"fas fa-arrow-circle-up selectable","aria-hidden":"true",onClick:function(){return e.props.onReorder(-1)}})," "),u<a.modules.length-1&&l.createElement("span",null,l.createElement("i",{className:"fas fa-arrow-circle-down selectable","aria-hidden":"true",onClick:function(){return e.props.onReorder(1)}})," "),l.createElement(Se.a,{title:"Ta bort modulen",style:{display:"inline-block"},onClick:function(){return confirm(Object(i.a)(ue||(ue=Object(s.e)(["Ta bort modul ","?"],["Ta bort modul ","?"])),r.name))&&n.update({modules:{$splice:[[c,1]]}})}})),l.createElement("div",{className:"horizontal-align"},l.createElement("div",{className:"horizontaItem activateCourseModule"},l.createElement("div",{className:"btn btn-info"+(r.inactive?" btn-activate":" btn-inactivate"),onClick:function(){return d({inactive:{$set:!r.inactive}})}},r.inactive?"Aktivera modulen":"Inaktivera modulen")))))},t}(l.Component),Re=function(e){function t(t){var a=e.call(this,t)||this;return a._moduleRefs={},a.state={},a}return Object(s.c)(t,e),t.prototype.addModule=function(){this.props.host.update({modules:{$push:[{name:"Ny kursmodul",id:Object(C.i)(),resources:[],taskIds:[]}]}})},t.prototype.getOrderedModules=function(){var e=this.props.course,t=e.moduleOrder||e.modules.map((function(e){return e.id}));return t.map((function(t){return e.modules.find((function(e){return e.id===t}))})).filter((function(e){return!!e})).concat(e.modules.filter((function(e){return!t.find((function(t){return e.id===t}))})))},t.prototype.reorder=function(e,t){return Object(s.b)(this,void 0,void 0,(function(){var a,n,r,l,o,i,c;return Object(s.d)(this,(function(s){switch(s.label){case 0:return this.props.course,a=this.getOrderedModules(),n=a.findIndex((function(t){return t.id===e})),(r=n+t)<0||r>=a.length?[2]:(l=a[r],(o=a.map((function(e){return e.id})))[r]=e,o[n]=l.id,i=document.documentElement.scrollTop,[4,this.props.host.update({moduleOrder:{$set:o}})]);case 1:if(s.sent(),c=Object(E.findDOMNode)(this._moduleRefs[e]))try{window.scrollTo({top:i}),(c.getBoundingClientRect().top<0||c.getBoundingClientRect().bottom>document.documentElement.scrollHeight)&&c.scrollIntoView({behavior:"smooth",block:"start"})}catch(e){window.scrollTo(null,i),(c.getBoundingClientRect().top<0||c.getBoundingClientRect().bottom>document.documentElement.scrollHeight)&&c.scrollIntoView(!0)}return[2]}}))}))},t.prototype.render=function(){var e=this,t=this.props,a=t.course,n=t.host,r=t.idsNotCoveredByAnyTask,s=(a.moduleOrder||a.modules.map((function(e){return e.id})),this.getOrderedModules());return l.createElement("div",{className:"sv-html-portlet sv-portlet",ref:function(t){return e._elem=t}},s.map((function(t){return l.createElement(ze,{ref:function(a){return e._moduleRefs[t.id]=a},key:t.id,course:a,module:t,onReorder:function(a){return e.reorder(t.id,a)},getOrderedModules:function(){return e.getOrderedModules()},host:n,idsNotCoveredByAnyTask:r})})),l.createElement("div",{className:"btn btn-large",onClick:function(){return e.addModule()}},"Lägg till kursmodul"))},t}(l.Component),xe=new(function(e){function t(t){var a=e.call(this,{query:function(){return Object(s.b)(a,void 0,void 0,(function(){var e,a;return Object(s.d)(this,(function(n){switch(n.label){case 0:return e=t(),[4,v.a.kedBackendClient.list("schools",{name:e,include:["courses"]})];case 1:if(a=n.sent(),this._schoolId=a.length>0&&a[0].id,!this._schoolId)throw new Error(Object(i.a)(de||(de=Object(s.e)(["Skolan ",' finns inte registrerad i systemet.\n          Kontakta en administratör för Kursbyggarverktyget och be om att lägga till skolan med namnet "','"'],["Skolan ",' finns inte registrerad i systemet.\n          Kontakta en administratör för Kursbyggarverktyget och be om att lägga till skolan med namnet "','"'])),e,e));return[2,Object(i.k)(a.map((function(e){return e.courses})))]}}))}))}})||this;return a}return Object(s.c)(t,e),t.prototype.getSchoolId=function(){var e=this;return this.ensureHasData().then((function(){return e._schoolId}))},t}(a(181).a))((function(){return v.a.currentUser.school})),Me=a(301),Pe=function(e){function t(t){var a=e.call(this,t)||this;return a.state={schoolCourses:null},a.onSchoolCoursesUpdated=a.onSchoolCoursesUpdated.bind(a),a}return Object(s.c)(t,e),t.prototype.componentDidMount=function(){xe.subscribe(this.onSchoolCoursesUpdated).catch(i.n)},t.prototype.componentWillUnmount=function(){xe.unsubscribe(this.onSchoolCoursesUpdated)},t.prototype.onSchoolCoursesUpdated=function(e){var t=Object(i.g)("name"),a=Object(i.g)("createdDate");e.sort((function(e,n){return t(e,n)||a(e,n)})),this.setState({schoolCourses:e})},t.prototype.outputCourses=function(e,t,a){return l.createElement(Ue.a,{title:l.createElement("p",null,t),headerOpen:a,contentClassName:"odd-even"},e.map((function(e){return l.createElement("div",{className:"schoolCourse",key:e.id},l.createElement("div",{className:"align-horizontal"},l.createElement("div",{className:"horizontalItem top pull-right"},l.createElement(Me.a,{to:"/courses/"+e.id+"/edit",className:"editItem"})),l.createElement("div",{className:"horizontalItem top"},l.createElement(Me.a,{to:"/courses/"+e.id+"/edit"},e.name)),l.createElement("div",{className:"horizontalItem top"},e.active&&l.createElement("div",{className:"pill active"},"Aktiv")),e.active&&!e.publishable&&l.createElement("div",{className:"horizontalItem top"},l.createElement("div",{className:"pill incomplete"},"Inkomplett"))),l.createElement("div",{className:"horizontalItem top"},l.createElement("p",null,e.description)),l.createElement("div",{className:"horizontalItem top"},e.modifiedBy?l.createElement("p",{className:"small"},"Redigerad av ",e.modifiedBy.name," / ",Object(O.h)(e.modifiedDate)):l.createElement("p",{className:"small",style:{fontStyle:"italic"}}," ")))})))},t.prototype.render=function(){var e=this.state.schoolCourses,t=[],a=[];if(e){var n=v.a.currentUser.mail;e.forEach((function(e){e.activatedBy&&e.activatedBy.url==n?t.push(e):e.responsibleTeachers.filter((function(e){return e.url==n})).length>0?t.push(e):a.push(e)}))}return l.createElement("div",{className:"sv-html-portlet sv-portlet sv-skip-spacer"},l.createElement("div",{className:"ked_boxed"},l.createElement("h3",null,"Skolans kurser"),l.createElement("div",{className:"taskContainer odd-even"},e?l.createElement(l.Fragment,null,this.outputCourses(t,"Mina kurser",!0),this.outputCourses(a,"Andra kurser",!1)):l.createElement("p",null,l.createElement(L.b,null)," Laddar skolans kurser")),"#/courses/new"!==location.hash&&l.createElement(Me.a,{className:"btn",to:"/courses/new",onClick:function(){return window.scroll(0,0)}},"Skapa ny kurs")))},t}(l.Component),Be=a(115),Le=a(87),Ae=a(1),Ke=a(141),Fe=a(97),$e=Object(Fe.a)((function(e){var t=e.school,a=e.selectedTeachers,n=e.onSelect,r=e.onBlur,l=Le.c.schools.cacheOptimized().name(t).single().read().edsSchoolNameGymn,c=v.b.edsClient.suspense.getSchoolTeachers({schoolName:l}).map((function(e){return{label:e.teacherFirstName+" "+e.teacherLastName,value:e.teacherEmailAddress}}));Object(R.d)(v.b.currentUser,t)&&!c.some((function(e){return e.value===v.b.currentUser.mail}))&&c.push({label:v.b.currentUser.displayName,value:v.b.currentUser.mail});var u=Object(i.b)(a,(function(e){return e.email}));return c=c.filter((function(e){return!u[e.value]})).sort(Object(i.h)(["label"],Ae.a.KED_LOCALE)),o.a.createElement(Ke.a,{isMulti:!1,options:c,defaultMenuIsOpen:!0,autoFocus:!0,onBlur:function(){return r()},placeholder:Object(i.a)(me||(me=Object(s.e)(["Välj bland skolans lärare..."],["Välj bland skolans lärare..."]))),noOptionsMessage:function(){return Object(i.a)(pe||(pe=Object(s.e)(["Det finns inga fler lärare att välja från"],["Det finns inga fler lärare att välja från"])))},onChange:function(e){var t=e,a=t.label,r=t.value;n({name:a,email:r})}})}));function _e(e){var t=e.school,a=e.teachers,n=e.onUpdate,r=Object(l.useRef)(),c=Object(s.f)(Object(l.useState)(!1),2),u=c[0],d=c[1],m=T.b.teacherRights;return o.a.createElement("div",{className:"teachers-list"},o.a.createElement("h3",null,"Ansvariga lärare"),o.a.createElement("table",{style:{width:"100%"}},o.a.createElement("thead",null,a.length>0&&o.a.createElement("tr",null,o.a.createElement("th",{style:{width:"15%"}},Object(i.a)(he||(he=Object(s.e)(["Namn"],["Namn"])))),o.a.createElement("th",null,Object(i.a)(ve||(ve=Object(s.e)(["E-postadress"],["E-postadress"])))),m&&o.a.createElement("th",{style:{width:"24px"}},Object(i.a)(fe||(fe=Object(s.e)(["Behörighet"],["Behörighet"])))),o.a.createElement("th",{style:{width:"24px"}}))),o.a.createElement("tbody",null,a.map((function(e,t){return o.a.createElement("tr",{key:t},o.a.createElement("td",null,o.a.createElement("input",{type:"text",ref:r,value:e.name,autoFocus:!e.name&&t>0,onChange:function(r){if(r.target.value||e.email){var l=Object(s.h)(a);l[t]=Object(s.a)(Object(s.a)({},e),{name:r.target.value}),n(l)}else n(Object(s.h)(a.slice(0,t),a.slice(t+1)))}})),o.a.createElement("td",null,o.a.createElement("input",{type:"text",style:{width:"100%"},value:e.email||e.url,onKeyDown:function(e){9===e.which&&!e.shiftKey&&t===a.length-1&&(a.length<1||a[a.length-1].name)&&(d(!0),e.preventDefault())},onChange:function(r){var l=Object(s.a)(Object(s.a)({},e),{url:r.target.value,email:r.target.value});if(r.target.value||e.name){var o=Object(s.h)(a);o[t]=l,n(o)}else n(Object(s.h)(a.slice(0,t),a.slice(t+1)))}})),m&&o.a.createElement("td",null,o.a.createElement("select",{disabled:!(e.email||e.url),value:e.access||"edit",onChange:function(r){var l=Object(s.h)(a);l[t]=Object(s.a)(Object(s.a)({},e),{access:r.target.value}),n(l)}},o.a.createElement("option",{value:"read"},Object(i.a)(be||(be=Object(s.e)(["Läsa"],["Läsa"])))),o.a.createElement("option",{value:"edit"},Object(i.a)(ge||(ge=Object(s.e)(["Redigera"],["Redigera"])))),o.a.createElement("option",{value:"full"},Object(i.a)(ke||(ke=Object(s.e)(["Full"],["Full"])))))),o.a.createElement("td",null,o.a.createElement(Se.a,{onClick:function(){n(Object(s.h)(a.slice(0,t),a.slice(t+1)))}})))})))),o.a.createElement("br",null),u?o.a.createElement(l.Suspense,{fallback:o.a.createElement(L.b,null)},o.a.createElement($e,{school:t,selectedTeachers:a,onBlur:function(){return d(!1)},onSelect:function(e){var t=e.name,r=e.email,l={name:t,email:r,url:r,access:"edit"},o=Object(s.h)(a);o.push(l),n(o),d(!1)}})):o.a.createElement("a",{className:"btn",onClick:function(){d(!0)}},o.a.createElement("i",{className:"fas fa-user-plus","aria-hidden":!0}),Object(i.a)(Ee||(Ee=Object(s.e)([" Lägg till ansvarig lärare"],[" Lägg till ansvarig lärare"])))))}var Ge,Ve,qe,We,He,Ye,Je,Qe,Xe,Ze,et,tt,at,nt,rt,st,lt,ot,it,ct,ut,dt,mt,pt,ht,vt,ft,bt,gt,kt=a(198),Et=function(e){function t(t){var a=e.call(this,t)||this;return a.state={isOpen:!1},a}return Object(s.c)(t,e),t.prototype.render=function(){var e=this.props.course,t=(this.state.isOpen,[]),a=Object(Be.d)(e);return t.push(l.createElement("tr",{key:"centralContent",className:"covered-item-label"},l.createElement("td",{colSpan:2},"Centralt innehåll"))),e.centralContent.forEach((function(e,n){return t.push(l.createElement("tr",{key:e.id,className:n%2?"tableOdd":""},l.createElement("td",null,l.createElement("p",{className:"criteriaText",dangerouslySetInnerHTML:{__html:e.name}})),l.createElement("td",null,l.createElement("p",null,(a[e.id]||[]).length))))})),t.push(l.createElement("tr",{key:"abilities",className:"covered-item-label"},l.createElement("td",{colSpan:2},"Förmågor"))),e.abilities.forEach((function(e,n){return t.push(l.createElement("tr",{key:e.id,className:n%2?"tableOdd":""},l.createElement("td",null,l.createElement("p",{className:"abilityText",dangerouslySetInnerHTML:{__html:e.name}})),l.createElement("td",null,l.createElement("p",null,(a[e.id]||[]).length))))})),t.push(l.createElement("tr",{key:"futureAbilities",className:"covered-item-label"},l.createElement("td",{colSpan:2},"Framtidsförmågor"))),kt.a.forEach((function(e,n){return t.push(l.createElement("tr",{key:e,className:n%2?"tableOdd":""},l.createElement("td",null,l.createElement("p",{className:"abilityText"},e)),l.createElement("td",null,l.createElement("p",null,(a[e]||[]).length))))})),l.createElement(Ue.a,{className:"larger",title:l.createElement("p",null,"Kursens täckningstabell"),contentClassName:"weighted-items-table"},l.createElement("p",null,"Tabellen anger hur många uppgifter som berör varje del."),l.createElement("table",null,l.createElement("tbody",null,t)))},t}(l.Component),Ot=function(e){function t(t){var a=e.call(this,t)||this;return a.state={url:a.props.url||""},a}return Object(s.c)(t,e),t.prototype.save=function(){var e=this.state.url;if(!P.a.isUri(e))throw new Error(Object(i.a)(Ge||(Ge=Object(s.e)(["Angiven URL '","' är ogiltig. Ska börja med http: eller https:"],["Angiven URL '","' är ogiltig. Ska börja med http: eller https:"])),e));this.props.onSave(e)},t.prototype.render=function(){var e=this,t=this.props,a=t.onSave,n=t.onDelete,r=this.state,s=P.a.isUri(this.state.url);return l.createElement("div",null,l.createElement("div",{className:"sv-html-portlet sv-portlet sv-skip-spacer"},l.createElement("h2",null,"Koppla en arbetsgång till kursen"),l.createElement("p",null,"Det går bara att lägga in en arbetsgång per kurs."),l.createElement("br",null),l.createElement("div",{className:"align-horizontal"},l.createElement("div",{className:"horizontalItem top"},"Länk:"),l.createElement("div",{className:"horizontalItem top "},l.createElement("input",{type:"text",tabIndex:1,size:50,value:r.url,onChange:function(t){return e.setState({url:t.target.value})}})),l.createElement("div",{className:"horizontalItem top spaced"})),l.createElement("br",null)),l.createElement("div",{className:"sv-html-portlet sv-portlet",id:"svid12_492422d515badf36646e4ff1"},n&&l.createElement("div",{tabIndex:2,className:"btn btn-warning btn-large pull-right",onClick:function(){return n()}},"Ta bort arbetsgång"),l.createElement("a",{tabIndex:1,className:"btn btn-large"+(s?"":" btn-inactive"),onClick:s&&function(){return a(r.url)}},"Spara")))},t}(l.Component),Ct=function(e){function t(t){var a=e.call(this,t)||this;return a.state={},a}return Object(s.c)(t,e),t.prototype.render=function(){var e=this.props,t=e.host,a=e.onUpdate,n=e.url;return l.createElement("div",null,l.createElement("div",{className:"taskContainer"},n&&l.createElement("div",{className:"align-horizontal"},l.createElement("div",{className:"horizontalItem top"},l.createElement("a",{className:"editItem",onClick:function(){return t.openDialog({Component:Ot,props:{url:n,onSave:function(e){a({$set:e}),t.closeDialog()},onDelete:function(){a({$set:void 0}),t.closeDialog()}}})}})),l.createElement("div",{className:"horizontalItem top"},l.createElement("a",{href:n,target:"_blank"},"Nuvarande arbetsgång")))),!n&&l.createElement("a",{className:"btn",onClick:function(){return t.openDialog({Component:Ot,props:{onSave:function(e){a({$set:e}),t.closeDialog()}}})}},l.createElement("i",{className:"fas fa-paperclip","aria-hidden":!0})," Koppla en arbetsgång till kursen"))},t}(l.Component),yt=a(163),jt=Object(Fe.a)((function(e){var t=e.school,a=e.courseCode,n=e.selectedStudyGroups,r=e.placeholder,l=e.onUpdate,c=Le.c.schools.cacheOptimized().name(t).single().read().edsSchoolNameGymn,u=v.b.edsClient.suspense.getSchoolTuitionGroups({schoolName:c,courseCode:a}),d=u?u.map((function(e){return{label:e.tuitionGroupName,value:e.tuitionGroupName}})):[];return o.a.createElement(Ke.a,{isMulti:!0,options:d,value:n.map((function(e){return{label:e,value:e}})),placeholder:r,noOptionsMessage:function(){return Object(i.a)(Ve||(Ve=Object(s.e)(["Kunde inte hitta undervisningsgrupper för denna kurs"],["Kunde inte hitta undervisningsgrupper för denna kurs"])))},onChange:function(e){l(e.map((function(e){return e.value})))}})})),Nt=a(101),Tt=a(95),wt=a(96),St=function(e){function t(t){var a=e.call(this,t)||this;return a.state={changeImageUrl:!1},a}return Object(s.c)(t,e),t.prototype.setImageUrl=function(e){this.props.course.imageId},t.prototype.render=function(){var e=this.props,t=e.course,a=e.origCourse,n=e.host,r=Object(Be.e)(t),o=Object(Be.b)(t),c=Object(Be.f)(t),u=t.images.find((function(e){return e.id===t.imageId})),d=u&&u.url.startsWith("data:"),m=u&&u.url.indexOf("storage.googleapis.com")>0,p=Object(Be.c)(t),h=Object(yt.a)(),v=!T.b.teacherRights||p.some((function(e){return e.email===h.mail&&"full"===e.access})),f=T.b.studyGroups;return l.createElement("div",{className:"sv-row sv-layout sv-skip-spacer"},l.createElement("div",{className:"sv-layout sv-skip-spacer sv-column-7"},l.createElement("div",{className:"sv-html-portlet sv-portlet sv-skip-spacer"},t.isTemplate&&l.createElement("h1",null,"Kursmall"),l.createElement("h2",null,"Kursövergripande"),l.createElement(Ue.a,{title:l.createElement("p",null,"Kursövergripande"),headerOpen:!0,inactivated:!T.b.cbCollapseBoxes},l.createElement("div",{className:"ked_boxed"},l.createElement("div",null,"custom"===t.subjectId&&l.createElement(l.Fragment,null,l.createElement("h3",null,"Kursens namn och poäng"),l.createElement(Tt.a,null,l.createElement(wt.a,null,l.createElement(Nt.a,{id:"customCourseName",autoFocus:!0,label:Object(i.a)(qe||(qe=Object(s.e)(["Kursens namn"],["Kursens namn"]))),value:t.name,onChange:function(e){return n.update({name:{$set:e}})}})),l.createElement(wt.a,null,l.createElement(Nt.a,{id:"customCourseCode",label:Object(i.a)(We||(We=Object(s.e)(["Kurskod"],["Kurskod"]))),size:12,value:t.code||"",onChange:function(e){return n.update({code:{$set:e}})}}))),l.createElement(Nt.a,{id:"customCoursePoints",label:Object(i.a)(He||(He=Object(s.e)(["Poäng"],["Poäng"]))),size:3,value:""+(t.points||""),onChange:function(e){var t=e?parseInt(e):0;!isNaN(t)&&t<1e3&&n.update({points:{$set:{numPoints:t}}})}}),l.createElement("br",null)),l.createElement("h3",null,"Kursens bild"),d?l.createElement("p",null,"Kursens bild ligger i databasen. För att ändra bild måste du dra och släppa en ny bild ovanpå den gamla högst upp på denna sida. Bilden kan antingen vara från en annan webbsida. Lokala bildfiler går också bra att dra och släppa."):m?l.createElement("p",null,"Kursens bild ligger i Kunskapsskolans Google moln. För att ändra bild måste du dra och släppa en ny bild ovanpå den gamla högst upp på denna sida. Bilden kan antingen vara från en annan webbsida. Lokala bildfiler går också bra att dra och släppa."):u?l.createElement("div",null,l.createElement("textarea",{value:u.url,style:{width:"100%",height:"30px"},onChange:function(e){return Object(b.b)(t,a,n,e.target.value)}}),l.createElement("p",null,"Bilden som visas högst upp hämtas från angiven URL. För att ändra bild kan du redigera URL ovan. Ett annat sätt att ändra bild är att dra och släppa en ny bild över den gamla högst upp på sidan.")):l.createElement("p",null,"Kursen saknar egen bild. Lägg till en bild genom att dra och släppa en bild på kurs-bannern högst upp på den här sidan."),l.createElement("br",null)),!t.isTemplate&&l.createElement("div",null,l.createElement("h3",null,"Beskrivning"),l.createElement("p",{className:"subHeader"},"(Beskrivning av kursen. För att skilja mellan olika varianter av samma gymnasiekurs)"),l.createElement("textarea",{className:"inputTextBox inputTextSmall",value:t.description,onChange:function(e){return n.update({description:{$set:e.target.value}})}}),l.createElement("br",null)),l.createElement("div",null,l.createElement("h3",null,"Upptaktstext"),l.createElement("p",{className:"subHeader"},"(texten ska visas på kursens upptaktssektion)"),l.createElement(G.a,{html:t.runUpText,defaultActions:V.a,actions:["bold","italic","underline","strikethrough","heading2","heading3","olist","ulist","outdent","indent","line","link","image"],onChange:function(e){return n.update({runUpText:{$set:e}})}}),l.createElement("br",null)),l.createElement("h3",null,"Kursresurser"),l.createElement("p",{className:"subHeader"},"(Resurser för upptakt och kursen som helhet)"),l.createElement(U,{resources:t.resources,onUpdate:function(e){return n.update({resources:e})},host:n}),l.createElement("br",null),l.createElement("h3",null,"Arbetsgång"),l.createElement("p",{className:"subHeader"},"(Eventuell länk till arbetsgång för kursen)"),l.createElement(Ct,{url:t.workFlowLink,onUpdate:function(e){return n.update({workFlowLink:e})},host:n}),l.createElement("br",null),!t.isTemplate&&l.createElement("div",null,l.createElement("h3",null,"Google Classroom"),f?l.createElement("div",{className:"align-horizontal"},l.createElement("div",{className:"horizontalItem top"},l.createElement("div",{className:"checkBox"+(t.googleCreateClassrooms?" checked":""),onClick:function(){n.update({googleCreateClassrooms:{$set:!t.googleCreateClassrooms}})}})),l.createElement("div",{className:"horizontalItem top"},"Skapa klassrum för kursen ",l.createElement("br",null),l.createElement("em",null,"(kursen måste sparas innan du kan synkronisera med Classroom)"))):l.createElement("div",{className:"align-horizontal spaced"},l.createElement("div",{className:"horizontalItem top"},l.createElement("input",{placeholder:"Google classroom URL",type:"text",size:30,value:t.googleClassRoomURL,onChange:function(e){return n.update({googleClassRoomURL:{$set:e.target.value}})}})),l.createElement("div",{className:"horizontalItem top"},l.createElement("input",{placeholder:"kod",type:"text",size:8,value:t.googleClassRoomCode,onChange:function(e){return n.update({googleClassRoomCode:{$set:e.target.value}})}})))),t.isTemplate?null:l.createElement(l.Fragment,null,l.createElement(_e,{school:t.school,teachers:t.responsibleTeachers,onUpdate:function(e){n.update({responsibleTeachers:{$set:e}})}}),l.createElement("br",null),f&&l.createElement("div",{className:"select-studygroups"},l.createElement("h3",null,Object(i.a)(Ye||(Ye=Object(s.e)(["Undervisningsgrupper"],["Undervisningsgrupper"])))),l.createElement(l.Suspense,{fallback:l.createElement(L.b,null)},l.createElement(jt,{school:t.school,courseCode:t.code,selectedStudyGroups:t.studyGroups||[],onUpdate:function(e){return n.update({studyGroups:{$set:e}})},placeholder:Object(i.a)(Je||(Je=Object(s.e)(["Koppla undervisningsgrupper till kursen..."],["Koppla undervisningsgrupper till kursen..."])))})))))),l.createElement("div",{className:"sv-html-portlet sv-portlet"},l.createElement("div",{id:"Kursensmoduler"}),l.createElement("h2",null,"Kursens moduler"),l.createElement("hr",null)),l.createElement(Re,{host:n,course:t,idsNotCoveredByAnyTask:o}),l.createElement("div",null,l.createElement("br",null),l.createElement(Et,{course:t})),l.createElement("div",{className:"sv-html-portlet sv-portlet"},l.createElement("h2",null,"Kursens status"),l.createElement("hr",null),t.createdBy&&t.createdDate&&l.createElement("p",null,"Kursen skapades ",Object(O.c)(t.createdDate)," av ",l.createElement("strong",null,t.createdBy.name),"."),t.modifiedBy&&t.modifiedDate&&l.createElement("p",null,"Kursen redigerades senast ",Object(O.c)(t.modifiedDate)," av ",l.createElement("strong",null,t.modifiedBy.name),"."),t.active?l.createElement("p",null,"Kursen är ",l.createElement("strong",null,"AKTIV")," sedan ",Object(O.c)(t.activatedDate)," av ",l.createElement("strong",null,t.activatedBy.name),"."):l.createElement("p",null,"Kursen är ",l.createElement("strong",null,"INAKTIV"),t.inactivatedBy?l.createElement("span",null,"sedan ",Object(O.c)(t.inactivatedDate)," av ",l.createElement("strong",null,t.inactivatedBy.name),"."):l.createElement("span",null,".")),0===r.length?l.createElement("p",{className:"markedGreen"},"Modulernas kunskapskrav täcker skolverkets krav för denna kurs"):l.createElement("div",{className:"markedRed warning-box"},l.createElement("div",{className:"warningFlag"},l.createElement("i",{className:"fas fa-exclamation-triangle","aria-hidden":"true"})),l.createElement("p",null,"Modulernas kunskapskrav täcker inte skolverkets krav för denna kurs.")),c.map((function(e){return l.createElement("div",{key:e,className:"markedRed warning-box"},l.createElement("div",{className:"warningFlag"},l.createElement("i",{className:"fas fa-exclamation-triangle","aria-hidden":"true"})),l.createElement("p",null,e))})),l.createElement("br",null),l.createElement("div",{className:"btn btn-large",onClick:function(){return n.confirmSaveAndSync()}},"Spara"),t.active?l.createElement("div",{className:"btn btn-info btn-large",onClick:function(){return n.inactivateAndSave()}},"Inaktivera och spara"):l.createElement("div",{className:"btn btn-info btn-large",onClick:function(){return n.activateAndSave()}},"Aktivera och spara")),l.createElement("br",null),l.createElement("div",{className:"sv-html-portlet sv-portlet"},v&&!t.isTemplate&&(a?l.createElement("div",{className:"btn btn-warning btn-large pull-right",onClick:function(){confirm(Object(i.a)(Qe||(Qe=Object(s.e)(['Bekräfta borttagning av kursen "'," - ",'" för skolan ',"\n\nKursen kommar att raderas helt!\n\nÄr du säker?"],['Bekräfta borttagning av kursen "'," - ",'" för skolan ',"\\n\\nKursen kommar att raderas helt!\\n\\nÄr du säker?"])),t.name,t.description,t.school))&&n.deleteCourse().catch(i.n)}},"Ta bort kurs"):l.createElement("div",{className:"btn btn-warning btn-large pull-right",onClick:function(){return history.go(-1)}},"Avbryt")),a&&t.googleCreateClassrooms&&f&&l.createElement("div",{className:"btn btn-primary btn-large pull-right",onClick:function(){return n.syncWithClassroomAndSave()}},n.syncInProgress()?l.createElement(L.a,null):t.inSyncWithClassroom?l.createElement("span",null,l.createElement("i",{className:"fas fa-check","aria-hidden":"true"})):l.createElement("span",null,l.createElement("i",{className:"fas fa-code-branch"}))," Synk med Classroom")))),l.createElement("div",{className:"sv-layout sv-column-5"},l.createElement(Pe,null)))},t}(l.Component),Ut=a(144),It=function(e){function t(){return e.call(this,{scopes:["https://www.googleapis.com/auth/script.external_request"]})||this}return Object(s.c)(t,e),t.prototype.callSync=function(e,t){return Object(s.b)(this,void 0,void 0,(function(){var a,n;return Object(s.d)(this,(function(r){switch(r.label){case 0:return[4,this.ensureInited()];case 1:return r.sent(),(a=t?{function:e,parameters:t}:{function:e}).devMode=!1,[4,v.b.bearerProvider.getBearer()];case 2:return n=r.sent(),a.parameters.push(n.token),[4,fetch("https://script.googleapis.com/v1/scripts/M1H0BlTkv983PNVTJjDXjNqXLxmQiBgGz:run?alt=json",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+this.authToken},body:JSON.stringify(a)}).then((function(e){return e.json()}))];case 3:return[2,r.sent()]}}))}))},t.prototype.initSync=function(e,t,a){return Object(s.b)(this,void 0,void 0,(function(){var a,n,r,l,o,i,c,u,d,m,p,h,f;return Object(s.d)(this,(function(b){switch(b.label){case 0:return[4,v.b.kedBackendClient.http.get("schools",{cacheBust:"static",name:e.school}).then((function(e){return e.json()}))];case 1:if(a=b.sent(),n=a[0].edsSchoolNameGymn,r={},!e.studyGroups)return[3,9];b.label=2;case 2:b.trys.push([2,7,8,9]),l=Object(s.j)(e.studyGroups),o=l.next(),b.label=3;case 3:return o.done?[3,6]:(i=o.value,[4,v.b.edsClient.getTuitionGroupStudents({schoolName:n,tuitionGroupName:i})]);case 4:c=b.sent(),r[i]=c.map((function(e){return e.studentEmailAddress})),b.label=5;case 5:return o=l.next(),[3,3];case 6:return[3,9];case 7:return u=b.sent(),h={error:u},[3,9];case 8:try{o&&!o.done&&(f=l.return)&&f.call(l)}finally{if(h)throw h.error}return[7];case 9:return d=this.diffCourse(e,t),m=d.subset,p=d.changes,[2,this.updateClassroom({course:m,changes:p,studyGroupStudents:r})]}}))}))},t.prototype.archive=function(e){return Object(s.b)(this,void 0,void 0,(function(){return Object(s.d)(this,(function(t){return console.log("archiving"),[2,this.callSync("archive",[e])]}))}))},t.prototype.delete=function(e){return Object(s.b)(this,void 0,void 0,(function(){return Object(s.d)(this,(function(t){return console.log("deleteing"),[2,this.callSync("deleteClassrooms",[e])]}))}))},t.prototype.diffCourse=function(e,t){var a,n=function(e,t){var a=[];return t.filter((function(e){return e.inactive})).map((function(e){a=a.concat(e.taskIds)})),e.filter((function(e){return!0===e.assignment&&!a.includes(e.id)})).map((function(e){return{assignment:e.assignment,deadline:e.deadline,id:e.id,name:e.name,resources:e.resources,templateFile:e.templateFile,sendToUrkund:e.sendToUrkund}}))},r={id:(a=e).id,school:a.school,code:a.code,name:a.name,description:a.description,tasks:a.tasks,responsibleTeachers:a.responsibleTeachers,studyGroups:a.studyGroups};return r.tasks=n(r.tasks,e.modules),{subset:r,changes:!!t&&{tasks:n(t.tasks,t.modules),responsibleTeachers:t.responsibleTeachers,studyGroups:t.studyGroups}}},t.prototype.updateClassroom=function(e){var t=e.course,a=e.changes,n=e.studyGroupStudents;return Object(s.b)(this,void 0,void 0,(function(){return Object(s.d)(this,(function(e){return[2,this.callSync("updateClassrooms",[t,a,n])]}))}))},t}(a(191).a),Dt="production"===Ae.b.ENVIRONMENT?i.n:null,zt=Object(i.a)(Xe||(Xe=Object(s.e)(["Du har osparat data. Välj avbryt och tryck CTRL+S om du vill spara först."],["Du har osparat data. Välj avbryt och tryck CTRL+S om du vill spara först."]))),Rt={origCourse:null,origTemplate:null,course:null,dialogContainers:[],hasUnsavedData:!1,view:"courseBuilder",classroomSyncInProgress:!1},xt=function(e){function t(t){var a=e.call(this,t)||this;return a.state=Object(s.a)({},Rt),a.update=a.update.bind(a),a.refDialog=a.refDialog.bind(a),a.contentYPos=0,a.onKeyDown=a.onKeyDown.bind(a),a.beforeUnload=a.beforeUnload.bind(a),a.onClickPreventUnload=a.onClickPreventUnload.bind(a),a.isSaving=!1,a.dialogs=[],t.view&&(a.state=Object(s.a)(Object(s.a)({},a.state),{view:t.view})),a}return Object(s.c)(t,e),t.prototype.setStatePromised=function(e){return this._setState(Object(s.a)({hasUnsavedData:!0},e))},t.prototype.setNonSaveableDataState=function(e){return this._setState(e)},t.prototype._setState=function(t){var a=this;if(t.course){var n=t.course,r=n.tasks,l=n.modules,o={};l.forEach((function(e){return e.taskIds.forEach((function(e){return o[e]=!0}))}));var i=r.filter((function(e){return o[e.id]})),c=Object(s.a)({},t.course);c.tasks=i,t=Object(s.a)(Object(s.a)({},t),{course:c})}var u=t.allCourses||this.state.allCourses,d=t.course||this.state.course;if(u){var m=u.findIndex((function(e){return e.id===a.props.id}));u=z()(u,{$splice:[[m,1,d]]}),(t=Object(s.a)({},t)).allCourses=u}return new Promise((function(n){return e.prototype.setState.call(a,(function(){return t}),n)}))},t.prototype.componentWillMount=function(){this.load().catch(Dt),window.addEventListener("keydown",this.onKeyDown),window.addEventListener("beforeunload",this.beforeUnload),document.body.addEventListener("click",this.onClickPreventUnload)},t.prototype.componentWillUnmount=function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("beforeunload",this.beforeUnload),document.body.removeEventListener("click",this.onClickPreventUnload),Object(O.j)("")},t.prototype.componentWillReceiveProps=function(e){this.state&&this.state.course&&(e.id===this.props.id&&e.templateId===this.props.templateId||this.setStatePromised(Rt)),e.view!==this.props.view&&this.setNonSaveableDataState({view:e.view})},t.prototype.componentDidUpdate=function(e,t){if(this.contentDiv){var a=Object(E.findDOMNode)(this.contentDiv);a&&(this.contentYPos=a.getBoundingClientRect().top)}t&&t.course&&(this.props.id===e.id&&this.props.templateId===e.templateId||this.load().catch(Dt)),!t.hasUnsavedData&&this.state.hasUnsavedData&&Object(O.j)("unsaved")},t.prototype.loadFromTemplate=function(e){return Object(s.b)(this,void 0,void 0,(function(){var t,a,n;return Object(s.d)(this,(function(r){switch(r.label){case 0:return Object(i.o)("Laddar data från mall..."),[4,Object(O.f)(e,{includeTemplateChain:!0})];case 1:return t=r.sent(),(a=Object(O.k)(Date.now(),t,v.a.currentUser)).id=Object(C.i)(),a.parentId=e,a.active=!1,a.isTemplate=!1,a.templateChain=Object(s.h)(a.templateChain),a.templateChain.push({id:e,$meta:"ref"}),n=v.a.currentUser.school,a.school=n,a.description="",a.responsibleTeachers=[{name:v.a.currentUser.displayName,email:v.a.currentUser.mail,access:"full",url:v.a.currentUser.mail}],delete a.studyGroups,a.acl=["role:USER:R","schoolRole:"+n+"/EMPLOYEE:S"],delete a.$etag,delete a.createdBy,delete a.createdDate,delete a.modifiedBy,delete a.modifiedDate,delete a.activatedBy,delete a.activatedDate,delete a.googleClassRoomCode,delete a.googleClassRoomURL,delete a.googleCreateClassrooms,[4,this.setStatePromised({course:a,origCourse:null,origTemplate:t})];case 2:return r.sent(),Object(i.o)(""),[2]}}))}))},t.prototype.loadCustomParams=function(e){var t=e.name,a=e.code,n=e.points,r=Date.now(),s=v.a.currentUser.school,l=v.a.currentUser,o={id:Object(C.i)(),name:t,code:a,points:n,dateTime:r,createdDate:r,createdBy:{name:l.displayName,url:"mailto:"+l.mail},subjectId:"custom",subjectCode:"custom",active:!1,isTemplate:!1,templateChain:[],school:s,description:"",responsibleTeachers:[{name:l.displayName,email:l.mail,access:"full",url:l.mail}],acl:["role:USER:R","schoolRole:"+s+"/EMPLOYEE:S"],resources:[],modules:[],knowledgeRequirementsOrder:[],centralContentOrder:[],abilitiesOrder:[],images:[],knowledgeRequirements:[],centralContent:[],abilities:[],tasks:[],schoolType:"gymnasium",tags:["sub:CUSTOM","course:"+a,"schoolType:gymnasium"]};this.setState({course:o,origCourse:o,origTemplate:null})},t.prototype.load=function(){return Object(s.b)(this,void 0,void 0,(function(){return Object(s.d)(this,(function(e){switch(e.label){case 0:return Object(O.j)(""),this.props.id?[4,this.loadExistingCourse(this.props.id)]:[3,2];case 1:return e.sent(),[3,5];case 2:return this.props.templateId?[4,this.loadFromTemplate(this.props.templateId)]:[3,4];case 3:return e.sent(),[3,5];case 4:if(!this.props.customParams)throw new Error(Object(i.a)(Ze||(Ze=Object(s.e)(["Ogiltig parameter. customParams, id eller templateId måste anges"],["Ogiltig parameter. customParams, id eller templateId måste anges"]))));this.loadCustomParams(this.props.customParams),e.label=5;case 5:return[2]}}))}))},t.prototype.loadExistingCourse=function(e){return Object(s.b)(this,void 0,void 0,(function(){var t;return Object(s.d)(this,(function(a){switch(a.label){case 0:return Object(i.o)("Laddar kurs"),[4,Object(O.f)(e)];case 1:return(t=a.sent()).responsibleTeachers||(t.responsibleTeachers=[{name:v.a.currentUser.displayName,email:v.a.currentUser.mail,access:"full",url:v.a.currentUser.mail}]),[4,this.setNonSaveableDataState({course:t,origCourse:t})];case 2:return a.sent(),Object(i.o)(""),[2]}}))}))},t.prototype.update=function(e){return Object(s.b)(this,void 0,void 0,(function(){return Object(s.d)(this,(function(t){switch(t.label){case 0:return[4,this.setStatePromised({course:z()(this.state.course,e)})];case 1:return t.sent(),Ut.b.studyGroups&&this._checkClassroomChanges(),[2]}}))}))},t.prototype.deleteCourse=function(){return Object(s.b)(this,void 0,void 0,(function(){var e,t,a,n,r,l,o,c;return Object(s.d)(this,(function(u){switch(u.label){case 0:return Object(i.o)("Raderar kursen..."),e=this.state.course.school,this.state.course.parentId,t=this.props.id,(new It).delete({responsibleTeachers:this.state.course.responsibleTeachers,id:t}),[4,v.a.kedBackendClient.list("courses",{hasEdgesTo:[this.props.id]})];case 1:a=u.sent(),n=new C.a;try{for(r=Object(s.j)(a),l=r.next();!l.done;l=r.next())l.value}catch(e){o={error:e}}finally{try{l&&!l.done&&(c=r.return)&&c.call(r)}finally{if(o)throw o.error}}return n.delete("courses",t),[4,v.a.kedBackendClient.batch(n.mutationRequests)];case 2:return u.sent(),e===v.a.currentUser.school&&xe.delete(t),Object(i.o)(""),location.hash="#/courses/new",[2]}}))}))},t.prototype.confirmSaveAndSync=function(){return Object(s.b)(this,void 0,void 0,(function(){var e,t,a,n;return Object(s.d)(this,(function(r){switch(r.label){case 0:return e=this.state,t=e.course,a=e.origCourse,n=!1,a&&t.googleCreateClassrooms&&!t.inSyncWithClassroom&&Ut.b.studyGroups&&(n=confirm(Object(i.a)(et||(et=Object(s.e)(["Synkronisera kurs kurs med Classroom?"],["Synkronisera kurs kurs med Classroom?"]))))),[4,n];case 1:return r.sent()?this.syncWithClassroomAndSave():this.save(),[2]}}))}))},t.prototype.save=function(){return Object(s.b)(this,void 0,void 0,(function(){var e,t,a,n,r,l,o,c,u;return Object(s.d)(this,(function(d){switch(d.label){case 0:if(e=this.state,t=e.course,a=e.origCourse,!(Ut.b.studyGroups&&a&&a.googleCreateClassrooms)||t.googleCreateClassrooms)return[3,4];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,(new It).archive(t)];case 2:return d.sent().done||Object(i.n)(Object(i.a)(tt||(tt=Object(s.e)(["Classroom course could not be archived"],["Classroom course could not be archived"])))),[3,4];case 3:return d.sent(),[3,4];case 4:if(n=Ut.b.teacherRights,r=this.state.origCourse?Object(Be.c)(this.state.origCourse):[],l=Object(Be.c)(this.state.course),o=Object(yt.a)(),n&&!o.roles.includes("ADMIN")&&!Object(s.h)(r,l).some((function(e){var t=e.email,a=e.url,n=e.access;return(t||a)===o.mail&&(!n||"edit"===n||"full"===n)})))return Object(i.n)(Object(i.a)(at||(at=Object(s.e)(["Kursen kunde inte sparas. Lägg till dig själv i listan på ansvariga lärare"],["Kursen kunde inte sparas. Lägg till dig själv i listan på ansvariga lärare"])))),[2];if(this.isSaving)return[2];d.label=5;case 5:return d.trys.push([5,7,8,9]),this.isSaving=!0,[4,this._save()];case 6:return d.sent(),[3,9];case 7:return c=d.sent(),u=c&&c.message?c.message:Object(i.a)(nt||(nt=Object(s.e)(["Ett okänt fel har inträffat..."],["Ett okänt fel har inträffat..."]))),c&&("http409"===c.name||"http412"===c.name||"http404"===c.name?u=Object(i.a)(rt||(rt=Object(s.e)(["Kursen har redigerad av annan användare. Ladda om sidan och gör om ändrinarna."],["Kursen har redigerad av annan användare. Ladda om sidan och gör om ändrinarna."]))):"http403"===c.name&&(this.state.course.isTemplate?u=Object(i.a)(st||(st=Object(s.e)(["Ingen behörighet att spara kursmallen. Endast administratörer kan redigera kursmallar."],["Ingen behörighet att spara kursmallen. Endast administratörer kan redigera kursmallar."]))):this.state.course.school&&(u=Object(i.a)(lt||(lt=Object(s.e)(["Ingen behörighet att spara kursen ",". Kursen kan bara redigeras av anställda på ",""],["Ingen behörighet att spara kursen ",". Kursen kan bara redigeras av anställda på ",""])),this.state.course.name,this.state.course.school)))),Object(i.n)(u),Object(O.j)("error"),[3,9];case 8:return this.isSaving=!1,[7];case 9:return[2]}}))}))},t.prototype.syncInProgress=function(){return this.state.classroomSyncInProgress},t.prototype.syncWithClassroomAndSave=function(){return Object(s.b)(this,void 0,void 0,(function(){var e,t,a,n,r;return Object(s.d)(this,(function(l){switch(l.label){case 0:return e=this.state,t=e.course,a=e.origCourse,[4,this.save()];case 1:if(l.sent(),this.state.hasUnsavedData)return Object(i.n)(Object(i.a)(ot||(ot=Object(s.e)(["Synkronisering med Classroom skulle inte ske"],["Synkronisering med Classroom skulle inte ske"])))),[2];l.label=2;case 2:return l.trys.push([2,7,,8]),this.setState({classroomSyncInProgress:!0}),n=new It,t.googleCreateClassrooms?(r=null==t.inSyncWithClassroom,[4,n.initSync(t,a,r)]):[3,6];case 3:return l.sent().done?(this.update({inSyncWithClassroom:{$set:!0}}),this.setState({classroomSyncInProgress:!1}),[4,this._save(!0)]):[3,5];case 4:return l.sent(),Object(i.o)(Object(i.a)(it||(it=Object(s.e)(["Synkronisering med framgång"],["Synkronisering med framgång"])))),[3,6];case 5:Object(i.n)(Object(i.a)(ct||(ct=Object(s.e)(["Fel vid synkronisering med Classroom"],["Fel vid synkronisering med Classroom"])))),this.setState({classroomSyncInProgress:!1}),l.label=6;case 6:return[3,8];case 7:return l.sent(),[3,8];case 8:return[2]}}))}))},t.prototype._save=function(e){return void 0===e&&(e=!1),Object(s.b)(this,void 0,void 0,(function(){var t,a,n,r,l,o,c,u,d,m,p,h,f;return Object(s.d)(this,(function(b){switch(b.label){case 0:return t=this.state,a=t.course,n=t.origCourse,r=t.origTemplate,l=0===Object(Be.e)(a).length,!e&&Object(i.o)(Object(i.a)(ut||(ut=Object(s.e)(["Sparar..."],["Sparar..."])))),o=Object(O.n)(Date.now(),a,v.a.currentUser),c=new C.a,u=n||r,d=o.tasks.map((function(e){if("add"===e.$meta||"update"===e.$meta){var t=u.tasks.find((function(t){return t.id===e.id}));return Object(O.l)(t||{},e,"tasks",{knowledgeRequirements:"knowledge-requirements",centralContent:"central-content",abilities:"abilities"},c)}var a=Object(s.a)({},e);return delete a.$meta,a})),o=z()(o,{tasks:{$set:d}}),o=Object(O.l)(n||{},o,"courses",{templateChain:"courses",centralContent:"central-content",knowledgeRequirements:"knowledge-requirements",abilities:"abilities",images:"images",tasks:"tasks"},c),(o=Object(s.a)({},o)).publishable=l,m=(o.tags||[]).filter((function(e){return"incomplete"!==e})),o.tags=o.publishable?m:m.concat("incomplete"),(p=n&&!this.props.customParams)?[3,3]:(c.add("courses",o),a.school?[4,xe.getSchoolId()]:[3,2]);case 1:h=b.sent(),c.link("schools",h,"courses",a.id,"courses"),a.active&&c.link("schools",h,"courses",a.id,"activeCourses"),b.label=2;case 2:return[3,7];case 3:return c.put("courses",o),n.active||!a.active?[3,5]:[4,xe.getSchoolId()];case 4:return h=b.sent(),c.link("schools",h,"courses",a.id,"activeCourses"),[3,7];case 5:return!n.active||a.active?[3,7]:[4,xe.getSchoolId()];case 6:h=b.sent(),c.unlink("schools",h,"courses",a.id,"activeCourses"),b.label=7;case 7:return"custom"!==o.subjectCode?[3,9]:[4,v.a.kedBackendClient.list("courses",{tags:["course:"+o.code]})];case 8:if(b.sent().filter((function(e){return e.id!==o.id})).filter((function(e){return"custom"!==e.subjectCode})).length>0)throw new Error(Object(i.a)(dt||(dt=Object(s.e)(["Kursens kurskod får inte vara samma som kurskoder från skolverket: ",""],["Kursens kurskod får inte vara samma som kurskoder från skolverket: ",""])),o.code));b.label=9;case 9:return[4,v.a.kedBackendClient.batch(c.mutationRequests)];case 10:return f=b.sent(),!e&&Object(i.o)(p?Object(i.a)(mt||(mt=Object(s.e)(["Ändringarna har sparats"],["Ändringarna har sparats"]))):Object(i.a)(pt||(pt=Object(s.e)(["Kursen har skapats"],["Kursen har skapats"])))),f&&f.newEtags&&(o=Object(O.b)(o,f.newEtags,["images","tasks"])),a.school===v.a.currentUser.school&&(p?xe.update(o):xe.insert(o)),[4,this.setNonSaveableDataState({course:o,origCourse:o,hasUnsavedData:!1})];case 11:return b.sent(),Object(O.j)(""),p||(location.hash="#/courses/"+o.id+"/edit"),[2]}}))}))},t.prototype._checkClassroomChanges=function(){var e=this.state,t=e.course,a=e.origCourse,n=t.tasks.filter((function(e){return e.assignment}));if(!a)return t.inSyncWithClassroom=!1,void this.setStatePromised({course:t});var r=a.tasks.filter((function(e){return e.assignment})),s=Object(O.e)(a.responsibleTeachers,t.responsibleTeachers),l=n.filter((function(e){return!r.find((function(t){return t.id==e.id}))})).length>0||r.filter((function(e){return!n.find((function(t){return t.id==e.id}))})).length>0;l||(l=n.some((function(e){return null!=r.find((function(t){return t.id===e.id&&t.name!==e.name}))})));var o=Object(O.e)(a.studyGroups,t.studyGroups),i=t.inSyncWithClassroom;t.inSyncWithClassroom=!(s||l||o),i!=t.inSyncWithClassroom&&this.setStatePromised({course:t})},t.prototype.activateAndSave=function(){var e=this,t=Object(s.a)({},this.state.course);t.active||(t.active=!0,t.activatedBy={name:v.a.currentUser.displayName,url:"mailto:"+v.a.currentUser.mail},t.activatedDate=Date.now(),this.setStatePromised({course:t}).then((function(){return e.save()})).catch(Dt))},t.prototype.inactivateAndSave=function(){var e=this,t=Object(s.a)({},this.state.course);t.active&&(t.active=!1,t.inactivatedBy={name:v.a.currentUser.displayName,url:"mailto:"+v.a.currentUser.mail},t.inactivatedDate=Date.now(),this.setStatePromised({course:t}).then((function(){return e.save()})).catch(Dt))},t.prototype.openDialog=function(e){this.setNonSaveableDataState({dialogContainers:this.state.dialogContainers.concat(e)})},t.prototype.closeDialog=function(){var e=this.state.dialogContainers,t=e.length;for(t&&this.setNonSaveableDataState({dialogContainers:e.slice(0,t-1)});this.dialogs.length>=t;)this.dialogs.pop()},t.prototype.refDialog=function(e,t){this.dialogs[t]=e},t.prototype.onKeyDown=function(e){if(83===e.which&&(e.ctrlKey||e.metaKey)){if(e.preventDefault(),this.state.dialogContainers.length>0)return void this.saveDialog();this.save()}else if(27===e.which&&this.state.dialogContainers.length>0)this.closeDialog(),e.preventDefault();else if(13===e.which){var t=e.target;this.state.dialogContainers.length>0&&"TEXTAREA"!==t.tagName&&"INPUT"!==t.tagName&&"SELECT"!==t.tagName&&"OPTION"!==t.tagName&&!t.contentEditable&&this.saveDialog()}},t.prototype.beforeUnload=function(e){if((this.state.dialogContainers.length>0||this.state.hasUnsavedData)&&!v.a.kedBackendClient.http.bearerProvider.wantsRedirect)return e.returnValue=zt,e.returnValue},t.prototype.onClickPreventUnload=function(e){if(e.target&&"a"===(""+e.target.tagName).toLowerCase()){var t=e.target;if(t.href&&"#"!==t.getAttribute("href")&&!t.target&&(this.state.dialogContainers.length>0||this.state.hasUnsavedData)&&!confirm(zt))return e.preventDefault(),e.stopPropagation(),!1}},t.prototype.saveDialog=function(){if(this.state.dialogContainers.length>0){var e=this.dialogs[this.state.dialogContainers.length-1];e&&e.save()}},t.prototype.render=function(){var e=this,t=(v.a.currentUser.roles.indexOf("ADMIN"),this.state.course);return this.state.course?l.createElement("div",{style:{outline:0}},l.createElement(b.a,{title:t.name+" - "+t.points+"p",activePage:this.state.view,routes:{studentPage:Object(R.f)(this.props.viewCourseUrl,{courseId:this.props.id}),feedback:this.props.feedbackUrl},host:this,course:t,origCourse:this.state.origCourse,backgroundImage:t.images.filter((function(e){return e.id===t.imageId})).map((function(e){return e.url}))[0],isTemplate:t.isTemplate}),l.createElement("div",{className:"sv-row sv-layout"},l.createElement("div",{className:"sv-layout sv-skip-spacer sv-column-12"},l.createElement("div",{className:"sv-spacer-20pxvt sv-vertical sv-layout sv-skip-spacer"},l.createElement("div",{className:"pagecontent sv-layout sv-spacer-20pxvt sv-skip-spacer",ref:function(t){return e.contentDiv=t}},l.createElement(St,{course:this.state.course,origCourse:this.state.origCourse,host:this}),l.createElement("br",null),this.state.dialogContainers.map((function(t,a){var n=t.Component,r=t.props;return l.createElement("div",{key:a},l.createElement("div",{className:"darken"}),l.createElement("div",{className:"modal-page-wrap"},l.createElement("div",{className:"modal-page"},l.createElement(n,Object(s.a)({ref:function(t){return e.refDialog(t,a)}},r)),l.createElement(Se.a,{onClick:function(){return e.closeDialog()}}))))}))))))):l.createElement("div",{style:{outline:0}},l.createElement(b.a,{title:"",activePage:this.state.view,routes:{feedback:this.props.feedbackUrl}}),l.createElement("p",null,l.createElement(L.b,null),"V.g. vänta medan kursen laddas..."))},t}(l.Component),Mt=function(e){function t(t){var a=e.call(this,t)||this;return a.state={courseOptions:null,selectedTemplateId:"--",courses:null,selectedCourseId:""},a}return Object(s.c)(t,e),t.prototype.componentDidMount=function(){this.load().catch(i.n)},t.prototype.load=function(){return Object(s.b)(this,void 0,void 0,(function(){var e,t,a;return Object(s.d)(this,(function(n){switch(n.label){case 0:return Object(i.o)("Laddar kurser"),[4,v.a.kedBackendClient.list("subjects",{tags:["schoolType:gymnasium"],include:"courseTemplates"})];case 1:return e=n.sent(),t=Object(i.k)(e.map((function(e){return e.courseTemplates}))).sort(Object(i.h)(["name","dateTime"])),t=Object(i.j)(t,(function(e){return e.name})),a=Object(s.h)([{id:"--",name:"--"}],t,[{id:"---",name:"---"},{id:"custom",name:Object(i.a)(ht||(ht=Object(s.e)(["Egen kurs"],["Egen kurs"])))}]),Object(i.o)(""),this.setState({courseOptions:a}),[2]}}))}))},t.prototype.onSelectCourse=function(e){return Object(s.b)(this,void 0,void 0,(function(){var t,a,n,r,l;return Object(s.d)(this,(function(o){switch(o.label){case 0:return"custom"===e&&this.setState({selectedTemplateId:e}),[4,v.a.kedBackendClient.list("courses",{hasEdgesTo:[e]})];case 1:return t=o.sent(),a=t.filter((function(e){return e.active})).map((function(e){var t=e.id,a=e.school,n=e.description,r=e.createdBy,s=e.modifiedBy;n&&(n=Object(i.l)(n,80));var l=n||(r?r.name+"s version":s&&s.name+"s version");return{id:t,name:"standard"===a?n?"Standard - "+n:"Standard":a+" - "+Object(i.l)(l,90),school:a}})).sort(Object(i.g)("name")),n=a.filter((function(e){return"standard"===e.school})),r=a.filter((function(e){return"standard"!==e.school})),l=Object(s.h)(n,[{id:e,name:"Tom"}],r),this.setState({courses:l,selectedTemplateId:e,selectedCourseId:l[0].id}),[2]}}))}))},t.prototype.render=function(){var e=this,t=this.state,a=t.courseOptions,n=t.selectedTemplateId,r=t.courses,o=t.selectedCourseId,c=t.customCourseName,u=t.customCoursePoints,d=c&&(this.state.customCourseCode||"CUST-"+c.substr(0,5).toUpperCase());return l.createElement("div",{style:{outline:0}},l.createElement(b.a,{title:Object(i.a)(vt||(vt=Object(s.e)(["Kursbyggaren"],["Kursbyggaren"]))),activePage:"courseBuilder",routes:{feedback:this.props.feedbackUrl}}),l.createElement("div",{className:"sv-row sv-layout"},l.createElement("div",{className:"sv-layout sv-skip-spacer sv-column-12"},l.createElement("div",{className:"sv-spacer-20pxvt sv-vertical sv-layout sv-skip-spacer"},l.createElement("div",{className:"pagecontent sv-layout sv-spacer-20pxvt sv-skip-spacer"},l.createElement("div",{className:"sv-row sv-layout sv-skip-spacer"},l.createElement("div",{className:"sv-layout sv-skip-spacer sv-column-7"},l.createElement("div",{className:"sv-html-portlet sv-portlet sv-skip-spacer"},l.createElement("h2",null,"Skapa ny kurs"),l.createElement("hr",null),l.createElement("div",{className:"align-horizontal spaced"},l.createElement("div",{className:"horizontalItem top"},l.createElement("p",null,"Välj gymnasiekurs :"))),l.createElement("div",{className:"align-horizontal spaced"},l.createElement("div",{className:"horizontalItem top"},a?l.createElement("select",{value:n,onChange:function(t){return e.onSelectCourse(t.target.value).catch(i.n)}},a.map((function(e){return l.createElement("option",{key:e.id,value:e.id},e.name)}))):l.createElement("div",null,l.createElement(L.b,null),l.createElement("select",{disabled:!0,value:""},l.createElement("option",null,"--"))))),"custom"===n?l.createElement(l.Fragment,null,l.createElement(Tt.a,null,l.createElement(wt.a,null,l.createElement(Nt.a,{id:"customCourseName",autoFocus:!0,label:Object(i.a)(ft||(ft=Object(s.e)(["Kursens namn"],["Kursens namn"]))),value:c||"",onChange:function(t){return e.setState({customCourseName:t})}})),l.createElement(wt.a,null,l.createElement(Nt.a,{id:"customCourseCode",label:Object(i.a)(bt||(bt=Object(s.e)(["Kurskod"],["Kurskod"]))),size:12,value:d||"",onChange:function(t){return e.setState({customCourseCode:t})}}))),l.createElement(Nt.a,{id:"customCoursePoints",label:Object(i.a)(gt||(gt=Object(s.e)(["Poäng"],["Poäng"]))),size:3,value:""+(u||""),onChange:function(t){var a=t?parseInt(t):0;!isNaN(a)&&a<1e3&&e.setState({customCoursePoints:a})}}),l.createElement("br",null),l.createElement("br",null),l.createElement(Me.a,{className:"btn btn-large",to:"/courses/create-custom/"+encodeURIComponent(JSON.stringify({name:c,code:d,points:u}))},"Skapa")):r&&l.createElement(l.Fragment,null,l.createElement("div",{className:"align-horizontal spaced"},l.createElement("div",{className:"horizontalItem top"},l.createElement("p",null,"Utgå från version: "))),l.createElement("div",{className:"align-horizontal spaced"},l.createElement("div",{className:"horizontalItem top"},l.createElement("select",{value:o,onChange:function(t){return e.setState({selectedCourseId:t.target.value})}},r.map((function(e){return l.createElement("option",{key:e.id,value:e.id},e.name)}))))),l.createElement("br",null),l.createElement("br",null),o&&l.createElement(Me.a,{to:"/courses/create-from-template/"+this.state.selectedCourseId,className:"btn btn-large"},"Skapa")))),l.createElement("div",{className:"sv-layout sv-column-5"},l.createElement(Pe,null))))))))},t}(l.Component),Pt=a(199);a.d(t,"CourseBuilder",(function(){return Lt})),Object(Pt.a)();var Bt,Lt=function(e){function t(t){return e.call(this,t)||this}return Object(s.c)(t,e),t.prototype.render=function(){var e=this,t=v.a.currentUser.roles.some((function(e){return"ADMIN"===e||"EMPLOYEE"===e})),a=v.a.currentUser.roles.some((function(e){return"ADMIN"===e}));return l.createElement("div",{className:"course-builder"},l.createElement(c.a,null,t?l.createElement("div",null,l.createElement(u.a,{exact:!0,path:"/",render:function(t){t.match;return a?l.createElement(m.a,{viewCourseUrl:e.props.viewCourseUrl,feedbackUrl:e.props.feedbackUrl}):l.createElement(Mt,{feedbackUrl:e.props.feedbackUrl})}}),l.createElement(u.a,{exact:!0,path:"/schools",render:function(t){t.match;return l.createElement(m.a,{viewCourseUrl:e.props.viewCourseUrl,feedbackUrl:e.props.feedbackUrl})}}),l.createElement(u.a,{exact:!0,path:"/schools/new/gymnasium",render:function(){return l.createElement(h,{type:"gymnasium",feedbackUrl:e.props.feedbackUrl})}}),l.createElement(u.a,{exact:!0,path:"/schools/new/primary",render:function(){return l.createElement(h,{type:"primary",feedbackUrl:e.props.feedbackUrl})}}),l.createElement(u.a,{exact:!0,path:"/schools/:id/edit",render:function(t){var a=t.match;return l.createElement(p.a,{id:a.params.id,title:Object(i.a)(Bt||(Bt=Object(s.e)(["Editera skola"],["Editera skola"]))),feedbackUrl:e.props.feedbackUrl})}}),l.createElement(u.a,{exact:!0,path:"/subjects",render:function(){return l.createElement(k,{feedbackUrl:e.props.feedbackUrl})}}),l.createElement(u.a,{path:"/subjects/:id",render:function(t){var a=t.match;return l.createElement(f.a,{id:a.params.id,feedbackUrl:e.props.feedbackUrl})}}),l.createElement(u.a,{exact:!0,path:"/courses/new",render:function(){return l.createElement(Mt,{feedbackUrl:e.props.feedbackUrl})}}),l.createElement(u.a,{path:"/courses/create-from-template/:templateId",render:function(t){var a=t.match;return l.createElement(xt,{templateId:a.params.templateId,view:"courseBuilder",viewCourseUrl:e.props.viewCourseUrl,feedbackUrl:e.props.feedbackUrl})}}),l.createElement(u.a,{path:"/courses/create-custom/:customParams",render:function(t){var a=t.match;return l.createElement(xt,{customParams:JSON.parse(decodeURIComponent(a.params.customParams)),view:"courseBuilder",viewCourseUrl:e.props.viewCourseUrl,feedbackUrl:e.props.feedbackUrl})}}),l.createElement(u.a,{path:"/courses/:id/edit",render:function(t){var a=t.match;return l.createElement(xt,{id:a.params.id,view:"courseBuilder",viewCourseUrl:e.props.viewCourseUrl,feedbackUrl:e.props.feedbackUrl})}})):l.createElement("div",null,l.createElement(u.a,{path:"/",render:function(){return l.createElement("div",null,l.createElement(b.a,{title:"Kursbyggaren",activePage:"courseBuilder",routes:{feedback:e.props.feedbackUrl}}),l.createElement("h2",null,"Behörighet saknas"),l.createElement("p",null,"Detta verktyg är endast till för anställda på Kunskapsskolan."),l.createElement("h3",null,"Användarattribut"),l.createElement("table",{className:"ked_boxed",style:{border:"1px solid #eee"}},l.createElement("thead",null,l.createElement("tr",null,l.createElement("th",null,"Attribut"),l.createElement("th",null,"Värde"))),l.createElement("tbody",null,Object.keys(v.a.currentUser).map((function(e){return l.createElement("tr",{key:e},l.createElement("td",null,e),l.createElement("td",null,v.a.currentUser[e]))})))))}}))),l.createElement(d.a,null))},t}(l.Component)}}]);
//# sourceMappingURL=CourseBuilder.min.js.map