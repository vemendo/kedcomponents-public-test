{"version":3,"file":"LearningTasks.js","sources":["webpack://[name]/./src/apis/ked-learninggoals.ts","webpack://[name]/./src/components/learning-tasks/index.tsx"],"sourcesContent":["import { __awaiter, __generator } from \"tslib\";\nexport function getLearningGoalsAndTasks(apiPath, pageId) {\n    return __awaiter(this, void 0, void 0, function () {\n        var res, data;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, fetch(apiPath + \"?nodeID=\" + pageId, { credentials: \"same-origin\" })];\n                case 1:\n                    res = _a.sent();\n                    return [4 /*yield*/, res.json()];\n                case 2:\n                    data = _a.sent();\n                    return [2 /*return*/, data];\n            }\n        });\n    });\n}\n","import { __awaiter, __extends, __generator } from \"tslib\";\nimport * as React from 'react';\nimport { getLearningGoalsAndTasks } from '../../apis/ked-learninggoals';\nimport { LearningGoalsList } from '../course-viewer/subcomponents/learning-goals-list';\nimport { setupIntl } from '../utility-components/SetupLanguageIntl';\nimport { injectIntl } from 'react-intl';\nimport { LanguageContext } from '../utility-components/LanguageContext';\nvar _LearningTasks = /** @class */ (function (_super) {\n    __extends(_LearningTasks, _super);\n    function _LearningTasks(props) {\n        var _this = _super.call(this, props) || this;\n        _this.state = {\n            data: null\n        };\n        return _this;\n    }\n    _LearningTasks.prototype.componentDidMount = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var data;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, getLearningGoalsAndTasks(this.props.apiPath, this.props.pageId)];\n                    case 1:\n                        data = _a.sent();\n                        this.setState({ data: data });\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    _LearningTasks.prototype.render = function () {\n        if (!this.state.data)\n            return React.createElement(\"div\", null);\n        var _a = this.state.data, moduleName = _a.moduleName, subject = _a.subject, commonTasks = _a.commonTasks, learningGoals = _a.learningGoals, step = _a.step;\n        var intl = this.props.intl;\n        //const step = undefined; // moduleName.toLowerCase().startsWith(\"steg \") && parseInt(moduleName.substr(5));\n        var commonTasksList = commonTasks.map(function (task) { return ({\n            id: task.id,\n            name: task.name,\n            url: task.url,\n            courseName: subject.name,\n            learningGoal: step && learningGoals.length > 0 ? moduleName + \" - \\u00F6vergripande\" : moduleName\n        }); });\n        var learningGoalsList = learningGoals.map(function (learningGoal) { return ({\n            name: learningGoal.name,\n            learningTasks: learningGoal.tasks.map(function (task) { return ({\n                id: task.id,\n                name: task.name,\n                url: task.url,\n                courseName: subject.name,\n                learningGoal: learningGoal.name\n            }); })\n        }); });\n        if (step) {\n            commonTasksList.forEach(function (task) { return task.step = step; });\n            learningGoalsList.forEach(function (lg) { return lg.learningTasks.forEach(function (task) { return task.step = step; }); });\n        }\n        return React.createElement(LanguageContext.Provider, { value: { intl: intl } },\n            React.createElement(LearningGoalsList, { commonTasks: commonTasksList, learningGoals: learningGoalsList }));\n    };\n    return _LearningTasks;\n}(React.Component));\nexport var LearningTasks = setupIntl(injectIntl(_LearningTasks));\n"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AChBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}