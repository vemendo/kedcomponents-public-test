var testpagesp =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// install a JSONP callback for chunk loading
/******/ 	function webpackJsonpCallback(data) {
/******/ 		var chunkIds = data[0];
/******/ 		var moreModules = data[1];
/******/ 		var executeModules = data[2];
/******/
/******/ 		// add "moreModules" to the modules object,
/******/ 		// then flag all "chunkIds" as loaded and fire callback
/******/ 		var moduleId, chunkId, i = 0, resolves = [];
/******/ 		for(;i < chunkIds.length; i++) {
/******/ 			chunkId = chunkIds[i];
/******/ 			if(installedChunks[chunkId]) {
/******/ 				resolves.push(installedChunks[chunkId][0]);
/******/ 			}
/******/ 			installedChunks[chunkId] = 0;
/******/ 		}
/******/ 		for(moduleId in moreModules) {
/******/ 			if(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {
/******/ 				modules[moduleId] = moreModules[moduleId];
/******/ 			}
/******/ 		}
/******/ 		if(parentJsonpFunction) parentJsonpFunction(data);
/******/
/******/ 		while(resolves.length) {
/******/ 			resolves.shift()();
/******/ 		}
/******/
/******/ 		// add entry modules from loaded chunk to deferred list
/******/ 		deferredModules.push.apply(deferredModules, executeModules || []);
/******/
/******/ 		// run deferred modules when all chunks ready
/******/ 		return checkDeferredModules();
/******/ 	};
/******/ 	function checkDeferredModules() {
/******/ 		var result;
/******/ 		for(var i = 0; i < deferredModules.length; i++) {
/******/ 			var deferredModule = deferredModules[i];
/******/ 			var fulfilled = true;
/******/ 			for(var j = 1; j < deferredModule.length; j++) {
/******/ 				var depId = deferredModule[j];
/******/ 				if(installedChunks[depId] !== 0) fulfilled = false;
/******/ 			}
/******/ 			if(fulfilled) {
/******/ 				deferredModules.splice(i--, 1);
/******/ 				result = __webpack_require__(__webpack_require__.s = deferredModule[0]);
/******/ 			}
/******/ 		}
/******/
/******/ 		return result;
/******/ 	}
/******/
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// object to store loaded and loading chunks
/******/ 	// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 	// Promise = chunk loading, 0 = chunk loaded
/******/ 	var installedChunks = {
/******/ 		"testpagesp": 0
/******/ 	};
/******/
/******/ 	var deferredModules = [];
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	var jsonpArray = window["webpackJsonp_name_"] = window["webpackJsonp_name_"] || [];
/******/ 	var oldJsonpFunction = jsonpArray.push.bind(jsonpArray);
/******/ 	jsonpArray.push = webpackJsonpCallback;
/******/ 	jsonpArray = jsonpArray.slice();
/******/ 	for(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);
/******/ 	var parentJsonpFunction = oldJsonpFunction;
/******/
/******/
/******/ 	// add entry module to deferred list
/******/ 	deferredModules.push(["./src/test/testpage-sp.tsx","vendors"]);
/******/ 	// run deferred modules when ready
/******/ 	return checkDeferredModules();
/******/ })
/************************************************************************/
/******/ ({

/***/ "./kedbackend/KED.Backend.API/schema.json":
/*!************************************************!*\
  !*** ./kedbackend/KED.Backend.API/schema.json ***!
  \************************************************/
/*! exports provided: accessClaimDefinitions, realmClaim, specialRoles, defaultAccessClaimTypes, defaultAcl, tables, default */
/***/ (function(module) {

module.exports = {"accessClaimDefinitions":{"email":"{http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress}","role":"{http://schemas.microsoft.com/ws/2008/06/identity/claims/role}","school":"{school}","schoolRole":"{school}/{http://schemas.microsoft.com/ws/2008/06/identity/claims/role}","tutorFor":"{tutorFor}"},"realmClaim":"realm","specialRoles":{"userRole":"USER","adminRole":"ADMIN"},"defaultAccessClaimTypes":["role"],"defaultAcl":["role:USER:R"],"tables":{"branches":{"accessClaimTypes":["role","schoolRole","email"],"sharingAccessPerRole":{"USER":{"email":["*"],"schoolRole":["*"],"role":["*"]}},"relationships":{"parents":"branches","approvedChildren":"branches"}},"global":{"accessClaimTypes":["role","schoolRole"],"relationships":{"courseInstances":"courseInstances"}},"courseInstances":{"accessClaimTypes":["role","schoolRole"],"sharingAccessPerRole":{"USER":{"schoolRole":["*"],"role":["*"]}},"defaultAcl":["role:USER:R","schoolRole:{school}/EMPLOYEE:S"],"relationships":{"abilities":"abilities","centralContent":"central-content","knowledgeRequirements":"knowledge-requirements","blocks":"courseBlocks","tabs":"courseTabs"}},"courseBlocks":{"accessClaimTypes":["role","schoolRole"],"sharingAccessPerRole":{"USER":{"schoolRole":["*"],"role":["*"]}},"defaultAcl":["role:USER:R","schoolRole:{school}/EMPLOYEE:S"],"relationships":{"abilities":"abilities","centralContent":"central-content","knowledgeRequirements":"knowledge-requirements","tabs":"courseTabs","tasks":"tasks"}},"courseTabs":{"accessClaimTypes":["role","schoolRole"],"sharingAccessPerRole":{"USER":{"schoolRole":["*"],"role":["*"]}},"defaultAcl":["role:USER:R","schoolRole:{school}/EMPLOYEE:S"],"relationships":{"abilities":"abilities","centralContent":"central-content","knowledgeRequirements":"knowledge-requirements","contents":"courseContents"}},"courseContents":{"accessClaimTypes":["role","schoolRole"],"sharingAccessPerRole":{"USER":{"schoolRole":["*"],"role":["*"]}},"defaultAcl":["role:USER:R","schoolRole:{school}/EMPLOYEE:S"],"relationships":{"tasks":"tasks"}},"weekplans":{"accessClaimTypes":["email","tutorFor"],"sharingAccessPerRole":{"USER":{"email":["{email}:*","{tutorFor}:*"],"tutorFor":["{tutorFor}:*"]}},"defaultAcl":["email:{email}:S"]},"weekplans-ks":{"accessClaimTypes":["email","tutorFor"],"sharingAccessPerRole":{"USER":{"email":["{email}:*","{tutorFor}:*"],"tutorFor":["{tutorFor}:*"]}},"defaultAcl":["email:{email}:S"]},"usertasks":{"accessClaimTypes":["email","schoolRole","tutorFor"],"sharingAccessPerRole":{"USER":{"email":["{email}:*","{tutorFor}:*"],"schoolRole":["{school}/EMPLOYEE:*"],"tutorFor":["{tutorFor}:*"]}},"defaultAcl":["email:{email}:S"],"relationships":{"task":"tasks","course":"courses"}},"userhiddencourses":{"accessClaimTypes":["email"],"sharingAccessPerRole":{"USER":{"email":["{email}:*"]}},"defaultAcl":["email:{email}:S"],"relationships":{}},"usercalendarvisibility":{"accessClaimTypes":["email"],"sharingAccessPerRole":{"USER":{"email":["{email}:*"]}},"defaultAcl":["email:{email}:S"],"relationships":{}},"subjects":{"relationships":{"courseTemplates":"courses","abilities":"abilities"}},"schools":{"accessClaimTypes":["role","schoolRole"],"relationships":{"courses":"courses","activeCourses":"courses"}},"courses":{"accessClaimTypes":["role","schoolRole"],"sharingAccessPerRole":{"EMPLOYEE":{"schoolRole":["{school}/EMPLOYEE:*"],"role":["USER:R"]}},"defaultAcl":["schoolRole:{school}/EMPLOYEE:*"],"relationships":{"templateChain":"courses","centralContent":"central-content","knowledgeRequirements":"knowledge-requirements","abilities":"abilities","images":"images","tasks":"tasks"}},"tasks":{"accessClaimTypes":["role","schoolRole"],"sharingAccessPerRole":{"EMPLOYEE":{"schoolRole":["{school}/EMPLOYEE:*"],"role":["USER:R"]}},"defaultAcl":["schoolRole:{school}/EMPLOYEE:S","role:USER:R"],"relationships":{"knowledgeRequirements":"knowledge-requirements","centralContent":"central-content","abilities":"abilities"}},"images":{"accessClaimTypes":["role","schoolRole","email"],"sharingAccessPerRole":{"EMPLOYEE":{"schoolRole":["{school}/EMPLOYEE:*"],"role":["USER:R"]},"USER":{"email":["{email}:*"]}}},"central-content":{"accessClaimTypes":["role"],"defaultAcl":["role:USER:R"]},"knowledge-requirements":{"accessClaimTypes":["role"],"defaultAcl":["role:USER:R"]},"abilities":{"accessClaimTypes":["role"],"defaultAcl":["role:USER:R"]},"notes":{"accessClaimTypes":["email"],"sharingAccessPerRole":{"USER":{"email":["{email}:*"]}},"defaultAcl":["email:{email}:S"],"relationships":{}}}};

/***/ }),

/***/ "./kedbackend/client.js":
/*!******************************!*\
  !*** ./kedbackend/client.js ***!
  \******************************/
/*! exports provided: KedBearerProvider, RestClient, HttpError, KedBackendClient, BatchRunner, createUUID, avoidSimultanousCalls, getGlobalId, computePredestinatedId, updateArray, DocumentAccess, hasAccess */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./js/dist/js/ked-backend-client */ "./kedbackend/js/dist/js/ked-backend-client/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBearerProvider", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["KedBearerProvider"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RestClient", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["RestClient"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "HttpError", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["HttpError"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendClient", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["KedBackendClient"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BatchRunner", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["BatchRunner"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createUUID", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["createUUID"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "avoidSimultanousCalls", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["avoidSimultanousCalls"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getGlobalId", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["getGlobalId"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "computePredestinatedId", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["computePredestinatedId"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "updateArray", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["updateArray"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DocumentAccess", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["DocumentAccess"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "hasAccess", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["hasAccess"]; });



/***/ }),

/***/ "./kedbackend/clientweb.js":
/*!*********************************!*\
  !*** ./kedbackend/clientweb.js ***!
  \*********************************/
/*! exports provided: storage, WebServerBearerProvider, isomorphic, KedBackendClientWeb */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _js_dist_js_ked_backend_client_web__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./js/dist/js/ked-backend-client-web */ "./kedbackend/js/dist/js/ked-backend-client-web/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "storage", function() { return _js_dist_js_ked_backend_client_web__WEBPACK_IMPORTED_MODULE_0__["storage"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "WebServerBearerProvider", function() { return _js_dist_js_ked_backend_client_web__WEBPACK_IMPORTED_MODULE_0__["WebServerBearerProvider"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "isomorphic", function() { return _js_dist_js_ked_backend_client_web__WEBPACK_IMPORTED_MODULE_0__["isomorphic"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendClientWeb", function() { return _js_dist_js_ked_backend_client_web__WEBPACK_IMPORTED_MODULE_0__["KedBackendClientWeb"]; });



/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client-web/bearer-storage-sessionstorage.js":
/*!***************************************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client-web/bearer-storage-sessionstorage.js ***!
  \***************************************************************************************/
/*! exports provided: BearerStorageSessionStorage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BearerStorageSessionStorage", function() { return BearerStorageSessionStorage; });
var BearerStorageSessionStorage = /** @class */ (function () {
    function BearerStorageSessionStorage() {
    }
    BearerStorageSessionStorage.prototype.save = function (id, tokenInfo) {
        sessionStorage.setItem("bearer-" + id, JSON.stringify(tokenInfo));
    };
    BearerStorageSessionStorage.prototype.load = function (id) {
        try {
            var json = sessionStorage.getItem("bearer-" + id);
            return Promise.resolve(json ? JSON.parse(json) : { token: null, expires: 0 });
        }
        catch (ex) {
            return Promise.resolve({ token: null, expires: 0 });
        }
    };
    return BearerStorageSessionStorage;
}());

//# sourceMappingURL=bearer-storage-sessionstorage.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client-web/hash-restorer.js":
/*!***********************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client-web/hash-restorer.js ***!
  \***********************************************************************/
/*! exports provided: rememberHashLocation */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rememberHashLocation", function() { return rememberHashLocation; });
var redirHash = sessionStorage.getItem("redir-hash");
if (redirHash)
    try {
        var _a = JSON.parse(redirHash), time = _a.time, hash = _a.hash;
        if (time && time > Date.now() - 60000) {
            sessionStorage.removeItem("redir-hash");
            location.hash = hash;
        }
    }
    catch (_) { }
function rememberHashLocation() {
    sessionStorage.setItem("redir-hash", JSON.stringify({ time: Date.now(), hash: location.hash }));
}
//# sourceMappingURL=hash-restorer.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client-web/index.js":
/*!***************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client-web/index.js ***!
  \***************************************************************/
/*! exports provided: storage, WebServerBearerProvider, isomorphic, KedBackendClientWeb */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "storage", function() { return storage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WebServerBearerProvider", function() { return WebServerBearerProvider; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isomorphic", function() { return isomorphic; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedBackendClientWeb", function() { return KedBackendClientWeb; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _ked_backend_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ked-backend-client */ "./kedbackend/js/dist/js/ked-backend-client/index.js");
/* harmony import */ var _bearer_storage_sessionstorage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./bearer-storage-sessionstorage */ "./kedbackend/js/dist/js/ked-backend-client-web/bearer-storage-sessionstorage.js");
/* harmony import */ var _ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../ked-backend-client/utils */ "./kedbackend/js/dist/js/ked-backend-client/utils.js");
/* harmony import */ var _ked_model_migrator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../ked-model-migrator */ "./kedbackend/js/dist/js/ked-model-migrator/index.js");
/* harmony import */ var _hash_restorer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./hash-restorer */ "./kedbackend/js/dist/js/ked-backend-client-web/hash-restorer.js");







Object(_ked_model_migrator__WEBPACK_IMPORTED_MODULE_4__["KedModelMigratorMixin"])(_ked_backend_client__WEBPACK_IMPORTED_MODULE_1__["KedBackendClient"].prototype);
var storage = new _bearer_storage_sessionstorage__WEBPACK_IMPORTED_MODULE_2__["BearerStorageSessionStorage"]();
var timeOfPageLoad = Date.now();
var WebServerBearerProvider = /** @class */ (function () {
    function WebServerBearerProvider(tokenPath, tokenResponseMapper, tokenId) {
        this.tokenPath = tokenPath;
        this.tokenResponseMapper = tokenResponseMapper;
        this.tokenId = tokenId;
        this.tokenInfo = { token: null, expires: 0 };
        this.getBearer = Object(_ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_3__["avoidSimultanousCalls"])(this.getBearer.bind(this));
        this.refreshBearer = Object(_ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_3__["avoidSimultanousCalls"])(this.refreshBearer.bind(this));
    }
    WebServerBearerProvider.prototype.getBearer = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (!!this.tokenInfo.token) return [3 /*break*/, 2];
                        if (!this.tokenId) return [3 /*break*/, 2];
                        _a = this;
                        return [4 /*yield*/, storage.load(this.tokenId)];
                    case 1:
                        _a.tokenInfo = _b.sent();
                        _b.label = 2;
                    case 2:
                        if (!(this.tokenInfo.expires < Date.now())) return [3 /*break*/, 4];
                        return [4 /*yield*/, this.refreshBearer()];
                    case 3:
                        _b.sent();
                        _b.label = 4;
                    case 4: return [2 /*return*/, this.tokenInfo];
                }
            });
        });
    };
    WebServerBearerProvider.prototype.refreshBearer = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, _c, _d;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_e) {
                switch (_e.label) {
                    case 0: return [4 /*yield*/, fetch(this.tokenPath, {
                            headers: { Accept: "text/plain; application/json" },
                            redirect: 'manual',
                            cache: 'no-cache',
                            credentials: "same-origin"
                        })];
                    case 1:
                        res = _e.sent();
                        if (res.status === 302 || (!res.status && res.type === "opaqueredirect")) {
                            // User session timed out and server wants to redirect entire page to login page
                            // Time to reload current page to force a redirect of the entire page instead for
                            // just redirecting to /api/token or whatever.
                            if (Date.now() - timeOfPageLoad > 60000) { // prohibit endless loop of reloading self.
                                this.wantsRedirect = true; // So that listeners to onbeforeunload could show alternate message.
                                console.log("Redirect wanted. Reload page.");
                                Object(_hash_restorer__WEBPACK_IMPORTED_MODULE_5__["rememberHashLocation"])();
                                window.location.reload(true);
                                throw new _ked_backend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"](302, "Redirected");
                            }
                        }
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = Error.bind;
                        _b = "HTTP" + res.status + " ";
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(Error, [void 0, _b + (_e.sent())]))();
                    case 3:
                        _c = this;
                        _d = this.tokenResponseMapper;
                        return [4 /*yield*/, res.text()];
                    case 4:
                        _c.tokenInfo = _d.apply(this, [_e.sent()]);
                        storage.save(this.tokenId, this.tokenInfo);
                        return [2 /*return*/, this.tokenInfo];
                }
            });
        });
    };
    return WebServerBearerProvider;
}());

var isomorphic = { fetch: fetch.bind(self), btoa: btoa.bind(self) };
var KedBackendClientWeb = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](KedBackendClientWeb, _super);
    function KedBackendClientWeb(apiBaseUrl, providerOrTokenPath, options) {
        var _this = this;
        var bearerProvider = typeof providerOrTokenPath !== 'string' ?
            providerOrTokenPath :
            new WebServerBearerProvider(providerOrTokenPath, (options && options.tokenResponseMapper) || (function (x) { return ({ token: x, expires: Date.now() + 59 * 60 * 60 }); }), options && options.tokenId);
        _this = _super.call(this, isomorphic, bearerProvider, apiBaseUrl) || this;
        return _this;
    }
    return KedBackendClientWeb;
}(_ked_backend_client__WEBPACK_IMPORTED_MODULE_1__["KedBackendClient"]));

//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client/access-control.js":
/*!********************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client/access-control.js ***!
  \********************************************************************/
/*! exports provided: DocumentAccess, hasAccess */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DocumentAccess", function() { return DocumentAccess; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasAccess", function() { return hasAccess; });
var DocumentAccess = /** @class */ (function () {
    function DocumentAccess(accessClaimType, accessClaimValue, right) {
        this.accessClaimType = accessClaimType;
        this.accessClaimValue = accessClaimValue;
        this.right = right;
    }
    DocumentAccess.fromString = function (ac) {
        if (!ac)
            return null;
        var split = ac.split(':');
        if (split.length < 3)
            throw new Error("Invalid access string: " + ac);
        var claimType = DocumentAccess.unescape(split[0]);
        var claimValue = DocumentAccess.unescape(split[1]);
        var right = split[2];
        if (right !== 'R' && right !== 'W' && right !== 'S')
            throw new Error("Invalid access string: " + ac);
        return new DocumentAccess(claimType, claimValue, right);
    };
    DocumentAccess.escape = function (accessComponent) {
        return accessComponent.replace(/\%/g, "%25").replace(/\:/g, "%3A");
    };
    DocumentAccess.unescape = function (accessComponent) {
        return accessComponent.replace(/\%3A/g, ":").replace(/\%25/g, "%");
    };
    DocumentAccess.prototype.toString = function () {
        return DocumentAccess.escape(this.accessClaimType) + ":" +
            DocumentAccess.escape(this.accessClaimValue) + ":" +
            this.right;
    };
    DocumentAccess.fromStringArray = function (acl) {
        return acl
            .map(function (ac) { return DocumentAccess.fromString(ac); })
            .filter(function (ac) { return ac; });
    };
    DocumentAccess.toStringArray = function (acl) {
        return acl.map(function (ac) { return ac.toString(); });
    };
    return DocumentAccess;
}());

function hasAccess(acl, userClaims, requestedRight) {
    if (userClaims.some(function (claim) { return claim.type === 'role' && claim.value === "ADMIN"; }))
        return true;
    return acl.some(function (a) {
        return userClaims.some(function (c) {
            return a.accessClaimType === c.type &&
                a.accessClaimValue === c.value && ((a.right === 'R' && requestedRight === 'R') ||
                (a.right === 'W' && ['R', 'W'].indexOf(requestedRight) >= 0) ||
                (a.right === 'S'));
        });
    });
}
//# sourceMappingURL=access-control.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client/http-error.js":
/*!****************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client/http-error.js ***!
  \****************************************************************/
/*! exports provided: HttpError */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HttpError", function() { return HttpError; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");

var HttpError = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](HttpError, _super);
    function HttpError(code, message) {
        var _this = _super.call(this, "HTTP" + code + " " + message) || this;
        _this.code = code;
        _this.message = message;
        _this.name = "http" + code;
        _this.message = "HTTP" + code + " " + message;
        return _this;
    }
    return HttpError;
}(Error));

//# sourceMappingURL=http-error.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client/index.js":
/*!***********************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client/index.js ***!
  \***********************************************************/
/*! exports provided: KedBearerProvider, RestClient, HttpError, KedBackendClient, BatchRunner, createUUID, avoidSimultanousCalls, getGlobalId, computePredestinatedId, updateArray, DocumentAccess, hasAccess */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedBackendClient", function() { return KedBackendClient; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BatchRunner", function() { return BatchRunner; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _restclient__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./restclient */ "./kedbackend/js/dist/js/ked-backend-client/restclient.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RestClient", function() { return _restclient__WEBPACK_IMPORTED_MODULE_1__["RestClient"]; });

/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ "./kedbackend/js/dist/js/ked-backend-client/utils.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createUUID", function() { return _utils__WEBPACK_IMPORTED_MODULE_2__["createUUID"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "avoidSimultanousCalls", function() { return _utils__WEBPACK_IMPORTED_MODULE_2__["avoidSimultanousCalls"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getGlobalId", function() { return _utils__WEBPACK_IMPORTED_MODULE_2__["getGlobalId"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "computePredestinatedId", function() { return _utils__WEBPACK_IMPORTED_MODULE_2__["computePredestinatedId"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "updateArray", function() { return _utils__WEBPACK_IMPORTED_MODULE_2__["updateArray"]; });

/* harmony import */ var _ked_bearer_provider__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ked-bearer-provider */ "./kedbackend/js/dist/js/ked-backend-client/ked-bearer-provider.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBearerProvider", function() { return _ked_bearer_provider__WEBPACK_IMPORTED_MODULE_3__["KedBearerProvider"]; });

/* harmony import */ var _access_control__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./access-control */ "./kedbackend/js/dist/js/ked-backend-client/access-control.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DocumentAccess", function() { return _access_control__WEBPACK_IMPORTED_MODULE_4__["DocumentAccess"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "hasAccess", function() { return _access_control__WEBPACK_IMPORTED_MODULE_4__["hasAccess"]; });

/* harmony import */ var _http_error__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./http-error */ "./kedbackend/js/dist/js/ked-backend-client/http-error.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "HttpError", function() { return _http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"]; });

/* empty/unused harmony star reexport */








;
// | 'otherFlag' | 'thirdFlag';...
var KedBackendClient = /** @class */ (function () {
    function KedBackendClient(isomorphic, bearerProvider, baseUrl) {
        this.http = new _restclient__WEBPACK_IMPORTED_MODULE_1__["RestClient"](isomorphic, baseUrl, { bearerProvider: bearerProvider });
    }
    KedBackendClient.prototype.getMyClaims = function (table, fetchOptions) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("me/claims/" + (table || ""), null, fetchOptions)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = _http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(_http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4: return [2 /*return*/, _c.sent()];
                }
            });
        });
    };
    KedBackendClient.prototype.get = function (table, id, options, fetchOptions) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get(table + "/" + id, options, fetchOptions)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = _http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(_http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4: return [2 /*return*/, _c.sent()];
                }
            });
        });
    };
    KedBackendClient.prototype.list = function (table, options, fetchOptions) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var query, res, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        query = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, options);
                        if (options && options.mutationsOnEmpty)
                            query.mutationsOnEmpty = JSON.stringify(options.mutationsOnEmpty);
                        return [4 /*yield*/, this.http.get("" + table, query, fetchOptions)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = _http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(_http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4: return [2 /*return*/, _c.sent()];
                }
            });
        });
    };
    KedBackendClient.prototype.batch = function (reqs, fetchOptions) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        // Reorder operations so that 'add's come first and 'delete's come last:
                        reqs = reqs.slice().sort(function (req1, req2) {
                            return req1.op === 'add' ? -1 : req2.op === 'add' ? 1 :
                                req1.op === 'delete' ? 1 : req2.op === 'delete' ? -1 : 0;
                        });
                        return [4 /*yield*/, this.http.post("batch", reqs, fetchOptions)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = _http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(_http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4: return [2 /*return*/, _c.sent()];
                }
            });
        });
    };
    KedBackendClient.prototype.do = function (scopeFn) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var runner;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        runner = new BatchRunner();
                        scopeFn(runner);
                        return [4 /*yield*/, this.batch(runner.mutationRequests)];
                    case 1: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    KedBackendClient.prototype.deleteRealm = function (realm) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.delete("realms/" + realm)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = _http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(_http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4: return [2 /*return*/, _c.sent()];
                }
            });
        });
    };
    KedBackendClient.prototype.add = function (table, doc, branchId) {
        return this.do(function (r) { return r.add(table, doc); });
    };
    KedBackendClient.prototype.put = function (table, doc) {
        return this.do(function (r) { return r.put(table, doc); });
    };
    KedBackendClient.prototype.update = function (table, id, deltaDoc, branchId) {
        return this.do(function (r) { return r.update(table, id, deltaDoc, branchId); });
    };
    KedBackendClient.prototype.merge = function (branchId, targetBranchId) {
        return this.do(function (r) { return r.merge(branchId, targetBranchId); });
    };
    KedBackendClient.prototype.clearBranch = function (branchId) {
        return this.do(function (r) { return r.clearBranch(branchId); });
    };
    KedBackendClient.prototype.delete = function (table, id) {
        return this.do(function (r) { return r.delete(table, id); });
    };
    KedBackendClient.prototype.share = function (table, id, acl) {
        return this.do(function (r) { return r.share(table, id, acl); });
    };
    KedBackendClient.prototype.unshare = function (table, id, acl) {
        return this.do(function (r) { return r.unshare(table, id, acl); });
    };
    KedBackendClient.prototype.link = function (sourceTable, sourceId, targetTable, targetId, label) {
        return this.do(function (r) { return r.link(sourceTable, sourceId, targetTable, targetId, label); });
    };
    KedBackendClient.prototype.link2 = function (sourceTable, sourceId, targetId, label, branchId) {
        return this.do(function (r) { return r.link2(sourceTable, sourceId, label, targetId, branchId); });
    };
    KedBackendClient.prototype.unlink = function (sourceTable, sourceId, targetTable, targetId, label) {
        return this.do(function (r) { return r.unlink(sourceTable, sourceId, targetTable, targetId, label); });
    };
    KedBackendClient.prototype.unlink2 = function (sourceTable, sourceId, targetId, label, branchId) {
        return this.do(function (r) { return r.unlink2(sourceTable, sourceId, label, targetId, branchId); });
    };
    KedBackendClient.prototype.undoLink = function (sourceTable, sourceId, targetId, label, branchId) {
        return this.do(function (r) { return r.undoLink(sourceTable, sourceId, label, targetId, branchId); });
    };
    return KedBackendClient;
}());

var BatchRunner = /** @class */ (function () {
    function BatchRunner() {
        this.mutationRequests = [];
    }
    BatchRunner.prototype.add = function (table, doc, branchId) {
        this.mutationRequests.push({ op: 'add', table: table, doc: doc, branchId: branchId });
        return this;
    };
    BatchRunner.prototype.put = function (table, doc) {
        doc = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, doc);
        delete doc.acl; // Forbidden to send acl with put() calls.
        this.mutationRequests.push({ op: 'put', table: table, doc: doc });
        return this;
    };
    BatchRunner.prototype.update = function (table, id, deltaDoc, branchId) {
        deltaDoc = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, deltaDoc);
        this.mutationRequests.push({ op: 'update', table: table, id: id, deltaDoc: deltaDoc, branchId: branchId });
    };
    BatchRunner.prototype.merge = function (branchId, targetBranchId) {
        this.mutationRequests.push({ op: 'merge', branchId: branchId, targetBranchId: targetBranchId });
    };
    BatchRunner.prototype.clearBranch = function (branchId) {
        this.mutationRequests.push({ op: 'clear-branch', branchId: branchId });
    };
    BatchRunner.prototype.delete = function (table, id) {
        this.mutationRequests.push({ op: 'delete', table: table, id: id });
        return this;
    };
    BatchRunner.prototype.share = function (table, id, acl) {
        this.mutationRequests.push({ op: 'share', table: table, id: id, acl: acl });
        return this;
    };
    BatchRunner.prototype.unshare = function (table, id, acl) {
        this.mutationRequests.push({ op: 'unshare', table: table, id: id, acl: acl });
        return this;
    };
    BatchRunner.prototype.link = function (sourceTable, sourceId, targetTable, targetId, label) {
        this.mutationRequests.push({ op: 'link', sourceTable: sourceTable, sourceId: sourceId, targetTable: targetTable, targetId: targetId, label: label });
        return this;
    };
    BatchRunner.prototype.link2 = function (sourceTable, sourceId, label, targetId, branchId) {
        this.mutationRequests.push({ op: 'link', sourceTable: sourceTable, sourceId: sourceId, targetId: targetId, label: label, branchId: branchId });
    };
    BatchRunner.prototype.unlink = function (sourceTable, sourceId, targetTable, targetId, label) {
        this.mutationRequests.push({ op: 'unlink', sourceTable: sourceTable, sourceId: sourceId, targetTable: targetTable, targetId: targetId, label: label });
        return this;
    };
    BatchRunner.prototype.unlink2 = function (sourceTable, sourceId, label, targetId, branchId) {
        this.mutationRequests.push({ op: 'unlink', sourceTable: sourceTable, sourceId: sourceId, targetId: targetId, label: label, branchId: branchId });
        return this;
    };
    BatchRunner.prototype.undoLink = function (sourceTable, sourceId, label, targetId, branchId) {
        this.mutationRequests.push({ op: 'undo-link', sourceTable: sourceTable, sourceId: sourceId, targetId: targetId, label: label, branchId: branchId });
    };
    return BatchRunner;
}());

//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client/ked-bearer-provider.js":
/*!*************************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client/ked-bearer-provider.js ***!
  \*************************************************************************/
/*! exports provided: KedBearerProvider */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedBearerProvider", function() { return KedBearerProvider; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _restclient__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./restclient */ "./kedbackend/js/dist/js/ked-backend-client/restclient.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ "./kedbackend/js/dist/js/ked-backend-client/utils.js");



var KedBearerProvider = /** @class */ (function () {
    function KedBearerProvider(isomorphic, storage, tokenId, clientId, clientSecret, tokenUrl, tokenQuery) {
        this.isomorphic = isomorphic;
        this.storage = storage;
        this.tokenId = tokenId;
        this.clientId = clientId;
        this.clientSecret = clientSecret;
        this.tokenUrl = tokenUrl;
        this.tokenQuery = tokenQuery;
        this.tokenInfo = { token: null, expires: 0 };
        this.client = new _restclient__WEBPACK_IMPORTED_MODULE_1__["RestClient"](isomorphic, "", {
            username: this.clientId,
            password: this.clientSecret
        });
        this.getBearer = Object(_utils__WEBPACK_IMPORTED_MODULE_2__["avoidSimultanousCalls"])(this.getBearer.bind(this));
        this.refreshBearer = Object(_utils__WEBPACK_IMPORTED_MODULE_2__["avoidSimultanousCalls"])(this.refreshBearer.bind(this));
    }
    KedBearerProvider.prototype.getBearer = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, token, expires, _b, e_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _a = this.tokenInfo, token = _a.token, expires = _a.expires;
                        if (token && expires >= Date.now())
                            return [2 /*return*/, this.tokenInfo];
                        _c.label = 1;
                    case 1:
                        _c.trys.push([1, 4, , 6]);
                        _b = this;
                        return [4 /*yield*/, this.storage.load(this.clientId + "/" + this.tokenId)];
                    case 2:
                        _b.tokenInfo = _c.sent();
                        if (this.tokenInfo.token && this.tokenInfo.expires >= Date.now())
                            return [2 /*return*/, this.tokenInfo];
                        return [4 /*yield*/, this.refreshBearer()];
                    case 3:
                        _c.sent();
                        return [2 /*return*/, this.tokenInfo];
                    case 4:
                        e_1 = _c.sent();
                        return [4 /*yield*/, this.refreshBearer()];
                    case 5:
                        _c.sent();
                        return [2 /*return*/, this.tokenInfo];
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    KedBearerProvider.prototype.refreshBearer = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, retries, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        retries = 0;
                        _c.label = 1;
                    case 1:
                        if (!(retries < 6)) return [3 /*break*/, 5];
                        console.log("Retrieving token for " + this.tokenId);
                        return [4 /*yield*/, this.client.get(this.tokenUrl, this.tokenQuery, { cache: 'reload' })];
                    case 2:
                        res = _c.sent();
                        if (res.status !== 200) {
                            console.warn("Got " + res.status + " " + res.statusText);
                            return [3 /*break*/, 4];
                        }
                        _a = this;
                        _b = {};
                        return [4 /*yield*/, res.text()];
                    case 3:
                        _a.tokenInfo = (_b.token = _c.sent(), _b.expires = Date.now() + 59 * 60 * 1000, _b);
                        console.log("Got token for " + this.tokenId + ": " + JSON.stringify(this.tokenInfo));
                        this.storage.save(this.clientId + "/" + this.tokenId, this.tokenInfo);
                        return [2 /*return*/, this.tokenInfo];
                    case 4:
                        ++retries;
                        return [3 /*break*/, 1];
                    case 5: throw new Error("Failed to retrieve token for " + JSON.stringify(this.tokenId));
                }
            });
        });
    };
    return KedBearerProvider;
}());

//# sourceMappingURL=ked-bearer-provider.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client/restclient.js":
/*!****************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client/restclient.js ***!
  \****************************************************************/
/*! exports provided: RestClient */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RestClient", function() { return RestClient; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ "./kedbackend/js/dist/js/ked-backend-client/utils.js");
/* harmony import */ var _observable_emitter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../observable/emitter */ "./kedbackend/js/dist/js/observable/emitter.js");
/*
declare var Buffer; // node built-in


function basicAuthHeader(username, password) {
    return "Basic " + new Buffer(username + ":" + password).toString("base64");
}
*/



var RestClient = /** @class */ (function () {
    function RestClient(isomorphic, baseUrl, options) {
        this.isomorphic = isomorphic;
        this.baseUrl = baseUrl;
        this.options = options;
        this.numOutstandingOperations = 0;
        this._status = new _observable_emitter__WEBPACK_IMPORTED_MODULE_2__["Emitter"](this);
        this.fetchOptions = { mode: 'cors' };
        this.authHeader = options.bearer ?
            "Bearer " + options.bearer :
            options.username ?
                "Basic " + isomorphic.btoa(options.username + ":" + (options.password || "")) :
                null;
        this.bearerProvider = options.bearerProvider || null;
    }
    Object.defineProperty(RestClient.prototype, "status", {
        get: function () {
            return this._status;
        },
        enumerable: true,
        configurable: true
    });
    RestClient.prototype.fetch = function (path, method, headers, query, fetchOptions) {
        var _this = this;
        ++this.numOutstandingOperations;
        this._status.dispatch(this);
        return this._fetch(path, method, headers, query, fetchOptions)
            .then(function (res) {
            --_this.numOutstandingOperations;
            _this._status.dispatch(_this);
            return res;
        }).catch(function (err) {
            --_this.numOutstandingOperations;
            _this._status.dispatch(_this);
            return Promise.reject(err);
        });
    };
    RestClient.prototype._fetch = function (path, method, headers, query, fetchOptions) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var queryStr, _a, authHeader, tokenInfo, bearerProvider, _b, _c, url, res, wwwauth, _d;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_e) {
                switch (_e.label) {
                    case 0:
                        if (fetchOptions && fetchOptions.cache === 'no-cache') {
                            // Workaround for back-button not respecting cache control in Chrome/Opera.
                            // Append a query parameter to force a cache entry
                            query = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, query, { nocache: Object(_utils__WEBPACK_IMPORTED_MODULE_1__["createUUID"])() });
                        }
                        queryStr = query && Object.keys(query).filter(function (key) { return query[key] !== undefined; }).map(function (key) {
                            return encodeURIComponent(key) +
                                "=" +
                                encodeURIComponent(query[key]);
                        })
                            .join('&');
                        _a = this, authHeader = _a.authHeader, tokenInfo = _a.tokenInfo, bearerProvider = _a.bearerProvider;
                        if (!(!authHeader && !tokenInfo && bearerProvider)) return [3 /*break*/, 2];
                        _b = this;
                        return [4 /*yield*/, bearerProvider.getBearer()];
                    case 1:
                        _b.tokenInfo = tokenInfo = _e.sent();
                        _e.label = 2;
                    case 2:
                        if (!tokenInfo) return [3 /*break*/, 5];
                        if (!(tokenInfo.expires < Date.now())) return [3 /*break*/, 4];
                        console.log("Token expired. Refresh it:");
                        _c = this;
                        return [4 /*yield*/, bearerProvider.refreshBearer()];
                    case 3:
                        _c.tokenInfo = tokenInfo = _e.sent();
                        _e.label = 4;
                    case 4:
                        authHeader = "Bearer " + tokenInfo.token;
                        _e.label = 5;
                    case 5:
                        // In one way or another, we've concluded an Authorization header to use:
                        if (authHeader) {
                            headers.Authorization = authHeader;
                        }
                        url = this.baseUrl + path + (queryStr ? "?" + queryStr : "");
                        return [4 /*yield*/, this.isomorphic.fetch(url, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.fetchOptions, { headers: headers, method: method }, fetchOptions))];
                    case 6:
                        res = _e.sent();
                        if (!(res.status == 401 && this.bearerProvider)) return [3 /*break*/, 9];
                        wwwauth = res.headers.get("www-authenticate");
                        console.log("Got " + res.status + " from " + (this.baseUrl + path));
                        if (!(wwwauth && /Bearer/i.test(wwwauth))) return [3 /*break*/, 9];
                        _d = this;
                        return [4 /*yield*/, this.bearerProvider.refreshBearer()];
                    case 7:
                        _d.tokenInfo = _e.sent();
                        headers.Authorization = "Bearer " + this.tokenInfo.token;
                        return [4 /*yield*/, this.isomorphic.fetch(url, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.fetchOptions, { headers: headers, method: method }, fetchOptions))];
                    case 8:
                        res = _e.sent();
                        _e.label = 9;
                    case 9: return [2 /*return*/, res];
                }
            });
        });
    };
    RestClient.prototype.get = function (path, query, fetchOptions) {
        return this.fetch(path, "GET", { Accept: "application/json; text/plain" }, query, fetchOptions);
    };
    RestClient.prototype.post = function (path, data, fetchOptions) {
        return this.fetch(path, "POST", {
            "Content-Type": "application/json",
            "Accept": "application/json"
        }, null, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, fetchOptions, { body: JSON.stringify(data) }));
    };
    RestClient.prototype.delete = function (path, query, body, fetchOptions) {
        return this.fetch(path, "DELETE", { Accept: "application/json; text/plain" }, query, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, fetchOptions, { body: body }));
    };
    return RestClient;
}());

//# sourceMappingURL=restclient.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client/utils.js":
/*!***********************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client/utils.js ***!
  \***********************************************************/
/*! exports provided: createUUID, avoidSimultanousCalls, getGlobalId, computePredestinatedId, updateArray */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createUUID", function() { return createUUID; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "avoidSimultanousCalls", function() { return avoidSimultanousCalls; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getGlobalId", function() { return getGlobalId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computePredestinatedId", function() { return computePredestinatedId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateArray", function() { return updateArray; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");

function createUUID() {
    // Decent solution from http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript
    var d = Date.now();
    var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
        var r = (d + Math.random() * 16) % 16 | 0;
        d = Math.floor(d / 16);
        return (c === 'x' ? r : (r & 0x7 | 0x8)).toString(16);
    });
    return uuid;
}
function avoidSimultanousCalls(method) {
    var ongoingPromise = null;
    return function () {
        if (!ongoingPromise) {
            ongoingPromise = method.apply(this, arguments).then(function (result) {
                ongoingPromise = null;
                return result;
            });
        }
        return ongoingPromise;
    };
}
function getGlobalId(realm) {
    var prefix = 'ec96b3be-45fc-41d3-b69e-';
    var pad = ['50', '08', 'e1', '40', 'e4', 'e7'];
    if (realm.length > 6)
        throw new Error("Too long realm");
    for (var i = 0; i < realm.length; ++i) {
        var hex = realm.charCodeAt(i).toString(16);
        pad[i] = hex.length === 2 ?
            hex :
            '0' + hex;
    }
    return prefix + pad.join('');
}
function computePredestinatedId(input) {
    return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
        var encoder, data, digest, _a, i;
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
            switch (_b.label) {
                case 0:
                    encoder = new TextEncoder();
                    data = encoder.encode(input);
                    _a = Uint8Array.bind;
                    return [4 /*yield*/, crypto.subtle.digest('SHA-256', data)];
                case 1:
                    digest = new (_a.apply(Uint8Array, [void 0, _b.sent()]))();
                    i = 0;
                    return [2 /*return*/, 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
                            var nibble = digest[i++] % 16 | 0;
                            var washedNibble = c === 'x' ?
                                nibble :
                                nibble & 0x7 | 0x8;
                            return washedNibble.toString(16);
                        })];
            }
        });
    });
}
/*export function buf2hex(buffer: ArrayBuffer) {
  return Array.prototype.map.call(
    new Uint8Array(buffer),
    (x: number) => ('00' + x.toString(16)).slice(-2)).join('');
}*/
function updateArray(a, mapper) {
    var retval = a;
    for (var i = 0, l = a.length; i < l; ++i) {
        var t = a[i];
        var mapped = mapper(t);
        if (mapped !== t) {
            if (retval === a)
                retval = a.slice();
            retval[i] = mapped;
        }
    }
    return retval;
}
/*
export function updateArray<T>(a: T[], mapper: (t: T) => T | false): T[] {
  let retval = a;
  let j = 0;
  for (let i=0,l=a.length; i<l; ++i, ++j) {
    const t = a[i];
    const mapped = mapper(t);
    if (mapped === false) {
      // Mapper wants to delete this doc.
      if (retval === a) retval = a.slice();
      retval.splice(j, 1);
      --j; // compensate for ++j
    } else if (mapped !== t) {
      if (retval === a) retval = a.slice();
      retval[j] = mapped;
    }
  }
  return retval;
}
*/ 
//# sourceMappingURL=utils.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/cache-bust.js":
/*!**************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/cache-bust.js ***!
  \**************************************************************/
/*! exports provided: CacheBust */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CacheBust", function() { return CacheBust; });
/* harmony import */ var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json");
var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_0___namespace = /*#__PURE__*/__webpack_require__.t(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json", 1);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ "./kedbackend/js/dist/js/ked-backend-repo/utils.js");


var CacheBust = /** @class */ (function () {
    function CacheBust() {
    }
    CacheBust.getCacheBust = function (table, query, user, includes) {
        var involvedItems = CacheBust.getInvolvedItems(table, query, includes);
        return involvedItems
            .map(function (item) { return localStorage.getItem("cache-bust-" + user + "-" + item); })
            .filter(function (value) { return !!value; })
            .join('/') || 'static';
    };
    CacheBust.invalidateCache = function (reqs, user) {
        for (var _i = 0, _a = CacheBust.getCacheInvalidations(reqs); _i < _a.length; _i++) {
            var item = _a[_i];
            localStorage.setItem("cache-bust-" + user + "-" + item, '' + Date.now());
        }
    };
    CacheBust.getInvolvedItems = function (table, query, includes) {
        var hasEdgesFrom = query.hasEdgesFrom;
        var relatedTables = includes
            .map(function (label) { return kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_0__["tables"][table].relationships[label]; })
            .filter(function (table) { return !!table; });
        if (hasEdgesFrom)
            relatedTables.push("hef" + table);
        return [table, 'master', query.branchId].filter(function (x) { return !!x; }).concat(relatedTables).sort();
    };
    CacheBust.getCacheInvalidations = function (reqs) {
        var invalidationSet = {};
        reqs.forEach(function (req) {
            switch (req.op) {
                case 'add':
                case 'put':
                case 'delete':
                case 'update':
                    invalidationSet[req.table] = true;
                    break;
                case 'link':
                case 'unlink':
                case 'undo-link':
                    invalidationSet[req.sourceTable] = true;
                    invalidationSet["hef-" + Object(_utils__WEBPACK_IMPORTED_MODULE_1__["getTableFromLabel"])(req.sourceTable, req.label)] = true;
                    break;
                case 'clear-branch':
                    invalidationSet[req.branchId] = true;
                    break;
                case 'merge':
                    invalidationSet[req.branchId] = true;
                    invalidationSet[req.targetBranchId || "master"] = true;
                    break;
            }
        });
        return Object.keys(invalidationSet);
    };
    return CacheBust;
}());

//# sourceMappingURL=cache-bust.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/delta-collection/apply-mutations-on-deltas.js":
/*!**********************************************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/delta-collection/apply-mutations-on-deltas.js ***!
  \**********************************************************************************************/
/*! exports provided: applyMutationsOnDeltas */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "applyMutationsOnDeltas", function() { return applyMutationsOnDeltas; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _delta_merge__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../delta-merge */ "./kedbackend/js/dist/js/ked-backend-repo/delta-merge.js");


function applyMutationsOnDeltas(branchId, deltas, mutations, optimistic, userDisplayName, hasAdditionalFilter) {
    var _loop_1 = function (m) {
        switch (m.op) {
            case 'add-related':
                //
                // AddRelated RepoMutation
                //
                if (!hasAdditionalFilter && m.branchId === branchId) {
                    deltas = [{
                            type: 'add',
                            sourceId: m.id,
                            targetId: m.relatedDoc.id,
                            label: m.graphProp,
                            sourceTable: m.table,
                            $meta: optimistic ? 'adding' : 'persisted',
                            dateTime: Date.now(),
                            targetName: m.relatedDoc.name,
                            contributor: userDisplayName
                        }].concat(deltas);
                }
                break;
            case 'clear-branch':
                //
                // ClearBranch RepoMutation
                //
                if (m.branchId === branchId) {
                    deltas = [];
                }
                break;
            case 'delete':
                //
                // Delete RepoMutation
                //
                // This type of mutation can not be performed onto branches. There's no branchId property on m.
                break;
            case 'merge':
                //
                // Merge RepoMutation
                //
                if (m.branchId === branchId) {
                    deltas = [];
                }
                else if (m.targetBranchId === branchId) {
                    // This change will append new deltas to our deltas array but we don't know what would come.
                    // Need to refetch from server.
                    if (!optimistic)
                        return { value: null }; // Caller should check for null and re-fetch data from server.
                }
                break;
            case 'remove-related':
                //
                // Remove-Related RepoMutation
                //
                if (hasAdditionalFilter || m.branchId !== branchId)
                    return "continue";
                deltas = [{
                        type: 'remove',
                        sourceId: m.id,
                        targetId: m.relatedDoc.id,
                        targetName: m.relatedDoc.name,
                        label: m.graphProp,
                        sourceTable: m.table,
                        contributor: userDisplayName,
                        dateTime: Date.now(),
                        $meta: optimistic ? 'adding' : 'persisted'
                    }].concat(deltas);
                break;
            case 'undo-link':
                //
                // Undo-Link RepoMutation
                //
                if (m.branchId !== branchId)
                    return "continue";
                {
                    var idx = deltas.findIndex(function (d) {
                        return (d.type === 'add' || d.type === 'remove' || d.type === 'undo-link') &&
                            d.sourceId === m.id &&
                            d.targetId === m.relatedId;
                    });
                    if (idx < 0)
                        return "continue";
                    // Found an "add" or "remove" delta to change:
                    if (optimistic) {
                        var deltaRelation = deltas[idx];
                        // Mark the existing add/remove delta as currenlty being deleted
                        deltas = deltas.slice(0, idx).concat([
                            tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, deltaRelation, { $meta: optimistic ? 'removing' : 'persisted' })
                        ], deltas.slice(idx + 1));
                    }
                    else {
                        // Persisted. Just remove it:
                        deltas = deltas.slice(0, idx).concat(deltas.slice(idx + 1));
                    }
                }
                break;
            case 'update':
                //
                // Update RepoMutation
                //
                if (m.branchId !== branchId)
                    return "continue";
                {
                    var idx = deltas.findIndex(function (delta) {
                        return delta.type === 'modify' &&
                            delta.targetId === m.id;
                    });
                    if (idx < 0 && !hasAdditionalFilter) {
                        deltas = [{
                                type: 'modify',
                                table: m.table,
                                targetId: m.id,
                                targetName: m.targetName,
                                data: m.deltaDoc,
                                dateTime: Date.now(),
                                contributors: [userDisplayName],
                                $meta: optimistic ? 'adding' : 'persisted',
                            }].concat(deltas);
                    }
                    else {
                        var existingDeltaDoc = deltas[idx];
                        var contributors = existingDeltaDoc.contributors.slice();
                        if (!contributors.includes(userDisplayName)) {
                            contributors.push(userDisplayName);
                        }
                        var newData = Object(_delta_merge__WEBPACK_IMPORTED_MODULE_1__["mergeDeltas"])(existingDeltaDoc.data, m.deltaDoc, { removeUnsetProps: true });
                        if (!optimistic && Object.keys(newData).length === 0) {
                            // Committed mutation that resets a deltaDoc. Remove the deltaDoc entirely:
                            deltas = deltas.slice(0, idx).concat(deltas.slice(idx + 1));
                        }
                        else {
                            // 
                            deltas = [
                                {
                                    type: 'modify',
                                    table: m.table,
                                    targetId: m.id,
                                    targetName: m.targetName,
                                    data: newData,
                                    dateTime: Date.now(),
                                    contributors: contributors,
                                    $meta: optimistic ? 'updating' : 'persisted',
                                }
                            ].concat(deltas.slice(0, idx), deltas.slice(idx + 1));
                        }
                    }
                }
                break;
        }
    };
    for (var _i = 0, mutations_1 = mutations; _i < mutations_1.length; _i++) {
        var m = mutations_1[_i];
        var state_1 = _loop_1(m);
        if (typeof state_1 === "object")
            return state_1.value;
    }
    return deltas;
}
//# sourceMappingURL=apply-mutations-on-deltas.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/delta-collection/delta-cache.js":
/*!********************************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/delta-collection/delta-cache.js ***!
  \********************************************************************************/
/*! exports provided: DeltaCache */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DeltaCache", function() { return DeltaCache; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _ked_backend_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../ked-backend-client */ "./kedbackend/js/dist/js/ked-backend-client/index.js");
/* harmony import */ var _apply_mutations_on_deltas__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./apply-mutations-on-deltas */ "./kedbackend/js/dist/js/ked-backend-repo/delta-collection/apply-mutations-on-deltas.js");



var DeltaCache = /** @class */ (function () {
    function DeltaCache(getClient, getUser, getUserDisplayName) {
        this.getClient = getClient;
        this.getUser = getUser;
        this.getUserDisplayName = getUserDisplayName;
        this.lookup = {};
    }
    DeltaCache.prototype.applyMutations = function (mutations, _a) {
        var optimistic = (_a === void 0 ? { optimistic: false } : _a).optimistic;
        // Apply mutations locally onto the DeltaCache and notify their subscribers
        for (var _i = 0, _b = Object.keys(this.lookup); _i < _b.length; _i++) {
            var queryKey = _b[_i];
            var cacheEntry = this.lookup[queryKey];
            if (cacheEntry.value) {
                // Instead here: Store the mutations on cacheEntry. No matter if it yet has value or not.
                // Then apply mutation whenever subscribing! (Better handling of mutations that arrives before fetch() is done)
                // (See how I handle this in query-set.ts)
                var newValue = Object(_apply_mutations_on_deltas__WEBPACK_IMPORTED_MODULE_2__["applyMutationsOnDeltas"])(cacheEntry.query.branchId, cacheEntry.value, mutations, optimistic, this.getUserDisplayName(), !!cacheEntry.query.tags);
                if (newValue === null) {
                    // The mutation requires cacheEntry to be refetched from server
                    if (!optimistic) {
                        // Caller has successfully performed the mutations and got success back from server.
                        // It's ok to refetch the deltas from server now:
                        cacheEntry.fetch();
                        // After fetch completes, it will notify the subscribers.
                    }
                }
                if (newValue !== cacheEntry.value) {
                    cacheEntry.optimisticValue = newValue;
                    if (!optimistic)
                        cacheEntry.value = newValue;
                    cacheEntry.notify(newValue);
                }
            }
        }
    };
    DeltaCache.prototype.subscribe = function (query, observer) {
        var _this = this;
        var cacheEntry = this.lookup[query.branchId + query.tags];
        if (!cacheEntry) {
            cacheEntry = new DeltaCacheEntry(this.getClient(), query);
            this.lookup[query.branchId + query.tags] = cacheEntry;
        }
        if (cacheEntry.cleanupTimer) {
            clearTimeout(cacheEntry.cleanupTimer);
            cacheEntry.cleanupTimer = null;
        }
        var subscription = {
            unsubscribe: function () {
                cacheEntry.subscribers = cacheEntry.subscribers.filter(function (_a) {
                    var o = _a.observer;
                    return o !== observer;
                });
                if (cacheEntry.subscribers.length === 0) {
                    cacheEntry.cleanupTimer = setTimeout(function () {
                        if (cacheEntry.subscribers.length === 0) {
                            delete _this.lookup[query.branchId + query.tags];
                        }
                    }, 100);
                }
            }
        };
        cacheEntry.subscribers.push({ observer: observer, subscription: subscription });
        if (cacheEntry.value) {
            // Value has been successfully retrieved already. Pick from cache.
            observer(cacheEntry.optimisticValue || cacheEntry.value, null, subscription);
        }
        else if (cacheEntry.isFetching) {
            // A value is on its way. Sit back and relax. All registered
            // observers (including this one) will be notified when data arrives
            // or fails.
        }
        else if (cacheEntry.error) {
            observer(null, cacheEntry.error, subscription);
        }
        else {
            cacheEntry.fetch();
        }
        return subscription;
    };
    return DeltaCache;
}());

var DeltaCacheEntry = /** @class */ (function () {
    function DeltaCacheEntry(client, query) {
        this.fetchOperationId = 0; // Makes sure a re-fetch will discard the result from any ongoing fetch.
        this.client = client;
        this.query = query;
        this.value = null;
        this.error = null;
        this.optimisticValue = null;
        this.subscribers = [];
        this.isFetching = false;
        this.cleanupTimer = null;
    }
    DeltaCacheEntry.prototype.fetch = function () {
        var _this = this;
        var fetchOperationId = ++this.fetchOperationId;
        this.isFetching = true;
        this.fetchFromServer().then(function (value) {
            // Success
            if (fetchOperationId === _this.fetchOperationId) {
                _this.isFetching = false;
                value.sort(function (a, b) { return b.dateTime - a.dateTime; }); // Latest first
                _this.value = value;
                _this.optimisticValue = value;
                _this.notify(value);
            }
        }).catch(function (error) {
            // Fail
            if (fetchOperationId === _this.fetchOperationId) {
                _this.isFetching = false;
                _this.error = error;
                _this.fail(error);
            }
        });
    };
    DeltaCacheEntry.prototype.fetchFromServer = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        if (!this.query.branchId)
                            throw new Error('Deltas only available on branches');
                        return [4 /*yield*/, this.client.http.get('deltas', this.query)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status >= 300 || res.status < 200)) return [3 /*break*/, 3];
                        _a = _ked_backend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(_ked_backend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4: return [2 /*return*/, _c.sent()];
                }
            });
        });
    };
    DeltaCacheEntry.prototype.notify = function (value) {
        for (var _i = 0, _a = this.subscribers; _i < _a.length; _i++) {
            var _b = _a[_i], observer = _b.observer, subscription = _b.subscription;
            observer(value, null, subscription);
        }
    };
    DeltaCacheEntry.prototype.fail = function (error) {
        var copy = this.subscribers.slice();
        this.subscribers = [];
        for (var _i = 0, copy_1 = copy; _i < copy_1.length; _i++) {
            var _a = copy_1[_i], observer = _a.observer, subscription = _a.subscription;
            observer(null, error, subscription);
        }
    };
    return DeltaCacheEntry;
}());
//# sourceMappingURL=delta-cache.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/delta-collection/delta-collection.js":
/*!*************************************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/delta-collection/delta-collection.js ***!
  \*************************************************************************************/
/*! exports provided: DeltaCollection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DeltaCollection", function() { return DeltaCollection; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _observable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../observable */ "./kedbackend/js/dist/js/observable/index.js");


var DeltaCollection = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](DeltaCollection, _super);
    function DeltaCollection(deltaCache, query) {
        var _this = _super.call(this, function (observer) { return _this.deltaCache.subscribe(query, observer); }) || this;
        _this.deltaCache = deltaCache;
        _this.query = query;
        return _this;
    }
    DeltaCollection.prototype.tags = function () {
        var tags = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            tags[_i] = arguments[_i];
        }
        return new DeltaCollection(this.deltaCache, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.query, { tags: tags }));
    };
    return DeltaCollection;
}(_observable__WEBPACK_IMPORTED_MODULE_1__["Collection"]));

//# sourceMappingURL=delta-collection.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/delta-merge.js":
/*!***************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/delta-merge.js ***!
  \***************************************************************/
/*! exports provided: applyDelta, mergeDeltas */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "applyDelta", function() { return applyDelta; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mergeDeltas", function() { return mergeDeltas; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");

function applyDelta(doc, delta) {
    var keys = Object.keys(delta);
    var targetDoc = doc;
    for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {
        var key = keys_1[_i];
        if (targetDoc === doc)
            targetDoc = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, doc);
        var val = delta[key];
        if (val && typeof val === 'object') {
            var metaInstructions = Object.keys(val)
                .filter(function (key) { return key.startsWith('$'); });
            if (metaInstructions.length > 0) {
                var _loop_1 = function (mi) {
                    var miValue = val[mi];
                    switch (mi) {
                        case "$unset": {
                            // Do nothing on target doc!
                            targetDoc.$wasUnset = true; // Just mark it for re-retrieval after successful posting changes.
                            break;
                        }
                        case "$add": {
                            var valuesToAdd = miValue;
                            if (!Array.isArray(valuesToAdd)) {
                                throw new Error("$add instruction must contain array");
                            }
                            var targetArray = targetDoc[key];
                            if (!Array.isArray(targetArray)) {
                                targetArray = [];
                            }
                            else {
                                targetArray = targetArray.slice(); // On JS side, we must be immutable
                            }
                            targetDoc[key] = targetArray;
                            for (var _i = 0, valuesToAdd_1 = valuesToAdd; _i < valuesToAdd_1.length; _i++) {
                                var v = valuesToAdd_1[_i];
                                if (!targetArray.includes(v)) { // avoid dups
                                    targetArray.push(v);
                                }
                            }
                            break;
                        }
                        case "$remove": {
                            var valuesToRemove_1 = miValue;
                            if (!Array.isArray(valuesToRemove_1)) {
                                throw new Error("$remove instruction must contain array");
                            }
                            var targetArray = targetDoc[key];
                            if (!Array.isArray(targetArray)) {
                                targetArray = [];
                            }
                            targetDoc[key] = targetArray.filter(function (t) { return !valuesToRemove_1.includes(t); });
                            break;
                        }
                    }
                };
                for (var _a = 0, metaInstructions_1 = metaInstructions; _a < metaInstructions_1.length; _a++) {
                    var mi = metaInstructions_1[_a];
                    _loop_1(mi);
                }
                continue;
            }
        }
        targetDoc[key] = val;
    }
    return targetDoc;
}
// {name: "Ulla"}, {name: {$unset:0}
// {tags: {$add: "hej"}}, {tags: {$unset:0}"}
function mergeDeltas(delta1, delta2, _a) {
    var removeUnsetProps = (_a === void 0 ? { removeUnsetProps: false } : _a).removeUnsetProps;
    //return {...delta1, ...delta2};
    var keys = Object.keys(delta2);
    var targetDelta = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, delta1);
    for (var _i = 0, keys_2 = keys; _i < keys_2.length; _i++) {
        var key = keys_2[_i];
        var val = delta2[key];
        if (val && typeof val === 'object') {
            var metaInstructions = Object.keys(val)
                .filter(function (key) { return key.startsWith('$'); });
            if (metaInstructions.length > 0) {
                var _loop_2 = function (mi) {
                    var miValue = val[mi];
                    switch (mi) {
                        case "$unset": {
                            if (removeUnsetProps) {
                                delete targetDelta[key];
                            }
                            else {
                                // No matter if targetDelta is empty or has value. Set it to {$unset:0}
                                // to make sure the very end result will have {$unset:0}
                                targetDelta[key] = { $unset: 0 };
                            }
                            break;
                        }
                        case "$add": {
                            var valuesToAdd_2 = miValue;
                            if (!Array.isArray(valuesToAdd_2)) {
                                throw new Error("$add instruction must contain array");
                            }
                            var targetMetaProp = targetDelta[key];
                            targetMetaProp = targetMetaProp ? tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, targetMetaProp) : {};
                            targetDelta[key] = targetMetaProp;
                            // First, just check if target metaProp has {$remove: [...items]}
                            // If so, remove any equal items from there before merging the {$add: [...]} arrays.
                            var targetRemoveArray = targetMetaProp.$remove;
                            if (Array.isArray(targetRemoveArray)) {
                                targetMetaProp.$remove =
                                    targetRemoveArray.filter(function (t) { return !valuesToAdd_2.includes(t); });
                                if (targetMetaProp.$remove.length === 0) {
                                    // If $remove array became emtpy. Remove the $remove prop.
                                    delete targetMetaProp.$remove;
                                }
                            }
                            // Now it's time to merge or create target $add array.
                            var targetAddArray = targetMetaProp.$add;
                            targetAddArray = targetAddArray ? targetAddArray.concat(valuesToAdd_2) : valuesToAdd_2.slice();
                            targetMetaProp.$add = targetAddArray;
                            break;
                        }
                        case "$remove": {
                            var valuesToRemove_2 = miValue;
                            if (!Array.isArray(valuesToRemove_2)) {
                                throw new Error("$remove instruction must contain array");
                            }
                            var targetMetaProp = targetDelta[key];
                            targetMetaProp = targetMetaProp ? tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, targetMetaProp) : {};
                            targetDelta[key] = targetMetaProp;
                            // First, just check if target metaProp has {$add: [...items]}
                            // If so, remove any equal items from there before merging the {$remove: [...]} arrays.
                            var targetAddArray = targetMetaProp.$remove;
                            if (Array.isArray(targetAddArray)) {
                                targetMetaProp.$add =
                                    targetAddArray.filter(function (t) { return !valuesToRemove_2.includes(t); });
                                if (targetMetaProp.$add.length === 0) {
                                    // If $add array became emtpy. Remove the $add prop.
                                    delete targetMetaProp.$add;
                                }
                            }
                            // Now it's time to merge or create target $remove array.
                            var targetRemoveArray = targetMetaProp.$remove;
                            targetRemoveArray = targetRemoveArray ? targetRemoveArray.concat(valuesToRemove_2) : valuesToRemove_2.slice();
                            targetMetaProp.$remove = targetRemoveArray;
                            break;
                        }
                    }
                };
                for (var _b = 0, metaInstructions_2 = metaInstructions; _b < metaInstructions_2.length; _b++) {
                    var mi = metaInstructions_2[_b];
                    _loop_2(mi);
                }
                continue;
            }
        }
        targetDelta[key] = val;
    }
    return targetDelta;
}
//# sourceMappingURL=delta-merge.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/index.js":
/*!*********************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/index.js ***!
  \*********************************************************/
/*! exports provided: KedBackendCollection, KedBackendQuery, KedBackendRepo, KedBackendSubscription, KedBackendWriter, MutationQueue, QuerySet, mixin */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _kedbackend_collection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./kedbackend-collection */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-collection.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendCollection", function() { return _kedbackend_collection__WEBPACK_IMPORTED_MODULE_0__["KedBackendCollection"]; });

/* harmony import */ var _kedbackend_query__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./kedbackend-query */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-query.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendQuery", function() { return _kedbackend_query__WEBPACK_IMPORTED_MODULE_1__["KedBackendQuery"]; });

/* harmony import */ var _kedbackend_repo__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./kedbackend-repo */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-repo.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendRepo", function() { return _kedbackend_repo__WEBPACK_IMPORTED_MODULE_2__["KedBackendRepo"]; });

/* harmony import */ var _kedbackend_subscription__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./kedbackend-subscription */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-subscription.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendSubscription", function() { return _kedbackend_subscription__WEBPACK_IMPORTED_MODULE_3__["KedBackendSubscription"]; });

/* harmony import */ var _kedbackend_writer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./kedbackend-writer */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-writer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendWriter", function() { return _kedbackend_writer__WEBPACK_IMPORTED_MODULE_4__["KedBackendWriter"]; });

/* harmony import */ var _mutation_queue__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./mutation-queue */ "./kedbackend/js/dist/js/ked-backend-repo/mutation-queue.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MutationQueue", function() { return _mutation_queue__WEBPACK_IMPORTED_MODULE_5__["MutationQueue"]; });

/* harmony import */ var _query_set__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./query-set */ "./kedbackend/js/dist/js/ked-backend-repo/query-set.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "QuerySet", function() { return _query_set__WEBPACK_IMPORTED_MODULE_6__["QuerySet"]; });

/* harmony import */ var _observable_mixin__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../observable/mixin */ "./kedbackend/js/dist/js/observable/mixin.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "mixin", function() { return _observable_mixin__WEBPACK_IMPORTED_MODULE_7__["mixin"]; });









//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-collection.js":
/*!*************************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/kedbackend-collection.js ***!
  \*************************************************************************/
/*! exports provided: KedBackendCollection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedBackendCollection", function() { return KedBackendCollection; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _ked_backend_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ked-backend-client */ "./kedbackend/js/dist/js/ked-backend-client/index.js");
/* harmony import */ var _kedbackend_subscription__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./kedbackend-subscription */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-subscription.js");
/* harmony import */ var _cache_bust__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./cache-bust */ "./kedbackend/js/dist/js/ked-backend-repo/cache-bust.js");
/* harmony import */ var _kedbackend_query__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./kedbackend-query */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-query.js");
/* harmony import */ var _observable_collection__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../observable/collection */ "./kedbackend/js/dist/js/observable/collection.js");






/**
 * Represents a "live" query against a table or filtered table.
 */
var KedBackendCollection = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](KedBackendCollection, _super);
    function KedBackendCollection(repo, table, query) {
        var _this = _super.call(this, function (observer) {
            var subscription = new _kedbackend_subscription__WEBPACK_IMPORTED_MODULE_2__["KedBackendSubscription"](observer, _this);
            _this.repo.querySet.subscribe(subscription);
            return subscription;
        }) || this;
        _this.repo = repo;
        _this.table = table;
        _this.query = query;
        return _this;
    }
    Object.defineProperty(KedBackendCollection.prototype, "queryKey", {
        get: function () {
            return _kedbackend_query__WEBPACK_IMPORTED_MODULE_4__["KedBackendQuery"].queryKey(this.table, this.query);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(KedBackendCollection.prototype, "includes", {
        get: function () {
            return this._includes || (this._includes = [].concat(this.query.include || []));
        },
        enumerable: true,
        configurable: true
    });
    KedBackendCollection.prototype.applyQuery = function (query) {
        return new KedBackendCollection(this.repo, this.table, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.query, query));
    };
    KedBackendCollection.prototype.addToQueryArrayProp = function (arrayProp, entries) {
        var _a;
        return this.applyQuery((_a = {}, _a[arrayProp] = (this.query[arrayProp] || []).concat(entries), _a));
    };
    KedBackendCollection.prototype.addFlags = function () {
        var flags = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            flags[_i] = arguments[_i];
        }
        return this.addToQueryArrayProp("flags", flags);
    };
    KedBackendCollection.prototype.debug = function () {
        return this.applyQuery({ debug: true });
    };
    KedBackendCollection.prototype.idsOnly = function () {
        return this.addFlags("idsOnly");
    };
    KedBackendCollection.prototype.idsAndNamesOnly = function () {
        return this.addFlags("idsAndNamesOnly");
    };
    KedBackendCollection.prototype.includeIdsOnly = function () {
        return this.addFlags("includeIdsOnly");
    };
    KedBackendCollection.prototype.includeIdsAndNamesOnly = function () {
        return this.addFlags("includeIdsAndNamesOnly");
    };
    KedBackendCollection.prototype.between = function (from, to) {
        return this.applyQuery({ from: from, to: to });
    };
    KedBackendCollection.prototype.role = function (role) {
        return this.applyQuery({ role: role });
    };
    KedBackendCollection.prototype.hasEdgesFrom = function (ids) {
        if (ids.length === 0 || ids.some(function (id) { return !id; }))
            throw new Error("Invalid id list given to Collection.hasEdgesFrom(" + JSON.stringify(ids) + ")");
        var hef = this.addToQueryArrayProp("hasEdgesFrom", ids);
        return hef;
    };
    KedBackendCollection.prototype.hasEdgesTo = function (ids) {
        if (ids.length === 0 || ids.some(function (id) { return !id; }))
            throw new Error("Invalid id list given to Collection.hasEdgesTo(" + JSON.stringify(ids) + ")");
        var het = this.addToQueryArrayProp("hasEdgesTo", ids);
        return het;
    };
    KedBackendCollection.prototype.id = function (id) {
        var _this = this;
        return this.applyQuery({ ids: [id] }).single({
            onZero: function () { throw new Error("Could not find entity in " + _this.table + " with id " + id); },
            onMany: function () { throw new Error("Multiple entries in " + _this.table + " with id " + id); },
        });
    };
    KedBackendCollection.prototype.ids = function (ids) {
        return this.applyQuery({ ids: ids });
    };
    KedBackendCollection.prototype.name = function (name) {
        return this.applyQuery({ name: name });
    };
    KedBackendCollection.prototype.tags = function () {
        var tags = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            tags[_i] = arguments[_i];
        }
        return this.applyQuery({ tags: tags });
    };
    KedBackendCollection.prototype.branchId = function (branchId) {
        return this.applyQuery({ branchId: branchId });
    };
    KedBackendCollection.prototype.include = function () {
        var graphs = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            graphs[_i] = arguments[_i];
        }
        return this.addToQueryArrayProp("include", graphs);
    };
    KedBackendCollection.prototype.cacheOptimized = function () {
        return this.applyQuery({ cacheBust: _cache_bust__WEBPACK_IMPORTED_MODULE_3__["CacheBust"].getCacheBust(this.table, this.query, this.repo.getUser(), this.includes) });
    };
    KedBackendCollection.prototype.mutationsOnEmpty = function (mutationFactory) {
        var tx = new _ked_backend_client__WEBPACK_IMPORTED_MODULE_1__["BatchRunner"]();
        mutationFactory(tx);
        return this.applyQuery({ mutationsOnEmpty: tx.mutationRequests });
    };
    KedBackendCollection.prototype.single = function (throwers) {
        var _this = this;
        var _a = throwers || {}, onZero = _a.onZero, onMany = _a.onMany;
        return this.toValue().map(function (items) {
            if (items.length === 0) {
                if (onZero)
                    onZero();
                else
                    throw new Error("Single item of " + _this.table + " expected to be returned by query " + JSON.stringify(_this.query) + " but none was found.");
            }
            if (items.length > 1) {
                debugger;
                if (onMany)
                    onMany();
                else
                    console.log("Single item of " + _this.table + " expected to be returned by query " + JSON.stringify(_this.query) + " but " + items.length + " was found.");
            }
            return items[0];
        });
    };
    /*combineLatest<TOther>(other: QueryObservable<TOther>) {
      return this.render(x => x).combineLatest(other);
    }*/
    KedBackendCollection.prototype.update = function (doc, changes, debounce) {
        if (debounce === void 0) { debounce = 1000; }
        this.repo.writer.mutate([{
                op: 'update',
                table: this.table,
                branchId: this.query.branchId,
                id: doc.id,
                deltaDoc: changes,
                targetName: doc.name
            }], debounce);
    };
    KedBackendCollection.prototype.addRelated = function (id, label, relatedDoc) {
        this.repo.writer.mutate([{
                op: 'add-related',
                table: this.table,
                branchId: this.query.branchId,
                id: id,
                graphProp: label,
                relatedDoc: relatedDoc
            }], 0);
    };
    KedBackendCollection.prototype.removeRelated = function (id, label, relatedDoc) {
        this.repo.writer.mutate([{
                op: 'remove-related',
                table: this.table,
                branchId: this.query.branchId,
                id: id,
                graphProp: label,
                relatedDoc: relatedDoc
            }], 0);
    };
    KedBackendCollection.prototype.undoLink = function (id, label, relatedId) {
        if (!this.query.branchId)
            throw new Error("undo links can only be performed on branches");
        this.repo.writer.mutate([{
                op: 'undo-link',
                table: this.table,
                branchId: this.query.branchId,
                id: id,
                graphProp: label,
                relatedId: relatedId
            }], 0);
    };
    KedBackendCollection.prototype.delete = function () {
        var _this = this;
        var ids = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            ids[_i] = arguments[_i];
        }
        this.repo.writer.mutate(ids.map(function (id) { return ({
            op: 'delete',
            table: _this.table,
            id: id
        }); }), 0);
    };
    KedBackendCollection.prototype.unsubscribe = function (subscription) {
        this.repo.querySet.unsubscribe(subscription);
    };
    return KedBackendCollection;
}(_observable_collection__WEBPACK_IMPORTED_MODULE_5__["Collection"]));

/*mixin(
  KedBackendCollection.prototype,
  MappedCollection.prototype,
  "map", "flat", "concat", "render", "load");*/
//# sourceMappingURL=kedbackend-collection.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-query.js":
/*!********************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/kedbackend-query.js ***!
  \********************************************************************/
/*! exports provided: KedBackendQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedBackendQuery", function() { return KedBackendQuery; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ked-backend-client/utils */ "./kedbackend/js/dist/js/ked-backend-client/utils.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ "./kedbackend/js/dist/js/ked-backend-repo/utils.js");
/* harmony import */ var _delta_merge__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./delta-merge */ "./kedbackend/js/dist/js/ked-backend-repo/delta-merge.js");




var KedBackendQuery = /** @class */ (function () {
    function KedBackendQuery(table, query, user, repo, mutationQueue) {
        this.table = table;
        this.query = query;
        this.user = user;
        this.repo = repo;
        this.mutationQueue = mutationQueue;
        this.subscriptions = [];
        this.data = [];
        this.gotInitialResponse = false;
        this.invalid = false;
        this.loadedVersion = 0;
        this._loadPromise = null;
        this.includes = query.include ?
            typeof query.include === 'string' ?
                [query.include] :
                query.include :
            [];
    }
    KedBackendQuery.queryKey = function (table, query) {
        var mutationsOnEmpty = query.mutationsOnEmpty, comparableProps = tslib__WEBPACK_IMPORTED_MODULE_0__["__rest"](query, ["mutationsOnEmpty"]);
        return table + JSON.stringify(comparableProps);
    };
    Object.defineProperty(KedBackendQuery.prototype, "queryKey", {
        get: function () {
            return KedBackendQuery.queryKey(this.table, this.query);
        },
        enumerable: true,
        configurable: true
    });
    KedBackendQuery.prototype.subscribe = function (subscription) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var data, data;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.subscriptions.push(subscription);
                        if (!(this.gotInitialResponse && !this.invalid)) return [3 /*break*/, 1];
                        data = this.getDataWithMutationsApplied(this.mutationQueue.get(), true, this.data);
                        subscription.notifySubscriber(data, this.error);
                        return [3 /*break*/, 4];
                    case 1:
                        data = this.queryLocally();
                        if (!data) return [3 /*break*/, 2];
                        this.data = data;
                        this.error = null;
                        subscription.notifySubscriber(data, this.error);
                        return [3 /*break*/, 4];
                    case 2: return [4 /*yield*/, this.load()];
                    case 3:
                        _a.sent();
                        _a.label = 4;
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    KedBackendQuery.prototype.load = function (version) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var loadPromise;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (this.gotInitialResponse) {
                            // mutationsOnEmpty should never be used twice.
                            delete this.query.mutationsOnEmpty;
                        }
                        if (!(!version && this._loadPromise)) return [3 /*break*/, 2];
                        return [4 /*yield*/, this._loadPromise];
                    case 1: 
                    // loading is ongoing, and caller does not require a recent refresh.
                    // wait for the ongoing load to complete
                    return [2 /*return*/, _a.sent()];
                    case 2:
                        version = version || this.repo.writer.persistedVersion.value;
                        loadPromise = this._loadPromise = this._load(version).then(function (data) {
                            if (_this._loadPromise === loadPromise) {
                                _this.data = data;
                                _this.loadedVersion = Math.max(_this.loadedVersion, version);
                            }
                        }).catch(function (error) {
                            if (_this._loadPromise === loadPromise) {
                                // Noone has refreshed our load. The error is the final result. Set it.
                                _this.error = error;
                            }
                        }).then(function () {
                            if (_this._loadPromise === loadPromise) {
                                // Noone has refreshed our load. We're finished. Data or error is already set.
                                // Mark gotInitialResponse to true and notify subscribers.
                                _this._loadPromise = null;
                                _this.gotInitialResponse = true;
                                _this.notifySubscribers(_this.mutationQueue.get());
                            }
                            else {
                                // A more recent call to load() is ongoing, OR was ongoing but responded
                                // before us.
                                // In any case return this._loadPromise. If it's ongoing we'll wait for it
                                // to finish. If it's null, we'll be returning finally here without
                                // any action, because the action was taken by the refresher.
                                return _this._loadPromise; // Wait for the refreshed load to complete
                            }
                        });
                        return [4 /*yield*/, loadPromise];
                    case 3:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    KedBackendQuery.prototype._load = function (version) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!this.mutationQueue.affectsQuery(this.table, this.query, this.includes)) return [3 /*break*/, 2];
                        // There are outgoing mutations that affects this query.
                        // Need to wait till they reach server and server responds with OK before querying
                        // the server. Otherwise, we may get inaccurate data from server.
                        return [4 /*yield*/, this.repo.writer.waitForVersionToPersist(version)];
                    case 1:
                        // There are outgoing mutations that affects this query.
                        // Need to wait till they reach server and server responds with OK before querying
                        // the server. Otherwise, we may get inaccurate data from server.
                        _a.sent();
                        _a.label = 2;
                    case 2: return [4 /*yield*/, this.queryServer()];
                    case 3: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    KedBackendQuery.prototype.unsubscribe = function (subscription) {
        this.subscriptions = this.subscriptions.filter(function (s) { return s !== subscription; });
    };
    KedBackendQuery.prototype.commitMutations = function (mutations, version) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _i, mutations_1, m, data;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!this.data) return [3 /*break*/, 9];
                        _i = 0, mutations_1 = mutations;
                        _a.label = 1;
                    case 1:
                        if (!(_i < mutations_1.length)) return [3 /*break*/, 8];
                        m = mutations_1[_i];
                        if (!(m.op === 'clear-branch' && (m.branchId === this.query.branchId))) return [3 /*break*/, 3];
                        return [4 /*yield*/, this.refreshOrInvalidate(version)];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                    case 3:
                        if (!(m.op === 'merge' && (!m.targetBranchId ||
                            m.branchId === this.query.branchId ||
                            m.targetBranchId === this.query.branchId))) return [3 /*break*/, 5];
                        return [4 /*yield*/, this.refreshOrInvalidate(version)];
                    case 4:
                        _a.sent();
                        return [2 /*return*/];
                    case 5:
                        if (!(m.op === 'update' && ((m.deltaDoc.tags && this.query.tags) ||
                            (m.deltaDoc.name && this.query.name)))) return [3 /*break*/, 7];
                        // A tag may have been added, or renamed, and
                        // the query is dependent on the same property.
                        // The query must be refreshed from server as we cannot
                        // commit the mutations locally as we don't have all info.
                        return [4 /*yield*/, this.refreshOrInvalidate(version)];
                    case 6:
                        // A tag may have been added, or renamed, and
                        // the query is dependent on the same property.
                        // The query must be refreshed from server as we cannot
                        // commit the mutations locally as we don't have all info.
                        _a.sent();
                        return [2 /*return*/];
                    case 7:
                        _i++;
                        return [3 /*break*/, 1];
                    case 8:
                        data = this.getDataWithMutationsApplied(mutations, false, this.data);
                        this.data = data;
                        _a.label = 9;
                    case 9: return [2 /*return*/];
                }
            });
        });
    };
    KedBackendQuery.prototype.refreshOrInvalidate = function (version) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!(this.subscriptions.length === 0)) return [3 /*break*/, 1];
                        this.invalid = true;
                        return [3 /*break*/, 3];
                    case 1: return [4 /*yield*/, this.load(version)];
                    case 2:
                        _a.sent();
                        _a.label = 3;
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    KedBackendQuery.prototype.notifySubscribers = function (optimisticMutations) {
        var _this = this;
        if (this.data && this.gotInitialResponse) {
            var data_1 = this.getDataWithMutationsApplied(optimisticMutations, true, this.data);
            this.subscriptions.forEach(function (s) {
                s.notifySubscriber(data_1, _this.error);
            });
        }
    };
    KedBackendQuery.prototype.queryLocally = function () {
        return this.repo.querySet.queryLocally(this.table, this.query, this.includes);
    };
    KedBackendQuery.prototype.queryServer = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var data;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.repo.getClient().list(this.table, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.query))];
                    case 1:
                        data = _a.sent();
                        return [2 /*return*/, data];
                }
            });
        });
    };
    KedBackendQuery.prototype.getDataWithMutationsApplied = function (mutations, optimistic, data) {
        var _this = this;
        mutations.forEach(function (mutation) {
            data = _this.applyMutationsOnData(data, mutation, optimistic);
        });
        return data;
    };
    KedBackendQuery.prototype.applyMutationsOnData = function (data, m, optimistic) {
        if (Object(_utils__WEBPACK_IMPORTED_MODULE_2__["branchSensitive"])(m) && m.branchId != this.query.branchId)
            return data;
        var _a = this, table = _a.table, includes = _a.includes, listOptions = _a.query;
        var sourceIds = listOptions.hasEdgesFrom ? [].concat(listOptions.hasEdgesFrom || []) : [];
        var requestedTags = listOptions.tags ? [].concat(listOptions.tags || []) : [];
        switch (m.op) {
            case 'update': {
                return Object(_ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_1__["updateArray"])(data, function (doc) {
                    if (doc.id === m.id) {
                        // Apply delta on updated document
                        var updatedDoc = Object(_delta_merge__WEBPACK_IMPORTED_MODULE_3__["applyDelta"])(doc, m.deltaDoc);
                        if (optimistic)
                            updatedDoc.$meta = 'updating';
                        return updatedDoc;
                    }
                    // If id does not apply to this doc, search in graphs the id is found
                    // among graph included docs, and if so, update that one:
                    includes.forEach(function (label) {
                        var _a;
                        var includedDocs = doc[label];
                        if (includedDocs) {
                            var updatedArray = Object(_ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_1__["updateArray"])(includedDocs, function (related) {
                                if (related.id !== m.id)
                                    return related;
                                var updatedRelated = Object(_delta_merge__WEBPACK_IMPORTED_MODULE_3__["applyDelta"])(related, m.deltaDoc);
                                if (optimistic)
                                    updatedRelated.$meta = 'updating';
                                return updatedRelated;
                            });
                            if (updatedArray !== includedDocs) {
                                doc = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, doc, (_a = {}, _a[label] = updatedArray, _a));
                            }
                        }
                    });
                    return doc;
                });
            }
            case 'add-related':
                if (table === m.table && includes.indexOf(m.graphProp) !== -1) {
                    // If expression is `db.courseBlocks....whatever.. .include("abilities")`, detect: db.courseBlocks.addRelated(blockId, 'abilities', ...)
                    // ...because table = 'courseBlocks' and includes has "abilities".
                    return Object(_ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_1__["updateArray"])(data, function (doc) {
                        var _a;
                        if (doc.id !== m.id)
                            return doc;
                        var relatedDoc = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, m.relatedDoc);
                        if (optimistic)
                            relatedDoc.$meta = 'adding';
                        return tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, doc, (_a = {}, _a[m.graphProp] = doc[m.graphProp].concat([relatedDoc]), _a));
                    });
                }
                if (listOptions.hasEdgesFrom) {
                    if (sourceIds.includes(m.id)) {
                        // If expression is:
                        //   `db.courseBlocks.hasEdgesFrom([courseId])`  (meaning table='courseBlocks' and sourceIds includes courseId)
                        // , detect: db.courseInstances.addRelated(courseId, 'courseBlocks', ....) // m.graphProp === 'blocks'--> getTableFromLabel --> 'courseBlocks'
                        if (table === Object(_utils__WEBPACK_IMPORTED_MODULE_2__["getTableFromLabel"])(m.table, m.graphProp)) {
                            if (!listOptions.tags)
                                return data.concat(this.setGraphProps(m.relatedDoc));
                            if (m.relatedDoc.tags && requestedTags.some(function (tag) { return m.relatedDoc.tags.includes(tag); })) {
                                return data.concat(this.setGraphProps(m.relatedDoc));
                            }
                        }
                    }
                }
                if (listOptions.ids && listOptions.ids.some(function (id) { return id === m.relatedDoc.id; })) {
                    // A certain ID is observed. A doc with this id is being added.
                    // Add the doc to the result. Exactly this WILL happen in the following typical scenario:
                    // 1. User adds a related document to a list.
                    // 2. Document remains within the MutationQueue while batch-request is being processed by server.
                    // 3. User clicks the added item to edit or view it (or our component redirects to its editor)
                    // 4. A new query of that particular ID is subscribed to {ids=[theId]}
                    //    KedBackendQuery.subscribe then does this:
                    //      1. Call queryLocally() before querying server
                    //      2. queryLocally() inspects mutations and finds a match, returning an empty list
                    //         (assumes as we are adding it, it can't exist on the server anyway)
                    //      3. KedBackendQUery applies mutations onto the empty list, and ends up here to add
                    //         it optimistically.
                    //      4. When server responds with 200 OK, calls us here again with optimistic=false
                    //         to "persist" it in the query's data array.
                    //      4B: If not 200 OK, mutation may be gone and the subscriber will se an error page
                    //         "Could not find entity with id X." along with a red error message on the screen
                    //         about that it failed to save on server.
                    return data.concat(this.setGraphProps(m.relatedDoc));
                }
                return data;
            case 'remove-related':
                if (table === m.table && includes.indexOf(m.graphProp) !== -1) {
                    return Object(_ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_1__["updateArray"])(data, function (doc) {
                        var _a;
                        var includedDocs = doc[m.graphProp];
                        if (!includedDocs)
                            return doc;
                        if (doc.id !== m.id)
                            return doc;
                        return tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, doc, (_a = {}, _a[m.graphProp] = optimistic ?
                            // Mark related-doc-to-remove with $meta: 'deleting'
                            includedDocs.map(function (d) { return d.id !== m.relatedDoc.id ?
                                d : tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, d, { $meta: 'deleting' }); }) :
                            // Delete related-doc-to-remove from doc[grapProp]:
                            includedDocs.filter(function (d) { return d.id !== m.relatedDoc.id; }), _a));
                    });
                }
                if (listOptions.hasEdgesFrom) {
                    if (sourceIds.includes(m.id))
                        return optimistic ?
                            data.map(function (d) { return d.id === m.relatedDoc.id ? tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, d, { $meta: 'deleting' }) : d; }) :
                            data.filter(function (d) { return d.id !== m.relatedDoc.id; });
                }
                return data;
            case 'delete':
                if (table === m.table) {
                    return data.filter(function (d) { return d.id !== m.id; });
                }
                else if (listOptions.include) {
                    var includedTables = includes
                        .map(function (label) { return ({ label: label, table: Object(_utils__WEBPACK_IMPORTED_MODULE_2__["getTableFromLabel"])(table, label) }); });
                    var labels_1 = includedTables.filter(function (_a) {
                        var table = _a.table;
                        return table === m.table;
                    });
                    if (labels_1.length > 0) {
                        return Object(_ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_1__["updateArray"])(data, function (doc) {
                            labels_1.forEach(function (_a) {
                                var label = _a.label;
                                var _b;
                                var relatedDocs = doc[label];
                                if (relatedDocs) {
                                    doc = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, doc, (_b = {}, _b[label] = optimistic ?
                                        relatedDocs.map(function (d) { return d.id === m.id ? tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, d, { $meta: 'deleting' }) : d; }) :
                                        relatedDocs.filter(function (_a) {
                                            var id = _a.id;
                                            return id !== m.id;
                                        }), _b));
                                }
                            });
                            return doc;
                        });
                    }
                }
                return data;
            default:
                return data;
        }
    };
    KedBackendQuery.prototype.setGraphProps = function (doc) {
        var copy = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, doc);
        this.includes.forEach(function (label) { return copy[label] = copy[label] || []; });
        return copy;
    };
    return KedBackendQuery;
}());

//# sourceMappingURL=kedbackend-query.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-repo.js":
/*!*******************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/kedbackend-repo.js ***!
  \*******************************************************************/
/*! exports provided: KedBackendRepo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedBackendRepo", function() { return KedBackendRepo; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json");
var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_1___namespace = /*#__PURE__*/__webpack_require__.t(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json", 1);
/* harmony import */ var _kedbackend_collection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./kedbackend-collection */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-collection.js");
/* harmony import */ var _query_set__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./query-set */ "./kedbackend/js/dist/js/ked-backend-repo/query-set.js");
/* harmony import */ var _mutation_queue__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./mutation-queue */ "./kedbackend/js/dist/js/ked-backend-repo/mutation-queue.js");
/* harmony import */ var _kedbackend_writer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./kedbackend-writer */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-writer.js");
/* harmony import */ var _delta_collection_delta_collection__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./delta-collection/delta-collection */ "./kedbackend/js/dist/js/ked-backend-repo/delta-collection/delta-collection.js");







var KedBackendRepo = /** @class */ (function () {
    function KedBackendRepo(getClient, getUser, getUserDisplayName, defaultQueryOptions, mutationQueue, querySet, writer, cacheOptimized) {
        var _this = this;
        this.getClient = getClient;
        this.getUser = getUser;
        this.getUserDisplayName = getUserDisplayName;
        this.defaultQueryOptions = defaultQueryOptions;
        this.mutationQueue = mutationQueue;
        this.querySet = querySet;
        this.writer = writer;
        this.cacheOptimized = cacheOptimized;
        if (!defaultQueryOptions)
            this.defaultQueryOptions = {};
        if (!mutationQueue)
            this.mutationQueue = new _mutation_queue__WEBPACK_IMPORTED_MODULE_4__["MutationQueue"]();
        if (!querySet)
            this.querySet = new _query_set__WEBPACK_IMPORTED_MODULE_3__["QuerySet"](this.mutationQueue);
        if (!writer)
            this.writer = new _kedbackend_writer__WEBPACK_IMPORTED_MODULE_5__["KedBackendWriter"](this.mutationQueue, this.querySet, getClient, getUser, getUserDisplayName);
        Object.keys(kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_1__["tables"]).forEach(function (table) {
            var collection = new _kedbackend_collection__WEBPACK_IMPORTED_MODULE_2__["KedBackendCollection"](_this, table, defaultQueryOptions || {});
            if (cacheOptimized) {
                collection = collection.cacheOptimized();
            }
            _this[table] = collection;
        });
        this.deltas = new _delta_collection_delta_collection__WEBPACK_IMPORTED_MODULE_6__["DeltaCollection"](this.writer.deltaCache, {
            branchId: this.defaultQueryOptions.branchId // If branchId is undefined. DeltaCollection will respond with Error on subscribe()
        });
    }
    KedBackendRepo.prototype.table = function (tableName) {
        var collection = new _kedbackend_collection__WEBPACK_IMPORTED_MODULE_2__["KedBackendCollection"](this, tableName, this.defaultQueryOptions);
        if (this.cacheOptimized)
            collection = collection.cacheOptimized();
        return collection;
    };
    KedBackendRepo.prototype._clone = function (queryOptions, cacheOptimized) {
        var clone = new KedBackendRepo(this.getClient, this.getUser, this.getUserDisplayName, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.defaultQueryOptions, queryOptions), this.mutationQueue, this.querySet, this.writer, cacheOptimized === undefined ? this.cacheOptimized : cacheOptimized);
        return clone;
    };
    KedBackendRepo.prototype.branch = function (branchId) {
        return this._clone({ branchId: branchId });
    };
    KedBackendRepo.prototype.role = function (role) {
        return this._clone({ role: role });
    };
    KedBackendRepo.prototype.optimizeCache = function () {
        return this._clone({}, true);
    };
    KedBackendRepo.prototype.clearBranch = function () {
        if (!this.defaultQueryOptions.branchId)
            throw new Error("Cannot clear master branch");
        this.writer.mutate([{ op: 'clear-branch', branchId: this.defaultQueryOptions.branchId }], 0);
    };
    KedBackendRepo.prototype.merge = function (targetBranchId) {
        if (!this.defaultQueryOptions.branchId)
            throw new Error("Cannot merge from master branch");
        this.writer.mutate([{ op: 'merge', branchId: this.defaultQueryOptions.branchId, targetBranchId: targetBranchId }], 0);
    };
    KedBackendRepo.prototype.saveNow = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.writer.waitForVersionToPersist(this.writer.currentVersion)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    return KedBackendRepo;
}());

//# sourceMappingURL=kedbackend-repo.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-subscription.js":
/*!***************************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/kedbackend-subscription.js ***!
  \***************************************************************************/
/*! exports provided: KedBackendSubscription */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedBackendSubscription", function() { return KedBackendSubscription; });
var KedBackendSubscription = /** @class */ (function () {
    function KedBackendSubscription(subscriber, collection) {
        this.subscriber = subscriber;
        this.collection = collection;
    }
    KedBackendSubscription.prototype.notifySubscriber = function (data, error) {
        try {
            if (error)
                this.subscriber([], error, this);
            else if (data !== this.lastNotifiedData) { // Will in-fact be equal by reference if data is same as last notification (as we use an immutable approach on data)
                this.lastNotifiedData = data;
                this.subscriber(data, error, this);
            }
        }
        catch (ex) {
            try {
                this.subscriber([], ex, this);
            }
            catch (ex2) {
                console.error("Error while notifying KedBackendSubscriber:", ex2, 'originally notified error:', ex);
            }
        }
    };
    KedBackendSubscription.prototype.unsubscribe = function () {
        this.collection.unsubscribe(this);
    };
    return KedBackendSubscription;
}());

//# sourceMappingURL=kedbackend-subscription.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-writer.js":
/*!*********************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/kedbackend-writer.js ***!
  \*********************************************************************/
/*! exports provided: KedBackendWriter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedBackendWriter", function() { return KedBackendWriter; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _mutation_queue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./mutation-queue */ "./kedbackend/js/dist/js/ked-backend-repo/mutation-queue.js");
/* harmony import */ var _ked_backend_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../ked-backend-client */ "./kedbackend/js/dist/js/ked-backend-client/index.js");
/* harmony import */ var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json");
var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_3___namespace = /*#__PURE__*/__webpack_require__.t(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json", 1);
/* harmony import */ var _cache_bust__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./cache-bust */ "./kedbackend/js/dist/js/ked-backend-repo/cache-bust.js");
/* harmony import */ var _observable__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../observable */ "./kedbackend/js/dist/js/observable/index.js");
/* harmony import */ var _delta_collection_delta_cache__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./delta-collection/delta-cache */ "./kedbackend/js/dist/js/ked-backend-repo/delta-collection/delta-cache.js");







var KedBackendWriter = /** @class */ (function () {
    function KedBackendWriter(mutationQueue, querySet, getClient, getUser, getUserDisplayName) {
        this.mutationQueue = mutationQueue;
        this.querySet = querySet;
        this.getClient = getClient;
        this.getUser = getUser;
        this.getUserDisplayName = getUserDisplayName;
        this._timeoutId = null;
        this._isSavingPromise = null;
        this.currentVersion = 0;
        this.persistedVersion = new _observable__WEBPACK_IMPORTED_MODULE_5__["Emitter"](0);
        this.errorSubscribers = [];
        this.stateSubscribers = [];
        this.deltaCache = new _delta_collection_delta_cache__WEBPACK_IMPORTED_MODULE_6__["DeltaCache"](getClient, getUser, getUserDisplayName);
    }
    Object.defineProperty(KedBackendWriter.prototype, "isSaving", {
        get: function () { return !!this._isSavingPromise; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(KedBackendWriter.prototype, "isEdited", {
        get: function () { return this.mutationQueue.get().length > 0; },
        enumerable: true,
        configurable: true
    });
    KedBackendWriter.prototype.onError = function (callback) {
        this.errorSubscribers.push(callback);
    };
    KedBackendWriter.prototype.onStateChange = function (callback) {
        this.stateSubscribers.push(callback);
    };
    KedBackendWriter.prototype.off = function (callback) {
        this.errorSubscribers = this.errorSubscribers.filter(function (s) { return s !== callback; });
        this.stateSubscribers = this.stateSubscribers.filter(function (s) { return s !== callback; });
    };
    KedBackendWriter.prototype.dispatchError = function (error, retryable) {
        var _this = this;
        this.errorSubscribers.forEach(function (callback) {
            try {
                callback(error, retryable, _this);
            }
            catch (_) { }
        });
    };
    KedBackendWriter.prototype.dispatchStateChange = function () {
        var _this = this;
        this.stateSubscribers.forEach(function (callback) {
            try {
                callback(_this);
            }
            catch (_) { }
        });
    };
    KedBackendWriter.prototype.mutate = function (mutations, debounce) {
        this.mutationQueue.add(mutations);
        ++this.currentVersion;
        this.dispatchStateChange();
        this.querySet.notifySubscribers();
        this.deltaCache.applyMutations(this.mutationQueue.get(), { optimistic: true });
        if (!this._isSavingPromise) {
            if (this._timeoutId)
                clearTimeout(this._timeoutId);
            this._timeoutId = setTimeout(this.save.bind(this), debounce);
        }
        // If isSaving, we don't need to do anything, becase it will re-check if additional
        // mutations have come, when saving is done.
    };
    KedBackendWriter.prototype.retrySave = function () {
        return this.save();
    };
    KedBackendWriter.prototype.waitForVersionToPersist = function (version) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var persistedVersion;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.persistedVersion.load()];
                    case 1:
                        persistedVersion = _a.sent();
                        if (!(persistedVersion < version)) return [3 /*break*/, 3];
                        this.save(); // Be more eager to save
                        return [4 /*yield*/, this.persistedVersion.filter(function (persistedVersion) { return persistedVersion >= version; }).load()];
                    case 2:
                        _a.sent();
                        _a.label = 3;
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    KedBackendWriter.prototype.save = function () {
        var _this = this;
        if (this._timeoutId)
            clearTimeout(this._timeoutId);
        if (this._isSavingPromise)
            return this._isSavingPromise;
        if (!this.isEdited)
            return Promise.resolve();
        this._timeoutId = null;
        this._isSavingPromise = this._save();
        this._isSavingPromise.catch(function () { }).then(function () { return _this._isSavingPromise = null; });
        return this._isSavingPromise;
    };
    KedBackendWriter.prototype._save = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var mutations, version, mutationRequests, res_1, etagMutations, error_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.dispatchStateChange();
                        mutations = this.mutationQueue.get();
                        version = this.currentVersion;
                        this.mutationQueue.moveToSavingQueue();
                        mutationRequests = this.mapMutations(mutations);
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 6, 11, 12]);
                        return [4 /*yield*/, this.getClient().batch(mutationRequests)];
                    case 2:
                        res_1 = _a.sent();
                        etagMutations = Object.keys(res_1.newEtags).map(function (id) { return ({
                            op: 'update',
                            table: null,
                            id: id,
                            deltaDoc: { $etag: res_1.newEtags[id] },
                            targetName: null // We don't have the target name. But this mutation won't be visible in a DeltaCollection anyway, so it wont be used.
                        }); });
                        // Invalidate cache
                        _cache_bust__WEBPACK_IMPORTED_MODULE_4__["CacheBust"].invalidateCache(mutationRequests, this.getUser());
                        // Commmit mutations along with etagMutations into queries cached data
                        this.persistedVersion.dispatch(version);
                        this.deltaCache.applyMutations(mutations, { optimistic: false });
                        return [4 /*yield*/, this.querySet.commitMutations(_mutation_queue__WEBPACK_IMPORTED_MODULE_1__["MutationQueue"].merge(mutations, etagMutations), version)];
                    case 3:
                        _a.sent();
                        // On success, clear saving queue as the mutations will now be committed to all query's data instead.
                        this.mutationQueue.clearSavingQueue();
                        this.dispatchStateChange(); // isEdited may have turned to false
                        // Finally, notify subscribers so that views get updated with committed results
                        this.querySet.notifySubscribers();
                        if (!(this.mutationQueue.get().length > 0)) return [3 /*break*/, 5];
                        // Additional mutations happend while we were saving. Handle them as well.
                        return [4 /*yield*/, this._save()];
                    case 4:
                        // Additional mutations happend while we were saving. Handle them as well.
                        _a.sent();
                        _a.label = 5;
                    case 5: return [3 /*break*/, 12];
                    case 6:
                        error_1 = _a.sent();
                        this.persistedVersion.dispatchError(error_1);
                        if (!(error_1 && error_1.name && error_1.name.startsWith("http4"))) return [3 /*break*/, 9];
                        // Access Control denied, bad request or similar. Throw mutations away.
                        this.dispatchError(error_1, false);
                        this.mutationQueue.clearSavingQueue();
                        this.dispatchStateChange(); // isEdited may have turned to false
                        this.querySet.notifySubscribers();
                        if (!(this.mutationQueue.get().length > 0)) return [3 /*break*/, 8];
                        // Ho ho! Additional mutations happend while we were saving. Handle them alone. THey might be more lucky.
                        return [4 /*yield*/, this._save()];
                    case 7:
                        // Ho ho! Additional mutations happend while we were saving. Handle them alone. THey might be more lucky.
                        _a.sent();
                        _a.label = 8;
                    case 8: return [3 /*break*/, 10];
                    case 9:
                        this.dispatchError(error_1, true);
                        _a.label = 10;
                    case 10: return [3 /*break*/, 12];
                    case 11:
                        this.dispatchStateChange();
                        return [7 /*endfinally*/];
                    case 12: return [2 /*return*/];
                }
            });
        });
    };
    KedBackendWriter.prototype.mapMutations = function (mutations) {
        var br = new _ked_backend_client__WEBPACK_IMPORTED_MODULE_2__["BatchRunner"]();
        mutations.forEach(function (m) {
            switch (m.op) {
                case 'update':
                    br.update(m.table, m.id, m.deltaDoc, m.branchId);
                    break;
                case 'add-related':
                    if (!m.relatedDoc.$etag) {
                        // No $etag means this is a new document. Add it before linking to it:
                        br.add(kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_3__["tables"][m.table].relationships[m.graphProp], m.relatedDoc, m.branchId);
                    }
                    br.link2(m.table, m.id, m.graphProp, m.relatedDoc.id, m.branchId);
                    break;
                case 'remove-related':
                    br.unlink2(m.table, m.id, m.graphProp, m.relatedDoc.id, m.branchId);
                    break;
                case 'undo-link':
                    br.undoLink(m.table, m.id, m.graphProp, m.relatedId, m.branchId);
                    break;
                case 'delete':
                    br.delete(m.table, m.id);
                    break;
                case 'clear-branch':
                    br.clearBranch(m.branchId);
                    break;
                case 'merge':
                    br.merge(m.branchId, m.targetBranchId);
                    break;
            }
        });
        return br.mutationRequests;
    };
    return KedBackendWriter;
}());

//# sourceMappingURL=kedbackend-writer.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/mutation-queue.js":
/*!******************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/mutation-queue.js ***!
  \******************************************************************/
/*! exports provided: MutationQueue */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MutationQueue", function() { return MutationQueue; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ "./kedbackend/js/dist/js/ked-backend-repo/utils.js");
/* harmony import */ var _delta_merge__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./delta-merge */ "./kedbackend/js/dist/js/ked-backend-repo/delta-merge.js");



var MutationQueue = /** @class */ (function () {
    function MutationQueue() {
        this.queue = [];
        this.savingQueue = [];
    }
    MutationQueue.prototype.add = function (mutations) {
        this.queue = MutationQueue.merge(this.queue, mutations);
    };
    MutationQueue.prototype.moveToSavingQueue = function () {
        this.savingQueue = MutationQueue.merge(this.savingQueue, this.queue);
        this.queue = [];
    };
    MutationQueue.prototype.clearSavingQueue = function () {
        this.savingQueue = [];
    };
    MutationQueue.prototype.get = function () {
        return this.savingQueue.concat(this.queue);
    };
    MutationQueue.prototype.affectsQuery = function (table, query, includes) {
        var mutations = this.get();
        if (mutations.some(function (m) { return m.op === 'merge' || m.op === 'clear-branch'; }))
            return true;
        if (query.ids) {
            // A query with "ids" filter will be easy to detect a no-match on:
            return mutations.some(function (m) { return Object(_utils__WEBPACK_IMPORTED_MODULE_1__["globalOp"])(m) || (!Object(_utils__WEBPACK_IMPORTED_MODULE_1__["branchSensitive"])(m) || m.branchId === query.branchId) &&
                query.ids.includes(m.id); });
        }
        // Otherwise, check if mutations affect same branch and table. Could be done more fine grained,
        // but that would only be a suboptimization.
        return mutations.some(function (m) {
            return m.op === 'delete' ?
                m.table === table || (includes.some(function (label) { return Object(_utils__WEBPACK_IMPORTED_MODULE_1__["getTableFromLabel"])(table, label) === m.table; })) :
                Object(_utils__WEBPACK_IMPORTED_MODULE_1__["globalOp"])(m) ? true :
                    m.branchId == query.branchId &&
                        (m.table === table || (m.op !== 'update' && ([table].concat(includes.map(function (label) { return Object(_utils__WEBPACK_IMPORTED_MODULE_1__["getTableFromLabel"])(table, label); })).some(function (table) { return Object(_utils__WEBPACK_IMPORTED_MODULE_1__["getTableFromLabel"])(m.table, m.graphProp) === table; }))));
        });
    };
    MutationQueue.merge = function (queue1, queue2) {
        var mutableQueue1 = queue1.slice();
        var mutableQueue2 = queue2.slice();
        //if (mutableQueue1.length > 0) debugger;
        var len = queue1.length;
        var _loop_1 = function (i) {
            var m = queue1[i];
            if (m.op === 'update') {
                var overlappingIdOpIdx = mutableQueue2.findIndex(function (newMut) {
                    return newMut.op === 'update' &&
                        newMut.branchId === m.branchId &&
                        newMut.id === m.id;
                });
                if (overlappingIdOpIdx >= 0) {
                    mutableQueue1[i] = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, m, { deltaDoc: Object(_delta_merge__WEBPACK_IMPORTED_MODULE_2__["mergeDeltas"])(m.deltaDoc, mutableQueue2[overlappingIdOpIdx].deltaDoc) });
                    mutableQueue2.splice(overlappingIdOpIdx, 1);
                }
            }
        };
        for (var i = 0; i < len; ++i) {
            _loop_1(i);
        }
        return mutableQueue1.concat(mutableQueue2);
    };
    return MutationQueue;
}());

//# sourceMappingURL=mutation-queue.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/query-set.js":
/*!*************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/query-set.js ***!
  \*************************************************************/
/*! exports provided: QuerySet */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QuerySet", function() { return QuerySet; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _kedbackend_query__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./kedbackend-query */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-query.js");
/* harmony import */ var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json");
var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_2___namespace = /*#__PURE__*/__webpack_require__.t(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json", 1);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils */ "./kedbackend/js/dist/js/ked-backend-repo/utils.js");




var QuerySet = /** @class */ (function () {
    function QuerySet(mutationQueue) {
        this.mutationQueue = mutationQueue;
        this.queries = [];
    }
    QuerySet.prototype.commitMutations = function (mutations, version) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Promise.all(this.queries.map(function (q) { return q.commitMutations(mutations, version); }))];
                    case 1:
                        _a.sent();
                        this.cleanupInvalidQueries();
                        return [2 /*return*/];
                }
            });
        });
    };
    QuerySet.prototype.cleanupInvalidQueries = function () {
        this.queries = this.queries.filter(function (q) {
            if (q.invalid) {
                if (q.timeoutHandle) {
                    clearTimeout(q.timeoutHandle);
                    q.timeoutHandle = null;
                }
                return false;
            }
            return true;
        });
    };
    QuerySet.prototype.notifySubscribers = function () {
        var optimisticMutations = this.mutationQueue.get();
        this.queries.forEach(function (q) {
            q.notifySubscribers(optimisticMutations);
        });
    };
    QuerySet.prototype.findQuery = function (table, query) {
        return this.queries.find(function (q) { return q.queryKey === _kedbackend_query__WEBPACK_IMPORTED_MODULE_1__["KedBackendQuery"].queryKey(table, query); });
    };
    QuerySet.prototype.queryLocally = function (table, query, includes) {
        // For now, only handle this very common and special case (which
        // will save a lot of unnescessary network traffic if I am thinking right...)
        var mutations = this.mutationQueue.get();
        // Check if the query wants to get a single entity by its ID:
        if (query.ids && query.ids.length === 1) {
            // And if so, if we have an outgoing mutation to create that entity:
            if (mutations.some(function (m) { return m.op === 'add-related' && m.relatedDoc.id === query.ids[0]; })) {
                // Then return an EMPTY response, signalling that we can resolve this locally,
                // but let the optistic feature of KedBackendQuery apply the mutation before
                // notifying subscribers (we don't want it to be persistent before the server
                // has accepted the mutation)
                return [];
            }
        }
        // OK, another quite common case is when we ask for a certain ID and that ID replies
        // within another query
        if (query.hasEdgesFrom || query.hasEdgesTo)
            return null; // Not possible to handle
        if (!query.ids)
            return null; // For now, just take hight for this particular and most common case!
        var _loop_1 = function (q) {
            if (!q.gotInitialResponse)
                return "continue";
            if (q.query.branchId !== query.branchId)
                return "continue";
            if (q.query.flags)
                return "continue"; // It would be complex to support various flags. Query's data may include ids only. Can't rely on the query.
            var qIncludes = q.includes;
            if (qIncludes.length > 0 && (!query.include || query.include.length === 0)) {
                // We don't include, but this query does. Check if we can find our result within it.
                var label = qIncludes.find(function (l) { return kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_2__["tables"][q.table]["relationships"][l] === table; });
                if (label) {
                    var res_1 = {};
                    for (var _i = 0, _a = q.data; _i < _a.length; _i++) {
                        var entity = _a[_i];
                        var subData = Object(_utils__WEBPACK_IMPORTED_MODULE_3__["queryArray"])(query, entity[label]);
                        subData.forEach(function (r) { return res_1[r.id] = r; });
                    }
                    var result_1 = Object.keys(res_1).map(function (id) { return res_1[id]; });
                    // Only return result if we could look up every requested ID:
                    if (!query.ids.every(function (id) { return result_1.some(function (x) { return x.id === id; }); }))
                        return "continue";
                    return { value: result_1 };
                }
            }
            if (!includes.every(function (label) { return qIncludes.includes(label); }))
                return "continue";
            // Lastly, if the query includes all graphs that we do, pick the subset from that query.
            // Concrete example: We observe a certain Task by ID and want its knowledgeRequirements along with it,
            // and there's another query of all tasks that also includes knowledgeRequirements. Use it. 
            if (q.table === table) {
                var result_2 = Object(_utils__WEBPACK_IMPORTED_MODULE_3__["queryArray"])(query, q.data);
                // Only return result if we could look up every requested ID:
                if (!query.ids.every(function (id) { return result_2.some(function (x) { return x.id === id; }); }))
                    return "continue";
                return { value: result_2 };
            }
        };
        for (var _i = 0, _a = this.queries; _i < _a.length; _i++) {
            var q = _a[_i];
            var state_1 = _loop_1(q);
            if (typeof state_1 === "object")
                return state_1.value;
        }
    };
    QuerySet.prototype.subscribe = function (subscription) {
        var _a = subscription.collection, table = _a.table, query = _a.query, repo = _a.repo;
        var kbQuery = this.findQuery(table, query);
        if (!kbQuery) {
            kbQuery = new _kedbackend_query__WEBPACK_IMPORTED_MODULE_1__["KedBackendQuery"](table, query, repo.getUser(), repo, this.mutationQueue);
            this.queries.push(kbQuery);
        }
        else {
            if (kbQuery.timeoutHandle) {
                clearTimeout(kbQuery.timeoutHandle);
                kbQuery.timeoutHandle = null;
            }
        }
        kbQuery.subscribe(subscription);
    };
    QuerySet.prototype.unsubscribe = function (subscription) {
        var _this = this;
        var _a = subscription.collection, table = _a.table, query = _a.query, repo = _a.repo;
        var kbQuery = this.findQuery(table, query);
        if (kbQuery) {
            // Prohibit further notifications to this subscription:
            kbQuery.unsubscribe(subscription);
            // Release unnescessary memory when there are no more subscriptions of this query, by removing the query itself
            // To that in a delayed manner, so that an unsubscribe() followed by an immediate subscribe() don't have to re-query the server:
            if (kbQuery.subscriptions.length === 0) {
                // Schedule for garbage collection in 5 minutes:
                kbQuery.timeoutHandle = setTimeout(function () {
                    // Check if kbQuery still has no subscriptions (not certain! A new subscriber may have come along...)
                    if (kbQuery.subscriptions.length === 0) {
                        // Still no subscriptions on it, time to release some memory and forget the in-memory cache of the query result
                        _this.queries = _this.queries.filter(function (q) { return q !== kbQuery; });
                    }
                }, this.queries.length > 50 ?
                    500 : // Don't host too many queries. Garbage collect this within 500 ms
                    5 * 60000); // Allow query in memory for another 5 minutes
            }
        }
    };
    return QuerySet;
}());

//# sourceMappingURL=query-set.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/utils.js":
/*!*********************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/utils.js ***!
  \*********************************************************/
/*! exports provided: getTableFromLabel, queryArray, AND, getFilterFromQuery, branchSensitive, globalOp */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTableFromLabel", function() { return getTableFromLabel; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryArray", function() { return queryArray; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AND", function() { return AND; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFilterFromQuery", function() { return getFilterFromQuery; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "branchSensitive", function() { return branchSensitive; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "globalOp", function() { return globalOp; });
/* harmony import */ var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json");
var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_0___namespace = /*#__PURE__*/__webpack_require__.t(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json", 1);

function getTableFromLabel(table, label) {
    return kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_0__["tables"][table].relationships[label];
}
function queryArray(query, data) {
    var filter = getFilterFromQuery(query);
    return data.filter(filter);
}
function AND(filter1, filter2) {
    return function (x) { return filter1(x) && filter2(x); };
}
function getFilterFromQuery(query) {
    var filter = function (x) { return true; };
    if (query.from)
        return AND(filter, function (x) { return x.dateTime >= query.from; });
    if (query.to)
        return AND(filter, function (x) { return x.dateTime < query.to; });
    if (query.ids)
        return AND(filter, function (x) { return query.ids.includes(x.id); });
    if (query.name)
        return AND(filter, function (x) { return x.name === query.name; });
    if (query.tags)
        return AND(filter, function (x) { return x.tags && [].concat(query.tags || []).some(function (tag) { return x.tags.includes(tag); }); });
    // query.hasEdgesFrom and query.hasEdgesTo cannot by filtered here
    return filter;
}
function branchSensitive(m) {
    return m.op !== 'delete';
}
function globalOp(m) {
    return m.op === 'clear-branch' || m.op === 'merge';
}
//# sourceMappingURL=utils.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-model-migrator/index.js":
/*!***********************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-model-migrator/index.js ***!
  \***********************************************************/
/*! exports provided: KedModelMigratorMixin */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedModelMigratorMixin", function() { return KedModelMigratorMixin; });
/* harmony import */ var _migrate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./migrate */ "./kedbackend/js/dist/js/ked-model-migrator/migrate.js");

var KedModelMigratorMixin = function (client) {
    if (client.__migrator_mixed_in)
        return;
    client.__migrator_mixed_in = true;
    var get = client.get;
    var list = client.list;
    client.get = function (table, id, options) {
        var include = options && options.include;
        return get.apply(this, arguments).then(function (result) {
            Object(_migrate__WEBPACK_IMPORTED_MODULE_0__["default"])(result, table, include && include.toString().split(','));
            return result;
        });
    };
    client.list = function (table, options) {
        var include = options && options.include;
        return list.apply(this, arguments).then(function (result) {
            result.forEach(function (doc) { return Object(_migrate__WEBPACK_IMPORTED_MODULE_0__["default"])(doc, table, include && include.toString().split(',')); });
            return result;
        });
    };
    return client;
};
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-model-migrator/migrate-course.js":
/*!********************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-model-migrator/migrate-course.js ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return migrateCourse; });
/* harmony import */ var _migrate_task__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./migrate-task */ "./kedbackend/js/dist/js/ked-model-migrator/migrate-task.js");

function migrateCourse(course, graphs) {
    if (!course.modules)
        course.modules = [];
    course.modules.forEach(function (module) {
        if (!module.resources) {
            module.resources = [];
        }
        if (!module.taskIds) {
            module.taskIds = [];
        }
    });
    if (!course.responsibleTeachers) {
        course.responsibleTeachers = [];
    }
    // Earlier wrong spelling of resources
    if ('resourses' in course && !('resources' in course)) {
        course.resources = course.resourses;
        delete course.resourses;
    }
    if (!course.resources) {
        course.resources = [];
    }
    if (graphs) {
        graphs.forEach(function (label) {
            switch (label) {
                case 'tasks':
                    course.tasks.forEach(function (task) { return Object(_migrate_task__WEBPACK_IMPORTED_MODULE_0__["default"])(task); });
                    break;
            }
        });
    }
}
//# sourceMappingURL=migrate-course.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-model-migrator/migrate-task.js":
/*!******************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-model-migrator/migrate-task.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return migrateTask; });
function migrateTask(task) {
    if (!task.resources)
        task.resources = [];
}
//# sourceMappingURL=migrate-task.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-model-migrator/migrate.js":
/*!*************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-model-migrator/migrate.js ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return migrate; });
/* harmony import */ var _migrate_course__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./migrate-course */ "./kedbackend/js/dist/js/ked-model-migrator/migrate-course.js");
/* harmony import */ var _migrate_task__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./migrate-task */ "./kedbackend/js/dist/js/ked-model-migrator/migrate-task.js");


function migrate(doc, table, graphs) {
    switch (table) {
        case "courses":
            Object(_migrate_course__WEBPACK_IMPORTED_MODULE_0__["default"])(doc, graphs);
            break;
        case "tasks":
            Object(_migrate_task__WEBPACK_IMPORTED_MODULE_1__["default"])(doc);
            break;
    }
}
//# sourceMappingURL=migrate.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/collection.js":
/*!********************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/collection.js ***!
  \********************************************************/
/*! exports provided: Collection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Collection", function() { return Collection; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _observable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./observable */ "./kedbackend/js/dist/js/observable/observable.js");
/* harmony import */ var _map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./map */ "./kedbackend/js/dist/js/observable/map.js");
/* harmony import */ var _value__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./value */ "./kedbackend/js/dist/js/observable/value.js");
/* harmony import */ var _emitter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./emitter */ "./kedbackend/js/dist/js/observable/emitter.js");





var Collection = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Collection, _super);
    function Collection(subscribe) {
        return _super.call(this, subscribe) || this;
    }
    Collection.prototype._map = function (mapper) {
        throw "mixedin";
    };
    Collection.from = function (x) {
        if (x.subscribe)
            return new Collection(function (s) { return x.subscribe(s); });
        if (Array.isArray(x)) {
            var emitter_1 = new _emitter__WEBPACK_IMPORTED_MODULE_4__["Emitter"](x);
            return new Collection(function (s) { return emitter_1.subscribe(s); });
        }
        throw new Error("ObservableCollection.from() can only take arrays or observables");
    };
    Collection.prototype.map = function (mapper) {
        return this._map(function (items) { return items.map(function (item) { return mapper(item); }); });
    };
    Collection.prototype.flat = function () {
        return this._map(function (items) { return [].concat.apply([], items); });
    };
    Collection.prototype.filter = function (filter) {
        return this._map(function (items) { return items.filter(filter); });
    };
    Collection.prototype.concat = function (other) {
        return Collection.from(this.toValue().combineLatest(other).map(function (_a) {
            var me = _a[0], other = _a[1];
            return me.concat(other);
        }));
    };
    Collection.prototype.orderBy = function (prop) {
        return this.toValue().map(function (array) { return array.slice().sort(function (a, b) {
            var aProp = a && a[prop];
            var bProp = b && b[prop];
            return aProp > bProp ? 1 : aProp < bProp ? -1 : 0;
        }); }).toCollection(function (x) { return x; });
    };
    Collection.prototype.toValue = function () {
        var _this = this;
        return new _value__WEBPACK_IMPORTED_MODULE_3__["Value"](function (s) { return _this.subscribe(s); });
    };
    Collection.prototype.groupBy = function (prop) {
        return this.toValue().map(function (items) {
            var rv = {};
            items.forEach(function (item) {
                var list = rv[item[prop]] || (rv[item[prop]] = []);
                list.push(item);
            });
            return rv;
        });
    };
    Collection.prototype.first = function () {
        return this.toValue().map(function (arr) { return arr[0]; });
    };
    return Collection;
}(_observable__WEBPACK_IMPORTED_MODULE_1__["Observable"]));

Collection.prototype._map = Object(_map__WEBPACK_IMPORTED_MODULE_2__["initMapMethod"])(Collection);
//# sourceMappingURL=collection.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/emitter.js":
/*!*****************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/emitter.js ***!
  \*****************************************************/
/*! exports provided: Emitter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Emitter", function() { return Emitter; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _value__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./value */ "./kedbackend/js/dist/js/observable/value.js");


var Emitter = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Emitter, _super);
    function Emitter(initialValue) {
        var _this = _super.call(this, function (observer) {
            var subscription = {
                unsubscribe: function () { return _this.subscribers = _this.subscribers.filter(function (_a) {
                    var s = _a[0];
                    return s !== observer;
                }); },
            };
            _this.subscribers.push([observer, subscription]);
            if (_this.error)
                observer(null, _this.error, subscription);
            else
                observer(_this.value, undefined, subscription);
            return subscription;
        }) || this;
        _this.subscribers = [];
        _this.value = initialValue;
        return _this;
    }
    Emitter.prototype.dispatch = function (value) {
        this.value = value;
        this.error = undefined;
        this._dispatch();
    };
    Emitter.prototype.dispatchError = function (error) {
        this.error = error;
        this._dispatch();
    };
    Emitter.prototype._dispatch = function () {
        var _this = this;
        this.subscribers.forEach(function (_a) {
            var observer = _a[0], subscription = _a[1];
            try {
                observer(_this.value, _this.error, subscription);
            }
            catch (err) {
                observer(null, err, subscription);
            }
        });
    };
    return Emitter;
}(_value__WEBPACK_IMPORTED_MODULE_1__["Value"]));

//# sourceMappingURL=emitter.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/fiber-context.js":
/*!***********************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/fiber-context.js ***!
  \***********************************************************/
/*! exports provided: FiberContext */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FiberContext", function() { return FiberContext; });
var stack = [];
var currentFiber = null;
var providers = [function () { return currentFiber; }];
function pushFiber(fiber) {
    stack.push(currentFiber);
    currentFiber = fiber;
}
function popFiber() {
    currentFiber = stack.pop();
}
var FiberContext = {
    get current() { return currentFiber; },
    /*run: function rerun<R>(fiber: Fiber, fn: ()=>R): R | Promise<R> {
      pushFiber(fiber);
      try {
        return Promise.resolve(fn());
      } catch (p) {
        if (p && typeof p.then === 'function') {
          return p.then(()=>rerun(fiber, fn));
        } else {
          return Promise.reject(p);
        }
      } finally {
        popFiber();
      }
    },*/
    addProvider: function (getCurrentFiber) {
        providers.push(getCurrentFiber);
        setCurrentGetterFromProviders();
    },
    removeProvider: function (getCurrentFiber) {
        providers = providers.filter(function (p) { return p !== getCurrentFiber; });
        setCurrentGetterFromProviders();
    }
};
function setCurrentGetterFromProviders() {
    Object.defineProperty(FiberContext, "current", {
        get: providers.reduce(function (p, c) { return function () { return p() || c(); }; }),
        set: function () { throw new Error("Use FiberContext.push() to change current fiber"); }
    });
}
//# sourceMappingURL=fiber-context.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/index.js":
/*!***************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/index.js ***!
  \***************************************************/
/*! exports provided: Observable, Value, Collection, Emitter, FiberContext */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _observable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./observable */ "./kedbackend/js/dist/js/observable/observable.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Observable", function() { return _observable__WEBPACK_IMPORTED_MODULE_0__["Observable"]; });

/* harmony import */ var _value__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./value */ "./kedbackend/js/dist/js/observable/value.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Value", function() { return _value__WEBPACK_IMPORTED_MODULE_1__["Value"]; });

/* harmony import */ var _collection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./collection */ "./kedbackend/js/dist/js/observable/collection.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Collection", function() { return _collection__WEBPACK_IMPORTED_MODULE_2__["Collection"]; });

/* harmony import */ var _emitter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./emitter */ "./kedbackend/js/dist/js/observable/emitter.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Emitter", function() { return _emitter__WEBPACK_IMPORTED_MODULE_3__["Emitter"]; });

/* harmony import */ var _fiber_context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./fiber-context */ "./kedbackend/js/dist/js/observable/fiber-context.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FiberContext", function() { return _fiber_context__WEBPACK_IMPORTED_MODULE_4__["FiberContext"]; });






//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/map.js":
/*!*************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/map.js ***!
  \*************************************************/
/*! exports provided: initMapMethod */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "initMapMethod", function() { return initMapMethod; });
function initMapMethod(ctor) {
    return function (mapper) {
        var _this = this;
        return new ctor(function (observer) { return _this.subscribe(function (value, error, subscription) {
            if (error)
                observer(null, error, subscription);
            else
                try {
                    observer(mapper(value), error, subscription);
                }
                catch (err) {
                    observer(null, err, subscription);
                }
        }); });
    };
}
//# sourceMappingURL=map.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/mixin.js":
/*!***************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/mixin.js ***!
  \***************************************************/
/*! exports provided: mixin */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mixin", function() { return mixin; });
function mixin(targetProto, mixinProto) {
    var props = [];
    for (var _i = 2; _i < arguments.length; _i++) {
        props[_i - 2] = arguments[_i];
    }
    props.forEach(function (prop) { return targetProto[prop] = mixinProto[prop]; });
}
//# sourceMappingURL=mixin.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/observable.js":
/*!********************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/observable.js ***!
  \********************************************************/
/*! exports provided: Observable */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Observable", function() { return Observable; });
var Observable = /** @class */ (function () {
    //static get [Symbol.species]() { return this; }
    function Observable(_subscribe) {
        this._subscribe = _subscribe;
    }
    Observable.prototype.subscribe = function (observer) {
        try {
            return this._subscribe(function (items, error, subscription) {
                try {
                    observer(items, error, subscription);
                }
                catch (err) {
                    observer(null, err, subscription);
                }
            });
        }
        catch (error) {
            observer(null, error, { unsubscribe: function () { } });
        }
    };
    return Observable;
}());

//# sourceMappingURL=observable.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/value.js":
/*!***************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/value.js ***!
  \***************************************************/
/*! exports provided: Value */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Value", function() { return Value; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _observable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./observable */ "./kedbackend/js/dist/js/observable/observable.js");
/* harmony import */ var _map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./map */ "./kedbackend/js/dist/js/observable/map.js");
/* harmony import */ var _collection__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./collection */ "./kedbackend/js/dist/js/observable/collection.js");
/* harmony import */ var _fiber_context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./fiber-context */ "./kedbackend/js/dist/js/observable/fiber-context.js");





var Value = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Value, _super);
    function Value(subscribe) {
        return _super.call(this, subscribe) || this;
    }
    Value.from = function (x) {
        if (x.subscribe)
            return new Value(function (s) { return x.subscribe(s); });
        throw new Error("Value.from() can only take observables");
    };
    Value.prototype.read = function () {
        var resolved = false, result, err, notify;
        var subscription = this.subscribe(function (value, error, subsciption) {
            resolved = true;
            result = value;
            err = error;
            if (error && notify)
                notify(null, error, subsciption);
            else if (notify)
                notify(value, null, subsciption);
        });
        if (resolved) {
            var currentFiber = _fiber_context__WEBPACK_IMPORTED_MODULE_4__["FiberContext"].current;
            if (!currentFiber) {
                subscription.unsubscribe();
                throw new Error("Invalid Fiber Context");
            }
            if (err) {
                subscription.unsubscribe();
                throw err;
            }
            var subscriptions = currentFiber.subscriptions, observer = currentFiber.observer;
            subscriptions.push(subscription);
            notify = observer;
            return result;
        }
        throw new Promise(function (resolve, reject) {
            notify = function (value, error, subscription) {
                subscription.unsubscribe();
                if (error)
                    reject(error);
                else
                    resolve(value);
            };
        });
    };
    Value.prototype.load = function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.subscribe(function (value, error, subsciption) {
                if (error)
                    reject(error);
                else
                    resolve(value);
                subsciption.unsubscribe();
            });
        });
    };
    Value.prototype.filter = function (fn) {
        var _this = this;
        return new Value(function (observer) { return _this.subscribe(function (value, error, subscription) {
            if (error)
                observer(null, error, subscription);
            else if (fn(value))
                observer(value, error, subscription);
        }); });
    };
    Value.prototype.log = function (prefix) {
        return this.map(function (x) {
            console.log(prefix, x);
            return x;
        });
    };
    Value.prototype.toCollection = function (mapper) {
        var _this = this;
        return new _collection__WEBPACK_IMPORTED_MODULE_3__["Collection"](function (s) { return _this.map(mapper).subscribe(s); });
    };
    Value.prototype.combineLatest = function (other) {
        var _this = this;
        return new Value(function (observer) {
            var values = [null, null];
            var mySubscription, otherSubscription;
            var subscription = {
                unsubscribe: function () {
                    mySubscription.unsubscribe();
                    otherSubscription.unsubscribe();
                }
            };
            mySubscription = _this.subscribe(function (items, error, s) {
                if (error) {
                    s.unsubscribe();
                    observer(null, error, subscription);
                }
                values[0] = items;
                if (values[1] !== null)
                    observer(values, null, subscription);
            });
            otherSubscription = other.subscribe(function (value, error, s) {
                if (error) {
                    s.unsubscribe();
                    observer(null, error, subscription);
                }
                values[1] = value;
                if (values[0] !== null)
                    observer(values, null, subscription);
            });
            return subscription;
        });
    };
    Value.prototype.switchMap = function (mapper) {
        var _this = this;
        return new Value(function (observer) {
            var mappedSubscription = null;
            var subscription = null;
            var returnedSubscription = {
                unsubscribe: function () {
                    subscription.unsubscribe();
                    if (mappedSubscription) {
                        mappedSubscription.unsubscribe();
                        mappedSubscription = null;
                    }
                }
            };
            subscription = _this.subscribe(function (item, error, s) {
                subscription = s;
                if (mappedSubscription) {
                    mappedSubscription.unsubscribe();
                    mappedSubscription = null;
                }
                if (error)
                    observer(null, error, returnedSubscription);
                else {
                    try {
                        var observableOrValue = mapper(item);
                        if (observableOrValue && typeof observableOrValue.subscribe === 'function') {
                            mappedSubscription = observableOrValue.subscribe(function (value, error, s) {
                                mappedSubscription = s;
                                observer(value, error, returnedSubscription);
                            });
                        }
                        else {
                            observer(observableOrValue, null, subscription);
                        }
                    }
                    catch (error) {
                        observer(null, error, subscription);
                    }
                }
            });
            return returnedSubscription;
        });
    };
    return Value;
}(_observable__WEBPACK_IMPORTED_MODULE_1__["Observable"]));

Value.prototype.map = Object(_map__WEBPACK_IMPORTED_MODULE_2__["initMapMethod"])(Value);
//# sourceMappingURL=value.js.map

/***/ }),

/***/ "./kedbackend/observable.js":
/*!**********************************!*\
  !*** ./kedbackend/observable.js ***!
  \**********************************/
/*! exports provided: Observable, Value, Collection, Emitter, FiberContext */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _js_dist_js_observable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./js/dist/js/observable */ "./kedbackend/js/dist/js/observable/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Observable", function() { return _js_dist_js_observable__WEBPACK_IMPORTED_MODULE_0__["Observable"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Value", function() { return _js_dist_js_observable__WEBPACK_IMPORTED_MODULE_0__["Value"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Collection", function() { return _js_dist_js_observable__WEBPACK_IMPORTED_MODULE_0__["Collection"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Emitter", function() { return _js_dist_js_observable__WEBPACK_IMPORTED_MODULE_0__["Emitter"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FiberContext", function() { return _js_dist_js_observable__WEBPACK_IMPORTED_MODULE_0__["FiberContext"]; });




/***/ }),

/***/ "./kedbackend/repo.js":
/*!****************************!*\
  !*** ./kedbackend/repo.js ***!
  \****************************/
/*! exports provided: KedBackendCollection, KedBackendQuery, KedBackendRepo, KedBackendSubscription, KedBackendWriter, MutationQueue, QuerySet, mixin */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _js_dist_js_ked_backend_repo__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./js/dist/js/ked-backend-repo */ "./kedbackend/js/dist/js/ked-backend-repo/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendCollection", function() { return _js_dist_js_ked_backend_repo__WEBPACK_IMPORTED_MODULE_0__["KedBackendCollection"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendQuery", function() { return _js_dist_js_ked_backend_repo__WEBPACK_IMPORTED_MODULE_0__["KedBackendQuery"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendRepo", function() { return _js_dist_js_ked_backend_repo__WEBPACK_IMPORTED_MODULE_0__["KedBackendRepo"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendSubscription", function() { return _js_dist_js_ked_backend_repo__WEBPACK_IMPORTED_MODULE_0__["KedBackendSubscription"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendWriter", function() { return _js_dist_js_ked_backend_repo__WEBPACK_IMPORTED_MODULE_0__["KedBackendWriter"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MutationQueue", function() { return _js_dist_js_ked_backend_repo__WEBPACK_IMPORTED_MODULE_0__["MutationQueue"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "QuerySet", function() { return _js_dist_js_ked_backend_repo__WEBPACK_IMPORTED_MODULE_0__["QuerySet"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "mixin", function() { return _js_dist_js_ked_backend_repo__WEBPACK_IMPORTED_MODULE_0__["mixin"]; });




/***/ }),

/***/ "./node_modules/moment/locale sync recursive sv|en":
/*!***********************************************!*\
  !*** ./node_modules/moment/locale sync sv|en ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./en-SG": "./node_modules/moment/locale/en-SG.js",
	"./en-SG.js": "./node_modules/moment/locale/en-SG.js",
	"./en-au": "./node_modules/moment/locale/en-au.js",
	"./en-au.js": "./node_modules/moment/locale/en-au.js",
	"./en-ca": "./node_modules/moment/locale/en-ca.js",
	"./en-ca.js": "./node_modules/moment/locale/en-ca.js",
	"./en-gb": "./node_modules/moment/locale/en-gb.js",
	"./en-gb.js": "./node_modules/moment/locale/en-gb.js",
	"./en-ie": "./node_modules/moment/locale/en-ie.js",
	"./en-ie.js": "./node_modules/moment/locale/en-ie.js",
	"./en-il": "./node_modules/moment/locale/en-il.js",
	"./en-il.js": "./node_modules/moment/locale/en-il.js",
	"./en-nz": "./node_modules/moment/locale/en-nz.js",
	"./en-nz.js": "./node_modules/moment/locale/en-nz.js",
	"./sv": "./node_modules/moment/locale/sv.js",
	"./sv.js": "./node_modules/moment/locale/sv.js"
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	if(!__webpack_require__.o(map, req)) {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return map[req];
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = "./node_modules/moment/locale sync recursive sv|en";

/***/ }),

/***/ "./src/access-control/get-user-claims.ts":
/*!***********************************************!*\
  !*** ./src/access-control/get-user-claims.ts ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return getUserClaims; });
function getUserClaims(user) {
    return [{
            type: "email",
            value: user.mail
        }, {
            type: "school",
            value: user.school
        }].concat(user.roles.map(function (role) { return ({
        type: "role",
        value: role
    }); })).concat(user.roles.map(function (role) { return ({
        type: "schoolRole",
        value: user.school + "/" + role
    }); }));
}


/***/ }),

/***/ "./src/access-control/index.ts":
/*!*************************************!*\
  !*** ./src/access-control/index.ts ***!
  \*************************************/
/*! exports provided: getUserClaims, IMPERSONATION_QUERY_PARAMS, hasAccess, hasReadAccess, hasWriteAccess, hasShareAccess, isTeacherAtSchool, isAdminOrTeacherAtSchool, impersonationEnv, actAs, preserveImpersonationQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IMPERSONATION_QUERY_PARAMS", function() { return IMPERSONATION_QUERY_PARAMS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasAccess", function() { return hasAccess; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasReadAccess", function() { return hasReadAccess; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasWriteAccess", function() { return hasWriteAccess; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasShareAccess", function() { return hasShareAccess; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isTeacherAtSchool", function() { return isTeacherAtSchool; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isAdminOrTeacherAtSchool", function() { return isAdminOrTeacherAtSchool; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "impersonationEnv", function() { return impersonationEnv; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "actAs", function() { return actAs; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "preserveImpersonationQuery", function() { return preserveImpersonationQuery; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _get_user_claims__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./get-user-claims */ "./src/access-control/get-user-claims.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getUserClaims", function() { return _get_user_claims__WEBPACK_IMPORTED_MODULE_2__["default"]; });

/* harmony import */ var _utils_query_string__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/query-string */ "./src/utils/query-string.ts");





var IMPERSONATION_QUERY_PARAMS = [
    "user",
    "role",
    "school",
    "debug",
    "testVersion",
    "testversion",
    "features",
    "schoolType",
    "schooltype"
];
function hasAccess(user, doc, requestedRight) {
    var claims = Object(_get_user_claims__WEBPACK_IMPORTED_MODULE_2__["default"])(user);
    if (requestedRight !== 'R' && user.tutorFor) {
        claims = claims.filter(function (claim) { return claim.type !== 'email'; });
    }
    var result = Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["hasAccess"])(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["DocumentAccess"].fromStringArray(doc.acl || []), claims, requestedRight);
    //console.log(`Has ${requestedRight} access to ${doc.name}/${doc.id}: ${result}`);
    return result;
}
function hasReadAccess(user, doc) {
    return hasAccess(user, doc, 'R');
}
function hasWriteAccess(user, doc) {
    return hasAccess(user, doc, 'W');
}
function hasShareAccess(user, doc) {
    return hasAccess(user, doc, 'S');
}
function isTeacherAtSchool(user, school) {
    var isTeacher = user.roles.some(function (role) { return role === 'EMPLOYEE' || role === 'ADMIN'; });
    var belongsToSchool = (school || "").toLowerCase() === user.school.toLowerCase();
    return (isTeacher && belongsToSchool);
}
function isAdminOrTeacherAtSchool(user, school) {
    return user.roles.includes("ADMIN") || isTeacherAtSchool(user, school);
}
var impersonationEnv = {
    actAs: function (options) {
        var role = options.role, school = options.school, url = options.url;
        var currentQuery = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_3__["parseQueryString"])(location.search);
        var newQuery = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, currentQuery, { role: role, school: school });
        var newQueryString = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_3__["generateQueryString"])(newQuery);
        if (url) {
            location.href = "" + url + newQueryString;
        }
        else {
            location.hash = "#";
            location.search = newQueryString;
        }
    }
};
function actAs(options) {
    impersonationEnv.actAs(options);
}
function preserveImpersonationQuery(url, query) {
    var e_1, _a;
    var currentQuery = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_3__["parseQueryString"])(location.search);
    var preservedQuery = {};
    try {
        for (var IMPERSONATION_QUERY_PARAMS_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](IMPERSONATION_QUERY_PARAMS), IMPERSONATION_QUERY_PARAMS_1_1 = IMPERSONATION_QUERY_PARAMS_1.next(); !IMPERSONATION_QUERY_PARAMS_1_1.done; IMPERSONATION_QUERY_PARAMS_1_1 = IMPERSONATION_QUERY_PARAMS_1.next()) {
            var param = IMPERSONATION_QUERY_PARAMS_1_1.value;
            if (currentQuery[param])
                preservedQuery[param] = currentQuery[param];
        }
    }
    catch (e_1_1) { e_1 = { error: e_1_1 }; }
    finally {
        try {
            if (IMPERSONATION_QUERY_PARAMS_1_1 && !IMPERSONATION_QUERY_PARAMS_1_1.done && (_a = IMPERSONATION_QUERY_PARAMS_1.return)) _a.call(IMPERSONATION_QUERY_PARAMS_1);
        }
        finally { if (e_1) throw e_1.error; }
    }
    var newQueryString = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_3__["generateQueryString"])(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, preservedQuery, query));
    var pHash = url.indexOf('#');
    return pHash >= 0 ?
        "" + url.substr(0, pHash) + newQueryString + url.substr(pHash) :
        "" + url + newQueryString;
}


/***/ }),

/***/ "./src/apis/buttons.tsx":
/*!******************************!*\
  !*** ./src/apis/buttons.tsx ***!
  \******************************/
/*! exports provided: DriveButton */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DriveButton", function() { return DriveButton; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var IconDrive = function (_a) {
    var _b = _a.size, size = _b === void 0 ? 30 : _b;
    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("svg", { width: size, version: "1.1", xmlns: "http://www.w3.org/2000/svg", xmlnsXlink: "http://www.w3.org/1999/xlink", viewBox: "0 0 508.52 508.52", fill: "#ffffff", style: { verticalAlign: "middle", marginRight: "4px" } },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("polygon", { points: "484.492,284.58 339.024,32.577 169.496,32.577 314.996,284.58" }),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("polygon", { points: "145.437,74.276 0,326.279 84.764,473.05 230.169,221.143" }),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("polygon", { points: "234.396,316.363 143.371,475.943 423.756,475.943 508.52,316.36" })));
};
var IconClassroom = function (_a) {
    var _b = _a.size, size = _b === void 0 ? 30 : _b;
    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("svg", { width: size, xmlns: "http://www.w3.org/2000/svg", xmlnsXlink: "http://www.w3.org/1999/xlink", viewBox: "0 0 24 24", version: "1.1" },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("path", { d: "M5 2C3.348 2 2 3.348 2 5v14c0 1.652 1.348 3 3 3h14c1.652 0 3-1.348 3-3V5c0-1.652-1.348-3-3-3zm0 2h14c.55 0 1 .45 1 1v14c0 .55-.45 1-1 1h-1v-2h-5v2H5c-.55 0-1-.45-1-1V5c0-.55.45-1 1-1zm7 2a1.999 1.999 0 1 0 0 4 1.999 1.999 0 1 0 0-4zM7.5 8a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm9 0a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM12 11c-2.66 0-3.5 2.5-3.5 2.5 0-.848.5-1.5.5-1.5-.3-.188-1.07-.313-1.438-.313-1.214 0-2.562 1.192-2.562 2V16h14v-2.313c0-.808-1.512-2-2.563-2-.367 0-1.136.126-1.437.313 0 0 .5.652.5 1.5 0 0-.84-2.5-3.5-2.5z" })));
};
var DriveButton = function (_a) {
    var _b = _a.label, label = _b === void 0 ? 'Google Drive' : _b, action = _a.action;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("a", { className: "btn", onClick: action },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(IconDrive, { size: 16 }),
        " ",
        label);
};


/***/ }),

/***/ "./src/apis/configs.ts":
/*!*****************************!*\
  !*** ./src/apis/configs.ts ***!
  \*****************************/
/*! exports provided: WebClientId, TemplatesFileId */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WebClientId", function() { return WebClientId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TemplatesFileId", function() { return TemplatesFileId; });
// Client id for GoogleWebClient
var WebClientId = "421572262269-u68v5lf5o8ss5t68l8gkq3pfarh6dbkv.apps.googleusercontent.com";
// Google Drive File Id to json file with Tamplates for Course Builder (Classroom)
var TemplatesFileId = 'https://docs.google.com/document/d/1V7exG6vN83Sq8kb6uz1B6DaZDVO9eLcJbP7XF0vL4dY/export?format=txt';


/***/ }),

/***/ "./src/apis/edsclient.ts":
/*!*******************************!*\
  !*** ./src/apis/edsclient.ts ***!
  \*******************************/
/*! exports provided: EdsClient, EDSPeriod, parseJsonDate_old */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EdsClient", function() { return EdsClient; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EDSPeriod", function() { return EDSPeriod; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseJsonDate_old", function() { return parseJsonDate_old; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _utils_school_moment__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/school-moment */ "./src/utils/school-moment.ts");
/* harmony import */ var _utils_school_term__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/school-term */ "./src/utils/school-term.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _mock_mock_eds_data_json__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./mock/mock-eds-data.json */ "./src/apis/mock/mock-eds-data.json");
var _mock_mock_eds_data_json__WEBPACK_IMPORTED_MODULE_5___namespace = /*#__PURE__*/__webpack_require__.t(/*! ./mock/mock-eds-data.json */ "./src/apis/mock/mock-eds-data.json", 1);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _utils_make_suspense_api__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/make-suspense-api */ "./src/utils/make-suspense-api.ts");









var EdsClient = /** @class */ (function () {
    function EdsClient(isomorphic, baseUrl, bearerProvider, userEmailGetter) {
        var _this = this;
        this.http = new kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["RestClient"](isomorphic, baseUrl, { bearerProvider: bearerProvider });
        this.userEmailGetter = userEmailGetter;
        var isApiMethod = function (m) {
            return typeof _this[m] === 'function' &&
                m !== 'constructor' && // Since makeSuspenseApi() walks prototype chain
                m !== 'privatizingCacheBust' &&
                m !== 'userEmailGetter';
        } // List non-API methods here...
        ;
        Object.keys(EdsClient.prototype).forEach(function (method) {
            if (isApiMethod(method)) {
                _this[method] = avoidSimultanousCalls(_this[method]);
            }
        });
        this.suspense = Object(_utils_make_suspense_api__WEBPACK_IMPORTED_MODULE_7__["makeSuspenseApi"])(this, { isApiMethod: isApiMethod });
    }
    EdsClient.prototype.privatizingCacheBust = function () {
        return { user: this.userEmailGetter() };
    };
    /**
       * Retrieve active courses for current logged in student.
       *
       * @param courseCode Short-name of the course. Optional.
       */
    EdsClient.prototype.getActiveCourses = function (q) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var query, res, _a, _b, json, ex_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _c.trys.push([0, 5, , 6]);
                        query = this.privatizingCacheBust();
                        if (q) {
                            if (q.courseCode)
                                query.CourseCode = q.courseCode;
                            if (q.periodName)
                                query.PeriodName = q.periodName;
                        }
                        return [4 /*yield*/, this.http.get("studentactivecourses", query)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.courses];
                    case 5:
                        ex_1 = _c.sent();
                        console.error("Error from EDS: " + ex_1);
                        throw new Error(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Kunde tyv\u00E4rr inte ladda terminsm\u00E5l eller avklarade steg fr\u00E5n EDS. F\u00F6rs\u00F6k igen senare..."], ["Kunde tyv\u00E4rr inte ladda terminsm\u00E5l eller avklarade steg fr\u00E5n EDS. F\u00F6rs\u00F6k igen senare..."]))));
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    /**
     * Retrieve latest assessments for current logged in user.
     *
     * @param limit Optional limit
     */
    EdsClient.prototype.getLatestAssessments = function (limit) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var query, res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        query = this.privatizingCacheBust();
                        if (!isNaN(limit))
                            query.Count = limit;
                        return [4 /*yield*/, this.http.get("studentassessments", query)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.assessments];
                }
            });
        });
    };
    /**
     * Retrieve studyplans for current logged-in user
     */
    EdsClient.prototype.getStudentGoals = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("studentgoals", this.privatizingCacheBust())];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.studentGoals];
                }
            });
        });
    };
    EdsClient.prototype.getStudentFutureAbilities = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("studentFutureAbilities", this.privatizingCacheBust())];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.studentFutureAbilities];
                }
            });
        });
    };
    EdsClient.prototype.getTeacherTutorStudents = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("teachertutorstudents", this.privatizingCacheBust())];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.students];
                }
            });
        });
    };
    /**
     * getSchoolTuitionGroups()
     *
     * Return tuitiongroups for school
     *
     * @param schoolName - name of school
     * @param courseCode - Skolverkets code for course
     */
    EdsClient.prototype.getSchoolTuitionGroups = function (q) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("SchoolTuitionGroups", tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.privatizingCacheBust(), q))];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.schoolTuitionGroups];
                }
            });
        });
    };
    /**
     * getTuitionGroupStudents()
     *
     * Return name and mailadresses for tutitiongroups in schools
     *
     * @param schoolName - name of school
     * @param tuitionGroupName - tuition gruop name in EDS
     */
    EdsClient.prototype.getTuitionGroupStudents = function (q) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("TuitionGroupStudents", tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.privatizingCacheBust(), q))];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.tuitionGroupStudents];
                }
            });
        });
    };
    /**
     * getSchoolTeachers()
     *
     * Return name and mailadresses for tutitiongroups in schools
     *
     * @param schoolName - name of school
     */
    EdsClient.prototype.getSchoolTeachers = function (q) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("SchoolTeachers", tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.privatizingCacheBust(), q))];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.schoolTeachers];
                }
            });
        });
    };
    // we assume that the EDS will return the current academic year dates determined by the current date
    EdsClient.prototype.getAcademicYearTerms = function (schoolLocale, date) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var holidays, firstTermMoment, secondTermMoment, startFirstTermDate, startSecondTermDate, endFirstTermDate, endSecondTermDate, firstTerm, secondTerm;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                // mock data
                switch (schoolLocale) {
                    case 'en_sin':
                        return [2 /*return*/, _mock_mock_eds_data_json__WEBPACK_IMPORTED_MODULE_5__.SouthIndia.filter(function (f) { return moment__WEBPACK_IMPORTED_MODULE_6___default()(date).isSameOrAfter(f.firstTerm.startDate) && moment__WEBPACK_IMPORTED_MODULE_6___default()(date).isSameOrBefore(f.secondTerm.endDate); })[0]];
                    case 'en_nin':
                        return [2 /*return*/, _mock_mock_eds_data_json__WEBPACK_IMPORTED_MODULE_5__.NorthIndia.filter(function (f) { return moment__WEBPACK_IMPORTED_MODULE_6___default()(date).isSameOrAfter(f.firstTerm.startDate) && moment__WEBPACK_IMPORTED_MODULE_6___default()(date).isSameOrBefore(f.secondTerm.endDate); })[0]];
                    case 'sv':
                        {
                            holidays = [];
                            firstTermMoment = Object(_utils_school_moment__WEBPACK_IMPORTED_MODULE_2__["getTermStarEndDate"])(date, true);
                            secondTermMoment = Object(_utils_school_moment__WEBPACK_IMPORTED_MODULE_2__["getTermStarEndDate"])(date, false);
                            startFirstTermDate = firstTermMoment[0];
                            startSecondTermDate = secondTermMoment[0];
                            endFirstTermDate = firstTermMoment[1];
                            endSecondTermDate = secondTermMoment[1];
                            firstTerm = { startDate: new Date(startFirstTermDate.year(), startFirstTermDate.month(), startFirstTermDate.date()).toDateString(), endDate: new Date(startFirstTermDate.year(), endFirstTermDate.month(), endFirstTermDate.date()).toDateString() };
                            secondTerm = { startDate: new Date(startSecondTermDate.year(), startSecondTermDate.month(), startSecondTermDate.date()).toDateString(), endDate: new Date(startSecondTermDate.year(), endSecondTermDate.month(), endSecondTermDate.date()).toDateString() };
                            return [2 /*return*/, { firstTerm: firstTerm, secondTerm: secondTerm, holidays: holidays }];
                        }
                }
                return [2 /*return*/];
            });
        });
    };
    return EdsClient;
}());

var EDSPeriod = /** @class */ (function () {
    function EDSPeriod(periodStringOrSchoolTerm) {
        if (typeof periodStringOrSchoolTerm === 'string') {
            this.period = periodStringOrSchoolTerm;
            this.term = this.period.startsWith('HT') ? 'AT' : 'ST';
            this.year = parseInt(this.period.substr(2));
            if (isNaN(this.year))
                throw new Error("Invalid period: " + this.period);
        }
        else {
            var schoolTerm = new _utils_school_term__WEBPACK_IMPORTED_MODULE_3__["SchoolTerm"](periodStringOrSchoolTerm);
            this.period = (schoolTerm.term === 'AT' ? "HT" : "VT") + schoolTerm.year;
            this.term = schoolTerm.term;
            this.year = schoolTerm.year;
        }
    }
    Object.defineProperty(EDSPeriod.prototype, "schoolTerm", {
        get: function () {
            return new _utils_school_term__WEBPACK_IMPORTED_MODULE_3__["SchoolTerm"]({
                academicYear: this.term === 'AT' ?
                    this.year + "/" + (this.year + 1) :
                    this.year - 1 + "/" + this.year,
                term: this.term
            });
        },
        enumerable: true,
        configurable: true
    });
    EDSPeriod.prototype.toString = function () {
        return this.period;
    };
    EDSPeriod.prototype.valueOf = function () {
        return this.year + ":" + (this.term === 'ST' ? "1" : "2");
    };
    return EDSPeriod;
}());

function parseJsonDate_old(jsonDateStr) {
    var date = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["dateTimeReviver"])("", jsonDateStr);
    if (!(date instanceof Date))
        throw new Error("Invalid JSON date string: " + jsonDateStr);
    return date;
}
function avoidSimultanousCalls(method) {
    var ongoingPromises = {};
    return function () {
        var argsJson = JSON.stringify([].slice.call(arguments));
        if (!ongoingPromises[argsJson]) {
            ongoingPromises[argsJson] = method.apply(this, arguments).then(function (result) {
                delete ongoingPromises[argsJson];
                return result;
            });
        }
        return ongoingPromises[argsJson];
    };
}
var templateObject_1;


/***/ }),

/***/ "./src/apis/google-client.ts":
/*!***********************************!*\
  !*** ./src/apis/google-client.ts ***!
  \***********************************/
/*! exports provided: GoogleClient */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GoogleClient", function() { return GoogleClient; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");


var GoogleClient = /** @class */ (function () {
    function GoogleClient(discoveryDocs) {
        this.googleTokenProvider = _globals_KED_env__WEBPACK_IMPORTED_MODULE_1__["env"].googleTokenProvider;
        this.discoveryDocs = [];
        this.discoveryDocs.push(discoveryDocs);
    }
    GoogleClient.prototype.setBearerProvider = function (googleTokenProvider) {
        this.googleTokenProvider = googleTokenProvider;
    };
    GoogleClient.prototype.ensureInited = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var tokenResult;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!(typeof gapi === 'undefined')) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.loadGapi()];
                    case 1:
                        _a.sent();
                        _a.label = 2;
                    case 2:
                        if (!(!this.tokenExpiration || this.tokenExpiration < new Date())) return [3 /*break*/, 4];
                        return [4 /*yield*/, this.googleTokenProvider.getBearer()];
                    case 3:
                        tokenResult = _a.sent();
                        this.tokenExpiration = new Date(tokenResult.expires);
                        this.token = tokenResult.token;
                        gapi.client.setToken({
                            access_token: tokenResult.token
                        });
                        _a.label = 4;
                    case 4: 
                    // Load all discovyerDocs
                    return [4 /*yield*/, gapi.client.init({
                            discoveryDocs: this.discoveryDocs
                        })];
                    case 5:
                        // Load all discovyerDocs
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    GoogleClient.prototype.loadGapi = function () {
        return new Promise(function (resolve) {
            if (typeof gapi !== 'undefined')
                return resolve();
            var script = document.createElement('script');
            script.src = "https://apis.google.com/js/client.js?onload=gaapi_loaded";
            document.getElementsByTagName("head")[0].appendChild(script);
            window.gaapi_loaded = resolve;
        });
    };
    return GoogleClient;
}());



/***/ }),

/***/ "./src/apis/google-drive.ts":
/*!**********************************!*\
  !*** ./src/apis/google-drive.ts ***!
  \**********************************/
/*! exports provided: GoogleDrive */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GoogleDrive", function() { return GoogleDrive; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _google_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./google-client */ "./src/apis/google-client.ts");


var GoogleDrive = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](GoogleDrive, _super);
    function GoogleDrive() {
        return _super.call(this, 'https://www.googleapis.com/discovery/v1/apis/drive/v3/rest') || this;
    }
    GoogleDrive.prototype.getFile = function (fileId) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.ensureInited()];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, gapi.client.drive.files.get({
                                fileId: fileId,
                                supportsAllDrives: true,
                                fields: 'id,name,mimeType,webViewLink,iconLink,modifiedTime,thumbnailLink'
                            }).then(function (resp) {
                                if (resp.result.name) {
                                    var file = resp.result;
                                    return { fileId: file.id, url: file.webViewLink, mimeType: file.mimeType, name: file.name, modiifiedTime: file.modifiedTime, iconUrl: file.iconLink, thumbnailUrl: file.thumbnailLink };
                                }
                                return false;
                            })];
                }
            });
        });
    };
    /**
     * updatePermissions()
     *
     * @param fileId
     *
     * Make the file accessible to all in the domain. Should be unnecessary but some
     * teachers have changed their default permissions.
     * We don't care right now if this fails because this is just an extra precaution.
     * If we plan on using this on other domains the domain-attribute needs to be dynamic.
     *
     */
    GoogleDrive.prototype.updatePermissions = function (fileId) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        console.log('updating permissions');
                        return [4 /*yield*/, this.ensureInited()];
                    case 1:
                        _a.sent();
                        gapi.client.drive.permissions.create({
                            fileId: fileId,
                            sendNotificationEmail: false,
                            role: 'reader',
                            type: 'anyone',
                            // type: 'domain', 
                            // domain: 'kunskapsskolan.se'
                            supportsAllDrives: true
                        }).then(function (resp) { return console.log(resp); });
                        return [2 /*return*/];
                }
            });
        });
    };
    GoogleDrive.prototype.createFolder = function (name, parent) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        console.log('Creating folder ' + name);
                        return [4 /*yield*/, this.ensureInited()];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, gapi.client.drive.files.create({
                                name: name,
                                mimeType: 'application/vnd.google-apps.folder',
                                parents: [parent]
                            }).then(function (resp) { return resp.result; })];
                }
            });
        });
    };
    GoogleDrive.prototype.getIdForFolderPath = function (path) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var parent, path_1, path_1_1, folder, folderId, newFolder, e_1_1;
            var e_1, _a;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        console.log('Getting id for ' + path.join('/'));
                        return [4 /*yield*/, this.ensureInited()];
                    case 1:
                        _b.sent();
                        parent = 'root';
                        _b.label = 2;
                    case 2:
                        _b.trys.push([2, 9, 10, 11]);
                        path_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](path), path_1_1 = path_1.next();
                        _b.label = 3;
                    case 3:
                        if (!!path_1_1.done) return [3 /*break*/, 8];
                        folder = path_1_1.value;
                        return [4 /*yield*/, this.getIdForFolder(folder, parent)];
                    case 4:
                        folderId = _b.sent();
                        if (!folderId) return [3 /*break*/, 5];
                        parent = folderId;
                        return [3 /*break*/, 7];
                    case 5: return [4 /*yield*/, this.createFolder(folder, parent)];
                    case 6:
                        newFolder = _b.sent();
                        parent = newFolder.id;
                        _b.label = 7;
                    case 7:
                        path_1_1 = path_1.next();
                        return [3 /*break*/, 3];
                    case 8: return [3 /*break*/, 11];
                    case 9:
                        e_1_1 = _b.sent();
                        e_1 = { error: e_1_1 };
                        return [3 /*break*/, 11];
                    case 10:
                        try {
                            if (path_1_1 && !path_1_1.done && (_a = path_1.return)) _a.call(path_1);
                        }
                        finally { if (e_1) throw e_1.error; }
                        return [7 /*endfinally*/];
                    case 11: return [2 /*return*/, parent];
                }
            });
        });
    };
    GoogleDrive.prototype.getIdForFolder = function (name, parent) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        console.log('Getting id for ' + name);
                        return [4 /*yield*/, this.ensureInited()];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, gapi.client.drive.files.list({
                                corpora: 'user',
                                q: "'" + parent + "' in parents and mimeType = 'application/vnd.google-apps.folder' and name = '" + name + "'"
                            }).then(function (resp) {
                                if (resp.result.files.length) {
                                    return resp.result.files[0].id;
                                }
                                else {
                                    return false;
                                }
                            })];
                }
            });
        });
    };
    GoogleDrive.prototype.copyFile = function (file, destination) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var parent_1, parent_2;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        console.log('Copying file: ' + file.name);
                        return [4 /*yield*/, this.ensureInited()];
                    case 1:
                        _a.sent();
                        if (!destination) return [3 /*break*/, 3];
                        return [4 /*yield*/, this.getIdForFolderPath(destination)];
                    case 2:
                        parent_1 = _a.sent();
                        return [3 /*break*/, 4];
                    case 3:
                        parent_2 = 'root';
                        _a.label = 4;
                    case 4: return [2 /*return*/, gapi.client.drive.files.copy({
                            fileId: file.id,
                            supportsAllDrives: true,
                            parents: [parent],
                            name: file.name,
                            fields: 'id,name,mimeType,webViewLink,iconLink,modifiedTime,thumbnailLink'
                        }).then(function (resp) { return resp.result; })];
                }
            });
        });
    };
    /**
     * downloadFile()
     * @param file
     *
     * When Classroom has been integrated we will want to handle only the fileId:s
     * so that editing capabilities are peserved on the file (if it is a google-apps file)
     * Right now google-apps files are converted to pdf and passed into the current flow.
     *
     * TODO: error handling
     */
    GoogleDrive.prototype.downloadFile = function (_a) {
        var file = _a.file, limitSize = _a.limitSize;
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var xhrDownload_1;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0: 
                    // A file that can be exported to PDF is retreived with
                    // file.export() from Drive, converted to a blob and then
                    // to a File.
                    // A file that can not be exported to PDF is retrieved
                    // through XHR and converted to a File.
                    // If we don't need to handle the physical files on the client
                    // we could save only the fileId:s and display filename and mimeType
                    // for the file in our listings. When/if we use Google Classroom for
                    // our task-handling that would be the preferred approach to keep
                    // the file as an editable Google file
                    // Init the drive-api (only needed for download so not loaded initially)
                    return [4 /*yield*/, this.ensureInited()];
                    case 1:
                        // A file that can be exported to PDF is retreived with
                        // file.export() from Drive, converted to a blob and then
                        // to a File.
                        // A file that can not be exported to PDF is retrieved
                        // through XHR and converted to a File.
                        // If we don't need to handle the physical files on the client
                        // we could save only the fileId:s and display filename and mimeType
                        // for the file in our listings. When/if we use Google Classroom for
                        // our task-handling that would be the preferred approach to keep
                        // the file as an editable Google file
                        // Init the drive-api (only needed for download so not loaded initially)
                        _b.sent();
                        if (file.canExport) {
                            return [2 /*return*/, new Promise(function (resolve, reject) {
                                    gapi.client.drive.files.export({
                                        fileId: file.fileId,
                                        mimeType: 'application/pdf'
                                    }).then(function (resp) {
                                        var len = resp.body.length;
                                        var data = new Uint8Array(new ArrayBuffer(len));
                                        for (var i = 0; i < len; i++) {
                                            data[i] = resp.body.charCodeAt(i);
                                        }
                                        var blob = new Blob([data], { type: 'application/pdf' });
                                        var filename = file.name + '.pdf';
                                        resolve(new File([blob], filename, { type: 'application/pdf', lastModified: file.modifiedTime }));
                                    });
                                })];
                        }
                        else {
                            xhrDownload_1 = function (file) {
                                return new Promise(function (resolve, reject) {
                                    var xhr = new XMLHttpRequest();
                                    xhr.open("GET", "https://www.googleapis.com/drive/v3/files/" + file.fileId + '?alt=media', true);
                                    xhr.setRequestHeader('Authorization', 'Bearer ' + _this.token);
                                    xhr.responseType = 'blob';
                                    xhr.onload = function () {
                                        resolve(new File([xhr.response], file.name, { type: file.mimeType, lastModified: file.modifiedTime }));
                                    };
                                    xhr.send();
                                });
                            };
                            return [2 /*return*/, new Promise(function (resolve, reject) {
                                    if (limitSize !== undefined) {
                                        gapi.client.drive.files.get({
                                            fileId: file.fileId,
                                            fields: 'size'
                                        }).then(function (resp) {
                                            var size = Number(resp.result.size);
                                            if (size > limitSize * 1024 * 1024) {
                                                reject('GooglePickerError: Filsize is too laarge');
                                            }
                                        }).then(function () {
                                            xhrDownload_1(file).then(function (resp) {
                                                resolve(resp);
                                            });
                                        });
                                    }
                                    else {
                                        xhrDownload_1(file).then(function (resp) {
                                            resolve(resp);
                                        });
                                    }
                                })];
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    return GoogleDrive;
}(_google_client__WEBPACK_IMPORTED_MODULE_1__["GoogleClient"]));



/***/ }),

/***/ "./src/apis/google-picker.ts":
/*!***********************************!*\
  !*** ./src/apis/google-picker.ts ***!
  \***********************************/
/*! exports provided: GooglePicker */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GooglePicker", function() { return GooglePicker; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _google_webclient__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./google-webclient */ "./src/apis/google-webclient.ts");
/* harmony import */ var _google_drive__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./google-drive */ "./src/apis/google-drive.ts");



var mimeTypeCollections = {
    'google-apps': 'application/vnd.google-apps.document,application/vnd.google-apps.presentation,application/vnd.google-apps.spreadsheet',
    'pdf': 'application/pdf'
};
/**
 * GooglePicker
 * Includes the initiation of the correct api:s.
 * Certain options can be passed to the constructor
 * and there could be others worth incorporating (i.e. Team Drive-support).
 *
 * Right now two options are handled:
 * - upload: if a user can upload to Drive in the Google Drive Picker
 * - multiple: if a user can select multiple files
 * - limitType: active limits to certain mimeTypesCollections
 *
 * We could probably split this into google-picker and google-drive where google-drive
 * handles the explicit calls to the google drive api.
 */
var GooglePicker = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](GooglePicker, _super);
    function GooglePicker(options) {
        var _this = _super.call(this, ['https://www.googleapis.com/auth/drive']) || this;
        _this.options = { upload: false, multiple: false, limitType: false };
        Object.assign(_this.options, options);
        console.log(_this.options);
        _this.drive = new _google_drive__WEBPACK_IMPORTED_MODULE_2__["GoogleDrive"]();
        return _this;
    }
    /**
     * show()
     *
     * If a single file is requested from the picker a list of files with one element is returned.
     * It is up to the caller to handle the list in a relevant manner.
     *
     * More data from the file could be extracted if it is deemed necessary.
     *
     */
    GooglePicker.prototype.show = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.ensureInited()];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, new Promise(function (resolve, reject) {
                                var callback = function (response) {
                                    if (response['action'] == google.picker.Action.CANCEL) {
                                        reject();
                                    }
                                    else if (response['action'] == google.picker.Action.PICKED) {
                                        var selected_1 = [];
                                        response.docs.map(function (doc) {
                                            var fileId = doc.id, mimeType = doc.mimeType, name = doc.name, modifiedTime = doc.modifiedTime, iconUrl = doc.iconUrl, url = doc.url;
                                            var canExport = mimeType.includes('google-apps');
                                            selected_1.push({ fileId: fileId, mimeType: mimeType, name: name, modifiedTime: modifiedTime, canExport: canExport, iconUrl: iconUrl, url: url });
                                            // update permissions to read by all in domain
                                            _this.drive.updatePermissions(fileId);
                                        });
                                        console.log(selected_1);
                                        resolve(selected_1);
                                    }
                                };
                                var pickerbuilder = new google.picker.PickerBuilder()
                                    .enableFeature(google.picker.Feature.SUPPORT_DRIVES)
                                    .enableFeature(google.picker.Feature.SUPPORT_TEAM_DRIVES)
                                    .addView(new google.picker.DocsView()
                                    .setOwnedByMe(true) // should this be an option?
                                    .setIncludeFolders(true))
                                    .addView(new google.picker.DocsView()
                                    .setIncludeFolders(true)
                                    .setEnableTeamDrives(true))
                                    .setLocale("sv") // should this be an option?
                                    .setSize(1051, 650) // should this be an option?
                                    .setOAuthToken(_this.authToken)
                                    .setCallback(callback);
                                if (_this.options.upload) {
                                    pickerbuilder.addView(new google.picker.DocsUploadView().setIncludeFolders(true));
                                }
                                if (_this.options.multiple) {
                                    pickerbuilder.enableFeature(google.picker.Feature.MULTISELECT_ENABLED);
                                }
                                if (_this.options.limitType) {
                                    var mimeTypes = mimeTypeCollections[_this.options.limitType];
                                    console.log(mimeTypes);
                                    pickerbuilder.setSelectableMimeTypes(mimeTypes);
                                }
                                _this.picker = pickerbuilder.build();
                                _this.picker.setVisible(true);
                            })];
                }
            });
        });
    };
    return GooglePicker;
}(_google_webclient__WEBPACK_IMPORTED_MODULE_1__["GoogleWebClient"]));



/***/ }),

/***/ "./src/apis/google-webclient.ts":
/*!**************************************!*\
  !*** ./src/apis/google-webclient.ts ***!
  \**************************************/
/*! exports provided: GoogleWebClient */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GoogleWebClient", function() { return GoogleWebClient; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _configs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./configs */ "./src/apis/configs.ts");



var GoogleWebClient = /** @class */ (function () {
    function GoogleWebClient(scopes) {
        var _a;
        this.scopes = ['https://www.googleapis.com/auth/userinfo.email', 'https://www.googleapis.com/auth/userinfo.profile'];
        (_a = this.scopes).push.apply(_a, tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](scopes));
    }
    GoogleWebClient.prototype.ensureInited = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var SCOPES;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!(typeof gapi === "undefined")) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.loadGapi()];
                    case 1:
                        _a.sent();
                        _a.label = 2;
                    case 2:
                        SCOPES = this.scopes.join(' ');
                        return [4 /*yield*/, new Promise(function (resolve, reject) {
                                gapi.load("client:auth2", function () {
                                    // Calls authorize without prompting the user. If authorization hasn't been given by
                                    // the user an error is returned and we call authorize again with consent-screen
                                    var reauthorize = false;
                                    return gapi.auth2.authorize({
                                        client_id: _configs__WEBPACK_IMPORTED_MODULE_2__["WebClientId"],
                                        scope: SCOPES,
                                        response_type: 'permission',
                                        login_hint: _globals_KED_env__WEBPACK_IMPORTED_MODULE_1__["default"].currentUser.mail,
                                        prompt: 'none'
                                    }, function (resp) {
                                        console.log(resp);
                                        if (resp.error) {
                                            // no consent given so reauthorize
                                            reauthorize = true;
                                        }
                                        else {
                                            // check if we have all the scopes we want
                                            var scopeset_1 = new Set(resp.scope.split(' '));
                                            var missingScopes = _this.scopes.filter(function (x) { return !scopeset_1.has(x); });
                                            if (missingScopes.length > 0) {
                                                console.log('missing scopes');
                                                // scopes are missing from our consent so reauthorize
                                                reauthorize = true;
                                            }
                                            else {
                                                // everything seems to be ok so store our token
                                                _this.authToken = resp.access_token;
                                                resolve();
                                            }
                                        }
                                        if (reauthorize) {
                                            console.log('reauthorize');
                                            return gapi.auth2.authorize({
                                                client_id: _configs__WEBPACK_IMPORTED_MODULE_2__["WebClientId"],
                                                scope: SCOPES,
                                                response_type: 'permission',
                                                login_hint: _globals_KED_env__WEBPACK_IMPORTED_MODULE_1__["default"].currentUser.mail,
                                                prompt: 'consent'
                                            }, function (resp) {
                                                console.log(resp);
                                                if (resp.error) {
                                                    // something is still wrong so throw an error
                                                    reject('Google Web Client: No access token');
                                                }
                                                else {
                                                    // we now have a token (hopefully with the right scopes)
                                                    // should we check again?
                                                    _this.authToken = resp.access_token;
                                                    resolve();
                                                }
                                            });
                                        }
                                        if (resp.expires_in < 500) {
                                            return gapi.auth2.authorize({
                                                client_id: _configs__WEBPACK_IMPORTED_MODULE_2__["WebClientId"],
                                                scope: SCOPES,
                                                response_type: 'permission',
                                                login_hint: _globals_KED_env__WEBPACK_IMPORTED_MODULE_1__["default"].currentUser.mail,
                                                prompt: 'none'
                                            }, function (resp) {
                                                _this.authToken = resp.access_token;
                                                resolve();
                                            });
                                        }
                                    });
                                });
                            })];
                    case 3:
                        _a.sent();
                        if (!(typeof google === "undefined" || typeof google.picker === "undefined")) return [3 /*break*/, 5];
                        return [4 /*yield*/, new Promise(function (resolve) {
                                gapi.load("picker", function () { resolve(); });
                            })];
                    case 4:
                        _a.sent();
                        _a.label = 5;
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    GoogleWebClient.prototype.loadGapi = function () {
        return new Promise(function (resolve, reject) {
            if (typeof gapi !== "undefined")
                return resolve();
            var script = document.createElement("script");
            script.src = "https://apis.google.com/js/client.js?onload=gaapi_loaded";
            document.getElementsByTagName("head")[0].appendChild(script);
            window.gaapi_loaded = resolve;
        });
    };
    return GoogleWebClient;
}());



/***/ }),

/***/ "./src/apis/mock/mock-classroom-data.ts":
/*!**********************************************!*\
  !*** ./src/apis/mock/mock-classroom-data.ts ***!
  \**********************************************/
/*! exports provided: mockTeachers, mockTuitionGroups, mockTuitionStudents */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mockTeachers", function() { return mockTeachers; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mockTuitionGroups", function() { return mockTuitionGroups; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mockTuitionStudents", function() { return mockTuitionStudents; });
var createStudents = function (group, n, m) {
    var students = [];
    for (var i = n; i <= m; i++) {
        students.push({
            schoolName: 'KED',
            tuitionGroupName: group,
            studentFirstName: 'Student ' + i,
            studentLastName: 'Classroom',
            studentEmailAddress: 'student' + i + '.classroom@kedschools.com'
        });
    }
    return students;
};
var mockTeachers = [
    {
        schoolName: 'KED',
        teacherFirstName: 'Teacher 1',
        teacherLastName: 'Classroom',
        teacherEmailAddress: 'teacher1.classroom@kedschools.com'
    },
    {
        schoolName: 'KED',
        teacherFirstName: 'Teacher 2',
        teacherLastName: 'Classroom',
        teacherEmailAddress: 'teacher2.classroom@kedschools.com'
    },
    {
        schoolName: 'KED',
        teacherFirstName: 'Teacher 3',
        teacherLastName: 'Classroom',
        teacherEmailAddress: 'teacher3.classroom@kedschools.com'
    },
    {
        schoolName: 'KED',
        teacherFirstName: 'Carl',
        teacherLastName: 'Holmberg',
        teacherEmailAddress: 'carl@kedschools.com'
    },
    {
        schoolName: 'KED',
        teacherFirstName: 'David',
        teacherLastName: 'Fahlander',
        teacherEmailAddress: 'david.fahlander@kedschools.com'
    }
];
var mockTuitionGroups = {
    'DJUSL01': [
        {
            schoolName: 'KED',
            tuitionGroupName: 'IDR1_Gr1 (180816-190614)',
            courseCode: 'DJUSL01'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'IDR1_Gr2 (180816-190614)',
            courseCode: 'DJUSL01'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'IDR1_Gr3 (180816-190614)',
            courseCode: 'DJUSL01'
        }
    ],
    'DJUDJI0': [
        {
            schoolName: 'KED',
            tuitionGroupName: 'DJUDJ_Gr1 (180816-190614)',
            courseCode: 'DJUDJI0'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'DJUDJ_Gr2 (180816-190614)',
            courseCode: 'DJUDJI0'
        },
    ],
    'KEMKEM01': [
        {
            schoolName: 'KED',
            tuitionGroupName: 'KEM1_Gr1 (180816-190614)',
            courseCode: 'KEMKEM01'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'KEM1_Gr2 (180816-190614)',
            courseCode: 'KEMKEM01'
        }
    ],
    'BIOBIO01': [
        {
            schoolName: 'KED',
            tuitionGroupName: 'BIO1_Gr1 (180816-190614)',
            courseCode: 'BIOBIO01'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'BIO1_Gr2 (180816-190614)',
            courseCode: 'BIOBIO01'
        }
    ],
    'SVESVE03': [
        {
            schoolName: 'KED',
            tuitionGroupName: 'SVE3_Gr1 (180816-190614)',
            courseCode: 'SVESVE03'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'SVE3_Gr2 (180816-190614)',
            courseCode: 'SVESVE03'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'SVE3_Gr3 (180816-190614)',
            courseCode: 'SVESVE03'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'SVE3_Gr4 (180816-190614)',
            courseCode: 'SVESVE03'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'SVE3_Gr5 (180816-190614)',
            courseCode: 'SVESVE03'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'SVE3_Gr6 (180816-190614)',
            courseCode: 'SVESVE03'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'SVE3_Gr7 (180816-190614)',
            courseCode: 'SVESVE03'
        }
    ]
};
var mockTuitionStudents = {
    'IDR1_Gr1 (180816-190614)': createStudents('IDR1_Gr1 (180816-190614)', 1, 12),
    'IDR1_Gr2 (180816-190614)': createStudents('IDR1_Gr2 (180816-190614)', 13, 22),
    'IDR1_Gr3 (180816-190614)': createStudents('IDR1_Gr3 (180816-190614)', 23, 34),
    'DJUDJ_Gr1 (180816-190614)': [
        {
            schoolName: 'KED',
            tuitionGroupName: 'DJUDJ_Gr1 (180816-190614)',
            studentFirstName: 'Andrei',
            studentLastName: 'Spatarelu',
            studentEmailAddress: 'andrei.spatarelu@vemendo.se'
        },
    ],
    'DJUDJ_Gr2 (180816-190614)': [
        {
            schoolName: 'KED',
            tuitionGroupName: 'DJUDJ_Gr2 (180816-190614)',
            studentFirstName: 'Student 2',
            studentLastName: 'Classroom',
            studentEmailAddress: 'student2.classroom@kedschools.com'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'DJUDJ_Gr2 (180816-190614)',
            studentFirstName: 'Carl',
            studentLastName: 'Holmberg',
            studentEmailAddress: 'carl@kedschools.com'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'DJUDJ_Gr2 (180816-190614)',
            studentFirstName: 'Student 3',
            studentLastName: 'Classroom',
            studentEmailAddress: 'student3.classroom@kedschools.com'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'DJUDJ_Gr2 (180816-190614)',
            studentFirstName: 'David',
            studentLastName: 'Fahlander',
            studentEmailAddress: 'david.fahlander@vemendo.se'
        }
    ],
    'KEM1_Gr1 (180816-190614)': [
        {
            schoolName: 'KED',
            tuitionGroupName: 'KEM1_Gr1 (180816-190614)',
            studentFirstName: 'Student 2',
            studentLastName: 'Classroom',
            studentEmailAddress: 'student2.classroom@kedschools.com'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'KEM1_Gr1 (180816-190614)',
            studentFirstName: 'David',
            studentLastName: '',
            studentEmailAddress: 'david.fahlander@vemendo.se'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'KEM1_Gr1 (180816-190614)',
            studentFirstName: 'Student 3',
            studentLastName: 'Classroom',
            studentEmailAddress: 'student3.classroom@kedschools.com'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'KEM1_Gr1 (180816-190614)',
            studentFirstName: 'Student 8',
            studentLastName: 'Classroom',
            studentEmailAddress: 'student8.classroom@kedschools.com'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'KEM1_Gr1 (180816-190614)',
            studentFirstName: 'Student 9',
            studentLastName: 'Classroom',
            studentEmailAddress: 'student9.classroom@kedschools.com'
        }
    ],
    'KEM1_Gr2 (180816-190614)': [
        {
            schoolName: 'KED',
            tuitionGroupName: 'KEM1_Gr2 (180816-190614)',
            studentFirstName: 'Student 1',
            studentLastName: 'Classroom',
            studentEmailAddress: 'student1.classroom@kedschools.com'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'KEM1_Gr2 (180816-190614)',
            studentFirstName: 'Student 5',
            studentLastName: 'Classroom',
            studentEmailAddress: 'student5.classroom@kedschools.com'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'KEM1_Gr2 (180816-190614)',
            studentFirstName: 'Student 6',
            studentLastName: 'Classroom',
            studentEmailAddress: 'student6.classroom@kedschools.com'
        }
    ],
    'BIO1_Gr1 (180816-190614)': [
        {
            schoolName: 'KED',
            tuitionGroupName: 'BIO1_Gr1 (180816-190614)',
            studentFirstName: 'Student 1',
            studentLastName: 'Classroom',
            studentEmailAddress: 'student1.classroom@kedschools.com'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'BIO1_Gr1 (180816-190614)',
            studentFirstName: 'Student 4',
            studentLastName: 'Classroom',
            studentEmailAddress: 'student4.classroom@kedschools.com'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'BIO1_Gr1 (180816-190614)',
            studentFirstName: 'Student 6',
            studentLastName: 'Classroom',
            studentEmailAddress: 'student6.classroom@kedschools.com'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'BIO1_Gr1 (180816-190614)',
            studentFirstName: 'Student 10',
            studentLastName: 'Classroom',
            studentEmailAddress: 'student10.classroom@kedschools.com'
        }
    ],
    'BIO1_Gr2 (180816-190614)': [
        {
            schoolName: 'KED',
            tuitionGroupName: 'BIO1_Gr2 (180816-190614)',
            studentFirstName: 'Student 2',
            studentLastName: 'Classroom',
            studentEmailAddress: 'student2.classroom@kedschools.com'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'BIO1_Gr2 (180816-190614)',
            studentFirstName: 'Student 7',
            studentLastName: 'Classroom',
            studentEmailAddress: 'student7.classroom@kedschools.com'
        },
        {
            schoolName: 'KED',
            tuitionGroupName: 'BIO1_Gr2 (180816-190614)',
            studentFirstName: 'Student 8',
            studentLastName: 'Classroom',
            studentEmailAddress: 'student8.classroom@kedschools.com'
        },
    ],
    'SVE3_Gr1 (180816-190614)': createStudents('SVE3_Gr1 (180816-190614)', 1, 21),
    'SVE3_Gr2 (180816-190614)': createStudents('SVE3_Gr2 (180816-190614)', 22, 44),
    'SVE3_Gr3 (180816-190614)': createStudents('SVE3_Gr3 (180816-190614)', 45, 61),
    'SVE3_Gr4 (180816-190614)': createStudents('SVE3_Gr4 (180816-190614)', 62, 78),
    'SVE3_Gr5 (180816-190614)': createStudents('SVE3_Gr5 (180816-190614)', 83, 107),
    'SVE3_Gr6 (180816-190614)': createStudents('SVE3_Gr6 (180816-190614)', 108, 124),
    'SVE3_Gr7 (180816-190614)': createStudents('SVE3_Gr7 (180816-190614)', 125, 150)
};


/***/ }),

/***/ "./src/apis/mock/mock-eds-data.json":
/*!******************************************!*\
  !*** ./src/apis/mock/mock-eds-data.json ***!
  \******************************************/
/*! exports provided: SouthIndia, NorthIndia, default */
/***/ (function(module) {

module.exports = {"SouthIndia":[{"firstTerm":{"startDate":"2015-06-01T00:00:00.000Z","endDate":"2015-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2015-11-01T00:00:00.000Z","endDate":"2016-03-27T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2016-06-23T00:00:00.000Z","endDate":"2016-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2016-11-01T00:00:00.000Z","endDate":"2017-03-25T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2017-06-05T00:00:00.000Z","endDate":"2017-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2017-11-01T00:00:00.000Z","endDate":"2018-03-30T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2018-06-04T00:00:00.000Z","endDate":"2018-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2018-11-01T00:00:00.000Z","endDate":"2019-04-29T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2019-06-03T00:00:00.000Z","endDate":"2019-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2019-11-01T00:00:00.000Z","endDate":"2020-03-27T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2020-06-01T00:00:00.000Z","endDate":"2020-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2020-11-01T00:00:00.000Z","endDate":"2021-03-26T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2021-06-06T00:00:00.000Z","endDate":"2021-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2021-11-01T00:00:00.000Z","endDate":"2022-03-25T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2022-06-05T00:00:00.000Z","endDate":"2022-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2022-11-01T00:00:00.000Z","endDate":"2023-03-31T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2023-06-04T00:00:00.000Z","endDate":"2023-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2023-11-01T00:00:00.000Z","endDate":"2024-03-29T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2024-06-03T00:00:00.000Z","endDate":"2024-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2024-11-01T00:00:00.000Z","endDate":"2025-03-28T00:00:00.000Z"},"holidays":[]}],"NorthIndia":[{"firstTerm":{"startDate":"2024-04-03T00:00:00.000Z","endDate":"2024-09-30T00:00:00.000Z"},"secondTerm":{"startDate":"2024-10-01T00:00:00.000Z","endDate":"2025-04-02T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2023-04-05T00:00:00.000Z","endDate":"2023-10-01T00:00:00.000Z"},"secondTerm":{"startDate":"2023-10-02T00:00:00.000Z","endDate":"2024-04-02T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2022-04-06T00:00:00.000Z","endDate":"2022-10-03T00:00:00.000Z"},"secondTerm":{"startDate":"2022-10-04T00:00:00.000Z","endDate":"2023-04-04T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2021-04-01T00:00:00.000Z","endDate":"2021-10-04T00:00:00.000Z"},"secondTerm":{"startDate":"2021-10-05T00:00:00.000Z","endDate":"2022-04-05T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2020-04-01T00:00:00.000Z","endDate":"2020-09-28T00:00:00.000Z"},"secondTerm":{"startDate":"2020-09-29T00:00:00.000Z","endDate":"2021-03-31T00:00:00.000Z"},"holidays":[{"startDate":"2020-05-17","endDate":"2020-06-28"}]},{"firstTerm":{"startDate":"2019-04-04T00:00:00.000Z","endDate":"2019-09-30T00:00:00.000Z"},"secondTerm":{"startDate":"2019-10-01T00:00:00.000Z","endDate":"2020-03-31T00:00:00.000Z"},"holidays":[{"startDate":"2019-05-19","endDate":"2019-06-29"}]},{"firstTerm":{"startDate":"2018-04-04T00:00:00.000Z","endDate":"2018-09-30T00:00:00.000Z"},"secondTerm":{"startDate":"2018-10-01T00:00:00.000Z","endDate":"2019-04-03T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2017-04-05T00:00:00.000Z","endDate":"2017-10-02T00:00:00.000Z"},"secondTerm":{"startDate":"2017-10-03T00:00:00.000Z","endDate":"2018-04-03T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2016-04-06T00:00:00.000Z","endDate":"2016-10-03T00:00:00.000Z"},"secondTerm":{"startDate":"2016-10-04T00:00:00.000Z","endDate":"2017-04-04T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2015-04-01T00:00:00.000Z","endDate":"2015-10-05T00:00:00.000Z"},"secondTerm":{"startDate":"2015-10-06T00:00:00.000Z","endDate":"2016-04-05T00:00:00.000Z"},"holidays":[]}]};

/***/ }),

/***/ "./src/components/calendar/course-name-to-css-class.ts":
/*!*************************************************************!*\
  !*** ./src/components/calendar/course-name-to-css-class.ts ***!
  \*************************************************************/
/*! exports provided: courseNameToCssClass */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "courseNameToCssClass", function() { return courseNameToCssClass; });
function courseNameToCssClass(cssPrefix, courseName) {
    return "" + cssPrefix + courseName.substr(0, 3).toLowerCase();
}


/***/ }),

/***/ "./src/components/charts/charts-utils.ts":
/*!***********************************************!*\
  !*** ./src/components/charts/charts-utils.ts ***!
  \***********************************************/
/*! exports provided: getWeekplannerProgressData */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getWeekplannerProgressData", function() { return getWeekplannerProgressData; });
function getWeekplannerProgressData(taskSets) {
    var chartTasks = { completedTasks: 0, totalNumberOfTasks: 0, subjectData: {} };
    taskSets.forEach(function (elem) { return elem.learningGoals.forEach(function (x) {
        var subjectCompletedTasks = x.tasks.filter(function (t) { return t.done; }).length;
        var courseSubjectData = chartTasks.subjectData[elem.courseName];
        if (!courseSubjectData) {
            courseSubjectData = chartTasks.subjectData[elem.courseName] = {
                completedNumberOfTasks: 0,
                numberOfTasks: 0
            };
        }
        courseSubjectData.completedNumberOfTasks += subjectCompletedTasks;
        courseSubjectData.numberOfTasks += x.tasks.length;
        chartTasks.completedTasks += subjectCompletedTasks;
        chartTasks.totalNumberOfTasks += x.tasks.length;
    }); });
    return chartTasks;
}


/***/ }),

/***/ "./src/components/charts/goal-progress.tsx":
/*!*************************************************!*\
  !*** ./src/components/charts/goal-progress.tsx ***!
  \*************************************************/
/*! exports provided: GoalProgress */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GoalProgress", function() { return GoalProgress; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var GoalProgress = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](GoalProgress, _super);
    function GoalProgress() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.createProgress = function () {
            var _a = _this.props, numberOfTasks = _a.numberOfTasks, completedNumberOfTasks = _a.completedNumberOfTasks, maximumTasksDisplayed = _a.maximumTasksDisplayed, backgroundColor = _a.backgroundColor, progressColor = _a.progressColor;
            var progress = [];
            if (numberOfTasks > maximumTasksDisplayed) {
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "progress-overview" },
                    " ",
                    completedNumberOfTasks,
                    " / ",
                    numberOfTasks,
                    " ");
            }
            for (var taskNo = 1; taskNo <= numberOfTasks; taskNo++) {
                progress.push(react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("svg", { key: taskNo },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("circle", { className: "circle-chart-background", fill: taskNo > completedNumberOfTasks ? backgroundColor : progressColor, cx: "8", cy: "8", r: "8" })));
            }
            return progress;
        };
        return _this;
    }
    GoalProgress.prototype.render = function () {
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "goals-progress" }, this.createProgress());
    };
    GoalProgress.defaultProps = {
        numberofTasks: 0,
        completedNumberOfTasks: 0,
        maximumTasksDisplayed: 10,
        backgroundColor: "lightgrey",
        progressColor: "#3dbca2",
    };
    return GoalProgress;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/charts/progress.tsx":
/*!********************************************!*\
  !*** ./src/components/charts/progress.tsx ***!
  \********************************************/
/*! exports provided: Progress */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Progress", function() { return Progress; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var Progress = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Progress, _super);
    function Progress() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Progress.prototype.render = function () {
        var _a = this.props, percentage = _a.percentage, backgroundColor = _a.backgroundColor, progressColor = _a.progressColor;
        var roundedPercentage = Math.round(percentage);
        return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("svg", { className: "progress-chart", width: "100%", height: "25" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("rect", { fill: backgroundColor, width: "100%", height: "100%", rx: "4" }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("rect", { className: "fill", fill: progressColor, width: roundedPercentage + "%", height: "100%", rx: "4" }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("text", { className: "filled-text", textAnchor: "middle", x: "50%", y: "50%", dy: ".3em" }, roundedPercentage + "%")));
    };
    Progress.defaultProps = {
        percentage: 0,
        backgroundColor: "#F1F5F4",
        progressColor: "#3dbca2",
    };
    return Progress;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/course-builder-ks/common/banner.tsx":
/*!************************************************************!*\
  !*** ./src/components/course-builder-ks/common/banner.tsx ***!
  \************************************************************/
/*! exports provided: LazyBanner, Banner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LazyBanner", function() { return LazyBanner; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Banner", function() { return Banner; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/es/index.js");
/* harmony import */ var kedbackend_observable__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kedbackend/observable */ "./kedbackend/observable.js");
/* harmony import */ var _utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utility-components/lazy-content */ "./src/components/utility-components/lazy-content.tsx");
/* harmony import */ var _course_builder_sub_components_ellipsis_loader__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../course-builder/sub-components/ellipsis-loader */ "./src/components/course-builder/sub-components/ellipsis-loader.tsx");
/* harmony import */ var _access_control__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../access-control */ "./src/access-control/index.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");








var LazyBanner = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](LazyBanner, _super);
    function LazyBanner() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.dragState = new kedbackend_observable__WEBPACK_IMPORTED_MODULE_3__["Emitter"]({ tabBeingDragged: '', tabBeingHovered: '', insertBefore: false, originClientX: -1 });
        return _this;
    }
    LazyBanner.prototype.render = function () {
        var _this = this;
        var lazyProps = this.props.lazyProps;
        return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-row sv-layout sv-skip-spacer", style: { overflow: "visible" } },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-layout sv-skip-spacer sv-column-12" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-script-portlet sv-portlet sv-skip-spacer" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_4__["LazyContent"], { noError: true }, lazyProps.map(function (_a) {
                        var backgroundImage = _a.backgroundImage;
                        return backgroundImage && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("style", null, "\n              .pageHeader {\n                background-image: url('" + backgroundImage + "') !important;\n              }\n            ");
                    })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "pageHeader" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h1", null,
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_4__["LazyContent"], { noError: true }, lazyProps.map(function (props) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null, props.title); })))),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_4__["LazyContent"], { noError: true }, lazyProps.map(function (_a) {
                            var cornerBox = _a.cornerBox;
                            return cornerBox &&
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "pageHeaderCornerBox" }, cornerBox);
                        })),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "buttonsField" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "buttonsContainer" },
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_4__["LazyContent"], { spinner: react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_ellipsis_loader__WEBPACK_IMPORTED_MODULE_5__["EllipsisLoader"], null) }, lazyProps.map(function (_a) {
                                    var tabs = _a.tabs, buttons = _a.buttons, activeTab = _a.activeTab, blocks = _a.blocks, sortableTabs = _a.sortableTabs, onTabDrop = _a.onTabDrop;
                                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                                        blocks ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" }, blocks.map(function (block) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: block.id, className: "horizontalItem top" },
                                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-vertical" },
                                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", null, block.name)),
                                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn-group" }, block.steps.map(function (step) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], { key: step.stepNo },
                                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Link"], { to: step.link, className: "btn btn-small step-button" + (step.isActive ? " activePage" : "") }, step.stepNo),
                                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", null)); }))))); })) : null,
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: 'horizontalMenu' },
                                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_4__["LazyContent"], null, _this.dragState.map(function (_a) {
                                                var tabBeingDragged = _a.tabBeingDragged, tabBeingHovered = _a.tabBeingHovered, insertBefore = _a.insertBefore, originClientX = _a.originClientX;
                                                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("ul", { className: sortableTabs ? "sortable" : null, onDrop: onTabDrop ? function (ev) {
                                                        if (tabBeingHovered && tabBeingDragged) {
                                                            onTabDrop(tabBeingDragged, tabBeingHovered, insertBefore ?
                                                                'before' : 'after');
                                                        }
                                                        _this.dragState.dispatch(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, _this.dragState.value, { tabBeingHovered: '', tabBeingDragged: '' }));
                                                    } : null },
                                                    tabs.map(function (_a, idx) {
                                                        var name = _a.name, key = _a.key, link = _a.link, onClick = _a.onClick, draggable = _a.draggable;
                                                        var isActive = activeTab === key || (activeTab === '$' && idx === 0);
                                                        var dragState = _this.dragState;
                                                        name = name || Object(_utils_utils__WEBPACK_IMPORTED_MODULE_7__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["(Namnl\u00F6s flik)"], ["(Namnl\u00F6s flik)"])));
                                                        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], { key: key },
                                                            insertBefore && tabBeingHovered === key ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("li", { className: "drop-target", onDragOver: function (ev) { return ev.preventDefault(); } }, "\u00A0") : null,
                                                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("li", { className: [
                                                                    isActive ? "activePage" : "",
                                                                    key === tabBeingDragged ? "drag-source" : "",
                                                                    sortableTabs && draggable ? "draggable" : ""
                                                                ].filter(function (x) { return x; }).join(' '), draggable: sortableTabs && draggable, onDragStart: sortableTabs && draggable ? function (ev) {
                                                                    ev.dataTransfer.effectAllowed = "move";
                                                                    dragState.dispatch(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, dragState.value, { originClientX: ev.clientX, tabBeingDragged: key }));
                                                                } : null, onDragOver: sortableTabs ? function (ev) {
                                                                    if (tabBeingDragged === key) {
                                                                        dragState.dispatch(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, dragState.value, { tabBeingHovered: '' }));
                                                                        return;
                                                                    }
                                                                    if (!tabBeingDragged)
                                                                        return;
                                                                    ev.preventDefault();
                                                                    ev.dataTransfer.dropEffect = "move";
                                                                    //console.log("onDragOver: " + name + ". idx: " + idx + ". otherIdx: " + otherIdx);
                                                                    dragState.dispatch(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, dragState.value, { tabBeingHovered: key, insertBefore: originClientX > ev.clientX }));
                                                                } : null, onDragEnd: function (ev) {
                                                                    _this.dragState.dispatch(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, dragState.value, { tabBeingHovered: '', tabBeingDragged: '' }));
                                                                } }, link ? link.startsWith(":") ?
                                                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: Object(_access_control__WEBPACK_IMPORTED_MODULE_6__["preserveImpersonationQuery"])(link.substr(1), {}) }, name) :
                                                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Link"], { to: link }, name) :
                                                                onClick ?
                                                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { onClick: onClick }, name) :
                                                                    name),
                                                            !insertBefore && tabBeingHovered === key ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("li", { className: "drop-target", onDragOver: function (ev) { return ev.preventDefault(); } }, "\u00A0") : null);
                                                    }),
                                                    buttons && buttons.map(function (btn, idx) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("li", { className: "action-tab", key: "btn" + idx }, btn); }));
                                            }))));
                                })))))))));
    };
    return LazyBanner;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

var Banner = function (props) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](LazyBanner, { lazyProps: new kedbackend_observable__WEBPACK_IMPORTED_MODULE_3__["Emitter"](props) }); };
var templateObject_1;


/***/ }),

/***/ "./src/components/course-builder-ks/common/dialog-content.tsx":
/*!********************************************************************!*\
  !*** ./src/components/course-builder-ks/common/dialog-content.tsx ***!
  \********************************************************************/
/*! exports provided: setupDialogs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setupDialogs", function() { return setupDialogs; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_dialogs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utility-components/dialogs */ "./src/components/utility-components/dialogs.tsx");
/* harmony import */ var _dialog_context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./dialog-context */ "./src/components/course-builder-ks/common/dialog-context.ts");




var setupDialogs = function (Component) {
    return /** @class */ (function (_super) {
        tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](DialogContent, _super);
        function DialogContent(props) {
            var _this = _super.call(this, props) || this;
            _this.state = {
                dialogs: []
            };
            _this.openDialog = _this.openDialog.bind(_this);
            _this.closeDialog = _this.closeDialog.bind(_this);
            return _this;
        }
        DialogContent.prototype.openDialog = function (dialog) {
            this.setState({ dialogs: tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](this.state.dialogs, [dialog]) });
        };
        DialogContent.prototype.closeDialog = function () {
            this.setState({ dialogs: this.state.dialogs.slice(0, this.state.dialogs.length - 1) });
        };
        DialogContent.prototype.render = function () {
            var dialogs = this.state.dialogs;
            return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_dialog_context__WEBPACK_IMPORTED_MODULE_3__["DialogsContext"].Provider, { value: { openDialog: this.openDialog, closeDialog: this.closeDialog } },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(Component, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.props)),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_dialogs__WEBPACK_IMPORTED_MODULE_2__["Dialogs"], { dialogs: dialogs, popDialog: this.closeDialog }));
        };
        return DialogContent;
    }(react__WEBPACK_IMPORTED_MODULE_1___default.a.Component));
};


/***/ }),

/***/ "./src/components/course-builder-ks/common/dialog-context.ts":
/*!*******************************************************************!*\
  !*** ./src/components/course-builder-ks/common/dialog-context.ts ***!
  \*******************************************************************/
/*! exports provided: DialogsContext */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DialogsContext", function() { return DialogsContext; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var DialogsContext = react__WEBPACK_IMPORTED_MODULE_0___default.a.createContext({ openDialog: null, closeDialog: null });


/***/ }),

/***/ "./src/components/course-builder-ks/common/field-limits.ts":
/*!*****************************************************************!*\
  !*** ./src/components/course-builder-ks/common/field-limits.ts ***!
  \*****************************************************************/
/*! exports provided: FieldLimits */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FieldLimits", function() { return FieldLimits; });
var FieldLimits = {
    MAX_CHARS_IN_CONTENTS: 4000,
    MAX_CHARS_TASK_NAMES: 64,
    MAX_CHARS_TASK_INTRO_TEXT: 200
};


/***/ }),

/***/ "./src/components/course-builder-ks/common/future-abilities-box.tsx":
/*!**************************************************************************!*\
  !*** ./src/components/course-builder-ks/common/future-abilities-box.tsx ***!
  \**************************************************************************/
/*! exports provided: FutureAbilitiesBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FutureAbilitiesBox", function() { return FutureAbilitiesBox; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");


var FutureAbilitiesBox = function (_a) {
    var title = _a.title, selectedFAs = _a.selectedFAs;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_1__["OpenCloseBox"], { title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p", null, title), className: "larger" },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "abilityList" }, selectedFAs.map(function (fa) {
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { key: fa, className: "contentPart" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "contentText" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p", null, fa)));
        })));
};


/***/ }),

/***/ "./src/components/course-builder-ks/common/select-word-bank.tsx":
/*!**********************************************************************!*\
  !*** ./src/components/course-builder-ks/common/select-word-bank.tsx ***!
  \**********************************************************************/
/*! exports provided: SelectWordBank */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SelectWordBank", function() { return SelectWordBank; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _viewer_editor_course_contents_word_bank_content_settings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../viewer-editor/course-contents/word-bank-content-settings */ "./src/components/course-builder-ks/viewer-editor/course-contents/word-bank-content-settings.tsx");
/* harmony import */ var _course_builder_sub_components_ellipsis_loader__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../course-builder/sub-components/ellipsis-loader */ "./src/components/course-builder/sub-components/ellipsis-loader.tsx");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");




var SelectWordBank = function (_a) {
    var subject = _a.subject, step = _a.step, onSelect = _a.onSelect;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { style: { minHeight: 400 } },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0__["Suspense"], { fallback: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_course_builder_sub_components_ellipsis_loader__WEBPACK_IMPORTED_MODULE_2__["EllipsisLoader"], null) },
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_viewer_editor_course_contents_word_bank_content_settings__WEBPACK_IMPORTED_MODULE_1__["WordBankContentSettings"], { subjectName: subject, stepNo: step, onChange: function (_a) {
                    var name = _a.name, key = _a.key;
                    var url = _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_3__["cfg"].KED_WORDBANKS_URL + "?subject=" + subject + "&step=" + step + "&list=" + key;
                    onSelect({ name: name, url: url });
                } })));
};


/***/ }),

/***/ "./src/components/course-builder-ks/common/two-columns-page.tsx":
/*!**********************************************************************!*\
  !*** ./src/components/course-builder-ks/common/two-columns-page.tsx ***!
  \**********************************************************************/
/*! exports provided: TwoColumnsPage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TwoColumnsPage", function() { return TwoColumnsPage; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var TwoColumnsPage = function (_a) {
    var left = _a.left, right = _a.right, rightWidth = _a.rightWidth;
    return (react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "sv-row sv-layout" },
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "sv-layout sv-skip-spacer sv-column-12" },
            react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "sv-spacer-20pxvt sv-vertical sv-layout sv-skip-spacer" },
                react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "pagecontent sv-layout sv-spacer-20pxvt sv-skip-spacer" },
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "sv-row sv-layout sv-skip-spacer" },
                        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "sv-layout sv-skip-spacer sv-column-" + (12 - rightWidth) }, left),
                        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "sv-layout sv-column-" + rightWidth }, right)))))));
};


/***/ }),

/***/ "./src/components/course-builder-ks/logic/change-sort-order.ts":
/*!*********************************************************************!*\
  !*** ./src/components/course-builder-ks/logic/change-sort-order.ts ***!
  \*********************************************************************/
/*! exports provided: reorder */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "reorder", function() { return reorder; });
function reorder(docs, sourceId, targetId, placement) {
    var docsWithIdx = docs.map(function (doc, idx) { return ({ doc: doc, idx: idx }); });
    var sourceWithIdx = docsWithIdx.filter(function (_a) {
        var doc = _a.doc;
        return doc.id === sourceId;
    })[0];
    var targetWithIdx = docsWithIdx.filter(function (_a) {
        var doc = _a.doc;
        return doc.id === targetId;
    })[0];
    if (sourceWithIdx && targetWithIdx) {
        var targetIdx = targetWithIdx.idx;
        var newOrder = sourceWithIdx.doc.order;
        if (placement === 'after') {
            // Place source after target
            if (targetIdx === docs.length - 1) {
                // Target is last
                newOrder = Date.now(); // Date.now() is always last (unless a tab is meaningfully given a future order - then let it stay last!)
            }
            else {
                // Give an order between target and its current neighbour to the right
                newOrder = docs[targetIdx].order + Math.random() * (docs[targetIdx + 1].order - docs[targetIdx].order);
            }
        }
        else {
            // Place source before target
            if (targetIdx === 0) {
                // Target is first
                newOrder = Math.round(docs[0].order - 100 - 10000 * Math.random());
            }
            else {
                // Give an order between target and its current neighbor to the left
                newOrder = docs[targetIdx - 1].order + Math.random() * (docs[targetIdx].order - docs[targetIdx - 1].order);
            }
        }
        return newOrder;
    }
    return 0;
}


/***/ }),

/***/ "./src/components/course-builder-ks/logic/compute-task-tags-and-subject.ts":
/*!*********************************************************************************!*\
  !*** ./src/components/course-builder-ks/logic/compute-task-tags-and-subject.ts ***!
  \*********************************************************************************/
/*! exports provided: computeTaskTagsAndSubject */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computeTaskTagsAndSubject", function() { return computeTaskTagsAndSubject; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");


function computeTaskTagsAndSubject(course, tab, block) {
    var tags = [course.id];
    if (tab.tabClass === 'mission-tab') {
        // If task belongs to a mission tab,
        // it should be tagged with all the subjects of the course
        var otherSubjectTabs = course.tabs
            .filter(function (tab) { return tab.tabClass === 'subject-tab'; });
        var subjects = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["distinct"])(otherSubjectTabs.map(function (tab) { return tab.subject; }), function (s) { return s.subjectCode; });
        var courseCodeTags = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["distinct"])(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["flatten"])(otherSubjectTabs.map(function (tab) { return tab.tags.filter(function (tag) { return tag.startsWith("course:"); }); })));
        tags.push.apply(tags, tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](subjects.map(function (s) { return "sub:" + s.subjectCode; })));
        tags.push.apply(tags, tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](courseCodeTags));
        var subject = subjects.map(function (s) { return s.subjectName; }).join(', ');
        return { tags: tags, subject: subject };
    }
    else {
        tags.push.apply(tags, tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"]((tab || block).tags.filter(function (tag) { return tag.startsWith("course:"); })));
        if (course.type === 'theme-course')
            tags.push.apply(tags, tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](tab.tags.filter(function (tag) { return tag.startsWith("sub:"); })));
        else
            tags.push.apply(tags, tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](block.tags.filter(function (tag) { return tag.startsWith("sub:"); })));
        var subject = course.type === 'theme-course' ?
            tab.subject.subjectName :
            course.subject.subjectName;
        return { tags: tags, subject: subject };
    }
}


/***/ }),

/***/ "./src/components/course-builder-ks/logic/course-instance-tags.ts":
/*!************************************************************************!*\
  !*** ./src/components/course-builder-ks/logic/course-instance-tags.ts ***!
  \************************************************************************/
/*! exports provided: getSubjectCodes, getSchoolYears, computeCourseInstanceTags, computeTagsFromSchoolYears, computeTagsFromSubjectCodes */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSubjectCodes", function() { return getSubjectCodes; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSchoolYears", function() { return getSchoolYears; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computeCourseInstanceTags", function() { return computeCourseInstanceTags; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computeTagsFromSchoolYears", function() { return computeTagsFromSchoolYears; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computeTagsFromSubjectCodes", function() { return computeTagsFromSubjectCodes; });
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");

function getSubjectCodes(tags) {
    return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_0__["distinct"])((tags || [])
        .filter(function (tag) { return tag.startsWith("sub:"); })
        .map(function (tag) { return tag.substr("sub:".length); }));
    ;
}
function getSchoolYears(tags) {
    return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_0__["distinct"])((tags || [])
        .filter(function (tag) { return tag.startsWith("course:"); })
        .map(function (tag) { return tag.substr(tag.indexOf("|") + 1); }) // School year is concatenated as pipe + schoolyear. Example: "GRGRFYS01|4-6"
    );
}
function computeCourseInstanceTags(tags, subjectCodes, schoolYears) {
    var otherTags = (tags || []).filter(function (tag) { return !tag.startsWith("course:") && !tag.startsWith("sub:"); });
    var subjectTags = subjectCodes.map(function (sub) { return "sub:" + sub; });
    var courseTags = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_0__["flatten"])(subjectCodes.map(function (sub) {
        return schoolYears.map(function (schoolYear) {
            return "course:" + sub + "|" + schoolYear;
        });
    }));
    return otherTags
        .concat(subjectTags)
        .concat(courseTags);
}
function computeTagsFromSchoolYears(tags, schoolYears) {
    //schoolYears = schoolYears.map(afterColon);
    var subjectCodes = getSubjectCodes(tags);
    return computeCourseInstanceTags(tags, subjectCodes, schoolYears);
}
function computeTagsFromSubjectCodes(tags, subjectCodes) {
    //subjectCodes = subjectCodes.map(afterColon);
    var schoolYears = getSchoolYears(tags);
    return computeCourseInstanceTags(tags, subjectCodes, schoolYears);
}
function afterColon(str) {
    var pColon = str.indexOf(':');
    return pColon >= 0 ?
        str.substr(pColon + 1) :
        str;
}


/***/ }),

/***/ "./src/components/course-builder-ks/logic/get-course-codes-from-tags.ts":
/*!******************************************************************************!*\
  !*** ./src/components/course-builder-ks/logic/get-course-codes-from-tags.ts ***!
  \******************************************************************************/
/*! exports provided: getCourseCodesFromTags */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getCourseCodesFromTags", function() { return getCourseCodesFromTags; });
function getCourseCodesFromTags(tags) {
    return (tags || [])
        .filter(function (tag) { return tag.startsWith("course:"); })
        .map(function (courseTag) { return courseTag.substr("course:".length); });
}


/***/ }),

/***/ "./src/components/course-builder-ks/logic/get-draft-id.ts":
/*!****************************************************************!*\
  !*** ./src/components/course-builder-ks/logic/get-draft-id.ts ***!
  \****************************************************************/
/*! exports provided: getDraftId */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getDraftId", function() { return getDraftId; });
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../globals/db */ "./src/globals/db.ts");

function getDraftId(school, courseId) {
    return _globals_db__WEBPACK_IMPORTED_MODULE_0__["db"].schools.name(school).single() // Get the school Observable
        .switchMap(function (school) {
        return _globals_db__WEBPACK_IMPORTED_MODULE_0__["db"].branches
            .hasEdgesFrom([school.officialBranchId]) // The official draft has edges from the official school branch
            .name("draft") // There might be other personal drafts in future. Requirement of the common draft is that it is named "draft"
            .tags(courseId) // Find the one tagged with the courseId. There are several drafts - one for each course.
            .idsOnly()
            .map(function (_a) {
            var id = _a.id;
            return id;
        })
            .first();
    });
}


/***/ }),

/***/ "./src/components/course-builder-ks/logic/get-standard-courses-with-ordered-requirements.ts":
/*!**************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/logic/get-standard-courses-with-ordered-requirements.ts ***!
  \**************************************************************************************************/
/*! exports provided: getStandardCoursesWithOrderedRequirements */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getStandardCoursesWithOrderedRequirements", function() { return getStandardCoursesWithOrderedRequirements; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var kedbackend_observable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kedbackend/observable */ "./kedbackend/observable.js");
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _ordered_requirements__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ordered-requirements */ "./src/components/course-builder-ks/logic/ordered-requirements.ts");




function getStandardCoursesWithOrderedRequirements(courseCodes) {
    var _a;
    var courseCodeTags = courseCodes.map(function (code) { return code.startsWith('course:') ? code : "course:" + code; });
    if (courseCodeTags.length === 0)
        return new kedbackend_observable__WEBPACK_IMPORTED_MODULE_1__["Emitter"]([]);
    return (_a = _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].courses.include("abilities", "centralContent", "knowledgeRequirements")).tags.apply(_a, tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](courseCodeTags)).filter(function (course) { return course.isTemplate; }) // BUGBUG: In KG, we would need this filter, not KS. Need another authorized way of getting the standard course only!
        .map(function (course) { return (tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, course, { abilities: Object(_ordered_requirements__WEBPACK_IMPORTED_MODULE_3__["getOrderedDocs"])(course.abilities, course.abilitiesOrder), centralContent: Object(_ordered_requirements__WEBPACK_IMPORTED_MODULE_3__["getOrderedDocs"])(course.centralContent, course.centralContentOrder), knowledgeRequirements: Object(_ordered_requirements__WEBPACK_IMPORTED_MODULE_3__["getOrderedDocs"])(course.knowledgeRequirements, course.knowledgeRequirementsOrder) })); }).toValue();
}


/***/ }),

/***/ "./src/components/course-builder-ks/logic/is-employee.ts":
/*!***************************************************************!*\
  !*** ./src/components/course-builder-ks/logic/is-employee.ts ***!
  \***************************************************************/
/*! exports provided: isEmployee */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isEmployee", function() { return isEmployee; });
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _access_control__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../access-control */ "./src/access-control/index.ts");


function isEmployee(atSchool) {
    return atSchool ?
        Object(_access_control__WEBPACK_IMPORTED_MODULE_1__["isTeacherAtSchool"])(_globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser, atSchool) || _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser.roles.includes("ADMIN") :
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser.roles.some(function (role) { return role === 'EMPLOYEE' || role === 'ADMIN'; });
}


/***/ }),

/***/ "./src/components/course-builder-ks/logic/is-ked-staff.ts":
/*!****************************************************************!*\
  !*** ./src/components/course-builder-ks/logic/is-ked-staff.ts ***!
  \****************************************************************/
/*! exports provided: isKedStaff */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isKedStaff", function() { return isKedStaff; });
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _access_control__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../access-control */ "./src/access-control/index.ts");


function isKedStaff() {
    return Object(_access_control__WEBPACK_IMPORTED_MODULE_1__["isAdminOrTeacherAtSchool"])(_globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser, "standard");
}


/***/ }),

/***/ "./src/components/course-builder-ks/logic/list-course-instances.ts":
/*!*************************************************************************!*\
  !*** ./src/components/course-builder-ks/logic/list-course-instances.ts ***!
  \*************************************************************************/
/*! exports provided: listCourseInstances */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "listCourseInstances", function() { return listCourseInstances; });
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../globals/db */ "./src/globals/db.ts");

function listCourseInstances() {
    return _globals_db__WEBPACK_IMPORTED_MODULE_0__["db"].courseInstances.hasEdgesFrom([_globals_db__WEBPACK_IMPORTED_MODULE_0__["globalId"]]);
}


/***/ }),

/***/ "./src/components/course-builder-ks/logic/ordered-requirements.ts":
/*!************************************************************************!*\
  !*** ./src/components/course-builder-ks/logic/ordered-requirements.ts ***!
  \************************************************************************/
/*! exports provided: getOrderedDocs, resolveRequirementOrder */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getOrderedDocs", function() { return getOrderedDocs; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "resolveRequirementOrder", function() { return resolveRequirementOrder; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var kedbackend_observable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kedbackend/observable */ "./kedbackend/observable.js");
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");




function getOrderedDocs(docs, order, _a) {
    var appendLeftovers = (_a === void 0 ? { appendLeftovers: false } : _a).appendLeftovers;
    // Mark doc IDs that where present in given 'order' array.
    // Will be used to find left-overs that were not present in the 'order' array.
    var markedDocs = {};
    if (!docs || !order) {
        // Special case: no docs or no order. Don't fail. Just return docs as is.
        return docs;
    }
    // Map given 'order' array to corresponding docs. Also mark in markedDocs.
    var result = (docs && order ?
        order.map(function (id) {
            markedDocs[id] = true;
            return docs.find(function (doc) { return doc.id === id; });
        }).filter(function (doc) { return !!doc; }) :
        docs);
    if (appendLeftovers) {
        // If any leftovers are there, concat them at the end:
        var leftOvers = docs.filter(function (doc) { return !markedDocs[doc.id]; });
        return result.concat(leftOvers);
    }
    else {
        return result;
    }
}
function resolveRequirementOrder(obj, orderDefiner) {
    var _a;
    var orderDefiningDocObservable;
    if (orderDefiner) {
        // User provided the orderDefining doc (use case is when obj is a Course or Subject, which contains its order by itself. User then provides the Course or Subject in both args)
        orderDefiningDocObservable = new kedbackend_observable__WEBPACK_IMPORTED_MODULE_1__["Emitter"]([orderDefiner]);
    }
    else {
        var courseCodes = obj.tags.filter(function (tag) { return tag.startsWith("course:"); });
        if (courseCodes.length === 0) {
            return new kedbackend_observable__WEBPACK_IMPORTED_MODULE_1__["Emitter"](obj); // No course tags. Not possible to resolve order.
        }
        orderDefiningDocObservable = (_a = _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].courses).tags.apply(_a, tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](courseCodes)).toValue();
    }
    return orderDefiningDocObservable.map(function (orderHolders) {
        var abilitiesOrder = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["flatten"])(orderHolders.map(function (orderHolder) { return orderHolder.abilitiesOrder || []; }));
        var ccOrder = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["flatten"])(orderHolders.map(function (orderHolder) { return orderHolder.centralContentOrder || []; }));
        var krOrder = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["flatten"])(orderHolders.map(function (orderHolder) { return orderHolder.knowledgeRequirementsOrder || []; }));
        var objClone = Object.assign({}, obj);
        if (objClone.abilities)
            objClone.abilities = getOrderedDocs(obj.abilities, abilitiesOrder);
        if (objClone.centralContent)
            objClone.centralContent = getOrderedDocs(obj.centralContent, ccOrder);
        if (objClone.knowledgeRequirements)
            objClone.knowledgeRequirements = getOrderedDocs(obj.knowledgeRequirements, krOrder);
        return objClone;
    });
}


/***/ }),

/***/ "./src/components/course-builder-ks/logic/publish-course.ts":
/*!******************************************************************!*\
  !*** ./src/components/course-builder-ks/logic/publish-course.ts ***!
  \******************************************************************/
/*! exports provided: publishCourse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "publishCourse", function() { return publishCourse; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");



function publishCourse(_a) {
    var school = _a.school, draftRepo = _a.draftRepo, course = _a.course;
    return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
        var destinationRepo, schoolBranchId;
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
            switch (_b.label) {
                case 0:
                    if (!(school === "standard")) return [3 /*break*/, 1];
                    // Editing Standard School should merge to reality.
                    draftRepo.merge();
                    destinationRepo = _globals_db__WEBPACK_IMPORTED_MODULE_1__["db"];
                    return [3 /*break*/, 3];
                case 1: return [4 /*yield*/, _globals_db__WEBPACK_IMPORTED_MODULE_1__["db"].schools.name(school).single().map(function (school) { return school.officialBranchId; }).load()];
                case 2:
                    schoolBranchId = _b.sent();
                    draftRepo.merge(schoolBranchId);
                    destinationRepo = _globals_db__WEBPACK_IMPORTED_MODULE_1__["db"].branch(schoolBranchId);
                    _b.label = 3;
                case 3:
                    destinationRepo.courseInstances.update(course, {
                        modifiedDate: Date.now(),
                        modifiedBy: {
                            name: _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.displayName,
                            url: "mailto:" + _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.mail
                        }
                    });
                    return [2 /*return*/];
            }
        });
    });
}


/***/ }),

/***/ "./src/components/course-builder-ks/logic/task-order.ts":
/*!**************************************************************!*\
  !*** ./src/components/course-builder-ks/logic/task-order.ts ***!
  \**************************************************************/
/*! exports provided: getSortedTasks, computeUpdatedOrder */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSortedTasks", function() { return getSortedTasks; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computeUpdatedOrder", function() { return computeUpdatedOrder; });
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _ordered_requirements__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ordered-requirements */ "./src/components/course-builder-ks/logic/ordered-requirements.ts");


function getSortedTasks(content) {
    return Object(_ordered_requirements__WEBPACK_IMPORTED_MODULE_1__["getOrderedDocs"])(content.tasks, content.taskOrder, { appendLeftovers: true });
}
function computeUpdatedOrder(docs, currentOrder, source, target, placement, _a) {
    var appendLeftovers = (_a === void 0 ? { appendLeftovers: false } : _a).appendLeftovers;
    var orderedIds = Object(_ordered_requirements__WEBPACK_IMPORTED_MODULE_1__["getOrderedDocs"])(docs, currentOrder, { appendLeftovers: true }).map(function (t) { return t.id; });
    var placeBefore = placement === 'before';
    var result = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_0__["flatten"])(orderedIds
        .filter(function (id) { return id !== source.id; }) // Remove source id
        .map(function (id) { return id !== target.id ?
        // We're not on target
        id :
        // We're on target. Place before or after?
        placeBefore ?
            [source.id, id] :
            [id, source.id]; }));
    return result;
}


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/add-content-button.tsx":
/*!*******************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/add-content-button.tsx ***!
  \*******************************************************************************/
/*! exports provided: AddContentButton */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AddContentButton", function() { return AddContentButton; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");





var CONTENT_TYPES = {
    "rich-text": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Textruta"], ["Textruta"]))),
    "youtube-movie": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Youtube film"], ["Youtube film"]))),
    "learning-goals": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4randem\u00E5l och uppgifter"], ["L\u00E4randem\u00E5l och uppgifter"]))),
    "resource-list": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Resurslista"], ["Resurslista"]))),
    "embedded-html": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Inb\u00E4ddad HTML"], ["Inb\u00E4ddad HTML"]))),
    "word-bank": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_6 || (templateObject_6 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ordbank"], ["Ordbank"])))
};
var ADD_TITLES = {
    "rich-text": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_7 || (templateObject_7 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4gg till text"], ["L\u00E4gg till text"]))),
    "youtube-movie": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_8 || (templateObject_8 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4gg till youtube film"], ["L\u00E4gg till youtube film"]))),
    "learning-goals": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_9 || (templateObject_9 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4gg till l\u00E4randem\u00E5l och uppgifter"], ["L\u00E4gg till l\u00E4randem\u00E5l och uppgifter"]))),
    "resource-list": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_10 || (templateObject_10 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4gg till resurslista"], ["L\u00E4gg till resurslista"]))),
    "embedded-html": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_11 || (templateObject_11 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4gg till inb\u00E4ddad HTML"], ["L\u00E4gg till inb\u00E4ddad HTML"]))),
    "word-bank": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_12 || (templateObject_12 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4gg till ordbank"], ["L\u00E4gg till ordbank"])))
};
var AddContentButton = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](AddContentButton, _super);
    function AddContentButton(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            open: false,
            contentType: 'rich-text'
        };
        return _this;
    }
    AddContentButton.prototype.createContent = function () {
        var _a = this.props, tab = _a.tab, branch = _a.branch, type = _a.type;
        var newContent = this.newContent(type || this.state.contentType);
        branch.courseTabs.addRelated(tab.id, "contents", newContent);
        this.setState({ open: false });
    };
    AddContentButton.prototype.newContent = function (contentType) {
        switch (contentType) {
            case "rich-text": return this.newRichText();
            case "learning-goals": return this.newLearningGoal();
            case "embedded-html": return this.newEmbeddedHTML();
            case "word-bank": return this.newWordBank();
            case "resource-list": return this.newResourceList();
            default: throw new Error("Not implemented");
        }
    };
    AddContentButton.prototype.newWordBank = function () {
        return {
            type: 'word-bank',
            tags: [this.props.course.id],
            id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])(),
            order: Date.now(),
            locked: this.props.tab.locked,
            lockDelete: Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_4__["isKedStaff"])(),
            hidden: false,
            selectedWordBank: null
        };
    };
    AddContentButton.prototype.newRichText = function () {
        return {
            type: "rich-text",
            tags: [this.props.course.id],
            id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])(),
            order: Date.now(),
            locked: this.props.tab.locked,
            lockDelete: Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_4__["isKedStaff"])(),
            hidden: false,
            html: '',
        };
    };
    AddContentButton.prototype.newEmbeddedHTML = function () {
        return {
            type: "embedded-html",
            tags: [this.props.course.id],
            id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])(),
            order: Date.now(),
            locked: this.props.tab.locked,
            lockDelete: Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_4__["isKedStaff"])(),
            hidden: false,
            html: ''
        };
    };
    AddContentButton.prototype.newLearningGoal = function () {
        return {
            type: "learning-goals",
            tags: [this.props.course.id],
            id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])(),
            locked: this.props.tab.locked,
            lockDelete: Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_4__["isKedStaff"])(),
            hidden: false,
            hasCommonLearningGoals: this.props.course.type === 'theme-course',
            commonLearningGoals: [],
            order: Date.now(),
            hiddenTasks: [],
        };
    };
    AddContentButton.prototype.newResourceList = function () {
        return {
            type: "resource-list",
            tags: [this.props.course.id],
            id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])(),
            locked: this.props.tab.locked,
            lockDelete: Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_4__["isKedStaff"])(),
            order: Date.now(),
            hidden: false,
            resources: []
        };
    };
    AddContentButton.prototype.render = function () {
        var _this = this;
        if (this.state.open) {
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("select", { onChange: function (ev) { return _this.setState({ contentType: ev.target.value }); } }, Object.keys(CONTENT_TYPES).map(function (contentType) {
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("option", { key: contentType, value: contentType }, CONTENT_TYPES[contentType]);
                })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "btn pull-right", onClick: function () { return _this.setState({ open: false }); } }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_13 || (templateObject_13 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Avbryt"], ["Avbryt"])))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "btn btn-default", onClick: function () { return _this.createContent(); } }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_14 || (templateObject_14 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Skapa"], ["Skapa"])))));
        }
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "btn", onClick: function () {
                    if (_this.props.type) {
                        _this.createContent();
                    }
                    else {
                        _this.setState({ open: true });
                    }
                } },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-plus", "aria-hidden": "true" }),
                this.props.type ? ADD_TITLES[this.props.type] : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_15 || (templateObject_15 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4gg till inneh\u00E5ll"], ["L\u00E4gg till inneh\u00E5ll"])))),
            "\u00A0");
    };
    return AddContentButton;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8, templateObject_9, templateObject_10, templateObject_11, templateObject_12, templateObject_13, templateObject_14, templateObject_15;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/add-tab-button.tsx":
/*!***************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/add-tab-button.tsx ***!
  \***************************************************************************/
/*! exports provided: AddTabButton */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AddTabButton", function() { return AddTabButtonWithRouter; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var react_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router */ "./node_modules/react-router/es/index.js");
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");






var AddTabButton = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](AddTabButton, _super);
    function AddTabButton(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            editingName: false,
            name: ""
        };
        return _this;
    }
    AddTabButton.prototype.createTab = function (tabName) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, type, branch, draftId, course, school, history, block, stepNo, tabTemplate, newTab;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        this.setState({ editingName: false, name: "" });
                        _a = this.props, type = _a.type, branch = _a.branch, draftId = _a.draftId, course = _a.course, school = _a.school, history = _a.history, block = _a.block, stepNo = _a.stepNo;
                        tabTemplate = {
                            id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])(),
                            tabTitle: tabName,
                            name: tabName,
                            order: Date.now(),
                            locked: Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_5__["isKedStaff"])() ? true : false,
                            acl: ["role:USER:R", "schoolRole:" + school + "/EMPLOYEE:S"],
                        };
                        newTab = (type === 'theme-course-tab' ?
                            tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({ type: 'theme-course-tab', tabClass: 'content-tab', tags: [this.props.course.id] }, tabTemplate) :
                            tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({ type: 'step-course-tab', tabClass: 'content-tab', tags: tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](block.tags) }, tabTemplate, { stepNo: stepNo }));
                        /*const topContent: RichTextContent = {
                          type: 'rich-text',
                          id: createUUID(),
                          tags: [this.props.course.id],
                          html: `<h2>${tabName}</h2`,
                          order: Date.now(),
                          locked: true,
                          hidden: false
                        };*/
                        if (newTab.type === 'step-course-tab') {
                            branch.courseBlocks.addRelated(block.id, "tabs", newTab);
                        }
                        else {
                            branch.courseInstances.addRelated(course.id, "tabs", newTab);
                        }
                        //branch.courseTabs.addRelated(newTab.id, "contents", topContent);
                        return [4 /*yield*/, branch.saveNow()];
                    case 1:
                        //branch.courseTabs.addRelated(newTab.id, "contents", topContent);
                        _b.sent();
                        history.push("/" + school + "/courses/" + course.id + "/tabs/" + newTab.id + "/drafts/" + draftId + "/edit");
                        return [2 /*return*/];
                }
            });
        });
    };
    AddTabButton.prototype.render = function () {
        var _this = this;
        var _a = this.props, school = _a.school, course = _a.course, branch = _a.branch;
        var _b = this.state, editingName = _b.editingName, name = _b.name;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { onClick: editingName ? null : function (ev) { return _this.setState({ editingName: true, name: '' }); } },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-plus", "aria-hidden": "true" }),
                !editingName ?
                    ' ' + Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ny flik"], ["Ny flik"]))) :
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { type: "text", style: { color: "black" }, autoFocus: true, placeholder: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Fliknamn"], ["Fliknamn"]))), value: name, size: 30, onChange: function (ev) { return _this.setState({ name: ev.target.value }); }, onKeyPress: function (ev) {
                            if (ev.key === 'Enter') {
                                _this.createTab(name);
                            }
                        }, onBlur: function () { return _this.setState({ editingName: false }); } })));
    };
    return AddTabButton;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));
var AddTabButtonWithRouter = Object(react_router__WEBPACK_IMPORTED_MODULE_4__["withRouter"])(AddTabButton);

var templateObject_1, templateObject_2;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/clickable-school-div.tsx":
/*!*********************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/clickable-school-div.tsx ***!
  \*********************************************************************************/
/*! exports provided: ClickableSchoolDiv */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ClickableSchoolDiv", function() { return ClickableSchoolDiv; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../course-builder/sub-components/spinner */ "./src/components/course-builder/sub-components/spinner.tsx");
/* harmony import */ var react_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router */ "./node_modules/react-router/es/index.js");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _access_control__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../access-control */ "./src/access-control/index.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _logic_get_draft_id__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../logic/get-draft-id */ "./src/components/course-builder-ks/logic/get-draft-id.ts");









var ClickableSchoolDivWithRouter = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](ClickableSchoolDivWithRouter, _super);
    function ClickableSchoolDivWithRouter(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            open: false
        };
        return _this;
    }
    ClickableSchoolDivWithRouter.prototype.open = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var schools;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.setState({ open: true });
                        if (!!this.state.schools) return [3 /*break*/, 2];
                        return [4 /*yield*/, _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].schools
                                .tags("primary")
                                .map(function (_a) {
                                var id = _a.id, name = _a.name, displayName = _a.displayName;
                                return ({ id: id, name: name, displayName: displayName || name || "<namnls>" });
                            })
                                .toValue().load()];
                    case 1:
                        schools = _a.sent();
                        this.setState({ schools: schools });
                        _a.label = 2;
                    case 2: return [2 /*return*/];
                }
            });
        });
    };
    ClickableSchoolDivWithRouter.prototype.close = function () {
        this.setState({ open: false });
    };
    ClickableSchoolDivWithRouter.prototype.selectSchool = function (school) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            function getRoute() {
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
                    var otherDraftId, _a;
                    return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                        switch (_b.label) {
                            case 0:
                                _a = draftId;
                                if (!_a) return [3 /*break*/, 2];
                                return [4 /*yield*/, Object(_logic_get_draft_id__WEBPACK_IMPORTED_MODULE_8__["getDraftId"])(school, courseId).load()];
                            case 1:
                                _a = (_b.sent());
                                _b.label = 2;
                            case 2:
                                otherDraftId = _a;
                                if (taskId && contentId && otherDraftId && (Object(_access_control__WEBPACK_IMPORTED_MODULE_6__["isAdminOrTeacherAtSchool"])(_globals_KED_env__WEBPACK_IMPORTED_MODULE_7__["default"].currentUser, school) || canImpersonate)) {
                                    return [2 /*return*/, "/" + school + "/courses/" + courseId + "/tabs/" + (tabId || "$") + "/contents/" + contentId + "/tasks/" + taskId + "/drafts/" + otherDraftId + "/edit"];
                                }
                                else if (taskId) {
                                    return [2 /*return*/, "/" + school + "/courses/" + courseId + "/tabs/" + (tabId || "$") + "/tasks/" + taskId];
                                }
                                else if (otherDraftId && (Object(_access_control__WEBPACK_IMPORTED_MODULE_6__["isAdminOrTeacherAtSchool"])(_globals_KED_env__WEBPACK_IMPORTED_MODULE_7__["default"].currentUser, school) || canImpersonate)) {
                                    return [2 /*return*/, "/" + school + "/courses/" + courseId + "/tabs/" + (tabId || "$") + "/drafts/" + otherDraftId + "/edit"];
                                }
                                else {
                                    return [2 /*return*/, "/" + school + "/courses/" + courseId + "/tabs/" + (tabId || "$")];
                                }
                                return [2 /*return*/];
                        }
                    });
                });
            }
            var _a, match, history, _b, courseId, tabId, draftId, contentId, taskId, canImpersonate, route, baseUrl;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _a = this.props, match = _a.match, history = _a.history;
                        _b = match.params, courseId = _b.courseId, tabId = _b.tabId, draftId = _b.draftId, contentId = _b.contentId, taskId = _b.taskId;
                        canImpersonate = _globals_KED_env__WEBPACK_IMPORTED_MODULE_7__["default"].currentUser.roles.includes("ADMIN") || // Is admin
                            location.search.includes('role=');
                        if (!(school !== this.props.school)) return [3 /*break*/, 2];
                        return [4 /*yield*/, getRoute()];
                    case 1:
                        route = _c.sent();
                        if (canImpersonate) {
                            baseUrl = Object(_access_control__WEBPACK_IMPORTED_MODULE_6__["preserveImpersonationQuery"])(location.pathname, school === 'standard' ?
                                { role: undefined, school: school } :
                                { role: "EMPLOYEE", school: school });
                            location.href = baseUrl + "#" + route;
                        }
                        else {
                            // Not an admin, just redirect to the route and normal access control will apply
                            history.push(route);
                        }
                        _c.label = 2;
                    case 2:
                        this.close();
                        return [2 /*return*/];
                }
            });
        });
    };
    ClickableSchoolDivWithRouter.prototype.render = function () {
        var _this = this;
        var _a = this.props, school = _a.school, draftId = _a.draftId, displayName = _a.displayName;
        var _b = this.state, open = _b.open, schools = _b.schools;
        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { tabIndex: 1, style: { outline: 0 }, onBlur: function () { return _this.close(); } }, !open ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h5", { onClick: function () { return _this.open(); } }, school !== "standard" ? (displayName || school) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Standard"], ["Standard"])))),
            draftId && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", { className: "pageSideText" }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Arbetsversion"], ["Arbetsversion"]))))) : !schools ?
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_3__["Spinner"], null) : react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h5", { onClick: function () { return _this.close(); } }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["V\u00E4xla skola"], ["V\u00E4xla skola"])))),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("ul", null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("li", { onClick: function () { return _this.selectSchool("standard"); } }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Standard"], ["Standard"])))),
                schools.filter(function (_a) {
                    var name = _a.name;
                    return name !== 'standard';
                })
                    .sort(function (a, b) { return a.displayName.localeCompare(b.displayName, ["sv", "en"]); })
                    .map(function (_a) {
                    var id = _a.id, school = _a.name, displayName = _a.displayName;
                    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("li", { key: id, onClick: function () { return _this.selectSchool(school); } }, displayName);
                }))));
    };
    return ClickableSchoolDivWithRouter;
}(react__WEBPACK_IMPORTED_MODULE_1___default.a.Component));
var ClickableSchoolDiv = Object(react_router__WEBPACK_IMPORTED_MODULE_4__["withRouter"])(ClickableSchoolDivWithRouter);
var templateObject_1, templateObject_2, templateObject_3, templateObject_4;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-area.tsx":
/*!************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-area.tsx ***!
  \************************************************************************/
/*! exports provided: CourseArea */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CourseArea", function() { return CourseArea; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var kedbackend_observable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend/observable */ "./kedbackend/observable.js");
/* harmony import */ var _course_tab_area__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./course-tab-area */ "./src/components/course-builder-ks/viewer-editor/course-tab-area.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _editor_footer_buttons__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./editor-footer-buttons */ "./src/components/course-builder-ks/viewer-editor/editor-footer-buttons.tsx");
/* harmony import */ var _common_two_columns_page__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common/two-columns-page */ "./src/components/course-builder-ks/common/two-columns-page.tsx");
/* harmony import */ var _weekplanner_weekplanner__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../weekplanner/weekplanner */ "./src/components/weekplanner/weekplanner.tsx");
/* harmony import */ var _access_control__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../access-control */ "./src/access-control/index.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/es/index.js");
/* harmony import */ var _utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../utility-components/horizontal-item */ "./src/components/utility-components/horizontal-item.tsx");
/* harmony import */ var _utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../utility-components/align-horizontal */ "./src/components/utility-components/align-horizontal.tsx");
/* harmony import */ var _logic_publish_course__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../logic/publish-course */ "./src/components/course-builder-ks/logic/publish-course.ts");
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../utility-components/lazy-content */ "./src/components/utility-components/lazy-content.tsx");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _version_history_version_history_box__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./version-history/version-history-box */ "./src/components/course-builder-ks/viewer-editor/version-history/version-history-box.tsx");
/* harmony import */ var _course_contents_resource_list_view__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./course-contents/resource-list-view */ "./src/components/course-builder-ks/viewer-editor/course-contents/resource-list-view.tsx");
var _this = undefined;




















var CourseArea = Object(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["withRouter"])(function (_a) {
    var school = _a.school, courseId = _a.courseId, draftId = _a.draftId, course = _a.course, branch = _a.branch, tabs = _a.tabs, activeTab = _a.activeTab, editMode = _a.editMode, history = _a.history, block = _a.block;
    var tab = tabs.filter(function (tab) { return tab.id === activeTab; })[0] || tabs[0];
    var currentTabResources = tab &&
        branch.courseContents.hasEdgesFrom([tab.id]).filter(function (x) { return x.type === "resource-list"; }).first();
    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_common_two_columns_page__WEBPACK_IMPORTED_MODULE_6__["TwoColumnsPage"], { right: editMode && draftId ?
            // In edit mode, show the draft edits to the right
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_version_history_version_history_box__WEBPACK_IMPORTED_MODULE_18__["VersionHistoryBox"], { isAdmin: school === 'standard', branchId: draftId, branchType: "draft-branch" })) :
            // In view mode, show WeekPlanner to the right
            // In view mode, show Resources to the right
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_weekplanner_weekplanner__WEBPACK_IMPORTED_MODULE_7__["WeekPlanner"], { env: _globals_KED_env__WEBPACK_IMPORTED_MODULE_9__["default"], viewCourseUrl: _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_10__["default"].KED_COURSE_VIEWER_URL }),
                currentTabResources && react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_contents_resource_list_view__WEBPACK_IMPORTED_MODULE_19__["ResourceListView"], { content: currentTabResources })), rightWidth: 5, left: react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_tab_area__WEBPACK_IMPORTED_MODULE_3__["CourseTabArea"], { school: school, course: course, branch: branch, tab: tab, editMode: editMode, draftId: draftId, block: block, lazyContents: tab ?
                    branch.courseContents.include("tasks").hasEdgesFrom([tab.id]).toValue() :
                    new kedbackend_observable__WEBPACK_IMPORTED_MODULE_2__["Emitter"]([]) }),
            !editMode ? _globals_KED_env__WEBPACK_IMPORTED_MODULE_9__["default"].currentUser.roles.includes("ADMIN") || Object(_access_control__WEBPACK_IMPORTED_MODULE_8__["isTeacherAtSchool"])(_globals_KED_env__WEBPACK_IMPORTED_MODULE_9__["default"].currentUser, school) ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_13__["AlignHorizontal"], null,
                    draftId && react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_12__["HorizontalItem"], null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { className: "btn btn-large btn-warning", onClick: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                                    switch (_a.label) {
                                        case 0: return [4 /*yield*/, Object(_logic_publish_course__WEBPACK_IMPORTED_MODULE_14__["publishCourse"])({
                                                school: school,
                                                course: course,
                                                draftRepo: _globals_db__WEBPACK_IMPORTED_MODULE_15__["db"].branch(draftId)
                                            })];
                                        case 1:
                                            _a.sent();
                                            return [4 /*yield*/, _globals_db__WEBPACK_IMPORTED_MODULE_15__["db"].saveNow()];
                                        case 2:
                                            _a.sent();
                                            history.push("/" + school + "/courses/" + courseId + "/tabs/" + (tab ? tab.id : '$'));
                                            return [2 /*return*/];
                                    }
                                });
                            }); } },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-lg fa-play", "aria-hidden": true }),
                            "\u00A0", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Publicera"], ["Publicera"]))))),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_16__["LazyContent"], null, _globals_db__WEBPACK_IMPORTED_MODULE_15__["CourseInstances"].getBranchId(_globals_db__WEBPACK_IMPORTED_MODULE_15__["db"].schools.name(school).single(), courseId).map(function (existingDraftId) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_12__["HorizontalItem"], null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { className: "btn btn-large", onClick: existingDraftId ?
                                    // Navigate to edit existing draft
                                    function () { return history.push("/" + school + "/courses/" + courseId + "/tabs/" + (tab ? tab.id : '$') + "/drafts/" + existingDraftId + "/edit"); } :
                                    // Create a draft for the branch and then navigate to it
                                    function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                                        var schoolEntity, newDraftId, newDraftBranchDoc, error_1;
                                        return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                                            switch (_a.label) {
                                                case 0:
                                                    _a.trys.push([0, 4, , 5]);
                                                    return [4 /*yield*/, _globals_db__WEBPACK_IMPORTED_MODULE_15__["db"].schools.name(school).single().load()];
                                                case 1:
                                                    schoolEntity = _a.sent();
                                                    return [4 /*yield*/, Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_17__["computePredestinatedId"])(schoolEntity.officialBranchId + courseId + "draft")];
                                                case 2:
                                                    newDraftId = _a.sent();
                                                    newDraftBranchDoc = {
                                                        id: newDraftId,
                                                        acl: [
                                                            "role:USER:R",
                                                            "schoolRole:" + schoolEntity.name + "/EMPLOYEE:S"
                                                        ],
                                                        name: 'draft',
                                                        schoolId: schoolEntity.id,
                                                        treeParentId: schoolEntity.officialBranchId,
                                                        tags: [courseId]
                                                    };
                                                    _globals_db__WEBPACK_IMPORTED_MODULE_15__["db"].branches.addRelated(schoolEntity.officialBranchId, "approvedChildren", newDraftBranchDoc);
                                                    return [4 /*yield*/, _globals_db__WEBPACK_IMPORTED_MODULE_15__["db"].saveNow()];
                                                case 3:
                                                    _a.sent();
                                                    history.push("/" + school + "/courses/" + courseId + "/tabs/" + (tab ? tab.id : '$') + "/drafts/" + newDraftId + "/edit");
                                                    return [3 /*break*/, 5];
                                                case 4:
                                                    error_1 = _a.sent();
                                                    Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["showError"])(error_1);
                                                    return [3 /*break*/, 5];
                                                case 5: return [2 /*return*/];
                                            }
                                        });
                                    }); } }, existingDraftId ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-lg fa-pencil" }),
                                " ",
                                draftId ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Forts\u00E4tt redigera"], ["Forts\u00E4tt redigera"]))) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Redigera"], ["Redigera"])))) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-lg fa-plus" }),
                                " ", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Skapa skolans version av kursen"], ["Skapa skolans version av kursen"])))))),
                        draftId || !existingDraftId ? undefined : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_12__["HorizontalItem"], null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { className: "btn btn-large", onClick: function () { return history.push("/" + school + "/courses/" + courseId + "/tabs/" + (tab ? tab.id : '$') + "/drafts/" + existingDraftId); } },
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-eye" }),
                                " ", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Visa redigerad version"], ["Visa redigerad version"])))))); })),
                    draftId && react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_12__["HorizontalItem"], null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { className: "btn btn-large", onClick: function () {
                                history.push("/" + school + "/courses/" + courseId + "/tabs/" + (tab ? tab.id : '$'));
                            } },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-lg fa-arrow-left" }),
                            " ", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_6 || (templateObject_6 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Avsluta redigering"], ["Avsluta redigering"]))))))) : undefined :
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_editor_footer_buttons__WEBPACK_IMPORTED_MODULE_5__["EditorFooterButtons"], { school: school, course: course, tab: tab, activeTab: activeTab, draftId: draftId, courseType: course.type, blockId: block && block.id }))) });
});
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/add-task-button.tsx":
/*!********************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/add-task-button.tsx ***!
  \********************************************************************************************/
/*! exports provided: AddTaskButton */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AddTaskButton", function() { return AddTaskButtonWithRouter; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var react_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router */ "./node_modules/react-router/es/index.js");
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");
/* harmony import */ var _logic_compute_task_tags_and_subject__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../logic/compute-task-tags-and-subject */ "./src/components/course-builder-ks/logic/compute-task-tags-and-subject.ts");







var AddTaskButton = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](AddTaskButton, _super);
    function AddTaskButton(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            editingName: false,
            name: ""
        };
        return _this;
    }
    AddTaskButton.prototype.createTask = function (taskName) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, branch, draftId, course, tab, school, content, history, block, learningGoal, _b, tags, subject, newTask;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        this.setState({ editingName: false, name: "" });
                        _a = this.props, branch = _a.branch, draftId = _a.draftId, course = _a.course, tab = _a.tab, school = _a.school, content = _a.content, history = _a.history, block = _a.block, learningGoal = _a.learningGoal;
                        _b = Object(_logic_compute_task_tags_and_subject__WEBPACK_IMPORTED_MODULE_6__["computeTaskTagsAndSubject"])(course, tab, block), tags = _b.tags, subject = _b.subject;
                        newTask = {
                            id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])(),
                            tags: tags,
                            name: taskName,
                            acl: ["role:USER:R", "schoolRole:" + school + "/EMPLOYEE:S"],
                            url: "",
                            taskType: 'task',
                            learningGoal: learningGoal,
                            futureAbilities: [],
                            resources: [],
                            subject: subject
                        };
                        branch.courseContents.addRelated(content.id, "tasks", newTask);
                        return [4 /*yield*/, branch.saveNow()];
                    case 1:
                        _c.sent();
                        history.push("/" + school + "/courses/" + course.id + "/tabs/" + tab.id + "/contents/" + content.id + "/tasks/" + newTask.id + "/drafts/" + draftId + "/edit");
                        return [2 /*return*/];
                }
            });
        });
    };
    AddTaskButton.prototype.render = function () {
        var _this = this;
        var _a = this.state, editingName = _a.editingName, name = _a.name;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "btn", onClick: editingName ? null : function (ev) { return _this.setState({ editingName: true, name: '' }); } },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-plus", "aria-hidden": "true" }),
                !editingName ?
                    ' ' + (Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_5__["isKedStaff"])() ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4gg till uppgift"], ["L\u00E4gg till uppgift"]))) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4gg till egen uppgift"], ["L\u00E4gg till egen uppgift"])))) :
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { type: "text", autoFocus: true, placeholder: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppgiftens namn"], ["Uppgiftens namn"]))), value: name, size: 50, onChange: function (ev) { return _this.setState({ name: ev.target.value }); }, onKeyPress: function (ev) {
                            if (ev.key === 'Enter') {
                                _this.createTask(name);
                            }
                        }, onBlur: function () { return _this.setState({ editingName: false }); } })));
    };
    return AddTaskButton;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));
var AddTaskButtonWithRouter = Object(react_router__WEBPACK_IMPORTED_MODULE_4__["withRouter"])(AddTaskButton);

var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/content-box.tsx":
/*!****************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/content-box.tsx ***!
  \****************************************************************************************/
/*! exports provided: CourseContentBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CourseContentBox", function() { return CourseContentBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _rich_text__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./rich-text */ "./src/components/course-builder-ks/viewer-editor/course-contents/rich-text.tsx");
/* harmony import */ var _learning_tasks_content_box__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./learning-tasks-content-box */ "./src/components/course-builder-ks/viewer-editor/course-contents/learning-tasks-content-box.tsx");
/* harmony import */ var _embedded_html__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./embedded-html */ "./src/components/course-builder-ks/viewer-editor/course-contents/embedded-html.tsx");
/* harmony import */ var _word_bank_content_box__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./word-bank-content-box */ "./src/components/course-builder-ks/viewer-editor/course-contents/word-bank-content-box.tsx");
/* harmony import */ var _resource_list__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./resource-list */ "./src/components/course-builder-ks/viewer-editor/course-contents/resource-list.tsx");







/*export const ContentBox = ({repo, content}: CourseContentProps)=> (
  <div className={["course-content-box", "ked_boxed"].join(' ')} style={{position: 'relative'}}>
    <ConcreteComponent {...{repo, content}} />
    <div style={{position: 'absolute', top: 0, right: 0}}>
        {moduleOrderedIndex > 0 && <span>
          <i className="fa fa-arrow-circle-up selectable"
            aria-hidden="true"
            onClick={()=>this.props.onReorder(-1)} /> </span>}
        {moduleOrderedIndex < course.modules.length - 1 && <span>
          <i className="fa fa-arrow-circle-down selectable"
            aria-hidden="true"
            onClick={()=>this.props.onReorder(1)} /> </span>}
        <RemoveItem
          title="Ta bort modulen"
          style={{display: 'inline-block'}}
          onClick={()=>confirm(L`Ta bort modul ${module.name}?`) && host.update({modules: {$splice: [[moduleIndex, 1]]}})} />
      </div>
  </div>
)*/
function CourseContentBox(_a) {
    var repo = _a.repo, content = _a.content, siblingContents = _a.siblingContents, editMode = _a.editMode, course = _a.course, draftId = _a.draftId, school = _a.school, courseTab = _a.courseTab, reportNumChars = _a.reportNumChars, maxChars = _a.maxChars, block = _a.block;
    switch (content.type) {
        case "rich-text": return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_rich_text__WEBPACK_IMPORTED_MODULE_2__["RichTextContentBox"], tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, { repo: repo, content: content, editMode: editMode, reportNumChars: reportNumChars, maxChars: maxChars }));
        case "learning-goals": return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_learning_tasks_content_box__WEBPACK_IMPORTED_MODULE_3__["LearningTasksContentBox"], tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, {
            repo: repo,
            content: content,
            editMode: editMode,
            course: course,
            draftId: draftId,
            courseTab: courseTab,
            school: school,
            block: block
        }));
        case "resource-list": return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_resource_list__WEBPACK_IMPORTED_MODULE_6__["ResourceListContentBox"], tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, { repo: repo, content: content, editMode: editMode }));
        case "embedded-html": return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_embedded_html__WEBPACK_IMPORTED_MODULE_4__["EmbeddedHTMLContentBox"], tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, { repo: repo, content: content, editMode: editMode, reportNumChars: reportNumChars, maxChars: maxChars }));
        case "word-bank": return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_word_bank_content_box__WEBPACK_IMPORTED_MODULE_5__["WordBankContentBox"], tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, {
            repo: repo,
            editMode: editMode,
            content: content,
            siblingWordBanks: siblingContents.filter(function (c) { return c.type === 'word-bank' && c.id !== content.id; }),
            course: course,
            courseTab: courseTab
        }));
        default: return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null,
            "Ok\u00E4nd inneh\u00E5llstyp: ",
            content.type);
    }
}


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/course-content-types.ts":
/*!************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/course-content-types.ts ***!
  \************************************************************************************************/
/*! exports provided: COURSE_CONTENT_TYPES */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "COURSE_CONTENT_TYPES", function() { return COURSE_CONTENT_TYPES; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");


var COURSE_CONTENT_TYPES = {
    "rich-text": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Textruta"], ["Textruta"]))),
    "youtube-movie": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Youtube film"], ["Youtube film"]))),
    "learning-goals": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4randem\u00E5l och uppgifter"], ["L\u00E4randem\u00E5l och uppgifter"]))),
    "resource-list": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Resurslista"], ["Resurslista"]))),
    "embedded-html": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Inb\u00E4ddad HTML"], ["Inb\u00E4ddad HTML"]))),
    "word-bank": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_6 || (templateObject_6 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ordbank"], ["Ordbank"])))
};
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/embedded-html.tsx":
/*!******************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/embedded-html.tsx ***!
  \******************************************************************************************/
/*! exports provided: EmbeddedHTMLContentBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EmbeddedHTMLContentBox", function() { return EmbeddedHTMLContentBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");




var EmbeddedHTMLContentBox = function (_a) {
    var content = _a.content, repo = _a.repo, editMode = _a.editMode, reportNumChars = _a.reportNumChars, maxChars = _a.maxChars;
    return editMode && (!content.locked || Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_2__["isKedStaff"])()) ?
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h4", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Inb\u00E4ddat material"], ["Inb\u00E4ddat material"])))),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Klipp in HTML kod nedan"], ["Klipp in HTML kod nedan"])))),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("textarea", { style: { width: "100%", height: "100px" }, value: content.html, onChange: function (_a) {
                    var html = _a.target.value;
                    if (html.length > maxChars)
                        return;
                    repo.courseContents.update(content, { html: html });
                    reportNumChars(html.length);
                } })) :
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { dangerouslySetInnerHTML: { __html: content.html } });
};
var templateObject_1, templateObject_2;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/index.ts":
/*!*********************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/index.ts ***!
  \*********************************************************************************/
/*! exports provided: COURSE_CONTENT_TYPES, CourseContentBox, RichTextContentBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _course_content_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./course-content-types */ "./src/components/course-builder-ks/viewer-editor/course-contents/course-content-types.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "COURSE_CONTENT_TYPES", function() { return _course_content_types__WEBPACK_IMPORTED_MODULE_0__["COURSE_CONTENT_TYPES"]; });

/* harmony import */ var _content_box__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./content-box */ "./src/components/course-builder-ks/viewer-editor/course-contents/content-box.tsx");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CourseContentBox", function() { return _content_box__WEBPACK_IMPORTED_MODULE_1__["CourseContentBox"]; });

/* harmony import */ var _rich_text__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./rich-text */ "./src/components/course-builder-ks/viewer-editor/course-contents/rich-text.tsx");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RichTextContentBox", function() { return _rich_text__WEBPACK_IMPORTED_MODULE_2__["RichTextContentBox"]; });






/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/learning-tasks-content-box.tsx":
/*!*******************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/learning-tasks-content-box.tsx ***!
  \*******************************************************************************************************/
/*! exports provided: LearningTasksContentBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LearningTasksContentBox", function() { return LearningTasksContentBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _learning_tasks_settings__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./learning-tasks-settings */ "./src/components/course-builder-ks/viewer-editor/course-contents/learning-tasks-settings.tsx");
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");
/* harmony import */ var _learning_tasks_with_common_goals__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./learning-tasks-with-common-goals */ "./src/components/course-builder-ks/viewer-editor/course-contents/learning-tasks-with-common-goals.tsx");
/* harmony import */ var _learning_tasks_with_separate_goals__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./learning-tasks-with-separate-goals */ "./src/components/course-builder-ks/viewer-editor/course-contents/learning-tasks-with-separate-goals.tsx");







var LearningTasksContentBox = function (_a) {
    var content = _a.content, editMode = _a.editMode, repo = _a.repo, course = _a.course, school = _a.school, draftId = _a.draftId, courseTab = _a.courseTab, block = _a.block;
    var hasCommonLearningGoals = content.hasCommonLearningGoals, commonLearningGoals = content.commonLearningGoals, tasks = content.tasks;
    var refinedLearningGoals = commonLearningGoals
        .map(function (goal) { return goal.trim(); }).filter(function (goal) { return !!goal; });
    return (react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "ked_boxed" },
        editMode && (!content.locked || Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_4__["isKedStaff"])()) ?
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_learning_tasks_settings__WEBPACK_IMPORTED_MODULE_3__["LearningTasksSettings"], { course: course, content: content, repo: repo, tab: courseTab }) :
            courseTab.tabClass !== 'mission-tab' ?
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h2", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4randem\u00E5l och uppgifter"], ["L\u00E4randem\u00E5l och uppgifter"])))) :
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h2", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppdrag"], ["Uppdrag"])))),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("hr", null),
        hasCommonLearningGoals && courseTab.tabClass !== 'mission-tab' ?
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_learning_tasks_with_common_goals__WEBPACK_IMPORTED_MODULE_5__["LearningTasksWithCommonGoals"], tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, { content: content, editMode: editMode, repo: repo, course: course, school: school, draftId: draftId, courseTab: courseTab, block: block, learningGoals: refinedLearningGoals })) :
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_learning_tasks_with_separate_goals__WEBPACK_IMPORTED_MODULE_6__["LearningTasksWithSeparateGoals"], tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, { content: content, editMode: editMode, repo: repo, course: course, school: school, draftId: draftId, courseTab: courseTab, block: block, learningGoals: refinedLearningGoals }))));
};
var templateObject_1, templateObject_2;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/learning-tasks-settings.tsx":
/*!****************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/learning-tasks-settings.tsx ***!
  \****************************************************************************************************/
/*! exports provided: LearningTasksSettings */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LearningTasksSettings", function() { return LearningTasksSettings; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utility-components/align-horizontal */ "./src/components/utility-components/align-horizontal.tsx");
/* harmony import */ var _utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../utility-components/horizontal-item */ "./src/components/utility-components/horizontal-item.tsx");
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");






var LearningTasksSettings = function (_a) {
    var tab = _a.tab, content = _a.content, repo = _a.repo;
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h2", null, tab.tabClass !== 'mission-tab' ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4randem\u00E5l och uppgifter"], ["L\u00E4randem\u00E5l och uppgifter"]))) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppdrag"], ["Uppdrag"])))),
        Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_5__["isKedStaff"])() && tab.tabClass !== 'mission-tab' ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_3__["AlignHorizontal"], null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_4__["HorizontalItem"], null,
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("input", { type: "checkbox", checked: content.hasCommonLearningGoals, onChange: function (ev) { return repo.courseContents.update(content, { hasCommonLearningGoals: !!ev.target.checked }); } })),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_4__["HorizontalItem"], null,
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null,
                            "\u00A0", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Specificera gemensamma l\u00E4randem\u00E5l f\u00F6r samtliga uppgifter"], ["Specificera gemensamma l\u00E4randem\u00E5l f\u00F6r samtliga uppgifter"]))))))),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, content.hasCommonLearningGoals ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ange de gemensamma l\u00E4randem\u00E5len. Ange ett l\u00E4randem\u00E5l per rad."], ["Ange de gemensamma l\u00E4randem\u00E5len. Ange ett l\u00E4randem\u00E5l per rad."]))) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ange ett l\u00E4randem\u00E5l per rad."], ["Ange ett l\u00E4randem\u00E5l per rad."])))),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("textarea", { className: "learning-goal-box", value: content.commonLearningGoals.join('\n'), onChange: function (ev) { return repo.courseContents.update(content, {
                        commonLearningGoals: ev.target.value.split('\n')
                    }); } }))) : null);
};
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/learning-tasks-with-common-goals.tsx":
/*!*************************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/learning-tasks-with-common-goals.tsx ***!
  \*************************************************************************************************************/
/*! exports provided: LearningTasksWithCommonGoals */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LearningTasksWithCommonGoals", function() { return LearningTasksWithCommonGoals; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _course_viewer_subcomponents_task_list__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../course-viewer/subcomponents/task-list */ "./src/components/course-viewer/subcomponents/task-list.tsx");
/* harmony import */ var _add_task_button__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./add-task-button */ "./src/components/course-builder-ks/viewer-editor/course-contents/add-task-button.tsx");
/* harmony import */ var _utility_components_sortable_task_list__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../utility-components/sortable-task-list */ "./src/components/utility-components/sortable-task-list.tsx");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/es/index.js");
/* harmony import */ var _logic_task_order__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../logic/task-order */ "./src/components/course-builder-ks/logic/task-order.ts");







var LearningTasksWithCommonGoals = function (_a) {
    var school = _a.school, repo = _a.repo, content = _a.content, draftId = _a.draftId, editMode = _a.editMode, course = _a.course, courseTab = _a.courseTab, learningGoals = _a.learningGoals, block = _a.block;
    var tasks = Object(_logic_task_order__WEBPACK_IMPORTED_MODULE_6__["getSortedTasks"])(content);
    var subjectToTasksLookup = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["arrayToLookup"])(tasks, function (t) { return t.subject || ""; });
    var subject = course.type === 'step-course' ?
        course.subject :
        courseTab.subject;
    if (subject && !subjectToTasksLookup[subject.subjectName]) {
        // Make sure we have at least one subject heading if task list is empty:
        subjectToTasksLookup[subject.subjectName] = [];
    }
    // TODO: Kolla hr och i learning-tasks-with-separate-goals.
    //  * Behvs subject-lookup?
    //  * Kan vi bryta vy-varianten frn edit varianten? (i bda fallen?)
    // Sedan:
    //  * Implementera edit varianterna. Lgg till.
    //  * Implementera sortering funktionalitet i SortableTaskList.
    //  * I all vyer av tasks (subject planner + courseviewer): 
    //    * G igenom alla task i den ordningen dom redan r i
    //    * 
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, Object.keys(subjectToTasksLookup).map(function (subject) {
        var taskList = subjectToTasksLookup[subject];
        var learningModuleTasks = taskList.map(function (task) { return ({
            id: task.id,
            name: task.name,
            url: editMode ?
                "#/" + school + "/courses/" + course.id + "/tabs/" + courseTab.id + "/contents/" + content.id + "/tasks/" + task.id + "/drafts/" + draftId + "/edit" :
                draftId ?
                    "#/" + school + "/courses/" + course.id + "/tabs/" + courseTab.id + "/contents/" + content.id + "/tasks/" + task.id + "/drafts/" + draftId :
                    "#/" + school + "/courses/" + course.id + "/tabs/" + courseTab.id + "/tasks/" + task.id,
            courseName: course.name,
            learningGoal: subject,
            step: courseTab.type === 'step-course-tab' ? courseTab.stepNo : undefined,
            task: task,
            courseInfo: {
                school: school,
                course: course.id,
                tab: courseTab.id
            }
        }); });
        function linkToTask(task) {
            return "/" + school + "/courses/" + course.id + "/tabs/" + courseTab.id + "/contents/" + content.id + "/tasks/" + task.id + "/drafts/" + draftId + "/edit";
        }
        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { key: subject },
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h5", null, subject),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("ul", null, learningGoals.map(function (lg) { return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("li", { key: lg }, lg); })),
            !editMode ?
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_course_viewer_subcomponents_task_list__WEBPACK_IMPORTED_MODULE_2__["TaskList"], { learningTasks: learningModuleTasks }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_utility_components_sortable_task_list__WEBPACK_IMPORTED_MODULE_4__["SortableTaskList"], { taskMetas: learningModuleTasks.map(function (_a) {
                        var task = _a.task;
                        return ({ task: task, isTaskOwner: true });
                    }), renderEditLink: function (_a) {
                        var task = _a.task;
                        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_5__["Link"], { to: linkToTask(task), className: "editItem" }),
                            "\u00A0");
                    }, renderLink: function (_a) {
                        var task = _a.task;
                        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_5__["Link"], { to: linkToTask(task) }, task.name);
                    }, onSort: function (source, target, placement) {
                        var updatedOrder = Object(_logic_task_order__WEBPACK_IMPORTED_MODULE_6__["computeUpdatedOrder"])(content.tasks, content.taskOrder, source, target, placement, { appendLeftovers: true });
                        repo.courseContents.update(content, { taskOrder: updatedOrder });
                    } }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_add_task_button__WEBPACK_IMPORTED_MODULE_3__["AddTaskButton"], { branch: repo, content: content, course: course, school: school, draftId: draftId, tab: courseTab, block: block, learningGoal: subject }))));
    }));
};


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/learning-tasks-with-separate-goals.tsx":
/*!***************************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/learning-tasks-with-separate-goals.tsx ***!
  \***************************************************************************************************************/
/*! exports provided: LearningTasksWithSeparateGoals */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LearningTasksWithSeparateGoals", function() { return LearningTasksWithSeparateGoals; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _course_viewer_subcomponents_task_list__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../course-viewer/subcomponents/task-list */ "./src/components/course-viewer/subcomponents/task-list.tsx");
/* harmony import */ var _add_task_button__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./add-task-button */ "./src/components/course-builder-ks/viewer-editor/course-contents/add-task-button.tsx");
/* harmony import */ var _utility_components_sortable_task_list__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../utility-components/sortable-task-list */ "./src/components/utility-components/sortable-task-list.tsx");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/es/index.js");
/* harmony import */ var _logic_task_order__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../logic/task-order */ "./src/components/course-builder-ks/logic/task-order.ts");








var LearningTasksWithSeparateGoals = function (_a) {
    var school = _a.school, repo = _a.repo, content = _a.content, draftId = _a.draftId, editMode = _a.editMode, course = _a.course, courseTab = _a.courseTab, learningGoals = _a.learningGoals, block = _a.block;
    var tasks = Object(_logic_task_order__WEBPACK_IMPORTED_MODULE_7__["getSortedTasks"])(content);
    var cathegorizedTasks = {};
    var goalToTasksLookup = learningGoals.reduce(function (res, goal) {
        res[goal] = tasks.filter(function (task) {
            if (task.learningGoal && task.learningGoal.split('\n')
                .map(function (line) { return line.trim().toLowerCase(); })
                .includes(goal.toLowerCase())) {
                cathegorizedTasks[task.id] = true;
                return true;
            }
        });
        return res;
    }, {});
    var uncathegorizedTasks = tasks.filter(function (t) { return !cathegorizedTasks[t.id]; });
    if (courseTab.tabClass === 'mission-tab' || tasks.length === 0) {
        goalToTasksLookup[''] = uncathegorizedTasks;
    }
    else if (uncathegorizedTasks.length > 0) {
        goalToTasksLookup[Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00D6vergripande"], ["\u00D6vergripande"])))] = uncathegorizedTasks;
    }
    function linkToTask(task) {
        return "/" + school + "/courses/" + course.id + "/tabs/" + courseTab.id + "/contents/" + content.id + "/tasks/" + task.id + "/drafts/" + draftId + "/edit";
    }
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null, Object.keys(goalToTasksLookup).map(function (goal) {
        var taskList = goalToTasksLookup[goal];
        var learningModuleTasks = taskList.map(function (task) { return ({
            id: task.id,
            name: task.name,
            url: editMode ?
                "#/" + school + "/courses/" + course.id + "/tabs/" + courseTab.id + "/contents/" + content.id + "/tasks/" + task.id + "/drafts/" + draftId + "/edit" :
                draftId ?
                    "#/" + school + "/courses/" + course.id + "/tabs/" + courseTab.id + "/contents/" + content.id + "/tasks/" + task.id + "/drafts/" + draftId :
                    "#/" + school + "/courses/" + course.id + "/tabs/" + courseTab.id + "/tasks/" + task.id,
            courseName: course.name,
            learningGoal: courseTab.tabClass === 'mission-tab' ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppdrag"], ["Uppdrag"]))) : goal,
            step: courseTab.type === 'step-course-tab' ? courseTab.stepNo : undefined,
            task: task,
            courseInfo: {
                school: school,
                course: course.id,
                tab: courseTab.id
            }
        }); });
        return (react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { key: goal },
            goal && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h4", null, goal),
            !editMode ?
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_viewer_subcomponents_task_list__WEBPACK_IMPORTED_MODULE_3__["TaskList"], { learningTasks: learningModuleTasks }) :
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_sortable_task_list__WEBPACK_IMPORTED_MODULE_5__["SortableTaskList"], { taskMetas: learningModuleTasks.map(function (_a) {
                            var task = _a.task;
                            return ({ task: task, isTaskOwner: true });
                        }), renderEditLink: function (_a) {
                            var task = _a.task;
                            return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_6__["Link"], { to: linkToTask(task), className: "editItem" }),
                                "\u00A0");
                        }, renderLink: function (_a) {
                            var task = _a.task;
                            return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_6__["Link"], { to: linkToTask(task) }, task.name);
                        }, onSort: function (source, target, placement) {
                            var updatedOrder = Object(_logic_task_order__WEBPACK_IMPORTED_MODULE_7__["computeUpdatedOrder"])(content.tasks, content.taskOrder, source, target, placement, { appendLeftovers: true });
                            repo.courseContents.update(content, { taskOrder: updatedOrder });
                        } }),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_add_task_button__WEBPACK_IMPORTED_MODULE_4__["AddTaskButton"], { branch: repo, content: content, course: course, school: school, draftId: draftId, tab: courseTab, block: block, learningGoal: goal }))));
    }));
};
var templateObject_1, templateObject_2;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/resource-list-view.tsx":
/*!***********************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/resource-list-view.tsx ***!
  \***********************************************************************************************/
/*! exports provided: ResourceListView */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ResourceListView", function() { return ResourceListView; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utility_components_live_query_view__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../utility-components/live-query-view */ "./src/components/utility-components/live-query-view.tsx");


var ResourceListView = Object(_utility_components_live_query_view__WEBPACK_IMPORTED_MODULE_1__["liveQueryView"])(function (_a) {
    var content = _a.content;
    return content.map(function (contentResources) {
        var resourceList = contentResources;
        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, resourceList && resourceList.resources.length > 0 && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "ked_boxed kpMenu" },
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h2", null, "Resurser"),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("hr", null),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "taskContainer" }, resourceList.resources.map(function (res) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("a", { href: res.url, target: "_blank" }, res.name)));
            }))));
    });
});


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/resource-list.tsx":
/*!******************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/resource-list.tsx ***!
  \******************************************************************************************/
/*! exports provided: ResourceListContentBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ResourceListContentBox", function() { return ResourceListContentBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");
/* harmony import */ var _common_dialog_context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/dialog-context */ "./src/components/course-builder-ks/common/dialog-context.ts");
/* harmony import */ var _course_builder_modal_pages_edit_resource__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../course-builder/modal-pages/edit-resource */ "./src/components/course-builder/modal-pages/edit-resource.tsx");






var ResourceListContentBox = function (_a) {
    var content = _a.content, editMode = _a.editMode, repo = _a.repo;
    var resources = content.resources;
    var context = Object(react__WEBPACK_IMPORTED_MODULE_1__["useContext"])(_common_dialog_context__WEBPACK_IMPORTED_MODULE_4__["DialogsContext"]);
    return editMode && (!content.locked || Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_3__["isKedStaff"])()) ?
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "ked_boxed" },
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h4", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Resurser"], ["Resurser"])))),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "taskContainer" }, resources.map(function (resource, idx) {
                return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "align-horizontal", key: idx },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("a", { className: "editItem", onClick: function () { return context.openDialog(react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_modal_pages_edit_resource__WEBPACK_IMPORTED_MODULE_5__["EditResource"], { title: "Edit resource", resource: resource, onSave: function (res) {
                                    resources[idx] = res;
                                    repo.courseContents.update(content, { resources: tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](resources) });
                                    context.closeDialog();
                                }, onDelete: function () {
                                    resources.splice(idx, 1);
                                    repo.courseContents.update(content, { resources: tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](resources) });
                                    context.closeDialog();
                                } })); } }),
                        "\u00A0"),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "align-horizontal" },
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" },
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("a", { href: resource.url }, resource.name)))));
            })),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("a", { className: "btn", onClick: function () { return context.openDialog(react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_modal_pages_edit_resource__WEBPACK_IMPORTED_MODULE_5__["EditResource"], { title: "Resurs", onSave: function (resource) { repo.courseContents.update(content, { resources: tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](resources, [resource]) }); context.closeDialog(); } })); } },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-plus", "aria-hidden": "true" }), Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4gg till resurs"], ["L\u00E4gg till resurs"]))))) : react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null);
};
var templateObject_1, templateObject_2;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/rich-text.tsx":
/*!**************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/rich-text.tsx ***!
  \**************************************************************************************/
/*! exports provided: RichTextContentBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RichTextContentBox", function() { return RichTextContentBox; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utility_components_wysiwyg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../utility-components/wysiwyg */ "./src/components/utility-components/wysiwyg/index.tsx");
/* harmony import */ var _utility_components_wysiwyg_actions_sv__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utility-components/wysiwyg/actions-sv */ "./src/components/utility-components/wysiwyg/actions-sv.ts");
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");




var RichTextContentBox = function (_a) {
    var content = _a.content, repo = _a.repo, editMode = _a.editMode, reportNumChars = _a.reportNumChars, maxChars = _a.maxChars;
    return editMode ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null,
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_utility_components_wysiwyg__WEBPACK_IMPORTED_MODULE_1__["Wysiwyg"], { html: content.html, defaultActions: _utility_components_wysiwyg_actions_sv__WEBPACK_IMPORTED_MODULE_2__["default"], readOnly: !editMode || (content.locked && !Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_3__["isKedStaff"])()), reportNumChars: reportNumChars, maxChars: maxChars, actions: [
                "bold",
                "italic",
                "underline",
                "strikethrough",
                "heading2",
                "heading3",
                "olist",
                "ulist",
                "outdent",
                "indent",
                "line",
                "link",
                "image"
            ], onChange: editMode && (function (html) { return repo.courseContents.update(content, { html: html }); }) })) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null,
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "rich-text-readonly", dangerouslySetInnerHTML: { __html: content.html } }));
};


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/word-bank-content-box.tsx":
/*!**************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/word-bank-content-box.tsx ***!
  \**************************************************************************************************/
/*! exports provided: WordBankContentBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WordBankContentBox", function() { return WordBankContentBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var _word_bank_content_settings__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./word-bank-content-settings */ "./src/components/course-builder-ks/viewer-editor/course-contents/word-bank-content-settings.tsx");
/* harmony import */ var _course_builder_sub_components_ellipsis_loader__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../course-builder/sub-components/ellipsis-loader */ "./src/components/course-builder/sub-components/ellipsis-loader.tsx");
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");






function WordBankContentBox(_a) {
    var repo = _a.repo, content = _a.content, siblingWordBanks = _a.siblingWordBanks, editMode = _a.editMode, course = _a.course, courseTab = _a.courseTab;
    var selectedWordBank = content.selectedWordBank;
    var subjectName = course.subject.subjectName;
    var stepNo = courseTab.stepNo;
    var iframeSrc = selectedWordBank && _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_2__["cfg"].KED_WORDBANKS_URL + "?preview=true&subject=" + subjectName + "&step=" + stepNo + "&list=" + selectedWordBank.key;
    var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(200), 2), iframeHeight = _b[0], setIframeHeight = _b[1];
    var iframeRef = Object(react__WEBPACK_IMPORTED_MODULE_1__["useRef"])();
    var wordBanksAlreadyAdded = siblingWordBanks.map(function (c) { return c.selectedWordBank && c.selectedWordBank.key; })
        .filter(function (key) { return !!key; });
    Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function () { return setIframeHeight(200); }, [selectedWordBank && selectedWordBank.key]); // Reset iframe height whenever selected word bank changes and let onload fix it.
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
        editMode && (!content.locked || Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_5__["isKedStaff"])()) && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Suspense, { fallback: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_sub_components_ellipsis_loader__WEBPACK_IMPORTED_MODULE_4__["EllipsisLoader"], null) },
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_word_bank_content_settings__WEBPACK_IMPORTED_MODULE_3__["WordBankContentSettings"], tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, { subjectName: subjectName, stepNo: stepNo, wordBanksAlreadyAdded: wordBanksAlreadyAdded }, { selectedWordBank: selectedWordBank, onChange: function (_a) {
                    var name = _a.name, key = _a.key;
                    repo.courseContents.update(content, { selectedWordBank: { name: name, key: key } });
                } }))),
        selectedWordBank &&
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("iframe", { ref: iframeRef, scrolling: "no", frameBorder: "0", style: {
                    width: "100%",
                    height: iframeHeight,
                    padding: 0,
                    margin: 0
                }, src: iframeSrc, onLoad: function () {
                    setIframeHeight(iframeRef.current.contentWindow.document.body.scrollHeight);
                } }));
}


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/word-bank-content-settings.tsx":
/*!*******************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/word-bank-content-settings.tsx ***!
  \*******************************************************************************************************/
/*! exports provided: WordBankContentSettings */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WordBankContentSettings", function() { return WordBankContentSettings; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var fetch_suspense__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! fetch-suspense */ "./node_modules/fetch-suspense/fetch-suspense.js");
/* harmony import */ var fetch_suspense__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(fetch_suspense__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var react_select__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-select */ "./node_modules/react-select/dist/react-select.esm.js");






function WordBankContentSettings(_a) {
    var subjectName = _a.subjectName, stepNo = _a.stepNo, selectedWordBank = _a.selectedWordBank, wordBanksAlreadyAdded = _a.wordBanksAlreadyAdded, onChange = _a.onChange;
    var apiUrl = _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_2__["cfg"].KED_ENUM_WORDBANKS_URL + "?sv.contenttype=application/json&subject=" + subjectName + "&step=" + stepNo;
    var availableWordBanks = fetch_suspense__WEBPACK_IMPORTED_MODULE_3___default()(apiUrl);
    // Filter out word banks that was already added to the same tab
    availableWordBanks = availableWordBanks.filter(function (_a) {
        var order = _a.order;
        return (selectedWordBank && order === selectedWordBank.key) ||
            !wordBanksAlreadyAdded ||
            !wordBanksAlreadyAdded.includes(order);
    });
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h3", null, selectedWordBank ? selectedWordBank.name : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["V\u00E4lj ordbank"], ["V\u00E4lj ordbank"])))),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_select__WEBPACK_IMPORTED_MODULE_5__["default"], { isMulti: false, placeholder: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["V\u00E4lj bland ordbanker f\u00F6r ", ", steg ", ""], ["V\u00E4lj bland ordbanker f\u00F6r ", ", steg ", ""])), subjectName, stepNo), noOptionsMessage: function () { return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Kunde inte hitta tillg\u00E4ngliga ordbanker f\u00F6r ", ", steg ", ""], ["Kunde inte hitta tillg\u00E4ngliga ordbanker f\u00F6r ", ", steg ", ""])), subjectName, stepNo); }, options: availableWordBanks.map(function (_a) {
                var name = _a.name, id = _a.id, order = _a.order, url = _a.url;
                return ({ label: name, value: order });
            }), value: selectedWordBank && { label: selectedWordBank.name, value: selectedWordBank.key }, onChange: function (option) { return onChange({ name: option.label, key: option.value }); } }));
}
var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-tab-area.tsx":
/*!****************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-tab-area.tsx ***!
  \****************************************************************************/
/*! exports provided: CourseTabArea */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CourseTabArea", function() { return CourseTabArea; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_live_query_view__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utility-components/live-query-view */ "./src/components/utility-components/live-query-view.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _add_content_button__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./add-content-button */ "./src/components/course-builder-ks/viewer-editor/add-content-button.tsx");
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");
/* harmony import */ var _tab_settings__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./tab-settings */ "./src/components/course-builder-ks/viewer-editor/tab-settings.tsx");
/* harmony import */ var _course_tab_content_box__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./course-tab-content-box */ "./src/components/course-builder-ks/viewer-editor/course-tab-content-box.tsx");
/* harmony import */ var _tab_settings_admin__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./tab-settings-admin */ "./src/components/course-builder-ks/viewer-editor/tab-settings-admin.tsx");









var CourseTabArea = Object(_utility_components_live_query_view__WEBPACK_IMPORTED_MODULE_2__["liveQueryView"])(function (_a) {
    var course = _a.course, branch = _a.branch, block = _a.block, tab = _a.tab, editMode = _a.editMode, lazyContents = _a.lazyContents, school = _a.school, draftId = _a.draftId;
    return lazyContents.map(function (contents) {
        if (!tab) {
            if (editMode)
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Denna kurs saknar inneh\u00E5ll. Skapa ny flik genom knappen ovan"], ["Denna kurs saknar inneh\u00E5ll. Skapa ny flik genom knappen ovan"]))));
            else
                return Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_5__["isKedStaff"])() ?
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Denna kurs saknar inneh\u00E5ll. V\u00E4lj Redigera knappen f\u00F6r att l\u00E4gga till flikar."], ["Denna kurs saknar inneh\u00E5ll. V\u00E4lj Redigera knappen f\u00F6r att l\u00E4gga till flikar."])))) :
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Denna kurs saknar inneh\u00E5ll."], ["Denna kurs saknar inneh\u00E5ll."]))));
        }
        contents = contents.slice().sort(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["compareProp"])("order"));
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
            editMode ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_5__["isKedStaff"])() || !tab.locked ?
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_tab_settings__WEBPACK_IMPORTED_MODULE_6__["TabSettings"], { course: course, tab: tab, repo: branch }) :
                    null,
                Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_5__["isKedStaff"])() ?
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_tab_settings_admin__WEBPACK_IMPORTED_MODULE_8__["TabSettingsAdmin"], { course: course, tab: tab, repo: branch, block: block }) :
                    null) : null,
            contents.map(function (content, contentOrderIndex) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_tab_content_box__WEBPACK_IMPORTED_MODULE_7__["CourseTabContentBox"], { key: content.id, content: content, branch: branch, contentOrderIndex: contentOrderIndex, contents: contents, course: course, draftId: draftId, editMode: editMode, school: school, block: block, tab: tab }); }),
            !!editMode && (Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_5__["isKedStaff"])() || !tab.locked) && react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                tab.tabClass === 'word-bank-tab' &&
                    // [ Add Word Bank ] button
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_content_button__WEBPACK_IMPORTED_MODULE_4__["AddContentButton"], { type: "word-bank", tab: tab, branch: branch, course: course }),
                tab.tabClass !== 'word-bank-tab' &&
                    (tab.tabClass === 'mission-tab' || tab.tabClass === 'subject-tab' || course.type === 'step-course') &&
                    !contents.some(function (c) { return c.type === 'learning-goals'; }) &&
                    // [ Add Learning Goals ] button
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_content_button__WEBPACK_IMPORTED_MODULE_4__["AddContentButton"], { type: "learning-goals", tab: tab, branch: branch, course: course }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_content_button__WEBPACK_IMPORTED_MODULE_4__["AddContentButton"], { type: "rich-text", tab: tab, branch: branch, course: course }),
                contents.filter(function (c) { return c.type == "resource-list"; }).length == 0 &&
                    // [ Add Resource ] button
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_content_button__WEBPACK_IMPORTED_MODULE_4__["AddContentButton"], { type: "resource-list", tab: tab, branch: branch, course: course }),
                tab.tabClass === 'intro-tab' || tab.tabClass === 'run-up-tab' &&
                    // [ Add Embedded HTML ] button
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_content_button__WEBPACK_IMPORTED_MODULE_4__["AddContentButton"], { type: "embedded-html", tab: tab, branch: branch, course: course })));
    });
});
var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-tab-content-box.tsx":
/*!***********************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-tab-content-box.tsx ***!
  \***********************************************************************************/
/*! exports provided: CourseTabContentBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CourseTabContentBox", function() { return CourseTabContentBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");
/* harmony import */ var _course_contents__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./course-contents */ "./src/components/course-builder-ks/viewer-editor/course-contents/index.ts");
/* harmony import */ var _utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utility-components/align-horizontal */ "./src/components/utility-components/align-horizontal.tsx");
/* harmony import */ var _utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utility-components/horizontal-item */ "./src/components/utility-components/horizontal-item.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _course_builder_sub_components_remove_item__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../course-builder/sub-components/remove-item */ "./src/components/course-builder/sub-components/remove-item.tsx");
/* harmony import */ var kedbackend_observable__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! kedbackend/observable */ "./kedbackend/observable.js");
/* harmony import */ var _utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../utility-components/lazy-content */ "./src/components/utility-components/lazy-content.tsx");
/* harmony import */ var _logic_change_sort_order__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../logic/change-sort-order */ "./src/components/course-builder-ks/logic/change-sort-order.ts");
/* harmony import */ var _common_field_limits__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../common/field-limits */ "./src/components/course-builder-ks/common/field-limits.ts");












var MAX_CHARS_IN_CONTENTS = _common_field_limits__WEBPACK_IMPORTED_MODULE_11__["FieldLimits"].MAX_CHARS_IN_CONTENTS;
var CourseTabContentBox = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](CourseTabContentBox, _super);
    function CourseTabContentBox(props) {
        var _this = _super.call(this, props) || this;
        _this.numCharsObservable = new kedbackend_observable__WEBPACK_IMPORTED_MODULE_8__["Emitter"](0); // Dedicated state for a sub-part of the generated DOM (avoid infinite loop)
        _this.state = {
        //numChars: 0
        };
        return _this;
    }
    CourseTabContentBox.prototype.render = function () {
        var _a = this.props, editMode = _a.editMode, content = _a.content, branch = _a.branch, course = _a.course, tab = _a.tab, school = _a.school, draftId = _a.draftId, contentOrderIndex = _a.contentOrderIndex, contents = _a.contents, block = _a.block;
        var kedStaff = Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_2__["isKedStaff"])();
        //const { numChars } = this.state;
        var numCharsObservable = this.numCharsObservable;
        return !editMode || (content.locked && !kedStaff) ?
            //
            // Not edit mode:
            //
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_contents__WEBPACK_IMPORTED_MODULE_3__["CourseContentBox"], { key: content.id, repo: branch, content: content, siblingContents: contents, course: course, editMode: editMode, courseTab: tab, school: school, draftId: draftId, block: block }) :
            //
            // Edit mode:
            //
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { key: content.id, className: ["course-content-box", content.type !== 'learning-goals' && "ked_boxed"].filter(function (x) { return !!x; }).join(' '), style: { position: 'relative' } },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_4__["AlignHorizontal"], null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_5__["HorizontalItem"], null,
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", { className: "box-mini-label" }, _course_contents__WEBPACK_IMPORTED_MODULE_3__["COURSE_CONTENT_TYPES"][content.type])),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_5__["HorizontalItem"], null, kedStaff ?
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
                            "\u00A0",
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("input", { type: "checkbox", checked: !content.locked, onChange: function (ev) { return branch.courseContents.update(content, { locked: !ev.target.checked }); } }), Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Till\u00E5t redigering"], ["Till\u00E5t redigering"]))),
                            !content.locked ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
                                "\u00A0",
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("input", { type: "checkbox", checked: !content.lockDelete, onChange: function (ev) { return branch.courseContents.update(content, { lockDelete: !ev.target.checked }); } }), Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Till\u00E5t d\u00F6lja rutan"], ["Till\u00E5t d\u00F6lja rutan"])))) : null) : null)),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_contents__WEBPACK_IMPORTED_MODULE_3__["CourseContentBox"], { repo: branch, content: content, siblingContents: contents, course: course, editMode: true, school: school, draftId: draftId, courseTab: tab, maxChars: MAX_CHARS_IN_CONTENTS, reportNumChars: function (numChars) {
                        // Avoid setting state because it turns out to be infinite loop.
                        // (setState() leads to re-render of this whole component, leading to
                        // re-render of CourseContentBox, that calls reportNumChars etc...)
                        // Instead we communicate this particular state to a dedicated Observable
                        // that will only update the particular component that is affected by it.
                        numCharsObservable.dispatch(numChars);
                        //this.setState({ numChars });
                    }, block: block }),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { style: { position: 'absolute', top: 0, right: 0 } },
                    (kedStaff || !content.locked) && contentOrderIndex > 0 && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("span", null,
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-arrow-circle-up selectable", "aria-hidden": "true", onClick: function () {
                                var newOrder = Object(_logic_change_sort_order__WEBPACK_IMPORTED_MODULE_10__["reorder"])(contents, content.id, contents[contentOrderIndex - 1].id, "before");
                                if (newOrder) {
                                    branch.courseContents.update(content, { order: newOrder });
                                }
                            } }),
                        " "),
                    (kedStaff || !content.locked) && contentOrderIndex < contents.length - 1 && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("span", null,
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-arrow-circle-down selectable", "aria-hidden": "true", onClick: function () {
                                var newOrder = Object(_logic_change_sort_order__WEBPACK_IMPORTED_MODULE_10__["reorder"])(contents, content.id, contents[contentOrderIndex + 1].id, "after");
                                if (newOrder) {
                                    branch.courseContents.update(content, { order: newOrder });
                                }
                            } }),
                        " "),
                    kedStaff || !content.lockDelete ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_sub_components_remove_item__WEBPACK_IMPORTED_MODULE_7__["RemoveItem"], { title: school === 'standard' ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ta bort inneh\u00E5llsrutan"], ["Ta bort inneh\u00E5llsrutan"]))) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["D\u00F6lj inneh\u00E5llsrutan"], ["D\u00F6lj inneh\u00E5llsrutan"]))), style: { display: 'inline-block' }, onClick: function () { return confirm(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ta bort inneh\u00E5ll?"], ["Ta bort inneh\u00E5ll?"])))) && branch.courseTabs.removeRelated(tab.id, "contents", content); } })
                        : null),
                content.type === 'rich-text' ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_9__["LazyContent"], null, numCharsObservable.map(function (numChars) {
                    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: ["char-counter-bottom"].concat(numChars >= MAX_CHARS_IN_CONTENTS ? "overflowed" : []).join(' ') }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_6 || (templateObject_6 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Texten inneh\u00E5ller ", " av max ", " till\u00E5tna tecken"], ["Texten inneh\u00E5ller ", " av max ", " till\u00E5tna tecken"])), numChars, MAX_CHARS_IN_CONTENTS));
                })) :
                    undefined);
    };
    return CourseTabContentBox;
}(react__WEBPACK_IMPORTED_MODULE_1___default.a.Component));

var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-tab/tab-classes.ts":
/*!**********************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-tab/tab-classes.ts ***!
  \**********************************************************************************/
/*! exports provided: CourseTabClasses, TabTypesPerCourseType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CourseTabClasses", function() { return CourseTabClasses; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TabTypesPerCourseType", function() { return TabTypesPerCourseType; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");


var CourseTabClasses = {
    "intro-tab": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Introduktionsflik"], ["Introduktionsflik"]))),
    "run-up-tab": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Upptaktsflik"], ["Upptaktsflik"]))),
    "subject-tab": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4mnesflik"], ["\u00C4mnesflik"]))),
    "mission-tab": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppdragsflik"], ["Uppdragsflik"]))),
    "content-tab": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Generell flik"], ["Generell flik"]))),
    "teacher-tab": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_6 || (templateObject_6 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4rarsida"], ["L\u00E4rarsida"]))),
    "word-bank-tab": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_7 || (templateObject_7 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ordbank"], ["Ordbank"])))
};
var TabTypesPerCourseType = {
    "step-course": [
        "content-tab",
        "intro-tab",
        "teacher-tab",
        "word-bank-tab"
    ],
    "theme-course": [
        "content-tab",
        "run-up-tab",
        "subject-tab",
        "mission-tab",
        "teacher-tab"
    ]
};
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-viewer-page.tsx":
/*!*******************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-viewer-page.tsx ***!
  \*******************************************************************************/
/*! exports provided: CourseViewerPage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CourseViewerPage", function() { return CourseViewerPage; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _common_banner__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/banner */ "./src/components/course-builder-ks/common/banner.tsx");
/* harmony import */ var kedbackend_observable__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! kedbackend/observable */ "./kedbackend/observable.js");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var _access_control__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../access-control */ "./src/access-control/index.ts");
/* harmony import */ var _add_tab_button__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./add-tab-button */ "./src/components/course-builder-ks/viewer-editor/add-tab-button.tsx");
/* harmony import */ var react_router__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react-router */ "./node_modules/react-router/es/index.js");
/* harmony import */ var _course_area__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./course-area */ "./src/components/course-builder-ks/viewer-editor/course-area.tsx");
/* harmony import */ var _task_task_editor__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./task/task-editor */ "./src/components/course-builder-ks/viewer-editor/task/task-editor.tsx");
/* harmony import */ var _clickable_school_div__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./clickable-school-div */ "./src/components/course-builder-ks/viewer-editor/clickable-school-div.tsx");
/* harmony import */ var _logic_is_employee__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../logic/is-employee */ "./src/components/course-builder-ks/logic/is-employee.ts");
/* harmony import */ var _task_viewer_task_viewer_page__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./task/viewer/task-viewer-page */ "./src/components/course-builder-ks/viewer-editor/task/viewer/task-viewer-page.tsx");
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");
/* harmony import */ var _utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../utility-components/lazy-content */ "./src/components/utility-components/lazy-content.tsx");
/* harmony import */ var _logic_change_sort_order__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../logic/change-sort-order */ "./src/components/course-builder-ks/logic/change-sort-order.ts");


















var CourseViewerPage = Object(react_router__WEBPACK_IMPORTED_MODULE_9__["withRouter"])((function (_a) {
    var school = _a.school, courseId = _a.courseId, activeTab = _a.activeTab, draftId = _a.draftId, editMode = _a.editMode, history = _a.history, contentId = _a.contentId, taskId = _a.taskId;
    var repo = editMode ?
        _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"] : // In edit mode, do not optimize cache, as it prohibits collaboration
        _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].optimizeCache();
    var schoolObservable = repo.schools.name(school).single();
    var branchObservable = draftId ? // In edit mode, draftId is defined.
        new kedbackend_observable__WEBPACK_IMPORTED_MODULE_4__["Emitter"](repo.branch(draftId)) :
        schoolObservable.map(function (school) { return repo.branch(school.officialBranchId); });
    var courseObservable = branchObservable.switchMap(function (branch) {
        return branch.courseInstances.include("blocks", "tabs").id(courseId);
    });
    var intermediateObservableUnsorted = courseObservable.combineLatest(schoolObservable)
        .switchMap(function (_a) {
        var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](_a, 2), course = _b[0], schoolEntity = _b[1];
        var branch = draftId ?
            repo.branch(draftId) :
            repo.branch(schoolEntity.officialBranchId);
        if (course.type === 'theme-course') {
            return new kedbackend_observable__WEBPACK_IMPORTED_MODULE_4__["Emitter"]({ course: course, tabs: course.tabs, branch: branch, block: null, schoolEntity: schoolEntity });
        }
        if (activeTab && activeTab !== '$')
            return branch.courseBlocks.hasEdgesTo([activeTab]).include("tabs").toValue()
                .map(function (_a) {
                var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](_a, 1), block = _b[0];
                return ({
                    course: course,
                    tabs: block.tabs,
                    branch: branch,
                    block: block || course.blocks[0],
                    schoolEntity: schoolEntity
                });
            });
        if (course.blocks.length > 0)
            return branch.courseBlocks.include("tabs").id(course.blocks[0].id)
                .map(function (block) { return ({
                course: course,
                tabs: block.tabs,
                branch: branch,
                block: block,
                schoolEntity: schoolEntity
            }); });
        return new kedbackend_observable__WEBPACK_IMPORTED_MODULE_4__["Emitter"]({ course: course, tabs: [], branch: branch, block: null, schoolEntity: schoolEntity });
    });
    var intermediateObservable = intermediateObservableUnsorted.map(function (vals) { return (tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, vals, { tabs: vals.tabs && vals.tabs.sort(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["compareProps"])(["stepNo", "order"])) })); });
    var bannerPropsObservable = intermediateObservable
        .map(function (_a) {
        var course = _a.course, tabs = _a.tabs, branch = _a.branch, block = _a.block, schoolEntity = _a.schoolEntity;
        return getCourseBannerProps(tabs, editMode, school, schoolEntity, draftId, course, branch, activeTab, block);
    });
    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_common_banner__WEBPACK_IMPORTED_MODULE_3__["LazyBanner"], { lazyProps: bannerPropsObservable }),
        taskId ? editMode ?
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_16__["LazyContent"], null, intermediateObservable.map(function (_a) {
                var branch = _a.branch, block = _a.block, course = _a.course, tabs = _a.tabs;
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_task_task_editor__WEBPACK_IMPORTED_MODULE_11__["TaskEditor"], { school: school, course: course, draftId: draftId, branch: branch, activeTab: activeTab, contentId: contentId, taskId: taskId, blockId: block && block.id });
            })) :
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_task_viewer_task_viewer_page__WEBPACK_IMPORTED_MODULE_14__["TaskViewerPage"], { school: school, courseId: courseId, lazyRepo: branchObservable, activeTab: activeTab, taskId: taskId, contentId: contentId, draftId: draftId }) :
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_16__["LazyContent"], null, intermediateObservable.map(function (_a) {
                var branch = _a.branch, block = _a.block, course = _a.course, tabs = _a.tabs;
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_area__WEBPACK_IMPORTED_MODULE_10__["CourseArea"], { school: school, courseId: courseId, draftId: draftId, course: course, branch: branch, tabs: tabs, activeTab: activeTab, editMode: editMode, block: block });
            })));
}));
function getCourseBannerProps(tabs, editMode, school, schoolEntity, draftId, course, branch, activeTab, block) {
    var _this = this;
    var kedStaff = Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_15__["isKedStaff"])();
    var courseId = course.id;
    var activeTabObj = tabs.filter(function (tab) { return tab.id === activeTab; })[0] || tabs[0];
    if (course.type === 'step-course' && activeTabObj && activeTabObj.type === 'step-course-tab') {
        tabs = tabs.filter(function (tab) { return tab.type === 'step-course-tab' && tab.stepNo === activeTabObj.stepNo; });
    }
    var bannerTabs = (Object(_logic_is_employee__WEBPACK_IMPORTED_MODULE_13__["isEmployee"])() ? tabs : tabs.filter(function (tab) { return tab.tabClass !== 'teacher-tab'; }))
        .map(function (tab) { return ({
        key: tab.id,
        name: tab.tabTitle,
        draggable: true,
        link: editMode ?
            "/" + school + "/courses/" + courseId + "/tabs/" + tab.id + (draftId ? "/drafts/" + draftId : '') + "/edit" :
            "/" + school + "/courses/" + courseId + "/tabs/" + tab.id + (draftId ? "/drafts/" + draftId : '')
    }); });
    var buttons = [];
    if (editMode && (kedStaff || course.allowAddTabs)) {
        if (course.type === 'theme-course') {
            buttons.push(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_tab_button__WEBPACK_IMPORTED_MODULE_8__["AddTabButton"], { type: "theme-course-tab", key: "$addTab", school: school, course: course, branch: branch, draftId: draftId }));
        }
        else {
            var stepNo = activeTabObj ?
                activeTabObj.stepNo :
                block.stepNumbers[0] || 1;
            buttons.push(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_tab_button__WEBPACK_IMPORTED_MODULE_8__["AddTabButton"], { type: "step-course-tab", key: "$addTab", school: school, course: course, branch: branch, draftId: draftId, block: block, stepNo: stepNo }));
        }
    }
    if (kedStaff) {
        // Remove the "role" attribute from query, as we want to stop impersonating an Employee when using the admin interface
        buttons.push(react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: Object(_access_control__WEBPACK_IMPORTED_MODULE_7__["preserveImpersonationQuery"])(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_6__["default"].KED_SUBJECT_PLANNER_ADMIN_URL, { role: undefined }) +
                ("#/admin/courses/" + courseId + "/settings"), key: "$settings", title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Inst\u00E4llningar"], ["Inst\u00E4llningar"]))) },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-cog", "aria-hidden": true }),
            "\u00A0"));
    }
    var bannerProps = {
        title: course.name,
        backgroundImage: null,
        tabs: bannerTabs,
        cornerBox: react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_clickable_school_div__WEBPACK_IMPORTED_MODULE_12__["ClickableSchoolDiv"], { school: school, draftId: draftId, displayName: schoolEntity.displayName || school }),
        buttons: buttons,
        activeTab: activeTab || (bannerTabs[0] && bannerTabs[0].key),
        blocks: course.blocks && course.blocks.sort(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["compareProp"])("blockNo")).map(function (_a) {
            var blockId = _a.id, name = _a.name, stepNumbers = _a.stepNumbers;
            return ({
                id: blockId,
                name: name,
                steps: stepNumbers.map(function (stepNo) { return ({
                    isActive: activeTabObj && stepNo === activeTabObj.stepNo,
                    stepNo: stepNo,
                    link: "/" + school + "/courses/" + courseId + "/blocks/" + blockId + "/steps/" + stepNo
                }); })
            });
        }),
        sortableTabs: editMode && (kedStaff || course.allowReorderTabs),
        onTabDrop: function (source, target, placement) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
            var newOrder, sourceTab;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                newOrder = Object(_logic_change_sort_order__WEBPACK_IMPORTED_MODULE_17__["reorder"])(tabs, source, target, placement);
                if (newOrder) {
                    sourceTab = tabs.find(function (t) { return t.id === source; });
                    if (sourceTab) {
                        branch.courseTabs.update(sourceTab, { order: newOrder });
                    }
                }
                return [2 /*return*/];
            });
        }); }
    };
    return bannerProps;
}
var templateObject_1;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/editor-footer-buttons.tsx":
/*!**********************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/editor-footer-buttons.tsx ***!
  \**********************************************************************************/
/*! exports provided: EditorFooterButtons */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditorFooterButtons", function() { return EditorFooterButtons; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var react_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router */ "./node_modules/react-router/es/index.js");
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _logic_publish_course__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../logic/publish-course */ "./src/components/course-builder-ks/logic/publish-course.ts");
/* harmony import */ var _utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../utility-components/horizontal-item */ "./src/components/utility-components/horizontal-item.tsx");
/* harmony import */ var _utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../utility-components/align-horizontal */ "./src/components/utility-components/align-horizontal.tsx");
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");
var _this = undefined;









var EditorFooterButtons = Object(react_router__WEBPACK_IMPORTED_MODULE_3__["withRouter"])(function (_a) {
    var school = _a.school, course = _a.course, tab = _a.tab, activeTab = _a.activeTab, draftId = _a.draftId, history = _a.history, courseType = _a.courseType, blockId = _a.blockId;
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
        tab && (Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_8__["isKedStaff"])() || !tab.locked || course.allowRemoveTabs) ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "btn btn-warning pull-right", onClick: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                var draftRepo, courseTab, contents;
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            draftRepo = _globals_db__WEBPACK_IMPORTED_MODULE_4__["db"].branch(draftId);
                            return [4 /*yield*/, draftRepo.courseTabs
                                    .include("contents")
                                    .includeIdsOnly()
                                    .id(activeTab)
                                    .load()];
                        case 1:
                            courseTab = _a.sent();
                            return [4 /*yield*/, draftRepo.courseContents
                                    .include("tasks")
                                    .includeIdsOnly()
                                    .ids(courseTab.contents.map(function (_a) {
                                    var id = _a.id;
                                    return id;
                                }))
                                    .toValue().load()];
                        case 2:
                            contents = _a.sent();
                            if (Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_8__["isKedStaff"])() && school === 'standard') {
                                //
                                // Only remove related contents and tasks if we are deleting a physical tab here
                                //
                                contents.forEach(function (content) {
                                    content.tasks.forEach(function (task) {
                                        draftRepo.courseContents.removeRelated(content.id, "tasks", task);
                                    });
                                });
                                courseTab.contents.forEach(function (content) {
                                    draftRepo.courseTabs.removeRelated(courseTab.id, "contents", content);
                                });
                            }
                            if (courseType === 'theme-course') {
                                draftRepo.courseInstances.removeRelated(course.id, "tabs", courseTab);
                            }
                            else if (blockId) {
                                draftRepo.courseBlocks.removeRelated(blockId, "tabs", courseTab);
                            }
                            return [4 /*yield*/, _globals_db__WEBPACK_IMPORTED_MODULE_4__["db"].saveNow()];
                        case 3:
                            _a.sent();
                            history.push("/" + school + "/courses/" + course.id + "/tabs/$/drafts/" + draftId + "/edit");
                            return [2 /*return*/];
                    }
                });
            }); } },
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-trash", "aria-hidden": true }),
            "\u00A0", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ta bort fliken"], ["Ta bort fliken"])))) : null,
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_7__["AlignHorizontal"], null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_6__["HorizontalItem"], null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button", { className: "btn", onClick: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                                history.push("/" + school + "/courses/" + course.id + "/tabs/" + (activeTab || '$') + "/drafts/" + draftId);
                                return [2 /*return*/];
                            });
                        }); } },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-eye", "aria-hidden": true }),
                        "\u00A0", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["F\u00F6rhandsgranska"], ["F\u00F6rhandsgranska"]))))),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_6__["HorizontalItem"], null,
                    "\u00A0",
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button", { className: "btn", onClick: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                                history.push("/" + school + "/courses/" + course.id + "/history");
                                return [2 /*return*/];
                            });
                        }); } },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-history", "aria-hidden": true }),
                        "\u00A0", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Versionshistorik"], ["Versionshistorik"]))))),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_6__["HorizontalItem"], null,
                    "\u00A0",
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button", { className: "btn btn-warning", onClick: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                                switch (_a.label) {
                                    case 0: return [4 /*yield*/, Object(_logic_publish_course__WEBPACK_IMPORTED_MODULE_5__["publishCourse"])({
                                            school: school,
                                            course: course,
                                            draftRepo: _globals_db__WEBPACK_IMPORTED_MODULE_4__["db"].branch(draftId)
                                        })];
                                    case 1:
                                        _a.sent();
                                        return [4 /*yield*/, _globals_db__WEBPACK_IMPORTED_MODULE_4__["db"].saveNow()];
                                    case 2:
                                        _a.sent();
                                        history.push("/" + school + "/courses/" + course.id + "/tabs/" + (activeTab || '$'));
                                        return [2 /*return*/];
                                }
                            });
                        }); } },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-play", "aria-hidden": true }),
                        "\u00A0", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Publicera"], ["Publicera"]))))))),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button", { className: "btn", onClick: function () {
                return history.push("/" + school + "/courses/" + course.id + "/tabs/" + (activeTab || '$'));
            } },
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-arrow-left", "aria-hidden": true }),
            "\u00A0", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Avsluta redigering"], ["Avsluta redigering"])))));
});
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/index.tsx":
/*!******************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/index.tsx ***!
  \******************************************************************/
/*! exports provided: SubjectPlannerViewerApp */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SubjectPlannerViewerApp", function() { return SubjectPlannerViewerApp; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/es/index.js");
/* harmony import */ var _utils_error_success_feedback__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/error-success-feedback */ "./src/utils/error-success-feedback.tsx");
/* harmony import */ var _common_banner__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/banner */ "./src/components/course-builder-ks/common/banner.tsx");
/* harmony import */ var _utility_components_loading_indicator__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utility-components/loading-indicator */ "./src/components/utility-components/loading-indicator.tsx");
/* harmony import */ var _utility_components_live_query_view__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../utility-components/live-query-view */ "./src/components/utility-components/live-query-view.tsx");
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _course_viewer_page__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./course-viewer-page */ "./src/components/course-builder-ks/viewer-editor/course-viewer-page.tsx");
/* harmony import */ var _common_two_columns_page__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../common/two-columns-page */ "./src/components/course-builder-ks/common/two-columns-page.tsx");
/* harmony import */ var _weekplanner_weekplanner__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../weekplanner/weekplanner */ "./src/components/weekplanner/weekplanner.tsx");
/* harmony import */ var _list_courses__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./list-courses */ "./src/components/course-builder-ks/viewer-editor/list-courses/index.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var _redirect_to_step__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./redirect-to-step */ "./src/components/course-builder-ks/viewer-editor/redirect-to-step.tsx");
/* harmony import */ var _version_history__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./version-history */ "./src/components/course-builder-ks/viewer-editor/version-history/index.tsx");
/* harmony import */ var _utils_keep_session_alive__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../utils/keep-session-alive */ "./src/utils/keep-session-alive.ts");
/* harmony import */ var _common_dialog_content__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../common/dialog-content */ "./src/components/course-builder-ks/common/dialog-content.tsx");



















// Keep Session Alive
Object(_utils_keep_session_alive__WEBPACK_IMPORTED_MODULE_17__["keepSessionAlive"])();
var GetMySchool = Object(_utility_components_live_query_view__WEBPACK_IMPORTED_MODULE_6__["liveQueryView"])(function (_a) {
    var render = _a.render;
    return _globals_db__WEBPACK_IMPORTED_MODULE_7__["Schools"].mySchool.map(function (school) { return render(school); });
});
var SubjectPlannerViewerApp = Object(_common_dialog_content__WEBPACK_IMPORTED_MODULE_18__["setupDialogs"])(function () { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { onKeyDown: function (ev) {
        if (ev.which === 83 && (ev.ctrlKey || ev.metaKey)) { // CTRL-S
            ev.preventDefault();
            _globals_db__WEBPACK_IMPORTED_MODULE_7__["db"].saveNow().then(function () {
                /*// When saved, exit edit mode so that one can view the result as users see it.
                if (location.hash.endsWith('/edit')) {
                  location.hash = location.hash.substr(0, location.hash.length - '/edit'.length);
                }*/
            });
        }
    } },
    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["HashRouter"], null,
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], { path: "/", exact: true, render: function () { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Redirect"], { to: "/courses" }); } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], { path: "/courses", exact: true, render: function () { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_common_banner__WEBPACK_IMPORTED_MODULE_4__["Banner"], { title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_12__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Kurser"], ["Kurser"]))), tabs: [], activeTab: "$" }),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_common_two_columns_page__WEBPACK_IMPORTED_MODULE_9__["TwoColumnsPage"], { left: react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_list_courses__WEBPACK_IMPORTED_MODULE_11__["ListCourses"], { showInactive: true }), right: react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_weekplanner_weekplanner__WEBPACK_IMPORTED_MODULE_10__["WeekPlanner"], { env: _globals_KED_env__WEBPACK_IMPORTED_MODULE_13__["default"], viewCourseUrl: _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_14__["default"].KED_COURSE_VIEWER_URL }), rightWidth: 5 })); } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], { path: "/courses/:courseId", exact: false, render: function (_a) {
                    var match = _a.match;
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](GetMySchool, { render: function (school) {
                            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Redirect"], { to: "/" + school.name + "/courses/" + match.params.courseId });
                        } });
                } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], { exact: true, path: "/:school/courses/:courseId", render: function (_a) {
                    var match = _a.match;
                    var _b = match.params, school = _b.school, courseId = _b.courseId;
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_viewer_page__WEBPACK_IMPORTED_MODULE_8__["CourseViewerPage"], { school: school, courseId: courseId });
                } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], { exact: true, path: "/:school/courses/:courseId/tabs/:tabId?", render: function (_a) {
                    var match = _a.match;
                    var _b = match.params, school = _b.school, courseId = _b.courseId, tabId = _b.tabId;
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_viewer_page__WEBPACK_IMPORTED_MODULE_8__["CourseViewerPage"], { school: school, courseId: courseId, activeTab: tabId });
                } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], { exact: true, path: "/:school/courses/:courseId/settings/:draftId", render: function (_a) {
                    var match = _a.match;
                    var _b = match.params, school = _b.school, courseId = _b.courseId, draftId = _b.draftId;
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_viewer_page__WEBPACK_IMPORTED_MODULE_8__["CourseViewerPage"], { school: school, courseId: courseId, activeTab: "$settings", draftId: draftId });
                } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], { exact: true, path: "/:school/courses/:courseId/tabs/:tabId/drafts/:draftId", render: function (_a) {
                    var match = _a.match;
                    var _b = match.params, school = _b.school, courseId = _b.courseId, tabId = _b.tabId, draftId = _b.draftId;
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_viewer_page__WEBPACK_IMPORTED_MODULE_8__["CourseViewerPage"], { school: school, courseId: courseId, activeTab: tabId, draftId: draftId });
                } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], { exact: true, path: "/:school/courses/:courseId/tabs/:tabId/drafts/:draftId/edit", render: function (_a) {
                    var match = _a.match;
                    var _b = match.params, school = _b.school, courseId = _b.courseId, tabId = _b.tabId, draftId = _b.draftId;
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_viewer_page__WEBPACK_IMPORTED_MODULE_8__["CourseViewerPage"], { school: school, courseId: courseId, activeTab: tabId, draftId: draftId, editMode: true });
                } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], { exact: true, path: "/:school/courses/:courseId/tabs/:tabId/tasks/:taskId", render: function (_a) {
                    var match = _a.match;
                    var _b = match.params, school = _b.school, courseId = _b.courseId, tabId = _b.tabId, taskId = _b.taskId;
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_viewer_page__WEBPACK_IMPORTED_MODULE_8__["CourseViewerPage"], { school: school, courseId: courseId, activeTab: tabId, taskId: taskId, editMode: false });
                } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], { exact: true, path: "/:school/courses/:courseId/tabs/:tabId/contents/:contentId/tasks/:taskId/drafts/:draftId", render: function (_a) {
                    var match = _a.match;
                    var _b = match.params, school = _b.school, courseId = _b.courseId, tabId = _b.tabId, taskId = _b.taskId, draftId = _b.draftId, contentId = _b.contentId;
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_viewer_page__WEBPACK_IMPORTED_MODULE_8__["CourseViewerPage"], { school: school, courseId: courseId, activeTab: tabId, taskId: taskId, contentId: contentId, draftId: draftId, editMode: false });
                } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], { exact: true, path: "/:school/courses/:courseId/tabs/:tabId/contents/:contentId/tasks/:taskId/drafts/:draftId/edit", render: function (_a) {
                    var match = _a.match;
                    var _b = match.params, school = _b.school, courseId = _b.courseId, tabId = _b.tabId, contentId = _b.contentId, taskId = _b.taskId, draftId = _b.draftId;
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_viewer_page__WEBPACK_IMPORTED_MODULE_8__["CourseViewerPage"], { school: school, courseId: courseId, activeTab: tabId, contentId: contentId, taskId: taskId, draftId: draftId, editMode: true });
                } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], { exact: true, path: "/:school/courses/:courseId/blocks/:blockId/steps/:stepNo", render: function (_a) {
                    var match = _a.match;
                    var _b = match.params, school = _b.school, courseId = _b.courseId, blockId = _b.blockId, stepNo = _b.stepNo;
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_redirect_to_step__WEBPACK_IMPORTED_MODULE_15__["RedirectToStep"], { school: school, courseId: courseId, blockId: blockId, stepNo: stepNo });
                } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], { exact: true, path: "/:school/courses/:courseId/history", render: function (_a) {
                    var match = _a.match;
                    var _b = match.params, school = _b.school, courseId = _b.courseId, blockId = _b.blockId, stepNo = _b.stepNo;
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_version_history__WEBPACK_IMPORTED_MODULE_16__["VersionHistoryPage"], { school: school, courseId: courseId });
                } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utils_error_success_feedback__WEBPACK_IMPORTED_MODULE_3__["ErrorSuccessFeedback"], null),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_loading_indicator__WEBPACK_IMPORTED_MODULE_5__["LoadingIndicator"], null)))); });
var templateObject_1;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/list-courses/index.tsx":
/*!*******************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/list-courses/index.tsx ***!
  \*******************************************************************************/
/*! exports provided: ListCourses */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ListCourses", function() { return ListCourses; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_live_query_view__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utility-components/live-query-view */ "./src/components/utility-components/live-query-view.tsx");
/* harmony import */ var _logic_list_course_instances__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../logic/list-course-instances */ "./src/components/course-builder-ks/logic/list-course-instances.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _student_courses_box__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./student-courses-box */ "./src/components/course-builder-ks/viewer-editor/list-courses/student-courses-box.tsx");






var ListCourses = Object(_utility_components_live_query_view__WEBPACK_IMPORTED_MODULE_2__["liveQueryView"])(function (_a) {
    var showInactive = _a.showInactive;
    return (showInactive ?
        Object(_logic_list_course_instances__WEBPACK_IMPORTED_MODULE_3__["listCourseInstances"])() :
        Object(_logic_list_course_instances__WEBPACK_IMPORTED_MODULE_3__["listCourseInstances"])().tags("active")).orderBy("name")
        .map(function (_a) {
        var id = _a.id, name = _a.name, type = _a.type, description = _a.description, tags = _a.tags;
        return ({
            id: id,
            name: name,
            type: type,
            tags: tags,
            description: description,
            url: "/courses/" + id
        });
    })
        .groupBy("type")
        .map(function (arraysByType) { return ({
        themeCourses: arraysByType["theme-course"],
        stepCourses: arraysByType["step-course"]
    }); })
        .map(function (_a) {
        var themeCourses = _a.themeCourses, stepCourses = _a.stepCourses;
        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
            themeCourses && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_student_courses_box__WEBPACK_IMPORTED_MODULE_5__["StudentCoursesBox"], { title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Temakurser"], ["Temakurser"]))), courses: themeCourses }),
            stepCourses && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_student_courses_box__WEBPACK_IMPORTED_MODULE_5__["StudentCoursesBox"], { title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Stegkurser"], ["Stegkurser"]))), courses: stepCourses }));
    });
});
var templateObject_1, templateObject_2;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/list-courses/student-courses-box.tsx":
/*!*********************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/list-courses/student-courses-box.tsx ***!
  \*********************************************************************************************/
/*! exports provided: StudentCoursesBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StudentCoursesBox", function() { return StudentCoursesBox; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/es/index.js");
/* harmony import */ var _utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utility-components/align-horizontal */ "./src/components/utility-components/align-horizontal.tsx");
/* harmony import */ var _utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utility-components/horizontal-item */ "./src/components/utility-components/horizontal-item.tsx");




var StudentCoursesBox = function (_a) {
    var title = _a.title, courses = _a.courses;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "ked_boxed" },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h3", null, title),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "taskContainer odd-even" }, courses.map(function (_a) {
            var id = _a.id, name = _a.name, description = _a.description, tags = _a.tags;
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_2__["AlignHorizontal"], null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_3__["HorizontalItem"], null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "studentCourse" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_1__["Link"], { to: "/courses/" + id }, name),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p", { className: "small" }, description))),
                tags.includes("active") ? undefined : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_3__["HorizontalItem"], null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "pill incomplete" }, "Inaktiv")));
        })));
};


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/redirect-to-step.tsx":
/*!*****************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/redirect-to-step.tsx ***!
  \*****************************************************************************/
/*! exports provided: RedirectToStep */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RedirectToStep", function() { return RedirectToStep; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utility-components/lazy-content */ "./src/components/utility-components/lazy-content.tsx");
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/es/index.js");





var RedirectToStep = function (_a) {
    var school = _a.school, courseId = _a.courseId, blockId = _a.blockId, stepNo = _a.stepNo;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_1__["LazyContent"], null, _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].optimizeCache().schools.name(school).single()
        .map(function (school) { return _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].branch(school.officialBranchId); })
        .switchMap(function (branchRepo) {
        return branchRepo.courseBlocks.include("tabs").id(blockId)
            .map(function (block) {
            var firstTab = block.tabs.filter(function (tab) { return '' + tab.stepNo === '' + stepNo; }).sort(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["compareProp"])("order"))[0];
            if (firstTab)
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Redirect"], { to: "/" + school + "/courses/" + courseId + "/tabs/" + firstTab.id });
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Redirect"], { to: "/" + school + "/courses/" + courseId });
        });
    }));
};


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/tab-settings-admin.tsx":
/*!*******************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/tab-settings-admin.tsx ***!
  \*******************************************************************************/
/*! exports provided: TabSettingsAdmin */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TabSettingsAdmin", function() { return TabSettingsAdmin; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utility-components/align-horizontal */ "./src/components/utility-components/align-horizontal.tsx");
/* harmony import */ var _utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utility-components/horizontal-item */ "./src/components/utility-components/horizontal-item.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _logic_course_instance_tags__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../logic/course-instance-tags */ "./src/components/course-builder-ks/logic/course-instance-tags.ts");
/* harmony import */ var _tab_settings_requirements__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./tab-settings-requirements */ "./src/components/course-builder-ks/viewer-editor/tab-settings-requirements.tsx");
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");
var _this = undefined;









var TabSettingsAdmin = function (_a) {
    var tab = _a.tab, repo = _a.repo, course = _a.course, block = _a.block;
    var _b = tab.subject ?
        tab.subject :
        course.type === 'theme-course' && course.subjects && course.subjects.length > 0 ?
            { subjectCode: course.subjects[0].code, subjectName: course.subjects[0].name } :
            course.type === 'step-course' ?
                { subjectCode: course.subject.subjectCode, subjectName: course.subject.subjectName } :
                { subjectCode: '', subjectName: '' }, subjectCode = _b.subjectCode, subjectName = _b.subjectName;
    var courseSchoolYears = Object(_logic_course_instance_tags__WEBPACK_IMPORTED_MODULE_5__["getSchoolYears"])(course.tags);
    var schoolYear = Object(_logic_course_instance_tags__WEBPACK_IMPORTED_MODULE_5__["getSchoolYears"])(tab.tags)[0] || courseSchoolYears[0] || null;
    return (
    //
    // Edit "standard" school: Choose tab type
    //
    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "ked_boxed" },
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", { className: "box-mini-label" }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Administrativa Inst\u00E4llningar f\u00F6r fliken ", ""], ["Administrativa Inst\u00E4llningar f\u00F6r fliken ", ""])), tab.name || tab.tabTitle)),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_2__["AlignHorizontal"], null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_3__["HorizontalItem"], null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("input", { type: "checkbox", checked: tab.locked, onChange: function (ev) { return repo.courseTabs.update(tab, { locked: !!ev.target.checked }); } })),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_3__["HorizontalItem"], null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E5s fliken fr\u00E5n redigering f\u00F6rutom d\u00E4r det explicit till\u00E5ts"], ["L\u00E5s fliken fr\u00E5n redigering f\u00F6rutom d\u00E4r det explicit till\u00E5ts"]))))),
        course.type === 'step-course' && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_7__["OpenCloseBox"], { title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Avancerat..."], ["Avancerat..."]))) },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button", { className: "btn", onClick: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                        var schoolYear;
                        return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                            switch (_a.label) {
                                case 0:
                                    schoolYear = Object(_logic_course_instance_tags__WEBPACK_IMPORTED_MODULE_5__["getSchoolYears"])(block.tags)[0];
                                    return [4 /*yield*/, updateSubjectAndSchoolYears(course, course.subject.subjectName, course.subject.subjectCode, schoolYear)];
                                case 1:
                                    _a.sent();
                                    return [2 /*return*/];
                            }
                        });
                    }); } }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["G\u00F6r om kopplingen till \u00E4mne och \u00E5rskursspann"], ["G\u00F6r om kopplingen till \u00E4mne och \u00E5rskursspann"])))))),
        course.type === 'theme-course' && tab.tabClass === 'subject-tab' && !!subjectCode && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null),
            course.subjects.length > 1 && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_2__["AlignHorizontal"], null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_3__["HorizontalItem"], null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("label", { className: "kclabel" }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4mne"], ["\u00C4mne"]))))),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_3__["HorizontalItem"], null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("select", { value: subjectCode, onChange: function (ev) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                            var subjectCode, subjectName;
                            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                                switch (_a.label) {
                                    case 0:
                                        subjectCode = ev.target.value;
                                        subjectName = course.subjects
                                            .filter(function (s) { return s.code === subjectCode; })
                                            .map(function (s) { return s.name; })[0] || subjectCode;
                                        return [4 /*yield*/, updateSubjectAndSchoolYears(course, subjectName, subjectCode, schoolYear)];
                                    case 1:
                                        _a.sent();
                                        return [2 /*return*/];
                                }
                            });
                        }); } }, course.subjects.map(function (_a) {
                        var name = _a.name, code = _a.code;
                        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option", { key: code, value: code }, name);
                    })))),
            courseSchoolYears.length > 1 && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_2__["AlignHorizontal"], null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_3__["HorizontalItem"], null,
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("label", { className: "kclabel" }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_6 || (templateObject_6 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["V\u00E4lj \u00E5rskurs"], ["V\u00E4lj \u00E5rskurs"]))))),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_3__["HorizontalItem"], null,
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("select", { value: schoolYear, onChange: function (ev) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                                var schoolYear, subjectName;
                                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                                    switch (_a.label) {
                                        case 0:
                                            schoolYear = ev.target.value;
                                            subjectName = course.subjects
                                                .filter(function (s) { return s.code === subjectCode; })
                                                .map(function (s) { return s.name; })[0] || subjectCode;
                                            return [4 /*yield*/, updateSubjectAndSchoolYears(course, subjectName, subjectCode, schoolYear)];
                                        case 1:
                                            _a.sent();
                                            return [2 /*return*/];
                                    }
                                });
                            }); } }, courseSchoolYears.map(function (year) { return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option", { key: year, value: year }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_7 || (templateObject_7 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C5rskurs ", ""], ["\u00C5rskurs ", ""])), year)); })))),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_tab_settings_requirements__WEBPACK_IMPORTED_MODULE_6__["TabRequirements"], { repo: repo, tab: tab })),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_7__["OpenCloseBox"], { title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_8 || (templateObject_8 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Avancerat..."], ["Avancerat..."]))) },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button", { className: "btn", onClick: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                                switch (_a.label) {
                                    case 0: return [4 /*yield*/, updateSubjectAndSchoolYears(course, subjectName, subjectCode, schoolYear)];
                                    case 1:
                                        _a.sent();
                                        return [2 /*return*/];
                                }
                            });
                        }); } }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_9 || (templateObject_9 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["G\u00F6r om kopplingen till \u00E4mne och \u00E5rskursspann"], ["G\u00F6r om kopplingen till \u00E4mne och \u00E5rskursspann"])))))))));
    function updateSubjectAndSchoolYears(course, subjectName, subjectCode, schoolYear) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var tabTags, lgContents, tasks, tasks_1, tasks_1_1, task, tags;
            var e_1, _a;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        tabTags = Object(_logic_course_instance_tags__WEBPACK_IMPORTED_MODULE_5__["computeCourseInstanceTags"])(tab.tags, [subjectCode], [schoolYear]);
                        repo.courseTabs.update(tab, {
                            subject: {
                                subjectCode: subjectCode,
                                subjectName: subjectName
                            },
                            tags: tabTags
                        });
                        return [4 /*yield*/, repo.courseContents
                                .hasEdgesFrom([tab.id])
                                .include("tasks")
                                .includeIdsAndNamesOnly()
                                .toValue().load()];
                    case 1:
                        lgContents = _b.sent();
                        tasks = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["flatten"])(lgContents.map(function (c) { return c.tasks; }));
                        try {
                            for (tasks_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](tasks), tasks_1_1 = tasks_1.next(); !tasks_1_1.done; tasks_1_1 = tasks_1.next()) {
                                task = tasks_1_1.value;
                                tags = Object(_logic_course_instance_tags__WEBPACK_IMPORTED_MODULE_5__["computeCourseInstanceTags"])([course.id], [subjectCode], [schoolYear]);
                                repo.tasks.update(task, { tags: tags, subject: subjectName });
                            }
                        }
                        catch (e_1_1) { e_1 = { error: e_1_1 }; }
                        finally {
                            try {
                                if (tasks_1_1 && !tasks_1_1.done && (_a = tasks_1.return)) _a.call(tasks_1);
                            }
                            finally { if (e_1) throw e_1.error; }
                        }
                        return [2 /*return*/];
                }
            });
        });
    }
};
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8, templateObject_9;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/tab-settings-requirements.tsx":
/*!**************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/tab-settings-requirements.tsx ***!
  \**************************************************************************************/
/*! exports provided: TabRequirements */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TabRequirements", function() { return TabRequirements; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _course_builder_sub_components_knowledge_matrix__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../course-builder/sub-components/knowledge-matrix */ "./src/components/course-builder/sub-components/knowledge-matrix.tsx");
/* harmony import */ var _utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utility-components/lazy-content */ "./src/components/utility-components/lazy-content.tsx");
/* harmony import */ var _logic_get_course_codes_from_tags__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../logic/get-course-codes-from-tags */ "./src/components/course-builder-ks/logic/get-course-codes-from-tags.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _logic_get_standard_courses_with_ordered_requirements__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../logic/get-standard-courses-with-ordered-requirements */ "./src/components/course-builder-ks/logic/get-standard-courses-with-ordered-requirements.ts");
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");
/* harmony import */ var _course_builder_sub_components_select_related_docs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../course-builder/sub-components/select-related-docs */ "./src/components/course-builder/sub-components/select-related-docs.tsx");









var TabRequirements = function (_a) {
    var repo = _a.repo, tab = _a.tab;
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_3__["LazyContent"], null, Object(_logic_get_standard_courses_with_ordered_requirements__WEBPACK_IMPORTED_MODULE_6__["getStandardCoursesWithOrderedRequirements"])(Object(_logic_get_course_codes_from_tags__WEBPACK_IMPORTED_MODULE_4__["getCourseCodesFromTags"])(tab.tags))
        .map(function (courseTemplates) { return courseTemplates.length === 0 ?
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Fliken \u00E4r inte kopplad till n\u00E5got \u00E4mne / \u00E5rskurs"], ["Fliken \u00E4r inte kopplad till n\u00E5got \u00E4mne / \u00E5rskurs"]))))
        :
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, courseTemplates.map(function (_a) {
                var id = _a.id, name = _a.name, abilities = _a.abilities, centralContent = _a.centralContent, knowledgeRequirements = _a.knowledgeRequirements;
                return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { key: id },
                    courseTemplates.length === 1 ? undefined : react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h1", null, name),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_7__["OpenCloseBox"], { className: "larger", title: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E5s flikens kunskapskrav"], ["L\u00E5s flikens kunskapskrav"])))) },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Markera de kunskapskrav som \u00E4mnesfliken ska t\u00E4cka."], ["Markera de kunskapskrav som \u00E4mnesfliken ska t\u00E4cka."])))),
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_3__["LazyContent"], null, repo["knowledge-requirements"].hasEdgesFrom([tab.id]).idsOnly().toValue().map(function (tabsKrs) {
                            return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_sub_components_knowledge_matrix__WEBPACK_IMPORTED_MODULE_2__["KnowledgeMatrix"], { knowledgeRequirements: knowledgeRequirements, markedIds: tabsKrs.map(function (_a) {
                                    var id = _a.id;
                                    return id;
                                }), idsToMarkNotOk: {}, markMode: true, onMarkChanged: function (markedId, isMarked) {
                                    // Remove invalid knowledge requirements (those that are not part of the standard course)
                                    // Can happen after changing school year / course or subject.
                                    var invalidKrs = tabsKrs.filter(function (kr) { return !knowledgeRequirements.some(function (_a) {
                                        var id = _a.id;
                                        return kr.id === id;
                                    }); });
                                    invalidKrs.forEach(function (invalidKr) {
                                        repo.courseTabs.removeRelated(tab.id, "knowledgeRequirements", invalidKr);
                                    });
                                    var markedDoc = knowledgeRequirements.filter(function (_a) {
                                        var id = _a.id;
                                        return id === markedId;
                                    })[0];
                                    if (isMarked) {
                                        repo.courseTabs.addRelated(tab.id, "knowledgeRequirements", markedDoc);
                                    }
                                    else {
                                        repo.courseTabs.removeRelated(tab.id, "knowledgeRequirements", markedDoc);
                                    }
                                } });
                        }))),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_3__["LazyContent"], null, repo.abilities.hasEdgesFrom([tab.id]).idsOnly().toValue().map(function (tabAbilities) {
                        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_sub_components_select_related_docs__WEBPACK_IMPORTED_MODULE_8__["SelectRelatedDocs"], { options: abilities, title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E5s flikens f\u00F6rm\u00E5gor"], ["L\u00E5s flikens f\u00F6rm\u00E5gor"]))), markedIds: tabAbilities.map(function (_a) {
                                var id = _a.id;
                                return id;
                            }), markMode: true, 
                            //migratedIds={task && task.migratedTexts && task.migratedTexts.abilities}
                            onMarkChanged: function (markedId, isMarked) {
                                // Remove invalid abilities (those that are not part of the standard course)
                                // Can happen after changing school year / course or subject.
                                var invalidAbilities = tabAbilities.filter(function (a) { return !abilities.some(function (_a) {
                                    var id = _a.id;
                                    return a.id === id;
                                }); });
                                invalidAbilities.forEach(function (invalidAbility) {
                                    repo.courseTabs.removeRelated(tab.id, "abilities", invalidAbility);
                                });
                                var markedDoc = abilities.filter(function (_a) {
                                    var id = _a.id;
                                    return id === markedId;
                                })[0];
                                if (isMarked) {
                                    repo.courseTabs.addRelated(tab.id, "abilities", markedDoc);
                                }
                                else {
                                    repo.courseTabs.removeRelated(tab.id, "abilities", markedDoc);
                                }
                            } });
                    })),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_3__["LazyContent"], null, repo["central-content"].hasEdgesFrom([tab.id]).idsOnly().toValue().map(function (tabsCCs) {
                        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_sub_components_select_related_docs__WEBPACK_IMPORTED_MODULE_8__["SelectRelatedDocs"], { options: centralContent, title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E5s flikens centrala inneh\u00E5ll"], ["L\u00E5s flikens centrala inneh\u00E5ll"]))), markedIds: tabsCCs.map(function (cc) { return cc.id; }), markMode: true, 
                            //migratedIds={task && task.migratedTexts && task.migratedTexts.centralContent}
                            onMarkChanged: function (markedId, isMarked) {
                                // Remove invalid central contents (those that are not part of the standard course)
                                // Can happen after changing school year / course or subject.
                                var invalidCentralContents = tabsCCs.filter(function (cc) { return !centralContent.some(function (_a) {
                                    var id = _a.id;
                                    return cc.id === id;
                                }); });
                                invalidCentralContents.forEach(function (invalidCC) {
                                    repo.courseTabs.removeRelated(tab.id, "centralContent", invalidCC);
                                });
                                var markedDoc = centralContent.filter(function (_a) {
                                    var id = _a.id;
                                    return id === markedId;
                                })[0];
                                if (isMarked) {
                                    repo.courseTabs.addRelated(tab.id, "centralContent", markedDoc);
                                }
                                else {
                                    repo.courseTabs.removeRelated(tab.id, "centralContent", markedDoc);
                                }
                            } });
                    })));
            })); }));
};
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/tab-settings.tsx":
/*!*************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/tab-settings.tsx ***!
  \*************************************************************************/
/*! exports provided: TabSettings */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TabSettings", function() { return TabSettings; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utility-components/align-horizontal */ "./src/components/utility-components/align-horizontal.tsx");
/* harmony import */ var _utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utility-components/horizontal-item */ "./src/components/utility-components/horizontal-item.tsx");
/* harmony import */ var _course_tab_tab_classes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./course-tab/tab-classes */ "./src/components/course-builder-ks/viewer-editor/course-tab/tab-classes.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _logic_course_instance_tags__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../logic/course-instance-tags */ "./src/components/course-builder-ks/logic/course-instance-tags.ts");
/* harmony import */ var _utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../utility-components/form-field-text-input */ "./src/components/utility-components/form-field-text-input.tsx");








var TabSettings = function (_a) {
    var tab = _a.tab, repo = _a.repo, course = _a.course;
    var _b = tab.subject ?
        tab.subject :
        course.type === 'theme-course' && course.subjects && course.subjects.length > 0 ?
            { subjectCode: course.subjects[0].code, subjectName: course.subjects[0].name } :
            { subjectCode: '', subjectName: '' }, subjectCode = _b.subjectCode, subjectName = _b.subjectName;
    var courseSchoolYears = Object(_logic_course_instance_tags__WEBPACK_IMPORTED_MODULE_6__["getSchoolYears"])(course.tags);
    var schoolYear = Object(_logic_course_instance_tags__WEBPACK_IMPORTED_MODULE_6__["getSchoolYears"])(tab.tags)[0] || courseSchoolYears[0] || null;
    return (
    //
    // Edit "standard" school: Choose tab type
    //
    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "ked_boxed" },
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", { className: "box-mini-label" }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Inst\u00E4llningar f\u00F6r fliken ", ""], ["Inst\u00E4llningar f\u00F6r fliken ", ""])), tab.name || tab.tabTitle)),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_2__["AlignHorizontal"], null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_3__["HorizontalItem"], null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("label", { className: "kclabel" }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Flikens typ"], ["Flikens typ"]))))),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_3__["HorizontalItem"], null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("select", { value: tab.tabClass, onChange: function (ev) {
                        return repo.courseTabs.update(tab, ev.target.value === 'subject-tab' ? {
                            tabClass: ev.target.value,
                            subject: { subjectCode: subjectCode, subjectName: subjectName },
                            tags: Object(_logic_course_instance_tags__WEBPACK_IMPORTED_MODULE_6__["computeCourseInstanceTags"])(tab.tags, [subjectCode], [schoolYear])
                        } : {
                            tabClass: ev.target.value,
                        });
                    } }, _course_tab_tab_classes__WEBPACK_IMPORTED_MODULE_4__["TabTypesPerCourseType"][course.type].map(function (tabClass) {
                    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option", { key: tabClass, value: tabClass }, _course_tab_tab_classes__WEBPACK_IMPORTED_MODULE_4__["CourseTabClasses"][tabClass]);
                })))),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_7__["TextInput"], { label: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Flikens namn"], ["Flikens namn"]))), id: "TabSettings:name", value: tab.name || tab.tabTitle, onChange: function (name) {
                return repo.courseTabs.update(tab, {
                    name: name,
                    tabTitle: name // Deprecated. Todo: remove.
                });
            } })));
};
var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/task/left-column/edit-requirements.tsx":
/*!***********************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/task/left-column/edit-requirements.tsx ***!
  \***********************************************************************************************/
/*! exports provided: EditRequirements, EditRequirementsInner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditRequirements", function() { return EditRequirements; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditRequirementsInner", function() { return EditRequirementsInner; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _course_builder_sub_components_knowledge_matrix__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../course-builder/sub-components/knowledge-matrix */ "./src/components/course-builder/sub-components/knowledge-matrix.tsx");
/* harmony import */ var _utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../utility-components/lazy-content */ "./src/components/utility-components/lazy-content.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _logic_ordered_requirements__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../logic/ordered-requirements */ "./src/components/course-builder-ks/logic/ordered-requirements.ts");
/* harmony import */ var _course_builder_sub_components_select_related_docs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../course-builder/sub-components/select-related-docs */ "./src/components/course-builder/sub-components/select-related-docs.tsx");
/* harmony import */ var _utility_components_checklist__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../utility-components/checklist */ "./src/components/utility-components/checklist.tsx");
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");
/* harmony import */ var _contracts_ked_models__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../contracts/ked-models */ "./src/contracts/ked-models.ts");










var EditRequirements = function (_a) {
    var repo = _a.repo, task = _a.task, tabIds = _a.tabIds, uncoveredIds = _a.uncoveredIds, blockId = _a.blockId;
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_3__["LazyContent"], null, blockId ?
        repo.courseBlocks
            .include("abilities", "centralContent", "knowledgeRequirements")
            .id(blockId)
            .map(function (block) { return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(EditRequirementsInner, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, { repo: repo, task: task, uncoveredIds: uncoveredIds, tabOrBlock: block }))); }) :
        repo.courseTabs
            .include("abilities", "centralContent", "knowledgeRequirements")
            .ids(tabIds)
            .toValue().map(function (tabs) { return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, tabs.length === 1 ?
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(EditRequirementsInner, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, { repo: repo, task: task, uncoveredIds: uncoveredIds, tabOrBlock: tabs[0] })) :
            tabs.map(function (tab) { return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_8__["OpenCloseBox"], { key: tab.id, title: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h4", null,
                    tab.name || tab.tabTitle,
                    tab.subject && tab.subject.subjectName && tab.subject.subjectName !== (tab.name || tab.tabTitle) ?
                        " (" + tab.subject.subjectName + ")" : '') },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(EditRequirementsInner, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, { repo: repo, task: task, uncoveredIds: uncoveredIds, tabOrBlock: tab, hasMultipleSubjects: true }))); })); }));
};
var EditRequirementsInner = function (_a) {
    var tabOrBlock = _a.tabOrBlock, repo = _a.repo, task = _a.task, uncoveredIds = _a.uncoveredIds, hasMultipleSubjects = _a.hasMultipleSubjects;
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_3__["LazyContent"], null, Object(_logic_ordered_requirements__WEBPACK_IMPORTED_MODULE_5__["resolveRequirementOrder"])(tabOrBlock).map(function (tab) {
        var subjectName = 'type' in tab && tab.subject && tab.subject.subjectName;
        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
            task.taskType !== 'exercise' && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "ked_boxed" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h3", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["V\u00E4lj kunskapskrav"], ["V\u00E4lj kunskapskrav"])))),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Markera de kunskapskrav som din uppgift t\u00E4cker."], ["Markera de kunskapskrav som din uppgift t\u00E4cker."])))),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_sub_components_knowledge_matrix__WEBPACK_IMPORTED_MODULE_2__["KnowledgeMatrix"], { knowledgeRequirements: tab.knowledgeRequirements, markedIds: task.knowledgeRequirements.map(function (_a) {
                        var id = _a.id;
                        return id;
                    }), explainedRequirements: task.explainedRequirements || {}, idsToMarkNotOk: uncoveredIds, markMode: true, migratedIds: task && task.migratedTexts && task.migratedTexts.knowledgeRequirements, onExplainedRequirementsChanged: function (requirementId, text) {
                        var _a;
                        return repo.tasks.update(task, {
                            explainedRequirements: tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, task.explainedRequirements, (_a = {}, _a[requirementId] = text, _a))
                        });
                    }, onMarkChanged: function (markedId, isMarked) {
                        var _a, _b;
                        var markedDoc = tab.knowledgeRequirements.filter(function (_a) {
                            var id = _a.id;
                            return id === markedId;
                        })[0];
                        if (isMarked) {
                            if (hasMultipleSubjects) {
                                // Mission tabs needs to store the subject name connected to each knowledge requirement:
                                repo.tasks.update(task, { idsToSubjectMap: tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, task.idsToSubjectMap, (_a = {}, _a[markedId] = subjectName, _a)) });
                            }
                            else {
                                repo.tasks.update(task, { idsToSubjectMap: undefined });
                            }
                            repo.tasks.addRelated(task.id, "knowledgeRequirements", markedDoc);
                        }
                        else {
                            if (hasMultipleSubjects) {
                                // Mission tabs needs to delete the subject name connected to each knowledge requirement:
                                repo.tasks.update(task, { idsToSubjectMap: tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, task.idsToSubjectMap, (_b = {}, _b[markedId] = undefined, _b)) });
                            }
                            else {
                                repo.tasks.update(task, { idsToSubjectMap: undefined });
                            }
                            repo.tasks.removeRelated(task.id, "knowledgeRequirements", markedDoc);
                        }
                    } })),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "sv-html-portlet sv-portlet" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_sub_components_select_related_docs__WEBPACK_IMPORTED_MODULE_6__["SelectRelatedDocs"], { title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["V\u00E4lj f\u00F6rm\u00E5gor"], ["V\u00E4lj f\u00F6rm\u00E5gor"]))), options: tab.abilities, markedIds: task.abilities.map(function (a) { return a.id; }), markMode: true, migratedIds: task && task.migratedTexts && task.migratedTexts.abilities, onMarkChanged: function (markedId, isMarked) {
                        var markedDoc = tab.abilities.filter(function (a) { return a.id === markedId; })[0];
                        if (isMarked) {
                            repo.tasks.addRelated(task.id, "abilities", markedDoc);
                        }
                        else {
                            repo.tasks.removeRelated(task.id, "abilities", markedDoc);
                        }
                    } })),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "sv-html-portlet sv-portlet" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_sub_components_select_related_docs__WEBPACK_IMPORTED_MODULE_6__["SelectRelatedDocs"], { title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["V\u00E4lj centralt inneh\u00E5ll"], ["V\u00E4lj centralt inneh\u00E5ll"]))), options: tab.centralContent, markedIds: task.centralContent.map(function (cc) { return cc.id; }), markMode: true, migratedIds: task && task.migratedTexts && task.migratedTexts.centralContent, onMarkChanged: function (markedId, isMarked) {
                        var markedDoc = tab.centralContent.filter(function (a) { return a.id === markedId; })[0];
                        if (isMarked) {
                            repo.tasks.addRelated(task.id, "centralContent", markedDoc);
                        }
                        else {
                            repo.tasks.removeRelated(task.id, "centralContent", markedDoc);
                        }
                    } })),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "sv-html-portlet sv-portlet" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_8__["OpenCloseBox"], { className: "larger", title: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["V\u00E4lj framtidsf\u00F6rm\u00E5gor"], ["V\u00E4lj framtidsf\u00F6rm\u00E5gor"])))) },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_checklist__WEBPACK_IMPORTED_MODULE_7__["Checklist"], { available: _contracts_ked_models__WEBPACK_IMPORTED_MODULE_9__["futureAbilities"].map(function (fa) { return ({ name: fa, key: fa }); }), selected: task.futureAbilities, onChange: function (selectedFas) { return repo.tasks.update(task, { futureAbilities: selectedFas }); } }))));
    }));
};
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/task/right-column/basic-editable-task-fields.tsx":
/*!*********************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/task/right-column/basic-editable-task-fields.tsx ***!
  \*********************************************************************************************************/
/*! exports provided: BasicEditableTaskFields */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BasicEditableTaskFields", function() { return BasicEditableTaskFields; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _course_builder_modal_pages_edit_task_task_migration_box__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../course-builder/modal-pages/edit-task/task-migration-box */ "./src/components/course-builder/modal-pages/edit-task/task-migration-box.tsx");
/* harmony import */ var react_datepicker__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-datepicker */ "./node_modules/react-datepicker/es/index.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _utility_components_checklist__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../utility-components/checklist */ "./src/components/utility-components/checklist.tsx");
/* harmony import */ var _utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../utility-components/lazy-content */ "./src/components/utility-components/lazy-content.tsx");
/* harmony import */ var _common_field_limits__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../common/field-limits */ "./src/components/course-builder-ks/common/field-limits.ts");









var BasicEditableTaskFields = function (_a) {
    var task = _a.task, writeAccess = _a.writeAccess, repo = _a.repo, contentId = _a.contentId, tab = _a.tab;
    var tabClass = tab ? tab.tabClass : null; // tab is undefined on step courses. But there are no mission tabs on step courses.
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "align-horizontal spaced" },
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, tabClass === 'mission-tab' ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppdragets namn:"], ["Uppdragets namn:"]))) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppgiftens namn:"], ["Uppgiftens namn:"]))))),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("input", { autoFocus: true, type: "text", size: 35, value: task.name, disabled: !writeAccess, readOnly: !writeAccess, onChange: function (ev) {
                        repo.tasks.update(task, { name: ev.target.value.substr(0, _common_field_limits__WEBPACK_IMPORTED_MODULE_8__["FieldLimits"].MAX_CHARS_TASK_NAMES) });
                    } }))),
        task.migratedTexts && writeAccess && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_modal_pages_edit_task_task_migration_box__WEBPACK_IMPORTED_MODULE_2__["TaskMigrationBox"], { task: task, course: null, updateLink: function (id, linkOrUnlink) { throw new Error("Not implemented yet"); } }),
        tabClass !== 'mission-tab' && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "align-horizontal spaced" },
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4randem\u00E5l:"], ["L\u00E4randem\u00E5l:"]))))),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_7__["LazyContent"], null, repo.courseContents.id(contentId).map(function (content) {
                    if (content.type !== 'learning-goals')
                        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ej valbart"], ["Ej valbart"]))));
                    var hasCommonLearningGoals = content.hasCommonLearningGoals;
                    var learningGoals = content.commonLearningGoals;
                    var availableGoals = learningGoals.map(function (lg) { return lg.trim(); }).filter(function (lg) { return lg; })
                        .map(function (lg) { return ({
                        name: lg,
                        key: lg
                    }); });
                    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_checklist__WEBPACK_IMPORTED_MODULE_6__["Checklist"], { available: availableGoals, selected: task.learningGoal.split('\n'), onChange: function (goals, goal) {
                            if (hasCommonLearningGoals) {
                                repo.tasks.update(task, { learningGoal: goals.join('\n') });
                            }
                            else {
                                repo.tasks.update(task, { learningGoal: goal });
                            }
                        } });
                })))),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h2", null, tabClass === 'mission-tab' ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppdragstyp"], ["Uppdragstyp"]))) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_6 || (templateObject_6 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppgiftstyp"], ["Uppgiftstyp"])))),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_checklist__WEBPACK_IMPORTED_MODULE_6__["Checklist"], { available: [
                    tabClass !== 'mission-tab' && { name: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_7 || (templateObject_7 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00D6vningsuppgift"], ["\u00D6vningsuppgift"]))), key: 'exercise' },
                    { name: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_8 || (templateObject_8 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppgift"], ["Uppgift"]))), key: "task" },
                    { name: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_9 || (templateObject_9 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Inl\u00E4mningsuppgift"], ["Inl\u00E4mningsuppgift"]))), key: 'assignment' },
                ].filter(function (x) { return x; }), selected: [task.taskType], onChange: function (_, clickedKey) { return repo.tasks.update(task, { taskType: clickedKey }); } }),
            task.taskType === 'assignment' && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, "Inl\u00E4mningsdatum"),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_datepicker__WEBPACK_IMPORTED_MODULE_3__["default"], { nextMonthButtonLabel: "", showWeekNumbers: true, previousMonthButtonLabel: "", selected: task.deadline && moment__WEBPACK_IMPORTED_MODULE_4___default()(task.deadline).toDate(), dateFormat: "yyyy-MM-dd", locale: "sv", popperPlacement: "bottom-start", onChange: function (value) {
                                repo.tasks.update(task, { deadline: moment__WEBPACK_IMPORTED_MODULE_4___default()(value).format("YYYY-MM-DD") });
                            } })),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" }, task.deadline && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("a", { className: "deleteDate", href: "#", title: "Ta bort inl\u00E4mningsdatum", onClick: function (ev) {
                            ev.preventDefault();
                            repo.tasks.update(task, { deadline: null });
                        } }))),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "taskContainer" },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "align-horizontal" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top", onClick: function () {
                                return repo.tasks.update(task, { sendToUrkund: task.sendToUrkund == null ? false : !task.sendToUrkund });
                            } },
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "checkBox" + ((task.sendToUrkund == null ? true : task.sendToUrkund) ? " checked" : "") })),
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" }, "Verify assignments with Urkund"))))));
};
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8, templateObject_9;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/task/right-column/edit-task-form.tsx":
/*!*********************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/task/right-column/edit-task-form.tsx ***!
  \*********************************************************************************************/
/*! exports provided: EditTaskForm */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditTaskForm", function() { return EditTaskForm; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _basic_editable_task_fields__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./basic-editable-task-fields */ "./src/components/course-builder-ks/viewer-editor/task/right-column/basic-editable-task-fields.tsx");
/* harmony import */ var _task_footer_buttons__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./task-footer-buttons */ "./src/components/course-builder-ks/viewer-editor/task/right-column/task-footer-buttons.tsx");
/* harmony import */ var _introduction_text_editor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./introduction-text-editor */ "./src/components/course-builder-ks/viewer-editor/task/right-column/introduction-text-editor.tsx");
/* harmony import */ var _task_description_editor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./task-description-editor */ "./src/components/course-builder-ks/viewer-editor/task/right-column/task-description-editor.tsx");
/* harmony import */ var _task_working_procedure_editor__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./task-working-procedure-editor */ "./src/components/course-builder-ks/viewer-editor/task/right-column/task-working-procedure-editor.tsx");
/* harmony import */ var _task_embedded_html_editor__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./task-embedded-html-editor */ "./src/components/course-builder-ks/viewer-editor/task/right-column/task-embedded-html-editor.tsx");







var EditTaskForm = function (_a) {
    var repo = _a.repo, course = _a.course, draftId = _a.draftId, tabId = _a.tabId, tab = _a.tab, contentId = _a.contentId, writeAccess = _a.writeAccess, task = _a.task, school = _a.school;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null,
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_basic_editable_task_fields__WEBPACK_IMPORTED_MODULE_1__["BasicEditableTaskFields"], { repo: repo, task: task, writeAccess: writeAccess, contentId: contentId, tab: tab }),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_introduction_text_editor__WEBPACK_IMPORTED_MODULE_3__["IntroductionTextEditor"], { repo: repo, task: task, writeAccess: writeAccess }),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_task_description_editor__WEBPACK_IMPORTED_MODULE_4__["TaskDescriptionEditor"], { writeAccess: writeAccess, task: task, repo: repo }),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_task_working_procedure_editor__WEBPACK_IMPORTED_MODULE_5__["TaskWorkingProcedureEditor"], { writeAccess: writeAccess, task: task, repo: repo, step: tab && tab.type === 'step-course-tab' && tab.stepNo }),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_task_embedded_html_editor__WEBPACK_IMPORTED_MODULE_6__["TaskEmbeddedHTMLEditor"], { writeAccess: writeAccess, task: task, repo: repo }),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_task_footer_buttons__WEBPACK_IMPORTED_MODULE_2__["TaskFooterButtons"], { repo: repo, task: task, courseId: course.id, draftId: draftId, tabId: tabId, contentId: contentId, school: school }));
};
/*

  * Inte kunna ndra ordning p lsta rutor om inte isKedStaff().
  * Ingen lgg till uppgifts-knapp om inte editMode.
  *
  * Redigera uppgiftsinnehll
  * Ls lrandemlen till admin alltid
  * Kunna klicka in sig p uppgiften
  * Kunna ta bort uppgift
  * Kunna nollstlla ndringar fr skolan

*/ 


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/task/right-column/introduction-text-editor.tsx":
/*!*******************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/task/right-column/introduction-text-editor.tsx ***!
  \*******************************************************************************************************/
/*! exports provided: IntroductionTextEditor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IntroductionTextEditor", function() { return IntroductionTextEditor; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _utility_components_wysiwyg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../utility-components/wysiwyg */ "./src/components/utility-components/wysiwyg/index.tsx");
/* harmony import */ var _utility_components_wysiwyg_actions_sv__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../utility-components/wysiwyg/actions-sv */ "./src/components/utility-components/wysiwyg/actions-sv.ts");





var IntroductionTextEditor = function (_a) {
    var repo = _a.repo, task = _a.task, writeAccess = _a.writeAccess;
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h4", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Introtext"], ["Introtext"])))),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", { className: "subHeader" }, "(Skriv en introduktion till uppgiften)"),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_wysiwyg__WEBPACK_IMPORTED_MODULE_3__["Wysiwyg"], { actions: [
                "bold",
                "italic",
                "underline",
                "link",
                "image"
            ], defaultActions: _utility_components_wysiwyg_actions_sv__WEBPACK_IMPORTED_MODULE_4__["default"], readOnly: !writeAccess, html: task.content || "", onChange: function (html) { return repo.tasks.update(task, { content: html }); } }));
};
var templateObject_1;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/task/right-column/task-description-editor.tsx":
/*!******************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/task/right-column/task-description-editor.tsx ***!
  \******************************************************************************************************/
/*! exports provided: TaskDescriptionEditor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskDescriptionEditor", function() { return TaskDescriptionEditor; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_wysiwyg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../utility-components/wysiwyg */ "./src/components/utility-components/wysiwyg/index.tsx");
/* harmony import */ var _utility_components_wysiwyg_actions_sv__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../utility-components/wysiwyg/actions-sv */ "./src/components/utility-components/wysiwyg/actions-sv.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _texts__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../texts */ "./src/components/course-builder-ks/viewer-editor/task/texts.ts");
/* harmony import */ var _common_field_limits__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../common/field-limits */ "./src/components/course-builder-ks/common/field-limits.ts");








function TaskDescriptionEditor(_a) {
    var writeAccess = _a.writeAccess, task = _a.task, repo = _a.repo;
    var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(0), 2), numChars = _b[0], setNumChars = _b[1];
    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h4", null, _texts__WEBPACK_IMPORTED_MODULE_5__["taskTypeHeadings"][task.taskType] || Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppgift"], ["Uppgift"])))),
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { className: "subHeader" }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["(Skriv in en kort f\u00F6rklaring, max ", " tecken, vad uppgiften g\u00E5r ut p\u00E5.)"], ["(Skriv in en kort f\u00F6rklaring, max ", " tecken, vad uppgiften g\u00E5r ut p\u00E5.)"])), _common_field_limits__WEBPACK_IMPORTED_MODULE_6__["FieldLimits"].MAX_CHARS_TASK_INTRO_TEXT)),
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_wysiwyg__WEBPACK_IMPORTED_MODULE_2__["Wysiwyg"], { actions: [
                "bold",
            ], defaultActions: _utility_components_wysiwyg_actions_sv__WEBPACK_IMPORTED_MODULE_3__["default"], readOnly: !writeAccess, html: task.description || "", maxChars: _common_field_limits__WEBPACK_IMPORTED_MODULE_6__["FieldLimits"].MAX_CHARS_TASK_INTRO_TEXT, reportNumChars: function (numChars) { return setNumChars(numChars); }, onChange: function (html) {
                repo.tasks.update(task, { description: html });
            } }),
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { style: { textAlign: 'right', opacity: 0.7, fontSize: '8pt' } }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["", " av ", ""], ["", " av ", ""])), numChars, _common_field_limits__WEBPACK_IMPORTED_MODULE_6__["FieldLimits"].MAX_CHARS_TASK_INTRO_TEXT)));
}
var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/task/right-column/task-embedded-html-editor.tsx":
/*!********************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/task/right-column/task-embedded-html-editor.tsx ***!
  \********************************************************************************************************/
/*! exports provided: TaskEmbeddedHTMLEditor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskEmbeddedHTMLEditor", function() { return TaskEmbeddedHTMLEditor; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../utils/utils */ "./src/utils/utils.ts");




var TaskEmbeddedHTMLEditor = function (_a) {
    var task = _a.task, repo = _a.repo;
    return Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_2__["isKedStaff"])() ? task.embeddedHtml ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h4", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Inb\u00E4ddat material"], ["Inb\u00E4ddat material"])))),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Klipp in HTML kod nedan"], ["Klipp in HTML kod nedan"])))),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("textarea", { style: { width: "100%", height: "100px" }, value: task.embeddedHtml, onChange: function (ev) { return repo.tasks.update(task, { embeddedHtml: ev.target.value }); } })) :
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button", { className: "btn", onClick: function () { return repo.tasks.update(task, { embeddedHtml: " " }); } },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-code", "aria-hidden": true }),
                "\u00A0", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4gg till inb\u00E4ddat material"], ["L\u00E4gg till inb\u00E4ddat material"])))),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null)) :
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null);
};
var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/task/right-column/task-footer-buttons.tsx":
/*!**************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/task/right-column/task-footer-buttons.tsx ***!
  \**************************************************************************************************/
/*! exports provided: TaskFooterButtons */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskFooterButtons", function() { return TaskFooterButtons; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var react_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router */ "./node_modules/react-router/es/index.js");
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../utility-components/horizontal-item */ "./src/components/utility-components/horizontal-item.tsx");
/* harmony import */ var _utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../utility-components/align-horizontal */ "./src/components/utility-components/align-horizontal.tsx");
var _this = undefined;







var TaskFooterButtons = Object(react_router__WEBPACK_IMPORTED_MODULE_3__["withRouter"])(function (_a) {
    var school = _a.school, courseId = _a.courseId, tabId = _a.tabId, contentId = _a.contentId, draftId = _a.draftId, task = _a.task, repo = _a.repo, history = _a.history;
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "btn btn-warning pull-right", onClick: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                    return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                        switch (_a.label) {
                            case 0:
                                repo.courseContents.removeRelated(contentId, "tasks", task);
                                return [4 /*yield*/, _globals_db__WEBPACK_IMPORTED_MODULE_4__["db"].saveNow()];
                            case 1:
                                _a.sent();
                                history.push("/" + school + "/courses/" + courseId + "/tabs/" + tabId + "/drafts/" + draftId + "/edit");
                                return [2 /*return*/];
                        }
                    });
                }); } },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-trash", "aria-hidden": true }),
                "\u00A0", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ta bort uppgiften"], ["Ta bort uppgiften"])))),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_6__["AlignHorizontal"], null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_5__["HorizontalItem"], null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button", { className: "btn", onClick: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                                switch (_a.label) {
                                    case 0: return [4 /*yield*/, repo.saveNow()];
                                    case 1:
                                        _a.sent();
                                        history.push("/" + school + "/courses/" + courseId + "/tabs/" + (tabId || '$') + "/contents/" + contentId + "/tasks/" + task.id + "/drafts/" + draftId);
                                        return [2 /*return*/];
                                }
                            });
                        }); } },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-eye", "aria-hidden": true }),
                        "\u00A0", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["F\u00F6rhandsgranska"], ["F\u00F6rhandsgranska"]))))),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_5__["HorizontalItem"], null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button", { className: "btn", onClick: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                                history.push("/" + school + "/courses/" + courseId + "/tabs/" + (tabId || '$') + "/drafts/" + draftId + "/edit");
                                return [2 /*return*/];
                            });
                        }); } },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-arrow-left", "aria-hidden": true }),
                        "\u00A0", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C5terg\u00E5 till fliken"], ["\u00C5terg\u00E5 till fliken"]))))))),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null));
});
var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/task/right-column/task-working-procedure-editor.tsx":
/*!************************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/task/right-column/task-working-procedure-editor.tsx ***!
  \************************************************************************************************************/
/*! exports provided: TaskWorkingProcedureEditor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskWorkingProcedureEditor", function() { return TaskWorkingProcedureEditor; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_wysiwyg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../utility-components/wysiwyg */ "./src/components/utility-components/wysiwyg/index.tsx");
/* harmony import */ var _utility_components_wysiwyg_actions_sv__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../utility-components/wysiwyg/actions-sv */ "./src/components/utility-components/wysiwyg/actions-sv.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _common_dialog_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/dialog-context */ "./src/components/course-builder-ks/common/dialog-context.ts");
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");
/* harmony import */ var _common_select_word_bank__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../common/select-word-bank */ "./src/components/course-builder-ks/common/select-word-bank.tsx");
/* harmony import */ var _utility_components_wysiwyg_restore_selection__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../utility-components/wysiwyg/restore-selection */ "./src/components/utility-components/wysiwyg/restore-selection.ts");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");











function TaskWorkingProcedureEditor(_a) {
    var writeAccess = _a.writeAccess, task = _a.task, repo = _a.repo, step = _a.step;
    var dialogCtx = Object(react__WEBPACK_IMPORTED_MODULE_1__["useContext"])(_common_dialog_context__WEBPACK_IMPORTED_MODULE_5__["DialogsContext"]);
    var actions = [
        "bold",
        "italic",
        "underline",
        "olist",
        "outdent",
        "indent",
        "link",
        "image"
    ];
    if (writeAccess && Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_6__["isKedStaff"])() && step != null) {
        // This task is put on a step. We could link to a word bank:
        actions.push({
            name: "listWordBank",
            icon: '<i class="fa fa-book" aria-hidden="true"></i>',
            title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4nka till ordbank"], ["L\u00E4nka till ordbank"]))),
            result: function (ev, wysiwyg) {
                var selection = Object(_utility_components_wysiwyg_restore_selection__WEBPACK_IMPORTED_MODULE_8__["saveSelection"])();
                dialogCtx.openDialog(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_common_select_word_bank__WEBPACK_IMPORTED_MODULE_7__["SelectWordBank"], { subject: task.subject, step: step, onSelect: function (_a) {
                        var name = _a.name, url = _a.url;
                        dialogCtx.closeDialog();
                        Object(_utility_components_wysiwyg_restore_selection__WEBPACK_IMPORTED_MODULE_8__["restoreSelection"])(selection);
                        var elem = document.createElement('a');
                        elem.href = url;
                        elem.appendChild(document.createTextNode(name));
                        document.execCommand('insertHTML', false, elem.outerHTML);
                    } }));
            }
        }, {
            icon: '<i class="fa fa-link" style="color:var(--col-accent)" aria-hidden="true"></i>',
            title: 'Resurs lnk',
            result: function () {
                var url = window.prompt('Ange lnkens URL fr resursen');
                if (url) {
                    //check that the entered URL is the same with the current one
                    var urlObj = new URL('', url);
                    if (urlObj.host !== window.location.host) {
                        Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["showError"])("Ogiltig resursadress");
                        return;
                    }
                    //match the resourceId
                    var regex = new RegExp("([^\.|/]+).([^\.]+)(?=\.html)");
                    var urlResults = regex.exec(urlObj.pathname);
                    if (!_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_9__["cfg"].KED_RESOURCES_URL) {
                        Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["showError"])("Resurser URL r inte konfigurerad");
                        return;
                    }
                    //replace cfg value with the one from the provided url
                    var valueFromConfig = _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_9__["cfg"].KED_RESOURCES_URL.replace("{value}", urlResults[0]);
                    if (valueFromConfig)
                        document.execCommand('createLink', false, valueFromConfig);
                }
            }
        });
    }
    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h4", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Arbetsprocess"], ["Arbetsprocess"])))),
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_wysiwyg__WEBPACK_IMPORTED_MODULE_2__["Wysiwyg"], { actions: actions, defaultActions: _utility_components_wysiwyg_actions_sv__WEBPACK_IMPORTED_MODULE_3__["default"], readOnly: !writeAccess, html: task.workingProcedure || "", onChange: function (html) {
                repo.tasks.update(task, { workingProcedure: html });
            } }));
}
var templateObject_1, templateObject_2;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/task/task-editor.tsx":
/*!*****************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/task/task-editor.tsx ***!
  \*****************************************************************************/
/*! exports provided: TaskEditor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskEditor", function() { return TaskEditor; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_live_query_view__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utility-components/live-query-view */ "./src/components/utility-components/live-query-view.tsx");
/* harmony import */ var _common_two_columns_page__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/two-columns-page */ "./src/components/course-builder-ks/common/two-columns-page.tsx");
/* harmony import */ var _right_column_edit_task_form__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./right-column/edit-task-form */ "./src/components/course-builder-ks/viewer-editor/task/right-column/edit-task-form.tsx");
/* harmony import */ var _logic_ordered_requirements__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../logic/ordered-requirements */ "./src/components/course-builder-ks/logic/ordered-requirements.ts");
/* harmony import */ var _left_column_edit_requirements__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./left-column/edit-requirements */ "./src/components/course-builder-ks/viewer-editor/task/left-column/edit-requirements.tsx");
/* harmony import */ var _logic_is_employee__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../logic/is-employee */ "./src/components/course-builder-ks/logic/is-employee.ts");
/* harmony import */ var _course_builder_courses_business_logic__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../course-builder/courses/business-logic */ "./src/components/course-builder/courses/business-logic.ts");









var TaskEditor = Object(_utility_components_live_query_view__WEBPACK_IMPORTED_MODULE_2__["liveQueryView"])(function (_a) {
    var school = _a.school, course = _a.course, activeTab = _a.activeTab, draftId = _a.draftId, branch = _a.branch, contentId = _a.contentId, taskId = _a.taskId, blockId = _a.blockId;
    var themeCourseTab = course.tabs.find(function (t) { return t.id === activeTab; });
    var involvedTabIds = (themeCourseTab && themeCourseTab.tabClass === 'mission-tab') ?
        course.tabs.filter(function (tab) { return tab.tabClass === 'subject-tab'; }).map(function (tab) { return tab.id; }) :
        [activeTab];
    return branch.tasks
        .include("abilities", "centralContent", "knowledgeRequirements").includeIdsOnly()
        //.debug()
        .hasEdgesFrom([contentId])
        .toValue()
        .combineLatest(branch.courseTabs
        .include("abilities", "centralContent", "knowledgeRequirements")
        .includeIdsOnly()
        .ids(involvedTabIds))
        .switchMap(function (_a) {
        var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](_a, 2), tasks = _b[0], involvedTabs = _b[1];
        var task = tasks.filter(function (t) { return t.id === taskId; })[0];
        var uncoveredIds = Object(_course_builder_courses_business_logic__WEBPACK_IMPORTED_MODULE_8__["getIdsNotCoveredByReqReferencingDocs"])(involvedTabs, tasks);
        return Object(_logic_ordered_requirements__WEBPACK_IMPORTED_MODULE_5__["resolveRequirementOrder"])(task).map(function (task) {
            return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_common_two_columns_page__WEBPACK_IMPORTED_MODULE_3__["TwoColumnsPage"], { left: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_left_column_edit_requirements__WEBPACK_IMPORTED_MODULE_6__["EditRequirements"], { repo: branch, task: task, uncoveredIds: uncoveredIds, tabIds: involvedTabIds, blockId: blockId }), right: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_right_column_edit_task_form__WEBPACK_IMPORTED_MODULE_4__["EditTaskForm"], { repo: branch, school: school, course: course, draftId: draftId, tabId: activeTab, tab: involvedTabs.find(function (t) { return t.id === activeTab; }), contentId: contentId, writeAccess: Object(_logic_is_employee__WEBPACK_IMPORTED_MODULE_7__["isEmployee"])(school), task: task }), rightWidth: 6 });
        });
    });
});


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/task/texts.ts":
/*!**********************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/task/texts.ts ***!
  \**********************************************************************/
/*! exports provided: taskTypeHeadings */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "taskTypeHeadings", function() { return taskTypeHeadings; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");


var taskTypeHeadings = {
    exercise: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00D6vningsuppgift"], ["\u00D6vningsuppgift"]))),
    task: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppgift"], ["Uppgift"]))),
    assignment: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Inl\u00E4mningsuppgift"], ["Inl\u00E4mningsuppgift"])))
};
var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/task/viewer/task-viewer-page.tsx":
/*!*****************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/task/viewer/task-viewer-page.tsx ***!
  \*****************************************************************************************/
/*! exports provided: TaskViewerPage, TaskViewerPageInner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskViewerPage", function() { return TaskViewerPage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskViewerPageInner", function() { return TaskViewerPageInner; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_live_query_view__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../utility-components/live-query-view */ "./src/components/utility-components/live-query-view.tsx");
/* harmony import */ var _common_two_columns_page__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../common/two-columns-page */ "./src/components/course-builder-ks/common/two-columns-page.tsx");
/* harmony import */ var _weekplanner_weekplanner__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../weekplanner/weekplanner */ "./src/components/weekplanner/weekplanner.tsx");
/* harmony import */ var _task_viewer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./task-viewer */ "./src/components/course-builder-ks/viewer-editor/task/viewer/task-viewer.tsx");
/* harmony import */ var _utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../utility-components/lazy-content */ "./src/components/utility-components/lazy-content.tsx");
/* harmony import */ var _logic_ordered_requirements__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../logic/ordered-requirements */ "./src/components/course-builder-ks/logic/ordered-requirements.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var react_router__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react-router */ "./node_modules/react-router/es/index.js");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");












var TaskViewerPage = Object(_utility_components_live_query_view__WEBPACK_IMPORTED_MODULE_2__["liveQueryView"])(function (props) {
    return props.lazyRepo.map(function (repo) { return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(TaskViewerPageInner, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, props, { repo: repo }))); });
});
var TaskViewerPageInner = Object(react_router__WEBPACK_IMPORTED_MODULE_9__["withRouter"])(Object(_utility_components_live_query_view__WEBPACK_IMPORTED_MODULE_2__["liveQueryView"])(function (_a) {
    var school = _a.school, courseId = _a.courseId, activeTab = _a.activeTab, repo = _a.repo, taskId = _a.taskId, draftId = _a.draftId, contentId = _a.contentId, history = _a.history;
    return (repo.tasks
        .include("abilities", "centralContent", "knowledgeRequirements")
        .id(taskId)
        .map(function (task) { return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_common_two_columns_page__WEBPACK_IMPORTED_MODULE_3__["TwoColumnsPage"], { left: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_6__["LazyContent"], null, Object(_logic_ordered_requirements__WEBPACK_IMPORTED_MODULE_7__["resolveRequirementOrder"])(task).map(function (task) { return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_task_viewer__WEBPACK_IMPORTED_MODULE_5__["TaskViewer"], { school: school, task: task, courseId: courseId, abilities: task.abilities, centralContent: task.centralContent, requirements: task.knowledgeRequirements, futureAbilities: task.futureAbilities }),
            draftId && contentId && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("hr", null),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button", { className: "btn", onClick: function () { return history.push("/" + school + "/courses/" + courseId + "/tabs/" + activeTab + "/contents/" + contentId + "/tasks/" + taskId + "/drafts/" + draftId + "/edit"); } },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-lg fa-pencil" }),
                    " ", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_8__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Forts\u00E4tt redigera"], ["Forts\u00E4tt redigera"])))))); })), right: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_weekplanner_weekplanner__WEBPACK_IMPORTED_MODULE_4__["WeekPlanner"], { env: _globals_KED_env__WEBPACK_IMPORTED_MODULE_10__["default"], viewCourseUrl: _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_11__["default"].KED_COURSE_VIEWER_URL }), rightWidth: 5 }); }));
}));
var templateObject_1;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/task/viewer/task-viewer.tsx":
/*!************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/task/viewer/task-viewer.tsx ***!
  \************************************************************************************/
/*! exports provided: TaskViewer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskViewer", function() { return TaskViewer; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _logic_is_employee__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../logic/is-employee */ "./src/components/course-builder-ks/logic/is-employee.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _course_viewer_course_page_task_assignments__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../course-viewer/course-page/task-assignments */ "./src/components/course-viewer/course-page/task-assignments.tsx");
/* harmony import */ var _course_viewer_subcomponents_abilities_box__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../course-viewer/subcomponents/abilities-box */ "./src/components/course-viewer/subcomponents/abilities-box.tsx");
/* harmony import */ var _course_viewer_subcomponents_central_content_box__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../course-viewer/subcomponents/central-content-box */ "./src/components/course-viewer/subcomponents/central-content-box.tsx");
/* harmony import */ var _course_viewer_subcomponents_knowledge_requirements_table__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../course-viewer/subcomponents/knowledge-requirements-table */ "./src/components/course-viewer/subcomponents/knowledge-requirements-table.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _texts__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../texts */ "./src/components/course-builder-ks/viewer-editor/task/texts.ts");
/* harmony import */ var _common_future_abilities_box__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../common/future-abilities-box */ "./src/components/course-builder-ks/common/future-abilities-box.tsx");
/* harmony import */ var _features__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../features */ "./src/features/index.ts");












var TaskViewer = function (_a) {
    var school = _a.school, task = _a.task, courseId = _a.courseId, abilities = _a.abilities, centralContent = _a.centralContent, requirements = _a.requirements, futureAbilities = _a.futureAbilities;
    var deadlineTooLate = task.deadline && moment__WEBPACK_IMPORTED_MODULE_3___default()(task.deadline).endOf('day') < moment__WEBPACK_IMPORTED_MODULE_3___default()();
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "sv-text-portlet sv-use-margins sv-skip-spacer" },
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "sv-text-portlet-content" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h1", { className: "h1" }, task.name))),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "sv-html-portlet sv-portlet" }, task.content && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { dangerouslySetInnerHTML: { __html: task.content } }))),
        task.description && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "sv-html-portlet sv-portlet" },
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: ["ked_boxed", "taskBox", task.taskType].join(' '), style: { clear: "both" } },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h2", null, _texts__WEBPACK_IMPORTED_MODULE_9__["taskTypeHeadings"][task.taskType] || Object(_utils_utils__WEBPACK_IMPORTED_MODULE_8__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppgift"], ["Uppgift"])))),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { dangerouslySetInnerHTML: { __html: task.description } }))),
        task.workingProcedure && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h3", { className: "h3" }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_8__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Arbetsprocess"], ["Arbetsprocess"])))),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "rich-text-readonly", dangerouslySetInnerHTML: { __html: task.workingProcedure } })),
        task.embeddedHtml && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { dangerouslySetInnerHTML: { __html: task.embeddedHtml } }),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null),
        task.taskType === 'assignment' && _features__WEBPACK_IMPORTED_MODULE_11__["features"].ksAssignments ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h2", null, "Inl\u00E4mningsuppgift"),
            Object(_logic_is_employee__WEBPACK_IMPORTED_MODULE_2__["isEmployee"])(school) ?
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, "H\u00E4r kan du som l\u00E4rare se elevernas inl\u00E4mnade arbeten.") : Object(_logic_is_employee__WEBPACK_IMPORTED_MODULE_2__["isEmployee"])() ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_8__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Detta \u00E4r en inl\u00E4mningsuppgift med inl\u00E4mningsdatum ", ""], ["Detta \u00E4r en inl\u00E4mningsuppgift med inl\u00E4mningsdatum ", ""])), moment__WEBPACK_IMPORTED_MODULE_3___default()(task.deadline).format('YYYY-MM-DD'))) : react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, ". L\u00E4mna in ditt arbete som en pdf, doc eller odt fil genom att dra det till f\u00E4ltet under."),
                task.deadline ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("b", null,
                        "Den h\u00E4r uppgiften ",
                        deadlineTooLate ? 'skulle varit inlmnad ' : 'skall vara inlmnad ',
                        moment__WEBPACK_IMPORTED_MODULE_3___default()(task.deadline).format('YYYY-MM-DD'))) : undefined),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_viewer_course_page_task_assignments__WEBPACK_IMPORTED_MODULE_4__["TaskAssignments"], { courseId: courseId, taskId: task.id, school: school, sendToUrkund: task.sendToUrkund }),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null)) : undefined,
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "sv-html-portlet sv-portlet sv-skip-spacer" },
            abilities.length > 0 ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_viewer_subcomponents_abilities_box__WEBPACK_IMPORTED_MODULE_5__["AbilitiesBox"], { title: "Den h\u00E4r uppgiften behandlar f\u00F6ljande f\u00F6rm\u00E5gor", className: "larger", headerOpen: false, abilities: abilities }) : null,
            centralContent.length > 0 ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_viewer_subcomponents_central_content_box__WEBPACK_IMPORTED_MODULE_6__["CentralContentBox"], { title: "Den h\u00E4r uppgiften behandlar f\u00F6ljande centrala inneh\u00E5ll", className: "larger", headerOpen: false, centralContent: centralContent }) : null,
            requirements.length > 0 && task.taskType !== 'exercise' ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_viewer_subcomponents_knowledge_requirements_table__WEBPACK_IMPORTED_MODULE_7__["KnowledgeRequirementsBox"], { title: "I den h\u00E4r uppgiften bed\u00F6ms f\u00F6ljande kunskapskrav", className: "larger", headerOpen: false, requirements: requirements, idsToSubjectMap: task.idsToSubjectMap, explainedRequirements: task.explainedRequirements }) : null,
            futureAbilities.length > 0 ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_common_future_abilities_box__WEBPACK_IMPORTED_MODULE_10__["FutureAbilitiesBox"], { title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_8__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["I den h\u00E4r uppgiften behandlas f\u00F6ljande framtidsf\u00F6rm\u00E5gor"], ["I den h\u00E4r uppgiften behandlas f\u00F6ljande framtidsf\u00F6rm\u00E5gor"]))), selectedFAs: futureAbilities }) : null),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("hr", null),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("hr", null),
        task.resources && task.resources.length > 0 && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "sv-html-portlet sv-portlet" },
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h2", null, "Resurser kopplade till uppgiften"),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "taskContainer" }, task.resources.map(function (r, idx) {
                return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { key: idx, className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("a", { href: r.url }, r.name)));
            })),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null)),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null));
};
var templateObject_1, templateObject_2, templateObject_3, templateObject_4;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/version-history/delta-view.tsx":
/*!***************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/version-history/delta-view.tsx ***!
  \***************************************************************************************/
/*! exports provided: DeltaView */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DeltaView", function() { return DeltaView; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utility-components/lazy-content */ "./src/components/utility-components/lazy-content.tsx");
/* harmony import */ var _deltadoc_box__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./deltadoc-box */ "./src/components/course-builder-ks/viewer-editor/version-history/deltadoc-box.tsx");
/* harmony import */ var _deltalink_box__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./deltalink-box */ "./src/components/course-builder-ks/viewer-editor/version-history/deltalink-box.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");







function deltaKey(delta) {
    if (delta.type === 'modify')
        return delta.targetId;
    return delta.sourceId + delta.label + delta.targetId;
}
function DeltaView(_a) {
    var branchId = _a.branchId, tag = _a.tag, editable = _a.editable;
    var deltas = _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].branch(branchId).deltas;
    if (tag) {
        deltas = deltas.tags(tag);
    }
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_3__["LazyContent"], null, deltas.toValue().map(function (deltas) {
        return deltas.length === 0 ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", { style: { opacity: 0.5, fontStyle: 'italic' } }, tag ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Skolans version \u00E4r identisk med orginalet"], ["Skolans version \u00E4r identisk med orginalet"]))) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Det finns inga \u00E4ndringar att publicera."], ["Det finns inga \u00E4ndringar att publicera."]))))) :
            //
            // Normal view (list all changes + option to clear all)
            //
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "taskContainer odd-even" }, deltas.map(function (delta) {
                    var key = deltaKey(delta);
                    return delta.type === 'modify' ?
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_deltadoc_box__WEBPACK_IMPORTED_MODULE_4__["DeltaDocBox"], { delta: delta, editable: editable, key: key, onDelete: function () {
                                // Undo DeltaDoc
                                undoDeltaDoc(delta);
                            } }) :
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_deltalink_box__WEBPACK_IMPORTED_MODULE_5__["DeltaLinkBox"], { delta: delta, editable: editable, key: key, onDelete: function () {
                                // Undo Link
                                undoDeltaRelation(delta);
                            } });
                })),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button", { className: "btn btn-large btn-warning", onClick: function () {
                        var e_1, _a;
                        if (confirm(tag ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C5tg\u00E4rden \u00E5terst\u00E4llet kursen till standard.\n\nVill du forts\u00E4tta?"], ["\u00C5tg\u00E4rden \u00E5terst\u00E4llet kursen till standard.\\n\\nVill du forts\u00E4tta?"]))) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C5tg\u00E4rden raderar samtliga \u00E4ndringar som \u00E4nnu inte \u00E4r publicerade.\n\nVill du forts\u00E4tta?"], ["\u00C5tg\u00E4rden raderar samtliga \u00E4ndringar som \u00E4nnu inte \u00E4r publicerade.\\n\\nVill du forts\u00E4tta?"]))))) {
                            try {
                                for (var deltas_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](deltas), deltas_1_1 = deltas_1.next(); !deltas_1_1.done; deltas_1_1 = deltas_1.next()) {
                                    var delta = deltas_1_1.value;
                                    if (delta.type === 'modify') {
                                        undoDeltaDoc(delta);
                                    }
                                    else {
                                        undoDeltaRelation(delta);
                                    }
                                }
                            }
                            catch (e_1_1) { e_1 = { error: e_1_1 }; }
                            finally {
                                try {
                                    if (deltas_1_1 && !deltas_1_1.done && (_a = deltas_1.return)) _a.call(deltas_1);
                                }
                                finally { if (e_1) throw e_1.error; }
                            }
                        }
                    } }, tag ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C5terst\u00E4ll till orginalet"], ["\u00C5terst\u00E4ll till orginalet"]))) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_6 || (templateObject_6 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Radera alla opublicerade \u00E4ndringar"], ["Radera alla opublicerade \u00E4ndringar"])))));
    }));
    function undoDeltaRelation(delta) {
        _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].branch(branchId).table(delta.sourceTable)
            .undoLink(delta.sourceId, delta.label, delta.targetId);
    }
    function undoDeltaDoc(delta) {
        var undoings = {};
        Object.keys(delta.data).forEach(function (key) {
            undoings[key] = { $unset: 0 };
        });
        _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].branch(branchId).table(delta.table).update({
            id: delta.targetId,
            name: delta.targetName
        }, undoings);
    }
}
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/version-history/deltadoc-box.tsx":
/*!*****************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/version-history/deltadoc-box.tsx ***!
  \*****************************************************************************************/
/*! exports provided: DeltaDocBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DeltaDocBox", function() { return DeltaDocBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _model_friendly_names__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./model-friendly-names */ "./src/components/course-builder-ks/viewer-editor/version-history/model-friendly-names.ts");
/* harmony import */ var _course_builder_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../course-builder/utils */ "./src/components/course-builder/utils.ts");





function DeltaDocBox(_a) {
    var delta = _a.delta, editable = _a.editable, onDelete = _a.onDelete;
    var entityName = delta.targetName && Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["maxLength"])(delta.targetName, 80);
    var classNames = ["schoolCourse"];
    if (delta.$meta)
        classNames.push("entitymeta-" + delta.$meta);
    var friendlyEntityType = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["capitalizeFirst"])(_model_friendly_names__WEBPACK_IMPORTED_MODULE_3__["modelNames"].entityTypes[delta.table] || delta.table);
    var friendlyProps = Object.keys(delta.data).map(function (prop) {
        return ({
            propSpec: _model_friendly_names__WEBPACK_IMPORTED_MODULE_3__["modelNames"].propertyNames[prop],
            prop: prop
        });
    });
    var hasUnknownProps = friendlyProps.some(function (fp) { return !fp.propSpec; });
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: classNames.join(' ') },
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "align-horizontal" },
            editable ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top pull-right" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("a", { className: "removeItem", onClick: onDelete })) : null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" }, entityName ?
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("a", null,
                    friendlyEntityType,
                    " \"",
                    entityName,
                    "\"") :
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("a", null, friendlyEntityType))),
        friendlyProps.filter(function (_a) {
            var propSpec = _a.propSpec;
            return propSpec;
        }).map(function (_a) {
            var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](_a.propSpec, 2), type = _b[0], propName = _b[1], prop = _a.prop;
            return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { key: prop }, type === _model_friendly_names__WEBPACK_IMPORTED_MODULE_3__["deltaTypes"].Obscure ?
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, propName) :
                type === _model_friendly_names__WEBPACK_IMPORTED_MODULE_3__["deltaTypes"].HiddenChange ? null :
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null,
                        propName,
                        ": ",
                        _model_friendly_names__WEBPACK_IMPORTED_MODULE_3__["modelNames"].getPropVal(delta.data[prop], type, prop)));
        }),
        hasUnknownProps ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", { title: JSON.stringify(delta.data, null, 4) }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndringar i interna egenskaper"], ["\u00C4ndringar i interna egenskaper"]))))) : null,
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", { className: "small" },
                Object(_course_builder_utils__WEBPACK_IMPORTED_MODULE_4__["shortDateFormat"])(delta.dateTime),
                " ",
                delta.contributors.join(', '))));
}
var templateObject_1;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/version-history/deltalink-box.tsx":
/*!******************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/version-history/deltalink-box.tsx ***!
  \******************************************************************************************/
/*! exports provided: DeltaLinkBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DeltaLinkBox", function() { return DeltaLinkBox; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _model_friendly_names__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./model-friendly-names */ "./src/components/course-builder-ks/viewer-editor/version-history/model-friendly-names.ts");
/* harmony import */ var _course_builder_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../course-builder/utils */ "./src/components/course-builder/utils.ts");




function DeltaLinkBox(_a) {
    var delta = _a.delta, editable = _a.editable, onDelete = _a.onDelete;
    var entityName = delta.targetName && Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["maxLength"])(Object(_model_friendly_names__WEBPACK_IMPORTED_MODULE_2__["removeHtmlTags"])(delta.targetName), 80);
    var classNames = ["schoolCourse"];
    if (delta.$meta)
        classNames.push("entitymeta-" + delta.$meta);
    var friendlyOperation = _model_friendly_names__WEBPACK_IMPORTED_MODULE_2__["modelNames"].getModifiedLinkHeading(delta);
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: classNames.join(' ') },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "align-horizontal" },
            editable ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "horizontalItem top pull-right" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("a", { className: "removeItem", onClick: onDelete })) : null,
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "horizontalItem top" }, entityName ?
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("a", null,
                    friendlyOperation,
                    " \"",
                    entityName,
                    "\"") :
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("a", null, friendlyOperation))),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null,
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p", { className: "small" },
                Object(_course_builder_utils__WEBPACK_IMPORTED_MODULE_3__["shortDateFormat"])(delta.dateTime),
                " ",
                delta.contributor)));
}


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/version-history/index.tsx":
/*!**********************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/version-history/index.tsx ***!
  \**********************************************************************************/
/*! exports provided: VersionHistoryPage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VersionHistoryPage", function() { return VersionHistoryPage; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utility-components/lazy-content */ "./src/components/utility-components/lazy-content.tsx");
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _common_banner__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/banner */ "./src/components/course-builder-ks/common/banner.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/es/index.js");
/* harmony import */ var _version_history_box__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./version-history-box */ "./src/components/course-builder-ks/viewer-editor/version-history/version-history-box.tsx");








var VersionHistoryPage = function (_a) {
    var school = _a.school, courseId = _a.courseId;
    var schoolObservable = _globals_db__WEBPACK_IMPORTED_MODULE_3__["db"].schools.name(school).single();
    var draftObservable = _globals_db__WEBPACK_IMPORTED_MODULE_3__["CourseInstances"].getBranchId(schoolObservable, courseId)
        .map(function (draftId) { return _globals_db__WEBPACK_IMPORTED_MODULE_3__["db"].branch(draftId); });
    var branchObservable = schoolObservable.map(function (school) { return _globals_db__WEBPACK_IMPORTED_MODULE_3__["db"].branch(school.officialBranchId); });
    var bannerPropsObservable = draftObservable.switchMap(function (repo) { return repo.courseInstances.id(courseId).map(function (course) { return ({
        title: course.name,
        tabs: [{ name: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Versionshistorik"], ["Versionshistorik"]))), key: "versionhistory" }],
        buttons: [react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_6__["Link"], { to: "/" + school + "/courses/" + courseId, key: "$settings", title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Visa kursen"], ["Visa kursen"]))) },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-eye", "aria-hidden": true }),
                "\u00A0")]
    }); }); });
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_common_banner__WEBPACK_IMPORTED_MODULE_4__["LazyBanner"], { lazyProps: bannerPropsObservable }),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_2__["LazyContent"], null, schoolObservable.map(function (_a) {
            var schoolDisplayName = _a.displayName, officialBranchId = _a.officialBranchId;
            return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_version_history_box__WEBPACK_IMPORTED_MODULE_7__["VersionHistoryBox"], { branchType: "school-branch", branchId: officialBranchId, courseId: courseId, isAdmin: false });
        })));
    /*<button
      className="btn btn-large btn-warning"
      onClick={async ()=>{
        if (confirm(L`Alla modifieringar som gjorts fr skolan ${schoolDisplayName} kommer att frsvinna.
        
        Fortstt?`)) {
          const branch = await branchObservable.load();
          branch.clearBranch();
          db.branches.delete()
        }
      }}
    >{L`terstll kursen till standard`}</button> */
};
var templateObject_1, templateObject_2;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/version-history/model-friendly-names.ts":
/*!************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/version-history/model-friendly-names.ts ***!
  \************************************************************************************************/
/*! exports provided: deltaTypes, modelNames, removeHtmlTags */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "deltaTypes", function() { return deltaTypes; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "modelNames", function() { return modelNames; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "removeHtmlTags", function() { return removeHtmlTags; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");


var Text = Symbol("TypeText");
var Checkbox = Symbol("TypeCheckbox");
var Obscure = Symbol("TypeObsure");
var HiddenChange = Symbol("TypeHiddenChange");
var Html = Symbol("TypeHtml");
var deltaTypes = {
    Text: Text,
    Html: Html,
    Checkbox: Checkbox,
    Obscure: Obscure,
    HiddenChange: HiddenChange
};
var modelNames = {
    entityTypes: {
        courseBlocks: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["kursblock"], ["kursblock"]))),
        courseContents: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["inneh\u00E5llsruta"], ["inneh\u00E5llsruta"]))),
        courseInstances: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["kurs"], ["kurs"]))),
        courseTabs: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["flik"], ["flik"]))),
        schools: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["skola"], ["skola"]))),
        tasks: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_6 || (templateObject_6 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["uppgift"], ["uppgift"]))),
    },
    modifiedLinks: {
        tabs: [Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_7 || (templateObject_7 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Tillagd flik"], ["Tillagd flik"]))), Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_8 || (templateObject_8 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Borttagen flik"], ["Borttagen flik"])))],
        blocks: [Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_9 || (templateObject_9 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Tillagt block"], ["Tillagt block"]))), Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_10 || (templateObject_10 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Borttaget block"], ["Borttaget block"])))],
        abilities: [Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_11 || (templateObject_11 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Tillagd f\u00F6rm\u00E5ga"], ["Tillagd f\u00F6rm\u00E5ga"]))), Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_12 || (templateObject_12 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Borttagen f\u00F6rm\u00E5ga"], ["Borttagen f\u00F6rm\u00E5ga"])))],
        centralContent: [Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_13 || (templateObject_13 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Tillagt centralt inneh\u00E5ll"], ["Tillagt centralt inneh\u00E5ll"]))), Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_14 || (templateObject_14 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Borttaget centralt inneh\u00E5ll"], ["Borttaget centralt inneh\u00E5ll"])))],
        knowledgeRequirements: [Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_15 || (templateObject_15 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Tillagt kunskapskrav"], ["Tillagt kunskapskrav"]))), Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_16 || (templateObject_16 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Borttaget kunskapskrav"], ["Borttaget kunskapskrav"])))],
        tasks: [Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_17 || (templateObject_17 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Tillagd uppgift"], ["Tillagd uppgift"]))), Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_18 || (templateObject_18 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Borttagen uppgift"], ["Borttagen uppgift"])))],
        contents: [Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_19 || (templateObject_19 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Tillagd inneh\u00E5llsruta"], ["Tillagd inneh\u00E5llsruta"]))), Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_20 || (templateObject_20 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Borttagen inneh\u00E5llsruta"], ["Borttagen inneh\u00E5llsruta"])))]
    },
    propertyNames: {
        allowAddTabs: [Checkbox, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_21 || (templateObject_21 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrat om till\u00E4gg av flik ska vara till\u00E5tet"], ["\u00C4ndrat om till\u00E4gg av flik ska vara till\u00E5tet"])))],
        allowRemoveTabs: [Checkbox, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_22 || (templateObject_22 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrat om borttagning av flik ska vara till\u00E5tet"], ["\u00C4ndrat om borttagning av flik ska vara till\u00E5tet"])))],
        allowReorderTabs: [Checkbox, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_23 || (templateObject_23 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrat om det ska va till\u00E5tet att \u00E4ndra ordning p\u00E5 flik"], ["\u00C4ndrat om det ska va till\u00E5tet att \u00E4ndra ordning p\u00E5 flik"])))],
        assignment: [Checkbox, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_24 || (templateObject_24 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrad flagga f\u00F6r inl\u00E4mningsuppgift"], ["\u00C4ndrad flagga f\u00F6r inl\u00E4mningsuppgift"])))],
        commonLearningGoals: [Text, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_25 || (templateObject_25 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrade gemensamma l\u00E4randem\u00E5l"], ["\u00C4ndrade gemensamma l\u00E4randem\u00E5l"])))],
        content: [Html, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_26 || (templateObject_26 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrad inneh\u00E5llstext"], ["\u00C4ndrad inneh\u00E5llstext"])))],
        createdBy: [HiddenChange, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_27 || (templateObject_27 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Skapad av"], ["Skapad av"])))],
        createdDate: [HiddenChange, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_28 || (templateObject_28 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Skapad datum"], ["Skapad datum"])))],
        dateTime: [Obscure, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_29 || (templateObject_29 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndat datum / tid"], ["\u00C4ndat datum / tid"])))],
        deadline: [Text, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_30 || (templateObject_30 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrat inl\u00E4mningsdatum"], ["\u00C4ndrat inl\u00E4mningsdatum"])))],
        description: [Html, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_31 || (templateObject_31 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrad beskrivning"], ["\u00C4ndrad beskrivning"])))],
        embeddedHtml: [Obscure, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_32 || (templateObject_32 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Lagt till inb\u00E4ddad HTML"], ["Lagt till inb\u00E4ddad HTML"])))],
        explainedRequirements: [Obscure, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_33 || (templateObject_33 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Lagt till egna f\u00F6rklaringar av kunskapskrav"], ["Lagt till egna f\u00F6rklaringar av kunskapskrav"])))],
        futureAbilities: [Text, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_34 || (templateObject_34 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrade framtidsf\u00F6rm\u00E5gor"], ["\u00C4ndrade framtidsf\u00F6rm\u00E5gor"])))],
        hasCommonLearningGoals: [Checkbox, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_35 || (templateObject_35 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrad inst\u00E4llning f\u00F6r gemensamma l\u00E4randem\u00E5l"], ["\u00C4ndrad inst\u00E4llning f\u00F6r gemensamma l\u00E4randem\u00E5l"])))],
        hidden: [Checkbox, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_36 || (templateObject_36 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrad flagga \"g\u00F6md\""], ["\u00C4ndrad flagga \"g\u00F6md\""])))],
        hiddenTasks: [Obscure, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_37 || (templateObject_37 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrat listan p\u00E5 g\u00F6mda uppgifter"], ["\u00C4ndrat listan p\u00E5 g\u00F6mda uppgifter"])))],
        html: [Obscure, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_38 || (templateObject_38 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrat inneh\u00E5ll"], ["\u00C4ndrat inneh\u00E5ll"])))],
        learningGoal: [Text, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_39 || (templateObject_39 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4randem\u00E5l"], ["L\u00E4randem\u00E5l"])))],
        lockDelete: [Checkbox, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_40 || (templateObject_40 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrat flagga: \"l\u00E5s fr\u00E5n borttagning\""], ["\u00C4ndrat flagga: \"l\u00E5s fr\u00E5n borttagning\""])))],
        locked: [Checkbox, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_41 || (templateObject_41 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrad flagga: \"f\u00F6rbjud \u00E4ndring av flikar\""], ["\u00C4ndrad flagga: \"f\u00F6rbjud \u00E4ndring av flikar\""])))],
        migratedTexts: [Obscure, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_42 || (templateObject_42 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndringar i migrerade texter fr\u00E5n skolverket"], ["\u00C4ndringar i migrerade texter fr\u00E5n skolverket"])))],
        modifiedBy: [HiddenChange, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_43 || (templateObject_43 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrad av"], ["\u00C4ndrad av"])))],
        modifiedDate: [HiddenChange, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_44 || (templateObject_44 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndringsdatum"], ["\u00C4ndringsdatum"])))],
        taskOrder: [Obscure, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_45 || (templateObject_45 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrad ordning p\u00E5 uppgifter"], ["\u00C4ndrad ordning p\u00E5 uppgifter"])))],
        name: [Text, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_46 || (templateObject_46 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrat namn"], ["\u00C4ndrat namn"])))],
        order: [Obscure, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_47 || (templateObject_47 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrad ordning"], ["\u00C4ndrad ordning"])))],
        resources: [Obscure, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_48 || (templateObject_48 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrade i resurser"], ["\u00C4ndrade i resurser"])))],
        school: [Text, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_49 || (templateObject_49 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Skola"], ["Skola"])))],
        stepNo: [Text, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_50 || (templateObject_50 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Stegnummer"], ["Stegnummer"])))],
        stepNumbers: [Text, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_51 || (templateObject_51 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Stegnummer"], ["Stegnummer"])))],
        subject: [Text, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_52 || (templateObject_52 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4mne"], ["\u00C4mne"])))],
        subjects: [Obscure, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_53 || (templateObject_53 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4mnen"], ["\u00C4mnen"])))],
        tabClass: [Text, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_54 || (templateObject_54 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Typ av flik"], ["Typ av flik"])))],
        tabTitle: [HiddenChange, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_55 || (templateObject_55 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Fliknamn"], ["Fliknamn"])))],
        taskType: [Text, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_56 || (templateObject_56 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppgiftstyp"], ["Uppgiftstyp"])))],
        url: [Text, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_57 || (templateObject_57 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Url"], ["Url"])))],
        workingProcedure: [Html, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_58 || (templateObject_58 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Arbetsprocess"], ["Arbetsprocess"])))],
        youtubeId: [Obscure, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_59 || (templateObject_59 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Youtube ID"], ["Youtube ID"])))]
    },
    getModifiedLinkHeading: function (delta) {
        var headingSpec = modelNames.modifiedLinks[delta.label];
        if (!headingSpec) {
            return delta.type === 'add' ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_60 || (templateObject_60 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Tillagt objekt"], ["Tillagt objekt"]))) :
                delta.type === 'remove' ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_61 || (templateObject_61 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Borttaget objekt"], ["Borttaget objekt"]))) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_62 || (templateObject_62 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C5ngrad l\u00E4nkning"], ["\u00C5ngrad l\u00E4nkning"]))); // Should never be
        }
        return delta.type === 'add' ?
            headingSpec[0] : delta.type === 'remove' ?
            headingSpec[1] : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_63 || (templateObject_63 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C5ngrad l\u00E4nkning"], ["\u00C5ngrad l\u00E4nkning"]))); // Should never be
    },
    getPropVal: function (p, type, prop) {
        switch (p) {
            case true: return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_64 || (templateObject_64 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["P\u00E5slaget"], ["P\u00E5slaget"])));
            case false: return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_65 || (templateObject_65 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Avslaget"], ["Avslaget"])));
            case 'primary': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_66 || (templateObject_66 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Grundskola"], ["Grundskola"])));
            case 'gymnasium': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_67 || (templateObject_67 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Gymnasieskola"], ["Gymnasieskola"])));
            case 'exercise': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_68 || (templateObject_68 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00D6vningsuppgift"], ["\u00D6vningsuppgift"])));
            case 'task': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_69 || (templateObject_69 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppgift"], ["Uppgift"])));
            case 'assignment': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_70 || (templateObject_70 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Inl\u00E4mningsuppgift"], ["Inl\u00E4mningsuppgift"])));
            case 'theme-course': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_71 || (templateObject_71 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Temakurs"], ["Temakurs"])));
            case 'step-course': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_72 || (templateObject_72 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Stegkurs"], ["Stegkurs"])));
            case 'intro-tab': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_73 || (templateObject_73 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Introduktionsflik"], ["Introduktionsflik"])));
            case 'run-up-tab': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_74 || (templateObject_74 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Upptakt"], ["Upptakt"])));
            case 'subject-tab': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_75 || (templateObject_75 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4mnesflik"], ["\u00C4mnesflik"])));
            case 'mission-tab': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_76 || (templateObject_76 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppdragsflik"], ["Uppdragsflik"])));
            case 'content-tab': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_77 || (templateObject_77 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Inneh\u00E5llsflik"], ["Inneh\u00E5llsflik"])));
            case 'teacher-tab': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_78 || (templateObject_78 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4rarsida"], ["L\u00E4rarsida"])));
            case 'word-bank-tab': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_79 || (templateObject_79 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ordbank"], ["Ordbank"])));
            default: {
                if (p == null)
                    return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_80 || (templateObject_80 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Nollst\u00E4llt"], ["Nollst\u00E4llt"])));
                if (p === "")
                    return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_81 || (templateObject_81 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["(tomt)"], ["(tomt)"])));
                if (type === Html)
                    return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["maxLength"])(removeHtmlTags(p), 300);
                if (typeof p === 'string')
                    return p;
                if (p.subjectName)
                    return p.subjectName;
                return JSON.stringify(p, null, 2);
            }
        }
    }
};
function removeHtmlTags(html) {
    var div = document.createElement('div');
    div.innerHTML = html;
    return div.innerText;
}
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8, templateObject_9, templateObject_10, templateObject_11, templateObject_12, templateObject_13, templateObject_14, templateObject_15, templateObject_16, templateObject_17, templateObject_18, templateObject_19, templateObject_20, templateObject_21, templateObject_22, templateObject_23, templateObject_24, templateObject_25, templateObject_26, templateObject_27, templateObject_28, templateObject_29, templateObject_30, templateObject_31, templateObject_32, templateObject_33, templateObject_34, templateObject_35, templateObject_36, templateObject_37, templateObject_38, templateObject_39, templateObject_40, templateObject_41, templateObject_42, templateObject_43, templateObject_44, templateObject_45, templateObject_46, templateObject_47, templateObject_48, templateObject_49, templateObject_50, templateObject_51, templateObject_52, templateObject_53, templateObject_54, templateObject_55, templateObject_56, templateObject_57, templateObject_58, templateObject_59, templateObject_60, templateObject_61, templateObject_62, templateObject_63, templateObject_64, templateObject_65, templateObject_66, templateObject_67, templateObject_68, templateObject_69, templateObject_70, templateObject_71, templateObject_72, templateObject_73, templateObject_74, templateObject_75, templateObject_76, templateObject_77, templateObject_78, templateObject_79, templateObject_80, templateObject_81;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/version-history/version-history-box.tsx":
/*!************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/version-history/version-history-box.tsx ***!
  \************************************************************************************************/
/*! exports provided: VersionHistoryBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VersionHistoryBox", function() { return VersionHistoryBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _delta_view__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./delta-view */ "./src/components/course-builder-ks/viewer-editor/version-history/delta-view.tsx");




function VersionHistoryBox(props) {
    var title = props.branchType === 'school-branch' ?
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h2", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Skolans \u00E4ndringar"], ["Skolans \u00E4ndringar"])))) :
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h3", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Opublicerade \u00E4ndringar"], ["Opublicerade \u00E4ndringar"]))));
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "ked_boxed" },
        title,
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_delta_view__WEBPACK_IMPORTED_MODULE_3__["DeltaView"], { branchId: props.branchId, editable: !props.isAdmin, tag: props.branchType === 'school-branch' ? props.courseId : null }));
}
var templateObject_1, templateObject_2;


/***/ }),

/***/ "./src/components/course-builder/courses/business-logic.ts":
/*!*****************************************************************!*\
  !*** ./src/components/course-builder/courses/business-logic.ts ***!
  \*****************************************************************/
/*! exports provided: getUncoveredKnowledgeRequirements, getIdsNotCoveredByTasks, getIdsNotCoveredByReqReferencingDocs, sanityCheck, getTasksPerId, getSoftAccessList */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getUncoveredKnowledgeRequirements", function() { return getUncoveredKnowledgeRequirements; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getIdsNotCoveredByTasks", function() { return getIdsNotCoveredByTasks; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getIdsNotCoveredByReqReferencingDocs", function() { return getIdsNotCoveredByReqReferencingDocs; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sanityCheck", function() { return sanityCheck; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTasksPerId", function() { return getTasksPerId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSoftAccessList", function() { return getSoftAccessList; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils */ "./src/components/course-builder/utils.ts");



function getUncoveredKnowledgeRequirements(course) {
    var uncoveredRequirements = course.knowledgeRequirements.reduce(function (result, item) {
        result[item.id] = item;
        return result;
    }, {});
    course.tasks.forEach(function (task) {
        task.knowledgeRequirements.forEach(function (kr) {
            delete uncoveredRequirements[kr.id];
        });
    });
    return Object.keys(uncoveredRequirements).map(function (id) { return uncoveredRequirements[id]; });
}
function getIdsNotCoveredByTasks(course) {
    return getIdsNotCoveredByReqReferencingDocs([course], course.tasks);
}
function getIdsNotCoveredByReqReferencingDocs(templates, docsBeingChecked) {
    var uncoveredIds = {};
    // 1. Mark the ids of all knowledge requirements, abilities and central content for this course:
    templates.forEach(function (course) {
        course.knowledgeRequirements.forEach(function (r) {
            uncoveredIds[r.id] = true;
        });
        course.abilities.forEach(function (a) {
            uncoveredIds[a.id] = true;
        });
        course.centralContent.forEach(function (cc) {
            uncoveredIds[cc.id] = true;
        });
    });
    // 2. List all tasks and unmark all ids that they refer to
    docsBeingChecked.forEach(function (doc) {
        doc.knowledgeRequirements.forEach(function (kr) {
            delete uncoveredIds[kr.id];
        });
        doc.abilities.forEach(function (a) {
            delete uncoveredIds[a.id];
        });
        doc.centralContent.forEach(function (cc) {
            delete uncoveredIds[cc.id];
        });
    });
    return uncoveredIds;
}
function sanityCheck(course) {
    function hasDuplicateTasks(course) {
        var taskIds = {};
        return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["flatten"])(course.modules.map(function (module) { return module.taskIds.map(function (taskId) {
            if (taskIds[taskId]) {
                var task = course.tasks.find(function (t) { return t.id === taskId; });
                return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Samma uppgift f\u00F6rekommer flera g\u00E5nger: \"", "\""], ["Samma uppgift f\u00F6rekommer flera g\u00E5nger: \"", "\""])), task.name);
            }
            taskIds[taskId] = true;
        }).filter(function (x) { return x; }); }));
    }
    function tasksWithSameUrl(course) {
        var taskUrls = {};
        return course.tasks.map(function (task) {
            if (task.url) {
                if (taskUrls[task.url]) {
                    return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Tv\u00E5 uppgifter pekar p\u00E5 samma URL: \"", "\" samt \"", "\""], ["Tv\u00E5 uppgifter pekar p\u00E5 samma URL: \"", "\" samt \"", "\""])), taskUrls[task.url].name, task.name);
                }
                taskUrls[task.url] = task;
            }
        }).filter(function (x) { return x; });
    }
    function hasEmptyModuleNames(course) {
        return course.modules.some(function (module) { return module.name === ""; }) && Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Det finns minst en modul utan angivet namn"], ["Det finns minst en modul utan angivet namn"])));
    }
    function hasDuplicateModuleNames(course) {
        var moduleNames = {};
        return course.modules.map(function (module) {
            if (module.name && moduleNames[module.name]) {
                return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Modulen med namn ", " f\u00F6rekommer flera g\u00E5nger"], ["Modulen med namn ", " f\u00F6rekommer flera g\u00E5nger"])), module.name);
            }
            if (module.name)
                moduleNames[module.name] = true;
        });
    }
    var checks = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["flatten"])([
        hasDuplicateTasks(course),
        tasksWithSameUrl(course),
        hasEmptyModuleNames(course),
        hasDuplicateModuleNames(course)
    ]);
    return checks.filter(function (result) { return result; });
}
function getTasksPerId(course) {
    var result = {};
    function add(id, task) {
        var list = result[id] || (result[id] = []);
        list.push(task);
    }
    course.tasks.forEach(function (task) {
        task.abilities.forEach(function (a) { return add(a.id, task); });
        task.centralContent.forEach(function (c) { return add(c.id, task); });
        task.futureAbilities.forEach(function (fa) { return add(fa, task); });
    });
    return result;
}
/** Returns an access list for a course in a backward compatible way */
function getSoftAccessList(course) {
    var responsibleTeachers = course.responsibleTeachers;
    var result = responsibleTeachers.map(function (da) { return ({
        name: da.name,
        email: Object(_utils__WEBPACK_IMPORTED_MODULE_2__["getEmailFromDocAccess"])(da),
        access: da.access || 'edit'
    }); });
    return result;
}
var templateObject_1, templateObject_2, templateObject_3, templateObject_4;


/***/ }),

/***/ "./src/components/course-builder/modal-pages/edit-resource.tsx":
/*!*********************************************************************!*\
  !*** ./src/components/course-builder/modal-pages/edit-resource.tsx ***!
  \*********************************************************************/
/*! exports provided: EditResource */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditResource", function() { return EditResource; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils */ "./src/components/course-builder/utils.ts");
/* harmony import */ var valid_url__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! valid-url */ "./node_modules/valid-url/index.js");
/* harmony import */ var valid_url__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(valid_url__WEBPACK_IMPORTED_MODULE_4__);





var EditResource = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](EditResource, _super);
    function EditResource(props) {
        var _this = _super.call(this, props) || this;
        _this.state = _this.props.resource || { name: '', url: '' };
        return _this;
    }
    EditResource.prototype.save = function () {
        var resource = this.state;
        if (!valid_url__WEBPACK_IMPORTED_MODULE_4___default.a.isUri(resource.url))
            throw new Error(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Angiven URL '", "' \u00E4r ogiltig. Ska b\u00F6rja med exempelvis http:, https: eller mailto:"], ["Angiven URL '", "' \u00E4r ogiltig. Ska b\u00F6rja med exempelvis http:, https: eller mailto:"])), resource.url));
        this.props.onSave(resource);
    };
    EditResource.prototype.render = function () {
        var _this = this;
        var _a = this.props, title = _a.title, onSave = _a.onSave, onDelete = _a.onDelete;
        var resource = this.state;
        var isValidUrl = valid_url__WEBPACK_IMPORTED_MODULE_4___default.a.isUri(this.state.url);
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet sv-skip-spacer" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null, title),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" }, "Namn:"),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { type: "text", autoFocus: true, tabIndex: 1, size: 50, value: resource.name, onChange: function (ev) { return _this.setState({ name: ev.target.value }); } })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top spaced" })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" }, "L\u00E4nk:"),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top " },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { type: "text", tabIndex: 1, size: 50, value: resource.url, onChange: function (ev) { return _this.setState({ url: ev.target.value }); } })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top spaced" })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null)),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet" },
                (resource.createdDate || resource.modifiedDate) && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                    resource.createdDate && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                        "Resursen/L\u00E4nken skapades ",
                        Object(_utils__WEBPACK_IMPORTED_MODULE_3__["dtFormat"])(resource.createdDate),
                        " av ",
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("strong", null, resource.createdBy.name),
                        "."),
                    resource.modifiedDate && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                        "Resursen/L\u00E4nken redigerades senast ",
                        Object(_utils__WEBPACK_IMPORTED_MODULE_3__["dtFormat"])(resource.modifiedDate),
                        " av ",
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("strong", null, resource.modifiedBy.name),
                        "."),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null)),
                onDelete && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { tabIndex: 2, className: "btn btn-warning btn-large pull-right", onClick: function () { return onDelete(); } }, "Ta bort resurs/l\u00E4nk"),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { tabIndex: 1, className: "btn btn-large" + (isValidUrl ? "" : " btn-inactive"), onClick: isValidUrl && (function () { return onSave(resource); }) }, "Spara")));
    };
    return EditResource;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

var templateObject_1;


/***/ }),

/***/ "./src/components/course-builder/modal-pages/edit-task/task-migration-box.tsx":
/*!************************************************************************************!*\
  !*** ./src/components/course-builder/modal-pages/edit-task/task-migration-box.tsx ***!
  \************************************************************************************/
/*! exports provided: TaskMigrationBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskMigrationBox", function() { return TaskMigrationBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");



var TaskMigrationBox = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](TaskMigrationBox, _super);
    function TaskMigrationBox(props) {
        return _super.call(this, props) || this;
    }
    TaskMigrationBox.prototype.render = function () {
        var _a = this.props, task = _a.task, course = _a.course, updateLink = _a.updateLink;
        if (!task.migratedTexts)
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null, "\u00A0");
        var _b = task.migratedTexts, abilities = _b.abilities, centralContent = _b.centralContent, knowledgeRequirements = _b.knowledgeRequirements;
        var krs = Object.keys(knowledgeRequirements || {}).map(function (id) { return (tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, course.knowledgeRequirements.find(function (t) { return t.id === id; }), knowledgeRequirements[id])); }); //.filter(({name}) => !!name);
        var krA = { title: "Uppdaterat kunskapskrav fr betyget A", type: "knowledgeRequirements", items: krs.filter(function (kr) { return kr.gradeStep === 'A'; }) };
        var krC = { title: "Uppdaterat Kunskapskrav fr betyget C", type: "knowledgeRequirements", items: krs.filter(function (kr) { return kr.gradeStep === 'C'; }) };
        var krE = { title: "Uppdaterat kunskapskrav fr betyget E", type: "knowledgeRequirements", items: krs.filter(function (kr) { return kr.gradeStep === 'E'; }) };
        var abs = { title: "Uppdaterade frmgor", type: "abilities", items: Object.keys(abilities || {}).map(function (id) { return (tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, course.abilities.find(function (t) { return t.id === id; }), abilities[id])); }) }; //.filter(({name}) => !!name)};
        var ccs = { title: "Uppdaterat centralt innehll", type: "centralContent", items: Object.keys(centralContent || {}).map(function (id) { return (tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, course.centralContent.find(function (cc) { return cc.id == id; }), centralContent[id])); }) }; //.filter(({name}) => !!name)};
        var tablesToShow = [krA, krC, krE, ccs, abs].filter(function (boxInfo) { return boxInfo.items.length > 0; });
        if (tablesToShow.length === 0)
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null, "\u00A0");
        return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_2__["OpenCloseBox"], { className: "larger", title: react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "warningFlag" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-exclamation-triangle", "aria-hidden": "true" })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, "Uppdaterade formuleringar fr\u00E5n Skolverket")) }, tablesToShow.map(function (_a) {
            var title = _a.title, type = _a.type, items = _a.items;
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: title },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h5", null, title),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("table", null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("thead", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { style: { width: "40%" } }, "Ursprunglig formulering"),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { style: { width: "40%" } }, "Skolverkets nya formulering"),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "T\u00E4cker uppgiften den nya formuleringen?"))),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tbody", null, items.map(function (item) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", { key: item.id },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { dangerouslySetInnerHTML: { __html: item.oldText } }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { dangerouslySetInnerHTML: { __html: item.name } }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { onClick: function () { return updateLink(item.id, true); } }, "Ja - beh\u00E5ll kopplingen"),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { onClick: function () { return updateLink(item.id, false); } }, "Nej - ta bort kopplingen"))); }))));
        })));
    };
    return TaskMigrationBox;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/course-builder/sub-components/ellipsis-loader.tsx":
/*!**************************************************************************!*\
  !*** ./src/components/course-builder/sub-components/ellipsis-loader.tsx ***!
  \**************************************************************************/
/*! exports provided: EllipsisLoader */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EllipsisLoader", function() { return EllipsisLoader; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var EllipsisLoader = function () {
    return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("img", { style: { border: 0, margin: 0, padding: 0 }, className: "ellipsis-loader" });
};


/***/ }),

/***/ "./src/components/course-builder/sub-components/knowledge-matrix.tsx":
/*!***************************************************************************!*\
  !*** ./src/components/course-builder/sub-components/knowledge-matrix.tsx ***!
  \***************************************************************************/
/*! exports provided: KnowledgeMatrix */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KnowledgeMatrix", function() { return KnowledgeMatrix; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");



var KnowledgeMatrix = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](KnowledgeMatrix, _super);
    function KnowledgeMatrix(props) {
        return _super.call(this, props) || this;
    }
    KnowledgeMatrix.prototype.render = function () {
        var _a = this.props, knowledgeRequirements = _a.knowledgeRequirements, markedIds = _a.markedIds, migratedIds = _a.migratedIds, explainedRequirements = _a.explainedRequirements;
        var _b = this.props, idsToMarkNotOk = _b.idsToMarkNotOk, markMode = _b.markMode, onMarkChanged = _b.onMarkChanged, onExplainedRequirementsChanged = _b.onExplainedRequirementsChanged;
        var columns = ["E", "C", "A"];
        var rows = [];
        var reqs = knowledgeRequirements.slice();
        var row = null;
        while (true) {
            row = columns.map(function (grade) {
                var pNext = reqs.findIndex(function (r) { return r.gradeStep && r.gradeStep.toUpperCase() === grade; });
                if (pNext < 0)
                    return null;
                var rv = reqs[pNext];
                reqs.splice(pNext, 1);
                return rv;
            });
            if (row.every(function (r) { return r === null; }))
                break;
            rows.push(row);
        }
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("table", { className: "knowledge-matrix" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("thead", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null, columns.map(function (c) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { key: c }, c); }))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tbody", null, rows.map(function (row, i) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], { key: i },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null, row.map(function (requirement, j) {
                    var isMarkedOK = requirement && markedIds && markedIds.indexOf(requirement.id) >= 0;
                    var isMarkedNotOK = requirement && idsToMarkNotOk && idsToMarkNotOk[requirement.id];
                    var isMigrated = requirement && migratedIds && !!migratedIds[requirement.id];
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { key: j, dangerouslySetInnerHTML: { __html: requirement ? requirement.name : "" }, className: (markMode ? "selectable" : "") +
                            (isMigrated ? " migrated" : "") +
                            (isMarkedOK ?
                                " markedGreen" :
                                (isMarkedNotOK ?
                                    " markedRed" :
                                    "")), onClick: markMode && requirement ?
                            function () { return onMarkChanged(requirement.id, !isMarkedOK); } :
                            undefined, title: isMigrated ?
                            markMode ?
                                "Skolverket har uppdaterat textens formulering. Du kan granska \u00E4ndringen genom att f\u00E4lla ut varningsboxen till h\u00F6ger, med titel \"Uppdaterade formuleringar fr\u00E5n Skolverket\"" :
                                "Skolverket har uppdaterat textens formulering, men detta har \u00E4nnu inte granskats av uppgiftens redigeringsbeh\u00F6rige" :
                            undefined });
                })),
                explainedRequirements && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null, row.map(function (requirement, j) {
                    var isMarkedOK = requirement && markedIds && markedIds.indexOf(requirement.id) >= 0;
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { key: j }, isMarkedOK ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("textarea", { placeholder: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Beskriv kravet"], ["Beskriv kravet"]))), className: "inputTextBox inputTextLarge", style: { width: "100%" }, readOnly: !markMode, value: explainedRequirements[requirement.id] || "", onChange: onExplainedRequirementsChanged && (function (ev) { return onExplainedRequirementsChanged(requirement.id, ev.target.value); }) }) : undefined);
                }))); })));
        { /*return <div>
          <table>
            <thead>
              <tr>
                <th>E</th>
                <th>C</th>
                <th>A</th>
              </tr>
            </thead>
            <tbody>
              {tbody.map((row, i) =>
              <tr key={i}>{row.map((cell, j) => {
                const isMarkedOK = props.markedIds && props.markedIds.indexOf(cell.id) >= 0;
                const isMarkedNotOK = props.idsToMarkNotOk && props.idsToMarkNotOk[cell.id];
                return <td
                  key={j}
                  rowSpan={cell.rowSpan}
                  className={(props.markMode ? "selectable" : "") +
                    (isMarkedOK ?
                      " markedGreen" :
                      (isMarkedNotOK ?
                        " markedRed":
                        ""))}
                  onClick={props.markMode && (()=>props.onMarkChanged(cell.id, !isMarkedOK))}>
                  {cell.html && <div style={{position: 'relative'}}>
                    <p
                      className={cell.type === 'ability' ? 'abilityText' : 'criteriaText'}
                      dangerouslySetInnerHTML={{__html: cell.html}} />
                    {props.editMode && <RemoveItem className="upperRight" onClick={()=>
                      this.setCellIds(
                        cell.type,
                        cell.rowIndex,
                        this.getCellIds(
                          cell.type,
                          cell.rowIndex).filter(id => id != cell.id) )} /> }
                  </div>}
                </td>})}
              </tr>)}
            </tbody>
          </table>
        </div>*/
        }
    };
    return KnowledgeMatrix;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

var templateObject_1;


/***/ }),

/***/ "./src/components/course-builder/sub-components/remove-item.tsx":
/*!**********************************************************************!*\
  !*** ./src/components/course-builder/sub-components/remove-item.tsx ***!
  \**********************************************************************/
/*! exports provided: RemoveItem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RemoveItem", function() { return RemoveItem; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");



;
var RemoveItem = function (_a) {
    var onClick = _a.onClick, className = _a.className, style = _a.style, title = _a.title;
    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { title: title || Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Radera"], ["Radera"]))), className: "removeItem " + (className || ""), onClick: onClick, style: style });
};
var templateObject_1;


/***/ }),

/***/ "./src/components/course-builder/sub-components/select-related-docs.tsx":
/*!******************************************************************************!*\
  !*** ./src/components/course-builder/sub-components/select-related-docs.tsx ***!
  \******************************************************************************/
/*! exports provided: SelectRelatedDocs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SelectRelatedDocs", function() { return SelectRelatedDocs; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");




var SelectRelatedDocs = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](SelectRelatedDocs, _super);
    function SelectRelatedDocs(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {};
        return _this;
    }
    SelectRelatedDocs.prototype.render = function () {
        var _this = this;
        var _a = this.props, options = _a.options, title = _a.title, markedIds = _a.markedIds, markMode = _a.markMode, migratedIds = _a.migratedIds, uncoveredIds = _a.uncoveredIds;
        var groupedOptions = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["arrayToLookup"])(options, function (d) { return d.group || "default"; });
        var groups = Object.keys(groupedOptions);
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_2__["OpenCloseBox"], { title: react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, title), className: "larger" }, groups.map(function (group) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], { key: group },
            groups.length === 1 ? null : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h5", null, group),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null)),
            groupedOptions[group].map(function (option) {
                var isMarked = markedIds.some(function (x) { return x === option.id; });
                var isMigrated = migratedIds && !!migratedIds[option.id];
                var isUncovered = uncoveredIds && uncoveredIds[option.id];
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal", key: option.id, onClick: function () {
                        return markMode && _this.props.onMarkChanged(option.id, !isMarked);
                    } },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top spaced" +
                            (markMode ? " selectable" : "") +
                            (isMarked ? " markedGreen" : (isUncovered ?
                                " markedRed" :
                                "")) +
                            (isMigrated ? " migrated" : ""), title: isMigrated ?
                            markMode ?
                                "Skolverket har uppdaterat textens formulering. Du kan granska \u00E4ndringen genom att f\u00E4lla ut varningsboxen till h\u00F6ger, med titel \"Uppdaterade formuleringar fr\u00E5n Skolverket\"" :
                                "Skolverket har uppdaterat textens formulering, men detta har \u00E4nnu inte granskats av uppgiftens redigeringsbeh\u00F6rige" :
                            undefined },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { dangerouslySetInnerHTML: { __html: option.name } }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null)));
            })); }));
    };
    return SelectRelatedDocs;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/course-builder/sub-components/spinner.tsx":
/*!******************************************************************!*\
  !*** ./src/components/course-builder/sub-components/spinner.tsx ***!
  \******************************************************************/
/*! exports provided: Spinner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Spinner", function() { return Spinner; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var Spinner = function () { return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("span", null,
    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("i", { className: "fa fa-spinner fa-spin", "aria-hidden": "true" }),
    "\u00A0"); };


/***/ }),

/***/ "./src/components/course-builder/utils.ts":
/*!************************************************!*\
  !*** ./src/components/course-builder/utils.ts ***!
  \************************************************/
/*! exports provided: updateDocumentGraphs, dtFormat, shortDateFormat, shortPersonNameFormat, updateModificationStamp, updateCreationStamp, getEmailFromDocAccess, updateModificationAndCreationStamps, applyEtags, readBlob, readBlobAsText, readBlobAsDataUrl, allowCopy, updateCourseBuilderStatus, loadCourse, hasChanges */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateDocumentGraphs", function() { return updateDocumentGraphs; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dtFormat", function() { return dtFormat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shortDateFormat", function() { return shortDateFormat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shortPersonNameFormat", function() { return shortPersonNameFormat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateModificationStamp", function() { return updateModificationStamp; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateCreationStamp", function() { return updateCreationStamp; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getEmailFromDocAccess", function() { return getEmailFromDocAccess; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateModificationAndCreationStamps", function() { return updateModificationAndCreationStamps; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "applyEtags", function() { return applyEtags; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "readBlob", function() { return readBlob; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "readBlobAsText", function() { return readBlobAsText; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "readBlobAsDataUrl", function() { return readBlobAsDataUrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "allowCopy", function() { return allowCopy; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateCourseBuilderStatus", function() { return updateCourseBuilderStatus; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "loadCourse", function() { return loadCourse; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasChanges", function() { return hasChanges; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var react_addons_update__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-addons-update */ "./node_modules/react-addons-update/index.js");
/* harmony import */ var react_addons_update__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_addons_update__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jquery */ "jquery");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../globals/KED.env */ "./src/globals/KED.env.ts");






function updateDocumentGraphs(oldDoc, newDoc, table, graphs, batch) {
    var e_1, _a;
    var docUpdates = {};
    var docId = newDoc.id;
    var _loop_1 = function (navProp) {
        var e_2, _a, e_3, _b, e_4, _c;
        var foreignTable = graphs[navProp];
        var oldList = oldDoc[navProp] || [];
        var newList = newDoc[navProp];
        if (!newList)
            return "continue";
        var tuples = newList
            .map(function (doc, idx) { return ({ doc: doc, idx: idx }); }); // Create tubles of {doc, array-index} so we can update result
        var added = tuples.filter(function (tuple) { return !oldList.some(function (o) { return o.id === tuple.doc.id; }); }); // Find added items
        try {
            for (var added_1 = (e_2 = void 0, tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](added)), added_1_1 = added_1.next(); !added_1_1.done; added_1_1 = added_1.next()) {
                var a = added_1_1.value;
                var mutatedSubDoc = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, a.doc);
                var meta = mutatedSubDoc.$meta;
                delete mutatedSubDoc.$meta; // Delete $meta so that "add" or "update" does not persiste to next state.
                if (meta === 'add') {
                    if (!mutatedSubDoc.id)
                        mutatedSubDoc.id = Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_2__["createUUID"])(); // Generate ID if not done yet.
                    // Now put an 'add' mutation in the batch queue.
                    batch.add(foreignTable, mutatedSubDoc);
                }
                else if (meta === 'update') {
                    batch.put(foreignTable, mutatedSubDoc);
                }
                batch.link(table, docId, foreignTable, mutatedSubDoc.id, navProp);
                // Update result so that state is reflected after succesful POST to server.
                if (!docUpdates[navProp])
                    docUpdates[navProp] = {};
                docUpdates[navProp][a.idx] = { $set: mutatedSubDoc };
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (added_1_1 && !added_1_1.done && (_a = added_1.return)) _a.call(added_1);
            }
            finally { if (e_2) throw e_2.error; }
        }
        var removed = oldList.filter(function (o) { return !newList.some(function (n) { return n.id === o.id; }); });
        try {
            for (var removed_1 = (e_3 = void 0, tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](removed)), removed_1_1 = removed_1.next(); !removed_1_1.done; removed_1_1 = removed_1.next()) {
                var r = removed_1_1.value;
                batch.unlink(table, docId, foreignTable, r.id, navProp);
            }
        }
        catch (e_3_1) { e_3 = { error: e_3_1 }; }
        finally {
            try {
                if (removed_1_1 && !removed_1_1.done && (_b = removed_1.return)) _b.call(removed_1);
            }
            finally { if (e_3) throw e_3.error; }
        }
        var updated = tuples.filter(function (tuple) { return oldList.some(function (o) { return o.id === tuple.doc.id && tuple.doc.$meta === 'update'; }); });
        try {
            for (var updated_1 = (e_4 = void 0, tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](updated)), updated_1_1 = updated_1.next(); !updated_1_1.done; updated_1_1 = updated_1.next()) {
                var u = updated_1_1.value;
                var mutatedSubDoc = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, u.doc);
                delete mutatedSubDoc.$meta;
                batch.put(foreignTable, mutatedSubDoc);
                // Update result so that $meta is removed from navigation prop after successful POST to server.
                if (!docUpdates[navProp])
                    docUpdates[navProp] = {};
                docUpdates[navProp][u.idx] = { $set: mutatedSubDoc };
            }
        }
        catch (e_4_1) { e_4 = { error: e_4_1 }; }
        finally {
            try {
                if (updated_1_1 && !updated_1_1.done && (_c = updated_1.return)) _c.call(updated_1);
            }
            finally { if (e_4) throw e_4.error; }
        }
    };
    try {
        for (var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](Object.keys(graphs)), _c = _b.next(); !_c.done; _c = _b.next()) {
            var navProp = _c.value;
            _loop_1(navProp);
        }
    }
    catch (e_1_1) { e_1 = { error: e_1_1 }; }
    finally {
        try {
            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
        }
        finally { if (e_1) throw e_1.error; }
    }
    return react_addons_update__WEBPACK_IMPORTED_MODULE_3___default()(newDoc, docUpdates);
}
function dtFormat(dateTime) {
    return moment__WEBPACK_IMPORTED_MODULE_1___default()(dateTime).format('YYMMDD HH:mm');
}
function shortDateFormat(dateTime) {
    return moment__WEBPACK_IMPORTED_MODULE_1___default()(dateTime).format('YYMMDD');
}
function shortPersonNameFormat(name) {
    if (!name)
        return "";
    var names = name.split(' ').filter(function (n) { return !!n; });
    var lastName = names.pop();
    return names.map(function (name) { return name[0] + "."; }).concat(lastName).join(' ');
}
function updateModificationStamp(now, obj, user) {
    return react_addons_update__WEBPACK_IMPORTED_MODULE_3___default()(obj, {
        dateTime: { $set: now },
        modifiedDate: { $set: now },
        modifiedBy: {
            $set: {
                name: user.displayName,
                url: "mailto:" + user.mail
            }
        }
    });
}
function updateCreationStamp(now, obj, user) {
    return react_addons_update__WEBPACK_IMPORTED_MODULE_3___default()(obj, {
        createdDate: { $set: now },
        createdBy: {
            $set: {
                name: user.displayName,
                url: "mailto:" + user.mail
            }
        }
    });
}
function getEmailFromDocAccess(resource) {
    if (resource.email)
        return resource.email;
    return resource.url ?
        resource.url.startsWith('mailto:') ?
            resource.url.substring('mailto:'.length) :
            resource.url :
        resource.url;
}
function updateModificationAndCreationStamps(obj, user) {
    var now = Date.now();
    obj = updateModificationStamp(now, obj, user);
    if (!obj.createdBy)
        obj = updateCreationStamp(now, obj, user);
    return obj;
}
function applyEtags(doc, newEtags, graphs) {
    var e_5, _a;
    var res = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, doc);
    var etag = newEtags[doc.id];
    if (etag)
        res.$etag = etag;
    try {
        for (var graphs_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](graphs), graphs_1_1 = graphs_1.next(); !graphs_1_1.done; graphs_1_1 = graphs_1.next()) {
            var label = graphs_1_1.value;
            var newList = doc[label].map(function (d) { return applyEtags(d, newEtags, []); });
            res[label] = newList;
        }
    }
    catch (e_5_1) { e_5 = { error: e_5_1 }; }
    finally {
        try {
            if (graphs_1_1 && !graphs_1_1.done && (_a = graphs_1.return)) _a.call(graphs_1);
        }
        finally { if (e_5) throw e_5.error; }
    }
    return res;
}
function readBlob(blob, m) {
    return new Promise(function (resolve, reject) {
        var reader = new FileReader();
        reader.onload = function (ev) { return resolve(ev.target.result); };
        reader.onabort = function (ev) { return reject(new Error("file read aborted")); };
        reader.onerror = function (ev) { return reject(ev.target.error); };
        m(reader);
    });
}
function readBlobAsText(blob) {
    return readBlob(blob, function (r) { return r.readAsText(blob); });
}
function readBlobAsDataUrl(blob) {
    return readBlob(blob, function (r) { return r.readAsDataURL(blob); });
}
function allowCopy(e) {
    e.stopPropagation();
    e.preventDefault();
    e.dataTransfer.dropEffect = 'copy';
}
function updateCourseBuilderStatus(status) {
    var div = jquery__WEBPACK_IMPORTED_MODULE_4___default()('div.course-builder')[0];
    if (div)
        div.className = "course-builder" + (status ? " status " + status : "");
}
function loadCourse(id, options) {
    return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
        var client, includeTemplateChain, includeTasks, _a, course, courseTasks, templateChain;
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
            switch (_b.label) {
                case 0:
                    client = _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].kedBackendClient;
                    includeTemplateChain = options && options.includeTemplateChain;
                    includeTasks = !options || !options.include || options.include.indexOf("tasks") !== -1;
                    return [4 /*yield*/, Promise.all([
                            client.get("courses", id, {
                                include: options && options.include ? options.include.filter(function (i) { return i !== "tasks"; }) : [
                                    "centralContent",
                                    "knowledgeRequirements",
                                    "abilities",
                                    "images",
                                    "acl" // Don't include tasks here...
                                ]
                            }),
                            // ... but include tasks here instead so that we can load the graphs for the
                            // tasks as well!
                            includeTasks && client.list("tasks", {
                                hasEdgesFrom: id,
                                include: ['knowledgeRequirements', 'centralContent', 'abilities', 'acl'],
                                flags: ['includeIdsOnly'] // Don't need redundant info that's already on course
                            }),
                            includeTemplateChain && client.list("courses", {
                                hasEdgesFrom: id,
                                flags: ['idsOnly']
                            })
                        ])];
                case 1:
                    _a = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"].apply(void 0, [(_b.sent()), 3]), course = _a[0], courseTasks = _a[1], templateChain = _a[2];
                    course.tasks = courseTasks;
                    // Correct the order of Abilities
                    if (course.abilities && course.abilitiesOrder) {
                        course.abilities = course.abilitiesOrder.map(function (id) {
                            return course.abilities.find(function (a) { return a.id === id; });
                        });
                    }
                    // Correct the order of KnowledgeRequirements
                    if (course.knowledgeRequirements && course.knowledgeRequirementsOrder) {
                        course.knowledgeRequirements = course.knowledgeRequirementsOrder.map(function (id) {
                            return course.knowledgeRequirements.find(function (c) { return c.id === id; });
                        });
                    }
                    // Correct the order of CentralContent
                    if (course.centralContent && course.centralContentOrder) {
                        course.centralContent = course.centralContentOrder.map(function (id) {
                            return course.centralContent.find(function (cc) { return cc.id === id; });
                        }); //.filter(x => !!x);// Debugging somthin' . Normally the last .filter()... part should not be nescessary...
                    }
                    // Include template chain if requested.
                    if (includeTemplateChain)
                        course.templateChain = templateChain;
                    return [2 /*return*/, course];
            }
        });
    });
}
// Check differences between two array of type T
function hasChanges(originalValues, currentValues) {
    return originalValues === undefined || currentValues.filter(function (x) { return !originalValues.includes(x); }).length > 0 || originalValues.filter(function (x) { return !currentValues.includes(x); }).length > 0;
}


/***/ }),

/***/ "./src/components/course-viewer/course-page/task-assignments-table.tsx":
/*!*****************************************************************************!*\
  !*** ./src/components/course-viewer/course-page/task-assignments-table.tsx ***!
  \*****************************************************************************/
/*! exports provided: TaskAssignmentsTable */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskAssignmentsTable", function() { return TaskAssignmentsTable; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _urkund_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./urkund-utils */ "./src/components/course-viewer/course-page/urkund-utils.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../course-builder/sub-components/spinner */ "./src/components/course-builder/sub-components/spinner.tsx");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _features__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../features */ "./src/features/index.ts");







var TaskAssignmentsTable = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](TaskAssignmentsTable, _super);
    function TaskAssignmentsTable(props) {
        return _super.call(this, props) || this;
    }
    TaskAssignmentsTable.prototype.render = function () {
        var _a = this.props, loading = _a.loading, files = _a.files, school = _a.school, usersNotHandedInDocs = _a.usersNotHandedInDocs, taskDeadline = _a.taskDeadline, teacherAtThisSchool = _a.teacherAtThisSchool, download = _a.download, refreshAssignment = _a.refreshAssignment;
        var hasOwnDocs = files.some(function (file) { return file.user === _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser.mail; });
        return loading ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_4__["Spinner"], null),
            " Laddar inl\u00E4mnade filer...") : files.length === 0 && !usersNotHandedInDocs ?
            (teacherAtThisSchool ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, "Ingen elev har l\u00E4mnat in n\u00E5got arbete \u00E4nnu.") : null)
            : (teacherAtThisSchool ? getTeacherView(files, hasOwnDocs, usersNotHandedInDocs, taskDeadline, download, refreshAssignment) : getStudentView(files, hasOwnDocs, download));
    };
    return TaskAssignmentsTable;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

function getTeacherView(files, hasOwnDocs, usersNotHandedInDocs, taskDeadline, download, refreshAssignment) {
    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
        files.length > 0 && react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
            _features__WEBPACK_IMPORTED_MODULE_6__["features"].studyGroups && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, "Uploaded assignments"),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("table", { className: "task-assignments-table" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("thead", null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "Elev"),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "Filnamn"),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "Inl\u00E4mnat den"),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "Rapport"),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "Niv\u00E5"),
                        hasOwnDocs && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tbody", null, files.map(function (file) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", { key: file.mediaLink, style: file.metadata.$meta ? { opacity: 0.5 } : {} },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: "mailto:" + file.user }, file.metadata.userDisplayName || file.user)),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null, file.metadata.driveFileId ?
                            // The file can be edited on drive. Link to editing it.
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](DriveFileListing, { file: file }) :
                            // The file cannot be edited on drive. Link to downloading it.
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: "#", onClick: function (ev) {
                                    ev.preventDefault();
                                    ev.stopPropagation();
                                    download(file);
                                } }, file.filename)),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: "assignment-date-col" }, moment__WEBPACK_IMPORTED_MODULE_3___default()(file.uploadDate).format('YYYY-MM-DD HH:mm')),
                        file.metadata.$meta === 'add' ?
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { colSpan: 2 },
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_4__["Spinner"], null),
                                " Laddar upp...") :
                            file.metadata.$meta === 'delete' ?
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { colSpan: 2 },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_4__["Spinner"], null),
                                    " Tar bort...") :
                                (function () {
                                    var metadata = file.metadata;
                                    var urkundResponses;
                                    try {
                                        urkundResponses = metadata.urkundResponse && JSON.parse(metadata.urkundResponse);
                                    }
                                    catch (err) {
                                        urkundResponses = null;
                                    }
                                    var urkundResponse = urkundResponses && urkundResponses[0];
                                    if (!urkundResponse && file.metadata.urkundUploadError) {
                                        urkundResponse = {
                                            Status: {
                                                ErrorCode: -1,
                                                Message: file.metadata.urkundUploadError,
                                                State: 'Error'
                                            },
                                            ExternalId: file.metadata.urkundExternalId
                                        };
                                    }
                                    if (file.isRefreshing)
                                        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { colSpan: 2 },
                                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_4__["Spinner"], null),
                                            " Uppdaterar...");
                                    return urkundResponse ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: "urkund-status-col" },
                                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: urkundResponse.Report && urkundResponse.Report.ReportUrl, onClick: function (ev) {
                                                    if (['Accepted', 'Submitted'].indexOf(urkundResponse.Status.State) === -1)
                                                        return; // Follow HREF instead.
                                                    ev.preventDefault();
                                                    ev.stopPropagation();
                                                    refreshAssignment(file);
                                                }, target: "_blank", title: Object(_urkund_utils__WEBPACK_IMPORTED_MODULE_2__["getUrkundHoverText"])(urkundResponse) },
                                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: Object(_urkund_utils__WEBPACK_IMPORTED_MODULE_2__["getUrkundStatusClass"])(urkundResponse) }))),
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: "urkund-status-col" },
                                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: Object(_urkund_utils__WEBPACK_IMPORTED_MODULE_2__["getUrkundSignificanceClass"])(urkundResponse) }, urkundResponse.Report && typeof urkundResponse.Report.Significance === 'number' ?
                                                urkundResponse.Report.Significance.toFixed() + "%" : ' '))) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { colSpan: 2 });
                                })()),
                    hasOwnDocs && getDeleteOwnDocsColumn(file)); })))),
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null),
        usersNotHandedInDocs && usersNotHandedInDocs.length > 0 && getStudentNotHandedInAssignment(usersNotHandedInDocs, taskDeadline));
}
function getStudentView(files, hasOwnDocs, download) {
    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("table", { className: "task-assignments-table" },
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("thead", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "Filnamn"),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "Inl\u00E4mnat den"),
                hasOwnDocs && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null))),
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tbody", null, files.map(function (file) {
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", { key: file.mediaLink, style: file.metadata.$meta ? { opacity: 0.5 } : {} },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null, file.metadata.driveFileId ?
                    // The file can be edited on drive. Link to editing it.
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](DriveFileListing, { file: file }) :
                    // The file cannot be edited on drive. Link to downloading it.
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: "#", onClick: function (ev) {
                            ev.preventDefault();
                            ev.stopPropagation();
                            download(file);
                        } }, file.filename)),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: "assignment-date-col" }, file.metadata.$meta === 'add' ?
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_4__["Spinner"], null),
                        " Laddar upp...") :
                    file.metadata.$meta === 'delete' ?
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_4__["Spinner"], null),
                            " Tar bort...") :
                        moment__WEBPACK_IMPORTED_MODULE_3___default()(file.uploadDate).format('YYYY-MM-DD HH:mm')),
                hasOwnDocs && getDeleteOwnDocsColumn(file));
        })));
}
function getDeleteOwnDocsColumn(file) {
    var _this = this;
    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null, !file.metadata.$meta && file.user === _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser.mail &&
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: "#", onClick: function (ev) {
                ev.stopPropagation();
                ev.preventDefault();
                if (confirm("Radera inl\u00E4mnad fil " + file.filename + "?"))
                    _this.props.delete(file.mediaLink);
            } },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-trash" })));
}
function getStudentNotHandedInAssignment(usersNotHandedInDocs, taskDeadline) {
    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
        _features__WEBPACK_IMPORTED_MODULE_6__["features"].studyGroups && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, "Not handed in assignments"),
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("table", { className: "task-assignments-table" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("thead", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "Elev"),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "Task deadline"))),
            usersNotHandedInDocs.map(function (user) {
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", { key: user.firstName, style: { opacity: 0.5 } },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: "mailto:" + user.email }, user.firstName)),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null,
                        " ",
                        taskDeadline,
                        " "));
            })),
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null));
}
function DriveFileListing(_a) {
    var file = _a.file;
    var _b = file.metadata, driveFileIconUrl = _b.driveFileIconUrl, driveFileUrl = _b.driveFileUrl;
    var filename = file.filename.substr(0, file.filename.lastIndexOf('.'));
    return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal spaced" },
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("img", { className: "file-icon", src: driveFileIconUrl })),
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { target: "_blank", href: driveFileUrl }, filename)))));
}


/***/ }),

/***/ "./src/components/course-viewer/course-page/task-assignments.tsx":
/*!***********************************************************************!*\
  !*** ./src/components/course-viewer/course-page/task-assignments.tsx ***!
  \***********************************************************************/
/*! exports provided: TaskAssignments */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskAssignments", function() { return TaskAssignments; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _access_control__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../access-control */ "./src/access-control/index.ts");
/* harmony import */ var downloadjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! downloadjs */ "./node_modules/downloadjs/download.js");
/* harmony import */ var downloadjs__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(downloadjs__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _course_builder_ks_logic_is_employee__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../course-builder-ks/logic/is-employee */ "./src/components/course-builder-ks/logic/is-employee.ts");
/* harmony import */ var _apis_google_picker__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../apis/google-picker */ "./src/apis/google-picker.ts");
/* harmony import */ var _apis_buttons__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../apis/buttons */ "./src/apis/buttons.tsx");
/* harmony import */ var _features__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../features */ "./src/features/index.ts");
/* harmony import */ var _apis_google_drive__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../apis/google-drive */ "./src/apis/google-drive.ts");
/* harmony import */ var _apis_mock_mock_classroom_data__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../apis/mock/mock-classroom-data */ "./src/apis/mock/mock-classroom-data.ts");
/* harmony import */ var _task_assignments_table__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./task-assignments-table */ "./src/components/course-viewer/course-page/task-assignments-table.tsx");
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");
















var MAX_URKUND_FILE_SIZE_MB = 50;
var MAX_NONURKUND_FILE_SIZE_MB = 100;
var ALLOWED_EXTENSIONS = [
    ".pdf",
    ".odt",
    ".docx",
    ".doc",
    ".cad",
    ".wav",
    ".mp3",
    ".mpeg4",
    ".mp4",
    ".zip",
    ".png",
    ".jpg",
    ".jpeg",
    ".gif"
];
var URKUND_EXTENSIONS = [
    ".pdf",
    ".odt",
    ".docx",
    ".doc"
];
var TaskAssignments = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](TaskAssignments, _super);
    function TaskAssignments(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            assignments: [],
            loading: true
        };
        return _this;
    }
    TaskAssignments.prototype.setStatePromised = function (cb) {
        var _this = this;
        return new Promise(function (resolve) { return _super.prototype.setState.call(_this, cb, resolve); });
    };
    TaskAssignments.prototype.componentDidMount = function () {
        this.load();
    };
    TaskAssignments.prototype.componentWillReceiveProps = function (nextProps) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var err_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 4, , 5]);
                        if (!(nextProps.taskId !== this.props.taskId ||
                            nextProps.courseId !== this.props.courseId)) return [3 /*break*/, 3];
                        return [4 /*yield*/, this.setStatePromised(function () { return ({
                                assignments: [],
                                loading: true
                            }); })];
                    case 1:
                        _a.sent();
                        return [4 /*yield*/, this.load()];
                    case 2:
                        _a.sent();
                        _a.label = 3;
                    case 3: return [3 /*break*/, 5];
                    case 4:
                        err_1 = _a.sent();
                        Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["showError"])(err_1);
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    TaskAssignments.prototype.update = function (assignments, assignment) {
        var retval = tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"]([
            assignment
        ], assignments.filter(function (_a) {
            var user = _a.user, filename = _a.filename;
            return user !== assignment.user ||
                filename !== assignment.filename;
        }));
        return retval;
    };
    TaskAssignments.prototype.refreshAssignment = function (assignment) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var client, _a, courseId, taskId, school, user, filename, req, _b, _c, resJson_1, e_1;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_d) {
                switch (_d.label) {
                    case 0:
                        client = _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].kedBackendClient.http;
                        _a = this.props, courseId = _a.courseId, taskId = _a.taskId, school = _a.school;
                        user = assignment.user, filename = assignment.filename;
                        return [4 /*yield*/, this.setState(function (_a) {
                                var assignments = _a.assignments;
                                return ({
                                    assignments: _this.update(assignments, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, assignment, { isRefreshing: true }))
                                });
                            })];
                    case 1:
                        _d.sent();
                        _d.label = 2;
                    case 2:
                        _d.trys.push([2, 8, , 10]);
                        return [4 /*yield*/, client.get("assignments/urkund/" + school + "/" + courseId + "/" + taskId + "/" + user + "/" + filename)];
                    case 3:
                        req = _d.sent();
                        if (!(req.status >= 400)) return [3 /*break*/, 5];
                        _b = kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["HttpError"].bind;
                        _c = [void 0, req.status];
                        return [4 /*yield*/, req.text()];
                    case 4: throw new (_b.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["HttpError"], _c.concat([_d.sent()])))();
                    case 5: return [4 /*yield*/, req.text()];
                    case 6:
                        resJson_1 = _d.sent();
                        return [4 /*yield*/, this.setState(function (_a) {
                                var assignments = _a.assignments;
                                return ({
                                    assignments: _this.update(assignments, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, assignment, { isRefreshing: false, metadata: tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, assignment.metadata, { urkundResponse: resJson_1 }) }))
                                });
                            })];
                    case 7:
                        _d.sent();
                        return [3 /*break*/, 10];
                    case 8:
                        e_1 = _d.sent();
                        return [4 /*yield*/, this.setState(function (_a) {
                                var assignments = _a.assignments;
                                return ({
                                    assignments: _this.update(assignments, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, assignment, { isRefreshing: false, refreshError: e_1 }))
                                });
                            })];
                    case 9:
                        _d.sent();
                        return [3 /*break*/, 10];
                    case 10: return [2 /*return*/];
                }
            });
        });
    };
    TaskAssignments.prototype.load = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var client, _a, courseId, taskId, school, teacherAtSchool, res, _b, _c, assignments, refreshableAssigments, refreshableAssigments_1, refreshableAssigments_1_1, a, e_2_1, error_1;
            var e_2, _d;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_e) {
                switch (_e.label) {
                    case 0:
                        _e.trys.push([0, 13, , 14]);
                        client = _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].kedBackendClient.http;
                        _a = this.props, courseId = _a.courseId, taskId = _a.taskId, school = _a.school;
                        teacherAtSchool = Object(_access_control__WEBPACK_IMPORTED_MODULE_6__["isTeacherAtSchool"])(_globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser, school);
                        return [4 /*yield*/, (teacherAtSchool ?
                                client.get("assignments/" + school + "/" + courseId + "/" + taskId) :
                                client.get("assignments/" + school + "/" + courseId + "/" + taskId + "/" + _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.mail))];
                    case 1:
                        res = _e.sent();
                        if (!(res.status !== 200)) return [3 /*break*/, 3];
                        _b = kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["HttpError"].bind;
                        _c = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_b.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["HttpError"], _c.concat([_e.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        assignments = _e.sent();
                        this.setState({
                            error: null,
                            loading: false,
                            assignments: assignments
                        });
                        if (!teacherAtSchool) return [3 /*break*/, 12];
                        refreshableAssigments = assignments.filter(function (a) {
                            return a.metadata && // Must have metadata.urkundExternalId Otherwise not possible to refresh
                                !a.metadata.urkundUploadError && ( // Not possible to refresh if upload has failed
                            !a.metadata.urkundLastPoll || // Never checked status yet
                                (['Accepted', 'Submitted'].indexOf(JSON.parse(a.metadata.urkundResponse)[0].Status.State) >= 0 &&
                                    parseInt(a.metadata.urkundLastPoll) < moment__WEBPACK_IMPORTED_MODULE_4___default()().add(-15, "seconds").toDate().getTime()));
                        }
                        // Checked status for a long time ago
                        );
                        _e.label = 5;
                    case 5:
                        _e.trys.push([5, 10, 11, 12]);
                        refreshableAssigments_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](refreshableAssigments), refreshableAssigments_1_1 = refreshableAssigments_1.next();
                        _e.label = 6;
                    case 6:
                        if (!!refreshableAssigments_1_1.done) return [3 /*break*/, 9];
                        a = refreshableAssigments_1_1.value;
                        return [4 /*yield*/, this.refreshAssignment(a)];
                    case 7:
                        _e.sent();
                        _e.label = 8;
                    case 8:
                        refreshableAssigments_1_1 = refreshableAssigments_1.next();
                        return [3 /*break*/, 6];
                    case 9: return [3 /*break*/, 12];
                    case 10:
                        e_2_1 = _e.sent();
                        e_2 = { error: e_2_1 };
                        return [3 /*break*/, 12];
                    case 11:
                        try {
                            if (refreshableAssigments_1_1 && !refreshableAssigments_1_1.done && (_d = refreshableAssigments_1.return)) _d.call(refreshableAssigments_1);
                        }
                        finally { if (e_2) throw e_2.error; }
                        return [7 /*endfinally*/];
                    case 12: return [3 /*break*/, 14];
                    case 13:
                        error_1 = _e.sent();
                        this.setState({
                            loading: false,
                            error: "Kunde inte ladda inl\u00E4mningsuppgifter",
                            assignments: []
                        });
                        console.error(error_1);
                        return [3 /*break*/, 14];
                    case 14: return [2 /*return*/];
                }
            });
        });
    };
    TaskAssignments.prototype.onDrag = function (ev) {
        ev.stopPropagation();
        ev.preventDefault();
        ev.dataTransfer.dropEffect = 'copy';
    };
    TaskAssignments.prototype.verifyAndUpload = function (file, driveFile) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var error_2;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 3, , 4]);
                        if (!file)
                            return [2 /*return*/];
                        if (this.state.assignments.some(function (a) {
                            return a.user === _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.mail &&
                                a.filename === file.name;
                        })) {
                            if (!confirm("Ers\u00E4tta befintlig fil (" + file.name + ")?")) {
                                return [2 /*return*/];
                            }
                        }
                        if (this.props.school.toLowerCase() !== _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.school.toLowerCase()) {
                            if (!confirm("Uppgiften tillh\u00F6r en annan skola (" + this.props.school + ").\n" +
                                "Vill du \u00E4nd\u00E5 l\u00E4mna in ditt arbete h\u00E4r?")) {
                                return [2 /*return*/];
                            }
                        }
                        this.setState({ uploadingFile: file });
                        return [4 /*yield*/, this.upload(file, driveFile)];
                    case 1:
                        _a.sent();
                        return [4 /*yield*/, this.load()];
                    case 2:
                        _a.sent();
                        this.setState({
                            uploadingFile: null
                        });
                        return [3 /*break*/, 4];
                    case 3:
                        error_2 = _a.sent();
                        this.setState({
                            error: "Kunde inte ladda upp filen. " + (error_2.message || error_2),
                            uploadingFile: null
                        });
                        console.error(error_2);
                        return [3 /*break*/, 4];
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    TaskAssignments.prototype.upload = function (file, driveFile) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var client, _a, courseId, taskId, school, sendToUrkund, mail, isUrkundExtension, lowerFilename, body, queryParams, res, _b, _c;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_d) {
                switch (_d.label) {
                    case 0:
                        client = _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].kedBackendClient.http;
                        _a = this.props, courseId = _a.courseId, taskId = _a.taskId, school = _a.school, sendToUrkund = _a.sendToUrkund;
                        mail = _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.mail;
                        isUrkundExtension = URKUND_EXTENSIONS
                            .indexOf("." + file.name.split('.').reverse()[0].toLowerCase()) >= 0;
                        if (isUrkundExtension) {
                            if (file.size > MAX_URKUND_FILE_SIZE_MB * 1024 * 1024) {
                                throw new Error("Filer av denna typ f\u00E5r inte vara st\u00F6rre \u00E4n " + MAX_URKUND_FILE_SIZE_MB + " MB");
                            }
                        }
                        else {
                            if (file.size > MAX_NONURKUND_FILE_SIZE_MB * 1024 * 1024) {
                                throw new Error("Filen f\u00E5r inte vara st\u00F6rre \u00E4n " + MAX_NONURKUND_FILE_SIZE_MB + " MB");
                            }
                        }
                        lowerFilename = file.name.toLowerCase();
                        if (!ALLOWED_EXTENSIONS.some(function (ext) { return lowerFilename.endsWith(ext); })) {
                            throw new Error("Filens \u00E4ndelse m\u00E5ste vara " + ALLOWED_EXTENSIONS.join(' / '));
                        }
                        body = new FormData();
                        body.append('files', file);
                        queryParams = {
                            userDisplayName: _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.displayName,
                            verifyWithUrkund: sendToUrkund
                        };
                        if (driveFile) {
                            queryParams = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, queryParams, { driveFileId: driveFile.fileId, driveFileUrl: driveFile.url, driveFileIconUrl: driveFile.iconUrl });
                        }
                        return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].kedBackendClient.http.fetch("assignments/" + school + "/" + courseId + "/" + taskId + "/" + mail, 'put', {}, queryParams, {
                                body: body
                            })];
                    case 1:
                        res = _d.sent();
                        if (!(res.status !== 200)) return [3 /*break*/, 3];
                        _b = kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["HttpError"].bind;
                        _c = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_b.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["HttpError"], _c.concat([_d.sent()])))();
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    TaskAssignments.prototype.download = function (file) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, blob, err_2;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _c.trys.push([0, 5, , 6]);
                        return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].kedBackendClient.http.fetch(file.mediaLink, 'get', {})];
                    case 1:
                        res = _c.sent();
                        if (!(res.status >= 400)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.blob()];
                    case 4:
                        blob = _c.sent();
                        downloadjs__WEBPACK_IMPORTED_MODULE_7___default()(blob, file.filename, file.contentType);
                        return [3 /*break*/, 6];
                    case 5:
                        err_2 = _c.sent();
                        this.setState({ error: "Kunde inte ladda ned filen. " + (err_2.message || err_2) });
                        console.error(err_2);
                        return [3 /*break*/, 6];
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    TaskAssignments.prototype.delete = function (url) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, err_3;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _c.trys.push([0, 6, , 7]);
                        return [4 /*yield*/, this.setStatePromised(function (_a) {
                                var assignments = _a.assignments;
                                return ({ assignments: assignments.map(function (a) { return a.mediaLink === url ? tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, a, { metadata: tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, a.metadata, { $meta: 'delete' }) }) : tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, a); }) });
                            })];
                    case 1:
                        _c.sent();
                        return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].kedBackendClient.http.fetch(url, 'delete', {})];
                    case 2:
                        res = _c.sent();
                        if (!(res.status >= 400)) return [3 /*break*/, 4];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 3: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["HttpError"], _b.concat([_c.sent()])))();
                    case 4: return [4 /*yield*/, this.load()];
                    case 5:
                        _c.sent();
                        return [3 /*break*/, 7];
                    case 6:
                        err_3 = _c.sent();
                        this.setState({ error: "Kunde inte ta bort filen. " + (err_3.message || err_3) });
                        console.error(err_3);
                        return [3 /*break*/, 7];
                    case 7: return [2 /*return*/];
                }
            });
        });
    };
    TaskAssignments.prototype.render = function () {
        var _this = this;
        var _a = this.props, courseId = _a.courseId, taskId = _a.taskId, school = _a.school, courseStudyGroups = _a.courseStudyGroups, taskDeadline = _a.taskDeadline;
        var _b = this.state, loading = _b.loading, assignments = _b.assignments, error = _b.error, uploadingFile = _b.uploadingFile;
        var teacherAtThisSchool = Object(_access_control__WEBPACK_IMPORTED_MODULE_6__["isTeacherAtSchool"])(_globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser, school);
        var files = tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](assignments);
        var showGooglePicker = _features__WEBPACK_IMPORTED_MODULE_11__["features"].picker;
        if (uploadingFile) {
            var virtualFile_1 = {
                school: school,
                courseId: courseId,
                taskId: taskId,
                filename: uploadingFile.name,
                size: uploadingFile.size,
                user: _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.mail,
                contentType: uploadingFile.type,
                uploadDate: Date.now(),
                mediaLink: "assignments/" + school + "/" + courseId + "/" + taskId + "/" + _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.mail + "/" + uploadingFile.name,
                metadata: {
                    $meta: 'add',
                    userDisplayName: _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.displayName
                }
            };
            files = files.filter(function (file) { return file.mediaLink !== virtualFile_1.mediaLink; });
            files = tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](files, [virtualFile_1]);
        }
        files = files.sort(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["compareProps"])([
            "metadata.userDisplayName",
            "filename",
            "uploadDate"
        ], ["sv", "en"], { sensitivity: 'base' }));
        //groupping files by study group
        var filesStudyGroups = {};
        var groupByStudyGroup = courseStudyGroups && courseStudyGroups.length > 0 && _features__WEBPACK_IMPORTED_MODULE_11__["features"].studyGroups && teacherAtThisSchool;
        courseStudyGroups && Object.keys(_apis_mock_mock_classroom_data__WEBPACK_IMPORTED_MODULE_13__["mockTuitionStudents"])
            .filter(function (sg) { return courseStudyGroups && courseStudyGroups.includes(sg); })
            .forEach(function (courseSg) {
            //compute study groups files
            var sgFiles = files.filter(function (file) { return _apis_mock_mock_classroom_data__WEBPACK_IMPORTED_MODULE_13__["mockTuitionStudents"][courseSg].find(function (c) { return c.studentEmailAddress == file.user; }); });
            // compute users that have not submitted their assignments
            var notSubmittedUsers = _apis_mock_mock_classroom_data__WEBPACK_IMPORTED_MODULE_13__["mockTuitionStudents"][courseSg].filter(function (cs) { return !sgFiles.find(function (f) { return f.user === cs.studentEmailAddress; }); })
                .map(function (ns) { return { firstName: ns.studentFirstName, email: ns.studentEmailAddress }; });
            filesStudyGroups[courseSg] = { assignments: sgFiles, notSubmittedUsers: notSubmittedUsers };
        });
        return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { onDragOver: function (ev) { return _this.onDrag(ev); }, onDrop: function (ev) {
                ev.stopPropagation();
                ev.preventDefault();
                _this.verifyAndUpload(ev.dataTransfer.files[0]);
            } },
            error ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { className: "error" }, error)) : undefined,
            groupByStudyGroup ? Object.keys(filesStudyGroups).map(function (key) {
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_15__["OpenCloseBox"], { headerOpen: false, title: key, key: key },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_task_assignments_table__WEBPACK_IMPORTED_MODULE_14__["TaskAssignmentsTable"], { loading: loading, files: filesStudyGroups[key].assignments, usersNotHandedInDocs: filesStudyGroups[key].notSubmittedUsers, school: school, download: _this.download, refreshAssignment: _this.refreshAssignment, delete: _this.delete, taskDeadline: taskDeadline, teacherAtThisSchool: true }));
            }) :
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_task_assignments_table__WEBPACK_IMPORTED_MODULE_14__["TaskAssignmentsTable"], { loading: loading, files: files, school: school, download: this.download, refreshAssignment: this.refreshAssignment, delete: this.delete, teacherAtThisSchool: true }),
            Object(_course_builder_ks_logic_is_employee__WEBPACK_IMPORTED_MODULE_8__["isEmployee"])() ? undefined : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "drop-zone task-assignment-drop-zone" },
                    "Droppa ditt f\u00E4rdiga arbete h\u00E4r.",
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null),
                    "Det g\u00E5r ocks\u00E5 bra att anv\u00E4nda bl\u00E4ddra-knappen nedan."),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { type: "file", onChange: function (ev) { return _this.verifyAndUpload(ev.target.files[0]); } }),
                showGooglePicker && react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_apis_buttons__WEBPACK_IMPORTED_MODULE_10__["DriveButton"], { label: "H\u00E4mta fr\u00E5n Google Drive", action: function () {
                        var picker = new _apis_google_picker__WEBPACK_IMPORTED_MODULE_9__["GooglePicker"]({ upload: true });
                        var drive = new _apis_google_drive__WEBPACK_IMPORTED_MODULE_12__["GoogleDrive"]();
                        picker.show().then(function (files) {
                            var pickedFile = files[0];
                            if (!pickedFile)
                                return;
                            drive.downloadFile({
                                file: pickedFile,
                                limitSize: MAX_NONURKUND_FILE_SIZE_MB
                            }).then(function (file) { return _this.verifyAndUpload(file, pickedFile); });
                        });
                    } }))));
    };
    return TaskAssignments;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/course-viewer/course-page/urkund-utils.ts":
/*!******************************************************************!*\
  !*** ./src/components/course-viewer/course-page/urkund-utils.ts ***!
  \******************************************************************/
/*! exports provided: getUrkundStatusClass, getUrkundHoverText, getUrkundSignificanceClass */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getUrkundStatusClass", function() { return getUrkundStatusClass; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getUrkundHoverText", function() { return getUrkundHoverText; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getUrkundSignificanceClass", function() { return getUrkundSignificanceClass; });
function getUrkundStatusClass(res) {
    if (!res || !res.Status) {
        return null;
    }
    else
        switch (res.Status.State) {
            case 'Error':
                return "urkund-status urkund-status-error";
            case 'Submitted':
                return "urkund-status urkund-status-submitted";
            case 'Accepted':
                return "urkund-status urkund-status-accepted";
            case 'Analyzed':
                return "urkund-status urkund-status-analyzed";
        }
}
function getUrkundHoverText(res) {
    if (!res || !res.Status)
        return null;
    switch (res.Status.State) {
        case 'Error':
            return res.ExternalId ?
                "Kunde inte tas emot av urkund. Felkod: " + res.Status.ErrorCode + "\n" +
                    ("External ID: " + res.ExternalId + "\nFelmeddelande: " + res.Status.Message)
                :
                    res.Status.Message;
        case 'Submitted':
            return "Filen \u00E4r uppladdad till Urkund. Klicka f\u00F6r att uppdatera status.";
        case 'Accepted':
            return "Filen analyseras fortfarande av Urkund. Klicka f\u00F6r att uppdatera status.";
        case 'Analyzed':
            return "Rapport skapad. Klicka f\u00F6r att \u00F6ppna rapporten i nytt f\u00F6nster";
    }
}
function getUrkundSignificanceClass(res) {
    if (!res || !res.Status)
        return '';
    switch (res.Status.State) {
        case 'Error': return 'urkund-significance-error';
        case 'Submitted': return 'urkund-significance-submitted';
        case 'Accepted': return 'urkund-significance-accepted';
    }
    var report = res.Report;
    if (!report) {
        return "";
    }
    if (report.Significance < 1)
        //return `${cdn}/images/urkund/0.gif`;
        return "urkund-significance urkund-significance-0";
    if (report.Significance < 10)
        //return `${cdn}/images/urkund/1.gif`;
        return "urkund-significance urkund-significance-1";
    if (report.Significance < 25)
        return "urkund-significance urkund-significance-2";
    //return `${cdn}/images/urkund/2.gif`;
    if (report.Significance < 40)
        return "urkund-significance urkund-significance-3";
    //return `${cdn}/images/urkund/3.gif`;
    if (report.Significance < 55)
        return "urkund-significance urkund-significance-4";
    //return `${cdn}/images/urkund/4.gif`;
    if (report.Significance < 70)
        return "urkund-significance urkund-significance-5";
    //return `${cdn}/images/urkund/5.gif`;
    if (report.Significance < 85)
        return "urkund-significance urkund-significance-6";
    //return `${cdn}/images/urkund/6.gif`;
    if (report.Significance < 99.9)
        return "urkund-significance urkund-significance-7";
    //return `${cdn}/images/urkund/7.gif`;
    if (report.Significance >= 99.9)
        return "urkund-significance urkund-significance-8";
    //return `${cdn}/images/urkund/8.gif`;
    return "";
}


/***/ }),

/***/ "./src/components/course-viewer/subcomponents/abilities-box.tsx":
/*!**********************************************************************!*\
  !*** ./src/components/course-viewer/subcomponents/abilities-box.tsx ***!
  \**********************************************************************/
/*! exports provided: AbilitiesBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AbilitiesBox", function() { return AbilitiesBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var AbilitiesBox = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](AbilitiesBox, _super);
    function AbilitiesBox(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            headerOpen: props.headerOpen || false
        };
        return _this;
    }
    AbilitiesBox.prototype.render = function () {
        var _this = this;
        var _a = this.props, title = _a.title, subTitle = _a.subTitle, abilities = _a.abilities, className = _a.className;
        var headerOpen = this.state.headerOpen;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: (className || '') + " openClose" + (headerOpen ? " open" : "") },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "openHeader", onClick: function () { return _this.setState({ headerOpen: !_this.state.headerOpen }); } },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, title)),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "openContent" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "abilityList" },
                    subTitle && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "contentHeader" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h5", null, subTitle)),
                    abilities.map(function (a) {
                        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: a.id, className: "contentPart" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "contentText" },
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { dangerouslySetInnerHTML: { __html: a.name } })));
                    }))));
    };
    return AbilitiesBox;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/course-viewer/subcomponents/central-content-box.tsx":
/*!****************************************************************************!*\
  !*** ./src/components/course-viewer/subcomponents/central-content-box.tsx ***!
  \****************************************************************************/
/*! exports provided: CentralContentBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CentralContentBox", function() { return CentralContentBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var CentralContentBox = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](CentralContentBox, _super);
    function CentralContentBox(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            headerOpen: props.headerOpen || false
        };
        return _this;
    }
    CentralContentBox.prototype.render = function () {
        var _this = this;
        var _a = this.props, title = _a.title, subTitle = _a.subTitle, centralContent = _a.centralContent, className = _a.className;
        var headerOpen = this.state.headerOpen;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: (className || '') + " openClose" + (headerOpen ? " open" : "") },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "openHeader", onClick: function () { return _this.setState({ headerOpen: !_this.state.headerOpen }); } },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, title)),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "openContent" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "abilityList" },
                    subTitle && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "contentHeader" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h5", null, subTitle)),
                    centralContent.map(function (cc) {
                        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: cc.id, className: "contentPart" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "contentText" },
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { dangerouslySetInnerHTML: { __html: cc.name } })));
                    }))));
    };
    return CentralContentBox;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/course-viewer/subcomponents/confirmation.tsx":
/*!*********************************************************************!*\
  !*** ./src/components/course-viewer/subcomponents/confirmation.tsx ***!
  \*********************************************************************/
/*! exports provided: Confirmation */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Confirmation", function() { return Confirmation; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

function Confirmation(props) {
    return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "confirmation-box " + props.className + (props.visible ? " visible" : "") },
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("p", null, props.text),
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("button", { onClick: function () { return props.onConfirm(); } }, "OK"),
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("button", { onClick: function () { return props.onCancel(); } }, "Avbryt"));
}


/***/ }),

/***/ "./src/components/course-viewer/subcomponents/knowledge-requirements-table.tsx":
/*!*************************************************************************************!*\
  !*** ./src/components/course-viewer/subcomponents/knowledge-requirements-table.tsx ***!
  \*************************************************************************************/
/*! exports provided: KnowledgeRequirementsBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KnowledgeRequirementsBox", function() { return KnowledgeRequirementsBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");




var KnowledgeRequirementsBox = function (props) {
    var title = props.title, className = props.className, headerOpen = props.headerOpen, idsToSubjectMap = props.idsToSubjectMap, requirements = props.requirements;
    if (!idsToSubjectMap) {
        // Normal case
        return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_2__["OpenCloseBox"], { title: react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, title), className: className, headerOpen: headerOpen },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](KnowledgeRequirementsTable, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, props)))));
    }
    // Special case: Requirements that spans multiple subjects:
    var requirementsPerSubjectLookup = idsToSubjectMap ?
        Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["arrayToLookup"])(requirements, function (r) { return idsToSubjectMap[r.id] || ""; }) : { "": requirements };
    var reqsPerSubject = Object.keys(requirementsPerSubjectLookup)
        .map(function (subject) { return ({ subject: subject, requirements: requirementsPerSubjectLookup[subject] }); });
    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_2__["OpenCloseBox"], { title: react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, title), className: className, headerOpen: headerOpen }, reqsPerSubject.map(function (_a) {
        var subject = _a.subject, requirements = _a.requirements;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](KnowledgeRequirementsTable, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, props, { key: subject, heading: subject, requirements: requirements })));
    }));
};
var KnowledgeRequirementsTable = function (_a) {
    var requirements = _a.requirements, includedIds = _a.includedIds, explainedRequirements = _a.explainedRequirements, heading = _a.heading;
    var columns = ["E", "C", "A"];
    var rows = [];
    var reqs = requirements.slice();
    var row = null;
    while (true) {
        row = columns.map(function (grade) {
            var pNext = reqs.findIndex(function (r) { return r.gradeStep.toUpperCase() === grade; });
            if (pNext < 0)
                return null;
            var rv = reqs[pNext];
            reqs.splice(pNext, 1);
            return includedIds ?
                (includedIds[rv.id] ? rv : undefined) :
                rv;
        });
        if (row.every(function (r) { return r === null; }))
            break;
        if (!row.every(function (r) { return !r; })) {
            rows.push(row);
        }
    }
    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
        heading && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h4", null, heading),
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("table", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("thead", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null, columns.map(function (c) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { key: c }, c); }))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tbody", null, rows.map(function (row, i) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], { key: i },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", { key: i }, row.map(function (column, j) {
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { key: j, dangerouslySetInnerHTML: { __html: column ? column.name : "" } });
                })),
                explainedRequirements && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null, row.map(function (column, j) {
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { key: j, className: "explained-requirement" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null, (column && explainedRequirements[column.id]) || ""));
                }))); }))));
};


/***/ }),

/***/ "./src/components/course-viewer/subcomponents/task-list.tsx":
/*!******************************************************************!*\
  !*** ./src/components/course-viewer/subcomponents/task-list.tsx ***!
  \******************************************************************/
/*! exports provided: TaskList */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskList", function() { return TaskList; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _repos_user_tasks_repo__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../repos/user-tasks-repo */ "./src/repos/user-tasks-repo.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _confirmation__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./confirmation */ "./src/components/course-viewer/subcomponents/confirmation.tsx");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");









var TaskList = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](TaskList, _super);
    function TaskList(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            userTasks: [],
            weekDate: Date.now(),
            confirmations: []
        };
        _this.onChange = _this.onChange.bind(_this);
        return _this;
    }
    TaskList.prototype.onChange = function (userTasks, persisted) {
        if (persisted.weekDate !== this.state.weekDate) {
            this.setState({
                confirmations: []
            });
        }
        this.setState({
            userTasks: userTasks,
            weekDate: persisted.weekDate
        });
    };
    TaskList.prototype.componentDidMount = function () {
        _repos_user_tasks_repo__WEBPACK_IMPORTED_MODULE_5__["userTasksRepo"].subscribe(this.onChange);
    };
    TaskList.prototype.componentWillUnmount = function () {
        _repos_user_tasks_repo__WEBPACK_IMPORTED_MODULE_5__["userTasksRepo"].unsubscribe(this.onChange);
    };
    TaskList.prototype.toggleTask = function (learningTask) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var userTasks, weekDate, latestTimeStamp, userTask;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        userTasks = this.state.userTasks.filter(function (ut) {
                            return learningTask.task ?
                                ut.task && ut.task.some(function (t) { return t.id === learningTask.id; }) :
                                ut.siteVisionPageId === learningTask.id;
                        });
                        weekDate = this.state.weekDate;
                        if (!(userTasks.length === 0)) return [3 /*break*/, 2];
                        latestTimeStamp = Math.max.apply(Math.max, [weekDate].concat(this.state.userTasks.map(function (t) { return t.dateTime; })));
                        userTask = {
                            id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_4__["createUUID"])(),
                            courseName: learningTask.courseName,
                            dateTime: latestTimeStamp + 2000,
                            learningGoal: learningTask.learningGoal,
                            name: learningTask.name,
                            url: learningTask.url,
                            acl: [
                                // Default ACL: Let user self have full control over this item:
                                new kedbackend_client__WEBPACK_IMPORTED_MODULE_4__["DocumentAccess"]("email", _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.mail, "S"),
                                // Additional ACL: Let employees on same school have read access to it.
                                // This currently only applies to tasks that refer to course tasks (not custom tasks!)
                                new kedbackend_client__WEBPACK_IMPORTED_MODULE_4__["DocumentAccess"]("schoolRole", _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.school + "/EMPLOYEE", "R")
                            ].map(function (ac) { return ac.toString(); })
                        };
                        if (learningTask.task && learningTask.task.deadline) {
                            userTask.deadline = learningTask.task.deadline;
                        }
                        if (learningTask.task) {
                            userTask.task = [learningTask.task];
                            if (learningTask.course) {
                                userTask.course = [learningTask.course];
                            }
                            else if (learningTask.courseInfo) {
                                userTask.courseInfo = learningTask.courseInfo;
                            }
                        }
                        else {
                            userTask.siteVisionPageId = learningTask.id;
                        }
                        if (learningTask.step) {
                            userTask.step = learningTask.step;
                        }
                        return [4 /*yield*/, Promise.all([
                                _repos_user_tasks_repo__WEBPACK_IMPORTED_MODULE_5__["userTasksRepo"].setWeekPlannerBoxOpen(learningTask.courseName, true),
                                _repos_user_tasks_repo__WEBPACK_IMPORTED_MODULE_5__["userTasksRepo"].insert([userTask])
                            ])];
                    case 1:
                        _a.sent();
                        return [3 /*break*/, 4];
                    case 2: 
                    // Already present in weekplanner. It's time to delete those that matched us.
                    return [4 /*yield*/, _repos_user_tasks_repo__WEBPACK_IMPORTED_MODULE_5__["userTasksRepo"].delete(userTasks.map(function (t) { return t.id; }))];
                    case 3:
                        // Already present in weekplanner. It's time to delete those that matched us.
                        _a.sent();
                        _a.label = 4;
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    TaskList.prototype.render = function () {
        var _this = this;
        var intl = this.context.intl;
        var learningTasks = this.props.learningTasks;
        var userTasks = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["arrayToMap"])(this.state.userTasks, function (ut) { return ut.task && ut.task.length > 0 ?
            ut.task.map(function (t) { return t.id; })[0] : // course-builder tasks looked up by id
            ut.siteVisionPageId ? ut.siteVisionPageId : // non-course-builder tasks
                ut.url; });
        var confirmations = this.state.confirmations;
        var weekPlannerWeek = moment__WEBPACK_IMPORTED_MODULE_3___default()(this.state.weekDate).week();
        var currentWeek = moment__WEBPACK_IMPORTED_MODULE_3___default()().week();
        var forWeekString = weekPlannerWeek === currentWeek ? "" :
            weekPlannerWeek === currentWeek + 1 ? intl.formatMessage({ id: "taskList.nextWeekTask", defaultMessage: "fr nsta vecka (v{week})" }, { week: weekPlannerWeek }) :
                weekPlannerWeek === currentWeek - 1 ? intl.formatMessage({ id: "taskList.lastWeekTask", defaultMessage: "fr frra veckan (v{week})" }, { week: weekPlannerWeek }) :
                    intl.formatMessage({ id: "taskList.currentWeekTask", defaultMessage: "fr vecka {week}" }, { week: weekPlannerWeek });
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "taskContainer" }, learningTasks.map(function (learningTask, idx) {
            var taskLookupId = learningTask.id;
            var userTask = userTasks[taskLookupId] || { $meta: 'deleted' }; // No exist = $meta: 'deleted'
            var isWorking = userTask.$meta === 'adding' || userTask.$meta === 'deleting';
            var selected = userTask.$meta !== 'deleted' && userTask.$meta !== 'deleting';
            var describedAction = selected ?
                intl.formatMessage({ id: "taskList.removeTaskFromWeeklyPlanning", defaultMessage: "Ta bort uppgiften frn egen veckoplanering {week}" }, { week: forWeekString }) :
                intl.formatMessage({ id: "taskList.addTaskToWeeklyPlanning", defaultMessage: "Lgg till uppgiften i egen veckoplanering {week}" }, { week: forWeekString });
            var confirmationVisible = confirmations.some(function (tid) { return taskLookupId === tid; });
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: learningTask.id },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: taskLookupId, className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "selectedBox" + (selected ? ' selected' : ''), style: isWorking ? { opacity: 0.5 } : {}, onClick: function () { return !isWorking && weekPlannerWeek === currentWeek ?
                                _this.toggleTask(learningTask) :
                                confirmationVisible ?
                                    _this.setState({ confirmations: confirmations.filter(function (tid) { return tid !== taskLookupId; }) }) :
                                    _this.setState({ confirmations: tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](confirmations).concat(taskLookupId) }); }, title: describedAction })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: learningTask.url }, learningTask.name))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_confirmation__WEBPACK_IMPORTED_MODULE_7__["Confirmation"], { visible: confirmationVisible, text: describedAction, onConfirm: function () {
                        _this.toggleTask(learningTask);
                        _this.setState({ confirmations: confirmations.filter(function (tid) { return tid !== taskLookupId; }) });
                    }, onCancel: function () {
                        _this.setState({ confirmations: confirmations.filter(function (tid) { return tid !== taskLookupId; }) });
                    } }));
        }));
    };
    TaskList.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_8__["LanguageContext"];
    return TaskList;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/utility-components/LanguageContext.tsx":
/*!***************************************************************!*\
  !*** ./src/components/utility-components/LanguageContext.tsx ***!
  \***************************************************************/
/*! exports provided: LanguageContext */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LanguageContext", function() { return LanguageContext; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var LanguageContext = react__WEBPACK_IMPORTED_MODULE_0__["createContext"]({ intl: null });


/***/ }),

/***/ "./src/components/utility-components/SetupLanguageIntl.tsx":
/*!*****************************************************************!*\
  !*** ./src/components/utility-components/SetupLanguageIntl.tsx ***!
  \*****************************************************************/
/*! exports provided: setupIntl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setupIntl", function() { return setupIntl; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");
/* harmony import */ var react_intl_locale_data_en__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-intl/locale-data/en */ "./node_modules/react-intl/locale-data/en.js");
/* harmony import */ var react_intl_locale_data_en__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_intl_locale_data_en__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_intl_locale_data_sv__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-intl/locale-data/sv */ "./node_modules/react-intl/locale-data/sv.js");
/* harmony import */ var react_intl_locale_data_sv__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_intl_locale_data_sv__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _translations_sv_json__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../translations/sv.json */ "./src/translations/sv.json");
var _translations_sv_json__WEBPACK_IMPORTED_MODULE_4___namespace = /*#__PURE__*/__webpack_require__.t(/*! ../../translations/sv.json */ "./src/translations/sv.json", 1);
/* harmony import */ var _translations_en_json__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../translations/en.json */ "./src/translations/en.json");
var _translations_en_json__WEBPACK_IMPORTED_MODULE_5___namespace = /*#__PURE__*/__webpack_require__.t(/*! ../../translations/en.json */ "./src/translations/en.json", 1);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_8__);









var setupIntl = function (Component) {
    return /** @class */ (function (_super) {
        tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](_SetupLanguageIntl, _super);
        function _SetupLanguageIntl(props) {
            var _this = _super.call(this, props) || this;
            Object(react_intl__WEBPACK_IMPORTED_MODULE_1__["addLocaleData"])(tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](react_intl_locale_data_en__WEBPACK_IMPORTED_MODULE_2___default.a, react_intl_locale_data_sv__WEBPACK_IMPORTED_MODULE_3___default.a));
            _this.messages = {
                'sv': _translations_sv_json__WEBPACK_IMPORTED_MODULE_4__,
                'en': _translations_en_json__WEBPACK_IMPORTED_MODULE_5__
            };
            moment__WEBPACK_IMPORTED_MODULE_8___default()().locale(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_7__["default"].KED_LOCALE);
            return _this;
        }
        _SetupLanguageIntl.prototype.render = function () {
            return react__WEBPACK_IMPORTED_MODULE_6__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_1__["IntlProvider"], { locale: _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_7__["default"].KED_LOCALE, messages: this.messages[_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_7__["default"].KED_LOCALE] },
                react__WEBPACK_IMPORTED_MODULE_6__["createElement"](Component, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.props)));
        };
        return _SetupLanguageIntl;
    }(react__WEBPACK_IMPORTED_MODULE_6__["Component"]));
};


/***/ }),

/***/ "./src/components/utility-components/align-horizontal.tsx":
/*!****************************************************************!*\
  !*** ./src/components/utility-components/align-horizontal.tsx ***!
  \****************************************************************/
/*! exports provided: AlignHorizontal */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AlignHorizontal", function() { return AlignHorizontal; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var AlignHorizontal = function (_a) {
    var className = _a.className, classNames = _a.classNames, children = _a.children;
    return (react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"]((classNames || []), (className ? [className] : []), ["align-horizontal"]).join(' ') }, children));
};


/***/ }),

/***/ "./src/components/utility-components/checklist.tsx":
/*!*********************************************************!*\
  !*** ./src/components/utility-components/checklist.tsx ***!
  \*********************************************************/
/*! exports provided: Checklist */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Checklist", function() { return Checklist; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var Checklist = function (_a) {
    var available = _a.available, selected = _a.selected, onChange = _a.onChange;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "taskContainer" }, available.map(function (_a) {
        var key = _a.key, name = _a.name;
        var checked = selected.includes(key);
        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { key: key, className: "align-horizontal" },
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "horizontalItem top", onClick: function () {
                    return onChange(checked ?
                        selected.filter(function (k) { return k != key; }) :
                        selected.concat(key), key, checked);
                } },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "checkBox" + (checked ? " checked" : "") })),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "horizontalItem top" }, name));
    }));
};


/***/ }),

/***/ "./src/components/utility-components/dialogs.tsx":
/*!*******************************************************!*\
  !*** ./src/components/utility-components/dialogs.tsx ***!
  \*******************************************************/
/*! exports provided: Dialogs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Dialogs", function() { return Dialogs; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _course_builder_sub_components_remove_item__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../course-builder/sub-components/remove-item */ "./src/components/course-builder/sub-components/remove-item.tsx");
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-dom */ "react-dom");
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jquery */ "jquery");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_4__);





var Dialogs = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Dialogs, _super);
    function Dialogs(props) {
        return _super.call(this, props) || this;
    }
    Dialogs.prototype.componentDidUpdate = function (prevProps) {
        if (this.lastDiv !== null && prevProps.dialogs.length > this.props.dialogs.length) {
            // A dialog was closed. Now focus the last dialog:
            jquery__WEBPACK_IMPORTED_MODULE_4___default()(Object(react_dom__WEBPACK_IMPORTED_MODULE_3__["findDOMNode"])(this.lastDiv)).find(':input').first().focus();
        }
    };
    Dialogs.prototype.render = function () {
        var _this = this;
        this.lastDiv = null;
        var _a = this.props, dialogs = _a.dialogs, popDialog = _a.popDialog;
        jquery__WEBPACK_IMPORTED_MODULE_4___default()('body').attr('aria-disabled', dialogs.length > 0);
        jquery__WEBPACK_IMPORTED_MODULE_4___default()('body').css('overflow', dialogs.length > 0 ? 'hidden' : 'auto');
        return dialogs.length > 0 && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null, dialogs.map(function (dialog, idx) {
            var div;
            function onKeyPress(ev) {
                if (ev.which === 13 && (!ev.target || ev.target.tagName !== 'TEXTAREA')) {
                    jquery__WEBPACK_IMPORTED_MODULE_4___default()(Object(react_dom__WEBPACK_IMPORTED_MODULE_3__["findDOMNode"])(div)).find('.btn-default').click();
                }
                ev.stopPropagation();
            }
            function onKeyDown(ev) {
                if (ev.which === 27) { // Escape
                    popDialog();
                    ev.stopPropagation();
                    return;
                }
                if (ev.which === 83 && (ev.ctrlKey || ev.metaKey)) { // CTRL-S
                    var domNode = Object(react_dom__WEBPACK_IMPORTED_MODULE_3__["findDOMNode"])(div);
                    ev.preventDefault();
                    var defaultButton = jquery__WEBPACK_IMPORTED_MODULE_4___default()(domNode).find('.btn-default');
                    defaultButton.click();
                    ev.stopPropagation();
                }
            }
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: idx },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "darken" }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "modal-page-wrap" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "modal-page", ref: function (elem) {
                            div = elem;
                            if (idx === dialogs.length - 1)
                                _this.lastDiv = elem;
                        }, tabIndex: 0, "aria-disabled": idx < dialogs.length - 1, onKeyPress: onKeyPress, onKeyDown: onKeyDown },
                        dialog,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_remove_item__WEBPACK_IMPORTED_MODULE_2__["RemoveItem"], { onClick: popDialog }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "stopFloats" }))));
        }));
    };
    return Dialogs;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/utility-components/form-field-text-input.tsx":
/*!*********************************************************************!*\
  !*** ./src/components/utility-components/form-field-text-input.tsx ***!
  \*********************************************************************/
/*! exports provided: TextInput */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TextInput", function() { return TextInput; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _form_field__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./form-field */ "./src/components/utility-components/form-field.tsx");



var TextInput = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](TextInput, _super);
    function TextInput(props) {
        return _super.call(this, props) || this;
    }
    TextInput.prototype.render = function () {
        var _this = this;
        return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_form_field__WEBPACK_IMPORTED_MODULE_2__["FormField"], { label: this.props.label },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { type: "text", autoFocus: this.props.autoFocus, id: this.props.id, size: 35, value: this.props.value, onChange: function (ev) { return _this.props.onChange(ev.target.value); }, placeholder: this.props.placeholder }))));
    };
    return TextInput;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/utility-components/form-field-textarea.tsx":
/*!*******************************************************************!*\
  !*** ./src/components/utility-components/form-field-textarea.tsx ***!
  \*******************************************************************/
/*! exports provided: TextAreaFormField */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TextAreaFormField", function() { return TextAreaFormField; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _form_field__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./form-field */ "./src/components/utility-components/form-field.tsx");



var TextAreaFormField = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](TextAreaFormField, _super);
    function TextAreaFormField(props) {
        return _super.call(this, props) || this;
    }
    TextAreaFormField.prototype.render = function () {
        var _this = this;
        return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_form_field__WEBPACK_IMPORTED_MODULE_2__["FormField"], { label: this.props.label, id: this.props.id },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("textarea", { autoFocus: this.props.autoFocus, id: this.props.id, cols: 35, rows: this.props.rows || 5, value: this.props.value, onChange: function (ev) { return _this.props.onChange(ev.target.value); }, placeholder: this.props.placeholder })),
                !!this.props.children && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem" }, this.props.children))));
    };
    return TextAreaFormField;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/utility-components/form-field.tsx":
/*!**********************************************************!*\
  !*** ./src/components/utility-components/form-field.tsx ***!
  \**********************************************************/
/*! exports provided: FormField */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FormField", function() { return FormField; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


function findId(node) {
    var recucheck = new Set();
    return (function findId(node) {
        if (typeof node === 'string')
            return null;
        if (recucheck.has(node)) {
            return;
        }
        recucheck.add(node);
        if (node.props) {
            if (node.props.id)
                return node.props.id;
            if (node.props.children) {
                return findId(node.props.children);
            }
            return;
        }
        if (node.length) {
            for (var i = 0; i < node.length; ++i) {
                var child = node[i];
                if (child) {
                    var childId = findId(child);
                    if (childId)
                        return childId;
                    //console.log(child);
                }
            }
        }
    })(node);
}
var FormField = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](FormField, _super);
    function FormField(props) {
        return _super.call(this, props) || this;
    }
    FormField.prototype.render = function () {
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("label", { className: "kclabel", htmlFor: this.props.id || findId(this.props.children) }, this.props.label),
            this.props.children);
    };
    return FormField;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/utility-components/horizontal-item.tsx":
/*!***************************************************************!*\
  !*** ./src/components/utility-components/horizontal-item.tsx ***!
  \***************************************************************/
/*! exports provided: HorizontalItem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HorizontalItem", function() { return HorizontalItem; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var HorizontalItem = function (_a) {
    var className = _a.className, classNames = _a.classNames, children = _a.children;
    return (react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"]((classNames || []), (className ? [className] : []), ["horizontalItem"]).join(' ') }, children));
};


/***/ }),

/***/ "./src/components/utility-components/lazy-content.tsx":
/*!************************************************************!*\
  !*** ./src/components/utility-components/lazy-content.tsx ***!
  \************************************************************/
/*! exports provided: LazyContent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LazyContent", function() { return LazyContent; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _live_query_view__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./live-query-view */ "./src/components/utility-components/live-query-view.tsx");


function LazyContent(_a) {
    var children = _a.children, spinner = _a.spinner, onError = _a.onError, noError = _a.noError;
    return react__WEBPACK_IMPORTED_MODULE_0__["createElement"](_live_query_view__WEBPACK_IMPORTED_MODULE_1__["LiveQueryView"], { props: children, spinner: spinner, noError: noError, onError: onError, fn: function (observable) { return observable; } });
}


/***/ }),

/***/ "./src/components/utility-components/live-query-view.tsx":
/*!***************************************************************!*\
  !*** ./src/components/utility-components/live-query-view.tsx ***!
  \***************************************************************/
/*! exports provided: liveQueryView, LiveQueryView */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "liveQueryView", function() { return liveQueryView; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LiveQueryView", function() { return LiveQueryView; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/utils */ "./src/utils/utils.ts");



function liveQueryView(fn, options) {
    return function (props) {
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](LiveQueryView, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({ props: props, fn: fn }, options));
    };
}
var LiveQueryView = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](LiveQueryView, _super);
    function LiveQueryView(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            result: null,
            isLoading: true
        };
        return _this;
    }
    LiveQueryView.prototype.componentDidMount = function () {
        this.subscribe();
    };
    LiveQueryView.prototype.componentWillUnmount = function () {
        this.unsubscribe();
    };
    LiveQueryView.prototype.shouldComponentUpdate = function (nextProps, nextState) {
        return (this.state.error !== nextState.error ||
            this.state.isLoading !== nextState.isLoading ||
            this.state.result !== nextState.result ||
            !Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["shallowEquals"])(nextProps.props, this.props.props));
    };
    LiveQueryView.prototype.componentDidUpdate = function (prevProps) {
        if (!Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["shallowEquals"])(prevProps.props, this.props.props)) {
            this.unsubscribe();
            this.subscribe();
        }
    };
    LiveQueryView.prototype.subscribe = function () {
        var _this = this;
        this.setState({ isLoading: true });
        this.subscription = this.props.fn(this.props.props).subscribe(function (result, error) { return _this.setState({
            result: result,
            error: error,
            isLoading: false
        }); });
    };
    LiveQueryView.prototype.unsubscribe = function () {
        if (this.subscription) {
            this.subscription.unsubscribe();
            this.subscription = null;
        }
    };
    LiveQueryView.prototype.render = function () {
        var _a = this.state, result = _a.result, error = _a.error, isLoading = _a.isLoading;
        var _b = this.props, spinner = _b.spinner, onError = _b.onError, noError = _b.noError;
        //if (!isLoading && !result) debugger;
        return error ?
            noError ? "" : onError ? onError(error) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                "Error: ",
                error.message) :
            isLoading ?
                spinner ? spinner : "" :
                result === undefined ? "" : result;
    };
    return LiveQueryView;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/utility-components/loading-indicator.tsx":
/*!*****************************************************************!*\
  !*** ./src/components/utility-components/loading-indicator.tsx ***!
  \*****************************************************************/
/*! exports provided: LoadingIndicator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LoadingIndicator", function() { return LoadingIndicator; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _live_query_view__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./live-query-view */ "./src/components/utility-components/live-query-view.tsx");
/* harmony import */ var _course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../course-builder/sub-components/spinner */ "./src/components/course-builder/sub-components/spinner.tsx");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../globals/KED.env */ "./src/globals/KED.env.ts");





var LoadingIndicator = Object(_live_query_view__WEBPACK_IMPORTED_MODULE_2__["liveQueryView"])(function () {
    return _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__["default"].kedBackendClient.http.status.combineLatest(_globals_KED_env__WEBPACK_IMPORTED_MODULE_4__["default"].edsClient.http.status)
        .map(function (_a) {
        var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](_a, 2), kedBackendStatus = _b[0], edsStatus = _b[1];
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "loading-indicator" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "indicator" }, kedBackendStatus.numOutstandingOperations > 0 || edsStatus.numOutstandingOperations > 0 ?
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_3__["Spinner"], null) : undefined));
    });
});


/***/ }),

/***/ "./src/components/utility-components/open-close-box.tsx":
/*!**************************************************************!*\
  !*** ./src/components/utility-components/open-close-box.tsx ***!
  \**************************************************************/
/*! exports provided: OpenCloseBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OpenCloseBox", function() { return OpenCloseBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _charts_goal_progress__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../charts/goal-progress */ "./src/components/charts/goal-progress.tsx");
/* REFACTOR: Move this component outside coursebuilder!
   This is a general-purpose component
*/



var OpenCloseBox = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](OpenCloseBox, _super);
    function OpenCloseBox(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            headerOpen: props.headerOpen || false
        };
        return _this;
    }
    OpenCloseBox.prototype.componentWillReceiveProps = function (nextProps) {
        if (nextProps.headerOpen !== this.props.headerOpen) {
            this.setState({ headerOpen: nextProps.headerOpen });
        }
    };
    OpenCloseBox.prototype.render = function () {
        var _this = this;
        var _a = this.props, title = _a.title, className = _a.className, children = _a.children, headerClassName = _a.headerClassName, contentClassName = _a.contentClassName, displayProgress = _a.displayProgress, progressData = _a.progressData, inactivated = _a.inactivated, inactivatedRender = _a.inactivatedRender;
        var headerOpen = this.state.headerOpen;
        if (inactivated)
            return inactivatedRender === 'titleAndChildren' ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null, title),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null, children)) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null, children);
        //var currentProgressData = //progressData();
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: (className || '') + " openClose" + (headerOpen ? " open" : "") },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "openHeader" + (headerClassName ? " " + headerClassName : ""), onClick: function () {
                    if (_this.props.onOpenClose)
                        _this.props.onOpenClose(!_this.state.headerOpen);
                    _this.setState({ headerOpen: !_this.state.headerOpen });
                } },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "openHeaderContainer" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null, title),
                    displayProgress && react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_charts_goal_progress__WEBPACK_IMPORTED_MODULE_2__["GoalProgress"], tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, progressData)))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "openContent" + (contentClassName ? " " + contentClassName : "") }, children));
    };
    return OpenCloseBox;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/utility-components/sortable-task-list.tsx":
/*!******************************************************************!*\
  !*** ./src/components/utility-components/sortable-task-list.tsx ***!
  \******************************************************************/
/*! exports provided: taskHasMigratedTexts, SortableTaskList */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "taskHasMigratedTexts", function() { return taskHasMigratedTexts; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SortableTaskList", function() { return SortableTaskList; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


function taskHasMigratedTexts(task) {
    return task.migratedTexts && Object.keys(task.migratedTexts).some(function (type) {
        return Object.keys(task.migratedTexts[type]).length > 0;
    });
}
function SortableTaskList(_a) {
    var taskMetas = _a.taskMetas, renderEditLink = _a.renderEditLink, renderLink = _a.renderLink, onSort = _a.onSort;
    var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])({
        taskBeingDragged: null,
        taskBeingHovered: null,
        insertBefore: false,
        originClientY: -1
    }), 2), dragState = _b[0], setDragState = _b[1];
    var taskBeingDragged = dragState.taskBeingDragged, taskBeingHovered = dragState.taskBeingHovered, insertBefore = dragState.insertBefore, originClientY = dragState.originClientY;
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "taskContainer sortable", onDrop: function (ev) {
            if (taskBeingHovered && taskBeingDragged) {
                onSort(taskBeingDragged, taskBeingHovered, insertBefore ? 'before' : 'after');
            }
            setDragState(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, dragState, { taskBeingHovered: null, taskBeingDragged: null }));
        } }, taskMetas.map(function (taskMeta) {
        var task = taskMeta.task, isTaskOwner = taskMeta.isTaskOwner;
        var hasMigratedTexts = taskHasMigratedTexts(task);
        var taskId = task.id;
        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, { key: taskId },
            insertBefore && taskBeingHovered === task ?
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "drop-target", onDragOver: function (ev) { return ev.preventDefault(); } }, "\u00A0") :
                null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: ["align-horizontal", "draggable", task === taskBeingDragged && "drag-source"].filter(function (x) { return x; }).join(' '), draggable: true, onDragStart: function (ev) {
                    ev.dataTransfer.effectAllowed = "move";
                    setDragState(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, dragState, { originClientY: ev.clientY, taskBeingDragged: task }));
                }, onDragOver: function (ev) {
                    if (!taskBeingDragged)
                        return;
                    if (taskBeingDragged === task) {
                        setDragState(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, dragState, { taskBeingHovered: null }));
                        return;
                    }
                    ev.preventDefault();
                    ev.dataTransfer.dropEffect = "move";
                    setDragState(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, dragState, { taskBeingHovered: task, insertBefore: originClientY > ev.clientY }));
                }, onDragEnd: function (ev) {
                    setDragState(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, dragState, { taskBeingHovered: null, taskBeingDragged: null }));
                } },
                isTaskOwner && hasMigratedTexts && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { style: { position: 'relative', top: '0.2em', left: '-0.7em' } },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-pagelines", style: { position: 'absolute', top: 0, left: 0, color: '#49c35a' } }))),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" }, renderEditLink(taskMeta)),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" }, renderLink(taskMeta))),
            !insertBefore && taskBeingHovered === task ?
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "drop-target", onDragOver: function (ev) { return ev.preventDefault(); } }, "\u00A0") :
                null);
    }));
}


/***/ }),

/***/ "./src/components/utility-components/wysiwyg/actions-sv.ts":
/*!*****************************************************************!*\
  !*** ./src/components/utility-components/wysiwyg/actions-sv.ts ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _exec__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./exec */ "./src/components/utility-components/wysiwyg/exec.ts");

/* harmony default export */ __webpack_exports__["default"] = ({
    bold: {
        icon: '<b>F</b>',
        title: 'Fetstil',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('bold'); }
    },
    italic: {
        icon: '<i>K</i>',
        title: 'Kursiv',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('italic'); }
    },
    underline: {
        icon: '<u>U</u>',
        title: 'Understruken',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('underline'); }
    },
    strikethrough: {
        icon: '<strike>S</strike>',
        title: 'Struken',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('strikeThrough'); }
    },
    heading1: {
        icon: '<b>H<sub>1</sub></b>',
        title: 'Rubrik 1',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<H1>'); }
    },
    heading2: {
        icon: '<b>H<sub>2</sub></b>',
        title: 'Rubrik 2',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<H2>'); }
    },
    heading3: {
        icon: '<b>H<sub>3</sub></b>',
        title: 'Rubrik 3',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<H3>'); }
    },
    paragraph: {
        icon: '&#182;',
        title: 'Paragraf',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<P>'); }
    },
    quote: {
        icon: '&#8220; &#8221;',
        title: 'Citat',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<BLOCKQUOTE>'); }
    },
    olist: {
        icon: '<i class="fa fa-list-ol" aria-hidden="true"></i>',
        title: 'Ordnad lista',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertOrderedList'); }
    },
    ulist: {
        icon: '<i class="fa fa-list" aria-hidden="true"></i>',
        title: 'Punktlista',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertUnorderedList'); }
    },
    outdent: {
        icon: '<i class="fa fa-outdent" aria-hidden="true"></i>',
        title: 'Minska indrag',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])("outdent"); }
    },
    indent: {
        icon: '<i class="fa fa-indent" aria-hidden="true"></i>',
        title: 'ka indrag',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])("indent"); },
    },
    code: {
        icon: '&lt;/&gt;',
        title: 'Programkod',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<PRE>'); }
    },
    line: {
        icon: '&#8213;',
        title: 'Vgrt linje',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertHorizontalRule'); }
    },
    link: {
        icon: '<i class="fa fa-link" aria-hidden="true"></i>',
        title: 'Infoga lnk',
        result: function () {
            var url = window.prompt('Ange lnkens URL');
            if (url)
                Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('createLink', url);
        }
    },
    image: {
        icon: '<i class="fa fa-picture-o" aria-hidden="true"></i>',
        title: 'Infoga bild',
        promptMsg: 'Ange bildens URL',
        result: function (ev, component) {
            var url = window.prompt(this.promptMsg);
            if (url) {
                //exec('insertImage', url);
                var img = document.createElement("img");
                img.src = url;
                img.tabIndex = 1;
                insertElement(img);
                img.onfocus = component.onFocus;
                img.onblur = component.onBlur;
                component.props.onChange(component.contentDiv.innerHTML);
            }
        }
    }
});
function insertElement(element) {
    var sel, range;
    if (window.getSelection && (sel = window.getSelection()).rangeCount) {
        range = sel.getRangeAt(0);
        range.collapse(true);
        range.insertNode(element);
        // Move the caret immediately after the inserted span
        range.setStartAfter(element);
        range.collapse(true);
        sel.removeAllRanges();
        sel.addRange(range);
    }
}


/***/ }),

/***/ "./src/components/utility-components/wysiwyg/actions.ts":
/*!**************************************************************!*\
  !*** ./src/components/utility-components/wysiwyg/actions.ts ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _exec__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./exec */ "./src/components/utility-components/wysiwyg/exec.ts");

/* harmony default export */ __webpack_exports__["default"] = ({
    bold: {
        icon: '<b>B</b>',
        title: 'Bold',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('bold'); }
    },
    italic: {
        icon: '<i>I</i>',
        title: 'Italic',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('italic'); }
    },
    underline: {
        icon: '<u>U</u>',
        title: 'Underline',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('underline'); }
    },
    strikethrough: {
        icon: '<strike>S</strike>',
        title: 'Strike-through',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('strikeThrough'); }
    },
    heading1: {
        icon: '<b>H<sub>1</sub></b>',
        title: 'Heading 1',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<H1>'); }
    },
    heading2: {
        icon: '<b>H<sub>2</sub></b>',
        title: 'Heading 2',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<H2>'); }
    },
    heading3: {
        icon: '<b>H<sub>3</sub></b>',
        title: 'Heading 3',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<H3>'); }
    },
    paragraph: {
        icon: '&#182;',
        title: 'Paragraph',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<P>'); }
    },
    quote: {
        icon: '&#8220; &#8221;',
        title: 'Quote',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<BLOCKQUOTE>'); }
    },
    olist: {
        icon: '&#35;',
        title: 'Ordered List',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertOrderedList'); }
    },
    ulist: {
        icon: '&#8226;',
        title: 'Unordered List',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertUnorderedList'); }
    },
    outdent: {
        icon: '<i class="fa fa-outdent" aria-hidden="true"></i>',
        title: 'Outdent',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])("outdent"); }
    },
    indent: {
        icon: '<i class="fa fa-indent" aria-hidden="true"></i>',
        title: 'Indent',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])("indent"); },
    },
    code: {
        icon: '&lt;/&gt;',
        title: 'Code',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<PRE>'); }
    },
    line: {
        icon: '&#8213;',
        title: 'Horizontal Line',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertHorizontalRule'); }
    },
    link: {
        icon: '&#128279;',
        title: 'Link',
        result: function () {
            var url = window.prompt('Enter the link URL');
            if (url)
                Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('createLink', url);
        }
    },
    image: {
        icon: '&#128247;',
        title: 'Image',
        promptMsg: 'Enter the URL of the image',
        result: function () {
            var url = window.prompt(this.promptMsg);
            if (url)
                Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertImage', url);
        }
    }
});


/***/ }),

/***/ "./src/components/utility-components/wysiwyg/exec.ts":
/*!***********************************************************!*\
  !*** ./src/components/utility-components/wysiwyg/exec.ts ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (command, value) {
    if (value === void 0) { value = null; }
    document.execCommand(command, false, value);
});


/***/ }),

/***/ "./src/components/utility-components/wysiwyg/image-edit-actions.ts":
/*!*************************************************************************!*\
  !*** ./src/components/utility-components/wysiwyg/image-edit-actions.ts ***!
  \*************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return imageEditActions; });
function imageEditActions(cb) {
    return [{
            name: 'float-left',
            icon: "<div style=\"position:relative\">\n      <i class=\"fa fa-align-right\" aria-hidden=\"true\"></i>\n      <div style=\"position:absolute; left:-4px;top:0; transform: scale(0.5); transform-origin: left top\">\n        <i class=\"fa fa-picture-o\" aria-hidden=\"true\"></i>\n      </div>\n    </div>",
            title: 'Lt bilden flyta vnster om text',
            result: function () { return cb('float-left'); }
        }, {
            name: 'float-right',
            icon: "<div style=\"position:relative\">\n      <i class=\"fa fa-align-left\" aria-hidden=\"true\"></i>\n      <div style=\"position:absolute; right:-4px;top:0; transform: scale(0.5); transform-origin: right top\">\n        <i class=\"fa fa-picture-o\" aria-hidden=\"true\"></i>\n      </div>\n    </div>",
            title: 'Lt bilden flyta hger om text',
            result: function () { return cb('float-right'); }
        }, {
            name: 'unfloat',
            icon: "<div style=\"position:relative;\" aria-hidden=\"true\">\n      <div style=\"position:absolute;top:0;left:0\">&#8254;</div>\n      <div style=\"position:absolute;top:0:left:0;transform: scale(0.5); transform-origin: left bottom\">\n        <i class=\"fa fa-picture-o\" aria-hidden=\"true\"></i>\n      </div>\n      <div style=\"position:absolute;top:0;left:0\">_</div>\n    </div>",
            title: 'Placera bilden p egen rad',
            result: function () { return cb('unfloat'); }
        }];
}


/***/ }),

/***/ "./src/components/utility-components/wysiwyg/index.tsx":
/*!*************************************************************!*\
  !*** ./src/components/utility-components/wysiwyg/index.tsx ***!
  \*************************************************************/
/*! exports provided: Wysiwyg */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Wysiwyg", function() { return Wysiwyg; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _exec__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./exec */ "./src/components/utility-components/wysiwyg/exec.ts");
/* harmony import */ var _wash_html__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./wash-html */ "./src/components/utility-components/wysiwyg/wash-html.ts");
/* harmony import */ var _image_edit_actions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./image-edit-actions */ "./src/components/utility-components/wysiwyg/image-edit-actions.ts");
/* harmony import */ var _actions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./actions */ "./src/components/utility-components/wysiwyg/actions.ts");






var classes = {
    actionbar: 'wysiwyg-actionbar',
    button: 'wysiwyg-button',
    content: 'wysiwyg-content',
    focusrect: 'wysiwyg-focusrect',
    focuspoint: 'wysiwyg-focuspoint',
    readonlyContent: 'wysiwyg-content readonly'
};
var Wysiwyg = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Wysiwyg, _super);
    function Wysiwyg(props) {
        var _this = _super.call(this, props) || this;
        _this.state = { focusRect: null };
        _this.onFocus = _this.onFocus.bind(_this);
        _this.onBlur = _this.onBlur.bind(_this);
        _this.onMouseDown = _this.onMouseDown.bind(_this);
        _this.onMouseMove = _this.onMouseMove.bind(_this);
        _this.onMouseUp = _this.onMouseUp.bind(_this);
        return _this;
    }
    Wysiwyg.prototype.componentDidMount = function () {
        var _this = this;
        if (!this.props.readOnly) {
            Array.from(this.contentDiv.querySelectorAll("img,a")).map(function (elem) { return elem; })
                .forEach(function (elem) {
                elem.tabIndex = 1;
                elem.onfocus = _this.onFocus;
                elem.onblur = _this.onBlur;
            });
            document.querySelector(".wysiwyg-content").addEventListener('mousedown', this.onMouseDown);
            document.querySelector(".wysiwyg-content").addEventListener('mousemove', this.onMouseMove);
            document.querySelector(".wysiwyg-content").addEventListener('mouseup', this.onMouseUp);
        }
        if (this.props.reportNumChars) {
            this.props.reportNumChars((this.contentDiv && this.contentDiv.innerText && this.contentDiv.innerText.length) || 0);
        }
    };
    Wysiwyg.prototype.componentDidUpdate = function () {
        var _this = this;
        Array.from(this.contentDiv.querySelectorAll("img,a")).map(function (elem) { return elem; })
            .forEach(function (elem) {
            elem.tabIndex = 1;
            elem.onfocus = _this.onFocus;
            elem.onblur = _this.onBlur;
        });
        if (this.props.reportNumChars) {
            this.props.reportNumChars((this.contentDiv && this.contentDiv.innerText && this.contentDiv.innerText.length) || 0);
        }
    };
    Wysiwyg.prototype.componentWillUnmount = function () {
        document.querySelector(".wysiwyg-content").removeEventListener('mousedown', this.onMouseDown);
        document.querySelector(".wysiwyg-content").removeEventListener('mousemove', this.onMouseMove);
        document.querySelector(".wysiwyg-content").removeEventListener('mouseup', this.onMouseUp);
    };
    Wysiwyg.prototype.shouldComponentUpdate = function (nextProps, nextState) {
        //this.contentDiv.onfocus = this.onFocus;
        //this.contentDiv.onblur = this.onBlur;
        return !this.contentDiv ||
            nextState != this.state ||
            nextProps.readOnly !== this.props.readOnly ||
            Object(_wash_html__WEBPACK_IMPORTED_MODULE_3__["washHtml"])(nextProps.html) !== Object(_wash_html__WEBPACK_IMPORTED_MODULE_3__["washHtml"])(this.contentDiv.innerHTML);
    };
    Wysiwyg.prototype.triggerOnChange = function (html) {
        this.props.onChange && this.props.onChange(Object(_wash_html__WEBPACK_IMPORTED_MODULE_3__["washHtml"])(html));
    };
    Wysiwyg.prototype.onFocus = function (ev) {
        var elem = ev.target;
        if (!elem || !elem.tagName)
            return;
        if (elem.tagName !== 'IMG' && elem.tagName !== 'A')
            return;
        var contentParent = this.contentDiv.parentElement;
        var newState = {
            focusRect: getRelatativeClientRect(contentParent, elem),
        };
        switch (elem.tagName) {
            case 'A':
            case 'IMG':
            default: break;
        }
        this.setState(newState);
        this.focusElem = elem;
    };
    Wysiwyg.prototype.onBlur = function (ev) {
        /*if (ev.relatedTarget) {
          const relatedTarget = ev.relatedTarget as HTMLElement;
          if (relatedTarget.className && relatedTarget.className.split(' ').indexOf(classes.button) >= 0) {
            // A image action button was pressed
            set
            return;
          }
        }*/
        if ((ev.target === this.focusElem && ev.relatedTarget !== this.focusRectDiv) ||
            ev.target === this.focusRectDiv) {
            this.setState({ focusRect: null });
        }
    };
    Wysiwyg.prototype.makeClickable = function (elem) {
        elem.tabIndex = 1;
    };
    Wysiwyg.prototype.onMouseDown = function (ev) {
        if ((ev.target.className || "").split(' ').indexOf(classes.focuspoint) >= 0) {
            var corner = this.getRectCorner(ev);
            this.corner = corner;
            this.resizeStartX = ev.clientX;
        }
    };
    Wysiwyg.prototype.onMouseMove = function (ev) {
        if (this.corner && this.state.focusRect && this.focusElem) {
            ev.preventDefault();
            // TODO: Rkna ut baserat p this.corner hur bildens storlek borde ndras.
            // Leta upp bilden per ID frn this.contentDiv
            // Stt DIV:ens style attribut width till ny width.
            // Om DIV:en redan hade height, stt ny height med samma aspect ratio som innan,
            // annars, stt inte height alls (eller mjligtvis till auto))
            var focusRect = this.focusRectDiv.getBoundingClientRect();
            if (focusRect.width < 32)
                return;
            //const currentWidth = focusRect.width;
            //const currentHeight = focusRect.height;
            //const hasHeightStyle = !this.focusElem.style.height || this.focusElem.style.height === "auto";
            var newWidth = Math.max(32, this.corner.endsWith('l') ?
                focusRect.width + (this.resizeStartX - ev.clientX) :
                //focusRect.right - ev.clientX :
                focusRect.width - (this.resizeStartX - ev.clientX));
            this.resizeStartX = ev.clientX;
            //ev.clientX - focusRect.left;
            var factor = newWidth / focusRect.width;
            var newHeight = focusRect.height * factor;
            this.focusElem.style.width = newWidth + "px";
            this.focusElem.style.height = newHeight + "px";
            this.setState({
                focusRect: getRelatativeClientRect(this.contentDiv.parentElement, this.focusElem),
            });
        }
    };
    Wysiwyg.prototype.onMouseUp = function (ev) {
        if (this.corner && this.state.focusRect && this.focusElem) {
            this.corner = null;
            this.triggerOnChange(this.contentDiv.innerHTML);
        }
    };
    Wysiwyg.prototype.getRectCorner = function (ev) {
        var e_1, _a;
        try {
            for (var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"]((ev.target.className || '').split(' ')), _c = _b.next(); !_c.done; _c = _b.next()) {
                var className = _c.value;
                switch (className) {
                    case 'fpul':
                        return 'ul';
                    case 'fpur':
                        return 'fpur';
                    case 'fplr':
                        return 'lr';
                    case 'fpll':
                        return 'll';
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return null;
    };
    Wysiwyg.prototype.execImageEditAction = function (cmd) {
        //console.log(cmd);
        if (!this.focusElem)
            return;
        //console.log("doing it");
        switch (cmd) {
            case 'float-left':
                this.focusElem.style.cssFloat = 'left';
                break;
            case 'float-right':
                this.focusElem.style.cssFloat = 'right';
                break;
            case 'unfloat':
                this.focusElem.style.cssFloat = '';
                break;
        }
        this.triggerOnChange(this.contentDiv.innerHTML);
        this.setState({ focusRect: getRelatativeClientRect(this.contentDiv.parentElement, this.focusElem) });
    };
    Wysiwyg.prototype.render = function () {
        var _this = this;
        var defaultActions = this.props.defaultActions || _actions__WEBPACK_IMPORTED_MODULE_5__["default"];
        var actionsToUse = this.props.actions ? this.props.actions.map(function (action) {
            return typeof action === 'string' ?
                defaultActions[action] :
                defaultActions[action.name] ? tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, defaultActions[action.name], action) :
                    action;
        })
            : Object.keys(defaultActions).map(function (action) { return defaultActions[action]; });
        if (this.state.focusRect) {
            actionsToUse = actionsToUse.concat(Object(_image_edit_actions__WEBPACK_IMPORTED_MODULE_4__["default"])(function (cmd) { return _this.execImageEditAction(cmd); }));
        }
        var focusRect = this.state.focusRect;
        var _a = this.props, readOnly = _a.readOnly, reportNumChars = _a.reportNumChars, maxChars = _a.maxChars;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: this.props.className },
            !readOnly && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: classes.actionbar }, actionsToUse.map(function (action, idx) {
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { key: idx, className: classes.button, dangerouslySetInnerHTML: { __html: action.icon }, title: action.title, onMouseDown: function (ev) { action.result(ev, _this); }, onMouseUp: function (ev) { return setTimeout(function () { return _this.contentDiv.focus(); }, 10); } });
            })),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: readOnly ? classes.readonlyContent : classes.content, style: { position: 'relative', top: 0, left: 0 } },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "editor", ref: function (div) { return _this.contentDiv = div; }, dangerouslySetInnerHTML: { __html: Object(_wash_html__WEBPACK_IMPORTED_MODULE_3__["washHtml"])(this.props.html) }, contentEditable: !readOnly, onPaste: function (ev) {
                        if (!isNaN(maxChars)) {
                            var target = ev.target, currentTarget = ev.currentTarget;
                            //const textBeingOverwritten = (target as any).innerText || "";
                            var editorText = (currentTarget && currentTarget.innerText) || "";
                            var textBeingPasted = ev.clipboardData.getData("text/plain") || "";
                            if (editorText.length + textBeingPasted.length > maxChars) {
                                ev.preventDefault();
                            }
                        }
                    }, onKeyUp: reportNumChars ? function (ev) {
                        var innerText = ev.target.innerText;
                        reportNumChars(innerText ? innerText.length : 0);
                    } : null, onKeyPress: !isNaN(maxChars) ? function (ev) {
                        var innerText = ev.target.innerText;
                        if (innerText && innerText.length >= maxChars) {
                            ev.preventDefault();
                        }
                    } : null, onInput: function (ev) { return _this.triggerOnChange(ev.target.innerHTML); }, onKeyDown: function (ev) {
                        if (readOnly)
                            return;
                        if (reportNumChars && ev.currentTarget) {
                            reportNumChars((ev.currentTarget.innerText || "").length);
                        }
                        //console.log("Key: " + ev.which);
                        if (ev.which >= 35 && ev.which <= 40) { // home/end/up/down/left/right
                            ev.stopPropagation(); // Prevent entire page from scrolling??
                        }
                        if (ev.which === 9) {
                            ev.preventDefault(); // TAB
                            if (ev.shiftKey) {
                                Object(_exec__WEBPACK_IMPORTED_MODULE_2__["default"])("outdent");
                            }
                            else {
                                Object(_exec__WEBPACK_IMPORTED_MODULE_2__["default"])("indent");
                            }
                        }
                        if ((ev.keyCode === 8 || ev.keyCode === 46) && // Delete or Back buttons
                            _this.focusElem && _this.state.focusRect) {
                            if (_this.focusElem && _this.focusElem.parentElement) {
                                _this.focusElem.parentElement.removeChild(_this.focusElem); // Remove marked image
                            }
                            _this.focusElem = null;
                            _this.setState({ focusRect: null });
                            _this.triggerOnChange(_this.contentDiv.innerHTML);
                        }
                    } }),
                focusRect && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { ref: function (div) { return _this.focusRectDiv = div; }, className: classes.focusrect, onBlur: this.onBlur, tabIndex: 1, style: {
                        outline: 0,
                        position: 'absolute',
                        top: this.state.focusRect.top,
                        left: this.state.focusRect.left,
                        width: this.state.focusRect.width,
                        height: this.state.focusRect.height
                    } },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: classes.focuspoint + " fpul", style: { position: 'absolute', top: 0, left: 0 } }),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: classes.focuspoint + " fpur", style: { position: 'absolute', top: 0, right: 0 } }),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: classes.focuspoint + " fplr", style: { position: 'absolute', bottom: 0, right: 0 } }),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: classes.focuspoint + " fpll", style: { position: 'absolute', bottom: 0, left: 0 } }))));
    };
    return Wysiwyg;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

function getRelatativeClientRect(parent, child) {
    var parentRect = parent.getBoundingClientRect();
    var childRect = child.getBoundingClientRect();
    return {
        top: childRect.top - parentRect.top + parent.scrollTop,
        left: childRect.left - parentRect.left + parent.scrollLeft,
        bottom: childRect.bottom - parentRect.top + parent.scrollTop,
        right: childRect.right - parentRect.left + parent.scrollLeft,
        width: childRect.width,
        height: childRect.height
    };
}


/***/ }),

/***/ "./src/components/utility-components/wysiwyg/restore-selection.ts":
/*!************************************************************************!*\
  !*** ./src/components/utility-components/wysiwyg/restore-selection.ts ***!
  \************************************************************************/
/*! exports provided: saveSelection, restoreSelection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "saveSelection", function() { return saveSelection; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "restoreSelection", function() { return restoreSelection; });
function saveSelection() {
    if (window.getSelection) {
        var sel = window.getSelection();
        if (sel.getRangeAt && sel.rangeCount) {
            return sel.getRangeAt(0);
        }
    }
    else if (document["selection"] && document["selection"].createRange) {
        return document["selection"].createRange();
    }
    return null;
}
function restoreSelection(range) {
    if (range) {
        if (window.getSelection) {
            var sel = window.getSelection();
            sel.removeAllRanges();
            sel.addRange(range);
        }
        else if (document["selection"] && range.select) {
            range.select();
        }
    }
}


/***/ }),

/***/ "./src/components/utility-components/wysiwyg/wash-html.ts":
/*!****************************************************************!*\
  !*** ./src/components/utility-components/wysiwyg/wash-html.ts ***!
  \****************************************************************/
/*! exports provided: washHtml */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "washHtml", function() { return washHtml; });
var parser = new DOMParser();
/** Tags / Attributes Whitelist
 *
 */
var HTML_WASH_POLICY = {
    b: {},
    i: {},
    p: {},
    u: {},
    strike: {},
    pre: {},
    h1: {},
    h2: {},
    h3: {},
    h4: {},
    h5: {},
    img: { src: true, class: true, style: true, tabindex: true },
    a: { href: true, target: true, tabindex: true },
    ul: {},
    ol: {},
    li: {},
    hr: {},
    br: {},
    div: {},
    span: {},
    // table tags:
    table: { border: true },
    tbody: {},
    thead: {},
    tfoot: {},
    tr: {},
    td: { headers: true, colspan: true, rowspan: true },
    th: { abbr: true, headers: true, scope: true, sorted: true, colspan: true, rowspan: true }
};
function washHtml(html) {
    var doc = parser.parseFromString(html, "text/html");
    var childNodes = doc.body.childNodes;
    var modified = false;
    for (var i = 0; i < childNodes.length; ++i) {
        if (washNode(childNodes.item(i))) {
            modified = true;
        }
    }
    return modified ?
        doc.body.innerHTML :
        html; // By returning the original HTML string, we spare the user from refreshing the edit area,
    // which would otherwise put the cursor at the top, losing the position where user where.
}
function washNode(node) {
    var modified = false;
    if (isElement(node)) {
        if (washElement(node)) {
            modified = true;
        }
    }
    if (washChildNodes(node)) {
        modified = true;
    }
    return modified;
}
function washChildNodes(node) {
    var modified = false;
    var childNodes = node.childNodes;
    for (var i = 0; i < childNodes.length; ++i) {
        if (washNode(childNodes.item(i))) {
            modified = true;
        }
    }
    return modified;
}
/** Replace an element with its child nodes.
 *
 */
function removeMiddleElement(element) {
    var childNodes = element.childNodes;
    for (var i = 0; i < childNodes.length; ++i) {
        element.parentNode.insertBefore(childNodes.item(i), element);
    }
    element.remove();
}
function washElement(element) {
    var policy = element.tagName && HTML_WASH_POLICY[element.tagName.toLowerCase()];
    if (!policy) {
        console.warn("Wysiwyg: not allowed tag", element.tagName);
        washChildNodes(element);
        removeMiddleElement(element);
        return true;
    }
    var modified = false;
    for (var i = 0; i < element.attributes.length; ++i) {
        var attr = element.attributes.item(i);
        var allowed = attr.name && !!policy[attr.name.toLowerCase()];
        if (!allowed) {
            modified = true;
            console.warn("Wysiwyg: not allowed attribute", attr.name, "Tag: ", element.tagName);
            element.removeAttribute(attr.name);
        }
    }
    return modified;
}
function isElement(node) {
    return !!node.tagName;
}


/***/ }),

/***/ "./src/components/weekplanner/add-custom-goal.tsx":
/*!********************************************************!*\
  !*** ./src/components/weekplanner/add-custom-goal.tsx ***!
  \********************************************************/
/*! exports provided: AddCustomGoal */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AddCustomGoal", function() { return AddCustomGoal; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");



var AddCustomGoal = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](AddCustomGoal, _super);
    function AddCustomGoal(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            learningGoal: props.learningGoal || ''
        };
        return _this;
    }
    AddCustomGoal.prototype.render = function () {
        var _this = this;
        var learningGoal = this.state.learningGoal;
        var onSave = this.props.onSave;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet sv-skip-spacer" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_2__["FormattedMessage"], { id: "weekplanner.addLearningGoalTitle", defaultMessage: "L\u00E4gg till eget l\u00E4randem\u00E5l" })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_2__["FormattedMessage"], { id: "weekplanner.addLearningGoal", defaultMessage: "M\u00E5l" })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { type: "text", tabIndex: 1, size: 50, autoFocus: true, value: learningGoal, onChange: function (e) { return _this.setState({ learningGoal: e.target.value }); } })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top spaced" })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null)),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { tabIndex: 1, className: "btn btn-large btn-default", onClick: function () { return onSave(learningGoal); } },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_2__["FormattedMessage"], { id: "common.save", defaultMessage: "save" }))));
    };
    return AddCustomGoal;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/weekplanner/add-custom-task.tsx":
/*!********************************************************!*\
  !*** ./src/components/weekplanner/add-custom-task.tsx ***!
  \********************************************************/
/*! exports provided: AddCustomTask */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AddCustomTask", function() { return AddCustomTask; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utility-components/form-field-text-input */ "./src/components/utility-components/form-field-text-input.tsx");
/* harmony import */ var _utility_components_form_field_textarea__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utility-components/form-field-textarea */ "./src/components/utility-components/form-field-textarea.tsx");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");






var AddCustomTask = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](AddCustomTask, _super);
    function AddCustomTask(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            name: '',
            description: '',
            url: ''
        };
        return _this;
    }
    AddCustomTask.prototype.render = function () {
        var _this = this;
        var _a = this.state, name = _a.name, description = _a.description, url = _a.url;
        var _b = this.props, isTask = _b.isTask, onSave = _b.onSave;
        var intl = this.context.intl;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet sv-skip-spacer" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_5__["FormattedMessage"], { id: "customTask.addWorkGoalTitle", defaultMessage: "L\u00E4gg till eget arbetsm\u00E5l" })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_2__["TextInput"], { label: intl.formatMessage({ id: 'common.nameLabel', defaultMessage: 'Namn' }), id: "AddCustomTask:name", placeholder: intl.formatMessage({ id: 'customTask.enterNamePlhd', defaultMessage: 'Ange namn...' }), value: name, autoFocus: true, onChange: function (name) { return _this.setState({ name: name }); } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_textarea__WEBPACK_IMPORTED_MODULE_3__["TextAreaFormField"], { rows: 7, label: intl.formatMessage({ id: 'common.descriptionLabel', defaultMessage: 'Beskrivning' }), id: "AddCustomTask:description", placeholder: intl.formatMessage({ id: 'common.addDescriptionPlhd', defaultMessage: "Lgg till en beskrivning..." }), value: description, onChange: function (description) { return _this.setState({ description: description }); } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_2__["TextInput"], { label: intl.formatMessage({ id: 'common.linkLabel', defaultMessage: 'Lnk' }), id: "AddCustomTask:url", placeholder: "http://www...", value: url, onChange: function (url) { return _this.setState({ url: url }); } })),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { tabIndex: 1, className: "btn btn-large btn-default", onClick: function () { return onSave(name, description, url); } },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_5__["FormattedMessage"], { id: "common.save", defaultMessage: "Spara" }))));
    };
    AddCustomTask.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_4__["LanguageContext"];
    return AddCustomTask;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/weekplanner/add-or-edit-sub-task.tsx":
/*!*************************************************************!*\
  !*** ./src/components/weekplanner/add-or-edit-sub-task.tsx ***!
  \*************************************************************/
/*! exports provided: AddOrEditSubTask */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AddOrEditSubTask", function() { return AddOrEditSubTask; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utility-components/form-field-text-input */ "./src/components/utility-components/form-field-text-input.tsx");
/* harmony import */ var _utility_components_form_field_textarea__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utility-components/form-field-textarea */ "./src/components/utility-components/form-field-textarea.tsx");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");







var AddOrEditSubTask = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](AddOrEditSubTask, _super);
    function AddOrEditSubTask(props) {
        var _this = _super.call(this, props) || this;
        if (props.mode === 'edit') {
            var subTask = props.subTask;
            _this.state = {
                name: subTask.name || '',
                description: subTask.description || '',
                url: subTask.url || ''
            };
        }
        else {
            _this.state = {
                name: '',
                description: '',
                url: ''
            };
        }
        return _this;
    }
    AddOrEditSubTask.prototype.save = function () {
        // Update repo:
        var props = this.props;
        var userTask = props.userTask, closeDialog = props.closeDialog, userTasksRepo = props.userTasksRepo;
        var _a = this.state, name = _a.name, description = _a.description, url = _a.url;
        if (props.mode === 'edit') {
            // Edit existing:
            userTasksRepo.update([userTask], function (ut) {
                var subTasks = ut.subTasks;
                if (subTasks) {
                    ut.subTasks = subTasks.map(function (st) {
                        return st.id === props.subTask.id ? tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, st, { name: name, description: description, url: url }) : tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, st);
                    });
                }
            });
        }
        else {
            // Create new task
            var newSubTask_1 = {
                id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_4__["createUUID"])(),
                name: name,
                description: description,
                url: url
            };
            // Update repo:
            userTasksRepo.update([userTask], function (ut) {
                if (!ut.subTasks) {
                    ut.subTasks = [];
                }
                ut.subTasks = ut.subTasks.concat(newSubTask_1);
            });
        }
        // Close dialog
        closeDialog();
    };
    AddOrEditSubTask.prototype.delete = function () {
        // Update repo:
        var props = this.props;
        if (props.mode !== 'edit') {
            throw new Error("Can only delete in edit mode");
        }
        props.userTasksRepo.update([props.userTask], function (ut) {
            if (ut.subTasks) {
                ut.subTasks = ut.subTasks.filter(function (t) { return t.id !== props.subTask.id; });
            }
        });
        // Close dialog:
        props.closeDialog();
    };
    AddOrEditSubTask.prototype.render = function () {
        var _this = this;
        var _a = this.state, name = _a.name, description = _a.description, url = _a.url;
        var props = this.props;
        var isEditMode = props.mode === 'edit';
        var intl = this.context.intl;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet sv-skip-spacer" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null, isEditMode ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_5__["FormattedMessage"], { id: "addeditsubtask.editSubtask", defaultMessage: 'Redigera underuppgift' }) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_5__["FormattedMessage"], { id: "addeditsubtask.addSubtask", defaultMessage: 'L\u00E4gg till underuppgift' })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_2__["TextInput"], { autoFocus: true, label: intl.formatMessage({ id: 'addeditsubtask.nameLabel', defaultMessage: 'Underuppgiftens namn' }), id: "AddUserSubTask:name", placeholder: "", value: this.state.name, onChange: function (name) { return _this.setState({ name: name }); } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_textarea__WEBPACK_IMPORTED_MODULE_3__["TextAreaFormField"], { label: intl.formatMessage({ id: 'common.descriptionLabel', defaultMessage: 'Beskrivning' }), id: "AddUserSubTask:description", rows: 7, placeholder: "", value: this.state.description, onChange: function (description) { return _this.setState({ description: description }); } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_2__["TextInput"], { label: intl.formatMessage({ id: 'common.linkLabel', defaultMessage: 'Lnk' }), id: "AddUserSubTask:url", placeholder: "", value: this.state.url, onChange: function (url) { return _this.setState({ url: url }); } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null)),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet" },
                props.mode === 'edit' && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { className: "btn btn-warning btn-large pull-right", onClick: function (ev) { return _this.delete(); } },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_5__["FormattedMessage"], { id: "addeditsubtask.deleteSubtask", defaultMessage: "Ta bort underuppgift" })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { tabIndex: 1, className: "btn btn-large btn-default", onClick: function () { return _this.save(); } },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_5__["FormattedMessage"], { id: "common.save", defaultMessage: "Spara" }))));
    };
    AddOrEditSubTask.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_6__["LanguageContext"];
    return AddOrEditSubTask;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/weekplanner/edit-user-task.tsx":
/*!*******************************************************!*\
  !*** ./src/components/weekplanner/edit-user-task.tsx ***!
  \*******************************************************/
/*! exports provided: EditUserTask */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditUserTask", function() { return EditUserTask; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _get_task_type__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./get-task-type */ "./src/components/weekplanner/get-task-type.ts");
/* harmony import */ var react_datepicker__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-datepicker */ "./node_modules/react-datepicker/es/index.js");
/* harmony import */ var _globals_moment_sv_locale__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../globals/moment-sv-locale */ "./src/globals/moment-sv-locale.ts");
/* harmony import */ var _utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utility-components/form-field-text-input */ "./src/components/utility-components/form-field-text-input.tsx");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _utility_components_form_field__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utility-components/form-field */ "./src/components/utility-components/form-field.tsx");
/* harmony import */ var _add_or_edit_sub_task__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./add-or-edit-sub-task */ "./src/components/weekplanner/add-or-edit-sub-task.tsx");
/* harmony import */ var _utility_components_form_field_textarea__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../utility-components/form-field-textarea */ "./src/components/utility-components/form-field-textarea.tsx");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");












var EditUserTask = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](EditUserTask, _super);
    function EditUserTask(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            userTask: props.userTask,
            name: props.userTask.name,
            description: props.userTask.description,
            url: props.userTask.url,
            deadline: props.userTask.deadline,
            subTasks: props.userTask.subTasks
        };
        _this.onUserTasksChanged = _this.onUserTasksChanged.bind(_this);
        return _this;
    }
    EditUserTask.prototype.componentDidMount = function () {
        this.props.userTasksRepo.subscribe(this.onUserTasksChanged);
    };
    EditUserTask.prototype.onUserTasksChanged = function (userTasks) {
        var _this = this;
        var myUserTask = userTasks.find(function (ut) { return ut.id === _this.props.userTask.id; });
        if (!myUserTask) {
            this.props.closeDialog();
            return;
        }
        this.setState({
            userTask: myUserTask,
            subTasks: myUserTask.subTasks
        });
    };
    EditUserTask.prototype.componentWillUnmount = function () {
        this.props.userTasksRepo.unsubscribe(this.onUserTasksChanged);
    };
    EditUserTask.prototype.isModified = function () {
        // Don't count subtask changes! They live their own life and is maintained
        // in add-or-edit-sub-task.tsx. Reason: User would expect added /edited subtasks
        // to be persisted right away. May click away this dialog.
        // Also reason: Can invoke that dialog by itself from other components. From WeekPlanner
        // when clicking the subtask for example!
        var _a = this.state, deadline = _a.deadline, description = _a.description, name = _a.name, url = _a.url, userTask = _a.userTask;
        return (deadline !== userTask.deadline ||
            description !== userTask.description ||
            name !== userTask.name ||
            url !== userTask.url);
    };
    EditUserTask.prototype.addSubTask = function () {
        this.props.openDialog(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_or_edit_sub_task__WEBPACK_IMPORTED_MODULE_8__["AddOrEditSubTask"], { mode: "add", userTask: this.state.userTask, closeDialog: this.props.closeDialog, userTasksRepo: this.props.userTasksRepo }));
    };
    EditUserTask.prototype.editSubTask = function (subTask) {
        this.props.openDialog(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_or_edit_sub_task__WEBPACK_IMPORTED_MODULE_8__["AddOrEditSubTask"], { mode: "edit", subTask: subTask, userTask: this.state.userTask, closeDialog: this.props.closeDialog, userTasksRepo: this.props.userTasksRepo }));
    };
    EditUserTask.prototype.render = function () {
        var _this = this;
        var _a = this.state, name = _a.name, description = _a.description, url = _a.url, deadline = _a.deadline, subTasks = _a.subTasks, showCalendar = _a.showCalendar, userTask = _a.userTask;
        var id = userTask.id, courseName = userTask.courseName;
        var _b = this.props, onUpdate = _b.onUpdate, onDelete = _b.onDelete;
        var isModified = this.isModified();
        var taskType = Object(_get_task_type__WEBPACK_IMPORTED_MODULE_2__["getTaskType"])(userTask);
        var isCustomTask = taskType === 'customTask';
        var expired = moment__WEBPACK_IMPORTED_MODULE_6___default()(userTask.deadline) < moment__WEBPACK_IMPORTED_MODULE_6___default()();
        var intl = this.context.intl;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "editTaskDialog sv-html-portlet sv-portlet sv-skip-spacer" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null, isCustomTask ?
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "task.editWorkGoals", defaultMessage: 'Redigera arbetsm\u00E5l' }) :
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "task.editTask", defaultMessage: 'Redigera uppgift' })),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_5__["TextInput"], { autoFocus: true, label: isCustomTask ? intl.formatMessage({ id: 'task.targetNameLabel', defaultMessage: 'Arbetsmlets namn' }) : intl.formatMessage({ id: 'task.taskNameLabel', defaultMessage: 'Uppgiftens namn' }), id: "EditUserTask:name", placeholder: isCustomTask ? intl.formatMessage({ id: 'task.whatShouldYouDoPlhd', defaultMessage: 'Vad ska du gra?' }) : intl.formatMessage({ id: 'task.enterTaskNamePlhd', defaultMessage: 'Ange uppgiftens namn...' }), value: name, onChange: function (name) { return _this.setState({ name: name }); } }),
            isCustomTask && react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_textarea__WEBPACK_IMPORTED_MODULE_9__["TextAreaFormField"], { rows: 5, label: intl.formatMessage({ id: 'common.descriptionLabel', defaultMessage: 'Beskrivning' }), id: "EditUserTask:description", placeholder: intl.formatMessage({ id: 'common.addDescriptionPlhd', defaultMessage: 'Lgg till en beskrivning...' }), value: description, onChange: function (description) { return _this.setState({ description: description }); } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_5__["TextInput"], { label: intl.formatMessage({ id: 'common.linkLabel', defaultMessage: "Lnk" }), id: "EdutUserTask:url", placeholder: "http(s)://...", value: url, onChange: function (url) { return _this.setState({ url: url }); } })),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field__WEBPACK_IMPORTED_MODULE_7__["FormField"], { label: intl.formatMessage({ id: 'task.setDeadline', defaultMessage: 'Ange deadline' }) }, (deadline || showCalendar) ?
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_datepicker__WEBPACK_IMPORTED_MODULE_3__["default"], { ref: function (elem) { return _this.datePicker = elem; }, id: "EditUserTask:deadline", nextMonthButtonLabel: "", previousMonthButtonLabel: "", showWeekNumbers: true, selected: deadline && moment__WEBPACK_IMPORTED_MODULE_6___default()(deadline).toDate(), autoFocus: showCalendar, dateFormat: "yyyy-MM-dd", className: expired ? "expired" : undefined, locale: intl.locale, popperPlacement: isCustomTask ? "top-start" : "bottom-start", onBlur: function () { return _this.setState({ showCalendar: false }); }, onChange: function (value) {
                                _this.setState({
                                    deadline: value && moment__WEBPACK_IMPORTED_MODULE_6___default()(value).format("YYYY-MM-DD"),
                                    showCalendar: false
                                });
                            } })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "deleteDate", href: "#", title: intl.formatMessage({ id: 'task.removeDeadline', defaultMessage: 'Ta bort deadline' }), onClick: function (ev) {
                                ev.preventDefault();
                                _this.setState({ deadline: null, showCalendar: false });
                            } }))) :
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "top", ref: function () { _this.datePicker = null; } },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "btn", onClick: function (ev) {
                            if (_this.datePicker) {
                                _this.datePicker.setOpen(true);
                            }
                            _this.setState({
                                showCalendar: true
                            });
                        } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-calendar", "aria-hidden": "true" }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "task.setDeadlineLabel", defaultMessage: "Ange deadline..." })))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field__WEBPACK_IMPORTED_MODULE_7__["FormField"], { label: intl.formatMessage({ id: 'task.subTasks', defaultMessage: 'Underuppgifter' }) },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "learningGoalTasks" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "taskContainer" }, subTasks && subTasks.map(function (subTask) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: subTask.id, className: "align-horizontal" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { onClick: function () { return _this.editSubTask(subTask); }, href: "#" }, subTask.name))); }))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { id: "EditUserTask:addSubTask", className: "btn", onClick: function () { return _this.addSubTask(); } },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-plus", "aria-hidden": "true" }),
                            " ",
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "task.addSubtask", defaultMessage: "L\u00E4gg till underuppgift" }))))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "divider large" }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalButton top" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { tabIndex: 1, className: "btn btn-default", onClick: function () {
                            isModified ? onUpdate(function (userTask) {
                                userTask.name = name;
                                userTask.description = description;
                                userTask.url = url;
                                userTask.deadline = deadline;
                            }) : _this.props.closeDialog();
                        } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "common.save", defaultMessage: "Spara" }))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalButton top" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { tabIndex: 1, className: "btn", onClick: function () {
                            _this.props.closeDialog();
                        } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "common.cancel", defaultMessage: "Avbryt" }))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "confirm top pull-right" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { tabIndex: 1, className: "btn btn-warning", onClick: function () {
                            onDelete(id);
                        } }, isCustomTask ?
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "task.removeWorkGoals", defaultMessage: "Ta bort arbetsm\u00E5l" }) :
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "task.removeThisTask", defaultMessage: "Ta bort den h\u00E4r uppgiften" })))));
    };
    EditUserTask.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_11__["LanguageContext"];
    return EditUserTask;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/weekplanner/get-task-type.ts":
/*!*****************************************************!*\
  !*** ./src/components/weekplanner/get-task-type.ts ***!
  \*****************************************************/
/*! exports provided: getTaskType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTaskType", function() { return getTaskType; });
function getTaskType(userTask) {
    return userTask.course && userTask.task && userTask.course.length > 0 && userTask.task.length > 0 ?
        'courseBuilderTask' :
        userTask.siteVisionPageId ?
            'siteVisionTask' :
            userTask.courseInfo ?
                'subjectPlannerTask' :
                'customTask';
}


/***/ }),

/***/ "./src/components/weekplanner/refiner.ts":
/*!***********************************************!*\
  !*** ./src/components/weekplanner/refiner.ts ***!
  \***********************************************/
/*! exports provided: refine */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "refine", function() { return refine; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/utils */ "./src/utils/utils.ts");


function refine(tasks) {
    var e_1, _a, e_2, _b;
    var result = [];
    var mapper = {};
    var tasksPerCourse = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["arrayToLookup"])(tasks, function (t) { return t.courseName || ''; });
    try {
        for (var _c = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](Object.keys(tasksPerCourse).sort().filter(function (x) { return x; }).concat(tasksPerCourse[''] ?
            [''] : [])), _d = _c.next(); !_d.done; _d = _c.next()) {
            var courseName = _d.value;
            var courseTasks = tasksPerCourse[courseName] || tasksPerCourse[''];
            var tasksPerLearningGoal = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["arrayToLookup"])(courseTasks, function (t) { return t.learningGoal; });
            var resultLearningGoals = [];
            try {
                for (var _e = (e_2 = void 0, tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](Object.keys(tasksPerLearningGoal))), _f = _e.next(); !_f.done; _f = _e.next()) {
                    var learningGoal = _f.value;
                    var lgTasks = tasksPerLearningGoal[learningGoal].sort(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["compareProp"])("dateTime"));
                    var learningGoalTask = lgTasks
                        .filter(function (t) { return t.name == null; }) // If name is undefined or null, this represents a learning goal
                    [0];
                    var url = learningGoalTask && learningGoalTask.url;
                    resultLearningGoals.push({
                        name: learningGoal,
                        allTasks: lgTasks,
                        url: url,
                        step: lgTasks.map(function (t) { return t.step; }).filter(function (step) { return step; })[0],
                        tasks: lgTasks.filter(function (t) { return t.name; })
                    });
                }
            }
            catch (e_2_1) { e_2 = { error: e_2_1 }; }
            finally {
                try {
                    if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
                }
                finally { if (e_2) throw e_2.error; }
            }
            result.push({
                courseName: courseName,
                learningGoals: resultLearningGoals
            });
        }
    }
    catch (e_1_1) { e_1 = { error: e_1_1 }; }
    finally {
        try {
            if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
        }
        finally { if (e_1) throw e_1.error; }
    }
    return result;
}


/***/ }),

/***/ "./src/components/weekplanner/user-tasks-box.tsx":
/*!*******************************************************!*\
  !*** ./src/components/weekplanner/user-tasks-box.tsx ***!
  \*******************************************************/
/*! exports provided: UserTasksBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UserTasksBox", function() { return UserTasksBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");
/* harmony import */ var _access_control__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../access-control */ "./src/access-control/index.ts");
/* harmony import */ var _calendar_course_name_to_css_class__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../calendar/course-name-to-css-class */ "./src/components/calendar/course-name-to-css-class.ts");
/* harmony import */ var _get_task_type__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./get-task-type */ "./src/components/weekplanner/get-task-type.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _features__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../features */ "./src/features/index.ts");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");











;
var UserTasksBox = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](UserTasksBox, _super);
    function UserTasksBox(props) {
        return _super.call(this, props) || this;
    }
    UserTasksBox.prototype.render = function () {
        var _this = this;
        var _a = this.props, courseName = _a.courseName, learningGoals = _a.learningGoals, progressData = _a.progressData, displayProgress = _a.displayProgress;
        var isOpen = !!this.props.openCourses[courseName];
        var features = new _features__WEBPACK_IMPORTED_MODULE_7__["Features"]();
        var intl = this.context.intl;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_2__["OpenCloseBox"], { title: react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h5", null, courseName || react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_9__["FormattedMessage"], { id: "userTasks.goals", defaultMessage: "Egna l\u00E4randem\u00E5l" })), headerOpen: isOpen, className: courseName && Object(_calendar_course_name_to_css_class__WEBPACK_IMPORTED_MODULE_4__["courseNameToCssClass"])('wp-course-', courseName), onOpenClose: function (becameOpen) { return _this.props.setIsOpen(courseName, becameOpen); }, displayProgress: displayProgress, progressData: progressData }, learningGoals.map(function (lg) {
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: lg.name, className: "learningGoalContainer" },
                lg.step && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "stepIndicator" }, lg.step),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "learningGoalText horizontalItem top" }, lg.name),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem" },
                        "\u00A0",
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "trash", href: "#", title: intl.formatMessage({ id: 'userTasks.deleteLearningGoal', defaultMessage: 'Ta bort lrandemlet och dess uppgifter' }), onClick: function (ev) {
                                ev.preventDefault();
                                _this.props.removeLearningGoal(lg);
                            } },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-trash" })))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "learningGoalTasks" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "taskContainer" }, lg.tasks.map(function (userTask) {
                        var isWorking = userTask.$meta === 'adding' || userTask.$meta === 'deleting' || userTask.$meta === 'updating';
                        var taskType = Object(_get_task_type__WEBPACK_IMPORTED_MODULE_5__["getTaskType"])(userTask);
                        var expired = moment__WEBPACK_IMPORTED_MODULE_6___default()(userTask.deadline).startOf('day') < moment__WEBPACK_IMPORTED_MODULE_6___default()().startOf('day');
                        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: userTask.id, style: isWorking ? { opacity: 0.5 } : {} },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "checkBox" + (userTask.done ? " checked" : ""), onClick: function (ev) { return !isWorking && _this.props.setTaskDone(userTask, !userTask.done); } })),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                                    taskType === 'courseBuilderTask' ?
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: getTaskUrl(userTask, _this.props.viewCourseUrl) }, userTask.name) :
                                        taskType === 'subjectPlannerTask' ?
                                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: getSubjectPlannerTaskUrl(userTask) }, userTask.name) :
                                            taskType === 'siteVisionTask' ?
                                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: userTask.url }, userTask.name) :
                                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: !userTask.url ? "link-less" : "", href: userTask.url || undefined, target: (userTask.url + '').toLowerCase().startsWith(location.host.toLowerCase()) ?
                                                        "_self" :
                                                        "_blank" }, userTask.name),
                                    userTask.deadline && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "dateSet" + (expired ? ' expired' : '') },
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { title: moment__WEBPACK_IMPORTED_MODULE_6___default()(userTask.deadline).format("YYYY-MM-DD"), className: "fa fa-calendar", "aria-hidden": "true", onClick: function () { } }))),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top taskEdit" },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "editItem", onClick: function () { return _this.props.editTask(userTask); } }))),
                            userTask.subTasks && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "subtasks" }, userTask.subTasks.map(function (subTask) {
                                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: subTask.id },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "checkBox" + (subTask.done ? " checked" : ""), onClick: function (ev) {
                                                return !isWorking &&
                                                    _this.props.setSubTaskDone(userTask, subTask, !subTask.done);
                                            } })),
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: subTask.url || undefined, target: (userTask.url + '').toLowerCase().startsWith(location.host.toLowerCase()) ?
                                                "_self" :
                                                "_blank", className: subTask.url ?
                                                undefined :
                                                'link-less' }, subTask.name)),
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top taskEdit" },
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "editItem", onClick: function () { return _this.props.editSubTask(userTask, subTask); } })));
                            })));
                    }))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "learningGoalTools" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn addOwnGoal", onClick: function () { return _this.props.addOwnTask(_this.props.courseName, lg.name); } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-plus", "aria-hidden": "true" }),
                        " ",
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_9__["FormattedMessage"], { id: 'userTasks.addLearningGoal', defaultMessage: 'Eget arbetsm\u00E5l' }))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null));
        }));
    };
    UserTasksBox.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_10__["LanguageContext"];
    return UserTasksBox;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

function getTaskUrl(userTask, viewCourseUrl) {
    if (userTask.course && userTask.course.length > 0 && userTask.task && userTask.task.length > 0) {
        var courseUrl = Object(_access_control__WEBPACK_IMPORTED_MODULE_3__["preserveImpersonationQuery"])(viewCourseUrl, { courseId: userTask.course[0].id });
        return courseUrl + "#/task/" + userTask.task[0].id;
    }
    return userTask.url;
}
function getSubjectPlannerTaskUrl(userTask) {
    if (userTask.courseInfo && userTask.task && userTask.task.length > 0) {
        var _a = userTask.courseInfo, school = _a.school, course = _a.course, tab = _a.tab;
        var courseUrl = Object(_access_control__WEBPACK_IMPORTED_MODULE_3__["preserveImpersonationQuery"])(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_8__["default"].KED_SUBJECT_PLANNER_URL, {});
        return courseUrl + "#/" + school + "/courses/" + course + "/tabs/" + tab + "/tasks/" + userTask.task[0].id;
    }
    return userTask.url;
}


/***/ }),

/***/ "./src/components/weekplanner/weekplanner-persisted-state.ts":
/*!*******************************************************************!*\
  !*** ./src/components/weekplanner/weekplanner-persisted-state.ts ***!
  \*******************************************************************/
/*! exports provided: WeekPlannerPersistedState */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WeekPlannerPersistedState", function() { return WeekPlannerPersistedState; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_moment_sv_locale__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../globals/moment-sv-locale */ "./src/globals/moment-sv-locale.ts");



var WeekPlannerPersistedState = /** @class */ (function () {
    function WeekPlannerPersistedState(userOrCopy) {
        if (typeof userOrCopy === 'string') {
            this.user = userOrCopy;
            this.lastWrite = Date.now();
            this.weekDate = Object(_globals_moment_sv_locale__WEBPACK_IMPORTED_MODULE_2__["localMoment"])().startOf('week').valueOf();
            this.openCourses = {};
        }
        else {
            Object.assign(this, userOrCopy);
        }
    }
    WeekPlannerPersistedState.load = function (user) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var cookie, storedData, state;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                cookie = localStorage.getItem('WeekPlannerPersistedState2');
                storedData = cookie && JSON.parse(cookie);
                state = new WeekPlannerPersistedState(user);
                if (storedData)
                    Object.assign(state, storedData);
                return [2 /*return*/, state.user === user && !state.isExpired(moment__WEBPACK_IMPORTED_MODULE_1___default()()) ?
                        state : new WeekPlannerPersistedState(user)];
            });
        });
    };
    WeekPlannerPersistedState.prototype.save = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                this.lastWrite = Date.now();
                json = JSON.stringify(this);
                localStorage.setItem('WeekPlannerPersistedState2', json);
                return [2 /*return*/];
            });
        });
    };
    WeekPlannerPersistedState.prototype.isExpired = function (asOf) {
        return moment__WEBPACK_IMPORTED_MODULE_1___default()(this.lastWrite)
            .isBefore(asOf.add(0 - WeekPlannerPersistedState.EXPIRATION_HOURS, 'hours'));
    };
    WeekPlannerPersistedState.EXPIRATION_HOURS = 12;
    WeekPlannerPersistedState.VERSION = 2;
    return WeekPlannerPersistedState;
}());



/***/ }),

/***/ "./src/components/weekplanner/weekplanner.tsx":
/*!****************************************************!*\
  !*** ./src/components/weekplanner/weekplanner.tsx ***!
  \****************************************************/
/*! exports provided: WeekPlanner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WeekPlanner", function() { return WeekPlanner; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _user_tasks_box__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./user-tasks-box */ "./src/components/weekplanner/user-tasks-box.tsx");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _refiner__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./refiner */ "./src/components/weekplanner/refiner.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _utility_components_dialogs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utility-components/dialogs */ "./src/components/utility-components/dialogs.tsx");
/* harmony import */ var _add_custom_goal__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./add-custom-goal */ "./src/components/weekplanner/add-custom-goal.tsx");
/* harmony import */ var _add_custom_task__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./add-custom-task */ "./src/components/weekplanner/add-custom-task.tsx");
/* harmony import */ var _edit_user_task__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./edit-user-task */ "./src/components/weekplanner/edit-user-task.tsx");
/* harmony import */ var _course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../course-builder/sub-components/spinner */ "./src/components/course-builder/sub-components/spinner.tsx");
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");
/* harmony import */ var _utils_pending_job__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../utils/pending-job */ "./src/utils/pending-job.ts");
/* harmony import */ var _add_or_edit_sub_task__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./add-or-edit-sub-task */ "./src/components/weekplanner/add-or-edit-sub-task.tsx");
/* harmony import */ var _utils_weekutil__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../utils/weekutil */ "./src/utils/weekutil.ts");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");
/* harmony import */ var _charts_progress__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../charts/progress */ "./src/components/charts/progress.tsx");
/* harmony import */ var _charts_charts_utils__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../charts/charts-utils */ "./src/components/charts/charts-utils.ts");
/* harmony import */ var _features__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../features */ "./src/features/index.ts");





















var MAX_STRATEGY_LENGTH = 16384;
var MAX_ASSESSMENT_LENGTH = 16384;
var WeekPlanner = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](WeekPlanner, _super);
    function WeekPlanner(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            userTasks: [],
            weekDate: Date.now(),
            openCourses: {},
            dialogs: [],
            saving: false,
            weekTextsUT: null,
            isLoading: true,
            isCopyingTasks: false
        };
        _this.onChange = _this.onChange.bind(_this);
        _this.weekTextsSavingJob = new _utils_pending_job__WEBPACK_IMPORTED_MODULE_13__["PendingJob"](function () { return _this.saveWeekTexts(); });
        return _this;
    }
    WeekPlanner.prototype.componentDidMount = function () {
        this.props.env.userTasksRepo.subscribe(this.onChange);
    };
    WeekPlanner.prototype.componentWillUnmount = function () {
        this.props.env.userTasksRepo.unsubscribe(this.onChange);
        this.weekTextsSavingJob.stop();
    };
    WeekPlanner.prototype.onChange = function (userTasks, persisted, weekTextsUT) {
        var newState = {
            userTasks: userTasks,
            weekDate: persisted.weekDate,
            openCourses: persisted.openCourses,
            weekTextsUT: weekTextsUT,
            isLoading: false
        };
        if (!this.state.weekTextsUT || (weekTextsUT.dateTime !== this.state.weekTextsUT.dateTime)) {
            // Changing week. Reset to new week's values
            newState.strategy = weekTextsUT.weekTexts.strategy;
            newState.assessment = weekTextsUT.weekTexts.assessment;
        }
        this.setState(newState); // React's use of Pick instead of Partial makes things complex here.
    };
    WeekPlanner.prototype.isWeekTextsEdited = function () {
        var _a = this.state, strategy = _a.strategy, assessment = _a.assessment, weekTextsUT = _a.weekTextsUT;
        return !!weekTextsUT && (strategy !== weekTextsUT.weekTexts.strategy || assessment !== weekTextsUT.weekTexts.assessment);
    };
    WeekPlanner.prototype.saveWeekTexts = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, strategy, assessment, weekTextsUT;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        console.log("Saving texts...");
                        _a = this.state, strategy = _a.strategy, assessment = _a.assessment, weekTextsUT = _a.weekTextsUT;
                        if (!this.isWeekTextsEdited()) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.props.env.userTasksRepo.upsert(weekTextsUT, function (ut) {
                                ut.weekTexts = { strategy: strategy, assessment: assessment };
                            })];
                    case 1:
                        _b.sent();
                        _b.label = 2;
                    case 2: return [2 /*return*/];
                }
            });
        });
    };
    WeekPlanner.prototype.prevWeek = function () {
        //this.saveWeekTexts(); 
        var prevWeekObj = Object(_utils_weekutil__WEBPACK_IMPORTED_MODULE_15__["getPrevWeekDate"])(moment__WEBPACK_IMPORTED_MODULE_6___default()(this.state.weekDate));
        this.props.env.userTasksRepo.changeWeek(prevWeekObj.nextDate, prevWeekObj.adjusted);
    };
    WeekPlanner.prototype.nextWeek = function () {
        //this.saveWeekTexts();
        var nextWeekObj = Object(_utils_weekutil__WEBPACK_IMPORTED_MODULE_15__["getNextWeekDate"])(moment__WEBPACK_IMPORTED_MODULE_6___default()(this.state.weekDate));
        this.props.env.userTasksRepo.changeWeek(nextWeekObj.nextDate, nextWeekObj.adjusted);
    };
    WeekPlanner.prototype.openDialog = function (dialog) {
        this.setState({ dialogs: tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](this.state.dialogs, [dialog]) });
    };
    WeekPlanner.prototype.openAddGoalDialog = function () {
        var _this = this;
        this.openDialog(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_custom_goal__WEBPACK_IMPORTED_MODULE_8__["AddCustomGoal"], { onSave: function (learningGoal) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            if (!learningGoal)
                                throw new Error(this.context.intl.formatMessage({ id: 'weekplanner.emptyLearningGoalErr', defaultMessage: 'Lrandemlet kan inte vara tomt' }));
                            if (!!this.state.saving) return [3 /*break*/, 5];
                            this.setState({ saving: true });
                            _a.label = 1;
                        case 1:
                            _a.trys.push([1, , 3, 4]);
                            return [4 /*yield*/, this.addCustomGoal(learningGoal)];
                        case 2:
                            _a.sent();
                            return [3 /*break*/, 4];
                        case 3:
                            this.setState({ saving: false });
                            return [7 /*endfinally*/];
                        case 4:
                            this.closeDialog();
                            _a.label = 5;
                        case 5: return [2 /*return*/];
                    }
                });
            }); } }));
    };
    WeekPlanner.prototype.openAddOwnTaskDialog = function (courseName, learningGoalName) {
        var _this = this;
        this.openDialog(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_custom_task__WEBPACK_IMPORTED_MODULE_9__["AddCustomTask"], { isTask: !courseName, onSave: function (name, description, url) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            if (!name)
                                throw new Error(this.context.intl.formatMessage({ id: 'weekplanner.nameCannotBeEmpty', defaultMessage: 'Namnet kan inte vara tomt' }));
                            if (!!this.state.saving) return [3 /*break*/, 5];
                            this.setState({ saving: true });
                            _a.label = 1;
                        case 1:
                            _a.trys.push([1, , 3, 4]);
                            return [4 /*yield*/, this.addCustomTask(courseName, learningGoalName, name, description, url)];
                        case 2:
                            _a.sent();
                            return [3 /*break*/, 4];
                        case 3:
                            this.setState({ saving: false });
                            return [7 /*endfinally*/];
                        case 4:
                            this.closeDialog();
                            _a.label = 5;
                        case 5: return [2 /*return*/];
                    }
                });
            }); } }));
    };
    WeekPlanner.prototype.editTask = function (userTask) {
        var _this = this;
        this.openDialog(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_edit_user_task__WEBPACK_IMPORTED_MODULE_10__["EditUserTask"], { userTasksRepo: this.props.env.userTasksRepo, userTask: userTask, onUpdate: function (updater) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                var test;
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            test = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, userTask);
                            updater(test);
                            if (!test.name)
                                throw new Error(this.context.intl.formatMessage({ id: 'weekplanner.nameMustNotBeEmpty', defaultMessage: 'Namnet fr inte vara tomt' }));
                            this.closeDialog();
                            return [4 /*yield*/, this.props.env.userTasksRepo.update([userTask], updater)];
                        case 1:
                            _a.sent();
                            return [2 /*return*/];
                    }
                });
            }); }, onDelete: function (id) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            this.closeDialog();
                            return [4 /*yield*/, this.props.env.userTasksRepo.delete([id])];
                        case 1:
                            _a.sent();
                            return [2 /*return*/];
                    }
                });
            }); }, openDialog: function (dialog) { return _this.openDialog(dialog); }, closeDialog: function () { return _this.closeDialog(); } }));
    };
    WeekPlanner.prototype.editSubTask = function (userTask, subTask) {
        var _this = this;
        this.openDialog(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_or_edit_sub_task__WEBPACK_IMPORTED_MODULE_14__["AddOrEditSubTask"], { userTasksRepo: this.props.env.userTasksRepo, mode: "edit", userTask: userTask, subTask: subTask, closeDialog: function () { return _this.closeDialog(); } }));
    };
    WeekPlanner.prototype.closeDialog = function () {
        this.setState({ dialogs: this.state.dialogs.slice(0, this.state.dialogs.length - 1) });
    };
    WeekPlanner.prototype.addCustomGoal = function (learningGoal) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var latestTimeStamp;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        latestTimeStamp = Math.max.apply(Math.max, [this.state.weekDate].concat(this.state.userTasks.map(function (t) { return t.dateTime; })));
                        return [4 /*yield*/, this.props.env.userTasksRepo.insert([{
                                    id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])(),
                                    learningGoal: learningGoal,
                                    dateTime: latestTimeStamp + 2000
                                }])];
                    case 1:
                        _a.sent();
                        return [4 /*yield*/, this.props.env.userTasksRepo.setWeekPlannerBoxOpen("", true)];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    WeekPlanner.prototype.removeLearningGoal = function (learningGoal) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (learningGoal.tasks.length > 0) {
                            if (!confirm(this.context.intl.formatMessage({ id: 'weekplanner.confirmRemoveLearningObjectives', defaultMessage: 'Ta bort lrandeml samt {learningGoalsNumber} uppgifter?' }, { learningGoalsNumber: learningGoal.tasks.length }))) {
                                return [2 /*return*/];
                            }
                        }
                        return [4 /*yield*/, this.props.env.userTasksRepo.delete(learningGoal.allTasks.map(function (t) { return t.id; }))];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    WeekPlanner.prototype.addCustomTask = function (courseName, learningGoal, name, description, url) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var latestTimeStamp;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        latestTimeStamp = Math.max.apply(Math.max, [this.state.weekDate].concat(this.state.userTasks.map(function (t) { return t.dateTime; })));
                        /*const emptyLearningGoalPlaceholder = this.state.userTasks.find(ut =>
                          ut.name == null &&
                          !ut.courseName &&
                          ut.learningGoal === learningGoal);
                    
                        if (emptyLearningGoalPlaceholder) {
                          // Hijack learning-goal placeholder and make it the real task.
                          // This will make the learning goal disappear once this task
                          // is deleted.
                          await userTasksRepo.update([emptyLearningGoalPlaceholder], ut => {
                            Object.assign(ut, { name, description, url });
                          });
                        } else {*/
                        // Add another task to same learning-goal
                        return [4 /*yield*/, this.props.env.userTasksRepo.insert([{
                                    id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])(),
                                    dateTime: latestTimeStamp + 2000,
                                    courseName: courseName,
                                    learningGoal: learningGoal,
                                    name: name,
                                    description: description,
                                    url: url
                                }])];
                    case 1:
                        /*const emptyLearningGoalPlaceholder = this.state.userTasks.find(ut =>
                          ut.name == null &&
                          !ut.courseName &&
                          ut.learningGoal === learningGoal);
                    
                        if (emptyLearningGoalPlaceholder) {
                          // Hijack learning-goal placeholder and make it the real task.
                          // This will make the learning goal disappear once this task
                          // is deleted.
                          await userTasksRepo.update([emptyLearningGoalPlaceholder], ut => {
                            Object.assign(ut, { name, description, url });
                          });
                        } else {*/
                        // Add another task to same learning-goal
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    WeekPlanner.prototype.setIsOpen = function (courseName, isOpen) {
        this.props.env.userTasksRepo.setWeekPlannerBoxOpen(courseName, isOpen);
    };
    WeekPlanner.prototype.setTaskDone = function (task, done) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.props.env.userTasksRepo.setTaskDoneState(task, done)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    WeekPlanner.prototype.setSubTaskDone = function (task, subTask, done) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.props.env.userTasksRepo.setSubTaskDoneState(task, subTask.id, done)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    WeekPlanner.prototype.copyFromPreviousWeek = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, userTasks_1, openCourses, weekDate, prevWeek, prevWeekNo, prevKEDWeek, prevTasks, test, latestTimeStamp_1, copies;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0: return [4 /*yield*/, this.setState({ isCopyingTasks: true })];
                    case 1:
                        _b.sent();
                        _b.label = 2;
                    case 2:
                        _b.trys.push([2, , 5, 6]);
                        _a = this.state, userTasks_1 = _a.userTasks, openCourses = _a.openCourses, weekDate = _a.weekDate;
                        prevWeek = moment__WEBPACK_IMPORTED_MODULE_6___default()(weekDate).add(-1, 'week');
                        prevWeekNo = Object(_utils_weekutil__WEBPACK_IMPORTED_MODULE_15__["getAdjustedWeek"])(prevWeek);
                        prevKEDWeek = Object(_utils_weekutil__WEBPACK_IMPORTED_MODULE_15__["KEDWeek"])(prevWeek.year(), prevWeekNo);
                        return [4 /*yield*/, this.props.env.kedBackendClient.list("usertasks", {
                                from: prevKEDWeek.notBefore,
                                to: prevKEDWeek.notAfter,
                                role: "USER",
                                include: ["task", "course", "acl"],
                                flags: ["includeIdsOnly"]
                            })];
                    case 3:
                        prevTasks = _b.sent();
                        prevTasks = prevTasks
                            .filter(function (prevTask) { return !prevTask.done; }) // Don't copy done tasks
                            .filter(function (prevTask) { return !!prevTask.name; }) // Don't copy empty learning goals
                            .filter(function (prevTask) { return !userTasks_1.some(function (taskOfCurrentWeek) {
                            return taskOfCurrentWeek.name === prevTask.name &&
                                taskOfCurrentWeek.learningGoal === prevTask.learningGoal &&
                                taskOfCurrentWeek.courseName === prevTask.courseName;
                        }); }); // Ignore identical tasks (already copied)
                        test = [weekDate].concat(userTasks_1.map(function (t) { return t.dateTime; }));
                        latestTimeStamp_1 = Math.max.apply(Math.max, [weekDate].concat(userTasks_1.map(function (t) { return t.dateTime; })));
                        copies = prevTasks.sort(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["compareProp"])("dateTime")).map(function (task) {
                            var copy = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, task, { dateTime: latestTimeStamp_1 += 1000 });
                            copy.id = Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])();
                            if (copy.subTasks) {
                                copy.subTasks = copy.subTasks.filter(function (st) { return !st.done; });
                            }
                            delete copy.$etag;
                            return copy;
                        });
                        // Store it
                        return [4 /*yield*/, this.props.env.userTasksRepo.insert(copies)];
                    case 4:
                        // Store it
                        _b.sent();
                        return [3 /*break*/, 6];
                    case 5:
                        this.setState({ isCopyingTasks: false });
                        return [7 /*endfinally*/];
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    WeekPlanner.prototype.getHeaderTitle = function () {
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h4", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.logBook", defaultMessage: "Loggbok" }));
    };
    WeekPlanner.prototype.render = function () {
        var _this = this;
        var weekNumber = moment__WEBPACK_IMPORTED_MODULE_6___default()(this.state.weekDate).week();
        var showProgressCharts = _features__WEBPACK_IMPORTED_MODULE_20__["features"].weekplannerCharts;
        //console.log("Weekydate: "  + new Date(this.state.weekDate) + " which is week no " + weekNumber);
        var currentWeek = moment__WEBPACK_IMPORTED_MODULE_6___default()().week();
        var taskSets = Object(_refiner__WEBPACK_IMPORTED_MODULE_4__["refine"])(this.state.userTasks);
        var _a = this.state, dialogs = _a.dialogs, weekTextsUT = _a.weekTextsUT, strategy = _a.strategy, assessment = _a.assessment, isLoading = _a.isLoading, isCopyingTasks = _a.isCopyingTasks;
        var isSaving = weekTextsUT && (weekTextsUT.$meta === 'adding' || weekTextsUT.$meta === 'updating');
        var isStrategyEdited = !!weekTextsUT && (strategy !== weekTextsUT.weekTexts.strategy);
        var isAssessmentEdited = !!weekTextsUT && (assessment !== weekTextsUT.weekTexts.assessment);
        var enableSaveButton = !isSaving && (isStrategyEdited || isAssessmentEdited);
        var chartTasks = Object(_charts_charts_utils__WEBPACK_IMPORTED_MODULE_19__["getWeekplannerProgressData"])(taskSets);
        var percentage = taskSets.length > 0 ? chartTasks.completedTasks / chartTasks.totalNumberOfTasks * 100 : 0;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "ked_boxed weekPlanner" + (weekNumber === currentWeek ? " currentWeek" : ""), onKeyDown: function (ev) {
                    if (ev.which === 83 && ev.ctrlKey) {
                        ev.preventDefault();
                        if (!isSaving && _this.isWeekTextsEdited()) {
                            _this.weekTextsSavingJob.triggerChange(0);
                        }
                    }
                } },
                showProgressCharts && this.getHeaderTitle(),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "widgets" },
                    showProgressCharts ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "progressBar" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_charts_progress__WEBPACK_IMPORTED_MODULE_18__["Progress"], { percentage: percentage })) : this.getHeaderTitle(),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "weekSelect" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.weekNumber", values: { weekNumber: weekNumber }, defaultMessage: "Vecka {weekNumber}" }))),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn-group" },
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { className: "btn", onClick: function () { return _this.prevWeek(); } },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-angle-left", "aria-hidden": "true" })),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { className: "btn", onClick: function () { return _this.nextWeek(); } },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-angle-right", "aria-hidden": "true" })))))),
                taskSets.length > 0 && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                taskSets.map(function (props) {
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_user_tasks_box__WEBPACK_IMPORTED_MODULE_2__["UserTasksBox"], tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({ key: props.courseName }, props, { courseName: props.courseName, learningGoals: props.learningGoals, viewCourseUrl: _this.props.viewCourseUrl, openCourses: _this.state.openCourses, addOwnTask: function (courseName, learningGoalName) { return _this.openAddOwnTaskDialog(courseName, learningGoalName); }, setIsOpen: _this.setIsOpen.bind(_this), setTaskDone: _this.setTaskDone.bind(_this), setSubTaskDone: _this.setSubTaskDone.bind(_this), editTask: function (task) { return _this.editTask(task); }, editSubTask: function (task, subTask) { return _this.editSubTask(task, subTask); }, removeLearningGoal: function (lg) { return _this.removeLearningGoal(lg); }, displayProgress: showProgressCharts, progressData: chartTasks.subjectData[props.courseName] }));
                }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                isLoading ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_11__["Spinner"], null) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn", onClick: function (ev) { return _this.openAddGoalDialog(); } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-list-alt", "aria-hidden": "true" }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.learningGoal", defaultMessage: "Eget l\u00E4randem\u00E5l" })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn", style: isCopyingTasks ? { opacity: 0.5 } : undefined, onClick: function (ev) { return (!isCopyingTasks) && _this.copyFromPreviousWeek(); } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-clone", "aria-hidden": "true" }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.copyPreviousWeekTaks", defaultMessage: "Kopiera ej klara fr\u00E5n f\u00F6reg\u00E5ende vecka" })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_12__["OpenCloseBox"], { title: react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h5", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.strategyAndEvaluation", defaultMessage: "Strategi & Utv\u00E4rdering" })), headerOpen: this.state.openCourses["StratUtv"], onOpenClose: function (becameOpen) { return _this.setIsOpen("StratUtv", becameOpen); } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h3", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.strategy", defaultMessage: "Strategi" })),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.strategyDescription", defaultMessage: "Hur jag ska g\u00F6ra f\u00F6r att l\u00E4ra mig." })),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("textarea", { className: "weekplanner-textarea", disabled: this.props.env.tutored, value: strategy && strategy.substr(0, MAX_STRATEGY_LENGTH), onChange: function (ev) {
                                _this.setState({ strategy: (ev.target.value || '').substr(0, MAX_STRATEGY_LENGTH) });
                                _this.weekTextsSavingJob.triggerChange(500);
                            } }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h3", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.evaluation", defaultMessage: "Utv\u00E4rdering" })),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.evaluationDescription", defaultMessage: "Reflektion kring din arbetsinsats och dina valda strategier under veckan.Utv\u00E4rdera i f\u00F6rh\u00E5llande till dina m\u00E5l." })),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("textarea", { className: "weekplanner-textarea", value: assessment && assessment.substr(0, MAX_ASSESSMENT_LENGTH), disabled: this.props.env.tutored, onChange: function (ev) {
                                _this.setState({ assessment: (ev.target.value || '').substr(0, MAX_ASSESSMENT_LENGTH) });
                                _this.weekTextsSavingJob.triggerChange(500);
                            } }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn", tabIndex: 0, style: enableSaveButton ? {} : { opacity: 0.5 }, onClick: function () { return !isSaving && _this.weekTextsSavingJob.triggerChange(0); } },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-floppy-o", "aria-hidden": "true" }),
                            enableSaveButton ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "common.save", defaultMessage: " Spara" }) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "common.saved", defaultMessage: " Sparad" }))))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_dialogs__WEBPACK_IMPORTED_MODULE_7__["Dialogs"], { dialogs: dialogs, popDialog: function () {
                    _this.setState(function (_a) {
                        var dialogs = _a.dialogs;
                        return ({ dialogs: dialogs.slice(0, dialogs.length - 1) });
                    });
                } }));
    };
    WeekPlanner.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_17__["LanguageContext"];
    return WeekPlanner;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/contracts/ked-models.ts":
/*!*************************************!*\
  !*** ./src/contracts/ked-models.ts ***!
  \*************************************/
/*! exports provided: Course, futureAbilities */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Course", function() { return Course; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "futureAbilities", function() { return futureAbilities; });
var Course = /** @class */ (function () {
    function Course() {
    }
    return Course;
}());

var futureAbilities = [
    "Lra att lra",
    "Samarbeta",
    "Agera globalt",
    "Visa handlingskraft",
    "Vara innovativ",
    "Leva digitalt"
];


/***/ }),

/***/ "./src/features/feature-flags.json":
/*!*****************************************!*\
  !*** ./src/features/feature-flags.json ***!
  \*****************************************/
/*! exports provided: picker, ksTutorComment, kgTutorComment, termplannerCharts, weekplannerCharts, teacherRights, studyGroups, cbCollapseBoxes, ksAssignments, default */
/***/ (function(module) {

module.exports = {"picker":"Integrate coursebuilder and subjectplanner with Google Picker","ksTutorComment":"Integrate KSTermplanner with tutor comments","kgTutorComment":"Integrate KSTermplanner  with tutor comments","termplannerCharts":"Integrate KSTermplanner with progress charts","weekplannerCharts":"Integrate Weekplanner with progress charts","teacherRights":"Activate course builder teacher rights","studyGroups":"Add study groups and google classroom functionality","cbCollapseBoxes":"Course Builder: Collapse modules by default","ksAssignments":"KS show hand-in assignments"};

/***/ }),

/***/ "./src/features/features.ts":
/*!**********************************!*\
  !*** ./src/features/features.ts ***!
  \**********************************/
/*! exports provided: Features, features */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Features", function() { return Features; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "features", function() { return features; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_query_string__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/query-string */ "./src/utils/query-string.ts");
/* harmony import */ var _feature_flags_json__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./feature-flags.json */ "./src/features/feature-flags.json");
var _feature_flags_json__WEBPACK_IMPORTED_MODULE_2___namespace = /*#__PURE__*/__webpack_require__.t(/*! ./feature-flags.json */ "./src/features/feature-flags.json", 1);
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");




var Features = /** @class */ (function () {
    function Features() {
        var e_1, _a;
        this._initialized = false;
        var _loop_1 = function (featureName) {
            Object.defineProperty(this_1, featureName, {
                get: function () {
                    if (!this._initialized)
                        this.init();
                    return this._features[featureName];
                },
                set: function (value) {
                    throw new Error('Feature flags cannot be set here');
                }
            });
        };
        var this_1 = this;
        try {
            for (var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](Object.keys(_feature_flags_json__WEBPACK_IMPORTED_MODULE_2__)), _c = _b.next(); !_c.done; _c = _b.next()) {
                var featureName = _c.value;
                _loop_1(featureName);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
    }
    Features.prototype.init = function () {
        var e_2, _a;
        if (this._initialized)
            return;
        var turnedOnFeatures = (_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_3__["cfg"].KED_FEATURES || "").split(',').map(function (name) { return name.trim().toLowerCase(); });
        var query = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_1__["parseQueryString"])(location.search, { toLower: true });
        if (query.testversion) {
            turnedOnFeatures = ["*"];
        }
        if (query.features) {
            turnedOnFeatures = query.features
                .split(',')
                .map(function (feature) { return feature.trim().toLowerCase(); });
        }
        var turnOnAll = turnedOnFeatures.includes('*');
        this._features = {};
        try {
            for (var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](Object.keys(_feature_flags_json__WEBPACK_IMPORTED_MODULE_2__)), _c = _b.next(); !_c.done; _c = _b.next()) {
                var featureName = _c.value;
                this._features[featureName] = turnOnAll ||
                    turnedOnFeatures.includes(featureName.toLowerCase());
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_2) throw e_2.error; }
        }
        this._initialized = true;
    };
    return Features;
}());

var features = new Features();


/***/ }),

/***/ "./src/features/index.ts":
/*!*******************************!*\
  !*** ./src/features/index.ts ***!
  \*******************************/
/*! exports provided: Features, features */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _features__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./features */ "./src/features/features.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Features", function() { return _features__WEBPACK_IMPORTED_MODULE_0__["Features"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "features", function() { return _features__WEBPACK_IMPORTED_MODULE_0__["features"]; });




/***/ }),

/***/ "./src/global-setters/configure.ts":
/*!*****************************************!*\
  !*** ./src/global-setters/configure.ts ***!
  \*****************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(process) {/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");

_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].ENVIRONMENT = "test";
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_API_URL = "https://backend.kedschools.com/kedbackend-next/api/"; // "https://kedbackendtest.azurewebsites.net/api/"
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].EDS_API_URL = "https://edsportalowinapitest.azurewebsites.net/studentportal/"; // "https://edsportalowinapi.azurewebsites.net/api/"
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_TOKEN_URL = ""; // "https://kedauthtest.azurewebsites.net/token"
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_CLIENT_ID = ""; // "devclient", "testclient", "..."
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_CLIENT_SECRET = "";
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_REALM = "SE1"; // "SE1"
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_LOCALE = _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_LOCALE || "sv"; // "sv", "en". Only set from process.env if not set from SiteVision element config.
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_SCHOOL_LOCALE = _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_SCHOOL_LOCALE || "sv"; // "sv", "en_sin", "en_nin". Only set from process.env if not set from SiteVision element config.
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_RESOURCES_URL = _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_RESOURCES_URL || process.env.KED_RESOURCES_URL;

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../node_modules/process/browser.js */ "./node_modules/process/browser.js")))

/***/ }),

/***/ "./src/global-setters/set-all.ts":
/*!***************************************!*\
  !*** ./src/global-setters/set-all.ts ***!
  \***************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _configure__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./configure */ "./src/global-setters/configure.ts");
/* harmony import */ var _set_bearer_providers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./set-bearer-providers */ "./src/global-setters/set-bearer-providers.ts");
/* harmony import */ var _set_ked_backend_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./set-ked-backend-client */ "./src/global-setters/set-ked-backend-client.ts");
/* harmony import */ var _set_eds_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./set-eds-client */ "./src/global-setters/set-eds-client.ts");
/* These scripts assume some of the global vars have already been set:
  * KED.cfg
  * KED.env.currentUser

  The rest will be set here (client side)
*/






/***/ }),

/***/ "./src/global-setters/set-bearer-providers.ts":
/*!****************************************************!*\
  !*** ./src/global-setters/set-bearer-providers.ts ***!
  \****************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_query_string__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/query-string */ "./src/utils/query-string.ts");
/* harmony import */ var kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend/clientweb */ "./kedbackend/clientweb.js");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _access_control_index__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../access-control/index */ "./src/access-control/index.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/utils */ "./src/utils/utils.ts");








function getMergedTokenPath(tokenPath, locationSearch, scopes) {
    // Merge configured query params of token path with params given to current page
    var currentQuery = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_1__["parseQueryString"])(locationSearch);
    var impersonationProps = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_7__["cherryPickProps"])(currentQuery, _access_control_index__WEBPACK_IMPORTED_MODULE_6__["IMPERSONATION_QUERY_PARAMS"]);
    var _a = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_1__["splitUrlAndQuery"])(tokenPath), 2), tokenPathWithoutQuery = _a[0], tokenQueryString = _a[1];
    var tokenPathQuery = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_1__["parseQueryString"])(tokenQueryString);
    return tokenPathWithoutQuery + Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_1__["generateQueryString"])(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, tokenPathQuery, impersonationProps, { scopes: scopes.join(',') }));
}
function getTokenId(mergedTokenPath, userEmail) {
    return mergedTokenPath + "/" + userEmail;
}
function saveUserInfo(user, tokenId) {
    _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser = user;
    sessionStorage.setItem("userInfo" + tokenId, JSON.stringify(user));
}
function loadUserInfo(tokenId) {
    var storedSessionUser = sessionStorage.getItem("userInfo" + tokenId);
    if (storedSessionUser) {
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser = JSON.parse(storedSessionUser);
    }
}
function createBearerProvider(mergedTokenPath, userEmail) {
    var tokenId = getTokenId(mergedTokenPath, userEmail);
    return new kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__["WebServerBearerProvider"](mergedTokenPath, function (responseText) {
        var res = JSON.parse(responseText);
        if (!res.ok)
            throw new Error(res.error);
        if (res.user) {
            saveUserInfo(res.user, tokenId);
        }
        return { token: res.token, expires: Date.now() + 59 * 60 * 1000 };
    }, tokenId);
}
function createGoogleTokenProvider(mergedTokenPath, userEmail) {
    var tokenId = getTokenId(mergedTokenPath, userEmail);
    return new kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__["WebServerBearerProvider"](mergedTokenPath, function (responseText) {
        var res = JSON.parse(responseText);
        if (!res.ok)
            throw new Error(res.error);
        return { token: res.token, expires: Date.now() + 59 * 60 * 1000 };
    }, tokenId);
}
function createTestTokenProvider(tokenUrl, user, scopes) {
    return new kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["KedBearerProvider"](kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__["isomorphic"], kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__["storage"], tokenUrl + user.mail + location.search, _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_CLIENT_ID, _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_CLIENT_SECRET, tokenUrl, {
        email: user.mail.toLowerCase(),
        roles: user.roles,
        school: user.school,
        schoolType: user.schoolType,
        scopes: scopes
    });
}
// env.currentUser.mail is set by SiteVision server initially.
// A response from /api/token may change the mail attribute of the current
// user, so env.currentUser.mail may be different after getting a response.
// However, the initial value is valuable always in order to distinguish the case
// when one normal user logs out and another user logs in.
var initialUserEmail = _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser && _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser.mail; // Initial value of mail. May change.
if (initialUserEmail) {
    // KED
    if (_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_TOKEN_PATH) {
        //
        //
        // Production / SiteVision proxied /api/token to request tokens from:
        //
        //
        var mergedTokenPath = getMergedTokenPath(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_TOKEN_PATH, location.search, [
            "kedbackend",
            "EDS",
        ]);
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].bearerProvider = createBearerProvider(mergedTokenPath, initialUserEmail);
        loadUserInfo(getTokenId(mergedTokenPath, initialUserEmail));
        // Google
        var googleMergedPath = getMergedTokenPath(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_TOKEN_PATH, location.search, [
            "https://www.googleapis.com/auth/calendar.readonly",
            "https://www.googleapis.com/auth/drive"
        ]);
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].googleTokenProvider = createGoogleTokenProvider(googleMergedPath, initialUserEmail);
    }
    else if (_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_TOKEN_URL && _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_CLIENT_ID && _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_CLIENT_SECRET) {
        //
        //
        // Test - go directly to KEDAUTH server to retrieve tokens
        //
        //
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].bearerProvider = createTestTokenProvider(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_TOKEN_URL, _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser, [
            "kedbackend",
            "EDS",
        ]);
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].googleTokenProvider = createTestTokenProvider(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_TOKEN_URL + "/google", _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser, [
            "https://www.googleapis.com/auth/calendar.readonly",
            "https://www.googleapis.com/auth/drive"
        ]);
    }
    else {
        throw new Error("Missing configuration parameter KED_TOKEN_PATH");
    }
}


/***/ }),

/***/ "./src/global-setters/set-eds-client.ts":
/*!**********************************************!*\
  !*** ./src/global-setters/set-eds-client.ts ***!
  \**********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend/clientweb */ "./kedbackend/clientweb.js");
/* harmony import */ var _apis_edsclient__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../apis/edsclient */ "./src/apis/edsclient.ts");




_globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].edsClient = new _apis_edsclient__WEBPACK_IMPORTED_MODULE_3__["EdsClient"](kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__["isomorphic"], _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_1__["default"].EDS_API_URL, _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].bearerProvider, function () { return _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser.mail; });


/***/ }),

/***/ "./src/global-setters/set-ked-backend-client.ts":
/*!******************************************************!*\
  !*** ./src/global-setters/set-ked-backend-client.ts ***!
  \******************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend/clientweb */ "./kedbackend/clientweb.js");



_globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].kedBackendClient = new kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__["KedBackendClientWeb"](_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_1__["default"].KED_API_URL, _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].bearerProvider);


/***/ }),

/***/ "./src/globals/KED.cfg.ts":
/*!********************************!*\
  !*** ./src/globals/KED.cfg.ts ***!
  \********************************/
/*! exports provided: default, cfg */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cfg", function() { return cfg; });
/* harmony import */ var _KED__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./KED */ "./src/globals/KED.ts");

;
if (!_KED__WEBPACK_IMPORTED_MODULE_0__["default"].cfg)
    _KED__WEBPACK_IMPORTED_MODULE_0__["default"].cfg = {};
/* harmony default export */ __webpack_exports__["default"] = (_KED__WEBPACK_IMPORTED_MODULE_0__["default"].cfg);
var cfg = _KED__WEBPACK_IMPORTED_MODULE_0__["default"].cfg;


/***/ }),

/***/ "./src/globals/KED.env.ts":
/*!********************************!*\
  !*** ./src/globals/KED.env.ts ***!
  \********************************/
/*! exports provided: default, env */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "env", function() { return env; });
/* harmony import */ var _ked__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ked */ "./src/globals/ked.ts");

if (!_ked__WEBPACK_IMPORTED_MODULE_0__["default"].env)
    _ked__WEBPACK_IMPORTED_MODULE_0__["default"].env = {};
/* harmony default export */ __webpack_exports__["default"] = (_ked__WEBPACK_IMPORTED_MODULE_0__["default"].env);
var env = _ked__WEBPACK_IMPORTED_MODULE_0__["default"].env;


/***/ }),

/***/ "./src/globals/KED.ts":
/*!****************************!*\
  !*** ./src/globals/KED.ts ***!
  \****************************/
/*! exports provided: KED_NAMESPACE, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KED_NAMESPACE", function() { return KED_NAMESPACE; });
var KED_NAMESPACE = "KED";
var result = typeof KED === 'undefined' ? {} : KED;
if (typeof window !== 'undefined' && typeof KED === 'undefined') {
    window[KED_NAMESPACE] = result;
}
/* harmony default export */ __webpack_exports__["default"] = (result);


/***/ }),

/***/ "./src/globals/db.ts":
/*!***************************!*\
  !*** ./src/globals/db.ts ***!
  \***************************/
/*! exports provided: db, globalId, Schools, CourseInstances */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "db", function() { return db; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "globalId", function() { return globalId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Schools", function() { return Schools; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CourseInstances", function() { return CourseInstances; });
/* harmony import */ var _KED_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var kedbackend_repo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kedbackend/repo */ "./kedbackend/repo.js");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _KED_cfg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./KED.cfg */ "./src/globals/KED.cfg.ts");




var db = new kedbackend_repo__WEBPACK_IMPORTED_MODULE_1__["KedBackendRepo"](function () { return _KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].kedBackendClient; }, function () { return _KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser ?
    _KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser.mail :
    ""; }, function () { return _KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser ?
    _KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser.displayName || _KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser.mail :
    ""; });
var globalId = Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_2__["getGlobalId"])(_KED_cfg__WEBPACK_IMPORTED_MODULE_3__["default"].KED_REALM);
var Schools = {
    standardSchool: db.schools.name("standard").cacheOptimized().single(),
    get mySchool() { return db.schools.name(_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser.school).cacheOptimized().single(); }
};
var CourseInstances = {
    getBranchId: function (school, courseId) {
        return school.switchMap(function (school) {
            return db.branches
                .hasEdgesFrom([school.officialBranchId])
                .name("draft")
                .tags(courseId)
                .idsOnly()
                .map(function (_a) {
                var id = _a.id;
                return id;
            })
                .toValue()
                .map(function (ids) { return ids.length > 0 ? ids[0] : undefined; });
        });
    },
    /** Get a DRAFT branch for given course ID and given school.
     * If there is not yet such a branch, create it using mutationsOnEmpty() which will
     * lead to the C# code DocumentRepository.ReadOrMutate() via DocumentController.
     */
    getOrCreateBranchId: function (school, courseId) {
        return db.courseInstances.idsOnly().id(courseId).switchMap(function () {
            return school.switchMap(function (school) {
                return db.branches
                    .hasEdgesFrom([school.officialBranchId])
                    .name("draft")
                    .tags(courseId)
                    .idsOnly()
                    .mutationsOnEmpty(function (tx) {
                    // These 2 mutations will occur server side, atomically.
                    // Will be sent on each request in the query, but will only execute if query results in zero items.
                    //console.log("School:", school);
                    var id = Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_2__["createUUID"])();
                    tx.add("branches", {
                        id: id,
                        acl: [
                            "role:USER:R",
                            "schoolRole:" + school.name + "/EMPLOYEE:S"
                        ],
                        name: 'draft',
                        schoolId: school.id,
                        treeParentId: school.officialBranchId,
                        tags: [courseId]
                    });
                    // Approving the branch makes sure that it was created by an EMPLOYEE on given school.
                    tx.link2("branches", school.officialBranchId, "approvedChildren", id);
                })
                    .single()
                    .map(function (_a) {
                    var id = _a.id;
                    return id;
                });
            });
        });
    },
    getAllDescendantIds: function (courseId) {
        return db.courseBlocks.tags(courseId).idsOnly().concat(db.courseContents.tags(courseId).idsOnly()).concat(db.courseTabs.tags(courseId).idsOnly()).concat(db.tasks.tags(courseId).idsOnly())
            .map(function (x) { return x.id; });
    }
};


/***/ }),

/***/ "./src/globals/ked.ts":
/*!****************************!*\
  !*** ./src/globals/ked.ts ***!
  \****************************/
/*! exports provided: KED_NAMESPACE, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KED_NAMESPACE", function() { return KED_NAMESPACE; });
var KED_NAMESPACE = "KED";
var result = typeof KED === 'undefined' ? {} : KED;
if (typeof window !== 'undefined' && typeof KED === 'undefined') {
    window[KED_NAMESPACE] = result;
}
/* harmony default export */ __webpack_exports__["default"] = (result);


/***/ }),

/***/ "./src/globals/moment-sv-locale.ts":
/*!*****************************************!*\
  !*** ./src/globals/moment-sv-locale.ts ***!
  \*****************************************/
/*! exports provided: localMoment */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "localMoment", function() { return localMoment; });
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");


if (_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_1__["default"].KED_LOCALE === "sv") {
    moment__WEBPACK_IMPORTED_MODULE_0___default.a.updateLocale('sv', {
        months: 'januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december'.split('_'),
        monthsShort: 'jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec'.split('_'),
        weekdays: 'sndag_mndag_tisdag_onsdag_torsdag_fredag_lrdag'.split('_'),
        weekdaysShort: 'sn_mn_tis_ons_tor_fre_lr'.split('_'),
        weekdaysMin: 's_m_ti_on_to_fr_l'.split('_'),
        longDateFormat: {
            LT: 'HH:mm',
            LTS: 'HH:mm:ss',
            L: 'YYYY-MM-DD',
            LL: 'D MMMM YYYY',
            LLL: 'D MMMM YYYY [kl.] HH:mm',
            LLLL: 'dddd D MMMM YYYY [kl.] HH:mm',
            lll: 'D MMM YYYY HH:mm',
            llll: 'ddd D MMM YYYY HH:mm'
        },
        calendar: {
            sameDay: '[Idag] LT',
            nextDay: '[Imorgon] LT',
            lastDay: '[Igr] LT',
            nextWeek: '[P] dddd LT',
            lastWeek: '[I] dddd[s] LT',
            sameElse: 'L'
        },
        relativeTime: {
            future: 'om %s',
            past: 'fr %s sedan',
            s: 'ngra sekunder',
            ss: '%d sekunder',
            m: 'en minut',
            mm: '%d minuter',
            h: 'en timme',
            hh: '%d timmar',
            d: 'en dag',
            dd: '%d dagar',
            M: 'en mnad',
            MM: '%d mnader',
            y: 'ett r',
            yy: '%d r'
        },
        dayOfMonthOrdinalParse: /\d{1,2}(e|a)/,
        ordinal: function (number) {
            var b = number % 10, output = (~~(number % 100 / 10) === 1) ? 'e' :
                (b === 1) ? 'a' :
                    (b === 2) ? 'a' :
                        (b === 3) ? 'e' : 'e';
            return number + output;
        },
        week: {
            dow: 1,
            doy: 4 // The week that contains Jan 4th is the first week of the year.
        }
    });
}
var localMoment = function () {
    return moment__WEBPACK_IMPORTED_MODULE_0___default.a.apply(this, arguments).locale(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_1__["default"].KED_LOCALE);
};


/***/ }),

/***/ "./src/repos/ked-repo.ts":
/*!*******************************!*\
  !*** ./src/repos/ked-repo.ts ***!
  \*******************************/
/*! exports provided: KedRepo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedRepo", function() { return KedRepo; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _repo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./repo */ "./src/repos/repo.ts");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");



var KedRepo = /** @class */ (function () {
    function KedRepo(options) {
        var _this = this;
        var table = options.table, getClient = options.getClient, getQueryOptions = options.getQueryOptions;
        this.mem = new _repo__WEBPACK_IMPORTED_MODULE_1__["Repo"]({ query: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                var queryOptions;
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                    switch (_a.label) {
                        case 0: return [4 /*yield*/, getQueryOptions()];
                        case 1:
                            queryOptions = _a.sent();
                            return [4 /*yield*/, getClient().list(table, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, queryOptions, { cacheBust: this.getCacheBust() }))];
                        case 2: return [2 /*return*/, _a.sent()];
                    }
                });
            }); } });
        this.options = options;
    }
    KedRepo.prototype.getCacheBust = function () {
        var _a = this.options, table = _a.table, user = _a.user;
        var cacheBust = localStorage.getItem('cache-bust-' + table + '-' + user);
        return cacheBust || this.regenerateCacheBust();
    };
    KedRepo.prototype.regenerateCacheBust = function () {
        var _a = this.options, table = _a.table, user = _a.user;
        var cacheBust = Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_2__["createUUID"])();
        localStorage.setItem('cache-bust-' + table + '-' + user, cacheBust);
        return cacheBust;
    };
    KedRepo.prototype.upsert = function (item, updater) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var updatedItem;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!!item.$etag) return [3 /*break*/, 2];
                        updatedItem = Object.assign({}, item);
                        updater(updatedItem);
                        return [4 /*yield*/, this.insert([updatedItem])];
                    case 1: return [2 /*return*/, _a.sent()];
                    case 2: 
                    // We have an $etag, so we can expect it to live on the server.
                    // However, take care of the unlikely situation that it was deleted from server,
                    // and if so, insert it again.
                    return [4 /*yield*/, this.update([item], updater).catch(function (e) {
                            if (e.name === "http404") {
                                var updatedItem = Object.assign({}, item);
                                updater(updatedItem);
                                return _this.insert([updatedItem]);
                            }
                            return Promise.reject(e);
                        })];
                    case 3:
                        // We have an $etag, so we can expect it to live on the server.
                        // However, take care of the unlikely situation that it was deleted from server,
                        // and if so, insert it again.
                        _a.sent();
                        _a.label = 4;
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    KedRepo.prototype.update = function (items, updater) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, getClient, optimistic, table, client, modifiedItems, res;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = this.options, getClient = _a.getClient, optimistic = _a.optimistic, table = _a.table;
                        client = getClient();
                        modifiedItems = items.map(function (item) {
                            var memRepoItem = _this.mem.items.find(function (it) { return it.id === item.id; });
                            item = Object.assign({}, memRepoItem || item);
                            updater(item);
                            return item;
                        });
                        if (!optimistic) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.mem.update(modifiedItems.map(function (x) { return Object.assign({}, x, { $meta: 'updating' }); }))];
                    case 1:
                        _b.sent();
                        _b.label = 2;
                    case 2: return [4 /*yield*/, client.do(function (br) { return modifiedItems.forEach(function (item) { return br.put(table, item); }); })
                            .catch(function (e) { return e.name === "http409" ? // conflict
                            // Get a fresh version from server:
                            client.list(table, { ids: items.map(function (item) { return item.id; }) }, { cache: 'no-cache' }).then(function (freshItems) {
                                // Update local version:
                                var modifiedItems = freshItems.map(function (freshItem) {
                                    // Clone the fresh item
                                    var modified = Object.assign({}, freshItem);
                                    // Re-run the updater on the clone:
                                    updater(modified);
                                    return modified;
                                });
                                // Re-do the the put operation towards the server.
                                return client.do(function (br) { return modifiedItems.forEach(function (item) { return br.put(table, item); }); });
                            }) :
                            // Other unexpected error:
                            Promise.resolve(optimistic &&
                                _this.mem.update(items)) // Undo optimistic update
                                .then(function () {
                                return Promise.reject(e); // Reject with the error no matter.
                            }); })];
                    case 3:
                        res = _b.sent();
                        this.regenerateCacheBust();
                        modifiedItems.forEach(function (item) {
                            item.$etag = res.newEtags[item.id];
                            item.$meta = undefined;
                        });
                        return [4 /*yield*/, this.mem.update(modifiedItems)];
                    case 4:
                        _b.sent(); // Ensures new etag is is applied on next action.
                        return [2 /*return*/];
                }
            });
        });
    };
    KedRepo.prototype.stripGraphs = function (items, graphs) {
        return items.map(function (item) {
            var clone = Object.assign({}, item);
            graphs.forEach(function (graph) {
                if (item[graph]) {
                    clone[graph] = item[graph].map(function (doc) { return ({ id: doc.id }); });
                }
            });
            return clone;
        });
    };
    KedRepo.prototype.insert = function (items) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, getClient, optimistic, table, getQueryOptions, client, queryOptions, graphs, stripped, br, _loop_1, stripped_1, stripped_1_1, item, res;
            var e_1, _b;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _a = this.options, getClient = _a.getClient, optimistic = _a.optimistic, table = _a.table, getQueryOptions = _a.getQueryOptions;
                        client = getClient();
                        return [4 /*yield*/, getQueryOptions()];
                    case 1:
                        queryOptions = _c.sent();
                        graphs = [].concat(queryOptions.include);
                        // Give IDs to each item:
                        items = items.map(function (item) { return item.id ? item : Object.assign({}, item, { id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_2__["createUUID"])() }); });
                        stripped = this.stripGraphs(items, graphs);
                        if (!optimistic) return [3 /*break*/, 3];
                        return [4 /*yield*/, this.mem.insert(stripped.map(function (x) { return Object.assign({}, x, { $meta: 'adding' }); }))];
                    case 2:
                        _c.sent();
                        _c.label = 3;
                    case 3:
                        br = new kedbackend_client__WEBPACK_IMPORTED_MODULE_2__["BatchRunner"]();
                        _loop_1 = function (item) {
                            var e_2, _a;
                            var _loop_2 = function (graph) {
                                var foreignItems = item[graph];
                                if (foreignItems) {
                                    foreignItems.forEach(function (doc) {
                                        br.link2(table, item.id, graph, doc.id);
                                    });
                                }
                            };
                            try {
                                // Also add links to all foreign related items:
                                for (var graphs_1 = (e_2 = void 0, tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](graphs)), graphs_1_1 = graphs_1.next(); !graphs_1_1.done; graphs_1_1 = graphs_1.next()) {
                                    var graph = graphs_1_1.value;
                                    _loop_2(graph);
                                }
                            }
                            catch (e_2_1) { e_2 = { error: e_2_1 }; }
                            finally {
                                try {
                                    if (graphs_1_1 && !graphs_1_1.done && (_a = graphs_1.return)) _a.call(graphs_1);
                                }
                                finally { if (e_2) throw e_2.error; }
                            }
                            br.add(table, item);
                        };
                        try {
                            for (stripped_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](stripped), stripped_1_1 = stripped_1.next(); !stripped_1_1.done; stripped_1_1 = stripped_1.next()) {
                                item = stripped_1_1.value;
                                _loop_1(item);
                            }
                        }
                        catch (e_1_1) { e_1 = { error: e_1_1 }; }
                        finally {
                            try {
                                if (stripped_1_1 && !stripped_1_1.done && (_b = stripped_1.return)) _b.call(stripped_1);
                            }
                            finally { if (e_1) throw e_1.error; }
                        }
                        return [4 /*yield*/, client.batch(br.mutationRequests).catch(function (e) {
                                if (optimistic)
                                    _this.mem.delete(items.map(function (item) { return item.id; }));
                                return Promise.reject(e);
                            })];
                    case 4:
                        res = _c.sent();
                        this.regenerateCacheBust();
                        items.forEach(function (item) { return item.$etag = res.newEtags[item.id]; });
                        if (!optimistic) return [3 /*break*/, 6];
                        return [4 /*yield*/, this.mem.update(items)];
                    case 5:
                        _c.sent(); // Update with new $etag.
                        return [3 /*break*/, 8];
                    case 6: return [4 /*yield*/, this.mem.insert(items)];
                    case 7:
                        _c.sent();
                        _c.label = 8;
                    case 8: return [2 /*return*/];
                }
            });
        });
    };
    KedRepo.prototype.delete = function (ids) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, getClient, optimistic, table, client, res;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = this.options, getClient = _a.getClient, optimistic = _a.optimistic, table = _a.table;
                        client = getClient();
                        if (!optimistic) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.mem.update(ids
                                .map(function (id) { return _this.mem.items.find(function (x) { return x.id === id; }); })
                                .filter(function (x) { return x; })
                                .map(function (x) { return Object.assign({}, x, { $meta: 'deleting' }); }))];
                    case 1:
                        _b.sent();
                        _b.label = 2;
                    case 2: return [4 /*yield*/, client.do(function (br) { return ids.forEach(function (id) { return br.delete(table, id); }); }).catch(function (e) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                            var _this = this;
                            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                                switch (_a.label) {
                                    case 0:
                                        if (!optimistic) return [3 /*break*/, 2];
                                        return [4 /*yield*/, this.mem.update(ids
                                                .map(function (id) { return _this.mem.items.find(function (x) { return x.id === id; }); })
                                                .filter(function (x) { return x; })
                                                .map(function (x) {
                                                x = Object.assign({}, x);
                                                delete x.$meta;
                                                return x;
                                            }))];
                                    case 1:
                                        _a.sent();
                                        _a.label = 2;
                                    case 2: throw e;
                                }
                            });
                        }); })];
                    case 3:
                        res = _b.sent();
                        this.regenerateCacheBust();
                        return [4 /*yield*/, this.mem.delete(ids)];
                    case 4:
                        _b.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    return KedRepo;
}());



/***/ }),

/***/ "./src/repos/repo.ts":
/*!***************************!*\
  !*** ./src/repos/repo.ts ***!
  \***************************/
/*! exports provided: Repo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Repo", function() { return Repo; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

var Repo = /** @class */ (function () {
    function Repo(comm) {
        this.comm = comm;
        this.listPromise = null;
        this.items = null;
        this.subscribers = [];
    }
    Repo.prototype.subscribe = function (subscriber) {
        var _this = this;
        return this.ensureHasData().then(function () {
            subscriber(_this.items, _this.error);
            _this.subscribers.push(subscriber);
        });
    };
    Repo.prototype.unsubscribe = function (subscriber) {
        this.subscribers = this.subscribers.filter(function (s) { return s !== subscriber; });
    };
    Repo.prototype.notifySubscribers = function () {
        var _this = this;
        this.subscribers.forEach(function (s) { return s(_this.items, _this.error); });
    };
    Repo.prototype.ensureHasData = function () {
        if (!this.listPromise)
            this.refreshFromServer();
        return this.listPromise;
    };
    Repo.prototype.refreshFromServer = function () {
        var _this = this;
        this.listPromise = this.comm.query().then(function (items) {
            _this.items = items;
            _this.error = null;
            _this.notifySubscribers();
        }).catch(function (error) {
            _this.error = error;
            _this.items = _this.items || [];
            _this.notifySubscribers();
        });
        return this.listPromise;
    };
    Repo.prototype.update = function (item) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var updatedItems;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.ensureHasData()];
                    case 1:
                        _a.sent();
                        updatedItems = Array.isArray(item) ? item : [item];
                        this.items = this.items.map(function (it) {
                            var updatedItem = updatedItems.find(function (_a) {
                                var id = _a.id;
                                return it.id === id;
                            });
                            return updatedItem ?
                                Object.assign({}, updatedItem) :
                                it;
                        });
                        this.notifySubscribers();
                        return [2 /*return*/];
                }
            });
        });
    };
    Repo.prototype.insert = function (item) {
        var _this = this;
        return this.ensureHasData().then(function () {
            _this.items = _this.items.concat(item);
            _this.notifySubscribers();
        });
    };
    Repo.prototype.delete = function (id) {
        var _this = this;
        var ids = Array.isArray(id) ? id : [id];
        return this.ensureHasData().then(function () {
            _this.items = _this.items.filter(function (it) { return !ids.some(function (id) { return it.id === id; }); });
            _this.notifySubscribers();
        });
    };
    return Repo;
}());



/***/ }),

/***/ "./src/repos/user-tasks-repo.ts":
/*!**************************************!*\
  !*** ./src/repos/user-tasks-repo.ts ***!
  \**************************************/
/*! exports provided: userTasksRepo, UserTasksRepo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "userTasksRepo", function() { return userTasksRepo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UserTasksRepo", function() { return UserTasksRepo; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _ked_repo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ked-repo */ "./src/repos/ked-repo.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _components_weekplanner_weekplanner_persisted_state__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/weekplanner/weekplanner-persisted-state */ "./src/components/weekplanner/weekplanner-persisted-state.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _utils_weekutil__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/weekutil */ "./src/utils/weekutil.ts");







var userTasksRepo = _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].userTasksRepo;
var UserTasksRepo = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](UserTasksRepo, _super);
    function UserTasksRepo(getClient, getCurrentUser) {
        var _this = _super.call(this, {
            getClient: getClient,
            optimistic: true,
            table: "usertasks",
            user: getCurrentUser() ? getCurrentUser().mail : "",
            getQueryOptions: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                var currentUser, userEmail, _a, weekDate, weekNumber, kedWeek;
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                    switch (_b.label) {
                        case 0:
                            currentUser = getCurrentUser();
                            userEmail = currentUser ? currentUser.mail : "";
                            if (!!this.persistedState) return [3 /*break*/, 2];
                            _a = this;
                            return [4 /*yield*/, _components_weekplanner_weekplanner_persisted_state__WEBPACK_IMPORTED_MODULE_3__["WeekPlannerPersistedState"].load(userEmail)];
                        case 1:
                            _a.persistedState = _b.sent();
                            _b.label = 2;
                        case 2:
                            weekDate = this.persistedState.weekDate;
                            weekNumber = moment__WEBPACK_IMPORTED_MODULE_4___default()(weekDate).week();
                            kedWeek = Object(_utils_weekutil__WEBPACK_IMPORTED_MODULE_6__["KEDWeek"])(moment__WEBPACK_IMPORTED_MODULE_4___default()(weekDate).year(), weekNumber);
                            /*const [from, to] = [moment(weekDate).startOf('week'), moment(weekDate).endOf('week')]
                              .map(m => m.toDate().getTime());*/
                            return [2 /*return*/, {
                                    from: kedWeek.notBefore,
                                    to: kedWeek.notAfter,
                                    role: "USER",
                                    include: ["task", "course"],
                                    flags: ["includeIdsOnly"],
                                }];
                    }
                });
            }); }
        }) || this;
        _this.persistedState = null;
        _this.getCurrentUser = getCurrentUser;
        return _this;
    }
    UserTasksRepo.prototype.updatePersistedState = function (stateChanges) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        Object.assign(this.persistedState, stateChanges);
                        return [4 /*yield*/, this.persistedState.save()];
                    case 1:
                        _a.sent();
                        this.mem.notifySubscribers();
                        return [2 /*return*/];
                }
            });
        });
    };
    UserTasksRepo.prototype.setTaskDoneState = function (userTask, done) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, getClient, optimistic, table, client, modifiedItem, similarTasks, identicalTasks;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = this.options, getClient = _a.getClient, optimistic = _a.optimistic, table = _a.table;
                        client = getClient();
                        modifiedItem = Object.assign({}, userTask, { done: done });
                        if (!optimistic) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.mem.update(Object.assign({}, modifiedItem, { $meta: 'updating' }))];
                    case 1:
                        _b.sent();
                        _b.label = 2;
                    case 2: return [4 /*yield*/, client.list('usertasks', {
                            name: userTask.name,
                            role: "USER",
                            include: ["task", "course"],
                            flags: ["includeIdsOnly"],
                            from: moment__WEBPACK_IMPORTED_MODULE_4___default()(this.persistedState.weekDate).add(-3, 'weeks').valueOf(),
                            to: moment__WEBPACK_IMPORTED_MODULE_4___default()(this.persistedState.weekDate).add(3, 'weeks').valueOf()
                        }, {
                            cache: 'no-cache'
                        })];
                    case 3:
                        similarTasks = _b.sent();
                        identicalTasks = similarTasks.filter(function (t) {
                            return t.courseName === userTask.courseName &&
                                t.learningGoal === userTask.learningGoal &&
                                (!userTask.task || t.task.map(function (t) { return t.id; }).join('') === userTask.task.map(function (t) { return t.id; }).join('')) &&
                                (!userTask.course || t.course.map(function (c) { return c.id; }).join('') === userTask.course.map(function (c) { return c.id; }).join(''));
                        });
                        if (identicalTasks.length === 0) {
                            // Workaround for issue in SubjectPlanner migration (usertasks with long names is not found)
                            identicalTasks.push(userTask);
                        }
                        return [4 /*yield*/, this.update(identicalTasks, function (t) { return t.done = done; })];
                    case 4:
                        _b.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    UserTasksRepo.prototype.setSubTaskDoneState = function (userTask, subTaskId, done) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, getClient, optimistic, table, client;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = this.options, getClient = _a.getClient, optimistic = _a.optimistic, table = _a.table;
                        client = getClient();
                        return [4 /*yield*/, this.update([userTask], function (t) { return t.subTasks && t.subTasks.filter(function (st) { return st.id === subTaskId; })
                                .forEach(function (st) { return st.done = done; }); })];
                    case 1:
                        _b.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    UserTasksRepo.prototype.setWeekPlannerBoxOpen = function (courseName, isOpen) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var openCourses;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        openCourses = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.persistedState.openCourses);
                        if (isOpen)
                            openCourses[courseName] = true;
                        else
                            delete openCourses[courseName];
                        return [4 /*yield*/, this.updatePersistedState({ openCourses: openCourses })];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    UserTasksRepo.prototype.changeWeek = function (weekDate, keepCurrentDate) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var persistedState, newPersisted;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        persistedState = this.persistedState;
                        if (!!persistedState) return [3 /*break*/, 2];
                        return [4 /*yield*/, _components_weekplanner_weekplanner_persisted_state__WEBPACK_IMPORTED_MODULE_3__["WeekPlannerPersistedState"].load(this.options.user)];
                    case 1:
                        persistedState = _a.sent();
                        _a.label = 2;
                    case 2:
                        newPersisted = new _components_weekplanner_weekplanner_persisted_state__WEBPACK_IMPORTED_MODULE_3__["WeekPlannerPersistedState"](persistedState);
                        newPersisted.weekDate = keepCurrentDate ? moment__WEBPACK_IMPORTED_MODULE_4___default()(weekDate).valueOf() : moment__WEBPACK_IMPORTED_MODULE_4___default()(weekDate).startOf('week').valueOf();
                        newPersisted.save();
                        this.persistedState = newPersisted;
                        return [4 /*yield*/, this.mem.refreshFromServer()];
                    case 3:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    UserTasksRepo.prototype.subscribe = function (subscriber) {
        var _this = this;
        var proxySubscriber = function (userTasks) {
            subscriber(userTasks.filter(function (ut) { return !ut.weekTexts; }), _this.persistedState, userTasks.filter(function (ut) { return !!ut.weekTexts; })[0] || {
                id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["createUUID"])(),
                dateTime: _this.persistedState.weekDate,
                weekTexts: { assessment: '', strategy: '' },
                acl: [
                    // Default ACL: Let user self have full control over this item:
                    new kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["DocumentAccess"]("email", _this.getCurrentUser().mail, "S"),
                    // Additional ACL: Let employees on same school have read access to it.
                    // This currently only applies to tasks that refer to course tasks (not own tasks!)
                    new kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["DocumentAccess"]("schoolRole", _this.getCurrentUser().school + "/EMPLOYEE", "R")
                ].map(function (ac) { return ac.toString(); })
            });
        };
        proxySubscriber["subscriber"] = subscriber;
        this.mem.subscribe(proxySubscriber);
    };
    UserTasksRepo.prototype.unsubscribe = function (subscriber) {
        this.mem.subscribers = this.mem.subscribers.filter(function (s) { return s["subscriber"] !== subscriber; });
    };
    return UserTasksRepo;
}(_ked_repo__WEBPACK_IMPORTED_MODULE_1__["KedRepo"]));

if (!userTasksRepo) {
    userTasksRepo = _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].userTasksRepo = new UserTasksRepo(function () { return _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].kedBackendClient; }, function () { return _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser; });
    userTasksRepo.mem.ensureHasData();
}


/***/ }),

/***/ "./src/test/data/users.ts":
/*!********************************!*\
  !*** ./src/test/data/users.ts ***!
  \********************************/
/*! exports provided: users */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "users", function() { return users; });
var users = [{
        displayName: "Administratr",
        mail: "vemendo@kedschools.com",
        roles: ['ADMIN', 'EMPLOYEE'],
        school: 'KED',
        username: "admin"
    }, {
        displayName: "David",
        mail: "david.fahlander@vemendo.se",
        roles: ['ADMIN', 'EMPLOYEE'],
        school: 'KED',
        username: "david"
    },
    {
        displayName: "Andrei",
        mail: "andrei.spatarelu@vemendo.se",
        roles: ['ADMIN', 'EMPLOYEE', 'STUDENT'],
        school: 'KED',
        username: "andrei"
    }, {
        displayName: "Carl Holmberg",
        mail: "carl.holmberg@kunskapsgymnasiet.se",
        roles: ['ADMIN', 'EMPLOYEE'],
        school: 'Norrkping',
        username: "carl.holmberg@kunskapsgymnasiet.se"
    }, {
        displayName: "Carl",
        mail: "carl@kedschools.com",
        roles: ['ADMIN', 'EMPLOYEE', 'STUDENT'],
        school: 'KED',
        username: "carl"
    }, {
        displayName: "david.fahlander@kedschools.com",
        mail: "david.fahlander@kedschools.com",
        roles: ["ADMIN", "EMPLOYEE", "STUDENT"],
        school: "KED",
        username: "david.fahlander@kedschools.com"
    }, {
        displayName: "Teacher 1",
        mail: "teacher1.classroom@kedschools.com",
        roles: ['EMPLOYEE'],
        school: 'KED',
        username: "teacher1.classroom@kedschools.com"
    }, {
        displayName: "Test-Live-Elev1",
        mail: "ubw6757@edu.kunskapsgymnasiet.se",
        roles: ['STUDENT'],
        school: 'Uppsala',
        username: "ubw6757@edu.kunskapsgymnasiet.se"
    }, {
        displayName: "Test-Live-Elev2",
        mail: "ums4302@edu.kunskapsgymnasiet.se",
        roles: ['STUDENT'],
        school: 'Uppsala',
        username: "ums4302@edu.kunskapsgymnasiet.se"
    }, {
        displayName: "Test-Live-Elev3",
        mail: "uhh3460@edu.kunskapsgymnasiet.se",
        roles: ['STUDENT'],
        school: 'Uppsala',
        username: "uhh3460@edu.kunskapsgymnasiet.se"
    }, {
        displayName: "Test-Live-Elev4(fel goals issue)",
        mail: "umt6826@edu.kunskapsskolan.se",
        roles: ["STUDENT"],
        school: "Uppsala",
        username: "umt6826@edu.kunskapsskolan.se"
    }, {
        displayName: "Test-Live-Elev5(future abilities)",
        mail: "ujg3833@edu.kunskapsskolan.se",
        roles: ["STUDENT"],
        school: "Uppsala",
        username: "ujg3833@edu.kunskapsskolan.se"
    }, {
        displayName: "Test-Live-Elev6(future abilities)",
        mail: "ujt1363@edu.kunskapsskolan.se",
        roles: ["STUDENT"],
        school: "Uppsala",
        username: "ujt1363@edu.kunskapsskolan.se"
    }, {
        displayName: "Test-Live-Lrare1",
        mail: "rickard.albertsson@kunskapsgymnasiet.se",
        roles: ['EMPLOYEE'],
        school: 'Uppsala',
        username: "rickard.albertsson@kunskapsgymnasiet.se"
    }, {
        displayName: "EDSTestUserGymnasium",
        mail: "uhh3200@edu.kunskapsgymnasiet.se",
        //mail: "UHH3200@EDU.KUNSKAPSGYMNASIET.SE",
        roles: ["STUDENT"],
        username: "EDSTestUser1",
        school: "KED",
        schoolType: "Gymnasium"
    }, {
        displayName: "vemendo.elev@kedschools.com",
        mail: "vemendo.elev@kedschools.com",
        roles: ["STUDENT"],
        username: "vemendo.elev@kedschools.com",
        school: "KED",
        schoolType: "Gymnasium"
    }, {
        displayName: "Medarbetare Nacka",
        mail: "medarbetare.nacka@kunskapsskolan.se",
        roles: ["EMPLOYEE"],
        username: "medarbetare.nacka/KS",
        school: "Nacka",
        schoolType: "Grundskolor"
    }, {
        displayName: "Medarbetare Globen",
        mail: "medarbetare.globen@kunskapsgymnasiet.se",
        roles: ["EMPLOYEE"],
        username: "medarbetare.globen/KS",
        school: "Globen",
        schoolType: "Gymnasium"
    }, {
        displayName: "Elev Globen",
        mail: "elev.globen@edu.kunskapsgymnasiet.se",
        schoolGrade: 2,
        roles: ['STUDENT'],
        username: "elev.globen",
        school: "Globen",
        schoolType: "Gymnasium"
    }, {
        displayName: "Elev Bors",
        mail: "elev.boras@edu.kunskapsskolan.se",
        schoolGrade: 7,
        roles: ['STUDENT'],
        username: "elev.boras",
        school: "Bors",
        schoolType: "Grundskolor"
    }, {
        displayName: "Elev Borlnge",
        mail: "elev.borlange@edu.kunskapsskolan.se",
        schoolGrade: 9,
        roles: ['STUDENT'],
        username: 'elev.borlange/KS',
        school: 'Borlnge',
        schoolType: "Gymnasium"
    }, {
        displayName: "Roll-ls",
        mail: "none@kunskapsskolan.se",
        username: "none",
        roles: []
    }];


/***/ }),

/***/ "./src/test/set-current-user.ts":
/*!**************************************!*\
  !*** ./src/test/set-current-user.ts ***!
  \**************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _data_users__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./data/users */ "./src/test/data/users.ts");
/* harmony import */ var _utils_query_string__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/query-string */ "./src/utils/query-string.ts");



var username = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_2__["parseQueryString"])(location.search).user;
if (username) {
    var user = _data_users__WEBPACK_IMPORTED_MODULE_1__["users"].find(function (u) { return u.username === username; });
    if (user) {
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser = user;
    }
}
var _a = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_2__["parseQueryString"])(location.search), role = _a.role, school = _a.school;
if (_globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser) {
    if (role) {
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser.roles = role.split(',');
    }
    if (school) {
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser.school = school;
    }
}


/***/ }),

/***/ "./src/test/test-config.ts":
/*!*********************************!*\
  !*** ./src/test/test-config.ts ***!
  \*********************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");

_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_LOCALE = 'sv';
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_SCHOOL_LOCALE = 'sv';


/***/ }),

/***/ "./src/test/testpage-sp.tsx":
/*!**********************************!*\
  !*** ./src/test/testpage-sp.tsx ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _set_current_user__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./set-current-user */ "./src/test/set-current-user.ts");
/* harmony import */ var _global_setters_set_all__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../global-setters/set-all */ "./src/global-setters/set-all.ts");
/* harmony import */ var _test_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./test-config */ "./src/test/test-config.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _utils_choose_user__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils/choose-user */ "./src/test/utils/choose-user.tsx");
/* harmony import */ var _utils_include_css__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utils/include-css */ "./src/test/utils/include-css.ts");
/* harmony import */ var _utils_include_optional_css__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utils/include-optional-css */ "./src/utils/include-optional-css.ts");
/* harmony import */ var _components_course_builder_ks_viewer_editor__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../components/course-builder-ks/viewer-editor */ "./src/components/course-builder-ks/viewer-editor/index.tsx");
/* harmony import */ var _components_utility_components_SetupLanguageIntl__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../components/utility-components/SetupLanguageIntl */ "./src/components/utility-components/SetupLanguageIntl.tsx");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");
/* harmony import */ var _components_utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../components/utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");

// <Initialization>
 // Emulate server-side script to set current user
 // Client-side initialization

// </Initialization>









Object(_utils_include_optional_css__WEBPACK_IMPORTED_MODULE_8__["includeOptionalCSS"])({
    v1: [
        'css/courseviewer.css',
        'css/dialog.css',
        'css/grid-css-patch.css'
    ],
    includeCSS: _utils_include_css__WEBPACK_IMPORTED_MODULE_7__["includeCSS"],
    version: 6,
    versionFolder: 'css/delta-css/courseviewer'
});
var _App = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](_App, _super);
    function _App(props) {
        var _this = _super.call(this, props) || this;
        if (!location.hash)
            location.hash = "#/";
        return _this;
    }
    _App.prototype.render = function () {
        var intl = this.props.intl;
        return _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__["default"].currentUser ?
            react__WEBPACK_IMPORTED_MODULE_5__["createElement"](_components_utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_12__["LanguageContext"].Provider, { value: { intl: intl } },
                react__WEBPACK_IMPORTED_MODULE_5__["createElement"](_components_course_builder_ks_viewer_editor__WEBPACK_IMPORTED_MODULE_9__["SubjectPlannerViewerApp"], null)) :
            react__WEBPACK_IMPORTED_MODULE_5__["createElement"](_utils_choose_user__WEBPACK_IMPORTED_MODULE_6__["ChooseUser"], null);
    };
    return _App;
}(react__WEBPACK_IMPORTED_MODULE_5__["Component"]));
var App = Object(_components_utility_components_SetupLanguageIntl__WEBPACK_IMPORTED_MODULE_10__["setupIntl"])(Object(react_intl__WEBPACK_IMPORTED_MODULE_11__["injectIntl"])(_App));
/* harmony default export */ __webpack_exports__["default"] = (App);


/***/ }),

/***/ "./src/test/utils/choose-user.tsx":
/*!****************************************!*\
  !*** ./src/test/utils/choose-user.tsx ***!
  \****************************************/
/*! exports provided: ChooseUser */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChooseUser", function() { return ChooseUser; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _data_users__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../data/users */ "./src/test/data/users.ts");


function ChooseUser() {
    var select;
    return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "sv-layout" },
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("h2", null, "V\u00E4lj anv\u00E4ndare"),
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("table", { className: "login-table" },
            react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("thead", null,
                react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("tr", null,
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("th", null, "Namn"),
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("th", null, "Roller"),
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("th", null, "E-post"),
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("th", null, "Skola"))),
            react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("tbody", null, _data_users__WEBPACK_IMPORTED_MODULE_1__["users"].map(function (_a) {
                var username = _a.username, displayName = _a.displayName, mail = _a.mail, school = _a.school, roles = _a.roles;
                return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("tr", { key: mail, onClick: function () { return location.search = "?user=" + username; } },
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("td", null, displayName),
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("td", { style: roles.length === 0 ? { fontStyle: 'italic' } : {} }, roles.length === 0 ? "saknar roller" : roles.join(', ')),
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("td", null, mail),
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("td", { style: school ? {} : { fontStyle: 'italic' } }, school || "saknar skola"));
            }))));
}
;


/***/ }),

/***/ "./src/test/utils/include-css.ts":
/*!***************************************!*\
  !*** ./src/test/utils/include-css.ts ***!
  \***************************************/
/*! exports provided: includeCSS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "includeCSS", function() { return includeCSS; });
function resolve(uri) {
    var href = location.protocol + "//" + location.host + location.pathname;
    var pLastSlash = href.lastIndexOf('/');
    return href.substr(0, pLastSlash + 1) + uri;
}
function includeCSS(cssFile) {
    document.write('<link rel="stylesheet" href="' + resolve(cssFile) + '" />');
}


/***/ }),

/***/ "./src/translations/en.json":
/*!**********************************!*\
  !*** ./src/translations/en.json ***!
  \**********************************/
/*! exports provided: addeditsubtask.deleteSubtask, addeditsubtask.editSubtask, addeditsubtask.nameLabel, addeditsubtask.addSubtask, calendar.currentDate, calendar.fullDayEventLocation, calendar.loadCalendarEvents, calendar.loadingCalendar, calendar.weekNumber, common.addDescriptionPlhd, common.cancel, common.changesNotSavedErrorOccured, common.changesNotSavedUnauthorized, common.descriptionLabel, common.errorSavingData, common.linkLabel, common.loading, common.nameLabel, common.save, common.saved, common.saving, common.remove, customTask.addWorkGoalTitle, customTask.enterNamePlhd, learningGoalsLost.overall, task.addSubtask, task.editTask, task.editWorkGoals, task.enterTaskNamePlhd, task.removeDeadline, task.removeThisTask, task.removeWorkGoals, task.setDeadline, task.setDeadlineLabel, task.subTasks, task.targetNameLabel, task.taskNameLabel, task.whatShouldYouDoPlhd, taskList.nextWeekTask, taskList.lastWeekTask, taskList.currentWeekTask, taskList.removeTaskFromWeeklyPlanning, taskList.addTaskToWeeklyPlanning, termplanner.comments, termplanner.course, termplanner.edsGoalGrades, termplanner.englishLanguage, termplanner.finalStep, termplanner.firstTerm, termplanner.hindiLanguage, termplanner.ict, termplanner.loadingTermplanner, termplanner.maths, termplanner.modernLanguage, termplanner.noFinalStepAvailable, termplanner.secondTerm, termplanner.termPlanning, termplanner.weekNumber, termplanner.chartsBoxTitle, termplanner.yoga, tutorNoteDialog.weekComment, test.chooseComponentLabel, test.pageDescription, userTasks.addLearningGoal, userTasks.deleteLearningGoal, userTasks.goals, weekNotebook.title, weekplanner.addLearningGoal, weekplanner.addLearningGoalTitle, weekplanner.confirmRemoveLearningObjectives, weekplanner.copyPreviousWeekTaks, weekplanner.emptyLearningGoalErr, weekplanner.evaluation, weekplanner.evaluationDescription, weekplanner.learningGoal, weekplanner.logBook, weekplanner.nameCannotBeEmpty, weekplanner.nameMustNotBeEmpty, weekplanner.strategy, weekplanner.strategyAndEvaluation, weekplanner.strategyDescription, weekplanner.weekNumber, wysiwyg.bold, wysiwyg.code, wysiwyg.heading1, wysiwyg.heading2, wysiwyg.heading3, wysiwyg.image, wysiwyg.imagePromptMsg, wysiwyg.italic, wysiwyg.line, wysiwyg.link, wysiwyg.olist, wysiwyg.paragraph, wysiwyg.quote, wysiwyg.strikethrough, wysiwyg.ulist, wysiwyg.underline, default */
/***/ (function(module) {

module.exports = {"addeditsubtask.deleteSubtask":"Delete subtask","addeditsubtask.editSubtask":"Edit subtask","addeditsubtask.nameLabel":"Name of subtask","addeditsubtask.addSubtask":"Add sub-task","calendar.currentDate":"Week {week}, {year}","calendar.fullDayEventLocation":"Place: {location}","calendar.loadCalendarEvents":"Load calendar events...","calendar.loadingCalendar":"Loading calendars... (listing...)","calendar.weekNumber":"W{weekNumber}","common.addDescriptionPlhd":"Add description...","common.cancel":"Cancel","common.changesNotSavedErrorOccured":"An error occured while saving data. Your changes were not saved.","common.changesNotSavedUnauthorized":"The changes were not saved due to insufficient authority","common.descriptionLabel":"Description","common.errorSavingData":"An error occured while saving data.","common.linkLabel":"Link","common.loading":"Loading...","common.nameLabel":"Name","common.save":" Save","common.saved":" Saved","common.saving":"Saving","common.remove":"Delete","customTask.addWorkGoalTitle":"Add own working goal","customTask.enterNamePlhd":"Enter Name...","learningGoalsLost.overall":"Overall","task.addSubtask":"Add subtask","task.editTask":"Edit task","task.editWorkGoals":"Edit working goal","task.enterTaskNamePlhd":"Enter the name of task...","task.removeDeadline":"Delete deadline","task.removeThisTask":"Delete this task","task.removeWorkGoals":"Delete working goal","task.setDeadline":"Set deadline","task.setDeadlineLabel":"Set deadline...","task.subTasks":"Subtasks","task.targetNameLabel":"Name of working goal","task.taskNameLabel":"Name of task","task.whatShouldYouDoPlhd":"What should you do?","taskList.nextWeekTask":"for next week (w{week})","taskList.lastWeekTask":"for last week (w{week})","taskList.currentWeekTask":"for week {week}","taskList.removeTaskFromWeeklyPlanning":"Delete task from your weekly planning {week}","taskList.addTaskToWeeklyPlanning":"Add task to your weekly planning {week}","termplanner.comments":"Comments","termplanner.course":"Theme course","termplanner.edsGoalGrades":"Intermediate goals","termplanner.englishLanguage":"Eng","termplanner.finalStep":"Final Step","termplanner.firstTerm":"FT {year}","termplanner.hindiLanguage":"Hindi","termplanner.ict":"ICT","termplanner.loadingTermplanner":"Loading Termplanner","termplanner.maths":"Maths","termplanner.modernLanguage":"MFL","termplanner.noFinalStepAvailable":"No final step available","termplanner.secondTerm":"ST {year}","termplanner.termPlanning":"Term planner","termplanner.weekNumber":"Week","termplanner.chartsBoxTitle":"Progress Charts","termplanner.yoga":"Yoga","tutorNoteDialog.weekComment":"Note for week {weekNumber}","test.chooseComponentLabel":"Component","test.pageDescription":"Test page for the components on the starting page","userTasks.addLearningGoal":"Own working goal","userTasks.deleteLearningGoal":"Delete learning goal and its tasks","userTasks.goals":"Own learning goal","weekNotebook.title":"Notepad","weekplanner.addLearningGoal":"Goal:","weekplanner.addLearningGoalTitle":"Add own learning goal","weekplanner.confirmRemoveLearningObjectives":"Delete learning goal and {learningGoalsNumber} tasks?","weekplanner.copyPreviousWeekTaks":"Copy from previous week","weekplanner.emptyLearningGoalErr":"The learning goal cannot be empty","weekplanner.evaluation":"Evaluation","weekplanner.evaluationDescription":"Reflection on your work effort and your chosen strategies during the week. Evaluate in relation to your goals.","weekplanner.learningGoal":"Own learning goal","weekplanner.logBook":"Logbook","weekplanner.nameCannotBeEmpty":"Name cannot be empty","weekplanner.nameMustNotBeEmpty":"Name must not be empty","weekplanner.strategy":"Strategy","weekplanner.strategyAndEvaluation":"Strategy & Evaluation","weekplanner.strategyDescription":"What I should do to learn","weekplanner.weekNumber":"Week {weekNumber}","wysiwyg.bold":"Bold","wysiwyg.code":"Code","wysiwyg.heading1":"Heading 1","wysiwyg.heading2":"Heading 2","wysiwyg.heading3":"Heading 3","wysiwyg.image":"Insert image","wysiwyg.imagePromptMsg":"Enter the URL of the image","wysiwyg.italic":"Italics","wysiwyg.line":"Horizontal line","wysiwyg.link":"Insert link","wysiwyg.olist":"Ordered list","wysiwyg.paragraph":"Paragraph","wysiwyg.quote":"Quote","wysiwyg.strikethrough":"Strikethrough","wysiwyg.ulist":"Bullet list","wysiwyg.underline":"Underline"};

/***/ }),

/***/ "./src/translations/sv.json":
/*!**********************************!*\
  !*** ./src/translations/sv.json ***!
  \**********************************/
/*! exports provided: addeditsubtask.addSubtask, addeditsubtask.deleteSubtask, addeditsubtask.editSubtask, addeditsubtask.nameLabel, calendar.currentDate, calendar.fullDayEventLocation, calendar.loadCalendarEvents, calendar.loadingCalendar, calendar.weekNumber, common.addDescriptionPlhd, common.cancel, common.changesNotSavedErrorOccured, common.changesNotSavedUnauthorized, common.descriptionLabel, common.errorSavingData, common.linkLabel, common.loading, common.nameLabel, common.save, common.saved, common.saving, common.remove, customTask.addWorkGoalTitle, customTask.enterNamePlhd, learningGoalsLost.overall, task.addSubtask, task.editTask, task.editWorkGoals, task.enterTaskNamePlhd, task.removeDeadline, task.removeThisTask, task.removeWorkGoals, task.setDeadline, task.setDeadlineLabel, task.subTasks, task.targetNameLabel, task.taskNameLabel, task.whatShouldYouDoPlhd, taskList.nextWeekTask, taskList.lastWeekTask, taskList.currentWeekTask, taskList.removeTaskFromWeeklyPlanning, taskList.addTaskToWeeklyPlanning, termplanner.comments, termplanner.course, termplanner.edsGoalGrades, termplanner.englishLanguage, termplanner.swedishLanguage, termplanner.finalStep, termplanner.firstTerm, termplanner.hindiLanguage, termplanner.loadingTermplanner, termplanner.modernLanguageFullname, termplanner.mathsFullname, termplanner.noFinalStepAvailable, termplanner.swedishLanguageFullName, termplanner.englishLanguageFullName, termplanner.maths, termplanner.modernLanguage, termplanner.secondTerm, termplanner.termPlanning, termplanner.weekNumber, termplanner.chartsBoxTitle, tutorNoteDialog.weekComment, test.chooseComponentLabel, test.pageDescription, userTasks.addLearningGoal, userTasks.deleteLearningGoal, userTasks.goals, weekNotebook.title, weekplanner.addLearningGoal, weekplanner.addLearningGoalTitle, weekplanner.confirmRemoveLearningObjectives, weekplanner.copyPreviousWeekTaks, weekplanner.emptyLearningGoalErr, weekplanner.evaluation, weekplanner.evaluationDescription, weekplanner.learningGoal, weekplanner.logBook, weekplanner.nameCannotBeEmpty, weekplanner.nameMustNotBeEmpty, weekplanner.strategy, weekplanner.strategyAndEvaluation, weekplanner.strategyDescription, weekplanner.weekNumber, wysiwyg.bold, wysiwyg.code, wysiwyg.heading1, wysiwyg.heading2, wysiwyg.heading3, wysiwyg.image, wysiwyg.imagePromptMsg, wysiwyg.italic, wysiwyg.line, wysiwyg.link, wysiwyg.olist, wysiwyg.paragraph, wysiwyg.quote, wysiwyg.strikethrough, wysiwyg.ulist, wysiwyg.underline, default */
/***/ (function(module) {

module.exports = {"addeditsubtask.addSubtask":"Lgg till underuppgift","addeditsubtask.deleteSubtask":"Ta bort underuppgift","addeditsubtask.editSubtask":"Redigera underuppgift","addeditsubtask.nameLabel":"Underuppgiftens namn","calendar.currentDate":"Vecka {week}, {year}","calendar.fullDayEventLocation":"Plats: {location}","calendar.loadCalendarEvents":"Load calendar events...","calendar.loadingCalendar":"Loading calendars... (listing...)","calendar.weekNumber":"V{weekNumber}","common.addDescriptionPlhd":"Lgg till en beskrivning...","common.cancel":"Avbryt","common.changesNotSavedErrorOccured":"Fr tillfllet problem att spara data. Dina ndringar sparades inte.","common.changesNotSavedUnauthorized":"ndringarna sparades inte p.g.a. otillrcklig behrighet.","common.descriptionLabel":"Beskrivning","common.errorSavingData":"Kunde inte spara.","common.linkLabel":"Lnk","common.loading":"Laddar...","common.nameLabel":"Namn","common.save":" Spara","common.saved":" Sparad","common.saving":"Sparar...","common.remove":"Ta bort","customTask.addWorkGoalTitle":"Lgg till eget arbetsml","customTask.enterNamePlhd":"Ange namn...","learningGoalsLost.overall":"vergripande","task.addSubtask":"Lgg till underuppgift","task.editTask":"Redigera uppgift","task.editWorkGoals":"Redigera arbetsml","task.enterTaskNamePlhd":"Ange uppgiftens namn...","task.removeDeadline":"Ta bort deadline","task.removeThisTask":"Ta bort den hr uppgiften","task.removeWorkGoals":"Ta bort arbetsml","task.setDeadline":"Set deadline","task.setDeadlineLabel":"Ange deadline...","task.subTasks":"Underuppgifter","task.targetNameLabel":"Arbetsmlets namn","task.taskNameLabel":"Uppgiftens namn","task.whatShouldYouDoPlhd":"Vad ska du gra?","taskList.nextWeekTask":"fr nsta vecka (v{week})","taskList.lastWeekTask":"fr frra veckan (v{week})","taskList.currentWeekTask":"fr vecka {week}","taskList.removeTaskFromWeeklyPlanning":"Ta bort uppgiften frn egen veckoplanering {week}","taskList.addTaskToWeeklyPlanning":"Lgg till uppgiften i egen veckoplanering {week}","termplanner.comments":"Kommentar","termplanner.course":"Kurs","termplanner.edsGoalGrades":"Terminsml","termplanner.englishLanguage":"Eng","termplanner.swedishLanguage":"Sv/SvA","termplanner.finalStep":"Slutsteg","termplanner.firstTerm":"HT {year}","termplanner.hindiLanguage":"","termplanner.loadingTermplanner":"V.g. vnta medan terminsplaner laddas...","termplanner.modernLanguageFullname":"M.sprk","termplanner.mathsFullname":"Matematik","termplanner.noFinalStepAvailable":"Inget slutsteg tillgngligt","termplanner.swedishLanguageFullName":"Svenska","termplanner.englishLanguageFullName":"Engelska","termplanner.maths":"Ma","termplanner.modernLanguage":"M.spr","termplanner.secondTerm":"VT {year}","termplanner.termPlanning":"Terminsplanering","termplanner.weekNumber":"Vecka","termplanner.chartsBoxTitle":"Min progression","tutorNoteDialog.weekComment":"Kommentar fr vecka {weekNumber}","test.chooseComponentLabel":"Komponent","test.pageDescription":"Testsida fr komponenter till nya startsidan","userTasks.addLearningGoal":"Eget arbetsml","userTasks.deleteLearningGoal":"Ta bort lrandemlet och dess uppgifter","userTasks.goals":"Egna lrandeml","weekNotebook.title":"Anteckningar","weekplanner.addLearningGoal":"Ml:","weekplanner.addLearningGoalTitle":"Lgg till eget lrandeml","weekplanner.confirmRemoveLearningObjectives":"Ta bort lrandeml samt {learningGoalsNumber} uppgifter?","weekplanner.copyPreviousWeekTaks":"Kopiera ej klara frn fregende vecka","weekplanner.emptyLearningGoalErr":"Lrandemlet kan inte vara tomt","weekplanner.evaluation":"Utvrdering","weekplanner.evaluationDescription":"Reflektion kring din arbetsinsats och dina valda strategier under veckan.Utvrdera i frhllande till dina ml.","weekplanner.learningGoal":"Eget lrandeml","weekplanner.logBook":"Loggbok","weekplanner.nameCannotBeEmpty":"Namnet kan inte vara tomt","weekplanner.nameMustNotBeEmpty":"Namnet fr inte vara tomt","weekplanner.strategy":"Strategi","weekplanner.strategyAndEvaluation":"Strategi & Utvrdering","weekplanner.strategyDescription":"Hur jag ska gra fr att lra mig.","weekplanner.weekNumber":"Vecka {weekNumber}","wysiwyg.bold":"Fetstil","wysiwyg.code":"Programkod","wysiwyg.heading1":"Rubrik 1","wysiwyg.heading2":"Rubrik 2","wysiwyg.heading3":"Rubrik 3","wysiwyg.image":"Infoga bild","wysiwyg.imagePromptMsg":"Ange bildens URL","wysiwyg.italic":"Kursiv","wysiwyg.line":"Vgrt linje","wysiwyg.link":"Infoga lnk","wysiwyg.olist":"Ordnad lista","wysiwyg.paragraph":"Paragraf","wysiwyg.quote":"Citat","wysiwyg.strikethrough":"Struken","wysiwyg.ulist":"Punktlista","wysiwyg.underline":"Understruken"};

/***/ }),

/***/ "./src/utils/error-success-feedback.tsx":
/*!**********************************************!*\
  !*** ./src/utils/error-success-feedback.tsx ***!
  \**********************************************/
/*! exports provided: ErrorSuccessFeedback */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ErrorSuccessFeedback", function() { return ErrorSuccessFeedback; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _components_course_builder_sub_components_remove_item__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/course-builder/sub-components/remove-item */ "./src/components/course-builder/sub-components/remove-item.tsx");




var ErrorSuccessFeedback = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](ErrorSuccessFeedback, _super);
    function ErrorSuccessFeedback(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            errors: [],
            infos: []
        };
        _this._unhandledRejection = _this._unhandledRejection.bind(_this);
        _this._error = _this._error.bind(_this);
        _this._customError = _this._customError.bind(_this);
        _this._onInfo = _this._onInfo.bind(_this);
        _this._dbWriterError = _this._dbWriterError.bind(_this);
        _this._dbWriterStateChanged = _this._dbWriterStateChanged.bind(_this);
        return _this;
    }
    ErrorSuccessFeedback.prototype._addError = function (message, details, retryable) {
        var _this = this;
        //console.error(message, {retryable: !!retryable, details});
        this.setState(function (_a) {
            var errors = _a.errors;
            if (errors.some(function (e) { return e.message === message; }))
                return { errors: errors };
            if (errors.length > 2)
                errors = errors.slice(1);
            return {
                errors: errors.concat([{ message: message, details: details, retryable: retryable }])
            };
        });
        // Remove non-retryable errors after 30 seconds:
        if (!retryable)
            setTimeout(function () {
                _this.setState(function (_a) {
                    var errors = _a.errors;
                    return ({
                        errors: errors.filter(function (e) { return e.message !== message; })
                    });
                });
            }, 30000);
    };
    ErrorSuccessFeedback.prototype._addInfo = function (message) {
        var _this = this;
        if (message === "") {
            // Turn off current info messages
            this.setState({ infos: [] });
            return;
        }
        this.setState(function (_a) {
            var infos = _a.infos;
            if (infos.some(function (info) { return info === message; }))
                return { infos: infos };
            if (infos.length > 1)
                infos = infos.slice(1);
            return {
                infos: [message] // was: infos.concat(message). But it sucks!
            };
        });
        // Remove info message after 10 seconds:
        setTimeout(function () {
            _this.setState(function (_a) {
                var infos = _a.infos;
                return ({
                    infos: infos.filter(function (msg) { return msg !== message; })
                });
            });
        }, 10000);
    };
    ErrorSuccessFeedback.prototype._dbWriterError = function (error, retryable) {
        this._addError("Det g\u00E5r inte att spara till servern", error, retryable);
    };
    ErrorSuccessFeedback.prototype._dbWriterStateChanged = function (_a) {
        var isEdited = _a.isEdited, isSaving = _a.isSaving;
        if (!isEdited) {
            // If isEdited is false, a successful write must have happened, and
            // there cannot be any retryable error anymore
            this.setState(function (_a) {
                var errors = _a.errors;
                errors = errors.filter(function (e) { return !e.retryable; });
                return { errors: errors };
            });
        }
        this.setState({
            dbWriterIsEdited: isEdited,
            dbWriterIsSaving: isSaving
        });
    };
    ErrorSuccessFeedback.prototype.componentDidMount = function () {
        window.addEventListener('unhandledrejection', this._unhandledRejection);
        window.addEventListener('error', this._error);
        window.addEventListener('customerror', this._customError);
        window.addEventListener('info', this._onInfo);
        _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].writer.onError(this._dbWriterError);
        _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].writer.onStateChange(this._dbWriterStateChanged);
    };
    ErrorSuccessFeedback.prototype.componentWillUnmount = function () {
        window.removeEventListener('unhandledrejection', this._unhandledRejection);
        window.removeEventListener('error', this._error);
        window.removeEventListener('customerror', this._customError);
        window.removeEventListener('info', this._onInfo);
        _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].writer.off(this._dbWriterError);
        _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].writer.off(this._dbWriterStateChanged);
    };
    ErrorSuccessFeedback.prototype._unhandledRejection = function (ev) {
        this._addError("Ett ok\u00E4nt fel intr\u00E4ffade...", ev.reason);
    };
    ErrorSuccessFeedback.prototype._error = function (ev) {
        this._addError(ev.error ? ev.error.message : "Ett ok\u00E4nt fel intr\u00E4ffade...", ev.error);
    };
    ErrorSuccessFeedback.prototype._customError = function (ev) {
        this._addError(ev.detail);
    };
    ErrorSuccessFeedback.prototype._onInfo = function (ev) {
        this._addInfo(ev.detail);
    };
    ErrorSuccessFeedback.prototype.render = function () {
        var _this = this;
        var _a = this.state, errors = _a.errors, infos = _a.infos, dbWriterIsSaving = _a.dbWriterIsSaving;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "error-success-feedback", style: {
                position: "fixed",
                left: 0,
                top: 0,
                width: "100%",
                pointerEvents: 'none'
            } },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { style: { display: 'table', margin: "0 auto" } },
                errors.filter(function (e) { return !e.retryable || !dbWriterIsSaving; })
                    .map(function (_a) {
                    var message = _a.message, details = _a.details, retryable = _a.retryable, showDetails = _a.showDetails;
                    return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: message, className: "error" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { style: { float: 'left' } }, message),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { style: { pointerEvents: 'auto' } },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_components_course_builder_sub_components_remove_item__WEBPACK_IMPORTED_MODULE_3__["RemoveItem"], { onClick: function () { return _this.removeError(message); } })),
                        details || retryable ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { style: { pointerEvents: 'auto' } },
                            details ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "btn", onClick: function () { return _this.toggleDetails(message); } }, showDetails ? "Dlj detailer" : "Visa detailjer"),
                                "\u00A0") : undefined,
                            showDetails ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, '' + details) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null, "\u00A0"),
                            retryable ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "btn", onClick: function () { return _this.retrySave(); } }, "F\u00F6rs\u00F6k spara nu") : undefined) : undefined));
                }),
                infos.map(function (message) {
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { key: message, className: "info" }, message);
                })));
    };
    ErrorSuccessFeedback.prototype.removeError = function (message) {
        this.setState(function (_a) {
            var errors = _a.errors;
            return ({
                errors: errors.filter(function (e) { return e.message !== message; })
            });
        });
    };
    ErrorSuccessFeedback.prototype.retrySave = function () {
        _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].writer.retrySave();
    };
    ErrorSuccessFeedback.prototype.toggleDetails = function (message) {
        this.setState(function (_a) {
            var errors = _a.errors;
            return ({ errors: errors.map(function (error) { return error.message === message ? tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, error, { showDetails: !error.showDetails }) :
                    error; })
            });
        });
    };
    return ErrorSuccessFeedback;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/utils/include-optional-css.ts":
/*!*******************************************!*\
  !*** ./src/utils/include-optional-css.ts ***!
  \*******************************************/
/*! exports provided: includeOptionalCSS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "includeOptionalCSS", function() { return includeOptionalCSS; });
function includeOptionalCSS(_a) {
    var v1 = _a.v1, versionFolder = _a.versionFolder, version = _a.version, includeCSS = _a.includeCSS, NOCSS = _a.NOCSS;
    if (!NOCSS) {
        if (v1)
            v1.forEach(function (cssFile) { return includeCSS(cssFile); });
    }
    var cssVer = parseInt(NOCSS);
    if (isNaN(cssVer))
        cssVer = 1;
    for (var ver = cssVer + 1; ver <= version; ++ver) {
        includeCSS(versionFolder + "/v" + ver + ".css");
    }
}


/***/ }),

/***/ "./src/utils/keep-session-alive.ts":
/*!*****************************************!*\
  !*** ./src/utils/keep-session-alive.ts ***!
  \*****************************************/
/*! exports provided: keepSessionAlive */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "keepSessionAlive", function() { return keepSessionAlive; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ "jquery");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");



var HEARTBEAT_INTERVAL = 5 * 60 * 1000; // 5 minutes.
var HEARTBEAT_URL = _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_2__["cfg"].KED_KEEP_ALIVE_URL;
var lastActivity = Date.now();
function keepSessionAlive() {
    setInterval(onTimeout, HEARTBEAT_INTERVAL);
    setTimeout(function () { return jquery__WEBPACK_IMPORTED_MODULE_1___default()('body')
        .mousemove(onUserActive)
        .keypress(onUserActive)
        .scroll(onUserActive); }, 100);
}
function onUserActive() {
    lastActivity = Date.now();
}
function onTimeout() {
    var inactivityTime = Date.now() - lastActivity;
    if (inactivityTime < HEARTBEAT_INTERVAL) {
        heartbeat();
    }
}
function heartbeat() {
    return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
        var res, err_1;
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
            switch (_a.label) {
                case 0:
                    console.log("Sending heartbeat request to " + HEARTBEAT_URL);
                    _a.label = 1;
                case 1:
                    _a.trys.push([1, 3, , 4]);
                    return [4 /*yield*/, fetch(HEARTBEAT_URL, {
                            cache: 'no-cache',
                            credentials: 'same-origin'
                        })];
                case 2:
                    res = _a.sent();
                    console.log("Response from " + HEARTBEAT_URL + ": " + res.status + " " + res.statusText);
                    return [3 /*break*/, 4];
                case 3:
                    err_1 = _a.sent();
                    console.warn("Request to " + HEARTBEAT_URL + " failed: " + err_1);
                    return [3 /*break*/, 4];
                case 4: return [2 /*return*/];
            }
        });
    });
}


/***/ }),

/***/ "./src/utils/make-suspense-api.ts":
/*!****************************************!*\
  !*** ./src/utils/make-suspense-api.ts ***!
  \****************************************/
/*! exports provided: makeSuspenseApi */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "makeSuspenseApi", function() { return makeSuspenseApi; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

var DEFAULT_CACHE_EXPIRATION = 30 * 60 * 1000; // 30 minutes.
var defaultOptions = {
    isApiMethod: function (f) { return typeof f === 'function'; },
    cacheExpiration: DEFAULT_CACHE_EXPIRATION
};
function makeSuspenseApi(api, options) {
    if (options === void 0) { options = defaultOptions; }
    options = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, defaultOptions, options);
    var isApiMethod = options.isApiMethod, cacheExpiration = options.cacheExpiration;
    var rv = Object.create(api);
    var cache = {};
    // Walk the instance + prototype chain to generate suspense version of each promise returning method
    for (var proto = api; proto && proto !== Object.prototype; proto = Object.getPrototypeOf(proto)) {
        suspendify(proto);
    }
    function suspendify(proto) {
        Object.keys(proto).forEach(function (prop) {
            if (!rv.hasOwnProperty(prop) && isApiMethod(prop)) {
                rv[prop] = function () {
                    var args = [];
                    for (var _i = 0; _i < arguments.length; _i++) {
                        args[_i] = arguments[_i];
                    }
                    var key = JSON.stringify(tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"]([prop], args));
                    var cachedEntry = cache[key];
                    if (cachedEntry !== undefined) {
                        if (cachedEntry.promise)
                            throw cachedEntry.promise;
                        if (cachedEntry.error)
                            throw cachedEntry.error;
                        if (cachedEntry.timeout > Date.now()) {
                            return cachedEntry.value;
                        }
                    }
                    try {
                        var promise = proto[prop].apply(api, args).then(function (result) {
                            cache[key] = { timeout: Date.now() + cacheExpiration, value: result };
                        }).catch(function (error) {
                            cache[key] = { timeout: Date.now() + cacheExpiration, error: error };
                        });
                        cache[key] = { timeout: Date.now() + cacheExpiration, promise: promise };
                        throw promise;
                    }
                    catch (error) {
                        if (error.then)
                            throw error;
                        cache[key] = { timeout: Date.now() + cacheExpiration, error: error };
                    }
                };
            }
        });
    }
    return rv;
}


/***/ }),

/***/ "./src/utils/pending-job.ts":
/*!**********************************!*\
  !*** ./src/utils/pending-job.ts ***!
  \**********************************/
/*! exports provided: PendingJob */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PendingJob", function() { return PendingJob; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

var PendingJob = /** @class */ (function () {
    function PendingJob(callback) {
        this.timeoutId = null;
        this.cancelled = false;
        this.pending = false;
        this.isJobExecuting = false;
        this.jobCallback = callback;
    }
    PendingJob.prototype.triggerChange = function (throttle) {
        var _this = this;
        if (this.cancelled)
            return;
        this.pending = true;
        if (this.timeoutId !== null)
            clearTimeout(this.timeoutId);
        this.timeoutId = setTimeout(function () { return _this.launchJob(); }, throttle);
    };
    PendingJob.prototype.stop = function () {
        if (this.timeoutId !== null)
            clearTimeout(this.timeoutId);
        this.timeoutId = null;
        this.cancelled = true;
    };
    PendingJob.prototype.launchJob = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (this.cancelled)
                            return [2 /*return*/];
                        if (!this.pending)
                            return [2 /*return*/];
                        if (this.isJobExecuting)
                            return [2 /*return*/];
                        this.timeoutId = null;
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, , 3, 4]);
                        this.isJobExecuting = true;
                        this.pending = false;
                        return [4 /*yield*/, this.jobCallback()];
                    case 2:
                        _a.sent();
                        return [3 /*break*/, 4];
                    case 3:
                        this.isJobExecuting = false;
                        return [7 /*endfinally*/];
                    case 4:
                        if (!this.pending) return [3 /*break*/, 6];
                        return [4 /*yield*/, this.launchJob()];
                    case 5:
                        _a.sent();
                        _a.label = 6;
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    return PendingJob;
}());



/***/ }),

/***/ "./src/utils/query-string.ts":
/*!***********************************!*\
  !*** ./src/utils/query-string.ts ***!
  \***********************************/
/*! exports provided: parseQueryString, generateQueryString, parseHashQueryString, generateHashQueryString, splitUrlAndQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseQueryString", function() { return parseQueryString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generateQueryString", function() { return generateQueryString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseHashQueryString", function() { return parseHashQueryString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generateHashQueryString", function() { return generateHashQueryString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "splitUrlAndQuery", function() { return splitUrlAndQuery; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

function parseQueryString(locationSearch, options) {
    var toLower = (options || {}).toLower;
    var result = {};
    if (locationSearch && locationSearch.length > 1)
        locationSearch.substr(1)
            .split('&')
            .map(function (part) { return part.split('=').map(function (s) { return decodeURIComponent(s.trim()); }); })
            .forEach(function (_a) {
            var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](_a, 2), key = _b[0], value = _b[1];
            return result[toLower ? key.toLowerCase() : key] = value;
        });
    return result;
}
function encodeParams(params) {
    return Object.keys(params).filter(function (key) { return params[key] !== undefined; }).map(function (key) { return encodeURIComponent(key) + "=" + encodeURIComponent(params[key]); }).join('&');
}
function generateQueryString(params) {
    return "?" + encodeParams(params);
}
function parseHashQueryString(locationHash, options) {
    return parseQueryString(locationHash, options);
}
function generateHashQueryString(params) {
    return "#" + encodeParams(params);
}
function splitUrlAndQuery(urlWithPossibleQuery) {
    var pQuery = urlWithPossibleQuery.indexOf('?');
    return pQuery >= 0 ?
        [urlWithPossibleQuery.substr(0, pQuery), urlWithPossibleQuery.substr(pQuery)] :
        [urlWithPossibleQuery, ""];
}


/***/ }),

/***/ "./src/utils/school-moment.ts":
/*!************************************!*\
  !*** ./src/utils/school-moment.ts ***!
  \************************************/
/*! exports provided: getFirstAndLastWeekOfTerm, getTermStarEndDate, getSchoolMoment, addYear, nextAcademicYear, prevAcademicYear */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFirstAndLastWeekOfTerm", function() { return getFirstAndLastWeekOfTerm; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTermStarEndDate", function() { return getTermStarEndDate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSchoolMoment", function() { return getSchoolMoment; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addYear", function() { return addYear; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "nextAcademicYear", function() { return nextAcademicYear; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "prevAcademicYear", function() { return prevAcademicYear; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_1__);


function getFirstAndLastWeekOfTerm(term) {
    return term === 'AT' ?
        [32, 51] :
        [1, 25];
}
//Not used anymore
// export function getTermStartAndEnd(now: moment.Moment) : moment.Moment[] {
//     return now.month() >= 6 ? // 6 = July in JS Dates and in moment as well!
//     [moment(new Date(now.year(), 7, 1)), moment(new Date(now.year(), 11, 31))] : // aug1 - dec31
//     [moment(new Date(now.year(), 0, 1)), moment(new Date(now.year(), 6, 31))]; // jan1 - july31
// }
function getTermStarEndDate(date, isFirstTerm) {
    var addYear = date.getMonth() >= 7;
    var termYear = null;
    if (addYear) {
        termYear = isFirstTerm ? date.getFullYear() : date.getFullYear() + 1;
    }
    else {
        termYear = isFirstTerm ? date.getFullYear() - 1 : date.getFullYear();
    }
    var termYearMoment = moment__WEBPACK_IMPORTED_MODULE_1___default()(termYear.toString(), "YYYY");
    if (termYearMoment.week() != 1) {
        termYearMoment = termYearMoment.clone().add(1, 'week');
    }
    return isFirstTerm ? [moment__WEBPACK_IMPORTED_MODULE_1___default()(termYearMoment.clone()).week(32).startOf('week'), moment__WEBPACK_IMPORTED_MODULE_1___default()(termYearMoment.clone()).week(51).endOf('week')] :
        [moment__WEBPACK_IMPORTED_MODULE_1___default()(termYearMoment.clone()), moment__WEBPACK_IMPORTED_MODULE_1___default()(termYearMoment.clone()).week(25).endOf('week')];
}
function getSchoolMoment(m) {
    var thisYear = m.year();
    var isAutumn = m.month() >= 6; // determine 
    var _a = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](isAutumn ?
        [thisYear, thisYear + 1] :
        [thisYear - 1, thisYear], 2), autumnYear = _a[0], springYear = _a[1];
    var academicYear = '' + autumnYear + '/' + springYear;
    var term = isAutumn ? 'AT' : 'ST';
    var week = m.week();
    return { academicYear: academicYear, term: term, week: week };
}
function addYear(aYear, numYearsToAdd) {
    return aYear.split('/')
        .map(function (yearStr) { return parseInt(yearStr) + numYearsToAdd; })
        .map(function (year) { return '' + year; })
        .join('/');
}
function nextAcademicYear(aYear) {
    return addYear(aYear, 1);
}
function prevAcademicYear(aYear) {
    return addYear(aYear, -1);
}


/***/ }),

/***/ "./src/utils/school-term.ts":
/*!**********************************!*\
  !*** ./src/utils/school-term.ts ***!
  \**********************************/
/*! exports provided: SchoolTerm */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SchoolTerm", function() { return SchoolTerm; });
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _school_moment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./school-moment */ "./src/utils/school-moment.ts");


function isSchoolMoment(obj) {
    return 'academicYear' in obj;
}
var SchoolTerm = /** @class */ (function () {
    function SchoolTerm(dateOrSchoolMoment) {
        var schoolMoment = isSchoolMoment(dateOrSchoolMoment) ?
            dateOrSchoolMoment : Object(_school_moment__WEBPACK_IMPORTED_MODULE_1__["getSchoolMoment"])(moment__WEBPACK_IMPORTED_MODULE_0___default()(dateOrSchoolMoment));
        this.academicYear = schoolMoment.academicYear;
        this.term = schoolMoment.term;
    }
    Object.defineProperty(SchoolTerm.prototype, "year", {
        get: function () {
            return parseInt(this.academicYear
                .split('/')[this.term === 'AT' ? 0 : 1]);
        },
        enumerable: true,
        configurable: true
    });
    SchoolTerm.prototype.nextTerm = function () {
        return new SchoolTerm(this.term === 'AT' ?
            {
                term: 'ST',
                academicYear: this.academicYear
            } :
            {
                term: 'AT',
                academicYear: Object(_school_moment__WEBPACK_IMPORTED_MODULE_1__["addYear"])(this.academicYear, 1)
            });
    };
    SchoolTerm.prototype.prevTerm = function () {
        return new SchoolTerm(this.term === 'AT' ?
            {
                term: 'ST',
                academicYear: Object(_school_moment__WEBPACK_IMPORTED_MODULE_1__["addYear"])(this.academicYear, -1)
            } :
            {
                term: 'AT',
                academicYear: this.academicYear
            });
    };
    SchoolTerm.prototype.toLocaleString = function (intl, shortYear) {
        var year = this.term === 'AT' ?
            this.academicYear.split('/')[0] :
            this.academicYear.split('/')[1];
        if (shortYear)
            year = year.substr(2);
        return this.term === 'AT' ? intl.formatMessage({ id: 'termplanner.secondTerm', defaultMessage: 'HT {year}' }, { year: year }) :
            intl.formatMessage({ id: 'termplanner.firstTerm', defaultMessage: 'VT {year}' }, { year: year });
    };
    return SchoolTerm;
}());



/***/ }),

/***/ "./src/utils/utils.ts":
/*!****************************!*\
  !*** ./src/utils/utils.ts ***!
  \****************************/
/*! exports provided: capitalizeFirst, extend, clone, flatten, compareProp, compareProps, L, TC, dateTimeReviver, showInfo, showError, maxLength, arrayToLookup, arrayToMap, cherryPickProps, distinct, shallowEquals */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "capitalizeFirst", function() { return capitalizeFirst; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "extend", function() { return extend; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clone", function() { return clone; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "flatten", function() { return flatten; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "compareProp", function() { return compareProp; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "compareProps", function() { return compareProps; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "L", function() { return L; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TC", function() { return TC; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dateTimeReviver", function() { return dateTimeReviver; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "showInfo", function() { return showInfo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "showError", function() { return showError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "maxLength", function() { return maxLength; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "arrayToLookup", function() { return arrayToLookup; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "arrayToMap", function() { return arrayToMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cherryPickProps", function() { return cherryPickProps; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "distinct", function() { return distinct; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shallowEquals", function() { return shallowEquals; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

function capitalizeFirst(str) {
    for (var i = 0, l = str.length; i < l; ++i) {
        if (str.charCodeAt(i) < 0x2000) {
            return str.substr(0, i) + str[i].toLocaleUpperCase() + str.substr(i + 1);
        }
    }
    return str;
}
function extend(obj, extension) {
    if (typeof extension !== 'object')
        return obj;
    Object.keys(extension).forEach(function (key) {
        obj[key] = extension[key];
    });
    return obj;
}
function clone(obj, extension) {
    var clone = {};
    Object.getOwnPropertyNames(obj).forEach(function (key) {
        Object.defineProperty(clone, key, Object.getOwnPropertyDescriptor(obj, key));
    });
    if (extension)
        extend(clone, extension);
    return clone;
}
var concat = [].concat;
function flatten(a) {
    return concat.apply([], a);
}
function compareProp(prop) {
    return function (a, b) {
        var aProp = a[prop], bProp = b[prop];
        return aProp > bProp ? 1 : aProp < bProp ? -1 : 0;
    };
}
function compareProps(props, locales, options) {
    props = Array.isArray(props) ? props : [props];
    var localeCompare = function (a, b) {
        return typeof a === 'string' ?
            a.localeCompare(b, locales, options) :
            a < b ? -1 : a > b ? 1 : 0;
    };
    function cmpPart(a, b, firstPart, rest) {
        var firstA = a[firstPart];
        var firstB = b[firstPart];
        if (firstA === firstB)
            return 0;
        if (firstA == null)
            return -1;
        if (firstB == null)
            return 1;
        return rest.length === 0 ?
            localeCompare(firstA, firstB) :
            cmpPart(firstA, firstB, rest[0], rest.slice(1));
    }
    return props
        .map(function (prop) { return prop.split('.'); })
        .map(function (_a) {
        var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](_a), firstPart = _b[0], rest = _b.slice(1);
        return function (a, b) { return cmpPart(a, b, firstPart, rest); };
    })
        .reduce(function (cmp1, cmp2) {
        return function (a, b) { return cmp1(a, b) || cmp2(a, b); };
    });
}
function L(text) {
    var args = [];
    for (var _i = 1; _i < arguments.length; _i++) {
        args[_i - 1] = arguments[_i];
    }
    var first = text[0];
    return buildMessage(text, args);
}
function buildMessage(text, args) {
    var rv = text[0];
    for (var i = 1, l = text.length; i < l; ++i) {
        rv += args[i - 1] + text[i];
    }
    return rv;
}
var TC = /** @class */ (function () {
    function TC(template) {
        extend(this, template);
    }
    return TC;
}());

function dateTimeReviver(key, value) {
    var a;
    if (typeof value === 'string') {
        a = /\/Date\((\d*)\)\//.exec(value);
        if (a) {
            return new Date(+a[1]);
        }
    }
    return value;
}
//let infoSerial = 1;
function showInfo(msg) {
    var event = new CustomEvent('info', { 'detail': msg });
    window.dispatchEvent(event);
}
function showError(errMsg) {
    var msg = typeof errMsg === 'string' ? errMsg : errMsg.message;
    var event = new CustomEvent('customerror', { 'detail': msg });
    console.error(errMsg);
    window.dispatchEvent(event);
}
function maxLength(str, maxLen) {
    return str.length > maxLen ?
        str.substr(0, maxLen - 3) + "..." :
        str;
}
function arrayToLookup(a, keyAccessor) {
    var result = {};
    for (var i = 0, l = a.length; i < l; ++i) {
        var item = a[i];
        var key = keyAccessor(item);
        var array = result[key];
        if (array)
            array.push(item);
        else
            result[key] = [item];
    }
    return result;
}
function arrayToMap(a, keyAccessor) {
    var result = {};
    for (var i = 0, l = a.length; i < l; ++i) {
        var item = a[i];
        var key = keyAccessor(item);
        result[key] = item;
    }
    return result;
}
function cherryPickProps(obj, propsToPick) {
    var e_1, _a;
    var result = {};
    try {
        for (var propsToPick_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](propsToPick), propsToPick_1_1 = propsToPick_1.next(); !propsToPick_1_1.done; propsToPick_1_1 = propsToPick_1.next()) {
            var param = propsToPick_1_1.value;
            if (param in obj)
                result[param] = obj[param];
        }
    }
    catch (e_1_1) { e_1 = { error: e_1_1 }; }
    finally {
        try {
            if (propsToPick_1_1 && !propsToPick_1_1.done && (_a = propsToPick_1.return)) _a.call(propsToPick_1);
        }
        finally { if (e_1) throw e_1.error; }
    }
    return result;
}
function distinct(a, keyAccessor) {
    var map = arrayToMap(a, keyAccessor || (function (x) { return x; }));
    return Object.keys(map).map(function (key) { return map[key]; });
}
function shallowEquals(a, b) {
    if (a === b)
        return true;
    if (!a || !b)
        return false;
    if (typeof a !== 'object' || typeof b !== 'object')
        return false;
    var keysA = Object.keys(a);
    var keysB = Object.keys(b);
    if (keysA.length !== keysB.length)
        return false;
    for (var i = 0, l = keysA.length; i < l; ++i) {
        var key = keysA[i];
        if (keysB[i] !== key)
            return false;
        if (a[key] !== b[key])
            return false;
    }
    return true;
}


/***/ }),

/***/ "./src/utils/weekutil.ts":
/*!*******************************!*\
  !*** ./src/utils/weekutil.ts ***!
  \*******************************/
/*! exports provided: KEDWeek, getNextWeekDate, getPrevWeekDate, getAdjustedWeek */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KEDWeek", function() { return KEDWeek; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getNextWeekDate", function() { return getNextWeekDate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getPrevWeekDate", function() { return getPrevWeekDate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getAdjustedWeek", function() { return getAdjustedWeek; });
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__);

function KEDWeek(year, week) {
    var m = moment__WEBPACK_IMPORTED_MODULE_0___default()(new Date(year, 1, 1)).week(week);
    var res = {
        year: year,
        week: week,
        notBefore: m.clone().startOf('week').add(-2, 'days').toDate().getTime(),
        notAfter: m.clone().startOf('week').add(5, 'days').toDate().getTime()
    };
    return res;
}
function getNextWeekDate(date) {
    var nextDate = moment__WEBPACK_IMPORTED_MODULE_0___default()(date).add(1, 'week');
    //Set the 01.01 of the next year in case the next week is in the same year 
    //and the previous week is the last week of the year
    if (date.week() === date.weeksInYear() && nextDate.year() === date.year()) {
        return { adjusted: true, nextDate: moment__WEBPACK_IMPORTED_MODULE_0___default()(date.year() + 1 + "-01-01").toDate() };
    }
    return { adjusted: false, nextDate: nextDate.toDate() };
}
function getPrevWeekDate(date) {
    var prevDate = moment__WEBPACK_IMPORTED_MODULE_0___default()(date).add(-1, 'week');
    //Set the 01.01 of the current year in case the prev week is in the previous year
    if (date.week() === 2 && prevDate.year() !== date.year()) {
        return { adjusted: true, nextDate: moment__WEBPACK_IMPORTED_MODULE_0___default()(date.year() + "-01-01").toDate() };
    }
    return { adjusted: false, nextDate: prevDate.toDate() };
}
function getAdjustedWeek(m) {
    var clone = m.clone();
    return m.weekday() >= 5 ? // Lrdag 00:00 / Sndag 00:00?
        m.week() + 1 : // Tillhr nsta vecka
        m.week();
}
/*export function getWeekLimits (m: Moment) {
  const clonedSwedish = m.clone().locale('sv');
  const limits = {
    notBefore: clonedSwedish.startOf('week').add(-2, 'days'),
    notAfter: clonedSwedish.startOf('week').add(5, 'days')
  };
}
*/


/***/ }),

/***/ 0:
/*!*****************************************!*\
  !*** ../locale-data/index.js (ignored) ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ 1:
/*!*******************************!*\
  !*** ./lib/locales (ignored) ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ 2:
/*!*******************************!*\
  !*** ./lib/locales (ignored) ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ "jquery":
/*!*************************!*\
  !*** external "jQuery" ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = jQuery;

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "React" ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = React;

/***/ }),

/***/ "react-dom":
/*!***************************!*\
  !*** external "ReactDOM" ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ReactDOM;

/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9jbGllbnQuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9jbGllbnR3ZWIuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLWNsaWVudC13ZWIvYmVhcmVyLXN0b3JhZ2Utc2Vzc2lvbnN0b3JhZ2UuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLWNsaWVudC13ZWIvaGFzaC1yZXN0b3Jlci5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtY2xpZW50LXdlYi9pbmRleC5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtY2xpZW50L2FjY2Vzcy1jb250cm9sLmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9rZWQtYmFja2VuZC1jbGllbnQvaHR0cC1lcnJvci5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtY2xpZW50L2luZGV4LmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9rZWQtYmFja2VuZC1jbGllbnQva2VkLWJlYXJlci1wcm92aWRlci5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtY2xpZW50L3Jlc3RjbGllbnQuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLWNsaWVudC91dGlscy5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtcmVwby9jYWNoZS1idXN0LmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9rZWQtYmFja2VuZC1yZXBvL2RlbHRhLWNvbGxlY3Rpb24vYXBwbHktbXV0YXRpb25zLW9uLWRlbHRhcy5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtcmVwby9kZWx0YS1jb2xsZWN0aW9uL2RlbHRhLWNhY2hlLmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9rZWQtYmFja2VuZC1yZXBvL2RlbHRhLWNvbGxlY3Rpb24vZGVsdGEtY29sbGVjdGlvbi5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtcmVwby9kZWx0YS1tZXJnZS5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtcmVwby9pbmRleC5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtcmVwby9rZWRiYWNrZW5kLWNvbGxlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLXJlcG8va2VkYmFja2VuZC1xdWVyeS5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtcmVwby9rZWRiYWNrZW5kLXJlcG8uanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLXJlcG8va2VkYmFja2VuZC1zdWJzY3JpcHRpb24uanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLXJlcG8va2VkYmFja2VuZC13cml0ZXIuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLXJlcG8vbXV0YXRpb24tcXVldWUuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLXJlcG8vcXVlcnktc2V0LmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9rZWQtYmFja2VuZC1yZXBvL3V0aWxzLmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9rZWQtbW9kZWwtbWlncmF0b3IvaW5kZXguanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1tb2RlbC1taWdyYXRvci9taWdyYXRlLWNvdXJzZS5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLW1vZGVsLW1pZ3JhdG9yL21pZ3JhdGUtdGFzay5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLW1vZGVsLW1pZ3JhdG9yL21pZ3JhdGUuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL29ic2VydmFibGUvY29sbGVjdGlvbi5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMvb2JzZXJ2YWJsZS9lbWl0dGVyLmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9vYnNlcnZhYmxlL2ZpYmVyLWNvbnRleHQuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL29ic2VydmFibGUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL29ic2VydmFibGUvbWFwLmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9vYnNlcnZhYmxlL21peGluLmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9vYnNlcnZhYmxlL29ic2VydmFibGUuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL29ic2VydmFibGUvdmFsdWUuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9vYnNlcnZhYmxlLmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvcmVwby5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9ub2RlX21vZHVsZXMvbW9tZW50L2xvY2FsZSBzeW5jIHN2fGVuIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9hY2Nlc3MtY29udHJvbC9nZXQtdXNlci1jbGFpbXMudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2FjY2Vzcy1jb250cm9sL2luZGV4LnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9hcGlzL2J1dHRvbnMudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9hcGlzL2NvbmZpZ3MudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2FwaXMvZWRzY2xpZW50LnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9hcGlzL2dvb2dsZS1jbGllbnQudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2FwaXMvZ29vZ2xlLWRyaXZlLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9hcGlzL2dvb2dsZS1waWNrZXIudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2FwaXMvZ29vZ2xlLXdlYmNsaWVudC50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvYXBpcy9tb2NrL21vY2stY2xhc3Nyb29tLWRhdGEudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY2FsZW5kYXIvY291cnNlLW5hbWUtdG8tY3NzLWNsYXNzLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NoYXJ0cy9jaGFydHMtdXRpbHMudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY2hhcnRzL2dvYWwtcHJvZ3Jlc3MudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NoYXJ0cy9wcm9ncmVzcy50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3MvY29tbW9uL2Jhbm5lci50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3MvY29tbW9uL2RpYWxvZy1jb250ZW50LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy9jb21tb24vZGlhbG9nLWNvbnRleHQudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3MvY29tbW9uL2ZpZWxkLWxpbWl0cy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy9jb21tb24vZnV0dXJlLWFiaWxpdGllcy1ib3gudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL2NvbW1vbi9zZWxlY3Qtd29yZC1iYW5rLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy9jb21tb24vdHdvLWNvbHVtbnMtcGFnZS50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3MvbG9naWMvY2hhbmdlLXNvcnQtb3JkZXIudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3MvbG9naWMvY29tcHV0ZS10YXNrLXRhZ3MtYW5kLXN1YmplY3QudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3MvbG9naWMvY291cnNlLWluc3RhbmNlLXRhZ3MudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3MvbG9naWMvZ2V0LWNvdXJzZS1jb2Rlcy1mcm9tLXRhZ3MudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3MvbG9naWMvZ2V0LWRyYWZ0LWlkLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL2xvZ2ljL2dldC1zdGFuZGFyZC1jb3Vyc2VzLXdpdGgtb3JkZXJlZC1yZXF1aXJlbWVudHMudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3MvbG9naWMvaXMtZW1wbG95ZWUudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3MvbG9naWMvaXMta2VkLXN0YWZmLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL2xvZ2ljL2xpc3QtY291cnNlLWluc3RhbmNlcy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy9sb2dpYy9vcmRlcmVkLXJlcXVpcmVtZW50cy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy9sb2dpYy9wdWJsaXNoLWNvdXJzZS50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy9sb2dpYy90YXNrLW9yZGVyLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvYWRkLWNvbnRlbnQtYnV0dG9uLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL2FkZC10YWItYnV0dG9uLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL2NsaWNrYWJsZS1zY2hvb2wtZGl2LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL2NvdXJzZS1hcmVhLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL2NvdXJzZS1jb250ZW50cy9hZGQtdGFzay1idXR0b24udHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvY291cnNlLWNvbnRlbnRzL2NvbnRlbnQtYm94LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL2NvdXJzZS1jb250ZW50cy9jb3Vyc2UtY29udGVudC10eXBlcy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL2NvdXJzZS1jb250ZW50cy9lbWJlZGRlZC1odG1sLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL2NvdXJzZS1jb250ZW50cy9pbmRleC50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL2NvdXJzZS1jb250ZW50cy9sZWFybmluZy10YXNrcy1jb250ZW50LWJveC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci9jb3Vyc2UtY29udGVudHMvbGVhcm5pbmctdGFza3Mtc2V0dGluZ3MudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvY291cnNlLWNvbnRlbnRzL2xlYXJuaW5nLXRhc2tzLXdpdGgtY29tbW9uLWdvYWxzLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL2NvdXJzZS1jb250ZW50cy9sZWFybmluZy10YXNrcy13aXRoLXNlcGFyYXRlLWdvYWxzLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL2NvdXJzZS1jb250ZW50cy9yZXNvdXJjZS1saXN0LXZpZXcudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvY291cnNlLWNvbnRlbnRzL3Jlc291cmNlLWxpc3QudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvY291cnNlLWNvbnRlbnRzL3JpY2gtdGV4dC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci9jb3Vyc2UtY29udGVudHMvd29yZC1iYW5rLWNvbnRlbnQtYm94LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL2NvdXJzZS1jb250ZW50cy93b3JkLWJhbmstY29udGVudC1zZXR0aW5ncy50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci9jb3Vyc2UtdGFiLWFyZWEudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvY291cnNlLXRhYi1jb250ZW50LWJveC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci9jb3Vyc2UtdGFiL3RhYi1jbGFzc2VzLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvY291cnNlLXZpZXdlci1wYWdlLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL2VkaXRvci1mb290ZXItYnV0dG9ucy50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci9pbmRleC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci9saXN0LWNvdXJzZXMvaW5kZXgudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvbGlzdC1jb3Vyc2VzL3N0dWRlbnQtY291cnNlcy1ib3gudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvcmVkaXJlY3QtdG8tc3RlcC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci90YWItc2V0dGluZ3MtYWRtaW4udHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvdGFiLXNldHRpbmdzLXJlcXVpcmVtZW50cy50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci90YWItc2V0dGluZ3MudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvdGFzay9sZWZ0LWNvbHVtbi9lZGl0LXJlcXVpcmVtZW50cy50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci90YXNrL3JpZ2h0LWNvbHVtbi9iYXNpYy1lZGl0YWJsZS10YXNrLWZpZWxkcy50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci90YXNrL3JpZ2h0LWNvbHVtbi9lZGl0LXRhc2stZm9ybS50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci90YXNrL3JpZ2h0LWNvbHVtbi9pbnRyb2R1Y3Rpb24tdGV4dC1lZGl0b3IudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvdGFzay9yaWdodC1jb2x1bW4vdGFzay1kZXNjcmlwdGlvbi1lZGl0b3IudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvdGFzay9yaWdodC1jb2x1bW4vdGFzay1lbWJlZGRlZC1odG1sLWVkaXRvci50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci90YXNrL3JpZ2h0LWNvbHVtbi90YXNrLWZvb3Rlci1idXR0b25zLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL3Rhc2svcmlnaHQtY29sdW1uL3Rhc2std29ya2luZy1wcm9jZWR1cmUtZWRpdG9yLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL3Rhc2svdGFzay1lZGl0b3IudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvdGFzay90ZXh0cy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL3Rhc2svdmlld2VyL3Rhc2stdmlld2VyLXBhZ2UudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvdGFzay92aWV3ZXIvdGFzay12aWV3ZXIudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvdmVyc2lvbi1oaXN0b3J5L2RlbHRhLXZpZXcudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvdmVyc2lvbi1oaXN0b3J5L2RlbHRhZG9jLWJveC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci92ZXJzaW9uLWhpc3RvcnkvZGVsdGFsaW5rLWJveC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci92ZXJzaW9uLWhpc3RvcnkvaW5kZXgudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvdmVyc2lvbi1oaXN0b3J5L21vZGVsLWZyaWVuZGx5LW5hbWVzLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvdmVyc2lvbi1oaXN0b3J5L3ZlcnNpb24taGlzdG9yeS1ib3gudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyL2NvdXJzZXMvYnVzaW5lc3MtbG9naWMudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIvbW9kYWwtcGFnZXMvZWRpdC1yZXNvdXJjZS50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIvbW9kYWwtcGFnZXMvZWRpdC10YXNrL3Rhc2stbWlncmF0aW9uLWJveC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIvc3ViLWNvbXBvbmVudHMvZWxsaXBzaXMtbG9hZGVyLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci9zdWItY29tcG9uZW50cy9rbm93bGVkZ2UtbWF0cml4LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci9zdWItY29tcG9uZW50cy9yZW1vdmUtaXRlbS50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIvc3ViLWNvbXBvbmVudHMvc2VsZWN0LXJlbGF0ZWQtZG9jcy50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIvc3ViLWNvbXBvbmVudHMvc3Bpbm5lci50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIvdXRpbHMudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLXZpZXdlci9jb3Vyc2UtcGFnZS90YXNrLWFzc2lnbm1lbnRzLXRhYmxlLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2Utdmlld2VyL2NvdXJzZS1wYWdlL3Rhc2stYXNzaWdubWVudHMudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS12aWV3ZXIvY291cnNlLXBhZ2UvdXJrdW5kLXV0aWxzLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS12aWV3ZXIvc3ViY29tcG9uZW50cy9hYmlsaXRpZXMtYm94LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2Utdmlld2VyL3N1YmNvbXBvbmVudHMvY2VudHJhbC1jb250ZW50LWJveC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLXZpZXdlci9zdWJjb21wb25lbnRzL2NvbmZpcm1hdGlvbi50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLXZpZXdlci9zdWJjb21wb25lbnRzL2tub3dsZWRnZS1yZXF1aXJlbWVudHMtdGFibGUudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS12aWV3ZXIvc3ViY29tcG9uZW50cy90YXNrLWxpc3QudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy9MYW5ndWFnZUNvbnRleHQudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy9TZXR1cExhbmd1YWdlSW50bC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS1jb21wb25lbnRzL2FsaWduLWhvcml6b250YWwudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy9jaGVja2xpc3QudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy9kaWFsb2dzLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy91dGlsaXR5LWNvbXBvbmVudHMvZm9ybS1maWVsZC10ZXh0LWlucHV0LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy91dGlsaXR5LWNvbXBvbmVudHMvZm9ybS1maWVsZC10ZXh0YXJlYS50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS1jb21wb25lbnRzL2Zvcm0tZmllbGQudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy9ob3Jpem9udGFsLWl0ZW0udHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy9sYXp5LWNvbnRlbnQudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy9saXZlLXF1ZXJ5LXZpZXcudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy9sb2FkaW5nLWluZGljYXRvci50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS1jb21wb25lbnRzL29wZW4tY2xvc2UtYm94LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy91dGlsaXR5LWNvbXBvbmVudHMvc29ydGFibGUtdGFzay1saXN0LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy91dGlsaXR5LWNvbXBvbmVudHMvd3lzaXd5Zy9hY3Rpb25zLXN2LnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy93eXNpd3lnL2FjdGlvbnMudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS1jb21wb25lbnRzL3d5c2l3eWcvZXhlYy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy91dGlsaXR5LWNvbXBvbmVudHMvd3lzaXd5Zy9pbWFnZS1lZGl0LWFjdGlvbnMudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS1jb21wb25lbnRzL3d5c2l3eWcvaW5kZXgudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy93eXNpd3lnL3Jlc3RvcmUtc2VsZWN0aW9uLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy93eXNpd3lnL3dhc2gtaHRtbC50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy93ZWVrcGxhbm5lci9hZGQtY3VzdG9tLWdvYWwudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3dlZWtwbGFubmVyL2FkZC1jdXN0b20tdGFzay50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvd2Vla3BsYW5uZXIvYWRkLW9yLWVkaXQtc3ViLXRhc2sudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3dlZWtwbGFubmVyL2VkaXQtdXNlci10YXNrLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy93ZWVrcGxhbm5lci9nZXQtdGFzay10eXBlLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3dlZWtwbGFubmVyL3JlZmluZXIudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvd2Vla3BsYW5uZXIvdXNlci10YXNrcy1ib3gudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3dlZWtwbGFubmVyL3dlZWtwbGFubmVyLXBlcnNpc3RlZC1zdGF0ZS50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy93ZWVrcGxhbm5lci93ZWVrcGxhbm5lci50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbnRyYWN0cy9rZWQtbW9kZWxzLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9mZWF0dXJlcy9mZWF0dXJlcy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvZmVhdHVyZXMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2dsb2JhbC1zZXR0ZXJzL2NvbmZpZ3VyZS50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvZ2xvYmFsLXNldHRlcnMvc2V0LWFsbC50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvZ2xvYmFsLXNldHRlcnMvc2V0LWJlYXJlci1wcm92aWRlcnMudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2dsb2JhbC1zZXR0ZXJzL3NldC1lZHMtY2xpZW50LnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9nbG9iYWwtc2V0dGVycy9zZXQta2VkLWJhY2tlbmQtY2xpZW50LnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9nbG9iYWxzL0tFRC5jZmcudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2dsb2JhbHMvS0VELmVudi50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvZ2xvYmFscy9LRUQudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2dsb2JhbHMvZGIudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2dsb2JhbHMva2VkLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9nbG9iYWxzL21vbWVudC1zdi1sb2NhbGUudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3JlcG9zL2tlZC1yZXBvLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9yZXBvcy9yZXBvLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9yZXBvcy91c2VyLXRhc2tzLXJlcG8udHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3Rlc3QvZGF0YS91c2Vycy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvdGVzdC9zZXQtY3VycmVudC11c2VyLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy90ZXN0L3Rlc3QtY29uZmlnLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy90ZXN0L3Rlc3RwYWdlLXNwLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvdGVzdC91dGlscy9jaG9vc2UtdXNlci50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3Rlc3QvdXRpbHMvaW5jbHVkZS1jc3MudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3V0aWxzL2Vycm9yLXN1Y2Nlc3MtZmVlZGJhY2sudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy91dGlscy9pbmNsdWRlLW9wdGlvbmFsLWNzcy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvdXRpbHMva2VlcC1zZXNzaW9uLWFsaXZlLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy91dGlscy9tYWtlLXN1c3BlbnNlLWFwaS50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvdXRpbHMvcGVuZGluZy1qb2IudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3V0aWxzL3F1ZXJ5LXN0cmluZy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvdXRpbHMvc2Nob29sLW1vbWVudC50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvdXRpbHMvc2Nob29sLXRlcm0udHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3V0aWxzL3V0aWxzLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy91dGlscy93ZWVrdXRpbC50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi4vbG9jYWxlLWRhdGEvaW5kZXguanMgKGlnbm9yZWQpIiwid2VicGFjazovL1tuYW1lXS8uL2xpYi9sb2NhbGVzIChpZ25vcmVkKSIsIndlYnBhY2s6Ly9bbmFtZV0vLi9saWIvbG9jYWxlcyAoaWdub3JlZCk/YTE3NyIsIndlYnBhY2s6Ly9bbmFtZV0vZXh0ZXJuYWwgXCJqUXVlcnlcIiIsIndlYnBhY2s6Ly9bbmFtZV0vZXh0ZXJuYWwgXCJSZWFjdFwiIiwid2VicGFjazovL1tuYW1lXS9leHRlcm5hbCBcIlJlYWN0RE9NXCIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGdCQUFRLG9CQUFvQjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUFpQiw0QkFBNEI7QUFDN0M7QUFDQTtBQUNBLDBCQUFrQiwyQkFBMkI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGtEQUEwQyxnQ0FBZ0M7QUFDMUU7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxnRUFBd0Qsa0JBQWtCO0FBQzFFO0FBQ0EseURBQWlELGNBQWM7QUFDL0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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USxDQUFDLENBQUMsTUFBTSxFQUFFLEVBQUMsQ0FBQztLQUM1RTtJQUVELE9BQU8sRUFBQyxRQUFRLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxRQUFRLENBQUMsTUFBTSxFQUFFLEVBQUMsQ0FBQztBQUN4RCxDQUFDO0FBRU0sU0FBUyxlQUFlLENBQUMsQ0FBUztJQUN2QyxJQUFNLEtBQUssR0FBRyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDeEIsT0FBTyxDQUFDLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQywrQkFBK0I7UUFDckQsQ0FBQyxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsc0JBQXNCO1FBQ3JDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUNmLENBQUM7QUFFRDs7Ozs7OztFQU9FOzs7Ozs7Ozs7Ozs7QUNoREYsZTs7Ozs7Ozs7Ozs7QUNBQSxlOzs7Ozs7Ozs7OztBQ0FBLGU7Ozs7Ozs7Ozs7O0FDQUEsd0I7Ozs7Ozs7Ozs7O0FDQUEsdUI7Ozs7Ozs7Ozs7O0FDQUEsMEIiLCJmaWxlIjoidGVzdHBhZ2VzcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIGluc3RhbGwgYSBKU09OUCBjYWxsYmFjayBmb3IgY2h1bmsgbG9hZGluZ1xuIFx0ZnVuY3Rpb24gd2VicGFja0pzb25wQ2FsbGJhY2soZGF0YSkge1xuIFx0XHR2YXIgY2h1bmtJZHMgPSBkYXRhWzBdO1xuIFx0XHR2YXIgbW9yZU1vZHVsZXMgPSBkYXRhWzFdO1xuIFx0XHR2YXIgZXhlY3V0ZU1vZHVsZXMgPSBkYXRhWzJdO1xuXG4gXHRcdC8vIGFkZCBcIm1vcmVNb2R1bGVzXCIgdG8gdGhlIG1vZHVsZXMgb2JqZWN0LFxuIFx0XHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcbiBcdFx0dmFyIG1vZHVsZUlkLCBjaHVua0lkLCBpID0gMCwgcmVzb2x2ZXMgPSBbXTtcbiBcdFx0Zm9yKDtpIDwgY2h1bmtJZHMubGVuZ3RoOyBpKyspIHtcbiBcdFx0XHRjaHVua0lkID0gY2h1bmtJZHNbaV07XG4gXHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKSB7XG4gXHRcdFx0XHRyZXNvbHZlcy5wdXNoKGluc3RhbGxlZENodW5rc1tjaHVua0lkXVswXSk7XG4gXHRcdFx0fVxuIFx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IDA7XG4gXHRcdH1cbiBcdFx0Zm9yKG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG4gXHRcdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcbiBcdFx0XHRcdG1vZHVsZXNbbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuIFx0XHRcdH1cbiBcdFx0fVxuIFx0XHRpZihwYXJlbnRKc29ucEZ1bmN0aW9uKSBwYXJlbnRKc29ucEZ1bmN0aW9uKGRhdGEpO1xuXG4gXHRcdHdoaWxlKHJlc29sdmVzLmxlbmd0aCkge1xuIFx0XHRcdHJlc29sdmVzLnNoaWZ0KCkoKTtcbiBcdFx0fVxuXG4gXHRcdC8vIGFkZCBlbnRyeSBtb2R1bGVzIGZyb20gbG9hZGVkIGNodW5rIHRvIGRlZmVycmVkIGxpc3RcbiBcdFx0ZGVmZXJyZWRNb2R1bGVzLnB1c2guYXBwbHkoZGVmZXJyZWRNb2R1bGVzLCBleGVjdXRlTW9kdWxlcyB8fCBbXSk7XG5cbiBcdFx0Ly8gcnVuIGRlZmVycmVkIG1vZHVsZXMgd2hlbiBhbGwgY2h1bmtzIHJlYWR5XG4gXHRcdHJldHVybiBjaGVja0RlZmVycmVkTW9kdWxlcygpO1xuIFx0fTtcbiBcdGZ1bmN0aW9uIGNoZWNrRGVmZXJyZWRNb2R1bGVzKCkge1xuIFx0XHR2YXIgcmVzdWx0O1xuIFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgZGVmZXJyZWRNb2R1bGVzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0dmFyIGRlZmVycmVkTW9kdWxlID0gZGVmZXJyZWRNb2R1bGVzW2ldO1xuIFx0XHRcdHZhciBmdWxmaWxsZWQgPSB0cnVlO1xuIFx0XHRcdGZvcih2YXIgaiA9IDE7IGogPCBkZWZlcnJlZE1vZHVsZS5sZW5ndGg7IGorKykge1xuIFx0XHRcdFx0dmFyIGRlcElkID0gZGVmZXJyZWRNb2R1bGVbal07XG4gXHRcdFx0XHRpZihpbnN0YWxsZWRDaHVua3NbZGVwSWRdICE9PSAwKSBmdWxmaWxsZWQgPSBmYWxzZTtcbiBcdFx0XHR9XG4gXHRcdFx0aWYoZnVsZmlsbGVkKSB7XG4gXHRcdFx0XHRkZWZlcnJlZE1vZHVsZXMuc3BsaWNlKGktLSwgMSk7XG4gXHRcdFx0XHRyZXN1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IGRlZmVycmVkTW9kdWxlWzBdKTtcbiBcdFx0XHR9XG4gXHRcdH1cblxuIFx0XHRyZXR1cm4gcmVzdWx0O1xuIFx0fVxuXG4gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuIFx0Ly8gdW5kZWZpbmVkID0gY2h1bmsgbm90IGxvYWRlZCwgbnVsbCA9IGNodW5rIHByZWxvYWRlZC9wcmVmZXRjaGVkXG4gXHQvLyBQcm9taXNlID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxuIFx0dmFyIGluc3RhbGxlZENodW5rcyA9IHtcbiBcdFx0XCJ0ZXN0cGFnZXNwXCI6IDBcbiBcdH07XG5cbiBcdHZhciBkZWZlcnJlZE1vZHVsZXMgPSBbXTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0dmFyIGpzb25wQXJyYXkgPSB3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBfbmFtZV9cIl0gPSB3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBfbmFtZV9cIl0gfHwgW107XG4gXHR2YXIgb2xkSnNvbnBGdW5jdGlvbiA9IGpzb25wQXJyYXkucHVzaC5iaW5kKGpzb25wQXJyYXkpO1xuIFx0anNvbnBBcnJheS5wdXNoID0gd2VicGFja0pzb25wQ2FsbGJhY2s7XG4gXHRqc29ucEFycmF5ID0ganNvbnBBcnJheS5zbGljZSgpO1xuIFx0Zm9yKHZhciBpID0gMDsgaSA8IGpzb25wQXJyYXkubGVuZ3RoOyBpKyspIHdlYnBhY2tKc29ucENhbGxiYWNrKGpzb25wQXJyYXlbaV0pO1xuIFx0dmFyIHBhcmVudEpzb25wRnVuY3Rpb24gPSBvbGRKc29ucEZ1bmN0aW9uO1xuXG5cbiBcdC8vIGFkZCBlbnRyeSBtb2R1bGUgdG8gZGVmZXJyZWQgbGlzdFxuIFx0ZGVmZXJyZWRNb2R1bGVzLnB1c2goW1wiLi9zcmMvdGVzdC90ZXN0cGFnZS1zcC50c3hcIixcInZlbmRvcnNcIl0pO1xuIFx0Ly8gcnVuIGRlZmVycmVkIG1vZHVsZXMgd2hlbiByZWFkeVxuIFx0cmV0dXJuIGNoZWNrRGVmZXJyZWRNb2R1bGVzKCk7XG4iLCJleHBvcnQgKiBmcm9tICcuL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtY2xpZW50JzsiLCJleHBvcnQgKiBmcm9tICcuL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtY2xpZW50LXdlYic7IiwidmFyIEJlYXJlclN0b3JhZ2VTZXNzaW9uU3RvcmFnZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEJlYXJlclN0b3JhZ2VTZXNzaW9uU3RvcmFnZSgpIHtcclxuICAgIH1cclxuICAgIEJlYXJlclN0b3JhZ2VTZXNzaW9uU3RvcmFnZS5wcm90b3R5cGUuc2F2ZSA9IGZ1bmN0aW9uIChpZCwgdG9rZW5JbmZvKSB7XHJcbiAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShcImJlYXJlci1cIiArIGlkLCBKU09OLnN0cmluZ2lmeSh0b2tlbkluZm8pKTtcclxuICAgIH07XHJcbiAgICBCZWFyZXJTdG9yYWdlU2Vzc2lvblN0b3JhZ2UucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB2YXIganNvbiA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oXCJiZWFyZXItXCIgKyBpZCk7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoanNvbiA/IEpTT04ucGFyc2UoanNvbikgOiB7IHRva2VuOiBudWxsLCBleHBpcmVzOiAwIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7IHRva2VuOiBudWxsLCBleHBpcmVzOiAwIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gQmVhcmVyU3RvcmFnZVNlc3Npb25TdG9yYWdlO1xyXG59KCkpO1xyXG5leHBvcnQgeyBCZWFyZXJTdG9yYWdlU2Vzc2lvblN0b3JhZ2UgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmVhcmVyLXN0b3JhZ2Utc2Vzc2lvbnN0b3JhZ2UuanMubWFwIiwidmFyIHJlZGlySGFzaCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oXCJyZWRpci1oYXNoXCIpO1xyXG5pZiAocmVkaXJIYXNoKVxyXG4gICAgdHJ5IHtcclxuICAgICAgICB2YXIgX2EgPSBKU09OLnBhcnNlKHJlZGlySGFzaCksIHRpbWUgPSBfYS50aW1lLCBoYXNoID0gX2EuaGFzaDtcclxuICAgICAgICBpZiAodGltZSAmJiB0aW1lID4gRGF0ZS5ub3coKSAtIDYwMDAwKSB7XHJcbiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oXCJyZWRpci1oYXNoXCIpO1xyXG4gICAgICAgICAgICBsb2NhdGlvbi5oYXNoID0gaGFzaDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoXykgeyB9XHJcbmV4cG9ydCBmdW5jdGlvbiByZW1lbWJlckhhc2hMb2NhdGlvbigpIHtcclxuICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oXCJyZWRpci1oYXNoXCIsIEpTT04uc3RyaW5naWZ5KHsgdGltZTogRGF0ZS5ub3coKSwgaGFzaDogbG9jYXRpb24uaGFzaCB9KSk7XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGFzaC1yZXN0b3Jlci5qcy5tYXAiLCJpbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kQ2xpZW50LCBIdHRwRXJyb3IgfSBmcm9tICcuLi9rZWQtYmFja2VuZC1jbGllbnQnO1xyXG5pbXBvcnQgeyBCZWFyZXJTdG9yYWdlU2Vzc2lvblN0b3JhZ2UgfSBmcm9tIFwiLi9iZWFyZXItc3RvcmFnZS1zZXNzaW9uc3RvcmFnZVwiO1xyXG5pbXBvcnQgeyBhdm9pZFNpbXVsdGFub3VzQ2FsbHMgfSBmcm9tICcuLi9rZWQtYmFja2VuZC1jbGllbnQvdXRpbHMnO1xyXG5pbXBvcnQgeyBLZWRNb2RlbE1pZ3JhdG9yTWl4aW4gfSBmcm9tICcuLi9rZWQtbW9kZWwtbWlncmF0b3InO1xyXG5pbXBvcnQgJy4vaGFzaC1yZXN0b3Jlcic7XHJcbmltcG9ydCB7IHJlbWVtYmVySGFzaExvY2F0aW9uIH0gZnJvbSAnLi9oYXNoLXJlc3RvcmVyJztcclxuS2VkTW9kZWxNaWdyYXRvck1peGluKEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlKTtcclxuZXhwb3J0IHZhciBzdG9yYWdlID0gbmV3IEJlYXJlclN0b3JhZ2VTZXNzaW9uU3RvcmFnZSgpO1xyXG52YXIgdGltZU9mUGFnZUxvYWQgPSBEYXRlLm5vdygpO1xyXG52YXIgV2ViU2VydmVyQmVhcmVyUHJvdmlkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBXZWJTZXJ2ZXJCZWFyZXJQcm92aWRlcih0b2tlblBhdGgsIHRva2VuUmVzcG9uc2VNYXBwZXIsIHRva2VuSWQpIHtcclxuICAgICAgICB0aGlzLnRva2VuUGF0aCA9IHRva2VuUGF0aDtcclxuICAgICAgICB0aGlzLnRva2VuUmVzcG9uc2VNYXBwZXIgPSB0b2tlblJlc3BvbnNlTWFwcGVyO1xyXG4gICAgICAgIHRoaXMudG9rZW5JZCA9IHRva2VuSWQ7XHJcbiAgICAgICAgdGhpcy50b2tlbkluZm8gPSB7IHRva2VuOiBudWxsLCBleHBpcmVzOiAwIH07XHJcbiAgICAgICAgdGhpcy5nZXRCZWFyZXIgPSBhdm9pZFNpbXVsdGFub3VzQ2FsbHModGhpcy5nZXRCZWFyZXIuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5yZWZyZXNoQmVhcmVyID0gYXZvaWRTaW11bHRhbm91c0NhbGxzKHRoaXMucmVmcmVzaEJlYXJlci5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuICAgIFdlYlNlcnZlckJlYXJlclByb3ZpZGVyLnByb3RvdHlwZS5nZXRCZWFyZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBfYTtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISF0aGlzLnRva2VuSW5mby50b2tlbikgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy50b2tlbklkKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBzdG9yYWdlLmxvYWQodGhpcy50b2tlbklkKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50b2tlbkluZm8gPSBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gMjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHRoaXMudG9rZW5JbmZvLmV4cGlyZXMgPCBEYXRlLm5vdygpKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucmVmcmVzaEJlYXJlcigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSA0O1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMudG9rZW5JbmZvXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgV2ViU2VydmVyQmVhcmVyUHJvdmlkZXIucHJvdG90eXBlLnJlZnJlc2hCZWFyZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciByZXMsIF9hLCBfYiwgX2MsIF9kO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2UpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2UubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIGZldGNoKHRoaXMudG9rZW5QYXRoLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7IEFjY2VwdDogXCJ0ZXh0L3BsYWluOyBhcHBsaWNhdGlvbi9qc29uXCIgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZGlyZWN0OiAnbWFudWFsJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlOiAnbm8tY2FjaGUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlZGVudGlhbHM6IFwic2FtZS1vcmlnaW5cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMgPSBfZS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAzMDIgfHwgKCFyZXMuc3RhdHVzICYmIHJlcy50eXBlID09PSBcIm9wYXF1ZXJlZGlyZWN0XCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVc2VyIHNlc3Npb24gdGltZWQgb3V0IGFuZCBzZXJ2ZXIgd2FudHMgdG8gcmVkaXJlY3QgZW50aXJlIHBhZ2UgdG8gbG9naW4gcGFnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGltZSB0byByZWxvYWQgY3VycmVudCBwYWdlIHRvIGZvcmNlIGEgcmVkaXJlY3Qgb2YgdGhlIGVudGlyZSBwYWdlIGluc3RlYWQgZm9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBqdXN0IHJlZGlyZWN0aW5nIHRvIC9hcGkvdG9rZW4gb3Igd2hhdGV2ZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoRGF0ZS5ub3coKSAtIHRpbWVPZlBhZ2VMb2FkID4gNjAwMDApIHsgLy8gcHJvaGliaXQgZW5kbGVzcyBsb29wIG9mIHJlbG9hZGluZyBzZWxmLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2FudHNSZWRpcmVjdCA9IHRydWU7IC8vIFNvIHRoYXQgbGlzdGVuZXJzIHRvIG9uYmVmb3JldW5sb2FkIGNvdWxkIHNob3cgYWx0ZXJuYXRlIG1lc3NhZ2UuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJSZWRpcmVjdCB3YW50ZWQuIFJlbG9hZCBwYWdlLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1lbWJlckhhc2hMb2NhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEh0dHBFcnJvcigzMDIsIFwiUmVkaXJlY3RlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShyZXMuc3RhdHVzICE9IDIwMCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IEVycm9yLmJpbmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iID0gXCJIVFRQXCIgKyByZXMuc3RhdHVzICsgXCIgXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlcy50ZXh0KCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogdGhyb3cgbmV3IChfYS5hcHBseShFcnJvciwgW3ZvaWQgMCwgX2IgKyAoX2Uuc2VudCgpKV0pKSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2MgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZCA9IHRoaXMudG9rZW5SZXNwb25zZU1hcHBlcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzLnRleHQoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYy50b2tlbkluZm8gPSBfZC5hcHBseSh0aGlzLCBbX2Uuc2VudCgpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JhZ2Uuc2F2ZSh0aGlzLnRva2VuSWQsIHRoaXMudG9rZW5JbmZvKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMudG9rZW5JbmZvXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFdlYlNlcnZlckJlYXJlclByb3ZpZGVyO1xyXG59KCkpO1xyXG5leHBvcnQgeyBXZWJTZXJ2ZXJCZWFyZXJQcm92aWRlciB9O1xyXG5leHBvcnQgdmFyIGlzb21vcnBoaWMgPSB7IGZldGNoOiBmZXRjaC5iaW5kKHNlbGYpLCBidG9hOiBidG9hLmJpbmQoc2VsZikgfTtcclxudmFyIEtlZEJhY2tlbmRDbGllbnRXZWIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhLZWRCYWNrZW5kQ2xpZW50V2ViLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gS2VkQmFja2VuZENsaWVudFdlYihhcGlCYXNlVXJsLCBwcm92aWRlck9yVG9rZW5QYXRoLCBvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgYmVhcmVyUHJvdmlkZXIgPSB0eXBlb2YgcHJvdmlkZXJPclRva2VuUGF0aCAhPT0gJ3N0cmluZycgP1xyXG4gICAgICAgICAgICBwcm92aWRlck9yVG9rZW5QYXRoIDpcclxuICAgICAgICAgICAgbmV3IFdlYlNlcnZlckJlYXJlclByb3ZpZGVyKHByb3ZpZGVyT3JUb2tlblBhdGgsIChvcHRpb25zICYmIG9wdGlvbnMudG9rZW5SZXNwb25zZU1hcHBlcikgfHwgKGZ1bmN0aW9uICh4KSB7IHJldHVybiAoeyB0b2tlbjogeCwgZXhwaXJlczogRGF0ZS5ub3coKSArIDU5ICogNjAgKiA2MCB9KTsgfSksIG9wdGlvbnMgJiYgb3B0aW9ucy50b2tlbklkKTtcclxuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGlzb21vcnBoaWMsIGJlYXJlclByb3ZpZGVyLCBhcGlCYXNlVXJsKSB8fCB0aGlzO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIHJldHVybiBLZWRCYWNrZW5kQ2xpZW50V2ViO1xyXG59KEtlZEJhY2tlbmRDbGllbnQpKTtcclxuZXhwb3J0IHsgS2VkQmFja2VuZENsaWVudFdlYiB9O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJ2YXIgRG9jdW1lbnRBY2Nlc3MgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEb2N1bWVudEFjY2VzcyhhY2Nlc3NDbGFpbVR5cGUsIGFjY2Vzc0NsYWltVmFsdWUsIHJpZ2h0KSB7XHJcbiAgICAgICAgdGhpcy5hY2Nlc3NDbGFpbVR5cGUgPSBhY2Nlc3NDbGFpbVR5cGU7XHJcbiAgICAgICAgdGhpcy5hY2Nlc3NDbGFpbVZhbHVlID0gYWNjZXNzQ2xhaW1WYWx1ZTtcclxuICAgICAgICB0aGlzLnJpZ2h0ID0gcmlnaHQ7XHJcbiAgICB9XHJcbiAgICBEb2N1bWVudEFjY2Vzcy5mcm9tU3RyaW5nID0gZnVuY3Rpb24gKGFjKSB7XHJcbiAgICAgICAgaWYgKCFhYylcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgdmFyIHNwbGl0ID0gYWMuc3BsaXQoJzonKTtcclxuICAgICAgICBpZiAoc3BsaXQubGVuZ3RoIDwgMylcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBhY2Nlc3Mgc3RyaW5nOiBcIiArIGFjKTtcclxuICAgICAgICB2YXIgY2xhaW1UeXBlID0gRG9jdW1lbnRBY2Nlc3MudW5lc2NhcGUoc3BsaXRbMF0pO1xyXG4gICAgICAgIHZhciBjbGFpbVZhbHVlID0gRG9jdW1lbnRBY2Nlc3MudW5lc2NhcGUoc3BsaXRbMV0pO1xyXG4gICAgICAgIHZhciByaWdodCA9IHNwbGl0WzJdO1xyXG4gICAgICAgIGlmIChyaWdodCAhPT0gJ1InICYmIHJpZ2h0ICE9PSAnVycgJiYgcmlnaHQgIT09ICdTJylcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBhY2Nlc3Mgc3RyaW5nOiBcIiArIGFjKTtcclxuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50QWNjZXNzKGNsYWltVHlwZSwgY2xhaW1WYWx1ZSwgcmlnaHQpO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50QWNjZXNzLmVzY2FwZSA9IGZ1bmN0aW9uIChhY2Nlc3NDb21wb25lbnQpIHtcclxuICAgICAgICByZXR1cm4gYWNjZXNzQ29tcG9uZW50LnJlcGxhY2UoL1xcJS9nLCBcIiUyNVwiKS5yZXBsYWNlKC9cXDovZywgXCIlM0FcIik7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRBY2Nlc3MudW5lc2NhcGUgPSBmdW5jdGlvbiAoYWNjZXNzQ29tcG9uZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIGFjY2Vzc0NvbXBvbmVudC5yZXBsYWNlKC9cXCUzQS9nLCBcIjpcIikucmVwbGFjZSgvXFwlMjUvZywgXCIlXCIpO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50QWNjZXNzLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gRG9jdW1lbnRBY2Nlc3MuZXNjYXBlKHRoaXMuYWNjZXNzQ2xhaW1UeXBlKSArIFwiOlwiICtcclxuICAgICAgICAgICAgRG9jdW1lbnRBY2Nlc3MuZXNjYXBlKHRoaXMuYWNjZXNzQ2xhaW1WYWx1ZSkgKyBcIjpcIiArXHJcbiAgICAgICAgICAgIHRoaXMucmlnaHQ7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRBY2Nlc3MuZnJvbVN0cmluZ0FycmF5ID0gZnVuY3Rpb24gKGFjbCkge1xyXG4gICAgICAgIHJldHVybiBhY2xcclxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoYWMpIHsgcmV0dXJuIERvY3VtZW50QWNjZXNzLmZyb21TdHJpbmcoYWMpOyB9KVxyXG4gICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChhYykgeyByZXR1cm4gYWM7IH0pO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50QWNjZXNzLnRvU3RyaW5nQXJyYXkgPSBmdW5jdGlvbiAoYWNsKSB7XHJcbiAgICAgICAgcmV0dXJuIGFjbC5tYXAoZnVuY3Rpb24gKGFjKSB7IHJldHVybiBhYy50b1N0cmluZygpOyB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRG9jdW1lbnRBY2Nlc3M7XHJcbn0oKSk7XHJcbmV4cG9ydCB7IERvY3VtZW50QWNjZXNzIH07XHJcbmV4cG9ydCBmdW5jdGlvbiBoYXNBY2Nlc3MoYWNsLCB1c2VyQ2xhaW1zLCByZXF1ZXN0ZWRSaWdodCkge1xyXG4gICAgaWYgKHVzZXJDbGFpbXMuc29tZShmdW5jdGlvbiAoY2xhaW0pIHsgcmV0dXJuIGNsYWltLnR5cGUgPT09ICdyb2xlJyAmJiBjbGFpbS52YWx1ZSA9PT0gXCJBRE1JTlwiOyB9KSlcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIHJldHVybiBhY2wuc29tZShmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgIHJldHVybiB1c2VyQ2xhaW1zLnNvbWUoZnVuY3Rpb24gKGMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGEuYWNjZXNzQ2xhaW1UeXBlID09PSBjLnR5cGUgJiZcclxuICAgICAgICAgICAgICAgIGEuYWNjZXNzQ2xhaW1WYWx1ZSA9PT0gYy52YWx1ZSAmJiAoKGEucmlnaHQgPT09ICdSJyAmJiByZXF1ZXN0ZWRSaWdodCA9PT0gJ1InKSB8fFxyXG4gICAgICAgICAgICAgICAgKGEucmlnaHQgPT09ICdXJyAmJiBbJ1InLCAnVyddLmluZGV4T2YocmVxdWVzdGVkUmlnaHQpID49IDApIHx8XHJcbiAgICAgICAgICAgICAgICAoYS5yaWdodCA9PT0gJ1MnKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hY2Nlc3MtY29udHJvbC5qcy5tYXAiLCJpbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xyXG52YXIgSHR0cEVycm9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoSHR0cEVycm9yLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gSHR0cEVycm9yKGNvZGUsIG1lc3NhZ2UpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBcIkhUVFBcIiArIGNvZGUgKyBcIiBcIiArIG1lc3NhZ2UpIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuY29kZSA9IGNvZGU7XHJcbiAgICAgICAgX3RoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XHJcbiAgICAgICAgX3RoaXMubmFtZSA9IFwiaHR0cFwiICsgY29kZTtcclxuICAgICAgICBfdGhpcy5tZXNzYWdlID0gXCJIVFRQXCIgKyBjb2RlICsgXCIgXCIgKyBtZXNzYWdlO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIHJldHVybiBIdHRwRXJyb3I7XHJcbn0oRXJyb3IpKTtcclxuZXhwb3J0IHsgSHR0cEVycm9yIH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWh0dHAtZXJyb3IuanMubWFwIiwiaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcclxuaW1wb3J0IHsgUmVzdENsaWVudCB9IGZyb20gJy4vcmVzdGNsaWVudCc7XHJcbmV4cG9ydCAqIGZyb20gJy4vdXRpbHMnO1xyXG5leHBvcnQgeyBLZWRCZWFyZXJQcm92aWRlciB9IGZyb20gJy4va2VkLWJlYXJlci1wcm92aWRlcic7XHJcbmV4cG9ydCAqIGZyb20gJy4vYWNjZXNzLWNvbnRyb2wnO1xyXG5leHBvcnQgeyBSZXN0Q2xpZW50IH07XHJcbmltcG9ydCB7IEh0dHBFcnJvciB9IGZyb20gJy4vaHR0cC1lcnJvcic7XHJcbmV4cG9ydCB7IEh0dHBFcnJvciB9O1xyXG5leHBvcnQgKiBmcm9tICcuL3Jlc3RjbGllbnQnO1xyXG47XHJcbi8vIHwgJ290aGVyRmxhZycgfCAndGhpcmRGbGFnJzsuLi5cclxudmFyIEtlZEJhY2tlbmRDbGllbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBLZWRCYWNrZW5kQ2xpZW50KGlzb21vcnBoaWMsIGJlYXJlclByb3ZpZGVyLCBiYXNlVXJsKSB7XHJcbiAgICAgICAgdGhpcy5odHRwID0gbmV3IFJlc3RDbGllbnQoaXNvbW9ycGhpYywgYmFzZVVybCwgeyBiZWFyZXJQcm92aWRlcjogYmVhcmVyUHJvdmlkZXIgfSk7XHJcbiAgICB9XHJcbiAgICBLZWRCYWNrZW5kQ2xpZW50LnByb3RvdHlwZS5nZXRNeUNsYWltcyA9IGZ1bmN0aW9uICh0YWJsZSwgZmV0Y2hPcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciByZXMsIF9hLCBfYjtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9jKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmh0dHAuZ2V0KFwibWUvY2xhaW1zL1wiICsgKHRhYmxlIHx8IFwiXCIpLCBudWxsLCBmZXRjaE9wdGlvbnMpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcyA9IF9jLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVzLnN0YXR1cyAhPSAyMDApKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSBIdHRwRXJyb3IuYmluZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2IgPSBbdm9pZCAwLCByZXMuc3RhdHVzXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzLnRleHQoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiB0aHJvdyBuZXcgKF9hLmFwcGx5KEh0dHBFcnJvciwgX2IuY29uY2F0KFtfYy5zZW50KCldKSkpKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzQgLyp5aWVsZCovLCByZXMuanNvbigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMiAvKnJldHVybiovLCBfYy5zZW50KCldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ2xpZW50LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAodGFibGUsIGlkLCBvcHRpb25zLCBmZXRjaE9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHJlcywgX2EsIF9iO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2MpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2MubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuaHR0cC5nZXQodGFibGUgKyBcIi9cIiArIGlkLCBvcHRpb25zLCBmZXRjaE9wdGlvbnMpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcyA9IF9jLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVzLnN0YXR1cyAhPSAyMDApKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSBIdHRwRXJyb3IuYmluZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2IgPSBbdm9pZCAwLCByZXMuc3RhdHVzXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzLnRleHQoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiB0aHJvdyBuZXcgKF9hLmFwcGx5KEh0dHBFcnJvciwgX2IuY29uY2F0KFtfYy5zZW50KCldKSkpKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzQgLyp5aWVsZCovLCByZXMuanNvbigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMiAvKnJldHVybiovLCBfYy5zZW50KCldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ2xpZW50LnByb3RvdHlwZS5saXN0ID0gZnVuY3Rpb24gKHRhYmxlLCBvcHRpb25zLCBmZXRjaE9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHF1ZXJ5LCByZXMsIF9hLCBfYjtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9jKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeSA9IHRzbGliXzEuX19hc3NpZ24oe30sIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLm11dGF0aW9uc09uRW1wdHkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeS5tdXRhdGlvbnNPbkVtcHR5ID0gSlNPTi5zdHJpbmdpZnkob3B0aW9ucy5tdXRhdGlvbnNPbkVtcHR5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5odHRwLmdldChcIlwiICsgdGFibGUsIHF1ZXJ5LCBmZXRjaE9wdGlvbnMpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcyA9IF9jLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVzLnN0YXR1cyAhPSAyMDApKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSBIdHRwRXJyb3IuYmluZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2IgPSBbdm9pZCAwLCByZXMuc3RhdHVzXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzLnRleHQoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiB0aHJvdyBuZXcgKF9hLmFwcGx5KEh0dHBFcnJvciwgX2IuY29uY2F0KFtfYy5zZW50KCldKSkpKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzQgLyp5aWVsZCovLCByZXMuanNvbigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMiAvKnJldHVybiovLCBfYy5zZW50KCldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ2xpZW50LnByb3RvdHlwZS5iYXRjaCA9IGZ1bmN0aW9uIChyZXFzLCBmZXRjaE9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHJlcywgX2EsIF9iO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2MpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2MubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlb3JkZXIgb3BlcmF0aW9ucyBzbyB0aGF0ICdhZGQncyBjb21lIGZpcnN0IGFuZCAnZGVsZXRlJ3MgY29tZSBsYXN0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXFzID0gcmVxcy5zbGljZSgpLnNvcnQoZnVuY3Rpb24gKHJlcTEsIHJlcTIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXExLm9wID09PSAnYWRkJyA/IC0xIDogcmVxMi5vcCA9PT0gJ2FkZCcgPyAxIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXExLm9wID09PSAnZGVsZXRlJyA/IDEgOiByZXEyLm9wID09PSAnZGVsZXRlJyA/IC0xIDogMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuaHR0cC5wb3N0KFwiYmF0Y2hcIiwgcmVxcywgZmV0Y2hPcHRpb25zKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMgPSBfYy5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHJlcy5zdGF0dXMgIT0gMjAwKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gSHR0cEVycm9yLmJpbmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iID0gW3ZvaWQgMCwgcmVzLnN0YXR1c107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlcy50ZXh0KCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogdGhyb3cgbmV3IChfYS5hcHBseShIdHRwRXJyb3IsIF9iLmNvbmNhdChbX2Muc2VudCgpXSkpKSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzLmpzb24oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qLywgX2Muc2VudCgpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENsaWVudC5wcm90b3R5cGUuZG8gPSBmdW5jdGlvbiAoc2NvcGVGbikge1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcnVubmVyO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bm5lciA9IG5ldyBCYXRjaFJ1bm5lcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZUZuKHJ1bm5lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuYmF0Y2gocnVubmVyLm11dGF0aW9uUmVxdWVzdHMpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6IHJldHVybiBbMiAvKnJldHVybiovLCBfYS5zZW50KCldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ2xpZW50LnByb3RvdHlwZS5kZWxldGVSZWFsbSA9IGZ1bmN0aW9uIChyZWFsbSkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcmVzLCBfYSwgX2I7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYykge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYy5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5odHRwLmRlbGV0ZShcInJlYWxtcy9cIiArIHJlYWxtKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMgPSBfYy5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHJlcy5zdGF0dXMgIT0gMjAwKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gSHR0cEVycm9yLmJpbmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iID0gW3ZvaWQgMCwgcmVzLnN0YXR1c107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlcy50ZXh0KCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogdGhyb3cgbmV3IChfYS5hcHBseShIdHRwRXJyb3IsIF9iLmNvbmNhdChbX2Muc2VudCgpXSkpKSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzLmpzb24oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qLywgX2Muc2VudCgpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENsaWVudC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKHRhYmxlLCBkb2MsIGJyYW5jaElkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZG8oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIuYWRkKHRhYmxlLCBkb2MpOyB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ2xpZW50LnByb3RvdHlwZS5wdXQgPSBmdW5jdGlvbiAodGFibGUsIGRvYykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRvKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLnB1dCh0YWJsZSwgZG9jKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENsaWVudC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKHRhYmxlLCBpZCwgZGVsdGFEb2MsIGJyYW5jaElkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZG8oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIudXBkYXRlKHRhYmxlLCBpZCwgZGVsdGFEb2MsIGJyYW5jaElkKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENsaWVudC5wcm90b3R5cGUubWVyZ2UgPSBmdW5jdGlvbiAoYnJhbmNoSWQsIHRhcmdldEJyYW5jaElkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZG8oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIubWVyZ2UoYnJhbmNoSWQsIHRhcmdldEJyYW5jaElkKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENsaWVudC5wcm90b3R5cGUuY2xlYXJCcmFuY2ggPSBmdW5jdGlvbiAoYnJhbmNoSWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kbyhmdW5jdGlvbiAocikgeyByZXR1cm4gci5jbGVhckJyYW5jaChicmFuY2hJZCk7IH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uICh0YWJsZSwgaWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kbyhmdW5jdGlvbiAocikgeyByZXR1cm4gci5kZWxldGUodGFibGUsIGlkKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENsaWVudC5wcm90b3R5cGUuc2hhcmUgPSBmdW5jdGlvbiAodGFibGUsIGlkLCBhY2wpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kbyhmdW5jdGlvbiAocikgeyByZXR1cm4gci5zaGFyZSh0YWJsZSwgaWQsIGFjbCk7IH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLnVuc2hhcmUgPSBmdW5jdGlvbiAodGFibGUsIGlkLCBhY2wpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kbyhmdW5jdGlvbiAocikgeyByZXR1cm4gci51bnNoYXJlKHRhYmxlLCBpZCwgYWNsKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENsaWVudC5wcm90b3R5cGUubGluayA9IGZ1bmN0aW9uIChzb3VyY2VUYWJsZSwgc291cmNlSWQsIHRhcmdldFRhYmxlLCB0YXJnZXRJZCwgbGFiZWwpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kbyhmdW5jdGlvbiAocikgeyByZXR1cm4gci5saW5rKHNvdXJjZVRhYmxlLCBzb3VyY2VJZCwgdGFyZ2V0VGFibGUsIHRhcmdldElkLCBsYWJlbCk7IH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLmxpbmsyID0gZnVuY3Rpb24gKHNvdXJjZVRhYmxlLCBzb3VyY2VJZCwgdGFyZ2V0SWQsIGxhYmVsLCBicmFuY2hJZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRvKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLmxpbmsyKHNvdXJjZVRhYmxlLCBzb3VyY2VJZCwgbGFiZWwsIHRhcmdldElkLCBicmFuY2hJZCk7IH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLnVubGluayA9IGZ1bmN0aW9uIChzb3VyY2VUYWJsZSwgc291cmNlSWQsIHRhcmdldFRhYmxlLCB0YXJnZXRJZCwgbGFiZWwpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kbyhmdW5jdGlvbiAocikgeyByZXR1cm4gci51bmxpbmsoc291cmNlVGFibGUsIHNvdXJjZUlkLCB0YXJnZXRUYWJsZSwgdGFyZ2V0SWQsIGxhYmVsKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENsaWVudC5wcm90b3R5cGUudW5saW5rMiA9IGZ1bmN0aW9uIChzb3VyY2VUYWJsZSwgc291cmNlSWQsIHRhcmdldElkLCBsYWJlbCwgYnJhbmNoSWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kbyhmdW5jdGlvbiAocikgeyByZXR1cm4gci51bmxpbmsyKHNvdXJjZVRhYmxlLCBzb3VyY2VJZCwgbGFiZWwsIHRhcmdldElkLCBicmFuY2hJZCk7IH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLnVuZG9MaW5rID0gZnVuY3Rpb24gKHNvdXJjZVRhYmxlLCBzb3VyY2VJZCwgdGFyZ2V0SWQsIGxhYmVsLCBicmFuY2hJZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRvKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLnVuZG9MaW5rKHNvdXJjZVRhYmxlLCBzb3VyY2VJZCwgbGFiZWwsIHRhcmdldElkLCBicmFuY2hJZCk7IH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBLZWRCYWNrZW5kQ2xpZW50O1xyXG59KCkpO1xyXG5leHBvcnQgeyBLZWRCYWNrZW5kQ2xpZW50IH07XHJcbnZhciBCYXRjaFJ1bm5lciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEJhdGNoUnVubmVyKCkge1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25SZXF1ZXN0cyA9IFtdO1xyXG4gICAgfVxyXG4gICAgQmF0Y2hSdW5uZXIucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uICh0YWJsZSwgZG9jLCBicmFuY2hJZCkge1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25SZXF1ZXN0cy5wdXNoKHsgb3A6ICdhZGQnLCB0YWJsZTogdGFibGUsIGRvYzogZG9jLCBicmFuY2hJZDogYnJhbmNoSWQgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgQmF0Y2hSdW5uZXIucHJvdG90eXBlLnB1dCA9IGZ1bmN0aW9uICh0YWJsZSwgZG9jKSB7XHJcbiAgICAgICAgZG9jID0gdHNsaWJfMS5fX2Fzc2lnbih7fSwgZG9jKTtcclxuICAgICAgICBkZWxldGUgZG9jLmFjbDsgLy8gRm9yYmlkZGVuIHRvIHNlbmQgYWNsIHdpdGggcHV0KCkgY2FsbHMuXHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblJlcXVlc3RzLnB1c2goeyBvcDogJ3B1dCcsIHRhYmxlOiB0YWJsZSwgZG9jOiBkb2MgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgQmF0Y2hSdW5uZXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICh0YWJsZSwgaWQsIGRlbHRhRG9jLCBicmFuY2hJZCkge1xyXG4gICAgICAgIGRlbHRhRG9jID0gdHNsaWJfMS5fX2Fzc2lnbih7fSwgZGVsdGFEb2MpO1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25SZXF1ZXN0cy5wdXNoKHsgb3A6ICd1cGRhdGUnLCB0YWJsZTogdGFibGUsIGlkOiBpZCwgZGVsdGFEb2M6IGRlbHRhRG9jLCBicmFuY2hJZDogYnJhbmNoSWQgfSk7XHJcbiAgICB9O1xyXG4gICAgQmF0Y2hSdW5uZXIucHJvdG90eXBlLm1lcmdlID0gZnVuY3Rpb24gKGJyYW5jaElkLCB0YXJnZXRCcmFuY2hJZCkge1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25SZXF1ZXN0cy5wdXNoKHsgb3A6ICdtZXJnZScsIGJyYW5jaElkOiBicmFuY2hJZCwgdGFyZ2V0QnJhbmNoSWQ6IHRhcmdldEJyYW5jaElkIH0pO1xyXG4gICAgfTtcclxuICAgIEJhdGNoUnVubmVyLnByb3RvdHlwZS5jbGVhckJyYW5jaCA9IGZ1bmN0aW9uIChicmFuY2hJZCkge1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25SZXF1ZXN0cy5wdXNoKHsgb3A6ICdjbGVhci1icmFuY2gnLCBicmFuY2hJZDogYnJhbmNoSWQgfSk7XHJcbiAgICB9O1xyXG4gICAgQmF0Y2hSdW5uZXIucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uICh0YWJsZSwgaWQpIHtcclxuICAgICAgICB0aGlzLm11dGF0aW9uUmVxdWVzdHMucHVzaCh7IG9wOiAnZGVsZXRlJywgdGFibGU6IHRhYmxlLCBpZDogaWQgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgQmF0Y2hSdW5uZXIucHJvdG90eXBlLnNoYXJlID0gZnVuY3Rpb24gKHRhYmxlLCBpZCwgYWNsKSB7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblJlcXVlc3RzLnB1c2goeyBvcDogJ3NoYXJlJywgdGFibGU6IHRhYmxlLCBpZDogaWQsIGFjbDogYWNsIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIEJhdGNoUnVubmVyLnByb3RvdHlwZS51bnNoYXJlID0gZnVuY3Rpb24gKHRhYmxlLCBpZCwgYWNsKSB7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblJlcXVlc3RzLnB1c2goeyBvcDogJ3Vuc2hhcmUnLCB0YWJsZTogdGFibGUsIGlkOiBpZCwgYWNsOiBhY2wgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgQmF0Y2hSdW5uZXIucHJvdG90eXBlLmxpbmsgPSBmdW5jdGlvbiAoc291cmNlVGFibGUsIHNvdXJjZUlkLCB0YXJnZXRUYWJsZSwgdGFyZ2V0SWQsIGxhYmVsKSB7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblJlcXVlc3RzLnB1c2goeyBvcDogJ2xpbmsnLCBzb3VyY2VUYWJsZTogc291cmNlVGFibGUsIHNvdXJjZUlkOiBzb3VyY2VJZCwgdGFyZ2V0VGFibGU6IHRhcmdldFRhYmxlLCB0YXJnZXRJZDogdGFyZ2V0SWQsIGxhYmVsOiBsYWJlbCB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBCYXRjaFJ1bm5lci5wcm90b3R5cGUubGluazIgPSBmdW5jdGlvbiAoc291cmNlVGFibGUsIHNvdXJjZUlkLCBsYWJlbCwgdGFyZ2V0SWQsIGJyYW5jaElkKSB7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblJlcXVlc3RzLnB1c2goeyBvcDogJ2xpbmsnLCBzb3VyY2VUYWJsZTogc291cmNlVGFibGUsIHNvdXJjZUlkOiBzb3VyY2VJZCwgdGFyZ2V0SWQ6IHRhcmdldElkLCBsYWJlbDogbGFiZWwsIGJyYW5jaElkOiBicmFuY2hJZCB9KTtcclxuICAgIH07XHJcbiAgICBCYXRjaFJ1bm5lci5wcm90b3R5cGUudW5saW5rID0gZnVuY3Rpb24gKHNvdXJjZVRhYmxlLCBzb3VyY2VJZCwgdGFyZ2V0VGFibGUsIHRhcmdldElkLCBsYWJlbCkge1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25SZXF1ZXN0cy5wdXNoKHsgb3A6ICd1bmxpbmsnLCBzb3VyY2VUYWJsZTogc291cmNlVGFibGUsIHNvdXJjZUlkOiBzb3VyY2VJZCwgdGFyZ2V0VGFibGU6IHRhcmdldFRhYmxlLCB0YXJnZXRJZDogdGFyZ2V0SWQsIGxhYmVsOiBsYWJlbCB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBCYXRjaFJ1bm5lci5wcm90b3R5cGUudW5saW5rMiA9IGZ1bmN0aW9uIChzb3VyY2VUYWJsZSwgc291cmNlSWQsIGxhYmVsLCB0YXJnZXRJZCwgYnJhbmNoSWQpIHtcclxuICAgICAgICB0aGlzLm11dGF0aW9uUmVxdWVzdHMucHVzaCh7IG9wOiAndW5saW5rJywgc291cmNlVGFibGU6IHNvdXJjZVRhYmxlLCBzb3VyY2VJZDogc291cmNlSWQsIHRhcmdldElkOiB0YXJnZXRJZCwgbGFiZWw6IGxhYmVsLCBicmFuY2hJZDogYnJhbmNoSWQgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgQmF0Y2hSdW5uZXIucHJvdG90eXBlLnVuZG9MaW5rID0gZnVuY3Rpb24gKHNvdXJjZVRhYmxlLCBzb3VyY2VJZCwgbGFiZWwsIHRhcmdldElkLCBicmFuY2hJZCkge1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25SZXF1ZXN0cy5wdXNoKHsgb3A6ICd1bmRvLWxpbmsnLCBzb3VyY2VUYWJsZTogc291cmNlVGFibGUsIHNvdXJjZUlkOiBzb3VyY2VJZCwgdGFyZ2V0SWQ6IHRhcmdldElkLCBsYWJlbDogbGFiZWwsIGJyYW5jaElkOiBicmFuY2hJZCB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQmF0Y2hSdW5uZXI7XHJcbn0oKSk7XHJcbmV4cG9ydCB7IEJhdGNoUnVubmVyIH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsImltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XHJcbmltcG9ydCB7IFJlc3RDbGllbnQgfSBmcm9tICcuL3Jlc3RjbGllbnQnO1xyXG5pbXBvcnQgeyBhdm9pZFNpbXVsdGFub3VzQ2FsbHMgfSBmcm9tICcuL3V0aWxzJztcclxudmFyIEtlZEJlYXJlclByb3ZpZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gS2VkQmVhcmVyUHJvdmlkZXIoaXNvbW9ycGhpYywgc3RvcmFnZSwgdG9rZW5JZCwgY2xpZW50SWQsIGNsaWVudFNlY3JldCwgdG9rZW5VcmwsIHRva2VuUXVlcnkpIHtcclxuICAgICAgICB0aGlzLmlzb21vcnBoaWMgPSBpc29tb3JwaGljO1xyXG4gICAgICAgIHRoaXMuc3RvcmFnZSA9IHN0b3JhZ2U7XHJcbiAgICAgICAgdGhpcy50b2tlbklkID0gdG9rZW5JZDtcclxuICAgICAgICB0aGlzLmNsaWVudElkID0gY2xpZW50SWQ7XHJcbiAgICAgICAgdGhpcy5jbGllbnRTZWNyZXQgPSBjbGllbnRTZWNyZXQ7XHJcbiAgICAgICAgdGhpcy50b2tlblVybCA9IHRva2VuVXJsO1xyXG4gICAgICAgIHRoaXMudG9rZW5RdWVyeSA9IHRva2VuUXVlcnk7XHJcbiAgICAgICAgdGhpcy50b2tlbkluZm8gPSB7IHRva2VuOiBudWxsLCBleHBpcmVzOiAwIH07XHJcbiAgICAgICAgdGhpcy5jbGllbnQgPSBuZXcgUmVzdENsaWVudChpc29tb3JwaGljLCBcIlwiLCB7XHJcbiAgICAgICAgICAgIHVzZXJuYW1lOiB0aGlzLmNsaWVudElkLFxyXG4gICAgICAgICAgICBwYXNzd29yZDogdGhpcy5jbGllbnRTZWNyZXRcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmdldEJlYXJlciA9IGF2b2lkU2ltdWx0YW5vdXNDYWxscyh0aGlzLmdldEJlYXJlci5iaW5kKHRoaXMpKTtcclxuICAgICAgICB0aGlzLnJlZnJlc2hCZWFyZXIgPSBhdm9pZFNpbXVsdGFub3VzQ2FsbHModGhpcy5yZWZyZXNoQmVhcmVyLmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG4gICAgS2VkQmVhcmVyUHJvdmlkZXIucHJvdG90eXBlLmdldEJlYXJlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIF9hLCB0b2tlbiwgZXhwaXJlcywgX2IsIGVfMTtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9jKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IHRoaXMudG9rZW5JbmZvLCB0b2tlbiA9IF9hLnRva2VuLCBleHBpcmVzID0gX2EuZXhwaXJlcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRva2VuICYmIGV4cGlyZXMgPj0gRGF0ZS5ub3coKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnRva2VuSW5mb107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jLmxhYmVsID0gMTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jLnRyeXMucHVzaChbMSwgNCwgLCA2XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5zdG9yYWdlLmxvYWQodGhpcy5jbGllbnRJZCArIFwiL1wiICsgdGhpcy50b2tlbklkKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYi50b2tlbkluZm8gPSBfYy5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRva2VuSW5mby50b2tlbiAmJiB0aGlzLnRva2VuSW5mby5leHBpcmVzID49IERhdGUubm93KCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy50b2tlbkluZm9dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJlZnJlc2hCZWFyZXIoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYy5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnRva2VuSW5mb107XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlXzEgPSBfYy5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucmVmcmVzaEJlYXJlcigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMudG9rZW5JbmZvXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmVhcmVyUHJvdmlkZXIucHJvdG90eXBlLnJlZnJlc2hCZWFyZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciByZXMsIHJldHJpZXMsIF9hLCBfYjtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9jKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXRyaWVzID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2MubGFiZWwgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocmV0cmllcyA8IDYpKSByZXR1cm4gWzMgLypicmVhayovLCA1XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJSZXRyaWV2aW5nIHRva2VuIGZvciBcIiArIHRoaXMudG9rZW5JZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuY2xpZW50LmdldCh0aGlzLnRva2VuVXJsLCB0aGlzLnRva2VuUXVlcnksIHsgY2FjaGU6ICdyZWxvYWQnIH0pXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcyA9IF9jLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgIT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiR290IFwiICsgcmVzLnN0YXR1cyArIFwiIFwiICsgcmVzLnN0YXR1c1RleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYiA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZXMudGV4dCgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRva2VuSW5mbyA9IChfYi50b2tlbiA9IF9jLnNlbnQoKSwgX2IuZXhwaXJlcyA9IERhdGUubm93KCkgKyA1OSAqIDYwICogMTAwMCwgX2IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkdvdCB0b2tlbiBmb3IgXCIgKyB0aGlzLnRva2VuSWQgKyBcIjogXCIgKyBKU09OLnN0cmluZ2lmeSh0aGlzLnRva2VuSW5mbykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0b3JhZ2Uuc2F2ZSh0aGlzLmNsaWVudElkICsgXCIvXCIgKyB0aGlzLnRva2VuSWQsIHRoaXMudG9rZW5JbmZvKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMudG9rZW5JbmZvXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICsrcmV0cmllcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgMV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OiB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gcmV0cmlldmUgdG9rZW4gZm9yIFwiICsgSlNPTi5zdHJpbmdpZnkodGhpcy50b2tlbklkKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBLZWRCZWFyZXJQcm92aWRlcjtcclxufSgpKTtcclxuZXhwb3J0IHsgS2VkQmVhcmVyUHJvdmlkZXIgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9a2VkLWJlYXJlci1wcm92aWRlci5qcy5tYXAiLCIvKlxyXG5kZWNsYXJlIHZhciBCdWZmZXI7IC8vIG5vZGUgYnVpbHQtaW5cclxuXHJcblxyXG5mdW5jdGlvbiBiYXNpY0F1dGhIZWFkZXIodXNlcm5hbWUsIHBhc3N3b3JkKSB7XHJcbiAgICByZXR1cm4gXCJCYXNpYyBcIiArIG5ldyBCdWZmZXIodXNlcm5hbWUgKyBcIjpcIiArIHBhc3N3b3JkKS50b1N0cmluZyhcImJhc2U2NFwiKTtcclxufVxyXG4qL1xyXG5pbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xyXG5pbXBvcnQgeyBjcmVhdGVVVUlEIH0gZnJvbSBcIi4vdXRpbHNcIjtcclxuaW1wb3J0IHsgRW1pdHRlciB9IGZyb20gJy4uL29ic2VydmFibGUvZW1pdHRlcic7XHJcbnZhciBSZXN0Q2xpZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUmVzdENsaWVudChpc29tb3JwaGljLCBiYXNlVXJsLCBvcHRpb25zKSB7XHJcbiAgICAgICAgdGhpcy5pc29tb3JwaGljID0gaXNvbW9ycGhpYztcclxuICAgICAgICB0aGlzLmJhc2VVcmwgPSBiYXNlVXJsO1xyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICAgICAgdGhpcy5udW1PdXRzdGFuZGluZ09wZXJhdGlvbnMgPSAwO1xyXG4gICAgICAgIHRoaXMuX3N0YXR1cyA9IG5ldyBFbWl0dGVyKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuZmV0Y2hPcHRpb25zID0geyBtb2RlOiAnY29ycycgfTtcclxuICAgICAgICB0aGlzLmF1dGhIZWFkZXIgPSBvcHRpb25zLmJlYXJlciA/XHJcbiAgICAgICAgICAgIFwiQmVhcmVyIFwiICsgb3B0aW9ucy5iZWFyZXIgOlxyXG4gICAgICAgICAgICBvcHRpb25zLnVzZXJuYW1lID9cclxuICAgICAgICAgICAgICAgIFwiQmFzaWMgXCIgKyBpc29tb3JwaGljLmJ0b2Eob3B0aW9ucy51c2VybmFtZSArIFwiOlwiICsgKG9wdGlvbnMucGFzc3dvcmQgfHwgXCJcIikpIDpcclxuICAgICAgICAgICAgICAgIG51bGw7XHJcbiAgICAgICAgdGhpcy5iZWFyZXJQcm92aWRlciA9IG9wdGlvbnMuYmVhcmVyUHJvdmlkZXIgfHwgbnVsbDtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN0Q2xpZW50LnByb3RvdHlwZSwgXCJzdGF0dXNcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3RhdHVzO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgUmVzdENsaWVudC5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbiAocGF0aCwgbWV0aG9kLCBoZWFkZXJzLCBxdWVyeSwgZmV0Y2hPcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICArK3RoaXMubnVtT3V0c3RhbmRpbmdPcGVyYXRpb25zO1xyXG4gICAgICAgIHRoaXMuX3N0YXR1cy5kaXNwYXRjaCh0aGlzKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZmV0Y2gocGF0aCwgbWV0aG9kLCBoZWFkZXJzLCBxdWVyeSwgZmV0Y2hPcHRpb25zKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgIC0tX3RoaXMubnVtT3V0c3RhbmRpbmdPcGVyYXRpb25zO1xyXG4gICAgICAgICAgICBfdGhpcy5fc3RhdHVzLmRpc3BhdGNoKF90aGlzKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcztcclxuICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgIC0tX3RoaXMubnVtT3V0c3RhbmRpbmdPcGVyYXRpb25zO1xyXG4gICAgICAgICAgICBfdGhpcy5fc3RhdHVzLmRpc3BhdGNoKF90aGlzKTtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgUmVzdENsaWVudC5wcm90b3R5cGUuX2ZldGNoID0gZnVuY3Rpb24gKHBhdGgsIG1ldGhvZCwgaGVhZGVycywgcXVlcnksIGZldGNoT3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcXVlcnlTdHIsIF9hLCBhdXRoSGVhZGVyLCB0b2tlbkluZm8sIGJlYXJlclByb3ZpZGVyLCBfYiwgX2MsIHVybCwgcmVzLCB3d3dhdXRoLCBfZDtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9lKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9lLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmV0Y2hPcHRpb25zICYmIGZldGNoT3B0aW9ucy5jYWNoZSA9PT0gJ25vLWNhY2hlJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgYmFjay1idXR0b24gbm90IHJlc3BlY3RpbmcgY2FjaGUgY29udHJvbCBpbiBDaHJvbWUvT3BlcmEuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBcHBlbmQgYSBxdWVyeSBwYXJhbWV0ZXIgdG8gZm9yY2UgYSBjYWNoZSBlbnRyeVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnkgPSB0c2xpYl8xLl9fYXNzaWduKHt9LCBxdWVyeSwgeyBub2NhY2hlOiBjcmVhdGVVVUlEKCkgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlTdHIgPSBxdWVyeSAmJiBPYmplY3Qua2V5cyhxdWVyeSkuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIHF1ZXJ5W2tleV0gIT09IHVuZGVmaW5lZDsgfSkubWFwKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoa2V5KSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCI9XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuY29kZVVSSUNvbXBvbmVudChxdWVyeVtrZXldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qb2luKCcmJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gdGhpcywgYXV0aEhlYWRlciA9IF9hLmF1dGhIZWFkZXIsIHRva2VuSW5mbyA9IF9hLnRva2VuSW5mbywgYmVhcmVyUHJvdmlkZXIgPSBfYS5iZWFyZXJQcm92aWRlcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoIWF1dGhIZWFkZXIgJiYgIXRva2VuSW5mbyAmJiBiZWFyZXJQcm92aWRlcikpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYiA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGJlYXJlclByb3ZpZGVyLmdldEJlYXJlcigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLnRva2VuSW5mbyA9IHRva2VuSW5mbyA9IF9lLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2UubGFiZWwgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0b2tlbkluZm8pIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh0b2tlbkluZm8uZXhwaXJlcyA8IERhdGUubm93KCkpKSByZXR1cm4gWzMgLypicmVhayovLCA0XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJUb2tlbiBleHBpcmVkLiBSZWZyZXNoIGl0OlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2MgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBiZWFyZXJQcm92aWRlci5yZWZyZXNoQmVhcmVyKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2MudG9rZW5JbmZvID0gdG9rZW5JbmZvID0gX2Uuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZS5sYWJlbCA9IDQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRoSGVhZGVyID0gXCJCZWFyZXIgXCIgKyB0b2tlbkluZm8udG9rZW47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9lLmxhYmVsID0gNTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluIG9uZSB3YXkgb3IgYW5vdGhlciwgd2UndmUgY29uY2x1ZGVkIGFuIEF1dGhvcml6YXRpb24gaGVhZGVyIHRvIHVzZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF1dGhIZWFkZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnMuQXV0aG9yaXphdGlvbiA9IGF1dGhIZWFkZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsID0gdGhpcy5iYXNlVXJsICsgcGF0aCArIChxdWVyeVN0ciA/IFwiP1wiICsgcXVlcnlTdHIgOiBcIlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5pc29tb3JwaGljLmZldGNoKHVybCwgdHNsaWJfMS5fX2Fzc2lnbih7fSwgdGhpcy5mZXRjaE9wdGlvbnMsIHsgaGVhZGVyczogaGVhZGVycywgbWV0aG9kOiBtZXRob2QgfSwgZmV0Y2hPcHRpb25zKSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gX2Uuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShyZXMuc3RhdHVzID09IDQwMSAmJiB0aGlzLmJlYXJlclByb3ZpZGVyKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgOV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHd3d2F1dGggPSByZXMuaGVhZGVycy5nZXQoXCJ3d3ctYXV0aGVudGljYXRlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkdvdCBcIiArIHJlcy5zdGF0dXMgKyBcIiBmcm9tIFwiICsgKHRoaXMuYmFzZVVybCArIHBhdGgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEod3d3YXV0aCAmJiAvQmVhcmVyL2kudGVzdCh3d3dhdXRoKSkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZCA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuYmVhcmVyUHJvdmlkZXIucmVmcmVzaEJlYXJlcigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9kLnRva2VuSW5mbyA9IF9lLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVycy5BdXRob3JpemF0aW9uID0gXCJCZWFyZXIgXCIgKyB0aGlzLnRva2VuSW5mby50b2tlbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5pc29tb3JwaGljLmZldGNoKHVybCwgdHNsaWJfMS5fX2Fzc2lnbih7fSwgdGhpcy5mZXRjaE9wdGlvbnMsIHsgaGVhZGVyczogaGVhZGVycywgbWV0aG9kOiBtZXRob2QgfSwgZmV0Y2hPcHRpb25zKSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgODpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gX2Uuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZS5sYWJlbCA9IDk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA5OiByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgUmVzdENsaWVudC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHBhdGgsIHF1ZXJ5LCBmZXRjaE9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5mZXRjaChwYXRoLCBcIkdFVFwiLCB7IEFjY2VwdDogXCJhcHBsaWNhdGlvbi9qc29uOyB0ZXh0L3BsYWluXCIgfSwgcXVlcnksIGZldGNoT3B0aW9ucyk7XHJcbiAgICB9O1xyXG4gICAgUmVzdENsaWVudC5wcm90b3R5cGUucG9zdCA9IGZ1bmN0aW9uIChwYXRoLCBkYXRhLCBmZXRjaE9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5mZXRjaChwYXRoLCBcIlBPU1RcIiwge1xyXG4gICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgICAgICAgXCJBY2NlcHRcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgICAgICB9LCBudWxsLCB0c2xpYl8xLl9fYXNzaWduKHt9LCBmZXRjaE9wdGlvbnMsIHsgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSkgfSkpO1xyXG4gICAgfTtcclxuICAgIFJlc3RDbGllbnQucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChwYXRoLCBxdWVyeSwgYm9keSwgZmV0Y2hPcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2gocGF0aCwgXCJERUxFVEVcIiwgeyBBY2NlcHQ6IFwiYXBwbGljYXRpb24vanNvbjsgdGV4dC9wbGFpblwiIH0sIHF1ZXJ5LCB0c2xpYl8xLl9fYXNzaWduKHt9LCBmZXRjaE9wdGlvbnMsIHsgYm9keTogYm9keSB9KSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFJlc3RDbGllbnQ7XHJcbn0oKSk7XHJcbmV4cG9ydCB7IFJlc3RDbGllbnQgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVzdGNsaWVudC5qcy5tYXAiLCJpbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVVVJRCgpIHtcclxuICAgIC8vIERlY2VudCBzb2x1dGlvbiBmcm9tIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTA1MDM0L2hvdy10by1jcmVhdGUtYS1ndWlkLXV1aWQtaW4tamF2YXNjcmlwdFxyXG4gICAgdmFyIGQgPSBEYXRlLm5vdygpO1xyXG4gICAgdmFyIHV1aWQgPSAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uIChjKSB7XHJcbiAgICAgICAgdmFyIHIgPSAoZCArIE1hdGgucmFuZG9tKCkgKiAxNikgJSAxNiB8IDA7XHJcbiAgICAgICAgZCA9IE1hdGguZmxvb3IoZCAvIDE2KTtcclxuICAgICAgICByZXR1cm4gKGMgPT09ICd4JyA/IHIgOiAociAmIDB4NyB8IDB4OCkpLnRvU3RyaW5nKDE2KTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHV1aWQ7XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIGF2b2lkU2ltdWx0YW5vdXNDYWxscyhtZXRob2QpIHtcclxuICAgIHZhciBvbmdvaW5nUHJvbWlzZSA9IG51bGw7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghb25nb2luZ1Byb21pc2UpIHtcclxuICAgICAgICAgICAgb25nb2luZ1Byb21pc2UgPSBtZXRob2QuYXBwbHkodGhpcywgYXJndW1lbnRzKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIG9uZ29pbmdQcm9taXNlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb25nb2luZ1Byb21pc2U7XHJcbiAgICB9O1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRHbG9iYWxJZChyZWFsbSkge1xyXG4gICAgdmFyIHByZWZpeCA9ICdlYzk2YjNiZS00NWZjLTQxZDMtYjY5ZS0nO1xyXG4gICAgdmFyIHBhZCA9IFsnNTAnLCAnMDgnLCAnZTEnLCAnNDAnLCAnZTQnLCAnZTcnXTtcclxuICAgIGlmIChyZWFsbS5sZW5ndGggPiA2KVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRvbyBsb25nIHJlYWxtXCIpO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZWFsbS5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgIHZhciBoZXggPSByZWFsbS5jaGFyQ29kZUF0KGkpLnRvU3RyaW5nKDE2KTtcclxuICAgICAgICBwYWRbaV0gPSBoZXgubGVuZ3RoID09PSAyID9cclxuICAgICAgICAgICAgaGV4IDpcclxuICAgICAgICAgICAgJzAnICsgaGV4O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHByZWZpeCArIHBhZC5qb2luKCcnKTtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gY29tcHV0ZVByZWRlc3RpbmF0ZWRJZChpbnB1dCkge1xyXG4gICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGVuY29kZXIsIGRhdGEsIGRpZ2VzdCwgX2EsIGk7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IGVuY29kZXIuZW5jb2RlKGlucHV0KTtcclxuICAgICAgICAgICAgICAgICAgICBfYSA9IFVpbnQ4QXJyYXkuYmluZDtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBjcnlwdG8uc3VidGxlLmRpZ2VzdCgnU0hBLTI1NicsIGRhdGEpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBkaWdlc3QgPSBuZXcgKF9hLmFwcGx5KFVpbnQ4QXJyYXksIFt2b2lkIDAsIF9iLnNlbnQoKV0pKSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGkgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uIChjKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmliYmxlID0gZGlnZXN0W2krK10gJSAxNiB8IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgd2FzaGVkTmliYmxlID0gYyA9PT0gJ3gnID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaWJibGUgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pYmJsZSAmIDB4NyB8IDB4ODtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB3YXNoZWROaWJibGUudG9TdHJpbmcoMTYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbi8qZXhwb3J0IGZ1bmN0aW9uIGJ1ZjJoZXgoYnVmZmVyOiBBcnJheUJ1ZmZlcikge1xyXG4gIHJldHVybiBBcnJheS5wcm90b3R5cGUubWFwLmNhbGwoXHJcbiAgICBuZXcgVWludDhBcnJheShidWZmZXIpLFxyXG4gICAgKHg6IG51bWJlcikgPT4gKCcwMCcgKyB4LnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpKS5qb2luKCcnKTtcclxufSovXHJcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVBcnJheShhLCBtYXBwZXIpIHtcclxuICAgIHZhciByZXR2YWwgPSBhO1xyXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBhLmxlbmd0aDsgaSA8IGw7ICsraSkge1xyXG4gICAgICAgIHZhciB0ID0gYVtpXTtcclxuICAgICAgICB2YXIgbWFwcGVkID0gbWFwcGVyKHQpO1xyXG4gICAgICAgIGlmIChtYXBwZWQgIT09IHQpIHtcclxuICAgICAgICAgICAgaWYgKHJldHZhbCA9PT0gYSlcclxuICAgICAgICAgICAgICAgIHJldHZhbCA9IGEuc2xpY2UoKTtcclxuICAgICAgICAgICAgcmV0dmFsW2ldID0gbWFwcGVkO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXR2YWw7XHJcbn1cclxuLypcclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUFycmF5PFQ+KGE6IFRbXSwgbWFwcGVyOiAodDogVCkgPT4gVCB8IGZhbHNlKTogVFtdIHtcclxuICBsZXQgcmV0dmFsID0gYTtcclxuICBsZXQgaiA9IDA7XHJcbiAgZm9yIChsZXQgaT0wLGw9YS5sZW5ndGg7IGk8bDsgKytpLCArK2opIHtcclxuICAgIGNvbnN0IHQgPSBhW2ldO1xyXG4gICAgY29uc3QgbWFwcGVkID0gbWFwcGVyKHQpO1xyXG4gICAgaWYgKG1hcHBlZCA9PT0gZmFsc2UpIHtcclxuICAgICAgLy8gTWFwcGVyIHdhbnRzIHRvIGRlbGV0ZSB0aGlzIGRvYy5cclxuICAgICAgaWYgKHJldHZhbCA9PT0gYSkgcmV0dmFsID0gYS5zbGljZSgpO1xyXG4gICAgICByZXR2YWwuc3BsaWNlKGosIDEpO1xyXG4gICAgICAtLWo7IC8vIGNvbXBlbnNhdGUgZm9yICsralxyXG4gICAgfSBlbHNlIGlmIChtYXBwZWQgIT09IHQpIHtcclxuICAgICAgaWYgKHJldHZhbCA9PT0gYSkgcmV0dmFsID0gYS5zbGljZSgpO1xyXG4gICAgICByZXR2YWxbal0gPSBtYXBwZWQ7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiByZXR2YWw7XHJcbn1cclxuKi8gXHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXV0aWxzLmpzLm1hcCIsImltcG9ydCAqIGFzIEpzb25TY2hlbWEgZnJvbSBcImtlZGJhY2tlbmQtc2NoZW1hL3NjaGVtYS5qc29uXCI7XHJcbmltcG9ydCB7IGdldFRhYmxlRnJvbUxhYmVsIH0gZnJvbSBcIi4vdXRpbHNcIjtcclxudmFyIENhY2hlQnVzdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIENhY2hlQnVzdCgpIHtcclxuICAgIH1cclxuICAgIENhY2hlQnVzdC5nZXRDYWNoZUJ1c3QgPSBmdW5jdGlvbiAodGFibGUsIHF1ZXJ5LCB1c2VyLCBpbmNsdWRlcykge1xyXG4gICAgICAgIHZhciBpbnZvbHZlZEl0ZW1zID0gQ2FjaGVCdXN0LmdldEludm9sdmVkSXRlbXModGFibGUsIHF1ZXJ5LCBpbmNsdWRlcyk7XHJcbiAgICAgICAgcmV0dXJuIGludm9sdmVkSXRlbXNcclxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoaXRlbSkgeyByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJjYWNoZS1idXN0LVwiICsgdXNlciArIFwiLVwiICsgaXRlbSk7IH0pXHJcbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiAhIXZhbHVlOyB9KVxyXG4gICAgICAgICAgICAuam9pbignLycpIHx8ICdzdGF0aWMnO1xyXG4gICAgfTtcclxuICAgIENhY2hlQnVzdC5pbnZhbGlkYXRlQ2FjaGUgPSBmdW5jdGlvbiAocmVxcywgdXNlcikge1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBDYWNoZUJ1c3QuZ2V0Q2FjaGVJbnZhbGlkYXRpb25zKHJlcXMpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgaXRlbSA9IF9hW19pXTtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJjYWNoZS1idXN0LVwiICsgdXNlciArIFwiLVwiICsgaXRlbSwgJycgKyBEYXRlLm5vdygpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQ2FjaGVCdXN0LmdldEludm9sdmVkSXRlbXMgPSBmdW5jdGlvbiAodGFibGUsIHF1ZXJ5LCBpbmNsdWRlcykge1xyXG4gICAgICAgIHZhciBoYXNFZGdlc0Zyb20gPSBxdWVyeS5oYXNFZGdlc0Zyb207XHJcbiAgICAgICAgdmFyIHJlbGF0ZWRUYWJsZXMgPSBpbmNsdWRlc1xyXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChsYWJlbCkgeyByZXR1cm4gSnNvblNjaGVtYS50YWJsZXNbdGFibGVdLnJlbGF0aW9uc2hpcHNbbGFiZWxdOyB9KVxyXG4gICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uICh0YWJsZSkgeyByZXR1cm4gISF0YWJsZTsgfSk7XHJcbiAgICAgICAgaWYgKGhhc0VkZ2VzRnJvbSlcclxuICAgICAgICAgICAgcmVsYXRlZFRhYmxlcy5wdXNoKFwiaGVmXCIgKyB0YWJsZSk7XHJcbiAgICAgICAgcmV0dXJuIFt0YWJsZSwgJ21hc3RlcicsIHF1ZXJ5LmJyYW5jaElkXS5maWx0ZXIoZnVuY3Rpb24gKHgpIHsgcmV0dXJuICEheDsgfSkuY29uY2F0KHJlbGF0ZWRUYWJsZXMpLnNvcnQoKTtcclxuICAgIH07XHJcbiAgICBDYWNoZUJ1c3QuZ2V0Q2FjaGVJbnZhbGlkYXRpb25zID0gZnVuY3Rpb24gKHJlcXMpIHtcclxuICAgICAgICB2YXIgaW52YWxpZGF0aW9uU2V0ID0ge307XHJcbiAgICAgICAgcmVxcy5mb3JFYWNoKGZ1bmN0aW9uIChyZXEpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChyZXEub3ApIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2FkZCc6XHJcbiAgICAgICAgICAgICAgICBjYXNlICdwdXQnOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAnZGVsZXRlJzpcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3VwZGF0ZSc6XHJcbiAgICAgICAgICAgICAgICAgICAgaW52YWxpZGF0aW9uU2V0W3JlcS50YWJsZV0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnbGluayc6XHJcbiAgICAgICAgICAgICAgICBjYXNlICd1bmxpbmsnOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAndW5kby1saW5rJzpcclxuICAgICAgICAgICAgICAgICAgICBpbnZhbGlkYXRpb25TZXRbcmVxLnNvdXJjZVRhYmxlXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaW52YWxpZGF0aW9uU2V0W1wiaGVmLVwiICsgZ2V0VGFibGVGcm9tTGFiZWwocmVxLnNvdXJjZVRhYmxlLCByZXEubGFiZWwpXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdjbGVhci1icmFuY2gnOlxyXG4gICAgICAgICAgICAgICAgICAgIGludmFsaWRhdGlvblNldFtyZXEuYnJhbmNoSWRdID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ21lcmdlJzpcclxuICAgICAgICAgICAgICAgICAgICBpbnZhbGlkYXRpb25TZXRbcmVxLmJyYW5jaElkXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaW52YWxpZGF0aW9uU2V0W3JlcS50YXJnZXRCcmFuY2hJZCB8fCBcIm1hc3RlclwiXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoaW52YWxpZGF0aW9uU2V0KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQ2FjaGVCdXN0O1xyXG59KCkpO1xyXG5leHBvcnQgeyBDYWNoZUJ1c3QgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2FjaGUtYnVzdC5qcy5tYXAiLCJpbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xyXG5pbXBvcnQgeyBtZXJnZURlbHRhcyB9IGZyb20gJy4uL2RlbHRhLW1lcmdlJztcclxuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5TXV0YXRpb25zT25EZWx0YXMoYnJhbmNoSWQsIGRlbHRhcywgbXV0YXRpb25zLCBvcHRpbWlzdGljLCB1c2VyRGlzcGxheU5hbWUsIGhhc0FkZGl0aW9uYWxGaWx0ZXIpIHtcclxuICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gKG0pIHtcclxuICAgICAgICBzd2l0Y2ggKG0ub3ApIHtcclxuICAgICAgICAgICAgY2FzZSAnYWRkLXJlbGF0ZWQnOlxyXG4gICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgIC8vIEFkZFJlbGF0ZWQgUmVwb011dGF0aW9uXHJcbiAgICAgICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAgICAgaWYgKCFoYXNBZGRpdGlvbmFsRmlsdGVyICYmIG0uYnJhbmNoSWQgPT09IGJyYW5jaElkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsdGFzID0gW3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdhZGQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlSWQ6IG0uaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRJZDogbS5yZWxhdGVkRG9jLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IG0uZ3JhcGhQcm9wLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlVGFibGU6IG0udGFibGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbWV0YTogb3B0aW1pc3RpYyA/ICdhZGRpbmcnIDogJ3BlcnNpc3RlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlVGltZTogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldE5hbWU6IG0ucmVsYXRlZERvYy5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJpYnV0b3I6IHVzZXJEaXNwbGF5TmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XS5jb25jYXQoZGVsdGFzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdjbGVhci1icmFuY2gnOlxyXG4gICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgIC8vIENsZWFyQnJhbmNoIFJlcG9NdXRhdGlvblxyXG4gICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgIGlmIChtLmJyYW5jaElkID09PSBicmFuY2hJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbHRhcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6XHJcbiAgICAgICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAgICAgLy8gRGVsZXRlIFJlcG9NdXRhdGlvblxyXG4gICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgIC8vIFRoaXMgdHlwZSBvZiBtdXRhdGlvbiBjYW4gbm90IGJlIHBlcmZvcm1lZCBvbnRvIGJyYW5jaGVzLiBUaGVyZSdzIG5vIGJyYW5jaElkIHByb3BlcnR5IG9uIG0uXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnbWVyZ2UnOlxyXG4gICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgIC8vIE1lcmdlIFJlcG9NdXRhdGlvblxyXG4gICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgIGlmIChtLmJyYW5jaElkID09PSBicmFuY2hJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbHRhcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobS50YXJnZXRCcmFuY2hJZCA9PT0gYnJhbmNoSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGNoYW5nZSB3aWxsIGFwcGVuZCBuZXcgZGVsdGFzIHRvIG91ciBkZWx0YXMgYXJyYXkgYnV0IHdlIGRvbid0IGtub3cgd2hhdCB3b3VsZCBjb21lLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIE5lZWQgdG8gcmVmZXRjaCBmcm9tIHNlcnZlci5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW9wdGltaXN0aWMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBudWxsIH07IC8vIENhbGxlciBzaG91bGQgY2hlY2sgZm9yIG51bGwgYW5kIHJlLWZldGNoIGRhdGEgZnJvbSBzZXJ2ZXIuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAncmVtb3ZlLXJlbGF0ZWQnOlxyXG4gICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgIC8vIFJlbW92ZS1SZWxhdGVkIFJlcG9NdXRhdGlvblxyXG4gICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgIGlmIChoYXNBZGRpdGlvbmFsRmlsdGVyIHx8IG0uYnJhbmNoSWQgIT09IGJyYW5jaElkKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImNvbnRpbnVlXCI7XHJcbiAgICAgICAgICAgICAgICBkZWx0YXMgPSBbe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAncmVtb3ZlJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlSWQ6IG0uaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldElkOiBtLnJlbGF0ZWREb2MuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldE5hbWU6IG0ucmVsYXRlZERvYy5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogbS5ncmFwaFByb3AsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZVRhYmxlOiBtLnRhYmxlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cmlidXRvcjogdXNlckRpc3BsYXlOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlVGltZTogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJG1ldGE6IG9wdGltaXN0aWMgPyAnYWRkaW5nJyA6ICdwZXJzaXN0ZWQnXHJcbiAgICAgICAgICAgICAgICAgICAgfV0uY29uY2F0KGRlbHRhcyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAndW5kby1saW5rJzpcclxuICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICAvLyBVbmRvLUxpbmsgUmVwb011dGF0aW9uXHJcbiAgICAgICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAgICAgaWYgKG0uYnJhbmNoSWQgIT09IGJyYW5jaElkKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImNvbnRpbnVlXCI7XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlkeCA9IGRlbHRhcy5maW5kSW5kZXgoZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChkLnR5cGUgPT09ICdhZGQnIHx8IGQudHlwZSA9PT0gJ3JlbW92ZScgfHwgZC50eXBlID09PSAndW5kby1saW5rJykgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQuc291cmNlSWQgPT09IG0uaWQgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQudGFyZ2V0SWQgPT09IG0ucmVsYXRlZElkO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpZHggPCAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJjb250aW51ZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGFuIFwiYWRkXCIgb3IgXCJyZW1vdmVcIiBkZWx0YSB0byBjaGFuZ2U6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGltaXN0aWMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlbHRhUmVsYXRpb24gPSBkZWx0YXNbaWR4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFyayB0aGUgZXhpc3RpbmcgYWRkL3JlbW92ZSBkZWx0YSBhcyBjdXJyZW5sdHkgYmVpbmcgZGVsZXRlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWx0YXMgPSBkZWx0YXMuc2xpY2UoMCwgaWR4KS5jb25jYXQoW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHNsaWJfMS5fX2Fzc2lnbih7fSwgZGVsdGFSZWxhdGlvbiwgeyAkbWV0YTogb3B0aW1pc3RpYyA/ICdyZW1vdmluZycgOiAncGVyc2lzdGVkJyB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBdLCBkZWx0YXMuc2xpY2UoaWR4ICsgMSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUGVyc2lzdGVkLiBKdXN0IHJlbW92ZSBpdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsdGFzID0gZGVsdGFzLnNsaWNlKDAsIGlkeCkuY29uY2F0KGRlbHRhcy5zbGljZShpZHggKyAxKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3VwZGF0ZSc6XHJcbiAgICAgICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIFJlcG9NdXRhdGlvblxyXG4gICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgIGlmIChtLmJyYW5jaElkICE9PSBicmFuY2hJZClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJjb250aW51ZVwiO1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpZHggPSBkZWx0YXMuZmluZEluZGV4KGZ1bmN0aW9uIChkZWx0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVsdGEudHlwZSA9PT0gJ21vZGlmeScgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbHRhLnRhcmdldElkID09PSBtLmlkO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpZHggPCAwICYmICFoYXNBZGRpdGlvbmFsRmlsdGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbHRhcyA9IFt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ21vZGlmeScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGU6IG0udGFibGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SWQ6IG0uaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0TmFtZTogbS50YXJnZXROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IG0uZGVsdGFEb2MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZVRpbWU6IERhdGUubm93KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJpYnV0b3JzOiBbdXNlckRpc3BsYXlOYW1lXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbWV0YTogb3B0aW1pc3RpYyA/ICdhZGRpbmcnIDogJ3BlcnNpc3RlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XS5jb25jYXQoZGVsdGFzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleGlzdGluZ0RlbHRhRG9jID0gZGVsdGFzW2lkeF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb250cmlidXRvcnMgPSBleGlzdGluZ0RlbHRhRG9jLmNvbnRyaWJ1dG9ycy5zbGljZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbnRyaWJ1dG9ycy5pbmNsdWRlcyh1c2VyRGlzcGxheU5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250cmlidXRvcnMucHVzaCh1c2VyRGlzcGxheU5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdEYXRhID0gbWVyZ2VEZWx0YXMoZXhpc3RpbmdEZWx0YURvYy5kYXRhLCBtLmRlbHRhRG9jLCB7IHJlbW92ZVVuc2V0UHJvcHM6IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghb3B0aW1pc3RpYyAmJiBPYmplY3Qua2V5cyhuZXdEYXRhKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbW1pdHRlZCBtdXRhdGlvbiB0aGF0IHJlc2V0cyBhIGRlbHRhRG9jLiBSZW1vdmUgdGhlIGRlbHRhRG9jIGVudGlyZWx5OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsdGFzID0gZGVsdGFzLnNsaWNlKDAsIGlkeCkuY29uY2F0KGRlbHRhcy5zbGljZShpZHggKyAxKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbHRhcyA9IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdtb2RpZnknLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZTogbS50YWJsZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SWQ6IG0uaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldE5hbWU6IG0udGFyZ2V0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogbmV3RGF0YSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZVRpbWU6IERhdGUubm93KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyaWJ1dG9yczogY29udHJpYnV0b3JzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbWV0YTogb3B0aW1pc3RpYyA/ICd1cGRhdGluZycgOiAncGVyc2lzdGVkJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLmNvbmNhdChkZWx0YXMuc2xpY2UoMCwgaWR4KSwgZGVsdGFzLnNsaWNlKGlkeCArIDEpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBmb3IgKHZhciBfaSA9IDAsIG11dGF0aW9uc18xID0gbXV0YXRpb25zOyBfaSA8IG11dGF0aW9uc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgIHZhciBtID0gbXV0YXRpb25zXzFbX2ldO1xyXG4gICAgICAgIHZhciBzdGF0ZV8xID0gX2xvb3BfMShtKTtcclxuICAgICAgICBpZiAodHlwZW9mIHN0YXRlXzEgPT09IFwib2JqZWN0XCIpXHJcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZV8xLnZhbHVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRlbHRhcztcclxufVxyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHBseS1tdXRhdGlvbnMtb24tZGVsdGFzLmpzLm1hcCIsImltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XHJcbmltcG9ydCB7IEh0dHBFcnJvciB9IGZyb20gJy4uLy4uL2tlZC1iYWNrZW5kLWNsaWVudCc7XHJcbmltcG9ydCB7IGFwcGx5TXV0YXRpb25zT25EZWx0YXMgfSBmcm9tICcuL2FwcGx5LW11dGF0aW9ucy1vbi1kZWx0YXMnO1xyXG52YXIgRGVsdGFDYWNoZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERlbHRhQ2FjaGUoZ2V0Q2xpZW50LCBnZXRVc2VyLCBnZXRVc2VyRGlzcGxheU5hbWUpIHtcclxuICAgICAgICB0aGlzLmdldENsaWVudCA9IGdldENsaWVudDtcclxuICAgICAgICB0aGlzLmdldFVzZXIgPSBnZXRVc2VyO1xyXG4gICAgICAgIHRoaXMuZ2V0VXNlckRpc3BsYXlOYW1lID0gZ2V0VXNlckRpc3BsYXlOYW1lO1xyXG4gICAgICAgIHRoaXMubG9va3VwID0ge307XHJcbiAgICB9XHJcbiAgICBEZWx0YUNhY2hlLnByb3RvdHlwZS5hcHBseU11dGF0aW9ucyA9IGZ1bmN0aW9uIChtdXRhdGlvbnMsIF9hKSB7XHJcbiAgICAgICAgdmFyIG9wdGltaXN0aWMgPSAoX2EgPT09IHZvaWQgMCA/IHsgb3B0aW1pc3RpYzogZmFsc2UgfSA6IF9hKS5vcHRpbWlzdGljO1xyXG4gICAgICAgIC8vIEFwcGx5IG11dGF0aW9ucyBsb2NhbGx5IG9udG8gdGhlIERlbHRhQ2FjaGUgYW5kIG5vdGlmeSB0aGVpciBzdWJzY3JpYmVyc1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2IgPSBPYmplY3Qua2V5cyh0aGlzLmxvb2t1cCk7IF9pIDwgX2IubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBxdWVyeUtleSA9IF9iW19pXTtcclxuICAgICAgICAgICAgdmFyIGNhY2hlRW50cnkgPSB0aGlzLmxvb2t1cFtxdWVyeUtleV07XHJcbiAgICAgICAgICAgIGlmIChjYWNoZUVudHJ5LnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJbnN0ZWFkIGhlcmU6IFN0b3JlIHRoZSBtdXRhdGlvbnMgb24gY2FjaGVFbnRyeS4gTm8gbWF0dGVyIGlmIGl0IHlldCBoYXMgdmFsdWUgb3Igbm90LlxyXG4gICAgICAgICAgICAgICAgLy8gVGhlbiBhcHBseSBtdXRhdGlvbiB3aGVuZXZlciBzdWJzY3JpYmluZyEgKEJldHRlciBoYW5kbGluZyBvZiBtdXRhdGlvbnMgdGhhdCBhcnJpdmVzIGJlZm9yZSBmZXRjaCgpIGlzIGRvbmUpXHJcbiAgICAgICAgICAgICAgICAvLyAoU2VlIGhvdyBJIGhhbmRsZSB0aGlzIGluIHF1ZXJ5LXNldC50cylcclxuICAgICAgICAgICAgICAgIHZhciBuZXdWYWx1ZSA9IGFwcGx5TXV0YXRpb25zT25EZWx0YXMoY2FjaGVFbnRyeS5xdWVyeS5icmFuY2hJZCwgY2FjaGVFbnRyeS52YWx1ZSwgbXV0YXRpb25zLCBvcHRpbWlzdGljLCB0aGlzLmdldFVzZXJEaXNwbGF5TmFtZSgpLCAhIWNhY2hlRW50cnkucXVlcnkudGFncyk7XHJcbiAgICAgICAgICAgICAgICBpZiAobmV3VmFsdWUgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgbXV0YXRpb24gcmVxdWlyZXMgY2FjaGVFbnRyeSB0byBiZSByZWZldGNoZWQgZnJvbSBzZXJ2ZXJcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW9wdGltaXN0aWMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2FsbGVyIGhhcyBzdWNjZXNzZnVsbHkgcGVyZm9ybWVkIHRoZSBtdXRhdGlvbnMgYW5kIGdvdCBzdWNjZXNzIGJhY2sgZnJvbSBzZXJ2ZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEl0J3Mgb2sgdG8gcmVmZXRjaCB0aGUgZGVsdGFzIGZyb20gc2VydmVyIG5vdzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVFbnRyeS5mZXRjaCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBZnRlciBmZXRjaCBjb21wbGV0ZXMsIGl0IHdpbGwgbm90aWZ5IHRoZSBzdWJzY3JpYmVycy5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobmV3VmFsdWUgIT09IGNhY2hlRW50cnkudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWNoZUVudHJ5Lm9wdGltaXN0aWNWYWx1ZSA9IG5ld1ZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghb3B0aW1pc3RpYylcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVFbnRyeS52YWx1ZSA9IG5ld1ZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlRW50cnkubm90aWZ5KG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBEZWx0YUNhY2hlLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbiAocXVlcnksIG9ic2VydmVyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgY2FjaGVFbnRyeSA9IHRoaXMubG9va3VwW3F1ZXJ5LmJyYW5jaElkICsgcXVlcnkudGFnc107XHJcbiAgICAgICAgaWYgKCFjYWNoZUVudHJ5KSB7XHJcbiAgICAgICAgICAgIGNhY2hlRW50cnkgPSBuZXcgRGVsdGFDYWNoZUVudHJ5KHRoaXMuZ2V0Q2xpZW50KCksIHF1ZXJ5KTtcclxuICAgICAgICAgICAgdGhpcy5sb29rdXBbcXVlcnkuYnJhbmNoSWQgKyBxdWVyeS50YWdzXSA9IGNhY2hlRW50cnk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjYWNoZUVudHJ5LmNsZWFudXBUaW1lcikge1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoY2FjaGVFbnRyeS5jbGVhbnVwVGltZXIpO1xyXG4gICAgICAgICAgICBjYWNoZUVudHJ5LmNsZWFudXBUaW1lciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSB7XHJcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjYWNoZUVudHJ5LnN1YnNjcmliZXJzID0gY2FjaGVFbnRyeS5zdWJzY3JpYmVycy5maWx0ZXIoZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBfYS5vYnNlcnZlcjtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbyAhPT0gb2JzZXJ2ZXI7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGlmIChjYWNoZUVudHJ5LnN1YnNjcmliZXJzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlRW50cnkuY2xlYW51cFRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWNoZUVudHJ5LnN1YnNjcmliZXJzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIF90aGlzLmxvb2t1cFtxdWVyeS5icmFuY2hJZCArIHF1ZXJ5LnRhZ3NdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMTAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgY2FjaGVFbnRyeS5zdWJzY3JpYmVycy5wdXNoKHsgb2JzZXJ2ZXI6IG9ic2VydmVyLCBzdWJzY3JpcHRpb246IHN1YnNjcmlwdGlvbiB9KTtcclxuICAgICAgICBpZiAoY2FjaGVFbnRyeS52YWx1ZSkge1xyXG4gICAgICAgICAgICAvLyBWYWx1ZSBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgcmV0cmlldmVkIGFscmVhZHkuIFBpY2sgZnJvbSBjYWNoZS5cclxuICAgICAgICAgICAgb2JzZXJ2ZXIoY2FjaGVFbnRyeS5vcHRpbWlzdGljVmFsdWUgfHwgY2FjaGVFbnRyeS52YWx1ZSwgbnVsbCwgc3Vic2NyaXB0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoY2FjaGVFbnRyeS5pc0ZldGNoaW5nKSB7XHJcbiAgICAgICAgICAgIC8vIEEgdmFsdWUgaXMgb24gaXRzIHdheS4gU2l0IGJhY2sgYW5kIHJlbGF4LiBBbGwgcmVnaXN0ZXJlZFxyXG4gICAgICAgICAgICAvLyBvYnNlcnZlcnMgKGluY2x1ZGluZyB0aGlzIG9uZSkgd2lsbCBiZSBub3RpZmllZCB3aGVuIGRhdGEgYXJyaXZlc1xyXG4gICAgICAgICAgICAvLyBvciBmYWlscy5cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoY2FjaGVFbnRyeS5lcnJvcikge1xyXG4gICAgICAgICAgICBvYnNlcnZlcihudWxsLCBjYWNoZUVudHJ5LmVycm9yLCBzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY2FjaGVFbnRyeS5mZXRjaCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBEZWx0YUNhY2hlO1xyXG59KCkpO1xyXG5leHBvcnQgeyBEZWx0YUNhY2hlIH07XHJcbnZhciBEZWx0YUNhY2hlRW50cnkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEZWx0YUNhY2hlRW50cnkoY2xpZW50LCBxdWVyeSkge1xyXG4gICAgICAgIHRoaXMuZmV0Y2hPcGVyYXRpb25JZCA9IDA7IC8vIE1ha2VzIHN1cmUgYSByZS1mZXRjaCB3aWxsIGRpc2NhcmQgdGhlIHJlc3VsdCBmcm9tIGFueSBvbmdvaW5nIGZldGNoLlxyXG4gICAgICAgIHRoaXMuY2xpZW50ID0gY2xpZW50O1xyXG4gICAgICAgIHRoaXMucXVlcnkgPSBxdWVyeTtcclxuICAgICAgICB0aGlzLnZhbHVlID0gbnVsbDtcclxuICAgICAgICB0aGlzLmVycm9yID0gbnVsbDtcclxuICAgICAgICB0aGlzLm9wdGltaXN0aWNWYWx1ZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVycyA9IFtdO1xyXG4gICAgICAgIHRoaXMuaXNGZXRjaGluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuY2xlYW51cFRpbWVyID0gbnVsbDtcclxuICAgIH1cclxuICAgIERlbHRhQ2FjaGVFbnRyeS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgZmV0Y2hPcGVyYXRpb25JZCA9ICsrdGhpcy5mZXRjaE9wZXJhdGlvbklkO1xyXG4gICAgICAgIHRoaXMuaXNGZXRjaGluZyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5mZXRjaEZyb21TZXJ2ZXIoKS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAvLyBTdWNjZXNzXHJcbiAgICAgICAgICAgIGlmIChmZXRjaE9wZXJhdGlvbklkID09PSBfdGhpcy5mZXRjaE9wZXJhdGlvbklkKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5pc0ZldGNoaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBiLmRhdGVUaW1lIC0gYS5kYXRlVGltZTsgfSk7IC8vIExhdGVzdCBmaXJzdFxyXG4gICAgICAgICAgICAgICAgX3RoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIF90aGlzLm9wdGltaXN0aWNWYWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMubm90aWZ5KHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAvLyBGYWlsXHJcbiAgICAgICAgICAgIGlmIChmZXRjaE9wZXJhdGlvbklkID09PSBfdGhpcy5mZXRjaE9wZXJhdGlvbklkKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5pc0ZldGNoaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5lcnJvciA9IGVycm9yO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuZmFpbChlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBEZWx0YUNhY2hlRW50cnkucHJvdG90eXBlLmZldGNoRnJvbVNlcnZlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHJlcywgX2EsIF9iO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2MpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2MubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5xdWVyeS5icmFuY2hJZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRGVsdGFzIG9ubHkgYXZhaWxhYmxlIG9uIGJyYW5jaGVzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuY2xpZW50Lmh0dHAuZ2V0KCdkZWx0YXMnLCB0aGlzLnF1ZXJ5KV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMgPSBfYy5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHJlcy5zdGF0dXMgPj0gMzAwIHx8IHJlcy5zdGF0dXMgPCAyMDApKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSBIdHRwRXJyb3IuYmluZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2IgPSBbdm9pZCAwLCByZXMuc3RhdHVzXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzLnRleHQoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiB0aHJvdyBuZXcgKF9hLmFwcGx5KEh0dHBFcnJvciwgX2IuY29uY2F0KFtfYy5zZW50KCldKSkpKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzQgLyp5aWVsZCovLCByZXMuanNvbigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMiAvKnJldHVybiovLCBfYy5zZW50KCldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBEZWx0YUNhY2hlRW50cnkucHJvdG90eXBlLm5vdGlmeSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLnN1YnNjcmliZXJzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgX2IgPSBfYVtfaV0sIG9ic2VydmVyID0gX2Iub2JzZXJ2ZXIsIHN1YnNjcmlwdGlvbiA9IF9iLnN1YnNjcmlwdGlvbjtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIodmFsdWUsIG51bGwsIHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIERlbHRhQ2FjaGVFbnRyeS5wcm90b3R5cGUuZmFpbCA9IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgIHZhciBjb3B5ID0gdGhpcy5zdWJzY3JpYmVycy5zbGljZSgpO1xyXG4gICAgICAgIHRoaXMuc3Vic2NyaWJlcnMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGNvcHlfMSA9IGNvcHk7IF9pIDwgY29weV8xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgX2EgPSBjb3B5XzFbX2ldLCBvYnNlcnZlciA9IF9hLm9ic2VydmVyLCBzdWJzY3JpcHRpb24gPSBfYS5zdWJzY3JpcHRpb247XHJcbiAgICAgICAgICAgIG9ic2VydmVyKG51bGwsIGVycm9yLCBzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gRGVsdGFDYWNoZUVudHJ5O1xyXG59KCkpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWx0YS1jYWNoZS5qcy5tYXAiLCJpbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xyXG5pbXBvcnQgeyBDb2xsZWN0aW9uIH0gZnJvbSAnLi4vLi4vb2JzZXJ2YWJsZSc7XHJcbnZhciBEZWx0YUNvbGxlY3Rpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhEZWx0YUNvbGxlY3Rpb24sIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBEZWx0YUNvbGxlY3Rpb24oZGVsdGFDYWNoZSwgcXVlcnkpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBmdW5jdGlvbiAob2JzZXJ2ZXIpIHsgcmV0dXJuIF90aGlzLmRlbHRhQ2FjaGUuc3Vic2NyaWJlKHF1ZXJ5LCBvYnNlcnZlcik7IH0pIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuZGVsdGFDYWNoZSA9IGRlbHRhQ2FjaGU7XHJcbiAgICAgICAgX3RoaXMucXVlcnkgPSBxdWVyeTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBEZWx0YUNvbGxlY3Rpb24ucHJvdG90eXBlLnRhZ3MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHRhZ3MgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB0YWdzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgRGVsdGFDb2xsZWN0aW9uKHRoaXMuZGVsdGFDYWNoZSwgdHNsaWJfMS5fX2Fzc2lnbih7fSwgdGhpcy5xdWVyeSwgeyB0YWdzOiB0YWdzIH0pKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRGVsdGFDb2xsZWN0aW9uO1xyXG59KENvbGxlY3Rpb24pKTtcclxuZXhwb3J0IHsgRGVsdGFDb2xsZWN0aW9uIH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlbHRhLWNvbGxlY3Rpb24uanMubWFwIiwiaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcclxuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5RGVsdGEoZG9jLCBkZWx0YSkge1xyXG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhkZWx0YSk7XHJcbiAgICB2YXIgdGFyZ2V0RG9jID0gZG9jO1xyXG4gICAgZm9yICh2YXIgX2kgPSAwLCBrZXlzXzEgPSBrZXlzOyBfaSA8IGtleXNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICB2YXIga2V5ID0ga2V5c18xW19pXTtcclxuICAgICAgICBpZiAodGFyZ2V0RG9jID09PSBkb2MpXHJcbiAgICAgICAgICAgIHRhcmdldERvYyA9IHRzbGliXzEuX19hc3NpZ24oe30sIGRvYyk7XHJcbiAgICAgICAgdmFyIHZhbCA9IGRlbHRhW2tleV07XHJcbiAgICAgICAgaWYgKHZhbCAmJiB0eXBlb2YgdmFsID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICB2YXIgbWV0YUluc3RydWN0aW9ucyA9IE9iamVjdC5rZXlzKHZhbClcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4ga2V5LnN0YXJ0c1dpdGgoJyQnKTsgfSk7XHJcbiAgICAgICAgICAgIGlmIChtZXRhSW5zdHJ1Y3Rpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gKG1pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1pVmFsdWUgPSB2YWxbbWldO1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobWkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIiR1bnNldFwiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEbyBub3RoaW5nIG9uIHRhcmdldCBkb2MhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXREb2MuJHdhc1Vuc2V0ID0gdHJ1ZTsgLy8gSnVzdCBtYXJrIGl0IGZvciByZS1yZXRyaWV2YWwgYWZ0ZXIgc3VjY2Vzc2Z1bCBwb3N0aW5nIGNoYW5nZXMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiJGFkZFwiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWVzVG9BZGQgPSBtaVZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlc1RvQWRkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIiRhZGQgaW5zdHJ1Y3Rpb24gbXVzdCBjb250YWluIGFycmF5XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldEFycmF5ID0gdGFyZ2V0RG9jW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodGFyZ2V0QXJyYXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0QXJyYXkgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldEFycmF5ID0gdGFyZ2V0QXJyYXkuc2xpY2UoKTsgLy8gT24gSlMgc2lkZSwgd2UgbXVzdCBiZSBpbW11dGFibGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldERvY1trZXldID0gdGFyZ2V0QXJyYXk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHZhbHVlc1RvQWRkXzEgPSB2YWx1ZXNUb0FkZDsgX2kgPCB2YWx1ZXNUb0FkZF8xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2ID0gdmFsdWVzVG9BZGRfMVtfaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0YXJnZXRBcnJheS5pbmNsdWRlcyh2KSkgeyAvLyBhdm9pZCBkdXBzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldEFycmF5LnB1c2godik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIiRyZW1vdmVcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlc1RvUmVtb3ZlXzEgPSBtaVZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlc1RvUmVtb3ZlXzEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiJHJlbW92ZSBpbnN0cnVjdGlvbiBtdXN0IGNvbnRhaW4gYXJyYXlcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0QXJyYXkgPSB0YXJnZXREb2Nba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh0YXJnZXRBcnJheSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRBcnJheSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RG9jW2tleV0gPSB0YXJnZXRBcnJheS5maWx0ZXIoZnVuY3Rpb24gKHQpIHsgcmV0dXJuICF2YWx1ZXNUb1JlbW92ZV8xLmluY2x1ZGVzKHQpOyB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIF9hID0gMCwgbWV0YUluc3RydWN0aW9uc18xID0gbWV0YUluc3RydWN0aW9uczsgX2EgPCBtZXRhSW5zdHJ1Y3Rpb25zXzEubGVuZ3RoOyBfYSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1pID0gbWV0YUluc3RydWN0aW9uc18xW19hXTtcclxuICAgICAgICAgICAgICAgICAgICBfbG9vcF8xKG1pKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRhcmdldERvY1trZXldID0gdmFsO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRhcmdldERvYztcclxufVxyXG4vLyB7bmFtZTogXCJVbGxhXCJ9LCB7bmFtZTogeyR1bnNldDowfVxyXG4vLyB7dGFnczogeyRhZGQ6IFwiaGVqXCJ9fSwge3RhZ3M6IHskdW5zZXQ6MH1cIn1cclxuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlRGVsdGFzKGRlbHRhMSwgZGVsdGEyLCBfYSkge1xyXG4gICAgdmFyIHJlbW92ZVVuc2V0UHJvcHMgPSAoX2EgPT09IHZvaWQgMCA/IHsgcmVtb3ZlVW5zZXRQcm9wczogZmFsc2UgfSA6IF9hKS5yZW1vdmVVbnNldFByb3BzO1xyXG4gICAgLy9yZXR1cm4gey4uLmRlbHRhMSwgLi4uZGVsdGEyfTtcclxuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZGVsdGEyKTtcclxuICAgIHZhciB0YXJnZXREZWx0YSA9IHRzbGliXzEuX19hc3NpZ24oe30sIGRlbHRhMSk7XHJcbiAgICBmb3IgKHZhciBfaSA9IDAsIGtleXNfMiA9IGtleXM7IF9pIDwga2V5c18yLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgIHZhciBrZXkgPSBrZXlzXzJbX2ldO1xyXG4gICAgICAgIHZhciB2YWwgPSBkZWx0YTJba2V5XTtcclxuICAgICAgICBpZiAodmFsICYmIHR5cGVvZiB2YWwgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgIHZhciBtZXRhSW5zdHJ1Y3Rpb25zID0gT2JqZWN0LmtleXModmFsKVxyXG4gICAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBrZXkuc3RhcnRzV2l0aCgnJCcpOyB9KTtcclxuICAgICAgICAgICAgaWYgKG1ldGFJbnN0cnVjdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIF9sb29wXzIgPSBmdW5jdGlvbiAobWkpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbWlWYWx1ZSA9IHZhbFttaV07XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChtaSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiJHVuc2V0XCI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZW1vdmVVbnNldFByb3BzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRhcmdldERlbHRhW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBObyBtYXR0ZXIgaWYgdGFyZ2V0RGVsdGEgaXMgZW1wdHkgb3IgaGFzIHZhbHVlLiBTZXQgaXQgdG8geyR1bnNldDowfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRvIG1ha2Ugc3VyZSB0aGUgdmVyeSBlbmQgcmVzdWx0IHdpbGwgaGF2ZSB7JHVuc2V0OjB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RGVsdGFba2V5XSA9IHsgJHVuc2V0OiAwIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiJGFkZFwiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWVzVG9BZGRfMiA9IG1pVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWVzVG9BZGRfMikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCIkYWRkIGluc3RydWN0aW9uIG11c3QgY29udGFpbiBhcnJheVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXRNZXRhUHJvcCA9IHRhcmdldERlbHRhW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRNZXRhUHJvcCA9IHRhcmdldE1ldGFQcm9wID8gdHNsaWJfMS5fX2Fzc2lnbih7fSwgdGFyZ2V0TWV0YVByb3ApIDoge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXREZWx0YVtrZXldID0gdGFyZ2V0TWV0YVByb3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGaXJzdCwganVzdCBjaGVjayBpZiB0YXJnZXQgbWV0YVByb3AgaGFzIHskcmVtb3ZlOiBbLi4uaXRlbXNdfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgc28sIHJlbW92ZSBhbnkgZXF1YWwgaXRlbXMgZnJvbSB0aGVyZSBiZWZvcmUgbWVyZ2luZyB0aGUgeyRhZGQ6IFsuLi5dfSBhcnJheXMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0UmVtb3ZlQXJyYXkgPSB0YXJnZXRNZXRhUHJvcC4kcmVtb3ZlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGFyZ2V0UmVtb3ZlQXJyYXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0TWV0YVByb3AuJHJlbW92ZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFJlbW92ZUFycmF5LmZpbHRlcihmdW5jdGlvbiAodCkgeyByZXR1cm4gIXZhbHVlc1RvQWRkXzIuaW5jbHVkZXModCk7IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRNZXRhUHJvcC4kcmVtb3ZlLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiAkcmVtb3ZlIGFycmF5IGJlY2FtZSBlbXRweS4gUmVtb3ZlIHRoZSAkcmVtb3ZlIHByb3AuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0YXJnZXRNZXRhUHJvcC4kcmVtb3ZlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdyBpdCdzIHRpbWUgdG8gbWVyZ2Ugb3IgY3JlYXRlIHRhcmdldCAkYWRkIGFycmF5LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldEFkZEFycmF5ID0gdGFyZ2V0TWV0YVByb3AuJGFkZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldEFkZEFycmF5ID0gdGFyZ2V0QWRkQXJyYXkgPyB0YXJnZXRBZGRBcnJheS5jb25jYXQodmFsdWVzVG9BZGRfMikgOiB2YWx1ZXNUb0FkZF8yLnNsaWNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRNZXRhUHJvcC4kYWRkID0gdGFyZ2V0QWRkQXJyYXk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiJHJlbW92ZVwiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWVzVG9SZW1vdmVfMiA9IG1pVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWVzVG9SZW1vdmVfMikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCIkcmVtb3ZlIGluc3RydWN0aW9uIG11c3QgY29udGFpbiBhcnJheVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXRNZXRhUHJvcCA9IHRhcmdldERlbHRhW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRNZXRhUHJvcCA9IHRhcmdldE1ldGFQcm9wID8gdHNsaWJfMS5fX2Fzc2lnbih7fSwgdGFyZ2V0TWV0YVByb3ApIDoge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXREZWx0YVtrZXldID0gdGFyZ2V0TWV0YVByb3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGaXJzdCwganVzdCBjaGVjayBpZiB0YXJnZXQgbWV0YVByb3AgaGFzIHskYWRkOiBbLi4uaXRlbXNdfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgc28sIHJlbW92ZSBhbnkgZXF1YWwgaXRlbXMgZnJvbSB0aGVyZSBiZWZvcmUgbWVyZ2luZyB0aGUgeyRyZW1vdmU6IFsuLi5dfSBhcnJheXMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0QWRkQXJyYXkgPSB0YXJnZXRNZXRhUHJvcC4kcmVtb3ZlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGFyZ2V0QWRkQXJyYXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0TWV0YVByb3AuJGFkZCA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldEFkZEFycmF5LmZpbHRlcihmdW5jdGlvbiAodCkgeyByZXR1cm4gIXZhbHVlc1RvUmVtb3ZlXzIuaW5jbHVkZXModCk7IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRNZXRhUHJvcC4kYWRkLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiAkYWRkIGFycmF5IGJlY2FtZSBlbXRweS4gUmVtb3ZlIHRoZSAkYWRkIHByb3AuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0YXJnZXRNZXRhUHJvcC4kYWRkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdyBpdCdzIHRpbWUgdG8gbWVyZ2Ugb3IgY3JlYXRlIHRhcmdldCAkcmVtb3ZlIGFycmF5LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldFJlbW92ZUFycmF5ID0gdGFyZ2V0TWV0YVByb3AuJHJlbW92ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFJlbW92ZUFycmF5ID0gdGFyZ2V0UmVtb3ZlQXJyYXkgPyB0YXJnZXRSZW1vdmVBcnJheS5jb25jYXQodmFsdWVzVG9SZW1vdmVfMikgOiB2YWx1ZXNUb1JlbW92ZV8yLnNsaWNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRNZXRhUHJvcC4kcmVtb3ZlID0gdGFyZ2V0UmVtb3ZlQXJyYXk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IDAsIG1ldGFJbnN0cnVjdGlvbnNfMiA9IG1ldGFJbnN0cnVjdGlvbnM7IF9iIDwgbWV0YUluc3RydWN0aW9uc18yLmxlbmd0aDsgX2IrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBtaSA9IG1ldGFJbnN0cnVjdGlvbnNfMltfYl07XHJcbiAgICAgICAgICAgICAgICAgICAgX2xvb3BfMihtaSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0YXJnZXREZWx0YVtrZXldID0gdmFsO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRhcmdldERlbHRhO1xyXG59XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlbHRhLW1lcmdlLmpzLm1hcCIsImV4cG9ydCAqIGZyb20gJy4va2VkYmFja2VuZC1jb2xsZWN0aW9uJztcclxuZXhwb3J0ICogZnJvbSAnLi9rZWRiYWNrZW5kLXF1ZXJ5JztcclxuZXhwb3J0ICogZnJvbSAnLi9rZWRiYWNrZW5kLXJlcG8nO1xyXG5leHBvcnQgKiBmcm9tICcuL2tlZGJhY2tlbmQtc3Vic2NyaXB0aW9uJztcclxuZXhwb3J0ICogZnJvbSAnLi9rZWRiYWNrZW5kLXdyaXRlcic7XHJcbmV4cG9ydCAqIGZyb20gJy4vbXV0YXRpb24tcXVldWUnO1xyXG5leHBvcnQgKiBmcm9tICcuL3F1ZXJ5LXNldCc7XHJcbmV4cG9ydCAqIGZyb20gJy4uL29ic2VydmFibGUvbWl4aW4nO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJpbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xyXG5pbXBvcnQgeyBCYXRjaFJ1bm5lciB9IGZyb20gJy4uL2tlZC1iYWNrZW5kLWNsaWVudCc7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRTdWJzY3JpcHRpb24gfSBmcm9tIFwiLi9rZWRiYWNrZW5kLXN1YnNjcmlwdGlvblwiO1xyXG5pbXBvcnQgeyBDYWNoZUJ1c3QgfSBmcm9tICcuL2NhY2hlLWJ1c3QnO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kUXVlcnkgfSBmcm9tICcuL2tlZGJhY2tlbmQtcXVlcnknO1xyXG5pbXBvcnQgeyBDb2xsZWN0aW9uIH0gZnJvbSAnLi4vb2JzZXJ2YWJsZS9jb2xsZWN0aW9uJztcclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgYSBcImxpdmVcIiBxdWVyeSBhZ2FpbnN0IGEgdGFibGUgb3IgZmlsdGVyZWQgdGFibGUuXHJcbiAqL1xyXG52YXIgS2VkQmFja2VuZENvbGxlY3Rpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhLZWRCYWNrZW5kQ29sbGVjdGlvbiwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEtlZEJhY2tlbmRDb2xsZWN0aW9uKHJlcG8sIHRhYmxlLCBxdWVyeSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGZ1bmN0aW9uIChvYnNlcnZlcikge1xyXG4gICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gbmV3IEtlZEJhY2tlbmRTdWJzY3JpcHRpb24ob2JzZXJ2ZXIsIF90aGlzKTtcclxuICAgICAgICAgICAgX3RoaXMucmVwby5xdWVyeVNldC5zdWJzY3JpYmUoc3Vic2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcclxuICAgICAgICB9KSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLnJlcG8gPSByZXBvO1xyXG4gICAgICAgIF90aGlzLnRhYmxlID0gdGFibGU7XHJcbiAgICAgICAgX3RoaXMucXVlcnkgPSBxdWVyeTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLCBcInF1ZXJ5S2V5XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEtlZEJhY2tlbmRRdWVyeS5xdWVyeUtleSh0aGlzLnRhYmxlLCB0aGlzLnF1ZXJ5KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUsIFwiaW5jbHVkZXNcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faW5jbHVkZXMgfHwgKHRoaXMuX2luY2x1ZGVzID0gW10uY29uY2F0KHRoaXMucXVlcnkuaW5jbHVkZSB8fCBbXSkpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLmFwcGx5UXVlcnkgPSBmdW5jdGlvbiAocXVlcnkpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEtlZEJhY2tlbmRDb2xsZWN0aW9uKHRoaXMucmVwbywgdGhpcy50YWJsZSwgdHNsaWJfMS5fX2Fzc2lnbih7fSwgdGhpcy5xdWVyeSwgcXVlcnkpKTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUuYWRkVG9RdWVyeUFycmF5UHJvcCA9IGZ1bmN0aW9uIChhcnJheVByb3AsIGVudHJpZXMpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlRdWVyeSgoX2EgPSB7fSwgX2FbYXJyYXlQcm9wXSA9ICh0aGlzLnF1ZXJ5W2FycmF5UHJvcF0gfHwgW10pLmNvbmNhdChlbnRyaWVzKSwgX2EpKTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUuYWRkRmxhZ3MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGZsYWdzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgZmxhZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkVG9RdWVyeUFycmF5UHJvcChcImZsYWdzXCIsIGZsYWdzKTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUuZGVidWcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlRdWVyeSh7IGRlYnVnOiB0cnVlIH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDb2xsZWN0aW9uLnByb3RvdHlwZS5pZHNPbmx5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFkZEZsYWdzKFwiaWRzT25seVwiKTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUuaWRzQW5kTmFtZXNPbmx5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFkZEZsYWdzKFwiaWRzQW5kTmFtZXNPbmx5XCIpO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDb2xsZWN0aW9uLnByb3RvdHlwZS5pbmNsdWRlSWRzT25seSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hZGRGbGFncyhcImluY2x1ZGVJZHNPbmx5XCIpO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDb2xsZWN0aW9uLnByb3RvdHlwZS5pbmNsdWRlSWRzQW5kTmFtZXNPbmx5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFkZEZsYWdzKFwiaW5jbHVkZUlkc0FuZE5hbWVzT25seVwiKTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUuYmV0d2VlbiA9IGZ1bmN0aW9uIChmcm9tLCB0bykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFwcGx5UXVlcnkoeyBmcm9tOiBmcm9tLCB0bzogdG8gfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLnJvbGUgPSBmdW5jdGlvbiAocm9sZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFwcGx5UXVlcnkoeyByb2xlOiByb2xlIH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDb2xsZWN0aW9uLnByb3RvdHlwZS5oYXNFZGdlc0Zyb20gPSBmdW5jdGlvbiAoaWRzKSB7XHJcbiAgICAgICAgaWYgKGlkcy5sZW5ndGggPT09IDAgfHwgaWRzLnNvbWUoZnVuY3Rpb24gKGlkKSB7IHJldHVybiAhaWQ7IH0pKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGlkIGxpc3QgZ2l2ZW4gdG8gQ29sbGVjdGlvbi5oYXNFZGdlc0Zyb20oXCIgKyBKU09OLnN0cmluZ2lmeShpZHMpICsgXCIpXCIpO1xyXG4gICAgICAgIHZhciBoZWYgPSB0aGlzLmFkZFRvUXVlcnlBcnJheVByb3AoXCJoYXNFZGdlc0Zyb21cIiwgaWRzKTtcclxuICAgICAgICByZXR1cm4gaGVmO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDb2xsZWN0aW9uLnByb3RvdHlwZS5oYXNFZGdlc1RvID0gZnVuY3Rpb24gKGlkcykge1xyXG4gICAgICAgIGlmIChpZHMubGVuZ3RoID09PSAwIHx8IGlkcy5zb21lKGZ1bmN0aW9uIChpZCkgeyByZXR1cm4gIWlkOyB9KSlcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBpZCBsaXN0IGdpdmVuIHRvIENvbGxlY3Rpb24uaGFzRWRnZXNUbyhcIiArIEpTT04uc3RyaW5naWZ5KGlkcykgKyBcIilcIik7XHJcbiAgICAgICAgdmFyIGhldCA9IHRoaXMuYWRkVG9RdWVyeUFycmF5UHJvcChcImhhc0VkZ2VzVG9cIiwgaWRzKTtcclxuICAgICAgICByZXR1cm4gaGV0O1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDb2xsZWN0aW9uLnByb3RvdHlwZS5pZCA9IGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlRdWVyeSh7IGlkczogW2lkXSB9KS5zaW5nbGUoe1xyXG4gICAgICAgICAgICBvblplcm86IGZ1bmN0aW9uICgpIHsgdGhyb3cgbmV3IEVycm9yKFwiQ291bGQgbm90IGZpbmQgZW50aXR5IGluIFwiICsgX3RoaXMudGFibGUgKyBcIiB3aXRoIGlkIFwiICsgaWQpOyB9LFxyXG4gICAgICAgICAgICBvbk1hbnk6IGZ1bmN0aW9uICgpIHsgdGhyb3cgbmV3IEVycm9yKFwiTXVsdGlwbGUgZW50cmllcyBpbiBcIiArIF90aGlzLnRhYmxlICsgXCIgd2l0aCBpZCBcIiArIGlkKTsgfSxcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUuaWRzID0gZnVuY3Rpb24gKGlkcykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFwcGx5UXVlcnkoeyBpZHM6IGlkcyB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUubmFtZSA9IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlRdWVyeSh7IG5hbWU6IG5hbWUgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLnRhZ3MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHRhZ3MgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB0YWdzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmFwcGx5UXVlcnkoeyB0YWdzOiB0YWdzIH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDb2xsZWN0aW9uLnByb3RvdHlwZS5icmFuY2hJZCA9IGZ1bmN0aW9uIChicmFuY2hJZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFwcGx5UXVlcnkoeyBicmFuY2hJZDogYnJhbmNoSWQgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLmluY2x1ZGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGdyYXBocyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGdyYXBoc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5hZGRUb1F1ZXJ5QXJyYXlQcm9wKFwiaW5jbHVkZVwiLCBncmFwaHMpO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDb2xsZWN0aW9uLnByb3RvdHlwZS5jYWNoZU9wdGltaXplZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hcHBseVF1ZXJ5KHsgY2FjaGVCdXN0OiBDYWNoZUJ1c3QuZ2V0Q2FjaGVCdXN0KHRoaXMudGFibGUsIHRoaXMucXVlcnksIHRoaXMucmVwby5nZXRVc2VyKCksIHRoaXMuaW5jbHVkZXMpIH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDb2xsZWN0aW9uLnByb3RvdHlwZS5tdXRhdGlvbnNPbkVtcHR5ID0gZnVuY3Rpb24gKG11dGF0aW9uRmFjdG9yeSkge1xyXG4gICAgICAgIHZhciB0eCA9IG5ldyBCYXRjaFJ1bm5lcigpO1xyXG4gICAgICAgIG11dGF0aW9uRmFjdG9yeSh0eCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlRdWVyeSh7IG11dGF0aW9uc09uRW1wdHk6IHR4Lm11dGF0aW9uUmVxdWVzdHMgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLnNpbmdsZSA9IGZ1bmN0aW9uICh0aHJvd2Vycykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIF9hID0gdGhyb3dlcnMgfHwge30sIG9uWmVybyA9IF9hLm9uWmVybywgb25NYW55ID0gX2Eub25NYW55O1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRvVmFsdWUoKS5tYXAoZnVuY3Rpb24gKGl0ZW1zKSB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGlmIChvblplcm8pXHJcbiAgICAgICAgICAgICAgICAgICAgb25aZXJvKCk7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2luZ2xlIGl0ZW0gb2YgXCIgKyBfdGhpcy50YWJsZSArIFwiIGV4cGVjdGVkIHRvIGJlIHJldHVybmVkIGJ5IHF1ZXJ5IFwiICsgSlNPTi5zdHJpbmdpZnkoX3RoaXMucXVlcnkpICsgXCIgYnV0IG5vbmUgd2FzIGZvdW5kLlwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaXRlbXMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgICAgZGVidWdnZXI7XHJcbiAgICAgICAgICAgICAgICBpZiAob25NYW55KVxyXG4gICAgICAgICAgICAgICAgICAgIG9uTWFueSgpO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU2luZ2xlIGl0ZW0gb2YgXCIgKyBfdGhpcy50YWJsZSArIFwiIGV4cGVjdGVkIHRvIGJlIHJldHVybmVkIGJ5IHF1ZXJ5IFwiICsgSlNPTi5zdHJpbmdpZnkoX3RoaXMucXVlcnkpICsgXCIgYnV0IFwiICsgaXRlbXMubGVuZ3RoICsgXCIgd2FzIGZvdW5kLlwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gaXRlbXNbMF07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLypjb21iaW5lTGF0ZXN0PFRPdGhlcj4ob3RoZXI6IFF1ZXJ5T2JzZXJ2YWJsZTxUT3RoZXI+KSB7XHJcbiAgICAgIHJldHVybiB0aGlzLnJlbmRlcih4ID0+IHgpLmNvbWJpbmVMYXRlc3Qob3RoZXIpO1xyXG4gICAgfSovXHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGRvYywgY2hhbmdlcywgZGVib3VuY2UpIHtcclxuICAgICAgICBpZiAoZGVib3VuY2UgPT09IHZvaWQgMCkgeyBkZWJvdW5jZSA9IDEwMDA7IH1cclxuICAgICAgICB0aGlzLnJlcG8ud3JpdGVyLm11dGF0ZShbe1xyXG4gICAgICAgICAgICAgICAgb3A6ICd1cGRhdGUnLFxyXG4gICAgICAgICAgICAgICAgdGFibGU6IHRoaXMudGFibGUsXHJcbiAgICAgICAgICAgICAgICBicmFuY2hJZDogdGhpcy5xdWVyeS5icmFuY2hJZCxcclxuICAgICAgICAgICAgICAgIGlkOiBkb2MuaWQsXHJcbiAgICAgICAgICAgICAgICBkZWx0YURvYzogY2hhbmdlcyxcclxuICAgICAgICAgICAgICAgIHRhcmdldE5hbWU6IGRvYy5uYW1lXHJcbiAgICAgICAgICAgIH1dLCBkZWJvdW5jZSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLmFkZFJlbGF0ZWQgPSBmdW5jdGlvbiAoaWQsIGxhYmVsLCByZWxhdGVkRG9jKSB7XHJcbiAgICAgICAgdGhpcy5yZXBvLndyaXRlci5tdXRhdGUoW3tcclxuICAgICAgICAgICAgICAgIG9wOiAnYWRkLXJlbGF0ZWQnLFxyXG4gICAgICAgICAgICAgICAgdGFibGU6IHRoaXMudGFibGUsXHJcbiAgICAgICAgICAgICAgICBicmFuY2hJZDogdGhpcy5xdWVyeS5icmFuY2hJZCxcclxuICAgICAgICAgICAgICAgIGlkOiBpZCxcclxuICAgICAgICAgICAgICAgIGdyYXBoUHJvcDogbGFiZWwsXHJcbiAgICAgICAgICAgICAgICByZWxhdGVkRG9jOiByZWxhdGVkRG9jXHJcbiAgICAgICAgICAgIH1dLCAwKTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUucmVtb3ZlUmVsYXRlZCA9IGZ1bmN0aW9uIChpZCwgbGFiZWwsIHJlbGF0ZWREb2MpIHtcclxuICAgICAgICB0aGlzLnJlcG8ud3JpdGVyLm11dGF0ZShbe1xyXG4gICAgICAgICAgICAgICAgb3A6ICdyZW1vdmUtcmVsYXRlZCcsXHJcbiAgICAgICAgICAgICAgICB0YWJsZTogdGhpcy50YWJsZSxcclxuICAgICAgICAgICAgICAgIGJyYW5jaElkOiB0aGlzLnF1ZXJ5LmJyYW5jaElkLFxyXG4gICAgICAgICAgICAgICAgaWQ6IGlkLFxyXG4gICAgICAgICAgICAgICAgZ3JhcGhQcm9wOiBsYWJlbCxcclxuICAgICAgICAgICAgICAgIHJlbGF0ZWREb2M6IHJlbGF0ZWREb2NcclxuICAgICAgICAgICAgfV0sIDApO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDb2xsZWN0aW9uLnByb3RvdHlwZS51bmRvTGluayA9IGZ1bmN0aW9uIChpZCwgbGFiZWwsIHJlbGF0ZWRJZCkge1xyXG4gICAgICAgIGlmICghdGhpcy5xdWVyeS5icmFuY2hJZClcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidW5kbyBsaW5rcyBjYW4gb25seSBiZSBwZXJmb3JtZWQgb24gYnJhbmNoZXNcIik7XHJcbiAgICAgICAgdGhpcy5yZXBvLndyaXRlci5tdXRhdGUoW3tcclxuICAgICAgICAgICAgICAgIG9wOiAndW5kby1saW5rJyxcclxuICAgICAgICAgICAgICAgIHRhYmxlOiB0aGlzLnRhYmxlLFxyXG4gICAgICAgICAgICAgICAgYnJhbmNoSWQ6IHRoaXMucXVlcnkuYnJhbmNoSWQsXHJcbiAgICAgICAgICAgICAgICBpZDogaWQsXHJcbiAgICAgICAgICAgICAgICBncmFwaFByb3A6IGxhYmVsLFxyXG4gICAgICAgICAgICAgICAgcmVsYXRlZElkOiByZWxhdGVkSWRcclxuICAgICAgICAgICAgfV0sIDApO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDb2xsZWN0aW9uLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgaWRzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgaWRzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVwby53cml0ZXIubXV0YXRlKGlkcy5tYXAoZnVuY3Rpb24gKGlkKSB7IHJldHVybiAoe1xyXG4gICAgICAgICAgICBvcDogJ2RlbGV0ZScsXHJcbiAgICAgICAgICAgIHRhYmxlOiBfdGhpcy50YWJsZSxcclxuICAgICAgICAgICAgaWQ6IGlkXHJcbiAgICAgICAgfSk7IH0pLCAwKTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaXB0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5yZXBvLnF1ZXJ5U2V0LnVuc3Vic2NyaWJlKHN1YnNjcmlwdGlvbik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEtlZEJhY2tlbmRDb2xsZWN0aW9uO1xyXG59KENvbGxlY3Rpb24pKTtcclxuZXhwb3J0IHsgS2VkQmFja2VuZENvbGxlY3Rpb24gfTtcclxuLyptaXhpbihcclxuICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUsXHJcbiAgTWFwcGVkQ29sbGVjdGlvbi5wcm90b3R5cGUsXHJcbiAgXCJtYXBcIiwgXCJmbGF0XCIsIFwiY29uY2F0XCIsIFwicmVuZGVyXCIsIFwibG9hZFwiKTsqL1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1rZWRiYWNrZW5kLWNvbGxlY3Rpb24uanMubWFwIiwiaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcclxuaW1wb3J0IHsgdXBkYXRlQXJyYXkgfSBmcm9tICcuLi9rZWQtYmFja2VuZC1jbGllbnQvdXRpbHMnO1xyXG5pbXBvcnQgeyBicmFuY2hTZW5zaXRpdmUsIGdldFRhYmxlRnJvbUxhYmVsIH0gZnJvbSAnLi91dGlscyc7XHJcbmltcG9ydCB7IGFwcGx5RGVsdGEgfSBmcm9tICcuL2RlbHRhLW1lcmdlJztcclxudmFyIEtlZEJhY2tlbmRRdWVyeSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEtlZEJhY2tlbmRRdWVyeSh0YWJsZSwgcXVlcnksIHVzZXIsIHJlcG8sIG11dGF0aW9uUXVldWUpIHtcclxuICAgICAgICB0aGlzLnRhYmxlID0gdGFibGU7XHJcbiAgICAgICAgdGhpcy5xdWVyeSA9IHF1ZXJ5O1xyXG4gICAgICAgIHRoaXMudXNlciA9IHVzZXI7XHJcbiAgICAgICAgdGhpcy5yZXBvID0gcmVwbztcclxuICAgICAgICB0aGlzLm11dGF0aW9uUXVldWUgPSBtdXRhdGlvblF1ZXVlO1xyXG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IFtdO1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IFtdO1xyXG4gICAgICAgIHRoaXMuZ290SW5pdGlhbFJlc3BvbnNlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pbnZhbGlkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5sb2FkZWRWZXJzaW9uID0gMDtcclxuICAgICAgICB0aGlzLl9sb2FkUHJvbWlzZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pbmNsdWRlcyA9IHF1ZXJ5LmluY2x1ZGUgP1xyXG4gICAgICAgICAgICB0eXBlb2YgcXVlcnkuaW5jbHVkZSA9PT0gJ3N0cmluZycgP1xyXG4gICAgICAgICAgICAgICAgW3F1ZXJ5LmluY2x1ZGVdIDpcclxuICAgICAgICAgICAgICAgIHF1ZXJ5LmluY2x1ZGUgOlxyXG4gICAgICAgICAgICBbXTtcclxuICAgIH1cclxuICAgIEtlZEJhY2tlbmRRdWVyeS5xdWVyeUtleSA9IGZ1bmN0aW9uICh0YWJsZSwgcXVlcnkpIHtcclxuICAgICAgICB2YXIgbXV0YXRpb25zT25FbXB0eSA9IHF1ZXJ5Lm11dGF0aW9uc09uRW1wdHksIGNvbXBhcmFibGVQcm9wcyA9IHRzbGliXzEuX19yZXN0KHF1ZXJ5LCBbXCJtdXRhdGlvbnNPbkVtcHR5XCJdKTtcclxuICAgICAgICByZXR1cm4gdGFibGUgKyBKU09OLnN0cmluZ2lmeShjb21wYXJhYmxlUHJvcHMpO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShLZWRCYWNrZW5kUXVlcnkucHJvdG90eXBlLCBcInF1ZXJ5S2V5XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEtlZEJhY2tlbmRRdWVyeS5xdWVyeUtleSh0aGlzLnRhYmxlLCB0aGlzLnF1ZXJ5KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIEtlZEJhY2tlbmRRdWVyeS5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmlwdGlvbikge1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZGF0YSwgZGF0YTtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh0aGlzLmdvdEluaXRpYWxSZXNwb25zZSAmJiAhdGhpcy5pbnZhbGlkKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSB0aGlzLmdldERhdGFXaXRoTXV0YXRpb25zQXBwbGllZCh0aGlzLm11dGF0aW9uUXVldWUuZ2V0KCksIHRydWUsIHRoaXMuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi5ub3RpZnlTdWJzY3JpYmVyKGRhdGEsIHRoaXMuZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSB0aGlzLnF1ZXJ5TG9jYWxseSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWRhdGEpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9yID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLm5vdGlmeVN1YnNjcmliZXIoZGF0YSwgdGhpcy5lcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5sb2FkKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRRdWVyeS5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uICh2ZXJzaW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBsb2FkUHJvbWlzZTtcclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5nb3RJbml0aWFsUmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG11dGF0aW9uc09uRW1wdHkgc2hvdWxkIG5ldmVyIGJlIHVzZWQgdHdpY2UuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5xdWVyeS5tdXRhdGlvbnNPbkVtcHR5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKCF2ZXJzaW9uICYmIHRoaXMuX2xvYWRQcm9taXNlKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuX2xvYWRQcm9taXNlXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6IFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGxvYWRpbmcgaXMgb25nb2luZywgYW5kIGNhbGxlciBkb2VzIG5vdCByZXF1aXJlIGEgcmVjZW50IHJlZnJlc2guXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gd2FpdCBmb3IgdGhlIG9uZ29pbmcgbG9hZCB0byBjb21wbGV0ZVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBfYS5zZW50KCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVyc2lvbiA9IHZlcnNpb24gfHwgdGhpcy5yZXBvLndyaXRlci5wZXJzaXN0ZWRWZXJzaW9uLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkUHJvbWlzZSA9IHRoaXMuX2xvYWRQcm9taXNlID0gdGhpcy5fbG9hZCh2ZXJzaW9uKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuX2xvYWRQcm9taXNlID09PSBsb2FkUHJvbWlzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRhdGEgPSBkYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmxvYWRlZFZlcnNpb24gPSBNYXRoLm1heChfdGhpcy5sb2FkZWRWZXJzaW9uLCB2ZXJzaW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuX2xvYWRQcm9taXNlID09PSBsb2FkUHJvbWlzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vb25lIGhhcyByZWZyZXNoZWQgb3VyIGxvYWQuIFRoZSBlcnJvciBpcyB0aGUgZmluYWwgcmVzdWx0LiBTZXQgaXQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZXJyb3IgPSBlcnJvcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuX2xvYWRQcm9taXNlID09PSBsb2FkUHJvbWlzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vb25lIGhhcyByZWZyZXNoZWQgb3VyIGxvYWQuIFdlJ3JlIGZpbmlzaGVkLiBEYXRhIG9yIGVycm9yIGlzIGFscmVhZHkgc2V0LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hcmsgZ290SW5pdGlhbFJlc3BvbnNlIHRvIHRydWUgYW5kIG5vdGlmeSBzdWJzY3JpYmVycy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fbG9hZFByb21pc2UgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmdvdEluaXRpYWxSZXNwb25zZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubm90aWZ5U3Vic2NyaWJlcnMoX3RoaXMubXV0YXRpb25RdWV1ZS5nZXQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBIG1vcmUgcmVjZW50IGNhbGwgdG8gbG9hZCgpIGlzIG9uZ29pbmcsIE9SIHdhcyBvbmdvaW5nIGJ1dCByZXNwb25kZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBiZWZvcmUgdXMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW4gYW55IGNhc2UgcmV0dXJuIHRoaXMuX2xvYWRQcm9taXNlLiBJZiBpdCdzIG9uZ29pbmcgd2UnbGwgd2FpdCBmb3IgaXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0byBmaW5pc2guIElmIGl0J3MgbnVsbCwgd2UnbGwgYmUgcmV0dXJuaW5nIGZpbmFsbHkgaGVyZSB3aXRob3V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW55IGFjdGlvbiwgYmVjYXVzZSB0aGUgYWN0aW9uIHdhcyB0YWtlbiBieSB0aGUgcmVmcmVzaGVyLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5fbG9hZFByb21pc2U7IC8vIFdhaXQgZm9yIHRoZSByZWZyZXNoZWQgbG9hZCB0byBjb21wbGV0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgbG9hZFByb21pc2VdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRRdWVyeS5wcm90b3R5cGUuX2xvYWQgPSBmdW5jdGlvbiAodmVyc2lvbikge1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5tdXRhdGlvblF1ZXVlLmFmZmVjdHNRdWVyeSh0aGlzLnRhYmxlLCB0aGlzLnF1ZXJ5LCB0aGlzLmluY2x1ZGVzKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZXJlIGFyZSBvdXRnb2luZyBtdXRhdGlvbnMgdGhhdCBhZmZlY3RzIHRoaXMgcXVlcnkuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5lZWQgdG8gd2FpdCB0aWxsIHRoZXkgcmVhY2ggc2VydmVyIGFuZCBzZXJ2ZXIgcmVzcG9uZHMgd2l0aCBPSyBiZWZvcmUgcXVlcnlpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHNlcnZlci4gT3RoZXJ3aXNlLCB3ZSBtYXkgZ2V0IGluYWNjdXJhdGUgZGF0YSBmcm9tIHNlcnZlci5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5yZXBvLndyaXRlci53YWl0Rm9yVmVyc2lvblRvUGVyc2lzdCh2ZXJzaW9uKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGVyZSBhcmUgb3V0Z29pbmcgbXV0YXRpb25zIHRoYXQgYWZmZWN0cyB0aGlzIHF1ZXJ5LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOZWVkIHRvIHdhaXQgdGlsbCB0aGV5IHJlYWNoIHNlcnZlciBhbmQgc2VydmVyIHJlc3BvbmRzIHdpdGggT0sgYmVmb3JlIHF1ZXJ5aW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBzZXJ2ZXIuIE90aGVyd2lzZSwgd2UgbWF5IGdldCBpbmFjY3VyYXRlIGRhdGEgZnJvbSBzZXJ2ZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5xdWVyeVNlcnZlcigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovLCBfYS5zZW50KCldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kUXVlcnkucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmlwdGlvbikge1xyXG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IHRoaXMuc3Vic2NyaXB0aW9ucy5maWx0ZXIoZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHMgIT09IHN1YnNjcmlwdGlvbjsgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFF1ZXJ5LnByb3RvdHlwZS5jb21taXRNdXRhdGlvbnMgPSBmdW5jdGlvbiAobXV0YXRpb25zLCB2ZXJzaW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBfaSwgbXV0YXRpb25zXzEsIG0sIGRhdGE7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmRhdGEpIHJldHVybiBbMyAvKmJyZWFrKi8sIDldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfaSA9IDAsIG11dGF0aW9uc18xID0gbXV0YXRpb25zO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShfaSA8IG11dGF0aW9uc18xLmxlbmd0aCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtID0gbXV0YXRpb25zXzFbX2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShtLm9wID09PSAnY2xlYXItYnJhbmNoJyAmJiAobS5icmFuY2hJZCA9PT0gdGhpcy5xdWVyeS5icmFuY2hJZCkpKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5yZWZyZXNoT3JJbnZhbGlkYXRlKHZlcnNpb24pXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEobS5vcCA9PT0gJ21lcmdlJyAmJiAoIW0udGFyZ2V0QnJhbmNoSWQgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0uYnJhbmNoSWQgPT09IHRoaXMucXVlcnkuYnJhbmNoSWQgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0udGFyZ2V0QnJhbmNoSWQgPT09IHRoaXMucXVlcnkuYnJhbmNoSWQpKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucmVmcmVzaE9ySW52YWxpZGF0ZSh2ZXJzaW9uKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKG0ub3AgPT09ICd1cGRhdGUnICYmICgobS5kZWx0YURvYy50YWdzICYmIHRoaXMucXVlcnkudGFncykgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChtLmRlbHRhRG9jLm5hbWUgJiYgdGhpcy5xdWVyeS5uYW1lKSkpKSByZXR1cm4gWzMgLypicmVhayovLCA3XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQSB0YWcgbWF5IGhhdmUgYmVlbiBhZGRlZCwgb3IgcmVuYW1lZCwgYW5kXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBxdWVyeSBpcyBkZXBlbmRlbnQgb24gdGhlIHNhbWUgcHJvcGVydHkuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBxdWVyeSBtdXN0IGJlIHJlZnJlc2hlZCBmcm9tIHNlcnZlciBhcyB3ZSBjYW5ub3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29tbWl0IHRoZSBtdXRhdGlvbnMgbG9jYWxseSBhcyB3ZSBkb24ndCBoYXZlIGFsbCBpbmZvLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJlZnJlc2hPckludmFsaWRhdGUodmVyc2lvbildO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQSB0YWcgbWF5IGhhdmUgYmVlbiBhZGRlZCwgb3IgcmVuYW1lZCwgYW5kXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBxdWVyeSBpcyBkZXBlbmRlbnQgb24gdGhlIHNhbWUgcHJvcGVydHkuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBxdWVyeSBtdXN0IGJlIHJlZnJlc2hlZCBmcm9tIHNlcnZlciBhcyB3ZSBjYW5ub3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29tbWl0IHRoZSBtdXRhdGlvbnMgbG9jYWxseSBhcyB3ZSBkb24ndCBoYXZlIGFsbCBpbmZvLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgODpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHRoaXMuZ2V0RGF0YVdpdGhNdXRhdGlvbnNBcHBsaWVkKG11dGF0aW9ucywgZmFsc2UsIHRoaXMuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gOTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDk6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFF1ZXJ5LnByb3RvdHlwZS5yZWZyZXNoT3JJbnZhbGlkYXRlID0gZnVuY3Rpb24gKHZlcnNpb24pIHtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh0aGlzLnN1YnNjcmlwdGlvbnMubGVuZ3RoID09PSAwKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW52YWxpZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5sb2FkKHZlcnNpb24pXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAzO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kUXVlcnkucHJvdG90eXBlLm5vdGlmeVN1YnNjcmliZXJzID0gZnVuY3Rpb24gKG9wdGltaXN0aWNNdXRhdGlvbnMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICh0aGlzLmRhdGEgJiYgdGhpcy5nb3RJbml0aWFsUmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgdmFyIGRhdGFfMSA9IHRoaXMuZ2V0RGF0YVdpdGhNdXRhdGlvbnNBcHBsaWVkKG9wdGltaXN0aWNNdXRhdGlvbnMsIHRydWUsIHRoaXMuZGF0YSk7XHJcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChzKSB7XHJcbiAgICAgICAgICAgICAgICBzLm5vdGlmeVN1YnNjcmliZXIoZGF0YV8xLCBfdGhpcy5lcnJvcik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kUXVlcnkucHJvdG90eXBlLnF1ZXJ5TG9jYWxseSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZXBvLnF1ZXJ5U2V0LnF1ZXJ5TG9jYWxseSh0aGlzLnRhYmxlLCB0aGlzLnF1ZXJ5LCB0aGlzLmluY2x1ZGVzKTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kUXVlcnkucHJvdG90eXBlLnF1ZXJ5U2VydmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZGF0YTtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJlcG8uZ2V0Q2xpZW50KCkubGlzdCh0aGlzLnRhYmxlLCB0c2xpYl8xLl9fYXNzaWduKHt9LCB0aGlzLnF1ZXJ5KSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGRhdGFdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kUXVlcnkucHJvdG90eXBlLmdldERhdGFXaXRoTXV0YXRpb25zQXBwbGllZCA9IGZ1bmN0aW9uIChtdXRhdGlvbnMsIG9wdGltaXN0aWMsIGRhdGEpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIG11dGF0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChtdXRhdGlvbikge1xyXG4gICAgICAgICAgICBkYXRhID0gX3RoaXMuYXBwbHlNdXRhdGlvbnNPbkRhdGEoZGF0YSwgbXV0YXRpb24sIG9wdGltaXN0aWMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRRdWVyeS5wcm90b3R5cGUuYXBwbHlNdXRhdGlvbnNPbkRhdGEgPSBmdW5jdGlvbiAoZGF0YSwgbSwgb3B0aW1pc3RpYykge1xyXG4gICAgICAgIGlmIChicmFuY2hTZW5zaXRpdmUobSkgJiYgbS5icmFuY2hJZCAhPSB0aGlzLnF1ZXJ5LmJyYW5jaElkKVxyXG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICB2YXIgX2EgPSB0aGlzLCB0YWJsZSA9IF9hLnRhYmxlLCBpbmNsdWRlcyA9IF9hLmluY2x1ZGVzLCBsaXN0T3B0aW9ucyA9IF9hLnF1ZXJ5O1xyXG4gICAgICAgIHZhciBzb3VyY2VJZHMgPSBsaXN0T3B0aW9ucy5oYXNFZGdlc0Zyb20gPyBbXS5jb25jYXQobGlzdE9wdGlvbnMuaGFzRWRnZXNGcm9tIHx8IFtdKSA6IFtdO1xyXG4gICAgICAgIHZhciByZXF1ZXN0ZWRUYWdzID0gbGlzdE9wdGlvbnMudGFncyA/IFtdLmNvbmNhdChsaXN0T3B0aW9ucy50YWdzIHx8IFtdKSA6IFtdO1xyXG4gICAgICAgIHN3aXRjaCAobS5vcCkge1xyXG4gICAgICAgICAgICBjYXNlICd1cGRhdGUnOiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlQXJyYXkoZGF0YSwgZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkb2MuaWQgPT09IG0uaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXBwbHkgZGVsdGEgb24gdXBkYXRlZCBkb2N1bWVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXBkYXRlZERvYyA9IGFwcGx5RGVsdGEoZG9jLCBtLmRlbHRhRG9jKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGltaXN0aWMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkRG9jLiRtZXRhID0gJ3VwZGF0aW5nJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZWREb2M7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGlkIGRvZXMgbm90IGFwcGx5IHRvIHRoaXMgZG9jLCBzZWFyY2ggaW4gZ3JhcGhzIHRoZSBpZCBpcyBmb3VuZFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFtb25nIGdyYXBoIGluY2x1ZGVkIGRvY3MsIGFuZCBpZiBzbywgdXBkYXRlIHRoYXQgb25lOlxyXG4gICAgICAgICAgICAgICAgICAgIGluY2x1ZGVzLmZvckVhY2goZnVuY3Rpb24gKGxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluY2x1ZGVkRG9jcyA9IGRvY1tsYWJlbF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmNsdWRlZERvY3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cGRhdGVkQXJyYXkgPSB1cGRhdGVBcnJheShpbmNsdWRlZERvY3MsIGZ1bmN0aW9uIChyZWxhdGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlbGF0ZWQuaWQgIT09IG0uaWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWxhdGVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cGRhdGVkUmVsYXRlZCA9IGFwcGx5RGVsdGEocmVsYXRlZCwgbS5kZWx0YURvYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGltaXN0aWMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRSZWxhdGVkLiRtZXRhID0gJ3VwZGF0aW5nJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlZFJlbGF0ZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1cGRhdGVkQXJyYXkgIT09IGluY2x1ZGVkRG9jcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvYyA9IHRzbGliXzEuX19hc3NpZ24oe30sIGRvYywgKF9hID0ge30sIF9hW2xhYmVsXSA9IHVwZGF0ZWRBcnJheSwgX2EpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkb2M7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlICdhZGQtcmVsYXRlZCc6XHJcbiAgICAgICAgICAgICAgICBpZiAodGFibGUgPT09IG0udGFibGUgJiYgaW5jbHVkZXMuaW5kZXhPZihtLmdyYXBoUHJvcCkgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgZXhwcmVzc2lvbiBpcyBgZGIuY291cnNlQmxvY2tzLi4uLndoYXRldmVyLi4gLmluY2x1ZGUoXCJhYmlsaXRpZXNcIilgLCBkZXRlY3Q6IGRiLmNvdXJzZUJsb2Nrcy5hZGRSZWxhdGVkKGJsb2NrSWQsICdhYmlsaXRpZXMnLCAuLi4pXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gLi4uYmVjYXVzZSB0YWJsZSA9ICdjb3Vyc2VCbG9ja3MnIGFuZCBpbmNsdWRlcyBoYXMgXCJhYmlsaXRpZXNcIi5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlQXJyYXkoZGF0YSwgZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb2MuaWQgIT09IG0uaWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZG9jO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVsYXRlZERvYyA9IHRzbGliXzEuX19hc3NpZ24oe30sIG0ucmVsYXRlZERvYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpbWlzdGljKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRlZERvYy4kbWV0YSA9ICdhZGRpbmcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2Fzc2lnbih7fSwgZG9jLCAoX2EgPSB7fSwgX2FbbS5ncmFwaFByb3BdID0gZG9jW20uZ3JhcGhQcm9wXS5jb25jYXQoW3JlbGF0ZWREb2NdKSwgX2EpKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChsaXN0T3B0aW9ucy5oYXNFZGdlc0Zyb20pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc291cmNlSWRzLmluY2x1ZGVzKG0uaWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIGV4cHJlc3Npb24gaXM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgYGRiLmNvdXJzZUJsb2Nrcy5oYXNFZGdlc0Zyb20oW2NvdXJzZUlkXSlgICAobWVhbmluZyB0YWJsZT0nY291cnNlQmxvY2tzJyBhbmQgc291cmNlSWRzIGluY2x1ZGVzIGNvdXJzZUlkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAsIGRldGVjdDogZGIuY291cnNlSW5zdGFuY2VzLmFkZFJlbGF0ZWQoY291cnNlSWQsICdjb3Vyc2VCbG9ja3MnLCAuLi4uKSAvLyBtLmdyYXBoUHJvcCA9PT0gJ2Jsb2NrcyctLT4gZ2V0VGFibGVGcm9tTGFiZWwgLS0+ICdjb3Vyc2VCbG9ja3MnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YWJsZSA9PT0gZ2V0VGFibGVGcm9tTGFiZWwobS50YWJsZSwgbS5ncmFwaFByb3ApKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxpc3RPcHRpb25zLnRhZ3MpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuY29uY2F0KHRoaXMuc2V0R3JhcGhQcm9wcyhtLnJlbGF0ZWREb2MpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtLnJlbGF0ZWREb2MudGFncyAmJiByZXF1ZXN0ZWRUYWdzLnNvbWUoZnVuY3Rpb24gKHRhZykgeyByZXR1cm4gbS5yZWxhdGVkRG9jLnRhZ3MuaW5jbHVkZXModGFnKTsgfSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5jb25jYXQodGhpcy5zZXRHcmFwaFByb3BzKG0ucmVsYXRlZERvYykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGxpc3RPcHRpb25zLmlkcyAmJiBsaXN0T3B0aW9ucy5pZHMuc29tZShmdW5jdGlvbiAoaWQpIHsgcmV0dXJuIGlkID09PSBtLnJlbGF0ZWREb2MuaWQ7IH0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQSBjZXJ0YWluIElEIGlzIG9ic2VydmVkLiBBIGRvYyB3aXRoIHRoaXMgaWQgaXMgYmVpbmcgYWRkZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBkb2MgdG8gdGhlIHJlc3VsdC4gRXhhY3RseSB0aGlzIFdJTEwgaGFwcGVuIGluIHRoZSBmb2xsb3dpbmcgdHlwaWNhbCBzY2VuYXJpbzpcclxuICAgICAgICAgICAgICAgICAgICAvLyAxLiBVc2VyIGFkZHMgYSByZWxhdGVkIGRvY3VtZW50IHRvIGEgbGlzdC5cclxuICAgICAgICAgICAgICAgICAgICAvLyAyLiBEb2N1bWVudCByZW1haW5zIHdpdGhpbiB0aGUgTXV0YXRpb25RdWV1ZSB3aGlsZSBiYXRjaC1yZXF1ZXN0IGlzIGJlaW5nIHByb2Nlc3NlZCBieSBzZXJ2ZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gMy4gVXNlciBjbGlja3MgdGhlIGFkZGVkIGl0ZW0gdG8gZWRpdCBvciB2aWV3IGl0IChvciBvdXIgY29tcG9uZW50IHJlZGlyZWN0cyB0byBpdHMgZWRpdG9yKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIDQuIEEgbmV3IHF1ZXJ5IG9mIHRoYXQgcGFydGljdWxhciBJRCBpcyBzdWJzY3JpYmVkIHRvIHtpZHM9W3RoZUlkXX1cclxuICAgICAgICAgICAgICAgICAgICAvLyAgICBLZWRCYWNrZW5kUXVlcnkuc3Vic2NyaWJlIHRoZW4gZG9lcyB0aGlzOlxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgMS4gQ2FsbCBxdWVyeUxvY2FsbHkoKSBiZWZvcmUgcXVlcnlpbmcgc2VydmVyXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAyLiBxdWVyeUxvY2FsbHkoKSBpbnNwZWN0cyBtdXRhdGlvbnMgYW5kIGZpbmRzIGEgbWF0Y2gsIHJldHVybmluZyBhbiBlbXB0eSBsaXN0XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAoYXNzdW1lcyBhcyB3ZSBhcmUgYWRkaW5nIGl0LCBpdCBjYW4ndCBleGlzdCBvbiB0aGUgc2VydmVyIGFueXdheSlcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgIDMuIEtlZEJhY2tlbmRRVWVyeSBhcHBsaWVzIG11dGF0aW9ucyBvbnRvIHRoZSBlbXB0eSBsaXN0LCBhbmQgZW5kcyB1cCBoZXJlIHRvIGFkZFxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgaXQgb3B0aW1pc3RpY2FsbHkuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICA0LiBXaGVuIHNlcnZlciByZXNwb25kcyB3aXRoIDIwMCBPSywgY2FsbHMgdXMgaGVyZSBhZ2FpbiB3aXRoIG9wdGltaXN0aWM9ZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIHRvIFwicGVyc2lzdFwiIGl0IGluIHRoZSBxdWVyeSdzIGRhdGEgYXJyYXkuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICA0QjogSWYgbm90IDIwMCBPSywgbXV0YXRpb24gbWF5IGJlIGdvbmUgYW5kIHRoZSBzdWJzY3JpYmVyIHdpbGwgc2UgYW4gZXJyb3IgcGFnZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgXCJDb3VsZCBub3QgZmluZCBlbnRpdHkgd2l0aCBpZCBYLlwiIGFsb25nIHdpdGggYSByZWQgZXJyb3IgbWVzc2FnZSBvbiB0aGUgc2NyZWVuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBhYm91dCB0aGF0IGl0IGZhaWxlZCB0byBzYXZlIG9uIHNlcnZlci5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5jb25jYXQodGhpcy5zZXRHcmFwaFByb3BzKG0ucmVsYXRlZERvYykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgICAgICAgIGNhc2UgJ3JlbW92ZS1yZWxhdGVkJzpcclxuICAgICAgICAgICAgICAgIGlmICh0YWJsZSA9PT0gbS50YWJsZSAmJiBpbmNsdWRlcy5pbmRleE9mKG0uZ3JhcGhQcm9wKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlQXJyYXkoZGF0YSwgZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmNsdWRlZERvY3MgPSBkb2NbbS5ncmFwaFByb3BdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWluY2x1ZGVkRG9jcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkb2M7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb2MuaWQgIT09IG0uaWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZG9jO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2Fzc2lnbih7fSwgZG9jLCAoX2EgPSB7fSwgX2FbbS5ncmFwaFByb3BdID0gb3B0aW1pc3RpYyA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNYXJrIHJlbGF0ZWQtZG9jLXRvLXJlbW92ZSB3aXRoICRtZXRhOiAnZGVsZXRpbmcnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlZERvY3MubWFwKGZ1bmN0aW9uIChkKSB7IHJldHVybiBkLmlkICE9PSBtLnJlbGF0ZWREb2MuaWQgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgOiB0c2xpYl8xLl9fYXNzaWduKHt9LCBkLCB7ICRtZXRhOiAnZGVsZXRpbmcnIH0pOyB9KSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEZWxldGUgcmVsYXRlZC1kb2MtdG8tcmVtb3ZlIGZyb20gZG9jW2dyYXBQcm9wXTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1ZGVkRG9jcy5maWx0ZXIoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGQuaWQgIT09IG0ucmVsYXRlZERvYy5pZDsgfSksIF9hKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobGlzdE9wdGlvbnMuaGFzRWRnZXNGcm9tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNvdXJjZUlkcy5pbmNsdWRlcyhtLmlkKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdGltaXN0aWMgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5tYXAoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGQuaWQgPT09IG0ucmVsYXRlZERvYy5pZCA/IHRzbGliXzEuX19hc3NpZ24oe30sIGQsIHsgJG1ldGE6ICdkZWxldGluZycgfSkgOiBkOyB9KSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmZpbHRlcihmdW5jdGlvbiAoZCkgeyByZXR1cm4gZC5pZCAhPT0gbS5yZWxhdGVkRG9jLmlkOyB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgICAgICBjYXNlICdkZWxldGUnOlxyXG4gICAgICAgICAgICAgICAgaWYgKHRhYmxlID09PSBtLnRhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuZmlsdGVyKGZ1bmN0aW9uIChkKSB7IHJldHVybiBkLmlkICE9PSBtLmlkOyB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGxpc3RPcHRpb25zLmluY2x1ZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5jbHVkZWRUYWJsZXMgPSBpbmNsdWRlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChsYWJlbCkgeyByZXR1cm4gKHsgbGFiZWw6IGxhYmVsLCB0YWJsZTogZ2V0VGFibGVGcm9tTGFiZWwodGFibGUsIGxhYmVsKSB9KTsgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxhYmVsc18xID0gaW5jbHVkZWRUYWJsZXMuZmlsdGVyKGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFibGUgPSBfYS50YWJsZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhYmxlID09PSBtLnRhYmxlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsYWJlbHNfMS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGVBcnJheShkYXRhLCBmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbHNfMS5mb3JFYWNoKGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsYWJlbCA9IF9hLmxhYmVsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVsYXRlZERvY3MgPSBkb2NbbGFiZWxdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZWxhdGVkRG9jcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MgPSB0c2xpYl8xLl9fYXNzaWduKHt9LCBkb2MsIChfYiA9IHt9LCBfYltsYWJlbF0gPSBvcHRpbWlzdGljID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0ZWREb2NzLm1hcChmdW5jdGlvbiAoZCkgeyByZXR1cm4gZC5pZCA9PT0gbS5pZCA/IHRzbGliXzEuX19hc3NpZ24oe30sIGQsIHsgJG1ldGE6ICdkZWxldGluZycgfSkgOiBkOyB9KSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWxhdGVkRG9jcy5maWx0ZXIoZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkID0gX2EuaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlkICE9PSBtLmlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIF9iKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZG9jO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kUXVlcnkucHJvdG90eXBlLnNldEdyYXBoUHJvcHMgPSBmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgdmFyIGNvcHkgPSB0c2xpYl8xLl9fYXNzaWduKHt9LCBkb2MpO1xyXG4gICAgICAgIHRoaXMuaW5jbHVkZXMuZm9yRWFjaChmdW5jdGlvbiAobGFiZWwpIHsgcmV0dXJuIGNvcHlbbGFiZWxdID0gY29weVtsYWJlbF0gfHwgW107IH0pO1xyXG4gICAgICAgIHJldHVybiBjb3B5O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBLZWRCYWNrZW5kUXVlcnk7XHJcbn0oKSk7XHJcbmV4cG9ydCB7IEtlZEJhY2tlbmRRdWVyeSB9O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1rZWRiYWNrZW5kLXF1ZXJ5LmpzLm1hcCIsImltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XHJcbmltcG9ydCB7IHRhYmxlcyB9IGZyb20gJ2tlZGJhY2tlbmQtc2NoZW1hL3NjaGVtYS5qc29uJztcclxuaW1wb3J0IHsgS2VkQmFja2VuZENvbGxlY3Rpb24gfSBmcm9tICcuL2tlZGJhY2tlbmQtY29sbGVjdGlvbic7XHJcbmltcG9ydCB7IFF1ZXJ5U2V0IH0gZnJvbSAnLi9xdWVyeS1zZXQnO1xyXG5pbXBvcnQgeyBNdXRhdGlvblF1ZXVlIH0gZnJvbSAnLi9tdXRhdGlvbi1xdWV1ZSc7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRXcml0ZXIgfSBmcm9tICcuL2tlZGJhY2tlbmQtd3JpdGVyJztcclxuaW1wb3J0IHsgRGVsdGFDb2xsZWN0aW9uIH0gZnJvbSAnLi9kZWx0YS1jb2xsZWN0aW9uL2RlbHRhLWNvbGxlY3Rpb24nO1xyXG52YXIgS2VkQmFja2VuZFJlcG8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBLZWRCYWNrZW5kUmVwbyhnZXRDbGllbnQsIGdldFVzZXIsIGdldFVzZXJEaXNwbGF5TmFtZSwgZGVmYXVsdFF1ZXJ5T3B0aW9ucywgbXV0YXRpb25RdWV1ZSwgcXVlcnlTZXQsIHdyaXRlciwgY2FjaGVPcHRpbWl6ZWQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuZ2V0Q2xpZW50ID0gZ2V0Q2xpZW50O1xyXG4gICAgICAgIHRoaXMuZ2V0VXNlciA9IGdldFVzZXI7XHJcbiAgICAgICAgdGhpcy5nZXRVc2VyRGlzcGxheU5hbWUgPSBnZXRVc2VyRGlzcGxheU5hbWU7XHJcbiAgICAgICAgdGhpcy5kZWZhdWx0UXVlcnlPcHRpb25zID0gZGVmYXVsdFF1ZXJ5T3B0aW9ucztcclxuICAgICAgICB0aGlzLm11dGF0aW9uUXVldWUgPSBtdXRhdGlvblF1ZXVlO1xyXG4gICAgICAgIHRoaXMucXVlcnlTZXQgPSBxdWVyeVNldDtcclxuICAgICAgICB0aGlzLndyaXRlciA9IHdyaXRlcjtcclxuICAgICAgICB0aGlzLmNhY2hlT3B0aW1pemVkID0gY2FjaGVPcHRpbWl6ZWQ7XHJcbiAgICAgICAgaWYgKCFkZWZhdWx0UXVlcnlPcHRpb25zKVxyXG4gICAgICAgICAgICB0aGlzLmRlZmF1bHRRdWVyeU9wdGlvbnMgPSB7fTtcclxuICAgICAgICBpZiAoIW11dGF0aW9uUXVldWUpXHJcbiAgICAgICAgICAgIHRoaXMubXV0YXRpb25RdWV1ZSA9IG5ldyBNdXRhdGlvblF1ZXVlKCk7XHJcbiAgICAgICAgaWYgKCFxdWVyeVNldClcclxuICAgICAgICAgICAgdGhpcy5xdWVyeVNldCA9IG5ldyBRdWVyeVNldCh0aGlzLm11dGF0aW9uUXVldWUpO1xyXG4gICAgICAgIGlmICghd3JpdGVyKVxyXG4gICAgICAgICAgICB0aGlzLndyaXRlciA9IG5ldyBLZWRCYWNrZW5kV3JpdGVyKHRoaXMubXV0YXRpb25RdWV1ZSwgdGhpcy5xdWVyeVNldCwgZ2V0Q2xpZW50LCBnZXRVc2VyLCBnZXRVc2VyRGlzcGxheU5hbWUpO1xyXG4gICAgICAgIE9iamVjdC5rZXlzKHRhYmxlcykuZm9yRWFjaChmdW5jdGlvbiAodGFibGUpIHtcclxuICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb24gPSBuZXcgS2VkQmFja2VuZENvbGxlY3Rpb24oX3RoaXMsIHRhYmxlLCBkZWZhdWx0UXVlcnlPcHRpb25zIHx8IHt9KTtcclxuICAgICAgICAgICAgaWYgKGNhY2hlT3B0aW1pemVkKSB7XHJcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uID0gY29sbGVjdGlvbi5jYWNoZU9wdGltaXplZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF90aGlzW3RhYmxlXSA9IGNvbGxlY3Rpb247XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5kZWx0YXMgPSBuZXcgRGVsdGFDb2xsZWN0aW9uKHRoaXMud3JpdGVyLmRlbHRhQ2FjaGUsIHtcclxuICAgICAgICAgICAgYnJhbmNoSWQ6IHRoaXMuZGVmYXVsdFF1ZXJ5T3B0aW9ucy5icmFuY2hJZCAvLyBJZiBicmFuY2hJZCBpcyB1bmRlZmluZWQuIERlbHRhQ29sbGVjdGlvbiB3aWxsIHJlc3BvbmQgd2l0aCBFcnJvciBvbiBzdWJzY3JpYmUoKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgS2VkQmFja2VuZFJlcG8ucHJvdG90eXBlLnRhYmxlID0gZnVuY3Rpb24gKHRhYmxlTmFtZSkge1xyXG4gICAgICAgIHZhciBjb2xsZWN0aW9uID0gbmV3IEtlZEJhY2tlbmRDb2xsZWN0aW9uKHRoaXMsIHRhYmxlTmFtZSwgdGhpcy5kZWZhdWx0UXVlcnlPcHRpb25zKTtcclxuICAgICAgICBpZiAodGhpcy5jYWNoZU9wdGltaXplZClcclxuICAgICAgICAgICAgY29sbGVjdGlvbiA9IGNvbGxlY3Rpb24uY2FjaGVPcHRpbWl6ZWQoKTtcclxuICAgICAgICByZXR1cm4gY29sbGVjdGlvbjtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kUmVwby5wcm90b3R5cGUuX2Nsb25lID0gZnVuY3Rpb24gKHF1ZXJ5T3B0aW9ucywgY2FjaGVPcHRpbWl6ZWQpIHtcclxuICAgICAgICB2YXIgY2xvbmUgPSBuZXcgS2VkQmFja2VuZFJlcG8odGhpcy5nZXRDbGllbnQsIHRoaXMuZ2V0VXNlciwgdGhpcy5nZXRVc2VyRGlzcGxheU5hbWUsIHRzbGliXzEuX19hc3NpZ24oe30sIHRoaXMuZGVmYXVsdFF1ZXJ5T3B0aW9ucywgcXVlcnlPcHRpb25zKSwgdGhpcy5tdXRhdGlvblF1ZXVlLCB0aGlzLnF1ZXJ5U2V0LCB0aGlzLndyaXRlciwgY2FjaGVPcHRpbWl6ZWQgPT09IHVuZGVmaW5lZCA/IHRoaXMuY2FjaGVPcHRpbWl6ZWQgOiBjYWNoZU9wdGltaXplZCk7XHJcbiAgICAgICAgcmV0dXJuIGNsb25lO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRSZXBvLnByb3RvdHlwZS5icmFuY2ggPSBmdW5jdGlvbiAoYnJhbmNoSWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY2xvbmUoeyBicmFuY2hJZDogYnJhbmNoSWQgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFJlcG8ucHJvdG90eXBlLnJvbGUgPSBmdW5jdGlvbiAocm9sZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jbG9uZSh7IHJvbGU6IHJvbGUgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFJlcG8ucHJvdG90eXBlLm9wdGltaXplQ2FjaGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Nsb25lKHt9LCB0cnVlKTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kUmVwby5wcm90b3R5cGUuY2xlYXJCcmFuY2ggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmRlZmF1bHRRdWVyeU9wdGlvbnMuYnJhbmNoSWQpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBjbGVhciBtYXN0ZXIgYnJhbmNoXCIpO1xyXG4gICAgICAgIHRoaXMud3JpdGVyLm11dGF0ZShbeyBvcDogJ2NsZWFyLWJyYW5jaCcsIGJyYW5jaElkOiB0aGlzLmRlZmF1bHRRdWVyeU9wdGlvbnMuYnJhbmNoSWQgfV0sIDApO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRSZXBvLnByb3RvdHlwZS5tZXJnZSA9IGZ1bmN0aW9uICh0YXJnZXRCcmFuY2hJZCkge1xyXG4gICAgICAgIGlmICghdGhpcy5kZWZhdWx0UXVlcnlPcHRpb25zLmJyYW5jaElkKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgbWVyZ2UgZnJvbSBtYXN0ZXIgYnJhbmNoXCIpO1xyXG4gICAgICAgIHRoaXMud3JpdGVyLm11dGF0ZShbeyBvcDogJ21lcmdlJywgYnJhbmNoSWQ6IHRoaXMuZGVmYXVsdFF1ZXJ5T3B0aW9ucy5icmFuY2hJZCwgdGFyZ2V0QnJhbmNoSWQ6IHRhcmdldEJyYW5jaElkIH1dLCAwKTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kUmVwby5wcm90b3R5cGUuc2F2ZU5vdyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLndyaXRlci53YWl0Rm9yVmVyc2lvblRvUGVyc2lzdCh0aGlzLndyaXRlci5jdXJyZW50VmVyc2lvbildO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBLZWRCYWNrZW5kUmVwbztcclxufSgpKTtcclxuZXhwb3J0IHsgS2VkQmFja2VuZFJlcG8gfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9a2VkYmFja2VuZC1yZXBvLmpzLm1hcCIsInZhciBLZWRCYWNrZW5kU3Vic2NyaXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gS2VkQmFja2VuZFN1YnNjcmlwdGlvbihzdWJzY3JpYmVyLCBjb2xsZWN0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVyID0gc3Vic2NyaWJlcjtcclxuICAgICAgICB0aGlzLmNvbGxlY3Rpb24gPSBjb2xsZWN0aW9uO1xyXG4gICAgfVxyXG4gICAgS2VkQmFja2VuZFN1YnNjcmlwdGlvbi5wcm90b3R5cGUubm90aWZ5U3Vic2NyaWJlciA9IGZ1bmN0aW9uIChkYXRhLCBlcnJvcikge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChlcnJvcilcclxuICAgICAgICAgICAgICAgIHRoaXMuc3Vic2NyaWJlcihbXSwgZXJyb3IsIHRoaXMpO1xyXG4gICAgICAgICAgICBlbHNlIGlmIChkYXRhICE9PSB0aGlzLmxhc3ROb3RpZmllZERhdGEpIHsgLy8gV2lsbCBpbi1mYWN0IGJlIGVxdWFsIGJ5IHJlZmVyZW5jZSBpZiBkYXRhIGlzIHNhbWUgYXMgbGFzdCBub3RpZmljYXRpb24gKGFzIHdlIHVzZSBhbiBpbW11dGFibGUgYXBwcm9hY2ggb24gZGF0YSlcclxuICAgICAgICAgICAgICAgIHRoaXMubGFzdE5vdGlmaWVkRGF0YSA9IGRhdGE7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN1YnNjcmliZXIoZGF0YSwgZXJyb3IsIHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChleCkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdWJzY3JpYmVyKFtdLCBleCwgdGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGV4Mikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHdoaWxlIG5vdGlmeWluZyBLZWRCYWNrZW5kU3Vic2NyaWJlcjpcIiwgZXgyLCAnb3JpZ2luYWxseSBub3RpZmllZCBlcnJvcjonLCBleCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFN1YnNjcmlwdGlvbi5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uLnVuc3Vic2NyaWJlKHRoaXMpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBLZWRCYWNrZW5kU3Vic2NyaXB0aW9uO1xyXG59KCkpO1xyXG5leHBvcnQgeyBLZWRCYWNrZW5kU3Vic2NyaXB0aW9uIH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWtlZGJhY2tlbmQtc3Vic2NyaXB0aW9uLmpzLm1hcCIsImltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XHJcbmltcG9ydCB7IE11dGF0aW9uUXVldWUgfSBmcm9tICcuL211dGF0aW9uLXF1ZXVlJztcclxuaW1wb3J0IHsgQmF0Y2hSdW5uZXIgfSBmcm9tICcuLi9rZWQtYmFja2VuZC1jbGllbnQnO1xyXG5pbXBvcnQgeyB0YWJsZXMgfSBmcm9tICdrZWRiYWNrZW5kLXNjaGVtYS9zY2hlbWEuanNvbic7XHJcbmltcG9ydCB7IENhY2hlQnVzdCB9IGZyb20gJy4vY2FjaGUtYnVzdCc7XHJcbmltcG9ydCB7IEVtaXR0ZXIgfSBmcm9tICcuLi9vYnNlcnZhYmxlJztcclxuaW1wb3J0IHsgRGVsdGFDYWNoZSB9IGZyb20gJy4vZGVsdGEtY29sbGVjdGlvbi9kZWx0YS1jYWNoZSc7XHJcbnZhciBLZWRCYWNrZW5kV3JpdGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gS2VkQmFja2VuZFdyaXRlcihtdXRhdGlvblF1ZXVlLCBxdWVyeVNldCwgZ2V0Q2xpZW50LCBnZXRVc2VyLCBnZXRVc2VyRGlzcGxheU5hbWUpIHtcclxuICAgICAgICB0aGlzLm11dGF0aW9uUXVldWUgPSBtdXRhdGlvblF1ZXVlO1xyXG4gICAgICAgIHRoaXMucXVlcnlTZXQgPSBxdWVyeVNldDtcclxuICAgICAgICB0aGlzLmdldENsaWVudCA9IGdldENsaWVudDtcclxuICAgICAgICB0aGlzLmdldFVzZXIgPSBnZXRVc2VyO1xyXG4gICAgICAgIHRoaXMuZ2V0VXNlckRpc3BsYXlOYW1lID0gZ2V0VXNlckRpc3BsYXlOYW1lO1xyXG4gICAgICAgIHRoaXMuX3RpbWVvdXRJZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5faXNTYXZpbmdQcm9taXNlID0gbnVsbDtcclxuICAgICAgICB0aGlzLmN1cnJlbnRWZXJzaW9uID0gMDtcclxuICAgICAgICB0aGlzLnBlcnNpc3RlZFZlcnNpb24gPSBuZXcgRW1pdHRlcigwKTtcclxuICAgICAgICB0aGlzLmVycm9yU3Vic2NyaWJlcnMgPSBbXTtcclxuICAgICAgICB0aGlzLnN0YXRlU3Vic2NyaWJlcnMgPSBbXTtcclxuICAgICAgICB0aGlzLmRlbHRhQ2FjaGUgPSBuZXcgRGVsdGFDYWNoZShnZXRDbGllbnQsIGdldFVzZXIsIGdldFVzZXJEaXNwbGF5TmFtZSk7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoS2VkQmFja2VuZFdyaXRlci5wcm90b3R5cGUsIFwiaXNTYXZpbmdcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gISF0aGlzLl9pc1NhdmluZ1Byb21pc2U7IH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEtlZEJhY2tlbmRXcml0ZXIucHJvdG90eXBlLCBcImlzRWRpdGVkXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMubXV0YXRpb25RdWV1ZS5nZXQoKS5sZW5ndGggPiAwOyB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIEtlZEJhY2tlbmRXcml0ZXIucHJvdG90eXBlLm9uRXJyb3IgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLmVycm9yU3Vic2NyaWJlcnMucHVzaChjYWxsYmFjayk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFdyaXRlci5wcm90b3R5cGUub25TdGF0ZUNoYW5nZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMuc3RhdGVTdWJzY3JpYmVycy5wdXNoKGNhbGxiYWNrKTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kV3JpdGVyLnByb3RvdHlwZS5vZmYgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLmVycm9yU3Vic2NyaWJlcnMgPSB0aGlzLmVycm9yU3Vic2NyaWJlcnMuZmlsdGVyKGZ1bmN0aW9uIChzKSB7IHJldHVybiBzICE9PSBjYWxsYmFjazsgfSk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZVN1YnNjcmliZXJzID0gdGhpcy5zdGF0ZVN1YnNjcmliZXJzLmZpbHRlcihmdW5jdGlvbiAocykgeyByZXR1cm4gcyAhPT0gY2FsbGJhY2s7IH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRXcml0ZXIucHJvdG90eXBlLmRpc3BhdGNoRXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IsIHJldHJ5YWJsZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5lcnJvclN1YnNjcmliZXJzLmZvckVhY2goZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnJvciwgcmV0cnlhYmxlLCBfdGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKF8pIHsgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRXcml0ZXIucHJvdG90eXBlLmRpc3BhdGNoU3RhdGVDaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLnN0YXRlU3Vic2NyaWJlcnMuZm9yRWFjaChmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKF90aGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoXykgeyB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFdyaXRlci5wcm90b3R5cGUubXV0YXRlID0gZnVuY3Rpb24gKG11dGF0aW9ucywgZGVib3VuY2UpIHtcclxuICAgICAgICB0aGlzLm11dGF0aW9uUXVldWUuYWRkKG11dGF0aW9ucyk7XHJcbiAgICAgICAgKyt0aGlzLmN1cnJlbnRWZXJzaW9uO1xyXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hTdGF0ZUNoYW5nZSgpO1xyXG4gICAgICAgIHRoaXMucXVlcnlTZXQubm90aWZ5U3Vic2NyaWJlcnMoKTtcclxuICAgICAgICB0aGlzLmRlbHRhQ2FjaGUuYXBwbHlNdXRhdGlvbnModGhpcy5tdXRhdGlvblF1ZXVlLmdldCgpLCB7IG9wdGltaXN0aWM6IHRydWUgfSk7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9pc1NhdmluZ1Byb21pc2UpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX3RpbWVvdXRJZClcclxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl90aW1lb3V0SWQpO1xyXG4gICAgICAgICAgICB0aGlzLl90aW1lb3V0SWQgPSBzZXRUaW1lb3V0KHRoaXMuc2F2ZS5iaW5kKHRoaXMpLCBkZWJvdW5jZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIGlzU2F2aW5nLCB3ZSBkb24ndCBuZWVkIHRvIGRvIGFueXRoaW5nLCBiZWNhc2UgaXQgd2lsbCByZS1jaGVjayBpZiBhZGRpdGlvbmFsXHJcbiAgICAgICAgLy8gbXV0YXRpb25zIGhhdmUgY29tZSwgd2hlbiBzYXZpbmcgaXMgZG9uZS5cclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kV3JpdGVyLnByb3RvdHlwZS5yZXRyeVNhdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2F2ZSgpO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRXcml0ZXIucHJvdG90eXBlLndhaXRGb3JWZXJzaW9uVG9QZXJzaXN0ID0gZnVuY3Rpb24gKHZlcnNpb24pIHtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHBlcnNpc3RlZFZlcnNpb247XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5wZXJzaXN0ZWRWZXJzaW9uLmxvYWQoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJzaXN0ZWRWZXJzaW9uID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShwZXJzaXN0ZWRWZXJzaW9uIDwgdmVyc2lvbikpIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNhdmUoKTsgLy8gQmUgbW9yZSBlYWdlciB0byBzYXZlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucGVyc2lzdGVkVmVyc2lvbi5maWx0ZXIoZnVuY3Rpb24gKHBlcnNpc3RlZFZlcnNpb24pIHsgcmV0dXJuIHBlcnNpc3RlZFZlcnNpb24gPj0gdmVyc2lvbjsgfSkubG9hZCgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAzO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kV3JpdGVyLnByb3RvdHlwZS5zYXZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHRoaXMuX3RpbWVvdXRJZClcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVvdXRJZCk7XHJcbiAgICAgICAgaWYgKHRoaXMuX2lzU2F2aW5nUHJvbWlzZSlcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lzU2F2aW5nUHJvbWlzZTtcclxuICAgICAgICBpZiAoIXRoaXMuaXNFZGl0ZWQpXHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB0aGlzLl90aW1lb3V0SWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX2lzU2F2aW5nUHJvbWlzZSA9IHRoaXMuX3NhdmUoKTtcclxuICAgICAgICB0aGlzLl9pc1NhdmluZ1Byb21pc2UuY2F0Y2goZnVuY3Rpb24gKCkgeyB9KS50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLl9pc1NhdmluZ1Byb21pc2UgPSBudWxsOyB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5faXNTYXZpbmdQcm9taXNlO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRXcml0ZXIucHJvdG90eXBlLl9zYXZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgbXV0YXRpb25zLCB2ZXJzaW9uLCBtdXRhdGlvblJlcXVlc3RzLCByZXNfMSwgZXRhZ011dGF0aW9ucywgZXJyb3JfMTtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoU3RhdGVDaGFuZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbXV0YXRpb25zID0gdGhpcy5tdXRhdGlvblF1ZXVlLmdldCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uID0gdGhpcy5jdXJyZW50VmVyc2lvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tdXRhdGlvblF1ZXVlLm1vdmVUb1NhdmluZ1F1ZXVlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG11dGF0aW9uUmVxdWVzdHMgPSB0aGlzLm1hcE11dGF0aW9ucyhtdXRhdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzEsIDYsIDExLCAxMl0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmdldENsaWVudCgpLmJhdGNoKG11dGF0aW9uUmVxdWVzdHMpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc18xID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBldGFnTXV0YXRpb25zID0gT2JqZWN0LmtleXMocmVzXzEubmV3RXRhZ3MpLm1hcChmdW5jdGlvbiAoaWQpIHsgcmV0dXJuICh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcDogJ3VwZGF0ZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZTogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBpZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbHRhRG9jOiB7ICRldGFnOiByZXNfMS5uZXdFdGFnc1tpZF0gfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldE5hbWU6IG51bGwgLy8gV2UgZG9uJ3QgaGF2ZSB0aGUgdGFyZ2V0IG5hbWUuIEJ1dCB0aGlzIG11dGF0aW9uIHdvbid0IGJlIHZpc2libGUgaW4gYSBEZWx0YUNvbGxlY3Rpb24gYW55d2F5LCBzbyBpdCB3b250IGJlIHVzZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pOyB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW52YWxpZGF0ZSBjYWNoZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBDYWNoZUJ1c3QuaW52YWxpZGF0ZUNhY2hlKG11dGF0aW9uUmVxdWVzdHMsIHRoaXMuZ2V0VXNlcigpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29tbW1pdCBtdXRhdGlvbnMgYWxvbmcgd2l0aCBldGFnTXV0YXRpb25zIGludG8gcXVlcmllcyBjYWNoZWQgZGF0YVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBlcnNpc3RlZFZlcnNpb24uZGlzcGF0Y2godmVyc2lvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsdGFDYWNoZS5hcHBseU11dGF0aW9ucyhtdXRhdGlvbnMsIHsgb3B0aW1pc3RpYzogZmFsc2UgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucXVlcnlTZXQuY29tbWl0TXV0YXRpb25zKE11dGF0aW9uUXVldWUubWVyZ2UobXV0YXRpb25zLCBldGFnTXV0YXRpb25zKSwgdmVyc2lvbildO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBPbiBzdWNjZXNzLCBjbGVhciBzYXZpbmcgcXVldWUgYXMgdGhlIG11dGF0aW9ucyB3aWxsIG5vdyBiZSBjb21taXR0ZWQgdG8gYWxsIHF1ZXJ5J3MgZGF0YSBpbnN0ZWFkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm11dGF0aW9uUXVldWUuY2xlYXJTYXZpbmdRdWV1ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoU3RhdGVDaGFuZ2UoKTsgLy8gaXNFZGl0ZWQgbWF5IGhhdmUgdHVybmVkIHRvIGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpbmFsbHksIG5vdGlmeSBzdWJzY3JpYmVycyBzbyB0aGF0IHZpZXdzIGdldCB1cGRhdGVkIHdpdGggY29tbWl0dGVkIHJlc3VsdHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWVyeVNldC5ub3RpZnlTdWJzY3JpYmVycygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh0aGlzLm11dGF0aW9uUXVldWUuZ2V0KCkubGVuZ3RoID4gMCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGRpdGlvbmFsIG11dGF0aW9ucyBoYXBwZW5kIHdoaWxlIHdlIHdlcmUgc2F2aW5nLiBIYW5kbGUgdGhlbSBhcyB3ZWxsLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLl9zYXZlKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkaXRpb25hbCBtdXRhdGlvbnMgaGFwcGVuZCB3aGlsZSB3ZSB3ZXJlIHNhdmluZy4gSGFuZGxlIHRoZW0gYXMgd2VsbC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDU7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OiByZXR1cm4gWzMgLypicmVhayovLCAxMl07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl8xID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBlcnNpc3RlZFZlcnNpb24uZGlzcGF0Y2hFcnJvcihlcnJvcl8xKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoZXJyb3JfMSAmJiBlcnJvcl8xLm5hbWUgJiYgZXJyb3JfMS5uYW1lLnN0YXJ0c1dpdGgoXCJodHRwNFwiKSkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBY2Nlc3MgQ29udHJvbCBkZW5pZWQsIGJhZCByZXF1ZXN0IG9yIHNpbWlsYXIuIFRocm93IG11dGF0aW9ucyBhd2F5LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXJyb3IoZXJyb3JfMSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm11dGF0aW9uUXVldWUuY2xlYXJTYXZpbmdRdWV1ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoU3RhdGVDaGFuZ2UoKTsgLy8gaXNFZGl0ZWQgbWF5IGhhdmUgdHVybmVkIHRvIGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucXVlcnlTZXQubm90aWZ5U3Vic2NyaWJlcnMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEodGhpcy5tdXRhdGlvblF1ZXVlLmdldCgpLmxlbmd0aCA+IDApKSByZXR1cm4gWzMgLypicmVhayovLCA4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSG8gaG8hIEFkZGl0aW9uYWwgbXV0YXRpb25zIGhhcHBlbmQgd2hpbGUgd2Ugd2VyZSBzYXZpbmcuIEhhbmRsZSB0aGVtIGFsb25lLiBUSGV5IG1pZ2h0IGJlIG1vcmUgbHVja3kuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuX3NhdmUoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA3OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBIbyBobyEgQWRkaXRpb25hbCBtdXRhdGlvbnMgaGFwcGVuZCB3aGlsZSB3ZSB3ZXJlIHNhdmluZy4gSGFuZGxlIHRoZW0gYWxvbmUuIFRIZXkgbWlnaHQgYmUgbW9yZSBsdWNreS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDg7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA4OiByZXR1cm4gWzMgLypicmVhayovLCAxMF07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA5OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXJyb3IoZXJyb3JfMSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMTA7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDogcmV0dXJuIFszIC8qYnJlYWsqLywgMTJdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hTdGF0ZUNoYW5nZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzcgLyplbmRmaW5hbGx5Ki9dO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTI6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFdyaXRlci5wcm90b3R5cGUubWFwTXV0YXRpb25zID0gZnVuY3Rpb24gKG11dGF0aW9ucykge1xyXG4gICAgICAgIHZhciBiciA9IG5ldyBCYXRjaFJ1bm5lcigpO1xyXG4gICAgICAgIG11dGF0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChtKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAobS5vcCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAndXBkYXRlJzpcclxuICAgICAgICAgICAgICAgICAgICBici51cGRhdGUobS50YWJsZSwgbS5pZCwgbS5kZWx0YURvYywgbS5icmFuY2hJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdhZGQtcmVsYXRlZCc6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtLnJlbGF0ZWREb2MuJGV0YWcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gJGV0YWcgbWVhbnMgdGhpcyBpcyBhIG5ldyBkb2N1bWVudC4gQWRkIGl0IGJlZm9yZSBsaW5raW5nIHRvIGl0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBici5hZGQodGFibGVzW20udGFibGVdLnJlbGF0aW9uc2hpcHNbbS5ncmFwaFByb3BdLCBtLnJlbGF0ZWREb2MsIG0uYnJhbmNoSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBici5saW5rMihtLnRhYmxlLCBtLmlkLCBtLmdyYXBoUHJvcCwgbS5yZWxhdGVkRG9jLmlkLCBtLmJyYW5jaElkKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3JlbW92ZS1yZWxhdGVkJzpcclxuICAgICAgICAgICAgICAgICAgICBici51bmxpbmsyKG0udGFibGUsIG0uaWQsIG0uZ3JhcGhQcm9wLCBtLnJlbGF0ZWREb2MuaWQsIG0uYnJhbmNoSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAndW5kby1saW5rJzpcclxuICAgICAgICAgICAgICAgICAgICBici51bmRvTGluayhtLnRhYmxlLCBtLmlkLCBtLmdyYXBoUHJvcCwgbS5yZWxhdGVkSWQsIG0uYnJhbmNoSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnZGVsZXRlJzpcclxuICAgICAgICAgICAgICAgICAgICBici5kZWxldGUobS50YWJsZSwgbS5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdjbGVhci1icmFuY2gnOlxyXG4gICAgICAgICAgICAgICAgICAgIGJyLmNsZWFyQnJhbmNoKG0uYnJhbmNoSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnbWVyZ2UnOlxyXG4gICAgICAgICAgICAgICAgICAgIGJyLm1lcmdlKG0uYnJhbmNoSWQsIG0udGFyZ2V0QnJhbmNoSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGJyLm11dGF0aW9uUmVxdWVzdHM7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEtlZEJhY2tlbmRXcml0ZXI7XHJcbn0oKSk7XHJcbmV4cG9ydCB7IEtlZEJhY2tlbmRXcml0ZXIgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9a2VkYmFja2VuZC13cml0ZXIuanMubWFwIiwiaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcclxuaW1wb3J0IHsgZ2V0VGFibGVGcm9tTGFiZWwsIGJyYW5jaFNlbnNpdGl2ZSwgZ2xvYmFsT3AgfSBmcm9tICcuL3V0aWxzJztcclxuaW1wb3J0IHsgbWVyZ2VEZWx0YXMgfSBmcm9tICcuL2RlbHRhLW1lcmdlJztcclxudmFyIE11dGF0aW9uUXVldWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBNdXRhdGlvblF1ZXVlKCkge1xyXG4gICAgICAgIHRoaXMucXVldWUgPSBbXTtcclxuICAgICAgICB0aGlzLnNhdmluZ1F1ZXVlID0gW107XHJcbiAgICB9XHJcbiAgICBNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAobXV0YXRpb25zKSB7XHJcbiAgICAgICAgdGhpcy5xdWV1ZSA9IE11dGF0aW9uUXVldWUubWVyZ2UodGhpcy5xdWV1ZSwgbXV0YXRpb25zKTtcclxuICAgIH07XHJcbiAgICBNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5tb3ZlVG9TYXZpbmdRdWV1ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnNhdmluZ1F1ZXVlID0gTXV0YXRpb25RdWV1ZS5tZXJnZSh0aGlzLnNhdmluZ1F1ZXVlLCB0aGlzLnF1ZXVlKTtcclxuICAgICAgICB0aGlzLnF1ZXVlID0gW107XHJcbiAgICB9O1xyXG4gICAgTXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuY2xlYXJTYXZpbmdRdWV1ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnNhdmluZ1F1ZXVlID0gW107XHJcbiAgICB9O1xyXG4gICAgTXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNhdmluZ1F1ZXVlLmNvbmNhdCh0aGlzLnF1ZXVlKTtcclxuICAgIH07XHJcbiAgICBNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5hZmZlY3RzUXVlcnkgPSBmdW5jdGlvbiAodGFibGUsIHF1ZXJ5LCBpbmNsdWRlcykge1xyXG4gICAgICAgIHZhciBtdXRhdGlvbnMgPSB0aGlzLmdldCgpO1xyXG4gICAgICAgIGlmIChtdXRhdGlvbnMuc29tZShmdW5jdGlvbiAobSkgeyByZXR1cm4gbS5vcCA9PT0gJ21lcmdlJyB8fCBtLm9wID09PSAnY2xlYXItYnJhbmNoJzsgfSkpXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIGlmIChxdWVyeS5pZHMpIHtcclxuICAgICAgICAgICAgLy8gQSBxdWVyeSB3aXRoIFwiaWRzXCIgZmlsdGVyIHdpbGwgYmUgZWFzeSB0byBkZXRlY3QgYSBuby1tYXRjaCBvbjpcclxuICAgICAgICAgICAgcmV0dXJuIG11dGF0aW9ucy5zb21lKGZ1bmN0aW9uIChtKSB7IHJldHVybiBnbG9iYWxPcChtKSB8fCAoIWJyYW5jaFNlbnNpdGl2ZShtKSB8fCBtLmJyYW5jaElkID09PSBxdWVyeS5icmFuY2hJZCkgJiZcclxuICAgICAgICAgICAgICAgIHF1ZXJ5Lmlkcy5pbmNsdWRlcyhtLmlkKTsgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIE90aGVyd2lzZSwgY2hlY2sgaWYgbXV0YXRpb25zIGFmZmVjdCBzYW1lIGJyYW5jaCBhbmQgdGFibGUuIENvdWxkIGJlIGRvbmUgbW9yZSBmaW5lIGdyYWluZWQsXHJcbiAgICAgICAgLy8gYnV0IHRoYXQgd291bGQgb25seSBiZSBhIHN1Ym9wdGltaXphdGlvbi5cclxuICAgICAgICByZXR1cm4gbXV0YXRpb25zLnNvbWUoZnVuY3Rpb24gKG0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIG0ub3AgPT09ICdkZWxldGUnID9cclxuICAgICAgICAgICAgICAgIG0udGFibGUgPT09IHRhYmxlIHx8IChpbmNsdWRlcy5zb21lKGZ1bmN0aW9uIChsYWJlbCkgeyByZXR1cm4gZ2V0VGFibGVGcm9tTGFiZWwodGFibGUsIGxhYmVsKSA9PT0gbS50YWJsZTsgfSkpIDpcclxuICAgICAgICAgICAgICAgIGdsb2JhbE9wKG0pID8gdHJ1ZSA6XHJcbiAgICAgICAgICAgICAgICAgICAgbS5icmFuY2hJZCA9PSBxdWVyeS5icmFuY2hJZCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAobS50YWJsZSA9PT0gdGFibGUgfHwgKG0ub3AgIT09ICd1cGRhdGUnICYmIChbdGFibGVdLmNvbmNhdChpbmNsdWRlcy5tYXAoZnVuY3Rpb24gKGxhYmVsKSB7IHJldHVybiBnZXRUYWJsZUZyb21MYWJlbCh0YWJsZSwgbGFiZWwpOyB9KSkuc29tZShmdW5jdGlvbiAodGFibGUpIHsgcmV0dXJuIGdldFRhYmxlRnJvbUxhYmVsKG0udGFibGUsIG0uZ3JhcGhQcm9wKSA9PT0gdGFibGU7IH0pKSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIE11dGF0aW9uUXVldWUubWVyZ2UgPSBmdW5jdGlvbiAocXVldWUxLCBxdWV1ZTIpIHtcclxuICAgICAgICB2YXIgbXV0YWJsZVF1ZXVlMSA9IHF1ZXVlMS5zbGljZSgpO1xyXG4gICAgICAgIHZhciBtdXRhYmxlUXVldWUyID0gcXVldWUyLnNsaWNlKCk7XHJcbiAgICAgICAgLy9pZiAobXV0YWJsZVF1ZXVlMS5sZW5ndGggPiAwKSBkZWJ1Z2dlcjtcclxuICAgICAgICB2YXIgbGVuID0gcXVldWUxLmxlbmd0aDtcclxuICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChpKSB7XHJcbiAgICAgICAgICAgIHZhciBtID0gcXVldWUxW2ldO1xyXG4gICAgICAgICAgICBpZiAobS5vcCA9PT0gJ3VwZGF0ZScpIHtcclxuICAgICAgICAgICAgICAgIHZhciBvdmVybGFwcGluZ0lkT3BJZHggPSBtdXRhYmxlUXVldWUyLmZpbmRJbmRleChmdW5jdGlvbiAobmV3TXV0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld011dC5vcCA9PT0gJ3VwZGF0ZScgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3TXV0LmJyYW5jaElkID09PSBtLmJyYW5jaElkICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld011dC5pZCA9PT0gbS5pZDtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKG92ZXJsYXBwaW5nSWRPcElkeCA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbXV0YWJsZVF1ZXVlMVtpXSA9IHRzbGliXzEuX19hc3NpZ24oe30sIG0sIHsgZGVsdGFEb2M6IG1lcmdlRGVsdGFzKG0uZGVsdGFEb2MsIG11dGFibGVRdWV1ZTJbb3ZlcmxhcHBpbmdJZE9wSWR4XS5kZWx0YURvYykgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbXV0YWJsZVF1ZXVlMi5zcGxpY2Uob3ZlcmxhcHBpbmdJZE9wSWR4LCAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xyXG4gICAgICAgICAgICBfbG9vcF8xKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbXV0YWJsZVF1ZXVlMS5jb25jYXQobXV0YWJsZVF1ZXVlMik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE11dGF0aW9uUXVldWU7XHJcbn0oKSk7XHJcbmV4cG9ydCB7IE11dGF0aW9uUXVldWUgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bXV0YXRpb24tcXVldWUuanMubWFwIiwiaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcclxuaW1wb3J0IHsgS2VkQmFja2VuZFF1ZXJ5IH0gZnJvbSAnLi9rZWRiYWNrZW5kLXF1ZXJ5JztcclxuaW1wb3J0ICogYXMgSnNvblNjaGVtYSBmcm9tICdrZWRiYWNrZW5kLXNjaGVtYS9zY2hlbWEuanNvbic7XHJcbmltcG9ydCB7IHF1ZXJ5QXJyYXkgfSBmcm9tICcuL3V0aWxzJztcclxudmFyIFF1ZXJ5U2V0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUXVlcnlTZXQobXV0YXRpb25RdWV1ZSkge1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25RdWV1ZSA9IG11dGF0aW9uUXVldWU7XHJcbiAgICAgICAgdGhpcy5xdWVyaWVzID0gW107XHJcbiAgICB9XHJcbiAgICBRdWVyeVNldC5wcm90b3R5cGUuY29tbWl0TXV0YXRpb25zID0gZnVuY3Rpb24gKG11dGF0aW9ucywgdmVyc2lvbikge1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIFByb21pc2UuYWxsKHRoaXMucXVlcmllcy5tYXAoZnVuY3Rpb24gKHEpIHsgcmV0dXJuIHEuY29tbWl0TXV0YXRpb25zKG11dGF0aW9ucywgdmVyc2lvbik7IH0pKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYW51cEludmFsaWRRdWVyaWVzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgUXVlcnlTZXQucHJvdG90eXBlLmNsZWFudXBJbnZhbGlkUXVlcmllcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnF1ZXJpZXMgPSB0aGlzLnF1ZXJpZXMuZmlsdGVyKGZ1bmN0aW9uIChxKSB7XHJcbiAgICAgICAgICAgIGlmIChxLmludmFsaWQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChxLnRpbWVvdXRIYW5kbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQocS50aW1lb3V0SGFuZGxlKTtcclxuICAgICAgICAgICAgICAgICAgICBxLnRpbWVvdXRIYW5kbGUgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5U2V0LnByb3RvdHlwZS5ub3RpZnlTdWJzY3JpYmVycyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgb3B0aW1pc3RpY011dGF0aW9ucyA9IHRoaXMubXV0YXRpb25RdWV1ZS5nZXQoKTtcclxuICAgICAgICB0aGlzLnF1ZXJpZXMuZm9yRWFjaChmdW5jdGlvbiAocSkge1xyXG4gICAgICAgICAgICBxLm5vdGlmeVN1YnNjcmliZXJzKG9wdGltaXN0aWNNdXRhdGlvbnMpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5U2V0LnByb3RvdHlwZS5maW5kUXVlcnkgPSBmdW5jdGlvbiAodGFibGUsIHF1ZXJ5KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucXVlcmllcy5maW5kKGZ1bmN0aW9uIChxKSB7IHJldHVybiBxLnF1ZXJ5S2V5ID09PSBLZWRCYWNrZW5kUXVlcnkucXVlcnlLZXkodGFibGUsIHF1ZXJ5KTsgfSk7XHJcbiAgICB9O1xyXG4gICAgUXVlcnlTZXQucHJvdG90eXBlLnF1ZXJ5TG9jYWxseSA9IGZ1bmN0aW9uICh0YWJsZSwgcXVlcnksIGluY2x1ZGVzKSB7XHJcbiAgICAgICAgLy8gRm9yIG5vdywgb25seSBoYW5kbGUgdGhpcyB2ZXJ5IGNvbW1vbiBhbmQgc3BlY2lhbCBjYXNlICh3aGljaFxyXG4gICAgICAgIC8vIHdpbGwgc2F2ZSBhIGxvdCBvZiB1bm5lc2Nlc3NhcnkgbmV0d29yayB0cmFmZmljIGlmIEkgYW0gdGhpbmtpbmcgcmlnaHQuLi4pXHJcbiAgICAgICAgdmFyIG11dGF0aW9ucyA9IHRoaXMubXV0YXRpb25RdWV1ZS5nZXQoKTtcclxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgcXVlcnkgd2FudHMgdG8gZ2V0IGEgc2luZ2xlIGVudGl0eSBieSBpdHMgSUQ6XHJcbiAgICAgICAgaWYgKHF1ZXJ5LmlkcyAmJiBxdWVyeS5pZHMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgIC8vIEFuZCBpZiBzbywgaWYgd2UgaGF2ZSBhbiBvdXRnb2luZyBtdXRhdGlvbiB0byBjcmVhdGUgdGhhdCBlbnRpdHk6XHJcbiAgICAgICAgICAgIGlmIChtdXRhdGlvbnMuc29tZShmdW5jdGlvbiAobSkgeyByZXR1cm4gbS5vcCA9PT0gJ2FkZC1yZWxhdGVkJyAmJiBtLnJlbGF0ZWREb2MuaWQgPT09IHF1ZXJ5Lmlkc1swXTsgfSkpIHtcclxuICAgICAgICAgICAgICAgIC8vIFRoZW4gcmV0dXJuIGFuIEVNUFRZIHJlc3BvbnNlLCBzaWduYWxsaW5nIHRoYXQgd2UgY2FuIHJlc29sdmUgdGhpcyBsb2NhbGx5LFxyXG4gICAgICAgICAgICAgICAgLy8gYnV0IGxldCB0aGUgb3B0aXN0aWMgZmVhdHVyZSBvZiBLZWRCYWNrZW5kUXVlcnkgYXBwbHkgdGhlIG11dGF0aW9uIGJlZm9yZVxyXG4gICAgICAgICAgICAgICAgLy8gbm90aWZ5aW5nIHN1YnNjcmliZXJzICh3ZSBkb24ndCB3YW50IGl0IHRvIGJlIHBlcnNpc3RlbnQgYmVmb3JlIHRoZSBzZXJ2ZXJcclxuICAgICAgICAgICAgICAgIC8vIGhhcyBhY2NlcHRlZCB0aGUgbXV0YXRpb24pXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gT0ssIGFub3RoZXIgcXVpdGUgY29tbW9uIGNhc2UgaXMgd2hlbiB3ZSBhc2sgZm9yIGEgY2VydGFpbiBJRCBhbmQgdGhhdCBJRCByZXBsaWVzXHJcbiAgICAgICAgLy8gd2l0aGluIGFub3RoZXIgcXVlcnlcclxuICAgICAgICBpZiAocXVlcnkuaGFzRWRnZXNGcm9tIHx8IHF1ZXJ5Lmhhc0VkZ2VzVG8pXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsOyAvLyBOb3QgcG9zc2libGUgdG8gaGFuZGxlXHJcbiAgICAgICAgaWYgKCFxdWVyeS5pZHMpXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsOyAvLyBGb3Igbm93LCBqdXN0IHRha2UgaGlnaHQgZm9yIHRoaXMgcGFydGljdWxhciBhbmQgbW9zdCBjb21tb24gY2FzZSFcclxuICAgICAgICB2YXIgX2xvb3BfMSA9IGZ1bmN0aW9uIChxKSB7XHJcbiAgICAgICAgICAgIGlmICghcS5nb3RJbml0aWFsUmVzcG9uc2UpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJjb250aW51ZVwiO1xyXG4gICAgICAgICAgICBpZiAocS5xdWVyeS5icmFuY2hJZCAhPT0gcXVlcnkuYnJhbmNoSWQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJjb250aW51ZVwiO1xyXG4gICAgICAgICAgICBpZiAocS5xdWVyeS5mbGFncylcclxuICAgICAgICAgICAgICAgIHJldHVybiBcImNvbnRpbnVlXCI7IC8vIEl0IHdvdWxkIGJlIGNvbXBsZXggdG8gc3VwcG9ydCB2YXJpb3VzIGZsYWdzLiBRdWVyeSdzIGRhdGEgbWF5IGluY2x1ZGUgaWRzIG9ubHkuIENhbid0IHJlbHkgb24gdGhlIHF1ZXJ5LlxyXG4gICAgICAgICAgICB2YXIgcUluY2x1ZGVzID0gcS5pbmNsdWRlcztcclxuICAgICAgICAgICAgaWYgKHFJbmNsdWRlcy5sZW5ndGggPiAwICYmICghcXVlcnkuaW5jbHVkZSB8fCBxdWVyeS5pbmNsdWRlLmxlbmd0aCA9PT0gMCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIFdlIGRvbid0IGluY2x1ZGUsIGJ1dCB0aGlzIHF1ZXJ5IGRvZXMuIENoZWNrIGlmIHdlIGNhbiBmaW5kIG91ciByZXN1bHQgd2l0aGluIGl0LlxyXG4gICAgICAgICAgICAgICAgdmFyIGxhYmVsID0gcUluY2x1ZGVzLmZpbmQoZnVuY3Rpb24gKGwpIHsgcmV0dXJuIEpzb25TY2hlbWEudGFibGVzW3EudGFibGVdW1wicmVsYXRpb25zaGlwc1wiXVtsXSA9PT0gdGFibGU7IH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc18xID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHEuZGF0YTsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVudGl0eSA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YkRhdGEgPSBxdWVyeUFycmF5KHF1ZXJ5LCBlbnRpdHlbbGFiZWxdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3ViRGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IHJldHVybiByZXNfMVtyLmlkXSA9IHI7IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0XzEgPSBPYmplY3Qua2V5cyhyZXNfMSkubWFwKGZ1bmN0aW9uIChpZCkgeyByZXR1cm4gcmVzXzFbaWRdOyB9KTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IHJldHVybiByZXN1bHQgaWYgd2UgY291bGQgbG9vayB1cCBldmVyeSByZXF1ZXN0ZWQgSUQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFxdWVyeS5pZHMuZXZlcnkoZnVuY3Rpb24gKGlkKSB7IHJldHVybiByZXN1bHRfMS5zb21lKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LmlkID09PSBpZDsgfSk7IH0pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJjb250aW51ZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiByZXN1bHRfMSB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghaW5jbHVkZXMuZXZlcnkoZnVuY3Rpb24gKGxhYmVsKSB7IHJldHVybiBxSW5jbHVkZXMuaW5jbHVkZXMobGFiZWwpOyB9KSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBcImNvbnRpbnVlXCI7XHJcbiAgICAgICAgICAgIC8vIExhc3RseSwgaWYgdGhlIHF1ZXJ5IGluY2x1ZGVzIGFsbCBncmFwaHMgdGhhdCB3ZSBkbywgcGljayB0aGUgc3Vic2V0IGZyb20gdGhhdCBxdWVyeS5cclxuICAgICAgICAgICAgLy8gQ29uY3JldGUgZXhhbXBsZTogV2Ugb2JzZXJ2ZSBhIGNlcnRhaW4gVGFzayBieSBJRCBhbmQgd2FudCBpdHMga25vd2xlZGdlUmVxdWlyZW1lbnRzIGFsb25nIHdpdGggaXQsXHJcbiAgICAgICAgICAgIC8vIGFuZCB0aGVyZSdzIGFub3RoZXIgcXVlcnkgb2YgYWxsIHRhc2tzIHRoYXQgYWxzbyBpbmNsdWRlcyBrbm93bGVkZ2VSZXF1aXJlbWVudHMuIFVzZSBpdC4gXHJcbiAgICAgICAgICAgIGlmIChxLnRhYmxlID09PSB0YWJsZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdF8yID0gcXVlcnlBcnJheShxdWVyeSwgcS5kYXRhKTtcclxuICAgICAgICAgICAgICAgIC8vIE9ubHkgcmV0dXJuIHJlc3VsdCBpZiB3ZSBjb3VsZCBsb29rIHVwIGV2ZXJ5IHJlcXVlc3RlZCBJRDpcclxuICAgICAgICAgICAgICAgIGlmICghcXVlcnkuaWRzLmV2ZXJ5KGZ1bmN0aW9uIChpZCkgeyByZXR1cm4gcmVzdWx0XzIuc29tZShmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5pZCA9PT0gaWQ7IH0pOyB9KSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJjb250aW51ZVwiO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IHJlc3VsdF8yIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLnF1ZXJpZXM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBxID0gX2FbX2ldO1xyXG4gICAgICAgICAgICB2YXIgc3RhdGVfMSA9IF9sb29wXzEocSk7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc3RhdGVfMSA9PT0gXCJvYmplY3RcIilcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdGF0ZV8xLnZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBRdWVyeVNldC5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmlwdGlvbikge1xyXG4gICAgICAgIHZhciBfYSA9IHN1YnNjcmlwdGlvbi5jb2xsZWN0aW9uLCB0YWJsZSA9IF9hLnRhYmxlLCBxdWVyeSA9IF9hLnF1ZXJ5LCByZXBvID0gX2EucmVwbztcclxuICAgICAgICB2YXIga2JRdWVyeSA9IHRoaXMuZmluZFF1ZXJ5KHRhYmxlLCBxdWVyeSk7XHJcbiAgICAgICAgaWYgKCFrYlF1ZXJ5KSB7XHJcbiAgICAgICAgICAgIGtiUXVlcnkgPSBuZXcgS2VkQmFja2VuZFF1ZXJ5KHRhYmxlLCBxdWVyeSwgcmVwby5nZXRVc2VyKCksIHJlcG8sIHRoaXMubXV0YXRpb25RdWV1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMucXVlcmllcy5wdXNoKGtiUXVlcnkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGtiUXVlcnkudGltZW91dEhhbmRsZSkge1xyXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGtiUXVlcnkudGltZW91dEhhbmRsZSk7XHJcbiAgICAgICAgICAgICAgICBrYlF1ZXJ5LnRpbWVvdXRIYW5kbGUgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGtiUXVlcnkuc3Vic2NyaWJlKHN1YnNjcmlwdGlvbik7XHJcbiAgICB9O1xyXG4gICAgUXVlcnlTZXQucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmlwdGlvbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIF9hID0gc3Vic2NyaXB0aW9uLmNvbGxlY3Rpb24sIHRhYmxlID0gX2EudGFibGUsIHF1ZXJ5ID0gX2EucXVlcnksIHJlcG8gPSBfYS5yZXBvO1xyXG4gICAgICAgIHZhciBrYlF1ZXJ5ID0gdGhpcy5maW5kUXVlcnkodGFibGUsIHF1ZXJ5KTtcclxuICAgICAgICBpZiAoa2JRdWVyeSkge1xyXG4gICAgICAgICAgICAvLyBQcm9oaWJpdCBmdXJ0aGVyIG5vdGlmaWNhdGlvbnMgdG8gdGhpcyBzdWJzY3JpcHRpb246XHJcbiAgICAgICAgICAgIGtiUXVlcnkudW5zdWJzY3JpYmUoc3Vic2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgLy8gUmVsZWFzZSB1bm5lc2Nlc3NhcnkgbWVtb3J5IHdoZW4gdGhlcmUgYXJlIG5vIG1vcmUgc3Vic2NyaXB0aW9ucyBvZiB0aGlzIHF1ZXJ5LCBieSByZW1vdmluZyB0aGUgcXVlcnkgaXRzZWxmXHJcbiAgICAgICAgICAgIC8vIFRvIHRoYXQgaW4gYSBkZWxheWVkIG1hbm5lciwgc28gdGhhdCBhbiB1bnN1YnNjcmliZSgpIGZvbGxvd2VkIGJ5IGFuIGltbWVkaWF0ZSBzdWJzY3JpYmUoKSBkb24ndCBoYXZlIHRvIHJlLXF1ZXJ5IHRoZSBzZXJ2ZXI6XHJcbiAgICAgICAgICAgIGlmIChrYlF1ZXJ5LnN1YnNjcmlwdGlvbnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBTY2hlZHVsZSBmb3IgZ2FyYmFnZSBjb2xsZWN0aW9uIGluIDUgbWludXRlczpcclxuICAgICAgICAgICAgICAgIGtiUXVlcnkudGltZW91dEhhbmRsZSA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGtiUXVlcnkgc3RpbGwgaGFzIG5vIHN1YnNjcmlwdGlvbnMgKG5vdCBjZXJ0YWluISBBIG5ldyBzdWJzY3JpYmVyIG1heSBoYXZlIGNvbWUgYWxvbmcuLi4pXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtiUXVlcnkuc3Vic2NyaXB0aW9ucy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RpbGwgbm8gc3Vic2NyaXB0aW9ucyBvbiBpdCwgdGltZSB0byByZWxlYXNlIHNvbWUgbWVtb3J5IGFuZCBmb3JnZXQgdGhlIGluLW1lbW9yeSBjYWNoZSBvZiB0aGUgcXVlcnkgcmVzdWx0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnF1ZXJpZXMgPSBfdGhpcy5xdWVyaWVzLmZpbHRlcihmdW5jdGlvbiAocSkgeyByZXR1cm4gcSAhPT0ga2JRdWVyeTsgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgdGhpcy5xdWVyaWVzLmxlbmd0aCA+IDUwID9cclxuICAgICAgICAgICAgICAgICAgICA1MDAgOiAvLyBEb24ndCBob3N0IHRvbyBtYW55IHF1ZXJpZXMuIEdhcmJhZ2UgY29sbGVjdCB0aGlzIHdpdGhpbiA1MDAgbXNcclxuICAgICAgICAgICAgICAgICAgICA1ICogNjAwMDApOyAvLyBBbGxvdyBxdWVyeSBpbiBtZW1vcnkgZm9yIGFub3RoZXIgNSBtaW51dGVzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFF1ZXJ5U2V0O1xyXG59KCkpO1xyXG5leHBvcnQgeyBRdWVyeVNldCB9O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1xdWVyeS1zZXQuanMubWFwIiwiaW1wb3J0IHsgdGFibGVzIH0gZnJvbSAna2VkYmFja2VuZC1zY2hlbWEvc2NoZW1hLmpzb24nO1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGFibGVGcm9tTGFiZWwodGFibGUsIGxhYmVsKSB7XHJcbiAgICByZXR1cm4gdGFibGVzW3RhYmxlXS5yZWxhdGlvbnNoaXBzW2xhYmVsXTtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gcXVlcnlBcnJheShxdWVyeSwgZGF0YSkge1xyXG4gICAgdmFyIGZpbHRlciA9IGdldEZpbHRlckZyb21RdWVyeShxdWVyeSk7XHJcbiAgICByZXR1cm4gZGF0YS5maWx0ZXIoZmlsdGVyKTtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gQU5EKGZpbHRlcjEsIGZpbHRlcjIpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoeCkgeyByZXR1cm4gZmlsdGVyMSh4KSAmJiBmaWx0ZXIyKHgpOyB9O1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWx0ZXJGcm9tUXVlcnkocXVlcnkpIHtcclxuICAgIHZhciBmaWx0ZXIgPSBmdW5jdGlvbiAoeCkgeyByZXR1cm4gdHJ1ZTsgfTtcclxuICAgIGlmIChxdWVyeS5mcm9tKVxyXG4gICAgICAgIHJldHVybiBBTkQoZmlsdGVyLCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5kYXRlVGltZSA+PSBxdWVyeS5mcm9tOyB9KTtcclxuICAgIGlmIChxdWVyeS50bylcclxuICAgICAgICByZXR1cm4gQU5EKGZpbHRlciwgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHguZGF0ZVRpbWUgPCBxdWVyeS50bzsgfSk7XHJcbiAgICBpZiAocXVlcnkuaWRzKVxyXG4gICAgICAgIHJldHVybiBBTkQoZmlsdGVyLCBmdW5jdGlvbiAoeCkgeyByZXR1cm4gcXVlcnkuaWRzLmluY2x1ZGVzKHguaWQpOyB9KTtcclxuICAgIGlmIChxdWVyeS5uYW1lKVxyXG4gICAgICAgIHJldHVybiBBTkQoZmlsdGVyLCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5uYW1lID09PSBxdWVyeS5uYW1lOyB9KTtcclxuICAgIGlmIChxdWVyeS50YWdzKVxyXG4gICAgICAgIHJldHVybiBBTkQoZmlsdGVyLCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geC50YWdzICYmIFtdLmNvbmNhdChxdWVyeS50YWdzIHx8IFtdKS5zb21lKGZ1bmN0aW9uICh0YWcpIHsgcmV0dXJuIHgudGFncy5pbmNsdWRlcyh0YWcpOyB9KTsgfSk7XHJcbiAgICAvLyBxdWVyeS5oYXNFZGdlc0Zyb20gYW5kIHF1ZXJ5Lmhhc0VkZ2VzVG8gY2Fubm90IGJ5IGZpbHRlcmVkIGhlcmVcclxuICAgIHJldHVybiBmaWx0ZXI7XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIGJyYW5jaFNlbnNpdGl2ZShtKSB7XHJcbiAgICByZXR1cm4gbS5vcCAhPT0gJ2RlbGV0ZSc7XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIGdsb2JhbE9wKG0pIHtcclxuICAgIHJldHVybiBtLm9wID09PSAnY2xlYXItYnJhbmNoJyB8fCBtLm9wID09PSAnbWVyZ2UnO1xyXG59XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXV0aWxzLmpzLm1hcCIsImltcG9ydCBtaWdyYXRlIGZyb20gJy4vbWlncmF0ZSc7XHJcbmV4cG9ydCB2YXIgS2VkTW9kZWxNaWdyYXRvck1peGluID0gZnVuY3Rpb24gKGNsaWVudCkge1xyXG4gICAgaWYgKGNsaWVudC5fX21pZ3JhdG9yX21peGVkX2luKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIGNsaWVudC5fX21pZ3JhdG9yX21peGVkX2luID0gdHJ1ZTtcclxuICAgIHZhciBnZXQgPSBjbGllbnQuZ2V0O1xyXG4gICAgdmFyIGxpc3QgPSBjbGllbnQubGlzdDtcclxuICAgIGNsaWVudC5nZXQgPSBmdW5jdGlvbiAodGFibGUsIGlkLCBvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIGluY2x1ZGUgPSBvcHRpb25zICYmIG9wdGlvbnMuaW5jbHVkZTtcclxuICAgICAgICByZXR1cm4gZ2V0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIG1pZ3JhdGUocmVzdWx0LCB0YWJsZSwgaW5jbHVkZSAmJiBpbmNsdWRlLnRvU3RyaW5nKCkuc3BsaXQoJywnKSk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgY2xpZW50Lmxpc3QgPSBmdW5jdGlvbiAodGFibGUsIG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgaW5jbHVkZSA9IG9wdGlvbnMgJiYgb3B0aW9ucy5pbmNsdWRlO1xyXG4gICAgICAgIHJldHVybiBsaXN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5mb3JFYWNoKGZ1bmN0aW9uIChkb2MpIHsgcmV0dXJuIG1pZ3JhdGUoZG9jLCB0YWJsZSwgaW5jbHVkZSAmJiBpbmNsdWRlLnRvU3RyaW5nKCkuc3BsaXQoJywnKSk7IH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBjbGllbnQ7XHJcbn07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsImltcG9ydCBtaWdyYXRlVGFzayBmcm9tICcuL21pZ3JhdGUtdGFzayc7XHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1pZ3JhdGVDb3Vyc2UoY291cnNlLCBncmFwaHMpIHtcclxuICAgIGlmICghY291cnNlLm1vZHVsZXMpXHJcbiAgICAgICAgY291cnNlLm1vZHVsZXMgPSBbXTtcclxuICAgIGNvdXJzZS5tb2R1bGVzLmZvckVhY2goZnVuY3Rpb24gKG1vZHVsZSkge1xyXG4gICAgICAgIGlmICghbW9kdWxlLnJlc291cmNlcykge1xyXG4gICAgICAgICAgICBtb2R1bGUucmVzb3VyY2VzID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghbW9kdWxlLnRhc2tJZHMpIHtcclxuICAgICAgICAgICAgbW9kdWxlLnRhc2tJZHMgPSBbXTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIGlmICghY291cnNlLnJlc3BvbnNpYmxlVGVhY2hlcnMpIHtcclxuICAgICAgICBjb3Vyc2UucmVzcG9uc2libGVUZWFjaGVycyA9IFtdO1xyXG4gICAgfVxyXG4gICAgLy8gRWFybGllciB3cm9uZyBzcGVsbGluZyBvZiByZXNvdXJjZXNcclxuICAgIGlmICgncmVzb3Vyc2VzJyBpbiBjb3Vyc2UgJiYgISgncmVzb3VyY2VzJyBpbiBjb3Vyc2UpKSB7XHJcbiAgICAgICAgY291cnNlLnJlc291cmNlcyA9IGNvdXJzZS5yZXNvdXJzZXM7XHJcbiAgICAgICAgZGVsZXRlIGNvdXJzZS5yZXNvdXJzZXM7XHJcbiAgICB9XHJcbiAgICBpZiAoIWNvdXJzZS5yZXNvdXJjZXMpIHtcclxuICAgICAgICBjb3Vyc2UucmVzb3VyY2VzID0gW107XHJcbiAgICB9XHJcbiAgICBpZiAoZ3JhcGhzKSB7XHJcbiAgICAgICAgZ3JhcGhzLmZvckVhY2goZnVuY3Rpb24gKGxhYmVsKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAobGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3Rhc2tzJzpcclxuICAgICAgICAgICAgICAgICAgICBjb3Vyc2UudGFza3MuZm9yRWFjaChmdW5jdGlvbiAodGFzaykgeyByZXR1cm4gbWlncmF0ZVRhc2sodGFzayk7IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWlncmF0ZS1jb3Vyc2UuanMubWFwIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbWlncmF0ZVRhc2sodGFzaykge1xyXG4gICAgaWYgKCF0YXNrLnJlc291cmNlcylcclxuICAgICAgICB0YXNrLnJlc291cmNlcyA9IFtdO1xyXG59XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1pZ3JhdGUtdGFzay5qcy5tYXAiLCJpbXBvcnQgbWlncmF0ZUNvdXJzZSBmcm9tICcuL21pZ3JhdGUtY291cnNlJztcclxuaW1wb3J0IG1pZ3JhdGVUYXNrIGZyb20gJy4vbWlncmF0ZS10YXNrJztcclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbWlncmF0ZShkb2MsIHRhYmxlLCBncmFwaHMpIHtcclxuICAgIHN3aXRjaCAodGFibGUpIHtcclxuICAgICAgICBjYXNlIFwiY291cnNlc1wiOlxyXG4gICAgICAgICAgICBtaWdyYXRlQ291cnNlKGRvYywgZ3JhcGhzKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcInRhc2tzXCI6XHJcbiAgICAgICAgICAgIG1pZ3JhdGVUYXNrKGRvYyk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG59XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1pZ3JhdGUuanMubWFwIiwiaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gXCIuL29ic2VydmFibGVcIjtcclxuaW1wb3J0IHsgaW5pdE1hcE1ldGhvZCB9IGZyb20gXCIuL21hcFwiO1xyXG5pbXBvcnQgeyBWYWx1ZSB9IGZyb20gXCIuL3ZhbHVlXCI7XHJcbmltcG9ydCB7IEVtaXR0ZXIgfSBmcm9tIFwiLi9lbWl0dGVyXCI7XHJcbnZhciBDb2xsZWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoQ29sbGVjdGlvbiwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIENvbGxlY3Rpb24oc3Vic2NyaWJlKSB7XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIHN1YnNjcmliZSkgfHwgdGhpcztcclxuICAgIH1cclxuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLl9tYXAgPSBmdW5jdGlvbiAobWFwcGVyKSB7XHJcbiAgICAgICAgdGhyb3cgXCJtaXhlZGluXCI7XHJcbiAgICB9O1xyXG4gICAgQ29sbGVjdGlvbi5mcm9tID0gZnVuY3Rpb24gKHgpIHtcclxuICAgICAgICBpZiAoeC5zdWJzY3JpYmUpXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ29sbGVjdGlvbihmdW5jdGlvbiAocykgeyByZXR1cm4geC5zdWJzY3JpYmUocyk7IH0pO1xyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHgpKSB7XHJcbiAgICAgICAgICAgIHZhciBlbWl0dGVyXzEgPSBuZXcgRW1pdHRlcih4KTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xsZWN0aW9uKGZ1bmN0aW9uIChzKSB7IHJldHVybiBlbWl0dGVyXzEuc3Vic2NyaWJlKHMpOyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiT2JzZXJ2YWJsZUNvbGxlY3Rpb24uZnJvbSgpIGNhbiBvbmx5IHRha2UgYXJyYXlzIG9yIG9ic2VydmFibGVzXCIpO1xyXG4gICAgfTtcclxuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLm1hcCA9IGZ1bmN0aW9uIChtYXBwZXIpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbWFwKGZ1bmN0aW9uIChpdGVtcykgeyByZXR1cm4gaXRlbXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7IHJldHVybiBtYXBwZXIoaXRlbSk7IH0pOyB9KTtcclxuICAgIH07XHJcbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5mbGF0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9tYXAoZnVuY3Rpb24gKGl0ZW1zKSB7IHJldHVybiBbXS5jb25jYXQuYXBwbHkoW10sIGl0ZW1zKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuZmlsdGVyID0gZnVuY3Rpb24gKGZpbHRlcikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9tYXAoZnVuY3Rpb24gKGl0ZW1zKSB7IHJldHVybiBpdGVtcy5maWx0ZXIoZmlsdGVyKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuY29uY2F0ID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIENvbGxlY3Rpb24uZnJvbSh0aGlzLnRvVmFsdWUoKS5jb21iaW5lTGF0ZXN0KG90aGVyKS5tYXAoZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgIHZhciBtZSA9IF9hWzBdLCBvdGhlciA9IF9hWzFdO1xyXG4gICAgICAgICAgICByZXR1cm4gbWUuY29uY2F0KG90aGVyKTtcclxuICAgICAgICB9KSk7XHJcbiAgICB9O1xyXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUub3JkZXJCeSA9IGZ1bmN0aW9uIChwcm9wKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudG9WYWx1ZSgpLm1hcChmdW5jdGlvbiAoYXJyYXkpIHsgcmV0dXJuIGFycmF5LnNsaWNlKCkuc29ydChmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgICAgICB2YXIgYVByb3AgPSBhICYmIGFbcHJvcF07XHJcbiAgICAgICAgICAgIHZhciBiUHJvcCA9IGIgJiYgYltwcm9wXTtcclxuICAgICAgICAgICAgcmV0dXJuIGFQcm9wID4gYlByb3AgPyAxIDogYVByb3AgPCBiUHJvcCA/IC0xIDogMDtcclxuICAgICAgICB9KTsgfSkudG9Db2xsZWN0aW9uKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4OyB9KTtcclxuICAgIH07XHJcbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS50b1ZhbHVlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWYWx1ZShmdW5jdGlvbiAocykgeyByZXR1cm4gX3RoaXMuc3Vic2NyaWJlKHMpOyB9KTtcclxuICAgIH07XHJcbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5ncm91cEJ5ID0gZnVuY3Rpb24gKHByb3ApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50b1ZhbHVlKCkubWFwKGZ1bmN0aW9uIChpdGVtcykge1xyXG4gICAgICAgICAgICB2YXIgcnYgPSB7fTtcclxuICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGxpc3QgPSBydltpdGVtW3Byb3BdXSB8fCAocnZbaXRlbVtwcm9wXV0gPSBbXSk7XHJcbiAgICAgICAgICAgICAgICBsaXN0LnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gcnY7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuZmlyc3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudG9WYWx1ZSgpLm1hcChmdW5jdGlvbiAoYXJyKSB7IHJldHVybiBhcnJbMF07IH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBDb2xsZWN0aW9uO1xyXG59KE9ic2VydmFibGUpKTtcclxuZXhwb3J0IHsgQ29sbGVjdGlvbiB9O1xyXG5Db2xsZWN0aW9uLnByb3RvdHlwZS5fbWFwID0gaW5pdE1hcE1ldGhvZChDb2xsZWN0aW9uKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29sbGVjdGlvbi5qcy5tYXAiLCJpbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xyXG5pbXBvcnQgeyBWYWx1ZSB9IGZyb20gXCIuL3ZhbHVlXCI7XHJcbnZhciBFbWl0dGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoRW1pdHRlciwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEVtaXR0ZXIoaW5pdGlhbFZhbHVlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZnVuY3Rpb24gKG9ic2VydmVyKSB7XHJcbiAgICAgICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSB7XHJcbiAgICAgICAgICAgICAgICB1bnN1YnNjcmliZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuc3Vic2NyaWJlcnMgPSBfdGhpcy5zdWJzY3JpYmVycy5maWx0ZXIoZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBfYVswXTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcyAhPT0gb2JzZXJ2ZXI7XHJcbiAgICAgICAgICAgICAgICB9KTsgfSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgX3RoaXMuc3Vic2NyaWJlcnMucHVzaChbb2JzZXJ2ZXIsIHN1YnNjcmlwdGlvbl0pO1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMuZXJyb3IpXHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlcihudWxsLCBfdGhpcy5lcnJvciwgc3Vic2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIoX3RoaXMudmFsdWUsIHVuZGVmaW5lZCwgc3Vic2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcclxuICAgICAgICB9KSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLnN1YnNjcmliZXJzID0gW107XHJcbiAgICAgICAgX3RoaXMudmFsdWUgPSBpbml0aWFsVmFsdWU7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgRW1pdHRlci5wcm90b3R5cGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy5lcnJvciA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLl9kaXNwYXRjaCgpO1xyXG4gICAgfTtcclxuICAgIEVtaXR0ZXIucHJvdG90eXBlLmRpc3BhdGNoRXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICB0aGlzLmVycm9yID0gZXJyb3I7XHJcbiAgICAgICAgdGhpcy5fZGlzcGF0Y2goKTtcclxuICAgIH07XHJcbiAgICBFbWl0dGVyLnByb3RvdHlwZS5fZGlzcGF0Y2ggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLnN1YnNjcmliZXJzLmZvckVhY2goZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgIHZhciBvYnNlcnZlciA9IF9hWzBdLCBzdWJzY3JpcHRpb24gPSBfYVsxXTtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIG9ic2VydmVyKF90aGlzLnZhbHVlLCBfdGhpcy5lcnJvciwgc3Vic2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlcihudWxsLCBlcnIsIHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRW1pdHRlcjtcclxufShWYWx1ZSkpO1xyXG5leHBvcnQgeyBFbWl0dGVyIH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVtaXR0ZXIuanMubWFwIiwidmFyIHN0YWNrID0gW107XHJcbnZhciBjdXJyZW50RmliZXIgPSBudWxsO1xyXG52YXIgcHJvdmlkZXJzID0gW2Z1bmN0aW9uICgpIHsgcmV0dXJuIGN1cnJlbnRGaWJlcjsgfV07XHJcbmZ1bmN0aW9uIHB1c2hGaWJlcihmaWJlcikge1xyXG4gICAgc3RhY2sucHVzaChjdXJyZW50RmliZXIpO1xyXG4gICAgY3VycmVudEZpYmVyID0gZmliZXI7XHJcbn1cclxuZnVuY3Rpb24gcG9wRmliZXIoKSB7XHJcbiAgICBjdXJyZW50RmliZXIgPSBzdGFjay5wb3AoKTtcclxufVxyXG5leHBvcnQgdmFyIEZpYmVyQ29udGV4dCA9IHtcclxuICAgIGdldCBjdXJyZW50KCkgeyByZXR1cm4gY3VycmVudEZpYmVyOyB9LFxyXG4gICAgLypydW46IGZ1bmN0aW9uIHJlcnVuPFI+KGZpYmVyOiBGaWJlciwgZm46ICgpPT5SKTogUiB8IFByb21pc2U8Uj4ge1xyXG4gICAgICBwdXNoRmliZXIoZmliZXIpO1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZm4oKSk7XHJcbiAgICAgIH0gY2F0Y2ggKHApIHtcclxuICAgICAgICBpZiAocCAmJiB0eXBlb2YgcC50aGVuID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICByZXR1cm4gcC50aGVuKCgpPT5yZXJ1bihmaWJlciwgZm4pKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICBwb3BGaWJlcigpO1xyXG4gICAgICB9XHJcbiAgICB9LCovXHJcbiAgICBhZGRQcm92aWRlcjogZnVuY3Rpb24gKGdldEN1cnJlbnRGaWJlcikge1xyXG4gICAgICAgIHByb3ZpZGVycy5wdXNoKGdldEN1cnJlbnRGaWJlcik7XHJcbiAgICAgICAgc2V0Q3VycmVudEdldHRlckZyb21Qcm92aWRlcnMoKTtcclxuICAgIH0sXHJcbiAgICByZW1vdmVQcm92aWRlcjogZnVuY3Rpb24gKGdldEN1cnJlbnRGaWJlcikge1xyXG4gICAgICAgIHByb3ZpZGVycyA9IHByb3ZpZGVycy5maWx0ZXIoZnVuY3Rpb24gKHApIHsgcmV0dXJuIHAgIT09IGdldEN1cnJlbnRGaWJlcjsgfSk7XHJcbiAgICAgICAgc2V0Q3VycmVudEdldHRlckZyb21Qcm92aWRlcnMoKTtcclxuICAgIH1cclxufTtcclxuZnVuY3Rpb24gc2V0Q3VycmVudEdldHRlckZyb21Qcm92aWRlcnMoKSB7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRmliZXJDb250ZXh0LCBcImN1cnJlbnRcIiwge1xyXG4gICAgICAgIGdldDogcHJvdmlkZXJzLnJlZHVjZShmdW5jdGlvbiAocCwgYykgeyByZXR1cm4gZnVuY3Rpb24gKCkgeyByZXR1cm4gcCgpIHx8IGMoKTsgfTsgfSksXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAoKSB7IHRocm93IG5ldyBFcnJvcihcIlVzZSBGaWJlckNvbnRleHQucHVzaCgpIHRvIGNoYW5nZSBjdXJyZW50IGZpYmVyXCIpOyB9XHJcbiAgICB9KTtcclxufVxyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1maWJlci1jb250ZXh0LmpzLm1hcCIsImV4cG9ydCAqIGZyb20gJy4vb2JzZXJ2YWJsZSc7XHJcbmV4cG9ydCAqIGZyb20gJy4vdmFsdWUnO1xyXG5leHBvcnQgKiBmcm9tICcuL2NvbGxlY3Rpb24nO1xyXG5leHBvcnQgKiBmcm9tICcuL2VtaXR0ZXInO1xyXG5leHBvcnQgKiBmcm9tICcuL2ZpYmVyLWNvbnRleHQnO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gaW5pdE1hcE1ldGhvZChjdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKG1hcHBlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBjdG9yKGZ1bmN0aW9uIChvYnNlcnZlcikgeyByZXR1cm4gX3RoaXMuc3Vic2NyaWJlKGZ1bmN0aW9uICh2YWx1ZSwgZXJyb3IsIHN1YnNjcmlwdGlvbikge1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IpXHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlcihudWxsLCBlcnJvciwgc3Vic2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlcihtYXBwZXIodmFsdWUpLCBlcnJvciwgc3Vic2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlcihudWxsLCBlcnIsIHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7IH0pO1xyXG4gICAgfTtcclxufVxyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYXAuanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIG1peGluKHRhcmdldFByb3RvLCBtaXhpblByb3RvKSB7XHJcbiAgICB2YXIgcHJvcHMgPSBbXTtcclxuICAgIGZvciAodmFyIF9pID0gMjsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgcHJvcHNbX2kgLSAyXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICB9XHJcbiAgICBwcm9wcy5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wKSB7IHJldHVybiB0YXJnZXRQcm90b1twcm9wXSA9IG1peGluUHJvdG9bcHJvcF07IH0pO1xyXG59XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1peGluLmpzLm1hcCIsInZhciBPYnNlcnZhYmxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLy9zdGF0aWMgZ2V0IFtTeW1ib2wuc3BlY2llc10oKSB7IHJldHVybiB0aGlzOyB9XHJcbiAgICBmdW5jdGlvbiBPYnNlcnZhYmxlKF9zdWJzY3JpYmUpIHtcclxuICAgICAgICB0aGlzLl9zdWJzY3JpYmUgPSBfc3Vic2NyaWJlO1xyXG4gICAgfVxyXG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gKG9ic2VydmVyKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N1YnNjcmliZShmdW5jdGlvbiAoaXRlbXMsIGVycm9yLCBzdWJzY3JpcHRpb24pIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIoaXRlbXMsIGVycm9yLCBzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVyKG51bGwsIGVyciwgc3Vic2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBvYnNlcnZlcihudWxsLCBlcnJvciwgeyB1bnN1YnNjcmliZTogZnVuY3Rpb24gKCkgeyB9IH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gT2JzZXJ2YWJsZTtcclxufSgpKTtcclxuZXhwb3J0IHsgT2JzZXJ2YWJsZSB9O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1vYnNlcnZhYmxlLmpzLm1hcCIsImltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XHJcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tIFwiLi9vYnNlcnZhYmxlXCI7XHJcbmltcG9ydCB7IGluaXRNYXBNZXRob2QgfSBmcm9tIFwiLi9tYXBcIjtcclxuaW1wb3J0IHsgQ29sbGVjdGlvbiB9IGZyb20gXCIuL2NvbGxlY3Rpb25cIjtcclxuaW1wb3J0IHsgRmliZXJDb250ZXh0IH0gZnJvbSAnLi9maWJlci1jb250ZXh0JztcclxudmFyIFZhbHVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoVmFsdWUsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBWYWx1ZShzdWJzY3JpYmUpIHtcclxuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgc3Vic2NyaWJlKSB8fCB0aGlzO1xyXG4gICAgfVxyXG4gICAgVmFsdWUuZnJvbSA9IGZ1bmN0aW9uICh4KSB7XHJcbiAgICAgICAgaWYgKHguc3Vic2NyaWJlKVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFZhbHVlKGZ1bmN0aW9uIChzKSB7IHJldHVybiB4LnN1YnNjcmliZShzKTsgfSk7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVmFsdWUuZnJvbSgpIGNhbiBvbmx5IHRha2Ugb2JzZXJ2YWJsZXNcIik7XHJcbiAgICB9O1xyXG4gICAgVmFsdWUucHJvdG90eXBlLnJlYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJlc29sdmVkID0gZmFsc2UsIHJlc3VsdCwgZXJyLCBub3RpZnk7XHJcbiAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IHRoaXMuc3Vic2NyaWJlKGZ1bmN0aW9uICh2YWx1ZSwgZXJyb3IsIHN1YnNjaXB0aW9uKSB7XHJcbiAgICAgICAgICAgIHJlc29sdmVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmVzdWx0ID0gdmFsdWU7XHJcbiAgICAgICAgICAgIGVyciA9IGVycm9yO1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IgJiYgbm90aWZ5KVxyXG4gICAgICAgICAgICAgICAgbm90aWZ5KG51bGwsIGVycm9yLCBzdWJzY2lwdGlvbik7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKG5vdGlmeSlcclxuICAgICAgICAgICAgICAgIG5vdGlmeSh2YWx1ZSwgbnVsbCwgc3Vic2NpcHRpb24pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChyZXNvbHZlZCkge1xyXG4gICAgICAgICAgICB2YXIgY3VycmVudEZpYmVyID0gRmliZXJDb250ZXh0LmN1cnJlbnQ7XHJcbiAgICAgICAgICAgIGlmICghY3VycmVudEZpYmVyKSB7XHJcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgRmliZXIgQ29udGV4dFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgICAgIHRocm93IGVycjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9ucyA9IGN1cnJlbnRGaWJlci5zdWJzY3JpcHRpb25zLCBvYnNlcnZlciA9IGN1cnJlbnRGaWJlci5vYnNlcnZlcjtcclxuICAgICAgICAgICAgc3Vic2NyaXB0aW9ucy5wdXNoKHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgIG5vdGlmeSA9IG9ic2VydmVyO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIG5vdGlmeSA9IGZ1bmN0aW9uICh2YWx1ZSwgZXJyb3IsIHN1YnNjcmlwdGlvbikge1xyXG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHZhbHVlKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBWYWx1ZS5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIF90aGlzLnN1YnNjcmliZShmdW5jdGlvbiAodmFsdWUsIGVycm9yLCBzdWJzY2lwdGlvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBzdWJzY2lwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBWYWx1ZS5wcm90b3R5cGUuZmlsdGVyID0gZnVuY3Rpb24gKGZuKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IFZhbHVlKGZ1bmN0aW9uIChvYnNlcnZlcikgeyByZXR1cm4gX3RoaXMuc3Vic2NyaWJlKGZ1bmN0aW9uICh2YWx1ZSwgZXJyb3IsIHN1YnNjcmlwdGlvbikge1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IpXHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlcihudWxsLCBlcnJvciwgc3Vic2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgZWxzZSBpZiAoZm4odmFsdWUpKVxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIodmFsdWUsIGVycm9yLCBzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgIH0pOyB9KTtcclxuICAgIH07XHJcbiAgICBWYWx1ZS5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKHByZWZpeCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbiAoeCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhwcmVmaXgsIHgpO1xyXG4gICAgICAgICAgICByZXR1cm4geDtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBWYWx1ZS5wcm90b3R5cGUudG9Db2xsZWN0aW9uID0gZnVuY3Rpb24gKG1hcHBlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDb2xsZWN0aW9uKGZ1bmN0aW9uIChzKSB7IHJldHVybiBfdGhpcy5tYXAobWFwcGVyKS5zdWJzY3JpYmUocyk7IH0pO1xyXG4gICAgfTtcclxuICAgIFZhbHVlLnByb3RvdHlwZS5jb21iaW5lTGF0ZXN0ID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IFZhbHVlKGZ1bmN0aW9uIChvYnNlcnZlcikge1xyXG4gICAgICAgICAgICB2YXIgdmFsdWVzID0gW251bGwsIG51bGxdO1xyXG4gICAgICAgICAgICB2YXIgbXlTdWJzY3JpcHRpb24sIG90aGVyU3Vic2NyaXB0aW9uO1xyXG4gICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0ge1xyXG4gICAgICAgICAgICAgICAgdW5zdWJzY3JpYmU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBteVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIG90aGVyU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIG15U3Vic2NyaXB0aW9uID0gX3RoaXMuc3Vic2NyaWJlKGZ1bmN0aW9uIChpdGVtcywgZXJyb3IsIHMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHMudW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlcihudWxsLCBlcnJvciwgc3Vic2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhbHVlc1swXSA9IGl0ZW1zO1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlc1sxXSAhPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlcih2YWx1ZXMsIG51bGwsIHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBvdGhlclN1YnNjcmlwdGlvbiA9IG90aGVyLnN1YnNjcmliZShmdW5jdGlvbiAodmFsdWUsIGVycm9yLCBzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBzLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIobnVsbCwgZXJyb3IsIHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YWx1ZXNbMV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZXNbMF0gIT09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIodmFsdWVzLCBudWxsLCBzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBWYWx1ZS5wcm90b3R5cGUuc3dpdGNoTWFwID0gZnVuY3Rpb24gKG1hcHBlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWYWx1ZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcclxuICAgICAgICAgICAgdmFyIG1hcHBlZFN1YnNjcmlwdGlvbiA9IG51bGw7XHJcbiAgICAgICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBudWxsO1xyXG4gICAgICAgICAgICB2YXIgcmV0dXJuZWRTdWJzY3JpcHRpb24gPSB7XHJcbiAgICAgICAgICAgICAgICB1bnN1YnNjcmliZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXBwZWRTdWJzY3JpcHRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwcGVkU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcHBlZFN1YnNjcmlwdGlvbiA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBzdWJzY3JpcHRpb24gPSBfdGhpcy5zdWJzY3JpYmUoZnVuY3Rpb24gKGl0ZW0sIGVycm9yLCBzKSB7XHJcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24gPSBzO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1hcHBlZFN1YnNjcmlwdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcHBlZFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcHBlZFN1YnNjcmlwdGlvbiA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIobnVsbCwgZXJyb3IsIHJldHVybmVkU3Vic2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYnNlcnZhYmxlT3JWYWx1ZSA9IG1hcHBlcihpdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9ic2VydmFibGVPclZhbHVlICYmIHR5cGVvZiBvYnNlcnZhYmxlT3JWYWx1ZS5zdWJzY3JpYmUgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcHBlZFN1YnNjcmlwdGlvbiA9IG9ic2VydmFibGVPclZhbHVlLnN1YnNjcmliZShmdW5jdGlvbiAodmFsdWUsIGVycm9yLCBzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwcGVkU3Vic2NyaXB0aW9uID0gcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlcih2YWx1ZSwgZXJyb3IsIHJldHVybmVkU3Vic2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIob2JzZXJ2YWJsZU9yVmFsdWUsIG51bGwsIHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyKG51bGwsIGVycm9yLCBzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXR1cm5lZFN1YnNjcmlwdGlvbjtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gVmFsdWU7XHJcbn0oT2JzZXJ2YWJsZSkpO1xyXG5leHBvcnQgeyBWYWx1ZSB9O1xyXG5WYWx1ZS5wcm90b3R5cGUubWFwID0gaW5pdE1hcE1ldGhvZChWYWx1ZSk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZhbHVlLmpzLm1hcCIsImV4cG9ydCAqIGZyb20gJy4vanMvZGlzdC9qcy9vYnNlcnZhYmxlJztcclxuIiwiZXhwb3J0ICogZnJvbSAnLi9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLXJlcG8nO1xyXG4iLCJ2YXIgbWFwID0ge1xuXHRcIi4vZW4tU0dcIjogXCIuL25vZGVfbW9kdWxlcy9tb21lbnQvbG9jYWxlL2VuLVNHLmpzXCIsXG5cdFwiLi9lbi1TRy5qc1wiOiBcIi4vbm9kZV9tb2R1bGVzL21vbWVudC9sb2NhbGUvZW4tU0cuanNcIixcblx0XCIuL2VuLWF1XCI6IFwiLi9ub2RlX21vZHVsZXMvbW9tZW50L2xvY2FsZS9lbi1hdS5qc1wiLFxuXHRcIi4vZW4tYXUuanNcIjogXCIuL25vZGVfbW9kdWxlcy9tb21lbnQvbG9jYWxlL2VuLWF1LmpzXCIsXG5cdFwiLi9lbi1jYVwiOiBcIi4vbm9kZV9tb2R1bGVzL21vbWVudC9sb2NhbGUvZW4tY2EuanNcIixcblx0XCIuL2VuLWNhLmpzXCI6IFwiLi9ub2RlX21vZHVsZXMvbW9tZW50L2xvY2FsZS9lbi1jYS5qc1wiLFxuXHRcIi4vZW4tZ2JcIjogXCIuL25vZGVfbW9kdWxlcy9tb21lbnQvbG9jYWxlL2VuLWdiLmpzXCIsXG5cdFwiLi9lbi1nYi5qc1wiOiBcIi4vbm9kZV9tb2R1bGVzL21vbWVudC9sb2NhbGUvZW4tZ2IuanNcIixcblx0XCIuL2VuLWllXCI6IFwiLi9ub2RlX21vZHVsZXMvbW9tZW50L2xvY2FsZS9lbi1pZS5qc1wiLFxuXHRcIi4vZW4taWUuanNcIjogXCIuL25vZGVfbW9kdWxlcy9tb21lbnQvbG9jYWxlL2VuLWllLmpzXCIsXG5cdFwiLi9lbi1pbFwiOiBcIi4vbm9kZV9tb2R1bGVzL21vbWVudC9sb2NhbGUvZW4taWwuanNcIixcblx0XCIuL2VuLWlsLmpzXCI6IFwiLi9ub2RlX21vZHVsZXMvbW9tZW50L2xvY2FsZS9lbi1pbC5qc1wiLFxuXHRcIi4vZW4tbnpcIjogXCIuL25vZGVfbW9kdWxlcy9tb21lbnQvbG9jYWxlL2VuLW56LmpzXCIsXG5cdFwiLi9lbi1uei5qc1wiOiBcIi4vbm9kZV9tb2R1bGVzL21vbWVudC9sb2NhbGUvZW4tbnouanNcIixcblx0XCIuL3N2XCI6IFwiLi9ub2RlX21vZHVsZXMvbW9tZW50L2xvY2FsZS9zdi5qc1wiLFxuXHRcIi4vc3YuanNcIjogXCIuL25vZGVfbW9kdWxlcy9tb21lbnQvbG9jYWxlL3N2LmpzXCJcbn07XG5cblxuZnVuY3Rpb24gd2VicGFja0NvbnRleHQocmVxKSB7XG5cdHZhciBpZCA9IHdlYnBhY2tDb250ZXh0UmVzb2x2ZShyZXEpO1xuXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhpZCk7XG59XG5mdW5jdGlvbiB3ZWJwYWNrQ29udGV4dFJlc29sdmUocmVxKSB7XG5cdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8obWFwLCByZXEpKSB7XG5cdFx0dmFyIGUgPSBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiICsgcmVxICsgXCInXCIpO1xuXHRcdGUuY29kZSA9ICdNT0RVTEVfTk9UX0ZPVU5EJztcblx0XHR0aHJvdyBlO1xuXHR9XG5cdHJldHVybiBtYXBbcmVxXTtcbn1cbndlYnBhY2tDb250ZXh0LmtleXMgPSBmdW5jdGlvbiB3ZWJwYWNrQ29udGV4dEtleXMoKSB7XG5cdHJldHVybiBPYmplY3Qua2V5cyhtYXApO1xufTtcbndlYnBhY2tDb250ZXh0LnJlc29sdmUgPSB3ZWJwYWNrQ29udGV4dFJlc29sdmU7XG5tb2R1bGUuZXhwb3J0cyA9IHdlYnBhY2tDb250ZXh0O1xud2VicGFja0NvbnRleHQuaWQgPSBcIi4vbm9kZV9tb2R1bGVzL21vbWVudC9sb2NhbGUgc3luYyByZWN1cnNpdmUgc3Z8ZW5cIjsiLCJpbXBvcnQgeyBVc2VyIH0gZnJvbSBcIi4uL2NvbnRyYWN0cy9rZWQtbW9kZWxzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRVc2VyQ2xhaW1zICh1c2VyOiBVc2VyKSB7XHJcbiAgcmV0dXJuIFt7XHJcbiAgICB0eXBlOiBcImVtYWlsXCIsXHJcbiAgICB2YWx1ZTogdXNlci5tYWlsXHJcbiAgfSx7XHJcbiAgICB0eXBlOiBcInNjaG9vbFwiLFxyXG4gICAgdmFsdWU6IHVzZXIuc2Nob29sXHJcbiAgfV0uY29uY2F0KHVzZXIucm9sZXMubWFwKHJvbGUgPT4gKHtcclxuICAgIHR5cGU6IFwicm9sZVwiLFxyXG4gICAgdmFsdWU6IHJvbGVcclxuICB9KSkpLmNvbmNhdCh1c2VyLnJvbGVzLm1hcChyb2xlID0+ICh7XHJcbiAgICB0eXBlOiBcInNjaG9vbFJvbGVcIixcclxuICAgIHZhbHVlOiB1c2VyLnNjaG9vbCArIFwiL1wiICsgcm9sZVxyXG4gIH0pKSk7XHJcbn1cclxuIiwiaW1wb3J0IHsgQWNjZXNzQ2xhaW0sIERvY3VtZW50QWNjZXNzLCBoYXNBY2Nlc3MgYXMgX2hhc0FjY2VzcywgQWNjZXNzUmlnaHQgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XHJcbmltcG9ydCB7IERvY3VtZW50IH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgZ2V0VXNlckNsYWltcyBmcm9tICcuL2dldC11c2VyLWNsYWltcyc7XHJcbmltcG9ydCB7IHBhcnNlUXVlcnlTdHJpbmcsIGdlbmVyYXRlUXVlcnlTdHJpbmcgfSBmcm9tIFwiLi4vdXRpbHMvcXVlcnktc3RyaW5nXCI7XHJcbmltcG9ydCB7IFVzZXIgfSBmcm9tICcuLi9jb250cmFjdHMva2VkLW1vZGVscyc7XHJcbmV4cG9ydCB7IGdldFVzZXJDbGFpbXMgfTtcclxuXHJcbmV4cG9ydCBjb25zdCBJTVBFUlNPTkFUSU9OX1FVRVJZX1BBUkFNUyA9IFtcclxuICBcInVzZXJcIixcclxuICBcInJvbGVcIixcclxuICBcInNjaG9vbFwiLFxyXG4gIFwiZGVidWdcIixcclxuICBcInRlc3RWZXJzaW9uXCIsXHJcbiAgXCJ0ZXN0dmVyc2lvblwiLFxyXG4gIFwiZmVhdHVyZXNcIixcclxuICBcInNjaG9vbFR5cGVcIixcclxuICBcInNjaG9vbHR5cGVcIl07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaGFzQWNjZXNzKHVzZXI6IFVzZXIsIGRvYzogRG9jdW1lbnQsIHJlcXVlc3RlZFJpZ2h0OiBBY2Nlc3NSaWdodCkge1xyXG4gIHZhciBjbGFpbXMgPSBnZXRVc2VyQ2xhaW1zKHVzZXIpO1xyXG4gIGlmIChyZXF1ZXN0ZWRSaWdodCAhPT0gJ1InICYmIHVzZXIudHV0b3JGb3IpIHtcclxuICAgIGNsYWltcyA9IGNsYWltcy5maWx0ZXIoY2xhaW0gPT4gY2xhaW0udHlwZSAhPT0gJ2VtYWlsJyk7XHJcbiAgfVxyXG4gIHZhciByZXN1bHQgPSBfaGFzQWNjZXNzKERvY3VtZW50QWNjZXNzLmZyb21TdHJpbmdBcnJheShkb2MuYWNsIHx8IFtdKSwgY2xhaW1zLCByZXF1ZXN0ZWRSaWdodCk7XHJcbiAgLy9jb25zb2xlLmxvZyhgSGFzICR7cmVxdWVzdGVkUmlnaHR9IGFjY2VzcyB0byAke2RvYy5uYW1lfS8ke2RvYy5pZH06ICR7cmVzdWx0fWApO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBoYXNSZWFkQWNjZXNzKHVzZXI6IFVzZXIsIGRvYzogRG9jdW1lbnQpIHtcclxuICByZXR1cm4gaGFzQWNjZXNzKHVzZXIsIGRvYywgJ1InKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGhhc1dyaXRlQWNjZXNzKHVzZXI6IFVzZXIsIGRvYzogRG9jdW1lbnQpIHtcclxuICByZXR1cm4gaGFzQWNjZXNzKHVzZXIsIGRvYywgJ1cnKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGhhc1NoYXJlQWNjZXNzKHVzZXI6IFVzZXIsIGRvYzogRG9jdW1lbnQpIHtcclxuICByZXR1cm4gaGFzQWNjZXNzKHVzZXIsIGRvYywgJ1MnKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzVGVhY2hlckF0U2Nob29sKHVzZXI6IFVzZXIsIHNjaG9vbDogc3RyaW5nKSB7XHJcbiAgY29uc3QgaXNUZWFjaGVyID0gdXNlci5yb2xlcy5zb21lKHJvbGUgPT4gcm9sZSA9PT0gJ0VNUExPWUVFJyB8fCByb2xlID09PSAnQURNSU4nKTtcclxuICBjb25zdCBiZWxvbmdzVG9TY2hvb2wgPSAoc2Nob29sfHxcIlwiKS50b0xvd2VyQ2FzZSgpID09PSB1c2VyLnNjaG9vbC50b0xvd2VyQ2FzZSgpO1xyXG4gIHJldHVybiAoaXNUZWFjaGVyICYmIGJlbG9uZ3NUb1NjaG9vbCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0FkbWluT3JUZWFjaGVyQXRTY2hvb2wodXNlcjogVXNlciwgc2Nob29sOiBzdHJpbmcpIHtcclxuICByZXR1cm4gdXNlci5yb2xlcy5pbmNsdWRlcyhcIkFETUlOXCIpIHx8IGlzVGVhY2hlckF0U2Nob29sKHVzZXIsIHNjaG9vbCk7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBpbXBlcnNvbmF0aW9uRW52ID0ge1xyXG4gIGFjdEFzIChvcHRpb25zOiB7cm9sZSwgc2Nob29sLCB1cmw/fSkge1xyXG4gICAgY29uc3Qge3JvbGUsIHNjaG9vbCwgdXJsfSA9IG9wdGlvbnM7XHJcbiAgICBjb25zdCBjdXJyZW50UXVlcnkgPSBwYXJzZVF1ZXJ5U3RyaW5nKGxvY2F0aW9uLnNlYXJjaCk7XHJcbiAgICBjb25zdCBuZXdRdWVyeSA9IHsuLi5jdXJyZW50UXVlcnksIHJvbGUsIHNjaG9vbH07XHJcbiAgICBjb25zdCBuZXdRdWVyeVN0cmluZyA9IGdlbmVyYXRlUXVlcnlTdHJpbmcobmV3UXVlcnkpO1xyXG4gICAgaWYgKHVybCkge1xyXG4gICAgICBsb2NhdGlvbi5ocmVmID0gYCR7dXJsfSR7bmV3UXVlcnlTdHJpbmd9YDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGxvY2F0aW9uLmhhc2ggPSBcIiNcIjtcclxuICAgICAgbG9jYXRpb24uc2VhcmNoID0gbmV3UXVlcnlTdHJpbmc7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYWN0QXMob3B0aW9uczoge3JvbGUsIHNjaG9vbCwgdXJsP30pIHtcclxuICBpbXBlcnNvbmF0aW9uRW52LmFjdEFzKG9wdGlvbnMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcHJlc2VydmVJbXBlcnNvbmF0aW9uUXVlcnkgKHVybDogc3RyaW5nLCBxdWVyeToge1tuYW1lOiBzdHJpbmddIDogc3RyaW5nfSkge1xyXG4gIGNvbnN0IGN1cnJlbnRRdWVyeSA9IHBhcnNlUXVlcnlTdHJpbmcobG9jYXRpb24uc2VhcmNoKTtcclxuICBjb25zdCBwcmVzZXJ2ZWRRdWVyeSA9IHt9O1xyXG4gIGZvciAoY29uc3QgcGFyYW0gb2YgSU1QRVJTT05BVElPTl9RVUVSWV9QQVJBTVMpIHtcclxuICAgIGlmIChjdXJyZW50UXVlcnlbcGFyYW1dKSBwcmVzZXJ2ZWRRdWVyeVtwYXJhbV0gPSBjdXJyZW50UXVlcnlbcGFyYW1dO1xyXG4gIH1cclxuICBjb25zdCBuZXdRdWVyeVN0cmluZyA9IGdlbmVyYXRlUXVlcnlTdHJpbmcoey4uLnByZXNlcnZlZFF1ZXJ5LCAuLi5xdWVyeX0pO1xyXG4gIGNvbnN0IHBIYXNoID0gdXJsLmluZGV4T2YoJyMnKTtcclxuICByZXR1cm4gcEhhc2ggPj0gMCA/XHJcbiAgICBgJHt1cmwuc3Vic3RyKDAscEhhc2gpfSR7bmV3UXVlcnlTdHJpbmd9JHt1cmwuc3Vic3RyKHBIYXNoKX1gIDpcclxuICAgIGAke3VybH0ke25ld1F1ZXJ5U3RyaW5nfWA7XHJcbn1cclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5cclxuY29uc3QgSWNvbkRyaXZlID0gKHsgc2l6ZSA9IDMwIH0pID0+IChcclxuICA8c3ZnXHJcbiAgICB3aWR0aD17c2l6ZX1cclxuICAgIHZlcnNpb249XCIxLjFcIlxyXG4gICAgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXHJcbiAgICB4bWxuc1hsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiXHJcbiAgICB2aWV3Qm94PVwiMCAwIDUwOC41MiA1MDguNTJcIlxyXG4gICAgZmlsbD1cIiNmZmZmZmZcIlxyXG4gICAgc3R5bGU9e3t2ZXJ0aWNhbEFsaWduOiBcIm1pZGRsZVwiLCBtYXJnaW5SaWdodDogXCI0cHhcIn19XHJcbiAgPlxyXG4gICAgPHBvbHlnb24gcG9pbnRzPVwiNDg0LjQ5MiwyODQuNTggMzM5LjAyNCwzMi41NzcgMTY5LjQ5NiwzMi41NzcgMzE0Ljk5NiwyODQuNThcIiAvPlxyXG4gICAgPHBvbHlnb24gcG9pbnRzPVwiMTQ1LjQzNyw3NC4yNzYgMCwzMjYuMjc5IDg0Ljc2NCw0NzMuMDUgMjMwLjE2OSwyMjEuMTQzXCIgLz5cclxuICAgIDxwb2x5Z29uIHBvaW50cz1cIjIzNC4zOTYsMzE2LjM2MyAxNDMuMzcxLDQ3NS45NDMgNDIzLjc1Niw0NzUuOTQzIDUwOC41MiwzMTYuMzZcIiAvPlxyXG4gIDwvc3ZnPlxyXG4pO1xyXG5cclxuY29uc3QgSWNvbkNsYXNzcm9vbSA9ICh7IHNpemUgPSAzMCB9KSA9PiAoXHJcbiAgPHN2Z1xyXG4gICAgd2lkdGg9e3NpemV9XHJcbiAgICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcclxuICAgIHhtbG5zWGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCJcclxuICAgIHZpZXdCb3g9XCIwIDAgMjQgMjRcIlxyXG4gICAgdmVyc2lvbj1cIjEuMVwiXHJcbiAgPlxyXG4gICAgPHBhdGggZD1cIk01IDJDMy4zNDggMiAyIDMuMzQ4IDIgNXYxNGMwIDEuNjUyIDEuMzQ4IDMgMyAzaDE0YzEuNjUyIDAgMy0xLjM0OCAzLTNWNWMwLTEuNjUyLTEuMzQ4LTMtMy0zem0wIDJoMTRjLjU1IDAgMSAuNDUgMSAxdjE0YzAgLjU1LS40NSAxLTEgMWgtMXYtMmgtNXYySDVjLS41NSAwLTEtLjQ1LTEtMVY1YzAtLjU1LjQ1LTEgMS0xem03IDJhMS45OTkgMS45OTkgMCAxIDAgMCA0IDEuOTk5IDEuOTk5IDAgMSAwIDAtNHpNNy41IDhhMS41IDEuNSAwIDEgMCAwIDMgMS41IDEuNSAwIDAgMCAwLTN6bTkgMGExLjUgMS41IDAgMSAwIDAgMyAxLjUgMS41IDAgMCAwIDAtM3pNMTIgMTFjLTIuNjYgMC0zLjUgMi41LTMuNSAyLjUgMC0uODQ4LjUtMS41LjUtMS41LS4zLS4xODgtMS4wNy0uMzEzLTEuNDM4LS4zMTMtMS4yMTQgMC0yLjU2MiAxLjE5Mi0yLjU2MiAyVjE2aDE0di0yLjMxM2MwLS44MDgtMS41MTItMi0yLjU2My0yLS4zNjcgMC0xLjEzNi4xMjYtMS40MzcuMzEzIDAgMCAuNS42NTIuNSAxLjUgMCAwLS44NC0yLjUtMy41LTIuNXpcIiAvPlxyXG4gIDwvc3ZnPlxyXG4pO1xyXG5cclxuZXhwb3J0IGNvbnN0IERyaXZlQnV0dG9uID0gKHtsYWJlbD0nR29vZ2xlIERyaXZlJywgYWN0aW9ufSkgPT4gXHJcbiAgPGEgY2xhc3NOYW1lPVwiYnRuXCIgb25DbGljaz17YWN0aW9ufT48SWNvbkRyaXZlIHNpemU9ezE2fSAvPiB7bGFiZWx9PC9hPlxyXG4iLCIvLyBDbGllbnQgaWQgZm9yIEdvb2dsZVdlYkNsaWVudFxyXG5leHBvcnQgY29uc3QgV2ViQ2xpZW50SWQgPSBcIjQyMTU3MjI2MjI2OS11Njh2NWxmNW84c3M1dDY4bDhna3EzcGZhcmg2ZGJrdi5hcHBzLmdvb2dsZXVzZXJjb250ZW50LmNvbVwiO1xyXG5cclxuLy8gR29vZ2xlIERyaXZlIEZpbGUgSWQgdG8ganNvbiBmaWxlIHdpdGggVGFtcGxhdGVzIGZvciBDb3Vyc2UgQnVpbGRlciAoQ2xhc3Nyb29tKVxyXG5leHBvcnQgY29uc3QgVGVtcGxhdGVzRmlsZUlkID0gJ2h0dHBzOi8vZG9jcy5nb29nbGUuY29tL2RvY3VtZW50L2QvMVY3ZXhHNnZOODNTcThrYjZ1ejFCNkRhWkRWTzllTGNKYlA3WEYwdkw0ZFkvZXhwb3J0P2Zvcm1hdD10eHQnO1xyXG4iLCJpbXBvcnQgeyBFRFNDb3Vyc2UsIEVEU0Fzc2Vzc21lbnQsIEVEU1N0dWR5UGxhbiwgRURTU3R1ZGVudEZ1dHVyZUFiaWxpdHksIEVEU1N0dWRlbnQsIEVEU1R1aXRpb25Hcm91cCwgRURTVHVpdGlvblN0dWRlbnQsIEVEU1RlYWNoZXIsIE1vY2tFRFNBY2FkZW1pY1llYXIsIE1vY2tFRFNEYXRlUmFuZ2UgfSBmcm9tICcuLi9jb250cmFjdHMvZWRzJztcclxuaW1wb3J0IHsgUmVzdENsaWVudCB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcclxuaW1wb3J0IHsgSXNvbW9ycGhpY0VudiwgQmVhcmVyUHJvdmlkZXIsIEh0dHBFcnJvciB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcclxuaW1wb3J0IHsgU2Nob29sTW9tZW50LCBnZXRUZXJtU3RhckVuZERhdGUgfSBmcm9tICcuLi91dGlscy9zY2hvb2wtbW9tZW50JztcclxuaW1wb3J0IHsgU2Nob29sVGVybSB9IGZyb20gJy4uL3V0aWxzL3NjaG9vbC10ZXJtJztcclxuaW1wb3J0IHsgZGF0ZVRpbWVSZXZpdmVyLCBMIH0gZnJvbSAnLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgbW9ja0pzb25GaWxlIGZyb20gJy4vbW9jay9tb2NrLWVkcy1kYXRhLmpzb24nO1xyXG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcbmltcG9ydCB7IFN1c3BlbnNlQmFzZWRBUEksIG1ha2VTdXNwZW5zZUFwaSB9IGZyb20gJy4uL3V0aWxzL21ha2Utc3VzcGVuc2UtYXBpJztcclxuXHJcbmV4cG9ydCBjbGFzcyBFZHNDbGllbnQge1xyXG4gIGh0dHA6IFJlc3RDbGllbnQ7XHJcbiAgdXNlckVtYWlsR2V0dGVyOiAoKT0+c3RyaW5nO1xyXG4gIHN1c3BlbnNlOiBTdXNwZW5zZUJhc2VkQVBJPEVkc0NsaWVudD47XHJcblxyXG4gIGNvbnN0cnVjdG9yIChcclxuICAgIGlzb21vcnBoaWM6IElzb21vcnBoaWNFbnYsXHJcbiAgICBiYXNlVXJsOiBzdHJpbmcsXHJcbiAgICBiZWFyZXJQcm92aWRlcjogQmVhcmVyUHJvdmlkZXIsXHJcbiAgICB1c2VyRW1haWxHZXR0ZXI6ICgpPT5zdHJpbmdcclxuICApIHtcclxuICAgIHRoaXMuaHR0cCA9IG5ldyBSZXN0Q2xpZW50IChpc29tb3JwaGljLCBiYXNlVXJsLCB7YmVhcmVyUHJvdmlkZXJ9KTtcclxuICAgIHRoaXMudXNlckVtYWlsR2V0dGVyID0gdXNlckVtYWlsR2V0dGVyO1xyXG4gICAgY29uc3QgaXNBcGlNZXRob2QgPSBtID0+XHJcbiAgICAgIHR5cGVvZiB0aGlzW21dID09PSAnZnVuY3Rpb24nICYmXHJcbiAgICAgIG0gIT09ICdjb25zdHJ1Y3RvcicgJiYgLy8gU2luY2UgbWFrZVN1c3BlbnNlQXBpKCkgd2Fsa3MgcHJvdG90eXBlIGNoYWluXHJcbiAgICAgIG0gIT09ICdwcml2YXRpemluZ0NhY2hlQnVzdCcgJiZcclxuICAgICAgbSAhPT0gJ3VzZXJFbWFpbEdldHRlcicgLy8gTGlzdCBub24tQVBJIG1ldGhvZHMgaGVyZS4uLlxyXG4gICAgICA7XHJcblxyXG4gICAgT2JqZWN0LmtleXMoRWRzQ2xpZW50LnByb3RvdHlwZSkuZm9yRWFjaChtZXRob2QgPT4ge1xyXG4gICAgICBpZiAoaXNBcGlNZXRob2QobWV0aG9kKSkge1xyXG4gICAgICAgIHRoaXNbbWV0aG9kXSA9IGF2b2lkU2ltdWx0YW5vdXNDYWxscyh0aGlzW21ldGhvZF0pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHRoaXMuc3VzcGVuc2UgPSBtYWtlU3VzcGVuc2VBcGkodGhpcywge2lzQXBpTWV0aG9kfSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHByaXZhdGl6aW5nQ2FjaGVCdXN0KCkge1xyXG4gICAgcmV0dXJuIHt1c2VyOiB0aGlzLnVzZXJFbWFpbEdldHRlcigpfTtcclxuICB9XHJcblxyXG4vKipcclxuICAgKiBSZXRyaWV2ZSBhY3RpdmUgY291cnNlcyBmb3IgY3VycmVudCBsb2dnZWQgaW4gc3R1ZGVudC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSBjb3Vyc2VDb2RlIFNob3J0LW5hbWUgb2YgdGhlIGNvdXJzZS4gT3B0aW9uYWwuXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0QWN0aXZlQ291cnNlcyhxOiB7Y291cnNlQ29kZT86IHN0cmluZywgcGVyaW9kTmFtZTogc3RyaW5nfSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcXVlcnk6YW55ID0gdGhpcy5wcml2YXRpemluZ0NhY2hlQnVzdCgpO1xyXG4gICAgICBpZiAocSkge1xyXG4gICAgICAgIGlmIChxLmNvdXJzZUNvZGUpIHF1ZXJ5LkNvdXJzZUNvZGUgPSBxLmNvdXJzZUNvZGU7XHJcbiAgICAgICAgaWYgKHEucGVyaW9kTmFtZSkgcXVlcnkuUGVyaW9kTmFtZSA9IHEucGVyaW9kTmFtZTtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmh0dHAuZ2V0KFwic3R1ZGVudGFjdGl2ZWNvdXJzZXNcIiwgcXVlcnkpO1xyXG4gICAgICBpZiAocmVzLnN0YXR1cyAhPSAyMDApIHRocm93IG5ldyBIdHRwRXJyb3IocmVzLnN0YXR1cywgYXdhaXQgcmVzLnRleHQoKSk7XHJcbiAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xyXG4gICAgICByZXR1cm4ganNvbi5jb3Vyc2VzIGFzIEVEU0NvdXJzZVtdO1xyXG4gICAgfSBjYXRjaCAoZXgpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZyb20gRURTOiBcIiArIGV4KTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKExgS3VuZGUgdHl2w6RyciBpbnRlIGxhZGRhIHRlcm1pbnNtw6VsIGVsbGVyIGF2a2xhcmFkZSBzdGVnIGZyw6VuIEVEUy4gRsO2cnPDtmsgaWdlbiBzZW5hcmUuLi5gKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHJpZXZlIGxhdGVzdCBhc3Nlc3NtZW50cyBmb3IgY3VycmVudCBsb2dnZWQgaW4gdXNlci5cclxuICAgKiBcclxuICAgKiBAcGFyYW0gbGltaXQgT3B0aW9uYWwgbGltaXRcclxuICAgKi9cclxuICBhc3luYyBnZXRMYXRlc3RBc3Nlc3NtZW50cyhsaW1pdD86IG51bWJlcikge1xyXG4gICAgY29uc3QgcXVlcnk6YW55ID0gdGhpcy5wcml2YXRpemluZ0NhY2hlQnVzdCgpO1xyXG4gICAgaWYgKCFpc05hTihsaW1pdCkpIHF1ZXJ5LkNvdW50ID0gbGltaXQ7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmh0dHAuZ2V0KFwic3R1ZGVudGFzc2Vzc21lbnRzXCIsIHF1ZXJ5KTtcclxuICAgIGlmIChyZXMuc3RhdHVzICE9IDIwMCkgdGhyb3cgbmV3IEh0dHBFcnJvcihyZXMuc3RhdHVzLCBhd2FpdCByZXMudGV4dCgpKTtcclxuICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xyXG4gICAgcmV0dXJuIGpzb24uYXNzZXNzbWVudHMgYXMgRURTQXNzZXNzbWVudFtdOyAgICBcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHJpZXZlIHN0dWR5cGxhbnMgZm9yIGN1cnJlbnQgbG9nZ2VkLWluIHVzZXJcclxuICAgKi9cclxuICBhc3luYyBnZXRTdHVkZW50R29hbHMoKSB7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmh0dHAuZ2V0KFwic3R1ZGVudGdvYWxzXCIsIHRoaXMucHJpdmF0aXppbmdDYWNoZUJ1c3QoKSk7XHJcbiAgICBpZiAocmVzLnN0YXR1cyAhPSAyMDApIHRocm93IG5ldyBIdHRwRXJyb3IocmVzLnN0YXR1cywgYXdhaXQgcmVzLnRleHQoKSk7XHJcbiAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcclxuICAgIHJldHVybiBqc29uLnN0dWRlbnRHb2FscyBhcyBFRFNTdHVkeVBsYW5bXTsgICAgXHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRTdHVkZW50RnV0dXJlQWJpbGl0aWVzKCkge1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5odHRwLmdldChcInN0dWRlbnRGdXR1cmVBYmlsaXRpZXNcIiwgdGhpcy5wcml2YXRpemluZ0NhY2hlQnVzdCgpKTtcclxuICAgIGlmIChyZXMuc3RhdHVzICE9IDIwMCkgdGhyb3cgbmV3IEh0dHBFcnJvcihyZXMuc3RhdHVzLCBhd2FpdCByZXMudGV4dCgpKTtcclxuICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xyXG4gICAgcmV0dXJuIGpzb24uc3R1ZGVudEZ1dHVyZUFiaWxpdGllcyBhcyBFRFNTdHVkZW50RnV0dXJlQWJpbGl0eVtdO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0VGVhY2hlclR1dG9yU3R1ZGVudHMoKSB7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmh0dHAuZ2V0KFwidGVhY2hlcnR1dG9yc3R1ZGVudHNcIiwgdGhpcy5wcml2YXRpemluZ0NhY2hlQnVzdCgpKTtcclxuICAgIGlmIChyZXMuc3RhdHVzICE9IDIwMCkgdGhyb3cgbmV3IEh0dHBFcnJvcihyZXMuc3RhdHVzLCBhd2FpdCByZXMudGV4dCgpKTtcclxuICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xyXG4gICAgcmV0dXJuIGpzb24uc3R1ZGVudHMgYXMgRURTU3R1ZGVudFtdO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogZ2V0U2Nob29sVHVpdGlvbkdyb3VwcygpXHJcbiAgICogXHJcbiAgICogUmV0dXJuIHR1aXRpb25ncm91cHMgZm9yIHNjaG9vbFxyXG4gICAqIFxyXG4gICAqIEBwYXJhbSBzY2hvb2xOYW1lIC0gbmFtZSBvZiBzY2hvb2xcclxuICAgKiBAcGFyYW0gY291cnNlQ29kZSAtIFNrb2x2ZXJrZXRzIGNvZGUgZm9yIGNvdXJzZVxyXG4gICAqL1xyXG4gIGFzeW5jIGdldFNjaG9vbFR1aXRpb25Hcm91cHMocToge3NjaG9vbE5hbWU6IHN0cmluZywgY291cnNlQ29kZTogc3RyaW5nfSkge1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5odHRwLmdldChcIlNjaG9vbFR1aXRpb25Hcm91cHNcIiwgey4uLnRoaXMucHJpdmF0aXppbmdDYWNoZUJ1c3QoKSwgLi4ucX0pO1xyXG4gICAgaWYgKHJlcy5zdGF0dXMgIT0gMjAwKSB0aHJvdyBuZXcgSHR0cEVycm9yKHJlcy5zdGF0dXMsIGF3YWl0IHJlcy50ZXh0KCkpO1xyXG4gICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XHJcbiAgICByZXR1cm4ganNvbi5zY2hvb2xUdWl0aW9uR3JvdXBzIGFzIEVEU1R1aXRpb25Hcm91cFtdO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogZ2V0VHVpdGlvbkdyb3VwU3R1ZGVudHMoKVxyXG4gICAqIFxyXG4gICAqIFJldHVybiBuYW1lIGFuZCBtYWlsYWRyZXNzZXMgZm9yIHR1dGl0aW9uZ3JvdXBzIGluIHNjaG9vbHNcclxuICAgKiBcclxuICAgKiBAcGFyYW0gc2Nob29sTmFtZSAtIG5hbWUgb2Ygc2Nob29sXHJcbiAgICogQHBhcmFtIHR1aXRpb25Hcm91cE5hbWUgLSB0dWl0aW9uIGdydW9wIG5hbWUgaW4gRURTXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0VHVpdGlvbkdyb3VwU3R1ZGVudHMocToge3NjaG9vbE5hbWU6IHN0cmluZywgdHVpdGlvbkdyb3VwTmFtZTogc3RyaW5nfSkge1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5odHRwLmdldChcIlR1aXRpb25Hcm91cFN0dWRlbnRzXCIsIHsuLi50aGlzLnByaXZhdGl6aW5nQ2FjaGVCdXN0KCksIC4uLnF9KTtcclxuICAgIGlmIChyZXMuc3RhdHVzICE9IDIwMCkgdGhyb3cgbmV3IEh0dHBFcnJvcihyZXMuc3RhdHVzLCBhd2FpdCByZXMudGV4dCgpKTtcclxuICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xyXG4gICAgcmV0dXJuIGpzb24udHVpdGlvbkdyb3VwU3R1ZGVudHMgYXMgRURTVHVpdGlvblN0dWRlbnRbXTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIGdldFNjaG9vbFRlYWNoZXJzKClcclxuICAgKiBcclxuICAgKiBSZXR1cm4gbmFtZSBhbmQgbWFpbGFkcmVzc2VzIGZvciB0dXRpdGlvbmdyb3VwcyBpbiBzY2hvb2xzXHJcbiAgICogXHJcbiAgICogQHBhcmFtIHNjaG9vbE5hbWUgLSBuYW1lIG9mIHNjaG9vbFxyXG4gICAqL1xyXG4gIGFzeW5jIGdldFNjaG9vbFRlYWNoZXJzKHE6IHtzY2hvb2xOYW1lOiBzdHJpbmd9KSB7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmh0dHAuZ2V0KFwiU2Nob29sVGVhY2hlcnNcIiwgey4uLnRoaXMucHJpdmF0aXppbmdDYWNoZUJ1c3QoKSwgLi4ucX0pO1xyXG4gICAgaWYgKHJlcy5zdGF0dXMgIT0gMjAwKSB0aHJvdyBuZXcgSHR0cEVycm9yKHJlcy5zdGF0dXMsIGF3YWl0IHJlcy50ZXh0KCkpO1xyXG4gICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XHJcbiAgICByZXR1cm4ganNvbi5zY2hvb2xUZWFjaGVycyBhcyBFRFNUZWFjaGVyW107XHJcbiAgfVxyXG4gIC8vIHdlIGFzc3VtZSB0aGF0IHRoZSBFRFMgd2lsbCByZXR1cm4gdGhlIGN1cnJlbnQgYWNhZGVtaWMgeWVhciBkYXRlcyBkZXRlcm1pbmVkIGJ5IHRoZSBjdXJyZW50IGRhdGVcclxuICBhc3luYyBnZXRBY2FkZW1pY1llYXJUZXJtcyhzY2hvb2xMb2NhbGU6IHN0cmluZywgZGF0ZTogRGF0ZSkge1xyXG4gICAgLy8gbW9jayBkYXRhXHJcbiAgICBzd2l0Y2ggKHNjaG9vbExvY2FsZSkge1xyXG4gICAgICBjYXNlICdlbl9zaW4nOlxyXG4gICAgICByZXR1cm4gbW9ja0pzb25GaWxlLlNvdXRoSW5kaWEuZmlsdGVyKGYgPT4gbW9tZW50KGRhdGUpLmlzU2FtZU9yQWZ0ZXIoZi5maXJzdFRlcm0uc3RhcnREYXRlKSAmJiBtb21lbnQoZGF0ZSkuaXNTYW1lT3JCZWZvcmUoZi5zZWNvbmRUZXJtLmVuZERhdGUpKVswXSBhcyBNb2NrRURTQWNhZGVtaWNZZWFyO1xyXG4gICAgICBjYXNlICdlbl9uaW4nOlxyXG4gICAgICByZXR1cm4gbW9ja0pzb25GaWxlLk5vcnRoSW5kaWEuZmlsdGVyKGYgPT4gbW9tZW50KGRhdGUpLmlzU2FtZU9yQWZ0ZXIoZi5maXJzdFRlcm0uc3RhcnREYXRlKSAmJiBtb21lbnQoZGF0ZSkuaXNTYW1lT3JCZWZvcmUoZi5zZWNvbmRUZXJtLmVuZERhdGUpKVswXSBhcyBNb2NrRURTQWNhZGVtaWNZZWFyO1xyXG4gICAgICBjYXNlICdzdic6XHJcbiAgICAgIHtcclxuICAgICAgdmFyIGhvbGlkYXlzID0gW10gYXMgTW9ja0VEU0RhdGVSYW5nZVtdO1xyXG4gICAgICB2YXIgZmlyc3RUZXJtTW9tZW50ID0gZ2V0VGVybVN0YXJFbmREYXRlKGRhdGUsIHRydWUpO1xyXG4gICAgICB2YXIgc2Vjb25kVGVybU1vbWVudCA9IGdldFRlcm1TdGFyRW5kRGF0ZShkYXRlLCBmYWxzZSk7XHJcblxyXG4gICAgICB2YXIgc3RhcnRGaXJzdFRlcm1EYXRlID0gZmlyc3RUZXJtTW9tZW50WzBdO1xyXG4gICAgICB2YXIgc3RhcnRTZWNvbmRUZXJtRGF0ZSA9IHNlY29uZFRlcm1Nb21lbnRbMF07XHJcbiAgICAgIHZhciBlbmRGaXJzdFRlcm1EYXRlID0gZmlyc3RUZXJtTW9tZW50WzFdO1xyXG4gICAgICB2YXIgZW5kU2Vjb25kVGVybURhdGUgPSBzZWNvbmRUZXJtTW9tZW50WzFdO1xyXG5cclxuICAgICAgY29uc3QgZmlyc3RUZXJtID0ge3N0YXJ0RGF0ZTogbmV3IERhdGUoc3RhcnRGaXJzdFRlcm1EYXRlLnllYXIoKSwgc3RhcnRGaXJzdFRlcm1EYXRlLm1vbnRoKCksIHN0YXJ0Rmlyc3RUZXJtRGF0ZS5kYXRlKCkpLnRvRGF0ZVN0cmluZygpLCBlbmREYXRlOiBuZXcgRGF0ZShzdGFydEZpcnN0VGVybURhdGUueWVhcigpLCBlbmRGaXJzdFRlcm1EYXRlLm1vbnRoKCksIGVuZEZpcnN0VGVybURhdGUuZGF0ZSgpKS50b0RhdGVTdHJpbmcoKX07XHJcbiAgICAgIGNvbnN0IHNlY29uZFRlcm0gPSB7c3RhcnREYXRlOiBuZXcgRGF0ZShzdGFydFNlY29uZFRlcm1EYXRlLnllYXIoKSwgc3RhcnRTZWNvbmRUZXJtRGF0ZS5tb250aCgpLCBzdGFydFNlY29uZFRlcm1EYXRlLmRhdGUoKSkudG9EYXRlU3RyaW5nKCksIGVuZERhdGU6IG5ldyBEYXRlKHN0YXJ0U2Vjb25kVGVybURhdGUueWVhcigpLCBlbmRTZWNvbmRUZXJtRGF0ZS5tb250aCgpLCBlbmRTZWNvbmRUZXJtRGF0ZS5kYXRlKCkpLnRvRGF0ZVN0cmluZygpfTtcclxuICAgICAgcmV0dXJuIHtmaXJzdFRlcm0sIHNlY29uZFRlcm0sIGhvbGlkYXlzfTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuXHJcblxyXG5leHBvcnQgY2xhc3MgRURTUGVyaW9kIHtcclxuICBwZXJpb2Q6IHN0cmluZztcclxuICB0ZXJtOiAnQVQnIHwgJ1NUJztcclxuICB5ZWFyOiBudW1iZXI7XHJcbiAgY29uc3RydWN0b3IgKHBlcmlvZFN0cmluZ09yU2Nob29sVGVybTogc3RyaW5nIHwgU2Nob29sTW9tZW50KSB7XHJcbiAgICBpZiAodHlwZW9mIHBlcmlvZFN0cmluZ09yU2Nob29sVGVybSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgdGhpcy5wZXJpb2QgPSBwZXJpb2RTdHJpbmdPclNjaG9vbFRlcm07XHJcbiAgICAgIHRoaXMudGVybSA9IHRoaXMucGVyaW9kLnN0YXJ0c1dpdGgoJ0hUJykgPyAnQVQnIDogJ1NUJztcclxuICAgICAgdGhpcy55ZWFyID0gcGFyc2VJbnQodGhpcy5wZXJpb2Quc3Vic3RyKDIpKTtcclxuICAgICAgaWYgKGlzTmFOKHRoaXMueWVhcikpIHRocm93IG5ldyBFcnJvciAoYEludmFsaWQgcGVyaW9kOiAke3RoaXMucGVyaW9kfWApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3Qgc2Nob29sVGVybSA9IG5ldyBTY2hvb2xUZXJtKHBlcmlvZFN0cmluZ09yU2Nob29sVGVybSk7XHJcbiAgICAgIHRoaXMucGVyaW9kID0gKHNjaG9vbFRlcm0udGVybSA9PT0gJ0FUJyA/IFwiSFRcIiA6IFwiVlRcIikgKyBzY2hvb2xUZXJtLnllYXI7XHJcbiAgICAgIHRoaXMudGVybSA9IHNjaG9vbFRlcm0udGVybTtcclxuICAgICAgdGhpcy55ZWFyID0gc2Nob29sVGVybS55ZWFyO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0IHNjaG9vbFRlcm0gKCkgOiBTY2hvb2xUZXJtIHtcclxuICAgIHJldHVybiBuZXcgU2Nob29sVGVybSh7XHJcbiAgICAgIGFjYWRlbWljWWVhcjogdGhpcy50ZXJtID09PSAnQVQnID9cclxuICAgICAgICBgJHt0aGlzLnllYXJ9LyR7dGhpcy55ZWFyICsgMX1gIDpcclxuICAgICAgICBgJHt0aGlzLnllYXItMX0vJHt0aGlzLnllYXJ9YCxcclxuICAgICAgdGVybTogdGhpcy50ZXJtXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHRvU3RyaW5nKCkge1xyXG4gICAgcmV0dXJuIHRoaXMucGVyaW9kO1xyXG4gIH1cclxuXHJcbiAgdmFsdWVPZigpIHtcclxuICAgIHJldHVybiB0aGlzLnllYXIgKyBcIjpcIiArICh0aGlzLnRlcm0gPT09ICdTVCcgPyBcIjFcIiA6IFwiMlwiKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUpzb25EYXRlX29sZCAoanNvbkRhdGVTdHI6IHN0cmluZykgOiBEYXRlIHtcclxuICBjb25zdCBkYXRlID0gZGF0ZVRpbWVSZXZpdmVyKFwiXCIsIGpzb25EYXRlU3RyKTtcclxuICBpZiAoIShkYXRlIGluc3RhbmNlb2YgRGF0ZSkpIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgSlNPTiBkYXRlIHN0cmluZzogXCIgKyBqc29uRGF0ZVN0cik7XHJcbiAgcmV0dXJuIGRhdGU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGF2b2lkU2ltdWx0YW5vdXNDYWxsczxULEE+KG1ldGhvZDogKC4uLmFyZ3M6QVtdKT0+UHJvbWlzZTxUPikgOiAoLi4uYXJnczpBW10pPT5Qcm9taXNlPFQ+IHtcclxuICBsZXQgb25nb2luZ1Byb21pc2VzOiB7W2FyZ3NKc29uOiBzdHJpbmddOiBQcm9taXNlPFQ+fSA9IHt9O1xyXG4gIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgIGNvbnN0IGFyZ3NKc29uID0gSlNPTi5zdHJpbmdpZnkoW10uc2xpY2UuY2FsbChhcmd1bWVudHMpKTtcclxuICAgIGlmICghb25nb2luZ1Byb21pc2VzW2FyZ3NKc29uXSkge1xyXG4gICAgICBvbmdvaW5nUHJvbWlzZXNbYXJnc0pzb25dID0gbWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykudGhlbihyZXN1bHQ9PntcclxuICAgICAgICBkZWxldGUgb25nb2luZ1Byb21pc2VzW2FyZ3NKc29uXTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBvbmdvaW5nUHJvbWlzZXNbYXJnc0pzb25dO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBCZWFyZXJQcm92aWRlciB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcclxuaW1wb3J0IHsgZW52IH0gZnJvbSAnLi4vZ2xvYmFscy9LRUQuZW52JztcclxuXHJcbmV4cG9ydCBjbGFzcyBHb29nbGVDbGllbnQge1xyXG4gIHRva2VuRXhwaXJhdGlvbjogRGF0ZTtcclxuICBnb29nbGVUb2tlblByb3ZpZGVyOiBCZWFyZXJQcm92aWRlcjtcclxuICBkaXNjb3ZlcnlEb2NzOiBzdHJpbmdbXTtcclxuICB0b2tlbjogc3RyaW5nO1xyXG5cclxuICBjb25zdHJ1Y3RvcihkaXNjb3ZlcnlEb2NzOiBzdHJpbmcpIHtcclxuICAgIHRoaXMuZ29vZ2xlVG9rZW5Qcm92aWRlciA9IGVudi5nb29nbGVUb2tlblByb3ZpZGVyO1xyXG4gICAgdGhpcy5kaXNjb3ZlcnlEb2NzID0gW107XHJcbiAgICB0aGlzLmRpc2NvdmVyeURvY3MucHVzaChkaXNjb3ZlcnlEb2NzKTtcclxuICB9XHJcblxyXG4gIHNldEJlYXJlclByb3ZpZGVyKGdvb2dsZVRva2VuUHJvdmlkZXI6IEJlYXJlclByb3ZpZGVyKSB7XHJcbiAgICB0aGlzLmdvb2dsZVRva2VuUHJvdmlkZXIgPSBnb29nbGVUb2tlblByb3ZpZGVyO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZW5zdXJlSW5pdGVkKCkge1xyXG4gICAgLy8gTG9hZCBHQVBJXHJcbiAgICBpZiAodHlwZW9mIGdhcGkgPT09ICd1bmRlZmluZWQnKSBhd2FpdCB0aGlzLmxvYWRHYXBpKCk7XHJcblxyXG4gICAgLy8gU2V0IHRva2VuXHJcbiAgICBpZiAoIXRoaXMudG9rZW5FeHBpcmF0aW9uIHx8IHRoaXMudG9rZW5FeHBpcmF0aW9uIDwgbmV3IERhdGUoKSkge1xyXG4gICAgICBjb25zdCB0b2tlblJlc3VsdCA9IGF3YWl0IHRoaXMuZ29vZ2xlVG9rZW5Qcm92aWRlci5nZXRCZWFyZXIoKTtcclxuICAgICAgdGhpcy50b2tlbkV4cGlyYXRpb24gPSBuZXcgRGF0ZSh0b2tlblJlc3VsdC5leHBpcmVzKTtcclxuICAgICAgdGhpcy50b2tlbiA9IHRva2VuUmVzdWx0LnRva2VuO1xyXG4gICAgICBnYXBpLmNsaWVudC5zZXRUb2tlbih7XHJcbiAgICAgICAgYWNjZXNzX3Rva2VuOiB0b2tlblJlc3VsdC50b2tlblxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gTG9hZCBhbGwgZGlzY292eWVyRG9jc1xyXG4gICAgYXdhaXQgZ2FwaS5jbGllbnQuaW5pdCh7XHJcbiAgICAgIGRpc2NvdmVyeURvY3M6IHRoaXMuZGlzY292ZXJ5RG9jc1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBsb2FkR2FwaSgpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICBpZiAodHlwZW9mIGdhcGkgIT09ICd1bmRlZmluZWQnKSByZXR1cm4gcmVzb2x2ZSgpO1xyXG4gICAgICBjb25zdCBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuICAgICAgc2NyaXB0LnNyYyA9IFwiaHR0cHM6Ly9hcGlzLmdvb2dsZS5jb20vanMvY2xpZW50LmpzP29ubG9hZD1nYWFwaV9sb2FkZWRcIjtcclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdLmFwcGVuZENoaWxkKHNjcmlwdCk7XHJcbiAgICAgICh3aW5kb3cgYXMgYW55KS5nYWFwaV9sb2FkZWQgPSByZXNvbHZlO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IEdvb2dsZUNsaWVudCB9IGZyb20gJy4vZ29vZ2xlLWNsaWVudCc7XHJcblxyXG5pbnRlcmZhY2UgZG93bmxvYWRBcmdzIHtcclxuICBmaWxlOiBzZWxlY3RlZEZpbGU7XHJcbiAgbGltaXRTaXplPzogbnVtYmVyO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBzZWxlY3RlZEZpbGUge1xyXG4gIGZpbGVJZDogc3RyaW5nO1xyXG4gIHVybDogc3RyaW5nO1xyXG4gIG1pbWVUeXBlOiBzdHJpbmc7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIG1vZGlmaWVkVGltZTogbnVtYmVyO1xyXG4gIGNhbkV4cG9ydD86IGJvb2xlYW47XHJcbiAgaWNvblVybD86IHN0cmluZztcclxuICB0aHVtYm5haWxVcmw/OiBzdHJpbmc7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgY2xhc3MgR29vZ2xlRHJpdmUgZXh0ZW5kcyBHb29nbGVDbGllbnQge1xyXG5cclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHN1cGVyKCdodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9kaXNjb3ZlcnkvdjEvYXBpcy9kcml2ZS92My9yZXN0Jyk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRGaWxlKGZpbGVJZCkge1xyXG4gICAgYXdhaXQgdGhpcy5lbnN1cmVJbml0ZWQoKTtcclxuICAgIHJldHVybiBnYXBpLmNsaWVudC5kcml2ZS5maWxlcy5nZXQoPGFueT57XHJcbiAgICAgIGZpbGVJZDogZmlsZUlkLFxyXG4gICAgICBzdXBwb3J0c0FsbERyaXZlczogdHJ1ZSxcclxuICAgICAgZmllbGRzOiAnaWQsbmFtZSxtaW1lVHlwZSx3ZWJWaWV3TGluayxpY29uTGluayxtb2RpZmllZFRpbWUsdGh1bWJuYWlsTGluaydcclxuICAgIH0pLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgIGlmIChyZXNwLnJlc3VsdC5uYW1lKSB7XHJcbiAgICAgICAgdmFyIGZpbGUgPSByZXNwLnJlc3VsdDtcclxuICAgICAgICByZXR1cm4ge2ZpbGVJZDogZmlsZS5pZCwgdXJsOiBmaWxlLndlYlZpZXdMaW5rLCBtaW1lVHlwZTogZmlsZS5taW1lVHlwZSwgbmFtZTogZmlsZS5uYW1lLCBtb2RpaWZpZWRUaW1lOiBmaWxlLm1vZGlmaWVkVGltZSwgaWNvblVybDogZmlsZS5pY29uTGluaywgdGh1bWJuYWlsVXJsOiBmaWxlLnRodW1ibmFpbExpbmt9O1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogdXBkYXRlUGVybWlzc2lvbnMoKVxyXG4gICAqIFxyXG4gICAqIEBwYXJhbSBmaWxlSWQgXHJcbiAgICogXHJcbiAgICogTWFrZSB0aGUgZmlsZSBhY2Nlc3NpYmxlIHRvIGFsbCBpbiB0aGUgZG9tYWluLiBTaG91bGQgYmUgdW5uZWNlc3NhcnkgYnV0IHNvbWVcclxuICAgKiB0ZWFjaGVycyBoYXZlIGNoYW5nZWQgdGhlaXIgZGVmYXVsdCBwZXJtaXNzaW9ucy5cclxuICAgKiBXZSBkb24ndCBjYXJlIHJpZ2h0IG5vdyBpZiB0aGlzIGZhaWxzIGJlY2F1c2UgdGhpcyBpcyBqdXN0IGFuIGV4dHJhIHByZWNhdXRpb24uXHJcbiAgICogSWYgd2UgcGxhbiBvbiB1c2luZyB0aGlzIG9uIG90aGVyIGRvbWFpbnMgdGhlIGRvbWFpbi1hdHRyaWJ1dGUgbmVlZHMgdG8gYmUgZHluYW1pYy5cclxuICAgKiBcclxuICAgKi9cclxuICBhc3luYyB1cGRhdGVQZXJtaXNzaW9ucyhmaWxlSWQpIHtcclxuICAgIGNvbnNvbGUubG9nKCd1cGRhdGluZyBwZXJtaXNzaW9ucycpXHJcbiAgICBhd2FpdCB0aGlzLmVuc3VyZUluaXRlZCgpO1xyXG4gICAgZ2FwaS5jbGllbnQuZHJpdmUucGVybWlzc2lvbnMuY3JlYXRlKDxhbnk+e1xyXG4gICAgICBmaWxlSWQ6IGZpbGVJZCxcclxuICAgICAgc2VuZE5vdGlmaWNhdGlvbkVtYWlsOiBmYWxzZSxcclxuICAgICAgcm9sZTogJ3JlYWRlcicsXHJcbiAgICAgIHR5cGU6ICdhbnlvbmUnLCAvLyBvciBzaG91bGQgd2UgbGltaXQgdG8gZG9tYWluIChlcnJvciBpZiBpbiBLZWRzY2hvb2xzLmNvbSlcclxuICAgICAgLy8gdHlwZTogJ2RvbWFpbicsIFxyXG4gICAgICAvLyBkb21haW46ICdrdW5za2Fwc3Nrb2xhbi5zZSdcclxuICAgICAgc3VwcG9ydHNBbGxEcml2ZXM6IHRydWVcclxuICAgIH0pLnRoZW4ocmVzcCA9PiBjb25zb2xlLmxvZyhyZXNwKSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBjcmVhdGVGb2xkZXIobmFtZSwgcGFyZW50KcKge1xyXG4gICAgY29uc29sZS5sb2coJ0NyZWF0aW5nIGZvbGRlciAnICsgbmFtZSk7XHJcbiAgICBhd2FpdCB0aGlzLmVuc3VyZUluaXRlZCgpO1xyXG4gICAgcmV0dXJuIGdhcGkuY2xpZW50LmRyaXZlLmZpbGVzLmNyZWF0ZSg8YW55PntcclxuICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgbWltZVR5cGU6ICdhcHBsaWNhdGlvbi92bmQuZ29vZ2xlLWFwcHMuZm9sZGVyJyxcclxuICAgICAgcGFyZW50czogW3BhcmVudF1cclxuICAgIH0pLnRoZW4ocmVzcCA9PiByZXNwLnJlc3VsdCk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRJZEZvckZvbGRlclBhdGgocGF0aDogc3RyaW5nW10pIHtcclxuICAgIGNvbnNvbGUubG9nKCdHZXR0aW5nIGlkIGZvciAnICsgcGF0aC5qb2luKCcvJykpO1xyXG4gICAgYXdhaXQgdGhpcy5lbnN1cmVJbml0ZWQoKTtcclxuICAgIGxldCBwYXJlbnQgPSAncm9vdCc7XHJcbiAgICBmb3IgKHZhciBmb2xkZXIgb2YgcGF0aCkge1xyXG4gICAgICBjb25zdCBmb2xkZXJJZCA9IGF3YWl0IHRoaXMuZ2V0SWRGb3JGb2xkZXIoZm9sZGVyLCBwYXJlbnQpO1xyXG4gICAgICBpZiAoZm9sZGVySWQpIHtcclxuICAgICAgICBwYXJlbnQgPSBmb2xkZXJJZDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zdCBuZXdGb2xkZXIgPSBhd2FpdCB0aGlzLmNyZWF0ZUZvbGRlcihmb2xkZXIsIHBhcmVudCk7XHJcbiAgICAgICAgcGFyZW50ID0gbmV3Rm9sZGVyLmlkO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcGFyZW50O1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0SWRGb3JGb2xkZXIobmFtZTogc3RyaW5nLCBwYXJlbnQ6IHN0cmluZykge1xyXG4gICAgY29uc29sZS5sb2coJ0dldHRpbmcgaWQgZm9yICcgKyBuYW1lKTtcclxuICAgIGF3YWl0IHRoaXMuZW5zdXJlSW5pdGVkKCk7XHJcbiAgICByZXR1cm4gZ2FwaS5jbGllbnQuZHJpdmUuZmlsZXMubGlzdCh7XHJcbiAgICAgIGNvcnBvcmE6ICd1c2VyJyxcclxuICAgICAgcTogXCInXCIrcGFyZW50K1wiJyBpbiBwYXJlbnRzIGFuZCBtaW1lVHlwZSA9ICdhcHBsaWNhdGlvbi92bmQuZ29vZ2xlLWFwcHMuZm9sZGVyJyBhbmQgbmFtZSA9ICdcIituYW1lK1wiJ1wiXHJcbiAgICB9KS50aGVuKHJlc3AgPT4ge1xyXG4gICAgICBpZiAocmVzcC5yZXN1bHQuZmlsZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlc3AucmVzdWx0LmZpbGVzWzBdLmlkO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBjb3B5RmlsZShmaWxlLCBkZXN0aW5hdGlvbikge1xyXG4gICAgY29uc29sZS5sb2coJ0NvcHlpbmcgZmlsZTogJyArIGZpbGUubmFtZSk7XHJcbiAgICBhd2FpdCB0aGlzLmVuc3VyZUluaXRlZCgpO1xyXG4gICAgaWYgKGRlc3RpbmF0aW9uKSB7XHJcbiAgICAgIGNvbnN0IHBhcmVudCA9IGF3YWl0IHRoaXMuZ2V0SWRGb3JGb2xkZXJQYXRoKGRlc3RpbmF0aW9uKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IHBhcmVudCA9ICdyb290JztcclxuICAgIH1cclxuICAgIHJldHVybiBnYXBpLmNsaWVudC5kcml2ZS5maWxlcy5jb3B5KDxhbnk+e1xyXG4gICAgICBmaWxlSWQ6IGZpbGUuaWQsXHJcbiAgICAgIHN1cHBvcnRzQWxsRHJpdmVzOiB0cnVlLFxyXG4gICAgICBwYXJlbnRzOiBbcGFyZW50XSxcclxuICAgICAgbmFtZTogZmlsZS5uYW1lLFxyXG4gICAgICBmaWVsZHM6ICdpZCxuYW1lLG1pbWVUeXBlLHdlYlZpZXdMaW5rLGljb25MaW5rLG1vZGlmaWVkVGltZSx0aHVtYm5haWxMaW5rJ1xyXG4gICAgfSkudGhlbihyZXNwID0+IHJlc3AucmVzdWx0KTtcclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBkb3dubG9hZEZpbGUoKVxyXG4gICAqIEBwYXJhbSBmaWxlIFxyXG4gICAqIFxyXG4gICAqIFdoZW4gQ2xhc3Nyb29tIGhhcyBiZWVuIGludGVncmF0ZWQgd2Ugd2lsbCB3YW50IHRvIGhhbmRsZSBvbmx5IHRoZSBmaWxlSWQ6c1xyXG4gICAqIHNvIHRoYXQgZWRpdGluZyBjYXBhYmlsaXRpZXMgYXJlIHBlc2VydmVkIG9uIHRoZSBmaWxlIChpZiBpdCBpcyBhIGdvb2dsZS1hcHBzIGZpbGUpXHJcbiAgICogUmlnaHQgbm93IGdvb2dsZS1hcHBzIGZpbGVzIGFyZSBjb252ZXJ0ZWQgdG8gcGRmIGFuZCBwYXNzZWQgaW50byB0aGUgY3VycmVudCBmbG93LlxyXG4gICAqIFxyXG4gICAqIFRPRE86IGVycm9yIGhhbmRsaW5nXHJcbiAgICovXHJcblxyXG4gIGFzeW5jIGRvd25sb2FkRmlsZSh7ZmlsZSwgbGltaXRTaXplfTpkb3dubG9hZEFyZ3MpIHtcclxuICAgIC8vIEEgZmlsZSB0aGF0IGNhbiBiZSBleHBvcnRlZCB0byBQREYgaXMgcmV0cmVpdmVkIHdpdGhcclxuICAgIC8vIGZpbGUuZXhwb3J0KCkgZnJvbSBEcml2ZSwgY29udmVydGVkIHRvIGEgYmxvYiBhbmQgdGhlblxyXG4gICAgLy8gdG8gYSBGaWxlLlxyXG4gICAgLy8gQSBmaWxlIHRoYXQgY2FuIG5vdCBiZSBleHBvcnRlZCB0byBQREYgaXMgcmV0cmlldmVkXHJcbiAgICAvLyB0aHJvdWdoIFhIUiBhbmQgY29udmVydGVkIHRvIGEgRmlsZS5cclxuXHJcbiAgICAvLyBJZiB3ZSBkb24ndCBuZWVkIHRvIGhhbmRsZSB0aGUgcGh5c2ljYWwgZmlsZXMgb24gdGhlIGNsaWVudFxyXG4gICAgLy8gd2UgY291bGQgc2F2ZSBvbmx5IHRoZSBmaWxlSWQ6cyBhbmQgZGlzcGxheSBmaWxlbmFtZSBhbmQgbWltZVR5cGVcclxuICAgIC8vIGZvciB0aGUgZmlsZSBpbiBvdXIgbGlzdGluZ3MuIFdoZW4vaWYgd2UgdXNlIEdvb2dsZSBDbGFzc3Jvb20gZm9yXHJcbiAgICAvLyBvdXIgdGFzay1oYW5kbGluZyB0aGF0IHdvdWxkIGJlIHRoZSBwcmVmZXJyZWQgYXBwcm9hY2ggdG8ga2VlcFxyXG4gICAgLy8gdGhlIGZpbGUgYXMgYW4gZWRpdGFibGUgR29vZ2xlIGZpbGVcclxuXHJcbiAgICAvLyBJbml0IHRoZSBkcml2ZS1hcGkgKG9ubHkgbmVlZGVkIGZvciBkb3dubG9hZCBzbyBub3QgbG9hZGVkIGluaXRpYWxseSlcclxuICAgIGF3YWl0IHRoaXMuZW5zdXJlSW5pdGVkKCk7XHJcblxyXG4gICAgaWYgKGZpbGUuY2FuRXhwb3J0KSB7XHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxGaWxlPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgZ2FwaS5jbGllbnQuZHJpdmUuZmlsZXMuZXhwb3J0KHtcclxuICAgICAgICAgIGZpbGVJZDogZmlsZS5maWxlSWQsXHJcbiAgICAgICAgICBtaW1lVHlwZTogJ2FwcGxpY2F0aW9uL3BkZid9XHJcbiAgICAgICAgKS50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgY29uc3QgbGVuID0gcmVzcC5ib2R5Lmxlbmd0aDtcclxuICAgICAgICAgIGNvbnN0IGRhdGEgPSBuZXcgVWludDhBcnJheShuZXcgQXJyYXlCdWZmZXIobGVuKSk7XHJcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGRhdGFbaV0gPSByZXNwLmJvZHkuY2hhckNvZGVBdChpKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbZGF0YV0sIHt0eXBlOiAnYXBwbGljYXRpb24vcGRmJ30pO1xyXG4gICAgICAgICAgY29uc3QgZmlsZW5hbWUgPSBmaWxlLm5hbWUrJy5wZGYnO1xyXG4gICAgICAgICAgcmVzb2x2ZShuZXcgRmlsZShbYmxvYl0sIGZpbGVuYW1lLCB7dHlwZTogJ2FwcGxpY2F0aW9uL3BkZicsIGxhc3RNb2RpZmllZDogZmlsZS5tb2RpZmllZFRpbWV9KSk7XHJcbiAgICAgICAgfSlcclxuICAgICAgfSk7ICBcclxuICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAvLyBhIGZpbGUgdGhhdCBpc24ndCBhIGdvb2dsZS1hcHBzIGZpbGUgbmVlZHMgdG8gYmUgZmV0Y2hlZCB2aWEgWEhSXHJcbiAgICAgIC8vIGJlY2F1c2UgcmVzcG9uc2VUeXBlIGFuZCA/YWx0PW1lZGlhIG5lZWRzIHRvIGJlIHNldCB0byBhdm9pZCBDT1JTXHJcbiAgICAgIGNvbnN0IHhockRvd25sb2FkID0gKGZpbGU6c2VsZWN0ZWRGaWxlKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPEZpbGU+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgIGNvbnN0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgICAgeGhyLm9wZW4oXCJHRVRcIiwgXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9kcml2ZS92My9maWxlcy9cIitmaWxlLmZpbGVJZCsnP2FsdD1tZWRpYScsIHRydWUpO1xyXG4gICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0F1dGhvcml6YXRpb24nLCdCZWFyZXIgJyt0aGlzLnRva2VuKTtcclxuICAgICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYmxvYidcclxuICAgICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICByZXNvbHZlKG5ldyBGaWxlKFt4aHIucmVzcG9uc2VdLCBmaWxlLm5hbWUsIHt0eXBlOiBmaWxlLm1pbWVUeXBlLCBsYXN0TW9kaWZpZWQ6IGZpbGUubW9kaWZpZWRUaW1lfSkpO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIHhoci5zZW5kKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxGaWxlPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgaWYgKGxpbWl0U2l6ZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICBnYXBpLmNsaWVudC5kcml2ZS5maWxlcy5nZXQoe1xyXG4gICAgICAgICAgICBmaWxlSWQ6IGZpbGUuZmlsZUlkLFxyXG4gICAgICAgICAgICBmaWVsZHM6ICdzaXplJ1xyXG4gICAgICAgICAgfSkudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgc2l6ZSA9IE51bWJlcihyZXNwLnJlc3VsdC5zaXplKTtcclxuICAgICAgICAgICAgaWYgKHNpemUgPiBsaW1pdFNpemUqMTAyNCoxMDI0KSB7XHJcbiAgICAgICAgICAgICAgcmVqZWN0KCdHb29nbGVQaWNrZXJFcnJvcjogRmlsc2l6ZSBpcyB0b28gbGFhcmdlJylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIHhockRvd25sb2FkKGZpbGUpLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHhockRvd25sb2FkKGZpbGUpLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICAgIHJlc29sdmUocmVzcCk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgR29vZ2xlV2ViQ2xpZW50IH0gZnJvbSAnLi9nb29nbGUtd2ViY2xpZW50JztcclxuaW1wb3J0IHsgR29vZ2xlRHJpdmUsIHNlbGVjdGVkRmlsZSB9IGZyb20gJy4vZ29vZ2xlLWRyaXZlJztcclxuXHJcbmludGVyZmFjZSBvcHRpb25zIHtcclxuICB1cGxvYWQ/OiBib29sZWFuO1xyXG4gIG11bHRpcGxlPzogYm9vbGVhbjtcclxuICBsaW1pdFR5cGU/OiBmYWxzZSB8ICdnb29nbGUtYXBwcycgfMKgJ3BkZic7XHJcbn1cclxuXHJcbmNvbnN0IG1pbWVUeXBlQ29sbGVjdGlvbnMgPSB7XHJcbiAgJ2dvb2dsZS1hcHBzJyA6ICdhcHBsaWNhdGlvbi92bmQuZ29vZ2xlLWFwcHMuZG9jdW1lbnQsYXBwbGljYXRpb24vdm5kLmdvb2dsZS1hcHBzLnByZXNlbnRhdGlvbixhcHBsaWNhdGlvbi92bmQuZ29vZ2xlLWFwcHMuc3ByZWFkc2hlZXQnLFxyXG4gICdwZGYnOiAnYXBwbGljYXRpb24vcGRmJ1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEdvb2dsZVBpY2tlclxyXG4gKiBJbmNsdWRlcyB0aGUgaW5pdGlhdGlvbiBvZiB0aGUgY29ycmVjdCBhcGk6cy5cclxuICogQ2VydGFpbiBvcHRpb25zIGNhbiBiZSBwYXNzZWQgdG8gdGhlIGNvbnN0cnVjdG9yXHJcbiAqIGFuZCB0aGVyZSBjb3VsZCBiZSBvdGhlcnMgd29ydGggaW5jb3Jwb3JhdGluZyAoaS5lLiBUZWFtIERyaXZlLXN1cHBvcnQpLlxyXG4gKiBcclxuICogUmlnaHQgbm93IHR3byBvcHRpb25zIGFyZSBoYW5kbGVkOlxyXG4gKiAtIHVwbG9hZDogaWYgYSB1c2VyIGNhbiB1cGxvYWQgdG8gRHJpdmUgaW4gdGhlIEdvb2dsZSBEcml2ZSBQaWNrZXJcclxuICogLSBtdWx0aXBsZTogaWYgYSB1c2VyIGNhbiBzZWxlY3QgbXVsdGlwbGUgZmlsZXNcclxuICogLSBsaW1pdFR5cGU6IGFjdGl2ZSBsaW1pdHMgdG8gY2VydGFpbiBtaW1lVHlwZXNDb2xsZWN0aW9uc1xyXG4gKiBcclxuICogV2UgY291bGQgcHJvYmFibHkgc3BsaXQgdGhpcyBpbnRvIGdvb2dsZS1waWNrZXIgYW5kIGdvb2dsZS1kcml2ZSB3aGVyZSBnb29nbGUtZHJpdmVcclxuICogaGFuZGxlcyB0aGUgZXhwbGljaXQgY2FsbHMgdG8gdGhlIGdvb2dsZSBkcml2ZSBhcGkuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgR29vZ2xlUGlja2VyIGV4dGVuZHMgR29vZ2xlV2ViQ2xpZW50IHtcclxuICBwaWNrZXI6IGdvb2dsZS5waWNrZXIuUGlja2VyO1xyXG4gIG9wdGlvbnM6IG9wdGlvbnM7XHJcbiAgZHJpdmU6IEdvb2dsZURyaXZlO1xyXG5cclxuICBjb25zdHJ1Y3RvcihvcHRpb25zPzogb3B0aW9ucykge1xyXG4gICAgc3VwZXIoWydodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL2RyaXZlJ10pO1xyXG4gICAgdGhpcy5vcHRpb25zID0ge3VwbG9hZDogZmFsc2UsIG11bHRpcGxlOiBmYWxzZSwgbGltaXRUeXBlOiBmYWxzZX07XHJcbiAgICBPYmplY3QuYXNzaWduKHRoaXMub3B0aW9ucywgb3B0aW9ucyk7XHJcbiAgICBjb25zb2xlLmxvZyh0aGlzLm9wdGlvbnMpO1xyXG4gICAgdGhpcy5kcml2ZSA9IG5ldyBHb29nbGVEcml2ZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogc2hvdygpXHJcbiAgICogXHJcbiAgICogSWYgYSBzaW5nbGUgZmlsZSBpcyByZXF1ZXN0ZWQgZnJvbSB0aGUgcGlja2VyIGEgbGlzdCBvZiBmaWxlcyB3aXRoIG9uZSBlbGVtZW50IGlzIHJldHVybmVkLlxyXG4gICAqIEl0IGlzIHVwIHRvIHRoZSBjYWxsZXIgdG8gaGFuZGxlIHRoZSBsaXN0IGluIGEgcmVsZXZhbnQgbWFubmVyLlxyXG4gICAqIFxyXG4gICAqIE1vcmUgZGF0YSBmcm9tIHRoZSBmaWxlIGNvdWxkIGJlIGV4dHJhY3RlZCBpZiBpdCBpcyBkZWVtZWQgbmVjZXNzYXJ5LlxyXG4gICAqIFxyXG4gICAqL1xyXG4gIGFzeW5jIHNob3coKSB7XHJcbiAgICBhd2FpdCB0aGlzLmVuc3VyZUluaXRlZCgpO1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPHNlbGVjdGVkRmlsZVtdPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGNvbnN0IGNhbGxiYWNrID0gKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlWydhY3Rpb24nXSA9PSBnb29nbGUucGlja2VyLkFjdGlvbi5DQU5DRUwpIHtcclxuICAgICAgICAgICAgcmVqZWN0KCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZVsnYWN0aW9uJ10gPT0gZ29vZ2xlLnBpY2tlci5BY3Rpb24uUElDS0VEKSB7XHJcbiAgICAgICAgICBsZXQgc2VsZWN0ZWQgPSBbXTtcclxuICAgICAgICAgIHJlc3BvbnNlLmRvY3MubWFwKGRvYyA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHtpZDogZmlsZUlkLCBtaW1lVHlwZSwgbmFtZSwgbW9kaWZpZWRUaW1lLCBpY29uVXJsLCB1cmx9ID0gZG9jO1xyXG4gICAgICAgICAgICBjb25zdCBjYW5FeHBvcnQgPSBtaW1lVHlwZS5pbmNsdWRlcygnZ29vZ2xlLWFwcHMnKTtcclxuICAgICAgICAgICAgc2VsZWN0ZWQucHVzaCh7ZmlsZUlkLCBtaW1lVHlwZSwgbmFtZSwgbW9kaWZpZWRUaW1lLCBjYW5FeHBvcnQsIGljb25VcmwsIHVybH0pO1xyXG4gICAgICAgICAgICAvLyB1cGRhdGUgcGVybWlzc2lvbnMgdG8gcmVhZCBieSBhbGwgaW4gZG9tYWluXHJcbiAgICAgICAgICAgIHRoaXMuZHJpdmUudXBkYXRlUGVybWlzc2lvbnMoZmlsZUlkKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coc2VsZWN0ZWQpO1xyXG4gICAgICAgICAgcmVzb2x2ZShzZWxlY3RlZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgcGlja2VyYnVpbGRlciA9IG5ldyBnb29nbGUucGlja2VyLlBpY2tlckJ1aWxkZXIoKVxyXG4gICAgICAgIC5lbmFibGVGZWF0dXJlKGdvb2dsZS5waWNrZXIuRmVhdHVyZS5TVVBQT1JUX0RSSVZFUylcclxuICAgICAgICAuZW5hYmxlRmVhdHVyZShnb29nbGUucGlja2VyLkZlYXR1cmUuU1VQUE9SVF9URUFNX0RSSVZFUylcclxuICAgICAgICAuYWRkVmlldyhcclxuICAgICAgICAgIG5ldyBnb29nbGUucGlja2VyLkRvY3NWaWV3KClcclxuICAgICAgICAgICAgLnNldE93bmVkQnlNZSh0cnVlKSAvLyBzaG91bGQgdGhpcyBiZSBhbiBvcHRpb24/XHJcbiAgICAgICAgICAgIC5zZXRJbmNsdWRlRm9sZGVycyh0cnVlKVxyXG4gICAgICAgIClcclxuICAgICAgICAuYWRkVmlldyhcclxuICAgICAgICAgIG5ldyBnb29nbGUucGlja2VyLkRvY3NWaWV3KClcclxuICAgICAgICAgICAgLnNldEluY2x1ZGVGb2xkZXJzKHRydWUpXHJcbiAgICAgICAgICAgIC5zZXRFbmFibGVUZWFtRHJpdmVzKHRydWUpXHJcbiAgICAgICAgKVxyXG4gICAgICAgIC5zZXRMb2NhbGUoXCJzdlwiKSAvLyBzaG91bGQgdGhpcyBiZSBhbiBvcHRpb24/XHJcbiAgICAgICAgLnNldFNpemUoMTA1MSw2NTApIC8vIHNob3VsZCB0aGlzIGJlIGFuIG9wdGlvbj9cclxuICAgICAgICAuc2V0T0F1dGhUb2tlbih0aGlzLmF1dGhUb2tlbilcclxuICAgICAgICAuc2V0Q2FsbGJhY2soY2FsbGJhY2spO1xyXG4gICAgICBpZiAodGhpcy5vcHRpb25zLnVwbG9hZCkge1xyXG4gICAgICAgIHBpY2tlcmJ1aWxkZXIuYWRkVmlldyhuZXcgZ29vZ2xlLnBpY2tlci5Eb2NzVXBsb2FkVmlldygpLnNldEluY2x1ZGVGb2xkZXJzKHRydWUpKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5vcHRpb25zLm11bHRpcGxlKSB7XHJcbiAgICAgICAgcGlja2VyYnVpbGRlci5lbmFibGVGZWF0dXJlKGdvb2dsZS5waWNrZXIuRmVhdHVyZS5NVUxUSVNFTEVDVF9FTkFCTEVEKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5vcHRpb25zLmxpbWl0VHlwZSkge1xyXG4gICAgICAgIHZhciBtaW1lVHlwZXMgPSBtaW1lVHlwZUNvbGxlY3Rpb25zW3RoaXMub3B0aW9ucy5saW1pdFR5cGVdO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKG1pbWVUeXBlcyk7XHJcbiAgICAgICAgcGlja2VyYnVpbGRlci5zZXRTZWxlY3RhYmxlTWltZVR5cGVzKG1pbWVUeXBlcyk7XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5waWNrZXIgPSBwaWNrZXJidWlsZGVyLmJ1aWxkKCk7XHJcbiAgICAgIHRoaXMucGlja2VyLnNldFZpc2libGUodHJ1ZSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IGVudiBmcm9tICcuLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5pbXBvcnQgeyBXZWJDbGllbnRJZCB9IGZyb20gJy4vY29uZmlncyc7XHJcblxyXG5leHBvcnQgY2xhc3MgR29vZ2xlV2ViQ2xpZW50IHtcclxuICBhdXRoVG9rZW46IHN0cmluZztcclxuICBzY29wZXM6IHN0cmluZ1tdO1xyXG5cclxuICBjb25zdHJ1Y3RvcihzY29wZXMpIHtcclxuICAgIHRoaXMuc2NvcGVzID0gWydodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL3VzZXJpbmZvLmVtYWlsJywgJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvdXNlcmluZm8ucHJvZmlsZSddO1xyXG4gICAgdGhpcy5zY29wZXMucHVzaCguLi5zY29wZXMpO1xyXG4gIH1cclxuICBhc3luYyBlbnN1cmVJbml0ZWQoKSB7XHJcbiAgICAvLyBMb2FkIEdBUElcclxuICAgIGlmICh0eXBlb2YgZ2FwaSA9PT0gXCJ1bmRlZmluZWRcIikgYXdhaXQgdGhpcy5sb2FkR2FwaSgpO1xyXG5cclxuICAgIC8vIEtFRFNTY2hvb2xzXHJcbiAgICBjb25zdCBTQ09QRVMgPSB0aGlzLnNjb3Blcy5qb2luKCcgJyk7XHJcbiAgICBcclxuICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLHJlamVjdCkgPT4ge1xyXG4gICAgICBnYXBpLmxvYWQoXCJjbGllbnQ6YXV0aDJcIiwgKCkgPT4ge1xyXG4gICAgICAgIC8vIENhbGxzIGF1dGhvcml6ZSB3aXRob3V0IHByb21wdGluZyB0aGUgdXNlci4gSWYgYXV0aG9yaXphdGlvbiBoYXNuJ3QgYmVlbiBnaXZlbiBieVxyXG4gICAgICAgIC8vIHRoZSB1c2VyIGFuIGVycm9yIGlzIHJldHVybmVkIGFuZCB3ZSBjYWxsIGF1dGhvcml6ZSBhZ2FpbiB3aXRoIGNvbnNlbnQtc2NyZWVuXHJcbiAgICAgICAgbGV0IHJlYXV0aG9yaXplID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHJldHVybiBnYXBpLmF1dGgyLmF1dGhvcml6ZSh7XHJcbiAgICAgICAgICBjbGllbnRfaWQ6IFdlYkNsaWVudElkLFxyXG4gICAgICAgICAgc2NvcGU6IFNDT1BFUyxcclxuICAgICAgICAgIHJlc3BvbnNlX3R5cGU6ICdwZXJtaXNzaW9uJyxcclxuICAgICAgICAgIGxvZ2luX2hpbnQ6IGVudi5jdXJyZW50VXNlci5tYWlsLFxyXG4gICAgICAgICAgcHJvbXB0OiAnbm9uZSdcclxuICAgICAgICB9LCAocmVzcCkgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2cocmVzcCk7XHJcbiAgICAgICAgICBpZiAocmVzcC5lcnJvcikge1xyXG4gICAgICAgICAgICAvLyBubyBjb25zZW50IGdpdmVuIHNvIHJlYXV0aG9yaXplXHJcbiAgICAgICAgICAgIHJlYXV0aG9yaXplID0gdHJ1ZTsgICAgICAgICAgICBcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIHdlIGhhdmUgYWxsIHRoZSBzY29wZXMgd2Ugd2FudFxyXG4gICAgICAgICAgICBjb25zdCBzY29wZXNldCA9IG5ldyBTZXQocmVzcC5zY29wZS5zcGxpdCgnICcpKTtcclxuICAgICAgICAgICAgY29uc3QgbWlzc2luZ1Njb3BlcyA9IHRoaXMuc2NvcGVzLmZpbHRlcih4ID0+ICFzY29wZXNldC5oYXMoeCkpO1xyXG4gICAgICAgICAgICBpZiAobWlzc2luZ1Njb3Blcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ21pc3Npbmcgc2NvcGVzJyk7XHJcbiAgICAgICAgICAgICAgLy8gc2NvcGVzIGFyZSBtaXNzaW5nIGZyb20gb3VyIGNvbnNlbnQgc28gcmVhdXRob3JpemVcclxuICAgICAgICAgICAgICByZWF1dGhvcml6ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgLy8gZXZlcnl0aGluZyBzZWVtcyB0byBiZSBvayBzbyBzdG9yZSBvdXIgdG9rZW5cclxuICAgICAgICAgICAgICB0aGlzLmF1dGhUb2tlbiA9IHJlc3AuYWNjZXNzX3Rva2VuO1xyXG4gICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmIChyZWF1dGhvcml6ZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygncmVhdXRob3JpemUnKTtcclxuICAgICAgICAgICAgcmV0dXJuIGdhcGkuYXV0aDIuYXV0aG9yaXplKHtcclxuICAgICAgICAgICAgICBjbGllbnRfaWQ6IFdlYkNsaWVudElkLFxyXG4gICAgICAgICAgICAgIHNjb3BlOiBTQ09QRVMsXHJcbiAgICAgICAgICAgICAgcmVzcG9uc2VfdHlwZTogJ3Blcm1pc3Npb24nLFxyXG4gICAgICAgICAgICAgIGxvZ2luX2hpbnQ6IGVudi5jdXJyZW50VXNlci5tYWlsLFxyXG4gICAgICAgICAgICAgIHByb21wdDogJ2NvbnNlbnQnXHJcbiAgICAgICAgICAgIH0sIChyZXNwKSA9PiB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcCk7XHJcbiAgICAgICAgICAgICAgaWYgKHJlc3AuZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIC8vIHNvbWV0aGluZyBpcyBzdGlsbCB3cm9uZyBzbyB0aHJvdyBhbiBlcnJvclxyXG4gICAgICAgICAgICAgICAgcmVqZWN0KCdHb29nbGUgV2ViIENsaWVudDogTm8gYWNjZXNzIHRva2VuJyk7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIHdlIG5vdyBoYXZlIGEgdG9rZW4gKGhvcGVmdWxseSB3aXRoIHRoZSByaWdodCBzY29wZXMpXHJcbiAgICAgICAgICAgICAgICAvLyBzaG91bGQgd2UgY2hlY2sgYWdhaW4/XHJcbiAgICAgICAgICAgICAgICB0aGlzLmF1dGhUb2tlbiA9IHJlc3AuYWNjZXNzX3Rva2VuO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKHJlc3AuZXhwaXJlc19pbiA8IDUwMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZ2FwaS5hdXRoMi5hdXRob3JpemUoe1xyXG4gICAgICAgICAgICAgIGNsaWVudF9pZDogV2ViQ2xpZW50SWQsXHJcbiAgICAgICAgICAgICAgc2NvcGU6IFNDT1BFUyxcclxuICAgICAgICAgICAgICByZXNwb25zZV90eXBlOiAncGVybWlzc2lvbicsXHJcbiAgICAgICAgICAgICAgbG9naW5faGludDogZW52LmN1cnJlbnRVc2VyLm1haWwsXHJcbiAgICAgICAgICAgICAgcHJvbXB0OiAnbm9uZSdcclxuICAgICAgICAgICAgfSwgKHJlc3ApID0+IHtcclxuICAgICAgICAgICAgICB0aGlzLmF1dGhUb2tlbiA9IHJlc3AuYWNjZXNzX3Rva2VuO1xyXG4gICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gTG9hZCBQaWNrZXIgQVBJXHJcbiAgICBpZiAodHlwZW9mIGdvb2dsZSA9PT0gXCJ1bmRlZmluZWRcIiB8fCB0eXBlb2YgZ29vZ2xlLnBpY2tlciA9PT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICBnYXBpLmxvYWQoXCJwaWNrZXJcIiwgKCkgPT4geyByZXNvbHZlKCkgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIGxvYWRHYXBpKCkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgaWYgKHR5cGVvZiBnYXBpICE9PSBcInVuZGVmaW5lZFwiKSByZXR1cm4gcmVzb2x2ZSgpO1xyXG4gICAgICBjb25zdCBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xyXG4gICAgICBzY3JpcHQuc3JjID0gXCJodHRwczovL2FwaXMuZ29vZ2xlLmNvbS9qcy9jbGllbnQuanM/b25sb2FkPWdhYXBpX2xvYWRlZFwiO1xyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF0uYXBwZW5kQ2hpbGQoc2NyaXB0KTtcclxuICAgICAgKHdpbmRvdyBhcyBhbnkpLmdhYXBpX2xvYWRlZCA9IHJlc29sdmU7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgRURTVGVhY2hlciwgRURTVHVpdGlvbkdyb3VwIH0gZnJvbSAnLi4vLi4vY29udHJhY3RzL2Vkcyc7XHJcblxyXG5cclxuY29uc3QgY3JlYXRlU3R1ZGVudHMgPSAoZ3JvdXAsIG4sIG0pID0+IHtcclxuICBjb25zdCBzdHVkZW50cyA9IFtdO1xyXG4gIGZvciAodmFyIGk9bjsgaSA8PSBtOyBpKyspIHtcclxuICAgIHN0dWRlbnRzLnB1c2goe1xyXG4gICAgICBzY2hvb2xOYW1lOiAnS0VEJyxcclxuICAgICAgdHVpdGlvbkdyb3VwTmFtZTogZ3JvdXAsXHJcbiAgICAgIHN0dWRlbnRGaXJzdE5hbWU6ICdTdHVkZW50ICcgKyBpLFxyXG4gICAgICBzdHVkZW50TGFzdE5hbWU6ICdDbGFzc3Jvb20nLFxyXG4gICAgICBzdHVkZW50RW1haWxBZGRyZXNzOiAnc3R1ZGVudCcgKyBpICsgJy5jbGFzc3Jvb21Aa2Vkc2Nob29scy5jb20nXHJcblxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIHJldHVybiBzdHVkZW50cztcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IG1vY2tUZWFjaGVyczogRURTVGVhY2hlcltdID0gW1xyXG4gIHtcclxuICAgIHNjaG9vbE5hbWU6ICdLRUQnLFxyXG4gICAgdGVhY2hlckZpcnN0TmFtZTogJ1RlYWNoZXIgMScsXHJcbiAgICB0ZWFjaGVyTGFzdE5hbWU6ICdDbGFzc3Jvb20nLFxyXG4gICAgdGVhY2hlckVtYWlsQWRkcmVzczogJ3RlYWNoZXIxLmNsYXNzcm9vbUBrZWRzY2hvb2xzLmNvbSdcclxuICB9LFxyXG4gIHtcclxuICAgIHNjaG9vbE5hbWU6ICdLRUQnLFxyXG4gICAgdGVhY2hlckZpcnN0TmFtZTogJ1RlYWNoZXIgMicsXHJcbiAgICB0ZWFjaGVyTGFzdE5hbWU6ICdDbGFzc3Jvb20nLFxyXG4gICAgdGVhY2hlckVtYWlsQWRkcmVzczogJ3RlYWNoZXIyLmNsYXNzcm9vbUBrZWRzY2hvb2xzLmNvbSdcclxuICB9LFxyXG4gIHtcclxuICAgIHNjaG9vbE5hbWU6ICdLRUQnLFxyXG4gICAgdGVhY2hlckZpcnN0TmFtZTogJ1RlYWNoZXIgMycsXHJcbiAgICB0ZWFjaGVyTGFzdE5hbWU6ICdDbGFzc3Jvb20nLFxyXG4gICAgdGVhY2hlckVtYWlsQWRkcmVzczogJ3RlYWNoZXIzLmNsYXNzcm9vbUBrZWRzY2hvb2xzLmNvbSdcclxuICB9LFxyXG4gIHtcclxuICAgIHNjaG9vbE5hbWU6ICdLRUQnLFxyXG4gICAgdGVhY2hlckZpcnN0TmFtZTogJ0NhcmwnLFxyXG4gICAgdGVhY2hlckxhc3ROYW1lOiAnSG9sbWJlcmcnLFxyXG4gICAgdGVhY2hlckVtYWlsQWRkcmVzczogJ2NhcmxAa2Vkc2Nob29scy5jb20nXHJcbiAgfSxcclxuICB7XHJcbiAgICBzY2hvb2xOYW1lOiAnS0VEJyxcclxuICAgIHRlYWNoZXJGaXJzdE5hbWU6ICdEYXZpZCcsXHJcbiAgICB0ZWFjaGVyTGFzdE5hbWU6ICdGYWhsYW5kZXInLFxyXG4gICAgdGVhY2hlckVtYWlsQWRkcmVzczogJ2RhdmlkLmZhaGxhbmRlckBrZWRzY2hvb2xzLmNvbSdcclxuICB9XHJcbl07XHJcblxyXG5leHBvcnQgY29uc3QgbW9ja1R1aXRpb25Hcm91cHMgPSB7XHJcbiAgJ0RKVVPDhEwwMSc6IFtcclxuICAgIHtcclxuICAgICAgc2Nob29sTmFtZTogJ0tFRCcsXHJcbiAgICAgIHR1aXRpb25Hcm91cE5hbWU6ICdJRFIxX0dyMSAoMTgwODE2LTE5MDYxNCknLFxyXG4gICAgICBjb3Vyc2VDb2RlOiAnREpVU8OETDAxJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgc2Nob29sTmFtZTogJ0tFRCcsXHJcbiAgICAgIHR1aXRpb25Hcm91cE5hbWU6ICdJRFIxX0dyMiAoMTgwODE2LTE5MDYxNCknLFxyXG4gICAgICBjb3Vyc2VDb2RlOiAnREpVU8OETDAxJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgc2Nob29sTmFtZTogJ0tFRCcsXHJcbiAgICAgIHR1aXRpb25Hcm91cE5hbWU6ICdJRFIxX0dyMyAoMTgwODE2LTE5MDYxNCknLFxyXG4gICAgICBjb3Vyc2VDb2RlOiAnREpVU8OETDAxJ1xyXG4gICAgfVxyXG4gIF0sXHJcbiAgJ0RKVURKSTAnOltcclxuICAgIHtcclxuICAgICAgc2Nob29sTmFtZTogJ0tFRCcsXHJcbiAgICAgIHR1aXRpb25Hcm91cE5hbWU6ICdESlVESl9HcjEgKDE4MDgxNi0xOTA2MTQpJyxcclxuICAgICAgY291cnNlQ29kZTogJ0RKVURKSTAnXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBzY2hvb2xOYW1lOiAnS0VEJyxcclxuICAgICAgdHVpdGlvbkdyb3VwTmFtZTogJ0RKVURKX0dyMiAoMTgwODE2LTE5MDYxNCknLFxyXG4gICAgICBjb3Vyc2VDb2RlOiAnREpVREpJMCdcclxuICAgIH0sICBdLFxyXG4gICdLRU1LRU0wMSc6IFtcclxuICAgIHtcclxuICAgICAgc2Nob29sTmFtZTogJ0tFRCcsXHJcbiAgICAgIHR1aXRpb25Hcm91cE5hbWU6ICdLRU0xX0dyMSAoMTgwODE2LTE5MDYxNCknLFxyXG4gICAgICBjb3Vyc2VDb2RlOiAnS0VNS0VNMDEnXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBzY2hvb2xOYW1lOiAnS0VEJyxcclxuICAgICAgdHVpdGlvbkdyb3VwTmFtZTogJ0tFTTFfR3IyICgxODA4MTYtMTkwNjE0KScsXHJcbiAgICAgIGNvdXJzZUNvZGU6ICdLRU1LRU0wMSdcclxuICAgIH1cclxuICBdLFxyXG4gICdCSU9CSU8wMSc6IFtcclxuICAgIHtcclxuICAgICAgc2Nob29sTmFtZTogJ0tFRCcsXHJcbiAgICAgIHR1aXRpb25Hcm91cE5hbWU6ICdCSU8xX0dyMSAoMTgwODE2LTE5MDYxNCknLFxyXG4gICAgICBjb3Vyc2VDb2RlOiAnQklPQklPMDEnXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBzY2hvb2xOYW1lOiAnS0VEJyxcclxuICAgICAgdHVpdGlvbkdyb3VwTmFtZTogJ0JJTzFfR3IyICgxODA4MTYtMTkwNjE0KScsXHJcbiAgICAgIGNvdXJzZUNvZGU6ICdCSU9CSU8wMSdcclxuICAgIH1cclxuICBdLFxyXG4gICdTVkVTVkUwMyc6IFtcclxuICAgIHtcclxuICAgICAgc2Nob29sTmFtZTogJ0tFRCcsXHJcbiAgICAgIHR1aXRpb25Hcm91cE5hbWU6ICdTVkUzX0dyMSAoMTgwODE2LTE5MDYxNCknLFxyXG4gICAgICBjb3Vyc2VDb2RlOiAnU1ZFU1ZFMDMnXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBzY2hvb2xOYW1lOiAnS0VEJyxcclxuICAgICAgdHVpdGlvbkdyb3VwTmFtZTogJ1NWRTNfR3IyICgxODA4MTYtMTkwNjE0KScsXHJcbiAgICAgIGNvdXJzZUNvZGU6ICdTVkVTVkUwMydcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIHNjaG9vbE5hbWU6ICdLRUQnLFxyXG4gICAgICB0dWl0aW9uR3JvdXBOYW1lOiAnU1ZFM19HcjMgKDE4MDgxNi0xOTA2MTQpJyxcclxuICAgICAgY291cnNlQ29kZTogJ1NWRVNWRTAzJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgc2Nob29sTmFtZTogJ0tFRCcsXHJcbiAgICAgIHR1aXRpb25Hcm91cE5hbWU6ICdTVkUzX0dyNCAoMTgwODE2LTE5MDYxNCknLFxyXG4gICAgICBjb3Vyc2VDb2RlOiAnU1ZFU1ZFMDMnXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBzY2hvb2xOYW1lOiAnS0VEJyxcclxuICAgICAgdHVpdGlvbkdyb3VwTmFtZTogJ1NWRTNfR3I1ICgxODA4MTYtMTkwNjE0KScsXHJcbiAgICAgIGNvdXJzZUNvZGU6ICdTVkVTVkUwMydcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIHNjaG9vbE5hbWU6ICdLRUQnLFxyXG4gICAgICB0dWl0aW9uR3JvdXBOYW1lOiAnU1ZFM19HcjYgKDE4MDgxNi0xOTA2MTQpJyxcclxuICAgICAgY291cnNlQ29kZTogJ1NWRVNWRTAzJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgc2Nob29sTmFtZTogJ0tFRCcsXHJcbiAgICAgIHR1aXRpb25Hcm91cE5hbWU6ICdTVkUzX0dyNyAoMTgwODE2LTE5MDYxNCknLFxyXG4gICAgICBjb3Vyc2VDb2RlOiAnU1ZFU1ZFMDMnXHJcbiAgICB9XHJcbiAgXVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgbW9ja1R1aXRpb25TdHVkZW50cyA9IHtcclxuICAnSURSMV9HcjEgKDE4MDgxNi0xOTA2MTQpJyA6IGNyZWF0ZVN0dWRlbnRzKCdJRFIxX0dyMSAoMTgwODE2LTE5MDYxNCknICwgMSwgMTIpLFxyXG4gICdJRFIxX0dyMiAoMTgwODE2LTE5MDYxNCknIDogY3JlYXRlU3R1ZGVudHMoJ0lEUjFfR3IyICgxODA4MTYtMTkwNjE0KScgLCAxMywgMjIpLFxyXG4gICdJRFIxX0dyMyAoMTgwODE2LTE5MDYxNCknIDogY3JlYXRlU3R1ZGVudHMoJ0lEUjFfR3IzICgxODA4MTYtMTkwNjE0KScgLCAyMywgMzQpLFxyXG4gICdESlVESl9HcjEgKDE4MDgxNi0xOTA2MTQpJzogW1xyXG4gICAge1xyXG4gICAgICBzY2hvb2xOYW1lOiAnS0VEJyxcclxuICAgICAgdHVpdGlvbkdyb3VwTmFtZTogJ0RKVURKX0dyMSAoMTgwODE2LTE5MDYxNCknLFxyXG4gICAgICBzdHVkZW50Rmlyc3ROYW1lOiAnQW5kcmVpJyxcclxuICAgICAgc3R1ZGVudExhc3ROYW1lOiAnU3BhdGFyZWx1JyxcclxuICAgICAgc3R1ZGVudEVtYWlsQWRkcmVzczogJ2FuZHJlaS5zcGF0YXJlbHVAdmVtZW5kby5zZSdcclxuICAgIH0sXHJcblxyXG4gIF0sXHJcbiAgJ0RKVURKX0dyMiAoMTgwODE2LTE5MDYxNCknOltcclxuICAgIHtcclxuICAgICAgc2Nob29sTmFtZTogJ0tFRCcsXHJcbiAgICAgIHR1aXRpb25Hcm91cE5hbWU6ICdESlVESl9HcjIgKDE4MDgxNi0xOTA2MTQpJyxcclxuICAgICAgc3R1ZGVudEZpcnN0TmFtZTogJ1N0dWRlbnQgMicsXHJcbiAgICAgIHN0dWRlbnRMYXN0TmFtZTogJ0NsYXNzcm9vbScsXHJcbiAgICAgIHN0dWRlbnRFbWFpbEFkZHJlc3M6ICdzdHVkZW50Mi5jbGFzc3Jvb21Aa2Vkc2Nob29scy5jb20nXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBzY2hvb2xOYW1lOiAnS0VEJyxcclxuICAgICAgdHVpdGlvbkdyb3VwTmFtZTogJ0RKVURKX0dyMiAoMTgwODE2LTE5MDYxNCknLFxyXG4gICAgICBzdHVkZW50Rmlyc3ROYW1lOiAnQ2FybCcsXHJcbiAgICAgIHN0dWRlbnRMYXN0TmFtZTogJ0hvbG1iZXJnJyxcclxuICAgICAgc3R1ZGVudEVtYWlsQWRkcmVzczogJ2NhcmxAa2Vkc2Nob29scy5jb20nXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBzY2hvb2xOYW1lOiAnS0VEJyxcclxuICAgICAgdHVpdGlvbkdyb3VwTmFtZTogJ0RKVURKX0dyMiAoMTgwODE2LTE5MDYxNCknLFxyXG4gICAgICBzdHVkZW50Rmlyc3ROYW1lOiAnU3R1ZGVudCAzJyxcclxuICAgICAgc3R1ZGVudExhc3ROYW1lOiAnQ2xhc3Nyb29tJyxcclxuICAgICAgc3R1ZGVudEVtYWlsQWRkcmVzczogJ3N0dWRlbnQzLmNsYXNzcm9vbUBrZWRzY2hvb2xzLmNvbSdcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIHNjaG9vbE5hbWU6ICdLRUQnLFxyXG4gICAgICB0dWl0aW9uR3JvdXBOYW1lOiAnREpVREpfR3IyICgxODA4MTYtMTkwNjE0KScsXHJcbiAgICAgIHN0dWRlbnRGaXJzdE5hbWU6ICdEYXZpZCcsXHJcbiAgICAgIHN0dWRlbnRMYXN0TmFtZTogJ0ZhaGxhbmRlcicsXHJcbiAgICAgIHN0dWRlbnRFbWFpbEFkZHJlc3M6ICdkYXZpZC5mYWhsYW5kZXJAdmVtZW5kby5zZSdcclxuICAgIH1cclxuICBdLFxyXG4gICdLRU0xX0dyMSAoMTgwODE2LTE5MDYxNCknIDogW1xyXG4gICAge1xyXG4gICAgICBzY2hvb2xOYW1lOiAnS0VEJyxcclxuICAgICAgdHVpdGlvbkdyb3VwTmFtZTogJ0tFTTFfR3IxICgxODA4MTYtMTkwNjE0KScsXHJcbiAgICAgIHN0dWRlbnRGaXJzdE5hbWU6ICdTdHVkZW50IDInLFxyXG4gICAgICBzdHVkZW50TGFzdE5hbWU6ICdDbGFzc3Jvb20nLFxyXG4gICAgICBzdHVkZW50RW1haWxBZGRyZXNzOiAnc3R1ZGVudDIuY2xhc3Nyb29tQGtlZHNjaG9vbHMuY29tJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgc2Nob29sTmFtZTogJ0tFRCcsXHJcbiAgICAgIHR1aXRpb25Hcm91cE5hbWU6ICdLRU0xX0dyMSAoMTgwODE2LTE5MDYxNCknLFxyXG4gICAgICBzdHVkZW50Rmlyc3ROYW1lOiAnRGF2aWQnLFxyXG4gICAgICBzdHVkZW50TGFzdE5hbWU6ICcnLFxyXG4gICAgICBzdHVkZW50RW1haWxBZGRyZXNzOiAnZGF2aWQuZmFobGFuZGVyQHZlbWVuZG8uc2UnXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBzY2hvb2xOYW1lOiAnS0VEJyxcclxuICAgICAgdHVpdGlvbkdyb3VwTmFtZTogJ0tFTTFfR3IxICgxODA4MTYtMTkwNjE0KScsXHJcbiAgICAgIHN0dWRlbnRGaXJzdE5hbWU6ICdTdHVkZW50IDMnLFxyXG4gICAgICBzdHVkZW50TGFzdE5hbWU6ICdDbGFzc3Jvb20nLFxyXG4gICAgICBzdHVkZW50RW1haWxBZGRyZXNzOiAnc3R1ZGVudDMuY2xhc3Nyb29tQGtlZHNjaG9vbHMuY29tJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgc2Nob29sTmFtZTogJ0tFRCcsXHJcbiAgICAgIHR1aXRpb25Hcm91cE5hbWU6ICdLRU0xX0dyMSAoMTgwODE2LTE5MDYxNCknLFxyXG4gICAgICBzdHVkZW50Rmlyc3ROYW1lOiAnU3R1ZGVudCA4JyxcclxuICAgICAgc3R1ZGVudExhc3ROYW1lOiAnQ2xhc3Nyb29tJyxcclxuICAgICAgc3R1ZGVudEVtYWlsQWRkcmVzczogJ3N0dWRlbnQ4LmNsYXNzcm9vbUBrZWRzY2hvb2xzLmNvbSdcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIHNjaG9vbE5hbWU6ICdLRUQnLFxyXG4gICAgICB0dWl0aW9uR3JvdXBOYW1lOiAnS0VNMV9HcjEgKDE4MDgxNi0xOTA2MTQpJyxcclxuICAgICAgc3R1ZGVudEZpcnN0TmFtZTogJ1N0dWRlbnQgOScsXHJcbiAgICAgIHN0dWRlbnRMYXN0TmFtZTogJ0NsYXNzcm9vbScsXHJcbiAgICAgIHN0dWRlbnRFbWFpbEFkZHJlc3M6ICdzdHVkZW50OS5jbGFzc3Jvb21Aa2Vkc2Nob29scy5jb20nXHJcbiAgICB9XHJcbiAgXSxcclxuICAnS0VNMV9HcjIgKDE4MDgxNi0xOTA2MTQpJyA6IFtcclxuICAgIHtcclxuICAgICAgc2Nob29sTmFtZTogJ0tFRCcsXHJcbiAgICAgIHR1aXRpb25Hcm91cE5hbWU6ICdLRU0xX0dyMiAoMTgwODE2LTE5MDYxNCknLFxyXG4gICAgICBzdHVkZW50Rmlyc3ROYW1lOiAnU3R1ZGVudCAxJyxcclxuICAgICAgc3R1ZGVudExhc3ROYW1lOiAnQ2xhc3Nyb29tJyxcclxuICAgICAgc3R1ZGVudEVtYWlsQWRkcmVzczogJ3N0dWRlbnQxLmNsYXNzcm9vbUBrZWRzY2hvb2xzLmNvbSdcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIHNjaG9vbE5hbWU6ICdLRUQnLFxyXG4gICAgICB0dWl0aW9uR3JvdXBOYW1lOiAnS0VNMV9HcjIgKDE4MDgxNi0xOTA2MTQpJyxcclxuICAgICAgc3R1ZGVudEZpcnN0TmFtZTogJ1N0dWRlbnQgNScsXHJcbiAgICAgIHN0dWRlbnRMYXN0TmFtZTogJ0NsYXNzcm9vbScsXHJcbiAgICAgIHN0dWRlbnRFbWFpbEFkZHJlc3M6ICdzdHVkZW50NS5jbGFzc3Jvb21Aa2Vkc2Nob29scy5jb20nXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBzY2hvb2xOYW1lOiAnS0VEJyxcclxuICAgICAgdHVpdGlvbkdyb3VwTmFtZTogJ0tFTTFfR3IyICgxODA4MTYtMTkwNjE0KScsXHJcbiAgICAgIHN0dWRlbnRGaXJzdE5hbWU6ICdTdHVkZW50IDYnLFxyXG4gICAgICBzdHVkZW50TGFzdE5hbWU6ICdDbGFzc3Jvb20nLFxyXG4gICAgICBzdHVkZW50RW1haWxBZGRyZXNzOiAnc3R1ZGVudDYuY2xhc3Nyb29tQGtlZHNjaG9vbHMuY29tJ1xyXG4gICAgfVxyXG4gIF0sXHJcbiAgJ0JJTzFfR3IxICgxODA4MTYtMTkwNjE0KScgOiBbXHJcbiAgICB7XHJcbiAgICAgIHNjaG9vbE5hbWU6ICdLRUQnLFxyXG4gICAgICB0dWl0aW9uR3JvdXBOYW1lOiAnQklPMV9HcjEgKDE4MDgxNi0xOTA2MTQpJyxcclxuICAgICAgc3R1ZGVudEZpcnN0TmFtZTogJ1N0dWRlbnQgMScsXHJcbiAgICAgIHN0dWRlbnRMYXN0TmFtZTogJ0NsYXNzcm9vbScsXHJcbiAgICAgIHN0dWRlbnRFbWFpbEFkZHJlc3M6ICdzdHVkZW50MS5jbGFzc3Jvb21Aa2Vkc2Nob29scy5jb20nXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBzY2hvb2xOYW1lOiAnS0VEJyxcclxuICAgICAgdHVpdGlvbkdyb3VwTmFtZTogJ0JJTzFfR3IxICgxODA4MTYtMTkwNjE0KScsXHJcbiAgICAgIHN0dWRlbnRGaXJzdE5hbWU6ICdTdHVkZW50IDQnLFxyXG4gICAgICBzdHVkZW50TGFzdE5hbWU6ICdDbGFzc3Jvb20nLFxyXG4gICAgICBzdHVkZW50RW1haWxBZGRyZXNzOiAnc3R1ZGVudDQuY2xhc3Nyb29tQGtlZHNjaG9vbHMuY29tJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgc2Nob29sTmFtZTogJ0tFRCcsXHJcbiAgICAgIHR1aXRpb25Hcm91cE5hbWU6ICdCSU8xX0dyMSAoMTgwODE2LTE5MDYxNCknLFxyXG4gICAgICBzdHVkZW50Rmlyc3ROYW1lOiAnU3R1ZGVudCA2JyxcclxuICAgICAgc3R1ZGVudExhc3ROYW1lOiAnQ2xhc3Nyb29tJyxcclxuICAgICAgc3R1ZGVudEVtYWlsQWRkcmVzczogJ3N0dWRlbnQ2LmNsYXNzcm9vbUBrZWRzY2hvb2xzLmNvbSdcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIHNjaG9vbE5hbWU6ICdLRUQnLFxyXG4gICAgICB0dWl0aW9uR3JvdXBOYW1lOiAnQklPMV9HcjEgKDE4MDgxNi0xOTA2MTQpJyxcclxuICAgICAgc3R1ZGVudEZpcnN0TmFtZTogJ1N0dWRlbnQgMTAnLFxyXG4gICAgICBzdHVkZW50TGFzdE5hbWU6ICdDbGFzc3Jvb20nLFxyXG4gICAgICBzdHVkZW50RW1haWxBZGRyZXNzOiAnc3R1ZGVudDEwLmNsYXNzcm9vbUBrZWRzY2hvb2xzLmNvbSdcclxuICAgIH1cclxuICBdLFxyXG4gICdCSU8xX0dyMiAoMTgwODE2LTE5MDYxNCknIDogW1xyXG4gICAge1xyXG4gICAgICBzY2hvb2xOYW1lOiAnS0VEJyxcclxuICAgICAgdHVpdGlvbkdyb3VwTmFtZTogJ0JJTzFfR3IyICgxODA4MTYtMTkwNjE0KScsXHJcbiAgICAgIHN0dWRlbnRGaXJzdE5hbWU6ICdTdHVkZW50IDInLFxyXG4gICAgICBzdHVkZW50TGFzdE5hbWU6ICdDbGFzc3Jvb20nLFxyXG4gICAgICBzdHVkZW50RW1haWxBZGRyZXNzOiAnc3R1ZGVudDIuY2xhc3Nyb29tQGtlZHNjaG9vbHMuY29tJ1xyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgc2Nob29sTmFtZTogJ0tFRCcsXHJcbiAgICAgIHR1aXRpb25Hcm91cE5hbWU6ICdCSU8xX0dyMiAoMTgwODE2LTE5MDYxNCknLFxyXG4gICAgICBzdHVkZW50Rmlyc3ROYW1lOiAnU3R1ZGVudCA3JyxcclxuICAgICAgc3R1ZGVudExhc3ROYW1lOiAnQ2xhc3Nyb29tJyxcclxuICAgICAgc3R1ZGVudEVtYWlsQWRkcmVzczogJ3N0dWRlbnQ3LmNsYXNzcm9vbUBrZWRzY2hvb2xzLmNvbSdcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIHNjaG9vbE5hbWU6ICdLRUQnLFxyXG4gICAgICB0dWl0aW9uR3JvdXBOYW1lOiAnQklPMV9HcjIgKDE4MDgxNi0xOTA2MTQpJyxcclxuICAgICAgc3R1ZGVudEZpcnN0TmFtZTogJ1N0dWRlbnQgOCcsXHJcbiAgICAgIHN0dWRlbnRMYXN0TmFtZTogJ0NsYXNzcm9vbScsXHJcbiAgICAgIHN0dWRlbnRFbWFpbEFkZHJlc3M6ICdzdHVkZW50OC5jbGFzc3Jvb21Aa2Vkc2Nob29scy5jb20nXHJcbiAgICB9LFxyXG4gIF0sXHJcbiAgJ1NWRTNfR3IxICgxODA4MTYtMTkwNjE0KScgOiBjcmVhdGVTdHVkZW50cygnU1ZFM19HcjEgKDE4MDgxNi0xOTA2MTQpJywgMSwgMjEpLFxyXG4gICdTVkUzX0dyMiAoMTgwODE2LTE5MDYxNCknIDogY3JlYXRlU3R1ZGVudHMoJ1NWRTNfR3IyICgxODA4MTYtMTkwNjE0KScsIDIyLCA0NCksXHJcbiAgJ1NWRTNfR3IzICgxODA4MTYtMTkwNjE0KScgOiBjcmVhdGVTdHVkZW50cygnU1ZFM19HcjMgKDE4MDgxNi0xOTA2MTQpJywgNDUsIDYxKSxcclxuICAnU1ZFM19HcjQgKDE4MDgxNi0xOTA2MTQpJyA6IGNyZWF0ZVN0dWRlbnRzKCdTVkUzX0dyNCAoMTgwODE2LTE5MDYxNCknLCA2MiwgNzgpLFxyXG4gICdTVkUzX0dyNSAoMTgwODE2LTE5MDYxNCknIDogY3JlYXRlU3R1ZGVudHMoJ1NWRTNfR3I1ICgxODA4MTYtMTkwNjE0KScsIDgzLCAxMDcpLFxyXG4gICdTVkUzX0dyNiAoMTgwODE2LTE5MDYxNCknIDogY3JlYXRlU3R1ZGVudHMoJ1NWRTNfR3I2ICgxODA4MTYtMTkwNjE0KScsIDEwOCwgMTI0KSxcclxuICAnU1ZFM19HcjcgKDE4MDgxNi0xOTA2MTQpJyA6IGNyZWF0ZVN0dWRlbnRzKCdTVkUzX0dyNyAoMTgwODE2LTE5MDYxNCknLCAxMjUsIDE1MClcclxufVxyXG4iLCJleHBvcnQgZnVuY3Rpb24gY291cnNlTmFtZVRvQ3NzQ2xhc3MoY3NzUHJlZml4OiBzdHJpbmcsIGNvdXJzZU5hbWU6IHN0cmluZykge1xyXG4gIHJldHVybiBgJHtjc3NQcmVmaXh9JHtjb3Vyc2VOYW1lLnN1YnN0cigwLDMpLnRvTG93ZXJDYXNlKCl9YDtcclxufVxyXG4iLCJpbXBvcnQgeyBVc2VyVGFza3NCb3hQcm9wcyB9IGZyb20gXCIuLi93ZWVrcGxhbm5lci91c2VyLXRhc2tzLWJveFwiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFdlZWtwbGFubmVyUHJvZ3Jlc3NEYXRhKHRhc2tTZXRzOiBQYXJ0aWFsPFVzZXJUYXNrc0JveFByb3BzPltdKSB7XHJcbiAgICB2YXIgY2hhcnRUYXNrczoge1xyXG4gICAgICAgIGNvbXBsZXRlZFRhc2tzOiBudW1iZXIsIFxyXG4gICAgICAgIHRvdGFsTnVtYmVyT2ZUYXNrczogbnVtYmVyLFxyXG4gICAgICAgIHN1YmplY3REYXRhOiB7XHJcbiAgICAgICAgICAgIFtjb2x1bW5IZWFkZXI6IHN0cmluZ106IHsgY29tcGxldGVkTnVtYmVyT2ZUYXNrczogbnVtYmVyLCBudW1iZXJPZlRhc2tzOiBudW1iZXIgfVxyXG4gICAgICAgIH1cclxuICAgIH0gPSB7Y29tcGxldGVkVGFza3M6IDAsIHRvdGFsTnVtYmVyT2ZUYXNrczogMCAsIHN1YmplY3REYXRhOiB7fX07XHJcblxyXG4gICAgdGFza1NldHMuZm9yRWFjaChlbGVtID0+IGVsZW0ubGVhcm5pbmdHb2Fscy5mb3JFYWNoKHggPT4ge1xyXG4gICAgICAgIHZhciBzdWJqZWN0Q29tcGxldGVkVGFza3MgPSB4LnRhc2tzLmZpbHRlcih0ID0+IHQuZG9uZSkubGVuZ3RoO1xyXG4gICAgICAgIGxldCBjb3Vyc2VTdWJqZWN0RGF0YSA9IGNoYXJ0VGFza3Muc3ViamVjdERhdGFbZWxlbS5jb3Vyc2VOYW1lXTtcclxuICAgICAgICBpZiAoIWNvdXJzZVN1YmplY3REYXRhKSB7XHJcbiAgICAgICAgICAgIGNvdXJzZVN1YmplY3REYXRhID0gY2hhcnRUYXNrcy5zdWJqZWN0RGF0YVtlbGVtLmNvdXJzZU5hbWVdID0ge1xyXG4gICAgICAgICAgICAgICAgY29tcGxldGVkTnVtYmVyT2ZUYXNrczogMCxcclxuICAgICAgICAgICAgICAgIG51bWJlck9mVGFza3M6IDBcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY291cnNlU3ViamVjdERhdGEuY29tcGxldGVkTnVtYmVyT2ZUYXNrcyArPSBzdWJqZWN0Q29tcGxldGVkVGFza3M7XHJcbiAgICAgICAgY291cnNlU3ViamVjdERhdGEubnVtYmVyT2ZUYXNrcyArPSB4LnRhc2tzLmxlbmd0aDtcclxuXHJcbiAgICAgICAgY2hhcnRUYXNrcy5jb21wbGV0ZWRUYXNrcyArPSBzdWJqZWN0Q29tcGxldGVkVGFza3M7XHJcbiAgICAgICAgY2hhcnRUYXNrcy50b3RhbE51bWJlck9mVGFza3MgKz0geC50YXNrcy5sZW5ndGg7XHJcbiAgICB9KSk7XHJcbiAgICByZXR1cm4gY2hhcnRUYXNrcztcclxufSIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgICBudW1iZXJPZlRhc2tzOiBudW1iZXI7XHJcbiAgICBjb21wbGV0ZWROdW1iZXJPZlRhc2tzOiBudW1iZXI7XHJcbiAgICBtYXhpbXVtVGFza3NEaXNwbGF5ZWQ/OiBudW1iZXI7XHJcbiAgICBiYWNrZ3JvdW5kQ29sb3I/OiBzdHJpbmc7XHJcbiAgICBwcm9ncmVzc0NvbG9yPzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgR29hbFByb2dyZXNzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzPiB7XHJcbiAgICBwdWJsaWMgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcclxuICAgICAgICBudW1iZXJvZlRhc2tzOiAwLFxyXG4gICAgICAgIGNvbXBsZXRlZE51bWJlck9mVGFza3M6IDAsXHJcbiAgICAgICAgbWF4aW11bVRhc2tzRGlzcGxheWVkOiAxMCxcclxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwibGlnaHRncmV5XCIsXHJcbiAgICAgICAgcHJvZ3Jlc3NDb2xvcjogXCIjM2RiY2EyXCIsXHJcbiAgICB9O1xyXG5cclxuICAgIGNyZWF0ZVByb2dyZXNzID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgbnVtYmVyT2ZUYXNrcywgY29tcGxldGVkTnVtYmVyT2ZUYXNrcywgbWF4aW11bVRhc2tzRGlzcGxheWVkLCBiYWNrZ3JvdW5kQ29sb3IsIHByb2dyZXNzQ29sb3IgfSA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgbGV0IHByb2dyZXNzID0gW107XHJcbiAgICAgICAgaWYobnVtYmVyT2ZUYXNrcyA+IG1heGltdW1UYXNrc0Rpc3BsYXllZCl7XHJcbiAgICAgICAgICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwicHJvZ3Jlc3Mtb3ZlcnZpZXdcIj4ge2NvbXBsZXRlZE51bWJlck9mVGFza3N9IC8ge251bWJlck9mVGFza3N9IDwvZGl2PjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAobGV0IHRhc2tObyA9IDE7IHRhc2tObyA8PSBudW1iZXJPZlRhc2tzOyB0YXNrTm8rKykge1xyXG4gICAgICAgICAgICBwcm9ncmVzcy5wdXNoKFxyXG4gICAgICAgICAgICA8c3ZnIGtleT17dGFza05vfT5cclxuICAgICAgICAgICAgICAgIDxjaXJjbGUgY2xhc3NOYW1lPVwiY2lyY2xlLWNoYXJ0LWJhY2tncm91bmRcIiBmaWxsPXt0YXNrTm8gPiBjb21wbGV0ZWROdW1iZXJPZlRhc2tzID8gYmFja2dyb3VuZENvbG9yIDogcHJvZ3Jlc3NDb2xvcn0gY3g9XCI4XCIgY3k9XCI4XCIgcj1cIjhcIiAvPlxyXG4gICAgICAgICAgICA8L3N2Zz5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHByb2dyZXNzO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpeyAgXHJcbiAgICAgICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwiZ29hbHMtcHJvZ3Jlc3NcIj57dGhpcy5jcmVhdGVQcm9ncmVzcygpfTwvZGl2PlxyXG4gICAgfVxyXG59IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICAgIHBlcmNlbnRhZ2U6IG51bWJlcjtcclxuICAgIGJhY2tncm91bmRDb2xvcj86IHN0cmluZztcclxuICAgIHByb2dyZXNzQ29sb3I/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBQcm9ncmVzcyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcz4ge1xyXG4gICAgcHVibGljIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XHJcbiAgICAgICAgcGVyY2VudGFnZTogMCxcclxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiI0YxRjVGNFwiLFxyXG4gICAgICAgIHByb2dyZXNzQ29sb3I6IFwiIzNkYmNhMlwiLFxyXG4gICAgfTtcclxuXHJcbiAgICByZW5kZXIoKXtcclxuICAgICAgICBjb25zdCB7cGVyY2VudGFnZSwgYmFja2dyb3VuZENvbG9yLCBwcm9ncmVzc0NvbG9yfSA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgY29uc3Qgcm91bmRlZFBlcmNlbnRhZ2UgPSBNYXRoLnJvdW5kKHBlcmNlbnRhZ2UpO1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxzdmcgY2xhc3NOYW1lPVwicHJvZ3Jlc3MtY2hhcnRcIiB3aWR0aD1cIjEwMCVcIiBoZWlnaHQ9XCIyNVwiPlxyXG4gICAgICAgICAgICA8cmVjdCBmaWxsPXtiYWNrZ3JvdW5kQ29sb3J9ICB3aWR0aD1cIjEwMCVcIiBoZWlnaHQ9XCIxMDAlXCIgcng9XCI0XCIvPlxyXG4gICAgICAgICAgICA8cmVjdCBjbGFzc05hbWU9XCJmaWxsXCIgZmlsbD17cHJvZ3Jlc3NDb2xvcn0gd2lkdGg9e2Ake3JvdW5kZWRQZXJjZW50YWdlfSVgfSBoZWlnaHQ9XCIxMDAlXCIgcng9XCI0XCIvPlxyXG4gICAgICAgICAgICA8dGV4dCBjbGFzc05hbWU9XCJmaWxsZWQtdGV4dFwiIHRleHRBbmNob3I9XCJtaWRkbGVcIiB4PVwiNTAlXCIgeT1cIjUwJVwiIGR5PVwiLjNlbVwiPntgJHtyb3VuZGVkUGVyY2VudGFnZX0lYH08L3RleHQ+XHRcclxuICAgICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG59IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBMaW5rIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XHJcbmltcG9ydCB7IFZhbHVlLCBFbWl0dGVyIH0gZnJvbSAna2VkYmFja2VuZC9vYnNlcnZhYmxlJztcclxuaW1wb3J0IHsgbGl2ZVF1ZXJ5VmlldyB9IGZyb20gJy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9saXZlLXF1ZXJ5LXZpZXcnO1xyXG5pbXBvcnQgeyBMYXp5Q29udGVudCB9IGZyb20gJy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9sYXp5LWNvbnRlbnQnO1xyXG5pbXBvcnQgeyBFbGxpcHNpc0xvYWRlciB9IGZyb20gJy4uLy4uL2NvdXJzZS1idWlsZGVyL3N1Yi1jb21wb25lbnRzL2VsbGlwc2lzLWxvYWRlcic7XHJcbmltcG9ydCB7IHByZXNlcnZlSW1wZXJzb25hdGlvblF1ZXJ5IH0gZnJvbSAnLi4vLi4vLi4vYWNjZXNzLWNvbnRyb2wnO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBCYW5uZXJQcm9wcyB7XHJcbiAgdGl0bGU6IHN0cmluZyxcclxuICBiYWNrZ3JvdW5kSW1hZ2U/OiBzdHJpbmcsXHJcbiAgdGFiczogeyBuYW1lOiBzdHJpbmcgfCBKU1guRWxlbWVudCwga2V5OiBzdHJpbmcsIGxpbms/OiBzdHJpbmcsIG9uQ2xpY2s/OiAoKSA9PiB2b2lkLCBkcmFnZ2FibGU/OiBib29sZWFuICB9W10sXHJcbiAgYnV0dG9ucz86IEpTWC5FbGVtZW50W10sXHJcbiAgYWN0aXZlVGFiOiBzdHJpbmc7XHJcbiAgY29ybmVyQm94Pzogc3RyaW5nIHwgSlNYLkVsZW1lbnQ7XHJcbiAgYmxvY2tzPzogQXJyYXk8eyBpZDogc3RyaW5nLCBuYW1lOiBzdHJpbmcsIHN0ZXBzOiBBcnJheTx7IGxpbms6IHN0cmluZywgc3RlcE5vOiBudW1iZXIsIGlzQWN0aXZlOiBib29sZWFufT4gfT5cclxuICBzb3J0YWJsZVRhYnM/OiBib29sZWFuO1xyXG4gIG9uVGFiRHJvcD86IChzb3VyY2U6IHN0cmluZywgdGFyZ2V0OiBzdHJpbmcsIHBsYWNlbWVudDogJ2JlZm9yZScgfCAnYWZ0ZXInKSA9PiB2b2lkXHJcbn1cclxuXHJcbmludGVyZmFjZSBMYXp5QmFubmVyUHJvcHMge1xyXG4gIGxhenlQcm9wczogVmFsdWU8QmFubmVyUHJvcHM+XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBMYXp5QmFubmVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PExhenlCYW5uZXJQcm9wcz4ge1xyXG4gIGRyYWdTdGF0ZSA9IG5ldyBFbWl0dGVyKHsgdGFiQmVpbmdEcmFnZ2VkOiAnJywgdGFiQmVpbmdIb3ZlcmVkOiAnJywgaW5zZXJ0QmVmb3JlOiBmYWxzZSwgb3JpZ2luQ2xpZW50WDogLTEgfSk7XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHsgbGF6eVByb3BzIH0gPSB0aGlzLnByb3BzO1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdi1yb3cgc3YtbGF5b3V0IHN2LXNraXAtc3BhY2VyXCIgc3R5bGU9e3sgb3ZlcmZsb3c6IFwidmlzaWJsZVwiIH19PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3YtbGF5b3V0IHN2LXNraXAtc3BhY2VyIHN2LWNvbHVtbi0xMlwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdi1zY3JpcHQtcG9ydGxldCBzdi1wb3J0bGV0IHN2LXNraXAtc3BhY2VyXCI+XHJcbiAgICAgICAgICAgIDxMYXp5Q29udGVudCBub0Vycm9yPlxyXG4gICAgICAgICAgICAgIHtsYXp5UHJvcHMubWFwKCh7IGJhY2tncm91bmRJbWFnZSB9KSA9PiBiYWNrZ3JvdW5kSW1hZ2UgJiYgPHN0eWxlPntgXHJcbiAgICAgICAgICAgICAgLnBhZ2VIZWFkZXIge1xyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCcke2JhY2tncm91bmRJbWFnZX0nKSAhaW1wb3J0YW50O1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYH08L3N0eWxlPil9XHJcbiAgICAgICAgICAgIDwvTGF6eUNvbnRlbnQ+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFnZUhlYWRlclwiPlxyXG4gICAgICAgICAgICAgIDxhPlxyXG4gICAgICAgICAgICAgICAgPGgxPjxMYXp5Q29udGVudCBub0Vycm9yPntsYXp5UHJvcHMubWFwKHByb3BzID0+IDw+e3Byb3BzLnRpdGxlfTwvPil9PC9MYXp5Q29udGVudD48L2gxPlxyXG4gICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICA8TGF6eUNvbnRlbnQgbm9FcnJvcj57bGF6eVByb3BzLm1hcCgoeyBjb3JuZXJCb3ggfSkgPT4gY29ybmVyQm94ICYmXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhZ2VIZWFkZXJDb3JuZXJCb3hcIj5cclxuICAgICAgICAgICAgICAgICAge2Nvcm5lckJveH1cclxuICAgICAgICAgICAgICAgIDwvZGl2Pil9XHJcbiAgICAgICAgICAgICAgPC9MYXp5Q29udGVudD5cclxuXHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidXR0b25zRmllbGRcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0dG9uc0NvbnRhaW5lclwiPlxyXG4gICAgICAgICAgICAgICAgICA8TGF6eUNvbnRlbnQgc3Bpbm5lcj17PEVsbGlwc2lzTG9hZGVyIC8+fT57bGF6eVByb3BzLm1hcCgoeyB0YWJzLCBidXR0b25zLCBhY3RpdmVUYWIsIGJsb2Nrcywgc29ydGFibGVUYWJzLCBvblRhYkRyb3AgfSkgPT4gPD5cclxuICAgICAgICAgICAgICAgICAgICB7YmxvY2tzID8gPGRpdiBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICB7YmxvY2tzLm1hcChibG9jayA9PiA8ZGl2IGtleT17YmxvY2suaWR9IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLXZlcnRpY2FsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhPntibG9jay5uYW1lfTwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidG4tZ3JvdXBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Jsb2NrLnN0ZXBzLm1hcChzdGVwID0+IDxSZWFjdC5GcmFnbWVudCBrZXk9e3N0ZXAuc3RlcE5vfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TGlua1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG89e3N0ZXAubGlua31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17XCJidG4gYnRuLXNtYWxsIHN0ZXAtYnV0dG9uXCIgKyAoc3RlcC5pc0FjdGl2ZSA/IFwiIGFjdGl2ZVBhZ2VcIiA6IFwiXCIpfSA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c3RlcC5zdGVwTm99XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9MaW5rPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+KX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pil9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+IDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0naG9yaXpvbnRhbE1lbnUnPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPExhenlDb250ZW50PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmFnU3RhdGUubWFwKCh7IHRhYkJlaW5nRHJhZ2dlZCwgdGFiQmVpbmdIb3ZlcmVkLCBpbnNlcnRCZWZvcmUsIG9yaWdpbkNsaWVudFggfSkgPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8dWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17c29ydGFibGVUYWJzID8gXCJzb3J0YWJsZVwiIDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRHJvcD17b25UYWJEcm9wID8gZXYgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFiQmVpbmdIb3ZlcmVkICYmIHRhYkJlaW5nRHJhZ2dlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVGFiRHJvcCh0YWJCZWluZ0RyYWdnZWQsIHRhYkJlaW5nSG92ZXJlZCwgaW5zZXJ0QmVmb3JlID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiZWZvcmUnIDogJ2FmdGVyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmFnU3RhdGUuZGlzcGF0Y2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnRoaXMuZHJhZ1N0YXRlLnZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkJlaW5nSG92ZXJlZDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiQmVpbmdEcmFnZ2VkOiAnJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gOiBudWxsfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dGFicy5tYXAoKHsgbmFtZSwga2V5LCBsaW5rLCBvbkNsaWNrLCBkcmFnZ2FibGUgfSwgaWR4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzQWN0aXZlID0gYWN0aXZlVGFiID09PSBrZXkgfHwgKGFjdGl2ZVRhYiA9PT0gJyQnICYmIGlkeCA9PT0gMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHtkcmFnU3RhdGV9ID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9IG5hbWUgfHwgTGAoTmFtbmzDtnMgZmxpaylgO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gPFJlYWN0LkZyYWdtZW50IGtleT17a2V5fT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7aW5zZXJ0QmVmb3JlICYmIHRhYkJlaW5nSG92ZXJlZCA9PT0ga2V5ID8gPGxpIGNsYXNzTmFtZT1cImRyb3AtdGFyZ2V0XCIgb25EcmFnT3Zlcj17ZXYgPT4gZXYucHJldmVudERlZmF1bHQoKX0+Jm5ic3A7PC9saT4gOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17W1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0FjdGl2ZSA/IFwiYWN0aXZlUGFnZVwiIDogXCJcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5ID09PSB0YWJCZWluZ0RyYWdnZWQgPyBcImRyYWctc291cmNlXCIgOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3J0YWJsZVRhYnMgJiYgZHJhZ2dhYmxlID8gXCJkcmFnZ2FibGVcIiA6IFwiXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0uZmlsdGVyKHg9PngpLmpvaW4oJyAnKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZT17c29ydGFibGVUYWJzICYmIGRyYWdnYWJsZX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRHJhZ1N0YXJ0PXtzb3J0YWJsZVRhYnMgJiYgZHJhZ2dhYmxlID8gZXYgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldi5kYXRhVHJhbnNmZXIuZWZmZWN0QWxsb3dlZCA9IFwibW92ZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnU3RhdGUuZGlzcGF0Y2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRyYWdTdGF0ZS52YWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5DbGllbnRYOiBldi5jbGllbnRYLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkJlaW5nRHJhZ2dlZDoga2V5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkRyYWdPdmVyPXtzb3J0YWJsZVRhYnMgPyBldiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YWJCZWluZ0RyYWdnZWQgPT09IGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdTdGF0ZS5kaXNwYXRjaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5kcmFnU3RhdGUudmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJCZWluZ0hvdmVyZWQ6ICcnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGFiQmVpbmdEcmFnZ2VkKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2LmRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0ID0gXCJtb3ZlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJvbkRyYWdPdmVyOiBcIiArIG5hbWUgKyBcIi4gaWR4OiBcIiArIGlkeCArIFwiLiBvdGhlcklkeDogXCIgKyBvdGhlcklkeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdTdGF0ZS5kaXNwYXRjaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZHJhZ1N0YXRlLnZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkJlaW5nSG92ZXJlZDoga2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc2VydEJlZm9yZTogb3JpZ2luQ2xpZW50WCA+IGV2LmNsaWVudFh9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH06IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkRyYWdFbmQ9e2V2ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmFnU3RhdGUuZGlzcGF0Y2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRyYWdTdGF0ZS52YWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJCZWluZ0hvdmVyZWQ6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkJlaW5nRHJhZ2dlZDogJydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5rID8gbGluay5zdGFydHNXaXRoKFwiOlwiKSA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9e3ByZXNlcnZlSW1wZXJzb25hdGlvblF1ZXJ5KGxpbmsuc3Vic3RyKDEpLCB7fSl9PntuYW1lfTwvYT4gOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TGluayB0bz17bGlua30+e25hbWV9PC9MaW5rPiA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2sgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIG9uQ2xpY2s9e29uQ2xpY2t9PntuYW1lfTwvYT4gOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHshaW5zZXJ0QmVmb3JlICYmIHRhYkJlaW5nSG92ZXJlZCA9PT0ga2V5ID8gPGxpIGNsYXNzTmFtZT1cImRyb3AtdGFyZ2V0XCIgIG9uRHJhZ092ZXI9e2V2ID0+IGV2LnByZXZlbnREZWZhdWx0KCl9PiZuYnNwOzwvbGk+IDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9SZWFjdC5GcmFnbWVudD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2J1dHRvbnMgJiYgYnV0dG9ucy5tYXAoKGJ0biwgaWR4KSA9PiA8bGkgY2xhc3NOYW1lPVwiYWN0aW9uLXRhYlwiIGtleT17YGJ0biR7aWR4fWB9PntidG59PC9saT4pfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+KX1cclxuICAgICAgICAgICAgICAgICAgICAgIDwvTGF6eUNvbnRlbnQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgIDwvPil9XHJcbiAgICAgICAgICAgICAgICAgIDwvTGF6eUNvbnRlbnQ+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICApXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgQmFubmVyID0gKHByb3BzOiBCYW5uZXJQcm9wcykgPT4gPExhenlCYW5uZXIgbGF6eVByb3BzPXtuZXcgRW1pdHRlcjxCYW5uZXJQcm9wcz4ocHJvcHMpfSAvPlxyXG5cclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgRGlhbG9ncyB9IGZyb20gJy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9kaWFsb2dzJztcclxuaW1wb3J0IHsgV2l0aEdyYXBocywgS2VkQmFja2VuZFJlcG8gfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBDb3Vyc2VJbnN0YW5jZSwgQ291cnNlVGFiLCBDb3Vyc2VCbG9jayB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgRGlhbG9nc0NvbnRleHQgfSBmcm9tICcuL2RpYWxvZy1jb250ZXh0JztcclxuXHJcbmludGVyZmFjZSBTdGF0ZSB7XHJcbiAgICBkaWFsb2dzOiBhbnlbXTtcclxufVxyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHNldHVwRGlhbG9ncyA9IDxQIGV4dGVuZHMgb2JqZWN0PihDb21wb25lbnQ6IFJlYWN0LkNvbXBvbmVudFR5cGU8UD4pID0+XHJcbiAgY2xhc3MgRGlhbG9nQ29udGVudCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcywgU3RhdGU+IHtcclxuICAgIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xyXG4gICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgZGlhbG9nczogW11cclxuICAgICAgfTtcclxuICAgICAgdGhpcy5vcGVuRGlhbG9nID0gdGhpcy5vcGVuRGlhbG9nLmJpbmQodGhpcyk7XHJcbiAgICAgIHRoaXMuY2xvc2VEaWFsb2cgPSB0aGlzLmNsb3NlRGlhbG9nLmJpbmQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgb3BlbkRpYWxvZyhkaWFsb2cpIHtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGRpYWxvZ3M6IFsuLi50aGlzLnN0YXRlLmRpYWxvZ3MsIGRpYWxvZ10gfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2VEaWFsb2coKSB7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBkaWFsb2dzOiB0aGlzLnN0YXRlLmRpYWxvZ3Muc2xpY2UoMCwgdGhpcy5zdGF0ZS5kaWFsb2dzLmxlbmd0aCAtIDEpIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgY29uc3QgeyBkaWFsb2dzIH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgICByZXR1cm4gPERpYWxvZ3NDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXt7b3BlbkRpYWxvZyA6IHRoaXMub3BlbkRpYWxvZywgY2xvc2VEaWFsb2c6dGhpcy5jbG9zZURpYWxvZ319PlxyXG4gICAgICAgIDxDb21wb25lbnQgey4uLnRoaXMucHJvcHMgYXMgUH0+PC9Db21wb25lbnQ+XHJcbiAgICAgICAgPERpYWxvZ3MgZGlhbG9ncz17ZGlhbG9nc30gcG9wRGlhbG9nPXt0aGlzLmNsb3NlRGlhbG9nfSAvPlxyXG4gICAgIDwvRGlhbG9nc0NvbnRleHQuUHJvdmlkZXI+XHJcbiAgICB9XHJcbiAgfSIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmV4cG9ydCBjb25zdCBEaWFsb2dzQ29udGV4dCA9IFJlYWN0LmNyZWF0ZUNvbnRleHQoe29wZW5EaWFsb2c6IG51bGwsIGNsb3NlRGlhbG9nOiBudWxsfSk7IiwiZXhwb3J0IGNvbnN0IEZpZWxkTGltaXRzID0ge1xyXG4gIE1BWF9DSEFSU19JTl9DT05URU5UUzogNDAwMCxcclxuICBNQVhfQ0hBUlNfVEFTS19OQU1FUzogNjQsXHJcbiAgTUFYX0NIQVJTX1RBU0tfSU5UUk9fVEVYVDogMjAwXHJcbn07XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IGZ1dHVyZUFiaWxpdGllcyB9IGZyb20gJy4uLy4uLy4uL2NvbnRyYWN0cy9rZWQtbW9kZWxzJztcclxuaW1wb3J0IHsgT3BlbkNsb3NlQm94IH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL29wZW4tY2xvc2UtYm94JztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgdGl0bGU6IHN0cmluZ1xyXG4gIHNlbGVjdGVkRkFzOiBzdHJpbmdbXVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgRnV0dXJlQWJpbGl0aWVzQm94ID0gKHtcclxuICB0aXRsZSxcclxuICBzZWxlY3RlZEZBc1xyXG59OiBQcm9wcykgPT4gPE9wZW5DbG9zZUJveCB0aXRsZT17PHA+e3RpdGxlfTwvcD59IGNsYXNzTmFtZT1cImxhcmdlclwiPlxyXG4gICAgPGRpdiBjbGFzc05hbWU9XCJhYmlsaXR5TGlzdFwiPlxyXG4gICAgICB7c2VsZWN0ZWRGQXMubWFwKGZhID0+XHJcbiAgICAgICAgPGRpdiBrZXk9e2ZhfSBjbGFzc05hbWU9XCJjb250ZW50UGFydFwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50VGV4dFwiPlxyXG4gICAgICAgICAgICA8cD57ZmF9PC9wPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICl9XHJcbiAgICA8L2Rpdj5cclxuPC9PcGVuQ2xvc2VCb3g+XHJcbiIsImltcG9ydCBSZWFjdCwgeyBTdXNwZW5zZSB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgV29yZEJhbmtDb250ZW50U2V0dGluZ3MgfSBmcm9tICcuLi92aWV3ZXItZWRpdG9yL2NvdXJzZS1jb250ZW50cy93b3JkLWJhbmstY29udGVudC1zZXR0aW5ncyc7XHJcbmltcG9ydCB7IEVsbGlwc2lzTG9hZGVyIH0gZnJvbSAnLi4vLi4vY291cnNlLWJ1aWxkZXIvc3ViLWNvbXBvbmVudHMvZWxsaXBzaXMtbG9hZGVyJztcclxuaW1wb3J0IHsgY2ZnIH0gZnJvbSAnLi4vLi4vLi4vZ2xvYmFscy9LRUQuY2ZnJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgc3ViamVjdDogc3RyaW5nO1xyXG4gIHN0ZXA6IG51bWJlcjtcclxuICBvblNlbGVjdDogKHNlbGVjdGVkV29yZEJhbms6IHtuYW1lOiBzdHJpbmcsIHVybDogc3RyaW5nfSkgPT4gdm9pZDtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IFNlbGVjdFdvcmRCYW5rID0gKHtzdWJqZWN0LCBzdGVwLCBvblNlbGVjdH06IFByb3BzKSA9PiA8ZGl2IHN0eWxlPXt7bWluSGVpZ2h0OiA0MDB9fT48U3VzcGVuc2UgZmFsbGJhY2s9ezxFbGxpcHNpc0xvYWRlciAvPn0+XHJcbiAgICA8V29yZEJhbmtDb250ZW50U2V0dGluZ3Mgc3ViamVjdE5hbWU9e3N1YmplY3R9IHN0ZXBObz17c3RlcH0gb25DaGFuZ2U9eyh7bmFtZSwga2V5fSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHVybCA9IGAke2NmZy5LRURfV09SREJBTktTX1VSTH0/c3ViamVjdD0ke3N1YmplY3R9JnN0ZXA9JHtzdGVwfSZsaXN0PSR7a2V5fWA7XHJcbiAgICAgICAgb25TZWxlY3Qoe25hbWUsIHVybH0pO1xyXG4gICAgICB9XHJcbiAgICB9IC8+XHJcbiAgPC9TdXNwZW5zZT5cclxuPC9kaXY+O1xyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIGxlZnQ6IFJlYWN0LlJlYWN0Tm9kZTtcclxuICByaWdodDogUmVhY3QuUmVhY3ROb2RlO1xyXG4gIHJpZ2h0V2lkdGg6IDEgfCAyIHwgMyB8IDQgfCA1IHwgNiB8IDcgfCA4IHzCoDkgfCAxMCB8IDExO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgVHdvQ29sdW1uc1BhZ2UgPSAoeyBsZWZ0LCByaWdodCwgcmlnaHRXaWR0aCB9OiBQcm9wcykgPT4gKFxyXG4gIDxkaXYgY2xhc3NOYW1lPVwic3Ytcm93IHN2LWxheW91dFwiPlxyXG4gICAgPGRpdiBjbGFzc05hbWU9XCJzdi1sYXlvdXQgc3Ytc2tpcC1zcGFjZXIgc3YtY29sdW1uLTEyXCI+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3Ytc3BhY2VyLTIwcHh2dCBzdi12ZXJ0aWNhbCBzdi1sYXlvdXQgc3Ytc2tpcC1zcGFjZXJcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhZ2Vjb250ZW50IHN2LWxheW91dCBzdi1zcGFjZXItMjBweHZ0IHN2LXNraXAtc3BhY2VyXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInN2LXJvdyBzdi1sYXlvdXQgc3Ytc2tpcC1zcGFjZXJcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2Bzdi1sYXlvdXQgc3Ytc2tpcC1zcGFjZXIgc3YtY29sdW1uLSR7MTItcmlnaHRXaWR0aH1gfT5cclxuICAgICAgICAgICAgICB7bGVmdH1cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgc3YtbGF5b3V0IHN2LWNvbHVtbi0ke3JpZ2h0V2lkdGh9YH0+XHJcbiAgICAgICAgICAgICAge3JpZ2h0fVxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gIDwvZGl2PlxyXG4pO1xyXG4iLCJpbnRlcmZhY2UgT3JkZXJlZERvY3VtZW50IHtcclxuICBpZDogc3RyaW5nO1xyXG4gIG9yZGVyOiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZW9yZGVyKGRvY3M6IE9yZGVyZWREb2N1bWVudFtdLCBzb3VyY2VJZDogc3RyaW5nLCB0YXJnZXRJZDogc3RyaW5nLCBwbGFjZW1lbnQ6ICdiZWZvcmUnIHwgJ2FmdGVyJykge1xyXG4gIGNvbnN0IGRvY3NXaXRoSWR4ID0gZG9jcy5tYXAoKGRvYywgaWR4KSA9PiAoe2RvYywgaWR4fSkpO1xyXG4gIGNvbnN0IHNvdXJjZVdpdGhJZHggPSBkb2NzV2l0aElkeC5maWx0ZXIoKHtkb2N9KSA9PiBkb2MuaWQgPT09IHNvdXJjZUlkKVswXTtcclxuICBjb25zdCB0YXJnZXRXaXRoSWR4ID0gZG9jc1dpdGhJZHguZmlsdGVyKCh7ZG9jfSkgPT4gZG9jLmlkID09PSB0YXJnZXRJZClbMF07XHJcbiAgaWYgKHNvdXJjZVdpdGhJZHggJiYgdGFyZ2V0V2l0aElkeCkge1xyXG4gICAgY29uc3QgdGFyZ2V0SWR4ID0gdGFyZ2V0V2l0aElkeC5pZHg7XHJcbiAgICBsZXQgbmV3T3JkZXIgPSBzb3VyY2VXaXRoSWR4LmRvYy5vcmRlcjtcclxuICAgIGlmIChwbGFjZW1lbnQgPT09ICdhZnRlcicpIHtcclxuICAgICAgLy8gUGxhY2Ugc291cmNlIGFmdGVyIHRhcmdldFxyXG4gICAgICBpZiAodGFyZ2V0SWR4ID09PSBkb2NzLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAvLyBUYXJnZXQgaXMgbGFzdFxyXG4gICAgICAgIG5ld09yZGVyID0gRGF0ZS5ub3coKTsgLy8gRGF0ZS5ub3coKSBpcyBhbHdheXMgbGFzdCAodW5sZXNzIGEgdGFiIGlzIG1lYW5pbmdmdWxseSBnaXZlbiBhIGZ1dHVyZSBvcmRlciAtIHRoZW4gbGV0IGl0IHN0YXkgbGFzdCEpXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gR2l2ZSBhbiBvcmRlciBiZXR3ZWVuIHRhcmdldCBhbmQgaXRzIGN1cnJlbnQgbmVpZ2hib3VyIHRvIHRoZSByaWdodFxyXG4gICAgICAgIG5ld09yZGVyID0gZG9jc1t0YXJnZXRJZHhdLm9yZGVyICsgTWF0aC5yYW5kb20oKSAqIChkb2NzW3RhcmdldElkeCsxXS5vcmRlciAtIGRvY3NbdGFyZ2V0SWR4XS5vcmRlcik7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIFBsYWNlIHNvdXJjZSBiZWZvcmUgdGFyZ2V0XHJcbiAgICAgIGlmICh0YXJnZXRJZHggPT09IDApIHtcclxuICAgICAgICAvLyBUYXJnZXQgaXMgZmlyc3RcclxuICAgICAgICBuZXdPcmRlciA9IE1hdGgucm91bmQoZG9jc1swXS5vcmRlciAtIDEwMCAtIDEwMDAwICogTWF0aC5yYW5kb20oKSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gR2l2ZSBhbiBvcmRlciBiZXR3ZWVuIHRhcmdldCBhbmQgaXRzIGN1cnJlbnQgbmVpZ2hib3IgdG8gdGhlIGxlZnRcclxuICAgICAgICBuZXdPcmRlciA9IGRvY3NbdGFyZ2V0SWR4LTFdLm9yZGVyICsgTWF0aC5yYW5kb20oKSAqIChkb2NzW3RhcmdldElkeF0ub3JkZXIgLSBkb2NzW3RhcmdldElkeC0xXS5vcmRlcilcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ld09yZGVyO1xyXG4gIH1cclxuICByZXR1cm4gMDtcclxufVxyXG4iLCJpbXBvcnQgeyBDb3Vyc2VJbnN0YW5jZSwgQ291cnNlVGFiLCBDb3Vyc2VCbG9jaywgU3RlcENvdXJzZUluc3RhbmNlIH0gZnJvbSBcImtlZGJhY2tlbmQvbW9kZWxzXCI7XHJcbmltcG9ydCB7IGZsYXR0ZW4sIGRpc3RpbmN0IH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVUYXNrVGFnc0FuZFN1YmplY3QoY291cnNlOiBDb3Vyc2VJbnN0YW5jZSwgdGFiOiBDb3Vyc2VUYWIsIGJsb2NrOiBDb3Vyc2VCbG9jaykge1xyXG4gIGNvbnN0IHRhZ3MgPSBbY291cnNlLmlkXTsgIFxyXG4gIFxyXG4gIGlmICh0YWIudGFiQ2xhc3MgPT09ICdtaXNzaW9uLXRhYicpIHtcclxuICAgIC8vIElmIHRhc2sgYmVsb25ncyB0byBhIG1pc3Npb24gdGFiLFxyXG4gICAgLy8gaXQgc2hvdWxkIGJlIHRhZ2dlZCB3aXRoIGFsbCB0aGUgc3ViamVjdHMgb2YgdGhlIGNvdXJzZVxyXG4gICAgY29uc3Qgb3RoZXJTdWJqZWN0VGFicyA9IGNvdXJzZS50YWJzIVxyXG4gICAgICAuZmlsdGVyKHRhYiA9PiB0YWIudGFiQ2xhc3MgPT09ICdzdWJqZWN0LXRhYicpO1xyXG5cclxuICAgIGNvbnN0IHN1YmplY3RzID0gZGlzdGluY3Qob3RoZXJTdWJqZWN0VGFicy5tYXAodGFiID0+IHRhYi5zdWJqZWN0KSwgcyA9PiBzLnN1YmplY3RDb2RlKTtcclxuICAgIGNvbnN0IGNvdXJzZUNvZGVUYWdzID0gZGlzdGluY3QoZmxhdHRlbihcclxuICAgICAgb3RoZXJTdWJqZWN0VGFicy5tYXAoXHJcbiAgICAgICAgdGFiID0+IHRhYi50YWdzLmZpbHRlcih0YWcgPT4gdGFnLnN0YXJ0c1dpdGgoXCJjb3Vyc2U6XCIpKVxyXG4gICAgICApXHJcbiAgICApKTtcclxuXHJcbiAgICB0YWdzLnB1c2goLi4uc3ViamVjdHMubWFwKHMgPT4gXCJzdWI6XCIgKyBzLnN1YmplY3RDb2RlKSk7XHJcbiAgICB0YWdzLnB1c2goLi4uY291cnNlQ29kZVRhZ3MpO1xyXG4gICAgY29uc3Qgc3ViamVjdCA9IHN1YmplY3RzLm1hcChzID0+IHMuc3ViamVjdE5hbWUpLmpvaW4oJywgJyk7XHJcbiAgICByZXR1cm4geyB0YWdzLCBzdWJqZWN0IH07XHJcbiAgfSBlbHNlIHtcclxuICAgIHRhZ3MucHVzaCguLi4odGFiIHx8IGJsb2NrKS50YWdzLmZpbHRlcih0YWcgPT4gdGFnLnN0YXJ0c1dpdGgoXCJjb3Vyc2U6XCIpKSk7XHJcbiAgICBpZiAoY291cnNlLnR5cGUgPT09ICd0aGVtZS1jb3Vyc2UnKVxyXG4gICAgICB0YWdzLnB1c2goLi4udGFiLnRhZ3MuZmlsdGVyKHRhZyA9PiB0YWcuc3RhcnRzV2l0aChcInN1YjpcIikpKTtcclxuICAgIGVsc2VcclxuICAgICAgdGFncy5wdXNoKC4uLmJsb2NrLnRhZ3MuZmlsdGVyKHRhZyA9PiB0YWcuc3RhcnRzV2l0aChcInN1YjpcIikpKTtcclxuICAgIGNvbnN0IHN1YmplY3QgPSBjb3Vyc2UudHlwZSA9PT0gJ3RoZW1lLWNvdXJzZScgP1xyXG4gICAgICB0YWIuc3ViamVjdC5zdWJqZWN0TmFtZSA6XHJcbiAgICAgIChjb3Vyc2UgYXMgU3RlcENvdXJzZUluc3RhbmNlKS5zdWJqZWN0LnN1YmplY3ROYW1lO1xyXG4gICAgcmV0dXJuIHsgdGFncywgc3ViamVjdCB9O1xyXG4gIH1cclxufVxyXG5cclxuIiwiaW1wb3J0IHsgQ291cnNlSW5zdGFuY2UgfSBmcm9tIFwia2VkYmFja2VuZC9tb2RlbHNcIjtcclxuaW1wb3J0IHsgZGlzdGluY3QsIGZsYXR0ZW4gfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3ViamVjdENvZGVzICh0YWdzOiBzdHJpbmdbXSkge1xyXG4gIHJldHVybiBkaXN0aW5jdCgodGFncyB8fMKgW10pXHJcbiAgICAuZmlsdGVyKHRhZyA9PiB0YWcuc3RhcnRzV2l0aChcInN1YjpcIikpXHJcbiAgICAubWFwKHRhZyA9PiB0YWcuc3Vic3RyKFwic3ViOlwiLmxlbmd0aCkpXHJcbiAgKTs7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRTY2hvb2xZZWFycyh0YWdzOiBzdHJpbmdbXSkge1xyXG4gIHJldHVybiBkaXN0aW5jdCgodGFncyB8fCBbXSlcclxuICAgIC5maWx0ZXIodGFnID0+IHRhZy5zdGFydHNXaXRoKFwiY291cnNlOlwiKSlcclxuICAgIC5tYXAodGFnID0+IHRhZy5zdWJzdHIodGFnLmluZGV4T2YoXCJ8XCIpICsgMSkpIC8vIFNjaG9vbCB5ZWFyIGlzIGNvbmNhdGVuYXRlZCBhcyBwaXBlICsgc2Nob29seWVhci4gRXhhbXBsZTogXCJHUkdSRllTMDF8NC02XCJcclxuICApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY29tcHV0ZUNvdXJzZUluc3RhbmNlVGFncyAodGFnczogc3RyaW5nW10sIHN1YmplY3RDb2Rlczogc3RyaW5nW10sIHNjaG9vbFllYXJzOiBzdHJpbmdbXSkge1xyXG4gIGNvbnN0IG90aGVyVGFncyA9ICh0YWdzIHx8IFtdKS5maWx0ZXIodGFnID0+ICF0YWcuc3RhcnRzV2l0aChcImNvdXJzZTpcIikgJiYgIXRhZy5zdGFydHNXaXRoKFwic3ViOlwiKSk7XHJcbiAgY29uc3Qgc3ViamVjdFRhZ3MgPSBzdWJqZWN0Q29kZXMubWFwKHN1YiA9PiBcInN1YjpcIiArIHN1Yik7XHJcbiAgY29uc3QgY291cnNlVGFncyA9IGZsYXR0ZW4oXHJcbiAgICAgICAgc3ViamVjdENvZGVzLm1hcChzdWIgPT5cclxuICAgICAgICAgIHNjaG9vbFllYXJzLm1hcChzY2hvb2xZZWFyID0+XHJcbiAgICAgICAgICAgIFwiY291cnNlOlwiICsgc3ViICsgXCJ8XCIgKyBzY2hvb2xZZWFyKSkpO1xyXG4gIHJldHVybiBvdGhlclRhZ3NcclxuICAgIC5jb25jYXQoc3ViamVjdFRhZ3MpXHJcbiAgICAuY29uY2F0KGNvdXJzZVRhZ3MpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY29tcHV0ZVRhZ3NGcm9tU2Nob29sWWVhcnModGFnczogc3RyaW5nW10sIHNjaG9vbFllYXJzOiBzdHJpbmdbXSkge1xyXG4gIC8vc2Nob29sWWVhcnMgPSBzY2hvb2xZZWFycy5tYXAoYWZ0ZXJDb2xvbik7XHJcbiAgY29uc3Qgc3ViamVjdENvZGVzID0gZ2V0U3ViamVjdENvZGVzKHRhZ3MpO1xyXG4gIHJldHVybiBjb21wdXRlQ291cnNlSW5zdGFuY2VUYWdzKHRhZ3MsIHN1YmplY3RDb2Rlcywgc2Nob29sWWVhcnMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY29tcHV0ZVRhZ3NGcm9tU3ViamVjdENvZGVzKHRhZ3M6IHN0cmluZ1tdLCBzdWJqZWN0Q29kZXM6IHN0cmluZ1tdKSB7XHJcbiAgLy9zdWJqZWN0Q29kZXMgPSBzdWJqZWN0Q29kZXMubWFwKGFmdGVyQ29sb24pO1xyXG4gIGNvbnN0IHNjaG9vbFllYXJzID0gZ2V0U2Nob29sWWVhcnModGFncyk7XHJcbiAgcmV0dXJuIGNvbXB1dGVDb3Vyc2VJbnN0YW5jZVRhZ3ModGFncywgc3ViamVjdENvZGVzLCBzY2hvb2xZZWFycyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFmdGVyQ29sb24gKHN0cjogc3RyaW5nKSB7XHJcbiAgY29uc3QgcENvbG9uID0gc3RyLmluZGV4T2YoJzonKTtcclxuICByZXR1cm4gcENvbG9uID49IDAgP1xyXG4gICAgc3RyLnN1YnN0cihwQ29sb24gKyAxKSA6XHJcbiAgICBzdHI7XHJcbn1cclxuIiwiXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRDb3Vyc2VDb2Rlc0Zyb21UYWdzKHRhZ3M6IHN0cmluZ1tdKSB7XHJcbiAgcmV0dXJuICh0YWdzIHx8IFtdKVxyXG4gICAgLmZpbHRlcih0YWcgPT4gdGFnLnN0YXJ0c1dpdGgoXCJjb3Vyc2U6XCIpKVxyXG4gICAgLm1hcChjb3Vyc2VUYWcgPT4gY291cnNlVGFnLnN1YnN0cihcImNvdXJzZTpcIi5sZW5ndGgpKTtcclxufVxyXG4iLCJpbXBvcnQgeyBkYiB9IGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvZGInO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldERyYWZ0SWQoc2Nob29sOiBzdHJpbmcsIGNvdXJzZUlkOiBzdHJpbmcpIHtcclxuICByZXR1cm4gZGIuc2Nob29scy5uYW1lKHNjaG9vbCkuc2luZ2xlKCkgLy8gR2V0IHRoZSBzY2hvb2wgT2JzZXJ2YWJsZVxyXG4gICAgLnN3aXRjaE1hcChzY2hvb2wgPT5cclxuICAgICAgZGIuYnJhbmNoZXNcclxuICAgICAgICAuaGFzRWRnZXNGcm9tKFtzY2hvb2wub2ZmaWNpYWxCcmFuY2hJZF0pIC8vIFRoZSBvZmZpY2lhbCBkcmFmdCBoYXMgZWRnZXMgZnJvbSB0aGUgb2ZmaWNpYWwgc2Nob29sIGJyYW5jaFxyXG4gICAgICAgIC5uYW1lKFwiZHJhZnRcIikgLy8gVGhlcmUgbWlnaHQgYmUgb3RoZXIgcGVyc29uYWwgZHJhZnRzIGluIGZ1dHVyZS4gUmVxdWlyZW1lbnQgb2YgdGhlIGNvbW1vbiBkcmFmdCBpcyB0aGF0IGl0IGlzIG5hbWVkIFwiZHJhZnRcIlxyXG4gICAgICAgIC50YWdzKGNvdXJzZUlkKSAvLyBGaW5kIHRoZSBvbmUgdGFnZ2VkIHdpdGggdGhlIGNvdXJzZUlkLiBUaGVyZSBhcmUgc2V2ZXJhbCBkcmFmdHMgLSBvbmUgZm9yIGVhY2ggY291cnNlLlxyXG4gICAgICAgIC5pZHNPbmx5KClcclxuICAgICAgICAubWFwKCh7aWR9KSA9PiBpZClcclxuICAgICAgICAuZmlyc3QoKVxyXG4gICAgKTtcclxufVxyXG5cclxuIiwiaW1wb3J0IHsgQWJpbGl0eSwgQ2VudHJhbENvbnRlbnQsIEtub3dsZWRnZVJlcXVpcmVtZW50LCBDb3Vyc2UgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IFZhbHVlLCBDb2xsZWN0aW9uLCBFbWl0dGVyIH0gZnJvbSAna2VkYmFja2VuZC9vYnNlcnZhYmxlJztcclxuaW1wb3J0IHsgZGIgfSBmcm9tICcuLi8uLi8uLi9nbG9iYWxzL2RiJztcclxuaW1wb3J0IHsgZ2V0T3JkZXJlZERvY3MgfSBmcm9tICcuL29yZGVyZWQtcmVxdWlyZW1lbnRzJztcclxuaW1wb3J0IHsgV2l0aEdyYXBocyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcblxyXG5cclxuZXhwb3J0IHR5cGUgQ291cnNlV2l0aFJlcXVpcmVtZW50cyA9IFdpdGhHcmFwaHM8Q291cnNlLCBcImFiaWxpdGllc1wiIHwgXCJjZW50cmFsQ29udGVudFwiIHwgXCJrbm93bGVkZ2VSZXF1aXJlbWVudHNcIj47XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3RhbmRhcmRDb3Vyc2VzV2l0aE9yZGVyZWRSZXF1aXJlbWVudHMoY291cnNlQ29kZXM6IHN0cmluZ1tdKTogVmFsdWU8Q291cnNlV2l0aFJlcXVpcmVtZW50c1tdPiB7XHJcbiAgY29uc3QgY291cnNlQ29kZVRhZ3MgPSBjb3Vyc2VDb2Rlcy5tYXAoY29kZSA9PiBjb2RlLnN0YXJ0c1dpdGgoJ2NvdXJzZTonKSA/IGNvZGUgOiBcImNvdXJzZTpcIiArIGNvZGUpO1xyXG4gIGlmIChjb3Vyc2VDb2RlVGFncy5sZW5ndGggPT09IDApIHJldHVybiBuZXcgRW1pdHRlcihbXSk7XHJcbiAgcmV0dXJuIGRiLmNvdXJzZXMuaW5jbHVkZShcImFiaWxpdGllc1wiLCBcImNlbnRyYWxDb250ZW50XCIsIFwia25vd2xlZGdlUmVxdWlyZW1lbnRzXCIpXHJcbiAgICAudGFncyguLi5jb3Vyc2VDb2RlVGFncylcclxuICAgIC5maWx0ZXIoY291cnNlID0+IGNvdXJzZS5pc1RlbXBsYXRlKSAvLyBCVUdCVUc6IEluIEtHLCB3ZSB3b3VsZCBuZWVkIHRoaXMgZmlsdGVyLCBub3QgS1MuIE5lZWQgYW5vdGhlciBhdXRob3JpemVkIHdheSBvZiBnZXR0aW5nIHRoZSBzdGFuZGFyZCBjb3Vyc2Ugb25seSFcclxuICAgIC5tYXAoY291cnNlID0+ICh7XHJcbiAgICAgIC4uLmNvdXJzZSxcclxuICAgICAgYWJpbGl0aWVzOiBnZXRPcmRlcmVkRG9jcyhjb3Vyc2UuYWJpbGl0aWVzLCBjb3Vyc2UuYWJpbGl0aWVzT3JkZXIpLFxyXG4gICAgICBjZW50cmFsQ29udGVudDogZ2V0T3JkZXJlZERvY3MoY291cnNlLmNlbnRyYWxDb250ZW50LCBjb3Vyc2UuY2VudHJhbENvbnRlbnRPcmRlciksXHJcbiAgICAgIGtub3dsZWRnZVJlcXVpcmVtZW50czogZ2V0T3JkZXJlZERvY3MoY291cnNlLmtub3dsZWRnZVJlcXVpcmVtZW50cywgY291cnNlLmtub3dsZWRnZVJlcXVpcmVtZW50c09yZGVyKVxyXG4gICAgfSkpLnRvVmFsdWUoKVxyXG59XHJcbiIsImltcG9ydCBlbnYgZnJvbSAnLi4vLi4vLi4vZ2xvYmFscy9LRUQuZW52JztcclxuaW1wb3J0IHsgaXNUZWFjaGVyQXRTY2hvb2wgfSBmcm9tICcuLi8uLi8uLi9hY2Nlc3MtY29udHJvbCc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNFbXBsb3llZShhdFNjaG9vbD86IHN0cmluZykge1xyXG4gIHJldHVybiBhdFNjaG9vbCA/XHJcbiAgICBpc1RlYWNoZXJBdFNjaG9vbChlbnYuY3VycmVudFVzZXIsIGF0U2Nob29sKSB8fCBlbnYuY3VycmVudFVzZXIucm9sZXMuaW5jbHVkZXMoXCJBRE1JTlwiKSA6XHJcbiAgICBlbnYuY3VycmVudFVzZXIucm9sZXMuc29tZShyb2xlID0+IHJvbGUgPT09ICdFTVBMT1lFRScgfHwgcm9sZSA9PT0gJ0FETUlOJyk7XHJcbn1cclxuIiwiaW1wb3J0IGVudiBmcm9tICcuLi8uLi8uLi9nbG9iYWxzL0tFRC5lbnYnXHJcbmltcG9ydCB7IGlzQWRtaW5PclRlYWNoZXJBdFNjaG9vbCB9IGZyb20gJy4uLy4uLy4uL2FjY2Vzcy1jb250cm9sJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0tlZFN0YWZmKCkge1xyXG4gIHJldHVybiBpc0FkbWluT3JUZWFjaGVyQXRTY2hvb2woZW52LmN1cnJlbnRVc2VyLCBcInN0YW5kYXJkXCIpO1xyXG59XHJcbiIsImltcG9ydCB7IGRiLCBnbG9iYWxJZCB9IGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvZGInO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGxpc3RDb3Vyc2VJbnN0YW5jZXMoKSB7XHJcbiAgcmV0dXJuIGRiLmNvdXJzZUluc3RhbmNlcy5oYXNFZGdlc0Zyb20oW2dsb2JhbElkXSk7XHJcbn1cclxuIiwiaW1wb3J0IHsgQ29sbGVjdGlvbiwgRW1pdHRlciwgVmFsdWUgfSBmcm9tICdrZWRiYWNrZW5kL29ic2VydmFibGUnO1xyXG5pbXBvcnQgeyBUYXNrIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBkYiB9IGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvZGInO1xyXG5pbXBvcnQgeyBmbGF0dGVuLCBkaXN0aW5jdCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgV2l0aEdyYXBocyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcblxyXG4vKiogQ291cnNlICovXHJcbmludGVyZmFjZSBPcmRlckRlZmluaW5nRG9jIHtcclxuICBrbm93bGVkZ2VSZXF1aXJlbWVudHNPcmRlcj86IHN0cmluZ1tdICAgLy8gQ291cnNlXHJcbiAgY2VudHJhbENvbnRlbnRPcmRlcj86IHN0cmluZ1tdICAgICAgICAgIC8vIENvdXJzZVxyXG4gIGFiaWxpdGllc09yZGVyPzogc3RyaW5nW10gICAgICAgICAgICAgICAvLyBDb3Vyc2UgKyBTdWJqZWN0XHJcbn1cclxuXHJcbi8qKiBDb3Vyc2UsIENvdXJzZUluc3RhbmNlLCBUYXNrLCBMZWFybmluZ0dvYWxzQ29udGVudCBvciBDb3Vyc2VCbG9jayAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFJlcXVpcmVtZW50c0NvbnRhaW5pbmdEb2Mge1xyXG4gIHRhZ3M6IHN0cmluZ1tdOyAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3Vyc2UgKyBDb3Vyc2VJbnN0YW5jZSwgVGFza1xyXG4gIGNlbnRyYWxDb250ZW50Pzoge2lkOiBzdHJpbmd9W107ICAgICAgICAvLyBDb3Vyc2UgKyBMZWFybmluZ0dvYWxzQ29udGVudCArIENvdXJzZUJsb2NrICsgVGFza1xyXG4gIGtub3dsZWRnZVJlcXVpcmVtZW50cz86IHtpZDogc3RyaW5nfVtdOyAvLyBDb3Vyc2UgKyBMZWFybmluZ0dvYWxzQ29udGVudCArIENvdXJzZUJsb2NrICsgVGFza1xyXG4gIGFiaWxpdGllcz86IHtpZDogc3RyaW5nfVtdOyAvLyBDb3Vyc2UsIExlYXJuaW5nR29hbHNDb250ZW50LCBDb3Vyc2VCbG9jaywgVGFza1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0T3JkZXJlZERvY3M8VCBleHRlbmRzIHtpZDogc3RyaW5nfT4oZG9jcz86IFRbXSwgb3JkZXI/OiBzdHJpbmdbXSwge2FwcGVuZExlZnRvdmVyc30gPSB7YXBwZW5kTGVmdG92ZXJzOmZhbHNlfSkge1xyXG4gIC8vIE1hcmsgZG9jIElEcyB0aGF0IHdoZXJlIHByZXNlbnQgaW4gZ2l2ZW4gJ29yZGVyJyBhcnJheS5cclxuICAvLyBXaWxsIGJlIHVzZWQgdG8gZmluZCBsZWZ0LW92ZXJzIHRoYXQgd2VyZSBub3QgcHJlc2VudCBpbiB0aGUgJ29yZGVyJyBhcnJheS5cclxuICBjb25zdCBtYXJrZWREb2NzOiB7W2lkOiBzdHJpbmddOiB0cnVlfSA9IHt9O1xyXG5cclxuICBpZiAoIWRvY3MgfHwgIW9yZGVyKSB7XHJcbiAgICAvLyBTcGVjaWFsIGNhc2U6IG5vIGRvY3Mgb3Igbm8gb3JkZXIuIERvbid0IGZhaWwuIEp1c3QgcmV0dXJuIGRvY3MgYXMgaXMuXHJcbiAgICByZXR1cm4gZG9jcztcclxuICB9XHJcblxyXG4gIC8vIE1hcCBnaXZlbiAnb3JkZXInIGFycmF5IHRvIGNvcnJlc3BvbmRpbmcgZG9jcy4gQWxzbyBtYXJrIGluIG1hcmtlZERvY3MuXHJcbiAgY29uc3QgcmVzdWx0ID0gKGRvY3MgJiYgb3JkZXIgP1xyXG4gICAgb3JkZXIubWFwKGlkID0+IHtcclxuICAgICAgbWFya2VkRG9jc1tpZF0gPSB0cnVlO1xyXG4gICAgICByZXR1cm4gZG9jcy5maW5kKGRvYyA9PiBkb2MuaWQgPT09IGlkKTtcclxuICAgIH0pLmZpbHRlcihkb2MgPT4gISFkb2MpIDpcclxuICAgIGRvY3MpO1xyXG5cclxuICBpZiAoYXBwZW5kTGVmdG92ZXJzKSB7ICAgICAgXHJcbiAgICAvLyBJZiBhbnkgbGVmdG92ZXJzIGFyZSB0aGVyZSwgY29uY2F0IHRoZW0gYXQgdGhlIGVuZDpcclxuICAgIGNvbnN0IGxlZnRPdmVycyA9IGRvY3MuZmlsdGVyKGRvYyA9PiAhbWFya2VkRG9jc1tkb2MuaWRdKTtcclxuICAgIHJldHVybiByZXN1bHQuY29uY2F0KGxlZnRPdmVycyk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZVJlcXVpcmVtZW50T3JkZXI8VCBleHRlbmRzIFJlcXVpcmVtZW50c0NvbnRhaW5pbmdEb2M+KG9iajogVCwgb3JkZXJEZWZpbmVyPzogT3JkZXJEZWZpbmluZ0RvYyk6IFZhbHVlPFQ+IHtcclxuICBsZXQgb3JkZXJEZWZpbmluZ0RvY09ic2VydmFibGU6IFZhbHVlPE9yZGVyRGVmaW5pbmdEb2NbXT47XHJcbiAgaWYgKG9yZGVyRGVmaW5lcikge1xyXG4gICAgLy8gVXNlciBwcm92aWRlZCB0aGUgb3JkZXJEZWZpbmluZyBkb2MgKHVzZSBjYXNlIGlzIHdoZW4gb2JqIGlzIGEgQ291cnNlIG9yIFN1YmplY3QsIHdoaWNoIGNvbnRhaW5zIGl0cyBvcmRlciBieSBpdHNlbGYuIFVzZXIgdGhlbiBwcm92aWRlcyB0aGUgQ291cnNlIG9yIFN1YmplY3QgaW4gYm90aCBhcmdzKVxyXG4gICAgb3JkZXJEZWZpbmluZ0RvY09ic2VydmFibGUgPSBuZXcgRW1pdHRlcihbb3JkZXJEZWZpbmVyXSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGNvbnN0IGNvdXJzZUNvZGVzID0gb2JqLnRhZ3MuZmlsdGVyKHRhZyA9PiB0YWcuc3RhcnRzV2l0aChcImNvdXJzZTpcIikpO1xyXG4gICAgaWYgKGNvdXJzZUNvZGVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gbmV3IEVtaXR0ZXIob2JqKTsgLy8gTm8gY291cnNlIHRhZ3MuIE5vdCBwb3NzaWJsZSB0byByZXNvbHZlIG9yZGVyLlxyXG4gICAgfVxyXG4gICAgb3JkZXJEZWZpbmluZ0RvY09ic2VydmFibGUgPSBkYi5jb3Vyc2VzLnRhZ3MoLi4uY291cnNlQ29kZXMpLnRvVmFsdWUoKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBvcmRlckRlZmluaW5nRG9jT2JzZXJ2YWJsZS5tYXAob3JkZXJIb2xkZXJzID0+IHtcclxuICAgIGNvbnN0IGFiaWxpdGllc09yZGVyID0gZmxhdHRlbihvcmRlckhvbGRlcnMubWFwKG9yZGVySG9sZGVyID0+IG9yZGVySG9sZGVyLmFiaWxpdGllc09yZGVyIHx8IFtdKSk7XHJcbiAgICBjb25zdCBjY09yZGVyID0gZmxhdHRlbihvcmRlckhvbGRlcnMubWFwKG9yZGVySG9sZGVyID0+IG9yZGVySG9sZGVyLmNlbnRyYWxDb250ZW50T3JkZXIgfHwgW10pKTtcclxuICAgIGNvbnN0IGtyT3JkZXIgPSBmbGF0dGVuKG9yZGVySG9sZGVycy5tYXAob3JkZXJIb2xkZXIgPT4gb3JkZXJIb2xkZXIua25vd2xlZGdlUmVxdWlyZW1lbnRzT3JkZXIgfHwgW10pKTtcclxuICAgIGNvbnN0IG9iakNsb25lID0gT2JqZWN0LmFzc2lnbih7fSwgb2JqKTtcclxuICAgIGlmIChvYmpDbG9uZS5hYmlsaXRpZXMpIG9iakNsb25lLmFiaWxpdGllcyA9IGdldE9yZGVyZWREb2NzKG9iai5hYmlsaXRpZXMsIGFiaWxpdGllc09yZGVyKTtcclxuICAgIGlmIChvYmpDbG9uZS5jZW50cmFsQ29udGVudCkgb2JqQ2xvbmUuY2VudHJhbENvbnRlbnQgPSBnZXRPcmRlcmVkRG9jcyhvYmouY2VudHJhbENvbnRlbnQsIGNjT3JkZXIpO1xyXG4gICAgaWYgKG9iakNsb25lLmtub3dsZWRnZVJlcXVpcmVtZW50cykgb2JqQ2xvbmUua25vd2xlZGdlUmVxdWlyZW1lbnRzID0gZ2V0T3JkZXJlZERvY3Mob2JqLmtub3dsZWRnZVJlcXVpcmVtZW50cywga3JPcmRlcik7XHJcbiAgICByZXR1cm4gb2JqQ2xvbmU7XHJcbiAgfSk7XHJcbn1cclxuIiwiaW1wb3J0IHsgS2VkQmFja2VuZFJlcG8gfSBmcm9tIFwia2VkYmFja2VuZC9yZXBvXCI7XHJcbmltcG9ydCB7IFJvdXRlQ29tcG9uZW50UHJvcHMgfSBmcm9tICdyZWFjdC1yb3V0ZXInO1xyXG5pbXBvcnQgeyBkYiB9IGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvZGInO1xyXG5pbXBvcnQgZW52IGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCB7IENvdXJzZUluc3RhbmNlIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQdWJsaXNoQ291cnNlQXJndW1lbnRzIHtcclxuICBzY2hvb2w6IHN0cmluZztcclxuICBkcmFmdFJlcG86IEtlZEJhY2tlbmRSZXBvO1xyXG4gIGNvdXJzZTogQ291cnNlSW5zdGFuY2U7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwdWJsaXNoQ291cnNlKHtzY2hvb2wsIGRyYWZ0UmVwbywgY291cnNlfTogUHVibGlzaENvdXJzZUFyZ3VtZW50cykge1xyXG4gIGxldCBkZXN0aW5hdGlvblJlcG86IEtlZEJhY2tlbmRSZXBvO1xyXG4gIGlmIChzY2hvb2wgPT09IFwic3RhbmRhcmRcIikge1xyXG4gICAgLy8gRWRpdGluZyBTdGFuZGFyZCBTY2hvb2wgc2hvdWxkIG1lcmdlIHRvIHJlYWxpdHkuXHJcbiAgICBkcmFmdFJlcG8ubWVyZ2UoKTtcclxuICAgIGRlc3RpbmF0aW9uUmVwbyA9IGRiO1xyXG4gIH1cclxuICBlbHNlIHtcclxuICAgIC8vIEVkaXRpbmcgY2VydGFpbiBzY2hvb2wgc2hvdWxkIG1lcmdlIHRvIHNjaG9vbCBicmFuY2guXHJcbiAgICBjb25zdCBzY2hvb2xCcmFuY2hJZCA9IGF3YWl0IGRiLnNjaG9vbHMubmFtZShzY2hvb2wpLnNpbmdsZSgpLm1hcChzY2hvb2wgPT4gc2Nob29sLm9mZmljaWFsQnJhbmNoSWQpLmxvYWQoKTtcclxuICAgIGRyYWZ0UmVwby5tZXJnZShzY2hvb2xCcmFuY2hJZCk7XHJcbiAgICBkZXN0aW5hdGlvblJlcG8gPSBkYi5icmFuY2goc2Nob29sQnJhbmNoSWQpO1xyXG4gIH1cclxuICBkZXN0aW5hdGlvblJlcG8uY291cnNlSW5zdGFuY2VzLnVwZGF0ZShjb3Vyc2UsIHtcclxuICAgIG1vZGlmaWVkRGF0ZTogRGF0ZS5ub3coKSxcclxuICAgIG1vZGlmaWVkQnk6IHtcclxuICAgICAgbmFtZTogZW52LmN1cnJlbnRVc2VyLmRpc3BsYXlOYW1lLFxyXG4gICAgICB1cmw6IGBtYWlsdG86JHtlbnYuY3VycmVudFVzZXIubWFpbH1gXHJcbiAgICB9XHJcbiAgfSk7XHJcbiAgLy9hd2FpdCBkYi5zYXZlTm93KCk7XHJcbiAgLy9oaXN0b3J5LnB1c2goYC8ke3NjaG9vbH0vY291cnNlcy8ke2NvdXJzZUlkfS90YWJzLyR7YWN0aXZlVGFiIHx8ICckJ31gKTtcclxufVxyXG5cclxuIiwiaW1wb3J0IHsgVGFzaywgTGVhcm5pbmdHb2Fsc0NvbnRlbnQgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IGNvbXBhcmVQcm9wLCBmbGF0dGVuIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kUmVwbyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IGdldE9yZGVyZWREb2NzIH0gZnJvbSAnLi9vcmRlcmVkLXJlcXVpcmVtZW50cyc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0U29ydGVkVGFza3MoY29udGVudDogTGVhcm5pbmdHb2Fsc0NvbnRlbnQpIHtcclxuICByZXR1cm4gZ2V0T3JkZXJlZERvY3MoY29udGVudC50YXNrcywgY29udGVudC50YXNrT3JkZXIsIHthcHBlbmRMZWZ0b3ZlcnM6IHRydWV9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVVcGRhdGVkT3JkZXI8VCBleHRlbmRzIHtpZDogc3RyaW5nfT4oXHJcbiAgZG9jczogVFtdLFxyXG4gIGN1cnJlbnRPcmRlcjogc3RyaW5nW10gfCB1bmRlZmluZWQsXHJcbiAgc291cmNlOiBULFxyXG4gIHRhcmdldDogVCxcclxuICBwbGFjZW1lbnQ6ICdiZWZvcmUnIHwgJ2FmdGVyJyxcclxuICB7YXBwZW5kTGVmdG92ZXJzfSA9IHthcHBlbmRMZWZ0b3ZlcnM6IGZhbHNlfSkgOiBzdHJpbmdbXVxyXG57XHJcbiAgY29uc3Qgb3JkZXJlZElkcyA9IGdldE9yZGVyZWREb2NzKGRvY3MsIGN1cnJlbnRPcmRlciwge2FwcGVuZExlZnRvdmVyczogdHJ1ZX0pLm1hcCh0ID0+IHQuaWQpO1xyXG4gIGNvbnN0IHBsYWNlQmVmb3JlID0gcGxhY2VtZW50ID09PSAnYmVmb3JlJztcclxuXHJcbiAgY29uc3QgcmVzdWx0ID0gZmxhdHRlbihcclxuICAgIG9yZGVyZWRJZHNcclxuICAgICAgLmZpbHRlcihpZCA9PiBpZCAhPT0gc291cmNlLmlkKSAvLyBSZW1vdmUgc291cmNlIGlkXHJcbiAgICAgIC5tYXAoaWQgPT4gaWQgIT09IHRhcmdldC5pZCA/XHJcbiAgICAgICAgLy8gV2UncmUgbm90IG9uIHRhcmdldFxyXG4gICAgICAgIGlkIDpcclxuICAgICAgICAvLyBXZSdyZSBvbiB0YXJnZXQuIFBsYWNlIGJlZm9yZSBvciBhZnRlcj9cclxuICAgICAgICBwbGFjZUJlZm9yZSA/XHJcbiAgICAgICAgICBbc291cmNlLmlkLCBpZF0gOlxyXG4gICAgICAgICAgW2lkLCBzb3VyY2UuaWRdXHJcbiAgICAgIClcclxuICApO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBTdHJpcEdyYXBocywgS2VkQmFja2VuZFJlcG8gfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBDb3Vyc2VJbnN0YW5jZSwgQ291cnNlVGFiLCBDb3Vyc2VDb250ZW50LCBSaWNoVGV4dENvbnRlbnQsIExlYXJuaW5nR29hbHNDb250ZW50LCBFbWJlZGRlZEhUTUxDb250ZW50LCBSZXNvdXJjZUxpc3QsIFdvcmRCYW5rQ29udGVudCB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgY3JlYXRlVVVJRCB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcclxuaW1wb3J0IHsgaXNLZWRTdGFmZiB9IGZyb20gJy4uL2xvZ2ljL2lzLWtlZC1zdGFmZic7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIGNvdXJzZTogU3RyaXBHcmFwaHM8Q291cnNlSW5zdGFuY2U+O1xyXG4gIHRhYjogU3RyaXBHcmFwaHM8Q291cnNlVGFiPjtcclxuICBicmFuY2g6IEtlZEJhY2tlbmRSZXBvO1xyXG4gIHR5cGU/OiBrZXlvZiB0eXBlb2YgQUREX1RJVExFU1xyXG59XHJcblxyXG5pbnRlcmZhY2UgU3RhdGUge1xyXG4gIG9wZW46IGJvb2xlYW47XHJcbiAgY29udGVudFR5cGU6IHN0cmluZztcclxufVxyXG5cclxuY29uc3QgQ09OVEVOVF9UWVBFUyA9IHtcclxuICBcInJpY2gtdGV4dFwiOiBMYFRleHRydXRhYCxcclxuICBcInlvdXR1YmUtbW92aWVcIjogTGBZb3V0dWJlIGZpbG1gLFxyXG4gIFwibGVhcm5pbmctZ29hbHNcIjogTGBMw6RyYW5kZW3DpWwgb2NoIHVwcGdpZnRlcmAsXHJcbiAgXCJyZXNvdXJjZS1saXN0XCI6IExgUmVzdXJzbGlzdGFgLFxyXG4gIFwiZW1iZWRkZWQtaHRtbFwiOiBMYEluYsOkZGRhZCBIVE1MYCxcclxuICBcIndvcmQtYmFua1wiOiBMYE9yZGJhbmtgXHJcbn07XHJcblxyXG5jb25zdCBBRERfVElUTEVTOiB0eXBlb2YgQ09OVEVOVF9UWVBFUyA9IHtcclxuICBcInJpY2gtdGV4dFwiOiBMYEzDpGdnIHRpbGwgdGV4dGAsXHJcbiAgXCJ5b3V0dWJlLW1vdmllXCI6IExgTMOkZ2cgdGlsbCB5b3V0dWJlIGZpbG1gLFxyXG4gIFwibGVhcm5pbmctZ29hbHNcIjogTGBMw6RnZyB0aWxsIGzDpHJhbmRlbcOlbCBvY2ggdXBwZ2lmdGVyYCxcclxuICBcInJlc291cmNlLWxpc3RcIjogTGBMw6RnZyB0aWxsIHJlc3Vyc2xpc3RhYCxcclxuICBcImVtYmVkZGVkLWh0bWxcIjogTGBMw6RnZyB0aWxsIGluYsOkZGRhZCBIVE1MYCxcclxuICBcIndvcmQtYmFua1wiOiBMYEzDpGdnIHRpbGwgb3JkYmFua2BcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEFkZENvbnRlbnRCdXR0b24gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsIFN0YXRlPiB7XHJcbiAgY29uc3RydWN0b3IgKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIgKHByb3BzKTtcclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIG9wZW46IGZhbHNlLFxyXG4gICAgICBjb250ZW50VHlwZTogJ3JpY2gtdGV4dCdcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBjcmVhdGVDb250ZW50KCkge1xyXG4gICAgY29uc3Qge3RhYiwgYnJhbmNoLCB0eXBlfSA9IHRoaXMucHJvcHM7XHJcbiAgICBjb25zdCBuZXdDb250ZW50ID0gdGhpcy5uZXdDb250ZW50KHR5cGUgfHwgdGhpcy5zdGF0ZS5jb250ZW50VHlwZSk7XHJcbiAgICBicmFuY2guY291cnNlVGFicy5hZGRSZWxhdGVkKHRhYi5pZCwgXCJjb250ZW50c1wiLCBuZXdDb250ZW50KTtcclxuICAgIHRoaXMuc2V0U3RhdGUoe29wZW46IGZhbHNlfSk7XHJcbiAgfVxyXG5cclxuICBuZXdDb250ZW50KGNvbnRlbnRUeXBlOiBzdHJpbmcpIDpDb3Vyc2VDb250ZW50e1xyXG4gICAgc3dpdGNoIChjb250ZW50VHlwZSBhcyBrZXlvZiB0eXBlb2YgQ09OVEVOVF9UWVBFUykge1xyXG4gICAgICBjYXNlIFwicmljaC10ZXh0XCI6IHJldHVybiB0aGlzLm5ld1JpY2hUZXh0KCk7XHJcbiAgICAgIGNhc2UgXCJsZWFybmluZy1nb2Fsc1wiOiByZXR1cm4gdGhpcy5uZXdMZWFybmluZ0dvYWwoKTtcclxuICAgICAgY2FzZSBcImVtYmVkZGVkLWh0bWxcIjogcmV0dXJuIHRoaXMubmV3RW1iZWRkZWRIVE1MKCk7XHJcbiAgICAgIGNhc2UgXCJ3b3JkLWJhbmtcIjogcmV0dXJuIHRoaXMubmV3V29yZEJhbmsoKTtcclxuICAgICAgY2FzZSBcInJlc291cmNlLWxpc3RcIjogcmV0dXJuIHRoaXMubmV3UmVzb3VyY2VMaXN0KCk7XHJcbiAgICAgIGRlZmF1bHQ6IHRocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRlZFwiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG5ld1dvcmRCYW5rKCk6IFdvcmRCYW5rQ29udGVudCB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB0eXBlOiAnd29yZC1iYW5rJyxcclxuICAgICAgdGFnczogW3RoaXMucHJvcHMuY291cnNlLmlkXSxcclxuICAgICAgaWQ6IGNyZWF0ZVVVSUQoKSxcclxuICAgICAgb3JkZXI6IERhdGUubm93KCksXHJcbiAgICAgIGxvY2tlZDogdGhpcy5wcm9wcy50YWIubG9ja2VkLFxyXG4gICAgICBsb2NrRGVsZXRlOiBpc0tlZFN0YWZmKCksXHJcbiAgICAgIGhpZGRlbjogZmFsc2UsXHJcbiAgICAgIHNlbGVjdGVkV29yZEJhbms6IG51bGxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBuZXdSaWNoVGV4dCgpOiBSaWNoVGV4dENvbnRlbnQge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdHlwZTogXCJyaWNoLXRleHRcIixcclxuICAgICAgdGFnczogW3RoaXMucHJvcHMuY291cnNlLmlkXSxcclxuICAgICAgaWQ6IGNyZWF0ZVVVSUQoKSxcclxuICAgICAgb3JkZXI6IERhdGUubm93KCksXHJcbiAgICAgIGxvY2tlZDogdGhpcy5wcm9wcy50YWIubG9ja2VkLFxyXG4gICAgICBsb2NrRGVsZXRlOiBpc0tlZFN0YWZmKCksIC8vIEJlY2F1c2UgaWYgYSB0ZWFjaGVyIHdhcyBhbGxvZWQgdG8gY3JlYXRlcyB0aGlzLCB3ZSBuZWVkIHRvIGFsbG93IGhlciB0byBkZWxldGUgaXQhXHJcbiAgICAgIGhpZGRlbjogZmFsc2UsXHJcbiAgICAgIGh0bWw6ICcnLFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbmV3RW1iZWRkZWRIVE1MKCk6IEVtYmVkZGVkSFRNTENvbnRlbnQge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdHlwZTogXCJlbWJlZGRlZC1odG1sXCIsXHJcbiAgICAgIHRhZ3M6IFt0aGlzLnByb3BzLmNvdXJzZS5pZF0sXHJcbiAgICAgIGlkOiBjcmVhdGVVVUlEKCksXHJcbiAgICAgIG9yZGVyOiBEYXRlLm5vdygpLFxyXG4gICAgICBsb2NrZWQ6IHRoaXMucHJvcHMudGFiLmxvY2tlZCxcclxuICAgICAgbG9ja0RlbGV0ZTogaXNLZWRTdGFmZigpLFxyXG4gICAgICBoaWRkZW46IGZhbHNlLFxyXG4gICAgICBodG1sOiAnJ1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbmV3TGVhcm5pbmdHb2FsKCk6IExlYXJuaW5nR29hbHNDb250ZW50IHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHR5cGU6IFwibGVhcm5pbmctZ29hbHNcIixcclxuICAgICAgdGFnczogW3RoaXMucHJvcHMuY291cnNlLmlkXSxcclxuICAgICAgaWQ6IGNyZWF0ZVVVSUQoKSxcclxuICAgICAgbG9ja2VkOiB0aGlzLnByb3BzLnRhYi5sb2NrZWQsXHJcbiAgICAgIGxvY2tEZWxldGU6IGlzS2VkU3RhZmYoKSwgLy8gQmVjYXVzZSBpZiBhIHRlYWNoZXIgd2FzIGFsbG9lZCB0byBjcmVhdGVzIHRoaXMsIHdlIG5lZWQgdG8gYWxsb3cgaGVyIHRvIGRlbGV0ZSBpdCFcclxuICAgICAgaGlkZGVuOiBmYWxzZSxcclxuICAgICAgaGFzQ29tbW9uTGVhcm5pbmdHb2FsczogdGhpcy5wcm9wcy5jb3Vyc2UudHlwZSA9PT0gJ3RoZW1lLWNvdXJzZScsXHJcbiAgICAgIGNvbW1vbkxlYXJuaW5nR29hbHM6IFtdLFxyXG4gICAgICBvcmRlcjogRGF0ZS5ub3coKSxcclxuICAgICAgaGlkZGVuVGFza3M6IFtdLFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbmV3UmVzb3VyY2VMaXN0KCk6IFJlc291cmNlTGlzdCB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB0eXBlOiBcInJlc291cmNlLWxpc3RcIixcclxuICAgICAgdGFnczogW3RoaXMucHJvcHMuY291cnNlLmlkXSxcclxuICAgICAgaWQ6IGNyZWF0ZVVVSUQoKSxcclxuICAgICAgbG9ja2VkOiB0aGlzLnByb3BzLnRhYi5sb2NrZWQsXHJcbiAgICAgIGxvY2tEZWxldGU6IGlzS2VkU3RhZmYoKSxcclxuICAgICAgb3JkZXI6IERhdGUubm93KCksXHJcbiAgICAgIGhpZGRlbjogZmFsc2UsXHJcbiAgICAgIHJlc291cmNlczogW11cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGlmICh0aGlzLnN0YXRlLm9wZW4pIHtcclxuICAgICAgcmV0dXJuIDxkaXY+XHJcbiAgICAgICAgPHNlbGVjdCBvbkNoYW5nZT17ZXYgPT4gdGhpcy5zZXRTdGF0ZSh7Y29udGVudFR5cGU6IGV2LnRhcmdldC52YWx1ZX0pfT5cclxuICAgICAgICAgIHtPYmplY3Qua2V5cyhDT05URU5UX1RZUEVTKS5tYXAoY29udGVudFR5cGUgPT5cclxuICAgICAgICAgICAgPG9wdGlvbiBrZXk9e2NvbnRlbnRUeXBlfSB2YWx1ZT17Y29udGVudFR5cGV9PlxyXG4gICAgICAgICAgICAgIHtDT05URU5UX1RZUEVTW2NvbnRlbnRUeXBlXX1cclxuICAgICAgICAgICAgPC9vcHRpb24+KX1cclxuICAgICAgICA8L3NlbGVjdD5cclxuICAgICAgICA8YSBjbGFzc05hbWU9XCJidG4gcHVsbC1yaWdodFwiIG9uQ2xpY2s9eygpPT50aGlzLnNldFN0YXRlKHtvcGVuOiBmYWxzZX0pfT57TGBBdmJyeXRgfTwvYT5cclxuICAgICAgICA8YSBjbGFzc05hbWU9XCJidG4gYnRuLWRlZmF1bHRcIiBvbkNsaWNrPXsoKT0+dGhpcy5jcmVhdGVDb250ZW50KCl9PntMYFNrYXBhYH08L2E+XHJcbiAgICAgIDwvZGl2PjtcclxuICAgIH1cclxuICAgIHJldHVybiA8PjxhXHJcbiAgICAgIGNsYXNzTmFtZT1cImJ0blwiXHJcbiAgICAgIG9uQ2xpY2s9eygpPT57XHJcbiAgICAgICAgaWYgKHRoaXMucHJvcHMudHlwZSkge1xyXG4gICAgICAgICAgdGhpcy5jcmVhdGVDb250ZW50KCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe29wZW46IHRydWV9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH19PlxyXG4gICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLXBsdXNcIiBhcmlhLWhpZGRlbj1cInRydWVcIiAvPlxyXG4gICAgICAgIHt0aGlzLnByb3BzLnR5cGUgPyBBRERfVElUTEVTW3RoaXMucHJvcHMudHlwZV3CoDogTGBMw6RnZyB0aWxsIGlubmVow6VsbGB9XHJcbiAgICA8L2E+Jm5ic3A7PC8+O1xyXG4gIH1cclxufSIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgQ291cnNlVGFiLCBDb3Vyc2VJbnN0YW5jZSwgUmljaFRleHRDb250ZW50LCBDb3Vyc2VCbG9jaywgVGhlbWVDb3Vyc2VUYWIsIFN0ZXBDb3Vyc2VUYWIgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IFN0cmlwR3JhcGhzLCBXaXRoR3JhcGhzLCBLZWRCYWNrZW5kUmVwbyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IEwgfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IFJlbmFtZWFibGVUZXh0IH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL3JlbmFtZWFibGUtdGV4dCc7XHJcbmltcG9ydCB7IGNyZWF0ZVVVSUQgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XHJcbmltcG9ydCB7IHdpdGhSb3V0ZXIsIFJvdXRlQ29tcG9uZW50UHJvcHMgfSBmcm9tICdyZWFjdC1yb3V0ZXInO1xyXG5pbXBvcnQgeyBkYiB9IGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvZGInO1xyXG5pbXBvcnQgeyBpc0tlZFN0YWZmIH0gZnJvbSAnLi4vbG9naWMvaXMta2VkLXN0YWZmJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyBleHRlbmRzIFJvdXRlQ29tcG9uZW50UHJvcHMge1xyXG4gIHR5cGU6IFwidGhlbWUtY291cnNlLXRhYlwiIHwgXCJzdGVwLWNvdXJzZS10YWJcIjtcclxuICBjb3Vyc2U6IFN0cmlwR3JhcGhzPENvdXJzZUluc3RhbmNlPjtcclxuICBicmFuY2g6IEtlZEJhY2tlbmRSZXBvO1xyXG4gIHNjaG9vbDogc3RyaW5nO1xyXG4gIGRyYWZ0SWQ6IHN0cmluZztcclxuICBibG9jaz86IENvdXJzZUJsb2NrO1xyXG4gIHN0ZXBObz86IG51bWJlcjtcclxufVxyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICBlZGl0aW5nTmFtZTogYm9vbGVhbjtcclxuICBuYW1lOiBzdHJpbmc7XHJcbn1cclxuXHJcbmNsYXNzIEFkZFRhYkJ1dHRvbiBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcywgU3RhdGU+IHtcclxuICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIGVkaXRpbmdOYW1lOiBmYWxzZSxcclxuICAgICAgbmFtZTogXCJcIlxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBjcmVhdGVUYWIodGFiTmFtZTogc3RyaW5nKSB7XHJcbiAgICB0aGlzLnNldFN0YXRlKHtlZGl0aW5nTmFtZTogZmFsc2UsIG5hbWU6IFwiXCJ9KTtcclxuICAgIGNvbnN0IHt0eXBlLCBicmFuY2gsIGRyYWZ0SWQsIGNvdXJzZSwgc2Nob29sLCBoaXN0b3J5LCBibG9jaywgc3RlcE5vfSA9IHRoaXMucHJvcHM7XHJcbiAgICBjb25zdCB0YWJUZW1wbGF0ZSA9IHtcclxuICAgICAgaWQ6IGNyZWF0ZVVVSUQoKSxcclxuICAgICAgdGFiVGl0bGU6IHRhYk5hbWUsIC8vIERlcHJlY2F0ZWQuIFVzZSBuYW1lIGluc3RlYWQuXHJcbiAgICAgIG5hbWU6IHRhYk5hbWUsXHJcbiAgICAgIG9yZGVyOiBEYXRlLm5vdygpLFxyXG4gICAgICBsb2NrZWQ6IGlzS2VkU3RhZmYoKSA/IHRydWUgOiBmYWxzZSxcclxuICAgICAgYWNsOiBbIFwicm9sZTpVU0VSOlJcIiwgYHNjaG9vbFJvbGU6JHtzY2hvb2x9L0VNUExPWUVFOlNgIF0sXHJcbiAgICAgIC8vYWJpbGl0aWVzT3JkZXI6IFtdLFxyXG4gICAgICAvL2tub3dsZWRnZVJlcXVpcmVtZW50c09yZGVyOiBbXSxcclxuICAgICAgLy9jZW50cmFsQ29udGVudE9yZGVyOiBbXVxyXG4gICAgfTtcclxuICAgIGNvbnN0IG5ld1RhYiA9ICh0eXBlID09PSAndGhlbWUtY291cnNlLXRhYicgP1xyXG4gICAgICB7XHJcbiAgICAgICAgdHlwZTogJ3RoZW1lLWNvdXJzZS10YWInLFxyXG4gICAgICAgIHRhYkNsYXNzOiAnY29udGVudC10YWInLFxyXG4gICAgICAgIHRhZ3M6IFt0aGlzLnByb3BzLmNvdXJzZS5pZF0sXHJcbiAgICAgICAgLi4udGFiVGVtcGxhdGUsXHJcbiAgICAgIH0gYXMgVGhlbWVDb3Vyc2VUYWIgOlxyXG4gICAgICB7XHJcbiAgICAgICAgdHlwZTogJ3N0ZXAtY291cnNlLXRhYicsXHJcbiAgICAgICAgdGFiQ2xhc3M6ICdjb250ZW50LXRhYicsXHJcbiAgICAgICAgdGFnczogWy4uLmJsb2NrLnRhZ3NdLCAvLyBDb250YWlucyBib3RoIGNvdXJzZUlkIGFuZCBjb3Vyc2U6Y291cnNlQ29kZVxyXG4gICAgICAgIC4uLnRhYlRlbXBsYXRlLFxyXG4gICAgICAgIHN0ZXBObzogc3RlcE5vXHJcbiAgICAgIH0gYXMgU3RlcENvdXJzZVRhYik7XHJcblxyXG4gICAgLypjb25zdCB0b3BDb250ZW50OiBSaWNoVGV4dENvbnRlbnQgPSB7XHJcbiAgICAgIHR5cGU6ICdyaWNoLXRleHQnLFxyXG4gICAgICBpZDogY3JlYXRlVVVJRCgpLFxyXG4gICAgICB0YWdzOiBbdGhpcy5wcm9wcy5jb3Vyc2UuaWRdLFxyXG4gICAgICBodG1sOiBgPGgyPiR7dGFiTmFtZX08L2gyYCxcclxuICAgICAgb3JkZXI6IERhdGUubm93KCksXHJcbiAgICAgIGxvY2tlZDogdHJ1ZSxcclxuICAgICAgaGlkZGVuOiBmYWxzZVxyXG4gICAgfTsqL1xyXG4gICAgaWYgKG5ld1RhYi50eXBlID09PSAnc3RlcC1jb3Vyc2UtdGFiJykge1xyXG4gICAgICBicmFuY2guY291cnNlQmxvY2tzLmFkZFJlbGF0ZWQoYmxvY2suaWQsIFwidGFic1wiLCBuZXdUYWIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYnJhbmNoLmNvdXJzZUluc3RhbmNlcy5hZGRSZWxhdGVkKGNvdXJzZS5pZCwgXCJ0YWJzXCIsIG5ld1RhYik7XHJcbiAgICB9XHJcbiAgICAvL2JyYW5jaC5jb3Vyc2VUYWJzLmFkZFJlbGF0ZWQobmV3VGFiLmlkLCBcImNvbnRlbnRzXCIsIHRvcENvbnRlbnQpO1xyXG4gICAgYXdhaXQgYnJhbmNoLnNhdmVOb3coKTtcclxuICAgIGhpc3RvcnkucHVzaChgLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlLmlkfS90YWJzLyR7bmV3VGFiLmlkfS9kcmFmdHMvJHtkcmFmdElkfS9lZGl0YCk7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7c2Nob29sLCBjb3Vyc2UsIGJyYW5jaH0gPSB0aGlzLnByb3BzO1xyXG4gICAgY29uc3Qge2VkaXRpbmdOYW1lLCBuYW1lfSA9IHRoaXMuc3RhdGU7XHJcbiAgICByZXR1cm4gPD5cclxuICAgICAgICA8YVxyXG4gICAgICAgICAgb25DbGljaz17ZWRpdGluZ05hbWUgPyBudWxsIDogZXYgPT4gdGhpcy5zZXRTdGF0ZSh7ZWRpdGluZ05hbWU6IHRydWUsIG5hbWU6ICcnfSl9PlxyXG4gICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtcGx1c1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiIC8+XHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgICFlZGl0aW5nTmFtZSA/XHJcbiAgICAgICAgICAgICAgJyAnICsgTGBOeSBmbGlrYDpcclxuICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxyXG4gICAgICAgICAgICAgIHN0eWxlPXt7Y29sb3I6IFwiYmxhY2tcIn19XHJcbiAgICAgICAgICAgICAgYXV0b0ZvY3VzXHJcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e0xgRmxpa25hbW5gfVxyXG4gICAgICAgICAgICAgIHZhbHVlPXtuYW1lfVxyXG4gICAgICAgICAgICAgIHNpemU9ezMwfVxyXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXtldiA9PiB0aGlzLnNldFN0YXRlKHtuYW1lOiBldi50YXJnZXQudmFsdWV9KX1cclxuICAgICAgICAgICAgICBvbktleVByZXNzPXtldiA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXYua2V5ID09PSAnRW50ZXInKSB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlVGFiKG5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgb25CbHVyPXsoKT0+dGhpcy5zZXRTdGF0ZSh7ZWRpdGluZ05hbWU6IGZhbHNlfSl9XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgPC9hPlxyXG5cclxuICAgICAgICB7LyogICAgIFxyXG4gICAgICAgIDxSZW5hbWVhYmxlVGV4dFxyXG4gICAgICAgICAgZWFnZXI9e2ZhbHNlfVxyXG4gICAgICAgICAgbWF4Q2hhcnM9ezgwfVxyXG4gICAgICAgICAgdGV4dD17bmFtZX1cclxuICAgICAgICAgIG9uQ2hhbmdlPXt2YWx1ZSA9PiB7XHJcbiAgICAgICAgfX0vPlxyXG4gICAgICAgICovfVxyXG4gICAgPC8+O1xyXG4gIH1cclxufVxyXG5jb25zdCBBZGRUYWJCdXR0b25XaXRoUm91dGVyID0gd2l0aFJvdXRlcihBZGRUYWJCdXR0b24pXHJcbmV4cG9ydCB7QWRkVGFiQnV0dG9uV2l0aFJvdXRlciBhcyBBZGRUYWJCdXR0b259O1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBMYXp5Q29udGVudCB9IGZyb20gJy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9sYXp5LWNvbnRlbnQnO1xyXG5pbXBvcnQgeyBkYiwgQ291cnNlSW5zdGFuY2VzIH0gZnJvbSAnLi4vLi4vLi4vZ2xvYmFscy9kYic7XHJcbmltcG9ydCB7IFNwaW5uZXIgfSBmcm9tICcuLi8uLi9jb3Vyc2UtYnVpbGRlci9zdWItY29tcG9uZW50cy9zcGlubmVyJztcclxuaW1wb3J0IHsgUm91dGVDb21wb25lbnRQcm9wcywgd2l0aFJvdXRlciB9IGZyb20gJ3JlYWN0LXJvdXRlcic7XHJcbmltcG9ydCB7IEwsIGNvbXBhcmVQcm9wIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBpc1RlYWNoZXJBdFNjaG9vbCwgaXNBZG1pbk9yVGVhY2hlckF0U2Nob29sLCBwcmVzZXJ2ZUltcGVyc29uYXRpb25RdWVyeSB9IGZyb20gJy4uLy4uLy4uL2FjY2Vzcy1jb250cm9sJztcclxuaW1wb3J0IGVudiBmcm9tICcuLi8uLi8uLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5pbXBvcnQgeyBnZXREcmFmdElkIH0gZnJvbSAnLi4vbG9naWMvZ2V0LWRyYWZ0LWlkJztcclxuaW1wb3J0IHsgaXNLZWRTdGFmZiB9IGZyb20gJy4uL2xvZ2ljL2lzLWtlZC1zdGFmZic7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMgZXh0ZW5kcyBSb3V0ZUNvbXBvbmVudFByb3BzIHtcclxuICBzY2hvb2w6IHN0cmluZztcclxuICBkaXNwbGF5TmFtZTogc3RyaW5nO1xyXG4gIGRyYWZ0SWQ6IHN0cmluZztcclxufVxyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICBvcGVuOiBib29sZWFuO1xyXG4gIHNjaG9vbHM/OiBBcnJheTx7aWQ6IHN0cmluZywgbmFtZTogc3RyaW5nLCBkaXNwbGF5TmFtZTogc3RyaW5nfT5cclxufVxyXG5cclxuY2xhc3MgQ2xpY2thYmxlU2Nob29sRGl2V2l0aFJvdXRlciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcywgU3RhdGU+IHtcclxuICBkaXZFbGVtO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIG9wZW46IGZhbHNlXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBvcGVuKCkge1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7b3BlbjogdHJ1ZX0pO1xyXG4gICAgaWYgKCF0aGlzLnN0YXRlLnNjaG9vbHMpIHtcclxuICAgICAgY29uc3Qgc2Nob29scyA9IGF3YWl0IGRiLnNjaG9vbHNcclxuICAgICAgICAudGFncyhcInByaW1hcnlcIilcclxuICAgICAgICAubWFwKCh7aWQsIG5hbWUsIGRpc3BsYXlOYW1lfSkgPT4gKHtpZCwgbmFtZSwgZGlzcGxheU5hbWU6IGRpc3BsYXlOYW1lIHx8IG5hbWUgfHwgXCI8bmFtbmzDtnM+XCJ9KSlcclxuICAgICAgICAudG9WYWx1ZSgpLmxvYWQoKTtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7c2Nob29sc30pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLnNldFN0YXRlKHtvcGVuOiBmYWxzZX0pO1xyXG4gIH1cclxuICBcclxuICBhc3luYyBzZWxlY3RTY2hvb2wgKHNjaG9vbDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB7bWF0Y2gsIGhpc3Rvcnl9ID0gdGhpcy5wcm9wczsgICAgICAgICAgIFxyXG4gICAgY29uc3Qge2NvdXJzZUlkLCB0YWJJZCwgZHJhZnRJZCwgY29udGVudElkLCB0YXNrSWR9ID0gbWF0Y2gucGFyYW1zIGFzIGFueTtcclxuICAgIGNvbnN0IGNhbkltcGVyc29uYXRlID1cclxuICAgICAgZW52LmN1cnJlbnRVc2VyLnJvbGVzLmluY2x1ZGVzKFwiQURNSU5cIikgfHwgIC8vIElzIGFkbWluXHJcbiAgICAgIGxvY2F0aW9uLnNlYXJjaC5pbmNsdWRlcygncm9sZT0nKTsgICAgICAgICAgLy8gU2VlbXMgdG8gYmUgaW1wZXJzb25hdGVkIGFzIG5vbi1hZG1pbiAob25seSBhZG1pbnMgY2FuIGRvIHRoYXQpXHJcblxyXG4gICAgYXN5bmMgZnVuY3Rpb24gZ2V0Um91dGUoKSB7XHJcbiAgICAgIGNvbnN0IG90aGVyRHJhZnRJZCA9IGRyYWZ0SWQgJiYgYXdhaXQgZ2V0RHJhZnRJZChzY2hvb2wsIGNvdXJzZUlkKS5sb2FkKCk7XHJcbiAgICAgIGlmICh0YXNrSWQgJiYgY29udGVudElkICYmIG90aGVyRHJhZnRJZCAmJiAoaXNBZG1pbk9yVGVhY2hlckF0U2Nob29sKGVudi5jdXJyZW50VXNlciwgc2Nob29sKSB8fCBjYW5JbXBlcnNvbmF0ZSkpIHtcclxuICAgICAgICByZXR1cm4gYC8ke3NjaG9vbH0vY291cnNlcy8ke2NvdXJzZUlkfS90YWJzLyR7dGFiSWQgfHwgXCIkXCJ9L2NvbnRlbnRzLyR7Y29udGVudElkfS90YXNrcy8ke3Rhc2tJZH0vZHJhZnRzLyR7b3RoZXJEcmFmdElkfS9lZGl0YDtcclxuICAgICAgfSBlbHNlIGlmICh0YXNrSWQpIHtcclxuICAgICAgICByZXR1cm4gYC8ke3NjaG9vbH0vY291cnNlcy8ke2NvdXJzZUlkfS90YWJzLyR7dGFiSWQgfHwgXCIkXCJ9L3Rhc2tzLyR7dGFza0lkfWA7XHJcbiAgICAgIH0gZWxzZSBpZiAob3RoZXJEcmFmdElkICYmIChpc0FkbWluT3JUZWFjaGVyQXRTY2hvb2woZW52LmN1cnJlbnRVc2VyLCBzY2hvb2wpIHx8IGNhbkltcGVyc29uYXRlKSkge1xyXG4gICAgICAgIHJldHVybiBgLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlSWR9L3RhYnMvJHt0YWJJZCB8fMKgXCIkXCJ9L2RyYWZ0cy8ke290aGVyRHJhZnRJZH0vZWRpdGA7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGAvJHtzY2hvb2x9L2NvdXJzZXMvJHtjb3Vyc2VJZH0vdGFicy8ke3RhYklkIHx8wqBcIiRcIn1gO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHNjaG9vbCAhPT0gdGhpcy5wcm9wcy5zY2hvb2wpIHtcclxuICAgICAgY29uc3Qgcm91dGUgPSBhd2FpdCBnZXRSb3V0ZSgpO1xyXG4gICAgICBpZiAoY2FuSW1wZXJzb25hdGUpIHtcclxuICAgICAgICAvLyBJZiBjdXJyZW50IHVzZXIgY2FuIGltcGVyc29uYXRlIChpcyBhZG1pbiBvciBpcyBhbHJlYWR5IGltcGVyc29uYXRpbmcgZW1wbG95ZWUgYXQgc29tZSBzY2hvb2wpLFxyXG4gICAgICAgIC8vIG1ha2Ugc3VyZSB0byBpbXBlcnNvbmF0ZSB0aGUgY29ycmVjdCBzY2hvb2wgd2hlbiBzd2l0Y2hpbmcgc2Nob29sLCBzbyB0aGF0XHJcbiAgICAgICAgLy8gYWRtaW5zIGNhbiBhY3QgYXMgYW4gZW1wbG95ZWUgb24gdGhhdCBzY2hvb2wgd2hlbiBsb29raW5nIGF0IHRoZWlyIGNvdXJzZXMuXHJcbiAgICAgICAgLy8gVGhpcyB3aWxsIG1ha2UgaXQgZWFzaWVyIGZvciBhZG1pbnMgdG8gdW5kZXJzdGFuZCB3aGF0IGVtcGxveWVlcyBhdCB0aGUgc2Nob29sXHJcbiAgICAgICAgLy8gY2FuIGRvIHdpdGggdGhlIGNvdXJzZXNcclxuICAgICAgICBjb25zdCBiYXNlVXJsID0gcHJlc2VydmVJbXBlcnNvbmF0aW9uUXVlcnkobG9jYXRpb24ucGF0aG5hbWUsIHNjaG9vbCA9PT0gJ3N0YW5kYXJkJyA/XHJcbiAgICAgICAgICB7cm9sZTogdW5kZWZpbmVkLCBzY2hvb2x9IDpcclxuICAgICAgICAgIHtyb2xlOiBcIkVNUExPWUVFXCIsIHNjaG9vbH0pO1xyXG4gICAgICAgIGxvY2F0aW9uLmhyZWYgPSBgJHtiYXNlVXJsfSMke3JvdXRlfWA7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gTm90IGFuIGFkbWluLCBqdXN0IHJlZGlyZWN0IHRvIHRoZSByb3V0ZSBhbmQgbm9ybWFsIGFjY2VzcyBjb250cm9sIHdpbGwgYXBwbHlcclxuICAgICAgICBoaXN0b3J5LnB1c2gocm91dGUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLmNsb3NlKCk7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7c2Nob29sLCBkcmFmdElkLCBkaXNwbGF5TmFtZSB9ID0gdGhpcy5wcm9wcztcclxuICAgIGNvbnN0IHtvcGVuLCBzY2hvb2xzfSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgcmV0dXJuIDxkaXYgdGFiSW5kZXg9ezF9IHN0eWxlPXt7b3V0bGluZTogMH19IG9uQmx1cj17KCk9PnRoaXMuY2xvc2UoKX0+XHJcbiAgICAgIHshb3BlbiA/IDw+XHJcbiAgICAgICAgPGg1IG9uQ2xpY2s9eygpPT50aGlzLm9wZW4oKX0+e3NjaG9vbCAhPT0gXCJzdGFuZGFyZFwiID8gKGRpc3BsYXlOYW1lIHx8IHNjaG9vbCkgOiBMYFN0YW5kYXJkYH08L2g1PlxyXG4gICAgICAgIHtkcmFmdElkICYmIDxwIGNsYXNzTmFtZT1cInBhZ2VTaWRlVGV4dFwiPntMYEFyYmV0c3ZlcnNpb25gfTwvcD59XHJcbiAgICAgIDwvPiA6ICFzY2hvb2xzID9cclxuICAgICAgICA8U3Bpbm5lciAvPiA6IDw+XHJcbiAgICAgICAgICA8aDUgb25DbGljaz17KCk9PnRoaXMuY2xvc2UoKX0+e0xgVsOkeGxhIHNrb2xhYH08L2g1PlxyXG4gICAgICAgICAgPHVsPlxyXG4gICAgICAgICAgICA8bGkgb25DbGljaz17KCk9PnRoaXMuc2VsZWN0U2Nob29sKFwic3RhbmRhcmRcIil9PntMYFN0YW5kYXJkYH08L2xpPlxyXG4gICAgICAgICAgICB7c2Nob29scy5maWx0ZXIoKHtuYW1lfSkgPT4gbmFtZSAhPT0gJ3N0YW5kYXJkJylcclxuICAgICAgICAgICAgICAuc29ydCgoYSxiKSA9PiBhLmRpc3BsYXlOYW1lLmxvY2FsZUNvbXBhcmUoYi5kaXNwbGF5TmFtZSwgW1wic3ZcIixcImVuXCJdKSlcclxuICAgICAgICAgICAgICAubWFwKCh7aWQsIG5hbWU6IHNjaG9vbCwgZGlzcGxheU5hbWV9KSA9PlxyXG4gICAgICAgICAgICAgICAgPGxpIGtleT17aWR9XHJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpPT50aGlzLnNlbGVjdFNjaG9vbChzY2hvb2wpfT5cclxuICAgICAgICAgICAgICAgIHtkaXNwbGF5TmFtZX1cclxuICAgICAgICAgICAgPC9saT4pfVxyXG4gICAgICAgICAgPC91bD5cclxuICAgICAgICA8Lz59XHJcbiAgICAgIDwvZGl2PlxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IENsaWNrYWJsZVNjaG9vbERpdiA9IHdpdGhSb3V0ZXIoQ2xpY2thYmxlU2Nob29sRGl2V2l0aFJvdXRlcik7XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgRW1pdHRlciB9IGZyb20gJ2tlZGJhY2tlbmQvb2JzZXJ2YWJsZSc7XHJcbmltcG9ydCB7IENvdXJzZUluc3RhbmNlLCBCcmFuY2gsIENvdXJzZUJsb2NrLCBDb3Vyc2VUYWIgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IFdpdGhHcmFwaHMsIEtlZEJhY2tlbmRSZXBvIH0gZnJvbSAna2VkYmFja2VuZC9yZXBvJztcclxuaW1wb3J0IHsgQ291cnNlVGFiQXJlYSB9IGZyb20gJy4vY291cnNlLXRhYi1hcmVhJztcclxuaW1wb3J0IHsgQ291cnNlU2V0dGluZ3NBcmVhIH0gZnJvbSAnLi9jb3Vyc2Utc2V0dGluZ3MtYXJlYSc7XHJcbmltcG9ydCB7IEwsIHNob3dFcnJvciwgY29tcGFyZVByb3AgfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IEVkaXRvckZvb3RlckJ1dHRvbnMgfSBmcm9tICcuL2VkaXRvci1mb290ZXItYnV0dG9ucyc7XHJcbmltcG9ydCB7IFR3b0NvbHVtbnNQYWdlIH0gZnJvbSAnLi4vY29tbW9uL3R3by1jb2x1bW5zLXBhZ2UnO1xyXG5pbXBvcnQgeyBXZWVrUGxhbm5lciB9IGZyb20gJy4uLy4uL3dlZWtwbGFubmVyL3dlZWtwbGFubmVyJztcclxuaW1wb3J0IHsgaXNUZWFjaGVyQXRTY2hvb2wgfSBmcm9tICcuLi8uLi8uLi9hY2Nlc3MtY29udHJvbCc7XHJcbmltcG9ydCBlbnYgZnJvbSAnLi4vLi4vLi4vZ2xvYmFscy9LRUQuZW52JztcclxuaW1wb3J0IGNmZyBmcm9tICcuLi8uLi8uLi9nbG9iYWxzL0tFRC5jZmcnO1xyXG5pbXBvcnQgeyB3aXRoUm91dGVyLCBSb3V0ZUNvbXBvbmVudFByb3BzIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XHJcbmltcG9ydCB7IEhvcml6b250YWxJdGVtIH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2hvcml6b250YWwtaXRlbSc7XHJcbmltcG9ydCB7IEFsaWduSG9yaXpvbnRhbCB9IGZyb20gJy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9hbGlnbi1ob3Jpem9udGFsJztcclxuaW1wb3J0IHsgcHVibGlzaENvdXJzZSB9IGZyb20gJy4uL2xvZ2ljL3B1Ymxpc2gtY291cnNlJztcclxuaW1wb3J0IHsgZGIsIENvdXJzZUluc3RhbmNlcyB9IGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvZGInO1xyXG5pbXBvcnQgeyBMYXp5Q29udGVudCB9IGZyb20gJy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9sYXp5LWNvbnRlbnQnO1xyXG5pbXBvcnQgeyBjb21wdXRlUHJlZGVzdGluYXRlZElkIH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnQnO1xyXG5pbXBvcnQgeyBWZXJzaW9uSGlzdG9yeUJveCB9IGZyb20gJy4vdmVyc2lvbi1oaXN0b3J5L3ZlcnNpb24taGlzdG9yeS1ib3gnO1xyXG5pbXBvcnQgeyBSZXNvdXJjZUxpc3RWaWV3IH0gZnJvbSAnLi9jb3Vyc2UtY29udGVudHMvcmVzb3VyY2UtbGlzdC12aWV3JztcclxuXHJcbmludGVyZmFjZSBQcm9wcyBleHRlbmRzIFJvdXRlQ29tcG9uZW50UHJvcHMge1xyXG4gIHNjaG9vbDogc3RyaW5nO1xyXG4gIGNvdXJzZUlkOiBzdHJpbmc7XHJcbiAgZHJhZnRJZDogc3RyaW5nO1xyXG4gIGNvdXJzZTogV2l0aEdyYXBoczxDb3Vyc2VJbnN0YW5jZSwgXCJ0YWJzXCIgfCBcImJsb2Nrc1wiPlxyXG4gIGJyYW5jaDogS2VkQmFja2VuZFJlcG9cclxuICB0YWJzOiBDb3Vyc2VUYWJbXVxyXG4gIGFjdGl2ZVRhYjogc3RyaW5nO1xyXG4gIGVkaXRNb2RlPzogYm9vbGVhbjtcclxuICBibG9jazogQ291cnNlQmxvY2sgfCBudWxsO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgQ291cnNlQXJlYSA9IHdpdGhSb3V0ZXIoKHtcclxuICBzY2hvb2wsXHJcbiAgY291cnNlSWQsXHJcbiAgZHJhZnRJZCxcclxuICBjb3Vyc2UsXHJcbiAgYnJhbmNoLFxyXG4gIHRhYnMsXHJcbiAgYWN0aXZlVGFiLFxyXG4gIGVkaXRNb2RlLFxyXG4gIGhpc3RvcnksXHJcbiAgYmxvY2tcclxufTogUHJvcHMpID0+IHtcclxuICBjb25zdCB0YWIgPSB0YWJzLmZpbHRlcih0YWIgPT4gdGFiLmlkID09PSBhY3RpdmVUYWIpWzBdIHx8IHRhYnNbMF07XHJcbiAgdmFyIGN1cnJlbnRUYWJSZXNvdXJjZXMgPSB0YWIgJiZcclxuICAgIGJyYW5jaC5jb3Vyc2VDb250ZW50cy5oYXNFZGdlc0Zyb20oW3RhYi5pZF0pLmZpbHRlcih4PT4geC50eXBlID09PSBcInJlc291cmNlLWxpc3RcIikuZmlyc3QoKTtcclxuXHJcbiAgcmV0dXJuIDxUd29Db2x1bW5zUGFnZVxyXG4gICAgcmlnaHQ9e2VkaXRNb2RlICYmIGRyYWZ0SWQgP1xyXG4gICAgICAvLyBJbiBlZGl0IG1vZGUsIHNob3cgdGhlIGRyYWZ0IGVkaXRzIHRvIHRoZSByaWdodFxyXG4gICAgICA8ZGl2PlxyXG4gICAgICAgIDxWZXJzaW9uSGlzdG9yeUJveCBpc0FkbWluPXtzY2hvb2wgPT09ICdzdGFuZGFyZCd9IGJyYW5jaElkPXtkcmFmdElkfSBicmFuY2hUeXBlPVwiZHJhZnQtYnJhbmNoXCIgLz5cclxuICAgICAgPC9kaXY+IDpcclxuICAgICAgLy8gSW4gdmlldyBtb2RlLCBzaG93IFdlZWtQbGFubmVyIHRvIHRoZSByaWdodFxyXG4gICAgICAvLyBJbiB2aWV3IG1vZGUsIHNob3cgUmVzb3VyY2VzIHRvIHRoZSByaWdodFxyXG4gICAgICA8PlxyXG4gICAgICA8V2Vla1BsYW5uZXIgZW52PXtlbnZ9IHZpZXdDb3Vyc2VVcmw9e2NmZy5LRURfQ09VUlNFX1ZJRVdFUl9VUkx9IC8+XHJcbiAgICAgIHtjdXJyZW50VGFiUmVzb3VyY2VzICYmIDxSZXNvdXJjZUxpc3RWaWV3IGNvbnRlbnQ9e2N1cnJlbnRUYWJSZXNvdXJjZXN9Lz59XHJcbiAgICAgIDwvPn1cclxuICAgIHJpZ2h0V2lkdGg9ezV9XHJcbiAgICBsZWZ0PXs8PlxyXG4gICAgICA8Q291cnNlVGFiQXJlYVxyXG4gICAgICAgIHNjaG9vbD17c2Nob29sfVxyXG4gICAgICAgIGNvdXJzZT17Y291cnNlfVxyXG4gICAgICAgIGJyYW5jaD17YnJhbmNofVxyXG4gICAgICAgIHRhYj17dGFifVxyXG4gICAgICAgIGVkaXRNb2RlPXtlZGl0TW9kZX1cclxuICAgICAgICBkcmFmdElkPXtkcmFmdElkfVxyXG4gICAgICAgIGJsb2NrPXtibG9ja31cclxuICAgICAgICBsYXp5Q29udGVudHM9e3RhYiA/XHJcbiAgICAgICAgICBicmFuY2guY291cnNlQ29udGVudHMuaW5jbHVkZShcInRhc2tzXCIpLmhhc0VkZ2VzRnJvbShbdGFiLmlkXSkudG9WYWx1ZSgpIDpcclxuICAgICAgICAgIG5ldyBFbWl0dGVyKFtdKX1cclxuICAgICAgICAvPlxyXG4gICAgICB7IWVkaXRNb2RlID8gZW52LmN1cnJlbnRVc2VyLnJvbGVzLmluY2x1ZGVzKFwiQURNSU5cIikgfHwgaXNUZWFjaGVyQXRTY2hvb2woZW52LmN1cnJlbnRVc2VyLCBzY2hvb2wpID8gPD5cclxuICAgICAgICA8YnIvPlxyXG4gICAgICAgIDxoci8+XHJcbiAgICAgICAgPEFsaWduSG9yaXpvbnRhbD5cclxuICAgICAgICAgIHtkcmFmdElkICYmIDxIb3Jpem9udGFsSXRlbT5cclxuICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ0biBidG4tbGFyZ2UgYnRuLXdhcm5pbmdcIlxyXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e2FzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHB1Ymxpc2hDb3Vyc2Uoe1xyXG4gICAgICAgICAgICAgICAgICBzY2hvb2wsXHJcbiAgICAgICAgICAgICAgICAgIGNvdXJzZTogY291cnNlIGFzIENvdXJzZUluc3RhbmNlLFxyXG4gICAgICAgICAgICAgICAgICBkcmFmdFJlcG86IGRiLmJyYW5jaChkcmFmdElkKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBkYi5zYXZlTm93KCk7XHJcbiAgICAgICAgICAgICAgICBoaXN0b3J5LnB1c2goYC8ke3NjaG9vbH0vY291cnNlcy8ke2NvdXJzZUlkfS90YWJzLyR7dGFiID8gdGFiLmlkIDogJyQnfWApO1xyXG4gICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1sZyBmYS1wbGF5XCIgYXJpYS1oaWRkZW49e3RydWV9IC8+Jm5ic3A7XHJcbiAgICAgICAgICAgICAge0xgUHVibGljZXJhYH1cclxuICAgICAgICAgICAgPC9idXR0b24+XHJcblxyXG4gICAgICAgICAgPC9Ib3Jpem9udGFsSXRlbT59XHJcbiAgICAgICAgICA8TGF6eUNvbnRlbnQ+e1xyXG4gICAgICAgICAgICAgIENvdXJzZUluc3RhbmNlcy5nZXRCcmFuY2hJZChkYi5zY2hvb2xzLm5hbWUoc2Nob29sKS5zaW5nbGUoKSwgY291cnNlSWQpLm1hcChleGlzdGluZ0RyYWZ0SWQgPT4gPD5cclxuICAgICAgICAgICAgICAgIDxIb3Jpem9udGFsSXRlbT5cclxuICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ0biBidG4tbGFyZ2VcIlxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2V4aXN0aW5nRHJhZnRJZCA/IFxyXG4gICAgICAgICAgICAgICAgICAgICAgLy8gTmF2aWdhdGUgdG8gZWRpdCBleGlzdGluZyBkcmFmdFxyXG4gICAgICAgICAgICAgICAgICAgICAgKCk9Pmhpc3RvcnkucHVzaChgLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlSWR9L3RhYnMvJHt0YWIgPyB0YWIuaWQgOiAnJCd9L2RyYWZ0cy8ke2V4aXN0aW5nRHJhZnRJZH0vZWRpdGApIDpcclxuICAgICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhIGRyYWZ0IGZvciB0aGUgYnJhbmNoIGFuZCB0aGVuIG5hdmlnYXRlIHRvIGl0XHJcbiAgICAgICAgICAgICAgICAgICAgICBhc3luYyAoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNjaG9vbEVudGl0eSA9IGF3YWl0IGRiLnNjaG9vbHMubmFtZShzY2hvb2wpLnNpbmdsZSgpLmxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdEcmFmdElkID0gYXdhaXQgY29tcHV0ZVByZWRlc3RpbmF0ZWRJZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjaG9vbEVudGl0eS5vZmZpY2lhbEJyYW5jaElkICsgY291cnNlSWQgKyBcImRyYWZ0XCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdEcmFmdEJyYW5jaERvYzogQnJhbmNoID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IG5ld0RyYWZ0SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2w6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJyb2xlOlVTRVI6UlwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgc2Nob29sUm9sZToke3NjaG9vbEVudGl0eS5uYW1lfS9FTVBMT1lFRTpTYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdkcmFmdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2hvb2xJZDogc2Nob29sRW50aXR5LmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJlZVBhcmVudElkOiBzY2hvb2xFbnRpdHkub2ZmaWNpYWxCcmFuY2hJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ3M6IFtjb3Vyc2VJZF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRiLmJyYW5jaGVzLmFkZFJlbGF0ZWQoc2Nob29sRW50aXR5Lm9mZmljaWFsQnJhbmNoSWQsIFwiYXBwcm92ZWRDaGlsZHJlblwiLCBuZXdEcmFmdEJyYW5jaERvYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgZGIuc2F2ZU5vdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGhpc3RvcnkucHVzaChgLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlSWR9L3RhYnMvJHt0YWIgPyB0YWIuaWQgOiAnJCd9L2RyYWZ0cy8ke25ld0RyYWZ0SWR9L2VkaXRgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93RXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgIHtleGlzdGluZ0RyYWZ0SWQgPyA8PlxyXG4gICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtbGcgZmEtcGVuY2lsXCIgLz4ge2RyYWZ0SWQgPyBMYEZvcnRzw6R0dCByZWRpZ2VyYWA6IExgUmVkaWdlcmFgfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvPiA6IDw+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1sZyBmYS1wbHVzXCIgLz4ge0xgU2thcGEgc2tvbGFucyB2ZXJzaW9uIGF2IGt1cnNlbmB9XHJcbiAgICAgICAgICAgICAgICAgICAgPC8+XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8L0hvcml6b250YWxJdGVtPlxyXG4gICAgICAgICAgICAgICAge2RyYWZ0SWQgfHwgIWV4aXN0aW5nRHJhZnRJZCA/IHVuZGVmaW5lZCA6IDxIb3Jpem9udGFsSXRlbT5cclxuICAgICAgICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ0biBidG4tbGFyZ2VcIlxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpPT5oaXN0b3J5LnB1c2goYC8ke3NjaG9vbH0vY291cnNlcy8ke2NvdXJzZUlkfS90YWJzLyR7dGFiID8gdGFiLmlkIDogJyQnfS9kcmFmdHMvJHtleGlzdGluZ0RyYWZ0SWR9YCl9XHJcbiAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1leWVcIiAvPiB7TGBWaXNhIHJlZGlnZXJhZCB2ZXJzaW9uYH1cclxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8L0hvcml6b250YWxJdGVtPn1cclxuICAgICAgICAgICAgICA8Lz4pXHJcbiAgICAgICAgICB9PC9MYXp5Q29udGVudD5cclxuICAgICAgICAgIHtkcmFmdElkICYmIDxIb3Jpem9udGFsSXRlbT5cclxuICAgICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ0biBidG4tbGFyZ2VcIlxyXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpPT57XHJcbiAgICAgICAgICAgICAgICBoaXN0b3J5LnB1c2goYC8ke3NjaG9vbH0vY291cnNlcy8ke2NvdXJzZUlkfS90YWJzLyR7dGFiID8gdGFiLmlkIDogJyQnfWApO1xyXG4gICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1sZyBmYS1hcnJvdy1sZWZ0XCIgLz4ge0xgQXZzbHV0YSByZWRpZ2VyaW5nYH1cclxuICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICA8L0hvcml6b250YWxJdGVtPn1cclxuICAgICAgICA8L0FsaWduSG9yaXpvbnRhbD5cclxuICAgICAgPC8+OiB1bmRlZmluZWQgOlxyXG4gICAgICAgIDw+XHJcbiAgICAgICAgICA8YnIvPlxyXG4gICAgICAgICAgPGhyIC8+XHJcbiAgICAgICAgICA8RWRpdG9yRm9vdGVyQnV0dG9uc1xyXG4gICAgICAgICAgICBzY2hvb2w9e3NjaG9vbH1cclxuICAgICAgICAgICAgY291cnNlPXtjb3Vyc2UgYXMgQ291cnNlSW5zdGFuY2V9XHJcbiAgICAgICAgICAgIHRhYj17dGFifVxyXG4gICAgICAgICAgICBhY3RpdmVUYWI9e2FjdGl2ZVRhYn1cclxuICAgICAgICAgICAgZHJhZnRJZD17ZHJhZnRJZH1cclxuICAgICAgICAgICAgY291cnNlVHlwZT17Y291cnNlLnR5cGV9XHJcbiAgICAgICAgICAgIGJsb2NrSWQ9e2Jsb2NrICYmIGJsb2NrLmlkfVxyXG4gICAgICAgICAgLz5cclxuICAgICAgICA8Lz5cclxuICAgICAgfVxyXG4gICAgPC8+XHJcbiAgfSAvPlxyXG59KTtcclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBDb3Vyc2VUYWIsIENvdXJzZUluc3RhbmNlLCBSaWNoVGV4dENvbnRlbnQsIFRhc2ssIExlYXJuaW5nR29hbHNDb250ZW50LCBUaGVtZUNvdXJzZVRhYiwgU3RlcENvdXJzZVRhYiwgQ291cnNlQmxvY2ssIFRoZW1lQ291cnNlSW5zdGFuY2UsIFN0ZXBDb3Vyc2VJbnN0YW5jZSB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgU3RyaXBHcmFwaHMsIFdpdGhHcmFwaHMsIEtlZEJhY2tlbmRSZXBvIH0gZnJvbSAna2VkYmFja2VuZC9yZXBvJztcclxuaW1wb3J0IHsgTCB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgY3JlYXRlVVVJRCB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcclxuaW1wb3J0IHsgd2l0aFJvdXRlciwgUm91dGVDb21wb25lbnRQcm9wcyB9IGZyb20gJ3JlYWN0LXJvdXRlcic7XHJcbmltcG9ydCBlbnYgZnJvbSAnLi4vLi4vLi4vLi4vZ2xvYmFscy9LRUQuZW52JztcclxuaW1wb3J0IHsgZGIgfSBmcm9tICcuLi8uLi8uLi8uLi9nbG9iYWxzL2RiJztcclxuaW1wb3J0IHsgZ2V0Q291cnNlQ29kZXNGcm9tVGFncyB9IGZyb20gJy4uLy4uL2xvZ2ljL2dldC1jb3Vyc2UtY29kZXMtZnJvbS10YWdzJztcclxuaW1wb3J0IHsgaXNLZWRTdGFmZiB9IGZyb20gJy4uLy4uL2xvZ2ljL2lzLWtlZC1zdGFmZic7XHJcbmltcG9ydCB7IGNvbXB1dGVUYXNrVGFnc0FuZFN1YmplY3QgfSBmcm9tICcuLi8uLi9sb2dpYy9jb21wdXRlLXRhc2stdGFncy1hbmQtc3ViamVjdCc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMgZXh0ZW5kcyBSb3V0ZUNvbXBvbmVudFByb3BzIHtcclxuICBicmFuY2g6IEtlZEJhY2tlbmRSZXBvO1xyXG4gIHNjaG9vbDogc3RyaW5nO1xyXG4gIGNvdXJzZTogU3RyaXBHcmFwaHM8Q291cnNlSW5zdGFuY2U+O1xyXG4gIHRhYjogU3RyaXBHcmFwaHM8VGhlbWVDb3Vyc2VUYWIgfCBTdGVwQ291cnNlVGFiPjtcclxuICBkcmFmdElkOiBzdHJpbmc7XHJcbiAgY29udGVudDogTGVhcm5pbmdHb2Fsc0NvbnRlbnQ7XHJcbiAgYmxvY2s/OiBDb3Vyc2VCbG9jaztcclxuICBsZWFybmluZ0dvYWw6IHN0cmluZztcclxufVxyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICBlZGl0aW5nTmFtZTogYm9vbGVhbjtcclxuICBuYW1lOiBzdHJpbmc7XHJcbn1cclxuXHJcbmNsYXNzIEFkZFRhc2tCdXR0b24gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsIFN0YXRlPiB7XHJcbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICBlZGl0aW5nTmFtZTogZmFsc2UsXHJcbiAgICAgIG5hbWU6IFwiXCJcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgY3JlYXRlVGFzayh0YXNrTmFtZTogc3RyaW5nKSB7XHJcbiAgICB0aGlzLnNldFN0YXRlKHtlZGl0aW5nTmFtZTogZmFsc2UsIG5hbWU6IFwiXCJ9KTtcclxuICAgIGNvbnN0IHticmFuY2gsIGRyYWZ0SWQsIGNvdXJzZSwgdGFiLCBzY2hvb2wsIGNvbnRlbnQsIGhpc3RvcnksIGJsb2NrLCBsZWFybmluZ0dvYWx9ID0gdGhpcy5wcm9wcztcclxuICAgIC8vY29uc3QgY291cnNlID0gYXdhaXQgZGIuY291cnNlSW5zdGFuY2VzLmlkKGNvdXJzZUlkKS5sb2FkKCk7XHJcbiAgICAvL2NvbnN0IGNvdXJzZVZpZXdlclVybEtTID0gZW52LmNvdXJzZVZpZXdlclVybEtTO1xyXG4gICAgY29uc3QgeyB0YWdzLCBzdWJqZWN0IH0gPSBjb21wdXRlVGFza1RhZ3NBbmRTdWJqZWN0KGNvdXJzZSBhcyBDb3Vyc2VJbnN0YW5jZSwgdGFiIGFzIENvdXJzZVRhYiwgYmxvY2spO1xyXG4gICAgY29uc3QgbmV3VGFzazogVGFzayA9IHtcclxuICAgICAgaWQ6IGNyZWF0ZVVVSUQoKSxcclxuICAgICAgdGFncyxcclxuICAgICAgbmFtZTogdGFza05hbWUsXHJcbiAgICAgIGFjbDogWyBcInJvbGU6VVNFUjpSXCIsIGBzY2hvb2xSb2xlOiR7c2Nob29sfS9FTVBMT1lFRTpTYCBdLFxyXG4gICAgICB1cmw6IFwiXCIsXHJcbiAgICAgIHRhc2tUeXBlOiAndGFzaycsXHJcbiAgICAgIGxlYXJuaW5nR29hbDogbGVhcm5pbmdHb2FsLFxyXG4gICAgICBmdXR1cmVBYmlsaXRpZXM6IFtdLFxyXG4gICAgICByZXNvdXJjZXM6IFtdLFxyXG4gICAgICBzdWJqZWN0XHJcbiAgICB9O1xyXG4gICAgYnJhbmNoLmNvdXJzZUNvbnRlbnRzLmFkZFJlbGF0ZWQoY29udGVudC5pZCwgXCJ0YXNrc1wiLCBuZXdUYXNrKTtcclxuICAgIGF3YWl0IGJyYW5jaC5zYXZlTm93KCk7XHJcbiAgICBoaXN0b3J5LnB1c2goYC8ke3NjaG9vbH0vY291cnNlcy8ke2NvdXJzZS5pZH0vdGFicy8ke3RhYi5pZH0vY29udGVudHMvJHtjb250ZW50LmlkfS90YXNrcy8ke25ld1Rhc2suaWR9L2RyYWZ0cy8ke2RyYWZ0SWR9L2VkaXRgKTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHtlZGl0aW5nTmFtZSwgbmFtZX0gPSB0aGlzLnN0YXRlO1xyXG4gICAgcmV0dXJuIDw+XHJcbiAgICAgICAgPGEgY2xhc3NOYW1lPVwiYnRuXCJcclxuICAgICAgICAgIG9uQ2xpY2s9e2VkaXRpbmdOYW1lID8gbnVsbCA6IGV2ID0+IHRoaXMuc2V0U3RhdGUoe2VkaXRpbmdOYW1lOiB0cnVlLCBuYW1lOiAnJ30pfT5cclxuICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLXBsdXNcIiBhcmlhLWhpZGRlbj1cInRydWVcIiAvPlxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICAhZWRpdGluZ05hbWUgP1xyXG4gICAgICAgICAgICAgICcgJyArIChpc0tlZFN0YWZmKCkgPyBMYEzDpGdnIHRpbGwgdXBwZ2lmdGAgOiBMYEzDpGdnIHRpbGwgZWdlbiB1cHBnaWZ0YCk6XHJcbiAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcclxuICAgICAgICAgICAgICBhdXRvRm9jdXNcclxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17TGBVcHBnaWZ0ZW5zIG5hbW5gfVxyXG4gICAgICAgICAgICAgIHZhbHVlPXtuYW1lfVxyXG4gICAgICAgICAgICAgIHNpemU9ezUwfVxyXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXtldiA9PiB0aGlzLnNldFN0YXRlKHtuYW1lOiBldi50YXJnZXQudmFsdWV9KX1cclxuICAgICAgICAgICAgICBvbktleVByZXNzPXtldiA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXYua2V5ID09PSAnRW50ZXInKSB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlVGFzayhuYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgIG9uQmx1cj17KCk9PnRoaXMuc2V0U3RhdGUoe2VkaXRpbmdOYW1lOiBmYWxzZX0pfVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIDwvYT5cclxuICAgIDwvPjtcclxuICB9XHJcbn1cclxuY29uc3QgQWRkVGFza0J1dHRvbldpdGhSb3V0ZXIgPSB3aXRoUm91dGVyKEFkZFRhc2tCdXR0b24pXHJcbmV4cG9ydCB7QWRkVGFza0J1dHRvbldpdGhSb3V0ZXIgYXMgQWRkVGFza0J1dHRvbn07XHJcblxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBDb3Vyc2VDb250ZW50LCBSZXNvdXJjZUxpc3QsIENvdXJzZUluc3RhbmNlLCBSaWNoVGV4dENvbnRlbnQsIExlYXJuaW5nR29hbHNDb250ZW50LCBDb3Vyc2VUYWIsIENvdXJzZUJsb2NrLCBFbWJlZGRlZEhUTUxDb250ZW50LCBXb3JkQmFua0NvbnRlbnQsIFN0ZXBDb3Vyc2VJbnN0YW5jZSwgU3RlcENvdXJzZVRhYiB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgS2VkQmFja2VuZFJlcG8sIFN0cmlwR3JhcGhzLCBXaXRoR3JhcGhzIH0gZnJvbSAna2VkYmFja2VuZC9yZXBvJztcclxuaW1wb3J0IHsgUmljaFRleHRDb250ZW50Qm94IH0gZnJvbSAnLi9yaWNoLXRleHQnO1xyXG5pbXBvcnQgeyBMZWFybmluZ1Rhc2tzQ29udGVudEJveCB9IGZyb20gJy4vbGVhcm5pbmctdGFza3MtY29udGVudC1ib3gnO1xyXG5pbXBvcnQgeyBFbWJlZGRlZEhUTUxDb250ZW50Qm94IH0gZnJvbSAnLi9lbWJlZGRlZC1odG1sJztcclxuaW1wb3J0IHsgV29yZEJhbmtDb250ZW50Qm94IH0gZnJvbSAnLi93b3JkLWJhbmstY29udGVudC1ib3gnO1xyXG5pbXBvcnQgeyBSZXNvdXJjZUxpc3RDb250ZW50Qm94IH0gZnJvbSAnLi9yZXNvdXJjZS1saXN0JztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ291cnNlQ29udGVudFByb3BzIHtcclxuICByZXBvOiBLZWRCYWNrZW5kUmVwbztcclxuICBjb3Vyc2U6IFN0cmlwR3JhcGhzPENvdXJzZUluc3RhbmNlPjtcclxuICBjb250ZW50OiBXaXRoR3JhcGhzPENvdXJzZUNvbnRlbnQsIFwidGFza3NcIj47XHJcbiAgc2libGluZ0NvbnRlbnRzOiBXaXRoR3JhcGhzPENvdXJzZUNvbnRlbnQsIFwidGFza3NcIj5bXTsgLy8gU2libGluZyBjb250ZW50cyBpbmNsdWRpbmcgc2VsZlxyXG4gIGVkaXRNb2RlOiBib29sZWFuO1xyXG4gIHNjaG9vbDogc3RyaW5nO1xyXG4gIGNvdXJzZVRhYjogU3RyaXBHcmFwaHM8Q291cnNlVGFiPjtcclxuICBkcmFmdElkOiBzdHJpbmc7XHJcbiAgcmVwb3J0TnVtQ2hhcnM/OiAobnVtQ2hhcnM6IG51bWJlcikgPT4gdm9pZDtcclxuICBtYXhDaGFycz86IG51bWJlcjtcclxuICBibG9jaz86IENvdXJzZUJsb2NrO1xyXG59XHJcblxyXG4vKmV4cG9ydCBjb25zdCBDb250ZW50Qm94ID0gKHtyZXBvLCBjb250ZW50fTogQ291cnNlQ29udGVudFByb3BzKT0+IChcclxuICA8ZGl2IGNsYXNzTmFtZT17W1wiY291cnNlLWNvbnRlbnQtYm94XCIsIFwia2VkX2JveGVkXCJdLmpvaW4oJyAnKX0gc3R5bGU9e3twb3NpdGlvbjogJ3JlbGF0aXZlJ319PlxyXG4gICAgPENvbmNyZXRlQ29tcG9uZW50IHsuLi57cmVwbywgY29udGVudH19IC8+ICAgIFxyXG4gICAgPGRpdiBzdHlsZT17e3Bvc2l0aW9uOiAnYWJzb2x1dGUnLCB0b3A6IDAsIHJpZ2h0OiAwfX0+XHJcbiAgICAgICAge21vZHVsZU9yZGVyZWRJbmRleCA+IDAgJiYgPHNwYW4+XHJcbiAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1hcnJvdy1jaXJjbGUtdXAgc2VsZWN0YWJsZVwiXHJcbiAgICAgICAgICAgIGFyaWEtaGlkZGVuPVwidHJ1ZVwiXHJcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpPT50aGlzLnByb3BzLm9uUmVvcmRlcigtMSl9IC8+IDwvc3Bhbj59XHJcbiAgICAgICAge21vZHVsZU9yZGVyZWRJbmRleCA8IGNvdXJzZS5tb2R1bGVzLmxlbmd0aCAtIDEgJiYgPHNwYW4+XHJcbiAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1hcnJvdy1jaXJjbGUtZG93biBzZWxlY3RhYmxlXCJcclxuICAgICAgICAgICAgYXJpYS1oaWRkZW49XCJ0cnVlXCJcclxuICAgICAgICAgICAgb25DbGljaz17KCk9PnRoaXMucHJvcHMub25SZW9yZGVyKDEpfSAvPiA8L3NwYW4+fVxyXG4gICAgICAgIDxSZW1vdmVJdGVtXHJcbiAgICAgICAgICB0aXRsZT1cIlRhIGJvcnQgbW9kdWxlblwiXHJcbiAgICAgICAgICBzdHlsZT17e2Rpc3BsYXk6ICdpbmxpbmUtYmxvY2snfX1cclxuICAgICAgICAgIG9uQ2xpY2s9eygpPT5jb25maXJtKExgVGEgYm9ydCBtb2R1bCAke21vZHVsZS5uYW1lfT9gKSAmJiBob3N0LnVwZGF0ZSh7bW9kdWxlczogeyRzcGxpY2U6IFtbbW9kdWxlSW5kZXgsIDFdXX19KX0gLz5cclxuICAgICAgPC9kaXY+ICAgIFxyXG4gIDwvZGl2PlxyXG4pKi9cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBDb3Vyc2VDb250ZW50Qm94KHtyZXBvLCBjb250ZW50LCBzaWJsaW5nQ29udGVudHMsIGVkaXRNb2RlLCBjb3Vyc2UsIGRyYWZ0SWQsIHNjaG9vbCwgY291cnNlVGFiLCByZXBvcnROdW1DaGFycywgbWF4Q2hhcnMsIGJsb2NrfTogQ291cnNlQ29udGVudFByb3BzKSB7XHJcbiAgc3dpdGNoIChjb250ZW50LnR5cGUpIHtcclxuICAgIGNhc2UgXCJyaWNoLXRleHRcIjogcmV0dXJuIDxSaWNoVGV4dENvbnRlbnRCb3ggey4uLntyZXBvLCBjb250ZW50OiBjb250ZW50IGFzIFJpY2hUZXh0Q29udGVudCwgZWRpdE1vZGUsIHJlcG9ydE51bUNoYXJzLCBtYXhDaGFyc319IC8+XHJcbiAgICBjYXNlIFwibGVhcm5pbmctZ29hbHNcIjogcmV0dXJuIDxMZWFybmluZ1Rhc2tzQ29udGVudEJveCB7Li4ue1xyXG4gICAgICByZXBvLFxyXG4gICAgICBjb250ZW50OiBjb250ZW50IGFzIFdpdGhHcmFwaHM8TGVhcm5pbmdHb2Fsc0NvbnRlbnQsIFwidGFza3NcIj4sXHJcbiAgICAgIGVkaXRNb2RlLFxyXG4gICAgICBjb3Vyc2UsXHJcbiAgICAgIGRyYWZ0SWQsXHJcbiAgICAgIGNvdXJzZVRhYixcclxuICAgICAgc2Nob29sLFxyXG4gICAgICBibG9ja319IC8+XHJcbiAgICBjYXNlIFwicmVzb3VyY2UtbGlzdFwiOiByZXR1cm4gPFJlc291cmNlTGlzdENvbnRlbnRCb3ggey4uLntyZXBvLCBjb250ZW50OiBjb250ZW50IGFzIFJlc291cmNlTGlzdCwgZWRpdE1vZGV9fSAvPlxyXG4gICAgY2FzZSBcImVtYmVkZGVkLWh0bWxcIjogcmV0dXJuIDxFbWJlZGRlZEhUTUxDb250ZW50Qm94IHsuLi57cmVwbywgY29udGVudDogY29udGVudCBhcyBFbWJlZGRlZEhUTUxDb250ZW50LCBlZGl0TW9kZSwgcmVwb3J0TnVtQ2hhcnMsIG1heENoYXJzfX0gLz5cclxuICAgIGNhc2UgXCJ3b3JkLWJhbmtcIjogcmV0dXJuIDxXb3JkQmFua0NvbnRlbnRCb3ggey4uLntcclxuICAgICAgcmVwbyxcclxuICAgICAgZWRpdE1vZGUsIFxyXG4gICAgICBjb250ZW50OiBjb250ZW50IGFzIFdvcmRCYW5rQ29udGVudCxcclxuICAgICAgc2libGluZ1dvcmRCYW5rczogc2libGluZ0NvbnRlbnRzLmZpbHRlcihjID0+IGMudHlwZSA9PT0gJ3dvcmQtYmFuaycgJiYgYy5pZCAhPT0gY29udGVudC5pZCkgYXMgV29yZEJhbmtDb250ZW50W10sXHJcbiAgICAgIGNvdXJzZTogY291cnNlIGFzIFN0ZXBDb3Vyc2VJbnN0YW5jZSxcclxuICAgICAgY291cnNlVGFiOiBjb3Vyc2VUYWIgYXMgV2l0aEdyYXBoczxTdGVwQ291cnNlVGFiLCBcImNvbnRlbnRzXCI+fX0gLz5cclxuICAgIGRlZmF1bHQ6IHJldHVybiA8cD5Pa8OkbmQgaW5uZWjDpWxsc3R5cDoge2NvbnRlbnQudHlwZX08L3A+O1xyXG4gIH1cclxufSIsImltcG9ydCB7IEwgfSBmcm9tICcuLi8uLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IENvdXJzZUNvbnRlbnQgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcblxyXG5leHBvcnQgdHlwZSBDb3Vyc2VDb250ZW50VHlwZXMgPSBDb3Vyc2VDb250ZW50W1widHlwZVwiXTtcclxuXHJcbmV4cG9ydCBjb25zdCBDT1VSU0VfQ09OVEVOVF9UWVBFUzoge1t0eXBlIGluIENvdXJzZUNvbnRlbnRUeXBlc106IHN0cmluZ30gPSB7XHJcbiAgXCJyaWNoLXRleHRcIjogTGBUZXh0cnV0YWAsXHJcbiAgXCJ5b3V0dWJlLW1vdmllXCI6IExgWW91dHViZSBmaWxtYCxcclxuICBcImxlYXJuaW5nLWdvYWxzXCI6IExgTMOkcmFuZGVtw6VsIG9jaCB1cHBnaWZ0ZXJgLFxyXG4gIFwicmVzb3VyY2UtbGlzdFwiOiBMYFJlc3Vyc2xpc3RhYCxcclxuICBcImVtYmVkZGVkLWh0bWxcIjogTGBJbmLDpGRkYWQgSFRNTGAsXHJcbiAgXCJ3b3JkLWJhbmtcIjogTGBPcmRiYW5rYFxyXG59O1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBFbWJlZGRlZEhUTUxDb250ZW50IH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kUmVwbyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IGlzS2VkU3RhZmYgfSBmcm9tICcuLi8uLi9sb2dpYy9pcy1rZWQtc3RhZmYnO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICByZXBvOiBLZWRCYWNrZW5kUmVwbztcclxuICBjb250ZW50OiBFbWJlZGRlZEhUTUxDb250ZW50O1xyXG4gIGVkaXRNb2RlOiBib29sZWFuO1xyXG4gIG1heENoYXJzPzogbnVtYmVyO1xyXG4gIHJlcG9ydE51bUNoYXJzPzogKG51bUNoYXJzOiBudW1iZXIpID0+IHZvaWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBFbWJlZGRlZEhUTUxDb250ZW50Qm94ID0gKHtjb250ZW50LCByZXBvLCBlZGl0TW9kZSwgcmVwb3J0TnVtQ2hhcnMsIG1heENoYXJzfTogUHJvcHMpID0+XHJcbiAgZWRpdE1vZGUgJiYgKCFjb250ZW50LmxvY2tlZCB8fCBpc0tlZFN0YWZmKCkpID9cclxuICAgIDxkaXY+XHJcbiAgICAgIDxoND57TGBJbmLDpGRkYXQgbWF0ZXJpYWxgfTwvaDQ+XHJcbiAgICAgIDxwPntMYEtsaXBwIGluIEhUTUwga29kIG5lZGFuYH08L3A+XHJcbiAgICAgIDx0ZXh0YXJlYSBzdHlsZT17e3dpZHRoOiBcIjEwMCVcIiwgaGVpZ2h0OiBcIjEwMHB4XCJ9fVxyXG4gICAgICAgIHZhbHVlPXtjb250ZW50Lmh0bWx9XHJcbiAgICAgICAgb25DaGFuZ2U9eyh7dGFyZ2V0OiB7dmFsdWU6IGh0bWx9fSkgPT5cclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGh0bWwubGVuZ3RoID4gbWF4Q2hhcnMpIHJldHVybjtcclxuICAgICAgICAgICAgcmVwby5jb3Vyc2VDb250ZW50cy51cGRhdGU8RW1iZWRkZWRIVE1MQ29udGVudD4oY29udGVudCwge2h0bWx9KTtcclxuICAgICAgICAgICAgcmVwb3J0TnVtQ2hhcnMoaHRtbC5sZW5ndGgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gLz5cclxuICAgIDwvZGl2PiA6XHJcbiAgICA8ZGl2IGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXt7X19odG1sOiBjb250ZW50Lmh0bWx9fSAvPjtcclxuIiwiZXhwb3J0ICogZnJvbSAnLi9jb3Vyc2UtY29udGVudC10eXBlcyc7XHJcbmV4cG9ydCAqIGZyb20gJy4vY29udGVudC1ib3gnO1xyXG5leHBvcnQgKiBmcm9tICcuL3JpY2gtdGV4dCc7XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRSZXBvLCBXaXRoR3JhcGhzLCBTdHJpcEdyYXBocyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IExlYXJuaW5nR29hbHNDb250ZW50LCBDb3Vyc2VJbnN0YW5jZSwgQ291cnNlVGFiLCBUaGVtZUNvdXJzZUluc3RhbmNlLCBDb3Vyc2VCbG9jayB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgTCB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgTGVhcm5pbmdUYXNrc1NldHRpbmdzIH0gZnJvbSAnLi9sZWFybmluZy10YXNrcy1zZXR0aW5ncyc7XHJcbmltcG9ydCB7IGlzS2VkU3RhZmYgfSBmcm9tICcuLi8uLi9sb2dpYy9pcy1rZWQtc3RhZmYnO1xyXG5pbXBvcnQgeyBMZWFybmluZ1Rhc2tzV2l0aENvbW1vbkdvYWxzIH0gZnJvbSAnLi9sZWFybmluZy10YXNrcy13aXRoLWNvbW1vbi1nb2Fscyc7XHJcbmltcG9ydCB7IExlYXJuaW5nVGFza3NXaXRoU2VwYXJhdGVHb2FscyB9IGZyb20gJy4vbGVhcm5pbmctdGFza3Mtd2l0aC1zZXBhcmF0ZS1nb2Fscyc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHJlcG86IEtlZEJhY2tlbmRSZXBvO1xyXG4gIGNvdXJzZTogU3RyaXBHcmFwaHM8Q291cnNlSW5zdGFuY2U+O1xyXG4gIGNvbnRlbnQ6IFdpdGhHcmFwaHM8TGVhcm5pbmdHb2Fsc0NvbnRlbnQsIFwidGFza3NcIj47XHJcbiAgZWRpdE1vZGU6IGJvb2xlYW47XHJcbiAgc2Nob29sOiBzdHJpbmc7XHJcbiAgZHJhZnRJZDogc3RyaW5nO1xyXG4gIGNvdXJzZVRhYjogU3RyaXBHcmFwaHM8Q291cnNlVGFiPjtcclxuICBibG9jaz86IENvdXJzZUJsb2NrO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IExlYXJuaW5nVGFza3NDb250ZW50Qm94ID0gKHtjb250ZW50LCBlZGl0TW9kZSwgcmVwbywgY291cnNlLCBzY2hvb2wsIGRyYWZ0SWQsIGNvdXJzZVRhYiwgYmxvY2t9OiBQcm9wcykgPT4ge1xyXG4gIGNvbnN0IHsgaGFzQ29tbW9uTGVhcm5pbmdHb2FscywgY29tbW9uTGVhcm5pbmdHb2FscywgdGFza3MgfSA9IGNvbnRlbnQ7XHJcbiAgY29uc3QgcmVmaW5lZExlYXJuaW5nR29hbHMgPSBjb21tb25MZWFybmluZ0dvYWxzXHJcbiAgICAubWFwKGdvYWwgPT4gZ29hbC50cmltKCkpLmZpbHRlcihnb2FsID0+ICEhZ29hbCk7XHJcbiAgXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXYgY2xhc3NOYW1lPVwia2VkX2JveGVkXCI+XHJcbiAgICB7ZWRpdE1vZGUgJiYgKCFjb250ZW50LmxvY2tlZCB8fCBpc0tlZFN0YWZmKCkpID9cclxuICAgICAgPExlYXJuaW5nVGFza3NTZXR0aW5ncyBjb3Vyc2U9e2NvdXJzZX0gY29udGVudD17Y29udGVudH0gcmVwbz17cmVwb30gdGFiPXtjb3Vyc2VUYWJ9IC8+OlxyXG4gICAgICBjb3Vyc2VUYWIudGFiQ2xhc3MgIT09ICdtaXNzaW9uLXRhYicgP1xyXG4gICAgICAgIDxoMj57TGBMw6RyYW5kZW3DpWwgb2NoIHVwcGdpZnRlcmB9PC9oMj4gOlxyXG4gICAgICAgIDxoMj57TGBVcHBkcmFnYH08L2gyPlxyXG4gICAgICB9XHJcbiAgICA8aHIgLz5cclxuICAgIHtoYXNDb21tb25MZWFybmluZ0dvYWxzICYmIGNvdXJzZVRhYi50YWJDbGFzcyAhPT0gJ21pc3Npb24tdGFiJyA/XHJcbiAgICAgIDxMZWFybmluZ1Rhc2tzV2l0aENvbW1vbkdvYWxzIHsuLi57Y29udGVudCwgZWRpdE1vZGUsIHJlcG8sIGNvdXJzZSwgc2Nob29sLCBkcmFmdElkLCBjb3Vyc2VUYWIsIGJsb2NrLCBsZWFybmluZ0dvYWxzOiByZWZpbmVkTGVhcm5pbmdHb2Fsc319IC8+IDpcclxuICAgICAgPExlYXJuaW5nVGFza3NXaXRoU2VwYXJhdGVHb2FscyB7Li4ue2NvbnRlbnQsIGVkaXRNb2RlLCByZXBvLCBjb3Vyc2UsIHNjaG9vbCwgZHJhZnRJZCwgY291cnNlVGFiLCBibG9jaywgbGVhcm5pbmdHb2FsczogcmVmaW5lZExlYXJuaW5nR29hbHN9fSAvPlxyXG4gICAgfVxyXG4gICAgPC9kaXY+XHJcbiAgKTtcclxufVxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBMZWFybmluZ0dvYWxzQ29udGVudCwgQ291cnNlSW5zdGFuY2UsIENvdXJzZVRhYiB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgS2VkQmFja2VuZFJlcG8sIFN0cmlwR3JhcGhzIH0gZnJvbSAna2VkYmFja2VuZC9yZXBvJztcclxuaW1wb3J0IHsgTCB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgQWxpZ25Ib3Jpem9udGFsIH0gZnJvbSAnLi4vLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2FsaWduLWhvcml6b250YWwnO1xyXG5pbXBvcnQgeyBIb3Jpem9udGFsSXRlbSB9IGZyb20gJy4uLy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9ob3Jpem9udGFsLWl0ZW0nO1xyXG5pbXBvcnQgeyBpc0tlZFN0YWZmIH0gZnJvbSAnLi4vLi4vbG9naWMvaXMta2VkLXN0YWZmJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgY291cnNlOiBTdHJpcEdyYXBoczxDb3Vyc2VJbnN0YW5jZT4sXHJcbiAgY29udGVudDogTGVhcm5pbmdHb2Fsc0NvbnRlbnQ7XHJcbiAgcmVwbzogS2VkQmFja2VuZFJlcG87XHJcbiAgdGFiOiBTdHJpcEdyYXBoczxDb3Vyc2VUYWI+O1xyXG59XHJcbmV4cG9ydCBjb25zdCBMZWFybmluZ1Rhc2tzU2V0dGluZ3MgPSAoe3RhYiwgY29udGVudCwgcmVwb306IFByb3BzKSA9PiA8ZGl2PlxyXG4gIDxoMj57dGFiLnRhYkNsYXNzICE9PSAnbWlzc2lvbi10YWInID9cclxuICAgIExgTMOkcmFuZGVtw6VsIG9jaCB1cHBnaWZ0ZXJgIDpcclxuICAgIExgVXBwZHJhZ2B9PC9oMj5cclxuICB7aXNLZWRTdGFmZigpICYmIHRhYi50YWJDbGFzcyAhPT0gJ21pc3Npb24tdGFiJyA/IDw+XHJcbiAgICA8ZGl2PjxBbGlnbkhvcml6b250YWw+XHJcbiAgICAgIDxIb3Jpem9udGFsSXRlbT5cclxuICAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgY2hlY2tlZD17Y29udGVudC5oYXNDb21tb25MZWFybmluZ0dvYWxzfVxyXG4gICAgICAgIG9uQ2hhbmdlPXtldiA9PiByZXBvLmNvdXJzZUNvbnRlbnRzLnVwZGF0ZTxMZWFybmluZ0dvYWxzQ29udGVudD4oY29udGVudCwge2hhc0NvbW1vbkxlYXJuaW5nR29hbHM6ICEhZXYudGFyZ2V0LmNoZWNrZWR9KX0gLz5cclxuICAgICAgPC9Ib3Jpem9udGFsSXRlbT5cclxuICAgICAgPEhvcml6b250YWxJdGVtPlxyXG4gICAgICAgIDxwPlxyXG4gICAgICAgICZuYnNwO3tMYFNwZWNpZmljZXJhIGdlbWVuc2FtbWEgbMOkcmFuZGVtw6VsIGbDtnIgc2FtdGxpZ2EgdXBwZ2lmdGVyYH1cclxuICAgICAgICA8L3A+XHJcbiAgICAgIDwvSG9yaXpvbnRhbEl0ZW0+XHJcbiAgICA8L0FsaWduSG9yaXpvbnRhbD48L2Rpdj5cclxuXHJcbiAgICA8ZGl2PlxyXG4gICAgICA8cD5cclxuICAgICAgICAgIHtjb250ZW50Lmhhc0NvbW1vbkxlYXJuaW5nR29hbHMgP1xyXG4gICAgICAgICAgICBMYEFuZ2UgZGUgZ2VtZW5zYW1tYSBsw6RyYW5kZW3DpWxlbi4gQW5nZSBldHQgbMOkcmFuZGVtw6VsIHBlciByYWQuYCA6XHJcbiAgICAgICAgICAgIExgQW5nZSBldHQgbMOkcmFuZGVtw6VsIHBlciByYWQuYFxyXG4gICAgICAgICAgfVxyXG4gICAgICA8L3A+XHJcbiAgICAgICAgPHRleHRhcmVhIGNsYXNzTmFtZT1cImxlYXJuaW5nLWdvYWwtYm94XCIgdmFsdWU9e2NvbnRlbnQuY29tbW9uTGVhcm5pbmdHb2Fscy5qb2luKCdcXG4nKX1cclxuICAgICAgICAgIG9uQ2hhbmdlPXtldiA9PiByZXBvLmNvdXJzZUNvbnRlbnRzLnVwZGF0ZTxMZWFybmluZ0dvYWxzQ29udGVudD4oY29udGVudCwge1xyXG4gICAgICAgICAgICBjb21tb25MZWFybmluZ0dvYWxzOiBldi50YXJnZXQudmFsdWUuc3BsaXQoJ1xcbicpXHJcbiAgICAgICAgICB9KX0gLz5cclxuICAgIDwvZGl2PlxyXG4gIDwvPiA6IG51bGx9XHJcbjwvZGl2PlxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kUmVwbywgV2l0aEdyYXBocywgU3RyaXBHcmFwaHMgfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBMZWFybmluZ0dvYWxzQ29udGVudCwgQ291cnNlSW5zdGFuY2UsIENvdXJzZUJsb2NrLCBDb3Vyc2VUYWIsIFN0ZXBDb3Vyc2VUYWIsIFRoZW1lQ291cnNlVGFiLCBTdGVwQ291cnNlSW5zdGFuY2UsIFRhc2sgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IEwsIGFycmF5VG9Mb29rdXAgfSBmcm9tICcuLi8uLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IFRhc2tMaXN0LCBMZWFybmluZ01vZHVsZVRhc2sgfSBmcm9tICcuLi8uLi8uLi9jb3Vyc2Utdmlld2VyL3N1YmNvbXBvbmVudHMvdGFzay1saXN0JztcclxuaW1wb3J0IHsgQWRkVGFza0J1dHRvbiB9IGZyb20gJy4vYWRkLXRhc2stYnV0dG9uJztcclxuaW1wb3J0IHsgU29ydGFibGVUYXNrTGlzdCB9IGZyb20gJy4uLy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9zb3J0YWJsZS10YXNrLWxpc3QnO1xyXG5pbXBvcnQgeyBMaW5rIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XHJcbmltcG9ydCB7IGNvbXB1dGVVcGRhdGVkT3JkZXIsIGdldFNvcnRlZFRhc2tzIH0gZnJvbSAnLi4vLi4vbG9naWMvdGFzay1vcmRlcic7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHNjaG9vbDogc3RyaW5nO1xyXG4gIHJlcG86IEtlZEJhY2tlbmRSZXBvO1xyXG4gIGNvdXJzZTogU3RyaXBHcmFwaHM8Q291cnNlSW5zdGFuY2U+O1xyXG4gIGNvdXJzZVRhYjogU3RyaXBHcmFwaHM8Q291cnNlVGFiPjtcclxuICBjb250ZW50OiBXaXRoR3JhcGhzPExlYXJuaW5nR29hbHNDb250ZW50LCBcInRhc2tzXCI+O1xyXG4gIGRyYWZ0SWQ6IHN0cmluZztcclxuICBlZGl0TW9kZTogYm9vbGVhbjtcclxuICBsZWFybmluZ0dvYWxzOiBzdHJpbmdbXTtcclxuICBibG9jaz86IENvdXJzZUJsb2NrO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgTGVhcm5pbmdUYXNrc1dpdGhDb21tb25Hb2FscyA9ICh7IHNjaG9vbCwgcmVwbywgY29udGVudCwgZHJhZnRJZCwgZWRpdE1vZGUsIGNvdXJzZSwgY291cnNlVGFiLCBsZWFybmluZ0dvYWxzLCBibG9jayB9OiBQcm9wcykgPT4ge1xyXG4gIGNvbnN0IHRhc2tzID0gZ2V0U29ydGVkVGFza3MoY29udGVudCk7XHJcbiAgY29uc3Qgc3ViamVjdFRvVGFza3NMb29rdXAgPSBhcnJheVRvTG9va3VwKHRhc2tzLCB0ID0+IHQuc3ViamVjdCB8fCBcIlwiKTtcclxuICBjb25zdCBzdWJqZWN0ID0gY291cnNlLnR5cGUgPT09ICdzdGVwLWNvdXJzZScgP1xyXG4gICAgKGNvdXJzZSBhcyBTdGVwQ291cnNlSW5zdGFuY2UpLnN1YmplY3QgOlxyXG4gICAgY291cnNlVGFiLnN1YmplY3Q7XHJcblxyXG4gIGlmIChzdWJqZWN0ICYmICFzdWJqZWN0VG9UYXNrc0xvb2t1cFtzdWJqZWN0LnN1YmplY3ROYW1lXSkge1xyXG4gICAgLy8gTWFrZSBzdXJlIHdlIGhhdmUgYXQgbGVhc3Qgb25lIHN1YmplY3QgaGVhZGluZyBpZiB0YXNrIGxpc3QgaXMgZW1wdHk6XHJcbiAgICBzdWJqZWN0VG9UYXNrc0xvb2t1cFtzdWJqZWN0LnN1YmplY3ROYW1lXSA9IFtdO1xyXG4gIH1cclxuICAvLyBUT0RPOiBLb2xsYSBow6RyIG9jaCBpIGxlYXJuaW5nLXRhc2tzLXdpdGgtc2VwYXJhdGUtZ29hbHMuXHJcbiAgLy8gICogQmVow7Z2cyBzdWJqZWN0LWxvb2t1cD9cclxuICAvLyAgKiBLYW4gdmkgYnJ5dGEgdnktdmFyaWFudGVuIGZyw6VuIGVkaXQgdmFyaWFudGVuPyAoaSBiw6VkYSBmYWxsZW4/KVxyXG4gIC8vIFNlZGFuOlxyXG4gIC8vICAqIEltcGxlbWVudGVyYSBlZGl0IHZhcmlhbnRlcm5hLiBMw6RnZyB0aWxsLlxyXG4gIC8vICAqIEltcGxlbWVudGVyYSBzb3J0ZXJpbmcgZnVua3Rpb25hbGl0ZXQgaSBTb3J0YWJsZVRhc2tMaXN0LlxyXG4gIC8vICAqIEkgYWxsIHZ5ZXIgYXYgdGFza3MgKHN1YmplY3QgcGxhbm5lciArIGNvdXJzZXZpZXdlcik6IFxyXG4gIC8vICAgICogR8OlIGlnZW5vbSBhbGxhIHRhc2sgaSBkZW4gb3JkbmluZ2VuIGRvbSByZWRhbiDDpHIgaVxyXG4gIC8vICAgICogXHJcbiAgcmV0dXJuIDw+XHJcbiAgICB7T2JqZWN0LmtleXMoc3ViamVjdFRvVGFza3NMb29rdXApLm1hcChzdWJqZWN0ID0+IHtcclxuICAgICAgY29uc3QgdGFza0xpc3QgPSBzdWJqZWN0VG9UYXNrc0xvb2t1cFtzdWJqZWN0XTtcclxuICAgICAgY29uc3QgbGVhcm5pbmdNb2R1bGVUYXNrczogTGVhcm5pbmdNb2R1bGVUYXNrW10gPSB0YXNrTGlzdC5tYXAodGFzayA9PiAoe1xyXG4gICAgICAgIGlkOiB0YXNrLmlkLFxyXG4gICAgICAgIG5hbWU6IHRhc2submFtZSxcclxuICAgICAgICB1cmw6IGVkaXRNb2RlID9cclxuICAgICAgICAgIGAjLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlLmlkfS90YWJzLyR7Y291cnNlVGFiLmlkfS9jb250ZW50cy8ke2NvbnRlbnQuaWR9L3Rhc2tzLyR7dGFzay5pZH0vZHJhZnRzLyR7ZHJhZnRJZH0vZWRpdGAgOlxyXG4gICAgICAgICAgZHJhZnRJZCA/XHJcbiAgICAgICAgICAgIGAjLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlLmlkfS90YWJzLyR7Y291cnNlVGFiLmlkfS9jb250ZW50cy8ke2NvbnRlbnQuaWR9L3Rhc2tzLyR7dGFzay5pZH0vZHJhZnRzLyR7ZHJhZnRJZH1gIDpcclxuICAgICAgICAgICAgYCMvJHtzY2hvb2x9L2NvdXJzZXMvJHtjb3Vyc2UuaWR9L3RhYnMvJHtjb3Vyc2VUYWIuaWR9L3Rhc2tzLyR7dGFzay5pZH1gLFxyXG4gICAgICAgIGNvdXJzZU5hbWU6IGNvdXJzZS5uYW1lLFxyXG4gICAgICAgIGxlYXJuaW5nR29hbDogc3ViamVjdCxcclxuICAgICAgICBzdGVwOiBjb3Vyc2VUYWIudHlwZSA9PT0gJ3N0ZXAtY291cnNlLXRhYicgPyAoY291cnNlVGFiIGFzIFN0ZXBDb3Vyc2VUYWIpLnN0ZXBObyA6IHVuZGVmaW5lZCxcclxuICAgICAgICB0YXNrLFxyXG4gICAgICAgIGNvdXJzZUluZm86IHtcclxuICAgICAgICAgIHNjaG9vbCxcclxuICAgICAgICAgIGNvdXJzZTogY291cnNlLmlkLFxyXG4gICAgICAgICAgdGFiOiBjb3Vyc2VUYWIuaWRcclxuICAgICAgICB9XHJcbiAgICAgIH0pKTtcclxuXHJcbiAgICAgIGZ1bmN0aW9uIGxpbmtUb1Rhc2sgKHRhc2s6IFRhc2spIHtcclxuICAgICAgICByZXR1cm4gYC8ke3NjaG9vbH0vY291cnNlcy8ke2NvdXJzZS5pZH0vdGFicy8ke2NvdXJzZVRhYi5pZH0vY29udGVudHMvJHtjb250ZW50LmlkfS90YXNrcy8ke3Rhc2suaWR9L2RyYWZ0cy8ke2RyYWZ0SWR9L2VkaXRgO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gKFxyXG4gICAgICAgIDxkaXYga2V5PXtzdWJqZWN0fT5cclxuICAgICAgICAgIDxoNT57c3ViamVjdH08L2g1PlxyXG4gICAgICAgICAgPHVsPlxyXG4gICAgICAgICAgICB7bGVhcm5pbmdHb2Fscy5tYXAobGcgPT4gPGxpIGtleT17bGd9PntsZ308L2xpPil9XHJcbiAgICAgICAgICA8L3VsPlxyXG4gICAgICAgICAgeyFlZGl0TW9kZSA/XHJcbiAgICAgICAgICAgIDxUYXNrTGlzdCBsZWFybmluZ1Rhc2tzPXtsZWFybmluZ01vZHVsZVRhc2tzfSAvPiA6IDw+XHJcbiAgICAgICAgICAgICAgPFNvcnRhYmxlVGFza0xpc3RcclxuICAgICAgICAgICAgICAgIHRhc2tNZXRhcz17bGVhcm5pbmdNb2R1bGVUYXNrcy5tYXAoKHt0YXNrfSkgPT4gKHt0YXNrLCBpc1Rhc2tPd25lcjogdHJ1ZX0pKX1cclxuICAgICAgICAgICAgICAgIHJlbmRlckVkaXRMaW5rPXsoe3Rhc2t9KSA9PiA8PjxMaW5rIHRvPXtsaW5rVG9UYXNrKHRhc2spfSBjbGFzc05hbWU9XCJlZGl0SXRlbVwiLz4mbmJzcDs8Lz59XHJcbiAgICAgICAgICAgICAgICByZW5kZXJMaW5rPXsoe3Rhc2t9KSA9PiA8TGluayB0bz17bGlua1RvVGFzayh0YXNrKX0+e3Rhc2submFtZX08L0xpbms+IH1cclxuICAgICAgICAgICAgICAgIG9uU29ydD17KHNvdXJjZSwgdGFyZ2V0LCBwbGFjZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZE9yZGVyID0gY29tcHV0ZVVwZGF0ZWRPcmRlciAoXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudC50YXNrcyxcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50LnRhc2tPcmRlcixcclxuICAgICAgICAgICAgICAgICAgICBzb3VyY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LFxyXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudCxcclxuICAgICAgICAgICAgICAgICAgICB7YXBwZW5kTGVmdG92ZXJzOiB0cnVlfSk7XHJcbiAgICAgICAgICAgICAgICAgIHJlcG8uY291cnNlQ29udGVudHMudXBkYXRlPExlYXJuaW5nR29hbHNDb250ZW50Pihjb250ZW50LCB7dGFza09yZGVyOiB1cGRhdGVkT3JkZXJ9KTsgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH19IC8+XHJcbiAgICAgICAgICAgICAgPEFkZFRhc2tCdXR0b25cclxuICAgICAgICAgICAgICAgIGJyYW5jaD17cmVwb31cclxuICAgICAgICAgICAgICAgIGNvbnRlbnQ9e2NvbnRlbnR9XHJcbiAgICAgICAgICAgICAgICBjb3Vyc2U9e2NvdXJzZX1cclxuICAgICAgICAgICAgICAgIHNjaG9vbD17c2Nob29sfVxyXG4gICAgICAgICAgICAgICAgZHJhZnRJZD17ZHJhZnRJZH1cclxuICAgICAgICAgICAgICAgIHRhYj17Y291cnNlVGFifVxyXG4gICAgICAgICAgICAgICAgYmxvY2s9e2Jsb2NrfVxyXG4gICAgICAgICAgICAgICAgbGVhcm5pbmdHb2FsPXtzdWJqZWN0fSAvPlxyXG5cclxuICAgICAgICAgICAgPC8+fVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICApO1xyXG4gICAgfSl9PC8+O1xyXG59XHJcblxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kUmVwbywgV2l0aEdyYXBocywgU3RyaXBHcmFwaHMgfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBMZWFybmluZ0dvYWxzQ29udGVudCwgQ291cnNlSW5zdGFuY2UsIENvdXJzZUJsb2NrLCBDb3Vyc2VUYWIsIFN0ZXBDb3Vyc2VUYWIsIFRoZW1lQ291cnNlVGFiLCBUYXNrIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBMLCBhcnJheVRvTG9va3VwIH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBUYXNrTGlzdCwgTGVhcm5pbmdNb2R1bGVUYXNrIH0gZnJvbSAnLi4vLi4vLi4vY291cnNlLXZpZXdlci9zdWJjb21wb25lbnRzL3Rhc2stbGlzdCc7XHJcbmltcG9ydCB7IEFkZFRhc2tCdXR0b24gfSBmcm9tICcuL2FkZC10YXNrLWJ1dHRvbic7XHJcbmltcG9ydCB7IFNvcnRhYmxlVGFza0xpc3QgfSBmcm9tICcuLi8uLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvc29ydGFibGUtdGFzay1saXN0JztcclxuaW1wb3J0IHsgTGluayB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xyXG5pbXBvcnQgeyBjb21wdXRlVXBkYXRlZE9yZGVyLCBnZXRTb3J0ZWRUYXNrcyB9IGZyb20gJy4uLy4uL2xvZ2ljL3Rhc2stb3JkZXInO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBzY2hvb2w6IHN0cmluZztcclxuICByZXBvOiBLZWRCYWNrZW5kUmVwbztcclxuICBjb3Vyc2U6IFN0cmlwR3JhcGhzPENvdXJzZUluc3RhbmNlPjtcclxuICBjb3Vyc2VUYWI6IFN0cmlwR3JhcGhzPENvdXJzZVRhYj47XHJcbiAgY29udGVudDogV2l0aEdyYXBoczxMZWFybmluZ0dvYWxzQ29udGVudCwgXCJ0YXNrc1wiPjtcclxuICBkcmFmdElkOiBzdHJpbmc7XHJcbiAgZWRpdE1vZGU6IGJvb2xlYW47XHJcbiAgbGVhcm5pbmdHb2Fsczogc3RyaW5nW107XHJcbiAgYmxvY2s/OiBDb3Vyc2VCbG9jaztcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IExlYXJuaW5nVGFza3NXaXRoU2VwYXJhdGVHb2FscyA9ICh7IHNjaG9vbCwgcmVwbywgY29udGVudCwgZHJhZnRJZCwgZWRpdE1vZGUsIGNvdXJzZSwgY291cnNlVGFiLCBsZWFybmluZ0dvYWxzLCBibG9jayB9OiBQcm9wcykgPT4ge1xyXG4gIGNvbnN0IHRhc2tzID0gZ2V0U29ydGVkVGFza3MoY29udGVudCk7XHJcbiAgY29uc3QgY2F0aGVnb3JpemVkVGFza3M6IHsgW2lkOiBzdHJpbmddOiB0cnVlIH0gPSB7fTtcclxuICBjb25zdCBnb2FsVG9UYXNrc0xvb2t1cCA9IGxlYXJuaW5nR29hbHMucmVkdWNlKChyZXMsIGdvYWwpID0+IHtcclxuICAgIHJlc1tnb2FsXSA9IHRhc2tzLmZpbHRlcih0YXNrID0+IHtcclxuICAgICAgaWYgKHRhc2subGVhcm5pbmdHb2FsICYmIHRhc2subGVhcm5pbmdHb2FsLnNwbGl0KCdcXG4nKVxyXG4gICAgICAgIC5tYXAobGluZSA9PiBsaW5lLnRyaW0oKS50b0xvd2VyQ2FzZSgpKVxyXG4gICAgICAgIC5pbmNsdWRlcyhnb2FsLnRvTG93ZXJDYXNlKCkpKSB7XHJcbiAgICAgICAgY2F0aGVnb3JpemVkVGFza3NbdGFzay5pZF0gPSB0cnVlO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiByZXM7XHJcbiAgfSwge30gYXMgeyBbbGc6IHN0cmluZ106IFRhc2tbXSB9KTtcclxuXHJcbiAgY29uc3QgdW5jYXRoZWdvcml6ZWRUYXNrcyA9IHRhc2tzLmZpbHRlcih0ID0+ICFjYXRoZWdvcml6ZWRUYXNrc1t0LmlkXSk7XHJcbiAgaWYgKGNvdXJzZVRhYi50YWJDbGFzcyA9PT0gJ21pc3Npb24tdGFiJyB8fCB0YXNrcy5sZW5ndGggPT09IDApIHtcclxuICAgIGdvYWxUb1Rhc2tzTG9va3VwWycnXSA9IHVuY2F0aGVnb3JpemVkVGFza3M7XHJcbiAgfSBlbHNlIGlmICh1bmNhdGhlZ29yaXplZFRhc2tzLmxlbmd0aCA+IDApIHtcclxuICAgIGdvYWxUb1Rhc2tzTG9va3VwW0xgw5Z2ZXJncmlwYW5kZWBdID0gdW5jYXRoZWdvcml6ZWRUYXNrcztcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGxpbmtUb1Rhc2sodGFzazogVGFzaykge1xyXG4gICAgcmV0dXJuIGAvJHtzY2hvb2x9L2NvdXJzZXMvJHtjb3Vyc2UuaWR9L3RhYnMvJHtjb3Vyc2VUYWIuaWR9L2NvbnRlbnRzLyR7Y29udGVudC5pZH0vdGFza3MvJHt0YXNrLmlkfS9kcmFmdHMvJHtkcmFmdElkfS9lZGl0YDtcclxuICB9XHJcblxyXG4gIHJldHVybiA8PlxyXG4gICAge09iamVjdC5rZXlzKGdvYWxUb1Rhc2tzTG9va3VwKS5tYXAoZ29hbCA9PiB7XHJcbiAgICAgIGNvbnN0IHRhc2tMaXN0ID0gZ29hbFRvVGFza3NMb29rdXBbZ29hbF07XHJcbiAgICAgIGNvbnN0IGxlYXJuaW5nTW9kdWxlVGFza3M6IExlYXJuaW5nTW9kdWxlVGFza1tdID0gdGFza0xpc3QubWFwKHRhc2sgPT4gKHtcclxuICAgICAgICBpZDogdGFzay5pZCxcclxuICAgICAgICBuYW1lOiB0YXNrLm5hbWUsXHJcbiAgICAgICAgdXJsOiBlZGl0TW9kZSA/XHJcbiAgICAgICAgICBgIy8ke3NjaG9vbH0vY291cnNlcy8ke2NvdXJzZS5pZH0vdGFicy8ke2NvdXJzZVRhYi5pZH0vY29udGVudHMvJHtjb250ZW50LmlkfS90YXNrcy8ke3Rhc2suaWR9L2RyYWZ0cy8ke2RyYWZ0SWR9L2VkaXRgIDpcclxuICAgICAgICAgIGRyYWZ0SWQgP1xyXG4gICAgICAgICAgICBgIy8ke3NjaG9vbH0vY291cnNlcy8ke2NvdXJzZS5pZH0vdGFicy8ke2NvdXJzZVRhYi5pZH0vY29udGVudHMvJHtjb250ZW50LmlkfS90YXNrcy8ke3Rhc2suaWR9L2RyYWZ0cy8ke2RyYWZ0SWR9YCA6XHJcbiAgICAgICAgICAgIGAjLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlLmlkfS90YWJzLyR7Y291cnNlVGFiLmlkfS90YXNrcy8ke3Rhc2suaWR9YCxcclxuICAgICAgICBjb3Vyc2VOYW1lOiBjb3Vyc2UubmFtZSxcclxuICAgICAgICBsZWFybmluZ0dvYWw6IGNvdXJzZVRhYi50YWJDbGFzcyA9PT0gJ21pc3Npb24tdGFiJyA/IExgVXBwZHJhZ2AgOiBnb2FsLFxyXG4gICAgICAgIHN0ZXA6IGNvdXJzZVRhYi50eXBlID09PSAnc3RlcC1jb3Vyc2UtdGFiJyA/IChjb3Vyc2VUYWIgYXMgU3RlcENvdXJzZVRhYikuc3RlcE5vIDogdW5kZWZpbmVkLFxyXG4gICAgICAgIHRhc2ssXHJcbiAgICAgICAgY291cnNlSW5mbzoge1xyXG4gICAgICAgICAgc2Nob29sLFxyXG4gICAgICAgICAgY291cnNlOiBjb3Vyc2UuaWQsXHJcbiAgICAgICAgICB0YWI6IGNvdXJzZVRhYi5pZFxyXG4gICAgICAgIH1cclxuICAgICAgfSkpO1xyXG4gICAgICByZXR1cm4gKFxyXG4gICAgICAgIDxkaXYga2V5PXtnb2FsfT5cclxuICAgICAgICAgIHtnb2FsICYmIDxoND57Z29hbH08L2g0Pn1cclxuICAgICAgICAgIHshZWRpdE1vZGUgP1xyXG4gICAgICAgICAgICA8VGFza0xpc3QgbGVhcm5pbmdUYXNrcz17bGVhcm5pbmdNb2R1bGVUYXNrc30gLz4gOlxyXG4gICAgICAgICAgICA8PlxyXG4gICAgICAgICAgICAgIDxTb3J0YWJsZVRhc2tMaXN0XHJcbiAgICAgICAgICAgICAgICB0YXNrTWV0YXM9e2xlYXJuaW5nTW9kdWxlVGFza3MubWFwKCh7IHRhc2sgfSkgPT4gKHsgdGFzaywgaXNUYXNrT3duZXI6IHRydWUgfSkpfVxyXG4gICAgICAgICAgICAgICAgcmVuZGVyRWRpdExpbms9eyh7IHRhc2sgfSkgPT4gPD48TGluayB0bz17bGlua1RvVGFzayh0YXNrKX0gY2xhc3NOYW1lPVwiZWRpdEl0ZW1cIiAvPiZuYnNwOzwvPn1cclxuICAgICAgICAgICAgICAgIHJlbmRlckxpbms9eyh7IHRhc2sgfSkgPT4gPExpbmsgdG89e2xpbmtUb1Rhc2sodGFzayl9Pnt0YXNrLm5hbWV9PC9MaW5rPn1cclxuICAgICAgICAgICAgICAgIG9uU29ydD17KHNvdXJjZSwgdGFyZ2V0LCBwbGFjZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZE9yZGVyID0gY29tcHV0ZVVwZGF0ZWRPcmRlcihcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50LnRhc2tzLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQudGFza09yZGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZSxcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50LFxyXG4gICAgICAgICAgICAgICAgICAgIHsgYXBwZW5kTGVmdG92ZXJzOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgICByZXBvLmNvdXJzZUNvbnRlbnRzLnVwZGF0ZTxMZWFybmluZ0dvYWxzQ29udGVudD4oY29udGVudCwgeyB0YXNrT3JkZXI6IHVwZGF0ZWRPcmRlciB9KTtcclxuICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICA8QWRkVGFza0J1dHRvblxyXG4gICAgICAgICAgICAgICAgYnJhbmNoPXtyZXBvfVxyXG4gICAgICAgICAgICAgICAgY29udGVudD17Y29udGVudH1cclxuICAgICAgICAgICAgICAgIGNvdXJzZT17Y291cnNlfVxyXG4gICAgICAgICAgICAgICAgc2Nob29sPXtzY2hvb2x9XHJcbiAgICAgICAgICAgICAgICBkcmFmdElkPXtkcmFmdElkfVxyXG4gICAgICAgICAgICAgICAgdGFiPXtjb3Vyc2VUYWJ9XHJcbiAgICAgICAgICAgICAgICBibG9jaz17YmxvY2t9XHJcbiAgICAgICAgICAgICAgICBsZWFybmluZ0dvYWw9e2dvYWx9IC8+XHJcbiAgICAgICAgICAgIDwvPlxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICApO1xyXG4gICAgfSl9PC8+O1xyXG59XHJcblxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBTdHJpcEdyYXBocyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IFJlc291cmNlTGlzdCwgQ291cnNlQ29udGVudCB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgVmFsdWUgfSBmcm9tICdrZWRiYWNrZW5kL29ic2VydmFibGUnO1xyXG5pbXBvcnQgeyBsaXZlUXVlcnlWaWV3IH0gZnJvbSAnLi4vLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2xpdmUtcXVlcnktdmlldyc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gICAgY29udGVudDogVmFsdWU8U3RyaXBHcmFwaHM8Q291cnNlQ29udGVudD4+O1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgUmVzb3VyY2VMaXN0VmlldyA9IGxpdmVRdWVyeVZpZXcoKHsgY29udGVudCB9OiBQcm9wcykgPT5cclxuICAgIGNvbnRlbnQubWFwKGNvbnRlbnRSZXNvdXJjZXMgPT4ge1xyXG4gICAgICAgIHZhciByZXNvdXJjZUxpc3QgPSAoY29udGVudFJlc291cmNlcyBhcyBSZXNvdXJjZUxpc3QgfCB1bmRlZmluZWQpO1xyXG4gICAgICAgIHJldHVybiA8ZGl2PlxyXG4gICAgICAgICAgICB7cmVzb3VyY2VMaXN0ICYmIHJlc291cmNlTGlzdC5yZXNvdXJjZXMubGVuZ3RoID4gMCAmJiA8ZGl2IGNsYXNzTmFtZT1cImtlZF9ib3hlZCBrcE1lbnVcIj5cclxuICAgICAgICAgICAgICAgIDxoMj5SZXN1cnNlcjwvaDI+XHJcbiAgICAgICAgICAgICAgICA8aHIgLz5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGFza0NvbnRhaW5lclwiPlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VMaXN0LnJlc291cmNlcy5tYXAocmVzID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWxcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPXtyZXMudXJsfSB0YXJnZXQ9XCJfYmxhbmtcIj57cmVzLm5hbWV9PC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICA8L2Rpdj5cclxuICAgIH0pKVxyXG4iLCJpbXBvcnQgUmVhY3QsIHsgdXNlQ29udGV4dCB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgTCB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgaXNLZWRTdGFmZiB9IGZyb20gJy4uLy4uL2xvZ2ljL2lzLWtlZC1zdGFmZic7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRSZXBvIH0gZnJvbSAna2VkYmFja2VuZC9yZXBvJztcclxuaW1wb3J0IHsgUmVzb3VyY2VMaXN0IH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBEaWFsb2dzQ29udGV4dCB9IGZyb20gJy4uLy4uL2NvbW1vbi9kaWFsb2ctY29udGV4dCc7XHJcbmltcG9ydCB7IEVkaXRSZXNvdXJjZSB9IGZyb20gJy4uLy4uLy4uL2NvdXJzZS1idWlsZGVyL21vZGFsLXBhZ2VzL2VkaXQtcmVzb3VyY2UnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICAgIHJlcG86IEtlZEJhY2tlbmRSZXBvO1xyXG4gICAgY29udGVudDogUmVzb3VyY2VMaXN0O1xyXG4gICAgZWRpdE1vZGU6IGJvb2xlYW47XHJcbiAgfVxyXG5cclxuZXhwb3J0IGNvbnN0IFJlc291cmNlTGlzdENvbnRlbnRCb3ggPSAoeyBjb250ZW50LCBlZGl0TW9kZSwgcmVwbyB9OiBQcm9wcykgPT4ge1xyXG4gICAgY29uc3QgeyByZXNvdXJjZXMgfSA9IGNvbnRlbnQ7XHJcbiAgICBsZXQgY29udGV4dCA9IHVzZUNvbnRleHQoRGlhbG9nc0NvbnRleHQpO1xyXG4gICAgcmV0dXJuIGVkaXRNb2RlICYmICghY29udGVudC5sb2NrZWQgfHwgaXNLZWRTdGFmZigpKSA/XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwia2VkX2JveGVkXCI+XHJcbiAgICAgICAgICAgICAgICA8aDQ+e0xgUmVzdXJzZXJgfTwvaDQ+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRhc2tDb250YWluZXJcIj5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvdXJjZXMubWFwKChyZXNvdXJjZSwgaWR4KSA9PiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCIga2V5PXtpZHh9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBjbGFzc05hbWU9XCJlZGl0SXRlbVwiIG9uQ2xpY2s9eygpPT4gY29udGV4dC5vcGVuRGlhbG9nKDxFZGl0UmVzb3VyY2UgdGl0bGU9XCJFZGl0IHJlc291cmNlXCIgcmVzb3VyY2U9e3Jlc291cmNlfSBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TYXZlPXsocmVzKT0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VzW2lkeF0gPSByZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcG8uY291cnNlQ29udGVudHMudXBkYXRlPFJlc291cmNlTGlzdD4oY29udGVudCwge3Jlc291cmNlczogWy4uLnJlc291cmNlc119KTsgY29udGV4dC5jbG9zZURpYWxvZygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRGVsZXRlPXsoKT0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VzLnNwbGljZShpZHgsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBvLmNvdXJzZUNvbnRlbnRzLnVwZGF0ZTxSZXNvdXJjZUxpc3Q+KGNvbnRlbnQsIHtyZXNvdXJjZXM6IFsuLi5yZXNvdXJjZXNdIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuY2xvc2VEaWFsb2coKTt9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+KX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PC9hPiZuYnNwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj17cmVzb3VyY2UudXJsfT57cmVzb3VyY2UubmFtZX08L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PiAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+IFxyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGEgY2xhc3NOYW1lPVwiYnRuXCIgb25DbGljayA9IHsoKT0+IGNvbnRleHQub3BlbkRpYWxvZyg8RWRpdFJlc291cmNlIHRpdGxlPVwiUmVzdXJzXCIgb25TYXZlPXsocmVzb3VyY2UpID0+IHtyZXBvLmNvdXJzZUNvbnRlbnRzLnVwZGF0ZTxSZXNvdXJjZUxpc3Q+KGNvbnRlbnQsIHtyZXNvdXJjZXM6IFsuLi5yZXNvdXJjZXMsIHJlc291cmNlXX0pOyBjb250ZXh0LmNsb3NlRGlhbG9nKCk7fX0vPil9PjxpIGNsYXNzTmFtZT1cImZhIGZhLXBsdXNcIiBhcmlhLWhpZGRlbj1cInRydWVcIiAvPntMYEzDpGdnIHRpbGwgcmVzdXJzYH08L2E+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj4gOiA8ZGl2PjwvZGl2PiAgICAgXHJcbn0iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBSaWNoVGV4dENvbnRlbnQgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IFd5c2l3eWcgfSBmcm9tICcuLi8uLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvd3lzaXd5Zyc7XHJcbmltcG9ydCBhY3Rpb25zIGZyb20gJy4uLy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy93eXNpd3lnL2FjdGlvbnMtc3YnO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kUmVwbyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IGlzS2VkU3RhZmYgfSBmcm9tICcuLi8uLi9sb2dpYy9pcy1rZWQtc3RhZmYnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICByZXBvOiBLZWRCYWNrZW5kUmVwbztcclxuICBjb250ZW50OiBSaWNoVGV4dENvbnRlbnQ7XHJcbiAgZWRpdE1vZGU6IGJvb2xlYW47XHJcbiAgbWF4Q2hhcnM/OiBudW1iZXI7XHJcbiAgcmVwb3J0TnVtQ2hhcnM/OiAobnVtQ2hhcnM6IG51bWJlcikgPT4gdm9pZDtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IFJpY2hUZXh0Q29udGVudEJveCA9ICh7Y29udGVudCwgcmVwbywgZWRpdE1vZGUsIHJlcG9ydE51bUNoYXJzLCBtYXhDaGFyc306IFByb3BzKSA9PiBlZGl0TW9kZSA/IDxkaXY+XHJcbiAgPFd5c2l3eWdcclxuICAgIGh0bWw9e2NvbnRlbnQuaHRtbH1cclxuICAgIGRlZmF1bHRBY3Rpb25zPXthY3Rpb25zfVxyXG4gICAgcmVhZE9ubHk9eyFlZGl0TW9kZSB8fCAoY29udGVudC5sb2NrZWQgJiYgIWlzS2VkU3RhZmYoKSkgfVxyXG4gICAgcmVwb3J0TnVtQ2hhcnM9e3JlcG9ydE51bUNoYXJzfVxyXG4gICAgbWF4Q2hhcnM9e21heENoYXJzfVxyXG4gICAgYWN0aW9ucz17W1xyXG4gICAgICBcImJvbGRcIixcclxuICAgICAgXCJpdGFsaWNcIixcclxuICAgICAgXCJ1bmRlcmxpbmVcIixcclxuICAgICAgXCJzdHJpa2V0aHJvdWdoXCIsXHJcbiAgICAgIFwiaGVhZGluZzJcIixcclxuICAgICAgXCJoZWFkaW5nM1wiLFxyXG4gICAgICBcIm9saXN0XCIsXHJcbiAgICAgIFwidWxpc3RcIixcclxuICAgICAgXCJvdXRkZW50XCIsXHJcbiAgICAgIFwiaW5kZW50XCIsXHJcbiAgICAgIFwibGluZVwiLFxyXG4gICAgICBcImxpbmtcIixcclxuICAgICAgXCJpbWFnZVwiXX1cclxuICAgIG9uQ2hhbmdlPXtlZGl0TW9kZSAmJiAoaHRtbCA9PiByZXBvLmNvdXJzZUNvbnRlbnRzLnVwZGF0ZTxSaWNoVGV4dENvbnRlbnQ+KGNvbnRlbnQsIHtodG1sfSkpfSAvPlxyXG5cclxuPC9kaXY+IDogPGRpdj5cclxuICA8ZGl2IGNsYXNzTmFtZT1cInJpY2gtdGV4dC1yZWFkb25seVwiIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXt7X19odG1sOiBjb250ZW50Lmh0bWx9fSAvPlxyXG48L2Rpdj47XHJcbiIsImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlUmVmLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRSZXBvLCBXaXRoR3JhcGhzIH0gZnJvbSAna2VkYmFja2VuZC9yZXBvJztcclxuaW1wb3J0IHsgV29yZEJhbmtDb250ZW50LCBTdGVwQ291cnNlSW5zdGFuY2UsIFN0ZXBDb3Vyc2VUYWIgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IGNmZyB9IGZyb20gJy4uLy4uLy4uLy4uL2dsb2JhbHMvS0VELmNmZyc7XHJcbmltcG9ydCB7IFdvcmRCYW5rQ29udGVudFNldHRpbmdzIH0gZnJvbSAnLi93b3JkLWJhbmstY29udGVudC1zZXR0aW5ncyc7XHJcbmltcG9ydCB7IFNwaW5uZXIgfSBmcm9tICcuLi8uLi8uLi9jb3Vyc2UtYnVpbGRlci9zdWItY29tcG9uZW50cy9zcGlubmVyJztcclxuaW1wb3J0IHsgRWxsaXBzaXNMb2FkZXIgfSBmcm9tICcuLi8uLi8uLi9jb3Vyc2UtYnVpbGRlci9zdWItY29tcG9uZW50cy9lbGxpcHNpcy1sb2FkZXInO1xyXG5pbXBvcnQgeyBpc0tlZFN0YWZmIH0gZnJvbSAnLi4vLi4vbG9naWMvaXMta2VkLXN0YWZmJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgcmVwbzogS2VkQmFja2VuZFJlcG9cclxuICBjb250ZW50OiBXb3JkQmFua0NvbnRlbnRcclxuICBzaWJsaW5nV29yZEJhbmtzOiBXb3JkQmFua0NvbnRlbnRbXVxyXG4gIGVkaXRNb2RlOiBib29sZWFuXHJcbiAgY291cnNlOiBTdGVwQ291cnNlSW5zdGFuY2VcclxuICBjb3Vyc2VUYWI6IFN0ZXBDb3Vyc2VUYWJcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFdvcmRCYW5rQ29udGVudEJveCh7cmVwbywgY29udGVudCwgc2libGluZ1dvcmRCYW5rcywgZWRpdE1vZGUsIGNvdXJzZSwgY291cnNlVGFifTogUHJvcHMpIHtcclxuICBjb25zdCB7c2VsZWN0ZWRXb3JkQmFua30gPSBjb250ZW50O1xyXG4gIGNvbnN0IHtzdWJqZWN0TmFtZX0gPSBjb3Vyc2Uuc3ViamVjdDtcclxuICBjb25zdCB7c3RlcE5vfSA9IGNvdXJzZVRhYjtcclxuICBjb25zdCBpZnJhbWVTcmMgPSBzZWxlY3RlZFdvcmRCYW5rICYmIGAke2NmZy5LRURfV09SREJBTktTX1VSTH0/cHJldmlldz10cnVlJnN1YmplY3Q9JHtzdWJqZWN0TmFtZX0mc3RlcD0ke3N0ZXBOb30mbGlzdD0ke3NlbGVjdGVkV29yZEJhbmsua2V5fWA7XHJcbiAgY29uc3QgW2lmcmFtZUhlaWdodCwgc2V0SWZyYW1lSGVpZ2h0XSA9IHVzZVN0YXRlKDIwMCk7XHJcbiAgY29uc3QgaWZyYW1lUmVmID0gdXNlUmVmPEhUTUxJRnJhbWVFbGVtZW50PigpO1xyXG4gIGNvbnN0IHdvcmRCYW5rc0FscmVhZHlBZGRlZCA9IHNpYmxpbmdXb3JkQmFua3MubWFwKGMgPT4gYy5zZWxlY3RlZFdvcmRCYW5rICYmIGMuc2VsZWN0ZWRXb3JkQmFuay5rZXkpXHJcbiAgICAuZmlsdGVyKGtleSA9PiAhIWtleSk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKT0+c2V0SWZyYW1lSGVpZ2h0KDIwMCksIFtzZWxlY3RlZFdvcmRCYW5rICYmIHNlbGVjdGVkV29yZEJhbmsua2V5XSk7Ly8gUmVzZXQgaWZyYW1lIGhlaWdodCB3aGVuZXZlciBzZWxlY3RlZCB3b3JkIGJhbmsgY2hhbmdlcyBhbmQgbGV0IG9ubG9hZCBmaXggaXQuXHJcbiAgICBcclxuICByZXR1cm4gPD5cclxuICAgIHtlZGl0TW9kZSAmJiAoIWNvbnRlbnQubG9ja2VkIHx8IGlzS2VkU3RhZmYoKSkgJiYgPFJlYWN0LlN1c3BlbnNlIGZhbGxiYWNrPXs8RWxsaXBzaXNMb2FkZXIvPn0+XHJcbiAgICAgIDxXb3JkQmFua0NvbnRlbnRTZXR0aW5ncyB7Li4ue3N1YmplY3ROYW1lLCBzdGVwTm8sIHdvcmRCYW5rc0FscmVhZHlBZGRlZCB9fVxyXG4gICAgICAgIHNlbGVjdGVkV29yZEJhbms9e3NlbGVjdGVkV29yZEJhbmt9XHJcbiAgICAgICAgb25DaGFuZ2U9eyh7bmFtZSwga2V5fSkgPT4ge1xyXG4gICAgICAgICAgcmVwby5jb3Vyc2VDb250ZW50cy51cGRhdGU8V29yZEJhbmtDb250ZW50Pihjb250ZW50LCB7c2VsZWN0ZWRXb3JkQmFuazoge25hbWUsIGtleX19KTtcclxuICAgICAgICB9fVxyXG4gICAgICAvPlxyXG4gICAgPC9SZWFjdC5TdXNwZW5zZT59XHJcbiAgICB7c2VsZWN0ZWRXb3JkQmFuayAmJiBcclxuICAgICAgPGlmcmFtZVxyXG4gICAgICAgIHJlZj17aWZyYW1lUmVmfVxyXG4gICAgICAgIHNjcm9sbGluZz1cIm5vXCJcclxuICAgICAgICBmcmFtZUJvcmRlcj1cIjBcIlxyXG4gICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICB3aWR0aDogXCIxMDAlXCIsXHJcbiAgICAgICAgICBoZWlnaHQ6IGlmcmFtZUhlaWdodCxcclxuICAgICAgICAgIHBhZGRpbmc6IDAsXHJcbiAgICAgICAgICBtYXJnaW46IDBcclxuICAgICAgICB9fVxyXG4gICAgICAgIHNyYz17aWZyYW1lU3JjfVxyXG4gICAgICAgIG9uTG9hZD17KCk9PntcclxuICAgICAgICAgIHNldElmcmFtZUhlaWdodChpZnJhbWVSZWYuY3VycmVudC5jb250ZW50V2luZG93LmRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0KTtcclxuICAgICAgICB9fSAvPlxyXG4gICAgfVxyXG4gIDwvPjtcclxufVxyXG5cclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgY2ZnIH0gZnJvbSAnLi4vLi4vLi4vLi4vZ2xvYmFscy9LRUQuY2ZnJztcclxuaW1wb3J0IHVzZUZldGNoIGZyb20gJ2ZldGNoLXN1c3BlbnNlJztcclxuaW1wb3J0IHsgQ2hlY2tsaXN0IH0gZnJvbSAnLi4vLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2NoZWNrbGlzdCc7XHJcbmltcG9ydCB7IEwgfSBmcm9tICcuLi8uLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCBTZWxlY3QgZnJvbSAncmVhY3Qtc2VsZWN0JztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgc3ViamVjdE5hbWU6IHN0cmluZ1xyXG4gIHN0ZXBObzogbnVtYmVyXHJcbiAgc2VsZWN0ZWRXb3JkQmFuaz86IHtuYW1lOiBzdHJpbmcsIGtleTogc3RyaW5nfVxyXG4gIHdvcmRCYW5rc0FscmVhZHlBZGRlZD86IHN0cmluZ1tdXHJcbiAgb25DaGFuZ2U6ICh3b3JkQmFuazoge25hbWU6IHN0cmluZywga2V5OiBzdHJpbmd9KSA9PiB2b2lkXHJcbn1cclxuXHJcbmludGVyZmFjZSBBdmFpbGFibGVXb3JkQmFuayB7XHJcbiAgaWQ6IHN0cmluZztcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgb3JkZXI6IHN0cmluZztcclxuICB1cmw6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFdvcmRCYW5rQ29udGVudFNldHRpbmdzICh7c3ViamVjdE5hbWUsIHN0ZXBObywgc2VsZWN0ZWRXb3JkQmFuaywgd29yZEJhbmtzQWxyZWFkeUFkZGVkLCBvbkNoYW5nZX06IFByb3BzKSB7XHJcbiAgY29uc3QgYXBpVXJsID0gYCR7Y2ZnLktFRF9FTlVNX1dPUkRCQU5LU19VUkx9P3N2LmNvbnRlbnR0eXBlPWFwcGxpY2F0aW9uL2pzb24mc3ViamVjdD0ke3N1YmplY3ROYW1lfSZzdGVwPSR7c3RlcE5vfWA7XHJcbiAgbGV0IGF2YWlsYWJsZVdvcmRCYW5rcyA9IHVzZUZldGNoKGFwaVVybCkgYXMgQXZhaWxhYmxlV29yZEJhbmtbXTtcclxuXHJcbiAgLy8gRmlsdGVyIG91dCB3b3JkIGJhbmtzIHRoYXQgd2FzIGFscmVhZHkgYWRkZWQgdG8gdGhlIHNhbWUgdGFiXHJcbiAgYXZhaWxhYmxlV29yZEJhbmtzID0gYXZhaWxhYmxlV29yZEJhbmtzLmZpbHRlcigoe29yZGVyfSkgPT5cclxuICAgIChzZWxlY3RlZFdvcmRCYW5rICYmIG9yZGVyID09PSBzZWxlY3RlZFdvcmRCYW5rLmtleSkgfHxcclxuICAgICF3b3JkQmFua3NBbHJlYWR5QWRkZWQgfHxcclxuICAgICF3b3JkQmFua3NBbHJlYWR5QWRkZWQuaW5jbHVkZXMob3JkZXIpKTtcclxuICBcclxuICByZXR1cm4gPGRpdj5cclxuICAgIDxoMz57c2VsZWN0ZWRXb3JkQmFuayA/IHNlbGVjdGVkV29yZEJhbmsubmFtZSA6IExgVsOkbGogb3JkYmFua2B9PC9oMz5cclxuICAgIDxTZWxlY3RcclxuICAgICAgaXNNdWx0aT17ZmFsc2V9XHJcbiAgICAgIHBsYWNlaG9sZGVyPXtMYFbDpGxqIGJsYW5kIG9yZGJhbmtlciBmw7ZyICR7c3ViamVjdE5hbWV9LCBzdGVnICR7c3RlcE5vfWB9XHJcbiAgICAgIG5vT3B0aW9uc01lc3NhZ2U9eygpPT5MYEt1bmRlIGludGUgaGl0dGEgdGlsbGfDpG5nbGlnYSBvcmRiYW5rZXIgZsO2ciAke3N1YmplY3ROYW1lfSwgc3RlZyAke3N0ZXBOb31gfVxyXG4gICAgICBvcHRpb25zPXthdmFpbGFibGVXb3JkQmFua3MubWFwKCh7bmFtZSwgaWQsIG9yZGVyLCB1cmx9KSA9PiAoe2xhYmVsOiBuYW1lLCB2YWx1ZTogb3JkZXJ9KSl9XHJcbiAgICAgIHZhbHVlPXtzZWxlY3RlZFdvcmRCYW5rICYmIHtsYWJlbDogc2VsZWN0ZWRXb3JkQmFuay5uYW1lLCB2YWx1ZTogc2VsZWN0ZWRXb3JkQmFuay5rZXl9fVxyXG4gICAgICBvbkNoYW5nZT17KG9wdGlvbjoge2xhYmVsOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmd9KSA9PiBvbkNoYW5nZSh7bmFtZTogb3B0aW9uLmxhYmVsLCBrZXk6IG9wdGlvbi52YWx1ZX0pfSAvPlxyXG4gIDwvZGl2PjtcclxufVxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IFZhbHVlLCBFbWl0dGVyIH0gZnJvbSAna2VkYmFja2VuZC9vYnNlcnZhYmxlJztcclxuaW1wb3J0IHsgQ291cnNlQ29udGVudCwgQ291cnNlSW5zdGFuY2UsIFRoZW1lQ291cnNlSW5zdGFuY2UsIFRoZW1lQ291cnNlVGFiLCBDb3Vyc2VUYWIsIENvdXJzZUJsb2NrIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBsaXZlUXVlcnlWaWV3IH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2xpdmUtcXVlcnktdmlldyc7XHJcbmltcG9ydCB7IGNvbXBhcmVQcm9wLCBMIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kUmVwbywgV2l0aEdyYXBocywgU3RyaXBHcmFwaHMgfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBBZGRDb250ZW50QnV0dG9uIH0gZnJvbSAnLi9hZGQtY29udGVudC1idXR0b24nO1xyXG5pbXBvcnQgeyBDb3Vyc2VDb250ZW50Qm94LCBDT1VSU0VfQ09OVEVOVF9UWVBFUyB9IGZyb20gJy4vY291cnNlLWNvbnRlbnRzJztcclxuaW1wb3J0IHsgUmVtb3ZlSXRlbSB9IGZyb20gJy4uLy4uL2NvdXJzZS1idWlsZGVyL3N1Yi1jb21wb25lbnRzL3JlbW92ZS1pdGVtJztcclxuaW1wb3J0IHsgQWxpZ25Ib3Jpem9udGFsIH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2FsaWduLWhvcml6b250YWwnO1xyXG5pbXBvcnQgeyBIb3Jpem9udGFsSXRlbSB9IGZyb20gJy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9ob3Jpem9udGFsLWl0ZW0nO1xyXG5pbXBvcnQgeyBDb3Vyc2VUYWJDbGFzc2VzIH0gZnJvbSAnLi9jb3Vyc2UtdGFiL3RhYi1jbGFzc2VzJztcclxuaW1wb3J0IHsgaXNLZWRTdGFmZiB9IGZyb20gJy4uL2xvZ2ljL2lzLWtlZC1zdGFmZic7XHJcbmltcG9ydCB7IFRhYlNldHRpbmdzIH0gZnJvbSAnLi90YWItc2V0dGluZ3MnO1xyXG5pbXBvcnQgeyBMYXp5Q29udGVudCB9IGZyb20gJy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9sYXp5LWNvbnRlbnQnO1xyXG5pbXBvcnQgeyBDb3Vyc2VUYWJDb250ZW50Qm94IH0gZnJvbSAnLi9jb3Vyc2UtdGFiLWNvbnRlbnQtYm94JztcclxuaW1wb3J0IHsgVGFiU2V0dGluZ3NBZG1pbiB9IGZyb20gJy4vdGFiLXNldHRpbmdzLWFkbWluJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgc2Nob29sOiBzdHJpbmc7XHJcbiAgZHJhZnRJZDogc3RyaW5nO1xyXG4gIGNvdXJzZTogV2l0aEdyYXBoczxDb3Vyc2VJbnN0YW5jZSwgXCJ0YWJzXCIgfCBcImJsb2Nrc1wiPjtcclxuICBicmFuY2g6IEtlZEJhY2tlbmRSZXBvO1xyXG4gIGJsb2NrOiBDb3Vyc2VCbG9jayB8IG51bGw7XHJcbiAgdGFiOiBTdHJpcEdyYXBoczxDb3Vyc2VUYWI+LFxyXG4gIGVkaXRNb2RlPzogYm9vbGVhblxyXG4gIGxhenlDb250ZW50czogVmFsdWU8V2l0aEdyYXBoczxDb3Vyc2VDb250ZW50LCBcInRhc2tzXCI+W10+O1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgQ291cnNlVGFiQXJlYSA9IGxpdmVRdWVyeVZpZXcoKHsgY291cnNlLCBicmFuY2gsIGJsb2NrLCB0YWIsIGVkaXRNb2RlLCBsYXp5Q29udGVudHMsIHNjaG9vbCwgZHJhZnRJZCB9OiBQcm9wcykgPT5cclxuICBsYXp5Q29udGVudHMubWFwKGNvbnRlbnRzID0+IHtcclxuICAgIGlmICghdGFiKSB7XHJcbiAgICAgIGlmIChlZGl0TW9kZSlcclxuICAgICAgICByZXR1cm4gPHA+e0xgRGVubmEga3VycyBzYWtuYXIgaW5uZWjDpWxsLiBTa2FwYSBueSBmbGlrIGdlbm9tIGtuYXBwZW4gb3ZhbmB9PC9wPlxyXG4gICAgICBlbHNlXHJcbiAgICAgICAgcmV0dXJuIGlzS2VkU3RhZmYoKSA/XHJcbiAgICAgICAgICA8cD57TGBEZW5uYSBrdXJzIHNha25hciBpbm5laMOlbGwuIFbDpGxqIFJlZGlnZXJhIGtuYXBwZW4gZsO2ciBhdHQgbMOkZ2dhIHRpbGwgZmxpa2FyLmB9PC9wPiA6XHJcbiAgICAgICAgICA8cD57TGBEZW5uYSBrdXJzIHNha25hciBpbm5laMOlbGwuYH08L3A+XHJcbiAgICB9XHJcbiAgICBjb250ZW50cyA9IGNvbnRlbnRzLnNsaWNlKCkuc29ydChjb21wYXJlUHJvcChcIm9yZGVyXCIpKTtcclxuICAgIHJldHVybiA8ZGl2PlxyXG4gICAgICB7ZWRpdE1vZGUgPyA8PlxyXG4gICAgICAgIHtpc0tlZFN0YWZmKCkgfHwgIXRhYi5sb2NrZWQgP1xyXG4gICAgICAgICAgPFRhYlNldHRpbmdzIGNvdXJzZT17Y291cnNlIGFzIENvdXJzZUluc3RhbmNlfSB0YWI9e3RhYn0gcmVwbz17YnJhbmNofSAvPiA6XHJcbiAgICAgICAgICBudWxsfVxyXG4gICAgICAgIHtpc0tlZFN0YWZmKCkgP1xyXG4gICAgICAgICAgPFRhYlNldHRpbmdzQWRtaW4gY291cnNlPXtjb3Vyc2UgYXMgQ291cnNlSW5zdGFuY2V9IHRhYj17dGFifSByZXBvPXticmFuY2h9IGJsb2NrPXtibG9ja30gLz4gOlxyXG4gICAgICAgICAgbnVsbH1cclxuICAgICAgPC8+IDogbnVsbFxyXG4gICAgICB9XHJcblxyXG4gICAgICB7Y29udGVudHMubWFwKChjb250ZW50LCBjb250ZW50T3JkZXJJbmRleCkgPT4gPENvdXJzZVRhYkNvbnRlbnRCb3hcclxuICAgICAgICBrZXk9e2NvbnRlbnQuaWR9XHJcbiAgICAgICAgY29udGVudD17Y29udGVudH1cclxuICAgICAgICBicmFuY2g9e2JyYW5jaH1cclxuICAgICAgICBjb250ZW50T3JkZXJJbmRleD17Y29udGVudE9yZGVySW5kZXh9XHJcbiAgICAgICAgY29udGVudHM9e2NvbnRlbnRzfVxyXG4gICAgICAgIGNvdXJzZT17Y291cnNlfVxyXG4gICAgICAgIGRyYWZ0SWQ9e2RyYWZ0SWR9XHJcbiAgICAgICAgZWRpdE1vZGU9e2VkaXRNb2RlfVxyXG4gICAgICAgIHNjaG9vbD17c2Nob29sfVxyXG4gICAgICAgIGJsb2NrPXtibG9ja31cclxuICAgICAgICB0YWI9e3RhYn0gLz4pfVxyXG5cclxuICAgICAgICB7ISFlZGl0TW9kZSAmJiAoaXNLZWRTdGFmZigpIHx8ICF0YWIubG9ja2VkKSAmJiA8PlxyXG5cclxuICAgICAgICAgIHt0YWIudGFiQ2xhc3MgPT09ICd3b3JkLWJhbmstdGFiJyAmJlxyXG5cclxuICAgICAgICAgICAgLy8gWyBBZGQgV29yZCBCYW5rIF0gYnV0dG9uXHJcbiAgICAgICAgICAgIDxBZGRDb250ZW50QnV0dG9uIHR5cGU9XCJ3b3JkLWJhbmtcIiB0YWI9e3RhYn0gYnJhbmNoPXticmFuY2h9IGNvdXJzZT17Y291cnNlfSAvPn1cclxuXHJcbiAgICAgICAgICB7dGFiLnRhYkNsYXNzICE9PSAnd29yZC1iYW5rLXRhYicgJiZcclxuICAgICAgICAgICAodGFiLnRhYkNsYXNzID09PSAnbWlzc2lvbi10YWInIHx8IHRhYi50YWJDbGFzcyA9PT0gJ3N1YmplY3QtdGFiJyB8fCBjb3Vyc2UudHlwZSA9PT0gJ3N0ZXAtY291cnNlJykgJiZcclxuICAgICAgICAgICAhY29udGVudHMuc29tZShjID0+IGMudHlwZSA9PT0gJ2xlYXJuaW5nLWdvYWxzJykgJiZcclxuXHJcbiAgICAgICAgICAgIC8vIFsgQWRkIExlYXJuaW5nIEdvYWxzIF0gYnV0dG9uXHJcbiAgICAgICAgICAgIDxBZGRDb250ZW50QnV0dG9uIHR5cGU9XCJsZWFybmluZy1nb2Fsc1wiIHRhYj17dGFifSBicmFuY2g9e2JyYW5jaH0gY291cnNlPXtjb3Vyc2V9IC8+XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgeyAvLyBbIEFkZCBUZXh0IF0gYnV0dG9uXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICA8QWRkQ29udGVudEJ1dHRvbiB0eXBlPVwicmljaC10ZXh0XCIgdGFiPXt0YWJ9IGJyYW5jaD17YnJhbmNofSBjb3Vyc2U9e2NvdXJzZX0gLz5cclxuXHJcbiAgICAgICAgICB7Y29udGVudHMuZmlsdGVyKGM9PiBjLnR5cGUgPT0gXCJyZXNvdXJjZS1saXN0XCIpLmxlbmd0aCA9PSAwICYmXHJcbiAgICAgICAgICAgICAvLyBbIEFkZCBSZXNvdXJjZSBdIGJ1dHRvblxyXG4gICAgICAgICAgICAgPEFkZENvbnRlbnRCdXR0b24gdHlwZT1cInJlc291cmNlLWxpc3RcIiB0YWI9e3RhYn0gYnJhbmNoPXticmFuY2h9IGNvdXJzZT17Y291cnNlfSAvPlxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHt0YWIudGFiQ2xhc3MgPT09ICdpbnRyby10YWInIHx8IHRhYi50YWJDbGFzcyA9PT0gJ3J1bi11cC10YWInICYmXHJcbiAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gWyBBZGQgRW1iZWRkZWQgSFRNTCBdIGJ1dHRvblxyXG4gICAgICAgICAgICA8QWRkQ29udGVudEJ1dHRvbiB0eXBlPVwiZW1iZWRkZWQtaHRtbFwiIHRhYj17dGFifSBicmFuY2g9e2JyYW5jaH0gY291cnNlPXtjb3Vyc2V9IC8+fVxyXG4gICAgICAgIDwvPlxyXG4gICAgICB9XHJcbiAgICA8L2Rpdj5cclxuICB9KVxyXG4pXHJcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IFdpdGhHcmFwaHMsIEtlZEJhY2tlbmRSZXBvLCBTdHJpcEdyYXBocyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IENvdXJzZUNvbnRlbnQsIENvdXJzZUluc3RhbmNlLCBDb3Vyc2VUYWIsIENvdXJzZUJsb2NrIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBpc0tlZFN0YWZmIH0gZnJvbSAnLi4vbG9naWMvaXMta2VkLXN0YWZmJztcclxuaW1wb3J0IHsgQ291cnNlQ29udGVudEJveCwgQ09VUlNFX0NPTlRFTlRfVFlQRVMgfSBmcm9tICcuL2NvdXJzZS1jb250ZW50cyc7XHJcbmltcG9ydCB7IEFsaWduSG9yaXpvbnRhbCB9IGZyb20gJy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9hbGlnbi1ob3Jpem9udGFsJztcclxuaW1wb3J0IHsgSG9yaXpvbnRhbEl0ZW0gfSBmcm9tICcuLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvaG9yaXpvbnRhbC1pdGVtJztcclxuaW1wb3J0IHsgTCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgUmVtb3ZlSXRlbSB9IGZyb20gJy4uLy4uL2NvdXJzZS1idWlsZGVyL3N1Yi1jb21wb25lbnRzL3JlbW92ZS1pdGVtJztcclxuaW1wb3J0IHsgRW1pdHRlciB9IGZyb20gJ2tlZGJhY2tlbmQvb2JzZXJ2YWJsZSc7XHJcbmltcG9ydCB7IExhenlDb250ZW50IH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2xhenktY29udGVudCc7XHJcbmltcG9ydCB7IHJlb3JkZXIgfSBmcm9tICcuLi9sb2dpYy9jaGFuZ2Utc29ydC1vcmRlcic7XHJcbmltcG9ydCB7IEZpZWxkTGltaXRzIH0gZnJvbSAnLi4vY29tbW9uL2ZpZWxkLWxpbWl0cyc7XHJcblxyXG5jb25zdCB7TUFYX0NIQVJTX0lOX0NPTlRFTlRTfSA9IEZpZWxkTGltaXRzO1xyXG5cclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgZWRpdE1vZGU6IGJvb2xlYW5cclxuICBjb250ZW50OiBXaXRoR3JhcGhzPENvdXJzZUNvbnRlbnQsIFwidGFza3NcIj5cclxuICBjb250ZW50czogV2l0aEdyYXBoczxDb3Vyc2VDb250ZW50LCBcInRhc2tzXCI+W11cclxuICBicmFuY2g6IEtlZEJhY2tlbmRSZXBvO1xyXG4gIGNvdXJzZTogV2l0aEdyYXBoczxDb3Vyc2VJbnN0YW5jZSwgXCJ0YWJzXCIgfCBcImJsb2Nrc1wiPjtcclxuICB0YWI6IFN0cmlwR3JhcGhzPENvdXJzZVRhYj47XHJcbiAgc2Nob29sOiBzdHJpbmc7XHJcbiAgZHJhZnRJZDogc3RyaW5nO1xyXG4gIGNvbnRlbnRPcmRlckluZGV4OiBudW1iZXI7XHJcbiAgYmxvY2s6IENvdXJzZUJsb2NrIHwgbnVsbDtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENvdXJzZVRhYkNvbnRlbnRCb3ggZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHM+IHtcclxuICBudW1DaGFyc09ic2VydmFibGUgPSBuZXcgRW1pdHRlcigwKTsgLy8gRGVkaWNhdGVkIHN0YXRlIGZvciBhIHN1Yi1wYXJ0IG9mIHRoZSBnZW5lcmF0ZWQgRE9NIChhdm9pZCBpbmZpbml0ZSBsb29wKVxyXG5cclxuICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIC8vbnVtQ2hhcnM6IDBcclxuICAgIH1cclxuICB9XHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3QgeyBlZGl0TW9kZSwgY29udGVudCwgYnJhbmNoLCBjb3Vyc2UsIHRhYiwgc2Nob29sLCBkcmFmdElkLCBjb250ZW50T3JkZXJJbmRleCwgY29udGVudHMsIGJsb2NrIH0gPSB0aGlzLnByb3BzO1xyXG4gICAgY29uc3Qga2VkU3RhZmYgPSBpc0tlZFN0YWZmKCk7XHJcbiAgICAvL2NvbnN0IHsgbnVtQ2hhcnMgfSA9IHRoaXMuc3RhdGU7XHJcbiAgICBjb25zdCB7IG51bUNoYXJzT2JzZXJ2YWJsZSB9ID0gdGhpcztcclxuICAgIHJldHVybiAhZWRpdE1vZGUgfHwgKGNvbnRlbnQubG9ja2VkICYmICFrZWRTdGFmZikgP1xyXG4gICAgICAvL1xyXG4gICAgICAvLyBOb3QgZWRpdCBtb2RlOlxyXG4gICAgICAvL1xyXG4gICAgICA8Q291cnNlQ29udGVudEJveFxyXG4gICAgICAgIGtleT17Y29udGVudC5pZH1cclxuICAgICAgICByZXBvPXticmFuY2h9XHJcbiAgICAgICAgY29udGVudD17Y29udGVudH1cclxuICAgICAgICBzaWJsaW5nQ29udGVudHM9e2NvbnRlbnRzfVxyXG4gICAgICAgIGNvdXJzZT17Y291cnNlfVxyXG4gICAgICAgIGVkaXRNb2RlPXtlZGl0TW9kZX1cclxuICAgICAgICBjb3Vyc2VUYWI9e3RhYn1cclxuICAgICAgICBzY2hvb2w9e3NjaG9vbH1cclxuICAgICAgICBkcmFmdElkPXtkcmFmdElkfVxyXG4gICAgICAgIGJsb2NrPXtibG9ja30gLz4gOlxyXG4gICAgICAvL1xyXG4gICAgICAvLyBFZGl0IG1vZGU6XHJcbiAgICAgIC8vXHJcbiAgICAgIDxkaXYga2V5PXtjb250ZW50LmlkfSBjbGFzc05hbWU9e1tcImNvdXJzZS1jb250ZW50LWJveFwiLCBjb250ZW50LnR5cGUgIT09ICdsZWFybmluZy1nb2FscycgJiYgXCJrZWRfYm94ZWRcIl0uZmlsdGVyKHggPT4gISF4KS5qb2luKCcgJyl9IHN0eWxlPXt7IHBvc2l0aW9uOiAncmVsYXRpdmUnIH19PlxyXG4gICAgICAgIDxBbGlnbkhvcml6b250YWw+XHJcbiAgICAgICAgICA8SG9yaXpvbnRhbEl0ZW0+XHJcbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImJveC1taW5pLWxhYmVsXCI+e0NPVVJTRV9DT05URU5UX1RZUEVTW2NvbnRlbnQudHlwZV19PC9wPlxyXG4gICAgICAgICAgPC9Ib3Jpem9udGFsSXRlbT5cclxuICAgICAgICAgIDxIb3Jpem9udGFsSXRlbT5cclxuICAgICAgICAgICAge2tlZFN0YWZmID9cclxuICAgICAgICAgICAgICA8PlxyXG4gICAgICAgICAgICAgICAgJm5ic3A7XHJcbiAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgdHlwZT1cImNoZWNrYm94XCIgY2hlY2tlZD17IWNvbnRlbnQubG9ja2VkfVxyXG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17ZXYgPT4gYnJhbmNoLmNvdXJzZUNvbnRlbnRzLnVwZGF0ZShjb250ZW50LCB7IGxvY2tlZDogIWV2LnRhcmdldC5jaGVja2VkIH0pfSAvPlxyXG4gICAgICAgICAgICAgICAge0xgVGlsbMOldCByZWRpZ2VyaW5nYH1cclxuICAgICAgICAgICAgICAgIHshY29udGVudC5sb2NrZWQgPyA8PlxyXG4gICAgICAgICAgICAgICAgICAmbmJzcDtcclxuICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZT1cImNoZWNrYm94XCIgY2hlY2tlZD17IWNvbnRlbnQubG9ja0RlbGV0ZX1cclxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17ZXYgPT4gYnJhbmNoLmNvdXJzZUNvbnRlbnRzLnVwZGF0ZShjb250ZW50LCB7IGxvY2tEZWxldGU6ICFldi50YXJnZXQuY2hlY2tlZCB9KX0gLz5cclxuICAgICAgICAgICAgICAgICAge0xgVGlsbMOldCBkw7ZsamEgcnV0YW5gfVxyXG4gICAgICAgICAgICAgICAgPC8+IDogbnVsbH1cclxuICAgICAgICAgICAgICA8Lz4gOiBudWxsfVxyXG4gICAgICAgICAgPC9Ib3Jpem9udGFsSXRlbT5cclxuICAgICAgICA8L0FsaWduSG9yaXpvbnRhbD5cclxuICAgICAgICA8Q291cnNlQ29udGVudEJveFxyXG4gICAgICAgICAgcmVwbz17YnJhbmNofVxyXG4gICAgICAgICAgY29udGVudD17Y29udGVudH1cclxuICAgICAgICAgIHNpYmxpbmdDb250ZW50cz17Y29udGVudHN9XHJcbiAgICAgICAgICBjb3Vyc2U9e2NvdXJzZX1cclxuICAgICAgICAgIGVkaXRNb2RlPXt0cnVlfVxyXG4gICAgICAgICAgc2Nob29sPXtzY2hvb2x9XHJcbiAgICAgICAgICBkcmFmdElkPXtkcmFmdElkfVxyXG4gICAgICAgICAgY291cnNlVGFiPXt0YWJ9XHJcbiAgICAgICAgICBtYXhDaGFycz17TUFYX0NIQVJTX0lOX0NPTlRFTlRTfVxyXG4gICAgICAgICAgcmVwb3J0TnVtQ2hhcnM9e251bUNoYXJzID0+IHtcclxuICAgICAgICAgICAgLy8gQXZvaWQgc2V0dGluZyBzdGF0ZSBiZWNhdXNlIGl0IHR1cm5zIG91dCB0byBiZSBpbmZpbml0ZSBsb29wLlxyXG4gICAgICAgICAgICAvLyAoc2V0U3RhdGUoKSBsZWFkcyB0byByZS1yZW5kZXIgb2YgdGhpcyB3aG9sZSBjb21wb25lbnQsIGxlYWRpbmcgdG9cclxuICAgICAgICAgICAgLy8gcmUtcmVuZGVyIG9mIENvdXJzZUNvbnRlbnRCb3gsIHRoYXQgY2FsbHMgcmVwb3J0TnVtQ2hhcnMgZXRjLi4uKVxyXG4gICAgICAgICAgICAvLyBJbnN0ZWFkIHdlIGNvbW11bmljYXRlIHRoaXMgcGFydGljdWxhciBzdGF0ZSB0byBhIGRlZGljYXRlZCBPYnNlcnZhYmxlXHJcbiAgICAgICAgICAgIC8vIHRoYXQgd2lsbCBvbmx5IHVwZGF0ZSB0aGUgcGFydGljdWxhciBjb21wb25lbnQgdGhhdCBpcyBhZmZlY3RlZCBieSBpdC5cclxuICAgICAgICAgICAgbnVtQ2hhcnNPYnNlcnZhYmxlLmRpc3BhdGNoKG51bUNoYXJzKTtcclxuICAgICAgICAgICAgLy90aGlzLnNldFN0YXRlKHsgbnVtQ2hhcnMgfSk7XHJcbiAgICAgICAgICB9fVxyXG4gICAgICAgICAgYmxvY2s9e2Jsb2NrfVxyXG4gICAgICAgIC8+XHJcbiAgICAgICAgPGRpdiBzdHlsZT17eyBwb3NpdGlvbjogJ2Fic29sdXRlJywgdG9wOiAwLCByaWdodDogMCB9fT5cclxuICAgICAgICAgIHsoa2VkU3RhZmYgfHwgIWNvbnRlbnQubG9ja2VkKSAmJiBjb250ZW50T3JkZXJJbmRleCA+IDAgJiYgPHNwYW4+XHJcbiAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLWFycm93LWNpcmNsZS11cCBzZWxlY3RhYmxlXCJcclxuICAgICAgICAgICAgICBhcmlhLWhpZGRlbj1cInRydWVcIlxyXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld09yZGVyID0gcmVvcmRlcihjb250ZW50cywgY29udGVudC5pZCwgY29udGVudHNbY29udGVudE9yZGVySW5kZXggLSAxXS5pZCwgXCJiZWZvcmVcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAobmV3T3JkZXIpIHtcclxuICAgICAgICAgICAgICAgICAgYnJhbmNoLmNvdXJzZUNvbnRlbnRzLnVwZGF0ZShjb250ZW50LCB7IG9yZGVyOiBuZXdPcmRlciB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9fSAvPiA8L3NwYW4+fVxyXG4gICAgICAgICAgeyhrZWRTdGFmZiB8fCAhY29udGVudC5sb2NrZWQpICYmIGNvbnRlbnRPcmRlckluZGV4IDwgY29udGVudHMubGVuZ3RoIC0gMSAmJiA8c3Bhbj5cclxuICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtYXJyb3ctY2lyY2xlLWRvd24gc2VsZWN0YWJsZVwiXHJcbiAgICAgICAgICAgICAgYXJpYS1oaWRkZW49XCJ0cnVlXCJcclxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdPcmRlciA9IHJlb3JkZXIoY29udGVudHMsIGNvbnRlbnQuaWQsIGNvbnRlbnRzW2NvbnRlbnRPcmRlckluZGV4ICsgMV0uaWQsIFwiYWZ0ZXJcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAobmV3T3JkZXIpIHtcclxuICAgICAgICAgICAgICAgICAgYnJhbmNoLmNvdXJzZUNvbnRlbnRzLnVwZGF0ZShjb250ZW50LCB7IG9yZGVyOiBuZXdPcmRlciB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9fSAvPiA8L3NwYW4+fVxyXG4gICAgICAgICAge2tlZFN0YWZmIHx8ICFjb250ZW50LmxvY2tEZWxldGUgPyA8UmVtb3ZlSXRlbVxyXG4gICAgICAgICAgICB0aXRsZT17c2Nob29sID09PSAnc3RhbmRhcmQnID8gTGBUYSBib3J0IGlubmVow6VsbHNydXRhbmAgOiBMYETDtmxqIGlubmVow6VsbHNydXRhbmB9XHJcbiAgICAgICAgICAgIHN0eWxlPXt7IGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snIH19XHJcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGNvbmZpcm0oTGBUYSBib3J0IGlubmVow6VsbD9gKSAmJiBicmFuY2guY291cnNlVGFicy5yZW1vdmVSZWxhdGVkKHRhYi5pZCwgXCJjb250ZW50c1wiLCBjb250ZW50KX0gLz5cclxuICAgICAgICAgICAgOiBudWxsfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIHtjb250ZW50LnR5cGUgPT09ICdyaWNoLXRleHQnID8gPExhenlDb250ZW50PntcclxuICAgICAgICAgIG51bUNoYXJzT2JzZXJ2YWJsZS5tYXAobnVtQ2hhcnMgPT5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e1tcImNoYXItY291bnRlci1ib3R0b21cIl0uY29uY2F0KG51bUNoYXJzID49IE1BWF9DSEFSU19JTl9DT05URU5UUyA/IFwib3ZlcmZsb3dlZFwiIDogW10pLmpvaW4oJyAnKX0+XHJcbiAgICAgICAgICAgICAge0xgVGV4dGVuIGlubmVow6VsbGVyICR7bnVtQ2hhcnN9IGF2IG1heCAke01BWF9DSEFSU19JTl9DT05URU5UU30gdGlsbMOldG5hIHRlY2tlbmB9XHJcbiAgICAgICAgICAgIDwvZGl2PilcclxuICAgICAgICAgIH08L0xhenlDb250ZW50PiA6XHJcbiAgICAgICAgICB1bmRlZmluZWR9XHJcbiAgICAgIDwvZGl2PlxyXG5cclxuICB9XHJcbn0iLCJpbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBDb3Vyc2VJbnN0YW5jZSB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuXHJcbmV4cG9ydCBjb25zdCBDb3Vyc2VUYWJDbGFzc2VzID0ge1xyXG4gIFwiaW50cm8tdGFiXCI6IExgSW50cm9kdWt0aW9uc2ZsaWtgLFxyXG4gIFwicnVuLXVwLXRhYlwiOiBMYFVwcHRha3RzZmxpa2AsXHJcbiAgXCJzdWJqZWN0LXRhYlwiOiBMYMOEbW5lc2ZsaWtgLFxyXG4gIFwibWlzc2lvbi10YWJcIjogTGBVcHBkcmFnc2ZsaWtgLFxyXG4gIFwiY29udGVudC10YWJcIjogTGBHZW5lcmVsbCBmbGlrYCxcclxuICBcInRlYWNoZXItdGFiXCI6IExgTMOkcmFyc2lkYWAsXHJcbiAgXCJ3b3JkLWJhbmstdGFiXCI6IExgT3JkYmFua2BcclxufVxyXG5cclxudHlwZSBUYWJUeXBlT3B0SW4gPSB7W1RhYlR5cGUgaW4ga2V5b2YgdHlwZW9mIENvdXJzZVRhYkNsYXNzZXNdPzogYm9vbGVhbn07XHJcblxyXG5leHBvcnQgY29uc3QgVGFiVHlwZXNQZXJDb3Vyc2VUeXBlOiB7W0NvdXJzZVR5cGUgaW4gQ291cnNlSW5zdGFuY2VbXCJ0eXBlXCJdXTogQXJyYXk8a2V5b2YgdHlwZW9mIENvdXJzZVRhYkNsYXNzZXM+fSA9IHtcclxuICBcInN0ZXAtY291cnNlXCI6IFtcclxuICAgIFwiY29udGVudC10YWJcIixcclxuICAgIFwiaW50cm8tdGFiXCIsXHJcbiAgICBcInRlYWNoZXItdGFiXCIsXHJcbiAgICBcIndvcmQtYmFuay10YWJcIlxyXG4gIF0sXHJcbiAgXCJ0aGVtZS1jb3Vyc2VcIjogW1xyXG4gICAgXCJjb250ZW50LXRhYlwiLFxyXG4gICAgXCJydW4tdXAtdGFiXCIsXHJcbiAgICBcInN1YmplY3QtdGFiXCIsXHJcbiAgICBcIm1pc3Npb24tdGFiXCIsXHJcbiAgICBcInRlYWNoZXItdGFiXCJcclxuICBdXHJcbn07XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgZGIsIENvdXJzZUluc3RhbmNlcyB9IGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvZGInO1xyXG5pbXBvcnQgeyBCYW5uZXJQcm9wcywgTGF6eUJhbm5lciB9IGZyb20gJy4uL2NvbW1vbi9iYW5uZXInO1xyXG5pbXBvcnQgeyBFbWl0dGVyLCBDb2xsZWN0aW9uLCBPYnNlcnZhYmxlLCBWYWx1ZSB9IGZyb20gJ2tlZGJhY2tlbmQvb2JzZXJ2YWJsZSc7XHJcbmltcG9ydCB7IEwsIHNob3dFcnJvciwgY29tcGFyZVByb3AsIGNvbXBhcmVQcm9wcyB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IGNmZyBmcm9tICcuLi8uLi8uLi9nbG9iYWxzL0tFRC5jZmcnO1xyXG5pbXBvcnQgeyBpc1RlYWNoZXJBdFNjaG9vbCwgcHJlc2VydmVJbXBlcnNvbmF0aW9uUXVlcnkgfSBmcm9tICcuLi8uLi8uLi9hY2Nlc3MtY29udHJvbCc7XHJcbmltcG9ydCB7IEFkZFRhYkJ1dHRvbiB9IGZyb20gJy4vYWRkLXRhYi1idXR0b24nO1xyXG5pbXBvcnQgeyB3aXRoUm91dGVyLCBSb3V0ZUNvbXBvbmVudFByb3BzIH0gZnJvbSAncmVhY3Qtcm91dGVyJztcclxuaW1wb3J0IHsgQ291cnNlQXJlYSB9IGZyb20gJy4vY291cnNlLWFyZWEnO1xyXG5pbXBvcnQgeyBMaW5rIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XHJcbmltcG9ydCB7IFRhc2tFZGl0b3IgfSBmcm9tICcuL3Rhc2svdGFzay1lZGl0b3InO1xyXG5pbXBvcnQgeyBDbGlja2FibGVTY2hvb2xEaXYgfSBmcm9tICcuL2NsaWNrYWJsZS1zY2hvb2wtZGl2JztcclxuaW1wb3J0IHsgaXNFbXBsb3llZSB9IGZyb20gJy4uL2xvZ2ljL2lzLWVtcGxveWVlJztcclxuaW1wb3J0IHsgVGFza1ZpZXdlclBhZ2UgfSBmcm9tICcuL3Rhc2svdmlld2VyL3Rhc2stdmlld2VyLXBhZ2UnO1xyXG5pbXBvcnQgeyBpc0tlZFN0YWZmIH0gZnJvbSAnLi4vbG9naWMvaXMta2VkLXN0YWZmJztcclxuaW1wb3J0IHsgQ291cnNlVGFiLCBUaGVtZUNvdXJzZVRhYiwgVGhlbWVDb3Vyc2VJbnN0YW5jZSwgQ291cnNlSW5zdGFuY2UsIENvdXJzZUJsb2NrLCBTdGVwQ291cnNlVGFiLCBTY2hvb2wgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRSZXBvLCBXaXRoR3JhcGhzLCBTdHJpcEdyYXBocyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IExhenlDb250ZW50IH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2xhenktY29udGVudCc7XHJcbmltcG9ydCB7IHJlb3JkZXIgfSBmcm9tICcuLi9sb2dpYy9jaGFuZ2Utc29ydC1vcmRlcic7XHJcbmltcG9ydCB7IEluamVjdGVkSW50bFByb3BzLCBpbmplY3RJbnRsIH0gZnJvbSAncmVhY3QtaW50bCc7XHJcbmltcG9ydCB7IHNldHVwSW50bCB9IGZyb20gJy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9TZXR1cExhbmd1YWdlSW50bCc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMgZXh0ZW5kcyBSb3V0ZUNvbXBvbmVudFByb3BzPGFueT4ge1xyXG4gIHNjaG9vbDogc3RyaW5nO1xyXG4gIGNvdXJzZUlkOiBzdHJpbmc7XHJcbiAgYWN0aXZlVGFiPzogc3RyaW5nO1xyXG4gIGRyYWZ0SWQ/OiBzdHJpbmc7XHJcbiAgZWRpdE1vZGU/OiBib29sZWFuO1xyXG4gIGNvbnRlbnRJZD86IHN0cmluZztcclxuICB0YXNrSWQ/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBDb3Vyc2VWaWV3ZXJQYWdlID0gd2l0aFJvdXRlcigoKHsgc2Nob29sLCBjb3Vyc2VJZCwgYWN0aXZlVGFiLCBkcmFmdElkLCBlZGl0TW9kZSwgaGlzdG9yeSwgY29udGVudElkLCB0YXNrSWQgfTogUHJvcHMgKSA9PiB7XHJcbiAgY29uc3QgcmVwbyA9IGVkaXRNb2RlID9cclxuICAgIGRiIDogLy8gSW4gZWRpdCBtb2RlLCBkbyBub3Qgb3B0aW1pemUgY2FjaGUsIGFzIGl0IHByb2hpYml0cyBjb2xsYWJvcmF0aW9uXHJcbiAgICBkYi5vcHRpbWl6ZUNhY2hlKCk7XHJcblxyXG4gIGNvbnN0IHNjaG9vbE9ic2VydmFibGUgPSByZXBvLnNjaG9vbHMubmFtZShzY2hvb2wpLnNpbmdsZSgpO1xyXG5cclxuICBjb25zdCBicmFuY2hPYnNlcnZhYmxlID0gZHJhZnRJZCA/IC8vIEluIGVkaXQgbW9kZSwgZHJhZnRJZCBpcyBkZWZpbmVkLlxyXG4gICAgbmV3IEVtaXR0ZXIocmVwby5icmFuY2goZHJhZnRJZCkpIDpcclxuICAgIHNjaG9vbE9ic2VydmFibGUubWFwKHNjaG9vbCA9PiByZXBvLmJyYW5jaChzY2hvb2wub2ZmaWNpYWxCcmFuY2hJZCkpO1xyXG5cclxuICBjb25zdCBjb3Vyc2VPYnNlcnZhYmxlID0gYnJhbmNoT2JzZXJ2YWJsZS5zd2l0Y2hNYXAoYnJhbmNoID0+XHJcbiAgICBicmFuY2guY291cnNlSW5zdGFuY2VzLmluY2x1ZGUoXCJibG9ja3NcIiwgXCJ0YWJzXCIpLmlkKGNvdXJzZUlkKSk7XHJcblxyXG4gIGNvbnN0IGludGVybWVkaWF0ZU9ic2VydmFibGVVbnNvcnRlZDogVmFsdWU8e1xyXG4gICAgY291cnNlOiBXaXRoR3JhcGhzPENvdXJzZUluc3RhbmNlLCBcImJsb2Nrc1wiIHwgXCJ0YWJzXCI+XHJcbiAgICB0YWJzOiBDb3Vyc2VUYWJbXVxyXG4gICAgYnJhbmNoOiBLZWRCYWNrZW5kUmVwbyxcclxuICAgIGJsb2NrOiBDb3Vyc2VCbG9jayB8IG51bGwsXHJcbiAgICBzY2hvb2xFbnRpdHk6IFNjaG9vbFxyXG4gIH0+ID0gY291cnNlT2JzZXJ2YWJsZS5jb21iaW5lTGF0ZXN0KHNjaG9vbE9ic2VydmFibGUpXHJcbiAgICAuc3dpdGNoTWFwKChbY291cnNlLCBzY2hvb2xFbnRpdHldKSA9PiB7XHJcbiAgICAgIGNvbnN0IGJyYW5jaCA9IGRyYWZ0SWQgP1xyXG4gICAgICAgIHJlcG8uYnJhbmNoKGRyYWZ0SWQpIDpcclxuICAgICAgICByZXBvLmJyYW5jaChzY2hvb2xFbnRpdHkub2ZmaWNpYWxCcmFuY2hJZCk7XHJcblxyXG4gICAgICBpZiAoY291cnNlLnR5cGUgPT09ICd0aGVtZS1jb3Vyc2UnKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBFbWl0dGVyKHtjb3Vyc2UsIHRhYnM6IGNvdXJzZS50YWJzLCBicmFuY2gsIGJsb2NrOiBudWxsLCBzY2hvb2xFbnRpdHl9KTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoYWN0aXZlVGFiICYmIGFjdGl2ZVRhYiAhPT0gJyQnKVxyXG4gICAgICAgIHJldHVybiBicmFuY2guY291cnNlQmxvY2tzLmhhc0VkZ2VzVG8oW2FjdGl2ZVRhYl0pLmluY2x1ZGUoXCJ0YWJzXCIpLnRvVmFsdWUoKVxyXG4gICAgICAgICAgLm1hcCgoW2Jsb2NrXSkgPT4gKHtcclxuICAgICAgICAgICAgY291cnNlLFxyXG4gICAgICAgICAgICB0YWJzOiBibG9jay50YWJzLFxyXG4gICAgICAgICAgICBicmFuY2gsXHJcbiAgICAgICAgICAgIGJsb2NrOiBibG9jayB8fCBjb3Vyc2UuYmxvY2tzWzBdLFxyXG4gICAgICAgICAgICBzY2hvb2xFbnRpdHlcclxuICAgICAgICAgIH0pKTtcclxuICAgICAgaWYgKGNvdXJzZS5ibG9ja3MubGVuZ3RoID4gMClcclxuICAgICAgICByZXR1cm4gYnJhbmNoLmNvdXJzZUJsb2Nrcy5pbmNsdWRlKFwidGFic1wiKS5pZChjb3Vyc2UuYmxvY2tzWzBdLmlkKVxyXG4gICAgICAgICAgLm1hcChibG9jayA9PiAoe1xyXG4gICAgICAgICAgICBjb3Vyc2UsXHJcbiAgICAgICAgICAgIHRhYnM6IGJsb2NrLnRhYnMsXHJcbiAgICAgICAgICAgIGJyYW5jaCxcclxuICAgICAgICAgICAgYmxvY2ssXHJcbiAgICAgICAgICAgIHNjaG9vbEVudGl0eVxyXG4gICAgICAgICAgfSkpO1xyXG4gICAgICByZXR1cm4gbmV3IEVtaXR0ZXIoe2NvdXJzZSwgdGFiczogW10sIGJyYW5jaCwgYmxvY2s6IG51bGwsIHNjaG9vbEVudGl0eX0pO1xyXG4gICAgfSk7XHJcblxyXG4gIGNvbnN0IGludGVybWVkaWF0ZU9ic2VydmFibGUgPSBpbnRlcm1lZGlhdGVPYnNlcnZhYmxlVW5zb3J0ZWQubWFwKHZhbHMgPT4gKHtcclxuICAgIC4uLnZhbHMsXHJcbiAgICB0YWJzOiB2YWxzLnRhYnMgJiYgdmFscy50YWJzLnNvcnQoY29tcGFyZVByb3BzKFtcInN0ZXBOb1wiLCBcIm9yZGVyXCJdKSlcclxuICB9KSk7XHJcblxyXG4gIGNvbnN0IGJhbm5lclByb3BzT2JzZXJ2YWJsZSA9IGludGVybWVkaWF0ZU9ic2VydmFibGVcclxuICAgIC5tYXA8QmFubmVyUHJvcHM+KCh7Y291cnNlLCB0YWJzLCBicmFuY2gsIGJsb2NrLCBzY2hvb2xFbnRpdHl9KSA9PiB7XHJcbiAgICAgIHJldHVybiBnZXRDb3Vyc2VCYW5uZXJQcm9wcyhcclxuICAgICAgICB0YWJzLFxyXG4gICAgICAgIGVkaXRNb2RlLFxyXG4gICAgICAgIHNjaG9vbCxcclxuICAgICAgICBzY2hvb2xFbnRpdHksXHJcbiAgICAgICAgZHJhZnRJZCxcclxuICAgICAgICBjb3Vyc2UgYXMgQ291cnNlSW5zdGFuY2UsXHJcbiAgICAgICAgYnJhbmNoLFxyXG4gICAgICAgIGFjdGl2ZVRhYixcclxuICAgICAgICBibG9jaylcclxuICAgIH0pO1xyXG5cclxuICByZXR1cm4gPD5cclxuICAgIDxMYXp5QmFubmVyXHJcbiAgICAgIGxhenlQcm9wcz17YmFubmVyUHJvcHNPYnNlcnZhYmxlfVxyXG4gICAgLz5cclxuICAgICAge1xyXG4gICAgICAgIHRhc2tJZCA/IGVkaXRNb2RlID9cclxuICAgICAgICAgIDxMYXp5Q29udGVudD5cclxuICAgICAgICAgICAge2ludGVybWVkaWF0ZU9ic2VydmFibGUubWFwKCh7YnJhbmNoLCBibG9jaywgY291cnNlLCB0YWJzfSkgPT4gPFRhc2tFZGl0b3JcclxuICAgICAgICAgICAgICBzY2hvb2w9e3NjaG9vbH1cclxuICAgICAgICAgICAgICBjb3Vyc2U9e2NvdXJzZX1cclxuICAgICAgICAgICAgICBkcmFmdElkPXtkcmFmdElkfVxyXG4gICAgICAgICAgICAgIGJyYW5jaD17YnJhbmNofVxyXG4gICAgICAgICAgICAgIGFjdGl2ZVRhYj17YWN0aXZlVGFifVxyXG4gICAgICAgICAgICAgIGNvbnRlbnRJZD17Y29udGVudElkfVxyXG4gICAgICAgICAgICAgIHRhc2tJZD17dGFza0lkfVxyXG4gICAgICAgICAgICAgIGJsb2NrSWQ9e2Jsb2NrICYmIGJsb2NrLmlkfVxyXG4gICAgICAgICAgICAvPil9XHJcbiAgICAgICAgICA8L0xhenlDb250ZW50PiA6XHJcbiAgICAgICAgICA8VGFza1ZpZXdlclBhZ2VcclxuICAgICAgICAgICAgc2Nob29sPXtzY2hvb2x9XHJcbiAgICAgICAgICAgIGNvdXJzZUlkPXtjb3Vyc2VJZH1cclxuICAgICAgICAgICAgbGF6eVJlcG89e2JyYW5jaE9ic2VydmFibGV9XHJcbiAgICAgICAgICAgIGFjdGl2ZVRhYj17YWN0aXZlVGFifVxyXG4gICAgICAgICAgICB0YXNrSWQ9e3Rhc2tJZH1cclxuICAgICAgICAgICAgY29udGVudElkPXtjb250ZW50SWR9XHJcbiAgICAgICAgICAgIGRyYWZ0SWQ9e2RyYWZ0SWR9XHJcbiAgICAgICAgLz4gOlxyXG4gICAgICAgIDxMYXp5Q29udGVudD5cclxuICAgICAgICAgIHtpbnRlcm1lZGlhdGVPYnNlcnZhYmxlLm1hcCgoe2JyYW5jaCwgYmxvY2ssIGNvdXJzZSwgdGFic30pID0+IFxyXG4gICAgICAgICAgICA8Q291cnNlQXJlYVxyXG4gICAgICAgICAgICAgIHNjaG9vbD17c2Nob29sfVxyXG4gICAgICAgICAgICAgIGNvdXJzZUlkPXtjb3Vyc2VJZH1cclxuICAgICAgICAgICAgICBkcmFmdElkPXtkcmFmdElkfVxyXG4gICAgICAgICAgICAgIGNvdXJzZT17Y291cnNlfVxyXG4gICAgICAgICAgICAgIGJyYW5jaD17YnJhbmNofVxyXG4gICAgICAgICAgICAgIHRhYnM9e3RhYnN9XHJcbiAgICAgICAgICAgICAgYWN0aXZlVGFiPXthY3RpdmVUYWJ9XHJcbiAgICAgICAgICAgICAgZWRpdE1vZGU9e2VkaXRNb2RlfVxyXG4gICAgICAgICAgICAgIGJsb2NrPXtibG9ja31cclxuICAgICAgICAgIC8+KX1cclxuICAgICAgICA8L0xhenlDb250ZW50PlxyXG4gICAgICB9XHJcbiAgPC8+XHJcbn0pKTtcclxuXHJcbmZ1bmN0aW9uIGdldENvdXJzZUJhbm5lclByb3BzKFxyXG4gIHRhYnM6IENvdXJzZVRhYltdLFxyXG4gIGVkaXRNb2RlOiBib29sZWFuLFxyXG4gIHNjaG9vbDogc3RyaW5nLFxyXG4gIHNjaG9vbEVudGl0eTogU2Nob29sLFxyXG4gIGRyYWZ0SWQ6IHN0cmluZyxcclxuICBjb3Vyc2U6IENvdXJzZUluc3RhbmNlLFxyXG4gIGJyYW5jaDogS2VkQmFja2VuZFJlcG8sXHJcbiAgYWN0aXZlVGFiOiBzdHJpbmcsXHJcbiAgYmxvY2s/OiBDb3Vyc2VCbG9jaykgOiBCYW5uZXJQcm9wc1xyXG57XHJcbiAgY29uc3Qga2VkU3RhZmYgPSBpc0tlZFN0YWZmKCk7XHJcbiAgY29uc3QgY291cnNlSWQgPSBjb3Vyc2UuaWQ7XHJcbiAgY29uc3QgYWN0aXZlVGFiT2JqID0gdGFicy5maWx0ZXIodGFiID0+IHRhYi5pZCA9PT0gYWN0aXZlVGFiKVswXSB8fCB0YWJzWzBdO1xyXG4gIGlmIChjb3Vyc2UudHlwZSA9PT0gJ3N0ZXAtY291cnNlJyAmJiBhY3RpdmVUYWJPYmogJiYgYWN0aXZlVGFiT2JqLnR5cGUgPT09ICdzdGVwLWNvdXJzZS10YWInKSB7XHJcbiAgICB0YWJzID0gdGFicy5maWx0ZXIodGFiID0+IHRhYi50eXBlID09PSAnc3RlcC1jb3Vyc2UtdGFiJyAmJiB0YWIuc3RlcE5vID09PSBhY3RpdmVUYWJPYmouc3RlcE5vKTtcclxuICB9XHJcbiAgY29uc3QgYmFubmVyVGFicyA9IChpc0VtcGxveWVlKCkgPyB0YWJzIDogdGFicy5maWx0ZXIodGFiID0+IHRhYi50YWJDbGFzcyAhPT0gJ3RlYWNoZXItdGFiJykpXHJcbiAgICAubWFwPEJhbm5lclByb3BzW1widGFic1wiXVtudW1iZXJdPih0YWIgPT4gKHtcclxuICAgICAga2V5OiB0YWIuaWQsXHJcbiAgICAgIG5hbWU6IHRhYi50YWJUaXRsZSwgLy8gVE9ETzogUmVwbGFjZSB3aXRoIHRhYi5uYW1lIVxyXG4gICAgICBkcmFnZ2FibGU6IHRydWUsXHJcbiAgICAgIGxpbms6IGVkaXRNb2RlID9cclxuICAgICAgICBgLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlSWR9L3RhYnMvJHt0YWIuaWR9JHtkcmFmdElkID8gYC9kcmFmdHMvJHtkcmFmdElkfWAgOiAnJ30vZWRpdGAgOlxyXG4gICAgICAgIGAvJHtzY2hvb2x9L2NvdXJzZXMvJHtjb3Vyc2VJZH0vdGFicy8ke3RhYi5pZH0ke2RyYWZ0SWQgPyBgL2RyYWZ0cy8ke2RyYWZ0SWR9YCA6ICcnfWBcclxuICAgIH0pKTtcclxuICBjb25zdCBidXR0b25zOiBKU1guRWxlbWVudFtdID0gW107XHJcbiAgaWYgKGVkaXRNb2RlICYmIChrZWRTdGFmZiB8fCBjb3Vyc2UuYWxsb3dBZGRUYWJzKSkge1xyXG4gICAgaWYgKGNvdXJzZS50eXBlID09PSAndGhlbWUtY291cnNlJykge1xyXG4gICAgICBidXR0b25zLnB1c2goPEFkZFRhYkJ1dHRvblxyXG4gICAgICAgICAgdHlwZT1cInRoZW1lLWNvdXJzZS10YWJcIlxyXG4gICAgICAgICAga2V5PVwiJGFkZFRhYlwiIHNjaG9vbD17c2Nob29sfSBjb3Vyc2U9e2NvdXJzZX0gYnJhbmNoPXticmFuY2h9IGRyYWZ0SWQ9e2RyYWZ0SWR9IC8+KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IHN0ZXBObyA9IGFjdGl2ZVRhYk9iaiA/XHJcbiAgICAgICAgKGFjdGl2ZVRhYk9iaiBhcyBTdGVwQ291cnNlVGFiKS5zdGVwTm8gOlxyXG4gICAgICAgIGJsb2NrLnN0ZXBOdW1iZXJzWzBdIHx8IDE7XHJcbiAgICAgIGJ1dHRvbnMucHVzaCg8QWRkVGFiQnV0dG9uXHJcbiAgICAgICAgdHlwZT1cInN0ZXAtY291cnNlLXRhYlwiXHJcbiAgICAgICAga2V5PVwiJGFkZFRhYlwiXHJcbiAgICAgICAgc2Nob29sPXtzY2hvb2x9IGNvdXJzZT17Y291cnNlfSBicmFuY2g9e2JyYW5jaH0gZHJhZnRJZD17ZHJhZnRJZH0gYmxvY2s9e2Jsb2NrfSBzdGVwTm89e3N0ZXBOb31cclxuICAgICAgLz4pO1xyXG4gICAgfVxyXG4gIH1cclxuICBpZiAoa2VkU3RhZmYpIHtcclxuICAgIC8vIFJlbW92ZSB0aGUgXCJyb2xlXCIgYXR0cmlidXRlIGZyb20gcXVlcnksIGFzIHdlIHdhbnQgdG8gc3RvcCBpbXBlcnNvbmF0aW5nIGFuIEVtcGxveWVlIHdoZW4gdXNpbmcgdGhlIGFkbWluIGludGVyZmFjZVxyXG4gICAgYnV0dG9ucy5wdXNoKDxhXHJcbiAgICAgIGhyZWY9e3ByZXNlcnZlSW1wZXJzb25hdGlvblF1ZXJ5KGNmZy5LRURfU1VCSkVDVF9QTEFOTkVSX0FETUlOX1VSTCwge3JvbGU6IHVuZGVmaW5lZH0pICtcclxuICAgICAgICBgIy9hZG1pbi9jb3Vyc2VzLyR7Y291cnNlSWR9L3NldHRpbmdzYH1cclxuICAgICAga2V5PVwiJHNldHRpbmdzXCJcclxuICAgICAgdGl0bGU9e0xgSW5zdMOkbGxuaW5nYXJgfVxyXG4gICAgPlxyXG4gICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1jb2dcIiBhcmlhLWhpZGRlbj17dHJ1ZX0gLz4mbmJzcDtcclxuICAgIDwvYT4pO1xyXG4gIH1cclxuICBjb25zdCBiYW5uZXJQcm9wczogQmFubmVyUHJvcHMgPSB7XHJcbiAgICB0aXRsZTogY291cnNlLm5hbWUsXHJcbiAgICBiYWNrZ3JvdW5kSW1hZ2U6IG51bGwsXHJcbiAgICB0YWJzOiBiYW5uZXJUYWJzLFxyXG4gICAgY29ybmVyQm94OiA8Q2xpY2thYmxlU2Nob29sRGl2IHNjaG9vbD17c2Nob29sfSBkcmFmdElkPXtkcmFmdElkfSBkaXNwbGF5TmFtZT17c2Nob29sRW50aXR5LmRpc3BsYXlOYW1lIHx8IHNjaG9vbH0gLz4sXHJcbiAgICBidXR0b25zLFxyXG4gICAgYWN0aXZlVGFiOiBhY3RpdmVUYWIgfHwgKGJhbm5lclRhYnNbMF0gJiYgYmFubmVyVGFic1swXS5rZXkpLFxyXG4gICAgYmxvY2tzOiBjb3Vyc2UuYmxvY2tzICYmIGNvdXJzZS5ibG9ja3Muc29ydChjb21wYXJlUHJvcChcImJsb2NrTm9cIikpLm1hcCgoe2lkOiBibG9ja0lkLCBuYW1lLCBzdGVwTnVtYmVyc30pID0+ICh7XHJcbiAgICAgIGlkOiBibG9ja0lkLFxyXG4gICAgICBuYW1lLFxyXG4gICAgICBzdGVwczogc3RlcE51bWJlcnMubWFwKHN0ZXBObyA9PiAoe1xyXG4gICAgICAgIGlzQWN0aXZlOiBhY3RpdmVUYWJPYmogJiYgc3RlcE5vID09PSAoYWN0aXZlVGFiT2JqIGFzIFN0ZXBDb3Vyc2VUYWIpLnN0ZXBObyxcclxuICAgICAgICBzdGVwTm8sXHJcbiAgICAgICAgbGluazogYC8ke3NjaG9vbH0vY291cnNlcy8ke2NvdXJzZUlkfS9ibG9ja3MvJHtibG9ja0lkfS9zdGVwcy8ke3N0ZXBOb31gXHJcbiAgICAgIH0pKVxyXG4gICAgfSkpLFxyXG4gICAgc29ydGFibGVUYWJzOiBlZGl0TW9kZSAmJiAoa2VkU3RhZmYgfHwgY291cnNlLmFsbG93UmVvcmRlclRhYnMpLFxyXG4gICAgb25UYWJEcm9wOiBhc3luYyAoc291cmNlLCB0YXJnZXQsIHBsYWNlbWVudCkgPT4ge1xyXG4gICAgICBjb25zdCBuZXdPcmRlciA9IHJlb3JkZXIodGFicywgc291cmNlLCB0YXJnZXQsIHBsYWNlbWVudCk7XHJcbiAgICAgIGlmIChuZXdPcmRlcikge1xyXG4gICAgICAgIGNvbnN0IHNvdXJjZVRhYiA9IHRhYnMuZmluZCh0ID0+IHQuaWQgPT09IHNvdXJjZSk7XHJcbiAgICAgICAgaWYgKHNvdXJjZVRhYikge1xyXG4gICAgICAgICAgYnJhbmNoLmNvdXJzZVRhYnMudXBkYXRlKHNvdXJjZVRhYiwge29yZGVyOiBuZXdPcmRlcn0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcbiAgcmV0dXJuIGJhbm5lclByb3BzO1xyXG59XHJcblxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kUmVwbywgU3RyaXBHcmFwaHMgfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyB3aXRoUm91dGVyLCBSb3V0ZVByb3BzLCBSb3V0ZUNvbXBvbmVudFByb3BzIH0gZnJvbSAncmVhY3Qtcm91dGVyJztcclxuaW1wb3J0IHsgTGluayB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xyXG5pbXBvcnQgeyBkYiB9IGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvZGInO1xyXG5pbXBvcnQgZW52IGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCB7IHB1Ymxpc2hDb3Vyc2UgfSBmcm9tICcuLi9sb2dpYy9wdWJsaXNoLWNvdXJzZSc7XHJcbmltcG9ydCB7IEhvcml6b250YWxJdGVtIH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2hvcml6b250YWwtaXRlbSc7XHJcbmltcG9ydCB7IEFsaWduSG9yaXpvbnRhbCB9IGZyb20gJy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9hbGlnbi1ob3Jpem9udGFsJztcclxuaW1wb3J0IHsgaXNLZWRTdGFmZiB9IGZyb20gJy4uL2xvZ2ljL2lzLWtlZC1zdGFmZic7XHJcbmltcG9ydCB7IENvdXJzZVRhYiwgQ291cnNlSW5zdGFuY2UgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IERvY3VtZW50QWNjZXNzLCBoYXNBY2Nlc3MgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XHJcbmltcG9ydCB7IGhhc1dyaXRlQWNjZXNzLCBoYXNTaGFyZUFjY2VzcyB9IGZyb20gJy4uLy4uLy4uL2FjY2Vzcy1jb250cm9sJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgc2Nob29sOiBzdHJpbmc7XHJcbiAgY291cnNlOiBDb3Vyc2VJbnN0YW5jZTtcclxuICB0YWI6IFN0cmlwR3JhcGhzPENvdXJzZVRhYj47XHJcbiAgYWN0aXZlVGFiOiBzdHJpbmc7XHJcbiAgZHJhZnRJZDogc3RyaW5nO1xyXG4gIGJsb2NrSWQ/OiBzdHJpbmc7XHJcbiAgY291cnNlVHlwZTogJ3RoZW1lLWNvdXJzZScgfCAnc3RlcC1jb3Vyc2UnXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBFZGl0b3JGb290ZXJCdXR0b25zID0gd2l0aFJvdXRlcigoeyBzY2hvb2wsIGNvdXJzZSwgdGFiLCBhY3RpdmVUYWIsIGRyYWZ0SWQsIGhpc3RvcnksIGNvdXJzZVR5cGUsIGJsb2NrSWQgfTogUHJvcHMgJiBSb3V0ZUNvbXBvbmVudFByb3BzKSA9PiA8PlxyXG4gIHt0YWIgJiYgKGlzS2VkU3RhZmYoKSB8fCAhdGFiLmxvY2tlZCB8fCBjb3Vyc2UuYWxsb3dSZW1vdmVUYWJzKSA/IDxkaXYgY2xhc3NOYW1lPVwiYnRuIGJ0bi13YXJuaW5nIHB1bGwtcmlnaHRcIiBvbkNsaWNrPXthc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCBkcmFmdFJlcG8gPSBkYi5icmFuY2goZHJhZnRJZCk7XHJcbiAgICBjb25zdCBjb3Vyc2VUYWIgPSBhd2FpdCBkcmFmdFJlcG8uY291cnNlVGFic1xyXG4gICAgICAuaW5jbHVkZShcImNvbnRlbnRzXCIpXHJcbiAgICAgIC5pbmNsdWRlSWRzT25seSgpXHJcbiAgICAgIC5pZChhY3RpdmVUYWIpXHJcbiAgICAgIC5sb2FkKCk7XHJcbiAgICBjb25zdCBjb250ZW50cyA9IGF3YWl0IGRyYWZ0UmVwby5jb3Vyc2VDb250ZW50c1xyXG4gICAgICAuaW5jbHVkZShcInRhc2tzXCIpXHJcbiAgICAgIC5pbmNsdWRlSWRzT25seSgpXHJcbiAgICAgIC5pZHMoY291cnNlVGFiLmNvbnRlbnRzLm1hcCgoe2lkfSkgPT4gaWQpKVxyXG4gICAgICAudG9WYWx1ZSgpLmxvYWQoKTtcclxuICAgIFxyXG4gICAgaWYgKGlzS2VkU3RhZmYoKSAmJiBzY2hvb2wgPT09ICdzdGFuZGFyZCcpIHtcclxuICAgICAgLy9cclxuICAgICAgLy8gT25seSByZW1vdmUgcmVsYXRlZCBjb250ZW50cyBhbmQgdGFza3MgaWYgd2UgYXJlIGRlbGV0aW5nIGEgcGh5c2ljYWwgdGFiIGhlcmVcclxuICAgICAgLy9cclxuICAgICAgY29udGVudHMuZm9yRWFjaChjb250ZW50ID0+IHtcclxuICAgICAgICBjb250ZW50LnRhc2tzLmZvckVhY2godGFzayA9PiB7XHJcbiAgICAgICAgICBkcmFmdFJlcG8uY291cnNlQ29udGVudHMucmVtb3ZlUmVsYXRlZChjb250ZW50LmlkLCBcInRhc2tzXCIsIHRhc2spO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgICAgY291cnNlVGFiLmNvbnRlbnRzLmZvckVhY2goY29udGVudCA9PiB7XHJcbiAgICAgICAgZHJhZnRSZXBvLmNvdXJzZVRhYnMucmVtb3ZlUmVsYXRlZChjb3Vyc2VUYWIuaWQsIFwiY29udGVudHNcIiwgY29udGVudCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGNvdXJzZVR5cGUgPT09ICd0aGVtZS1jb3Vyc2UnKSB7XHJcbiAgICAgIGRyYWZ0UmVwby5jb3Vyc2VJbnN0YW5jZXMucmVtb3ZlUmVsYXRlZChjb3Vyc2UuaWQsIFwidGFic1wiLCBjb3Vyc2VUYWIpO1xyXG4gICAgfSBlbHNlIGlmIChibG9ja0lkKSB7XHJcbiAgICAgIGRyYWZ0UmVwby5jb3Vyc2VCbG9ja3MucmVtb3ZlUmVsYXRlZChibG9ja0lkLCBcInRhYnNcIiwgY291cnNlVGFiKTtcclxuICAgIH1cclxuICAgIGF3YWl0IGRiLnNhdmVOb3coKTtcclxuICAgIGhpc3RvcnkucHVzaChgLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlLmlkfS90YWJzLyQvZHJhZnRzLyR7ZHJhZnRJZH0vZWRpdGApO1xyXG4gIH19PlxyXG4gICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtdHJhc2hcIiBhcmlhLWhpZGRlbj17dHJ1ZX0gLz4mbmJzcDtcclxuICAgICAgICB7TGBUYSBib3J0IGZsaWtlbmB9XHJcbiAgPC9kaXY+IDogbnVsbH1cclxuICA8ZGl2PlxyXG4gICAgPEFsaWduSG9yaXpvbnRhbD5cclxuICAgICAgPEhvcml6b250YWxJdGVtPlxyXG4gICAgICAgIDxidXR0b25cclxuICAgICAgICAgIGNsYXNzTmFtZT1cImJ0blwiXHJcbiAgICAgICAgICBvbkNsaWNrPXthc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGhpc3RvcnkucHVzaChgLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlLmlkfS90YWJzLyR7YWN0aXZlVGFiIHx8ICckJ30vZHJhZnRzLyR7ZHJhZnRJZH1gKTtcclxuICAgICAgICAgIH19XHJcbiAgICAgICAgPlxyXG4gICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtZXllXCIgYXJpYS1oaWRkZW49e3RydWV9IC8+Jm5ic3A7XHJcbiAgICAgICAgICB7TGBGw7ZyaGFuZHNncmFuc2thYH1cclxuICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgPC9Ib3Jpem9udGFsSXRlbT5cclxuICAgICAgPEhvcml6b250YWxJdGVtPlxyXG4gICAgICAgICZuYnNwO1xyXG4gICAgICAgIDxidXR0b25cclxuICAgICAgICAgIGNsYXNzTmFtZT1cImJ0blwiXHJcbiAgICAgICAgICBvbkNsaWNrPXthc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGhpc3RvcnkucHVzaChgLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlLmlkfS9oaXN0b3J5YCk7XHJcbiAgICAgICAgICB9fVxyXG4gICAgICAgID5cclxuICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLWhpc3RvcnlcIiBhcmlhLWhpZGRlbj17dHJ1ZX0gLz4mbmJzcDtcclxuICAgICAgICAgIHtMYFZlcnNpb25zaGlzdG9yaWtgfVxyXG4gICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICA8L0hvcml6b250YWxJdGVtPlxyXG4gICAgICA8SG9yaXpvbnRhbEl0ZW0+XHJcbiAgICAgICAgJm5ic3A7XHJcbiAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgY2xhc3NOYW1lPVwiYnRuIGJ0bi13YXJuaW5nXCJcclxuICAgICAgICAgIG9uQ2xpY2s9e2FzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgYXdhaXQgcHVibGlzaENvdXJzZSh7XHJcbiAgICAgICAgICAgICAgc2Nob29sLFxyXG4gICAgICAgICAgICAgIGNvdXJzZSxcclxuICAgICAgICAgICAgICBkcmFmdFJlcG86IGRiLmJyYW5jaChkcmFmdElkKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYXdhaXQgZGIuc2F2ZU5vdygpO1xyXG4gICAgICAgICAgICBoaXN0b3J5LnB1c2goYC8ke3NjaG9vbH0vY291cnNlcy8ke2NvdXJzZS5pZH0vdGFicy8ke2FjdGl2ZVRhYiB8fCAnJCd9YCk7XHJcbiAgICAgICAgICB9fVxyXG4gID5cclxuICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLXBsYXlcIiBhcmlhLWhpZGRlbj17dHJ1ZX0gLz4mbmJzcDtcclxuICAgICAgICAgIHtMYFB1YmxpY2VyYWB9XHJcbiAgICAgICAgPC9idXR0b24+XHJcbiAgICAgIDwvSG9yaXpvbnRhbEl0ZW0+XHJcbiAgICA8L0FsaWduSG9yaXpvbnRhbD5cclxuICA8L2Rpdj5cclxuICA8YnIvPlxyXG4gIDxidXR0b24gY2xhc3NOYW1lPVwiYnRuXCIgb25DbGljaz17KCk9PlxyXG4gICAgICBoaXN0b3J5LnB1c2goYC8ke3NjaG9vbH0vY291cnNlcy8ke2NvdXJzZS5pZH0vdGFicy8ke2FjdGl2ZVRhYiB8fCAnJCd9YCl9PlxyXG4gICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtYXJyb3ctbGVmdFwiIGFyaWEtaGlkZGVuPXt0cnVlfSAvPiZuYnNwO1xyXG4gICAgey8qc2Nob29sID09PSAnc3RhbmRhcmQnID9cclxuICAgICAgTGBWaXNhIG9mZmljaWVsbGEgc3RhbmRhcmR2ZXJzaW9uZW5gIDpcclxuICBMYFZpc2Egc2tvbGFucyBvZmZpY2llbGxhIHZlcnNpb25gKi8gTGBBdnNsdXRhIHJlZGlnZXJpbmdgfVxyXG5cclxuICA8L2J1dHRvbj5cclxuXHJcbjwvPik7XHJcblxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEhhc2hSb3V0ZXIgYXMgUm91dGVyLCBSb3V0ZSwgTGluaywgUmVkaXJlY3QsIFJvdXRlUHJvcHMsIFJvdXRlQ29tcG9uZW50UHJvcHMgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcclxuaW1wb3J0IHsgRXJyb3JTdWNjZXNzRmVlZGJhY2sgfSBmcm9tICcuLi8uLi8uLi91dGlscy9lcnJvci1zdWNjZXNzLWZlZWRiYWNrJztcclxuaW1wb3J0IHsgQmFubmVyLCBMYXp5QmFubmVyLCBCYW5uZXJQcm9wcyB9IGZyb20gJy4uL2NvbW1vbi9iYW5uZXInO1xyXG5pbXBvcnQgeyBMb2FkaW5nSW5kaWNhdG9yIH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2xvYWRpbmctaW5kaWNhdG9yJztcclxuaW1wb3J0IHsgbGl2ZVF1ZXJ5VmlldyB9IGZyb20gJy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9saXZlLXF1ZXJ5LXZpZXcnO1xyXG5pbXBvcnQgeyBTY2hvb2xzLCBkYiB9IGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvZGInO1xyXG5pbXBvcnQgeyBTY2hvb2wgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IEVtaXR0ZXIgfSBmcm9tICdrZWRiYWNrZW5kL29ic2VydmFibGUnO1xyXG5pbXBvcnQgeyBDb3Vyc2VWaWV3ZXJQYWdlIH0gZnJvbSAnLi9jb3Vyc2Utdmlld2VyLXBhZ2UnO1xyXG5pbXBvcnQgeyBUd29Db2x1bW5zUGFnZSB9IGZyb20gJy4uL2NvbW1vbi90d28tY29sdW1ucy1wYWdlJztcclxuaW1wb3J0IHsgV2Vla1BsYW5uZXIgfSBmcm9tICcuLi8uLi93ZWVrcGxhbm5lci93ZWVrcGxhbm5lcic7XHJcbmltcG9ydCB7IExpc3RDb3Vyc2VzIH0gZnJvbSAnLi9saXN0LWNvdXJzZXMnO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgZW52IGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCBjZmcgZnJvbSAnLi4vLi4vLi4vZ2xvYmFscy9LRUQuY2ZnJztcclxuaW1wb3J0IHsgUmVkaXJlY3RUb1N0ZXAgfSBmcm9tICcuL3JlZGlyZWN0LXRvLXN0ZXAnO1xyXG5pbXBvcnQgeyBWZXJzaW9uSGlzdG9yeVBhZ2UgfSBmcm9tICcuL3ZlcnNpb24taGlzdG9yeSc7XHJcbmltcG9ydCB7IGtlZXBTZXNzaW9uQWxpdmUgfSBmcm9tICcuLi8uLi8uLi91dGlscy9rZWVwLXNlc3Npb24tYWxpdmUnO1xyXG5pbXBvcnQgeyBzZXR1cERpYWxvZ3MgfSBmcm9tICcuLi9jb21tb24vZGlhbG9nLWNvbnRlbnQnO1xyXG5cclxuLy8gS2VlcCBTZXNzaW9uIEFsaXZlXHJcbmtlZXBTZXNzaW9uQWxpdmUoKTtcclxuXHJcbmNvbnN0IEdldE15U2Nob29sID0gbGl2ZVF1ZXJ5Vmlldzx7cmVuZGVyOiAoc2Nob29sOiBTY2hvb2wpID0+IGFueX0+KCh7cmVuZGVyfSkgPT5cclxuICBTY2hvb2xzLm15U2Nob29sLm1hcChzY2hvb2wgPT4gcmVuZGVyKHNjaG9vbCkpKTtcclxuXHJcbmV4cG9ydCBjb25zdCBTdWJqZWN0UGxhbm5lclZpZXdlckFwcCA9IHNldHVwRGlhbG9ncygoKT0+IDxkaXZcclxuICBvbktleURvd249e2V2ID0+IHtcclxuICAgIGlmIChldi53aGljaCA9PT0gODMgJiYgKGV2LmN0cmxLZXkgfHwgZXYubWV0YUtleSkpIHsgLy8gQ1RSTC1TXHJcbiAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGRiLnNhdmVOb3coKS50aGVuKCgpPT57XHJcbiAgICAgICAgLyovLyBXaGVuIHNhdmVkLCBleGl0IGVkaXQgbW9kZSBzbyB0aGF0IG9uZSBjYW4gdmlldyB0aGUgcmVzdWx0IGFzIHVzZXJzIHNlZSBpdC5cclxuICAgICAgICBpZiAobG9jYXRpb24uaGFzaC5lbmRzV2l0aCgnL2VkaXQnKSkge1xyXG4gICAgICAgICAgbG9jYXRpb24uaGFzaCA9IGxvY2F0aW9uLmhhc2guc3Vic3RyKDAsIGxvY2F0aW9uLmhhc2gubGVuZ3RoIC0gJy9lZGl0Jy5sZW5ndGgpO1xyXG4gICAgICAgIH0qL1xyXG4gICAgICB9KTtcclxuICAgIH19fT5cclxuICA8Um91dGVyPlxyXG4gICAgPD5cclxuICAgICAgPFJvdXRlIHBhdGg9XCIvXCIgZXhhY3QgcmVuZGVyPXsoKT0+PFJlZGlyZWN0IHRvPXtgL2NvdXJzZXNgfSAvPn0gLz5cclxuICAgICAgPFJvdXRlIHBhdGg9XCIvY291cnNlc1wiIGV4YWN0IHJlbmRlcj17KCk9Pjw+XHJcbiAgICAgICAgPEJhbm5lclxyXG4gICAgICAgICAgdGl0bGU9e0xgS3Vyc2VyYH1cclxuICAgICAgICAgIHRhYnM9e1tdfVxyXG4gICAgICAgICAgYWN0aXZlVGFiPVwiJFwiXHJcbiAgICAgICAgLz5cclxuICAgICAgICA8VHdvQ29sdW1uc1BhZ2VcclxuICAgICAgICAgIGxlZnQ9ezxMaXN0Q291cnNlcyBzaG93SW5hY3RpdmU9e3RydWV9IC8+fVxyXG4gICAgICAgICAgcmlnaHQ9ezxXZWVrUGxhbm5lciBlbnY9e2Vudn0gdmlld0NvdXJzZVVybD17Y2ZnLktFRF9DT1VSU0VfVklFV0VSX1VSTH0gLz59XHJcbiAgICAgICAgICByaWdodFdpZHRoPXs1fVxyXG4gICAgICAgIC8+XHJcbiAgICAgIDwvPn0vPlxyXG5cclxuICAgICAgey8qIFJlZGlyZWN0IGZyb20gXCIvY291cnNlcy8uLi5cIiB0byBcIi97bXlTY2hvb2x9L2NvdXJzZXMvLi4uXCIgKi99XHJcbiAgICAgIDxSb3V0ZSBwYXRoPVwiL2NvdXJzZXMvOmNvdXJzZUlkXCIgZXhhY3Q9e2ZhbHNlfSByZW5kZXI9eyh7bWF0Y2h9KT0+XHJcbiAgICAgICAgPEdldE15U2Nob29sIHJlbmRlcj17KHNjaG9vbDogU2Nob29sKSA9PlxyXG4gICAgICAgICAgPFJlZGlyZWN0IHRvPXtcclxuICAgICAgICAgICAgYC8ke3NjaG9vbC5uYW1lfS9jb3Vyc2VzLyR7bWF0Y2gucGFyYW1zLmNvdXJzZUlkfWB9XHJcbiAgICAgICAgICAvPn1cclxuICAgICAgICAvPn1cclxuICAgICAgLz5cclxuXHJcbiAgICAgIHsvKiBWaWV3IENvdXJzZSB3aXRob3V0IGtub3dpbmcgd2hpY2ggdGFiICovfVxyXG4gICAgICA8Um91dGUgZXhhY3QgcGF0aD1cIi86c2Nob29sL2NvdXJzZXMvOmNvdXJzZUlkXCIgcmVuZGVyPXsoe21hdGNofSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHtzY2hvb2wsIGNvdXJzZUlkfSA9IG1hdGNoLnBhcmFtcztcclxuICAgICAgICByZXR1cm4gPENvdXJzZVZpZXdlclBhZ2VcclxuICAgICAgICAgIHNjaG9vbD17c2Nob29sfVxyXG4gICAgICAgICAgY291cnNlSWQ9e2NvdXJzZUlkfSAvPjtcclxuICAgICAgICB9fSAgLz5cclxuXHJcbiAgICAgIHsvKjxSb3V0ZSBwYXRoPVwiLzpzY2hvb2wvY291cnNlcy86Y291cnNlSWQvZWRpdFwiIHJlbmRlcj17KHttYXRjaH0pID0+IHtcclxuICAgICAgICBjb25zdCB7c2Nob29sLCBjb3Vyc2VJZH0gPSBtYXRjaC5wYXJhbXM7XHJcbiAgICAgICAgcmV0dXJuIDxDb3Vyc2VJbnN0YW5jZVZpZXdcclxuICAgICAgICBzY2hvb2w9e3NjaG9vbH1cclxuICAgICAgICBjb3Vyc2VJZD17Y291cnNlSWR9IC8+O1xyXG4gICAgICAgIH19ICAvPiovfVxyXG5cclxuICAgICAgey8qIFZpZXcgQ291cnNlIHdpdGggY2VydGFpbiBhY3RpdmUgdGFiICovfVxyXG4gICAgICA8Um91dGUgZXhhY3QgcGF0aD1cIi86c2Nob29sL2NvdXJzZXMvOmNvdXJzZUlkL3RhYnMvOnRhYklkP1wiIHJlbmRlcj17KHttYXRjaH0pID0+IHtcclxuICAgICAgICAgIGNvbnN0IHtzY2hvb2wsIGNvdXJzZUlkLCB0YWJJZH0gPSBtYXRjaC5wYXJhbXM7XHJcbiAgICAgICAgICByZXR1cm4gPENvdXJzZVZpZXdlclBhZ2VcclxuICAgICAgICAgICAgc2Nob29sPXtzY2hvb2x9XHJcbiAgICAgICAgICAgIGNvdXJzZUlkPXtjb3Vyc2VJZH1cclxuICAgICAgICAgICAgYWN0aXZlVGFiPXt0YWJJZH0gLz59fSAvPlxyXG5cclxuICAgICAgey8qIFZpZXcgZHJhZnQgd2l0aG91dCBrbm93aW5nIHRhYiAqL31cclxuICAgICAgPFJvdXRlIGV4YWN0IHBhdGg9XCIvOnNjaG9vbC9jb3Vyc2VzLzpjb3Vyc2VJZC9zZXR0aW5ncy86ZHJhZnRJZFwiXHJcbiAgICAgICAgcmVuZGVyPXsoe21hdGNofSkgPT4ge1xyXG4gICAgICAgICAgY29uc3Qge3NjaG9vbCwgY291cnNlSWQsIGRyYWZ0SWR9ID0gbWF0Y2gucGFyYW1zO1xyXG4gICAgICAgICAgcmV0dXJuIDxDb3Vyc2VWaWV3ZXJQYWdlXHJcbiAgICAgICAgICAgIHNjaG9vbD17c2Nob29sfVxyXG4gICAgICAgICAgICBjb3Vyc2VJZD17Y291cnNlSWR9XHJcbiAgICAgICAgICAgIGFjdGl2ZVRhYj1cIiRzZXR0aW5nc1wiXHJcbiAgICAgICAgICAgIGRyYWZ0SWQ9e2RyYWZ0SWR9IC8+fX0gLz5cclxuXHJcbiAgICAgIHsvKiBWaWV3IGRyYWZ0IGFuZCBjZXJ0YWluIHRhYiAqL31cclxuICAgICAgPFJvdXRlIGV4YWN0IHBhdGg9XCIvOnNjaG9vbC9jb3Vyc2VzLzpjb3Vyc2VJZC90YWJzLzp0YWJJZC9kcmFmdHMvOmRyYWZ0SWRcIlxyXG4gICAgICAgIHJlbmRlcj17KHttYXRjaH0pID0+IHtcclxuICAgICAgICAgIGNvbnN0IHtzY2hvb2wsIGNvdXJzZUlkLCB0YWJJZCwgZHJhZnRJZH0gPSBtYXRjaC5wYXJhbXM7XHJcbiAgICAgICAgICByZXR1cm4gPENvdXJzZVZpZXdlclBhZ2VcclxuICAgICAgICAgICAgc2Nob29sPXtzY2hvb2x9XHJcbiAgICAgICAgICAgIGNvdXJzZUlkPXtjb3Vyc2VJZH1cclxuICAgICAgICAgICAgYWN0aXZlVGFiPXt0YWJJZH1cclxuICAgICAgICAgICAgZHJhZnRJZD17ZHJhZnRJZH0gLz59fSAvPlxyXG5cclxuICAgICAgey8qIEVkaXQgZHJhZnQgYW5kIGNlcnRhaW4gdGFiICovfVxyXG4gICAgICA8Um91dGUgZXhhY3QgcGF0aD1cIi86c2Nob29sL2NvdXJzZXMvOmNvdXJzZUlkL3RhYnMvOnRhYklkL2RyYWZ0cy86ZHJhZnRJZC9lZGl0XCJcclxuICAgICAgICByZW5kZXI9eyh7bWF0Y2h9KSA9PiB7XHJcbiAgICAgICAgICBjb25zdCB7c2Nob29sLCBjb3Vyc2VJZCwgdGFiSWQsIGRyYWZ0SWR9ID0gbWF0Y2gucGFyYW1zO1xyXG4gICAgICAgICAgcmV0dXJuIDxDb3Vyc2VWaWV3ZXJQYWdlXHJcbiAgICAgICAgICAgIHNjaG9vbD17c2Nob29sfVxyXG4gICAgICAgICAgICBjb3Vyc2VJZD17Y291cnNlSWR9XHJcbiAgICAgICAgICAgIGFjdGl2ZVRhYj17dGFiSWR9XHJcbiAgICAgICAgICAgIGRyYWZ0SWQ9e2RyYWZ0SWR9XHJcbiAgICAgICAgICAgIGVkaXRNb2RlPXt0cnVlfSAvPn19IC8+XHJcblxyXG4gICAgICB7LyogVmlldyB0YXNrICovfVxyXG4gICAgICA8Um91dGUgZXhhY3QgcGF0aD1cIi86c2Nob29sL2NvdXJzZXMvOmNvdXJzZUlkL3RhYnMvOnRhYklkL3Rhc2tzLzp0YXNrSWRcIlxyXG4gICAgICAgIHJlbmRlcj17KHttYXRjaH0pID0+IHtcclxuICAgICAgICAgIGNvbnN0IHtzY2hvb2wsIGNvdXJzZUlkLCB0YWJJZCwgdGFza0lkfSA9IG1hdGNoLnBhcmFtcztcclxuICAgICAgICAgIHJldHVybiA8Q291cnNlVmlld2VyUGFnZVxyXG4gICAgICAgICAgICBzY2hvb2w9e3NjaG9vbH1cclxuICAgICAgICAgICAgY291cnNlSWQ9e2NvdXJzZUlkfVxyXG4gICAgICAgICAgICBhY3RpdmVUYWI9e3RhYklkfVxyXG4gICAgICAgICAgICB0YXNrSWQ9e3Rhc2tJZH1cclxuICAgICAgICAgICAgZWRpdE1vZGU9e2ZhbHNlfSAvPn19IC8+XHJcblxyXG4gICAgICB7LyogVmlldyB0YXNrIG9uIGNlcnRhaW4gZHJhZnQgKHByZXZpZXcgbW9kZSkgKi99XHJcbiAgICAgIDxSb3V0ZSBleGFjdCBwYXRoPVwiLzpzY2hvb2wvY291cnNlcy86Y291cnNlSWQvdGFicy86dGFiSWQvY29udGVudHMvOmNvbnRlbnRJZC90YXNrcy86dGFza0lkL2RyYWZ0cy86ZHJhZnRJZFwiXHJcbiAgICAgICAgcmVuZGVyPXsoe21hdGNofSkgPT4ge1xyXG4gICAgICAgICAgY29uc3Qge3NjaG9vbCwgY291cnNlSWQsIHRhYklkLCB0YXNrSWQsIGRyYWZ0SWQsIGNvbnRlbnRJZCB9ID0gbWF0Y2gucGFyYW1zO1xyXG4gICAgICAgICAgcmV0dXJuIDxDb3Vyc2VWaWV3ZXJQYWdlXHJcbiAgICAgICAgICAgIHNjaG9vbD17c2Nob29sfVxyXG4gICAgICAgICAgICBjb3Vyc2VJZD17Y291cnNlSWR9XHJcbiAgICAgICAgICAgIGFjdGl2ZVRhYj17dGFiSWR9XHJcbiAgICAgICAgICAgIHRhc2tJZD17dGFza0lkfVxyXG4gICAgICAgICAgICBjb250ZW50SWQ9e2NvbnRlbnRJZH1cclxuICAgICAgICAgICAgZHJhZnRJZD17ZHJhZnRJZH1cclxuICAgICAgICAgICAgZWRpdE1vZGU9e2ZhbHNlfSAvPn19IC8+XHJcblxyXG4gICAgICB7LyogRWRpdCB0YXNrIG9uIGNlcnRhaW4gZHJhZnQgKi99XHJcbiAgICAgIDxSb3V0ZSBleGFjdCBwYXRoPVwiLzpzY2hvb2wvY291cnNlcy86Y291cnNlSWQvdGFicy86dGFiSWQvY29udGVudHMvOmNvbnRlbnRJZC90YXNrcy86dGFza0lkL2RyYWZ0cy86ZHJhZnRJZC9lZGl0XCJcclxuICAgICAgICByZW5kZXI9eyh7bWF0Y2h9KSA9PiB7XHJcbiAgICAgICAgICBjb25zdCB7c2Nob29sLCBjb3Vyc2VJZCwgdGFiSWQsIGNvbnRlbnRJZCwgdGFza0lkLCBkcmFmdElkfSA9IG1hdGNoLnBhcmFtcztcclxuICAgICAgICAgIHJldHVybiA8Q291cnNlVmlld2VyUGFnZVxyXG4gICAgICAgICAgICBzY2hvb2w9e3NjaG9vbH1cclxuICAgICAgICAgICAgY291cnNlSWQ9e2NvdXJzZUlkfVxyXG4gICAgICAgICAgICBhY3RpdmVUYWI9e3RhYklkfVxyXG4gICAgICAgICAgICBjb250ZW50SWQ9e2NvbnRlbnRJZH1cclxuICAgICAgICAgICAgdGFza0lkPXt0YXNrSWR9XHJcbiAgICAgICAgICAgIGRyYWZ0SWQ9e2RyYWZ0SWR9XHJcbiAgICAgICAgICAgIGVkaXRNb2RlPXt0cnVlfSAvPn19IC8+XHJcbiAgICAgIFxyXG4gICAgICB7LyogU3RlcCBjb3Vyc2VzOiBMaW5rIHRvIGNlcnRhaW4gYmxvY2sgYW5kIHN0ZXAgKi99XHJcbiAgICAgIDxSb3V0ZSBleGFjdCBwYXRoPVwiLzpzY2hvb2wvY291cnNlcy86Y291cnNlSWQvYmxvY2tzLzpibG9ja0lkL3N0ZXBzLzpzdGVwTm9cIlxyXG4gICAgICAgIHJlbmRlcj17KHttYXRjaH0pID0+IHtcclxuICAgICAgICAgIGNvbnN0IHtzY2hvb2wsIGNvdXJzZUlkLCBibG9ja0lkLCBzdGVwTm99ID0gbWF0Y2gucGFyYW1zO1xyXG4gICAgICAgICAgcmV0dXJuIDxSZWRpcmVjdFRvU3RlcFxyXG4gICAgICAgICAgICBzY2hvb2w9e3NjaG9vbH1cclxuICAgICAgICAgICAgY291cnNlSWQ9e2NvdXJzZUlkfVxyXG4gICAgICAgICAgICBibG9ja0lkPXtibG9ja0lkfVxyXG4gICAgICAgICAgICBzdGVwTm89e3N0ZXBOb31cclxuICAgICAgICAgICAvPjtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIC8+XHJcblxyXG4gICAgICB7LyogRWRpdCB2ZXJzaW9uIGhpc3RvcnkgKi99XHJcbiAgICAgIDxSb3V0ZSBleGFjdCBwYXRoPVwiLzpzY2hvb2wvY291cnNlcy86Y291cnNlSWQvaGlzdG9yeVwiXHJcbiAgICAgICAgcmVuZGVyPXsoe21hdGNofSkgPT4ge1xyXG4gICAgICAgICAgY29uc3Qge3NjaG9vbCwgY291cnNlSWQsIGJsb2NrSWQsIHN0ZXBOb30gPSBtYXRjaC5wYXJhbXM7XHJcbiAgICAgICAgICByZXR1cm4gPFZlcnNpb25IaXN0b3J5UGFnZVxyXG4gICAgICAgICAgICBzY2hvb2w9e3NjaG9vbH1cclxuICAgICAgICAgICAgY291cnNlSWQ9e2NvdXJzZUlkfVxyXG4gICAgICAgICAgIC8+O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgLz5cclxuXHJcbiAgICAgIDxFcnJvclN1Y2Nlc3NGZWVkYmFjayAvPlxyXG4gICAgICA8TG9hZGluZ0luZGljYXRvciAvPlxyXG4gICAgPC8+XHJcbiAgPC9Sb3V0ZXI+XHJcbjwvZGl2PilcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgbGl2ZVF1ZXJ5VmlldyB9IGZyb20gJy4uLy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9saXZlLXF1ZXJ5LXZpZXcnO1xyXG5pbXBvcnQgeyBsaXN0Q291cnNlSW5zdGFuY2VzIH0gZnJvbSAnLi4vLi4vbG9naWMvbGlzdC1jb3Vyc2UtaW5zdGFuY2VzJztcclxuaW1wb3J0IHsgTCB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgU3R1ZGVudENvdXJzZXNCb3ggfSBmcm9tICcuL3N0dWRlbnQtY291cnNlcy1ib3gnO1xyXG4vL2ltcG9ydCBlbnYgZnJvbSAnLi4vLi4vLi4vLi4vZ2xvYmFscy9LRUQuZW52JztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgc2hvd0luYWN0aXZlPzogYm9vbGVhblxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgTGlzdENvdXJzZXMgPSBsaXZlUXVlcnlWaWV3KCh7c2hvd0luYWN0aXZlfTogUHJvcHMpPT5cclxuICAoc2hvd0luYWN0aXZlID9cclxuICAgIGxpc3RDb3Vyc2VJbnN0YW5jZXMoKSA6XHJcbiAgICBsaXN0Q291cnNlSW5zdGFuY2VzKCkudGFncyhcImFjdGl2ZVwiKVxyXG4gICkgLm9yZGVyQnkoXCJuYW1lXCIpXHJcbiAgICAubWFwKCh7aWQsIG5hbWUsIHR5cGUsIGRlc2NyaXB0aW9uLCB0YWdzfSkgPT4gKHtcclxuICAgICAgaWQsXHJcbiAgICAgIG5hbWUsXHJcbiAgICAgIHR5cGUsXHJcbiAgICAgIHRhZ3MsXHJcbiAgICAgIGRlc2NyaXB0aW9uLFxyXG4gICAgICB1cmw6IGAvY291cnNlcy8ke2lkfWBcclxuICAgIH0pKVxyXG4gICAgLmdyb3VwQnkoXCJ0eXBlXCIpXHJcbiAgICAubWFwKGFycmF5c0J5VHlwZSA9PiAoe1xyXG4gICAgICB0aGVtZUNvdXJzZXM6IGFycmF5c0J5VHlwZVtcInRoZW1lLWNvdXJzZVwiXSxcclxuICAgICAgc3RlcENvdXJzZXM6IGFycmF5c0J5VHlwZVtcInN0ZXAtY291cnNlXCJdXHJcbiAgICB9KSlcclxuICAgIC5tYXAoKHt0aGVtZUNvdXJzZXMsIHN0ZXBDb3Vyc2VzfSkgPT4gPD5cclxuXHJcbiAgICAgIHt0aGVtZUNvdXJzZXMgJiYgPFN0dWRlbnRDb3Vyc2VzQm94IFxyXG4gICAgICAgIHRpdGxlPXtMYFRlbWFrdXJzZXJgfVxyXG4gICAgICAgIGNvdXJzZXM9e3RoZW1lQ291cnNlc31cclxuICAgICAgLz59XHJcblxyXG4gICAgICB7c3RlcENvdXJzZXMgJiYgPFN0dWRlbnRDb3Vyc2VzQm94XHJcbiAgICAgICAgdGl0bGU9e0xgU3RlZ2t1cnNlcmB9XHJcbiAgICAgICAgY291cnNlcz17c3RlcENvdXJzZXN9XHJcbiAgICAgIC8+fVxyXG5cclxuPC8+KSk7XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IExpbmsgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcclxuaW1wb3J0IHsgQWxpZ25Ib3Jpem9udGFsIH0gZnJvbSAnLi4vLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2FsaWduLWhvcml6b250YWwnO1xyXG5pbXBvcnQgeyBIb3Jpem9udGFsSXRlbSB9IGZyb20gJy4uLy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9ob3Jpem9udGFsLWl0ZW0nO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICB0aXRsZTogc3RyaW5nO1xyXG4gIGNvdXJzZXM6IEFycmF5PHtcclxuICAgIG5hbWU6IHN0cmluZyxcclxuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmcsXHJcbiAgICB0YWdzOiBzdHJpbmdbXSxcclxuICAgIHVybDogc3RyaW5nLFxyXG4gICAgaWQ6IHN0cmluZ1xyXG4gIH0+O1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgU3R1ZGVudENvdXJzZXNCb3ggPSAoe3RpdGxlLCBjb3Vyc2VzfTogUHJvcHMpID0+XHJcbiAgPGRpdiBjbGFzc05hbWU9XCJrZWRfYm94ZWRcIj5cclxuICAgIDxoMz57dGl0bGV9PC9oMz5cclxuICAgIDxkaXYgY2xhc3NOYW1lPVwidGFza0NvbnRhaW5lciBvZGQtZXZlblwiPlxyXG4gICAgICB7Y291cnNlcy5tYXAoKHtpZCwgbmFtZSwgZGVzY3JpcHRpb24sIHRhZ3N9KSA9PlxyXG4gICAgICAgIDxBbGlnbkhvcml6b250YWw+XHJcbiAgICAgICAgICA8SG9yaXpvbnRhbEl0ZW0+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3R1ZGVudENvdXJzZVwiPlxyXG4gICAgICAgICAgICAgIDxMaW5rIHRvPXtgL2NvdXJzZXMvJHtpZH1gfT57bmFtZX08L0xpbms+XHJcbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwic21hbGxcIj57ZGVzY3JpcHRpb259PC9wPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvSG9yaXpvbnRhbEl0ZW0+XHJcbiAgICAgICAgICB7dGFncy5pbmNsdWRlcyhcImFjdGl2ZVwiKSA/IHVuZGVmaW5lZCA6IDxIb3Jpem9udGFsSXRlbT5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwaWxsIGluY29tcGxldGVcIj5JbmFrdGl2PC9kaXY+XHJcbiAgICAgICAgICA8L0hvcml6b250YWxJdGVtPn1cclxuICAgICAgICA8L0FsaWduSG9yaXpvbnRhbD5cclxuICAgICAgKX1cclxuICAgIDwvZGl2PlxyXG4gIDwvZGl2PlxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBMYXp5Q29udGVudCB9IGZyb20gJy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9sYXp5LWNvbnRlbnQnO1xyXG5pbXBvcnQgeyBkYiB9IGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvZGInO1xyXG5pbXBvcnQgeyBjb21wYXJlUHJvcCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgUmVkaXJlY3QgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgc2Nob29sOiBzdHJpbmdcclxuICBjb3Vyc2VJZDogc3RyaW5nXHJcbiAgYmxvY2tJZDogc3RyaW5nXHJcbiAgc3RlcE5vOiBzdHJpbmcgfCBudW1iZXJcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IFJlZGlyZWN0VG9TdGVwID0gKHtcclxuICBzY2hvb2wsXHJcbiAgY291cnNlSWQsXHJcbiAgYmxvY2tJZCxcclxuICBzdGVwTm9cclxufTogUHJvcHMpID0+IDxMYXp5Q29udGVudD57XHJcbiAgZGIub3B0aW1pemVDYWNoZSgpLnNjaG9vbHMubmFtZShzY2hvb2wpLnNpbmdsZSgpXHJcbiAgICAubWFwKHNjaG9vbCA9PiBkYi5icmFuY2goc2Nob29sLm9mZmljaWFsQnJhbmNoSWQpKVxyXG4gICAgLnN3aXRjaE1hcChicmFuY2hSZXBvID0+XHJcbiAgICAgIGJyYW5jaFJlcG8uY291cnNlQmxvY2tzLmluY2x1ZGUoXCJ0YWJzXCIpLmlkKGJsb2NrSWQpXHJcbiAgICAgICAgLm1hcChibG9jayA9PiB7XHJcbiAgICAgICAgICBjb25zdCBmaXJzdFRhYiA9IGJsb2NrLnRhYnMuZmlsdGVyKHRhYiA9PiAnJyt0YWIuc3RlcE5vID09PSAnJytzdGVwTm8pLnNvcnQoY29tcGFyZVByb3AoXCJvcmRlclwiKSlbMF07XHJcbiAgICAgICAgICBpZiAoZmlyc3RUYWIpXHJcbiAgICAgICAgICAgIHJldHVybiA8UmVkaXJlY3RcclxuICAgICAgICAgICAgICB0bz17YC8ke3NjaG9vbH0vY291cnNlcy8ke2NvdXJzZUlkfS90YWJzLyR7Zmlyc3RUYWIuaWR9YH1cclxuICAgICAgICAgICAgLz47XHJcbiAgICAgICAgICByZXR1cm4gPFJlZGlyZWN0XHJcbiAgICAgICAgICAgIHRvPXtgLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlSWR9YH1cclxuICAgICAgICAgIC8+O1xyXG4gICAgICAgIH0pKVxyXG59PC9MYXp5Q29udGVudD4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBBbGlnbkhvcml6b250YWwgfSBmcm9tICcuLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvYWxpZ24taG9yaXpvbnRhbCc7XHJcbmltcG9ydCB7IENvdXJzZUluc3RhbmNlLCBDb3Vyc2VUYWIsIENvdXJzZUJsb2NrLCBUaGVtZUNvdXJzZUluc3RhbmNlIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBIb3Jpem9udGFsSXRlbSB9IGZyb20gJy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9ob3Jpem9udGFsLWl0ZW0nO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kUmVwbywgU3RyaXBHcmFwaHMgfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBmbGF0dGVuIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBnZXRTY2hvb2xZZWFycywgY29tcHV0ZUNvdXJzZUluc3RhbmNlVGFncyB9IGZyb20gJy4uL2xvZ2ljL2NvdXJzZS1pbnN0YW5jZS10YWdzJztcclxuaW1wb3J0IHsgVGFiUmVxdWlyZW1lbnRzIH0gZnJvbSAnLi90YWItc2V0dGluZ3MtcmVxdWlyZW1lbnRzJztcclxuaW1wb3J0IHsgT3BlbkNsb3NlQm94IH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL29wZW4tY2xvc2UtYm94JztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgY291cnNlOiBDb3Vyc2VJbnN0YW5jZTtcclxuICB0YWI6IFN0cmlwR3JhcGhzPENvdXJzZVRhYj47XHJcbiAgYmxvY2s/OiBDb3Vyc2VCbG9jaztcclxuICByZXBvOiBLZWRCYWNrZW5kUmVwbztcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IFRhYlNldHRpbmdzQWRtaW4gPSAoeyB0YWIsIHJlcG8sIGNvdXJzZSwgYmxvY2sgfTogUHJvcHMpID0+IHtcclxuICBjb25zdCB7IHN1YmplY3RDb2RlLCBzdWJqZWN0TmFtZSB9ID0gdGFiLnN1YmplY3QgP1xyXG4gICAgdGFiLnN1YmplY3QgOlxyXG4gICAgY291cnNlLnR5cGUgPT09ICd0aGVtZS1jb3Vyc2UnICYmIGNvdXJzZS5zdWJqZWN0cyAmJiBjb3Vyc2Uuc3ViamVjdHMubGVuZ3RoID4gMCA/XHJcbiAgICAgIHsgc3ViamVjdENvZGU6IGNvdXJzZS5zdWJqZWN0c1swXS5jb2RlLCBzdWJqZWN0TmFtZTogY291cnNlLnN1YmplY3RzWzBdLm5hbWUgfSA6XHJcbiAgICAgIGNvdXJzZS50eXBlID09PSAnc3RlcC1jb3Vyc2UnID9cclxuICAgICAgICB7IHN1YmplY3RDb2RlOiBjb3Vyc2Uuc3ViamVjdC5zdWJqZWN0Q29kZSwgc3ViamVjdE5hbWU6IGNvdXJzZS5zdWJqZWN0LnN1YmplY3ROYW1lIH0gOlxyXG4gICAgICAgIHsgc3ViamVjdENvZGU6ICcnLCBzdWJqZWN0TmFtZTogJycgfTtcclxuICBjb25zdCBjb3Vyc2VTY2hvb2xZZWFycyA9IGdldFNjaG9vbFllYXJzKGNvdXJzZS50YWdzKTtcclxuICBjb25zdCBzY2hvb2xZZWFyOiBudWxsIHwgc3RyaW5nID0gZ2V0U2Nob29sWWVhcnModGFiLnRhZ3MpWzBdIHx8IGNvdXJzZVNjaG9vbFllYXJzWzBdIHx8IG51bGw7XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICAvL1xyXG4gICAgLy8gRWRpdCBcInN0YW5kYXJkXCIgc2Nob29sOiBDaG9vc2UgdGFiIHR5cGVcclxuICAgIC8vXHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImtlZF9ib3hlZFwiPlxyXG4gICAgICA8cCBjbGFzc05hbWU9XCJib3gtbWluaS1sYWJlbFwiPntMYEFkbWluaXN0cmF0aXZhIEluc3TDpGxsbmluZ2FyIGbDtnIgZmxpa2VuICR7dGFiLm5hbWUgfHwgdGFiLnRhYlRpdGxlfWB9PC9wPlxyXG4gICAgICA8QWxpZ25Ib3Jpem9udGFsPlxyXG4gICAgICAgIDxIb3Jpem9udGFsSXRlbT5cclxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBjaGVja2VkPXt0YWIubG9ja2VkfVxyXG4gICAgICAgICAgICBvbkNoYW5nZT17ZXYgPT4gcmVwby5jb3Vyc2VUYWJzLnVwZGF0ZSh0YWIsIHsgbG9ja2VkOiAhIWV2LnRhcmdldC5jaGVja2VkIH0pfSAvPlxyXG4gICAgICAgIDwvSG9yaXpvbnRhbEl0ZW0+XHJcbiAgICAgICAgPEhvcml6b250YWxJdGVtPlxyXG4gICAgICAgICAge0xgTMOlcyBmbGlrZW4gZnLDpW4gcmVkaWdlcmluZyBmw7ZydXRvbSBkw6RyIGRldCBleHBsaWNpdCB0aWxsw6V0c2B9XHJcbiAgICAgICAgPC9Ib3Jpem9udGFsSXRlbT5cclxuICAgICAgPC9BbGlnbkhvcml6b250YWw+XHJcbiAgICAgIHtjb3Vyc2UudHlwZSA9PT0gJ3N0ZXAtY291cnNlJyAmJiA8PlxyXG4gICAgICAgIDxici8+XHJcbiAgICAgICAgPE9wZW5DbG9zZUJveCB0aXRsZT17TGBBdmFuY2VyYXQuLi5gfT5cclxuICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiYnRuXCIgb25DbGljaz17YXN5bmMgKCk9PntcclxuICAgICAgICAgICAgY29uc3Qgc2Nob29sWWVhciA9IGdldFNjaG9vbFllYXJzKGJsb2NrLnRhZ3MpWzBdO1xyXG4gICAgICAgICAgICBhd2FpdCB1cGRhdGVTdWJqZWN0QW5kU2Nob29sWWVhcnMoY291cnNlLCBjb3Vyc2Uuc3ViamVjdC5zdWJqZWN0TmFtZSwgY291cnNlLnN1YmplY3Quc3ViamVjdENvZGUsIHNjaG9vbFllYXIpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgfT57TGBHw7ZyIG9tIGtvcHBsaW5nZW4gdGlsbCDDpG1uZSBvY2ggw6Vyc2t1cnNzcGFubmB9PC9idXR0b24+XHJcbiAgICAgICAgPC9PcGVuQ2xvc2VCb3g+XHJcbiAgICAgIDwvPn1cclxuICAgICAge2NvdXJzZS50eXBlID09PSAndGhlbWUtY291cnNlJyAmJiB0YWIudGFiQ2xhc3MgPT09ICdzdWJqZWN0LXRhYicgJiYgISFzdWJqZWN0Q29kZSAmJiA8PlxyXG4gICAgICAgIDxici8+XHJcbiAgICAgICAge2NvdXJzZS5zdWJqZWN0cy5sZW5ndGggPiAxICYmIDxBbGlnbkhvcml6b250YWw+XHJcbiAgICAgICAgICA8SG9yaXpvbnRhbEl0ZW0+XHJcbiAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJrY2xhYmVsXCI+e0xgw4RtbmVgfTwvbGFiZWw+XHJcbiAgICAgICAgICA8L0hvcml6b250YWxJdGVtPlxyXG4gICAgICAgICAgPEhvcml6b250YWxJdGVtPlxyXG4gICAgICAgICAgICA8c2VsZWN0XHJcbiAgICAgICAgICAgICAgdmFsdWU9e3N1YmplY3RDb2RlfVxyXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXthc3luYyBldiA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhpcyB0YWIncyBzdWJqZWN0IGFuZCB0YWdzXHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdWJqZWN0Q29kZSA9IGV2LnRhcmdldC52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN1YmplY3ROYW1lID0gY291cnNlLnN1YmplY3RzXHJcbiAgICAgICAgICAgICAgICAgIC5maWx0ZXIocyA9PiBzLmNvZGUgPT09IHN1YmplY3RDb2RlKVxyXG4gICAgICAgICAgICAgICAgICAubWFwKHMgPT4gcy5uYW1lKVswXSB8fCBzdWJqZWN0Q29kZTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHVwZGF0ZVN1YmplY3RBbmRTY2hvb2xZZWFycyhjb3Vyc2UsIHN1YmplY3ROYW1lLCBzdWJqZWN0Q29kZSwgc2Nob29sWWVhcik7XHJcbiAgICAgICAgICAgICAgfX0+XHJcbiAgICAgICAgICAgICAge2NvdXJzZS5zdWJqZWN0cy5tYXAoKHsgbmFtZSwgY29kZSB9KSA9PlxyXG4gICAgICAgICAgICAgICAgPG9wdGlvbiBrZXk9e2NvZGV9IHZhbHVlPXtjb2RlfT57bmFtZX08L29wdGlvbj4pfVxyXG4gICAgICAgICAgICA8L3NlbGVjdD5cclxuICAgICAgICAgIDwvSG9yaXpvbnRhbEl0ZW0+XHJcbiAgICAgICAgPC9BbGlnbkhvcml6b250YWw+fVxyXG4gICAgICAgIHtjb3Vyc2VTY2hvb2xZZWFycy5sZW5ndGggPiAxICYmIDw+XHJcblxyXG4gICAgICAgICAgPEFsaWduSG9yaXpvbnRhbD5cclxuICAgICAgICAgICAgPEhvcml6b250YWxJdGVtPlxyXG4gICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJrY2xhYmVsXCI+e0xgVsOkbGogw6Vyc2t1cnNgfTwvbGFiZWw+XHJcbiAgICAgICAgICAgIDwvSG9yaXpvbnRhbEl0ZW0+XHJcbiAgICAgICAgICAgIDxIb3Jpem9udGFsSXRlbT5cclxuICAgICAgICAgICAgICA8c2VsZWN0IHZhbHVlPXtzY2hvb2xZZWFyfVxyXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e2FzeW5jIGV2ID0+IHtcclxuICAgICAgICAgICAgICAgICAgY29uc3Qgc2Nob29sWWVhciA9IGV2LnRhcmdldC52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgY29uc3Qgc3ViamVjdE5hbWUgPSBjb3Vyc2Uuc3ViamVjdHNcclxuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKHMgPT4gcy5jb2RlID09PSBzdWJqZWN0Q29kZSlcclxuICAgICAgICAgICAgICAgICAgICAubWFwKHMgPT4gcy5uYW1lKVswXSB8fCBzdWJqZWN0Q29kZTtcclxuICAgICAgICAgICAgICAgICAgYXdhaXQgdXBkYXRlU3ViamVjdEFuZFNjaG9vbFllYXJzKGNvdXJzZSwgc3ViamVjdE5hbWUsIHN1YmplY3RDb2RlLCBzY2hvb2xZZWFyKTtcclxuICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAge2NvdXJzZVNjaG9vbFllYXJzLm1hcCh5ZWFyID0+IDxvcHRpb24ga2V5PXt5ZWFyfSB2YWx1ZT17eWVhcn0+e0xgw4Vyc2t1cnMgJHt5ZWFyfWB9PC9vcHRpb24+KX1cclxuICAgICAgICAgICAgICA8L3NlbGVjdD5cclxuICAgICAgICAgICAgPC9Ib3Jpem9udGFsSXRlbT5cclxuICAgICAgICAgIDwvQWxpZ25Ib3Jpem9udGFsPlxyXG4gICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgPFRhYlJlcXVpcmVtZW50cyByZXBvPXtyZXBvfSB0YWI9e3RhYn0gLz5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGJyLz5cclxuICAgICAgICAgIDxPcGVuQ2xvc2VCb3ggdGl0bGU9e0xgQXZhbmNlcmF0Li4uYH0+XHJcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiYnRuXCIgb25DbGljaz17YXN5bmMgKCk9PntcclxuICAgICAgICAgICAgICBhd2FpdCB1cGRhdGVTdWJqZWN0QW5kU2Nob29sWWVhcnMoY291cnNlLCBzdWJqZWN0TmFtZSwgc3ViamVjdENvZGUsIHNjaG9vbFllYXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0+e0xgR8O2ciBvbSBrb3BwbGluZ2VuIHRpbGwgw6RtbmUgb2NoIMOlcnNrdXJzc3Bhbm5gfTwvYnV0dG9uPlxyXG4gICAgICAgICAgPC9PcGVuQ2xvc2VCb3g+XHJcblxyXG4gICAgICAgIDwvPn1cclxuICAgICAgPC8+fVxyXG4gICAgPC9kaXY+XHJcbiAgKTtcclxuXHJcbiAgYXN5bmMgZnVuY3Rpb24gdXBkYXRlU3ViamVjdEFuZFNjaG9vbFllYXJzKGNvdXJzZTogU3RyaXBHcmFwaHM8Q291cnNlSW5zdGFuY2U+LCBzdWJqZWN0TmFtZTogc3RyaW5nLCBzdWJqZWN0Q29kZTogc3RyaW5nLCBzY2hvb2xZZWFyOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IHRhYlRhZ3MgPSBjb21wdXRlQ291cnNlSW5zdGFuY2VUYWdzKHRhYi50YWdzLCBbc3ViamVjdENvZGVdLCBbc2Nob29sWWVhcl0pO1xyXG5cclxuICAgIHJlcG8uY291cnNlVGFicy51cGRhdGUodGFiLCB7XHJcbiAgICAgIHN1YmplY3Q6IHtcclxuICAgICAgICBzdWJqZWN0Q29kZSxcclxuICAgICAgICBzdWJqZWN0TmFtZVxyXG4gICAgICB9LFxyXG4gICAgICB0YWdzOiB0YWJUYWdzXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBBbHNvIHVwZGF0ZSBhbGwgdGFza3MgY29ubmVjdGVkIHRvIHRoaXMgdGFiXHJcbiAgICAvLyBOZWVkIHRvIG1vdmUgdGhlbSB0byB0aGUgbmV3IHN1YmplY3RcclxuICAgIGNvbnN0IGxnQ29udGVudHMgPSBhd2FpdCByZXBvLmNvdXJzZUNvbnRlbnRzXHJcbiAgICAgIC5oYXNFZGdlc0Zyb20oW3RhYi5pZF0pXHJcbiAgICAgIC5pbmNsdWRlKFwidGFza3NcIilcclxuICAgICAgLmluY2x1ZGVJZHNBbmROYW1lc09ubHkoKVxyXG4gICAgICAudG9WYWx1ZSgpLmxvYWQoKTtcclxuICAgIGNvbnN0IHRhc2tzID0gZmxhdHRlbihsZ0NvbnRlbnRzLm1hcChjID0+IGMudGFza3MpKTtcclxuICAgIGZvciAoY29uc3QgdGFzayBvZiB0YXNrcykge1xyXG4gICAgICBjb25zdCB0YWdzID0gY29tcHV0ZUNvdXJzZUluc3RhbmNlVGFncyhbY291cnNlLmlkXSwgW3N1YmplY3RDb2RlXSwgW3NjaG9vbFllYXJdKTtcclxuICAgICAgcmVwby50YXNrcy51cGRhdGUodGFzaywge3RhZ3MsIHN1YmplY3Q6IHN1YmplY3ROYW1lfSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRSZXBvLCBXaXRoR3JhcGhzLCBTdHJpcEdyYXBocyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IFRhc2ssIFRoZW1lQ291cnNlVGFiLCBDb3Vyc2VUYWIgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IEtub3dsZWRnZU1hdHJpeCB9IGZyb20gJy4uLy4uL2NvdXJzZS1idWlsZGVyL3N1Yi1jb21wb25lbnRzL2tub3dsZWRnZS1tYXRyaXgnO1xyXG5pbXBvcnQgeyBMYXp5Q29udGVudCB9IGZyb20gJy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9sYXp5LWNvbnRlbnQnO1xyXG5pbXBvcnQgeyBnZXRDb3Vyc2VDb2Rlc0Zyb21UYWdzIH0gZnJvbSAnLi4vbG9naWMvZ2V0LWNvdXJzZS1jb2Rlcy1mcm9tLXRhZ3MnO1xyXG5pbXBvcnQgeyBMLCBzaG93RXJyb3IgfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IGdldFN0YW5kYXJkQ291cnNlc1dpdGhPcmRlcmVkUmVxdWlyZW1lbnRzIH0gZnJvbSAnLi4vbG9naWMvZ2V0LXN0YW5kYXJkLWNvdXJzZXMtd2l0aC1vcmRlcmVkLXJlcXVpcmVtZW50cyc7XHJcbmltcG9ydCB7IE9wZW5DbG9zZUJveCB9IGZyb20gJy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9vcGVuLWNsb3NlLWJveCc7XHJcbmltcG9ydCB7IFNlbGVjdFJlbGF0ZWREb2NzIH0gZnJvbSAnLi4vLi4vY291cnNlLWJ1aWxkZXIvc3ViLWNvbXBvbmVudHMvc2VsZWN0LXJlbGF0ZWQtZG9jcyc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHJlcG86IEtlZEJhY2tlbmRSZXBvXHJcbiAgdGFiOiBTdHJpcEdyYXBoczxDb3Vyc2VUYWI+XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBUYWJSZXF1aXJlbWVudHMgPSAoe1xyXG4gIHJlcG8sXHJcbiAgdGFiXHJcbn06IFByb3BzKSA9PiA8TGF6eUNvbnRlbnQ+e1xyXG4gIGdldFN0YW5kYXJkQ291cnNlc1dpdGhPcmRlcmVkUmVxdWlyZW1lbnRzKFxyXG4gICAgZ2V0Q291cnNlQ29kZXNGcm9tVGFncyh0YWIudGFncykpXHJcbiAgLm1hcChjb3Vyc2VUZW1wbGF0ZXMgPT4gY291cnNlVGVtcGxhdGVzLmxlbmd0aCA9PT0gMCA/XHJcblxyXG4gICAgPHA+e0xgRmxpa2VuIMOkciBpbnRlIGtvcHBsYWQgdGlsbCBuw6Vnb3Qgw6RtbmUgLyDDpXJza3Vyc2B9PC9wPlxyXG4gICAgOlxyXG5cclxuICAgIDxkaXY+XHJcbiAgICAgIHtjb3Vyc2VUZW1wbGF0ZXMubWFwKCh7aWQsIG5hbWUsIGFiaWxpdGllcywgY2VudHJhbENvbnRlbnQsIGtub3dsZWRnZVJlcXVpcmVtZW50c30pID0+IDxkaXYga2V5PXtpZH0+XHJcbiAgICAgICAge2NvdXJzZVRlbXBsYXRlcy5sZW5ndGggPT09IDEgPyB1bmRlZmluZWQgOiA8aDE+e25hbWV9PC9oMT59XHJcbiAgICAgICAgICA8T3BlbkNsb3NlQm94IGNsYXNzTmFtZT1cImxhcmdlclwiIHRpdGxlPXs8cD57TGBMw6VzIGZsaWtlbnMga3Vuc2thcHNrcmF2YH08L3A+fT5cclxuICAgICAgICAgICAgPHA+XHJcbiAgICAgICAgICAgICAgICB7TGBNYXJrZXJhIGRlIGt1bnNrYXBza3JhdiBzb20gw6RtbmVzZmxpa2VuIHNrYSB0w6Rja2EuYH1cclxuICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICA8TGF6eUNvbnRlbnQ+e1xyXG4gICAgICAgICAgICAgIHJlcG9bXCJrbm93bGVkZ2UtcmVxdWlyZW1lbnRzXCJdLmhhc0VkZ2VzRnJvbShbdGFiLmlkXSkuaWRzT25seSgpLnRvVmFsdWUoKS5tYXAodGFic0tycyA9PiB7ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDxLbm93bGVkZ2VNYXRyaXhcclxuICAgICAgICAgICAgICAgICAga25vd2xlZGdlUmVxdWlyZW1lbnRzPXtrbm93bGVkZ2VSZXF1aXJlbWVudHN9XHJcbiAgICAgICAgICAgICAgICAgIG1hcmtlZElkcz17dGFic0tycy5tYXAoKHtpZH0pID0+IGlkKX1cclxuICAgICAgICAgICAgICAgICAgaWRzVG9NYXJrTm90T2s9e3t9fVxyXG4gICAgICAgICAgICAgICAgICBtYXJrTW9kZT17dHJ1ZX1cclxuICAgICAgICAgICAgICAgICAgb25NYXJrQ2hhbmdlZD17KG1hcmtlZElkOiBzdHJpbmcsIGlzTWFya2VkOiBib29sZWFuKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIGludmFsaWQga25vd2xlZGdlIHJlcXVpcmVtZW50cyAodGhvc2UgdGhhdCBhcmUgbm90IHBhcnQgb2YgdGhlIHN0YW5kYXJkIGNvdXJzZSlcclxuICAgICAgICAgICAgICAgICAgICAvLyBDYW4gaGFwcGVuIGFmdGVyIGNoYW5naW5nIHNjaG9vbCB5ZWFyIC8gY291cnNlIG9yIHN1YmplY3QuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW52YWxpZEtycyA9IHRhYnNLcnMuZmlsdGVyKGtyID0+ICFrbm93bGVkZ2VSZXF1aXJlbWVudHMuc29tZSgoe2lkfSkgPT4ga3IuaWQgPT09IGlkKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW52YWxpZEtycy5mb3JFYWNoKGludmFsaWRLciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICByZXBvLmNvdXJzZVRhYnMucmVtb3ZlUmVsYXRlZCh0YWIuaWQsIFwia25vd2xlZGdlUmVxdWlyZW1lbnRzXCIsIGludmFsaWRLcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFya2VkRG9jID0ga25vd2xlZGdlUmVxdWlyZW1lbnRzLmZpbHRlcigoe2lkfSkgPT4gaWQgPT09IG1hcmtlZElkKVswXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNNYXJrZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHJlcG8uY291cnNlVGFicy5hZGRSZWxhdGVkKHRhYi5pZCwgXCJrbm93bGVkZ2VSZXF1aXJlbWVudHNcIiwgbWFya2VkRG9jKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmVwby5jb3Vyc2VUYWJzLnJlbW92ZVJlbGF0ZWQodGFiLmlkLCBcImtub3dsZWRnZVJlcXVpcmVtZW50c1wiLCBtYXJrZWREb2MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgfSl9PC9MYXp5Q29udGVudD5cclxuICAgICAgICAgIDwvT3BlbkNsb3NlQm94PlxyXG5cclxuICAgICAgICAgIDxMYXp5Q29udGVudD57XHJcbiAgICAgICAgICAgIHJlcG8uYWJpbGl0aWVzLmhhc0VkZ2VzRnJvbShbdGFiLmlkXSkuaWRzT25seSgpLnRvVmFsdWUoKS5tYXAodGFiQWJpbGl0aWVzID0+IHtcclxuICAgICAgICAgICAgICByZXR1cm4gPFNlbGVjdFJlbGF0ZWREb2NzXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zPXthYmlsaXRpZXN9XHJcbiAgICAgICAgICAgICAgICB0aXRsZT17TGBMw6VzIGZsaWtlbnMgZsO2cm3DpWdvcmB9XHJcbiAgICAgICAgICAgICAgICBtYXJrZWRJZHM9e3RhYkFiaWxpdGllcy5tYXAoKHtpZH0pID0+IGlkKX1cclxuICAgICAgICAgICAgICAgIG1hcmtNb2RlPXt0cnVlfVxyXG4gICAgICAgICAgICAgICAgLy9taWdyYXRlZElkcz17dGFzayAmJiB0YXNrLm1pZ3JhdGVkVGV4dHMgJiYgdGFzay5taWdyYXRlZFRleHRzLmFiaWxpdGllc31cclxuICAgICAgICAgICAgICAgIG9uTWFya0NoYW5nZWQ9eyhtYXJrZWRJZCwgaXNNYXJrZWQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIGludmFsaWQgYWJpbGl0aWVzICh0aG9zZSB0aGF0IGFyZSBub3QgcGFydCBvZiB0aGUgc3RhbmRhcmQgY291cnNlKVxyXG4gICAgICAgICAgICAgICAgICAvLyBDYW4gaGFwcGVuIGFmdGVyIGNoYW5naW5nIHNjaG9vbCB5ZWFyIC8gY291cnNlIG9yIHN1YmplY3QuXHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGludmFsaWRBYmlsaXRpZXMgPSB0YWJBYmlsaXRpZXMuZmlsdGVyKGEgPT4gIWFiaWxpdGllcy5zb21lKCh7aWR9KSA9PiBhLmlkID09PSBpZCkpO1xyXG4gICAgICAgICAgICAgICAgICBpbnZhbGlkQWJpbGl0aWVzLmZvckVhY2goaW52YWxpZEFiaWxpdHkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcG8uY291cnNlVGFicy5yZW1vdmVSZWxhdGVkKHRhYi5pZCwgXCJhYmlsaXRpZXNcIiwgaW52YWxpZEFiaWxpdHkpO1xyXG4gICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgY29uc3QgbWFya2VkRG9jID0gYWJpbGl0aWVzLmZpbHRlcigoe2lkfSkgPT4gaWQgPT09IG1hcmtlZElkKVswXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNNYXJrZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHJlcG8uY291cnNlVGFicy5hZGRSZWxhdGVkKHRhYi5pZCwgXCJhYmlsaXRpZXNcIiwgbWFya2VkRG9jKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmVwby5jb3Vyc2VUYWJzLnJlbW92ZVJlbGF0ZWQodGFiLmlkLCBcImFiaWxpdGllc1wiLCBtYXJrZWREb2MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgIH0pfTwvTGF6eUNvbnRlbnQ+XHJcblxyXG4gICAgICAgICAgPExhenlDb250ZW50PntcclxuICAgICAgICAgICAgcmVwb1tcImNlbnRyYWwtY29udGVudFwiXS5oYXNFZGdlc0Zyb20oW3RhYi5pZF0pLmlkc09ubHkoKS50b1ZhbHVlKCkubWFwKHRhYnNDQ3MgPT4ge1xyXG5cclxuICAgICAgICAgICAgICByZXR1cm4gPFNlbGVjdFJlbGF0ZWREb2NzXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zPXtjZW50cmFsQ29udGVudH1cclxuICAgICAgICAgICAgICAgIHRpdGxlPXtMYEzDpXMgZmxpa2VucyBjZW50cmFsYSBpbm5laMOlbGxgfVxyXG4gICAgICAgICAgICAgICAgbWFya2VkSWRzPXt0YWJzQ0NzLm1hcChjYyA9PiBjYy5pZCl9XHJcbiAgICAgICAgICAgICAgICBtYXJrTW9kZT17dHJ1ZX1cclxuICAgICAgICAgICAgICAgIC8vbWlncmF0ZWRJZHM9e3Rhc2sgJiYgdGFzay5taWdyYXRlZFRleHRzICYmIHRhc2subWlncmF0ZWRUZXh0cy5jZW50cmFsQ29udGVudH1cclxuICAgICAgICAgICAgICAgIG9uTWFya0NoYW5nZWQ9eyhtYXJrZWRJZCwgaXNNYXJrZWQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIGludmFsaWQgY2VudHJhbCBjb250ZW50cyAodGhvc2UgdGhhdCBhcmUgbm90IHBhcnQgb2YgdGhlIHN0YW5kYXJkIGNvdXJzZSlcclxuICAgICAgICAgICAgICAgICAgLy8gQ2FuIGhhcHBlbiBhZnRlciBjaGFuZ2luZyBzY2hvb2wgeWVhciAvIGNvdXJzZSBvciBzdWJqZWN0LlxyXG4gICAgICAgICAgICAgICAgICBjb25zdCBpbnZhbGlkQ2VudHJhbENvbnRlbnRzID0gdGFic0NDcy5maWx0ZXIoY2MgPT4gIWNlbnRyYWxDb250ZW50LnNvbWUoKHtpZH0pID0+IGNjLmlkID09PSBpZCkpO1xyXG4gICAgICAgICAgICAgICAgICBpbnZhbGlkQ2VudHJhbENvbnRlbnRzLmZvckVhY2goaW52YWxpZENDID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXBvLmNvdXJzZVRhYnMucmVtb3ZlUmVsYXRlZCh0YWIuaWQsIFwiY2VudHJhbENvbnRlbnRcIiwgaW52YWxpZENDKTtcclxuICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG1hcmtlZERvYyA9IGNlbnRyYWxDb250ZW50LmZpbHRlcigoe2lkfSkgPT4gaWQgPT09IG1hcmtlZElkKVswXTtcclxuICAgICAgICAgICAgICAgICAgaWYgKGlzTWFya2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVwby5jb3Vyc2VUYWJzLmFkZFJlbGF0ZWQodGFiLmlkLCBcImNlbnRyYWxDb250ZW50XCIsIG1hcmtlZERvYyk7XHJcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVwby5jb3Vyc2VUYWJzLnJlbW92ZVJlbGF0ZWQodGFiLmlkLCBcImNlbnRyYWxDb250ZW50XCIsIG1hcmtlZERvYyk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgLz4gIFxyXG4gICAgICAgICAgICB9KX08L0xhenlDb250ZW50PlxyXG5cclxuXHJcbiAgICAgIDwvZGl2Pil9XHJcbiAgICA8L2Rpdj5cclxuICApXHJcbn08L0xhenlDb250ZW50PiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEFsaWduSG9yaXpvbnRhbCB9IGZyb20gJy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9hbGlnbi1ob3Jpem9udGFsJztcclxuaW1wb3J0IHsgQ291cnNlSW5zdGFuY2UsIENvdXJzZVRhYiB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgSG9yaXpvbnRhbEl0ZW0gfSBmcm9tICcuLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvaG9yaXpvbnRhbC1pdGVtJztcclxuaW1wb3J0IHsgS2VkQmFja2VuZFJlcG8sIFN0cmlwR3JhcGhzIH0gZnJvbSAna2VkYmFja2VuZC9yZXBvJztcclxuaW1wb3J0IHsgQ291cnNlVGFiQ2xhc3NlcywgVGFiVHlwZXNQZXJDb3Vyc2VUeXBlIH0gZnJvbSAnLi9jb3Vyc2UtdGFiL3RhYi1jbGFzc2VzJztcclxuaW1wb3J0IHsgTCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgZ2V0U2Nob29sWWVhcnMsIGNvbXB1dGVDb3Vyc2VJbnN0YW5jZVRhZ3MgfSBmcm9tICcuLi9sb2dpYy9jb3Vyc2UtaW5zdGFuY2UtdGFncyc7XHJcbmltcG9ydCB7IFRleHRJbnB1dCB9IGZyb20gJy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9mb3JtLWZpZWxkLXRleHQtaW5wdXQnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBjb3Vyc2U6IENvdXJzZUluc3RhbmNlO1xyXG4gIHRhYjogU3RyaXBHcmFwaHM8Q291cnNlVGFiPjtcclxuICByZXBvOiBLZWRCYWNrZW5kUmVwbztcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IFRhYlNldHRpbmdzID0gKHsgdGFiLCByZXBvLCBjb3Vyc2UgfTogUHJvcHMpID0+IHtcclxuICBjb25zdCB7IHN1YmplY3RDb2RlLCBzdWJqZWN0TmFtZSB9ID0gdGFiLnN1YmplY3QgP1xyXG4gICAgdGFiLnN1YmplY3QgOlxyXG4gICAgY291cnNlLnR5cGUgPT09ICd0aGVtZS1jb3Vyc2UnICYmIGNvdXJzZS5zdWJqZWN0cyAmJiBjb3Vyc2Uuc3ViamVjdHMubGVuZ3RoID4gMCA/XHJcbiAgICAgIHsgc3ViamVjdENvZGU6IGNvdXJzZS5zdWJqZWN0c1swXS5jb2RlLCBzdWJqZWN0TmFtZTogY291cnNlLnN1YmplY3RzWzBdLm5hbWUgfSA6XHJcbiAgICAgIHsgc3ViamVjdENvZGU6ICcnLCBzdWJqZWN0TmFtZTogJycgfTtcclxuICBjb25zdCBjb3Vyc2VTY2hvb2xZZWFycyA9IGdldFNjaG9vbFllYXJzKGNvdXJzZS50YWdzKTtcclxuICBjb25zdCBzY2hvb2xZZWFyOiBudWxsIHwgc3RyaW5nID0gZ2V0U2Nob29sWWVhcnModGFiLnRhZ3MpWzBdIHx8IGNvdXJzZVNjaG9vbFllYXJzWzBdIHx8IG51bGw7XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICAvL1xyXG4gICAgLy8gRWRpdCBcInN0YW5kYXJkXCIgc2Nob29sOiBDaG9vc2UgdGFiIHR5cGVcclxuICAgIC8vXHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImtlZF9ib3hlZFwiPlxyXG4gICAgICA8cCBjbGFzc05hbWU9XCJib3gtbWluaS1sYWJlbFwiPntMYEluc3TDpGxsbmluZ2FyIGbDtnIgZmxpa2VuICR7dGFiLm5hbWUgfHwgdGFiLnRhYlRpdGxlfWB9PC9wPlxyXG4gICAgICA8QWxpZ25Ib3Jpem9udGFsPlxyXG4gICAgICAgIDxIb3Jpem9udGFsSXRlbT5cclxuICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJrY2xhYmVsXCI+e0xgRmxpa2VucyB0eXBgfTwvbGFiZWw+XHJcbiAgICAgICAgPC9Ib3Jpem9udGFsSXRlbT5cclxuICAgICAgICA8SG9yaXpvbnRhbEl0ZW0+XHJcbiAgICAgICAgICA8c2VsZWN0XHJcbiAgICAgICAgICAgIHZhbHVlPXt0YWIudGFiQ2xhc3N9XHJcbiAgICAgICAgICAgIG9uQ2hhbmdlPXtldiA9PlxyXG4gICAgICAgICAgICAgIHJlcG8uY291cnNlVGFicy51cGRhdGUodGFiLCBldi50YXJnZXQudmFsdWUgPT09ICdzdWJqZWN0LXRhYicgPyB7XHJcbiAgICAgICAgICAgICAgICB0YWJDbGFzczogZXYudGFyZ2V0LnZhbHVlIGFzIGtleW9mIHR5cGVvZiBDb3Vyc2VUYWJDbGFzc2VzLFxyXG4gICAgICAgICAgICAgICAgc3ViamVjdDogeyBzdWJqZWN0Q29kZSwgc3ViamVjdE5hbWUgfSxcclxuICAgICAgICAgICAgICAgIHRhZ3M6IGNvbXB1dGVDb3Vyc2VJbnN0YW5jZVRhZ3ModGFiLnRhZ3MsIFtzdWJqZWN0Q29kZV0sIFtzY2hvb2xZZWFyXSlcclxuICAgICAgICAgICAgICB9IDoge1xyXG4gICAgICAgICAgICAgICAgICB0YWJDbGFzczogZXYudGFyZ2V0LnZhbHVlIGFzIGtleW9mIHR5cGVvZiBDb3Vyc2VUYWJDbGFzc2VzLFxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgPlxyXG4gICAgICAgICAgICB7VGFiVHlwZXNQZXJDb3Vyc2VUeXBlW2NvdXJzZS50eXBlXS5tYXAodGFiQ2xhc3MgPT5cclxuICAgICAgICAgICAgICA8b3B0aW9uIGtleT17dGFiQ2xhc3N9IHZhbHVlPXt0YWJDbGFzc30+XHJcbiAgICAgICAgICAgICAgICB7Q291cnNlVGFiQ2xhc3Nlc1t0YWJDbGFzc119XHJcbiAgICAgICAgICAgICAgPC9vcHRpb24+KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICA8L3NlbGVjdD5cclxuICAgICAgICA8L0hvcml6b250YWxJdGVtPlxyXG4gICAgICA8L0FsaWduSG9yaXpvbnRhbD5cclxuICAgICAgPFRleHRJbnB1dCBsYWJlbD17TGBGbGlrZW5zIG5hbW5gfSBpZD1cIlRhYlNldHRpbmdzOm5hbWVcIiB2YWx1ZT17dGFiLm5hbWUgfHwgdGFiLnRhYlRpdGxlfVxyXG4gICAgICAgIG9uQ2hhbmdlPXtuYW1lID0+XHJcbiAgICAgICAgICByZXBvLmNvdXJzZVRhYnMudXBkYXRlKHRhYiwge1xyXG4gICAgICAgICAgICBuYW1lLFxyXG4gICAgICAgICAgICB0YWJUaXRsZTogbmFtZSAvLyBEZXByZWNhdGVkLiBUb2RvOiByZW1vdmUuXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH0gLz5cclxuICAgIDwvZGl2PlxyXG4gICk7XHJcbn1cclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgS2VkQmFja2VuZFJlcG8sIFdpdGhHcmFwaHMsIFN0cmlwR3JhcGhzIH0gZnJvbSAna2VkYmFja2VuZC9yZXBvJztcclxuaW1wb3J0IHsgVGFzaywgQ291cnNlQmxvY2ssIENvdXJzZVRhYiB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgS25vd2xlZGdlTWF0cml4IH0gZnJvbSAnLi4vLi4vLi4vLi4vY291cnNlLWJ1aWxkZXIvc3ViLWNvbXBvbmVudHMva25vd2xlZGdlLW1hdHJpeCc7XHJcbmltcG9ydCB7IExhenlDb250ZW50IH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2xhenktY29udGVudCc7XHJcbmltcG9ydCB7IGdldENvdXJzZUNvZGVzRnJvbVRhZ3MgfSBmcm9tICcuLi8uLi8uLi9sb2dpYy9nZXQtY291cnNlLWNvZGVzLWZyb20tdGFncyc7XHJcbmltcG9ydCB7IEwsIHNob3dFcnJvciB9IGZyb20gJy4uLy4uLy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgZ2V0U3RhbmRhcmRDb3Vyc2VzV2l0aE9yZGVyZWRSZXF1aXJlbWVudHMgfSBmcm9tICcuLi8uLi8uLi9sb2dpYy9nZXQtc3RhbmRhcmQtY291cnNlcy13aXRoLW9yZGVyZWQtcmVxdWlyZW1lbnRzJztcclxuaW1wb3J0IHsgcmVzb2x2ZVJlcXVpcmVtZW50T3JkZXIsIFJlcXVpcmVtZW50c0NvbnRhaW5pbmdEb2MgfSBmcm9tICcuLi8uLi8uLi9sb2dpYy9vcmRlcmVkLXJlcXVpcmVtZW50cyc7XHJcbmltcG9ydCB7IFNlbGVjdFJlbGF0ZWREb2NzIH0gZnJvbSAnLi4vLi4vLi4vLi4vY291cnNlLWJ1aWxkZXIvc3ViLWNvbXBvbmVudHMvc2VsZWN0LXJlbGF0ZWQtZG9jcyc7XHJcbmltcG9ydCB7IENoZWNrbGlzdCB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9jaGVja2xpc3QnO1xyXG5pbXBvcnQgeyBPcGVuQ2xvc2VCb3ggfSBmcm9tICcuLi8uLi8uLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvb3Blbi1jbG9zZS1ib3gnO1xyXG5pbXBvcnQgeyBmdXR1cmVBYmlsaXRpZXMgfSBmcm9tICcuLi8uLi8uLi8uLi8uLi9jb250cmFjdHMva2VkLW1vZGVscyc7XHJcbmltcG9ydCB7IFJlcXNSZWZlcmVuY2luZ0RvYyB9IGZyb20gJy4uLy4uLy4uLy4uL2NvdXJzZS1idWlsZGVyL2NvdXJzZXMvYnVzaW5lc3MtbG9naWMnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICByZXBvOiBLZWRCYWNrZW5kUmVwb1xyXG4gIHRhc2s6IFN0cmlwR3JhcGhzPFRhc2s+ICYgUmVxc1JlZmVyZW5jaW5nRG9jXHJcbiAgdGFiSWRzOiBzdHJpbmdbXSxcclxuICB1bmNvdmVyZWRJZHM6IHsgW2lkOiBzdHJpbmddOiB0cnVlIH0sXHJcbiAgYmxvY2tJZDogc3RyaW5nIHwgbnVsbFxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgRWRpdFJlcXVpcmVtZW50cyA9ICh7XHJcbiAgcmVwbyxcclxuICB0YXNrLFxyXG4gIHRhYklkcyxcclxuICB1bmNvdmVyZWRJZHMsXHJcbiAgYmxvY2tJZFxyXG59OiBQcm9wcykgPT4ge1xyXG4gIHJldHVybiA8TGF6eUNvbnRlbnQ+e1xyXG4gICAgYmxvY2tJZCA/XHJcblxyXG4gICAgICByZXBvLmNvdXJzZUJsb2Nrc1xyXG4gICAgICAgIC5pbmNsdWRlKFwiYWJpbGl0aWVzXCIsIFwiY2VudHJhbENvbnRlbnRcIiwgXCJrbm93bGVkZ2VSZXF1aXJlbWVudHNcIilcclxuICAgICAgICAuaWQoYmxvY2tJZClcclxuICAgICAgICAubWFwKGJsb2NrID0+IDxkaXY+XHJcbiAgICAgICAgICA8RWRpdFJlcXVpcmVtZW50c0lubmVyIHsuLi57cmVwbywgdGFzaywgdW5jb3ZlcmVkSWRzLCB0YWJPckJsb2NrOiBibG9ja319IC8+XHJcbiAgICAgICAgPC9kaXY+KSA6XHJcblxyXG4gICAgICByZXBvLmNvdXJzZVRhYnNcclxuICAgICAgICAuaW5jbHVkZShcImFiaWxpdGllc1wiLCBcImNlbnRyYWxDb250ZW50XCIsIFwia25vd2xlZGdlUmVxdWlyZW1lbnRzXCIpXHJcbiAgICAgICAgLmlkcyh0YWJJZHMpXHJcbiAgICAgICAgLnRvVmFsdWUoKS5tYXAodGFicyA9PiA8ZGl2PlxyXG4gICAgICAgICAge3RhYnMubGVuZ3RoID09PSAxID9cclxuICAgICAgICAgICAgPEVkaXRSZXF1aXJlbWVudHNJbm5lciB7Li4ue3JlcG8sIHRhc2ssIHVuY292ZXJlZElkcywgdGFiT3JCbG9jazogdGFic1swXX19IC8+IDpcclxuICAgICAgICAgIHRhYnMubWFwKHRhYiA9PiA8T3BlbkNsb3NlQm94IGtleT17dGFiLmlkfSB0aXRsZT17PGg0Pnt0YWIubmFtZSB8fCB0YWIudGFiVGl0bGV9e1xyXG4gICAgICAgICAgICB0YWIuc3ViamVjdCAmJiB0YWIuc3ViamVjdC5zdWJqZWN0TmFtZSAmJiB0YWIuc3ViamVjdC5zdWJqZWN0TmFtZSAhPT0gKHRhYi5uYW1lIHx8IHRhYi50YWJUaXRsZSkgP1xyXG4gICAgICAgICAgICAgIGAgKCR7dGFiLnN1YmplY3Quc3ViamVjdE5hbWV9KWA6ICcnXHJcbiAgICAgICAgICB9PC9oND59PlxyXG4gICAgICAgICAgICAgIDxFZGl0UmVxdWlyZW1lbnRzSW5uZXIgey4uLntyZXBvLCB0YXNrLCB1bmNvdmVyZWRJZHMsIHRhYk9yQmxvY2s6IHRhYiwgaGFzTXVsdGlwbGVTdWJqZWN0czogdHJ1ZX19IC8+XHJcbiAgICAgICAgICAgIDwvT3BlbkNsb3NlQm94PiApXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICA8L2Rpdj4pXHJcbiAgfTwvTGF6eUNvbnRlbnQ+XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBFZGl0UmVxdWlyZW1lbnRzSW5uZXIgPSAoe1xyXG4gIHRhYk9yQmxvY2s6IHRhYk9yQmxvY2ssXHJcbiAgcmVwbyxcclxuICB0YXNrLFxyXG4gIHVuY292ZXJlZElkcyxcclxuICBoYXNNdWx0aXBsZVN1YmplY3RzXHJcbn06IHtcclxuICByZXBvOiBLZWRCYWNrZW5kUmVwb1xyXG4gIHRhc2s6IFN0cmlwR3JhcGhzPFRhc2s+ICYgUmVxc1JlZmVyZW5jaW5nRG9jXHJcbiAgdW5jb3ZlcmVkSWRzOiB7IFtpZDogc3RyaW5nXTogdHJ1ZSB9LFxyXG4gIHRhYk9yQmxvY2s6XHJcbiAgICBXaXRoR3JhcGhzPENvdXJzZVRhYiwgXCJhYmlsaXRpZXNcIiB8IFwiY2VudHJhbENvbnRlbnRcIiB8IFwia25vd2xlZGdlUmVxdWlyZW1lbnRzXCI+IHxcclxuICAgIFdpdGhHcmFwaHM8Q291cnNlQmxvY2ssIFwiYWJpbGl0aWVzXCIgfCBcImNlbnRyYWxDb250ZW50XCIgfCBcImtub3dsZWRnZVJlcXVpcmVtZW50c1wiPixcclxuICBoYXNNdWx0aXBsZVN1YmplY3RzPzogYm9vbGVhblxyXG59KSA9PiA8TGF6eUNvbnRlbnQ+e1xyXG4gIHJlc29sdmVSZXF1aXJlbWVudE9yZGVyKHRhYk9yQmxvY2spLm1hcCh0YWIgPT4ge1xyXG4gICAgY29uc3Qgc3ViamVjdE5hbWUgPSAndHlwZScgaW4gdGFiICYmIHRhYi5zdWJqZWN0ICYmIHRhYi5zdWJqZWN0LnN1YmplY3ROYW1lO1xyXG4gICAgcmV0dXJuIDw+XHJcbiAgICAgIHt0YXNrLnRhc2tUeXBlICE9PSAnZXhlcmNpc2UnICYmIDxkaXYgY2xhc3NOYW1lPVwia2VkX2JveGVkXCI+XHJcbiAgICAgICAgPGgzPntMYFbDpGxqIGt1bnNrYXBza3JhdmB9PC9oMz5cclxuICAgICAgICA8cD5cclxuICAgICAgICAgIHtMYE1hcmtlcmEgZGUga3Vuc2thcHNrcmF2IHNvbSBkaW4gdXBwZ2lmdCB0w6Rja2VyLmB9XHJcbiAgICAgICAgPC9wPlxyXG4gICAgICAgIDxLbm93bGVkZ2VNYXRyaXhcclxuICAgICAgICAgIGtub3dsZWRnZVJlcXVpcmVtZW50cz17dGFiLmtub3dsZWRnZVJlcXVpcmVtZW50c31cclxuICAgICAgICAgIG1hcmtlZElkcz17dGFzay5rbm93bGVkZ2VSZXF1aXJlbWVudHMubWFwKCh7IGlkIH0pID0+IGlkKX1cclxuICAgICAgICAgIGV4cGxhaW5lZFJlcXVpcmVtZW50cz17dGFzay5leHBsYWluZWRSZXF1aXJlbWVudHMgfHwge319XHJcbiAgICAgICAgICBpZHNUb01hcmtOb3RPaz17dW5jb3ZlcmVkSWRzfVxyXG4gICAgICAgICAgbWFya01vZGU9e3RydWV9XHJcbiAgICAgICAgICBtaWdyYXRlZElkcz17dGFzayAmJiB0YXNrLm1pZ3JhdGVkVGV4dHMgJiYgdGFzay5taWdyYXRlZFRleHRzLmtub3dsZWRnZVJlcXVpcmVtZW50c31cclxuICAgICAgICAgIG9uRXhwbGFpbmVkUmVxdWlyZW1lbnRzQ2hhbmdlZD17KHJlcXVpcmVtZW50SWQsIHRleHQpID0+XHJcbiAgICAgICAgICAgIHJlcG8udGFza3MudXBkYXRlKHRhc2ssIHtcclxuICAgICAgICAgICAgICBleHBsYWluZWRSZXF1aXJlbWVudHM6IHtcclxuICAgICAgICAgICAgICAgIC4uLnRhc2suZXhwbGFpbmVkUmVxdWlyZW1lbnRzLFxyXG4gICAgICAgICAgICAgICAgW3JlcXVpcmVtZW50SWRdOiB0ZXh0XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KX1cclxuICAgICAgICAgIG9uTWFya0NoYW5nZWQ9eyhtYXJrZWRJZDogc3RyaW5nLCBpc01hcmtlZDogYm9vbGVhbikgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtYXJrZWREb2MgPSB0YWIua25vd2xlZGdlUmVxdWlyZW1lbnRzLmZpbHRlcigoeyBpZCB9KSA9PiBpZCA9PT0gbWFya2VkSWQpWzBdO1xyXG4gICAgICAgICAgICBpZiAoaXNNYXJrZWQpIHtcclxuICAgICAgICAgICAgICBpZiAoaGFzTXVsdGlwbGVTdWJqZWN0cykge1xyXG4gICAgICAgICAgICAgICAgLy8gTWlzc2lvbiB0YWJzIG5lZWRzIHRvIHN0b3JlIHRoZSBzdWJqZWN0IG5hbWUgY29ubmVjdGVkIHRvIGVhY2gga25vd2xlZGdlIHJlcXVpcmVtZW50OlxyXG4gICAgICAgICAgICAgICAgcmVwby50YXNrcy51cGRhdGUodGFzaywge2lkc1RvU3ViamVjdE1hcDogey4uLnRhc2suaWRzVG9TdWJqZWN0TWFwLCBbbWFya2VkSWRdOiBzdWJqZWN0TmFtZX19KTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVwby50YXNrcy51cGRhdGUodGFzaywge2lkc1RvU3ViamVjdE1hcDogdW5kZWZpbmVkfSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHJlcG8udGFza3MuYWRkUmVsYXRlZCh0YXNrLmlkLCBcImtub3dsZWRnZVJlcXVpcmVtZW50c1wiLCBtYXJrZWREb2MpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGlmIChoYXNNdWx0aXBsZVN1YmplY3RzKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBNaXNzaW9uIHRhYnMgbmVlZHMgdG8gZGVsZXRlIHRoZSBzdWJqZWN0IG5hbWUgY29ubmVjdGVkIHRvIGVhY2gga25vd2xlZGdlIHJlcXVpcmVtZW50OlxyXG4gICAgICAgICAgICAgICAgcmVwby50YXNrcy51cGRhdGUodGFzaywge2lkc1RvU3ViamVjdE1hcDogey4uLnRhc2suaWRzVG9TdWJqZWN0TWFwLCBbbWFya2VkSWRdOiB1bmRlZmluZWR9fSk7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlcG8udGFza3MudXBkYXRlKHRhc2ssIHtpZHNUb1N1YmplY3RNYXA6IHVuZGVmaW5lZH0pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICByZXBvLnRhc2tzLnJlbW92ZVJlbGF0ZWQodGFzay5pZCwgXCJrbm93bGVkZ2VSZXF1aXJlbWVudHNcIiwgbWFya2VkRG9jKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfX1cclxuICAgICAgICAvPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgfVxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInN2LWh0bWwtcG9ydGxldCBzdi1wb3J0bGV0XCI+XHJcbiAgICAgICAgPFNlbGVjdFJlbGF0ZWREb2NzXHJcbiAgICAgICAgICB0aXRsZT17TGBWw6RsaiBmw7ZybcOlZ29yYH1cclxuICAgICAgICAgIG9wdGlvbnM9e3RhYi5hYmlsaXRpZXN9XHJcbiAgICAgICAgICBtYXJrZWRJZHM9e3Rhc2suYWJpbGl0aWVzLm1hcChhID0+IGEuaWQpfVxyXG4gICAgICAgICAgbWFya01vZGU9e3RydWV9XHJcbiAgICAgICAgICBtaWdyYXRlZElkcz17dGFzayAmJiB0YXNrLm1pZ3JhdGVkVGV4dHMgJiYgdGFzay5taWdyYXRlZFRleHRzLmFiaWxpdGllc31cclxuICAgICAgICAgIG9uTWFya0NoYW5nZWQ9eyhtYXJrZWRJZCwgaXNNYXJrZWQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbWFya2VkRG9jID0gdGFiLmFiaWxpdGllcy5maWx0ZXIoYSA9PiBhLmlkID09PSBtYXJrZWRJZClbMF07XHJcbiAgICAgICAgICAgIGlmIChpc01hcmtlZCkge1xyXG4gICAgICAgICAgICAgIHJlcG8udGFza3MuYWRkUmVsYXRlZCh0YXNrLmlkLCBcImFiaWxpdGllc1wiLCBtYXJrZWREb2MpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHJlcG8udGFza3MucmVtb3ZlUmVsYXRlZCh0YXNrLmlkLCBcImFiaWxpdGllc1wiLCBtYXJrZWREb2MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9fVxyXG4gICAgICAgIC8+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInN2LWh0bWwtcG9ydGxldCBzdi1wb3J0bGV0XCI+XHJcbiAgICAgICAgPFNlbGVjdFJlbGF0ZWREb2NzXHJcbiAgICAgICAgICB0aXRsZT17TGBWw6RsaiBjZW50cmFsdCBpbm5laMOlbGxgfVxyXG4gICAgICAgICAgb3B0aW9ucz17dGFiLmNlbnRyYWxDb250ZW50fVxyXG4gICAgICAgICAgbWFya2VkSWRzPXt0YXNrLmNlbnRyYWxDb250ZW50Lm1hcChjYyA9PiBjYy5pZCl9XHJcbiAgICAgICAgICBtYXJrTW9kZT17dHJ1ZX1cclxuICAgICAgICAgIG1pZ3JhdGVkSWRzPXt0YXNrICYmIHRhc2subWlncmF0ZWRUZXh0cyAmJiB0YXNrLm1pZ3JhdGVkVGV4dHMuY2VudHJhbENvbnRlbnR9XHJcbiAgICAgICAgICBvbk1hcmtDaGFuZ2VkPXsobWFya2VkSWQsIGlzTWFya2VkKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1hcmtlZERvYyA9IHRhYi5jZW50cmFsQ29udGVudC5maWx0ZXIoYSA9PiBhLmlkID09PSBtYXJrZWRJZClbMF07XHJcbiAgICAgICAgICAgIGlmIChpc01hcmtlZCkge1xyXG4gICAgICAgICAgICAgIHJlcG8udGFza3MuYWRkUmVsYXRlZCh0YXNrLmlkLCBcImNlbnRyYWxDb250ZW50XCIsIG1hcmtlZERvYyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgcmVwby50YXNrcy5yZW1vdmVSZWxhdGVkKHRhc2suaWQsIFwiY2VudHJhbENvbnRlbnRcIiwgbWFya2VkRG9jKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfX1cclxuICAgICAgICAvPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdi1odG1sLXBvcnRsZXQgc3YtcG9ydGxldFwiPlxyXG4gICAgICAgIDxPcGVuQ2xvc2VCb3ggY2xhc3NOYW1lPVwibGFyZ2VyXCIgdGl0bGU9ezxwPntMYFbDpGxqIGZyYW10aWRzZsO2cm3DpWdvcmB9PC9wPn0+XHJcbiAgICAgICAgICA8YnIgLz5cclxuICAgICAgICAgIDxDaGVja2xpc3RcclxuICAgICAgICAgICAgYXZhaWxhYmxlPXtmdXR1cmVBYmlsaXRpZXMubWFwKGZhID0+ICh7IG5hbWU6IGZhLCBrZXk6IGZhIH0pKX1cclxuICAgICAgICAgICAgc2VsZWN0ZWQ9e3Rhc2suZnV0dXJlQWJpbGl0aWVzfVxyXG4gICAgICAgICAgICBvbkNoYW5nZT17c2VsZWN0ZWRGYXMgPT4gcmVwby50YXNrcy51cGRhdGUodGFzaywgeyBmdXR1cmVBYmlsaXRpZXM6IHNlbGVjdGVkRmFzIH0pfVxyXG4gICAgICAgICAgLz5cclxuICAgICAgICA8L09wZW5DbG9zZUJveD5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8Lz47XHJcbiAgfSlcclxufTwvTGF6eUNvbnRlbnQ+IiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgVGFzaywgTGVhcm5pbmdHb2Fsc0NvbnRlbnQsIENvdXJzZUluc3RhbmNlLCBDb3Vyc2VUYWIgfSBmcm9tIFwia2VkYmFja2VuZC9tb2RlbHNcIjtcclxuaW1wb3J0IHsgS2VkQmFja2VuZFJlcG8sIFdpdGhHcmFwaHMsIFN0cmlwR3JhcGhzIH0gZnJvbSAna2VkYmFja2VuZC9yZXBvJztcclxuaW1wb3J0IHsgVGFza01pZ3JhdGlvbkJveCB9IGZyb20gJy4uLy4uLy4uLy4uL2NvdXJzZS1idWlsZGVyL21vZGFsLXBhZ2VzL2VkaXQtdGFzay90YXNrLW1pZ3JhdGlvbi1ib3gnO1xyXG5pbXBvcnQgUmVhY3REYXRlUGlja2VyIGZyb20gJ3JlYWN0LWRhdGVwaWNrZXInO1xyXG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcbmltcG9ydCB7IEwgfSBmcm9tICcuLi8uLi8uLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IENoZWNrbGlzdCB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9jaGVja2xpc3QnO1xyXG5pbXBvcnQgeyBMYXp5Q29udGVudCB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9sYXp5LWNvbnRlbnQnO1xyXG5pbXBvcnQgeyBGaWVsZExpbWl0cyB9IGZyb20gJy4uLy4uLy4uL2NvbW1vbi9maWVsZC1saW1pdHMnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICB0YXNrOiBUYXNrO1xyXG4gIHdyaXRlQWNjZXNzOiBib29sZWFuO1xyXG4gIHJlcG86IEtlZEJhY2tlbmRSZXBvO1xyXG4gIGNvbnRlbnRJZDogc3RyaW5nO1xyXG4gIHRhYjogU3RyaXBHcmFwaHM8Q291cnNlVGFiPjtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IEJhc2ljRWRpdGFibGVUYXNrRmllbGRzID0gKHt0YXNrLCB3cml0ZUFjY2VzcywgcmVwbywgY29udGVudElkLCB0YWJ9OiBQcm9wcykgPT4ge1xyXG4gIGNvbnN0IHRhYkNsYXNzID0gdGFiID8gdGFiLnRhYkNsYXNzIDogbnVsbDsgLy8gdGFiIGlzIHVuZGVmaW5lZCBvbiBzdGVwIGNvdXJzZXMuIEJ1dCB0aGVyZSBhcmUgbm8gbWlzc2lvbiB0YWJzIG9uIHN0ZXAgY291cnNlcy5cclxuICByZXR1cm4gPGRpdj5cclxuICAgIDxkaXYgY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbCBzcGFjZWRcIj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICA8cD57dGFiQ2xhc3MgPT09ICdtaXNzaW9uLXRhYicgP1xyXG4gICAgICAgICAgTGBVcHBkcmFnZXRzIG5hbW46YCA6XHJcbiAgICAgICAgICBMYFVwcGdpZnRlbnMgbmFtbjpgfTwvcD5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgPGlucHV0IGF1dG9Gb2N1cyB0eXBlPVwidGV4dFwiIHNpemU9ezM1fSB2YWx1ZT17dGFzay5uYW1lfSBkaXNhYmxlZD17IXdyaXRlQWNjZXNzfSByZWFkT25seT17IXdyaXRlQWNjZXNzfSBvbkNoYW5nZT17ZXYgPT4ge1xyXG4gICAgICAgICAgcmVwby50YXNrcy51cGRhdGUodGFzaywge25hbWU6IGV2LnRhcmdldC52YWx1ZS5zdWJzdHIoMCwgRmllbGRMaW1pdHMuTUFYX0NIQVJTX1RBU0tfTkFNRVMpfSk7XHJcbiAgICAgICAgfSB9IC8+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcblxyXG4gICAge3Rhc2subWlncmF0ZWRUZXh0cyAmJiB3cml0ZUFjY2VzcyAmJiA8VGFza01pZ3JhdGlvbkJveCB0YXNrPXt0YXNrfSBjb3Vyc2U9e251bGx9IHVwZGF0ZUxpbms9eyhpZCwgbGlua09yVW5saW5rKSA9PlxyXG4gICAgICAgIHt0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWQgeWV0XCIpO319IC8+fVxyXG4gICAgXHJcbiAgICB7dGFiQ2xhc3MgIT09ICdtaXNzaW9uLXRhYicgJiYgPGRpdiBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsIHNwYWNlZFwiPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgIDxwPntMYEzDpHJhbmRlbcOlbDpgfTwvcD5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgPExhenlDb250ZW50PntyZXBvLmNvdXJzZUNvbnRlbnRzLmlkKGNvbnRlbnRJZCkubWFwKGNvbnRlbnQgPT4ge1xyXG4gICAgICAgICAgaWYgKGNvbnRlbnQudHlwZSAhPT0gJ2xlYXJuaW5nLWdvYWxzJykgcmV0dXJuIDxwPntMYEVqIHZhbGJhcnRgfTwvcD47XHJcbiAgICAgICAgICBjb25zdCB7aGFzQ29tbW9uTGVhcm5pbmdHb2Fsc30gPSAoY29udGVudCBhcyBMZWFybmluZ0dvYWxzQ29udGVudCk7XHJcbiAgICAgICAgICBjb25zdCBsZWFybmluZ0dvYWxzID0gKGNvbnRlbnQgYXMgTGVhcm5pbmdHb2Fsc0NvbnRlbnQpLmNvbW1vbkxlYXJuaW5nR29hbHM7XHJcbiAgICAgICAgICBjb25zdCBhdmFpbGFibGVHb2FscyA9IGxlYXJuaW5nR29hbHMubWFwKGxnID0+IGxnLnRyaW0oKSkuZmlsdGVyKGxnID0+IGxnKVxyXG4gICAgICAgICAgICAgIC5tYXAobGcgPT4gKHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IGxnLFxyXG4gICAgICAgICAgICAgICAga2V5OiBsZ1xyXG4gICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgIHJldHVybiA8Q2hlY2tsaXN0XHJcbiAgICAgICAgICAgICAgYXZhaWxhYmxlPXthdmFpbGFibGVHb2Fsc31cclxuICAgICAgICAgICAgICBzZWxlY3RlZD17dGFzay5sZWFybmluZ0dvYWwuc3BsaXQoJ1xcbicpfVxyXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZ29hbHMsIGdvYWwpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChoYXNDb21tb25MZWFybmluZ0dvYWxzKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJlcG8udGFza3MudXBkYXRlKHRhc2ssIHtsZWFybmluZ0dvYWw6IGdvYWxzLmpvaW4oJ1xcbicpfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICByZXBvLnRhc2tzLnVwZGF0ZSh0YXNrLCB7bGVhcm5pbmdHb2FsOiBnb2FsfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgIC8+O1xyXG4gICAgICAgIH0pfTwvTGF6eUNvbnRlbnQ+ICAgICAgXHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+fVxyXG4gICAgXHJcblxyXG4gICAgPD48aDI+e3RhYkNsYXNzID09PSAnbWlzc2lvbi10YWInID8gTGBVcHBkcmFnc3R5cGAgOiBMYFVwcGdpZnRzdHlwYH08L2gyPlxyXG4gICAgICA8Q2hlY2tsaXN0IGF2YWlsYWJsZT17W1xyXG4gICAgICAgIHRhYkNsYXNzICE9PSAnbWlzc2lvbi10YWInICYmIHtuYW1lOiBMYMOWdm5pbmdzdXBwZ2lmdGAsIGtleTogJ2V4ZXJjaXNlJ30sXHJcbiAgICAgICAge25hbWU6IExgVXBwZ2lmdGAsIGtleTogXCJ0YXNrXCJ9LFxyXG4gICAgICAgIHtuYW1lOiBMYElubMOkbW5pbmdzdXBwZ2lmdGAsIGtleTogJ2Fzc2lnbm1lbnQnfSxcclxuICAgICAgXS5maWx0ZXIoeD0+eCl9XHJcbiAgICAgICAgc2VsZWN0ZWQ9e1t0YXNrLnRhc2tUeXBlXX1cclxuICAgICAgICBvbkNoYW5nZT17KF8sIGNsaWNrZWRLZXkpID0+IHJlcG8udGFza3MudXBkYXRlKHRhc2ssIHt0YXNrVHlwZTogY2xpY2tlZEtleSBhcyBhbnl9KX1cclxuICAgICAgLz5cclxuICAgICAge3Rhc2sudGFza1R5cGUgPT09ICdhc3NpZ25tZW50JyAmJiA8PlxyXG4gICAgICAgIDxwPklubMOkbW5pbmdzZGF0dW08L3A+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgICA8UmVhY3REYXRlUGlja2VyIG5leHRNb250aEJ1dHRvbkxhYmVsPVwiXCIgc2hvd1dlZWtOdW1iZXJzPXt0cnVlfSBwcmV2aW91c01vbnRoQnV0dG9uTGFiZWw9XCJcIiBzZWxlY3RlZD17dGFzay5kZWFkbGluZSAmJiBtb21lbnQodGFzay5kZWFkbGluZSkudG9EYXRlKCl9IGRhdGVGb3JtYXQ9XCJ5eXl5LU1NLWRkXCIgbG9jYWxlPXtcInN2XCJ9IHBvcHBlclBsYWNlbWVudD1cImJvdHRvbS1zdGFydFwiIG9uQ2hhbmdlPXt2YWx1ZSA9PiB7XHJcbiAgICAgICAgICAgICAgcmVwby50YXNrcy51cGRhdGUodGFzaywge2RlYWRsaW5lOiBtb21lbnQodmFsdWUpLmZvcm1hdChcIllZWVktTU0tRERcIil9ICk7XHJcbiAgICAgICAgICAgIH0gfSAvPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgICB7dGFzay5kZWFkbGluZSAmJiA8YSBjbGFzc05hbWU9XCJkZWxldGVEYXRlXCIgaHJlZj1cIiNcIiB0aXRsZT1cIlRhIGJvcnQgaW5sw6RtbmluZ3NkYXR1bVwiIG9uQ2xpY2s9e2V2ID0+IHtcclxuICAgICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgIHJlcG8udGFza3MudXBkYXRlKHRhc2ssIHtkZWFkbGluZTogbnVsbH0pO1xyXG4gICAgICAgICAgICB9fT48L2E+fVxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YXNrQ29udGFpbmVyXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWxcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIiBvbkNsaWNrPXsoKT0+XHJcbiAgICAgICAgICAgIHJlcG8udGFza3MudXBkYXRlKHRhc2ssIHtzZW5kVG9Vcmt1bmQ6IHRhc2suc2VuZFRvVXJrdW5kID09IG51bGwgPyBmYWxzZSA6ICF0YXNrLnNlbmRUb1Vya3VuZH0pfT5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtcImNoZWNrQm94XCIgKyAoKHRhc2suc2VuZFRvVXJrdW5kID09IG51bGwgPyB0cnVlIDogdGFzay5zZW5kVG9Vcmt1bmQpID8gXCIgY2hlY2tlZFwiIDogXCJcIil9PjwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5WZXJpZnkgYXNzaWdubWVudHMgd2l0aCBVcmt1bmQ8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8Lz59XHJcbiAgICA8Lz5cclxuICA8L2Rpdj47XHJcbn1cclxuIiwiaW1wb3J0IFJlYWN0LCB7IHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRSZXBvLCBTdHJpcEdyYXBocywgV2l0aEdyYXBocyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IFRhc2ssIENvdXJzZUluc3RhbmNlLCBTdGVwQ291cnNlVGFiLCBDb3Vyc2VUYWIsIFRoZW1lQ291cnNlVGFiIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBGb3JtRmllbGQgfSBmcm9tICcuLi8uLi8uLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvZm9ybS1maWVsZCc7XHJcbmltcG9ydCB7IFRleHRJbnB1dCB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9mb3JtLWZpZWxkLXRleHQtaW5wdXQnO1xyXG5pbXBvcnQgeyBMLCBjb21wYXJlUHJvcHMgfSBmcm9tICcuLi8uLi8uLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IEJhc2ljRWRpdGFibGVUYXNrRmllbGRzIH0gZnJvbSAnLi9iYXNpYy1lZGl0YWJsZS10YXNrLWZpZWxkcyc7XHJcbmltcG9ydCB7IFRhc2tGb290ZXJCdXR0b25zIH0gZnJvbSAnLi90YXNrLWZvb3Rlci1idXR0b25zJztcclxuaW1wb3J0IHsgSW50cm9kdWN0aW9uVGV4dEVkaXRvciB9IGZyb20gJy4vaW50cm9kdWN0aW9uLXRleHQtZWRpdG9yJztcclxuaW1wb3J0IHsgVGFza0Rlc2NyaXB0aW9uRWRpdG9yIH0gZnJvbSAnLi90YXNrLWRlc2NyaXB0aW9uLWVkaXRvcic7XHJcbmltcG9ydCB7IFRhc2tXb3JraW5nUHJvY2VkdXJlRWRpdG9yIH0gZnJvbSAnLi90YXNrLXdvcmtpbmctcHJvY2VkdXJlLWVkaXRvcic7XHJcbmltcG9ydCB7IFRhc2tFbWJlZGRlZEhUTUxFZGl0b3IgfSBmcm9tICcuL3Rhc2stZW1iZWRkZWQtaHRtbC1lZGl0b3InO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICByZXBvOiBLZWRCYWNrZW5kUmVwbztcclxuICBjb3Vyc2U6IFdpdGhHcmFwaHM8Q291cnNlSW5zdGFuY2UsIFwidGFic1wiIHwgXCJibG9ja3NcIj47XHJcbiAgdGFiOiBDb3Vyc2VUYWI7XHJcbiAgdGFiSWQ6IHN0cmluZztcclxuICBjb250ZW50SWQ6IHN0cmluZztcclxuICB3cml0ZUFjY2VzczogYm9vbGVhbjtcclxuICBkcmFmdElkOiBzdHJpbmc7XHJcbiAgc2Nob29sOiBzdHJpbmc7XHJcbiAgdGFzazogU3RyaXBHcmFwaHM8VGFzaz47XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBFZGl0VGFza0Zvcm0gPSAoe3JlcG8sIGNvdXJzZSwgZHJhZnRJZCwgdGFiSWQsIHRhYiwgY29udGVudElkLCB3cml0ZUFjY2VzcywgdGFzaywgc2Nob29sfTogUHJvcHMpID0+IHtcclxuICByZXR1cm4gPD5cclxuICAgIDxCYXNpY0VkaXRhYmxlVGFza0ZpZWxkcyByZXBvPXtyZXBvfSB0YXNrPXt0YXNrfSB3cml0ZUFjY2Vzcz17d3JpdGVBY2Nlc3N9IGNvbnRlbnRJZD17Y29udGVudElkfSB0YWI9e3RhYn0gLz5cclxuICAgIDxJbnRyb2R1Y3Rpb25UZXh0RWRpdG9yIHJlcG89e3JlcG99IHRhc2s9e3Rhc2t9IHdyaXRlQWNjZXNzPXt3cml0ZUFjY2Vzc30gLz5cclxuICAgIDxUYXNrRGVzY3JpcHRpb25FZGl0b3Igd3JpdGVBY2Nlc3M9e3dyaXRlQWNjZXNzfSB0YXNrPXt0YXNrfSByZXBvPXtyZXBvfSAvPlxyXG4gICAgPFRhc2tXb3JraW5nUHJvY2VkdXJlRWRpdG9yIHdyaXRlQWNjZXNzPXt3cml0ZUFjY2Vzc30gdGFzaz17dGFza30gcmVwbz17cmVwb30gc3RlcD17dGFiICYmIHRhYi50eXBlID09PSAnc3RlcC1jb3Vyc2UtdGFiJyAmJiB0YWIuc3RlcE5vfSAvPlxyXG4gICAgPFRhc2tFbWJlZGRlZEhUTUxFZGl0b3Igd3JpdGVBY2Nlc3M9e3dyaXRlQWNjZXNzfSB0YXNrPXt0YXNrfSByZXBvPXtyZXBvfSAvPlxyXG4gICAgPFRhc2tGb290ZXJCdXR0b25zIHJlcG89e3JlcG99IHRhc2s9e3Rhc2t9IGNvdXJzZUlkPXtjb3Vyc2UuaWR9IGRyYWZ0SWQ9e2RyYWZ0SWR9IHRhYklkPXt0YWJJZH0gY29udGVudElkPXtjb250ZW50SWR9IHNjaG9vbD17c2Nob29sfSAvPlxyXG4gIDwvPjtcclxufVxyXG5cclxuLypcclxuXHJcbiAgKiBJbnRlIGt1bm5hIMOkbmRyYSBvcmRuaW5nIHDDpSBsw6VzdGEgcnV0b3Igb20gaW50ZSBpc0tlZFN0YWZmKCkuXHJcbiAgKiBJbmdlbiBsw6RnZyB0aWxsIHVwcGdpZnRzLWtuYXBwIG9tIGludGUgZWRpdE1vZGUuXHJcbiAgKiBcclxuICAqIFJlZGlnZXJhIHVwcGdpZnRzaW5uZWjDpWxsXHJcbiAgKiBMw6VzIGzDpHJhbmRlbcOlbGVuIHRpbGwgYWRtaW4gYWxsdGlkXHJcbiAgKiBLdW5uYSBrbGlja2EgaW4gc2lnIHDDpSB1cHBnaWZ0ZW5cclxuICAqIEt1bm5hIHRhIGJvcnQgdXBwZ2lmdFxyXG4gICogS3VubmEgbm9sbHN0w6RsbGEgw6RuZHJpbmdhciBmw7ZyIHNrb2xhblxyXG5cclxuKi8iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kUmVwbyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IFRhc2sgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IEwgfSBmcm9tICcuLi8uLi8uLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IFd5c2l3eWcgfSBmcm9tICcuLi8uLi8uLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvd3lzaXd5Zyc7XHJcbmltcG9ydCBhY3Rpb25zX3N3ZWRpc2ggZnJvbSAnLi4vLi4vLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL3d5c2l3eWcvYWN0aW9ucy1zdic7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHJlcG86IEtlZEJhY2tlbmRSZXBvXHJcbiAgdGFzazogVGFza1xyXG4gIHdyaXRlQWNjZXNzOiBib29sZWFuXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBJbnRyb2R1Y3Rpb25UZXh0RWRpdG9yID0gKHtyZXBvLCB0YXNrLCB3cml0ZUFjY2Vzc306IFByb3BzKT0+IDw+XHJcbiAgPGg0PntMYEludHJvdGV4dGB9PC9oND5cclxuICA8cCBjbGFzc05hbWU9XCJzdWJIZWFkZXJcIj4oU2tyaXYgZW4gaW50cm9kdWt0aW9uIHRpbGwgdXBwZ2lmdGVuKTwvcD5cclxuICA8V3lzaXd5Z1xyXG4gICAgYWN0aW9ucz17W1xyXG4gICAgICBcImJvbGRcIixcclxuICAgICAgXCJpdGFsaWNcIixcclxuICAgICAgXCJ1bmRlcmxpbmVcIixcclxuICAgICAgXCJsaW5rXCIsXHJcbiAgICAgIFwiaW1hZ2VcIlxyXG4gICAgXX1cclxuICAgIGRlZmF1bHRBY3Rpb25zPXthY3Rpb25zX3N3ZWRpc2h9XHJcbiAgICByZWFkT25seT17IXdyaXRlQWNjZXNzfVxyXG4gICAgaHRtbD17dGFzay5jb250ZW50IHx8IFwiXCJ9XHJcbiAgICBvbkNoYW5nZT17aHRtbCA9PiByZXBvLnRhc2tzLnVwZGF0ZSh0YXNrLCB7Y29udGVudDogaHRtbH0pfSAgLz5cclxuPC8+XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgVGFzayB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgV3lzaXd5ZyB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy93eXNpd3lnJztcclxuaW1wb3J0IGFjdGlvbnNfc3dlZGlzaCBmcm9tICcuLi8uLi8uLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvd3lzaXd5Zy9hY3Rpb25zLXN2JztcclxuaW1wb3J0IHsgS2VkQmFja2VuZFJlcG8gfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyB0YXNrVHlwZUhlYWRpbmdzIH0gZnJvbSAnLi4vdGV4dHMnO1xyXG5pbXBvcnQgeyBGaWVsZExpbWl0cyB9IGZyb20gJy4uLy4uLy4uL2NvbW1vbi9maWVsZC1saW1pdHMnO1xyXG5pbXBvcnQgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBUYXNrRGVzY3JpcHRpb25FZGl0b3IoeyB3cml0ZUFjY2VzcywgdGFzaywgcmVwbyB9OiB7IHdyaXRlQWNjZXNzOiBib29sZWFuLCB0YXNrOiBUYXNrLCByZXBvOiBLZWRCYWNrZW5kUmVwbyB9KSB7XHJcbiAgICBjb25zdCBbbnVtQ2hhcnMsIHNldE51bUNoYXJzXSA9IHVzZVN0YXRlKDApO1xyXG4gICAgcmV0dXJuIDw+XHJcbiAgICAgICAgPGg0Pnt0YXNrVHlwZUhlYWRpbmdzW3Rhc2sudGFza1R5cGVdIHx8IExgVXBwZ2lmdGB9PC9oND5cclxuICAgICAgICA8cCBjbGFzc05hbWU9XCJzdWJIZWFkZXJcIj57TGAoU2tyaXYgaW4gZW4ga29ydCBmw7Zya2xhcmluZywgbWF4ICR7RmllbGRMaW1pdHMuTUFYX0NIQVJTX1RBU0tfSU5UUk9fVEVYVH0gdGVja2VuLCB2YWQgdXBwZ2lmdGVuIGfDpXIgdXQgcMOlLilgfTwvcD5cclxuICAgICAgICA8V3lzaXd5ZyBhY3Rpb25zPXtbXHJcbiAgICAgICAgICAgIFwiYm9sZFwiLFxyXG4gICAgICAgIF19XHJcbiAgICAgICAgICAgIGRlZmF1bHRBY3Rpb25zPXthY3Rpb25zX3N3ZWRpc2h9XHJcbiAgICAgICAgICAgIHJlYWRPbmx5PXshd3JpdGVBY2Nlc3N9XHJcbiAgICAgICAgICAgIGh0bWw9e3Rhc2suZGVzY3JpcHRpb24gfHwgXCJcIn1cclxuICAgICAgICAgICAgbWF4Q2hhcnM9e0ZpZWxkTGltaXRzLk1BWF9DSEFSU19UQVNLX0lOVFJPX1RFWFR9XHJcbiAgICAgICAgICAgIHJlcG9ydE51bUNoYXJzPXtudW1DaGFycyA9PiBzZXROdW1DaGFycyhudW1DaGFycyl9XHJcbiAgICAgICAgICAgIG9uQ2hhbmdlPXtodG1sID0+IHtcclxuICAgICAgICAgICAgICAgIHJlcG8udGFza3MudXBkYXRlKHRhc2ssIHsgZGVzY3JpcHRpb246IGh0bWwgfSk7XHJcbiAgICAgICAgICAgIH19XHJcbiAgICAgICAgLz5cclxuICAgICAgICA8ZGl2IHN0eWxlPXt7dGV4dEFsaWduOiAncmlnaHQnLCBvcGFjaXR5OiAwLjcsIGZvbnRTaXplOiAnOHB0J319PntMYCR7bnVtQ2hhcnN9IGF2ICR7RmllbGRMaW1pdHMuTUFYX0NIQVJTX1RBU0tfSU5UUk9fVEVYVH1gfTwvZGl2PlxyXG4gICAgPC8+O1xyXG59XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IFRhc2sgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRSZXBvIH0gZnJvbSAna2VkYmFja2VuZC9yZXBvJztcclxuaW1wb3J0IHsgaXNLZWRTdGFmZiB9IGZyb20gJy4uLy4uLy4uL2xvZ2ljL2lzLWtlZC1zdGFmZic7XHJcbmltcG9ydCB7IEwgfSBmcm9tICcuLi8uLi8uLi8uLi8uLi91dGlscy91dGlscyc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHdyaXRlQWNjZXNzOiBib29sZWFuXHJcbiAgdGFzazogVGFza1xyXG4gIHJlcG86IEtlZEJhY2tlbmRSZXBvXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBUYXNrRW1iZWRkZWRIVE1MRWRpdG9yID0gKHt0YXNrLCByZXBvfTogUHJvcHMpID0+IGlzS2VkU3RhZmYoKSA/IHRhc2suZW1iZWRkZWRIdG1sID8gPGRpdj5cclxuICA8aDQ+e0xgSW5iw6RkZGF0IG1hdGVyaWFsYH08L2g0PlxyXG4gIDxwPntMYEtsaXBwIGluIEhUTUwga29kIG5lZGFuYH08L3A+XHJcbiAgPHRleHRhcmVhIHN0eWxlPXt7d2lkdGg6IFwiMTAwJVwiLCBoZWlnaHQ6IFwiMTAwcHhcIn19XHJcbiAgICB2YWx1ZT17dGFzay5lbWJlZGRlZEh0bWx9XHJcbiAgICBvbkNoYW5nZT17ZXYgPT4gcmVwby50YXNrcy51cGRhdGUodGFzaywge2VtYmVkZGVkSHRtbDogZXYudGFyZ2V0LnZhbHVlfSl9IC8+XHJcbjwvZGl2PiA6XHJcbjxkaXY+XHJcbiAgPGJ1dHRvbiBjbGFzc05hbWU9XCJidG5cIlxyXG4gICAgb25DbGljaz17KCk9PnJlcG8udGFza3MudXBkYXRlKHRhc2ssIHtlbWJlZGRlZEh0bWw6IFwiIFwifSl9XHJcbiAgPlxyXG4gICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtY29kZVwiIGFyaWEtaGlkZGVuIC8+Jm5ic3A7e0xgTMOkZ2cgdGlsbCBpbmLDpGRkYXQgbWF0ZXJpYWxgfVxyXG4gIDwvYnV0dG9uPlxyXG4gIDxici8+XHJcbiAgPGJyLz5cclxuPC9kaXY+IDpcclxuPGRpdiAvPjtcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgS2VkQmFja2VuZFJlcG8gfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyB3aXRoUm91dGVyLCBSb3V0ZVByb3BzLCBSb3V0ZUNvbXBvbmVudFByb3BzIH0gZnJvbSAncmVhY3Qtcm91dGVyJztcclxuaW1wb3J0IHsgTGluayB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xyXG5pbXBvcnQgeyBkYiB9IGZyb20gJy4uLy4uLy4uLy4uLy4uL2dsb2JhbHMvZGInO1xyXG5pbXBvcnQgZW52IGZyb20gJy4uLy4uLy4uLy4uLy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCB7IHB1Ymxpc2hDb3Vyc2UgfSBmcm9tICcuLi8uLi8uLi9sb2dpYy9wdWJsaXNoLWNvdXJzZSc7XHJcbmltcG9ydCB7IEhvcml6b250YWxJdGVtIH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2hvcml6b250YWwtaXRlbSc7XHJcbmltcG9ydCB7IEFsaWduSG9yaXpvbnRhbCB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9hbGlnbi1ob3Jpem9udGFsJztcclxuaW1wb3J0IHsgVGFzayB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgc2Nob29sOiBzdHJpbmc7XHJcbiAgY291cnNlSWQ6IHN0cmluZztcclxuICB0YWJJZDogc3RyaW5nO1xyXG4gIGNvbnRlbnRJZDogc3RyaW5nO1xyXG4gIGRyYWZ0SWQ6IHN0cmluZztcclxuICB0YXNrOiBUYXNrO1xyXG4gIHJlcG86IEtlZEJhY2tlbmRSZXBvO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgVGFza0Zvb3RlckJ1dHRvbnMgPSB3aXRoUm91dGVyKCh7IHNjaG9vbCwgY291cnNlSWQsIHRhYklkLCBjb250ZW50SWQsIGRyYWZ0SWQsIHRhc2ssIHJlcG8sIGhpc3RvcnkgfTogUHJvcHMgJiBSb3V0ZUNvbXBvbmVudFByb3BzKSA9PiA8PlxyXG4gIDxkaXY+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnRuIGJ0bi13YXJuaW5nIHB1bGwtcmlnaHRcIiBvbkNsaWNrPXthc3luYyAoKSA9PiB7XHJcbiAgICAgIHJlcG8uY291cnNlQ29udGVudHMucmVtb3ZlUmVsYXRlZChjb250ZW50SWQsIFwidGFza3NcIiwgdGFzayk7XHJcbiAgICAgIGF3YWl0IGRiLnNhdmVOb3coKTtcclxuICAgICAgaGlzdG9yeS5wdXNoKGAvJHtzY2hvb2x9L2NvdXJzZXMvJHtjb3Vyc2VJZH0vdGFicy8ke3RhYklkfS9kcmFmdHMvJHtkcmFmdElkfS9lZGl0YCk7XHJcbiAgICB9fT5cclxuICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtdHJhc2hcIiBhcmlhLWhpZGRlbj17dHJ1ZX0gLz4mbmJzcDtcclxuICAgICAgICB7TGBUYSBib3J0IHVwcGdpZnRlbmB9XHJcbiAgICA8L2Rpdj5cclxuICAgIDxBbGlnbkhvcml6b250YWw+XHJcbiAgICAgIDxIb3Jpem9udGFsSXRlbT5cclxuICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICBjbGFzc05hbWU9XCJidG5cIlxyXG4gICAgICAgICAgb25DbGljaz17YXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBhd2FpdCByZXBvLnNhdmVOb3coKTtcclxuICAgICAgICAgICAgaGlzdG9yeS5wdXNoKGAvJHtzY2hvb2x9L2NvdXJzZXMvJHtjb3Vyc2VJZH0vdGFicy8ke3RhYklkIHx8ICckJ30vY29udGVudHMvJHtjb250ZW50SWR9L3Rhc2tzLyR7dGFzay5pZH0vZHJhZnRzLyR7ZHJhZnRJZH1gKTtcclxuICAgICAgICAgIH19XHJcbiAgICAgICAgPlxyXG4gICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtZXllXCIgYXJpYS1oaWRkZW49e3RydWV9IC8+Jm5ic3A7XHJcbiAgICAgICAgICB7TGBGw7ZyaGFuZHNncmFuc2thYH1cclxuICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgPC9Ib3Jpem9udGFsSXRlbT5cclxuICAgICAgPEhvcml6b250YWxJdGVtPlxyXG4gICAgICAgIDxidXR0b25cclxuICAgICAgICAgIGNsYXNzTmFtZT1cImJ0blwiXHJcbiAgICAgICAgICBvbkNsaWNrPXthc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGhpc3RvcnkucHVzaChgLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlSWR9L3RhYnMvJHt0YWJJZCB8fCAnJCd9L2RyYWZ0cy8ke2RyYWZ0SWR9L2VkaXRgKTtcclxuICAgICAgICAgIH19XHJcbiAgICAgICAgPlxyXG4gICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtYXJyb3ctbGVmdFwiIGFyaWEtaGlkZGVuPXt0cnVlfSAvPiZuYnNwO1xyXG4gICAgICAgICAge0xgw4V0ZXJnw6UgdGlsbCBmbGlrZW5gfVxyXG4gICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICA8L0hvcml6b250YWxJdGVtPlxyXG4gICAgICB7Lyo8SG9yaXpvbnRhbEl0ZW0+XHJcbiAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgY2xhc3NOYW1lPVwiYnRuIGJ0bi13YXJuaW5nXCJcclxuICAgICAgICAgIG9uQ2xpY2s9e2FzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgYXdhaXQgcHVibGlzaENvdXJzZSh7XHJcbiAgICAgICAgICAgICAgc2Nob29sLFxyXG4gICAgICAgICAgICAgIGNvdXJzZUlkLFxyXG4gICAgICAgICAgICAgIGRyYWZ0UmVwbzogcmVwb1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYXdhaXQgZGIuc2F2ZU5vdygpO1xyXG4gICAgICAgICAgICBoaXN0b3J5LnB1c2goYC8ke3NjaG9vbH0vY291cnNlcy8ke2NvdXJzZUlkfS90YWJzLyR7dGFiSWQgfHwgJyQnfWApO1xyXG4gICAgICAgICAgfX1cclxuICA+XHJcbiAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1wbGF5XCIgYXJpYS1oaWRkZW49e3RydWV9IC8+Jm5ic3A7XHJcbiAgICAgICAgICB7TGBQdWJsaWNlcmFgfVxyXG4gICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICA8L0hvcml6b250YWxJdGVtPiovfVxyXG4gICAgPC9BbGlnbkhvcml6b250YWw+XHJcbiAgPC9kaXY+XHJcbiAgPGJyLz5cclxuICB7Lyo8YnV0dG9uIGNsYXNzTmFtZT1cImJ0blwiIG9uQ2xpY2s9eygpPT5cclxuICAgICAgaGlzdG9yeS5wdXNoKGAvJHtzY2hvb2x9L2NvdXJzZXMvJHtjb3Vyc2VJZH0vdGFicy8ke3RhYklkIHx8ICckJ30vdGFza3MvJHt0YXNrSWR9YCl9PlxyXG4gICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtYXJyb3ctbGVmdFwiIGFyaWEtaGlkZGVuPXt0cnVlfSAvPiZuYnNwO1xyXG4gICAge0xgQXZzbHV0YSByZWRpZ2VyaW5nYH1cclxuXHJcbiAgPC9idXR0b24+Ki99XHJcbjwvPik7XHJcblxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IHVzZUNvbnRleHQgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IFRhc2sgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IFd5c2l3eWcsIEFjdGlvbiB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy93eXNpd3lnJztcclxuaW1wb3J0IGFjdGlvbnNfc3dlZGlzaCBmcm9tICcuLi8uLi8uLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvd3lzaXd5Zy9hY3Rpb25zLXN2JztcclxuaW1wb3J0IHsgS2VkQmFja2VuZFJlcG8gfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBMLCBzaG93RXJyb3IgfSBmcm9tICcuLi8uLi8uLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IERpYWxvZ3NDb250ZXh0IH0gZnJvbSAnLi4vLi4vLi4vY29tbW9uL2RpYWxvZy1jb250ZXh0JztcclxuaW1wb3J0IHsgaXNLZWRTdGFmZiB9IGZyb20gJy4uLy4uLy4uL2xvZ2ljL2lzLWtlZC1zdGFmZic7XHJcbmltcG9ydCB7IFNlbGVjdFdvcmRCYW5rIH0gZnJvbSAnLi4vLi4vLi4vY29tbW9uL3NlbGVjdC13b3JkLWJhbmsnO1xyXG5pbXBvcnQgeyBzYXZlU2VsZWN0aW9uLCByZXN0b3JlU2VsZWN0aW9uIH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL3d5c2l3eWcvcmVzdG9yZS1zZWxlY3Rpb24nO1xyXG5pbXBvcnQgeyBjZmcgfSBmcm9tICcuLi8uLi8uLi8uLi8uLi9nbG9iYWxzL0tFRC5jZmcnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFRhc2tXb3JraW5nUHJvY2VkdXJlRWRpdG9yKHsgd3JpdGVBY2Nlc3MsIHRhc2ssIHJlcG8sIHN0ZXAgfTogeyB3cml0ZUFjY2VzczogYm9vbGVhbiwgdGFzazogVGFzaywgcmVwbzogS2VkQmFja2VuZFJlcG8sIHN0ZXA/OiBudW1iZXIgfSkge1xyXG4gIGNvbnN0IGRpYWxvZ0N0eCA9IHVzZUNvbnRleHQoRGlhbG9nc0NvbnRleHQpO1xyXG5cclxuICBjb25zdCBhY3Rpb25zOiAoUGFydGlhbDxBY3Rpb24+IHwgc3RyaW5nKVtdID0gW1xyXG4gICAgXCJib2xkXCIsXHJcbiAgICBcIml0YWxpY1wiLFxyXG4gICAgXCJ1bmRlcmxpbmVcIixcclxuICAgIFwib2xpc3RcIixcclxuICAgIFwib3V0ZGVudFwiLFxyXG4gICAgXCJpbmRlbnRcIixcclxuICAgIFwibGlua1wiLFxyXG4gICAgXCJpbWFnZVwiXHJcbiAgXTtcclxuXHJcbiAgaWYgKHdyaXRlQWNjZXNzICYmIGlzS2VkU3RhZmYoKSAmJiBzdGVwICE9IG51bGwpIHtcclxuICAgIC8vIFRoaXMgdGFzayBpcyBwdXQgb24gYSBzdGVwLiBXZSBjb3VsZCBsaW5rIHRvIGEgd29yZCBiYW5rOlxyXG4gICAgYWN0aW9ucy5wdXNoKHtcclxuICAgICAgbmFtZTogXCJsaXN0V29yZEJhbmtcIixcclxuICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtYm9va1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4nLFxyXG4gICAgICB0aXRsZTogTGBMw6Rua2EgdGlsbCBvcmRiYW5rYCxcclxuICAgICAgcmVzdWx0KGV2LCB3eXNpd3lnKSB7XHJcbiAgICAgICAgY29uc3Qgc2VsZWN0aW9uID0gc2F2ZVNlbGVjdGlvbigpO1xyXG4gICAgICAgIGRpYWxvZ0N0eC5vcGVuRGlhbG9nKDxTZWxlY3RXb3JkQmFuayBzdWJqZWN0PXt0YXNrLnN1YmplY3R9IHN0ZXA9e3N0ZXB9IG9uU2VsZWN0PXsoeyBuYW1lLCB1cmwgfSkgPT4ge1xyXG4gICAgICAgICAgZGlhbG9nQ3R4LmNsb3NlRGlhbG9nKCk7XHJcbiAgICAgICAgICByZXN0b3JlU2VsZWN0aW9uKHNlbGVjdGlvbik7XHJcbiAgICAgICAgICBjb25zdCBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xyXG4gICAgICAgICAgZWxlbS5ocmVmID0gdXJsO1xyXG4gICAgICAgICAgZWxlbS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShuYW1lKSk7XHJcbiAgICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnaW5zZXJ0SFRNTCcsIGZhbHNlLCBlbGVtLm91dGVySFRNTCk7XHJcbiAgICAgICAgfSB9IC8+KTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1saW5rXCIgc3R5bGU9XCJjb2xvcjp2YXIoLS1jb2wtYWNjZW50KVwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4nLFxyXG4gICAgICAgIHRpdGxlOiAnUmVzdXJzIGzDpG5rJyxcclxuICAgICAgICByZXN1bHQ6ICgpID0+IHtcclxuICAgICAgICAgIGNvbnN0IHVybCA9IHdpbmRvdy5wcm9tcHQoJ0FuZ2UgbMOkbmtlbnMgVVJMIGbDtnIgcmVzdXJzZW4nKVxyXG4gICAgICAgICAgaWYodXJsKSB7XHJcbiAgICAgICAgICAgIC8vY2hlY2sgdGhhdCB0aGUgZW50ZXJlZCBVUkwgaXMgdGhlIHNhbWUgd2l0aCB0aGUgY3VycmVudCBvbmVcclxuICAgICAgICAgICAgY29uc3QgdXJsT2JqID0gbmV3IFVSTCgnJywgdXJsKTtcclxuICAgICAgICAgICAgaWYodXJsT2JqLmhvc3QgIT09IHdpbmRvdy5sb2NhdGlvbi5ob3N0KSB7XHJcbiAgICAgICAgICAgICAgc2hvd0Vycm9yKFwiT2dpbHRpZyByZXN1cnNhZHJlc3NcIik7IFxyXG4gICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy9tYXRjaCB0aGUgcmVzb3VyY2VJZFxyXG4gICAgICAgICAgICB2YXIgcmVnZXggPSBuZXcgUmVnRXhwKFwiKFteXFwufC9dKykuKFteXFwuXSspKD89XFwuaHRtbClcIik7XHJcbiAgICAgICAgICAgIHZhciB1cmxSZXN1bHRzID0gcmVnZXguZXhlYyh1cmxPYmoucGF0aG5hbWUpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYoIWNmZy5LRURfUkVTT1VSQ0VTX1VSTCkge1xyXG4gICAgICAgICAgICAgIHNob3dFcnJvcihcIlJlc3Vyc2VyIFVSTCDDpHIgaW50ZSBrb25maWd1cmVyYWRcIik7IFxyXG4gICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL3JlcGxhY2UgY2ZnIHZhbHVlIHdpdGggdGhlIG9uZSBmcm9tIHRoZSBwcm92aWRlZCB1cmxcclxuICAgICAgICAgICAgdmFyIHZhbHVlRnJvbUNvbmZpZyA9IGNmZy5LRURfUkVTT1VSQ0VTX1VSTC5yZXBsYWNlKFwie3ZhbHVlfVwiLCB1cmxSZXN1bHRzWzBdKTtcclxuICAgICAgICAgICAgaWYodmFsdWVGcm9tQ29uZmlnKSBkb2N1bWVudC5leGVjQ29tbWFuZCgnY3JlYXRlTGluaycsIGZhbHNlLCB2YWx1ZUZyb21Db25maWcpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIDw+XHJcbiAgICA8aDQ+e0xgQXJiZXRzcHJvY2Vzc2B9PC9oND5cclxuICAgIDxXeXNpd3lnIGFjdGlvbnM9e2FjdGlvbnN9IGRlZmF1bHRBY3Rpb25zPXthY3Rpb25zX3N3ZWRpc2h9IHJlYWRPbmx5PXshd3JpdGVBY2Nlc3N9IGh0bWw9e3Rhc2sud29ya2luZ1Byb2NlZHVyZSB8fCBcIlwifSBvbkNoYW5nZT17aHRtbCA9PiB7XHJcbiAgICAgIHJlcG8udGFza3MudXBkYXRlKHRhc2ssIHsgd29ya2luZ1Byb2NlZHVyZTogaHRtbCB9KTtcclxuICAgIH19IC8+XHJcbiAgPC8+O1xyXG59XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IGxpdmVRdWVyeVZpZXcgfSBmcm9tICcuLi8uLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvbGl2ZS1xdWVyeS12aWV3JztcclxuaW1wb3J0IHsgVmFsdWUgfSBmcm9tICdrZWRiYWNrZW5kL29ic2VydmFibGUnO1xyXG5pbXBvcnQgeyBXaXRoR3JhcGhzLCBLZWRCYWNrZW5kUmVwbyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IENvdXJzZUluc3RhbmNlLCBUYXNrLCBDb3Vyc2VUYWIgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IFR3b0NvbHVtbnNQYWdlIH0gZnJvbSAnLi4vLi4vY29tbW9uL3R3by1jb2x1bW5zLXBhZ2UnO1xyXG5pbXBvcnQgeyBFZGl0VGFza0Zvcm0gfSBmcm9tICcuL3JpZ2h0LWNvbHVtbi9lZGl0LXRhc2stZm9ybSc7XHJcbmltcG9ydCB7IFRhc2tWaWV3ZXIgfSBmcm9tICcuL3ZpZXdlci90YXNrLXZpZXdlcic7XHJcbmltcG9ydCB7IExhenlDb250ZW50IH0gZnJvbSAnLi4vLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2xhenktY29udGVudCc7XHJcbmltcG9ydCB7IHJlc29sdmVSZXF1aXJlbWVudE9yZGVyIH0gZnJvbSAnLi4vLi4vbG9naWMvb3JkZXJlZC1yZXF1aXJlbWVudHMnO1xyXG5pbXBvcnQgeyBFZGl0UmVxdWlyZW1lbnRzIH0gZnJvbSAnLi9sZWZ0LWNvbHVtbi9lZGl0LXJlcXVpcmVtZW50cyc7XHJcbmltcG9ydCB7IGlzVGVhY2hlckF0U2Nob29sIH0gZnJvbSAnLi4vLi4vLi4vLi4vYWNjZXNzLWNvbnRyb2wnO1xyXG5pbXBvcnQgeyBpc0tlZFN0YWZmIH0gZnJvbSAnLi4vLi4vbG9naWMvaXMta2VkLXN0YWZmJztcclxuaW1wb3J0IHsgaXNFbXBsb3llZSB9IGZyb20gJy4uLy4uL2xvZ2ljL2lzLWVtcGxveWVlJztcclxuXHJcbmltcG9ydCB7IGdldElkc05vdENvdmVyZWRCeVJlcVJlZmVyZW5jaW5nRG9jcyB9IGZyb20gJy4uLy4uLy4uL2NvdXJzZS1idWlsZGVyL2NvdXJzZXMvYnVzaW5lc3MtbG9naWMnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQcm9wcyB7XHJcbiAgc2Nob29sOiBzdHJpbmc7XHJcbiAgY291cnNlOiBXaXRoR3JhcGhzPENvdXJzZUluc3RhbmNlLCBcInRhYnNcIiB8IFwiYmxvY2tzXCI+O1xyXG4gIGRyYWZ0SWQ6IHN0cmluZztcclxuICBicmFuY2g6IEtlZEJhY2tlbmRSZXBvXHJcbiAgYWN0aXZlVGFiOiBzdHJpbmc7XHJcbiAgY29udGVudElkOiBzdHJpbmc7XHJcbiAgdGFza0lkOiBzdHJpbmc7XHJcbiAgYmxvY2tJZDogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgVGFza0VkaXRvciA9IGxpdmVRdWVyeVZpZXcoKHtcclxuICBzY2hvb2wsXHJcbiAgY291cnNlLFxyXG4gIGFjdGl2ZVRhYixcclxuICBkcmFmdElkLFxyXG4gIGJyYW5jaCxcclxuICBjb250ZW50SWQsXHJcbiAgdGFza0lkLFxyXG4gIGJsb2NrSWQgfTogUHJvcHMpID0+XHJcbntcclxuICBjb25zdCB0aGVtZUNvdXJzZVRhYiA9IGNvdXJzZS50YWJzLmZpbmQodCA9PiB0LmlkID09PSBhY3RpdmVUYWIpO1xyXG4gIGNvbnN0IGludm9sdmVkVGFiSWRzID0gKHRoZW1lQ291cnNlVGFiICYmIHRoZW1lQ291cnNlVGFiLnRhYkNsYXNzID09PSAnbWlzc2lvbi10YWInKSA/XHJcbiAgICBjb3Vyc2UudGFicy5maWx0ZXIodGFiID0+IHRhYi50YWJDbGFzcyA9PT0gJ3N1YmplY3QtdGFiJykubWFwKHRhYiA9PiB0YWIuaWQpIDpcclxuICAgIFthY3RpdmVUYWJdO1xyXG4gIHJldHVybiBicmFuY2gudGFza3NcclxuICAgIC5pbmNsdWRlKFwiYWJpbGl0aWVzXCIsIFwiY2VudHJhbENvbnRlbnRcIiwgXCJrbm93bGVkZ2VSZXF1aXJlbWVudHNcIikuaW5jbHVkZUlkc09ubHkoKVxyXG4gICAgLy8uZGVidWcoKVxyXG4gICAgLmhhc0VkZ2VzRnJvbShbY29udGVudElkXSlcclxuICAgIC50b1ZhbHVlKClcclxuICAgIC5jb21iaW5lTGF0ZXN0KFxyXG4gICAgICBicmFuY2guY291cnNlVGFic1xyXG4gICAgICAgIC5pbmNsdWRlKFwiYWJpbGl0aWVzXCIsIFwiY2VudHJhbENvbnRlbnRcIiwgXCJrbm93bGVkZ2VSZXF1aXJlbWVudHNcIilcclxuICAgICAgICAuaW5jbHVkZUlkc09ubHkoKVxyXG4gICAgICAgIC5pZHMoaW52b2x2ZWRUYWJJZHMpKVxyXG4gICAgLnN3aXRjaE1hcCgoW3Rhc2tzLCBpbnZvbHZlZFRhYnNdKSA9PiB7XHJcbiAgICAgIGNvbnN0IHRhc2sgPSB0YXNrcy5maWx0ZXIodCA9PiB0LmlkID09PSB0YXNrSWQpWzBdO1xyXG4gICAgICBjb25zdCB1bmNvdmVyZWRJZHMgPSBnZXRJZHNOb3RDb3ZlcmVkQnlSZXFSZWZlcmVuY2luZ0RvY3MoaW52b2x2ZWRUYWJzLCB0YXNrcyk7XHJcbiAgICAgIHJldHVybiByZXNvbHZlUmVxdWlyZW1lbnRPcmRlcih0YXNrKS5tYXAodGFzayA9PiB7XHJcbiAgICAgICAgcmV0dXJuIDxUd29Db2x1bW5zUGFnZVxyXG4gICAgICAgICAgbGVmdD17PEVkaXRSZXF1aXJlbWVudHNcclxuICAgICAgICAgICAgcmVwbz17YnJhbmNofVxyXG4gICAgICAgICAgICB0YXNrPXt0YXNrfVxyXG4gICAgICAgICAgICB1bmNvdmVyZWRJZHM9e3VuY292ZXJlZElkc31cclxuICAgICAgICAgICAgdGFiSWRzPXtpbnZvbHZlZFRhYklkc31cclxuICAgICAgICAgICAgYmxvY2tJZD17YmxvY2tJZH0gLz59IC8vIFZpZCBcIlVwcGRyYWdcIiwgc2tpY2thIGluIGFsbGEgw6RtbmVzZmxpa2FycyBJRCBow6RyIVxyXG4gICAgICAgICAgcmlnaHQ9ezxFZGl0VGFza0Zvcm1cclxuICAgICAgICAgICAgcmVwbz17YnJhbmNofVxyXG4gICAgICAgICAgICBzY2hvb2w9e3NjaG9vbH1cclxuICAgICAgICAgICAgY291cnNlPXtjb3Vyc2V9XHJcbiAgICAgICAgICAgIGRyYWZ0SWQ9e2RyYWZ0SWR9XHJcbiAgICAgICAgICAgIHRhYklkPXthY3RpdmVUYWJ9XHJcbiAgICAgICAgICAgIHRhYj17aW52b2x2ZWRUYWJzLmZpbmQodCA9PiB0LmlkID09PSBhY3RpdmVUYWIpIGFzIENvdXJzZVRhYn1cclxuICAgICAgICAgICAgY29udGVudElkPXtjb250ZW50SWR9XHJcbiAgICAgICAgICAgIHdyaXRlQWNjZXNzPXtpc0VtcGxveWVlKHNjaG9vbCl9XHJcbiAgICAgICAgICAgIHRhc2s9e3Rhc2t9XHJcbiAgICAgICAgICAvPn1cclxuICAgICAgICAgIHJpZ2h0V2lkdGg9ezZ9XHJcbiAgICAgICAgLz5cclxuICAgICAgfSlcclxuICAgIH0pXHJcbn0pO1xyXG4iLCJpbXBvcnQgeyBUYXNrVHlwZSB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgTCB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuZXhwb3J0IGNvbnN0IHRhc2tUeXBlSGVhZGluZ3MgPSB7XHJcbiAgZXhlcmNpc2U6IExgw5Z2bmluZ3N1cHBnaWZ0YCxcclxuICB0YXNrOiBMYFVwcGdpZnRgLFxyXG4gIGFzc2lnbm1lbnQ6IExgSW5sw6RtbmluZ3N1cHBnaWZ0YFxyXG59O1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBsaXZlUXVlcnlWaWV3IH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2xpdmUtcXVlcnktdmlldyc7XHJcbmltcG9ydCB7IFZhbHVlIH0gZnJvbSAna2VkYmFja2VuZC9vYnNlcnZhYmxlJztcclxuaW1wb3J0IHsgV2l0aEdyYXBocywgS2VkQmFja2VuZFJlcG8gfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBDb3Vyc2VJbnN0YW5jZSwgVGFzayB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgVHdvQ29sdW1uc1BhZ2UgfSBmcm9tICcuLi8uLi8uLi9jb21tb24vdHdvLWNvbHVtbnMtcGFnZSc7XHJcbmltcG9ydCB7IEVkaXRUYXNrRm9ybSB9IGZyb20gJy4uL3JpZ2h0LWNvbHVtbi9lZGl0LXRhc2stZm9ybSc7XHJcbmltcG9ydCB7IFdlZWtQbGFubmVyIH0gZnJvbSAnLi4vLi4vLi4vLi4vd2Vla3BsYW5uZXIvd2Vla3BsYW5uZXInO1xyXG5pbXBvcnQgeyBUYXNrVmlld2VyIH0gZnJvbSAnLi90YXNrLXZpZXdlcic7XHJcbmltcG9ydCB7IExhenlDb250ZW50IH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2xhenktY29udGVudCc7XHJcbmltcG9ydCB7IHJlc29sdmVSZXF1aXJlbWVudE9yZGVyIH0gZnJvbSAnLi4vLi4vLi4vbG9naWMvb3JkZXJlZC1yZXF1aXJlbWVudHMnO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBSb3V0ZUNvbXBvbmVudFByb3BzLCB3aXRoUm91dGVyIH0gZnJvbSAncmVhY3Qtcm91dGVyJztcclxuaW1wb3J0IHsgQWxpZ25Ib3Jpem9udGFsIH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2FsaWduLWhvcml6b250YWwnO1xyXG5pbXBvcnQgZW52IGZyb20gJy4uLy4uLy4uLy4uLy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCBjZmcgZnJvbSAnLi4vLi4vLi4vLi4vLi4vZ2xvYmFscy9LRUQuY2ZnJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUHJvcHN7XHJcbiAgc2Nob29sOiBzdHJpbmc7XHJcbiAgY291cnNlSWQ6IHN0cmluZztcclxuICBsYXp5UmVwbzogVmFsdWU8S2VkQmFja2VuZFJlcG8+XHJcbiAgYWN0aXZlVGFiOiBzdHJpbmc7XHJcbiAgdGFza0lkOiBzdHJpbmc7XHJcbiAgZHJhZnRJZD86IHN0cmluZztcclxuICBjb250ZW50SWQ/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBUYXNrVmlld2VyUGFnZSA9IGxpdmVRdWVyeVZpZXcoKHByb3BzOiBQcm9wcykgPT5cclxuICBwcm9wcy5sYXp5UmVwby5tYXAocmVwbyA9PiA8VGFza1ZpZXdlclBhZ2VJbm5lciB7Li4uey4uLnByb3BzLCByZXBvfX0gLz4pKTtcclxuXHJcbmV4cG9ydCBjb25zdCBUYXNrVmlld2VyUGFnZUlubmVyID0gd2l0aFJvdXRlcihsaXZlUXVlcnlWaWV3KCh7XHJcbiAgc2Nob29sLCBjb3Vyc2VJZCwgYWN0aXZlVGFiLCByZXBvLCB0YXNrSWQsIGRyYWZ0SWQsIGNvbnRlbnRJZCwgaGlzdG9yeX06IFByb3BzICYge3JlcG86IEtlZEJhY2tlbmRSZXBvfSAmIFJvdXRlQ29tcG9uZW50UHJvcHMpID0+IChcclxuICAgIHJlcG8udGFza3NcclxuICAgICAgLmluY2x1ZGUoXCJhYmlsaXRpZXNcIiwgXCJjZW50cmFsQ29udGVudFwiLCBcImtub3dsZWRnZVJlcXVpcmVtZW50c1wiKVxyXG4gICAgICAuaWQodGFza0lkKVxyXG4gICAgICAubWFwKCh0YXNrKSA9PiA8VHdvQ29sdW1uc1BhZ2VcclxuICAgICAgICBsZWZ0PXs8TGF6eUNvbnRlbnQ+e3Jlc29sdmVSZXF1aXJlbWVudE9yZGVyKHRhc2spLm1hcCh0YXNrID0+IDw+XHJcbiAgICAgICAgICAgIDxUYXNrVmlld2VyXHJcbiAgICAgICAgICAgICAgc2Nob29sPXtzY2hvb2x9XHJcbiAgICAgICAgICAgICAgdGFzaz17dGFza31cclxuICAgICAgICAgICAgICBjb3Vyc2VJZD17Y291cnNlSWR9XHJcbiAgICAgICAgICAgICAgYWJpbGl0aWVzPXt0YXNrLmFiaWxpdGllc31cclxuICAgICAgICAgICAgICBjZW50cmFsQ29udGVudD17dGFzay5jZW50cmFsQ29udGVudH1cclxuICAgICAgICAgICAgICByZXF1aXJlbWVudHM9e3Rhc2sua25vd2xlZGdlUmVxdWlyZW1lbnRzfVxyXG4gICAgICAgICAgICAgIGZ1dHVyZUFiaWxpdGllcz17dGFzay5mdXR1cmVBYmlsaXRpZXN9XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgIHtkcmFmdElkICYmIGNvbnRlbnRJZCAmJiA8PlxyXG4gICAgICAgICAgICAgIDxociAvPlxyXG4gICAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ0blwiXHJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKT0+aGlzdG9yeS5wdXNoKGAvJHtzY2hvb2x9L2NvdXJzZXMvJHtjb3Vyc2VJZH0vdGFicy8ke2FjdGl2ZVRhYn0vY29udGVudHMvJHtjb250ZW50SWR9L3Rhc2tzLyR7dGFza0lkfS9kcmFmdHMvJHtkcmFmdElkfS9lZGl0YCl9XHJcbiAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtbGcgZmEtcGVuY2lsXCIgLz4ge0xgRm9ydHPDpHR0IHJlZGlnZXJhYH1cclxuICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgPC8+fVxyXG4gICAgICAgICAgPC8+KX1cclxuICAgICAgICA8L0xhenlDb250ZW50Pn1cclxuICAgICAgICByaWdodD17PFdlZWtQbGFubmVyIGVudj17ZW52fSB2aWV3Q291cnNlVXJsPXtjZmcuS0VEX0NPVVJTRV9WSUVXRVJfVVJMfSAvPn1cclxuICAgICAgICByaWdodFdpZHRoPXs1fVxyXG4gICAgICAvPilcclxuKSkpO1xyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kUmVwbyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IFRhc2ssIEFiaWxpdHksIENlbnRyYWxDb250ZW50LCBLbm93bGVkZ2VSZXF1aXJlbWVudCB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgaXNFbXBsb3llZSB9IGZyb20gJy4uLy4uLy4uL2xvZ2ljL2lzLWVtcGxveWVlJztcclxuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xyXG5pbXBvcnQgeyBUYXNrQXNzaWdubWVudHMgfSBmcm9tICcuLi8uLi8uLi8uLi9jb3Vyc2Utdmlld2VyL2NvdXJzZS1wYWdlL3Rhc2stYXNzaWdubWVudHMnO1xyXG5pbXBvcnQgeyBBYmlsaXRpZXNCb3ggfSBmcm9tICcuLi8uLi8uLi8uLi9jb3Vyc2Utdmlld2VyL3N1YmNvbXBvbmVudHMvYWJpbGl0aWVzLWJveCc7XHJcbmltcG9ydCB7IENlbnRyYWxDb250ZW50Qm94IH0gZnJvbSAnLi4vLi4vLi4vLi4vY291cnNlLXZpZXdlci9zdWJjb21wb25lbnRzL2NlbnRyYWwtY29udGVudC1ib3gnO1xyXG5pbXBvcnQgeyBLbm93bGVkZ2VSZXF1aXJlbWVudHNCb3ggfSBmcm9tICcuLi8uLi8uLi8uLi9jb3Vyc2Utdmlld2VyL3N1YmNvbXBvbmVudHMva25vd2xlZGdlLXJlcXVpcmVtZW50cy10YWJsZSc7XHJcbmltcG9ydCB7IEwgfSBmcm9tICcuLi8uLi8uLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IHRhc2tUeXBlSGVhZGluZ3MgfSBmcm9tICcuLi90ZXh0cyc7XHJcbmltcG9ydCB7IEZ1dHVyZUFiaWxpdGllc0JveCB9IGZyb20gJy4uLy4uLy4uL2NvbW1vbi9mdXR1cmUtYWJpbGl0aWVzLWJveCc7XHJcbmltcG9ydCB7IGZlYXR1cmVzIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vZmVhdHVyZXMnO1xyXG5cclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgc2Nob29sOiBzdHJpbmc7XHJcbiAgdGFzazogVGFzaztcclxuICBjb3Vyc2VJZDogc3RyaW5nO1xyXG4gIGFiaWxpdGllczogQWJpbGl0eVtdO1xyXG4gIGNlbnRyYWxDb250ZW50OiBDZW50cmFsQ29udGVudFtdO1xyXG4gIHJlcXVpcmVtZW50czogS25vd2xlZGdlUmVxdWlyZW1lbnRbXTtcclxuICBmdXR1cmVBYmlsaXRpZXM6IHN0cmluZ1tdO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgVGFza1ZpZXdlciA9ICh7IHNjaG9vbCwgdGFzaywgY291cnNlSWQsIGFiaWxpdGllcywgY2VudHJhbENvbnRlbnQsIHJlcXVpcmVtZW50cywgZnV0dXJlQWJpbGl0aWVzIH06IFByb3BzKSA9PiB7XHJcbiAgY29uc3QgZGVhZGxpbmVUb29MYXRlID0gdGFzay5kZWFkbGluZSAmJiBtb21lbnQodGFzay5kZWFkbGluZSkuZW5kT2YoJ2RheScpIDwgbW9tZW50KCk7XHJcbiAgXHJcbiAgcmV0dXJuIDxkaXY+XHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInN2LXRleHQtcG9ydGxldCBzdi11c2UtbWFyZ2lucyBzdi1za2lwLXNwYWNlclwiPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInN2LXRleHQtcG9ydGxldC1jb250ZW50XCI+XHJcbiAgICAgICAgPGgxIGNsYXNzTmFtZT1cImgxXCI+e3Rhc2submFtZX08L2gxPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gICAgPGRpdiBjbGFzc05hbWU9XCJzdi1odG1sLXBvcnRsZXQgc3YtcG9ydGxldFwiPlxyXG4gICAgICB7dGFzay5jb250ZW50ICYmIDw+XHJcbiAgICAgICAgPGRpdiBkYW5nZXJvdXNseVNldElubmVySFRNTD17eyBfX2h0bWw6IHRhc2suY29udGVudCB9fSAvPlxyXG4gICAgICA8Lz59XHJcbiAgICA8L2Rpdj5cclxuICAgIHt0YXNrLmRlc2NyaXB0aW9uICYmIDxkaXYgY2xhc3NOYW1lPVwic3YtaHRtbC1wb3J0bGV0IHN2LXBvcnRsZXRcIj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9e1tcImtlZF9ib3hlZFwiLCBcInRhc2tCb3hcIiwgdGFzay50YXNrVHlwZV0uam9pbignICcpfSBzdHlsZT17e2NsZWFyOlwiYm90aFwifX0+XHJcbiAgICAgICAgPGgyPnt0YXNrVHlwZUhlYWRpbmdzW3Rhc2sudGFza1R5cGVdIHx8IExgVXBwZ2lmdGB9PC9oMj5cclxuICAgICAgICA8ZGl2IGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXt7X19odG1sOiB0YXNrLmRlc2NyaXB0aW9ufX0gLz5cclxuICAgICAgPC9kaXY+ICAgICAgXHJcbiAgICA8L2Rpdj59XHJcbiAgICB7dGFzay53b3JraW5nUHJvY2VkdXJlICYmIDxkaXY+XHJcbiAgICAgIDxoMyBjbGFzc05hbWU9XCJoM1wiPntMYEFyYmV0c3Byb2Nlc3NgfTwvaDM+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmljaC10ZXh0LXJlYWRvbmx5XCIgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3tfX2h0bWw6IHRhc2sud29ya2luZ1Byb2NlZHVyZX19IC8+XHJcbiAgICA8L2Rpdj59XHJcbiAgICB7dGFzay5lbWJlZGRlZEh0bWwgJiYgPGRpdiBkYW5nZXJvdXNseVNldElubmVySFRNTD17e19faHRtbDogdGFzay5lbWJlZGRlZEh0bWx9fSAvPn1cclxuICAgIDxiciAvPlxyXG4gICAge3Rhc2sudGFza1R5cGUgPT09ICdhc3NpZ25tZW50JyAmJiBmZWF0dXJlcy5rc0Fzc2lnbm1lbnRzID8gPD5cclxuICAgICAgPGgyPklubMOkbW5pbmdzdXBwZ2lmdDwvaDI+XHJcbiAgICAgIHtpc0VtcGxveWVlKHNjaG9vbCkgP1xyXG4gICAgICAgIDxwPkjDpHIga2FuIGR1IHNvbSBsw6RyYXJlIHNlIGVsZXZlcm5hcyBpbmzDpG1uYWRlIGFyYmV0ZW4uXHJcbiAgICA8L3A+IDogaXNFbXBsb3llZSgpID8gPHA+XHJcbiAgICAgICAge0xgRGV0dGEgw6RyIGVuIGlubMOkbW5pbmdzdXBwZ2lmdCBtZWQgaW5sw6RtbmluZ3NkYXR1bSAke21vbWVudCh0YXNrLmRlYWRsaW5lKS5mb3JtYXQoJ1lZWVktTU0tREQnKX1gfVxyXG4gICAgPC9wPiA6IDw+XHJcbiAgICAgICAgICA8cD4uIEzDpG1uYSBpbiBkaXR0IGFyYmV0ZSBzb20gZW4gcGRmLCBkb2MgZWxsZXIgb2R0IGZpbFxyXG4gICAgICAgICAgICBnZW5vbSBhdHQgZHJhIGRldCB0aWxsIGbDpGx0ZXQgdW5kZXIuXHJcbiAgICAgIDwvcD5cclxuICAgICAgICAgIHt0YXNrLmRlYWRsaW5lID8gPHA+PGI+XHJcbiAgICAgICAgICAgIERlbiBow6RyIHVwcGdpZnRlbiB7ZGVhZGxpbmVUb29MYXRlID8gJ3NrdWxsZSB2YXJpdCBpbmzDpG1uYWQgJyA6ICdza2FsbCB2YXJhIGlubMOkbW5hZCAnfVxyXG4gICAgICAgICAgICB7bW9tZW50KHRhc2suZGVhZGxpbmUpLmZvcm1hdCgnWVlZWS1NTS1ERCcpfVxyXG4gICAgICAgICAgPC9iPjwvcD4gOiB1bmRlZmluZWR9XHJcbiAgICAgICAgPC8+fVxyXG4gICAgICA8VGFza0Fzc2lnbm1lbnRzXHJcbiAgICAgICAgY291cnNlSWQ9e2NvdXJzZUlkfVxyXG4gICAgICAgIHRhc2tJZD17dGFzay5pZH1cclxuICAgICAgICBzY2hvb2w9e3NjaG9vbH1cclxuICAgICAgICBzZW5kVG9Vcmt1bmQgPSB7dGFzay5zZW5kVG9Vcmt1bmR9XHJcbiAgICAgIC8+XHJcbiAgICAgIDxiciAvPlxyXG4gICAgPC8+IDogdW5kZWZpbmVkfVxyXG4gICAgPGRpdiBjbGFzc05hbWU9XCJzdi1odG1sLXBvcnRsZXQgc3YtcG9ydGxldCBzdi1za2lwLXNwYWNlclwiPlxyXG4gICAgICB7YWJpbGl0aWVzLmxlbmd0aCA+IDAgPyA8QWJpbGl0aWVzQm94XHJcbiAgICAgICAgdGl0bGU9XCJEZW4gaMOkciB1cHBnaWZ0ZW4gYmVoYW5kbGFyIGbDtmxqYW5kZSBmw7ZybcOlZ29yXCJcclxuICAgICAgICBjbGFzc05hbWU9XCJsYXJnZXJcIlxyXG4gICAgICAgIGhlYWRlck9wZW49e2ZhbHNlfVxyXG4gICAgICAgIGFiaWxpdGllcz17YWJpbGl0aWVzfSAvPiA6IG51bGx9XHJcblxyXG4gICAgICB7Y2VudHJhbENvbnRlbnQubGVuZ3RoID4gMCA/IDxDZW50cmFsQ29udGVudEJveFxyXG4gICAgICAgIHRpdGxlPVwiRGVuIGjDpHIgdXBwZ2lmdGVuIGJlaGFuZGxhciBmw7ZsamFuZGUgY2VudHJhbGEgaW5uZWjDpWxsXCJcclxuICAgICAgICBjbGFzc05hbWU9XCJsYXJnZXJcIlxyXG4gICAgICAgIGhlYWRlck9wZW49e2ZhbHNlfVxyXG4gICAgICAgIGNlbnRyYWxDb250ZW50PXtjZW50cmFsQ29udGVudH0gLz4gOiBudWxsIH1cclxuXHJcbiAgICAgIHtyZXF1aXJlbWVudHMubGVuZ3RoID4gMCAmJiB0YXNrLnRhc2tUeXBlICE9PSAnZXhlcmNpc2UnID8gPEtub3dsZWRnZVJlcXVpcmVtZW50c0JveFxyXG4gICAgICAgIHRpdGxlPVwiSSBkZW4gaMOkciB1cHBnaWZ0ZW4gYmVkw7ZtcyBmw7ZsamFuZGUga3Vuc2thcHNrcmF2XCJcclxuICAgICAgICBjbGFzc05hbWU9XCJsYXJnZXJcIlxyXG4gICAgICAgIGhlYWRlck9wZW49e2ZhbHNlfVxyXG4gICAgICAgIHJlcXVpcmVtZW50cz17cmVxdWlyZW1lbnRzfVxyXG4gICAgICAgIGlkc1RvU3ViamVjdE1hcD17dGFzay5pZHNUb1N1YmplY3RNYXB9XHJcbiAgICAgICAgZXhwbGFpbmVkUmVxdWlyZW1lbnRzPXt0YXNrLmV4cGxhaW5lZFJlcXVpcmVtZW50c31cclxuICAgICAgLz4gOiBudWxsfVxyXG5cclxuICAgICAge2Z1dHVyZUFiaWxpdGllcy5sZW5ndGggPiAwID8gPEZ1dHVyZUFiaWxpdGllc0JveFxyXG4gICAgICAgIHRpdGxlPXtMYEkgZGVuIGjDpHIgdXBwZ2lmdGVuIGJlaGFuZGxhcyBmw7ZsamFuZGUgZnJhbXRpZHNmw7ZybcOlZ29yYH1cclxuICAgICAgICBzZWxlY3RlZEZBcz17ZnV0dXJlQWJpbGl0aWVzfVxyXG4gICAgICAvPjogbnVsbH1cclxuICAgIDwvZGl2PlxyXG4gICAgPGhyIC8+XHJcbiAgICB7Lyp1c2VyVGFzayAhPT0gdW5kZWZpbmVkICYmIDxkaXYgY2xhc3NOYW1lPVwidGFza0NvbnRhaW5lclwiPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWxcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICBjbGFzc05hbWU9e2BzZWxlY3RlZEJveCR7dXNlclRhc2sgJiYgdXNlclRhc2suJG1ldGEgIT09ICdkZWxldGluZycgPyAnIHNlbGVjdGVkJyA6ICcnfWB9XHJcbiAgICAgICAgICAgIHN0eWxlPXtpc1dvcmtpbmcgPyB7IG9wYWNpdHk6IDAuNSB9IDoge319XHJcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+ICFpc1dvcmtpbmcgJiYgdGhpcy50b2dnbGVUYXNrKCl9PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICAgIHt1c2VyVGFzayA/XHJcbiAgICAgICAgICAgIExgVGEgYm9ydCB1cHBnaWZ0ZW4gZnLDpW4gJHtmb3JXZWVrU3RyaW5nfWAgOlxyXG4gICAgICAgICAgICBMYEzDpGdnIHRpbGwgdXBwZ2lmdGVuIGkgJHtmb3JXZWVrU3RyaW5nfWB9XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+Ki99XHJcbiAgICA8aHIgLz5cclxuICAgIHt0YXNrLnJlc291cmNlcyAmJiB0YXNrLnJlc291cmNlcy5sZW5ndGggPiAwICYmIDxkaXYgY2xhc3NOYW1lPVwic3YtaHRtbC1wb3J0bGV0IHN2LXBvcnRsZXRcIj5cclxuICAgICAgPGgyPlJlc3Vyc2VyIGtvcHBsYWRlIHRpbGwgdXBwZ2lmdGVuPC9oMj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YXNrQ29udGFpbmVyXCI+XHJcbiAgICAgICAge3Rhc2sucmVzb3VyY2VzLm1hcCgociwgaWR4KSA9PlxyXG4gICAgICAgICAgPGRpdiBrZXk9e2lkeH0gY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbFwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgICAgIDxhIGhyZWY9e3IudXJsfT57ci5uYW1lfTwvYT5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApfVxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGJyIC8+XHJcbiAgICA8L2Rpdj59XHJcblxyXG4gICA8YnIgLz5cclxuICA8L2Rpdj5cclxufSIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IGRiIH0gZnJvbSAnLi4vLi4vLi4vLi4vZ2xvYmFscy9kYic7XHJcbmltcG9ydCB7IExhenlDb250ZW50IH0gZnJvbSAnLi4vLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2xhenktY29udGVudCc7XHJcbmltcG9ydCB7IERlbHRhLCBEZWx0YURvYywgRGVsdGFSZWxhdGlvbiB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgRGVsdGFEb2NCb3ggfSBmcm9tICcuL2RlbHRhZG9jLWJveCc7XHJcbmltcG9ydCB7IERlbHRhTGlua0JveCB9IGZyb20gJy4vZGVsdGFsaW5rLWJveCc7XHJcbmltcG9ydCB7IEwgfSBmcm9tICcuLi8uLi8uLi8uLi91dGlscy91dGlscyc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIGJyYW5jaElkOiBzdHJpbmc7XHJcbiAgZWRpdGFibGU6IGJvb2xlYW47XHJcbiAgdGFnPzogc3RyaW5nO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkZWx0YUtleShkZWx0YTogRGVsdGEpIHtcclxuICBpZiAoZGVsdGEudHlwZSA9PT0gJ21vZGlmeScpXHJcbiAgICByZXR1cm4gZGVsdGEudGFyZ2V0SWQ7XHJcbiAgcmV0dXJuIGRlbHRhLnNvdXJjZUlkICsgZGVsdGEubGFiZWwgKyBkZWx0YS50YXJnZXRJZDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIERlbHRhVmlldyAoe2JyYW5jaElkLCB0YWcsIGVkaXRhYmxlfTogUHJvcHMpIHtcclxuICBsZXQgZGVsdGFzID0gZGIuYnJhbmNoKGJyYW5jaElkKS5kZWx0YXM7XHJcbiAgaWYgKHRhZykge1xyXG4gICAgZGVsdGFzID0gZGVsdGFzLnRhZ3ModGFnKTtcclxuICB9XHJcblxyXG4gIHJldHVybiA8TGF6eUNvbnRlbnQ+XHJcbiAgICB7ZGVsdGFzLnRvVmFsdWUoKS5tYXAoZGVsdGFzID0+XHJcbiAgICAgIGRlbHRhcy5sZW5ndGggPT09IDAgPyA8ZGl2PlxyXG4gICAgICAgIDxwIHN0eWxlPXt7b3BhY2l0eTogMC41LCBmb250U3R5bGU6ICdpdGFsaWMnfX0+e3RhZyA/XHJcbiAgICAgICAgICBMYFNrb2xhbnMgdmVyc2lvbiDDpHIgaWRlbnRpc2sgbWVkIG9yZ2luYWxldGAgOlxyXG4gICAgICAgICAgTGBEZXQgZmlubnMgaW5nYSDDpG5kcmluZ2FyIGF0dCBwdWJsaWNlcmEuYH08L3A+XHJcbiAgICAgIDwvZGl2PiA6XHJcblxyXG4gICAgICAvL1xyXG4gICAgICAvLyBOb3JtYWwgdmlldyAobGlzdCBhbGwgY2hhbmdlcyArIG9wdGlvbiB0byBjbGVhciBhbGwpXHJcbiAgICAgIC8vXHJcbiAgICAgIDw+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YXNrQ29udGFpbmVyIG9kZC1ldmVuXCI+XHJcbiAgICAgICAgICB7ZGVsdGFzLm1hcChkZWx0YSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IGRlbHRhS2V5KGRlbHRhKTtcclxuICAgICAgICAgICAgcmV0dXJuIGRlbHRhLnR5cGUgPT09ICdtb2RpZnknID9cclxuICAgICAgICAgICAgICA8RGVsdGFEb2NCb3ggZGVsdGE9e2RlbHRhfSBlZGl0YWJsZT17ZWRpdGFibGV9IGtleT17a2V5fSBvbkRlbGV0ZT17KCk9PntcclxuICAgICAgICAgICAgICAgIC8vIFVuZG8gRGVsdGFEb2NcclxuICAgICAgICAgICAgICAgIHVuZG9EZWx0YURvYyhkZWx0YSk7XHJcbiAgICAgICAgICAgICAgfX0gLz4gOlxyXG4gICAgICAgICAgICAgIDxEZWx0YUxpbmtCb3ggZGVsdGE9e2RlbHRhfSBlZGl0YWJsZT17ZWRpdGFibGV9IGtleT17a2V5fSBvbkRlbGV0ZT17KCk9PntcclxuICAgICAgICAgICAgICAgIC8vIFVuZG8gTGlua1xyXG4gICAgICAgICAgICAgICAgdW5kb0RlbHRhUmVsYXRpb24oZGVsdGEpO1xyXG4gICAgICAgICAgICAgIH19IC8+O1xyXG4gICAgICAgICAgfSl9XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJidG4gYnRuLWxhcmdlIGJ0bi13YXJuaW5nXCJcclxuICAgICAgICAgIG9uQ2xpY2s9eygpPT57XHJcbiAgICAgICAgICAgIGlmIChjb25maXJtKHRhZyA/XHJcbiAgICAgICAgICAgICAgTGDDhXRnw6RyZGVuIMOldGVyc3TDpGxsZXQga3Vyc2VuIHRpbGwgc3RhbmRhcmQuXFxuXFxuVmlsbCBkdSBmb3J0c8OkdHRhP2AgOiBcclxuICAgICAgICAgICAgICBMYMOFdGfDpHJkZW4gcmFkZXJhciBzYW10bGlnYSDDpG5kcmluZ2FyIHNvbSDDpG5udSBpbnRlIMOkciBwdWJsaWNlcmFkZS5cXG5cXG5WaWxsIGR1IGZvcnRzw6R0dGE/YCkpXHJcbiAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBkZWx0YSBvZiBkZWx0YXMpIHtcclxuICAgICAgICAgICAgICAgICAgaWYgKGRlbHRhLnR5cGUgPT09ICdtb2RpZnknKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdW5kb0RlbHRhRG9jKGRlbHRhKTtcclxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB1bmRvRGVsdGFSZWxhdGlvbihkZWx0YSk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9fVxyXG4gICAgICAgID57dGFnID9cclxuICAgICAgICAgIExgw4V0ZXJzdMOkbGwgdGlsbCBvcmdpbmFsZXRgOlxyXG4gICAgICAgICAgTGBSYWRlcmEgYWxsYSBvcHVibGljZXJhZGUgw6RuZHJpbmdhcmBcclxuICAgICAgICAgIH08L2J1dHRvbj5cclxuICAgICAgPC8+XHJcbiAgICApfVxyXG4gIDwvTGF6eUNvbnRlbnQ+XHJcblxyXG4gIGZ1bmN0aW9uIHVuZG9EZWx0YVJlbGF0aW9uKGRlbHRhOiBEZWx0YVJlbGF0aW9uKSB7XHJcbiAgICBkYi5icmFuY2goYnJhbmNoSWQpLnRhYmxlKGRlbHRhLnNvdXJjZVRhYmxlKVxyXG4gICAgICAudW5kb0xpbmsoZGVsdGEuc291cmNlSWQsIGRlbHRhLmxhYmVsLCBkZWx0YS50YXJnZXRJZCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiB1bmRvRGVsdGFEb2MoZGVsdGE6IERlbHRhRG9jKSB7XHJcbiAgICBjb25zdCB1bmRvaW5ncyA9IHt9O1xyXG4gICAgT2JqZWN0LmtleXMoZGVsdGEuZGF0YSkuZm9yRWFjaChrZXkgPT4ge1xyXG4gICAgICB1bmRvaW5nc1trZXldID0geyAkdW5zZXQ6IDAgfTtcclxuICAgIH0pO1xyXG4gICAgZGIuYnJhbmNoKGJyYW5jaElkKS50YWJsZShkZWx0YS50YWJsZSkudXBkYXRlKHtcclxuICAgICAgaWQ6IGRlbHRhLnRhcmdldElkLFxyXG4gICAgICBuYW1lOiBkZWx0YS50YXJnZXROYW1lXHJcbiAgICB9LCB1bmRvaW5ncyk7XHJcbiAgfVxyXG59IiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgRGVsdGFEb2MgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IG1heExlbmd0aCwgY2FwaXRhbGl6ZUZpcnN0LCBMIH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBtb2RlbE5hbWVzLCBGcmllbmRseVByb3BTcGVjLCBkZWx0YVR5cGVzIH0gZnJvbSAnLi9tb2RlbC1mcmllbmRseS1uYW1lcyc7XHJcbmltcG9ydCB7IHNob3J0RGF0ZUZvcm1hdCB9IGZyb20gJy4uLy4uLy4uL2NvdXJzZS1idWlsZGVyL3V0aWxzJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgZGVsdGE6IERlbHRhRG9jXHJcbiAgZWRpdGFibGU6IGJvb2xlYW5cclxuICBvbkRlbGV0ZTogKCk9PnZvaWRcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIERlbHRhRG9jQm94ICh7ZGVsdGEsIGVkaXRhYmxlLCBvbkRlbGV0ZX06IFByb3BzKSB7XHJcbiAgY29uc3QgZW50aXR5TmFtZSA9IGRlbHRhLnRhcmdldE5hbWUgJiYgbWF4TGVuZ3RoKGRlbHRhLnRhcmdldE5hbWUsIDgwKTtcclxuICBjb25zdCBjbGFzc05hbWVzID0gW1wic2Nob29sQ291cnNlXCJdO1xyXG4gIGlmIChkZWx0YS4kbWV0YSkgY2xhc3NOYW1lcy5wdXNoKGBlbnRpdHltZXRhLSR7ZGVsdGEuJG1ldGF9YCk7XHJcblxyXG4gIGNvbnN0IGZyaWVuZGx5RW50aXR5VHlwZSA9IGNhcGl0YWxpemVGaXJzdChcclxuICAgIG1vZGVsTmFtZXMuZW50aXR5VHlwZXNbZGVsdGEudGFibGVdIHx8IGRlbHRhLnRhYmxlKTtcclxuXHJcbiAgY29uc3QgZnJpZW5kbHlQcm9wcyA9IE9iamVjdC5rZXlzKGRlbHRhLmRhdGEpLm1hcChwcm9wID0+XHJcbiAgICAoe1xyXG4gICAgICBwcm9wU3BlYzogbW9kZWxOYW1lcy5wcm9wZXJ0eU5hbWVzW3Byb3BdIGFzIEZyaWVuZGx5UHJvcFNwZWMsXHJcbiAgICAgIHByb3BcclxuICAgIH0pKTtcclxuICBjb25zdCBoYXNVbmtub3duUHJvcHMgPSBmcmllbmRseVByb3BzLnNvbWUoZnAgPT4gIWZwLnByb3BTcGVjKTtcclxuICBcclxuICByZXR1cm4gPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXMuam9pbignICcpfT5cclxuICAgIDxkaXYgY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbFwiPlxyXG4gICAgICB7ZWRpdGFibGUgPyA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcCBwdWxsLXJpZ2h0XCI+XHJcbiAgICAgICAgPGEgY2xhc3NOYW1lPVwicmVtb3ZlSXRlbVwiIG9uQ2xpY2s9e29uRGVsZXRlfT48L2E+XHJcbiAgICAgIDwvZGl2PiA6IG51bGx9XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAge2VudGl0eU5hbWUgP1xyXG4gICAgICAgICAgPGE+e2ZyaWVuZGx5RW50aXR5VHlwZX0gXCJ7ZW50aXR5TmFtZX1cIjwvYT4gOlxyXG4gICAgICAgICAgPGE+e2ZyaWVuZGx5RW50aXR5VHlwZX08L2E+fVxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gICAge2ZyaWVuZGx5UHJvcHMuZmlsdGVyKCh7cHJvcFNwZWN9KSA9PiBwcm9wU3BlYykubWFwKCh7cHJvcFNwZWM6IFt0eXBlLCBwcm9wTmFtZV0sIHByb3B9KSA9PlxyXG4gICAgICA8ZGl2IGtleT17cHJvcH0+XHJcbiAgICAgICAge3R5cGUgPT09IGRlbHRhVHlwZXMuT2JzY3VyZSA/XHJcbiAgICAgICAgICA8cD57cHJvcE5hbWV9PC9wPiA6XHJcbiAgICAgICAgICB0eXBlID09PSBkZWx0YVR5cGVzLkhpZGRlbkNoYW5nZSA/IG51bGwgOlxyXG4gICAgICAgICAgPHA+e3Byb3BOYW1lfToge21vZGVsTmFtZXMuZ2V0UHJvcFZhbChkZWx0YS5kYXRhW3Byb3BdLCB0eXBlLCBwcm9wKX08L3A+fVxyXG4gICAgICA8L2Rpdj4pfVxyXG4gICAge2hhc1Vua25vd25Qcm9wcyA/IDxkaXY+XHJcbiAgICAgIDxwIHRpdGxlPXtKU09OLnN0cmluZ2lmeShkZWx0YS5kYXRhLCBudWxsLCA0KX0+e0xgw4RuZHJpbmdhciBpIGludGVybmEgZWdlbnNrYXBlcmB9PC9wPlxyXG4gICAgPC9kaXY+IDogbnVsbH1cclxuICAgIDxkaXY+XHJcbiAgICAgIDxwIGNsYXNzTmFtZT1cInNtYWxsXCI+XHJcbiAgICAgICAgICB7c2hvcnREYXRlRm9ybWF0KGRlbHRhLmRhdGVUaW1lKX0ge2RlbHRhLmNvbnRyaWJ1dG9ycy5qb2luKCcsICcpfVxyXG4gICAgICA8L3A+XHJcbiAgICA8L2Rpdj5cclxuICA8L2Rpdj47XHJcbn0iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBEZWx0YVJlbGF0aW9uIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBtYXhMZW5ndGgsIEwgfSBmcm9tICcuLi8uLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IG1vZGVsTmFtZXMsIEZyaWVuZGx5UHJvcFNwZWMsIGRlbHRhVHlwZXMsIHJlbW92ZUh0bWxUYWdzIH0gZnJvbSAnLi9tb2RlbC1mcmllbmRseS1uYW1lcyc7XHJcbmltcG9ydCB7IHNob3J0RGF0ZUZvcm1hdCB9IGZyb20gJy4uLy4uLy4uL2NvdXJzZS1idWlsZGVyL3V0aWxzJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgZGVsdGE6IERlbHRhUmVsYXRpb25cclxuICBlZGl0YWJsZTogYm9vbGVhblxyXG4gIG9uRGVsZXRlOiAoKT0+dm9pZFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gRGVsdGFMaW5rQm94ICh7ZGVsdGEsIGVkaXRhYmxlLCBvbkRlbGV0ZX06IFByb3BzKSB7XHJcbiAgY29uc3QgZW50aXR5TmFtZSA9IGRlbHRhLnRhcmdldE5hbWUgJiYgbWF4TGVuZ3RoKHJlbW92ZUh0bWxUYWdzKGRlbHRhLnRhcmdldE5hbWUpLCA4MCk7XHJcbiAgY29uc3QgY2xhc3NOYW1lcyA9IFtcInNjaG9vbENvdXJzZVwiXTtcclxuICBpZiAoZGVsdGEuJG1ldGEpIGNsYXNzTmFtZXMucHVzaChgZW50aXR5bWV0YS0ke2RlbHRhLiRtZXRhfWApO1xyXG5cclxuICBjb25zdCBmcmllbmRseU9wZXJhdGlvbiA9IG1vZGVsTmFtZXMuZ2V0TW9kaWZpZWRMaW5rSGVhZGluZyhkZWx0YSk7XHJcbiAgXHJcbiAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzLmpvaW4oJyAnKX0+XHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWxcIj5cclxuICAgICAge2VkaXRhYmxlID8gPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3AgcHVsbC1yaWdodFwiPlxyXG4gICAgICAgIDxhIGNsYXNzTmFtZT1cInJlbW92ZUl0ZW1cIiBvbkNsaWNrPXtvbkRlbGV0ZX0+PC9hPlxyXG4gICAgICA8L2Rpdj4gOiBudWxsfVxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgIHtlbnRpdHlOYW1lID9cclxuICAgICAgICAgIDxhPntmcmllbmRseU9wZXJhdGlvbn0gXCJ7ZW50aXR5TmFtZX1cIjwvYT4gOlxyXG4gICAgICAgICAgPGE+e2ZyaWVuZGx5T3BlcmF0aW9ufTwvYT59XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgICA8ZGl2PlxyXG4gICAgICA8cCBjbGFzc05hbWU9XCJzbWFsbFwiPlxyXG4gICAgICAgICAge3Nob3J0RGF0ZUZvcm1hdChkZWx0YS5kYXRlVGltZSl9IHtkZWx0YS5jb250cmlidXRvcn1cclxuICAgICAgPC9wPlxyXG4gICAgPC9kaXY+XHJcbiAgPC9kaXY+O1xyXG59IiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgTGF6eUNvbnRlbnQgfSBmcm9tICcuLi8uLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvbGF6eS1jb250ZW50JztcclxuaW1wb3J0IHsgZGIsIENvdXJzZUluc3RhbmNlcyB9IGZyb20gJy4uLy4uLy4uLy4uL2dsb2JhbHMvZGInO1xyXG5pbXBvcnQgeyBMYXp5QmFubmVyLCBCYW5uZXJQcm9wcyB9IGZyb20gJy4uLy4uL2NvbW1vbi9iYW5uZXInO1xyXG5pbXBvcnQgeyBFbWl0dGVyIH0gZnJvbSAna2VkYmFja2VuZC9vYnNlcnZhYmxlJztcclxuaW1wb3J0IHsgTCB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgTGluayB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xyXG5pbXBvcnQgeyBWZXJzaW9uSGlzdG9yeUJveCB9IGZyb20gJy4vdmVyc2lvbi1oaXN0b3J5LWJveCc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHNjaG9vbDogc3RyaW5nXHJcbiAgY291cnNlSWQ6IHN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgVmVyc2lvbkhpc3RvcnlQYWdlID0gKHtzY2hvb2wsIGNvdXJzZUlkfTogUHJvcHMpID0+IHtcclxuICBjb25zdCBzY2hvb2xPYnNlcnZhYmxlID0gZGIuc2Nob29scy5uYW1lKHNjaG9vbCkuc2luZ2xlKCk7XHJcbiAgY29uc3QgZHJhZnRPYnNlcnZhYmxlID1cclxuICAgIENvdXJzZUluc3RhbmNlcy5nZXRCcmFuY2hJZChzY2hvb2xPYnNlcnZhYmxlLCBjb3Vyc2VJZClcclxuICAgICAgLm1hcChkcmFmdElkID0+IGRiLmJyYW5jaChkcmFmdElkKSk7XHJcblxyXG4gIGNvbnN0IGJyYW5jaE9ic2VydmFibGUgPVxyXG4gICAgc2Nob29sT2JzZXJ2YWJsZS5tYXAoc2Nob29sID0+IGRiLmJyYW5jaChzY2hvb2wub2ZmaWNpYWxCcmFuY2hJZCkpO1xyXG5cclxuICBjb25zdCBiYW5uZXJQcm9wc09ic2VydmFibGUgPVxyXG4gICAgZHJhZnRPYnNlcnZhYmxlLnN3aXRjaE1hcChyZXBvID0+IHJlcG8uY291cnNlSW5zdGFuY2VzLmlkKGNvdXJzZUlkKS5tYXAoY291cnNlID0+ICh7XHJcbiAgICAgIHRpdGxlOiBjb3Vyc2UubmFtZSxcclxuICAgICAgdGFiczogW3tuYW1lOiBMYFZlcnNpb25zaGlzdG9yaWtgLCBrZXk6YHZlcnNpb25oaXN0b3J5YH1dLFxyXG4gICAgICBidXR0b25zOiBbPExpbmtcclxuICAgICAgICB0bz17YC8ke3NjaG9vbH0vY291cnNlcy8ke2NvdXJzZUlkfWB9XHJcbiAgICAgICAga2V5PVwiJHNldHRpbmdzXCJcclxuICAgICAgICB0aXRsZT17TGBWaXNhIGt1cnNlbmB9XHJcbiAgICAgID5cclxuICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1leWVcIiBhcmlhLWhpZGRlbj17dHJ1ZX0gLz4mbmJzcDtcclxuICAgICAgPC9MaW5rPl1cclxuICAgIH0gYXMgQmFubmVyUHJvcHMpKSk7XHJcbiAgcmV0dXJuIDw+XHJcbiAgICA8TGF6eUJhbm5lciBsYXp5UHJvcHM9e2Jhbm5lclByb3BzT2JzZXJ2YWJsZX0gLz5cclxuICAgIDxMYXp5Q29udGVudD57XHJcbiAgICAgIHNjaG9vbE9ic2VydmFibGUubWFwKCh7ZGlzcGxheU5hbWU6IHNjaG9vbERpc3BsYXlOYW1lLCBvZmZpY2lhbEJyYW5jaElkfSkgPT4gXHJcbiAgICAgICAgPFZlcnNpb25IaXN0b3J5Qm94XHJcbiAgICAgICAgICBicmFuY2hUeXBlPVwic2Nob29sLWJyYW5jaFwiXHJcbiAgICAgICAgICBicmFuY2hJZD17b2ZmaWNpYWxCcmFuY2hJZH1cclxuICAgICAgICAgIGNvdXJzZUlkPXtjb3Vyc2VJZH1cclxuICAgICAgICAgIGlzQWRtaW49e2ZhbHNlfVxyXG4gICAgICAgICAgLz5cclxuICAgIClcclxuICB9PC9MYXp5Q29udGVudD5cclxuICA8Lz5cclxuXHJcbiAgLyo8YnV0dG9uXHJcbiAgICBjbGFzc05hbWU9XCJidG4gYnRuLWxhcmdlIGJ0bi13YXJuaW5nXCJcclxuICAgIG9uQ2xpY2s9e2FzeW5jICgpPT57XHJcbiAgICAgIGlmIChjb25maXJtKExgQWxsYSBtb2RpZmllcmluZ2FyIHNvbSBnam9ydHMgZsO2ciBza29sYW4gJHtzY2hvb2xEaXNwbGF5TmFtZX0ga29tbWVyIGF0dCBmw7Zyc3Zpbm5hLlxyXG4gICAgICBcclxuICAgICAgRm9ydHPDpHR0P2ApKSB7XHJcbiAgICAgICAgY29uc3QgYnJhbmNoID0gYXdhaXQgYnJhbmNoT2JzZXJ2YWJsZS5sb2FkKCk7XHJcbiAgICAgICAgYnJhbmNoLmNsZWFyQnJhbmNoKCk7XHJcbiAgICAgICAgZGIuYnJhbmNoZXMuZGVsZXRlKClcclxuICAgICAgfVxyXG4gICAgfX1cclxuICA+e0xgw4V0ZXJzdMOkbGwga3Vyc2VuIHRpbGwgc3RhbmRhcmRgfTwvYnV0dG9uPiAqL1xyXG5cclxufVxyXG4iLCJpbXBvcnQgeyBLZWRUYWJsZU5hbWUgfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBMLCBtYXhMZW5ndGggfSBmcm9tICcuLi8uLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IENvdXJzZUluc3RhbmNlLCBDb3Vyc2VCbG9jaywgQ291cnNlQ29udGVudCwgQ291cnNlVGFiLCBUYXNrLCBEZWx0YVJlbGF0aW9uIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5cclxuY29uc3QgVGV4dCA9IFN5bWJvbChcIlR5cGVUZXh0XCIpO1xyXG5jb25zdCBDaGVja2JveCA9IFN5bWJvbChcIlR5cGVDaGVja2JveFwiKTtcclxuY29uc3QgT2JzY3VyZSA9IFN5bWJvbChcIlR5cGVPYnN1cmVcIik7XHJcbmNvbnN0IEhpZGRlbkNoYW5nZSA9IFN5bWJvbChcIlR5cGVIaWRkZW5DaGFuZ2VcIik7XHJcbmNvbnN0IEh0bWwgPSBTeW1ib2woXCJUeXBlSHRtbFwiKTtcclxuXHJcbmV4cG9ydCBjb25zdCBkZWx0YVR5cGVzID0ge1xyXG4gIFRleHQsXHJcbiAgSHRtbCxcclxuICBDaGVja2JveCxcclxuICBPYnNjdXJlLFxyXG4gIEhpZGRlbkNoYW5nZVxyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgRnJpZW5kbHlQcm9wU3BlYyA9IFtQcm9wZXJ0eVR5cGUsIHN0cmluZ107XHJcblxyXG50eXBlIFByb3BlcnR5VHlwZSA9IHR5cGVvZiBkZWx0YVR5cGVzW2tleW9mIHR5cGVvZiBkZWx0YVR5cGVzXTtcclxudHlwZSBQcm9wZXJ0eU1hcDxUPiA9IHtbUCBpbiBrZXlvZiBUXT86IEZyaWVuZGx5UHJvcFNwZWN9O1xyXG5cclxuaW50ZXJmYWNlIE1vZGVsTmFtZXMge1xyXG4gIGVudGl0eVR5cGVzOiB7W3RhYmxlTmFtZU9yTGFiZWwgaW4gS2VkVGFibGVOYW1lXT86IHN0cmluZ31cclxuICBtb2RpZmllZExpbmtzOiB7W2xhYmVsOiBzdHJpbmddOiBbc3RyaW5nLCBzdHJpbmddfVxyXG4gIHByb3BlcnR5TmFtZXM6XHJcbiAgICBQcm9wZXJ0eU1hcDxDb3Vyc2VJbnN0YW5jZT4gJlxyXG4gICAgUHJvcGVydHlNYXA8Q291cnNlQmxvY2s+ICZcclxuICAgIFByb3BlcnR5TWFwPENvdXJzZUNvbnRlbnQ+ICZcclxuICAgIFByb3BlcnR5TWFwPENvdXJzZVRhYj4gJlxyXG4gICAgUHJvcGVydHlNYXA8VGFzaz5cclxuICBnZXRNb2RpZmllZExpbmtIZWFkaW5nKGRlbHRhUmVsYXRpb246IERlbHRhUmVsYXRpb24pOiBzdHJpbmc7XHJcbiAgZ2V0UHJvcFZhbChwOiBhbnksIHR5cGU6IFByb3BlcnR5VHlwZSwgcHJvcDogc3RyaW5nKTogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgbW9kZWxOYW1lczogTW9kZWxOYW1lcyA9IHtcclxuICBlbnRpdHlUeXBlczoge1xyXG4gICAgY291cnNlQmxvY2tzOiBMYGt1cnNibG9ja2AsXHJcbiAgICBjb3Vyc2VDb250ZW50czogTGBpbm5laMOlbGxzcnV0YWAsXHJcbiAgICBjb3Vyc2VJbnN0YW5jZXM6IExga3Vyc2AsXHJcbiAgICBjb3Vyc2VUYWJzOiBMYGZsaWtgLFxyXG4gICAgc2Nob29sczogTGBza29sYWAsXHJcbiAgICB0YXNrczogTGB1cHBnaWZ0YCxcclxuICB9LFxyXG4gIG1vZGlmaWVkTGlua3M6IHtcclxuICAgIHRhYnM6IFtMYFRpbGxhZ2QgZmxpa2AsIExgQm9ydHRhZ2VuIGZsaWtgXSxcclxuICAgIGJsb2NrczogW0xgVGlsbGFndCBibG9ja2AsIExgQm9ydHRhZ2V0IGJsb2NrYF0sXHJcbiAgICBhYmlsaXRpZXM6IFtMYFRpbGxhZ2QgZsO2cm3DpWdhYCwgTGBCb3J0dGFnZW4gZsO2cm3DpWdhYF0sXHJcbiAgICBjZW50cmFsQ29udGVudDogW0xgVGlsbGFndCBjZW50cmFsdCBpbm5laMOlbGxgLCBMYEJvcnR0YWdldCBjZW50cmFsdCBpbm5laMOlbGxgXSxcclxuICAgIGtub3dsZWRnZVJlcXVpcmVtZW50czogW0xgVGlsbGFndCBrdW5za2Fwc2tyYXZgLCBMYEJvcnR0YWdldCBrdW5za2Fwc2tyYXZgXSxcclxuICAgIHRhc2tzOiBbTGBUaWxsYWdkIHVwcGdpZnRgLCBMYEJvcnR0YWdlbiB1cHBnaWZ0YF0sXHJcbiAgICBjb250ZW50czogW0xgVGlsbGFnZCBpbm5laMOlbGxzcnV0YWAsIExgQm9ydHRhZ2VuIGlubmVow6VsbHNydXRhYF1cclxuICB9LFxyXG4gIHByb3BlcnR5TmFtZXM6IHtcclxuICAgIGFsbG93QWRkVGFiczogW0NoZWNrYm94LCBMYMOEbmRyYXQgb20gdGlsbMOkZ2cgYXYgZmxpayBza2EgdmFyYSB0aWxsw6V0ZXRgXSxcclxuICAgIGFsbG93UmVtb3ZlVGFiczogW0NoZWNrYm94LCBMYMOEbmRyYXQgb20gYm9ydHRhZ25pbmcgYXYgZmxpayBza2EgdmFyYSB0aWxsw6V0ZXRgXSxcclxuICAgIGFsbG93UmVvcmRlclRhYnM6IFtDaGVja2JveCwgTGDDhG5kcmF0IG9tIGRldCBza2EgdmEgdGlsbMOldGV0IGF0dCDDpG5kcmEgb3JkbmluZyBww6UgZmxpa2BdLFxyXG4gICAgYXNzaWdubWVudDogW0NoZWNrYm94LCBMYMOEbmRyYWQgZmxhZ2dhIGbDtnIgaW5sw6RtbmluZ3N1cHBnaWZ0YF0sXHJcbiAgICBjb21tb25MZWFybmluZ0dvYWxzOiBbVGV4dCwgTGDDhG5kcmFkZSBnZW1lbnNhbW1hIGzDpHJhbmRlbcOlbGBdLFxyXG4gICAgY29udGVudDogW0h0bWwsIExgw4RuZHJhZCBpbm5laMOlbGxzdGV4dGBdLFxyXG4gICAgY3JlYXRlZEJ5OiBbSGlkZGVuQ2hhbmdlLCBMYFNrYXBhZCBhdmBdLFxyXG4gICAgY3JlYXRlZERhdGU6IFtIaWRkZW5DaGFuZ2UsIExgU2thcGFkIGRhdHVtYF0sXHJcbiAgICBkYXRlVGltZTogW09ic2N1cmUsIExgw4RuZGF0IGRhdHVtIC8gdGlkYF0sXHJcbiAgICBkZWFkbGluZTogW1RleHQsIExgw4RuZHJhdCBpbmzDpG1uaW5nc2RhdHVtYF0sXHJcbiAgICBkZXNjcmlwdGlvbjogW0h0bWwsIExgw4RuZHJhZCBiZXNrcml2bmluZ2BdLFxyXG4gICAgZW1iZWRkZWRIdG1sOiBbT2JzY3VyZSwgTGBMYWd0IHRpbGwgaW5iw6RkZGFkIEhUTUxgXSxcclxuICAgIGV4cGxhaW5lZFJlcXVpcmVtZW50czogW09ic2N1cmUsIExgTGFndCB0aWxsIGVnbmEgZsO2cmtsYXJpbmdhciBhdiBrdW5za2Fwc2tyYXZgXSxcclxuICAgIGZ1dHVyZUFiaWxpdGllczogW1RleHQsIExgw4RuZHJhZGUgZnJhbXRpZHNmw7ZybcOlZ29yYF0sXHJcbiAgICBoYXNDb21tb25MZWFybmluZ0dvYWxzOiBbQ2hlY2tib3gsIExgw4RuZHJhZCBpbnN0w6RsbG5pbmcgZsO2ciBnZW1lbnNhbW1hIGzDpHJhbmRlbcOlbGBdLFxyXG4gICAgaGlkZGVuOiBbQ2hlY2tib3gsIExgw4RuZHJhZCBmbGFnZ2EgXCJnw7ZtZFwiYF0sIC8vIFRoaXMgcHJvcCBzaG91bGQgbm90IGJlIHVzZWQgSSB0aGlua1xyXG4gICAgaGlkZGVuVGFza3M6IFtPYnNjdXJlLCBMYMOEbmRyYXQgbGlzdGFuIHDDpSBnw7ZtZGEgdXBwZ2lmdGVyYF0sIC8vIEkgdGhpbmsgdGhpcyBwcm9wIHNob3VsZCBub3QgYmUgdXNlZFxyXG4gICAgaHRtbDogW09ic2N1cmUsIExgw4RuZHJhdCBpbm5laMOlbGxgXSxcclxuICAgIGxlYXJuaW5nR29hbDogW1RleHQsIExgTMOkcmFuZGVtw6VsYF0sXHJcbiAgICBsb2NrRGVsZXRlOiBbQ2hlY2tib3gsIExgw4RuZHJhdCBmbGFnZ2E6IFwibMOlcyBmcsOlbiBib3J0dGFnbmluZ1wiYF0sXHJcbiAgICBsb2NrZWQ6IFtDaGVja2JveCwgTGDDhG5kcmFkIGZsYWdnYTogXCJmw7ZyYmp1ZCDDpG5kcmluZyBhdiBmbGlrYXJcImBdLFxyXG4gICAgbWlncmF0ZWRUZXh0czogW09ic2N1cmUsIExgw4RuZHJpbmdhciBpIG1pZ3JlcmFkZSB0ZXh0ZXIgZnLDpW4gc2tvbHZlcmtldGBdLFxyXG4gICAgbW9kaWZpZWRCeTogW0hpZGRlbkNoYW5nZSwgTGDDhG5kcmFkIGF2YF0sXHJcbiAgICBtb2RpZmllZERhdGU6IFtIaWRkZW5DaGFuZ2UsIExgw4RuZHJpbmdzZGF0dW1gXSxcclxuICAgIHRhc2tPcmRlcjogW09ic2N1cmUsIExgw4RuZHJhZCBvcmRuaW5nIHDDpSB1cHBnaWZ0ZXJgXSxcclxuICAgIG5hbWU6IFtUZXh0LCBMYMOEbmRyYXQgbmFtbmBdLFxyXG4gICAgb3JkZXI6IFtPYnNjdXJlLCBMYMOEbmRyYWQgb3JkbmluZ2BdLFxyXG4gICAgcmVzb3VyY2VzOiBbT2JzY3VyZSwgTGDDhG5kcmFkZSBpIHJlc3Vyc2VyYF0sXHJcbiAgICBzY2hvb2w6IFtUZXh0LCBMYFNrb2xhYF0sIC8vIE11c3QgbmV2ZXIgYmUgdW5kb25lIGlzb2xhdGVkIHdpdGhvdXQgbG9naWNcclxuICAgIHN0ZXBObzogW1RleHQsIExgU3RlZ251bW1lcmBdLCAvLyBNdXN0IG5ldmVyIGJlIHVuZG9uZSBpc29sYXRlZCB3aXRob3V0IGxvZ2ljXHJcbiAgICBzdGVwTnVtYmVyczogW1RleHQsIExgU3RlZ251bW1lcmBdLC8vIE11c3QgbmV2ZXIgYmUgdW5kb25lIGlzb2xhdGVkIHdpdGhvdXQgbG9naWNcclxuICAgIHN1YmplY3Q6IFtUZXh0LCBMYMOEbW5lYF0sIC8vIE11c3QgbmV2ZXIgYmUgdW5kb25lIGlzb2xhdGVkIHdpdGhvdXQgbG9naWNcclxuICAgIHN1YmplY3RzOiBbT2JzY3VyZSwgTGDDhG1uZW5gXSwgLy8gTXVzdCBuZXZlciBiZSB1bmRvbmUgaXNvbGF0ZWQgd2l0aG91dCBsb2dpY1xyXG4gICAgdGFiQ2xhc3M6IFtUZXh0LCBMYFR5cCBhdiBmbGlrYF0sIC8vIE11c3QgbmV2ZXIgYmUgdW5kb25lIGlzb2xhdGVkIHdpdGhvdXQgbG9naWNcclxuICAgIHRhYlRpdGxlOiBbSGlkZGVuQ2hhbmdlLCBMYEZsaWtuYW1uYF0sIC8vIERlcHJlY2F0ZWRcclxuICAgIHRhc2tUeXBlOiBbVGV4dCwgTGBVcHBnaWZ0c3R5cGBdLFxyXG4gICAgdXJsOiBbVGV4dCwgTGBVcmxgXSxcclxuICAgIHdvcmtpbmdQcm9jZWR1cmU6IFtIdG1sLCBMYEFyYmV0c3Byb2Nlc3NgXSxcclxuICAgIHlvdXR1YmVJZDogW09ic2N1cmUsIExgWW91dHViZSBJRGBdXHJcbiAgfSxcclxuICBnZXRNb2RpZmllZExpbmtIZWFkaW5nKGRlbHRhOiBEZWx0YVJlbGF0aW9uKSB7XHJcbiAgICBjb25zdCBoZWFkaW5nU3BlYyA9IG1vZGVsTmFtZXMubW9kaWZpZWRMaW5rc1tkZWx0YS5sYWJlbF07XHJcbiAgICBpZiAoIWhlYWRpbmdTcGVjKSB7XHJcbiAgICAgIHJldHVybiBkZWx0YS50eXBlID09PSAnYWRkJyA/IExgVGlsbGFndCBvYmpla3RgIDpcclxuICAgICAgIGRlbHRhLnR5cGUgPT09ICdyZW1vdmUnID8gTGBCb3J0dGFnZXQgb2JqZWt0YCA6XHJcbiAgICAgICBMYMOFbmdyYWQgbMOkbmtuaW5nYDsgLy8gU2hvdWxkIG5ldmVyIGJlXHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGVsdGEudHlwZSA9PT0gJ2FkZCcgP1xyXG4gICAgICBoZWFkaW5nU3BlY1swXSA6IGRlbHRhLnR5cGUgPT09ICdyZW1vdmUnID9cclxuICAgICAgaGVhZGluZ1NwZWNbMV0gOiBMYMOFbmdyYWQgbMOkbmtuaW5nYDsgLy8gU2hvdWxkIG5ldmVyIGJlXHJcbiAgfSxcclxuICBnZXRQcm9wVmFsKHA6IGFueSwgdHlwZTogUHJvcGVydHlUeXBlLCBwcm9wOiBzdHJpbmcpIHtcclxuICAgIHN3aXRjaCAocCkge1xyXG4gICAgICBjYXNlIHRydWU6IHJldHVybiBMYFDDpXNsYWdldGA7XHJcbiAgICAgIGNhc2UgZmFsc2U6IHJldHVybiBMYEF2c2xhZ2V0YDtcclxuICAgICAgY2FzZSAncHJpbWFyeSc6IHJldHVybiBMYEdydW5kc2tvbGFgO1xyXG4gICAgICBjYXNlICdneW1uYXNpdW0nOiByZXR1cm4gTGBHeW1uYXNpZXNrb2xhYDtcclxuICAgICAgY2FzZSAnZXhlcmNpc2UnOiByZXR1cm4gTGDDlnZuaW5nc3VwcGdpZnRgO1xyXG4gICAgICBjYXNlICd0YXNrJzogcmV0dXJuIExgVXBwZ2lmdGA7XHJcbiAgICAgIGNhc2UgJ2Fzc2lnbm1lbnQnOiByZXR1cm4gTGBJbmzDpG1uaW5nc3VwcGdpZnRgO1xyXG4gICAgICBjYXNlICd0aGVtZS1jb3Vyc2UnOiByZXR1cm4gTGBUZW1ha3Vyc2A7XHJcbiAgICAgIGNhc2UgJ3N0ZXAtY291cnNlJzogcmV0dXJuIExgU3RlZ2t1cnNgO1xyXG4gICAgICBjYXNlICdpbnRyby10YWInOiByZXR1cm4gTGBJbnRyb2R1a3Rpb25zZmxpa2A7XHJcbiAgICAgIGNhc2UgJ3J1bi11cC10YWInOiByZXR1cm4gTGBVcHB0YWt0YDtcclxuICAgICAgY2FzZSAnc3ViamVjdC10YWInOiByZXR1cm4gTGDDhG1uZXNmbGlrYDtcclxuICAgICAgY2FzZSAnbWlzc2lvbi10YWInOiByZXR1cm4gTGBVcHBkcmFnc2ZsaWtgO1xyXG4gICAgICBjYXNlICdjb250ZW50LXRhYic6IHJldHVybiBMYElubmVow6VsbHNmbGlrYDtcclxuICAgICAgY2FzZSAndGVhY2hlci10YWInOiByZXR1cm4gTGBMw6RyYXJzaWRhYDtcclxuICAgICAgY2FzZSAnd29yZC1iYW5rLXRhYic6IHJldHVybiBMYE9yZGJhbmtgO1xyXG4gICAgICBkZWZhdWx0OiB7XHJcbiAgICAgICAgaWYgKHAgPT0gbnVsbCkgcmV0dXJuIExgTm9sbHN0w6RsbHRgO1xyXG4gICAgICAgIGlmIChwID09PSBcIlwiKSByZXR1cm4gTGAodG9tdClgO1xyXG4gICAgICAgIGlmICh0eXBlID09PSBIdG1sKSByZXR1cm4gbWF4TGVuZ3RoKHJlbW92ZUh0bWxUYWdzKHApLCAzMDApO1xyXG4gICAgICAgIGlmICh0eXBlb2YgcCA9PT0gJ3N0cmluZycpIHJldHVybiBwO1xyXG4gICAgICAgIGlmIChwLnN1YmplY3ROYW1lKSByZXR1cm4gcC5zdWJqZWN0TmFtZTtcclxuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkocCwgbnVsbCwgMik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVIdG1sVGFncyhodG1sOiBzdHJpbmcpIHtcclxuICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICBkaXYuaW5uZXJIVE1MID0gaHRtbDtcclxuICByZXR1cm4gZGl2LmlubmVyVGV4dDtcclxufVxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBEZWx0YVZpZXcgfSBmcm9tICcuL2RlbHRhLXZpZXcnO1xyXG5cclxudHlwZSBQcm9wcyA9IHtcclxuICBicmFuY2hJZDogc3RyaW5nXHJcbiAgYnJhbmNoVHlwZTogJ3NjaG9vbC1icmFuY2gnXHJcbiAgY291cnNlSWQ6IHN0cmluZ1xyXG4gIGlzQWRtaW46IGJvb2xlYW5cclxufSB8IHtcclxuICBicmFuY2hJZDogc3RyaW5nXHJcbiAgYnJhbmNoVHlwZTogJ2RyYWZ0LWJyYW5jaCdcclxuICBpc0FkbWluOiBib29sZWFuXHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gVmVyc2lvbkhpc3RvcnlCb3gocHJvcHM6IFByb3BzKSB7XHJcbiAgY29uc3QgdGl0bGUgPSBwcm9wcy5icmFuY2hUeXBlID09PSAnc2Nob29sLWJyYW5jaCcgP1xyXG4gICAgPGgyPntMYFNrb2xhbnMgw6RuZHJpbmdhcmB9PC9oMj4gOlxyXG4gICAgPGgzPntMYE9wdWJsaWNlcmFkZSDDpG5kcmluZ2FyYH08L2gzPjtcclxuXHJcbiAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwia2VkX2JveGVkXCI+XHJcbiAgICB7dGl0bGV9XHJcbiAgICA8RGVsdGFWaWV3XHJcbiAgICAgIGJyYW5jaElkPXtwcm9wcy5icmFuY2hJZH1cclxuICAgICAgZWRpdGFibGU9eyFwcm9wcy5pc0FkbWlufVxyXG4gICAgICB0YWc9e3Byb3BzLmJyYW5jaFR5cGUgPT09ICdzY2hvb2wtYnJhbmNoJyA/IHByb3BzLmNvdXJzZUlkIDogbnVsbH0gLz5cclxuICA8L2Rpdj47XHJcbn1cclxuIiwiaW1wb3J0IHsgRG9jdW1lbnQsIENvdXJzZSwgS25vd2xlZGdlUmVxdWlyZW1lbnQsIENvdXJzZU1vZHVsZSwgVGFzaywgU29mdERvY3VtZW50QWNjZXNzIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBmbGF0dGVuLCBMIH0gZnJvbSBcIi4uLy4uLy4uL3V0aWxzL3V0aWxzXCI7XHJcbmltcG9ydCB7IFdpdGhHcmFwaHMgfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBnZXRFbWFpbEZyb21Eb2NBY2Nlc3MgfSBmcm9tICcuLi91dGlscyc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VW5jb3ZlcmVkS25vd2xlZGdlUmVxdWlyZW1lbnRzKGNvdXJzZTogQ291cnNlKSB7XHJcbiAgY29uc3QgdW5jb3ZlcmVkUmVxdWlyZW1lbnRzID0gY291cnNlLmtub3dsZWRnZVJlcXVpcmVtZW50cy5yZWR1Y2UoKHJlc3VsdCwgaXRlbSkgPT4ge1xyXG4gICAgcmVzdWx0W2l0ZW0uaWRdID0gaXRlbTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfSwge30gYXMgeyBbaWQ6IHN0cmluZ106IEtub3dsZWRnZVJlcXVpcmVtZW50IH0pO1xyXG5cclxuICBjb3Vyc2UudGFza3MuZm9yRWFjaCh0YXNrID0+IHtcclxuICAgIHRhc2sua25vd2xlZGdlUmVxdWlyZW1lbnRzLmZvckVhY2goa3IgPT4ge1xyXG4gICAgICBkZWxldGUgdW5jb3ZlcmVkUmVxdWlyZW1lbnRzW2tyLmlkXTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICByZXR1cm4gT2JqZWN0LmtleXModW5jb3ZlcmVkUmVxdWlyZW1lbnRzKS5tYXAoaWQgPT4gdW5jb3ZlcmVkUmVxdWlyZW1lbnRzW2lkXSk7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUmVxc1JlZmVyZW5jaW5nRG9jIHtcclxuICBrbm93bGVkZ2VSZXF1aXJlbWVudHM6IEFycmF5PHtpZDogc3RyaW5nfT5cclxuICBhYmlsaXRpZXM6IEFycmF5PHtpZDogc3RyaW5nfT5cclxuICBjZW50cmFsQ29udGVudDogQXJyYXk8e2lkOiBzdHJpbmd9PlxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0SWRzTm90Q292ZXJlZEJ5VGFza3MoY291cnNlOiBDb3Vyc2UpIDoge1tpZDogc3RyaW5nXTogdHJ1ZX0ge1xyXG4gIHJldHVybiBnZXRJZHNOb3RDb3ZlcmVkQnlSZXFSZWZlcmVuY2luZ0RvY3MoXHJcbiAgICBbY291cnNlIGFzIFdpdGhHcmFwaHM8Q291cnNlLCBcImFiaWxpdGllc1wiIHwgXCJjZW50cmFsQ29udGVudFwiIHwgXCJrbm93bGVkZ2VSZXF1aXJlbWVudHNcIj5dLFxyXG4gICAgY291cnNlLnRhc2tzIGFzIFdpdGhHcmFwaHM8VGFzaywgXCJhYmlsaXRpZXNcIiB8IFwiY2VudHJhbENvbnRlbnRcIiB8IFwia25vd2xlZGdlUmVxdWlyZW1lbnRzXCI+W10pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0SWRzTm90Q292ZXJlZEJ5UmVxUmVmZXJlbmNpbmdEb2NzKFxyXG4gIHRlbXBsYXRlczogUmVxc1JlZmVyZW5jaW5nRG9jW10sXHJcbiAgZG9jc0JlaW5nQ2hlY2tlZDogUmVxc1JlZmVyZW5jaW5nRG9jW10pIDoge1tpZDogc3RyaW5nXTogdHJ1ZX1cclxue1xyXG4gIGNvbnN0IHVuY292ZXJlZElkcyA9IHt9O1xyXG4gIC8vIDEuIE1hcmsgdGhlIGlkcyBvZiBhbGwga25vd2xlZGdlIHJlcXVpcmVtZW50cywgYWJpbGl0aWVzIGFuZCBjZW50cmFsIGNvbnRlbnQgZm9yIHRoaXMgY291cnNlOlxyXG4gIHRlbXBsYXRlcy5mb3JFYWNoKGNvdXJzZSA9PiB7XHJcbiAgICBjb3Vyc2Uua25vd2xlZGdlUmVxdWlyZW1lbnRzLmZvckVhY2gociA9PiB7XHJcbiAgICAgIHVuY292ZXJlZElkc1tyLmlkXSA9IHRydWU7XHJcbiAgICB9KTtcclxuICAgIGNvdXJzZS5hYmlsaXRpZXMuZm9yRWFjaChhID0+IHtcclxuICAgICAgdW5jb3ZlcmVkSWRzW2EuaWRdID0gdHJ1ZTtcclxuICAgIH0pO1xyXG4gICAgY291cnNlLmNlbnRyYWxDb250ZW50LmZvckVhY2goY2MgPT4ge1xyXG4gICAgICB1bmNvdmVyZWRJZHNbY2MuaWRdID0gdHJ1ZTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG4gIC8vIDIuIExpc3QgYWxsIHRhc2tzIGFuZCB1bm1hcmsgYWxsIGlkcyB0aGF0IHRoZXkgcmVmZXIgdG9cclxuICBkb2NzQmVpbmdDaGVja2VkLmZvckVhY2goZG9jID0+IHtcclxuICAgIGRvYy5rbm93bGVkZ2VSZXF1aXJlbWVudHMuZm9yRWFjaChrciA9PiB7XHJcbiAgICAgIGRlbGV0ZSB1bmNvdmVyZWRJZHNba3IuaWRdO1xyXG4gICAgfSk7XHJcbiAgICBkb2MuYWJpbGl0aWVzLmZvckVhY2goYSA9PiB7XHJcbiAgICAgIGRlbGV0ZSB1bmNvdmVyZWRJZHNbYS5pZF07XHJcbiAgICB9KTtcclxuICAgIGRvYy5jZW50cmFsQ29udGVudC5mb3JFYWNoKGNjID0+IHtcclxuICAgICAgZGVsZXRlIHVuY292ZXJlZElkc1tjYy5pZF07XHJcbiAgICB9KTtcclxuICB9KTtcclxuICByZXR1cm4gdW5jb3ZlcmVkSWRzO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2FuaXR5Q2hlY2sgKGNvdXJzZTogQ291cnNlKSB7XHJcbiAgZnVuY3Rpb24gaGFzRHVwbGljYXRlVGFza3MoY291cnNlOiBDb3Vyc2UpIHtcclxuICAgIGNvbnN0IHRhc2tJZHM6IHtbaWQ6c3RyaW5nXTogYm9vbGVhbn0gPSB7fTtcclxuICAgIHJldHVybiBmbGF0dGVuKGNvdXJzZS5tb2R1bGVzLm1hcChtb2R1bGUgPT4gbW9kdWxlLnRhc2tJZHMubWFwKHRhc2tJZCA9PiB7XHJcbiAgICAgIGlmICh0YXNrSWRzW3Rhc2tJZF0pIHtcclxuICAgICAgICBjb25zdCB0YXNrID0gY291cnNlLnRhc2tzLmZpbmQodCA9PiB0LmlkID09PSB0YXNrSWQpO1xyXG4gICAgICAgIHJldHVybiBMYFNhbW1hIHVwcGdpZnQgZsO2cmVrb21tZXIgZmxlcmEgZ8OlbmdlcjogXCIke3Rhc2submFtZX1cImA7XHJcbiAgICAgIH1cclxuICAgICAgdGFza0lkc1t0YXNrSWRdID0gdHJ1ZTtcclxuICAgIH0pLmZpbHRlcih4ID0+IHgpKSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiB0YXNrc1dpdGhTYW1lVXJsKGNvdXJzZTogQ291cnNlKSB7XHJcbiAgICBjb25zdCB0YXNrVXJsczoge1t1cmw6c3RyaW5nXTogVGFza30gPSB7fTtcclxuICAgIHJldHVybiBjb3Vyc2UudGFza3MubWFwKHRhc2sgPT4ge1xyXG4gICAgICBpZiAodGFzay51cmwpIHtcclxuICAgICAgICBpZiAodGFza1VybHNbdGFzay51cmxdKSB7XHJcbiAgICAgICAgICByZXR1cm4gTGBUdsOlIHVwcGdpZnRlciBwZWthciBww6Ugc2FtbWEgVVJMOiBcIiR7dGFza1VybHNbdGFzay51cmxdLm5hbWV9XCIgc2FtdCBcIiR7dGFzay5uYW1lfVwiYDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGFza1VybHNbdGFzay51cmxdID0gdGFzaztcclxuICAgICAgfVxyXG4gICAgfSkuZmlsdGVyKHggPT4geCk7ICBcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGhhc0VtcHR5TW9kdWxlTmFtZXMoY291cnNlOiBDb3Vyc2UpIHtcclxuICAgIHJldHVybiBjb3Vyc2UubW9kdWxlcy5zb21lIChtb2R1bGUgPT4gbW9kdWxlLm5hbWUgPT09IFwiXCIpICYmXHJcbiAgICAgIExgRGV0IGZpbm5zIG1pbnN0IGVuIG1vZHVsIHV0YW4gYW5naXZldCBuYW1uYDtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGhhc0R1cGxpY2F0ZU1vZHVsZU5hbWVzKGNvdXJzZTogQ291cnNlKSB7XHJcbiAgICBjb25zdCBtb2R1bGVOYW1lczoge1tuYW1lOiBzdHJpbmddOiB0cnVlfSA9IHt9O1xyXG4gICAgcmV0dXJuIGNvdXJzZS5tb2R1bGVzLm1hcChtb2R1bGUgPT4ge1xyXG4gICAgICBpZiAobW9kdWxlLm5hbWUgJiYgbW9kdWxlTmFtZXNbbW9kdWxlLm5hbWVdKSB7XHJcbiAgICAgICAgcmV0dXJuIExgTW9kdWxlbiBtZWQgbmFtbiAke21vZHVsZS5uYW1lfSBmw7ZyZWtvbW1lciBmbGVyYSBnw6VuZ2VyYDtcclxuICAgICAgfVxyXG4gICAgICBpZiAobW9kdWxlLm5hbWUpIG1vZHVsZU5hbWVzW21vZHVsZS5uYW1lXSA9IHRydWU7XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgY29uc3QgY2hlY2tzID0gZmxhdHRlbihbXHJcbiAgICBoYXNEdXBsaWNhdGVUYXNrcyhjb3Vyc2UpLFxyXG4gICAgdGFza3NXaXRoU2FtZVVybChjb3Vyc2UpLFxyXG4gICAgaGFzRW1wdHlNb2R1bGVOYW1lcyhjb3Vyc2UpLFxyXG4gICAgaGFzRHVwbGljYXRlTW9kdWxlTmFtZXMoY291cnNlKVxyXG4gIF0pO1xyXG5cclxuICByZXR1cm4gY2hlY2tzLmZpbHRlciAocmVzdWx0ID0+IHJlc3VsdCk7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGFza3NQZXJJZCAoY291cnNlOiBDb3Vyc2UpIHtcclxuICBjb25zdCByZXN1bHQ6IHtbaWQ6IHN0cmluZ106IFRhc2tbXX0gPSB7fTtcclxuICBmdW5jdGlvbiBhZGQoaWQ6IHN0cmluZywgdGFzazogVGFzaykge1xyXG4gICAgY29uc3QgbGlzdCA9IHJlc3VsdFtpZF0gfHwgKHJlc3VsdFtpZF0gPSBbXSk7XHJcbiAgICBsaXN0LnB1c2godGFzayk7XHJcbiAgfVxyXG4gIGNvdXJzZS50YXNrcy5mb3JFYWNoKHRhc2sgPT4ge1xyXG4gICAgdGFzay5hYmlsaXRpZXMuZm9yRWFjaChhID0+IGFkZChhLmlkLCB0YXNrKSk7XHJcbiAgICB0YXNrLmNlbnRyYWxDb250ZW50LmZvckVhY2goYyA9PiBhZGQoYy5pZCwgdGFzaykpO1xyXG4gICAgdGFzay5mdXR1cmVBYmlsaXRpZXMuZm9yRWFjaChmYSA9PiBhZGQoZmEsIHRhc2spKTtcclxuICB9KTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG4vKiogUmV0dXJucyBhbiBhY2Nlc3MgbGlzdCBmb3IgYSBjb3Vyc2UgaW4gYSBiYWNrd2FyZCBjb21wYXRpYmxlIHdheSAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0U29mdEFjY2Vzc0xpc3QgKGNvdXJzZTogQ291cnNlKTogU29mdERvY3VtZW50QWNjZXNzW10ge1xyXG4gIGNvbnN0IHtyZXNwb25zaWJsZVRlYWNoZXJzfSA9IGNvdXJzZTtcclxuICBjb25zdCByZXN1bHQgPSByZXNwb25zaWJsZVRlYWNoZXJzLm1hcChkYSA9Pih7XHJcbiAgICBuYW1lOiBkYS5uYW1lLFxyXG4gICAgZW1haWw6IGdldEVtYWlsRnJvbURvY0FjY2VzcyhkYSksXHJcbiAgICBhY2Nlc3M6IGRhLmFjY2VzcyB8fCAnZWRpdCdcclxuICB9IGFzIFNvZnREb2N1bWVudEFjY2VzcykpO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBTY2hvb2xDb3Vyc2VzIH0gZnJvbSAnLi4vc3ViLWNvbXBvbmVudHMvc2Nob29sLWNvdXJzZXMnO1xyXG5pbXBvcnQgeyBSZXNvdXJjZSB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgZHRGb3JtYXQgfSBmcm9tICcuLi91dGlscyc7XHJcbmltcG9ydCB7IERpYWxvZyB9IGZyb20gJy4uL2ludGVyZmFjZXMvY291cnNlLWVkaXRvci1ob3N0JztcclxuaW1wb3J0IHZhbGlkVXJsIGZyb20gJ3ZhbGlkLXVybCc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHJlc291cmNlPzogUmVzb3VyY2U7XHJcbiAgdGl0bGU6IHN0cmluZztcclxuICBvblNhdmU6IChuZXdSZXNvdXJjZTogUmVzb3VyY2UpID0+IHZvaWQ7XHJcbiAgb25EZWxldGU/OiAoKT0+dm9pZDtcclxufVxyXG5cclxudHlwZSBTdGF0ZSA9IFJlc291cmNlO1xyXG5cclxuZXhwb3J0IGNsYXNzIEVkaXRSZXNvdXJjZSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcyxTdGF0ZT4gaW1wbGVtZW50cyBEaWFsb2cge1xyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHRoaXMucHJvcHMucmVzb3VyY2UgfHwge25hbWU6ICcnLCB1cmw6ICcnfTtcclxuICB9XHJcblxyXG4gIHNhdmUoKSB7XHJcbiAgICBjb25zdCByZXNvdXJjZSA9IHRoaXMuc3RhdGU7XHJcbiAgICBpZiAoIXZhbGlkVXJsLmlzVXJpKHJlc291cmNlLnVybCkpIHRocm93IG5ldyBFcnJvcihMYEFuZ2l2ZW4gVVJMICcke3Jlc291cmNlLnVybH0nIMOkciBvZ2lsdGlnLiBTa2EgYsO2cmphIG1lZCBleGVtcGVsdmlzIGh0dHA6LCBodHRwczogZWxsZXIgbWFpbHRvOmApO1xyXG4gICAgdGhpcy5wcm9wcy5vblNhdmUocmVzb3VyY2UpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3Qge3RpdGxlLCBvblNhdmUsIG9uRGVsZXRlfSA9IHRoaXMucHJvcHM7XHJcbiAgICBjb25zdCByZXNvdXJjZSA9IHRoaXMuc3RhdGU7XHJcbiAgICBjb25zdCBpc1ZhbGlkVXJsID0gdmFsaWRVcmwuaXNVcmkodGhpcy5zdGF0ZS51cmwpO1xyXG5cclxuICAgIHJldHVybiA8ZGl2PjxkaXYgY2xhc3NOYW1lPVwic3YtaHRtbC1wb3J0bGV0IHN2LXBvcnRsZXQgc3Ytc2tpcC1zcGFjZXJcIj5cclxuICAgICAgPGgyPnt0aXRsZX08L2gyPlxyXG4gICAgICA8aHIgLz5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5OYW1uOjwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBhdXRvRm9jdXNcclxuICAgICAgICAgICAgdGFiSW5kZXg9ezF9XHJcbiAgICAgICAgICAgIHNpemU9ezUwfVxyXG4gICAgICAgICAgICB2YWx1ZT17cmVzb3VyY2UubmFtZX1cclxuICAgICAgICAgICAgb25DaGFuZ2U9e2V2PT50aGlzLnNldFN0YXRlKHtuYW1lOiBldi50YXJnZXQudmFsdWV9KX0gLz5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcCBzcGFjZWRcIj48L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbFwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+TMOkbms6PC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3AgXCI+XHJcbiAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIlxyXG4gICAgICAgICAgICB0YWJJbmRleD17MX1cclxuICAgICAgICAgICAgc2l6ZT17NTB9XHJcbiAgICAgICAgICAgIHZhbHVlPXtyZXNvdXJjZS51cmx9XHJcbiAgICAgICAgICAgIG9uQ2hhbmdlPXtldj0+dGhpcy5zZXRTdGF0ZSh7dXJsOiBldi50YXJnZXQudmFsdWV9KX0gLz5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcCBzcGFjZWRcIj48L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxiciAvPjwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInN2LWh0bWwtcG9ydGxldCBzdi1wb3J0bGV0XCI+XHJcbiAgICAgICAgeyhyZXNvdXJjZS5jcmVhdGVkRGF0ZSB8fCByZXNvdXJjZS5tb2RpZmllZERhdGUpICYmIDxkaXY+XHJcbiAgICAgICAgICB7cmVzb3VyY2UuY3JlYXRlZERhdGUgJiYgPHA+XHJcbiAgICAgICAgICAgIFJlc3Vyc2VuL0zDpG5rZW4gc2thcGFkZXMge2R0Rm9ybWF0KHJlc291cmNlLmNyZWF0ZWREYXRlKX0gYXYgPHN0cm9uZz57cmVzb3VyY2UuY3JlYXRlZEJ5Lm5hbWV9PC9zdHJvbmc+LlxyXG4gICAgICAgICAgPC9wPn1cclxuICAgICAgICAgIHtyZXNvdXJjZS5tb2RpZmllZERhdGUgJiYgPHA+XHJcbiAgICAgICAgICAgIFJlc3Vyc2VuL0zDpG5rZW4gcmVkaWdlcmFkZXMgc2VuYXN0IHtkdEZvcm1hdChyZXNvdXJjZS5tb2RpZmllZERhdGUpfSBhdiA8c3Ryb25nPntyZXNvdXJjZS5tb2RpZmllZEJ5Lm5hbWV9PC9zdHJvbmc+LlxyXG4gICAgICAgICAgPC9wPn1cclxuICAgICAgICAgIDxiciAvPjxici8+XHJcbiAgICAgICAgPC9kaXY+fVxyXG4gICAgICAgIHtvbkRlbGV0ZSAmJiA8ZGl2IHRhYkluZGV4PXsyfSBjbGFzc05hbWU9XCJidG4gYnRuLXdhcm5pbmcgYnRuLWxhcmdlIHB1bGwtcmlnaHRcIiBvbkNsaWNrPXsoKT0+b25EZWxldGUoKX0+XHJcbiAgICAgICAgICBUYSBib3J0IHJlc3Vycy9sw6Rua1xyXG4gICAgICAgIDwvZGl2Pn1cclxuICAgICAgICA8YSB0YWJJbmRleD17MX0gY2xhc3NOYW1lPXtcImJ0biBidG4tbGFyZ2VcIiArIChpc1ZhbGlkVXJsID8gXCJcIiA6IFwiIGJ0bi1pbmFjdGl2ZVwiKX0gb25DbGljaz17aXNWYWxpZFVybCAmJiAoKCkgPT4gb25TYXZlKHJlc291cmNlKSl9PlNwYXJhPC9hPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7VGFzaywgQ291cnNlfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IE9wZW5DbG9zZUJveCB9IGZyb20gJy4uLy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9vcGVuLWNsb3NlLWJveCc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHRhc2s6IFRhc2s7XHJcbiAgY291cnNlOiBDb3Vyc2U7XHJcbiAgdXBkYXRlTGluazogKGlkOiBzdHJpbmcsIGxpbmtPclVubGluazogYm9vbGVhbikgPT4gdm9pZDtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFRhc2tNaWdyYXRpb25Cb3ggZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHM+IHtcclxuICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHt0YXNrLCBjb3Vyc2UsIHVwZGF0ZUxpbmt9ID0gdGhpcy5wcm9wcztcclxuICAgIGlmICghdGFzay5taWdyYXRlZFRleHRzKSByZXR1cm4gPD4mbmJzcDs8Lz47XHJcbiAgICBjb25zdCB7YWJpbGl0aWVzLCBjZW50cmFsQ29udGVudCwga25vd2xlZGdlUmVxdWlyZW1lbnRzfSA9IHRhc2subWlncmF0ZWRUZXh0cztcclxuICAgIGNvbnN0IGtycyA9IE9iamVjdC5rZXlzKGtub3dsZWRnZVJlcXVpcmVtZW50cyB8fCB7fSkubWFwKGlkID0+ICh7XHJcbiAgICAgIC4uLmNvdXJzZS5rbm93bGVkZ2VSZXF1aXJlbWVudHMuZmluZCh0ID0+IHQuaWQgPT09IGlkKSxcclxuICAgICAgLi4ua25vd2xlZGdlUmVxdWlyZW1lbnRzW2lkXVxyXG4gICAgfSkpLy8uZmlsdGVyKCh7bmFtZX0pID0+ICEhbmFtZSk7XHJcbiAgICBjb25zdCBrckEgPSB7dGl0bGU6IFwiVXBwZGF0ZXJhdCBrdW5za2Fwc2tyYXYgZsO2ciBiZXR5Z2V0IEFcIiwgdHlwZTogXCJrbm93bGVkZ2VSZXF1aXJlbWVudHNcIiwgaXRlbXM6IGtycy5maWx0ZXIoa3IgPT4ga3IuZ3JhZGVTdGVwID09PSAnQScpfTtcclxuICAgIGNvbnN0IGtyQyA9IHt0aXRsZTogXCJVcHBkYXRlcmF0IEt1bnNrYXBza3JhdiBmw7ZyIGJldHlnZXQgQ1wiLCB0eXBlOiBcImtub3dsZWRnZVJlcXVpcmVtZW50c1wiLCBpdGVtczoga3JzLmZpbHRlcihrciA9PiBrci5ncmFkZVN0ZXAgPT09ICdDJyl9O1xyXG4gICAgY29uc3Qga3JFID0ge3RpdGxlOiBcIlVwcGRhdGVyYXQga3Vuc2thcHNrcmF2IGbDtnIgYmV0eWdldCBFXCIsIHR5cGU6IFwia25vd2xlZGdlUmVxdWlyZW1lbnRzXCIsIGl0ZW1zOiBrcnMuZmlsdGVyKGtyID0+IGtyLmdyYWRlU3RlcCA9PT0gJ0UnKX07XHJcbiAgICBjb25zdCBhYnMgPSB7dGl0bGU6IFwiVXBwZGF0ZXJhZGUgZsO2cm3DpWdvclwiLCB0eXBlOiBcImFiaWxpdGllc1wiLCBpdGVtczogT2JqZWN0LmtleXMoYWJpbGl0aWVzIHx8IHt9KS5tYXAoaWQgPT4gKHtcclxuICAgICAgLi4uY291cnNlLmFiaWxpdGllcy5maW5kKHQgPT4gdC5pZCA9PT0gaWQpLFxyXG4gICAgICAuLi5hYmlsaXRpZXNbaWRdfSlcclxuICAgICl9Ly8uZmlsdGVyKCh7bmFtZX0pID0+ICEhbmFtZSl9O1xyXG4gICAgY29uc3QgY2NzID0ge3RpdGxlOiBcIlVwcGRhdGVyYXQgY2VudHJhbHQgaW5uZWjDpWxsXCIsIHR5cGU6IFwiY2VudHJhbENvbnRlbnRcIiwgaXRlbXM6IE9iamVjdC5rZXlzKGNlbnRyYWxDb250ZW50IHx8IHt9KS5tYXAoaWQgPT4gKHtcclxuICAgICAgLi4uY291cnNlLmNlbnRyYWxDb250ZW50LmZpbmQoY2MgPT4gY2MuaWQgPT0gaWQpLFxyXG4gICAgICAuLi5jZW50cmFsQ29udGVudFtpZF1cclxuICAgICAgfSlcclxuICAgICl9Ly8uZmlsdGVyKCh7bmFtZX0pID0+ICEhbmFtZSl9O1xyXG4gICAgY29uc3QgdGFibGVzVG9TaG93ID0gW2tyQSwga3JDLCBrckUsIGNjcywgYWJzXS5maWx0ZXIoYm94SW5mbyA9PiBib3hJbmZvLml0ZW1zLmxlbmd0aCA+IDApO1xyXG4gICAgaWYgKHRhYmxlc1RvU2hvdy5sZW5ndGggPT09IDApIHJldHVybiA8PiZuYnNwOzwvPjtcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8T3BlbkNsb3NlQm94IGNsYXNzTmFtZT1cImxhcmdlclwiIHRpdGxlPXs8ZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwid2FybmluZ0ZsYWdcIj5cclxuICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLWV4Y2xhbWF0aW9uLXRyaWFuZ2xlXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxwPlVwcGRhdGVyYWRlIGZvcm11bGVyaW5nYXIgZnLDpW4gU2tvbHZlcmtldDwvcD5cclxuICAgICAgPC9kaXY+fT5cclxuICAgICAgICB7dGFibGVzVG9TaG93Lm1hcCgoe3RpdGxlLCB0eXBlLCBpdGVtc30pID0+IDxkaXYga2V5PXt0aXRsZX0+XHJcbiAgICAgICAgICA8aDU+e3RpdGxlfTwvaDU+XHJcbiAgICAgICAgICA8dGFibGU+XHJcbiAgICAgICAgICAgIDx0aGVhZD5cclxuICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICA8dGggc3R5bGU9e3t3aWR0aDogXCI0MCVcIn19PlVyc3BydW5nbGlnIGZvcm11bGVyaW5nPC90aD5cclxuICAgICAgICAgICAgICAgIDx0aCBzdHlsZT17e3dpZHRoOiBcIjQwJVwifX0+U2tvbHZlcmtldHMgbnlhIGZvcm11bGVyaW5nPC90aD5cclxuICAgICAgICAgICAgICAgIDx0aD5Uw6Rja2VyIHVwcGdpZnRlbiBkZW4gbnlhIGZvcm11bGVyaW5nZW4/PC90aD5cclxuICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICA8L3RoZWFkPlxyXG4gICAgICAgICAgICA8dGJvZHk+XHJcbiAgICAgICAgICAgICAge2l0ZW1zLm1hcChpdGVtID0+IDx0ciBrZXk9e2l0ZW0uaWR9PlxyXG4gICAgICAgICAgICAgICAgPHRkIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXt7X19odG1sOiBpdGVtLm9sZFRleHR9fSAvPlxyXG4gICAgICAgICAgICAgICAgPHRkIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXt7X19odG1sOiBpdGVtLm5hbWV9fSAvPlxyXG4gICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpPT51cGRhdGVMaW5rKGl0ZW0uaWQsIHRydWUpfT5KYSAtIGJlaMOlbGwga29wcGxpbmdlbjwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9eygpPT51cGRhdGVMaW5rKGl0ZW0uaWQsIGZhbHNlKX0+TmVqIC0gdGEgYm9ydCBrb3BwbGluZ2VuPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgIDwvdHI+KX1cclxuICAgICAgICAgICAgPC90Ym9keT5cclxuICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgPC9kaXY+KX1cclxuICAgICAgPC9PcGVuQ2xvc2VCb3g+XHJcblxyXG4gICAgKVxyXG4gIH1cclxufSIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuXHJcbmV4cG9ydCBjb25zdCBFbGxpcHNpc0xvYWRlciA9ICgpID0+XHJcbiAgPGltZ1xyXG4gICAgc3R5bGU9e3tib3JkZXI6IDAsIG1hcmdpbjogMCwgcGFkZGluZzogMH19XHJcbiAgICBjbGFzc05hbWU9XCJlbGxpcHNpcy1sb2FkZXJcIiAvPjtcclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQge0FiaWxpdHksIEtub3dsZWRnZVJlcXVpcmVtZW50fSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCBlbnYgZnJvbSAnLi4vLi4vLi4vZ2xvYmFscy9LRUQuZW52JztcclxuaW1wb3J0IHtSZW1vdmVJdGVtfSBmcm9tICcuL3JlbW92ZS1pdGVtJztcclxuaW1wb3J0IHVwZGF0ZSBmcm9tICdyZWFjdC1hZGRvbnMtdXBkYXRlJztcclxuaW1wb3J0IHsgTCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAga25vd2xlZGdlUmVxdWlyZW1lbnRzOiBLbm93bGVkZ2VSZXF1aXJlbWVudFtdO1xyXG4gIGlkc1RvTWFya05vdE9rPzoge1tpZDogc3RyaW5nXTogdHJ1ZX07XHJcbiAgZXhwbGFpbmVkUmVxdWlyZW1lbnRzPzoge1tyZXF1aXJlbWVudElkOiBzdHJpbmddOiBzdHJpbmd9XHJcbiAgLy8gUHJvcHMgdXNlZCBpbiBlZGl0IG1vZGUgKGVkaXRpbmcgY291cnNlIHRlbXBsYXRlcylcclxuICAvL2NvdmVyZWRJZHM/OiBzdHJpbmdbXTtcclxuICAvLyBQcm9wcyB1c2VkIGluIG1hcmsgbW9kZSAoZWRpdGluZyB0YXNrcylcclxuICBtYXJrTW9kZT86IGJvb2xlYW47XHJcbiAgbWFya2VkSWRzPzogc3RyaW5nW107XHJcbiAgbWlncmF0ZWRJZHM/OiB7W2lkOiBzdHJpbmddOiBhbnl9O1xyXG4gIG9uTWFya0NoYW5nZWQ6IChpZDogc3RyaW5nLCBpc01hcmtlZDogYm9vbGVhbikgPT4gdm9pZDtcclxuICBvbkV4cGxhaW5lZFJlcXVpcmVtZW50c0NoYW5nZWQ/OiAocmVxSWQ6IHN0cmluZywgdGV4dDogc3RyaW5nKSA9PiB2b2lkO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgS25vd2xlZGdlTWF0cml4IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLCB7fT4ge1xyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3QgeyBrbm93bGVkZ2VSZXF1aXJlbWVudHMsIG1hcmtlZElkcywgbWlncmF0ZWRJZHMsIGV4cGxhaW5lZFJlcXVpcmVtZW50cyB9ID0gdGhpcy5wcm9wcztcclxuICAgIGNvbnN0IHsgaWRzVG9NYXJrTm90T2ssIG1hcmtNb2RlLCBvbk1hcmtDaGFuZ2VkLCBvbkV4cGxhaW5lZFJlcXVpcmVtZW50c0NoYW5nZWQgfSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgY29uc3QgY29sdW1ucyA9IFtcIkVcIiwgXCJDXCIsIFwiQVwiXTtcclxuICAgIGNvbnN0IHJvd3M6IEtub3dsZWRnZVJlcXVpcmVtZW50W11bXSA9IFtdO1xyXG4gICAgY29uc3QgcmVxcyA9IGtub3dsZWRnZVJlcXVpcmVtZW50cy5zbGljZSgpO1xyXG4gICAgbGV0IHJvdzogS25vd2xlZGdlUmVxdWlyZW1lbnRbXSB8IG51bGwgPSBudWxsO1xyXG4gICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgcm93ID0gY29sdW1ucy5tYXAoZ3JhZGUgPT4ge1xyXG4gICAgICAgIGNvbnN0IHBOZXh0ID0gcmVxcy5maW5kSW5kZXgociA9PiByLmdyYWRlU3RlcCAmJiByLmdyYWRlU3RlcC50b1VwcGVyQ2FzZSgpID09PSBncmFkZSk7XHJcbiAgICAgICAgaWYgKHBOZXh0IDwgMCkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgY29uc3QgcnYgPSByZXFzW3BOZXh0XTtcclxuICAgICAgICByZXFzLnNwbGljZShwTmV4dCwgMSk7XHJcbiAgICAgICAgcmV0dXJuIHJ2O1xyXG4gICAgICB9KTtcclxuICAgICAgaWYgKHJvdy5ldmVyeShyID0+IHIgPT09IG51bGwpKVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICByb3dzLnB1c2gocm93KTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gPHRhYmxlIGNsYXNzTmFtZT1cImtub3dsZWRnZS1tYXRyaXhcIj5cclxuICAgICAgICA8dGhlYWQ+XHJcbiAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgIHtjb2x1bW5zLm1hcChjID0+IDx0aCBrZXk9e2N9PntjfTwvdGg+KX1cclxuICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgPC90aGVhZD5cclxuICAgICAgICA8dGJvZHk+XHJcbiAgICAgICAgICB7cm93cy5tYXAoKHJvdyxpKSA9PiA8UmVhY3QuRnJhZ21lbnQga2V5PXtpfT5cclxuICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgIHtyb3cubWFwKChyZXF1aXJlbWVudCxqKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpc01hcmtlZE9LID0gcmVxdWlyZW1lbnQgJiYgbWFya2VkSWRzICYmIG1hcmtlZElkcy5pbmRleE9mKHJlcXVpcmVtZW50LmlkKSA+PSAwO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaXNNYXJrZWROb3RPSyA9IHJlcXVpcmVtZW50ICYmIGlkc1RvTWFya05vdE9rICYmIGlkc1RvTWFya05vdE9rW3JlcXVpcmVtZW50LmlkXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlzTWlncmF0ZWQgPSByZXF1aXJlbWVudCAmJiBtaWdyYXRlZElkcyAmJiAhIW1pZ3JhdGVkSWRzW3JlcXVpcmVtZW50LmlkXTtcclxuICAgICAgICAgICAgICAgIHJldHVybiA8dGRcclxuICAgICAgICAgICAgICAgICAga2V5PXtqfVxyXG4gICAgICAgICAgICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTD17e19faHRtbDogcmVxdWlyZW1lbnQgPyByZXF1aXJlbWVudC5uYW1lIDogXCJcIn19XHJcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17KG1hcmtNb2RlID8gXCJzZWxlY3RhYmxlXCIgOiBcIlwiKSArXHJcbiAgICAgICAgICAgICAgICAgIChpc01pZ3JhdGVkID8gXCIgbWlncmF0ZWRcIiA6IFwiXCIpICtcclxuICAgICAgICAgICAgICAgICAgKGlzTWFya2VkT0sgP1xyXG4gICAgICAgICAgICAgICAgICAgIFwiIG1hcmtlZEdyZWVuXCIgOlxyXG4gICAgICAgICAgICAgICAgICAgIChpc01hcmtlZE5vdE9LID9cclxuICAgICAgICAgICAgICAgICAgICAgIFwiIG1hcmtlZFJlZFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgXCJcIikpfVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e21hcmtNb2RlICYmIHJlcXVpcmVtZW50ID9cclxuICAgICAgICAgICAgICAgICAgICAgICgpPT5vbk1hcmtDaGFuZ2VkKHJlcXVpcmVtZW50LmlkLCAhaXNNYXJrZWRPSykgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkfVxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPXtpc01pZ3JhdGVkID9cclxuICAgICAgICAgICAgICAgICAgICAgIG1hcmtNb2RlID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgYFNrb2x2ZXJrZXQgaGFyIHVwcGRhdGVyYXQgdGV4dGVucyBmb3JtdWxlcmluZy4gRHUga2FuIGdyYW5za2Egw6RuZHJpbmdlbiBnZW5vbSBhdHQgZsOkbGxhIHV0IHZhcm5pbmdzYm94ZW4gdGlsbCBow7ZnZXIsIG1lZCB0aXRlbCBcIlVwcGRhdGVyYWRlIGZvcm11bGVyaW5nYXIgZnLDpW4gU2tvbHZlcmtldFwiYCA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGBTa29sdmVya2V0IGhhciB1cHBkYXRlcmF0IHRleHRlbnMgZm9ybXVsZXJpbmcsIG1lbiBkZXR0YSBoYXIgw6RubnUgaW50ZSBncmFuc2thdHMgYXYgdXBwZ2lmdGVucyByZWRpZ2VyaW5nc2JlaMO2cmlnZWAgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkfSAvPlxyXG4gICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICB7ZXhwbGFpbmVkUmVxdWlyZW1lbnRzICYmIDx0cj5cclxuICAgICAgICAgICAgICB7cm93Lm1hcCgocmVxdWlyZW1lbnQsaikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaXNNYXJrZWRPSyA9IHJlcXVpcmVtZW50ICYmIG1hcmtlZElkcyAmJiBtYXJrZWRJZHMuaW5kZXhPZihyZXF1aXJlbWVudC5pZCkgPj0gMDtcclxuICAgICAgICAgICAgICAgIHJldHVybiA8dGQga2V5PXtqfT5cclxuICAgICAgICAgICAgICAgICAge2lzTWFya2VkT0sgPyA8dGV4dGFyZWFcclxuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17TGBCZXNrcml2IGtyYXZldGB9XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaW5wdXRUZXh0Qm94IGlucHV0VGV4dExhcmdlXCIgc3R5bGU9e3t3aWR0aDogXCIxMDAlXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgIHJlYWRPbmx5PXshbWFya01vZGV9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2V4cGxhaW5lZFJlcXVpcmVtZW50c1tyZXF1aXJlbWVudC5pZF0gfHwgXCJcIn1cclxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17b25FeHBsYWluZWRSZXF1aXJlbWVudHNDaGFuZ2VkICYmIChcclxuICAgICAgICAgICAgICAgICAgICAgIGV2ID0+IG9uRXhwbGFpbmVkUmVxdWlyZW1lbnRzQ2hhbmdlZChyZXF1aXJlbWVudC5pZCwgZXYudGFyZ2V0LnZhbHVlKSl9XHJcbiAgICAgICAgICAgICAgICAgIC8+IDogdW5kZWZpbmVkfVxyXG4gICAgICAgICAgICAgICAgICA8L3RkPn0pfVxyXG4gICAgICAgICAgICA8L3RyPn1cclxuICAgICAgICAgICAgPC9SZWFjdC5GcmFnbWVudD5cclxuICAgICAgICAgICl9XHJcbiAgICAgICAgPC90Ym9keT5cclxuICAgICAgPC90YWJsZT5cclxuXHJcbiAgICB7LypyZXR1cm4gPGRpdj5cclxuICAgICAgPHRhYmxlPlxyXG4gICAgICAgIDx0aGVhZD5cclxuICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgPHRoPkU8L3RoPlxyXG4gICAgICAgICAgICA8dGg+QzwvdGg+XHJcbiAgICAgICAgICAgIDx0aD5BPC90aD5cclxuICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgPC90aGVhZD5cclxuICAgICAgICA8dGJvZHk+XHJcbiAgICAgICAgICB7dGJvZHkubWFwKChyb3csIGkpID0+IFxyXG4gICAgICAgICAgPHRyIGtleT17aX0+e3Jvdy5tYXAoKGNlbGwsIGopID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaXNNYXJrZWRPSyA9IHByb3BzLm1hcmtlZElkcyAmJiBwcm9wcy5tYXJrZWRJZHMuaW5kZXhPZihjZWxsLmlkKSA+PSAwO1xyXG4gICAgICAgICAgICBjb25zdCBpc01hcmtlZE5vdE9LID0gcHJvcHMuaWRzVG9NYXJrTm90T2sgJiYgcHJvcHMuaWRzVG9NYXJrTm90T2tbY2VsbC5pZF07XHJcbiAgICAgICAgICAgIHJldHVybiA8dGRcclxuICAgICAgICAgICAgICBrZXk9e2p9XHJcbiAgICAgICAgICAgICAgcm93U3Bhbj17Y2VsbC5yb3dTcGFufVxyXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT17KHByb3BzLm1hcmtNb2RlID8gXCJzZWxlY3RhYmxlXCIgOiBcIlwiKSArXHJcbiAgICAgICAgICAgICAgICAoaXNNYXJrZWRPSyA/XHJcbiAgICAgICAgICAgICAgICAgIFwiIG1hcmtlZEdyZWVuXCIgOlxyXG4gICAgICAgICAgICAgICAgICAoaXNNYXJrZWROb3RPSyA/XHJcbiAgICAgICAgICAgICAgICAgICAgXCIgbWFya2VkUmVkXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgXCJcIikpfVxyXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e3Byb3BzLm1hcmtNb2RlICYmICgoKT0+cHJvcHMub25NYXJrQ2hhbmdlZChjZWxsLmlkLCAhaXNNYXJrZWRPSykpfT5cclxuICAgICAgICAgICAgICB7Y2VsbC5odG1sICYmIDxkaXYgc3R5bGU9e3twb3NpdGlvbjogJ3JlbGF0aXZlJ319PlxyXG4gICAgICAgICAgICAgICAgPHBcclxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjZWxsLnR5cGUgPT09ICdhYmlsaXR5JyA/ICdhYmlsaXR5VGV4dCcgOiAnY3JpdGVyaWFUZXh0J31cclxuICAgICAgICAgICAgICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3tfX2h0bWw6IGNlbGwuaHRtbH19IC8+XHJcbiAgICAgICAgICAgICAgICB7cHJvcHMuZWRpdE1vZGUgJiYgPFJlbW92ZUl0ZW0gY2xhc3NOYW1lPVwidXBwZXJSaWdodFwiIG9uQ2xpY2s9eygpPT5cclxuICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDZWxsSWRzKFxyXG4gICAgICAgICAgICAgICAgICAgIGNlbGwudHlwZSxcclxuICAgICAgICAgICAgICAgICAgICBjZWxsLnJvd0luZGV4LFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0Q2VsbElkcyhcclxuICAgICAgICAgICAgICAgICAgICAgIGNlbGwudHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgIGNlbGwucm93SW5kZXgpLmZpbHRlcihpZCA9PiBpZCAhPSBjZWxsLmlkKSApfSAvPiB9XHJcbiAgICAgICAgICAgICAgPC9kaXY+fVxyXG4gICAgICAgICAgICA8L3RkPn0pfVxyXG4gICAgICAgICAgPC90cj4pfVxyXG4gICAgICAgIDwvdGJvZHk+XHJcbiAgICAgIDwvdGFibGU+XHJcbiAgICA8L2Rpdj4qL31cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSBcIi4uLy4uLy4uL3V0aWxzL3V0aWxzXCI7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIG9uQ2xpY2ssXHJcbiAgY2xhc3NOYW1lPyxcclxuICBzdHlsZT8sXHJcbiAgdGl0bGU/XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgUmVtb3ZlSXRlbSA9ICh7IG9uQ2xpY2ssIGNsYXNzTmFtZSwgc3R5bGUsIHRpdGxlIH06IFByb3BzKSA9PlxyXG5cclxuICA8ZGl2XHJcbiAgICB0aXRsZT17dGl0bGUgfHwgTGBSYWRlcmFgfVxyXG4gICAgY2xhc3NOYW1lPXtcInJlbW92ZUl0ZW0gXCIgKyAoY2xhc3NOYW1lIHx8IFwiXCIpfVxyXG4gICAgb25DbGljaz17b25DbGlja30gc3R5bGU9e3N0eWxlfSAvPlxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IENvdXJzZSwgQ291cnNlTW9kdWxlLCBUYXNrLCBEb2N1bWVudCB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgT3BlbkNsb3NlQm94IH0gZnJvbSBcIi4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9vcGVuLWNsb3NlLWJveFwiO1xyXG5pbXBvcnQgeyBhcnJheVRvTG9va3VwIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBnZXRVbmNvdmVyZWRLbm93bGVkZ2VSZXF1aXJlbWVudHMgfSBmcm9tICcuLi9jb3Vyc2VzL2J1c2luZXNzLWxvZ2ljJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgb3B0aW9uczogKERvY3VtZW50ICYge2dyb3VwPzogc3RyaW5nfSlbXTtcclxuICB0aXRsZTtcclxuICBtYXJrTW9kZTogYm9vbGVhbjtcclxuICBtYXJrZWRJZHM6IHN0cmluZ1tdO1xyXG4gIG1pZ3JhdGVkSWRzPzoge1tpZDogc3RyaW5nXTogYW55fTtcclxuICB1bmNvdmVyZWRJZHM/OiB7W2lkOiBzdHJpbmddOiB0cnVlfTtcclxuICBvbk1hcmtDaGFuZ2VkOiAoaWQ6IHN0cmluZywgaXNNYXJrZWQ6IGJvb2xlYW4pID0+IHZvaWQ7XHJcbn1cclxuXHJcbmludGVyZmFjZSBTdGF0ZSB7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBTZWxlY3RSZWxhdGVkRG9jcyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcyxTdGF0ZT4ge1xyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHt9O1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3Qge29wdGlvbnMsIHRpdGxlLCBtYXJrZWRJZHMsIG1hcmtNb2RlLCBtaWdyYXRlZElkcywgdW5jb3ZlcmVkSWRzfSA9IHRoaXMucHJvcHM7XHJcbiAgICBjb25zdCBncm91cGVkT3B0aW9ucyA9IGFycmF5VG9Mb29rdXAob3B0aW9ucywgZCA9PiBkLmdyb3VwIHx8IFwiZGVmYXVsdFwiKTtcclxuICAgIGNvbnN0IGdyb3VwcyA9IE9iamVjdC5rZXlzKGdyb3VwZWRPcHRpb25zKTtcclxuICAgIHJldHVybiA8T3BlbkNsb3NlQm94IHRpdGxlPXs8cD57dGl0bGV9PC9wPn0gY2xhc3NOYW1lPVwibGFyZ2VyXCI+XHJcbiAgICAgICAge2dyb3Vwcy5tYXAoZ3JvdXAgPT4gPFJlYWN0LkZyYWdtZW50IGtleT17Z3JvdXB9PlxyXG4gICAgICAgICAge2dyb3Vwcy5sZW5ndGggPT09IDEgPyBudWxsIDogPD48YnIvPjxoNT57Z3JvdXB9PC9oNT48aHIvPjwvPn1cclxuICAgICAgICAgIHtncm91cGVkT3B0aW9uc1tncm91cF0ubWFwKG9wdGlvbiA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzTWFya2VkID0gbWFya2VkSWRzLnNvbWUoeCA9PiB4ID09PSBvcHRpb24uaWQpO1xyXG4gICAgICAgICAgICBjb25zdCBpc01pZ3JhdGVkID0gbWlncmF0ZWRJZHMgJiYgISFtaWdyYXRlZElkc1tvcHRpb24uaWRdO1xyXG4gICAgICAgICAgICBjb25zdCBpc1VuY292ZXJlZCA9IHVuY292ZXJlZElkcyAmJiB1bmNvdmVyZWRJZHNbb3B0aW9uLmlkXTtcclxuICAgICAgICAgICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbFwiIGtleT17b3B0aW9uLmlkfSBvbkNsaWNrPXsoKT0+XHJcbiAgICAgICAgICAgICAgbWFya01vZGUgJiYgdGhpcy5wcm9wcy5vbk1hcmtDaGFuZ2VkKG9wdGlvbi5pZCwgIWlzTWFya2VkKX0+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e1wiaG9yaXpvbnRhbEl0ZW0gdG9wIHNwYWNlZFwiICtcclxuICAgICAgICAgICAgICAgIChtYXJrTW9kZSA/IFwiIHNlbGVjdGFibGVcIiA6IFwiXCIpICtcclxuICAgICAgICAgICAgICAgIChpc01hcmtlZCA/IFwiIG1hcmtlZEdyZWVuXCIgOiAoaXNVbmNvdmVyZWQgP1xyXG4gICAgICAgICAgICAgICAgICBcIiBtYXJrZWRSZWRcIjpcclxuICAgICAgICAgICAgICAgICAgXCJcIikpICtcclxuICAgICAgICAgICAgICAgIChpc01pZ3JhdGVkID8gXCIgbWlncmF0ZWRcIiA6IFwiXCIpfVxyXG4gICAgICAgICAgICAgICAgdGl0bGU9e2lzTWlncmF0ZWQgP1xyXG4gICAgICAgICAgICAgICAgICBtYXJrTW9kZSA/XHJcbiAgICAgICAgICAgICAgICAgICAgYFNrb2x2ZXJrZXQgaGFyIHVwcGRhdGVyYXQgdGV4dGVucyBmb3JtdWxlcmluZy4gRHUga2FuIGdyYW5za2Egw6RuZHJpbmdlbiBnZW5vbSBhdHQgZsOkbGxhIHV0IHZhcm5pbmdzYm94ZW4gdGlsbCBow7ZnZXIsIG1lZCB0aXRlbCBcIlVwcGRhdGVyYWRlIGZvcm11bGVyaW5nYXIgZnLDpW4gU2tvbHZlcmtldFwiYCA6XHJcbiAgICAgICAgICAgICAgICAgICAgYFNrb2x2ZXJrZXQgaGFyIHVwcGRhdGVyYXQgdGV4dGVucyBmb3JtdWxlcmluZywgbWVuIGRldHRhIGhhciDDpG5udSBpbnRlIGdyYW5za2F0cyBhdiB1cHBnaWZ0ZW5zIHJlZGlnZXJpbmdzYmVow7ZyaWdlYCA6XHJcbiAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZH0+XHJcbiAgICAgICAgICAgICAgICA8cCBkYW5nZXJvdXNseVNldElubmVySFRNTD17e19faHRtbDogb3B0aW9uLm5hbWV9fSAvPlxyXG4gICAgICAgICAgICAgICAgPGJyIC8+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PjtcclxuICAgICAgICAgIH0pfVxyXG4gICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+KX1cclxuICAgIDwvT3BlbkNsb3NlQm94PlxyXG4gIH1cclxufSIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuXHJcbmV4cG9ydCBjb25zdCBTcGlubmVyID0gKCk9PiA8c3Bhbj48aSBjbGFzc05hbWU9XCJmYSBmYS1zcGlubmVyIGZhLXNwaW5cIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+Jm5ic3A7PC9zcGFuPjtcclxuIiwiaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBEb2N1bWVudCwgUmVzb3VyY2UsIE1vZGlmaWNhdGlvblRyYWNrZWQsIENvdXJzZSwgVGFzaywgU29mdERvY3VtZW50QWNjZXNzIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBCYXRjaFJ1bm5lciwgY3JlYXRlVVVJRCB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcclxuaW1wb3J0IHVwZGF0ZSBmcm9tICdyZWFjdC1hZGRvbnMtdXBkYXRlJztcclxuaW1wb3J0IHsgVXNlciB9IGZyb20gJy4uLy4uL2NvbnRyYWN0cy9rZWQtbW9kZWxzJztcclxuaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcclxuaW1wb3J0IGVudiBmcm9tICcuLi8uLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5pbXBvcnQgeyBnZXRGaXJzdEFuZExhc3RXZWVrT2ZUZXJtIH0gZnJvbSAnLi4vLi4vdXRpbHMvc2Nob29sLW1vbWVudCc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlRG9jdW1lbnRHcmFwaHMob2xkRG9jLCBuZXdEb2MsIHRhYmxlOiBzdHJpbmcsIGdyYXBoczogeyBbbGFiZWw6IHN0cmluZ106IHN0cmluZyB9LCBiYXRjaDogQmF0Y2hSdW5uZXIpIHtcclxuICBjb25zdCBkb2NVcGRhdGVzID0ge307XHJcbiAgY29uc3QgZG9jSWQgPSBuZXdEb2MuaWQ7XHJcbiAgZm9yIChsZXQgbmF2UHJvcCBvZiBPYmplY3Qua2V5cyhncmFwaHMpKSB7XHJcbiAgICBjb25zdCBmb3JlaWduVGFibGUgPSBncmFwaHNbbmF2UHJvcF07XHJcbiAgICBjb25zdCBvbGRMaXN0OiBEb2N1bWVudFtdID0gb2xkRG9jW25hdlByb3BdIHx8IFtdO1xyXG4gICAgY29uc3QgbmV3TGlzdDogRG9jdW1lbnRbXSA9IG5ld0RvY1tuYXZQcm9wXTtcclxuICAgIGlmICghbmV3TGlzdCkgY29udGludWU7XHJcbiAgICBjb25zdCB0dXBsZXMgPSBuZXdMaXN0XHJcbiAgICAgIC5tYXAoKGRvYywgaWR4KT0+KHtkb2MsIGlkeH0pKTsgLy8gQ3JlYXRlIHR1YmxlcyBvZiB7ZG9jLCBhcnJheS1pbmRleH0gc28gd2UgY2FuIHVwZGF0ZSByZXN1bHRcclxuICAgIGNvbnN0IGFkZGVkID0gdHVwbGVzLmZpbHRlcih0dXBsZSA9PiAhb2xkTGlzdC5zb21lKG8gPT4gby5pZCA9PT0gdHVwbGUuZG9jLmlkKSk7IC8vIEZpbmQgYWRkZWQgaXRlbXNcclxuXHJcbiAgICBmb3IgKGxldCBhIG9mIGFkZGVkKSB7XHJcbiAgICAgIGNvbnN0IG11dGF0ZWRTdWJEb2MgPSB7Li4uYS5kb2N9O1xyXG4gICAgICBjb25zdCBtZXRhID0gbXV0YXRlZFN1YkRvYy4kbWV0YTtcclxuICAgICAgZGVsZXRlIG11dGF0ZWRTdWJEb2MuJG1ldGE7IC8vIERlbGV0ZSAkbWV0YSBzbyB0aGF0IFwiYWRkXCIgb3IgXCJ1cGRhdGVcIiBkb2VzIG5vdCBwZXJzaXN0ZSB0byBuZXh0IHN0YXRlLlxyXG4gICAgICBpZiAobWV0YSA9PT0gJ2FkZCcpIHtcclxuICAgICAgICBpZiAoIW11dGF0ZWRTdWJEb2MuaWQpIG11dGF0ZWRTdWJEb2MuaWQgPSBjcmVhdGVVVUlEKCk7IC8vIEdlbmVyYXRlIElEIGlmIG5vdCBkb25lIHlldC5cclxuICAgICAgICAvLyBOb3cgcHV0IGFuICdhZGQnIG11dGF0aW9uIGluIHRoZSBiYXRjaCBxdWV1ZS5cclxuICAgICAgICBiYXRjaC5hZGQoZm9yZWlnblRhYmxlLCBtdXRhdGVkU3ViRG9jKTtcclxuICAgICAgfSBlbHNlIGlmIChtZXRhID09PSAndXBkYXRlJykge1xyXG4gICAgICAgIGJhdGNoLnB1dChmb3JlaWduVGFibGUsIG11dGF0ZWRTdWJEb2MpO1xyXG4gICAgICB9XHJcbiAgICAgIGJhdGNoLmxpbmsodGFibGUsIGRvY0lkLCBmb3JlaWduVGFibGUsIG11dGF0ZWRTdWJEb2MuaWQsIG5hdlByb3ApO1xyXG5cclxuICAgICAgLy8gVXBkYXRlIHJlc3VsdCBzbyB0aGF0IHN0YXRlIGlzIHJlZmxlY3RlZCBhZnRlciBzdWNjZXNmdWwgUE9TVCB0byBzZXJ2ZXIuXHJcbiAgICAgIGlmICghZG9jVXBkYXRlc1tuYXZQcm9wXSkgZG9jVXBkYXRlc1tuYXZQcm9wXSA9IHt9O1xyXG4gICAgICBkb2NVcGRhdGVzW25hdlByb3BdW2EuaWR4XSA9IHskc2V0OiBtdXRhdGVkU3ViRG9jfTtcclxuICAgIH1cclxuICAgIGNvbnN0IHJlbW92ZWQgPSBvbGRMaXN0LmZpbHRlcihvID0+ICFuZXdMaXN0LnNvbWUobiA9PiBuLmlkID09PSBvLmlkKSk7XHJcbiAgICBmb3IgKGxldCByIG9mIHJlbW92ZWQpIHtcclxuICAgICAgYmF0Y2gudW5saW5rKHRhYmxlLCBkb2NJZCwgZm9yZWlnblRhYmxlLCByLmlkLCBuYXZQcm9wKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHVwZGF0ZWQgPSB0dXBsZXMuZmlsdGVyKHR1cGxlID0+IG9sZExpc3Quc29tZShvID0+IG8uaWQgPT09IHR1cGxlLmRvYy5pZCAmJiB0dXBsZS5kb2MuJG1ldGEgPT09ICd1cGRhdGUnKSk7XHJcbiAgICBmb3IgKGxldCB1IG9mIHVwZGF0ZWQpIHtcclxuICAgICAgY29uc3QgbXV0YXRlZFN1YkRvYyA9IHsuLi51LmRvY307XHJcbiAgICAgIGRlbGV0ZSBtdXRhdGVkU3ViRG9jLiRtZXRhO1xyXG4gICAgICBiYXRjaC5wdXQoZm9yZWlnblRhYmxlLCBtdXRhdGVkU3ViRG9jKTtcclxuXHJcbiAgICAgIC8vIFVwZGF0ZSByZXN1bHQgc28gdGhhdCAkbWV0YSBpcyByZW1vdmVkIGZyb20gbmF2aWdhdGlvbiBwcm9wIGFmdGVyIHN1Y2Nlc3NmdWwgUE9TVCB0byBzZXJ2ZXIuXHJcbiAgICAgIGlmICghZG9jVXBkYXRlc1tuYXZQcm9wXSkgZG9jVXBkYXRlc1tuYXZQcm9wXSA9IHt9O1xyXG4gICAgICBkb2NVcGRhdGVzW25hdlByb3BdW3UuaWR4XSA9IHskc2V0OiBtdXRhdGVkU3ViRG9jfTtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIHVwZGF0ZShuZXdEb2MsIGRvY1VwZGF0ZXMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZHRGb3JtYXQoZGF0ZVRpbWU6IG51bWJlciB8IERhdGUgfCBtb21lbnQuTW9tZW50KSB7XHJcbiAgcmV0dXJuIG1vbWVudChkYXRlVGltZSkuZm9ybWF0KCdZWU1NREQgSEg6bW0nKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNob3J0RGF0ZUZvcm1hdChkYXRlVGltZTogbnVtYmVyIHwgRGF0ZSB8IG1vbWVudC5Nb21lbnQpIHtcclxuICByZXR1cm4gbW9tZW50KGRhdGVUaW1lKS5mb3JtYXQoJ1lZTU1ERCcpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2hvcnRQZXJzb25OYW1lRm9ybWF0KG5hbWU6IHN0cmluZykge1xyXG4gIGlmICghbmFtZSkgcmV0dXJuIFwiXCI7XHJcbiAgY29uc3QgbmFtZXMgPSBuYW1lLnNwbGl0KCcgJykuZmlsdGVyKG4gPT4gISFuKTtcclxuICBjb25zdCBsYXN0TmFtZSA9IG5hbWVzLnBvcCgpO1xyXG4gIHJldHVybiBuYW1lcy5tYXAobmFtZSA9PiBgJHtuYW1lWzBdfS5gKS5jb25jYXQobGFzdE5hbWUpLmpvaW4oJyAnKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZU1vZGlmaWNhdGlvblN0YW1wIChub3c6IG51bWJlciwgb2JqOiBNb2RpZmljYXRpb25UcmFja2VkLCB1c2VyOiBVc2VyKSB7XHJcbiAgcmV0dXJuIHVwZGF0ZShvYmosIHtcclxuICAgIGRhdGVUaW1lOiB7JHNldDogbm93fSwgLy8gRm9yIHF1ZXJpZXMuLi5cclxuICAgIG1vZGlmaWVkRGF0ZTogeyRzZXQ6IG5vd30sXHJcbiAgICBtb2RpZmllZEJ5OiB7XHJcbiAgICAgICRzZXQ6IHtcclxuICAgICAgICBuYW1lOiB1c2VyLmRpc3BsYXlOYW1lLFxyXG4gICAgICAgIHVybDogXCJtYWlsdG86XCIgKyB1c2VyLm1haWxcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlQ3JlYXRpb25TdGFtcDxUIGV4dGVuZHMgTW9kaWZpY2F0aW9uVHJhY2tlZD4gKG5vdzogbnVtYmVyLCBvYmo6IFQsIHVzZXI6IFVzZXIpOiBUIHtcclxuICByZXR1cm4gdXBkYXRlKG9iaiwge1xyXG4gICAgY3JlYXRlZERhdGU6IHskc2V0OiBub3d9LFxyXG4gICAgY3JlYXRlZEJ5OiB7XHJcbiAgICAgICRzZXQ6IHtcclxuICAgICAgICBuYW1lOiB1c2VyLmRpc3BsYXlOYW1lLFxyXG4gICAgICAgIHVybDogXCJtYWlsdG86XCIgKyB1c2VyLm1haWxcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RW1haWxGcm9tRG9jQWNjZXNzIChyZXNvdXJjZTogU29mdERvY3VtZW50QWNjZXNzKSB7XHJcbiAgaWYgKHJlc291cmNlLmVtYWlsKSByZXR1cm4gcmVzb3VyY2UuZW1haWw7XHJcbiAgcmV0dXJuIHJlc291cmNlLnVybCA/XHJcbiAgICByZXNvdXJjZS51cmwuc3RhcnRzV2l0aCgnbWFpbHRvOicpID9cclxuICAgICAgcmVzb3VyY2UudXJsLnN1YnN0cmluZygnbWFpbHRvOicubGVuZ3RoKSA6XHJcbiAgICAgIHJlc291cmNlLnVybCA6XHJcbiAgICByZXNvdXJjZS51cmw7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVNb2RpZmljYXRpb25BbmRDcmVhdGlvblN0YW1wcyhvYmo6IE1vZGlmaWNhdGlvblRyYWNrZWQsIHVzZXI6IFVzZXIpIHtcclxuICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xyXG4gIG9iaiA9IHVwZGF0ZU1vZGlmaWNhdGlvblN0YW1wKG5vdywgb2JqLCB1c2VyKTtcclxuICBpZiAoIW9iai5jcmVhdGVkQnkpIG9iaiA9IHVwZGF0ZUNyZWF0aW9uU3RhbXAobm93LCBvYmosIHVzZXIpO1xyXG4gIHJldHVybiBvYmo7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhcHBseUV0YWdzKGRvYzogRG9jdW1lbnQsIG5ld0V0YWdzOiB7W2lkOiBzdHJpbmddOiBzdHJpbmd9LCBncmFwaHM6IHN0cmluZ1tdKSB7XHJcbiAgY29uc3QgcmVzID0gey4uLmRvY307XHJcbiAgY29uc3QgZXRhZyA9IG5ld0V0YWdzW2RvYy5pZF07XHJcbiAgaWYgKGV0YWcpXHJcbiAgICByZXMuJGV0YWcgPSBldGFnO1xyXG4gIGZvciAobGV0IGxhYmVsIG9mIGdyYXBocykge1xyXG4gICAgY29uc3QgbmV3TGlzdCA9IGRvY1tsYWJlbF0ubWFwKGQgPT4gYXBwbHlFdGFncyhkLCBuZXdFdGFncywgW10pKTtcclxuICAgIHJlc1tsYWJlbF0gPSBuZXdMaXN0O1xyXG4gIH1cclxuICByZXR1cm4gcmVzO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVhZEJsb2IoYmxvYjogQmxvYiwgbTogKHI6RmlsZVJlYWRlcik9PnZvaWQpIHtcclxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuICAgIHJlYWRlci5vbmxvYWQgPSBldiA9PiByZXNvbHZlKChldi50YXJnZXQgYXMgYW55KS5yZXN1bHQpO1xyXG4gICAgcmVhZGVyLm9uYWJvcnQgPSBldiA9PiByZWplY3QobmV3IEVycm9yKFwiZmlsZSByZWFkIGFib3J0ZWRcIikpO1xyXG4gICAgcmVhZGVyLm9uZXJyb3IgPSBldiA9PiByZWplY3QoKGV2LnRhcmdldCBhcyBhbnkpLmVycm9yKTtcclxuICAgIG0ocmVhZGVyKTtcclxuICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlYWRCbG9iQXNUZXh0IChibG9iOiBCbG9iKSB7XHJcbiAgcmV0dXJuIHJlYWRCbG9iKGJsb2IsIHI9PnIucmVhZEFzVGV4dChibG9iKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZWFkQmxvYkFzRGF0YVVybCAoYmxvYjogQmxvYikge1xyXG4gIHJldHVybiByZWFkQmxvYihibG9iLCByPT5yLnJlYWRBc0RhdGFVUkwoYmxvYikpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYWxsb3dDb3B5KGU6IFJlYWN0LkRyYWdFdmVudDxIVE1MRGl2RWxlbWVudD4pIHtcclxuICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuICBlLmRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0ID0gJ2NvcHknO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlQ291cnNlQnVpbGRlclN0YXR1cyhzdGF0dXM6ICd1bnNhdmVkJyB8ICdzYXZlZCcgfCAnZXJyb3InIHwgJycpIHtcclxuICBjb25zdCBkaXYgPSAkKCdkaXYuY291cnNlLWJ1aWxkZXInKVswXTtcclxuICBpZiAoZGl2KSBkaXYuY2xhc3NOYW1lID0gXCJjb3Vyc2UtYnVpbGRlclwiICsgKHN0YXR1cyA/IFwiIHN0YXR1cyBcIiArIHN0YXR1cyA6IFwiXCIpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9hZENvdXJzZShpZDogc3RyaW5nLCBvcHRpb25zPzoge1xyXG4gICAgaW5jbHVkZVRlbXBsYXRlQ2hhaW4/OiBib29sZWFuLFxyXG4gICAgaW5jbHVkZT86IHN0cmluZ1tdXHJcbiAgfSk6IFByb21pc2U8Q291cnNlPlxyXG57XHJcbiAgY29uc3QgY2xpZW50ID0gZW52LmtlZEJhY2tlbmRDbGllbnQ7XHJcbiAgY29uc3QgaW5jbHVkZVRlbXBsYXRlQ2hhaW4gPSBvcHRpb25zICYmIG9wdGlvbnMuaW5jbHVkZVRlbXBsYXRlQ2hhaW47XHJcbiAgY29uc3QgaW5jbHVkZVRhc2tzID0gIW9wdGlvbnMgfHwgIW9wdGlvbnMuaW5jbHVkZSB8fCBvcHRpb25zLmluY2x1ZGUuaW5kZXhPZihcInRhc2tzXCIpICE9PSAtMTtcclxuICBjb25zdCBbY291cnNlLCBjb3Vyc2VUYXNrcywgdGVtcGxhdGVDaGFpbl0gPSAoYXdhaXQgUHJvbWlzZS5hbGwoW1xyXG4gICAgY2xpZW50LmdldChcImNvdXJzZXNcIiwgaWQsIHtcclxuICAgICAgaW5jbHVkZTogb3B0aW9ucyAmJiBvcHRpb25zLmluY2x1ZGUgPyBvcHRpb25zLmluY2x1ZGUuZmlsdGVyKGkgPT4gaSAhPT0gXCJ0YXNrc1wiKSA6IFtcclxuICAgICAgICBcImNlbnRyYWxDb250ZW50XCIsXHJcbiAgICAgICAgXCJrbm93bGVkZ2VSZXF1aXJlbWVudHNcIixcclxuICAgICAgICBcImFiaWxpdGllc1wiLFxyXG4gICAgICAgIFwiaW1hZ2VzXCIsXHJcbiAgICAgICAgXCJhY2xcIiAvLyBEb24ndCBpbmNsdWRlIHRhc2tzIGhlcmUuLi5cclxuICAgICAgXVxyXG4gICAgfSksXHJcbiAgICAvLyAuLi4gYnV0IGluY2x1ZGUgdGFza3MgaGVyZSBpbnN0ZWFkIHNvIHRoYXQgd2UgY2FuIGxvYWQgdGhlIGdyYXBocyBmb3IgdGhlXHJcbiAgICAvLyB0YXNrcyBhcyB3ZWxsIVxyXG4gICAgaW5jbHVkZVRhc2tzICYmIGNsaWVudC5saXN0KFwidGFza3NcIiwge1xyXG4gICAgICBoYXNFZGdlc0Zyb206IGlkLFxyXG4gICAgICBpbmNsdWRlOiBbJ2tub3dsZWRnZVJlcXVpcmVtZW50cycsICdjZW50cmFsQ29udGVudCcsICdhYmlsaXRpZXMnLCAnYWNsJ10sXHJcbiAgICAgIGZsYWdzOiBbJ2luY2x1ZGVJZHNPbmx5J10gLy8gRG9uJ3QgbmVlZCByZWR1bmRhbnQgaW5mbyB0aGF0J3MgYWxyZWFkeSBvbiBjb3Vyc2VcclxuICAgIH0pLFxyXG4gICAgaW5jbHVkZVRlbXBsYXRlQ2hhaW4gJiYgY2xpZW50Lmxpc3QoXCJjb3Vyc2VzXCIsIHtcclxuICAgICAgaGFzRWRnZXNGcm9tOiBpZCxcclxuICAgICAgZmxhZ3M6IFsnaWRzT25seSddXHJcbiAgICB9KVxyXG4gIF0pKSBhcyBbQ291cnNlLCBUYXNrW10sIENvdXJzZVtdXTtcclxuICBjb3Vyc2UudGFza3MgPSBjb3Vyc2VUYXNrcztcclxuXHJcbiAgLy8gQ29ycmVjdCB0aGUgb3JkZXIgb2YgQWJpbGl0aWVzXHJcbiAgaWYgKGNvdXJzZS5hYmlsaXRpZXMgJiYgY291cnNlLmFiaWxpdGllc09yZGVyKSB7XHJcbiAgICBjb3Vyc2UuYWJpbGl0aWVzID0gY291cnNlLmFiaWxpdGllc09yZGVyLm1hcChpZCA9PlxyXG4gICAgICBjb3Vyc2UuYWJpbGl0aWVzLmZpbmQoYSA9PiBhLmlkID09PSBpZCkpO1xyXG4gIH1cclxuXHJcbiAgLy8gQ29ycmVjdCB0aGUgb3JkZXIgb2YgS25vd2xlZGdlUmVxdWlyZW1lbnRzXHJcbiAgaWYgKGNvdXJzZS5rbm93bGVkZ2VSZXF1aXJlbWVudHMgJiYgY291cnNlLmtub3dsZWRnZVJlcXVpcmVtZW50c09yZGVyKSB7XHJcbiAgICBjb3Vyc2Uua25vd2xlZGdlUmVxdWlyZW1lbnRzID0gY291cnNlLmtub3dsZWRnZVJlcXVpcmVtZW50c09yZGVyLm1hcChpZCA9PlxyXG4gICAgICBjb3Vyc2Uua25vd2xlZGdlUmVxdWlyZW1lbnRzLmZpbmQoYyA9PiBjLmlkID09PSBpZCkpO1xyXG4gIH1cclxuXHJcbiAgLy8gQ29ycmVjdCB0aGUgb3JkZXIgb2YgQ2VudHJhbENvbnRlbnRcclxuICBpZiAoY291cnNlLmNlbnRyYWxDb250ZW50ICYmIGNvdXJzZS5jZW50cmFsQ29udGVudE9yZGVyKSB7XHJcbiAgICBjb3Vyc2UuY2VudHJhbENvbnRlbnQgPSBjb3Vyc2UuY2VudHJhbENvbnRlbnRPcmRlci5tYXAoaWQgPT5cclxuICAgICAgY291cnNlLmNlbnRyYWxDb250ZW50LmZpbmQoY2MgPT4gY2MuaWQgPT09IGlkKSk7Ly8uZmlsdGVyKHggPT4gISF4KTsvLyBEZWJ1Z2dpbmcgc29tdGhpbicgLiBOb3JtYWxseSB0aGUgbGFzdCAuZmlsdGVyKCkuLi4gcGFydCBzaG91bGQgbm90IGJlIG5lc2Nlc3NhcnkuLi5cclxuICB9XHJcbiAgXHJcbiAgLy8gSW5jbHVkZSB0ZW1wbGF0ZSBjaGFpbiBpZiByZXF1ZXN0ZWQuXHJcbiAgaWYgKGluY2x1ZGVUZW1wbGF0ZUNoYWluKSBjb3Vyc2UudGVtcGxhdGVDaGFpbiA9IHRlbXBsYXRlQ2hhaW47XHJcbiAgcmV0dXJuIGNvdXJzZTtcclxufVxyXG5cclxuLy8gQ2hlY2sgZGlmZmVyZW5jZXMgYmV0d2VlbiB0d28gYXJyYXkgb2YgdHlwZSBUXHJcbmV4cG9ydCBmdW5jdGlvbiBoYXNDaGFuZ2VzKG9yaWdpbmFsVmFsdWVzOiBBcnJheTxhbnk+LCBjdXJyZW50VmFsdWVzOiBBcnJheTxhbnk+KTogYm9vbGVhbntcclxuICByZXR1cm4gb3JpZ2luYWxWYWx1ZXMgPT09IHVuZGVmaW5lZCB8fCBjdXJyZW50VmFsdWVzLmZpbHRlcigoeCkgPT4gIW9yaWdpbmFsVmFsdWVzLmluY2x1ZGVzKHgpKS5sZW5ndGggPiAwIHx8IG9yaWdpbmFsVmFsdWVzLmZpbHRlcigoeCkgPT4gIWN1cnJlbnRWYWx1ZXMuaW5jbHVkZXMoeCkpLmxlbmd0aCA+IDA7XHJcbn1cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBnZXRVcmt1bmRIb3ZlclRleHQsIGdldFVya3VuZFN0YXR1c0NsYXNzLCBnZXRVcmt1bmRTaWduaWZpY2FuY2VDbGFzcyB9IGZyb20gJy4vdXJrdW5kLXV0aWxzJztcclxuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xyXG5pbXBvcnQgeyBBc3NpZ25tZW50LCBVcmt1bmRSZXNwb25zZSB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgU3Bpbm5lciB9IGZyb20gJy4uLy4uL2NvdXJzZS1idWlsZGVyL3N1Yi1jb21wb25lbnRzL3NwaW5uZXInO1xyXG5pbXBvcnQgZW52IGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCB7IGlzVGVhY2hlckF0U2Nob29sIH0gZnJvbSAnLi4vLi4vLi4vYWNjZXNzLWNvbnRyb2wnO1xyXG5pbXBvcnQgeyBmZWF0dXJlcyB9IGZyb20gJy4uLy4uLy4uL2ZlYXR1cmVzJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgICBsb2FkaW5nOiBib29sZWFuO1xyXG4gICAgZmlsZXM6IEFzc2lnbm1lbnRbXTtcclxuICAgIHNjaG9vbDogc3RyaW5nO1xyXG4gICAgdXNlcnNOb3RIYW5kZWRJbkRvY3M/OiB7Zmlyc3ROYW1lOnN0cmluZywgZW1haWw6IHN0cmluZ31bXTtcclxuICAgIHRhc2tEZWFkbGluZT86IHN0cmluZztcclxuICAgIHRlYWNoZXJBdFRoaXNTY2hvb2w6IGJvb2xlYW47XHJcbiAgICBkb3dubG9hZDogKGZpbGU6IEFzc2lnbm1lbnQpID0+IHZvaWQ7XHJcbiAgICByZWZyZXNoQXNzaWdubWVudDooYXNzaWdubWVudDogQXNzaWdubWVudCkgPT4gdm9pZDtcclxuICAgIGRlbGV0ZTogKGZpbGU6IHN0cmluZykgPT4gdm9pZDtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFRhc2tBc3NpZ25tZW50c1RhYmxlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLCB7fT4ge1xyXG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICAgIGNvbnN0IHtsb2FkaW5nLCBmaWxlcywgc2Nob29sLCB1c2Vyc05vdEhhbmRlZEluRG9jcywgdGFza0RlYWRsaW5lLCB0ZWFjaGVyQXRUaGlzU2Nob29sLCBkb3dubG9hZCwgcmVmcmVzaEFzc2lnbm1lbnR9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBjb25zdCBoYXNPd25Eb2NzID0gZmlsZXMuc29tZShmaWxlID0+IGZpbGUudXNlciA9PT0gZW52LmN1cnJlbnRVc2VyLm1haWwpO1xyXG5cclxuICAgICAgICByZXR1cm4gbG9hZGluZyA/IDw+XHJcbiAgICAgICAgICAgIDxTcGlubmVyIC8+IExhZGRhciBpbmzDpG1uYWRlIGZpbGVyLi4uXHJcbiAgICAgICAgICA8Lz4gOiBmaWxlcy5sZW5ndGggPT09IDAgJiYgIXVzZXJzTm90SGFuZGVkSW5Eb2NzP1xyXG4gICAgICAgICAgICAodGVhY2hlckF0VGhpc1NjaG9vbCA/IDxwPkluZ2VuIGVsZXYgaGFyIGzDpG1uYXQgaW4gbsOlZ290IGFyYmV0ZSDDpG5udS48L3A+IDogbnVsbClcclxuICAgICAgICAgIDogKHRlYWNoZXJBdFRoaXNTY2hvb2wgPyBnZXRUZWFjaGVyVmlldyhmaWxlcywgaGFzT3duRG9jcywgdXNlcnNOb3RIYW5kZWRJbkRvY3MsIHRhc2tEZWFkbGluZSwgZG93bmxvYWQsIHJlZnJlc2hBc3NpZ25tZW50KSA6IGdldFN0dWRlbnRWaWV3KGZpbGVzLCBoYXNPd25Eb2NzLCBkb3dubG9hZCkpXHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFRlYWNoZXJWaWV3KGZpbGVzOiBBc3NpZ25tZW50W10sIGhhc093bkRvY3M6IGJvb2xlYW4sIHVzZXJzTm90SGFuZGVkSW5Eb2NzOiB7IGZpcnN0TmFtZTogc3RyaW5nLCBlbWFpbDogc3RyaW5nIH1bXSwgdGFza0RlYWRsaW5lOiBzdHJpbmcsIGRvd25sb2FkLCByZWZyZXNoQXNzaWdubWVudCkge1xyXG4gICAgcmV0dXJuIDw+e2ZpbGVzLmxlbmd0aCA+IDAgJiYgPD57ZmVhdHVyZXMuc3R1ZHlHcm91cHMgJiYgPHA+VXBsb2FkZWQgYXNzaWdubWVudHM8L3A+fVxyXG4gICAgPHRhYmxlIGNsYXNzTmFtZT1cInRhc2stYXNzaWdubWVudHMtdGFibGVcIj4gIFxyXG4gICAgPHRoZWFkPlxyXG4gICAgICAgIDx0cj5cclxuICAgICAgICAgICAgPHRoPkVsZXY8L3RoPlxyXG4gICAgICAgICAgICA8dGg+RmlsbmFtbjwvdGg+XHJcbiAgICAgICAgICAgIDx0aD5JbmzDpG1uYXQgZGVuPC90aD5cclxuICAgICAgICAgICAgPHRoPlJhcHBvcnQ8L3RoPlxyXG4gICAgICAgICAgICA8dGg+Tml2w6U8L3RoPlxyXG4gICAgICAgICAgICB7aGFzT3duRG9jcyAmJiA8dGggLz59XHJcbiAgICAgICAgPC90cj5cclxuICAgIDwvdGhlYWQ+XHJcbiAgICA8dGJvZHk+XHJcbiAgICB7XHJcbiAgICAgICAgZmlsZXMubWFwKGZpbGUgPT4gPHRyIGtleT17ZmlsZS5tZWRpYUxpbmt9IHN0eWxlPXtmaWxlLm1ldGFkYXRhLiRtZXRhID8geyBvcGFjaXR5OiAwLjUgfSA6IHt9fT5cclxuICAgICAgICAgICAgPD5cclxuICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgPGEgaHJlZj17YG1haWx0bzoke2ZpbGUudXNlcn1gfT5cclxuICAgICAgICAgICAgICAgICAgICB7ZmlsZS5tZXRhZGF0YS51c2VyRGlzcGxheU5hbWUgfHwgZmlsZS51c2VyfVxyXG4gICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICA8dGQ+e2ZpbGUubWV0YWRhdGEuZHJpdmVGaWxlSWQgP1xyXG4gICAgICAgICAgICAgICAgLy8gVGhlIGZpbGUgY2FuIGJlIGVkaXRlZCBvbiBkcml2ZS4gTGluayB0byBlZGl0aW5nIGl0LlxyXG4gICAgICAgICAgICAgICAgPERyaXZlRmlsZUxpc3RpbmcgZmlsZT17ZmlsZX0gLz4gOlxyXG4gICAgICAgICAgICAgICAgLy8gVGhlIGZpbGUgY2Fubm90IGJlIGVkaXRlZCBvbiBkcml2ZS4gTGluayB0byBkb3dubG9hZGluZyBpdC5cclxuICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjXCIgb25DbGljaz17ZXYgPT4gXHJcbiAgICAgICAgICAgICAgICAgICAgeyAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb3dubG9hZChmaWxlKTtcclxuICAgICAgICAgICAgICAgICAgICB9fT57ZmlsZS5maWxlbmFtZX08L2E+fVxyXG4gICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwiYXNzaWdubWVudC1kYXRlLWNvbFwiPnttb21lbnQoZmlsZS51cGxvYWREYXRlKS5mb3JtYXQoJ1lZWVktTU0tREQgSEg6bW0nKX08L3RkPlxyXG4gICAgICAgICAgICB7ZmlsZS5tZXRhZGF0YS4kbWV0YSA9PT0gJ2FkZCcgP1xyXG4gICAgICAgICAgICAgICAgPHRkIGNvbFNwYW49ezJ9PjxTcGlubmVyIC8+IExhZGRhciB1cHAuLi48L3RkPiA6XHJcbiAgICAgICAgICAgICAgICBmaWxlLm1ldGFkYXRhLiRtZXRhID09PSAnZGVsZXRlJyA/XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkIGNvbFNwYW49ezJ9PjxTcGlubmVyIC8+IFRhciBib3J0Li4uPC90ZD4gOlxyXG4gICAgICAgICAgICAgICAgICAgICgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgbWV0YWRhdGEgfSA9IGZpbGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cmt1bmRSZXNwb25zZXM6IFVya3VuZFJlc3BvbnNlW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmt1bmRSZXNwb25zZXMgPSBtZXRhZGF0YS51cmt1bmRSZXNwb25zZSAmJiBKU09OLnBhcnNlKG1ldGFkYXRhLnVya3VuZFJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaChlcnIpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJrdW5kUmVzcG9uc2VzID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdXJrdW5kUmVzcG9uc2UgPSB1cmt1bmRSZXNwb25zZXMgJiYgdXJrdW5kUmVzcG9uc2VzWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXVya3VuZFJlc3BvbnNlICYmIGZpbGUubWV0YWRhdGEudXJrdW5kVXBsb2FkRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVya3VuZFJlc3BvbnNlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0YXR1czoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFcnJvckNvZGU6IC0xLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlOiBmaWxlLm1ldGFkYXRhLnVya3VuZFVwbG9hZEVycm9yLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdGF0ZTogJ0Vycm9yJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXh0ZXJuYWxJZDogZmlsZS5tZXRhZGF0YS51cmt1bmRFeHRlcm5hbElkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGFzIFVya3VuZFJlc3BvbnNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWxlLmlzUmVmcmVzaGluZykgcmV0dXJuIDx0ZCBjb2xTcGFuPXsyfT48U3Bpbm5lciAvPiBVcHBkYXRlcmFyLi4uPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVya3VuZFJlc3BvbnNlID8gPD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJ1cmt1bmQtc3RhdHVzLWNvbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY9e3Vya3VuZFJlc3BvbnNlLlJlcG9ydCAmJiB1cmt1bmRSZXNwb25zZS5SZXBvcnQuUmVwb3J0VXJsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtldiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoWydBY2NlcHRlZCcsICdTdWJtaXR0ZWQnXS5pbmRleE9mKHVya3VuZFJlc3BvbnNlLlN0YXR1cy5TdGF0ZSkgPT09IC0xKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsgLy8gRm9sbG93IEhSRUYgaW5zdGVhZC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZnJlc2hBc3NpZ25tZW50KGZpbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ9XCJfYmxhbmtcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17Z2V0VXJrdW5kSG92ZXJUZXh0KHVya3VuZFJlc3BvbnNlKX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtnZXRVcmt1bmRTdGF0dXNDbGFzcyh1cmt1bmRSZXNwb25zZSl9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJ1cmt1bmQtc3RhdHVzLWNvbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtnZXRVcmt1bmRTaWduaWZpY2FuY2VDbGFzcyh1cmt1bmRSZXNwb25zZSl9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7dXJrdW5kUmVzcG9uc2UuUmVwb3J0ICYmIHR5cGVvZiB1cmt1bmRSZXNwb25zZS5SZXBvcnQuU2lnbmlmaWNhbmNlID09PSAnbnVtYmVyJyA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgJHt1cmt1bmRSZXNwb25zZS5SZXBvcnQuU2lnbmlmaWNhbmNlLnRvRml4ZWQoKX0lYCA6ICcgJ31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvPiA6IDx0ZCBjb2xTcGFuPXsyfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgIH0pKClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgPC8+XHJcbiAgICAgICAgICAgIHtoYXNPd25Eb2NzICYmIGdldERlbGV0ZU93bkRvY3NDb2x1bW4oZmlsZSl9XHJcbiAgICAgICAgPC90cj4pXHJcbiAgICB9XHJcbiAgICA8L3Rib2R5PlxyXG4gICAgPC90YWJsZT5cclxuICAgIDwvPlxyXG4gICAgfVxyXG4gICAgPGJyLz5cclxuICAgIHt1c2Vyc05vdEhhbmRlZEluRG9jcyAmJiB1c2Vyc05vdEhhbmRlZEluRG9jcy5sZW5ndGggPiAwICYmIGdldFN0dWRlbnROb3RIYW5kZWRJbkFzc2lnbm1lbnQodXNlcnNOb3RIYW5kZWRJbkRvY3MsIHRhc2tEZWFkbGluZSl9XHJcbiAgICA8Lz5cclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0U3R1ZGVudFZpZXcoZmlsZXM6IEFzc2lnbm1lbnRbXSwgaGFzT3duRG9jczogYm9vbGVhbiwgZG93bmxvYWQ6IChmaWxlOiBBc3NpZ25tZW50KSA9PiB2b2lkKXtcclxuICAgIHJldHVybiA8dGFibGUgY2xhc3NOYW1lPVwidGFzay1hc3NpZ25tZW50cy10YWJsZVwiPjx0aGVhZD48dHI+XHJcbiAgICAgPHRoPkZpbG5hbW48L3RoPlxyXG4gICAgIDx0aD5JbmzDpG1uYXQgZGVuPC90aD5cclxuICAgICB7aGFzT3duRG9jcyAmJiA8dGggLz59XHJcbiAgICAgPC90cj48L3RoZWFkPlxyXG4gICAgIDx0Ym9keT5cclxuICAgICAgICAge1xyXG4gICAgICAgICAgIGZpbGVzLm1hcChmaWxlID0+IFxyXG4gICAgICAgICAgIDx0clxyXG4gICAgICAgICAgICBrZXk9e2ZpbGUubWVkaWFMaW5rfVxyXG4gICAgICAgICAgICBzdHlsZT17ZmlsZS5tZXRhZGF0YS4kbWV0YSA/IHtvcGFjaXR5OiAwLjV9OiB7fX1cclxuICAgICAgICAgID4gIFxyXG4gICAgICAgICAgPHRkPlxyXG4gICAgICAgICAge2ZpbGUubWV0YWRhdGEuZHJpdmVGaWxlSWQgP1xyXG4gICAgICAgIC8vIFRoZSBmaWxlIGNhbiBiZSBlZGl0ZWQgb24gZHJpdmUuIExpbmsgdG8gZWRpdGluZyBpdC5cclxuICAgICAgICA8RHJpdmVGaWxlTGlzdGluZyBmaWxlPXtmaWxlfSAvPiA6XHJcblxyXG4gICAgICAgIC8vIFRoZSBmaWxlIGNhbm5vdCBiZSBlZGl0ZWQgb24gZHJpdmUuIExpbmsgdG8gZG93bmxvYWRpbmcgaXQuXHJcbiAgICAgICAgPGEgaHJlZj1cIiNcIiBvbkNsaWNrPXtldiA9PiB7XHJcbiAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICBkb3dubG9hZChmaWxlKTtcclxuICAgICAgICB9fT57ZmlsZS5maWxlbmFtZX08L2E+XHJcbiAgICAgICAgfVxyXG4gICAgICAgIDwvdGQ+XHJcblxyXG4gICAgICAgIDx0ZCBjbGFzc05hbWU9XCJhc3NpZ25tZW50LWRhdGUtY29sXCI+e2ZpbGUubWV0YWRhdGEuJG1ldGEgPT09ICdhZGQnID9cclxuICAgICAgICA8PjxTcGlubmVyIC8+IExhZGRhciB1cHAuLi48Lz4gOlxyXG4gICAgICAgIGZpbGUubWV0YWRhdGEuJG1ldGEgPT09ICdkZWxldGUnID9cclxuICAgICAgICA8PjxTcGlubmVyIC8+IFRhciBib3J0Li4uPC8+IDpcclxuICAgICAgICBtb21lbnQoZmlsZS51cGxvYWREYXRlKS5mb3JtYXQoJ1lZWVktTU0tREQgSEg6bW0nKX08L3RkPlxyXG4gICAgICAgIHtoYXNPd25Eb2NzICYmIGdldERlbGV0ZU93bkRvY3NDb2x1bW4oZmlsZSl9XHJcbiAgICAgICA8L3RyPilcclxuICAgICAgICAgfVxyXG4gICAgPC90Ym9keT5cclxuPC90YWJsZT5cclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0RGVsZXRlT3duRG9jc0NvbHVtbihmaWxlOiBBc3NpZ25tZW50KXtcclxuICAgIHJldHVybiA8dGQ+XHJcbiAgICB7IWZpbGUubWV0YWRhdGEuJG1ldGEgJiYgZmlsZS51c2VyID09PSBlbnYuY3VycmVudFVzZXIubWFpbCAmJlxyXG4gICAgICAgIDxhIGhyZWY9XCIjXCIgb25DbGljaz17ZXYgPT4ge1xyXG4gICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgaWYgKGNvbmZpcm0oYFJhZGVyYSBpbmzDpG1uYWQgZmlsICR7ZmlsZS5maWxlbmFtZX0/YCkpXHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMuZGVsZXRlKGZpbGUubWVkaWFMaW5rKTtcclxuICAgICAgICB9fT5cclxuICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS10cmFzaFwiLz5cclxuICAgICAgICA8L2E+XHJcbiAgICB9XHJcbiAgICA8L3RkPlxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRTdHVkZW50Tm90SGFuZGVkSW5Bc3NpZ25tZW50KHVzZXJzTm90SGFuZGVkSW5Eb2NzOiB7Zmlyc3ROYW1lOnN0cmluZywgZW1haWw6IHN0cmluZ31bXSwgdGFza0RlYWRsaW5lOiBzdHJpbmcpe1xyXG5yZXR1cm4gIDw+e2ZlYXR1cmVzLnN0dWR5R3JvdXBzICYmIDxwPk5vdCBoYW5kZWQgaW4gYXNzaWdubWVudHM8L3A+fVxyXG48dGFibGUgY2xhc3NOYW1lPVwidGFzay1hc3NpZ25tZW50cy10YWJsZVwiPlxyXG48dGhlYWQ+XHJcbiAgPHRyPlxyXG4gICAgPHRoPkVsZXY8L3RoPlxyXG4gICAgPHRoPlRhc2sgZGVhZGxpbmU8L3RoPlxyXG4gIDwvdHI+XHJcbjwvdGhlYWQ+XHJcbiAge3VzZXJzTm90SGFuZGVkSW5Eb2NzLm1hcCh1c2VyID0+XHJcbiAgICA8dHIga2V5PXt1c2VyLmZpcnN0TmFtZX0gc3R5bGU9e3sgb3BhY2l0eTogMC41IH19PlxyXG4gICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgPGEgaHJlZj17YG1haWx0bzoke3VzZXIuZW1haWx9YH0+e3VzZXIuZmlyc3ROYW1lfTwvYT5cclxuICAgICAgICA8L3RkPlxyXG4gICAgICAgIDx0ZD4ge3Rhc2tEZWFkbGluZX0gPC90ZD5cclxuICAgIDwvdHI+XHJcbiAgKX1cclxuPC90YWJsZT5cclxuPGJyLz5cclxuPC8+XHJcbn1cclxuXHJcbmZ1bmN0aW9uIERyaXZlRmlsZUxpc3RpbmcgKHtmaWxlfToge2ZpbGU6IEFzc2lnbm1lbnR9KSB7XHJcbiAgICBjb25zdCB7ZHJpdmVGaWxlSWNvblVybCwgZHJpdmVGaWxlVXJsfSA9IGZpbGUubWV0YWRhdGE7XHJcbiAgICBjb25zdCBmaWxlbmFtZSA9IGZpbGUuZmlsZW5hbWUuc3Vic3RyKDAsIGZpbGUuZmlsZW5hbWUubGFzdEluZGV4T2YoJy4nKSk7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWwgc3BhY2VkXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICAgIDxpbWcgY2xhc3NOYW1lPVwiZmlsZS1pY29uXCIgc3JjPXtkcml2ZUZpbGVJY29uVXJsfSAvPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgICA8cD48YSB0YXJnZXQ9XCJfYmxhbmtcIiBocmVmPXtkcml2ZUZpbGVVcmx9PntmaWxlbmFtZX08L2E+PC9wPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgICk7XHJcbiAgfSIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IGVudiBmcm9tICcuLi8uLi8uLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5pbXBvcnQgeyBBc3NpZ25tZW50LCBVcmt1bmRSZXNwb25zZSB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgc2hvd0Vycm9yLCBjb21wYXJlUHJvcHMsIGZsYXR0ZW4gfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IFNwaW5uZXIgfSBmcm9tICcuLi8uLi9jb3Vyc2UtYnVpbGRlci9zdWItY29tcG9uZW50cy9zcGlubmVyJztcclxuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xyXG5pbXBvcnQgeyBIdHRwRXJyb3IsIGNyZWF0ZVVVSUQgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XHJcbmltcG9ydCB7IGhhc1dyaXRlQWNjZXNzLCBpc1RlYWNoZXJBdFNjaG9vbCB9IGZyb20gJy4uLy4uLy4uL2FjY2Vzcy1jb250cm9sJztcclxuaW1wb3J0IGRvd25sb2FkIGZyb20gJ2Rvd25sb2FkanMnO1xyXG5pbXBvcnQge1xyXG4gIGdldFVya3VuZFNpZ25pZmljYW5jZUNsYXNzLFxyXG4gIGdldFVya3VuZFN0YXR1c0NsYXNzLFxyXG4gIGdldFVya3VuZEhvdmVyVGV4dH0gZnJvbSAnLi91cmt1bmQtdXRpbHMnO1xyXG5pbXBvcnQgeyBpc0VtcGxveWVlIH0gZnJvbSAnLi4vLi4vY291cnNlLWJ1aWxkZXIta3MvbG9naWMvaXMtZW1wbG95ZWUnO1xyXG5pbXBvcnQgeyBHb29nbGVQaWNrZXIgfSBmcm9tICcuLi8uLi8uLi9hcGlzL2dvb2dsZS1waWNrZXInO1xyXG5pbXBvcnQgeyBEcml2ZUJ1dHRvbiB9IGZyb20gXCIuLi8uLi8uLi9hcGlzL2J1dHRvbnNcIjtcclxuaW1wb3J0IHsgZmVhdHVyZXMgfSBmcm9tICcuLi8uLi8uLi9mZWF0dXJlcyc7XHJcbmltcG9ydCB7IEdvb2dsZURyaXZlLCBzZWxlY3RlZEZpbGUgfSBmcm9tICcuLi8uLi8uLi9hcGlzL2dvb2dsZS1kcml2ZSc7XHJcbmltcG9ydCB7IG1vY2tUdWl0aW9uU3R1ZGVudHMgfSBmcm9tICcuLi8uLi8uLi9hcGlzL21vY2svbW9jay1jbGFzc3Jvb20tZGF0YSc7XHJcbmltcG9ydCB7IFRhc2tBc3NpZ25tZW50c1RhYmxlIH0gZnJvbSAnLi90YXNrLWFzc2lnbm1lbnRzLXRhYmxlJztcclxuaW1wb3J0IHsgT3BlbkNsb3NlQm94IH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL29wZW4tY2xvc2UtYm94JztcclxuXHJcbmNvbnN0IE1BWF9VUktVTkRfRklMRV9TSVpFX01CID0gNTA7XHJcbmNvbnN0IE1BWF9OT05VUktVTkRfRklMRV9TSVpFX01CID0gMTAwO1xyXG5jb25zdCBBTExPV0VEX0VYVEVOU0lPTlMgPSBbXHJcbiAgXCIucGRmXCIsXHJcbiAgXCIub2R0XCIsXHJcbiAgXCIuZG9jeFwiLFxyXG4gIFwiLmRvY1wiLFxyXG4gIFwiLmNhZFwiLFxyXG4gIFwiLndhdlwiLFxyXG4gIFwiLm1wM1wiLFxyXG4gIFwiLm1wZWc0XCIsXHJcbiAgXCIubXA0XCIsXHJcbiAgXCIuemlwXCIsXHJcbiAgXCIucG5nXCIsXHJcbiAgXCIuanBnXCIsXHJcbiAgXCIuanBlZ1wiLFxyXG4gIFwiLmdpZlwiXHJcbl07XHJcbmNvbnN0IFVSS1VORF9FWFRFTlNJT05TID0gW1xyXG4gIFwiLnBkZlwiLFxyXG4gIFwiLm9kdFwiLFxyXG4gIFwiLmRvY3hcIixcclxuICBcIi5kb2NcIlxyXG5dO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBjb3Vyc2VJZDogc3RyaW5nO1xyXG4gIHRhc2tJZDogc3RyaW5nO1xyXG4gIHNjaG9vbDogc3RyaW5nO1xyXG4gIHNlbmRUb1Vya3VuZDogYm9vbGVhbjtcclxuICBjb3Vyc2VTdHVkeUdyb3Vwcz86IHN0cmluZ1tdO1xyXG4gIHRhc2tEZWFkbGluZT86IHN0cmluZztcclxufVxyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICBhc3NpZ25tZW50czogQXNzaWdubWVudFtdO1xyXG4gIGxvYWRpbmc6IGJvb2xlYW47XHJcbiAgdXBsb2FkaW5nRmlsZT86IEZpbGU7XHJcbiAgZXJyb3I/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBUYXNrQXNzaWdubWVudHMgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsIFN0YXRlPiB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICBhc3NpZ25tZW50czogW10sXHJcbiAgICAgIGxvYWRpbmc6IHRydWVcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRTdGF0ZVByb21pc2VkKGNiOiAocHJldlN0YXRlOiBSZWFkb25seTxTdGF0ZT4sIHByb3BzOiBQcm9wcykgPT4gUGFydGlhbDxTdGF0ZT4pIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHN1cGVyLnNldFN0YXRlKGNiIGFzIGFueSwgcmVzb2x2ZSkpO1xyXG4gIH0gIFxyXG5cclxuICBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgIHRoaXMubG9hZCgpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHM6IFByb3BzKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAobmV4dFByb3BzLnRhc2tJZCAhPT0gdGhpcy5wcm9wcy50YXNrSWQgfHxcclxuICAgICAgICAgIG5leHRQcm9wcy5jb3Vyc2VJZCAhPT0gdGhpcy5wcm9wcy5jb3Vyc2VJZClcclxuICAgICAge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2V0U3RhdGVQcm9taXNlZCgoKT0+KHtcclxuICAgICAgICAgIGFzc2lnbm1lbnRzOiBbXSxcclxuICAgICAgICAgIGxvYWRpbmc6IHRydWVcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkKCk7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICBzaG93RXJyb3IoZXJyKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHVwZGF0ZShhc3NpZ25tZW50czogQXNzaWdubWVudFtdLCBhc3NpZ25tZW50OiBBc3NpZ25tZW50KTogQXNzaWdubWVudFtdIHtcclxuICAgIGNvbnN0IHJldHZhbCA9IFtcclxuICAgICAgYXNzaWdubWVudCxcclxuICAgICAgLi4uYXNzaWdubWVudHMuZmlsdGVyKCh7dXNlciwgZmlsZW5hbWV9KSA9PlxyXG4gICAgICAgIHVzZXIgIT09IGFzc2lnbm1lbnQudXNlciB8fFxyXG4gICAgICAgIGZpbGVuYW1lICE9PSBhc3NpZ25tZW50LmZpbGVuYW1lKV07XHJcbiAgICByZXR1cm4gcmV0dmFsO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgcmVmcmVzaEFzc2lnbm1lbnQoYXNzaWdubWVudDogQXNzaWdubWVudCkge1xyXG4gICAgY29uc3QgY2xpZW50ID0gZW52LmtlZEJhY2tlbmRDbGllbnQuaHR0cDtcclxuICAgIGNvbnN0IHtjb3Vyc2VJZCwgdGFza0lkLCBzY2hvb2x9ID0gdGhpcy5wcm9wcztcclxuICAgIGNvbnN0IHt1c2VyLCBmaWxlbmFtZX0gPSBhc3NpZ25tZW50O1xyXG4gICAgYXdhaXQgdGhpcy5zZXRTdGF0ZSgoe2Fzc2lnbm1lbnRzfSkgPT4gKHtcclxuICAgICAgYXNzaWdubWVudHM6IHRoaXMudXBkYXRlKGFzc2lnbm1lbnRzLCB7Li4uYXNzaWdubWVudCwgaXNSZWZyZXNoaW5nOiB0cnVlfSlcclxuICAgIH0pKTtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlcSA9IGF3YWl0IGNsaWVudC5nZXQoYGFzc2lnbm1lbnRzL3Vya3VuZC8ke3NjaG9vbH0vJHtjb3Vyc2VJZH0vJHt0YXNrSWR9LyR7dXNlcn0vJHtmaWxlbmFtZX1gKTtcclxuICAgICAgaWYgKHJlcS5zdGF0dXMgPj0gNDAwKSB0aHJvdyBuZXcgSHR0cEVycm9yKHJlcS5zdGF0dXMsIGF3YWl0IHJlcS50ZXh0KCkpO1xyXG4gICAgICBjb25zdCByZXNKc29uID0gYXdhaXQgcmVxLnRleHQoKTtcclxuICAgICAgYXdhaXQgdGhpcy5zZXRTdGF0ZSgoe2Fzc2lnbm1lbnRzfSkgPT4gKHtcclxuICAgICAgICBhc3NpZ25tZW50czogdGhpcy51cGRhdGUoYXNzaWdubWVudHMsIHsuLi5hc3NpZ25tZW50LCBpc1JlZnJlc2hpbmc6IGZhbHNlLCBtZXRhZGF0YToge1xyXG4gICAgICAgICAgLi4uYXNzaWdubWVudC5tZXRhZGF0YSxcclxuICAgICAgICAgIHVya3VuZFJlc3BvbnNlOiByZXNKc29uXHJcbiAgICAgICAgfX0pXHJcbiAgICAgIH0pKTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgYXdhaXQgdGhpcy5zZXRTdGF0ZSgoe2Fzc2lnbm1lbnRzfSkgPT4gKHtcclxuICAgICAgICBhc3NpZ25tZW50czogdGhpcy51cGRhdGUoYXNzaWdubWVudHMsIHtcclxuICAgICAgICAgIC4uLmFzc2lnbm1lbnQsXHJcbiAgICAgICAgICBpc1JlZnJlc2hpbmc6IGZhbHNlLFxyXG4gICAgICAgICAgcmVmcmVzaEVycm9yOiBlXHJcbiAgICAgICAgfSlcclxuICAgICAgfSkpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgbG9hZCgpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGNsaWVudCA9IGVudi5rZWRCYWNrZW5kQ2xpZW50Lmh0dHA7XHJcbiAgICAgIGNvbnN0IHtjb3Vyc2VJZCwgdGFza0lkLCBzY2hvb2x9ID0gdGhpcy5wcm9wcztcclxuICAgICAgY29uc3QgdGVhY2hlckF0U2Nob29sID0gaXNUZWFjaGVyQXRTY2hvb2woZW52LmN1cnJlbnRVc2VyLCBzY2hvb2wpO1xyXG4gICAgICBjb25zdCByZXMgPSBhd2FpdCAodGVhY2hlckF0U2Nob29sID9cclxuICAgICAgICBjbGllbnQuZ2V0KGBhc3NpZ25tZW50cy8ke3NjaG9vbH0vJHtjb3Vyc2VJZH0vJHt0YXNrSWR9YCkgOlxyXG4gICAgICAgIGNsaWVudC5nZXQoYGFzc2lnbm1lbnRzLyR7c2Nob29sfS8ke2NvdXJzZUlkfS8ke3Rhc2tJZH0vJHtlbnYuY3VycmVudFVzZXIubWFpbH1gKSk7XHJcbiAgICAgIGlmIChyZXMuc3RhdHVzICE9PSAyMDApIHtcclxuICAgICAgICB0aHJvdyBuZXcgSHR0cEVycm9yKHJlcy5zdGF0dXMsIGF3YWl0IHJlcy50ZXh0KCkpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBhc3NpZ25tZW50cyA9IGF3YWl0IHJlcy5qc29uKCkgYXMgQXNzaWdubWVudFtdO1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICBlcnJvcjogbnVsbCxcclxuICAgICAgICBsb2FkaW5nOiBmYWxzZSxcclxuICAgICAgICBhc3NpZ25tZW50c1xyXG4gICAgICB9KTtcclxuICAgICAgaWYgKHRlYWNoZXJBdFNjaG9vbCkge1xyXG4gICAgICAgIGNvbnN0IHJlZnJlc2hhYmxlQXNzaWdtZW50cyA9IGFzc2lnbm1lbnRzLmZpbHRlcihhID0+XHJcbiAgICAgICAgICBhLm1ldGFkYXRhICYmIC8vIE11c3QgaGF2ZSBtZXRhZGF0YS51cmt1bmRFeHRlcm5hbElkIE90aGVyd2lzZSBub3QgcG9zc2libGUgdG8gcmVmcmVzaFxyXG4gICAgICAgICAgIWEubWV0YWRhdGEudXJrdW5kVXBsb2FkRXJyb3IgJiYgKCAvLyBOb3QgcG9zc2libGUgdG8gcmVmcmVzaCBpZiB1cGxvYWQgaGFzIGZhaWxlZFxyXG4gICAgICAgICAgICAhYS5tZXRhZGF0YS51cmt1bmRMYXN0UG9sbCB8fCAvLyBOZXZlciBjaGVja2VkIHN0YXR1cyB5ZXRcclxuICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgIFsnQWNjZXB0ZWQnLCAnU3VibWl0dGVkJ10uaW5kZXhPZigoSlNPTi5wYXJzZShhLm1ldGFkYXRhLnVya3VuZFJlc3BvbnNlKVswXSBhcyBVcmt1bmRSZXNwb25zZSkuU3RhdHVzLlN0YXRlKSA+PSAwICYmXHJcbiAgICAgICAgICAgICAgcGFyc2VJbnQoYS5tZXRhZGF0YS51cmt1bmRMYXN0UG9sbCkgPCBtb21lbnQoKS5hZGQoLTE1LCBcInNlY29uZHNcIikudG9EYXRlKCkuZ2V0VGltZSgpKVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgICAgIC8vIENoZWNrZWQgc3RhdHVzIGZvciBhIGxvbmcgdGltZSBhZ29cclxuICAgICAgICAgICk7XHJcbiAgICAgICAgZm9yIChsZXQgYSBvZiByZWZyZXNoYWJsZUFzc2lnbWVudHMpIHtcclxuICAgICAgICAgIGF3YWl0IHRoaXMucmVmcmVzaEFzc2lnbm1lbnQoYSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICBsb2FkaW5nOiBmYWxzZSxcclxuICAgICAgICBlcnJvcjogYEt1bmRlIGludGUgbGFkZGEgaW5sw6RtbmluZ3N1cHBnaWZ0ZXJgLFxyXG4gICAgICAgIGFzc2lnbm1lbnRzOiBbXVxyXG4gICAgICB9KTtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbkRyYWcgKGV2OiBSZWFjdC5EcmFnRXZlbnQ8SFRNTERpdkVsZW1lbnQ+KSB7XHJcbiAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBldi5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9ICdjb3B5JztcclxuICB9XHJcbiAgXHJcbiAgYXN5bmMgdmVyaWZ5QW5kVXBsb2FkKGZpbGU6IEZpbGUsIGRyaXZlRmlsZT86IHNlbGVjdGVkRmlsZSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKCFmaWxlKSByZXR1cm47XHJcbiAgICAgIGlmICh0aGlzLnN0YXRlLmFzc2lnbm1lbnRzLnNvbWUoYSA9PlxyXG4gICAgICAgIGEudXNlciA9PT0gZW52LmN1cnJlbnRVc2VyLm1haWwgJiZcclxuICAgICAgICBhLmZpbGVuYW1lID09PSBmaWxlLm5hbWUpKVxyXG4gICAgICB7XHJcbiAgICAgICAgaWYgKCFjb25maXJtKGBFcnPDpHR0YSBiZWZpbnRsaWcgZmlsICgke2ZpbGUubmFtZX0pP2ApKSB7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmICh0aGlzLnByb3BzLnNjaG9vbC50b0xvd2VyQ2FzZSgpICE9PSBlbnYuY3VycmVudFVzZXIuc2Nob29sLnRvTG93ZXJDYXNlKCkpIHtcclxuICAgICAgICBpZiAoIWNvbmZpcm0oYFVwcGdpZnRlbiB0aWxsaMO2ciBlbiBhbm5hbiBza29sYSAoJHt0aGlzLnByb3BzLnNjaG9vbH0pLlxcbmArXHJcbiAgICAgICAgICBgVmlsbCBkdSDDpG5kw6UgbMOkbW5hIGluIGRpdHQgYXJiZXRlIGjDpHI/YCkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICB0aGlzLnNldFN0YXRlKHt1cGxvYWRpbmdGaWxlOiBmaWxlfSk7XHJcbiAgICAgIGF3YWl0IHRoaXMudXBsb2FkKGZpbGUsIGRyaXZlRmlsZSk7XHJcbiAgICAgIGF3YWl0IHRoaXMubG9hZCgpO1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICB1cGxvYWRpbmdGaWxlOiBudWxsXHJcbiAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgZXJyb3I6IFwiS3VuZGUgaW50ZSBsYWRkYSB1cHAgZmlsZW4uIFwiICsgKGVycm9yLm1lc3NhZ2UgfHwgZXJyb3IpLFxyXG4gICAgICAgIHVwbG9hZGluZ0ZpbGU6IG51bGxcclxuICAgICAgfSk7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICBhc3luYyB1cGxvYWQoZmlsZTogRmlsZSwgZHJpdmVGaWxlPzogc2VsZWN0ZWRGaWxlKSB7XHJcbiAgICBjb25zdCBjbGllbnQgPSBlbnYua2VkQmFja2VuZENsaWVudC5odHRwO1xyXG4gICAgY29uc3Qge2NvdXJzZUlkLCB0YXNrSWQsIHNjaG9vbCwgc2VuZFRvVXJrdW5kfSA9IHRoaXMucHJvcHM7XHJcbiAgICBjb25zdCB7bWFpbH0gPSBlbnYuY3VycmVudFVzZXI7XHJcbiAgICBjb25zdCBpc1Vya3VuZEV4dGVuc2lvbiA9IFVSS1VORF9FWFRFTlNJT05TXHJcbiAgICAgIC5pbmRleE9mKFwiLlwiK2ZpbGUubmFtZS5zcGxpdCgnLicpLnJldmVyc2UoKVswXS50b0xvd2VyQ2FzZSgpKSA+PSAwO1xyXG4gICAgaWYgKGlzVXJrdW5kRXh0ZW5zaW9uKSB7XHJcbiAgICAgIGlmIChmaWxlLnNpemUgPiBNQVhfVVJLVU5EX0ZJTEVfU0laRV9NQiAqIDEwMjQgKiAxMDI0KSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGaWxlciBhdiBkZW5uYSB0eXAgZsOlciBpbnRlIHZhcmEgc3TDtnJyZSDDpG4gJHtNQVhfVVJLVU5EX0ZJTEVfU0laRV9NQn0gTUJgKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKGZpbGUuc2l6ZSA+IE1BWF9OT05VUktVTkRfRklMRV9TSVpFX01CICogMTAyNCAqIDEwMjQpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZpbGVuIGbDpXIgaW50ZSB2YXJhIHN0w7ZycmUgw6RuICR7TUFYX05PTlVSS1VORF9GSUxFX1NJWkVfTUJ9IE1CYCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IGxvd2VyRmlsZW5hbWUgPSBmaWxlLm5hbWUudG9Mb3dlckNhc2UoKTtcclxuICAgIGlmICghQUxMT1dFRF9FWFRFTlNJT05TLnNvbWUoZXh0ID0+IGxvd2VyRmlsZW5hbWUuZW5kc1dpdGgoZXh0KSkpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGaWxlbnMgw6RuZGVsc2UgbcOlc3RlIHZhcmEgJHtBTExPV0VEX0VYVEVOU0lPTlMuam9pbignIC8gJyl9YCk7XHJcbiAgICB9IFxyXG4gICAgY29uc3QgYm9keSA9IG5ldyBGb3JtRGF0YSgpO1xyXG4gICAgYm9keS5hcHBlbmQoJ2ZpbGVzJywgZmlsZSk7XHJcbiAgICBsZXQgcXVlcnlQYXJhbXM6YW55ID0ge1xyXG4gICAgICB1c2VyRGlzcGxheU5hbWU6IGVudi5jdXJyZW50VXNlci5kaXNwbGF5TmFtZSxcclxuICAgICAgdmVyaWZ5V2l0aFVya3VuZDogc2VuZFRvVXJrdW5kXHJcbiAgICB9O1xyXG4gICAgaWYgKGRyaXZlRmlsZSkge1xyXG4gICAgICBxdWVyeVBhcmFtcyA9IHtcclxuICAgICAgICAuLi5xdWVyeVBhcmFtcyxcclxuICAgICAgICBkcml2ZUZpbGVJZDogZHJpdmVGaWxlLmZpbGVJZCxcclxuICAgICAgICBkcml2ZUZpbGVVcmw6IGRyaXZlRmlsZS51cmwsXHJcbiAgICAgICAgZHJpdmVGaWxlSWNvblVybDogZHJpdmVGaWxlLmljb25VcmxcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgZW52LmtlZEJhY2tlbmRDbGllbnQuaHR0cC5mZXRjaChcclxuICAgICAgYGFzc2lnbm1lbnRzLyR7c2Nob29sfS8ke2NvdXJzZUlkfS8ke3Rhc2tJZH0vJHttYWlsfWAsXHJcbiAgICAgICdwdXQnLFxyXG4gICAgICB7fSxcclxuICAgICAgcXVlcnlQYXJhbXMsXHJcbiAgICAgIHtcclxuICAgICAgICBib2R5XHJcbiAgICAgIH0pO1xyXG4gICAgaWYgKHJlcy5zdGF0dXMgIT09IDIwMCkge1xyXG4gICAgICB0aHJvdyBuZXcgSHR0cEVycm9yKHJlcy5zdGF0dXMsIGF3YWl0IHJlcy50ZXh0KCkpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZG93bmxvYWQoZmlsZTogQXNzaWdubWVudCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcmVzID0gYXdhaXQgZW52LmtlZEJhY2tlbmRDbGllbnQuaHR0cC5mZXRjaChmaWxlLm1lZGlhTGluaywgJ2dldCcsIHt9KTtcclxuICAgICAgaWYgKHJlcy5zdGF0dXMgPj0gNDAwKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEh0dHBFcnJvcihyZXMuc3RhdHVzLCBhd2FpdCByZXMudGV4dCgpKTtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBibG9iID0gYXdhaXQgcmVzLmJsb2IoKTtcclxuICAgICAgZG93bmxvYWQoYmxvYiwgZmlsZS5maWxlbmFtZSwgZmlsZS5jb250ZW50VHlwZSk7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7ZXJyb3I6IFwiS3VuZGUgaW50ZSBsYWRkYSBuZWQgZmlsZW4uIFwiICsgKGVyci5tZXNzYWdlIHx8IGVycil9KTtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgfSAgICBcclxuICB9XHJcblxyXG4gIGFzeW5jIGRlbGV0ZSh1cmw6IHN0cmluZykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgdGhpcy5zZXRTdGF0ZVByb21pc2VkKCh7YXNzaWdubWVudHN9KSA9PiAoe2Fzc2lnbm1lbnRzOiBhc3NpZ25tZW50cy5tYXAoYSA9PiBhLm1lZGlhTGluayA9PT0gdXJsID9cclxuICAgICAgICB7Li4uYSwgbWV0YWRhdGE6IHsuLi5hLm1ldGFkYXRhLCAkbWV0YTogJ2RlbGV0ZSd9fSA6IHsuLi5hfSl9KSk7XHJcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGVudi5rZWRCYWNrZW5kQ2xpZW50Lmh0dHAuZmV0Y2godXJsLCAnZGVsZXRlJywge30pO1xyXG4gICAgICBpZiAocmVzLnN0YXR1cyA+PSA0MDApIHtcclxuICAgICAgICB0aHJvdyBuZXcgSHR0cEVycm9yKHJlcy5zdGF0dXMsIGF3YWl0IHJlcy50ZXh0KCkpO1xyXG4gICAgICB9XHJcbiAgICAgIGF3YWl0IHRoaXMubG9hZCgpO1xyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe2Vycm9yOiBcIkt1bmRlIGludGUgdGEgYm9ydCBmaWxlbi4gXCIgKyAoZXJyLm1lc3NhZ2UgfHwgZXJyKX0pO1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7Y291cnNlSWQsIHRhc2tJZCwgc2Nob29sLCBjb3Vyc2VTdHVkeUdyb3VwcywgdGFza0RlYWRsaW5lfSA9IHRoaXMucHJvcHM7XHJcbiAgICBjb25zdCB7bG9hZGluZywgYXNzaWdubWVudHMsIGVycm9yLCB1cGxvYWRpbmdGaWxlfSA9IHRoaXMuc3RhdGU7XHJcbiAgICB2YXIgdGVhY2hlckF0VGhpc1NjaG9vbCA9IGlzVGVhY2hlckF0U2Nob29sKGVudi5jdXJyZW50VXNlciwgc2Nob29sKTtcclxuICAgIGxldCBmaWxlcyA9IFsuLi5hc3NpZ25tZW50c107XHJcbiAgICBjb25zdCBzaG93R29vZ2xlUGlja2VyID0gZmVhdHVyZXMucGlja2VyO1xyXG4gICAgXHJcbiAgICBcclxuICAgIGlmICh1cGxvYWRpbmdGaWxlKSB7XHJcbiAgICAgIGNvbnN0IHZpcnR1YWxGaWxlOiBBc3NpZ25tZW50ID0ge1xyXG4gICAgICAgIHNjaG9vbCxcclxuICAgICAgICBjb3Vyc2VJZCxcclxuICAgICAgICB0YXNrSWQsXHJcbiAgICAgICAgZmlsZW5hbWU6IHVwbG9hZGluZ0ZpbGUubmFtZSxcclxuICAgICAgICBzaXplOiB1cGxvYWRpbmdGaWxlLnNpemUsXHJcbiAgICAgICAgdXNlcjogZW52LmN1cnJlbnRVc2VyLm1haWwsXHJcbiAgICAgICAgY29udGVudFR5cGU6IHVwbG9hZGluZ0ZpbGUudHlwZSxcclxuICAgICAgICB1cGxvYWREYXRlOiBEYXRlLm5vdygpLFxyXG4gICAgICAgIG1lZGlhTGluazogYGFzc2lnbm1lbnRzLyR7c2Nob29sfS8ke2NvdXJzZUlkfS8ke3Rhc2tJZH0vJHtlbnYuY3VycmVudFVzZXIubWFpbH0vJHt1cGxvYWRpbmdGaWxlLm5hbWV9YCxcclxuICAgICAgICBtZXRhZGF0YToge1xyXG4gICAgICAgICAgJG1ldGE6ICdhZGQnLFxyXG4gICAgICAgICAgdXNlckRpc3BsYXlOYW1lOiBlbnYuY3VycmVudFVzZXIuZGlzcGxheU5hbWVcclxuICAgICAgICB9IGFzIEFzc2lnbm1lbnRbXCJtZXRhZGF0YVwiXVxyXG4gICAgICB9O1xyXG4gICAgICBmaWxlcyA9IGZpbGVzLmZpbHRlcihmaWxlID0+IGZpbGUubWVkaWFMaW5rICE9PSB2aXJ0dWFsRmlsZS5tZWRpYUxpbmspO1xyXG4gICAgICBmaWxlcyA9IFsuLi5maWxlcywgdmlydHVhbEZpbGVdO1xyXG4gICAgfVxyXG4gICAgZmlsZXMgPSBmaWxlcy5zb3J0KGNvbXBhcmVQcm9wcyhbXHJcbiAgICAgIFwibWV0YWRhdGEudXNlckRpc3BsYXlOYW1lXCIsXHJcbiAgICAgIFwiZmlsZW5hbWVcIixcclxuICAgICAgXCJ1cGxvYWREYXRlXCJcclxuICAgICAgXSwgW1wic3ZcIiwgXCJlblwiXSwge3NlbnNpdGl2aXR5OiAnYmFzZSd9KSk7XHJcblxyXG4gICAgLy9ncm91cHBpbmcgZmlsZXMgYnkgc3R1ZHkgZ3JvdXBcclxuICAgIHZhciBmaWxlc1N0dWR5R3JvdXBzIDoge1tzdHVkeUdyb3VwOiBzdHJpbmddIDoge2Fzc2lnbm1lbnRzOiBBc3NpZ25tZW50W10sIG5vdFN1Ym1pdHRlZFVzZXJzOiB7Zmlyc3ROYW1lOnN0cmluZywgZW1haWw6IHN0cmluZ31bXX19ID0ge307XHJcbiAgICB2YXIgZ3JvdXBCeVN0dWR5R3JvdXAgPSBjb3Vyc2VTdHVkeUdyb3VwcyAmJiBjb3Vyc2VTdHVkeUdyb3Vwcy5sZW5ndGggPiAwICYmIGZlYXR1cmVzLnN0dWR5R3JvdXBzICYmIHRlYWNoZXJBdFRoaXNTY2hvb2w7XHJcblxyXG4gICAgY291cnNlU3R1ZHlHcm91cHMgJiYgT2JqZWN0LmtleXMobW9ja1R1aXRpb25TdHVkZW50cylcclxuICAgIC5maWx0ZXIoc2cgPT4gY291cnNlU3R1ZHlHcm91cHMgJiYgY291cnNlU3R1ZHlHcm91cHMuaW5jbHVkZXMoc2cpKVxyXG4gICAgLmZvckVhY2goY291cnNlU2cgPT4ge1xyXG4gICAgICAvL2NvbXB1dGUgc3R1ZHkgZ3JvdXBzIGZpbGVzXHJcbiAgICAgIHZhciBzZ0ZpbGVzPSBmaWxlcy5maWx0ZXIoZmlsZSA9PiBtb2NrVHVpdGlvblN0dWRlbnRzW2NvdXJzZVNnXS5maW5kKGMgPT4gYy5zdHVkZW50RW1haWxBZGRyZXNzID09IGZpbGUudXNlcikpO1xyXG4gICAgICAvLyBjb21wdXRlIHVzZXJzIHRoYXQgaGF2ZSBub3Qgc3VibWl0dGVkIHRoZWlyIGFzc2lnbm1lbnRzXHJcbiAgICAgIHZhciBub3RTdWJtaXR0ZWRVc2VycyA9IG1vY2tUdWl0aW9uU3R1ZGVudHNbY291cnNlU2ddLmZpbHRlcihjcyA9PiAhc2dGaWxlcy5maW5kKGYgPT4gZi51c2VyID09PSBjcy5zdHVkZW50RW1haWxBZGRyZXNzKSlcclxuICAgICAgLm1hcChucyA9PiB7cmV0dXJuIHtmaXJzdE5hbWU6IG5zLnN0dWRlbnRGaXJzdE5hbWUsIGVtYWlsOiBucy5zdHVkZW50RW1haWxBZGRyZXNzfX0pO1xyXG4gICAgICBmaWxlc1N0dWR5R3JvdXBzW2NvdXJzZVNnXSA9IHthc3NpZ25tZW50czogc2dGaWxlcywgbm90U3VibWl0dGVkVXNlcnN9XHJcbiAgICB9KVxyXG4gICAgXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IG9uRHJhZ092ZXI9e2V2ID0+IHRoaXMub25EcmFnKGV2KX0gb25Ecm9wPXtldj0+e1xyXG4gICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdGhpcy52ZXJpZnlBbmRVcGxvYWQoZXYuZGF0YVRyYW5zZmVyLmZpbGVzWzBdKTtcclxuICAgICAgfX0+XHJcbiAgICAgICAge2Vycm9yID8gPD5cclxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImVycm9yXCI+e2Vycm9yfTwvcD5cclxuICAgICAgICA8Lz46IHVuZGVmaW5lZH1cclxuICAgICAgICB7Z3JvdXBCeVN0dWR5R3JvdXAgPyBPYmplY3Qua2V5cyhmaWxlc1N0dWR5R3JvdXBzKS5tYXAoa2V5ID0+IFxyXG4gICAgICAgICAgPE9wZW5DbG9zZUJveFxyXG4gICAgICAgICAgICBoZWFkZXJPcGVuPXtmYWxzZX1cclxuICAgICAgICAgICAgdGl0bGU9e2tleX1cclxuICAgICAgICAgICAga2V5PSB7a2V5fVxyXG4gICAgICAgICAgPlxyXG4gICAgICAgICAgICA8VGFza0Fzc2lnbm1lbnRzVGFibGVcclxuICAgICAgICAgICAgICBsb2FkaW5nPXtsb2FkaW5nfVxyXG4gICAgICAgICAgICAgIGZpbGVzPXtmaWxlc1N0dWR5R3JvdXBzW2tleV0uYXNzaWdubWVudHN9XHJcbiAgICAgICAgICAgICAgdXNlcnNOb3RIYW5kZWRJbkRvY3M9IHtmaWxlc1N0dWR5R3JvdXBzW2tleV0ubm90U3VibWl0dGVkVXNlcnN9XHJcbiAgICAgICAgICAgICAgc2Nob29sPXtzY2hvb2x9XHJcbiAgICAgICAgICAgICAgZG93bmxvYWQ9e3RoaXMuZG93bmxvYWR9XHJcbiAgICAgICAgICAgICAgcmVmcmVzaEFzc2lnbm1lbnQ9e3RoaXMucmVmcmVzaEFzc2lnbm1lbnR9XHJcbiAgICAgICAgICAgICAgZGVsZXRlPXt0aGlzLmRlbGV0ZX1cclxuICAgICAgICAgICAgICB0YXNrRGVhZGxpbmUgPSB7dGFza0RlYWRsaW5lfVxyXG4gICAgICAgICAgICAgIHRlYWNoZXJBdFRoaXNTY2hvb2xcclxuICAgICAgICAgICAgLz5cclxuICAgICAgICAgIDwvT3BlbkNsb3NlQm94PlxyXG4gICAgICAgICk6IFxyXG4gICAgICAgIDxUYXNrQXNzaWdubWVudHNUYWJsZVxyXG4gICAgICAgIGxvYWRpbmc9e2xvYWRpbmd9XHJcbiAgICAgICAgZmlsZXM9e2ZpbGVzfVxyXG4gICAgICAgIHNjaG9vbD17c2Nob29sfVxyXG4gICAgICAgIGRvd25sb2FkPXt0aGlzLmRvd25sb2FkfVxyXG4gICAgICAgIHJlZnJlc2hBc3NpZ25tZW50PXt0aGlzLnJlZnJlc2hBc3NpZ25tZW50fVxyXG4gICAgICAgIGRlbGV0ZT17dGhpcy5kZWxldGV9XHJcbiAgICAgICAgdGVhY2hlckF0VGhpc1NjaG9vbFxyXG4gICAgICAvPlxyXG4gICAgICB9XHJcbiAgICAgICAge2lzRW1wbG95ZWUoKSA/IHVuZGVmaW5lZCA6IDw+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkcm9wLXpvbmUgdGFzay1hc3NpZ25tZW50LWRyb3Atem9uZVwiPlxyXG4gICAgICAgICAgICBEcm9wcGEgZGl0dCBmw6RyZGlnYSBhcmJldGUgaMOkci48YnIvPkRldCBnw6VyIG9ja3PDpSBicmEgYXR0IGFudsOkbmRhIGJsw6RkZHJhLWtuYXBwZW4gbmVkYW4uXHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwiZmlsZVwiIG9uQ2hhbmdlPXtldiA9PiB0aGlzLnZlcmlmeUFuZFVwbG9hZChldi50YXJnZXQuZmlsZXNbMF0pfSAvPlxyXG4gICAgICAgICAge3Nob3dHb29nbGVQaWNrZXIgJiYgPERyaXZlQnV0dG9uIGxhYmVsPVwiSMOkbXRhIGZyw6VuIEdvb2dsZSBEcml2ZVwiIGFjdGlvbj17KCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBwaWNrZXIgPSBuZXcgR29vZ2xlUGlja2VyKHt1cGxvYWQ6dHJ1ZX0pO1xyXG4gICAgICAgICAgICBjb25zdCBkcml2ZSA9IG5ldyBHb29nbGVEcml2ZSgpO1xyXG4gICAgICAgICAgICBwaWNrZXIuc2hvdygpLnRoZW4oZmlsZXMgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnN0IHBpY2tlZEZpbGUgPSBmaWxlc1swXTtcclxuICAgICAgICAgICAgICBpZiAoIXBpY2tlZEZpbGUpIHJldHVybjtcclxuICAgICAgICAgICAgICBkcml2ZS5kb3dubG9hZEZpbGUoe1xyXG4gICAgICAgICAgICAgICAgIGZpbGU6IHBpY2tlZEZpbGUsXHJcbiAgICAgICAgICAgICAgICBsaW1pdFNpemU6IE1BWF9OT05VUktVTkRfRklMRV9TSVpFX01CXHJcbiAgICAgICAgICAgICAgfSkudGhlbihmaWxlID0+IHRoaXMudmVyaWZ5QW5kVXBsb2FkKGZpbGUsIHBpY2tlZEZpbGUpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9fSAvPlxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIDwvPn1cclxuICAgICAgPC9kaXY+XHJcbiAgICApO1xyXG5cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHtVcmt1bmRSZXNwb25zZX0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFVya3VuZFN0YXR1c0NsYXNzIChyZXM6IFVya3VuZFJlc3BvbnNlKSB7XHJcbiAgaWYgKCFyZXMgfHwgIXJlcy5TdGF0dXMpIHtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH0gZWxzZSBzd2l0Y2ggKHJlcy5TdGF0dXMuU3RhdGUpIHtcclxuICAgIGNhc2UgJ0Vycm9yJzpcclxuICAgICAgcmV0dXJuIGB1cmt1bmQtc3RhdHVzIHVya3VuZC1zdGF0dXMtZXJyb3JgO1xyXG4gICAgY2FzZSAnU3VibWl0dGVkJzpcclxuICAgICAgcmV0dXJuIGB1cmt1bmQtc3RhdHVzIHVya3VuZC1zdGF0dXMtc3VibWl0dGVkYDtcclxuICAgIGNhc2UgJ0FjY2VwdGVkJzpcclxuICAgICAgcmV0dXJuIGB1cmt1bmQtc3RhdHVzIHVya3VuZC1zdGF0dXMtYWNjZXB0ZWRgO1xyXG4gICAgY2FzZSAnQW5hbHl6ZWQnOlxyXG4gICAgICByZXR1cm4gYHVya3VuZC1zdGF0dXMgdXJrdW5kLXN0YXR1cy1hbmFseXplZGA7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VXJrdW5kSG92ZXJUZXh0IChyZXM6IFVya3VuZFJlc3BvbnNlKSB7XHJcbiAgaWYgKCFyZXMgfHwgIXJlcy5TdGF0dXMpIHJldHVybiBudWxsO1xyXG4gIHN3aXRjaCAocmVzLlN0YXR1cy5TdGF0ZSkge1xyXG4gICAgY2FzZSAnRXJyb3InOlxyXG4gICAgICByZXR1cm4gcmVzLkV4dGVybmFsSWQgP1xyXG4gICAgICAgIGBLdW5kZSBpbnRlIHRhcyBlbW90IGF2IHVya3VuZC4gRmVsa29kOiAke3Jlcy5TdGF0dXMuRXJyb3JDb2RlfVxcbmArXHJcbiAgICAgICAgYEV4dGVybmFsIElEOiAke3Jlcy5FeHRlcm5hbElkfVxcbkZlbG1lZGRlbGFuZGU6ICR7cmVzLlN0YXR1cy5NZXNzYWdlfWBcclxuICAgICAgICA6XHJcbiAgICAgICAgcmVzLlN0YXR1cy5NZXNzYWdlO1xyXG4gICAgY2FzZSAnU3VibWl0dGVkJzpcclxuICAgICAgcmV0dXJuIGBGaWxlbiDDpHIgdXBwbGFkZGFkIHRpbGwgVXJrdW5kLiBLbGlja2EgZsO2ciBhdHQgdXBwZGF0ZXJhIHN0YXR1cy5gO1xyXG4gICAgY2FzZSAnQWNjZXB0ZWQnOlxyXG4gICAgICByZXR1cm4gYEZpbGVuIGFuYWx5c2VyYXMgZm9ydGZhcmFuZGUgYXYgVXJrdW5kLiBLbGlja2EgZsO2ciBhdHQgdXBwZGF0ZXJhIHN0YXR1cy5gO1xyXG4gICAgY2FzZSAnQW5hbHl6ZWQnOlxyXG4gICAgICByZXR1cm4gYFJhcHBvcnQgc2thcGFkLiBLbGlja2EgZsO2ciBhdHQgw7ZwcG5hIHJhcHBvcnRlbiBpIG55dHQgZsO2bnN0ZXJgO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFVya3VuZFNpZ25pZmljYW5jZUNsYXNzIChyZXM6IFVya3VuZFJlc3BvbnNlKSB7XHJcbiAgaWYgKCFyZXMgfHwgIXJlcy5TdGF0dXMpIHJldHVybiAnJztcclxuXHJcbiAgc3dpdGNoIChyZXMuU3RhdHVzLlN0YXRlKSB7XHJcbiAgICBjYXNlICdFcnJvcic6IHJldHVybiAndXJrdW5kLXNpZ25pZmljYW5jZS1lcnJvcic7XHJcbiAgICBjYXNlICdTdWJtaXR0ZWQnOiByZXR1cm4gJ3Vya3VuZC1zaWduaWZpY2FuY2Utc3VibWl0dGVkJztcclxuICAgIGNhc2UgJ0FjY2VwdGVkJzogcmV0dXJuICd1cmt1bmQtc2lnbmlmaWNhbmNlLWFjY2VwdGVkJztcclxuICB9XHJcbiAgY29uc3QgcmVwb3J0ID0gcmVzLlJlcG9ydDtcclxuICBpZiAoIXJlcG9ydCkge1xyXG4gICAgcmV0dXJuIFwiXCI7XHJcbiAgfVxyXG4gIGlmIChyZXBvcnQuU2lnbmlmaWNhbmNlIDwgMSlcclxuICAgIC8vcmV0dXJuIGAke2Nkbn0vaW1hZ2VzL3Vya3VuZC8wLmdpZmA7XHJcbiAgICByZXR1cm4gXCJ1cmt1bmQtc2lnbmlmaWNhbmNlIHVya3VuZC1zaWduaWZpY2FuY2UtMFwiO1xyXG4gIGlmIChyZXBvcnQuU2lnbmlmaWNhbmNlIDwgMTApXHJcbiAgICAvL3JldHVybiBgJHtjZG59L2ltYWdlcy91cmt1bmQvMS5naWZgO1xyXG4gICAgcmV0dXJuIFwidXJrdW5kLXNpZ25pZmljYW5jZSB1cmt1bmQtc2lnbmlmaWNhbmNlLTFcIjtcclxuICBpZiAocmVwb3J0LlNpZ25pZmljYW5jZSA8IDI1KVxyXG4gICAgcmV0dXJuIFwidXJrdW5kLXNpZ25pZmljYW5jZSB1cmt1bmQtc2lnbmlmaWNhbmNlLTJcIjtcclxuICAgIC8vcmV0dXJuIGAke2Nkbn0vaW1hZ2VzL3Vya3VuZC8yLmdpZmA7XHJcbiAgaWYgKHJlcG9ydC5TaWduaWZpY2FuY2UgPCA0MClcclxuICAgIHJldHVybiBcInVya3VuZC1zaWduaWZpY2FuY2UgdXJrdW5kLXNpZ25pZmljYW5jZS0zXCI7XHJcbiAgICAvL3JldHVybiBgJHtjZG59L2ltYWdlcy91cmt1bmQvMy5naWZgO1xyXG4gIGlmIChyZXBvcnQuU2lnbmlmaWNhbmNlIDwgNTUpXHJcbiAgICByZXR1cm4gXCJ1cmt1bmQtc2lnbmlmaWNhbmNlIHVya3VuZC1zaWduaWZpY2FuY2UtNFwiO1xyXG4gICAgLy9yZXR1cm4gYCR7Y2RufS9pbWFnZXMvdXJrdW5kLzQuZ2lmYDtcclxuICBpZiAocmVwb3J0LlNpZ25pZmljYW5jZSA8IDcwKVxyXG4gICAgcmV0dXJuIFwidXJrdW5kLXNpZ25pZmljYW5jZSB1cmt1bmQtc2lnbmlmaWNhbmNlLTVcIjtcclxuICAgIC8vcmV0dXJuIGAke2Nkbn0vaW1hZ2VzL3Vya3VuZC81LmdpZmA7XHJcbiAgaWYgKHJlcG9ydC5TaWduaWZpY2FuY2UgPCA4NSlcclxuICAgIHJldHVybiBcInVya3VuZC1zaWduaWZpY2FuY2UgdXJrdW5kLXNpZ25pZmljYW5jZS02XCI7XHJcbiAgICAvL3JldHVybiBgJHtjZG59L2ltYWdlcy91cmt1bmQvNi5naWZgO1xyXG4gIGlmIChyZXBvcnQuU2lnbmlmaWNhbmNlIDwgOTkuOSlcclxuICAgIHJldHVybiBcInVya3VuZC1zaWduaWZpY2FuY2UgdXJrdW5kLXNpZ25pZmljYW5jZS03XCI7XHJcbiAgICAvL3JldHVybiBgJHtjZG59L2ltYWdlcy91cmt1bmQvNy5naWZgO1xyXG4gIGlmIChyZXBvcnQuU2lnbmlmaWNhbmNlID49IDk5LjkpXHJcbiAgICByZXR1cm4gXCJ1cmt1bmQtc2lnbmlmaWNhbmNlIHVya3VuZC1zaWduaWZpY2FuY2UtOFwiO1xyXG4gICAgLy9yZXR1cm4gYCR7Y2RufS9pbWFnZXMvdXJrdW5kLzguZ2lmYDtcclxuICByZXR1cm4gXCJcIjtcclxufVxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEFiaWxpdHkgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHRpdGxlOiBzdHJpbmc7XHJcbiAgc3ViVGl0bGU/OiBzdHJpbmc7XHJcbiAgYWJpbGl0aWVzOiBBYmlsaXR5W107XHJcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xyXG4gIGhlYWRlck9wZW4/OiBib29sZWFuO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgU3RhdGUge1xyXG4gIGhlYWRlck9wZW46IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBBYmlsaXRpZXNCb3ggZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsU3RhdGU+IHtcclxuICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIGhlYWRlck9wZW46IHByb3BzLmhlYWRlck9wZW4gfHwgZmFsc2VcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7IHRpdGxlLCBzdWJUaXRsZSwgYWJpbGl0aWVzLCBjbGFzc05hbWUgfSA9IHRoaXMucHJvcHM7XHJcbiAgICBjb25zdCB7IGhlYWRlck9wZW4gfSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPXsoY2xhc3NOYW1lfHwnJykgKyBcIiBvcGVuQ2xvc2VcIiArIChoZWFkZXJPcGVuID8gXCIgb3BlblwiIDogXCJcIil9PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIm9wZW5IZWFkZXJcIiBvbkNsaWNrPXsoKSA9PiB0aGlzLnNldFN0YXRlKHsgaGVhZGVyT3BlbjogIXRoaXMuc3RhdGUuaGVhZGVyT3BlbiB9KX0+XHJcbiAgICAgICAgPHA+e3RpdGxlfTwvcD5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwib3BlbkNvbnRlbnRcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFiaWxpdHlMaXN0XCI+XHJcbiAgICAgICAgICB7c3ViVGl0bGUgJiYgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50SGVhZGVyXCI+XHJcbiAgICAgICAgICAgIDxoNT57c3ViVGl0bGV9PC9oNT5cclxuICAgICAgICAgIDwvZGl2Pn1cclxuICAgICAgICAgIHthYmlsaXRpZXMubWFwKGEgPT5cclxuICAgICAgICAgICAgPGRpdiBrZXk9e2EuaWR9IGNsYXNzTmFtZT1cImNvbnRlbnRQYXJ0XCI+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50VGV4dFwiPlxyXG4gICAgICAgICAgICAgICAgPHAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3tfX2h0bWw6IGEubmFtZX19IC8+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgKX1cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj47XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgQ2VudHJhbENvbnRlbnQgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHRpdGxlOiBzdHJpbmc7XHJcbiAgc3ViVGl0bGU/OiBzdHJpbmc7XHJcbiAgY2VudHJhbENvbnRlbnQ6IENlbnRyYWxDb250ZW50W107XHJcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xyXG4gIGhlYWRlck9wZW4/OiBib29sZWFuO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgU3RhdGUge1xyXG4gIGhlYWRlck9wZW46IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDZW50cmFsQ29udGVudEJveCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcyxTdGF0ZT4ge1xyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgaGVhZGVyT3BlbjogcHJvcHMuaGVhZGVyT3BlbiB8fCBmYWxzZVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHsgdGl0bGUsIHN1YlRpdGxlLCBjZW50cmFsQ29udGVudCwgY2xhc3NOYW1lIH0gPSB0aGlzLnByb3BzO1xyXG4gICAgY29uc3QgeyBoZWFkZXJPcGVuIH0gPSB0aGlzLnN0YXRlO1xyXG5cclxuICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT17KGNsYXNzTmFtZSB8fCAnJykgKyBcIiBvcGVuQ2xvc2VcIiArIChoZWFkZXJPcGVuID8gXCIgb3BlblwiIDogXCJcIil9PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIm9wZW5IZWFkZXJcIiBvbkNsaWNrPXsoKSA9PiB0aGlzLnNldFN0YXRlKHsgaGVhZGVyT3BlbjogIXRoaXMuc3RhdGUuaGVhZGVyT3BlbiB9KX0+XHJcbiAgICAgICAgPHA+e3RpdGxlfTwvcD5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwib3BlbkNvbnRlbnRcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFiaWxpdHlMaXN0XCI+XHJcbiAgICAgICAgICB7c3ViVGl0bGUgJiYgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50SGVhZGVyXCI+XHJcbiAgICAgICAgICAgIDxoNT57c3ViVGl0bGV9PC9oNT5cclxuICAgICAgICAgIDwvZGl2Pn1cclxuICAgICAgICAgIHtjZW50cmFsQ29udGVudC5tYXAoY2MgPT5cclxuICAgICAgICAgICAgPGRpdiBrZXk9e2NjLmlkfSBjbGFzc05hbWU9XCJjb250ZW50UGFydFwiPlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudFRleHRcIj5cclxuICAgICAgICAgICAgICAgIDxwIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXt7X19odG1sOiBjYy5uYW1lfX0gLz5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICApfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PjtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICB2aXNpYmxlOiBib29sZWFuO1xyXG4gIHRleHQ6IHN0cmluZztcclxuICBjbGFzc05hbWU/OiBzdHJpbmc7XHJcbiAgb25Db25maXJtOiAoKT0+dm9pZDtcclxuICBvbkNhbmNlbDogKCk9PnZvaWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBDb25maXJtYXRpb24gKHByb3BzOiBQcm9wcykge1xyXG4gIHJldHVybiA8ZGl2XHJcbiAgICBjbGFzc05hbWU9e2Bjb25maXJtYXRpb24tYm94ICR7cHJvcHMuY2xhc3NOYW1lfSR7cHJvcHMudmlzaWJsZSA/IFwiIHZpc2libGVcIiA6IFwiXCJ9YH0+XHJcbiAgICA8cD57cHJvcHMudGV4dH08L3A+XHJcbiAgICA8YnV0dG9uIG9uQ2xpY2s9eygpPT5wcm9wcy5vbkNvbmZpcm0oKX0+T0s8L2J1dHRvbj5cclxuICAgIDxidXR0b24gb25DbGljaz17KCk9PnByb3BzLm9uQ2FuY2VsKCl9PkF2YnJ5dDwvYnV0dG9uPlxyXG4gIDwvZGl2PjtcclxufVxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEtub3dsZWRnZVJlcXVpcmVtZW50IH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBPcGVuQ2xvc2VCb3ggfSBmcm9tIFwiLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL29wZW4tY2xvc2UtYm94XCI7XHJcbmltcG9ydCB7IGFycmF5VG9Mb29rdXAgfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHRpdGxlOiBzdHJpbmc7XHJcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xyXG4gIHJlcXVpcmVtZW50czogS25vd2xlZGdlUmVxdWlyZW1lbnRbXTtcclxuICBleHBsYWluZWRSZXF1aXJlbWVudHM/OiB7W3JlcXVpcmVtZW50SWQ6IHN0cmluZ106IHN0cmluZ307XHJcbiAgaWRzVG9TdWJqZWN0TWFwPzoge1tyZXF1aXJlbWVuZElkOiBzdHJpbmddOiBzdHJpbmd9O1xyXG4gIGluY2x1ZGVkSWRzPzoge1tpZDogc3RyaW5nXSA6IHRydWV9O1xyXG4gIGhlYWRlck9wZW4/OiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgS25vd2xlZGdlUmVxdWlyZW1lbnRzQm94ID0gKHByb3BzOiBQcm9wcykgPT4ge1xyXG4gIGNvbnN0IHt0aXRsZSwgY2xhc3NOYW1lLCBoZWFkZXJPcGVuLCBpZHNUb1N1YmplY3RNYXAsIHJlcXVpcmVtZW50c30gPSBwcm9wcztcclxuICBpZiAoIWlkc1RvU3ViamVjdE1hcCkge1xyXG4gICAgLy8gTm9ybWFsIGNhc2VcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxPcGVuQ2xvc2VCb3ggdGl0bGU9ezxwPnt0aXRsZX08L3A+fSBjbGFzc05hbWU9e2NsYXNzTmFtZX0gaGVhZGVyT3Blbj17aGVhZGVyT3Blbn0+XHJcbiAgICAgICAgPEtub3dsZWRnZVJlcXVpcmVtZW50c1RhYmxlIHsuLi57Li4ucHJvcHN9fSAvPlxyXG4gICAgICA8L09wZW5DbG9zZUJveD5cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvLyBTcGVjaWFsIGNhc2U6IFJlcXVpcmVtZW50cyB0aGF0IHNwYW5zIG11bHRpcGxlIHN1YmplY3RzOlxyXG4gIGNvbnN0IHJlcXVpcmVtZW50c1BlclN1YmplY3RMb29rdXAgPSBpZHNUb1N1YmplY3RNYXAgP1xyXG4gICAgYXJyYXlUb0xvb2t1cChyZXF1aXJlbWVudHMsIHIgPT4gaWRzVG9TdWJqZWN0TWFwW3IuaWRdIHx8IFwiXCIpIDoge1wiXCI6IHJlcXVpcmVtZW50c307XHJcbiAgY29uc3QgcmVxc1BlclN1YmplY3QgPSBPYmplY3Qua2V5cyhyZXF1aXJlbWVudHNQZXJTdWJqZWN0TG9va3VwKVxyXG4gICAgLm1hcChzdWJqZWN0ID0+ICh7c3ViamVjdCwgcmVxdWlyZW1lbnRzOiByZXF1aXJlbWVudHNQZXJTdWJqZWN0TG9va3VwW3N1YmplY3RdfSkpO1xyXG5cclxuICByZXR1cm4gPE9wZW5DbG9zZUJveCB0aXRsZT17PHA+e3RpdGxlfTwvcD59IGNsYXNzTmFtZT17Y2xhc3NOYW1lfSBoZWFkZXJPcGVuPXtoZWFkZXJPcGVufT5cclxuICAgIHtyZXFzUGVyU3ViamVjdC5tYXAoKHtzdWJqZWN0LCByZXF1aXJlbWVudHN9KSA9PiA8S25vd2xlZGdlUmVxdWlyZW1lbnRzVGFibGUgey4uLntcclxuICAgICAgLi4ucHJvcHMsXHJcbiAgICAgIGtleTogc3ViamVjdCxcclxuICAgICAgaGVhZGluZzogc3ViamVjdCxcclxuICAgICAgcmVxdWlyZW1lbnRzXHJcbiAgICB9fSAvPil9XHJcbiAgPC9PcGVuQ2xvc2VCb3g+O1xyXG59XHJcblxyXG5jb25zdCBLbm93bGVkZ2VSZXF1aXJlbWVudHNUYWJsZSA9ICh7XHJcbiAgcmVxdWlyZW1lbnRzLFxyXG4gIGluY2x1ZGVkSWRzLFxyXG4gIGV4cGxhaW5lZFJlcXVpcmVtZW50cyxcclxuICBoZWFkaW5nIH06IFByb3BzICYge2hlYWRpbmc/OiBzdHJpbmd9KSA9PlxyXG57XHJcbiAgY29uc3QgY29sdW1ucyA9IFtcIkVcIiwgXCJDXCIsIFwiQVwiXTtcclxuICBjb25zdCByb3dzOiBLbm93bGVkZ2VSZXF1aXJlbWVudFtdW10gPSBbXTtcclxuICBjb25zdCByZXFzID0gcmVxdWlyZW1lbnRzLnNsaWNlKCk7XHJcbiAgbGV0IHJvdzogS25vd2xlZGdlUmVxdWlyZW1lbnRbXSB8IG51bGwgPSBudWxsO1xyXG4gIHdoaWxlICh0cnVlKSB7XHJcbiAgICByb3cgPSBjb2x1bW5zLm1hcChncmFkZSA9PiB7XHJcbiAgICAgIGNvbnN0IHBOZXh0ID0gcmVxcy5maW5kSW5kZXgociA9PiByLmdyYWRlU3RlcC50b1VwcGVyQ2FzZSgpID09PSBncmFkZSk7XHJcbiAgICAgIGlmIChwTmV4dCA8IDApIHJldHVybiBudWxsO1xyXG4gICAgICBjb25zdCBydiA9IHJlcXNbcE5leHRdO1xyXG4gICAgICByZXFzLnNwbGljZShwTmV4dCwgMSk7XHJcbiAgICAgIHJldHVybiBpbmNsdWRlZElkcyA/XHJcbiAgICAgICAgKGluY2x1ZGVkSWRzW3J2LmlkXSA/IHJ2IDogdW5kZWZpbmVkKSA6XHJcbiAgICAgICAgcnY7XHJcbiAgICB9KTtcclxuICAgIGlmIChyb3cuZXZlcnkociA9PiByID09PSBudWxsKSlcclxuICAgICAgYnJlYWs7XHJcbiAgICBpZiAoIXJvdy5ldmVyeShyID0+ICFyKSkge1xyXG4gICAgICByb3dzLnB1c2gocm93KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiA8PlxyXG4gICAge2hlYWRpbmcgJiYgPGg0PntoZWFkaW5nfTwvaDQ+fVxyXG4gICAgPHRhYmxlPlxyXG4gICAgICA8dGhlYWQ+XHJcbiAgICAgICAgPHRyPlxyXG4gICAgICAgICAge2NvbHVtbnMubWFwKGMgPT4gPHRoIGtleT17Y30+e2N9PC90aD4pfVxyXG4gICAgICAgIDwvdHI+XHJcbiAgICAgIDwvdGhlYWQ+XHJcbiAgICAgIDx0Ym9keT5cclxuICAgICAgICB7cm93cy5tYXAoKHJvdyxpKSA9PiA8UmVhY3QuRnJhZ21lbnQga2V5PXtpfT5cclxuICAgICAgICAgICAgPHRyIGtleT17aX0+XHJcbiAgICAgICAgICAgICAge3Jvdy5tYXAoKGNvbHVtbixqKSA9PlxyXG4gICAgICAgICAgICAgICAgPHRkIGtleT17an0gZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3tfX2h0bWw6IGNvbHVtbiA/IGNvbHVtbi5uYW1lIDogXCJcIn19IC8+XHJcbiAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAge2V4cGxhaW5lZFJlcXVpcmVtZW50cyAmJiA8dHI+XHJcbiAgICAgICAgICAgICAge3Jvdy5tYXAoKGNvbHVtbixqKSA9PlxyXG4gICAgICAgICAgICAgICAgPHRkIGtleT17an0gY2xhc3NOYW1lPVwiZXhwbGFpbmVkLXJlcXVpcmVtZW50XCI+XHJcbiAgICAgICAgICAgICAgICAgIDxkaXY+eyhjb2x1bW4gJiYgZXhwbGFpbmVkUmVxdWlyZW1lbnRzW2NvbHVtbi5pZF0pIHx8IFwiXCJ9PC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L3RkPil9XHJcbiAgICAgICAgICAgIDwvdHI+fVxyXG4gICAgICAgICAgPC9SZWFjdC5GcmFnbWVudD5cclxuICAgICAgICApfVxyXG4gICAgICA8L3Rib2R5PlxyXG4gICAgPC90YWJsZT5cclxuICA8Lz47XHJcbn1cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBDb3Vyc2UsIENvdXJzZU1vZHVsZSwgVGFzaywgVXNlclRhc2sgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCBlbnYgZnJvbSAnLi4vLi4vLi4vZ2xvYmFscy9LRUQuZW52JztcclxuaW1wb3J0IHsgV2Vla1BsYW5uZXJQZXJzaXN0ZWRTdGF0ZSB9IGZyb20gXCIuLi8uLi93ZWVrcGxhbm5lci93ZWVrcGxhbm5lci1wZXJzaXN0ZWQtc3RhdGVcIjtcclxuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xyXG5pbXBvcnQgeyBjcmVhdGVVVUlELCBCYXRjaFJ1bm5lciwgRG9jdW1lbnRBY2Nlc3MgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XHJcbmltcG9ydCB7IHVzZXJUYXNrc1JlcG8gfSBmcm9tICcuLi8uLi8uLi9yZXBvcy91c2VyLXRhc2tzLXJlcG8nO1xyXG5pbXBvcnQgeyBhcnJheVRvTWFwLCBMIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBTcGlubmVyIH0gZnJvbSAnLi4vLi4vY291cnNlLWJ1aWxkZXIvc3ViLWNvbXBvbmVudHMvc3Bpbm5lcic7XHJcbmltcG9ydCB7IENvbmZpcm1hdGlvbiB9IGZyb20gJy4vY29uZmlybWF0aW9uJztcclxuaW1wb3J0IHsgTGFuZ3VhZ2VDb250ZXh0IH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL0xhbmd1YWdlQ29udGV4dCc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIGxlYXJuaW5nVGFza3M6IExlYXJuaW5nTW9kdWxlVGFza1tdXHJcbn1cclxuXHJcbmludGVyZmFjZSBTdGF0ZSB7XHJcbiAgd2Vla0RhdGU6IG51bWJlcjtcclxuICB1c2VyVGFza3M6IFVzZXJUYXNrW107XHJcbiAgY29uZmlybWF0aW9uczogc3RyaW5nW107XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgTGVhcm5pbmdNb2R1bGVUYXNrIHtcclxuICBpZDogc3RyaW5nO1xyXG4gIG5hbWU6IHN0cmluZztcclxuICB1cmw6IHN0cmluZztcclxuICAvKiogY291cnNlTmFtZVxyXG4gICAqIEZvciBLRzogY291cnNlTmFtZVxyXG4gICAqIEZvciBLUzogU3ViamVjdCBuYW1lXHJcbiAgICovXHJcbiAgY291cnNlTmFtZTogc3RyaW5nO1xyXG4gIC8qKiBsZWFybmluZ0dvYWxcclxuICAgKiBGb3IgS0c6IG1vZHVsZSBuYW1lIG9yIGxlYXJuaW5nIGdvYWwgb2YgdGhlIHRhc2tcclxuICAgKiBGb3IgS1Mvc3RlcC1jb3Vyc2U6IGNvdXJzZSBuYW1lXHJcbiAgICogRm9yIEtTL3RoZW1lLWNvdXJzZTogbGVhcm5pbmcgZ29hbFxyXG4gICAqL1xyXG4gIGxlYXJuaW5nR29hbDogc3RyaW5nO1xyXG4gIC8qKiBTdGVwXHJcbiAgICogT25seSBwcmVzZW50IGluIEtTL3N0ZXAtY291cnNlXHJcbiAgICovXHJcbiAgc3RlcD86IG51bWJlcjtcclxuICAvKiogdGFza1xyXG4gICAqIE9ubHkgZm9yIGNvdXJzZXMgYnVpbHQgYnkgY291cnNlYnVpbGRlclxyXG4gICAqL1xyXG4gIHRhc2s/OiBUYXNrO1xyXG4gIC8qKiBjb3Vyc2VcclxuICAgKiBPbmx5IGZvciBjb3Vyc2VzIGJ1aWx0IGJ5IGNvdXJzZWJ1aWxkZXJcclxuICAgKi9cclxuICBjb3Vyc2U/OiBDb3Vyc2U7XHJcbiAgLyoqIGNvdXJzZUluZm9cclxuICAgKiBPbmx5IGZvciBjb3Vyc2VzIGJ1aWxkIGJ5IHN1YmplY3RwbGFubmVyXHJcbiAgICovXHJcbiAgY291cnNlSW5mbz86IHtcclxuICAgIHNjaG9vbDogc3RyaW5nIC8vIFNjaG9vbCBuYW1lXHJcbiAgICBjb3Vyc2U6IHN0cmluZyAvLyBDb3Vyc2UgSW5zdGFuY2UgSURcclxuICAgIHRhYjogc3RyaW5nICAgIC8vIENvdXJzZVRhYiBJRFxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFRhc2tMaXN0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLFN0YXRlPiB7XHJcbiAgc3RhdGljIGNvbnRleHRUeXBlID0gTGFuZ3VhZ2VDb250ZXh0O1xyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgdXNlclRhc2tzOiBbXSxcclxuICAgICAgd2Vla0RhdGU6IERhdGUubm93KCksXHJcbiAgICAgIGNvbmZpcm1hdGlvbnM6IFtdXHJcbiAgICB9XHJcbiAgICB0aGlzLm9uQ2hhbmdlID0gdGhpcy5vbkNoYW5nZS5iaW5kKHRoaXMpOyAgICBcclxuICB9XHJcblxyXG4gIG9uQ2hhbmdlICh1c2VyVGFza3M6IFVzZXJUYXNrW10sIHBlcnNpc3RlZDogV2Vla1BsYW5uZXJQZXJzaXN0ZWRTdGF0ZSkge1xyXG4gICAgaWYgKHBlcnNpc3RlZC53ZWVrRGF0ZSAhPT0gdGhpcy5zdGF0ZS53ZWVrRGF0ZSkge1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICBjb25maXJtYXRpb25zOiBbXVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIHVzZXJUYXNrcyxcclxuICAgICAgd2Vla0RhdGU6IHBlcnNpc3RlZC53ZWVrRGF0ZVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgIHVzZXJUYXNrc1JlcG8uc3Vic2NyaWJlKHRoaXMub25DaGFuZ2UpO1xyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XHJcbiAgICB1c2VyVGFza3NSZXBvLnVuc3Vic2NyaWJlKHRoaXMub25DaGFuZ2UpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgdG9nZ2xlVGFzayAobGVhcm5pbmdUYXNrOiBMZWFybmluZ01vZHVsZVRhc2spIHtcclxuICAgIGNvbnN0IHVzZXJUYXNrcyA9IHRoaXMuc3RhdGUudXNlclRhc2tzLmZpbHRlcih1dCA9PiB7XHJcbiAgICAgIHJldHVybiBsZWFybmluZ1Rhc2sudGFzayA/XHJcbiAgICAgICAgdXQudGFzayAmJiB1dC50YXNrLnNvbWUodCA9PiB0LmlkID09PSBsZWFybmluZ1Rhc2suaWQpIDpcclxuICAgICAgICB1dC5zaXRlVmlzaW9uUGFnZUlkID09PSBsZWFybmluZ1Rhc2suaWQ7XHJcbiAgICB9KTtcclxuICAgIGNvbnN0IHt3ZWVrRGF0ZX0gPSB0aGlzLnN0YXRlO1xyXG4gICAgXHJcbiAgICBpZiAodXNlclRhc2tzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAvLyBObyB0YXNrIG1hdGNoZXMgdGhpcyBsZWFybmluZ01vZHVsZVRhc2sgLSBub3QgcHJlc2VudCBpbiB3ZWVrcGxhbm5lci5cclxuICAgICAgbGV0IGxhdGVzdFRpbWVTdGFtcCA9IE1hdGgubWF4LmFwcGx5KFxyXG4gICAgICAgIE1hdGgubWF4LFxyXG4gICAgICAgIFt3ZWVrRGF0ZV0uY29uY2F0KHRoaXMuc3RhdGUudXNlclRhc2tzLm1hcCh0ID0+IHQuZGF0ZVRpbWUpKSk7XHJcblxyXG4gICAgICBjb25zdCB1c2VyVGFzazogVXNlclRhc2sgPSB7XHJcbiAgICAgICAgaWQ6IGNyZWF0ZVVVSUQoKSxcclxuICAgICAgICBjb3Vyc2VOYW1lOiBsZWFybmluZ1Rhc2suY291cnNlTmFtZSxcclxuICAgICAgICBkYXRlVGltZTogbGF0ZXN0VGltZVN0YW1wICsgMjAwMCxcclxuICAgICAgICBsZWFybmluZ0dvYWw6IGxlYXJuaW5nVGFzay5sZWFybmluZ0dvYWwsXHJcbiAgICAgICAgbmFtZTogbGVhcm5pbmdUYXNrLm5hbWUsXHJcbiAgICAgICAgdXJsOiBsZWFybmluZ1Rhc2sudXJsLFxyXG4gICAgICAgIGFjbDogW1xyXG4gICAgICAgICAgLy8gRGVmYXVsdCBBQ0w6IExldCB1c2VyIHNlbGYgaGF2ZSBmdWxsIGNvbnRyb2wgb3ZlciB0aGlzIGl0ZW06XHJcbiAgICAgICAgICBuZXcgRG9jdW1lbnRBY2Nlc3MoXCJlbWFpbFwiLCBlbnYuY3VycmVudFVzZXIubWFpbCwgXCJTXCIpLFxyXG4gICAgICAgICAgLy8gQWRkaXRpb25hbCBBQ0w6IExldCBlbXBsb3llZXMgb24gc2FtZSBzY2hvb2wgaGF2ZSByZWFkIGFjY2VzcyB0byBpdC5cclxuICAgICAgICAgIC8vIFRoaXMgY3VycmVudGx5IG9ubHkgYXBwbGllcyB0byB0YXNrcyB0aGF0IHJlZmVyIHRvIGNvdXJzZSB0YXNrcyAobm90IGN1c3RvbSB0YXNrcyEpXHJcbiAgICAgICAgICBuZXcgRG9jdW1lbnRBY2Nlc3MoXCJzY2hvb2xSb2xlXCIsIGAke2Vudi5jdXJyZW50VXNlci5zY2hvb2x9L0VNUExPWUVFYCwgXCJSXCIpXHJcbiAgICAgICAgXS5tYXAoYWMgPT4gYWMudG9TdHJpbmcoKSlcclxuICAgICAgfTtcclxuICAgICAgaWYgKGxlYXJuaW5nVGFzay50YXNrICYmIGxlYXJuaW5nVGFzay50YXNrLmRlYWRsaW5lKSB7XHJcbiAgICAgICAgdXNlclRhc2suZGVhZGxpbmUgPSBsZWFybmluZ1Rhc2sudGFzay5kZWFkbGluZTtcclxuICAgICAgfVxyXG4gICAgICBpZiAobGVhcm5pbmdUYXNrLnRhc2spIHtcclxuICAgICAgICB1c2VyVGFzay50YXNrID0gW2xlYXJuaW5nVGFzay50YXNrXTtcclxuICAgICAgICBpZiAobGVhcm5pbmdUYXNrLmNvdXJzZSkge1xyXG4gICAgICAgICAgdXNlclRhc2suY291cnNlID0gW2xlYXJuaW5nVGFzay5jb3Vyc2VdO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobGVhcm5pbmdUYXNrLmNvdXJzZUluZm8pIHtcclxuICAgICAgICAgIHVzZXJUYXNrLmNvdXJzZUluZm8gPSBsZWFybmluZ1Rhc2suY291cnNlSW5mbztcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdXNlclRhc2suc2l0ZVZpc2lvblBhZ2VJZCA9IGxlYXJuaW5nVGFzay5pZDtcclxuICAgICAgfVxyXG4gICAgICBpZiAobGVhcm5pbmdUYXNrLnN0ZXApIHtcclxuICAgICAgICB1c2VyVGFzay5zdGVwID0gbGVhcm5pbmdUYXNrLnN0ZXA7XHJcbiAgICAgIH1cclxuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoW1xyXG4gICAgICAgIHVzZXJUYXNrc1JlcG8uc2V0V2Vla1BsYW5uZXJCb3hPcGVuKGxlYXJuaW5nVGFzay5jb3Vyc2VOYW1lLCB0cnVlKSxcclxuICAgICAgICB1c2VyVGFza3NSZXBvLmluc2VydChbdXNlclRhc2tdKV0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gQWxyZWFkeSBwcmVzZW50IGluIHdlZWtwbGFubmVyLiBJdCdzIHRpbWUgdG8gZGVsZXRlIHRob3NlIHRoYXQgbWF0Y2hlZCB1cy5cclxuICAgICAgYXdhaXQgdXNlclRhc2tzUmVwby5kZWxldGUodXNlclRhc2tzLm1hcCh0ID0+IHQuaWQpKTtcclxuICAgIH1cclxuICAgIFxyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3Qge2ludGx9ID0gdGhpcy5jb250ZXh0O1xyXG4gICAgY29uc3Qge2xlYXJuaW5nVGFza3N9ID0gdGhpcy5wcm9wcztcclxuICAgIGNvbnN0IHVzZXJUYXNrcyA9IGFycmF5VG9NYXAodGhpcy5zdGF0ZS51c2VyVGFza3MsIHV0ID0+IHV0LnRhc2sgJiYgdXQudGFzay5sZW5ndGggPiAwID9cclxuICAgICAgdXQudGFzay5tYXAodCA9PiB0LmlkKVswXSA6IC8vIGNvdXJzZS1idWlsZGVyIHRhc2tzIGxvb2tlZCB1cCBieSBpZFxyXG4gICAgICB1dC5zaXRlVmlzaW9uUGFnZUlkID8gdXQuc2l0ZVZpc2lvblBhZ2VJZCA6IC8vIG5vbi1jb3Vyc2UtYnVpbGRlciB0YXNrc1xyXG4gICAgICB1dC51cmwpO1xyXG4gICAgY29uc3Qge2NvbmZpcm1hdGlvbnN9ID0gdGhpcy5zdGF0ZTtcclxuICAgIGNvbnN0IHdlZWtQbGFubmVyV2VlayA9IG1vbWVudCh0aGlzLnN0YXRlLndlZWtEYXRlKS53ZWVrKCk7XHJcbiAgICBjb25zdCBjdXJyZW50V2VlayA9IG1vbWVudCgpLndlZWsoKTtcclxuICAgIGNvbnN0IGZvcldlZWtTdHJpbmcgPSB3ZWVrUGxhbm5lcldlZWsgPT09IGN1cnJlbnRXZWVrID8gXCJcIiA6XHJcbiAgICB3ZWVrUGxhbm5lcldlZWsgPT09IGN1cnJlbnRXZWVrICsgMSA/IGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6XCJ0YXNrTGlzdC5uZXh0V2Vla1Rhc2tcIiwgZGVmYXVsdE1lc3NhZ2U6XCJmw7ZyIG7DpHN0YSB2ZWNrYSAodnt3ZWVrfSlcIn0sIHt3ZWVrOiB3ZWVrUGxhbm5lcldlZWt9KSA6XHJcbiAgICB3ZWVrUGxhbm5lcldlZWsgPT09IGN1cnJlbnRXZWVrIC0gMSA/IGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6XCJ0YXNrTGlzdC5sYXN0V2Vla1Rhc2tcIiwgZGVmYXVsdE1lc3NhZ2U6XCJmw7ZyIGbDtnJyYSB2ZWNrYW4gKHZ7d2Vla30pXCJ9LCB7d2Vlazogd2Vla1BsYW5uZXJXZWVrfSkgOlxyXG4gICAgaW50bC5mb3JtYXRNZXNzYWdlKHtpZDpcInRhc2tMaXN0LmN1cnJlbnRXZWVrVGFza1wiLCBkZWZhdWx0TWVzc2FnZTpcImbDtnIgdmVja2Ege3dlZWt9XCJ9LCB7d2Vlazogd2Vla1BsYW5uZXJXZWVrfSk7XHJcblxyXG4gICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwidGFza0NvbnRhaW5lclwiPlxyXG4gICAgICB7bGVhcm5pbmdUYXNrcy5tYXAoKGxlYXJuaW5nVGFzaywgaWR4KSA9PiB7XHJcbiAgICAgICAgY29uc3QgdGFza0xvb2t1cElkID0gbGVhcm5pbmdUYXNrLmlkO1xyXG4gICAgICAgIGNvbnN0IHVzZXJUYXNrID0gdXNlclRhc2tzW3Rhc2tMb29rdXBJZF0gfHwgeyRtZXRhOiAnZGVsZXRlZCd9IGFzIFBhcnRpYWw8VXNlclRhc2s+OyAvLyBObyBleGlzdCA9ICRtZXRhOiAnZGVsZXRlZCdcclxuICAgICAgICBjb25zdCBpc1dvcmtpbmcgPSB1c2VyVGFzay4kbWV0YSA9PT0gJ2FkZGluZycgfHwgdXNlclRhc2suJG1ldGEgPT09ICdkZWxldGluZyc7XHJcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSB1c2VyVGFzay4kbWV0YSAhPT0gJ2RlbGV0ZWQnICYmIHVzZXJUYXNrLiRtZXRhICE9PSAnZGVsZXRpbmcnO1xyXG4gICAgICAgIGNvbnN0IGRlc2NyaWJlZEFjdGlvbiA9IHNlbGVjdGVkID9cclxuICAgICAgICBpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOlwidGFza0xpc3QucmVtb3ZlVGFza0Zyb21XZWVrbHlQbGFubmluZ1wiLCBkZWZhdWx0TWVzc2FnZTpcIlRhIGJvcnQgdXBwZ2lmdGVuIGZyw6VuIGVnZW4gdmVja29wbGFuZXJpbmcge3dlZWt9XCJ9LCB7d2VlazogZm9yV2Vla1N0cmluZ30pOlxyXG4gICAgICAgIGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6XCJ0YXNrTGlzdC5hZGRUYXNrVG9XZWVrbHlQbGFubmluZ1wiLCBkZWZhdWx0TWVzc2FnZTpcIkzDpGdnIHRpbGwgdXBwZ2lmdGVuIGkgZWdlbiB2ZWNrb3BsYW5lcmluZyB7d2Vla31cIn0sIHt3ZWVrOiBmb3JXZWVrU3RyaW5nfSlcclxuICAgICAgICBjb25zdCBjb25maXJtYXRpb25WaXNpYmxlID1cclxuICAgICAgICAgIGNvbmZpcm1hdGlvbnMuc29tZSh0aWQgPT4gdGFza0xvb2t1cElkID09PSB0aWQpO1xyXG5cclxuICAgICAgICByZXR1cm4gPGRpdiBrZXk9e2xlYXJuaW5nVGFzay5pZH0+PGRpdiBrZXk9e3Rhc2tMb29rdXBJZH0gY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbFwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BzZWxlY3RlZEJveCR7c2VsZWN0ZWQgPyAnIHNlbGVjdGVkJyA6ICcnfWB9XHJcbiAgICAgICAgICAgICAgICBzdHlsZT17aXNXb3JraW5nID8ge29wYWNpdHk6IDAuNX06IHt9fVxyXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCk9PiFpc1dvcmtpbmcgJiYgd2Vla1BsYW5uZXJXZWVrID09PSBjdXJyZW50V2VlayA/XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlVGFzayhsZWFybmluZ1Rhc2spIDpcclxuICAgICAgICAgICAgICAgICAgY29uZmlybWF0aW9uVmlzaWJsZSA/IFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2NvbmZpcm1hdGlvbnM6IGNvbmZpcm1hdGlvbnMuZmlsdGVyKHRpZCA9PiB0aWQgIT09IHRhc2tMb29rdXBJZCl9KSA6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7Y29uZmlybWF0aW9uczogWy4uLmNvbmZpcm1hdGlvbnNdLmNvbmNhdCh0YXNrTG9va3VwSWQpfSl9XHJcbiAgICAgICAgICAgICAgICB0aXRsZT17ZGVzY3JpYmVkQWN0aW9ufT5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICAgICAgPGEgaHJlZj17bGVhcm5pbmdUYXNrLnVybH0+e2xlYXJuaW5nVGFzay5uYW1lfTwvYT5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxDb25maXJtYXRpb25cclxuICAgICAgICAgICAgdmlzaWJsZT17Y29uZmlybWF0aW9uVmlzaWJsZX1cclxuICAgICAgICAgICAgdGV4dD17ZGVzY3JpYmVkQWN0aW9ufVxyXG4gICAgICAgICAgICBvbkNvbmZpcm09eygpPT57XHJcbiAgICAgICAgICAgICAgdGhpcy50b2dnbGVUYXNrKGxlYXJuaW5nVGFzayk7XHJcbiAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7Y29uZmlybWF0aW9uczogY29uZmlybWF0aW9ucy5maWx0ZXIodGlkID0+IHRpZCAhPT0gdGFza0xvb2t1cElkKX0pO1xyXG4gICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICBvbkNhbmNlbD17KCk9PntcclxuICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtjb25maXJtYXRpb25zOiBjb25maXJtYXRpb25zLmZpbHRlcih0aWQgPT4gdGlkICE9PSB0YXNrTG9va3VwSWQpfSk7XHJcbiAgICAgICAgICAgIH19IC8+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgfVxyXG4gICAgICApfVxyXG4gICAgPC9kaXY+XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuZXhwb3J0IGNvbnN0IExhbmd1YWdlQ29udGV4dCA9IFJlYWN0LmNyZWF0ZUNvbnRleHQoe2ludGw6IG51bGx9KTsiLCJpbXBvcnQge0ludGxQcm92aWRlciwgYWRkTG9jYWxlRGF0YX0gZnJvbSAncmVhY3QtaW50bCc7XHJcbmltcG9ydCBsb2NhbGVfZW4gZnJvbSAncmVhY3QtaW50bC9sb2NhbGUtZGF0YS9lbic7XHJcbmltcG9ydCBsb2NhbGVfc3YgZnJvbSAncmVhY3QtaW50bC9sb2NhbGUtZGF0YS9zdic7XHJcbmltcG9ydCBtZXNzYWdlc19zdiBmcm9tIFwiLi4vLi4vdHJhbnNsYXRpb25zL3N2Lmpzb25cIjtcclxuaW1wb3J0IG1lc3NhZ2VzX2VuIGZyb20gXCIuLi8uLi90cmFuc2xhdGlvbnMvZW4uanNvblwiO1xyXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBjZmcgZnJvbSAnLi4vLi4vZ2xvYmFscy9LRUQuY2ZnJztcclxuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xyXG5cclxuZXhwb3J0IGNvbnN0IHNldHVwSW50bCA9IDxQIGV4dGVuZHMgb2JqZWN0PihDb21wb25lbnQ6IFJlYWN0LkNvbXBvbmVudFR5cGU8UD4pID0+XHJcbiAgICBjbGFzcyBfU2V0dXBMYW5ndWFnZUludGwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UD57XHJcbiAgICAgICAgbWVzc2FnZXMgOiBvYmplY3Q7XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKHByb3BzKXtcclxuICAgICAgICAgICAgc3VwZXIocHJvcHMpO1xyXG4gICAgICAgICAgICBhZGRMb2NhbGVEYXRhKFsuLi5sb2NhbGVfZW4sLi4ubG9jYWxlX3N2XSk7XHJcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZXMgPSB7XHJcbiAgICAgICAgICAgICdzdic6IG1lc3NhZ2VzX3N2LFxyXG4gICAgICAgICAgICAnZW4nOiBtZXNzYWdlc19lblxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBtb21lbnQoKS5sb2NhbGUoY2ZnLktFRF9MT0NBTEUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmVuZGVyKCl7XHJcbiAgICAgICAgICAgIHJldHVybiA8SW50bFByb3ZpZGVyIGxvY2FsZT17Y2ZnLktFRF9MT0NBTEV9IG1lc3NhZ2VzPXt0aGlzLm1lc3NhZ2VzW2NmZy5LRURfTE9DQUxFXX0+XHJcbiAgICAgICAgICAgICAgICA8Q29tcG9uZW50IHsuLi50aGlzLnByb3BzIGFzIFB9IC8+XHJcbiAgICAgICAgICAgIDwvSW50bFByb3ZpZGVyPlxyXG4gICAgICAgIH1cclxuICAgIH0iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5cclxuZXhwb3J0IGNvbnN0IEFsaWduSG9yaXpvbnRhbCA9ICh7Y2xhc3NOYW1lLCBjbGFzc05hbWVzLCBjaGlsZHJlbn06IHtjbGFzc05hbWU/OiBzdHJpbmcsIGNsYXNzTmFtZXM/OiBzdHJpbmdbXSwgY2hpbGRyZW46IGFueX0pID0+IChcclxuICA8ZGl2IGNsYXNzTmFtZT17Wy4uLihjbGFzc05hbWVzIHx8IFtdKSwgLi4uKGNsYXNzTmFtZSA/IFtjbGFzc05hbWVdIDogW10pLCBcImFsaWduLWhvcml6b250YWxcIl0uam9pbignICcpfT5cclxuICAgIHtjaGlsZHJlbn1cclxuICA8L2Rpdj5cclxuKVxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBhdmFpbGFibGU6IHtuYW1lOiBzdHJpbmcsIGtleTogc3RyaW5nfVtdXHJcbiAgc2VsZWN0ZWQ6IHN0cmluZ1tdXHJcbiAgb25DaGFuZ2U6IChzZWxlY3RlZDogc3RyaW5nW10sIGNsaWNrZWRLZXk6IHN0cmluZywgd2FzQ2hlY2tlZDogYm9vbGVhbikgPT4gdm9pZDtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IENoZWNrbGlzdCA9ICh7YXZhaWxhYmxlLCBzZWxlY3RlZCwgb25DaGFuZ2V9OiBQcm9wcykgPT4gPGRpdiBjbGFzc05hbWU9XCJ0YXNrQ29udGFpbmVyXCI+XHJcbiAge1xyXG4gICAgYXZhaWxhYmxlLm1hcCgoe2tleSwgbmFtZX0pID0+IHtcclxuICAgICAgY29uc3QgY2hlY2tlZCA9IHNlbGVjdGVkLmluY2x1ZGVzKGtleSk7XHJcbiAgICAgIHJldHVybiA8ZGl2IGtleT17a2V5fSBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiIG9uQ2xpY2s9eygpPT5cclxuICAgICAgICAgICAgb25DaGFuZ2UoY2hlY2tlZCA/XHJcbiAgICAgICAgICAgICAgc2VsZWN0ZWQuZmlsdGVyKGsgPT4gayAhPSBrZXkpIDpcclxuICAgICAgICAgICAgICBzZWxlY3RlZC5jb25jYXQoa2V5KSxcclxuICAgICAgICAgICAgICBrZXksXHJcbiAgICAgICAgICAgICAgY2hlY2tlZCl9PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17XCJjaGVja0JveFwiICsgKGNoZWNrZWQgPyBcIiBjaGVja2VkXCIgOiBcIlwiKX0+PC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+e25hbWV9PC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIH1cclxuICAgIClcclxuICB9XHJcbjwvZGl2PlxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IFJlbW92ZUl0ZW0gfSBmcm9tICcuLi9jb3Vyc2UtYnVpbGRlci9zdWItY29tcG9uZW50cy9yZW1vdmUtaXRlbSc7XHJcbmltcG9ydCB7IGZpbmRET01Ob2RlIH0gZnJvbSAncmVhY3QtZG9tJztcclxuaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgZGlhbG9nczogUmVhY3QuQ29tcG9uZW50W107XHJcbiAgcG9wRGlhbG9nOiAoKT0+dm9pZDtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIERpYWxvZ3MgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHM+IHtcclxuICBsYXN0RGl2OiBIVE1MRGl2RWxlbWVudCB8IG51bGw7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wczogUHJvcHMpIHtcclxuICAgIGlmICh0aGlzLmxhc3REaXYgIT09IG51bGwgJiYgcHJldlByb3BzLmRpYWxvZ3MubGVuZ3RoID4gdGhpcy5wcm9wcy5kaWFsb2dzLmxlbmd0aCkge1xyXG4gICAgICAvLyBBIGRpYWxvZyB3YXMgY2xvc2VkLiBOb3cgZm9jdXMgdGhlIGxhc3QgZGlhbG9nOlxyXG4gICAgICAkKGZpbmRET01Ob2RlKHRoaXMubGFzdERpdikpLmZpbmQoJzppbnB1dCcpLmZpcnN0KCkuZm9jdXMoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlbmRlciAoKSB7XHJcbiAgICB0aGlzLmxhc3REaXYgPSBudWxsO1xyXG4gICAgY29uc3Qge2RpYWxvZ3MsIHBvcERpYWxvZ30gPSB0aGlzLnByb3BzO1xyXG4gICAgJCgnYm9keScpLmF0dHIoJ2FyaWEtZGlzYWJsZWQnLCBkaWFsb2dzLmxlbmd0aCA+IDApO1xyXG4gICAgJCgnYm9keScpLmNzcygnb3ZlcmZsb3cnLCBkaWFsb2dzLmxlbmd0aCA+IDAgPyAnaGlkZGVuJyA6ICdhdXRvJyk7XHJcblxyXG4gICAgcmV0dXJuIGRpYWxvZ3MubGVuZ3RoID4gMCAmJiA8ZGl2PlxyXG4gICAgICB7ZGlhbG9ncy5tYXAoKGRpYWxvZywgaWR4KSA9PiB7XHJcbiAgICAgICAgbGV0IGRpdjogSFRNTERpdkVsZW1lbnQ7XHJcbiAgICAgICAgZnVuY3Rpb24gb25LZXlQcmVzcyhldjogUmVhY3QuS2V5Ym9hcmRFdmVudDxIVE1MRGl2RWxlbWVudD4pIHtcclxuICAgICAgICAgIGlmIChldi53aGljaCA9PT0gMTMgJiYgKCFldi50YXJnZXQgfHwgKGV2LnRhcmdldCBhcyBIVE1MRWxlbWVudCkudGFnTmFtZSAhPT0gJ1RFWFRBUkVBJykpIHtcclxuICAgICAgICAgICAgJChmaW5kRE9NTm9kZShkaXYpKS5maW5kKCcuYnRuLWRlZmF1bHQnKS5jbGljaygpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIG9uS2V5RG93bihldikge1xyXG4gICAgICAgICAgaWYgKGV2LndoaWNoID09PSAyNykgeyAvLyBFc2NhcGVcclxuICAgICAgICAgICAgcG9wRGlhbG9nKCk7XHJcbiAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAoZXYud2hpY2ggPT09IDgzICYmIChldi5jdHJsS2V5IHx8IGV2Lm1ldGFLZXkpKSB7IC8vIENUUkwtU1xyXG4gICAgICAgICAgICBjb25zdCBkb21Ob2RlID0gZmluZERPTU5vZGUoZGl2KTtcclxuICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgY29uc3QgZGVmYXVsdEJ1dHRvbiA9ICQoZG9tTm9kZSkuZmluZCgnLmJ0bi1kZWZhdWx0Jyk7XHJcbiAgICAgICAgICAgIGRlZmF1bHRCdXR0b24uY2xpY2soKTtcclxuICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiA8ZGl2IGtleT17aWR4fT5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJkYXJrZW5cIiAvPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1vZGFsLXBhZ2Utd3JhcFwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibW9kYWwtcGFnZVwiIHJlZj17ZWxlbSA9PiB7XHJcbiAgICAgICAgICBkaXYgPSBlbGVtO1xyXG4gICAgICAgICAgaWYgKGlkeCA9PT0gZGlhbG9ncy5sZW5ndGggLSAxKSB0aGlzLmxhc3REaXYgPSBlbGVtO1xyXG4gICAgICAgIH19XHJcbiAgICAgICAgICAgIHRhYkluZGV4PXswfVxyXG4gICAgICAgICAgICBhcmlhLWRpc2FibGVkPXtpZHggPCBkaWFsb2dzLmxlbmd0aCAtIDF9XHJcbiAgICAgICAgICAgIG9uS2V5UHJlc3M9e29uS2V5UHJlc3N9XHJcbiAgICAgICAgICAgIG9uS2V5RG93bj17b25LZXlEb3dufT5cclxuICAgICAgICAgIHtkaWFsb2d9XHJcbiAgICAgICAgICA8UmVtb3ZlSXRlbSBvbkNsaWNrPXtwb3BEaWFsb2d9IC8+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInN0b3BGbG9hdHNcIj48L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj59KX1cclxuICA8L2Rpdj47XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgRm9ybUZpZWxkIH0gZnJvbSAnLi9mb3JtLWZpZWxkJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgbGFiZWw6IGFueTtcclxuICBpZDogc3RyaW5nO1xyXG4gIHZhbHVlOiBzdHJpbmc7XHJcbiAgcGxhY2Vob2xkZXI/OiBzdHJpbmc7XHJcbiAgYXV0b0ZvY3VzPzogYm9vbGVhbjtcclxuICBvbkNoYW5nZTogKHZhbHVlOiBzdHJpbmcpID0+IHZvaWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBUZXh0SW5wdXQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHM+IHtcclxuICBjb25zdHJ1Y3RvciAocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8Rm9ybUZpZWxkIGxhYmVsPXt0aGlzLnByb3BzLmxhYmVsfT5cclxuICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBhdXRvRm9jdXM9e3RoaXMucHJvcHMuYXV0b0ZvY3VzfSBpZD17dGhpcy5wcm9wcy5pZH0gc2l6ZT17MzV9IHZhbHVlPXt0aGlzLnByb3BzLnZhbHVlfVxyXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXtldiA9PiB0aGlzLnByb3BzLm9uQ2hhbmdlKGV2LnRhcmdldC52YWx1ZSl9XHJcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3RoaXMucHJvcHMucGxhY2Vob2xkZXJ9IC8+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9Gb3JtRmllbGQ+XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBGb3JtRmllbGQgfSBmcm9tICcuL2Zvcm0tZmllbGQnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBsYWJlbDogYW55O1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgdmFsdWU6IHN0cmluZztcclxuICBwbGFjZWhvbGRlcj86IHN0cmluZztcclxuICBhdXRvRm9jdXM/OiBib29sZWFuO1xyXG4gIHJvd3M/OiBudW1iZXI7XHJcbiAgY2hpbGRyZW4/O1xyXG4gIG9uQ2hhbmdlOiAodmFsdWU6IHN0cmluZykgPT4gdm9pZDtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFRleHRBcmVhRm9ybUZpZWxkIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzPiB7XHJcbiAgY29uc3RydWN0b3IgKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPEZvcm1GaWVsZCBsYWJlbD17dGhpcy5wcm9wcy5sYWJlbH0gaWQ9e3RoaXMucHJvcHMuaWR9PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbFwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICAgICAgPHRleHRhcmVhIGF1dG9Gb2N1cz17dGhpcy5wcm9wcy5hdXRvRm9jdXN9IGlkPXt0aGlzLnByb3BzLmlkfSBjb2xzPXszNX0gcm93cz17dGhpcy5wcm9wcy5yb3dzIHx8IDV9IHZhbHVlPXt0aGlzLnByb3BzLnZhbHVlfVxyXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXtldiA9PiB0aGlzLnByb3BzLm9uQ2hhbmdlKGV2LnRhcmdldC52YWx1ZSl9XHJcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3RoaXMucHJvcHMucGxhY2Vob2xkZXJ9IC8+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIHshIXRoaXMucHJvcHMuY2hpbGRyZW4gJiYgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbVwiPlxyXG4gICAgICAgICAgICB7dGhpcy5wcm9wcy5jaGlsZHJlbn1cclxuICAgICAgICAgIDwvZGl2Pn1cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9Gb3JtRmllbGQ+XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBsYWJlbDogYW55O1xyXG4gIGNoaWxkcmVuOiBhbnk7XHJcbiAgaWQ/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZpbmRJZChub2RlKSB7XHJcbiAgY29uc3QgcmVjdWNoZWNrID0gbmV3IFNldCgpO1xyXG4gIHJldHVybiAoZnVuY3Rpb24gZmluZElkKG5vZGUpe1xyXG4gICAgaWYgKHR5cGVvZiBub2RlID09PSAnc3RyaW5nJykgcmV0dXJuIG51bGw7XHJcbiAgICBpZiAocmVjdWNoZWNrLmhhcyhub2RlKSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICByZWN1Y2hlY2suYWRkKG5vZGUpO1xyXG4gICAgaWYgKG5vZGUucHJvcHMpIHtcclxuICAgICAgaWYgKG5vZGUucHJvcHMuaWQpIHJldHVybiBub2RlLnByb3BzLmlkO1xyXG4gICAgICBpZiAobm9kZS5wcm9wcy5jaGlsZHJlbikge1xyXG4gICAgICAgIHJldHVybiBmaW5kSWQobm9kZS5wcm9wcy5jaGlsZHJlbik7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKG5vZGUubGVuZ3RoKSB7XHJcbiAgICAgIGZvciAobGV0IGk9MDtpPG5vZGUubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICBjb25zdCBjaGlsZCA9IG5vZGVbaV07XHJcbiAgICAgICAgaWYgKGNoaWxkKSB7XHJcbiAgICAgICAgICBjb25zdCBjaGlsZElkID0gZmluZElkKGNoaWxkKTtcclxuICAgICAgICAgIGlmIChjaGlsZElkKSByZXR1cm4gY2hpbGRJZDtcclxuICAgICAgICAgIC8vY29uc29sZS5sb2coY2hpbGQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pKG5vZGUpO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRm9ybUZpZWxkIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzPiB7XHJcbiAgY29uc3RydWN0b3IgKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgcmV0dXJuIDw+XHJcbiAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cImtjbGFiZWxcIiBodG1sRm9yPXt0aGlzLnByb3BzLmlkIHx8IGZpbmRJZCh0aGlzLnByb3BzLmNoaWxkcmVuKX0+e3RoaXMucHJvcHMubGFiZWx9PC9sYWJlbD5cclxuICAgICAgICB7dGhpcy5wcm9wcy5jaGlsZHJlbn1cclxuICAgIDwvPlxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5cclxuZXhwb3J0IGNvbnN0IEhvcml6b250YWxJdGVtID0gKHtjbGFzc05hbWUsIGNsYXNzTmFtZXMsIGNoaWxkcmVufToge2NsYXNzTmFtZT86IHN0cmluZywgY2xhc3NOYW1lcz86IHN0cmluZ1tdLCBjaGlsZHJlbjogYW55fSkgPT4gKFxyXG4gIDxkaXYgY2xhc3NOYW1lPXtbLi4uKGNsYXNzTmFtZXMgfHwgW10pLCAuLi4oY2xhc3NOYW1lID8gW2NsYXNzTmFtZV0gOiBbXSksIFwiaG9yaXpvbnRhbEl0ZW1cIl0uam9pbignICcpfT5cclxuICAgIHtjaGlsZHJlbn1cclxuICA8L2Rpdj5cclxuKVxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdrZWRiYWNrZW5kL29ic2VydmFibGUnO1xyXG5pbXBvcnQgeyBMaXZlUXVlcnlWaWV3IH0gZnJvbSAnLi9saXZlLXF1ZXJ5LXZpZXcnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBjaGlsZHJlbjogT2JzZXJ2YWJsZTxKU1guRWxlbWVudD47XHJcbiAgc3Bpbm5lcj86IEpTWC5FbGVtZW50O1xyXG4gIG5vRXJyb3I/OiBib29sZWFuO1xyXG4gIG9uRXJyb3I/OiAoZXJyb3I6IEVycm9yKSA9PiBKU1guRWxlbWVudDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIExhenlDb250ZW50KHtjaGlsZHJlbiwgc3Bpbm5lciwgb25FcnJvciwgbm9FcnJvcn06IFByb3BzKSB7XHJcbiAgcmV0dXJuIDxMaXZlUXVlcnlWaWV3XHJcbiAgICBwcm9wcz17Y2hpbGRyZW59XHJcbiAgICBzcGlubmVyPXtzcGlubmVyfVxyXG4gICAgbm9FcnJvcj17bm9FcnJvcn1cclxuICAgIG9uRXJyb3I9e29uRXJyb3J9XHJcbiAgICBmbj17b2JzZXJ2YWJsZSA9PiBvYnNlcnZhYmxlfSAvPjtcclxufVxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IFNwaW5uZXIgfSBmcm9tICcuLi9jb3Vyc2UtYnVpbGRlci9zdWItY29tcG9uZW50cy9zcGlubmVyJztcclxuaW1wb3J0IHsgc2hhbGxvd0VxdWFscyB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgU3Vic2NyaXB0aW9uIH0gZnJvbSAna2VkYmFja2VuZC9vYnNlcnZhYmxlJztcclxuXHJcbmludGVyZmFjZSBPcHRpb25zIHtcclxuICBzcGlubmVyPzogSlNYLkVsZW1lbnQ7XHJcbiAgb25FcnJvcj86IChlcnJvcjogRXJyb3IpID0+IEpTWC5FbGVtZW50O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbGl2ZVF1ZXJ5VmlldzxUUHJvcHM+KFxyXG4gIGZuOiAocHJvcHM6IFRQcm9wcykgPT4gT2JzZXJ2YWJsZTxKU1guRWxlbWVudD4sXHJcbiAgb3B0aW9ucz86IE9wdGlvbnMpOiAocHJvcHM6IFRQcm9wcykgPT4gSlNYLkVsZW1lbnRcclxue1xyXG4gIHJldHVybiAocHJvcHM6IFRQcm9wcyk9PntcclxuICAgIHJldHVybiA8TGl2ZVF1ZXJ5VmlldyBwcm9wcz17cHJvcHN9IGZuPXtmbn0gey4uLm9wdGlvbnN9IC8+O1xyXG4gIH1cclxufVxyXG5cclxuaW50ZXJmYWNlIFByb3BzPFRQcm9wcz4ge1xyXG4gIHByb3BzOiBUUHJvcHM7XHJcbiAgc3Bpbm5lcj86IEpTWC5FbGVtZW50O1xyXG4gIG5vRXJyb3I/OiBib29sZWFuO1xyXG4gIG9uRXJyb3I/OiAoZXJyb3I6IEVycm9yKSA9PiBKU1guRWxlbWVudDtcclxuICBmbjogKHByb3BzOiBUUHJvcHMpID0+IE9ic2VydmFibGU8SlNYLkVsZW1lbnQ+O1xyXG59XHJcblxyXG5pbnRlcmZhY2UgU3RhdGUge1xyXG4gIHJlc3VsdDogSlNYLkVsZW1lbnQ7XHJcbiAgZXJyb3I/OiBFcnJvcjtcclxuICBpc0xvYWRpbmc6IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBMaXZlUXVlcnlWaWV3PFRQcm9wcz4gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHM8VFByb3BzPiwgU3RhdGU+IHtcclxuICBwcml2YXRlIHN1YnNjcmlwdGlvbj86IFN1YnNjcmlwdGlvbjtcclxuXHJcbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzPFRQcm9wcz4pIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIHJlc3VsdDogbnVsbCxcclxuICAgICAgaXNMb2FkaW5nOiB0cnVlXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICB0aGlzLnN1YnNjcmliZSgpO1xyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XHJcbiAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XHJcbiAgfVxyXG5cclxuICBzaG91bGRDb21wb25lbnRVcGRhdGUobmV4dFByb3BzOiBQcm9wczxUUHJvcHM+LCBuZXh0U3RhdGU6IFN0YXRlKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICB0aGlzLnN0YXRlLmVycm9yICE9PSBuZXh0U3RhdGUuZXJyb3IgfHxcclxuICAgICAgdGhpcy5zdGF0ZS5pc0xvYWRpbmcgIT09IG5leHRTdGF0ZS5pc0xvYWRpbmcgfHxcclxuICAgICAgdGhpcy5zdGF0ZS5yZXN1bHQgIT09IG5leHRTdGF0ZS5yZXN1bHQgfHxcclxuICAgICAgIXNoYWxsb3dFcXVhbHMobmV4dFByb3BzLnByb3BzLCB0aGlzLnByb3BzLnByb3BzKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHM6IFByb3BzPFRQcm9wcz4pIHtcclxuICAgIGlmICghc2hhbGxvd0VxdWFscyhwcmV2UHJvcHMucHJvcHMsIHRoaXMucHJvcHMucHJvcHMpKSB7XHJcbiAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcclxuICAgICAgdGhpcy5zdWJzY3JpYmUoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN1YnNjcmliZSgpIHtcclxuICAgIHRoaXMuc2V0U3RhdGUoe2lzTG9hZGluZzogdHJ1ZX0gYXMgYW55KTtcclxuICAgIHRoaXMuc3Vic2NyaXB0aW9uID0gdGhpcy5wcm9wcy5mbih0aGlzLnByb3BzLnByb3BzKS5zdWJzY3JpYmUoKHJlc3VsdCwgZXJyb3IpID0+IHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICByZXN1bHQsXHJcbiAgICAgIGVycm9yLFxyXG4gICAgICBpc0xvYWRpbmc6IGZhbHNlXHJcbiAgICB9KSk7XHJcbiAgfVxyXG5cclxuICB1bnN1YnNjcmliZSgpIHtcclxuICAgIGlmICh0aGlzLnN1YnNjcmlwdGlvbikge1xyXG4gICAgICB0aGlzLnN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICB0aGlzLnN1YnNjcmlwdGlvbiA9IG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBcclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7cmVzdWx0LCBlcnJvciwgaXNMb2FkaW5nfSA9IHRoaXMuc3RhdGU7XHJcbiAgICBjb25zdCB7c3Bpbm5lciwgb25FcnJvciwgbm9FcnJvcn0gPSB0aGlzLnByb3BzO1xyXG4gICAgLy9pZiAoIWlzTG9hZGluZyAmJiAhcmVzdWx0KSBkZWJ1Z2dlcjtcclxuICAgIHJldHVybiBlcnJvciA/XHJcbiAgICAgIG5vRXJyb3IgPyBcIlwiIDogb25FcnJvciA/IG9uRXJyb3IoZXJyb3IpIDogPHA+RXJyb3I6IHtlcnJvci5tZXNzYWdlfTwvcD4gOlxyXG4gICAgICBpc0xvYWRpbmcgP1xyXG4gICAgICAgIHNwaW5uZXIgPyBzcGlubmVyIDogXCJcIiA6XHJcbiAgICAgICAgcmVzdWx0ID09PSB1bmRlZmluZWQgPyBcIlwiIDogcmVzdWx0O1xyXG4gIH1cclxufSIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgUmVzdENsaWVudFN0YXR1cyB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcclxuaW1wb3J0IHsgVmFsdWUgfSBmcm9tICdrZWRiYWNrZW5kL29ic2VydmFibGUnO1xyXG5pbXBvcnQgeyBsaXZlUXVlcnlWaWV3IH0gZnJvbSAnLi9saXZlLXF1ZXJ5LXZpZXcnO1xyXG5pbXBvcnQgeyBTcGlubmVyIH0gZnJvbSAnLi4vY291cnNlLWJ1aWxkZXIvc3ViLWNvbXBvbmVudHMvc3Bpbm5lcic7XHJcbmltcG9ydCBlbnYgZnJvbSAnLi4vLi4vZ2xvYmFscy9LRUQuZW52JztcclxuaW1wb3J0IHsgRWxsaXBzaXNMb2FkZXIgfSBmcm9tICcuLi9jb3Vyc2UtYnVpbGRlci9zdWItY29tcG9uZW50cy9lbGxpcHNpcy1sb2FkZXInO1xyXG5cclxuZXhwb3J0IGNvbnN0IExvYWRpbmdJbmRpY2F0b3IgPSBsaXZlUXVlcnlWaWV3KCgpID0+XHJcbiAgZW52LmtlZEJhY2tlbmRDbGllbnQuaHR0cC5zdGF0dXMuY29tYmluZUxhdGVzdChlbnYuZWRzQ2xpZW50Lmh0dHAuc3RhdHVzKVxyXG4gIC5tYXAoKFtrZWRCYWNrZW5kU3RhdHVzLCBlZHNTdGF0dXNdKT0+PGRpdiBjbGFzc05hbWU9XCJsb2FkaW5nLWluZGljYXRvclwiPjxkaXYgY2xhc3NOYW1lPVwiaW5kaWNhdG9yXCI+XHJcbiAgICB7a2VkQmFja2VuZFN0YXR1cy5udW1PdXRzdGFuZGluZ09wZXJhdGlvbnMgPiAwIHx8IGVkc1N0YXR1cy5udW1PdXRzdGFuZGluZ09wZXJhdGlvbnMgPiAwID9cclxuICAgICAgPFNwaW5uZXIgLz4gOiB1bmRlZmluZWR9XHJcbjwvZGl2PjwvZGl2PikpO1xyXG4iLCIvKiBSRUZBQ1RPUjogTW92ZSB0aGlzIGNvbXBvbmVudCBvdXRzaWRlIGNvdXJzZWJ1aWxkZXIhXHJcbiAgIFRoaXMgaXMgYSBnZW5lcmFsLXB1cnBvc2UgY29tcG9uZW50XHJcbiovXHJcblxyXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEdvYWxQcm9ncmVzcyB9IGZyb20gJy4uL2NoYXJ0cy9nb2FsLXByb2dyZXNzJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgdGl0bGU6IHN0cmluZyB8IEpTWC5FbGVtZW50O1xyXG4gIGNsYXNzTmFtZT86IHN0cmluZztcclxuICBoZWFkZXJDbGFzc05hbWU/OiBzdHJpbmc7XHJcbiAgY29udGVudENsYXNzTmFtZT86IHN0cmluZztcclxuICBoZWFkZXJPcGVuPzogYm9vbGVhbjtcclxuICBpbmFjdGl2YXRlZD86IGJvb2xlYW47XHJcbiAgaW5hY3RpdmF0ZWRSZW5kZXI/OiAnY2hpbGRyZW4nIHwgJ3RpdGxlQW5kQ2hpbGRyZW4nO1xyXG4gIG9uT3BlbkNsb3NlPzogKGJlY2FtZU9wZW46IGJvb2xlYW4pID0+IHZvaWQ7XHJcbiAgZGlzcGxheVByb2dyZXNzPzogYm9vbGVhbjtcclxuICBwcm9ncmVzc0RhdGE/OiB7Y29tcGxldGVkTnVtYmVyT2ZUYXNrczogbnVtYmVyLCBudW1iZXJPZlRhc2tzOiBudW1iZXJ9O1xyXG4gIGNoaWxkcmVuO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgU3RhdGUge1xyXG4gIGhlYWRlck9wZW46IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBPcGVuQ2xvc2VCb3ggZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsU3RhdGU+IHtcclxuICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIGhlYWRlck9wZW46IHByb3BzLmhlYWRlck9wZW4gfHwgZmFsc2VcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzIChuZXh0UHJvcHM6IFByb3BzKSB7XHJcbiAgICBpZiAobmV4dFByb3BzLmhlYWRlck9wZW4gIT09IHRoaXMucHJvcHMuaGVhZGVyT3Blbikge1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHtoZWFkZXJPcGVuOiBuZXh0UHJvcHMuaGVhZGVyT3Blbn0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3QgeyB0aXRsZSwgY2xhc3NOYW1lLCBjaGlsZHJlbiwgaGVhZGVyQ2xhc3NOYW1lLCBjb250ZW50Q2xhc3NOYW1lLCBkaXNwbGF5UHJvZ3Jlc3MsIHByb2dyZXNzRGF0YSxcclxuICAgICAgaW5hY3RpdmF0ZWQsIGluYWN0aXZhdGVkUmVuZGVyIH0gPSB0aGlzLnByb3BzO1xyXG4gICAgY29uc3QgeyBoZWFkZXJPcGVuIH0gPSB0aGlzLnN0YXRlO1xyXG5cclxuICAgIGlmIChpbmFjdGl2YXRlZCkgcmV0dXJuIGluYWN0aXZhdGVkUmVuZGVyID09PSAndGl0bGVBbmRDaGlsZHJlbicgPyA8PlxyXG4gICAgICA8Pnt0aXRsZX08Lz5cclxuICAgICAgPD57Y2hpbGRyZW59PC8+XHJcbiAgICA8Lz4gOiA8PlxyXG4gICAgICB7Y2hpbGRyZW59XHJcbiAgICA8Lz47XHJcblxyXG4gICAgLy92YXIgY3VycmVudFByb2dyZXNzRGF0YSA9IC8vcHJvZ3Jlc3NEYXRhKCk7XHJcbiAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9eyhjbGFzc05hbWV8fCcnKSArIFwiIG9wZW5DbG9zZVwiICsgKGhlYWRlck9wZW4gPyBcIiBvcGVuXCIgOiBcIlwiKX0+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtcIm9wZW5IZWFkZXJcIiArIChoZWFkZXJDbGFzc05hbWUgPyBcIiBcIiArIGhlYWRlckNsYXNzTmFtZSA6IFwiXCIpfVxyXG4gICAgICAgIG9uQ2xpY2s9eygpID0+IHtcclxuICAgICAgICAgIGlmICh0aGlzLnByb3BzLm9uT3BlbkNsb3NlKSB0aGlzLnByb3BzLm9uT3BlbkNsb3NlKCF0aGlzLnN0YXRlLmhlYWRlck9wZW4pO1xyXG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGhlYWRlck9wZW46ICF0aGlzLnN0YXRlLmhlYWRlck9wZW4gfSk7XHJcbiAgICAgICAgfX0gPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwib3BlbkhlYWRlckNvbnRhaW5lclwiPlxyXG4gICAgICAgICAgPGRpdj57dGl0bGV9PC9kaXY+XHJcbiAgICAgICAgICB7ZGlzcGxheVByb2dyZXNzICYmIDxHb2FsUHJvZ3Jlc3Mgey4uLnByb2dyZXNzRGF0YX0vPn1cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtcIm9wZW5Db250ZW50XCIgKyAoY29udGVudENsYXNzTmFtZSA/IFwiIFwiICsgY29udGVudENsYXNzTmFtZSA6IFwiXCIpfT5cclxuICAgICAgICB7Y2hpbGRyZW59XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+O1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IFRhc2sgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFRhc2tXaXRoTWV0YWRhdGEge1xyXG4gIHRhc2s6IFRhc2s7XHJcbiAgaXNUYXNrT3duZXI6IGJvb2xlYW47XHJcbn1cclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgdGFza01ldGFzOiBUYXNrV2l0aE1ldGFkYXRhW107XHJcbiAgb25Tb3J0OiAoc291cmNlOiBUYXNrLCB0YXJnZXQ6IFRhc2ssIHBsYWNlbWVudDogJ2JlZm9yZScgfCAnYWZ0ZXInKSA9PiB2b2lkO1xyXG4gIHJlbmRlckVkaXRMaW5rPzogKHRhc2tNZXRhOiBUYXNrV2l0aE1ldGFkYXRhKSA9PiBhbnk7XHJcbiAgcmVuZGVyTGluazogKHRhc2tNZXRhOiBUYXNrV2l0aE1ldGFkYXRhKSA9PiBhbnk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB0YXNrSGFzTWlncmF0ZWRUZXh0cyh0YXNrOiBUYXNrKSB7XHJcbiAgcmV0dXJuIHRhc2subWlncmF0ZWRUZXh0cyAmJiBPYmplY3Qua2V5cyh0YXNrLm1pZ3JhdGVkVGV4dHMpLnNvbWUodHlwZSA9PlxyXG4gICAgT2JqZWN0LmtleXModGFzay5taWdyYXRlZFRleHRzW3R5cGVdKS5sZW5ndGggPiAwKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFNvcnRhYmxlVGFza0xpc3Qoe3Rhc2tNZXRhcywgcmVuZGVyRWRpdExpbmssIHJlbmRlckxpbmssIG9uU29ydH06IFByb3BzKSB7XHJcbiAgY29uc3QgW2RyYWdTdGF0ZSwgc2V0RHJhZ1N0YXRlXSA9IHVzZVN0YXRlKHtcclxuICAgIHRhc2tCZWluZ0RyYWdnZWQ6IG51bGwgYXMgVGFzayB8IG51bGwsXHJcbiAgICB0YXNrQmVpbmdIb3ZlcmVkOiBudWxsIGFzIFRhc2sgfCBudWxsLFxyXG4gICAgaW5zZXJ0QmVmb3JlOiBmYWxzZSxcclxuICAgIG9yaWdpbkNsaWVudFk6IC0xXHJcbiAgfSk7XHJcbiAgY29uc3Qge3Rhc2tCZWluZ0RyYWdnZWQsIHRhc2tCZWluZ0hvdmVyZWQsIGluc2VydEJlZm9yZSwgb3JpZ2luQ2xpZW50WX0gPSBkcmFnU3RhdGU7XHJcblxyXG4gIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cInRhc2tDb250YWluZXIgc29ydGFibGVcIlxyXG4gICAgICBvbkRyb3A9e2V2ID0+IHtcclxuICAgICAgICBpZiAodGFza0JlaW5nSG92ZXJlZCAmJiB0YXNrQmVpbmdEcmFnZ2VkKSB7XHJcbiAgICAgICAgICBvblNvcnQodGFza0JlaW5nRHJhZ2dlZCwgdGFza0JlaW5nSG92ZXJlZCwgaW5zZXJ0QmVmb3JlID8gJ2JlZm9yZScgOiAnYWZ0ZXInKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2V0RHJhZ1N0YXRlKHsuLi5kcmFnU3RhdGUsIHRhc2tCZWluZ0hvdmVyZWQ6IG51bGwsIHRhc2tCZWluZ0RyYWdnZWQ6IG51bGx9KTtcclxuICAgICAgfX1cclxuICAgID5cclxuICB7dGFza01ldGFzLm1hcCh0YXNrTWV0YSA9PiB7XHJcbiAgICBjb25zdCB7dGFzaywgaXNUYXNrT3duZXJ9ID0gdGFza01ldGE7XHJcbiAgICBjb25zdCBoYXNNaWdyYXRlZFRleHRzID0gdGFza0hhc01pZ3JhdGVkVGV4dHModGFzayk7XHJcbiAgICBjb25zdCB0YXNrSWQgPSB0YXNrLmlkO1xyXG5cclxuICAgIHJldHVybiA8UmVhY3QuRnJhZ21lbnQga2V5PXt0YXNrSWR9PlxyXG5cclxuICAgICAge2luc2VydEJlZm9yZSAmJiB0YXNrQmVpbmdIb3ZlcmVkID09PSB0YXNrID9cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRyb3AtdGFyZ2V0XCIgb25EcmFnT3Zlcj17ZXYgPT4gZXYucHJldmVudERlZmF1bHQoKX0+Jm5ic3A7PC9kaXY+IDpcclxuICAgICAgICBudWxsXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIDxkaXZcclxuICAgICAgICBjbGFzc05hbWU9e1tcImFsaWduLWhvcml6b250YWxcIiwgXCJkcmFnZ2FibGVcIiwgdGFzayA9PT0gdGFza0JlaW5nRHJhZ2dlZCAmJiBcImRyYWctc291cmNlXCJdLmZpbHRlcih4PT54KS5qb2luKCcgJyl9XHJcbiAgICAgICAgZHJhZ2dhYmxlPXt0cnVlfVxyXG4gICAgICAgIG9uRHJhZ1N0YXJ0PXtldiA9PiB7XHJcbiAgICAgICAgICBldi5kYXRhVHJhbnNmZXIuZWZmZWN0QWxsb3dlZCA9IFwibW92ZVwiO1xyXG4gICAgICAgICAgc2V0RHJhZ1N0YXRlKHsuLi5kcmFnU3RhdGUsIG9yaWdpbkNsaWVudFk6IGV2LmNsaWVudFksIHRhc2tCZWluZ0RyYWdnZWQ6IHRhc2t9KVxyXG4gICAgICAgIH19XHJcbiAgICAgICAgb25EcmFnT3Zlcj17ZXYgPT4ge1xyXG4gICAgICAgICAgaWYgKCF0YXNrQmVpbmdEcmFnZ2VkKSByZXR1cm47XHJcbiAgICAgICAgICBpZiAodGFza0JlaW5nRHJhZ2dlZCA9PT0gdGFzaykge1xyXG4gICAgICAgICAgICBzZXREcmFnU3RhdGUoey4uLmRyYWdTdGF0ZSwgdGFza0JlaW5nSG92ZXJlZDogbnVsbH0pO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgZXYuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3QgPSBcIm1vdmVcIjtcclxuICAgICAgICAgIHNldERyYWdTdGF0ZSh7Li4uZHJhZ1N0YXRlLCB0YXNrQmVpbmdIb3ZlcmVkOiB0YXNrLCBpbnNlcnRCZWZvcmU6IG9yaWdpbkNsaWVudFkgPiBldi5jbGllbnRZfSk7XHJcbiAgICAgICAgfX1cclxuICAgICAgICBvbkRyYWdFbmQ9e2V2ID0+IHtcclxuICAgICAgICAgIHNldERyYWdTdGF0ZSh7Li4uZHJhZ1N0YXRlLCB0YXNrQmVpbmdIb3ZlcmVkOiBudWxsLCB0YXNrQmVpbmdEcmFnZ2VkOiBudWxsfSk7XHJcbiAgICAgICAgfX0+XHJcbiAgICAgICAge2lzVGFza093bmVyICYmIGhhc01pZ3JhdGVkVGV4dHMgJiYgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICAgIDxkaXYgc3R5bGU9e3twb3NpdGlvbjoncmVsYXRpdmUnLCB0b3A6JzAuMmVtJywgbGVmdDogJy0wLjdlbSd9fT5cclxuICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtcGFnZWxpbmVzXCIgc3R5bGU9e3twb3NpdGlvbjonYWJzb2x1dGUnLCB0b3A6IDAsIGxlZnQ6IDAsIGNvbG9yOicjNDljMzVhJ319IC8+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj59XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICAgIHtyZW5kZXJFZGl0TGluayh0YXNrTWV0YSl9XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICAgIHtyZW5kZXJMaW5rKHRhc2tNZXRhKX1cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcblxyXG4gICAgICB7IWluc2VydEJlZm9yZSAmJiB0YXNrQmVpbmdIb3ZlcmVkID09PSB0YXNrID9cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRyb3AtdGFyZ2V0XCIgb25EcmFnT3Zlcj17ZXYgPT4gZXYucHJldmVudERlZmF1bHQoKX0+Jm5ic3A7PC9kaXY+IDpcclxuICAgICAgICBudWxsXHJcbiAgICAgIH1cclxuXHJcbiAgICA8L1JlYWN0LkZyYWdtZW50PjtcclxuICB9KX1cclxuICA8L2Rpdj47XHJcbn1cclxuIiwiaW1wb3J0IGV4ZWMgZnJvbSAnLi9leGVjJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBib2xkOiB7XHJcbiAgICBpY29uOiAnPGI+RjwvYj4nLFxyXG4gICAgdGl0bGU6ICdGZXRzdGlsJyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnYm9sZCcpXHJcbiAgfSxcclxuICBpdGFsaWM6IHtcclxuICAgIGljb246ICc8aT5LPC9pPicsXHJcbiAgICB0aXRsZTogJ0t1cnNpdicsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2l0YWxpYycpXHJcbiAgfSxcclxuICB1bmRlcmxpbmU6IHtcclxuICAgIGljb246ICc8dT5VPC91PicsXHJcbiAgICB0aXRsZTogJ1VuZGVyc3RydWtlbicsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ3VuZGVybGluZScpXHJcbiAgfSxcclxuICBzdHJpa2V0aHJvdWdoOiB7XHJcbiAgICBpY29uOiAnPHN0cmlrZT5TPC9zdHJpa2U+JyxcclxuICAgIHRpdGxlOiAnU3RydWtlbicsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ3N0cmlrZVRocm91Z2gnKVxyXG4gIH0sXHJcbiAgaGVhZGluZzE6IHtcclxuICAgIGljb246ICc8Yj5IPHN1Yj4xPC9zdWI+PC9iPicsXHJcbiAgICB0aXRsZTogJ1J1YnJpayAxJyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnZm9ybWF0QmxvY2snLCAnPEgxPicpXHJcbiAgfSxcclxuICBoZWFkaW5nMjoge1xyXG4gICAgaWNvbjogJzxiPkg8c3ViPjI8L3N1Yj48L2I+JyxcclxuICAgIHRpdGxlOiAnUnVicmlrIDInLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdmb3JtYXRCbG9jaycsICc8SDI+JylcclxuICB9LFxyXG4gIGhlYWRpbmczOiB7XHJcbiAgICBpY29uOiAnPGI+SDxzdWI+Mzwvc3ViPjwvYj4nLFxyXG4gICAgdGl0bGU6ICdSdWJyaWsgMycsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2Zvcm1hdEJsb2NrJywgJzxIMz4nKVxyXG4gIH0sXHJcbiAgcGFyYWdyYXBoOiB7XHJcbiAgICBpY29uOiAnJiMxODI7JyxcclxuICAgIHRpdGxlOiAnUGFyYWdyYWYnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdmb3JtYXRCbG9jaycsICc8UD4nKVxyXG4gIH0sXHJcbiAgcXVvdGU6IHtcclxuICAgIGljb246ICcmIzgyMjA7ICYjODIyMTsnLFxyXG4gICAgdGl0bGU6ICdDaXRhdCcsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2Zvcm1hdEJsb2NrJywgJzxCTE9DS1FVT1RFPicpXHJcbiAgfSxcclxuICBvbGlzdDoge1xyXG4gICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtbGlzdC1vbFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4nLFxyXG4gICAgdGl0bGU6ICdPcmRuYWQgbGlzdGEnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdpbnNlcnRPcmRlcmVkTGlzdCcpXHJcbiAgfSxcclxuICB1bGlzdDoge1xyXG4gICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtbGlzdFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4nLFxyXG4gICAgdGl0bGU6ICdQdW5rdGxpc3RhJyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnaW5zZXJ0VW5vcmRlcmVkTGlzdCcpXHJcbiAgfSxcclxuICBvdXRkZW50OiB7XHJcbiAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1vdXRkZW50XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPicsXHJcbiAgICB0aXRsZTogJ01pbnNrYSBpbmRyYWcnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKFwib3V0ZGVudFwiKVxyXG4gIH0sXHJcbiAgaW5kZW50OiB7XHJcbiAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1pbmRlbnRcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+JyxcclxuICAgIHRpdGxlOiAnw5ZrYSBpbmRyYWcnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKFwiaW5kZW50XCIpLFxyXG4gIH0sXHJcbiAgY29kZToge1xyXG4gICAgaWNvbjogJyZsdDsvJmd0OycsXHJcbiAgICB0aXRsZTogJ1Byb2dyYW1rb2QnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdmb3JtYXRCbG9jaycsICc8UFJFPicpXHJcbiAgfSxcclxuICBsaW5lOiB7XHJcbiAgICBpY29uOiAnJiM4MjEzOycsXHJcbiAgICB0aXRsZTogJ1bDpWdyw6R0IGxpbmplJyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnaW5zZXJ0SG9yaXpvbnRhbFJ1bGUnKVxyXG4gIH0sXHJcbiAgbGluazoge1xyXG4gICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtbGlua1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4nLFxyXG4gICAgdGl0bGU6ICdJbmZvZ2EgbMOkbmsnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHVybCA9IHdpbmRvdy5wcm9tcHQoJ0FuZ2UgbMOkbmtlbnMgVVJMJylcclxuICAgICAgaWYgKHVybCkgZXhlYygnY3JlYXRlTGluaycsIHVybClcclxuICAgIH1cclxuICB9LFxyXG4gIGltYWdlOiB7XHJcbiAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1waWN0dXJlLW9cIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+JyxcclxuICAgIHRpdGxlOiAnSW5mb2dhIGJpbGQnLFxyXG4gICAgcHJvbXB0TXNnOiAnQW5nZSBiaWxkZW5zIFVSTCcsXHJcbiAgICByZXN1bHQgKGV2LCBjb21wb25lbnQpIHtcclxuICAgICAgY29uc3QgdXJsID0gd2luZG93LnByb21wdCh0aGlzLnByb21wdE1zZyk7XHJcbiAgICAgIGlmICh1cmwpIHtcclxuICAgICAgICAvL2V4ZWMoJ2luc2VydEltYWdlJywgdXJsKTtcclxuICAgICAgICBjb25zdCBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gICAgICAgIGltZy5zcmMgPSB1cmw7XHJcbiAgICAgICAgaW1nLnRhYkluZGV4ID0gMTtcclxuICAgICAgICBpbnNlcnRFbGVtZW50KGltZyk7XHJcbiAgICAgICAgaW1nLm9uZm9jdXMgPSBjb21wb25lbnQub25Gb2N1cztcclxuICAgICAgICBpbWcub25ibHVyID0gY29tcG9uZW50Lm9uQmx1cjtcclxuICAgICAgICBjb21wb25lbnQucHJvcHMub25DaGFuZ2UoY29tcG9uZW50LmNvbnRlbnREaXYuaW5uZXJIVE1MKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gaW5zZXJ0RWxlbWVudChlbGVtZW50OiBIVE1MRWxlbWVudCkge1xyXG4gICAgdmFyIHNlbCwgcmFuZ2U7XHJcbiAgICBpZiAod2luZG93LmdldFNlbGVjdGlvbiAmJiAoc2VsID0gd2luZG93LmdldFNlbGVjdGlvbigpKS5yYW5nZUNvdW50KSB7XHJcbiAgICAgICAgcmFuZ2UgPSBzZWwuZ2V0UmFuZ2VBdCgwKTtcclxuICAgICAgICByYW5nZS5jb2xsYXBzZSh0cnVlKTtcclxuICAgICAgICByYW5nZS5pbnNlcnROb2RlKGVsZW1lbnQpO1xyXG4gICAgICAgIC8vIE1vdmUgdGhlIGNhcmV0IGltbWVkaWF0ZWx5IGFmdGVyIHRoZSBpbnNlcnRlZCBzcGFuXHJcbiAgICAgICAgcmFuZ2Uuc2V0U3RhcnRBZnRlcihlbGVtZW50KTtcclxuICAgICAgICByYW5nZS5jb2xsYXBzZSh0cnVlKTtcclxuICAgICAgICBzZWwucmVtb3ZlQWxsUmFuZ2VzKCk7XHJcbiAgICAgICAgc2VsLmFkZFJhbmdlKHJhbmdlKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgZXhlYyBmcm9tICcuL2V4ZWMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gIGJvbGQ6IHtcclxuICAgIGljb246ICc8Yj5CPC9iPicsXHJcbiAgICB0aXRsZTogJ0JvbGQnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdib2xkJylcclxuICB9LFxyXG4gIGl0YWxpYzoge1xyXG4gICAgaWNvbjogJzxpPkk8L2k+JyxcclxuICAgIHRpdGxlOiAnSXRhbGljJyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnaXRhbGljJylcclxuICB9LFxyXG4gIHVuZGVybGluZToge1xyXG4gICAgaWNvbjogJzx1PlU8L3U+JyxcclxuICAgIHRpdGxlOiAnVW5kZXJsaW5lJyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygndW5kZXJsaW5lJylcclxuICB9LFxyXG4gIHN0cmlrZXRocm91Z2g6IHtcclxuICAgIGljb246ICc8c3RyaWtlPlM8L3N0cmlrZT4nLFxyXG4gICAgdGl0bGU6ICdTdHJpa2UtdGhyb3VnaCcsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ3N0cmlrZVRocm91Z2gnKVxyXG4gIH0sXHJcbiAgaGVhZGluZzE6IHtcclxuICAgIGljb246ICc8Yj5IPHN1Yj4xPC9zdWI+PC9iPicsXHJcbiAgICB0aXRsZTogJ0hlYWRpbmcgMScsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2Zvcm1hdEJsb2NrJywgJzxIMT4nKVxyXG4gIH0sXHJcbiAgaGVhZGluZzI6IHtcclxuICAgIGljb246ICc8Yj5IPHN1Yj4yPC9zdWI+PC9iPicsXHJcbiAgICB0aXRsZTogJ0hlYWRpbmcgMicsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2Zvcm1hdEJsb2NrJywgJzxIMj4nKVxyXG4gIH0sXHJcbiAgaGVhZGluZzM6IHtcclxuICAgIGljb246ICc8Yj5IPHN1Yj4zPC9zdWI+PC9iPicsXHJcbiAgICB0aXRsZTogJ0hlYWRpbmcgMycsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2Zvcm1hdEJsb2NrJywgJzxIMz4nKVxyXG4gIH0sXHJcbiAgcGFyYWdyYXBoOiB7XHJcbiAgICBpY29uOiAnJiMxODI7JyxcclxuICAgIHRpdGxlOiAnUGFyYWdyYXBoJyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnZm9ybWF0QmxvY2snLCAnPFA+JylcclxuICB9LFxyXG4gIHF1b3RlOiB7XHJcbiAgICBpY29uOiAnJiM4MjIwOyAmIzgyMjE7JyxcclxuICAgIHRpdGxlOiAnUXVvdGUnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdmb3JtYXRCbG9jaycsICc8QkxPQ0tRVU9URT4nKVxyXG4gIH0sXHJcbiAgb2xpc3Q6IHtcclxuICAgIGljb246ICcmIzM1OycsXHJcbiAgICB0aXRsZTogJ09yZGVyZWQgTGlzdCcsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2luc2VydE9yZGVyZWRMaXN0JylcclxuICB9LFxyXG4gIHVsaXN0OiB7XHJcbiAgICBpY29uOiAnJiM4MjI2OycsXHJcbiAgICB0aXRsZTogJ1Vub3JkZXJlZCBMaXN0JyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnaW5zZXJ0VW5vcmRlcmVkTGlzdCcpXHJcbiAgfSxcclxuICBvdXRkZW50OiB7XHJcbiAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1vdXRkZW50XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPicsXHJcbiAgICB0aXRsZTogJ091dGRlbnQnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKFwib3V0ZGVudFwiKVxyXG4gIH0sXHJcbiAgaW5kZW50OiB7XHJcbiAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1pbmRlbnRcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+JyxcclxuICAgIHRpdGxlOiAnSW5kZW50JyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYyhcImluZGVudFwiKSxcclxuICB9LFxyXG4gIGNvZGU6IHtcclxuICAgIGljb246ICcmbHQ7LyZndDsnLFxyXG4gICAgdGl0bGU6ICdDb2RlJyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnZm9ybWF0QmxvY2snLCAnPFBSRT4nKVxyXG4gIH0sXHJcbiAgbGluZToge1xyXG4gICAgaWNvbjogJyYjODIxMzsnLFxyXG4gICAgdGl0bGU6ICdIb3Jpem9udGFsIExpbmUnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdpbnNlcnRIb3Jpem9udGFsUnVsZScpXHJcbiAgfSxcclxuICBsaW5rOiB7XHJcbiAgICBpY29uOiAnJiMxMjgyNzk7JyxcclxuICAgIHRpdGxlOiAnTGluaycsXHJcbiAgICByZXN1bHQ6ICgpID0+IHtcclxuICAgICAgY29uc3QgdXJsID0gd2luZG93LnByb21wdCgnRW50ZXIgdGhlIGxpbmsgVVJMJylcclxuICAgICAgaWYgKHVybCkgZXhlYygnY3JlYXRlTGluaycsIHVybClcclxuICAgIH1cclxuICB9LFxyXG4gIGltYWdlOiB7XHJcbiAgICBpY29uOiAnJiMxMjgyNDc7JyxcclxuICAgIHRpdGxlOiAnSW1hZ2UnLFxyXG4gICAgcHJvbXB0TXNnOiAnRW50ZXIgdGhlIFVSTCBvZiB0aGUgaW1hZ2UnLFxyXG4gICAgcmVzdWx0ICgpIHtcclxuICAgICAgY29uc3QgdXJsID0gd2luZG93LnByb21wdCh0aGlzLnByb21wdE1zZylcclxuICAgICAgaWYgKHVybCkgZXhlYygnaW5zZXJ0SW1hZ2UnLCB1cmwpXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IChjb21tYW5kLCB2YWx1ZSA9IG51bGwpID0+IHtcclxuICBkb2N1bWVudC5leGVjQ29tbWFuZChjb21tYW5kLCBmYWxzZSwgdmFsdWUpXHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaW1hZ2VFZGl0QWN0aW9ucyhjYikge1xyXG4gIHJldHVybiBbe1xyXG4gICAgbmFtZTogJ2Zsb2F0LWxlZnQnLFxyXG4gICAgaWNvbjogYDxkaXYgc3R5bGU9XCJwb3NpdGlvbjpyZWxhdGl2ZVwiPlxyXG4gICAgICA8aSBjbGFzcz1cImZhIGZhLWFsaWduLXJpZ2h0XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPlxyXG4gICAgICA8ZGl2IHN0eWxlPVwicG9zaXRpb246YWJzb2x1dGU7IGxlZnQ6LTRweDt0b3A6MDsgdHJhbnNmb3JtOiBzY2FsZSgwLjUpOyB0cmFuc2Zvcm0tb3JpZ2luOiBsZWZ0IHRvcFwiPlxyXG4gICAgICAgIDxpIGNsYXNzPVwiZmEgZmEtcGljdHVyZS1vXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PmAsXHJcbiAgICB0aXRsZTogJ0zDpXQgYmlsZGVuIGZseXRhIHbDpG5zdGVyIG9tIHRleHQnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBjYignZmxvYXQtbGVmdCcpXHJcbiAgfSwge1xyXG4gICAgbmFtZTogJ2Zsb2F0LXJpZ2h0JyxcclxuICAgIGljb246IGA8ZGl2IHN0eWxlPVwicG9zaXRpb246cmVsYXRpdmVcIj5cclxuICAgICAgPGkgY2xhc3M9XCJmYSBmYS1hbGlnbi1sZWZ0XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPlxyXG4gICAgICA8ZGl2IHN0eWxlPVwicG9zaXRpb246YWJzb2x1dGU7IHJpZ2h0Oi00cHg7dG9wOjA7IHRyYW5zZm9ybTogc2NhbGUoMC41KTsgdHJhbnNmb3JtLW9yaWdpbjogcmlnaHQgdG9wXCI+XHJcbiAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS1waWN0dXJlLW9cIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+YCxcclxuICAgIHRpdGxlOiAnTMOldCBiaWxkZW4gZmx5dGEgaMO2Z2VyIG9tIHRleHQnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBjYignZmxvYXQtcmlnaHQnKVxyXG4gIH0sIHtcclxuICAgIG5hbWU6ICd1bmZsb2F0JyxcclxuICAgIGljb246IGA8ZGl2IHN0eWxlPVwicG9zaXRpb246cmVsYXRpdmU7XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+XHJcbiAgICAgIDxkaXYgc3R5bGU9XCJwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtsZWZ0OjBcIj4mIzgyNTQ7PC9kaXY+XHJcbiAgICAgIDxkaXYgc3R5bGU9XCJwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDpsZWZ0OjA7dHJhbnNmb3JtOiBzY2FsZSgwLjUpOyB0cmFuc2Zvcm0tb3JpZ2luOiBsZWZ0IGJvdHRvbVwiPlxyXG4gICAgICAgIDxpIGNsYXNzPVwiZmEgZmEtcGljdHVyZS1vXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBzdHlsZT1cInBvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MFwiPl88L2Rpdj5cclxuICAgIDwvZGl2PmAsXHJcbiAgICB0aXRsZTogJ1BsYWNlcmEgYmlsZGVuIHDDpSBlZ2VuIHJhZCcsXHJcbiAgICByZXN1bHQ6ICgpID0+IGNiKCd1bmZsb2F0JylcclxuICB9XTtcclxufVxyXG5cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgZXhlYyBmcm9tICcuL2V4ZWMnO1xyXG5pbXBvcnQge3dhc2hIdG1sfSBmcm9tICcuL3dhc2gtaHRtbCc7XHJcbmltcG9ydCBpbWFnZUVkaXRBY3Rpb25zIGZyb20gJy4vaW1hZ2UtZWRpdC1hY3Rpb25zJztcclxuaW1wb3J0IGFjdGlvbnMgZnJvbSAnLi9hY3Rpb25zJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQWN0aW9uIHtcclxuICBuYW1lPzogc3RyaW5nO1xyXG4gIGljb246IHN0cmluZztcclxuICB0aXRsZTogc3RyaW5nO1xyXG4gIHByb21wdE1zZz86IHN0cmluZztcclxuICByZXN1bHQ6IChldjogUmVhY3QuTW91c2VFdmVudDxIVE1MQnV0dG9uRWxlbWVudD4sIGNvbXBvbmVudDogV3lzaXd5ZykgPT4gdm9pZDtcclxufVxyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBjbGFzc05hbWU/OiBzdHJpbmc7XHJcbiAgaHRtbDogc3RyaW5nO1xyXG4gIG9uQ2hhbmdlPzogKGh0bWw6IHN0cmluZykgPT4gdm9pZDtcclxuICByZXBvcnROdW1DaGFycz86IChudW1DaGFyczogbnVtYmVyKSA9PiB2b2lkO1xyXG4gIG1heENoYXJzPzogbnVtYmVyO1xyXG4gIGRlZmF1bHRBY3Rpb25zPzoge1tuYW1lOiBzdHJpbmddOiBBY3Rpb259O1xyXG4gIGFjdGlvbnM/OiAoUGFydGlhbDxBY3Rpb24+IHwgc3RyaW5nKVtdO1xyXG4gIHJlYWRPbmx5PzogYm9vbGVhbjtcclxufVxyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICBmb2N1c1JlY3Q6IENsaWVudFJlY3QgfCBudWxsO1xyXG59XHJcblxyXG5jb25zdCBjbGFzc2VzID0ge1xyXG4gIGFjdGlvbmJhcjogJ3d5c2l3eWctYWN0aW9uYmFyJyxcclxuICBidXR0b246ICd3eXNpd3lnLWJ1dHRvbicsXHJcbiAgY29udGVudDogJ3d5c2l3eWctY29udGVudCcsXHJcbiAgZm9jdXNyZWN0OiAnd3lzaXd5Zy1mb2N1c3JlY3QnLFxyXG4gIGZvY3VzcG9pbnQ6ICd3eXNpd3lnLWZvY3VzcG9pbnQnLFxyXG4gIHJlYWRvbmx5Q29udGVudDogJ3d5c2l3eWctY29udGVudCByZWFkb25seSdcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFd5c2l3eWcgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsU3RhdGU+IHtcclxuICBjb250ZW50RGl2OiBIVE1MRGl2RWxlbWVudDtcclxuICBmb2N1c1JlY3REaXY6IEhUTUxEaXZFbGVtZW50O1xyXG4gIGZvY3VzRWxlbTogSFRNTEVsZW1lbnQgfCBudWxsO1xyXG4gIGNvcm5lcjogc3RyaW5nO1xyXG4gIHJlc2l6ZVN0YXJ0WDogbnVtYmVyO1xyXG5cclxuICBjb25zdHJ1Y3RvciAocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB0aGlzLnN0YXRlID0ge2ZvY3VzUmVjdDogbnVsbH07XHJcbiAgICB0aGlzLm9uRm9jdXMgPSB0aGlzLm9uRm9jdXMuYmluZCh0aGlzKTtcclxuICAgIHRoaXMub25CbHVyID0gdGhpcy5vbkJsdXIuYmluZCh0aGlzKTtcclxuICAgIHRoaXMub25Nb3VzZURvd24gPSB0aGlzLm9uTW91c2VEb3duLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLm9uTW91c2VNb3ZlID0gdGhpcy5vbk1vdXNlTW92ZS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5vbk1vdXNlVXAgPSB0aGlzLm9uTW91c2VVcC5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICBpZiAoIXRoaXMucHJvcHMucmVhZE9ubHkpIHtcclxuICAgICAgQXJyYXkuZnJvbSh0aGlzLmNvbnRlbnREaXYucXVlcnlTZWxlY3RvckFsbChcImltZyxhXCIpKS5tYXAoZWxlbSA9PiAoZWxlbSBhcyAoSFRNTEltYWdlRWxlbWVudCB8IEhUTUxBbmNob3JFbGVtZW50KSkpXHJcbiAgICAgIC5mb3JFYWNoKGVsZW0gPT4ge1xyXG4gICAgICAgIGVsZW0udGFiSW5kZXggPSAxO1xyXG4gICAgICAgIGVsZW0ub25mb2N1cyA9IHRoaXMub25Gb2N1cztcclxuICAgICAgICBlbGVtLm9uYmx1ciA9IHRoaXMub25CbHVyIGFzIGFueTtcclxuICAgICAgfSk7XHJcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud3lzaXd5Zy1jb250ZW50XCIpLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMub25Nb3VzZURvd24pO1xyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnd5c2l3eWctY29udGVudFwiKS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLm9uTW91c2VNb3ZlKTtcclxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53eXNpd3lnLWNvbnRlbnRcIikuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMub25Nb3VzZVVwKTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnByb3BzLnJlcG9ydE51bUNoYXJzKSB7XHJcbiAgICAgIHRoaXMucHJvcHMucmVwb3J0TnVtQ2hhcnMoKHRoaXMuY29udGVudERpdiAmJiB0aGlzLmNvbnRlbnREaXYuaW5uZXJUZXh0ICYmIHRoaXMuY29udGVudERpdi5pbm5lclRleHQubGVuZ3RoKSB8fCAwKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcclxuICAgIEFycmF5LmZyb20odGhpcy5jb250ZW50RGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCJpbWcsYVwiKSkubWFwKGVsZW0gPT4gKGVsZW0gYXMgKEhUTUxJbWFnZUVsZW1lbnQgfCBIVE1MQW5jaG9yRWxlbWVudCkpKVxyXG4gICAgLmZvckVhY2goZWxlbSA9PiB7XHJcbiAgICAgIGVsZW0udGFiSW5kZXggPSAxO1xyXG4gICAgICBlbGVtLm9uZm9jdXMgPSB0aGlzLm9uRm9jdXM7XHJcbiAgICAgIGVsZW0ub25ibHVyID0gdGhpcy5vbkJsdXIgYXMgYW55O1xyXG4gICAgfSk7XHJcbiAgICBpZiAodGhpcy5wcm9wcy5yZXBvcnROdW1DaGFycykge1xyXG4gICAgICB0aGlzLnByb3BzLnJlcG9ydE51bUNoYXJzKCh0aGlzLmNvbnRlbnREaXYgJiYgdGhpcy5jb250ZW50RGl2LmlubmVyVGV4dCAmJiB0aGlzLmNvbnRlbnREaXYuaW5uZXJUZXh0Lmxlbmd0aCkgfHwgMCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud3lzaXd5Zy1jb250ZW50XCIpLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMub25Nb3VzZURvd24pO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53eXNpd3lnLWNvbnRlbnRcIikucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5vbk1vdXNlTW92ZSk7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnd5c2l3eWctY29udGVudFwiKS5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5vbk1vdXNlVXApO1xyXG4gIH1cclxuXHJcbiAgc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5leHRQcm9wczogUHJvcHMsIG5leHRTdGF0ZTogU3RhdGUpIHtcclxuICAgIC8vdGhpcy5jb250ZW50RGl2Lm9uZm9jdXMgPSB0aGlzLm9uRm9jdXM7XHJcbiAgICAvL3RoaXMuY29udGVudERpdi5vbmJsdXIgPSB0aGlzLm9uQmx1cjtcclxuICAgIHJldHVybiAhdGhpcy5jb250ZW50RGl2IHx8XHJcbiAgICAgIG5leHRTdGF0ZSAhPSB0aGlzLnN0YXRlIHx8XHJcbiAgICAgIG5leHRQcm9wcy5yZWFkT25seSAhPT0gdGhpcy5wcm9wcy5yZWFkT25seSB8fFxyXG4gICAgICB3YXNoSHRtbChuZXh0UHJvcHMuaHRtbCkgIT09IHdhc2hIdG1sKHRoaXMuY29udGVudERpdi5pbm5lckhUTUwpO1xyXG4gIH1cclxuXHJcbiAgdHJpZ2dlck9uQ2hhbmdlKGh0bWw6IHN0cmluZykge1xyXG4gICAgdGhpcy5wcm9wcy5vbkNoYW5nZSAmJiB0aGlzLnByb3BzLm9uQ2hhbmdlKHdhc2hIdG1sKGh0bWwpKTtcclxuICB9XHJcblxyXG4gIG9uRm9jdXMoZXY6IEZvY3VzRXZlbnQpIHtcclxuICAgIGNvbnN0IGVsZW0gPSBldi50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICBpZiAoIWVsZW0gfHwgIWVsZW0udGFnTmFtZSkgcmV0dXJuO1xyXG4gICAgaWYgKGVsZW0udGFnTmFtZSAhPT0gJ0lNRycgJiYgZWxlbS50YWdOYW1lICE9PSAnQScpIHJldHVybjtcclxuICAgIGNvbnN0IGNvbnRlbnRQYXJlbnQgPSB0aGlzLmNvbnRlbnREaXYucGFyZW50RWxlbWVudDtcclxuICAgIGNvbnN0IG5ld1N0YXRlID0ge1xyXG4gICAgICBmb2N1c1JlY3Q6IGdldFJlbGF0YXRpdmVDbGllbnRSZWN0KGNvbnRlbnRQYXJlbnQsIGVsZW0pLFxyXG4gICAgfVxyXG4gICAgc3dpdGNoIChlbGVtLnRhZ05hbWUpIHtcclxuICAgICAgY2FzZSAnQSc6XHJcbiAgICAgIGNhc2UgJ0lNRyc6XHJcblxyXG4gICAgICBkZWZhdWx0OiBicmVhaztcclxuICAgIH1cclxuICAgIHRoaXMuc2V0U3RhdGUobmV3U3RhdGUpO1xyXG4gICAgdGhpcy5mb2N1c0VsZW0gPSBlbGVtO1xyXG4gIH1cclxuXHJcbiAgb25CbHVyKGV2OiBSZWFjdC5Gb2N1c0V2ZW50PEhUTUxEaXZFbGVtZW50Pikge1xyXG4gICAgLyppZiAoZXYucmVsYXRlZFRhcmdldCkge1xyXG4gICAgICBjb25zdCByZWxhdGVkVGFyZ2V0ID0gZXYucmVsYXRlZFRhcmdldCBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgaWYgKHJlbGF0ZWRUYXJnZXQuY2xhc3NOYW1lICYmIHJlbGF0ZWRUYXJnZXQuY2xhc3NOYW1lLnNwbGl0KCcgJykuaW5kZXhPZihjbGFzc2VzLmJ1dHRvbikgPj0gMCkge1xyXG4gICAgICAgIC8vIEEgaW1hZ2UgYWN0aW9uIGJ1dHRvbiB3YXMgcHJlc3NlZFxyXG4gICAgICAgIHNldFxyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgfSovXHJcbiAgICBpZiAoKGV2LnRhcmdldCA9PT0gdGhpcy5mb2N1c0VsZW0gJiYgZXYucmVsYXRlZFRhcmdldCAhPT0gdGhpcy5mb2N1c1JlY3REaXYpIHx8XHJcbiAgICAgIGV2LnRhcmdldCA9PT0gdGhpcy5mb2N1c1JlY3REaXYpXHJcbiAgICB7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe2ZvY3VzUmVjdDogbnVsbH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbWFrZUNsaWNrYWJsZShlbGVtOiBIVE1MRWxlbWVudCkge1xyXG4gICAgIGVsZW0udGFiSW5kZXggPSAxO1xyXG4gIH1cclxuXHJcbiAgb25Nb3VzZURvd24oZXYpIHtcclxuICAgIGlmICgoZXYudGFyZ2V0LmNsYXNzTmFtZSB8fCBcIlwiKS5zcGxpdCgnICcpLmluZGV4T2YoY2xhc3Nlcy5mb2N1c3BvaW50KSA+PSAwKSB7XHJcbiAgICAgIGNvbnN0IGNvcm5lciA9IHRoaXMuZ2V0UmVjdENvcm5lcihldik7XHJcbiAgICAgIHRoaXMuY29ybmVyID0gY29ybmVyO1xyXG4gICAgICB0aGlzLnJlc2l6ZVN0YXJ0WCA9IGV2LmNsaWVudFg7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbk1vdXNlTW92ZShldjogTW91c2VFdmVudCkge1xyXG4gICAgaWYgKHRoaXMuY29ybmVyICYmIHRoaXMuc3RhdGUuZm9jdXNSZWN0ICYmIHRoaXMuZm9jdXNFbGVtKSB7XHJcbiAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIC8vIFRPRE86IFLDpGtuYSB1dCBiYXNlcmF0IHDDpSB0aGlzLmNvcm5lciBodXIgYmlsZGVucyBzdG9ybGVrIGJvcmRlIMOkbmRyYXMuXHJcbiAgICAgIC8vIExldGEgdXBwIGJpbGRlbiBwZXIgSUQgZnLDpW4gdGhpcy5jb250ZW50RGl2XHJcbiAgICAgIC8vIFPDpHR0IERJVjplbnMgc3R5bGUgYXR0cmlidXQgd2lkdGggdGlsbCBueSB3aWR0aC5cclxuICAgICAgLy8gT20gRElWOmVuIHJlZGFuIGhhZGUgaGVpZ2h0LCBzw6R0dCBueSBoZWlnaHQgbWVkIHNhbW1hIGFzcGVjdCByYXRpbyBzb20gaW5uYW4sXHJcbiAgICAgIC8vIGFubmFycywgc8OkdHQgaW50ZSBoZWlnaHQgYWxscyAoZWxsZXIgbcO2amxpZ3R2aXMgdGlsbCBhdXRvKSlcclxuICAgICAgY29uc3QgZm9jdXNSZWN0ID0gdGhpcy5mb2N1c1JlY3REaXYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgIGlmIChmb2N1c1JlY3Qud2lkdGggPCAzMikgcmV0dXJuO1xyXG4gICAgICAvL2NvbnN0IGN1cnJlbnRXaWR0aCA9IGZvY3VzUmVjdC53aWR0aDtcclxuICAgICAgLy9jb25zdCBjdXJyZW50SGVpZ2h0ID0gZm9jdXNSZWN0LmhlaWdodDtcclxuICAgICAgLy9jb25zdCBoYXNIZWlnaHRTdHlsZSA9ICF0aGlzLmZvY3VzRWxlbS5zdHlsZS5oZWlnaHQgfHwgdGhpcy5mb2N1c0VsZW0uc3R5bGUuaGVpZ2h0ID09PSBcImF1dG9cIjtcclxuICAgICAgY29uc3QgbmV3V2lkdGggPSBNYXRoLm1heCgzMiwgdGhpcy5jb3JuZXIuZW5kc1dpdGgoJ2wnKSA/XHJcbiAgICAgICAgZm9jdXNSZWN0LndpZHRoICsgKHRoaXMucmVzaXplU3RhcnRYIC0gZXYuY2xpZW50WCkgOlxyXG4gICAgICAgIC8vZm9jdXNSZWN0LnJpZ2h0IC0gZXYuY2xpZW50WCA6XHJcbiAgICAgICAgZm9jdXNSZWN0LndpZHRoIC0gKHRoaXMucmVzaXplU3RhcnRYIC0gZXYuY2xpZW50WCkpO1xyXG4gICAgICB0aGlzLnJlc2l6ZVN0YXJ0WCA9IGV2LmNsaWVudFg7XHJcbiAgICAgICAgLy9ldi5jbGllbnRYIC0gZm9jdXNSZWN0LmxlZnQ7XHJcbiAgICAgIGNvbnN0IGZhY3RvciA9IG5ld1dpZHRoIC8gZm9jdXNSZWN0LndpZHRoO1xyXG4gICAgICBjb25zdCBuZXdIZWlnaHQgPSBmb2N1c1JlY3QuaGVpZ2h0ICogZmFjdG9yO1xyXG4gICAgICB0aGlzLmZvY3VzRWxlbS5zdHlsZS53aWR0aCA9IG5ld1dpZHRoICsgXCJweFwiO1xyXG4gICAgICB0aGlzLmZvY3VzRWxlbS5zdHlsZS5oZWlnaHQgPSBuZXdIZWlnaHQgKyBcInB4XCI7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgIGZvY3VzUmVjdDogZ2V0UmVsYXRhdGl2ZUNsaWVudFJlY3QodGhpcy5jb250ZW50RGl2LnBhcmVudEVsZW1lbnQsIHRoaXMuZm9jdXNFbGVtKSxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvbk1vdXNlVXAoZXYpIHtcclxuICAgIGlmICh0aGlzLmNvcm5lciAmJiB0aGlzLnN0YXRlLmZvY3VzUmVjdCAmJiB0aGlzLmZvY3VzRWxlbSkge1xyXG4gICAgICB0aGlzLmNvcm5lciA9IG51bGw7XHJcbiAgICAgIHRoaXMudHJpZ2dlck9uQ2hhbmdlKHRoaXMuY29udGVudERpdi5pbm5lckhUTUwpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0UmVjdENvcm5lcihldikge1xyXG4gICAgZm9yIChjb25zdCBjbGFzc05hbWUgb2YgKGV2LnRhcmdldC5jbGFzc05hbWUgfHwgJycpLnNwbGl0KCcgJykpIHtcclxuICAgICAgc3dpdGNoIChjbGFzc05hbWUpIHtcclxuICAgICAgICBjYXNlICdmcHVsJzpcclxuICAgICAgICAgIHJldHVybiAndWwnO1xyXG4gICAgICAgIGNhc2UgJ2ZwdXInOlxyXG4gICAgICAgICAgcmV0dXJuICdmcHVyJztcclxuICAgICAgICBjYXNlICdmcGxyJzpcclxuICAgICAgICAgIHJldHVybiAnbHInO1xyXG4gICAgICAgIGNhc2UgJ2ZwbGwnOlxyXG4gICAgICAgICAgcmV0dXJuICdsbCc7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgZXhlY0ltYWdlRWRpdEFjdGlvbiAoY21kOiBzdHJpbmcpIHtcclxuICAgIC8vY29uc29sZS5sb2coY21kKTtcclxuICAgIGlmICghdGhpcy5mb2N1c0VsZW0pIHJldHVybjtcclxuICAgIC8vY29uc29sZS5sb2coXCJkb2luZyBpdFwiKTtcclxuICAgIHN3aXRjaCAoY21kKSB7XHJcbiAgICAgIGNhc2UgJ2Zsb2F0LWxlZnQnOlxyXG4gICAgICAgIHRoaXMuZm9jdXNFbGVtLnN0eWxlLmNzc0Zsb2F0ID0gJ2xlZnQnO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdmbG9hdC1yaWdodCc6XHJcbiAgICAgICAgdGhpcy5mb2N1c0VsZW0uc3R5bGUuY3NzRmxvYXQgPSAncmlnaHQnO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICd1bmZsb2F0JzpcclxuICAgICAgICB0aGlzLmZvY3VzRWxlbS5zdHlsZS5jc3NGbG9hdCA9ICcnO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgdGhpcy50cmlnZ2VyT25DaGFuZ2UodGhpcy5jb250ZW50RGl2LmlubmVySFRNTCk7XHJcbiAgICB0aGlzLnNldFN0YXRlKHtmb2N1c1JlY3Q6IGdldFJlbGF0YXRpdmVDbGllbnRSZWN0KHRoaXMuY29udGVudERpdi5wYXJlbnRFbGVtZW50LCB0aGlzLmZvY3VzRWxlbSl9KTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IGRlZmF1bHRBY3Rpb25zID0gdGhpcy5wcm9wcy5kZWZhdWx0QWN0aW9ucyB8fCBhY3Rpb25zO1xyXG4gICAgbGV0IGFjdGlvbnNUb1VzZSA9IHRoaXMucHJvcHMuYWN0aW9ucyA/IHRoaXMucHJvcHMuYWN0aW9ucy5tYXAoYWN0aW9uID0+XHJcbiAgICAgIHR5cGVvZiBhY3Rpb24gPT09ICdzdHJpbmcnID9cclxuICAgICAgICBkZWZhdWx0QWN0aW9uc1thY3Rpb25dIDpcclxuICAgICAgICBkZWZhdWx0QWN0aW9uc1thY3Rpb24ubmFtZV0gP1xyXG4gICAgICAgICAgeyAuLi5kZWZhdWx0QWN0aW9uc1thY3Rpb24ubmFtZV0sIC4uLmFjdGlvbiB9IDpcclxuICAgICAgICAgIGFjdGlvbilcclxuICAgIDogT2JqZWN0LmtleXMoZGVmYXVsdEFjdGlvbnMpLm1hcChhY3Rpb24gPT4gZGVmYXVsdEFjdGlvbnNbYWN0aW9uXSk7XHJcblxyXG4gICAgaWYgKHRoaXMuc3RhdGUuZm9jdXNSZWN0KSB7XHJcbiAgICAgIGFjdGlvbnNUb1VzZSA9IGFjdGlvbnNUb1VzZS5jb25jYXQoaW1hZ2VFZGl0QWN0aW9ucyhjbWQgPT4gdGhpcy5leGVjSW1hZ2VFZGl0QWN0aW9uKGNtZCkpKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB7Zm9jdXNSZWN0fSA9IHRoaXMuc3RhdGU7XHJcbiAgICBjb25zdCB7cmVhZE9ubHksIHJlcG9ydE51bUNoYXJzLCBtYXhDaGFyc30gPSB0aGlzLnByb3BzO1xyXG5cclxuICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT17dGhpcy5wcm9wcy5jbGFzc05hbWV9PlxyXG4gICAgICB7IXJlYWRPbmx5ICYmIDxkaXYgY2xhc3NOYW1lPXtjbGFzc2VzLmFjdGlvbmJhcn0+XHJcbiAgICAgICAge2FjdGlvbnNUb1VzZS5tYXAoKGFjdGlvbiwgaWR4KSA9PlxyXG4gICAgICAgICAgPGJ1dHRvbiBrZXk9e2lkeH0gY2xhc3NOYW1lPXtjbGFzc2VzLmJ1dHRvbn1cclxuICAgICAgICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3tfX2h0bWw6IGFjdGlvbi5pY29ufX1cclxuICAgICAgICAgICAgdGl0bGU9e2FjdGlvbi50aXRsZX1cclxuICAgICAgICAgICAgb25Nb3VzZURvd249e2V2PT57YWN0aW9uLnJlc3VsdChldiwgdGhpcyl9fVxyXG4gICAgICAgICAgICBvbk1vdXNlVXA9e2V2PT5zZXRUaW1lb3V0KCgpPT50aGlzLmNvbnRlbnREaXYuZm9jdXMoKSwgMTApfVxyXG4gICAgICAgICAgLz4pfVxyXG4gICAgICA8L2Rpdj59XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtyZWFkT25seSA/IGNsYXNzZXMucmVhZG9ubHlDb250ZW50IDogY2xhc3Nlcy5jb250ZW50fSBzdHlsZT17e3Bvc2l0aW9uOiAncmVsYXRpdmUnLCB0b3A6IDAsIGxlZnQ6IDB9fT5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImVkaXRvclwiXHJcbiAgICAgICAgICByZWY9e2RpdiA9PiB0aGlzLmNvbnRlbnREaXYgPSBkaXZ9XHJcbiAgICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTD17e19faHRtbDogd2FzaEh0bWwodGhpcy5wcm9wcy5odG1sKX19XHJcbiAgICAgICAgICBjb250ZW50RWRpdGFibGU9eyFyZWFkT25seX1cclxuICAgICAgICAgIG9uUGFzdGU9e2V2ID0+IHtcclxuICAgICAgICAgICAgaWYgKCFpc05hTihtYXhDaGFycykpIHtcclxuICAgICAgICAgICAgICBjb25zdCB7dGFyZ2V0LCBjdXJyZW50VGFyZ2V0fSA9IGV2O1xyXG4gICAgICAgICAgICAgIC8vY29uc3QgdGV4dEJlaW5nT3ZlcndyaXR0ZW4gPSAodGFyZ2V0IGFzIGFueSkuaW5uZXJUZXh0IHx8IFwiXCI7XHJcbiAgICAgICAgICAgICAgY29uc3QgZWRpdG9yVGV4dCA9IChjdXJyZW50VGFyZ2V0ICYmIGN1cnJlbnRUYXJnZXQuaW5uZXJUZXh0KSB8fCBcIlwiO1xyXG4gICAgICAgICAgICAgIGNvbnN0IHRleHRCZWluZ1Bhc3RlZCA9IGV2LmNsaXBib2FyZERhdGEuZ2V0RGF0YShcInRleHQvcGxhaW5cIikgfHwgXCJcIjtcclxuICAgICAgICAgICAgICBpZiAoZWRpdG9yVGV4dC5sZW5ndGggKyB0ZXh0QmVpbmdQYXN0ZWQubGVuZ3RoID4gbWF4Q2hhcnMpIHtcclxuICAgICAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9fVxyXG4gICAgICAgICAgb25LZXlVcD17cmVwb3J0TnVtQ2hhcnMgPyBldiA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHtpbm5lclRleHR9ID0gKGV2LnRhcmdldCBhcyBhbnkpO1xyXG4gICAgICAgICAgICByZXBvcnROdW1DaGFycyhpbm5lclRleHQgPyBpbm5lclRleHQubGVuZ3RoIDogMCk7XHJcbiAgICAgICAgICB9IDogbnVsbH1cclxuICAgICAgICAgIG9uS2V5UHJlc3M9eyFpc05hTihtYXhDaGFycykgPyBldiA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHtpbm5lclRleHR9ID0gKGV2LnRhcmdldCBhcyBhbnkpO1xyXG4gICAgICAgICAgICBpZiAoaW5uZXJUZXh0ICYmIGlubmVyVGV4dC5sZW5ndGggPj0gbWF4Q2hhcnMpIHtcclxuICAgICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IDogbnVsbH1cclxuICAgICAgICAgIG9uSW5wdXQ9e2V2ID0+IHRoaXMudHJpZ2dlck9uQ2hhbmdlKChldi50YXJnZXQgYXMgYW55KS5pbm5lckhUTUwpfVxyXG4gICAgICAgICAgb25LZXlEb3duPXtldiA9PiB7XHJcbiAgICAgICAgICAgIGlmIChyZWFkT25seSkgcmV0dXJuO1xyXG4gICAgICAgICAgICBpZiAocmVwb3J0TnVtQ2hhcnMgJiYgZXYuY3VycmVudFRhcmdldCkge1xyXG4gICAgICAgICAgICAgIHJlcG9ydE51bUNoYXJzKChldi5jdXJyZW50VGFyZ2V0LmlubmVyVGV4dCB8fCBcIlwiKS5sZW5ndGgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiS2V5OiBcIiArIGV2LndoaWNoKTtcclxuICAgICAgICAgICAgaWYgKGV2LndoaWNoID49IDM1ICYmIGV2LndoaWNoIDw9IDQwKSB7Ly8gaG9tZS9lbmQvdXAvZG93bi9sZWZ0L3JpZ2h0XHJcbiAgICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IC8vIFByZXZlbnQgZW50aXJlIHBhZ2UgZnJvbSBzY3JvbGxpbmc/P1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChldi53aGljaCA9PT0gOSkge1xyXG4gICAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7Ly8gVEFCXHJcbiAgICAgICAgICAgICAgaWYgKGV2LnNoaWZ0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICBleGVjKFwib3V0ZGVudFwiKTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZXhlYyhcImluZGVudFwiKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAoZXYua2V5Q29kZSA9PT0gOCB8fCBldi5rZXlDb2RlID09PSA0NikgJiYgLy8gRGVsZXRlIG9yIEJhY2sgYnV0dG9uc1xyXG4gICAgICAgICAgICAgIHRoaXMuZm9jdXNFbGVtICYmIHRoaXMuc3RhdGUuZm9jdXNSZWN0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgaWYgKHRoaXMuZm9jdXNFbGVtICYmIHRoaXMuZm9jdXNFbGVtLnBhcmVudEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNFbGVtLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5mb2N1c0VsZW0pOyAvLyBSZW1vdmUgbWFya2VkIGltYWdlXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHRoaXMuZm9jdXNFbGVtID0gbnVsbDtcclxuICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtmb2N1c1JlY3Q6IG51bGx9KTtcclxuICAgICAgICAgICAgICB0aGlzLnRyaWdnZXJPbkNoYW5nZSh0aGlzLmNvbnRlbnREaXYuaW5uZXJIVE1MKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfX1cclxuICAgICAgICAvPlxyXG4gICAgICAgIHtmb2N1c1JlY3QgJiYgPGRpdlxyXG4gICAgICAgICAgcmVmPXtkaXYgPT4gdGhpcy5mb2N1c1JlY3REaXYgPSBkaXZ9XHJcbiAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzZXMuZm9jdXNyZWN0fVxyXG4gICAgICAgICAgb25CbHVyPXt0aGlzLm9uQmx1cn1cclxuICAgICAgICAgIHRhYkluZGV4PXsxfVxyXG4gICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgb3V0bGluZTogMCxcclxuICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXHJcbiAgICAgICAgICAgIHRvcDogdGhpcy5zdGF0ZS5mb2N1c1JlY3QudG9wLFxyXG4gICAgICAgICAgICBsZWZ0OiB0aGlzLnN0YXRlLmZvY3VzUmVjdC5sZWZ0LFxyXG4gICAgICAgICAgICB3aWR0aDogdGhpcy5zdGF0ZS5mb2N1c1JlY3Qud2lkdGgsXHJcbiAgICAgICAgICAgIGhlaWdodDogdGhpcy5zdGF0ZS5mb2N1c1JlY3QuaGVpZ2h0fX0+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3Nlcy5mb2N1c3BvaW50ICsgXCIgZnB1bFwifSBzdHlsZT17e3Bvc2l0aW9uOidhYnNvbHV0ZScsIHRvcDowLCBsZWZ0OjB9fSAvPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzZXMuZm9jdXNwb2ludCArIFwiIGZwdXJcIn0gc3R5bGU9e3twb3NpdGlvbjonYWJzb2x1dGUnLCB0b3A6MCwgcmlnaHQ6MH19IC8+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3Nlcy5mb2N1c3BvaW50ICsgXCIgZnBsclwifSBzdHlsZT17e3Bvc2l0aW9uOidhYnNvbHV0ZScsIGJvdHRvbTowLCByaWdodDowfX0gLz5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc2VzLmZvY3VzcG9pbnQgKyBcIiBmcGxsXCJ9IHN0eWxlPXt7cG9zaXRpb246J2Fic29sdXRlJywgYm90dG9tOjAsIGxlZnQ6MH19IC8+XHJcbiAgICAgICAgPC9kaXY+fVxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0UmVsYXRhdGl2ZUNsaWVudFJlY3QgKHBhcmVudDogSFRNTEVsZW1lbnQsIGNoaWxkOiBIVE1MRWxlbWVudCkgOiBDbGllbnRSZWN0IHtcclxuICBjb25zdCBwYXJlbnRSZWN0ID0gcGFyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gIGNvbnN0IGNoaWxkUmVjdCA9IGNoaWxkLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gIHJldHVybiB7XHJcbiAgICB0b3A6IGNoaWxkUmVjdC50b3AgLSBwYXJlbnRSZWN0LnRvcCArIHBhcmVudC5zY3JvbGxUb3AsXHJcbiAgICBsZWZ0OiBjaGlsZFJlY3QubGVmdCAtIHBhcmVudFJlY3QubGVmdCArIHBhcmVudC5zY3JvbGxMZWZ0LFxyXG4gICAgYm90dG9tOiBjaGlsZFJlY3QuYm90dG9tIC0gcGFyZW50UmVjdC50b3AgKyBwYXJlbnQuc2Nyb2xsVG9wLFxyXG4gICAgcmlnaHQ6IGNoaWxkUmVjdC5yaWdodCAtIHBhcmVudFJlY3QubGVmdCArIHBhcmVudC5zY3JvbGxMZWZ0LFxyXG4gICAgd2lkdGg6IGNoaWxkUmVjdC53aWR0aCxcclxuICAgIGhlaWdodDogY2hpbGRSZWN0LmhlaWdodFxyXG4gIH07XHJcbn1cclxuIiwiXHJcbmV4cG9ydCBmdW5jdGlvbiBzYXZlU2VsZWN0aW9uKCkge1xyXG4gIGlmICh3aW5kb3cuZ2V0U2VsZWN0aW9uKSB7XHJcbiAgICAgIHZhciBzZWwgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XHJcbiAgICAgIGlmIChzZWwuZ2V0UmFuZ2VBdCAmJiBzZWwucmFuZ2VDb3VudCkge1xyXG4gICAgICAgICAgcmV0dXJuIHNlbC5nZXRSYW5nZUF0KDApO1xyXG4gICAgICB9XHJcbiAgfSBlbHNlIGlmIChkb2N1bWVudFtcInNlbGVjdGlvblwiXSAmJiBkb2N1bWVudFtcInNlbGVjdGlvblwiXS5jcmVhdGVSYW5nZSkge1xyXG4gICAgICByZXR1cm4gZG9jdW1lbnRbXCJzZWxlY3Rpb25cIl0uY3JlYXRlUmFuZ2UoKTtcclxuICB9XHJcbiAgcmV0dXJuIG51bGw7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZXN0b3JlU2VsZWN0aW9uKHJhbmdlKSB7XHJcbiAgaWYgKHJhbmdlKSB7XHJcbiAgICAgIGlmICh3aW5kb3cuZ2V0U2VsZWN0aW9uKSB7XHJcbiAgICAgICAgICB2YXIgc2VsID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgc2VsLnJlbW92ZUFsbFJhbmdlcygpO1xyXG4gICAgICAgICAgc2VsLmFkZFJhbmdlKHJhbmdlKTtcclxuICAgICAgfSBlbHNlIGlmIChkb2N1bWVudFtcInNlbGVjdGlvblwiXSAmJiByYW5nZS5zZWxlY3QpIHtcclxuICAgICAgICAgIHJhbmdlLnNlbGVjdCgpO1xyXG4gICAgICB9XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XHJcblxyXG5jb25zdCBwYXJzZXIgPSBuZXcgRE9NUGFyc2VyKCk7XHJcblxyXG50eXBlIEhUTUxQb2xpY3kgPSB7W3RhZ05hbWVMb3dlcjogc3RyaW5nXToge1thdHRyaWJ1dGVMb3dlcjogc3RyaW5nXTogYm9vbGVhbn19O1xyXG5cclxuLyoqIFRhZ3MgLyBBdHRyaWJ1dGVzIFdoaXRlbGlzdFxyXG4gKiBcclxuICovXHJcbmNvbnN0IEhUTUxfV0FTSF9QT0xJQ1k6IEhUTUxQb2xpY3kgPSB7XHJcbiAgYjoge30sICAvLyBib2xkXHJcbiAgaToge30sICAvLyBpdGFsaWNcclxuICBwOiB7fSwgIC8vIHBhcmFncmFwaFxyXG4gIHU6IHt9LCAgLy8gdW5kZXJsaW5lXHJcbiAgc3RyaWtlOiB7fSwgLy8gc3RyaWtlLXRocm91Z2hcclxuICBwcmU6IHt9LCAvLyB1bmZvcm1hdHRlZFxyXG4gIGgxOiB7fSwgLy8gaGVhZGluZyAxXHJcbiAgaDI6IHt9LCAvLyBoZWFkaW5nIDJcclxuICBoMzoge30sIC8vIGhlYWRpbmcgM1xyXG4gIGg0OiB7fSwgLy8gaGVhZGluZyA0XHJcbiAgaDU6IHt9LCAvLyBoZWFkaW5nIDVcclxuICBpbWc6IHtzcmM6IHRydWUsIGNsYXNzOiB0cnVlLCBzdHlsZTogdHJ1ZSwgdGFiaW5kZXg6IHRydWV9LCAvLyBpbWFnZS4gV2Ugc2V0IHN0eWxlIGFuZCB0YWJpbmRleCBvdXJzZWx2ZXMuIEFjY2VwdCB0aGF0LlxyXG4gIGE6IHtocmVmOiB0cnVlLCB0YXJnZXQ6IHRydWUsIHRhYmluZGV4OiB0cnVlfSwgLy8gbGlua1xyXG4gIHVsOiB7fSwgLy8gVW5vcmRlcmVkIGxpc3RcclxuICBvbDoge30sIC8vIE9yZGVyZWQgbGlzdFxyXG4gIGxpOiB7fSwgLy8gbGlzdCBpdGVtXHJcbiAgaHI6IHt9LCAvLyBIb3Jpem9udGFsIHJ1bGVcclxuICBicjoge30sIC8vIEJyZWFrIGxpbmVcclxuICBkaXY6IHt9LC8vIE9mIHNvbWUgcmVhc29uLCBkaXZzIGFyZSBzb21ldGltZXMgaW5zZXJ0ZWQgd2hlbiBwcmVzc2luZyBFTlRFUiBpbiB0aGUgd3lzaXd5ZyBlZGl0b3IuXHJcbiAgc3Bhbjoge30sLy8gU3BhbnMgYXJlIGhhcm1sZXNzLCBqdXN0IHJlbW92ZSB0aGVpciBzdHlsZSBhbmQgb3RoZXIgYXR0cmlidXRlcyBhbmQgSSBmZWVsIGdyZWF0LlxyXG4gIC8vIHRhYmxlIHRhZ3M6XHJcbiAgdGFibGU6IHtib3JkZXI6IHRydWV9LFxyXG4gIHRib2R5OiB7fSxcclxuICB0aGVhZDoge30sXHJcbiAgdGZvb3Q6IHt9LFxyXG4gIHRyOiB7fSxcclxuICB0ZDoge2hlYWRlcnM6IHRydWUsIGNvbHNwYW46IHRydWUsIHJvd3NwYW46IHRydWV9LFxyXG4gIHRoOiB7YWJicjogdHJ1ZSwgaGVhZGVyczogdHJ1ZSwgc2NvcGU6IHRydWUsIHNvcnRlZDogdHJ1ZSwgY29sc3BhbjogdHJ1ZSwgcm93c3BhbjogdHJ1ZX1cclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB3YXNoSHRtbCAoaHRtbDogc3RyaW5nKTogc3RyaW5nIHtcclxuICBjb25zdCBkb2MgPSBwYXJzZXIucGFyc2VGcm9tU3RyaW5nKGh0bWwsIFwidGV4dC9odG1sXCIpO1xyXG4gIGNvbnN0IHtjaGlsZE5vZGVzfSA9IGRvYy5ib2R5O1xyXG4gIGxldCBtb2RpZmllZCA9IGZhbHNlO1xyXG4gIGZvciAobGV0IGk9MDsgaTxjaGlsZE5vZGVzLmxlbmd0aDsgKytpKSB7XHJcbiAgICBpZiAod2FzaE5vZGUoY2hpbGROb2Rlcy5pdGVtKGkpKSkge1xyXG4gICAgICBtb2RpZmllZCA9IHRydWU7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBtb2RpZmllZCA/XHJcbiAgICBkb2MuYm9keS5pbm5lckhUTUwgOlxyXG4gICAgaHRtbDsgLy8gQnkgcmV0dXJuaW5nIHRoZSBvcmlnaW5hbCBIVE1MIHN0cmluZywgd2Ugc3BhcmUgdGhlIHVzZXIgZnJvbSByZWZyZXNoaW5nIHRoZSBlZGl0IGFyZWEsXHJcbiAgICAgICAgICAvLyB3aGljaCB3b3VsZCBvdGhlcndpc2UgcHV0IHRoZSBjdXJzb3IgYXQgdGhlIHRvcCwgbG9zaW5nIHRoZSBwb3NpdGlvbiB3aGVyZSB1c2VyIHdoZXJlLlxyXG59XHJcblxyXG5mdW5jdGlvbiB3YXNoTm9kZShub2RlOiBOb2RlIHwgRWxlbWVudCB8IEhUTUxFbGVtZW50KTogYm9vbGVhbiB7XHJcbiAgbGV0IG1vZGlmaWVkID0gZmFsc2U7XHJcbiAgaWYgKGlzRWxlbWVudChub2RlKSkge1xyXG4gICAgaWYgKHdhc2hFbGVtZW50KG5vZGUpKSB7XHJcbiAgICAgIG1vZGlmaWVkID0gdHJ1ZTtcclxuICAgIH1cclxuICB9XHJcbiAgaWYgKHdhc2hDaGlsZE5vZGVzKG5vZGUpKSB7XHJcbiAgICBtb2RpZmllZCA9IHRydWU7XHJcbiAgfVxyXG4gIHJldHVybiBtb2RpZmllZDtcclxufVxyXG5cclxuZnVuY3Rpb24gd2FzaENoaWxkTm9kZXMobm9kZTogTm9kZSkge1xyXG4gIGxldCBtb2RpZmllZCA9IGZhbHNlO1xyXG4gIGNvbnN0IHtjaGlsZE5vZGVzfSA9IG5vZGU7XHJcbiAgZm9yIChsZXQgaT0wOyBpPGNoaWxkTm9kZXMubGVuZ3RoOyArK2kpIHtcclxuICAgIGlmICh3YXNoTm9kZShjaGlsZE5vZGVzLml0ZW0oaSkpKSB7XHJcbiAgICAgIG1vZGlmaWVkID0gdHJ1ZTtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIG1vZGlmaWVkO1xyXG59IFxyXG5cclxuLyoqIFJlcGxhY2UgYW4gZWxlbWVudCB3aXRoIGl0cyBjaGlsZCBub2Rlcy5cclxuICogXHJcbiAqL1xyXG5mdW5jdGlvbiByZW1vdmVNaWRkbGVFbGVtZW50KGVsZW1lbnQ6IEVsZW1lbnQpIHtcclxuICBjb25zdCB7Y2hpbGROb2Rlc30gPSBlbGVtZW50O1xyXG4gIGZvciAobGV0IGk9MDsgaTxjaGlsZE5vZGVzLmxlbmd0aDsgKytpKSB7XHJcbiAgICBlbGVtZW50LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGNoaWxkTm9kZXMuaXRlbShpKSwgZWxlbWVudCk7XHJcbiAgfVxyXG4gIGVsZW1lbnQucmVtb3ZlKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHdhc2hFbGVtZW50KGVsZW1lbnQ6IEVsZW1lbnQpOiBib29sZWFuIHtcclxuICBjb25zdCBwb2xpY3kgPSBlbGVtZW50LnRhZ05hbWUgJiYgSFRNTF9XQVNIX1BPTElDWVtlbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKV07XHJcbiAgaWYgKCFwb2xpY3kpIHtcclxuICAgIGNvbnNvbGUud2FybihcIld5c2l3eWc6IG5vdCBhbGxvd2VkIHRhZ1wiLCBlbGVtZW50LnRhZ05hbWUpO1xyXG4gICAgd2FzaENoaWxkTm9kZXMoZWxlbWVudCk7XHJcbiAgICByZW1vdmVNaWRkbGVFbGVtZW50KGVsZW1lbnQpO1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG4gIGxldCBtb2RpZmllZCA9IGZhbHNlO1xyXG4gIGZvciAobGV0IGk9MDsgaTxlbGVtZW50LmF0dHJpYnV0ZXMubGVuZ3RoOyArK2kpIHtcclxuICAgIGNvbnN0IGF0dHIgPSBlbGVtZW50LmF0dHJpYnV0ZXMuaXRlbShpKTtcclxuICAgIGNvbnN0IGFsbG93ZWQgPSBhdHRyLm5hbWUgJiYgISFwb2xpY3lbYXR0ci5uYW1lLnRvTG93ZXJDYXNlKCldO1xyXG4gICAgaWYgKCFhbGxvd2VkKSB7XHJcbiAgICAgIG1vZGlmaWVkID0gdHJ1ZTtcclxuICAgICAgY29uc29sZS53YXJuKFwiV3lzaXd5Zzogbm90IGFsbG93ZWQgYXR0cmlidXRlXCIsIGF0dHIubmFtZSwgXCJUYWc6IFwiLCBlbGVtZW50LnRhZ05hbWUpO1xyXG4gICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShhdHRyLm5hbWUpO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gbW9kaWZpZWQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGlzRWxlbWVudChub2RlOiBOb2RlKSA6IG5vZGUgaXMgRWxlbWVudCB7XHJcbiAgcmV0dXJuICEhKG5vZGUgYXMgRWxlbWVudCkudGFnTmFtZTtcclxufVxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7Rm9ybWF0dGVkTWVzc2FnZX0gZnJvbSAncmVhY3QtaW50bCc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIGxlYXJuaW5nR29hbD86IHN0cmluZztcclxuICBvblNhdmU6IChsZWFybmluZ0dvYWw6IHN0cmluZykgPT4gdm9pZDtcclxufVxyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICBsZWFybmluZ0dvYWw6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEFkZEN1c3RvbUdvYWwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsU3RhdGU+IHtcclxuICBjb25zdHJ1Y3RvciAocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcylcclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIGxlYXJuaW5nR29hbDogcHJvcHMubGVhcm5pbmdHb2FsIHx8ICcnXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7bGVhcm5pbmdHb2FsfSA9IHRoaXMuc3RhdGU7XHJcbiAgICBjb25zdCB7b25TYXZlfSA9IHRoaXMucHJvcHM7XHJcbiAgICByZXR1cm4gPGRpdj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdi1odG1sLXBvcnRsZXQgc3YtcG9ydGxldCBzdi1za2lwLXNwYWNlclwiPlxyXG4gICAgICAgICAgPGgyPjxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwid2Vla3BsYW5uZXIuYWRkTGVhcm5pbmdHb2FsVGl0bGVcIiBkZWZhdWx0TWVzc2FnZT1cIkzDpGdnIHRpbGwgZWdldCBsw6RyYW5kZW3DpWxcIi8+PC9oMj5cclxuICAgICAgICAgIDxociAvPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwid2Vla3BsYW5uZXIuYWRkTGVhcm5pbmdHb2FsXCIgZGVmYXVsdE1lc3NhZ2U9XCJNw6VsXCIvPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiB0YWJJbmRleD17MX0gc2l6ZT17NTB9IGF1dG9Gb2N1c1xyXG4gICAgICAgICAgICAgICAgdmFsdWU9e2xlYXJuaW5nR29hbH1cclxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHRoaXMuc2V0U3RhdGUoe2xlYXJuaW5nR29hbDogZS50YXJnZXQudmFsdWV9KX0gLz5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wIHNwYWNlZFwiIC8+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxiciAvPjwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInN2LWh0bWwtcG9ydGxldCBzdi1wb3J0bGV0XCI+XHJcbiAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgdGFiSW5kZXg9ezF9XHJcbiAgICAgICAgICBjbGFzc05hbWU9XCJidG4gYnRuLWxhcmdlIGJ0bi1kZWZhdWx0XCJcclxuICAgICAgICAgIG9uQ2xpY2s9eygpPT5vblNhdmUobGVhcm5pbmdHb2FsKX0+PEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJjb21tb24uc2F2ZVwiIGRlZmF1bHRNZXNzYWdlPVwic2F2ZVwiLz48L2J1dHRvbj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgVGV4dElucHV0IH0gZnJvbSAnLi4vdXRpbGl0eS1jb21wb25lbnRzL2Zvcm0tZmllbGQtdGV4dC1pbnB1dCc7XHJcbmltcG9ydCB7IFRleHRBcmVhRm9ybUZpZWxkIH0gZnJvbSAnLi4vdXRpbGl0eS1jb21wb25lbnRzL2Zvcm0tZmllbGQtdGV4dGFyZWEnO1xyXG5pbXBvcnQge0xhbmd1YWdlQ29udGV4dH0gZnJvbSAnLi4vdXRpbGl0eS1jb21wb25lbnRzL0xhbmd1YWdlQ29udGV4dCc7XHJcbmltcG9ydCB7Rm9ybWF0dGVkTWVzc2FnZX0gZnJvbSAncmVhY3QtaW50bCc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIGlzVGFzazogYm9vbGVhblxyXG4gIG9uU2F2ZTogKG5hbWU6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZywgdXJsOiBzdHJpbmcpID0+IHZvaWQ7XHJcbn1cclxuXHJcbmludGVyZmFjZSBTdGF0ZSB7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XHJcbiAgdXJsOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBBZGRDdXN0b21UYXNrIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLFN0YXRlPiB7XHJcbiAgc3RhdGljIGNvbnRleHRUeXBlID0gTGFuZ3VhZ2VDb250ZXh0O1xyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpXHJcbiAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICBuYW1lOiAnJyxcclxuICAgICAgZGVzY3JpcHRpb246ICcnLFxyXG4gICAgICB1cmw6ICcnXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7IG5hbWUsIGRlc2NyaXB0aW9uLCB1cmwgfSA9IHRoaXMuc3RhdGU7XHJcbiAgICBjb25zdCB7IGlzVGFzaywgb25TYXZlIH0gPSB0aGlzLnByb3BzO1xyXG4gICAgY29uc3Qge2ludGx9ID0gdGhpcy5jb250ZXh0O1xyXG4gICAgcmV0dXJuIDxkaXY+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3YtaHRtbC1wb3J0bGV0IHN2LXBvcnRsZXQgc3Ytc2tpcC1zcGFjZXJcIj5cclxuICAgICAgICA8aDI+PEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJjdXN0b21UYXNrLmFkZFdvcmtHb2FsVGl0bGVcIiBkZWZhdWx0TWVzc2FnZT1cIkzDpGdnIHRpbGwgZWdldCBhcmJldHNtw6VsXCIvPjwvaDI+XHJcbiAgICAgICAgPGhyIC8+XHJcbiAgICAgICAgPFRleHRJbnB1dFxyXG4gICAgICAgICAgbGFiZWw9e2ludGwuZm9ybWF0TWVzc2FnZSh7aWQ6J2NvbW1vbi5uYW1lTGFiZWwnLCBkZWZhdWx0TWVzc2FnZTogJ05hbW4nfSl9XHJcbiAgICAgICAgICBpZD1cIkFkZEN1c3RvbVRhc2s6bmFtZVwiXHJcbiAgICAgICAgICBwbGFjZWhvbGRlcj17aW50bC5mb3JtYXRNZXNzYWdlKHtpZDonY3VzdG9tVGFzay5lbnRlck5hbWVQbGhkJywgZGVmYXVsdE1lc3NhZ2U6ICdBbmdlIG5hbW4uLi4nfSl9XHJcbiAgICAgICAgICB2YWx1ZT17bmFtZX1cclxuICAgICAgICAgIGF1dG9Gb2N1c1xyXG4gICAgICAgICAgb25DaGFuZ2U9e25hbWUgPT4gdGhpcy5zZXRTdGF0ZSh7bmFtZX0pfSAvPlxyXG5cclxuICAgICAgICA8VGV4dEFyZWFGb3JtRmllbGRcclxuICAgICAgICAgIHJvd3M9ezd9XHJcbiAgICAgICAgICBsYWJlbD0ge2ludGwuZm9ybWF0TWVzc2FnZSh7aWQ6J2NvbW1vbi5kZXNjcmlwdGlvbkxhYmVsJywgZGVmYXVsdE1lc3NhZ2U6J0Jlc2tyaXZuaW5nJ30pfVxyXG4gICAgICAgICAgaWQ9XCJBZGRDdXN0b21UYXNrOmRlc2NyaXB0aW9uXCJcclxuICAgICAgICAgIHBsYWNlaG9sZGVyPXtpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOidjb21tb24uYWRkRGVzY3JpcHRpb25QbGhkJywgZGVmYXVsdE1lc3NhZ2U6IFwiTMOkZ2cgdGlsbCBlbiBiZXNrcml2bmluZy4uLlwifSl9XHJcbiAgICAgICAgICB2YWx1ZT17ZGVzY3JpcHRpb259XHJcbiAgICAgICAgICBvbkNoYW5nZT17ZGVzY3JpcHRpb249PnRoaXMuc2V0U3RhdGUoe2Rlc2NyaXB0aW9ufSl9IC8+XHJcblxyXG4gICAgICAgIDxUZXh0SW5wdXRcclxuICAgICAgICAgIGxhYmVsPSB7aW50bC5mb3JtYXRNZXNzYWdlKHtpZDonY29tbW9uLmxpbmtMYWJlbCcsIGRlZmF1bHRNZXNzYWdlOidMw6Ruayd9KX0gXHJcbiAgICAgICAgICBpZD1cIkFkZEN1c3RvbVRhc2s6dXJsXCJcclxuICAgICAgICAgIHBsYWNlaG9sZGVyPVwiaHR0cDovL3d3dy4uLlwiXHJcbiAgICAgICAgICB2YWx1ZT17dXJsfVxyXG4gICAgICAgICAgb25DaGFuZ2U9e3VybCA9PiB0aGlzLnNldFN0YXRlKHt1cmx9KX0gLz5cclxuXHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInN2LWh0bWwtcG9ydGxldCBzdi1wb3J0bGV0XCI+XHJcbiAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgdGFiSW5kZXg9ezF9XHJcbiAgICAgICAgICBjbGFzc05hbWU9XCJidG4gYnRuLWxhcmdlIGJ0bi1kZWZhdWx0XCJcclxuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IG9uU2F2ZShuYW1lLCBkZXNjcmlwdGlvbiwgdXJsKX0+PEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJjb21tb24uc2F2ZVwiIGRlZmF1bHRNZXNzYWdlPVwiU3BhcmFcIi8+PC9idXR0b24+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgfVxyXG59XHJcblxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IFRleHRJbnB1dCB9IGZyb20gJy4uL3V0aWxpdHktY29tcG9uZW50cy9mb3JtLWZpZWxkLXRleHQtaW5wdXQnO1xyXG5pbXBvcnQgeyBUZXh0QXJlYUZvcm1GaWVsZCB9IGZyb20gJy4uL3V0aWxpdHktY29tcG9uZW50cy9mb3JtLWZpZWxkLXRleHRhcmVhJztcclxuaW1wb3J0IHsgVXNlclRhc2ssIFVzZXJTdWJUYXNrIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBjcmVhdGVVVUlEIH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnQnO1xyXG5pbXBvcnQgeyBVc2VyVGFza3NSZXBvIH0gZnJvbSAnLi4vLi4vcmVwb3MvdXNlci10YXNrcy1yZXBvJztcclxuaW1wb3J0IHtGb3JtYXR0ZWRNZXNzYWdlfSBmcm9tICdyZWFjdC1pbnRsJztcclxuaW1wb3J0IHtMYW5ndWFnZUNvbnRleHR9IGZyb20gJy4uL3V0aWxpdHktY29tcG9uZW50cy9MYW5ndWFnZUNvbnRleHQnO1xyXG5cclxudHlwZSBQcm9wcyA9IHtcclxuICAvLyBFZGl0IE1vZGVcclxuICBtb2RlOiAnYWRkJztcclxuICB1c2VyVGFzazogVXNlclRhc2s7XHJcbiAgY2xvc2VEaWFsb2c7XHJcbiAgdXNlclRhc2tzUmVwbzogVXNlclRhc2tzUmVwb1xyXG59IHwge1xyXG4gIG1vZGU6ICdlZGl0JztcclxuICB1c2VyVGFzazogVXNlclRhc2s7XHJcbiAgc3ViVGFzazogVXNlclN1YlRhc2s7XHJcbiAgY2xvc2VEaWFsb2c6ICgpPT52b2lkO1xyXG4gIHVzZXJUYXNrc1JlcG86IFVzZXJUYXNrc1JlcG9cclxufVxyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgZGVzY3JpcHRpb246IHN0cmluZztcclxuICB1cmw6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEFkZE9yRWRpdFN1YlRhc2sgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsU3RhdGU+IHtcclxuICBzdGF0aWMgY29udGV4dFR5cGUgPSBMYW5ndWFnZUNvbnRleHQ7XHJcbiAgY29uc3RydWN0b3IgKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgaWYgKHByb3BzLm1vZGUgPT09ICdlZGl0Jykge1xyXG4gICAgICBjb25zdCB7c3ViVGFza30gPSBwcm9wcztcclxuICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICBuYW1lOiBzdWJUYXNrLm5hbWUgfHwgJycsXHJcbiAgICAgICAgZGVzY3JpcHRpb246IHN1YlRhc2suZGVzY3JpcHRpb24gfHwgJycsXHJcbiAgICAgICAgdXJsOiBzdWJUYXNrLnVybCB8fCAnJ1xyXG4gICAgICB9O1xyXG4gICAgfSBlbHNlIHsgIFxyXG4gICAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICAgIG5hbWU6ICcnLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnJyxcclxuICAgICAgICB1cmw6ICcnXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzYXZlKCkge1xyXG4gICAgLy8gVXBkYXRlIHJlcG86XHJcbiAgICBjb25zdCB7cHJvcHN9ID0gdGhpcztcclxuICAgIGNvbnN0IHt1c2VyVGFzaywgY2xvc2VEaWFsb2csIHVzZXJUYXNrc1JlcG99ID0gcHJvcHM7XHJcbiAgICBjb25zdCB7bmFtZSwgZGVzY3JpcHRpb24sIHVybH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgaWYgKHByb3BzLm1vZGUgPT09ICdlZGl0Jykge1xyXG4gICAgICAvLyBFZGl0IGV4aXN0aW5nOlxyXG4gICAgICB1c2VyVGFza3NSZXBvLnVwZGF0ZShbdXNlclRhc2tdLCB1dCA9PiB7XHJcbiAgICAgICAgY29uc3Qge3N1YlRhc2tzfSA9IHV0O1xyXG4gICAgICAgIGlmIChzdWJUYXNrcykge1xyXG4gICAgICAgICAgdXQuc3ViVGFza3MgPSBzdWJUYXNrcy5tYXAoc3QgPT5cclxuICAgICAgICAgICAgc3QuaWQgPT09IHByb3BzLnN1YlRhc2suaWQgPyB7Li4uc3QsIG5hbWUsIGRlc2NyaXB0aW9uLCB1cmx9IDpcclxuICAgICAgICAgICAgey4uLnN0fVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gQ3JlYXRlIG5ldyB0YXNrXHJcbiAgICAgIGNvbnN0IG5ld1N1YlRhc2sgPSB7XHJcbiAgICAgICAgaWQ6IGNyZWF0ZVVVSUQoKSxcclxuICAgICAgICBuYW1lLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uLFxyXG4gICAgICAgIHVybFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gVXBkYXRlIHJlcG86XHJcbiAgICAgIHVzZXJUYXNrc1JlcG8udXBkYXRlKFt1c2VyVGFza10sIHV0ID0+IHtcclxuICAgICAgICBpZiAoIXV0LnN1YlRhc2tzKSB7XHJcbiAgICAgICAgICB1dC5zdWJUYXNrcyA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICB1dC5zdWJUYXNrcyA9IHV0LnN1YlRhc2tzLmNvbmNhdChuZXdTdWJUYXNrKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2xvc2UgZGlhbG9nXHJcbiAgICBjbG9zZURpYWxvZygpOyAgICBcclxuICB9XHJcblxyXG4gIGRlbGV0ZSgpIHtcclxuICAgIC8vIFVwZGF0ZSByZXBvOlxyXG4gICAgY29uc3QgcHJvcHMgPSB0aGlzLnByb3BzOyAgXHJcbiAgICBpZiAocHJvcHMubW9kZSAhPT0gJ2VkaXQnKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbiBvbmx5IGRlbGV0ZSBpbiBlZGl0IG1vZGVcIik7XHJcbiAgICB9XHJcbiAgICBwcm9wcy51c2VyVGFza3NSZXBvLnVwZGF0ZShbcHJvcHMudXNlclRhc2tdLCB1dCA9PiB7XHJcbiAgICAgIGlmICh1dC5zdWJUYXNrcykge1xyXG4gICAgICAgIHV0LnN1YlRhc2tzID0gdXQuc3ViVGFza3MuZmlsdGVyKHQgPT4gdC5pZCAhPT0gcHJvcHMuc3ViVGFzay5pZCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIENsb3NlIGRpYWxvZzpcclxuICAgIHByb3BzLmNsb3NlRGlhbG9nKCk7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7bmFtZSwgZGVzY3JpcHRpb24sIHVybH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgY29uc3Qge3Byb3BzfSA9IHRoaXM7XHJcbiAgICBjb25zdCBpc0VkaXRNb2RlID0gcHJvcHMubW9kZSA9PT0gJ2VkaXQnO1xyXG4gICAgY29uc3Qge2ludGx9ID0gdGhpcy5jb250ZXh0O1xyXG4gICAgcmV0dXJuIDw+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3YtaHRtbC1wb3J0bGV0IHN2LXBvcnRsZXQgc3Ytc2tpcC1zcGFjZXJcIj5cclxuICAgICAgICA8aDI+e2lzRWRpdE1vZGUgPyA8Rm9ybWF0dGVkTWVzc2FnZSBpZD1cImFkZGVkaXRzdWJ0YXNrLmVkaXRTdWJ0YXNrXCIgZGVmYXVsdE1lc3NhZ2U9J1JlZGlnZXJhIHVuZGVydXBwZ2lmdCcvPiA6IDxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwiYWRkZWRpdHN1YnRhc2suYWRkU3VidGFza1wiIGRlZmF1bHRNZXNzYWdlPSdMw6RnZyB0aWxsIHVuZGVydXBwZ2lmdCcvPiB9PC9oMj5cclxuICAgICAgICA8aHIgLz5cclxuICAgICAgICA8VGV4dElucHV0XHJcbiAgICAgICAgICBhdXRvRm9jdXNcclxuICAgICAgICAgIGxhYmVsPSB7aW50bC5mb3JtYXRNZXNzYWdlKHtpZDonYWRkZWRpdHN1YnRhc2submFtZUxhYmVsJywgZGVmYXVsdE1lc3NhZ2U6J1VuZGVydXBwZ2lmdGVucyBuYW1uJ30pfVxyXG4gICAgICAgICAgaWQ9XCJBZGRVc2VyU3ViVGFzazpuYW1lXCJcclxuICAgICAgICAgIHBsYWNlaG9sZGVyPVwiXCJcclxuICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLm5hbWV9XHJcbiAgICAgICAgICBvbkNoYW5nZT17bmFtZSA9PiB0aGlzLnNldFN0YXRlKHtuYW1lfSl9XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgPFRleHRBcmVhRm9ybUZpZWxkXHJcbiAgICAgICAgICBsYWJlbD0ge2ludGwuZm9ybWF0TWVzc2FnZSh7aWQ6J2NvbW1vbi5kZXNjcmlwdGlvbkxhYmVsJywgZGVmYXVsdE1lc3NhZ2U6J0Jlc2tyaXZuaW5nJ30pfVxyXG4gICAgICAgICAgaWQ9XCJBZGRVc2VyU3ViVGFzazpkZXNjcmlwdGlvblwiXHJcbiAgICAgICAgICByb3dzPXs3fVxyXG4gICAgICAgICAgcGxhY2Vob2xkZXI9XCJcIlxyXG4gICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUuZGVzY3JpcHRpb259XHJcbiAgICAgICAgICBvbkNoYW5nZT17ZGVzY3JpcHRpb24gPT4gdGhpcy5zZXRTdGF0ZSh7ZGVzY3JpcHRpb259KX1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICA8VGV4dElucHV0XHJcbiAgICAgICAgICBsYWJlbD0ge2ludGwuZm9ybWF0TWVzc2FnZSh7aWQ6J2NvbW1vbi5saW5rTGFiZWwnLCBkZWZhdWx0TWVzc2FnZTonTMOkbmsnfSl9XHJcbiAgICAgICAgICBpZD1cIkFkZFVzZXJTdWJUYXNrOnVybFwiXHJcbiAgICAgICAgICBwbGFjZWhvbGRlcj1cIlwiXHJcbiAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS51cmx9XHJcbiAgICAgICAgICBvbkNoYW5nZT17dXJsID0+IHRoaXMuc2V0U3RhdGUoe3VybH0pfVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgIDxiciAvPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdi1odG1sLXBvcnRsZXQgc3YtcG9ydGxldFwiPlxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHByb3BzLm1vZGUgPT09ICdlZGl0JyAmJiA8YnV0dG9uIGNsYXNzTmFtZT1cImJ0biBidG4td2FybmluZyBidG4tbGFyZ2UgcHVsbC1yaWdodFwiXHJcbiAgICAgICAgICBvbkNsaWNrPXtldiA9PiB0aGlzLmRlbGV0ZSgpfT5cclxuICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwiYWRkZWRpdHN1YnRhc2suZGVsZXRlU3VidGFza1wiIGRlZmF1bHRNZXNzYWdlPVwiVGEgYm9ydCB1bmRlcnVwcGdpZnRcIi8+PC9idXR0b24+fVxyXG4gICAgICAgIDxidXR0b25cclxuICAgICAgICAgIHRhYkluZGV4PXsxfVxyXG4gICAgICAgICAgY2xhc3NOYW1lPVwiYnRuIGJ0bi1sYXJnZSBidG4tZGVmYXVsdFwiXHJcbiAgICAgICAgICBvbkNsaWNrPXsoKT0+dGhpcy5zYXZlKCl9PjxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwiY29tbW9uLnNhdmVcIiBkZWZhdWx0TWVzc2FnZT1cIlNwYXJhXCIvPjwvYnV0dG9uPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvPlxyXG4gIH1cclxufVxyXG5cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBVc2VyVGFzaywgVXNlclN1YlRhc2sgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IFJlbmFtZWFibGVUZXh0IH0gZnJvbSAnLi4vdXRpbGl0eS1jb21wb25lbnRzL3JlbmFtZWFibGUtdGV4dCc7XHJcbmltcG9ydCB7IEwgfSBmcm9tICcuLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IGdldFRhc2tUeXBlIH0gZnJvbSAnLi9nZXQtdGFzay10eXBlJztcclxuaW1wb3J0IFJlYWN0RGF0ZVBpY2tlciwgeyBSZWFjdERhdGVQaWNrZXJQcm9wcyB9IGZyb20gJ3JlYWN0LWRhdGVwaWNrZXInO1xyXG5pbXBvcnQgJy4uLy4uL2dsb2JhbHMvbW9tZW50LXN2LWxvY2FsZSc7XHJcbmltcG9ydCB7VGV4dElucHV0fSBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvZm9ybS1maWVsZC10ZXh0LWlucHV0JztcclxuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xyXG5pbXBvcnQgeyBGb3JtRmllbGQgfSBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvZm9ybS1maWVsZCc7XHJcbmltcG9ydCB7IEFkZE9yRWRpdFN1YlRhc2sgfSBmcm9tICcuL2FkZC1vci1lZGl0LXN1Yi10YXNrJztcclxuaW1wb3J0IHsgY3JlYXRlVVVJRCB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcclxuaW1wb3J0IHVwZGF0ZSBmcm9tICdyZWFjdC1hZGRvbnMtdXBkYXRlJztcclxuaW1wb3J0IHsgVXNlclRhc2tzUmVwbyB9IGZyb20gJy4uLy4uL3JlcG9zL3VzZXItdGFza3MtcmVwbyc7XHJcbmltcG9ydCB7IFRleHRBcmVhRm9ybUZpZWxkIH0gZnJvbSAnLi4vdXRpbGl0eS1jb21wb25lbnRzL2Zvcm0tZmllbGQtdGV4dGFyZWEnO1xyXG5pbXBvcnQgeyBGb3JtYXR0ZWRNZXNzYWdlIH0gZnJvbSAncmVhY3QtaW50bCc7XHJcbmltcG9ydCB7TGFuZ3VhZ2VDb250ZXh0fSBmcm9tIFwiLi4vdXRpbGl0eS1jb21wb25lbnRzL0xhbmd1YWdlQ29udGV4dFwiXHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHVzZXJUYXNrOiBVc2VyVGFzaztcclxuICBvblVwZGF0ZTogKHVwZGF0ZXI6ICh1c2VyVGFzazogVXNlclRhc2spID0+IHZvaWQpID0+IHZvaWQ7XHJcbiAgb25EZWxldGU6ICh1c2VyVGFza0lkOiBzdHJpbmcpID0+IHZvaWQ7XHJcbiAgb3BlbkRpYWxvZzogKGRpYWxvZykgPT4gdm9pZDtcclxuICBjbG9zZURpYWxvZzogKCk9PnZvaWQ7XHJcbiAgdXNlclRhc2tzUmVwbzogVXNlclRhc2tzUmVwb1xyXG59XHJcblxyXG5pbnRlcmZhY2UgU3RhdGUge1xyXG4gIHVzZXJUYXNrOiBVc2VyVGFzaztcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XHJcbiAgZGVhZGxpbmU/OiBzdHJpbmc7XHJcbiAgdXJsOiBzdHJpbmc7XHJcbiAgc3ViVGFza3M/OiBVc2VyU3ViVGFza1tdO1xyXG4gIHNob3dDYWxlbmRhcj86IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBFZGl0VXNlclRhc2sgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsU3RhdGU+IHtcclxuICBkYXRlUGlja2VyOiBhbnk7XHJcbiAgc3RhdGljIGNvbnRleHRUeXBlID0gTGFuZ3VhZ2VDb250ZXh0O1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIHVzZXJUYXNrOiBwcm9wcy51c2VyVGFzayxcclxuICAgICAgbmFtZTogcHJvcHMudXNlclRhc2submFtZSxcclxuICAgICAgZGVzY3JpcHRpb246IHByb3BzLnVzZXJUYXNrLmRlc2NyaXB0aW9uLFxyXG4gICAgICB1cmw6IHByb3BzLnVzZXJUYXNrLnVybCxcclxuICAgICAgZGVhZGxpbmU6IHByb3BzLnVzZXJUYXNrLmRlYWRsaW5lLFxyXG4gICAgICBzdWJUYXNrczogcHJvcHMudXNlclRhc2suc3ViVGFza3NcclxuICAgIH1cclxuICAgIHRoaXMub25Vc2VyVGFza3NDaGFuZ2VkID0gdGhpcy5vblVzZXJUYXNrc0NoYW5nZWQuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gICAgdGhpcy5wcm9wcy51c2VyVGFza3NSZXBvLnN1YnNjcmliZSh0aGlzLm9uVXNlclRhc2tzQ2hhbmdlZCk7XHJcbiAgfVxyXG5cclxuICBvblVzZXJUYXNrc0NoYW5nZWQodXNlclRhc2tzOiBVc2VyVGFza1tdKSB7XHJcbiAgICBjb25zdCBteVVzZXJUYXNrID0gdXNlclRhc2tzLmZpbmQodXQgPT4gdXQuaWQgPT09IHRoaXMucHJvcHMudXNlclRhc2suaWQpO1xyXG4gICAgaWYgKCFteVVzZXJUYXNrKSB7XHJcbiAgICAgIHRoaXMucHJvcHMuY2xvc2VEaWFsb2coKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIHVzZXJUYXNrOiBteVVzZXJUYXNrLFxyXG4gICAgICBzdWJUYXNrczogbXlVc2VyVGFzay5zdWJUYXNrc1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcclxuICAgIHRoaXMucHJvcHMudXNlclRhc2tzUmVwby51bnN1YnNjcmliZSh0aGlzLm9uVXNlclRhc2tzQ2hhbmdlZCk7XHJcbiAgfVxyXG5cclxuICBpc01vZGlmaWVkKCkge1xyXG4gICAgLy8gRG9uJ3QgY291bnQgc3VidGFzayBjaGFuZ2VzISBUaGV5IGxpdmUgdGhlaXIgb3duIGxpZmUgYW5kIGlzIG1haW50YWluZWRcclxuICAgIC8vIGluIGFkZC1vci1lZGl0LXN1Yi10YXNrLnRzeC4gUmVhc29uOiBVc2VyIHdvdWxkIGV4cGVjdCBhZGRlZCAvZWRpdGVkIHN1YnRhc2tzXHJcbiAgICAvLyB0byBiZSBwZXJzaXN0ZWQgcmlnaHQgYXdheS4gTWF5IGNsaWNrIGF3YXkgdGhpcyBkaWFsb2cuXHJcbiAgICAvLyBBbHNvIHJlYXNvbjogQ2FuIGludm9rZSB0aGF0IGRpYWxvZyBieSBpdHNlbGYgZnJvbSBvdGhlciBjb21wb25lbnRzLiBGcm9tIFdlZWtQbGFubmVyXHJcbiAgICAvLyB3aGVuIGNsaWNraW5nIHRoZSBzdWJ0YXNrIGZvciBleGFtcGxlIVxyXG5cclxuICAgIGNvbnN0IHtkZWFkbGluZSwgZGVzY3JpcHRpb24sIG5hbWUsIHVybCwgdXNlclRhc2t9ID0gdGhpcy5zdGF0ZTtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIGRlYWRsaW5lICE9PSB1c2VyVGFzay5kZWFkbGluZSB8fFxyXG4gICAgICBkZXNjcmlwdGlvbiAhPT0gdXNlclRhc2suZGVzY3JpcHRpb24gfHxcclxuICAgICAgbmFtZSAhPT0gdXNlclRhc2submFtZSB8fFxyXG4gICAgICB1cmwgIT09IHVzZXJUYXNrLnVybCk7XHJcbiAgfVxyXG5cclxuICBhZGRTdWJUYXNrKCk6IGFueSB7XHJcbiAgICB0aGlzLnByb3BzLm9wZW5EaWFsb2coPEFkZE9yRWRpdFN1YlRhc2tcclxuICAgICAgbW9kZT1cImFkZFwiXHJcbiAgICAgIHVzZXJUYXNrPXt0aGlzLnN0YXRlLnVzZXJUYXNrfVxyXG4gICAgICBjbG9zZURpYWxvZz17dGhpcy5wcm9wcy5jbG9zZURpYWxvZ31cclxuICAgICAgdXNlclRhc2tzUmVwbz17dGhpcy5wcm9wcy51c2VyVGFza3NSZXBvfVxyXG4gICAgLz4pO1xyXG4gIH1cclxuXHJcbiAgZWRpdFN1YlRhc2soc3ViVGFzazogVXNlclN1YlRhc2spIHtcclxuICAgIHRoaXMucHJvcHMub3BlbkRpYWxvZyg8QWRkT3JFZGl0U3ViVGFza1xyXG4gICAgICBtb2RlPVwiZWRpdFwiXHJcbiAgICAgIHN1YlRhc2s9e3N1YlRhc2t9XHJcbiAgICAgIHVzZXJUYXNrPXt0aGlzLnN0YXRlLnVzZXJUYXNrfVxyXG4gICAgICBjbG9zZURpYWxvZz17dGhpcy5wcm9wcy5jbG9zZURpYWxvZ31cclxuICAgICAgdXNlclRhc2tzUmVwbz17dGhpcy5wcm9wcy51c2VyVGFza3NSZXBvfVxyXG4gICAgLz4pO1xyXG4gIH1cclxuICBcclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7IG5hbWUsIGRlc2NyaXB0aW9uLCB1cmwsIGRlYWRsaW5lLCBzdWJUYXNrcywgc2hvd0NhbGVuZGFyLCB1c2VyVGFzayB9ID0gdGhpcy5zdGF0ZTtcclxuICAgIGNvbnN0IHsgaWQsIGNvdXJzZU5hbWUgfSA9IHVzZXJUYXNrO1xyXG4gICAgY29uc3QgeyBvblVwZGF0ZSwgb25EZWxldGUgfSA9IHRoaXMucHJvcHM7XHJcbiAgICBjb25zdCBpc01vZGlmaWVkID0gdGhpcy5pc01vZGlmaWVkKCk7XHJcblxyXG4gICAgY29uc3QgdGFza1R5cGUgPSBnZXRUYXNrVHlwZSh1c2VyVGFzayk7XHJcbiAgICBjb25zdCBpc0N1c3RvbVRhc2sgPSB0YXNrVHlwZSA9PT0gJ2N1c3RvbVRhc2snO1xyXG4gICAgY29uc3QgZXhwaXJlZCA9IG1vbWVudCh1c2VyVGFzay5kZWFkbGluZSkgPCBtb21lbnQoKTtcclxuICAgIGNvbnN0IHtpbnRsfSA9IHRoaXMuY29udGV4dDtcclxuXHJcbiAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJlZGl0VGFza0RpYWxvZyBzdi1odG1sLXBvcnRsZXQgc3YtcG9ydGxldCBzdi1za2lwLXNwYWNlclwiPlxyXG4gICAgICA8aDI+e2lzQ3VzdG9tVGFzayA/IFxyXG4gICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwidGFzay5lZGl0V29ya0dvYWxzXCIgZGVmYXVsdE1lc3NhZ2U9J1JlZGlnZXJhIGFyYmV0c23DpWwnLz4gOiBcclxuICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZSBpZD1cInRhc2suZWRpdFRhc2tcIiBkZWZhdWx0TWVzc2FnZT0nUmVkaWdlcmEgdXBwZ2lmdCcvPn1cclxuICAgICAgPC9oMj5cclxuICAgICAgPGhyIC8+XHJcbiAgICAgIDxUZXh0SW5wdXRcclxuICAgICAgICBhdXRvRm9jdXNcclxuICAgICAgICBsYWJlbD17aXNDdXN0b21UYXNrID8gaW50bC5mb3JtYXRNZXNzYWdlKHtpZDogJ3Rhc2sudGFyZ2V0TmFtZUxhYmVsJywgZGVmYXVsdE1lc3NhZ2U6ICdBcmJldHNtw6VsZXRzIG5hbW4nfSkgIDogaW50bC5mb3JtYXRNZXNzYWdlKHtpZDogJ3Rhc2sudGFza05hbWVMYWJlbCcsIGRlZmF1bHRNZXNzYWdlOiAnVXBwZ2lmdGVucyBuYW1uJ30pfVxyXG4gICAgICAgIGlkPVwiRWRpdFVzZXJUYXNrOm5hbWVcIlxyXG4gICAgICAgIHBsYWNlaG9sZGVyPXtpc0N1c3RvbVRhc2sgPyBpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOiAndGFzay53aGF0U2hvdWxkWW91RG9QbGhkJywgZGVmYXVsdE1lc3NhZ2U6ICdWYWQgc2thIGR1IGfDtnJhPyd9KSA6IGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6ICd0YXNrLmVudGVyVGFza05hbWVQbGhkJywgZGVmYXVsdE1lc3NhZ2U6ICdBbmdlIHVwcGdpZnRlbnMgbmFtbi4uLid9KSB9XHJcbiAgICAgICAgdmFsdWU9e25hbWV9XHJcbiAgICAgICAgb25DaGFuZ2U9e25hbWUgPT4gdGhpcy5zZXRTdGF0ZSh7bmFtZX0pfSAvPlxyXG4gICAgICBcclxuICAgICAge2lzQ3VzdG9tVGFzayAmJiA8PlxyXG4gICAgICAgIDxUZXh0QXJlYUZvcm1GaWVsZFxyXG4gICAgICAgICAgcm93cz17NX1cclxuICAgICAgICAgIGxhYmVsPSB7aW50bC5mb3JtYXRNZXNzYWdlKHtpZDogJ2NvbW1vbi5kZXNjcmlwdGlvbkxhYmVsJywgZGVmYXVsdE1lc3NhZ2U6ICdCZXNrcml2bmluZyd9KX1cclxuICAgICAgICAgIGlkPVwiRWRpdFVzZXJUYXNrOmRlc2NyaXB0aW9uXCJcclxuICAgICAgICAgIHBsYWNlaG9sZGVyPXtpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOiAnY29tbW9uLmFkZERlc2NyaXB0aW9uUGxoZCcsIGRlZmF1bHRNZXNzYWdlOiAnTMOkZ2cgdGlsbCBlbiBiZXNrcml2bmluZy4uLid9KX1cclxuICAgICAgICAgIHZhbHVlPXtkZXNjcmlwdGlvbn1cclxuICAgICAgICAgIG9uQ2hhbmdlPXtkZXNjcmlwdGlvbj0+dGhpcy5zZXRTdGF0ZSh7ZGVzY3JpcHRpb259KX0gLz5cclxuXHJcbiAgICAgICAgPFRleHRJbnB1dFxyXG4gICAgICAgICAgbGFiZWw9e2ludGwuZm9ybWF0TWVzc2FnZSh7aWQ6J2NvbW1vbi5saW5rTGFiZWwnLCBkZWZhdWx0TWVzc2FnZTpcIkzDpG5rXCJ9KX1cclxuICAgICAgICAgIGlkPVwiRWR1dFVzZXJUYXNrOnVybFwiXHJcbiAgICAgICAgICBwbGFjZWhvbGRlcj1cImh0dHAocyk6Ly8uLi5cIlxyXG4gICAgICAgICAgdmFsdWU9e3VybH1cclxuICAgICAgICAgIG9uQ2hhbmdlPXt1cmwgPT4gdGhpcy5zZXRTdGF0ZSh7dXJsfSl9ID5cclxuXHJcbiAgICAgICAgPC9UZXh0SW5wdXQ+PC8+fVxyXG5cclxuICAgICAgICA8Rm9ybUZpZWxkIGxhYmVsPXtpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOiAndGFzay5zZXREZWFkbGluZScsIGRlZmF1bHRNZXNzYWdlOiAnQW5nZSBkZWFkbGluZSd9KX0+XHJcbiAgICAgICAgICB7KGRlYWRsaW5lIHx8IHNob3dDYWxlbmRhcikgP1xyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWxcIj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgICAgICAgPFJlYWN0RGF0ZVBpY2tlciByZWY9e2VsZW0gPT4gdGhpcy5kYXRlUGlja2VyID0gZWxlbX1cclxuICAgICAgICAgICAgICAgICAgaWQ9XCJFZGl0VXNlclRhc2s6ZGVhZGxpbmVcIlxyXG4gICAgICAgICAgICAgICAgICBuZXh0TW9udGhCdXR0b25MYWJlbD1cIlwiIFxyXG4gICAgICAgICAgICAgICAgICBwcmV2aW91c01vbnRoQnV0dG9uTGFiZWw9XCJcIiBcclxuICAgICAgICAgICAgICAgICAgc2hvd1dlZWtOdW1iZXJzPXt0cnVlfVxyXG4gICAgICAgICAgICAgICAgICBzZWxlY3RlZD17ZGVhZGxpbmUgJiYgbW9tZW50KGRlYWRsaW5lKS50b0RhdGUoKX1cclxuICAgICAgICAgICAgICAgICAgYXV0b0ZvY3VzPXtzaG93Q2FsZW5kYXJ9XHJcbiAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQ9XCJ5eXl5LU1NLWRkXCJcclxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtleHBpcmVkID8gXCJleHBpcmVkXCIgOiB1bmRlZmluZWR9XHJcbiAgICAgICAgICAgICAgICAgIGxvY2FsZT17aW50bC5sb2NhbGV9XHJcbiAgICAgICAgICAgICAgICAgIHBvcHBlclBsYWNlbWVudD17aXNDdXN0b21UYXNrID8gXCJ0b3Atc3RhcnRcIiA6IFwiYm90dG9tLXN0YXJ0XCJ9XHJcbiAgICAgICAgICAgICAgICAgIG9uQmx1cj17KCk9PnRoaXMuc2V0U3RhdGUoe3Nob3dDYWxlbmRhcjogZmFsc2V9KX1cclxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3ZhbHVlPT57XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICBkZWFkbGluZTogdmFsdWUgJiYgbW9tZW50KHZhbHVlKS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgc2hvd0NhbGVuZGFyOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgICAgICAgPGEgY2xhc3NOYW1lPVwiZGVsZXRlRGF0ZVwiIGhyZWY9XCIjXCIgdGl0bGU9e2ludGwuZm9ybWF0TWVzc2FnZSh7aWQ6ICd0YXNrLnJlbW92ZURlYWRsaW5lJywgZGVmYXVsdE1lc3NhZ2U6ICdUYSBib3J0IGRlYWRsaW5lJ30pfSBvbkNsaWNrPXtldj0+e1xyXG4gICAgICAgICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtkZWFkbGluZTogbnVsbCwgc2hvd0NhbGVuZGFyOiBmYWxzZX0pO1xyXG4gICAgICAgICAgICAgICAgfX0+PC9hPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj4gOlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRvcFwiIHJlZj17KCk9Pnt0aGlzLmRhdGVQaWNrZXIgPSBudWxsfX0+XHJcbiAgICAgICAgICAgICAgICA8YSBjbGFzc05hbWU9XCJidG5cIiBvbkNsaWNrPXtldiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhdGVQaWNrZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGVQaWNrZXIuc2V0T3Blbih0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBzaG93Q2FsZW5kYXI6IHRydWVcclxuICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9fT5cclxuICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLWNhbGVuZGFyXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPjxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwidGFzay5zZXREZWFkbGluZUxhYmVsXCIgZGVmYXVsdE1lc3NhZ2U9XCJBbmdlIGRlYWRsaW5lLi4uXCIvPlxyXG4gICAgICAgICAgICAgIDwvYT4gICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA8L2Rpdj59XHJcbiAgICAgICAgPC9Gb3JtRmllbGQ+XHJcbiAgICAgIDxGb3JtRmllbGQgbGFiZWw9e2ludGwuZm9ybWF0TWVzc2FnZSh7aWQ6ICd0YXNrLnN1YlRhc2tzJywgZGVmYXVsdE1lc3NhZ2U6ICdVbmRlcnVwcGdpZnRlcid9KX0gPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGVhcm5pbmdHb2FsVGFza3NcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGFza0NvbnRhaW5lclwiPlxyXG5cclxuICAgICAgICAgICAgICB7c3ViVGFza3MgJiYgc3ViVGFza3MubWFwKHN1YlRhc2sgPT4gPGRpdiBrZXk9e3N1YlRhc2suaWR9IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWxcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+PGFcclxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCk9PnRoaXMuZWRpdFN1YlRhc2soc3ViVGFzayl9XHJcbiAgICAgICAgICAgICAgICAgIGhyZWY9XCIjXCI+e3N1YlRhc2submFtZX08L2E+PC9kaXY+XHJcbiAgICAgICAgICAgICAgPC9kaXY+KX1cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbFwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0b3BcIj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBpZD1cIkVkaXRVc2VyVGFzazphZGRTdWJUYXNrXCIgY2xhc3NOYW1lPVwiYnRuXCJcclxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKT0+dGhpcy5hZGRTdWJUYXNrKCl9PlxyXG4gICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLXBsdXNcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+IDxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwidGFzay5hZGRTdWJ0YXNrXCIgZGVmYXVsdE1lc3NhZ2U9XCJMw6RnZyB0aWxsIHVuZGVydXBwZ2lmdFwiLz5cclxuICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9Gb3JtRmllbGQ+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZGl2aWRlciBsYXJnZVwiIC8+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbFwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEJ1dHRvbiB0b3BcIj5cclxuICAgICAgICAgIDxidXR0b24gdGFiSW5kZXg9ezF9XHJcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ0biBidG4tZGVmYXVsdFwiXHJcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpPT57XHJcbiAgICAgICAgICAgICAgaXNNb2RpZmllZCA/IG9uVXBkYXRlKHVzZXJUYXNrID0+IHtcclxuICAgICAgICAgICAgICAgIHVzZXJUYXNrLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgICAgICAgICAgdXNlclRhc2suZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcclxuICAgICAgICAgICAgICAgIHVzZXJUYXNrLnVybCA9IHVybDtcclxuICAgICAgICAgICAgICAgIHVzZXJUYXNrLmRlYWRsaW5lID0gZGVhZGxpbmU7XHJcbiAgICAgICAgICAgICAgfSkgOiB0aGlzLnByb3BzLmNsb3NlRGlhbG9nKCk7XHJcbiAgICAgICAgICAgIH19PjxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwiY29tbW9uLnNhdmVcIiBkZWZhdWx0TWVzc2FnZT1cIlNwYXJhXCIvPiBcclxuICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsQnV0dG9uIHRvcFwiPlxyXG4gICAgICAgICAgPGJ1dHRvbiB0YWJJbmRleD17MX1cclxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnRuXCJcclxuICAgICAgICAgICAgb25DbGljaz17KCk9PntcclxuICAgICAgICAgICAgICB0aGlzLnByb3BzLmNsb3NlRGlhbG9nKCk7XHJcbiAgICAgICAgICAgIH19PjxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwiY29tbW9uLmNhbmNlbFwiIGRlZmF1bHRNZXNzYWdlPVwiQXZicnl0XCIvPjwvYnV0dG9uPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29uZmlybSB0b3AgcHVsbC1yaWdodFwiPlxyXG4gICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICB0YWJJbmRleD17MX1cclxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnRuIGJ0bi13YXJuaW5nXCJcclxuICAgICAgICAgICAgb25DbGljaz17KCk9PntcclxuICAgICAgICAgICAgICBvbkRlbGV0ZShpZCk7XHJcbiAgICAgICAgICAgIH19Pntpc0N1c3RvbVRhc2sgP1xyXG4gICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwidGFzay5yZW1vdmVXb3JrR29hbHNcIiBkZWZhdWx0TWVzc2FnZT1cIlRhIGJvcnQgYXJiZXRzbcOlbFwiLz4gOlxyXG4gICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwidGFzay5yZW1vdmVUaGlzVGFza1wiIGRlZmF1bHRNZXNzYWdlPVwiVGEgYm9ydCBkZW4gaMOkciB1cHBnaWZ0ZW5cIi8+XHJcbiAgICAgICAgICB9PC9idXR0b24+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICBcclxuICAgICAgey8qPGRpdiBjbGFzc05hbWU9XCJidG4gYnRuLXdhcm5pbmcgYnRuLWxhcmdlIHB1bGwtcmlnaHRcIiBvbkNsaWNrPXtldiA9PiBvbkRlbGV0ZShpZCl9PlxyXG4gICAgICAgIHtMYFRhIGJvcnQgYXJiZXRzbcOlbGB9PC9kaXY+XHJcbiAgICAgIHtpc01vZGlmaWVkICYmXHJcbiAgICAgICAgPGRpdlxyXG4gICAgICAgICAgY2xhc3NOYW1lPVwiYnRuIGJ0bi1sYXJnZSBidG4tZGVmYXVsdFwiXHJcbiAgICAgICAgICB0YWJJbmRleD17MH1cclxuICAgICAgICAgIG9uQ2xpY2s9eygpPT5vblVwZGF0ZSh1c2VyVGFzayA9PiB7XHJcbiAgICAgICAgICAgIHVzZXJUYXNrLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgICAgICB1c2VyVGFzay5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xyXG4gICAgICAgICAgICB1c2VyVGFzay51cmwgPSB1cmw7XHJcbiAgICAgICAgICB9KX0+IFNwYXJhPC9kaXY+fSovfVxyXG4gICAgPC9kaXY+XHJcbiAgfVxyXG59XHJcblxyXG4iLCJpbXBvcnQgeyBVc2VyVGFzayB9IGZyb20gXCJrZWRiYWNrZW5kL21vZGVsc1wiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFRhc2tUeXBlICh1c2VyVGFzazogVXNlclRhc2spIDogJ2NvdXJzZUJ1aWxkZXJUYXNrJyB8ICdzaXRlVmlzaW9uVGFzaycgfCAnc3ViamVjdFBsYW5uZXJUYXNrJyB8ICdjdXN0b21UYXNrJyB7XHJcbiAgcmV0dXJuIHVzZXJUYXNrLmNvdXJzZSAmJiB1c2VyVGFzay50YXNrICYmIHVzZXJUYXNrLmNvdXJzZS5sZW5ndGggPiAwICYmIHVzZXJUYXNrLnRhc2subGVuZ3RoID4gMCA/XHJcbiAgICAnY291cnNlQnVpbGRlclRhc2snIDpcclxuICAgIHVzZXJUYXNrLnNpdGVWaXNpb25QYWdlSWQgP1xyXG4gICAgICAnc2l0ZVZpc2lvblRhc2snIDpcclxuICAgICAgICB1c2VyVGFzay5jb3Vyc2VJbmZvID9cclxuICAgICAgICAgICdzdWJqZWN0UGxhbm5lclRhc2snIDpcclxuICAgICAgICAgICdjdXN0b21UYXNrJztcclxufVxyXG4iLCJpbXBvcnQgeyBVc2VyVGFzayB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgVXNlclRhc2tzQm94UHJvcHMgfSBmcm9tICcuL3VzZXItdGFza3MtYm94JztcclxuaW1wb3J0IHsgYXJyYXlUb01hcCwgYXJyYXlUb0xvb2t1cCwgY29tcGFyZVByb3AsIEwgfSBmcm9tIFwiLi4vLi4vdXRpbHMvdXRpbHNcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVmlydHVhbExlYXJuaW5nR29hbCB7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIGFsbFRhc2tzOiBVc2VyVGFza1tdO1xyXG4gIHN0ZXA/OiBudW1iZXI7XHJcbiAgdXJsPzogc3RyaW5nO1xyXG4gIHRhc2tzOiBVc2VyVGFza1tdO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVmaW5lKHRhc2tzOiBVc2VyVGFza1tdKSB7XHJcbiAgY29uc3QgcmVzdWx0ID0gW10gYXMgUGFydGlhbDxVc2VyVGFza3NCb3hQcm9wcz5bXTtcclxuICBjb25zdCBtYXBwZXIgPSB7fSBhcyB7IFtuYW1lOiBzdHJpbmddOiBVc2VyVGFza3NCb3hQcm9wcyB9O1xyXG4gIGNvbnN0IHRhc2tzUGVyQ291cnNlID0gYXJyYXlUb0xvb2t1cCh0YXNrcywgdCA9PiB0LmNvdXJzZU5hbWUgfHwgJycpO1xyXG4gIGZvciAoY29uc3QgY291cnNlTmFtZSBvZiBPYmplY3Qua2V5cyh0YXNrc1BlckNvdXJzZSkuc29ydCgpLmZpbHRlcih4ID0+IHgpLmNvbmNhdCh0YXNrc1BlckNvdXJzZVsnJ10gP1xyXG4gICAgWycnXSA6IFtdKSkge1xyXG4gICAgY29uc3QgY291cnNlVGFza3MgPSB0YXNrc1BlckNvdXJzZVtjb3Vyc2VOYW1lXSB8fCB0YXNrc1BlckNvdXJzZVsnJ107XHJcbiAgICBjb25zdCB0YXNrc1BlckxlYXJuaW5nR29hbCA9IGFycmF5VG9Mb29rdXAoY291cnNlVGFza3MsIHQgPT4gdC5sZWFybmluZ0dvYWwpO1xyXG4gICAgY29uc3QgcmVzdWx0TGVhcm5pbmdHb2FsczogVmlydHVhbExlYXJuaW5nR29hbFtdID0gW107XHJcbiAgICBmb3IgKGNvbnN0IGxlYXJuaW5nR29hbCBvZiBPYmplY3Qua2V5cyh0YXNrc1BlckxlYXJuaW5nR29hbCkpIHtcclxuICAgICAgY29uc3QgbGdUYXNrcyA9IHRhc2tzUGVyTGVhcm5pbmdHb2FsW2xlYXJuaW5nR29hbF0uc29ydChjb21wYXJlUHJvcChcImRhdGVUaW1lXCIpKTtcclxuICAgICAgY29uc3QgbGVhcm5pbmdHb2FsVGFzayA9IGxnVGFza3NcclxuICAgICAgICAuZmlsdGVyKHQgPT4gdC5uYW1lID09IG51bGwpIC8vIElmIG5hbWUgaXMgdW5kZWZpbmVkIG9yIG51bGwsIHRoaXMgcmVwcmVzZW50cyBhIGxlYXJuaW5nIGdvYWxcclxuICAgICAgICBbMF07XHJcbiAgICAgIGNvbnN0IHVybCA9IGxlYXJuaW5nR29hbFRhc2sgJiYgbGVhcm5pbmdHb2FsVGFzay51cmw7XHJcbiAgICAgIHJlc3VsdExlYXJuaW5nR29hbHMucHVzaCh7XHJcbiAgICAgICAgbmFtZTogbGVhcm5pbmdHb2FsLFxyXG4gICAgICAgIGFsbFRhc2tzOiBsZ1Rhc2tzLFxyXG4gICAgICAgIHVybCxcclxuICAgICAgICBzdGVwOiBsZ1Rhc2tzLm1hcCh0ID0+IHQuc3RlcCkuZmlsdGVyKHN0ZXAgPT4gc3RlcClbMF0sXHJcbiAgICAgICAgdGFza3M6IGxnVGFza3MuZmlsdGVyKHQgPT4gdC5uYW1lKVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIHJlc3VsdC5wdXNoKHtcclxuICAgICAgY291cnNlTmFtZSxcclxuICAgICAgbGVhcm5pbmdHb2FsczogcmVzdWx0TGVhcm5pbmdHb2Fsc1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBVc2VyVGFzaywgVGFzaywgVXNlclN1YlRhc2sgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IE9wZW5DbG9zZUJveCB9IGZyb20gJy4uL3V0aWxpdHktY29tcG9uZW50cy9vcGVuLWNsb3NlLWJveCc7XHJcbmltcG9ydCB7IEwgfSBmcm9tICcuLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IHByZXNlcnZlSW1wZXJzb25hdGlvblF1ZXJ5IH0gZnJvbSAnLi4vLi4vYWNjZXNzLWNvbnRyb2wnO1xyXG5pbXBvcnQgeyBjb3Vyc2VOYW1lVG9Dc3NDbGFzcyB9IGZyb20gJy4uL2NhbGVuZGFyL2NvdXJzZS1uYW1lLXRvLWNzcy1jbGFzcyc7XHJcbmltcG9ydCB7IGdldFRhc2tUeXBlIH0gZnJvbSAnLi9nZXQtdGFzay10eXBlJztcclxuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xyXG5pbXBvcnQgeyBWaXJ0dWFsTGVhcm5pbmdHb2FsIH0gZnJvbSAnLi9yZWZpbmVyJztcclxuaW1wb3J0IHsgRmVhdHVyZXMgfSBmcm9tICcuLi8uLi9mZWF0dXJlcyc7XHJcbmltcG9ydCBjZmcgZnJvbSAnLi4vLi4vZ2xvYmFscy9LRUQuY2ZnJztcclxuaW1wb3J0IHtGb3JtYXR0ZWRNZXNzYWdlfSBmcm9tICdyZWFjdC1pbnRsJztcclxuaW1wb3J0IHtMYW5ndWFnZUNvbnRleHR9IGZyb20gJy4uL3V0aWxpdHktY29tcG9uZW50cy9MYW5ndWFnZUNvbnRleHQnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBVc2VyVGFza3NCb3hQcm9wcyB7XHJcbiAgY291cnNlTmFtZTogc3RyaW5nO1xyXG4gIGxlYXJuaW5nR29hbHM6IFZpcnR1YWxMZWFybmluZ0dvYWxbXSxcclxuICB2aWV3Q291cnNlVXJsOiBzdHJpbmc7XHJcbiAgb3BlbkNvdXJzZXM/OiB7IFtwYXRoOiBzdHJpbmddOiBib29sZWFuIH07XHJcbiAgc2V0SXNPcGVuPzogKGNvdXJzZU5hbWU6IHN0cmluZywgaXNPcGVuOiBib29sZWFuKSA9PiB2b2lkO1xyXG4gIHNldFRhc2tEb25lPzogKHRhc2s6IFVzZXJUYXNrLCBkb25lOiBib29sZWFuKSA9PiB2b2lkO1xyXG4gIHNldFN1YlRhc2tEb25lOiAodGFzazogVXNlclRhc2ssIHN1YlRhc2s6IFVzZXJTdWJUYXNrLCBkb25lOiBib29sZWFuKSA9PiB2b2lkO1xyXG4gIGFkZE93blRhc2s/OiAoY291cnNlTmFtZTogc3RyaW5nLCBsZWFybmluZ0dvYWxOYW1lOiBzdHJpbmcpID0+IHZvaWQ7XHJcbiAgZWRpdFRhc2s6ICh0YXNrOiBVc2VyVGFzaykgPT4gdm9pZDtcclxuICBlZGl0U3ViVGFzazogKHRhc2s6IFVzZXJUYXNrLCBzdWJUYXNrOiBVc2VyU3ViVGFzaykgPT4gdm9pZDtcclxuICByZW1vdmVMZWFybmluZ0dvYWw6IChsZzogVmlydHVhbExlYXJuaW5nR29hbCk9PnZvaWQ7XHJcbiAgZGlzcGxheVByb2dyZXNzOiBib29sZWFuO1xyXG4gIHByb2dyZXNzRGF0YToge2NvbXBsZXRlZE51bWJlck9mVGFza3M6IG51bWJlciwgbnVtYmVyT2ZUYXNrczogbnVtYmVyfTtcclxufTtcclxuXHJcbmV4cG9ydCBjbGFzcyBVc2VyVGFza3NCb3ggZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8VXNlclRhc2tzQm94UHJvcHM+IHtcclxuICBzdGF0aWMgY29udGV4dFR5cGUgPSBMYW5ndWFnZUNvbnRleHQ7XHJcbiAgY29uc3RydWN0b3IocHJvcHM6IFVzZXJUYXNrc0JveFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgfVxyXG5cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3Qge1xyXG4gICAgICBjb3Vyc2VOYW1lLFxyXG4gICAgICBsZWFybmluZ0dvYWxzLCBcclxuICAgICAgcHJvZ3Jlc3NEYXRhLFxyXG4gICAgICBkaXNwbGF5UHJvZ3Jlc3NcclxuICAgIH0gPSB0aGlzLnByb3BzO1xyXG4gICAgY29uc3QgaXNPcGVuID0gISF0aGlzLnByb3BzLm9wZW5Db3Vyc2VzW2NvdXJzZU5hbWVdO1xyXG4gICAgY29uc3QgZmVhdHVyZXMgPSBuZXcgRmVhdHVyZXMoKTtcclxuICAgIGNvbnN0IHtpbnRsfSA9IHRoaXMuY29udGV4dDtcclxuXHJcbiAgICByZXR1cm4gPE9wZW5DbG9zZUJveFxyXG4gIHRpdGxlPXs8aDU+e2NvdXJzZU5hbWUgfHwgPEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJ1c2VyVGFza3MuZ29hbHNcIiAgZGVmYXVsdE1lc3NhZ2U9XCJFZ25hIGzDpHJhbmRlbcOlbFwiLz4gfTwvaDU+fVxyXG4gICAgICBoZWFkZXJPcGVuPXtpc09wZW59XHJcbiAgICAgIGNsYXNzTmFtZT17Y291cnNlTmFtZSAmJiBjb3Vyc2VOYW1lVG9Dc3NDbGFzcygnd3AtY291cnNlLScsIGNvdXJzZU5hbWUpfVxyXG4gICAgICBvbk9wZW5DbG9zZT17YmVjYW1lT3BlbiA9PiB0aGlzLnByb3BzLnNldElzT3Blbihjb3Vyc2VOYW1lLCBiZWNhbWVPcGVuKX1cclxuICAgICAgZGlzcGxheVByb2dyZXNzPSB7ZGlzcGxheVByb2dyZXNzfSAgICAgICBcclxuICAgICAgcHJvZ3Jlc3NEYXRhID0ge3Byb2dyZXNzRGF0YX1cclxuICAgICAgPlxyXG4gICAgICB7bGVhcm5pbmdHb2Fscy5tYXAobGcgPT5cclxuICAgICAgICA8ZGl2IGtleT17bGcubmFtZX0gY2xhc3NOYW1lPVwibGVhcm5pbmdHb2FsQ29udGFpbmVyXCI+XHJcbiAgICAgICAgICB7bGcuc3RlcCAmJiA8ZGl2IGNsYXNzTmFtZT1cInN0ZXBJbmRpY2F0b3JcIj57bGcuc3RlcH08L2Rpdj59XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWxcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsZWFybmluZ0dvYWxUZXh0IGhvcml6b250YWxJdGVtIHRvcFwiPntsZy5uYW1lfTwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtXCI+XHJcbiAgICAgICAgICAgICAgJm5ic3A7PGFcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInRyYXNoXCJcclxuICAgICAgICAgICAgICAgIGhyZWY9XCIjXCJcclxuICAgICAgICAgICAgICAgICB0aXRsZT17aW50bC5mb3JtYXRNZXNzYWdlKHtpZDondXNlclRhc2tzLmRlbGV0ZUxlYXJuaW5nR29hbCcsIGRlZmF1bHRNZXNzYWdlOiAnVGEgYm9ydCBsw6RyYW5kZW3DpWxldCBvY2ggZGVzcyB1cHBnaWZ0ZXInfSl9XHJcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtldj0+e1xyXG4gICAgICAgICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLnJlbW92ZUxlYXJuaW5nR29hbChsZyk7XHJcbiAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLXRyYXNoXCIgLz5cclxuICAgICAgICAgICAgICA8L2E+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsZWFybmluZ0dvYWxUYXNrc1wiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRhc2tDb250YWluZXJcIj5cclxuICAgICAgICAgICAgICB7bGcudGFza3MubWFwKHVzZXJUYXNrID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlzV29ya2luZyA9IHVzZXJUYXNrLiRtZXRhID09PSAnYWRkaW5nJyB8fCB1c2VyVGFzay4kbWV0YSA9PT0gJ2RlbGV0aW5nJyB8fCB1c2VyVGFzay4kbWV0YSA9PT0gJ3VwZGF0aW5nJztcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB0YXNrVHlwZSA9IGdldFRhc2tUeXBlKHVzZXJUYXNrKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGV4cGlyZWQgPSBtb21lbnQodXNlclRhc2suZGVhZGxpbmUpLnN0YXJ0T2YoJ2RheScpIDwgbW9tZW50KCkuc3RhcnRPZignZGF5Jyk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDxkaXYga2V5PXt1c2VyVGFzay5pZH0gc3R5bGU9e2lzV29ya2luZyA/IHsgb3BhY2l0eTogMC41IH0gOiB7fX0+XHJcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17XCJjaGVja0JveFwiICsgKHVzZXJUYXNrLmRvbmUgPyBcIiBjaGVja2VkXCIgOiBcIlwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17ZXYgPT4gIWlzV29ya2luZyAmJiB0aGlzLnByb3BzLnNldFRhc2tEb25lKHVzZXJUYXNrLCAhdXNlclRhc2suZG9uZSl9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIHt0YXNrVHlwZSA9PT0gJ2NvdXJzZUJ1aWxkZXJUYXNrJyA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9e2dldFRhc2tVcmwodXNlclRhc2ssIHRoaXMucHJvcHMudmlld0NvdXJzZVVybCl9Pnt1c2VyVGFzay5uYW1lfTwvYT4gOlxyXG4gICAgICAgICAgICAgICAgICAgICAgIHRhc2tUeXBlID09PSAnc3ViamVjdFBsYW5uZXJUYXNrJyA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9e2dldFN1YmplY3RQbGFubmVyVGFza1VybCh1c2VyVGFzayl9Pnt1c2VyVGFzay5uYW1lfTwvYT4gOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXNrVHlwZSA9PT0gJ3NpdGVWaXNpb25UYXNrJyA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj17dXNlclRhc2sudXJsfT57dXNlclRhc2submFtZX08L2E+IDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8YVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXshdXNlclRhc2sudXJsID8gXCJsaW5rLWxlc3NcIjogXCJcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY9e3VzZXJUYXNrLnVybCB8fCB1bmRlZmluZWR9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ9eyh1c2VyVGFzay51cmwrJycpLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aChsb2NhdGlvbi5ob3N0LnRvTG93ZXJDYXNlKCkpID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJfc2VsZlwiIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJfYmxhbmtcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA+e3VzZXJUYXNrLm5hbWV9PC9hPn1cclxuICAgICAgICAgICAgICAgICAgICAgIHt1c2VyVGFzay5kZWFkbGluZSAmJiA8ZGl2IGNsYXNzTmFtZT17XCJkYXRlU2V0XCIgKyAoZXhwaXJlZCA/ICcgZXhwaXJlZCcgOiAnJyl9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aSB0aXRsZT17bW9tZW50KHVzZXJUYXNrLmRlYWRsaW5lKS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpfSBjbGFzc05hbWU9XCJmYSBmYS1jYWxlbmRhclwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCk9Pnt9fT48L2k+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj59XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3AgdGFza0VkaXRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3NOYW1lPVwiZWRpdEl0ZW1cIiBvbkNsaWNrPXsoKSA9PiB0aGlzLnByb3BzLmVkaXRUYXNrKHVzZXJUYXNrKX0gLz5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PiBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICB7dXNlclRhc2suc3ViVGFza3MgJiYgPGRpdiBjbGFzc05hbWU9XCJzdWJ0YXNrc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIHt1c2VyVGFzay5zdWJUYXNrcy5tYXAoc3ViVGFzayA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e3N1YlRhc2suaWR9ID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e1wiY2hlY2tCb3hcIiArIChzdWJUYXNrLmRvbmUgPyBcIiBjaGVja2VkXCIgOiBcIlwiKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2V2ID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICFpc1dvcmtpbmcgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5zZXRTdWJUYXNrRG9uZSh1c2VyVGFzaywgc3ViVGFzaywgIXN1YlRhc2suZG9uZSl9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8YVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZj17c3ViVGFzay51cmwgfHwgdW5kZWZpbmVkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0PXsodXNlclRhc2sudXJsKycnKS50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgobG9jYXRpb24uaG9zdC50b0xvd2VyQ2FzZSgpKSA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIl9zZWxmXCIgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJfYmxhbmtcIn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YlRhc2sudXJsID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdsaW5rLWxlc3MnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfT57c3ViVGFzay5uYW1lfTwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wIHRhc2tFZGl0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3NOYW1lPVwiZWRpdEl0ZW1cIiBvbkNsaWNrPXsoKSA9PiB0aGlzLnByb3BzLmVkaXRTdWJUYXNrKHVzZXJUYXNrLCBzdWJUYXNrKX0gLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4pfVxyXG4gICAgICAgICAgICAgICAgICA8L2Rpdj59XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICB9KX1cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxlYXJuaW5nR29hbFRvb2xzXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnRuIGFkZE93bkdvYWxcIlxyXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHRoaXMucHJvcHMuYWRkT3duVGFzayh0aGlzLnByb3BzLmNvdXJzZU5hbWUsIGxnLm5hbWUpfT5cclxuICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1wbHVzXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPiA8Rm9ybWF0dGVkTWVzc2FnZSBpZD0ndXNlclRhc2tzLmFkZExlYXJuaW5nR29hbCcgZGVmYXVsdE1lc3NhZ2U9J0VnZXQgYXJiZXRzbcOlbCcvPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGJyIC8+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICl9XHJcbiAgICA8L09wZW5DbG9zZUJveD5cclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFRhc2tVcmwodXNlclRhc2s6IFVzZXJUYXNrLCB2aWV3Q291cnNlVXJsOiBzdHJpbmcpIHtcclxuICBpZiAodXNlclRhc2suY291cnNlICYmIHVzZXJUYXNrLmNvdXJzZS5sZW5ndGggPiAwICYmIHVzZXJUYXNrLnRhc2sgJiYgdXNlclRhc2sudGFzay5sZW5ndGggPiAwKSB7XHJcbiAgICBjb25zdCBjb3Vyc2VVcmwgPSBwcmVzZXJ2ZUltcGVyc29uYXRpb25RdWVyeSh2aWV3Q291cnNlVXJsLCB7IGNvdXJzZUlkOiB1c2VyVGFzay5jb3Vyc2VbMF0uaWQgfSk7XHJcbiAgICByZXR1cm4gYCR7Y291cnNlVXJsfSMvdGFzay8ke3VzZXJUYXNrLnRhc2tbMF0uaWR9YDtcclxuICB9XHJcbiAgcmV0dXJuIHVzZXJUYXNrLnVybDtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0U3ViamVjdFBsYW5uZXJUYXNrVXJsKHVzZXJUYXNrOiBVc2VyVGFzaykge1xyXG4gIGlmICh1c2VyVGFzay5jb3Vyc2VJbmZvICYmIHVzZXJUYXNrLnRhc2sgJiYgdXNlclRhc2sudGFzay5sZW5ndGggPiAwKSB7XHJcbiAgICBjb25zdCB7c2Nob29sLCBjb3Vyc2UsIHRhYiB9ID0gdXNlclRhc2suY291cnNlSW5mbztcclxuICAgIGNvbnN0IGNvdXJzZVVybCA9IHByZXNlcnZlSW1wZXJzb25hdGlvblF1ZXJ5KGNmZy5LRURfU1VCSkVDVF9QTEFOTkVSX1VSTCwge30pO1xyXG4gICAgcmV0dXJuIGAke2NvdXJzZVVybH0jLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlfS90YWJzLyR7dGFifS90YXNrcy8ke3VzZXJUYXNrLnRhc2tbMF0uaWR9YDtcclxuICB9XHJcbiAgcmV0dXJuIHVzZXJUYXNrLnVybDtcclxufVxyXG4iLCJpbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcbmltcG9ydCB7IGxvY2FsTW9tZW50IH0gZnJvbSAnLi4vLi4vZ2xvYmFscy9tb21lbnQtc3YtbG9jYWxlJztcclxuXHJcbnR5cGUgTW9tZW50ID0gbW9tZW50Lk1vbWVudDtcclxuXHJcbmV4cG9ydCBjbGFzcyBXZWVrUGxhbm5lclBlcnNpc3RlZFN0YXRlIHtcclxuICBzdGF0aWMgRVhQSVJBVElPTl9IT1VSUyA9IDEyO1xyXG4gIHN0YXRpYyBWRVJTSU9OID0gMjtcclxuXHJcbiAgdXNlcjogc3RyaW5nO1xyXG4gIGxhc3RXcml0ZTogbnVtYmVyO1xyXG4gIHdlZWtEYXRlOiBudW1iZXI7XHJcbiAgb3BlbkNvdXJzZXM6IHsgW3BhdGg6IHN0cmluZ106IGJvb2xlYW4gfVxyXG5cclxuICBjb25zdHJ1Y3RvciAodXNlck9yQ29weTogc3RyaW5nIHwgV2Vla1BsYW5uZXJQZXJzaXN0ZWRTdGF0ZSkge1xyXG4gICAgaWYgKHR5cGVvZiB1c2VyT3JDb3B5ID09PSAnc3RyaW5nJykge1xyXG4gICAgICB0aGlzLnVzZXIgPSB1c2VyT3JDb3B5O1xyXG4gICAgICB0aGlzLmxhc3RXcml0ZSA9IERhdGUubm93KCk7XHJcbiAgICAgIHRoaXMud2Vla0RhdGUgPSBsb2NhbE1vbWVudCgpLnN0YXJ0T2YoJ3dlZWsnKS52YWx1ZU9mKCk7XHJcbiAgICAgIHRoaXMub3BlbkNvdXJzZXMgPSB7fTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgdXNlck9yQ29weSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYXN5bmMgbG9hZCh1c2VyOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGNvb2tpZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdXZWVrUGxhbm5lclBlcnNpc3RlZFN0YXRlMicpO1xyXG4gICAgY29uc3Qgc3RvcmVkRGF0YSA9IGNvb2tpZSAmJiAoSlNPTi5wYXJzZShjb29raWUpIGFzIFdlZWtQbGFubmVyUGVyc2lzdGVkU3RhdGUpO1xyXG4gICAgY29uc3Qgc3RhdGUgPSBuZXcgV2Vla1BsYW5uZXJQZXJzaXN0ZWRTdGF0ZSh1c2VyKTtcclxuICAgIGlmIChzdG9yZWREYXRhKSBPYmplY3QuYXNzaWduKHN0YXRlLCBzdG9yZWREYXRhKTtcclxuXHJcbiAgICByZXR1cm4gc3RhdGUudXNlciA9PT0gdXNlciAmJiAhc3RhdGUuaXNFeHBpcmVkKG1vbWVudCgpKSA/XHJcbiAgICAgIHN0YXRlIDogbmV3IFdlZWtQbGFubmVyUGVyc2lzdGVkU3RhdGUodXNlcik7XHJcbiAgfVxyXG5cclxuICBhc3luYyBzYXZlKCkge1xyXG4gICAgdGhpcy5sYXN0V3JpdGUgPSBEYXRlLm5vdygpO1xyXG4gICAgY29uc3QganNvbiA9IEpTT04uc3RyaW5naWZ5KHRoaXMpO1xyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ1dlZWtQbGFubmVyUGVyc2lzdGVkU3RhdGUyJywganNvbik7XHJcbiAgfVxyXG5cclxuICBpc0V4cGlyZWQgKGFzT2Y6IE1vbWVudCkge1xyXG4gICAgICByZXR1cm4gbW9tZW50KHRoaXMubGFzdFdyaXRlKVxyXG4gICAgICAgIC5pc0JlZm9yZShcclxuICAgICAgICAgICAgYXNPZi5hZGQoXHJcbiAgICAgICAgICAgICAgICAwLVdlZWtQbGFubmVyUGVyc2lzdGVkU3RhdGUuRVhQSVJBVElPTl9IT1VSUywgJ2hvdXJzJylcclxuICAgICAgICApO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IFVzZXJUYXNrc0JveCB9IGZyb20gJy4vdXNlci10YXNrcy1ib3gnO1xyXG5pbXBvcnQgeyBVc2VyVGFzaywgVXNlclN1YlRhc2sgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IGNyZWF0ZVVVSUQsIEh0dHBFcnJvciB9IGZyb20gXCJrZWRiYWNrZW5kL2NsaWVudFwiO1xyXG5pbXBvcnQgeyByZWZpbmUsIFZpcnR1YWxMZWFybmluZ0dvYWwgfSBmcm9tICcuL3JlZmluZXInO1xyXG5pbXBvcnQgeyBFbnYgfSBmcm9tICcuLi8uLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5pbXBvcnQgeyBMLCBjb21wYXJlUHJvcCB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xyXG4vL2ltcG9ydCB7IEN1c3RvbUdvYWwgfSBmcm9tICcuLi8uLi9jb250cmFjdHMva2VkLW1vZGVscyc7XHJcbmltcG9ydCB7IFRTT04gfSBmcm9tICcuLi8uLi91dGlscy90c29uJztcclxuaW1wb3J0IHsgV2Vla1BsYW5uZXJQZXJzaXN0ZWRTdGF0ZSB9IGZyb20gJy4vd2Vla3BsYW5uZXItcGVyc2lzdGVkLXN0YXRlJztcclxuaW1wb3J0IHsgUmVtb3ZlSXRlbSB9IGZyb20gJy4uL2NvdXJzZS1idWlsZGVyL3N1Yi1jb21wb25lbnRzL3JlbW92ZS1pdGVtJztcclxuaW1wb3J0IHsgRGlhbG9ncyB9IGZyb20gJy4uL3V0aWxpdHktY29tcG9uZW50cy9kaWFsb2dzJztcclxuaW1wb3J0IHsgQWRkQ3VzdG9tR29hbCB9IGZyb20gJy4vYWRkLWN1c3RvbS1nb2FsJztcclxuaW1wb3J0IHsgQWRkQ3VzdG9tVGFzayB9IGZyb20gJy4vYWRkLWN1c3RvbS10YXNrJztcclxuaW1wb3J0IHsgRWRpdFVzZXJUYXNrIH0gZnJvbSAnLi9lZGl0LXVzZXItdGFzayc7XHJcbmltcG9ydCB7IFNwaW5uZXIgfSBmcm9tICcuLi9jb3Vyc2UtYnVpbGRlci9zdWItY29tcG9uZW50cy9zcGlubmVyJztcclxuaW1wb3J0IHsgT3BlbkNsb3NlQm94IH0gZnJvbSAnLi4vdXRpbGl0eS1jb21wb25lbnRzL29wZW4tY2xvc2UtYm94JztcclxuaW1wb3J0IHsgUGVuZGluZ0pvYiB9IGZyb20gJy4uLy4uL3V0aWxzL3BlbmRpbmctam9iJztcclxuaW1wb3J0IHsgQWRkT3JFZGl0U3ViVGFzayB9IGZyb20gJy4vYWRkLW9yLWVkaXQtc3ViLXRhc2snO1xyXG5pbXBvcnQgeyBnZXRBZGp1c3RlZFdlZWssIEtFRFdlZWssIGdldE5leHRXZWVrRGF0ZSwgZ2V0UHJldldlZWtEYXRlIH0gZnJvbSAnLi4vLi4vdXRpbHMvd2Vla3V0aWwnO1xyXG5pbXBvcnQgeyBGb3JtYXR0ZWRNZXNzYWdlIH0gZnJvbSAncmVhY3QtaW50bCc7XHJcbmltcG9ydCB7TGFuZ3VhZ2VDb250ZXh0fSBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvTGFuZ3VhZ2VDb250ZXh0JztcclxuaW1wb3J0IHsgUHJvZ3Jlc3MgfSBmcm9tICcuLi9jaGFydHMvcHJvZ3Jlc3MnO1xyXG5pbXBvcnQge2dldFdlZWtwbGFubmVyUHJvZ3Jlc3NEYXRhfSBmcm9tICcuLi9jaGFydHMvY2hhcnRzLXV0aWxzJ1xyXG5pbXBvcnQgeyBmZWF0dXJlcyB9IGZyb20gJy4uLy4uL2ZlYXR1cmVzJztcclxuXHJcbmNvbnN0IE1BWF9TVFJBVEVHWV9MRU5HVEggPSAxNjM4NDtcclxuY29uc3QgTUFYX0FTU0VTU01FTlRfTEVOR1RIID0gMTYzODQ7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHZpZXdDb3Vyc2VVcmw6IHN0cmluZztcclxuICBlbnY6IEVudjtcclxufVxyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICB3ZWVrRGF0ZTogbnVtYmVyO1xyXG4gIGRpYWxvZ3M6IGFueVtdO1xyXG4gIHVzZXJUYXNrczogVXNlclRhc2tbXTtcclxuICBvcGVuQ291cnNlczogeyBbcGF0aDogc3RyaW5nXTogYm9vbGVhbiB9XHJcbiAgc3RyYXRlZ3k/OiBzdHJpbmc7XHJcbiAgYXNzZXNzbWVudD86IHN0cmluZztcclxuICB3ZWVrVGV4dHNVVDogVXNlclRhc2sgfCBudWxsO1xyXG4gIHNhdmluZzogYm9vbGVhbjtcclxuICBpc0xvYWRpbmc6IGJvb2xlYW47XHJcbiAgaXNDb3B5aW5nVGFza3M6IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBXZWVrUGxhbm5lciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcywgU3RhdGU+IHtcclxuICB3ZWVrVGV4dHNTYXZpbmdKb2I6IFBlbmRpbmdKb2I7XHJcbiAgc3RhdGljIGNvbnRleHRUeXBlID0gTGFuZ3VhZ2VDb250ZXh0O1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIHVzZXJUYXNrczogW10sXHJcbiAgICAgIHdlZWtEYXRlOiBEYXRlLm5vdygpLFxyXG4gICAgICBvcGVuQ291cnNlczoge30sXHJcbiAgICAgIGRpYWxvZ3M6IFtdLFxyXG4gICAgICBzYXZpbmc6IGZhbHNlLFxyXG4gICAgICB3ZWVrVGV4dHNVVDogbnVsbCxcclxuICAgICAgaXNMb2FkaW5nOiB0cnVlLFxyXG4gICAgICBpc0NvcHlpbmdUYXNrczogZmFsc2VcclxuICAgIH1cclxuICAgIHRoaXMub25DaGFuZ2UgPSB0aGlzLm9uQ2hhbmdlLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLndlZWtUZXh0c1NhdmluZ0pvYiA9IG5ldyBQZW5kaW5nSm9iKCgpPT50aGlzLnNhdmVXZWVrVGV4dHMoKSk7XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgIHRoaXMucHJvcHMuZW52LnVzZXJUYXNrc1JlcG8uc3Vic2NyaWJlKHRoaXMub25DaGFuZ2UpO1xyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XHJcbiAgICB0aGlzLnByb3BzLmVudi51c2VyVGFza3NSZXBvLnVuc3Vic2NyaWJlKHRoaXMub25DaGFuZ2UpO1xyXG4gICAgdGhpcy53ZWVrVGV4dHNTYXZpbmdKb2Iuc3RvcCgpO1xyXG4gIH1cclxuXHJcbiAgb25DaGFuZ2UodXNlclRhc2tzOiBVc2VyVGFza1tdLCBwZXJzaXN0ZWQ6IFdlZWtQbGFubmVyUGVyc2lzdGVkU3RhdGUsIHdlZWtUZXh0c1VUOiBVc2VyVGFzaykge1xyXG4gICAgY29uc3QgbmV3U3RhdGUgOiBQYXJ0aWFsPFN0YXRlPiA9IHtcclxuICAgICAgdXNlclRhc2tzLFxyXG4gICAgICB3ZWVrRGF0ZTogcGVyc2lzdGVkLndlZWtEYXRlLFxyXG4gICAgICBvcGVuQ291cnNlczogcGVyc2lzdGVkLm9wZW5Db3Vyc2VzLFxyXG4gICAgICB3ZWVrVGV4dHNVVCxcclxuICAgICAgaXNMb2FkaW5nOiBmYWxzZVxyXG4gICAgfVxyXG4gICAgaWYgKCF0aGlzLnN0YXRlLndlZWtUZXh0c1VUIHx8ICh3ZWVrVGV4dHNVVC5kYXRlVGltZSAhPT0gdGhpcy5zdGF0ZS53ZWVrVGV4dHNVVC5kYXRlVGltZSkpIHtcclxuICAgICAgLy8gQ2hhbmdpbmcgd2Vlay4gUmVzZXQgdG8gbmV3IHdlZWsncyB2YWx1ZXNcclxuICAgICAgbmV3U3RhdGUuc3RyYXRlZ3kgPSB3ZWVrVGV4dHNVVC53ZWVrVGV4dHMuc3RyYXRlZ3k7XHJcbiAgICAgIG5ld1N0YXRlLmFzc2Vzc21lbnQgPSB3ZWVrVGV4dHNVVC53ZWVrVGV4dHMuYXNzZXNzbWVudDtcclxuICAgIH1cclxuICAgIHRoaXMuc2V0U3RhdGUobmV3U3RhdGUgYXMgYW55KTsgLy8gUmVhY3QncyB1c2Ugb2YgUGljayBpbnN0ZWFkIG9mIFBhcnRpYWwgbWFrZXMgdGhpbmdzIGNvbXBsZXggaGVyZS5cclxuICB9XHJcblxyXG4gIGlzV2Vla1RleHRzRWRpdGVkKCkge1xyXG4gICAgY29uc3QgeyBzdHJhdGVneSwgYXNzZXNzbWVudCwgd2Vla1RleHRzVVQgfSA9IHRoaXMuc3RhdGU7XHJcbiAgICByZXR1cm4gISF3ZWVrVGV4dHNVVCAmJiAoc3RyYXRlZ3kgIT09IHdlZWtUZXh0c1VULndlZWtUZXh0cy5zdHJhdGVneSB8fCBhc3Nlc3NtZW50ICE9PSB3ZWVrVGV4dHNVVC53ZWVrVGV4dHMuYXNzZXNzbWVudCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIHNhdmVXZWVrVGV4dHMoKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcIlNhdmluZyB0ZXh0cy4uLlwiKTtcclxuICAgIGNvbnN0IHsgc3RyYXRlZ3ksIGFzc2Vzc21lbnQsIHdlZWtUZXh0c1VUIH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgaWYgKHRoaXMuaXNXZWVrVGV4dHNFZGl0ZWQoKSkge1xyXG4gICAgICBhd2FpdCB0aGlzLnByb3BzLmVudi51c2VyVGFza3NSZXBvLnVwc2VydCh3ZWVrVGV4dHNVVCwgdXQgPT4ge1xyXG4gICAgICAgIHV0LndlZWtUZXh0cyA9IHsgc3RyYXRlZ3ksIGFzc2Vzc21lbnQgfTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcmV2V2VlaygpIHtcclxuICAgIC8vdGhpcy5zYXZlV2Vla1RleHRzKCk7IFxyXG4gICAgdmFyIHByZXZXZWVrT2JqID0gZ2V0UHJldldlZWtEYXRlKG1vbWVudCh0aGlzLnN0YXRlLndlZWtEYXRlKSk7XHJcbiAgICB0aGlzLnByb3BzLmVudi51c2VyVGFza3NSZXBvLmNoYW5nZVdlZWsocHJldldlZWtPYmoubmV4dERhdGUsIHByZXZXZWVrT2JqLmFkanVzdGVkKTtcclxuICB9XHJcblxyXG4gIG5leHRXZWVrKCkge1xyXG4gICAgLy90aGlzLnNhdmVXZWVrVGV4dHMoKTtcclxuICAgIHZhciBuZXh0V2Vla09iaiA9IGdldE5leHRXZWVrRGF0ZShtb21lbnQodGhpcy5zdGF0ZS53ZWVrRGF0ZSkpO1xyXG4gICAgdGhpcy5wcm9wcy5lbnYudXNlclRhc2tzUmVwby5jaGFuZ2VXZWVrKG5leHRXZWVrT2JqLm5leHREYXRlLCBuZXh0V2Vla09iai5hZGp1c3RlZCk7XHJcbiAgfVxyXG5cclxuICBvcGVuRGlhbG9nKGRpYWxvZykge1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7IGRpYWxvZ3M6IFsuLi50aGlzLnN0YXRlLmRpYWxvZ3MsIGRpYWxvZ10gfSk7XHJcbiAgfVxyXG5cclxuICBvcGVuQWRkR29hbERpYWxvZygpIHtcclxuICAgIHRoaXMub3BlbkRpYWxvZyg8QWRkQ3VzdG9tR29hbFxyXG4gICAgICBvblNhdmU9e2FzeW5jIChsZWFybmluZ0dvYWw6IHN0cmluZykgPT4ge1xyXG4gICAgICAgIGlmICghbGVhcm5pbmdHb2FsKSB0aHJvdyBuZXcgRXJyb3IgKHRoaXMuY29udGV4dC5pbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOid3ZWVrcGxhbm5lci5lbXB0eUxlYXJuaW5nR29hbEVycicsIGRlZmF1bHRNZXNzYWdlOiAnTMOkcmFuZGVtw6VsZXQga2FuIGludGUgdmFyYSB0b210J30pKTtcclxuICAgICAgICBpZiAoIXRoaXMuc3RhdGUuc2F2aW5nKSB7XHJcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgc2F2aW5nOiB0cnVlIH0pO1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGRDdXN0b21Hb2FsKGxlYXJuaW5nR29hbCk7XHJcbiAgICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgc2F2aW5nOiBmYWxzZSB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2coKTtcclxuICAgICAgICB9XHJcbiAgICAgIH19IC8+KTtcclxuICB9XHJcblxyXG4gIG9wZW5BZGRPd25UYXNrRGlhbG9nKGNvdXJzZU5hbWU6IHN0cmluZywgbGVhcm5pbmdHb2FsTmFtZTogc3RyaW5nKSB7XHJcbiAgICB0aGlzLm9wZW5EaWFsb2coPEFkZEN1c3RvbVRhc2tcclxuICAgICAgaXNUYXNrPXshY291cnNlTmFtZX1cclxuICAgICAgb25TYXZlPXthc3luYyAobmFtZTogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nLCB1cmw6IHN0cmluZykgPT4ge1xyXG4gICAgICAgIGlmICghbmFtZSkgdGhyb3cgbmV3IEVycm9yICh0aGlzLmNvbnRleHQuaW50bC5mb3JtYXRNZXNzYWdlKHtpZDond2Vla3BsYW5uZXIubmFtZUNhbm5vdEJlRW1wdHknLCBkZWZhdWx0TWVzc2FnZTogJ05hbW5ldCBrYW4gaW50ZSB2YXJhIHRvbXQnfSkpO1xyXG4gICAgICAgIGlmICghdGhpcy5zdGF0ZS5zYXZpbmcpIHtcclxuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBzYXZpbmc6IHRydWUgfSk7XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFkZEN1c3RvbVRhc2soY291cnNlTmFtZSwgbGVhcm5pbmdHb2FsTmFtZSwgbmFtZSwgZGVzY3JpcHRpb24sIHVybCk7XHJcbiAgICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgc2F2aW5nOiBmYWxzZSB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2coKTtcclxuICAgICAgICB9XHJcbiAgICAgIH19IC8+KTtcclxuICB9XHJcblxyXG4gIGVkaXRUYXNrKHVzZXJUYXNrOiBVc2VyVGFzaykge1xyXG4gICAgdGhpcy5vcGVuRGlhbG9nKDxFZGl0VXNlclRhc2tcclxuICAgICAgdXNlclRhc2tzUmVwbz17dGhpcy5wcm9wcy5lbnYudXNlclRhc2tzUmVwb31cclxuICAgICAgdXNlclRhc2s9e3VzZXJUYXNrfVxyXG4gICAgICBvblVwZGF0ZT17YXN5bmMgKHVwZGF0ZXI6ICh1dDogVXNlclRhc2spID0+IHZvaWQpID0+IHtcclxuICAgICAgICBjb25zdCB0ZXN0ID0gey4uLnVzZXJUYXNrfTtcclxuICAgICAgICB1cGRhdGVyKHRlc3QpO1xyXG4gICAgICAgIGlmICghdGVzdC5uYW1lKSB0aHJvdyBuZXcgRXJyb3IgKHRoaXMuY29udGV4dC5pbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOid3ZWVrcGxhbm5lci5uYW1lTXVzdE5vdEJlRW1wdHknLCBkZWZhdWx0TWVzc2FnZTogJ05hbW5ldCBmw6VyIGludGUgdmFyYSB0b210J30pKTtcclxuICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKCk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5wcm9wcy5lbnYudXNlclRhc2tzUmVwby51cGRhdGUoW3VzZXJUYXNrXSwgdXBkYXRlcik7XHJcbiAgICAgIH19XHJcbiAgICAgIG9uRGVsZXRlPXthc3luYyBpZCA9PiB7XHJcbiAgICAgICAgdGhpcy5jbG9zZURpYWxvZygpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMucHJvcHMuZW52LnVzZXJUYXNrc1JlcG8uZGVsZXRlKFtpZF0pO1xyXG4gICAgICB9fVxyXG4gICAgICBvcGVuRGlhbG9nPXtkaWFsb2c9PnRoaXMub3BlbkRpYWxvZyhkaWFsb2cpfVxyXG4gICAgICBjbG9zZURpYWxvZz17KCk9PnRoaXMuY2xvc2VEaWFsb2coKX1cclxuICAgIC8+KTtcclxuICB9XHJcblxyXG4gIGVkaXRTdWJUYXNrKHVzZXJUYXNrOiBVc2VyVGFzaywgc3ViVGFzazogVXNlclN1YlRhc2spIHtcclxuICAgIHRoaXMub3BlbkRpYWxvZyg8QWRkT3JFZGl0U3ViVGFza1xyXG4gICAgICB1c2VyVGFza3NSZXBvPXt0aGlzLnByb3BzLmVudi51c2VyVGFza3NSZXBvfVxyXG4gICAgICBtb2RlPVwiZWRpdFwiXHJcbiAgICAgIHVzZXJUYXNrPXt1c2VyVGFza31cclxuICAgICAgc3ViVGFzaz17c3ViVGFza31cclxuICAgICAgY2xvc2VEaWFsb2c9eygpPT50aGlzLmNsb3NlRGlhbG9nKCl9XHJcbiAgICAvPik7XHJcbiAgfVxyXG5cclxuICBjbG9zZURpYWxvZygpIHtcclxuICAgIHRoaXMuc2V0U3RhdGUoeyBkaWFsb2dzOiB0aGlzLnN0YXRlLmRpYWxvZ3Muc2xpY2UoMCwgdGhpcy5zdGF0ZS5kaWFsb2dzLmxlbmd0aCAtIDEpIH0pO1xyXG4gIH1cclxuXHJcblxyXG5cclxuICBhc3luYyBhZGRDdXN0b21Hb2FsKGxlYXJuaW5nR29hbDogc3RyaW5nKSB7XHJcbiAgICBsZXQgbGF0ZXN0VGltZVN0YW1wID0gTWF0aC5tYXguYXBwbHkoXHJcbiAgICAgIE1hdGgubWF4LFxyXG4gICAgICBbdGhpcy5zdGF0ZS53ZWVrRGF0ZV0uY29uY2F0KHRoaXMuc3RhdGUudXNlclRhc2tzLm1hcCh0ID0+IHQuZGF0ZVRpbWUpKSk7XHJcblxyXG4gICAgYXdhaXQgdGhpcy5wcm9wcy5lbnYudXNlclRhc2tzUmVwby5pbnNlcnQoW3tcclxuICAgICAgaWQ6IGNyZWF0ZVVVSUQoKSxcclxuICAgICAgbGVhcm5pbmdHb2FsLFxyXG4gICAgICBkYXRlVGltZTogbGF0ZXN0VGltZVN0YW1wICsgMjAwMFxyXG4gICAgfV0pO1xyXG5cclxuICAgIGF3YWl0IHRoaXMucHJvcHMuZW52LnVzZXJUYXNrc1JlcG8uc2V0V2Vla1BsYW5uZXJCb3hPcGVuKFwiXCIsIHRydWUpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgcmVtb3ZlTGVhcm5pbmdHb2FsKGxlYXJuaW5nR29hbDogVmlydHVhbExlYXJuaW5nR29hbCkge1xyXG4gICAgaWYgKGxlYXJuaW5nR29hbC50YXNrcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGlmICghY29uZmlybSh0aGlzLmNvbnRleHQuaW50bC5mb3JtYXRNZXNzYWdlKHtpZDond2Vla3BsYW5uZXIuY29uZmlybVJlbW92ZUxlYXJuaW5nT2JqZWN0aXZlcycsIGRlZmF1bHRNZXNzYWdlOiAnVGEgYm9ydCBsw6RyYW5kZW3DpWwgc2FtdCB7bGVhcm5pbmdHb2Fsc051bWJlcn0gdXBwZ2lmdGVyPyd9LCB7bGVhcm5pbmdHb2Fsc051bWJlcjogbGVhcm5pbmdHb2FsLnRhc2tzLmxlbmd0aH0pKSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgYXdhaXQgdGhpcy5wcm9wcy5lbnYudXNlclRhc2tzUmVwby5kZWxldGUobGVhcm5pbmdHb2FsLmFsbFRhc2tzLm1hcCh0ID0+IHQuaWQpKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGFkZEN1c3RvbVRhc2soY291cnNlTmFtZTogc3RyaW5nLCBsZWFybmluZ0dvYWw6IHN0cmluZywgbmFtZTogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nLCB1cmw6IHN0cmluZykge1xyXG4gICAgbGV0IGxhdGVzdFRpbWVTdGFtcCA9IE1hdGgubWF4LmFwcGx5KFxyXG4gICAgICBNYXRoLm1heCxcclxuICAgICAgW3RoaXMuc3RhdGUud2Vla0RhdGVdLmNvbmNhdCh0aGlzLnN0YXRlLnVzZXJUYXNrcy5tYXAodCA9PiB0LmRhdGVUaW1lKSkpO1xyXG5cclxuICAgIC8qY29uc3QgZW1wdHlMZWFybmluZ0dvYWxQbGFjZWhvbGRlciA9IHRoaXMuc3RhdGUudXNlclRhc2tzLmZpbmQodXQgPT5cclxuICAgICAgdXQubmFtZSA9PSBudWxsICYmXHJcbiAgICAgICF1dC5jb3Vyc2VOYW1lICYmXHJcbiAgICAgIHV0LmxlYXJuaW5nR29hbCA9PT0gbGVhcm5pbmdHb2FsKTtcclxuXHJcbiAgICBpZiAoZW1wdHlMZWFybmluZ0dvYWxQbGFjZWhvbGRlcikge1xyXG4gICAgICAvLyBIaWphY2sgbGVhcm5pbmctZ29hbCBwbGFjZWhvbGRlciBhbmQgbWFrZSBpdCB0aGUgcmVhbCB0YXNrLlxyXG4gICAgICAvLyBUaGlzIHdpbGwgbWFrZSB0aGUgbGVhcm5pbmcgZ29hbCBkaXNhcHBlYXIgb25jZSB0aGlzIHRhc2tcclxuICAgICAgLy8gaXMgZGVsZXRlZC5cclxuICAgICAgYXdhaXQgdXNlclRhc2tzUmVwby51cGRhdGUoW2VtcHR5TGVhcm5pbmdHb2FsUGxhY2Vob2xkZXJdLCB1dCA9PiB7XHJcbiAgICAgICAgT2JqZWN0LmFzc2lnbih1dCwgeyBuYW1lLCBkZXNjcmlwdGlvbiwgdXJsIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7Ki9cclxuICAgICAgLy8gQWRkIGFub3RoZXIgdGFzayB0byBzYW1lIGxlYXJuaW5nLWdvYWxcclxuICAgICAgYXdhaXQgdGhpcy5wcm9wcy5lbnYudXNlclRhc2tzUmVwby5pbnNlcnQoW3tcclxuICAgICAgICBpZDogY3JlYXRlVVVJRCgpLFxyXG4gICAgICAgIGRhdGVUaW1lOiBsYXRlc3RUaW1lU3RhbXAgKyAyMDAwLFxyXG4gICAgICAgIGNvdXJzZU5hbWUsXHJcbiAgICAgICAgbGVhcm5pbmdHb2FsLFxyXG4gICAgICAgIG5hbWUsXHJcbiAgICAgICAgZGVzY3JpcHRpb24sXHJcbiAgICAgICAgdXJsXHJcbiAgICAgIH1dKTtcclxuICAgIC8vfVxyXG4gIH1cclxuXHJcbiAgc2V0SXNPcGVuKGNvdXJzZU5hbWU6IHN0cmluZywgaXNPcGVuOiBib29sZWFuKSB7XHJcbiAgICB0aGlzLnByb3BzLmVudi51c2VyVGFza3NSZXBvLnNldFdlZWtQbGFubmVyQm94T3Blbihjb3Vyc2VOYW1lLCBpc09wZW4pO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgc2V0VGFza0RvbmUodGFzazogVXNlclRhc2ssIGRvbmU6IGJvb2xlYW4pIHtcclxuICAgIGF3YWl0IHRoaXMucHJvcHMuZW52LnVzZXJUYXNrc1JlcG8uc2V0VGFza0RvbmVTdGF0ZSh0YXNrLCBkb25lKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHNldFN1YlRhc2tEb25lKHRhc2s6IFVzZXJUYXNrLCBzdWJUYXNrOiBVc2VyU3ViVGFzaywgZG9uZTogYm9vbGVhbikge1xyXG4gICAgYXdhaXQgdGhpcy5wcm9wcy5lbnYudXNlclRhc2tzUmVwby5zZXRTdWJUYXNrRG9uZVN0YXRlKHRhc2ssIHN1YlRhc2suaWQsIGRvbmUpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgY29weUZyb21QcmV2aW91c1dlZWsoKSB7XHJcbiAgICBhd2FpdCB0aGlzLnNldFN0YXRlKHtpc0NvcHlpbmdUYXNrczogdHJ1ZX0pO1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgeyB1c2VyVGFza3MsIG9wZW5Db3Vyc2VzLCB3ZWVrRGF0ZSB9ID0gdGhpcy5zdGF0ZTtcclxuXHJcbiAgICAgIGNvbnN0IHByZXZXZWVrID0gbW9tZW50KHdlZWtEYXRlKS5hZGQoLTEsICd3ZWVrJyk7XHJcbiAgICAgIGNvbnN0IHByZXZXZWVrTm8gPSBnZXRBZGp1c3RlZFdlZWsgKHByZXZXZWVrKTtcclxuICAgICAgY29uc3QgcHJldktFRFdlZWsgPSBLRURXZWVrKHByZXZXZWVrLnllYXIoKSwgcHJldldlZWtObyk7XHJcbiAgICAgIC8vIFJlYWQgbGFzdCB3ZWVrJ3MgZ29hbHMgYW5kIHRhc2tzXHJcbiAgICAgIGxldCBwcmV2VGFza3MgPSBhd2FpdCB0aGlzLnByb3BzLmVudi5rZWRCYWNrZW5kQ2xpZW50Lmxpc3Q8VXNlclRhc2s+KFwidXNlcnRhc2tzXCIsIHtcclxuICAgICAgICBmcm9tOiBwcmV2S0VEV2Vlay5ub3RCZWZvcmUsXHJcbiAgICAgICAgdG86IHByZXZLRURXZWVrLm5vdEFmdGVyLFxyXG4gICAgICAgIHJvbGU6IFwiVVNFUlwiLFxyXG4gICAgICAgIGluY2x1ZGU6IFtcInRhc2tcIiwgXCJjb3Vyc2VcIiwgXCJhY2xcIl0sXHJcbiAgICAgICAgZmxhZ3M6IFtcImluY2x1ZGVJZHNPbmx5XCJdXHJcbiAgICAgIH0pO1xyXG4gICAgICBwcmV2VGFza3MgPSBwcmV2VGFza3NcclxuICAgICAgICAuZmlsdGVyKHByZXZUYXNrID0+ICFwcmV2VGFzay5kb25lKSAgLy8gRG9uJ3QgY29weSBkb25lIHRhc2tzXHJcbiAgICAgICAgLmZpbHRlcihwcmV2VGFzayA9PiAhIXByZXZUYXNrLm5hbWUpIC8vIERvbid0IGNvcHkgZW1wdHkgbGVhcm5pbmcgZ29hbHNcclxuICAgICAgICAuZmlsdGVyKHByZXZUYXNrID0+ICF1c2VyVGFza3Muc29tZSh0YXNrT2ZDdXJyZW50V2VlayA9PlxyXG4gICAgICAgICAgdGFza09mQ3VycmVudFdlZWsubmFtZSA9PT0gcHJldlRhc2submFtZSAmJlxyXG4gICAgICAgICAgdGFza09mQ3VycmVudFdlZWsubGVhcm5pbmdHb2FsID09PSBwcmV2VGFzay5sZWFybmluZ0dvYWwgJiZcclxuICAgICAgICAgIHRhc2tPZkN1cnJlbnRXZWVrLmNvdXJzZU5hbWUgPT09IHByZXZUYXNrLmNvdXJzZU5hbWUpKTsgLy8gSWdub3JlIGlkZW50aWNhbCB0YXNrcyAoYWxyZWFkeSBjb3BpZWQpXHJcbiAgICAgICAgICBcclxuICAgICAgdmFyIHRlc3QgPSBbd2Vla0RhdGVdLmNvbmNhdCh1c2VyVGFza3MubWFwKHQgPT4gdC5kYXRlVGltZSkpO1xyXG4gICAgICAvLyBOb3cgY3JlYXRlIGNvcGllcyBidXQgcGxhY2UgdGhlbSBpbiB0aGUgY3VycmVudCB3ZWVrLlxyXG4gICAgICBsZXQgbGF0ZXN0VGltZVN0YW1wID0gTWF0aC5tYXguYXBwbHkoTWF0aC5tYXgsIFt3ZWVrRGF0ZV0uY29uY2F0KHVzZXJUYXNrcy5tYXAodCA9PiB0LmRhdGVUaW1lKSkpO1xyXG5cclxuICAgICAgY29uc3QgY29waWVzID0gcHJldlRhc2tzLnNvcnQoY29tcGFyZVByb3AoXCJkYXRlVGltZVwiKSkubWFwKHRhc2sgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNvcHk6IFVzZXJUYXNrID0geyAuLi50YXNrLCBkYXRlVGltZTogbGF0ZXN0VGltZVN0YW1wICs9IDEwMDAgfTtcclxuICAgICAgICBjb3B5LmlkID0gY3JlYXRlVVVJRCgpO1xyXG4gICAgICAgIGlmIChjb3B5LnN1YlRhc2tzKSB7XHJcbiAgICAgICAgICBjb3B5LnN1YlRhc2tzID0gY29weS5zdWJUYXNrcy5maWx0ZXIoc3QgPT4gIXN0LmRvbmUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZWxldGUgY29weS4kZXRhZztcclxuICAgICAgICByZXR1cm4gY29weTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBTdG9yZSBpdFxyXG4gICAgICBhd2FpdCB0aGlzLnByb3BzLmVudi51c2VyVGFza3NSZXBvLmluc2VydChjb3BpZXMpO1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7aXNDb3B5aW5nVGFza3M6IGZhbHNlfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRIZWFkZXJUaXRsZSgpe1xyXG4gICAgcmV0dXJuIDxoND48Rm9ybWF0dGVkTWVzc2FnZSBpZD1cIndlZWtwbGFubmVyLmxvZ0Jvb2tcIiAgZGVmYXVsdE1lc3NhZ2U9XCJMb2dnYm9rXCIvPjwvaDQ+O1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3Qgd2Vla051bWJlciA9IG1vbWVudCh0aGlzLnN0YXRlLndlZWtEYXRlKS53ZWVrKCk7XHJcbiAgICBjb25zdCBzaG93UHJvZ3Jlc3NDaGFydHMgPSBmZWF0dXJlcy53ZWVrcGxhbm5lckNoYXJ0cztcclxuICAgIC8vY29uc29sZS5sb2coXCJXZWVreWRhdGU6IFwiICArIG5ldyBEYXRlKHRoaXMuc3RhdGUud2Vla0RhdGUpICsgXCIgd2hpY2ggaXMgd2VlayBubyBcIiArIHdlZWtOdW1iZXIpO1xyXG4gICAgY29uc3QgY3VycmVudFdlZWsgPSBtb21lbnQoKS53ZWVrKCk7XHJcbiAgICBjb25zdCB0YXNrU2V0cyA9IHJlZmluZSh0aGlzLnN0YXRlLnVzZXJUYXNrcyk7XHJcbiAgICBjb25zdCB7IGRpYWxvZ3MsIHdlZWtUZXh0c1VULCBzdHJhdGVneSwgYXNzZXNzbWVudCwgaXNMb2FkaW5nLCBpc0NvcHlpbmdUYXNrcyB9ID0gdGhpcy5zdGF0ZTtcclxuICAgIGNvbnN0IGlzU2F2aW5nID0gd2Vla1RleHRzVVQgJiYgKHdlZWtUZXh0c1VULiRtZXRhID09PSAnYWRkaW5nJyB8fCB3ZWVrVGV4dHNVVC4kbWV0YSA9PT0gJ3VwZGF0aW5nJyk7XHJcbiAgICBjb25zdCBpc1N0cmF0ZWd5RWRpdGVkID0gISF3ZWVrVGV4dHNVVCAmJiAoc3RyYXRlZ3kgIT09IHdlZWtUZXh0c1VULndlZWtUZXh0cy5zdHJhdGVneSk7XHJcbiAgICBjb25zdCBpc0Fzc2Vzc21lbnRFZGl0ZWQgPSAhIXdlZWtUZXh0c1VUICYmIChhc3Nlc3NtZW50ICE9PSB3ZWVrVGV4dHNVVC53ZWVrVGV4dHMuYXNzZXNzbWVudCk7XHJcbiAgICBjb25zdCBlbmFibGVTYXZlQnV0dG9uID0gIWlzU2F2aW5nICYmIChpc1N0cmF0ZWd5RWRpdGVkIHx8IGlzQXNzZXNzbWVudEVkaXRlZCk7XHJcblxyXG4gICAgdmFyIGNoYXJ0VGFza3MgPSBnZXRXZWVrcGxhbm5lclByb2dyZXNzRGF0YSh0YXNrU2V0cyk7XHJcblxyXG4gICAgdmFyIHBlcmNlbnRhZ2UgPSB0YXNrU2V0cy5sZW5ndGggPiAwID8gY2hhcnRUYXNrcy5jb21wbGV0ZWRUYXNrcyAvIGNoYXJ0VGFza3MudG90YWxOdW1iZXJPZlRhc2tzICogMTAwIDogMDtcclxuICAgIHJldHVybiA8ZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17YGtlZF9ib3hlZCB3ZWVrUGxhbm5lciR7d2Vla051bWJlciA9PT0gY3VycmVudFdlZWsgPyBcIiBjdXJyZW50V2Vla1wiIDogXCJcIn1gfVxyXG4gICAgICAgIG9uS2V5RG93bj17ZXYgPT4ge1xyXG4gICAgICAgICAgaWYgKGV2LndoaWNoID09PSA4MyAmJiBldi5jdHJsS2V5KSB7XHJcbiAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGlmICghaXNTYXZpbmcgJiYgdGhpcy5pc1dlZWtUZXh0c0VkaXRlZCgpKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy53ZWVrVGV4dHNTYXZpbmdKb2IudHJpZ2dlckNoYW5nZSgwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH19PlxyXG4gICAgICAgIHtzaG93UHJvZ3Jlc3NDaGFydHMgJiYgdGhpcy5nZXRIZWFkZXJUaXRsZSgpfVxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwid2lkZ2V0c1wiPlxyXG4gICAgICAgICAge3Nob3dQcm9ncmVzc0NoYXJ0cyA/IDxkaXYgY2xhc3NOYW1lPVwicHJvZ3Jlc3NCYXJcIj48UHJvZ3Jlc3MgcGVyY2VudGFnZSA9IHtwZXJjZW50YWdlfS8+PC9kaXY+IDogdGhpcy5nZXRIZWFkZXJUaXRsZSgpfVxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2B3ZWVrU2VsZWN0YH0+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW1cIj5cclxuICAgICAgICAgICAgICA8cD48Rm9ybWF0dGVkTWVzc2FnZSBpZD1cIndlZWtwbGFubmVyLndlZWtOdW1iZXJcIiB2YWx1ZXM9e3t3ZWVrTnVtYmVyOiB3ZWVrTnVtYmVyfX0gZGVmYXVsdE1lc3NhZ2U9XCJWZWNrYSB7d2Vla051bWJlcn1cIi8+PC9wPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbVwiPlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnRuLWdyb3VwXCI+XHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImJ0blwiIG9uQ2xpY2s9eygpID0+IHRoaXMucHJldldlZWsoKX0+XHJcbiAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLWFuZ2xlLWxlZnRcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XHJcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiYnRuXCIgb25DbGljaz17KCkgPT4gdGhpcy5uZXh0V2VlaygpfT5cclxuICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtYW5nbGUtcmlnaHRcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XHJcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAge3Rhc2tTZXRzLmxlbmd0aCA+IDAgJiYgPGhyIC8+fVxyXG5cclxuICAgICAgICB7dGFza1NldHMubWFwKHByb3BzID0+XHJcbiAgICAgICAgICA8VXNlclRhc2tzQm94XHJcbiAgICAgICAgICAgIGtleT17cHJvcHMuY291cnNlTmFtZX1cclxuICAgICAgICAgICAgey4uLnByb3BzfVxyXG4gICAgICAgICAgICBjb3Vyc2VOYW1lPXtwcm9wcy5jb3Vyc2VOYW1lfVxyXG4gICAgICAgICAgICBsZWFybmluZ0dvYWxzPXtwcm9wcy5sZWFybmluZ0dvYWxzfVxyXG4gICAgICAgICAgICB2aWV3Q291cnNlVXJsPXt0aGlzLnByb3BzLnZpZXdDb3Vyc2VVcmx9XHJcbiAgICAgICAgICAgIG9wZW5Db3Vyc2VzPXt0aGlzLnN0YXRlLm9wZW5Db3Vyc2VzfVxyXG4gICAgICAgICAgICBhZGRPd25UYXNrPXsoY291cnNlTmFtZTogc3RyaW5nLCBsZWFybmluZ0dvYWxOYW1lOiBzdHJpbmcpID0+IHRoaXMub3BlbkFkZE93blRhc2tEaWFsb2coY291cnNlTmFtZSwgbGVhcm5pbmdHb2FsTmFtZSl9XHJcbiAgICAgICAgICAgIHNldElzT3Blbj17dGhpcy5zZXRJc09wZW4uYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgc2V0VGFza0RvbmU9e3RoaXMuc2V0VGFza0RvbmUuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgc2V0U3ViVGFza0RvbmU9e3RoaXMuc2V0U3ViVGFza0RvbmUuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgZWRpdFRhc2s9e3Rhc2sgPT4gdGhpcy5lZGl0VGFzayh0YXNrKX1cclxuICAgICAgICAgICAgZWRpdFN1YlRhc2s9eyh0YXNrLCBzdWJUYXNrKSA9PiB0aGlzLmVkaXRTdWJUYXNrKHRhc2ssIHN1YlRhc2spfVxyXG4gICAgICAgICAgICByZW1vdmVMZWFybmluZ0dvYWw9e2xnID0+IHRoaXMucmVtb3ZlTGVhcm5pbmdHb2FsKGxnKX0gXHJcbiAgICAgICAgICAgIGRpc3BsYXlQcm9ncmVzcyA9IHtzaG93UHJvZ3Jlc3NDaGFydHN9XHJcbiAgICAgICAgICAgIHByb2dyZXNzRGF0YSA9IHtjaGFydFRhc2tzLnN1YmplY3REYXRhW3Byb3BzLmNvdXJzZU5hbWVdfSAvPil9XHJcblxyXG4gICAgICAgIDxociAvPlxyXG5cclxuICAgICAgICB7aXNMb2FkaW5nID8gPFNwaW5uZXIgLz4gOiA8ZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidG5cIiBvbkNsaWNrPXtldiA9PiB0aGlzLm9wZW5BZGRHb2FsRGlhbG9nKCl9PlxyXG4gICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1saXN0LWFsdFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cclxuICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJ3ZWVrcGxhbm5lci5sZWFybmluZ0dvYWxcIiBkZWZhdWx0TWVzc2FnZT1cIkVnZXQgbMOkcmFuZGVtw6VsXCIvPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ0blwiIHN0eWxlPXtpc0NvcHlpbmdUYXNrcyA/IHtvcGFjaXR5OiAwLjV9IDogdW5kZWZpbmVkfSBvbkNsaWNrPXtldiA9PiAoIWlzQ29weWluZ1Rhc2tzKSAmJiB0aGlzLmNvcHlGcm9tUHJldmlvdXNXZWVrKCl9PlxyXG4gICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1jbG9uZVwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cclxuICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJ3ZWVrcGxhbm5lci5jb3B5UHJldmlvdXNXZWVrVGFrc1wiIGRlZmF1bHRNZXNzYWdlPVwiS29waWVyYSBlaiBrbGFyYSBmcsOlbiBmw7ZyZWfDpWVuZGUgdmVja2FcIi8+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxPcGVuQ2xvc2VCb3hcclxuICAgICAgICAgICAgdGl0bGU9ezxoNT48Rm9ybWF0dGVkTWVzc2FnZSBpZD1cIndlZWtwbGFubmVyLnN0cmF0ZWd5QW5kRXZhbHVhdGlvblwiIGRlZmF1bHRNZXNzYWdlPVwiU3RyYXRlZ2kgJiBVdHbDpHJkZXJpbmdcIi8+PC9oNT59XHJcbiAgICAgICAgICAgIGhlYWRlck9wZW49e3RoaXMuc3RhdGUub3BlbkNvdXJzZXNbXCJTdHJhdFV0dlwiXX1cclxuICAgICAgICAgICAgb25PcGVuQ2xvc2U9e2JlY2FtZU9wZW4gPT4gdGhpcy5zZXRJc09wZW4oXCJTdHJhdFV0dlwiLCBiZWNhbWVPcGVuKX1cclxuICAgICAgICAgID5cclxuICAgICAgICAgICAgPGgzPjxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwid2Vla3BsYW5uZXIuc3RyYXRlZ3lcIiBkZWZhdWx0TWVzc2FnZT1cIlN0cmF0ZWdpXCIvPjwvaDM+XHJcbiAgICAgICAgICAgIDxwPjxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwid2Vla3BsYW5uZXIuc3RyYXRlZ3lEZXNjcmlwdGlvblwiIGRlZmF1bHRNZXNzYWdlPVwiSHVyIGphZyBza2EgZ8O2cmEgZsO2ciBhdHQgbMOkcmEgbWlnLlwiLz48L3A+XHJcbiAgICAgICAgICAgIDxoci8+XHJcbiAgICAgICAgICAgIDx0ZXh0YXJlYVxyXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cIndlZWtwbGFubmVyLXRleHRhcmVhXCJcclxuICAgICAgICAgICAgICBkaXNhYmxlZD17dGhpcy5wcm9wcy5lbnYudHV0b3JlZH1cclxuICAgICAgICAgICAgICB2YWx1ZT17c3RyYXRlZ3kgJiYgc3RyYXRlZ3kuc3Vic3RyKDAsIE1BWF9TVFJBVEVHWV9MRU5HVEgpfVxyXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXtldiA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtzdHJhdGVneTogKGV2LnRhcmdldC52YWx1ZSB8fCAnJykuc3Vic3RyKDAsIE1BWF9TVFJBVEVHWV9MRU5HVEgpfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndlZWtUZXh0c1NhdmluZ0pvYi50cmlnZ2VyQ2hhbmdlKDUwMCk7XHJcbiAgICAgICAgICAgICAgfX0gLz5cclxuXHJcbiAgICAgICAgICAgIDxoMz48Rm9ybWF0dGVkTWVzc2FnZSBpZD1cIndlZWtwbGFubmVyLmV2YWx1YXRpb25cIiBkZWZhdWx0TWVzc2FnZT1cIlV0dsOkcmRlcmluZ1wiLz48L2gzPlxyXG4gICAgICAgICAgICA8cD48Rm9ybWF0dGVkTWVzc2FnZSBpZD1cIndlZWtwbGFubmVyLmV2YWx1YXRpb25EZXNjcmlwdGlvblwiIGRlZmF1bHRNZXNzYWdlPVwiUmVmbGVrdGlvbiBrcmluZyBkaW4gYXJiZXRzaW5zYXRzIG9jaCBkaW5hIHZhbGRhIHN0cmF0ZWdpZXIgdW5kZXIgdmVja2FuLlV0dsOkcmRlcmEgaSBmw7ZyaMOlbGxhbmRlIHRpbGwgZGluYSBtw6VsLlwiLz48L3A+XHJcbiAgICAgICAgICAgIDxoci8+XHJcbiAgICAgICAgICAgIDx0ZXh0YXJlYVxyXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cIndlZWtwbGFubmVyLXRleHRhcmVhXCJcclxuICAgICAgICAgICAgICB2YWx1ZT17YXNzZXNzbWVudCAmJiBhc3Nlc3NtZW50LnN1YnN0cigwLCBNQVhfQVNTRVNTTUVOVF9MRU5HVEgpfVxyXG4gICAgICAgICAgICAgIGRpc2FibGVkPXt0aGlzLnByb3BzLmVudi50dXRvcmVkfVxyXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXtldiA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHthc3Nlc3NtZW50OiAoZXYudGFyZ2V0LnZhbHVlIHx8ICcnKS5zdWJzdHIoMCwgTUFYX0FTU0VTU01FTlRfTEVOR1RIKX0pXHJcbiAgICAgICAgICAgICAgICB0aGlzLndlZWtUZXh0c1NhdmluZ0pvYi50cmlnZ2VyQ2hhbmdlKDUwMCk7XHJcbiAgICAgICAgICAgICAgfSB9Lz5cclxuICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ0blwiXHJcbiAgICAgICAgICAgICAgdGFiSW5kZXg9ezB9XHJcbiAgICAgICAgICAgICAgc3R5bGU9e2VuYWJsZVNhdmVCdXR0b24gPyB7fSA6IHtvcGFjaXR5OiAwLjV9fVxyXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpPT4haXNTYXZpbmcgJiYgdGhpcy53ZWVrVGV4dHNTYXZpbmdKb2IudHJpZ2dlckNoYW5nZSgwKX0+XHJcbiAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1mbG9wcHktb1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiIC8+XHJcbiAgICAgICAgICAgICAgICAgIHtlbmFibGVTYXZlQnV0dG9uID8gPEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJjb21tb24uc2F2ZVwiIGRlZmF1bHRNZXNzYWdlPVwiIFNwYXJhXCIvPiA6IDxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwiY29tbW9uLnNhdmVkXCIgZGVmYXVsdE1lc3NhZ2U9XCIgU3BhcmFkXCIvPn1cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9PcGVuQ2xvc2VCb3g+XHJcblxyXG4gICAgICAgIDwvZGl2Pn1cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxEaWFsb2dzXHJcbiAgICAgICAgZGlhbG9ncz17ZGlhbG9nc31cclxuICAgICAgICBwb3BEaWFsb2c9eygpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZShcclxuICAgICAgICAgICAgICAoe2RpYWxvZ3N9KSA9PiAoeyBkaWFsb2dzOiBkaWFsb2dzLnNsaWNlKDAsIGRpYWxvZ3MubGVuZ3RoIC0gMSkgfSkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gLz5cclxuICAgIDwvZGl2PlxyXG4gIH1cclxufSIsImltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcclxuXHJcbmV4cG9ydCB0eXBlIFRlcm0gPSAnQVQnIHwgJ1NUJzsgLy8gc2hvdWxkIGJlIGNoYW5nZWQgaW50byBGaXJzdCBUZXJtIC8gU2Vjb25kIFRlcm1cclxuZXhwb3J0IHR5cGUgQWNhZGVtaWNZZWFyID0gc3RyaW5nOyAvLyBcIjIwMTYvMjAxN1wiLCBcIjIwMTcvMjAxOFwiLCAuLi5cclxuZXhwb3J0IHR5cGUgU2Nob29sR3JhZGUgPSBudW1iZXI7IC8vIDAtOSAoZ3J1bmRza29sYSksIDEwLTEzIChneW1uYXNpdW0pXHJcbmV4cG9ydCB0eXBlIEdyYWRlID0gJ0EnIHwgJ0InIHwgJ0MnIHwgJ0QnIHwgJ0UnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBVc2VyIHtcclxuICAgIHVzZXJuYW1lPzogc3RyaW5nO1xyXG4gICAgbWFpbDogc3RyaW5nO1xyXG4gICAgZGlzcGxheU5hbWU6IHN0cmluZztcclxuICAgIHJvbGVzOiBzdHJpbmdbXTtcclxuICAgIHNjaG9vbEdyYWRlPzogbnVtYmVyO1xyXG4gICAgc2Nob29sPzogc3RyaW5nO1xyXG4gICAgc2Nob29sVHlwZT86IHN0cmluZztcclxuICAgIHR1dG9yRm9yPzogc3RyaW5nO1xyXG4gICAgZ3JvdXBzPzogc3RyaW5nW107XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQWNhZGVtaWNZZWFyU3RydWN0dXJlXHJcbntcclxuIGFjYWRlbWljWWVhciA6IEFjYWRlbWljWWVhcjtcclxuIHN0YXJ0RGF0ZTogbW9tZW50Lk1vbWVudDtcclxuIGVuZERhdGU6IG1vbWVudC5Nb21lbnQ7XHJcbiBhY2FkZW1pY1N0YXJ0V2VlazogbnVtYmVyO1xyXG4gYWNhZGVtaWNFbmRXZWVrOiBudW1iZXI7XHJcbiBob2xpZGF5czoge3N0YXJ0RGF0ZTogc3RyaW5nLCBlbmREYXRlOiBzdHJpbmd9W107XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgTGVhcm5pbmdNb2R1bGVUYXNrcyB7XHJcbiAgICBtb2R1bGVOYW1lOiBzdHJpbmc7XHJcbiAgICB1cmw/OiBzdHJpbmc7XHJcbiAgICBzdWJqZWN0OiBTY2hvb2xTdWJqZWN0O1xyXG4gICAgY29tbW9uVGFza3M/OiBMZWFybmluZ1Rhc2tbXTtcclxuICAgIGxlYXJuaW5nR29hbHM6IExlYXJuaW5nR29hbFtdO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIExlYXJuaW5nR29hbCB7XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICB0YXNrcz86IExlYXJuaW5nVGFza1tdO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEN1c3RvbUdvYWwge1xyXG4gIG5hbWU6IHN0cmluZyxcclxuICB1cmw6IHN0cmluZyxcclxuICBjb3Vyc2U6IHN0cmluZyxcclxuICBkZXNjcmlwdGlvbjogc3RyaW5nXHJcbn1cclxuXHJcblxyXG4vKmV4cG9ydCBpbnRlcmZhY2UgTGVhcm5pbmdHb2FsIHtcclxuICAgIGlkPzogc3RyaW5nO1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgY291cnNlSWQ/OiBzdHJpbmc7XHJcbiAgICBzdWJqZWN0SWQ/OiBzdHJpbmc7XHJcbn0qL1xyXG5cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgTGVhcm5pbmdUYXNrIHtcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIHVybD86IHN0cmluZztcclxuICAgIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xyXG4gICAgZG9uZT86IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgTGVhcm5pbmdDb3Vyc2Uge1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgdXJsPzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNjaG9vbFN1YmplY3Qge1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgY291cnNlOiBMZWFybmluZ0NvdXJzZTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENvdXJzZSB7XHJcbiAgICAvL1NjaGVtYTogXCJbeWVhcit0ZXJtK3NjaG9vbFllYXIrbmFtZV0sc29ydG9yZGVyXCI7XHJcbiAgICBpZD86IHN0cmluZztcclxuICAgIC8vYVllYXI6IHN0cmluZzsgLy8gQWNhZGVtaWMgWWVhciAvIEzDpHPDpXIgLyBcIjIwMTYvMjAxN1wiLCBcIjIwMTcvMjAxOFwiLCAuLi5cclxuICAgIC8vc2Nob29sR3JhZGU6IG51bWJlcjsgLy8gw4Vyc2t1cnMgKDAtOSBncnVuZHNrb2xhLCAxMC0xMyBneW1uYXNpdW0pLiAxMDAgPSBlaiBidW5kZXQgdGlsbCDDpXJza3Vycy5cclxuICAgIC8vdGVybT86IFRlcm07IC8vIEFUIChBdXR1bW4gVGVybSkgLyBTVCAoU3ByaW5nIFRlcm0pXHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICBwb2ludHM/OiBudW1iZXI7XHJcbiAgICBtb2R1bGVzPzogQ291cnNlTW9kdWxlW107XHJcbiAgICBsZWFybmluZ0dvYWxzPzogTGVhcm5pbmdHb2FsW107XHJcbiAgICB1cmw/OiBzdHJpbmc7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENvdXJzZU1vZHVsZSB7XHJcbiAgICBpZD86IHN0cmluZztcclxuICAgIGNvdXJzZUlkOiBzdHJpbmc7XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICByZWFkb25seSB1cmw6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBUYXJnZXRHcmFkZSB7XHJcbiAgICBpZD86IHN0cmluZztcclxuICAgIHVzZXI6IHN0cmluZztcclxuICAgIGNvdXJzZUlkPzogc3RyaW5nO1xyXG4gICAgc3ViamVjdElkPzogc3RyaW5nO1xyXG4gICAgYVllYXI/OiBBY2FkZW1pY1llYXI7IC8vIEzDpHPDpXIsIHRleCBcIjIwMTYvMjAxN1wiLiBudWxsIG1lYW5zIGZpbmFsIGdvYWwuXHJcbiAgICB0ZXJtPzogVGVybTsgLy8gbnVsbCBtZWFucyBmaW5hbCBnb2FsLlxyXG4gICAgZ3JhZGU6IEdyYWRlO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IGZ1dHVyZUFiaWxpdGllcyA9IFtcclxuICAgIFwiTMOkcmEgYXR0IGzDpHJhXCIsXHJcbiAgICBcIlNhbWFyYmV0YVwiLFxyXG4gICAgXCJBZ2VyYSBnbG9iYWx0XCIsXHJcbiAgICBcIlZpc2EgaGFuZGxpbmdza3JhZnRcIixcclxuICAgIFwiVmFyYSBpbm5vdmF0aXZcIixcclxuICAgIFwiTGV2YSBkaWdpdGFsdFwiXTtcclxuIiwiaW1wb3J0IHsgcGFyc2VRdWVyeVN0cmluZyB9IGZyb20gJy4uL3V0aWxzL3F1ZXJ5LXN0cmluZyc7XHJcbmltcG9ydCBGZWF0dXJlRGVzY3JpcHRpb25zIGZyb20gJy4vZmVhdHVyZS1mbGFncy5qc29uJztcclxuaW1wb3J0IHsgY2ZnIH0gZnJvbSAnLi4vZ2xvYmFscy9LRUQuY2ZnJztcclxuXHJcbnR5cGUgRmVhdHVyZUZsYWdzID0ge3JlYWRvbmx5IFtQIGluIGtleW9mIHR5cGVvZiBGZWF0dXJlRGVzY3JpcHRpb25zXTogYm9vbGVhbn07XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEZlYXR1cmVzIGV4dGVuZHMgRmVhdHVyZUZsYWdzIHt9XHJcblxyXG5leHBvcnQgY2xhc3MgRmVhdHVyZXMge1xyXG4gIHByaXZhdGUgX2ZlYXR1cmVzOiBGZWF0dXJlRmxhZ3M7XHJcbiAgcHJpdmF0ZSBfaW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIGlmICh0aGlzLl9pbml0aWFsaXplZCkgcmV0dXJuO1xyXG4gICAgbGV0IHR1cm5lZE9uRmVhdHVyZXMgPSAoY2ZnLktFRF9GRUFUVVJFUyB8fCBcIlwiKS5zcGxpdCgnLCcpLm1hcChuYW1lID0+IG5hbWUudHJpbSgpLnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgY29uc3QgcXVlcnkgPSBwYXJzZVF1ZXJ5U3RyaW5nKGxvY2F0aW9uLnNlYXJjaCwge3RvTG93ZXI6IHRydWV9KTtcclxuXHJcbiAgICBpZiAocXVlcnkudGVzdHZlcnNpb24pIHtcclxuICAgICAgdHVybmVkT25GZWF0dXJlcyA9IFtcIipcIl07XHJcbiAgICB9XHJcbiAgICBpZiAocXVlcnkuZmVhdHVyZXMpIHtcclxuICAgICAgdHVybmVkT25GZWF0dXJlcyA9IHF1ZXJ5LmZlYXR1cmVzXHJcbiAgICAgICAgLnNwbGl0KCcsJylcclxuICAgICAgICAubWFwKGZlYXR1cmUgPT4gZmVhdHVyZS50cmltKCkudG9Mb3dlckNhc2UoKSk7XHJcbiAgICB9XHJcbiAgICBjb25zdCB0dXJuT25BbGwgPSB0dXJuZWRPbkZlYXR1cmVzLmluY2x1ZGVzKCcqJyk7XHJcbiAgICB0aGlzLl9mZWF0dXJlcyA9IHt9IGFzIEZlYXR1cmVGbGFncztcclxuICAgIGZvciAoY29uc3QgZmVhdHVyZU5hbWUgb2YgT2JqZWN0LmtleXMoRmVhdHVyZURlc2NyaXB0aW9ucykpIHtcclxuICAgICAgdGhpcy5fZmVhdHVyZXNbZmVhdHVyZU5hbWVdID0gdHVybk9uQWxsIHx8XHJcbiAgICAgICAgdHVybmVkT25GZWF0dXJlcy5pbmNsdWRlcyhmZWF0dXJlTmFtZS50b0xvd2VyQ2FzZSgpKVxyXG4gICAgfVxyXG4gICAgdGhpcy5faW5pdGlhbGl6ZWQgPSB0cnVlOyAgICBcclxuICB9XHJcblxyXG4gIGNvbnN0cnVjdG9yICgpIHtcclxuICAgIGZvciAoY29uc3QgZmVhdHVyZU5hbWUgb2YgT2JqZWN0LmtleXMoRmVhdHVyZURlc2NyaXB0aW9ucykpIHtcclxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIGZlYXR1cmVOYW1lLCB7XHJcbiAgICAgICAgZ2V0KCkge1xyXG4gICAgICAgICAgaWYgKCF0aGlzLl9pbml0aWFsaXplZCkgdGhpcy5pbml0KCk7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5fZmVhdHVyZXNbZmVhdHVyZU5hbWVdO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0KHZhbHVlKSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZlYXR1cmUgZmxhZ3MgY2Fubm90IGJlIHNldCBoZXJlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGZlYXR1cmVzID0gbmV3IEZlYXR1cmVzKCk7XHJcbiIsImV4cG9ydCAqIGZyb20gJy4vZmVhdHVyZXMnO1xyXG4iLCJpbXBvcnQgY2ZnIGZyb20gJy4uL2dsb2JhbHMvS0VELmNmZyc7XHJcblxyXG5kZWNsYXJlIHZhciBwcm9jZXNzOiBhbnk7XHJcblxyXG5jZmcuRU5WSVJPTk1FTlQgPSBwcm9jZXNzLmVudi5FTlZJUk9OTUVOVCBhcyBcInByb2R1Y3Rpb25cIiB8IFwiZGV2ZWxvcG1lbnRcIiB8IFwidGVzdFwiO1xyXG5jZmcuS0VEX0FQSV9VUkwgPSBwcm9jZXNzLmVudi5LRURfQVBJX1VSTDsgLy8gXCJodHRwczovL2tlZGJhY2tlbmR0ZXN0LmF6dXJld2Vic2l0ZXMubmV0L2FwaS9cIlxyXG5jZmcuRURTX0FQSV9VUkwgPSBwcm9jZXNzLmVudi5FRFNfQVBJX1VSTDsgLy8gXCJodHRwczovL2Vkc3BvcnRhbG93aW5hcGkuYXp1cmV3ZWJzaXRlcy5uZXQvYXBpL1wiXHJcbmNmZy5LRURfVE9LRU5fVVJMID0gcHJvY2Vzcy5lbnYuS0VEX1RPS0VOX1VSTDsgLy8gXCJodHRwczovL2tlZGF1dGh0ZXN0LmF6dXJld2Vic2l0ZXMubmV0L3Rva2VuXCJcclxuY2ZnLktFRF9DTElFTlRfSUQgPSBwcm9jZXNzLmVudi5LRURfQ0xJRU5UX0lEOyAvLyBcImRldmNsaWVudFwiLCBcInRlc3RjbGllbnRcIiwgXCIuLi5cIlxyXG5jZmcuS0VEX0NMSUVOVF9TRUNSRVQgPSBwcm9jZXNzLmVudi5LRURfQ0xJRU5UX1NFQ1JFVDtcclxuY2ZnLktFRF9SRUFMTSA9IHByb2Nlc3MuZW52LktFRF9SRUFMTTsgLy8gXCJTRTFcIlxyXG5jZmcuS0VEX0xPQ0FMRSA9IGNmZy5LRURfTE9DQUxFIHx8IHByb2Nlc3MuZW52LktFRF9MT0NBTEU7IC8vIFwic3ZcIiwgXCJlblwiLiBPbmx5IHNldCBmcm9tIHByb2Nlc3MuZW52IGlmIG5vdCBzZXQgZnJvbSBTaXRlVmlzaW9uIGVsZW1lbnQgY29uZmlnLlxyXG5jZmcuS0VEX1NDSE9PTF9MT0NBTEUgPSBjZmcuS0VEX1NDSE9PTF9MT0NBTEUgfHwgcHJvY2Vzcy5lbnYuS0VEX1NDSE9PTF9MT0NBTEU7IC8vIFwic3ZcIiwgXCJlbl9zaW5cIiwgXCJlbl9uaW5cIi4gT25seSBzZXQgZnJvbSBwcm9jZXNzLmVudiBpZiBub3Qgc2V0IGZyb20gU2l0ZVZpc2lvbiBlbGVtZW50IGNvbmZpZy5cclxuY2ZnLktFRF9SRVNPVVJDRVNfVVJMID0gY2ZnLktFRF9SRVNPVVJDRVNfVVJMIHx8IHByb2Nlc3MuZW52LktFRF9SRVNPVVJDRVNfVVJMO1xyXG4iLCIvKiBUaGVzZSBzY3JpcHRzIGFzc3VtZSBzb21lIG9mIHRoZSBnbG9iYWwgdmFycyBoYXZlIGFscmVhZHkgYmVlbiBzZXQ6XHJcbiAgKiBLRUQuY2ZnXHJcbiAgKiBLRUQuZW52LmN1cnJlbnRVc2VyXHJcblxyXG4gIFRoZSByZXN0IHdpbGwgYmUgc2V0IGhlcmUgKGNsaWVudCBzaWRlKVxyXG4qL1xyXG5pbXBvcnQgJy4vY29uZmlndXJlJztcclxuaW1wb3J0ICcuL3NldC1iZWFyZXItcHJvdmlkZXJzJztcclxuaW1wb3J0ICcuL3NldC1rZWQtYmFja2VuZC1jbGllbnQnO1xyXG5pbXBvcnQgJy4vc2V0LWVkcy1jbGllbnQnO1xyXG4iLCJpbXBvcnQgeyBwYXJzZVF1ZXJ5U3RyaW5nLCBnZW5lcmF0ZVF1ZXJ5U3RyaW5nLCBzcGxpdFVybEFuZFF1ZXJ5IH0gZnJvbSBcIi4uL3V0aWxzL3F1ZXJ5LXN0cmluZ1wiO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kQ2xpZW50V2ViLCBXZWJTZXJ2ZXJCZWFyZXJQcm92aWRlciwgaXNvbW9ycGhpYywgc3RvcmFnZSB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50d2ViJztcclxuaW1wb3J0IHsgQmVhcmVyUHJvdmlkZXIsIEtlZEJlYXJlclByb3ZpZGVyIH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnQnO1xyXG5pbXBvcnQgY2ZnIGZyb20gJy4uL2dsb2JhbHMvS0VELmNmZyc7XHJcbmltcG9ydCBlbnYgZnJvbSAnLi4vZ2xvYmFscy9LRUQuZW52JztcclxuaW1wb3J0IHsgVXNlciB9IGZyb20gXCIuLi9jb250cmFjdHMva2VkLW1vZGVsc1wiO1xyXG5pbXBvcnQgeyBJTVBFUlNPTkFUSU9OX1FVRVJZX1BBUkFNUyB9IGZyb20gXCIuLi9hY2Nlc3MtY29udHJvbC9pbmRleFwiO1xyXG5pbXBvcnQgeyBjaGVycnlQaWNrUHJvcHMgfSBmcm9tIFwiLi4vdXRpbHMvdXRpbHNcIjtcclxuXHJcbmZ1bmN0aW9uIGdldE1lcmdlZFRva2VuUGF0aCh0b2tlblBhdGg6IHN0cmluZywgbG9jYXRpb25TZWFyY2g6IHN0cmluZywgc2NvcGVzOiBzdHJpbmdbXSkge1xyXG4gIC8vIE1lcmdlIGNvbmZpZ3VyZWQgcXVlcnkgcGFyYW1zIG9mIHRva2VuIHBhdGggd2l0aCBwYXJhbXMgZ2l2ZW4gdG8gY3VycmVudCBwYWdlXHJcbiAgY29uc3QgY3VycmVudFF1ZXJ5ID0gcGFyc2VRdWVyeVN0cmluZyhsb2NhdGlvblNlYXJjaCk7XHJcbiAgY29uc3QgaW1wZXJzb25hdGlvblByb3BzID0gY2hlcnJ5UGlja1Byb3BzKGN1cnJlbnRRdWVyeSwgSU1QRVJTT05BVElPTl9RVUVSWV9QQVJBTVMpO1xyXG4gIGNvbnN0IFt0b2tlblBhdGhXaXRob3V0UXVlcnksIHRva2VuUXVlcnlTdHJpbmddID0gc3BsaXRVcmxBbmRRdWVyeSh0b2tlblBhdGgpO1xyXG4gIGNvbnN0IHRva2VuUGF0aFF1ZXJ5ID0gcGFyc2VRdWVyeVN0cmluZyh0b2tlblF1ZXJ5U3RyaW5nKTtcclxuICByZXR1cm4gdG9rZW5QYXRoV2l0aG91dFF1ZXJ5ICsgZ2VuZXJhdGVRdWVyeVN0cmluZyh7XHJcbiAgICAuLi50b2tlblBhdGhRdWVyeSxcclxuICAgIC4uLmltcGVyc29uYXRpb25Qcm9wcyxcclxuICAgIHNjb3Blczogc2NvcGVzLmpvaW4oJywnKVxyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRUb2tlbklkKG1lcmdlZFRva2VuUGF0aDogc3RyaW5nLCB1c2VyRW1haWw6IHN0cmluZykge1xyXG4gIHJldHVybiBtZXJnZWRUb2tlblBhdGggKyBcIi9cIiArIHVzZXJFbWFpbDtcclxufVxyXG5cclxuZnVuY3Rpb24gc2F2ZVVzZXJJbmZvKHVzZXI6IFVzZXIsIHRva2VuSWQ6IHN0cmluZykge1xyXG4gIGVudi5jdXJyZW50VXNlciA9IHVzZXI7XHJcbiAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShcInVzZXJJbmZvXCIgKyB0b2tlbklkLCBKU09OLnN0cmluZ2lmeSh1c2VyKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGxvYWRVc2VySW5mbyh0b2tlbklkOiBzdHJpbmcpIHtcclxuICBjb25zdCBzdG9yZWRTZXNzaW9uVXNlciA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oXCJ1c2VySW5mb1wiICsgdG9rZW5JZCk7XHJcbiAgaWYgKHN0b3JlZFNlc3Npb25Vc2VyKSB7XHJcbiAgICBlbnYuY3VycmVudFVzZXIgPSBKU09OLnBhcnNlKHN0b3JlZFNlc3Npb25Vc2VyKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUJlYXJlclByb3ZpZGVyKG1lcmdlZFRva2VuUGF0aDogc3RyaW5nLCB1c2VyRW1haWw6IHN0cmluZykge1xyXG4gIGNvbnN0IHRva2VuSWQgPSBnZXRUb2tlbklkKG1lcmdlZFRva2VuUGF0aCwgdXNlckVtYWlsKTtcclxuICByZXR1cm4gbmV3IFdlYlNlcnZlckJlYXJlclByb3ZpZGVyKG1lcmdlZFRva2VuUGF0aCwgcmVzcG9uc2VUZXh0ID0+IHtcclxuICAgIGNvbnN0IHJlcyA9IEpTT04ucGFyc2UocmVzcG9uc2VUZXh0KSBhcyB7IG9rOiBib29sZWFuLCBlcnJvcj86IHN0cmluZywgdG9rZW4/OiBzdHJpbmcsIHVzZXI/OiBVc2VyIH07XHJcbiAgICBpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKHJlcy5lcnJvcik7XHJcbiAgICBpZiAocmVzLnVzZXIpIHtcclxuICAgICAgc2F2ZVVzZXJJbmZvKHJlcy51c2VyLCB0b2tlbklkKTtcclxuICAgIH1cclxuICAgIHJldHVybiB7IHRva2VuOiByZXMudG9rZW4sIGV4cGlyZXM6IERhdGUubm93KCkgKyA1OSAqIDYwICogMTAwMCB9O1xyXG4gIH0sIHRva2VuSWQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVHb29nbGVUb2tlblByb3ZpZGVyKG1lcmdlZFRva2VuUGF0aDogc3RyaW5nLCB1c2VyRW1haWw6IHN0cmluZykge1xyXG4gIGNvbnN0IHRva2VuSWQgPSBnZXRUb2tlbklkKG1lcmdlZFRva2VuUGF0aCwgdXNlckVtYWlsKTtcclxuICByZXR1cm4gbmV3IFdlYlNlcnZlckJlYXJlclByb3ZpZGVyKG1lcmdlZFRva2VuUGF0aCwgcmVzcG9uc2VUZXh0ID0+IHtcclxuICAgIGNvbnN0IHJlcyA9IEpTT04ucGFyc2UocmVzcG9uc2VUZXh0KSBhcyB7IG9rOiBib29sZWFuLCBlcnJvcj86IHN0cmluZywgdG9rZW4/OiBzdHJpbmcsIHVzZXI/OiBVc2VyIH07XHJcbiAgICBpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKHJlcy5lcnJvcik7XHJcbiAgICByZXR1cm4geyB0b2tlbjogcmVzLnRva2VuLCBleHBpcmVzOiBEYXRlLm5vdygpICsgNTkgKiA2MCAqIDEwMDAgfTtcclxuICB9LCB0b2tlbklkKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlVGVzdFRva2VuUHJvdmlkZXIodG9rZW5Vcmw6IHN0cmluZywgdXNlcjogVXNlciwgc2NvcGVzOiBzdHJpbmdbXSkge1xyXG4gIHJldHVybiBuZXcgS2VkQmVhcmVyUHJvdmlkZXIoXHJcbiAgICBpc29tb3JwaGljLFxyXG4gICAgc3RvcmFnZSxcclxuICAgIHRva2VuVXJsICsgdXNlci5tYWlsICsgbG9jYXRpb24uc2VhcmNoLFxyXG4gICAgY2ZnLktFRF9DTElFTlRfSUQsXHJcbiAgICBjZmcuS0VEX0NMSUVOVF9TRUNSRVQsXHJcbiAgICB0b2tlblVybCwge1xyXG4gICAgICBlbWFpbDogdXNlci5tYWlsLnRvTG93ZXJDYXNlKCksXHJcbiAgICAgIHJvbGVzOiB1c2VyLnJvbGVzLFxyXG4gICAgICBzY2hvb2w6IHVzZXIuc2Nob29sLFxyXG4gICAgICBzY2hvb2xUeXBlOiB1c2VyLnNjaG9vbFR5cGUsXHJcbiAgICAgIHNjb3Blc1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8vIGVudi5jdXJyZW50VXNlci5tYWlsIGlzIHNldCBieSBTaXRlVmlzaW9uIHNlcnZlciBpbml0aWFsbHkuXHJcbi8vIEEgcmVzcG9uc2UgZnJvbSAvYXBpL3Rva2VuIG1heSBjaGFuZ2UgdGhlIG1haWwgYXR0cmlidXRlIG9mIHRoZSBjdXJyZW50XHJcbi8vIHVzZXIsIHNvIGVudi5jdXJyZW50VXNlci5tYWlsIG1heSBiZSBkaWZmZXJlbnQgYWZ0ZXIgZ2V0dGluZyBhIHJlc3BvbnNlLlxyXG4vLyBIb3dldmVyLCB0aGUgaW5pdGlhbCB2YWx1ZSBpcyB2YWx1YWJsZSBhbHdheXMgaW4gb3JkZXIgdG8gZGlzdGluZ3Vpc2ggdGhlIGNhc2VcclxuLy8gd2hlbiBvbmUgbm9ybWFsIHVzZXIgbG9ncyBvdXQgYW5kIGFub3RoZXIgdXNlciBsb2dzIGluLlxyXG5jb25zdCBpbml0aWFsVXNlckVtYWlsID0gZW52LmN1cnJlbnRVc2VyICYmIGVudi5jdXJyZW50VXNlci5tYWlsOyAvLyBJbml0aWFsIHZhbHVlIG9mIG1haWwuIE1heSBjaGFuZ2UuXHJcbmlmIChpbml0aWFsVXNlckVtYWlsKSB7XHJcbiAgLy8gS0VEXHJcbiAgaWYgKGNmZy5LRURfVE9LRU5fUEFUSCkge1xyXG4gICAgLy9cclxuICAgIC8vXHJcbiAgICAvLyBQcm9kdWN0aW9uIC8gU2l0ZVZpc2lvbiBwcm94aWVkIC9hcGkvdG9rZW4gdG8gcmVxdWVzdCB0b2tlbnMgZnJvbTpcclxuICAgIC8vXHJcbiAgICAvL1xyXG4gICAgY29uc3QgbWVyZ2VkVG9rZW5QYXRoID0gZ2V0TWVyZ2VkVG9rZW5QYXRoKFxyXG4gICAgICBjZmcuS0VEX1RPS0VOX1BBVEgsXHJcbiAgICAgIGxvY2F0aW9uLnNlYXJjaCwgW1xyXG4gICAgICAgIFwia2VkYmFja2VuZFwiLFxyXG4gICAgICAgIFwiRURTXCIsXHJcbiAgICAgIF0pO1xyXG4gICAgZW52LmJlYXJlclByb3ZpZGVyID0gY3JlYXRlQmVhcmVyUHJvdmlkZXIobWVyZ2VkVG9rZW5QYXRoLCBpbml0aWFsVXNlckVtYWlsKTtcclxuICAgIGxvYWRVc2VySW5mbyhnZXRUb2tlbklkKG1lcmdlZFRva2VuUGF0aCwgaW5pdGlhbFVzZXJFbWFpbCkpO1xyXG5cclxuICAgIC8vIEdvb2dsZVxyXG4gICAgY29uc3QgZ29vZ2xlTWVyZ2VkUGF0aCA9IGdldE1lcmdlZFRva2VuUGF0aChcclxuICAgICAgY2ZnLktFRF9UT0tFTl9QQVRILFxyXG4gICAgICBsb2NhdGlvbi5zZWFyY2gsIFtcclxuICAgICAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvY2FsZW5kYXIucmVhZG9ubHlcIixcclxuICAgICAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvZHJpdmVcIlxyXG4gICAgICBdKTtcclxuICAgIGVudi5nb29nbGVUb2tlblByb3ZpZGVyID0gY3JlYXRlR29vZ2xlVG9rZW5Qcm92aWRlcihnb29nbGVNZXJnZWRQYXRoLCBpbml0aWFsVXNlckVtYWlsKTtcclxuICB9IGVsc2UgaWYgKGNmZy5LRURfVE9LRU5fVVJMICYmIGNmZy5LRURfQ0xJRU5UX0lEICYmIGNmZy5LRURfQ0xJRU5UX1NFQ1JFVCkge1xyXG4gICAgLy9cclxuICAgIC8vXHJcbiAgICAvLyBUZXN0IC0gZ28gZGlyZWN0bHkgdG8gS0VEQVVUSCBzZXJ2ZXIgdG8gcmV0cmlldmUgdG9rZW5zXHJcbiAgICAvL1xyXG4gICAgLy9cclxuICAgIGVudi5iZWFyZXJQcm92aWRlciA9IGNyZWF0ZVRlc3RUb2tlblByb3ZpZGVyKGNmZy5LRURfVE9LRU5fVVJMLCBlbnYuY3VycmVudFVzZXIsIFtcclxuICAgICAgXCJrZWRiYWNrZW5kXCIsXHJcbiAgICAgIFwiRURTXCIsXHJcbiAgICBdKTtcclxuICAgIGVudi5nb29nbGVUb2tlblByb3ZpZGVyID0gY3JlYXRlVGVzdFRva2VuUHJvdmlkZXIoY2ZnLktFRF9UT0tFTl9VUkwgKyBcIi9nb29nbGVcIiwgZW52LmN1cnJlbnRVc2VyLCBbXHJcbiAgICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC9jYWxlbmRhci5yZWFkb25seVwiLFxyXG4gICAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvZHJpdmVcIlxyXG4gICAgXSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBjb25maWd1cmF0aW9uIHBhcmFtZXRlciBLRURfVE9LRU5fUEFUSGApO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgZW52IGZyb20gJy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCBjZmcgZnJvbSAnLi4vZ2xvYmFscy9LRUQuY2ZnJztcclxuaW1wb3J0IHsgaXNvbW9ycGhpYyB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50d2ViJztcclxuaW1wb3J0IHsgRWRzQ2xpZW50IH0gZnJvbSAnLi4vYXBpcy9lZHNjbGllbnQnO1xyXG5cclxuZW52LmVkc0NsaWVudCA9IG5ldyBFZHNDbGllbnQgKFxyXG4gIGlzb21vcnBoaWMsXHJcbiAgY2ZnLkVEU19BUElfVVJMLFxyXG4gIGVudi5iZWFyZXJQcm92aWRlcixcclxuICAoKT0+ZW52LmN1cnJlbnRVc2VyLm1haWwpO1xyXG5cclxuIiwiaW1wb3J0IGVudiBmcm9tICcuLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5pbXBvcnQgY2ZnIGZyb20gJy4uL2dsb2JhbHMvS0VELmNmZyc7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRDbGllbnRXZWIgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudHdlYic7XHJcblxyXG5lbnYua2VkQmFja2VuZENsaWVudCA9IG5ldyBLZWRCYWNrZW5kQ2xpZW50V2ViIChcclxuICBjZmcuS0VEX0FQSV9VUkwsXHJcbiAgZW52LmJlYXJlclByb3ZpZGVyKTtcclxuXHJcbiIsImltcG9ydCBLRUQgZnJvbSAnLi9LRUQnO1xyXG5cclxuLyogVGhpcyBkZWZhdWx0IGNvbmZpZ3VyYXRpb24gaXMgdXNlZCBhcyBhIGZhbGxiYWNrLlxyXG5Ob3JtYWxseSBib3RoIHRlc3QgcGFnZXMgYW5kIHByb2R1Y3Rpb24gcGFnZXMgd2lsbCBvdmVycmlkZSB0aGVzZSBjb25maWdyYXRpb25zXHJcbiovXHJcbi8qY29uc3QgZGVmYXVsdENvbmZpZ3VyYXRpb24gPSB7XHJcbiAgLy8gRW52aXJvbm1lbnRcclxuICBFTlZJUk9OTUVOVDogJ2RldmVsb3BtZW50JyBhcyAncHJvZHVjdGlvbicgfCAnZGV2ZWxvcG1lbnQnIHwgJ3Rlc3QnLFxyXG4gIC8vIEF1dGhlbnRpY2F0aW9uIFNlcnZlcjpcclxuICBLRURfVE9LRU5fVVJMOiAnaHR0cHM6Ly9rZWRhdXRodGVzdC5henVyZXdlYnNpdGVzLm5ldC90b2tlbicsXHJcbiAgS0VEX1RPS0VOX1BBVEg6ICcvYXBpL3Rva2VuLlNrcmlwdC5wb3J0bGV0P3N2LmNvbnRlbnR0eXBlPWFwcGxpY2F0aW9uL2pzb24nLFxyXG4gIEtFRF9DTElFTlRfSUQ6ICdkZXZjbGllbnQnLFxyXG4gIEtFRF9DTElFTlRfU0VDUkVUOiAnNGZSZGZRcFd0SnFqVFdmJyxcclxuICAvLyBTZXJ2aWNlczpcclxuICBLRURfQVBJX1VSTDogJ2h0dHBzOi8va2VkYmFja2VuZHRlc3QuYXp1cmV3ZWJzaXRlcy5uZXQvYXBpLycsICBcclxuICBFRFNfQVBJX1VSTDogJ2h0dHBzOi8vZWRzcG9ydGFsb3dpbmFwaS5henVyZXdlYnNpdGVzLm5ldC9hcGkvJ1xyXG59Ki9cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUtlZENvbmZpZ3VyYXRpb24ge1xyXG4gIEVOVklST05NRU5UOiAncHJvZHVjdGlvbicgfCAnZGV2ZWxvcG1lbnQnIHwgJ3Rlc3QnO1xyXG4gIEtFRF9SRUFMTTogc3RyaW5nO1xyXG4gIEtFRF9UT0tFTl9VUkw6IHN0cmluZztcclxuICBLRURfVE9LRU5fUEFUSDogc3RyaW5nO1xyXG4gIEtFRF9DTElFTlRfSUQ6IHN0cmluZztcclxuICBLRURfQ0xJRU5UX1NFQ1JFVDogc3RyaW5nO1xyXG4gIEtFRF9BUElfVVJMOiBzdHJpbmc7XHJcbiAgRURTX0FQSV9VUkw6IHN0cmluZztcclxuICBLRURfTE9DQUxFOiBzdHJpbmc7XHJcbiAgS0VEX1NDSE9PTF9MT0NBTEU6IHN0cmluZztcclxuICBLRURfQ09VUlNFX0JVSUxERVJfVVJMOiBzdHJpbmc7XHJcbiAgS0VEX0NPVVJTRV9WSUVXRVJfVVJMOiBzdHJpbmc7XHJcbiAgS0VEX1NVQkpFQ1RfUExBTk5FUl9BRE1JTl9VUkw6IHN0cmluZztcclxuICBLRURfU1VCSkVDVF9QTEFOTkVSX1VSTDogc3RyaW5nO1xyXG4gIEtFRF9GRUFUVVJFUzogc3RyaW5nO1xyXG4gIEtFRF9LRUVQX0FMSVZFX1VSTDogc3RyaW5nO1xyXG4gIEtFRF9FTlVNX1dPUkRCQU5LU19VUkw6IHN0cmluZztcclxuICBLRURfV09SREJBTktTX1VSTDogc3RyaW5nO1xyXG4gIEtFRF9SRVNPVVJDRVNfVVJMOiBzdHJpbmc7XHJcbn07XHJcblxyXG5pZiAoIUtFRC5jZmcpIEtFRC5jZmcgPSB7fTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEtFRC5jZmcgYXMgSUtlZENvbmZpZ3VyYXRpb247XHJcbmV4cG9ydCBjb25zdCBjZmc6IElLZWRDb25maWd1cmF0aW9uID0gS0VELmNmZztcclxuIiwiaW1wb3J0IHtVc2VyLCBMZWFybmluZ01vZHVsZVRhc2tzfSBmcm9tICcuLi9jb250cmFjdHMva2VkLW1vZGVscyc7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRDbGllbnQsIEJlYXJlclByb3ZpZGVyIH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnQnO1xyXG5pbXBvcnQge1VzZXJUYXNrfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7S2VkUmVwb30gZnJvbSAnLi4vcmVwb3Mva2VkLXJlcG8nO1xyXG5pbXBvcnQge0Vkc0NsaWVudH0gZnJvbSAnLi4vYXBpcy9lZHNjbGllbnQnO1xyXG5pbXBvcnQgS0VEIGZyb20gJy4va2VkJztcclxuaW1wb3J0IHsgS1NUZXJtUGxhbm5lclJlcG8gfSBmcm9tICcuLi9yZXBvcy9rcy10ZXJtcGxhbm5lci1yZXBvJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRW52IHtcclxuICAgIGN1cnJlbnRVc2VyPzogVXNlcjtcclxuICAgIGxlYXJuaW5nTW9kdWxlVGFza3M/OiBMZWFybmluZ01vZHVsZVRhc2tzO1xyXG4gICAgYmVhcmVyUHJvdmlkZXI/OiBCZWFyZXJQcm92aWRlcjtcclxuICAgIGdvb2dsZVRva2VuUHJvdmlkZXI/OiBCZWFyZXJQcm92aWRlcjtcclxuICAgIGtlZEJhY2tlbmRDbGllbnQ/OiBLZWRCYWNrZW5kQ2xpZW50O1xyXG4gICAgZWRzQ2xpZW50PzogRWRzQ2xpZW50O1xyXG4gICAgdXNlclRhc2tzUmVwbz87XHJcbiAgICBoaWRkZW5Db3Vyc2VzUmVwbz87XHJcbiAgICB3ZWVrTm90ZXNSZXBvPztcclxuICAgIGtnVGVybVBsYW5uZXJSZXBvPztcclxuICAgIGtzVGVybVBsYW5uZXJSZXBvPzogS1NUZXJtUGxhbm5lclJlcG9cclxuICAgIHR1dG9yZWQ6IGJvb2xlYW47XHJcbiAgICBlcnJvcj86IEVycm9yO1xyXG59XHJcblxyXG5pZiAoIUtFRC5lbnYpIEtFRC5lbnYgPSB7fTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEtFRC5lbnYgYXMgRW52O1xyXG5leHBvcnQgY29uc3QgZW52OiBFbnYgPSBLRUQuZW52O1xyXG4iLCJcclxuZXhwb3J0IGNvbnN0IEtFRF9OQU1FU1BBQ0UgPSBcIktFRFwiO1xyXG5cclxuZGVjbGFyZSB2YXIgS0VEOiBhbnk7XHJcblxyXG52YXIgcmVzdWx0ID0gdHlwZW9mIEtFRCA9PT0gJ3VuZGVmaW5lZCcgPyB7fSA6IEtFRDtcclxuXHJcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgS0VEID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgd2luZG93W0tFRF9OQU1FU1BBQ0VdID0gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCByZXN1bHQ7XHJcbiIsImltcG9ydCBlbnYgZnJvbSAnLi9LRUQuZW52JztcclxuaW1wb3J0IHsgS2VkQmFja2VuZFJlcG8gfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBnZXRHbG9iYWxJZCwgY3JlYXRlVVVJRCB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcclxuaW1wb3J0IGNmZyBmcm9tICcuL0tFRC5jZmcnO1xyXG5pbXBvcnQgeyBTY2hvb2wsIEJyYW5jaCB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgVmFsdWUgfSBmcm9tICdrZWRiYWNrZW5kL29ic2VydmFibGUnO1xyXG5cclxuZXhwb3J0IGNvbnN0IGRiID0gbmV3IEtlZEJhY2tlbmRSZXBvKFxyXG4gICgpPT5lbnYua2VkQmFja2VuZENsaWVudCxcclxuICAoKT0+ZW52LmN1cnJlbnRVc2VyID9cclxuICAgIGVudi5jdXJyZW50VXNlci5tYWlsIDpcclxuICAgIFwiXCIsXHJcbiAgKCk9PmVudi5jdXJyZW50VXNlciA/XHJcbiAgICBlbnYuY3VycmVudFVzZXIuZGlzcGxheU5hbWUgfHwgZW52LmN1cnJlbnRVc2VyLm1haWwgOlxyXG4gICAgXCJcIik7XHJcblxyXG5leHBvcnQgY29uc3QgZ2xvYmFsSWQgPSBnZXRHbG9iYWxJZChjZmcuS0VEX1JFQUxNKTtcclxuZXhwb3J0IGNvbnN0IFNjaG9vbHMgPSB7XHJcbiAgc3RhbmRhcmRTY2hvb2w6IGRiLnNjaG9vbHMubmFtZShcInN0YW5kYXJkXCIpLmNhY2hlT3B0aW1pemVkKCkuc2luZ2xlKCksXHJcbiAgZ2V0IG15U2Nob29sICgpIHsgcmV0dXJuIGRiLnNjaG9vbHMubmFtZShlbnYuY3VycmVudFVzZXIuc2Nob29sKS5jYWNoZU9wdGltaXplZCgpLnNpbmdsZSgpOyB9XHJcbn07XHJcbmV4cG9ydCBjb25zdCBDb3Vyc2VJbnN0YW5jZXMgPSB7XHJcbiAgZ2V0QnJhbmNoSWQoc2Nob29sOiBWYWx1ZTxTY2hvb2w+LCBjb3Vyc2VJZDogc3RyaW5nKSB7XHJcbiAgICByZXR1cm4gc2Nob29sLnN3aXRjaE1hcChzY2hvb2wgPT5cclxuICAgICAgZGIuYnJhbmNoZXNcclxuICAgICAgICAuaGFzRWRnZXNGcm9tKFtzY2hvb2wub2ZmaWNpYWxCcmFuY2hJZF0pXHJcbiAgICAgICAgLm5hbWUoXCJkcmFmdFwiKVxyXG4gICAgICAgIC50YWdzKGNvdXJzZUlkKVxyXG4gICAgICAgIC5pZHNPbmx5KClcclxuICAgICAgICAubWFwKCh7aWR9KSA9PiBpZClcclxuICAgICAgICAudG9WYWx1ZSgpXHJcbiAgICAgICAgLm1hcChpZHMgPT4gaWRzLmxlbmd0aCA+IDAgPyBpZHNbMF0gOiB1bmRlZmluZWQpKTtcclxuICB9LFxyXG5cclxuICAvKiogR2V0IGEgRFJBRlQgYnJhbmNoIGZvciBnaXZlbiBjb3Vyc2UgSUQgYW5kIGdpdmVuIHNjaG9vbC5cclxuICAgKiBJZiB0aGVyZSBpcyBub3QgeWV0IHN1Y2ggYSBicmFuY2gsIGNyZWF0ZSBpdCB1c2luZyBtdXRhdGlvbnNPbkVtcHR5KCkgd2hpY2ggd2lsbFxyXG4gICAqIGxlYWQgdG8gdGhlIEMjIGNvZGUgRG9jdW1lbnRSZXBvc2l0b3J5LlJlYWRPck11dGF0ZSgpIHZpYSBEb2N1bWVudENvbnRyb2xsZXIuXHJcbiAgICovXHJcbiAgZ2V0T3JDcmVhdGVCcmFuY2hJZChzY2hvb2w6IFZhbHVlPFNjaG9vbD4sIGNvdXJzZUlkOiBzdHJpbmcpIHtcclxuICAgIHJldHVybiBkYi5jb3Vyc2VJbnN0YW5jZXMuaWRzT25seSgpLmlkKGNvdXJzZUlkKS5zd2l0Y2hNYXAoKCk9PiAvLyBUSGlzIGZpcnN0IGxpbmUgdmVyaWZpZXMgY291cnNlIGV4aXN0cy4gSWYgZGVsZXRlZCwgZG9uJ3QgdHJ5IHRvIHJlY3JlYXRlIGl0cyBicmFuY2ghXHJcbiAgICAgIHNjaG9vbC5zd2l0Y2hNYXAoc2Nob29sID0+IFxyXG4gICAgICBkYi5icmFuY2hlc1xyXG4gICAgICAgIC5oYXNFZGdlc0Zyb20oW3NjaG9vbC5vZmZpY2lhbEJyYW5jaElkXSlcclxuICAgICAgICAubmFtZShcImRyYWZ0XCIpXHJcbiAgICAgICAgLnRhZ3MoY291cnNlSWQpXHJcbiAgICAgICAgLmlkc09ubHkoKVxyXG4gICAgICAgIC5tdXRhdGlvbnNPbkVtcHR5KHR4ID0+IHtcclxuICAgICAgICAgIC8vIFRoZXNlIDIgbXV0YXRpb25zIHdpbGwgb2NjdXIgc2VydmVyIHNpZGUsIGF0b21pY2FsbHkuXHJcbiAgICAgICAgICAvLyBXaWxsIGJlIHNlbnQgb24gZWFjaCByZXF1ZXN0IGluIHRoZSBxdWVyeSwgYnV0IHdpbGwgb25seSBleGVjdXRlIGlmIHF1ZXJ5IHJlc3VsdHMgaW4gemVybyBpdGVtcy5cclxuICAgICAgICAgIC8vY29uc29sZS5sb2coXCJTY2hvb2w6XCIsIHNjaG9vbCk7XHJcbiAgICAgICAgICBjb25zdCBpZCA9IGNyZWF0ZVVVSUQoKTtcclxuICAgICAgICAgIHR4LmFkZChcImJyYW5jaGVzXCIsIHtcclxuICAgICAgICAgICAgaWQsXHJcbiAgICAgICAgICAgIGFjbDogW1xyXG4gICAgICAgICAgICAgIFwicm9sZTpVU0VSOlJcIixcclxuICAgICAgICAgICAgICBgc2Nob29sUm9sZToke3NjaG9vbC5uYW1lfS9FTVBMT1lFRTpTYFxyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICBuYW1lOiAnZHJhZnQnLFxyXG4gICAgICAgICAgICBzY2hvb2xJZDogc2Nob29sLmlkLFxyXG4gICAgICAgICAgICB0cmVlUGFyZW50SWQ6IHNjaG9vbC5vZmZpY2lhbEJyYW5jaElkLFxyXG4gICAgICAgICAgICB0YWdzOiBbY291cnNlSWRdXHJcbiAgICAgICAgICB9IGFzIEJyYW5jaCk7XHJcbiAgICAgICAgICAvLyBBcHByb3ZpbmcgdGhlIGJyYW5jaCBtYWtlcyBzdXJlIHRoYXQgaXQgd2FzIGNyZWF0ZWQgYnkgYW4gRU1QTE9ZRUUgb24gZ2l2ZW4gc2Nob29sLlxyXG4gICAgICAgICAgdHgubGluazIoXCJicmFuY2hlc1wiLCBzY2hvb2wub2ZmaWNpYWxCcmFuY2hJZCwgXCJhcHByb3ZlZENoaWxkcmVuXCIsIGlkKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5zaW5nbGUoKVxyXG4gICAgICAgIC5tYXAoKHtpZH0pID0+IGlkKSkpO1xyXG4gIH0sXHJcblxyXG4gIGdldEFsbERlc2NlbmRhbnRJZHMoY291cnNlSWQ6IHN0cmluZykge1xyXG4gICAgcmV0dXJuIGRiLmNvdXJzZUJsb2Nrcy50YWdzKGNvdXJzZUlkKS5pZHNPbmx5KCkuY29uY2F0KFxyXG4gICAgICBkYi5jb3Vyc2VDb250ZW50cy50YWdzKGNvdXJzZUlkKS5pZHNPbmx5KCkpLmNvbmNhdChcclxuICAgICAgZGIuY291cnNlVGFicy50YWdzKGNvdXJzZUlkKS5pZHNPbmx5KCkpLmNvbmNhdChcclxuICAgICAgZGIudGFza3MudGFncyhjb3Vyc2VJZCkuaWRzT25seSgpKVxyXG4gICAgICAubWFwKHggPT4geC5pZCk7XHJcbiAgfVxyXG59XHJcbiIsIlxyXG5leHBvcnQgY29uc3QgS0VEX05BTUVTUEFDRSA9IFwiS0VEXCI7XHJcblxyXG5kZWNsYXJlIHZhciBLRUQ6IGFueTtcclxuXHJcbnZhciByZXN1bHQgPSB0eXBlb2YgS0VEID09PSAndW5kZWZpbmVkJyA/IHt9IDogS0VEO1xyXG5cclxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBLRUQgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICB3aW5kb3dbS0VEX05BTUVTUEFDRV0gPSByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHJlc3VsdDtcclxuIiwiaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xyXG5pbXBvcnQgY2ZnIGZyb20gJy4uL2dsb2JhbHMvS0VELmNmZyc7XHJcblxyXG5pZiAoY2ZnLktFRF9MT0NBTEUgPT09IFwic3ZcIikge1xyXG4gICAgbW9tZW50LnVwZGF0ZUxvY2FsZSgnc3YnLCB7XHJcbiAgICAgICAgbW9udGhzOiAnamFudWFyaV9mZWJydWFyaV9tYXJzX2FwcmlsX21hal9qdW5pX2p1bGlfYXVndXN0aV9zZXB0ZW1iZXJfb2t0b2Jlcl9ub3ZlbWJlcl9kZWNlbWJlcicuc3BsaXQoJ18nKSxcclxuICAgICAgICBtb250aHNTaG9ydDogJ2phbl9mZWJfbWFyX2Fwcl9tYWpfanVuX2p1bF9hdWdfc2VwX29rdF9ub3ZfZGVjJy5zcGxpdCgnXycpLFxyXG4gICAgICAgIHdlZWtkYXlzOiAnc8O2bmRhZ19tw6VuZGFnX3Rpc2RhZ19vbnNkYWdfdG9yc2RhZ19mcmVkYWdfbMO2cmRhZycuc3BsaXQoJ18nKSxcclxuICAgICAgICB3ZWVrZGF5c1Nob3J0OiAnc8O2bl9tw6VuX3Rpc19vbnNfdG9yX2ZyZV9sw7ZyJy5zcGxpdCgnXycpLFxyXG4gICAgICAgIHdlZWtkYXlzTWluOiAnc8O2X23DpV90aV9vbl90b19mcl9sw7YnLnNwbGl0KCdfJyksXHJcbiAgICAgICAgbG9uZ0RhdGVGb3JtYXQ6IHtcclxuICAgICAgICAgICAgTFQ6ICdISDptbScsXHJcbiAgICAgICAgICAgIExUUzogJ0hIOm1tOnNzJyxcclxuICAgICAgICAgICAgTDogJ1lZWVktTU0tREQnLFxyXG4gICAgICAgICAgICBMTDogJ0QgTU1NTSBZWVlZJyxcclxuICAgICAgICAgICAgTExMOiAnRCBNTU1NIFlZWVkgW2tsLl0gSEg6bW0nLFxyXG4gICAgICAgICAgICBMTExMOiAnZGRkZCBEIE1NTU0gWVlZWSBba2wuXSBISDptbScsXHJcbiAgICAgICAgICAgIGxsbDogJ0QgTU1NIFlZWVkgSEg6bW0nLFxyXG4gICAgICAgICAgICBsbGxsOiAnZGRkIEQgTU1NIFlZWVkgSEg6bW0nXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjYWxlbmRhcjoge1xyXG4gICAgICAgICAgICBzYW1lRGF5OiAnW0lkYWddIExUJyxcclxuICAgICAgICAgICAgbmV4dERheTogJ1tJbW9yZ29uXSBMVCcsXHJcbiAgICAgICAgICAgIGxhc3REYXk6ICdbSWfDpXJdIExUJyxcclxuICAgICAgICAgICAgbmV4dFdlZWs6ICdbUMOlXSBkZGRkIExUJyxcclxuICAgICAgICAgICAgbGFzdFdlZWs6ICdbSV0gZGRkZFtzXSBMVCcsXHJcbiAgICAgICAgICAgIHNhbWVFbHNlOiAnTCdcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlbGF0aXZlVGltZToge1xyXG4gICAgICAgICAgICBmdXR1cmU6ICdvbSAlcycsXHJcbiAgICAgICAgICAgIHBhc3Q6ICdmw7ZyICVzIHNlZGFuJyxcclxuICAgICAgICAgICAgczogJ27DpWdyYSBzZWt1bmRlcicsXHJcbiAgICAgICAgICAgIHNzOiAnJWQgc2VrdW5kZXInLFxyXG4gICAgICAgICAgICBtOiAnZW4gbWludXQnLFxyXG4gICAgICAgICAgICBtbTogJyVkIG1pbnV0ZXInLFxyXG4gICAgICAgICAgICBoOiAnZW4gdGltbWUnLFxyXG4gICAgICAgICAgICBoaDogJyVkIHRpbW1hcicsXHJcbiAgICAgICAgICAgIGQ6ICdlbiBkYWcnLFxyXG4gICAgICAgICAgICBkZDogJyVkIGRhZ2FyJyxcclxuICAgICAgICAgICAgTTogJ2VuIG3DpW5hZCcsXHJcbiAgICAgICAgICAgIE1NOiAnJWQgbcOlbmFkZXInLFxyXG4gICAgICAgICAgICB5OiAnZXR0IMOlcicsXHJcbiAgICAgICAgICAgIHl5OiAnJWQgw6VyJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGF5T2ZNb250aE9yZGluYWxQYXJzZTogL1xcZHsxLDJ9KGV8YSkvLFxyXG4gICAgICAgIG9yZGluYWw6IGZ1bmN0aW9uIChudW1iZXIpIHtcclxuICAgICAgICAgICAgdmFyIGIgPSBudW1iZXIgJSAxMCxcclxuICAgICAgICAgICAgICAgIG91dHB1dCA9ICh+fihudW1iZXIgJSAxMDAgLyAxMCkgPT09IDEpID8gJ2UnIDpcclxuICAgICAgICAgICAgICAgICAgICAoYiA9PT0gMSkgPyAnYScgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYiA9PT0gMikgPyAnYScgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGIgPT09IDMpID8gJ2UnIDogJ2UnO1xyXG4gICAgICAgICAgICByZXR1cm4gbnVtYmVyICsgb3V0cHV0O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgd2Vlazoge1xyXG4gICAgICAgICAgICBkb3c6IDEsIC8vIE1vbmRheSBpcyB0aGUgZmlyc3QgZGF5IG9mIHRoZSB3ZWVrLlxyXG4gICAgICAgICAgICBkb3k6IDQgIC8vIFRoZSB3ZWVrIHRoYXQgY29udGFpbnMgSmFuIDR0aCBpcyB0aGUgZmlyc3Qgd2VlayBvZiB0aGUgeWVhci5cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5leHBvcnQgY29uc3QgbG9jYWxNb21lbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gbW9tZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykubG9jYWxlKGNmZy5LRURfTE9DQUxFKTtcclxufVxyXG4iLCJpbXBvcnQgeyBSZXBvLCBSZXBvQ29tbXVuaWNhdG9yfSBmcm9tICcuL3JlcG8nO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kQ2xpZW50LCBMaXN0T3B0aW9ucywgQmF0Y2hSdW5uZXIsIGNyZWF0ZVVVSUQgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XHJcbmltcG9ydCB7IERvY3VtZW50fSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEtlZFJlcG9PcHRpb25zPFQgZXh0ZW5kcyBEb2N1bWVudD4ge1xyXG4gIGdldENsaWVudDogKCk9PktlZEJhY2tlbmRDbGllbnQ7XHJcbiAgZ2V0UXVlcnlPcHRpb25zOiAoKT0+UHJvbWlzZTxMaXN0T3B0aW9ucz47XHJcbiAgb3B0aW1pc3RpYzogYm9vbGVhbjtcclxuICB0YWJsZTogc3RyaW5nO1xyXG4gIHVzZXI6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEtlZFJlcG88VCBleHRlbmRzIERvY3VtZW50PiB7XHJcbiAgbWVtOiBSZXBvPFQ+O1xyXG4gIG9wdGlvbnM6IEtlZFJlcG9PcHRpb25zPFQ+O1xyXG4gIFxyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IEtlZFJlcG9PcHRpb25zPFQ+KSB7XHJcbiAgICBjb25zdCB7dGFibGUsIGdldENsaWVudCwgZ2V0UXVlcnlPcHRpb25zfSA9IG9wdGlvbnM7XHJcbiAgICB0aGlzLm1lbSA9IG5ldyBSZXBvPFQ+KHtxdWVyeTogYXN5bmMgKCk9PntcclxuICAgICAgY29uc3QgcXVlcnlPcHRpb25zID0gYXdhaXQgZ2V0UXVlcnlPcHRpb25zKCk7XHJcbiAgICAgIHJldHVybiBhd2FpdCBnZXRDbGllbnQoKS5saXN0PFQ+KHRhYmxlLCB7XHJcbiAgICAgICAgLi4ucXVlcnlPcHRpb25zLFxyXG4gICAgICAgIGNhY2hlQnVzdDogdGhpcy5nZXRDYWNoZUJ1c3QoKX0pO1xyXG4gICAgfX0pO1xyXG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0Q2FjaGVCdXN0KCkge1xyXG4gICAgY29uc3Qge3RhYmxlLCB1c2VyfSA9IHRoaXMub3B0aW9ucztcclxuICAgIGNvbnN0IGNhY2hlQnVzdCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYWNoZS1idXN0LScgKyB0YWJsZSArICctJyArIHVzZXIpO1xyXG4gICAgcmV0dXJuIGNhY2hlQnVzdCB8fCB0aGlzLnJlZ2VuZXJhdGVDYWNoZUJ1c3QoKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgcmVnZW5lcmF0ZUNhY2hlQnVzdCgpIHtcclxuICAgIGNvbnN0IHt0YWJsZSwgdXNlcn0gPSB0aGlzLm9wdGlvbnM7XHJcbiAgICBjb25zdCBjYWNoZUJ1c3QgPSBjcmVhdGVVVUlEKCk7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY2FjaGUtYnVzdC0nICsgdGFibGUgKyAnLScgKyB1c2VyLCBjYWNoZUJ1c3QpO1xyXG4gICAgcmV0dXJuIGNhY2hlQnVzdDtcclxuICB9XHJcblxyXG4gIGFzeW5jIHVwc2VydChpdGVtOiBULCB1cGRhdGVyOiAoaXRlbTogVCkgPT4gdm9pZCkge1xyXG4gICAgaWYgKCFpdGVtLiRldGFnKSB7XHJcbiAgICAgIC8vIEl0ZW1zIHdpdGhvdXQgJGV0YWcgY2Fubm90IGJlIHJldHJpZXZlZCBmcm9tIHNlcnZlciwgc28gaXQgc2hvdWxkIGJlIGluc2VydGVkLlxyXG4gICAgICBjb25zdCB1cGRhdGVkSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIGl0ZW0pO1xyXG4gICAgICB1cGRhdGVyKHVwZGF0ZWRJdGVtKTtcclxuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuaW5zZXJ0KFt1cGRhdGVkSXRlbV0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gV2UgaGF2ZSBhbiAkZXRhZywgc28gd2UgY2FuIGV4cGVjdCBpdCB0byBsaXZlIG9uIHRoZSBzZXJ2ZXIuXHJcbiAgICAgIC8vIEhvd2V2ZXIsIHRha2UgY2FyZSBvZiB0aGUgdW5saWtlbHkgc2l0dWF0aW9uIHRoYXQgaXQgd2FzIGRlbGV0ZWQgZnJvbSBzZXJ2ZXIsXHJcbiAgICAgIC8vIGFuZCBpZiBzbywgaW5zZXJ0IGl0IGFnYWluLlxyXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZShbaXRlbV0sIHVwZGF0ZXIpLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgIGlmIChlLm5hbWUgPT09IFwiaHR0cDQwNFwiKSB7XHJcbiAgICAgICAgICBjb25zdCB1cGRhdGVkSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIGl0ZW0pO1xyXG4gICAgICAgICAgdXBkYXRlcih1cGRhdGVkSXRlbSk7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5pbnNlcnQoW3VwZGF0ZWRJdGVtXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyB1cGRhdGUoaXRlbXM6IFRbXSwgdXBkYXRlcjogKGl0ZW06IFQpID0+IHZvaWQpIHtcclxuICAgIGNvbnN0IHtnZXRDbGllbnQsIG9wdGltaXN0aWMsIHRhYmxlfSA9IHRoaXMub3B0aW9ucztcclxuICAgIGNvbnN0IGNsaWVudCA9IGdldENsaWVudCgpO1xyXG4gICAgY29uc3QgbW9kaWZpZWRJdGVtczogVFtdID0gaXRlbXMubWFwKGl0ZW0gPT4ge1xyXG4gICAgICBjb25zdCBtZW1SZXBvSXRlbSA9IHRoaXMubWVtLml0ZW1zLmZpbmQoaXQgPT4gaXQuaWQgPT09IGl0ZW0uaWQpO1xyXG4gICAgICBpdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgbWVtUmVwb0l0ZW0gfHwgaXRlbSk7XHJcbiAgICAgIHVwZGF0ZXIoaXRlbSk7XHJcbiAgICAgIHJldHVybiBpdGVtO1xyXG4gICAgfSk7XHJcbiAgICBpZiAob3B0aW1pc3RpYykgYXdhaXQgdGhpcy5tZW0udXBkYXRlKG1vZGlmaWVkSXRlbXMubWFwKHggPT4gT2JqZWN0LmFzc2lnbih7fSwgeCwgeyRtZXRhOiAndXBkYXRpbmcnfSkpKTtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGNsaWVudC5kbyAoYnIgPT4gbW9kaWZpZWRJdGVtcy5mb3JFYWNoKGl0ZW0gPT4gYnIucHV0KHRhYmxlLCBpdGVtKSkpXHJcbiAgICAuY2F0Y2goZSA9PiBlLm5hbWUgPT09IFwiaHR0cDQwOVwiID8gLy8gY29uZmxpY3RcclxuICAgICAgLy8gR2V0IGEgZnJlc2ggdmVyc2lvbiBmcm9tIHNlcnZlcjpcclxuICAgICAgY2xpZW50Lmxpc3Q8VD4odGFibGUsIHtpZHM6IGl0ZW1zLm1hcChpdGVtID0+IGl0ZW0uaWQpfSwge2NhY2hlOiAnbm8tY2FjaGUnfSkudGhlbihmcmVzaEl0ZW1zID0+IHtcclxuICAgICAgICAvLyBVcGRhdGUgbG9jYWwgdmVyc2lvbjpcclxuICAgICAgICBjb25zdCBtb2RpZmllZEl0ZW1zID0gZnJlc2hJdGVtcy5tYXAoZnJlc2hJdGVtID0+IHtcclxuICAgICAgICAgIC8vIENsb25lIHRoZSBmcmVzaCBpdGVtXHJcbiAgICAgICAgICBjb25zdCBtb2RpZmllZCA9IE9iamVjdC5hc3NpZ24oe30sIGZyZXNoSXRlbSk7XHJcbiAgICAgICAgICAvLyBSZS1ydW4gdGhlIHVwZGF0ZXIgb24gdGhlIGNsb25lOlxyXG4gICAgICAgICAgdXBkYXRlcihtb2RpZmllZCk7XHJcbiAgICAgICAgICByZXR1cm4gbW9kaWZpZWQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gUmUtZG8gdGhlIHRoZSBwdXQgb3BlcmF0aW9uIHRvd2FyZHMgdGhlIHNlcnZlci5cclxuICAgICAgICByZXR1cm4gY2xpZW50LmRvKGJyID0+IG1vZGlmaWVkSXRlbXMuZm9yRWFjaChpdGVtID0+IGJyLnB1dCh0YWJsZSwgaXRlbSkpKTtcclxuICAgICAgfSkgOlxyXG4gICAgICAvLyBPdGhlciB1bmV4cGVjdGVkIGVycm9yOlxyXG4gICAgICBQcm9taXNlLnJlc29sdmUob3B0aW1pc3RpYyAmJlxyXG4gICAgICAgIHRoaXMubWVtLnVwZGF0ZShpdGVtcykpIC8vIFVuZG8gb3B0aW1pc3RpYyB1cGRhdGVcclxuICAgICAgLnRoZW4oKCk9PntcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZSk7IC8vIFJlamVjdCB3aXRoIHRoZSBlcnJvciBubyBtYXR0ZXIuXHJcbiAgICAgIH0pKTtcclxuICAgIHRoaXMucmVnZW5lcmF0ZUNhY2hlQnVzdCgpO1xyXG4gICAgbW9kaWZpZWRJdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICBpdGVtLiRldGFnID0gcmVzLm5ld0V0YWdzW2l0ZW0uaWRdO1xyXG4gICAgICBpdGVtLiRtZXRhID0gdW5kZWZpbmVkO1xyXG4gICAgfSk7XHJcbiAgICBhd2FpdCB0aGlzLm1lbS51cGRhdGUobW9kaWZpZWRJdGVtcyk7IC8vIEVuc3VyZXMgbmV3IGV0YWcgaXMgaXMgYXBwbGllZCBvbiBuZXh0IGFjdGlvbi5cclxuICB9XHJcblxyXG4gIHN0cmlwR3JhcGhzIChpdGVtczogVFtdLCBncmFwaHM6IHN0cmluZ1tdKSB7XHJcbiAgICByZXR1cm4gaXRlbXMubWFwKGl0ZW0gPT4ge1xyXG4gICAgICBjb25zdCBjbG9uZSA9IE9iamVjdC5hc3NpZ24oe30sIGl0ZW0pO1xyXG4gICAgICBncmFwaHMuZm9yRWFjaChncmFwaCA9PiB7XHJcbiAgICAgICAgaWYgKGl0ZW1bZ3JhcGhdKSB7XHJcbiAgICAgICAgICBjbG9uZVtncmFwaF0gPSAoaXRlbVtncmFwaF0gYXMge2lkOnN0cmluZ31bXSkubWFwIChkb2MgPT4gKHtpZDogZG9jLmlkfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBjbG9uZTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgaW5zZXJ0KGl0ZW1zOiBUW10pIHtcclxuICAgIGNvbnN0IHtnZXRDbGllbnQsIG9wdGltaXN0aWMsIHRhYmxlLCBnZXRRdWVyeU9wdGlvbnN9ID0gdGhpcy5vcHRpb25zO1xyXG4gICAgY29uc3QgY2xpZW50ID0gZ2V0Q2xpZW50KCk7XHJcbiAgICBjb25zdCBxdWVyeU9wdGlvbnMgPSBhd2FpdCBnZXRRdWVyeU9wdGlvbnMoKTtcclxuICAgIGNvbnN0IGdyYXBocyA9IFtdLmNvbmNhdChxdWVyeU9wdGlvbnMuaW5jbHVkZSk7XHJcbiAgICAvLyBHaXZlIElEcyB0byBlYWNoIGl0ZW06XHJcbiAgICBpdGVtcyA9IGl0ZW1zLm1hcChpdGVtID0+IGl0ZW0uaWQgPyBpdGVtIDogT2JqZWN0LmFzc2lnbih7fSwgaXRlbSwge2lkOiBjcmVhdGVVVUlEKCl9KSk7XHJcbiAgICBjb25zdCBzdHJpcHBlZCA9IHRoaXMuc3RyaXBHcmFwaHMoaXRlbXMsIGdyYXBocyk7XHJcbiAgICBpZiAob3B0aW1pc3RpYykgYXdhaXQgdGhpcy5tZW0uaW5zZXJ0KHN0cmlwcGVkLm1hcCh4ID0+IE9iamVjdC5hc3NpZ24oe30sIHgsIHskbWV0YTogJ2FkZGluZyd9KSkpO1xyXG4gICAgY29uc3QgYnIgPSBuZXcgQmF0Y2hSdW5uZXIoKTtcclxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBzdHJpcHBlZCkge1xyXG4gICAgICAvLyBBbHNvIGFkZCBsaW5rcyB0byBhbGwgZm9yZWlnbiByZWxhdGVkIGl0ZW1zOlxyXG4gICAgICBmb3IgKGNvbnN0IGdyYXBoIG9mIGdyYXBocykge1xyXG4gICAgICAgIGNvbnN0IGZvcmVpZ25JdGVtczogRG9jdW1lbnRbXSA9IGl0ZW1bZ3JhcGhdO1xyXG4gICAgICAgIGlmIChmb3JlaWduSXRlbXMpIHtcclxuICAgICAgICAgIGZvcmVpZ25JdGVtcy5mb3JFYWNoKGRvYyA9PiB7XHJcbiAgICAgICAgICAgIGJyLmxpbmsyKHRhYmxlLCBpdGVtLmlkLCBncmFwaCwgZG9jLmlkKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBici5hZGQodGFibGUsIGl0ZW0pO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgY2xpZW50LmJhdGNoKGJyLm11dGF0aW9uUmVxdWVzdHMpLmNhdGNoKGUgPT4ge1xyXG4gICAgICBpZiAob3B0aW1pc3RpYykgdGhpcy5tZW0uZGVsZXRlKGl0ZW1zLm1hcChpdGVtID0+IGl0ZW0uaWQpKTtcclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGUpO1xyXG4gICAgfSlcclxuICAgIHRoaXMucmVnZW5lcmF0ZUNhY2hlQnVzdCgpO1xyXG4gICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IGl0ZW0uJGV0YWcgPSByZXMubmV3RXRhZ3NbaXRlbS5pZF0pO1xyXG4gICAgaWYgKG9wdGltaXN0aWMpXHJcbiAgICAgIGF3YWl0IHRoaXMubWVtLnVwZGF0ZShpdGVtcyk7IC8vIFVwZGF0ZSB3aXRoIG5ldyAkZXRhZy5cclxuICAgIGVsc2VcclxuICAgICAgYXdhaXQgdGhpcy5tZW0uaW5zZXJ0KGl0ZW1zKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGRlbGV0ZSAoaWRzOiBzdHJpbmdbXSkge1xyXG4gICAgY29uc3Qge2dldENsaWVudCwgb3B0aW1pc3RpYywgdGFibGV9ID0gdGhpcy5vcHRpb25zO1xyXG4gICAgY29uc3QgY2xpZW50ID0gZ2V0Q2xpZW50KCk7XHJcbiAgICBpZiAob3B0aW1pc3RpYykgYXdhaXQgdGhpcy5tZW0udXBkYXRlKGlkc1xyXG4gICAgICAubWFwKGlkID0+IHRoaXMubWVtLml0ZW1zLmZpbmQoeCA9PiB4LmlkID09PSBpZCkpXHJcbiAgICAgIC5maWx0ZXIoeCA9PiB4KVxyXG4gICAgICAubWFwKHggPT4gT2JqZWN0LmFzc2lnbih7fSwgeCwgeyRtZXRhOiAnZGVsZXRpbmcnfSkpKTtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGNsaWVudC5kbyAoYnIgPT4gaWRzLmZvckVhY2goaWQgPT4gYnIuZGVsZXRlKHRhYmxlLCBpZCkpKS5jYXRjaChhc3luYyBlID0+IHtcclxuICAgICAgaWYgKG9wdGltaXN0aWMpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLm1lbS51cGRhdGUoaWRzXHJcbiAgICAgICAgICAubWFwKGlkID0+IHRoaXMubWVtLml0ZW1zLmZpbmQoeCA9PiB4LmlkID09PSBpZCkpXHJcbiAgICAgICAgICAuZmlsdGVyKHggPT4geClcclxuICAgICAgICAgIC5tYXAoeCA9PiB7XHJcbiAgICAgICAgICAgIHggPSBPYmplY3QuYXNzaWduKHt9LCB4KTtcclxuICAgICAgICAgICAgZGVsZXRlIHguJG1ldGE7XHJcbiAgICAgICAgICAgIHJldHVybiB4O1xyXG4gICAgICAgICAgfSkpO1xyXG4gICAgICB9XHJcbiAgICAgIHRocm93IGU7XHJcbiAgICB9KTtcclxuICAgIHRoaXMucmVnZW5lcmF0ZUNhY2hlQnVzdCgpO1xyXG4gICAgYXdhaXQgdGhpcy5tZW0uZGVsZXRlKGlkcyk7XHJcbiAgfVxyXG59XHJcbiIsIlxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBSZXBvQ29tbXVuaWNhdG9yPFQgZXh0ZW5kcyB7aWQ6IHN0cmluZ30+IHtcclxuICBxdWVyeSgpOiBQcm9taXNlPFRbXT47XHJcbn1cclxuXHJcbnR5cGUgU3Vic2NyaWJlcjxUPiA9IChpdGVtczpUW10sIGVycm9yOiB1bmRlZmluZWQgfCBFcnJvcikgPT4gYW55O1xyXG5cclxuZXhwb3J0IGNsYXNzIFJlcG88VCBleHRlbmRzIHtpZDogc3RyaW5nfT4ge1xyXG4gIGxpc3RQcm9taXNlOiBQcm9taXNlPHZvaWQ+O1xyXG4gIGl0ZW1zOiBUW107XHJcbiAgZXJyb3I/OiBFcnJvcjtcclxuICBzdWJzY3JpYmVyczogU3Vic2NyaWJlcjxUPltdO1xyXG5cclxuICBjb25zdHJ1Y3RvcihwdWJsaWMgY29tbTogUmVwb0NvbW11bmljYXRvcjxUPikge1xyXG4gICAgdGhpcy5saXN0UHJvbWlzZSA9IG51bGw7XHJcbiAgICB0aGlzLml0ZW1zID0gbnVsbDtcclxuICAgIHRoaXMuc3Vic2NyaWJlcnMgPSBbXTtcclxuICB9XHJcblxyXG4gIHN1YnNjcmliZShzdWJzY3JpYmVyOiBTdWJzY3JpYmVyPFQ+KSB7XHJcbiAgICByZXR1cm4gdGhpcy5lbnN1cmVIYXNEYXRhKCkudGhlbigoKT0+e1xyXG4gICAgICBzdWJzY3JpYmVyKHRoaXMuaXRlbXMsIHRoaXMuZXJyb3IpO1xyXG4gICAgICB0aGlzLnN1YnNjcmliZXJzLnB1c2goc3Vic2NyaWJlcik7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHVuc3Vic2NyaWJlKHN1YnNjcmliZXI6IFN1YnNjcmliZXI8VD4pIHtcclxuICAgIHRoaXMuc3Vic2NyaWJlcnMgPSB0aGlzLnN1YnNjcmliZXJzLmZpbHRlciAocyA9PiBzICE9PSBzdWJzY3JpYmVyKTtcclxuICB9XHJcblxyXG4gIG5vdGlmeVN1YnNjcmliZXJzKCkge1xyXG4gICAgdGhpcy5zdWJzY3JpYmVycy5mb3JFYWNoKHMgPT4gcyh0aGlzLml0ZW1zLCB0aGlzLmVycm9yKSk7XHJcbiAgfVxyXG5cclxuICBlbnN1cmVIYXNEYXRhKCkge1xyXG4gICAgaWYgKCF0aGlzLmxpc3RQcm9taXNlKSB0aGlzLnJlZnJlc2hGcm9tU2VydmVyKCk7XHJcbiAgICByZXR1cm4gdGhpcy5saXN0UHJvbWlzZTtcclxuICB9XHJcblxyXG4gIHJlZnJlc2hGcm9tU2VydmVyKCkge1xyXG4gICAgdGhpcy5saXN0UHJvbWlzZSA9IHRoaXMuY29tbS5xdWVyeSgpLnRoZW4oaXRlbXMgPT4ge1xyXG4gICAgICB0aGlzLml0ZW1zID0gaXRlbXM7XHJcbiAgICAgIHRoaXMuZXJyb3IgPSBudWxsO1xyXG4gICAgICB0aGlzLm5vdGlmeVN1YnNjcmliZXJzKCk7XHJcbiAgICB9KS5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcclxuICAgICAgdGhpcy5pdGVtcyA9IHRoaXMuaXRlbXMgfHwgW107XHJcbiAgICAgIHRoaXMubm90aWZ5U3Vic2NyaWJlcnMoKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHRoaXMubGlzdFByb21pc2U7XHJcbiAgfVxyXG4gIFxyXG4gIGFzeW5jIHVwZGF0ZShpdGVtOiBUIHwgVFtdKSB7XHJcbiAgICBhd2FpdCB0aGlzLmVuc3VyZUhhc0RhdGEoKTtcclxuICAgIGNvbnN0IHVwZGF0ZWRJdGVtcyA9IEFycmF5LmlzQXJyYXkoaXRlbSkgPyBpdGVtIDogW2l0ZW1dO1xyXG4gICAgdGhpcy5pdGVtcyA9IHRoaXMuaXRlbXMubWFwKGl0ID0+IHtcclxuICAgICAgY29uc3QgdXBkYXRlZEl0ZW0gPSB1cGRhdGVkSXRlbXMuZmluZCgoe2lkfSkgPT4gaXQuaWQgPT09IGlkKTtcclxuICAgICAgcmV0dXJuIHVwZGF0ZWRJdGVtID9cclxuICAgICAgICBPYmplY3QuYXNzaWduKHt9LCB1cGRhdGVkSXRlbSkgOlxyXG4gICAgICAgIGl0O1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLm5vdGlmeVN1YnNjcmliZXJzKCk7XHJcbiAgfVxyXG5cclxuICBpbnNlcnQoaXRlbTogVCB8IFRbXSkge1xyXG4gICAgcmV0dXJuIHRoaXMuZW5zdXJlSGFzRGF0YSgpLnRoZW4oKCk9PntcclxuICAgICAgdGhpcy5pdGVtcyA9IHRoaXMuaXRlbXMuY29uY2F0KGl0ZW0pO1xyXG4gICAgICB0aGlzLm5vdGlmeVN1YnNjcmliZXJzKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZShpZDogc3RyaW5nIHwgc3RyaW5nW10pIHtcclxuICAgIGNvbnN0IGlkcyA9IEFycmF5LmlzQXJyYXkoaWQpID8gaWQgOiBbaWRdO1xyXG4gICAgcmV0dXJuIHRoaXMuZW5zdXJlSGFzRGF0YSgpLnRoZW4oKCk9PntcclxuICAgICAgdGhpcy5pdGVtcyA9IHRoaXMuaXRlbXMuZmlsdGVyKGl0ID0+ICFpZHMuc29tZShpZCA9PiBpdC5pZCA9PT0gaWQpKTtcclxuICAgICAgdGhpcy5ub3RpZnlTdWJzY3JpYmVycygpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7S2VkUmVwb30gZnJvbSAnLi9rZWQtcmVwbyc7XHJcbmltcG9ydCB7IFVzZXJUYXNrLCBVc2VyU3ViVGFzayB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IGVudiBmcm9tICcuLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5pbXBvcnQgeyBXZWVrUGxhbm5lclBlcnNpc3RlZFN0YXRlIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvd2Vla3BsYW5uZXIvd2Vla3BsYW5uZXItcGVyc2lzdGVkLXN0YXRlXCI7XHJcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcclxuaW1wb3J0IHsgY3JlYXRlVVVJRCwgRG9jdW1lbnRBY2Nlc3MsIEtlZEJhY2tlbmRDbGllbnQgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XHJcbmltcG9ydCB7IGdldEFkanVzdGVkV2VlaywgS0VEV2VlayB9IGZyb20gJy4uL3V0aWxzL3dlZWt1dGlsJztcclxuaW1wb3J0IHsgVXNlciB9IGZyb20gJy4uL2NvbnRyYWN0cy9rZWQtbW9kZWxzJztcclxuXHJcbmV4cG9ydCBsZXQgdXNlclRhc2tzUmVwbyA9IGVudi51c2VyVGFza3NSZXBvIGFzIFVzZXJUYXNrc1JlcG87XHJcblxyXG5leHBvcnQgY2xhc3MgVXNlclRhc2tzUmVwbyBleHRlbmRzIEtlZFJlcG88VXNlclRhc2s+IHtcclxuICBwZXJzaXN0ZWRTdGF0ZTogV2Vla1BsYW5uZXJQZXJzaXN0ZWRTdGF0ZSB8IG51bGw7XHJcbiAgZ2V0Q3VycmVudFVzZXI6ICgpPT5Vc2VyO1xyXG5cclxuICBjb25zdHJ1Y3RvcihnZXRDbGllbnQ6ICgpPT5LZWRCYWNrZW5kQ2xpZW50LCBnZXRDdXJyZW50VXNlcjogKCk9PlVzZXIpIHsgICAgXHJcbiAgICBzdXBlcih7XHJcbiAgICAgIGdldENsaWVudCxcclxuICAgICAgb3B0aW1pc3RpYzogdHJ1ZSxcclxuICAgICAgdGFibGU6IFwidXNlcnRhc2tzXCIsXHJcbiAgICAgIHVzZXI6IGdldEN1cnJlbnRVc2VyKCkgPyBnZXRDdXJyZW50VXNlcigpLm1haWwgOiBcIlwiLFxyXG4gICAgICBnZXRRdWVyeU9wdGlvbnM6IGFzeW5jICgpID0+IHtcclxuICAgICAgICBjb25zdCBjdXJyZW50VXNlciA9IGdldEN1cnJlbnRVc2VyKCk7XHJcbiAgICAgICAgY29uc3QgdXNlckVtYWlsID0gY3VycmVudFVzZXIgPyBjdXJyZW50VXNlci5tYWlsIDogXCJcIjtcclxuICAgICAgICBpZiAoIXRoaXMucGVyc2lzdGVkU3RhdGUpXHJcbiAgICAgICAgICB0aGlzLnBlcnNpc3RlZFN0YXRlID0gYXdhaXQgV2Vla1BsYW5uZXJQZXJzaXN0ZWRTdGF0ZS5sb2FkKHVzZXJFbWFpbCk7XHJcbiAgICAgICAgY29uc3QgeyB3ZWVrRGF0ZSB9ID0gdGhpcy5wZXJzaXN0ZWRTdGF0ZTtcclxuICAgICAgICBjb25zdCB3ZWVrTnVtYmVyID0gbW9tZW50KHdlZWtEYXRlKS53ZWVrKCk7XHJcbiAgICAgICAgY29uc3Qga2VkV2VlayA9IEtFRFdlZWsobW9tZW50KHdlZWtEYXRlKS55ZWFyKCksIHdlZWtOdW1iZXIpO1xyXG4gICAgICAgIC8qY29uc3QgW2Zyb20sIHRvXSA9IFttb21lbnQod2Vla0RhdGUpLnN0YXJ0T2YoJ3dlZWsnKSwgbW9tZW50KHdlZWtEYXRlKS5lbmRPZignd2VlaycpXVxyXG4gICAgICAgICAgLm1hcChtID0+IG0udG9EYXRlKCkuZ2V0VGltZSgpKTsqL1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZnJvbToga2VkV2Vlay5ub3RCZWZvcmUsXHJcbiAgICAgICAgICAgIHRvOiBrZWRXZWVrLm5vdEFmdGVyLFxyXG4gICAgICAgICAgICByb2xlOiBcIlVTRVJcIixcclxuICAgICAgICAgICAgaW5jbHVkZTogW1widGFza1wiLCBcImNvdXJzZVwiXSxcclxuICAgICAgICAgICAgZmxhZ3M6IFtcImluY2x1ZGVJZHNPbmx5XCJdLFxyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHRoaXMucGVyc2lzdGVkU3RhdGUgPSBudWxsO1xyXG4gICAgdGhpcy5nZXRDdXJyZW50VXNlciA9IGdldEN1cnJlbnRVc2VyO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgdXBkYXRlUGVyc2lzdGVkU3RhdGUoc3RhdGVDaGFuZ2VzOiBQYXJ0aWFsPFdlZWtQbGFubmVyUGVyc2lzdGVkU3RhdGU+KSB7XHJcbiAgICBPYmplY3QuYXNzaWduKHRoaXMucGVyc2lzdGVkU3RhdGUsIHN0YXRlQ2hhbmdlcyk7XHJcbiAgICBhd2FpdCB0aGlzLnBlcnNpc3RlZFN0YXRlLnNhdmUoKTtcclxuICAgIHRoaXMubWVtLm5vdGlmeVN1YnNjcmliZXJzKCk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBzZXRUYXNrRG9uZVN0YXRlKHVzZXJUYXNrOiBVc2VyVGFzaywgZG9uZTogYm9vbGVhbikge1xyXG4gICAgY29uc3Qge2dldENsaWVudCwgb3B0aW1pc3RpYywgdGFibGV9ID0gdGhpcy5vcHRpb25zO1xyXG4gICAgY29uc3QgY2xpZW50ID0gZ2V0Q2xpZW50KCk7XHJcbiAgICBjb25zdCBtb2RpZmllZEl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCB1c2VyVGFzaywge2RvbmV9KTtcclxuICAgIGlmIChvcHRpbWlzdGljKSBhd2FpdCB0aGlzLm1lbS51cGRhdGUoT2JqZWN0LmFzc2lnbih7fSwgbW9kaWZpZWRJdGVtLCB7JG1ldGE6ICd1cGRhdGluZyd9KSk7XHJcbiAgICAvLyBOb3cgbWFrZSBzdXJlIHRvIGNoYW5nZSB0aGUgc3RhdGUgZm9yIG90aGVyIHdlZWtzIGFzIHdlbGw6XHJcbiAgICBjb25zdCBzaW1pbGFyVGFza3MgPSBhd2FpdCBjbGllbnQubGlzdDxVc2VyVGFzaz4oJ3VzZXJ0YXNrcycsIHtcclxuICAgICAgbmFtZTogdXNlclRhc2submFtZSxcclxuICAgICAgcm9sZTogXCJVU0VSXCIsXHJcbiAgICAgIGluY2x1ZGU6IFtcInRhc2tcIixcImNvdXJzZVwiXSxcclxuICAgICAgZmxhZ3M6IFtcImluY2x1ZGVJZHNPbmx5XCJdLFxyXG4gICAgICBmcm9tOiBtb21lbnQodGhpcy5wZXJzaXN0ZWRTdGF0ZS53ZWVrRGF0ZSkuYWRkKC0zLCAnd2Vla3MnKS52YWx1ZU9mKCksXHJcbiAgICAgIHRvOiBtb21lbnQodGhpcy5wZXJzaXN0ZWRTdGF0ZS53ZWVrRGF0ZSkuYWRkKDMsICd3ZWVrcycpLnZhbHVlT2YoKVxyXG4gICAgfSwge1xyXG4gICAgICBjYWNoZTogJ25vLWNhY2hlJ1xyXG4gICAgfSk7XHJcbiAgICBjb25zdCBpZGVudGljYWxUYXNrcyA9IHNpbWlsYXJUYXNrcy5maWx0ZXIodCA9PlxyXG4gICAgICB0LmNvdXJzZU5hbWUgPT09IHVzZXJUYXNrLmNvdXJzZU5hbWUgJiZcclxuICAgICAgdC5sZWFybmluZ0dvYWwgPT09IHVzZXJUYXNrLmxlYXJuaW5nR29hbCAmJlxyXG4gICAgICAoIXVzZXJUYXNrLnRhc2sgfHwgdC50YXNrLm1hcCh0PT50LmlkKS5qb2luKCcnKSA9PT0gdXNlclRhc2sudGFzay5tYXAodD0+dC5pZCkuam9pbignJykpICYmXHJcbiAgICAgICghdXNlclRhc2suY291cnNlIHx8IHQuY291cnNlLm1hcChjPT5jLmlkKS5qb2luKCcnKSA9PT0gdXNlclRhc2suY291cnNlLm1hcChjPT5jLmlkKS5qb2luKCcnKSkpO1xyXG4gICAgaWYgKGlkZW50aWNhbFRhc2tzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAvLyBXb3JrYXJvdW5kIGZvciBpc3N1ZSBpbiBTdWJqZWN0UGxhbm5lciBtaWdyYXRpb24gKHVzZXJ0YXNrcyB3aXRoIGxvbmcgbmFtZXMgaXMgbm90IGZvdW5kKVxyXG4gICAgICBpZGVudGljYWxUYXNrcy5wdXNoKHVzZXJUYXNrKVxyXG4gICAgfVxyXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoaWRlbnRpY2FsVGFza3MsIHQgPT4gdC5kb25lID0gZG9uZSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBzZXRTdWJUYXNrRG9uZVN0YXRlICh1c2VyVGFzazogVXNlclRhc2ssIHN1YlRhc2tJZDogc3RyaW5nLCBkb25lOiBib29sZWFuKSB7XHJcbiAgICBjb25zdCB7Z2V0Q2xpZW50LCBvcHRpbWlzdGljLCB0YWJsZX0gPSB0aGlzLm9wdGlvbnM7XHJcbiAgICBjb25zdCBjbGllbnQgPSBnZXRDbGllbnQoKTtcclxuICAgIGF3YWl0IHRoaXMudXBkYXRlKFt1c2VyVGFza10sXHJcbiAgICAgIHQgPT4gdC5zdWJUYXNrcyAmJiB0LnN1YlRhc2tzLmZpbHRlcihzdCA9PiBzdC5pZCA9PT0gc3ViVGFza0lkKVxyXG4gICAgICAgIC5mb3JFYWNoKHN0ID0+IHN0LmRvbmUgPSBkb25lKSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBzZXRXZWVrUGxhbm5lckJveE9wZW4oY291cnNlTmFtZTogc3RyaW5nLCBpc09wZW46IGJvb2xlYW4pIHtcclxuICAgIGNvbnN0IG9wZW5Db3Vyc2VzID0geyAuLi50aGlzLnBlcnNpc3RlZFN0YXRlLm9wZW5Db3Vyc2VzIH07XHJcbiAgICBpZiAoaXNPcGVuKVxyXG4gICAgICBvcGVuQ291cnNlc1tjb3Vyc2VOYW1lXSA9IHRydWU7XHJcbiAgICBlbHNlXHJcbiAgICAgIGRlbGV0ZSBvcGVuQ291cnNlc1tjb3Vyc2VOYW1lXTtcclxuICAgIGF3YWl0IHRoaXMudXBkYXRlUGVyc2lzdGVkU3RhdGUoe29wZW5Db3Vyc2VzfSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBjaGFuZ2VXZWVrKHdlZWtEYXRlOiBEYXRlLCBrZWVwQ3VycmVudERhdGU/OiBib29sZWFuKSB7XHJcbiAgICBsZXQgcGVyc2lzdGVkU3RhdGUgPSB0aGlzLnBlcnNpc3RlZFN0YXRlO1xyXG4gICAgaWYgKCFwZXJzaXN0ZWRTdGF0ZSkge1xyXG4gICAgICBwZXJzaXN0ZWRTdGF0ZSA9IGF3YWl0IFdlZWtQbGFubmVyUGVyc2lzdGVkU3RhdGUubG9hZCh0aGlzLm9wdGlvbnMudXNlcik7XHJcbiAgICB9XHJcbiAgICBjb25zdCBuZXdQZXJzaXN0ZWQgPSBuZXcgV2Vla1BsYW5uZXJQZXJzaXN0ZWRTdGF0ZShwZXJzaXN0ZWRTdGF0ZSk7XHJcbiAgICBuZXdQZXJzaXN0ZWQud2Vla0RhdGUgPSBrZWVwQ3VycmVudERhdGUgPyBtb21lbnQod2Vla0RhdGUpLnZhbHVlT2YoKSA6IG1vbWVudCh3ZWVrRGF0ZSkuc3RhcnRPZignd2VlaycpLnZhbHVlT2YoKTtcclxuICAgIG5ld1BlcnNpc3RlZC5zYXZlKCk7XHJcbiAgICB0aGlzLnBlcnNpc3RlZFN0YXRlID0gbmV3UGVyc2lzdGVkO1xyXG4gICAgYXdhaXQgdGhpcy5tZW0ucmVmcmVzaEZyb21TZXJ2ZXIoKTtcclxuICB9XHJcblxyXG4gIHN1YnNjcmliZShzdWJzY3JpYmVyOiAodXNlclRhc2tzOiBVc2VyVGFza1tdLCBwZXJzaXN0ZWRTdGF0ZTogV2Vla1BsYW5uZXJQZXJzaXN0ZWRTdGF0ZSwgd2Vla1RleHRzVVQ6IFVzZXJUYXNrKSA9PiB2b2lkKSB7XHJcbiAgICBjb25zdCBwcm94eVN1YnNjcmliZXIgPSAodXNlclRhc2tzOiBVc2VyVGFza1tdKSA9PiB7XHJcbiAgICAgIHN1YnNjcmliZXIoXHJcbiAgICAgICAgdXNlclRhc2tzLmZpbHRlcih1dCA9PiAhdXQud2Vla1RleHRzKSxcclxuICAgICAgICB0aGlzLnBlcnNpc3RlZFN0YXRlLFxyXG4gICAgICAgIHVzZXJUYXNrcy5maWx0ZXIodXQgPT4gISF1dC53ZWVrVGV4dHMpWzBdIHx8IHtcclxuICAgICAgICAgIGlkOiBjcmVhdGVVVUlEKCksXHJcbiAgICAgICAgICBkYXRlVGltZTogdGhpcy5wZXJzaXN0ZWRTdGF0ZS53ZWVrRGF0ZSxcclxuICAgICAgICAgIHdlZWtUZXh0czoge2Fzc2Vzc21lbnQ6JycsIHN0cmF0ZWd5OicnfSxcclxuICAgICAgICAgIGFjbDogW1xyXG4gICAgICAgICAgICAvLyBEZWZhdWx0IEFDTDogTGV0IHVzZXIgc2VsZiBoYXZlIGZ1bGwgY29udHJvbCBvdmVyIHRoaXMgaXRlbTpcclxuICAgICAgICAgICAgbmV3IERvY3VtZW50QWNjZXNzKFwiZW1haWxcIiwgdGhpcy5nZXRDdXJyZW50VXNlcigpLm1haWwsIFwiU1wiKSxcclxuICAgICAgICAgICAgLy8gQWRkaXRpb25hbCBBQ0w6IExldCBlbXBsb3llZXMgb24gc2FtZSBzY2hvb2wgaGF2ZSByZWFkIGFjY2VzcyB0byBpdC5cclxuICAgICAgICAgICAgLy8gVGhpcyBjdXJyZW50bHkgb25seSBhcHBsaWVzIHRvIHRhc2tzIHRoYXQgcmVmZXIgdG8gY291cnNlIHRhc2tzIChub3Qgb3duIHRhc2tzISlcclxuICAgICAgICAgICAgbmV3IERvY3VtZW50QWNjZXNzKFwic2Nob29sUm9sZVwiLCBgJHt0aGlzLmdldEN1cnJlbnRVc2VyKCkuc2Nob29sfS9FTVBMT1lFRWAsIFwiUlwiKVxyXG4gICAgICAgICAgXS5tYXAoYWMgPT4gYWMudG9TdHJpbmcoKSlcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBwcm94eVN1YnNjcmliZXJbXCJzdWJzY3JpYmVyXCJdID0gc3Vic2NyaWJlcjtcclxuICAgIHRoaXMubWVtLnN1YnNjcmliZShwcm94eVN1YnNjcmliZXIpO1xyXG4gIH1cclxuXHJcbiAgdW5zdWJzY3JpYmUoc3Vic2NyaWJlcjogKHVzZXJUYXNrczogVXNlclRhc2tbXSwgcGVyc2lzdGVkU3RhdGU6IFdlZWtQbGFubmVyUGVyc2lzdGVkU3RhdGUsIHdlZWtUZXh0c1VUOiBVc2VyVGFzaykgPT4gdm9pZCkge1xyXG4gICAgdGhpcy5tZW0uc3Vic2NyaWJlcnMgPSB0aGlzLm1lbS5zdWJzY3JpYmVycy5maWx0ZXIgKHMgPT4gc1tcInN1YnNjcmliZXJcIl0gIT09IHN1YnNjcmliZXIpO1xyXG4gIH1cclxuICBcclxufVxyXG5cclxuaWYgKCF1c2VyVGFza3NSZXBvKSB7XHJcbiAgdXNlclRhc2tzUmVwbyA9IGVudi51c2VyVGFza3NSZXBvID0gbmV3IFVzZXJUYXNrc1JlcG8oXHJcbiAgICAoKT0+ZW52LmtlZEJhY2tlbmRDbGllbnQsXHJcbiAgICAoKT0+ZW52LmN1cnJlbnRVc2VyKTtcclxuICB1c2VyVGFza3NSZXBvLm1lbS5lbnN1cmVIYXNEYXRhKCk7XHJcbn1cclxuIiwiaW1wb3J0IHtVc2VyfSBmcm9tICcuLi8uLi9jb250cmFjdHMva2VkLW1vZGVscyc7XHJcblxyXG5leHBvcnQgY29uc3QgdXNlcnMgOiBVc2VyW10gPSBbe1xyXG4gICAgZGlzcGxheU5hbWU6IFwiQWRtaW5pc3RyYXTDtnJcIixcclxuICAgIG1haWw6IFwidmVtZW5kb0BrZWRzY2hvb2xzLmNvbVwiLFxyXG4gICAgcm9sZXM6IFsnQURNSU4nLCdFTVBMT1lFRSddLFxyXG4gICAgc2Nob29sOiAnS0VEJyxcclxuICAgIHVzZXJuYW1lOiBcImFkbWluXCJcclxufSx7XHJcbiAgICBkaXNwbGF5TmFtZTogXCJEYXZpZFwiLFxyXG4gICAgbWFpbDogXCJkYXZpZC5mYWhsYW5kZXJAdmVtZW5kby5zZVwiLFxyXG4gICAgcm9sZXM6IFsnQURNSU4nLCdFTVBMT1lFRSddLFxyXG4gICAgc2Nob29sOiAnS0VEJyxcclxuICAgIHVzZXJuYW1lOiBcImRhdmlkXCJcclxufSxcclxue1xyXG4gICAgZGlzcGxheU5hbWU6IFwiQW5kcmVpXCIsXHJcbiAgICBtYWlsOiBcImFuZHJlaS5zcGF0YXJlbHVAdmVtZW5kby5zZVwiLFxyXG4gICAgcm9sZXM6IFsnQURNSU4nLCdFTVBMT1lFRScsJ1NUVURFTlQnXSxcclxuICAgIHNjaG9vbDogJ0tFRCcsXHJcbiAgICB1c2VybmFtZTogXCJhbmRyZWlcIlxyXG59LHtcclxuICAgIGRpc3BsYXlOYW1lOiBcIkNhcmwgSG9sbWJlcmdcIixcclxuICAgIG1haWw6IFwiY2FybC5ob2xtYmVyZ0BrdW5za2Fwc2d5bW5hc2lldC5zZVwiLFxyXG4gICAgcm9sZXM6IFsnQURNSU4nLCdFTVBMT1lFRSddLFxyXG4gICAgc2Nob29sOiAnTm9ycmvDtnBpbmcnLFxyXG4gICAgdXNlcm5hbWU6IFwiY2FybC5ob2xtYmVyZ0BrdW5za2Fwc2d5bW5hc2lldC5zZVwiXHJcbn0seyBcclxuICAgIGRpc3BsYXlOYW1lOiBcIkNhcmxcIixcclxuICAgIG1haWw6IFwiY2FybEBrZWRzY2hvb2xzLmNvbVwiLFxyXG4gICAgcm9sZXM6IFsnQURNSU4nLCdFTVBMT1lFRScsJ1NUVURFTlQnXSxcclxuICAgIHNjaG9vbDogJ0tFRCcsXHJcbiAgICB1c2VybmFtZTogXCJjYXJsXCJcclxufSx7XHJcbiAgICBkaXNwbGF5TmFtZTogXCJkYXZpZC5mYWhsYW5kZXJAa2Vkc2Nob29scy5jb21cIixcclxuICAgIG1haWw6IFwiZGF2aWQuZmFobGFuZGVyQGtlZHNjaG9vbHMuY29tXCIsXHJcbiAgICByb2xlczogW1wiQURNSU5cIiwgXCJFTVBMT1lFRVwiLCBcIlNUVURFTlRcIl0sXHJcbiAgICBzY2hvb2w6IFwiS0VEXCIsXHJcbiAgICB1c2VybmFtZTogXCJkYXZpZC5mYWhsYW5kZXJAa2Vkc2Nob29scy5jb21cIlxyXG59LHtcclxuICAgIGRpc3BsYXlOYW1lOiBcIlRlYWNoZXIgMVwiLFxyXG4gICAgbWFpbDogXCJ0ZWFjaGVyMS5jbGFzc3Jvb21Aa2Vkc2Nob29scy5jb21cIixcclxuICAgIHJvbGVzOiBbJ0VNUExPWUVFJ10sXHJcbiAgICBzY2hvb2w6ICdLRUQnLFxyXG4gICAgdXNlcm5hbWU6IFwidGVhY2hlcjEuY2xhc3Nyb29tQGtlZHNjaG9vbHMuY29tXCJcclxufSx7IFxyXG4gICAgZGlzcGxheU5hbWU6IFwiVGVzdC1MaXZlLUVsZXYxXCIsXHJcbiAgICBtYWlsOiBcInVidzY3NTdAZWR1Lmt1bnNrYXBzZ3ltbmFzaWV0LnNlXCIsXHJcbiAgICByb2xlczogWydTVFVERU5UJ10sXHJcbiAgICBzY2hvb2w6ICdVcHBzYWxhJyxcclxuICAgIHVzZXJuYW1lOiBcInVidzY3NTdAZWR1Lmt1bnNrYXBzZ3ltbmFzaWV0LnNlXCJcclxufSx7XHJcbiAgICBkaXNwbGF5TmFtZTogXCJUZXN0LUxpdmUtRWxldjJcIixcclxuICAgIG1haWw6IFwidW1zNDMwMkBlZHUua3Vuc2thcHNneW1uYXNpZXQuc2VcIixcclxuICAgIHJvbGVzOiBbJ1NUVURFTlQnXSxcclxuICAgIHNjaG9vbDogJ1VwcHNhbGEnLFxyXG4gICAgdXNlcm5hbWU6IFwidW1zNDMwMkBlZHUua3Vuc2thcHNneW1uYXNpZXQuc2VcIlxyXG59LHtcclxuICAgIGRpc3BsYXlOYW1lOiBcIlRlc3QtTGl2ZS1FbGV2M1wiLFxyXG4gICAgbWFpbDogXCJ1aGgzNDYwQGVkdS5rdW5za2Fwc2d5bW5hc2lldC5zZVwiLFxyXG4gICAgcm9sZXM6IFsnU1RVREVOVCddLFxyXG4gICAgc2Nob29sOiAnVXBwc2FsYScsXHJcbiAgICB1c2VybmFtZTogXCJ1aGgzNDYwQGVkdS5rdW5za2Fwc2d5bW5hc2lldC5zZVwiXHJcbn0se1xyXG4gICAgZGlzcGxheU5hbWU6IFwiVGVzdC1MaXZlLUVsZXY0KGZlbCBnb2FscyBpc3N1ZSlcIixcclxuICAgIG1haWw6IFwidW10NjgyNkBlZHUua3Vuc2thcHNza29sYW4uc2VcIixcclxuICAgIHJvbGVzOiBbXCJTVFVERU5UXCJdLFxyXG4gICAgc2Nob29sOiBcIlVwcHNhbGFcIixcclxuICAgIHVzZXJuYW1lOiBcInVtdDY4MjZAZWR1Lmt1bnNrYXBzc2tvbGFuLnNlXCJcclxufSx7XHJcbiAgICBkaXNwbGF5TmFtZTogXCJUZXN0LUxpdmUtRWxldjUoZnV0dXJlIGFiaWxpdGllcylcIixcclxuICAgIG1haWw6IFwidWpnMzgzM0BlZHUua3Vuc2thcHNza29sYW4uc2VcIixcclxuICAgIHJvbGVzOiBbXCJTVFVERU5UXCJdLFxyXG4gICAgc2Nob29sOiBcIlVwcHNhbGFcIixcclxuICAgIHVzZXJuYW1lOiBcInVqZzM4MzNAZWR1Lmt1bnNrYXBzc2tvbGFuLnNlXCJcclxufSx7XHJcbiAgICBkaXNwbGF5TmFtZTogXCJUZXN0LUxpdmUtRWxldjYoZnV0dXJlIGFiaWxpdGllcylcIixcclxuICAgIG1haWw6IFwidWp0MTM2M0BlZHUua3Vuc2thcHNza29sYW4uc2VcIixcclxuICAgIHJvbGVzOiBbXCJTVFVERU5UXCJdLFxyXG4gICAgc2Nob29sOiBcIlVwcHNhbGFcIixcclxuICAgIHVzZXJuYW1lOiBcInVqdDEzNjNAZWR1Lmt1bnNrYXBzc2tvbGFuLnNlXCJcclxufSx7XHJcbiAgICBkaXNwbGF5TmFtZTogXCJUZXN0LUxpdmUtTMOkcmFyZTFcIixcclxuICAgIG1haWw6IFwicmlja2FyZC5hbGJlcnRzc29uQGt1bnNrYXBzZ3ltbmFzaWV0LnNlXCIsXHJcbiAgICByb2xlczogWydFTVBMT1lFRSddLFxyXG4gICAgc2Nob29sOiAnVXBwc2FsYScsXHJcbiAgICB1c2VybmFtZTogXCJyaWNrYXJkLmFsYmVydHNzb25Aa3Vuc2thcHNneW1uYXNpZXQuc2VcIlxyXG59LHtcclxuICAgIGRpc3BsYXlOYW1lOiBcIkVEU1Rlc3RVc2VyR3ltbmFzaXVtXCIsXHJcbiAgICBtYWlsOiBcInVoaDMyMDBAZWR1Lmt1bnNrYXBzZ3ltbmFzaWV0LnNlXCIsXHJcbiAgICAvL21haWw6IFwiVUhIMzIwMEBFRFUuS1VOU0tBUFNHWU1OQVNJRVQuU0VcIixcclxuICAgIHJvbGVzOiBbXCJTVFVERU5UXCJdLFxyXG4gICAgdXNlcm5hbWU6IFwiRURTVGVzdFVzZXIxXCIsXHJcbiAgICBzY2hvb2w6IFwiS0VEXCIsXHJcbiAgICBzY2hvb2xUeXBlOiBcIkd5bW5hc2l1bVwiXHJcbn0se1xyXG4gICAgZGlzcGxheU5hbWU6IFwidmVtZW5kby5lbGV2QGtlZHNjaG9vbHMuY29tXCIsXHJcbiAgICBtYWlsOiBcInZlbWVuZG8uZWxldkBrZWRzY2hvb2xzLmNvbVwiLFxyXG4gICAgcm9sZXM6IFtcIlNUVURFTlRcIl0sXHJcbiAgICB1c2VybmFtZTogXCJ2ZW1lbmRvLmVsZXZAa2Vkc2Nob29scy5jb21cIixcclxuICAgIHNjaG9vbDogXCJLRURcIixcclxuICAgIHNjaG9vbFR5cGU6IFwiR3ltbmFzaXVtXCJcclxufSx7XHJcbiAgICBkaXNwbGF5TmFtZTogXCJNZWRhcmJldGFyZSBOYWNrYVwiLFxyXG4gICAgbWFpbDogXCJtZWRhcmJldGFyZS5uYWNrYUBrdW5za2Fwc3Nrb2xhbi5zZVwiLFxyXG4gICAgcm9sZXM6IFtcIkVNUExPWUVFXCJdLFxyXG4gICAgdXNlcm5hbWU6IFwibWVkYXJiZXRhcmUubmFja2EvS1NcIixcclxuICAgIHNjaG9vbDogXCJOYWNrYVwiLFxyXG4gICAgc2Nob29sVHlwZTogXCJHcnVuZHNrb2xvclwiXHJcbn0se1xyXG4gICAgZGlzcGxheU5hbWU6IFwiTWVkYXJiZXRhcmUgR2xvYmVuXCIsXHJcbiAgICBtYWlsOiBcIm1lZGFyYmV0YXJlLmdsb2JlbkBrdW5za2Fwc2d5bW5hc2lldC5zZVwiLFxyXG4gICAgcm9sZXM6IFtcIkVNUExPWUVFXCJdLFxyXG4gICAgdXNlcm5hbWU6IFwibWVkYXJiZXRhcmUuZ2xvYmVuL0tTXCIsXHJcbiAgICBzY2hvb2w6IFwiR2xvYmVuXCIsXHJcbiAgICBzY2hvb2xUeXBlOiBcIkd5bW5hc2l1bVwiXHJcbn0se1xyXG4gICAgZGlzcGxheU5hbWU6IFwiRWxldiBHbG9iZW5cIixcclxuICAgIG1haWw6IFwiZWxldi5nbG9iZW5AZWR1Lmt1bnNrYXBzZ3ltbmFzaWV0LnNlXCIsXHJcbiAgICBzY2hvb2xHcmFkZTogMixcclxuICAgIHJvbGVzOiBbJ1NUVURFTlQnXSxcclxuICAgIHVzZXJuYW1lOiBcImVsZXYuZ2xvYmVuXCIsXHJcbiAgICBzY2hvb2w6IFwiR2xvYmVuXCIsXHJcbiAgICBzY2hvb2xUeXBlOiBcIkd5bW5hc2l1bVwiXHJcbn0se1xyXG4gICAgZGlzcGxheU5hbWU6IFwiRWxldiBCb3LDpXNcIixcclxuICAgIG1haWw6IFwiZWxldi5ib3Jhc0BlZHUua3Vuc2thcHNza29sYW4uc2VcIixcclxuICAgIHNjaG9vbEdyYWRlOiA3LFxyXG4gICAgcm9sZXM6IFsnU1RVREVOVCddLFxyXG4gICAgdXNlcm5hbWU6IFwiZWxldi5ib3Jhc1wiLFxyXG4gICAgc2Nob29sOiBcIkJvcsOlc1wiLFxyXG4gICAgc2Nob29sVHlwZTogXCJHcnVuZHNrb2xvclwiXHJcbn0se1xyXG4gICAgZGlzcGxheU5hbWU6IFwiRWxldiBCb3Jsw6RuZ2VcIixcclxuICAgIG1haWw6IFwiZWxldi5ib3JsYW5nZUBlZHUua3Vuc2thcHNza29sYW4uc2VcIixcclxuICAgIHNjaG9vbEdyYWRlOiA5LFxyXG4gICAgcm9sZXM6IFsnU1RVREVOVCddLFxyXG4gICAgdXNlcm5hbWU6ICdlbGV2LmJvcmxhbmdlL0tTJyxcclxuICAgIHNjaG9vbDogJ0JvcmzDpG5nZScsXHJcbiAgICBzY2hvb2xUeXBlOiBcIkd5bW5hc2l1bVwiXHJcbn0se1xyXG4gICAgZGlzcGxheU5hbWU6IFwiUm9sbC1sw7ZzXCIsXHJcbiAgICBtYWlsOiBcIm5vbmVAa3Vuc2thcHNza29sYW4uc2VcIixcclxuICAgIHVzZXJuYW1lOiBcIm5vbmVcIixcclxuICAgIHJvbGVzOiBbXVxyXG59XTtcclxuXHJcbiIsImltcG9ydCBlbnYgZnJvbSAnLi4vZ2xvYmFscy9LRUQuZW52JztcclxuaW1wb3J0IHsgdXNlcnMgfSBmcm9tICcuL2RhdGEvdXNlcnMnO1xyXG5pbXBvcnQgeyBwYXJzZVF1ZXJ5U3RyaW5nIH0gZnJvbSAnLi4vdXRpbHMvcXVlcnktc3RyaW5nJztcclxuXHJcbmNvbnN0IHVzZXJuYW1lID0gcGFyc2VRdWVyeVN0cmluZyAobG9jYXRpb24uc2VhcmNoKS51c2VyO1xyXG5pZiAodXNlcm5hbWUpIHtcclxuICBjb25zdCB1c2VyID0gdXNlcnMuZmluZCh1ID0+IHUudXNlcm5hbWUgPT09IHVzZXJuYW1lKTtcclxuICBpZiAodXNlcikge1xyXG4gICAgZW52LmN1cnJlbnRVc2VyID0gdXNlcjtcclxuICB9XHJcbn1cclxuXHJcbmNvbnN0IHsgcm9sZSwgc2Nob29sIH0gPSBwYXJzZVF1ZXJ5U3RyaW5nKGxvY2F0aW9uLnNlYXJjaCk7XHJcbmlmIChlbnYuY3VycmVudFVzZXIpIHtcclxuICBpZiAocm9sZSkge1xyXG4gICAgZW52LmN1cnJlbnRVc2VyLnJvbGVzID0gcm9sZS5zcGxpdCgnLCcpO1xyXG4gIH1cclxuICBpZiAoc2Nob29sKSB7XHJcbiAgICBlbnYuY3VycmVudFVzZXIuc2Nob29sID0gc2Nob29sO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgY2ZnIGZyb20gJy4uL2dsb2JhbHMvS0VELmNmZyc7XHJcblxyXG5jZmcuS0VEX0xPQ0FMRSA9ICdzdic7XHJcbmNmZy5LRURfU0NIT09MX0xPQ0FMRSA9ICdzdic7XHJcbiIsIi8vIDxJbml0aWFsaXphdGlvbj5cclxuaW1wb3J0ICcuL3NldC1jdXJyZW50LXVzZXInOyAvLyBFbXVsYXRlIHNlcnZlci1zaWRlIHNjcmlwdCB0byBzZXQgY3VycmVudCB1c2VyXHJcbmltcG9ydCAnLi4vZ2xvYmFsLXNldHRlcnMvc2V0LWFsbCc7IC8vIENsaWVudC1zaWRlIGluaXRpYWxpemF0aW9uXHJcbmltcG9ydCAnLi90ZXN0LWNvbmZpZyc7XHJcbi8vIDwvSW5pdGlhbGl6YXRpb24+XHJcblxyXG5pbXBvcnQgZW52IGZyb20gJy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgQ2hvb3NlVXNlciB9IGZyb20gJy4vdXRpbHMvY2hvb3NlLXVzZXInO1xyXG5pbXBvcnQgeyBpbmNsdWRlQ1NTIH0gZnJvbSAnLi91dGlscy9pbmNsdWRlLWNzcyc7XHJcbmltcG9ydCB7IGluY2x1ZGVPcHRpb25hbENTUyB9IGZyb20gJy4uL3V0aWxzL2luY2x1ZGUtb3B0aW9uYWwtY3NzJztcclxuaW1wb3J0IHsgU3ViamVjdFBsYW5uZXJWaWV3ZXJBcHAgfSBmcm9tICcuLi9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3InO1xyXG5pbXBvcnQgeyBzZXR1cEludGwgfSBmcm9tICcuLi9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy9TZXR1cExhbmd1YWdlSW50bCc7XHJcbmltcG9ydCB7IGluamVjdEludGwsIEluamVjdGVkSW50bFByb3BzIH0gZnJvbSAncmVhY3QtaW50bCc7XHJcbmltcG9ydCB7IExhbmd1YWdlQ29udGV4dCB9IGZyb20gJy4uL2NvbXBvbmVudHMvdXRpbGl0eS1jb21wb25lbnRzL0xhbmd1YWdlQ29udGV4dCc7XHJcblxyXG5pbmNsdWRlT3B0aW9uYWxDU1Moe1xyXG4gIHYxOiBbXHJcbiAgICAnY3NzL2NvdXJzZXZpZXdlci5jc3MnLFxyXG4gICAgJ2Nzcy9kaWFsb2cuY3NzJyxcclxuICAgICdjc3MvZ3JpZC1jc3MtcGF0Y2guY3NzJ1xyXG4gIF0sXHJcbiAgaW5jbHVkZUNTUyxcclxuICB2ZXJzaW9uOiA2LFxyXG4gIHZlcnNpb25Gb2xkZXI6ICdjc3MvZGVsdGEtY3NzL2NvdXJzZXZpZXdlcidcclxufSk7XHJcblxyXG5jbGFzcyBfQXBwIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PEluamVjdGVkSW50bFByb3BzPiB7XHJcbiAgY29uc3RydWN0b3IocHJvcHM6IGFueSkge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgaWYgKCFsb2NhdGlvbi5oYXNoKSBsb2NhdGlvbi5oYXNoID0gXCIjL1wiO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3Qge2ludGx9ID0gdGhpcy5wcm9wcztcclxuICAgIHJldHVybiBlbnYuY3VycmVudFVzZXIgP1xyXG4gICAgPExhbmd1YWdlQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17e2ludGx9fT5cclxuICAgICAgPFN1YmplY3RQbGFubmVyVmlld2VyQXBwIC8+IFxyXG4gICAgPC9MYW5ndWFnZUNvbnRleHQuUHJvdmlkZXI+IDpcclxuICAgICAgPENob29zZVVzZXIgLz5cclxuICB9XHJcbn1cclxuXHJcbmNvbnN0IEFwcCA9IHNldHVwSW50bChpbmplY3RJbnRsKF9BcHApKTtcclxuZXhwb3J0IGRlZmF1bHQgQXBwO1xyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IHVzZXJzIH0gZnJvbSAnLi4vZGF0YS91c2Vycyc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gQ2hvb3NlVXNlcigpIHtcclxuICBsZXQgc2VsZWN0O1xyXG4gIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cInN2LWxheW91dFwiPlxyXG4gICAgPGgyPlbDpGxqIGFudsOkbmRhcmU8L2gyPlxyXG4gICAgPHRhYmxlIGNsYXNzTmFtZT1cImxvZ2luLXRhYmxlXCI+PHRoZWFkPjx0cj5cclxuICAgICAgPHRoPk5hbW48L3RoPlxyXG4gICAgICA8dGg+Um9sbGVyPC90aD5cclxuICAgICAgPHRoPkUtcG9zdDwvdGg+XHJcbiAgICAgIDx0aD5Ta29sYTwvdGg+XHJcbiAgICA8L3RyPjwvdGhlYWQ+XHJcbiAgICAgIDx0Ym9keT5cclxuICAgICAgICB7dXNlcnMubWFwKCh7IHVzZXJuYW1lLCBkaXNwbGF5TmFtZSwgbWFpbCwgc2Nob29sLCByb2xlcyB9KSA9PlxyXG4gICAgICAgICAgPHRyIGtleT17bWFpbH0gb25DbGljaz17KCkgPT4gbG9jYXRpb24uc2VhcmNoID0gYD91c2VyPSR7dXNlcm5hbWV9YH0+XHJcbiAgICAgICAgICAgIDx0ZD57ZGlzcGxheU5hbWV9PC90ZD5cclxuICAgICAgICAgICAgPHRkIHN0eWxlPXtyb2xlcy5sZW5ndGggPT09IDAgPyB7IGZvbnRTdHlsZTogJ2l0YWxpYycgfSA6IHt9fT57cm9sZXMubGVuZ3RoID09PSAwID8gXCJzYWtuYXIgcm9sbGVyXCIgOiByb2xlcy5qb2luKCcsICcpfTwvdGQ+XHJcbiAgICAgICAgICAgIDx0ZD57bWFpbH08L3RkPlxyXG4gICAgICAgICAgICA8dGQgc3R5bGU9e3NjaG9vbCA/IHt9IDogeyBmb250U3R5bGU6ICdpdGFsaWMnIH19PntzY2hvb2wgfHwgXCJzYWtuYXIgc2tvbGFcIn08L3RkPlxyXG4gICAgICAgICAgPC90cj5cclxuICAgICAgICApfVxyXG4gICAgICA8L3Rib2R5PjwvdGFibGU+XHJcbiAgPC9kaXY+XHJcbn07XHJcbiIsImZ1bmN0aW9uIHJlc29sdmUodXJpOiBzdHJpbmcpIHtcclxuICB2YXIgaHJlZiA9IGxvY2F0aW9uLnByb3RvY29sICsgXCIvL1wiICsgbG9jYXRpb24uaG9zdCArIGxvY2F0aW9uLnBhdGhuYW1lO1xyXG4gIHZhciBwTGFzdFNsYXNoID0gaHJlZi5sYXN0SW5kZXhPZignLycpO1xyXG4gIHJldHVybiBocmVmLnN1YnN0cigwLCBwTGFzdFNsYXNoICsgMSkgKyB1cmk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpbmNsdWRlQ1NTKGNzc0ZpbGU6IHN0cmluZykge1xyXG4gIGRvY3VtZW50LndyaXRlKCc8bGluayByZWw9XCJzdHlsZXNoZWV0XCIgaHJlZj1cIicrcmVzb2x2ZShjc3NGaWxlKSsnXCIgLz4nKTsgIFxyXG59XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHtMfSBmcm9tICcuL3V0aWxzJztcclxuaW1wb3J0IHtkYn0gZnJvbSAnLi4vZ2xvYmFscy9kYic7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRXcml0ZXIgfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBSZW1vdmVJdGVtIH0gZnJvbSAnLi4vY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci9zdWItY29tcG9uZW50cy9yZW1vdmUtaXRlbSc7XHJcblxyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxufVxyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICBlcnJvcnM6IEVycm9yU3RydWN0W107XHJcbiAgaW5mb3M6IHN0cmluZ1tdO1xyXG4gIC8vZGJXcml0ZXJSZXRyeWFibGVFcnJvcj86IEVycm9yO1xyXG4gIGRiV3JpdGVySXNTYXZpbmc/OiBib29sZWFuO1xyXG4gIGRiV3JpdGVySXNFZGl0ZWQ/OiBib29sZWFuO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgRXJyb3JTdHJ1Y3Qge1xyXG4gIG1lc3NhZ2U6IHN0cmluZztcclxuICByZXRyeWFibGU/OiBib29sZWFuO1xyXG4gIGRldGFpbHM/OiBFcnJvcjtcclxuICBzaG93RGV0YWlscz86IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBFcnJvclN1Y2Nlc3NGZWVkYmFjayBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcyxTdGF0ZT4ge1xyXG4gIGNvbnN0cnVjdG9yIChwcm9wczogUHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICAgIHRoaXMuc3RhdGU9e1xyXG4gICAgICBlcnJvcnM6IFtdLFxyXG4gICAgICBpbmZvczogW11cclxuICAgIH07XHJcbiAgICB0aGlzLl91bmhhbmRsZWRSZWplY3Rpb24gPSB0aGlzLl91bmhhbmRsZWRSZWplY3Rpb24uYmluZCh0aGlzKTtcclxuICAgIHRoaXMuX2Vycm9yID0gdGhpcy5fZXJyb3IuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuX2N1c3RvbUVycm9yID0gdGhpcy5fY3VzdG9tRXJyb3IuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuX29uSW5mbyA9IHRoaXMuX29uSW5mby5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5fZGJXcml0ZXJFcnJvciA9IHRoaXMuX2RiV3JpdGVyRXJyb3IuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuX2RiV3JpdGVyU3RhdGVDaGFuZ2VkID0gdGhpcy5fZGJXcml0ZXJTdGF0ZUNoYW5nZWQuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgX2FkZEVycm9yKG1lc3NhZ2U6IHN0cmluZywgZGV0YWlscz86IEVycm9yLCByZXRyeWFibGU/OiBib29sZWFuKSB7XHJcbiAgICAvL2NvbnNvbGUuZXJyb3IobWVzc2FnZSwge3JldHJ5YWJsZTogISFyZXRyeWFibGUsIGRldGFpbHN9KTtcclxuICAgIHRoaXMuc2V0U3RhdGUoKHtlcnJvcnN9KSA9PiB7XHJcbiAgICAgIGlmIChlcnJvcnMuc29tZShlID0+IGUubWVzc2FnZSA9PT0gbWVzc2FnZSkpIHJldHVybiB7ZXJyb3JzfTtcclxuICAgICAgaWYgKGVycm9ycy5sZW5ndGggPiAyKSBlcnJvcnMgPSBlcnJvcnMuc2xpY2UoMSk7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgZXJyb3JzOiBlcnJvcnMuY29uY2F0KFt7bWVzc2FnZSwgZGV0YWlscywgcmV0cnlhYmxlfV0pXHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuICAgIC8vIFJlbW92ZSBub24tcmV0cnlhYmxlIGVycm9ycyBhZnRlciAzMCBzZWNvbmRzOlxyXG4gICAgaWYgKCFyZXRyeWFibGUpIHNldFRpbWVvdXQoKCk9PntcclxuICAgICAgdGhpcy5zZXRTdGF0ZSgoe2Vycm9yc30pID0+ICh7XHJcbiAgICAgICAgZXJyb3JzOiBlcnJvcnMuZmlsdGVyKGUgPT4gZS5tZXNzYWdlICE9PSBtZXNzYWdlKVxyXG4gICAgICB9KSk7XHJcbiAgICB9LCAzMDAwMCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIF9hZGRJbmZvKG1lc3NhZ2U6IHN0cmluZykge1xyXG4gICAgaWYgKG1lc3NhZ2UgPT09IFwiXCIpIHtcclxuICAgICAgLy8gVHVybiBvZmYgY3VycmVudCBpbmZvIG1lc3NhZ2VzXHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe2luZm9zOiBbXX0pO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLnNldFN0YXRlKCh7aW5mb3N9KSA9PiB7XHJcbiAgICAgIGlmIChpbmZvcy5zb21lKGluZm8gPT4gaW5mbyA9PT0gbWVzc2FnZSkpIHJldHVybiB7aW5mb3N9O1xyXG4gICAgICBpZiAoaW5mb3MubGVuZ3RoID4gMSkgaW5mb3MgPSBpbmZvcy5zbGljZSgxKTtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBpbmZvczogW21lc3NhZ2VdIC8vIHdhczogaW5mb3MuY29uY2F0KG1lc3NhZ2UpLiBCdXQgaXQgc3Vja3MhXHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuICAgIC8vIFJlbW92ZSBpbmZvIG1lc3NhZ2UgYWZ0ZXIgMTAgc2Vjb25kczpcclxuICAgIHNldFRpbWVvdXQoKCk9PntcclxuICAgICAgdGhpcy5zZXRTdGF0ZSgoe2luZm9zfSkgPT4gKHtcclxuICAgICAgICBpbmZvczogaW5mb3MuZmlsdGVyKG1zZyA9PiBtc2cgIT09IG1lc3NhZ2UpXHJcbiAgICAgIH0pKTtcclxuICAgIH0sIDEwMDAwKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgX2RiV3JpdGVyRXJyb3IgKGVycm9yOiBFcnJvciwgcmV0cnlhYmxlOiBib29sZWFuKSB7XHJcbiAgICB0aGlzLl9hZGRFcnJvcihgRGV0IGfDpXIgaW50ZSBhdHQgc3BhcmEgdGlsbCBzZXJ2ZXJuYCwgZXJyb3IsIHJldHJ5YWJsZSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIF9kYldyaXRlclN0YXRlQ2hhbmdlZCAoe2lzRWRpdGVkLCBpc1NhdmluZ306IEtlZEJhY2tlbmRXcml0ZXIpIHtcclxuICAgIGlmICghaXNFZGl0ZWQpIHtcclxuICAgICAgLy8gSWYgaXNFZGl0ZWQgaXMgZmFsc2UsIGEgc3VjY2Vzc2Z1bCB3cml0ZSBtdXN0IGhhdmUgaGFwcGVuZWQsIGFuZFxyXG4gICAgICAvLyB0aGVyZSBjYW5ub3QgYmUgYW55IHJldHJ5YWJsZSBlcnJvciBhbnltb3JlXHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoKHtlcnJvcnN9KSA9PiB7XHJcbiAgICAgICAgZXJyb3JzID0gZXJyb3JzLmZpbHRlcihlID0+ICFlLnJldHJ5YWJsZSk7XHJcbiAgICAgICAgcmV0dXJuIHtlcnJvcnN9O1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICBkYldyaXRlcklzRWRpdGVkOiBpc0VkaXRlZCxcclxuICAgICAgZGJXcml0ZXJJc1NhdmluZzogaXNTYXZpbmdcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndW5oYW5kbGVkcmVqZWN0aW9uJywgdGhpcy5fdW5oYW5kbGVkUmVqZWN0aW9uKTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIHRoaXMuX2Vycm9yKTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjdXN0b21lcnJvcicsIHRoaXMuX2N1c3RvbUVycm9yKTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdpbmZvJywgdGhpcy5fb25JbmZvKTtcclxuICAgIGRiLndyaXRlci5vbkVycm9yKHRoaXMuX2RiV3JpdGVyRXJyb3IpO1xyXG4gICAgZGIud3JpdGVyLm9uU3RhdGVDaGFuZ2UodGhpcy5fZGJXcml0ZXJTdGF0ZUNoYW5nZWQpO1xyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XHJcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigndW5oYW5kbGVkcmVqZWN0aW9uJywgdGhpcy5fdW5oYW5kbGVkUmVqZWN0aW9uKTtcclxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIHRoaXMuX2Vycm9yKTtcclxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdjdXN0b21lcnJvcicsIHRoaXMuX2N1c3RvbUVycm9yKTtcclxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdpbmZvJywgdGhpcy5fb25JbmZvKTtcclxuICAgIGRiLndyaXRlci5vZmYodGhpcy5fZGJXcml0ZXJFcnJvcik7XHJcbiAgICBkYi53cml0ZXIub2ZmKHRoaXMuX2RiV3JpdGVyU3RhdGVDaGFuZ2VkKTtcclxuICB9XHJcblxyXG4gIF91bmhhbmRsZWRSZWplY3Rpb24gKGV2OiBFdmVudCAmIHtyZWFzb246IEVycm9yfSkge1xyXG4gICAgdGhpcy5fYWRkRXJyb3IoYEV0dCBva8OkbnQgZmVsIGludHLDpGZmYWRlLi4uYCwgZXYucmVhc29uKTtcclxuICB9XHJcblxyXG4gIF9lcnJvciAoZXY6IEV2ZW50ICYge2Vycm9yOiBFcnJvcn0pIHtcclxuICAgIHRoaXMuX2FkZEVycm9yKGV2LmVycm9yID8gZXYuZXJyb3IubWVzc2FnZSA6IGBFdHQgb2vDpG50IGZlbCBpbnRyw6RmZmFkZS4uLmAsIGV2LmVycm9yKTtcclxuICB9XHJcblxyXG4gIF9jdXN0b21FcnJvciAoZXY6IEN1c3RvbUV2ZW50KSB7XHJcbiAgICB0aGlzLl9hZGRFcnJvcihldi5kZXRhaWwpO1xyXG4gIH1cclxuXHJcbiAgX29uSW5mbyhldjogQ3VzdG9tRXZlbnQpIHtcclxuICAgIHRoaXMuX2FkZEluZm8oZXYuZGV0YWlsKTtcclxuICB9IFxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7ZXJyb3JzLCBpbmZvcywgZGJXcml0ZXJJc1NhdmluZ30gPSB0aGlzLnN0YXRlO1xyXG4gICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwiZXJyb3Itc3VjY2Vzcy1mZWVkYmFja1wiIHN0eWxlPXt7XHJcbiAgICAgIHBvc2l0aW9uOiBcImZpeGVkXCIsXHJcbiAgICAgIGxlZnQ6IDAsXHJcbiAgICAgIHRvcDogMCxcclxuICAgICAgd2lkdGg6IFwiMTAwJVwiLFxyXG4gICAgICBwb2ludGVyRXZlbnRzOiAnbm9uZSdcclxuICAgIH19PlxyXG4gICAgICA8ZGl2IHN0eWxlPXt7ZGlzcGxheTogJ3RhYmxlJywgbWFyZ2luOiBcIjAgYXV0b1wifX0+XHJcbiAgICAgICAge2Vycm9ycy5maWx0ZXIoZSA9PiAhZS5yZXRyeWFibGUgfHwgIWRiV3JpdGVySXNTYXZpbmcpXHJcbiAgICAgICAgLm1hcCgoe21lc3NhZ2UsIGRldGFpbHMsIHJldHJ5YWJsZSwgc2hvd0RldGFpbHN9KSA9PiAoXHJcbiAgICAgICAgICA8ZGl2IGtleT17bWVzc2FnZX0gY2xhc3NOYW1lPVwiZXJyb3JcIj5cclxuICAgICAgICAgICAgPGRpdiBzdHlsZT17e2Zsb2F0OidsZWZ0J319PnttZXNzYWdlfTwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPXt7cG9pbnRlckV2ZW50czogJ2F1dG8nfX0+XHJcbiAgICAgICAgICAgICAgPFJlbW92ZUl0ZW0gb25DbGljaz17KCk9PnRoaXMucmVtb3ZlRXJyb3IobWVzc2FnZSl9IC8+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICB7ZGV0YWlscyB8fCByZXRyeWFibGUgPyA8ZGl2IHN0eWxlPXt7cG9pbnRlckV2ZW50czogJ2F1dG8nfX0+XHJcbiAgICAgICAgICAgICAge2RldGFpbHMgPyA8PjxhIGNsYXNzTmFtZT1cImJ0blwiIG9uQ2xpY2s9eygpPT50aGlzLnRvZ2dsZURldGFpbHMobWVzc2FnZSl9PntzaG93RGV0YWlscyA/IFwiRMO2bGogZGV0YWlsZXJcIiA6IFwiVmlzYSBkZXRhaWxqZXJcIn08L2E+Jm5ic3A7PC8+IDogdW5kZWZpbmVkfVxyXG4gICAgICAgICAgICAgIHtzaG93RGV0YWlscyA/IDxwPnsnJytkZXRhaWxzfTwvcD46IDw+Jm5ic3A7PC8+fVxyXG4gICAgICAgICAgICAgIHtyZXRyeWFibGUgPyA8YSBjbGFzc05hbWU9XCJidG5cIiBvbkNsaWNrPXsoKT0+dGhpcy5yZXRyeVNhdmUoKX0+RsO2cnPDtmsgc3BhcmEgbnU8L2E+IDogdW5kZWZpbmVkfVxyXG4gICAgICAgICAgICA8L2Rpdj46IHVuZGVmaW5lZH1cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICkpfVxyXG4gICAgICAgIHtpbmZvcy5tYXAobWVzc2FnZSA9PiBcclxuICAgICAgICAgIDxwIGtleT17bWVzc2FnZX0gY2xhc3NOYW1lPVwiaW5mb1wiPnttZXNzYWdlfTwvcD5cclxuICAgICAgICApfVxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PjtcclxuICB9XHJcbiAgcmVtb3ZlRXJyb3IobWVzc2FnZTogc3RyaW5nKTogYW55IHtcclxuICAgIHRoaXMuc2V0U3RhdGUoKHtlcnJvcnN9KSA9PiAoe1xyXG4gICAgICBlcnJvcnM6IGVycm9ycy5maWx0ZXIoZSA9PiBlLm1lc3NhZ2UgIT09IG1lc3NhZ2UpXHJcbiAgICB9KSk7XHJcbiAgfVxyXG5cclxuICByZXRyeVNhdmUoKSB7XHJcbiAgICBkYi53cml0ZXIucmV0cnlTYXZlKCk7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVEZXRhaWxzKG1lc3NhZ2U6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgdGhpcy5zZXRTdGF0ZSgoe2Vycm9yc30pID0+ICh7ZXJyb3JzOiBlcnJvcnMubWFwKGVycm9yID0+IGVycm9yLm1lc3NhZ2UgPT09IG1lc3NhZ2UgP1xyXG4gICAgICB7XHJcbiAgICAgICAgLi4uZXJyb3IsXHJcbiAgICAgICAgc2hvd0RldGFpbHM6ICFlcnJvci5zaG93RGV0YWlsc1xyXG4gICAgICB9IDpcclxuICAgICAgZXJyb3IpXHJcbiAgICB9KSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBmdW5jdGlvbiBpbmNsdWRlT3B0aW9uYWxDU1MgKHtcclxuICB2MSxcclxuICB2ZXJzaW9uRm9sZGVyLFxyXG4gIHZlcnNpb24sXHJcbiAgaW5jbHVkZUNTUyxcclxuICBOT0NTU1xyXG59OiB7djE/OiBzdHJpbmdbXSwgdmVyc2lvbkZvbGRlcj86IHN0cmluZywgdmVyc2lvbjogbnVtYmVyLCBpbmNsdWRlQ1NTOiAoZmlsZTogc3RyaW5nKSA9PiB2b2lkLCBOT0NTUz86IHN0cmluZ30pIHtcclxuICBpZiAoIU5PQ1NTKSB7XHJcbiAgICBpZiAodjEpIHYxLmZvckVhY2goY3NzRmlsZSA9PiBpbmNsdWRlQ1NTKGNzc0ZpbGUpKTtcclxuICB9XHJcbiAgbGV0IGNzc1ZlciA9IHBhcnNlSW50KE5PQ1NTKTtcclxuICBpZiAoaXNOYU4oY3NzVmVyKSkgY3NzVmVyID0gMTtcclxuICBmb3IgKGxldCB2ZXIgPSBjc3NWZXIgKyAxOyB2ZXIgPD0gdmVyc2lvbjsgKyt2ZXIpIHtcclxuICAgIGluY2x1ZGVDU1MoYCR7dmVyc2lvbkZvbGRlcn0vdiR7dmVyfS5jc3NgKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcclxuaW1wb3J0IHsgY2ZnIH0gZnJvbSAnLi4vZ2xvYmFscy9LRUQuY2ZnJztcclxuXHJcbmNvbnN0IEhFQVJUQkVBVF9JTlRFUlZBTCA9IDUgKiA2MCAqIDEwMDA7IC8vIDUgbWludXRlcy5cclxuY29uc3QgSEVBUlRCRUFUX1VSTCA9IGNmZy5LRURfS0VFUF9BTElWRV9VUkw7XHJcblxyXG5sZXQgbGFzdEFjdGl2aXR5ID0gRGF0ZS5ub3coKTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBrZWVwU2Vzc2lvbkFsaXZlKCkge1xyXG4gIHNldEludGVydmFsKG9uVGltZW91dCwgSEVBUlRCRUFUX0lOVEVSVkFMKTtcclxuICBzZXRUaW1lb3V0KCgpPT4kKCdib2R5JylcclxuICAgIC5tb3VzZW1vdmUob25Vc2VyQWN0aXZlKVxyXG4gICAgLmtleXByZXNzKG9uVXNlckFjdGl2ZSlcclxuICAgIC5zY3JvbGwob25Vc2VyQWN0aXZlKSwgMTAwKTtcclxufVxyXG5cclxuZnVuY3Rpb24gb25Vc2VyQWN0aXZlKCkge1xyXG4gIGxhc3RBY3Rpdml0eSA9IERhdGUubm93KCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uVGltZW91dCgpIHtcclxuICBjb25zdCBpbmFjdGl2aXR5VGltZSA9IERhdGUubm93KCkgLSBsYXN0QWN0aXZpdHk7XHJcbiAgaWYgKGluYWN0aXZpdHlUaW1lIDwgSEVBUlRCRUFUX0lOVEVSVkFMKSB7XHJcbiAgICBoZWFydGJlYXQoKTtcclxuICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGhlYXJ0YmVhdCgpIHtcclxuICBjb25zb2xlLmxvZyhgU2VuZGluZyBoZWFydGJlYXQgcmVxdWVzdCB0byAke0hFQVJUQkVBVF9VUkx9YCk7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKEhFQVJUQkVBVF9VUkwsIHtcclxuICAgICAgY2FjaGU6ICduby1jYWNoZScsXHJcbiAgICAgIGNyZWRlbnRpYWxzOiAnc2FtZS1vcmlnaW4nXHJcbiAgICB9KTtcclxuICAgIGNvbnNvbGUubG9nKGBSZXNwb25zZSBmcm9tICR7SEVBUlRCRUFUX1VSTH06ICR7cmVzLnN0YXR1c30gJHtyZXMuc3RhdHVzVGV4dH1gKTtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIGNvbnNvbGUud2FybihgUmVxdWVzdCB0byAke0hFQVJUQkVBVF9VUkx9IGZhaWxlZDogJHtlcnJ9YCk7XHJcbiAgfVxyXG59XHJcbiIsImNvbnN0IERFRkFVTFRfQ0FDSEVfRVhQSVJBVElPTiA9IDMwICogNjAgKiAxMDAwOyAvLyAzMCBtaW51dGVzLlxyXG5cclxudHlwZSBQcm9taXNlUmV0dXJuaW5nTWV0aG9kTmFtZXM8QVBJPiA9IHtcclxuICBbTUVUSE9EIGluIGtleW9mIEFQSV06IEFQSVtNRVRIT0RdIGV4dGVuZHMgKC4uLmFyZ3M6IGFueVtdKSA9PiBQcm9taXNlPGFueT4gPyBNRVRIT0QgOiBuZXZlclxyXG59XHJcblxyXG50eXBlIENvbnZlcnRNZXRob2RUb1N1c3BlbnNlPEY+ID0gRiBleHRlbmRzICguLi5hcmdzOiBpbmZlciBBKSA9PiBQcm9taXNlPGluZmVyIFI+ID9cclxuICAoLi4uYXJnczogQSkgPT4gUiA6XHJcbiAgRjtcclxuXHJcbmV4cG9ydCB0eXBlIFN1c3BlbnNlQmFzZWRBUEk8QVBJPiA9IHtcclxuICBbTUVUSE9EIGluIGtleW9mIFByb21pc2VSZXR1cm5pbmdNZXRob2ROYW1lczxBUEk+XTogQ29udmVydE1ldGhvZFRvU3VzcGVuc2U8QVBJW01FVEhPRF0+XHJcbn1cclxuXHJcbnR5cGUgT3B0aW9ucyA9IHtcclxuICBpc0FwaU1ldGhvZD86IChwcm9wOiBzdHJpbmcpPT5ib29sZWFuLFxyXG4gIGNhY2hlRXhwaXJhdGlvbj86IG51bWJlclxyXG59XHJcblxyXG5jb25zdCBkZWZhdWx0T3B0aW9uczogT3B0aW9ucyA9IHtcclxuICBpc0FwaU1ldGhvZDogZiA9PiB0eXBlb2YgZiA9PT0gJ2Z1bmN0aW9uJyxcclxuICBjYWNoZUV4cGlyYXRpb246IERFRkFVTFRfQ0FDSEVfRVhQSVJBVElPTlxyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VTdXNwZW5zZUFwaTxBUEk+KGFwaTogQVBJLCBvcHRpb25zID0gZGVmYXVsdE9wdGlvbnMpOiBTdXNwZW5zZUJhc2VkQVBJPEFQST5cclxue1xyXG4gIG9wdGlvbnMgPSB7Li4uZGVmYXVsdE9wdGlvbnMsIC4uLm9wdGlvbnN9O1xyXG4gIGNvbnN0IHtpc0FwaU1ldGhvZCwgY2FjaGVFeHBpcmF0aW9ufSA9IG9wdGlvbnM7XHJcblxyXG4gIGNvbnN0IHJ2OiBTdXNwZW5zZUJhc2VkQVBJPEFQST4gPSBPYmplY3QuY3JlYXRlKGFwaSBhcyBhbnkpIGFzIFN1c3BlbnNlQmFzZWRBUEk8QVBJPjtcclxuICBjb25zdCBjYWNoZToge1trZXk6IHN0cmluZ106IHt0aW1lb3V0OiBudW1iZXIsIHZhbHVlPzogYW55LCBlcnJvcj86IGFueSwgcHJvbWlzZT86IFByb21pc2U8YW55Pn19ID0ge307XHJcblxyXG4gIC8vIFdhbGsgdGhlIGluc3RhbmNlICsgcHJvdG90eXBlIGNoYWluIHRvIGdlbmVyYXRlIHN1c3BlbnNlIHZlcnNpb24gb2YgZWFjaCBwcm9taXNlIHJldHVybmluZyBtZXRob2RcclxuICBmb3IgKGxldCBwcm90byA9IGFwaTsgcHJvdG8gJiYgcHJvdG8gIT09IE9iamVjdC5wcm90b3R5cGU7IHByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHByb3RvKSkge1xyXG4gICAgc3VzcGVuZGlmeShwcm90byk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzdXNwZW5kaWZ5KHByb3RvKSB7XHJcbiAgICBPYmplY3Qua2V5cyhwcm90bykuZm9yRWFjaChwcm9wID0+IHtcclxuICAgICAgaWYgKCFydi5oYXNPd25Qcm9wZXJ0eShwcm9wKSAmJiBpc0FwaU1ldGhvZChwcm9wKSkge1xyXG4gICAgICAgIHJ2W3Byb3BdID0gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcclxuICAgICAgICAgIGNvbnN0IGtleSA9IEpTT04uc3RyaW5naWZ5KFtwcm9wLCAuLi5hcmdzXSk7XHJcbiAgICAgICAgICBjb25zdCBjYWNoZWRFbnRyeSA9IGNhY2hlW2tleV07XHJcbiAgICAgICAgICBpZiAoY2FjaGVkRW50cnkgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBpZiAoY2FjaGVkRW50cnkucHJvbWlzZSkgdGhyb3cgY2FjaGVkRW50cnkucHJvbWlzZTtcclxuICAgICAgICAgICAgaWYgKGNhY2hlZEVudHJ5LmVycm9yKSB0aHJvdyBjYWNoZWRFbnRyeS5lcnJvcjtcclxuICAgICAgICAgICAgaWYgKGNhY2hlZEVudHJ5LnRpbWVvdXQgPiBEYXRlLm5vdygpKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGNhY2hlZEVudHJ5LnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBwcm9taXNlID0gcHJvdG9bcHJvcF0uYXBwbHkoYXBpLCBhcmdzKS50aGVuKHJlc3VsdCA9PiB7XHJcbiAgICAgICAgICAgICAgY2FjaGVba2V5XSA9IHt0aW1lb3V0OiBEYXRlLm5vdygpICsgY2FjaGVFeHBpcmF0aW9uLCB2YWx1ZTogcmVzdWx0fTtcclxuICAgICAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgICAgICAgIGNhY2hlW2tleV0gPSB7dGltZW91dDogRGF0ZS5ub3coKSArIGNhY2hlRXhwaXJhdGlvbiwgZXJyb3J9O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY2FjaGVba2V5XSA9IHt0aW1lb3V0OiBEYXRlLm5vdygpICsgY2FjaGVFeHBpcmF0aW9uLCBwcm9taXNlfTtcclxuICAgICAgICAgICAgdGhyb3cgcHJvbWlzZTtcclxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGlmIChlcnJvci50aGVuKSB0aHJvdyBlcnJvcjtcclxuICAgICAgICAgICAgY2FjaGVba2V5XSA9IHt0aW1lb3V0OiBEYXRlLm5vdygpICsgY2FjaGVFeHBpcmF0aW9uLCBlcnJvcn07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBhcyBhbnk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHJ2O1xyXG59XHJcbiIsIlxyXG5leHBvcnQgY2xhc3MgUGVuZGluZ0pvYiB7XHJcbiAgcHJpdmF0ZSB0aW1lb3V0SWQgPSBudWxsO1xyXG4gIHByaXZhdGUgY2FuY2VsbGVkID0gZmFsc2U7XHJcbiAgcHJpdmF0ZSBwZW5kaW5nID0gZmFsc2U7XHJcbiAgcHJpdmF0ZSBpc0pvYkV4ZWN1dGluZyA9IGZhbHNlO1xyXG4gIHByaXZhdGUgam9iQ2FsbGJhY2s6ICgpPT5Qcm9taXNlPGFueT47XHJcbiAgXHJcbiAgY29uc3RydWN0b3IoY2FsbGJhY2s6ICgpPT5Qcm9taXNlPGFueT4pIHtcclxuICAgIHRoaXMuam9iQ2FsbGJhY2sgPSBjYWxsYmFjaztcclxuICB9XHJcblxyXG4gIHRyaWdnZXJDaGFuZ2UodGhyb3R0bGU6IG51bWJlcik6IGFueSB7XHJcbiAgICBpZiAodGhpcy5jYW5jZWxsZWQpIHJldHVybjtcclxuICAgIHRoaXMucGVuZGluZyA9IHRydWU7XHJcbiAgICBpZiAodGhpcy50aW1lb3V0SWQgIT09IG51bGwpXHJcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRJZCk7XHJcbiAgICB0aGlzLnRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCk9PnRoaXMubGF1bmNoSm9iKCksIHRocm90dGxlKTtcclxuICB9XHJcblxyXG4gIHN0b3AoKSB7XHJcbiAgICBpZiAodGhpcy50aW1lb3V0SWQgIT09IG51bGwpXHJcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRJZCk7XHJcbiAgICB0aGlzLnRpbWVvdXRJZCA9IG51bGw7XHJcbiAgICB0aGlzLmNhbmNlbGxlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIGxhdW5jaEpvYigpIHtcclxuICAgIGlmICh0aGlzLmNhbmNlbGxlZCkgcmV0dXJuO1xyXG4gICAgaWYgKCF0aGlzLnBlbmRpbmcpIHJldHVybjtcclxuICAgIGlmICh0aGlzLmlzSm9iRXhlY3V0aW5nKSByZXR1cm47XHJcbiAgICB0aGlzLnRpbWVvdXRJZCA9IG51bGw7XHJcbiAgICB0cnkge1xyXG4gICAgICB0aGlzLmlzSm9iRXhlY3V0aW5nID0gdHJ1ZTtcclxuICAgICAgdGhpcy5wZW5kaW5nID0gZmFsc2U7XHJcbiAgICAgIGF3YWl0IHRoaXMuam9iQ2FsbGJhY2soKTtcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIHRoaXMuaXNKb2JFeGVjdXRpbmcgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnBlbmRpbmcpXHJcbiAgICAgIGF3YWl0IHRoaXMubGF1bmNoSm9iKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBpbnRlcmZhY2UgUGFyc2VRdWVyeVN0cmluZ09wdGlvbnMge1xyXG4gIHRvTG93ZXI/OiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VRdWVyeVN0cmluZyhsb2NhdGlvblNlYXJjaDogc3RyaW5nLCBvcHRpb25zPzogUGFyc2VRdWVyeVN0cmluZ09wdGlvbnMpOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9IHtcclxuICBjb25zdCB7dG9Mb3dlcn0gPSAob3B0aW9ucyB8fMKge30pIGFzIFBhcnNlUXVlcnlTdHJpbmdPcHRpb25zO1xyXG4gIGNvbnN0IHJlc3VsdCA9IHt9O1xyXG4gIGlmIChsb2NhdGlvblNlYXJjaCAmJiBsb2NhdGlvblNlYXJjaC5sZW5ndGggPiAxKVxyXG4gICAgbG9jYXRpb25TZWFyY2guc3Vic3RyKDEpXHJcbiAgICAgIC5zcGxpdCgnJicpXHJcbiAgICAgIC5tYXAocGFydCA9PiBwYXJ0LnNwbGl0KCc9JykubWFwKHMgPT4gZGVjb2RlVVJJQ29tcG9uZW50KHMudHJpbSgpKSkpXHJcbiAgICAgIC5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHJlc3VsdFt0b0xvd2VyID8ga2V5LnRvTG93ZXJDYXNlKCkgOiBrZXldID0gdmFsdWUpO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVuY29kZVBhcmFtcyhwYXJhbXM6IHtba2V5OiBzdHJpbmddOnN0cmluZ30pIHtcclxuICByZXR1cm4gT2JqZWN0LmtleXMocGFyYW1zKS5maWx0ZXIoa2V5ID0+IHBhcmFtc1trZXldICE9PSB1bmRlZmluZWQpLm1hcChrZXkgPT4gYCR7ZW5jb2RlVVJJQ29tcG9uZW50KGtleSl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHBhcmFtc1trZXldKX1gKS5qb2luKCcmJyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVF1ZXJ5U3RyaW5nKHBhcmFtczoge1trZXk6IHN0cmluZ106c3RyaW5nfSkge1xyXG4gIHJldHVybiBcIj9cIiArIGVuY29kZVBhcmFtcyhwYXJhbXMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VIYXNoUXVlcnlTdHJpbmcobG9jYXRpb25IYXNoOiBzdHJpbmcsIG9wdGlvbnM/OiBQYXJzZVF1ZXJ5U3RyaW5nT3B0aW9ucykge1xyXG4gIHJldHVybiBwYXJzZVF1ZXJ5U3RyaW5nKGxvY2F0aW9uSGFzaCwgb3B0aW9ucyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUhhc2hRdWVyeVN0cmluZyhwYXJhbXM6IHtba2V5OiBzdHJpbmddOnN0cmluZ30pIHtcclxuICByZXR1cm4gXCIjXCIgKyBlbmNvZGVQYXJhbXMocGFyYW1zKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNwbGl0VXJsQW5kUXVlcnkgKHVybFdpdGhQb3NzaWJsZVF1ZXJ5OiBzdHJpbmcpIHtcclxuICBjb25zdCBwUXVlcnkgPSB1cmxXaXRoUG9zc2libGVRdWVyeS5pbmRleE9mKCc/Jyk7XHJcbiAgcmV0dXJuIHBRdWVyeSA+PSAwID9cclxuICAgIFt1cmxXaXRoUG9zc2libGVRdWVyeS5zdWJzdHIoMCwgcFF1ZXJ5KSwgdXJsV2l0aFBvc3NpYmxlUXVlcnkuc3Vic3RyKHBRdWVyeSldIDpcclxuICAgIFt1cmxXaXRoUG9zc2libGVRdWVyeSwgXCJcIl07XHJcbn1cclxuIiwiaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xyXG5pbXBvcnQgeyBUZXJtLCBBY2FkZW1pY1llYXIgfSBmcm9tICcuLi9jb250cmFjdHMva2VkLW1vZGVscyc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNjaG9vbE1vbWVudCB7XHJcbiAgYWNhZGVtaWNZZWFyOiBBY2FkZW1pY1llYXI7XHJcbiAgdGVybTogVGVybTtcclxuICB3ZWVrPzogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Rmlyc3RBbmRMYXN0V2Vla09mVGVybSh0ZXJtOiBUZXJtKSB7XHJcbiAgcmV0dXJuIHRlcm0gPT09ICdBVCcgP1xyXG4gICAgWzMyLCA1MV0gOlxyXG4gICAgWzEsIDI1XTtcclxufVxyXG5cclxuLy9Ob3QgdXNlZCBhbnltb3JlXHJcbi8vIGV4cG9ydCBmdW5jdGlvbiBnZXRUZXJtU3RhcnRBbmRFbmQobm93OiBtb21lbnQuTW9tZW50KSA6IG1vbWVudC5Nb21lbnRbXSB7XHJcbi8vICAgICByZXR1cm4gbm93Lm1vbnRoKCkgPj0gNiA/IC8vIDYgPSBKdWx5IGluIEpTIERhdGVzIGFuZCBpbiBtb21lbnQgYXMgd2VsbCFcclxuLy8gICAgIFttb21lbnQobmV3IERhdGUobm93LnllYXIoKSwgNywgMSkpLCBtb21lbnQobmV3IERhdGUobm93LnllYXIoKSwgMTEsIDMxKSldIDogLy8gYXVnMSAtIGRlYzMxXHJcbi8vICAgICBbbW9tZW50KG5ldyBEYXRlKG5vdy55ZWFyKCksIDAsIDEpKSwgbW9tZW50KG5ldyBEYXRlKG5vdy55ZWFyKCksIDYsIDMxKSldOyAvLyBqYW4xIC0ganVseTMxXHJcbi8vIH1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRUZXJtU3RhckVuZERhdGUoZGF0ZTogRGF0ZSwgaXNGaXJzdFRlcm06IGJvb2xlYW4pOiBtb21lbnQuTW9tZW50W10ge1xyXG4gIHZhciBhZGRZZWFyID0gZGF0ZS5nZXRNb250aCgpID49IDc7XHJcbiAgdmFyIHRlcm1ZZWFyID0gbnVsbDtcclxuXHJcbiAgaWYgKGFkZFllYXIpIHtcclxuICAgIHRlcm1ZZWFyID0gaXNGaXJzdFRlcm0gPyBkYXRlLmdldEZ1bGxZZWFyKCkgOiBkYXRlLmdldEZ1bGxZZWFyKCkgKyAxO1xyXG4gIH0gZWxzZSB7XHJcbiAgICB0ZXJtWWVhciA9IGlzRmlyc3RUZXJtID8gZGF0ZS5nZXRGdWxsWWVhcigpIC0gMSA6IGRhdGUuZ2V0RnVsbFllYXIoKTtcclxuICB9XHJcblxyXG4gIHZhciB0ZXJtWWVhck1vbWVudCA9IG1vbWVudCh0ZXJtWWVhci50b1N0cmluZygpLCBcIllZWVlcIik7XHJcblxyXG4gIGlmICh0ZXJtWWVhck1vbWVudC53ZWVrKCkgIT0gMSkge1xyXG4gICAgdGVybVllYXJNb21lbnQgPSB0ZXJtWWVhck1vbWVudC5jbG9uZSgpLmFkZCgxLCAnd2VlaycpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGlzRmlyc3RUZXJtID8gW21vbWVudCh0ZXJtWWVhck1vbWVudC5jbG9uZSgpKS53ZWVrKDMyKS5zdGFydE9mKCd3ZWVrJyksIG1vbWVudCh0ZXJtWWVhck1vbWVudC5jbG9uZSgpKS53ZWVrKDUxKS5lbmRPZignd2VlaycpXSA6XHJcbiAgICBbbW9tZW50KHRlcm1ZZWFyTW9tZW50LmNsb25lKCkpLCBtb21lbnQodGVybVllYXJNb21lbnQuY2xvbmUoKSkud2VlaygyNSkuZW5kT2YoJ3dlZWsnKV07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRTY2hvb2xNb21lbnQobTogbW9tZW50Lk1vbWVudCk6IFNjaG9vbE1vbWVudCB7XHJcbiAgY29uc3QgdGhpc1llYXIgPSBtLnllYXIoKTtcclxuICBjb25zdCBpc0F1dHVtbiA9IG0ubW9udGgoKSA+PSA2OyAvLyBkZXRlcm1pbmUgXHJcbiAgY29uc3QgW2F1dHVtblllYXIsIHNwcmluZ1llYXJdID0gaXNBdXR1bW4gP1xyXG4gICAgW3RoaXNZZWFyLCB0aGlzWWVhciArIDFdIDpcclxuICAgIFt0aGlzWWVhciAtIDEsIHRoaXNZZWFyXTtcclxuICBjb25zdCBhY2FkZW1pY1llYXIgPSAnJyArIGF1dHVtblllYXIgKyAnLycgKyBzcHJpbmdZZWFyO1xyXG4gIGNvbnN0IHRlcm0gPSBpc0F1dHVtbiA/ICdBVCcgOiAnU1QnO1xyXG4gIGNvbnN0IHdlZWsgPSBtLndlZWsoKTtcclxuICByZXR1cm4geyBhY2FkZW1pY1llYXIsIHRlcm0sIHdlZWsgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFkZFllYXIoYVllYXI6IEFjYWRlbWljWWVhciwgbnVtWWVhcnNUb0FkZDogbnVtYmVyKTogQWNhZGVtaWNZZWFyIHtcclxuICByZXR1cm4gYVllYXIuc3BsaXQoJy8nKVxyXG4gICAgLm1hcCh5ZWFyU3RyID0+IHBhcnNlSW50KHllYXJTdHIpICsgbnVtWWVhcnNUb0FkZClcclxuICAgIC5tYXAoeWVhciA9PiAnJyArIHllYXIpXHJcbiAgICAuam9pbignLycpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbmV4dEFjYWRlbWljWWVhcihhWWVhcjogQWNhZGVtaWNZZWFyKTogQWNhZGVtaWNZZWFyIHtcclxuICByZXR1cm4gYWRkWWVhcihhWWVhciwgMSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwcmV2QWNhZGVtaWNZZWFyKGFZZWFyOiBBY2FkZW1pY1llYXIpOiBBY2FkZW1pY1llYXIge1xyXG4gIHJldHVybiBhZGRZZWFyKGFZZWFyLCAtMSk7XHJcbn1cclxuIiwiaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xyXG5pbXBvcnQgeyBTY2hvb2xNb21lbnQsIGdldFNjaG9vbE1vbWVudCwgYWRkWWVhciB9IGZyb20gJy4vc2Nob29sLW1vbWVudCc7XHJcbmltcG9ydCB7IEFjYWRlbWljWWVhciwgVGVybSB9IGZyb20gJy4uL2NvbnRyYWN0cy9rZWQtbW9kZWxzJztcclxuaW1wb3J0IHtJbmplY3RlZEludGx9IGZyb20gJ3JlYWN0LWludGwnO1xyXG5cclxudHlwZSBNb21lbnQgPSBtb21lbnQuTW9tZW50O1xyXG5cclxuZnVuY3Rpb24gaXNTY2hvb2xNb21lbnQob2JqOiBEYXRlIHwgU2Nob29sTW9tZW50KTogb2JqIGlzIFNjaG9vbE1vbWVudCB7XHJcbiAgcmV0dXJuICdhY2FkZW1pY1llYXInIGluIG9iajtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFNjaG9vbFRlcm0ge1xyXG4gIGFjYWRlbWljWWVhcjogQWNhZGVtaWNZZWFyO1xyXG4gIHRlcm06IFRlcm07XHJcblxyXG4gIGNvbnN0cnVjdG9yKGRhdGVPclNjaG9vbE1vbWVudDogRGF0ZSB8IFNjaG9vbE1vbWVudCkge1xyXG4gICAgY29uc3Qgc2Nob29sTW9tZW50ID0gaXNTY2hvb2xNb21lbnQoZGF0ZU9yU2Nob29sTW9tZW50KSA/XHJcbiAgICAgIGRhdGVPclNjaG9vbE1vbWVudCA6IGdldFNjaG9vbE1vbWVudChtb21lbnQoZGF0ZU9yU2Nob29sTW9tZW50KSk7XHJcbiAgICB0aGlzLmFjYWRlbWljWWVhciA9IHNjaG9vbE1vbWVudC5hY2FkZW1pY1llYXI7XHJcbiAgICB0aGlzLnRlcm0gPSBzY2hvb2xNb21lbnQudGVybTtcclxuICB9XHJcblxyXG4gIGdldCB5ZWFyKCkge1xyXG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuYWNhZGVtaWNZZWFyXHJcbiAgICAgICAgLnNwbGl0KCcvJylbdGhpcy50ZXJtID09PSAnQVQnID8gMCA6IDFdKTtcclxuICB9XHJcblxyXG4gIG5leHRUZXJtKCkge1xyXG4gICAgcmV0dXJuIG5ldyBTY2hvb2xUZXJtKHRoaXMudGVybSA9PT0gJ0FUJyA/XHJcbiAgICAgIHtcclxuICAgICAgICB0ZXJtOiAnU1QnLFxyXG4gICAgICAgIGFjYWRlbWljWWVhcjogdGhpcy5hY2FkZW1pY1llYXJcclxuICAgICAgfSA6XHJcbiAgICAgIHtcclxuICAgICAgICB0ZXJtOiAnQVQnLFxyXG4gICAgICAgIGFjYWRlbWljWWVhcjogYWRkWWVhcih0aGlzLmFjYWRlbWljWWVhciwgMSlcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBwcmV2VGVybSgpIHtcclxuICAgIHJldHVybiBuZXcgU2Nob29sVGVybSh0aGlzLnRlcm0gPT09ICdBVCcgP1xyXG4gICAgICB7XHJcbiAgICAgICAgdGVybTogJ1NUJyxcclxuICAgICAgICBhY2FkZW1pY1llYXI6IGFkZFllYXIodGhpcy5hY2FkZW1pY1llYXIsIC0xKVxyXG4gICAgICB9IDpcclxuICAgICAge1xyXG4gICAgICAgIHRlcm06ICdBVCcsXHJcbiAgICAgICAgYWNhZGVtaWNZZWFyOiB0aGlzLmFjYWRlbWljWWVhclxyXG4gICAgICB9KTtcclxuICAgIFxyXG4gIH1cclxuXHJcbiAgdG9Mb2NhbGVTdHJpbmcoaW50bDogSW5qZWN0ZWRJbnRsLCBzaG9ydFllYXI/OiBib29sZWFuKSB7XHJcbiAgICBsZXQgeWVhciA9IHRoaXMudGVybSA9PT0gJ0FUJyA/XHJcbiAgICAgIHRoaXMuYWNhZGVtaWNZZWFyLnNwbGl0KCcvJylbMF06XHJcbiAgICAgIHRoaXMuYWNhZGVtaWNZZWFyLnNwbGl0KCcvJylbMV07XHJcblxyXG4gICAgaWYgKHNob3J0WWVhcilcclxuICAgICAgeWVhciA9IHllYXIuc3Vic3RyKDIpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLnRlcm0gPT09ICdBVCcgPyBpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOid0ZXJtcGxhbm5lci5zZWNvbmRUZXJtJywgZGVmYXVsdE1lc3NhZ2U6J0hUIHt5ZWFyfSd9LCB7eWVhcjogeWVhcn0pIDogXHJcbiAgICBpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOid0ZXJtcGxhbm5lci5maXJzdFRlcm0nLCBkZWZhdWx0TWVzc2FnZTonVlQge3llYXJ9J30sIHt5ZWFyOiB5ZWFyfSk7XHJcbiAgfVxyXG59XHJcbiIsIlxyXG5leHBvcnQgZnVuY3Rpb24gY2FwaXRhbGl6ZUZpcnN0IChzdHIpIHtcclxuICAgIGZvciAobGV0IGk9MCwgbD1zdHIubGVuZ3RoOyBpPGw7ICsraSkge1xyXG4gICAgICAgIGlmIChzdHIuY2hhckNvZGVBdChpKSA8IDB4MjAwMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gc3RyLnN1YnN0cigwLCBpKSArIHN0cltpXS50b0xvY2FsZVVwcGVyQ2FzZSgpICsgc3RyLnN1YnN0cihpICsgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN0cjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZChvYmosIGV4dGVuc2lvbikge1xyXG4gICAgaWYgKHR5cGVvZiBleHRlbnNpb24gIT09ICdvYmplY3QnKSByZXR1cm4gb2JqO1xyXG4gICAgT2JqZWN0LmtleXMoZXh0ZW5zaW9uKS5mb3JFYWNoKGtleSA9PiB7XHJcbiAgICAgICAgb2JqW2tleV0gPSBleHRlbnNpb25ba2V5XTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIG9iajtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNsb25lPFQsRT4gKG9iaiA6IFQsIGV4dGVuc2lvbj86IEUpIHtcclxuICAgIGxldCBjbG9uZSA9IHt9O1xyXG4gICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMob2JqKS5mb3JFYWNoKGtleSA9PiB7XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNsb25lLCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpKTtcclxuICAgIH0pO1xyXG4gICAgaWYgKGV4dGVuc2lvbikgZXh0ZW5kKGNsb25lLCBleHRlbnNpb24pO1xyXG4gICAgcmV0dXJuIGNsb25lIGFzIChUICYgRSk7XHJcbn1cclxuXHJcbmNvbnN0IGNvbmNhdCA9IFtdLmNvbmNhdDtcclxuZXhwb3J0IGZ1bmN0aW9uIGZsYXR0ZW48VD4gKGEgOiAoVCB8IFRbXSlbXSkge1xyXG4gICAgcmV0dXJuIGNvbmNhdC5hcHBseShbXSwgYSkgYXMgVFtdO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY29tcGFyZVByb3A8VD4ocHJvcDprZXlvZiBUKSB7XHJcbiAgICByZXR1cm4gKGE6IFQsYjogVCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGFQcm9wID0gYVtwcm9wXSwgYlByb3AgPSBiW3Byb3BdO1xyXG4gICAgICAgIHJldHVybiBhUHJvcCA+IGJQcm9wID8gMSA6IGFQcm9wIDwgYlByb3AgPyAtMSA6IDA7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjb21wYXJlUHJvcHMoXHJcbiAgICBwcm9wczogc3RyaW5nIHwgc3RyaW5nW10sXHJcbiAgICBsb2NhbGVzPzogc3RyaW5nIHwgc3RyaW5nW10sXHJcbiAgICBvcHRpb25zPzogSW50bC5Db2xsYXRvck9wdGlvbnMpOiAoYTogYW55LCBiOiBhbnkpID0+IG51bWJlclxyXG57XHJcbiAgICBwcm9wcyA9IEFycmF5LmlzQXJyYXkocHJvcHMpID8gcHJvcHMgOiBbcHJvcHNdO1xyXG5cclxuICAgIGNvbnN0IGxvY2FsZUNvbXBhcmUgPSAoYSxiKSA9PlxyXG4gICAgICAgIHR5cGVvZiBhID09PSAnc3RyaW5nJyA/XHJcbiAgICAgICAgICAgIGEubG9jYWxlQ29tcGFyZShiLCBsb2NhbGVzLCBvcHRpb25zKSA6XHJcbiAgICAgICAgICAgIGEgPCBiID8gLTEgOiBhID4gYiA/IDEgOiAwO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNtcFBhcnQgKGEsYixmaXJzdFBhcnQ6IHN0cmluZyxyZXN0OiBzdHJpbmdbXSkge1xyXG4gICAgICAgIGNvbnN0IGZpcnN0QSA9IGFbZmlyc3RQYXJ0XTtcclxuICAgICAgICBjb25zdCBmaXJzdEIgPSBiW2ZpcnN0UGFydF07XHJcbiAgICAgICAgaWYgKGZpcnN0QSA9PT0gZmlyc3RCKSByZXR1cm4gMDtcclxuICAgICAgICBpZiAoZmlyc3RBID09IG51bGwpIHJldHVybiAtMTtcclxuICAgICAgICBpZiAoZmlyc3RCID09IG51bGwpIHJldHVybiAxO1xyXG4gICAgICAgIHJldHVybiByZXN0Lmxlbmd0aCA9PT0gMCA/XHJcbiAgICAgICAgICAgIGxvY2FsZUNvbXBhcmUoZmlyc3RBLCBmaXJzdEIpIDpcclxuICAgICAgICAgICAgY21wUGFydChmaXJzdEEsIGZpcnN0QiwgcmVzdFswXSwgcmVzdC5zbGljZSgxKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHByb3BzXHJcbiAgICAgICAgLm1hcChwcm9wID0+IHByb3Auc3BsaXQoJy4nKSlcclxuICAgICAgICAubWFwKChbZmlyc3RQYXJ0LCAuLi5yZXN0XSkgPT4gKGEsYikgPT4gY21wUGFydChhLGIsIGZpcnN0UGFydCwgcmVzdCkpXHJcbiAgICAgICAgLnJlZHVjZSgoY21wMSwgY21wMikgPT5cclxuICAgICAgICAgICAgKGEsYikgPT4gY21wMShhLGIpIHx8IGNtcDIoYSxiKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBMKHRleHQsIC4uLmFyZ3MpIHtcclxuICAgIGxldCBmaXJzdCA9IHRleHRbMF07XHJcbiAgICByZXR1cm4gYnVpbGRNZXNzYWdlKHRleHQsIGFyZ3MpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBidWlsZE1lc3NhZ2UgKHRleHQsIGFyZ3MpIHtcclxuICAgIGxldCBydiA9IHRleHRbMF07XHJcbiAgICBmb3IgKGxldCBpPTEsIGw9dGV4dC5sZW5ndGg7IGk8bDsgKytpKSB7XHJcbiAgICAgICAgcnYgKz0gYXJnc1tpLTFdICsgdGV4dFtpXTtcclxuICAgIH1cclxuICAgIHJldHVybiBydjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFRDPFQ+IHtcclxuICAgIGNvbnN0cnVjdG9yKHRlbXBsYXRlOiBUKSB7XHJcbiAgICAgICAgZXh0ZW5kKHRoaXMsIHRlbXBsYXRlKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRhdGVUaW1lUmV2aXZlciAoa2V5LCB2YWx1ZSkge1xyXG4gICAgdmFyIGE7XHJcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIGEgPSAvXFwvRGF0ZVxcKChcXGQqKVxcKVxcLy8uZXhlYyh2YWx1ZSk7XHJcbiAgICAgICAgaWYgKGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKCthWzFdKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbn1cclxuXHJcbi8vbGV0IGluZm9TZXJpYWwgPSAxO1xyXG5leHBvcnQgZnVuY3Rpb24gc2hvd0luZm8gKG1zZykge1xyXG4gICAgdmFyIGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdpbmZvJywgeyAnZGV0YWlsJzogbXNnIH0pO1xyXG4gICAgd2luZG93LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2hvd0Vycm9yIChlcnJNc2c6IHN0cmluZyB8IEVycm9yKSB7XHJcbiAgICBjb25zdCBtc2cgPSB0eXBlb2YgZXJyTXNnID09PSAnc3RyaW5nJyA/IGVyck1zZyA6IGVyck1zZy5tZXNzYWdlO1xyXG4gICAgdmFyIGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdjdXN0b21lcnJvcicsIHsgJ2RldGFpbCc6IG1zZyB9KTtcclxuICAgIGNvbnNvbGUuZXJyb3IoZXJyTXNnKTtcclxuICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1heExlbmd0aChzdHI6IHN0cmluZywgbWF4TGVuOiBudW1iZXIpIHtcclxuICAgIHJldHVybiBzdHIubGVuZ3RoID4gbWF4TGVuID9cclxuICAgICAgICBzdHIuc3Vic3RyKDAsIG1heExlbiAtIDMpICsgXCIuLi5cIiA6XHJcbiAgICAgICAgc3RyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYXJyYXlUb0xvb2t1cDxUPihhOiBUW10sIGtleUFjY2Vzc29yOiAoaXRlbTogVCkgPT4gc3RyaW5nIHwgbnVtYmVyKSB7XHJcbiAgICBjb25zdCByZXN1bHQgOiB7W2tleTogc3RyaW5nXSA6IFRbXX0gPSB7fTtcclxuICAgIGZvciAobGV0IGk9MCwgbD1hLmxlbmd0aDsgaTxsOyArK2kpIHtcclxuICAgICAgICBjb25zdCBpdGVtID0gYVtpXTtcclxuICAgICAgICBjb25zdCBrZXkgPSBrZXlBY2Nlc3NvcihpdGVtKTtcclxuICAgICAgICBsZXQgYXJyYXkgPSByZXN1bHRba2V5XTtcclxuICAgICAgICBpZiAoYXJyYXkpIGFycmF5LnB1c2goaXRlbSk7XHJcbiAgICAgICAgZWxzZSByZXN1bHRba2V5XSA9IFtpdGVtXTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhcnJheVRvTWFwPFQ+KGE6IFRbXSwga2V5QWNjZXNzb3I6IChpdGVtOiBUKSA9PiBzdHJpbmcgfCBudW1iZXIpIHtcclxuICAgIGNvbnN0IHJlc3VsdCA6IHtba2V5OiBzdHJpbmddIDogVH0gPSB7fTtcclxuICAgIGZvciAobGV0IGk9MCwgbD1hLmxlbmd0aDsgaTxsOyArK2kpIHtcclxuICAgICAgICBjb25zdCBpdGVtID0gYVtpXTtcclxuICAgICAgICBjb25zdCBrZXkgPSBrZXlBY2Nlc3NvcihpdGVtKTtcclxuICAgICAgICByZXN1bHRba2V5XSA9IGl0ZW07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2hlcnJ5UGlja1Byb3BzPFQ+IChvYmo6IFQsIHByb3BzVG9QaWNrOiBzdHJpbmdbXSk6IFBhcnRpYWw8VD4ge1xyXG4gICAgY29uc3QgcmVzdWx0ID0ge307XHJcbiAgICBmb3IgKGNvbnN0IHBhcmFtIG9mIHByb3BzVG9QaWNrKSB7XHJcbiAgICAgIGlmIChwYXJhbSBpbiBvYmopIHJlc3VsdFtwYXJhbV0gPSBvYmpbcGFyYW1dO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdCBhcyBQYXJ0aWFsPFQ+O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZGlzdGluY3Q8VD4gKGE6IFRbXSwga2V5QWNjZXNzb3I/OiAoaXRlbTogVCkgPT4gYW55KSB7XHJcbiAgICBjb25zdCBtYXAgPSBhcnJheVRvTWFwKGEsIGtleUFjY2Vzc29yIHx8ICh4ID0+IHgpKTtcclxuICAgIHJldHVybiBPYmplY3Qua2V5cyhtYXApLm1hcChrZXkgPT4gbWFwW2tleV0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2hhbGxvd0VxdWFscyhhOiBhbnksIGI6IGFueSkge1xyXG4gICAgaWYgKGEgPT09IGIpIHJldHVybiB0cnVlO1xyXG4gICAgaWYgKCFhIHx8ICFiKSByZXR1cm4gZmFsc2U7XHJcbiAgICBpZiAodHlwZW9mIGEgIT09ICdvYmplY3QnIHx8IHR5cGVvZiBiICE9PSAnb2JqZWN0JykgcmV0dXJuIGZhbHNlO1xyXG4gICAgY29uc3Qga2V5c0EgPSBPYmplY3Qua2V5cyhhKTtcclxuICAgIGNvbnN0IGtleXNCID0gT2JqZWN0LmtleXMoYik7XHJcbiAgICBpZiAoa2V5c0EubGVuZ3RoICE9PSBrZXlzQi5sZW5ndGgpIHJldHVybiBmYWxzZTtcclxuICAgIGZvciAobGV0IGk9MCwgbD1rZXlzQS5sZW5ndGg7IGk8bDsgKytpKSB7XHJcbiAgICAgICAgY29uc3Qga2V5ID0ga2V5c0FbaV07XHJcbiAgICAgICAgaWYgKGtleXNCW2ldICE9PSBrZXkpIHJldHVybiBmYWxzZTtcclxuICAgICAgICBpZiAoYVtrZXldICE9PSBiW2tleV0pIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbiIsImltcG9ydCBtb21lbnQsIHsgTW9tZW50IH0gZnJvbSBcIm1vbWVudFwiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEtFRFdlZWsgKHllYXI6IG51bWJlciwgd2VlazogbnVtYmVyKSB7XHJcbiAgY29uc3QgbSA9IG1vbWVudChuZXcgRGF0ZSh5ZWFyLCAxLCAxKSkud2Vlayh3ZWVrKTtcclxuICBjb25zdCByZXMgPSB7XHJcbiAgICB5ZWFyLFxyXG4gICAgd2VlayxcclxuICAgIG5vdEJlZm9yZTogbS5jbG9uZSgpLnN0YXJ0T2YoJ3dlZWsnKS5hZGQoLTIsICdkYXlzJykudG9EYXRlKCkuZ2V0VGltZSgpLFxyXG4gICAgbm90QWZ0ZXI6IG0uY2xvbmUoKS5zdGFydE9mKCd3ZWVrJykuYWRkKDUsICdkYXlzJykudG9EYXRlKCkuZ2V0VGltZSgpXHJcbiAgfTtcclxuICByZXR1cm4gcmVzO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0TmV4dFdlZWtEYXRlKGRhdGU6IE1vbWVudCk6IHsgYWRqdXN0ZWQ6IGJvb2xlYW4sIG5leHREYXRlOiBEYXRlIH17XHJcbiAgdmFyIG5leHREYXRlID0gbW9tZW50KGRhdGUpLmFkZCgxLCAnd2VlaycpO1xyXG4gIC8vU2V0IHRoZSAwMS4wMSBvZiB0aGUgbmV4dCB5ZWFyIGluIGNhc2UgdGhlIG5leHQgd2VlayBpcyBpbiB0aGUgc2FtZSB5ZWFyIFxyXG4gIC8vYW5kIHRoZSBwcmV2aW91cyB3ZWVrIGlzIHRoZSBsYXN0IHdlZWsgb2YgdGhlIHllYXJcclxuICBpZihkYXRlLndlZWsoKSA9PT0gZGF0ZS53ZWVrc0luWWVhcigpICYmIG5leHREYXRlLnllYXIoKSA9PT0gZGF0ZS55ZWFyKCkpe1xyXG4gICAgcmV0dXJuIHthZGp1c3RlZDogdHJ1ZSwgbmV4dERhdGU6IG1vbWVudChgJHtkYXRlLnllYXIoKSArIDF9LTAxLTAxYCkudG9EYXRlKCl9O1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHthZGp1c3RlZDogZmFsc2UsIG5leHREYXRlOiBuZXh0RGF0ZS50b0RhdGUoKX07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRQcmV2V2Vla0RhdGUoZGF0ZTogTW9tZW50KTogeyBhZGp1c3RlZDogYm9vbGVhbiwgbmV4dERhdGU6IERhdGUgfXtcclxuICB2YXIgcHJldkRhdGUgPSBtb21lbnQoZGF0ZSkuYWRkKC0xLCAnd2VlaycpO1xyXG4gIC8vU2V0IHRoZSAwMS4wMSBvZiB0aGUgY3VycmVudCB5ZWFyIGluIGNhc2UgdGhlIHByZXYgd2VlayBpcyBpbiB0aGUgcHJldmlvdXMgeWVhclxyXG4gIGlmKGRhdGUud2VlaygpID09PSAyICYmIHByZXZEYXRlLnllYXIoKSAhPT0gZGF0ZS55ZWFyKCkpe1xyXG4gICAgcmV0dXJuIHthZGp1c3RlZDogdHJ1ZSwgbmV4dERhdGU6IG1vbWVudChgJHtkYXRlLnllYXIoKX0tMDEtMDFgKS50b0RhdGUoKX07XHJcbiAgfVxyXG5cclxuICByZXR1cm4ge2FkanVzdGVkOiBmYWxzZSwgbmV4dERhdGU6IHByZXZEYXRlLnRvRGF0ZSgpfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEFkanVzdGVkV2VlayhtOiBNb21lbnQpIHtcclxuICBjb25zdCBjbG9uZSA9IG0uY2xvbmUoKTtcclxuICByZXR1cm4gbS53ZWVrZGF5KCkgPj0gNSA/IC8vIEzDtnJkYWcgMDA6MDAgLyBTw7ZuZGFnIDAwOjAwP1xyXG4gICAgICBtLndlZWsoKSArIDEgOiAvLyBUaWxsaMO2ciBuw6RzdGEgdmVja2FcclxuICAgICAgbS53ZWVrKCk7XHJcbn1cclxuXHJcbi8qZXhwb3J0IGZ1bmN0aW9uIGdldFdlZWtMaW1pdHMgKG06IE1vbWVudCkge1xyXG4gIGNvbnN0IGNsb25lZFN3ZWRpc2ggPSBtLmNsb25lKCkubG9jYWxlKCdzdicpO1xyXG4gIGNvbnN0IGxpbWl0cyA9IHtcclxuICAgIG5vdEJlZm9yZTogY2xvbmVkU3dlZGlzaC5zdGFydE9mKCd3ZWVrJykuYWRkKC0yLCAnZGF5cycpLFxyXG4gICAgbm90QWZ0ZXI6IGNsb25lZFN3ZWRpc2guc3RhcnRPZignd2VlaycpLmFkZCg1LCAnZGF5cycpXHJcbiAgfTtcclxufVxyXG4qL1xyXG4iLCIvKiAoaWdub3JlZCkgKi8iLCIvKiAoaWdub3JlZCkgKi8iLCIvKiAoaWdub3JlZCkgKi8iLCJtb2R1bGUuZXhwb3J0cyA9IGpRdWVyeTsiLCJtb2R1bGUuZXhwb3J0cyA9IFJlYWN0OyIsIm1vZHVsZS5leHBvcnRzID0gUmVhY3RET007Il0sInNvdXJjZVJvb3QiOiIifQ==