(window.webpackJsonp_name_=window.webpackJsonp_name_||[]).push([[15],{308:function(e,t,a){"use strict";a.r(t);var n,r,c,l,s,o,i,u,m,d,b,p,k,f,h,E,g,j,v,O,y,I,N,C,R,T,S=a(3),w=a.n(S),L=a(311),B=a(302),V=a(113),F=a(0),A=a(2),_=a(87),x=a(280),U=a(6),M=a(93),z=a(116),K=function(e){function t(t){var a=e.call(this,t)||this;return a.state={courseName:"",courseType:"theme-course",subject:{subjectName:"",subjectCode:""}},a}return Object(F.c)(t,e),t.prototype.createCourse=function(){return Object(F.b)(this,void 0,void 0,(function(){var e,t,a,c,l,s,o,i,u;return Object(F.d)(this,(function(m){switch(m.label){case 0:return e=this.state,t=e.courseType,a=e.courseName,c=e.subject,l=Object(A.i)(),[4,_.b.standardSchool.load()];case 1:return s=m.sent(),o=s.officialBranchId,i=s.id,_.c.branches.addRelated({id:o},"approvedChildren",{id:Object(A.i)(),name:"draft",acl:["role:USER:R","schoolRole:standard/EMPLOYEE:S"],schoolId:i,treeParentId:o,tags:[l]}),u={id:l,acl:["schoolRole:standard/EMPLOYEE:S","role:USER:R"],name:a,tags:"step-course"===t?Object(z.d)([],[c.subjectCode]):[]},_.c.global.addRelated({id:_.d,tags:[]},"courseInstances","step-course"===t?Object(F.a)(Object(F.a)({},u),{type:t,description:Object(U.a)(n||(n=Object(F.e)(["Stegkurs"],["Stegkurs"]))),subject:c}):Object(F.a)(Object(F.a)({},u),{type:t,description:Object(U.a)(r||(r=Object(F.e)(["Temakurs"],["Temakurs"]))),subjects:[]})),this.setState({courseName:""}),[4,_.c.saveNow()];case 2:return m.sent(),this.props.history.push("/admin/courses/"+l+"/settings"),[2]}}))}))},t.prototype.isValidState=function(e){var t=this.state,a=t.courseName,n=t.courseType,r=t.subject,s=a&&"theme-course"===n||r.subjectCode;if(!s&&e){if(!a)return Object(U.a)(c||(c=Object(F.e)(["Kursens namn måste fyllas i"],["Kursens namn måste fyllas i"])));if(!r.subjectCode)return Object(U.a)(l||(l=Object(F.e)(["Ämne måste väljas för stegkurser"],["Ämne måste väljas för stegkurser"])))}return s},t.prototype.render=function(){var e=this,t=this.state,a=t.courseName,n=t.courseType,r=t.subject;return S.createElement("div",null,S.createElement("h2",null,"Skapa ny standardkurs"),S.createElement("hr",null),S.createElement("div",null,"Namn: ",S.createElement("input",{type:"text",value:a,onChange:function(t){return e.setState({courseName:t.target.value})}})),S.createElement("br",null),S.createElement("div",null,S.createElement("input",{type:"radio",name:"course-type",checked:"step-course"===n,onChange:function(t){return t.target.checked&&e.setState({courseType:"step-course"})}})," Stegkurs"),S.createElement("br",null),S.createElement("div",null,S.createElement("input",{type:"radio",name:"course-type",checked:"theme-course"===n,onChange:function(t){return t.target.checked&&e.setState({courseType:"theme-course"})}})," Temakurs"),S.createElement("br",null),"step-course"===n?S.createElement(S.Fragment,null,S.createElement("br",null),S.createElement("form",null,S.createElement("label",{className:"kclabel"},Object(U.a)(s||(s=Object(F.e)(["Ämne"],["Ämne"])))),S.createElement(M.a,null,_.c.subjects.tags("schoolType:primary").toValue().map((function(t){return S.createElement("select",{value:r.subjectCode,onChange:function(a){return e.setState({subject:t.filter((function(e){return e.code===a.target.value})).map((function(e){return{subjectCode:e.code,subjectName:e.name}}))[0]})}},S.createElement("option",{value:""},Object(U.a)(o||(o=Object(F.e)(["Välj ämne"],["Välj ämne"])))),t.map((function(e){return S.createElement("option",{key:e.code,value:e.code},e.name)})))}))))):null,S.createElement("div",null,S.createElement("button",{disabled:!this.isValidState(),className:["btn","btn-large",this.isValidState()?"":"disabled"].join(" "),onClick:function(){return e.isValidState()?e.createCourse():alert(e.isValidState(!0))}},"Skapa")))},t}(S.Component),P=Object(x.a)(K),$=a(109),W=a(301),q=function(e){var t=e.items,a=e.caption;return S.createElement("div",{className:"sv-html-portlet sv-portlet sv-skip-spacer"},S.createElement("div",{className:"ked_boxed"},S.createElement("h3",null,a),S.createElement("div",{className:"taskContainer odd-even"},t.map((function(e){return S.createElement("div",{className:"schoolCourse",key:e.id},S.createElement("div",{className:["align-horizontal",e.$meta&&"entitymeta-"+e.$meta].join(" ")},S.createElement("div",{className:"horizontalItem top pull-right"},e.editLink.startsWith(":")?S.createElement("a",{href:e.editLink.substr(1),className:"editItem"}):S.createElement(W.a,{to:e.editLink,className:"editItem"})),S.createElement("div",{className:"horizontalItem top"},e.viewLink.startsWith(":")?S.createElement("a",{href:e.viewLink.substr(1)},e.name):S.createElement(W.a,{to:e.viewLink},e.name)),e.pills.map((function(e,t){return S.createElement("div",{key:t,className:"horizontalItem top"},S.createElement("div",{className:["pill"].concat(e.className).join(" ")},e.name))}))),S.createElement("div",{className:"horizontalItem top"},S.createElement("p",null,e.description)),S.createElement("div",{className:"horizontalItem top"},S.createElement("p",{className:"small"},e.smallText)))})))))},D=a(98),J=a(1),Y=a(23),H=a(91),G=a(201),Q=Object(D.b)((function(){return Object(G.a)().orderBy("name").map((function(e){var t=e.id,a=e.$meta,n=e.name,r=e.description,c=e.tags,l=e.type,s=e.modifiedBy,o=e.modifiedDate;return{id:t,type:l,$meta:a,name:n,description:r,viewLink:":"+Object(Y.f)(J.b.KED_SUBJECT_PLANNER_URL,{})+"#/standard/courses/"+t,editLink:"/admin/courses/"+t+"/settings",pills:c.filter((function(e){return"active"===e})).map((function(e){return{className:"active",name:Object(U.a)(i||(i=Object(F.e)(["Aktiv"],["Aktiv"])))}})),smallText:s&&o&&Object(U.a)(u||(u=Object(F.e)(["Senast redigerad av "," / ",""],["Senast redigerad av "," / ",""])),s.name,Object(H.h)(o))}})).toValue().map((function(e){var t=e.filter((function(e){return"step-course"===e.type})),a=e.filter((function(e){return"theme-course"===e.type}));return S.createElement(S.Fragment,null,S.createElement(q,{caption:"Stegkurser",items:t}),S.createElement(q,{caption:"Temakurser",items:a}))}))})),X=a(312),Z=a(4),ee=a(101),te=a(120),ae=a(119),ne=a(303),re=a(164),ce=a(20),le=function(e){function t(t){var a=e.call(this,t)||this;return a.state={optionsVisible:!1},a}return Object(F.c)(t,e),t.prototype.render=function(){var e=this,t=this.props,a=t.selected,n=t.onChange,r=t.getOptions,c=this.state,l=c.optionsVisible,s=c.options,o=s&&s.filter((function(e){return!a.some((function(t){return t.key===e.key}))}));return w.a.createElement(w.a.Fragment,null,w.a.createElement("div",{className:"taskContainer"},a.map((function(e){var t=e.key,r=e.name;return w.a.createElement("div",{key:t,className:"align-horizontal"},w.a.createElement("div",{className:"horizontalItem top"},w.a.createElement("i",{className:"fas fa-times hoverable",onClick:function(){return n(a.filter((function(e){return e.key!==t})))}}),r))}))),w.a.createElement("span",{style:{outline:"none"},tabIndex:0,onBlur:function(t){return setTimeout((function(){return e.setState({optionsVisible:!1})}),100)}},w.a.createElement("a",{className:"btn",onClick:function(){return Object(F.b)(e,void 0,void 0,(function(){var e;return Object(F.d)(this,(function(t){switch(t.label){case 0:if(l)return[2,this.setState({optionsVisible:!1})];if(this.setState({optionsVisible:!0}),this.state.options)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,r()];case 2:return e=t.sent(),this.setState({options:e}),[3,4];case 3:return t.sent(),this.setState({options:[{key:null,name:Object(U.a)(m||(m=Object(F.e)(["Ett fel har inträffat"],["Ett fel har inträffat"])))}]}),[3,4];case 4:return[2]}}))}))}},w.a.createElement("i",{className:"fas fa-plus","aria-hidden":!0})," ",Object(U.a)(d||(d=Object(F.e)(["Lägg till"],["Lägg till"])))),l?w.a.createElement(w.a.Fragment,null,w.a.createElement("br",null),o?w.a.createElement("select",{size:1===o.length?2:o.length,defaultValue:"",onChange:function(t){var r=t.target.value;n(a.concat({key:r,name:s.filter((function(e){return e.key===r})).map((function(e){return e.name}))[0]})),e.setState({optionsVisible:!1})}},w.a.createElement("option",{style:{display:"none"},disabled:!0,key:"",value:""}),o.map((function(e){var t=e.key,a=e.name;return w.a.createElement("option",{key:t,value:t},a)}))):w.a.createElement(ce.b,null)):void 0))},t}(w.a.Component),se=a(165),oe=a(105),ie=a(142),ue=a(202),me=a(203),de=a(90),be=a(130),pe=a(115),ke=Object(D.b)((function(e){var t,a=e.repo,n=e.course,r=e.block,c=Object(ue.a)(r.tags),l=c.map((function(e){return"course:"+e}));return Object(me.a)(c).combineLatest((t=a.courseBlocks.hasEdgesFrom([n.id])).tags.apply(t,Object(F.h)(l)).include("abilities","centralContent","knowledgeRequirements").includeIdsOnly()).map((function(e){var t=Object(F.f)(e,2),n=t[0],c=t[1],l=Object(pe.a)(n,c);return 0===n.length?w.a.createElement("p",null,Object(U.a)(b||(b=Object(F.e)(["Blocket är inte kopplad till någon årskurs"],["Blocket är inte kopplad till någon årskurs"])))):w.a.createElement("div",null,n.map((function(e){var t=e.id,c=e.name,s=e.abilities,o=e.centralContent,i=e.knowledgeRequirements;return w.a.createElement("div",{key:t},1===n.length?void 0:w.a.createElement("h1",null,c),w.a.createElement(de.a,{className:"larger",title:w.a.createElement("p",null,Object(U.a)(p||(p=Object(F.e)(["Välj blockets kunskapskrav"],["Välj blockets kunskapskrav"]))))},w.a.createElement("p",null,Object(U.a)(k||(k=Object(F.e)(["Markera de kunskapskrav som blocket ska täcka."],["Markera de kunskapskrav som blocket ska täcka."])))),w.a.createElement(M.a,null,a["knowledge-requirements"].hasEdgesFrom([r.id]).idsOnly().toValue().map((function(e){return w.a.createElement(ie.a,{knowledgeRequirements:i,markedIds:e.map((function(e){return e.id})),idsToMarkNotOk:l,markMode:!0,onMarkChanged:function(t,n){e.filter((function(e){return!i.some((function(t){var a=t.id;return e.id===a}))})).forEach((function(e){a.courseBlocks.removeRelated(r,"knowledgeRequirements",e)}));var c=i.filter((function(e){return e.id===t}))[0];n?a.courseBlocks.addRelated(r,"knowledgeRequirements",c):a.courseBlocks.removeRelated(r,"knowledgeRequirements",c)}})})))),w.a.createElement(M.a,null,a.abilities.hasEdgesFrom([r.id]).idsOnly().toValue().map((function(e){return w.a.createElement(be.a,{options:s,title:Object(U.a)(f||(f=Object(F.e)(["Välj blockets förmågor"],["Välj blockets förmågor"]))),markedIds:e.map((function(e){return e.id})),uncoveredIds:l,markMode:!0,onMarkChanged:function(t,n){e.filter((function(e){return!s.some((function(t){var a=t.id;return e.id===a}))})).forEach((function(e){a.courseBlocks.removeRelated(r,"abilities",e)}));var c=s.filter((function(e){return e.id===t}))[0];n?a.courseBlocks.addRelated(r,"abilities",c):a.courseBlocks.removeRelated(r,"abilities",c)}})}))),w.a.createElement(M.a,null,a["central-content"].hasEdgesFrom([r.id]).idsOnly().toValue().map((function(e){return w.a.createElement(be.a,{options:o,title:Object(U.a)(h||(h=Object(F.e)(["Välj blockets centrala innehåll"],["Välj blockets centrala innehåll"]))),markedIds:e.map((function(e){return e.id})),uncoveredIds:l,markMode:!0,onMarkChanged:function(t,n){e.filter((function(e){return!o.some((function(t){var a=t.id;return e.id===a}))})).forEach((function(e){a.courseBlocks.removeRelated(r,"centralContent",e)}));var c=o.filter((function(e){return e.id===t}))[0];n?a.courseBlocks.addRelated(r,"centralContent",c):a.courseBlocks.removeRelated(r,"centralContent",c)}})}))))})))}))})),fe=function(e){var t=e.repo,a=e.course;return w.a.createElement("div",null,w.a.createElement("label",{className:"kclabel"},Object(U.a)(E||(E=Object(F.e)(["Kursblock"],["Kursblock"])))),a.blocks.sort(Object(U.g)("blockNo")).map((function(e,n){return w.a.createElement(he,{key:e.id,block:e,course:a,repo:t,isLastBlock:n===a.blocks.length-1})})),w.a.createElement("button",{className:"btn",onClick:function(){return function(e,t){var a=t.blocks.sort(Object(U.g)("blockNo")).slice().pop(),n=a?a.blockNo+1:1,r=a?a.stepNumbers[a.stepNumbers.length-1]+1:1,c={id:Object(A.i)(),acl:["schoolRole:standard/EMPLOYEE:S","role:USER:R"],blockNo:n,locked:!0,name:"Block "+n,tags:Object(F.h)([t.id],t.tags.filter((function(e){return e.startsWith("course:")||e.startsWith("sub:")}))),stepNumbers:[r,r+1,r+2,r+3,r+4]};e.courseInstances.addRelated(t,"blocks",c),c.stepNumbers.forEach((function(a){var n={id:Object(A.i)(),type:"step-course-tab",tabClass:"intro-tab",tabTitle:Object(U.a)(R||(R=Object(F.e)(["Introduktion"],["Introduktion"]))),name:Object(U.a)(T||(T=Object(F.e)(["Introduktion"],["Introduktion"]))),locked:!0,acl:["schoolRole:standard/EMPLOYEE:S","role:USER:R"],stepNo:a,order:0,tags:Object(F.h)([t.id,"blockStep:"+c.id+":"+a],t.tags.filter((function(e){return e.startsWith("course:")||e.startsWith("sub:")})))};e.courseBlocks.addRelated(c,"tabs",n)}))}(t,a)}},w.a.createElement("i",{className:"fas fa-plus","aria-hidden":"true"})," ",Object(U.a)(g||(g=Object(F.e)(["Lägg till block"],["Lägg till block"])))),w.a.createElement("br",null))},he=function(e){var t=e.block,a=e.course,n=e.repo,r=e.isLastBlock;return w.a.createElement(w.a.Fragment,null,w.a.createElement("div",{className:"ked_boxed",style:{position:"relative"}},w.a.createElement("h4",null,"Block ",t.blockNo),Object(U.a)(j||(j=Object(F.e)(["Steg"],["Steg"])))," ",w.a.createElement("div",{className:"btn-group"},t.stepNumbers.map((function(e){return w.a.createElement("a",{key:e,className:"btn btn-small step-button"},e)}))),w.a.createElement("form",null,w.a.createElement("label",{className:"kclabel"},Object(U.a)(v||(v=Object(F.e)(["Årskurs"],["Årskurs"])))),w.a.createElement("select",{value:Object(z.e)(t.tags)[0]||"",onChange:function(e){return n.courseBlocks.update(t,{tags:Object(z.c)(t.tags,[e.target.value].filter((function(e){return!!e})))})}},w.a.createElement("option",{value:""},Object(U.a)(O||(O=Object(F.e)(["Välj årskurser"],["Välj årskurser"])))),w.a.createElement("option",{value:"1-3"},Object(U.a)(y||(y=Object(F.e)(["Årskurs 1-3"],["Årskurs 1-3"])))),w.a.createElement("option",{value:"4-6"},Object(U.a)(I||(I=Object(F.e)(["Årskurs 4-6"],["Årskurs 4-6"])))),w.a.createElement("option",{value:"7-9"},Object(U.a)(N||(N=Object(F.e)(["Årskurs 7-9"],["Årskurs 7-9"])))))),w.a.createElement("br",null),Object(z.e)(t.tags).length>0?w.a.createElement(ke,{block:t,course:a,repo:n}):void 0,r?w.a.createElement(oe.a,{title:"Ta bort blocket",style:{display:"inline-block",position:"absolute",top:0,right:0},onClick:function(){return confirm(Object(U.a)(C||(C=Object(F.e)(["Ta bort blocket?"],["Ta bort blocket?"]))))&&n.courseInstances.removeRelated(a,"blocks",t)}}):null),w.a.createElement("hr",null))};var Ee,ge,je,ve,Oe,ye,Ie,Ne,Ce,Re,Te,Se,we,Le,Be,Ve=Object(ne.a)(Object(D.b)((function(e){var t=e.courseId;e.history;return _.a.getOrCreateBranchId(_.b.standardSchool,t).map((function(e){return _.c.branch(e)})).switchMap((function(e){return e.courseInstances.include("blocks").id(t).map((function(a){return S.createElement(S.Fragment,null,S.createElement(ee.a,{autoFocus:!0,label:"Namn",id:"CourseInstance:name",placeholder:"",value:a.name,onChange:function(t){return e.courseInstances.update(a,{name:t})}}),S.createElement(te.a,{label:"Beskrivning",id:"CourseInstance:description",rows:7,placeholder:"",value:a.description,onChange:function(t){e.courseInstances.update(a,{description:t})}}),S.createElement(ae.a,{label:"Typ",id:"CourseInstance:type"},S.createElement("div",{className:"align-horizontal"},S.createElement("div",{className:"horizontalItem top"},S.createElement("input",{disabled:!0,type:"radio",name:"course-type",checked:"step-course"===a.type,id:"CourseInstance:type",onChange:function(t){return t.target.checked&&e.courseInstances.update(a,{type:"step-course"})}})," Stegkurs")),S.createElement("div",{className:"align-horizontal"},S.createElement("div",{className:"horizontalItem"},S.createElement("input",{disabled:!0,type:"radio",name:"course-type",checked:"theme-course"===a.type,id:"CourseInstance:type",onChange:function(t){return t.target.checked&&e.courseInstances.update(a,{type:"theme-course"})}})," Temakurs"))),"step-course"===a.type?S.createElement(S.Fragment,null,S.createElement("br",null),S.createElement(ae.a,{label:Object(U.a)(Ee||(Ee=Object(F.e)(["Ämne"],["Ämne"]))),id:"CourseInstance:subject"},S.createElement("p",{id:"CourseInstance:subject"},a.subject.subjectName))):null,S.createElement("br",null),S.createElement("form",null,S.createElement("label",{className:"kclabel"},Object(U.a)(ge||(ge=Object(F.e)(["Ändringspolicy"],["Ändringspolicy"])))),S.createElement(se.a,{available:[{name:Object(U.a)(je||(je=Object(F.e)(["Tillåt skolor skapa egna flikar"],["Tillåt skolor skapa egna flikar"]))),key:"allowAddTabs"},{name:Object(U.a)(ve||(ve=Object(F.e)(["Tillåt skolor dölja standardflikar"],["Tillåt skolor dölja standardflikar"]))),key:"allowRemoveTabs"},{name:Object(U.a)(Oe||(Oe=Object(F.e)(["Tillåt skolor ändra ordningen mellan standardflikar"],["Tillåt skolor ändra ordningen mellan standardflikar"]))),key:"allowReorderTabs"}],selected:[a.allowAddTabs&&"allowAddTabs",a.allowRemoveTabs&&"allowRemoveTabs",a.allowReorderTabs&&"allowReorderTabs"].filter((function(e){return!!e})),onChange:function(t){return e.courseInstances.update(a,{allowAddTabs:t.includes("allowAddTabs"),allowRemoveTabs:t.includes("allowRemoveTabs"),allowReorderTabs:t.includes("allowReorderTabs")})}})),"step-course"===a.type?S.createElement(S.Fragment,null,Object(z.f)(a.tags).length>0?S.createElement(fe,{repo:e,course:a}):void 0):void 0,"theme-course"===a.type?S.createElement(S.Fragment,null,S.createElement("br",null),S.createElement("form",null,S.createElement("label",{className:"kclabel"},Object(U.a)(ye||(ye=Object(F.e)(["Kopplade ämnen"],["Kopplade ämnen"])))),S.createElement(le,{selected:(a.subjects||[]).map((function(e){return{name:e.name,key:e.code}})),getOptions:function(){return _.c.subjects.tags("schoolType:primary").map((function(e){return{name:e.name,key:e.code}})).toValue().load()},onChange:function(t){return e.courseInstances.update(a,{tags:Object(z.d)(a.tags,t.map((function(e){return e.key}))),subjects:t.map((function(e){return{name:e.name,code:e.key}}))})}})),S.createElement("br",null),S.createElement("form",null,S.createElement("label",{className:"kclabel"},Object(U.a)(Ie||(Ie=Object(F.e)(["Årskurser som ska ingå"],["Årskurser som ska ingå"])))),S.createElement(se.a,{available:[{name:Object(U.a)(Ne||(Ne=Object(F.e)(["Årskurs 1-3"],["Årskurs 1-3"]))),key:"1-3"},{name:Object(U.a)(Ce||(Ce=Object(F.e)(["Årskurs 4-6"],["Årskurs 4-6"]))),key:"4-6"},{name:Object(U.a)(Re||(Re=Object(F.e)(["Årskurs 7-9"],["Årskurs 7-9"]))),key:"7-9"}],selected:Object(z.e)(a.tags),onChange:function(t){return e.courseInstances.update(a,{tags:Object(z.c)(a.tags,t)})}}))):void 0,S.createElement("br",null),a.tags.includes("active")?S.createElement("div",{className:"btn btn-large pull-right",onClick:function(){var t=Object(z.b)(a.tags,!1);e.courseInstances.update(a,{tags:t})}},"Inaktivera"):S.createElement("div",{className:"btn btn-large pull-right",onClick:function(){var t=Object(z.b)(a.tags,!0);e.courseInstances.update(a,{tags:t})}},"Aktivera"),S.createElement(W.a,{className:"btn btn-warning btn-large pull-right",to:"/admin/courses/"+t+"/confirm-delete"},Object(U.a)(Te||(Te=Object(F.e)(["Radera ..."],["Radera ..."])))),S.createElement("div",{className:"btn btn-large btn-warning",onClick:function(){return Object(F.b)(void 0,void 0,void 0,(function(){return Object(F.d)(this,(function(n){switch(n.label){case 0:return[4,Object(re.b)({school:"standard",draftRepo:e,course:a})];case 1:return n.sent(),[4,_.c.saveNow()];case 2:return n.sent(),location.href=Object(Y.f)(J.b.KED_SUBJECT_PLANNER_URL+"#/standard/courses/"+t,{}),[2]}}))}))}},"Publicera"))}))}))}))),Fe=Object(x.a)(Object(D.b)((function(e){var t=e.courseId,a=e.history;return _.c.courseInstances.ids([t]).toValue().combineLatest(_.c.branches.tags(t).idsOnly().map((function(e){return e.id}))).combineLatest(_.c.courseBlocks.tags(t).idsOnly().map((function(e){return e.id}))).combineLatest(_.c.courseContents.tags(t).idsOnly().map((function(e){return e.id}))).combineLatest(_.c.courseTabs.tags(t).idsOnly().map((function(e){return e.id}))).combineLatest(_.c.tasks.tags(t).idsOnly().map((function(e){return e.id}))).map((function(e){var t=Object(F.f)(e,2),a=t[0],n=t[1];return{courses:a[0][0][0][0],branchIds:a[0][0][0][1],courseBlockIds:a[0][0][1],courseContentIds:a[0][1],courseTabIds:a[1],taskIds:n}})).map((function(e){var t=e.courses,n=e.branchIds,r=e.courseBlockIds,c=e.courseContentIds,l=e.courseTabIds,s=e.taskIds;if(0===t.length)return S.createElement("div",null,S.createElement("p",null,"Kursen är nu borttagen"),S.createElement(W.a,{className:"btn btn-large",to:"/admin"},"Till adminverktygets startsida"));var o=t[0];return S.createElement("div",{className:["entitymeta-"+o.$meta].join(" ")},S.createElement("h2",null,"Bekräfta borttagning av standardkursen ",o.name," "),S.createElement("p",null,"Följande relaterade objekt kommer också att tas bort"),S.createElement("p",null,"Temporära utkast: ",n.length," st"),S.createElement("p",null,"Kursblock: ",r.length," st"),S.createElement("p",null,"Innehållsrutor (totalt inklusive skolors egna varianter): ",c.length," st"),S.createElement("p",null,"Flikar (totalt inklusive skolors egna varianter): ",l.length," st"),S.createElement("p",null,"Uppgifter (totalt inklusive skolors egna varianter): ",s.length," st"),S.createElement("a",{className:"btn btn-large",onClick:function(){return a.go(-1)}},"Avbryt"),S.createElement("div",{className:"btn btn-warning btn-large pull-right",onClick:function(){var e,t,a,i,u;(e=_.c.branches).delete.apply(e,Object(F.h)(n)),(t=_.c.courseBlocks).delete.apply(t,Object(F.h)(r)),(a=_.c.courseContents).delete.apply(a,Object(F.h)(c)),(i=_.c.courseTabs).delete.apply(i,Object(F.h)(l)),(u=_.c.tasks).delete.apply(u,Object(F.h)(s)),_.c.courseInstances.delete(o.id)}},"Bekräfta borttagning av kurs"))}))}),{spinner:S.createElement("p",null,"Hämtar relaterade objekt... ",S.createElement(ce.b,null))})),Ae=a(208),_e=a(189),xe=a(210),Ue=a(158),Me=function(){var e=Z.a.currentUser,t=e.roles;e.school;return t.includes("ADMIN")||Object(Y.e)(Z.a.currentUser,"standard")?w.a.createElement(X.a,{to:"/admin"}):(location.href=Object(Y.f)(J.b.KED_SUBJECT_PLANNER_URL,{}),w.a.createElement("div",null))},ze={$:["/admin",w.a.createElement(w.a.Fragment,null,"Start")],schools:["/schools",w.a.createElement(w.a.Fragment,null,"Skolor")],import:["/admin/import",w.a.createElement(w.a.Fragment,null,"Import")]},Ke=[{path:"/",exact:!0,content:function(){return w.a.createElement(Me,null)}},{path:"/admin",exact:!0,tabId:"$",title:"Ämnesplaneraren Admin",content:function(){return w.a.createElement(X.a,{to:"/admin/courses/create"})}},{path:"/admin/courses/create",exact:!0,tabId:"$",title:"Skapa standardkurs",content:function(){return w.a.createElement($.a,{left:w.a.createElement(P,null),right:w.a.createElement(Q,null),rightWidth:5})}},{path:"/admin/courses/:courseId/settings",exact:!0,tabId:"$",title:"Ämnesplaneraren Admin",content:function(e){var t=e.match;return w.a.createElement($.a,{left:w.a.createElement(Ve,{courseId:t.params.courseId}),right:w.a.createElement(Q,null),rightWidth:5})}},{path:"/admin/courses/:courseId/confirm-delete",exact:!0,tabId:"$",title:"Bekräfta radering av standardkurs",content:function(e){var t=e.match;return w.a.createElement($.a,{left:w.a.createElement(Fe,{courseId:t.params.courseId}),right:w.a.createElement(Q,null),rightWidth:5})}},{path:"/admin/import",exact:!0,tabId:"import",title:"Import från Skolverket",content:function(){return w.a.createElement(Ae.a,{linkPrefix:"/admin/import/"})}},{path:"/admin/import/:subjectId",exact:!1,tabId:"import",title:"Import från skolverket",content:function(e){var t=e.match;return w.a.createElement(_e.a,{id:t.params.subjectId})}},{path:"/schools",exact:!0,tabId:"schools",title:Object(U.a)(Se||(Se=Object(F.e)(["Skolor"],["Skolor"]))),content:function(){return w.a.createElement(xe.b,{viewCourseUrl:J.b.KED_SUBJECT_PLANNER_URL})}},{path:"/schools/:schoolId/edit",tabId:"schools",title:"Skolor",content:function(e){var t=e.match;return w.a.createElement(Ue.b,{title:Object(U.a)(we||(we=Object(F.e)(["Redigera skola"],["Redigera skola"]))),id:t.params.schoolId})}},{path:"/schools/new/gymnasium",tabId:"schools",title:"Skolor",content:function(e){e.match;return w.a.createElement(Ue.b,{title:Object(U.a)(Le||(Le=Object(F.e)(["Lägg till skola"],["Lägg till skola"]))),type:"gymnasium"})}},{path:"/schools/new/primary",tabId:"schools",title:"Skolor",content:function(e){e.match;return w.a.createElement(Ue.b,{title:Object(U.a)(Be||(Be=Object(F.e)(["Lägg till skola"],["Lägg till skola"]))),type:"primary"})}}],Pe=Object.keys(ze).map((function(e){return{key:e,name:ze[e][1],link:ze[e][0]}})),$e=a(131);a.d(t,"SubjectPlannerAdminApp",(function(){return We}));var We=function(){return S.createElement(L.a,null,S.createElement(S.Fragment,null,Ke.map((function(e,t){var a=e.exact,n=e.path,r=e.tabId,c=e.title,l=e.content;return S.createElement(B.a,{key:t,path:n,exact:a,component:function(e){return S.createElement(S.Fragment,null,S.createElement($e.a,{activeTab:r||"$",tabs:Pe,title:c||"",backgroundImage:"https://ks.kunskapsporten.se/images/18.6323bc4d15f4831f9c82dedf/theme.jpg"}),l(e))}})})),S.createElement(V.a,null)))}}}]);
//# sourceMappingURL=SubjectPlannerAdmin.min.js.map