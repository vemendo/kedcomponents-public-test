var testpage =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// install a JSONP callback for chunk loading
/******/ 	function webpackJsonpCallback(data) {
/******/ 		var chunkIds = data[0];
/******/ 		var moreModules = data[1];
/******/ 		var executeModules = data[2];
/******/
/******/ 		// add "moreModules" to the modules object,
/******/ 		// then flag all "chunkIds" as loaded and fire callback
/******/ 		var moduleId, chunkId, i = 0, resolves = [];
/******/ 		for(;i < chunkIds.length; i++) {
/******/ 			chunkId = chunkIds[i];
/******/ 			if(installedChunks[chunkId]) {
/******/ 				resolves.push(installedChunks[chunkId][0]);
/******/ 			}
/******/ 			installedChunks[chunkId] = 0;
/******/ 		}
/******/ 		for(moduleId in moreModules) {
/******/ 			if(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {
/******/ 				modules[moduleId] = moreModules[moduleId];
/******/ 			}
/******/ 		}
/******/ 		if(parentJsonpFunction) parentJsonpFunction(data);
/******/
/******/ 		while(resolves.length) {
/******/ 			resolves.shift()();
/******/ 		}
/******/
/******/ 		// add entry modules from loaded chunk to deferred list
/******/ 		deferredModules.push.apply(deferredModules, executeModules || []);
/******/
/******/ 		// run deferred modules when all chunks ready
/******/ 		return checkDeferredModules();
/******/ 	};
/******/ 	function checkDeferredModules() {
/******/ 		var result;
/******/ 		for(var i = 0; i < deferredModules.length; i++) {
/******/ 			var deferredModule = deferredModules[i];
/******/ 			var fulfilled = true;
/******/ 			for(var j = 1; j < deferredModule.length; j++) {
/******/ 				var depId = deferredModule[j];
/******/ 				if(installedChunks[depId] !== 0) fulfilled = false;
/******/ 			}
/******/ 			if(fulfilled) {
/******/ 				deferredModules.splice(i--, 1);
/******/ 				result = __webpack_require__(__webpack_require__.s = deferredModule[0]);
/******/ 			}
/******/ 		}
/******/ 		return result;
/******/ 	}
/******/
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// object to store loaded and loading chunks
/******/ 	// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 	// Promise = chunk loading, 0 = chunk loaded
/******/ 	var installedChunks = {
/******/ 		"testpage": 0
/******/ 	};
/******/
/******/ 	var deferredModules = [];
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	var jsonpArray = window["webpackJsonp_name_"] = window["webpackJsonp_name_"] || [];
/******/ 	var oldJsonpFunction = jsonpArray.push.bind(jsonpArray);
/******/ 	jsonpArray.push = webpackJsonpCallback;
/******/ 	jsonpArray = jsonpArray.slice();
/******/ 	for(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);
/******/ 	var parentJsonpFunction = oldJsonpFunction;
/******/
/******/
/******/ 	// add entry module to deferred list
/******/ 	deferredModules.push(["./src/test/testpage.tsx","vendors"]);
/******/ 	// run deferred modules when ready
/******/ 	return checkDeferredModules();
/******/ })
/************************************************************************/
/******/ ({

/***/ "./kedbackend/client.js":
/*!******************************!*\
  !*** ./kedbackend/client.js ***!
  \******************************/
/*! exports provided: KedBearerProvider, RestClient, HttpError, KedBackendClient, BatchRunner, createUUID, avoidSimultanousCalls, getGlobalId, computePredestinatedId, updateArray, DocumentAccess, hasAccess */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./js/dist/js/ked-backend-client */ "./kedbackend/js/dist/js/ked-backend-client/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBearerProvider", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["KedBearerProvider"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RestClient", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["RestClient"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "HttpError", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["HttpError"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendClient", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["KedBackendClient"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BatchRunner", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["BatchRunner"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createUUID", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["createUUID"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "avoidSimultanousCalls", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["avoidSimultanousCalls"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getGlobalId", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["getGlobalId"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "computePredestinatedId", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["computePredestinatedId"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "updateArray", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["updateArray"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DocumentAccess", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["DocumentAccess"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "hasAccess", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["hasAccess"]; });



/***/ }),

/***/ "./kedbackend/clientweb.js":
/*!*********************************!*\
  !*** ./kedbackend/clientweb.js ***!
  \*********************************/
/*! exports provided: storage, WebServerBearerProvider, isomorphic, KedBackendClientWeb */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _js_dist_js_ked_backend_client_web__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./js/dist/js/ked-backend-client-web */ "./kedbackend/js/dist/js/ked-backend-client-web/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "storage", function() { return _js_dist_js_ked_backend_client_web__WEBPACK_IMPORTED_MODULE_0__["storage"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "WebServerBearerProvider", function() { return _js_dist_js_ked_backend_client_web__WEBPACK_IMPORTED_MODULE_0__["WebServerBearerProvider"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "isomorphic", function() { return _js_dist_js_ked_backend_client_web__WEBPACK_IMPORTED_MODULE_0__["isomorphic"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendClientWeb", function() { return _js_dist_js_ked_backend_client_web__WEBPACK_IMPORTED_MODULE_0__["KedBackendClientWeb"]; });



/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client-web/bearer-storage-sessionstorage.js":
/*!***************************************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client-web/bearer-storage-sessionstorage.js ***!
  \***************************************************************************************/
/*! exports provided: BearerStorageSessionStorage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BearerStorageSessionStorage", function() { return BearerStorageSessionStorage; });
var BearerStorageSessionStorage = /** @class */ (function () {
    function BearerStorageSessionStorage() {
    }
    BearerStorageSessionStorage.prototype.save = function (id, tokenInfo) {
        sessionStorage.setItem("bearer-" + id, JSON.stringify(tokenInfo));
    };
    BearerStorageSessionStorage.prototype.load = function (id) {
        try {
            var json = sessionStorage.getItem("bearer-" + id);
            return Promise.resolve(json ? JSON.parse(json) : { token: null, expires: 0 });
        }
        catch (ex) {
            return Promise.resolve({ token: null, expires: 0 });
        }
    };
    return BearerStorageSessionStorage;
}());

//# sourceMappingURL=bearer-storage-sessionstorage.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client-web/hash-restorer.js":
/*!***********************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client-web/hash-restorer.js ***!
  \***********************************************************************/
/*! exports provided: rememberHashLocation */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rememberHashLocation", function() { return rememberHashLocation; });
var redirHash = sessionStorage.getItem("redir-hash");
if (redirHash)
    try {
        var _a = JSON.parse(redirHash), time = _a.time, hash = _a.hash;
        if (time && time > Date.now() - 60000) {
            sessionStorage.removeItem("redir-hash");
            location.hash = hash;
        }
    }
    catch (_) { }
function rememberHashLocation() {
    sessionStorage.setItem("redir-hash", JSON.stringify({ time: Date.now(), hash: location.hash }));
}
//# sourceMappingURL=hash-restorer.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client-web/index.js":
/*!***************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client-web/index.js ***!
  \***************************************************************/
/*! exports provided: storage, WebServerBearerProvider, isomorphic, KedBackendClientWeb */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "storage", function() { return storage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WebServerBearerProvider", function() { return WebServerBearerProvider; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isomorphic", function() { return isomorphic; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedBackendClientWeb", function() { return KedBackendClientWeb; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _ked_backend_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ked-backend-client */ "./kedbackend/js/dist/js/ked-backend-client/index.js");
/* harmony import */ var _bearer_storage_sessionstorage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./bearer-storage-sessionstorage */ "./kedbackend/js/dist/js/ked-backend-client-web/bearer-storage-sessionstorage.js");
/* harmony import */ var _ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../ked-backend-client/utils */ "./kedbackend/js/dist/js/ked-backend-client/utils.js");
/* harmony import */ var _ked_model_migrator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../ked-model-migrator */ "./kedbackend/js/dist/js/ked-model-migrator/index.js");
/* harmony import */ var _hash_restorer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./hash-restorer */ "./kedbackend/js/dist/js/ked-backend-client-web/hash-restorer.js");







Object(_ked_model_migrator__WEBPACK_IMPORTED_MODULE_4__["KedModelMigratorMixin"])(_ked_backend_client__WEBPACK_IMPORTED_MODULE_1__["KedBackendClient"].prototype);
var storage = new _bearer_storage_sessionstorage__WEBPACK_IMPORTED_MODULE_2__["BearerStorageSessionStorage"]();
var timeOfPageLoad = Date.now();
var WebServerBearerProvider = /** @class */ (function () {
    function WebServerBearerProvider(tokenPath, tokenResponseMapper, tokenId) {
        this.tokenPath = tokenPath;
        this.tokenResponseMapper = tokenResponseMapper;
        this.tokenId = tokenId;
        this.tokenInfo = { token: null, expires: 0 };
        this.getBearer = Object(_ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_3__["avoidSimultanousCalls"])(this.getBearer.bind(this));
        this.refreshBearer = Object(_ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_3__["avoidSimultanousCalls"])(this.refreshBearer.bind(this));
    }
    WebServerBearerProvider.prototype.getBearer = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (!!this.tokenInfo.token) return [3 /*break*/, 2];
                        if (!this.tokenId) return [3 /*break*/, 2];
                        _a = this;
                        return [4 /*yield*/, storage.load(this.tokenId)];
                    case 1:
                        _a.tokenInfo = _b.sent();
                        _b.label = 2;
                    case 2:
                        if (!(this.tokenInfo.expires < Date.now())) return [3 /*break*/, 4];
                        return [4 /*yield*/, this.refreshBearer()];
                    case 3:
                        _b.sent();
                        _b.label = 4;
                    case 4: return [2 /*return*/, this.tokenInfo];
                }
            });
        });
    };
    WebServerBearerProvider.prototype.refreshBearer = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, _c, _d;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_e) {
                switch (_e.label) {
                    case 0: return [4 /*yield*/, fetch(this.tokenPath, {
                            headers: { Accept: "text/plain; application/json" },
                            redirect: 'manual',
                            cache: 'no-cache',
                            credentials: "same-origin"
                        })];
                    case 1:
                        res = _e.sent();
                        if (res.status === 302 || (!res.status && res.type === "opaqueredirect")) {
                            // User session timed out and server wants to redirect entire page to login page
                            // Time to reload current page to force a redirect of the entire page instead for
                            // just redirecting to /api/token or whatever.
                            if (Date.now() - timeOfPageLoad > 60000) { // prohibit endless loop of reloading self.
                                this.wantsRedirect = true; // So that listeners to onbeforeunload could show alternate message.
                                console.log("Redirect wanted. Reload page.");
                                Object(_hash_restorer__WEBPACK_IMPORTED_MODULE_5__["rememberHashLocation"])();
                                window.location.reload(true);
                                throw new _ked_backend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"](302, "Redirected");
                            }
                        }
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = Error.bind;
                        _b = "HTTP" + res.status + " ";
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(Error, [void 0, _b + (_e.sent())]))();
                    case 3:
                        _c = this;
                        _d = this.tokenResponseMapper;
                        return [4 /*yield*/, res.text()];
                    case 4:
                        _c.tokenInfo = _d.apply(this, [_e.sent()]);
                        storage.save(this.tokenId, this.tokenInfo);
                        return [2 /*return*/, this.tokenInfo];
                }
            });
        });
    };
    return WebServerBearerProvider;
}());

var isomorphic = { fetch: fetch.bind(self), btoa: btoa.bind(self) };
var KedBackendClientWeb = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](KedBackendClientWeb, _super);
    function KedBackendClientWeb(apiBaseUrl, providerOrTokenPath, options) {
        var _this = this;
        var bearerProvider = typeof providerOrTokenPath !== 'string' ?
            providerOrTokenPath :
            new WebServerBearerProvider(providerOrTokenPath, (options && options.tokenResponseMapper) || (function (x) { return ({ token: x, expires: Date.now() + 59 * 60 * 60 }); }), options && options.tokenId);
        _this = _super.call(this, isomorphic, bearerProvider, apiBaseUrl) || this;
        return _this;
    }
    return KedBackendClientWeb;
}(_ked_backend_client__WEBPACK_IMPORTED_MODULE_1__["KedBackendClient"]));

//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client/access-control.js":
/*!********************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client/access-control.js ***!
  \********************************************************************/
/*! exports provided: DocumentAccess, hasAccess */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DocumentAccess", function() { return DocumentAccess; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasAccess", function() { return hasAccess; });
var DocumentAccess = /** @class */ (function () {
    function DocumentAccess(accessClaimType, accessClaimValue, right) {
        this.accessClaimType = accessClaimType;
        this.accessClaimValue = accessClaimValue;
        this.right = right;
    }
    DocumentAccess.fromString = function (ac) {
        if (!ac)
            return null;
        var split = ac.split(':');
        if (split.length < 3)
            throw new Error("Invalid access string: " + ac);
        var claimType = DocumentAccess.unescape(split[0]);
        var claimValue = DocumentAccess.unescape(split[1]);
        var right = split[2];
        if (right !== 'R' && right !== 'W' && right !== 'S')
            throw new Error("Invalid access string: " + ac);
        return new DocumentAccess(claimType, claimValue, right);
    };
    DocumentAccess.escape = function (accessComponent) {
        return accessComponent.replace(/\%/g, "%25").replace(/\:/g, "%3A");
    };
    DocumentAccess.unescape = function (accessComponent) {
        return accessComponent.replace(/\%3A/g, ":").replace(/\%25/g, "%");
    };
    DocumentAccess.prototype.toString = function () {
        return DocumentAccess.escape(this.accessClaimType) + ":" +
            DocumentAccess.escape(this.accessClaimValue) + ":" +
            this.right;
    };
    DocumentAccess.fromStringArray = function (acl) {
        return acl
            .map(function (ac) { return DocumentAccess.fromString(ac); })
            .filter(function (ac) { return ac; });
    };
    DocumentAccess.toStringArray = function (acl) {
        return acl.map(function (ac) { return ac.toString(); });
    };
    return DocumentAccess;
}());

function hasAccess(acl, userClaims, requestedRight) {
    if (userClaims.some(function (claim) { return claim.type === 'role' && claim.value === "ADMIN"; }))
        return true;
    return acl.some(function (a) {
        return userClaims.some(function (c) {
            return a.accessClaimType === c.type &&
                a.accessClaimValue === c.value && ((a.right === 'R' && requestedRight === 'R') ||
                (a.right === 'W' && ['R', 'W'].indexOf(requestedRight) >= 0) ||
                (a.right === 'S'));
        });
    });
}
//# sourceMappingURL=access-control.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client/http-error.js":
/*!****************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client/http-error.js ***!
  \****************************************************************/
/*! exports provided: HttpError */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HttpError", function() { return HttpError; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");

var HttpError = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](HttpError, _super);
    function HttpError(code, message) {
        var _this = _super.call(this, "HTTP" + code + " " + message) || this;
        _this.code = code;
        _this.message = message;
        _this.name = "http" + code;
        _this.message = "HTTP" + code + " " + message;
        return _this;
    }
    return HttpError;
}(Error));

//# sourceMappingURL=http-error.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client/index.js":
/*!***********************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client/index.js ***!
  \***********************************************************/
/*! exports provided: KedBearerProvider, RestClient, HttpError, KedBackendClient, BatchRunner, createUUID, avoidSimultanousCalls, getGlobalId, computePredestinatedId, updateArray, DocumentAccess, hasAccess */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedBackendClient", function() { return KedBackendClient; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BatchRunner", function() { return BatchRunner; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _restclient__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./restclient */ "./kedbackend/js/dist/js/ked-backend-client/restclient.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RestClient", function() { return _restclient__WEBPACK_IMPORTED_MODULE_1__["RestClient"]; });

/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ "./kedbackend/js/dist/js/ked-backend-client/utils.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createUUID", function() { return _utils__WEBPACK_IMPORTED_MODULE_2__["createUUID"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "avoidSimultanousCalls", function() { return _utils__WEBPACK_IMPORTED_MODULE_2__["avoidSimultanousCalls"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getGlobalId", function() { return _utils__WEBPACK_IMPORTED_MODULE_2__["getGlobalId"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "computePredestinatedId", function() { return _utils__WEBPACK_IMPORTED_MODULE_2__["computePredestinatedId"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "updateArray", function() { return _utils__WEBPACK_IMPORTED_MODULE_2__["updateArray"]; });

/* harmony import */ var _ked_bearer_provider__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ked-bearer-provider */ "./kedbackend/js/dist/js/ked-backend-client/ked-bearer-provider.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBearerProvider", function() { return _ked_bearer_provider__WEBPACK_IMPORTED_MODULE_3__["KedBearerProvider"]; });

/* harmony import */ var _access_control__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./access-control */ "./kedbackend/js/dist/js/ked-backend-client/access-control.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DocumentAccess", function() { return _access_control__WEBPACK_IMPORTED_MODULE_4__["DocumentAccess"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "hasAccess", function() { return _access_control__WEBPACK_IMPORTED_MODULE_4__["hasAccess"]; });

/* harmony import */ var _http_error__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./http-error */ "./kedbackend/js/dist/js/ked-backend-client/http-error.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "HttpError", function() { return _http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"]; });

/* empty/unused harmony star reexport */








;
// | 'otherFlag' | 'thirdFlag';...
var KedBackendClient = /** @class */ (function () {
    function KedBackendClient(isomorphic, bearerProvider, baseUrl) {
        this.http = new _restclient__WEBPACK_IMPORTED_MODULE_1__["RestClient"](isomorphic, baseUrl, { bearerProvider: bearerProvider });
    }
    KedBackendClient.prototype.getMyClaims = function (table, fetchOptions) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("me/claims/" + (table || ""), null, fetchOptions)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = _http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(_http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4: return [2 /*return*/, _c.sent()];
                }
            });
        });
    };
    KedBackendClient.prototype.get = function (table, id, options, fetchOptions) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get(table + "/" + id, options, fetchOptions)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = _http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(_http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4: return [2 /*return*/, _c.sent()];
                }
            });
        });
    };
    KedBackendClient.prototype.list = function (table, options, fetchOptions) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var query, res, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        query = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, options);
                        if (location.search.includes('useSP')) {
                            query.flags = (query.flags || []).concat(['useSP']);
                        }
                        if (options && options.mutationsOnEmpty)
                            query.mutationsOnEmpty = JSON.stringify(options.mutationsOnEmpty);
                        return [4 /*yield*/, this.http.get("" + table, query, fetchOptions)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = _http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(_http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4: return [2 /*return*/, _c.sent()];
                }
            });
        });
    };
    KedBackendClient.prototype.batch = function (reqs, fetchOptions) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        // Reorder operations so that 'add's come first and 'delete's come last:
                        reqs = reqs.slice().sort(function (req1, req2) {
                            return req1.op === 'add' ? -1 : req2.op === 'add' ? 1 :
                                req1.op === 'delete' ? 1 : req2.op === 'delete' ? -1 : 0;
                        });
                        return [4 /*yield*/, this.http.post("batch", reqs, fetchOptions)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = _http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(_http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4: return [2 /*return*/, _c.sent()];
                }
            });
        });
    };
    KedBackendClient.prototype.do = function (scopeFn) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var runner;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        runner = new BatchRunner();
                        scopeFn(runner);
                        return [4 /*yield*/, this.batch(runner.mutationRequests)];
                    case 1: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    KedBackendClient.prototype.deleteRealm = function (realm) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.delete("realms/" + realm)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = _http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(_http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4: return [2 /*return*/, _c.sent()];
                }
            });
        });
    };
    KedBackendClient.prototype.add = function (table, doc, branchId) {
        return this.do(function (r) { return r.add(table, doc); });
    };
    KedBackendClient.prototype.put = function (table, doc) {
        return this.do(function (r) { return r.put(table, doc); });
    };
    KedBackendClient.prototype.update = function (table, id, deltaDoc, branchId) {
        return this.do(function (r) { return r.update(table, id, deltaDoc, branchId); });
    };
    KedBackendClient.prototype.merge = function (branchId, targetBranchId) {
        return this.do(function (r) { return r.merge(branchId, targetBranchId); });
    };
    KedBackendClient.prototype.clearBranch = function (branchId) {
        return this.do(function (r) { return r.clearBranch(branchId); });
    };
    KedBackendClient.prototype.delete = function (table, id) {
        return this.do(function (r) { return r.delete(table, id); });
    };
    KedBackendClient.prototype.share = function (table, id, acl) {
        return this.do(function (r) { return r.share(table, id, acl); });
    };
    KedBackendClient.prototype.unshare = function (table, id, acl) {
        return this.do(function (r) { return r.unshare(table, id, acl); });
    };
    KedBackendClient.prototype.link = function (sourceTable, sourceId, targetTable, targetId, label) {
        return this.do(function (r) { return r.link(sourceTable, sourceId, targetTable, targetId, label); });
    };
    KedBackendClient.prototype.link2 = function (sourceTable, sourceId, targetId, label, branchId) {
        return this.do(function (r) { return r.link2(sourceTable, sourceId, label, targetId, branchId); });
    };
    KedBackendClient.prototype.unlink = function (sourceTable, sourceId, targetTable, targetId, label) {
        return this.do(function (r) { return r.unlink(sourceTable, sourceId, targetTable, targetId, label); });
    };
    KedBackendClient.prototype.unlink2 = function (sourceTable, sourceId, targetId, label, branchId) {
        return this.do(function (r) { return r.unlink2(sourceTable, sourceId, label, targetId, branchId); });
    };
    KedBackendClient.prototype.undoLink = function (sourceTable, sourceId, targetId, label, branchId) {
        return this.do(function (r) { return r.undoLink(sourceTable, sourceId, label, targetId, branchId); });
    };
    return KedBackendClient;
}());

var BatchRunner = /** @class */ (function () {
    function BatchRunner() {
        this.mutationRequests = [];
    }
    BatchRunner.prototype.add = function (table, doc, branchId) {
        this.mutationRequests.push({ op: 'add', table: table, doc: doc, branchId: branchId });
        return this;
    };
    BatchRunner.prototype.put = function (table, doc) {
        doc = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, doc);
        delete doc.acl; // Forbidden to send acl with put() calls.
        this.mutationRequests.push({ op: 'put', table: table, doc: doc });
        return this;
    };
    BatchRunner.prototype.update = function (table, id, deltaDoc, branchId) {
        deltaDoc = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, deltaDoc);
        this.mutationRequests.push({ op: 'update', table: table, id: id, deltaDoc: deltaDoc, branchId: branchId });
    };
    BatchRunner.prototype.merge = function (branchId, targetBranchId) {
        this.mutationRequests.push({ op: 'merge', branchId: branchId, targetBranchId: targetBranchId });
    };
    BatchRunner.prototype.clearBranch = function (branchId) {
        this.mutationRequests.push({ op: 'clear-branch', branchId: branchId });
    };
    BatchRunner.prototype.delete = function (table, id) {
        this.mutationRequests.push({ op: 'delete', table: table, id: id });
        return this;
    };
    BatchRunner.prototype.share = function (table, id, acl) {
        this.mutationRequests.push({ op: 'share', table: table, id: id, acl: acl });
        return this;
    };
    BatchRunner.prototype.unshare = function (table, id, acl) {
        this.mutationRequests.push({ op: 'unshare', table: table, id: id, acl: acl });
        return this;
    };
    BatchRunner.prototype.link = function (sourceTable, sourceId, targetTable, targetId, label) {
        this.mutationRequests.push({ op: 'link', sourceTable: sourceTable, sourceId: sourceId, targetTable: targetTable, targetId: targetId, label: label });
        return this;
    };
    BatchRunner.prototype.link2 = function (sourceTable, sourceId, label, targetId, branchId) {
        this.mutationRequests.push({ op: 'link', sourceTable: sourceTable, sourceId: sourceId, targetId: targetId, label: label, branchId: branchId });
    };
    BatchRunner.prototype.unlink = function (sourceTable, sourceId, targetTable, targetId, label) {
        this.mutationRequests.push({ op: 'unlink', sourceTable: sourceTable, sourceId: sourceId, targetTable: targetTable, targetId: targetId, label: label });
        return this;
    };
    BatchRunner.prototype.unlink2 = function (sourceTable, sourceId, label, targetId, branchId) {
        this.mutationRequests.push({ op: 'unlink', sourceTable: sourceTable, sourceId: sourceId, targetId: targetId, label: label, branchId: branchId });
        return this;
    };
    BatchRunner.prototype.undoLink = function (sourceTable, sourceId, label, targetId, branchId) {
        this.mutationRequests.push({ op: 'undo-link', sourceTable: sourceTable, sourceId: sourceId, targetId: targetId, label: label, branchId: branchId });
    };
    return BatchRunner;
}());

//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client/ked-bearer-provider.js":
/*!*************************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client/ked-bearer-provider.js ***!
  \*************************************************************************/
/*! exports provided: KedBearerProvider */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedBearerProvider", function() { return KedBearerProvider; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _restclient__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./restclient */ "./kedbackend/js/dist/js/ked-backend-client/restclient.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ "./kedbackend/js/dist/js/ked-backend-client/utils.js");



var KedBearerProvider = /** @class */ (function () {
    function KedBearerProvider(isomorphic, storage, tokenId, clientId, clientSecret, tokenUrl, tokenQuery) {
        this.isomorphic = isomorphic;
        this.storage = storage;
        this.tokenId = tokenId;
        this.clientId = clientId;
        this.clientSecret = clientSecret;
        this.tokenUrl = tokenUrl;
        this.tokenQuery = tokenQuery;
        this.tokenInfo = { token: null, expires: 0 };
        this.client = new _restclient__WEBPACK_IMPORTED_MODULE_1__["RestClient"](isomorphic, "", {
            username: this.clientId,
            password: this.clientSecret
        });
        this.getBearer = Object(_utils__WEBPACK_IMPORTED_MODULE_2__["avoidSimultanousCalls"])(this.getBearer.bind(this));
        this.refreshBearer = Object(_utils__WEBPACK_IMPORTED_MODULE_2__["avoidSimultanousCalls"])(this.refreshBearer.bind(this));
    }
    KedBearerProvider.prototype.getBearer = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, token, expires, _b, e_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _a = this.tokenInfo, token = _a.token, expires = _a.expires;
                        if (token && expires >= Date.now())
                            return [2 /*return*/, this.tokenInfo];
                        _c.label = 1;
                    case 1:
                        _c.trys.push([1, 4, , 6]);
                        _b = this;
                        return [4 /*yield*/, this.storage.load(this.clientId + "/" + this.tokenId)];
                    case 2:
                        _b.tokenInfo = _c.sent();
                        if (this.tokenInfo.token && this.tokenInfo.expires >= Date.now())
                            return [2 /*return*/, this.tokenInfo];
                        return [4 /*yield*/, this.refreshBearer()];
                    case 3:
                        _c.sent();
                        return [2 /*return*/, this.tokenInfo];
                    case 4:
                        e_1 = _c.sent();
                        return [4 /*yield*/, this.refreshBearer()];
                    case 5:
                        _c.sent();
                        return [2 /*return*/, this.tokenInfo];
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    KedBearerProvider.prototype.refreshBearer = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, retries, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        retries = 0;
                        _c.label = 1;
                    case 1:
                        if (!(retries < 6)) return [3 /*break*/, 5];
                        console.log("Retrieving token for " + this.tokenId);
                        return [4 /*yield*/, this.client.get(this.tokenUrl, this.tokenQuery, { cache: 'reload' })];
                    case 2:
                        res = _c.sent();
                        if (res.status !== 200) {
                            console.warn("Got " + res.status + " " + res.statusText);
                            return [3 /*break*/, 4];
                        }
                        _a = this;
                        _b = {};
                        return [4 /*yield*/, res.text()];
                    case 3:
                        _a.tokenInfo = (_b.token = _c.sent(), _b.expires = Date.now() + 59 * 60 * 1000, _b);
                        console.log("Got token for " + this.tokenId + ": " + JSON.stringify(this.tokenInfo));
                        this.storage.save(this.clientId + "/" + this.tokenId, this.tokenInfo);
                        return [2 /*return*/, this.tokenInfo];
                    case 4:
                        ++retries;
                        return [3 /*break*/, 1];
                    case 5: throw new Error("Failed to retrieve token for " + JSON.stringify(this.tokenId));
                }
            });
        });
    };
    return KedBearerProvider;
}());

//# sourceMappingURL=ked-bearer-provider.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client/restclient.js":
/*!****************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client/restclient.js ***!
  \****************************************************************/
/*! exports provided: RestClient */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RestClient", function() { return RestClient; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ "./kedbackend/js/dist/js/ked-backend-client/utils.js");
/* harmony import */ var _observable_emitter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../observable/emitter */ "./kedbackend/js/dist/js/observable/emitter.js");
/*
declare var Buffer; // node built-in


function basicAuthHeader(username, password) {
    return "Basic " + new Buffer(username + ":" + password).toString("base64");
}
*/



var RestClient = /** @class */ (function () {
    function RestClient(isomorphic, baseUrl, options) {
        this.isomorphic = isomorphic;
        this.baseUrl = baseUrl;
        this.options = options;
        this.numOutstandingOperations = 0;
        this._status = new _observable_emitter__WEBPACK_IMPORTED_MODULE_2__["Emitter"](this);
        this.fetchOptions = { mode: 'cors' };
        this.authHeader = options.bearer ?
            "Bearer " + options.bearer :
            options.username ?
                "Basic " + isomorphic.btoa(options.username + ":" + (options.password || "")) :
                null;
        this.bearerProvider = options.bearerProvider || null;
    }
    Object.defineProperty(RestClient.prototype, "status", {
        get: function () {
            return this._status;
        },
        enumerable: true,
        configurable: true
    });
    RestClient.prototype.fetch = function (path, method, headers, query, fetchOptions) {
        var _this = this;
        ++this.numOutstandingOperations;
        this._status.dispatch(this);
        return this._fetch(path, method, headers, query, fetchOptions)
            .then(function (res) {
            --_this.numOutstandingOperations;
            _this._status.dispatch(_this);
            return res;
        }).catch(function (err) {
            --_this.numOutstandingOperations;
            _this._status.dispatch(_this);
            return Promise.reject(err);
        });
    };
    RestClient.prototype._fetch = function (path, method, headers, query, fetchOptions) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var queryStr, _a, authHeader, tokenInfo, bearerProvider, _b, _c, url, res, wwwauth, _d;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_e) {
                switch (_e.label) {
                    case 0:
                        if (fetchOptions && fetchOptions.cache === 'no-cache') {
                            // Workaround for back-button not respecting cache control in Chrome/Opera.
                            // Append a query parameter to force a cache entry
                            query = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, query, { nocache: Object(_utils__WEBPACK_IMPORTED_MODULE_1__["createUUID"])() });
                        }
                        queryStr = query && Object.keys(query).filter(function (key) { return query[key] !== undefined; }).map(function (key) {
                            return encodeURIComponent(key) +
                                "=" +
                                encodeURIComponent(query[key]);
                        })
                            .join('&');
                        _a = this, authHeader = _a.authHeader, tokenInfo = _a.tokenInfo, bearerProvider = _a.bearerProvider;
                        if (!(!authHeader && !tokenInfo && bearerProvider)) return [3 /*break*/, 2];
                        _b = this;
                        return [4 /*yield*/, bearerProvider.getBearer()];
                    case 1:
                        _b.tokenInfo = tokenInfo = _e.sent();
                        _e.label = 2;
                    case 2:
                        if (!tokenInfo) return [3 /*break*/, 5];
                        if (!(tokenInfo.expires < Date.now())) return [3 /*break*/, 4];
                        console.log("Token expired. Refresh it:");
                        _c = this;
                        return [4 /*yield*/, bearerProvider.refreshBearer()];
                    case 3:
                        _c.tokenInfo = tokenInfo = _e.sent();
                        _e.label = 4;
                    case 4:
                        authHeader = "Bearer " + tokenInfo.token;
                        _e.label = 5;
                    case 5:
                        // In one way or another, we've concluded an Authorization header to use:
                        if (authHeader) {
                            headers.Authorization = authHeader;
                        }
                        url = this.baseUrl + path + (queryStr ? "?" + queryStr : "");
                        return [4 /*yield*/, this.isomorphic.fetch(url, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.fetchOptions, { headers: headers, method: method }, fetchOptions))];
                    case 6:
                        res = _e.sent();
                        if (!(res.status == 401 && this.bearerProvider)) return [3 /*break*/, 9];
                        wwwauth = res.headers.get("www-authenticate");
                        console.log("Got " + res.status + " from " + (this.baseUrl + path));
                        if (!(wwwauth && /Bearer/i.test(wwwauth))) return [3 /*break*/, 9];
                        _d = this;
                        return [4 /*yield*/, this.bearerProvider.refreshBearer()];
                    case 7:
                        _d.tokenInfo = _e.sent();
                        headers.Authorization = "Bearer " + this.tokenInfo.token;
                        return [4 /*yield*/, this.isomorphic.fetch(url, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.fetchOptions, { headers: headers, method: method }, fetchOptions))];
                    case 8:
                        res = _e.sent();
                        _e.label = 9;
                    case 9: return [2 /*return*/, res];
                }
            });
        });
    };
    RestClient.prototype.get = function (path, query, fetchOptions) {
        return this.fetch(path, "GET", { Accept: "application/json; text/plain" }, query, fetchOptions);
    };
    RestClient.prototype.post = function (path, data, fetchOptions) {
        return this.fetch(path, "POST", {
            "Content-Type": "application/json",
            "Accept": "application/json"
        }, null, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, fetchOptions, { body: JSON.stringify(data) }));
    };
    RestClient.prototype.delete = function (path, query, body, fetchOptions) {
        return this.fetch(path, "DELETE", { Accept: "application/json; text/plain" }, query, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, fetchOptions, { body: body }));
    };
    return RestClient;
}());

//# sourceMappingURL=restclient.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client/utils.js":
/*!***********************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client/utils.js ***!
  \***********************************************************/
/*! exports provided: createUUID, avoidSimultanousCalls, getGlobalId, computePredestinatedId, updateArray */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createUUID", function() { return createUUID; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "avoidSimultanousCalls", function() { return avoidSimultanousCalls; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getGlobalId", function() { return getGlobalId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computePredestinatedId", function() { return computePredestinatedId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateArray", function() { return updateArray; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");

function createUUID() {
    // Decent solution from http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript
    var d = Date.now();
    var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
        var r = (d + Math.random() * 16) % 16 | 0;
        d = Math.floor(d / 16);
        return (c === 'x' ? r : (r & 0x7 | 0x8)).toString(16);
    });
    return uuid;
}
function avoidSimultanousCalls(method) {
    var ongoingPromise = null;
    return function () {
        if (!ongoingPromise) {
            ongoingPromise = method.apply(this, arguments).then(function (result) {
                ongoingPromise = null;
                return result;
            });
        }
        return ongoingPromise;
    };
}
function getGlobalId(realm) {
    var prefix = 'ec96b3be-45fc-41d3-b69e-';
    var pad = ['50', '08', 'e1', '40', 'e4', 'e7'];
    if (realm.length > 6)
        throw new Error("Too long realm");
    for (var i = 0; i < realm.length; ++i) {
        var hex = realm.charCodeAt(i).toString(16);
        pad[i] = hex.length === 2 ?
            hex :
            '0' + hex;
    }
    return prefix + pad.join('');
}
function computePredestinatedId(input) {
    return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
        var encoder, data, digest, _a, i;
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
            switch (_b.label) {
                case 0:
                    encoder = new TextEncoder();
                    data = encoder.encode(input);
                    _a = Uint8Array.bind;
                    return [4 /*yield*/, crypto.subtle.digest('SHA-256', data)];
                case 1:
                    digest = new (_a.apply(Uint8Array, [void 0, _b.sent()]))();
                    i = 0;
                    return [2 /*return*/, 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
                            var nibble = digest[i++] % 16 | 0;
                            var washedNibble = c === 'x' ?
                                nibble :
                                nibble & 0x7 | 0x8;
                            return washedNibble.toString(16);
                        })];
            }
        });
    });
}
/*export function buf2hex(buffer: ArrayBuffer) {
  return Array.prototype.map.call(
    new Uint8Array(buffer),
    (x: number) => ('00' + x.toString(16)).slice(-2)).join('');
}*/
function updateArray(a, mapper) {
    var retval = a;
    for (var i = 0, l = a.length; i < l; ++i) {
        var t = a[i];
        var mapped = mapper(t);
        if (mapped !== t) {
            if (retval === a)
                retval = a.slice();
            retval[i] = mapped;
        }
    }
    return retval;
}
/*
export function updateArray<T>(a: T[], mapper: (t: T) => T | false): T[] {
  let retval = a;
  let j = 0;
  for (let i=0,l=a.length; i<l; ++i, ++j) {
    const t = a[i];
    const mapped = mapper(t);
    if (mapped === false) {
      // Mapper wants to delete this doc.
      if (retval === a) retval = a.slice();
      retval.splice(j, 1);
      --j; // compensate for ++j
    } else if (mapped !== t) {
      if (retval === a) retval = a.slice();
      retval[j] = mapped;
    }
  }
  return retval;
}
*/ 
//# sourceMappingURL=utils.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-model-migrator/index.js":
/*!***********************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-model-migrator/index.js ***!
  \***********************************************************/
/*! exports provided: KedModelMigratorMixin */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedModelMigratorMixin", function() { return KedModelMigratorMixin; });
/* harmony import */ var _migrate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./migrate */ "./kedbackend/js/dist/js/ked-model-migrator/migrate.js");

var KedModelMigratorMixin = function (client) {
    if (client.__migrator_mixed_in)
        return;
    client.__migrator_mixed_in = true;
    var get = client.get;
    var list = client.list;
    client.get = function (table, id, options) {
        var include = options && options.include;
        return get.apply(this, arguments).then(function (result) {
            Object(_migrate__WEBPACK_IMPORTED_MODULE_0__["default"])(result, table, include && include.toString().split(','));
            return result;
        });
    };
    client.list = function (table, options) {
        var include = options && options.include;
        return list.apply(this, arguments).then(function (result) {
            result.forEach(function (doc) { return Object(_migrate__WEBPACK_IMPORTED_MODULE_0__["default"])(doc, table, include && include.toString().split(',')); });
            return result;
        });
    };
    return client;
};
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-model-migrator/migrate-course.js":
/*!********************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-model-migrator/migrate-course.js ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return migrateCourse; });
/* harmony import */ var _migrate_task__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./migrate-task */ "./kedbackend/js/dist/js/ked-model-migrator/migrate-task.js");

function migrateCourse(course, graphs) {
    if (!course.modules)
        course.modules = [];
    course.modules.forEach(function (module) {
        if (!module.resources) {
            module.resources = [];
        }
        if (!module.taskIds) {
            module.taskIds = [];
        }
    });
    if (!course.responsibleTeachers) {
        course.responsibleTeachers = [];
    }
    // Earlier wrong spelling of resources
    if ('resourses' in course && !('resources' in course)) {
        course.resources = course.resourses;
        delete course.resourses;
    }
    if (!course.resources) {
        course.resources = [];
    }
    if (graphs) {
        graphs.forEach(function (label) {
            switch (label) {
                case 'tasks':
                    course.tasks.forEach(function (task) { return Object(_migrate_task__WEBPACK_IMPORTED_MODULE_0__["default"])(task); });
                    break;
            }
        });
    }
}
//# sourceMappingURL=migrate-course.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-model-migrator/migrate-task.js":
/*!******************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-model-migrator/migrate-task.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return migrateTask; });
function migrateTask(task) {
    if (!task.resources)
        task.resources = [];
}
//# sourceMappingURL=migrate-task.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-model-migrator/migrate.js":
/*!*************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-model-migrator/migrate.js ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return migrate; });
/* harmony import */ var _migrate_course__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./migrate-course */ "./kedbackend/js/dist/js/ked-model-migrator/migrate-course.js");
/* harmony import */ var _migrate_task__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./migrate-task */ "./kedbackend/js/dist/js/ked-model-migrator/migrate-task.js");


function migrate(doc, table, graphs) {
    switch (table) {
        case "courses":
            Object(_migrate_course__WEBPACK_IMPORTED_MODULE_0__["default"])(doc, graphs);
            break;
        case "tasks":
            Object(_migrate_task__WEBPACK_IMPORTED_MODULE_1__["default"])(doc);
            break;
    }
}
//# sourceMappingURL=migrate.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/collection.js":
/*!********************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/collection.js ***!
  \********************************************************/
/*! exports provided: Collection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Collection", function() { return Collection; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _observable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./observable */ "./kedbackend/js/dist/js/observable/observable.js");
/* harmony import */ var _map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./map */ "./kedbackend/js/dist/js/observable/map.js");
/* harmony import */ var _value__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./value */ "./kedbackend/js/dist/js/observable/value.js");
/* harmony import */ var _emitter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./emitter */ "./kedbackend/js/dist/js/observable/emitter.js");





var Collection = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Collection, _super);
    function Collection(subscribe) {
        return _super.call(this, subscribe) || this;
    }
    Collection.prototype._map = function (mapper) {
        throw "mixedin";
    };
    Collection.from = function (x) {
        if (x.subscribe)
            return new Collection(function (s) { return x.subscribe(s); });
        if (Array.isArray(x)) {
            var emitter_1 = new _emitter__WEBPACK_IMPORTED_MODULE_4__["Emitter"](x);
            return new Collection(function (s) { return emitter_1.subscribe(s); });
        }
        throw new Error("ObservableCollection.from() can only take arrays or observables");
    };
    Collection.prototype.map = function (mapper) {
        return this._map(function (items) { return items.map(function (item) { return mapper(item); }); });
    };
    Collection.prototype.flat = function () {
        return this._map(function (items) { return [].concat.apply([], items); });
    };
    Collection.prototype.filter = function (filter) {
        return this._map(function (items) { return items.filter(filter); });
    };
    Collection.prototype.concat = function (other) {
        return Collection.from(this.toValue().combineLatest(other).map(function (_a) {
            var me = _a[0], other = _a[1];
            return me.concat(other);
        }));
    };
    Collection.prototype.orderBy = function (prop) {
        return this.toValue().map(function (array) { return array.slice().sort(function (a, b) {
            var aProp = a && a[prop];
            var bProp = b && b[prop];
            return aProp > bProp ? 1 : aProp < bProp ? -1 : 0;
        }); }).toCollection(function (x) { return x; });
    };
    Collection.prototype.toValue = function () {
        var _this = this;
        return new _value__WEBPACK_IMPORTED_MODULE_3__["Value"](function (s) { return _this.subscribe(s); });
    };
    Collection.prototype.groupBy = function (prop) {
        return this.toValue().map(function (items) {
            var rv = {};
            items.forEach(function (item) {
                var list = rv[item[prop]] || (rv[item[prop]] = []);
                list.push(item);
            });
            return rv;
        });
    };
    Collection.prototype.first = function () {
        return this.toValue().map(function (arr) { return arr[0]; });
    };
    return Collection;
}(_observable__WEBPACK_IMPORTED_MODULE_1__["Observable"]));

Collection.prototype._map = Object(_map__WEBPACK_IMPORTED_MODULE_2__["initMapMethod"])(Collection);
//# sourceMappingURL=collection.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/emitter.js":
/*!*****************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/emitter.js ***!
  \*****************************************************/
/*! exports provided: Emitter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Emitter", function() { return Emitter; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _value__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./value */ "./kedbackend/js/dist/js/observable/value.js");


var Emitter = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Emitter, _super);
    function Emitter(initialValue) {
        var _this = _super.call(this, function (observer) {
            var subscription = {
                unsubscribe: function () { return _this.subscribers = _this.subscribers.filter(function (_a) {
                    var s = _a[0];
                    return s !== observer;
                }); },
            };
            _this.subscribers.push([observer, subscription]);
            if (_this.error)
                observer(null, _this.error, subscription);
            else
                observer(_this.value, undefined, subscription);
            return subscription;
        }) || this;
        _this.subscribers = [];
        _this.value = initialValue;
        return _this;
    }
    Emitter.prototype.dispatch = function (value) {
        this.value = value;
        this.error = undefined;
        this._dispatch();
    };
    Emitter.prototype.dispatchError = function (error) {
        this.error = error;
        this._dispatch();
    };
    Emitter.prototype._dispatch = function () {
        var _this = this;
        this.subscribers.forEach(function (_a) {
            var observer = _a[0], subscription = _a[1];
            try {
                observer(_this.value, _this.error, subscription);
            }
            catch (err) {
                observer(null, err, subscription);
            }
        });
    };
    return Emitter;
}(_value__WEBPACK_IMPORTED_MODULE_1__["Value"]));

//# sourceMappingURL=emitter.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/fiber-context.js":
/*!***********************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/fiber-context.js ***!
  \***********************************************************/
/*! exports provided: FiberContext */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FiberContext", function() { return FiberContext; });
var stack = [];
var currentFiber = null;
var providers = [function () { return currentFiber; }];
function pushFiber(fiber) {
    stack.push(currentFiber);
    currentFiber = fiber;
}
function popFiber() {
    currentFiber = stack.pop();
}
var FiberContext = {
    get current() { return currentFiber; },
    /*run: function rerun<R>(fiber: Fiber, fn: ()=>R): R | Promise<R> {
      pushFiber(fiber);
      try {
        return Promise.resolve(fn());
      } catch (p) {
        if (p && typeof p.then === 'function') {
          return p.then(()=>rerun(fiber, fn));
        } else {
          return Promise.reject(p);
        }
      } finally {
        popFiber();
      }
    },*/
    addProvider: function (getCurrentFiber) {
        providers.push(getCurrentFiber);
        setCurrentGetterFromProviders();
    },
    removeProvider: function (getCurrentFiber) {
        providers = providers.filter(function (p) { return p !== getCurrentFiber; });
        setCurrentGetterFromProviders();
    }
};
function setCurrentGetterFromProviders() {
    Object.defineProperty(FiberContext, "current", {
        get: providers.reduce(function (p, c) { return function () { return p() || c(); }; }),
        set: function () { throw new Error("Use FiberContext.push() to change current fiber"); }
    });
}
//# sourceMappingURL=fiber-context.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/map.js":
/*!*************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/map.js ***!
  \*************************************************/
/*! exports provided: initMapMethod */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "initMapMethod", function() { return initMapMethod; });
function initMapMethod(ctor) {
    return function (mapper) {
        var _this = this;
        return new ctor(function (observer) { return _this.subscribe(function (value, error, subscription) {
            if (error)
                observer(null, error, subscription);
            else
                try {
                    observer(mapper(value), error, subscription);
                }
                catch (err) {
                    observer(null, err, subscription);
                }
        }); });
    };
}
//# sourceMappingURL=map.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/observable.js":
/*!********************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/observable.js ***!
  \********************************************************/
/*! exports provided: Observable */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Observable", function() { return Observable; });
var Observable = /** @class */ (function () {
    //static get [Symbol.species]() { return this; }
    function Observable(_subscribe) {
        this._subscribe = _subscribe;
    }
    Observable.prototype.subscribe = function (observer) {
        try {
            return this._subscribe(function (items, error, subscription) {
                try {
                    observer(items, error, subscription);
                }
                catch (err) {
                    observer(null, err, subscription);
                }
            });
        }
        catch (error) {
            observer(null, error, { unsubscribe: function () { } });
        }
    };
    return Observable;
}());

//# sourceMappingURL=observable.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/value.js":
/*!***************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/value.js ***!
  \***************************************************/
/*! exports provided: Value */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Value", function() { return Value; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _observable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./observable */ "./kedbackend/js/dist/js/observable/observable.js");
/* harmony import */ var _map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./map */ "./kedbackend/js/dist/js/observable/map.js");
/* harmony import */ var _collection__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./collection */ "./kedbackend/js/dist/js/observable/collection.js");
/* harmony import */ var _fiber_context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./fiber-context */ "./kedbackend/js/dist/js/observable/fiber-context.js");





var Value = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Value, _super);
    function Value(subscribe) {
        return _super.call(this, subscribe) || this;
    }
    Value.from = function (x) {
        if (x.subscribe)
            return new Value(function (s) { return x.subscribe(s); });
        throw new Error("Value.from() can only take observables");
    };
    Value.prototype.read = function () {
        var resolved = false, result, err, notify;
        var subscription = this.subscribe(function (value, error, subsciption) {
            resolved = true;
            result = value;
            err = error;
            if (error && notify)
                notify(null, error, subsciption);
            else if (notify)
                notify(value, null, subsciption);
        });
        if (resolved) {
            var currentFiber = _fiber_context__WEBPACK_IMPORTED_MODULE_4__["FiberContext"].current;
            if (!currentFiber) {
                subscription.unsubscribe();
                throw new Error("Invalid Fiber Context");
            }
            if (err) {
                subscription.unsubscribe();
                throw err;
            }
            var subscriptions = currentFiber.subscriptions, observer = currentFiber.observer;
            subscriptions.push(subscription);
            notify = observer;
            return result;
        }
        throw new Promise(function (resolve, reject) {
            notify = function (value, error, subscription) {
                subscription.unsubscribe();
                if (error)
                    reject(error);
                else
                    resolve(value);
            };
        });
    };
    Value.prototype.load = function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.subscribe(function (value, error, subsciption) {
                if (error)
                    reject(error);
                else
                    resolve(value);
                subsciption.unsubscribe();
            });
        });
    };
    Value.prototype.filter = function (fn) {
        var _this = this;
        return new Value(function (observer) { return _this.subscribe(function (value, error, subscription) {
            if (error)
                observer(null, error, subscription);
            else if (fn(value))
                observer(value, error, subscription);
        }); });
    };
    Value.prototype.log = function (prefix) {
        return this.map(function (x) {
            console.log(prefix, x);
            return x;
        });
    };
    Value.prototype.toCollection = function (mapper) {
        var _this = this;
        return new _collection__WEBPACK_IMPORTED_MODULE_3__["Collection"](function (s) { return _this.map(mapper).subscribe(s); });
    };
    Value.prototype.combineLatest = function (other) {
        var _this = this;
        return new Value(function (observer) {
            var values = [null, null];
            var mySubscription, otherSubscription;
            var subscription = {
                unsubscribe: function () {
                    mySubscription.unsubscribe();
                    otherSubscription.unsubscribe();
                }
            };
            mySubscription = _this.subscribe(function (items, error, s) {
                if (error) {
                    s.unsubscribe();
                    observer(null, error, subscription);
                }
                values[0] = items;
                if (values[1] !== null)
                    observer(values, null, subscription);
            });
            otherSubscription = other.subscribe(function (value, error, s) {
                if (error) {
                    s.unsubscribe();
                    observer(null, error, subscription);
                }
                values[1] = value;
                if (values[0] !== null)
                    observer(values, null, subscription);
            });
            return subscription;
        });
    };
    Value.prototype.switchMap = function (mapper) {
        var _this = this;
        return new Value(function (observer) {
            var mappedSubscription = null;
            var subscription = null;
            var returnedSubscription = {
                unsubscribe: function () {
                    subscription.unsubscribe();
                    if (mappedSubscription) {
                        mappedSubscription.unsubscribe();
                        mappedSubscription = null;
                    }
                }
            };
            subscription = _this.subscribe(function (item, error, s) {
                subscription = s;
                if (mappedSubscription) {
                    mappedSubscription.unsubscribe();
                    mappedSubscription = null;
                }
                if (error)
                    observer(null, error, returnedSubscription);
                else {
                    try {
                        var observableOrValue = mapper(item);
                        if (observableOrValue && typeof observableOrValue.subscribe === 'function') {
                            mappedSubscription = observableOrValue.subscribe(function (value, error, s) {
                                mappedSubscription = s;
                                observer(value, error, returnedSubscription);
                            });
                        }
                        else {
                            observer(observableOrValue, null, subscription);
                        }
                    }
                    catch (error) {
                        observer(null, error, subscription);
                    }
                }
            });
            return returnedSubscription;
        });
    };
    return Value;
}(_observable__WEBPACK_IMPORTED_MODULE_1__["Observable"]));

Value.prototype.map = Object(_map__WEBPACK_IMPORTED_MODULE_2__["initMapMethod"])(Value);
//# sourceMappingURL=value.js.map

/***/ }),

/***/ "./node_modules/moment/locale sync recursive sv|en":
/*!***********************************************!*\
  !*** ./node_modules/moment/locale sync sv|en ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./en-SG": "./node_modules/moment/locale/en-SG.js",
	"./en-SG.js": "./node_modules/moment/locale/en-SG.js",
	"./en-au": "./node_modules/moment/locale/en-au.js",
	"./en-au.js": "./node_modules/moment/locale/en-au.js",
	"./en-ca": "./node_modules/moment/locale/en-ca.js",
	"./en-ca.js": "./node_modules/moment/locale/en-ca.js",
	"./en-gb": "./node_modules/moment/locale/en-gb.js",
	"./en-gb.js": "./node_modules/moment/locale/en-gb.js",
	"./en-ie": "./node_modules/moment/locale/en-ie.js",
	"./en-ie.js": "./node_modules/moment/locale/en-ie.js",
	"./en-il": "./node_modules/moment/locale/en-il.js",
	"./en-il.js": "./node_modules/moment/locale/en-il.js",
	"./en-nz": "./node_modules/moment/locale/en-nz.js",
	"./en-nz.js": "./node_modules/moment/locale/en-nz.js",
	"./sv": "./node_modules/moment/locale/sv.js",
	"./sv.js": "./node_modules/moment/locale/sv.js"
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	if(!__webpack_require__.o(map, req)) {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return map[req];
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = "./node_modules/moment/locale sync recursive sv|en";

/***/ }),

/***/ "./src/access-control/get-user-claims.ts":
/*!***********************************************!*\
  !*** ./src/access-control/get-user-claims.ts ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return getUserClaims; });
function getUserClaims(user) {
    return [{
            type: "email",
            value: user.mail
        }, {
            type: "school",
            value: user.school
        }].concat(user.roles.map(function (role) { return ({
        type: "role",
        value: role
    }); })).concat(user.roles.map(function (role) { return ({
        type: "schoolRole",
        value: user.school + "/" + role
    }); }));
}


/***/ }),

/***/ "./src/access-control/index.ts":
/*!*************************************!*\
  !*** ./src/access-control/index.ts ***!
  \*************************************/
/*! exports provided: getUserClaims, IMPERSONATION_QUERY_PARAMS, hasAccess, hasReadAccess, hasWriteAccess, hasShareAccess, isTeacherAtSchool, isAdminOrTeacherAtSchool, impersonationEnv, actAs, preserveImpersonationQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IMPERSONATION_QUERY_PARAMS", function() { return IMPERSONATION_QUERY_PARAMS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasAccess", function() { return hasAccess; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasReadAccess", function() { return hasReadAccess; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasWriteAccess", function() { return hasWriteAccess; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasShareAccess", function() { return hasShareAccess; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isTeacherAtSchool", function() { return isTeacherAtSchool; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isAdminOrTeacherAtSchool", function() { return isAdminOrTeacherAtSchool; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "impersonationEnv", function() { return impersonationEnv; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "actAs", function() { return actAs; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "preserveImpersonationQuery", function() { return preserveImpersonationQuery; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _get_user_claims__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./get-user-claims */ "./src/access-control/get-user-claims.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getUserClaims", function() { return _get_user_claims__WEBPACK_IMPORTED_MODULE_2__["default"]; });

/* harmony import */ var _utils_query_string__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/query-string */ "./src/utils/query-string.ts");





var IMPERSONATION_QUERY_PARAMS = [
    "user",
    "role",
    "school",
    "debug",
    "testVersion",
    "testversion",
    "features",
    "schoolType",
    "schooltype"
];
function hasAccess(user, doc, requestedRight) {
    var claims = Object(_get_user_claims__WEBPACK_IMPORTED_MODULE_2__["default"])(user);
    if (requestedRight !== 'R' && user.tutorFor) {
        claims = claims.filter(function (claim) { return claim.type !== 'email'; });
    }
    var result = Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["hasAccess"])(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["DocumentAccess"].fromStringArray(doc.acl || []), claims, requestedRight);
    //console.log(`Has ${requestedRight} access to ${doc.name}/${doc.id}: ${result}`);
    return result;
}
function hasReadAccess(user, doc) {
    return hasAccess(user, doc, 'R');
}
function hasWriteAccess(user, doc) {
    return hasAccess(user, doc, 'W');
}
function hasShareAccess(user, doc) {
    return hasAccess(user, doc, 'S');
}
function isTeacherAtSchool(user, school) {
    var isTeacher = user.roles.some(function (role) { return role === 'EMPLOYEE' || role === 'ADMIN'; });
    var belongsToSchool = (school || "").toLowerCase() === user.school.toLowerCase();
    return (isTeacher && belongsToSchool);
}
function isAdminOrTeacherAtSchool(user, school) {
    return user.roles.includes("ADMIN") || isTeacherAtSchool(user, school);
}
var impersonationEnv = {
    actAs: function (options) {
        var role = options.role, school = options.school, url = options.url;
        var currentQuery = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_3__["parseQueryString"])(location.search);
        var newQuery = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, currentQuery, { role: role, school: school });
        var newQueryString = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_3__["generateQueryString"])(newQuery);
        if (url) {
            location.href = "" + url + newQueryString;
        }
        else {
            location.hash = "#";
            location.search = newQueryString;
        }
    }
};
function actAs(options) {
    impersonationEnv.actAs(options);
}
function preserveImpersonationQuery(url, query) {
    var e_1, _a;
    var currentQuery = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_3__["parseQueryString"])(location.search);
    var preservedQuery = {};
    try {
        for (var IMPERSONATION_QUERY_PARAMS_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](IMPERSONATION_QUERY_PARAMS), IMPERSONATION_QUERY_PARAMS_1_1 = IMPERSONATION_QUERY_PARAMS_1.next(); !IMPERSONATION_QUERY_PARAMS_1_1.done; IMPERSONATION_QUERY_PARAMS_1_1 = IMPERSONATION_QUERY_PARAMS_1.next()) {
            var param = IMPERSONATION_QUERY_PARAMS_1_1.value;
            if (currentQuery[param])
                preservedQuery[param] = currentQuery[param];
        }
    }
    catch (e_1_1) { e_1 = { error: e_1_1 }; }
    finally {
        try {
            if (IMPERSONATION_QUERY_PARAMS_1_1 && !IMPERSONATION_QUERY_PARAMS_1_1.done && (_a = IMPERSONATION_QUERY_PARAMS_1.return)) _a.call(IMPERSONATION_QUERY_PARAMS_1);
        }
        finally { if (e_1) throw e_1.error; }
    }
    var newQueryString = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_3__["generateQueryString"])(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, preservedQuery, query));
    var pHash = url.indexOf('#');
    return pHash >= 0 ?
        "" + url.substr(0, pHash) + newQueryString + url.substr(pHash) :
        "" + url + newQueryString;
}


/***/ }),

/***/ "./src/apis/edsclient.ts":
/*!*******************************!*\
  !*** ./src/apis/edsclient.ts ***!
  \*******************************/
/*! exports provided: EdsClient, EDSPeriod, parseJsonDate_old */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EdsClient", function() { return EdsClient; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EDSPeriod", function() { return EDSPeriod; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseJsonDate_old", function() { return parseJsonDate_old; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _utils_school_moment__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/school-moment */ "./src/utils/school-moment.ts");
/* harmony import */ var _utils_school_term__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/school-term */ "./src/utils/school-term.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _mock_mock_eds_data_json__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./mock/mock-eds-data.json */ "./src/apis/mock/mock-eds-data.json");
var _mock_mock_eds_data_json__WEBPACK_IMPORTED_MODULE_5___namespace = /*#__PURE__*/__webpack_require__.t(/*! ./mock/mock-eds-data.json */ "./src/apis/mock/mock-eds-data.json", 1);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _utils_make_suspense_api__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/make-suspense-api */ "./src/utils/make-suspense-api.ts");









var EdsClient = /** @class */ (function () {
    function EdsClient(isomorphic, baseUrl, bearerProvider, userEmailGetter) {
        var _this = this;
        this.http = new kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["RestClient"](isomorphic, baseUrl, { bearerProvider: bearerProvider });
        this.userEmailGetter = userEmailGetter;
        var isApiMethod = function (m) {
            return typeof _this[m] === 'function' &&
                m !== 'constructor' && // Since makeSuspenseApi() walks prototype chain
                m !== 'privatizingCacheBust' &&
                m !== 'userEmailGetter';
        } // List non-API methods here...
        ;
        Object.keys(EdsClient.prototype).forEach(function (method) {
            if (isApiMethod(method)) {
                _this[method] = avoidSimultanousCalls(_this[method]);
            }
        });
        this.suspense = Object(_utils_make_suspense_api__WEBPACK_IMPORTED_MODULE_7__["makeSuspenseApi"])(this, { isApiMethod: isApiMethod });
    }
    EdsClient.prototype.privatizingCacheBust = function () {
        return { user: this.userEmailGetter() };
    };
    /**
       * Retrieve active courses for current logged in student.
       *
       * @param courseCode Short-name of the course. Optional.
       */
    EdsClient.prototype.getActiveCourses = function (q) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var query, res, _a, _b, json, ex_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _c.trys.push([0, 5, , 6]);
                        query = this.privatizingCacheBust();
                        if (q) {
                            if (q.courseCode)
                                query.CourseCode = q.courseCode;
                            if (q.periodName)
                                query.PeriodName = q.periodName;
                        }
                        return [4 /*yield*/, this.http.get("studentactivecourses", query)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.courses];
                    case 5:
                        ex_1 = _c.sent();
                        console.error("Error from EDS: " + ex_1);
                        throw new Error(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Kunde tyv\u00E4rr inte ladda terminsm\u00E5l eller avklarade steg fr\u00E5n EDS. F\u00F6rs\u00F6k igen senare..."], ["Kunde tyv\u00E4rr inte ladda terminsm\u00E5l eller avklarade steg fr\u00E5n EDS. F\u00F6rs\u00F6k igen senare..."]))));
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    /**
     * Retrieve latest assessments for current logged in user.
     *
     * @param limit Optional limit
     */
    EdsClient.prototype.getLatestAssessments = function (limit) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var query, res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        query = this.privatizingCacheBust();
                        if (!isNaN(limit))
                            query.Count = limit;
                        return [4 /*yield*/, this.http.get("studentassessments", query)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.assessments];
                }
            });
        });
    };
    /**
     * Retrieve studyplans for current logged-in user
     */
    EdsClient.prototype.getStudentGoals = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("studentgoals", this.privatizingCacheBust())];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.studentGoals];
                }
            });
        });
    };
    EdsClient.prototype.getStudentFutureAbilities = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("studentFutureAbilities", this.privatizingCacheBust())];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.studentFutureAbilities];
                }
            });
        });
    };
    EdsClient.prototype.getTeacherTutorStudents = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("teachertutorstudents", this.privatizingCacheBust())];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.students];
                }
            });
        });
    };
    /**
     * getSchoolTuitionGroups()
     *
     * Return tuitiongroups for school
     *
     * @param schoolName - name of school
     * @param courseCode - Skolverkets code for course
     */
    EdsClient.prototype.getSchoolTuitionGroups = function (q) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("SchoolTuitionGroups", tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.privatizingCacheBust(), q))];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.schoolTuitionGroups];
                }
            });
        });
    };
    /**
     * getTuitionGroupStudents()
     *
     * Return name and mailadresses for tutitiongroups in schools
     *
     * @param schoolName - name of school
     * @param tuitionGroupName - tuition gruop name in EDS
     */
    EdsClient.prototype.getTuitionGroupStudents = function (q) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("TuitionGroupStudents", tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.privatizingCacheBust(), q))];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.tuitionGroupStudents];
                }
            });
        });
    };
    /**
     * getSchoolTeachers()
     *
     * Return name and mailadresses for tutitiongroups in schools
     *
     * @param schoolName - name of school
     */
    EdsClient.prototype.getSchoolTeachers = function (q) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("SchoolTeachers", tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.privatizingCacheBust(), q))];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.schoolTeachers];
                }
            });
        });
    };
    // we assume that the EDS will return the current academic year dates determined by the current date
    EdsClient.prototype.getAcademicYearTerms = function (schoolLocale, date) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var holidays, firstTermMoment, secondTermMoment, startFirstTermDate, startSecondTermDate, endFirstTermDate, endSecondTermDate, firstTerm, secondTerm;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                // mock data
                switch (schoolLocale) {
                    case 'en_sin':
                        return [2 /*return*/, _mock_mock_eds_data_json__WEBPACK_IMPORTED_MODULE_5__.SouthIndia.filter(function (f) { return moment__WEBPACK_IMPORTED_MODULE_6___default()(date).isSameOrAfter(f.firstTerm.startDate) && moment__WEBPACK_IMPORTED_MODULE_6___default()(date).isSameOrBefore(f.secondTerm.endDate); })[0]];
                    case 'en_nin':
                        return [2 /*return*/, _mock_mock_eds_data_json__WEBPACK_IMPORTED_MODULE_5__.NorthIndia.filter(function (f) { return moment__WEBPACK_IMPORTED_MODULE_6___default()(date).isSameOrAfter(f.firstTerm.startDate) && moment__WEBPACK_IMPORTED_MODULE_6___default()(date).isSameOrBefore(f.secondTerm.endDate); })[0]];
                    case 'sv':
                        {
                            holidays = [];
                            firstTermMoment = Object(_utils_school_moment__WEBPACK_IMPORTED_MODULE_2__["getTermStarEndDate"])(date, true);
                            secondTermMoment = Object(_utils_school_moment__WEBPACK_IMPORTED_MODULE_2__["getTermStarEndDate"])(date, false);
                            startFirstTermDate = firstTermMoment[0];
                            startSecondTermDate = secondTermMoment[0];
                            endFirstTermDate = firstTermMoment[1];
                            endSecondTermDate = secondTermMoment[1];
                            firstTerm = { startDate: new Date(startFirstTermDate.year(), startFirstTermDate.month(), startFirstTermDate.date()).toDateString(), endDate: new Date(startFirstTermDate.year(), endFirstTermDate.month(), endFirstTermDate.date()).toDateString() };
                            secondTerm = { startDate: new Date(startSecondTermDate.year(), startSecondTermDate.month(), startSecondTermDate.date()).toDateString(), endDate: new Date(startSecondTermDate.year(), endSecondTermDate.month(), endSecondTermDate.date()).toDateString() };
                            return [2 /*return*/, { firstTerm: firstTerm, secondTerm: secondTerm, holidays: holidays }];
                        }
                }
                return [2 /*return*/];
            });
        });
    };
    return EdsClient;
}());

var EDSPeriod = /** @class */ (function () {
    function EDSPeriod(periodStringOrSchoolTerm) {
        if (typeof periodStringOrSchoolTerm === 'string') {
            this.period = periodStringOrSchoolTerm;
            this.term = this.period.startsWith('HT') ? 'AT' : 'ST';
            this.year = parseInt(this.period.substr(2));
            if (isNaN(this.year))
                throw new Error("Invalid period: " + this.period);
        }
        else {
            var schoolTerm = new _utils_school_term__WEBPACK_IMPORTED_MODULE_3__["SchoolTerm"](periodStringOrSchoolTerm);
            this.period = (schoolTerm.term === 'AT' ? "HT" : "VT") + schoolTerm.year;
            this.term = schoolTerm.term;
            this.year = schoolTerm.year;
        }
    }
    Object.defineProperty(EDSPeriod.prototype, "schoolTerm", {
        get: function () {
            return new _utils_school_term__WEBPACK_IMPORTED_MODULE_3__["SchoolTerm"]({
                academicYear: this.term === 'AT' ?
                    this.year + "/" + (this.year + 1) :
                    this.year - 1 + "/" + this.year,
                term: this.term
            });
        },
        enumerable: true,
        configurable: true
    });
    EDSPeriod.prototype.toString = function () {
        return this.period;
    };
    EDSPeriod.prototype.valueOf = function () {
        return this.year + ":" + (this.term === 'ST' ? "1" : "2");
    };
    return EDSPeriod;
}());

function parseJsonDate_old(jsonDateStr) {
    var date = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["dateTimeReviver"])("", jsonDateStr);
    if (!(date instanceof Date))
        throw new Error("Invalid JSON date string: " + jsonDateStr);
    return date;
}
function avoidSimultanousCalls(method) {
    var ongoingPromises = {};
    return function () {
        var argsJson = JSON.stringify([].slice.call(arguments));
        if (!ongoingPromises[argsJson]) {
            ongoingPromises[argsJson] = method.apply(this, arguments).then(function (result) {
                delete ongoingPromises[argsJson];
                return result;
            });
        }
        return ongoingPromises[argsJson];
    };
}
var templateObject_1;


/***/ }),

/***/ "./src/apis/google-calendar.ts":
/*!*************************************!*\
  !*** ./src/apis/google-calendar.ts ***!
  \*************************************/
/*! exports provided: GoogleCalendar */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GoogleCalendar", function() { return GoogleCalendar; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

var GoogleCalendar = /** @class */ (function () {
    function GoogleCalendar(googleTokenProvider) {
        this.googleTokenProvider = googleTokenProvider;
    }
    GoogleCalendar.prototype.ensureInited = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var tokenResult;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!(typeof gapi === 'undefined')) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.loadGapi()];
                    case 1:
                        _a.sent();
                        _a.label = 2;
                    case 2:
                        if (!(!this.tokenExpiration || this.tokenExpiration < new Date())) return [3 /*break*/, 4];
                        return [4 /*yield*/, this.googleTokenProvider.getBearer()];
                    case 3:
                        tokenResult = _a.sent();
                        this.tokenExpiration = new Date(tokenResult.expires);
                        gapi.client.setToken({
                            access_token: tokenResult.token
                        });
                        _a.label = 4;
                    case 4:
                        if (!(typeof gapi.client.calendar === 'undefined')) return [3 /*break*/, 6];
                        return [4 /*yield*/, gapi.client.load('calendar', 'v3')];
                    case 5:
                        _a.sent();
                        _a.label = 6;
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    GoogleCalendar.prototype.loadGapi = function () {
        return new Promise(function (resolve, reject) {
            if (typeof gapi !== 'undefined')
                return resolve();
            var script = document.createElement('script');
            script.src = "https://apis.google.com/js/client.js?onload=gaapi_loaded";
            document.getElementsByTagName("head")[0].appendChild(script);
            window.gaapi_loaded = resolve;
        });
    };
    // https://stackoverflow.com/questions/21168688/google-oauth2-using-externally-generated-access-token-with-js-client-library
    // https://developers.google.com/api-client-library/javascript/reference/referencedocs#gapiclientsettokentokenobject
    /*gapi.auth.setToken({
        access_token: 'accessToken?',
        expires_in: "3600",
        state: "https://www.googleapis.com/auth/calendar.readonly"
    })*/
    GoogleCalendar.prototype.listCalendars = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, err_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.ensureInited()];
                    case 1:
                        _a.sent();
                        _a.label = 2;
                    case 2:
                        _a.trys.push([2, 4, , 5]);
                        return [4 /*yield*/, gapi.client.calendar.calendarList.list({})];
                    case 3:
                        res = _a.sent();
                        // TODO: What is the normal res.status? 200? Throw if not 200?
                        return [2 /*return*/, res.result.items];
                    case 4:
                        err_1 = _a.sent();
                        // TODO: Parse out error from err (which is an object!)
                        throw err_1.error; // Is this correct? Test!
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    GoogleCalendar.prototype.batchEvents = function (_a) {
        var calendarList = _a.calendarList, timeMin = _a.timeMin, timeMax = _a.timeMax;
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var batch_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0: return [4 /*yield*/, this.ensureInited()];
                    case 1:
                        _b.sent();
                        try {
                            batch_1 = gapi.client.newBatch();
                            calendarList.forEach(function (cal) {
                                batch_1.add(gapi.client.calendar.events.list({
                                    'calendarId': cal.id || 'primary',
                                    'timeMin': timeMin && (new Date(timeMin)).toISOString(),
                                    'timeMax': timeMax && (new Date(timeMax)).toISOString(),
                                    'showDeleted': false,
                                    'singleEvents': true,
                                    'fields': 'items/id,items/start,items/end,items/summary,items/location,items/htmlLink,items/description',
                                    'maxResults': 2500,
                                    'orderBy': 'startTime'
                                }), { 'id': cal.id });
                            });
                            return [2 /*return*/, batch_1.then(function (resp) {
                                    var newCals = {};
                                    for (var i in calendarList) {
                                        var calId = calendarList[i].id;
                                        var events = resp.result[calId].result.items;
                                        newCals[calId] = { calendar: calendarList[i], events: events };
                                    }
                                    return newCals;
                                })];
                        }
                        catch (err) {
                            throw err.error;
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    return GoogleCalendar;
}());



/***/ }),

/***/ "./src/apis/ked-learninggoals.ts":
/*!***************************************!*\
  !*** ./src/apis/ked-learninggoals.ts ***!
  \***************************************/
/*! exports provided: getLearningGoalsAndTasks */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getLearningGoalsAndTasks", function() { return getLearningGoalsAndTasks; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

function getLearningGoalsAndTasks(apiPath, pageId) {
    return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
        var res, data;
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, fetch(apiPath + "?nodeID=" + pageId, { credentials: "same-origin" })];
                case 1:
                    res = _a.sent();
                    return [4 /*yield*/, res.json()];
                case 2:
                    data = _a.sent();
                    return [2 /*return*/, data];
            }
        });
    });
}


/***/ }),

/***/ "./src/apis/mock/mock-eds-data.json":
/*!******************************************!*\
  !*** ./src/apis/mock/mock-eds-data.json ***!
  \******************************************/
/*! exports provided: SouthIndia, NorthIndia, default */
/***/ (function(module) {

module.exports = {"SouthIndia":[{"firstTerm":{"startDate":"2015-06-01T00:00:00.000Z","endDate":"2015-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2015-11-01T00:00:00.000Z","endDate":"2016-03-27T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2016-06-23T00:00:00.000Z","endDate":"2016-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2016-11-01T00:00:00.000Z","endDate":"2017-03-25T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2017-06-05T00:00:00.000Z","endDate":"2017-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2017-11-01T00:00:00.000Z","endDate":"2018-03-30T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2018-06-04T00:00:00.000Z","endDate":"2018-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2018-11-01T00:00:00.000Z","endDate":"2019-04-29T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2019-06-03T00:00:00.000Z","endDate":"2019-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2019-11-01T00:00:00.000Z","endDate":"2020-03-27T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2020-06-01T00:00:00.000Z","endDate":"2020-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2020-11-01T00:00:00.000Z","endDate":"2021-03-26T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2021-06-06T00:00:00.000Z","endDate":"2021-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2021-11-01T00:00:00.000Z","endDate":"2022-03-25T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2022-06-05T00:00:00.000Z","endDate":"2022-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2022-11-01T00:00:00.000Z","endDate":"2023-03-31T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2023-06-04T00:00:00.000Z","endDate":"2023-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2023-11-01T00:00:00.000Z","endDate":"2024-03-29T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2024-06-03T00:00:00.000Z","endDate":"2024-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2024-11-01T00:00:00.000Z","endDate":"2025-03-28T00:00:00.000Z"},"holidays":[]}],"NorthIndia":[{"firstTerm":{"startDate":"2024-04-03T00:00:00.000Z","endDate":"2024-09-30T00:00:00.000Z"},"secondTerm":{"startDate":"2024-10-01T00:00:00.000Z","endDate":"2025-04-02T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2023-04-05T00:00:00.000Z","endDate":"2023-10-01T00:00:00.000Z"},"secondTerm":{"startDate":"2023-10-02T00:00:00.000Z","endDate":"2024-04-02T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2022-04-06T00:00:00.000Z","endDate":"2022-10-03T00:00:00.000Z"},"secondTerm":{"startDate":"2022-10-04T00:00:00.000Z","endDate":"2023-04-04T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2021-04-01T00:00:00.000Z","endDate":"2021-10-04T00:00:00.000Z"},"secondTerm":{"startDate":"2021-10-05T00:00:00.000Z","endDate":"2022-04-05T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2020-04-01T00:00:00.000Z","endDate":"2020-09-28T00:00:00.000Z"},"secondTerm":{"startDate":"2020-09-29T00:00:00.000Z","endDate":"2021-03-31T00:00:00.000Z"},"holidays":[{"startDate":"2020-05-17","endDate":"2020-06-28"}]},{"firstTerm":{"startDate":"2019-04-04T00:00:00.000Z","endDate":"2019-09-30T00:00:00.000Z"},"secondTerm":{"startDate":"2019-10-01T00:00:00.000Z","endDate":"2020-03-31T00:00:00.000Z"},"holidays":[{"startDate":"2019-05-19","endDate":"2019-06-29"}]},{"firstTerm":{"startDate":"2018-04-04T00:00:00.000Z","endDate":"2018-09-30T00:00:00.000Z"},"secondTerm":{"startDate":"2018-10-01T00:00:00.000Z","endDate":"2019-04-03T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2017-04-05T00:00:00.000Z","endDate":"2017-10-02T00:00:00.000Z"},"secondTerm":{"startDate":"2017-10-03T00:00:00.000Z","endDate":"2018-04-03T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2016-04-06T00:00:00.000Z","endDate":"2016-10-03T00:00:00.000Z"},"secondTerm":{"startDate":"2016-10-04T00:00:00.000Z","endDate":"2017-04-04T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2015-04-01T00:00:00.000Z","endDate":"2015-10-05T00:00:00.000Z"},"secondTerm":{"startDate":"2015-10-06T00:00:00.000Z","endDate":"2016-04-05T00:00:00.000Z"},"holidays":[]}]};

/***/ }),

/***/ "./src/components/calendar/course-name-to-css-class.ts":
/*!*************************************************************!*\
  !*** ./src/components/calendar/course-name-to-css-class.ts ***!
  \*************************************************************/
/*! exports provided: courseNameToCssClass */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "courseNameToCssClass", function() { return courseNameToCssClass; });
function courseNameToCssClass(cssPrefix, courseName) {
    return "" + cssPrefix + courseName.substr(0, 3).toLowerCase();
}


/***/ }),

/***/ "./src/components/calendar/crunch-colliding-events.ts":
/*!************************************************************!*\
  !*** ./src/components/calendar/crunch-colliding-events.ts ***!
  \************************************************************/
/*! exports provided: crunchCollidingEvents */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "crunchCollidingEvents", function() { return crunchCollidingEvents; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/utils */ "./src/utils/utils.ts");


function crunchCollidingEvents(events, isLastCall) {
    var result = [];
    events.forEach(function (event, eventIndex) {
        var overlaps = result.filter(function (x) { return x.startMoment && x.endMoment &&
            (x.startMoment <= event.startMoment) &&
            (x.endMoment > event.startMoment); });
        var allOverlaps = overlaps.concat(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["flatten"])(overlaps.map(function (o) { return o.prevOverlaps; })));
        allOverlaps = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["distinct"])(allOverlaps, function (o) { return o.index; });
        allOverlaps.sort(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["compareProp"])("startMoment"));
        var width; // = Math.round(100 / Math.max((allOverlaps.length + 1), 1));
        var pos = 0;
        allOverlaps.forEach(function (overlap, i) {
            if (i % 4 === 0) {
                width = Math.max(25, Math.round(100 / Math.max(allOverlaps.length - i + 1, 1)));
                pos = 0;
            }
            overlap.width = width;
            overlap.className = (overlap.className || "").split(' ')
                .filter(function (cn) { return cn !== 'splitted'; })
                .concat("splitted")
                .join(' '),
                overlap.pos = pos;
            pos += width;
        });
        result.push(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, event, { index: eventIndex, pos: pos, width: width, className: width < 100 ?
                (event.className ? event.className + " splitted" : "splitted") :
                event.className, prevOverlaps: allOverlaps }));
        /*if (isLastCall && moment(event.start).day() === 1) {
          if (/Sve2/.test(event.text)) {
            debugger;
          }
          if (/Franska/.test(event.text)) {
            debugger;
          }
          if (/Tyska/.test(event.text)) {
            debugger;
          }
          if (/spansk/.test(event.text)) debugger;
          if (/Eng6/.test(event.text)) debugger;
        }*/
    });
    return result;
}


/***/ }),

/***/ "./src/components/calendar/day-view-event.tsx":
/*!****************************************************!*\
  !*** ./src/components/calendar/day-view-event.tsx ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return DayViewEvent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _utils_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/constants */ "./src/utils/constants.js");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/utils */ "./src/utils/utils.ts");





function DayViewEvent(_a) {
    var id = _a.id, dayStart = _a.dayStart, startMoment = _a.startMoment, endMoment = _a.endMoment, text = _a.text, location = _a.location, description = _a.description, width = _a.width, pos = _a.pos, locale = _a.locale, zoom = _a.zoom, htmlLink = _a.htmlLink, className = _a.className;
    var top = (moment__WEBPACK_IMPORTED_MODULE_2___default()(startMoment).diff(dayStart) / _utils_constants__WEBPACK_IMPORTED_MODULE_3__["MINUTE"]) * zoom;
    var height = (moment__WEBPACK_IMPORTED_MODULE_2___default()(endMoment).diff(startMoment) / _utils_constants__WEBPACK_IMPORTED_MODULE_3__["MINUTE"]) * zoom;
    var localeTimeOptions = { hour: 'numeric', minute: '2-digit' };
    var localeStartTime = startMoment.toDate().toLocaleTimeString(locale, localeTimeOptions);
    var localeEndTime = endMoment.toDate().toLocaleTimeString(locale, localeTimeOptions);
    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "dayviewevent " + className, style: {
            position: 'absolute',
            boxSizing: 'border-box',
            top: top,
            left: (pos || 0) + "%",
            width: (width || 100) + '%',
            height: height,
            maxHeight: height,
            overflow: 'hidden'
        }, title: localeStartTime + " - " + localeEndTime + " " + text +
            (location ?
                "\n" + Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Plats: ", ""], ["Plats: ", ""])), location) :
                "") +
            (description ?
                "\n" + description :
                "") },
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "event-title", href: htmlLink, target: "calendar-event" }, text),
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { className: "event-period" },
            localeStartTime,
            " - ",
            localeEndTime),
        location &&
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { className: "event-location" }, location),
        description &&
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { className: "event-description" }, description));
}
var templateObject_1;


/***/ }),

/***/ "./src/components/calendar/day-view.tsx":
/*!**********************************************!*\
  !*** ./src/components/calendar/day-view.tsx ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return DayView; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _day_view_event__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./day-view-event */ "./src/components/calendar/day-view-event.tsx");
/* harmony import */ var _time_lines__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./time-lines */ "./src/components/calendar/time-lines.tsx");
/* harmony import */ var _utils_constants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/constants */ "./src/utils/constants.js");
/* harmony import */ var _crunch_colliding_events__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./crunch-colliding-events */ "./src/components/calendar/crunch-colliding-events.ts");






function DayView(_a) {
    var dayStart = _a.dayStart, // Milliseconds at start of the day (for example 08:00 the day)
    dayEnd = _a.dayEnd, // Milliseconds at end of the day (for example 17:00 the day)
    events = _a.events, // Events to show
    locale = _a.locale, zoom = _a.zoom, isLastCall = _a.isLastCall;
    var height = (moment__WEBPACK_IMPORTED_MODULE_1___default()(dayEnd).diff(dayStart) / _utils_constants__WEBPACK_IMPORTED_MODULE_4__["MINUTE"]) * zoom;
    var crunchedEvents = Object(_crunch_colliding_events__WEBPACK_IMPORTED_MODULE_5__["crunchCollidingEvents"])(events, isLastCall);
    return (react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "dayview", style: {
            top: 0,
            height: height,
            maxHeight: height,
            position: 'relative',
            overflow: 'hidden'
        } },
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"](_time_lines__WEBPACK_IMPORTED_MODULE_3__["default"], { dayStart: dayStart, dayEnd: dayEnd, zoom: zoom }),
        crunchedEvents.map(function (ev) { return react__WEBPACK_IMPORTED_MODULE_0__["createElement"](_day_view_event__WEBPACK_IMPORTED_MODULE_2__["default"], { key: ev.id, id: ev.id, className: ev.className, dayStart: dayStart, startMoment: ev.startMoment, endMoment: ev.endMoment, text: ev.text, location: ev.location, description: ev.description, width: ev.width, pos: ev.pos, locale: locale, zoom: zoom, htmlLink: ev.htmlLink }); })));
}


/***/ }),

/***/ "./src/components/calendar/hour-marker.tsx":
/*!*************************************************!*\
  !*** ./src/components/calendar/hour-marker.tsx ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return HourMarker; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_1__);


function HourMarker(_a) {
    var startHour = _a.startHour, endHour = _a.endHour, locale = _a.locale, zoom = _a.zoom;
    var hourPixels = 60 * zoom;
    var hours = [];
    for (var hour = startHour; hour <= endHour; ++hour) {
        hours.push(hour);
    }
    return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "hourmarker", style: {
            position: 'relative',
            left: 0,
            top: 0,
            overflow: 'visible',
            height: (endHour - startHour) * hourPixels
        } }, hours.map(function (hour, i) {
        var ypos = i * hourPixels;
        return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("span", { key: hour },
            react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { style: {
                    position: 'absolute',
                    left: 0,
                    top: ypos,
                    marginTop: '-4px',
                    padding: 0
                } }, moment__WEBPACK_IMPORTED_MODULE_1___default()().hour(hour).minute(0).toDate().toLocaleString(locale, { hour: "2-digit", minute: "2-digit" })));
    }));
}


/***/ }),

/***/ "./src/components/calendar/index.tsx":
/*!*******************************************!*\
  !*** ./src/components/calendar/index.tsx ***!
  \*******************************************/
/*! exports provided: Calendar */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Calendar", function() { return Calendar; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _week_view__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./week-view */ "./src/components/calendar/week-view.tsx");
/* harmony import */ var _apis_google_calendar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../apis/google-calendar */ "./src/apis/google-calendar.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _course_name_to_css_class__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./course-name-to-css-class */ "./src/components/calendar/course-name-to-css-class.ts");
/* harmony import */ var _should_include_calendar__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./should-include-calendar */ "./src/components/calendar/should-include-calendar.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");










var Calendar = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Calendar, _super);
    function Calendar(props) {
        var _this = _super.call(this, props) || this;
        // Props
        var firstDay = props.firstDay;
        var _a = _this.props, initialStartHour = _a.initialStartHour, initialEndHour = _a.initialEndHour, initialZoom = _a.initialZoom;
        // State
        _this.state = {
            firstDay: firstDay,
            startHour: initialStartHour,
            endHour: initialEndHour,
            zoom: initialZoom,
            calendars: {},
            calendarsBeingLoaded: [],
            status: 'Loading calendars... (authenticating...)',
            error: null
        };
        var googleTokenProvider = (props.env || _globals_KED_env__WEBPACK_IMPORTED_MODULE_8__["default"]).googleTokenProvider;
        _this.gcal = new _apis_google_calendar__WEBPACK_IMPORTED_MODULE_3__["GoogleCalendar"](googleTokenProvider);
        // Start calling on Google API right away. Store promise in property.
        _this.gcal.ensureInited().then(function () {
            return _this.loadData(firstDay);
        }).catch(function (error) {
            _this.handleError(error);
        });
        return _this;
    }
    Calendar.prototype.handleError = function (error) {
        if (!error)
            error = "Unknown error";
        this.setState({ error: error });
        console.error(error.stack || error); // Keep!
    };
    Calendar.prototype.loadData = function (firstDay) {
        var _this = this;
        // Props
        var numDays = this.props.numDays;
        var intl = this.context.intl;
        this.setState({
            firstDay: firstDay,
            calendars: {},
            calendarsBeingLoaded: [],
            error: null,
            status: intl.formatMessage({ id: "calendar.loadingCalendar", defaultMessage: "Loading calendars... (listing...)" })
        });
        // Important to return the Promise so that caller will catch any error.
        return this.gcal.listCalendars().then(function (calendars) {
            // Ignore the "week numbers" calendar as we already include week numbers in our view
            calendars = calendars.filter(function (cal) { return Object(_should_include_calendar__WEBPACK_IMPORTED_MODULE_7__["shouldIncludeCalendar"])(cal); });
            //!/Week Numbers/ig.test(c.summary)
            //console.log(calendars.map(c => ({bgColor: c.backgroundColor, primary: c.primary, summary: c.summary, x: c})));
            // Calendars Successfully listed.
            _this.setState({
                status: intl.formatMessage({ id: "calendar.loadCalendarEvents", defaultMessage: "Load calendar events..." })
            });
            _this.gcal.batchEvents({
                calendarList: calendars,
                timeMin: moment__WEBPACK_IMPORTED_MODULE_4___default()(firstDay).startOf('day'),
                timeMax: moment__WEBPACK_IMPORTED_MODULE_4___default()(firstDay).add(numDays, 'days').endOf('day')
            }).then(function (result) {
                _this.setState({ calendars: result, status: '' });
            });
        });
    };
    Calendar.prototype.navigateToPreviousWeek = function () {
        var _this = this;
        this.loadData(moment__WEBPACK_IMPORTED_MODULE_4___default()(this.state.firstDay).add(-1, "week")).catch(function (error) {
            _this.handleError(error);
        });
    };
    Calendar.prototype.navigateToNextWeek = function () {
        var _this = this;
        this.loadData(moment__WEBPACK_IMPORTED_MODULE_4___default()(this.state.firstDay).add(1, "week")).catch(function (error) {
            _this.handleError(error);
        });
    };
    Calendar.prototype.render = function () {
        var _this = this;
        // Props
        var numDays = this.props.numDays;
        var intl = this.context.intl;
        // State
        var _a = this.state, firstDay = _a.firstDay, startHour = _a.startHour, endHour = _a.endHour, zoom = _a.zoom, calendars = _a.calendars, status = _a.status, error = _a.error;
        var eventSets = Object.keys(calendars)
            .map(function (calendarId) { return calendars[calendarId]; })
            .map(function (_a) {
            var calendar = _a.calendar, events = _a.events;
            var isSchedule = calendar.summary === 'Skolschema' && calendar.description === "Synchronized";
            var isHoliday = /holiday/.test(calendar.id);
            var isClassRoom = /classroom/.test(calendar.id);
            var classNames = [];
            if (calendar.colorId)
                classNames.push("gcal-palette-" + calendar.colorId);
            if (isSchedule)
                classNames.push("course-event");
            if (isHoliday)
                classNames.push("holiday-event");
            // Map Google Calendar events to our own format:
            return events.map(function (event) { return ({
                id: event.id,
                start: event.start,
                end: event.end,
                text: event.summary,
                location: event.location,
                description: event.description,
                //bgColor: calendar.backgroundColor,
                //fgColor: calendar.foregroundColor,
                htmlLink: event.htmlLink,
                className: (isSchedule && event.summary ?
                    classNames.concat(Object(_course_name_to_css_class__WEBPACK_IMPORTED_MODULE_6__["courseNameToCssClass"])('course-event-', event.summary)) :
                    classNames).join(" ")
            }); });
        });
        var events = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["flatten"])(eventSets);
        // Else, render the WeekView now. Any error should be displayed as red status
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { style: { position: 'relative', top: 0, left: 0 } },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn-toolbar week-navigation" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn-group" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { className: "btn", onClick: function () { return _this.navigateToPreviousWeek(); } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-angle-left", "aria-hidden": "true" })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { className: "btn", onClick: function () { return _this.navigateToNextWeek(); } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-angle-right", "aria-hidden": "true" }))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn-group" }, intl.formatMessage({ id: "calendar.currentDate", defaultMessage: "Vecka {week}, {year}" }, { week: moment__WEBPACK_IMPORTED_MODULE_4___default()(firstDay).week(), year: moment__WEBPACK_IMPORTED_MODULE_4___default()(firstDay).year() }))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_week_view__WEBPACK_IMPORTED_MODULE_2__["default"], { locale: intl.locale, firstDay: firstDay, startHour: startHour, endHour: endHour, numDays: numDays, zoom: zoom, events: events, status: status, error: error }));
    };
    Calendar.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_9__["LanguageContext"];
    return Calendar;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/calendar/should-include-calendar.ts":
/*!************************************************************!*\
  !*** ./src/components/calendar/should-include-calendar.ts ***!
  \************************************************************/
/*! exports provided: shouldIncludeCalendar */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shouldIncludeCalendar", function() { return shouldIncludeCalendar; });
/* Calendars to show:

    summary: "Matsedel",
    summary: "Skolschema",
    primary: true
    id.includes('classroom')
    id.includes('holiday')
*/
function shouldIncludeCalendar(cal) {
    var summary = cal.summary || "";
    var isOwner = /owner/ig.test(cal.accessRole);
    var isPrimary = !!cal.primary;
    var isClassroomCalendar = /classroom/ig.test(cal.id);
    var isHolidayCalendar = /holiday/ig.test(cal.id);
    return (isPrimary ||
        isClassroomCalendar ||
        isHolidayCalendar ||
        ///matsedel/ig.test(summary) ||
        (/schema/ig.test(summary) && isOwner));
}


/***/ }),

/***/ "./src/components/calendar/status-bar.tsx":
/*!************************************************!*\
  !*** ./src/components/calendar/status-bar.tsx ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return StatusBar; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

function StatusBar(_a) {
    var status = _a.status, error = _a.error;
    if (!status && !error)
        return null;
    return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "statusbar" }, error ?
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("p", { className: "error" }, '' + error) :
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("p", { className: "status" }, status));
}


/***/ }),

/***/ "./src/components/calendar/time-lines.tsx":
/*!************************************************!*\
  !*** ./src/components/calendar/time-lines.tsx ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return TimeLines; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_1__);


function TimeLines(_a) {
    var dayStart = _a.dayStart, dayEnd = _a.dayEnd, zoom = _a.zoom;
    var hourPixels = 60 * zoom;
    var startHour = moment__WEBPACK_IMPORTED_MODULE_1___default()(dayStart).hour();
    var endHour = moment__WEBPACK_IMPORTED_MODULE_1___default()(dayEnd).hour();
    var hours = [];
    for (var hour = startHour; hour <= endHour; ++hour) {
        hours.push(hour);
    }
    return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", null, hours.map(function (hour) {
        return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { key: hour, className: "timeline", style: {
                width: '100%',
                boxSizing: 'border-box',
                margin: hourPixels / 2 + "px 0 0 0",
                height: hourPixels / 2
            } });
    }));
}


/***/ }),

/***/ "./src/components/calendar/week-view.tsx":
/*!***********************************************!*\
  !*** ./src/components/calendar/week-view.tsx ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _day_view__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./day-view */ "./src/components/calendar/day-view.tsx");
/* harmony import */ var _hour_marker__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./hour-marker */ "./src/components/calendar/hour-marker.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _status_bar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./status-bar */ "./src/components/calendar/status-bar.tsx");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");








var WeekView = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](WeekView, _super);
    function WeekView() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    WeekView.prototype.render = function () {
        // Props:
        var _a = this.props, firstDay = _a.firstDay, // {moment} The day to start with (normally a monday)
        startHour = _a.startHour, // {number} The hour to start on
        endHour = _a.endHour, // {number} The hour to end rendering per day
        numDays = _a.numDays, // {number} Number of days, normally 5.
        events = _a.events, // Array of events to display in the week.
        locale = _a.locale, // Locale to use for showing week days and hour marks.
        zoom = _a.zoom, // {number} Zoom where 1 means that 1 minute = 1 pixel.  
        status = _a.status, error = _a.error;
        var intl = this.context.intl;
        // Prepare DayView datas 
        var dayDatas = [];
        var day = moment__WEBPACK_IMPORTED_MODULE_2___default()(firstDay);
        var _loop_1 = function (i) {
            var dayStart = moment__WEBPACK_IMPORTED_MODULE_2___default()(day).hour(startHour);
            var dayEnd = moment__WEBPACK_IMPORTED_MODULE_2___default()(day).hour(endHour);
            var dayDate = moment__WEBPACK_IMPORTED_MODULE_2___default()(day).format('YYYY-MM-DD');
            var isToday = moment__WEBPACK_IMPORTED_MODULE_2___default()(dayStart).startOf("day").valueOf() === moment__WEBPACK_IMPORTED_MODULE_2___default()().startOf("day").valueOf();
            dayDatas.push({
                name: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["capitalizeFirst"])(dayStart.toDate().toLocaleString(locale, {
                    weekday: 'long',
                    day: 'numeric',
                    month: 'short'
                })),
                dayStart: dayStart,
                dayEnd: dayEnd,
                isToday: isToday,
                events: events.filter(function (event) {
                    return event.start && event.end && event.start.dateTime && event.end.dateTime &&
                        (moment__WEBPACK_IMPORTED_MODULE_2___default()(event.start.dateTime).isBetween(dayStart, dayEnd) ||
                            moment__WEBPACK_IMPORTED_MODULE_2___default()(event.end.dateTime).isBetween(dayStart, dayEnd));
                })
                    // Change start / end to directly point to the dateTime
                    .map(function (event) { return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["clone"])(event, { startMoment: moment__WEBPACK_IMPORTED_MODULE_2___default()(event.start.dateTime), endMoment: moment__WEBPACK_IMPORTED_MODULE_2___default()(event.end.dateTime) }); })
                    .sort(function (a, b) { return a.startMoment.valueOf > b.startMoment.valueOf ? 1 : a.startMoment < b.startMoment ? -1 : 0; }),
                fullDayEvents: events.filter(function (event) {
                    // Verify that it is a full-day-event
                    return event.start && event.end && event.start.date && event.end.date &&
                        // Verify it applies to current day
                        (event.start.date <= dayDate && event.end.date > dayDate);
                })
                    // Change start / end to directly point to the date object
                    .map(function (event) { return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["clone"])(event, {
                    startDate: event.start.date,
                    endDate: event.end.date
                }); })
            });
            day = moment__WEBPACK_IMPORTED_MODULE_2___default()(day) // clone it
                .add(1, 'days'); // Add another day
        };
        for (var i = 0; i < numDays; ++i) {
            _loop_1(i);
        }
        // Render
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "vemendo-weekview" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("table", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tbody", null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { style: { border: 0 } }),
                        dayDatas.map(function (d) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { key: d.dayStart.toISOString(), className: d.isToday ? "today" : null },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { className: "dayname" }, d.name)); })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { style: { border: 0 } },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { className: "week-number" }, intl.formatMessage({ id: "calendar.weekNumber", defaultMessage: "V{weekNumber}" }, { weekNumber: moment__WEBPACK_IMPORTED_MODULE_2___default()(firstDay).week() }))),
                        dayDatas.map(function (day) {
                            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { key: day.dayStart.toISOString(), className: day.isToday ? "today" : null }, day.fullDayEvents.map(function (_a) {
                                var id = _a.id, text = _a.text, location = _a.location, description = _a.description, htmlLink = _a.htmlLink, className = _a.className;
                                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: id, className: "dayviewevent full-day " + className, title: "" + text + (location ?
                                        "\n" + intl.formatMessage({ id: "calendar.fullDayEventLocation", defaultMessage: "Plats: {location}" }, { location: location }) :
                                        "") +
                                        (description ?
                                            "\n" + description :
                                            "") },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "event-title", href: htmlLink, target: "calendar-event" }, text),
                                    location &&
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { className: "event-location" }, location),
                                    description &&
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { className: "event-description" }, description));
                            }));
                        })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { style: { border: 0 } },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_hour_marker__WEBPACK_IMPORTED_MODULE_4__["default"], { startHour: startHour, endHour: endHour, locale: locale, zoom: zoom })),
                        dayDatas.map(function (day) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { key: day.dayStart.toISOString(), className: day.isToday ? "today" : null },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_day_view__WEBPACK_IMPORTED_MODULE_3__["default"], { key: day.dayStart.toISOString(), dayStart: day.dayStart, dayEnd: day.dayEnd, events: day.events, locale: locale, zoom: zoom, isLastCall: status == '' }),
                            " "); })),
                    (status || error) && (!error || error.name !== "UnauthorizedError") &&
                        //
                        // Show status / error
                        //
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { style: { border: 0 } }),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { style: { border: 0 }, colSpan: numDays },
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_status_bar__WEBPACK_IMPORTED_MODULE_6__["default"], { status: status, error: error }))))));
    };
    WeekView.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_7__["LanguageContext"];
    return WeekView;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));
/* harmony default export */ __webpack_exports__["default"] = (WeekView);


/***/ }),

/***/ "./src/components/charts/charts-utils.ts":
/*!***********************************************!*\
  !*** ./src/components/charts/charts-utils.ts ***!
  \***********************************************/
/*! exports provided: getWeekplannerProgressData */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getWeekplannerProgressData", function() { return getWeekplannerProgressData; });
function getWeekplannerProgressData(taskSets) {
    var chartTasks = { completedTasks: 0, totalNumberOfTasks: 0, subjectData: {} };
    taskSets.forEach(function (elem) { return elem.learningGoals.forEach(function (x) {
        var subjectCompletedTasks = x.tasks.filter(function (t) { return t.done; }).length;
        var courseSubjectData = chartTasks.subjectData[elem.courseName];
        if (!courseSubjectData) {
            courseSubjectData = chartTasks.subjectData[elem.courseName] = {
                completedNumberOfTasks: 0,
                numberOfTasks: 0
            };
        }
        courseSubjectData.completedNumberOfTasks += subjectCompletedTasks;
        courseSubjectData.numberOfTasks += x.tasks.length;
        chartTasks.completedTasks += subjectCompletedTasks;
        chartTasks.totalNumberOfTasks += x.tasks.length;
    }); });
    return chartTasks;
}


/***/ }),

/***/ "./src/components/charts/doughnut.tsx":
/*!********************************************!*\
  !*** ./src/components/charts/doughnut.tsx ***!
  \********************************************/
/*! exports provided: Doughnut */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Doughnut", function() { return Doughnut; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var Doughnut = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Doughnut, _super);
    function Doughnut() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Doughnut.prototype.render = function () {
        var _a = this.props, percentage = _a.percentage, errorMessage = _a.errorMessage, backgroundColor = _a.backgroundColor, progressColor = _a.progressColor;
        //default values
        var stroke = 2;
        //equals with he circumference/2II
        var radius = 100 / (2 * 3.14);
        //take into account the stroke
        var center = radius + stroke;
        var viewboxW = center * 2;
        var viewvboxH = center * 2;
        var roundedPercentage = Math.round(percentage);
        var startErrorText = 10;
        return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("svg", { className: "doughnut-chart", viewBox: "0 0 " + viewboxW + " " + viewvboxH, width: "100%", height: "100%" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("circle", { className: "circle-chart-background", stroke: backgroundColor, strokeWidth: stroke + 1, fill: "none", cx: center, cy: center, r: radius }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("circle", { className: "circle-chart-circle", stroke: progressColor, ref: "progressCircle", strokeWidth: stroke, style: { strokeDasharray: roundedPercentage + ", 100" }, strokeLinecap: "round", fill: "none", cx: center, cy: center, r: radius }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("g", { className: "circle-chart-info" }, !errorMessage ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("text", { className: "circle-chart-percent", x: center, y: center, alignmentBaseline: "central", textAnchor: "middle" }, roundedPercentage + "%") :
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("text", { className: "circle-chart-percent-error", x: center, y: center, alignmentBaseline: "central", fontSize: "5", textAnchor: "middle" }, errorMessage.split(' ').map(function (element) {
                    var tspan = react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tspan", { key: element, x: center, y: startErrorText }, element);
                    startErrorText += 5;
                    return tspan;
                })))));
    };
    Doughnut.defaultProps = {
        backgroundColor: "#efefef",
        progressColor: "#3dbca2",
        errorMessage: null
    };
    return Doughnut;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/charts/goal-progress.tsx":
/*!*************************************************!*\
  !*** ./src/components/charts/goal-progress.tsx ***!
  \*************************************************/
/*! exports provided: GoalProgress */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GoalProgress", function() { return GoalProgress; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var GoalProgress = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](GoalProgress, _super);
    function GoalProgress() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.createProgress = function () {
            var _a = _this.props, numberOfTasks = _a.numberOfTasks, completedNumberOfTasks = _a.completedNumberOfTasks, maximumTasksDisplayed = _a.maximumTasksDisplayed, backgroundColor = _a.backgroundColor, progressColor = _a.progressColor;
            var progress = [];
            if (numberOfTasks > maximumTasksDisplayed) {
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "progress-overview" },
                    " ",
                    completedNumberOfTasks,
                    " / ",
                    numberOfTasks,
                    " ");
            }
            for (var taskNo = 1; taskNo <= numberOfTasks; taskNo++) {
                progress.push(react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("svg", { key: taskNo },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("circle", { className: "circle-chart-background", fill: taskNo > completedNumberOfTasks ? backgroundColor : progressColor, cx: "8", cy: "8", r: "8" })));
            }
            return progress;
        };
        return _this;
    }
    GoalProgress.prototype.render = function () {
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "goals-progress" }, this.createProgress());
    };
    GoalProgress.defaultProps = {
        numberofTasks: 0,
        completedNumberOfTasks: 0,
        maximumTasksDisplayed: 10,
        backgroundColor: "lightgrey",
        progressColor: "#3dbca2",
    };
    return GoalProgress;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/charts/progress.tsx":
/*!********************************************!*\
  !*** ./src/components/charts/progress.tsx ***!
  \********************************************/
/*! exports provided: Progress */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Progress", function() { return Progress; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var Progress = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Progress, _super);
    function Progress() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Progress.prototype.render = function () {
        var _a = this.props, percentage = _a.percentage, backgroundColor = _a.backgroundColor, progressColor = _a.progressColor;
        var roundedPercentage = Math.round(percentage);
        return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("svg", { className: "progress-chart", width: "100%", height: "25" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("rect", { fill: backgroundColor, width: "100%", height: "100%", rx: "4" }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("rect", { className: "fill", fill: progressColor, width: roundedPercentage + "%", height: "100%", rx: "4" }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("text", { className: "filled-text", textAnchor: "middle", x: "50%", y: "50%", dy: ".3em" }, roundedPercentage + "%")));
    };
    Progress.defaultProps = {
        percentage: 0,
        backgroundColor: "#F1F5F4",
        progressColor: "#3dbca2",
    };
    return Progress;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/course-builder/sub-components/remove-item.tsx":
/*!**********************************************************************!*\
  !*** ./src/components/course-builder/sub-components/remove-item.tsx ***!
  \**********************************************************************/
/*! exports provided: RemoveItem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RemoveItem", function() { return RemoveItem; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");



;
var RemoveItem = function (_a) {
    var onClick = _a.onClick, className = _a.className, style = _a.style, title = _a.title;
    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { title: title || Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Radera"], ["Radera"]))), className: "removeItem " + (className || ""), onClick: onClick, style: style });
};
var templateObject_1;


/***/ }),

/***/ "./src/components/course-builder/sub-components/spinner.tsx":
/*!******************************************************************!*\
  !*** ./src/components/course-builder/sub-components/spinner.tsx ***!
  \******************************************************************/
/*! exports provided: Spinner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Spinner", function() { return Spinner; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var Spinner = function () { return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("span", null,
    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("i", { className: "fa fa-spinner fa-spin", "aria-hidden": "true" }),
    "\u00A0"); };


/***/ }),

/***/ "./src/components/course-viewer/subcomponents/confirmation.tsx":
/*!*********************************************************************!*\
  !*** ./src/components/course-viewer/subcomponents/confirmation.tsx ***!
  \*********************************************************************/
/*! exports provided: Confirmation */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Confirmation", function() { return Confirmation; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

function Confirmation(props) {
    return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "confirmation-box " + props.className + (props.visible ? " visible" : "") },
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("p", null, props.text),
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("button", { onClick: function () { return props.onConfirm(); } }, "OK"),
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("button", { onClick: function () { return props.onCancel(); } }, "Avbryt"));
}


/***/ }),

/***/ "./src/components/course-viewer/subcomponents/learning-goals-list.tsx":
/*!****************************************************************************!*\
  !*** ./src/components/course-viewer/subcomponents/learning-goals-list.tsx ***!
  \****************************************************************************/
/*! exports provided: LearningGoalsList */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LearningGoalsList", function() { return LearningGoalsList; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _task_list__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./task-list */ "./src/components/course-viewer/subcomponents/task-list.tsx");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");




var LearningGoalsList = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](LearningGoalsList, _super);
    function LearningGoalsList() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    LearningGoalsList.prototype.render = function () {
        var _a = this.props, commonTasks = _a.commonTasks, learningGoals = _a.learningGoals;
        var intl = this.context.intl;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
            learningGoals.map(function (lg) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: lg.name },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h5", null, lg.name),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_task_list__WEBPACK_IMPORTED_MODULE_2__["TaskList"], { learningTasks: lg.learningTasks })); }),
            commonTasks.length > 0 && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                learningGoals.length > 0 && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h5", null, intl.formatMessage({ id: "learningGoalsLost.overall", defaultMessage: "vergripande" })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_task_list__WEBPACK_IMPORTED_MODULE_2__["TaskList"], { learningTasks: commonTasks })));
    };
    LearningGoalsList.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_3__["LanguageContext"];
    return LearningGoalsList;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/course-viewer/subcomponents/task-list.tsx":
/*!******************************************************************!*\
  !*** ./src/components/course-viewer/subcomponents/task-list.tsx ***!
  \******************************************************************/
/*! exports provided: TaskList */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskList", function() { return TaskList; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _repos_user_tasks_repo__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../repos/user-tasks-repo */ "./src/repos/user-tasks-repo.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _confirmation__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./confirmation */ "./src/components/course-viewer/subcomponents/confirmation.tsx");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");









var TaskList = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](TaskList, _super);
    function TaskList(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            userTasks: [],
            weekDate: Date.now(),
            confirmations: []
        };
        _this.onChange = _this.onChange.bind(_this);
        return _this;
    }
    TaskList.prototype.onChange = function (userTasks, persisted) {
        if (persisted.weekDate !== this.state.weekDate) {
            this.setState({
                confirmations: []
            });
        }
        this.setState({
            userTasks: userTasks,
            weekDate: persisted.weekDate
        });
    };
    TaskList.prototype.componentDidMount = function () {
        _repos_user_tasks_repo__WEBPACK_IMPORTED_MODULE_5__["userTasksRepo"].subscribe(this.onChange);
    };
    TaskList.prototype.componentWillUnmount = function () {
        _repos_user_tasks_repo__WEBPACK_IMPORTED_MODULE_5__["userTasksRepo"].unsubscribe(this.onChange);
    };
    TaskList.prototype.toggleTask = function (learningTask) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var userTasks, weekDate, latestTimeStamp, userTask;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        userTasks = this.state.userTasks.filter(function (ut) {
                            return learningTask.task ?
                                ut.task && ut.task.some(function (t) { return t.id === learningTask.id; }) :
                                ut.siteVisionPageId === learningTask.id;
                        });
                        weekDate = this.state.weekDate;
                        if (!(userTasks.length === 0)) return [3 /*break*/, 2];
                        latestTimeStamp = Math.max.apply(Math.max, [weekDate].concat(this.state.userTasks.map(function (t) { return t.dateTime; })));
                        userTask = {
                            id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_4__["createUUID"])(),
                            courseName: learningTask.courseName,
                            dateTime: latestTimeStamp + 2000,
                            learningGoal: learningTask.learningGoal,
                            name: learningTask.name,
                            url: learningTask.url,
                            acl: [
                                // Default ACL: Let user self have full control over this item:
                                new kedbackend_client__WEBPACK_IMPORTED_MODULE_4__["DocumentAccess"]("email", _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.mail, "S"),
                                // Additional ACL: Let employees on same school have read access to it.
                                // This currently only applies to tasks that refer to course tasks (not custom tasks!)
                                new kedbackend_client__WEBPACK_IMPORTED_MODULE_4__["DocumentAccess"]("schoolRole", _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.school + "/EMPLOYEE", "R")
                            ].map(function (ac) { return ac.toString(); })
                        };
                        if (learningTask.task && learningTask.task.deadline) {
                            userTask.deadline = learningTask.task.deadline;
                        }
                        if (learningTask.task) {
                            userTask.task = [learningTask.task];
                            if (learningTask.course) {
                                userTask.course = [learningTask.course];
                            }
                            else if (learningTask.courseInfo) {
                                userTask.courseInfo = learningTask.courseInfo;
                            }
                        }
                        else {
                            userTask.siteVisionPageId = learningTask.id;
                        }
                        if (learningTask.step) {
                            userTask.step = learningTask.step;
                        }
                        return [4 /*yield*/, Promise.all([
                                _repos_user_tasks_repo__WEBPACK_IMPORTED_MODULE_5__["userTasksRepo"].setWeekPlannerBoxOpen(learningTask.courseName, true),
                                _repos_user_tasks_repo__WEBPACK_IMPORTED_MODULE_5__["userTasksRepo"].insert([userTask])
                            ])];
                    case 1:
                        _a.sent();
                        return [3 /*break*/, 4];
                    case 2: 
                    // Already present in weekplanner. It's time to delete those that matched us.
                    return [4 /*yield*/, _repos_user_tasks_repo__WEBPACK_IMPORTED_MODULE_5__["userTasksRepo"].delete(userTasks.map(function (t) { return t.id; }))];
                    case 3:
                        // Already present in weekplanner. It's time to delete those that matched us.
                        _a.sent();
                        _a.label = 4;
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    TaskList.prototype.render = function () {
        var _this = this;
        var intl = this.context.intl;
        var learningTasks = this.props.learningTasks;
        var userTasks = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["arrayToMap"])(this.state.userTasks, function (ut) { return ut.task && ut.task.length > 0 ?
            ut.task.map(function (t) { return t.id; })[0] : // course-builder tasks looked up by id
            ut.siteVisionPageId ? ut.siteVisionPageId : // non-course-builder tasks
                ut.url; });
        var confirmations = this.state.confirmations;
        var weekPlannerWeek = moment__WEBPACK_IMPORTED_MODULE_3___default()(this.state.weekDate).week();
        var currentWeek = moment__WEBPACK_IMPORTED_MODULE_3___default()().week();
        var forWeekString = weekPlannerWeek === currentWeek ? "" :
            weekPlannerWeek === currentWeek + 1 ? intl.formatMessage({ id: "taskList.nextWeekTask", defaultMessage: "fr nsta vecka (v{week})" }, { week: weekPlannerWeek }) :
                weekPlannerWeek === currentWeek - 1 ? intl.formatMessage({ id: "taskList.lastWeekTask", defaultMessage: "fr frra veckan (v{week})" }, { week: weekPlannerWeek }) :
                    intl.formatMessage({ id: "taskList.currentWeekTask", defaultMessage: "fr vecka {week}" }, { week: weekPlannerWeek });
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "taskContainer" }, learningTasks.map(function (learningTask, idx) {
            var taskLookupId = learningTask.id;
            var userTask = userTasks[taskLookupId] || { $meta: 'deleted' }; // No exist = $meta: 'deleted'
            var isWorking = userTask.$meta === 'adding' || userTask.$meta === 'deleting';
            var selected = userTask.$meta !== 'deleted' && userTask.$meta !== 'deleting';
            var describedAction = selected ?
                intl.formatMessage({ id: "taskList.removeTaskFromWeeklyPlanning", defaultMessage: "Ta bort uppgiften frn egen veckoplanering {week}" }, { week: forWeekString }) :
                intl.formatMessage({ id: "taskList.addTaskToWeeklyPlanning", defaultMessage: "Lgg till uppgiften i egen veckoplanering {week}" }, { week: forWeekString });
            var confirmationVisible = confirmations.some(function (tid) { return taskLookupId === tid; });
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: learningTask.id },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: taskLookupId, className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "selectedBox" + (selected ? ' selected' : ''), style: isWorking ? { opacity: 0.5 } : {}, onClick: function () { return !isWorking && weekPlannerWeek === currentWeek ?
                                _this.toggleTask(learningTask) :
                                confirmationVisible ?
                                    _this.setState({ confirmations: confirmations.filter(function (tid) { return tid !== taskLookupId; }) }) :
                                    _this.setState({ confirmations: tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](confirmations).concat(taskLookupId) }); }, title: describedAction })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: learningTask.url }, learningTask.name))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_confirmation__WEBPACK_IMPORTED_MODULE_7__["Confirmation"], { visible: confirmationVisible, text: describedAction, onConfirm: function () {
                        _this.toggleTask(learningTask);
                        _this.setState({ confirmations: confirmations.filter(function (tid) { return tid !== taskLookupId; }) });
                    }, onCancel: function () {
                        _this.setState({ confirmations: confirmations.filter(function (tid) { return tid !== taskLookupId; }) });
                    } }));
        }));
    };
    TaskList.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_8__["LanguageContext"];
    return TaskList;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/kg-termplanner/kg-termplanner-self.tsx":
/*!***************************************************************!*\
  !*** ./src/components/kg-termplanner/kg-termplanner-self.tsx ***!
  \***************************************************************/
/*! exports provided: KGTermPlannerSelf */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KGTermPlannerSelf", function() { return KGTermPlannerSelf; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _kg_termplanner__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./kg-termplanner */ "./src/components/kg-termplanner/kg-termplanner.tsx");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../globals/KED.env */ "./src/globals/KED.env.ts");



function KGTermPlannerSelf() {
    return react__WEBPACK_IMPORTED_MODULE_0__["createElement"](_kg_termplanner__WEBPACK_IMPORTED_MODULE_1__["KGTermPlanner"], { env: _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"], tutored: false });
}


/***/ }),

/***/ "./src/components/kg-termplanner/kg-termplanner-tutored.tsx":
/*!******************************************************************!*\
  !*** ./src/components/kg-termplanner/kg-termplanner-tutored.tsx ***!
  \******************************************************************/
/*! exports provided: KGTermPlannerTutored */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KGTermPlannerTutored", function() { return KGTermPlannerTutored; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _kg_termplanner__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./kg-termplanner */ "./src/components/kg-termplanner/kg-termplanner.tsx");
/* harmony import */ var _utility_components_tutorable_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utility-components/tutorable-component */ "./src/components/utility-components/tutorable-component.tsx");



function KGTermPlannerTutored() {
    return react__WEBPACK_IMPORTED_MODULE_0__["createElement"](_utility_components_tutorable_component__WEBPACK_IMPORTED_MODULE_2__["TutorableComponent"], { tutored: true, createComponent: function (env) {
            return react__WEBPACK_IMPORTED_MODULE_0__["createElement"](_kg_termplanner__WEBPACK_IMPORTED_MODULE_1__["KGTermPlanner"], { key: env.currentUser.mail, env: env, tutored: true });
        } });
}


/***/ }),

/***/ "./src/components/kg-termplanner/kg-termplanner.tsx":
/*!**********************************************************!*\
  !*** ./src/components/kg-termplanner/kg-termplanner.tsx ***!
  \**********************************************************/
/*! exports provided: KGTermPlanner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KGTermPlanner", function() { return KGTermPlanner; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _apis_edsclient__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../apis/edsclient */ "./src/apis/edsclient.ts");
/* harmony import */ var _utils_school_moment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/school-moment */ "./src/utils/school-moment.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../course-builder/sub-components/spinner */ "./src/components/course-builder/sub-components/spinner.tsx");
/* harmony import */ var _utility_components_dialogs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utility-components/dialogs */ "./src/components/utility-components/dialogs.tsx");
/* harmony import */ var _week_note_dialog__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./week-note-dialog */ "./src/components/kg-termplanner/week-note-dialog.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _utils_weekutil__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../utils/weekutil */ "./src/utils/weekutil.ts");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _ks_termplanner_tutor_dialog__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../ks-termplanner/tutor-dialog */ "./src/components/ks-termplanner/tutor-dialog.tsx");
/* harmony import */ var _features__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../features */ "./src/features/index.ts");













var KGTermPlanner = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](KGTermPlanner, _super);
    function KGTermPlanner(props) {
        var _this = _super.call(this, props) || this;
        var now = new Date();
        _this.state = {
            now: now,
            courses: [],
            weekPlans: [],
            isLoadingCourses: true,
            isLoadingWeekPlans: true,
            dialogs: []
            //goals: []
        };
        _this.updateWeekPlans = _this.updateWeekPlans.bind(_this);
        return _this;
    }
    KGTermPlanner.prototype.componentDidMount = function () {
        this.loadEDSCourses();
        this.props.env.kgTermPlannerRepo.mem.subscribe(this.updateWeekPlans);
    };
    KGTermPlanner.prototype.componentWillUnmount = function () {
        this.props.env.kgTermPlannerRepo.mem.unsubscribe(this.updateWeekPlans);
    };
    KGTermPlanner.prototype.updateWeekPlans = function (weekPlans) {
        this.setState({ weekPlans: weekPlans, isLoadingWeekPlans: false });
    };
    KGTermPlanner.prototype.loadEDSCourses = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var schoolMoment, periodName, courses, _a;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _b.trys.push([0, , 2, 3]);
                        schoolMoment = Object(_utils_school_moment__WEBPACK_IMPORTED_MODULE_3__["getSchoolMoment"])(moment__WEBPACK_IMPORTED_MODULE_4___default()(this.state.now));
                        periodName = new _apis_edsclient__WEBPACK_IMPORTED_MODULE_2__["EDSPeriod"](schoolMoment).period;
                        _a = _utils_utils__WEBPACK_IMPORTED_MODULE_8__["distinct"];
                        return [4 /*yield*/, this.props.env.edsClient.getActiveCourses({ periodName: periodName })];
                    case 1:
                        courses = _a.apply(void 0, [_b.sent(), function (course) { return course.name; }]);
                        //console.log("courses:" + JSON.stringify(courses, null, 2));
                        this.setState({ courses: courses });
                        return [3 /*break*/, 3];
                    case 2:
                        this.setState({ isLoadingCourses: false });
                        return [7 /*endfinally*/];
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    KGTermPlanner.prototype.onNoteClick = function (weekNumber, weekDate, courseName, weekPlan, note) {
        var _this = this;
        this.openDialog(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_week_note_dialog__WEBPACK_IMPORTED_MODULE_7__["WeekNoteDialog"], { weekNumber: weekNumber, weekDate: weekDate, courseName: courseName, weekPlan: weekPlan, note: note, env: this.props.env, closeDialog: function () { return _this.closeDialog(); } }));
    };
    /**
   *
   * @param weekNumber
   * @param comment
   *
   * Add a comment from tutor
   */
    KGTermPlanner.prototype.onTutorClick = function (tutorNote, weekNumber) {
        var _this = this;
        this.openDialog(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_ks_termplanner_tutor_dialog__WEBPACK_IMPORTED_MODULE_11__["TutorDialog"], { weekNumber: weekNumber, comment: tutorNote.value, updateData: function (newValue) { return _this.updateTutorNoteField(tutorNote, newValue); }, deleteNoteData: function () { return _this.deleteTutorNoteField(tutorNote.id); }, closeDialog: function () { return _this.closeDialog(); } }));
    };
    KGTermPlanner.prototype.deleteTutorNoteField = function (noteId) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var showError_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 2, , 3]);
                        return [4 /*yield*/, this.props.env.kgTermPlannerRepo.delete([noteId])];
                    case 1:
                        _a.sent();
                        return [3 /*break*/, 3];
                    case 2:
                        showError_1 = _a.sent();
                        return [3 /*break*/, 3];
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    KGTermPlanner.prototype.updateTutorNoteField = function (tutorNote, newValue) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var oldValue, showError_2;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        oldValue = (tutorNote && tutorNote.value) || "";
                        if (oldValue === newValue)
                            return [2 /*return*/];
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 3, , 4]);
                        tutorNote.value = newValue;
                        //set document ACL
                        tutorNote.acl = [
                            new kedbackend_client__WEBPACK_IMPORTED_MODULE_10__["DocumentAccess"]("tutorFor", this.props.env.currentUser.mail, "S").toString(),
                            new kedbackend_client__WEBPACK_IMPORTED_MODULE_10__["DocumentAccess"]("email", this.props.env.currentUser.mail, "R").toString(),
                        ];
                        return [4 /*yield*/, this.props.env.kgTermPlannerRepo.upsert(tutorNote, function (note) { return note.value = newValue; })];
                    case 2: return [2 /*return*/, _a.sent()];
                    case 3:
                        showError_2 = _a.sent();
                        return [3 /*break*/, 4];
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    KGTermPlanner.prototype.openDialog = function (dialog) {
        this.setState({ dialogs: tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](this.state.dialogs, [dialog]) });
    };
    KGTermPlanner.prototype.closeDialog = function () {
        this.setState({ dialogs: this.state.dialogs.slice(0, this.state.dialogs.length - 1) });
    };
    KGTermPlanner.prototype.render = function () {
        var _this = this;
        var _a = this.state, courses = _a.courses, now = _a.now, isLoadingCourses = _a.isLoadingCourses, isLoadingWeekPlans = _a.isLoadingWeekPlans, weekPlans = _a.weekPlans, dialogs = _a.dialogs;
        var isLoading = isLoadingCourses || isLoadingWeekPlans;
        var weeks = [];
        var tutorNotes = [];
        var schoolMoment = Object(_utils_school_moment__WEBPACK_IMPORTED_MODULE_3__["getSchoolMoment"])(moment__WEBPACK_IMPORTED_MODULE_4___default()(now));
        var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](Object(_utils_school_moment__WEBPACK_IMPORTED_MODULE_3__["getTermStarEndDate"])(now, schoolMoment.term === 'AT'), 2), termStart = _b[0], termEnd = _b[1];
        var _c = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](Object(_utils_school_moment__WEBPACK_IMPORTED_MODULE_3__["getFirstAndLastWeekOfTerm"])(schoolMoment.term), 2), firstWeek = _c[0], lastWeek = _c[1];
        var showKgTutorCommentField = _features__WEBPACK_IMPORTED_MODULE_12__["features"].kgTutorComment;
        var currentWeekPlans = weekPlans.filter(function (x) { return !x.type; });
        var currentTutorNotes = weekPlans.filter(function (x) { return x.type === 'tutor-note'; });
        var _loop_1 = function (weekMoment) {
            var weekNumber = weekMoment.week();
            var weekYear = weekMoment.year();
            var kedWeek = Object(_utils_weekutil__WEBPACK_IMPORTED_MODULE_9__["KEDWeek"])(weekYear, weekNumber);
            if (weekNumber >= firstWeek && weekNumber <= lastWeek) {
                var weekPlan = currentWeekPlans.filter(function (wp) {
                    return wp.dateTime >= kedWeek.notBefore &&
                        wp.dateTime <= kedWeek.notAfter;
                })[0];
                var tutorNote = currentTutorNotes.filter(function (wp) {
                    return wp.dateTime >= kedWeek.notBefore &&
                        wp.dateTime <= kedWeek.notAfter;
                })[0];
                var startOfWeek = weekMoment.clone().startOf('week').valueOf();
                weeks.push({
                    weekNumber: weekNumber,
                    weekDate: startOfWeek,
                    weekPlan: weekPlan
                });
                tutorNotes.push({
                    weekNumber: weekNumber,
                    tutorValue: tutorNote || { value: '', dateTime: startOfWeek, id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_10__["createUUID"])(), type: 'tutor-note' }
                });
            }
        };
        for (var weekMoment = termStart.clone(); weekMoment.valueOf() < termEnd.valueOf(); weekMoment = weekMoment.clone().add(1, 'week').startOf('week')) {
            _loop_1(weekMoment);
        }
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "ked_boxed" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h4", null, "Terminsplanering"),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
            isLoading ?
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_5__["Spinner"], null) : courses.length === 0 ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null, "Terminsplaneraren aktiveras n\u00E4r du skrivits in p\u00E5 dina kurser") :
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("table", { className: "termplanner-table zebra" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("thead", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "Vecka"),
                            courses.map(function (c, idx) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { key: idx, className: "kgCourseHeader" }, c.name); }),
                            showKgTutorCommentField && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { className: "tutorHeader" }))),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tbody", null, weeks.map(function (w, idx) {
                        var isCurrentWeek = w.weekNumber === moment__WEBPACK_IMPORTED_MODULE_4___default()().week();
                        var noteValue = tutorNotes && tutorNotes.find(function (tn) { return tn.weekNumber === w.weekNumber; });
                        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", { key: idx, className: isCurrentWeek ? "currentWeek" : "" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null, w.weekNumber),
                            courses.map(function (c, idx) {
                                var note = w.weekPlan && w.weekPlan.plans[c.name];
                                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { key: idx, className: note ? "courseNote note-color-" + note.color : "courseNote", "data-tooltip": note && note.description, title: note && note.description, onClick: function () { return _this.onNoteClick(w.weekNumber, w.weekDate, c.name, w.weekPlan, note); } }, note ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fas fa-align-center" }) : '');
                            }),
                            showKgTutorCommentField && (_this.props.tutored ?
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { key: idx, onClick: function () { return _this.onTutorClick(noteValue.tutorValue, w.weekNumber); }, className: "tutorCell" }, noteValue.tutorValue.value ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: idx, "data-tooltip": noteValue.tutorValue.value },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fas fa-comment-dots" })) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: idx },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fas fa-comment-medical" })))
                                :
                                    noteValue.tutorValue.value ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: "tutorCell" },
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { "data-tooltip": noteValue.tutorValue.value },
                                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "far fa-comment-dots" }))) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null)));
                    })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tfoot", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { key: "points" }, "Po\u00E4ng"),
                            courses.map(function (c, idx) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { key: idx, className: "stepCell" }, c.credits); })),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "Betygsm\u00E5l"),
                            courses.map(function (c, idx) {
                                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { key: idx, className: "stepCell" }, c.periodGoalGrade);
                            })))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_dialogs__WEBPACK_IMPORTED_MODULE_6__["Dialogs"], { dialogs: dialogs, popDialog: function () { return _this.setState({ dialogs: dialogs.slice(0, dialogs.length - 1) }); } }));
    };
    return KGTermPlanner;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/kg-termplanner/week-note-dialog.tsx":
/*!************************************************************!*\
  !*** ./src/components/kg-termplanner/week-note-dialog.tsx ***!
  \************************************************************/
/*! exports provided: WeekNoteDialog */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WeekNoteDialog", function() { return WeekNoteDialog; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");



var WeekNoteDialog = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](WeekNoteDialog, _super);
    function WeekNoteDialog(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            description: props.note ? props.note.description : '',
            color: props.note ? props.note.color : 'yellow'
        };
        return _this;
    }
    WeekNoteDialog.prototype.delete = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, weekNumber, weekDate, courseName, weekPlan, note, closeDialog, env, _b, description, color;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _a = this.props, weekNumber = _a.weekNumber, weekDate = _a.weekDate, courseName = _a.courseName, weekPlan = _a.weekPlan, note = _a.note, closeDialog = _a.closeDialog, env = _a.env;
                        _b = this.state, description = _b.description, color = _b.color;
                        closeDialog();
                        if (!(Object.keys(weekPlan.plans).length === 1)) return [3 /*break*/, 2];
                        return [4 /*yield*/, env.kgTermPlannerRepo.delete([weekPlan.id])];
                    case 1:
                        _c.sent();
                        return [3 /*break*/, 4];
                    case 2: return [4 /*yield*/, env.kgTermPlannerRepo.update([weekPlan], function (wp) {
                            delete wp.plans[courseName];
                        })];
                    case 3:
                        _c.sent();
                        _c.label = 4;
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    WeekNoteDialog.prototype.save = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, weekNumber, weekDate, courseName, weekPlan, note, closeDialog, env, _b, description, color, plans;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _a = this.props, weekNumber = _a.weekNumber, weekDate = _a.weekDate, courseName = _a.courseName, weekPlan = _a.weekPlan, note = _a.note, closeDialog = _a.closeDialog, env = _a.env;
                        _b = this.state, description = _b.description, color = _b.color;
                        closeDialog();
                        if (description.length == 0) {
                            return [2 /*return*/];
                        }
                        if (!weekPlan) return [3 /*break*/, 2];
                        return [4 /*yield*/, env.kgTermPlannerRepo.update([weekPlan], function (wp) { return wp.plans[courseName] = { description: description, color: color }; })];
                    case 1:
                        _c.sent();
                        return [3 /*break*/, 4];
                    case 2:
                        plans = {};
                        plans[courseName] = { description: description, color: color };
                        return [4 /*yield*/, env.kgTermPlannerRepo.insert([{
                                    id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_2__["createUUID"])(),
                                    dateTime: weekDate,
                                    plans: plans
                                }])];
                    case 3:
                        _c.sent();
                        _c.label = 4;
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    WeekNoteDialog.prototype.render = function () {
        var _this = this;
        var _a = this.props, weekNumber = _a.weekNumber, courseName = _a.courseName, weekPlan = _a.weekPlan, note = _a.note, env = _a.env;
        var _b = this.state, description = _b.description, color = _b.color;
        var readOnly = env.tutored;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null,
                    "H\u00E4ndelse f\u00F6r vecka ",
                    weekNumber,
                    " och ",
                    courseName),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-table" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null, "Beskrivning:"),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "fullWidth" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("textarea", { autoFocus: true, value: description, disabled: readOnly, onChange: function (ev) { return _this.setState({ description: ev.target.value }); } }))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-table" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null, "F\u00E4rg:"),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("select", { value: color, disabled: readOnly, onChange: function (ev) { return _this.setState({ color: ev.target.value }); } },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("option", { value: "yellow" }, "Gul"),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("option", { value: "yellowLight" }, "Ljusgul"),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("option", { value: "cyan" }, "Gr\u00F6n"),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("option", { value: "cyanLight" }, "Ljusgr\u00F6n"),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("option", { value: "purple" }, "Lila"),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("option", { value: "purpleLight" }, "Ljuslila"),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("option", { value: "red" }, "R\u00F6d"),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("option", { value: "redLight" }, "Rosa"))))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null, readOnly ?
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { tabIndex: 1, className: "btn btn-large btn-default", onClick: function () { return _this.props.closeDialog(); } }, "Avbryt") :
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { tabIndex: 1, className: "btn btn-large btn-default", onClick: function () { return _this.save(); } }, "Spara"),
                    note && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { tabIndex: 1, className: "btn btn-warning btn-large pull-right", onClick: function () { return _this.delete(); } }, "Ta bort"))));
    };
    return WeekNoteDialog;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/ks-goals/future-abilities-table.tsx":
/*!************************************************************!*\
  !*** ./src/components/ks-goals/future-abilities-table.tsx ***!
  \************************************************************/
/*! exports provided: FutureAbilitiesTable */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FutureAbilitiesTable", function() { return FutureAbilitiesTable; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _future_abilities_viewmodel__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./future-abilities-viewmodel */ "./src/components/ks-goals/future-abilities-viewmodel.ts");




var FutureAbilitiesTable = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](FutureAbilitiesTable, _super);
    function FutureAbilitiesTable(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            loading: false,
            data: [],
            error: null
        };
        return _this;
    }
    FutureAbilitiesTable.prototype.componentWillMount = function () {
        this.load();
    };
    FutureAbilitiesTable.prototype.load = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var data, error_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.setState({ loading: true });
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 3, , 4]);
                        return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].edsClient.getStudentFutureAbilities()];
                    case 2:
                        data = _a.sent();
                        this.setState({ data: data });
                        return [3 /*break*/, 4];
                    case 3:
                        error_1 = _a.sent();
                        this.setState({ error: error_1 });
                        return [3 /*break*/, 4];
                    case 4:
                        this.setState({ loading: false });
                        return [2 /*return*/];
                }
            });
        });
    };
    FutureAbilitiesTable.prototype.render = function () {
        var viewModel = new _future_abilities_viewmodel__WEBPACK_IMPORTED_MODULE_3__["FutureAbilitiesViewModel"](this.state.data);
        var columnHeaders = viewModel.columnHeaders, vtHts = viewModel.vtHts, capabRows = viewModel.capabRows;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h5", null, "Framtidsf\u00F6rm\u00E5gor"),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "partialEditStudyPlanViewMode" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("table", { style: { width: '100%' }, className: "smallFont" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("thead", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null, columnHeaders.map(function (_a, i) {
                            var name = _a.name, type = _a.type;
                            return type === 'header' ?
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { key: i, rowSpan: 2 }, name) :
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { key: i, colSpan: 2 }, name);
                        })),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", { className: "header" }, vtHts.map(function (vtHt, i) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { key: i }, vtHt); }))),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tbody", null, capabRows.map(function (row, i) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", { key: i, className: (Math.floor(i / 3) % 2) && 'tableOdd' }, row.map(function (col, i) { return col.type === 'ability' ?
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { key: i, rowSpan: 3, className: "goalsSubject" }, col.name) :
                        col.type === 'capability' ?
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { key: i, className: "goalsSubject" }, col.name) :
                            col.selected ?
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { key: i, className: "edsSelected" },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "markedItem" })) :
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { key: i }); })); })))));
    };
    return FutureAbilitiesTable;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/ks-goals/future-abilities-viewmodel.ts":
/*!***************************************************************!*\
  !*** ./src/components/ks-goals/future-abilities-viewmodel.ts ***!
  \***************************************************************/
/*! exports provided: FutureAbilitiesViewModel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FutureAbilitiesViewModel", function() { return FutureAbilitiesViewModel; });
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/utils */ "./src/utils/utils.ts");

var FutureAbilitiesViewModel = /** @class */ (function () {
    function FutureAbilitiesViewModel(data) {
        // Will build the total years
        var formNames = {};
        data.forEach(function (a) { return a.capabilities.forEach(function (c) { return formNames[c.formName] = true; }); });
        var years = Object.keys(formNames);
        // columnHeaders
        this.columnHeaders = [{
                name: "Framtidsfrmga",
                type: "header"
            }, {
                name: "Omrde",
                type: "header"
            }].concat(years.map(function (year) { return ({
            name: year,
            type: 'year'
        }); }));
        // vtHts
        this.vtHts = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_0__["flatten"])(years.map(function (year) { return ["HT", "VT"]; }));
        // cababRows
        var rows = [];
        data.forEach(function (a) {
            var row = [{ type: 'ability', name: a.abilityName }];
            var addedCapabs = {};
            a.capabilities.forEach(function (c) {
                var cells = [
                    { type: 'term', selected: c.htHasValue !== false },
                    { type: 'term', selected: c.vtHasValue !== false }
                ];
                //if (c.htHasValue || c.vtHasValue) debugger;
                if (!addedCapabs[c.capabilityName]) {
                    //if (!isFirstCapability) rows.push(row);
                    if (row.length > 1) {
                        rows.push(row);
                        row = [];
                    }
                    addedCapabs[c.capabilityName] = true;
                    row.push({ type: 'capability', name: c.capabilityName });
                    cells.forEach(function (cell) { return row.push(cell); });
                }
                else if (row) {
                    //addedCapabs[c.capabilityName].concat(cells);
                    cells.forEach(function (cell) { return row.push(cell); });
                }
            });
            if (row)
                rows.push(row);
        });
        this.capabRows = rows;
    }
    return FutureAbilitiesViewModel;
}());



/***/ }),

/***/ "./src/components/ks-goals/goals-viewmodel.ts":
/*!****************************************************!*\
  !*** ./src/components/ks-goals/goals-viewmodel.ts ***!
  \****************************************************/
/*! exports provided: ViewModel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ViewModel", function() { return ViewModel; });
/* harmony import */ var _apis_edsclient__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../apis/edsclient */ "./src/apis/edsclient.ts");

var ViewModel = /** @class */ (function () {
    function ViewModel(studyPlans) {
        this.subjects = studyPlans.map(function (sp) {
            var periodGoals = sp.periodGoals
                .map(function (g) { return ({ period: new _apis_edsclient__WEBPACK_IMPORTED_MODULE_0__["EDSPeriod"](g.periodName), goal: g.gradeName }); });
            return {
                name: sp.courseUnitName,
                atGoal: periodGoals.filter(function (_a) {
                    var period = _a.period;
                    return period.term === 'AT';
                }).map(function (_a) {
                    var goal = _a.goal;
                    return goal;
                })[0],
                stGoal: periodGoals.filter(function (_a) {
                    var period = _a.period;
                    return period.term === 'ST';
                }).map(function (_a) {
                    var goal = _a.goal;
                    return goal;
                })[0],
                finalGoal: sp.finalGoalGrade,
                strategies: sp.strategyText
            };
        });
    }
    return ViewModel;
}());



/***/ }),

/***/ "./src/components/ks-goals/goals.tsx":
/*!*******************************************!*\
  !*** ./src/components/ks-goals/goals.tsx ***!
  \*******************************************/
/*! exports provided: KSGoals */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KSGoals", function() { return KSGoals; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _goals_viewmodel__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./goals-viewmodel */ "./src/components/ks-goals/goals-viewmodel.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _future_abilities_table__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./future-abilities-table */ "./src/components/ks-goals/future-abilities-table.tsx");






var KSGoals = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](KSGoals, _super);
    function KSGoals(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            loadingStudyPlans: false,
            studyPlans: [],
            error: null
        };
        return _this;
    }
    KSGoals.prototype.componentWillMount = function () {
        this.load();
    };
    KSGoals.prototype.load = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var studyPlans, error_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.setState({ loadingStudyPlans: true });
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 3, , 4]);
                        return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__["default"].edsClient.getStudentGoals()];
                    case 2:
                        studyPlans = _a.sent();
                        this.setState({ studyPlans: studyPlans });
                        return [3 /*break*/, 4];
                    case 3:
                        error_1 = _a.sent();
                        this.setState({ error: error_1 });
                        return [3 /*break*/, 4];
                    case 4:
                        this.setState({ loadingStudyPlans: false });
                        return [2 /*return*/];
                }
            });
        });
    };
    KSGoals.prototype.render = function () {
        var viewModel = new _goals_viewmodel__WEBPACK_IMPORTED_MODULE_3__["ViewModel"](this.state.studyPlans);
        var showTermGoals = ('' + _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__["default"].currentUser.schoolType).toLowerCase() !== "gymnasium";
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "ked_boxed" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h4", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["M\u00E5l"], ["M\u00E5l"])))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("table", { className: "smallFont" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("thead", null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4mne"], ["\u00C4mne"])))),
                        showTermGoals && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["HT"], ["HT"])))),
                        showTermGoals && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["VT"], ["VT"])))),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Slutm\u00E5l"], ["Slutm\u00E5l"])))),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_6 || (templateObject_6 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Strategier"], ["Strategier"])))))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tbody", null, viewModel.subjects.map(function (s, i) {
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", { key: s.name, className: i % 2 && "tableOdd" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: "goalsSubject" }, s.name),
                        showTermGoals && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: "goalsTerm" }, s.atGoal),
                        showTermGoals && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: "goalsTerm" }, s.stGoal),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: "goalsEnd" }, s.finalGoal),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null, s.strategies));
                }))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "divider" }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_future_abilities_table__WEBPACK_IMPORTED_MODULE_5__["FutureAbilitiesTable"], null));
    };
    return KSGoals;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6;


/***/ }),

/***/ "./src/components/ks-termplanner/ks-termplanner-tutored.tsx":
/*!******************************************************************!*\
  !*** ./src/components/ks-termplanner/ks-termplanner-tutored.tsx ***!
  \******************************************************************/
/*! exports provided: KSTermPlannerTutored */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KSTermPlannerTutored", function() { return KSTermPlannerTutored; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _termplanner__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./termplanner */ "./src/components/ks-termplanner/termplanner.tsx");
/* harmony import */ var _utility_components_tutorable_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utility-components/tutorable-component */ "./src/components/utility-components/tutorable-component.tsx");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");




function KSTermPlannerTutored(props) {
    var intl = props.intl;
    return react__WEBPACK_IMPORTED_MODULE_0__["createElement"](_utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_3__["LanguageContext"].Provider, { value: { intl: intl } },
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"](_utility_components_tutorable_component__WEBPACK_IMPORTED_MODULE_2__["TutorableComponent"], { tutored: true, createComponent: function (env) {
                return react__WEBPACK_IMPORTED_MODULE_0__["createElement"](_termplanner__WEBPACK_IMPORTED_MODULE_1__["KSTermPlanner"], { key: env.currentUser.mail, env: env, tutored: true, initialDate: new Date() });
            } }));
}


/***/ }),

/***/ "./src/components/ks-termplanner/termplanner-utils.ts":
/*!************************************************************!*\
  !*** ./src/components/ks-termplanner/termplanner-utils.ts ***!
  \************************************************************/
/*! exports provided: getFirstAndLastWeek, LAST_STEP_SPRING, LAST_STEP_AUTUMN, findCourseFromColumnHeader, getColumnsHeader, getColumnHeaderFromCourse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFirstAndLastWeek", function() { return getFirstAndLastWeek; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LAST_STEP_SPRING", function() { return LAST_STEP_SPRING; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LAST_STEP_AUTUMN", function() { return LAST_STEP_AUTUMN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "findCourseFromColumnHeader", function() { return findCourseFromColumnHeader; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getColumnsHeader", function() { return getColumnsHeader; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getColumnHeaderFromCourse", function() { return getColumnHeaderFromCourse; });
function getFirstAndLastWeek(term) {
    return term === 'AT' ?
        [33, 50] : // This is a guess! Need data! Should be possible to get from skola24?
        [2, 23]; // This is a guess! Need data!
}
var LAST_STEP_SPRING = 28; // Week 28 is in summer. Use it as placeholder for "last step"
var LAST_STEP_AUTUMN = 52; // Week must be valid. Use it as placeholder for "last step"
/**
 * Note that this function is tightly coupled to the swedish school.
 */
function findCourseFromColumnHeader(courses, columnHeader) {
    switch (columnHeader) {
        case 'M.spr': return courses
            .filter(function (course) { return course.shortName !== 'MA' && course.shortName.startsWith('M'); })[0] || null;
        case 'Ma': return courses.filter(function (c) { return c.shortName === "MA"; })[0] || null;
        case 'Sv/SvA': return courses.filter(function (c) { return c.shortName.startsWith("SV"); })[0] || null;
        case 'Eng': return courses.filter(function (c) { return c.shortName === "EN"; })[0] || null;
    }
    return null;
}
function getColumnsHeader(locale) {
    switch (locale) {
        case 'sv':
            return ['M.spr', 'Ma', 'Sv/SvA', 'Eng'];
        case 'en_sin':
            return ['MFL', 'Ma', 'Hi', 'Eng', 'Yoga', 'ICT'];
        case 'en_nin':
            return ['MFL', 'Ma', 'Hi', 'Eng', 'Yoga', 'ICT'];
    }
}
/**
 * Note that this function is tightly coupled to the swedish school.
 */
function getColumnHeaderFromCourse(course) {
    var shortName = course.shortName;
    if (shortName === "MA")
        return 'Ma';
    if (shortName === "EN")
        return 'Eng';
    if (shortName.startsWith("SV"))
        return 'Sv/SvA';
    if (shortName.startsWith("M2"))
        return 'M.spr';
    return null;
}


/***/ }),

/***/ "./src/components/ks-termplanner/termplanner.tsx":
/*!*******************************************************!*\
  !*** ./src/components/ks-termplanner/termplanner.tsx ***!
  \*******************************************************/
/*! exports provided: KSTermPlanner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KSTermPlanner", function() { return KSTermPlanner; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_generic_school_term__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/generic-school-term */ "./src/utils/generic-school-term.ts");
/* harmony import */ var _viewmodel__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./viewmodel */ "./src/components/ks-termplanner/viewmodel.ts");
/* harmony import */ var _utility_components_content_editable_field__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utility-components/content-editable-field */ "./src/components/utility-components/content-editable-field.tsx");
/* harmony import */ var _repos_ks_termplanner_repo_instance__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../repos/ks-termplanner-repo-instance */ "./src/repos/ks-termplanner-repo-instance.ts");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var _course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../course-builder/sub-components/spinner */ "./src/components/course-builder/sub-components/spinner.tsx");
/* harmony import */ var _charts_doughnut__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../charts/doughnut */ "./src/components/charts/doughnut.tsx");
/* harmony import */ var _utils_generic_school_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../utils/generic-school-utils */ "./src/utils/generic-school-utils.ts");
/* harmony import */ var _utility_components_dialogs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../utility-components/dialogs */ "./src/components/utility-components/dialogs.tsx");
/* harmony import */ var _tutor_dialog__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./tutor-dialog */ "./src/components/ks-termplanner/tutor-dialog.tsx");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _features__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../features */ "./src/features/index.ts");
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");

















var KSTermPlanner = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](KSTermPlanner, _super);
    function KSTermPlanner(props) {
        var _this = _super.call(this, props) || this;
        _this.unmounted = false;
        _this.state = {
            schoolTerm: new _utils_generic_school_term__WEBPACK_IMPORTED_MODULE_2__["GenericSchoolTerm"](props.initialDate),
            activeCourses: [],
            weekPlans: [],
            error: null,
            loadingActiveCourses: false,
            loadingWeekPlans: false,
            initialLoad: true,
            dialogs: []
        };
        _this.flowId = 1;
        _this.updateWeekPlans = _this.updateWeekPlans.bind(_this);
        return _this;
    }
    KSTermPlanner.prototype.componentDidMount = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.load(this.state.schoolTerm)];
                    case 1:
                        _a.sent();
                        if (!this.unmounted)
                            this.props.env.ksTermPlannerRepo.mem.subscribe(this.updateWeekPlans);
                        return [2 /*return*/];
                }
            });
        });
    };
    KSTermPlanner.prototype.componentWillUnmount = function () {
        this.unmounted = true;
        this.props.env.ksTermPlannerRepo.mem.unsubscribe(this.updateWeekPlans);
    };
    KSTermPlanner.prototype.updateWeekPlans = function (weekPlansOrTutorComm, error) {
        this.setState({ weekPlans: weekPlansOrTutorComm, loadingWeekPlans: false, error: error || null });
    };
    KSTermPlanner.prototype.load = function (schoolTerm) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var flowId, ksTermPlannerRepo, term, currentSchoolTerm, activeCourses, error_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        flowId = ++this.flowId;
                        this.fields = [];
                        this.setState({
                            //loadingWeekPlans: true,
                            loadingActiveCourses: true
                        });
                        ksTermPlannerRepo = this.props.env.ksTermPlannerRepo;
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 4, , 5]);
                        return [4 /*yield*/, this.loadAcademicYearDates(schoolTerm, _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_8__["default"].KED_SCHOOL_LOCALE)];
                    case 2:
                        term = _a.sent();
                        if (this.flowId !== flowId)
                            return [2 /*return*/];
                        currentSchoolTerm = new _utils_generic_school_term__WEBPACK_IMPORTED_MODULE_2__["GenericSchoolTerm"](schoolTerm.selectedDate, this.context.intl.locale, term);
                        //refresh saved data
                        ksTermPlannerRepo.refreshData(currentSchoolTerm.getTermStartAndEnd(true));
                        return [4 /*yield*/, this.loadActiveCourses(currentSchoolTerm)];
                    case 3:
                        activeCourses = _a.sent();
                        if (this.flowId !== flowId)
                            return [2 /*return*/];
                        this.setState({ schoolTerm: currentSchoolTerm, initialLoad: false, activeCourses: activeCourses, loadingActiveCourses: false });
                        return [3 /*break*/, 5];
                    case 4:
                        error_1 = _a.sent();
                        if (this.flowId !== flowId)
                            return [2 /*return*/];
                        this.setState({ schoolTerm: currentSchoolTerm, loadingActiveCourses: false, error: error_1 });
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    KSTermPlanner.prototype.loadAcademicYearDates = function (schoolTerm, schoolLocale) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var termDates;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.props.env.edsClient.getAcademicYearTerms(schoolLocale, schoolTerm.selectedDate)];
                    case 1:
                        termDates = _a.sent();
                        return [2 /*return*/, termDates];
                }
            });
        });
    };
    KSTermPlanner.prototype.loadActiveCourses = function (schoolTerm) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var periodName, activeCourses;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        periodName = schoolTerm.getEdsPeriodName();
                        return [4 /*yield*/, this.props.env.edsClient.getActiveCourses({ periodName: periodName })];
                    case 1:
                        activeCourses = _a.sent();
                        return [2 /*return*/, activeCourses];
                }
            });
        });
    };
    KSTermPlanner.prototype.updateCell = function (weekPlan, columnName, newValue) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var oldValue, error_2;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        oldValue = (weekPlan && weekPlan.cellValues[columnName]) || "";
                        if (oldValue === newValue)
                            return [2 /*return*/];
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 3, , 4]);
                        weekPlan.cellValues[columnName] = newValue;
                        return [4 /*yield*/, this.props.env.ksTermPlannerRepo.upsert(weekPlan, function (wp) { return wp.cellValues[columnName] = newValue; })];
                    case 2: return [2 /*return*/, _a.sent()];
                    case 3:
                        error_2 = _a.sent();
                        console.error(error_2.stack || error_2);
                        if (error_2.name === "http403") {
                            this.setState({ error: this.context.intl({ id: "common.changesNotSavedUnauthorized", defaultMessage: "ndringarna sparades inte p.g.a. otillrcklig behrighet." }) });
                        }
                        else {
                            this.setState({ error: this.context.intl({ id: "common.changesNotSavedErrorOccured", defaultMessage: "Fr tillfllet problem att spara data. Dina ndringar sparades inte." }) });
                        }
                        return [3 /*break*/, 4];
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    /**
     *
     * @param tutorNote
     * @param newValue
     *
     * Update tutor field value
     */
    KSTermPlanner.prototype.updateTutorNoteField = function (tutorNote, newValue) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var oldValue, showError_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        oldValue = (tutorNote && tutorNote.content) || "";
                        if (oldValue === newValue)
                            return [2 /*return*/];
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 3, , 4]);
                        tutorNote.content = newValue;
                        //set document ACL
                        tutorNote.acl = [
                            new kedbackend_client__WEBPACK_IMPORTED_MODULE_14__["DocumentAccess"]("tutorFor", this.props.env.currentUser.mail, "S").toString(),
                            new kedbackend_client__WEBPACK_IMPORTED_MODULE_14__["DocumentAccess"]("email", this.props.env.currentUser.mail, "R").toString(),
                        ];
                        return [4 /*yield*/, this.props.env.ksTermPlannerRepo.upsert(tutorNote, function (note) { return note.content = newValue; })];
                    case 2: return [2 /*return*/, _a.sent()];
                    case 3:
                        showError_1 = _a.sent();
                        return [3 /*break*/, 4];
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    /**
     * Delete tutor comment by Id
     * @param noteId
     */
    KSTermPlanner.prototype.deleteTutorNoteField = function (noteId) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var showError_2;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 2, , 3]);
                        return [4 /*yield*/, this.props.env.ksTermPlannerRepo.delete([noteId])];
                    case 1:
                        _a.sent();
                        return [3 /*break*/, 3];
                    case 2:
                        showError_2 = _a.sent();
                        return [3 /*break*/, 3];
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    /**
     * Add a comment from tutor
     * @param weekNumber
     * @param comment
     *
     */
    KSTermPlanner.prototype.onTutorClick = function (note) {
        var _this = this;
        this.openDialog(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_tutor_dialog__WEBPACK_IMPORTED_MODULE_13__["TutorDialog"], { weekNumber: note.weekNumber, comment: note.content, intl: this.context.intl, updateData: function (val) { return _this.updateTutorNoteField(note, val); }, deleteNoteData: function () { return _this.deleteTutorNoteField(note.id); }, closeDialog: function () { return _this.closeDialog(); } }));
    };
    KSTermPlanner.prototype.openDialog = function (dialog) {
        this.setState({ dialogs: tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](this.state.dialogs, [dialog]) });
    };
    KSTermPlanner.prototype.closeDialog = function () {
        this.setState({ dialogs: this.state.dialogs.slice(0, this.state.dialogs.length - 1) });
    };
    /**
     * Navigate to adjacent field depending on direction
     * @param pos current position in field-matrix
     * @param direction direction to take
     */
    KSTermPlanner.prototype.navigate = function (pos, direction) {
        var newpos = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, pos);
        var maxRows = this.fields.length;
        var maxCols = Math.max.apply(Math, tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](this.fields.map(function (row) { return row.length; })));
        switch (direction) {
            case 'up':
                newpos.row = Math.max(pos.row - 1, 0);
                break;
            case 'down':
                newpos.row = Math.min(pos.row + 1, maxRows);
                break;
            case 'left':
                newpos.col = Math.max(pos.col - 1, 0);
                break;
            case 'right':
                newpos.col = Math.min(pos.col + 1, maxCols);
                break;
        }
        if (this.fields[newpos.row] && this.fields[newpos.row][newpos.col])
            this.fields[newpos.row][newpos.col].myself.current.focus();
    };
    /**
     * Adds field to field-matrix to enable navigation in thee table
     * @param field current field
     * @param pos position of field in field-matrix
     */
    KSTermPlanner.prototype.addField = function (field, pos) {
        if (this.fields[pos.row] === undefined) {
            this.fields[pos.row] = [];
        }
        this.fields[pos.row][pos.col] = field;
    };
    /**
     * Creates the cell in the termplanner table
     * @param rowIndex index of row in table
     * @param colIndex index of column in table
     * @param subjectName name field
     * @param model --unused?
     * @param weekPlan current row from weekPlan
     * @param readOnlyCells if cells are readonly
     */
    KSTermPlanner.prototype.getTableCell = function (rowIndex, colIndex, subjectName, model, weekPlan, readOnlyCells, colType) {
        var _this = this;
        var completedSteps = model.completedSteps;
        var pos = { row: rowIndex, col: colIndex };
        if (colType === 'Tutor') {
            var tutoredWeekPlan = weekPlan;
            var content = tutoredWeekPlan.content;
            if (this.props.tutored) {
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { key: "tutornote" + colIndex, onClick: function () { return _this.onTutorClick(tutoredWeekPlan); }, className: "tutorCell" }, content ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: colIndex, "data-tooltip": content },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { key: colIndex, className: "fas fa-comment-dots" })) :
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: colIndex },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { key: colIndex, className: "fas fa-comment-medical" })));
            }
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { key: "tutornote" + colIndex, className: "tutorCell" }, content && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: colIndex, "data-tooltip": content },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { key: colIndex, className: "far fa-comment-dots" })));
        }
        else {
            var currentWeekPlan = weekPlan;
            var cellValues = currentWeekPlan.cellValues;
            // an outer td cell and inner div is used to regulate the height and allow for ellipses on text-overflow
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: this.getCellClassName(completedSteps, cellValues, subjectName) },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_content_editable_field__WEBPACK_IMPORTED_MODULE_4__["ContentEditableField"], { key: colIndex, ref: function (field) { return _this.addField(field, pos); }, text: cellValues[subjectName], tag: 'div', validateValue: colType == 'Step' ? /^\d*$/ : undefined, maxChars: colType == 'Comment' ? 100 : (colType == 'Course' ? 30 : 3), onChange: this.updateCell.bind(this, weekPlan, subjectName), readOnly: readOnlyCells || colType == 'Tutor', allowNavigation: true, onNavigate: this.navigate.bind(this, pos) }));
        }
    };
    /**
     * Get classname for cell
     * @param completedSteps
     * @param cellValues
     * @param subjectName
     */
    KSTermPlanner.prototype.getCellClassName = function (completedSteps, cellValues, subjectName) {
        var colType = this.getColumnType(subjectName);
        if (colType == 'Step' && completedSteps[subjectName + cellValues[subjectName]]) {
            return 'stepCell completedStep';
        }
        return colType.toLowerCase() + 'Cell';
    };
    /**
     * Creates the cell in the termplanner tables footer
     * @param rowIndex index of row in table
     * @param colIndex index of column in table
     * @param subjectName name field
     * @param model
     * @param readOnlyCells if cells are readonly
     */
    KSTermPlanner.prototype.getFooterCell = function (rowIndex, colIndex, subjectName, model, readOnlyCells) {
        var _this = this;
        var pos = { row: rowIndex, col: colIndex };
        var colType = this.getColumnType(subjectName);
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { className: colType + "Footer" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_content_editable_field__WEBPACK_IMPORTED_MODULE_4__["ContentEditableField"], { key: "stepFooterCell" + colIndex, ref: function (field) { return _this.addField(field, pos); }, tag: 'div', text: model.lastSteps.cellValues[subjectName], onChange: this.updateCell.bind(this, model.lastSteps, subjectName), readOnly: readOnlyCells, maxChars: 10, allowNavigation: true, onNavigate: this.navigate.bind(this, pos) }));
    };
    KSTermPlanner.prototype.getStepHeaderColumn = function (index, translatedColumnHeader, colType) {
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { key: "stepHeaderCell_" + index, className: colType.toLowerCase() + "Header" }, colType != 'Tutor' ? translatedColumnHeader : '');
    };
    KSTermPlanner.prototype.getColumnType = function (name) {
        var colTypes = { 'Kommentar': 'Comment', 'Kurs': 'Course', 'TutorComment': 'Tutor' };
        return colTypes.hasOwnProperty(name) ? colTypes[name] : 'Step';
    };
    KSTermPlanner.prototype.openCloseProgressCharts = function (value) {
        localStorage.setItem('TermplannerBoxCharts', value);
    };
    KSTermPlanner.prototype.getStepCharts = function (columns, subjectProgress) {
        var _this = this;
        var chartsBoxState = JSON.parse(localStorage.getItem('TermplannerBoxCharts'));
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_16__["OpenCloseBox"], { headerOpen: chartsBoxState, onOpenClose: this.openCloseProgressCharts, title: this.context.intl.formatMessage({ id: "termplanner.chartsBoxTitle", defaultMessage: "Framsteg diagram" }) },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "charts-container" }, columns.map(function (element) {
                if (!element.isFixed) {
                    var percentage = subjectProgress[element.name] ? subjectProgress[element.name].value : 0;
                    var errorMessage = subjectProgress[element.name].finalStepCompleted ? null :
                        _this.context.intl.formatMessage({ id: "termplanner.noFinalStepAvailable", defaultMessage: "Inget slutsteg tillgngligt" });
                    var translatedColumns = Object(_utils_generic_school_utils__WEBPACK_IMPORTED_MODULE_11__["getSchoolTranslatedSubjectFullname"])(_this.context.intl);
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: element.name, className: "chart-box" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h4", null, translatedColumns[element.name]),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: element.name, className: "inner-chart-box" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_charts_doughnut__WEBPACK_IMPORTED_MODULE_10__["Doughnut"], { key: element.name, percentage: percentage, errorMessage: errorMessage })));
                }
            })));
    };
    KSTermPlanner.prototype.getWeekTutorNote = function (weekPlansOrTutorNote, weekNumber) {
        return weekPlansOrTutorNote.find(function (x) { return x.type === "tutor-note" && x.weekNumber === weekNumber; });
    };
    KSTermPlanner.prototype.render = function () {
        var _this = this;
        var intl = this.context.intl;
        var showTutorCommentField = _features__WEBPACK_IMPORTED_MODULE_15__["features"].ksTutorComment;
        var showDoughnutCharts = _features__WEBPACK_IMPORTED_MODULE_15__["features"].termplannerCharts;
        var model = new _viewmodel__WEBPACK_IMPORTED_MODULE_3__["ViewModel"](this.state.weekPlans, this.state.activeCourses, this.state.schoolTerm, _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_8__["default"].KED_SCHOOL_LOCALE, intl, showTutorCommentField);
        var termGoals = model.termGoals, columns = model.columns;
        var tutored = this.props.tutored;
        var _a = this.state, loadingWeekPlans = _a.loadingWeekPlans, error = _a.error, dbWeekPlans = _a.weekPlans, dialogs = _a.dialogs;
        var failedInitialLoad = dbWeekPlans.length === 0 && !!error;
        var readOnlyCells = failedInitialLoad || tutored || loadingWeekPlans;
        var rowOffset = 0;
        var filteredWeekplans = model.weekPlansOrTutorNote.filter(function (x) { return !x.type; });
        return this.state.initialLoad ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_9__["Spinner"], null),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_7__["FormattedMessage"], { id: "termplanner.loadingTermplanner", defaultMessage: "V.g. v\u00E4nta medan terminsplaner laddas..." })) :
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "termplanner" +
                    (this.state.loadingWeekPlans ? " loading-weekplans" : "") +
                    (this.state.loadingActiveCourses ? " loading-courses" : "") },
                showDoughnutCharts && this.state.activeCourses.length > 0 && this.getStepCharts(columns, model.subjectProgress),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "ked_boxed" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "weekSelect" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, this.state.schoolTerm.toLocaleString(intl, true))),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn-group" },
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { className: "btn", onClick: function () {
                                        var term = _this.state.schoolTerm.prevTerm();
                                        _this.load(term);
                                    } },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-angle-left", "aria-hidden": "true" })),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { className: "btn", onClick: function () {
                                        var term = _this.state.schoolTerm.nextTerm();
                                        _this.load(term);
                                    } },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-angle-right", "aria-hidden": "true" }))))),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_7__["FormattedMessage"], { id: "termplanner.termPlanning", defaultMessage: "Terminsplanering", tagName: "h4" }),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("table", { className: "termplanner-table zebra" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("thead", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { className: "weekColumn" },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_7__["FormattedMessage"], { id: "termplanner.weekNumber", defaultMessage: "Vecka" })),
                                columns.map(function (elem, index) {
                                    var colType = _this.getColumnType(elem.name);
                                    return _this.getStepHeaderColumn(index, elem.translatedName, colType);
                                }))),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tbody", null, filteredWeekplans.filter(function (wk) { return wk.cellValues; }).map(function (weekPlan, rowIndex) {
                            rowOffset = rowIndex;
                            var weekNumber = weekPlan.weekNumber, academicWeekNumber = weekPlan.academicWeekNumber;
                            var week = weekNumber;
                            var isCurrentWeek = _this.state.schoolTerm.isCurrentWeek(weekPlan.dateTime);
                            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", { key: model.year + ':' + week, className: isCurrentWeek ? "currentWeek" : "" },
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null, intl.locale === "sv" ? week : academicWeekNumber),
                                columns.map(function (elem, colIndex) {
                                    var colType = _this.getColumnType(elem.name);
                                    var tutorValue = _this.getWeekTutorNote(model.weekPlansOrTutorNote, weekNumber);
                                    return colType === "Tutor" ?
                                        tutorValue && showTutorCommentField && _this.getTableCell(rowIndex, colIndex, elem.name, model, tutorValue, readOnlyCells, colType) :
                                        _this.getTableCell(rowIndex, colIndex, elem.name, model, weekPlan, readOnlyCells, colType);
                                }));
                        })),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tfoot", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null,
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_7__["FormattedMessage"], { id: "termplanner.finalStep", defaultMessage: "Slutsteg" })),
                                columns.filter(function (c) { return !c.isFixed; }).map(function (elem, index) {
                                    return _this.getFooterCell(rowOffset + 1, index, elem.name, model, readOnlyCells);
                                }),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "-"),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null),
                                showTutorCommentField && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null)),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null,
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_7__["FormattedMessage"], { id: "termplanner.edsGoalGrades", defaultMessage: "Terminsm\u00E5l" })),
                                columns.filter(function (c) { return !c.isFixed; }).map(function (elem, index) {
                                    var colType = _this.getColumnType(elem.name).toLowerCase();
                                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { key: "grades_" + index, className: colType + "Footer" }, termGoals[elem.name]);
                                }),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "-"),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, this.state.error && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { className: "error" }, '' + this.state.error)),
                                showTutorCommentField && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null))))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_dialogs__WEBPACK_IMPORTED_MODULE_12__["Dialogs"], { dialogs: dialogs, popDialog: function () { return _this.setState({ dialogs: dialogs.slice(0, dialogs.length - 1) }); } }));
    };
    KSTermPlanner.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_6__["LanguageContext"];
    return KSTermPlanner;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/ks-termplanner/tutor-dialog.tsx":
/*!********************************************************!*\
  !*** ./src/components/ks-termplanner/tutor-dialog.tsx ***!
  \********************************************************/
/*! exports provided: TutorDialog */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TutorDialog", function() { return TutorDialog; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var TutorDialog = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](TutorDialog, _super);
    function TutorDialog(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            comment: props.comment ? props.comment : ''
        };
        return _this;
    }
    TutorDialog.prototype.delete = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var closeDialog;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                closeDialog = this.props.closeDialog;
                closeDialog();
                this.props.deleteNoteData();
                return [2 /*return*/];
            });
        });
    };
    TutorDialog.prototype.save = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var closeDialog, comment;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                closeDialog = this.props.closeDialog;
                comment = this.state.comment;
                closeDialog();
                this.props.updateData(comment);
                return [2 /*return*/];
            });
        });
    };
    TutorDialog.prototype.render = function () {
        var _this = this;
        var _a = this.props, weekNumber = _a.weekNumber, intl = _a.intl;
        var comment = this.state.comment;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null, intl ? intl.formatMessage({ id: "tutorNoteDialog.weekComment", defaultMessage: "Kommentar fr vecka {weekNumber}" }, { weekNumber: weekNumber }) : "Kommentar f\u00F6r vecka " + weekNumber),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-table" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "fullWidth" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("textarea", { autoFocus: true, value: comment, onChange: function (ev) { return _this.setState({ comment: ev.target.value }); } })))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null, react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { tabIndex: 1, className: "btn btn-large btn-default", onClick: function () { return _this.save(); } },
                    intl ? intl.formatMessage({ id: "common.save", defaultMessage: "Spara" }) : 'Spara',
                    " "),
                comment && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { tabIndex: 1, className: "btn btn-warning btn-large pull-right", onClick: function () { return _this.delete(); } }, intl ? intl.formatMessage({ id: "common.remove", defaultMessage: "Ta bort" }) : "Ta bort"))));
    };
    return TutorDialog;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/ks-termplanner/viewmodel.ts":
/*!****************************************************!*\
  !*** ./src/components/ks-termplanner/viewmodel.ts ***!
  \****************************************************/
/*! exports provided: ViewModel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ViewModel", function() { return ViewModel; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _termplanner_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./termplanner-utils */ "./src/components/ks-termplanner/termplanner-utils.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _utils_weekutil__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/weekutil */ "./src/utils/weekutil.ts");
/* harmony import */ var _utils_generic_school_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/generic-school-utils */ "./src/utils/generic-school-utils.ts");






var ViewModel = /** @class */ (function () {
    function ViewModel(dbWeekPlans, 
    //dbTutorNotes: TermPlannerTutorNote[],
    courses, currentSchoolTerm, currentSchoolLocale, intl, showTutorCommentField) {
        var _this = this;
        var _a, e_1, _b, e_2, _c;
        this.subjectProgress = {};
        this.columns = [];
        this.weekPlansOrTutorNote = [];
        if (currentSchoolTerm.schoolMoment) {
            var _d = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](currentSchoolTerm.getTermStartAndEnd(), 2), termStart = _d[0], termEnd = _d[1];
            this.year = termStart.year();
            //init columns
            var columnHeaders = Object(_termplanner_utils__WEBPACK_IMPORTED_MODULE_1__["getColumnsHeader"])(currentSchoolLocale);
            columnHeaders.forEach(function (c) { return _this.columns.push({ name: c }); });
            //define fixed columns - we keep these separated, in case that the other columns will be dynamically retrieved
            var fixedColumns_1 = [{ name: "Kurs", isFixed: true }, { name: "Kommentar", isFixed: true }];
            if (showTutorCommentField) {
                fixedColumns_1.push({ name: "TutorComment", isFixed: true });
            }
            //Add fixed columns names
            (_a = this.columns).push.apply(_a, tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](fixedColumns_1));
            //populate translations
            var translatedColumns = Object(_utils_generic_school_utils__WEBPACK_IMPORTED_MODULE_5__["getSchoolTranslatedSubjects"])(currentSchoolLocale, intl);
            this.columns.forEach(function (element) {
                element.translatedName = translatedColumns[element.name];
            });
            var currentTermHolidays = currentSchoolTerm.schoolMoment.academicYearStructure.holidays;
            var currentTerm_1 = currentSchoolTerm.schoolMoment.term;
            //
            // weekPlans
            //
            var weekplanValues = dbWeekPlans.filter(function (x) { return !x.type; });
            var tutorValues = dbWeekPlans.filter(function (w) { return w.type === 'tutor-note'; });
            var startAcademicYearNumber = currentSchoolTerm.schoolMoment.academicYearStructure.academicStartWeek;
            var _loop_1 = function (weekMoment) {
                holidayPeriod = currentTermHolidays.filter(function (h) { return weekMoment.week() >= moment__WEBPACK_IMPORTED_MODULE_2___default()(h.startDate).startOf("week").week() &&
                    weekMoment.week() <= moment__WEBPACK_IMPORTED_MODULE_2___default()(h.endDate).endOf('week').week(); });
                //if the current week is a holiday week, skip it
                if (holidayPeriod.length > 0) {
                    return "continue";
                }
                var weekNumber = weekMoment.week();
                var kedWeek = Object(_utils_weekutil__WEBPACK_IMPORTED_MODULE_4__["KEDWeek"])(weekMoment.year(), weekNumber);
                //A term can end and start on the same week for India
                //in this case we should filter them by the term
                //This is not the case for sv locale and we want to skip this check 
                //because data is already saved in the database
                var weekPlan = weekplanValues.filter(function (wp) {
                    return wp.dateTime >= kedWeek.notBefore &&
                        wp.dateTime <= kedWeek.notAfter &&
                        (!wp.isFinalStep &&
                            wp.term === currentTerm_1 || intl.locale === "sv");
                })[0];
                var tutorNote = tutorValues.filter(function (wp) {
                    return wp.dateTime >= kedWeek.notBefore &&
                        wp.dateTime <= kedWeek.notAfter &&
                        (wp.term === currentTerm_1 || intl.locale === "sv");
                })[0];
                this_1.weekPlansOrTutorNote.push(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, weekPlan || {}, { id: weekPlan ? weekPlan.id : Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])(), dateTime: weekPlan ? weekPlan.dateTime : weekMoment.valueOf(), cellValues: weekPlan ? weekPlan.cellValues : {}, weekNumber: weekNumber, academicWeekNumber: startAcademicYearNumber++, term: currentTerm_1 }));
                this_1.weekPlansOrTutorNote.push(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, tutorNote || {}, { id: tutorNote ? tutorNote.id : Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])(), type: 'tutor-note', dateTime: tutorNote ? tutorNote.dateTime : weekMoment.valueOf(), content: tutorNote ? tutorNote.content : '', weekNumber: weekNumber, term: currentTerm_1 }));
            };
            var this_1 = this, holidayPeriod;
            for (var weekMoment = termStart.clone(); weekMoment.valueOf() < termEnd.valueOf(); weekMoment = weekMoment.clone().add(1, 'week').startOf('week')) {
                _loop_1(weekMoment);
            }
            //
            // lastSteps
            //
            var lastStepWeek = currentSchoolTerm.getLastStepWeek(intl.locale);
            var lastStepKedWeek_1 = Object(_utils_weekutil__WEBPACK_IMPORTED_MODULE_4__["KEDWeek"])(termEnd.year(), lastStepWeek);
            this.lastSteps = weekplanValues.filter(function (wp) {
                return wp.dateTime >= lastStepKedWeek_1.notBefore &&
                    wp.dateTime <= lastStepKedWeek_1.notAfter &&
                    (wp.isFinalStep &&
                        wp.term === currentTerm_1 || intl.locale === "sv");
            })[0] || {
                id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])(),
                dateTime: moment__WEBPACK_IMPORTED_MODULE_2___default()(termEnd).clone().week(lastStepWeek).startOf('week').valueOf(),
                cellValues: {},
                weekNumber: lastStepWeek,
                term: currentTerm_1,
                isFinalStep: true
            };
            this.completedSteps = {};
            this.termGoals = {};
            var maxSubjectStep = {};
            try {
                for (var courses_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](courses), courses_1_1 = courses_1.next(); !courses_1_1.done; courses_1_1 = courses_1.next()) {
                    var course = courses_1_1.value;
                    var columnHeader = Object(_termplanner_utils__WEBPACK_IMPORTED_MODULE_1__["getColumnHeaderFromCourse"])(course);
                    try {
                        //
                        // completedSteps
                        //
                        for (var _e = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](course.courseSteps), _f = _e.next(); !_f.done; _f = _e.next()) {
                            var step = _f.value;
                            if (step.isCompleted) {
                                this.completedSteps[columnHeader + step.shortName] = true;
                                //set the maximum value of the completed step for each subject
                                var currentStepValue = parseInt(step.shortName);
                                if (!isNaN(currentStepValue) && currentStepValue > (maxSubjectStep[columnHeader] ? maxSubjectStep[columnHeader] : 0)) {
                                    maxSubjectStep[columnHeader] = currentStepValue;
                                }
                                /*const weekPlans = findWeekPlansByStep(this.weekPlans, step.ShortName);
                                weekPlans.forEach(weekPlan => {
                                    this.completedSteps[weekPlan.week + columnHeader] = true;
                                })*/
                            }
                        }
                    }
                    catch (e_2_1) { e_2 = { error: e_2_1 }; }
                    finally {
                        try {
                            if (_f && !_f.done && (_c = _e.return)) _c.call(_e);
                        }
                        finally { if (e_2) throw e_2.error; }
                    }
                    //
                    // termGoals
                    //
                    this.termGoals[columnHeader] = course.periodGoalGrade;
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (courses_1_1 && !courses_1_1.done && (_b = courses_1.return)) _b.call(courses_1);
                }
                finally { if (e_1) throw e_1.error; }
            }
            if (courses) {
                //init
                columnHeaders.forEach(function (elem) {
                    _this.subjectProgress[elem] = { finalStepCompleted: false, value: 0 };
                });
                //compute charts by computing  completed goal (saved data from kedbackend is not taken into account)/lastStepValue
                Object.keys(this.lastSteps.cellValues).forEach(function (val) {
                    //exclude the fixed columns. Charts should not be displayed for those
                    if (!fixedColumns_1[val]) {
                        var hasNoFinalStepValue = isNaN(parseInt(_this.lastSteps.cellValues[val])) || !_this.lastSteps.cellValues[val];
                        var finalStepValue = hasNoFinalStepValue ? 0 : parseInt(_this.lastSteps.cellValues[val]);
                        var percenValue = finalStepValue > 0 ? maxSubjectStep[val] * 100 / finalStepValue : 0;
                        _this.subjectProgress[val] = { finalStepCompleted: !hasNoFinalStepValue, value: percenValue };
                    }
                });
            }
        }
    }
    return ViewModel;
}());

function findWeekPlansByStep(weekPlans, step) {
    return weekPlans.filter(function (wp) { return Object.keys(wp.cellValues).map(function (column) { return wp.cellValues[column] === step; }); });
}


/***/ }),

/***/ "./src/components/latest-assessments/latest-assessments.tsx":
/*!******************************************************************!*\
  !*** ./src/components/latest-assessments/latest-assessments.tsx ***!
  \******************************************************************/
/*! exports provided: LatestAssessments */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LatestAssessments", function() { return LatestAssessments; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../globals/KED.env */ "./src/globals/KED.env.ts");




var LatestAssessments = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](LatestAssessments, _super);
    function LatestAssessments(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            assessments: [],
            error: null,
            loading: false
        };
        return _this;
    }
    LatestAssessments.prototype.componentWillMount = function () {
        this.load();
    };
    LatestAssessments.prototype.load = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var assessments, error_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.setState({ loading: true });
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 3, , 4]);
                        return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_3__["default"].edsClient.getLatestAssessments(this.props.limit)];
                    case 2:
                        assessments = _a.sent();
                        this.setState({ assessments: assessments });
                        return [3 /*break*/, 4];
                    case 3:
                        error_1 = _a.sent();
                        this.setState({ error: error_1 });
                        return [3 /*break*/, 4];
                    case 4:
                        this.setState({ loading: false });
                        return [2 /*return*/];
                }
            });
        });
    };
    LatestAssessments.prototype.render = function () {
        var hasGrades = this.state.assessments.some(function (a) { return !!a.gradeName; });
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "ked_boxed" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h4", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Senaste bed\u00F6mningar"], ["Senaste bed\u00F6mningar"])))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("ul", { className: "latest-assesments zebra" }, this.state.assessments.map(function (a, i) {
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("li", { key: i },
                    (hasGrades && a.gradeName != "") && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("span", { className: "grade pill pull-right" }, a.gradeName),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("span", { className: "date pill pull-left" }, a.publishDateTime.substr(0, 10)),
                    a.courseName == a.courseUnitName ?
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h5", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("strong", null, a.courseName)) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h5", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("strong", null, a.courseName),
                        " / ",
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("em", null, a.courseUnitName)),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, a.text));
            })));
    };
    return LatestAssessments;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

var templateObject_1;


/***/ }),

/***/ "./src/components/learning-tasks/index.tsx":
/*!*************************************************!*\
  !*** ./src/components/learning-tasks/index.tsx ***!
  \*************************************************/
/*! exports provided: LearningTasks */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LearningTasks", function() { return LearningTasks; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _apis_ked_learninggoals__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../apis/ked-learninggoals */ "./src/apis/ked-learninggoals.ts");
/* harmony import */ var _course_viewer_subcomponents_learning_goals_list__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../course-viewer/subcomponents/learning-goals-list */ "./src/components/course-viewer/subcomponents/learning-goals-list.tsx");
/* harmony import */ var _utility_components_SetupLanguageIntl__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utility-components/SetupLanguageIntl */ "./src/components/utility-components/SetupLanguageIntl.tsx");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");







var _LearningTasks = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](_LearningTasks, _super);
    function _LearningTasks(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            data: null
        };
        return _this;
    }
    _LearningTasks.prototype.componentDidMount = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var data;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Object(_apis_ked_learninggoals__WEBPACK_IMPORTED_MODULE_2__["getLearningGoalsAndTasks"])(this.props.apiPath, this.props.pageId)];
                    case 1:
                        data = _a.sent();
                        this.setState({ data: data });
                        return [2 /*return*/];
                }
            });
        });
    };
    _LearningTasks.prototype.render = function () {
        if (!this.state.data)
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null);
        var _a = this.state.data, moduleName = _a.moduleName, subject = _a.subject, commonTasks = _a.commonTasks, learningGoals = _a.learningGoals, step = _a.step;
        var intl = this.props.intl;
        //const step = undefined; // moduleName.toLowerCase().startsWith("steg ") && parseInt(moduleName.substr(5));
        var commonTasksList = commonTasks.map(function (task) { return ({
            id: task.id,
            name: task.name,
            url: task.url,
            courseName: subject.name,
            learningGoal: step && learningGoals.length > 0 ? moduleName + " - \u00F6vergripande" : moduleName
        }); });
        var learningGoalsList = learningGoals.map(function (learningGoal) { return ({
            name: learningGoal.name,
            learningTasks: learningGoal.tasks.map(function (task) { return ({
                id: task.id,
                name: task.name,
                url: task.url,
                courseName: subject.name,
                learningGoal: learningGoal.name
            }); })
        }); });
        if (step) {
            commonTasksList.forEach(function (task) { return task.step = step; });
            learningGoalsList.forEach(function (lg) { return lg.learningTasks.forEach(function (task) { return task.step = step; }); });
        }
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_6__["LanguageContext"].Provider, { value: { intl: intl } },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_viewer_subcomponents_learning_goals_list__WEBPACK_IMPORTED_MODULE_3__["LearningGoalsList"], { commonTasks: commonTasksList, learningGoals: learningGoalsList }));
    };
    return _LearningTasks;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));
var LearningTasks = Object(_utility_components_SetupLanguageIntl__WEBPACK_IMPORTED_MODULE_4__["setupIntl"])(Object(react_intl__WEBPACK_IMPORTED_MODULE_5__["injectIntl"])(_LearningTasks));


/***/ }),

/***/ "./src/components/list-courses/list-courses.tsx":
/*!******************************************************!*\
  !*** ./src/components/list-courses/list-courses.tsx ***!
  \******************************************************/
/*! exports provided: ListCourses */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ListCourses", function() { return ListCourses; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../course-builder/sub-components/spinner */ "./src/components/course-builder/sub-components/spinner.tsx");
/* harmony import */ var _utils_query_string__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/query-string */ "./src/utils/query-string.ts");
/* harmony import */ var _access_control_index__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../access-control/index */ "./src/access-control/index.ts");
/* harmony import */ var _repos_hidden_courses_repo__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../repos/hidden-courses-repo */ "./src/repos/hidden-courses-repo.ts");








var ListCourses = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](ListCourses, _super);
    function ListCourses(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            isLoading: true,
            courses: [],
            headerOpen: false
        };
        _this.updateHiddenCourses = _this.updateHiddenCourses.bind(_this);
        return _this;
    }
    ListCourses.prototype.componentWillMount = function () {
        _repos_hidden_courses_repo__WEBPACK_IMPORTED_MODULE_7__["hiddenCoursesRepo"].subscribe(this.updateHiddenCourses, { fullCourse: true });
    };
    ListCourses.prototype.componentWillUnmount = function () {
        _repos_hidden_courses_repo__WEBPACK_IMPORTED_MODULE_7__["hiddenCoursesRepo"].unsubscribe(this.updateHiddenCourses);
    };
    ListCourses.prototype.updateHiddenCourses = function (courses) {
        this.setState({ courses: courses, isLoading: false });
    };
    ListCourses.prototype.hideCourse = function (course) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["showInfo"])(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Sparar..."], ["Sparar..."]))));
                        return [4 /*yield*/, _repos_hidden_courses_repo__WEBPACK_IMPORTED_MODULE_7__["hiddenCoursesRepo"].hideCourse(course)];
                    case 1:
                        _a.sent();
                        Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["showInfo"])("");
                        return [2 /*return*/];
                }
            });
        });
    };
    ListCourses.prototype.showCourse = function (course) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["showInfo"])(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Sparar..."], ["Sparar..."]))));
                        return [4 /*yield*/, _repos_hidden_courses_repo__WEBPACK_IMPORTED_MODULE_7__["hiddenCoursesRepo"].showCourse(course)];
                    case 1:
                        _a.sent();
                        Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["showInfo"])("");
                        return [2 /*return*/];
                }
            });
        });
    };
    ListCourses.prototype.render = function () {
        var _this = this;
        if (this.state.isLoading)
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_4__["Spinner"], null);
        var courses = this.state.courses;
        var visibleCourses = courses.filter(function (course) { return course.visible; });
        var hiddenCourses = courses.filter(function (course) { return !course.visible; });
        var query = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_5__["parseQueryString"])(location.search);
        var viewCourseUrl = _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_2__["default"].KED_COURSE_VIEWER_URL;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "ked_boxed" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h3", null, "Skolans kurser"),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "taskContainer odd-even" }, visibleCourses.map(function (course) {
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "studentCourse", key: course.id },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top pull-right" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "hideItem", onClick: function () { return _this.hideCourse(course); } })),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: Object(_access_control_index__WEBPACK_IMPORTED_MODULE_6__["preserveImpersonationQuery"])(viewCourseUrl, { courseId: course.id }) }, course.name))),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { className: "small" }, course.description)));
            })),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "openClose" + (this.state.headerOpen ? " open" : "") },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "openHeader", onClick: function () { return _this.setState({ headerOpen: !_this.state.headerOpen }); } },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h5", null, "Dolda kurser")),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "openContent" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "taskContainer odd-even" }, hiddenCourses.map(function (course) {
                        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "studentCourse", key: course.id },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top pull-right" },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "showItem", onClick: function () { return _this.showCourse(course); } })),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_5__["generateQueryString"])(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, query, { courseId: course.id })) }, course.name)),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { className: "small" }, course.description)));
                    })))));
    };
    return ListCourses;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

var templateObject_1, templateObject_2;


/***/ }),

/***/ "./src/components/my-courses/my-courses.tsx":
/*!**************************************************!*\
  !*** ./src/components/my-courses/my-courses.tsx ***!
  \**************************************************/
/*! exports provided: MyCourses */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MyCourses", function() { return MyCourses; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _repos_hidden_courses_repo__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../repos/hidden-courses-repo */ "./src/repos/hidden-courses-repo.ts");
/* harmony import */ var _access_control__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../access-control */ "./src/access-control/index.ts");




var MyCourses = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](MyCourses, _super);
    function MyCourses(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            courses: [],
            isLoading: true
        };
        _this.updateHiddenCoursesState = _this.updateHiddenCoursesState.bind(_this);
        return _this;
    }
    MyCourses.prototype.componentDidMount = function () {
        _repos_hidden_courses_repo__WEBPACK_IMPORTED_MODULE_2__["hiddenCoursesRepo"].subscribe(this.updateHiddenCoursesState, { fullCourse: false });
    };
    MyCourses.prototype.updateHiddenCoursesState = function (courses) {
        this.setState({ courses: courses, isLoading: false });
    };
    MyCourses.prototype.componentWillUnmount = function () {
        _repos_hidden_courses_repo__WEBPACK_IMPORTED_MODULE_2__["hiddenCoursesRepo"].unsubscribe(this.updateHiddenCoursesState);
    };
    MyCourses.prototype.getCourseUrl = function (courseId) {
        return Object(_access_control__WEBPACK_IMPORTED_MODULE_3__["preserveImpersonationQuery"])(this.props.viewCourseUrl, { courseId: courseId });
    };
    MyCourses.prototype.render = function () {
        var _this = this;
        var viewCourseUrl = this.props.viewCourseUrl;
        var _a = this.state, isLoading = _a.isLoading, error = _a.error, courses = _a.courses;
        var visibleCourses = this.state.courses.filter(function (c) { return c.visible; });
        return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null, isLoading ? (react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("li", { className: "lvl2 header" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", null, "Laddar..."))) : error ? (react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("li", { className: "lv12" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", null, "Kunde inte ladda kurser."))) : (visibleCourses.map(function (_a) {
            var name = _a.name, id = _a.id;
            return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("li", { key: id, className: "lvl2" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: _this.getCourseUrl(id) }, name)));
        }))));
    };
    return MyCourses;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/tutors-select/tutors-select.tsx":
/*!********************************************************!*\
  !*** ./src/components/tutors-select/tutors-select.tsx ***!
  \********************************************************/
/*! exports provided: TutorsSelect */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TutorsSelect", function() { return TutorsSelect; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../course-builder/sub-components/spinner */ "./src/components/course-builder/sub-components/spinner.tsx");
/* harmony import */ var _globals_KED_tutorEnv__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../globals/KED.tutorEnv */ "./src/globals/KED.tutorEnv.ts");
/* harmony import */ var _utils_request_tutored_tokens__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../utils/request-tutored-tokens */ "./src/utils/request-tutored-tokens.ts");







var TutorsSelect = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](TutorsSelect, _super);
    function TutorsSelect(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            isLoading: true,
            students: []
        };
        return _this;
    }
    TutorsSelect.prototype.componentDidMount = function () {
        this.load();
    };
    TutorsSelect.prototype.load = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var edsStudents, students, error_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 3, 5, 6]);
                        return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_1__["default"].edsClient.getTeacherTutorStudents()];
                    case 1:
                        edsStudents = _a.sent();
                        edsStudents.sort(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["compareProps"])(["lastName", "firstName"]));
                        students = edsStudents.length > 0 ?
                            edsStudents.map(function (_a) {
                                var email = _a.email, firstName = _a.firstName, lastName = _a.lastName;
                                return ({
                                    mail: email,
                                    displayName: firstName + " " + lastName
                                });
                            }) :
                            [_globals_KED_env__WEBPACK_IMPORTED_MODULE_1__["default"].currentUser];
                        return [4 /*yield*/, this.setState({ students: students })];
                    case 2:
                        _a.sent();
                        return [3 /*break*/, 6];
                    case 3:
                        error_1 = _a.sent();
                        console.error("Could not list tutor students", error_1);
                        return [4 /*yield*/, this.setState({ students: [_globals_KED_env__WEBPACK_IMPORTED_MODULE_1__["default"].currentUser] })];
                    case 4:
                        _a.sent();
                        return [3 /*break*/, 6];
                    case 5:
                        this.setState({ isLoading: false });
                        return [7 /*endfinally*/];
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    TutorsSelect.prototype.onSelectUser = function (email) {
        var choosenStudent = this.state.students.filter(function (s) { return s.mail === email; })[0];
        var user = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, choosenStudent, { roles: ["USER"] });
        _globals_KED_tutorEnv__WEBPACK_IMPORTED_MODULE_5__["default"].setNewEnv(user, function () { return Object(_utils_request_tutored_tokens__WEBPACK_IMPORTED_MODULE_6__["requestTutoredTokens"])(email, email); });
    };
    TutorsSelect.prototype.render = function () {
        var _this = this;
        var _a = this.state, isLoading = _a.isLoading, students = _a.students;
        if (isLoading)
            return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_4__["Spinner"], null);
        return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", { className: "tutors-select" },
            react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("select", { onChange: function (ev) { return ev.target.value && _this.onSelectUser(ev.target.value); } },
                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("option", { value: "" }, "V\u00E4lj elev"),
                students.map(function (student) {
                    return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("option", { key: student.mail, value: student.mail },
                        student.displayName,
                        " (",
                        student.mail,
                        ")");
                })));
    };
    return TutorsSelect;
}(react__WEBPACK_IMPORTED_MODULE_2___default.a.Component));



/***/ }),

/***/ "./src/components/tutors-view/index.ts":
/*!*********************************************!*\
  !*** ./src/components/tutors-view/index.ts ***!
  \*********************************************/
/*! exports provided: TutorsViewTest */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _tutors_view__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tutors-view */ "./src/components/tutors-view/tutors-view.tsx");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TutorsViewTest", function() { return _tutors_view__WEBPACK_IMPORTED_MODULE_0__["TutorsViewTest"]; });




/***/ }),

/***/ "./src/components/tutors-view/tutors-view.tsx":
/*!****************************************************!*\
  !*** ./src/components/tutors-view/tutors-view.tsx ***!
  \****************************************************/
/*! exports provided: TutorsViewTest */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TutorsViewTest", function() { return TutorsViewTest; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _tutors_select_tutors_select__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../tutors-select/tutors-select */ "./src/components/tutors-select/tutors-select.tsx");
/* harmony import */ var _ks_termplanner_termplanner__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../ks-termplanner/termplanner */ "./src/components/ks-termplanner/termplanner.tsx");
/* harmony import */ var _kg_termplanner_kg_termplanner_tutored__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../kg-termplanner/kg-termplanner-tutored */ "./src/components/kg-termplanner/kg-termplanner-tutored.tsx");
/* harmony import */ var _calendar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../calendar */ "./src/components/calendar/index.tsx");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _weekplanner__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../weekplanner */ "./src/components/weekplanner/index.ts");
/* harmony import */ var _utility_components_tutorable_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utility-components/tutorable-component */ "./src/components/utility-components/tutorable-component.tsx");









var TutorsViewTest = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](TutorsViewTest, _super);
    function TutorsViewTest() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    TutorsViewTest.prototype.render = function () {
        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_tutors_select_tutors_select__WEBPACK_IMPORTED_MODULE_2__["TutorsSelect"], null),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_tutorable_component__WEBPACK_IMPORTED_MODULE_8__["TutorableComponent"], { tutored: true, createComponent: function (env) {
                    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_ks_termplanner_termplanner__WEBPACK_IMPORTED_MODULE_3__["KSTermPlanner"], { key: env.currentUser.mail, env: env, tutored: true, initialDate: new Date() });
                } }),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_kg_termplanner_kg_termplanner_tutored__WEBPACK_IMPORTED_MODULE_4__["KGTermPlannerTutored"], null),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_tutorable_component__WEBPACK_IMPORTED_MODULE_8__["TutorableComponent"], { tutored: true, createComponent: function (env) {
                    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_weekplanner__WEBPACK_IMPORTED_MODULE_7__["WeekPlanner"], { key: env.currentUser.mail, env: env, viewCourseUrl: "https://www.svt.se" });
                } }),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_tutorable_component__WEBPACK_IMPORTED_MODULE_8__["TutorableComponent"], { tutored: true, createComponent: function (env) {
                    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_calendar__WEBPACK_IMPORTED_MODULE_5__["Calendar"], { env: env, firstDay: moment__WEBPACK_IMPORTED_MODULE_6___default()().startOf('week').weekday(1), initialStartHour: 7, initialEndHour: 18, initialZoom: 0.75, numDays: 5 });
                } }));
    };
    return TutorsViewTest;
}(react__WEBPACK_IMPORTED_MODULE_1___default.a.Component));



/***/ }),

/***/ "./src/components/utility-components/LanguageContext.tsx":
/*!***************************************************************!*\
  !*** ./src/components/utility-components/LanguageContext.tsx ***!
  \***************************************************************/
/*! exports provided: LanguageContext */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LanguageContext", function() { return LanguageContext; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var LanguageContext = react__WEBPACK_IMPORTED_MODULE_0__["createContext"]({ intl: null });


/***/ }),

/***/ "./src/components/utility-components/SetupLanguageIntl.tsx":
/*!*****************************************************************!*\
  !*** ./src/components/utility-components/SetupLanguageIntl.tsx ***!
  \*****************************************************************/
/*! exports provided: setupIntl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setupIntl", function() { return setupIntl; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");
/* harmony import */ var react_intl_locale_data_en__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-intl/locale-data/en */ "./node_modules/react-intl/locale-data/en.js");
/* harmony import */ var react_intl_locale_data_en__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_intl_locale_data_en__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_intl_locale_data_sv__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-intl/locale-data/sv */ "./node_modules/react-intl/locale-data/sv.js");
/* harmony import */ var react_intl_locale_data_sv__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_intl_locale_data_sv__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _translations_sv_json__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../translations/sv.json */ "./src/translations/sv.json");
var _translations_sv_json__WEBPACK_IMPORTED_MODULE_4___namespace = /*#__PURE__*/__webpack_require__.t(/*! ../../translations/sv.json */ "./src/translations/sv.json", 1);
/* harmony import */ var _translations_en_json__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../translations/en.json */ "./src/translations/en.json");
var _translations_en_json__WEBPACK_IMPORTED_MODULE_5___namespace = /*#__PURE__*/__webpack_require__.t(/*! ../../translations/en.json */ "./src/translations/en.json", 1);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_8__);









var setupIntl = function (Component) {
    return /** @class */ (function (_super) {
        tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](_SetupLanguageIntl, _super);
        function _SetupLanguageIntl(props) {
            var _this = _super.call(this, props) || this;
            Object(react_intl__WEBPACK_IMPORTED_MODULE_1__["addLocaleData"])(tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](react_intl_locale_data_en__WEBPACK_IMPORTED_MODULE_2___default.a, react_intl_locale_data_sv__WEBPACK_IMPORTED_MODULE_3___default.a));
            _this.messages = {
                'sv': _translations_sv_json__WEBPACK_IMPORTED_MODULE_4__,
                'en': _translations_en_json__WEBPACK_IMPORTED_MODULE_5__
            };
            moment__WEBPACK_IMPORTED_MODULE_8___default()().locale(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_7__["default"].KED_LOCALE);
            return _this;
        }
        _SetupLanguageIntl.prototype.render = function () {
            return react__WEBPACK_IMPORTED_MODULE_6__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_1__["IntlProvider"], { locale: _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_7__["default"].KED_LOCALE, messages: this.messages[_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_7__["default"].KED_LOCALE] },
                react__WEBPACK_IMPORTED_MODULE_6__["createElement"](Component, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.props)));
        };
        return _SetupLanguageIntl;
    }(react__WEBPACK_IMPORTED_MODULE_6__["Component"]));
};


/***/ }),

/***/ "./src/components/utility-components/content-editable-field.tsx":
/*!**********************************************************************!*\
  !*** ./src/components/utility-components/content-editable-field.tsx ***!
  \**********************************************************************/
/*! exports provided: ContentEditableField */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContentEditableField", function() { return ContentEditableField; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var ContentEditableField = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](ContentEditableField, _super);
    function ContentEditableField(props) {
        var _this = _super.call(this, props) || this;
        _this.myself = react__WEBPACK_IMPORTED_MODULE_1__["createRef"]();
        _this.state = {
            text: props.text || ''
        };
        return _this;
    }
    ContentEditableField.prototype.render = function () {
        var _a = this.props, tag = _a.tag, text = _a.text, readOnly = _a.readOnly;
        var TagType = tag;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](TagType, { contentEditable: !readOnly, "data-placeholder": this.props.placeholder, ref: this.myself, className: this.props.className, onChange: this.onChange.bind(this), onKeyDown: this.onKeyDown.bind(this), onKeyUp: this.onKeyUp.bind(this), onBlur: this.onBlur.bind(this), onPaste: this.onPaste.bind(this), dangerouslySetInnerHTML: { __html: text } });
    };
    ContentEditableField.prototype.onChange = function (e) {
        this.setState({ text: this.myself.current.innerText });
    };
    /**
     * Take action depending on key-event
     * @param e event from field
     *
     * If allowNavigation then listen to arrow-keys
     * Limits to maxChars
     */
    ContentEditableField.prototype.onKeyDown = function (e) {
        var text = this.myself.current.innerText;
        if (e.key === 'Escape') {
            this.myself.current.innerText = this.props.text || "";
            this.myself.current.blur();
            e.stopPropagation();
        }
        else if (e.key === 'Enter') {
            e.preventDefault();
            this.navigate(text, 'down');
        }
        else if (e.key === 'Tab') {
            this.propagateOnChange(text);
        }
        else if (text.length >= this.props.maxChars && (/^[\d\w\s]$/.test(e.key) && !(e.metaKey || e.ctrlKey))) {
            e.preventDefault();
        }
        if (this.props.allowNavigation === true) {
            var navDir = e.key.startsWith('Arrow') ? e.key.replace('Arrow', '').toLowerCase() : false;
            var caret = document.getSelection().getRangeAt(0).endOffset; // only works for plaintext
            if (navDir && text.length == 0) {
                this.navigate(text, navDir);
            }
            else if (navDir && (navDir == 'up' || navDir == 'down')) {
                this.navigate(text, navDir);
            }
            else if (navDir && ((navDir == 'left' && caret == 0) ||
                (navDir == 'right' && caret == text.length))) {
                this.navigate(text, navDir);
            }
        }
    };
    /**
     *
     * @param e event from field
     * Solely used to hande validations-issues
     */
    ContentEditableField.prototype.onKeyUp = function (e) {
        var text = this.myself.current.innerText;
        if (this.props.validateValue !== undefined && !this.props.validateValue.test(text)) {
            this.myself.current.innerText = this.props.text || "";
            this.myself.current.blur();
            e.preventDefault();
        }
    };
    /**
     * Update value and pass to parents navigate-funciton
     * @param text
     * @param direction
     */
    ContentEditableField.prototype.navigate = function (text, direction) {
        // first update cell
        this.propagateOnChange(text);
        this.setState({ text: text });
        // then navigate away
        this.props.onNavigate(direction);
    };
    /**
     * Make sure pasted text is pure text
     * @param e the paset event
     */
    ContentEditableField.prototype.onPaste = function (e) {
        e.preventDefault();
        var text = (e.clipboardData && e.clipboardData.getData) ? e.clipboardData.getData("text/plain") : '';
        document.execCommand("insertHTML", false, text);
    };
    /**
     * Update value on exit from field
     * @param e
     */
    ContentEditableField.prototype.onBlur = function (e) {
        var text = this.myself.current.innerText;
        this.propagateOnChange(text);
        this.setState({ text: text });
    };
    /**
     * Only update value if it has changed
     * @param newValue
     */
    ContentEditableField.prototype.propagateOnChange = function (newValue) {
        if (this.propagatedOnChange != newValue) {
            this.propagatedOnChange = newValue;
            this.props.onChange(newValue);
        }
    };
    return ContentEditableField;
}(react__WEBPACK_IMPORTED_MODULE_1__["PureComponent"]));



/***/ }),

/***/ "./src/components/utility-components/dialogs.tsx":
/*!*******************************************************!*\
  !*** ./src/components/utility-components/dialogs.tsx ***!
  \*******************************************************/
/*! exports provided: Dialogs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Dialogs", function() { return Dialogs; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _course_builder_sub_components_remove_item__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../course-builder/sub-components/remove-item */ "./src/components/course-builder/sub-components/remove-item.tsx");
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-dom */ "react-dom");
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jquery */ "jquery");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_4__);





var Dialogs = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Dialogs, _super);
    function Dialogs(props) {
        return _super.call(this, props) || this;
    }
    Dialogs.prototype.componentDidUpdate = function (prevProps) {
        if (this.lastDiv !== null && prevProps.dialogs.length > this.props.dialogs.length) {
            // A dialog was closed. Now focus the last dialog:
            jquery__WEBPACK_IMPORTED_MODULE_4___default()(Object(react_dom__WEBPACK_IMPORTED_MODULE_3__["findDOMNode"])(this.lastDiv)).find(':input').first().focus();
        }
    };
    Dialogs.prototype.render = function () {
        var _this = this;
        this.lastDiv = null;
        var _a = this.props, dialogs = _a.dialogs, popDialog = _a.popDialog;
        jquery__WEBPACK_IMPORTED_MODULE_4___default()('body').attr('aria-disabled', dialogs.length > 0);
        jquery__WEBPACK_IMPORTED_MODULE_4___default()('body').css('overflow', dialogs.length > 0 ? 'hidden' : 'auto');
        return dialogs.length > 0 && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null, dialogs.map(function (dialog, idx) {
            var div;
            function onKeyPress(ev) {
                if (ev.which === 13 && (!ev.target || ev.target.tagName !== 'TEXTAREA')) {
                    jquery__WEBPACK_IMPORTED_MODULE_4___default()(Object(react_dom__WEBPACK_IMPORTED_MODULE_3__["findDOMNode"])(div)).find('.btn-default').click();
                }
                ev.stopPropagation();
            }
            function onKeyDown(ev) {
                if (ev.which === 27) { // Escape
                    popDialog();
                    ev.stopPropagation();
                    return;
                }
                if (ev.which === 83 && (ev.ctrlKey || ev.metaKey)) { // CTRL-S
                    var domNode = Object(react_dom__WEBPACK_IMPORTED_MODULE_3__["findDOMNode"])(div);
                    ev.preventDefault();
                    var defaultButton = jquery__WEBPACK_IMPORTED_MODULE_4___default()(domNode).find('.btn-default');
                    defaultButton.click();
                    ev.stopPropagation();
                }
            }
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: idx },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "darken" }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "modal-page-wrap" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "modal-page", ref: function (elem) {
                            div = elem;
                            if (idx === dialogs.length - 1)
                                _this.lastDiv = elem;
                        }, tabIndex: 0, "aria-disabled": idx < dialogs.length - 1, onKeyPress: onKeyPress, onKeyDown: onKeyDown },
                        dialog,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_remove_item__WEBPACK_IMPORTED_MODULE_2__["RemoveItem"], { onClick: popDialog }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "stopFloats" }))));
        }));
    };
    return Dialogs;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/utility-components/form-field-text-input.tsx":
/*!*********************************************************************!*\
  !*** ./src/components/utility-components/form-field-text-input.tsx ***!
  \*********************************************************************/
/*! exports provided: TextInput */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TextInput", function() { return TextInput; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _form_field__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./form-field */ "./src/components/utility-components/form-field.tsx");



var TextInput = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](TextInput, _super);
    function TextInput(props) {
        return _super.call(this, props) || this;
    }
    TextInput.prototype.render = function () {
        var _this = this;
        return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_form_field__WEBPACK_IMPORTED_MODULE_2__["FormField"], { label: this.props.label },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { type: "text", autoFocus: this.props.autoFocus, id: this.props.id, size: 35, value: this.props.value, onChange: function (ev) { return _this.props.onChange(ev.target.value); }, placeholder: this.props.placeholder }))));
    };
    return TextInput;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/utility-components/form-field-textarea.tsx":
/*!*******************************************************************!*\
  !*** ./src/components/utility-components/form-field-textarea.tsx ***!
  \*******************************************************************/
/*! exports provided: TextAreaFormField */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TextAreaFormField", function() { return TextAreaFormField; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _form_field__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./form-field */ "./src/components/utility-components/form-field.tsx");



var TextAreaFormField = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](TextAreaFormField, _super);
    function TextAreaFormField(props) {
        return _super.call(this, props) || this;
    }
    TextAreaFormField.prototype.render = function () {
        var _this = this;
        return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_form_field__WEBPACK_IMPORTED_MODULE_2__["FormField"], { label: this.props.label, id: this.props.id },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("textarea", { autoFocus: this.props.autoFocus, id: this.props.id, cols: 35, rows: this.props.rows || 5, value: this.props.value, onChange: function (ev) { return _this.props.onChange(ev.target.value); }, placeholder: this.props.placeholder })),
                !!this.props.children && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem" }, this.props.children))));
    };
    return TextAreaFormField;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/utility-components/form-field.tsx":
/*!**********************************************************!*\
  !*** ./src/components/utility-components/form-field.tsx ***!
  \**********************************************************/
/*! exports provided: FormField */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FormField", function() { return FormField; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


function findId(node) {
    var recucheck = new Set();
    return (function findId(node) {
        if (typeof node === 'string')
            return null;
        if (recucheck.has(node)) {
            return;
        }
        recucheck.add(node);
        if (node.props) {
            if (node.props.id)
                return node.props.id;
            if (node.props.children) {
                return findId(node.props.children);
            }
            return;
        }
        if (node.length) {
            for (var i = 0; i < node.length; ++i) {
                var child = node[i];
                if (child) {
                    var childId = findId(child);
                    if (childId)
                        return childId;
                    //console.log(child);
                }
            }
        }
    })(node);
}
var FormField = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](FormField, _super);
    function FormField(props) {
        return _super.call(this, props) || this;
    }
    FormField.prototype.render = function () {
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("label", { className: "kclabel", htmlFor: this.props.id || findId(this.props.children) }, this.props.label),
            this.props.children);
    };
    return FormField;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/utility-components/open-close-box.tsx":
/*!**************************************************************!*\
  !*** ./src/components/utility-components/open-close-box.tsx ***!
  \**************************************************************/
/*! exports provided: OpenCloseBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OpenCloseBox", function() { return OpenCloseBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _charts_goal_progress__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../charts/goal-progress */ "./src/components/charts/goal-progress.tsx");
/* REFACTOR: Move this component outside coursebuilder!
   This is a general-purpose component
*/



var OpenCloseBox = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](OpenCloseBox, _super);
    function OpenCloseBox(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            headerOpen: props.headerOpen || false
        };
        return _this;
    }
    OpenCloseBox.prototype.componentWillReceiveProps = function (nextProps) {
        if (nextProps.headerOpen !== this.props.headerOpen) {
            this.setState({ headerOpen: nextProps.headerOpen });
        }
    };
    OpenCloseBox.prototype.render = function () {
        var _this = this;
        var _a = this.props, title = _a.title, className = _a.className, children = _a.children, headerClassName = _a.headerClassName, contentClassName = _a.contentClassName, displayProgress = _a.displayProgress, progressData = _a.progressData, inactivated = _a.inactivated, inactivatedRender = _a.inactivatedRender;
        var headerOpen = this.state.headerOpen;
        if (inactivated)
            return inactivatedRender === 'titleAndChildren' ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null, title),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null, children)) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null, children);
        //var currentProgressData = //progressData();
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: (className || '') + " openClose" + (headerOpen ? " open" : "") },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "openHeader" + (headerClassName ? " " + headerClassName : ""), onClick: function () {
                    if (_this.props.onOpenClose)
                        _this.props.onOpenClose(!_this.state.headerOpen);
                    _this.setState({ headerOpen: !_this.state.headerOpen });
                } },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "openHeaderContainer" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null, title),
                    displayProgress && react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_charts_goal_progress__WEBPACK_IMPORTED_MODULE_2__["GoalProgress"], tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, progressData)))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "openContent" + (contentClassName ? " " + contentClassName : "") }, children));
    };
    return OpenCloseBox;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/utility-components/tutorable-component.tsx":
/*!*******************************************************************!*\
  !*** ./src/components/utility-components/tutorable-component.tsx ***!
  \*******************************************************************/
/*! exports provided: TutorableComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TutorableComponent", function() { return TutorableComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _globals_KED_tutorEnv__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../globals/KED.tutorEnv */ "./src/globals/KED.tutorEnv.ts");




var TutorableComponent = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](TutorableComponent, _super);
    function TutorableComponent(props) {
        var _this = _super.call(this, props) || this;
        _this.onEnvUpdated = _this.onEnvUpdated.bind(_this);
        _this.state = {
            env: props.tutored ? null : _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"]
        };
        return _this;
    }
    TutorableComponent.prototype.componentDidMount = function () {
        if (this.props.tutored) {
            _globals_KED_tutorEnv__WEBPACK_IMPORTED_MODULE_3__["default"].subscribe(this.onEnvUpdated);
        }
    };
    TutorableComponent.prototype.componentWillUnmount = function () {
        if (this.props.tutored) {
            _globals_KED_tutorEnv__WEBPACK_IMPORTED_MODULE_3__["default"].unsubscribe(this.onEnvUpdated);
        }
    };
    TutorableComponent.prototype.onEnvUpdated = function (env) {
        this.setState({ env: env });
    };
    TutorableComponent.prototype.render = function () {
        var env = this.state.env;
        if (!env)
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null);
        if (!env.kedBackendClient) {
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null, "Laddar...");
        }
        //const {currentUser, edsClient, kedBackendClient, kgTermPlannerRepo} = env;
        //const {tutored} = this.props;
        return this.props.createComponent(env);
    };
    return TutorableComponent;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/utility-components/wysiwyg/actions-sv.ts":
/*!*****************************************************************!*\
  !*** ./src/components/utility-components/wysiwyg/actions-sv.ts ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _exec__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./exec */ "./src/components/utility-components/wysiwyg/exec.ts");

/* harmony default export */ __webpack_exports__["default"] = ({
    bold: {
        icon: '<b>F</b>',
        title: 'Fetstil',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('bold'); }
    },
    italic: {
        icon: '<i>K</i>',
        title: 'Kursiv',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('italic'); }
    },
    underline: {
        icon: '<u>U</u>',
        title: 'Understruken',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('underline'); }
    },
    strikethrough: {
        icon: '<strike>S</strike>',
        title: 'Struken',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('strikeThrough'); }
    },
    heading1: {
        icon: '<b>H<sub>1</sub></b>',
        title: 'Rubrik 1',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<H1>'); }
    },
    heading2: {
        icon: '<b>H<sub>2</sub></b>',
        title: 'Rubrik 2',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<H2>'); }
    },
    heading3: {
        icon: '<b>H<sub>3</sub></b>',
        title: 'Rubrik 3',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<H3>'); }
    },
    paragraph: {
        icon: '&#182;',
        title: 'Paragraf',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<P>'); }
    },
    quote: {
        icon: '&#8220; &#8221;',
        title: 'Citat',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<BLOCKQUOTE>'); }
    },
    olist: {
        icon: '<i class="fa fa-list-ol" aria-hidden="true"></i>',
        title: 'Ordnad lista',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertOrderedList'); }
    },
    ulist: {
        icon: '<i class="fa fa-list" aria-hidden="true"></i>',
        title: 'Punktlista',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertUnorderedList'); }
    },
    outdent: {
        icon: '<i class="fa fa-outdent" aria-hidden="true"></i>',
        title: 'Minska indrag',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])("outdent"); }
    },
    indent: {
        icon: '<i class="fa fa-indent" aria-hidden="true"></i>',
        title: 'ka indrag',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])("indent"); },
    },
    code: {
        icon: '&lt;/&gt;',
        title: 'Programkod',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<PRE>'); }
    },
    line: {
        icon: '&#8213;',
        title: 'Vgrt linje',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertHorizontalRule'); }
    },
    link: {
        icon: '<i class="fa fa-link" aria-hidden="true"></i>',
        title: 'Infoga lnk',
        result: function () {
            var url = window.prompt('Ange lnkens URL');
            if (url)
                Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('createLink', url);
        }
    },
    image: {
        icon: '<i class="fa fa-picture-o" aria-hidden="true"></i>',
        title: 'Infoga bild',
        promptMsg: 'Ange bildens URL',
        result: function (ev, component) {
            var url = window.prompt(this.promptMsg);
            if (url) {
                //exec('insertImage', url);
                var img = document.createElement("img");
                img.src = url;
                img.tabIndex = 1;
                insertElement(img);
                img.onfocus = component.onFocus;
                img.onblur = component.onBlur;
                component.props.onChange(component.contentDiv.innerHTML);
            }
        }
    }
});
function insertElement(element) {
    var sel, range;
    if (window.getSelection && (sel = window.getSelection()).rangeCount) {
        range = sel.getRangeAt(0);
        range.collapse(true);
        range.insertNode(element);
        // Move the caret immediately after the inserted span
        range.setStartAfter(element);
        range.collapse(true);
        sel.removeAllRanges();
        sel.addRange(range);
    }
}


/***/ }),

/***/ "./src/components/utility-components/wysiwyg/actions.ts":
/*!**************************************************************!*\
  !*** ./src/components/utility-components/wysiwyg/actions.ts ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _exec__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./exec */ "./src/components/utility-components/wysiwyg/exec.ts");

/* harmony default export */ __webpack_exports__["default"] = ({
    bold: {
        icon: '<b>B</b>',
        title: 'Bold',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('bold'); }
    },
    italic: {
        icon: '<i>I</i>',
        title: 'Italic',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('italic'); }
    },
    underline: {
        icon: '<u>U</u>',
        title: 'Underline',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('underline'); }
    },
    strikethrough: {
        icon: '<strike>S</strike>',
        title: 'Strike-through',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('strikeThrough'); }
    },
    heading1: {
        icon: '<b>H<sub>1</sub></b>',
        title: 'Heading 1',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<H1>'); }
    },
    heading2: {
        icon: '<b>H<sub>2</sub></b>',
        title: 'Heading 2',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<H2>'); }
    },
    heading3: {
        icon: '<b>H<sub>3</sub></b>',
        title: 'Heading 3',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<H3>'); }
    },
    paragraph: {
        icon: '&#182;',
        title: 'Paragraph',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<P>'); }
    },
    quote: {
        icon: '&#8220; &#8221;',
        title: 'Quote',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<BLOCKQUOTE>'); }
    },
    olist: {
        icon: '&#35;',
        title: 'Ordered List',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertOrderedList'); }
    },
    ulist: {
        icon: '&#8226;',
        title: 'Unordered List',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertUnorderedList'); }
    },
    outdent: {
        icon: '<i class="fa fa-outdent" aria-hidden="true"></i>',
        title: 'Outdent',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])("outdent"); }
    },
    indent: {
        icon: '<i class="fa fa-indent" aria-hidden="true"></i>',
        title: 'Indent',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])("indent"); },
    },
    code: {
        icon: '&lt;/&gt;',
        title: 'Code',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<PRE>'); }
    },
    line: {
        icon: '&#8213;',
        title: 'Horizontal Line',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertHorizontalRule'); }
    },
    link: {
        icon: '&#128279;',
        title: 'Link',
        result: function () {
            var url = window.prompt('Enter the link URL');
            if (url)
                Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('createLink', url);
        }
    },
    image: {
        icon: '&#128247;',
        title: 'Image',
        promptMsg: 'Enter the URL of the image',
        result: function () {
            var url = window.prompt(this.promptMsg);
            if (url)
                Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertImage', url);
        }
    }
});


/***/ }),

/***/ "./src/components/utility-components/wysiwyg/exec.ts":
/*!***********************************************************!*\
  !*** ./src/components/utility-components/wysiwyg/exec.ts ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (command, value) {
    if (value === void 0) { value = null; }
    document.execCommand(command, false, value);
});


/***/ }),

/***/ "./src/components/utility-components/wysiwyg/image-edit-actions.ts":
/*!*************************************************************************!*\
  !*** ./src/components/utility-components/wysiwyg/image-edit-actions.ts ***!
  \*************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return imageEditActions; });
function imageEditActions(cb) {
    return [{
            name: 'float-left',
            icon: "<div style=\"position:relative\">\n      <i class=\"fa fa-align-right\" aria-hidden=\"true\"></i>\n      <div style=\"position:absolute; left:-4px;top:0; transform: scale(0.5); transform-origin: left top\">\n        <i class=\"fa fa-picture-o\" aria-hidden=\"true\"></i>\n      </div>\n    </div>",
            title: 'Lt bilden flyta vnster om text',
            result: function () { return cb('float-left'); }
        }, {
            name: 'float-right',
            icon: "<div style=\"position:relative\">\n      <i class=\"fa fa-align-left\" aria-hidden=\"true\"></i>\n      <div style=\"position:absolute; right:-4px;top:0; transform: scale(0.5); transform-origin: right top\">\n        <i class=\"fa fa-picture-o\" aria-hidden=\"true\"></i>\n      </div>\n    </div>",
            title: 'Lt bilden flyta hger om text',
            result: function () { return cb('float-right'); }
        }, {
            name: 'unfloat',
            icon: "<div style=\"position:relative;\" aria-hidden=\"true\">\n      <div style=\"position:absolute;top:0;left:0\">&#8254;</div>\n      <div style=\"position:absolute;top:0:left:0;transform: scale(0.5); transform-origin: left bottom\">\n        <i class=\"fa fa-picture-o\" aria-hidden=\"true\"></i>\n      </div>\n      <div style=\"position:absolute;top:0;left:0\">_</div>\n    </div>",
            title: 'Placera bilden p egen rad',
            result: function () { return cb('unfloat'); }
        }];
}


/***/ }),

/***/ "./src/components/utility-components/wysiwyg/index.tsx":
/*!*************************************************************!*\
  !*** ./src/components/utility-components/wysiwyg/index.tsx ***!
  \*************************************************************/
/*! exports provided: Wysiwyg */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Wysiwyg", function() { return Wysiwyg; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _exec__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./exec */ "./src/components/utility-components/wysiwyg/exec.ts");
/* harmony import */ var _wash_html__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./wash-html */ "./src/components/utility-components/wysiwyg/wash-html.ts");
/* harmony import */ var _image_edit_actions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./image-edit-actions */ "./src/components/utility-components/wysiwyg/image-edit-actions.ts");
/* harmony import */ var _actions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./actions */ "./src/components/utility-components/wysiwyg/actions.ts");






var classes = {
    actionbar: 'wysiwyg-actionbar',
    button: 'wysiwyg-button',
    content: 'wysiwyg-content',
    focusrect: 'wysiwyg-focusrect',
    focuspoint: 'wysiwyg-focuspoint',
    readonlyContent: 'wysiwyg-content readonly'
};
var Wysiwyg = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Wysiwyg, _super);
    function Wysiwyg(props) {
        var _this = _super.call(this, props) || this;
        _this.state = { focusRect: null };
        _this.onFocus = _this.onFocus.bind(_this);
        _this.onBlur = _this.onBlur.bind(_this);
        _this.onMouseDown = _this.onMouseDown.bind(_this);
        _this.onMouseMove = _this.onMouseMove.bind(_this);
        _this.onMouseUp = _this.onMouseUp.bind(_this);
        return _this;
    }
    Wysiwyg.prototype.componentDidMount = function () {
        var _this = this;
        if (!this.props.readOnly) {
            Array.from(this.contentDiv.querySelectorAll("img,a")).map(function (elem) { return elem; })
                .forEach(function (elem) {
                elem.tabIndex = 1;
                elem.onfocus = _this.onFocus;
                elem.onblur = _this.onBlur;
            });
            document.querySelector(".wysiwyg-content").addEventListener('mousedown', this.onMouseDown);
            document.querySelector(".wysiwyg-content").addEventListener('mousemove', this.onMouseMove);
            document.querySelector(".wysiwyg-content").addEventListener('mouseup', this.onMouseUp);
        }
        if (this.props.reportNumChars) {
            this.props.reportNumChars((this.contentDiv && this.contentDiv.innerText && this.contentDiv.innerText.length) || 0);
        }
    };
    Wysiwyg.prototype.componentDidUpdate = function () {
        var _this = this;
        Array.from(this.contentDiv.querySelectorAll("img,a")).map(function (elem) { return elem; })
            .forEach(function (elem) {
            elem.tabIndex = 1;
            elem.onfocus = _this.onFocus;
            elem.onblur = _this.onBlur;
        });
        if (this.props.reportNumChars) {
            this.props.reportNumChars((this.contentDiv && this.contentDiv.innerText && this.contentDiv.innerText.length) || 0);
        }
    };
    Wysiwyg.prototype.componentWillUnmount = function () {
        document.querySelector(".wysiwyg-content").removeEventListener('mousedown', this.onMouseDown);
        document.querySelector(".wysiwyg-content").removeEventListener('mousemove', this.onMouseMove);
        document.querySelector(".wysiwyg-content").removeEventListener('mouseup', this.onMouseUp);
    };
    Wysiwyg.prototype.shouldComponentUpdate = function (nextProps, nextState) {
        //this.contentDiv.onfocus = this.onFocus;
        //this.contentDiv.onblur = this.onBlur;
        return !this.contentDiv ||
            nextState != this.state ||
            nextProps.readOnly !== this.props.readOnly ||
            Object(_wash_html__WEBPACK_IMPORTED_MODULE_3__["washHtml"])(nextProps.html) !== Object(_wash_html__WEBPACK_IMPORTED_MODULE_3__["washHtml"])(this.contentDiv.innerHTML);
    };
    Wysiwyg.prototype.triggerOnChange = function (html) {
        this.props.onChange && this.props.onChange(Object(_wash_html__WEBPACK_IMPORTED_MODULE_3__["washHtml"])(html));
    };
    Wysiwyg.prototype.onFocus = function (ev) {
        var elem = ev.target;
        if (!elem || !elem.tagName)
            return;
        if (elem.tagName !== 'IMG' && elem.tagName !== 'A')
            return;
        var contentParent = this.contentDiv.parentElement;
        var newState = {
            focusRect: getRelatativeClientRect(contentParent, elem),
        };
        switch (elem.tagName) {
            case 'A':
            case 'IMG':
            default: break;
        }
        this.setState(newState);
        this.focusElem = elem;
    };
    Wysiwyg.prototype.onBlur = function (ev) {
        /*if (ev.relatedTarget) {
          const relatedTarget = ev.relatedTarget as HTMLElement;
          if (relatedTarget.className && relatedTarget.className.split(' ').indexOf(classes.button) >= 0) {
            // A image action button was pressed
            set
            return;
          }
        }*/
        if ((ev.target === this.focusElem && ev.relatedTarget !== this.focusRectDiv) ||
            ev.target === this.focusRectDiv) {
            this.setState({ focusRect: null });
        }
    };
    Wysiwyg.prototype.makeClickable = function (elem) {
        elem.tabIndex = 1;
    };
    Wysiwyg.prototype.onMouseDown = function (ev) {
        if ((ev.target.className || "").split(' ').indexOf(classes.focuspoint) >= 0) {
            var corner = this.getRectCorner(ev);
            this.corner = corner;
            this.resizeStartX = ev.clientX;
        }
    };
    Wysiwyg.prototype.onMouseMove = function (ev) {
        if (this.corner && this.state.focusRect && this.focusElem) {
            ev.preventDefault();
            // TODO: Rkna ut baserat p this.corner hur bildens storlek borde ndras.
            // Leta upp bilden per ID frn this.contentDiv
            // Stt DIV:ens style attribut width till ny width.
            // Om DIV:en redan hade height, stt ny height med samma aspect ratio som innan,
            // annars, stt inte height alls (eller mjligtvis till auto))
            var focusRect = this.focusRectDiv.getBoundingClientRect();
            if (focusRect.width < 32)
                return;
            //const currentWidth = focusRect.width;
            //const currentHeight = focusRect.height;
            //const hasHeightStyle = !this.focusElem.style.height || this.focusElem.style.height === "auto";
            var newWidth = Math.max(32, this.corner.endsWith('l') ?
                focusRect.width + (this.resizeStartX - ev.clientX) :
                //focusRect.right - ev.clientX :
                focusRect.width - (this.resizeStartX - ev.clientX));
            this.resizeStartX = ev.clientX;
            //ev.clientX - focusRect.left;
            var factor = newWidth / focusRect.width;
            var newHeight = focusRect.height * factor;
            this.focusElem.style.width = newWidth + "px";
            this.focusElem.style.height = newHeight + "px";
            this.setState({
                focusRect: getRelatativeClientRect(this.contentDiv.parentElement, this.focusElem),
            });
        }
    };
    Wysiwyg.prototype.onMouseUp = function (ev) {
        if (this.corner && this.state.focusRect && this.focusElem) {
            this.corner = null;
            this.triggerOnChange(this.contentDiv.innerHTML);
        }
    };
    Wysiwyg.prototype.getRectCorner = function (ev) {
        var e_1, _a;
        try {
            for (var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"]((ev.target.className || '').split(' ')), _c = _b.next(); !_c.done; _c = _b.next()) {
                var className = _c.value;
                switch (className) {
                    case 'fpul':
                        return 'ul';
                    case 'fpur':
                        return 'fpur';
                    case 'fplr':
                        return 'lr';
                    case 'fpll':
                        return 'll';
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return null;
    };
    Wysiwyg.prototype.execImageEditAction = function (cmd) {
        //console.log(cmd);
        if (!this.focusElem)
            return;
        //console.log("doing it");
        switch (cmd) {
            case 'float-left':
                this.focusElem.style.cssFloat = 'left';
                break;
            case 'float-right':
                this.focusElem.style.cssFloat = 'right';
                break;
            case 'unfloat':
                this.focusElem.style.cssFloat = '';
                break;
        }
        this.triggerOnChange(this.contentDiv.innerHTML);
        this.setState({ focusRect: getRelatativeClientRect(this.contentDiv.parentElement, this.focusElem) });
    };
    Wysiwyg.prototype.render = function () {
        var _this = this;
        var defaultActions = this.props.defaultActions || _actions__WEBPACK_IMPORTED_MODULE_5__["default"];
        var actionsToUse = this.props.actions ? this.props.actions.map(function (action) {
            return typeof action === 'string' ?
                defaultActions[action] :
                defaultActions[action.name] ? tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, defaultActions[action.name], action) :
                    action;
        })
            : Object.keys(defaultActions).map(function (action) { return defaultActions[action]; });
        if (this.state.focusRect) {
            actionsToUse = actionsToUse.concat(Object(_image_edit_actions__WEBPACK_IMPORTED_MODULE_4__["default"])(function (cmd) { return _this.execImageEditAction(cmd); }));
        }
        var focusRect = this.state.focusRect;
        var _a = this.props, readOnly = _a.readOnly, reportNumChars = _a.reportNumChars, maxChars = _a.maxChars;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: this.props.className },
            !readOnly && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: classes.actionbar }, actionsToUse.map(function (action, idx) {
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { key: idx, className: classes.button, dangerouslySetInnerHTML: { __html: action.icon }, title: action.title, onMouseDown: function (ev) { action.result(ev, _this); }, onMouseUp: function (ev) { return setTimeout(function () { return _this.contentDiv.focus(); }, 10); } });
            })),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: readOnly ? classes.readonlyContent : classes.content, style: { position: 'relative', top: 0, left: 0 } },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "editor", ref: function (div) { return _this.contentDiv = div; }, dangerouslySetInnerHTML: { __html: Object(_wash_html__WEBPACK_IMPORTED_MODULE_3__["washHtml"])(this.props.html) }, contentEditable: !readOnly, onPaste: function (ev) {
                        if (!isNaN(maxChars)) {
                            var target = ev.target, currentTarget = ev.currentTarget;
                            //const textBeingOverwritten = (target as any).innerText || "";
                            var editorText = (currentTarget && currentTarget.innerText) || "";
                            var textBeingPasted = ev.clipboardData.getData("text/plain") || "";
                            if (editorText.length + textBeingPasted.length > maxChars) {
                                ev.preventDefault();
                            }
                        }
                    }, onKeyUp: reportNumChars ? function (ev) {
                        var innerText = ev.target.innerText;
                        reportNumChars(innerText ? innerText.length : 0);
                    } : null, onKeyPress: !isNaN(maxChars) ? function (ev) {
                        var innerText = ev.target.innerText;
                        if (innerText && innerText.length >= maxChars) {
                            ev.preventDefault();
                        }
                    } : null, onInput: function (ev) { return _this.triggerOnChange(ev.target.innerHTML); }, onKeyDown: function (ev) {
                        if (readOnly)
                            return;
                        if (reportNumChars && ev.currentTarget) {
                            reportNumChars((ev.currentTarget.innerText || "").length);
                        }
                        //console.log("Key: " + ev.which);
                        if (ev.which >= 35 && ev.which <= 40) { // home/end/up/down/left/right
                            ev.stopPropagation(); // Prevent entire page from scrolling??
                        }
                        if (ev.which === 9) {
                            ev.preventDefault(); // TAB
                            if (ev.shiftKey) {
                                Object(_exec__WEBPACK_IMPORTED_MODULE_2__["default"])("outdent");
                            }
                            else {
                                Object(_exec__WEBPACK_IMPORTED_MODULE_2__["default"])("indent");
                            }
                        }
                        if ((ev.keyCode === 8 || ev.keyCode === 46) && // Delete or Back buttons
                            _this.focusElem && _this.state.focusRect) {
                            if (_this.focusElem && _this.focusElem.parentElement) {
                                _this.focusElem.parentElement.removeChild(_this.focusElem); // Remove marked image
                            }
                            _this.focusElem = null;
                            _this.setState({ focusRect: null });
                            _this.triggerOnChange(_this.contentDiv.innerHTML);
                        }
                    } }),
                focusRect && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { ref: function (div) { return _this.focusRectDiv = div; }, className: classes.focusrect, onBlur: this.onBlur, tabIndex: 1, style: {
                        outline: 0,
                        position: 'absolute',
                        top: this.state.focusRect.top,
                        left: this.state.focusRect.left,
                        width: this.state.focusRect.width,
                        height: this.state.focusRect.height
                    } },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: classes.focuspoint + " fpul", style: { position: 'absolute', top: 0, left: 0 } }),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: classes.focuspoint + " fpur", style: { position: 'absolute', top: 0, right: 0 } }),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: classes.focuspoint + " fplr", style: { position: 'absolute', bottom: 0, right: 0 } }),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: classes.focuspoint + " fpll", style: { position: 'absolute', bottom: 0, left: 0 } }))));
    };
    return Wysiwyg;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

function getRelatativeClientRect(parent, child) {
    var parentRect = parent.getBoundingClientRect();
    var childRect = child.getBoundingClientRect();
    return {
        top: childRect.top - parentRect.top + parent.scrollTop,
        left: childRect.left - parentRect.left + parent.scrollLeft,
        bottom: childRect.bottom - parentRect.top + parent.scrollTop,
        right: childRect.right - parentRect.left + parent.scrollLeft,
        width: childRect.width,
        height: childRect.height
    };
}


/***/ }),

/***/ "./src/components/utility-components/wysiwyg/wash-html.ts":
/*!****************************************************************!*\
  !*** ./src/components/utility-components/wysiwyg/wash-html.ts ***!
  \****************************************************************/
/*! exports provided: washHtml */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "washHtml", function() { return washHtml; });
var parser = new DOMParser();
/** Tags / Attributes Whitelist
 *
 */
var HTML_WASH_POLICY = {
    b: {},
    i: {},
    p: {},
    u: {},
    strike: {},
    pre: {},
    h1: {},
    h2: {},
    h3: {},
    h4: {},
    h5: {},
    img: { src: true, class: true, style: true, tabindex: true },
    a: { href: true, target: true, tabindex: true },
    ul: {},
    ol: {},
    li: {},
    hr: {},
    br: {},
    div: {},
    span: {},
    // table tags:
    table: { border: true },
    tbody: {},
    thead: {},
    tfoot: {},
    tr: {},
    td: { headers: true, colspan: true, rowspan: true },
    th: { abbr: true, headers: true, scope: true, sorted: true, colspan: true, rowspan: true }
};
function washHtml(html) {
    var doc = parser.parseFromString(html, "text/html");
    var childNodes = doc.body.childNodes;
    var modified = false;
    for (var i = 0; i < childNodes.length; ++i) {
        if (washNode(childNodes.item(i))) {
            modified = true;
        }
    }
    return modified ?
        doc.body.innerHTML :
        html; // By returning the original HTML string, we spare the user from refreshing the edit area,
    // which would otherwise put the cursor at the top, losing the position where user where.
}
function washNode(node) {
    var modified = false;
    if (isElement(node)) {
        if (washElement(node)) {
            modified = true;
        }
    }
    if (washChildNodes(node)) {
        modified = true;
    }
    return modified;
}
function washChildNodes(node) {
    var modified = false;
    var childNodes = node.childNodes;
    for (var i = 0; i < childNodes.length; ++i) {
        if (washNode(childNodes.item(i))) {
            modified = true;
        }
    }
    return modified;
}
/** Replace an element with its child nodes.
 *
 */
function removeMiddleElement(element) {
    var childNodes = element.childNodes;
    for (var i = 0; i < childNodes.length; ++i) {
        element.parentNode.insertBefore(childNodes.item(i), element);
    }
    element.remove();
}
function washElement(element) {
    var policy = element.tagName && HTML_WASH_POLICY[element.tagName.toLowerCase()];
    if (!policy) {
        console.warn("Wysiwyg: not allowed tag", element.tagName);
        washChildNodes(element);
        removeMiddleElement(element);
        return true;
    }
    var modified = false;
    for (var i = 0; i < element.attributes.length; ++i) {
        var attr = element.attributes.item(i);
        var allowed = attr.name && !!policy[attr.name.toLowerCase()];
        if (!allowed) {
            modified = true;
            console.warn("Wysiwyg: not allowed attribute", attr.name, "Tag: ", element.tagName);
            element.removeAttribute(attr.name);
        }
    }
    return modified;
}
function isElement(node) {
    return !!node.tagName;
}


/***/ }),

/***/ "./src/components/week-notebook/index.ts":
/*!***********************************************!*\
  !*** ./src/components/week-notebook/index.ts ***!
  \***********************************************/
/*! exports provided: WeekNotebook, RootWeekNotebook */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _week_notebook__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./week-notebook */ "./src/components/week-notebook/week-notebook.tsx");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "WeekNotebook", function() { return _week_notebook__WEBPACK_IMPORTED_MODULE_0__["WeekNotebook"]; });

/* harmony import */ var _root_week_notebook__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./root-week-notebook */ "./src/components/week-notebook/root-week-notebook.tsx");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RootWeekNotebook", function() { return _root_week_notebook__WEBPACK_IMPORTED_MODULE_1__["RootWeekNotebook"]; });





/***/ }),

/***/ "./src/components/week-notebook/root-week-notebook.tsx":
/*!*************************************************************!*\
  !*** ./src/components/week-notebook/root-week-notebook.tsx ***!
  \*************************************************************/
/*! exports provided: RootWeekNotebook */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RootWeekNotebook", function() { return RootWeekNotebook; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");
/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! . */ "./src/components/week-notebook/index.ts");



function RootWeekNotebook(props) {
    var intl = props.intl;
    return react__WEBPACK_IMPORTED_MODULE_0__["createElement"](_utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_1__["LanguageContext"].Provider, { value: { intl: intl } },
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"](___WEBPACK_IMPORTED_MODULE_2__["WeekNotebook"], null));
}


/***/ }),

/***/ "./src/components/week-notebook/week-notebook.tsx":
/*!********************************************************!*\
  !*** ./src/components/week-notebook/week-notebook.tsx ***!
  \********************************************************/
/*! exports provided: WeekNotebook */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WeekNotebook", function() { return WeekNotebook; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _repos_week_notes_repo__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../repos/week-notes-repo */ "./src/repos/week-notes-repo.ts");
/* harmony import */ var _utils_pending_job__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/pending-job */ "./src/utils/pending-job.ts");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _utility_components_wysiwyg__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utility-components/wysiwyg */ "./src/components/utility-components/wysiwyg/index.tsx");
/* harmony import */ var _utility_components_wysiwyg_actions_sv__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utility-components/wysiwyg/actions-sv */ "./src/components/utility-components/wysiwyg/actions-sv.ts");
/* harmony import */ var _utility_components_wysiwyg_actions__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utility-components/wysiwyg/actions */ "./src/components/utility-components/wysiwyg/actions.ts");
/* harmony import */ var _course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../course-builder/sub-components/spinner */ "./src/components/course-builder/sub-components/spinner.tsx");
/* harmony import */ var _utils_if_takes_time__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../utils/if-takes-time */ "./src/utils/if-takes-time.ts");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");













var MAX_NOTE_LENGTH = 16384;
var WeekNotebook = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](WeekNotebook, _super);
    function WeekNotebook(props) {
        var _this = _super.call(this, props) || this;
        _this.onChange = _this.onChange.bind(_this);
        _this.autoSaver = new _utils_pending_job__WEBPACK_IMPORTED_MODULE_3__["PendingJob"](function () { return _this.save(); });
        _this.state = {
            isLoading: true,
            showLoadingProgress: false,
            showSavingProgress: false,
            everEdited: false,
            notes: "",
        };
        return _this;
    }
    WeekNotebook.prototype.componentDidMount = function () {
        this.showProgressIfLoadingTakesTime();
        _repos_week_notes_repo__WEBPACK_IMPORTED_MODULE_2__["weekNotesRepo"].mem.subscribe(this.onChange);
    };
    WeekNotebook.prototype.showProgressIfLoadingTakesTime = function () {
        var _this = this;
        this.timeoutHandle = setTimeout(function () { return _this.state.isLoading && _this.setState({ showLoadingProgress: true }); }, 300);
    };
    WeekNotebook.prototype.componentWillUnmount = function () {
        _repos_week_notes_repo__WEBPACK_IMPORTED_MODULE_2__["weekNotesRepo"].mem.unsubscribe(this.onChange);
        this.autoSaver.stop();
        clearTimeout(this.timeoutHandle);
    };
    WeekNotebook.prototype._save = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var maxIterations;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        maxIterations = 3;
                        _a.label = 1;
                    case 1:
                        if (!(this.isNotesEdited() && maxIterations)) return [3 /*break*/, 4];
                        return [4 /*yield*/, _repos_week_notes_repo__WEBPACK_IMPORTED_MODULE_2__["weekNotesRepo"].upsert(this.state.weekNote, function (wn) {
                                wn.content = _this.state.notes;
                            })];
                    case 2:
                        _a.sent();
                        _a.label = 3;
                    case 3:
                        --maxIterations;
                        return [3 /*break*/, 1];
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    WeekNotebook.prototype.save = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var err_1;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!(!this.state.showSavingProgress && !this.state.isLoading && this.isNotesEdited())) return [3 /*break*/, 8];
                        return [4 /*yield*/, this.setState({ error: undefined })];
                    case 1:
                        _a.sent();
                        _a.label = 2;
                    case 2:
                        _a.trys.push([2, 4, 6, 8]);
                        return [4 /*yield*/, Object(_utils_if_takes_time__WEBPACK_IMPORTED_MODULE_10__["ifTakesTime"])(300, function () { return _this._save(); }, function () { return _this.setState({ showSavingProgress: true }); })];
                    case 3:
                        _a.sent();
                        return [3 /*break*/, 8];
                    case 4:
                        err_1 = _a.sent();
                        console.error(err_1);
                        return [4 /*yield*/, this.setState({ error: this.context.intl.formatMessage({ id: "common.errorSavingData", defaultMessage: "Kunde inte spara." }) })];
                    case 5:
                        _a.sent();
                        return [3 /*break*/, 8];
                    case 6: return [4 /*yield*/, this.setState({ showSavingProgress: false })];
                    case 7:
                        _a.sent();
                        return [7 /*endfinally*/];
                    case 8: return [2 /*return*/];
                }
            });
        });
    };
    WeekNotebook.prototype.isNotesEdited = function () {
        var _a = this.state, weekNote = _a.weekNote, notes = _a.notes;
        return !!weekNote && (notes !== weekNote.content);
    };
    //If the notebook should be used in multiple modules, move this functions into an utility file
    WeekNotebook.prototype.getTranslatedActions = function (intl) {
        //actions might have different icons for each language
        //we keep the same structure of the actions, but we replace the texts with the ones from the translated files
        var localeActions = Object.assign({}, intl.locale === "sv" ? _utility_components_wysiwyg_actions_sv__WEBPACK_IMPORTED_MODULE_7__["default"] : _utility_components_wysiwyg_actions__WEBPACK_IMPORTED_MODULE_8__["default"]);
        Object.keys(localeActions).forEach(function (elem) {
            var currentTitle = _utility_components_wysiwyg_actions_sv__WEBPACK_IMPORTED_MODULE_7__["default"][elem].title;
            localeActions[elem].title = intl.formatMessage({ id: "wysiwyg." + elem, defaultMessage: currentTitle });
            //because the image action needs a custom translation, we treat this separately
            if (elem === "image") {
                localeActions[elem].promptMsg = intl.formatMessage({ id: "wysiwyg.imagePromptMsg", defaultMessage: _utility_components_wysiwyg_actions_sv__WEBPACK_IMPORTED_MODULE_7__["default"][elem].promptMsg });
            }
        });
        return localeActions;
    };
    WeekNotebook.prototype.onChange = function (weekNotes) {
        var weekNote = weekNotes.length > 0 ?
            weekNotes[weekNotes.length - 1] :
            {
                id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_4__["createUUID"])(),
                dateTime: Date.now(),
                //dateTime: weekNotesRepo.getCurrentWeek().toDate().getTime(),
                content: "",
                acl: [
                    // Default ACL: Let user self have full control over this item:
                    new kedbackend_client__WEBPACK_IMPORTED_MODULE_4__["DocumentAccess"]("email", _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser.mail, "S")
                ].map(function (ac) { return ac.toString(); })
            };
        var newState = {
            weekNote: weekNote,
            //week: weekNotesRepo.getCurrentWeek().week(),
            isLoading: false,
            showLoadingProgress: false
        };
        if (!this.state.weekNote || this.state.weekNote.id !== weekNote.id || weekNotes.length === 0) {
            newState.notes = weekNote.content;
        }
        this.setState(newState);
    };
    /*async changeWeek(direction: number) {
      try {
        await this.setState({
          isLoading: true,
          everEdited: false,
          weekNote: null,
          error: undefined
        });
        this.showProgressIfLoadingTakesTime();
        await weekNotesRepo.changeWeek(direction);
      } catch (err) {
        console.error(err);
        await this.setState({error: "Kunde inte ladda data"});
      }
    }
  
    prevWeek() {
      this.changeWeek(-1);
    }
  
    nextWeek() {
      this.changeWeek(1);
    }*/
    WeekNotebook.prototype.render = function () {
        var _this = this;
        var _a = this.state, notes = _a.notes, showLoadingProgress = _a.showLoadingProgress, isLoading = _a.isLoading, showSavingProgress = _a.showSavingProgress, error = _a.error, everEdited = _a.everEdited;
        var intl = this.context.intl;
        return (react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "ked_boxed kedNotepad" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h3", null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_intl__WEBPACK_IMPORTED_MODULE_11__["FormattedMessage"], { id: "weekNotebook.title", defaultMessage: "Anteckningar" })),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_wysiwyg__WEBPACK_IMPORTED_MODULE_6__["Wysiwyg"], { actions: [
                        "bold",
                        "italic",
                        "underline",
                        "strikethrough",
                        "heading1",
                        "heading2",
                        "heading3",
                        "olist",
                        "ulist",
                        "outdent",
                        "indent",
                        "line"
                    ], defaultActions: this.getTranslatedActions(intl), html: isLoading ? "<div></div>" : notes.substr(0, MAX_NOTE_LENGTH), onChange: !isLoading && (function (html) {
                        _this.setState({
                            notes: html.substr(0, MAX_NOTE_LENGTH),
                            everEdited: true
                        });
                        _this.autoSaver.triggerChange(500);
                    }) }),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("hr", null),
                error ?
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", { className: "error" }, error) :
                    showLoadingProgress ?
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("span", null,
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_intl__WEBPACK_IMPORTED_MODULE_11__["FormattedMessage"], { id: "common.loading", defaultMessage: "Laddar..." }),
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_9__["Spinner"], null)) :
                        showSavingProgress ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("span", null,
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_intl__WEBPACK_IMPORTED_MODULE_11__["FormattedMessage"], { id: "common.saving", defaultMessage: "Sparar..." }),
                                " \u00A0 "),
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_9__["Spinner"], null)) :
                            this.isNotesEdited() ?
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null, "\u00A0") :
                                everEdited ?
                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_intl__WEBPACK_IMPORTED_MODULE_11__["FormattedMessage"], { id: "common.saved", defaultMessage: "Sparad" }) :
                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null, "\u00A0"))));
    };
    WeekNotebook.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_12__["LanguageContext"];
    return WeekNotebook;
}(react__WEBPACK_IMPORTED_MODULE_1___default.a.Component));



/***/ }),

/***/ "./src/components/weekplanner/add-custom-goal.tsx":
/*!********************************************************!*\
  !*** ./src/components/weekplanner/add-custom-goal.tsx ***!
  \********************************************************/
/*! exports provided: AddCustomGoal */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AddCustomGoal", function() { return AddCustomGoal; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");



var AddCustomGoal = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](AddCustomGoal, _super);
    function AddCustomGoal(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            learningGoal: props.learningGoal || ''
        };
        return _this;
    }
    AddCustomGoal.prototype.render = function () {
        var _this = this;
        var learningGoal = this.state.learningGoal;
        var onSave = this.props.onSave;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet sv-skip-spacer" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_2__["FormattedMessage"], { id: "weekplanner.addLearningGoalTitle", defaultMessage: "L\u00E4gg till eget l\u00E4randem\u00E5l" })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_2__["FormattedMessage"], { id: "weekplanner.addLearningGoal", defaultMessage: "M\u00E5l" })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { type: "text", tabIndex: 1, size: 50, autoFocus: true, value: learningGoal, onChange: function (e) { return _this.setState({ learningGoal: e.target.value }); } })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top spaced" })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null)),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { tabIndex: 1, className: "btn btn-large btn-default", onClick: function () { return onSave(learningGoal); } },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_2__["FormattedMessage"], { id: "common.save", defaultMessage: "save" }))));
    };
    return AddCustomGoal;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/weekplanner/add-custom-task.tsx":
/*!********************************************************!*\
  !*** ./src/components/weekplanner/add-custom-task.tsx ***!
  \********************************************************/
/*! exports provided: AddCustomTask */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AddCustomTask", function() { return AddCustomTask; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utility-components/form-field-text-input */ "./src/components/utility-components/form-field-text-input.tsx");
/* harmony import */ var _utility_components_form_field_textarea__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utility-components/form-field-textarea */ "./src/components/utility-components/form-field-textarea.tsx");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");






var AddCustomTask = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](AddCustomTask, _super);
    function AddCustomTask(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            name: '',
            description: '',
            url: ''
        };
        return _this;
    }
    AddCustomTask.prototype.render = function () {
        var _this = this;
        var _a = this.state, name = _a.name, description = _a.description, url = _a.url;
        var _b = this.props, isTask = _b.isTask, onSave = _b.onSave;
        var intl = this.context.intl;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet sv-skip-spacer" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_5__["FormattedMessage"], { id: "customTask.addWorkGoalTitle", defaultMessage: "L\u00E4gg till eget arbetsm\u00E5l" })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_2__["TextInput"], { label: intl.formatMessage({ id: 'common.nameLabel', defaultMessage: 'Namn' }), id: "AddCustomTask:name", placeholder: intl.formatMessage({ id: 'customTask.enterNamePlhd', defaultMessage: 'Ange namn...' }), value: name, autoFocus: true, onChange: function (name) { return _this.setState({ name: name }); } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_textarea__WEBPACK_IMPORTED_MODULE_3__["TextAreaFormField"], { rows: 7, label: intl.formatMessage({ id: 'common.descriptionLabel', defaultMessage: 'Beskrivning' }), id: "AddCustomTask:description", placeholder: intl.formatMessage({ id: 'common.addDescriptionPlhd', defaultMessage: "Lgg till en beskrivning..." }), value: description, onChange: function (description) { return _this.setState({ description: description }); } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_2__["TextInput"], { label: intl.formatMessage({ id: 'common.linkLabel', defaultMessage: 'Lnk' }), id: "AddCustomTask:url", placeholder: "http://www...", value: url, onChange: function (url) { return _this.setState({ url: url }); } })),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { tabIndex: 1, className: "btn btn-large btn-default", onClick: function () { return onSave(name, description, url); } },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_5__["FormattedMessage"], { id: "common.save", defaultMessage: "Spara" }))));
    };
    AddCustomTask.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_4__["LanguageContext"];
    return AddCustomTask;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/weekplanner/add-or-edit-sub-task.tsx":
/*!*************************************************************!*\
  !*** ./src/components/weekplanner/add-or-edit-sub-task.tsx ***!
  \*************************************************************/
/*! exports provided: AddOrEditSubTask */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AddOrEditSubTask", function() { return AddOrEditSubTask; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utility-components/form-field-text-input */ "./src/components/utility-components/form-field-text-input.tsx");
/* harmony import */ var _utility_components_form_field_textarea__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utility-components/form-field-textarea */ "./src/components/utility-components/form-field-textarea.tsx");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");







var AddOrEditSubTask = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](AddOrEditSubTask, _super);
    function AddOrEditSubTask(props) {
        var _this = _super.call(this, props) || this;
        if (props.mode === 'edit') {
            var subTask = props.subTask;
            _this.state = {
                name: subTask.name || '',
                description: subTask.description || '',
                url: subTask.url || ''
            };
        }
        else {
            _this.state = {
                name: '',
                description: '',
                url: ''
            };
        }
        return _this;
    }
    AddOrEditSubTask.prototype.save = function () {
        // Update repo:
        var props = this.props;
        var userTask = props.userTask, closeDialog = props.closeDialog, userTasksRepo = props.userTasksRepo;
        var _a = this.state, name = _a.name, description = _a.description, url = _a.url;
        if (props.mode === 'edit') {
            // Edit existing:
            userTasksRepo.update([userTask], function (ut) {
                var subTasks = ut.subTasks;
                if (subTasks) {
                    ut.subTasks = subTasks.map(function (st) {
                        return st.id === props.subTask.id ? tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, st, { name: name, description: description, url: url }) : tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, st);
                    });
                }
            });
        }
        else {
            // Create new task
            var newSubTask_1 = {
                id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_4__["createUUID"])(),
                name: name,
                description: description,
                url: url
            };
            // Update repo:
            userTasksRepo.update([userTask], function (ut) {
                if (!ut.subTasks) {
                    ut.subTasks = [];
                }
                ut.subTasks = ut.subTasks.concat(newSubTask_1);
            });
        }
        // Close dialog
        closeDialog();
    };
    AddOrEditSubTask.prototype.delete = function () {
        // Update repo:
        var props = this.props;
        if (props.mode !== 'edit') {
            throw new Error("Can only delete in edit mode");
        }
        props.userTasksRepo.update([props.userTask], function (ut) {
            if (ut.subTasks) {
                ut.subTasks = ut.subTasks.filter(function (t) { return t.id !== props.subTask.id; });
            }
        });
        // Close dialog:
        props.closeDialog();
    };
    AddOrEditSubTask.prototype.render = function () {
        var _this = this;
        var _a = this.state, name = _a.name, description = _a.description, url = _a.url;
        var props = this.props;
        var isEditMode = props.mode === 'edit';
        var intl = this.context.intl;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet sv-skip-spacer" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null, isEditMode ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_5__["FormattedMessage"], { id: "addeditsubtask.editSubtask", defaultMessage: 'Redigera underuppgift' }) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_5__["FormattedMessage"], { id: "addeditsubtask.addSubtask", defaultMessage: 'L\u00E4gg till underuppgift' })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_2__["TextInput"], { autoFocus: true, label: intl.formatMessage({ id: 'addeditsubtask.nameLabel', defaultMessage: 'Underuppgiftens namn' }), id: "AddUserSubTask:name", placeholder: "", value: this.state.name, onChange: function (name) { return _this.setState({ name: name }); } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_textarea__WEBPACK_IMPORTED_MODULE_3__["TextAreaFormField"], { label: intl.formatMessage({ id: 'common.descriptionLabel', defaultMessage: 'Beskrivning' }), id: "AddUserSubTask:description", rows: 7, placeholder: "", value: this.state.description, onChange: function (description) { return _this.setState({ description: description }); } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_2__["TextInput"], { label: intl.formatMessage({ id: 'common.linkLabel', defaultMessage: 'Lnk' }), id: "AddUserSubTask:url", placeholder: "", value: this.state.url, onChange: function (url) { return _this.setState({ url: url }); } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null)),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet" },
                props.mode === 'edit' && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { className: "btn btn-warning btn-large pull-right", onClick: function (ev) { return _this.delete(); } },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_5__["FormattedMessage"], { id: "addeditsubtask.deleteSubtask", defaultMessage: "Ta bort underuppgift" })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { tabIndex: 1, className: "btn btn-large btn-default", onClick: function () { return _this.save(); } },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_5__["FormattedMessage"], { id: "common.save", defaultMessage: "Spara" }))));
    };
    AddOrEditSubTask.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_6__["LanguageContext"];
    return AddOrEditSubTask;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/weekplanner/edit-user-task.tsx":
/*!*******************************************************!*\
  !*** ./src/components/weekplanner/edit-user-task.tsx ***!
  \*******************************************************/
/*! exports provided: EditUserTask */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditUserTask", function() { return EditUserTask; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _get_task_type__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./get-task-type */ "./src/components/weekplanner/get-task-type.ts");
/* harmony import */ var react_datepicker__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-datepicker */ "./node_modules/react-datepicker/es/index.js");
/* harmony import */ var _globals_moment_sv_locale__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../globals/moment-sv-locale */ "./src/globals/moment-sv-locale.ts");
/* harmony import */ var _utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utility-components/form-field-text-input */ "./src/components/utility-components/form-field-text-input.tsx");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _utility_components_form_field__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utility-components/form-field */ "./src/components/utility-components/form-field.tsx");
/* harmony import */ var _add_or_edit_sub_task__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./add-or-edit-sub-task */ "./src/components/weekplanner/add-or-edit-sub-task.tsx");
/* harmony import */ var _utility_components_form_field_textarea__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../utility-components/form-field-textarea */ "./src/components/utility-components/form-field-textarea.tsx");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");












var EditUserTask = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](EditUserTask, _super);
    function EditUserTask(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            userTask: props.userTask,
            name: props.userTask.name,
            description: props.userTask.description,
            url: props.userTask.url,
            deadline: props.userTask.deadline,
            subTasks: props.userTask.subTasks
        };
        _this.onUserTasksChanged = _this.onUserTasksChanged.bind(_this);
        return _this;
    }
    EditUserTask.prototype.componentDidMount = function () {
        this.props.userTasksRepo.subscribe(this.onUserTasksChanged);
    };
    EditUserTask.prototype.onUserTasksChanged = function (userTasks) {
        var _this = this;
        var myUserTask = userTasks.find(function (ut) { return ut.id === _this.props.userTask.id; });
        if (!myUserTask) {
            this.props.closeDialog();
            return;
        }
        this.setState({
            userTask: myUserTask,
            subTasks: myUserTask.subTasks
        });
    };
    EditUserTask.prototype.componentWillUnmount = function () {
        this.props.userTasksRepo.unsubscribe(this.onUserTasksChanged);
    };
    EditUserTask.prototype.isModified = function () {
        // Don't count subtask changes! They live their own life and is maintained
        // in add-or-edit-sub-task.tsx. Reason: User would expect added /edited subtasks
        // to be persisted right away. May click away this dialog.
        // Also reason: Can invoke that dialog by itself from other components. From WeekPlanner
        // when clicking the subtask for example!
        var _a = this.state, deadline = _a.deadline, description = _a.description, name = _a.name, url = _a.url, userTask = _a.userTask;
        return (deadline !== userTask.deadline ||
            description !== userTask.description ||
            name !== userTask.name ||
            url !== userTask.url);
    };
    EditUserTask.prototype.addSubTask = function () {
        this.props.openDialog(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_or_edit_sub_task__WEBPACK_IMPORTED_MODULE_8__["AddOrEditSubTask"], { mode: "add", userTask: this.state.userTask, closeDialog: this.props.closeDialog, userTasksRepo: this.props.userTasksRepo }));
    };
    EditUserTask.prototype.editSubTask = function (subTask) {
        this.props.openDialog(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_or_edit_sub_task__WEBPACK_IMPORTED_MODULE_8__["AddOrEditSubTask"], { mode: "edit", subTask: subTask, userTask: this.state.userTask, closeDialog: this.props.closeDialog, userTasksRepo: this.props.userTasksRepo }));
    };
    EditUserTask.prototype.render = function () {
        var _this = this;
        var _a = this.state, name = _a.name, description = _a.description, url = _a.url, deadline = _a.deadline, subTasks = _a.subTasks, showCalendar = _a.showCalendar, userTask = _a.userTask;
        var id = userTask.id, courseName = userTask.courseName;
        var _b = this.props, onUpdate = _b.onUpdate, onDelete = _b.onDelete;
        var isModified = this.isModified();
        var taskType = Object(_get_task_type__WEBPACK_IMPORTED_MODULE_2__["getTaskType"])(userTask);
        var isCustomTask = taskType === 'customTask';
        var expired = moment__WEBPACK_IMPORTED_MODULE_6___default()(userTask.deadline) < moment__WEBPACK_IMPORTED_MODULE_6___default()();
        var intl = this.context.intl;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "editTaskDialog sv-html-portlet sv-portlet sv-skip-spacer" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null, isCustomTask ?
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "task.editWorkGoals", defaultMessage: 'Redigera arbetsm\u00E5l' }) :
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "task.editTask", defaultMessage: 'Redigera uppgift' })),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_5__["TextInput"], { autoFocus: true, label: isCustomTask ? intl.formatMessage({ id: 'task.targetNameLabel', defaultMessage: 'Arbetsmlets namn' }) : intl.formatMessage({ id: 'task.taskNameLabel', defaultMessage: 'Uppgiftens namn' }), id: "EditUserTask:name", placeholder: isCustomTask ? intl.formatMessage({ id: 'task.whatShouldYouDoPlhd', defaultMessage: 'Vad ska du gra?' }) : intl.formatMessage({ id: 'task.enterTaskNamePlhd', defaultMessage: 'Ange uppgiftens namn...' }), value: name, onChange: function (name) { return _this.setState({ name: name }); } }),
            isCustomTask && react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_textarea__WEBPACK_IMPORTED_MODULE_9__["TextAreaFormField"], { rows: 5, label: intl.formatMessage({ id: 'common.descriptionLabel', defaultMessage: 'Beskrivning' }), id: "EditUserTask:description", placeholder: intl.formatMessage({ id: 'common.addDescriptionPlhd', defaultMessage: 'Lgg till en beskrivning...' }), value: description, onChange: function (description) { return _this.setState({ description: description }); } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_5__["TextInput"], { label: intl.formatMessage({ id: 'common.linkLabel', defaultMessage: "Lnk" }), id: "EdutUserTask:url", placeholder: "http(s)://...", value: url, onChange: function (url) { return _this.setState({ url: url }); } })),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field__WEBPACK_IMPORTED_MODULE_7__["FormField"], { label: intl.formatMessage({ id: 'task.setDeadline', defaultMessage: 'Ange deadline' }) }, (deadline || showCalendar) ?
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_datepicker__WEBPACK_IMPORTED_MODULE_3__["default"], { ref: function (elem) { return _this.datePicker = elem; }, id: "EditUserTask:deadline", nextMonthButtonLabel: "", previousMonthButtonLabel: "", showWeekNumbers: true, selected: deadline && moment__WEBPACK_IMPORTED_MODULE_6___default()(deadline).toDate(), autoFocus: showCalendar, dateFormat: "YYYY-MM-dd", className: expired ? "expired" : undefined, locale: intl.locale, popperPlacement: isCustomTask ? "top-start" : "bottom-start", onBlur: function () { return _this.setState({ showCalendar: false }); }, onChange: function (value) {
                                _this.setState({
                                    deadline: value && moment__WEBPACK_IMPORTED_MODULE_6___default()(value).format("YYYY-MM-DD"),
                                    showCalendar: false
                                });
                            } })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "deleteDate", href: "#", title: intl.formatMessage({ id: 'task.removeDeadline', defaultMessage: 'Ta bort deadline' }), onClick: function (ev) {
                                ev.preventDefault();
                                _this.setState({ deadline: null, showCalendar: false });
                            } }))) :
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "top", ref: function () { _this.datePicker = null; } },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "btn", onClick: function (ev) {
                            if (_this.datePicker) {
                                _this.datePicker.setOpen(true);
                            }
                            _this.setState({
                                showCalendar: true
                            });
                        } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-calendar", "aria-hidden": "true" }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "task.setDeadlineLabel", defaultMessage: "Ange deadline..." })))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field__WEBPACK_IMPORTED_MODULE_7__["FormField"], { label: intl.formatMessage({ id: 'task.subTasks', defaultMessage: 'Underuppgifter' }) },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "learningGoalTasks" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "taskContainer" }, subTasks && subTasks.map(function (subTask) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: subTask.id, className: "align-horizontal" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { onClick: function () { return _this.editSubTask(subTask); }, href: "#" }, subTask.name))); }))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { id: "EditUserTask:addSubTask", className: "btn", onClick: function () { return _this.addSubTask(); } },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-plus", "aria-hidden": "true" }),
                            " ",
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "task.addSubtask", defaultMessage: "L\u00E4gg till underuppgift" }))))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "divider large" }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalButton top" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { tabIndex: 1, className: "btn btn-default", onClick: function () {
                            isModified ? onUpdate(function (userTask) {
                                userTask.name = name;
                                userTask.description = description;
                                userTask.url = url;
                                userTask.deadline = deadline;
                            }) : _this.props.closeDialog();
                        } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "common.save", defaultMessage: "Spara" }))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalButton top" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { tabIndex: 1, className: "btn", onClick: function () {
                            _this.props.closeDialog();
                        } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "common.cancel", defaultMessage: "Avbryt" }))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "confirm top pull-right" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { tabIndex: 1, className: "btn btn-warning", onClick: function () {
                            onDelete(id);
                        } }, isCustomTask ?
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "task.removeWorkGoals", defaultMessage: "Ta bort arbetsm\u00E5l" }) :
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "task.removeThisTask", defaultMessage: "Ta bort den h\u00E4r uppgiften" })))));
    };
    EditUserTask.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_11__["LanguageContext"];
    return EditUserTask;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/weekplanner/get-task-type.ts":
/*!*****************************************************!*\
  !*** ./src/components/weekplanner/get-task-type.ts ***!
  \*****************************************************/
/*! exports provided: getTaskType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTaskType", function() { return getTaskType; });
function getTaskType(userTask) {
    return userTask.course && userTask.task && userTask.course.length > 0 && userTask.task.length > 0 ?
        'courseBuilderTask' :
        userTask.siteVisionPageId ?
            'siteVisionTask' :
            userTask.courseInfo ?
                'subjectPlannerTask' :
                'customTask';
}


/***/ }),

/***/ "./src/components/weekplanner/index.ts":
/*!*********************************************!*\
  !*** ./src/components/weekplanner/index.ts ***!
  \*********************************************/
/*! exports provided: WeekPlanner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _weekplanner__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./weekplanner */ "./src/components/weekplanner/weekplanner.tsx");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "WeekPlanner", function() { return _weekplanner__WEBPACK_IMPORTED_MODULE_0__["WeekPlanner"]; });




/***/ }),

/***/ "./src/components/weekplanner/refiner.ts":
/*!***********************************************!*\
  !*** ./src/components/weekplanner/refiner.ts ***!
  \***********************************************/
/*! exports provided: refine */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "refine", function() { return refine; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/utils */ "./src/utils/utils.ts");


function refine(tasks) {
    var e_1, _a, e_2, _b;
    var result = [];
    var mapper = {};
    var tasksPerCourse = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["arrayToLookup"])(tasks, function (t) { return t.courseName || ''; });
    try {
        for (var _c = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](Object.keys(tasksPerCourse).sort().filter(function (x) { return x; }).concat(tasksPerCourse[''] ?
            [''] : [])), _d = _c.next(); !_d.done; _d = _c.next()) {
            var courseName = _d.value;
            var courseTasks = tasksPerCourse[courseName] || tasksPerCourse[''];
            var tasksPerLearningGoal = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["arrayToLookup"])(courseTasks, function (t) { return t.learningGoal; });
            var resultLearningGoals = [];
            try {
                for (var _e = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](Object.keys(tasksPerLearningGoal)), _f = _e.next(); !_f.done; _f = _e.next()) {
                    var learningGoal = _f.value;
                    var lgTasks = tasksPerLearningGoal[learningGoal].sort(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["compareProp"])("dateTime"));
                    var learningGoalTask = lgTasks
                        .filter(function (t) { return t.name == null; }) // If name is undefined or null, this represents a learning goal
                    [0];
                    var url = learningGoalTask && learningGoalTask.url;
                    resultLearningGoals.push({
                        name: learningGoal,
                        allTasks: lgTasks,
                        url: url,
                        step: lgTasks.map(function (t) { return t.step; }).filter(function (step) { return step; })[0],
                        tasks: lgTasks.filter(function (t) { return t.name; })
                    });
                }
            }
            catch (e_2_1) { e_2 = { error: e_2_1 }; }
            finally {
                try {
                    if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
                }
                finally { if (e_2) throw e_2.error; }
            }
            result.push({
                courseName: courseName,
                learningGoals: resultLearningGoals
            });
        }
    }
    catch (e_1_1) { e_1 = { error: e_1_1 }; }
    finally {
        try {
            if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
        }
        finally { if (e_1) throw e_1.error; }
    }
    return result;
}


/***/ }),

/***/ "./src/components/weekplanner/user-tasks-box.tsx":
/*!*******************************************************!*\
  !*** ./src/components/weekplanner/user-tasks-box.tsx ***!
  \*******************************************************/
/*! exports provided: UserTasksBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UserTasksBox", function() { return UserTasksBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");
/* harmony import */ var _access_control__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../access-control */ "./src/access-control/index.ts");
/* harmony import */ var _calendar_course_name_to_css_class__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../calendar/course-name-to-css-class */ "./src/components/calendar/course-name-to-css-class.ts");
/* harmony import */ var _get_task_type__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./get-task-type */ "./src/components/weekplanner/get-task-type.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _features__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../features */ "./src/features/index.ts");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");











;
var UserTasksBox = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](UserTasksBox, _super);
    function UserTasksBox(props) {
        return _super.call(this, props) || this;
    }
    UserTasksBox.prototype.render = function () {
        var _this = this;
        var _a = this.props, courseName = _a.courseName, learningGoals = _a.learningGoals, progressData = _a.progressData, displayProgress = _a.displayProgress;
        var isOpen = !!this.props.openCourses[courseName];
        var features = new _features__WEBPACK_IMPORTED_MODULE_7__["Features"]();
        var intl = this.context.intl;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_2__["OpenCloseBox"], { title: react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h5", null, courseName || react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_9__["FormattedMessage"], { id: "userTasks.goals", defaultMessage: "Egna l\u00E4randem\u00E5l" })), headerOpen: isOpen, className: courseName && Object(_calendar_course_name_to_css_class__WEBPACK_IMPORTED_MODULE_4__["courseNameToCssClass"])('wp-course-', courseName), onOpenClose: function (becameOpen) { return _this.props.setIsOpen(courseName, becameOpen); }, displayProgress: displayProgress, progressData: progressData }, learningGoals.map(function (lg) {
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: lg.name, className: "learningGoalContainer" },
                lg.step && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "stepIndicator" }, lg.step),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "learningGoalText horizontalItem top" }, lg.name),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem" },
                        "\u00A0",
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "trash", href: "#", title: intl.formatMessage({ id: 'userTasks.deleteLearningGoal', defaultMessage: 'Ta bort lrandemlet och dess uppgifter' }), onClick: function (ev) {
                                ev.preventDefault();
                                _this.props.removeLearningGoal(lg);
                            } },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-trash" })))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "learningGoalTasks" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "taskContainer" }, lg.tasks.map(function (userTask) {
                        var isWorking = userTask.$meta === 'adding' || userTask.$meta === 'deleting' || userTask.$meta === 'updating';
                        var taskType = Object(_get_task_type__WEBPACK_IMPORTED_MODULE_5__["getTaskType"])(userTask);
                        var expired = moment__WEBPACK_IMPORTED_MODULE_6___default()(userTask.deadline).startOf('day') < moment__WEBPACK_IMPORTED_MODULE_6___default()().startOf('day');
                        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: userTask.id, style: isWorking ? { opacity: 0.5 } : {} },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "checkBox" + (userTask.done ? " checked" : ""), onClick: function (ev) { return !isWorking && _this.props.setTaskDone(userTask, !userTask.done); } })),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                                    taskType === 'courseBuilderTask' ?
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: getTaskUrl(userTask, _this.props.viewCourseUrl) }, userTask.name) :
                                        taskType === 'subjectPlannerTask' ?
                                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: getSubjectPlannerTaskUrl(userTask) }, userTask.name) :
                                            taskType === 'siteVisionTask' ?
                                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: userTask.url }, userTask.name) :
                                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: !userTask.url ? "link-less" : "", href: userTask.url || undefined, target: (userTask.url + '').toLowerCase().startsWith(location.host.toLowerCase()) ?
                                                        "_self" :
                                                        "_blank" }, userTask.name),
                                    userTask.deadline && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "dateSet" + (expired ? ' expired' : '') },
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { title: moment__WEBPACK_IMPORTED_MODULE_6___default()(userTask.deadline).format("YYYY-MM-DD"), className: "fa fa-calendar", "aria-hidden": "true", onClick: function () { } }))),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top taskEdit" },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "editItem", onClick: function () { return _this.props.editTask(userTask); } }))),
                            userTask.subTasks && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "subtasks" }, userTask.subTasks.map(function (subTask) {
                                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: subTask.id },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "checkBox" + (subTask.done ? " checked" : ""), onClick: function (ev) {
                                                return !isWorking &&
                                                    _this.props.setSubTaskDone(userTask, subTask, !subTask.done);
                                            } })),
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: subTask.url || undefined, target: (userTask.url + '').toLowerCase().startsWith(location.host.toLowerCase()) ?
                                                "_self" :
                                                "_blank", className: subTask.url ?
                                                undefined :
                                                'link-less' }, subTask.name)),
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top taskEdit" },
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "editItem", onClick: function () { return _this.props.editSubTask(userTask, subTask); } })));
                            })));
                    }))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "learningGoalTools" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn addOwnGoal", onClick: function () { return _this.props.addOwnTask(_this.props.courseName, lg.name); } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-plus", "aria-hidden": "true" }),
                        " ",
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_9__["FormattedMessage"], { id: 'userTasks.addLearningGoal', defaultMessage: 'Eget arbetsm\u00E5l' }))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null));
        }));
    };
    UserTasksBox.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_10__["LanguageContext"];
    return UserTasksBox;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

function getTaskUrl(userTask, viewCourseUrl) {
    if (userTask.course && userTask.course.length > 0 && userTask.task && userTask.task.length > 0) {
        var courseUrl = Object(_access_control__WEBPACK_IMPORTED_MODULE_3__["preserveImpersonationQuery"])(viewCourseUrl, { courseId: userTask.course[0].id });
        return courseUrl + "#/task/" + userTask.task[0].id;
    }
    return userTask.url;
}
function getSubjectPlannerTaskUrl(userTask) {
    if (userTask.courseInfo && userTask.task && userTask.task.length > 0) {
        var _a = userTask.courseInfo, school = _a.school, course = _a.course, tab = _a.tab;
        var courseUrl = Object(_access_control__WEBPACK_IMPORTED_MODULE_3__["preserveImpersonationQuery"])(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_8__["default"].KED_SUBJECT_PLANNER_URL, {});
        return courseUrl + "#/" + school + "/courses/" + course + "/tabs/" + tab + "/tasks/" + userTask.task[0].id;
    }
    return userTask.url;
}


/***/ }),

/***/ "./src/components/weekplanner/weekplanner-persisted-state.ts":
/*!*******************************************************************!*\
  !*** ./src/components/weekplanner/weekplanner-persisted-state.ts ***!
  \*******************************************************************/
/*! exports provided: WeekPlannerPersistedState */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WeekPlannerPersistedState", function() { return WeekPlannerPersistedState; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_moment_sv_locale__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../globals/moment-sv-locale */ "./src/globals/moment-sv-locale.ts");



var WeekPlannerPersistedState = /** @class */ (function () {
    function WeekPlannerPersistedState(userOrCopy) {
        if (typeof userOrCopy === 'string') {
            this.user = userOrCopy;
            this.lastWrite = Date.now();
            this.weekDate = Object(_globals_moment_sv_locale__WEBPACK_IMPORTED_MODULE_2__["localMoment"])().startOf('week').valueOf();
            this.openCourses = {};
        }
        else {
            Object.assign(this, userOrCopy);
        }
    }
    WeekPlannerPersistedState.load = function (user) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var cookie, storedData, state;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                cookie = localStorage.getItem('WeekPlannerPersistedState2');
                storedData = cookie && JSON.parse(cookie);
                state = new WeekPlannerPersistedState(user);
                if (storedData)
                    Object.assign(state, storedData);
                return [2 /*return*/, state.user === user && !state.isExpired(moment__WEBPACK_IMPORTED_MODULE_1___default()()) ?
                        state : new WeekPlannerPersistedState(user)];
            });
        });
    };
    WeekPlannerPersistedState.prototype.save = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                this.lastWrite = Date.now();
                json = JSON.stringify(this);
                localStorage.setItem('WeekPlannerPersistedState2', json);
                return [2 /*return*/];
            });
        });
    };
    WeekPlannerPersistedState.prototype.isExpired = function (asOf) {
        return moment__WEBPACK_IMPORTED_MODULE_1___default()(this.lastWrite)
            .isBefore(asOf.add(0 - WeekPlannerPersistedState.EXPIRATION_HOURS, 'hours'));
    };
    WeekPlannerPersistedState.EXPIRATION_HOURS = 12;
    WeekPlannerPersistedState.VERSION = 2;
    return WeekPlannerPersistedState;
}());



/***/ }),

/***/ "./src/components/weekplanner/weekplanner.tsx":
/*!****************************************************!*\
  !*** ./src/components/weekplanner/weekplanner.tsx ***!
  \****************************************************/
/*! exports provided: WeekPlanner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WeekPlanner", function() { return WeekPlanner; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _user_tasks_box__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./user-tasks-box */ "./src/components/weekplanner/user-tasks-box.tsx");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _refiner__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./refiner */ "./src/components/weekplanner/refiner.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _utility_components_dialogs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utility-components/dialogs */ "./src/components/utility-components/dialogs.tsx");
/* harmony import */ var _add_custom_goal__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./add-custom-goal */ "./src/components/weekplanner/add-custom-goal.tsx");
/* harmony import */ var _add_custom_task__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./add-custom-task */ "./src/components/weekplanner/add-custom-task.tsx");
/* harmony import */ var _edit_user_task__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./edit-user-task */ "./src/components/weekplanner/edit-user-task.tsx");
/* harmony import */ var _course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../course-builder/sub-components/spinner */ "./src/components/course-builder/sub-components/spinner.tsx");
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");
/* harmony import */ var _utils_pending_job__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../utils/pending-job */ "./src/utils/pending-job.ts");
/* harmony import */ var _add_or_edit_sub_task__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./add-or-edit-sub-task */ "./src/components/weekplanner/add-or-edit-sub-task.tsx");
/* harmony import */ var _utils_weekutil__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../utils/weekutil */ "./src/utils/weekutil.ts");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");
/* harmony import */ var _charts_progress__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../charts/progress */ "./src/components/charts/progress.tsx");
/* harmony import */ var _charts_charts_utils__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../charts/charts-utils */ "./src/components/charts/charts-utils.ts");
/* harmony import */ var _features__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../features */ "./src/features/index.ts");





















var MAX_STRATEGY_LENGTH = 16384;
var MAX_ASSESSMENT_LENGTH = 16384;
var WeekPlanner = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](WeekPlanner, _super);
    function WeekPlanner(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            userTasks: [],
            weekDate: Date.now(),
            openCourses: {},
            dialogs: [],
            saving: false,
            weekTextsUT: null,
            isLoading: true,
            isCopyingTasks: false
        };
        _this.onChange = _this.onChange.bind(_this);
        _this.weekTextsSavingJob = new _utils_pending_job__WEBPACK_IMPORTED_MODULE_13__["PendingJob"](function () { return _this.saveWeekTexts(); });
        return _this;
    }
    WeekPlanner.prototype.componentDidMount = function () {
        this.props.env.userTasksRepo.subscribe(this.onChange);
    };
    WeekPlanner.prototype.componentWillUnmount = function () {
        this.props.env.userTasksRepo.unsubscribe(this.onChange);
        this.weekTextsSavingJob.stop();
    };
    WeekPlanner.prototype.onChange = function (userTasks, persisted, weekTextsUT) {
        var newState = {
            userTasks: userTasks,
            weekDate: persisted.weekDate,
            openCourses: persisted.openCourses,
            weekTextsUT: weekTextsUT,
            isLoading: false
        };
        if (!this.state.weekTextsUT || (weekTextsUT.dateTime !== this.state.weekTextsUT.dateTime)) {
            // Changing week. Reset to new week's values
            newState.strategy = weekTextsUT.weekTexts.strategy;
            newState.assessment = weekTextsUT.weekTexts.assessment;
        }
        this.setState(newState); // React's use of Pick instead of Partial makes things complex here.
    };
    WeekPlanner.prototype.isWeekTextsEdited = function () {
        var _a = this.state, strategy = _a.strategy, assessment = _a.assessment, weekTextsUT = _a.weekTextsUT;
        return !!weekTextsUT && (strategy !== weekTextsUT.weekTexts.strategy || assessment !== weekTextsUT.weekTexts.assessment);
    };
    WeekPlanner.prototype.saveWeekTexts = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, strategy, assessment, weekTextsUT;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        console.log("Saving texts...");
                        _a = this.state, strategy = _a.strategy, assessment = _a.assessment, weekTextsUT = _a.weekTextsUT;
                        if (!this.isWeekTextsEdited()) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.props.env.userTasksRepo.upsert(weekTextsUT, function (ut) {
                                ut.weekTexts = { strategy: strategy, assessment: assessment };
                            })];
                    case 1:
                        _b.sent();
                        _b.label = 2;
                    case 2: return [2 /*return*/];
                }
            });
        });
    };
    WeekPlanner.prototype.prevWeek = function () {
        //this.saveWeekTexts(); 
        var prevWeekObj = Object(_utils_weekutil__WEBPACK_IMPORTED_MODULE_15__["getPrevWeekDate"])(moment__WEBPACK_IMPORTED_MODULE_6___default()(this.state.weekDate));
        this.props.env.userTasksRepo.changeWeek(prevWeekObj.nextDate, prevWeekObj.adjusted);
    };
    WeekPlanner.prototype.nextWeek = function () {
        //this.saveWeekTexts();
        var nextWeekObj = Object(_utils_weekutil__WEBPACK_IMPORTED_MODULE_15__["getNextWeekDate"])(moment__WEBPACK_IMPORTED_MODULE_6___default()(this.state.weekDate));
        this.props.env.userTasksRepo.changeWeek(nextWeekObj.nextDate, nextWeekObj.adjusted);
    };
    WeekPlanner.prototype.openDialog = function (dialog) {
        this.setState({ dialogs: tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](this.state.dialogs, [dialog]) });
    };
    WeekPlanner.prototype.openAddGoalDialog = function () {
        var _this = this;
        this.openDialog(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_custom_goal__WEBPACK_IMPORTED_MODULE_8__["AddCustomGoal"], { onSave: function (learningGoal) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            if (!learningGoal)
                                throw new Error(this.context.intl.formatMessage({ id: 'weekplanner.emptyLearningGoalErr', defaultMessage: 'Lrandemlet kan inte vara tomt' }));
                            if (!!this.state.saving) return [3 /*break*/, 5];
                            this.setState({ saving: true });
                            _a.label = 1;
                        case 1:
                            _a.trys.push([1, , 3, 4]);
                            return [4 /*yield*/, this.addCustomGoal(learningGoal)];
                        case 2:
                            _a.sent();
                            return [3 /*break*/, 4];
                        case 3:
                            this.setState({ saving: false });
                            return [7 /*endfinally*/];
                        case 4:
                            this.closeDialog();
                            _a.label = 5;
                        case 5: return [2 /*return*/];
                    }
                });
            }); } }));
    };
    WeekPlanner.prototype.openAddOwnTaskDialog = function (courseName, learningGoalName) {
        var _this = this;
        this.openDialog(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_custom_task__WEBPACK_IMPORTED_MODULE_9__["AddCustomTask"], { isTask: !courseName, onSave: function (name, description, url) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            if (!name)
                                throw new Error(this.context.intl.formatMessage({ id: 'weekplanner.nameCannotBeEmpty', defaultMessage: 'Namnet kan inte vara tomt' }));
                            if (!!this.state.saving) return [3 /*break*/, 5];
                            this.setState({ saving: true });
                            _a.label = 1;
                        case 1:
                            _a.trys.push([1, , 3, 4]);
                            return [4 /*yield*/, this.addCustomTask(courseName, learningGoalName, name, description, url)];
                        case 2:
                            _a.sent();
                            return [3 /*break*/, 4];
                        case 3:
                            this.setState({ saving: false });
                            return [7 /*endfinally*/];
                        case 4:
                            this.closeDialog();
                            _a.label = 5;
                        case 5: return [2 /*return*/];
                    }
                });
            }); } }));
    };
    WeekPlanner.prototype.editTask = function (userTask) {
        var _this = this;
        this.openDialog(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_edit_user_task__WEBPACK_IMPORTED_MODULE_10__["EditUserTask"], { userTasksRepo: this.props.env.userTasksRepo, userTask: userTask, onUpdate: function (updater) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                var test;
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            test = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, userTask);
                            updater(test);
                            if (!test.name)
                                throw new Error(this.context.intl.formatMessage({ id: 'weekplanner.nameMustNotBeEmpty', defaultMessage: 'Namnet fr inte vara tomt' }));
                            this.closeDialog();
                            return [4 /*yield*/, this.props.env.userTasksRepo.update([userTask], updater)];
                        case 1:
                            _a.sent();
                            return [2 /*return*/];
                    }
                });
            }); }, onDelete: function (id) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            this.closeDialog();
                            return [4 /*yield*/, this.props.env.userTasksRepo.delete([id])];
                        case 1:
                            _a.sent();
                            return [2 /*return*/];
                    }
                });
            }); }, openDialog: function (dialog) { return _this.openDialog(dialog); }, closeDialog: function () { return _this.closeDialog(); } }));
    };
    WeekPlanner.prototype.editSubTask = function (userTask, subTask) {
        var _this = this;
        this.openDialog(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_or_edit_sub_task__WEBPACK_IMPORTED_MODULE_14__["AddOrEditSubTask"], { userTasksRepo: this.props.env.userTasksRepo, mode: "edit", userTask: userTask, subTask: subTask, closeDialog: function () { return _this.closeDialog(); } }));
    };
    WeekPlanner.prototype.closeDialog = function () {
        this.setState({ dialogs: this.state.dialogs.slice(0, this.state.dialogs.length - 1) });
    };
    WeekPlanner.prototype.addCustomGoal = function (learningGoal) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var latestTimeStamp;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        latestTimeStamp = Math.max.apply(Math.max, [this.state.weekDate].concat(this.state.userTasks.map(function (t) { return t.dateTime; })));
                        return [4 /*yield*/, this.props.env.userTasksRepo.insert([{
                                    id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])(),
                                    learningGoal: learningGoal,
                                    dateTime: latestTimeStamp + 2000
                                }])];
                    case 1:
                        _a.sent();
                        return [4 /*yield*/, this.props.env.userTasksRepo.setWeekPlannerBoxOpen("", true)];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    WeekPlanner.prototype.removeLearningGoal = function (learningGoal) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (learningGoal.tasks.length > 0) {
                            if (!confirm(this.context.intl.formatMessage({ id: 'weekplanner.confirmRemoveLearningObjectives', defaultMessage: 'Ta bort lrandeml samt {learningGoalsNumber} uppgifter?' }, { learningGoalsNumber: learningGoal.tasks.length }))) {
                                return [2 /*return*/];
                            }
                        }
                        return [4 /*yield*/, this.props.env.userTasksRepo.delete(learningGoal.allTasks.map(function (t) { return t.id; }))];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    WeekPlanner.prototype.addCustomTask = function (courseName, learningGoal, name, description, url) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var latestTimeStamp;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        latestTimeStamp = Math.max.apply(Math.max, [this.state.weekDate].concat(this.state.userTasks.map(function (t) { return t.dateTime; })));
                        /*const emptyLearningGoalPlaceholder = this.state.userTasks.find(ut =>
                          ut.name == null &&
                          !ut.courseName &&
                          ut.learningGoal === learningGoal);
                    
                        if (emptyLearningGoalPlaceholder) {
                          // Hijack learning-goal placeholder and make it the real task.
                          // This will make the learning goal disappear once this task
                          // is deleted.
                          await userTasksRepo.update([emptyLearningGoalPlaceholder], ut => {
                            Object.assign(ut, { name, description, url });
                          });
                        } else {*/
                        // Add another task to same learning-goal
                        return [4 /*yield*/, this.props.env.userTasksRepo.insert([{
                                    id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])(),
                                    dateTime: latestTimeStamp + 2000,
                                    courseName: courseName,
                                    learningGoal: learningGoal,
                                    name: name,
                                    description: description,
                                    url: url
                                }])];
                    case 1:
                        /*const emptyLearningGoalPlaceholder = this.state.userTasks.find(ut =>
                          ut.name == null &&
                          !ut.courseName &&
                          ut.learningGoal === learningGoal);
                    
                        if (emptyLearningGoalPlaceholder) {
                          // Hijack learning-goal placeholder and make it the real task.
                          // This will make the learning goal disappear once this task
                          // is deleted.
                          await userTasksRepo.update([emptyLearningGoalPlaceholder], ut => {
                            Object.assign(ut, { name, description, url });
                          });
                        } else {*/
                        // Add another task to same learning-goal
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    WeekPlanner.prototype.setIsOpen = function (courseName, isOpen) {
        this.props.env.userTasksRepo.setWeekPlannerBoxOpen(courseName, isOpen);
    };
    WeekPlanner.prototype.setTaskDone = function (task, done) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.props.env.userTasksRepo.setTaskDoneState(task, done)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    WeekPlanner.prototype.setSubTaskDone = function (task, subTask, done) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.props.env.userTasksRepo.setSubTaskDoneState(task, subTask.id, done)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    WeekPlanner.prototype.copyFromPreviousWeek = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, userTasks_1, openCourses, weekDate, prevWeek, prevWeekNo, prevKEDWeek, prevTasks, test, latestTimeStamp_1, copies;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0: return [4 /*yield*/, this.setState({ isCopyingTasks: true })];
                    case 1:
                        _b.sent();
                        _b.label = 2;
                    case 2:
                        _b.trys.push([2, , 5, 6]);
                        _a = this.state, userTasks_1 = _a.userTasks, openCourses = _a.openCourses, weekDate = _a.weekDate;
                        prevWeek = moment__WEBPACK_IMPORTED_MODULE_6___default()(weekDate).add(-1, 'week');
                        prevWeekNo = Object(_utils_weekutil__WEBPACK_IMPORTED_MODULE_15__["getAdjustedWeek"])(prevWeek);
                        prevKEDWeek = Object(_utils_weekutil__WEBPACK_IMPORTED_MODULE_15__["KEDWeek"])(prevWeek.year(), prevWeekNo);
                        return [4 /*yield*/, this.props.env.kedBackendClient.list("usertasks", {
                                from: prevKEDWeek.notBefore,
                                to: prevKEDWeek.notAfter,
                                role: "USER",
                                include: ["task", "course", "acl"],
                                flags: ["includeIdsOnly"]
                            })];
                    case 3:
                        prevTasks = _b.sent();
                        prevTasks = prevTasks
                            .filter(function (prevTask) { return !prevTask.done; }) // Don't copy done tasks
                            .filter(function (prevTask) { return !!prevTask.name; }) // Don't copy empty learning goals
                            .filter(function (prevTask) { return !userTasks_1.some(function (taskOfCurrentWeek) {
                            return taskOfCurrentWeek.name === prevTask.name &&
                                taskOfCurrentWeek.learningGoal === prevTask.learningGoal &&
                                taskOfCurrentWeek.courseName === prevTask.courseName;
                        }); }); // Ignore identical tasks (already copied)
                        test = [weekDate].concat(userTasks_1.map(function (t) { return t.dateTime; }));
                        latestTimeStamp_1 = Math.max.apply(Math.max, [weekDate].concat(userTasks_1.map(function (t) { return t.dateTime; })));
                        copies = prevTasks.sort(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["compareProp"])("dateTime")).map(function (task) {
                            var copy = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, task, { dateTime: latestTimeStamp_1 += 1000 });
                            copy.id = Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])();
                            if (copy.subTasks) {
                                copy.subTasks = copy.subTasks.filter(function (st) { return !st.done; });
                            }
                            delete copy.$etag;
                            return copy;
                        });
                        // Store it
                        return [4 /*yield*/, this.props.env.userTasksRepo.insert(copies)];
                    case 4:
                        // Store it
                        _b.sent();
                        return [3 /*break*/, 6];
                    case 5:
                        this.setState({ isCopyingTasks: false });
                        return [7 /*endfinally*/];
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    WeekPlanner.prototype.getHeaderTitle = function () {
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h4", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.logBook", defaultMessage: "Loggbok" }));
    };
    WeekPlanner.prototype.render = function () {
        var _this = this;
        var weekNumber = moment__WEBPACK_IMPORTED_MODULE_6___default()(this.state.weekDate).week();
        var showProgressCharts = _features__WEBPACK_IMPORTED_MODULE_20__["features"].weekplannerCharts;
        //console.log("Weekydate: "  + new Date(this.state.weekDate) + " which is week no " + weekNumber);
        var currentWeek = moment__WEBPACK_IMPORTED_MODULE_6___default()().week();
        var taskSets = Object(_refiner__WEBPACK_IMPORTED_MODULE_4__["refine"])(this.state.userTasks);
        var _a = this.state, dialogs = _a.dialogs, weekTextsUT = _a.weekTextsUT, strategy = _a.strategy, assessment = _a.assessment, isLoading = _a.isLoading, isCopyingTasks = _a.isCopyingTasks;
        var isSaving = weekTextsUT && (weekTextsUT.$meta === 'adding' || weekTextsUT.$meta === 'updating');
        var isStrategyEdited = !!weekTextsUT && (strategy !== weekTextsUT.weekTexts.strategy);
        var isAssessmentEdited = !!weekTextsUT && (assessment !== weekTextsUT.weekTexts.assessment);
        var enableSaveButton = !isSaving && (isStrategyEdited || isAssessmentEdited);
        var chartTasks = Object(_charts_charts_utils__WEBPACK_IMPORTED_MODULE_19__["getWeekplannerProgressData"])(taskSets);
        var percentage = taskSets.length > 0 ? chartTasks.completedTasks / chartTasks.totalNumberOfTasks * 100 : 0;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "ked_boxed weekPlanner" + (weekNumber === currentWeek ? " currentWeek" : ""), onKeyDown: function (ev) {
                    if (ev.which === 83 && ev.ctrlKey) {
                        ev.preventDefault();
                        if (!isSaving && _this.isWeekTextsEdited()) {
                            _this.weekTextsSavingJob.triggerChange(0);
                        }
                    }
                } },
                showProgressCharts && this.getHeaderTitle(),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "widgets" },
                    showProgressCharts ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "progressBar" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_charts_progress__WEBPACK_IMPORTED_MODULE_18__["Progress"], { percentage: percentage })) : this.getHeaderTitle(),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "weekSelect" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.weekNumber", values: { weekNumber: weekNumber }, defaultMessage: "Vecka {weekNumber}" }))),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn-group" },
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { className: "btn", onClick: function () { return _this.prevWeek(); } },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-angle-left", "aria-hidden": "true" })),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { className: "btn", onClick: function () { return _this.nextWeek(); } },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-angle-right", "aria-hidden": "true" })))))),
                taskSets.length > 0 && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                taskSets.map(function (props) {
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_user_tasks_box__WEBPACK_IMPORTED_MODULE_2__["UserTasksBox"], tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({ key: props.courseName }, props, { courseName: props.courseName, learningGoals: props.learningGoals, viewCourseUrl: _this.props.viewCourseUrl, openCourses: _this.state.openCourses, addOwnTask: function (courseName, learningGoalName) { return _this.openAddOwnTaskDialog(courseName, learningGoalName); }, setIsOpen: _this.setIsOpen.bind(_this), setTaskDone: _this.setTaskDone.bind(_this), setSubTaskDone: _this.setSubTaskDone.bind(_this), editTask: function (task) { return _this.editTask(task); }, editSubTask: function (task, subTask) { return _this.editSubTask(task, subTask); }, removeLearningGoal: function (lg) { return _this.removeLearningGoal(lg); }, displayProgress: showProgressCharts, progressData: chartTasks.subjectData[props.courseName] }));
                }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                isLoading ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_11__["Spinner"], null) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn", onClick: function (ev) { return _this.openAddGoalDialog(); } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-list-alt", "aria-hidden": "true" }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.learningGoal", defaultMessage: "Eget l\u00E4randem\u00E5l" })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn", style: isCopyingTasks ? { opacity: 0.5 } : undefined, onClick: function (ev) { return (!isCopyingTasks) && _this.copyFromPreviousWeek(); } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-clone", "aria-hidden": "true" }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.copyPreviousWeekTaks", defaultMessage: "Kopiera ej klara fr\u00E5n f\u00F6reg\u00E5ende vecka" })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_12__["OpenCloseBox"], { title: react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h5", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.strategyAndEvaluation", defaultMessage: "Strategi & Utv\u00E4rdering" })), headerOpen: this.state.openCourses["StratUtv"], onOpenClose: function (becameOpen) { return _this.setIsOpen("StratUtv", becameOpen); } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h3", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.strategy", defaultMessage: "Strategi" })),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.strategyDescription", defaultMessage: "Hur jag ska g\u00F6ra f\u00F6r att l\u00E4ra mig." })),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("textarea", { className: "weekplanner-textarea", disabled: this.props.env.tutored, value: strategy && strategy.substr(0, MAX_STRATEGY_LENGTH), onChange: function (ev) {
                                _this.setState({ strategy: (ev.target.value || '').substr(0, MAX_STRATEGY_LENGTH) });
                                _this.weekTextsSavingJob.triggerChange(500);
                            } }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h3", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.evaluation", defaultMessage: "Utv\u00E4rdering" })),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.evaluationDescription", defaultMessage: "Reflektion kring din arbetsinsats och dina valda strategier under veckan.Utv\u00E4rdera i f\u00F6rh\u00E5llande till dina m\u00E5l." })),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("textarea", { className: "weekplanner-textarea", value: assessment && assessment.substr(0, MAX_ASSESSMENT_LENGTH), disabled: this.props.env.tutored, onChange: function (ev) {
                                _this.setState({ assessment: (ev.target.value || '').substr(0, MAX_ASSESSMENT_LENGTH) });
                                _this.weekTextsSavingJob.triggerChange(500);
                            } }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn", tabIndex: 0, style: enableSaveButton ? {} : { opacity: 0.5 }, onClick: function () { return !isSaving && _this.weekTextsSavingJob.triggerChange(0); } },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-floppy-o", "aria-hidden": "true" }),
                            enableSaveButton ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "common.save", defaultMessage: " Spara" }) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "common.saved", defaultMessage: " Sparad" }))))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_dialogs__WEBPACK_IMPORTED_MODULE_7__["Dialogs"], { dialogs: dialogs, popDialog: function () {
                    _this.setState(function (_a) {
                        var dialogs = _a.dialogs;
                        return ({ dialogs: dialogs.slice(0, dialogs.length - 1) });
                    });
                } }));
    };
    WeekPlanner.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_17__["LanguageContext"];
    return WeekPlanner;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/features/feature-flags.json":
/*!*****************************************!*\
  !*** ./src/features/feature-flags.json ***!
  \*****************************************/
/*! exports provided: picker, ksTutorComment, kgTutorComment, termplannerCharts, weekplannerCharts, teacherRights, studyGroups, cbCollapseBoxes, ksAssignments, default */
/***/ (function(module) {

module.exports = {"picker":"Integrate coursebuilder and subjectplanner with Google Picker","ksTutorComment":"Integrate KSTermplanner with tutor comments","kgTutorComment":"Integrate KSTermplanner  with tutor comments","termplannerCharts":"Integrate KSTermplanner with progress charts","weekplannerCharts":"Integrate Weekplanner with progress charts","teacherRights":"Activate course builder teacher rights","studyGroups":"Add study groups and google classroom functionality","cbCollapseBoxes":"Course Builder: Collapse modules by default","ksAssignments":"KS show hand-in assignments"};

/***/ }),

/***/ "./src/features/features.ts":
/*!**********************************!*\
  !*** ./src/features/features.ts ***!
  \**********************************/
/*! exports provided: Features, features */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Features", function() { return Features; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "features", function() { return features; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_query_string__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/query-string */ "./src/utils/query-string.ts");
/* harmony import */ var _feature_flags_json__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./feature-flags.json */ "./src/features/feature-flags.json");
var _feature_flags_json__WEBPACK_IMPORTED_MODULE_2___namespace = /*#__PURE__*/__webpack_require__.t(/*! ./feature-flags.json */ "./src/features/feature-flags.json", 1);
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");




var Features = /** @class */ (function () {
    function Features() {
        var e_1, _a;
        this._initialized = false;
        var _loop_1 = function (featureName) {
            Object.defineProperty(this_1, featureName, {
                get: function () {
                    if (!this._initialized)
                        this.init();
                    return this._features[featureName];
                },
                set: function (value) {
                    throw new Error('Feature flags cannot be set here');
                }
            });
        };
        var this_1 = this;
        try {
            for (var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](Object.keys(_feature_flags_json__WEBPACK_IMPORTED_MODULE_2__)), _c = _b.next(); !_c.done; _c = _b.next()) {
                var featureName = _c.value;
                _loop_1(featureName);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
    }
    Features.prototype.init = function () {
        var e_2, _a;
        if (this._initialized)
            return;
        var turnedOnFeatures = (_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_3__["cfg"].KED_FEATURES || "").split(',').map(function (name) { return name.trim().toLowerCase(); });
        var query = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_1__["parseQueryString"])(location.search, { toLower: true });
        if (query.testversion) {
            turnedOnFeatures = ["*"];
        }
        if (query.features) {
            turnedOnFeatures = query.features
                .split(',')
                .map(function (feature) { return feature.trim().toLowerCase(); });
        }
        var turnOnAll = turnedOnFeatures.includes('*');
        this._features = {};
        try {
            for (var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](Object.keys(_feature_flags_json__WEBPACK_IMPORTED_MODULE_2__)), _c = _b.next(); !_c.done; _c = _b.next()) {
                var featureName = _c.value;
                this._features[featureName] = turnOnAll ||
                    turnedOnFeatures.includes(featureName.toLowerCase());
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_2) throw e_2.error; }
        }
        this._initialized = true;
    };
    return Features;
}());

var features = new Features();


/***/ }),

/***/ "./src/features/index.ts":
/*!*******************************!*\
  !*** ./src/features/index.ts ***!
  \*******************************/
/*! exports provided: Features, features */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _features__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./features */ "./src/features/features.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Features", function() { return _features__WEBPACK_IMPORTED_MODULE_0__["Features"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "features", function() { return _features__WEBPACK_IMPORTED_MODULE_0__["features"]; });




/***/ }),

/***/ "./src/global-setters/configure.ts":
/*!*****************************************!*\
  !*** ./src/global-setters/configure.ts ***!
  \*****************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(process) {/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");

_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].ENVIRONMENT = "test";
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_API_URL = "https://backend.kedschools.com/kedbackend-next/api/"; // "https://kedbackendtest.azurewebsites.net/api/"
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].EDS_API_URL = "https://edsportalowinapitest.azurewebsites.net/studentportal/"; // "https://edsportalowinapi.azurewebsites.net/api/"
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_TOKEN_URL = ""; // "https://kedauthtest.azurewebsites.net/token"
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_CLIENT_ID = ""; // "devclient", "testclient", "..."
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_CLIENT_SECRET = "";
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_REALM = "SE1"; // "SE1"
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_LOCALE = _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_LOCALE || "sv"; // "sv", "en". Only set from process.env if not set from SiteVision element config.
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_SCHOOL_LOCALE = _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_SCHOOL_LOCALE || "sv"; // "sv", "en_sin", "en_nin". Only set from process.env if not set from SiteVision element config.
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_RESOURCES_URL = _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_RESOURCES_URL || process.env.KED_RESOURCES_URL;

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../node_modules/process/browser.js */ "./node_modules/process/browser.js")))

/***/ }),

/***/ "./src/global-setters/set-all.ts":
/*!***************************************!*\
  !*** ./src/global-setters/set-all.ts ***!
  \***************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _configure__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./configure */ "./src/global-setters/configure.ts");
/* harmony import */ var _set_bearer_providers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./set-bearer-providers */ "./src/global-setters/set-bearer-providers.ts");
/* harmony import */ var _set_ked_backend_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./set-ked-backend-client */ "./src/global-setters/set-ked-backend-client.ts");
/* harmony import */ var _set_eds_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./set-eds-client */ "./src/global-setters/set-eds-client.ts");
/* These scripts assume some of the global vars have already been set:
  * KED.cfg
  * KED.env.currentUser

  The rest will be set here (client side)
*/






/***/ }),

/***/ "./src/global-setters/set-bearer-providers.ts":
/*!****************************************************!*\
  !*** ./src/global-setters/set-bearer-providers.ts ***!
  \****************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_query_string__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/query-string */ "./src/utils/query-string.ts");
/* harmony import */ var kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend/clientweb */ "./kedbackend/clientweb.js");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _access_control_index__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../access-control/index */ "./src/access-control/index.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/utils */ "./src/utils/utils.ts");








function getMergedTokenPath(tokenPath, locationSearch, scopes) {
    // Merge configured query params of token path with params given to current page
    var currentQuery = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_1__["parseQueryString"])(locationSearch);
    var impersonationProps = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_7__["cherryPickProps"])(currentQuery, _access_control_index__WEBPACK_IMPORTED_MODULE_6__["IMPERSONATION_QUERY_PARAMS"]);
    var _a = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_1__["splitUrlAndQuery"])(tokenPath), 2), tokenPathWithoutQuery = _a[0], tokenQueryString = _a[1];
    var tokenPathQuery = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_1__["parseQueryString"])(tokenQueryString);
    return tokenPathWithoutQuery + Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_1__["generateQueryString"])(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, tokenPathQuery, impersonationProps, { scopes: scopes.join(',') }));
}
function getTokenId(mergedTokenPath, userEmail) {
    return mergedTokenPath + "/" + userEmail;
}
function saveUserInfo(user, tokenId) {
    _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser = user;
    sessionStorage.setItem("userInfo" + tokenId, JSON.stringify(user));
}
function loadUserInfo(tokenId) {
    var storedSessionUser = sessionStorage.getItem("userInfo" + tokenId);
    if (storedSessionUser) {
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser = JSON.parse(storedSessionUser);
    }
}
function createBearerProvider(mergedTokenPath, userEmail) {
    var tokenId = getTokenId(mergedTokenPath, userEmail);
    return new kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__["WebServerBearerProvider"](mergedTokenPath, function (responseText) {
        var res = JSON.parse(responseText);
        if (!res.ok)
            throw new Error(res.error);
        if (res.user) {
            saveUserInfo(res.user, tokenId);
        }
        return { token: res.token, expires: Date.now() + 59 * 60 * 1000 };
    }, tokenId);
}
function createGoogleTokenProvider(mergedTokenPath, userEmail) {
    var tokenId = getTokenId(mergedTokenPath, userEmail);
    return new kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__["WebServerBearerProvider"](mergedTokenPath, function (responseText) {
        var res = JSON.parse(responseText);
        if (!res.ok)
            throw new Error(res.error);
        return { token: res.token, expires: Date.now() + 59 * 60 * 1000 };
    }, tokenId);
}
function createTestTokenProvider(tokenUrl, user, scopes) {
    return new kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["KedBearerProvider"](kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__["isomorphic"], kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__["storage"], tokenUrl + user.mail + location.search, _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_CLIENT_ID, _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_CLIENT_SECRET, tokenUrl, {
        email: user.mail.toLowerCase(),
        roles: user.roles,
        school: user.school,
        schoolType: user.schoolType,
        scopes: scopes
    });
}
// env.currentUser.mail is set by SiteVision server initially.
// A response from /api/token may change the mail attribute of the current
// user, so env.currentUser.mail may be different after getting a response.
// However, the initial value is valuable always in order to distinguish the case
// when one normal user logs out and another user logs in.
var initialUserEmail = _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser && _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser.mail; // Initial value of mail. May change.
if (initialUserEmail) {
    // KED
    if (_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_TOKEN_PATH) {
        //
        //
        // Production / SiteVision proxied /api/token to request tokens from:
        //
        //
        var mergedTokenPath = getMergedTokenPath(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_TOKEN_PATH, location.search, [
            "kedbackend",
            "EDS",
        ]);
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].bearerProvider = createBearerProvider(mergedTokenPath, initialUserEmail);
        loadUserInfo(getTokenId(mergedTokenPath, initialUserEmail));
        // Google
        var googleMergedPath = getMergedTokenPath(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_TOKEN_PATH, location.search, [
            "https://www.googleapis.com/auth/calendar.readonly",
        ]);
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].googleTokenProvider = createGoogleTokenProvider(googleMergedPath, initialUserEmail);
    }
    else if (_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_TOKEN_URL && _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_CLIENT_ID && _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_CLIENT_SECRET) {
        //
        //
        // Test - go directly to KEDAUTH server to retrieve tokens
        //
        //
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].bearerProvider = createTestTokenProvider(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_TOKEN_URL, _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser, [
            "kedbackend",
            "EDS",
        ]);
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].googleTokenProvider = createTestTokenProvider(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_TOKEN_URL + "/google", _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser, [
            "https://www.googleapis.com/auth/calendar.readonly",
        ]);
    }
    else {
        throw new Error("Missing configuration parameter KED_TOKEN_PATH");
    }
}


/***/ }),

/***/ "./src/global-setters/set-eds-client.ts":
/*!**********************************************!*\
  !*** ./src/global-setters/set-eds-client.ts ***!
  \**********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend/clientweb */ "./kedbackend/clientweb.js");
/* harmony import */ var _apis_edsclient__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../apis/edsclient */ "./src/apis/edsclient.ts");




_globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].edsClient = new _apis_edsclient__WEBPACK_IMPORTED_MODULE_3__["EdsClient"](kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__["isomorphic"], _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_1__["default"].EDS_API_URL, _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].bearerProvider, function () { return _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser.mail; });


/***/ }),

/***/ "./src/global-setters/set-ked-backend-client.ts":
/*!******************************************************!*\
  !*** ./src/global-setters/set-ked-backend-client.ts ***!
  \******************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend/clientweb */ "./kedbackend/clientweb.js");



_globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].kedBackendClient = new kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__["KedBackendClientWeb"](_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_1__["default"].KED_API_URL, _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].bearerProvider);


/***/ }),

/***/ "./src/globals/KED.cfg.ts":
/*!********************************!*\
  !*** ./src/globals/KED.cfg.ts ***!
  \********************************/
/*! exports provided: default, cfg */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cfg", function() { return cfg; });
/* harmony import */ var _KED__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./KED */ "./src/globals/KED.ts");

;
if (!_KED__WEBPACK_IMPORTED_MODULE_0__["default"].cfg)
    _KED__WEBPACK_IMPORTED_MODULE_0__["default"].cfg = {};
/* harmony default export */ __webpack_exports__["default"] = (_KED__WEBPACK_IMPORTED_MODULE_0__["default"].cfg);
var cfg = _KED__WEBPACK_IMPORTED_MODULE_0__["default"].cfg;


/***/ }),

/***/ "./src/globals/KED.env.ts":
/*!********************************!*\
  !*** ./src/globals/KED.env.ts ***!
  \********************************/
/*! exports provided: default, env */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "env", function() { return env; });
/* harmony import */ var _ked__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ked */ "./src/globals/ked.ts");

if (!_ked__WEBPACK_IMPORTED_MODULE_0__["default"].env)
    _ked__WEBPACK_IMPORTED_MODULE_0__["default"].env = {};
/* harmony default export */ __webpack_exports__["default"] = (_ked__WEBPACK_IMPORTED_MODULE_0__["default"].env);
var env = _ked__WEBPACK_IMPORTED_MODULE_0__["default"].env;


/***/ }),

/***/ "./src/globals/KED.ts":
/*!****************************!*\
  !*** ./src/globals/KED.ts ***!
  \****************************/
/*! exports provided: KED_NAMESPACE, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KED_NAMESPACE", function() { return KED_NAMESPACE; });
var KED_NAMESPACE = "KED";
var result = typeof KED === 'undefined' ? {} : KED;
if (typeof window !== 'undefined' && typeof KED === 'undefined') {
    window[KED_NAMESPACE] = result;
}
/* harmony default export */ __webpack_exports__["default"] = (result);


/***/ }),

/***/ "./src/globals/KED.tutorEnv.ts":
/*!*************************************!*\
  !*** ./src/globals/KED.tutorEnv.ts ***!
  \*************************************/
/*! exports provided: TutorEnv, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TutorEnv", function() { return TutorEnv; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _ked__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ked */ "./src/globals/ked.ts");


var TutorEnv = /** @class */ (function () {
    function TutorEnv() {
        this.subscribers = [];
        this.env = null;
        this.version = 1;
    }
    //promise: Promise<Env | null> = Promise.resolve(null);
    TutorEnv.prototype.subscribe = function (subscriber) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                this.subscribers.push(subscriber);
                subscriber(this.env);
                return [2 /*return*/];
            });
        });
    };
    TutorEnv.prototype.unsubscribe = function (subscriber) {
        this.subscribers = this.subscribers.filter(function (s) { return s !== subscriber; });
    };
    TutorEnv.prototype.notifySubscribers = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                this.subscribers.forEach(function (s) { return s(_this.env); });
                return [2 /*return*/];
            });
        });
    };
    TutorEnv.prototype.setNewEnv = function (user, envGetter) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var version, env;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        version = ++this.version;
                        this.env = { currentUser: user, tutored: true };
                        this.notifySubscribers(); // Make subscriber display "Loading... user name"
                        return [4 /*yield*/, envGetter().catch(function (err) { return ({
                                currentUser: user,
                                tutored: true,
                                error: err
                            }); })];
                    case 1:
                        env = _a.sent();
                        if (version === this.version) {
                            // No one else has called setEnv during this call.
                            ++this.version;
                            this.env = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, env, { tutored: true });
                            this.notifySubscribers(); // Make subscribers display the data.
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    return TutorEnv;
}());

if (!_ked__WEBPACK_IMPORTED_MODULE_1__["default"].tutorEnv)
    _ked__WEBPACK_IMPORTED_MODULE_1__["default"].tutorEnv = new TutorEnv();
/* harmony default export */ __webpack_exports__["default"] = (_ked__WEBPACK_IMPORTED_MODULE_1__["default"].tutorEnv);


/***/ }),

/***/ "./src/globals/ked.ts":
/*!****************************!*\
  !*** ./src/globals/ked.ts ***!
  \****************************/
/*! exports provided: KED_NAMESPACE, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KED_NAMESPACE", function() { return KED_NAMESPACE; });
var KED_NAMESPACE = "KED";
var result = typeof KED === 'undefined' ? {} : KED;
if (typeof window !== 'undefined' && typeof KED === 'undefined') {
    window[KED_NAMESPACE] = result;
}
/* harmony default export */ __webpack_exports__["default"] = (result);


/***/ }),

/***/ "./src/globals/moment-sv-locale.ts":
/*!*****************************************!*\
  !*** ./src/globals/moment-sv-locale.ts ***!
  \*****************************************/
/*! exports provided: localMoment */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "localMoment", function() { return localMoment; });
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");


if (_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_1__["default"].KED_LOCALE === "sv") {
    moment__WEBPACK_IMPORTED_MODULE_0___default.a.updateLocale('sv', {
        months: 'januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december'.split('_'),
        monthsShort: 'jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec'.split('_'),
        weekdays: 'sndag_mndag_tisdag_onsdag_torsdag_fredag_lrdag'.split('_'),
        weekdaysShort: 'sn_mn_tis_ons_tor_fre_lr'.split('_'),
        weekdaysMin: 's_m_ti_on_to_fr_l'.split('_'),
        longDateFormat: {
            LT: 'HH:mm',
            LTS: 'HH:mm:ss',
            L: 'YYYY-MM-DD',
            LL: 'D MMMM YYYY',
            LLL: 'D MMMM YYYY [kl.] HH:mm',
            LLLL: 'dddd D MMMM YYYY [kl.] HH:mm',
            lll: 'D MMM YYYY HH:mm',
            llll: 'ddd D MMM YYYY HH:mm'
        },
        calendar: {
            sameDay: '[Idag] LT',
            nextDay: '[Imorgon] LT',
            lastDay: '[Igr] LT',
            nextWeek: '[P] dddd LT',
            lastWeek: '[I] dddd[s] LT',
            sameElse: 'L'
        },
        relativeTime: {
            future: 'om %s',
            past: 'fr %s sedan',
            s: 'ngra sekunder',
            ss: '%d sekunder',
            m: 'en minut',
            mm: '%d minuter',
            h: 'en timme',
            hh: '%d timmar',
            d: 'en dag',
            dd: '%d dagar',
            M: 'en mnad',
            MM: '%d mnader',
            y: 'ett r',
            yy: '%d r'
        },
        dayOfMonthOrdinalParse: /\d{1,2}(e|a)/,
        ordinal: function (number) {
            var b = number % 10, output = (~~(number % 100 / 10) === 1) ? 'e' :
                (b === 1) ? 'a' :
                    (b === 2) ? 'a' :
                        (b === 3) ? 'e' : 'e';
            return number + output;
        },
        week: {
            dow: 1,
            doy: 4 // The week that contains Jan 4th is the first week of the year.
        }
    });
}
var localMoment = function () {
    return moment__WEBPACK_IMPORTED_MODULE_0___default.a.apply(this, arguments).locale(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_1__["default"].KED_LOCALE);
};


/***/ }),

/***/ "./src/repos/hidden-courses-repo.ts":
/*!******************************************!*\
  !*** ./src/repos/hidden-courses-repo.ts ***!
  \******************************************/
/*! exports provided: hiddenCoursesRepo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hiddenCoursesRepo", function() { return hiddenCoursesRepo; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _ked_repo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ked-repo */ "./src/repos/ked-repo.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _apis_edsclient__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../apis/edsclient */ "./src/apis/edsclient.ts");
/* harmony import */ var _utils_school_moment__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/school-moment */ "./src/utils/school-moment.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_7__);








var hiddenCoursesRepo = _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].hiddenCoursesRepo;
var HiddenCoursesRepo = /** @class */ (function () {
    function HiddenCoursesRepo() {
        var _this = this;
        this.result = null;
        this.subscribers = [];
        this.fullCourse = false;
        this.notifySubscriber = function (subscriber, options) {
            try {
                subscriber(options.fullCourse ? _this.result : _this.result.filter(function (c) { return c.visible; }));
            }
            catch (err) {
                console.error(err);
            }
        };
        this.kedRepo = new _ked_repo__WEBPACK_IMPORTED_MODULE_1__["KedRepo"]({
            getClient: function () { return _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].kedBackendClient; },
            optimistic: true,
            table: "userhiddencourses",
            user: _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser ? _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.mail : "",
            getQueryOptions: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                return [2 /*return*/, ({ role: "USER" })];
            }); }); },
        });
        var initPromise = this.init();
        Promise.all([
            initPromise,
            this.kedCoursesPromise,
            this.edsCoursesPromise
        ]).catch(function (err) { return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["showError"])(err); });
    }
    HiddenCoursesRepo.prototype.init = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var bearerPromise, resolveUserHiddenCoursesPromise, userHiddenCoursesResolved;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        bearerPromise = _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].bearerProvider ? _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].bearerProvider.getBearer() : Promise.resolve({});
                        // In parallell, we request:
                        //  1) KEDBackend: Schools.activeCourses
                        //  2) EDS.getActiveAcourses()
                        //  3) (via subscription): KEDBackend: userHiddenCourses
                        this.kedCoursesPromise = bearerPromise.then(function () { return _this.listKedCourses(); });
                        this.edsCoursesPromise = bearerPromise.then(function () { return _this.listEDSCourses(); });
                        userHiddenCoursesResolved = false;
                        this.userHiddenCoursesPromise = new Promise(function (resolve) { return resolveUserHiddenCoursesPromise = function (x) {
                            if (userHiddenCoursesResolved) {
                                _this.userHiddenCoursesPromise = Promise.resolve(x);
                            }
                            else {
                                userHiddenCoursesResolved = true;
                                resolve(x);
                            }
                        }; });
                        return [4 /*yield*/, bearerPromise];
                    case 1:
                        _a.sent();
                        this.kedRepo.mem.subscribe(function (userHiddenCourses) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                            var _a, activeCourses, edsActiveCourses, _b;
                            var _this = this;
                            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                                switch (_c.label) {
                                    case 0: return [4 /*yield*/, Promise.all([
                                            this.kedCoursesPromise,
                                            this.edsCoursesPromise
                                        ])];
                                    case 1:
                                        _a = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"].apply(void 0, [_c.sent(), 2]), activeCourses = _a[0], edsActiveCourses = _a[1];
                                        // Refine the three results into a single result
                                        _b = this;
                                        return [4 /*yield*/, this.createCoursesList(edsActiveCourses, userHiddenCourses, activeCourses)];
                                    case 2:
                                        // Refine the three results into a single result
                                        _b.result = _c.sent();
                                        // Notify our subscribers:
                                        this.subscribers.forEach(function (subscriber) { return _this.notifySubscriber(subscriber.subscriber, subscriber.options); });
                                        resolveUserHiddenCoursesPromise(userHiddenCourses);
                                        return [2 /*return*/];
                                }
                            });
                        }); });
                        return [2 /*return*/];
                }
            });
        });
    };
    HiddenCoursesRepo.prototype.listKedCourses = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var fullCourse, schools, activeCourses;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        fullCourse = this.fullCourse;
                        console.log("FullCourse: " + fullCourse);
                        return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].kedBackendClient.list('schools', {
                                role: "USER",
                                name: _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.school,
                                include: "activeCourses",
                                flags: fullCourse ? [] : ["includeIdsAndNamesOnly"],
                                cacheBust: _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.username
                            })];
                    case 1:
                        schools = _a.sent();
                        activeCourses = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["flatten"])(schools.map(function (school) { return school.activeCourses; })).sort(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["compareProp"])("name"));
                        return [2 /*return*/, activeCourses];
                }
            });
        });
    };
    HiddenCoursesRepo.prototype.listEDSCourses = function () {
        var periodName = new _apis_edsclient__WEBPACK_IMPORTED_MODULE_5__["EDSPeriod"](Object(_utils_school_moment__WEBPACK_IMPORTED_MODULE_6__["getSchoolMoment"])(moment__WEBPACK_IMPORTED_MODULE_7___default()())).period;
        return _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.roles.indexOf('EMPLOYEE') === -1 ?
            // STUDENTs should, by default, only show courses that is listed in EDS
            _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].edsClient.getActiveCourses({ periodName: periodName }) :
            // EMPLOYEEs should, by default, show all courses on school - no need to query EDS
            null;
    };
    HiddenCoursesRepo.prototype.createCoursesList = function (edsActiveCourses, userHiddenCourses, activeCourses) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var hiddenCoursesMap, visibleCoursesMap, isStudent, edsCourseMap, result;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        hiddenCoursesMap = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["arrayToMap"])(userHiddenCourses.filter(function (hc) { return !hc.show; }), function (hc) { return hc.name; });
                        visibleCoursesMap = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["arrayToMap"])(userHiddenCourses.filter(function (hc) { return hc.show; }), function (hc) { return hc.name; });
                        isStudent = _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.roles.some(function (role) { return role === 'STUDENT'; });
                        edsCourseMap = edsActiveCourses ?
                            Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["arrayToMap"])(edsActiveCourses, function (c) { return c.name; }) :
                            {};
                        return [4 /*yield*/, Promise.all(activeCourses.map(function (_a) {
                                var id = _a.id, name = _a.name, description = _a.description, modifiedBy = _a.modifiedBy;
                                return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                                    var edsCourse, defaultVisible, visible;
                                    return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                                        edsCourse = edsCourseMap[name];
                                        defaultVisible = isStudent ?
                                            edsCourse != null : // Course name also listed in EDS
                                            true;
                                        visible = defaultVisible ?
                                            !hiddenCoursesMap[id] : // Visible unless user has overridden that.
                                            !!visibleCoursesMap[id];
                                        // Resolve description:
                                        if (modifiedBy && modifiedBy.name && !description) {
                                            description = modifiedBy.name + "s version";
                                        }
                                        return [2 /*return*/, {
                                                id: id,
                                                name: name,
                                                description: description,
                                                visible: visible,
                                                defaultVisible: defaultVisible
                                            }];
                                    });
                                });
                            }))];
                    case 1:
                        result = _a.sent();
                        return [2 /*return*/, result.sort(function (_a, _b) {
                                var a = _a.name;
                                var b = _b.name;
                                return a < b ? -1 : a > b ? 1 : 0;
                            })];
                }
            });
        });
    };
    HiddenCoursesRepo.prototype.hideCourse = function (c) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var overrides;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        overrides = this.kedRepo.mem.items.filter(function (hc) { return hc.name === c.id; });
                        if (!c.defaultVisible) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.kedRepo.insert([{
                                    id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_4__["createUUID"])(),
                                    name: c.id
                                }])];
                    case 1:
                        _a.sent();
                        return [3 /*break*/, 4];
                    case 2: return [4 /*yield*/, this.kedRepo.delete(overrides.map(function (ov) { return ov.id; }))];
                    case 3:
                        _a.sent();
                        _a.label = 4;
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    HiddenCoursesRepo.prototype.showCourse = function (c) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var overrides;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        overrides = this.kedRepo.mem.items.filter(function (hc) { return hc.name === c.id; });
                        if (!c.defaultVisible) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.kedRepo.delete(overrides.map(function (ov) { return ov.id; }))];
                    case 1:
                        _a.sent();
                        return [3 /*break*/, 4];
                    case 2: return [4 /*yield*/, this.kedRepo.insert([{
                                id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_4__["createUUID"])(),
                                name: c.id,
                                show: true
                            }])];
                    case 3:
                        _a.sent();
                        _a.label = 4;
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    HiddenCoursesRepo.prototype.subscribe = function (subscriber, options) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, activeCourses, edsActiveCourses, userHiddenCourses, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        if (!(!this.fullCourse && options.fullCourse)) return [3 /*break*/, 3];
                        // The subscriber demands full courses
                        // Need to query that before notifying
                        // Also affect state for future internal notification
                        this.fullCourse = options.fullCourse;
                        this.kedCoursesPromise = this.listKedCourses(); // Redo this call, now loading full courses
                        return [4 /*yield*/, Promise.all([
                                this.kedCoursesPromise,
                                this.edsCoursesPromise,
                                this.userHiddenCoursesPromise
                            ])];
                    case 1:
                        _a = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"].apply(void 0, [_c.sent(), 3]), activeCourses = _a[0], edsActiveCourses = _a[1], userHiddenCourses = _a[2];
                        // Assemble result:
                        _b = this;
                        return [4 /*yield*/, this.createCoursesList(edsActiveCourses, userHiddenCourses, activeCourses)];
                    case 2:
                        // Assemble result:
                        _b.result = _c.sent();
                        _c.label = 3;
                    case 3: return [4 /*yield*/, this.userHiddenCoursesPromise];
                    case 4:
                        _c.sent(); // So we know that this.result is there.
                        this.notifySubscriber(subscriber, options);
                        this.subscribers.push({ subscriber: subscriber, options: options });
                        return [2 /*return*/];
                }
            });
        });
    };
    HiddenCoursesRepo.prototype.unsubscribe = function (subscriber) {
        this.subscribers = this.subscribers.filter(function (s) { return s.subscriber !== subscriber; });
    };
    return HiddenCoursesRepo;
}());
if (!hiddenCoursesRepo) {
    hiddenCoursesRepo = _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].hiddenCoursesRepo = new HiddenCoursesRepo();
}


/***/ }),

/***/ "./src/repos/ked-repo.ts":
/*!*******************************!*\
  !*** ./src/repos/ked-repo.ts ***!
  \*******************************/
/*! exports provided: KedRepo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedRepo", function() { return KedRepo; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _repo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./repo */ "./src/repos/repo.ts");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");



var KedRepo = /** @class */ (function () {
    function KedRepo(options) {
        var _this = this;
        var table = options.table, getClient = options.getClient, getQueryOptions = options.getQueryOptions;
        this.mem = new _repo__WEBPACK_IMPORTED_MODULE_1__["Repo"]({ query: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                var queryOptions;
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                    switch (_a.label) {
                        case 0: return [4 /*yield*/, getQueryOptions()];
                        case 1:
                            queryOptions = _a.sent();
                            return [4 /*yield*/, getClient().list(table, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, queryOptions, { cacheBust: this.getCacheBust() }))];
                        case 2: return [2 /*return*/, _a.sent()];
                    }
                });
            }); } });
        this.options = options;
    }
    KedRepo.prototype.getCacheBust = function () {
        var _a = this.options, table = _a.table, user = _a.user;
        var cacheBust = localStorage.getItem('cache-bust-' + table + '-' + user);
        return cacheBust || this.regenerateCacheBust();
    };
    KedRepo.prototype.regenerateCacheBust = function () {
        var _a = this.options, table = _a.table, user = _a.user;
        var cacheBust = Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_2__["createUUID"])();
        localStorage.setItem('cache-bust-' + table + '-' + user, cacheBust);
        return cacheBust;
    };
    KedRepo.prototype.upsert = function (item, updater) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var updatedItem;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!!item.$etag) return [3 /*break*/, 2];
                        updatedItem = Object.assign({}, item);
                        updater(updatedItem);
                        return [4 /*yield*/, this.insert([updatedItem])];
                    case 1: return [2 /*return*/, _a.sent()];
                    case 2: 
                    // We have an $etag, so we can expect it to live on the server.
                    // However, take care of the unlikely situation that it was deleted from server,
                    // and if so, insert it again.
                    return [4 /*yield*/, this.update([item], updater).catch(function (e) {
                            if (e.name === "http404") {
                                var updatedItem = Object.assign({}, item);
                                updater(updatedItem);
                                return _this.insert([updatedItem]);
                            }
                            return Promise.reject(e);
                        })];
                    case 3:
                        // We have an $etag, so we can expect it to live on the server.
                        // However, take care of the unlikely situation that it was deleted from server,
                        // and if so, insert it again.
                        _a.sent();
                        _a.label = 4;
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    KedRepo.prototype.update = function (items, updater) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, getClient, optimistic, table, client, modifiedItems, res;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = this.options, getClient = _a.getClient, optimistic = _a.optimistic, table = _a.table;
                        client = getClient();
                        modifiedItems = items.map(function (item) {
                            var memRepoItem = _this.mem.items.find(function (it) { return it.id === item.id; });
                            item = Object.assign({}, memRepoItem || item);
                            updater(item);
                            return item;
                        });
                        if (!optimistic) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.mem.update(modifiedItems.map(function (x) { return Object.assign({}, x, { $meta: 'updating' }); }))];
                    case 1:
                        _b.sent();
                        _b.label = 2;
                    case 2: return [4 /*yield*/, client.do(function (br) { return modifiedItems.forEach(function (item) { return br.put(table, item); }); })
                            .catch(function (e) { return e.name === "http409" ? // conflict
                            // Get a fresh version from server:
                            client.list(table, { ids: items.map(function (item) { return item.id; }) }, { cache: 'no-cache' }).then(function (freshItems) {
                                // Update local version:
                                var modifiedItems = freshItems.map(function (freshItem) {
                                    // Clone the fresh item
                                    var modified = Object.assign({}, freshItem);
                                    // Re-run the updater on the clone:
                                    updater(modified);
                                    return modified;
                                });
                                // Re-do the the put operation towards the server.
                                return client.do(function (br) { return modifiedItems.forEach(function (item) { return br.put(table, item); }); });
                            }) :
                            // Other unexpected error:
                            Promise.resolve(optimistic &&
                                _this.mem.update(items)) // Undo optimistic update
                                .then(function () {
                                return Promise.reject(e); // Reject with the error no matter.
                            }); })];
                    case 3:
                        res = _b.sent();
                        this.regenerateCacheBust();
                        modifiedItems.forEach(function (item) {
                            item.$etag = res.newEtags[item.id];
                            item.$meta = undefined;
                        });
                        return [4 /*yield*/, this.mem.update(modifiedItems)];
                    case 4:
                        _b.sent(); // Ensures new etag is is applied on next action.
                        return [2 /*return*/];
                }
            });
        });
    };
    KedRepo.prototype.stripGraphs = function (items, graphs) {
        return items.map(function (item) {
            var clone = Object.assign({}, item);
            graphs.forEach(function (graph) {
                if (item[graph]) {
                    clone[graph] = item[graph].map(function (doc) { return ({ id: doc.id }); });
                }
            });
            return clone;
        });
    };
    KedRepo.prototype.insert = function (items) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var e_1, _a, _b, getClient, optimistic, table, getQueryOptions, client, queryOptions, graphs, stripped, br, _loop_1, stripped_1, stripped_1_1, item, res;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _b = this.options, getClient = _b.getClient, optimistic = _b.optimistic, table = _b.table, getQueryOptions = _b.getQueryOptions;
                        client = getClient();
                        return [4 /*yield*/, getQueryOptions()];
                    case 1:
                        queryOptions = _c.sent();
                        graphs = [].concat(queryOptions.include);
                        // Give IDs to each item:
                        items = items.map(function (item) { return item.id ? item : Object.assign({}, item, { id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_2__["createUUID"])() }); });
                        stripped = this.stripGraphs(items, graphs);
                        if (!optimistic) return [3 /*break*/, 3];
                        return [4 /*yield*/, this.mem.insert(stripped.map(function (x) { return Object.assign({}, x, { $meta: 'adding' }); }))];
                    case 2:
                        _c.sent();
                        _c.label = 3;
                    case 3:
                        br = new kedbackend_client__WEBPACK_IMPORTED_MODULE_2__["BatchRunner"]();
                        _loop_1 = function (item) {
                            var e_2, _a;
                            var _loop_2 = function (graph) {
                                var foreignItems = item[graph];
                                if (foreignItems) {
                                    foreignItems.forEach(function (doc) {
                                        br.link2(table, item.id, graph, doc.id);
                                    });
                                }
                            };
                            try {
                                // Also add links to all foreign related items:
                                for (var graphs_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](graphs), graphs_1_1 = graphs_1.next(); !graphs_1_1.done; graphs_1_1 = graphs_1.next()) {
                                    var graph = graphs_1_1.value;
                                    _loop_2(graph);
                                }
                            }
                            catch (e_2_1) { e_2 = { error: e_2_1 }; }
                            finally {
                                try {
                                    if (graphs_1_1 && !graphs_1_1.done && (_a = graphs_1.return)) _a.call(graphs_1);
                                }
                                finally { if (e_2) throw e_2.error; }
                            }
                            br.add(table, item);
                        };
                        try {
                            for (stripped_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](stripped), stripped_1_1 = stripped_1.next(); !stripped_1_1.done; stripped_1_1 = stripped_1.next()) {
                                item = stripped_1_1.value;
                                _loop_1(item);
                            }
                        }
                        catch (e_1_1) { e_1 = { error: e_1_1 }; }
                        finally {
                            try {
                                if (stripped_1_1 && !stripped_1_1.done && (_a = stripped_1.return)) _a.call(stripped_1);
                            }
                            finally { if (e_1) throw e_1.error; }
                        }
                        return [4 /*yield*/, client.batch(br.mutationRequests).catch(function (e) {
                                if (optimistic)
                                    _this.mem.delete(items.map(function (item) { return item.id; }));
                                return Promise.reject(e);
                            })];
                    case 4:
                        res = _c.sent();
                        this.regenerateCacheBust();
                        items.forEach(function (item) { return item.$etag = res.newEtags[item.id]; });
                        if (!optimistic) return [3 /*break*/, 6];
                        return [4 /*yield*/, this.mem.update(items)];
                    case 5:
                        _c.sent(); // Update with new $etag.
                        return [3 /*break*/, 8];
                    case 6: return [4 /*yield*/, this.mem.insert(items)];
                    case 7:
                        _c.sent();
                        _c.label = 8;
                    case 8: return [2 /*return*/];
                }
            });
        });
    };
    KedRepo.prototype.delete = function (ids) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, getClient, optimistic, table, client, res;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = this.options, getClient = _a.getClient, optimistic = _a.optimistic, table = _a.table;
                        client = getClient();
                        if (!optimistic) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.mem.update(ids
                                .map(function (id) { return _this.mem.items.find(function (x) { return x.id === id; }); })
                                .filter(function (x) { return x; })
                                .map(function (x) { return Object.assign({}, x, { $meta: 'deleting' }); }))];
                    case 1:
                        _b.sent();
                        _b.label = 2;
                    case 2: return [4 /*yield*/, client.do(function (br) { return ids.forEach(function (id) { return br.delete(table, id); }); }).catch(function (e) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                            var _this = this;
                            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                                switch (_a.label) {
                                    case 0:
                                        if (!optimistic) return [3 /*break*/, 2];
                                        return [4 /*yield*/, this.mem.update(ids
                                                .map(function (id) { return _this.mem.items.find(function (x) { return x.id === id; }); })
                                                .filter(function (x) { return x; })
                                                .map(function (x) {
                                                x = Object.assign({}, x);
                                                delete x.$meta;
                                                return x;
                                            }))];
                                    case 1:
                                        _a.sent();
                                        _a.label = 2;
                                    case 2: throw e;
                                }
                            });
                        }); })];
                    case 3:
                        res = _b.sent();
                        this.regenerateCacheBust();
                        return [4 /*yield*/, this.mem.delete(ids)];
                    case 4:
                        _b.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    return KedRepo;
}());



/***/ }),

/***/ "./src/repos/kg-termplanner-repo.ts":
/*!******************************************!*\
  !*** ./src/repos/kg-termplanner-repo.ts ***!
  \******************************************/
/*! exports provided: KGTermPlannerRepo, termPlannerRepo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KGTermPlannerRepo", function() { return KGTermPlannerRepo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "termPlannerRepo", function() { return termPlannerRepo; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _ked_repo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ked-repo */ "./src/repos/ked-repo.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _utils_school_moment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/school-moment */ "./src/utils/school-moment.ts");




var KGTermPlannerRepo = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](KGTermPlannerRepo, _super);
    function KGTermPlannerRepo(getClient, getCurrentUser) {
        var _this = this;
        var currentUser = getCurrentUser();
        var now = new Date();
        var _a = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](Object(_utils_school_moment__WEBPACK_IMPORTED_MODULE_3__["getTermStarEndDate"])(now, now.getMonth() >= 7), 2), termStart = _a[0], termEnd = _a[1];
        _this = _super.call(this, {
            getClient: getClient,
            optimistic: true,
            table: "weekplans",
            user: currentUser ? currentUser.mail : "",
            getQueryOptions: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                    return [2 /*return*/, {
                            from: termStart.startOf('week').add(-2, 'days').toDate().valueOf(),
                            to: termEnd.startOf('week').add(5, 'days').toDate().valueOf(),
                            role: "USER"
                        }];
                });
            }); }
        }) || this;
        return _this;
    }
    return KGTermPlannerRepo;
}(_ked_repo__WEBPACK_IMPORTED_MODULE_1__["KedRepo"]));

var termPlannerRepo = new KGTermPlannerRepo(function () { return _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].kedBackendClient; }, function () { return _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser; });
_globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].kgTermPlannerRepo = termPlannerRepo;


/***/ }),

/***/ "./src/repos/ks-termplanner-repo-instance.ts":
/*!***************************************************!*\
  !*** ./src/repos/ks-termplanner-repo-instance.ts ***!
  \***************************************************/
/*! exports provided: termPlannerRepoKS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "termPlannerRepoKS", function() { return termPlannerRepoKS; });
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _ks_termplanner_repo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ks-termplanner-repo */ "./src/repos/ks-termplanner-repo.ts");


var termPlannerRepoKS = new _ks_termplanner_repo__WEBPACK_IMPORTED_MODULE_1__["KSTermPlannerRepo"](function () { return _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].kedBackendClient; }, function () { return _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser; });
_globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].ksTermPlannerRepo = termPlannerRepoKS;


/***/ }),

/***/ "./src/repos/ks-termplanner-repo.ts":
/*!******************************************!*\
  !*** ./src/repos/ks-termplanner-repo.ts ***!
  \******************************************/
/*! exports provided: KSTermPlannerRepo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KSTermPlannerRepo", function() { return KSTermPlannerRepo; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _ked_repo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ked-repo */ "./src/repos/ked-repo.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_2__);



var KSTermPlannerRepo = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](KSTermPlannerRepo, _super);
    function KSTermPlannerRepo(getClient, getCurrentUser) {
        var _this = this;
        var currentUser = getCurrentUser();
        _this = _super.call(this, {
            getClient: getClient,
            optimistic: true,
            table: "weekplans-ks",
            user: currentUser ? currentUser.mail : "",
            getQueryOptions: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                var startDateValue, endDateValue;
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                    startDateValue = (this.startDate && this.startDate.valueOf()) || moment__WEBPACK_IMPORTED_MODULE_2___default()().valueOf();
                    endDateValue = (this.endDate && this.endDate.valueOf()) || moment__WEBPACK_IMPORTED_MODULE_2___default()().valueOf();
                    return [2 /*return*/, {
                            from: startDateValue,
                            to: endDateValue,
                            role: "USER"
                        }];
                });
            }); }
        }) || this;
        return _this;
    }
    KSTermPlannerRepo.prototype.refreshData = function (dateInterval) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](dateInterval, 2), this.startDate = _a[0], this.endDate = _a[1];
                        return [4 /*yield*/, this.mem.refreshFromServer()];
                    case 1:
                        _b.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    return KSTermPlannerRepo;
}(_ked_repo__WEBPACK_IMPORTED_MODULE_1__["KedRepo"]));



/***/ }),

/***/ "./src/repos/repo.ts":
/*!***************************!*\
  !*** ./src/repos/repo.ts ***!
  \***************************/
/*! exports provided: Repo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Repo", function() { return Repo; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

var Repo = /** @class */ (function () {
    function Repo(comm) {
        this.comm = comm;
        this.listPromise = null;
        this.items = null;
        this.subscribers = [];
    }
    Repo.prototype.subscribe = function (subscriber) {
        var _this = this;
        return this.ensureHasData().then(function () {
            subscriber(_this.items, _this.error);
            _this.subscribers.push(subscriber);
        });
    };
    Repo.prototype.unsubscribe = function (subscriber) {
        this.subscribers = this.subscribers.filter(function (s) { return s !== subscriber; });
    };
    Repo.prototype.notifySubscribers = function () {
        var _this = this;
        this.subscribers.forEach(function (s) { return s(_this.items, _this.error); });
    };
    Repo.prototype.ensureHasData = function () {
        if (!this.listPromise)
            this.refreshFromServer();
        return this.listPromise;
    };
    Repo.prototype.refreshFromServer = function () {
        var _this = this;
        this.listPromise = this.comm.query().then(function (items) {
            _this.items = items;
            _this.error = null;
            _this.notifySubscribers();
        }).catch(function (error) {
            _this.error = error;
            _this.items = _this.items || [];
            _this.notifySubscribers();
        });
        return this.listPromise;
    };
    Repo.prototype.update = function (item) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var updatedItems;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.ensureHasData()];
                    case 1:
                        _a.sent();
                        updatedItems = Array.isArray(item) ? item : [item];
                        this.items = this.items.map(function (it) {
                            var updatedItem = updatedItems.find(function (_a) {
                                var id = _a.id;
                                return it.id === id;
                            });
                            return updatedItem ?
                                Object.assign({}, updatedItem) :
                                it;
                        });
                        this.notifySubscribers();
                        return [2 /*return*/];
                }
            });
        });
    };
    Repo.prototype.insert = function (item) {
        var _this = this;
        return this.ensureHasData().then(function () {
            _this.items = _this.items.concat(item);
            _this.notifySubscribers();
        });
    };
    Repo.prototype.delete = function (id) {
        var _this = this;
        var ids = Array.isArray(id) ? id : [id];
        return this.ensureHasData().then(function () {
            _this.items = _this.items.filter(function (it) { return !ids.some(function (id) { return it.id === id; }); });
            _this.notifySubscribers();
        });
    };
    return Repo;
}());



/***/ }),

/***/ "./src/repos/user-tasks-repo.ts":
/*!**************************************!*\
  !*** ./src/repos/user-tasks-repo.ts ***!
  \**************************************/
/*! exports provided: userTasksRepo, UserTasksRepo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "userTasksRepo", function() { return userTasksRepo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UserTasksRepo", function() { return UserTasksRepo; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _ked_repo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ked-repo */ "./src/repos/ked-repo.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _components_weekplanner_weekplanner_persisted_state__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/weekplanner/weekplanner-persisted-state */ "./src/components/weekplanner/weekplanner-persisted-state.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _utils_weekutil__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/weekutil */ "./src/utils/weekutil.ts");







var userTasksRepo = _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].userTasksRepo;
var UserTasksRepo = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](UserTasksRepo, _super);
    function UserTasksRepo(getClient, getCurrentUser) {
        var _this = _super.call(this, {
            getClient: getClient,
            optimistic: true,
            table: "usertasks",
            user: getCurrentUser() ? getCurrentUser().mail : "",
            getQueryOptions: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                var currentUser, userEmail, _a, weekDate, weekNumber, kedWeek;
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                    switch (_b.label) {
                        case 0:
                            currentUser = getCurrentUser();
                            userEmail = currentUser ? currentUser.mail : "";
                            if (!!this.persistedState) return [3 /*break*/, 2];
                            _a = this;
                            return [4 /*yield*/, _components_weekplanner_weekplanner_persisted_state__WEBPACK_IMPORTED_MODULE_3__["WeekPlannerPersistedState"].load(userEmail)];
                        case 1:
                            _a.persistedState = _b.sent();
                            _b.label = 2;
                        case 2:
                            weekDate = this.persistedState.weekDate;
                            weekNumber = moment__WEBPACK_IMPORTED_MODULE_4___default()(weekDate).week();
                            kedWeek = Object(_utils_weekutil__WEBPACK_IMPORTED_MODULE_6__["KEDWeek"])(moment__WEBPACK_IMPORTED_MODULE_4___default()(weekDate).year(), weekNumber);
                            /*const [from, to] = [moment(weekDate).startOf('week'), moment(weekDate).endOf('week')]
                              .map(m => m.toDate().getTime());*/
                            return [2 /*return*/, {
                                    from: kedWeek.notBefore,
                                    to: kedWeek.notAfter,
                                    role: "USER",
                                    include: ["task", "course"],
                                    flags: ["includeIdsOnly"],
                                }];
                    }
                });
            }); }
        }) || this;
        _this.persistedState = null;
        _this.getCurrentUser = getCurrentUser;
        return _this;
    }
    UserTasksRepo.prototype.updatePersistedState = function (stateChanges) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        Object.assign(this.persistedState, stateChanges);
                        return [4 /*yield*/, this.persistedState.save()];
                    case 1:
                        _a.sent();
                        this.mem.notifySubscribers();
                        return [2 /*return*/];
                }
            });
        });
    };
    UserTasksRepo.prototype.setTaskDoneState = function (userTask, done) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, getClient, optimistic, table, client, modifiedItem, similarTasks, identicalTasks;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = this.options, getClient = _a.getClient, optimistic = _a.optimistic, table = _a.table;
                        client = getClient();
                        modifiedItem = Object.assign({}, userTask, { done: done });
                        if (!optimistic) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.mem.update(Object.assign({}, modifiedItem, { $meta: 'updating' }))];
                    case 1:
                        _b.sent();
                        _b.label = 2;
                    case 2: return [4 /*yield*/, client.list('usertasks', {
                            name: userTask.name,
                            role: "USER",
                            include: ["task", "course"],
                            flags: ["includeIdsOnly"],
                            from: moment__WEBPACK_IMPORTED_MODULE_4___default()(this.persistedState.weekDate).add(-3, 'weeks').valueOf(),
                            to: moment__WEBPACK_IMPORTED_MODULE_4___default()(this.persistedState.weekDate).add(3, 'weeks').valueOf()
                        }, {
                            cache: 'no-cache'
                        })];
                    case 3:
                        similarTasks = _b.sent();
                        identicalTasks = similarTasks.filter(function (t) {
                            return t.courseName === userTask.courseName &&
                                t.learningGoal === userTask.learningGoal &&
                                (!userTask.task || t.task.map(function (t) { return t.id; }).join('') === userTask.task.map(function (t) { return t.id; }).join('')) &&
                                (!userTask.course || t.course.map(function (c) { return c.id; }).join('') === userTask.course.map(function (c) { return c.id; }).join(''));
                        });
                        if (identicalTasks.length === 0) {
                            // Workaround for issue in SubjectPlanner migration (usertasks with long names is not found)
                            identicalTasks.push(userTask);
                        }
                        return [4 /*yield*/, this.update(identicalTasks, function (t) { return t.done = done; })];
                    case 4:
                        _b.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    UserTasksRepo.prototype.setSubTaskDoneState = function (userTask, subTaskId, done) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, getClient, optimistic, table, client;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = this.options, getClient = _a.getClient, optimistic = _a.optimistic, table = _a.table;
                        client = getClient();
                        return [4 /*yield*/, this.update([userTask], function (t) { return t.subTasks && t.subTasks.filter(function (st) { return st.id === subTaskId; })
                                .forEach(function (st) { return st.done = done; }); })];
                    case 1:
                        _b.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    UserTasksRepo.prototype.setWeekPlannerBoxOpen = function (courseName, isOpen) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var openCourses;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        openCourses = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.persistedState.openCourses);
                        if (isOpen)
                            openCourses[courseName] = true;
                        else
                            delete openCourses[courseName];
                        return [4 /*yield*/, this.updatePersistedState({ openCourses: openCourses })];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    UserTasksRepo.prototype.changeWeek = function (weekDate, keepCurrentDate) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var persistedState, newPersisted;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        persistedState = this.persistedState;
                        if (!!persistedState) return [3 /*break*/, 2];
                        return [4 /*yield*/, _components_weekplanner_weekplanner_persisted_state__WEBPACK_IMPORTED_MODULE_3__["WeekPlannerPersistedState"].load(this.options.user)];
                    case 1:
                        persistedState = _a.sent();
                        _a.label = 2;
                    case 2:
                        newPersisted = new _components_weekplanner_weekplanner_persisted_state__WEBPACK_IMPORTED_MODULE_3__["WeekPlannerPersistedState"](persistedState);
                        newPersisted.weekDate = keepCurrentDate ? moment__WEBPACK_IMPORTED_MODULE_4___default()(weekDate).valueOf() : moment__WEBPACK_IMPORTED_MODULE_4___default()(weekDate).startOf('week').valueOf();
                        newPersisted.save();
                        this.persistedState = newPersisted;
                        return [4 /*yield*/, this.mem.refreshFromServer()];
                    case 3:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    UserTasksRepo.prototype.subscribe = function (subscriber) {
        var _this = this;
        var proxySubscriber = function (userTasks) {
            subscriber(userTasks.filter(function (ut) { return !ut.weekTexts; }), _this.persistedState, userTasks.filter(function (ut) { return !!ut.weekTexts; })[0] || {
                id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["createUUID"])(),
                dateTime: _this.persistedState.weekDate,
                weekTexts: { assessment: '', strategy: '' },
                acl: [
                    // Default ACL: Let user self have full control over this item:
                    new kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["DocumentAccess"]("email", _this.getCurrentUser().mail, "S"),
                    // Additional ACL: Let employees on same school have read access to it.
                    // This currently only applies to tasks that refer to course tasks (not own tasks!)
                    new kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["DocumentAccess"]("schoolRole", _this.getCurrentUser().school + "/EMPLOYEE", "R")
                ].map(function (ac) { return ac.toString(); })
            });
        };
        proxySubscriber["subscriber"] = subscriber;
        this.mem.subscribe(proxySubscriber);
    };
    UserTasksRepo.prototype.unsubscribe = function (subscriber) {
        this.mem.subscribers = this.mem.subscribers.filter(function (s) { return s["subscriber"] !== subscriber; });
    };
    return UserTasksRepo;
}(_ked_repo__WEBPACK_IMPORTED_MODULE_1__["KedRepo"]));

if (!userTasksRepo) {
    userTasksRepo = _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].userTasksRepo = new UserTasksRepo(function () { return _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].kedBackendClient; }, function () { return _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser; });
    userTasksRepo.mem.ensureHasData();
}


/***/ }),

/***/ "./src/repos/week-notes-repo.ts":
/*!**************************************!*\
  !*** ./src/repos/week-notes-repo.ts ***!
  \**************************************/
/*! exports provided: weekNotesRepo, WeekNotesRepo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "weekNotesRepo", function() { return weekNotesRepo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WeekNotesRepo", function() { return WeekNotesRepo; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _ked_repo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ked-repo */ "./src/repos/ked-repo.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");



var weekNotesRepo = _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].weekNotesRepo;
var WeekNotesRepo = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](WeekNotesRepo, _super);
    /*private currentWeek: moment.Moment;
  
    getCurrentWeek() {
      if (!this.currentWeek) {
        const {weekMillis, expire} = JSON.parse(sessionStorage.getItem("week-notes-week") || "{}") as {weekMillis?: number, expire?: number};
        this.currentWeek = weekMillis && expire && expire > Date.now() ?
          moment(new Date(weekMillis)) :
          moment().startOf('week').add(1, 'days');
      }
      return this.currentWeek.clone();
    }
  
    setCurrentWeek(newWeekMoment: moment.Moment) {
      this.currentWeek = newWeekMoment;
      sessionStorage.setItem("week-notes-week", JSON.stringify({
        weekMillis: newWeekMoment.toDate().getTime(),
        expire: moment().add(8, "hours").toDate().getTime()
      }))
    }*/
    function WeekNotesRepo() {
        var _this = _super.call(this, {
            getClient: function () { return _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].kedBackendClient; },
            optimistic: false,
            table: "notes",
            user: _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser ? _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.mail : "",
            getQueryOptions: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                    //const userEmail = env.currentUser ? env.currentUser.mail : "";
                    //const currentWeek = this.getCurrentWeek();
                    //const weekNumber = currentWeek.week();
                    //const kedWeek = KEDWeek(currentWeek.year(), weekNumber);
                    return [2 /*return*/, {
                            //from: kedWeek.notBefore,
                            //to: kedWeek.notAfter,
                            role: "USER"
                        }];
                });
            }); }
        }) || this;
        return _this;
        //this.currentWeek = null;
    }
    return WeekNotesRepo;
}(_ked_repo__WEBPACK_IMPORTED_MODULE_1__["KedRepo"]));

if (!weekNotesRepo) {
    weekNotesRepo = _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].weekNotesRepo = new WeekNotesRepo();
}


/***/ }),

/***/ "./src/test/components.ts":
/*!********************************!*\
  !*** ./src/test/components.ts ***!
  \********************************/
/*! exports provided: components */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "components", function() { return components; });
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _components_calendar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/calendar */ "./src/components/calendar/index.tsx");
/* harmony import */ var _components_ks_goals_goals__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/ks-goals/goals */ "./src/components/ks-goals/goals.tsx");
/* harmony import */ var _components_latest_assessments_latest_assessments__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/latest-assessments/latest-assessments */ "./src/components/latest-assessments/latest-assessments.tsx");
/* harmony import */ var _components_kg_termplanner_kg_termplanner_self__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/kg-termplanner/kg-termplanner-self */ "./src/components/kg-termplanner/kg-termplanner-self.tsx");
/* harmony import */ var _components_kg_termplanner_kg_termplanner_tutored__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/kg-termplanner/kg-termplanner-tutored */ "./src/components/kg-termplanner/kg-termplanner-tutored.tsx");
/* harmony import */ var _components_ks_termplanner_termplanner__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/ks-termplanner/termplanner */ "./src/components/ks-termplanner/termplanner.tsx");
/* harmony import */ var _components_ks_termplanner_ks_termplanner_tutored__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../components/ks-termplanner/ks-termplanner-tutored */ "./src/components/ks-termplanner/ks-termplanner-tutored.tsx");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _components_weekplanner_weekplanner__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../components/weekplanner/weekplanner */ "./src/components/weekplanner/weekplanner.tsx");
/* harmony import */ var _components_learning_tasks__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../components/learning-tasks */ "./src/components/learning-tasks/index.tsx");
/* harmony import */ var _components_my_courses_my_courses__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../components/my-courses/my-courses */ "./src/components/my-courses/my-courses.tsx");
/* harmony import */ var _components_list_courses_list_courses__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../components/list-courses/list-courses */ "./src/components/list-courses/list-courses.tsx");
/* harmony import */ var _components_week_notebook__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../components/week-notebook */ "./src/components/week-notebook/index.ts");
/* harmony import */ var _components_tutors_select_tutors_select__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../components/tutors-select/tutors-select */ "./src/components/tutors-select/tutors-select.tsx");
/* harmony import */ var _components_tutors_view__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../components/tutors-view */ "./src/components/tutors-view/index.ts");
















var components = {
    LatestAssessments: {
        component: _components_latest_assessments_latest_assessments__WEBPACK_IMPORTED_MODULE_3__["LatestAssessments"],
        props: function () { return ({
            locale: navigator.language,
            limit: 15
        }); }
    },
    KSGoals: {
        component: _components_ks_goals_goals__WEBPACK_IMPORTED_MODULE_2__["KSGoals"],
        props: function () { return ({}); }
    },
    KSTermPlanner: {
        component: _components_ks_termplanner_termplanner__WEBPACK_IMPORTED_MODULE_6__["KSTermPlanner"],
        props: function () { return ({
            env: _globals_KED_env__WEBPACK_IMPORTED_MODULE_8__["default"],
            tutored: false,
            initialDate: new Date(),
        }); }
    },
    KSTermPlannerTutored: {
        component: _components_ks_termplanner_ks_termplanner_tutored__WEBPACK_IMPORTED_MODULE_7__["KSTermPlannerTutored"],
        props: function () { return ({}); }
    },
    KGTermPlanner: {
        component: _components_kg_termplanner_kg_termplanner_self__WEBPACK_IMPORTED_MODULE_4__["KGTermPlannerSelf"],
        props: function () { return ({}); }
    },
    KGTermPlannerTutored: {
        component: _components_kg_termplanner_kg_termplanner_tutored__WEBPACK_IMPORTED_MODULE_5__["KGTermPlannerTutored"],
        props: function () { return ({}); }
    },
    WeekPlanner: {
        component: _components_weekplanner_weekplanner__WEBPACK_IMPORTED_MODULE_9__["WeekPlanner"],
        props: function () { return ({
            viewCourseUrl: 'http://svt.se',
            env: _globals_KED_env__WEBPACK_IMPORTED_MODULE_8__["default"]
        }); }
    },
    TutorsView: {
        component: _components_tutors_view__WEBPACK_IMPORTED_MODULE_15__["TutorsViewTest"],
        props: function () { return ({}); }
    },
    TutorsSelect: {
        component: _components_tutors_select_tutors_select__WEBPACK_IMPORTED_MODULE_14__["TutorsSelect"],
        props: function () { return ({}); }
    },
    Calendar: {
        component: _components_calendar__WEBPACK_IMPORTED_MODULE_1__["Calendar"],
        props: function () { return ({
            firstDay: moment__WEBPACK_IMPORTED_MODULE_0___default()().startOf('week').weekday(1),
            numDays: 5,
            initialStartHour: 7,
            initialEndHour: 18,
            initialZoom: 0.75
        }); }
    },
    /*CourseOverview: {
      component: CourseOverview,
      props: ()=>({
        locale: navigator.language,
      })
    },*/
    LearningTasks: {
        component: _components_learning_tasks__WEBPACK_IMPORTED_MODULE_10__["LearningTasks"],
        props: function () { return ({
            apiPath: localStorage.getItem('selectedLearningModuleUrl'),
            pageId: "dummy"
        }); }
    },
    MyCourses: {
        component: _components_my_courses_my_courses__WEBPACK_IMPORTED_MODULE_11__["MyCourses"],
        props: function () { return ({
            viewCourseUrl: 'https://kg-test.sitevision.se/courseviewer'
        }); }
    },
    ListCourses: {
        component: _components_list_courses_list_courses__WEBPACK_IMPORTED_MODULE_12__["ListCourses"],
        props: function () { return ({
            viewCourseUrl: 'https://kg-test.sitevision.se/courseviewer'
        }); }
    },
    WeekNotes: {
        component: _components_week_notebook__WEBPACK_IMPORTED_MODULE_13__["WeekNotebook"],
        props: function () { return ({}); }
    }
};


/***/ }),

/***/ "./src/test/data/learningModules.ts":
/*!******************************************!*\
  !*** ./src/test/data/learningModules.ts ***!
  \******************************************/
/*! exports provided: learningModules */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "learningModules", function() { return learningModules; });
var learningModules = [{
        moduleName: "Steg 22",
        subject: {
            name: "Spanska",
            course: {
                name: "Spanska",
                url: "/steg/spanska.4.4ae4e9d2159ef4e0120ad6d3.html"
            }
        },
        commonTasks: [],
        learningGoals: [{
                name: "Aktiviteter i hemmet",
                tasks: [{
                        name: "Aktiviteter i hemmet hos en peruansk familj",
                        url: "/steg/spanska/block5/steg22/uppgifter/aktiviteterihemmet/aktiviteterihemmethosenperuanskfamilj.4.4ae4e9d2159ef4e0120adb40.html"
                    }, {
                        name: "Uppgift till aktiviteter i hemmet",
                        url: "/steg/spanska/block5/steg22/uppgifter/aktiviteterihemmet/uppgifttillaktiviteterihemmet.4.4ae4e9d2159ef4e0120af887.html"
                    }]
            }, {
                name: "Familjeliv",
                tasks: [{
                        name: "Vad pgr i din familj nu?",
                        url: "/steg/spanska/block5/steg22/uppgifter/familjeliv/vadpagaridinfamiljnu.4.4ae4e9d2159ef4e0120b25e9.html"
                    }, {
                        name: "Uppgift familjeliv",
                        url: "/steg/spanska/block5/steg22/uppgifter/familjeliv/uppgiftfamiljeliv.4.4ae4e9d2159ef4e0120af73a.html"
                    }]
            }, {
                name: "Samtal om familjeliv",
                tasks: [{
                        name: "Samtalsdokument familjeliv",
                        url: "/steg/spanska/block5/steg22/uppgifter/samtalomfamiljeliv/samtalsdokumentfamiljeliv.4.4ae4e9d2159ef4e01209fe03.html"
                    }, {
                        name: "Samtalskarta-familjeliv",
                        url: "/steg/spanska/block5/steg22/uppgifter/samtalomfamiljeliv/samtalskartafamiljeliv.4.4ae4e9d2159ef4e0120af6fd.html"
                    }]
            }
        ]
    }, {
        moduleName: "Teknik",
        subject: {
            name: "Teknik",
            course: {
                name: "Trd 5",
                url: "/kurser/arskurs8/trad5.19.2d4f4005159f895477a15cc.html"
            }
        },
        commonTasks: [{
                name: "Tryck ",
                url: "/kurser/arskurs8/trad5/forberedelse/teknik/uppgifter/tryck.4.4ae4e9d2159ef4e01209dcde.html"
            }, {
                name: "Diskussionsfrgor till industriella revolutionen",
                url: "/kurser/arskurs8/trad5/forberedelse/teknik/uppgifter/diskussionsfragortillindustriellarevolutionen.4.4ae4e9d2159ef4e0120a6fab.html"
            }, {
                name: "Hur fungerar en ngmaskin",
                url: "/kurser/arskurs8/trad5/forberedelse/teknik/uppgifter/hurfungerarenangmaskin.4.4ae4e9d2159ef4e0120a1309.html"
            }, {
                name: "ngmaskinens betydelse",
                url: "/kurser/arskurs8/trad5/forberedelse/teknik/uppgifter/angmaskinensbetydelse.4.4ae4e9d2159ef4e0120a3deb.html"
            }],
        learningGoals: [{
                name: "Identifiera och analysera ngmaskinen utifrn ndamlsenlighet och funktion,"
            }, {
                name: "anvnda teknikomrdets begrepp och uttrycksform"
            }, {
                name: "vrdera konsekvenser av ngmaskinen fr individ, samhlle och milj, och"
            }, {
                name: "analysera drivkrafter bakom teknikutveckling runt ngmaskinen och hur tekniken har frndratsver tid."
            }]
    }];


/***/ }),

/***/ "./src/test/data/learningModules2.ts":
/*!*******************************************!*\
  !*** ./src/test/data/learningModules2.ts ***!
  \*******************************************/
/*! exports provided: learningPageUrls */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "learningPageUrls", function() { return learningPageUrls; });
var learningPageUrls = [
    "testdata/learning-tasks/amnesintegrerad.json",
    "testdata/learning-tasks/loopad.json",
    "testdata/learning-tasks/steg-larandemal.json",
    "testdata/learning-tasks/steg-matte.json",
    "testdata/learning-tasks/vanlig-kurs.json"
];


/***/ }),

/***/ "./src/test/data/users.ts":
/*!********************************!*\
  !*** ./src/test/data/users.ts ***!
  \********************************/
/*! exports provided: users */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "users", function() { return users; });
var users = [{
        displayName: "Administratr",
        mail: "vemendo@kedschools.com",
        roles: ['ADMIN', 'EMPLOYEE'],
        school: 'KED',
        username: "admin"
    }, {
        displayName: "David",
        mail: "david.fahlander@vemendo.se",
        roles: ['ADMIN', 'EMPLOYEE'],
        school: 'KED',
        username: "david"
    },
    {
        displayName: "Andrei",
        mail: "andrei.spatarelu@vemendo.se",
        roles: ['ADMIN', 'EMPLOYEE', 'STUDENT'],
        school: 'KED',
        username: "andrei"
    }, {
        displayName: "Carl Holmberg",
        mail: "carl.holmberg@kunskapsgymnasiet.se",
        roles: ['ADMIN', 'EMPLOYEE'],
        school: 'Norrkping',
        username: "carl.holmberg@kunskapsgymnasiet.se"
    }, {
        displayName: "Carl",
        mail: "carl@kedschools.com",
        roles: ['ADMIN', 'EMPLOYEE', 'STUDENT'],
        school: 'KED',
        username: "carl"
    }, {
        displayName: "Test-Live-Elev1",
        mail: "ubw6757@edu.kunskapsgymnasiet.se",
        roles: ['STUDENT'],
        school: 'Uppsala',
        username: "ubw6757@edu.kunskapsgymnasiet.se"
    }, {
        displayName: "Test-Live-Elev2",
        mail: "ums4302@edu.kunskapsgymnasiet.se",
        roles: ['STUDENT'],
        school: 'Uppsala',
        username: "ums4302@edu.kunskapsgymnasiet.se"
    }, {
        displayName: "Test-Live-Elev3",
        mail: "uhh3460@edu.kunskapsgymnasiet.se",
        roles: ['STUDENT'],
        school: 'Uppsala',
        username: "uhh3460@edu.kunskapsgymnasiet.se"
    }, {
        displayName: "Test-Live-Elev4(fel goals issue)",
        mail: "umt6826@edu.kunskapsskolan.se",
        roles: ["STUDENT"],
        school: "Uppsala",
        username: "umt6826@edu.kunskapsskolan.se"
    }, {
        displayName: "Test-Live-Elev5(future abilities)",
        mail: "ujg3833@edu.kunskapsskolan.se",
        roles: ["STUDENT"],
        school: "Uppsala",
        username: "ujg3833@edu.kunskapsskolan.se"
    }, {
        displayName: "Test-Live-Elev6(future abilities)",
        mail: "ujt1363@edu.kunskapsskolan.se",
        roles: ["STUDENT"],
        school: "Uppsala",
        username: "ujt1363@edu.kunskapsskolan.se"
    }, {
        displayName: "Test-Live-Lrare1",
        mail: "rickard.albertsson@kunskapsgymnasiet.se",
        roles: ['EMPLOYEE'],
        school: 'Uppsala',
        username: "rickard.albertsson@kunskapsgymnasiet.se"
    }, {
        displayName: "EDSTestUserGymnasium",
        mail: "uhh3200@edu.kunskapsgymnasiet.se",
        //mail: "UHH3200@EDU.KUNSKAPSGYMNASIET.SE",
        roles: ["STUDENT"],
        username: "EDSTestUser1",
        school: "KED",
        schoolType: "Gymnasium"
    }, {
        displayName: "vemendo.elev@kedschools.com",
        mail: "vemendo.elev@kedschools.com",
        roles: ["STUDENT"],
        username: "vemendo.elev@kedschools.com",
        school: "KED",
        schoolType: "Gymnasium"
    }, {
        displayName: "Medarbetare Nacka",
        mail: "medarbetare.nacka@kunskapsskolan.se",
        roles: ["EMPLOYEE"],
        username: "medarbetare.nacka/KS",
        school: "Nacka",
        schoolType: "Grundskolor"
    }, {
        displayName: "Medarbetare Globen",
        mail: "medarbetare.globen@kunskapsgymnasiet.se",
        roles: ["EMPLOYEE"],
        username: "medarbetare.globen/KS",
        school: "Globen",
        schoolType: "Gymnasium"
    }, {
        displayName: "Elev Globen",
        mail: "elev.globen@edu.kunskapsgymnasiet.se",
        schoolGrade: 2,
        roles: ['STUDENT'],
        username: "elev.globen",
        school: "Globen",
        schoolType: "Gymnasium"
    }, {
        displayName: "Elev Bors",
        mail: "elev.boras@edu.kunskapsskolan.se",
        schoolGrade: 7,
        roles: ['STUDENT'],
        username: "elev.boras",
        school: "Bors",
        schoolType: "Grundskolor"
    }, {
        displayName: "Elev Borlnge",
        mail: "elev.borlange@edu.kunskapsskolan.se",
        schoolGrade: 9,
        roles: ['STUDENT'],
        username: 'elev.borlange/KS',
        school: 'Borlnge',
        schoolType: "Gymnasium"
    }, {
        displayName: "Roll-ls",
        mail: "none@kunskapsskolan.se",
        username: "none",
        roles: []
    }];


/***/ }),

/***/ "./src/test/set-current-user.ts":
/*!**************************************!*\
  !*** ./src/test/set-current-user.ts ***!
  \**************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _data_users__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./data/users */ "./src/test/data/users.ts");
/* harmony import */ var _utils_query_string__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/query-string */ "./src/utils/query-string.ts");



var username = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_2__["parseQueryString"])(location.search).user;
if (username) {
    var user = _data_users__WEBPACK_IMPORTED_MODULE_1__["users"].find(function (u) { return u.username === username; });
    if (user) {
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser = user;
    }
}
var _a = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_2__["parseQueryString"])(location.search), role = _a.role, school = _a.school;
if (_globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser) {
    if (role) {
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser.roles = role.split(',');
    }
    if (school) {
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser.school = school;
    }
}


/***/ }),

/***/ "./src/test/test-config.ts":
/*!*********************************!*\
  !*** ./src/test/test-config.ts ***!
  \*********************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");

_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_LOCALE = 'sv';
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_SCHOOL_LOCALE = 'sv';


/***/ }),

/***/ "./src/test/testpage.tsx":
/*!*******************************!*\
  !*** ./src/test/testpage.tsx ***!
  \*******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _test_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./test-config */ "./src/test/test-config.ts");
/* harmony import */ var _set_current_user__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./set-current-user */ "./src/test/set-current-user.ts");
/* harmony import */ var _global_setters_set_all__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../global-setters/set-all */ "./src/global-setters/set-all.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _data_learningModules__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./data/learningModules */ "./src/test/data/learningModules.ts");
/* harmony import */ var _data_learningModules2__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./data/learningModules2 */ "./src/test/data/learningModules2.ts");
/* harmony import */ var _components_weekplanner__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../components/weekplanner */ "./src/components/weekplanner/index.ts");
/* harmony import */ var _components__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./components */ "./src/test/components.ts");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! jquery */ "jquery");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _utils_choose_user__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./utils/choose-user */ "./src/test/utils/choose-user.tsx");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");
/* harmony import */ var _components_utility_components_SetupLanguageIntl__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../components/utility-components/SetupLanguageIntl */ "./src/components/utility-components/SetupLanguageIntl.tsx");
/* harmony import */ var _components_utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../components/utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");

// <Initialization>

 // Emulate server-side script to set current user
 // Client-side initialization
// </Initialization>











var _TestPage = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](_TestPage, _super);
    function _TestPage(props) {
        var _this = _super.call(this, props) || this;
        var selectedComp = localStorage.getItem("selectedComponent") || Object.keys(_components__WEBPACK_IMPORTED_MODULE_9__["components"])[0];
        var selectCompProps = _components__WEBPACK_IMPORTED_MODULE_9__["components"][selectedComp].props();
        _this.state = {
            selectedComponent: selectedComp,
            selectedLearningModule: parseInt(localStorage.getItem("selectedLearningModule") || "0"),
            selectedLearningModuleUrl: localStorage.getItem("selectedLearningModuleUrl") || "",
            selectedComponentReal: _components__WEBPACK_IMPORTED_MODULE_9__["components"][selectedComp].component,
            selectedCompProps: tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, selectCompProps)
        };
        return _this;
    }
    _TestPage.prototype.componentDidUpdate = function () {
        this.renderTestComponent();
    };
    _TestPage.prototype.componentDidMount = function () {
        //this.renderTestComponent();
    };
    _TestPage.prototype.renderTestComponent = function () {
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__["default"].learningModuleTasks = _data_learningModules__WEBPACK_IMPORTED_MODULE_6__["learningModules"][this.state.selectedLearningModule];
        jquery__WEBPACK_IMPORTED_MODULE_10___default()(this.componentArea).html("");
        if (_globals_KED_env__WEBPACK_IMPORTED_MODULE_4__["default"].currentUser) {
            var selected = _components__WEBPACK_IMPORTED_MODULE_9__["components"][this.state.selectedComponent] ||
                _components__WEBPACK_IMPORTED_MODULE_9__["components"][Object.keys(_components__WEBPACK_IMPORTED_MODULE_9__["components"])[0]];
            this.setState({
                selectedComponentReal: selected.component,
                selectedCompProps: tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, selected.props())
            });
        }
    };
    _TestPage.prototype.render = function () {
        var _this = this;
        var SelectedComponent = this.state.selectedComponentReal;
        var intl = this.props.intl;
        return _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__["default"].currentUser ?
            react__WEBPACK_IMPORTED_MODULE_5__["createElement"](_components_utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_14__["LanguageContext"].Provider, { value: { intl: intl } },
                react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("div", { className: "test-page" },
                    react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("div", { className: "header" },
                        react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("div", { className: "test-selects" },
                            react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("form", null,
                                react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("h4", null,
                                    react__WEBPACK_IMPORTED_MODULE_5__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_12__["FormattedMessage"], { id: "test.pageDescription", defaultMessage: "Testsida f\u00F6r komponenter till nya startsidan" })),
                                react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("table", null,
                                    react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("tbody", null,
                                        react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("tr", null,
                                            react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("td", null,
                                                react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("label", { htmlFor: "testComponent" },
                                                    react__WEBPACK_IMPORTED_MODULE_5__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_12__["FormattedMessage"], { id: "test.chooseComponentLabel", defaultMessage: "Komponent" }))),
                                            react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("td", null,
                                                react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("select", { id: "testComponent", value: this.state.selectedComponent, onChange: function (ev) {
                                                        _this.setState({ selectedComponent: ev.target.value });
                                                        localStorage.setItem("selectedComponent", ev.target.value);
                                                        window.location.reload();
                                                    } }, Object.keys(_components__WEBPACK_IMPORTED_MODULE_9__["components"]).map(function (c) { return react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("option", { key: c, value: c }, c); })))),
                                        this.state.selectedComponent === 'LearningGoalsAndTasks' && react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("tr", null,
                                            react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("td", null,
                                                react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("label", { htmlFor: "testLearningModule" }, "Kursmodul")),
                                            react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("td", null,
                                                react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("select", { id: "testLearningModule", value: this.state.selectedLearningModule, onChange: function (ev) {
                                                        localStorage.setItem("selectedLearningModule", ev.target.value);
                                                        window.location.reload();
                                                    } }, _data_learningModules__WEBPACK_IMPORTED_MODULE_6__["learningModules"].map(function (lm, i) {
                                                    return react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("option", { key: i, value: i }, lm.subject.course.name + "/" +
                                                        lm.subject.name + "/" +
                                                        lm.moduleName);
                                                })))),
                                        this.state.selectedComponent === 'LearningTasks' && react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("tr", null,
                                            react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("td", null,
                                                react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("label", { htmlFor: "testLearningModuleUrl" }, "Kursmodul")),
                                            react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("td", null,
                                                react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("select", { id: "testLearningModuleUrl", value: this.state.selectedLearningModuleUrl, onChange: function (ev) {
                                                        localStorage.setItem("selectedLearningModuleUrl", ev.target.value);
                                                        window.location.reload();
                                                    } }, _data_learningModules2__WEBPACK_IMPORTED_MODULE_7__["learningPageUrls"].map(function (url, i) {
                                                    return react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("option", { key: i, value: url }, url);
                                                }))))))))),
                    react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("hr", null),
                    react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("div", { className: "componentRow" },
                        react__WEBPACK_IMPORTED_MODULE_5__["createElement"](SelectedComponent, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.state.selectedCompProps)),
                        react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("div", { className: "componentArea", ref: function (div) { return _this.componentArea = div; } }),
                        react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("div", { className: "week-planner" }, this.state.selectedComponent === 'LearningTasks' &&
                            react__WEBPACK_IMPORTED_MODULE_5__["createElement"](_components_weekplanner__WEBPACK_IMPORTED_MODULE_8__["WeekPlanner"], { viewCourseUrl: "http://www.svt.se/nyheter", env: _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__["default"] }))))) : react__WEBPACK_IMPORTED_MODULE_5__["createElement"](_utils_choose_user__WEBPACK_IMPORTED_MODULE_11__["ChooseUser"], null);
    };
    return _TestPage;
}(react__WEBPACK_IMPORTED_MODULE_5__["Component"]));
var TestPage = Object(_components_utility_components_SetupLanguageIntl__WEBPACK_IMPORTED_MODULE_13__["setupIntl"])(Object(react_intl__WEBPACK_IMPORTED_MODULE_12__["injectIntl"])(_TestPage));
/* harmony default export */ __webpack_exports__["default"] = (TestPage);


/***/ }),

/***/ "./src/test/utils/choose-user.tsx":
/*!****************************************!*\
  !*** ./src/test/utils/choose-user.tsx ***!
  \****************************************/
/*! exports provided: ChooseUser */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChooseUser", function() { return ChooseUser; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _data_users__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../data/users */ "./src/test/data/users.ts");


function ChooseUser() {
    var select;
    return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "sv-layout" },
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("h2", null, "V\u00E4lj anv\u00E4ndare"),
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("table", { className: "login-table" },
            react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("thead", null,
                react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("tr", null,
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("th", null, "Namn"),
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("th", null, "Roller"),
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("th", null, "E-post"),
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("th", null, "Skola"))),
            react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("tbody", null, _data_users__WEBPACK_IMPORTED_MODULE_1__["users"].map(function (_a) {
                var username = _a.username, displayName = _a.displayName, mail = _a.mail, school = _a.school, roles = _a.roles;
                return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("tr", { key: mail, onClick: function () { return location.search = "?user=" + username; } },
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("td", null, displayName),
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("td", { style: roles.length === 0 ? { fontStyle: 'italic' } : {} }, roles.length === 0 ? "saknar roller" : roles.join(', ')),
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("td", null, mail),
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("td", { style: school ? {} : { fontStyle: 'italic' } }, school || "saknar skola"));
            }))));
}
;


/***/ }),

/***/ "./src/translations/en.json":
/*!**********************************!*\
  !*** ./src/translations/en.json ***!
  \**********************************/
/*! exports provided: addeditsubtask.deleteSubtask, addeditsubtask.editSubtask, addeditsubtask.nameLabel, addeditsubtask.addSubtask, calendar.currentDate, calendar.fullDayEventLocation, calendar.loadCalendarEvents, calendar.loadingCalendar, calendar.weekNumber, common.addDescriptionPlhd, common.cancel, common.changesNotSavedErrorOccured, common.changesNotSavedUnauthorized, common.descriptionLabel, common.errorSavingData, common.linkLabel, common.loading, common.nameLabel, common.save, common.saved, common.saving, common.remove, customTask.addWorkGoalTitle, customTask.enterNamePlhd, learningGoalsLost.overall, task.addSubtask, task.editTask, task.editWorkGoals, task.enterTaskNamePlhd, task.removeDeadline, task.removeThisTask, task.removeWorkGoals, task.setDeadline, task.setDeadlineLabel, task.subTasks, task.targetNameLabel, task.taskNameLabel, task.whatShouldYouDoPlhd, taskList.nextWeekTask, taskList.lastWeekTask, taskList.currentWeekTask, taskList.removeTaskFromWeeklyPlanning, taskList.addTaskToWeeklyPlanning, termplanner.comments, termplanner.course, termplanner.edsGoalGrades, termplanner.englishLanguage, termplanner.finalStep, termplanner.firstTerm, termplanner.hindiLanguage, termplanner.ict, termplanner.loadingTermplanner, termplanner.maths, termplanner.modernLanguage, termplanner.noFinalStepAvailable, termplanner.secondTerm, termplanner.termPlanning, termplanner.weekNumber, termplanner.chartsBoxTitle, termplanner.yoga, tutorNoteDialog.weekComment, test.chooseComponentLabel, test.pageDescription, userTasks.addLearningGoal, userTasks.deleteLearningGoal, userTasks.goals, weekNotebook.title, weekplanner.addLearningGoal, weekplanner.addLearningGoalTitle, weekplanner.confirmRemoveLearningObjectives, weekplanner.copyPreviousWeekTaks, weekplanner.emptyLearningGoalErr, weekplanner.evaluation, weekplanner.evaluationDescription, weekplanner.learningGoal, weekplanner.logBook, weekplanner.nameCannotBeEmpty, weekplanner.nameMustNotBeEmpty, weekplanner.strategy, weekplanner.strategyAndEvaluation, weekplanner.strategyDescription, weekplanner.weekNumber, wysiwyg.bold, wysiwyg.code, wysiwyg.heading1, wysiwyg.heading2, wysiwyg.heading3, wysiwyg.image, wysiwyg.imagePromptMsg, wysiwyg.italic, wysiwyg.line, wysiwyg.link, wysiwyg.olist, wysiwyg.paragraph, wysiwyg.quote, wysiwyg.strikethrough, wysiwyg.ulist, wysiwyg.underline, default */
/***/ (function(module) {

module.exports = {"addeditsubtask.deleteSubtask":"Delete subtask","addeditsubtask.editSubtask":"Edit subtask","addeditsubtask.nameLabel":"Name of subtask","addeditsubtask.addSubtask":"Add sub-task","calendar.currentDate":"Week {week}, {year}","calendar.fullDayEventLocation":"Place: {location}","calendar.loadCalendarEvents":"Load calendar events...","calendar.loadingCalendar":"Loading calendars... (listing...)","calendar.weekNumber":"W{weekNumber}","common.addDescriptionPlhd":"Add description...","common.cancel":"Cancel","common.changesNotSavedErrorOccured":"An error occured while saving data. Your changes were not saved.","common.changesNotSavedUnauthorized":"The changes were not saved due to insufficient authority","common.descriptionLabel":"Description","common.errorSavingData":"An error occured while saving data.","common.linkLabel":"Link","common.loading":"Loading...","common.nameLabel":"Name","common.save":" Save","common.saved":" Saved","common.saving":"Saving","common.remove":"Delete","customTask.addWorkGoalTitle":"Add own working goal","customTask.enterNamePlhd":"Enter Name...","learningGoalsLost.overall":"Overall","task.addSubtask":"Add subtask","task.editTask":"Edit task","task.editWorkGoals":"Edit working goal","task.enterTaskNamePlhd":"Enter the name of task...","task.removeDeadline":"Delete deadline","task.removeThisTask":"Delete this task","task.removeWorkGoals":"Delete working goal","task.setDeadline":"Set deadline","task.setDeadlineLabel":"Set deadline...","task.subTasks":"Subtasks","task.targetNameLabel":"Name of working goal","task.taskNameLabel":"Name of task","task.whatShouldYouDoPlhd":"What should you do?","taskList.nextWeekTask":"for next week (w{week})","taskList.lastWeekTask":"for last week (w{week})","taskList.currentWeekTask":"for week {week}","taskList.removeTaskFromWeeklyPlanning":"Delete task from your weekly planning {week}","taskList.addTaskToWeeklyPlanning":"Add task to your weekly planning {week}","termplanner.comments":"Comments","termplanner.course":"Theme course","termplanner.edsGoalGrades":"Intermediate goals","termplanner.englishLanguage":"Eng","termplanner.finalStep":"Final Step","termplanner.firstTerm":"FT {year}","termplanner.hindiLanguage":"Hindi","termplanner.ict":"ICT","termplanner.loadingTermplanner":"Loading Termplanner","termplanner.maths":"Maths","termplanner.modernLanguage":"MFL","termplanner.noFinalStepAvailable":"No final step available","termplanner.secondTerm":"ST {year}","termplanner.termPlanning":"Term planner","termplanner.weekNumber":"Week","termplanner.chartsBoxTitle":"Progress Charts","termplanner.yoga":"Yoga","tutorNoteDialog.weekComment":"Note for week {weekNumber}","test.chooseComponentLabel":"Component","test.pageDescription":"Test page for the components on the starting page","userTasks.addLearningGoal":"Own working goal","userTasks.deleteLearningGoal":"Delete learning goal and its tasks","userTasks.goals":"Own learning goal","weekNotebook.title":"Notepad","weekplanner.addLearningGoal":"Goal:","weekplanner.addLearningGoalTitle":"Add own learning goal","weekplanner.confirmRemoveLearningObjectives":"Delete learning goal and {learningGoalsNumber} tasks?","weekplanner.copyPreviousWeekTaks":"Copy from previous week","weekplanner.emptyLearningGoalErr":"The learning goal cannot be empty","weekplanner.evaluation":"Evaluation","weekplanner.evaluationDescription":"Reflection on your work effort and your chosen strategies during the week. Evaluate in relation to your goals.","weekplanner.learningGoal":"Own learning goal","weekplanner.logBook":"Logbook","weekplanner.nameCannotBeEmpty":"Name cannot be empty","weekplanner.nameMustNotBeEmpty":"Name must not be empty","weekplanner.strategy":"Strategy","weekplanner.strategyAndEvaluation":"Strategy & Evaluation","weekplanner.strategyDescription":"What I should do to learn","weekplanner.weekNumber":"Week {weekNumber}","wysiwyg.bold":"Bold","wysiwyg.code":"Code","wysiwyg.heading1":"Heading 1","wysiwyg.heading2":"Heading 2","wysiwyg.heading3":"Heading 3","wysiwyg.image":"Insert image","wysiwyg.imagePromptMsg":"Enter the URL of the image","wysiwyg.italic":"Italics","wysiwyg.line":"Horizontal line","wysiwyg.link":"Insert link","wysiwyg.olist":"Ordered list","wysiwyg.paragraph":"Paragraph","wysiwyg.quote":"Quote","wysiwyg.strikethrough":"Strikethrough","wysiwyg.ulist":"Bullet list","wysiwyg.underline":"Underline"};

/***/ }),

/***/ "./src/translations/sv.json":
/*!**********************************!*\
  !*** ./src/translations/sv.json ***!
  \**********************************/
/*! exports provided: addeditsubtask.addSubtask, addeditsubtask.deleteSubtask, addeditsubtask.editSubtask, addeditsubtask.nameLabel, calendar.currentDate, calendar.fullDayEventLocation, calendar.loadCalendarEvents, calendar.loadingCalendar, calendar.weekNumber, common.addDescriptionPlhd, common.cancel, common.changesNotSavedErrorOccured, common.changesNotSavedUnauthorized, common.descriptionLabel, common.errorSavingData, common.linkLabel, common.loading, common.nameLabel, common.save, common.saved, common.saving, common.remove, customTask.addWorkGoalTitle, customTask.enterNamePlhd, learningGoalsLost.overall, task.addSubtask, task.editTask, task.editWorkGoals, task.enterTaskNamePlhd, task.removeDeadline, task.removeThisTask, task.removeWorkGoals, task.setDeadline, task.setDeadlineLabel, task.subTasks, task.targetNameLabel, task.taskNameLabel, task.whatShouldYouDoPlhd, taskList.nextWeekTask, taskList.lastWeekTask, taskList.currentWeekTask, taskList.removeTaskFromWeeklyPlanning, taskList.addTaskToWeeklyPlanning, termplanner.comments, termplanner.course, termplanner.edsGoalGrades, termplanner.englishLanguage, termplanner.swedishLanguage, termplanner.finalStep, termplanner.firstTerm, termplanner.hindiLanguage, termplanner.loadingTermplanner, termplanner.modernLanguageFullname, termplanner.mathsFullname, termplanner.noFinalStepAvailable, termplanner.swedishLanguageFullName, termplanner.englishLanguageFullName, termplanner.maths, termplanner.modernLanguage, termplanner.secondTerm, termplanner.termPlanning, termplanner.weekNumber, termplanner.chartsBoxTitle, tutorNoteDialog.weekComment, test.chooseComponentLabel, test.pageDescription, userTasks.addLearningGoal, userTasks.deleteLearningGoal, userTasks.goals, weekNotebook.title, weekplanner.addLearningGoal, weekplanner.addLearningGoalTitle, weekplanner.confirmRemoveLearningObjectives, weekplanner.copyPreviousWeekTaks, weekplanner.emptyLearningGoalErr, weekplanner.evaluation, weekplanner.evaluationDescription, weekplanner.learningGoal, weekplanner.logBook, weekplanner.nameCannotBeEmpty, weekplanner.nameMustNotBeEmpty, weekplanner.strategy, weekplanner.strategyAndEvaluation, weekplanner.strategyDescription, weekplanner.weekNumber, wysiwyg.bold, wysiwyg.code, wysiwyg.heading1, wysiwyg.heading2, wysiwyg.heading3, wysiwyg.image, wysiwyg.imagePromptMsg, wysiwyg.italic, wysiwyg.line, wysiwyg.link, wysiwyg.olist, wysiwyg.paragraph, wysiwyg.quote, wysiwyg.strikethrough, wysiwyg.ulist, wysiwyg.underline, default */
/***/ (function(module) {

module.exports = {"addeditsubtask.addSubtask":"Lgg till underuppgift","addeditsubtask.deleteSubtask":"Ta bort underuppgift","addeditsubtask.editSubtask":"Redigera underuppgift","addeditsubtask.nameLabel":"Underuppgiftens namn","calendar.currentDate":"Vecka {week}, {year}","calendar.fullDayEventLocation":"Plats: {location}","calendar.loadCalendarEvents":"Load calendar events...","calendar.loadingCalendar":"Loading calendars... (listing...)","calendar.weekNumber":"V{weekNumber}","common.addDescriptionPlhd":"Lgg till en beskrivning...","common.cancel":"Avbryt","common.changesNotSavedErrorOccured":"Fr tillfllet problem att spara data. Dina ndringar sparades inte.","common.changesNotSavedUnauthorized":"ndringarna sparades inte p.g.a. otillrcklig behrighet.","common.descriptionLabel":"Beskrivning","common.errorSavingData":"Kunde inte spara.","common.linkLabel":"Lnk","common.loading":"Laddar...","common.nameLabel":"Namn","common.save":" Spara","common.saved":" Sparad","common.saving":"Sparar...","common.remove":"Ta bort","customTask.addWorkGoalTitle":"Lgg till eget arbetsml","customTask.enterNamePlhd":"Ange namn...","learningGoalsLost.overall":"vergripande","task.addSubtask":"Lgg till underuppgift","task.editTask":"Redigera uppgift","task.editWorkGoals":"Redigera arbetsml","task.enterTaskNamePlhd":"Ange uppgiftens namn...","task.removeDeadline":"Ta bort deadline","task.removeThisTask":"Ta bort den hr uppgiften","task.removeWorkGoals":"Ta bort arbetsml","task.setDeadline":"Set deadline","task.setDeadlineLabel":"Ange deadline...","task.subTasks":"Underuppgifter","task.targetNameLabel":"Arbetsmlets namn","task.taskNameLabel":"Uppgiftens namn","task.whatShouldYouDoPlhd":"Vad ska du gra?","taskList.nextWeekTask":"fr nsta vecka (v{week})","taskList.lastWeekTask":"fr frra veckan (v{week})","taskList.currentWeekTask":"fr vecka {week}","taskList.removeTaskFromWeeklyPlanning":"Ta bort uppgiften frn egen veckoplanering {week}","taskList.addTaskToWeeklyPlanning":"Lgg till uppgiften i egen veckoplanering {week}","termplanner.comments":"Kommentar","termplanner.course":"Kurs","termplanner.edsGoalGrades":"Terminsml","termplanner.englishLanguage":"Eng","termplanner.swedishLanguage":"Sv/SvA","termplanner.finalStep":"Slutsteg","termplanner.firstTerm":"HT {year}","termplanner.hindiLanguage":"","termplanner.loadingTermplanner":"V.g. vnta medan terminsplaner laddas...","termplanner.modernLanguageFullname":"M.sprk","termplanner.mathsFullname":"Matematik","termplanner.noFinalStepAvailable":"Inget slutsteg tillgngligt","termplanner.swedishLanguageFullName":"Svenska","termplanner.englishLanguageFullName":"Engelska","termplanner.maths":"Ma","termplanner.modernLanguage":"M.spr","termplanner.secondTerm":"VT {year}","termplanner.termPlanning":"Terminsplanering","termplanner.weekNumber":"Vecka","termplanner.chartsBoxTitle":"Framsteg diagram","tutorNoteDialog.weekComment":"Kommentar fr vecka {weekNumber}","test.chooseComponentLabel":"Komponent","test.pageDescription":"Testsida fr komponenter till nya startsidan","userTasks.addLearningGoal":"Eget arbetsml","userTasks.deleteLearningGoal":"Ta bort lrandemlet och dess uppgifter","userTasks.goals":"Egna lrandeml","weekNotebook.title":"Anteckningar","weekplanner.addLearningGoal":"Ml:","weekplanner.addLearningGoalTitle":"Lgg till eget lrandeml","weekplanner.confirmRemoveLearningObjectives":"Ta bort lrandeml samt {learningGoalsNumber} uppgifter?","weekplanner.copyPreviousWeekTaks":"Kopiera ej klara frn fregende vecka","weekplanner.emptyLearningGoalErr":"Lrandemlet kan inte vara tomt","weekplanner.evaluation":"Utvrdering","weekplanner.evaluationDescription":"Reflektion kring din arbetsinsats och dina valda strategier under veckan.Utvrdera i frhllande till dina ml.","weekplanner.learningGoal":"Eget lrandeml","weekplanner.logBook":"Loggbok","weekplanner.nameCannotBeEmpty":"Namnet kan inte vara tomt","weekplanner.nameMustNotBeEmpty":"Namnet fr inte vara tomt","weekplanner.strategy":"Strategi","weekplanner.strategyAndEvaluation":"Strategi & Utvrdering","weekplanner.strategyDescription":"Hur jag ska gra fr att lra mig.","weekplanner.weekNumber":"Vecka {weekNumber}","wysiwyg.bold":"Fetstil","wysiwyg.code":"Programkod","wysiwyg.heading1":"Rubrik 1","wysiwyg.heading2":"Rubrik 2","wysiwyg.heading3":"Rubrik 3","wysiwyg.image":"Infoga bild","wysiwyg.imagePromptMsg":"Ange bildens URL","wysiwyg.italic":"Kursiv","wysiwyg.line":"Vgrt linje","wysiwyg.link":"Infoga lnk","wysiwyg.olist":"Ordnad lista","wysiwyg.paragraph":"Paragraf","wysiwyg.quote":"Citat","wysiwyg.strikethrough":"Struken","wysiwyg.ulist":"Punktlista","wysiwyg.underline":"Understruken"};

/***/ }),

/***/ "./src/utils/constants.js":
/*!********************************!*\
  !*** ./src/utils/constants.js ***!
  \********************************/
/*! exports provided: SECOND, MINUTE, HOUR */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SECOND", function() { return SECOND; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MINUTE", function() { return MINUTE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HOUR", function() { return HOUR; });

const SECOND = 1000;
const MINUTE = SECOND * 60;
const HOUR = MINUTE * 60;



/***/ }),

/***/ "./src/utils/generic-school-term.ts":
/*!******************************************!*\
  !*** ./src/utils/generic-school-term.ts ***!
  \******************************************/
/*! exports provided: GenericSchoolTerm */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GenericSchoolTerm", function() { return GenericSchoolTerm; });
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _generic_school_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./generic-school-utils */ "./src/utils/generic-school-utils.ts");
/* harmony import */ var _components_ks_termplanner_termplanner_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/ks-termplanner/termplanner-utils */ "./src/components/ks-termplanner/termplanner-utils.ts");



var GenericSchoolTerm = /** @class */ (function () {
    function GenericSchoolTerm(currentDate, currentLocale, academicYearStructure) {
        this.locale = currentLocale || "sv";
        this.selectedDate = currentDate;
        this.schoolMoment = academicYearStructure ? Object(_generic_school_utils__WEBPACK_IMPORTED_MODULE_1__["getCurrentAcademicYear"])(moment__WEBPACK_IMPORTED_MODULE_0___default()(currentDate), academicYearStructure) : null;
    }
    GenericSchoolTerm.prototype.getTermStartAndEnd = function (includeExtraWeek) {
        //In case that the week start date is a date from the previous year
        //Consider the start of the week ( start date) as the day of the 01.01.year
        var startOfTermWeek = this.schoolMoment.academicYearStructure.startDate.clone().startOf('week');
        if (startOfTermWeek.year() < this.schoolMoment.academicYearStructure.startDate.year()) {
            startOfTermWeek = this.schoolMoment.academicYearStructure.startDate;
        }
        var endOfTermWeek = this.schoolMoment.academicYearStructure.endDate;
        if (this.locale === "sv" && includeExtraWeek && this.schoolMoment.term === "ST") {
            endOfTermWeek = endOfTermWeek.clone().add(3, 'weeks').endOf('week');
        }
        else if (includeExtraWeek) {
            if (this.locale != "sv") {
                // for india the end date can be in the middle of the week
                endOfTermWeek = this.schoolMoment.academicYearStructure.endDate.clone();
            }
            endOfTermWeek = this.schoolMoment.academicYearStructure.endDate.clone().add(1, 'week').endOf('week');
        }
        return [startOfTermWeek, endOfTermWeek];
    };
    GenericSchoolTerm.prototype.getFirstAndLastWeekOfTerm = function () {
        return [this.schoolMoment.academicYearStructure.startDate.week(), this.schoolMoment.academicYearStructure.endDate.week()];
    };
    GenericSchoolTerm.prototype.isCurrentWeek = function (dateTime) {
        var termDate = moment__WEBPACK_IMPORTED_MODULE_0___default()(dateTime);
        return termDate.year() === moment__WEBPACK_IMPORTED_MODULE_0___default()().year() && termDate.week() === moment__WEBPACK_IMPORTED_MODULE_0___default()().week();
    };
    GenericSchoolTerm.prototype.getLastStepWeek = function (locale) {
        //TODO: this should be refactored. The generic method should be used
        if (locale === "sv") {
            return this.schoolMoment.term === "ST" ? _components_ks_termplanner_termplanner_utils__WEBPACK_IMPORTED_MODULE_2__["LAST_STEP_SPRING"] : _components_ks_termplanner_termplanner_utils__WEBPACK_IMPORTED_MODULE_2__["LAST_STEP_AUTUMN"];
        }
        return this.schoolMoment.academicYearStructure.endDate.clone().add(1, "week").week();
    };
    GenericSchoolTerm.prototype.toLocaleString = function (intl, shortYear) {
        if (this.schoolMoment) {
            var year = this.schoolMoment.academicYearStructure.endDate.year().toString();
            var academicYear = this.schoolMoment.academicYearStructure.academicYear;
            if (shortYear && intl.locale === 'sv') {
                year = year.substr(2);
            }
            else {
                year = academicYear;
            }
            return this.schoolMoment.term === 'AT' ? intl.formatMessage({ id: 'termplanner.firstTerm', defaultMessage: 'HT {year}' }, { year: year }) :
                intl.formatMessage({ id: 'termplanner.secondTerm', defaultMessage: 'VT {year}' }, { year: year });
        }
        return null;
    };
    GenericSchoolTerm.prototype.nextTerm = function () {
        //switch to next semester, we set the current date as adding 3 months to the end of the current semester
        var endDate = this.schoolMoment ? this.schoolMoment.academicYearStructure.endDate.clone() : moment__WEBPACK_IMPORTED_MODULE_0___default()();
        var nextDate = endDate.add(3, 'months');
        return new GenericSchoolTerm(nextDate.toDate(), this.locale);
    };
    GenericSchoolTerm.prototype.prevTerm = function () {
        //to switch to next semester, we set the current date as subtracting 3 months from the start of the current semester
        var startDate = this.schoolMoment ? this.schoolMoment.academicYearStructure.startDate.clone() : moment__WEBPACK_IMPORTED_MODULE_0___default()();
        var prevDate = startDate.subtract(3, 'months');
        return new GenericSchoolTerm(prevDate.toDate(), this.locale);
    };
    GenericSchoolTerm.prototype.getEdsPeriodName = function () {
        return this.schoolMoment.term === 'AT' ? "HT" : "VT" + this.schoolMoment.academicYearStructure.endDate.year();
    };
    return GenericSchoolTerm;
}());



/***/ }),

/***/ "./src/utils/generic-school-utils.ts":
/*!*******************************************!*\
  !*** ./src/utils/generic-school-utils.ts ***!
  \*******************************************/
/*! exports provided: getCurrentAcademicYear, getSchoolTranslatedSubjects, getSchoolTranslatedSubjectFullname */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getCurrentAcademicYear", function() { return getCurrentAcademicYear; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSchoolTranslatedSubjects", function() { return getSchoolTranslatedSubjects; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSchoolTranslatedSubjectFullname", function() { return getSchoolTranslatedSubjectFullname; });
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__);

function getCurrentAcademicYear(currentDate, academicYear) {
    var firstTermStartDate = moment__WEBPACK_IMPORTED_MODULE_0___default()(new Date(academicYear.firstTerm.startDate));
    var firstTermEndDate = moment__WEBPACK_IMPORTED_MODULE_0___default()(new Date(academicYear.firstTerm.endDate));
    var secondTermStartDate = moment__WEBPACK_IMPORTED_MODULE_0___default()(new Date(academicYear.secondTerm.startDate));
    var secondTermEndDate = moment__WEBPACK_IMPORTED_MODULE_0___default()(new Date(academicYear.secondTerm.endDate));
    var academicPeriod = firstTermStartDate.year().toString().substr(2) + "/" + secondTermEndDate.year().toString().substr(2);
    var holidays = _getTermHolidays(academicYear.holidays, firstTermStartDate, firstTermEndDate);
    if (currentDate < firstTermEndDate) {
        //compute academic week numbers
        var academicStartWeek = 1;
        var academicEndWeek = firstTermEndDate.week() - firstTermStartDate.week();
        //get current term holidays
        return { term: 'AT', academicYearStructure: { academicYear: academicPeriod, startDate: firstTermStartDate, endDate: firstTermEndDate, academicStartWeek: academicStartWeek, academicEndWeek: academicEndWeek, holidays: holidays } };
    }
    //compute the number of first term holidays week numbers
    var numberOfHolidayWeeks = _getHolidayWeeksNumber(holidays);
    //compute academic week numbers
    var academicStartWeek = secondTermStartDate.clone().add(1, 'week').week() - firstTermStartDate.week() - numberOfHolidayWeeks;
    var academicEndWeek = secondTermEndDate.clone().add().add(1, 'week').week() - firstTermStartDate.week() - numberOfHolidayWeeks;
    //get current term holidays
    var holidays = _getTermHolidays(academicYear.holidays, secondTermStartDate, secondTermEndDate);
    return { term: 'ST', academicYearStructure: { academicYear: academicPeriod, startDate: secondTermStartDate, endDate: secondTermEndDate, academicStartWeek: academicStartWeek, academicEndWeek: academicEndWeek, holidays: holidays } };
}
function getSchoolTranslatedSubjects(schoolLocale, intl) {
    var translatedColumns = {};
    //these are fixed for all school locales
    translatedColumns["Kurs"] = intl.formatMessage({ id: "termplanner.course", defaultMessage: "Kurs" });
    translatedColumns["Kommentar"] = intl.formatMessage({ id: "termplanner.comments", defaultMessage: "Kommentar" });
    if (schoolLocale === 'sv') {
        translatedColumns["M.spr"] = intl.formatMessage({ id: "termplanner.modernLanguage", defaultMessage: "M.spr" });
        translatedColumns["Ma"] = intl.formatMessage({ id: "termplanner.maths", defaultMessage: "Ma" });
        translatedColumns["Sv/SvA"] = intl.formatMessage({ id: "termplanner.swedishLanguage", defaultMessage: "Sv/SvA" });
        translatedColumns["Eng"] = intl.formatMessage({ id: "termplanner.englishLanguage", defaultMessage: "Eng" });
    }
    else {
        translatedColumns["MFL"] = intl.formatMessage({ id: "termplanner.modernLanguage", defaultMessage: "MFL" });
        translatedColumns["Ma"] = intl.formatMessage({ id: "termplanner.maths", defaultMessage: "Maths" });
        translatedColumns["Hi"] = intl.formatMessage({ id: "termplanner.hindiLanguage", defaultMessage: "Hindi" });
        translatedColumns["Eng"] = intl.formatMessage({ id: "termplanner.englishLanguage", defaultMessage: "English" });
        translatedColumns["Yoga"] = intl.formatMessage({ id: "termplanner.yoga", defaultMessage: "Yoga" });
        translatedColumns["ICT"] = intl.formatMessage({ id: "termplanner.ict", defaultMessage: "ICT" });
    }
    return translatedColumns;
}
//this is related to charts. It is used only for sv locale
function getSchoolTranslatedSubjectFullname(intl) {
    var translatedColumns = {};
    translatedColumns["M.spr"] = intl.formatMessage({ id: "termplanner.modernLanguageFullname", defaultMessage: "M.sprk" });
    translatedColumns["Ma"] = intl.formatMessage({ id: "termplanner.mathsFullname", defaultMessage: "Matematik" });
    translatedColumns["Sv/SvA"] = intl.formatMessage({ id: "termplanner.swedishLanguageFullName", defaultMessage: "Svenska" });
    translatedColumns["Eng"] = intl.formatMessage({ id: "termplanner.englishLanguageFullName", defaultMessage: "Engelska" });
    return translatedColumns;
}
function _getTermHolidays(holidays, termStartDate, termEndDate) {
    return holidays.filter(function (elem) {
        return moment__WEBPACK_IMPORTED_MODULE_0___default()(elem.startDate).isBetween(termStartDate, termEndDate);
    });
}
function _getHolidayWeeksNumber(holidays) {
    var numberOfWeeks = 0;
    holidays.forEach(function (elem) {
        //the number of weeks is the difference + 1
        numberOfWeeks += moment__WEBPACK_IMPORTED_MODULE_0___default()(elem.endDate).add(1, 'week').week() - moment__WEBPACK_IMPORTED_MODULE_0___default()(elem.startDate).week();
    });
    return numberOfWeeks;
}


/***/ }),

/***/ "./src/utils/if-takes-time.ts":
/*!************************************!*\
  !*** ./src/utils/if-takes-time.ts ***!
  \************************************/
/*! exports provided: ifTakesTime */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ifTakesTime", function() { return ifTakesTime; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

function ifTakesTime(ms, task, action) {
    return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
        var timeoutReached, th, rv;
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
            switch (_a.label) {
                case 0:
                    timeoutReached = false;
                    th = setTimeout(function () {
                        timeoutReached = true;
                        action();
                    }, ms);
                    return [4 /*yield*/, task()];
                case 1:
                    rv = _a.sent();
                    if (!timeoutReached)
                        clearTimeout(th);
                    return [2 /*return*/, rv];
            }
        });
    });
}


/***/ }),

/***/ "./src/utils/make-suspense-api.ts":
/*!****************************************!*\
  !*** ./src/utils/make-suspense-api.ts ***!
  \****************************************/
/*! exports provided: makeSuspenseApi */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "makeSuspenseApi", function() { return makeSuspenseApi; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

var DEFAULT_CACHE_EXPIRATION = 30 * 60 * 1000; // 30 minutes.
var defaultOptions = {
    isApiMethod: function (f) { return typeof f === 'function'; },
    cacheExpiration: DEFAULT_CACHE_EXPIRATION
};
function makeSuspenseApi(api, options) {
    if (options === void 0) { options = defaultOptions; }
    options = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, defaultOptions, options);
    var isApiMethod = options.isApiMethod, cacheExpiration = options.cacheExpiration;
    var rv = Object.create(api);
    var cache = {};
    // Walk the instance + prototype chain to generate suspense version of each promise returning method
    for (var proto = api; proto && proto !== Object.prototype; proto = Object.getPrototypeOf(proto)) {
        suspendify(proto);
    }
    function suspendify(proto) {
        Object.keys(proto).forEach(function (prop) {
            if (!rv.hasOwnProperty(prop) && isApiMethod(prop)) {
                rv[prop] = function () {
                    var args = [];
                    for (var _i = 0; _i < arguments.length; _i++) {
                        args[_i] = arguments[_i];
                    }
                    var key = JSON.stringify(tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"]([prop], args));
                    var cachedEntry = cache[key];
                    if (cachedEntry !== undefined) {
                        if (cachedEntry.promise)
                            throw cachedEntry.promise;
                        if (cachedEntry.error)
                            throw cachedEntry.error;
                        if (cachedEntry.timeout > Date.now()) {
                            return cachedEntry.value;
                        }
                    }
                    try {
                        var promise = proto[prop].apply(api, args).then(function (result) {
                            cache[key] = { timeout: Date.now() + cacheExpiration, value: result };
                        }).catch(function (error) {
                            cache[key] = { timeout: Date.now() + cacheExpiration, error: error };
                        });
                        cache[key] = { timeout: Date.now() + cacheExpiration, promise: promise };
                        throw promise;
                    }
                    catch (error) {
                        if (error.then)
                            throw error;
                        cache[key] = { timeout: Date.now() + cacheExpiration, error: error };
                    }
                };
            }
        });
    }
    return rv;
}


/***/ }),

/***/ "./src/utils/pending-job.ts":
/*!**********************************!*\
  !*** ./src/utils/pending-job.ts ***!
  \**********************************/
/*! exports provided: PendingJob */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PendingJob", function() { return PendingJob; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

var PendingJob = /** @class */ (function () {
    function PendingJob(callback) {
        this.timeoutId = null;
        this.cancelled = false;
        this.pending = false;
        this.isJobExecuting = false;
        this.jobCallback = callback;
    }
    PendingJob.prototype.triggerChange = function (throttle) {
        var _this = this;
        if (this.cancelled)
            return;
        this.pending = true;
        if (this.timeoutId !== null)
            clearTimeout(this.timeoutId);
        this.timeoutId = setTimeout(function () { return _this.launchJob(); }, throttle);
    };
    PendingJob.prototype.stop = function () {
        if (this.timeoutId !== null)
            clearTimeout(this.timeoutId);
        this.timeoutId = null;
        this.cancelled = true;
    };
    PendingJob.prototype.launchJob = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (this.cancelled)
                            return [2 /*return*/];
                        if (!this.pending)
                            return [2 /*return*/];
                        if (this.isJobExecuting)
                            return [2 /*return*/];
                        this.timeoutId = null;
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, , 3, 4]);
                        this.isJobExecuting = true;
                        this.pending = false;
                        return [4 /*yield*/, this.jobCallback()];
                    case 2:
                        _a.sent();
                        return [3 /*break*/, 4];
                    case 3:
                        this.isJobExecuting = false;
                        return [7 /*endfinally*/];
                    case 4:
                        if (!this.pending) return [3 /*break*/, 6];
                        return [4 /*yield*/, this.launchJob()];
                    case 5:
                        _a.sent();
                        _a.label = 6;
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    return PendingJob;
}());



/***/ }),

/***/ "./src/utils/query-string.ts":
/*!***********************************!*\
  !*** ./src/utils/query-string.ts ***!
  \***********************************/
/*! exports provided: parseQueryString, generateQueryString, parseHashQueryString, generateHashQueryString, splitUrlAndQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseQueryString", function() { return parseQueryString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generateQueryString", function() { return generateQueryString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseHashQueryString", function() { return parseHashQueryString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generateHashQueryString", function() { return generateHashQueryString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "splitUrlAndQuery", function() { return splitUrlAndQuery; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

function parseQueryString(locationSearch, options) {
    var toLower = (options || {}).toLower;
    var result = {};
    if (locationSearch && locationSearch.length > 1)
        locationSearch.substr(1)
            .split('&')
            .map(function (part) { return part.split('=').map(function (s) { return decodeURIComponent(s.trim()); }); })
            .forEach(function (_a) {
            var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](_a, 2), key = _b[0], value = _b[1];
            return result[toLower ? key.toLowerCase() : key] = value;
        });
    return result;
}
function encodeParams(params) {
    return Object.keys(params).filter(function (key) { return params[key] !== undefined; }).map(function (key) { return encodeURIComponent(key) + "=" + encodeURIComponent(params[key]); }).join('&');
}
function generateQueryString(params) {
    return "?" + encodeParams(params);
}
function parseHashQueryString(locationHash, options) {
    return parseQueryString(locationHash, options);
}
function generateHashQueryString(params) {
    return "#" + encodeParams(params);
}
function splitUrlAndQuery(urlWithPossibleQuery) {
    var pQuery = urlWithPossibleQuery.indexOf('?');
    return pQuery >= 0 ?
        [urlWithPossibleQuery.substr(0, pQuery), urlWithPossibleQuery.substr(pQuery)] :
        [urlWithPossibleQuery, ""];
}


/***/ }),

/***/ "./src/utils/request-tutored-tokens.ts":
/*!*********************************************!*\
  !*** ./src/utils/request-tutored-tokens.ts ***!
  \*********************************************/
/*! exports provided: requestTutoredTokens */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "requestTutoredTokens", function() { return requestTutoredTokens; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _apis_edsclient__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../apis/edsclient */ "./src/apis/edsclient.ts");
/* harmony import */ var kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! kedbackend/clientweb */ "./kedbackend/clientweb.js");
/* harmony import */ var _repos_ks_termplanner_repo__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../repos/ks-termplanner-repo */ "./src/repos/ks-termplanner-repo.ts");
/* harmony import */ var _repos_kg_termplanner_repo__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../repos/kg-termplanner-repo */ "./src/repos/kg-termplanner-repo.ts");
/* harmony import */ var _repos_user_tasks_repo__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../repos/user-tasks-repo */ "./src/repos/user-tasks-repo.ts");









function requestTutoredTokens(userEmail, displayName) {
    return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
        function createBearerProvider(client, tokenUrl, query) {
            var bearerPromise = null;
            return {
                getBearer: function () {
                    return bearerPromise || this.refreshBearer();
                },
                refreshBearer: function () {
                    return (bearerPromise = retrieveToken());
                },
            };
            function retrieveToken() {
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
                    var res, _a, _b, _c;
                    return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_d) {
                        switch (_d.label) {
                            case 0: return [4 /*yield*/, client.get(tokenUrl, query)];
                            case 1:
                                res = _d.sent();
                                if (!(res.status === 200)) return [3 /*break*/, 3];
                                return [4 /*yield*/, res.json()];
                            case 2: return [2 /*return*/, (_d.sent())];
                            case 3:
                                _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["HttpError"].bind;
                                _b = [void 0, res.status];
                                _c = "Could not retrieve tutor token for " +
                                    userEmail +
                                    ". Error Message: ";
                                return [4 /*yield*/, res.text()];
                            case 4: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["HttpError"], _b.concat([_c + (_d.sent())])))();
                        }
                    });
                });
            }
        }
        var currentUser, bearerProvider, tutoredKedBackendClient, googleTokenProvider, edsClient, tutorEnv;
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
            switch (_a.label) {
                case 0:
                    currentUser = {
                        mail: userEmail,
                        displayName: displayName,
                        roles: ["USER"],
                        school: _globals_KED_env__WEBPACK_IMPORTED_MODULE_1__["default"].currentUser.school,
                        tutorFor: userEmail
                    };
                    bearerProvider = createBearerProvider(_globals_KED_env__WEBPACK_IMPORTED_MODULE_1__["default"].kedBackendClient.http, "tutor/token", { userEmail: userEmail });
                    tutoredKedBackendClient = new kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["KedBackendClient"](kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_5__["isomorphic"], bearerProvider, _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_2__["default"].KED_API_URL);
                    googleTokenProvider = createBearerProvider(tutoredKedBackendClient.http, "tutor/convert-token/google");
                    edsClient = new _apis_edsclient__WEBPACK_IMPORTED_MODULE_4__["EdsClient"](kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_5__["isomorphic"], _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_2__["default"].EDS_API_URL, bearerProvider, function () { return userEmail; });
                    tutorEnv = {
                        currentUser: currentUser,
                        bearerProvider: bearerProvider,
                        edsClient: edsClient,
                        googleTokenProvider: googleTokenProvider,
                        kedBackendClient: tutoredKedBackendClient,
                        tutored: true
                    };
                    tutorEnv.ksTermPlannerRepo = new _repos_ks_termplanner_repo__WEBPACK_IMPORTED_MODULE_6__["KSTermPlannerRepo"](function () { return tutoredKedBackendClient; }, function () { return currentUser; });
                    tutorEnv.kgTermPlannerRepo = new _repos_kg_termplanner_repo__WEBPACK_IMPORTED_MODULE_7__["KGTermPlannerRepo"](function () { return tutoredKedBackendClient; }, function () { return currentUser; });
                    tutorEnv.userTasksRepo = new _repos_user_tasks_repo__WEBPACK_IMPORTED_MODULE_8__["UserTasksRepo"](function () { return tutoredKedBackendClient; }, function () { return currentUser; });
                    return [4 /*yield*/, bearerProvider.getBearer().catch(function (error) {
                            console.error(error);
                        })];
                case 1:
                    _a.sent();
                    return [2 /*return*/, tutorEnv];
            }
        });
    });
}


/***/ }),

/***/ "./src/utils/school-moment.ts":
/*!************************************!*\
  !*** ./src/utils/school-moment.ts ***!
  \************************************/
/*! exports provided: getFirstAndLastWeekOfTerm, getTermStarEndDate, getSchoolMoment, addYear, nextAcademicYear, prevAcademicYear */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFirstAndLastWeekOfTerm", function() { return getFirstAndLastWeekOfTerm; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTermStarEndDate", function() { return getTermStarEndDate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSchoolMoment", function() { return getSchoolMoment; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addYear", function() { return addYear; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "nextAcademicYear", function() { return nextAcademicYear; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "prevAcademicYear", function() { return prevAcademicYear; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_1__);


function getFirstAndLastWeekOfTerm(term) {
    return term === 'AT' ?
        [32, 51] :
        [1, 25];
}
//Not used anymore
// export function getTermStartAndEnd(now: moment.Moment) : moment.Moment[] {
//     return now.month() >= 6 ? // 6 = July in JS Dates and in moment as well!
//     [moment(new Date(now.year(), 7, 1)), moment(new Date(now.year(), 11, 31))] : // aug1 - dec31
//     [moment(new Date(now.year(), 0, 1)), moment(new Date(now.year(), 6, 31))]; // jan1 - july31
// }
function getTermStarEndDate(date, isFirstTerm) {
    var addYear = date.getMonth() >= 7;
    var termYear = null;
    if (addYear) {
        termYear = isFirstTerm ? date.getFullYear() : date.getFullYear() + 1;
    }
    else {
        termYear = isFirstTerm ? date.getFullYear() - 1 : date.getFullYear();
    }
    var termYearMoment = moment__WEBPACK_IMPORTED_MODULE_1___default()(termYear.toString(), "YYYY");
    if (termYearMoment.week() != 1) {
        termYearMoment = termYearMoment.clone().add(1, 'week');
    }
    return isFirstTerm ? [moment__WEBPACK_IMPORTED_MODULE_1___default()(termYearMoment.clone()).week(32).startOf('week'), moment__WEBPACK_IMPORTED_MODULE_1___default()(termYearMoment.clone()).week(51).endOf('week')] :
        [moment__WEBPACK_IMPORTED_MODULE_1___default()(termYearMoment.clone()), moment__WEBPACK_IMPORTED_MODULE_1___default()(termYearMoment.clone()).week(25).endOf('week')];
}
function getSchoolMoment(m) {
    var thisYear = m.year();
    var isAutumn = m.month() >= 6; // determine 
    var _a = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](isAutumn ?
        [thisYear, thisYear + 1] :
        [thisYear - 1, thisYear], 2), autumnYear = _a[0], springYear = _a[1];
    var academicYear = '' + autumnYear + '/' + springYear;
    var term = isAutumn ? 'AT' : 'ST';
    var week = m.week();
    return { academicYear: academicYear, term: term, week: week };
}
function addYear(aYear, numYearsToAdd) {
    return aYear.split('/')
        .map(function (yearStr) { return parseInt(yearStr) + numYearsToAdd; })
        .map(function (year) { return '' + year; })
        .join('/');
}
function nextAcademicYear(aYear) {
    return addYear(aYear, 1);
}
function prevAcademicYear(aYear) {
    return addYear(aYear, -1);
}


/***/ }),

/***/ "./src/utils/school-term.ts":
/*!**********************************!*\
  !*** ./src/utils/school-term.ts ***!
  \**********************************/
/*! exports provided: SchoolTerm */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SchoolTerm", function() { return SchoolTerm; });
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _school_moment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./school-moment */ "./src/utils/school-moment.ts");


function isSchoolMoment(obj) {
    return 'academicYear' in obj;
}
var SchoolTerm = /** @class */ (function () {
    function SchoolTerm(dateOrSchoolMoment) {
        var schoolMoment = isSchoolMoment(dateOrSchoolMoment) ?
            dateOrSchoolMoment : Object(_school_moment__WEBPACK_IMPORTED_MODULE_1__["getSchoolMoment"])(moment__WEBPACK_IMPORTED_MODULE_0___default()(dateOrSchoolMoment));
        this.academicYear = schoolMoment.academicYear;
        this.term = schoolMoment.term;
    }
    Object.defineProperty(SchoolTerm.prototype, "year", {
        get: function () {
            return parseInt(this.academicYear
                .split('/')[this.term === 'AT' ? 0 : 1]);
        },
        enumerable: true,
        configurable: true
    });
    SchoolTerm.prototype.nextTerm = function () {
        return new SchoolTerm(this.term === 'AT' ?
            {
                term: 'ST',
                academicYear: this.academicYear
            } :
            {
                term: 'AT',
                academicYear: Object(_school_moment__WEBPACK_IMPORTED_MODULE_1__["addYear"])(this.academicYear, 1)
            });
    };
    SchoolTerm.prototype.prevTerm = function () {
        return new SchoolTerm(this.term === 'AT' ?
            {
                term: 'ST',
                academicYear: Object(_school_moment__WEBPACK_IMPORTED_MODULE_1__["addYear"])(this.academicYear, -1)
            } :
            {
                term: 'AT',
                academicYear: this.academicYear
            });
    };
    SchoolTerm.prototype.toLocaleString = function (intl, shortYear) {
        var year = this.term === 'AT' ?
            this.academicYear.split('/')[0] :
            this.academicYear.split('/')[1];
        if (shortYear)
            year = year.substr(2);
        return this.term === 'AT' ? intl.formatMessage({ id: 'termplanner.secondTerm', defaultMessage: 'HT {year}' }, { year: year }) :
            intl.formatMessage({ id: 'termplanner.firstTerm', defaultMessage: 'VT {year}' }, { year: year });
    };
    return SchoolTerm;
}());



/***/ }),

/***/ "./src/utils/utils.ts":
/*!****************************!*\
  !*** ./src/utils/utils.ts ***!
  \****************************/
/*! exports provided: capitalizeFirst, extend, clone, flatten, compareProp, compareProps, L, TC, dateTimeReviver, showInfo, showError, maxLength, arrayToLookup, arrayToMap, cherryPickProps, distinct, shallowEquals */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "capitalizeFirst", function() { return capitalizeFirst; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "extend", function() { return extend; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clone", function() { return clone; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "flatten", function() { return flatten; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "compareProp", function() { return compareProp; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "compareProps", function() { return compareProps; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "L", function() { return L; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TC", function() { return TC; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dateTimeReviver", function() { return dateTimeReviver; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "showInfo", function() { return showInfo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "showError", function() { return showError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "maxLength", function() { return maxLength; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "arrayToLookup", function() { return arrayToLookup; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "arrayToMap", function() { return arrayToMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cherryPickProps", function() { return cherryPickProps; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "distinct", function() { return distinct; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shallowEquals", function() { return shallowEquals; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

function capitalizeFirst(str) {
    for (var i = 0, l = str.length; i < l; ++i) {
        if (str.charCodeAt(i) < 0x2000) {
            return str.substr(0, i) + str[i].toLocaleUpperCase() + str.substr(i + 1);
        }
    }
    return str;
}
function extend(obj, extension) {
    if (typeof extension !== 'object')
        return obj;
    Object.keys(extension).forEach(function (key) {
        obj[key] = extension[key];
    });
    return obj;
}
function clone(obj, extension) {
    var clone = {};
    Object.getOwnPropertyNames(obj).forEach(function (key) {
        Object.defineProperty(clone, key, Object.getOwnPropertyDescriptor(obj, key));
    });
    if (extension)
        extend(clone, extension);
    return clone;
}
var concat = [].concat;
function flatten(a) {
    return concat.apply([], a);
}
function compareProp(prop) {
    return function (a, b) {
        var aProp = a[prop], bProp = b[prop];
        return aProp > bProp ? 1 : aProp < bProp ? -1 : 0;
    };
}
function compareProps(props, locales, options) {
    props = Array.isArray(props) ? props : [props];
    var localeCompare = function (a, b) {
        return typeof a === 'string' ?
            a.localeCompare(b, locales, options) :
            a < b ? -1 : a > b ? 1 : 0;
    };
    function cmpPart(a, b, firstPart, rest) {
        var firstA = a[firstPart];
        var firstB = b[firstPart];
        if (firstA === firstB)
            return 0;
        if (firstA == null)
            return -1;
        if (firstB == null)
            return 1;
        return rest.length === 0 ?
            localeCompare(firstA, firstB) :
            cmpPart(firstA, firstB, rest[0], rest.slice(1));
    }
    return props
        .map(function (prop) { return prop.split('.'); })
        .map(function (_a) {
        var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](_a), firstPart = _b[0], rest = _b.slice(1);
        return function (a, b) { return cmpPart(a, b, firstPart, rest); };
    })
        .reduce(function (cmp1, cmp2) {
        return function (a, b) { return cmp1(a, b) || cmp2(a, b); };
    });
}
function L(text) {
    var args = [];
    for (var _i = 1; _i < arguments.length; _i++) {
        args[_i - 1] = arguments[_i];
    }
    var first = text[0];
    return buildMessage(text, args);
}
function buildMessage(text, args) {
    var rv = text[0];
    for (var i = 1, l = text.length; i < l; ++i) {
        rv += args[i - 1] + text[i];
    }
    return rv;
}
var TC = /** @class */ (function () {
    function TC(template) {
        extend(this, template);
    }
    return TC;
}());

function dateTimeReviver(key, value) {
    var a;
    if (typeof value === 'string') {
        a = /\/Date\((\d*)\)\//.exec(value);
        if (a) {
            return new Date(+a[1]);
        }
    }
    return value;
}
//let infoSerial = 1;
function showInfo(msg) {
    var event = new CustomEvent('info', { 'detail': msg });
    window.dispatchEvent(event);
}
function showError(errMsg) {
    var msg = typeof errMsg === 'string' ? errMsg : errMsg.message;
    var event = new CustomEvent('customerror', { 'detail': msg });
    console.error(errMsg);
    window.dispatchEvent(event);
}
function maxLength(str, maxLen) {
    return str.length > maxLen ?
        str.substr(0, maxLen - 3) + "..." :
        str;
}
function arrayToLookup(a, keyAccessor) {
    var result = {};
    for (var i = 0, l = a.length; i < l; ++i) {
        var item = a[i];
        var key = keyAccessor(item);
        var array = result[key];
        if (array)
            array.push(item);
        else
            result[key] = [item];
    }
    return result;
}
function arrayToMap(a, keyAccessor) {
    var result = {};
    for (var i = 0, l = a.length; i < l; ++i) {
        var item = a[i];
        var key = keyAccessor(item);
        result[key] = item;
    }
    return result;
}
function cherryPickProps(obj, propsToPick) {
    var e_1, _a;
    var result = {};
    try {
        for (var propsToPick_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](propsToPick), propsToPick_1_1 = propsToPick_1.next(); !propsToPick_1_1.done; propsToPick_1_1 = propsToPick_1.next()) {
            var param = propsToPick_1_1.value;
            if (param in obj)
                result[param] = obj[param];
        }
    }
    catch (e_1_1) { e_1 = { error: e_1_1 }; }
    finally {
        try {
            if (propsToPick_1_1 && !propsToPick_1_1.done && (_a = propsToPick_1.return)) _a.call(propsToPick_1);
        }
        finally { if (e_1) throw e_1.error; }
    }
    return result;
}
function distinct(a, keyAccessor) {
    var map = arrayToMap(a, keyAccessor || (function (x) { return x; }));
    return Object.keys(map).map(function (key) { return map[key]; });
}
function shallowEquals(a, b) {
    if (a === b)
        return true;
    if (!a || !b)
        return false;
    if (typeof a !== 'object' || typeof b !== 'object')
        return false;
    var keysA = Object.keys(a);
    var keysB = Object.keys(b);
    if (keysA.length !== keysB.length)
        return false;
    for (var i = 0, l = keysA.length; i < l; ++i) {
        var key = keysA[i];
        if (keysB[i] !== key)
            return false;
        if (a[key] !== b[key])
            return false;
    }
    return true;
}


/***/ }),

/***/ "./src/utils/weekutil.ts":
/*!*******************************!*\
  !*** ./src/utils/weekutil.ts ***!
  \*******************************/
/*! exports provided: KEDWeek, getNextWeekDate, getPrevWeekDate, getAdjustedWeek */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KEDWeek", function() { return KEDWeek; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getNextWeekDate", function() { return getNextWeekDate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getPrevWeekDate", function() { return getPrevWeekDate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getAdjustedWeek", function() { return getAdjustedWeek; });
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__);

function KEDWeek(year, week) {
    var m = moment__WEBPACK_IMPORTED_MODULE_0___default()(new Date(year, 1, 1)).week(week);
    var res = {
        year: year,
        week: week,
        notBefore: m.clone().startOf('week').add(-2, 'days').toDate().getTime(),
        notAfter: m.clone().startOf('week').add(5, 'days').toDate().getTime()
    };
    return res;
}
function getNextWeekDate(date) {
    var nextDate = moment__WEBPACK_IMPORTED_MODULE_0___default()(date).add(1, 'week');
    //Set the 01.01 of the next year in case the next week is in the same year 
    //and the previous week is the last week of the year
    if (date.week() === date.weeksInYear() && nextDate.year() === date.year()) {
        return { adjusted: true, nextDate: moment__WEBPACK_IMPORTED_MODULE_0___default()(date.year() + 1 + "-01-01").toDate() };
    }
    return { adjusted: false, nextDate: nextDate.toDate() };
}
function getPrevWeekDate(date) {
    var prevDate = moment__WEBPACK_IMPORTED_MODULE_0___default()(date).add(-1, 'week');
    //Set the 01.01 of the current year in case the prev week is in the previous year
    if (date.week() === 2 && prevDate.year() !== date.year()) {
        return { adjusted: true, nextDate: moment__WEBPACK_IMPORTED_MODULE_0___default()(date.year() + "-01-01").toDate() };
    }
    return { adjusted: false, nextDate: prevDate.toDate() };
}
function getAdjustedWeek(m) {
    var clone = m.clone();
    return m.weekday() >= 5 ? // Lrdag 00:00 / Sndag 00:00?
        m.week() + 1 : // Tillhr nsta vecka
        m.week();
}
/*export function getWeekLimits (m: Moment) {
  const clonedSwedish = m.clone().locale('sv');
  const limits = {
    notBefore: clonedSwedish.startOf('week').add(-2, 'days'),
    notAfter: clonedSwedish.startOf('week').add(5, 'days')
  };
}
*/


/***/ }),

/***/ 0:
/*!*****************************************!*\
  !*** ../locale-data/index.js (ignored) ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ 1:
/*!*******************************!*\
  !*** ./lib/locales (ignored) ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ 2:
/*!*******************************!*\
  !*** ./lib/locales (ignored) ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ "jquery":
/*!*************************!*\
  !*** external "jQuery" ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = jQuery;

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "React" ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = React;

/***/ }),

/***/ "react-dom":
/*!***************************!*\
  !*** external "ReactDOM" ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ReactDOM;

/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9jbGllbnQuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9jbGllbnR3ZWIuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLWNsaWVudC13ZWIvYmVhcmVyLXN0b3JhZ2Utc2Vzc2lvbnN0b3JhZ2UuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLWNsaWVudC13ZWIvaGFzaC1yZXN0b3Jlci5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtY2xpZW50LXdlYi9pbmRleC5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtY2xpZW50L2FjY2Vzcy1jb250cm9sLmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9rZWQtYmFja2VuZC1jbGllbnQvaHR0cC1lcnJvci5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtY2xpZW50L2luZGV4LmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9rZWQtYmFja2VuZC1jbGllbnQva2VkLWJlYXJlci1wcm92aWRlci5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtY2xpZW50L3Jlc3RjbGllbnQuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLWNsaWVudC91dGlscy5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLW1vZGVsLW1pZ3JhdG9yL2luZGV4LmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9rZWQtbW9kZWwtbWlncmF0b3IvbWlncmF0ZS1jb3Vyc2UuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1tb2RlbC1taWdyYXRvci9taWdyYXRlLXRhc2suanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1tb2RlbC1taWdyYXRvci9taWdyYXRlLmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9vYnNlcnZhYmxlL2NvbGxlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL29ic2VydmFibGUvZW1pdHRlci5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMvb2JzZXJ2YWJsZS9maWJlci1jb250ZXh0LmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9vYnNlcnZhYmxlL21hcC5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMvb2JzZXJ2YWJsZS9vYnNlcnZhYmxlLmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9vYnNlcnZhYmxlL3ZhbHVlLmpzIiwid2VicGFjazovL1tuYW1lXS8uL25vZGVfbW9kdWxlcy9tb21lbnQvbG9jYWxlIHN5bmMgc3Z8ZW4iLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2FjY2Vzcy1jb250cm9sL2dldC11c2VyLWNsYWltcy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvYWNjZXNzLWNvbnRyb2wvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2FwaXMvZWRzY2xpZW50LnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9hcGlzL2dvb2dsZS1jYWxlbmRhci50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvYXBpcy9rZWQtbGVhcm5pbmdnb2Fscy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jYWxlbmRhci9jb3Vyc2UtbmFtZS10by1jc3MtY2xhc3MudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY2FsZW5kYXIvY3J1bmNoLWNvbGxpZGluZy1ldmVudHMudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY2FsZW5kYXIvZGF5LXZpZXctZXZlbnQudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NhbGVuZGFyL2RheS12aWV3LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jYWxlbmRhci9ob3VyLW1hcmtlci50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY2FsZW5kYXIvaW5kZXgudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NhbGVuZGFyL3Nob3VsZC1pbmNsdWRlLWNhbGVuZGFyLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NhbGVuZGFyL3N0YXR1cy1iYXIudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NhbGVuZGFyL3RpbWUtbGluZXMudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NhbGVuZGFyL3dlZWstdmlldy50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY2hhcnRzL2NoYXJ0cy11dGlscy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jaGFydHMvZG91Z2hudXQudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NoYXJ0cy9nb2FsLXByb2dyZXNzLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jaGFydHMvcHJvZ3Jlc3MudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyL3N1Yi1jb21wb25lbnRzL3JlbW92ZS1pdGVtLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci9zdWItY29tcG9uZW50cy9zcGlubmVyLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2Utdmlld2VyL3N1YmNvbXBvbmVudHMvY29uZmlybWF0aW9uLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2Utdmlld2VyL3N1YmNvbXBvbmVudHMvbGVhcm5pbmctZ29hbHMtbGlzdC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLXZpZXdlci9zdWJjb21wb25lbnRzL3Rhc2stbGlzdC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMva2ctdGVybXBsYW5uZXIva2ctdGVybXBsYW5uZXItc2VsZi50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMva2ctdGVybXBsYW5uZXIva2ctdGVybXBsYW5uZXItdHV0b3JlZC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMva2ctdGVybXBsYW5uZXIva2ctdGVybXBsYW5uZXIudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2tnLXRlcm1wbGFubmVyL3dlZWstbm90ZS1kaWFsb2cudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2tzLWdvYWxzL2Z1dHVyZS1hYmlsaXRpZXMtdGFibGUudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2tzLWdvYWxzL2Z1dHVyZS1hYmlsaXRpZXMtdmlld21vZGVsLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2tzLWdvYWxzL2dvYWxzLXZpZXdtb2RlbC50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9rcy1nb2Fscy9nb2Fscy50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMva3MtdGVybXBsYW5uZXIva3MtdGVybXBsYW5uZXItdHV0b3JlZC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMva3MtdGVybXBsYW5uZXIvdGVybXBsYW5uZXItdXRpbHMudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMva3MtdGVybXBsYW5uZXIvdGVybXBsYW5uZXIudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2tzLXRlcm1wbGFubmVyL3R1dG9yLWRpYWxvZy50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMva3MtdGVybXBsYW5uZXIvdmlld21vZGVsLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2xhdGVzdC1hc3Nlc3NtZW50cy9sYXRlc3QtYXNzZXNzbWVudHMudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2xlYXJuaW5nLXRhc2tzL2luZGV4LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9saXN0LWNvdXJzZXMvbGlzdC1jb3Vyc2VzLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9teS1jb3Vyc2VzL215LWNvdXJzZXMudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3R1dG9ycy1zZWxlY3QvdHV0b3JzLXNlbGVjdC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvdHV0b3JzLXZpZXcvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvdHV0b3JzLXZpZXcvdHV0b3JzLXZpZXcudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy9MYW5ndWFnZUNvbnRleHQudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy9TZXR1cExhbmd1YWdlSW50bC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS1jb21wb25lbnRzL2NvbnRlbnQtZWRpdGFibGUtZmllbGQudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy9kaWFsb2dzLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy91dGlsaXR5LWNvbXBvbmVudHMvZm9ybS1maWVsZC10ZXh0LWlucHV0LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy91dGlsaXR5LWNvbXBvbmVudHMvZm9ybS1maWVsZC10ZXh0YXJlYS50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS1jb21wb25lbnRzL2Zvcm0tZmllbGQudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy9vcGVuLWNsb3NlLWJveC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS1jb21wb25lbnRzL3R1dG9yYWJsZS1jb21wb25lbnQudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy93eXNpd3lnL2FjdGlvbnMtc3YudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS1jb21wb25lbnRzL3d5c2l3eWcvYWN0aW9ucy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy91dGlsaXR5LWNvbXBvbmVudHMvd3lzaXd5Zy9leGVjLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy93eXNpd3lnL2ltYWdlLWVkaXQtYWN0aW9ucy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy91dGlsaXR5LWNvbXBvbmVudHMvd3lzaXd5Zy9pbmRleC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS1jb21wb25lbnRzL3d5c2l3eWcvd2FzaC1odG1sLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3dlZWstbm90ZWJvb2svaW5kZXgudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvd2Vlay1ub3RlYm9vay9yb290LXdlZWstbm90ZWJvb2sudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3dlZWstbm90ZWJvb2svd2Vlay1ub3RlYm9vay50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvd2Vla3BsYW5uZXIvYWRkLWN1c3RvbS1nb2FsLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy93ZWVrcGxhbm5lci9hZGQtY3VzdG9tLXRhc2sudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3dlZWtwbGFubmVyL2FkZC1vci1lZGl0LXN1Yi10YXNrLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy93ZWVrcGxhbm5lci9lZGl0LXVzZXItdGFzay50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvd2Vla3BsYW5uZXIvZ2V0LXRhc2stdHlwZS50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy93ZWVrcGxhbm5lci9pbmRleC50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy93ZWVrcGxhbm5lci9yZWZpbmVyLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3dlZWtwbGFubmVyL3VzZXItdGFza3MtYm94LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy93ZWVrcGxhbm5lci93ZWVrcGxhbm5lci1wZXJzaXN0ZWQtc3RhdGUudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvd2Vla3BsYW5uZXIvd2Vla3BsYW5uZXIudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9mZWF0dXJlcy9mZWF0dXJlcy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvZmVhdHVyZXMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2dsb2JhbC1zZXR0ZXJzL2NvbmZpZ3VyZS50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvZ2xvYmFsLXNldHRlcnMvc2V0LWFsbC50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvZ2xvYmFsLXNldHRlcnMvc2V0LWJlYXJlci1wcm92aWRlcnMudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2dsb2JhbC1zZXR0ZXJzL3NldC1lZHMtY2xpZW50LnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9nbG9iYWwtc2V0dGVycy9zZXQta2VkLWJhY2tlbmQtY2xpZW50LnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9nbG9iYWxzL0tFRC5jZmcudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2dsb2JhbHMvS0VELmVudi50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvZ2xvYmFscy9LRUQudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2dsb2JhbHMvS0VELnR1dG9yRW52LnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9nbG9iYWxzL2tlZC50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvZ2xvYmFscy9tb21lbnQtc3YtbG9jYWxlLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9yZXBvcy9oaWRkZW4tY291cnNlcy1yZXBvLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9yZXBvcy9rZWQtcmVwby50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvcmVwb3Mva2ctdGVybXBsYW5uZXItcmVwby50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvcmVwb3Mva3MtdGVybXBsYW5uZXItcmVwby1pbnN0YW5jZS50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvcmVwb3Mva3MtdGVybXBsYW5uZXItcmVwby50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvcmVwb3MvcmVwby50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvcmVwb3MvdXNlci10YXNrcy1yZXBvLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9yZXBvcy93ZWVrLW5vdGVzLXJlcG8udHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3Rlc3QvY29tcG9uZW50cy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvdGVzdC9kYXRhL2xlYXJuaW5nTW9kdWxlcy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvdGVzdC9kYXRhL2xlYXJuaW5nTW9kdWxlczIudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3Rlc3QvZGF0YS91c2Vycy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvdGVzdC9zZXQtY3VycmVudC11c2VyLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy90ZXN0L3Rlc3QtY29uZmlnLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy90ZXN0L3Rlc3RwYWdlLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvdGVzdC91dGlscy9jaG9vc2UtdXNlci50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvdXRpbHMvZ2VuZXJpYy1zY2hvb2wtdGVybS50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvdXRpbHMvZ2VuZXJpYy1zY2hvb2wtdXRpbHMudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3V0aWxzL2lmLXRha2VzLXRpbWUudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3V0aWxzL21ha2Utc3VzcGVuc2UtYXBpLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy91dGlscy9wZW5kaW5nLWpvYi50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvdXRpbHMvcXVlcnktc3RyaW5nLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy91dGlscy9yZXF1ZXN0LXR1dG9yZWQtdG9rZW5zLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy91dGlscy9zY2hvb2wtbW9tZW50LnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy91dGlscy9zY2hvb2wtdGVybS50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvdXRpbHMvdXRpbHMudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3V0aWxzL3dlZWt1dGlsLnRzIiwid2VicGFjazovL1tuYW1lXS8uLi9sb2NhbGUtZGF0YS9pbmRleC5qcyAoaWdub3JlZCkiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vbGliL2xvY2FsZXMgKGlnbm9yZWQpIiwid2VicGFjazovL1tuYW1lXS8uL2xpYi9sb2NhbGVzIChpZ25vcmVkKT85MGQwIiwid2VicGFjazovL1tuYW1lXS9leHRlcm5hbCBcImpRdWVyeVwiIiwid2VicGFjazovL1tuYW1lXS9leHRlcm5hbCBcIlJlYWN0XCIiLCJ3ZWJwYWNrOi8vW25hbWVdL2V4dGVybmFsIFwiUmVhY3RET01cIiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZ0JBQVEsb0JBQW9CO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtB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SUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUM7UUFDakMsSUFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLEdBQUcsT0FBUixJQUFJLGlEQUFTLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLGFBQUcsSUFBSSxVQUFHLENBQUMsTUFBTSxFQUFWLENBQVUsQ0FBQyxFQUFDLENBQUM7UUFFL0QsUUFBTyxTQUFTLEVBQUU7WUFDaEIsS0FBSyxJQUFJO2dCQUNQLE1BQU0sQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDdEMsTUFBTTtZQUNSLEtBQUssTUFBTTtnQkFDVCxNQUFNLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7Z0JBQzVDLE1BQU07WUFDUixLQUFLLE1BQU07Z0JBQ1QsTUFBTSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDckMsTUFBTTtZQUNSLEtBQUssT0FBTztnQkFDVixNQUFNLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLEVBQUUsT0FBTyxDQUFDO2dCQUMzQyxNQUFNO1NBQ1Q7UUFDRCxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUM7WUFDaEUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDL0QsQ0FBQztJQUdEOzs7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QUFFLDZDQUFNLENBQUksSUFBSSxDQUFDLElBQUksRUFBRSxXQUFRLENBQUMsQ0FBQyxNQUFNLEVBQUUsRUFBQyxDQUFDO0tBQzVFO0lBRUQsT0FBTyxFQUFDLFFBQVEsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLFFBQVEsQ0FBQyxNQUFNLEVBQUUsRUFBQyxDQUFDO0FBQ3hELENBQUM7QUFFTSxTQUFTLGVBQWUsQ0FBQyxDQUFTO0lBQ3ZDLElBQU0sS0FBSyxHQUFHLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUN4QixPQUFPLENBQUMsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLCtCQUErQjtRQUNyRCxDQUFDLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxzQkFBc0I7UUFDckMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ2YsQ0FBQztBQUVEOzs7Ozs7O0VBT0U7Ozs7Ozs7Ozs7OztBQ2hERixlOzs7Ozs7Ozs7OztBQ0FBLGU7Ozs7Ozs7Ozs7O0FDQUEsZTs7Ozs7Ozs7Ozs7QUNBQSx3Qjs7Ozs7Ozs7Ozs7QUNBQSx1Qjs7Ozs7Ozs7Ozs7QUNBQSwwQiIsImZpbGUiOiJ0ZXN0cGFnZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIGluc3RhbGwgYSBKU09OUCBjYWxsYmFjayBmb3IgY2h1bmsgbG9hZGluZ1xuIFx0ZnVuY3Rpb24gd2VicGFja0pzb25wQ2FsbGJhY2soZGF0YSkge1xuIFx0XHR2YXIgY2h1bmtJZHMgPSBkYXRhWzBdO1xuIFx0XHR2YXIgbW9yZU1vZHVsZXMgPSBkYXRhWzFdO1xuIFx0XHR2YXIgZXhlY3V0ZU1vZHVsZXMgPSBkYXRhWzJdO1xuXG4gXHRcdC8vIGFkZCBcIm1vcmVNb2R1bGVzXCIgdG8gdGhlIG1vZHVsZXMgb2JqZWN0LFxuIFx0XHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcbiBcdFx0dmFyIG1vZHVsZUlkLCBjaHVua0lkLCBpID0gMCwgcmVzb2x2ZXMgPSBbXTtcbiBcdFx0Zm9yKDtpIDwgY2h1bmtJZHMubGVuZ3RoOyBpKyspIHtcbiBcdFx0XHRjaHVua0lkID0gY2h1bmtJZHNbaV07XG4gXHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKSB7XG4gXHRcdFx0XHRyZXNvbHZlcy5wdXNoKGluc3RhbGxlZENodW5rc1tjaHVua0lkXVswXSk7XG4gXHRcdFx0fVxuIFx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IDA7XG4gXHRcdH1cbiBcdFx0Zm9yKG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG4gXHRcdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcbiBcdFx0XHRcdG1vZHVsZXNbbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuIFx0XHRcdH1cbiBcdFx0fVxuIFx0XHRpZihwYXJlbnRKc29ucEZ1bmN0aW9uKSBwYXJlbnRKc29ucEZ1bmN0aW9uKGRhdGEpO1xuXG4gXHRcdHdoaWxlKHJlc29sdmVzLmxlbmd0aCkge1xuIFx0XHRcdHJlc29sdmVzLnNoaWZ0KCkoKTtcbiBcdFx0fVxuXG4gXHRcdC8vIGFkZCBlbnRyeSBtb2R1bGVzIGZyb20gbG9hZGVkIGNodW5rIHRvIGRlZmVycmVkIGxpc3RcbiBcdFx0ZGVmZXJyZWRNb2R1bGVzLnB1c2guYXBwbHkoZGVmZXJyZWRNb2R1bGVzLCBleGVjdXRlTW9kdWxlcyB8fCBbXSk7XG5cbiBcdFx0Ly8gcnVuIGRlZmVycmVkIG1vZHVsZXMgd2hlbiBhbGwgY2h1bmtzIHJlYWR5XG4gXHRcdHJldHVybiBjaGVja0RlZmVycmVkTW9kdWxlcygpO1xuIFx0fTtcbiBcdGZ1bmN0aW9uIGNoZWNrRGVmZXJyZWRNb2R1bGVzKCkge1xuIFx0XHR2YXIgcmVzdWx0O1xuIFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgZGVmZXJyZWRNb2R1bGVzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0dmFyIGRlZmVycmVkTW9kdWxlID0gZGVmZXJyZWRNb2R1bGVzW2ldO1xuIFx0XHRcdHZhciBmdWxmaWxsZWQgPSB0cnVlO1xuIFx0XHRcdGZvcih2YXIgaiA9IDE7IGogPCBkZWZlcnJlZE1vZHVsZS5sZW5ndGg7IGorKykge1xuIFx0XHRcdFx0dmFyIGRlcElkID0gZGVmZXJyZWRNb2R1bGVbal07XG4gXHRcdFx0XHRpZihpbnN0YWxsZWRDaHVua3NbZGVwSWRdICE9PSAwKSBmdWxmaWxsZWQgPSBmYWxzZTtcbiBcdFx0XHR9XG4gXHRcdFx0aWYoZnVsZmlsbGVkKSB7XG4gXHRcdFx0XHRkZWZlcnJlZE1vZHVsZXMuc3BsaWNlKGktLSwgMSk7XG4gXHRcdFx0XHRyZXN1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IGRlZmVycmVkTW9kdWxlWzBdKTtcbiBcdFx0XHR9XG4gXHRcdH1cbiBcdFx0cmV0dXJuIHJlc3VsdDtcbiBcdH1cblxuIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3NcbiBcdC8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuIFx0Ly8gUHJvbWlzZSA9IGNodW5rIGxvYWRpbmcsIDAgPSBjaHVuayBsb2FkZWRcbiBcdHZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG4gXHRcdFwidGVzdHBhZ2VcIjogMFxuIFx0fTtcblxuIFx0dmFyIGRlZmVycmVkTW9kdWxlcyA9IFtdO1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHR2YXIganNvbnBBcnJheSA9IHdpbmRvd1tcIndlYnBhY2tKc29ucF9uYW1lX1wiXSA9IHdpbmRvd1tcIndlYnBhY2tKc29ucF9uYW1lX1wiXSB8fCBbXTtcbiBcdHZhciBvbGRKc29ucEZ1bmN0aW9uID0ganNvbnBBcnJheS5wdXNoLmJpbmQoanNvbnBBcnJheSk7XG4gXHRqc29ucEFycmF5LnB1c2ggPSB3ZWJwYWNrSnNvbnBDYWxsYmFjaztcbiBcdGpzb25wQXJyYXkgPSBqc29ucEFycmF5LnNsaWNlKCk7XG4gXHRmb3IodmFyIGkgPSAwOyBpIDwganNvbnBBcnJheS5sZW5ndGg7IGkrKykgd2VicGFja0pzb25wQ2FsbGJhY2soanNvbnBBcnJheVtpXSk7XG4gXHR2YXIgcGFyZW50SnNvbnBGdW5jdGlvbiA9IG9sZEpzb25wRnVuY3Rpb247XG5cblxuIFx0Ly8gYWRkIGVudHJ5IG1vZHVsZSB0byBkZWZlcnJlZCBsaXN0XG4gXHRkZWZlcnJlZE1vZHVsZXMucHVzaChbXCIuL3NyYy90ZXN0L3Rlc3RwYWdlLnRzeFwiLFwidmVuZG9yc1wiXSk7XG4gXHQvLyBydW4gZGVmZXJyZWQgbW9kdWxlcyB3aGVuIHJlYWR5XG4gXHRyZXR1cm4gY2hlY2tEZWZlcnJlZE1vZHVsZXMoKTtcbiIsImV4cG9ydCAqIGZyb20gJy4vanMvZGlzdC9qcy9rZWQtYmFja2VuZC1jbGllbnQnOyIsImV4cG9ydCAqIGZyb20gJy4vanMvZGlzdC9qcy9rZWQtYmFja2VuZC1jbGllbnQtd2ViJzsiLCJ2YXIgQmVhcmVyU3RvcmFnZVNlc3Npb25TdG9yYWdlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEJlYXJlclN0b3JhZ2VTZXNzaW9uU3RvcmFnZSgpIHtcbiAgICB9XG4gICAgQmVhcmVyU3RvcmFnZVNlc3Npb25TdG9yYWdlLnByb3RvdHlwZS5zYXZlID0gZnVuY3Rpb24gKGlkLCB0b2tlbkluZm8pIHtcbiAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShcImJlYXJlci1cIiArIGlkLCBKU09OLnN0cmluZ2lmeSh0b2tlbkluZm8pKTtcbiAgICB9O1xuICAgIEJlYXJlclN0b3JhZ2VTZXNzaW9uU3RvcmFnZS5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIGpzb24gPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKFwiYmVhcmVyLVwiICsgaWQpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShqc29uID8gSlNPTi5wYXJzZShqc29uKSA6IHsgdG9rZW46IG51bGwsIGV4cGlyZXM6IDAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHsgdG9rZW46IG51bGwsIGV4cGlyZXM6IDAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBCZWFyZXJTdG9yYWdlU2Vzc2lvblN0b3JhZ2U7XG59KCkpO1xuZXhwb3J0IHsgQmVhcmVyU3RvcmFnZVNlc3Npb25TdG9yYWdlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1iZWFyZXItc3RvcmFnZS1zZXNzaW9uc3RvcmFnZS5qcy5tYXAiLCJ2YXIgcmVkaXJIYXNoID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShcInJlZGlyLWhhc2hcIik7XG5pZiAocmVkaXJIYXNoKVxuICAgIHRyeSB7XG4gICAgICAgIHZhciBfYSA9IEpTT04ucGFyc2UocmVkaXJIYXNoKSwgdGltZSA9IF9hLnRpbWUsIGhhc2ggPSBfYS5oYXNoO1xuICAgICAgICBpZiAodGltZSAmJiB0aW1lID4gRGF0ZS5ub3coKSAtIDYwMDAwKSB7XG4gICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKFwicmVkaXItaGFzaFwiKTtcbiAgICAgICAgICAgIGxvY2F0aW9uLmhhc2ggPSBoYXNoO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChfKSB7IH1cbmV4cG9ydCBmdW5jdGlvbiByZW1lbWJlckhhc2hMb2NhdGlvbigpIHtcbiAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFwicmVkaXItaGFzaFwiLCBKU09OLnN0cmluZ2lmeSh7IHRpbWU6IERhdGUubm93KCksIGhhc2g6IGxvY2F0aW9uLmhhc2ggfSkpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGFzaC1yZXN0b3Jlci5qcy5tYXAiLCJpbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgS2VkQmFja2VuZENsaWVudCwgSHR0cEVycm9yIH0gZnJvbSAnLi4va2VkLWJhY2tlbmQtY2xpZW50JztcbmltcG9ydCB7IEJlYXJlclN0b3JhZ2VTZXNzaW9uU3RvcmFnZSB9IGZyb20gXCIuL2JlYXJlci1zdG9yYWdlLXNlc3Npb25zdG9yYWdlXCI7XG5pbXBvcnQgeyBhdm9pZFNpbXVsdGFub3VzQ2FsbHMgfSBmcm9tICcuLi9rZWQtYmFja2VuZC1jbGllbnQvdXRpbHMnO1xuaW1wb3J0IHsgS2VkTW9kZWxNaWdyYXRvck1peGluIH0gZnJvbSAnLi4va2VkLW1vZGVsLW1pZ3JhdG9yJztcbmltcG9ydCAnLi9oYXNoLXJlc3RvcmVyJztcbmltcG9ydCB7IHJlbWVtYmVySGFzaExvY2F0aW9uIH0gZnJvbSAnLi9oYXNoLXJlc3RvcmVyJztcbktlZE1vZGVsTWlncmF0b3JNaXhpbihLZWRCYWNrZW5kQ2xpZW50LnByb3RvdHlwZSk7XG5leHBvcnQgdmFyIHN0b3JhZ2UgPSBuZXcgQmVhcmVyU3RvcmFnZVNlc3Npb25TdG9yYWdlKCk7XG52YXIgdGltZU9mUGFnZUxvYWQgPSBEYXRlLm5vdygpO1xudmFyIFdlYlNlcnZlckJlYXJlclByb3ZpZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFdlYlNlcnZlckJlYXJlclByb3ZpZGVyKHRva2VuUGF0aCwgdG9rZW5SZXNwb25zZU1hcHBlciwgdG9rZW5JZCkge1xuICAgICAgICB0aGlzLnRva2VuUGF0aCA9IHRva2VuUGF0aDtcbiAgICAgICAgdGhpcy50b2tlblJlc3BvbnNlTWFwcGVyID0gdG9rZW5SZXNwb25zZU1hcHBlcjtcbiAgICAgICAgdGhpcy50b2tlbklkID0gdG9rZW5JZDtcbiAgICAgICAgdGhpcy50b2tlbkluZm8gPSB7IHRva2VuOiBudWxsLCBleHBpcmVzOiAwIH07XG4gICAgICAgIHRoaXMuZ2V0QmVhcmVyID0gYXZvaWRTaW11bHRhbm91c0NhbGxzKHRoaXMuZ2V0QmVhcmVyLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLnJlZnJlc2hCZWFyZXIgPSBhdm9pZFNpbXVsdGFub3VzQ2FsbHModGhpcy5yZWZyZXNoQmVhcmVyLmJpbmQodGhpcykpO1xuICAgIH1cbiAgICBXZWJTZXJ2ZXJCZWFyZXJQcm92aWRlci5wcm90b3R5cGUuZ2V0QmVhcmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy50b2tlbkluZm8udG9rZW4pIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnRva2VuSWQpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSB0aGlzO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgc3RvcmFnZS5sb2FkKHRoaXMudG9rZW5JZCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50b2tlbkluZm8gPSBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDI7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHRoaXMudG9rZW5JbmZvLmV4cGlyZXMgPCBEYXRlLm5vdygpKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJlZnJlc2hCZWFyZXIoKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gNDtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy50b2tlbkluZm9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFdlYlNlcnZlckJlYXJlclByb3ZpZGVyLnByb3RvdHlwZS5yZWZyZXNoQmVhcmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXMsIF9hLCBfYiwgX2MsIF9kO1xuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9lKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfZS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIGZldGNoKHRoaXMudG9rZW5QYXRoLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyBBY2NlcHQ6IFwidGV4dC9wbGFpbjsgYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVkaXJlY3Q6ICdtYW51YWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlOiAnbm8tY2FjaGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWRlbnRpYWxzOiBcInNhbWUtb3JpZ2luXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gX2Uuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDMwMiB8fCAoIXJlcy5zdGF0dXMgJiYgcmVzLnR5cGUgPT09IFwib3BhcXVlcmVkaXJlY3RcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVc2VyIHNlc3Npb24gdGltZWQgb3V0IGFuZCBzZXJ2ZXIgd2FudHMgdG8gcmVkaXJlY3QgZW50aXJlIHBhZ2UgdG8gbG9naW4gcGFnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRpbWUgdG8gcmVsb2FkIGN1cnJlbnQgcGFnZSB0byBmb3JjZSBhIHJlZGlyZWN0IG9mIHRoZSBlbnRpcmUgcGFnZSBpbnN0ZWFkIGZvclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGp1c3QgcmVkaXJlY3RpbmcgdG8gL2FwaS90b2tlbiBvciB3aGF0ZXZlci5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoRGF0ZS5ub3coKSAtIHRpbWVPZlBhZ2VMb2FkID4gNjAwMDApIHsgLy8gcHJvaGliaXQgZW5kbGVzcyBsb29wIG9mIHJlbG9hZGluZyBzZWxmLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndhbnRzUmVkaXJlY3QgPSB0cnVlOyAvLyBTbyB0aGF0IGxpc3RlbmVycyB0byBvbmJlZm9yZXVubG9hZCBjb3VsZCBzaG93IGFsdGVybmF0ZSBtZXNzYWdlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlZGlyZWN0IHdhbnRlZC4gUmVsb2FkIHBhZ2UuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1lbWJlckhhc2hMb2NhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSHR0cEVycm9yKDMwMiwgXCJSZWRpcmVjdGVkXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHJlcy5zdGF0dXMgIT0gMjAwKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IEVycm9yLmJpbmQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYiA9IFwiSFRUUFwiICsgcmVzLnN0YXR1cyArIFwiIFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzLnRleHQoKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogdGhyb3cgbmV3IChfYS5hcHBseShFcnJvciwgW3ZvaWQgMCwgX2IgKyAoX2Uuc2VudCgpKV0pKSgpO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYyA9IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBfZCA9IHRoaXMudG9rZW5SZXNwb25zZU1hcHBlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlcy50ZXh0KCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYy50b2tlbkluZm8gPSBfZC5hcHBseSh0aGlzLCBbX2Uuc2VudCgpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yYWdlLnNhdmUodGhpcy50b2tlbklkLCB0aGlzLnRva2VuSW5mbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy50b2tlbkluZm9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBXZWJTZXJ2ZXJCZWFyZXJQcm92aWRlcjtcbn0oKSk7XG5leHBvcnQgeyBXZWJTZXJ2ZXJCZWFyZXJQcm92aWRlciB9O1xuZXhwb3J0IHZhciBpc29tb3JwaGljID0geyBmZXRjaDogZmV0Y2guYmluZChzZWxmKSwgYnRvYTogYnRvYS5iaW5kKHNlbGYpIH07XG52YXIgS2VkQmFja2VuZENsaWVudFdlYiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhLZWRCYWNrZW5kQ2xpZW50V2ViLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEtlZEJhY2tlbmRDbGllbnRXZWIoYXBpQmFzZVVybCwgcHJvdmlkZXJPclRva2VuUGF0aCwgb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgYmVhcmVyUHJvdmlkZXIgPSB0eXBlb2YgcHJvdmlkZXJPclRva2VuUGF0aCAhPT0gJ3N0cmluZycgP1xuICAgICAgICAgICAgcHJvdmlkZXJPclRva2VuUGF0aCA6XG4gICAgICAgICAgICBuZXcgV2ViU2VydmVyQmVhcmVyUHJvdmlkZXIocHJvdmlkZXJPclRva2VuUGF0aCwgKG9wdGlvbnMgJiYgb3B0aW9ucy50b2tlblJlc3BvbnNlTWFwcGVyKSB8fCAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuICh7IHRva2VuOiB4LCBleHBpcmVzOiBEYXRlLm5vdygpICsgNTkgKiA2MCAqIDYwIH0pOyB9KSwgb3B0aW9ucyAmJiBvcHRpb25zLnRva2VuSWQpO1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGlzb21vcnBoaWMsIGJlYXJlclByb3ZpZGVyLCBhcGlCYXNlVXJsKSB8fCB0aGlzO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBLZWRCYWNrZW5kQ2xpZW50V2ViO1xufShLZWRCYWNrZW5kQ2xpZW50KSk7XG5leHBvcnQgeyBLZWRCYWNrZW5kQ2xpZW50V2ViIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJ2YXIgRG9jdW1lbnRBY2Nlc3MgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRG9jdW1lbnRBY2Nlc3MoYWNjZXNzQ2xhaW1UeXBlLCBhY2Nlc3NDbGFpbVZhbHVlLCByaWdodCkge1xuICAgICAgICB0aGlzLmFjY2Vzc0NsYWltVHlwZSA9IGFjY2Vzc0NsYWltVHlwZTtcbiAgICAgICAgdGhpcy5hY2Nlc3NDbGFpbVZhbHVlID0gYWNjZXNzQ2xhaW1WYWx1ZTtcbiAgICAgICAgdGhpcy5yaWdodCA9IHJpZ2h0O1xuICAgIH1cbiAgICBEb2N1bWVudEFjY2Vzcy5mcm9tU3RyaW5nID0gZnVuY3Rpb24gKGFjKSB7XG4gICAgICAgIGlmICghYWMpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgdmFyIHNwbGl0ID0gYWMuc3BsaXQoJzonKTtcbiAgICAgICAgaWYgKHNwbGl0Lmxlbmd0aCA8IDMpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGFjY2VzcyBzdHJpbmc6IFwiICsgYWMpO1xuICAgICAgICB2YXIgY2xhaW1UeXBlID0gRG9jdW1lbnRBY2Nlc3MudW5lc2NhcGUoc3BsaXRbMF0pO1xuICAgICAgICB2YXIgY2xhaW1WYWx1ZSA9IERvY3VtZW50QWNjZXNzLnVuZXNjYXBlKHNwbGl0WzFdKTtcbiAgICAgICAgdmFyIHJpZ2h0ID0gc3BsaXRbMl07XG4gICAgICAgIGlmIChyaWdodCAhPT0gJ1InICYmIHJpZ2h0ICE9PSAnVycgJiYgcmlnaHQgIT09ICdTJylcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYWNjZXNzIHN0cmluZzogXCIgKyBhYyk7XG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRBY2Nlc3MoY2xhaW1UeXBlLCBjbGFpbVZhbHVlLCByaWdodCk7XG4gICAgfTtcbiAgICBEb2N1bWVudEFjY2Vzcy5lc2NhcGUgPSBmdW5jdGlvbiAoYWNjZXNzQ29tcG9uZW50KSB7XG4gICAgICAgIHJldHVybiBhY2Nlc3NDb21wb25lbnQucmVwbGFjZSgvXFwlL2csIFwiJTI1XCIpLnJlcGxhY2UoL1xcOi9nLCBcIiUzQVwiKTtcbiAgICB9O1xuICAgIERvY3VtZW50QWNjZXNzLnVuZXNjYXBlID0gZnVuY3Rpb24gKGFjY2Vzc0NvbXBvbmVudCkge1xuICAgICAgICByZXR1cm4gYWNjZXNzQ29tcG9uZW50LnJlcGxhY2UoL1xcJTNBL2csIFwiOlwiKS5yZXBsYWNlKC9cXCUyNS9nLCBcIiVcIik7XG4gICAgfTtcbiAgICBEb2N1bWVudEFjY2Vzcy5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBEb2N1bWVudEFjY2Vzcy5lc2NhcGUodGhpcy5hY2Nlc3NDbGFpbVR5cGUpICsgXCI6XCIgK1xuICAgICAgICAgICAgRG9jdW1lbnRBY2Nlc3MuZXNjYXBlKHRoaXMuYWNjZXNzQ2xhaW1WYWx1ZSkgKyBcIjpcIiArXG4gICAgICAgICAgICB0aGlzLnJpZ2h0O1xuICAgIH07XG4gICAgRG9jdW1lbnRBY2Nlc3MuZnJvbVN0cmluZ0FycmF5ID0gZnVuY3Rpb24gKGFjbCkge1xuICAgICAgICByZXR1cm4gYWNsXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChhYykgeyByZXR1cm4gRG9jdW1lbnRBY2Nlc3MuZnJvbVN0cmluZyhhYyk7IH0pXG4gICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChhYykgeyByZXR1cm4gYWM7IH0pO1xuICAgIH07XG4gICAgRG9jdW1lbnRBY2Nlc3MudG9TdHJpbmdBcnJheSA9IGZ1bmN0aW9uIChhY2wpIHtcbiAgICAgICAgcmV0dXJuIGFjbC5tYXAoZnVuY3Rpb24gKGFjKSB7IHJldHVybiBhYy50b1N0cmluZygpOyB9KTtcbiAgICB9O1xuICAgIHJldHVybiBEb2N1bWVudEFjY2Vzcztcbn0oKSk7XG5leHBvcnQgeyBEb2N1bWVudEFjY2VzcyB9O1xuZXhwb3J0IGZ1bmN0aW9uIGhhc0FjY2VzcyhhY2wsIHVzZXJDbGFpbXMsIHJlcXVlc3RlZFJpZ2h0KSB7XG4gICAgaWYgKHVzZXJDbGFpbXMuc29tZShmdW5jdGlvbiAoY2xhaW0pIHsgcmV0dXJuIGNsYWltLnR5cGUgPT09ICdyb2xlJyAmJiBjbGFpbS52YWx1ZSA9PT0gXCJBRE1JTlwiOyB9KSlcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgcmV0dXJuIGFjbC5zb21lKGZ1bmN0aW9uIChhKSB7XG4gICAgICAgIHJldHVybiB1c2VyQ2xhaW1zLnNvbWUoZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgICAgIHJldHVybiBhLmFjY2Vzc0NsYWltVHlwZSA9PT0gYy50eXBlICYmXG4gICAgICAgICAgICAgICAgYS5hY2Nlc3NDbGFpbVZhbHVlID09PSBjLnZhbHVlICYmICgoYS5yaWdodCA9PT0gJ1InICYmIHJlcXVlc3RlZFJpZ2h0ID09PSAnUicpIHx8XG4gICAgICAgICAgICAgICAgKGEucmlnaHQgPT09ICdXJyAmJiBbJ1InLCAnVyddLmluZGV4T2YocmVxdWVzdGVkUmlnaHQpID49IDApIHx8XG4gICAgICAgICAgICAgICAgKGEucmlnaHQgPT09ICdTJykpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFjY2Vzcy1jb250cm9sLmpzLm1hcCIsImltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XG52YXIgSHR0cEVycm9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHRzbGliXzEuX19leHRlbmRzKEh0dHBFcnJvciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBIdHRwRXJyb3IoY29kZSwgbWVzc2FnZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBcIkhUVFBcIiArIGNvZGUgKyBcIiBcIiArIG1lc3NhZ2UpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmNvZGUgPSBjb2RlO1xuICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgICAgX3RoaXMubmFtZSA9IFwiaHR0cFwiICsgY29kZTtcbiAgICAgICAgX3RoaXMubWVzc2FnZSA9IFwiSFRUUFwiICsgY29kZSArIFwiIFwiICsgbWVzc2FnZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gSHR0cEVycm9yO1xufShFcnJvcikpO1xuZXhwb3J0IHsgSHR0cEVycm9yIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1odHRwLWVycm9yLmpzLm1hcCIsImltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBSZXN0Q2xpZW50IH0gZnJvbSAnLi9yZXN0Y2xpZW50JztcbmV4cG9ydCAqIGZyb20gJy4vdXRpbHMnO1xuZXhwb3J0IHsgS2VkQmVhcmVyUHJvdmlkZXIgfSBmcm9tICcuL2tlZC1iZWFyZXItcHJvdmlkZXInO1xuZXhwb3J0ICogZnJvbSAnLi9hY2Nlc3MtY29udHJvbCc7XG5leHBvcnQgeyBSZXN0Q2xpZW50IH07XG5pbXBvcnQgeyBIdHRwRXJyb3IgfSBmcm9tICcuL2h0dHAtZXJyb3InO1xuZXhwb3J0IHsgSHR0cEVycm9yIH07XG5leHBvcnQgKiBmcm9tICcuL3Jlc3RjbGllbnQnO1xuO1xuLy8gfCAnb3RoZXJGbGFnJyB8ICd0aGlyZEZsYWcnOy4uLlxudmFyIEtlZEJhY2tlbmRDbGllbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gS2VkQmFja2VuZENsaWVudChpc29tb3JwaGljLCBiZWFyZXJQcm92aWRlciwgYmFzZVVybCkge1xuICAgICAgICB0aGlzLmh0dHAgPSBuZXcgUmVzdENsaWVudChpc29tb3JwaGljLCBiYXNlVXJsLCB7IGJlYXJlclByb3ZpZGVyOiBiZWFyZXJQcm92aWRlciB9KTtcbiAgICB9XG4gICAgS2VkQmFja2VuZENsaWVudC5wcm90b3R5cGUuZ2V0TXlDbGFpbXMgPSBmdW5jdGlvbiAodGFibGUsIGZldGNoT3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXMsIF9hLCBfYjtcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYykge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2MubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmh0dHAuZ2V0KFwibWUvY2xhaW1zL1wiICsgKHRhYmxlIHx8IFwiXCIpLCBudWxsLCBmZXRjaE9wdGlvbnMpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gX2Muc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVzLnN0YXR1cyAhPSAyMDApKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gSHR0cEVycm9yLmJpbmQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYiA9IFt2b2lkIDAsIHJlcy5zdGF0dXNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzLnRleHQoKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogdGhyb3cgbmV3IChfYS5hcHBseShIdHRwRXJyb3IsIF9iLmNvbmNhdChbX2Muc2VudCgpXSkpKSgpO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbNCAvKnlpZWxkKi8sIHJlcy5qc29uKCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMiAvKnJldHVybiovLCBfYy5zZW50KCldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uICh0YWJsZSwgaWQsIG9wdGlvbnMsIGZldGNoT3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXMsIF9hLCBfYjtcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYykge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2MubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmh0dHAuZ2V0KHRhYmxlICsgXCIvXCIgKyBpZCwgb3B0aW9ucywgZmV0Y2hPcHRpb25zKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcyA9IF9jLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHJlcy5zdGF0dXMgIT0gMjAwKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IEh0dHBFcnJvci5iaW5kO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2IgPSBbdm9pZCAwLCByZXMuc3RhdHVzXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlcy50ZXh0KCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHRocm93IG5ldyAoX2EuYXBwbHkoSHR0cEVycm9yLCBfYi5jb25jYXQoW19jLnNlbnQoKV0pKSkoKTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzQgLyp5aWVsZCovLCByZXMuanNvbigpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qLywgX2Muc2VudCgpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBLZWRCYWNrZW5kQ2xpZW50LnByb3RvdHlwZS5saXN0ID0gZnVuY3Rpb24gKHRhYmxlLCBvcHRpb25zLCBmZXRjaE9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcXVlcnksIHJlcywgX2EsIF9iO1xuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9jKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYy5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeSA9IHRzbGliXzEuX19hc3NpZ24oe30sIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxvY2F0aW9uLnNlYXJjaC5pbmNsdWRlcygndXNlU1AnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5LmZsYWdzID0gKHF1ZXJ5LmZsYWdzIHx8IFtdKS5jb25jYXQoWyd1c2VTUCddKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMubXV0YXRpb25zT25FbXB0eSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeS5tdXRhdGlvbnNPbkVtcHR5ID0gSlNPTi5zdHJpbmdpZnkob3B0aW9ucy5tdXRhdGlvbnNPbkVtcHR5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuaHR0cC5nZXQoXCJcIiArIHRhYmxlLCBxdWVyeSwgZmV0Y2hPcHRpb25zKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcyA9IF9jLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHJlcy5zdGF0dXMgIT0gMjAwKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IEh0dHBFcnJvci5iaW5kO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2IgPSBbdm9pZCAwLCByZXMuc3RhdHVzXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlcy50ZXh0KCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHRocm93IG5ldyAoX2EuYXBwbHkoSHR0cEVycm9yLCBfYi5jb25jYXQoW19jLnNlbnQoKV0pKSkoKTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzQgLyp5aWVsZCovLCByZXMuanNvbigpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qLywgX2Muc2VudCgpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBLZWRCYWNrZW5kQ2xpZW50LnByb3RvdHlwZS5iYXRjaCA9IGZ1bmN0aW9uIChyZXFzLCBmZXRjaE9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcmVzLCBfYSwgX2I7XG4gICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2MpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlb3JkZXIgb3BlcmF0aW9ucyBzbyB0aGF0ICdhZGQncyBjb21lIGZpcnN0IGFuZCAnZGVsZXRlJ3MgY29tZSBsYXN0OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxcyA9IHJlcXMuc2xpY2UoKS5zb3J0KGZ1bmN0aW9uIChyZXExLCByZXEyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcTEub3AgPT09ICdhZGQnID8gLTEgOiByZXEyLm9wID09PSAnYWRkJyA/IDEgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXExLm9wID09PSAnZGVsZXRlJyA/IDEgOiByZXEyLm9wID09PSAnZGVsZXRlJyA/IC0xIDogMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5odHRwLnBvc3QoXCJiYXRjaFwiLCByZXFzLCBmZXRjaE9wdGlvbnMpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gX2Muc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVzLnN0YXR1cyAhPSAyMDApKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gSHR0cEVycm9yLmJpbmQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYiA9IFt2b2lkIDAsIHJlcy5zdGF0dXNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzLnRleHQoKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogdGhyb3cgbmV3IChfYS5hcHBseShIdHRwRXJyb3IsIF9iLmNvbmNhdChbX2Muc2VudCgpXSkpKSgpO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbNCAvKnlpZWxkKi8sIHJlcy5qc29uKCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMiAvKnJldHVybiovLCBfYy5zZW50KCldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLmRvID0gZnVuY3Rpb24gKHNjb3BlRm4pIHtcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcnVubmVyO1xuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBydW5uZXIgPSBuZXcgQmF0Y2hSdW5uZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlRm4ocnVubmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuYmF0Y2gocnVubmVyLm11dGF0aW9uUmVxdWVzdHMpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOiByZXR1cm4gWzIgLypyZXR1cm4qLywgX2Euc2VudCgpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBLZWRCYWNrZW5kQ2xpZW50LnByb3RvdHlwZS5kZWxldGVSZWFsbSA9IGZ1bmN0aW9uIChyZWFsbSkge1xuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXMsIF9hLCBfYjtcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYykge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2MubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmh0dHAuZGVsZXRlKFwicmVhbG1zL1wiICsgcmVhbG0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gX2Muc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVzLnN0YXR1cyAhPSAyMDApKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gSHR0cEVycm9yLmJpbmQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYiA9IFt2b2lkIDAsIHJlcy5zdGF0dXNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzLnRleHQoKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogdGhyb3cgbmV3IChfYS5hcHBseShIdHRwRXJyb3IsIF9iLmNvbmNhdChbX2Muc2VudCgpXSkpKSgpO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbNCAvKnlpZWxkKi8sIHJlcy5qc29uKCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMiAvKnJldHVybiovLCBfYy5zZW50KCldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uICh0YWJsZSwgZG9jLCBicmFuY2hJZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kbyhmdW5jdGlvbiAocikgeyByZXR1cm4gci5hZGQodGFibGUsIGRvYyk7IH0pO1xuICAgIH07XG4gICAgS2VkQmFja2VuZENsaWVudC5wcm90b3R5cGUucHV0ID0gZnVuY3Rpb24gKHRhYmxlLCBkb2MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG8oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIucHV0KHRhYmxlLCBkb2MpOyB9KTtcbiAgICB9O1xuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICh0YWJsZSwgaWQsIGRlbHRhRG9jLCBicmFuY2hJZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kbyhmdW5jdGlvbiAocikgeyByZXR1cm4gci51cGRhdGUodGFibGUsIGlkLCBkZWx0YURvYywgYnJhbmNoSWQpOyB9KTtcbiAgICB9O1xuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLm1lcmdlID0gZnVuY3Rpb24gKGJyYW5jaElkLCB0YXJnZXRCcmFuY2hJZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kbyhmdW5jdGlvbiAocikgeyByZXR1cm4gci5tZXJnZShicmFuY2hJZCwgdGFyZ2V0QnJhbmNoSWQpOyB9KTtcbiAgICB9O1xuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLmNsZWFyQnJhbmNoID0gZnVuY3Rpb24gKGJyYW5jaElkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLmNsZWFyQnJhbmNoKGJyYW5jaElkKTsgfSk7XG4gICAgfTtcbiAgICBLZWRCYWNrZW5kQ2xpZW50LnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAodGFibGUsIGlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLmRlbGV0ZSh0YWJsZSwgaWQpOyB9KTtcbiAgICB9O1xuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLnNoYXJlID0gZnVuY3Rpb24gKHRhYmxlLCBpZCwgYWNsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLnNoYXJlKHRhYmxlLCBpZCwgYWNsKTsgfSk7XG4gICAgfTtcbiAgICBLZWRCYWNrZW5kQ2xpZW50LnByb3RvdHlwZS51bnNoYXJlID0gZnVuY3Rpb24gKHRhYmxlLCBpZCwgYWNsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLnVuc2hhcmUodGFibGUsIGlkLCBhY2wpOyB9KTtcbiAgICB9O1xuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLmxpbmsgPSBmdW5jdGlvbiAoc291cmNlVGFibGUsIHNvdXJjZUlkLCB0YXJnZXRUYWJsZSwgdGFyZ2V0SWQsIGxhYmVsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLmxpbmsoc291cmNlVGFibGUsIHNvdXJjZUlkLCB0YXJnZXRUYWJsZSwgdGFyZ2V0SWQsIGxhYmVsKTsgfSk7XG4gICAgfTtcbiAgICBLZWRCYWNrZW5kQ2xpZW50LnByb3RvdHlwZS5saW5rMiA9IGZ1bmN0aW9uIChzb3VyY2VUYWJsZSwgc291cmNlSWQsIHRhcmdldElkLCBsYWJlbCwgYnJhbmNoSWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG8oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIubGluazIoc291cmNlVGFibGUsIHNvdXJjZUlkLCBsYWJlbCwgdGFyZ2V0SWQsIGJyYW5jaElkKTsgfSk7XG4gICAgfTtcbiAgICBLZWRCYWNrZW5kQ2xpZW50LnByb3RvdHlwZS51bmxpbmsgPSBmdW5jdGlvbiAoc291cmNlVGFibGUsIHNvdXJjZUlkLCB0YXJnZXRUYWJsZSwgdGFyZ2V0SWQsIGxhYmVsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLnVubGluayhzb3VyY2VUYWJsZSwgc291cmNlSWQsIHRhcmdldFRhYmxlLCB0YXJnZXRJZCwgbGFiZWwpOyB9KTtcbiAgICB9O1xuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLnVubGluazIgPSBmdW5jdGlvbiAoc291cmNlVGFibGUsIHNvdXJjZUlkLCB0YXJnZXRJZCwgbGFiZWwsIGJyYW5jaElkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLnVubGluazIoc291cmNlVGFibGUsIHNvdXJjZUlkLCBsYWJlbCwgdGFyZ2V0SWQsIGJyYW5jaElkKTsgfSk7XG4gICAgfTtcbiAgICBLZWRCYWNrZW5kQ2xpZW50LnByb3RvdHlwZS51bmRvTGluayA9IGZ1bmN0aW9uIChzb3VyY2VUYWJsZSwgc291cmNlSWQsIHRhcmdldElkLCBsYWJlbCwgYnJhbmNoSWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG8oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIudW5kb0xpbmsoc291cmNlVGFibGUsIHNvdXJjZUlkLCBsYWJlbCwgdGFyZ2V0SWQsIGJyYW5jaElkKTsgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gS2VkQmFja2VuZENsaWVudDtcbn0oKSk7XG5leHBvcnQgeyBLZWRCYWNrZW5kQ2xpZW50IH07XG52YXIgQmF0Y2hSdW5uZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQmF0Y2hSdW5uZXIoKSB7XG4gICAgICAgIHRoaXMubXV0YXRpb25SZXF1ZXN0cyA9IFtdO1xuICAgIH1cbiAgICBCYXRjaFJ1bm5lci5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKHRhYmxlLCBkb2MsIGJyYW5jaElkKSB7XG4gICAgICAgIHRoaXMubXV0YXRpb25SZXF1ZXN0cy5wdXNoKHsgb3A6ICdhZGQnLCB0YWJsZTogdGFibGUsIGRvYzogZG9jLCBicmFuY2hJZDogYnJhbmNoSWQgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgQmF0Y2hSdW5uZXIucHJvdG90eXBlLnB1dCA9IGZ1bmN0aW9uICh0YWJsZSwgZG9jKSB7XG4gICAgICAgIGRvYyA9IHRzbGliXzEuX19hc3NpZ24oe30sIGRvYyk7XG4gICAgICAgIGRlbGV0ZSBkb2MuYWNsOyAvLyBGb3JiaWRkZW4gdG8gc2VuZCBhY2wgd2l0aCBwdXQoKSBjYWxscy5cbiAgICAgICAgdGhpcy5tdXRhdGlvblJlcXVlc3RzLnB1c2goeyBvcDogJ3B1dCcsIHRhYmxlOiB0YWJsZSwgZG9jOiBkb2MgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgQmF0Y2hSdW5uZXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICh0YWJsZSwgaWQsIGRlbHRhRG9jLCBicmFuY2hJZCkge1xuICAgICAgICBkZWx0YURvYyA9IHRzbGliXzEuX19hc3NpZ24oe30sIGRlbHRhRG9jKTtcbiAgICAgICAgdGhpcy5tdXRhdGlvblJlcXVlc3RzLnB1c2goeyBvcDogJ3VwZGF0ZScsIHRhYmxlOiB0YWJsZSwgaWQ6IGlkLCBkZWx0YURvYzogZGVsdGFEb2MsIGJyYW5jaElkOiBicmFuY2hJZCB9KTtcbiAgICB9O1xuICAgIEJhdGNoUnVubmVyLnByb3RvdHlwZS5tZXJnZSA9IGZ1bmN0aW9uIChicmFuY2hJZCwgdGFyZ2V0QnJhbmNoSWQpIHtcbiAgICAgICAgdGhpcy5tdXRhdGlvblJlcXVlc3RzLnB1c2goeyBvcDogJ21lcmdlJywgYnJhbmNoSWQ6IGJyYW5jaElkLCB0YXJnZXRCcmFuY2hJZDogdGFyZ2V0QnJhbmNoSWQgfSk7XG4gICAgfTtcbiAgICBCYXRjaFJ1bm5lci5wcm90b3R5cGUuY2xlYXJCcmFuY2ggPSBmdW5jdGlvbiAoYnJhbmNoSWQpIHtcbiAgICAgICAgdGhpcy5tdXRhdGlvblJlcXVlc3RzLnB1c2goeyBvcDogJ2NsZWFyLWJyYW5jaCcsIGJyYW5jaElkOiBicmFuY2hJZCB9KTtcbiAgICB9O1xuICAgIEJhdGNoUnVubmVyLnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAodGFibGUsIGlkKSB7XG4gICAgICAgIHRoaXMubXV0YXRpb25SZXF1ZXN0cy5wdXNoKHsgb3A6ICdkZWxldGUnLCB0YWJsZTogdGFibGUsIGlkOiBpZCB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBCYXRjaFJ1bm5lci5wcm90b3R5cGUuc2hhcmUgPSBmdW5jdGlvbiAodGFibGUsIGlkLCBhY2wpIHtcbiAgICAgICAgdGhpcy5tdXRhdGlvblJlcXVlc3RzLnB1c2goeyBvcDogJ3NoYXJlJywgdGFibGU6IHRhYmxlLCBpZDogaWQsIGFjbDogYWNsIH0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIEJhdGNoUnVubmVyLnByb3RvdHlwZS51bnNoYXJlID0gZnVuY3Rpb24gKHRhYmxlLCBpZCwgYWNsKSB7XG4gICAgICAgIHRoaXMubXV0YXRpb25SZXF1ZXN0cy5wdXNoKHsgb3A6ICd1bnNoYXJlJywgdGFibGU6IHRhYmxlLCBpZDogaWQsIGFjbDogYWNsIH0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIEJhdGNoUnVubmVyLnByb3RvdHlwZS5saW5rID0gZnVuY3Rpb24gKHNvdXJjZVRhYmxlLCBzb3VyY2VJZCwgdGFyZ2V0VGFibGUsIHRhcmdldElkLCBsYWJlbCkge1xuICAgICAgICB0aGlzLm11dGF0aW9uUmVxdWVzdHMucHVzaCh7IG9wOiAnbGluaycsIHNvdXJjZVRhYmxlOiBzb3VyY2VUYWJsZSwgc291cmNlSWQ6IHNvdXJjZUlkLCB0YXJnZXRUYWJsZTogdGFyZ2V0VGFibGUsIHRhcmdldElkOiB0YXJnZXRJZCwgbGFiZWw6IGxhYmVsIH0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIEJhdGNoUnVubmVyLnByb3RvdHlwZS5saW5rMiA9IGZ1bmN0aW9uIChzb3VyY2VUYWJsZSwgc291cmNlSWQsIGxhYmVsLCB0YXJnZXRJZCwgYnJhbmNoSWQpIHtcbiAgICAgICAgdGhpcy5tdXRhdGlvblJlcXVlc3RzLnB1c2goeyBvcDogJ2xpbmsnLCBzb3VyY2VUYWJsZTogc291cmNlVGFibGUsIHNvdXJjZUlkOiBzb3VyY2VJZCwgdGFyZ2V0SWQ6IHRhcmdldElkLCBsYWJlbDogbGFiZWwsIGJyYW5jaElkOiBicmFuY2hJZCB9KTtcbiAgICB9O1xuICAgIEJhdGNoUnVubmVyLnByb3RvdHlwZS51bmxpbmsgPSBmdW5jdGlvbiAoc291cmNlVGFibGUsIHNvdXJjZUlkLCB0YXJnZXRUYWJsZSwgdGFyZ2V0SWQsIGxhYmVsKSB7XG4gICAgICAgIHRoaXMubXV0YXRpb25SZXF1ZXN0cy5wdXNoKHsgb3A6ICd1bmxpbmsnLCBzb3VyY2VUYWJsZTogc291cmNlVGFibGUsIHNvdXJjZUlkOiBzb3VyY2VJZCwgdGFyZ2V0VGFibGU6IHRhcmdldFRhYmxlLCB0YXJnZXRJZDogdGFyZ2V0SWQsIGxhYmVsOiBsYWJlbCB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBCYXRjaFJ1bm5lci5wcm90b3R5cGUudW5saW5rMiA9IGZ1bmN0aW9uIChzb3VyY2VUYWJsZSwgc291cmNlSWQsIGxhYmVsLCB0YXJnZXRJZCwgYnJhbmNoSWQpIHtcbiAgICAgICAgdGhpcy5tdXRhdGlvblJlcXVlc3RzLnB1c2goeyBvcDogJ3VubGluaycsIHNvdXJjZVRhYmxlOiBzb3VyY2VUYWJsZSwgc291cmNlSWQ6IHNvdXJjZUlkLCB0YXJnZXRJZDogdGFyZ2V0SWQsIGxhYmVsOiBsYWJlbCwgYnJhbmNoSWQ6IGJyYW5jaElkIH0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIEJhdGNoUnVubmVyLnByb3RvdHlwZS51bmRvTGluayA9IGZ1bmN0aW9uIChzb3VyY2VUYWJsZSwgc291cmNlSWQsIGxhYmVsLCB0YXJnZXRJZCwgYnJhbmNoSWQpIHtcbiAgICAgICAgdGhpcy5tdXRhdGlvblJlcXVlc3RzLnB1c2goeyBvcDogJ3VuZG8tbGluaycsIHNvdXJjZVRhYmxlOiBzb3VyY2VUYWJsZSwgc291cmNlSWQ6IHNvdXJjZUlkLCB0YXJnZXRJZDogdGFyZ2V0SWQsIGxhYmVsOiBsYWJlbCwgYnJhbmNoSWQ6IGJyYW5jaElkIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIEJhdGNoUnVubmVyO1xufSgpKTtcbmV4cG9ydCB7IEJhdGNoUnVubmVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJpbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgUmVzdENsaWVudCB9IGZyb20gJy4vcmVzdGNsaWVudCc7XG5pbXBvcnQgeyBhdm9pZFNpbXVsdGFub3VzQ2FsbHMgfSBmcm9tICcuL3V0aWxzJztcbnZhciBLZWRCZWFyZXJQcm92aWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBLZWRCZWFyZXJQcm92aWRlcihpc29tb3JwaGljLCBzdG9yYWdlLCB0b2tlbklkLCBjbGllbnRJZCwgY2xpZW50U2VjcmV0LCB0b2tlblVybCwgdG9rZW5RdWVyeSkge1xuICAgICAgICB0aGlzLmlzb21vcnBoaWMgPSBpc29tb3JwaGljO1xuICAgICAgICB0aGlzLnN0b3JhZ2UgPSBzdG9yYWdlO1xuICAgICAgICB0aGlzLnRva2VuSWQgPSB0b2tlbklkO1xuICAgICAgICB0aGlzLmNsaWVudElkID0gY2xpZW50SWQ7XG4gICAgICAgIHRoaXMuY2xpZW50U2VjcmV0ID0gY2xpZW50U2VjcmV0O1xuICAgICAgICB0aGlzLnRva2VuVXJsID0gdG9rZW5Vcmw7XG4gICAgICAgIHRoaXMudG9rZW5RdWVyeSA9IHRva2VuUXVlcnk7XG4gICAgICAgIHRoaXMudG9rZW5JbmZvID0geyB0b2tlbjogbnVsbCwgZXhwaXJlczogMCB9O1xuICAgICAgICB0aGlzLmNsaWVudCA9IG5ldyBSZXN0Q2xpZW50KGlzb21vcnBoaWMsIFwiXCIsIHtcbiAgICAgICAgICAgIHVzZXJuYW1lOiB0aGlzLmNsaWVudElkLFxuICAgICAgICAgICAgcGFzc3dvcmQ6IHRoaXMuY2xpZW50U2VjcmV0XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmdldEJlYXJlciA9IGF2b2lkU2ltdWx0YW5vdXNDYWxscyh0aGlzLmdldEJlYXJlci5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy5yZWZyZXNoQmVhcmVyID0gYXZvaWRTaW11bHRhbm91c0NhbGxzKHRoaXMucmVmcmVzaEJlYXJlci5iaW5kKHRoaXMpKTtcbiAgICB9XG4gICAgS2VkQmVhcmVyUHJvdmlkZXIucHJvdG90eXBlLmdldEJlYXJlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX2EsIHRva2VuLCBleHBpcmVzLCBfYiwgZV8xO1xuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9jKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYy5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IHRoaXMudG9rZW5JbmZvLCB0b2tlbiA9IF9hLnRva2VuLCBleHBpcmVzID0gX2EuZXhwaXJlcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0b2tlbiAmJiBleHBpcmVzID49IERhdGUubm93KCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMudG9rZW5JbmZvXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jLmxhYmVsID0gMTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2MudHJ5cy5wdXNoKFsxLCA0LCAsIDZdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iID0gdGhpcztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuc3RvcmFnZS5sb2FkKHRoaXMuY2xpZW50SWQgKyBcIi9cIiArIHRoaXMudG9rZW5JZCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYi50b2tlbkluZm8gPSBfYy5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50b2tlbkluZm8udG9rZW4gJiYgdGhpcy50b2tlbkluZm8uZXhwaXJlcyA+PSBEYXRlLm5vdygpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnRva2VuSW5mb107XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJlZnJlc2hCZWFyZXIoKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnRva2VuSW5mb107XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVfMSA9IF9jLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucmVmcmVzaEJlYXJlcigpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Muc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMudG9rZW5JbmZvXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgS2VkQmVhcmVyUHJvdmlkZXIucHJvdG90eXBlLnJlZnJlc2hCZWFyZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJlcywgcmV0cmllcywgX2EsIF9iO1xuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9jKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYy5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXRyaWVzID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jLmxhYmVsID0gMTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocmV0cmllcyA8IDYpKSByZXR1cm4gWzMgLypicmVhayovLCA1XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmV0cmlldmluZyB0b2tlbiBmb3IgXCIgKyB0aGlzLnRva2VuSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5jbGllbnQuZ2V0KHRoaXMudG9rZW5VcmwsIHRoaXMudG9rZW5RdWVyeSwgeyBjYWNoZTogJ3JlbG9hZCcgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMgPSBfYy5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLnN0YXR1cyAhPT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiR290IFwiICsgcmVzLnN0YXR1cyArIFwiIFwiICsgcmVzLnN0YXR1c1RleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSB0aGlzO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2IgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlcy50ZXh0KCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50b2tlbkluZm8gPSAoX2IudG9rZW4gPSBfYy5zZW50KCksIF9iLmV4cGlyZXMgPSBEYXRlLm5vdygpICsgNTkgKiA2MCAqIDEwMDAsIF9iKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiR290IHRva2VuIGZvciBcIiArIHRoaXMudG9rZW5JZCArIFwiOiBcIiArIEpTT04uc3RyaW5naWZ5KHRoaXMudG9rZW5JbmZvKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0b3JhZ2Uuc2F2ZSh0aGlzLmNsaWVudElkICsgXCIvXCIgKyB0aGlzLnRva2VuSWQsIHRoaXMudG9rZW5JbmZvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnRva2VuSW5mb107XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgICsrcmV0cmllcztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDFdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6IHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byByZXRyaWV2ZSB0b2tlbiBmb3IgXCIgKyBKU09OLnN0cmluZ2lmeSh0aGlzLnRva2VuSWQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gS2VkQmVhcmVyUHJvdmlkZXI7XG59KCkpO1xuZXhwb3J0IHsgS2VkQmVhcmVyUHJvdmlkZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWtlZC1iZWFyZXItcHJvdmlkZXIuanMubWFwIiwiLypcbmRlY2xhcmUgdmFyIEJ1ZmZlcjsgLy8gbm9kZSBidWlsdC1pblxuXG5cbmZ1bmN0aW9uIGJhc2ljQXV0aEhlYWRlcih1c2VybmFtZSwgcGFzc3dvcmQpIHtcbiAgICByZXR1cm4gXCJCYXNpYyBcIiArIG5ldyBCdWZmZXIodXNlcm5hbWUgKyBcIjpcIiArIHBhc3N3b3JkKS50b1N0cmluZyhcImJhc2U2NFwiKTtcbn1cbiovXG5pbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgY3JlYXRlVVVJRCB9IGZyb20gXCIuL3V0aWxzXCI7XG5pbXBvcnQgeyBFbWl0dGVyIH0gZnJvbSAnLi4vb2JzZXJ2YWJsZS9lbWl0dGVyJztcbnZhciBSZXN0Q2xpZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJlc3RDbGllbnQoaXNvbW9ycGhpYywgYmFzZVVybCwgb3B0aW9ucykge1xuICAgICAgICB0aGlzLmlzb21vcnBoaWMgPSBpc29tb3JwaGljO1xuICAgICAgICB0aGlzLmJhc2VVcmwgPSBiYXNlVXJsO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLm51bU91dHN0YW5kaW5nT3BlcmF0aW9ucyA9IDA7XG4gICAgICAgIHRoaXMuX3N0YXR1cyA9IG5ldyBFbWl0dGVyKHRoaXMpO1xuICAgICAgICB0aGlzLmZldGNoT3B0aW9ucyA9IHsgbW9kZTogJ2NvcnMnIH07XG4gICAgICAgIHRoaXMuYXV0aEhlYWRlciA9IG9wdGlvbnMuYmVhcmVyID9cbiAgICAgICAgICAgIFwiQmVhcmVyIFwiICsgb3B0aW9ucy5iZWFyZXIgOlxuICAgICAgICAgICAgb3B0aW9ucy51c2VybmFtZSA/XG4gICAgICAgICAgICAgICAgXCJCYXNpYyBcIiArIGlzb21vcnBoaWMuYnRvYShvcHRpb25zLnVzZXJuYW1lICsgXCI6XCIgKyAob3B0aW9ucy5wYXNzd29yZCB8fCBcIlwiKSkgOlxuICAgICAgICAgICAgICAgIG51bGw7XG4gICAgICAgIHRoaXMuYmVhcmVyUHJvdmlkZXIgPSBvcHRpb25zLmJlYXJlclByb3ZpZGVyIHx8IG51bGw7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN0Q2xpZW50LnByb3RvdHlwZSwgXCJzdGF0dXNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdGF0dXM7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIFJlc3RDbGllbnQucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24gKHBhdGgsIG1ldGhvZCwgaGVhZGVycywgcXVlcnksIGZldGNoT3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICArK3RoaXMubnVtT3V0c3RhbmRpbmdPcGVyYXRpb25zO1xuICAgICAgICB0aGlzLl9zdGF0dXMuZGlzcGF0Y2godGhpcyk7XG4gICAgICAgIHJldHVybiB0aGlzLl9mZXRjaChwYXRoLCBtZXRob2QsIGhlYWRlcnMsIHF1ZXJ5LCBmZXRjaE9wdGlvbnMpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAtLV90aGlzLm51bU91dHN0YW5kaW5nT3BlcmF0aW9ucztcbiAgICAgICAgICAgIF90aGlzLl9zdGF0dXMuZGlzcGF0Y2goX3RoaXMpO1xuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgLS1fdGhpcy5udW1PdXRzdGFuZGluZ09wZXJhdGlvbnM7XG4gICAgICAgICAgICBfdGhpcy5fc3RhdHVzLmRpc3BhdGNoKF90aGlzKTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFJlc3RDbGllbnQucHJvdG90eXBlLl9mZXRjaCA9IGZ1bmN0aW9uIChwYXRoLCBtZXRob2QsIGhlYWRlcnMsIHF1ZXJ5LCBmZXRjaE9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcXVlcnlTdHIsIF9hLCBhdXRoSGVhZGVyLCB0b2tlbkluZm8sIGJlYXJlclByb3ZpZGVyLCBfYiwgX2MsIHVybCwgcmVzLCB3d3dhdXRoLCBfZDtcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfZSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2UubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZldGNoT3B0aW9ucyAmJiBmZXRjaE9wdGlvbnMuY2FjaGUgPT09ICduby1jYWNoZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXb3JrYXJvdW5kIGZvciBiYWNrLWJ1dHRvbiBub3QgcmVzcGVjdGluZyBjYWNoZSBjb250cm9sIGluIENocm9tZS9PcGVyYS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBcHBlbmQgYSBxdWVyeSBwYXJhbWV0ZXIgdG8gZm9yY2UgYSBjYWNoZSBlbnRyeVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5ID0gdHNsaWJfMS5fX2Fzc2lnbih7fSwgcXVlcnksIHsgbm9jYWNoZTogY3JlYXRlVVVJRCgpIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlTdHIgPSBxdWVyeSAmJiBPYmplY3Qua2V5cyhxdWVyeSkuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIHF1ZXJ5W2tleV0gIT09IHVuZGVmaW5lZDsgfSkubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIj1cIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuY29kZVVSSUNvbXBvbmVudChxdWVyeVtrZXldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmpvaW4oJyYnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gdGhpcywgYXV0aEhlYWRlciA9IF9hLmF1dGhIZWFkZXIsIHRva2VuSW5mbyA9IF9hLnRva2VuSW5mbywgYmVhcmVyUHJvdmlkZXIgPSBfYS5iZWFyZXJQcm92aWRlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKCFhdXRoSGVhZGVyICYmICF0b2tlbkluZm8gJiYgYmVhcmVyUHJvdmlkZXIpKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iID0gdGhpcztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGJlYXJlclByb3ZpZGVyLmdldEJlYXJlcigpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2IudG9rZW5JbmZvID0gdG9rZW5JbmZvID0gX2Uuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2UubGFiZWwgPSAyO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRva2VuSW5mbykgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh0b2tlbkluZm8uZXhwaXJlcyA8IERhdGUubm93KCkpKSByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVG9rZW4gZXhwaXJlZC4gUmVmcmVzaCBpdDpcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYyA9IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBiZWFyZXJQcm92aWRlci5yZWZyZXNoQmVhcmVyKCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYy50b2tlbkluZm8gPSB0b2tlbkluZm8gPSBfZS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfZS5sYWJlbCA9IDQ7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dGhIZWFkZXIgPSBcIkJlYXJlciBcIiArIHRva2VuSW5mby50b2tlbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9lLmxhYmVsID0gNTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW4gb25lIHdheSBvciBhbm90aGVyLCB3ZSd2ZSBjb25jbHVkZWQgYW4gQXV0aG9yaXphdGlvbiBoZWFkZXIgdG8gdXNlOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF1dGhIZWFkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzLkF1dGhvcml6YXRpb24gPSBhdXRoSGVhZGVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsID0gdGhpcy5iYXNlVXJsICsgcGF0aCArIChxdWVyeVN0ciA/IFwiP1wiICsgcXVlcnlTdHIgOiBcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuaXNvbW9ycGhpYy5mZXRjaCh1cmwsIHRzbGliXzEuX19hc3NpZ24oe30sIHRoaXMuZmV0Y2hPcHRpb25zLCB7IGhlYWRlcnM6IGhlYWRlcnMsIG1ldGhvZDogbWV0aG9kIH0sIGZldGNoT3B0aW9ucykpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gX2Uuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVzLnN0YXR1cyA9PSA0MDEgJiYgdGhpcy5iZWFyZXJQcm92aWRlcikpIHJldHVybiBbMyAvKmJyZWFrKi8sIDldO1xuICAgICAgICAgICAgICAgICAgICAgICAgd3d3YXV0aCA9IHJlcy5oZWFkZXJzLmdldChcInd3dy1hdXRoZW50aWNhdGVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkdvdCBcIiArIHJlcy5zdGF0dXMgKyBcIiBmcm9tIFwiICsgKHRoaXMuYmFzZVVybCArIHBhdGgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHd3d2F1dGggJiYgL0JlYXJlci9pLnRlc3Qod3d3YXV0aCkpKSByZXR1cm4gWzMgLypicmVhayovLCA5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9kID0gdGhpcztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuYmVhcmVyUHJvdmlkZXIucmVmcmVzaEJlYXJlcigpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgICAgICAgICAgICAgX2QudG9rZW5JbmZvID0gX2Uuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVycy5BdXRob3JpemF0aW9uID0gXCJCZWFyZXIgXCIgKyB0aGlzLnRva2VuSW5mby50b2tlbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuaXNvbW9ycGhpYy5mZXRjaCh1cmwsIHRzbGliXzEuX19hc3NpZ24oe30sIHRoaXMuZmV0Y2hPcHRpb25zLCB7IGhlYWRlcnM6IGhlYWRlcnMsIG1ldGhvZDogbWV0aG9kIH0sIGZldGNoT3B0aW9ucykpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gX2Uuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2UubGFiZWwgPSA5O1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDk6IHJldHVybiBbMiAvKnJldHVybiovLCByZXNdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFJlc3RDbGllbnQucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChwYXRoLCBxdWVyeSwgZmV0Y2hPcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZldGNoKHBhdGgsIFwiR0VUXCIsIHsgQWNjZXB0OiBcImFwcGxpY2F0aW9uL2pzb247IHRleHQvcGxhaW5cIiB9LCBxdWVyeSwgZmV0Y2hPcHRpb25zKTtcbiAgICB9O1xuICAgIFJlc3RDbGllbnQucHJvdG90eXBlLnBvc3QgPSBmdW5jdGlvbiAocGF0aCwgZGF0YSwgZmV0Y2hPcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZldGNoKHBhdGgsIFwiUE9TVFwiLCB7XG4gICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgIFwiQWNjZXB0XCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgIH0sIG51bGwsIHRzbGliXzEuX19hc3NpZ24oe30sIGZldGNoT3B0aW9ucywgeyBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSB9KSk7XG4gICAgfTtcbiAgICBSZXN0Q2xpZW50LnByb3RvdHlwZS5kZWxldGUgPSBmdW5jdGlvbiAocGF0aCwgcXVlcnksIGJvZHksIGZldGNoT3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5mZXRjaChwYXRoLCBcIkRFTEVURVwiLCB7IEFjY2VwdDogXCJhcHBsaWNhdGlvbi9qc29uOyB0ZXh0L3BsYWluXCIgfSwgcXVlcnksIHRzbGliXzEuX19hc3NpZ24oe30sIGZldGNoT3B0aW9ucywgeyBib2R5OiBib2R5IH0pKTtcbiAgICB9O1xuICAgIHJldHVybiBSZXN0Q2xpZW50O1xufSgpKTtcbmV4cG9ydCB7IFJlc3RDbGllbnQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlc3RjbGllbnQuanMubWFwIiwiaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVVVUlEKCkge1xuICAgIC8vIERlY2VudCBzb2x1dGlvbiBmcm9tIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTA1MDM0L2hvdy10by1jcmVhdGUtYS1ndWlkLXV1aWQtaW4tamF2YXNjcmlwdFxuICAgIHZhciBkID0gRGF0ZS5ub3coKTtcbiAgICB2YXIgdXVpZCA9ICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgdmFyIHIgPSAoZCArIE1hdGgucmFuZG9tKCkgKiAxNikgJSAxNiB8IDA7XG4gICAgICAgIGQgPSBNYXRoLmZsb29yKGQgLyAxNik7XG4gICAgICAgIHJldHVybiAoYyA9PT0gJ3gnID8gciA6IChyICYgMHg3IHwgMHg4KSkudG9TdHJpbmcoMTYpO1xuICAgIH0pO1xuICAgIHJldHVybiB1dWlkO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGF2b2lkU2ltdWx0YW5vdXNDYWxscyhtZXRob2QpIHtcbiAgICB2YXIgb25nb2luZ1Byb21pc2UgPSBudWxsO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghb25nb2luZ1Byb21pc2UpIHtcbiAgICAgICAgICAgIG9uZ29pbmdQcm9taXNlID0gbWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgb25nb2luZ1Byb21pc2UgPSBudWxsO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb25nb2luZ1Byb21pc2U7XG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRHbG9iYWxJZChyZWFsbSkge1xuICAgIHZhciBwcmVmaXggPSAnZWM5NmIzYmUtNDVmYy00MWQzLWI2OWUtJztcbiAgICB2YXIgcGFkID0gWyc1MCcsICcwOCcsICdlMScsICc0MCcsICdlNCcsICdlNyddO1xuICAgIGlmIChyZWFsbS5sZW5ndGggPiA2KVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUb28gbG9uZyByZWFsbVwiKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlYWxtLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBoZXggPSByZWFsbS5jaGFyQ29kZUF0KGkpLnRvU3RyaW5nKDE2KTtcbiAgICAgICAgcGFkW2ldID0gaGV4Lmxlbmd0aCA9PT0gMiA/XG4gICAgICAgICAgICBoZXggOlxuICAgICAgICAgICAgJzAnICsgaGV4O1xuICAgIH1cbiAgICByZXR1cm4gcHJlZml4ICsgcGFkLmpvaW4oJycpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVQcmVkZXN0aW5hdGVkSWQoaW5wdXQpIHtcbiAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGVuY29kZXIsIGRhdGEsIGRpZ2VzdCwgX2EsIGk7XG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xuICAgICAgICAgICAgICAgICAgICBkYXRhID0gZW5jb2Rlci5lbmNvZGUoaW5wdXQpO1xuICAgICAgICAgICAgICAgICAgICBfYSA9IFVpbnQ4QXJyYXkuYmluZDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgY3J5cHRvLnN1YnRsZS5kaWdlc3QoJ1NIQS0yNTYnLCBkYXRhKV07XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBkaWdlc3QgPSBuZXcgKF9hLmFwcGx5KFVpbnQ4QXJyYXksIFt2b2lkIDAsIF9iLnNlbnQoKV0pKSgpO1xuICAgICAgICAgICAgICAgICAgICBpID0gMDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmliYmxlID0gZGlnZXN0W2krK10gJSAxNiB8IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHdhc2hlZE5pYmJsZSA9IGMgPT09ICd4JyA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pYmJsZSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pYmJsZSAmIDB4NyB8IDB4ODtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gd2FzaGVkTmliYmxlLnRvU3RyaW5nKDE2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG4vKmV4cG9ydCBmdW5jdGlvbiBidWYyaGV4KGJ1ZmZlcjogQXJyYXlCdWZmZXIpIHtcbiAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5tYXAuY2FsbChcbiAgICBuZXcgVWludDhBcnJheShidWZmZXIpLFxuICAgICh4OiBudW1iZXIpID0+ICgnMDAnICsgeC50b1N0cmluZygxNikpLnNsaWNlKC0yKSkuam9pbignJyk7XG59Ki9cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVBcnJheShhLCBtYXBwZXIpIHtcbiAgICB2YXIgcmV0dmFsID0gYTtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGEubGVuZ3RoOyBpIDwgbDsgKytpKSB7XG4gICAgICAgIHZhciB0ID0gYVtpXTtcbiAgICAgICAgdmFyIG1hcHBlZCA9IG1hcHBlcih0KTtcbiAgICAgICAgaWYgKG1hcHBlZCAhPT0gdCkge1xuICAgICAgICAgICAgaWYgKHJldHZhbCA9PT0gYSlcbiAgICAgICAgICAgICAgICByZXR2YWwgPSBhLnNsaWNlKCk7XG4gICAgICAgICAgICByZXR2YWxbaV0gPSBtYXBwZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJldHZhbDtcbn1cbi8qXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlQXJyYXk8VD4oYTogVFtdLCBtYXBwZXI6ICh0OiBUKSA9PiBUIHwgZmFsc2UpOiBUW10ge1xuICBsZXQgcmV0dmFsID0gYTtcbiAgbGV0IGogPSAwO1xuICBmb3IgKGxldCBpPTAsbD1hLmxlbmd0aDsgaTxsOyArK2ksICsraikge1xuICAgIGNvbnN0IHQgPSBhW2ldO1xuICAgIGNvbnN0IG1hcHBlZCA9IG1hcHBlcih0KTtcbiAgICBpZiAobWFwcGVkID09PSBmYWxzZSkge1xuICAgICAgLy8gTWFwcGVyIHdhbnRzIHRvIGRlbGV0ZSB0aGlzIGRvYy5cbiAgICAgIGlmIChyZXR2YWwgPT09IGEpIHJldHZhbCA9IGEuc2xpY2UoKTtcbiAgICAgIHJldHZhbC5zcGxpY2UoaiwgMSk7XG4gICAgICAtLWo7IC8vIGNvbXBlbnNhdGUgZm9yICsralxuICAgIH0gZWxzZSBpZiAobWFwcGVkICE9PSB0KSB7XG4gICAgICBpZiAocmV0dmFsID09PSBhKSByZXR2YWwgPSBhLnNsaWNlKCk7XG4gICAgICByZXR2YWxbal0gPSBtYXBwZWQ7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXR2YWw7XG59XG4qLyBcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXV0aWxzLmpzLm1hcCIsImltcG9ydCBtaWdyYXRlIGZyb20gJy4vbWlncmF0ZSc7XG5leHBvcnQgdmFyIEtlZE1vZGVsTWlncmF0b3JNaXhpbiA9IGZ1bmN0aW9uIChjbGllbnQpIHtcbiAgICBpZiAoY2xpZW50Ll9fbWlncmF0b3JfbWl4ZWRfaW4pXG4gICAgICAgIHJldHVybjtcbiAgICBjbGllbnQuX19taWdyYXRvcl9taXhlZF9pbiA9IHRydWU7XG4gICAgdmFyIGdldCA9IGNsaWVudC5nZXQ7XG4gICAgdmFyIGxpc3QgPSBjbGllbnQubGlzdDtcbiAgICBjbGllbnQuZ2V0ID0gZnVuY3Rpb24gKHRhYmxlLCBpZCwgb3B0aW9ucykge1xuICAgICAgICB2YXIgaW5jbHVkZSA9IG9wdGlvbnMgJiYgb3B0aW9ucy5pbmNsdWRlO1xuICAgICAgICByZXR1cm4gZ2V0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICBtaWdyYXRlKHJlc3VsdCwgdGFibGUsIGluY2x1ZGUgJiYgaW5jbHVkZS50b1N0cmluZygpLnNwbGl0KCcsJykpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjbGllbnQubGlzdCA9IGZ1bmN0aW9uICh0YWJsZSwgb3B0aW9ucykge1xuICAgICAgICB2YXIgaW5jbHVkZSA9IG9wdGlvbnMgJiYgb3B0aW9ucy5pbmNsdWRlO1xuICAgICAgICByZXR1cm4gbGlzdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgcmVzdWx0LmZvckVhY2goZnVuY3Rpb24gKGRvYykgeyByZXR1cm4gbWlncmF0ZShkb2MsIHRhYmxlLCBpbmNsdWRlICYmIGluY2x1ZGUudG9TdHJpbmcoKS5zcGxpdCgnLCcpKTsgfSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBjbGllbnQ7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwiaW1wb3J0IG1pZ3JhdGVUYXNrIGZyb20gJy4vbWlncmF0ZS10YXNrJztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1pZ3JhdGVDb3Vyc2UoY291cnNlLCBncmFwaHMpIHtcbiAgICBpZiAoIWNvdXJzZS5tb2R1bGVzKVxuICAgICAgICBjb3Vyc2UubW9kdWxlcyA9IFtdO1xuICAgIGNvdXJzZS5tb2R1bGVzLmZvckVhY2goZnVuY3Rpb24gKG1vZHVsZSkge1xuICAgICAgICBpZiAoIW1vZHVsZS5yZXNvdXJjZXMpIHtcbiAgICAgICAgICAgIG1vZHVsZS5yZXNvdXJjZXMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW1vZHVsZS50YXNrSWRzKSB7XG4gICAgICAgICAgICBtb2R1bGUudGFza0lkcyA9IFtdO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgaWYgKCFjb3Vyc2UucmVzcG9uc2libGVUZWFjaGVycykge1xuICAgICAgICBjb3Vyc2UucmVzcG9uc2libGVUZWFjaGVycyA9IFtdO1xuICAgIH1cbiAgICAvLyBFYXJsaWVyIHdyb25nIHNwZWxsaW5nIG9mIHJlc291cmNlc1xuICAgIGlmICgncmVzb3Vyc2VzJyBpbiBjb3Vyc2UgJiYgISgncmVzb3VyY2VzJyBpbiBjb3Vyc2UpKSB7XG4gICAgICAgIGNvdXJzZS5yZXNvdXJjZXMgPSBjb3Vyc2UucmVzb3Vyc2VzO1xuICAgICAgICBkZWxldGUgY291cnNlLnJlc291cnNlcztcbiAgICB9XG4gICAgaWYgKCFjb3Vyc2UucmVzb3VyY2VzKSB7XG4gICAgICAgIGNvdXJzZS5yZXNvdXJjZXMgPSBbXTtcbiAgICB9XG4gICAgaWYgKGdyYXBocykge1xuICAgICAgICBncmFwaHMuZm9yRWFjaChmdW5jdGlvbiAobGFiZWwpIHtcbiAgICAgICAgICAgIHN3aXRjaCAobGFiZWwpIHtcbiAgICAgICAgICAgICAgICBjYXNlICd0YXNrcyc6XG4gICAgICAgICAgICAgICAgICAgIGNvdXJzZS50YXNrcy5mb3JFYWNoKGZ1bmN0aW9uICh0YXNrKSB7IHJldHVybiBtaWdyYXRlVGFzayh0YXNrKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1taWdyYXRlLWNvdXJzZS5qcy5tYXAiLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBtaWdyYXRlVGFzayh0YXNrKSB7XG4gICAgaWYgKCF0YXNrLnJlc291cmNlcylcbiAgICAgICAgdGFzay5yZXNvdXJjZXMgPSBbXTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1pZ3JhdGUtdGFzay5qcy5tYXAiLCJpbXBvcnQgbWlncmF0ZUNvdXJzZSBmcm9tICcuL21pZ3JhdGUtY291cnNlJztcbmltcG9ydCBtaWdyYXRlVGFzayBmcm9tICcuL21pZ3JhdGUtdGFzayc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBtaWdyYXRlKGRvYywgdGFibGUsIGdyYXBocykge1xuICAgIHN3aXRjaCAodGFibGUpIHtcbiAgICAgICAgY2FzZSBcImNvdXJzZXNcIjpcbiAgICAgICAgICAgIG1pZ3JhdGVDb3Vyc2UoZG9jLCBncmFwaHMpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJ0YXNrc1wiOlxuICAgICAgICAgICAgbWlncmF0ZVRhc2soZG9jKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1pZ3JhdGUuanMubWFwIiwiaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tIFwiLi9vYnNlcnZhYmxlXCI7XG5pbXBvcnQgeyBpbml0TWFwTWV0aG9kIH0gZnJvbSBcIi4vbWFwXCI7XG5pbXBvcnQgeyBWYWx1ZSB9IGZyb20gXCIuL3ZhbHVlXCI7XG5pbXBvcnQgeyBFbWl0dGVyIH0gZnJvbSBcIi4vZW1pdHRlclwiO1xudmFyIENvbGxlY3Rpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoQ29sbGVjdGlvbiwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBDb2xsZWN0aW9uKHN1YnNjcmliZSkge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgc3Vic2NyaWJlKSB8fCB0aGlzO1xuICAgIH1cbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5fbWFwID0gZnVuY3Rpb24gKG1hcHBlcikge1xuICAgICAgICB0aHJvdyBcIm1peGVkaW5cIjtcbiAgICB9O1xuICAgIENvbGxlY3Rpb24uZnJvbSA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICAgIGlmICh4LnN1YnNjcmliZSlcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ29sbGVjdGlvbihmdW5jdGlvbiAocykgeyByZXR1cm4geC5zdWJzY3JpYmUocyk7IH0pO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh4KSkge1xuICAgICAgICAgICAgdmFyIGVtaXR0ZXJfMSA9IG5ldyBFbWl0dGVyKHgpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xsZWN0aW9uKGZ1bmN0aW9uIChzKSB7IHJldHVybiBlbWl0dGVyXzEuc3Vic2NyaWJlKHMpOyB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJPYnNlcnZhYmxlQ29sbGVjdGlvbi5mcm9tKCkgY2FuIG9ubHkgdGFrZSBhcnJheXMgb3Igb2JzZXJ2YWJsZXNcIik7XG4gICAgfTtcbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5tYXAgPSBmdW5jdGlvbiAobWFwcGVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9tYXAoZnVuY3Rpb24gKGl0ZW1zKSB7IHJldHVybiBpdGVtcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuIG1hcHBlcihpdGVtKTsgfSk7IH0pO1xuICAgIH07XG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuZmxhdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hcChmdW5jdGlvbiAoaXRlbXMpIHsgcmV0dXJuIFtdLmNvbmNhdC5hcHBseShbXSwgaXRlbXMpOyB9KTtcbiAgICB9O1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmZpbHRlciA9IGZ1bmN0aW9uIChmaWx0ZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hcChmdW5jdGlvbiAoaXRlbXMpIHsgcmV0dXJuIGl0ZW1zLmZpbHRlcihmaWx0ZXIpOyB9KTtcbiAgICB9O1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmNvbmNhdCA9IGZ1bmN0aW9uIChvdGhlcikge1xuICAgICAgICByZXR1cm4gQ29sbGVjdGlvbi5mcm9tKHRoaXMudG9WYWx1ZSgpLmNvbWJpbmVMYXRlc3Qob3RoZXIpLm1hcChmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHZhciBtZSA9IF9hWzBdLCBvdGhlciA9IF9hWzFdO1xuICAgICAgICAgICAgcmV0dXJuIG1lLmNvbmNhdChvdGhlcik7XG4gICAgICAgIH0pKTtcbiAgICB9O1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLm9yZGVyQnkgPSBmdW5jdGlvbiAocHJvcCkge1xuICAgICAgICByZXR1cm4gdGhpcy50b1ZhbHVlKCkubWFwKGZ1bmN0aW9uIChhcnJheSkgeyByZXR1cm4gYXJyYXkuc2xpY2UoKS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICB2YXIgYVByb3AgPSBhICYmIGFbcHJvcF07XG4gICAgICAgICAgICB2YXIgYlByb3AgPSBiICYmIGJbcHJvcF07XG4gICAgICAgICAgICByZXR1cm4gYVByb3AgPiBiUHJvcCA/IDEgOiBhUHJvcCA8IGJQcm9wID8gLTEgOiAwO1xuICAgICAgICB9KTsgfSkudG9Db2xsZWN0aW9uKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4OyB9KTtcbiAgICB9O1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLnRvVmFsdWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiBuZXcgVmFsdWUoZnVuY3Rpb24gKHMpIHsgcmV0dXJuIF90aGlzLnN1YnNjcmliZShzKTsgfSk7XG4gICAgfTtcbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5ncm91cEJ5ID0gZnVuY3Rpb24gKHByb3ApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9WYWx1ZSgpLm1hcChmdW5jdGlvbiAoaXRlbXMpIHtcbiAgICAgICAgICAgIHZhciBydiA9IHt9O1xuICAgICAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgICAgIHZhciBsaXN0ID0gcnZbaXRlbVtwcm9wXV0gfHwgKHJ2W2l0ZW1bcHJvcF1dID0gW10pO1xuICAgICAgICAgICAgICAgIGxpc3QucHVzaChpdGVtKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHJ2O1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmZpcnN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50b1ZhbHVlKCkubWFwKGZ1bmN0aW9uIChhcnIpIHsgcmV0dXJuIGFyclswXTsgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gQ29sbGVjdGlvbjtcbn0oT2JzZXJ2YWJsZSkpO1xuZXhwb3J0IHsgQ29sbGVjdGlvbiB9O1xuQ29sbGVjdGlvbi5wcm90b3R5cGUuX21hcCA9IGluaXRNYXBNZXRob2QoQ29sbGVjdGlvbik7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb2xsZWN0aW9uLmpzLm1hcCIsImltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBWYWx1ZSB9IGZyb20gXCIuL3ZhbHVlXCI7XG52YXIgRW1pdHRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhFbWl0dGVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEVtaXR0ZXIoaW5pdGlhbFZhbHVlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IHtcbiAgICAgICAgICAgICAgICB1bnN1YnNjcmliZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuc3Vic2NyaWJlcnMgPSBfdGhpcy5zdWJzY3JpYmVycy5maWx0ZXIoZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzID0gX2FbMF07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzICE9PSBvYnNlcnZlcjtcbiAgICAgICAgICAgICAgICB9KTsgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBfdGhpcy5zdWJzY3JpYmVycy5wdXNoKFtvYnNlcnZlciwgc3Vic2NyaXB0aW9uXSk7XG4gICAgICAgICAgICBpZiAoX3RoaXMuZXJyb3IpXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIobnVsbCwgX3RoaXMuZXJyb3IsIHN1YnNjcmlwdGlvbik7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIoX3RoaXMudmFsdWUsIHVuZGVmaW5lZCwgc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnN1YnNjcmliZXJzID0gW107XG4gICAgICAgIF90aGlzLnZhbHVlID0gaW5pdGlhbFZhbHVlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIEVtaXR0ZXIucHJvdG90eXBlLmRpc3BhdGNoID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5lcnJvciA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fZGlzcGF0Y2goKTtcbiAgICB9O1xuICAgIEVtaXR0ZXIucHJvdG90eXBlLmRpc3BhdGNoRXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xuICAgICAgICB0aGlzLl9kaXNwYXRjaCgpO1xuICAgIH07XG4gICAgRW1pdHRlci5wcm90b3R5cGUuX2Rpc3BhdGNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLnN1YnNjcmliZXJzLmZvckVhY2goZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICB2YXIgb2JzZXJ2ZXIgPSBfYVswXSwgc3Vic2NyaXB0aW9uID0gX2FbMV07XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIG9ic2VydmVyKF90aGlzLnZhbHVlLCBfdGhpcy5lcnJvciwgc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBvYnNlcnZlcihudWxsLCBlcnIsIHN1YnNjcmlwdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIEVtaXR0ZXI7XG59KFZhbHVlKSk7XG5leHBvcnQgeyBFbWl0dGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lbWl0dGVyLmpzLm1hcCIsInZhciBzdGFjayA9IFtdO1xudmFyIGN1cnJlbnRGaWJlciA9IG51bGw7XG52YXIgcHJvdmlkZXJzID0gW2Z1bmN0aW9uICgpIHsgcmV0dXJuIGN1cnJlbnRGaWJlcjsgfV07XG5mdW5jdGlvbiBwdXNoRmliZXIoZmliZXIpIHtcbiAgICBzdGFjay5wdXNoKGN1cnJlbnRGaWJlcik7XG4gICAgY3VycmVudEZpYmVyID0gZmliZXI7XG59XG5mdW5jdGlvbiBwb3BGaWJlcigpIHtcbiAgICBjdXJyZW50RmliZXIgPSBzdGFjay5wb3AoKTtcbn1cbmV4cG9ydCB2YXIgRmliZXJDb250ZXh0ID0ge1xuICAgIGdldCBjdXJyZW50KCkgeyByZXR1cm4gY3VycmVudEZpYmVyOyB9LFxuICAgIC8qcnVuOiBmdW5jdGlvbiByZXJ1bjxSPihmaWJlcjogRmliZXIsIGZuOiAoKT0+Uik6IFIgfCBQcm9taXNlPFI+IHtcbiAgICAgIHB1c2hGaWJlcihmaWJlcik7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGZuKCkpO1xuICAgICAgfSBjYXRjaCAocCkge1xuICAgICAgICBpZiAocCAmJiB0eXBlb2YgcC50aGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgcmV0dXJuIHAudGhlbigoKT0+cmVydW4oZmliZXIsIGZuKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHApO1xuICAgICAgICB9XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBwb3BGaWJlcigpO1xuICAgICAgfVxuICAgIH0sKi9cbiAgICBhZGRQcm92aWRlcjogZnVuY3Rpb24gKGdldEN1cnJlbnRGaWJlcikge1xuICAgICAgICBwcm92aWRlcnMucHVzaChnZXRDdXJyZW50RmliZXIpO1xuICAgICAgICBzZXRDdXJyZW50R2V0dGVyRnJvbVByb3ZpZGVycygpO1xuICAgIH0sXG4gICAgcmVtb3ZlUHJvdmlkZXI6IGZ1bmN0aW9uIChnZXRDdXJyZW50RmliZXIpIHtcbiAgICAgICAgcHJvdmlkZXJzID0gcHJvdmlkZXJzLmZpbHRlcihmdW5jdGlvbiAocCkgeyByZXR1cm4gcCAhPT0gZ2V0Q3VycmVudEZpYmVyOyB9KTtcbiAgICAgICAgc2V0Q3VycmVudEdldHRlckZyb21Qcm92aWRlcnMoKTtcbiAgICB9XG59O1xuZnVuY3Rpb24gc2V0Q3VycmVudEdldHRlckZyb21Qcm92aWRlcnMoKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpYmVyQ29udGV4dCwgXCJjdXJyZW50XCIsIHtcbiAgICAgICAgZ2V0OiBwcm92aWRlcnMucmVkdWNlKGZ1bmN0aW9uIChwLCBjKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiBwKCkgfHwgYygpOyB9OyB9KSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAoKSB7IHRocm93IG5ldyBFcnJvcihcIlVzZSBGaWJlckNvbnRleHQucHVzaCgpIHRvIGNoYW5nZSBjdXJyZW50IGZpYmVyXCIpOyB9XG4gICAgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1maWJlci1jb250ZXh0LmpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBpbml0TWFwTWV0aG9kKGN0b3IpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG1hcHBlcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gbmV3IGN0b3IoZnVuY3Rpb24gKG9ic2VydmVyKSB7IHJldHVybiBfdGhpcy5zdWJzY3JpYmUoZnVuY3Rpb24gKHZhbHVlLCBlcnJvciwgc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIobnVsbCwgZXJyb3IsIHN1YnNjcmlwdGlvbik7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIobWFwcGVyKHZhbHVlKSwgZXJyb3IsIHN1YnNjcmlwdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIobnVsbCwgZXJyLCBzdWJzY3JpcHRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgfSk7IH0pO1xuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYXAuanMubWFwIiwidmFyIE9ic2VydmFibGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLy9zdGF0aWMgZ2V0IFtTeW1ib2wuc3BlY2llc10oKSB7IHJldHVybiB0aGlzOyB9XG4gICAgZnVuY3Rpb24gT2JzZXJ2YWJsZShfc3Vic2NyaWJlKSB7XG4gICAgICAgIHRoaXMuX3N1YnNjcmliZSA9IF9zdWJzY3JpYmU7XG4gICAgfVxuICAgIE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N1YnNjcmliZShmdW5jdGlvbiAoaXRlbXMsIGVycm9yLCBzdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlcihpdGVtcywgZXJyb3IsIHN1YnNjcmlwdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIobnVsbCwgZXJyLCBzdWJzY3JpcHRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgb2JzZXJ2ZXIobnVsbCwgZXJyb3IsIHsgdW5zdWJzY3JpYmU6IGZ1bmN0aW9uICgpIHsgfSB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIE9ic2VydmFibGU7XG59KCkpO1xuZXhwb3J0IHsgT2JzZXJ2YWJsZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b2JzZXJ2YWJsZS5qcy5tYXAiLCJpbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gXCIuL29ic2VydmFibGVcIjtcbmltcG9ydCB7IGluaXRNYXBNZXRob2QgfSBmcm9tIFwiLi9tYXBcIjtcbmltcG9ydCB7IENvbGxlY3Rpb24gfSBmcm9tIFwiLi9jb2xsZWN0aW9uXCI7XG5pbXBvcnQgeyBGaWJlckNvbnRleHQgfSBmcm9tICcuL2ZpYmVyLWNvbnRleHQnO1xudmFyIFZhbHVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHRzbGliXzEuX19leHRlbmRzKFZhbHVlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFZhbHVlKHN1YnNjcmliZSkge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgc3Vic2NyaWJlKSB8fCB0aGlzO1xuICAgIH1cbiAgICBWYWx1ZS5mcm9tID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgaWYgKHguc3Vic2NyaWJlKVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBWYWx1ZShmdW5jdGlvbiAocykgeyByZXR1cm4geC5zdWJzY3JpYmUocyk7IH0pO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJWYWx1ZS5mcm9tKCkgY2FuIG9ubHkgdGFrZSBvYnNlcnZhYmxlc1wiKTtcbiAgICB9O1xuICAgIFZhbHVlLnByb3RvdHlwZS5yZWFkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcmVzb2x2ZWQgPSBmYWxzZSwgcmVzdWx0LCBlcnIsIG5vdGlmeTtcbiAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IHRoaXMuc3Vic2NyaWJlKGZ1bmN0aW9uICh2YWx1ZSwgZXJyb3IsIHN1YnNjaXB0aW9uKSB7XG4gICAgICAgICAgICByZXNvbHZlZCA9IHRydWU7XG4gICAgICAgICAgICByZXN1bHQgPSB2YWx1ZTtcbiAgICAgICAgICAgIGVyciA9IGVycm9yO1xuICAgICAgICAgICAgaWYgKGVycm9yICYmIG5vdGlmeSlcbiAgICAgICAgICAgICAgICBub3RpZnkobnVsbCwgZXJyb3IsIHN1YnNjaXB0aW9uKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKG5vdGlmeSlcbiAgICAgICAgICAgICAgICBub3RpZnkodmFsdWUsIG51bGwsIHN1YnNjaXB0aW9uKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChyZXNvbHZlZCkge1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRGaWJlciA9IEZpYmVyQ29udGV4dC5jdXJyZW50O1xuICAgICAgICAgICAgaWYgKCFjdXJyZW50RmliZXIpIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEZpYmVyIENvbnRleHRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbnMgPSBjdXJyZW50RmliZXIuc3Vic2NyaXB0aW9ucywgb2JzZXJ2ZXIgPSBjdXJyZW50RmliZXIub2JzZXJ2ZXI7XG4gICAgICAgICAgICBzdWJzY3JpcHRpb25zLnB1c2goc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgICAgIG5vdGlmeSA9IG9ic2VydmVyO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICBub3RpZnkgPSBmdW5jdGlvbiAodmFsdWUsIGVycm9yLCBzdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHZhbHVlKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgVmFsdWUucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICBfdGhpcy5zdWJzY3JpYmUoZnVuY3Rpb24gKHZhbHVlLCBlcnJvciwgc3Vic2NpcHRpb24pIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHZhbHVlKTtcbiAgICAgICAgICAgICAgICBzdWJzY2lwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgVmFsdWUucHJvdG90eXBlLmZpbHRlciA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICByZXR1cm4gbmV3IFZhbHVlKGZ1bmN0aW9uIChvYnNlcnZlcikgeyByZXR1cm4gX3RoaXMuc3Vic2NyaWJlKGZ1bmN0aW9uICh2YWx1ZSwgZXJyb3IsIHN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgaWYgKGVycm9yKVxuICAgICAgICAgICAgICAgIG9ic2VydmVyKG51bGwsIGVycm9yLCBzdWJzY3JpcHRpb24pO1xuICAgICAgICAgICAgZWxzZSBpZiAoZm4odmFsdWUpKVxuICAgICAgICAgICAgICAgIG9ic2VydmVyKHZhbHVlLCBlcnJvciwgc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgfSk7IH0pO1xuICAgIH07XG4gICAgVmFsdWUucHJvdG90eXBlLmxvZyA9IGZ1bmN0aW9uIChwcmVmaXgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhwcmVmaXgsIHgpO1xuICAgICAgICAgICAgcmV0dXJuIHg7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgVmFsdWUucHJvdG90eXBlLnRvQ29sbGVjdGlvbiA9IGZ1bmN0aW9uIChtYXBwZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIG5ldyBDb2xsZWN0aW9uKGZ1bmN0aW9uIChzKSB7IHJldHVybiBfdGhpcy5tYXAobWFwcGVyKS5zdWJzY3JpYmUocyk7IH0pO1xuICAgIH07XG4gICAgVmFsdWUucHJvdG90eXBlLmNvbWJpbmVMYXRlc3QgPSBmdW5jdGlvbiAob3RoZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIG5ldyBWYWx1ZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZXMgPSBbbnVsbCwgbnVsbF07XG4gICAgICAgICAgICB2YXIgbXlTdWJzY3JpcHRpb24sIG90aGVyU3Vic2NyaXB0aW9uO1xuICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IHtcbiAgICAgICAgICAgICAgICB1bnN1YnNjcmliZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBteVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgICAgICBvdGhlclN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBteVN1YnNjcmlwdGlvbiA9IF90aGlzLnN1YnNjcmliZShmdW5jdGlvbiAoaXRlbXMsIGVycm9yLCBzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIobnVsbCwgZXJyb3IsIHN1YnNjcmlwdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhbHVlc1swXSA9IGl0ZW1zO1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZXNbMV0gIT09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVyKHZhbHVlcywgbnVsbCwgc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgb3RoZXJTdWJzY3JpcHRpb24gPSBvdGhlci5zdWJzY3JpYmUoZnVuY3Rpb24gKHZhbHVlLCBlcnJvciwgcykge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVyKG51bGwsIGVycm9yLCBzdWJzY3JpcHRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YWx1ZXNbMV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWVzWzBdICE9PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlcih2YWx1ZXMsIG51bGwsIHN1YnNjcmlwdGlvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgVmFsdWUucHJvdG90eXBlLnN3aXRjaE1hcCA9IGZ1bmN0aW9uIChtYXBwZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcmV0dXJuIG5ldyBWYWx1ZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgICAgIHZhciBtYXBwZWRTdWJzY3JpcHRpb24gPSBudWxsO1xuICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IG51bGw7XG4gICAgICAgICAgICB2YXIgcmV0dXJuZWRTdWJzY3JpcHRpb24gPSB7XG4gICAgICAgICAgICAgICAgdW5zdWJzY3JpYmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXBwZWRTdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcHBlZFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFwcGVkU3Vic2NyaXB0aW9uID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBzdWJzY3JpcHRpb24gPSBfdGhpcy5zdWJzY3JpYmUoZnVuY3Rpb24gKGl0ZW0sIGVycm9yLCBzKSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uID0gcztcbiAgICAgICAgICAgICAgICBpZiAobWFwcGVkU3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hcHBlZFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgICAgICBtYXBwZWRTdWJzY3JpcHRpb24gPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVyKG51bGwsIGVycm9yLCByZXR1cm5lZFN1YnNjcmlwdGlvbik7XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JzZXJ2YWJsZU9yVmFsdWUgPSBtYXBwZXIoaXRlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JzZXJ2YWJsZU9yVmFsdWUgJiYgdHlwZW9mIG9ic2VydmFibGVPclZhbHVlLnN1YnNjcmliZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcHBlZFN1YnNjcmlwdGlvbiA9IG9ic2VydmFibGVPclZhbHVlLnN1YnNjcmliZShmdW5jdGlvbiAodmFsdWUsIGVycm9yLCBzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcHBlZFN1YnNjcmlwdGlvbiA9IHM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyKHZhbHVlLCBlcnJvciwgcmV0dXJuZWRTdWJzY3JpcHRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIob2JzZXJ2YWJsZU9yVmFsdWUsIG51bGwsIHN1YnNjcmlwdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlcihudWxsLCBlcnJvciwgc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHJldHVybmVkU3Vic2NyaXB0aW9uO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBWYWx1ZTtcbn0oT2JzZXJ2YWJsZSkpO1xuZXhwb3J0IHsgVmFsdWUgfTtcblZhbHVlLnByb3RvdHlwZS5tYXAgPSBpbml0TWFwTWV0aG9kKFZhbHVlKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZhbHVlLmpzLm1hcCIsInZhciBtYXAgPSB7XG5cdFwiLi9lbi1TR1wiOiBcIi4vbm9kZV9tb2R1bGVzL21vbWVudC9sb2NhbGUvZW4tU0cuanNcIixcblx0XCIuL2VuLVNHLmpzXCI6IFwiLi9ub2RlX21vZHVsZXMvbW9tZW50L2xvY2FsZS9lbi1TRy5qc1wiLFxuXHRcIi4vZW4tYXVcIjogXCIuL25vZGVfbW9kdWxlcy9tb21lbnQvbG9jYWxlL2VuLWF1LmpzXCIsXG5cdFwiLi9lbi1hdS5qc1wiOiBcIi4vbm9kZV9tb2R1bGVzL21vbWVudC9sb2NhbGUvZW4tYXUuanNcIixcblx0XCIuL2VuLWNhXCI6IFwiLi9ub2RlX21vZHVsZXMvbW9tZW50L2xvY2FsZS9lbi1jYS5qc1wiLFxuXHRcIi4vZW4tY2EuanNcIjogXCIuL25vZGVfbW9kdWxlcy9tb21lbnQvbG9jYWxlL2VuLWNhLmpzXCIsXG5cdFwiLi9lbi1nYlwiOiBcIi4vbm9kZV9tb2R1bGVzL21vbWVudC9sb2NhbGUvZW4tZ2IuanNcIixcblx0XCIuL2VuLWdiLmpzXCI6IFwiLi9ub2RlX21vZHVsZXMvbW9tZW50L2xvY2FsZS9lbi1nYi5qc1wiLFxuXHRcIi4vZW4taWVcIjogXCIuL25vZGVfbW9kdWxlcy9tb21lbnQvbG9jYWxlL2VuLWllLmpzXCIsXG5cdFwiLi9lbi1pZS5qc1wiOiBcIi4vbm9kZV9tb2R1bGVzL21vbWVudC9sb2NhbGUvZW4taWUuanNcIixcblx0XCIuL2VuLWlsXCI6IFwiLi9ub2RlX21vZHVsZXMvbW9tZW50L2xvY2FsZS9lbi1pbC5qc1wiLFxuXHRcIi4vZW4taWwuanNcIjogXCIuL25vZGVfbW9kdWxlcy9tb21lbnQvbG9jYWxlL2VuLWlsLmpzXCIsXG5cdFwiLi9lbi1uelwiOiBcIi4vbm9kZV9tb2R1bGVzL21vbWVudC9sb2NhbGUvZW4tbnouanNcIixcblx0XCIuL2VuLW56LmpzXCI6IFwiLi9ub2RlX21vZHVsZXMvbW9tZW50L2xvY2FsZS9lbi1uei5qc1wiLFxuXHRcIi4vc3ZcIjogXCIuL25vZGVfbW9kdWxlcy9tb21lbnQvbG9jYWxlL3N2LmpzXCIsXG5cdFwiLi9zdi5qc1wiOiBcIi4vbm9kZV9tb2R1bGVzL21vbWVudC9sb2NhbGUvc3YuanNcIlxufTtcblxuXG5mdW5jdGlvbiB3ZWJwYWNrQ29udGV4dChyZXEpIHtcblx0dmFyIGlkID0gd2VicGFja0NvbnRleHRSZXNvbHZlKHJlcSk7XG5cdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKGlkKTtcbn1cbmZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0UmVzb2x2ZShyZXEpIHtcblx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhtYXAsIHJlcSkpIHtcblx0XHR2YXIgZSA9IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIgKyByZXEgKyBcIidcIik7XG5cdFx0ZS5jb2RlID0gJ01PRFVMRV9OT1RfRk9VTkQnO1xuXHRcdHRocm93IGU7XG5cdH1cblx0cmV0dXJuIG1hcFtyZXFdO1xufVxud2VicGFja0NvbnRleHQua2V5cyA9IGZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0S2V5cygpIHtcblx0cmV0dXJuIE9iamVjdC5rZXlzKG1hcCk7XG59O1xud2VicGFja0NvbnRleHQucmVzb2x2ZSA9IHdlYnBhY2tDb250ZXh0UmVzb2x2ZTtcbm1vZHVsZS5leHBvcnRzID0gd2VicGFja0NvbnRleHQ7XG53ZWJwYWNrQ29udGV4dC5pZCA9IFwiLi9ub2RlX21vZHVsZXMvbW9tZW50L2xvY2FsZSBzeW5jIHJlY3Vyc2l2ZSBzdnxlblwiOyIsImltcG9ydCB7IFVzZXIgfSBmcm9tIFwiLi4vY29udHJhY3RzL2tlZC1tb2RlbHNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0VXNlckNsYWltcyAodXNlcjogVXNlcikge1xuICByZXR1cm4gW3tcbiAgICB0eXBlOiBcImVtYWlsXCIsXG4gICAgdmFsdWU6IHVzZXIubWFpbFxuICB9LHtcbiAgICB0eXBlOiBcInNjaG9vbFwiLFxuICAgIHZhbHVlOiB1c2VyLnNjaG9vbFxuICB9XS5jb25jYXQodXNlci5yb2xlcy5tYXAocm9sZSA9PiAoe1xuICAgIHR5cGU6IFwicm9sZVwiLFxuICAgIHZhbHVlOiByb2xlXG4gIH0pKSkuY29uY2F0KHVzZXIucm9sZXMubWFwKHJvbGUgPT4gKHtcbiAgICB0eXBlOiBcInNjaG9vbFJvbGVcIixcbiAgICB2YWx1ZTogdXNlci5zY2hvb2wgKyBcIi9cIiArIHJvbGVcbiAgfSkpKTtcbn1cbiIsImltcG9ydCB7IEFjY2Vzc0NsYWltLCBEb2N1bWVudEFjY2VzcywgaGFzQWNjZXNzIGFzIF9oYXNBY2Nlc3MsIEFjY2Vzc1JpZ2h0IH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnQnO1xuaW1wb3J0IHsgRG9jdW1lbnQgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XG5pbXBvcnQgZ2V0VXNlckNsYWltcyBmcm9tICcuL2dldC11c2VyLWNsYWltcyc7XG5pbXBvcnQgeyBwYXJzZVF1ZXJ5U3RyaW5nLCBnZW5lcmF0ZVF1ZXJ5U3RyaW5nIH0gZnJvbSBcIi4uL3V0aWxzL3F1ZXJ5LXN0cmluZ1wiO1xuaW1wb3J0IHsgVXNlciB9IGZyb20gJy4uL2NvbnRyYWN0cy9rZWQtbW9kZWxzJztcbmV4cG9ydCB7IGdldFVzZXJDbGFpbXMgfTtcblxuZXhwb3J0IGNvbnN0IElNUEVSU09OQVRJT05fUVVFUllfUEFSQU1TID0gW1xuICBcInVzZXJcIixcbiAgXCJyb2xlXCIsXG4gIFwic2Nob29sXCIsXG4gIFwiZGVidWdcIixcbiAgXCJ0ZXN0VmVyc2lvblwiLFxuICBcInRlc3R2ZXJzaW9uXCIsXG4gIFwiZmVhdHVyZXNcIixcbiAgXCJzY2hvb2xUeXBlXCIsXG4gIFwic2Nob29sdHlwZVwiXTtcblxuZXhwb3J0IGZ1bmN0aW9uIGhhc0FjY2Vzcyh1c2VyOiBVc2VyLCBkb2M6IERvY3VtZW50LCByZXF1ZXN0ZWRSaWdodDogQWNjZXNzUmlnaHQpIHtcbiAgdmFyIGNsYWltcyA9IGdldFVzZXJDbGFpbXModXNlcik7XG4gIGlmIChyZXF1ZXN0ZWRSaWdodCAhPT0gJ1InICYmIHVzZXIudHV0b3JGb3IpIHtcbiAgICBjbGFpbXMgPSBjbGFpbXMuZmlsdGVyKGNsYWltID0+IGNsYWltLnR5cGUgIT09ICdlbWFpbCcpO1xuICB9XG4gIHZhciByZXN1bHQgPSBfaGFzQWNjZXNzKERvY3VtZW50QWNjZXNzLmZyb21TdHJpbmdBcnJheShkb2MuYWNsIHx8IFtdKSwgY2xhaW1zLCByZXF1ZXN0ZWRSaWdodCk7XG4gIC8vY29uc29sZS5sb2coYEhhcyAke3JlcXVlc3RlZFJpZ2h0fSBhY2Nlc3MgdG8gJHtkb2MubmFtZX0vJHtkb2MuaWR9OiAke3Jlc3VsdH1gKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhc1JlYWRBY2Nlc3ModXNlcjogVXNlciwgZG9jOiBEb2N1bWVudCkge1xuICByZXR1cm4gaGFzQWNjZXNzKHVzZXIsIGRvYywgJ1InKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhc1dyaXRlQWNjZXNzKHVzZXI6IFVzZXIsIGRvYzogRG9jdW1lbnQpIHtcbiAgcmV0dXJuIGhhc0FjY2Vzcyh1c2VyLCBkb2MsICdXJyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYXNTaGFyZUFjY2Vzcyh1c2VyOiBVc2VyLCBkb2M6IERvY3VtZW50KSB7XG4gIHJldHVybiBoYXNBY2Nlc3ModXNlciwgZG9jLCAnUycpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNUZWFjaGVyQXRTY2hvb2wodXNlcjogVXNlciwgc2Nob29sOiBzdHJpbmcpIHtcbiAgY29uc3QgaXNUZWFjaGVyID0gdXNlci5yb2xlcy5zb21lKHJvbGUgPT4gcm9sZSA9PT0gJ0VNUExPWUVFJyB8fCByb2xlID09PSAnQURNSU4nKTtcbiAgY29uc3QgYmVsb25nc1RvU2Nob29sID0gKHNjaG9vbHx8XCJcIikudG9Mb3dlckNhc2UoKSA9PT0gdXNlci5zY2hvb2wudG9Mb3dlckNhc2UoKTtcbiAgcmV0dXJuIChpc1RlYWNoZXIgJiYgYmVsb25nc1RvU2Nob29sKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzQWRtaW5PclRlYWNoZXJBdFNjaG9vbCh1c2VyOiBVc2VyLCBzY2hvb2w6IHN0cmluZykge1xuICByZXR1cm4gdXNlci5yb2xlcy5pbmNsdWRlcyhcIkFETUlOXCIpIHx8IGlzVGVhY2hlckF0U2Nob29sKHVzZXIsIHNjaG9vbCk7XG59XG5cbmV4cG9ydCBjb25zdCBpbXBlcnNvbmF0aW9uRW52ID0ge1xuICBhY3RBcyAob3B0aW9uczoge3JvbGUsIHNjaG9vbCwgdXJsP30pIHtcbiAgICBjb25zdCB7cm9sZSwgc2Nob29sLCB1cmx9ID0gb3B0aW9ucztcbiAgICBjb25zdCBjdXJyZW50UXVlcnkgPSBwYXJzZVF1ZXJ5U3RyaW5nKGxvY2F0aW9uLnNlYXJjaCk7XG4gICAgY29uc3QgbmV3UXVlcnkgPSB7Li4uY3VycmVudFF1ZXJ5LCByb2xlLCBzY2hvb2x9O1xuICAgIGNvbnN0IG5ld1F1ZXJ5U3RyaW5nID0gZ2VuZXJhdGVRdWVyeVN0cmluZyhuZXdRdWVyeSk7XG4gICAgaWYgKHVybCkge1xuICAgICAgbG9jYXRpb24uaHJlZiA9IGAke3VybH0ke25ld1F1ZXJ5U3RyaW5nfWA7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvY2F0aW9uLmhhc2ggPSBcIiNcIjtcbiAgICAgIGxvY2F0aW9uLnNlYXJjaCA9IG5ld1F1ZXJ5U3RyaW5nO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYWN0QXMob3B0aW9uczoge3JvbGUsIHNjaG9vbCwgdXJsP30pIHtcbiAgaW1wZXJzb25hdGlvbkVudi5hY3RBcyhvcHRpb25zKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHByZXNlcnZlSW1wZXJzb25hdGlvblF1ZXJ5ICh1cmw6IHN0cmluZywgcXVlcnk6IHtbbmFtZTogc3RyaW5nXSA6IHN0cmluZ30pIHtcbiAgY29uc3QgY3VycmVudFF1ZXJ5ID0gcGFyc2VRdWVyeVN0cmluZyhsb2NhdGlvbi5zZWFyY2gpO1xuICBjb25zdCBwcmVzZXJ2ZWRRdWVyeSA9IHt9O1xuICBmb3IgKGNvbnN0IHBhcmFtIG9mIElNUEVSU09OQVRJT05fUVVFUllfUEFSQU1TKSB7XG4gICAgaWYgKGN1cnJlbnRRdWVyeVtwYXJhbV0pIHByZXNlcnZlZFF1ZXJ5W3BhcmFtXSA9IGN1cnJlbnRRdWVyeVtwYXJhbV07XG4gIH1cbiAgY29uc3QgbmV3UXVlcnlTdHJpbmcgPSBnZW5lcmF0ZVF1ZXJ5U3RyaW5nKHsuLi5wcmVzZXJ2ZWRRdWVyeSwgLi4ucXVlcnl9KTtcbiAgY29uc3QgcEhhc2ggPSB1cmwuaW5kZXhPZignIycpO1xuICByZXR1cm4gcEhhc2ggPj0gMCA/XG4gICAgYCR7dXJsLnN1YnN0cigwLHBIYXNoKX0ke25ld1F1ZXJ5U3RyaW5nfSR7dXJsLnN1YnN0cihwSGFzaCl9YCA6XG4gICAgYCR7dXJsfSR7bmV3UXVlcnlTdHJpbmd9YDtcbn1cbiIsImltcG9ydCB7IEVEU0NvdXJzZSwgRURTQXNzZXNzbWVudCwgRURTU3R1ZHlQbGFuLCBFRFNTdHVkZW50RnV0dXJlQWJpbGl0eSwgRURTU3R1ZGVudCwgRURTVHVpdGlvbkdyb3VwLCBFRFNUdWl0aW9uU3R1ZGVudCwgRURTVGVhY2hlciwgTW9ja0VEU0FjYWRlbWljWWVhciwgTW9ja0VEU0RhdGVSYW5nZSB9IGZyb20gJy4uL2NvbnRyYWN0cy9lZHMnO1xuaW1wb3J0IHsgUmVzdENsaWVudCB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcbmltcG9ydCB7IElzb21vcnBoaWNFbnYsIEJlYXJlclByb3ZpZGVyLCBIdHRwRXJyb3IgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XG5pbXBvcnQgeyBTY2hvb2xNb21lbnQsIGdldFRlcm1TdGFyRW5kRGF0ZSB9IGZyb20gJy4uL3V0aWxzL3NjaG9vbC1tb21lbnQnO1xuaW1wb3J0IHsgU2Nob29sVGVybSB9IGZyb20gJy4uL3V0aWxzL3NjaG9vbC10ZXJtJztcbmltcG9ydCB7IGRhdGVUaW1lUmV2aXZlciwgTCB9IGZyb20gJy4uL3V0aWxzL3V0aWxzJztcbmltcG9ydCBtb2NrSnNvbkZpbGUgZnJvbSAnLi9tb2NrL21vY2stZWRzLWRhdGEuanNvbic7XG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XG5pbXBvcnQgeyBTdXNwZW5zZUJhc2VkQVBJLCBtYWtlU3VzcGVuc2VBcGkgfSBmcm9tICcuLi91dGlscy9tYWtlLXN1c3BlbnNlLWFwaSc7XG5cbmV4cG9ydCBjbGFzcyBFZHNDbGllbnQge1xuICBodHRwOiBSZXN0Q2xpZW50O1xuICB1c2VyRW1haWxHZXR0ZXI6ICgpPT5zdHJpbmc7XG4gIHN1c3BlbnNlOiBTdXNwZW5zZUJhc2VkQVBJPEVkc0NsaWVudD47XG5cbiAgY29uc3RydWN0b3IgKFxuICAgIGlzb21vcnBoaWM6IElzb21vcnBoaWNFbnYsXG4gICAgYmFzZVVybDogc3RyaW5nLFxuICAgIGJlYXJlclByb3ZpZGVyOiBCZWFyZXJQcm92aWRlcixcbiAgICB1c2VyRW1haWxHZXR0ZXI6ICgpPT5zdHJpbmdcbiAgKSB7XG4gICAgdGhpcy5odHRwID0gbmV3IFJlc3RDbGllbnQgKGlzb21vcnBoaWMsIGJhc2VVcmwsIHtiZWFyZXJQcm92aWRlcn0pO1xuICAgIHRoaXMudXNlckVtYWlsR2V0dGVyID0gdXNlckVtYWlsR2V0dGVyO1xuICAgIGNvbnN0IGlzQXBpTWV0aG9kID0gbSA9PlxuICAgICAgdHlwZW9mIHRoaXNbbV0gPT09ICdmdW5jdGlvbicgJiZcbiAgICAgIG0gIT09ICdjb25zdHJ1Y3RvcicgJiYgLy8gU2luY2UgbWFrZVN1c3BlbnNlQXBpKCkgd2Fsa3MgcHJvdG90eXBlIGNoYWluXG4gICAgICBtICE9PSAncHJpdmF0aXppbmdDYWNoZUJ1c3QnICYmXG4gICAgICBtICE9PSAndXNlckVtYWlsR2V0dGVyJyAvLyBMaXN0IG5vbi1BUEkgbWV0aG9kcyBoZXJlLi4uXG4gICAgICA7XG5cbiAgICBPYmplY3Qua2V5cyhFZHNDbGllbnQucHJvdG90eXBlKS5mb3JFYWNoKG1ldGhvZCA9PiB7XG4gICAgICBpZiAoaXNBcGlNZXRob2QobWV0aG9kKSkge1xuICAgICAgICB0aGlzW21ldGhvZF0gPSBhdm9pZFNpbXVsdGFub3VzQ2FsbHModGhpc1ttZXRob2RdKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLnN1c3BlbnNlID0gbWFrZVN1c3BlbnNlQXBpKHRoaXMsIHtpc0FwaU1ldGhvZH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBwcml2YXRpemluZ0NhY2hlQnVzdCgpIHtcbiAgICByZXR1cm4ge3VzZXI6IHRoaXMudXNlckVtYWlsR2V0dGVyKCl9O1xuICB9XG5cbi8qKlxuICAgKiBSZXRyaWV2ZSBhY3RpdmUgY291cnNlcyBmb3IgY3VycmVudCBsb2dnZWQgaW4gc3R1ZGVudC5cbiAgICpcbiAgICogQHBhcmFtIGNvdXJzZUNvZGUgU2hvcnQtbmFtZSBvZiB0aGUgY291cnNlLiBPcHRpb25hbC5cbiAgICovXG4gIGFzeW5jIGdldEFjdGl2ZUNvdXJzZXMocToge2NvdXJzZUNvZGU/OiBzdHJpbmcsIHBlcmlvZE5hbWU6IHN0cmluZ30pIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcXVlcnk6YW55ID0gdGhpcy5wcml2YXRpemluZ0NhY2hlQnVzdCgpO1xuICAgICAgaWYgKHEpIHtcbiAgICAgICAgaWYgKHEuY291cnNlQ29kZSkgcXVlcnkuQ291cnNlQ29kZSA9IHEuY291cnNlQ29kZTtcbiAgICAgICAgaWYgKHEucGVyaW9kTmFtZSkgcXVlcnkuUGVyaW9kTmFtZSA9IHEucGVyaW9kTmFtZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuaHR0cC5nZXQoXCJzdHVkZW50YWN0aXZlY291cnNlc1wiLCBxdWVyeSk7XG4gICAgICBpZiAocmVzLnN0YXR1cyAhPSAyMDApIHRocm93IG5ldyBIdHRwRXJyb3IocmVzLnN0YXR1cywgYXdhaXQgcmVzLnRleHQoKSk7XG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgIHJldHVybiBqc29uLmNvdXJzZXMgYXMgRURTQ291cnNlW107XG4gICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmcm9tIEVEUzogXCIgKyBleCk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoTGBLdW5kZSB0eXbDpHJyIGludGUgbGFkZGEgdGVybWluc23DpWwgZWxsZXIgYXZrbGFyYWRlIHN0ZWcgZnLDpW4gRURTLiBGw7Zyc8O2ayBpZ2VuIHNlbmFyZS4uLmApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZSBsYXRlc3QgYXNzZXNzbWVudHMgZm9yIGN1cnJlbnQgbG9nZ2VkIGluIHVzZXIuXG4gICAqIFxuICAgKiBAcGFyYW0gbGltaXQgT3B0aW9uYWwgbGltaXRcbiAgICovXG4gIGFzeW5jIGdldExhdGVzdEFzc2Vzc21lbnRzKGxpbWl0PzogbnVtYmVyKSB7XG4gICAgY29uc3QgcXVlcnk6YW55ID0gdGhpcy5wcml2YXRpemluZ0NhY2hlQnVzdCgpO1xuICAgIGlmICghaXNOYU4obGltaXQpKSBxdWVyeS5Db3VudCA9IGxpbWl0O1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuaHR0cC5nZXQoXCJzdHVkZW50YXNzZXNzbWVudHNcIiwgcXVlcnkpO1xuICAgIGlmIChyZXMuc3RhdHVzICE9IDIwMCkgdGhyb3cgbmV3IEh0dHBFcnJvcihyZXMuc3RhdHVzLCBhd2FpdCByZXMudGV4dCgpKTtcbiAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICByZXR1cm4ganNvbi5hc3Nlc3NtZW50cyBhcyBFRFNBc3Nlc3NtZW50W107ICAgIFxuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlIHN0dWR5cGxhbnMgZm9yIGN1cnJlbnQgbG9nZ2VkLWluIHVzZXJcbiAgICovXG4gIGFzeW5jIGdldFN0dWRlbnRHb2FscygpIHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmh0dHAuZ2V0KFwic3R1ZGVudGdvYWxzXCIsIHRoaXMucHJpdmF0aXppbmdDYWNoZUJ1c3QoKSk7XG4gICAgaWYgKHJlcy5zdGF0dXMgIT0gMjAwKSB0aHJvdyBuZXcgSHR0cEVycm9yKHJlcy5zdGF0dXMsIGF3YWl0IHJlcy50ZXh0KCkpO1xuICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICAgIHJldHVybiBqc29uLnN0dWRlbnRHb2FscyBhcyBFRFNTdHVkeVBsYW5bXTsgICAgXG4gIH1cblxuICBhc3luYyBnZXRTdHVkZW50RnV0dXJlQWJpbGl0aWVzKCkge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuaHR0cC5nZXQoXCJzdHVkZW50RnV0dXJlQWJpbGl0aWVzXCIsIHRoaXMucHJpdmF0aXppbmdDYWNoZUJ1c3QoKSk7XG4gICAgaWYgKHJlcy5zdGF0dXMgIT0gMjAwKSB0aHJvdyBuZXcgSHR0cEVycm9yKHJlcy5zdGF0dXMsIGF3YWl0IHJlcy50ZXh0KCkpO1xuICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICAgIHJldHVybiBqc29uLnN0dWRlbnRGdXR1cmVBYmlsaXRpZXMgYXMgRURTU3R1ZGVudEZ1dHVyZUFiaWxpdHlbXTtcbiAgfVxuXG4gIGFzeW5jIGdldFRlYWNoZXJUdXRvclN0dWRlbnRzKCkge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuaHR0cC5nZXQoXCJ0ZWFjaGVydHV0b3JzdHVkZW50c1wiLCB0aGlzLnByaXZhdGl6aW5nQ2FjaGVCdXN0KCkpO1xuICAgIGlmIChyZXMuc3RhdHVzICE9IDIwMCkgdGhyb3cgbmV3IEh0dHBFcnJvcihyZXMuc3RhdHVzLCBhd2FpdCByZXMudGV4dCgpKTtcbiAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICByZXR1cm4ganNvbi5zdHVkZW50cyBhcyBFRFNTdHVkZW50W107XG4gIH1cblxuICAvKipcbiAgICogZ2V0U2Nob29sVHVpdGlvbkdyb3VwcygpXG4gICAqIFxuICAgKiBSZXR1cm4gdHVpdGlvbmdyb3VwcyBmb3Igc2Nob29sXG4gICAqIFxuICAgKiBAcGFyYW0gc2Nob29sTmFtZSAtIG5hbWUgb2Ygc2Nob29sXG4gICAqIEBwYXJhbSBjb3Vyc2VDb2RlIC0gU2tvbHZlcmtldHMgY29kZSBmb3IgY291cnNlXG4gICAqL1xuICBhc3luYyBnZXRTY2hvb2xUdWl0aW9uR3JvdXBzKHE6IHtzY2hvb2xOYW1lOiBzdHJpbmcsIGNvdXJzZUNvZGU6IHN0cmluZ30pIHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmh0dHAuZ2V0KFwiU2Nob29sVHVpdGlvbkdyb3Vwc1wiLCB7Li4udGhpcy5wcml2YXRpemluZ0NhY2hlQnVzdCgpLCAuLi5xfSk7XG4gICAgaWYgKHJlcy5zdGF0dXMgIT0gMjAwKSB0aHJvdyBuZXcgSHR0cEVycm9yKHJlcy5zdGF0dXMsIGF3YWl0IHJlcy50ZXh0KCkpO1xuICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICAgIHJldHVybiBqc29uLnNjaG9vbFR1aXRpb25Hcm91cHMgYXMgRURTVHVpdGlvbkdyb3VwW107XG4gIH1cblxuICAvKipcbiAgICogZ2V0VHVpdGlvbkdyb3VwU3R1ZGVudHMoKVxuICAgKiBcbiAgICogUmV0dXJuIG5hbWUgYW5kIG1haWxhZHJlc3NlcyBmb3IgdHV0aXRpb25ncm91cHMgaW4gc2Nob29sc1xuICAgKiBcbiAgICogQHBhcmFtIHNjaG9vbE5hbWUgLSBuYW1lIG9mIHNjaG9vbFxuICAgKiBAcGFyYW0gdHVpdGlvbkdyb3VwTmFtZSAtIHR1aXRpb24gZ3J1b3AgbmFtZSBpbiBFRFNcbiAgICovXG4gIGFzeW5jIGdldFR1aXRpb25Hcm91cFN0dWRlbnRzKHE6IHtzY2hvb2xOYW1lOiBzdHJpbmcsIHR1aXRpb25Hcm91cE5hbWU6IHN0cmluZ30pIHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmh0dHAuZ2V0KFwiVHVpdGlvbkdyb3VwU3R1ZGVudHNcIiwgey4uLnRoaXMucHJpdmF0aXppbmdDYWNoZUJ1c3QoKSwgLi4ucX0pO1xuICAgIGlmIChyZXMuc3RhdHVzICE9IDIwMCkgdGhyb3cgbmV3IEh0dHBFcnJvcihyZXMuc3RhdHVzLCBhd2FpdCByZXMudGV4dCgpKTtcbiAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICByZXR1cm4ganNvbi50dWl0aW9uR3JvdXBTdHVkZW50cyBhcyBFRFNUdWl0aW9uU3R1ZGVudFtdO1xuICB9XG5cbiAgLyoqXG4gICAqIGdldFNjaG9vbFRlYWNoZXJzKClcbiAgICogXG4gICAqIFJldHVybiBuYW1lIGFuZCBtYWlsYWRyZXNzZXMgZm9yIHR1dGl0aW9uZ3JvdXBzIGluIHNjaG9vbHNcbiAgICogXG4gICAqIEBwYXJhbSBzY2hvb2xOYW1lIC0gbmFtZSBvZiBzY2hvb2xcbiAgICovXG4gIGFzeW5jIGdldFNjaG9vbFRlYWNoZXJzKHE6IHtzY2hvb2xOYW1lOiBzdHJpbmd9KSB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5odHRwLmdldChcIlNjaG9vbFRlYWNoZXJzXCIsIHsuLi50aGlzLnByaXZhdGl6aW5nQ2FjaGVCdXN0KCksIC4uLnF9KTtcbiAgICBpZiAocmVzLnN0YXR1cyAhPSAyMDApIHRocm93IG5ldyBIdHRwRXJyb3IocmVzLnN0YXR1cywgYXdhaXQgcmVzLnRleHQoKSk7XG4gICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgcmV0dXJuIGpzb24uc2Nob29sVGVhY2hlcnMgYXMgRURTVGVhY2hlcltdO1xuICB9XG4gIC8vIHdlIGFzc3VtZSB0aGF0IHRoZSBFRFMgd2lsbCByZXR1cm4gdGhlIGN1cnJlbnQgYWNhZGVtaWMgeWVhciBkYXRlcyBkZXRlcm1pbmVkIGJ5IHRoZSBjdXJyZW50IGRhdGVcbiAgYXN5bmMgZ2V0QWNhZGVtaWNZZWFyVGVybXMoc2Nob29sTG9jYWxlOiBzdHJpbmcsIGRhdGU6IERhdGUpIHtcbiAgICAvLyBtb2NrIGRhdGFcbiAgICBzd2l0Y2ggKHNjaG9vbExvY2FsZSkge1xuICAgICAgY2FzZSAnZW5fc2luJzpcbiAgICAgIHJldHVybiBtb2NrSnNvbkZpbGUuU291dGhJbmRpYS5maWx0ZXIoZiA9PiBtb21lbnQoZGF0ZSkuaXNTYW1lT3JBZnRlcihmLmZpcnN0VGVybS5zdGFydERhdGUpICYmIG1vbWVudChkYXRlKS5pc1NhbWVPckJlZm9yZShmLnNlY29uZFRlcm0uZW5kRGF0ZSkpWzBdIGFzIE1vY2tFRFNBY2FkZW1pY1llYXI7XG4gICAgICBjYXNlICdlbl9uaW4nOlxuICAgICAgcmV0dXJuIG1vY2tKc29uRmlsZS5Ob3J0aEluZGlhLmZpbHRlcihmID0+IG1vbWVudChkYXRlKS5pc1NhbWVPckFmdGVyKGYuZmlyc3RUZXJtLnN0YXJ0RGF0ZSkgJiYgbW9tZW50KGRhdGUpLmlzU2FtZU9yQmVmb3JlKGYuc2Vjb25kVGVybS5lbmREYXRlKSlbMF0gYXMgTW9ja0VEU0FjYWRlbWljWWVhcjtcbiAgICAgIGNhc2UgJ3N2JzpcbiAgICAgIHtcbiAgICAgIHZhciBob2xpZGF5cyA9IFtdIGFzIE1vY2tFRFNEYXRlUmFuZ2VbXTtcbiAgICAgIHZhciBmaXJzdFRlcm1Nb21lbnQgPSBnZXRUZXJtU3RhckVuZERhdGUoZGF0ZSwgdHJ1ZSk7XG4gICAgICB2YXIgc2Vjb25kVGVybU1vbWVudCA9IGdldFRlcm1TdGFyRW5kRGF0ZShkYXRlLCBmYWxzZSk7XG5cbiAgICAgIHZhciBzdGFydEZpcnN0VGVybURhdGUgPSBmaXJzdFRlcm1Nb21lbnRbMF07XG4gICAgICB2YXIgc3RhcnRTZWNvbmRUZXJtRGF0ZSA9IHNlY29uZFRlcm1Nb21lbnRbMF07XG4gICAgICB2YXIgZW5kRmlyc3RUZXJtRGF0ZSA9IGZpcnN0VGVybU1vbWVudFsxXTtcbiAgICAgIHZhciBlbmRTZWNvbmRUZXJtRGF0ZSA9IHNlY29uZFRlcm1Nb21lbnRbMV07XG5cbiAgICAgIGNvbnN0IGZpcnN0VGVybSA9IHtzdGFydERhdGU6IG5ldyBEYXRlKHN0YXJ0Rmlyc3RUZXJtRGF0ZS55ZWFyKCksIHN0YXJ0Rmlyc3RUZXJtRGF0ZS5tb250aCgpLCBzdGFydEZpcnN0VGVybURhdGUuZGF0ZSgpKS50b0RhdGVTdHJpbmcoKSwgZW5kRGF0ZTogbmV3IERhdGUoc3RhcnRGaXJzdFRlcm1EYXRlLnllYXIoKSwgZW5kRmlyc3RUZXJtRGF0ZS5tb250aCgpLCBlbmRGaXJzdFRlcm1EYXRlLmRhdGUoKSkudG9EYXRlU3RyaW5nKCl9O1xuICAgICAgY29uc3Qgc2Vjb25kVGVybSA9IHtzdGFydERhdGU6IG5ldyBEYXRlKHN0YXJ0U2Vjb25kVGVybURhdGUueWVhcigpLCBzdGFydFNlY29uZFRlcm1EYXRlLm1vbnRoKCksIHN0YXJ0U2Vjb25kVGVybURhdGUuZGF0ZSgpKS50b0RhdGVTdHJpbmcoKSwgZW5kRGF0ZTogbmV3IERhdGUoc3RhcnRTZWNvbmRUZXJtRGF0ZS55ZWFyKCksIGVuZFNlY29uZFRlcm1EYXRlLm1vbnRoKCksIGVuZFNlY29uZFRlcm1EYXRlLmRhdGUoKSkudG9EYXRlU3RyaW5nKCl9O1xuICAgICAgcmV0dXJuIHtmaXJzdFRlcm0sIHNlY29uZFRlcm0sIGhvbGlkYXlzfTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuXG5cbmV4cG9ydCBjbGFzcyBFRFNQZXJpb2Qge1xuICBwZXJpb2Q6IHN0cmluZztcbiAgdGVybTogJ0FUJyB8ICdTVCc7XG4gIHllYXI6IG51bWJlcjtcbiAgY29uc3RydWN0b3IgKHBlcmlvZFN0cmluZ09yU2Nob29sVGVybTogc3RyaW5nIHwgU2Nob29sTW9tZW50KSB7XG4gICAgaWYgKHR5cGVvZiBwZXJpb2RTdHJpbmdPclNjaG9vbFRlcm0gPT09ICdzdHJpbmcnKSB7XG4gICAgICB0aGlzLnBlcmlvZCA9IHBlcmlvZFN0cmluZ09yU2Nob29sVGVybTtcbiAgICAgIHRoaXMudGVybSA9IHRoaXMucGVyaW9kLnN0YXJ0c1dpdGgoJ0hUJykgPyAnQVQnIDogJ1NUJztcbiAgICAgIHRoaXMueWVhciA9IHBhcnNlSW50KHRoaXMucGVyaW9kLnN1YnN0cigyKSk7XG4gICAgICBpZiAoaXNOYU4odGhpcy55ZWFyKSkgdGhyb3cgbmV3IEVycm9yIChgSW52YWxpZCBwZXJpb2Q6ICR7dGhpcy5wZXJpb2R9YCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHNjaG9vbFRlcm0gPSBuZXcgU2Nob29sVGVybShwZXJpb2RTdHJpbmdPclNjaG9vbFRlcm0pO1xuICAgICAgdGhpcy5wZXJpb2QgPSAoc2Nob29sVGVybS50ZXJtID09PSAnQVQnID8gXCJIVFwiIDogXCJWVFwiKSArIHNjaG9vbFRlcm0ueWVhcjtcbiAgICAgIHRoaXMudGVybSA9IHNjaG9vbFRlcm0udGVybTtcbiAgICAgIHRoaXMueWVhciA9IHNjaG9vbFRlcm0ueWVhcjtcbiAgICB9XG4gIH1cblxuICBnZXQgc2Nob29sVGVybSAoKSA6IFNjaG9vbFRlcm0ge1xuICAgIHJldHVybiBuZXcgU2Nob29sVGVybSh7XG4gICAgICBhY2FkZW1pY1llYXI6IHRoaXMudGVybSA9PT0gJ0FUJyA/XG4gICAgICAgIGAke3RoaXMueWVhcn0vJHt0aGlzLnllYXIgKyAxfWAgOlxuICAgICAgICBgJHt0aGlzLnllYXItMX0vJHt0aGlzLnllYXJ9YCxcbiAgICAgIHRlcm06IHRoaXMudGVybVxuICAgIH0pO1xuICB9XG5cbiAgdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMucGVyaW9kO1xuICB9XG5cbiAgdmFsdWVPZigpIHtcbiAgICByZXR1cm4gdGhpcy55ZWFyICsgXCI6XCIgKyAodGhpcy50ZXJtID09PSAnU1QnID8gXCIxXCIgOiBcIjJcIik7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSnNvbkRhdGVfb2xkIChqc29uRGF0ZVN0cjogc3RyaW5nKSA6IERhdGUge1xuICBjb25zdCBkYXRlID0gZGF0ZVRpbWVSZXZpdmVyKFwiXCIsIGpzb25EYXRlU3RyKTtcbiAgaWYgKCEoZGF0ZSBpbnN0YW5jZW9mIERhdGUpKSB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEpTT04gZGF0ZSBzdHJpbmc6IFwiICsganNvbkRhdGVTdHIpO1xuICByZXR1cm4gZGF0ZTtcbn1cblxuZnVuY3Rpb24gYXZvaWRTaW11bHRhbm91c0NhbGxzPFQsQT4obWV0aG9kOiAoLi4uYXJnczpBW10pPT5Qcm9taXNlPFQ+KSA6ICguLi5hcmdzOkFbXSk9PlByb21pc2U8VD4ge1xuICBsZXQgb25nb2luZ1Byb21pc2VzOiB7W2FyZ3NKc29uOiBzdHJpbmddOiBQcm9taXNlPFQ+fSA9IHt9O1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgY29uc3QgYXJnc0pzb24gPSBKU09OLnN0cmluZ2lmeShbXS5zbGljZS5jYWxsKGFyZ3VtZW50cykpO1xuICAgIGlmICghb25nb2luZ1Byb21pc2VzW2FyZ3NKc29uXSkge1xuICAgICAgb25nb2luZ1Byb21pc2VzW2FyZ3NKc29uXSA9IG1ldGhvZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpLnRoZW4ocmVzdWx0PT57XG4gICAgICAgIGRlbGV0ZSBvbmdvaW5nUHJvbWlzZXNbYXJnc0pzb25dO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBvbmdvaW5nUHJvbWlzZXNbYXJnc0pzb25dO1xuICB9XG59XG4iLCJpbXBvcnQgeyBCZWFyZXJQcm92aWRlciB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcblxuZXhwb3J0IGNsYXNzIEdvb2dsZUNhbGVuZGFyIHtcbiAgdG9rZW5FeHBpcmF0aW9uOiBEYXRlO1xuICBnb29nbGVUb2tlblByb3ZpZGVyOiBCZWFyZXJQcm92aWRlcjtcblxuICBjb25zdHJ1Y3Rvcihnb29nbGVUb2tlblByb3ZpZGVyOiBCZWFyZXJQcm92aWRlcikge1xuICAgIHRoaXMuZ29vZ2xlVG9rZW5Qcm92aWRlciA9IGdvb2dsZVRva2VuUHJvdmlkZXI7XG4gIH1cblxuICBhc3luYyBlbnN1cmVJbml0ZWQoKSB7XG4gICAgLy8gTG9hZCBHQVBJXG4gICAgaWYgKHR5cGVvZiBnYXBpID09PSAndW5kZWZpbmVkJykgYXdhaXQgdGhpcy5sb2FkR2FwaSgpO1xuICAgIC8vIFNldCB0b2tlblxuICAgIGlmICghdGhpcy50b2tlbkV4cGlyYXRpb24gfHwgdGhpcy50b2tlbkV4cGlyYXRpb24gPCBuZXcgRGF0ZSgpKSB7XG4gICAgICBjb25zdCB0b2tlblJlc3VsdCA9IGF3YWl0IHRoaXMuZ29vZ2xlVG9rZW5Qcm92aWRlci5nZXRCZWFyZXIoKTtcbiAgICAgIHRoaXMudG9rZW5FeHBpcmF0aW9uID0gbmV3IERhdGUodG9rZW5SZXN1bHQuZXhwaXJlcyk7XG4gICAgICBnYXBpLmNsaWVudC5zZXRUb2tlbih7XG4gICAgICAgIGFjY2Vzc190b2tlbjogdG9rZW5SZXN1bHQudG9rZW5cbiAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBMb2FkIENhbGVuZGFyIEFQSVxuICAgIGlmICh0eXBlb2YgZ2FwaS5jbGllbnQuY2FsZW5kYXIgPT09ICd1bmRlZmluZWQnKSBhd2FpdCBnYXBpLmNsaWVudC5sb2FkKCdjYWxlbmRhcicsICd2MycpO1xuICB9XG5cbiAgbG9hZEdhcGkoKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGlmICh0eXBlb2YgZ2FwaSAhPT0gJ3VuZGVmaW5lZCcpIHJldHVybiByZXNvbHZlKCk7XG4gICAgICBjb25zdCBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICAgIHNjcmlwdC5zcmMgPSBcImh0dHBzOi8vYXBpcy5nb29nbGUuY29tL2pzL2NsaWVudC5qcz9vbmxvYWQ9Z2FhcGlfbG9hZGVkXCI7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF0uYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICAgICh3aW5kb3cgYXMgYW55KS5nYWFwaV9sb2FkZWQgPSByZXNvbHZlO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjExNjg2ODgvZ29vZ2xlLW9hdXRoMi11c2luZy1leHRlcm5hbGx5LWdlbmVyYXRlZC1hY2Nlc3MtdG9rZW4td2l0aC1qcy1jbGllbnQtbGlicmFyeVxuICAvLyBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9hcGktY2xpZW50LWxpYnJhcnkvamF2YXNjcmlwdC9yZWZlcmVuY2UvcmVmZXJlbmNlZG9jcyNnYXBpY2xpZW50c2V0dG9rZW50b2tlbm9iamVjdFxuICAvKmdhcGkuYXV0aC5zZXRUb2tlbih7XG4gICAgICBhY2Nlc3NfdG9rZW46ICdhY2Nlc3NUb2tlbj8nLFxuICAgICAgZXhwaXJlc19pbjogXCIzNjAwXCIsXG4gICAgICBzdGF0ZTogXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL2NhbGVuZGFyLnJlYWRvbmx5XCJcbiAgfSkqL1xuXG4gIGFzeW5jIGxpc3RDYWxlbmRhcnMoKSB7XG4gICAgYXdhaXQgdGhpcy5lbnN1cmVJbml0ZWQoKTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgZ2FwaS5jbGllbnQuY2FsZW5kYXIuY2FsZW5kYXJMaXN0Lmxpc3Qoe30pO1xuICAgICAgLy8gVE9ETzogV2hhdCBpcyB0aGUgbm9ybWFsIHJlcy5zdGF0dXM/IDIwMD8gVGhyb3cgaWYgbm90IDIwMD9cbiAgICAgIHJldHVybiByZXMucmVzdWx0Lml0ZW1zO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgLy8gVE9ETzogUGFyc2Ugb3V0IGVycm9yIGZyb20gZXJyICh3aGljaCBpcyBhbiBvYmplY3QhKVxuICAgICAgdGhyb3cgZXJyLmVycm9yOyAvLyBJcyB0aGlzIGNvcnJlY3Q/IFRlc3QhXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgYmF0Y2hFdmVudHMoeyBjYWxlbmRhckxpc3QsIHRpbWVNaW4sIHRpbWVNYXggfSkge1xuICAgIGF3YWl0IHRoaXMuZW5zdXJlSW5pdGVkKCk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGJhdGNoID0gZ2FwaS5jbGllbnQubmV3QmF0Y2goKTtcbiAgICAgIGNhbGVuZGFyTGlzdC5mb3JFYWNoKChjYWwpID0+IHtcbiAgICAgICAgYmF0Y2guYWRkKGdhcGkuY2xpZW50LmNhbGVuZGFyLmV2ZW50cy5saXN0KHtcbiAgICAgICAgICAnY2FsZW5kYXJJZCc6IGNhbC5pZCB8fCAncHJpbWFyeScsXG4gICAgICAgICAgJ3RpbWVNaW4nOiB0aW1lTWluICYmIChuZXcgRGF0ZSh0aW1lTWluKSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAndGltZU1heCc6IHRpbWVNYXggJiYgKG5ldyBEYXRlKHRpbWVNYXgpKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICdzaG93RGVsZXRlZCc6IGZhbHNlLFxuICAgICAgICAgICdzaW5nbGVFdmVudHMnOiB0cnVlLFxuICAgICAgICAgICdmaWVsZHMnOiAnaXRlbXMvaWQsaXRlbXMvc3RhcnQsaXRlbXMvZW5kLGl0ZW1zL3N1bW1hcnksaXRlbXMvbG9jYXRpb24saXRlbXMvaHRtbExpbmssaXRlbXMvZGVzY3JpcHRpb24nLFxuICAgICAgICAgICdtYXhSZXN1bHRzJzogMjUwMCxcbiAgICAgICAgICAnb3JkZXJCeSc6ICdzdGFydFRpbWUnXG4gICAgICAgIH0pLCA8YW55PnsnaWQnOiBjYWwuaWR9KTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGJhdGNoLnRoZW4ocmVzcCA9PiB7XG4gICAgICAgIGxldCBuZXdDYWxzID0ge307XG4gICAgICAgIGZvciAodmFyIGkgaW4gY2FsZW5kYXJMaXN0KSB7XG4gICAgICAgICAgY29uc3QgY2FsSWQgPSBjYWxlbmRhckxpc3RbaV0uaWQ7XG4gICAgICAgICAgY29uc3QgZXZlbnRzID0gKHJlc3AucmVzdWx0W2NhbElkXS5yZXN1bHQgIGFzIGdhcGkuY2xpZW50LmNhbGVuZGFyLkV2ZW50cykuaXRlbXM7XG4gICAgICAgICAgbmV3Q2Fsc1tjYWxJZF0gPSB7Y2FsZW5kYXI6IGNhbGVuZGFyTGlzdFtpXSwgZXZlbnRzfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3Q2FscztcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2goZXJyKSB7XG4gICAgICB0aHJvdyBlcnIuZXJyb3I7XG4gICAgfVxuICB9XG59XG4iLCJcbmV4cG9ydCBpbnRlcmZhY2UgS2VkTGVhcm5pbmdHb2Fsc0RhdGEge1xuICBtb2R1bGVOYW1lOiBzdHJpbmdcbiAgc3ViamVjdDoge1xuICAgIG5hbWU6IHN0cmluZ1xuICAgIGNvdXJzZToge1xuICAgICAgbmFtZTogc3RyaW5nXG4gICAgICB1cmw6IHN0cmluZ1xuICAgIH1cbiAgfVxuICBzdGVwPzogbnVtYmVyXG4gIGNvbW1vblRhc2tzOiBLZWRMZWFybmluZ1Rhc2tbXVxuICBsZWFybmluZ0dvYWxzOiBLZWRMZWFybmluZ0dvYWxbXVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEtlZExlYXJuaW5nVGFzayB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgdXJsOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgS2VkTGVhcm5pbmdHb2FsIHtcbiAgbmFtZTogc3RyaW5nO1xuICB0YXNrczogS2VkTGVhcm5pbmdUYXNrW107XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRMZWFybmluZ0dvYWxzQW5kVGFza3MoYXBpUGF0aDogc3RyaW5nLCBwYWdlSWQ6IHN0cmluZykge1xuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCAoYCR7YXBpUGF0aH0/bm9kZUlEPSR7cGFnZUlkfWAsIHtjcmVkZW50aWFsczogXCJzYW1lLW9yaWdpblwifSk7XG4gIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpO1xuICByZXR1cm4gZGF0YSBhcyBLZWRMZWFybmluZ0dvYWxzRGF0YTtcbn1cbiIsImV4cG9ydCBmdW5jdGlvbiBjb3Vyc2VOYW1lVG9Dc3NDbGFzcyhjc3NQcmVmaXg6IHN0cmluZywgY291cnNlTmFtZTogc3RyaW5nKSB7XG4gIHJldHVybiBgJHtjc3NQcmVmaXh9JHtjb3Vyc2VOYW1lLnN1YnN0cigwLDMpLnRvTG93ZXJDYXNlKCl9YDtcbn1cbiIsImltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcbmltcG9ydCB7IGZsYXR0ZW4sIGRpc3RpbmN0LCBjb21wYXJlUHJvcCB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWxzJztcbmltcG9ydCB7IFN0dWRlbnRDYWxlbmRhckV2ZW50IH0gZnJvbSAnLi9tb2RlbHMnO1xuXG5pbnRlcmZhY2UgRXZlbnRNZXRhIHtcbiAgaW5kZXg/OiBudW1iZXIsXG4gIHByZXZPdmVybGFwcz86IFN0dWRlbnRDYWxlbmRhckV2ZW50W10gIFxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3J1bmNoQ29sbGlkaW5nRXZlbnRzIChcbiAgZXZlbnRzOiBTdHVkZW50Q2FsZW5kYXJFdmVudFtdLFxuICBpc0xhc3RDYWxsPzogYm9vbGVhbilcbjogU3R1ZGVudENhbGVuZGFyRXZlbnRbXVxue1xuICBjb25zdCByZXN1bHQ6IChTdHVkZW50Q2FsZW5kYXJFdmVudCAmIEV2ZW50TWV0YSlbXSA9IFtdO1xuICBldmVudHMuZm9yRWFjaCgoZXZlbnQsIGV2ZW50SW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IG92ZXJsYXBzID0gcmVzdWx0LmZpbHRlcih4ID0+IHguc3RhcnRNb21lbnQgJiYgeC5lbmRNb21lbnQgJiZcbiAgICAgICAgICAoeC5zdGFydE1vbWVudCA8PSBldmVudC5zdGFydE1vbWVudCkgJiZcbiAgICAgICAgICAoeC5lbmRNb21lbnQgPiBldmVudC5zdGFydE1vbWVudCkpO1xuICAgICAgbGV0IGFsbE92ZXJsYXBzID0gb3ZlcmxhcHMuY29uY2F0KGZsYXR0ZW4gKG92ZXJsYXBzLm1hcChvID0+IG8ucHJldk92ZXJsYXBzKSkpO1xuICAgICAgYWxsT3ZlcmxhcHMgPSBkaXN0aW5jdChhbGxPdmVybGFwcywgbyA9PiBvLmluZGV4KTtcbiAgICAgIGFsbE92ZXJsYXBzLnNvcnQoY29tcGFyZVByb3AoXCJzdGFydE1vbWVudFwiKSk7XG4gICAgICBsZXQgd2lkdGg7Ly8gPSBNYXRoLnJvdW5kKDEwMCAvIE1hdGgubWF4KChhbGxPdmVybGFwcy5sZW5ndGggKyAxKSwgMSkpO1xuICAgICAgbGV0IHBvcyA9IDA7XG4gICAgICBhbGxPdmVybGFwcy5mb3JFYWNoKChvdmVybGFwLCBpKSA9PiB7XG4gICAgICAgIGlmIChpICUgNCA9PT0gMCkge1xuICAgICAgICAgIHdpZHRoID0gTWF0aC5tYXgoMjUsIE1hdGgucm91bmQoMTAwIC8gTWF0aC5tYXgoYWxsT3ZlcmxhcHMubGVuZ3RoIC0gaSArIDEsIDEpKSk7XG4gICAgICAgICAgcG9zID0gMDtcbiAgICAgICAgfVxuICAgICAgICBvdmVybGFwLndpZHRoID0gd2lkdGg7XG4gICAgICAgIG92ZXJsYXAuY2xhc3NOYW1lID0gKG92ZXJsYXAuY2xhc3NOYW1lIHx8IFwiXCIpLnNwbGl0KCcgJylcbiAgICAgICAgICAuZmlsdGVyKGNuID0+IGNuICE9PSAnc3BsaXR0ZWQnKVxuICAgICAgICAgIC5jb25jYXQoXCJzcGxpdHRlZFwiKVxuICAgICAgICAgIC5qb2luKCcgJyksXG4gICAgICAgIG92ZXJsYXAucG9zID0gcG9zO1xuICAgICAgICBwb3MgKz0gd2lkdGg7XG4gICAgICB9KTtcbiAgICAgIHJlc3VsdC5wdXNoKHtcbiAgICAgICAgLi4uZXZlbnQsXG4gICAgICAgIGluZGV4OiBldmVudEluZGV4LFxuICAgICAgICBwb3M6IHBvcyxcbiAgICAgICAgd2lkdGgsXG4gICAgICAgIGNsYXNzTmFtZTogd2lkdGggPCAxMDAgP1xuICAgICAgICAgIChldmVudC5jbGFzc05hbWUgPyBldmVudC5jbGFzc05hbWUgKyBcIiBzcGxpdHRlZFwiIDogXCJzcGxpdHRlZFwiKSA6XG4gICAgICAgICAgZXZlbnQuY2xhc3NOYW1lLFxuICAgICAgICBwcmV2T3ZlcmxhcHM6IGFsbE92ZXJsYXBzXG4gICAgICB9KTtcbiAgICAgIC8qaWYgKGlzTGFzdENhbGwgJiYgbW9tZW50KGV2ZW50LnN0YXJ0KS5kYXkoKSA9PT0gMSkge1xuICAgICAgICBpZiAoL1N2ZTIvLnRlc3QoZXZlbnQudGV4dCkpIHtcbiAgICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoL0ZyYW5za2EvLnRlc3QoZXZlbnQudGV4dCkpIHtcbiAgICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoL1R5c2thLy50ZXN0KGV2ZW50LnRleHQpKSB7XG4gICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKC9zcGFuc2svLnRlc3QoZXZlbnQudGV4dCkpIGRlYnVnZ2VyO1xuICAgICAgICBpZiAoL0VuZzYvLnRlc3QoZXZlbnQudGV4dCkpIGRlYnVnZ2VyO1xuICAgICAgfSovXG4gIH0pO1xuICByZXR1cm4gcmVzdWx0O1xufVxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xuaW1wb3J0IHtNSU5VVEV9IGZyb20gJy4uLy4uL3V0aWxzL2NvbnN0YW50cyc7XG5pbXBvcnQge0x9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWxzJztcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgICBpZDogc3RyaW5nLFxuICAgIGRheVN0YXJ0LFxuICAgIHN0YXJ0TW9tZW50OiBtb21lbnQuTW9tZW50LFxuICAgIGVuZE1vbWVudDogbW9tZW50Lk1vbWVudCxcbiAgICB0ZXh0OiBzdHJpbmcsXG4gICAgbG9jYXRpb246IHN0cmluZyxcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nLFxuICAgIHdpZHRoOiBudW1iZXIsXG4gICAgcG9zOiBudW1iZXIsXG4gICAgbG9jYWxlOiBzdHJpbmcsXG4gICAgem9vbTogbnVtYmVyLFxuICAgIGh0bWxMaW5rOiBzdHJpbmcsXG4gICAgY2xhc3NOYW1lOiBzdHJpbmdcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gRGF5Vmlld0V2ZW50ICh7XG4gICAgaWQsXG4gICAgZGF5U3RhcnQsXG4gICAgc3RhcnRNb21lbnQsXG4gICAgZW5kTW9tZW50LFxuICAgIHRleHQsXG4gICAgbG9jYXRpb24sXG4gICAgZGVzY3JpcHRpb24sXG4gICAgd2lkdGgsXG4gICAgcG9zLFxuICAgIGxvY2FsZSxcbiAgICB6b29tLFxuICAgIGh0bWxMaW5rLFxuICAgIGNsYXNzTmFtZVxufTogUHJvcHMpIHtcbiAgICBjb25zdCB0b3AgPSAobW9tZW50KHN0YXJ0TW9tZW50KS5kaWZmKGRheVN0YXJ0KSAvIE1JTlVURSkgKiB6b29tO1xuICAgIGNvbnN0IGhlaWdodCA9IChtb21lbnQoZW5kTW9tZW50KS5kaWZmKHN0YXJ0TW9tZW50KSAvIE1JTlVURSkgKiB6b29tO1xuICAgIGNvbnN0IGxvY2FsZVRpbWVPcHRpb25zID0ge2hvdXI6ICdudW1lcmljJywgbWludXRlOiAnMi1kaWdpdCd9O1xuICAgIGNvbnN0IGxvY2FsZVN0YXJ0VGltZSA9IHN0YXJ0TW9tZW50LnRvRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZyhsb2NhbGUsIGxvY2FsZVRpbWVPcHRpb25zKTtcbiAgICBjb25zdCBsb2NhbGVFbmRUaW1lID0gZW5kTW9tZW50LnRvRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZyhsb2NhbGUsIGxvY2FsZVRpbWVPcHRpb25zKTtcblxuICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT17XCJkYXl2aWV3ZXZlbnQgXCIgKyBjbGFzc05hbWV9IHN0eWxlPXt7XG4gICAgICAgIHBvc2l0aW9uOidhYnNvbHV0ZScsXG4gICAgICAgIGJveFNpemluZzogJ2JvcmRlci1ib3gnLFxuICAgICAgICB0b3AsXG4gICAgICAgIGxlZnQ6IChwb3MgfHwgMCkgKyBcIiVcIixcbiAgICAgICAgd2lkdGg6ICh3aWR0aCB8fCAxMDApICsgJyUnLFxuICAgICAgICBoZWlnaHQsXG4gICAgICAgIG1heEhlaWdodDogaGVpZ2h0LFxuICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbid9fVxuXG4gICAgICAgIHRpdGxlPXtgJHtsb2NhbGVTdGFydFRpbWV9IC0gJHtsb2NhbGVFbmRUaW1lfSAke3RleHR9YCArXG4gICAgICAgICAgICAobG9jYXRpb24gP1xuICAgICAgICAgICAgICAgIFwiXFxuXCIgKyBMYFBsYXRzOiAke2xvY2F0aW9ufWAgOlxuICAgICAgICAgICAgICAgIFwiXCIgKSArXG4gICAgICAgICAgICAoZGVzY3JpcHRpb24gP1xuICAgICAgICAgICAgICAgIFwiXFxuXCIgKyBkZXNjcmlwdGlvbiA6XG4gICAgICAgICAgICAgICAgXCJcIiApXG4gICAgICAgIH1cbiAgICAgICAgPlxuICAgICAgICA8YSBjbGFzc05hbWU9XCJldmVudC10aXRsZVwiIGhyZWY9e2h0bWxMaW5rfSB0YXJnZXQ9XCJjYWxlbmRhci1ldmVudFwiPlxuICAgICAgICAgICAge3RleHR9XG4gICAgICAgIDwvYT5cbiAgICAgICAgPHAgY2xhc3NOYW1lPVwiZXZlbnQtcGVyaW9kXCI+XG4gICAgICAgICAgICB7bG9jYWxlU3RhcnRUaW1lfSAtIHtsb2NhbGVFbmRUaW1lfVxuICAgICAgICA8L3A+XG4gICAgICAgIHtsb2NhdGlvbiAmJlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZXZlbnQtbG9jYXRpb25cIj5cbiAgICAgICAgICAgICAgICB7bG9jYXRpb259XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgIH1cbiAgICAgICAge2Rlc2NyaXB0aW9uICYmXG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJldmVudC1kZXNjcmlwdGlvblwiPlxuICAgICAgICAgICAgICAgIHtkZXNjcmlwdGlvbn1cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgfVxuICAgIDwvZGl2Pjtcbn1cbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcbmltcG9ydCBEYXlWaWV3RXZlbnQgZnJvbSAnLi9kYXktdmlldy1ldmVudCc7XG5pbXBvcnQgVGltZUxpbmVzIGZyb20gJy4vdGltZS1saW5lcyc7XG5pbXBvcnQge01JTlVURX0gZnJvbSAnLi4vLi4vdXRpbHMvY29uc3RhbnRzJztcbmltcG9ydCB7Y3J1bmNoQ29sbGlkaW5nRXZlbnRzfSBmcm9tICcuL2NydW5jaC1jb2xsaWRpbmctZXZlbnRzJztcbmltcG9ydCB7IFN0dWRlbnRDYWxlbmRhckV2ZW50IH0gZnJvbSAnLi9tb2RlbHMnO1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICAgIGRheVN0YXJ0OiBtb21lbnQuTW9tZW50OyAgIC8vIE1pbGxpc2Vjb25kcyBhdCBzdGFydCBvZiB0aGUgZGF5IChmb3IgZXhhbXBsZSAwODowMCB0aGUgZGF5KVxuICAgIGRheUVuZDogbW9tZW50Lk1vbWVudDsgICAgIC8vIE1pbGxpc2Vjb25kcyBhdCBlbmQgb2YgdGhlIGRheSAoZm9yIGV4YW1wbGUgMTc6MDAgdGhlIGRheSlcbiAgICBldmVudHM6IFN0dWRlbnRDYWxlbmRhckV2ZW50W10sICAgICAvLyBFdmVudHMgdG8gc2hvd1xuICAgIGxvY2FsZTogc3RyaW5nLFxuICAgIHpvb206IG51bWJlcixcbiAgICBpc0xhc3RDYWxsOiBib29sZWFuXG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIERheVZpZXcgKHtcbiAgICBkYXlTdGFydCwgICAvLyBNaWxsaXNlY29uZHMgYXQgc3RhcnQgb2YgdGhlIGRheSAoZm9yIGV4YW1wbGUgMDg6MDAgdGhlIGRheSlcbiAgICBkYXlFbmQsICAgICAvLyBNaWxsaXNlY29uZHMgYXQgZW5kIG9mIHRoZSBkYXkgKGZvciBleGFtcGxlIDE3OjAwIHRoZSBkYXkpXG4gICAgZXZlbnRzLCAgICAgLy8gRXZlbnRzIHRvIHNob3dcbiAgICBsb2NhbGUsXG4gICAgem9vbSxcbiAgICBpc0xhc3RDYWxsXG59OiBQcm9wcykge1xuICAgIGNvbnN0IGhlaWdodCA9IChtb21lbnQoZGF5RW5kKS5kaWZmKGRheVN0YXJ0KSAvIE1JTlVURSkgKiB6b29tO1xuXG4gICAgY29uc3QgY3J1bmNoZWRFdmVudHMgPSBjcnVuY2hDb2xsaWRpbmdFdmVudHMoZXZlbnRzLCBpc0xhc3RDYWxsKTtcblxuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZGF5dmlld1wiIHN0eWxlPXt7XG4gICAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgICBoZWlnaHQsXG4gICAgICAgICAgICBtYXhIZWlnaHQ6IGhlaWdodCxcbiAgICAgICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nXG4gICAgICAgIH19PlxuXG4gICAgICAgICAgICA8VGltZUxpbmVzIGRheVN0YXJ0PXtkYXlTdGFydH0gZGF5RW5kPXtkYXlFbmR9IHpvb209e3pvb219IC8+XG5cbiAgICAgICAgICAgIHtjcnVuY2hlZEV2ZW50cy5tYXAgKGV2ID0+IDxEYXlWaWV3RXZlbnRcbiAgICAgICAgICAgICAgICBrZXk9e2V2LmlkfVxuICAgICAgICAgICAgICAgIGlkPXtldi5pZH1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2V2LmNsYXNzTmFtZX1cbiAgICAgICAgICAgICAgICBkYXlTdGFydD17ZGF5U3RhcnR9XG4gICAgICAgICAgICAgICAgc3RhcnRNb21lbnQ9e2V2LnN0YXJ0TW9tZW50fVxuICAgICAgICAgICAgICAgIGVuZE1vbWVudD17ZXYuZW5kTW9tZW50fVxuICAgICAgICAgICAgICAgIHRleHQ9e2V2LnRleHR9XG4gICAgICAgICAgICAgICAgbG9jYXRpb249e2V2LmxvY2F0aW9ufVxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uPXtldi5kZXNjcmlwdGlvbn1cbiAgICAgICAgICAgICAgICB3aWR0aD17ZXYud2lkdGh9XG4gICAgICAgICAgICAgICAgcG9zPXtldi5wb3N9XG4gICAgICAgICAgICAgICAgbG9jYWxlPXtsb2NhbGV9XG4gICAgICAgICAgICAgICAgem9vbT17em9vbX1cbiAgICAgICAgICAgICAgICBodG1sTGluaz17ZXYuaHRtbExpbmt9XG4gICAgICAgICAgICAvPil9XG4gICAgICAgIDwvZGl2PlxuICAgICk7XG59XG5cbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gSG91ck1hcmtlciAoe3N0YXJ0SG91ciwgZW5kSG91ciwgbG9jYWxlLCB6b29tfSkge1xuICAgIGNvbnN0IGhvdXJQaXhlbHMgPSA2MCAqIHpvb207XG5cbiAgICBjb25zdCBob3VycyA9IFtdO1xuICAgIGZvciAobGV0IGhvdXIgPSBzdGFydEhvdXI7IGhvdXIgPD0gZW5kSG91cjsgKytob3VyKSB7XG4gICAgICAgIGhvdXJzLnB1c2goaG91cik7XG4gICAgfVxuXG4gICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwiaG91cm1hcmtlclwiIHN0eWxlPXt7XG4gICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgICBsZWZ0OiAwLFxuICAgICAgICB0b3A6IDAsXG4gICAgICAgIG92ZXJmbG93OiAndmlzaWJsZScsXG4gICAgICAgIGhlaWdodDogKGVuZEhvdXIgLSBzdGFydEhvdXIpICogaG91clBpeGVsc1xuICAgIH19PlxuICAgICAge2hvdXJzLm1hcCgoaG91ciwgaSkgPT4ge1xuICAgICAgICBjb25zdCB5cG9zID0gaSAqIGhvdXJQaXhlbHM7XG4gICAgICAgIHJldHVybiA8c3BhbiBrZXk9e2hvdXJ9PjxkaXYgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgICAgICAgIHRvcDogeXBvcyxcbiAgICAgICAgICAgICAgICBtYXJnaW5Ub3A6ICctNHB4JywgLy8gQ1NTIVxuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDBcbiAgICAgICAgICAgIH19PlxuICAgICAgICAgICAgICAgIHttb21lbnQoKS5ob3VyKGhvdXIpLm1pbnV0ZSgwKS50b0RhdGUoKS50b0xvY2FsZVN0cmluZyhsb2NhbGUsIHtob3VyOiBcIjItZGlnaXRcIiwgbWludXRlOiBcIjItZGlnaXRcIn0pfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICB7Lyo8ZGl2IGNsYXNzTmFtZT1cImhvdXJsaW5lXCJcbiAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjZWVlZUYyJywgLy8gQ1NTIVxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogJzI0cHgnLFxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogJzZweCcsXG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMCxcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMCxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnMXB4JyxcbiAgICAgICAgICAgICAgICAgICAgdG9wOiB5cG9zXG4gICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICB7aG91ciA8IGVuZEhvdXIgJiYgPGRpdiBjbGFzc05hbWU9XCJoYWx2aG91cmxpbmVcIlxuICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNlZWVlRjInLCAvLyBDU1MhXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiAnMjZweCcsXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAnNHB4JyxcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwLFxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAwLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICcxcHgnLFxuICAgICAgICAgICAgICAgICAgICB0b3A6IHlwb3MgKyAoaG91clBpeGVscyAvIDIpICsgMVxuICAgICAgICAgICAgfX0gLz4gfSAqL31cbiAgICAgICAgPC9zcGFuPjtcbiAgICB9KX08L2Rpdj47XG59XG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgV2Vla1ZpZXcgZnJvbSAnLi93ZWVrLXZpZXcnO1xuaW1wb3J0IHtHb29nbGVDYWxlbmRhcn0gZnJvbSAnLi4vLi4vYXBpcy9nb29nbGUtY2FsZW5kYXInO1xuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xuaW1wb3J0IHtjbG9uZSwgZmxhdHRlbiwgTH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbHMnO1xuaW1wb3J0IFN0YXR1c0JhciBmcm9tICcuL3N0YXR1cy1iYXInO1xuaW1wb3J0IHtjb3Vyc2VOYW1lVG9Dc3NDbGFzc30gZnJvbSAnLi9jb3Vyc2UtbmFtZS10by1jc3MtY2xhc3MnO1xuaW1wb3J0IHtzaG91bGRJbmNsdWRlQ2FsZW5kYXJ9IGZyb20gJy4vc2hvdWxkLWluY2x1ZGUtY2FsZW5kYXInO1xuaW1wb3J0IHsgbG9jYWxNb21lbnQgfSBmcm9tICcuLi8uLi9nbG9iYWxzL21vbWVudC1zdi1sb2NhbGUnO1xuaW1wb3J0IGVudiwgeyBFbnYgfSBmcm9tICcuLi8uLi9nbG9iYWxzL0tFRC5lbnYnO1xuaW1wb3J0IHsgTGFuZ3VhZ2VDb250ZXh0IH0gZnJvbSAnLi4vdXRpbGl0eS1jb21wb25lbnRzL0xhbmd1YWdlQ29udGV4dCc7XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gICAgZmlyc3REYXk6IG1vbWVudC5Nb21lbnQ7XG4gICAgbnVtRGF5czogbnVtYmVyO1xuICAgIGluaXRpYWxTdGFydEhvdXI6IG51bWJlcjtcbiAgICBpbml0aWFsRW5kSG91cjogbnVtYmVyO1xuICAgIGluaXRpYWxab29tOiBudW1iZXI7XG59XG5cbmludGVyZmFjZSBTdGF0ZSB7XG4gICAgZmlyc3REYXk6IG1vbWVudC5Nb21lbnQsXG4gICAgc3RhcnRIb3VyOiBudW1iZXIsXG4gICAgZW5kSG91cjogbnVtYmVyLFxuICAgIHpvb206IG51bWJlcixcbiAgICBjYWxlbmRhcnM6IHtbY2FsZW5kYXJJZDogc3RyaW5nXToge1xuICAgICAgICBjYWxlbmRhcjogZ2FwaS5jbGllbnQuY2FsZW5kYXIuQ2FsZW5kYXJMaXN0RW50cnksXG4gICAgICAgIGV2ZW50czogZ2FwaS5jbGllbnQuY2FsZW5kYXIuRXZlbnRbXSB9fSxcbiAgICBjYWxlbmRhcnNCZWluZ0xvYWRlZDogc3RyaW5nW10sXG4gICAgc3RhdHVzOiBzdHJpbmcsXG4gICAgZXJyb3I6IEVycm9yIHwgbnVsbCBcbn1cbiAgXG5leHBvcnQgY2xhc3MgQ2FsZW5kYXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMgJiB7ZW52OiBFbnZ9LCBTdGF0ZT4ge1xuICAgIGdjYWw6IEdvb2dsZUNhbGVuZGFyO1xuICAgIHN0YXRpYyBjb250ZXh0VHlwZSA9IExhbmd1YWdlQ29udGV4dDtcblxuICAgIGNvbnN0cnVjdG9yIChwcm9wczogUHJvcHMgJiB7ZW52OiBFbnZ9KSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgLy8gUHJvcHNcbiAgICAgICAgY29uc3Qge2ZpcnN0RGF5fSA9IHByb3BzO1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBpbml0aWFsU3RhcnRIb3VyLFxuICAgICAgICAgICAgaW5pdGlhbEVuZEhvdXIsXG4gICAgICAgICAgICBpbml0aWFsWm9vbVxuICAgICAgICB9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgXG4gICAgICAgIC8vIFN0YXRlXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBmaXJzdERheTogZmlyc3REYXksXG4gICAgICAgICAgICBzdGFydEhvdXI6IGluaXRpYWxTdGFydEhvdXIsXG4gICAgICAgICAgICBlbmRIb3VyOiBpbml0aWFsRW5kSG91cixcbiAgICAgICAgICAgIHpvb206IGluaXRpYWxab29tLFxuICAgICAgICAgICAgY2FsZW5kYXJzOiB7fSxcbiAgICAgICAgICAgIGNhbGVuZGFyc0JlaW5nTG9hZGVkOiBbXSxcbiAgICAgICAgICAgIHN0YXR1czogJ0xvYWRpbmcgY2FsZW5kYXJzLi4uIChhdXRoZW50aWNhdGluZy4uLiknLFxuICAgICAgICAgICAgZXJyb3I6IG51bGxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qge2dvb2dsZVRva2VuUHJvdmlkZXJ9ID0gcHJvcHMuZW52IHx8IGVudjtcbiAgICAgICAgdGhpcy5nY2FsID0gbmV3IEdvb2dsZUNhbGVuZGFyKGdvb2dsZVRva2VuUHJvdmlkZXIpO1xuXG4gICAgICAgIC8vIFN0YXJ0IGNhbGxpbmcgb24gR29vZ2xlIEFQSSByaWdodCBhd2F5LiBTdG9yZSBwcm9taXNlIGluIHByb3BlcnR5LlxuICAgICAgICB0aGlzLmdjYWwuZW5zdXJlSW5pdGVkKCkudGhlbigoKT0+e1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9hZERhdGEoZmlyc3REYXkpO1xuICAgICAgICB9KS5jYXRjaCAoZXJyb3IgPT4ge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGhhbmRsZUVycm9yKGVycm9yKSB7XG4gICAgICAgIGlmICghZXJyb3IpIGVycm9yID0gXCJVbmtub3duIGVycm9yXCI7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2Vycm9yfSk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IgKGVycm9yLnN0YWNrIHx8IGVycm9yKTsgLy8gS2VlcCFcbiAgICB9XG5cbiAgICBsb2FkRGF0YShmaXJzdERheSkge1xuICAgICAgICAvLyBQcm9wc1xuICAgICAgICBjb25zdCB7bnVtRGF5c30gPSB0aGlzLnByb3BzO1xuICAgICAgICBjb25zdCB7aW50bH0gPSB0aGlzLmNvbnRleHQ7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgZmlyc3REYXksXG4gICAgICAgICAgICBjYWxlbmRhcnM6IHt9LFxuICAgICAgICAgICAgY2FsZW5kYXJzQmVpbmdMb2FkZWQ6IFtdLFxuICAgICAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgICAgICBzdGF0dXM6IGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6XCJjYWxlbmRhci5sb2FkaW5nQ2FsZW5kYXJcIiwgZGVmYXVsdE1lc3NhZ2U6IFwiTG9hZGluZyBjYWxlbmRhcnMuLi4gKGxpc3RpbmcuLi4pXCJ9KVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBJbXBvcnRhbnQgdG8gcmV0dXJuIHRoZSBQcm9taXNlIHNvIHRoYXQgY2FsbGVyIHdpbGwgY2F0Y2ggYW55IGVycm9yLlxuICAgICAgICByZXR1cm4gdGhpcy5nY2FsLmxpc3RDYWxlbmRhcnMoKS50aGVuKGNhbGVuZGFycyA9PiB7XG4gICAgICAgICAgICAvLyBJZ25vcmUgdGhlIFwid2VlayBudW1iZXJzXCIgY2FsZW5kYXIgYXMgd2UgYWxyZWFkeSBpbmNsdWRlIHdlZWsgbnVtYmVycyBpbiBvdXIgdmlld1xuICAgICAgICAgICAgY2FsZW5kYXJzID0gY2FsZW5kYXJzLmZpbHRlcihjYWwgPT4gc2hvdWxkSW5jbHVkZUNhbGVuZGFyKGNhbCkpO1xuICAgICAgICAgICAgLy8hL1dlZWsgTnVtYmVycy9pZy50ZXN0KGMuc3VtbWFyeSlcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coY2FsZW5kYXJzLm1hcChjID0+ICh7YmdDb2xvcjogYy5iYWNrZ3JvdW5kQ29sb3IsIHByaW1hcnk6IGMucHJpbWFyeSwgc3VtbWFyeTogYy5zdW1tYXJ5LCB4OiBjfSkpKTtcbiAgICAgICAgICAgIC8vIENhbGVuZGFycyBTdWNjZXNzZnVsbHkgbGlzdGVkLlxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiBpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOlwiY2FsZW5kYXIubG9hZENhbGVuZGFyRXZlbnRzXCIsIGRlZmF1bHRNZXNzYWdlOiBcIkxvYWQgY2FsZW5kYXIgZXZlbnRzLi4uXCJ9KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmdjYWwuYmF0Y2hFdmVudHMoe1xuICAgICAgICAgICAgICAgIGNhbGVuZGFyTGlzdDogY2FsZW5kYXJzLFxuICAgICAgICAgICAgICAgIHRpbWVNaW46IG1vbWVudChmaXJzdERheSkuc3RhcnRPZignZGF5JyksXG4gICAgICAgICAgICAgICAgdGltZU1heDogbW9tZW50KGZpcnN0RGF5KS5hZGQobnVtRGF5cywgJ2RheXMnKS5lbmRPZignZGF5JylcbiAgICAgICAgICAgIH0pLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtjYWxlbmRhcnM6IHJlc3VsdCwgc3RhdHVzOiAnJ30pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG5hdmlnYXRlVG9QcmV2aW91c1dlZWsoKSB7XG4gICAgICAgIHRoaXMubG9hZERhdGEobW9tZW50KHRoaXMuc3RhdGUuZmlyc3REYXkpLmFkZCgtMSwgXCJ3ZWVrXCIpKS5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgbmF2aWdhdGVUb05leHRXZWVrKCkge1xuICAgICAgICB0aGlzLmxvYWREYXRhKG1vbWVudCh0aGlzLnN0YXRlLmZpcnN0RGF5KS5hZGQoMSwgXCJ3ZWVrXCIpKS5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVuZGVyICgpIHtcbiAgICAgICAgLy8gUHJvcHNcbiAgICAgICAgY29uc3QgeyBudW1EYXlzIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICBjb25zdCB7aW50bH0gPSB0aGlzLmNvbnRleHQ7XG4gICAgICAgIFxuICAgICAgICAvLyBTdGF0ZVxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBmaXJzdERheSxcbiAgICAgICAgICAgIHN0YXJ0SG91cixcbiAgICAgICAgICAgIGVuZEhvdXIsXG4gICAgICAgICAgICB6b29tLFxuICAgICAgICAgICAgY2FsZW5kYXJzLFxuICAgICAgICAgICAgc3RhdHVzLFxuICAgICAgICAgICAgZXJyb3JcbiAgICAgICAgfSA9IHRoaXMuc3RhdGU7XG5cbiAgICAgICAgY29uc3QgZXZlbnRTZXRzID0gT2JqZWN0LmtleXMoY2FsZW5kYXJzKVxuICAgICAgICAgICAgLm1hcChjYWxlbmRhcklkID0+IGNhbGVuZGFyc1tjYWxlbmRhcklkXSlcbiAgICAgICAgICAgIC5tYXAoKHtjYWxlbmRhciwgZXZlbnRzfSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzU2NoZWR1bGUgPSBjYWxlbmRhci5zdW1tYXJ5ID09PSAnU2tvbHNjaGVtYScgJiYgY2FsZW5kYXIuZGVzY3JpcHRpb24gPT09IFwiU3luY2hyb25pemVkXCI7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNIb2xpZGF5ID0gL2hvbGlkYXkvLnRlc3QoY2FsZW5kYXIuaWQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzQ2xhc3NSb29tID0gL2NsYXNzcm9vbS8udGVzdChjYWxlbmRhci5pZCk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBjbGFzc05hbWVzID0gW107XG4gICAgICAgICAgICAgICAgaWYgKGNhbGVuZGFyLmNvbG9ySWQpIGNsYXNzTmFtZXMucHVzaChcImdjYWwtcGFsZXR0ZS1cIiArIGNhbGVuZGFyLmNvbG9ySWQpO1xuICAgICAgICAgICAgICAgIGlmIChpc1NjaGVkdWxlKSBjbGFzc05hbWVzLnB1c2goXCJjb3Vyc2UtZXZlbnRcIik7XG4gICAgICAgICAgICAgICAgaWYgKGlzSG9saWRheSkgY2xhc3NOYW1lcy5wdXNoKFwiaG9saWRheS1ldmVudFwiKTtcbiAgICAgICAgICAgICAgICAvLyBNYXAgR29vZ2xlIENhbGVuZGFyIGV2ZW50cyB0byBvdXIgb3duIGZvcm1hdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gZXZlbnRzLm1hcChldmVudCA9PiAoe1xuICAgICAgICAgICAgICAgICAgICBpZDogZXZlbnQuaWQsXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0OiBldmVudC5zdGFydCxcbiAgICAgICAgICAgICAgICAgICAgZW5kOiBldmVudC5lbmQsXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IGV2ZW50LnN1bW1hcnksXG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBldmVudC5sb2NhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGV2ZW50LmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgICAgICAvL2JnQ29sb3I6IGNhbGVuZGFyLmJhY2tncm91bmRDb2xvcixcbiAgICAgICAgICAgICAgICAgICAgLy9mZ0NvbG9yOiBjYWxlbmRhci5mb3JlZ3JvdW5kQ29sb3IsXG4gICAgICAgICAgICAgICAgICAgIGh0bWxMaW5rOiBldmVudC5odG1sTGluayxcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAoaXNTY2hlZHVsZSAmJiBldmVudC5zdW1tYXJ5ID9cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZXMuY29uY2F0KGNvdXJzZU5hbWVUb0Nzc0NsYXNzKCdjb3Vyc2UtZXZlbnQtJywgZXZlbnQuc3VtbWFyeSkpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZXMpLmpvaW4oXCIgXCIpXG4gICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgY29uc3QgZXZlbnRzID0gZmxhdHRlbihldmVudFNldHMpO1xuXG4gICAgICAgIC8vIEVsc2UsIHJlbmRlciB0aGUgV2Vla1ZpZXcgbm93LiBBbnkgZXJyb3Igc2hvdWxkIGJlIGRpc3BsYXllZCBhcyByZWQgc3RhdHVzXG4gICAgICAgIHJldHVybiA8ZGl2IHN0eWxlPXt7cG9zaXRpb246ICdyZWxhdGl2ZScsIHRvcDogMCwgbGVmdDogMH19PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidG4tdG9vbGJhciB3ZWVrLW5hdmlnYXRpb25cIiA+XG4gICAgICAgICAgICAgICAgey8qPGRpdiBjbGFzc05hbWU9XCJidG4tZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJidG5cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtMYElkYWdgfVxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj4qL31cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ0bi1ncm91cFwiPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImJ0blwiIG9uQ2xpY2s9eygpPT50aGlzLm5hdmlnYXRlVG9QcmV2aW91c1dlZWsoKX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1hbmdsZS1sZWZ0XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPlxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJidG5cIiBvbkNsaWNrPXsoKT0+dGhpcy5uYXZpZ2F0ZVRvTmV4dFdlZWsoKX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1hbmdsZS1yaWdodFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidG4tZ3JvdXBcIj4gIFxuICAgICAgICAgICAgICAgICAgICB7aW50bC5mb3JtYXRNZXNzYWdlKHtpZDpcImNhbGVuZGFyLmN1cnJlbnREYXRlXCIsIGRlZmF1bHRNZXNzYWdlOiBcIlZlY2thIHt3ZWVrfSwge3llYXJ9XCJ9LCB7d2VlazogbW9tZW50KGZpcnN0RGF5KS53ZWVrKCksIHllYXI6bW9tZW50KGZpcnN0RGF5KS55ZWFyKCl9KX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPFdlZWtWaWV3XG4gICAgICAgICAgICAgICAgbG9jYWxlPXtpbnRsLmxvY2FsZX1cbiAgICAgICAgICAgICAgICBmaXJzdERheT17Zmlyc3REYXl9XG4gICAgICAgICAgICAgICAgc3RhcnRIb3VyPXtzdGFydEhvdXJ9XG4gICAgICAgICAgICAgICAgZW5kSG91cj17ZW5kSG91cn1cbiAgICAgICAgICAgICAgICBudW1EYXlzPXtudW1EYXlzfVxuICAgICAgICAgICAgICAgIHpvb209e3pvb219XG4gICAgICAgICAgICAgICAgZXZlbnRzPXtldmVudHN9XG4gICAgICAgICAgICAgICAgc3RhdHVzPXtzdGF0dXN9XG4gICAgICAgICAgICAgICAgZXJyb3I9e2Vycm9yfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgfVxufVxuIiwiLyogQ2FsZW5kYXJzIHRvIHNob3c6XG5cbiAgICBzdW1tYXJ5OiBcIk1hdHNlZGVsXCIsXG4gICAgc3VtbWFyeTogXCJTa29sc2NoZW1hXCIsXG4gICAgcHJpbWFyeTogdHJ1ZVxuICAgIGlkLmluY2x1ZGVzKCdjbGFzc3Jvb20nKVxuICAgIGlkLmluY2x1ZGVzKCdob2xpZGF5JylcbiovXG5cblxuZXhwb3J0IGZ1bmN0aW9uIHNob3VsZEluY2x1ZGVDYWxlbmRhciAoY2FsOiBnYXBpLmNsaWVudC5jYWxlbmRhci5DYWxlbmRhckxpc3RFbnRyeSkge1xuICBjb25zdCBzdW1tYXJ5ID0gY2FsLnN1bW1hcnkgfHwgXCJcIjtcbiAgY29uc3QgaXNPd25lciA9IC9vd25lci9pZy50ZXN0KGNhbC5hY2Nlc3NSb2xlKTtcbiAgY29uc3QgaXNQcmltYXJ5ID0gISFjYWwucHJpbWFyeTtcbiAgY29uc3QgaXNDbGFzc3Jvb21DYWxlbmRhciA9IC9jbGFzc3Jvb20vaWcudGVzdChjYWwuaWQpO1xuICBjb25zdCBpc0hvbGlkYXlDYWxlbmRhciA9IC9ob2xpZGF5L2lnLnRlc3QoY2FsLmlkKTtcblxuICByZXR1cm4gKFxuICAgIGlzUHJpbWFyeSB8fFxuICAgIGlzQ2xhc3Nyb29tQ2FsZW5kYXIgfHxcbiAgICBpc0hvbGlkYXlDYWxlbmRhciB8fFxuICAgIC8vL21hdHNlZGVsL2lnLnRlc3Qoc3VtbWFyeSkgfHxcbiAgICAoL3NjaGVtYS9pZy50ZXN0KHN1bW1hcnkpICYmIGlzT3duZXIpXG4gICk7XG59XG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFN0YXR1c0JhciAoe3N0YXR1cywgZXJyb3J9KSB7XG4gICAgaWYgKCFzdGF0dXMgJiYgIWVycm9yKSByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJzdGF0dXNiYXJcIj5cbiAgICAgICAge2Vycm9yID9cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImVycm9yXCI+eycnK2Vycm9yfTwvcD4gOlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwic3RhdHVzXCI+e3N0YXR1c308L3A+fVxuICAgIDwvZGl2PlxufVxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBUaW1lTGluZXMgKHtkYXlTdGFydCwgZGF5RW5kLCB6b29tfSkge1xuICAgIGNvbnN0IGhvdXJQaXhlbHMgPSA2MCAqIHpvb207XG4gICAgY29uc3Qgc3RhcnRIb3VyID0gbW9tZW50KGRheVN0YXJ0KS5ob3VyKCk7XG4gICAgY29uc3QgZW5kSG91ciA9IG1vbWVudChkYXlFbmQpLmhvdXIoKTtcblxuICAgIGNvbnN0IGhvdXJzID0gW107XG4gICAgZm9yIChsZXQgaG91ciA9IHN0YXJ0SG91cjsgaG91ciA8PSBlbmRIb3VyOyArK2hvdXIpIHtcbiAgICAgICAgaG91cnMucHVzaChob3VyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gPGRpdj5cbiAgICAgICAge2hvdXJzLm1hcChob3VyID0+IFxuICAgICAgICAgICAgPGRpdiBrZXk9e2hvdXJ9IGNsYXNzTmFtZT1cInRpbWVsaW5lXCIgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICAgICAgICAgIGJveFNpemluZzogJ2JvcmRlci1ib3gnLFxuICAgICAgICAgICAgICAgIG1hcmdpbjogYCR7aG91clBpeGVscyAvIDJ9cHggMCAwIDBgLFxuICAgICAgICAgICAgICAgIGhlaWdodDogaG91clBpeGVscyAvIDJcbiAgICAgICAgfX0gLz4gKX1cbiAgICA8L2Rpdj47XG59XG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XG5pbXBvcnQgRGF5VmlldyBmcm9tICcuL2RheS12aWV3JztcbmltcG9ydCBIb3VyTWFya2VyIGZyb20gJy4vaG91ci1tYXJrZXInO1xuaW1wb3J0IHtjYXBpdGFsaXplRmlyc3QsIGNsb25lLCBMfSBmcm9tICcuLi8uLi91dGlscy91dGlscyc7XG5pbXBvcnQgU3RhdHVzQmFyIGZyb20gJy4vc3RhdHVzLWJhcic7XG5pbXBvcnQgeyBTdHVkZW50Q2FsZW5kYXJFdmVudCwgRGF5RGF0YSB9IGZyb20gJy4vbW9kZWxzJztcbmltcG9ydCB7IExhbmd1YWdlQ29udGV4dCB9IGZyb20gJy4uL3V0aWxpdHktY29tcG9uZW50cy9MYW5ndWFnZUNvbnRleHQnO1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICAgIGZpcnN0RGF5OiBtb21lbnQuTW9tZW50LCAgLy8ge21vbWVudH0gVGhlIGRheSB0byBzdGFydCB3aXRoIChub3JtYWxseSBhIG1vbmRheSlcbiAgICBzdGFydEhvdXI6IG51bWJlciwgLy8ge251bWJlcn0gVGhlIGhvdXIgdG8gc3RhcnQgb25cbiAgICBlbmRIb3VyOiBudW1iZXIsICAgLy8ge251bWJlcn0gVGhlIGhvdXIgdG8gZW5kIHJlbmRlcmluZyBwZXIgZGF5XG4gICAgbnVtRGF5czogbnVtYmVyLCAgIC8vIHtudW1iZXJ9IE51bWJlciBvZiBkYXlzLCBub3JtYWxseSA1LlxuICAgIGV2ZW50czogU3R1ZGVudENhbGVuZGFyRXZlbnRbXSwgICAgLy8gQXJyYXkgb2YgZXZlbnRzIHRvIGRpc3BsYXkgaW4gdGhlIHdlZWsuXG4gICAgbG9jYWxlOiBzdHJpbmcsICAgIC8vIExvY2FsZSB0byB1c2UgZm9yIHNob3dpbmcgd2VlayBkYXlzIGFuZCBob3VyIG1hcmtzLlxuICAgIHpvb206IG51bWJlciwgICAgICAvLyB7bnVtYmVyfSBab29tIHdoZXJlIDEgbWVhbnMgdGhhdCAxIG1pbnV0ZSA9IDEgcGl4ZWwuICBcbiAgICBzdGF0dXM/OiBzdHJpbmcsXG4gICAgZXJyb3I/OiBFcnJvclxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXZWVrVmlldyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcz4ge1xuICAgIHN0YXRpYyBjb250ZXh0VHlwZSA9IExhbmd1YWdlQ29udGV4dDtcbiAgICByZW5kZXIgKCkge1xuICAgICAgICAvLyBQcm9wczpcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgZmlyc3REYXksICAvLyB7bW9tZW50fSBUaGUgZGF5IHRvIHN0YXJ0IHdpdGggKG5vcm1hbGx5IGEgbW9uZGF5KVxuICAgICAgICAgICAgc3RhcnRIb3VyLCAvLyB7bnVtYmVyfSBUaGUgaG91ciB0byBzdGFydCBvblxuICAgICAgICAgICAgZW5kSG91ciwgICAvLyB7bnVtYmVyfSBUaGUgaG91ciB0byBlbmQgcmVuZGVyaW5nIHBlciBkYXlcbiAgICAgICAgICAgIG51bURheXMsICAgLy8ge251bWJlcn0gTnVtYmVyIG9mIGRheXMsIG5vcm1hbGx5IDUuXG4gICAgICAgICAgICBldmVudHMsICAgIC8vIEFycmF5IG9mIGV2ZW50cyB0byBkaXNwbGF5IGluIHRoZSB3ZWVrLlxuICAgICAgICAgICAgbG9jYWxlLCAgICAvLyBMb2NhbGUgdG8gdXNlIGZvciBzaG93aW5nIHdlZWsgZGF5cyBhbmQgaG91ciBtYXJrcy5cbiAgICAgICAgICAgIHpvb20sICAgICAgLy8ge251bWJlcn0gWm9vbSB3aGVyZSAxIG1lYW5zIHRoYXQgMSBtaW51dGUgPSAxIHBpeGVsLiAgXG4gICAgICAgICAgICBzdGF0dXMsXG4gICAgICAgICAgICBlcnJvclxuICAgICAgICB9ID0gdGhpcy5wcm9wcztcblxuICAgICAgICBjb25zdCB7aW50bH0gPSB0aGlzLmNvbnRleHQ7XG5cbiAgICAgICAgLy8gUHJlcGFyZSBEYXlWaWV3IGRhdGFzIFxuICAgICAgICBjb25zdCBkYXlEYXRhczogRGF5RGF0YVtdID0gW107XG4gICAgICAgIGxldCBkYXkgPSBtb21lbnQoZmlyc3REYXkpO1xuICAgICAgICBmb3IgKGxldCBpPTA7aTxudW1EYXlzOyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IGRheVN0YXJ0ID0gbW9tZW50KGRheSkuaG91cihzdGFydEhvdXIpO1xuICAgICAgICAgICAgY29uc3QgZGF5RW5kID0gbW9tZW50KGRheSkuaG91cihlbmRIb3VyKTtcbiAgICAgICAgICAgIGNvbnN0IGRheURhdGUgPSBtb21lbnQoZGF5KS5mb3JtYXQoJ1lZWVktTU0tREQnKTtcbiAgICAgICAgICAgIGNvbnN0IGlzVG9kYXkgPSBtb21lbnQoZGF5U3RhcnQpLnN0YXJ0T2YoXCJkYXlcIikudmFsdWVPZigpID09PSBtb21lbnQoKS5zdGFydE9mKFwiZGF5XCIpLnZhbHVlT2YoKTtcbiAgICAgICAgICAgIGRheURhdGFzLnB1c2goe1xuICAgICAgICAgICAgICAgIG5hbWU6IGNhcGl0YWxpemVGaXJzdChkYXlTdGFydC50b0RhdGUoKS50b0xvY2FsZVN0cmluZyhsb2NhbGUsIHtcbiAgICAgICAgICAgICAgICAgICAgd2Vla2RheTogJ2xvbmcnLFxuICAgICAgICAgICAgICAgICAgICBkYXk6J251bWVyaWMnLFxuICAgICAgICAgICAgICAgICAgICBtb250aDogJ3Nob3J0J30pKSxcbiAgICAgICAgICAgICAgICBkYXlTdGFydCxcbiAgICAgICAgICAgICAgICBkYXlFbmQsXG4gICAgICAgICAgICAgICAgaXNUb2RheSxcbiAgICAgICAgICAgICAgICBldmVudHM6IGV2ZW50cy5maWx0ZXIoZXZlbnQgPT5cbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RhcnQgJiYgZXZlbnQuZW5kICYmIGV2ZW50LnN0YXJ0LmRhdGVUaW1lICYmIGV2ZW50LmVuZC5kYXRlVGltZSAmJlxuICAgICAgICAgICAgICAgICAgICAobW9tZW50KGV2ZW50LnN0YXJ0LmRhdGVUaW1lKS5pc0JldHdlZW4oZGF5U3RhcnQsIGRheUVuZCkgfHxcbiAgICAgICAgICAgICAgICAgICAgIG1vbWVudChldmVudC5lbmQuZGF0ZVRpbWUpLmlzQmV0d2VlbihkYXlTdGFydCwgZGF5RW5kKSkpXG4gICAgICAgICAgICAgICAgICAgICAvLyBDaGFuZ2Ugc3RhcnQgLyBlbmQgdG8gZGlyZWN0bHkgcG9pbnQgdG8gdGhlIGRhdGVUaW1lXG4gICAgICAgICAgICAgICAgICAgICAubWFwKGV2ZW50ID0+IGNsb25lKGV2ZW50LCB7c3RhcnRNb21lbnQ6IG1vbWVudChldmVudC5zdGFydC5kYXRlVGltZSksIGVuZE1vbWVudDogbW9tZW50KGV2ZW50LmVuZC5kYXRlVGltZSl9KSlcbiAgICAgICAgICAgICAgICAgICAgIC5zb3J0KChhLGIpID0+IGEuc3RhcnRNb21lbnQudmFsdWVPZiA+IGIuc3RhcnRNb21lbnQudmFsdWVPZiA/IDEgOiBhLnN0YXJ0TW9tZW50IDwgYi5zdGFydE1vbWVudCA/IC0xIDogMCksXG4gICAgICAgICAgICAgICAgZnVsbERheUV2ZW50czogZXZlbnRzLmZpbHRlcihldmVudCA9PlxuICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZnkgdGhhdCBpdCBpcyBhIGZ1bGwtZGF5LWV2ZW50XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0YXJ0ICYmIGV2ZW50LmVuZCAmJiBldmVudC5zdGFydC5kYXRlICYmIGV2ZW50LmVuZC5kYXRlICYmXG4gICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmeSBpdCBhcHBsaWVzIHRvIGN1cnJlbnQgZGF5XG4gICAgICAgICAgICAgICAgICAgIChldmVudC5zdGFydC5kYXRlIDw9IGRheURhdGUgJiYgZXZlbnQuZW5kLmRhdGUgPiBkYXlEYXRlKSkgXG4gICAgICAgICAgICAgICAgICAgICAvLyBDaGFuZ2Ugc3RhcnQgLyBlbmQgdG8gZGlyZWN0bHkgcG9pbnQgdG8gdGhlIGRhdGUgb2JqZWN0XG4gICAgICAgICAgICAgICAgICAgIC5tYXAoZXZlbnQgPT4gY2xvbmUoZXZlbnQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0RGF0ZTogZXZlbnQuc3RhcnQuZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZERhdGU6IGV2ZW50LmVuZC5kYXRlfSkpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRheSA9IG1vbWVudChkYXkpIC8vIGNsb25lIGl0XG4gICAgICAgICAgICAgICAgLmFkZCgxLCAnZGF5cycpOyAvLyBBZGQgYW5vdGhlciBkYXlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlbmRlclxuICAgICAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJ2ZW1lbmRvLXdlZWt2aWV3XCI+XG4gICAgICAgICAgPHRhYmxlPjx0Ym9keT5cbiAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3tib3JkZXI6IDB9fT48L3RkPlxuICAgICAgICAgICAgICAgIHtkYXlEYXRhcy5tYXAoZCA9PiA8dGQga2V5PXtkLmRheVN0YXJ0LnRvSVNPU3RyaW5nKCl9IGNsYXNzTmFtZT17ZC5pc1RvZGF5ID8gXCJ0b2RheVwiIDogbnVsbH0+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImRheW5hbWVcIj57ZC5uYW1lfTwvcD5cbiAgICAgICAgICAgICAgICA8L3RkPil9XG4gICAgICAgICAgICA8L3RyPjx0cj5cbiAgICAgICAgICAgICAgICA8dGQgc3R5bGU9e3tib3JkZXI6IDB9fT48cCBjbGFzc05hbWU9XCJ3ZWVrLW51bWJlclwiPntpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOlwiY2FsZW5kYXIud2Vla051bWJlclwiLCBkZWZhdWx0TWVzc2FnZTpcIlZ7d2Vla051bWJlcn1cIn0sIHt3ZWVrTnVtYmVyOm1vbWVudChmaXJzdERheSkud2VlaygpfSl9PC9wPjwvdGQ+XG4gICAgICAgICAgICAgICAge2RheURhdGFzLm1hcChkYXkgPT5cbiAgICAgICAgICAgICAgICAgICAgPHRkIGtleT17ZGF5LmRheVN0YXJ0LnRvSVNPU3RyaW5nKCl9IGNsYXNzTmFtZT17ZGF5LmlzVG9kYXkgPyBcInRvZGF5XCIgOiBudWxsfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtkYXkuZnVsbERheUV2ZW50cy5tYXAoKHtpZCwgdGV4dCwgbG9jYXRpb24sIGRlc2NyaXB0aW9uLCBodG1sTGluaywgY2xhc3NOYW1lfSkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGtleT17aWR9IGNsYXNzTmFtZT17XCJkYXl2aWV3ZXZlbnQgZnVsbC1kYXkgXCIgKyBjbGFzc05hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtgJHt0ZXh0fWAgKyAobG9jYXRpb24gP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcXG5cIiArIGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6XCJjYWxlbmRhci5mdWxsRGF5RXZlbnRMb2NhdGlvblwiLCBkZWZhdWx0TWVzc2FnZTpcIlBsYXRzOiB7bG9jYXRpb259XCJ9LCB7bG9jYXRpb246bG9jYXRpb259KSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZGVzY3JpcHRpb24gP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXFxuXCIgKyBkZXNjcmlwdGlvbiA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBjbGFzc05hbWU9XCJldmVudC10aXRsZVwiIGhyZWY9e2h0bWxMaW5rfSB0YXJnZXQ9XCJjYWxlbmRhci1ldmVudFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3RleHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2xvY2F0aW9uICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJldmVudC1sb2NhdGlvblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsb2NhdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZGVzY3JpcHRpb24gJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImV2ZW50LWRlc2NyaXB0aW9uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2Rlc2NyaXB0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvdHI+PHRyPlxuICAgICAgICAgICAgPHRkIHN0eWxlPXt7Ym9yZGVyOiAwfX0+XG4gICAgICAgICAgICAgICAgPEhvdXJNYXJrZXJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRIb3VyPXtzdGFydEhvdXJ9XG4gICAgICAgICAgICAgICAgICAgIGVuZEhvdXI9e2VuZEhvdXJ9XG4gICAgICAgICAgICAgICAgICAgIGxvY2FsZT17bG9jYWxlfVxuICAgICAgICAgICAgICAgICAgICB6b29tPXt6b29tfSAvPlxuICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICB7ZGF5RGF0YXMubWFwKGRheSA9PiA8dGQga2V5PXtkYXkuZGF5U3RhcnQudG9JU09TdHJpbmcoKX0gY2xhc3NOYW1lPXtkYXkuaXNUb2RheSA/IFwidG9kYXlcIiA6IG51bGx9PjxEYXlWaWV3XG4gICAgICAgICAgICAgICAgICAgIGtleT17ZGF5LmRheVN0YXJ0LnRvSVNPU3RyaW5nKCl9XG4gICAgICAgICAgICAgICAgICAgIGRheVN0YXJ0PXtkYXkuZGF5U3RhcnR9XG4gICAgICAgICAgICAgICAgICAgIGRheUVuZD17ZGF5LmRheUVuZH1cbiAgICAgICAgICAgICAgICAgICAgZXZlbnRzPXtkYXkuZXZlbnRzfVxuICAgICAgICAgICAgICAgICAgICBsb2NhbGU9e2xvY2FsZX1cbiAgICAgICAgICAgICAgICAgICAgem9vbT17em9vbX1cbiAgICAgICAgICAgICAgICAgICAgaXNMYXN0Q2FsbD17c3RhdHVzID09ICcnfSAvPiA8L3RkPil9XG4gICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIChzdGF0dXMgfHwgZXJyb3IpICYmICghZXJyb3IgfHwgZXJyb3IubmFtZSAhPT0gXCJVbmF1dGhvcml6ZWRFcnJvclwiKSAmJlxuICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAvLyBTaG93IHN0YXR1cyAvIGVycm9yXG4gICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgIDx0cj48dGQgc3R5bGU9e3tib3JkZXI6IDB9fT48L3RkPjx0ZCBzdHlsZT17e2JvcmRlcjogMH19IGNvbFNwYW49e251bURheXN9PlxuICAgICAgICAgICAgICAgICAgICAgICAgPFN0YXR1c0JhciBzdGF0dXM9e3N0YXR1c30gZXJyb3I9e2Vycm9yfSAvPlxuICAgICAgICAgICAgICAgICAgICA8L3RkPjwvdHI+XG4gICAgICAgICAgICB9XG4gICAgICAgICAgPC90Ym9keT48L3RhYmxlPlxuICAgICAgICA8L2Rpdj5cbiAgICB9XG59IiwiaW1wb3J0IHsgVXNlclRhc2tzQm94UHJvcHMgfSBmcm9tIFwiLi4vd2Vla3BsYW5uZXIvdXNlci10YXNrcy1ib3hcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFdlZWtwbGFubmVyUHJvZ3Jlc3NEYXRhKHRhc2tTZXRzOiBQYXJ0aWFsPFVzZXJUYXNrc0JveFByb3BzPltdKSB7XG4gICAgdmFyIGNoYXJ0VGFza3M6IHtcbiAgICAgICAgY29tcGxldGVkVGFza3M6IG51bWJlciwgXG4gICAgICAgIHRvdGFsTnVtYmVyT2ZUYXNrczogbnVtYmVyLFxuICAgICAgICBzdWJqZWN0RGF0YToge1xuICAgICAgICAgICAgW2NvbHVtbkhlYWRlcjogc3RyaW5nXTogeyBjb21wbGV0ZWROdW1iZXJPZlRhc2tzOiBudW1iZXIsIG51bWJlck9mVGFza3M6IG51bWJlciB9XG4gICAgICAgIH1cbiAgICB9ID0ge2NvbXBsZXRlZFRhc2tzOiAwLCB0b3RhbE51bWJlck9mVGFza3M6IDAgLCBzdWJqZWN0RGF0YToge319O1xuXG4gICAgdGFza1NldHMuZm9yRWFjaChlbGVtID0+IGVsZW0ubGVhcm5pbmdHb2Fscy5mb3JFYWNoKHggPT4ge1xuICAgICAgICB2YXIgc3ViamVjdENvbXBsZXRlZFRhc2tzID0geC50YXNrcy5maWx0ZXIodCA9PiB0LmRvbmUpLmxlbmd0aDtcbiAgICAgICAgbGV0IGNvdXJzZVN1YmplY3REYXRhID0gY2hhcnRUYXNrcy5zdWJqZWN0RGF0YVtlbGVtLmNvdXJzZU5hbWVdO1xuICAgICAgICBpZiAoIWNvdXJzZVN1YmplY3REYXRhKSB7XG4gICAgICAgICAgICBjb3Vyc2VTdWJqZWN0RGF0YSA9IGNoYXJ0VGFza3Muc3ViamVjdERhdGFbZWxlbS5jb3Vyc2VOYW1lXSA9IHtcbiAgICAgICAgICAgICAgICBjb21wbGV0ZWROdW1iZXJPZlRhc2tzOiAwLFxuICAgICAgICAgICAgICAgIG51bWJlck9mVGFza3M6IDBcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgY291cnNlU3ViamVjdERhdGEuY29tcGxldGVkTnVtYmVyT2ZUYXNrcyArPSBzdWJqZWN0Q29tcGxldGVkVGFza3M7XG4gICAgICAgIGNvdXJzZVN1YmplY3REYXRhLm51bWJlck9mVGFza3MgKz0geC50YXNrcy5sZW5ndGg7XG5cbiAgICAgICAgY2hhcnRUYXNrcy5jb21wbGV0ZWRUYXNrcyArPSBzdWJqZWN0Q29tcGxldGVkVGFza3M7XG4gICAgICAgIGNoYXJ0VGFza3MudG90YWxOdW1iZXJPZlRhc2tzICs9IHgudGFza3MubGVuZ3RoO1xuICAgIH0pKTtcbiAgICByZXR1cm4gY2hhcnRUYXNrcztcbn0iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gICAgcGVyY2VudGFnZTogbnVtYmVyO1xuICAgIGJhY2tncm91bmRDb2xvcj86IHN0cmluZztcbiAgICBwcm9ncmVzc0NvbG9yPzogc3RyaW5nO1xuICAgIGVycm9yTWVzc2FnZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIERvdWdobnV0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzPiB7XG4gICAgcHVibGljIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIjZWZlZmVmXCIsXG4gICAgICAgIHByb2dyZXNzQ29sb3I6IFwiIzNkYmNhMlwiLFxuICAgICAgICBlcnJvck1lc3NhZ2U6IG51bGxcbiAgICB9O1xuXG4gICAgcmVuZGVyKCl7XG4gICAgICAgIGNvbnN0IHtwZXJjZW50YWdlLCBlcnJvck1lc3NhZ2UsIGJhY2tncm91bmRDb2xvciwgcHJvZ3Jlc3NDb2xvcn0gPSB0aGlzLnByb3BzO1xuICAgICAgICAvL2RlZmF1bHQgdmFsdWVzXG4gICAgICAgIHZhciBzdHJva2UgPSAyO1xuICAgICAgICAvL2VxdWFscyB3aXRoIGhlIGNpcmN1bWZlcmVuY2UvMklJXG4gICAgICAgIHZhciByYWRpdXMgPSAxMDAgLyAoMiAqIDMuMTQpO1xuICAgICAgICAvL3Rha2UgaW50byBhY2NvdW50IHRoZSBzdHJva2VcbiAgICAgICAgdmFyIGNlbnRlciA9IHJhZGl1cyArIHN0cm9rZTsgXG4gICAgICAgIHZhciB2aWV3Ym94VyA9IGNlbnRlciAqIDI7XG4gICAgICAgIHZhciB2aWV3dmJveEggPSBjZW50ZXIgKiAyO1xuICAgICAgICBjb25zdCByb3VuZGVkUGVyY2VudGFnZSA9IE1hdGgucm91bmQocGVyY2VudGFnZSk7XG4gICAgICAgIHZhciBzdGFydEVycm9yVGV4dCA9IDEwO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxzdmcgY2xhc3NOYW1lPVwiZG91Z2hudXQtY2hhcnRcIiB2aWV3Qm94PXtgMCAwICR7dmlld2JveFd9ICR7dmlld3Zib3hIfWB9IHdpZHRoPVwiMTAwJVwiIGhlaWdodD1cIjEwMCVcIj5cbiAgICAgICAgICAgICAgICA8Y2lyY2xlIGNsYXNzTmFtZT1cImNpcmNsZS1jaGFydC1iYWNrZ3JvdW5kXCIgc3Ryb2tlPXtiYWNrZ3JvdW5kQ29sb3J9IHN0cm9rZVdpZHRoPXtzdHJva2UgKyAxfSBmaWxsPVwibm9uZVwiIGN4PXtjZW50ZXJ9IGN5PXtjZW50ZXJ9IHI9e3JhZGl1c30gLz5cbiAgICAgICAgICAgICAgICA8Y2lyY2xlIGNsYXNzTmFtZT1cImNpcmNsZS1jaGFydC1jaXJjbGVcIiBzdHJva2U9e3Byb2dyZXNzQ29sb3J9IHJlZj1cInByb2dyZXNzQ2lyY2xlXCIgc3Ryb2tlV2lkdGg9e3N0cm9rZX0gc3R5bGU9e3sgc3Ryb2tlRGFzaGFycmF5OiBgJHtyb3VuZGVkUGVyY2VudGFnZX0sIDEwMGAgfX0gc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgZmlsbD1cIm5vbmVcIiBjeD17Y2VudGVyfSBjeT17Y2VudGVyfSByPXtyYWRpdXN9IC8+XG4gICAgICAgICAgICAgICAgPGcgY2xhc3NOYW1lPVwiY2lyY2xlLWNoYXJ0LWluZm9cIj5cbiAgICAgICAgICAgICAgICAgICAgeyFlcnJvck1lc3NhZ2UgPyA8dGV4dCBjbGFzc05hbWU9XCJjaXJjbGUtY2hhcnQtcGVyY2VudFwiIHg9e2NlbnRlcn0geT17Y2VudGVyfSBhbGlnbm1lbnRCYXNlbGluZT1cImNlbnRyYWxcIiB0ZXh0QW5jaG9yPVwibWlkZGxlXCI+e2Ake3JvdW5kZWRQZXJjZW50YWdlfSVgfTwvdGV4dD4gOlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRleHQgY2xhc3NOYW1lPVwiY2lyY2xlLWNoYXJ0LXBlcmNlbnQtZXJyb3JcIiB4PXtjZW50ZXJ9IHk9e2NlbnRlcn0gYWxpZ25tZW50QmFzZWxpbmU9XCJjZW50cmFsXCIgZm9udFNpemU9XCI1XCIgdGV4dEFuY2hvcj1cIm1pZGRsZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlLnNwbGl0KCcgJykubWFwKGVsZW1lbnQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRzcGFuID0gPHRzcGFuIGtleT17ZWxlbWVudH0geD17Y2VudGVyfSB5PXtzdGFydEVycm9yVGV4dH0+e2VsZW1lbnR9PC90c3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0RXJyb3JUZXh0ICs9IDU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHNwYW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC90ZXh0Pn1cbiAgICAgICAgICAgICAgICA8L2c+XG4gICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgKVxuICAgIH1cbn0iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gICAgbnVtYmVyT2ZUYXNrczogbnVtYmVyO1xuICAgIGNvbXBsZXRlZE51bWJlck9mVGFza3M6IG51bWJlcjtcbiAgICBtYXhpbXVtVGFza3NEaXNwbGF5ZWQ/OiBudW1iZXI7XG4gICAgYmFja2dyb3VuZENvbG9yPzogc3RyaW5nO1xuICAgIHByb2dyZXNzQ29sb3I/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBHb2FsUHJvZ3Jlc3MgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHM+IHtcbiAgICBwdWJsaWMgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgbnVtYmVyb2ZUYXNrczogMCxcbiAgICAgICAgY29tcGxldGVkTnVtYmVyT2ZUYXNrczogMCxcbiAgICAgICAgbWF4aW11bVRhc2tzRGlzcGxheWVkOiAxMCxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcImxpZ2h0Z3JleVwiLFxuICAgICAgICBwcm9ncmVzc0NvbG9yOiBcIiMzZGJjYTJcIixcbiAgICB9O1xuXG4gICAgY3JlYXRlUHJvZ3Jlc3MgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgbnVtYmVyT2ZUYXNrcywgY29tcGxldGVkTnVtYmVyT2ZUYXNrcywgbWF4aW11bVRhc2tzRGlzcGxheWVkLCBiYWNrZ3JvdW5kQ29sb3IsIHByb2dyZXNzQ29sb3IgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGxldCBwcm9ncmVzcyA9IFtdO1xuICAgICAgICBpZihudW1iZXJPZlRhc2tzID4gbWF4aW11bVRhc2tzRGlzcGxheWVkKXtcbiAgICAgICAgICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwicHJvZ3Jlc3Mtb3ZlcnZpZXdcIj4ge2NvbXBsZXRlZE51bWJlck9mVGFza3N9IC8ge251bWJlck9mVGFza3N9IDwvZGl2PjtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IHRhc2tObyA9IDE7IHRhc2tObyA8PSBudW1iZXJPZlRhc2tzOyB0YXNrTm8rKykge1xuICAgICAgICAgICAgcHJvZ3Jlc3MucHVzaChcbiAgICAgICAgICAgIDxzdmcga2V5PXt0YXNrTm99PlxuICAgICAgICAgICAgICAgIDxjaXJjbGUgY2xhc3NOYW1lPVwiY2lyY2xlLWNoYXJ0LWJhY2tncm91bmRcIiBmaWxsPXt0YXNrTm8gPiBjb21wbGV0ZWROdW1iZXJPZlRhc2tzID8gYmFja2dyb3VuZENvbG9yIDogcHJvZ3Jlc3NDb2xvcn0gY3g9XCI4XCIgY3k9XCI4XCIgcj1cIjhcIiAvPlxuICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwcm9ncmVzcztcbiAgICB9XG5cbiAgICByZW5kZXIoKXsgIFxuICAgICAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJnb2Fscy1wcm9ncmVzc1wiPnt0aGlzLmNyZWF0ZVByb2dyZXNzKCl9PC9kaXY+XG4gICAgfVxufSIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgICBwZXJjZW50YWdlOiBudW1iZXI7XG4gICAgYmFja2dyb3VuZENvbG9yPzogc3RyaW5nO1xuICAgIHByb2dyZXNzQ29sb3I/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBQcm9ncmVzcyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcz4ge1xuICAgIHB1YmxpYyBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgICAgICBwZXJjZW50YWdlOiAwLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiI0YxRjVGNFwiLFxuICAgICAgICBwcm9ncmVzc0NvbG9yOiBcIiMzZGJjYTJcIixcbiAgICB9O1xuXG4gICAgcmVuZGVyKCl7XG4gICAgICAgIGNvbnN0IHtwZXJjZW50YWdlLCBiYWNrZ3JvdW5kQ29sb3IsIHByb2dyZXNzQ29sb3J9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgY29uc3Qgcm91bmRlZFBlcmNlbnRhZ2UgPSBNYXRoLnJvdW5kKHBlcmNlbnRhZ2UpO1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPHN2ZyBjbGFzc05hbWU9XCJwcm9ncmVzcy1jaGFydFwiIHdpZHRoPVwiMTAwJVwiIGhlaWdodD1cIjI1XCI+XG4gICAgICAgICAgICA8cmVjdCBmaWxsPXtiYWNrZ3JvdW5kQ29sb3J9ICB3aWR0aD1cIjEwMCVcIiBoZWlnaHQ9XCIxMDAlXCIgcng9XCI0XCIvPlxuICAgICAgICAgICAgPHJlY3QgY2xhc3NOYW1lPVwiZmlsbFwiIGZpbGw9e3Byb2dyZXNzQ29sb3J9IHdpZHRoPXtgJHtyb3VuZGVkUGVyY2VudGFnZX0lYH0gaGVpZ2h0PVwiMTAwJVwiIHJ4PVwiNFwiLz5cbiAgICAgICAgICAgIDx0ZXh0IGNsYXNzTmFtZT1cImZpbGxlZC10ZXh0XCIgdGV4dEFuY2hvcj1cIm1pZGRsZVwiIHg9XCI1MCVcIiB5PVwiNTAlXCIgZHk9XCIuM2VtXCI+e2Ake3JvdW5kZWRQZXJjZW50YWdlfSVgfTwvdGV4dD5cdFxuICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgIClcbiAgICB9XG59IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgTCB9IGZyb20gXCIuLi8uLi8uLi91dGlscy91dGlsc1wiO1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBvbkNsaWNrLFxuICBjbGFzc05hbWU/LFxuICBzdHlsZT8sXG4gIHRpdGxlP1xufTtcblxuZXhwb3J0IGNvbnN0IFJlbW92ZUl0ZW0gPSAoeyBvbkNsaWNrLCBjbGFzc05hbWUsIHN0eWxlLCB0aXRsZSB9OiBQcm9wcykgPT5cblxuICA8ZGl2XG4gICAgdGl0bGU9e3RpdGxlIHx8IExgUmFkZXJhYH1cbiAgICBjbGFzc05hbWU9e1wicmVtb3ZlSXRlbSBcIiArIChjbGFzc05hbWUgfHwgXCJcIil9XG4gICAgb25DbGljaz17b25DbGlja30gc3R5bGU9e3N0eWxlfSAvPlxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5leHBvcnQgY29uc3QgU3Bpbm5lciA9ICgpPT4gPHNwYW4+PGkgY2xhc3NOYW1lPVwiZmEgZmEtc3Bpbm5lciBmYS1zcGluXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPiZuYnNwOzwvc3Bhbj47XG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIHZpc2libGU6IGJvb2xlYW47XG4gIHRleHQ6IHN0cmluZztcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xuICBvbkNvbmZpcm06ICgpPT52b2lkO1xuICBvbkNhbmNlbDogKCk9PnZvaWQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBDb25maXJtYXRpb24gKHByb3BzOiBQcm9wcykge1xuICByZXR1cm4gPGRpdlxuICAgIGNsYXNzTmFtZT17YGNvbmZpcm1hdGlvbi1ib3ggJHtwcm9wcy5jbGFzc05hbWV9JHtwcm9wcy52aXNpYmxlID8gXCIgdmlzaWJsZVwiIDogXCJcIn1gfT5cbiAgICA8cD57cHJvcHMudGV4dH08L3A+XG4gICAgPGJ1dHRvbiBvbkNsaWNrPXsoKT0+cHJvcHMub25Db25maXJtKCl9Pk9LPC9idXR0b24+XG4gICAgPGJ1dHRvbiBvbkNsaWNrPXsoKT0+cHJvcHMub25DYW5jZWwoKX0+QXZicnl0PC9idXR0b24+XG4gIDwvZGl2Pjtcbn1cbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IExlYXJuaW5nTW9kdWxlVGFzaywgVGFza0xpc3QgfSBmcm9tICcuL3Rhc2stbGlzdCc7XG5pbXBvcnQgeyBMYW5ndWFnZUNvbnRleHQgfSBmcm9tICcuLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvTGFuZ3VhZ2VDb250ZXh0JztcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgY29tbW9uVGFza3M6IExlYXJuaW5nTW9kdWxlVGFza1tdXG4gIGxlYXJuaW5nR29hbHM6IExlYXJuaW5nR29hbFtdXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGVhcm5pbmdHb2FsIHtcbiAgbmFtZTogc3RyaW5nO1xuICBsZWFybmluZ1Rhc2tzOiBMZWFybmluZ01vZHVsZVRhc2tbXTtcbn1cblxuZXhwb3J0IGNsYXNzIExlYXJuaW5nR29hbHNMaXN0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzPiB7XG4gIHN0YXRpYyBjb250ZXh0VHlwZSA9IExhbmd1YWdlQ29udGV4dDtcbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHtjb21tb25UYXNrcywgbGVhcm5pbmdHb2Fsc30gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHtpbnRsfSA9IHRoaXMuY29udGV4dDtcbiAgICByZXR1cm4gPGRpdj57bGVhcm5pbmdHb2Fscy5tYXAobGcgPT4gPGRpdiBrZXk9e2xnLm5hbWV9PlxuICAgICAgPGg1PntsZy5uYW1lfTwvaDU+XG4gICAgICA8VGFza0xpc3QgbGVhcm5pbmdUYXNrcz17bGcubGVhcm5pbmdUYXNrc30gLz5cbiAgICA8L2Rpdj4pfVxuICAgIHtjb21tb25UYXNrcy5sZW5ndGggPiAwICYmIDxkaXY+XG4gICAgICB7bGVhcm5pbmdHb2Fscy5sZW5ndGggPiAwICYmIDxoNT57aW50bC5mb3JtYXRNZXNzYWdlKHtpZDpcImxlYXJuaW5nR29hbHNMb3N0Lm92ZXJhbGxcIiwgZGVmYXVsdE1lc3NhZ2U6XCLDlnZlcmdyaXBhbmRlXCJ9KSB9PC9oNT59IFxuICAgICAgPFRhc2tMaXN0IGxlYXJuaW5nVGFza3M9e2NvbW1vblRhc2tzfSAvPlxuICAgIDwvZGl2Pn1cbiAgICA8L2Rpdj47XG4gIH1cbn0iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBDb3Vyc2UsIENvdXJzZU1vZHVsZSwgVGFzaywgVXNlclRhc2sgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XG5pbXBvcnQgZW52IGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvS0VELmVudic7XG5pbXBvcnQgeyBXZWVrUGxhbm5lclBlcnNpc3RlZFN0YXRlIH0gZnJvbSBcIi4uLy4uL3dlZWtwbGFubmVyL3dlZWtwbGFubmVyLXBlcnNpc3RlZC1zdGF0ZVwiO1xuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xuaW1wb3J0IHsgY3JlYXRlVVVJRCwgQmF0Y2hSdW5uZXIsIERvY3VtZW50QWNjZXNzIH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnQnO1xuaW1wb3J0IHsgdXNlclRhc2tzUmVwbyB9IGZyb20gJy4uLy4uLy4uL3JlcG9zL3VzZXItdGFza3MtcmVwbyc7XG5pbXBvcnQgeyBhcnJheVRvTWFwLCBMIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xuaW1wb3J0IHsgU3Bpbm5lciB9IGZyb20gJy4uLy4uL2NvdXJzZS1idWlsZGVyL3N1Yi1jb21wb25lbnRzL3NwaW5uZXInO1xuaW1wb3J0IHsgQ29uZmlybWF0aW9uIH0gZnJvbSAnLi9jb25maXJtYXRpb24nO1xuaW1wb3J0IHsgTGFuZ3VhZ2VDb250ZXh0IH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL0xhbmd1YWdlQ29udGV4dCc7XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIGxlYXJuaW5nVGFza3M6IExlYXJuaW5nTW9kdWxlVGFza1tdXG59XG5cbmludGVyZmFjZSBTdGF0ZSB7XG4gIHdlZWtEYXRlOiBudW1iZXI7XG4gIHVzZXJUYXNrczogVXNlclRhc2tbXTtcbiAgY29uZmlybWF0aW9uczogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTGVhcm5pbmdNb2R1bGVUYXNrIHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xuICB1cmw6IHN0cmluZztcbiAgLyoqIGNvdXJzZU5hbWVcbiAgICogRm9yIEtHOiBjb3Vyc2VOYW1lXG4gICAqIEZvciBLUzogU3ViamVjdCBuYW1lXG4gICAqL1xuICBjb3Vyc2VOYW1lOiBzdHJpbmc7XG4gIC8qKiBsZWFybmluZ0dvYWxcbiAgICogRm9yIEtHOiBtb2R1bGUgbmFtZSBvciBsZWFybmluZyBnb2FsIG9mIHRoZSB0YXNrXG4gICAqIEZvciBLUy9zdGVwLWNvdXJzZTogY291cnNlIG5hbWVcbiAgICogRm9yIEtTL3RoZW1lLWNvdXJzZTogbGVhcm5pbmcgZ29hbFxuICAgKi9cbiAgbGVhcm5pbmdHb2FsOiBzdHJpbmc7XG4gIC8qKiBTdGVwXG4gICAqIE9ubHkgcHJlc2VudCBpbiBLUy9zdGVwLWNvdXJzZVxuICAgKi9cbiAgc3RlcD86IG51bWJlcjtcbiAgLyoqIHRhc2tcbiAgICogT25seSBmb3IgY291cnNlcyBidWlsdCBieSBjb3Vyc2VidWlsZGVyXG4gICAqL1xuICB0YXNrPzogVGFzaztcbiAgLyoqIGNvdXJzZVxuICAgKiBPbmx5IGZvciBjb3Vyc2VzIGJ1aWx0IGJ5IGNvdXJzZWJ1aWxkZXJcbiAgICovXG4gIGNvdXJzZT86IENvdXJzZTtcbiAgLyoqIGNvdXJzZUluZm9cbiAgICogT25seSBmb3IgY291cnNlcyBidWlsZCBieSBzdWJqZWN0cGxhbm5lclxuICAgKi9cbiAgY291cnNlSW5mbz86IHtcbiAgICBzY2hvb2w6IHN0cmluZyAvLyBTY2hvb2wgbmFtZVxuICAgIGNvdXJzZTogc3RyaW5nIC8vIENvdXJzZSBJbnN0YW5jZSBJRFxuICAgIHRhYjogc3RyaW5nICAgIC8vIENvdXJzZVRhYiBJRFxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBUYXNrTGlzdCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcyxTdGF0ZT4ge1xuICBzdGF0aWMgY29udGV4dFR5cGUgPSBMYW5ndWFnZUNvbnRleHQ7XG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgdXNlclRhc2tzOiBbXSxcbiAgICAgIHdlZWtEYXRlOiBEYXRlLm5vdygpLFxuICAgICAgY29uZmlybWF0aW9uczogW11cbiAgICB9XG4gICAgdGhpcy5vbkNoYW5nZSA9IHRoaXMub25DaGFuZ2UuYmluZCh0aGlzKTsgICAgXG4gIH1cblxuICBvbkNoYW5nZSAodXNlclRhc2tzOiBVc2VyVGFza1tdLCBwZXJzaXN0ZWQ6IFdlZWtQbGFubmVyUGVyc2lzdGVkU3RhdGUpIHtcbiAgICBpZiAocGVyc2lzdGVkLndlZWtEYXRlICE9PSB0aGlzLnN0YXRlLndlZWtEYXRlKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgY29uZmlybWF0aW9uczogW11cbiAgICAgIH0pXG4gICAgfVxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgdXNlclRhc2tzLFxuICAgICAgd2Vla0RhdGU6IHBlcnNpc3RlZC53ZWVrRGF0ZVxuICAgIH0pO1xuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdXNlclRhc2tzUmVwby5zdWJzY3JpYmUodGhpcy5vbkNoYW5nZSk7XG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICB1c2VyVGFza3NSZXBvLnVuc3Vic2NyaWJlKHRoaXMub25DaGFuZ2UpO1xuICB9XG5cbiAgYXN5bmMgdG9nZ2xlVGFzayAobGVhcm5pbmdUYXNrOiBMZWFybmluZ01vZHVsZVRhc2spIHtcbiAgICBjb25zdCB1c2VyVGFza3MgPSB0aGlzLnN0YXRlLnVzZXJUYXNrcy5maWx0ZXIodXQgPT4ge1xuICAgICAgcmV0dXJuIGxlYXJuaW5nVGFzay50YXNrID9cbiAgICAgICAgdXQudGFzayAmJiB1dC50YXNrLnNvbWUodCA9PiB0LmlkID09PSBsZWFybmluZ1Rhc2suaWQpIDpcbiAgICAgICAgdXQuc2l0ZVZpc2lvblBhZ2VJZCA9PT0gbGVhcm5pbmdUYXNrLmlkO1xuICAgIH0pO1xuICAgIGNvbnN0IHt3ZWVrRGF0ZX0gPSB0aGlzLnN0YXRlO1xuICAgIFxuICAgIGlmICh1c2VyVGFza3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBObyB0YXNrIG1hdGNoZXMgdGhpcyBsZWFybmluZ01vZHVsZVRhc2sgLSBub3QgcHJlc2VudCBpbiB3ZWVrcGxhbm5lci5cbiAgICAgIGxldCBsYXRlc3RUaW1lU3RhbXAgPSBNYXRoLm1heC5hcHBseShcbiAgICAgICAgTWF0aC5tYXgsXG4gICAgICAgIFt3ZWVrRGF0ZV0uY29uY2F0KHRoaXMuc3RhdGUudXNlclRhc2tzLm1hcCh0ID0+IHQuZGF0ZVRpbWUpKSk7XG5cbiAgICAgIGNvbnN0IHVzZXJUYXNrOiBVc2VyVGFzayA9IHtcbiAgICAgICAgaWQ6IGNyZWF0ZVVVSUQoKSxcbiAgICAgICAgY291cnNlTmFtZTogbGVhcm5pbmdUYXNrLmNvdXJzZU5hbWUsXG4gICAgICAgIGRhdGVUaW1lOiBsYXRlc3RUaW1lU3RhbXAgKyAyMDAwLFxuICAgICAgICBsZWFybmluZ0dvYWw6IGxlYXJuaW5nVGFzay5sZWFybmluZ0dvYWwsXG4gICAgICAgIG5hbWU6IGxlYXJuaW5nVGFzay5uYW1lLFxuICAgICAgICB1cmw6IGxlYXJuaW5nVGFzay51cmwsXG4gICAgICAgIGFjbDogW1xuICAgICAgICAgIC8vIERlZmF1bHQgQUNMOiBMZXQgdXNlciBzZWxmIGhhdmUgZnVsbCBjb250cm9sIG92ZXIgdGhpcyBpdGVtOlxuICAgICAgICAgIG5ldyBEb2N1bWVudEFjY2VzcyhcImVtYWlsXCIsIGVudi5jdXJyZW50VXNlci5tYWlsLCBcIlNcIiksXG4gICAgICAgICAgLy8gQWRkaXRpb25hbCBBQ0w6IExldCBlbXBsb3llZXMgb24gc2FtZSBzY2hvb2wgaGF2ZSByZWFkIGFjY2VzcyB0byBpdC5cbiAgICAgICAgICAvLyBUaGlzIGN1cnJlbnRseSBvbmx5IGFwcGxpZXMgdG8gdGFza3MgdGhhdCByZWZlciB0byBjb3Vyc2UgdGFza3MgKG5vdCBjdXN0b20gdGFza3MhKVxuICAgICAgICAgIG5ldyBEb2N1bWVudEFjY2VzcyhcInNjaG9vbFJvbGVcIiwgYCR7ZW52LmN1cnJlbnRVc2VyLnNjaG9vbH0vRU1QTE9ZRUVgLCBcIlJcIilcbiAgICAgICAgXS5tYXAoYWMgPT4gYWMudG9TdHJpbmcoKSlcbiAgICAgIH07XG4gICAgICBpZiAobGVhcm5pbmdUYXNrLnRhc2sgJiYgbGVhcm5pbmdUYXNrLnRhc2suZGVhZGxpbmUpIHtcbiAgICAgICAgdXNlclRhc2suZGVhZGxpbmUgPSBsZWFybmluZ1Rhc2sudGFzay5kZWFkbGluZTtcbiAgICAgIH1cbiAgICAgIGlmIChsZWFybmluZ1Rhc2sudGFzaykge1xuICAgICAgICB1c2VyVGFzay50YXNrID0gW2xlYXJuaW5nVGFzay50YXNrXTtcbiAgICAgICAgaWYgKGxlYXJuaW5nVGFzay5jb3Vyc2UpIHtcbiAgICAgICAgICB1c2VyVGFzay5jb3Vyc2UgPSBbbGVhcm5pbmdUYXNrLmNvdXJzZV07XG4gICAgICAgIH0gZWxzZSBpZiAobGVhcm5pbmdUYXNrLmNvdXJzZUluZm8pIHtcbiAgICAgICAgICB1c2VyVGFzay5jb3Vyc2VJbmZvID0gbGVhcm5pbmdUYXNrLmNvdXJzZUluZm87XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVzZXJUYXNrLnNpdGVWaXNpb25QYWdlSWQgPSBsZWFybmluZ1Rhc2suaWQ7XG4gICAgICB9XG4gICAgICBpZiAobGVhcm5pbmdUYXNrLnN0ZXApIHtcbiAgICAgICAgdXNlclRhc2suc3RlcCA9IGxlYXJuaW5nVGFzay5zdGVwO1xuICAgICAgfVxuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICB1c2VyVGFza3NSZXBvLnNldFdlZWtQbGFubmVyQm94T3BlbihsZWFybmluZ1Rhc2suY291cnNlTmFtZSwgdHJ1ZSksXG4gICAgICAgIHVzZXJUYXNrc1JlcG8uaW5zZXJ0KFt1c2VyVGFza10pXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEFscmVhZHkgcHJlc2VudCBpbiB3ZWVrcGxhbm5lci4gSXQncyB0aW1lIHRvIGRlbGV0ZSB0aG9zZSB0aGF0IG1hdGNoZWQgdXMuXG4gICAgICBhd2FpdCB1c2VyVGFza3NSZXBvLmRlbGV0ZSh1c2VyVGFza3MubWFwKHQgPT4gdC5pZCkpO1xuICAgIH1cbiAgICBcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7aW50bH0gPSB0aGlzLmNvbnRleHQ7XG4gICAgY29uc3Qge2xlYXJuaW5nVGFza3N9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCB1c2VyVGFza3MgPSBhcnJheVRvTWFwKHRoaXMuc3RhdGUudXNlclRhc2tzLCB1dCA9PiB1dC50YXNrICYmIHV0LnRhc2subGVuZ3RoID4gMCA/XG4gICAgICB1dC50YXNrLm1hcCh0ID0+IHQuaWQpWzBdIDogLy8gY291cnNlLWJ1aWxkZXIgdGFza3MgbG9va2VkIHVwIGJ5IGlkXG4gICAgICB1dC5zaXRlVmlzaW9uUGFnZUlkID8gdXQuc2l0ZVZpc2lvblBhZ2VJZCA6IC8vIG5vbi1jb3Vyc2UtYnVpbGRlciB0YXNrc1xuICAgICAgdXQudXJsKTtcbiAgICBjb25zdCB7Y29uZmlybWF0aW9uc30gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHdlZWtQbGFubmVyV2VlayA9IG1vbWVudCh0aGlzLnN0YXRlLndlZWtEYXRlKS53ZWVrKCk7XG4gICAgY29uc3QgY3VycmVudFdlZWsgPSBtb21lbnQoKS53ZWVrKCk7XG4gICAgY29uc3QgZm9yV2Vla1N0cmluZyA9IHdlZWtQbGFubmVyV2VlayA9PT0gY3VycmVudFdlZWsgPyBcIlwiIDpcbiAgICB3ZWVrUGxhbm5lcldlZWsgPT09IGN1cnJlbnRXZWVrICsgMSA/IGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6XCJ0YXNrTGlzdC5uZXh0V2Vla1Rhc2tcIiwgZGVmYXVsdE1lc3NhZ2U6XCJmw7ZyIG7DpHN0YSB2ZWNrYSAodnt3ZWVrfSlcIn0sIHt3ZWVrOiB3ZWVrUGxhbm5lcldlZWt9KSA6XG4gICAgd2Vla1BsYW5uZXJXZWVrID09PSBjdXJyZW50V2VlayAtIDEgPyBpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOlwidGFza0xpc3QubGFzdFdlZWtUYXNrXCIsIGRlZmF1bHRNZXNzYWdlOlwiZsO2ciBmw7ZycmEgdmVja2FuICh2e3dlZWt9KVwifSwge3dlZWs6IHdlZWtQbGFubmVyV2Vla30pIDpcbiAgICBpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOlwidGFza0xpc3QuY3VycmVudFdlZWtUYXNrXCIsIGRlZmF1bHRNZXNzYWdlOlwiZsO2ciB2ZWNrYSB7d2Vla31cIn0sIHt3ZWVrOiB3ZWVrUGxhbm5lcldlZWt9KTtcblxuICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cInRhc2tDb250YWluZXJcIj5cbiAgICAgIHtsZWFybmluZ1Rhc2tzLm1hcCgobGVhcm5pbmdUYXNrLCBpZHgpID0+IHtcbiAgICAgICAgY29uc3QgdGFza0xvb2t1cElkID0gbGVhcm5pbmdUYXNrLmlkO1xuICAgICAgICBjb25zdCB1c2VyVGFzayA9IHVzZXJUYXNrc1t0YXNrTG9va3VwSWRdIHx8IHskbWV0YTogJ2RlbGV0ZWQnfSBhcyBQYXJ0aWFsPFVzZXJUYXNrPjsgLy8gTm8gZXhpc3QgPSAkbWV0YTogJ2RlbGV0ZWQnXG4gICAgICAgIGNvbnN0IGlzV29ya2luZyA9IHVzZXJUYXNrLiRtZXRhID09PSAnYWRkaW5nJyB8fCB1c2VyVGFzay4kbWV0YSA9PT0gJ2RlbGV0aW5nJztcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSB1c2VyVGFzay4kbWV0YSAhPT0gJ2RlbGV0ZWQnICYmIHVzZXJUYXNrLiRtZXRhICE9PSAnZGVsZXRpbmcnO1xuICAgICAgICBjb25zdCBkZXNjcmliZWRBY3Rpb24gPSBzZWxlY3RlZCA/XG4gICAgICAgIGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6XCJ0YXNrTGlzdC5yZW1vdmVUYXNrRnJvbVdlZWtseVBsYW5uaW5nXCIsIGRlZmF1bHRNZXNzYWdlOlwiVGEgYm9ydCB1cHBnaWZ0ZW4gZnLDpW4gZWdlbiB2ZWNrb3BsYW5lcmluZyB7d2Vla31cIn0sIHt3ZWVrOiBmb3JXZWVrU3RyaW5nfSk6XG4gICAgICAgIGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6XCJ0YXNrTGlzdC5hZGRUYXNrVG9XZWVrbHlQbGFubmluZ1wiLCBkZWZhdWx0TWVzc2FnZTpcIkzDpGdnIHRpbGwgdXBwZ2lmdGVuIGkgZWdlbiB2ZWNrb3BsYW5lcmluZyB7d2Vla31cIn0sIHt3ZWVrOiBmb3JXZWVrU3RyaW5nfSlcbiAgICAgICAgY29uc3QgY29uZmlybWF0aW9uVmlzaWJsZSA9XG4gICAgICAgICAgY29uZmlybWF0aW9ucy5zb21lKHRpZCA9PiB0YXNrTG9va3VwSWQgPT09IHRpZCk7XG5cbiAgICAgICAgcmV0dXJuIDxkaXYga2V5PXtsZWFybmluZ1Rhc2suaWR9PjxkaXYga2V5PXt0YXNrTG9va3VwSWR9IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWxcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgc2VsZWN0ZWRCb3gke3NlbGVjdGVkID8gJyBzZWxlY3RlZCcgOiAnJ31gfVxuICAgICAgICAgICAgICAgIHN0eWxlPXtpc1dvcmtpbmcgPyB7b3BhY2l0eTogMC41fToge319XG4gICAgICAgICAgICAgICAgb25DbGljaz17KCk9PiFpc1dvcmtpbmcgJiYgd2Vla1BsYW5uZXJXZWVrID09PSBjdXJyZW50V2VlayA/XG4gICAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZVRhc2sobGVhcm5pbmdUYXNrKSA6XG4gICAgICAgICAgICAgICAgICBjb25maXJtYXRpb25WaXNpYmxlID8gXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2NvbmZpcm1hdGlvbnM6IGNvbmZpcm1hdGlvbnMuZmlsdGVyKHRpZCA9PiB0aWQgIT09IHRhc2tMb29rdXBJZCl9KSA6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2NvbmZpcm1hdGlvbnM6IFsuLi5jb25maXJtYXRpb25zXS5jb25jYXQodGFza0xvb2t1cElkKX0pfVxuICAgICAgICAgICAgICAgIHRpdGxlPXtkZXNjcmliZWRBY3Rpb259PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxuICAgICAgICAgICAgPGEgaHJlZj17bGVhcm5pbmdUYXNrLnVybH0+e2xlYXJuaW5nVGFzay5uYW1lfTwvYT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxDb25maXJtYXRpb25cbiAgICAgICAgICAgIHZpc2libGU9e2NvbmZpcm1hdGlvblZpc2libGV9XG4gICAgICAgICAgICB0ZXh0PXtkZXNjcmliZWRBY3Rpb259XG4gICAgICAgICAgICBvbkNvbmZpcm09eygpPT57XG4gICAgICAgICAgICAgIHRoaXMudG9nZ2xlVGFzayhsZWFybmluZ1Rhc2spO1xuICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtjb25maXJtYXRpb25zOiBjb25maXJtYXRpb25zLmZpbHRlcih0aWQgPT4gdGlkICE9PSB0YXNrTG9va3VwSWQpfSk7XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgb25DYW5jZWw9eygpPT57XG4gICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2NvbmZpcm1hdGlvbnM6IGNvbmZpcm1hdGlvbnMuZmlsdGVyKHRpZCA9PiB0aWQgIT09IHRhc2tMb29rdXBJZCl9KTtcbiAgICAgICAgICAgIH19IC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICB9XG4gICAgICApfVxuICAgIDwvZGl2PlxuICB9XG59XG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQge0tHVGVybVBsYW5uZXJ9IGZyb20gJy4va2ctdGVybXBsYW5uZXInO1xuaW1wb3J0IGVudiBmcm9tICcuLi8uLi9nbG9iYWxzL0tFRC5lbnYnO1xuXG5leHBvcnQgZnVuY3Rpb24gS0dUZXJtUGxhbm5lclNlbGYgKCkge1xuICByZXR1cm4gPEtHVGVybVBsYW5uZXIgZW52PXtlbnZ9IHR1dG9yZWQ9e2ZhbHNlfSAvPjtcbn1cbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7S0dUZXJtUGxhbm5lcn0gZnJvbSAnLi9rZy10ZXJtcGxhbm5lcic7XG5pbXBvcnQgeyBUdXRvcmFibGVDb21wb25lbnQgfSBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvdHV0b3JhYmxlLWNvbXBvbmVudCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBLR1Rlcm1QbGFubmVyVHV0b3JlZCAoKSB7XG4gIHJldHVybiA8VHV0b3JhYmxlQ29tcG9uZW50XG4gICAgdHV0b3JlZD17dHJ1ZX1cbiAgICBjcmVhdGVDb21wb25lbnQ9e2VudiA9PlxuICAgICAgPEtHVGVybVBsYW5uZXJcbiAgICAgICAga2V5PXtlbnYuY3VycmVudFVzZXIubWFpbH1cbiAgICAgICAgZW52PXtlbnZ9XG4gICAgICAgIHR1dG9yZWQ9e3RydWV9IC8+XG4gICAgfVxuICAvPjtcbn1cbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0Jztcbi8vaW1wb3J0IGVudiBmcm9tICcuLi8uLi9nbG9iYWxzL0tFRC5lbnYnO1xuaW1wb3J0IHsgRURTQ291cnNlLCBFRFNTdHVkeVBsYW4gfSBmcm9tICcuLi8uLi9jb250cmFjdHMvZWRzJztcbmltcG9ydCB7IEVEU1BlcmlvZCB9IGZyb20gJy4uLy4uL2FwaXMvZWRzY2xpZW50JztcbmltcG9ydCB7IGdldFNjaG9vbE1vbWVudCwgZ2V0Rmlyc3RBbmRMYXN0V2Vla09mVGVybSwgZ2V0VGVybVN0YXJFbmREYXRlIH0gZnJvbSAnLi4vLi4vdXRpbHMvc2Nob29sLW1vbWVudCc7XG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XG5pbXBvcnQgeyBTcGlubmVyIH0gZnJvbSAnLi4vY291cnNlLWJ1aWxkZXIvc3ViLWNvbXBvbmVudHMvc3Bpbm5lcic7XG5pbXBvcnQgeyBLR1Rlcm1QbGFubmVyV2Vla1BsYW4sIEtHVGVybVBsYW5uZXJXZWVrUGxhbkVudHJ5LCBLR1Rlcm1QbGFubmVyVHV0b3JOb3RlLCBLR1Rlcm1QbGFubmVyV2Vla1BsYW5PclR1dG9yTm90ZSB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcbmltcG9ydCB7IERpYWxvZ3MgfSBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvZGlhbG9ncyc7XG5pbXBvcnQgeyBXZWVrTm90ZURpYWxvZyB9IGZyb20gJy4vd2Vlay1ub3RlLWRpYWxvZyc7XG5pbXBvcnQgeyBLR1Rlcm1QbGFubmVyUmVwbyB9IGZyb20gJy4uLy4uL3JlcG9zL2tnLXRlcm1wbGFubmVyLXJlcG8nO1xuaW1wb3J0IHsgZGlzdGluY3QsIHNob3dFcnJvciB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWxzJztcbmltcG9ydCB7IEtFRFdlZWsgfSBmcm9tICcuLi8uLi91dGlscy93ZWVrdXRpbCc7XG5pbXBvcnQgeyBLZWRCYWNrZW5kQ2xpZW50LCBEb2N1bWVudEFjY2VzcywgY3JlYXRlVVVJRCB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcbmltcG9ydCB7IFVzZXIgfSBmcm9tICcuLi8uLi9jb250cmFjdHMva2VkLW1vZGVscyc7XG5pbXBvcnQgeyBFbnYgfSBmcm9tICcuLi8uLi9nbG9iYWxzL0tFRC5lbnYnO1xuaW1wb3J0IHsgVHV0b3JEaWFsb2cgfSBmcm9tICcuLi9rcy10ZXJtcGxhbm5lci90dXRvci1kaWFsb2cnO1xuaW1wb3J0IHsgZmVhdHVyZXMgfSBmcm9tICcuLi8uLi9mZWF0dXJlcyc7XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIGVudjogRW52O1xuICB0dXRvcmVkOiBib29sZWFuO1xufVxuXG5pbnRlcmZhY2UgU3RhdGUge1xuICBub3c6IERhdGUsXG4gIGNvdXJzZXM6IEVEU0NvdXJzZVtdO1xuICB3ZWVrUGxhbnM6IEtHVGVybVBsYW5uZXJXZWVrUGxhbk9yVHV0b3JOb3RlW107XG4gIGlzTG9hZGluZ0NvdXJzZXM6IGJvb2xlYW47XG4gIGlzTG9hZGluZ1dlZWtQbGFuczogYm9vbGVhbjtcbiAgZGlhbG9nczogYW55W107XG4gIC8vZ29hbHM6IEVEU1N0dWR5UGxhbltdO1xufVxuXG5leHBvcnQgY2xhc3MgS0dUZXJtUGxhbm5lciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcywgU3RhdGU+IHtcbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIG5vdyxcbiAgICAgIGNvdXJzZXM6IFtdLFxuICAgICAgd2Vla1BsYW5zOiBbXSxcbiAgICAgIGlzTG9hZGluZ0NvdXJzZXM6IHRydWUsXG4gICAgICBpc0xvYWRpbmdXZWVrUGxhbnM6IHRydWUsXG4gICAgICBkaWFsb2dzOiBbXVxuICAgICAgLy9nb2FsczogW11cbiAgICB9XG4gICAgdGhpcy51cGRhdGVXZWVrUGxhbnMgPSB0aGlzLnVwZGF0ZVdlZWtQbGFucy5iaW5kKHRoaXMpO1xuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy5sb2FkRURTQ291cnNlcygpO1xuICAgIHRoaXMucHJvcHMuZW52LmtnVGVybVBsYW5uZXJSZXBvLm1lbS5zdWJzY3JpYmUodGhpcy51cGRhdGVXZWVrUGxhbnMpO1xuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgdGhpcy5wcm9wcy5lbnYua2dUZXJtUGxhbm5lclJlcG8ubWVtLnVuc3Vic2NyaWJlKHRoaXMudXBkYXRlV2Vla1BsYW5zKTtcbiAgfVxuXG4gIHVwZGF0ZVdlZWtQbGFucyh3ZWVrUGxhbnM6IEtHVGVybVBsYW5uZXJXZWVrUGxhbltdKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7d2Vla1BsYW5zLCBpc0xvYWRpbmdXZWVrUGxhbnM6IGZhbHNlfSk7XG4gIH1cblxuICBhc3luYyBsb2FkRURTQ291cnNlcygpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc2Nob29sTW9tZW50ID0gZ2V0U2Nob29sTW9tZW50KG1vbWVudCh0aGlzLnN0YXRlLm5vdykpO1xuICAgICAgY29uc3QgcGVyaW9kTmFtZSA9IG5ldyBFRFNQZXJpb2Qoc2Nob29sTW9tZW50KS5wZXJpb2Q7XG4gICAgICBjb25zdCBjb3Vyc2VzID0gZGlzdGluY3QoYXdhaXQgdGhpcy5wcm9wcy5lbnYuZWRzQ2xpZW50LmdldEFjdGl2ZUNvdXJzZXMoe3BlcmlvZE5hbWV9KSwgY291cnNlID0+IGNvdXJzZS5uYW1lKTtcbiAgICAgIC8vY29uc29sZS5sb2coXCJjb3Vyc2VzOlwiICsgSlNPTi5zdHJpbmdpZnkoY291cnNlcywgbnVsbCwgMikpO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGNvdXJzZXMgfSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBpc0xvYWRpbmdDb3Vyc2VzOiBmYWxzZSB9KTtcbiAgICB9XG4gIH1cblxuICBvbk5vdGVDbGljayh3ZWVrTnVtYmVyOiBudW1iZXIsIHdlZWtEYXRlOiBudW1iZXIsIGNvdXJzZU5hbWU6IHN0cmluZywgd2Vla1BsYW4/OiBLR1Rlcm1QbGFubmVyV2Vla1BsYW4sIG5vdGU/OiBLR1Rlcm1QbGFubmVyV2Vla1BsYW5FbnRyeSkge1xuICAgIHRoaXMub3BlbkRpYWxvZyg8V2Vla05vdGVEaWFsb2dcbiAgICAgIHdlZWtOdW1iZXI9e3dlZWtOdW1iZXJ9XG4gICAgICB3ZWVrRGF0ZT17d2Vla0RhdGV9XG4gICAgICBjb3Vyc2VOYW1lPXtjb3Vyc2VOYW1lfVxuICAgICAgd2Vla1BsYW49e3dlZWtQbGFufVxuICAgICAgbm90ZT17bm90ZX1cbiAgICAgIGVudj17dGhpcy5wcm9wcy5lbnZ9XG4gICAgICBjbG9zZURpYWxvZz17KCk9PnRoaXMuY2xvc2VEaWFsb2coKX0gLz4pO1xuICB9XG5cbiAgICAvKipcbiAgICogXG4gICAqIEBwYXJhbSB3ZWVrTnVtYmVyIFxuICAgKiBAcGFyYW0gY29tbWVudCBcbiAgICogXG4gICAqIEFkZCBhIGNvbW1lbnQgZnJvbSB0dXRvclxuICAgKi9cbiAgb25UdXRvckNsaWNrKHR1dG9yTm90ZTogS0dUZXJtUGxhbm5lclR1dG9yTm90ZSwgd2Vla051bWJlcjogbnVtYmVyKSB7XG4gICAgdGhpcy5vcGVuRGlhbG9nKDxUdXRvckRpYWxvZ1xuICAgICAgd2Vla051bWJlcj17d2Vla051bWJlcn1cbiAgICAgIGNvbW1lbnQ9e3R1dG9yTm90ZS52YWx1ZX1cbiAgICAgIHVwZGF0ZURhdGEgPSB7bmV3VmFsdWUgPT4gdGhpcy51cGRhdGVUdXRvck5vdGVGaWVsZCh0dXRvck5vdGUsIG5ld1ZhbHVlKX1cbiAgICAgIGRlbGV0ZU5vdGVEYXRhID0geygpID0+IHRoaXMuZGVsZXRlVHV0b3JOb3RlRmllbGQodHV0b3JOb3RlLmlkKX1cbiAgICAgIGNsb3NlRGlhbG9nPXsoKT0+dGhpcy5jbG9zZURpYWxvZygpfSAvPik7XG4gIH1cblxuICBhc3luYyBkZWxldGVUdXRvck5vdGVGaWVsZChub3RlSWQ6IHN0cmluZykge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLnByb3BzLmVudi5rZ1Rlcm1QbGFubmVyUmVwby5kZWxldGUoW25vdGVJZF0pO1xuICAgIH0gY2F0Y2ggKHNob3dFcnJvcil7fVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlVHV0b3JOb3RlRmllbGQodHV0b3JOb3RlOiBLR1Rlcm1QbGFubmVyVHV0b3JOb3RlLCBuZXdWYWx1ZTogc3RyaW5nKXtcbiAgICBjb25zdCBvbGRWYWx1ZSA9ICh0dXRvck5vdGUgJiYgdHV0b3JOb3RlLnZhbHVlKSB8fCBcIlwiO1xuICAgIGlmIChvbGRWYWx1ZSA9PT0gbmV3VmFsdWUpIHJldHVybjtcblxuICAgIHRyeSB7XG4gICAgICB0dXRvck5vdGUudmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgIC8vc2V0IGRvY3VtZW50IEFDTFxuICAgICAgdHV0b3JOb3RlLmFjbCA9IFtcbiAgICAgICAgbmV3IERvY3VtZW50QWNjZXNzKFwidHV0b3JGb3JcIiwgdGhpcy5wcm9wcy5lbnYuY3VycmVudFVzZXIubWFpbCwgXCJTXCIpLnRvU3RyaW5nKCksXG4gICAgICAgIG5ldyBEb2N1bWVudEFjY2VzcyhcImVtYWlsXCIsIHRoaXMucHJvcHMuZW52LmN1cnJlbnRVc2VyLm1haWwsIFwiUlwiKS50b1N0cmluZygpLFxuICAgICAgXTtcblxuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvcHMuZW52LmtnVGVybVBsYW5uZXJSZXBvLnVwc2VydCh0dXRvck5vdGUsIFxuICAgICAgICAobm90ZSA6IEtHVGVybVBsYW5uZXJUdXRvck5vdGUpID0+IG5vdGUudmFsdWUgPSBuZXdWYWx1ZSk7XG4gICAgICB9IGNhdGNoIChzaG93RXJyb3Ipe31cbiAgfVxuXG4gIFxuICBvcGVuRGlhbG9nKGRpYWxvZykge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBkaWFsb2dzOiBbLi4udGhpcy5zdGF0ZS5kaWFsb2dzLCBkaWFsb2ddIH0pO1xuICB9XG5cbiAgY2xvc2VEaWFsb2coKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGRpYWxvZ3M6IHRoaXMuc3RhdGUuZGlhbG9ncy5zbGljZSgwLCB0aGlzLnN0YXRlLmRpYWxvZ3MubGVuZ3RoIC0gMSkgfSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBjb3Vyc2VzLCBub3csIGlzTG9hZGluZ0NvdXJzZXMsIGlzTG9hZGluZ1dlZWtQbGFucywgd2Vla1BsYW5zLCBkaWFsb2dzIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IGlzTG9hZGluZyA9IGlzTG9hZGluZ0NvdXJzZXMgfHwgaXNMb2FkaW5nV2Vla1BsYW5zO1xuICAgIGNvbnN0IHdlZWtzOiB7IHdlZWtOdW1iZXI6IG51bWJlciwgd2Vla0RhdGU6IG51bWJlciwgd2Vla1BsYW46IEtHVGVybVBsYW5uZXJXZWVrUGxhbiB9W10gPSBbXTtcbiAgICBjb25zdCB0dXRvck5vdGVzOiB7IHdlZWtOdW1iZXI6IG51bWJlciwgdHV0b3JWYWx1ZTogS0dUZXJtUGxhbm5lclR1dG9yTm90ZSB9W10gPSBbXTtcbiAgICBjb25zdCBzY2hvb2xNb21lbnQgPSBnZXRTY2hvb2xNb21lbnQobW9tZW50KG5vdykpO1xuICAgIGNvbnN0IFt0ZXJtU3RhcnQsIHRlcm1FbmRdID0gZ2V0VGVybVN0YXJFbmREYXRlKG5vdywgc2Nob29sTW9tZW50LnRlcm0gPT09ICdBVCcpO1xuICAgIGNvbnN0IFtmaXJzdFdlZWssIGxhc3RXZWVrXSA9IGdldEZpcnN0QW5kTGFzdFdlZWtPZlRlcm0oc2Nob29sTW9tZW50LnRlcm0pO1xuICAgIGNvbnN0IHNob3dLZ1R1dG9yQ29tbWVudEZpZWxkID0gZmVhdHVyZXMua2dUdXRvckNvbW1lbnQ7XG5cbiAgICBsZXQgY3VycmVudFdlZWtQbGFucyA6IEtHVGVybVBsYW5uZXJXZWVrUGxhbltdID0gd2Vla1BsYW5zLmZpbHRlcigoeCA6IEtHVGVybVBsYW5uZXJXZWVrUGxhbikgPT4gIXgudHlwZSkgYXMgS0dUZXJtUGxhbm5lcldlZWtQbGFuW107XG4gICAgbGV0IGN1cnJlbnRUdXRvck5vdGVzIDogS0dUZXJtUGxhbm5lclR1dG9yTm90ZVtdID0gd2Vla1BsYW5zLmZpbHRlcigoeCA6IEtHVGVybVBsYW5uZXJUdXRvck5vdGUpID0+IHgudHlwZSA9PT0gJ3R1dG9yLW5vdGUnKSBhcyBLR1Rlcm1QbGFubmVyVHV0b3JOb3RlW107XG5cbiAgICBmb3IgKGxldCB3ZWVrTW9tZW50ID0gdGVybVN0YXJ0LmNsb25lKCk7XG4gICAgICB3ZWVrTW9tZW50LnZhbHVlT2YoKSA8IHRlcm1FbmQudmFsdWVPZigpO1xuICAgICAgd2Vla01vbWVudCA9IHdlZWtNb21lbnQuY2xvbmUoKS5hZGQoMSwgJ3dlZWsnKS5zdGFydE9mKCd3ZWVrJykpXG4gICAge1xuICAgICAgY29uc3Qgd2Vla051bWJlciA9IHdlZWtNb21lbnQud2VlaygpO1xuICAgICAgY29uc3Qgd2Vla1llYXIgPSB3ZWVrTW9tZW50LnllYXIoKTtcbiAgICAgIFxuICAgICAgY29uc3Qga2VkV2VlayA9IEtFRFdlZWsod2Vla1llYXIsIHdlZWtOdW1iZXIpO1xuICAgICAgaWYgKHdlZWtOdW1iZXIgPj0gZmlyc3RXZWVrICYmIHdlZWtOdW1iZXIgPD0gbGFzdFdlZWspIHtcbiAgICAgICAgY29uc3Qgd2Vla1BsYW4gPSBjdXJyZW50V2Vla1BsYW5zLmZpbHRlcih3cCA9PlxuICAgICAgICAgIHdwLmRhdGVUaW1lID49IGtlZFdlZWsubm90QmVmb3JlICYmXG4gICAgICAgICAgd3AuZGF0ZVRpbWUgPD0ga2VkV2Vlay5ub3RBZnRlcilbMF07XG5cbiAgICAgICAgY29uc3QgdHV0b3JOb3RlID0gY3VycmVudFR1dG9yTm90ZXMuZmlsdGVyKHdwID0+XG4gICAgICAgICAgd3AuZGF0ZVRpbWUgPj0ga2VkV2Vlay5ub3RCZWZvcmUgJiZcbiAgICAgICAgICB3cC5kYXRlVGltZSA8PSBrZWRXZWVrLm5vdEFmdGVyKVswXTtcblxuICAgICAgICBjb25zdCBzdGFydE9mV2VlayA9IHdlZWtNb21lbnQuY2xvbmUoKS5zdGFydE9mKCd3ZWVrJykudmFsdWVPZigpO1xuICAgICAgICB3ZWVrcy5wdXNoKHtcbiAgICAgICAgICB3ZWVrTnVtYmVyLFxuICAgICAgICAgIHdlZWtEYXRlOiBzdGFydE9mV2VlayxcbiAgICAgICAgICB3ZWVrUGxhblxuICAgICAgICB9KTtcbiAgICAgICAgdHV0b3JOb3Rlcy5wdXNoKHtcbiAgICAgICAgICB3ZWVrTnVtYmVyLFxuICAgICAgICAgIHR1dG9yVmFsdWU6IHR1dG9yTm90ZSB8fCB7dmFsdWU6ICcnLCBkYXRlVGltZTogc3RhcnRPZldlZWssIGlkOiBjcmVhdGVVVUlEKCksIHR5cGU6ICd0dXRvci1ub3RlJ31cbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIFxuXG4gICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwia2VkX2JveGVkXCI+XG4gICAgICA8aDQ+XG4gICAgICAgIFRlcm1pbnNwbGFuZXJpbmdcbiAgICAgICA8L2g0PlxuICAgICAgPGhyIC8+XG4gICAgICB7aXNMb2FkaW5nID9cbiAgICAgICAgPFNwaW5uZXIgLz4gOiBjb3Vyc2VzLmxlbmd0aCA9PT0gMCA/IDxkaXY+XG4gICAgICAgICAgVGVybWluc3BsYW5lcmFyZW4gYWt0aXZlcmFzIG7DpHIgZHUgc2tyaXZpdHMgaW4gcMOlIGRpbmEga3Vyc2VyXG4gICAgICAgICAgPC9kaXY+IDogXG4gICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cInRlcm1wbGFubmVyLXRhYmxlIHplYnJhXCI+XG4gICAgICAgICAgICA8dGhlYWQ+XG4gICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICA8dGg+VmVja2E8L3RoPlxuICAgICAgICAgICAgICAgIHsvKmdvYWxzLm1hcCgoe2NvdXJzZVVuaXRJZCwgY291cnNlVW5pdE5hbWV9KSA9PlxuICAgICAgICAgICAgICAgICAgPHRoIGtleT17Y291cnNlVW5pdElkfSBjbGFzc05hbWU9XCJ0ZXJtQ291cnNlSGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGVybUNvdXJzZVRleHRcIj57Y291cnNlVW5pdE5hbWV9PC9kaXY+PC90aD4pKi99XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgY291cnNlcy5tYXAoKGMsIGlkeCkgPT4gPHRoIGtleT17aWR4fSBjbGFzc05hbWU9XCJrZ0NvdXJzZUhlYWRlclwiPntjLm5hbWV9PC90aD4pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHtzaG93S2dUdXRvckNvbW1lbnRGaWVsZCAmJiA8dGggY2xhc3NOYW1lPVwidHV0b3JIZWFkZXJcIj48L3RoPn1cbiAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgIDwvdGhlYWQ+XG4gICAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICAgIHt3ZWVrcy5tYXAoKHcsIGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzQ3VycmVudFdlZWsgPSB3LndlZWtOdW1iZXIgPT09IG1vbWVudCgpLndlZWsoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBub3RlVmFsdWUgPSB0dXRvck5vdGVzICYmIHR1dG9yTm90ZXMuZmluZCh0biA9PiB0bi53ZWVrTnVtYmVyID09PSB3LndlZWtOdW1iZXIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIDx0ciBrZXk9e2lkeH0gY2xhc3NOYW1lPXtpc0N1cnJlbnRXZWVrID8gXCJjdXJyZW50V2Vla1wiIDogXCJcIn0+XG4gICAgICAgICAgICAgICAgICA8dGQ+e3cud2Vla051bWJlcn08L3RkPlxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb3Vyc2VzLm1hcCgoYyxpZHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm90ZSA9IHcud2Vla1BsYW4gJiYgdy53ZWVrUGxhbi5wbGFuc1tjLm5hbWVdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gPHRkXG4gICAgICAgICAgICAgICAgICAgICAga2V5PXtpZHh9XG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtub3RlPyBgY291cnNlTm90ZSBub3RlLWNvbG9yLSR7bm90ZS5jb2xvcn1gIDogXCJjb3Vyc2VOb3RlXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgZGF0YS10b29sdGlwPXtub3RlICYmIG5vdGUuZGVzY3JpcHRpb259XG4gICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e25vdGUgJiYgbm90ZS5kZXNjcmlwdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKT0+dGhpcy5vbk5vdGVDbGljayh3LndlZWtOdW1iZXIsIHcud2Vla0RhdGUsIGMubmFtZSwgdy53ZWVrUGxhbiwgbm90ZSl9PlxuICAgICAgICAgICAgICAgICAgICAgIHtub3RlPyA8aSBjbGFzc05hbWU9XCJmYXMgZmEtYWxpZ24tY2VudGVyXCIvPiA6ICcnfVxuICAgICAgICAgICAgICAgICAgICA8L3RkPn1cbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgc2hvd0tnVHV0b3JDb21tZW50RmllbGQgJiYgKHRoaXMucHJvcHMudHV0b3JlZCA/XG4gICAgICAgICAgICAgICAgICAgPHRkIGtleT17aWR4fSBvbkNsaWNrPXsoKSA9PiB0aGlzLm9uVHV0b3JDbGljayhub3RlVmFsdWUudHV0b3JWYWx1ZSwgdy53ZWVrTnVtYmVyKX0gY2xhc3NOYW1lPVwidHV0b3JDZWxsXCI+XG4gICAgICAgICAgICAgICAgICAgIHtub3RlVmFsdWUudHV0b3JWYWx1ZS52YWx1ZSA/IDxkaXYga2V5PXtpZHh9IGRhdGEtdG9vbHRpcD17bm90ZVZhbHVlLnR1dG9yVmFsdWUudmFsdWV9PjxpIGNsYXNzTmFtZT1cImZhcyBmYS1jb21tZW50LWRvdHNcIj48L2k+PC9kaXY+OiA8ZGl2IGtleT17aWR4fT48aSBjbGFzc05hbWU9XCJmYXMgZmEtY29tbWVudC1tZWRpY2FsXCI+PC9pPjwvZGl2Pn1cbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgOlxuICAgICAgICAgICAgICAgICAgICBub3RlVmFsdWUudHV0b3JWYWx1ZS52YWx1ZSA/IDx0ZCBjbGFzc05hbWU9XCJ0dXRvckNlbGxcIj48ZGl2IGRhdGEtdG9vbHRpcD17bm90ZVZhbHVlLnR1dG9yVmFsdWUudmFsdWV9PjxpIGNsYXNzTmFtZT1cImZhciBmYS1jb21tZW50LWRvdHNcIj48L2k+PC9kaXY+PC90ZD4gOiA8dGQ+PC90ZD5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICAgICAgPHRmb290PlxuICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgPHRoIGtleT1cInBvaW50c1wiPlBvw6RuZzwvdGg+XG4gICAgICAgICAgICAgICAge2NvdXJzZXMubWFwKChjLCBpZHgpID0+IDx0aCBrZXk9e2lkeH0gY2xhc3NOYW1lPVwic3RlcENlbGxcIj57Yy5jcmVkaXRzfTwvdGg+KX1cbiAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgIDx0aD5CZXR5Z3Ntw6VsPC90aD5cbiAgICAgICAgICAgICAgICB7Lypnb2Fscy5tYXAoZyA9PlxuICAgICAgICAgICAgICAgIDx0aCBjbGFzc05hbWU9XCJzdGVwQ2VsbFwiPntnLnBlcmlvZEdvYWxzLmZpbHRlcihwZyA9PiBwZy5wZXJpb2ROYW1lID09PSAgcGVyaW9kLnBlcmlvZClcbiAgICAgICAgICAgICAgICAgIC5tYXAocGc9PnBnLmdyYWRlTmFtZSlbMF0gfHwgZy5maW5hbEdvYWxHcmFkZX08L3RoPikqL31cbiAgICAgICAgICAgICAgICB7Y291cnNlcy5tYXAoKGMsIGlkeCkgPT5cbiAgICAgICAgICAgICAgICAgIDx0aCBrZXk9e2lkeH0gY2xhc3NOYW1lPVwic3RlcENlbGxcIj57Yy5wZXJpb2RHb2FsR3JhZGV9PC90aD4pfVxuICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgPC90Zm9vdD5cbiAgICAgICAgICA8L3RhYmxlPn1cbiAgICAgICAgICA8RGlhbG9nc1xuICAgICAgICBkaWFsb2dzPXtkaWFsb2dzfVxuICAgICAgICBwb3BEaWFsb2c9eygpID0+IHRoaXMuc2V0U3RhdGUoeyBkaWFsb2dzOiBkaWFsb2dzLnNsaWNlKDAsIGRpYWxvZ3MubGVuZ3RoIC0gMSkgfSl9IC8+XG4gICAgICAgICAgXG4gICAgPC9kaXY+XG4gIH1cbn0iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBLR1Rlcm1QbGFubmVyV2Vla1BsYW4sIEtHVGVybVBsYW5uZXJXZWVrUGxhbkVudHJ5IH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xuaW1wb3J0IHsgY3JlYXRlVVVJRCB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcbmltcG9ydCB7IEVudiB9IGZyb20gJy4uLy4uL2dsb2JhbHMvS0VELmVudic7XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIHdlZWtOdW1iZXI6IG51bWJlcjtcbiAgd2Vla0RhdGU6IG51bWJlcjtcbiAgY291cnNlTmFtZTogc3RyaW5nO1xuICB3ZWVrUGxhbj86IEtHVGVybVBsYW5uZXJXZWVrUGxhbjtcbiAgbm90ZT86IEtHVGVybVBsYW5uZXJXZWVrUGxhbkVudHJ5O1xuICBjbG9zZURpYWxvZzogKCk9PnZvaWQ7XG4gIGVudjogRW52O1xufVxuXG5pbnRlcmZhY2UgU3RhdGUge1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBjb2xvcjogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3MgV2Vla05vdGVEaWFsb2cgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsIFN0YXRlPiB7XG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgZGVzY3JpcHRpb246IHByb3BzLm5vdGUgPyBwcm9wcy5ub3RlLmRlc2NyaXB0aW9uIDogJycsXG4gICAgICBjb2xvcjogcHJvcHMubm90ZSA/IHByb3BzLm5vdGUuY29sb3IgOiAneWVsbG93J1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGRlbGV0ZSgpIHtcbiAgICBjb25zdCB7IHdlZWtOdW1iZXIsIHdlZWtEYXRlLCBjb3Vyc2VOYW1lLCB3ZWVrUGxhbiwgbm90ZSwgY2xvc2VEaWFsb2csIGVudiB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCB7IGRlc2NyaXB0aW9uLCBjb2xvcn0gPSB0aGlzLnN0YXRlO1xuXG4gICAgY2xvc2VEaWFsb2coKTtcblxuICAgIGlmIChPYmplY3Qua2V5cyh3ZWVrUGxhbi5wbGFucykubGVuZ3RoID09PSAxKSB7XG4gICAgICBhd2FpdCBlbnYua2dUZXJtUGxhbm5lclJlcG8uZGVsZXRlKFt3ZWVrUGxhbi5pZF0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBhd2FpdCBlbnYua2dUZXJtUGxhbm5lclJlcG8udXBkYXRlKFt3ZWVrUGxhbl0sIHdwID0+IHtcbiAgICAgICAgZGVsZXRlIHdwLnBsYW5zW2NvdXJzZU5hbWVdXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBzYXZlKCkge1xuICAgIGNvbnN0IHsgd2Vla051bWJlciwgd2Vla0RhdGUsIGNvdXJzZU5hbWUsIHdlZWtQbGFuLCBub3RlLCBjbG9zZURpYWxvZywgZW52IH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHsgZGVzY3JpcHRpb24sIGNvbG9yfSA9IHRoaXMuc3RhdGU7XG5cbiAgICBjbG9zZURpYWxvZygpO1xuXG4gICAgaWYgKGRlc2NyaXB0aW9uLmxlbmd0aCA9PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh3ZWVrUGxhbikge1xuICAgICAgYXdhaXQgZW52LmtnVGVybVBsYW5uZXJSZXBvLnVwZGF0ZShbd2Vla1BsYW5dLCB3cCA9PiB3cC5wbGFuc1tjb3Vyc2VOYW1lXSA9IHtkZXNjcmlwdGlvbiwgY29sb3J9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcGxhbnMgPSB7fTtcbiAgICAgIHBsYW5zW2NvdXJzZU5hbWVdID0ge2Rlc2NyaXB0aW9uLCBjb2xvcn07XG4gICAgICBhd2FpdCBlbnYua2dUZXJtUGxhbm5lclJlcG8uaW5zZXJ0KFt7XG4gICAgICAgIGlkOiBjcmVhdGVVVUlEKCksXG4gICAgICAgIGRhdGVUaW1lOiB3ZWVrRGF0ZSxcbiAgICAgICAgcGxhbnNcbiAgICAgIH1dKTtcbiAgICB9XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyB3ZWVrTnVtYmVyLCBjb3Vyc2VOYW1lLCB3ZWVrUGxhbiwgbm90ZSwgZW52IH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHsgZGVzY3JpcHRpb24sIGNvbG9yIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHJlYWRPbmx5ID0gZW52LnR1dG9yZWQ7XG5cbiAgICByZXR1cm4gPGRpdj5cbiAgICAgIDxkaXY+XG4gICAgICAgIDxoMj5Iw6RuZGVsc2UgZsO2ciB2ZWNrYSB7d2Vla051bWJlcn0gb2NoIHtjb3Vyc2VOYW1lfTwvaDI+XG4gICAgICAgIDxociAvPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLXRhYmxlXCI+XG4gICAgICAgICAgPGRpdj5CZXNrcml2bmluZzo8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZ1bGxXaWR0aFwiPlxuICAgICAgICAgICAgPHRleHRhcmVhIGF1dG9Gb2N1cyB2YWx1ZT17ZGVzY3JpcHRpb259IGRpc2FibGVkPXtyZWFkT25seX0gb25DaGFuZ2U9e2V2ID0+IHRoaXMuc2V0U3RhdGUoe2Rlc2NyaXB0aW9uOiBldi50YXJnZXQudmFsdWV9KX0gLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWxpZ24tdGFibGVcIj5cbiAgICAgICAgICA8ZGl2PkbDpHJnOjwvZGl2PlxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8c2VsZWN0IHZhbHVlPXtjb2xvcn0gZGlzYWJsZWQ9e3JlYWRPbmx5fSBvbkNoYW5nZT17ZXYgPT4gdGhpcy5zZXRTdGF0ZSh7Y29sb3I6IGV2LnRhcmdldC52YWx1ZX0pfT5cbiAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cInllbGxvd1wiPkd1bDwvb3B0aW9uPlxuICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwieWVsbG93TGlnaHRcIj5ManVzZ3VsPC9vcHRpb24+XG4gICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJjeWFuXCI+R3LDtm48L29wdGlvbj5cbiAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cImN5YW5MaWdodFwiPkxqdXNncsO2bjwvb3B0aW9uPlxuICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwicHVycGxlXCI+TGlsYTwvb3B0aW9uPlxuICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwicHVycGxlTGlnaHRcIj5ManVzbGlsYTwvb3B0aW9uPlxuICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwicmVkXCI+UsO2ZDwvb3B0aW9uPlxuICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwicmVkTGlnaHRcIj5Sb3NhPC9vcHRpb24+XG4gICAgICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXY+XG4gICAgICAgIHtyZWFkT25seSA/XG4gICAgICAgICAgPGJ1dHRvbiB0YWJJbmRleD17MX0gY2xhc3NOYW1lPVwiYnRuIGJ0bi1sYXJnZSBidG4tZGVmYXVsdFwiIG9uQ2xpY2s9eygpPT50aGlzLnByb3BzLmNsb3NlRGlhbG9nKCl9PkF2YnJ5dDwvYnV0dG9uPiA6XG4gICAgICAgICAgPD5cbiAgICAgICAgICAgIDxidXR0b24gdGFiSW5kZXg9ezF9IGNsYXNzTmFtZT1cImJ0biBidG4tbGFyZ2UgYnRuLWRlZmF1bHRcIiBvbkNsaWNrPXsoKT0+dGhpcy5zYXZlKCl9PlNwYXJhPC9idXR0b24+XG4gICAgICAgICAgICB7bm90ZSAmJiA8YSB0YWJJbmRleD17MX0gY2xhc3NOYW1lPVwiYnRuIGJ0bi13YXJuaW5nIGJ0bi1sYXJnZSBwdWxsLXJpZ2h0XCIgb25DbGljaz17KCk9PnRoaXMuZGVsZXRlKCl9PlRhIGJvcnQ8L2E+fVxuICAgICAgICAgIDwvPlxuICAgICAgICB9XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgfVxufVxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgRURTU3R1ZGVudEZ1dHVyZUFiaWxpdHkgfSBmcm9tICcuLi8uLi9jb250cmFjdHMvZWRzJztcbmltcG9ydCBlbnYgZnJvbSAnLi4vLi4vZ2xvYmFscy9LRUQuZW52JztcbmltcG9ydCB7IGZsYXR0ZW4gfSBmcm9tICcuLi8uLi91dGlscy91dGlscyc7XG5pbXBvcnQgeyBGdXR1cmVBYmlsaXRpZXNWaWV3TW9kZWwgfSBmcm9tICcuL2Z1dHVyZS1hYmlsaXRpZXMtdmlld21vZGVsJztcblxuaW50ZXJmYWNlIFN0YXRlIHtcbiAgbG9hZGluZzogYm9vbGVhbixcbiAgZGF0YTogRURTU3R1ZGVudEZ1dHVyZUFiaWxpdHlbXSxcbiAgZXJyb3I6IHN0cmluZyB8IG51bGxcbn1cblxuZXhwb3J0IGNsYXNzIEZ1dHVyZUFiaWxpdGllc1RhYmxlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PHt9LCBTdGF0ZT4ge1xuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgbG9hZGluZzogZmFsc2UsXG4gICAgICBkYXRhOiBbXSxcbiAgICAgIGVycm9yOiBudWxsXG4gICAgfTtcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICB0aGlzLmxvYWQoKTtcbiAgfVxuXG4gIGFzeW5jIGxvYWQoKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGxvYWRpbmc6IHRydWUgfSk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBlbnYuZWRzQ2xpZW50LmdldFN0dWRlbnRGdXR1cmVBYmlsaXRpZXMoKTtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBkYXRhIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHsgZXJyb3IgfSk7XG4gICAgfVxuICAgIHRoaXMuc2V0U3RhdGUoeyBsb2FkaW5nOiBmYWxzZSB9KTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB2aWV3TW9kZWwgPSBuZXcgRnV0dXJlQWJpbGl0aWVzVmlld01vZGVsICh0aGlzLnN0YXRlLmRhdGEpO1xuICAgIGNvbnN0IHtjb2x1bW5IZWFkZXJzLCB2dEh0cywgY2FwYWJSb3dzfSA9IHZpZXdNb2RlbDtcblxuICAgIHJldHVybiA8ZGl2PlxuICAgICAgPGg1PkZyYW10aWRzZsO2cm3DpWdvcjwvaDU+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhcnRpYWxFZGl0U3R1ZHlQbGFuVmlld01vZGVcIj5cbiAgICAgICAgPHRhYmxlIHN0eWxlPXt7IHdpZHRoOiAnMTAwJScgfX0gY2xhc3NOYW1lPVwic21hbGxGb250XCI+XG4gICAgICAgICAgPHRoZWFkPlxuICAgICAgICAgICAgPHRyPntjb2x1bW5IZWFkZXJzLm1hcCgoeyBuYW1lLCB0eXBlIH0sIGkpID0+XG4gICAgICAgICAgICAgIHR5cGUgPT09ICdoZWFkZXInID9cbiAgICAgICAgICAgICAgICA8dGgga2V5PXtpfSByb3dTcGFuPXsyfT57bmFtZX08L3RoPiA6XG4gICAgICAgICAgICAgICAgPHRoIGtleT17aX0gY29sU3Bhbj17Mn0+e25hbWV9PC90aD4pfTwvdHI+XG4gICAgICAgICAgICA8dHIgY2xhc3NOYW1lPVwiaGVhZGVyXCI+XG4gICAgICAgICAgICAgIHt2dEh0cy5tYXAoKHZ0SHQsIGkpID0+IDx0aCBrZXk9e2l9Pnt2dEh0fTwvdGg+KX1cbiAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgPC90aGVhZD5cbiAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICB7Y2FwYWJSb3dzLm1hcCgocm93LCBpKSA9PiA8dHIga2V5PXtpfSBjbGFzc05hbWU9eyhNYXRoLmZsb29yKGkvMykgJSAyKSAmJiAndGFibGVPZGQnfT5cbiAgICAgICAgICAgICAge3Jvdy5tYXAoKGNvbCwgaSkgPT4gY29sLnR5cGUgPT09ICdhYmlsaXR5JyA/XG4gICAgICAgICAgICAgICAgPHRkIGtleT17aX0gcm93U3Bhbj17M30gY2xhc3NOYW1lPVwiZ29hbHNTdWJqZWN0XCI+e2NvbC5uYW1lfTwvdGQ+IDpcbiAgICAgICAgICAgICAgICBjb2wudHlwZSA9PT0gJ2NhcGFiaWxpdHknID9cbiAgICAgICAgICAgICAgICAgIDx0ZCBrZXk9e2l9IGNsYXNzTmFtZT1cImdvYWxzU3ViamVjdFwiPntjb2wubmFtZX08L3RkPiA6XG4gICAgICAgICAgICAgICAgICBjb2wuc2VsZWN0ZWQgP1xuICAgICAgICAgICAgICAgICAgICA8dGQga2V5PXtpfSBjbGFzc05hbWU9XCJlZHNTZWxlY3RlZFwiPjxkaXYgY2xhc3NOYW1lPVwibWFya2VkSXRlbVwiPjwvZGl2PjwvdGQ+IDpcbiAgICAgICAgICAgICAgICAgICAgPHRkIGtleT17aX0gLz4pfVxuICAgICAgICAgICAgPC90cj4pfVxuICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgIDwvdGFibGU+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj47XG4gIH1cbn0iLCJpbXBvcnQgeyBFRFNTdHVkZW50RnV0dXJlQWJpbGl0eSB9IGZyb20gJy4uLy4uL2NvbnRyYWN0cy9lZHMnO1xuaW1wb3J0IHsgZmxhdHRlbiB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWxzJztcblxudHlwZSBBYmlsaXR5Q2VsbCA9IHsgdHlwZTogJ2FiaWxpdHknLCBuYW1lOiBzdHJpbmcgfTtcbnR5cGUgQ2FwYWJDZWxsID0geyB0eXBlOiAnY2FwYWJpbGl0eScsIG5hbWU6IHN0cmluZyB9O1xudHlwZSBUZXJtQ2VsbCA9IHsgdHlwZTogJ3Rlcm0nLCBzZWxlY3RlZDogYm9vbGVhbiB9O1xudHlwZSBDZWxsID0gQWJpbGl0eUNlbGwgfCBDYXBhYkNlbGwgfCBUZXJtQ2VsbDtcblxuZXhwb3J0IGNsYXNzIEZ1dHVyZUFiaWxpdGllc1ZpZXdNb2RlbCB7XG4gIGNvbHVtbkhlYWRlcnM6IHtuYW1lOiBzdHJpbmcsIHR5cGU6IHN0cmluZ31bXTtcbiAgdnRIdHM6IHN0cmluZ1tdO1xuICBjYXBhYlJvd3M6IENlbGxbXVtdO1xuXG4gIGNvbnN0cnVjdG9yKGRhdGE6IEVEU1N0dWRlbnRGdXR1cmVBYmlsaXR5W10pIHtcbiAgICAvLyBXaWxsIGJ1aWxkIHRoZSB0b3RhbCB5ZWFyc1xuICAgIGNvbnN0IGZvcm1OYW1lczoge1tuYW1lOiBzdHJpbmddOiB0cnVlfSA9IHt9O1xuICAgIGRhdGEuZm9yRWFjaChhID0+IGEuY2FwYWJpbGl0aWVzLmZvckVhY2goYyA9PiBmb3JtTmFtZXNbYy5mb3JtTmFtZV0gPSB0cnVlKSk7XG4gICAgY29uc3QgeWVhcnMgPSBPYmplY3Qua2V5cyhmb3JtTmFtZXMpO1xuICAgIFxuICAgIC8vIGNvbHVtbkhlYWRlcnNcbiAgICB0aGlzLmNvbHVtbkhlYWRlcnMgPSBbe1xuICAgICAgbmFtZTogXCJGcmFtdGlkc2bDtnJtw6VnYVwiLFxuICAgICAgdHlwZTogXCJoZWFkZXJcIlxuICAgIH0sIHtcbiAgICAgIG5hbWU6IFwiT21yw6VkZVwiLFxuICAgICAgdHlwZTogXCJoZWFkZXJcIlxuICAgIH1dLmNvbmNhdCh5ZWFycy5tYXAoeWVhciA9PiAoe1xuICAgICAgbmFtZTogeWVhcixcbiAgICAgIHR5cGU6ICd5ZWFyJ1xuICAgIH0pKSk7XG5cbiAgICAvLyB2dEh0c1xuICAgIHRoaXMudnRIdHMgPSBmbGF0dGVuKHllYXJzLm1hcCh5ZWFyID0+IFtcIkhUXCIsIFwiVlRcIl0pKTtcblxuICAgIC8vIGNhYmFiUm93c1xuICAgIGNvbnN0IHJvd3M6IENlbGxbXVtdID0gW107XG4gICAgZGF0YS5mb3JFYWNoKGEgPT4ge1xuICAgICAgbGV0IHJvdzogQ2VsbFtdID0gW3t0eXBlOiAnYWJpbGl0eScsIG5hbWU6IGEuYWJpbGl0eU5hbWV9XTtcbiAgICAgIGNvbnN0IGFkZGVkQ2FwYWJzIDoge1tuYW1lOiBzdHJpbmddOiB0cnVlfSA9IHt9O1xuICAgICAgYS5jYXBhYmlsaXRpZXMuZm9yRWFjaChjID0+IHtcbiAgICAgICAgY29uc3QgY2VsbHM6IFRlcm1DZWxsW10gPSBbXG4gICAgICAgICAge3R5cGU6ICd0ZXJtJywgc2VsZWN0ZWQ6IGMuaHRIYXNWYWx1ZSAhPT0gZmFsc2V9LFxuICAgICAgICAgIHt0eXBlOiAndGVybScsIHNlbGVjdGVkOiBjLnZ0SGFzVmFsdWUgIT09IGZhbHNlfVxuICAgICAgICBdO1xuICAgICAgICAvL2lmIChjLmh0SGFzVmFsdWUgfHwgYy52dEhhc1ZhbHVlKSBkZWJ1Z2dlcjtcblxuICAgICAgICBpZiAoIWFkZGVkQ2FwYWJzW2MuY2FwYWJpbGl0eU5hbWVdKSB7XG4gICAgICAgICAgLy9pZiAoIWlzRmlyc3RDYXBhYmlsaXR5KSByb3dzLnB1c2gocm93KTtcbiAgICAgICAgICBpZiAocm93Lmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHJvd3MucHVzaChyb3cpO1xuICAgICAgICAgICAgcm93ID0gW107XG4gICAgICAgICAgfVxuICAgICAgICAgIGFkZGVkQ2FwYWJzW2MuY2FwYWJpbGl0eU5hbWVdID0gdHJ1ZTtcbiAgICAgICAgICByb3cucHVzaCh7dHlwZTogJ2NhcGFiaWxpdHknLCBuYW1lOiBjLmNhcGFiaWxpdHlOYW1lfSk7XG4gICAgICAgICAgY2VsbHMuZm9yRWFjaChjZWxsID0+IHJvdy5wdXNoKGNlbGwpKTtcbiAgICAgICAgfSBlbHNlIGlmIChyb3cpIHtcbiAgICAgICAgICAvL2FkZGVkQ2FwYWJzW2MuY2FwYWJpbGl0eU5hbWVdLmNvbmNhdChjZWxscyk7XG4gICAgICAgICAgY2VsbHMuZm9yRWFjaChjZWxsID0+IHJvdy5wdXNoKGNlbGwpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBpZiAocm93KSByb3dzLnB1c2gocm93KTtcbiAgICB9KTtcblxuICAgIHRoaXMuY2FwYWJSb3dzID0gcm93cztcbiAgfVxufSIsImltcG9ydCB7RURTU3R1ZHlQbGFufSBmcm9tICcuLi8uLi9jb250cmFjdHMvZWRzJztcbmltcG9ydCB7IEVEU1BlcmlvZCB9IGZyb20gJy4uLy4uL2FwaXMvZWRzY2xpZW50JztcblxuZXhwb3J0IGNsYXNzIFZpZXdNb2RlbCB7XG4gICAgc3ViamVjdHM6IEFycmF5PHtcbiAgICAgICAgbmFtZTogc3RyaW5nO1xuICAgICAgICBhdEdvYWw6IHN0cmluZztcbiAgICAgICAgc3RHb2FsOiBzdHJpbmc7XG4gICAgICAgIGZpbmFsR29hbDogc3RyaW5nO1xuICAgICAgICBzdHJhdGVnaWVzOiBzdHJpbmc7XG4gICAgfT47XG5cbiAgICBjb25zdHJ1Y3RvciAoc3R1ZHlQbGFuczogRURTU3R1ZHlQbGFuW10pIHtcbiAgICAgICAgdGhpcy5zdWJqZWN0cyA9IHN0dWR5UGxhbnMubWFwKHNwID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBlcmlvZEdvYWxzID0gc3AucGVyaW9kR29hbHNcbiAgICAgICAgICAgICAgICAubWFwKGcgPT4gKHtwZXJpb2Q6IG5ldyBFRFNQZXJpb2QoZy5wZXJpb2ROYW1lKSwgZ29hbDogZy5ncmFkZU5hbWV9KSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG5hbWU6IHNwLmNvdXJzZVVuaXROYW1lLFxuICAgICAgICAgICAgICAgIGF0R29hbDogcGVyaW9kR29hbHMuZmlsdGVyICgoe3BlcmlvZH0pPT4gcGVyaW9kLnRlcm0gPT09ICdBVCcpLm1hcCgoe2dvYWx9KSA9PiBnb2FsKVswXSxcbiAgICAgICAgICAgICAgICBzdEdvYWw6IHBlcmlvZEdvYWxzLmZpbHRlciAoKHtwZXJpb2R9KT0+IHBlcmlvZC50ZXJtID09PSAnU1QnKS5tYXAoKHtnb2FsfSkgPT4gZ29hbClbMF0sXG4gICAgICAgICAgICAgICAgZmluYWxHb2FsOiBzcC5maW5hbEdvYWxHcmFkZSxcbiAgICAgICAgICAgICAgICBzdHJhdGVnaWVzOiBzcC5zdHJhdGVneVRleHRcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IEwgfSBmcm9tICcuLi8uLi91dGlscy91dGlscyc7XG5pbXBvcnQgeyBWaWV3TW9kZWwgfSBmcm9tICcuL2dvYWxzLXZpZXdtb2RlbCc7XG5pbXBvcnQgZW52IGZyb20gJy4uLy4uL2dsb2JhbHMvS0VELmVudic7XG5pbXBvcnQgeyBFRFNTdHVkeVBsYW4gfSBmcm9tICcuLi8uLi9jb250cmFjdHMvZWRzJztcbmltcG9ydCB7IEZ1dHVyZUFiaWxpdGllc1RhYmxlIH0gZnJvbSAnLi9mdXR1cmUtYWJpbGl0aWVzLXRhYmxlJztcblxuaW50ZXJmYWNlIFN0YXRlIHtcbiAgbG9hZGluZ1N0dWR5UGxhbnM6IGJvb2xlYW4sXG4gIHN0dWR5UGxhbnM6IEVEU1N0dWR5UGxhbltdLFxuICBlcnJvcjogc3RyaW5nIHwgbnVsbFxufVxuXG5leHBvcnQgY2xhc3MgS1NHb2FscyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDx7fSwgU3RhdGU+IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGxvYWRpbmdTdHVkeVBsYW5zOiBmYWxzZSxcbiAgICAgIHN0dWR5UGxhbnM6IFtdLFxuICAgICAgZXJyb3I6IG51bGxcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgdGhpcy5sb2FkKCk7XG4gIH1cblxuICBhc3luYyBsb2FkKCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe2xvYWRpbmdTdHVkeVBsYW5zOiB0cnVlfSk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN0dWR5UGxhbnMgPSBhd2FpdCBlbnYuZWRzQ2xpZW50LmdldFN0dWRlbnRHb2FscygpO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7c3R1ZHlQbGFuc30pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtlcnJvcn0pO1xuICAgIH1cbiAgICB0aGlzLnNldFN0YXRlKHtsb2FkaW5nU3R1ZHlQbGFuczogZmFsc2V9KTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB2aWV3TW9kZWwgPSBuZXcgVmlld01vZGVsKHRoaXMuc3RhdGUuc3R1ZHlQbGFucyk7XG4gICAgY29uc3Qgc2hvd1Rlcm1Hb2FscyA9XG4gICAgICAgKCcnK2Vudi5jdXJyZW50VXNlci5zY2hvb2xUeXBlKS50b0xvd2VyQ2FzZSgpICE9PSBcImd5bW5hc2l1bVwiO1xuXG4gICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwia2VkX2JveGVkXCI+XG4gICAgICA8aDQ+XG4gICAgICAgIHtMYE3DpWxgfVxuICAgICAgPC9oND5cbiAgICAgIDxociAvPlxuICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cInNtYWxsRm9udFwiPlxuICAgICAgICA8dGhlYWQ+XG4gICAgICAgICAgPHRyPlxuICAgICAgICAgICAgPHRoPntMYMOEbW5lYH08L3RoPlxuICAgICAgICAgICAge3Nob3dUZXJtR29hbHMgJiYgPHRoPntMYEhUYH08L3RoPn1cbiAgICAgICAgICAgIHtzaG93VGVybUdvYWxzICYmIDx0aD57TGBWVGB9PC90aD59XG4gICAgICAgICAgICA8dGg+e0xgU2x1dG3DpWxgfTwvdGg+XG4gICAgICAgICAgICA8dGg+e0xgU3RyYXRlZ2llcmB9PC90aD5cbiAgICAgICAgICA8L3RyPlxuICAgICAgICA8L3RoZWFkPlxuICAgICAgICA8dGJvZHk+XG4gICAgICAgICAge3ZpZXdNb2RlbC5zdWJqZWN0cy5tYXAoKHMsIGkpID0+XG4gICAgICAgICAgPHRyIGtleT17cy5uYW1lfSBjbGFzc05hbWU9e2kgJSAyICYmIFwidGFibGVPZGRcIn0+XG4gICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwiZ29hbHNTdWJqZWN0XCI+e3MubmFtZX08L3RkPlxuICAgICAgICAgICAge3Nob3dUZXJtR29hbHMgJiYgPHRkIGNsYXNzTmFtZT1cImdvYWxzVGVybVwiPntzLmF0R29hbH08L3RkPn1cbiAgICAgICAgICAgIHtzaG93VGVybUdvYWxzICYmIDx0ZCBjbGFzc05hbWU9XCJnb2Fsc1Rlcm1cIj57cy5zdEdvYWx9PC90ZD59XG4gICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwiZ29hbHNFbmRcIj57cy5maW5hbEdvYWx9PC90ZD5cbiAgICAgICAgICAgIDx0ZD57cy5zdHJhdGVnaWVzfTwvdGQ+XG4gICAgICAgICAgPC90cj5cbiAgICAgICAgICApfVxuICAgICAgICA8L3Rib2R5PjwvdGFibGU+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZGl2aWRlclwiIC8+XG4gICAgICAgIDxGdXR1cmVBYmlsaXRpZXNUYWJsZSAvPlxuICAgIDwvZGl2PlxuICB9XG59XG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQge0tTVGVybVBsYW5uZXJ9IGZyb20gJy4vdGVybXBsYW5uZXInO1xuaW1wb3J0IHsgVHV0b3JhYmxlQ29tcG9uZW50IH0gZnJvbSAnLi4vdXRpbGl0eS1jb21wb25lbnRzL3R1dG9yYWJsZS1jb21wb25lbnQnO1xuaW1wb3J0IHsgSW5qZWN0ZWRJbnRsUHJvcHMgfSBmcm9tICdyZWFjdC1pbnRsJztcbmltcG9ydCB7IExhbmd1YWdlQ29udGV4dCB9IGZyb20gJy4uL3V0aWxpdHktY29tcG9uZW50cy9MYW5ndWFnZUNvbnRleHQnO1xuXG5pbnRlcmZhY2UgUHJvcHMgZXh0ZW5kcyBJbmplY3RlZEludGxQcm9wc3tcbiAgdmlld0NvdXJzZVVybDogc3RyaW5nO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gS1NUZXJtUGxhbm5lclR1dG9yZWQgKHByb3BzOiBQcm9wcykge1xuICBjb25zdCB7aW50bH0gPSBwcm9wcztcbiAgcmV0dXJuIDxMYW5ndWFnZUNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3tpbnRsfX0+XG4gIDxUdXRvcmFibGVDb21wb25lbnRcbiAgICB0dXRvcmVkPXt0cnVlfVxuICAgIGNyZWF0ZUNvbXBvbmVudD17ZW52ID0+XG4gICAgICA8S1NUZXJtUGxhbm5lclxuICAgICAgICBrZXk9e2Vudi5jdXJyZW50VXNlci5tYWlsfVxuICAgICAgICBlbnY9e2Vudn1cbiAgICAgICAgdHV0b3JlZD17dHJ1ZX0gXG4gICAgICAgIGluaXRpYWxEYXRlPXtuZXcgRGF0ZSgpfS8+XG4gICAgfVxuICAvPjwvTGFuZ3VhZ2VDb250ZXh0LlByb3ZpZGVyPjtcbn1cbiIsImltcG9ydCB7VGVybX0gZnJvbSAnLi4vLi4vY29udHJhY3RzL2tlZC1tb2RlbHMnO1xuaW1wb3J0IHtFRFNDb3Vyc2V9IGZyb20gJy4uLy4uL2NvbnRyYWN0cy9lZHMnO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Rmlyc3RBbmRMYXN0V2Vlayh0ZXJtOiBUZXJtKSB7XG4gIHJldHVybiB0ZXJtID09PSAnQVQnID9cbiAgICBbMzMsIDUwXSA6ICAvLyBUaGlzIGlzIGEgZ3Vlc3MhIE5lZWQgZGF0YSEgU2hvdWxkIGJlIHBvc3NpYmxlIHRvIGdldCBmcm9tIHNrb2xhMjQ/XG4gICAgWzIsIDIzXTsgICAgLy8gVGhpcyBpcyBhIGd1ZXNzISBOZWVkIGRhdGEhXG59XG5cbmV4cG9ydCBjb25zdCBMQVNUX1NURVBfU1BSSU5HID0gMjg7IC8vIFdlZWsgMjggaXMgaW4gc3VtbWVyLiBVc2UgaXQgYXMgcGxhY2Vob2xkZXIgZm9yIFwibGFzdCBzdGVwXCJcbmV4cG9ydCBjb25zdCBMQVNUX1NURVBfQVVUVU1OID0gNTI7IC8vIFdlZWsgbXVzdCBiZSB2YWxpZC4gVXNlIGl0IGFzIHBsYWNlaG9sZGVyIGZvciBcImxhc3Qgc3RlcFwiXG5cbi8qKlxuICogTm90ZSB0aGF0IHRoaXMgZnVuY3Rpb24gaXMgdGlnaHRseSBjb3VwbGVkIHRvIHRoZSBzd2VkaXNoIHNjaG9vbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRDb3Vyc2VGcm9tQ29sdW1uSGVhZGVyKFxuICBjb3Vyc2VzOiBFRFNDb3Vyc2VbXSxcbiAgY29sdW1uSGVhZGVyOiBzdHJpbmcpIDogRURTQ291cnNlIHwgbnVsbFxue1xuICBzd2l0Y2ggKGNvbHVtbkhlYWRlcikge1xuICAgIGNhc2UgJ00uc3ByJzogcmV0dXJuIGNvdXJzZXNcbiAgICAgIC5maWx0ZXIoY291cnNlID0+IGNvdXJzZS5zaG9ydE5hbWUgIT09ICdNQScgJiYgY291cnNlLnNob3J0TmFtZS5zdGFydHNXaXRoKCdNJykpWzBdIHx8IG51bGw7XG4gICAgY2FzZSAnTWEnOiByZXR1cm4gY291cnNlcy5maWx0ZXIoYyA9PiBjLnNob3J0TmFtZSA9PT0gXCJNQVwiKVswXSB8fCBudWxsO1xuICAgIGNhc2UgJ1N2L1N2QSc6IHJldHVybiBjb3Vyc2VzLmZpbHRlcihjID0+IGMuc2hvcnROYW1lLnN0YXJ0c1dpdGgoXCJTVlwiKSlbMF0gfHwgbnVsbDtcbiAgICBjYXNlICdFbmcnOiByZXR1cm4gY291cnNlcy5maWx0ZXIoYyA9PiBjLnNob3J0TmFtZSA9PT0gXCJFTlwiKVswXSB8fCBudWxsO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29sdW1uc0hlYWRlcihsb2NhbGU6IHN0cmluZyk6IHN0cmluZ1tdXG57XG4gIHN3aXRjaChsb2NhbGUpXG4gIHtcbiAgICBjYXNlICdzdic6XG4gICAgcmV0dXJuIFsnTS5zcHInLCdNYScsICdTdi9TdkEnLCAnRW5nJ107XG4gICAgY2FzZSAnZW5fc2luJzpcbiAgICByZXR1cm4gWydNRkwnLCdNYScsICdIaScsICdFbmcnLCAnWW9nYScsICdJQ1QnXTtcbiAgICBjYXNlICdlbl9uaW4nOlxuICAgIHJldHVybiBbJ01GTCcsJ01hJywgJ0hpJywgJ0VuZycsICdZb2dhJywgJ0lDVCddO1xuICB9XG59XG5cbi8qKlxuICogTm90ZSB0aGF0IHRoaXMgZnVuY3Rpb24gaXMgdGlnaHRseSBjb3VwbGVkIHRvIHRoZSBzd2VkaXNoIHNjaG9vbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvbHVtbkhlYWRlckZyb21Db3Vyc2UoY291cnNlOiBFRFNDb3Vyc2UpIDogc3RyaW5nXG57XG4gIGNvbnN0IHNob3J0TmFtZSA9IGNvdXJzZS5zaG9ydE5hbWU7XG4gIGlmIChzaG9ydE5hbWUgPT09IFwiTUFcIikgcmV0dXJuICdNYSc7XG4gIGlmIChzaG9ydE5hbWUgPT09IFwiRU5cIikgcmV0dXJuICdFbmcnO1xuICBpZiAoc2hvcnROYW1lLnN0YXJ0c1dpdGgoXCJTVlwiKSkgcmV0dXJuICdTdi9TdkEnO1xuICBpZiAoc2hvcnROYW1lLnN0YXJ0c1dpdGgoXCJNMlwiKSkgcmV0dXJuICdNLnNwcic7XG4gIHJldHVybiBudWxsO1xufVxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgR2VuZXJpY1NjaG9vbFRlcm0gfSBmcm9tICcuLi8uLi91dGlscy9nZW5lcmljLXNjaG9vbC10ZXJtJztcbmltcG9ydCB7RURTQ291cnNlfSBmcm9tICcuLi8uLi9jb250cmFjdHMvZWRzJztcbmltcG9ydCB7Vmlld01vZGVsfSBmcm9tICcuL3ZpZXdtb2RlbCc7XG5pbXBvcnQgeyBDb250ZW50RWRpdGFibGVGaWVsZH0gZnJvbSAnLi4vdXRpbGl0eS1jb21wb25lbnRzL2NvbnRlbnQtZWRpdGFibGUtZmllbGQnO1xuaW1wb3J0ICB7IEVudiB9IGZyb20gJy4uLy4uL2dsb2JhbHMvS0VELmVudic7XG5pbXBvcnQgeyBLU1Rlcm1QbGFubmVyV2Vla1BsYW4sIFRlcm1QbGFubmVyVHV0b3JOb3RlLCBUZXJtcGxhbm5lcldlZWtPclR1dG9yIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xuaW1wb3J0ICcuLi8uLi9yZXBvcy9rcy10ZXJtcGxhbm5lci1yZXBvLWluc3RhbmNlJztcbmltcG9ydCB7TGFuZ3VhZ2VDb250ZXh0fSBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvTGFuZ3VhZ2VDb250ZXh0JztcbmltcG9ydCB7Rm9ybWF0dGVkTWVzc2FnZX0gZnJvbSAncmVhY3QtaW50bCc7XG5pbXBvcnQgY2ZnIGZyb20gJy4uLy4uL2dsb2JhbHMvS0VELmNmZyc7XG5pbXBvcnQgeyBTcGlubmVyIH0gZnJvbSAnLi4vY291cnNlLWJ1aWxkZXIvc3ViLWNvbXBvbmVudHMvc3Bpbm5lcic7XG5pbXBvcnQgeyBEb3VnaG51dCB9IGZyb20gJy4uL2NoYXJ0cy9kb3VnaG51dCc7XG5pbXBvcnQgeyBnZXRTY2hvb2xUcmFuc2xhdGVkU3ViamVjdEZ1bGxuYW1lIH0gZnJvbSAnLi4vLi4vdXRpbHMvZ2VuZXJpYy1zY2hvb2wtdXRpbHMnO1xuaW1wb3J0IHsgRGlhbG9ncyB9IGZyb20gJy4uL3V0aWxpdHktY29tcG9uZW50cy9kaWFsb2dzJztcbmltcG9ydCB7IFR1dG9yRGlhbG9nIH0gZnJvbSAnLi90dXRvci1kaWFsb2cnO1xuaW1wb3J0IHsgRG9jdW1lbnRBY2Nlc3MgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XG5pbXBvcnQgeyBmZWF0dXJlcyB9IGZyb20gJy4uLy4uL2ZlYXR1cmVzJztcbmltcG9ydCB7IE9wZW5DbG9zZUJveCB9IGZyb20gJy4uL3V0aWxpdHktY29tcG9uZW50cy9vcGVuLWNsb3NlLWJveCc7XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIGluaXRpYWxEYXRlOiBEYXRlO1xuICB0dXRvcmVkOiBib29sZWFuO1xuICBlbnY6IEVudjtcbn1cblxuaW50ZXJmYWNlIFN0YXRlIHtcbiAgc2Nob29sVGVybTogR2VuZXJpY1NjaG9vbFRlcm07XG4gIHdlZWtQbGFuczogVGVybXBsYW5uZXJXZWVrT3JUdXRvcltdO1xuICBhY3RpdmVDb3Vyc2VzOiBFRFNDb3Vyc2VbXTtcbiAgbG9hZGluZ1dlZWtQbGFuczogYm9vbGVhbjtcbiAgbG9hZGluZ0FjdGl2ZUNvdXJzZXM6IGJvb2xlYW47XG4gIGVycm9yOiBFcnJvciB8IHN0cmluZyB8IG51bGw7XG4gIGluaXRpYWxMb2FkOiBib29sZWFuO1xuICBkaWFsb2dzOiBhbnlbXTtcbn1cblxuXG5leHBvcnQgY2xhc3MgS1NUZXJtUGxhbm5lciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcyxTdGF0ZT4ge1xuICB0YWJsZTogSFRNTFRhYmxlRWxlbWVudDtcbiAgZmxvd0lkOiBudW1iZXI7XG4gIHN0YXRpYyBjb250ZXh0VHlwZSA9IExhbmd1YWdlQ29udGV4dDtcbiAgZmllbGRzOiBDb250ZW50RWRpdGFibGVGaWVsZFtdW107XG4gIHVubW91bnRlZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgc2Nob29sVGVybTogbmV3IEdlbmVyaWNTY2hvb2xUZXJtKHByb3BzLmluaXRpYWxEYXRlKSxcbiAgICAgIGFjdGl2ZUNvdXJzZXM6IFtdLFxuICAgICAgd2Vla1BsYW5zOiBbXSxcbiAgICAgIGVycm9yOiBudWxsLFxuICAgICAgbG9hZGluZ0FjdGl2ZUNvdXJzZXM6IGZhbHNlLFxuICAgICAgbG9hZGluZ1dlZWtQbGFuczogZmFsc2UsXG4gICAgICBpbml0aWFsTG9hZDogdHJ1ZSxcbiAgICAgIGRpYWxvZ3M6IFtdXG4gICAgfVxuICAgIHRoaXMuZmxvd0lkID0gMTtcbiAgICB0aGlzLnVwZGF0ZVdlZWtQbGFucyA9IHRoaXMudXBkYXRlV2Vla1BsYW5zLmJpbmQodGhpcyk7XG4gIH1cblxuICBhc3luYyBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICBhd2FpdCB0aGlzLmxvYWQodGhpcy5zdGF0ZS5zY2hvb2xUZXJtKTtcbiAgICBpZiAoIXRoaXMudW5tb3VudGVkKSB0aGlzLnByb3BzLmVudi5rc1Rlcm1QbGFubmVyUmVwby5tZW0uc3Vic2NyaWJlKHRoaXMudXBkYXRlV2Vla1BsYW5zKTtcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIHRoaXMudW5tb3VudGVkID0gdHJ1ZTtcbiAgICB0aGlzLnByb3BzLmVudi5rc1Rlcm1QbGFubmVyUmVwby5tZW0udW5zdWJzY3JpYmUodGhpcy51cGRhdGVXZWVrUGxhbnMpO1xuICB9ICBcblxuICB1cGRhdGVXZWVrUGxhbnMod2Vla1BsYW5zT3JUdXRvckNvbW06IFRlcm1wbGFubmVyV2Vla09yVHV0b3JbXSwgZXJyb3I/OiBFcnJvcikge1xuICAgIHRoaXMuc2V0U3RhdGUoe3dlZWtQbGFuczogd2Vla1BsYW5zT3JUdXRvckNvbW0sIGxvYWRpbmdXZWVrUGxhbnM6IGZhbHNlLCBlcnJvcjogZXJyb3IgfHwgbnVsbH0pO1xuICB9XG5cbiAgYXN5bmMgbG9hZChzY2hvb2xUZXJtOiBHZW5lcmljU2Nob29sVGVybSkge1xuICAgIGNvbnN0IGZsb3dJZCA9ICsrdGhpcy5mbG93SWQ7XG4gICAgdGhpcy5maWVsZHMgPSBbXTtcblxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgLy9sb2FkaW5nV2Vla1BsYW5zOiB0cnVlLFxuICAgICAgbG9hZGluZ0FjdGl2ZUNvdXJzZXM6IHRydWVcbiAgICB9KTtcbiAgICBjb25zdCB7a3NUZXJtUGxhbm5lclJlcG99ID0gdGhpcy5wcm9wcy5lbnY7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgdGVybSA9IGF3YWl0IHRoaXMubG9hZEFjYWRlbWljWWVhckRhdGVzKHNjaG9vbFRlcm0sIGNmZy5LRURfU0NIT09MX0xPQ0FMRSk7XG4gICAgICBpZiAodGhpcy5mbG93SWQgIT09IGZsb3dJZCkgcmV0dXJuO1xuICAgICAgdmFyIGN1cnJlbnRTY2hvb2xUZXJtID0gbmV3IEdlbmVyaWNTY2hvb2xUZXJtKHNjaG9vbFRlcm0uc2VsZWN0ZWREYXRlLCB0aGlzLmNvbnRleHQuaW50bC5sb2NhbGUsIHRlcm0pO1xuICAgICAgLy9yZWZyZXNoIHNhdmVkIGRhdGFcbiAgICAgIGtzVGVybVBsYW5uZXJSZXBvLnJlZnJlc2hEYXRhKGN1cnJlbnRTY2hvb2xUZXJtLmdldFRlcm1TdGFydEFuZEVuZCh0cnVlKSk7XG5cbiAgICAgIC8vcmVsb2FkIGNvdXJzZXMgYmFzZWQgb24gdGhlIGN1cnJlbnQgZGF0ZVxuICAgICAgY29uc3QgYWN0aXZlQ291cnNlcyA9IGF3YWl0IHRoaXMubG9hZEFjdGl2ZUNvdXJzZXMoY3VycmVudFNjaG9vbFRlcm0pO1xuICAgICAgaWYgKHRoaXMuZmxvd0lkICE9PSBmbG93SWQpIHJldHVybjtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe3NjaG9vbFRlcm06IGN1cnJlbnRTY2hvb2xUZXJtLCBpbml0aWFsTG9hZDogZmFsc2UsIGFjdGl2ZUNvdXJzZXMsIGxvYWRpbmdBY3RpdmVDb3Vyc2VzOiBmYWxzZX0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpZiAodGhpcy5mbG93SWQgIT09IGZsb3dJZCkgcmV0dXJuO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7c2Nob29sVGVybTogY3VycmVudFNjaG9vbFRlcm0sIGxvYWRpbmdBY3RpdmVDb3Vyc2VzOiBmYWxzZSwgZXJyb3J9KTsgIFxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGxvYWRBY2FkZW1pY1llYXJEYXRlcyhzY2hvb2xUZXJtOiBHZW5lcmljU2Nob29sVGVybSwgc2Nob29sTG9jYWxlOnN0cmluZyl7XG4gICAgY29uc3QgdGVybURhdGVzID0gYXdhaXQgdGhpcy5wcm9wcy5lbnYuZWRzQ2xpZW50LmdldEFjYWRlbWljWWVhclRlcm1zKHNjaG9vbExvY2FsZSwgc2Nob29sVGVybS5zZWxlY3RlZERhdGUpO1xuICAgIHJldHVybiB0ZXJtRGF0ZXM7XG4gIH1cblxuICBhc3luYyBsb2FkQWN0aXZlQ291cnNlcyhzY2hvb2xUZXJtOiBHZW5lcmljU2Nob29sVGVybSkge1xuICAgIC8vQ3VzdG9tIGZvciBub3cgaW4gb3JkZXIgdG8gY2hhbmdlIEVEU1BlcmlvZFxuICAgIC8vY29uc3QgcGVyaW9kTmFtZSA9IG5ldyBFRFNQZXJpb2Qoc2Nob29sVGVybSkucGVyaW9kOyBcbiAgICBjb25zdCBwZXJpb2ROYW1lID0gc2Nob29sVGVybS5nZXRFZHNQZXJpb2ROYW1lKCk7IC8vdGVtcG9yYXJ5IGZpeCBcbiAgICBjb25zdCBhY3RpdmVDb3Vyc2VzID0gYXdhaXQgdGhpcy5wcm9wcy5lbnYuZWRzQ2xpZW50LmdldEFjdGl2ZUNvdXJzZXMoe3BlcmlvZE5hbWV9KTtcbiAgICByZXR1cm4gYWN0aXZlQ291cnNlcztcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUNlbGwod2Vla1BsYW46IEtTVGVybVBsYW5uZXJXZWVrUGxhbiwgY29sdW1uTmFtZTogc3RyaW5nLCBuZXdWYWx1ZTogc3RyaW5nKSB7XG4gICAgY29uc3Qgb2xkVmFsdWUgPSAod2Vla1BsYW4gJiYgd2Vla1BsYW4uY2VsbFZhbHVlc1tjb2x1bW5OYW1lXSkgfHwgXCJcIjtcbiAgICBpZiAob2xkVmFsdWUgPT09IG5ld1ZhbHVlKSByZXR1cm47XG4gICAgdHJ5IHtcbiAgICAgIHdlZWtQbGFuLmNlbGxWYWx1ZXNbY29sdW1uTmFtZV0gPSBuZXdWYWx1ZTtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb3BzLmVudi5rc1Rlcm1QbGFubmVyUmVwby51cHNlcnQgKFxuICAgICAgICB3ZWVrUGxhbixcbiAgICAgICAgKHdwIDogS1NUZXJtUGxhbm5lcldlZWtQbGFuKSA9PiAgd3AuY2VsbFZhbHVlc1tjb2x1bW5OYW1lXSA9IG5ld1ZhbHVlKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvci5zdGFjayB8fCBlcnJvcik7XG4gICAgICBpZiAoZXJyb3IubmFtZSA9PT0gXCJodHRwNDAzXCIpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7ZXJyb3I6ICB0aGlzLmNvbnRleHQuaW50bCh7aWQ6XCJjb21tb24uY2hhbmdlc05vdFNhdmVkVW5hdXRob3JpemVkXCIsIGRlZmF1bHRNZXNzYWdlOlwiw4RuZHJpbmdhcm5hIHNwYXJhZGVzIGludGUgcC5nLmEuIG90aWxscsOkY2tsaWcgYmVow7ZyaWdoZXQuXCJ9KX0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7ZXJyb3I6IHRoaXMuY29udGV4dC5pbnRsKHtpZDpcImNvbW1vbi5jaGFuZ2VzTm90U2F2ZWRFcnJvck9jY3VyZWRcIiwgZGVmYXVsdE1lc3NhZ2U6XCJGw7ZyIHRpbGxmw6RsbGV0IHByb2JsZW0gYXR0IHNwYXJhIGRhdGEuIERpbmEgw6RuZHJpbmdhciBzcGFyYWRlcyBpbnRlLlwifSl9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXG4gICAqIEBwYXJhbSB0dXRvck5vdGUgXG4gICAqIEBwYXJhbSBuZXdWYWx1ZSBcbiAgICogXG4gICAqIFVwZGF0ZSB0dXRvciBmaWVsZCB2YWx1ZVxuICAgKi9cbiAgYXN5bmMgdXBkYXRlVHV0b3JOb3RlRmllbGQodHV0b3JOb3RlOiBUZXJtUGxhbm5lclR1dG9yTm90ZSwgbmV3VmFsdWU6IHN0cmluZyl7XG4gICAgY29uc3Qgb2xkVmFsdWUgPSAodHV0b3JOb3RlICYmIHR1dG9yTm90ZS5jb250ZW50KSB8fCBcIlwiO1xuICAgIGlmIChvbGRWYWx1ZSA9PT0gbmV3VmFsdWUpIHJldHVybjtcbiAgICB0cnkge1xuICAgICAgdHV0b3JOb3RlLmNvbnRlbnQgPSBuZXdWYWx1ZTtcbiAgICAgIC8vc2V0IGRvY3VtZW50IEFDTFxuICAgICAgdHV0b3JOb3RlLmFjbCA9IFtcbiAgICAgICAgbmV3IERvY3VtZW50QWNjZXNzKFwidHV0b3JGb3JcIiwgdGhpcy5wcm9wcy5lbnYuY3VycmVudFVzZXIubWFpbCwgXCJTXCIpLnRvU3RyaW5nKCksXG4gICAgICAgIG5ldyBEb2N1bWVudEFjY2VzcyhcImVtYWlsXCIsIHRoaXMucHJvcHMuZW52LmN1cnJlbnRVc2VyLm1haWwsIFwiUlwiKS50b1N0cmluZygpLFxuICAgICAgXTtcblxuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvcHMuZW52LmtzVGVybVBsYW5uZXJSZXBvLnVwc2VydCh0dXRvck5vdGUsIFxuICAgICAgICAobm90ZSA6IFRlcm1QbGFubmVyVHV0b3JOb3RlKSA9PiBub3RlLmNvbnRlbnQgPSBuZXdWYWx1ZSk7XG4gICAgICB9IGNhdGNoIChzaG93RXJyb3Ipe31cbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGUgdHV0b3IgY29tbWVudCBieSBJZFxuICAgKiBAcGFyYW0gbm90ZUlkXG4gICAqL1xuICBhc3luYyBkZWxldGVUdXRvck5vdGVGaWVsZChub3RlSWQ6IHN0cmluZykge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLnByb3BzLmVudi5rc1Rlcm1QbGFubmVyUmVwby5kZWxldGUoW25vdGVJZF0pO1xuICAgIH0gY2F0Y2ggKHNob3dFcnJvcil7fVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIGNvbW1lbnQgZnJvbSB0dXRvclxuICAgKiBAcGFyYW0gd2Vla051bWJlciBcbiAgICogQHBhcmFtIGNvbW1lbnQgXG4gICAqIFxuICAgKi9cbiAgb25UdXRvckNsaWNrKG5vdGU6IFRlcm1QbGFubmVyVHV0b3JOb3RlKSB7XG4gICAgdGhpcy5vcGVuRGlhbG9nKDxUdXRvckRpYWxvZ1xuICAgICAgd2Vla051bWJlcj17bm90ZS53ZWVrTnVtYmVyfVxuICAgICAgY29tbWVudD17bm90ZS5jb250ZW50fVxuICAgICAgaW50bD17dGhpcy5jb250ZXh0LmludGx9XG4gICAgICB1cGRhdGVEYXRhID0ge3ZhbCA9PiB0aGlzLnVwZGF0ZVR1dG9yTm90ZUZpZWxkKG5vdGUsIHZhbCl9XG4gICAgICBkZWxldGVOb3RlRGF0YSA9IHsoKSA9PiB0aGlzLmRlbGV0ZVR1dG9yTm90ZUZpZWxkKG5vdGUuaWQpfVxuICAgICAgY2xvc2VEaWFsb2c9eygpPT50aGlzLmNsb3NlRGlhbG9nKCl9IC8+KTtcbiAgfVxuXG4gIG9wZW5EaWFsb2coZGlhbG9nKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGRpYWxvZ3M6IFsuLi50aGlzLnN0YXRlLmRpYWxvZ3MsIGRpYWxvZ10gfSk7XG4gIH1cblxuICBjbG9zZURpYWxvZygpIHtcbiAgICB0aGlzLnNldFN0YXRlKHsgZGlhbG9nczogdGhpcy5zdGF0ZS5kaWFsb2dzLnNsaWNlKDAsIHRoaXMuc3RhdGUuZGlhbG9ncy5sZW5ndGggLSAxKSB9KTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIE5hdmlnYXRlIHRvIGFkamFjZW50IGZpZWxkIGRlcGVuZGluZyBvbiBkaXJlY3Rpb25cbiAgICogQHBhcmFtIHBvcyBjdXJyZW50IHBvc2l0aW9uIGluIGZpZWxkLW1hdHJpeFxuICAgKiBAcGFyYW0gZGlyZWN0aW9uIGRpcmVjdGlvbiB0byB0YWtlXG4gICAqL1xuICBuYXZpZ2F0ZShwb3M6IHtyb3c6bnVtYmVyLCBjb2w6bnVtYmVyfSwgZGlyZWN0aW9uOnN0cmluZykge1xuICAgIGxldCBuZXdwb3MgPSB7Li4ucG9zfTtcbiAgICBsZXQgbWF4Um93cyA9IHRoaXMuZmllbGRzLmxlbmd0aDtcbiAgICBsZXQgbWF4Q29scyA9IE1hdGgubWF4KC4uLiB0aGlzLmZpZWxkcy5tYXAocm93ID0+IHJvdy5sZW5ndGgpKTtcblxuICAgIHN3aXRjaChkaXJlY3Rpb24pIHtcbiAgICAgIGNhc2UgJ3VwJzpcbiAgICAgICAgbmV3cG9zLnJvdyA9IE1hdGgubWF4KHBvcy5yb3cgLSAxLCAwKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdkb3duJzpcbiAgICAgICAgbmV3cG9zLnJvdyA9IE1hdGgubWluKHBvcy5yb3cgKyAxLCBtYXhSb3dzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdsZWZ0JzpcbiAgICAgICAgbmV3cG9zLmNvbCA9IE1hdGgubWF4KHBvcy5jb2wgLSAxLCAwKVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3JpZ2h0JzpcbiAgICAgICAgbmV3cG9zLmNvbCA9IE1hdGgubWluKHBvcy5jb2wgKyAxLCBtYXhDb2xzKVxuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgaWYgKHRoaXMuZmllbGRzW25ld3Bvcy5yb3ddICYmIHRoaXMuZmllbGRzW25ld3Bvcy5yb3ddW25ld3Bvcy5jb2xdKVxuICAgICAgdGhpcy5maWVsZHNbbmV3cG9zLnJvd11bbmV3cG9zLmNvbF0ubXlzZWxmLmN1cnJlbnQuZm9jdXMoKTtcbiAgfVxuXG4gIFxuICAvKipcbiAgICogQWRkcyBmaWVsZCB0byBmaWVsZC1tYXRyaXggdG8gZW5hYmxlIG5hdmlnYXRpb24gaW4gdGhlZSB0YWJsZVxuICAgKiBAcGFyYW0gZmllbGQgY3VycmVudCBmaWVsZFxuICAgKiBAcGFyYW0gcG9zIHBvc2l0aW9uIG9mIGZpZWxkIGluIGZpZWxkLW1hdHJpeFxuICAgKi9cbiAgYWRkRmllbGQoZmllbGQ6Q29udGVudEVkaXRhYmxlRmllbGQsIHBvczp7cm93Om51bWJlciwgY29sOm51bWJlcn0pIHtcbiAgICBpZiAodGhpcy5maWVsZHNbcG9zLnJvd10gPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5maWVsZHNbcG9zLnJvd10gPSBbXTtcbiAgICB9XG4gICAgdGhpcy5maWVsZHNbcG9zLnJvd11bcG9zLmNvbF0gPSBmaWVsZDtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgdGhlIGNlbGwgaW4gdGhlIHRlcm1wbGFubmVyIHRhYmxlXG4gICAqIEBwYXJhbSByb3dJbmRleCBpbmRleCBvZiByb3cgaW4gdGFibGVcbiAgICogQHBhcmFtIGNvbEluZGV4IGluZGV4IG9mIGNvbHVtbiBpbiB0YWJsZVxuICAgKiBAcGFyYW0gc3ViamVjdE5hbWUgbmFtZSBmaWVsZFxuICAgKiBAcGFyYW0gbW9kZWwgLS11bnVzZWQ/XG4gICAqIEBwYXJhbSB3ZWVrUGxhbiBjdXJyZW50IHJvdyBmcm9tIHdlZWtQbGFuXG4gICAqIEBwYXJhbSByZWFkT25seUNlbGxzIGlmIGNlbGxzIGFyZSByZWFkb25seVxuICAgKi9cbiAgZ2V0VGFibGVDZWxsKHJvd0luZGV4OiBudW1iZXIsIGNvbEluZGV4OiBudW1iZXIsIHN1YmplY3ROYW1lOiBzdHJpbmcsIG1vZGVsOiBWaWV3TW9kZWwsIFxuICAgIHdlZWtQbGFuOiBUZXJtcGxhbm5lcldlZWtPclR1dG9yLCByZWFkT25seUNlbGxzOiBib29sZWFuLCBjb2xUeXBlOiBzdHJpbmcpIHtcbiAgICBjb25zdCB7IGNvbXBsZXRlZFN0ZXBzIH0gPSBtb2RlbDtcbiAgICBjb25zdCBwb3MgPSB7cm93OiByb3dJbmRleCwgY29sOiBjb2xJbmRleH07XG4gICAgXG4gICAgaWYgKGNvbFR5cGUgPT09ICdUdXRvcicpIHtcbiAgICAgIHZhciB0dXRvcmVkV2Vla1BsYW4gPSB3ZWVrUGxhbiBhcyBUZXJtUGxhbm5lclR1dG9yTm90ZTtcbiAgICAgIGNvbnN0IHtjb250ZW50fSA9IHR1dG9yZWRXZWVrUGxhbjtcbiAgICAgIGlmICh0aGlzLnByb3BzLnR1dG9yZWQpIHtcbiAgICAgICAgcmV0dXJuIDx0ZCBrZXk9e1widHV0b3Jub3RlXCIgKyBjb2xJbmRleH0gb25DbGljaz17KCkgPT4gdGhpcy5vblR1dG9yQ2xpY2sodHV0b3JlZFdlZWtQbGFuKX0gY2xhc3NOYW1lPVwidHV0b3JDZWxsXCI+XG4gICAgICAgICAge1xuICAgICAgICAgICAgY29udGVudCA/IDxkaXYga2V5PXtjb2xJbmRleH0gZGF0YS10b29sdGlwPXtjb250ZW50fT48aSBrZXk9e2NvbEluZGV4fSBjbGFzc05hbWU9XCJmYXMgZmEtY29tbWVudC1kb3RzXCI+PC9pPjwvZGl2PiA6IFxuICAgICAgICAgICAgPGRpdiBrZXk9e2NvbEluZGV4fT48aSBrZXk9e2NvbEluZGV4fSBjbGFzc05hbWU9XCJmYXMgZmEtY29tbWVudC1tZWRpY2FsXCI+PC9pPjwvZGl2PlxuICAgICAgICAgIH1cbiAgICAgICAgPC90ZD5cbiAgICAgIH1cblxuICAgIHJldHVybiA8dGQga2V5PXtcInR1dG9ybm90ZVwiICsgY29sSW5kZXh9IGNsYXNzTmFtZT1cInR1dG9yQ2VsbFwiPntjb250ZW50ICYmIDxkaXYga2V5PXtjb2xJbmRleH0gZGF0YS10b29sdGlwPXtjb250ZW50fT48aSBrZXk9e2NvbEluZGV4fSBjbGFzc05hbWU9XCJmYXIgZmEtY29tbWVudC1kb3RzXCI+PC9pPjwvZGl2Pn08L3RkPlxuICAgIH1cbiAgICBlbHNlIHtcbiAgICB2YXIgY3VycmVudFdlZWtQbGFuID0gd2Vla1BsYW4gYXMgS1NUZXJtUGxhbm5lcldlZWtQbGFuO1xuICAgIGNvbnN0IHtjZWxsVmFsdWVzfSA9IGN1cnJlbnRXZWVrUGxhbjtcbiAgICAvLyBhbiBvdXRlciB0ZCBjZWxsIGFuZCBpbm5lciBkaXYgaXMgdXNlZCB0byByZWd1bGF0ZSB0aGUgaGVpZ2h0IGFuZCBhbGxvdyBmb3IgZWxsaXBzZXMgb24gdGV4dC1vdmVyZmxvd1xuICAgIHJldHVybiA8dGQgY2xhc3NOYW1lPXt0aGlzLmdldENlbGxDbGFzc05hbWUoY29tcGxldGVkU3RlcHMsIGNlbGxWYWx1ZXMsIHN1YmplY3ROYW1lKX0+XG4gICAgICA8Q29udGVudEVkaXRhYmxlRmllbGRcbiAgICAgICAga2V5PXtjb2xJbmRleH1cbiAgICAgICAgcmVmPXtmaWVsZCA9PiB0aGlzLmFkZEZpZWxkKGZpZWxkLCBwb3MpfVxuICAgICAgICB0ZXh0PXtjZWxsVmFsdWVzW3N1YmplY3ROYW1lXX1cbiAgICAgICAgdGFnPSdkaXYnXG4gICAgICAgIHZhbGlkYXRlVmFsdWU9e2NvbFR5cGUgPT0gJ1N0ZXAnID8gL15cXGQqJC8gOiB1bmRlZmluZWR9XG4gICAgICAgIG1heENoYXJzPXtjb2xUeXBlID09ICdDb21tZW50Jz8gMTAwOiAoY29sVHlwZSA9PSAnQ291cnNlJyA/IDMwIDogMyl9XG4gICAgICAgIG9uQ2hhbmdlPXt0aGlzLnVwZGF0ZUNlbGwuYmluZCh0aGlzLCB3ZWVrUGxhbiwgc3ViamVjdE5hbWUpfVxuICAgICAgICByZWFkT25seT17cmVhZE9ubHlDZWxscyB8fCBjb2xUeXBlID09ICdUdXRvcid9XG4gICAgICAgIGFsbG93TmF2aWdhdGlvbj17dHJ1ZX1cbiAgICAgICAgb25OYXZpZ2F0ZT17dGhpcy5uYXZpZ2F0ZS5iaW5kKHRoaXMsIHBvcyl9XG4gICAgICAvPlxuICAgIDwvdGQ+XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjbGFzc25hbWUgZm9yIGNlbGxcbiAgICogQHBhcmFtIGNvbXBsZXRlZFN0ZXBzIFxuICAgKiBAcGFyYW0gY2VsbFZhbHVlcyBcbiAgICogQHBhcmFtIHN1YmplY3ROYW1lIFxuICAgKi9cbiAgZ2V0Q2VsbENsYXNzTmFtZShjb21wbGV0ZWRTdGVwcywgY2VsbFZhbHVlcywgc3ViamVjdE5hbWUpe1xuICAgIGNvbnN0IGNvbFR5cGUgPSB0aGlzLmdldENvbHVtblR5cGUoc3ViamVjdE5hbWUpO1xuICAgIGlmIChjb2xUeXBlID09ICdTdGVwJyAmJiBjb21wbGV0ZWRTdGVwc1tzdWJqZWN0TmFtZSArIGNlbGxWYWx1ZXNbc3ViamVjdE5hbWVdXSkge1xuICAgICAgcmV0dXJuICdzdGVwQ2VsbCBjb21wbGV0ZWRTdGVwJztcbiAgICB9XG4gICAgcmV0dXJuIGNvbFR5cGUudG9Mb3dlckNhc2UoKSArICdDZWxsJztcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIHRoZSBjZWxsIGluIHRoZSB0ZXJtcGxhbm5lciB0YWJsZXMgZm9vdGVyXG4gICAqIEBwYXJhbSByb3dJbmRleCBpbmRleCBvZiByb3cgaW4gdGFibGVcbiAgICogQHBhcmFtIGNvbEluZGV4IGluZGV4IG9mIGNvbHVtbiBpbiB0YWJsZVxuICAgKiBAcGFyYW0gc3ViamVjdE5hbWUgbmFtZSBmaWVsZFxuICAgKiBAcGFyYW0gbW9kZWxcbiAgICogQHBhcmFtIHJlYWRPbmx5Q2VsbHMgaWYgY2VsbHMgYXJlIHJlYWRvbmx5XG4gICAqL1xuICBnZXRGb290ZXJDZWxsKHJvd0luZGV4OiBudW1iZXIsIGNvbEluZGV4OiBudW1iZXIsIHN1YmplY3ROYW1lOiBzdHJpbmcsIG1vZGVsOiBWaWV3TW9kZWwsIHJlYWRPbmx5Q2VsbHM6IGJvb2xlYW4pe1xuICAgIGNvbnN0IHBvcyA9IHtyb3c6IHJvd0luZGV4LCBjb2w6IGNvbEluZGV4fTtcbiAgICBjb25zdCBjb2xUeXBlID0gdGhpcy5nZXRDb2x1bW5UeXBlKHN1YmplY3ROYW1lKTtcbiAgICByZXR1cm4gPHRoIGNsYXNzTmFtZT17YCR7Y29sVHlwZX1Gb290ZXJgfVxuICAgID48Q29udGVudEVkaXRhYmxlRmllbGRcbiAgICAgIGtleT17XCJzdGVwRm9vdGVyQ2VsbFwiICsgY29sSW5kZXh9XG4gICAgICByZWY9e2ZpZWxkID0+IHRoaXMuYWRkRmllbGQoZmllbGQsIHBvcyl9XG4gICAgICB0YWc9J2RpdidcbiAgICAgIHRleHQ9e21vZGVsLmxhc3RTdGVwcy5jZWxsVmFsdWVzW3N1YmplY3ROYW1lXX1cbiAgICAgIG9uQ2hhbmdlPXt0aGlzLnVwZGF0ZUNlbGwuYmluZCh0aGlzLCBtb2RlbC5sYXN0U3RlcHMsIHN1YmplY3ROYW1lKX1cbiAgICAgIHJlYWRPbmx5PXtyZWFkT25seUNlbGxzfVxuICAgICAgbWF4Q2hhcnM9ezEwfVxuICAgICAgYWxsb3dOYXZpZ2F0aW9uPXt0cnVlfVxuICAgICAgb25OYXZpZ2F0ZT17dGhpcy5uYXZpZ2F0ZS5iaW5kKHRoaXMsIHBvcyl9XG4gICAgLz48L3RoPlxuICB9XG5cbiAgZ2V0U3RlcEhlYWRlckNvbHVtbihpbmRleDogbnVtYmVyLCB0cmFuc2xhdGVkQ29sdW1uSGVhZGVyOiBzdHJpbmcsIGNvbFR5cGU6IHN0cmluZyl7XG4gICAgcmV0dXJuIDx0aCBrZXk9e2BzdGVwSGVhZGVyQ2VsbF8ke2luZGV4fWB9IGNsYXNzTmFtZT17YCR7Y29sVHlwZS50b0xvd2VyQ2FzZSgpfUhlYWRlcmB9Pntjb2xUeXBlICE9ICdUdXRvcicgPyB0cmFuc2xhdGVkQ29sdW1uSGVhZGVyOiAnJ308L3RoPlxuICB9XG5cbiAgZ2V0Q29sdW1uVHlwZShuYW1lKSB7XG4gICAgY29uc3QgY29sVHlwZXMgPSB7J0tvbW1lbnRhcic6ICdDb21tZW50JywgJ0t1cnMnOiAnQ291cnNlJywgJ1R1dG9yQ29tbWVudCc6ICdUdXRvcicgfTtcbiAgICByZXR1cm4gY29sVHlwZXMuaGFzT3duUHJvcGVydHkobmFtZSk/IGNvbFR5cGVzW25hbWVdIDogJ1N0ZXAnO1xuICB9XG5cbiAgb3BlbkNsb3NlUHJvZ3Jlc3NDaGFydHModmFsdWUpeyAgIFxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdUZXJtcGxhbm5lckJveENoYXJ0cycsIHZhbHVlKTtcbiAgfVxuXG4gIGdldFN0ZXBDaGFydHMoY29sdW1uczogeyBuYW1lOiBzdHJpbmcsIHRyYW5zbGF0ZWROYW1lPzogc3RyaW5nLCBpc0ZpeGVkPzogYm9vbGVhbiB9W10sIHN1YmplY3RQcm9ncmVzczoge1tjb2x1bW5IZWFkZXI6IHN0cmluZ106IHtmaW5hbFN0ZXBDb21wbGV0ZWQ6IGJvb2xlYW4sIHZhbHVlOiBudW1iZXJ9fSkge1xuICAgIHZhciBjaGFydHNCb3hTdGF0ZSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ1Rlcm1wbGFubmVyQm94Q2hhcnRzJykpIGFzIGJvb2xlYW47XG4gICAgcmV0dXJuIDxPcGVuQ2xvc2VCb3ggaGVhZGVyT3Blbj17Y2hhcnRzQm94U3RhdGV9IG9uT3BlbkNsb3NlPXt0aGlzLm9wZW5DbG9zZVByb2dyZXNzQ2hhcnRzfSB0aXRsZT17dGhpcy5jb250ZXh0LmludGwuZm9ybWF0TWVzc2FnZSh7aWQ6XCJ0ZXJtcGxhbm5lci5jaGFydHNCb3hUaXRsZVwiLCBkZWZhdWx0TWVzc2FnZTpcIkZyYW1zdGVnIGRpYWdyYW1cIn0pfT48ZGl2IGNsYXNzTmFtZT1cImNoYXJ0cy1jb250YWluZXJcIj5cbiAgICAgIHtcbiAgICAgICAgY29sdW1ucy5tYXAoZWxlbWVudCA9PiB7XG4gICAgICAgICAgaWYgKCFlbGVtZW50LmlzRml4ZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHBlcmNlbnRhZ2UgPSBzdWJqZWN0UHJvZ3Jlc3NbZWxlbWVudC5uYW1lXSA/IHN1YmplY3RQcm9ncmVzc1tlbGVtZW50Lm5hbWVdLnZhbHVlIDogMDtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHN1YmplY3RQcm9ncmVzc1tlbGVtZW50Lm5hbWVdLmZpbmFsU3RlcENvbXBsZXRlZCA/IG51bGwgOiBcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC5pbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOiBcInRlcm1wbGFubmVyLm5vRmluYWxTdGVwQXZhaWxhYmxlXCIsIGRlZmF1bHRNZXNzYWdlOlwiSW5nZXQgc2x1dHN0ZWcgdGlsbGfDpG5nbGlndFwifSk7XG5cbiAgICAgICAgICAgIHZhciB0cmFuc2xhdGVkQ29sdW1ucyA9IGdldFNjaG9vbFRyYW5zbGF0ZWRTdWJqZWN0RnVsbG5hbWUodGhpcy5jb250ZXh0LmludGwpO1xuICAgICAgICAgICAgcmV0dXJuIDxkaXYga2V5PXtlbGVtZW50Lm5hbWV9IGNsYXNzTmFtZT1cImNoYXJ0LWJveFwiPlxuICAgICAgICAgICAgICA8aDQ+e3RyYW5zbGF0ZWRDb2x1bW5zW2VsZW1lbnQubmFtZV19PC9oND5cbiAgICAgICAgICAgICAgPGRpdiBrZXk9e2VsZW1lbnQubmFtZX0gY2xhc3NOYW1lPVwiaW5uZXItY2hhcnQtYm94XCI+XG4gICAgICAgICAgICAgICAgPERvdWdobnV0IGtleT17ZWxlbWVudC5uYW1lfSBwZXJjZW50YWdlPXtwZXJjZW50YWdlfSBlcnJvck1lc3NhZ2U9e2Vycm9yTWVzc2FnZX0gLz5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgPC9kaXY+XG4gICAgPC9PcGVuQ2xvc2VCb3g+XG59XG5cbiAgZ2V0V2Vla1R1dG9yTm90ZSh3ZWVrUGxhbnNPclR1dG9yTm90ZTogVGVybXBsYW5uZXJXZWVrT3JUdXRvcltdLCB3ZWVrTnVtYmVyOiBudW1iZXIpe1xuICAgIHJldHVybiB3ZWVrUGxhbnNPclR1dG9yTm90ZS5maW5kKCh4OiBUZXJtUGxhbm5lclR1dG9yTm90ZSkgPT4geC50eXBlID09PSBcInR1dG9yLW5vdGVcIiAmJiB4LndlZWtOdW1iZXIgPT09IHdlZWtOdW1iZXIpO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHtpbnRsfSA9IHRoaXMuY29udGV4dDtcbiAgICBjb25zdCBzaG93VHV0b3JDb21tZW50RmllbGQgPSBmZWF0dXJlcy5rc1R1dG9yQ29tbWVudDtcbiAgICBjb25zdCBzaG93RG91Z2hudXRDaGFydHMgPSBmZWF0dXJlcy50ZXJtcGxhbm5lckNoYXJ0cztcbiAgICBjb25zdCBtb2RlbCA9IG5ldyBWaWV3TW9kZWwoXG4gICAgICB0aGlzLnN0YXRlLndlZWtQbGFucyxcbiAgICAgIHRoaXMuc3RhdGUuYWN0aXZlQ291cnNlcyxcbiAgICAgIHRoaXMuc3RhdGUuc2Nob29sVGVybSxcbiAgICAgIGNmZy5LRURfU0NIT09MX0xPQ0FMRSxcbiAgICAgIGludGwsXG4gICAgICBzaG93VHV0b3JDb21tZW50RmllbGQpO1xuXG4gICAgY29uc3Qge3Rlcm1Hb2FscywgY29sdW1uc30gPSBtb2RlbDtcbiAgICBjb25zdCB7dHV0b3JlZH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHtsb2FkaW5nV2Vla1BsYW5zLCBlcnJvciwgd2Vla1BsYW5zOiBkYldlZWtQbGFucywgZGlhbG9nc30gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IGZhaWxlZEluaXRpYWxMb2FkID0gZGJXZWVrUGxhbnMubGVuZ3RoID09PSAwICYmICEhZXJyb3I7XG4gICAgY29uc3QgcmVhZE9ubHlDZWxscyA9IGZhaWxlZEluaXRpYWxMb2FkIHx8IHR1dG9yZWQgfHwgbG9hZGluZ1dlZWtQbGFucztcbiAgICBsZXQgcm93T2Zmc2V0ID0gMDtcbiAgICB2YXIgZmlsdGVyZWRXZWVrcGxhbnMgPSAgbW9kZWwud2Vla1BsYW5zT3JUdXRvck5vdGUuZmlsdGVyKCh4OiBLU1Rlcm1QbGFubmVyV2Vla1BsYW4pPT4gIXgudHlwZSkgYXMgS1NUZXJtUGxhbm5lcldlZWtQbGFuW107XG5cbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5pbml0aWFsTG9hZCA/IDxwPjxTcGlubmVyLz48Rm9ybWF0dGVkTWVzc2FnZSBpZD1cInRlcm1wbGFubmVyLmxvYWRpbmdUZXJtcGxhbm5lclwiIGRlZmF1bHRNZXNzYWdlPVwiVi5nLiB2w6RudGEgbWVkYW4gdGVybWluc3BsYW5lciBsYWRkYXMuLi5cIi8+PC9wPiA6XG4gICAgIDxkaXYgY2xhc3NOYW1lPXtcbiAgICAgICAgXCJ0ZXJtcGxhbm5lclwiICsgXG4gICAgICAgICh0aGlzLnN0YXRlLmxvYWRpbmdXZWVrUGxhbnMgPyBcIiBsb2FkaW5nLXdlZWtwbGFuc1wiIDogXCJcIikgK1xuICAgICAgICAodGhpcy5zdGF0ZS5sb2FkaW5nQWN0aXZlQ291cnNlcyA/IFwiIGxvYWRpbmctY291cnNlc1wiIDogXCJcIilcbiAgICAgIH0+XG4gICAgICB7c2hvd0RvdWdobnV0Q2hhcnRzICYmIHRoaXMuc3RhdGUuYWN0aXZlQ291cnNlcy5sZW5ndGggPiAwICAmJiB0aGlzLmdldFN0ZXBDaGFydHMoY29sdW1ucywgbW9kZWwuc3ViamVjdFByb2dyZXNzKX1cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwia2VkX2JveGVkXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwid2Vla1NlbGVjdFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW1cIj5cbiAgICAgICAgICAgIDxwPnt0aGlzLnN0YXRlLnNjaG9vbFRlcm0udG9Mb2NhbGVTdHJpbmcoaW50bCwgdHJ1ZSl9PC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW1cIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnRuLWdyb3VwXCI+XG4gICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiYnRuXCIgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgIHZhciB0ZXJtID0gdGhpcy5zdGF0ZS5zY2hvb2xUZXJtLnByZXZUZXJtKCk7XG4gICAgICAgICAgICAgICAgICB0aGlzLmxvYWQodGVybSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfT5cbiAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1hbmdsZS1sZWZ0XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPlxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJidG5cIiBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIHRlcm0gPSB0aGlzLnN0YXRlLnNjaG9vbFRlcm0ubmV4dFRlcm0oKTtcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWQodGVybSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfT5cbiAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1hbmdsZS1yaWdodFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwidGVybXBsYW5uZXIudGVybVBsYW5uaW5nXCIgZGVmYXVsdE1lc3NhZ2U9XCJUZXJtaW5zcGxhbmVyaW5nXCIgdGFnTmFtZT1cImg0XCIvPlxuICAgICAgICA8aHIgLz5cbiAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cInRlcm1wbGFubmVyLXRhYmxlIHplYnJhXCI+XG4gICAgICAgICAgPHRoZWFkPlxuICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgIDx0aCBjbGFzc05hbWU9XCJ3ZWVrQ29sdW1uXCI+XG4gICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZSBpZD1cInRlcm1wbGFubmVyLndlZWtOdW1iZXJcIiBkZWZhdWx0TWVzc2FnZT1cIlZlY2thXCIgLz5cbiAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29sdW1ucy5tYXAoIChlbGVtLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgY29uc3QgY29sVHlwZSA9IHRoaXMuZ2V0Q29sdW1uVHlwZShlbGVtLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U3RlcEhlYWRlckNvbHVtbihpbmRleCwgZWxlbS50cmFuc2xhdGVkTmFtZSwgY29sVHlwZSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICA8L3RoZWFkPlxuICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgIHtmaWx0ZXJlZFdlZWtwbGFucy5maWx0ZXIod2sgPT4gd2suY2VsbFZhbHVlcykubWFwKCh3ZWVrUGxhbiwgcm93SW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgcm93T2Zmc2V0ID0gcm93SW5kZXg7XG4gICAgICAgICAgICAgIGNvbnN0IHt3ZWVrTnVtYmVyLCBhY2FkZW1pY1dlZWtOdW1iZXJ9ID0gd2Vla1BsYW47XG4gICAgICAgICAgICAgIGNvbnN0IHdlZWsgPSB3ZWVrTnVtYmVyO1xuICAgICAgICAgICAgICBjb25zdCBpc0N1cnJlbnRXZWVrID0gdGhpcy5zdGF0ZS5zY2hvb2xUZXJtLmlzQ3VycmVudFdlZWsod2Vla1BsYW4uZGF0ZVRpbWUpO1xuICAgICAgICAgICAgICByZXR1cm4gPHRyIGtleT17bW9kZWwueWVhciArICc6JyArIHdlZWt9IGNsYXNzTmFtZT17aXNDdXJyZW50V2VlayA/IFwiY3VycmVudFdlZWtcIiA6IFwiXCJ9PlxuICAgICAgICAgICAgICA8dGQ+e2ludGwubG9jYWxlID09PSBcInN2XCIgPyB3ZWVrIDogYWNhZGVtaWNXZWVrTnVtYmVyfTwvdGQ+XG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb2x1bW5zLm1hcCgoZWxlbSwgY29sSW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbFR5cGUgPSB0aGlzLmdldENvbHVtblR5cGUoZWxlbS5uYW1lKTtcbiAgICAgICAgICAgICAgICAgIHZhciB0dXRvclZhbHVlID0gdGhpcy5nZXRXZWVrVHV0b3JOb3RlKG1vZGVsLndlZWtQbGFuc09yVHV0b3JOb3RlLCB3ZWVrTnVtYmVyKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBjb2xUeXBlID09PSBcIlR1dG9yXCIgPyBcbiAgICAgICAgICAgICAgICAgIHR1dG9yVmFsdWUgJiYgc2hvd1R1dG9yQ29tbWVudEZpZWxkICYmIHRoaXMuZ2V0VGFibGVDZWxsKHJvd0luZGV4LCBjb2xJbmRleCwgZWxlbS5uYW1lLCBtb2RlbCwgdHV0b3JWYWx1ZSwgcmVhZE9ubHlDZWxscywgY29sVHlwZSkgOiAgICAgICBcbiAgICAgICAgICAgICAgICAgICB0aGlzLmdldFRhYmxlQ2VsbChyb3dJbmRleCwgY29sSW5kZXgsIGVsZW0ubmFtZSwgbW9kZWwsIHdlZWtQbGFuLCByZWFkT25seUNlbGxzLCBjb2xUeXBlKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIDwvdHI+IFxuICAgICAgICAgICAgfSl9XG5cbiAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICAgIDx0Zm9vdD5cbiAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgPHRoPjxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwidGVybXBsYW5uZXIuZmluYWxTdGVwXCIgZGVmYXVsdE1lc3NhZ2U9XCJTbHV0c3RlZ1wiLz48L3RoPlxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29sdW1ucy5maWx0ZXIoYyA9PiAhYy5pc0ZpeGVkKS5tYXAoKGVsZW0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRGb290ZXJDZWxsKHJvd09mZnNldCArIDEsIGluZGV4LCBlbGVtLm5hbWUsIG1vZGVsLCByZWFkT25seUNlbGxzKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIDx0aD4tPC90aD5cbiAgICAgICAgICAgICAgPHRoPjwvdGg+XG4gICAgICAgICAgICAgIHtzaG93VHV0b3JDb21tZW50RmllbGQgJiYgPHRoPjwvdGg+fSAgICAgICAgICBcbiAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgIDx0aD48Rm9ybWF0dGVkTWVzc2FnZSBpZD1cInRlcm1wbGFubmVyLmVkc0dvYWxHcmFkZXNcIiBkZWZhdWx0TWVzc2FnZT1cIlRlcm1pbnNtw6VsXCIvPjwvdGg+XG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb2x1bW5zLmZpbHRlcihjID0+ICFjLmlzRml4ZWQpLm1hcCgoZWxlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbFR5cGUgPSB0aGlzLmdldENvbHVtblR5cGUoZWxlbS5uYW1lKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIDx0aCBrZXk9e2BncmFkZXNfJHtpbmRleH1gfSBjbGFzc05hbWU9e2Ake2NvbFR5cGV9Rm9vdGVyYH0+e3Rlcm1Hb2Fsc1tlbGVtLm5hbWVdfTwvdGg+O1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgPHRoPi08L3RoPlxuICAgICAgICAgICAgICA8dGg+e3RoaXMuc3RhdGUuZXJyb3IgJiYgPHAgY2xhc3NOYW1lPVwiZXJyb3JcIj57JycrdGhpcy5zdGF0ZS5lcnJvcn08L3A+fTwvdGg+XG4gICAgICAgICAgICAgIHtzaG93VHV0b3JDb21tZW50RmllbGQgJiYgPHRoPjwvdGg+fSAgICAgXG4gICAgICAgICAgICA8L3RyPlxuICAgICAgICAgIDwvdGZvb3Q+XG4gICAgICAgICAgPC90YWJsZT5cbiAgICAgIDwvZGl2PlxuICAgICAgPERpYWxvZ3NcbiAgICAgICAgZGlhbG9ncz17ZGlhbG9nc31cbiAgICAgICAgcG9wRGlhbG9nPXsoKSA9PiB0aGlzLnNldFN0YXRlKHsgZGlhbG9nczogZGlhbG9ncy5zbGljZSgwLCBkaWFsb2dzLmxlbmd0aCAtIDEpIH0pfSAvPiAgICBcbiAgICA8L2Rpdj5cbiAgfVxufVxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgRm9ybWF0dGVkTWVzc2FnZSwgSW5qZWN0ZWRJbnRsIH0gZnJvbSAncmVhY3QtaW50bCc7XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIHdlZWtOdW1iZXI6IG51bWJlcjtcbiAgY29tbWVudDogc3RyaW5nO1xuICBjbG9zZURpYWxvZzogKCk9PiB2b2lkO1xuICB1cGRhdGVEYXRhOiAodmFsdWU6IHN0cmluZyk9PiB2b2lkO1xuICBkZWxldGVOb3RlRGF0YTogKCkgPT4gdm9pZDtcbiAgaW50bD86IEluamVjdGVkSW50bFxufVxuXG5pbnRlcmZhY2UgU3RhdGUge1xuICBjb21tZW50OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBUdXRvckRpYWxvZyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcywgU3RhdGU+IHtcbiAgXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgY29tbWVudDogcHJvcHMuY29tbWVudCA/IHByb3BzLmNvbW1lbnQgOiAnJ1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGRlbGV0ZSgpIHtcbiAgICBjb25zdCB7IGNsb3NlRGlhbG9nfSA9IHRoaXMucHJvcHM7XG4gICAgY2xvc2VEaWFsb2coKTtcbiAgICB0aGlzLnByb3BzLmRlbGV0ZU5vdGVEYXRhKCk7XG4gIH1cblxuXG4gIGFzeW5jIHNhdmUoKSB7XG4gICAgY29uc3QgeyBjbG9zZURpYWxvZ30gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHsgY29tbWVudCB9ID0gdGhpcy5zdGF0ZTsgIFxuICAgIGNsb3NlRGlhbG9nKCk7XG4gICAgdGhpcy5wcm9wcy51cGRhdGVEYXRhKGNvbW1lbnQpO1xuXG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyB3ZWVrTnVtYmVyLCBpbnRsfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgeyBjb21tZW50IH0gPSB0aGlzLnN0YXRlO1xuXG4gICAgcmV0dXJuIDxkaXY+XG4gICAgICA8ZGl2PlxuICAgICAgICA8aDI+e2ludGw/IGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6XCJ0dXRvck5vdGVEaWFsb2cud2Vla0NvbW1lbnRcIiwgZGVmYXVsdE1lc3NhZ2U6XCJLb21tZW50YXIgZsO2ciB2ZWNrYSB7d2Vla051bWJlcn1cIn0sIHt3ZWVrTnVtYmVyfSk6IGBLb21tZW50YXIgZsO2ciB2ZWNrYSAke3dlZWtOdW1iZXJ9YH08L2gyPlxuICAgICAgICA8aHIgLz5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGlnbi10YWJsZVwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZnVsbFdpZHRoXCI+XG4gICAgICAgICAgICA8dGV4dGFyZWEgYXV0b0ZvY3VzIHZhbHVlPXtjb21tZW50fSBvbkNoYW5nZT17ZXYgPT4gdGhpcy5zZXRTdGF0ZSh7Y29tbWVudDogZXYudGFyZ2V0LnZhbHVlfSl9IC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2PlxuICAgICAgICB7XG4gICAgICAgICAgPD5cbiAgICAgICAgICAgIDxidXR0b24gdGFiSW5kZXg9ezF9IGNsYXNzTmFtZT1cImJ0biBidG4tbGFyZ2UgYnRuLWRlZmF1bHRcIiBvbkNsaWNrPXsoKT0+dGhpcy5zYXZlKCl9PntpbnRsID8gaW50bC5mb3JtYXRNZXNzYWdlKHtpZDpcImNvbW1vbi5zYXZlXCIsIGRlZmF1bHRNZXNzYWdlOlwiU3BhcmFcIn0pIDogJ1NwYXJhJ30gPC9idXR0b24+XG4gICAgICAgICAgICB7Y29tbWVudCAmJiA8YSB0YWJJbmRleD17MX0gY2xhc3NOYW1lPVwiYnRuIGJ0bi13YXJuaW5nIGJ0bi1sYXJnZSBwdWxsLXJpZ2h0XCIgb25DbGljaz17KCk9PnRoaXMuZGVsZXRlKCl9PntpbnRsID8gaW50bC5mb3JtYXRNZXNzYWdlKHtpZDpcImNvbW1vbi5yZW1vdmVcIiwgZGVmYXVsdE1lc3NhZ2U6XCJUYSBib3J0XCJ9KTogXCJUYSBib3J0XCIgfTwvYT59XG4gICAgICAgICAgPC8+XG4gICAgICAgIH1cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICB9XG59XG4iLCJpbXBvcnQgeyBLU1Rlcm1QbGFubmVyV2Vla1BsYW4sIFRlcm1QbGFubmVyVHV0b3JOb3RlLCBUZXJtcGxhbm5lcldlZWtPclR1dG9yIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xuaW1wb3J0IHsgRURTQ291cnNlIH0gZnJvbSAnLi4vLi4vY29udHJhY3RzL2Vkcyc7XG5pbXBvcnQge1xuICBnZXRDb2x1bW5zSGVhZGVyLFxuICBnZXRDb2x1bW5IZWFkZXJGcm9tQ291cnNlLFxufSBmcm9tICcuL3Rlcm1wbGFubmVyLXV0aWxzJztcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcbmltcG9ydCB7IGNyZWF0ZVVVSUQgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XG5pbXBvcnQgeyBLRURXZWVrIH0gZnJvbSAnLi4vLi4vdXRpbHMvd2Vla3V0aWwnO1xuaW1wb3J0IHtJbmplY3RlZEludGx9IGZyb20gJ3JlYWN0LWludGwnO1xuaW1wb3J0IHsgR2VuZXJpY1NjaG9vbFRlcm0gfSBmcm9tICcuLi8uLi91dGlscy9nZW5lcmljLXNjaG9vbC10ZXJtJztcbmltcG9ydCB7IGdldFNjaG9vbFRyYW5zbGF0ZWRTdWJqZWN0cyB9IGZyb20gJy4uLy4uL3V0aWxzL2dlbmVyaWMtc2Nob29sLXV0aWxzJztcblxuaW50ZXJmYWNlIENvbHVtbiB7XG4gIG5hbWU6IHN0cmluZztcbiAgdHJhbnNsYXRlZE5hbWU/OiBzdHJpbmc7XG4gIGlzRml4ZWQ/OiBib29sZWFuO1xufVxuXG5leHBvcnQgY2xhc3MgVmlld01vZGVsIHtcbiAgd2Vla1BsYW5zT3JUdXRvck5vdGU6IFRlcm1wbGFubmVyV2Vla09yVHV0b3JbXTtcbiAgLy93ZWVrVHV0b3JOb3RlczogVGVybVBsYW5uZXJUdXRvck5vdGVbXTtcbiAgbGFzdFN0ZXBzOiBLU1Rlcm1QbGFubmVyV2Vla1BsYW47XG4gIGNvbXBsZXRlZFN0ZXBzOiB7IFtjb2x1bW5IZWFkZXJBbmRzdGVwOiBzdHJpbmddOiB0cnVlIH07XG4gIHRlcm1Hb2FsczogeyBbY29sdW1uSGVhZGVyOiBzdHJpbmddOiBzdHJpbmcgfTtcbiAgeWVhcjogbnVtYmVyO1xuICBzdWJqZWN0UHJvZ3Jlc3M6IHtbY29sdW1uSGVhZGVyOiBzdHJpbmddOiB7ZmluYWxTdGVwQ29tcGxldGVkOiBib29sZWFuLCB2YWx1ZTogbnVtYmVyfX0gPSB7fTtcbiAgY29sdW1uczogQ29sdW1uW10gPSBbXTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBkYldlZWtQbGFuczogVGVybXBsYW5uZXJXZWVrT3JUdXRvcltdLFxuICAgIC8vZGJUdXRvck5vdGVzOiBUZXJtUGxhbm5lclR1dG9yTm90ZVtdLFxuICAgIGNvdXJzZXM6IEVEU0NvdXJzZVtdLFxuICAgIGN1cnJlbnRTY2hvb2xUZXJtOiBHZW5lcmljU2Nob29sVGVybSxcbiAgICBjdXJyZW50U2Nob29sTG9jYWxlOiBzdHJpbmcsXG4gICAgaW50bDogSW5qZWN0ZWRJbnRsLFxuICAgIHNob3dUdXRvckNvbW1lbnRGaWVsZDogYm9vbGVhblxuICApIHtcbiAgICB0aGlzLndlZWtQbGFuc09yVHV0b3JOb3RlID0gW107XG4gICAgaWYgKGN1cnJlbnRTY2hvb2xUZXJtLnNjaG9vbE1vbWVudCkge1xuICAgICAgY29uc3QgW3Rlcm1TdGFydCwgdGVybUVuZF0gPSBjdXJyZW50U2Nob29sVGVybS5nZXRUZXJtU3RhcnRBbmRFbmQoKTtcbiAgICAgIHRoaXMueWVhciA9IHRlcm1TdGFydC55ZWFyKCk7XG4gICAgICAvL2luaXQgY29sdW1uc1xuICAgICAgdmFyIGNvbHVtbkhlYWRlcnMgPSBnZXRDb2x1bW5zSGVhZGVyKGN1cnJlbnRTY2hvb2xMb2NhbGUpO1xuICAgICAgY29sdW1uSGVhZGVycy5mb3JFYWNoKGMgPT4gdGhpcy5jb2x1bW5zLnB1c2goeyBuYW1lOiBjIH0pKTtcbiAgICAgIC8vZGVmaW5lIGZpeGVkIGNvbHVtbnMgLSB3ZSBrZWVwIHRoZXNlIHNlcGFyYXRlZCwgaW4gY2FzZSB0aGF0IHRoZSBvdGhlciBjb2x1bW5zIHdpbGwgYmUgZHluYW1pY2FsbHkgcmV0cmlldmVkXG4gICAgICBjb25zdCBmaXhlZENvbHVtbnMgPSBbeyBuYW1lOiBcIkt1cnNcIiwgaXNGaXhlZDogdHJ1ZSB9LCB7IG5hbWU6IFwiS29tbWVudGFyXCIsIGlzRml4ZWQ6IHRydWUgfV07XG4gICAgICBpZihzaG93VHV0b3JDb21tZW50RmllbGQpe1xuICAgICAgICBmaXhlZENvbHVtbnMucHVzaCggeyBuYW1lOiBcIlR1dG9yQ29tbWVudFwiLCBpc0ZpeGVkOiB0cnVlfSk7XG4gICAgICB9XG4gICAgICAvL0FkZCBmaXhlZCBjb2x1bW5zIG5hbWVzXG4gICAgICB0aGlzLmNvbHVtbnMucHVzaCguLi5maXhlZENvbHVtbnMpO1xuICAgICAgLy9wb3B1bGF0ZSB0cmFuc2xhdGlvbnNcbiAgICAgIHZhciB0cmFuc2xhdGVkQ29sdW1ucyA9IGdldFNjaG9vbFRyYW5zbGF0ZWRTdWJqZWN0cyhjdXJyZW50U2Nob29sTG9jYWxlLCBpbnRsKTtcbiAgICAgIHRoaXMuY29sdW1ucy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgICBlbGVtZW50LnRyYW5zbGF0ZWROYW1lID0gdHJhbnNsYXRlZENvbHVtbnNbZWxlbWVudC5uYW1lXTtcbiAgICAgIH0pO1xuXG4gICAgICB2YXIgY3VycmVudFRlcm1Ib2xpZGF5cyA9IGN1cnJlbnRTY2hvb2xUZXJtLnNjaG9vbE1vbWVudC5hY2FkZW1pY1llYXJTdHJ1Y3R1cmUuaG9saWRheXM7XG4gICAgICBjb25zdCBjdXJyZW50VGVybSA9IGN1cnJlbnRTY2hvb2xUZXJtLnNjaG9vbE1vbWVudC50ZXJtO1xuICAgICAgLy9cbiAgICAgIC8vIHdlZWtQbGFuc1xuICAgICAgLy9cbiAgICAgbGV0IHdlZWtwbGFuVmFsdWVzOiBLU1Rlcm1QbGFubmVyV2Vla1BsYW5bXSA9IGRiV2Vla1BsYW5zLmZpbHRlcigoeDogS1NUZXJtUGxhbm5lcldlZWtQbGFuKSA9PiAheC50eXBlKSBhcyBLU1Rlcm1QbGFubmVyV2Vla1BsYW5bXTtcbiAgICAgbGV0IHR1dG9yVmFsdWVzIDogVGVybVBsYW5uZXJUdXRvck5vdGVbXSA9IGRiV2Vla1BsYW5zLmZpbHRlcigodzogVGVybVBsYW5uZXJUdXRvck5vdGUpID0+IHcudHlwZSA9PT0gJ3R1dG9yLW5vdGUnKSBhcyBUZXJtUGxhbm5lclR1dG9yTm90ZVtdO1xuXG4gICAgICB2YXIgc3RhcnRBY2FkZW1pY1llYXJOdW1iZXIgPSBjdXJyZW50U2Nob29sVGVybS5zY2hvb2xNb21lbnQuYWNhZGVtaWNZZWFyU3RydWN0dXJlLmFjYWRlbWljU3RhcnRXZWVrO1xuICAgICAgZm9yIChsZXQgd2Vla01vbWVudCA9IHRlcm1TdGFydC5jbG9uZSgpO1xuICAgICAgICB3ZWVrTW9tZW50LnZhbHVlT2YoKSA8IHRlcm1FbmQudmFsdWVPZigpO1xuICAgICAgICB3ZWVrTW9tZW50ID0gd2Vla01vbWVudC5jbG9uZSgpLmFkZCgxLCAnd2VlaycpLnN0YXJ0T2YoJ3dlZWsnKSkge1xuXG4gICAgICAgIHZhciBob2xpZGF5UGVyaW9kID0gY3VycmVudFRlcm1Ib2xpZGF5cy5maWx0ZXIoaD0+IHdlZWtNb21lbnQud2VlaygpID49IG1vbWVudChoLnN0YXJ0RGF0ZSkuc3RhcnRPZihcIndlZWtcIikud2VlaygpICYmIFxuICAgICAgICB3ZWVrTW9tZW50LndlZWsoKSA8PSBtb21lbnQoaC5lbmREYXRlKS5lbmRPZignd2VlaycpLndlZWsoKSk7XG4gICAgICAgIC8vaWYgdGhlIGN1cnJlbnQgd2VlayBpcyBhIGhvbGlkYXkgd2Vlaywgc2tpcCBpdFxuICAgICAgICBpZihob2xpZGF5UGVyaW9kLmxlbmd0aCA+IDApe1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHdlZWtOdW1iZXIgPSB3ZWVrTW9tZW50LndlZWsoKTtcbiAgICAgICAgY29uc3Qga2VkV2VlayA9IEtFRFdlZWsod2Vla01vbWVudC55ZWFyKCksIHdlZWtOdW1iZXIpO1xuICAgICAgICAvL0EgdGVybSBjYW4gZW5kIGFuZCBzdGFydCBvbiB0aGUgc2FtZSB3ZWVrIGZvciBJbmRpYVxuICAgICAgICAvL2luIHRoaXMgY2FzZSB3ZSBzaG91bGQgZmlsdGVyIHRoZW0gYnkgdGhlIHRlcm1cbiAgICAgICAgLy9UaGlzIGlzIG5vdCB0aGUgY2FzZSBmb3Igc3YgbG9jYWxlIGFuZCB3ZSB3YW50IHRvIHNraXAgdGhpcyBjaGVjayBcbiAgICAgICAgLy9iZWNhdXNlIGRhdGEgaXMgYWxyZWFkeSBzYXZlZCBpbiB0aGUgZGF0YWJhc2VcbiAgICAgICAgY29uc3Qgd2Vla1BsYW4gPSB3ZWVrcGxhblZhbHVlcy5maWx0ZXIod3AgPT5cbiAgICAgICAgICB3cC5kYXRlVGltZSA+PSBrZWRXZWVrLm5vdEJlZm9yZSAmJlxuICAgICAgICAgIHdwLmRhdGVUaW1lIDw9IGtlZFdlZWsubm90QWZ0ZXIgJiZcbiAgICAgICAgICAoIXdwLmlzRmluYWxTdGVwICYmXG4gICAgICAgICAgd3AudGVybSA9PT0gY3VycmVudFRlcm0gfHwgaW50bC5sb2NhbGUgPT09IFwic3ZcIikpWzBdO1xuXG4gICAgICAgIGNvbnN0IHR1dG9yTm90ZSA9IHR1dG9yVmFsdWVzLmZpbHRlcih3cCA9PiBcbiAgICAgICAgICB3cC5kYXRlVGltZSA+PSBrZWRXZWVrLm5vdEJlZm9yZSAmJlxuICAgICAgICAgIHdwLmRhdGVUaW1lIDw9IGtlZFdlZWsubm90QWZ0ZXIgJiZcbiAgICAgICAgICAod3AudGVybSA9PT0gY3VycmVudFRlcm0gfHwgaW50bC5sb2NhbGUgPT09IFwic3ZcIikpWzBdO1xuXG4gICAgICAgIHRoaXMud2Vla1BsYW5zT3JUdXRvck5vdGUucHVzaCh7XG4gICAgICAgICAgLi4ud2Vla1BsYW4gfHwge30sXG4gICAgICAgICAgaWQ6IHdlZWtQbGFuID8gd2Vla1BsYW4uaWQgOiBjcmVhdGVVVUlEKCksXG4gICAgICAgICAgZGF0ZVRpbWU6IHdlZWtQbGFuID8gd2Vla1BsYW4uZGF0ZVRpbWUgOiB3ZWVrTW9tZW50LnZhbHVlT2YoKSxcbiAgICAgICAgICBjZWxsVmFsdWVzOiB3ZWVrUGxhbiA/IHdlZWtQbGFuLmNlbGxWYWx1ZXMgOiB7fSxcbiAgICAgICAgICB3ZWVrTnVtYmVyLFxuICAgICAgICAgIGFjYWRlbWljV2Vla051bWJlcjogc3RhcnRBY2FkZW1pY1llYXJOdW1iZXIrKyxcbiAgICAgICAgICB0ZXJtOiBjdXJyZW50VGVybVxuICAgICAgICB9IGFzIEtTVGVybVBsYW5uZXJXZWVrUGxhbik7XG5cbiAgICAgICAgdGhpcy53ZWVrUGxhbnNPclR1dG9yTm90ZS5wdXNoKHtcbiAgICAgICAgICAuLi50dXRvck5vdGUgfHwge30sXG4gICAgICAgICAgaWQ6IHR1dG9yTm90ZSA/IHR1dG9yTm90ZS5pZCA6IGNyZWF0ZVVVSUQoKSxcbiAgICAgICAgICB0eXBlOiAndHV0b3Itbm90ZScsXG4gICAgICAgICAgZGF0ZVRpbWU6IHR1dG9yTm90ZSA/IHR1dG9yTm90ZS5kYXRlVGltZSA6IHdlZWtNb21lbnQudmFsdWVPZigpLFxuICAgICAgICAgIGNvbnRlbnQ6IHR1dG9yTm90ZSA/IHR1dG9yTm90ZS5jb250ZW50IDogJycsXG4gICAgICAgICAgd2Vla051bWJlcixcbiAgICAgICAgICB0ZXJtOiBjdXJyZW50VGVybSAgXG4gICAgICAgIH0gYXMgVGVybVBsYW5uZXJUdXRvck5vdGUpO1xuICAgICAgfVxuXG4gICAgICAvL1xuICAgICAgLy8gbGFzdFN0ZXBzXG4gICAgICAvL1xuICAgICAgY29uc3QgbGFzdFN0ZXBXZWVrID0gY3VycmVudFNjaG9vbFRlcm0uZ2V0TGFzdFN0ZXBXZWVrKGludGwubG9jYWxlKTtcbiAgICAgIGNvbnN0IGxhc3RTdGVwS2VkV2VlayA9IEtFRFdlZWsodGVybUVuZC55ZWFyKCksIGxhc3RTdGVwV2Vlayk7XG4gICAgICB0aGlzLmxhc3RTdGVwcyA9IHdlZWtwbGFuVmFsdWVzLmZpbHRlcih3cCA9PlxuICAgICAgICB3cC5kYXRlVGltZSA+PSBsYXN0U3RlcEtlZFdlZWsubm90QmVmb3JlICYmXG4gICAgICAgIHdwLmRhdGVUaW1lIDw9IGxhc3RTdGVwS2VkV2Vlay5ub3RBZnRlciAmJiBcbiAgICAgICAgKHdwLmlzRmluYWxTdGVwICYmXG4gICAgICAgIHdwLnRlcm0gPT09IGN1cnJlbnRUZXJtIHx8IGludGwubG9jYWxlID09PSBcInN2XCIpKVswXSB8fCB7XG4gICAgICAgICAgaWQ6IGNyZWF0ZVVVSUQoKSxcbiAgICAgICAgICBkYXRlVGltZTogbW9tZW50KHRlcm1FbmQpLmNsb25lKCkud2VlayhsYXN0U3RlcFdlZWspLnN0YXJ0T2YoJ3dlZWsnKS52YWx1ZU9mKCksXG4gICAgICAgICAgY2VsbFZhbHVlczoge30sXG4gICAgICAgICAgd2Vla051bWJlcjogbGFzdFN0ZXBXZWVrLFxuICAgICAgICAgIHRlcm06IGN1cnJlbnRUZXJtLFxuICAgICAgICAgIGlzRmluYWxTdGVwOiB0cnVlXG4gICAgICAgIH07XG5cblxuICAgICAgdGhpcy5jb21wbGV0ZWRTdGVwcyA9IHt9O1xuICAgICAgdGhpcy50ZXJtR29hbHMgPSB7fTtcbiAgICAgIHZhciBtYXhTdWJqZWN0U3RlcCA9IHt9O1xuICAgICAgZm9yIChjb25zdCBjb3Vyc2Ugb2YgY291cnNlcykge1xuICAgICAgICBjb25zdCBjb2x1bW5IZWFkZXIgPSBnZXRDb2x1bW5IZWFkZXJGcm9tQ291cnNlKGNvdXJzZSk7XG4gICAgICAgIC8vXG4gICAgICAgIC8vIGNvbXBsZXRlZFN0ZXBzXG4gICAgICAgIC8vXG4gICAgICAgIGZvciAoY29uc3Qgc3RlcCBvZiBjb3Vyc2UuY291cnNlU3RlcHMpIHtcbiAgICAgICAgICBpZiAoc3RlcC5pc0NvbXBsZXRlZCkge1xuICAgICAgICAgICAgdGhpcy5jb21wbGV0ZWRTdGVwc1tjb2x1bW5IZWFkZXIgKyBzdGVwLnNob3J0TmFtZV0gPSB0cnVlO1xuXG4gICAgICAgICAgICAvL3NldCB0aGUgbWF4aW11bSB2YWx1ZSBvZiB0aGUgY29tcGxldGVkIHN0ZXAgZm9yIGVhY2ggc3ViamVjdFxuICAgICAgICAgICAgdmFyIGN1cnJlbnRTdGVwVmFsdWUgPSBwYXJzZUludChzdGVwLnNob3J0TmFtZSk7XG4gICAgICAgICAgICBpZiAoIWlzTmFOKGN1cnJlbnRTdGVwVmFsdWUpICYmIGN1cnJlbnRTdGVwVmFsdWUgPiAobWF4U3ViamVjdFN0ZXBbY29sdW1uSGVhZGVyXSA/IG1heFN1YmplY3RTdGVwW2NvbHVtbkhlYWRlcl0gOiAwKSkge1xuICAgICAgICAgICAgICBtYXhTdWJqZWN0U3RlcFtjb2x1bW5IZWFkZXJdID0gY3VycmVudFN0ZXBWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLypjb25zdCB3ZWVrUGxhbnMgPSBmaW5kV2Vla1BsYW5zQnlTdGVwKHRoaXMud2Vla1BsYW5zLCBzdGVwLlNob3J0TmFtZSk7XG4gICAgICAgICAgICB3ZWVrUGxhbnMuZm9yRWFjaCh3ZWVrUGxhbiA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21wbGV0ZWRTdGVwc1t3ZWVrUGxhbi53ZWVrICsgY29sdW1uSGVhZGVyXSA9IHRydWU7XG4gICAgICAgICAgICB9KSovXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vXG4gICAgICAgIC8vIHRlcm1Hb2Fsc1xuICAgICAgICAvL1xuICAgICAgICB0aGlzLnRlcm1Hb2Fsc1tjb2x1bW5IZWFkZXJdID0gY291cnNlLnBlcmlvZEdvYWxHcmFkZTtcbiAgICAgIH1cblxuICAgICAgaWYoY291cnNlcykge1xuICAgICAgICAvL2luaXRcbiAgICAgICAgY29sdW1uSGVhZGVycy5mb3JFYWNoKGVsZW0gPT4ge1xuICAgICAgICAgIHRoaXMuc3ViamVjdFByb2dyZXNzW2VsZW1dID0ge2ZpbmFsU3RlcENvbXBsZXRlZDpmYWxzZSwgdmFsdWU6IDB9O1xuICAgICAgICB9KVxuICAgICAgICAvL2NvbXB1dGUgY2hhcnRzIGJ5IGNvbXB1dGluZyAgY29tcGxldGVkIGdvYWwgKHNhdmVkIGRhdGEgZnJvbSBrZWRiYWNrZW5kIGlzIG5vdCB0YWtlbiBpbnRvIGFjY291bnQpL2xhc3RTdGVwVmFsdWVcbiAgICAgICAgT2JqZWN0LmtleXModGhpcy5sYXN0U3RlcHMuY2VsbFZhbHVlcykuZm9yRWFjaCgodmFsKSA9PiB7XG4gICAgICAgICAgLy9leGNsdWRlIHRoZSBmaXhlZCBjb2x1bW5zLiBDaGFydHMgc2hvdWxkIG5vdCBiZSBkaXNwbGF5ZWQgZm9yIHRob3NlXG4gICAgICAgICAgaWYgKCFmaXhlZENvbHVtbnNbdmFsXSkge1xuICAgICAgICAgIHZhciBoYXNOb0ZpbmFsU3RlcFZhbHVlID0gaXNOYU4ocGFyc2VJbnQodGhpcy5sYXN0U3RlcHMuY2VsbFZhbHVlc1t2YWxdKSkgfHwgIXRoaXMubGFzdFN0ZXBzLmNlbGxWYWx1ZXNbdmFsXTtcbiAgICAgICAgICB2YXIgZmluYWxTdGVwVmFsdWUgPSBoYXNOb0ZpbmFsU3RlcFZhbHVlID8gMCA6IHBhcnNlSW50KHRoaXMubGFzdFN0ZXBzLmNlbGxWYWx1ZXNbdmFsXSk7XG4gICAgICAgICAgdmFyIHBlcmNlblZhbHVlID0gZmluYWxTdGVwVmFsdWUgPiAwID8gbWF4U3ViamVjdFN0ZXBbdmFsXSAqIDEwMCAvIGZpbmFsU3RlcFZhbHVlIDogMDtcbiAgICAgICAgICB0aGlzLnN1YmplY3RQcm9ncmVzc1t2YWxdID0ge2ZpbmFsU3RlcENvbXBsZXRlZDogIWhhc05vRmluYWxTdGVwVmFsdWUsIHZhbHVlOiBwZXJjZW5WYWx1ZX07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZmluZFdlZWtQbGFuc0J5U3RlcCh3ZWVrUGxhbnM6IEtTVGVybVBsYW5uZXJXZWVrUGxhbltdLCBzdGVwOiBzdHJpbmcpOiBLU1Rlcm1QbGFubmVyV2Vla1BsYW5bXSB7XG4gIHJldHVybiB3ZWVrUGxhbnMuZmlsdGVyKHdwID0+IE9iamVjdC5rZXlzKHdwLmNlbGxWYWx1ZXMpLm1hcChjb2x1bW4gPT4gd3AuY2VsbFZhbHVlc1tjb2x1bW5dID09PSBzdGVwKSk7XG59XG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbHMnO1xuaW1wb3J0IHsgRURTQXNzZXNzbWVudCB9IGZyb20gJy4uLy4uL2NvbnRyYWN0cy9lZHMnO1xuaW1wb3J0IGVudiBmcm9tICcuLi8uLi9nbG9iYWxzL0tFRC5lbnYnO1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBsaW1pdD86IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIFN0YXRlIHtcbiAgbG9hZGluZzogYm9vbGVhbixcbiAgYXNzZXNzbWVudHM6IEVEU0Fzc2Vzc21lbnRbXSxcbiAgZXJyb3I6IHN0cmluZyB8IG51bGxcbn1cblxuZXhwb3J0IGNsYXNzIExhdGVzdEFzc2Vzc21lbnRzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLFN0YXRlPiB7XG4gIGNvbnN0cnVjdG9yIChwcm9wczogUHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGFzc2Vzc21lbnRzOiBbXSxcbiAgICAgIGVycm9yOiBudWxsLFxuICAgICAgbG9hZGluZzogZmFsc2VcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgdGhpcy5sb2FkKCk7XG4gIH1cblxuICBhc3luYyBsb2FkKCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe2xvYWRpbmc6IHRydWV9KTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgYXNzZXNzbWVudHMgPSBhd2FpdCBlbnYuZWRzQ2xpZW50LmdldExhdGVzdEFzc2Vzc21lbnRzKHRoaXMucHJvcHMubGltaXQpO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7YXNzZXNzbWVudHN9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7ZXJyb3J9KTtcbiAgICB9XG4gICAgdGhpcy5zZXRTdGF0ZSh7bG9hZGluZzogZmFsc2V9KTsgICAgXG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgaGFzR3JhZGVzID0gdGhpcy5zdGF0ZS5hc3Nlc3NtZW50cy5zb21lKGEgPT4gISFhLmdyYWRlTmFtZSk7XG4gICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwia2VkX2JveGVkXCI+XG4gICAgICA8aDQ+e0xgU2VuYXN0ZSBiZWTDtm1uaW5nYXJgfTwvaDQ+XG4gICAgICA8aHIgLz5cbiAgICAgIDx1bCBjbGFzc05hbWU9XCJsYXRlc3QtYXNzZXNtZW50cyB6ZWJyYVwiPlxuICAgICAge3RoaXMuc3RhdGUuYXNzZXNzbWVudHMubWFwKChhLCBpKSA9PiBcbiAgICAgICAgICAgIDxsaSBrZXk9e2l9PlxuICAgICAgICAgICAgICB7KGhhc0dyYWRlcyAmJiAgYS5ncmFkZU5hbWUgIT0gXCJcIikgJiYgPHNwYW4gY2xhc3NOYW1lPVwiZ3JhZGUgcGlsbCBwdWxsLXJpZ2h0XCI+e2EuZ3JhZGVOYW1lfTwvc3Bhbj59XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImRhdGUgcGlsbCBwdWxsLWxlZnRcIj57YS5wdWJsaXNoRGF0ZVRpbWUuc3Vic3RyKDAsIDEwKX08L3NwYW4+XG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBhLmNvdXJzZU5hbWUgPT0gYS5jb3Vyc2VVbml0TmFtZSA/IFxuICAgICAgICAgICAgICAgICAgPGg1PjxzdHJvbmc+e2EuY291cnNlTmFtZX08L3N0cm9uZz48L2g1PiA6IDxoNT48c3Ryb25nPnthLmNvdXJzZU5hbWV9PC9zdHJvbmc+IC8gPGVtPnthLmNvdXJzZVVuaXROYW1lfTwvZW0+PC9oNT5cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICA8YnIgLz5cbiAgICAgICAgICAgICAgPHA+e2EudGV4dH08L3A+XG4gICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICl9XG4gICAgICA8L3VsPlxuICAgIDwvZGl2PjtcbiAgfVxufVxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgZ2V0TGVhcm5pbmdHb2Fsc0FuZFRhc2tzLCBLZWRMZWFybmluZ0dvYWxzRGF0YSB9IGZyb20gJy4uLy4uL2FwaXMva2VkLWxlYXJuaW5nZ29hbHMnO1xuaW1wb3J0IHsgTGVhcm5pbmdNb2R1bGVUYXNrLCBUYXNrTGlzdCB9IGZyb20gJy4uL2NvdXJzZS12aWV3ZXIvc3ViY29tcG9uZW50cy90YXNrLWxpc3QnO1xuaW1wb3J0IHsgZmxhdHRlbiB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWxzJztcbmltcG9ydCB7IExlYXJuaW5nR29hbCwgTGVhcm5pbmdHb2Fsc0xpc3QgfSBmcm9tICcuLi9jb3Vyc2Utdmlld2VyL3N1YmNvbXBvbmVudHMvbGVhcm5pbmctZ29hbHMtbGlzdCc7XG5pbXBvcnQgeyBzZXR1cEludGwgfSBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvU2V0dXBMYW5ndWFnZUludGwnO1xuaW1wb3J0IHsgaW5qZWN0SW50bCwgSW5qZWN0ZWRJbnRsUHJvcHMgfSBmcm9tICdyZWFjdC1pbnRsJztcbmltcG9ydCB7IExhbmd1YWdlQ29udGV4dCB9IGZyb20gJy4uL3V0aWxpdHktY29tcG9uZW50cy9MYW5ndWFnZUNvbnRleHQnO1xuXG5pbnRlcmZhY2UgUHJvcHMgZXh0ZW5kcyBJbmplY3RlZEludGxQcm9wc3tcbiAgYXBpUGF0aDogc3RyaW5nOyAvLyBcIi80LjU2NjdjNjMxMTVlZDZjMDM3OTBhNGM4Yy8xMi4xZjk1YTY3YTE1ZWUzMWVhMWM0NDQ3YjIuanNvblwiXG4gIHBhZ2VJZDogc3RyaW5nOyAvLyBzdi5QYWdlQ29udGV4dC5wYWdlSWRcbn1cblxuaW50ZXJmYWNlIFN0YXRlIHtcbiAgZGF0YTogS2VkTGVhcm5pbmdHb2Fsc0RhdGEgfCBudWxsXG59XG5cbmNsYXNzIF9MZWFybmluZ1Rhc2tzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLCBTdGF0ZT4ge1xuICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGRhdGE6IG51bGxcbiAgICB9XG4gIH1cblxuICBhc3luYyBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0TGVhcm5pbmdHb2Fsc0FuZFRhc2tzKFxuICAgICAgdGhpcy5wcm9wcy5hcGlQYXRoLFxuICAgICAgdGhpcy5wcm9wcy5wYWdlSWQpO1xuXG4gICAgdGhpcy5zZXRTdGF0ZSh7IGRhdGEgfSk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgaWYgKCF0aGlzLnN0YXRlLmRhdGEpIHJldHVybiA8ZGl2PjwvZGl2PjtcbiAgICBjb25zdCB7IG1vZHVsZU5hbWUsIHN1YmplY3QsIGNvbW1vblRhc2tzLCBsZWFybmluZ0dvYWxzLCBzdGVwIH0gPSB0aGlzLnN0YXRlLmRhdGE7XG4gICAgY29uc3Qge2ludGx9ID0gdGhpcy5wcm9wcztcbiAgICAvL2NvbnN0IHN0ZXAgPSB1bmRlZmluZWQ7IC8vIG1vZHVsZU5hbWUudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKFwic3RlZyBcIikgJiYgcGFyc2VJbnQobW9kdWxlTmFtZS5zdWJzdHIoNSkpO1xuICAgIGNvbnN0IGNvbW1vblRhc2tzTGlzdDogTGVhcm5pbmdNb2R1bGVUYXNrW10gPVxuICAgICAgY29tbW9uVGFza3MubWFwKHRhc2sgPT4gKHtcbiAgICAgICAgaWQ6IHRhc2suaWQsXG4gICAgICAgIG5hbWU6IHRhc2submFtZSxcbiAgICAgICAgdXJsOiB0YXNrLnVybCxcbiAgICAgICAgY291cnNlTmFtZTogc3ViamVjdC5uYW1lLFxuICAgICAgICBsZWFybmluZ0dvYWw6IHN0ZXAgJiYgbGVhcm5pbmdHb2Fscy5sZW5ndGggPiAwID8gYCR7bW9kdWxlTmFtZX0gLSDDtnZlcmdyaXBhbmRlYCA6IG1vZHVsZU5hbWVcbiAgICAgIH0pKTtcbiAgICAgIFxuICAgIGNvbnN0IGxlYXJuaW5nR29hbHNMaXN0OiBMZWFybmluZ0dvYWxbXSA9IGxlYXJuaW5nR29hbHMubWFwKGxlYXJuaW5nR29hbCA9PiAoe1xuICAgICAgbmFtZTogbGVhcm5pbmdHb2FsLm5hbWUsXG4gICAgICBsZWFybmluZ1Rhc2tzOiBsZWFybmluZ0dvYWwudGFza3MubWFwKHRhc2sgPT4gKHtcbiAgICAgICAgaWQ6IHRhc2suaWQsXG4gICAgICAgIG5hbWU6IHRhc2submFtZSxcbiAgICAgICAgdXJsOiB0YXNrLnVybCxcbiAgICAgICAgY291cnNlTmFtZTogc3ViamVjdC5uYW1lLFxuICAgICAgICBsZWFybmluZ0dvYWw6IGxlYXJuaW5nR29hbC5uYW1lXG4gICAgICB9KSlcbiAgICB9KSk7XG5cbiAgICBpZiAoc3RlcCkge1xuICAgICAgY29tbW9uVGFza3NMaXN0LmZvckVhY2godGFzayA9PiB0YXNrLnN0ZXAgPSBzdGVwKTtcbiAgICAgIGxlYXJuaW5nR29hbHNMaXN0LmZvckVhY2gobGcgPT4gbGcubGVhcm5pbmdUYXNrcy5mb3JFYWNoKHRhc2sgPT4gdGFzay5zdGVwID0gc3RlcCkpO1xuICAgIH1cblxuICAgIHJldHVybiA8TGFuZ3VhZ2VDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXt7IGludGwgfX0+XG4gICAgICA8TGVhcm5pbmdHb2Fsc0xpc3RcbiAgICAgICAgY29tbW9uVGFza3M9e2NvbW1vblRhc2tzTGlzdH1cbiAgICAgICAgbGVhcm5pbmdHb2Fscz17bGVhcm5pbmdHb2Fsc0xpc3R9IC8+XG4gICAgPC9MYW5ndWFnZUNvbnRleHQuUHJvdmlkZXI+XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IExlYXJuaW5nVGFza3MgPSBzZXR1cEludGwoaW5qZWN0SW50bChfTGVhcm5pbmdUYXNrcykpO1xuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgQ291cnNlLCBTY2hvb2wsIFVzZXJIaWRkZW5Db3Vyc2UgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XG5pbXBvcnQgY2ZnIGZyb20gJy4uLy4uL2dsb2JhbHMvS0VELmNmZyc7XG5pbXBvcnQgeyBzaG93RXJyb3IsIGZsYXR0ZW4sIGNvbXBhcmVQcm9wLCBzaG93SW5mbywgTCB9IGZyb20gXCIuLi8uLi91dGlscy91dGlsc1wiO1xuaW1wb3J0IHsgY3JlYXRlVVVJRCB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcbmltcG9ydCB7IFNwaW5uZXIgfSBmcm9tIFwiLi4vY291cnNlLWJ1aWxkZXIvc3ViLWNvbXBvbmVudHMvc3Bpbm5lclwiO1xuaW1wb3J0IHsgcGFyc2VRdWVyeVN0cmluZywgZ2VuZXJhdGVRdWVyeVN0cmluZyB9IGZyb20gXCIuLi8uLi91dGlscy9xdWVyeS1zdHJpbmdcIjtcbmltcG9ydCB7IHByZXNlcnZlSW1wZXJzb25hdGlvblF1ZXJ5IH0gZnJvbSAnLi4vLi4vYWNjZXNzLWNvbnRyb2wvaW5kZXgnO1xuaW1wb3J0IHsgaGlkZGVuQ291cnNlc1JlcG8sIENvdXJzZVdpdGhIaWRkZW5TdGF0ZSB9IGZyb20gJy4uLy4uL3JlcG9zL2hpZGRlbi1jb3Vyc2VzLXJlcG8nO1xuXG5pbnRlcmZhY2UgUHJvcHMge1xufVxuXG5pbnRlcmZhY2UgU3RhdGUge1xuICBpc0xvYWRpbmc6IGJvb2xlYW5cbiAgY291cnNlczogQ291cnNlV2l0aEhpZGRlblN0YXRlW11cbiAgaGVhZGVyT3BlbjogYm9vbGVhblxufVxuXG5leHBvcnQgY2xhc3MgTGlzdENvdXJzZXMgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsU3RhdGU+IHtcbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBpc0xvYWRpbmc6IHRydWUsXG4gICAgICBjb3Vyc2VzOiBbXSxcbiAgICAgIGhlYWRlck9wZW46IGZhbHNlXG4gICAgfTtcbiAgICB0aGlzLnVwZGF0ZUhpZGRlbkNvdXJzZXMgPSB0aGlzLnVwZGF0ZUhpZGRlbkNvdXJzZXMuYmluZCh0aGlzKTtcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcbiAgICBoaWRkZW5Db3Vyc2VzUmVwby5zdWJzY3JpYmUodGhpcy51cGRhdGVIaWRkZW5Db3Vyc2VzLCB7ZnVsbENvdXJzZTogdHJ1ZX0pO1xuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgaGlkZGVuQ291cnNlc1JlcG8udW5zdWJzY3JpYmUodGhpcy51cGRhdGVIaWRkZW5Db3Vyc2VzKTtcbiAgfVxuXG4gIHVwZGF0ZUhpZGRlbkNvdXJzZXMoY291cnNlczogQ291cnNlV2l0aEhpZGRlblN0YXRlW10pIHtcbiAgICB0aGlzLnNldFN0YXRlKHtjb3Vyc2VzLCBpc0xvYWRpbmc6IGZhbHNlfSk7XG4gIH1cblxuICBhc3luYyBoaWRlQ291cnNlKGNvdXJzZTogQ291cnNlV2l0aEhpZGRlblN0YXRlKSB7XG4gICAgc2hvd0luZm8oTGBTcGFyYXIuLi5gKTtcbiAgICBhd2FpdCBoaWRkZW5Db3Vyc2VzUmVwby5oaWRlQ291cnNlKGNvdXJzZSk7XG4gICAgc2hvd0luZm8oXCJcIik7XG4gIH1cblxuICBhc3luYyBzaG93Q291cnNlKGNvdXJzZTogQ291cnNlV2l0aEhpZGRlblN0YXRlKSB7XG4gICAgc2hvd0luZm8oTGBTcGFyYXIuLi5gKTtcbiAgICBhd2FpdCBoaWRkZW5Db3Vyc2VzUmVwby5zaG93Q291cnNlKGNvdXJzZSk7XG4gICAgc2hvd0luZm8oXCJcIik7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUuaXNMb2FkaW5nKSByZXR1cm4gPFNwaW5uZXIgLz47XG4gICAgY29uc3Qge2NvdXJzZXN9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCB2aXNpYmxlQ291cnNlcyA9IGNvdXJzZXMuZmlsdGVyKGNvdXJzZSA9PiBjb3Vyc2UudmlzaWJsZSk7XG4gICAgY29uc3QgaGlkZGVuQ291cnNlcyA9IGNvdXJzZXMuZmlsdGVyKGNvdXJzZSA9PiAhY291cnNlLnZpc2libGUpO1xuICAgIGNvbnN0IHF1ZXJ5ID0gcGFyc2VRdWVyeVN0cmluZyhsb2NhdGlvbi5zZWFyY2gpO1xuICAgIGNvbnN0IHZpZXdDb3Vyc2VVcmwgPSBjZmcuS0VEX0NPVVJTRV9WSUVXRVJfVVJMO1xuXG4gICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwia2VkX2JveGVkXCI+XG4gICAgICA8aDM+U2tvbGFucyBrdXJzZXI8L2gzPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YXNrQ29udGFpbmVyIG9kZC1ldmVuXCI+XG4gICAgICAgIHt2aXNpYmxlQ291cnNlcy5tYXAoY291cnNlID0+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdHVkZW50Q291cnNlXCIga2V5PXtjb3Vyc2UuaWR9PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wIHB1bGwtcmlnaHRcIj5cbiAgICAgICAgICAgICAgICA8YSBjbGFzc05hbWU9XCJoaWRlSXRlbVwiIG9uQ2xpY2s9eygpID0+IHRoaXMuaGlkZUNvdXJzZShjb3Vyc2UpfSAvPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cbiAgICAgICAgICAgICAgICA8YSBocmVmPXtwcmVzZXJ2ZUltcGVyc29uYXRpb25RdWVyeSh2aWV3Q291cnNlVXJsLCB7Y291cnNlSWQ6IGNvdXJzZS5pZH0pfT57Y291cnNlLm5hbWV9PC9hPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwic21hbGxcIj57Y291cnNlLmRlc2NyaXB0aW9ufTwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2Pil9XG4gICAgICA8L2Rpdj5cblxuICAgICAgPGRpdiBjbGFzc05hbWU9e1wib3BlbkNsb3NlXCIgKyAodGhpcy5zdGF0ZS5oZWFkZXJPcGVuID8gXCIgb3BlblwiIDogXCJcIil9PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm9wZW5IZWFkZXJcIiBvbkNsaWNrPXsoKSA9PiB0aGlzLnNldFN0YXRlKHsgaGVhZGVyT3BlbjogIXRoaXMuc3RhdGUuaGVhZGVyT3BlbiB9KX0+XG4gICAgICAgICAgPGg1PkRvbGRhIGt1cnNlcjwvaDU+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm9wZW5Db250ZW50XCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YXNrQ29udGFpbmVyIG9kZC1ldmVuXCI+XG4gICAgICAgICAgICB7aGlkZGVuQ291cnNlcy5tYXAoY291cnNlID0+IFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdHVkZW50Q291cnNlXCIga2V5PXtjb3Vyc2UuaWR9PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWxcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcCBwdWxsLXJpZ2h0XCI+XG4gICAgICAgICAgICAgICAgICA8YSBjbGFzc05hbWU9XCJzaG93SXRlbVwiIG9uQ2xpY2s9eygpID0+IHRoaXMuc2hvd0NvdXJzZShjb3Vyc2UpfT48L2E+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGEgaHJlZj17Z2VuZXJhdGVRdWVyeVN0cmluZyh7Li4ucXVlcnksIGNvdXJzZUlkOiBjb3Vyc2UuaWR9KX0+e2NvdXJzZS5uYW1lfTwvYT5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwic21hbGxcIj57Y291cnNlLmRlc2NyaXB0aW9ufTwvcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj4pfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICB9XG59XG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBDb3Vyc2UsIFVzZXJIaWRkZW5Db3Vyc2UsIFNjaG9vbCB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcbmltcG9ydCB7IGhpZGRlbkNvdXJzZXNSZXBvLCBDb3Vyc2VXaXRoSGlkZGVuU3RhdGUgfSBmcm9tICcuLi8uLi9yZXBvcy9oaWRkZW4tY291cnNlcy1yZXBvJztcbmltcG9ydCBlbnYgZnJvbSAnLi4vLi4vZ2xvYmFscy9LRUQuZW52JztcbmltcG9ydCB7IGZsYXR0ZW4sIGNvbXBhcmVQcm9wLCBhcnJheVRvTWFwLCBhcnJheVRvTG9va3VwIH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbHMnO1xuaW1wb3J0IHsgcHJlc2VydmVJbXBlcnNvbmF0aW9uUXVlcnkgfSBmcm9tICcuLi8uLi9hY2Nlc3MtY29udHJvbCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvcHMge1xuICB2aWV3Q291cnNlVXJsOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RhdGUge1xuICBjb3Vyc2VzOiBDb3Vyc2VXaXRoSGlkZGVuU3RhdGVbXTtcbiAgaXNMb2FkaW5nOiBib29sZWFuO1xuICBlcnJvcj86IEVycm9yO1xufVxuXG5leHBvcnQgY2xhc3MgTXlDb3Vyc2VzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLFN0YXRlPiB7XG5cbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGNvdXJzZXM6IFtdLFxuICAgICAgaXNMb2FkaW5nOiB0cnVlXG4gICAgfVxuICAgIHRoaXMudXBkYXRlSGlkZGVuQ291cnNlc1N0YXRlID0gdGhpcy51cGRhdGVIaWRkZW5Db3Vyc2VzU3RhdGUuYmluZCh0aGlzKTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIGhpZGRlbkNvdXJzZXNSZXBvLnN1YnNjcmliZSh0aGlzLnVwZGF0ZUhpZGRlbkNvdXJzZXNTdGF0ZSwge2Z1bGxDb3Vyc2U6IGZhbHNlfSk7XG4gIH1cblxuICB1cGRhdGVIaWRkZW5Db3Vyc2VzU3RhdGUoY291cnNlczogQ291cnNlV2l0aEhpZGRlblN0YXRlW10pIHtcbiAgICB0aGlzLnNldFN0YXRlKHtjb3Vyc2VzLCBpc0xvYWRpbmc6IGZhbHNlfSk7XG4gIH1cblxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIGhpZGRlbkNvdXJzZXNSZXBvLnVuc3Vic2NyaWJlKHRoaXMudXBkYXRlSGlkZGVuQ291cnNlc1N0YXRlKTtcbiAgfVxuXG4gIGdldENvdXJzZVVybChjb3Vyc2VJZDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHByZXNlcnZlSW1wZXJzb25hdGlvblF1ZXJ5KHRoaXMucHJvcHMudmlld0NvdXJzZVVybCwgeyBjb3Vyc2VJZCB9KTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7dmlld0NvdXJzZVVybH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHtpc0xvYWRpbmcsIGVycm9yLCBjb3Vyc2VzIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHZpc2libGVDb3Vyc2VzID0gdGhpcy5zdGF0ZS5jb3Vyc2VzLmZpbHRlcihjID0+IGMudmlzaWJsZSk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPD5cbiAgICAgICAge2lzTG9hZGluZyA/IChcbiAgICAgICAgICA8bGkgY2xhc3NOYW1lPVwibHZsMiBoZWFkZXJcIj5cbiAgICAgICAgICAgIDxhPkxhZGRhci4uLjwvYT5cbiAgICAgICAgICA8L2xpPlxuICAgICAgICApIDogZXJyb3IgPyAoXG4gICAgICAgICAgPGxpIGNsYXNzTmFtZT1cImx2MTJcIj5cbiAgICAgICAgICAgIDxhPkt1bmRlIGludGUgbGFkZGEga3Vyc2VyLjwvYT5cbiAgICAgICAgICA8L2xpPlxuICAgICAgICAgKSA6IChcbiAgICAgICAgICB2aXNpYmxlQ291cnNlcy5tYXAoKHtuYW1lLCBpZH0pID0+IChcbiAgICAgICAgICAgIDxsaSBrZXk9e2lkfSBjbGFzc05hbWU9XCJsdmwyXCI+XG4gICAgICAgICAgICAgIDxhIGhyZWY9e3RoaXMuZ2V0Q291cnNlVXJsKGlkKX0+e25hbWV9PC9hPlxuICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICApXG4gICAgICAgICkpXG4gICAgICAgIH1cblx0XHRcdDwvPlxuICAgICk7XG4gIH1cbn0iLCJpbXBvcnQgZW52IGZyb20gJy4uLy4uL2dsb2JhbHMvS0VELmVudic7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgRURTU3R1ZGVudCB9IGZyb20gJy4uLy4uL2NvbnRyYWN0cy9lZHMnO1xuaW1wb3J0IHsgY29tcGFyZVByb3BzIH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbHMnO1xuaW1wb3J0IHsgU3Bpbm5lciB9IGZyb20gJy4uL2NvdXJzZS1idWlsZGVyL3N1Yi1jb21wb25lbnRzL3NwaW5uZXInO1xuaW1wb3J0IHR1dG9yRW52IGZyb20gJy4uLy4uL2dsb2JhbHMvS0VELnR1dG9yRW52JztcbmltcG9ydCB7cmVxdWVzdFR1dG9yZWRUb2tlbnN9IGZyb20gJy4uLy4uL3V0aWxzL3JlcXVlc3QtdHV0b3JlZC10b2tlbnMnO1xuaW1wb3J0IHsgVXNlciB9IGZyb20gJy4uLy4uL2NvbnRyYWN0cy9rZWQtbW9kZWxzJztcblxuaW50ZXJmYWNlIFN0dWRlbnRJbmZvIHtcbiAgbWFpbDogc3RyaW5nO1xuICBkaXNwbGF5TmFtZTogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgUHJvcHMge1xuXG59XG5cbmludGVyZmFjZSBTdGF0ZSB7XG4gIGlzTG9hZGluZzogYm9vbGVhbjtcbiAgc3R1ZGVudHM6IFN0dWRlbnRJbmZvW107XG59XG5cbmV4cG9ydCBjbGFzcyBUdXRvcnNTZWxlY3QgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsIFN0YXRlPiB7XG5cbiAgY29uc3RydWN0b3IgKHByb3BzOiBQcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgaXNMb2FkaW5nOiB0cnVlLFxuICAgICAgc3R1ZGVudHM6IFtdXG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy5sb2FkKCk7XG4gIH1cblxuICBhc3luYyBsb2FkKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBlZHNTdHVkZW50cyA9IGF3YWl0IGVudi5lZHNDbGllbnQuZ2V0VGVhY2hlclR1dG9yU3R1ZGVudHMoKTtcbiAgICAgIGVkc1N0dWRlbnRzLnNvcnQoY29tcGFyZVByb3BzKFtcImxhc3ROYW1lXCIsIFwiZmlyc3ROYW1lXCJdKSk7XG4gICAgICBjb25zdCBzdHVkZW50cyA9IGVkc1N0dWRlbnRzLmxlbmd0aCA+IDAgP1xuICAgICAgICBlZHNTdHVkZW50cy5tYXAoKHtlbWFpbCwgZmlyc3ROYW1lLCBsYXN0TmFtZX0pPT4oe1xuICAgICAgICAgIG1haWw6IGVtYWlsLFxuICAgICAgICAgIGRpc3BsYXlOYW1lOiBgJHtmaXJzdE5hbWV9ICR7bGFzdE5hbWV9YFxuICAgICAgICB9KSkgOlxuICAgICAgICBbZW52LmN1cnJlbnRVc2VyXTtcbiAgICAgIGF3YWl0IHRoaXMuc2V0U3RhdGUoe3N0dWRlbnRzfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJDb3VsZCBub3QgbGlzdCB0dXRvciBzdHVkZW50c1wiLCBlcnJvcik7XG4gICAgICBhd2FpdCB0aGlzLnNldFN0YXRlKHtzdHVkZW50czogW2Vudi5jdXJyZW50VXNlcl19KVxuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtpc0xvYWRpbmc6IGZhbHNlfSk7XG4gICAgfVxuICB9XG5cbiAgb25TZWxlY3RVc2VyKGVtYWlsOiBzdHJpbmcpIHtcbiAgICBjb25zdCBjaG9vc2VuU3R1ZGVudCA9IHRoaXMuc3RhdGUuc3R1ZGVudHMuZmlsdGVyKHMgPT4gcy5tYWlsID09PSBlbWFpbClbMF07XG4gICAgY29uc3QgdXNlcjogVXNlciA9IHtcbiAgICAgIC4uLmNob29zZW5TdHVkZW50LFxuICAgICAgcm9sZXM6IFtcIlVTRVJcIl0sXG5cbiAgICB9XG4gICAgXG4gICAgdHV0b3JFbnYuc2V0TmV3RW52KHVzZXIsICgpPT5yZXF1ZXN0VHV0b3JlZFRva2VucyhlbWFpbCwgZW1haWwpKVxuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHtpc0xvYWRpbmcsIHN0dWRlbnRzfSA9IHRoaXMuc3RhdGU7XG4gICAgaWYgKGlzTG9hZGluZykgcmV0dXJuIDxTcGlubmVyIC8+O1xuXG4gICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwidHV0b3JzLXNlbGVjdFwiPlxuICAgICAgPHNlbGVjdCBvbkNoYW5nZT17ZXYgPT4gZXYudGFyZ2V0LnZhbHVlICYmIHRoaXMub25TZWxlY3RVc2VyKGV2LnRhcmdldC52YWx1ZSl9PlxuICAgICAgICA8b3B0aW9uIHZhbHVlPVwiXCI+VsOkbGogZWxldjwvb3B0aW9uPlxuICAgICAgICB7c3R1ZGVudHMubWFwKHN0dWRlbnQgPT5cbiAgICAgICAgICA8b3B0aW9uIGtleT17c3R1ZGVudC5tYWlsfSB2YWx1ZT17c3R1ZGVudC5tYWlsfT5cbiAgICAgICAgICAgIHtzdHVkZW50LmRpc3BsYXlOYW1lfSAoe3N0dWRlbnQubWFpbH0pXG4gICAgICAgICAgPC9vcHRpb24+KX1cbiAgICAgIDwvc2VsZWN0PlxuICAgIDwvZGl2PjtcbiAgfVxufVxuIiwiZXhwb3J0IHtUdXRvcnNWaWV3VGVzdH0gZnJvbSAnLi90dXRvcnMtdmlldyc7XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtUdXRvcnNTZWxlY3R9IGZyb20gJy4uL3R1dG9ycy1zZWxlY3QvdHV0b3JzLXNlbGVjdCc7XG5pbXBvcnQge0tTVGVybVBsYW5uZXJ9IGZyb20gJy4uL2tzLXRlcm1wbGFubmVyL3Rlcm1wbGFubmVyJztcbmltcG9ydCB7IEtHVGVybVBsYW5uZXJUdXRvcmVkIH0gZnJvbSAnLi4va2ctdGVybXBsYW5uZXIva2ctdGVybXBsYW5uZXItdHV0b3JlZCc7XG5pbXBvcnQgeyBXZWVrUGxhbm5lclR1dG9yZWQgfSBmcm9tICcuLi93ZWVrcGxhbm5lci93ZWVrcGxhbm5lci10dXRvcmVkJztcbmltcG9ydCB7IENhbGVuZGFyIH0gZnJvbSAnLi4vY2FsZW5kYXInO1xuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xuaW1wb3J0IHsgV2Vla1BsYW5uZXIgfSBmcm9tICcuLi93ZWVrcGxhbm5lcic7XG5pbXBvcnQgeyBUdXRvcmFibGVDb21wb25lbnQgfSBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvdHV0b3JhYmxlLWNvbXBvbmVudCc7XG5cbmludGVyZmFjZSBQcm9wcyB7XG5cbn1cblxuaW50ZXJmYWNlIFN0YXRlIHtcblxufVxuXG5leHBvcnQgY2xhc3MgVHV0b3JzVmlld1Rlc3QgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsIFN0YXRlPiB7XG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gPGRpdj5cbiAgICAgIDxUdXRvcnNTZWxlY3QgLz5cbiAgICAgIDxUdXRvcmFibGVDb21wb25lbnRcbiAgICAgICAgdHV0b3JlZD17dHJ1ZX1cbiAgICAgICAgY3JlYXRlQ29tcG9uZW50PXtlbnYgPT5cbiAgICAgICAgICA8S1NUZXJtUGxhbm5lclxuICAgICAgICAgICAga2V5PXtlbnYuY3VycmVudFVzZXIubWFpbH1cbiAgICAgICAgICAgIGVudj17ZW52fVxuICAgICAgICAgICAgdHV0b3JlZD17dHJ1ZX1cbiAgICAgICAgICAgIGluaXRpYWxEYXRlPXtuZXcgRGF0ZSgpfSAvPlxuICAgICAgICB9XG4gICAgICAvPlxuICAgICAgPEtHVGVybVBsYW5uZXJUdXRvcmVkIC8+XG4gICAgICA8VHV0b3JhYmxlQ29tcG9uZW50XG4gICAgICAgICAgICAgIHR1dG9yZWQ9e3RydWV9XG4gICAgICAgICAgICAgIGNyZWF0ZUNvbXBvbmVudD17ZW52ID0+XG4gICAgICAgICAgICAgICAgPFdlZWtQbGFubmVyXG4gICAgICAgICAgICAgICAgICBrZXk9e2Vudi5jdXJyZW50VXNlci5tYWlsfVxuICAgICAgICAgICAgICAgICAgZW52PXtlbnZ9XG4gICAgICAgICAgICAgICAgICB2aWV3Q291cnNlVXJsPVwiaHR0cHM6Ly93d3cuc3Z0LnNlXCIvPlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAvPlxuICAgICA8VHV0b3JhYmxlQ29tcG9uZW50XG4gICAgICB0dXRvcmVkPXt0cnVlfVxuICAgICAgY3JlYXRlQ29tcG9uZW50PXtlbnYgPT5cbiAgICAgICAgPENhbGVuZGFyXG4gICAgICAgIGVudiA9IHtlbnZ9XG4gICAgICAgIGZpcnN0RGF5ID0ge21vbWVudCgpLnN0YXJ0T2YoJ3dlZWsnKS53ZWVrZGF5KDEpfVxuICAgICAgICBpbml0aWFsU3RhcnRIb3VyPXs3fVxuICAgICAgICBpbml0aWFsRW5kSG91cj17MTh9XG4gICAgICAgIGluaXRpYWxab29tPXswLjc1fVxuICAgICAgICBudW1EYXlzPXs1fVxuICAgICAgICAgLz5cbiAgICAgIH1cbiAgICAvPlxuICAgIDwvZGl2PjtcbiAgfVxufVxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuZXhwb3J0IGNvbnN0IExhbmd1YWdlQ29udGV4dCA9IFJlYWN0LmNyZWF0ZUNvbnRleHQoe2ludGw6IG51bGx9KTsiLCJpbXBvcnQge0ludGxQcm92aWRlciwgYWRkTG9jYWxlRGF0YX0gZnJvbSAncmVhY3QtaW50bCc7XG5pbXBvcnQgbG9jYWxlX2VuIGZyb20gJ3JlYWN0LWludGwvbG9jYWxlLWRhdGEvZW4nO1xuaW1wb3J0IGxvY2FsZV9zdiBmcm9tICdyZWFjdC1pbnRsL2xvY2FsZS1kYXRhL3N2JztcbmltcG9ydCBtZXNzYWdlc19zdiBmcm9tIFwiLi4vLi4vdHJhbnNsYXRpb25zL3N2Lmpzb25cIjtcbmltcG9ydCBtZXNzYWdlc19lbiBmcm9tIFwiLi4vLi4vdHJhbnNsYXRpb25zL2VuLmpzb25cIjtcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjZmcgZnJvbSAnLi4vLi4vZ2xvYmFscy9LRUQuY2ZnJztcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcblxuZXhwb3J0IGNvbnN0IHNldHVwSW50bCA9IDxQIGV4dGVuZHMgb2JqZWN0PihDb21wb25lbnQ6IFJlYWN0LkNvbXBvbmVudFR5cGU8UD4pID0+XG4gICAgY2xhc3MgX1NldHVwTGFuZ3VhZ2VJbnRsIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFA+e1xuICAgICAgICBtZXNzYWdlcyA6IG9iamVjdDtcblxuICAgICAgICBjb25zdHJ1Y3Rvcihwcm9wcyl7XG4gICAgICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgICAgICAgICBhZGRMb2NhbGVEYXRhKFsuLi5sb2NhbGVfZW4sLi4ubG9jYWxlX3N2XSk7XG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VzID0ge1xuICAgICAgICAgICAgJ3N2JzogbWVzc2FnZXNfc3YsXG4gICAgICAgICAgICAnZW4nOiBtZXNzYWdlc19lblxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIG1vbWVudCgpLmxvY2FsZShjZmcuS0VEX0xPQ0FMRSk7XG4gICAgICAgIH1cblxuICAgICAgICByZW5kZXIoKXtcbiAgICAgICAgICAgIHJldHVybiA8SW50bFByb3ZpZGVyIGxvY2FsZT17Y2ZnLktFRF9MT0NBTEV9IG1lc3NhZ2VzPXt0aGlzLm1lc3NhZ2VzW2NmZy5LRURfTE9DQUxFXX0+XG4gICAgICAgICAgICAgICAgPENvbXBvbmVudCB7Li4udGhpcy5wcm9wcyBhcyBQfSAvPlxuICAgICAgICAgICAgPC9JbnRsUHJvdmlkZXI+XG4gICAgICAgIH1cbiAgICB9IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbnRlcmZhY2UgQ0VQcm9wcyB7XG4gICAgdGV4dDogc3RyaW5nOyAvLyBUZXh0IHRvIGJlIHNob3duIGluIGZpZWxkXG4gICAgdGFnPzogJ3RkJyB8ICd0aCcgfCAnZGl2JyB8ICdzcGFuJyB8ICdwJyB8ICdoMScgfCAnaDInIHwgJ2gzJzsgLy8gYWxsb3dkIHRhZ3MgLS0gc2hvdWxkIHdlIGFkZCBtb3JlP1xuICAgIG9uQ2hhbmdlOiAobmV3TmFtZTogc3RyaW5nKSA9PiB2b2lkO1xuICAgIHBsYWNlaG9sZGVyPzogc3RyaW5nOyAvLyBJZiB0ZXh0IGlzIGVtcHR5LCB0aGlzIHdpbGwgYmUgdGhlIHBsYWNlaG9sZGVyXG4gICAgbWF4Q2hhcnM/OiBudW1iZXI7XG4gICAgcmVhZE9ubHk/OiBib29sZWFuO1xuICAgIGNsYXNzTmFtZT86IHN0cmluZztcbiAgICBwbGFjZUhvbGRlcj86IHN0cmluZztcblxuICAgIHZhbGlkYXRlVmFsdWU/OiBSZWdFeHA7XG5cbiAgICAvLyBGb3IgbmF2aWdhdGlvblxuICAgIGFsbG93TmF2aWdhdGlvbj86IGJvb2xlYW47IC8vIHRvIGFjdGl2YXRlIG5hdmlnYXRpb25cbiAgICBvbk5hdmlnYXRlPzogKGRpcmVjdGlvbjogc3RyaW5nKSA9PiB2b2lkO1xufVxuXG5leHBvcnQgY2xhc3MgQ29udGVudEVkaXRhYmxlRmllbGQgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PENFUHJvcHM+IHtcbiAgICBteXNlbGY6IFJlYWN0LlJlZk9iamVjdDxhbnk+O1xuICAgIHByb3BhZ2F0ZWRPbkNoYW5nZTogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IocHJvcHM6IENFUHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICB0aGlzLm15c2VsZiA9IFJlYWN0LmNyZWF0ZVJlZjxIVE1MRWxlbWVudD4oKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHRleHQ6IHByb3BzLnRleHQgfHwgJydcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3Qge3RhZywgdGV4dCwgcmVhZE9ubHl9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgY29uc3QgVGFnVHlwZSA9IHRhZztcbiAgICAgICAgcmV0dXJuIDxUYWdUeXBlXG4gICAgICAgICAgICBjb250ZW50RWRpdGFibGU9eyFyZWFkT25seX1cbiAgICAgICAgICAgIGRhdGEtcGxhY2Vob2xkZXI9e3RoaXMucHJvcHMucGxhY2Vob2xkZXJ9XG4gICAgICAgICAgICByZWY9e3RoaXMubXlzZWxmfVxuICAgICAgICAgICAgY2xhc3NOYW1lPXt0aGlzLnByb3BzLmNsYXNzTmFtZX1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uQ2hhbmdlLmJpbmQodGhpcyl9XG4gICAgICAgICAgICBvbktleURvd249e3RoaXMub25LZXlEb3duLmJpbmQodGhpcyl9XG4gICAgICAgICAgICBvbktleVVwPXt0aGlzLm9uS2V5VXAuYmluZCh0aGlzKX1cbiAgICAgICAgICAgIG9uQmx1cj17dGhpcy5vbkJsdXIuYmluZCh0aGlzKX1cbiAgICAgICAgICAgIG9uUGFzdGU9e3RoaXMub25QYXN0ZS5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3tfX2h0bWw6IHRleHR9fSAvPlxuICAgIH1cblxuICAgIG9uQ2hhbmdlKGU6IEV2ZW50KSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyB0ZXh0OiB0aGlzLm15c2VsZi5jdXJyZW50LmlubmVyVGV4dCB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUYWtlIGFjdGlvbiBkZXBlbmRpbmcgb24ga2V5LWV2ZW50XG4gICAgICogQHBhcmFtIGUgZXZlbnQgZnJvbSBmaWVsZFxuICAgICAqIFxuICAgICAqIElmIGFsbG93TmF2aWdhdGlvbiB0aGVuIGxpc3RlbiB0byBhcnJvdy1rZXlzXG4gICAgICogTGltaXRzIHRvIG1heENoYXJzXG4gICAgICovXG4gICAgb25LZXlEb3duKGU6IEtleWJvYXJkRXZlbnQpIHtcbiAgICAgICAgY29uc3QgdGV4dCA9IHRoaXMubXlzZWxmLmN1cnJlbnQuaW5uZXJUZXh0O1xuICAgICAgICBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICAgICAgICB0aGlzLm15c2VsZi5jdXJyZW50LmlubmVyVGV4dCA9IHRoaXMucHJvcHMudGV4dCB8fCBcIlwiO1xuICAgICAgICAgICAgdGhpcy5teXNlbGYuY3VycmVudC5ibHVyKCk7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB9IGVsc2UgaWYoZS5rZXkgPT09ICdFbnRlcicpe1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy5uYXZpZ2F0ZSh0ZXh0LCAnZG93bicpO1xuICAgICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSAnVGFiJykge1xuICAgICAgICAgICAgdGhpcy5wcm9wYWdhdGVPbkNoYW5nZSh0ZXh0KTtcbiAgICAgICAgfSAgZWxzZSBpZih0ZXh0Lmxlbmd0aCA+PSB0aGlzLnByb3BzLm1heENoYXJzICYmIChcbiAgICAgICAgICAgIC9eW1xcZFxcd1xcc10kLy50ZXN0KGUua2V5KSAmJiAhKGUubWV0YUtleSB8fCBlLmN0cmxLZXkpXG4gICAgICAgICkpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wcm9wcy5hbGxvd05hdmlnYXRpb24gPT09IHRydWUpIHtcbiAgICAgICAgICAgIGNvbnN0IG5hdkRpciA9IGUua2V5LnN0YXJ0c1dpdGgoJ0Fycm93JykgPyBlLmtleS5yZXBsYWNlKCdBcnJvdycsICcnKS50b0xvd2VyQ2FzZSgpIDogZmFsc2U7XG4gICAgICAgICAgICBjb25zdCBjYXJldCA9IGRvY3VtZW50LmdldFNlbGVjdGlvbigpLmdldFJhbmdlQXQoMCkuZW5kT2Zmc2V0OyAvLyBvbmx5IHdvcmtzIGZvciBwbGFpbnRleHRcbiAgICAgICAgICAgIGlmIChuYXZEaXIgJiYgdGV4dC5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGUodGV4dCwgbmF2RGlyKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobmF2RGlyICYmIChuYXZEaXIgPT0gJ3VwJyB8fCBuYXZEaXIgPT0gJ2Rvd24nKSkge1xuICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGUodGV4dCwgbmF2RGlyKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobmF2RGlyICYmIChcbiAgICAgICAgICAgICAgICAobmF2RGlyID09ICdsZWZ0JyAmJiBjYXJldCA9PSAwKSB8fFxuICAgICAgICAgICAgICAgIChuYXZEaXIgPT0gJ3JpZ2h0JyAmJiBjYXJldCA9PSB0ZXh0Lmxlbmd0aClcbiAgICAgICAgICAgICkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRlKHRleHQsIG5hdkRpcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gZSBldmVudCBmcm9tIGZpZWxkXG4gICAgICogU29sZWx5IHVzZWQgdG8gaGFuZGUgdmFsaWRhdGlvbnMtaXNzdWVzXG4gICAgICovXG4gICAgb25LZXlVcChlOiBLZXlib2FyZEV2ZW50KSB7XG4gICAgICAgIGNvbnN0IHRleHQgPSB0aGlzLm15c2VsZi5jdXJyZW50LmlubmVyVGV4dDtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMudmFsaWRhdGVWYWx1ZSAhPT0gdW5kZWZpbmVkICYmICF0aGlzLnByb3BzLnZhbGlkYXRlVmFsdWUudGVzdCh0ZXh0KSkge1xuICAgICAgICAgICAgdGhpcy5teXNlbGYuY3VycmVudC5pbm5lclRleHQgPSB0aGlzLnByb3BzLnRleHQgfHwgXCJcIjtcbiAgICAgICAgICAgIHRoaXMubXlzZWxmLmN1cnJlbnQuYmx1cigpO1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIHZhbHVlIGFuZCBwYXNzIHRvIHBhcmVudHMgbmF2aWdhdGUtZnVuY2l0b25cbiAgICAgKiBAcGFyYW0gdGV4dCBcbiAgICAgKiBAcGFyYW0gZGlyZWN0aW9uIFxuICAgICAqL1xuICAgIG5hdmlnYXRlKHRleHQ6IHN0cmluZywgZGlyZWN0aW9uOiBzdHJpbmcpIHtcbiAgICAgICAgLy8gZmlyc3QgdXBkYXRlIGNlbGxcbiAgICAgICAgdGhpcy5wcm9wYWdhdGVPbkNoYW5nZSh0ZXh0KTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHRleHQ6IHRleHR9ICk7XG4gICAgICAgIC8vIHRoZW4gbmF2aWdhdGUgYXdheVxuICAgICAgICB0aGlzLnByb3BzLm9uTmF2aWdhdGUoZGlyZWN0aW9uKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYWtlIHN1cmUgcGFzdGVkIHRleHQgaXMgcHVyZSB0ZXh0XG4gICAgICogQHBhcmFtIGUgdGhlIHBhc2V0IGV2ZW50XG4gICAgICovXG4gICAgb25QYXN0ZShlOiBDbGlwYm9hcmRFdmVudCkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGNvbnN0IHRleHQgPSAoZS5jbGlwYm9hcmREYXRhICYmIGUuY2xpcGJvYXJkRGF0YS5nZXREYXRhKT8gIGUuY2xpcGJvYXJkRGF0YS5nZXREYXRhKFwidGV4dC9wbGFpblwiKSA6ICcnO1xuICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZChcImluc2VydEhUTUxcIiwgZmFsc2UsIHRleHQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB2YWx1ZSBvbiBleGl0IGZyb20gZmllbGRcbiAgICAgKiBAcGFyYW0gZSBcbiAgICAgKi9cbiAgICBvbkJsdXIoZTogRXZlbnQpIHtcbiAgICAgICAgY29uc3QgdGV4dCA9IHRoaXMubXlzZWxmLmN1cnJlbnQuaW5uZXJUZXh0O1xuICAgICAgICB0aGlzLnByb3BhZ2F0ZU9uQ2hhbmdlKHRleHQpO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgdGV4dDogdGV4dCB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPbmx5IHVwZGF0ZSB2YWx1ZSBpZiBpdCBoYXMgY2hhbmdlZFxuICAgICAqIEBwYXJhbSBuZXdWYWx1ZSBcbiAgICAgKi9cbiAgICBwcm9wYWdhdGVPbkNoYW5nZShuZXdWYWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5wcm9wYWdhdGVkT25DaGFuZ2UgIT0gbmV3VmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcGFnYXRlZE9uQ2hhbmdlID0gbmV3VmFsdWU7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKG5ld1ZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBSZW1vdmVJdGVtIH0gZnJvbSAnLi4vY291cnNlLWJ1aWxkZXIvc3ViLWNvbXBvbmVudHMvcmVtb3ZlLWl0ZW0nO1xuaW1wb3J0IHsgZmluZERPTU5vZGUgfSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgZGlhbG9nczogUmVhY3QuQ29tcG9uZW50W107XG4gIHBvcERpYWxvZzogKCk9PnZvaWQ7XG59XG5cbmV4cG9ydCBjbGFzcyBEaWFsb2dzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzPiB7XG4gIGxhc3REaXY6IEhUTUxEaXZFbGVtZW50IHwgbnVsbDtcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzOiBQcm9wcykge1xuICAgIGlmICh0aGlzLmxhc3REaXYgIT09IG51bGwgJiYgcHJldlByb3BzLmRpYWxvZ3MubGVuZ3RoID4gdGhpcy5wcm9wcy5kaWFsb2dzLmxlbmd0aCkge1xuICAgICAgLy8gQSBkaWFsb2cgd2FzIGNsb3NlZC4gTm93IGZvY3VzIHRoZSBsYXN0IGRpYWxvZzpcbiAgICAgICQoZmluZERPTU5vZGUodGhpcy5sYXN0RGl2KSkuZmluZCgnOmlucHV0JykuZmlyc3QoKS5mb2N1cygpO1xuICAgIH1cbiAgfVxuXG4gIHJlbmRlciAoKSB7XG4gICAgdGhpcy5sYXN0RGl2ID0gbnVsbDtcbiAgICBjb25zdCB7ZGlhbG9ncywgcG9wRGlhbG9nfSA9IHRoaXMucHJvcHM7XG4gICAgJCgnYm9keScpLmF0dHIoJ2FyaWEtZGlzYWJsZWQnLCBkaWFsb2dzLmxlbmd0aCA+IDApO1xuICAgICQoJ2JvZHknKS5jc3MoJ292ZXJmbG93JywgZGlhbG9ncy5sZW5ndGggPiAwID8gJ2hpZGRlbicgOiAnYXV0bycpO1xuXG4gICAgcmV0dXJuIGRpYWxvZ3MubGVuZ3RoID4gMCAmJiA8ZGl2PlxuICAgICAge2RpYWxvZ3MubWFwKChkaWFsb2csIGlkeCkgPT4ge1xuICAgICAgICBsZXQgZGl2OiBIVE1MRGl2RWxlbWVudDtcbiAgICAgICAgZnVuY3Rpb24gb25LZXlQcmVzcyhldjogUmVhY3QuS2V5Ym9hcmRFdmVudDxIVE1MRGl2RWxlbWVudD4pIHtcbiAgICAgICAgICBpZiAoZXYud2hpY2ggPT09IDEzICYmICghZXYudGFyZ2V0IHx8IChldi50YXJnZXQgYXMgSFRNTEVsZW1lbnQpLnRhZ05hbWUgIT09ICdURVhUQVJFQScpKSB7XG4gICAgICAgICAgICAkKGZpbmRET01Ob2RlKGRpdikpLmZpbmQoJy5idG4tZGVmYXVsdCcpLmNsaWNrKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIG9uS2V5RG93bihldikge1xuICAgICAgICAgIGlmIChldi53aGljaCA9PT0gMjcpIHsgLy8gRXNjYXBlXG4gICAgICAgICAgICBwb3BEaWFsb2coKTtcbiAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZXYud2hpY2ggPT09IDgzICYmIChldi5jdHJsS2V5IHx8IGV2Lm1ldGFLZXkpKSB7IC8vIENUUkwtU1xuICAgICAgICAgICAgY29uc3QgZG9tTm9kZSA9IGZpbmRET01Ob2RlKGRpdik7XG4gICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgY29uc3QgZGVmYXVsdEJ1dHRvbiA9ICQoZG9tTm9kZSkuZmluZCgnLmJ0bi1kZWZhdWx0Jyk7XG4gICAgICAgICAgICBkZWZhdWx0QnV0dG9uLmNsaWNrKCk7XG4gICAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDxkaXYga2V5PXtpZHh9PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJkYXJrZW5cIiAvPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJtb2RhbC1wYWdlLXdyYXBcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtb2RhbC1wYWdlXCIgcmVmPXtlbGVtID0+IHtcbiAgICAgICAgICBkaXYgPSBlbGVtO1xuICAgICAgICAgIGlmIChpZHggPT09IGRpYWxvZ3MubGVuZ3RoIC0gMSkgdGhpcy5sYXN0RGl2ID0gZWxlbTtcbiAgICAgICAgfX1cbiAgICAgICAgICAgIHRhYkluZGV4PXswfVxuICAgICAgICAgICAgYXJpYS1kaXNhYmxlZD17aWR4IDwgZGlhbG9ncy5sZW5ndGggLSAxfVxuICAgICAgICAgICAgb25LZXlQcmVzcz17b25LZXlQcmVzc31cbiAgICAgICAgICAgIG9uS2V5RG93bj17b25LZXlEb3dufT5cbiAgICAgICAgICB7ZGlhbG9nfVxuICAgICAgICAgIDxSZW1vdmVJdGVtIG9uQ2xpY2s9e3BvcERpYWxvZ30gLz5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInN0b3BGbG9hdHNcIj48L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj59KX1cbiAgPC9kaXY+O1xuICB9XG59XG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBGb3JtRmllbGQgfSBmcm9tICcuL2Zvcm0tZmllbGQnO1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBsYWJlbDogYW55O1xuICBpZDogc3RyaW5nO1xuICB2YWx1ZTogc3RyaW5nO1xuICBwbGFjZWhvbGRlcj86IHN0cmluZztcbiAgYXV0b0ZvY3VzPzogYm9vbGVhbjtcbiAgb25DaGFuZ2U6ICh2YWx1ZTogc3RyaW5nKSA9PiB2b2lkO1xufVxuXG5leHBvcnQgY2xhc3MgVGV4dElucHV0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzPiB7XG4gIGNvbnN0cnVjdG9yIChwcm9wczogUHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxGb3JtRmllbGQgbGFiZWw9e3RoaXMucHJvcHMubGFiZWx9PlxuICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgYXV0b0ZvY3VzPXt0aGlzLnByb3BzLmF1dG9Gb2N1c30gaWQ9e3RoaXMucHJvcHMuaWR9IHNpemU9ezM1fSB2YWx1ZT17dGhpcy5wcm9wcy52YWx1ZX1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9e2V2ID0+IHRoaXMucHJvcHMub25DaGFuZ2UoZXYudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3RoaXMucHJvcHMucGxhY2Vob2xkZXJ9IC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICA8L0Zvcm1GaWVsZD5cbiAgICApO1xuICB9XG59XG5cbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IEZvcm1GaWVsZCB9IGZyb20gJy4vZm9ybS1maWVsZCc7XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIGxhYmVsOiBhbnk7XG4gIGlkOiBzdHJpbmc7XG4gIHZhbHVlOiBzdHJpbmc7XG4gIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xuICBhdXRvRm9jdXM/OiBib29sZWFuO1xuICByb3dzPzogbnVtYmVyO1xuICBjaGlsZHJlbj87XG4gIG9uQ2hhbmdlOiAodmFsdWU6IHN0cmluZykgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGNsYXNzIFRleHRBcmVhRm9ybUZpZWxkIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzPiB7XG4gIGNvbnN0cnVjdG9yIChwcm9wczogUHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxGb3JtRmllbGQgbGFiZWw9e3RoaXMucHJvcHMubGFiZWx9IGlkPXt0aGlzLnByb3BzLmlkfT5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cbiAgICAgICAgICAgIDx0ZXh0YXJlYSBhdXRvRm9jdXM9e3RoaXMucHJvcHMuYXV0b0ZvY3VzfSBpZD17dGhpcy5wcm9wcy5pZH0gY29scz17MzV9IHJvd3M9e3RoaXMucHJvcHMucm93cyB8fCA1fSB2YWx1ZT17dGhpcy5wcm9wcy52YWx1ZX1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9e2V2ID0+IHRoaXMucHJvcHMub25DaGFuZ2UoZXYudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e3RoaXMucHJvcHMucGxhY2Vob2xkZXJ9IC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgeyEhdGhpcy5wcm9wcy5jaGlsZHJlbiAmJiA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtXCI+XG4gICAgICAgICAgICB7dGhpcy5wcm9wcy5jaGlsZHJlbn1cbiAgICAgICAgICA8L2Rpdj59XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Gb3JtRmllbGQ+XG4gICAgKTtcbiAgfVxufVxuXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIGxhYmVsOiBhbnk7XG4gIGNoaWxkcmVuOiBhbnk7XG4gIGlkPzogc3RyaW5nO1xufVxuXG5mdW5jdGlvbiBmaW5kSWQobm9kZSkge1xuICBjb25zdCByZWN1Y2hlY2sgPSBuZXcgU2V0KCk7XG4gIHJldHVybiAoZnVuY3Rpb24gZmluZElkKG5vZGUpe1xuICAgIGlmICh0eXBlb2Ygbm9kZSA9PT0gJ3N0cmluZycpIHJldHVybiBudWxsO1xuICAgIGlmIChyZWN1Y2hlY2suaGFzKG5vZGUpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHJlY3VjaGVjay5hZGQobm9kZSk7XG4gICAgaWYgKG5vZGUucHJvcHMpIHtcbiAgICAgIGlmIChub2RlLnByb3BzLmlkKSByZXR1cm4gbm9kZS5wcm9wcy5pZDtcbiAgICAgIGlmIChub2RlLnByb3BzLmNoaWxkcmVuKSB7XG4gICAgICAgIHJldHVybiBmaW5kSWQobm9kZS5wcm9wcy5jaGlsZHJlbik7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChub2RlLmxlbmd0aCkge1xuICAgICAgZm9yIChsZXQgaT0wO2k8bm9kZS5sZW5ndGg7ICsraSkge1xuICAgICAgICBjb25zdCBjaGlsZCA9IG5vZGVbaV07XG4gICAgICAgIGlmIChjaGlsZCkge1xuICAgICAgICAgIGNvbnN0IGNoaWxkSWQgPSBmaW5kSWQoY2hpbGQpO1xuICAgICAgICAgIGlmIChjaGlsZElkKSByZXR1cm4gY2hpbGRJZDtcbiAgICAgICAgICAvL2NvbnNvbGUubG9nKGNoaWxkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSkobm9kZSk7XG59XG5cbmV4cG9ydCBjbGFzcyBGb3JtRmllbGQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHM+IHtcbiAgY29uc3RydWN0b3IgKHByb3BzOiBQcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gPD5cbiAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cImtjbGFiZWxcIiBodG1sRm9yPXt0aGlzLnByb3BzLmlkIHx8IGZpbmRJZCh0aGlzLnByb3BzLmNoaWxkcmVuKX0+e3RoaXMucHJvcHMubGFiZWx9PC9sYWJlbD5cbiAgICAgICAge3RoaXMucHJvcHMuY2hpbGRyZW59XG4gICAgPC8+XG4gIH1cbn1cbiIsIi8qIFJFRkFDVE9SOiBNb3ZlIHRoaXMgY29tcG9uZW50IG91dHNpZGUgY291cnNlYnVpbGRlciFcbiAgIFRoaXMgaXMgYSBnZW5lcmFsLXB1cnBvc2UgY29tcG9uZW50XG4qL1xuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBHb2FsUHJvZ3Jlc3MgfSBmcm9tICcuLi9jaGFydHMvZ29hbC1wcm9ncmVzcyc7XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIHRpdGxlOiBzdHJpbmcgfCBKU1guRWxlbWVudDtcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xuICBoZWFkZXJDbGFzc05hbWU/OiBzdHJpbmc7XG4gIGNvbnRlbnRDbGFzc05hbWU/OiBzdHJpbmc7XG4gIGhlYWRlck9wZW4/OiBib29sZWFuO1xuICBpbmFjdGl2YXRlZD86IGJvb2xlYW47XG4gIGluYWN0aXZhdGVkUmVuZGVyPzogJ2NoaWxkcmVuJyB8ICd0aXRsZUFuZENoaWxkcmVuJztcbiAgb25PcGVuQ2xvc2U/OiAoYmVjYW1lT3BlbjogYm9vbGVhbikgPT4gdm9pZDtcbiAgZGlzcGxheVByb2dyZXNzPzogYm9vbGVhbjtcbiAgcHJvZ3Jlc3NEYXRhPzoge2NvbXBsZXRlZE51bWJlck9mVGFza3M6IG51bWJlciwgbnVtYmVyT2ZUYXNrczogbnVtYmVyfTtcbiAgY2hpbGRyZW47XG59XG5cbmludGVyZmFjZSBTdGF0ZSB7XG4gIGhlYWRlck9wZW46IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjbGFzcyBPcGVuQ2xvc2VCb3ggZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsU3RhdGU+IHtcbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBoZWFkZXJPcGVuOiBwcm9wcy5oZWFkZXJPcGVuIHx8IGZhbHNlXG4gICAgfTtcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgKG5leHRQcm9wczogUHJvcHMpIHtcbiAgICBpZiAobmV4dFByb3BzLmhlYWRlck9wZW4gIT09IHRoaXMucHJvcHMuaGVhZGVyT3Blbikge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7aGVhZGVyT3BlbjogbmV4dFByb3BzLmhlYWRlck9wZW59KTtcbiAgICB9XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyB0aXRsZSwgY2xhc3NOYW1lLCBjaGlsZHJlbiwgaGVhZGVyQ2xhc3NOYW1lLCBjb250ZW50Q2xhc3NOYW1lLCBkaXNwbGF5UHJvZ3Jlc3MsIHByb2dyZXNzRGF0YSxcbiAgICAgIGluYWN0aXZhdGVkLCBpbmFjdGl2YXRlZFJlbmRlciB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCB7IGhlYWRlck9wZW4gfSA9IHRoaXMuc3RhdGU7XG5cbiAgICBpZiAoaW5hY3RpdmF0ZWQpIHJldHVybiBpbmFjdGl2YXRlZFJlbmRlciA9PT0gJ3RpdGxlQW5kQ2hpbGRyZW4nID8gPD5cbiAgICAgIDw+e3RpdGxlfTwvPlxuICAgICAgPD57Y2hpbGRyZW59PC8+XG4gICAgPC8+IDogPD5cbiAgICAgIHtjaGlsZHJlbn1cbiAgICA8Lz47XG5cbiAgICAvL3ZhciBjdXJyZW50UHJvZ3Jlc3NEYXRhID0gLy9wcm9ncmVzc0RhdGEoKTtcbiAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9eyhjbGFzc05hbWV8fCcnKSArIFwiIG9wZW5DbG9zZVwiICsgKGhlYWRlck9wZW4gPyBcIiBvcGVuXCIgOiBcIlwiKX0+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT17XCJvcGVuSGVhZGVyXCIgKyAoaGVhZGVyQ2xhc3NOYW1lID8gXCIgXCIgKyBoZWFkZXJDbGFzc05hbWUgOiBcIlwiKX1cbiAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgIGlmICh0aGlzLnByb3BzLm9uT3BlbkNsb3NlKSB0aGlzLnByb3BzLm9uT3BlbkNsb3NlKCF0aGlzLnN0YXRlLmhlYWRlck9wZW4pO1xuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBoZWFkZXJPcGVuOiAhdGhpcy5zdGF0ZS5oZWFkZXJPcGVuIH0pO1xuICAgICAgICB9fSA+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwib3BlbkhlYWRlckNvbnRhaW5lclwiPlxuICAgICAgICAgIDxkaXY+e3RpdGxlfTwvZGl2PlxuICAgICAgICAgIHtkaXNwbGF5UHJvZ3Jlc3MgJiYgPEdvYWxQcm9ncmVzcyB7Li4ucHJvZ3Jlc3NEYXRhfS8+fVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9e1wib3BlbkNvbnRlbnRcIiArIChjb250ZW50Q2xhc3NOYW1lID8gXCIgXCIgKyBjb250ZW50Q2xhc3NOYW1lIDogXCJcIil9PlxuICAgICAgICB7Y2hpbGRyZW59XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj47XG4gIH1cbn1cbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjdXJyZW50VXNlckVudiwgeyBFbnYgfSBmcm9tICcuLi8uLi9nbG9iYWxzL0tFRC5lbnYnO1xuaW1wb3J0IHR1dG9yRW52IGZyb20gJy4uLy4uL2dsb2JhbHMvS0VELnR1dG9yRW52JztcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgdHV0b3JlZDogYm9vbGVhbjtcbiAgY3JlYXRlQ29tcG9uZW50OiAoZW52OiBFbnYpPT5SZWFjdC5SZWFjdE5vZGVcbn1cblxuaW50ZXJmYWNlIFN0YXRlIHtcbiAgZW52OiBFbnY7XG59XG5cbmV4cG9ydCBjbGFzcyBUdXRvcmFibGVDb21wb25lbnQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsIFN0YXRlPiB7XG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLm9uRW52VXBkYXRlZCA9IHRoaXMub25FbnZVcGRhdGVkLmJpbmQodGhpcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGVudjogcHJvcHMudHV0b3JlZCA/IG51bGwgOiBjdXJyZW50VXNlckVudlxuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIGlmICh0aGlzLnByb3BzLnR1dG9yZWQpIHtcbiAgICAgIHR1dG9yRW52LnN1YnNjcmliZSh0aGlzLm9uRW52VXBkYXRlZCk7XG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgaWYgKHRoaXMucHJvcHMudHV0b3JlZCkge1xuICAgICAgdHV0b3JFbnYudW5zdWJzY3JpYmUodGhpcy5vbkVudlVwZGF0ZWQpO1xuICAgIH1cbiAgfVxuXG4gIG9uRW52VXBkYXRlZChlbnY6IEVudikge1xuICAgIHRoaXMuc2V0U3RhdGUoe2Vudn0pO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHtlbnZ9ID0gdGhpcy5zdGF0ZTtcbiAgICBpZiAoIWVudikgcmV0dXJuIDxkaXY+PC9kaXY+O1xuICAgIGlmICghZW52LmtlZEJhY2tlbmRDbGllbnQpIHtcbiAgICAgIHJldHVybiA8ZGl2PkxhZGRhci4uLjwvZGl2PjtcbiAgICB9XG4gICAgLy9jb25zdCB7Y3VycmVudFVzZXIsIGVkc0NsaWVudCwga2VkQmFja2VuZENsaWVudCwga2dUZXJtUGxhbm5lclJlcG99ID0gZW52O1xuICAgIC8vY29uc3Qge3R1dG9yZWR9ID0gdGhpcy5wcm9wcztcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5jcmVhdGVDb21wb25lbnQoZW52KTtcbiAgfVxufVxuIiwiaW1wb3J0IGV4ZWMgZnJvbSAnLi9leGVjJztcblxuZXhwb3J0IGRlZmF1bHQge1xuICBib2xkOiB7XG4gICAgaWNvbjogJzxiPkY8L2I+JyxcbiAgICB0aXRsZTogJ0ZldHN0aWwnLFxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnYm9sZCcpXG4gIH0sXG4gIGl0YWxpYzoge1xuICAgIGljb246ICc8aT5LPC9pPicsXG4gICAgdGl0bGU6ICdLdXJzaXYnLFxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnaXRhbGljJylcbiAgfSxcbiAgdW5kZXJsaW5lOiB7XG4gICAgaWNvbjogJzx1PlU8L3U+JyxcbiAgICB0aXRsZTogJ1VuZGVyc3RydWtlbicsXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCd1bmRlcmxpbmUnKVxuICB9LFxuICBzdHJpa2V0aHJvdWdoOiB7XG4gICAgaWNvbjogJzxzdHJpa2U+Uzwvc3RyaWtlPicsXG4gICAgdGl0bGU6ICdTdHJ1a2VuJyxcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ3N0cmlrZVRocm91Z2gnKVxuICB9LFxuICBoZWFkaW5nMToge1xuICAgIGljb246ICc8Yj5IPHN1Yj4xPC9zdWI+PC9iPicsXG4gICAgdGl0bGU6ICdSdWJyaWsgMScsXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdmb3JtYXRCbG9jaycsICc8SDE+JylcbiAgfSxcbiAgaGVhZGluZzI6IHtcbiAgICBpY29uOiAnPGI+SDxzdWI+Mjwvc3ViPjwvYj4nLFxuICAgIHRpdGxlOiAnUnVicmlrIDInLFxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnZm9ybWF0QmxvY2snLCAnPEgyPicpXG4gIH0sXG4gIGhlYWRpbmczOiB7XG4gICAgaWNvbjogJzxiPkg8c3ViPjM8L3N1Yj48L2I+JyxcbiAgICB0aXRsZTogJ1J1YnJpayAzJyxcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2Zvcm1hdEJsb2NrJywgJzxIMz4nKVxuICB9LFxuICBwYXJhZ3JhcGg6IHtcbiAgICBpY29uOiAnJiMxODI7JyxcbiAgICB0aXRsZTogJ1BhcmFncmFmJyxcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2Zvcm1hdEJsb2NrJywgJzxQPicpXG4gIH0sXG4gIHF1b3RlOiB7XG4gICAgaWNvbjogJyYjODIyMDsgJiM4MjIxOycsXG4gICAgdGl0bGU6ICdDaXRhdCcsXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdmb3JtYXRCbG9jaycsICc8QkxPQ0tRVU9URT4nKVxuICB9LFxuICBvbGlzdDoge1xuICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWxpc3Qtb2xcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+JyxcbiAgICB0aXRsZTogJ09yZG5hZCBsaXN0YScsXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdpbnNlcnRPcmRlcmVkTGlzdCcpXG4gIH0sXG4gIHVsaXN0OiB7XG4gICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtbGlzdFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4nLFxuICAgIHRpdGxlOiAnUHVua3RsaXN0YScsXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdpbnNlcnRVbm9yZGVyZWRMaXN0JylcbiAgfSxcbiAgb3V0ZGVudDoge1xuICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLW91dGRlbnRcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+JyxcbiAgICB0aXRsZTogJ01pbnNrYSBpbmRyYWcnLFxuICAgIHJlc3VsdDogKCkgPT4gZXhlYyhcIm91dGRlbnRcIilcbiAgfSxcbiAgaW5kZW50OiB7XG4gICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtaW5kZW50XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPicsXG4gICAgdGl0bGU6ICfDlmthIGluZHJhZycsXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKFwiaW5kZW50XCIpLFxuICB9LFxuICBjb2RlOiB7XG4gICAgaWNvbjogJyZsdDsvJmd0OycsXG4gICAgdGl0bGU6ICdQcm9ncmFta29kJyxcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2Zvcm1hdEJsb2NrJywgJzxQUkU+JylcbiAgfSxcbiAgbGluZToge1xuICAgIGljb246ICcmIzgyMTM7JyxcbiAgICB0aXRsZTogJ1bDpWdyw6R0IGxpbmplJyxcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2luc2VydEhvcml6b250YWxSdWxlJylcbiAgfSxcbiAgbGluazoge1xuICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWxpbmtcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+JyxcbiAgICB0aXRsZTogJ0luZm9nYSBsw6RuaycsXG4gICAgcmVzdWx0OiAoKSA9PiB7XG4gICAgICBjb25zdCB1cmwgPSB3aW5kb3cucHJvbXB0KCdBbmdlIGzDpG5rZW5zIFVSTCcpXG4gICAgICBpZiAodXJsKSBleGVjKCdjcmVhdGVMaW5rJywgdXJsKVxuICAgIH1cbiAgfSxcbiAgaW1hZ2U6IHtcbiAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1waWN0dXJlLW9cIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+JyxcbiAgICB0aXRsZTogJ0luZm9nYSBiaWxkJyxcbiAgICBwcm9tcHRNc2c6ICdBbmdlIGJpbGRlbnMgVVJMJyxcbiAgICByZXN1bHQgKGV2LCBjb21wb25lbnQpIHtcbiAgICAgIGNvbnN0IHVybCA9IHdpbmRvdy5wcm9tcHQodGhpcy5wcm9tcHRNc2cpO1xuICAgICAgaWYgKHVybCkge1xuICAgICAgICAvL2V4ZWMoJ2luc2VydEltYWdlJywgdXJsKTtcbiAgICAgICAgY29uc3QgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgICAgICAgaW1nLnNyYyA9IHVybDtcbiAgICAgICAgaW1nLnRhYkluZGV4ID0gMTtcbiAgICAgICAgaW5zZXJ0RWxlbWVudChpbWcpO1xuICAgICAgICBpbWcub25mb2N1cyA9IGNvbXBvbmVudC5vbkZvY3VzO1xuICAgICAgICBpbWcub25ibHVyID0gY29tcG9uZW50Lm9uQmx1cjtcbiAgICAgICAgY29tcG9uZW50LnByb3BzLm9uQ2hhbmdlKGNvbXBvbmVudC5jb250ZW50RGl2LmlubmVySFRNTCk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGluc2VydEVsZW1lbnQoZWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgICB2YXIgc2VsLCByYW5nZTtcbiAgICBpZiAod2luZG93LmdldFNlbGVjdGlvbiAmJiAoc2VsID0gd2luZG93LmdldFNlbGVjdGlvbigpKS5yYW5nZUNvdW50KSB7XG4gICAgICAgIHJhbmdlID0gc2VsLmdldFJhbmdlQXQoMCk7XG4gICAgICAgIHJhbmdlLmNvbGxhcHNlKHRydWUpO1xuICAgICAgICByYW5nZS5pbnNlcnROb2RlKGVsZW1lbnQpO1xuICAgICAgICAvLyBNb3ZlIHRoZSBjYXJldCBpbW1lZGlhdGVseSBhZnRlciB0aGUgaW5zZXJ0ZWQgc3BhblxuICAgICAgICByYW5nZS5zZXRTdGFydEFmdGVyKGVsZW1lbnQpO1xuICAgICAgICByYW5nZS5jb2xsYXBzZSh0cnVlKTtcbiAgICAgICAgc2VsLnJlbW92ZUFsbFJhbmdlcygpO1xuICAgICAgICBzZWwuYWRkUmFuZ2UocmFuZ2UpO1xuICAgIH1cbn1cbiIsImltcG9ydCBleGVjIGZyb20gJy4vZXhlYyc7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgYm9sZDoge1xuICAgIGljb246ICc8Yj5CPC9iPicsXG4gICAgdGl0bGU6ICdCb2xkJyxcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2JvbGQnKVxuICB9LFxuICBpdGFsaWM6IHtcbiAgICBpY29uOiAnPGk+STwvaT4nLFxuICAgIHRpdGxlOiAnSXRhbGljJyxcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2l0YWxpYycpXG4gIH0sXG4gIHVuZGVybGluZToge1xuICAgIGljb246ICc8dT5VPC91PicsXG4gICAgdGl0bGU6ICdVbmRlcmxpbmUnLFxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygndW5kZXJsaW5lJylcbiAgfSxcbiAgc3RyaWtldGhyb3VnaDoge1xuICAgIGljb246ICc8c3RyaWtlPlM8L3N0cmlrZT4nLFxuICAgIHRpdGxlOiAnU3RyaWtlLXRocm91Z2gnLFxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnc3RyaWtlVGhyb3VnaCcpXG4gIH0sXG4gIGhlYWRpbmcxOiB7XG4gICAgaWNvbjogJzxiPkg8c3ViPjE8L3N1Yj48L2I+JyxcbiAgICB0aXRsZTogJ0hlYWRpbmcgMScsXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdmb3JtYXRCbG9jaycsICc8SDE+JylcbiAgfSxcbiAgaGVhZGluZzI6IHtcbiAgICBpY29uOiAnPGI+SDxzdWI+Mjwvc3ViPjwvYj4nLFxuICAgIHRpdGxlOiAnSGVhZGluZyAyJyxcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2Zvcm1hdEJsb2NrJywgJzxIMj4nKVxuICB9LFxuICBoZWFkaW5nMzoge1xuICAgIGljb246ICc8Yj5IPHN1Yj4zPC9zdWI+PC9iPicsXG4gICAgdGl0bGU6ICdIZWFkaW5nIDMnLFxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnZm9ybWF0QmxvY2snLCAnPEgzPicpXG4gIH0sXG4gIHBhcmFncmFwaDoge1xuICAgIGljb246ICcmIzE4MjsnLFxuICAgIHRpdGxlOiAnUGFyYWdyYXBoJyxcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2Zvcm1hdEJsb2NrJywgJzxQPicpXG4gIH0sXG4gIHF1b3RlOiB7XG4gICAgaWNvbjogJyYjODIyMDsgJiM4MjIxOycsXG4gICAgdGl0bGU6ICdRdW90ZScsXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdmb3JtYXRCbG9jaycsICc8QkxPQ0tRVU9URT4nKVxuICB9LFxuICBvbGlzdDoge1xuICAgIGljb246ICcmIzM1OycsXG4gICAgdGl0bGU6ICdPcmRlcmVkIExpc3QnLFxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnaW5zZXJ0T3JkZXJlZExpc3QnKVxuICB9LFxuICB1bGlzdDoge1xuICAgIGljb246ICcmIzgyMjY7JyxcbiAgICB0aXRsZTogJ1Vub3JkZXJlZCBMaXN0JyxcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2luc2VydFVub3JkZXJlZExpc3QnKVxuICB9LFxuICBvdXRkZW50OiB7XG4gICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtb3V0ZGVudFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4nLFxuICAgIHRpdGxlOiAnT3V0ZGVudCcsXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKFwib3V0ZGVudFwiKVxuICB9LFxuICBpbmRlbnQ6IHtcbiAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1pbmRlbnRcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+JyxcbiAgICB0aXRsZTogJ0luZGVudCcsXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKFwiaW5kZW50XCIpLFxuICB9LFxuICBjb2RlOiB7XG4gICAgaWNvbjogJyZsdDsvJmd0OycsXG4gICAgdGl0bGU6ICdDb2RlJyxcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2Zvcm1hdEJsb2NrJywgJzxQUkU+JylcbiAgfSxcbiAgbGluZToge1xuICAgIGljb246ICcmIzgyMTM7JyxcbiAgICB0aXRsZTogJ0hvcml6b250YWwgTGluZScsXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdpbnNlcnRIb3Jpem9udGFsUnVsZScpXG4gIH0sXG4gIGxpbms6IHtcbiAgICBpY29uOiAnJiMxMjgyNzk7JyxcbiAgICB0aXRsZTogJ0xpbmsnLFxuICAgIHJlc3VsdDogKCkgPT4ge1xuICAgICAgY29uc3QgdXJsID0gd2luZG93LnByb21wdCgnRW50ZXIgdGhlIGxpbmsgVVJMJylcbiAgICAgIGlmICh1cmwpIGV4ZWMoJ2NyZWF0ZUxpbmsnLCB1cmwpXG4gICAgfVxuICB9LFxuICBpbWFnZToge1xuICAgIGljb246ICcmIzEyODI0NzsnLFxuICAgIHRpdGxlOiAnSW1hZ2UnLFxuICAgIHByb21wdE1zZzogJ0VudGVyIHRoZSBVUkwgb2YgdGhlIGltYWdlJyxcbiAgICByZXN1bHQgKCkge1xuICAgICAgY29uc3QgdXJsID0gd2luZG93LnByb21wdCh0aGlzLnByb21wdE1zZylcbiAgICAgIGlmICh1cmwpIGV4ZWMoJ2luc2VydEltYWdlJywgdXJsKVxuICAgIH1cbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgKGNvbW1hbmQsIHZhbHVlID0gbnVsbCkgPT4ge1xuICBkb2N1bWVudC5leGVjQ29tbWFuZChjb21tYW5kLCBmYWxzZSwgdmFsdWUpXG59XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpbWFnZUVkaXRBY3Rpb25zKGNiKSB7XG4gIHJldHVybiBbe1xuICAgIG5hbWU6ICdmbG9hdC1sZWZ0JyxcbiAgICBpY29uOiBgPGRpdiBzdHlsZT1cInBvc2l0aW9uOnJlbGF0aXZlXCI+XG4gICAgICA8aSBjbGFzcz1cImZhIGZhLWFsaWduLXJpZ2h0XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPlxuICAgICAgPGRpdiBzdHlsZT1cInBvc2l0aW9uOmFic29sdXRlOyBsZWZ0Oi00cHg7dG9wOjA7IHRyYW5zZm9ybTogc2NhbGUoMC41KTsgdHJhbnNmb3JtLW9yaWdpbjogbGVmdCB0b3BcIj5cbiAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS1waWN0dXJlLW9cIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5gLFxuICAgIHRpdGxlOiAnTMOldCBiaWxkZW4gZmx5dGEgdsOkbnN0ZXIgb20gdGV4dCcsXG4gICAgcmVzdWx0OiAoKSA9PiBjYignZmxvYXQtbGVmdCcpXG4gIH0sIHtcbiAgICBuYW1lOiAnZmxvYXQtcmlnaHQnLFxuICAgIGljb246IGA8ZGl2IHN0eWxlPVwicG9zaXRpb246cmVsYXRpdmVcIj5cbiAgICAgIDxpIGNsYXNzPVwiZmEgZmEtYWxpZ24tbGVmdFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cbiAgICAgIDxkaXYgc3R5bGU9XCJwb3NpdGlvbjphYnNvbHV0ZTsgcmlnaHQ6LTRweDt0b3A6MDsgdHJhbnNmb3JtOiBzY2FsZSgwLjUpOyB0cmFuc2Zvcm0tb3JpZ2luOiByaWdodCB0b3BcIj5cbiAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS1waWN0dXJlLW9cIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5gLFxuICAgIHRpdGxlOiAnTMOldCBiaWxkZW4gZmx5dGEgaMO2Z2VyIG9tIHRleHQnLFxuICAgIHJlc3VsdDogKCkgPT4gY2IoJ2Zsb2F0LXJpZ2h0JylcbiAgfSwge1xuICAgIG5hbWU6ICd1bmZsb2F0JyxcbiAgICBpY29uOiBgPGRpdiBzdHlsZT1cInBvc2l0aW9uOnJlbGF0aXZlO1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPlxuICAgICAgPGRpdiBzdHlsZT1cInBvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MFwiPiYjODI1NDs8L2Rpdj5cbiAgICAgIDxkaXYgc3R5bGU9XCJwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDpsZWZ0OjA7dHJhbnNmb3JtOiBzY2FsZSgwLjUpOyB0cmFuc2Zvcm0tb3JpZ2luOiBsZWZ0IGJvdHRvbVwiPlxuICAgICAgICA8aSBjbGFzcz1cImZhIGZhLXBpY3R1cmUtb1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBzdHlsZT1cInBvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MFwiPl88L2Rpdj5cbiAgICA8L2Rpdj5gLFxuICAgIHRpdGxlOiAnUGxhY2VyYSBiaWxkZW4gcMOlIGVnZW4gcmFkJyxcbiAgICByZXN1bHQ6ICgpID0+IGNiKCd1bmZsb2F0JylcbiAgfV07XG59XG5cbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBleGVjIGZyb20gJy4vZXhlYyc7XG5pbXBvcnQge3dhc2hIdG1sfSBmcm9tICcuL3dhc2gtaHRtbCc7XG5pbXBvcnQgaW1hZ2VFZGl0QWN0aW9ucyBmcm9tICcuL2ltYWdlLWVkaXQtYWN0aW9ucyc7XG5pbXBvcnQgYWN0aW9ucyBmcm9tICcuL2FjdGlvbnMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEFjdGlvbiB7XG4gIG5hbWU/OiBzdHJpbmc7XG4gIGljb246IHN0cmluZztcbiAgdGl0bGU6IHN0cmluZztcbiAgcHJvbXB0TXNnPzogc3RyaW5nO1xuICByZXN1bHQ6IChldjogUmVhY3QuTW91c2VFdmVudDxIVE1MQnV0dG9uRWxlbWVudD4sIGNvbXBvbmVudDogV3lzaXd5ZykgPT4gdm9pZDtcbn1cblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xuICBodG1sOiBzdHJpbmc7XG4gIG9uQ2hhbmdlPzogKGh0bWw6IHN0cmluZykgPT4gdm9pZDtcbiAgcmVwb3J0TnVtQ2hhcnM/OiAobnVtQ2hhcnM6IG51bWJlcikgPT4gdm9pZDtcbiAgbWF4Q2hhcnM/OiBudW1iZXI7XG4gIGRlZmF1bHRBY3Rpb25zPzoge1tuYW1lOiBzdHJpbmddOiBBY3Rpb259O1xuICBhY3Rpb25zPzogKFBhcnRpYWw8QWN0aW9uPiB8IHN0cmluZylbXTtcbiAgcmVhZE9ubHk/OiBib29sZWFuO1xufVxuXG5pbnRlcmZhY2UgU3RhdGUge1xuICBmb2N1c1JlY3Q6IENsaWVudFJlY3QgfCBudWxsO1xufVxuXG5jb25zdCBjbGFzc2VzID0ge1xuICBhY3Rpb25iYXI6ICd3eXNpd3lnLWFjdGlvbmJhcicsXG4gIGJ1dHRvbjogJ3d5c2l3eWctYnV0dG9uJyxcbiAgY29udGVudDogJ3d5c2l3eWctY29udGVudCcsXG4gIGZvY3VzcmVjdDogJ3d5c2l3eWctZm9jdXNyZWN0JyxcbiAgZm9jdXNwb2ludDogJ3d5c2l3eWctZm9jdXNwb2ludCcsXG4gIHJlYWRvbmx5Q29udGVudDogJ3d5c2l3eWctY29udGVudCByZWFkb25seSdcbn1cblxuZXhwb3J0IGNsYXNzIFd5c2l3eWcgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsU3RhdGU+IHtcbiAgY29udGVudERpdjogSFRNTERpdkVsZW1lbnQ7XG4gIGZvY3VzUmVjdERpdjogSFRNTERpdkVsZW1lbnQ7XG4gIGZvY3VzRWxlbTogSFRNTEVsZW1lbnQgfCBudWxsO1xuICBjb3JuZXI6IHN0cmluZztcbiAgcmVzaXplU3RhcnRYOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IgKHByb3BzOiBQcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0ge2ZvY3VzUmVjdDogbnVsbH07XG4gICAgdGhpcy5vbkZvY3VzID0gdGhpcy5vbkZvY3VzLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbkJsdXIgPSB0aGlzLm9uQmx1ci5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25Nb3VzZURvd24gPSB0aGlzLm9uTW91c2VEb3duLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbk1vdXNlTW92ZSA9IHRoaXMub25Nb3VzZU1vdmUuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uTW91c2VVcCA9IHRoaXMub25Nb3VzZVVwLmJpbmQodGhpcyk7XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICBpZiAoIXRoaXMucHJvcHMucmVhZE9ubHkpIHtcbiAgICAgIEFycmF5LmZyb20odGhpcy5jb250ZW50RGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCJpbWcsYVwiKSkubWFwKGVsZW0gPT4gKGVsZW0gYXMgKEhUTUxJbWFnZUVsZW1lbnQgfCBIVE1MQW5jaG9yRWxlbWVudCkpKVxuICAgICAgLmZvckVhY2goZWxlbSA9PiB7XG4gICAgICAgIGVsZW0udGFiSW5kZXggPSAxO1xuICAgICAgICBlbGVtLm9uZm9jdXMgPSB0aGlzLm9uRm9jdXM7XG4gICAgICAgIGVsZW0ub25ibHVyID0gdGhpcy5vbkJsdXIgYXMgYW55O1xuICAgICAgfSk7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnd5c2l3eWctY29udGVudFwiKS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLm9uTW91c2VEb3duKTtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud3lzaXd5Zy1jb250ZW50XCIpLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMub25Nb3VzZU1vdmUpO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53eXNpd3lnLWNvbnRlbnRcIikuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMub25Nb3VzZVVwKTtcbiAgICB9XG4gICAgaWYgKHRoaXMucHJvcHMucmVwb3J0TnVtQ2hhcnMpIHtcbiAgICAgIHRoaXMucHJvcHMucmVwb3J0TnVtQ2hhcnMoKHRoaXMuY29udGVudERpdiAmJiB0aGlzLmNvbnRlbnREaXYuaW5uZXJUZXh0ICYmIHRoaXMuY29udGVudERpdi5pbm5lclRleHQubGVuZ3RoKSB8fCAwKTtcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUoKSB7XG4gICAgQXJyYXkuZnJvbSh0aGlzLmNvbnRlbnREaXYucXVlcnlTZWxlY3RvckFsbChcImltZyxhXCIpKS5tYXAoZWxlbSA9PiAoZWxlbSBhcyAoSFRNTEltYWdlRWxlbWVudCB8IEhUTUxBbmNob3JFbGVtZW50KSkpXG4gICAgLmZvckVhY2goZWxlbSA9PiB7XG4gICAgICBlbGVtLnRhYkluZGV4ID0gMTtcbiAgICAgIGVsZW0ub25mb2N1cyA9IHRoaXMub25Gb2N1cztcbiAgICAgIGVsZW0ub25ibHVyID0gdGhpcy5vbkJsdXIgYXMgYW55O1xuICAgIH0pO1xuICAgIGlmICh0aGlzLnByb3BzLnJlcG9ydE51bUNoYXJzKSB7XG4gICAgICB0aGlzLnByb3BzLnJlcG9ydE51bUNoYXJzKCh0aGlzLmNvbnRlbnREaXYgJiYgdGhpcy5jb250ZW50RGl2LmlubmVyVGV4dCAmJiB0aGlzLmNvbnRlbnREaXYuaW5uZXJUZXh0Lmxlbmd0aCkgfHwgMCk7XG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53eXNpd3lnLWNvbnRlbnRcIikucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5vbk1vdXNlRG93bik7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53eXNpd3lnLWNvbnRlbnRcIikucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5vbk1vdXNlTW92ZSk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53eXNpd3lnLWNvbnRlbnRcIikucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMub25Nb3VzZVVwKTtcbiAgfVxuXG4gIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHM6IFByb3BzLCBuZXh0U3RhdGU6IFN0YXRlKSB7XG4gICAgLy90aGlzLmNvbnRlbnREaXYub25mb2N1cyA9IHRoaXMub25Gb2N1cztcbiAgICAvL3RoaXMuY29udGVudERpdi5vbmJsdXIgPSB0aGlzLm9uQmx1cjtcbiAgICByZXR1cm4gIXRoaXMuY29udGVudERpdiB8fFxuICAgICAgbmV4dFN0YXRlICE9IHRoaXMuc3RhdGUgfHxcbiAgICAgIG5leHRQcm9wcy5yZWFkT25seSAhPT0gdGhpcy5wcm9wcy5yZWFkT25seSB8fFxuICAgICAgd2FzaEh0bWwobmV4dFByb3BzLmh0bWwpICE9PSB3YXNoSHRtbCh0aGlzLmNvbnRlbnREaXYuaW5uZXJIVE1MKTtcbiAgfVxuXG4gIHRyaWdnZXJPbkNoYW5nZShodG1sOiBzdHJpbmcpIHtcbiAgICB0aGlzLnByb3BzLm9uQ2hhbmdlICYmIHRoaXMucHJvcHMub25DaGFuZ2Uod2FzaEh0bWwoaHRtbCkpO1xuICB9XG5cbiAgb25Gb2N1cyhldjogRm9jdXNFdmVudCkge1xuICAgIGNvbnN0IGVsZW0gPSBldi50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgaWYgKCFlbGVtIHx8ICFlbGVtLnRhZ05hbWUpIHJldHVybjtcbiAgICBpZiAoZWxlbS50YWdOYW1lICE9PSAnSU1HJyAmJiBlbGVtLnRhZ05hbWUgIT09ICdBJykgcmV0dXJuO1xuICAgIGNvbnN0IGNvbnRlbnRQYXJlbnQgPSB0aGlzLmNvbnRlbnREaXYucGFyZW50RWxlbWVudDtcbiAgICBjb25zdCBuZXdTdGF0ZSA9IHtcbiAgICAgIGZvY3VzUmVjdDogZ2V0UmVsYXRhdGl2ZUNsaWVudFJlY3QoY29udGVudFBhcmVudCwgZWxlbSksXG4gICAgfVxuICAgIHN3aXRjaCAoZWxlbS50YWdOYW1lKSB7XG4gICAgICBjYXNlICdBJzpcbiAgICAgIGNhc2UgJ0lNRyc6XG5cbiAgICAgIGRlZmF1bHQ6IGJyZWFrO1xuICAgIH1cbiAgICB0aGlzLnNldFN0YXRlKG5ld1N0YXRlKTtcbiAgICB0aGlzLmZvY3VzRWxlbSA9IGVsZW07XG4gIH1cblxuICBvbkJsdXIoZXY6IFJlYWN0LkZvY3VzRXZlbnQ8SFRNTERpdkVsZW1lbnQ+KSB7XG4gICAgLyppZiAoZXYucmVsYXRlZFRhcmdldCkge1xuICAgICAgY29uc3QgcmVsYXRlZFRhcmdldCA9IGV2LnJlbGF0ZWRUYXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICBpZiAocmVsYXRlZFRhcmdldC5jbGFzc05hbWUgJiYgcmVsYXRlZFRhcmdldC5jbGFzc05hbWUuc3BsaXQoJyAnKS5pbmRleE9mKGNsYXNzZXMuYnV0dG9uKSA+PSAwKSB7XG4gICAgICAgIC8vIEEgaW1hZ2UgYWN0aW9uIGJ1dHRvbiB3YXMgcHJlc3NlZFxuICAgICAgICBzZXRcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0qL1xuICAgIGlmICgoZXYudGFyZ2V0ID09PSB0aGlzLmZvY3VzRWxlbSAmJiBldi5yZWxhdGVkVGFyZ2V0ICE9PSB0aGlzLmZvY3VzUmVjdERpdikgfHxcbiAgICAgIGV2LnRhcmdldCA9PT0gdGhpcy5mb2N1c1JlY3REaXYpXG4gICAge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7Zm9jdXNSZWN0OiBudWxsfSk7XG4gICAgfVxuICB9XG5cbiAgbWFrZUNsaWNrYWJsZShlbGVtOiBIVE1MRWxlbWVudCkge1xuICAgICBlbGVtLnRhYkluZGV4ID0gMTtcbiAgfVxuXG4gIG9uTW91c2VEb3duKGV2KSB7XG4gICAgaWYgKChldi50YXJnZXQuY2xhc3NOYW1lIHx8IFwiXCIpLnNwbGl0KCcgJykuaW5kZXhPZihjbGFzc2VzLmZvY3VzcG9pbnQpID49IDApIHtcbiAgICAgIGNvbnN0IGNvcm5lciA9IHRoaXMuZ2V0UmVjdENvcm5lcihldik7XG4gICAgICB0aGlzLmNvcm5lciA9IGNvcm5lcjtcbiAgICAgIHRoaXMucmVzaXplU3RhcnRYID0gZXYuY2xpZW50WDtcbiAgICB9XG4gIH1cblxuICBvbk1vdXNlTW92ZShldjogTW91c2VFdmVudCkge1xuICAgIGlmICh0aGlzLmNvcm5lciAmJiB0aGlzLnN0YXRlLmZvY3VzUmVjdCAmJiB0aGlzLmZvY3VzRWxlbSkge1xuICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgIC8vIFRPRE86IFLDpGtuYSB1dCBiYXNlcmF0IHDDpSB0aGlzLmNvcm5lciBodXIgYmlsZGVucyBzdG9ybGVrIGJvcmRlIMOkbmRyYXMuXG4gICAgICAvLyBMZXRhIHVwcCBiaWxkZW4gcGVyIElEIGZyw6VuIHRoaXMuY29udGVudERpdlxuICAgICAgLy8gU8OkdHQgRElWOmVucyBzdHlsZSBhdHRyaWJ1dCB3aWR0aCB0aWxsIG55IHdpZHRoLlxuICAgICAgLy8gT20gRElWOmVuIHJlZGFuIGhhZGUgaGVpZ2h0LCBzw6R0dCBueSBoZWlnaHQgbWVkIHNhbW1hIGFzcGVjdCByYXRpbyBzb20gaW5uYW4sXG4gICAgICAvLyBhbm5hcnMsIHPDpHR0IGludGUgaGVpZ2h0IGFsbHMgKGVsbGVyIG3DtmpsaWd0dmlzIHRpbGwgYXV0bykpXG4gICAgICBjb25zdCBmb2N1c1JlY3QgPSB0aGlzLmZvY3VzUmVjdERpdi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIGlmIChmb2N1c1JlY3Qud2lkdGggPCAzMikgcmV0dXJuO1xuICAgICAgLy9jb25zdCBjdXJyZW50V2lkdGggPSBmb2N1c1JlY3Qud2lkdGg7XG4gICAgICAvL2NvbnN0IGN1cnJlbnRIZWlnaHQgPSBmb2N1c1JlY3QuaGVpZ2h0O1xuICAgICAgLy9jb25zdCBoYXNIZWlnaHRTdHlsZSA9ICF0aGlzLmZvY3VzRWxlbS5zdHlsZS5oZWlnaHQgfHwgdGhpcy5mb2N1c0VsZW0uc3R5bGUuaGVpZ2h0ID09PSBcImF1dG9cIjtcbiAgICAgIGNvbnN0IG5ld1dpZHRoID0gTWF0aC5tYXgoMzIsIHRoaXMuY29ybmVyLmVuZHNXaXRoKCdsJykgP1xuICAgICAgICBmb2N1c1JlY3Qud2lkdGggKyAodGhpcy5yZXNpemVTdGFydFggLSBldi5jbGllbnRYKSA6XG4gICAgICAgIC8vZm9jdXNSZWN0LnJpZ2h0IC0gZXYuY2xpZW50WCA6XG4gICAgICAgIGZvY3VzUmVjdC53aWR0aCAtICh0aGlzLnJlc2l6ZVN0YXJ0WCAtIGV2LmNsaWVudFgpKTtcbiAgICAgIHRoaXMucmVzaXplU3RhcnRYID0gZXYuY2xpZW50WDtcbiAgICAgICAgLy9ldi5jbGllbnRYIC0gZm9jdXNSZWN0LmxlZnQ7XG4gICAgICBjb25zdCBmYWN0b3IgPSBuZXdXaWR0aCAvIGZvY3VzUmVjdC53aWR0aDtcbiAgICAgIGNvbnN0IG5ld0hlaWdodCA9IGZvY3VzUmVjdC5oZWlnaHQgKiBmYWN0b3I7XG4gICAgICB0aGlzLmZvY3VzRWxlbS5zdHlsZS53aWR0aCA9IG5ld1dpZHRoICsgXCJweFwiO1xuICAgICAgdGhpcy5mb2N1c0VsZW0uc3R5bGUuaGVpZ2h0ID0gbmV3SGVpZ2h0ICsgXCJweFwiO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGZvY3VzUmVjdDogZ2V0UmVsYXRhdGl2ZUNsaWVudFJlY3QodGhpcy5jb250ZW50RGl2LnBhcmVudEVsZW1lbnQsIHRoaXMuZm9jdXNFbGVtKSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIG9uTW91c2VVcChldikge1xuICAgIGlmICh0aGlzLmNvcm5lciAmJiB0aGlzLnN0YXRlLmZvY3VzUmVjdCAmJiB0aGlzLmZvY3VzRWxlbSkge1xuICAgICAgdGhpcy5jb3JuZXIgPSBudWxsO1xuICAgICAgdGhpcy50cmlnZ2VyT25DaGFuZ2UodGhpcy5jb250ZW50RGl2LmlubmVySFRNTCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0UmVjdENvcm5lcihldikge1xuICAgIGZvciAoY29uc3QgY2xhc3NOYW1lIG9mIChldi50YXJnZXQuY2xhc3NOYW1lIHx8ICcnKS5zcGxpdCgnICcpKSB7XG4gICAgICBzd2l0Y2ggKGNsYXNzTmFtZSkge1xuICAgICAgICBjYXNlICdmcHVsJzpcbiAgICAgICAgICByZXR1cm4gJ3VsJztcbiAgICAgICAgY2FzZSAnZnB1cic6XG4gICAgICAgICAgcmV0dXJuICdmcHVyJztcbiAgICAgICAgY2FzZSAnZnBscic6XG4gICAgICAgICAgcmV0dXJuICdscic7XG4gICAgICAgIGNhc2UgJ2ZwbGwnOlxuICAgICAgICAgIHJldHVybiAnbGwnO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGV4ZWNJbWFnZUVkaXRBY3Rpb24gKGNtZDogc3RyaW5nKSB7XG4gICAgLy9jb25zb2xlLmxvZyhjbWQpO1xuICAgIGlmICghdGhpcy5mb2N1c0VsZW0pIHJldHVybjtcbiAgICAvL2NvbnNvbGUubG9nKFwiZG9pbmcgaXRcIik7XG4gICAgc3dpdGNoIChjbWQpIHtcbiAgICAgIGNhc2UgJ2Zsb2F0LWxlZnQnOlxuICAgICAgICB0aGlzLmZvY3VzRWxlbS5zdHlsZS5jc3NGbG9hdCA9ICdsZWZ0JztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdmbG9hdC1yaWdodCc6XG4gICAgICAgIHRoaXMuZm9jdXNFbGVtLnN0eWxlLmNzc0Zsb2F0ID0gJ3JpZ2h0JztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd1bmZsb2F0JzpcbiAgICAgICAgdGhpcy5mb2N1c0VsZW0uc3R5bGUuY3NzRmxvYXQgPSAnJztcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHRoaXMudHJpZ2dlck9uQ2hhbmdlKHRoaXMuY29udGVudERpdi5pbm5lckhUTUwpO1xuICAgIHRoaXMuc2V0U3RhdGUoe2ZvY3VzUmVjdDogZ2V0UmVsYXRhdGl2ZUNsaWVudFJlY3QodGhpcy5jb250ZW50RGl2LnBhcmVudEVsZW1lbnQsIHRoaXMuZm9jdXNFbGVtKX0pO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IGRlZmF1bHRBY3Rpb25zID0gdGhpcy5wcm9wcy5kZWZhdWx0QWN0aW9ucyB8fCBhY3Rpb25zO1xuICAgIGxldCBhY3Rpb25zVG9Vc2UgPSB0aGlzLnByb3BzLmFjdGlvbnMgPyB0aGlzLnByb3BzLmFjdGlvbnMubWFwKGFjdGlvbiA9PlxuICAgICAgdHlwZW9mIGFjdGlvbiA9PT0gJ3N0cmluZycgP1xuICAgICAgICBkZWZhdWx0QWN0aW9uc1thY3Rpb25dIDpcbiAgICAgICAgZGVmYXVsdEFjdGlvbnNbYWN0aW9uLm5hbWVdID9cbiAgICAgICAgICB7IC4uLmRlZmF1bHRBY3Rpb25zW2FjdGlvbi5uYW1lXSwgLi4uYWN0aW9uIH0gOlxuICAgICAgICAgIGFjdGlvbilcbiAgICA6IE9iamVjdC5rZXlzKGRlZmF1bHRBY3Rpb25zKS5tYXAoYWN0aW9uID0+IGRlZmF1bHRBY3Rpb25zW2FjdGlvbl0pO1xuXG4gICAgaWYgKHRoaXMuc3RhdGUuZm9jdXNSZWN0KSB7XG4gICAgICBhY3Rpb25zVG9Vc2UgPSBhY3Rpb25zVG9Vc2UuY29uY2F0KGltYWdlRWRpdEFjdGlvbnMoY21kID0+IHRoaXMuZXhlY0ltYWdlRWRpdEFjdGlvbihjbWQpKSk7XG4gICAgfVxuXG4gICAgY29uc3Qge2ZvY3VzUmVjdH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHtyZWFkT25seSwgcmVwb3J0TnVtQ2hhcnMsIG1heENoYXJzfSA9IHRoaXMucHJvcHM7XG5cbiAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9e3RoaXMucHJvcHMuY2xhc3NOYW1lfT5cbiAgICAgIHshcmVhZE9ubHkgJiYgPGRpdiBjbGFzc05hbWU9e2NsYXNzZXMuYWN0aW9uYmFyfT5cbiAgICAgICAge2FjdGlvbnNUb1VzZS5tYXAoKGFjdGlvbiwgaWR4KSA9PlxuICAgICAgICAgIDxidXR0b24ga2V5PXtpZHh9IGNsYXNzTmFtZT17Y2xhc3Nlcy5idXR0b259XG4gICAgICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTD17e19faHRtbDogYWN0aW9uLmljb259fVxuICAgICAgICAgICAgdGl0bGU9e2FjdGlvbi50aXRsZX1cbiAgICAgICAgICAgIG9uTW91c2VEb3duPXtldj0+e2FjdGlvbi5yZXN1bHQoZXYsIHRoaXMpfX1cbiAgICAgICAgICAgIG9uTW91c2VVcD17ZXY9PnNldFRpbWVvdXQoKCk9PnRoaXMuY29udGVudERpdi5mb2N1cygpLCAxMCl9XG4gICAgICAgICAgLz4pfVxuICAgICAgPC9kaXY+fVxuICAgICAgPGRpdiBjbGFzc05hbWU9e3JlYWRPbmx5ID8gY2xhc3Nlcy5yZWFkb25seUNvbnRlbnQgOiBjbGFzc2VzLmNvbnRlbnR9IHN0eWxlPXt7cG9zaXRpb246ICdyZWxhdGl2ZScsIHRvcDogMCwgbGVmdDogMH19PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImVkaXRvclwiXG4gICAgICAgICAgcmVmPXtkaXYgPT4gdGhpcy5jb250ZW50RGl2ID0gZGl2fVxuICAgICAgICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXt7X19odG1sOiB3YXNoSHRtbCh0aGlzLnByb3BzLmh0bWwpfX1cbiAgICAgICAgICBjb250ZW50RWRpdGFibGU9eyFyZWFkT25seX1cbiAgICAgICAgICBvblBhc3RlPXtldiA9PiB7XG4gICAgICAgICAgICBpZiAoIWlzTmFOKG1heENoYXJzKSkge1xuICAgICAgICAgICAgICBjb25zdCB7dGFyZ2V0LCBjdXJyZW50VGFyZ2V0fSA9IGV2O1xuICAgICAgICAgICAgICAvL2NvbnN0IHRleHRCZWluZ092ZXJ3cml0dGVuID0gKHRhcmdldCBhcyBhbnkpLmlubmVyVGV4dCB8fCBcIlwiO1xuICAgICAgICAgICAgICBjb25zdCBlZGl0b3JUZXh0ID0gKGN1cnJlbnRUYXJnZXQgJiYgY3VycmVudFRhcmdldC5pbm5lclRleHQpIHx8IFwiXCI7XG4gICAgICAgICAgICAgIGNvbnN0IHRleHRCZWluZ1Bhc3RlZCA9IGV2LmNsaXBib2FyZERhdGEuZ2V0RGF0YShcInRleHQvcGxhaW5cIikgfHwgXCJcIjtcbiAgICAgICAgICAgICAgaWYgKGVkaXRvclRleHQubGVuZ3RoICsgdGV4dEJlaW5nUGFzdGVkLmxlbmd0aCA+IG1heENoYXJzKSB7XG4gICAgICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH19XG4gICAgICAgICAgb25LZXlVcD17cmVwb3J0TnVtQ2hhcnMgPyBldiA9PiB7XG4gICAgICAgICAgICBjb25zdCB7aW5uZXJUZXh0fSA9IChldi50YXJnZXQgYXMgYW55KTtcbiAgICAgICAgICAgIHJlcG9ydE51bUNoYXJzKGlubmVyVGV4dCA/IGlubmVyVGV4dC5sZW5ndGggOiAwKTtcbiAgICAgICAgICB9IDogbnVsbH1cbiAgICAgICAgICBvbktleVByZXNzPXshaXNOYU4obWF4Q2hhcnMpID8gZXYgPT4ge1xuICAgICAgICAgICAgY29uc3Qge2lubmVyVGV4dH0gPSAoZXYudGFyZ2V0IGFzIGFueSk7XG4gICAgICAgICAgICBpZiAoaW5uZXJUZXh0ICYmIGlubmVyVGV4dC5sZW5ndGggPj0gbWF4Q2hhcnMpIHtcbiAgICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IDogbnVsbH1cbiAgICAgICAgICBvbklucHV0PXtldiA9PiB0aGlzLnRyaWdnZXJPbkNoYW5nZSgoZXYudGFyZ2V0IGFzIGFueSkuaW5uZXJIVE1MKX1cbiAgICAgICAgICBvbktleURvd249e2V2ID0+IHtcbiAgICAgICAgICAgIGlmIChyZWFkT25seSkgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKHJlcG9ydE51bUNoYXJzICYmIGV2LmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgICAgICAgICAgcmVwb3J0TnVtQ2hhcnMoKGV2LmN1cnJlbnRUYXJnZXQuaW5uZXJUZXh0IHx8IFwiXCIpLmxlbmd0aCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJLZXk6IFwiICsgZXYud2hpY2gpO1xuICAgICAgICAgICAgaWYgKGV2LndoaWNoID49IDM1ICYmIGV2LndoaWNoIDw9IDQwKSB7Ly8gaG9tZS9lbmQvdXAvZG93bi9sZWZ0L3JpZ2h0XG4gICAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyAvLyBQcmV2ZW50IGVudGlyZSBwYWdlIGZyb20gc2Nyb2xsaW5nPz9cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChldi53aGljaCA9PT0gOSkge1xuICAgICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpOy8vIFRBQlxuICAgICAgICAgICAgICBpZiAoZXYuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgICAgICBleGVjKFwib3V0ZGVudFwiKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBleGVjKFwiaW5kZW50XCIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgKGV2LmtleUNvZGUgPT09IDggfHwgZXYua2V5Q29kZSA9PT0gNDYpICYmIC8vIERlbGV0ZSBvciBCYWNrIGJ1dHRvbnNcbiAgICAgICAgICAgICAgdGhpcy5mb2N1c0VsZW0gJiYgdGhpcy5zdGF0ZS5mb2N1c1JlY3QpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGlmICh0aGlzLmZvY3VzRWxlbSAmJiB0aGlzLmZvY3VzRWxlbS5wYXJlbnRFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb2N1c0VsZW0ucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLmZvY3VzRWxlbSk7IC8vIFJlbW92ZSBtYXJrZWQgaW1hZ2VcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB0aGlzLmZvY3VzRWxlbSA9IG51bGw7XG4gICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2ZvY3VzUmVjdDogbnVsbH0pO1xuICAgICAgICAgICAgICB0aGlzLnRyaWdnZXJPbkNoYW5nZSh0aGlzLmNvbnRlbnREaXYuaW5uZXJIVE1MKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9fVxuICAgICAgICAvPlxuICAgICAgICB7Zm9jdXNSZWN0ICYmIDxkaXZcbiAgICAgICAgICByZWY9e2RpdiA9PiB0aGlzLmZvY3VzUmVjdERpdiA9IGRpdn1cbiAgICAgICAgICBjbGFzc05hbWU9e2NsYXNzZXMuZm9jdXNyZWN0fVxuICAgICAgICAgIG9uQmx1cj17dGhpcy5vbkJsdXJ9XG4gICAgICAgICAgdGFiSW5kZXg9ezF9XG4gICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgIG91dGxpbmU6IDAsXG4gICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgICAgIHRvcDogdGhpcy5zdGF0ZS5mb2N1c1JlY3QudG9wLFxuICAgICAgICAgICAgbGVmdDogdGhpcy5zdGF0ZS5mb2N1c1JlY3QubGVmdCxcbiAgICAgICAgICAgIHdpZHRoOiB0aGlzLnN0YXRlLmZvY3VzUmVjdC53aWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogdGhpcy5zdGF0ZS5mb2N1c1JlY3QuaGVpZ2h0fX0+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzZXMuZm9jdXNwb2ludCArIFwiIGZwdWxcIn0gc3R5bGU9e3twb3NpdGlvbjonYWJzb2x1dGUnLCB0b3A6MCwgbGVmdDowfX0gLz5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3Nlcy5mb2N1c3BvaW50ICsgXCIgZnB1clwifSBzdHlsZT17e3Bvc2l0aW9uOidhYnNvbHV0ZScsIHRvcDowLCByaWdodDowfX0gLz5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3Nlcy5mb2N1c3BvaW50ICsgXCIgZnBsclwifSBzdHlsZT17e3Bvc2l0aW9uOidhYnNvbHV0ZScsIGJvdHRvbTowLCByaWdodDowfX0gLz5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3Nlcy5mb2N1c3BvaW50ICsgXCIgZnBsbFwifSBzdHlsZT17e3Bvc2l0aW9uOidhYnNvbHV0ZScsIGJvdHRvbTowLCBsZWZ0OjB9fSAvPlxuICAgICAgICA8L2Rpdj59XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRSZWxhdGF0aXZlQ2xpZW50UmVjdCAocGFyZW50OiBIVE1MRWxlbWVudCwgY2hpbGQ6IEhUTUxFbGVtZW50KSA6IENsaWVudFJlY3Qge1xuICBjb25zdCBwYXJlbnRSZWN0ID0gcGFyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICBjb25zdCBjaGlsZFJlY3QgPSBjaGlsZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgcmV0dXJuIHtcbiAgICB0b3A6IGNoaWxkUmVjdC50b3AgLSBwYXJlbnRSZWN0LnRvcCArIHBhcmVudC5zY3JvbGxUb3AsXG4gICAgbGVmdDogY2hpbGRSZWN0LmxlZnQgLSBwYXJlbnRSZWN0LmxlZnQgKyBwYXJlbnQuc2Nyb2xsTGVmdCxcbiAgICBib3R0b206IGNoaWxkUmVjdC5ib3R0b20gLSBwYXJlbnRSZWN0LnRvcCArIHBhcmVudC5zY3JvbGxUb3AsXG4gICAgcmlnaHQ6IGNoaWxkUmVjdC5yaWdodCAtIHBhcmVudFJlY3QubGVmdCArIHBhcmVudC5zY3JvbGxMZWZ0LFxuICAgIHdpZHRoOiBjaGlsZFJlY3Qud2lkdGgsXG4gICAgaGVpZ2h0OiBjaGlsZFJlY3QuaGVpZ2h0XG4gIH07XG59XG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuXG5jb25zdCBwYXJzZXIgPSBuZXcgRE9NUGFyc2VyKCk7XG5cbnR5cGUgSFRNTFBvbGljeSA9IHtbdGFnTmFtZUxvd2VyOiBzdHJpbmddOiB7W2F0dHJpYnV0ZUxvd2VyOiBzdHJpbmddOiBib29sZWFufX07XG5cbi8qKiBUYWdzIC8gQXR0cmlidXRlcyBXaGl0ZWxpc3RcbiAqIFxuICovXG5jb25zdCBIVE1MX1dBU0hfUE9MSUNZOiBIVE1MUG9saWN5ID0ge1xuICBiOiB7fSwgIC8vIGJvbGRcbiAgaToge30sICAvLyBpdGFsaWNcbiAgcDoge30sICAvLyBwYXJhZ3JhcGhcbiAgdToge30sICAvLyB1bmRlcmxpbmVcbiAgc3RyaWtlOiB7fSwgLy8gc3RyaWtlLXRocm91Z2hcbiAgcHJlOiB7fSwgLy8gdW5mb3JtYXR0ZWRcbiAgaDE6IHt9LCAvLyBoZWFkaW5nIDFcbiAgaDI6IHt9LCAvLyBoZWFkaW5nIDJcbiAgaDM6IHt9LCAvLyBoZWFkaW5nIDNcbiAgaDQ6IHt9LCAvLyBoZWFkaW5nIDRcbiAgaDU6IHt9LCAvLyBoZWFkaW5nIDVcbiAgaW1nOiB7c3JjOiB0cnVlLCBjbGFzczogdHJ1ZSwgc3R5bGU6IHRydWUsIHRhYmluZGV4OiB0cnVlfSwgLy8gaW1hZ2UuIFdlIHNldCBzdHlsZSBhbmQgdGFiaW5kZXggb3Vyc2VsdmVzLiBBY2NlcHQgdGhhdC5cbiAgYToge2hyZWY6IHRydWUsIHRhcmdldDogdHJ1ZSwgdGFiaW5kZXg6IHRydWV9LCAvLyBsaW5rXG4gIHVsOiB7fSwgLy8gVW5vcmRlcmVkIGxpc3RcbiAgb2w6IHt9LCAvLyBPcmRlcmVkIGxpc3RcbiAgbGk6IHt9LCAvLyBsaXN0IGl0ZW1cbiAgaHI6IHt9LCAvLyBIb3Jpem9udGFsIHJ1bGVcbiAgYnI6IHt9LCAvLyBCcmVhayBsaW5lXG4gIGRpdjoge30sLy8gT2Ygc29tZSByZWFzb24sIGRpdnMgYXJlIHNvbWV0aW1lcyBpbnNlcnRlZCB3aGVuIHByZXNzaW5nIEVOVEVSIGluIHRoZSB3eXNpd3lnIGVkaXRvci5cbiAgc3Bhbjoge30sLy8gU3BhbnMgYXJlIGhhcm1sZXNzLCBqdXN0IHJlbW92ZSB0aGVpciBzdHlsZSBhbmQgb3RoZXIgYXR0cmlidXRlcyBhbmQgSSBmZWVsIGdyZWF0LlxuICAvLyB0YWJsZSB0YWdzOlxuICB0YWJsZToge2JvcmRlcjogdHJ1ZX0sXG4gIHRib2R5OiB7fSxcbiAgdGhlYWQ6IHt9LFxuICB0Zm9vdDoge30sXG4gIHRyOiB7fSxcbiAgdGQ6IHtoZWFkZXJzOiB0cnVlLCBjb2xzcGFuOiB0cnVlLCByb3dzcGFuOiB0cnVlfSxcbiAgdGg6IHthYmJyOiB0cnVlLCBoZWFkZXJzOiB0cnVlLCBzY29wZTogdHJ1ZSwgc29ydGVkOiB0cnVlLCBjb2xzcGFuOiB0cnVlLCByb3dzcGFuOiB0cnVlfVxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHdhc2hIdG1sIChodG1sOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBkb2MgPSBwYXJzZXIucGFyc2VGcm9tU3RyaW5nKGh0bWwsIFwidGV4dC9odG1sXCIpO1xuICBjb25zdCB7Y2hpbGROb2Rlc30gPSBkb2MuYm9keTtcbiAgbGV0IG1vZGlmaWVkID0gZmFsc2U7XG4gIGZvciAobGV0IGk9MDsgaTxjaGlsZE5vZGVzLmxlbmd0aDsgKytpKSB7XG4gICAgaWYgKHdhc2hOb2RlKGNoaWxkTm9kZXMuaXRlbShpKSkpIHtcbiAgICAgIG1vZGlmaWVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG1vZGlmaWVkID9cbiAgICBkb2MuYm9keS5pbm5lckhUTUwgOlxuICAgIGh0bWw7IC8vIEJ5IHJldHVybmluZyB0aGUgb3JpZ2luYWwgSFRNTCBzdHJpbmcsIHdlIHNwYXJlIHRoZSB1c2VyIGZyb20gcmVmcmVzaGluZyB0aGUgZWRpdCBhcmVhLFxuICAgICAgICAgIC8vIHdoaWNoIHdvdWxkIG90aGVyd2lzZSBwdXQgdGhlIGN1cnNvciBhdCB0aGUgdG9wLCBsb3NpbmcgdGhlIHBvc2l0aW9uIHdoZXJlIHVzZXIgd2hlcmUuXG59XG5cbmZ1bmN0aW9uIHdhc2hOb2RlKG5vZGU6IE5vZGUgfCBFbGVtZW50IHwgSFRNTEVsZW1lbnQpOiBib29sZWFuIHtcbiAgbGV0IG1vZGlmaWVkID0gZmFsc2U7XG4gIGlmIChpc0VsZW1lbnQobm9kZSkpIHtcbiAgICBpZiAod2FzaEVsZW1lbnQobm9kZSkpIHtcbiAgICAgIG1vZGlmaWVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgaWYgKHdhc2hDaGlsZE5vZGVzKG5vZGUpKSB7XG4gICAgbW9kaWZpZWQgPSB0cnVlO1xuICB9XG4gIHJldHVybiBtb2RpZmllZDtcbn1cblxuZnVuY3Rpb24gd2FzaENoaWxkTm9kZXMobm9kZTogTm9kZSkge1xuICBsZXQgbW9kaWZpZWQgPSBmYWxzZTtcbiAgY29uc3Qge2NoaWxkTm9kZXN9ID0gbm9kZTtcbiAgZm9yIChsZXQgaT0wOyBpPGNoaWxkTm9kZXMubGVuZ3RoOyArK2kpIHtcbiAgICBpZiAod2FzaE5vZGUoY2hpbGROb2Rlcy5pdGVtKGkpKSkge1xuICAgICAgbW9kaWZpZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbW9kaWZpZWQ7XG59IFxuXG4vKiogUmVwbGFjZSBhbiBlbGVtZW50IHdpdGggaXRzIGNoaWxkIG5vZGVzLlxuICogXG4gKi9cbmZ1bmN0aW9uIHJlbW92ZU1pZGRsZUVsZW1lbnQoZWxlbWVudDogRWxlbWVudCkge1xuICBjb25zdCB7Y2hpbGROb2Rlc30gPSBlbGVtZW50O1xuICBmb3IgKGxldCBpPTA7IGk8Y2hpbGROb2Rlcy5sZW5ndGg7ICsraSkge1xuICAgIGVsZW1lbnQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoY2hpbGROb2Rlcy5pdGVtKGkpLCBlbGVtZW50KTtcbiAgfVxuICBlbGVtZW50LnJlbW92ZSgpO1xufVxuXG5mdW5jdGlvbiB3YXNoRWxlbWVudChlbGVtZW50OiBFbGVtZW50KTogYm9vbGVhbiB7XG4gIGNvbnN0IHBvbGljeSA9IGVsZW1lbnQudGFnTmFtZSAmJiBIVE1MX1dBU0hfUE9MSUNZW2VsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpXTtcbiAgaWYgKCFwb2xpY3kpIHtcbiAgICBjb25zb2xlLndhcm4oXCJXeXNpd3lnOiBub3QgYWxsb3dlZCB0YWdcIiwgZWxlbWVudC50YWdOYW1lKTtcbiAgICB3YXNoQ2hpbGROb2RlcyhlbGVtZW50KTtcbiAgICByZW1vdmVNaWRkbGVFbGVtZW50KGVsZW1lbnQpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGxldCBtb2RpZmllZCA9IGZhbHNlO1xuICBmb3IgKGxldCBpPTA7IGk8ZWxlbWVudC5hdHRyaWJ1dGVzLmxlbmd0aDsgKytpKSB7XG4gICAgY29uc3QgYXR0ciA9IGVsZW1lbnQuYXR0cmlidXRlcy5pdGVtKGkpO1xuICAgIGNvbnN0IGFsbG93ZWQgPSBhdHRyLm5hbWUgJiYgISFwb2xpY3lbYXR0ci5uYW1lLnRvTG93ZXJDYXNlKCldO1xuICAgIGlmICghYWxsb3dlZCkge1xuICAgICAgbW9kaWZpZWQgPSB0cnVlO1xuICAgICAgY29uc29sZS53YXJuKFwiV3lzaXd5Zzogbm90IGFsbG93ZWQgYXR0cmlidXRlXCIsIGF0dHIubmFtZSwgXCJUYWc6IFwiLCBlbGVtZW50LnRhZ05hbWUpO1xuICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoYXR0ci5uYW1lKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG1vZGlmaWVkO1xufVxuXG5mdW5jdGlvbiBpc0VsZW1lbnQobm9kZTogTm9kZSkgOiBub2RlIGlzIEVsZW1lbnQge1xuICByZXR1cm4gISEobm9kZSBhcyBFbGVtZW50KS50YWdOYW1lO1xufVxuIiwiZXhwb3J0ICogZnJvbSAnLi93ZWVrLW5vdGVib29rJztcbmV4cG9ydCAqIGZyb20gJy4vcm9vdC13ZWVrLW5vdGVib29rJztcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IEluamVjdGVkSW50bFByb3BzIH0gZnJvbSAncmVhY3QtaW50bCc7XG5pbXBvcnQgeyBMYW5ndWFnZUNvbnRleHQgfSBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvTGFuZ3VhZ2VDb250ZXh0JztcbmltcG9ydCB7IFdlZWtOb3RlYm9vayB9IGZyb20gJy4nO1xuXG5leHBvcnQgZnVuY3Rpb24gUm9vdFdlZWtOb3RlYm9vayAocHJvcHMgOiBJbmplY3RlZEludGxQcm9wcykge1xuICAgIGNvbnN0IHtpbnRsfSA9IHByb3BzO1xuICAgIHJldHVybiA8TGFuZ3VhZ2VDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXt7aW50bH19PlxuICAgICAgICAgICAgICA8V2Vla05vdGVib29rIC8+XG4gICAgICAgICAgIDwvTGFuZ3VhZ2VDb250ZXh0LlByb3ZpZGVyPjtcbiAgfSIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB3ZWVrTm90ZXNSZXBvIH0gZnJvbSAnLi4vLi4vcmVwb3Mvd2Vlay1ub3Rlcy1yZXBvJztcbmltcG9ydCB7IFdlZWtOb3RlIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xuaW1wb3J0IHsgUGVuZGluZ0pvYiB9IGZyb20gJy4uLy4uL3V0aWxzL3BlbmRpbmctam9iJztcbmltcG9ydCB7IGNyZWF0ZVVVSUQsIERvY3VtZW50QWNjZXNzIH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnQnO1xuaW1wb3J0IGVudiBmcm9tICcuLi8uLi9nbG9iYWxzL0tFRC5lbnYnO1xuaW1wb3J0IHsgV3lzaXd5ZyB9IGZyb20gJy4uL3V0aWxpdHktY29tcG9uZW50cy93eXNpd3lnJztcbmltcG9ydCBhY3Rpb25zX3N3ZWRpc2ggZnJvbSAnLi4vdXRpbGl0eS1jb21wb25lbnRzL3d5c2l3eWcvYWN0aW9ucy1zdic7XG5pbXBvcnQgYWN0aW9uc19lbiBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvd3lzaXd5Zy9hY3Rpb25zJztcbmltcG9ydCB7IFNwaW5uZXIgfSBmcm9tICcuLi9jb3Vyc2UtYnVpbGRlci9zdWItY29tcG9uZW50cy9zcGlubmVyJztcbmltcG9ydCB7IGlmVGFrZXNUaW1lIH0gZnJvbSAnLi4vLi4vdXRpbHMvaWYtdGFrZXMtdGltZSc7XG5pbXBvcnQgeyBJbmplY3RlZEludGwsIEZvcm1hdHRlZE1lc3NhZ2UgfSBmcm9tICdyZWFjdC1pbnRsJztcbmltcG9ydCB7IExhbmd1YWdlQ29udGV4dCB9IGZyb20gJy4uL3V0aWxpdHktY29tcG9uZW50cy9MYW5ndWFnZUNvbnRleHQnO1xuXG5jb25zdCBNQVhfTk9URV9MRU5HVEggPSAxNjM4NDtcblxuXG5pbnRlcmZhY2UgUHJvcHMge1xufVxuXG5pbnRlcmZhY2UgU3RhdGUge1xuICB3ZWVrTm90ZT86IFdlZWtOb3RlO1xuICBub3Rlczogc3RyaW5nO1xuICAvL3dlZWs6IG51bWJlcjtcbiAgaXNMb2FkaW5nOiBib29sZWFuO1xuICBzaG93TG9hZGluZ1Byb2dyZXNzOiBib29sZWFuO1xuICBzaG93U2F2aW5nUHJvZ3Jlc3M6IGJvb2xlYW47XG4gIGV2ZXJFZGl0ZWQ6IGJvb2xlYW47XG4gIGVycm9yPzogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3MgV2Vla05vdGVib29rIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLCBTdGF0ZT4ge1xuICBhdXRvU2F2ZXI6IFBlbmRpbmdKb2I7XG4gIHRpbWVvdXRIYW5kbGU6IGFueTtcbiAgc3RhdGljIGNvbnRleHRUeXBlID0gTGFuZ3VhZ2VDb250ZXh0O1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLm9uQ2hhbmdlID0gdGhpcy5vbkNoYW5nZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuYXV0b1NhdmVyID0gbmV3IFBlbmRpbmdKb2IoKCk9PnRoaXMuc2F2ZSgpKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgaXNMb2FkaW5nOiB0cnVlLFxuICAgICAgc2hvd0xvYWRpbmdQcm9ncmVzczogZmFsc2UsXG4gICAgICBzaG93U2F2aW5nUHJvZ3Jlc3M6IGZhbHNlLFxuICAgICAgZXZlckVkaXRlZDogZmFsc2UsXG4gICAgICBub3RlczogXCJcIixcbiAgICAgIC8vd2VlazogbW9tZW50KCkud2VlaygpXG4gICAgfVxuICB9XG4gIFxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLnNob3dQcm9ncmVzc0lmTG9hZGluZ1Rha2VzVGltZSgpO1xuICAgIHdlZWtOb3Rlc1JlcG8ubWVtLnN1YnNjcmliZSh0aGlzLm9uQ2hhbmdlKTtcbiAgfVxuXG4gIHByaXZhdGUgc2hvd1Byb2dyZXNzSWZMb2FkaW5nVGFrZXNUaW1lKCkge1xuICAgIHRoaXMudGltZW91dEhhbmRsZSA9IHNldFRpbWVvdXQoKCk9PnRoaXMuc3RhdGUuaXNMb2FkaW5nICYmIHRoaXMuc2V0U3RhdGUoe3Nob3dMb2FkaW5nUHJvZ3Jlc3M6IHRydWV9KSwgMzAwKTsgICAgXG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICB3ZWVrTm90ZXNSZXBvLm1lbS51bnN1YnNjcmliZSh0aGlzLm9uQ2hhbmdlKTtcbiAgICB0aGlzLmF1dG9TYXZlci5zdG9wKCk7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dEhhbmRsZSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIF9zYXZlKCkge1xuICAgIGZvciAobGV0IG1heEl0ZXJhdGlvbnM9MzsgdGhpcy5pc05vdGVzRWRpdGVkKCkgJiYgbWF4SXRlcmF0aW9uczsgLS1tYXhJdGVyYXRpb25zKSB7XG4gICAgICBhd2FpdCB3ZWVrTm90ZXNSZXBvLnVwc2VydCh0aGlzLnN0YXRlLndlZWtOb3RlLCB3biA9PiB7XG4gICAgICAgIHduLmNvbnRlbnQgPSB0aGlzLnN0YXRlLm5vdGVzO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzYXZlKCkge1xuICAgIGlmICghdGhpcy5zdGF0ZS5zaG93U2F2aW5nUHJvZ3Jlc3MgJiYgIXRoaXMuc3RhdGUuaXNMb2FkaW5nICYmIHRoaXMuaXNOb3Rlc0VkaXRlZCgpKSB7XG4gICAgICBhd2FpdCB0aGlzLnNldFN0YXRlKHtlcnJvcjogdW5kZWZpbmVkfSk7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCBpZlRha2VzVGltZSgzMDAsICgpPT50aGlzLl9zYXZlKCksICgpPT50aGlzLnNldFN0YXRlKHtzaG93U2F2aW5nUHJvZ3Jlc3M6IHRydWV9KSk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICBhd2FpdCB0aGlzLnNldFN0YXRlKHtlcnJvcjogdGhpcy5jb250ZXh0LmludGwuZm9ybWF0TWVzc2FnZSh7aWQ6XCJjb21tb24uZXJyb3JTYXZpbmdEYXRhXCIsIGRlZmF1bHRNZXNzYWdlOiBcIkt1bmRlIGludGUgc3BhcmEuXCJ9KX0pO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgYXdhaXQgdGhpcy5zZXRTdGF0ZSh7c2hvd1NhdmluZ1Byb2dyZXNzOiBmYWxzZX0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlzTm90ZXNFZGl0ZWQoKSB7XG4gICAgY29uc3QgeyB3ZWVrTm90ZSwgbm90ZXMgfSA9IHRoaXMuc3RhdGU7XG4gICAgcmV0dXJuICEhd2Vla05vdGUgJiYgKG5vdGVzICE9PSB3ZWVrTm90ZS5jb250ZW50KTtcbiAgfSAgXG5cbiAgLy9JZiB0aGUgbm90ZWJvb2sgc2hvdWxkIGJlIHVzZWQgaW4gbXVsdGlwbGUgbW9kdWxlcywgbW92ZSB0aGlzIGZ1bmN0aW9ucyBpbnRvIGFuIHV0aWxpdHkgZmlsZVxuICBnZXRUcmFuc2xhdGVkQWN0aW9ucyhpbnRsOiBJbmplY3RlZEludGwpe1xuICAgIC8vYWN0aW9ucyBtaWdodCBoYXZlIGRpZmZlcmVudCBpY29ucyBmb3IgZWFjaCBsYW5ndWFnZVxuICAgIC8vd2Uga2VlcCB0aGUgc2FtZSBzdHJ1Y3R1cmUgb2YgdGhlIGFjdGlvbnMsIGJ1dCB3ZSByZXBsYWNlIHRoZSB0ZXh0cyB3aXRoIHRoZSBvbmVzIGZyb20gdGhlIHRyYW5zbGF0ZWQgZmlsZXNcbiAgICB2YXIgbG9jYWxlQWN0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIGludGwubG9jYWxlID09PSBcInN2XCIgPyBhY3Rpb25zX3N3ZWRpc2ggOiBhY3Rpb25zX2VuKTtcbiAgICBPYmplY3Qua2V5cyhsb2NhbGVBY3Rpb25zKS5mb3JFYWNoKGVsZW0gPT4ge1xuICAgICAgY29uc3QgY3VycmVudFRpdGxlID0gYWN0aW9uc19zd2VkaXNoW2VsZW1dLnRpdGxlO1xuICAgICAgbG9jYWxlQWN0aW9uc1tlbGVtXS50aXRsZSA9IGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6YHd5c2l3eWcuJHtlbGVtfWAsIGRlZmF1bHRNZXNzYWdlOiBjdXJyZW50VGl0bGV9KTtcbiAgICAgIFxuICAgICAgLy9iZWNhdXNlIHRoZSBpbWFnZSBhY3Rpb24gbmVlZHMgYSBjdXN0b20gdHJhbnNsYXRpb24sIHdlIHRyZWF0IHRoaXMgc2VwYXJhdGVseVxuICAgICAgaWYoZWxlbSA9PT0gXCJpbWFnZVwiKXtcbiAgICAgICAgbG9jYWxlQWN0aW9uc1tlbGVtXS5wcm9tcHRNc2cgPSBpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOlwid3lzaXd5Zy5pbWFnZVByb21wdE1zZ1wiLCBkZWZhdWx0TWVzc2FnZTogYWN0aW9uc19zd2VkaXNoW2VsZW1dLnByb21wdE1zZ30pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBsb2NhbGVBY3Rpb25zO1xuICB9XG5cbiAgb25DaGFuZ2Uod2Vla05vdGVzOiBXZWVrTm90ZVtdKSB7XG4gICAgY29uc3Qgd2Vla05vdGUgPSB3ZWVrTm90ZXMubGVuZ3RoID4gMCA/XG4gICAgICB3ZWVrTm90ZXNbd2Vla05vdGVzLmxlbmd0aCAtIDFdIDpcbiAgICAgIHtcbiAgICAgICAgaWQ6IGNyZWF0ZVVVSUQoKSxcbiAgICAgICAgZGF0ZVRpbWU6IERhdGUubm93KCksXG4gICAgICAgIC8vZGF0ZVRpbWU6IHdlZWtOb3Rlc1JlcG8uZ2V0Q3VycmVudFdlZWsoKS50b0RhdGUoKS5nZXRUaW1lKCksXG4gICAgICAgIGNvbnRlbnQ6IFwiXCIsXG4gICAgICAgIGFjbDogW1xuICAgICAgICAgIC8vIERlZmF1bHQgQUNMOiBMZXQgdXNlciBzZWxmIGhhdmUgZnVsbCBjb250cm9sIG92ZXIgdGhpcyBpdGVtOlxuICAgICAgICAgIG5ldyBEb2N1bWVudEFjY2VzcyhcImVtYWlsXCIsIGVudi5jdXJyZW50VXNlci5tYWlsLCBcIlNcIilcbiAgICAgICAgXS5tYXAoYWMgPT4gYWMudG9TdHJpbmcoKSlcbiAgICAgIH07XG4gICAgXG4gICAgY29uc3QgbmV3U3RhdGU6IFBhcnRpYWw8U3RhdGU+ID0ge1xuICAgICAgd2Vla05vdGUsXG4gICAgICAvL3dlZWs6IHdlZWtOb3Rlc1JlcG8uZ2V0Q3VycmVudFdlZWsoKS53ZWVrKCksXG4gICAgICBpc0xvYWRpbmc6IGZhbHNlLFxuICAgICAgc2hvd0xvYWRpbmdQcm9ncmVzczogZmFsc2VcbiAgICB9O1xuXG4gICAgaWYgKCF0aGlzLnN0YXRlLndlZWtOb3RlIHx8IHRoaXMuc3RhdGUud2Vla05vdGUuaWQgIT09IHdlZWtOb3RlLmlkIHx8IHdlZWtOb3Rlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIG5ld1N0YXRlLm5vdGVzID0gd2Vla05vdGUuY29udGVudDtcbiAgICB9XG4gICAgdGhpcy5zZXRTdGF0ZShuZXdTdGF0ZSBhcyBTdGF0ZSk7XG4gIH1cblxuICAvKmFzeW5jIGNoYW5nZVdlZWsoZGlyZWN0aW9uOiBudW1iZXIpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGlzTG9hZGluZzogdHJ1ZSxcbiAgICAgICAgZXZlckVkaXRlZDogZmFsc2UsXG4gICAgICAgIHdlZWtOb3RlOiBudWxsLFxuICAgICAgICBlcnJvcjogdW5kZWZpbmVkXG4gICAgICB9KTtcbiAgICAgIHRoaXMuc2hvd1Byb2dyZXNzSWZMb2FkaW5nVGFrZXNUaW1lKCk7XG4gICAgICBhd2FpdCB3ZWVrTm90ZXNSZXBvLmNoYW5nZVdlZWsoZGlyZWN0aW9uKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgIGF3YWl0IHRoaXMuc2V0U3RhdGUoe2Vycm9yOiBcIkt1bmRlIGludGUgbGFkZGEgZGF0YVwifSk7XG4gICAgfSBcbiAgfVxuXG4gIHByZXZXZWVrKCkge1xuICAgIHRoaXMuY2hhbmdlV2VlaygtMSk7XG4gIH1cblxuICBuZXh0V2VlaygpIHtcbiAgICB0aGlzLmNoYW5nZVdlZWsoMSk7XG4gIH0qL1xuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7bm90ZXMsIHNob3dMb2FkaW5nUHJvZ3Jlc3MsIGlzTG9hZGluZywgc2hvd1NhdmluZ1Byb2dyZXNzLCBlcnJvciwgZXZlckVkaXRlZH0gPSB0aGlzLnN0YXRlO1xuXG4gICAgY29uc3Qge2ludGx9ID0gdGhpcy5jb250ZXh0O1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2PlxuICAgICAgICB7Lyo8ZGl2IGNsYXNzTmFtZT17YGtlZF9ib3hlZCBrZWROb3RlcGFkJHt3ZWVrTnVtYmVyID09PSBjdXJyZW50V2VlayA/IFwiIGN1cnJlbnRXZWVrXCIgOiBcIlwifWB9PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2B3ZWVrU2VsZWN0YH0+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW1cIj5cbiAgICAgICAgICAgICAgICA8cD57TGBWZWNrYSAke3dlZWtOdW1iZXJ9YH08L3A+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidG4tZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiYnRuXCIgb25DbGljaz17KCkgPT4gdGhpcy5wcmV2V2VlaygpfT5cbiAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtYW5nbGUtbGVmdFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cbiAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJidG5cIiBvbkNsaWNrPXsoKSA9PiB0aGlzLm5leHRXZWVrKCl9PlxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1hbmdsZS1yaWdodFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cbiAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAqL1xuICAgICAgICB9XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtga2VkX2JveGVkIGtlZE5vdGVwYWRgfT5cbiAgICAgICAgICA8aDM+PEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJ3ZWVrTm90ZWJvb2sudGl0bGVcIiBkZWZhdWx0TWVzc2FnZT1cIkFudGVja25pbmdhclwiLz48L2gzPlxuICAgICAgICAgIDxXeXNpd3lnXG4gICAgICAgICAgICBhY3Rpb25zPXtbXG4gICAgICAgICAgICAgIFwiYm9sZFwiLFxuICAgICAgICAgICAgICBcIml0YWxpY1wiLFxuICAgICAgICAgICAgICBcInVuZGVybGluZVwiLFxuICAgICAgICAgICAgICBcInN0cmlrZXRocm91Z2hcIixcbiAgICAgICAgICAgICAgXCJoZWFkaW5nMVwiLFxuICAgICAgICAgICAgICBcImhlYWRpbmcyXCIsXG4gICAgICAgICAgICAgIFwiaGVhZGluZzNcIixcbiAgICAgICAgICAgICAgXCJvbGlzdFwiLFxuICAgICAgICAgICAgICBcInVsaXN0XCIsXG4gICAgICAgICAgICAgIFwib3V0ZGVudFwiLFxuICAgICAgICAgICAgICBcImluZGVudFwiLFxuICAgICAgICAgICAgICBcImxpbmVcIl19XG4gICAgICAgICAgICBkZWZhdWx0QWN0aW9ucz17dGhpcy5nZXRUcmFuc2xhdGVkQWN0aW9ucyhpbnRsKX1cbiAgICAgICAgICAgIGh0bWw9e2lzTG9hZGluZyA/IFwiPGRpdj48L2Rpdj5cIiA6IG5vdGVzLnN1YnN0cigwLCBNQVhfTk9URV9MRU5HVEgpfVxuICAgICAgICAgICAgb25DaGFuZ2U9eyFpc0xvYWRpbmcgJiYgKGh0bWwgPT4ge1xuICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBub3RlczogaHRtbC5zdWJzdHIoMCwgTUFYX05PVEVfTEVOR1RIKSxcbiAgICAgICAgICAgICAgICBldmVyRWRpdGVkOiB0cnVlXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB0aGlzLmF1dG9TYXZlci50cmlnZ2VyQ2hhbmdlKDUwMCk7XG4gICAgICAgICAgICB9KX1cbiAgICAgICAgICAvPlxuICAgICAgICAgIDxoci8+XG4gICAgICAgICAge2Vycm9yID9cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImVycm9yXCI+e2Vycm9yfTwvcD4gOlxuICAgICAgICAgICAgc2hvd0xvYWRpbmdQcm9ncmVzcyA/XG4gICAgICAgICAgICAgIDxzcGFuPjxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwiY29tbW9uLmxvYWRpbmdcIiBkZWZhdWx0TWVzc2FnZT1cIkxhZGRhci4uLlwiLz48U3Bpbm5lciAvPjwvc3Bhbj4gOlxuICAgICAgICAgICAgICBzaG93U2F2aW5nUHJvZ3Jlc3MgPyA8PlxuICAgICAgICAgICAgICAgIDxzcGFuPjxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwiY29tbW9uLnNhdmluZ1wiIGRlZmF1bHRNZXNzYWdlPVwiU3BhcmFyLi4uXCIvPiAmbmJzcDsgPC9zcGFuPlxuICAgICAgICAgICAgICAgIDxTcGlubmVyIC8+XG4gICAgICAgICAgICAgIDwvPiA6XG4gICAgICAgICAgICAgIHRoaXMuaXNOb3Rlc0VkaXRlZCgpID8gXG4gICAgICAgICAgICAgICAgPD4mbmJzcDs8Lz4gOlxuICAgICAgICAgICAgICAgICAgZXZlckVkaXRlZCA/XG4gICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZSBpZD1cImNvbW1vbi5zYXZlZFwiIGRlZmF1bHRNZXNzYWdlPVwiU3BhcmFkXCIvPiA6XG4gICAgICAgICAgICAgICAgICAgIDw+Jm5ic3A7PC8+fVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn0iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQge0Zvcm1hdHRlZE1lc3NhZ2V9IGZyb20gJ3JlYWN0LWludGwnO1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBsZWFybmluZ0dvYWw/OiBzdHJpbmc7XG4gIG9uU2F2ZTogKGxlYXJuaW5nR29hbDogc3RyaW5nKSA9PiB2b2lkO1xufVxuXG5pbnRlcmZhY2UgU3RhdGUge1xuICBsZWFybmluZ0dvYWw6IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIEFkZEN1c3RvbUdvYWwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsU3RhdGU+IHtcbiAgY29uc3RydWN0b3IgKHByb3BzOiBQcm9wcykge1xuICAgIHN1cGVyKHByb3BzKVxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBsZWFybmluZ0dvYWw6IHByb3BzLmxlYXJuaW5nR29hbCB8fCAnJ1xuICAgIH1cbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7bGVhcm5pbmdHb2FsfSA9IHRoaXMuc3RhdGU7XG4gICAgY29uc3Qge29uU2F2ZX0gPSB0aGlzLnByb3BzO1xuICAgIHJldHVybiA8ZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdi1odG1sLXBvcnRsZXQgc3YtcG9ydGxldCBzdi1za2lwLXNwYWNlclwiPlxuICAgICAgICAgIDxoMj48Rm9ybWF0dGVkTWVzc2FnZSBpZD1cIndlZWtwbGFubmVyLmFkZExlYXJuaW5nR29hbFRpdGxlXCIgZGVmYXVsdE1lc3NhZ2U9XCJMw6RnZyB0aWxsIGVnZXQgbMOkcmFuZGVtw6VsXCIvPjwvaDI+XG4gICAgICAgICAgPGhyIC8+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxuICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJ3ZWVrcGxhbm5lci5hZGRMZWFybmluZ0dvYWxcIiBkZWZhdWx0TWVzc2FnZT1cIk3DpWxcIi8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XG4gICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIHRhYkluZGV4PXsxfSBzaXplPXs1MH0gYXV0b0ZvY3VzXG4gICAgICAgICAgICAgICAgdmFsdWU9e2xlYXJuaW5nR29hbH1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17ZSA9PiB0aGlzLnNldFN0YXRlKHtsZWFybmluZ0dvYWw6IGUudGFyZ2V0LnZhbHVlfSl9IC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wIHNwYWNlZFwiIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGJyIC8+PC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInN2LWh0bWwtcG9ydGxldCBzdi1wb3J0bGV0XCI+XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICB0YWJJbmRleD17MX1cbiAgICAgICAgICBjbGFzc05hbWU9XCJidG4gYnRuLWxhcmdlIGJ0bi1kZWZhdWx0XCJcbiAgICAgICAgICBvbkNsaWNrPXsoKT0+b25TYXZlKGxlYXJuaW5nR29hbCl9PjxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwiY29tbW9uLnNhdmVcIiBkZWZhdWx0TWVzc2FnZT1cInNhdmVcIi8+PC9idXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgfVxufVxuXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBUZXh0SW5wdXQgfSBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvZm9ybS1maWVsZC10ZXh0LWlucHV0JztcbmltcG9ydCB7IFRleHRBcmVhRm9ybUZpZWxkIH0gZnJvbSAnLi4vdXRpbGl0eS1jb21wb25lbnRzL2Zvcm0tZmllbGQtdGV4dGFyZWEnO1xuaW1wb3J0IHtMYW5ndWFnZUNvbnRleHR9IGZyb20gJy4uL3V0aWxpdHktY29tcG9uZW50cy9MYW5ndWFnZUNvbnRleHQnO1xuaW1wb3J0IHtGb3JtYXR0ZWRNZXNzYWdlfSBmcm9tICdyZWFjdC1pbnRsJztcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgaXNUYXNrOiBib29sZWFuXG4gIG9uU2F2ZTogKG5hbWU6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZywgdXJsOiBzdHJpbmcpID0+IHZvaWQ7XG59XG5cbmludGVyZmFjZSBTdGF0ZSB7XG4gIG5hbWU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgdXJsOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBBZGRDdXN0b21UYXNrIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLFN0YXRlPiB7XG4gIHN0YXRpYyBjb250ZXh0VHlwZSA9IExhbmd1YWdlQ29udGV4dDtcbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIG5hbWU6ICcnLFxuICAgICAgZGVzY3JpcHRpb246ICcnLFxuICAgICAgdXJsOiAnJ1xuICAgIH1cbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IG5hbWUsIGRlc2NyaXB0aW9uLCB1cmwgfSA9IHRoaXMuc3RhdGU7XG4gICAgY29uc3QgeyBpc1Rhc2ssIG9uU2F2ZSB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCB7aW50bH0gPSB0aGlzLmNvbnRleHQ7XG4gICAgcmV0dXJuIDxkaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInN2LWh0bWwtcG9ydGxldCBzdi1wb3J0bGV0IHN2LXNraXAtc3BhY2VyXCI+XG4gICAgICAgIDxoMj48Rm9ybWF0dGVkTWVzc2FnZSBpZD1cImN1c3RvbVRhc2suYWRkV29ya0dvYWxUaXRsZVwiIGRlZmF1bHRNZXNzYWdlPVwiTMOkZ2cgdGlsbCBlZ2V0IGFyYmV0c23DpWxcIi8+PC9oMj5cbiAgICAgICAgPGhyIC8+XG4gICAgICAgIDxUZXh0SW5wdXRcbiAgICAgICAgICBsYWJlbD17aW50bC5mb3JtYXRNZXNzYWdlKHtpZDonY29tbW9uLm5hbWVMYWJlbCcsIGRlZmF1bHRNZXNzYWdlOiAnTmFtbid9KX1cbiAgICAgICAgICBpZD1cIkFkZEN1c3RvbVRhc2s6bmFtZVwiXG4gICAgICAgICAgcGxhY2Vob2xkZXI9e2ludGwuZm9ybWF0TWVzc2FnZSh7aWQ6J2N1c3RvbVRhc2suZW50ZXJOYW1lUGxoZCcsIGRlZmF1bHRNZXNzYWdlOiAnQW5nZSBuYW1uLi4uJ30pfVxuICAgICAgICAgIHZhbHVlPXtuYW1lfVxuICAgICAgICAgIGF1dG9Gb2N1c1xuICAgICAgICAgIG9uQ2hhbmdlPXtuYW1lID0+IHRoaXMuc2V0U3RhdGUoe25hbWV9KX0gLz5cblxuICAgICAgICA8VGV4dEFyZWFGb3JtRmllbGRcbiAgICAgICAgICByb3dzPXs3fVxuICAgICAgICAgIGxhYmVsPSB7aW50bC5mb3JtYXRNZXNzYWdlKHtpZDonY29tbW9uLmRlc2NyaXB0aW9uTGFiZWwnLCBkZWZhdWx0TWVzc2FnZTonQmVza3Jpdm5pbmcnfSl9XG4gICAgICAgICAgaWQ9XCJBZGRDdXN0b21UYXNrOmRlc2NyaXB0aW9uXCJcbiAgICAgICAgICBwbGFjZWhvbGRlcj17aW50bC5mb3JtYXRNZXNzYWdlKHtpZDonY29tbW9uLmFkZERlc2NyaXB0aW9uUGxoZCcsIGRlZmF1bHRNZXNzYWdlOiBcIkzDpGdnIHRpbGwgZW4gYmVza3Jpdm5pbmcuLi5cIn0pfVxuICAgICAgICAgIHZhbHVlPXtkZXNjcmlwdGlvbn1cbiAgICAgICAgICBvbkNoYW5nZT17ZGVzY3JpcHRpb249PnRoaXMuc2V0U3RhdGUoe2Rlc2NyaXB0aW9ufSl9IC8+XG5cbiAgICAgICAgPFRleHRJbnB1dFxuICAgICAgICAgIGxhYmVsPSB7aW50bC5mb3JtYXRNZXNzYWdlKHtpZDonY29tbW9uLmxpbmtMYWJlbCcsIGRlZmF1bHRNZXNzYWdlOidMw6Ruayd9KX0gXG4gICAgICAgICAgaWQ9XCJBZGRDdXN0b21UYXNrOnVybFwiXG4gICAgICAgICAgcGxhY2Vob2xkZXI9XCJodHRwOi8vd3d3Li4uXCJcbiAgICAgICAgICB2YWx1ZT17dXJsfVxuICAgICAgICAgIG9uQ2hhbmdlPXt1cmwgPT4gdGhpcy5zZXRTdGF0ZSh7dXJsfSl9IC8+XG5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdi1odG1sLXBvcnRsZXQgc3YtcG9ydGxldFwiPlxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgdGFiSW5kZXg9ezF9XG4gICAgICAgICAgY2xhc3NOYW1lPVwiYnRuIGJ0bi1sYXJnZSBidG4tZGVmYXVsdFwiXG4gICAgICAgICAgb25DbGljaz17KCkgPT4gb25TYXZlKG5hbWUsIGRlc2NyaXB0aW9uLCB1cmwpfT48Rm9ybWF0dGVkTWVzc2FnZSBpZD1cImNvbW1vbi5zYXZlXCIgZGVmYXVsdE1lc3NhZ2U9XCJTcGFyYVwiLz48L2J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICB9XG59XG5cbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFRleHRJbnB1dCB9IGZyb20gJy4uL3V0aWxpdHktY29tcG9uZW50cy9mb3JtLWZpZWxkLXRleHQtaW5wdXQnO1xuaW1wb3J0IHsgVGV4dEFyZWFGb3JtRmllbGQgfSBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvZm9ybS1maWVsZC10ZXh0YXJlYSc7XG5pbXBvcnQgeyBVc2VyVGFzaywgVXNlclN1YlRhc2sgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XG5pbXBvcnQgeyBjcmVhdGVVVUlEIH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnQnO1xuaW1wb3J0IHsgVXNlclRhc2tzUmVwbyB9IGZyb20gJy4uLy4uL3JlcG9zL3VzZXItdGFza3MtcmVwbyc7XG5pbXBvcnQge0Zvcm1hdHRlZE1lc3NhZ2V9IGZyb20gJ3JlYWN0LWludGwnO1xuaW1wb3J0IHtMYW5ndWFnZUNvbnRleHR9IGZyb20gJy4uL3V0aWxpdHktY29tcG9uZW50cy9MYW5ndWFnZUNvbnRleHQnO1xuXG50eXBlIFByb3BzID0ge1xuICAvLyBFZGl0IE1vZGVcbiAgbW9kZTogJ2FkZCc7XG4gIHVzZXJUYXNrOiBVc2VyVGFzaztcbiAgY2xvc2VEaWFsb2c7XG4gIHVzZXJUYXNrc1JlcG86IFVzZXJUYXNrc1JlcG9cbn0gfCB7XG4gIG1vZGU6ICdlZGl0JztcbiAgdXNlclRhc2s6IFVzZXJUYXNrO1xuICBzdWJUYXNrOiBVc2VyU3ViVGFzaztcbiAgY2xvc2VEaWFsb2c6ICgpPT52b2lkO1xuICB1c2VyVGFza3NSZXBvOiBVc2VyVGFza3NSZXBvXG59XG5cbmludGVyZmFjZSBTdGF0ZSB7XG4gIG5hbWU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgdXJsOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBBZGRPckVkaXRTdWJUYXNrIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLFN0YXRlPiB7XG4gIHN0YXRpYyBjb250ZXh0VHlwZSA9IExhbmd1YWdlQ29udGV4dDtcbiAgY29uc3RydWN0b3IgKHByb3BzOiBQcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICBpZiAocHJvcHMubW9kZSA9PT0gJ2VkaXQnKSB7XG4gICAgICBjb25zdCB7c3ViVGFza30gPSBwcm9wcztcbiAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgIG5hbWU6IHN1YlRhc2submFtZSB8fCAnJyxcbiAgICAgICAgZGVzY3JpcHRpb246IHN1YlRhc2suZGVzY3JpcHRpb24gfHwgJycsXG4gICAgICAgIHVybDogc3ViVGFzay51cmwgfHwgJydcbiAgICAgIH07XG4gICAgfSBlbHNlIHsgIFxuICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgbmFtZTogJycsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnJyxcbiAgICAgICAgdXJsOiAnJ1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBzYXZlKCkge1xuICAgIC8vIFVwZGF0ZSByZXBvOlxuICAgIGNvbnN0IHtwcm9wc30gPSB0aGlzO1xuICAgIGNvbnN0IHt1c2VyVGFzaywgY2xvc2VEaWFsb2csIHVzZXJUYXNrc1JlcG99ID0gcHJvcHM7XG4gICAgY29uc3Qge25hbWUsIGRlc2NyaXB0aW9uLCB1cmx9ID0gdGhpcy5zdGF0ZTtcbiAgICBpZiAocHJvcHMubW9kZSA9PT0gJ2VkaXQnKSB7XG4gICAgICAvLyBFZGl0IGV4aXN0aW5nOlxuICAgICAgdXNlclRhc2tzUmVwby51cGRhdGUoW3VzZXJUYXNrXSwgdXQgPT4ge1xuICAgICAgICBjb25zdCB7c3ViVGFza3N9ID0gdXQ7XG4gICAgICAgIGlmIChzdWJUYXNrcykge1xuICAgICAgICAgIHV0LnN1YlRhc2tzID0gc3ViVGFza3MubWFwKHN0ID0+XG4gICAgICAgICAgICBzdC5pZCA9PT0gcHJvcHMuc3ViVGFzay5pZCA/IHsuLi5zdCwgbmFtZSwgZGVzY3JpcHRpb24sIHVybH0gOlxuICAgICAgICAgICAgey4uLnN0fVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBDcmVhdGUgbmV3IHRhc2tcbiAgICAgIGNvbnN0IG5ld1N1YlRhc2sgPSB7XG4gICAgICAgIGlkOiBjcmVhdGVVVUlEKCksXG4gICAgICAgIG5hbWUsXG4gICAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgICB1cmxcbiAgICAgIH07XG5cbiAgICAgIC8vIFVwZGF0ZSByZXBvOlxuICAgICAgdXNlclRhc2tzUmVwby51cGRhdGUoW3VzZXJUYXNrXSwgdXQgPT4ge1xuICAgICAgICBpZiAoIXV0LnN1YlRhc2tzKSB7XG4gICAgICAgICAgdXQuc3ViVGFza3MgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICB1dC5zdWJUYXNrcyA9IHV0LnN1YlRhc2tzLmNvbmNhdChuZXdTdWJUYXNrKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIENsb3NlIGRpYWxvZ1xuICAgIGNsb3NlRGlhbG9nKCk7ICAgIFxuICB9XG5cbiAgZGVsZXRlKCkge1xuICAgIC8vIFVwZGF0ZSByZXBvOlxuICAgIGNvbnN0IHByb3BzID0gdGhpcy5wcm9wczsgIFxuICAgIGlmIChwcm9wcy5tb2RlICE9PSAnZWRpdCcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbiBvbmx5IGRlbGV0ZSBpbiBlZGl0IG1vZGVcIik7XG4gICAgfVxuICAgIHByb3BzLnVzZXJUYXNrc1JlcG8udXBkYXRlKFtwcm9wcy51c2VyVGFza10sIHV0ID0+IHtcbiAgICAgIGlmICh1dC5zdWJUYXNrcykge1xuICAgICAgICB1dC5zdWJUYXNrcyA9IHV0LnN1YlRhc2tzLmZpbHRlcih0ID0+IHQuaWQgIT09IHByb3BzLnN1YlRhc2suaWQpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gQ2xvc2UgZGlhbG9nOlxuICAgIHByb3BzLmNsb3NlRGlhbG9nKCk7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3Qge25hbWUsIGRlc2NyaXB0aW9uLCB1cmx9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCB7cHJvcHN9ID0gdGhpcztcbiAgICBjb25zdCBpc0VkaXRNb2RlID0gcHJvcHMubW9kZSA9PT0gJ2VkaXQnO1xuICAgIGNvbnN0IHtpbnRsfSA9IHRoaXMuY29udGV4dDtcbiAgICByZXR1cm4gPD5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3YtaHRtbC1wb3J0bGV0IHN2LXBvcnRsZXQgc3Ytc2tpcC1zcGFjZXJcIj5cbiAgICAgICAgPGgyPntpc0VkaXRNb2RlID8gPEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJhZGRlZGl0c3VidGFzay5lZGl0U3VidGFza1wiIGRlZmF1bHRNZXNzYWdlPSdSZWRpZ2VyYSB1bmRlcnVwcGdpZnQnLz4gOiA8Rm9ybWF0dGVkTWVzc2FnZSBpZD1cImFkZGVkaXRzdWJ0YXNrLmFkZFN1YnRhc2tcIiBkZWZhdWx0TWVzc2FnZT0nTMOkZ2cgdGlsbCB1bmRlcnVwcGdpZnQnLz4gfTwvaDI+XG4gICAgICAgIDxociAvPlxuICAgICAgICA8VGV4dElucHV0XG4gICAgICAgICAgYXV0b0ZvY3VzXG4gICAgICAgICAgbGFiZWw9IHtpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOidhZGRlZGl0c3VidGFzay5uYW1lTGFiZWwnLCBkZWZhdWx0TWVzc2FnZTonVW5kZXJ1cHBnaWZ0ZW5zIG5hbW4nfSl9XG4gICAgICAgICAgaWQ9XCJBZGRVc2VyU3ViVGFzazpuYW1lXCJcbiAgICAgICAgICBwbGFjZWhvbGRlcj1cIlwiXG4gICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUubmFtZX1cbiAgICAgICAgICBvbkNoYW5nZT17bmFtZSA9PiB0aGlzLnNldFN0YXRlKHtuYW1lfSl9XG4gICAgICAgICAgICAvPlxuICAgICAgICA8VGV4dEFyZWFGb3JtRmllbGRcbiAgICAgICAgICBsYWJlbD0ge2ludGwuZm9ybWF0TWVzc2FnZSh7aWQ6J2NvbW1vbi5kZXNjcmlwdGlvbkxhYmVsJywgZGVmYXVsdE1lc3NhZ2U6J0Jlc2tyaXZuaW5nJ30pfVxuICAgICAgICAgIGlkPVwiQWRkVXNlclN1YlRhc2s6ZGVzY3JpcHRpb25cIlxuICAgICAgICAgIHJvd3M9ezd9XG4gICAgICAgICAgcGxhY2Vob2xkZXI9XCJcIlxuICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLmRlc2NyaXB0aW9ufVxuICAgICAgICAgIG9uQ2hhbmdlPXtkZXNjcmlwdGlvbiA9PiB0aGlzLnNldFN0YXRlKHtkZXNjcmlwdGlvbn0pfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgPFRleHRJbnB1dFxuICAgICAgICAgIGxhYmVsPSB7aW50bC5mb3JtYXRNZXNzYWdlKHtpZDonY29tbW9uLmxpbmtMYWJlbCcsIGRlZmF1bHRNZXNzYWdlOidMw6Ruayd9KX1cbiAgICAgICAgICBpZD1cIkFkZFVzZXJTdWJUYXNrOnVybFwiXG4gICAgICAgICAgcGxhY2Vob2xkZXI9XCJcIlxuICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLnVybH1cbiAgICAgICAgICBvbkNoYW5nZT17dXJsID0+IHRoaXMuc2V0U3RhdGUoe3VybH0pfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgPGJyIC8+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3YtaHRtbC1wb3J0bGV0IHN2LXBvcnRsZXRcIj5cbiAgICAgICAge1xuICAgICAgICAgIHByb3BzLm1vZGUgPT09ICdlZGl0JyAmJiA8YnV0dG9uIGNsYXNzTmFtZT1cImJ0biBidG4td2FybmluZyBidG4tbGFyZ2UgcHVsbC1yaWdodFwiXG4gICAgICAgICAgb25DbGljaz17ZXYgPT4gdGhpcy5kZWxldGUoKX0+XG4gICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJhZGRlZGl0c3VidGFzay5kZWxldGVTdWJ0YXNrXCIgZGVmYXVsdE1lc3NhZ2U9XCJUYSBib3J0IHVuZGVydXBwZ2lmdFwiLz48L2J1dHRvbj59XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICB0YWJJbmRleD17MX1cbiAgICAgICAgICBjbGFzc05hbWU9XCJidG4gYnRuLWxhcmdlIGJ0bi1kZWZhdWx0XCJcbiAgICAgICAgICBvbkNsaWNrPXsoKT0+dGhpcy5zYXZlKCl9PjxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwiY29tbW9uLnNhdmVcIiBkZWZhdWx0TWVzc2FnZT1cIlNwYXJhXCIvPjwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgPC8+XG4gIH1cbn1cblxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgVXNlclRhc2ssIFVzZXJTdWJUYXNrIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xuaW1wb3J0IHsgUmVuYW1lYWJsZVRleHQgfSBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvcmVuYW1lYWJsZS10ZXh0JztcbmltcG9ydCB7IEwgfSBmcm9tICcuLi8uLi91dGlscy91dGlscyc7XG5pbXBvcnQgeyBnZXRUYXNrVHlwZSB9IGZyb20gJy4vZ2V0LXRhc2stdHlwZSc7XG5pbXBvcnQgUmVhY3REYXRlUGlja2VyLCB7IFJlYWN0RGF0ZVBpY2tlclByb3BzIH0gZnJvbSAncmVhY3QtZGF0ZXBpY2tlcic7XG5pbXBvcnQgJy4uLy4uL2dsb2JhbHMvbW9tZW50LXN2LWxvY2FsZSc7XG5pbXBvcnQge1RleHRJbnB1dH0gZnJvbSAnLi4vdXRpbGl0eS1jb21wb25lbnRzL2Zvcm0tZmllbGQtdGV4dC1pbnB1dCc7XG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XG5pbXBvcnQgeyBGb3JtRmllbGQgfSBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvZm9ybS1maWVsZCc7XG5pbXBvcnQgeyBBZGRPckVkaXRTdWJUYXNrIH0gZnJvbSAnLi9hZGQtb3ItZWRpdC1zdWItdGFzayc7XG5pbXBvcnQgeyBjcmVhdGVVVUlEIH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnQnO1xuaW1wb3J0IHVwZGF0ZSBmcm9tICdyZWFjdC1hZGRvbnMtdXBkYXRlJztcbmltcG9ydCB7IFVzZXJUYXNrc1JlcG8gfSBmcm9tICcuLi8uLi9yZXBvcy91c2VyLXRhc2tzLXJlcG8nO1xuaW1wb3J0IHsgVGV4dEFyZWFGb3JtRmllbGQgfSBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvZm9ybS1maWVsZC10ZXh0YXJlYSc7XG5pbXBvcnQgeyBGb3JtYXR0ZWRNZXNzYWdlIH0gZnJvbSAncmVhY3QtaW50bCc7XG5pbXBvcnQge0xhbmd1YWdlQ29udGV4dH0gZnJvbSBcIi4uL3V0aWxpdHktY29tcG9uZW50cy9MYW5ndWFnZUNvbnRleHRcIlxuXG5pbnRlcmZhY2UgUHJvcHMge1xuICB1c2VyVGFzazogVXNlclRhc2s7XG4gIG9uVXBkYXRlOiAodXBkYXRlcjogKHVzZXJUYXNrOiBVc2VyVGFzaykgPT4gdm9pZCkgPT4gdm9pZDtcbiAgb25EZWxldGU6ICh1c2VyVGFza0lkOiBzdHJpbmcpID0+IHZvaWQ7XG4gIG9wZW5EaWFsb2c6IChkaWFsb2cpID0+IHZvaWQ7XG4gIGNsb3NlRGlhbG9nOiAoKT0+dm9pZDtcbiAgdXNlclRhc2tzUmVwbzogVXNlclRhc2tzUmVwb1xufVxuXG5pbnRlcmZhY2UgU3RhdGUge1xuICB1c2VyVGFzazogVXNlclRhc2s7XG4gIG5hbWU6IHN0cmluZztcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gIGRlYWRsaW5lPzogc3RyaW5nO1xuICB1cmw6IHN0cmluZztcbiAgc3ViVGFza3M/OiBVc2VyU3ViVGFza1tdO1xuICBzaG93Q2FsZW5kYXI/OiBib29sZWFuO1xufVxuXG5leHBvcnQgY2xhc3MgRWRpdFVzZXJUYXNrIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLFN0YXRlPiB7XG4gIGRhdGVQaWNrZXI6IGFueTtcbiAgc3RhdGljIGNvbnRleHRUeXBlID0gTGFuZ3VhZ2VDb250ZXh0O1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgdXNlclRhc2s6IHByb3BzLnVzZXJUYXNrLFxuICAgICAgbmFtZTogcHJvcHMudXNlclRhc2submFtZSxcbiAgICAgIGRlc2NyaXB0aW9uOiBwcm9wcy51c2VyVGFzay5kZXNjcmlwdGlvbixcbiAgICAgIHVybDogcHJvcHMudXNlclRhc2sudXJsLFxuICAgICAgZGVhZGxpbmU6IHByb3BzLnVzZXJUYXNrLmRlYWRsaW5lLFxuICAgICAgc3ViVGFza3M6IHByb3BzLnVzZXJUYXNrLnN1YlRhc2tzXG4gICAgfVxuICAgIHRoaXMub25Vc2VyVGFza3NDaGFuZ2VkID0gdGhpcy5vblVzZXJUYXNrc0NoYW5nZWQuYmluZCh0aGlzKTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHRoaXMucHJvcHMudXNlclRhc2tzUmVwby5zdWJzY3JpYmUodGhpcy5vblVzZXJUYXNrc0NoYW5nZWQpO1xuICB9XG5cbiAgb25Vc2VyVGFza3NDaGFuZ2VkKHVzZXJUYXNrczogVXNlclRhc2tbXSkge1xuICAgIGNvbnN0IG15VXNlclRhc2sgPSB1c2VyVGFza3MuZmluZCh1dCA9PiB1dC5pZCA9PT0gdGhpcy5wcm9wcy51c2VyVGFzay5pZCk7XG4gICAgaWYgKCFteVVzZXJUYXNrKSB7XG4gICAgICB0aGlzLnByb3BzLmNsb3NlRGlhbG9nKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgdXNlclRhc2s6IG15VXNlclRhc2ssXG4gICAgICBzdWJUYXNrczogbXlVc2VyVGFzay5zdWJUYXNrc1xuICAgIH0pO1xuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgdGhpcy5wcm9wcy51c2VyVGFza3NSZXBvLnVuc3Vic2NyaWJlKHRoaXMub25Vc2VyVGFza3NDaGFuZ2VkKTtcbiAgfVxuXG4gIGlzTW9kaWZpZWQoKSB7XG4gICAgLy8gRG9uJ3QgY291bnQgc3VidGFzayBjaGFuZ2VzISBUaGV5IGxpdmUgdGhlaXIgb3duIGxpZmUgYW5kIGlzIG1haW50YWluZWRcbiAgICAvLyBpbiBhZGQtb3ItZWRpdC1zdWItdGFzay50c3guIFJlYXNvbjogVXNlciB3b3VsZCBleHBlY3QgYWRkZWQgL2VkaXRlZCBzdWJ0YXNrc1xuICAgIC8vIHRvIGJlIHBlcnNpc3RlZCByaWdodCBhd2F5LiBNYXkgY2xpY2sgYXdheSB0aGlzIGRpYWxvZy5cbiAgICAvLyBBbHNvIHJlYXNvbjogQ2FuIGludm9rZSB0aGF0IGRpYWxvZyBieSBpdHNlbGYgZnJvbSBvdGhlciBjb21wb25lbnRzLiBGcm9tIFdlZWtQbGFubmVyXG4gICAgLy8gd2hlbiBjbGlja2luZyB0aGUgc3VidGFzayBmb3IgZXhhbXBsZSFcblxuICAgIGNvbnN0IHtkZWFkbGluZSwgZGVzY3JpcHRpb24sIG5hbWUsIHVybCwgdXNlclRhc2t9ID0gdGhpcy5zdGF0ZTtcbiAgICByZXR1cm4gKFxuICAgICAgZGVhZGxpbmUgIT09IHVzZXJUYXNrLmRlYWRsaW5lIHx8XG4gICAgICBkZXNjcmlwdGlvbiAhPT0gdXNlclRhc2suZGVzY3JpcHRpb24gfHxcbiAgICAgIG5hbWUgIT09IHVzZXJUYXNrLm5hbWUgfHxcbiAgICAgIHVybCAhPT0gdXNlclRhc2sudXJsKTtcbiAgfVxuXG4gIGFkZFN1YlRhc2soKTogYW55IHtcbiAgICB0aGlzLnByb3BzLm9wZW5EaWFsb2coPEFkZE9yRWRpdFN1YlRhc2tcbiAgICAgIG1vZGU9XCJhZGRcIlxuICAgICAgdXNlclRhc2s9e3RoaXMuc3RhdGUudXNlclRhc2t9XG4gICAgICBjbG9zZURpYWxvZz17dGhpcy5wcm9wcy5jbG9zZURpYWxvZ31cbiAgICAgIHVzZXJUYXNrc1JlcG89e3RoaXMucHJvcHMudXNlclRhc2tzUmVwb31cbiAgICAvPik7XG4gIH1cblxuICBlZGl0U3ViVGFzayhzdWJUYXNrOiBVc2VyU3ViVGFzaykge1xuICAgIHRoaXMucHJvcHMub3BlbkRpYWxvZyg8QWRkT3JFZGl0U3ViVGFza1xuICAgICAgbW9kZT1cImVkaXRcIlxuICAgICAgc3ViVGFzaz17c3ViVGFza31cbiAgICAgIHVzZXJUYXNrPXt0aGlzLnN0YXRlLnVzZXJUYXNrfVxuICAgICAgY2xvc2VEaWFsb2c9e3RoaXMucHJvcHMuY2xvc2VEaWFsb2d9XG4gICAgICB1c2VyVGFza3NSZXBvPXt0aGlzLnByb3BzLnVzZXJUYXNrc1JlcG99XG4gICAgLz4pO1xuICB9XG4gIFxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBuYW1lLCBkZXNjcmlwdGlvbiwgdXJsLCBkZWFkbGluZSwgc3ViVGFza3MsIHNob3dDYWxlbmRhciwgdXNlclRhc2sgfSA9IHRoaXMuc3RhdGU7XG4gICAgY29uc3QgeyBpZCwgY291cnNlTmFtZSB9ID0gdXNlclRhc2s7XG4gICAgY29uc3QgeyBvblVwZGF0ZSwgb25EZWxldGUgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgaXNNb2RpZmllZCA9IHRoaXMuaXNNb2RpZmllZCgpO1xuXG4gICAgY29uc3QgdGFza1R5cGUgPSBnZXRUYXNrVHlwZSh1c2VyVGFzayk7XG4gICAgY29uc3QgaXNDdXN0b21UYXNrID0gdGFza1R5cGUgPT09ICdjdXN0b21UYXNrJztcbiAgICBjb25zdCBleHBpcmVkID0gbW9tZW50KHVzZXJUYXNrLmRlYWRsaW5lKSA8IG1vbWVudCgpO1xuICAgIGNvbnN0IHtpbnRsfSA9IHRoaXMuY29udGV4dDtcblxuICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cImVkaXRUYXNrRGlhbG9nIHN2LWh0bWwtcG9ydGxldCBzdi1wb3J0bGV0IHN2LXNraXAtc3BhY2VyXCI+XG4gICAgICA8aDI+e2lzQ3VzdG9tVGFzayA/IFxuICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZSBpZD1cInRhc2suZWRpdFdvcmtHb2Fsc1wiIGRlZmF1bHRNZXNzYWdlPSdSZWRpZ2VyYSBhcmJldHNtw6VsJy8+IDogXG4gICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwidGFzay5lZGl0VGFza1wiIGRlZmF1bHRNZXNzYWdlPSdSZWRpZ2VyYSB1cHBnaWZ0Jy8+fVxuICAgICAgPC9oMj5cbiAgICAgIDxociAvPlxuICAgICAgPFRleHRJbnB1dFxuICAgICAgICBhdXRvRm9jdXNcbiAgICAgICAgbGFiZWw9e2lzQ3VzdG9tVGFzayA/IGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6ICd0YXNrLnRhcmdldE5hbWVMYWJlbCcsIGRlZmF1bHRNZXNzYWdlOiAnQXJiZXRzbcOlbGV0cyBuYW1uJ30pICA6IGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6ICd0YXNrLnRhc2tOYW1lTGFiZWwnLCBkZWZhdWx0TWVzc2FnZTogJ1VwcGdpZnRlbnMgbmFtbid9KX1cbiAgICAgICAgaWQ9XCJFZGl0VXNlclRhc2s6bmFtZVwiXG4gICAgICAgIHBsYWNlaG9sZGVyPXtpc0N1c3RvbVRhc2sgPyBpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOiAndGFzay53aGF0U2hvdWxkWW91RG9QbGhkJywgZGVmYXVsdE1lc3NhZ2U6ICdWYWQgc2thIGR1IGfDtnJhPyd9KSA6IGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6ICd0YXNrLmVudGVyVGFza05hbWVQbGhkJywgZGVmYXVsdE1lc3NhZ2U6ICdBbmdlIHVwcGdpZnRlbnMgbmFtbi4uLid9KSB9XG4gICAgICAgIHZhbHVlPXtuYW1lfVxuICAgICAgICBvbkNoYW5nZT17bmFtZSA9PiB0aGlzLnNldFN0YXRlKHtuYW1lfSl9IC8+XG4gICAgICBcbiAgICAgIHtpc0N1c3RvbVRhc2sgJiYgPD5cbiAgICAgICAgPFRleHRBcmVhRm9ybUZpZWxkXG4gICAgICAgICAgcm93cz17NX1cbiAgICAgICAgICBsYWJlbD0ge2ludGwuZm9ybWF0TWVzc2FnZSh7aWQ6ICdjb21tb24uZGVzY3JpcHRpb25MYWJlbCcsIGRlZmF1bHRNZXNzYWdlOiAnQmVza3Jpdm5pbmcnfSl9XG4gICAgICAgICAgaWQ9XCJFZGl0VXNlclRhc2s6ZGVzY3JpcHRpb25cIlxuICAgICAgICAgIHBsYWNlaG9sZGVyPXtpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOiAnY29tbW9uLmFkZERlc2NyaXB0aW9uUGxoZCcsIGRlZmF1bHRNZXNzYWdlOiAnTMOkZ2cgdGlsbCBlbiBiZXNrcml2bmluZy4uLid9KX1cbiAgICAgICAgICB2YWx1ZT17ZGVzY3JpcHRpb259XG4gICAgICAgICAgb25DaGFuZ2U9e2Rlc2NyaXB0aW9uPT50aGlzLnNldFN0YXRlKHtkZXNjcmlwdGlvbn0pfSAvPlxuXG4gICAgICAgIDxUZXh0SW5wdXRcbiAgICAgICAgICBsYWJlbD17aW50bC5mb3JtYXRNZXNzYWdlKHtpZDonY29tbW9uLmxpbmtMYWJlbCcsIGRlZmF1bHRNZXNzYWdlOlwiTMOkbmtcIn0pfVxuICAgICAgICAgIGlkPVwiRWR1dFVzZXJUYXNrOnVybFwiXG4gICAgICAgICAgcGxhY2Vob2xkZXI9XCJodHRwKHMpOi8vLi4uXCJcbiAgICAgICAgICB2YWx1ZT17dXJsfVxuICAgICAgICAgIG9uQ2hhbmdlPXt1cmwgPT4gdGhpcy5zZXRTdGF0ZSh7dXJsfSl9ID5cblxuICAgICAgICA8L1RleHRJbnB1dD48Lz59XG5cbiAgICAgICAgPEZvcm1GaWVsZCBsYWJlbD17aW50bC5mb3JtYXRNZXNzYWdlKHtpZDogJ3Rhc2suc2V0RGVhZGxpbmUnLCBkZWZhdWx0TWVzc2FnZTogJ0FuZ2UgZGVhZGxpbmUnfSl9PlxuICAgICAgICAgIHsoZGVhZGxpbmUgfHwgc2hvd0NhbGVuZGFyKSA/XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWxcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cbiAgICAgICAgICAgICAgICA8UmVhY3REYXRlUGlja2VyIHJlZj17ZWxlbSA9PiB0aGlzLmRhdGVQaWNrZXIgPSBlbGVtfVxuICAgICAgICAgICAgICAgICAgaWQ9XCJFZGl0VXNlclRhc2s6ZGVhZGxpbmVcIlxuICAgICAgICAgICAgICAgICAgbmV4dE1vbnRoQnV0dG9uTGFiZWw9XCJcIiBcbiAgICAgICAgICAgICAgICAgIHByZXZpb3VzTW9udGhCdXR0b25MYWJlbD1cIlwiIFxuICAgICAgICAgICAgICAgICAgc2hvd1dlZWtOdW1iZXJzPXt0cnVlfVxuICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQ9e2RlYWRsaW5lICYmIG1vbWVudChkZWFkbGluZSkudG9EYXRlKCl9XG4gICAgICAgICAgICAgICAgICBhdXRvRm9jdXM9e3Nob3dDYWxlbmRhcn1cbiAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQ9XCJZWVlZLU1NLWRkXCJcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17ZXhwaXJlZCA/IFwiZXhwaXJlZFwiIDogdW5kZWZpbmVkfVxuICAgICAgICAgICAgICAgICAgbG9jYWxlPXtpbnRsLmxvY2FsZX1cbiAgICAgICAgICAgICAgICAgIHBvcHBlclBsYWNlbWVudD17aXNDdXN0b21UYXNrID8gXCJ0b3Atc3RhcnRcIiA6IFwiYm90dG9tLXN0YXJ0XCJ9XG4gICAgICAgICAgICAgICAgICBvbkJsdXI9eygpPT50aGlzLnNldFN0YXRlKHtzaG93Q2FsZW5kYXI6IGZhbHNlfSl9XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dmFsdWU9PntcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgZGVhZGxpbmU6IHZhbHVlICYmIG1vbWVudCh2YWx1ZSkuZm9ybWF0KFwiWVlZWS1NTS1ERFwiKSxcbiAgICAgICAgICAgICAgICAgICAgICBzaG93Q2FsZW5kYXI6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cbiAgICAgICAgICAgICAgICA8YSBjbGFzc05hbWU9XCJkZWxldGVEYXRlXCIgaHJlZj1cIiNcIiB0aXRsZT17aW50bC5mb3JtYXRNZXNzYWdlKHtpZDogJ3Rhc2sucmVtb3ZlRGVhZGxpbmUnLCBkZWZhdWx0TWVzc2FnZTogJ1RhIGJvcnQgZGVhZGxpbmUnfSl9IG9uQ2xpY2s9e2V2PT57XG4gICAgICAgICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7ZGVhZGxpbmU6IG51bGwsIHNob3dDYWxlbmRhcjogZmFsc2V9KTtcbiAgICAgICAgICAgICAgICB9fT48L2E+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+IDpcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidG9wXCIgcmVmPXsoKT0+e3RoaXMuZGF0ZVBpY2tlciA9IG51bGx9fT5cbiAgICAgICAgICAgICAgICA8YSBjbGFzc05hbWU9XCJidG5cIiBvbkNsaWNrPXtldiA9PiB7XG4gICAgICAgICAgICAgICAgICBpZiAodGhpcy5kYXRlUGlja2VyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0ZVBpY2tlci5zZXRPcGVuKHRydWUpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIHNob3dDYWxlbmRhcjogdHJ1ZVxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfX0+XG4gICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtY2FsZW5kYXJcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+PEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJ0YXNrLnNldERlYWRsaW5lTGFiZWxcIiBkZWZhdWx0TWVzc2FnZT1cIkFuZ2UgZGVhZGxpbmUuLi5cIi8+XG4gICAgICAgICAgICAgIDwvYT4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgPC9kaXY+fVxuICAgICAgICA8L0Zvcm1GaWVsZD5cbiAgICAgIDxGb3JtRmllbGQgbGFiZWw9e2ludGwuZm9ybWF0TWVzc2FnZSh7aWQ6ICd0YXNrLnN1YlRhc2tzJywgZGVmYXVsdE1lc3NhZ2U6ICdVbmRlcnVwcGdpZnRlcid9KX0gPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxlYXJuaW5nR29hbFRhc2tzXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YXNrQ29udGFpbmVyXCI+XG5cbiAgICAgICAgICAgICAge3N1YlRhc2tzICYmIHN1YlRhc2tzLm1hcChzdWJUYXNrID0+IDxkaXYga2V5PXtzdWJUYXNrLmlkfSBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj48YVxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCk9PnRoaXMuZWRpdFN1YlRhc2soc3ViVGFzayl9XG4gICAgICAgICAgICAgICAgICBocmVmPVwiI1wiPntzdWJUYXNrLm5hbWV9PC9hPjwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj4pfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0b3BcIj5cbiAgICAgICAgICAgIDxidXR0b24gaWQ9XCJFZGl0VXNlclRhc2s6YWRkU3ViVGFza1wiIGNsYXNzTmFtZT1cImJ0blwiXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpPT50aGlzLmFkZFN1YlRhc2soKX0+XG4gICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLXBsdXNcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+IDxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwidGFzay5hZGRTdWJ0YXNrXCIgZGVmYXVsdE1lc3NhZ2U9XCJMw6RnZyB0aWxsIHVuZGVydXBwZ2lmdFwiLz5cbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvRm9ybUZpZWxkPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJkaXZpZGVyIGxhcmdlXCIgLz5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbFwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxCdXR0b24gdG9wXCI+XG4gICAgICAgICAgPGJ1dHRvbiB0YWJJbmRleD17MX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ0biBidG4tZGVmYXVsdFwiXG4gICAgICAgICAgICBvbkNsaWNrPXsoKT0+e1xuICAgICAgICAgICAgICBpc01vZGlmaWVkID8gb25VcGRhdGUodXNlclRhc2sgPT4ge1xuICAgICAgICAgICAgICAgIHVzZXJUYXNrLm5hbWUgPSBuYW1lO1xuICAgICAgICAgICAgICAgIHVzZXJUYXNrLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgICAgICAgICAgICAgdXNlclRhc2sudXJsID0gdXJsO1xuICAgICAgICAgICAgICAgIHVzZXJUYXNrLmRlYWRsaW5lID0gZGVhZGxpbmU7XG4gICAgICAgICAgICAgIH0pIDogdGhpcy5wcm9wcy5jbG9zZURpYWxvZygpO1xuICAgICAgICAgICAgfX0+PEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJjb21tb24uc2F2ZVwiIGRlZmF1bHRNZXNzYWdlPVwiU3BhcmFcIi8+IFxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxCdXR0b24gdG9wXCI+XG4gICAgICAgICAgPGJ1dHRvbiB0YWJJbmRleD17MX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ0blwiXG4gICAgICAgICAgICBvbkNsaWNrPXsoKT0+e1xuICAgICAgICAgICAgICB0aGlzLnByb3BzLmNsb3NlRGlhbG9nKCk7XG4gICAgICAgICAgICB9fT48Rm9ybWF0dGVkTWVzc2FnZSBpZD1cImNvbW1vbi5jYW5jZWxcIiBkZWZhdWx0TWVzc2FnZT1cIkF2YnJ5dFwiLz48L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29uZmlybSB0b3AgcHVsbC1yaWdodFwiPlxuICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIHRhYkluZGV4PXsxfVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnRuIGJ0bi13YXJuaW5nXCJcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpPT57XG4gICAgICAgICAgICAgIG9uRGVsZXRlKGlkKTtcbiAgICAgICAgICAgIH19Pntpc0N1c3RvbVRhc2sgP1xuICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZSBpZD1cInRhc2sucmVtb3ZlV29ya0dvYWxzXCIgZGVmYXVsdE1lc3NhZ2U9XCJUYSBib3J0IGFyYmV0c23DpWxcIi8+IDpcbiAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJ0YXNrLnJlbW92ZVRoaXNUYXNrXCIgZGVmYXVsdE1lc3NhZ2U9XCJUYSBib3J0IGRlbiBow6RyIHVwcGdpZnRlblwiLz5cbiAgICAgICAgICB9PC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICBcbiAgICAgIHsvKjxkaXYgY2xhc3NOYW1lPVwiYnRuIGJ0bi13YXJuaW5nIGJ0bi1sYXJnZSBwdWxsLXJpZ2h0XCIgb25DbGljaz17ZXYgPT4gb25EZWxldGUoaWQpfT5cbiAgICAgICAge0xgVGEgYm9ydCBhcmJldHNtw6VsYH08L2Rpdj5cbiAgICAgIHtpc01vZGlmaWVkICYmXG4gICAgICAgIDxkaXZcbiAgICAgICAgICBjbGFzc05hbWU9XCJidG4gYnRuLWxhcmdlIGJ0bi1kZWZhdWx0XCJcbiAgICAgICAgICB0YWJJbmRleD17MH1cbiAgICAgICAgICBvbkNsaWNrPXsoKT0+b25VcGRhdGUodXNlclRhc2sgPT4ge1xuICAgICAgICAgICAgdXNlclRhc2submFtZSA9IG5hbWU7XG4gICAgICAgICAgICB1c2VyVGFzay5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgICAgICAgICAgdXNlclRhc2sudXJsID0gdXJsO1xuICAgICAgICAgIH0pfT4gU3BhcmE8L2Rpdj59Ki99XG4gICAgPC9kaXY+XG4gIH1cbn1cblxuIiwiaW1wb3J0IHsgVXNlclRhc2sgfSBmcm9tIFwia2VkYmFja2VuZC9tb2RlbHNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFRhc2tUeXBlICh1c2VyVGFzazogVXNlclRhc2spIDogJ2NvdXJzZUJ1aWxkZXJUYXNrJyB8ICdzaXRlVmlzaW9uVGFzaycgfCAnc3ViamVjdFBsYW5uZXJUYXNrJyB8ICdjdXN0b21UYXNrJyB7XG4gIHJldHVybiB1c2VyVGFzay5jb3Vyc2UgJiYgdXNlclRhc2sudGFzayAmJiB1c2VyVGFzay5jb3Vyc2UubGVuZ3RoID4gMCAmJiB1c2VyVGFzay50YXNrLmxlbmd0aCA+IDAgP1xuICAgICdjb3Vyc2VCdWlsZGVyVGFzaycgOlxuICAgIHVzZXJUYXNrLnNpdGVWaXNpb25QYWdlSWQgP1xuICAgICAgJ3NpdGVWaXNpb25UYXNrJyA6XG4gICAgICAgIHVzZXJUYXNrLmNvdXJzZUluZm8gP1xuICAgICAgICAgICdzdWJqZWN0UGxhbm5lclRhc2snIDpcbiAgICAgICAgICAnY3VzdG9tVGFzayc7XG59XG4iLCJleHBvcnQge1dlZWtQbGFubmVyfSBmcm9tICcuL3dlZWtwbGFubmVyJztcbiIsImltcG9ydCB7IFVzZXJUYXNrIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xuaW1wb3J0IHsgVXNlclRhc2tzQm94UHJvcHMgfSBmcm9tICcuL3VzZXItdGFza3MtYm94JztcbmltcG9ydCB7IGFycmF5VG9NYXAsIGFycmF5VG9Mb29rdXAsIGNvbXBhcmVQcm9wLCBMIH0gZnJvbSBcIi4uLy4uL3V0aWxzL3V0aWxzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmlydHVhbExlYXJuaW5nR29hbCB7XG4gIG5hbWU6IHN0cmluZztcbiAgYWxsVGFza3M6IFVzZXJUYXNrW107XG4gIHN0ZXA/OiBudW1iZXI7XG4gIHVybD86IHN0cmluZztcbiAgdGFza3M6IFVzZXJUYXNrW107XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZWZpbmUodGFza3M6IFVzZXJUYXNrW10pIHtcbiAgY29uc3QgcmVzdWx0ID0gW10gYXMgUGFydGlhbDxVc2VyVGFza3NCb3hQcm9wcz5bXTtcbiAgY29uc3QgbWFwcGVyID0ge30gYXMgeyBbbmFtZTogc3RyaW5nXTogVXNlclRhc2tzQm94UHJvcHMgfTtcbiAgY29uc3QgdGFza3NQZXJDb3Vyc2UgPSBhcnJheVRvTG9va3VwKHRhc2tzLCB0ID0+IHQuY291cnNlTmFtZSB8fCAnJyk7XG4gIGZvciAoY29uc3QgY291cnNlTmFtZSBvZiBPYmplY3Qua2V5cyh0YXNrc1BlckNvdXJzZSkuc29ydCgpLmZpbHRlcih4ID0+IHgpLmNvbmNhdCh0YXNrc1BlckNvdXJzZVsnJ10gP1xuICAgIFsnJ10gOiBbXSkpIHtcbiAgICBjb25zdCBjb3Vyc2VUYXNrcyA9IHRhc2tzUGVyQ291cnNlW2NvdXJzZU5hbWVdIHx8IHRhc2tzUGVyQ291cnNlWycnXTtcbiAgICBjb25zdCB0YXNrc1BlckxlYXJuaW5nR29hbCA9IGFycmF5VG9Mb29rdXAoY291cnNlVGFza3MsIHQgPT4gdC5sZWFybmluZ0dvYWwpO1xuICAgIGNvbnN0IHJlc3VsdExlYXJuaW5nR29hbHM6IFZpcnR1YWxMZWFybmluZ0dvYWxbXSA9IFtdO1xuICAgIGZvciAoY29uc3QgbGVhcm5pbmdHb2FsIG9mIE9iamVjdC5rZXlzKHRhc2tzUGVyTGVhcm5pbmdHb2FsKSkge1xuICAgICAgY29uc3QgbGdUYXNrcyA9IHRhc2tzUGVyTGVhcm5pbmdHb2FsW2xlYXJuaW5nR29hbF0uc29ydChjb21wYXJlUHJvcChcImRhdGVUaW1lXCIpKTtcbiAgICAgIGNvbnN0IGxlYXJuaW5nR29hbFRhc2sgPSBsZ1Rhc2tzXG4gICAgICAgIC5maWx0ZXIodCA9PiB0Lm5hbWUgPT0gbnVsbCkgLy8gSWYgbmFtZSBpcyB1bmRlZmluZWQgb3IgbnVsbCwgdGhpcyByZXByZXNlbnRzIGEgbGVhcm5pbmcgZ29hbFxuICAgICAgICBbMF07XG4gICAgICBjb25zdCB1cmwgPSBsZWFybmluZ0dvYWxUYXNrICYmIGxlYXJuaW5nR29hbFRhc2sudXJsO1xuICAgICAgcmVzdWx0TGVhcm5pbmdHb2Fscy5wdXNoKHtcbiAgICAgICAgbmFtZTogbGVhcm5pbmdHb2FsLFxuICAgICAgICBhbGxUYXNrczogbGdUYXNrcyxcbiAgICAgICAgdXJsLFxuICAgICAgICBzdGVwOiBsZ1Rhc2tzLm1hcCh0ID0+IHQuc3RlcCkuZmlsdGVyKHN0ZXAgPT4gc3RlcClbMF0sXG4gICAgICAgIHRhc2tzOiBsZ1Rhc2tzLmZpbHRlcih0ID0+IHQubmFtZSlcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXN1bHQucHVzaCh7XG4gICAgICBjb3Vyc2VOYW1lLFxuICAgICAgbGVhcm5pbmdHb2FsczogcmVzdWx0TGVhcm5pbmdHb2Fsc1xuICAgIH0pO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBVc2VyVGFzaywgVGFzaywgVXNlclN1YlRhc2sgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XG5pbXBvcnQgeyBPcGVuQ2xvc2VCb3ggfSBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvb3Blbi1jbG9zZS1ib3gnO1xuaW1wb3J0IHsgTCB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWxzJztcbmltcG9ydCB7IHByZXNlcnZlSW1wZXJzb25hdGlvblF1ZXJ5IH0gZnJvbSAnLi4vLi4vYWNjZXNzLWNvbnRyb2wnO1xuaW1wb3J0IHsgY291cnNlTmFtZVRvQ3NzQ2xhc3MgfSBmcm9tICcuLi9jYWxlbmRhci9jb3Vyc2UtbmFtZS10by1jc3MtY2xhc3MnO1xuaW1wb3J0IHsgZ2V0VGFza1R5cGUgfSBmcm9tICcuL2dldC10YXNrLXR5cGUnO1xuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xuaW1wb3J0IHsgVmlydHVhbExlYXJuaW5nR29hbCB9IGZyb20gJy4vcmVmaW5lcic7XG5pbXBvcnQgeyBGZWF0dXJlcyB9IGZyb20gJy4uLy4uL2ZlYXR1cmVzJztcbmltcG9ydCBjZmcgZnJvbSAnLi4vLi4vZ2xvYmFscy9LRUQuY2ZnJztcbmltcG9ydCB7Rm9ybWF0dGVkTWVzc2FnZX0gZnJvbSAncmVhY3QtaW50bCc7XG5pbXBvcnQge0xhbmd1YWdlQ29udGV4dH0gZnJvbSAnLi4vdXRpbGl0eS1jb21wb25lbnRzL0xhbmd1YWdlQ29udGV4dCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVXNlclRhc2tzQm94UHJvcHMge1xuICBjb3Vyc2VOYW1lOiBzdHJpbmc7XG4gIGxlYXJuaW5nR29hbHM6IFZpcnR1YWxMZWFybmluZ0dvYWxbXSxcbiAgdmlld0NvdXJzZVVybDogc3RyaW5nO1xuICBvcGVuQ291cnNlcz86IHsgW3BhdGg6IHN0cmluZ106IGJvb2xlYW4gfTtcbiAgc2V0SXNPcGVuPzogKGNvdXJzZU5hbWU6IHN0cmluZywgaXNPcGVuOiBib29sZWFuKSA9PiB2b2lkO1xuICBzZXRUYXNrRG9uZT86ICh0YXNrOiBVc2VyVGFzaywgZG9uZTogYm9vbGVhbikgPT4gdm9pZDtcbiAgc2V0U3ViVGFza0RvbmU6ICh0YXNrOiBVc2VyVGFzaywgc3ViVGFzazogVXNlclN1YlRhc2ssIGRvbmU6IGJvb2xlYW4pID0+IHZvaWQ7XG4gIGFkZE93blRhc2s/OiAoY291cnNlTmFtZTogc3RyaW5nLCBsZWFybmluZ0dvYWxOYW1lOiBzdHJpbmcpID0+IHZvaWQ7XG4gIGVkaXRUYXNrOiAodGFzazogVXNlclRhc2spID0+IHZvaWQ7XG4gIGVkaXRTdWJUYXNrOiAodGFzazogVXNlclRhc2ssIHN1YlRhc2s6IFVzZXJTdWJUYXNrKSA9PiB2b2lkO1xuICByZW1vdmVMZWFybmluZ0dvYWw6IChsZzogVmlydHVhbExlYXJuaW5nR29hbCk9PnZvaWQ7XG4gIGRpc3BsYXlQcm9ncmVzczogYm9vbGVhbjtcbiAgcHJvZ3Jlc3NEYXRhOiB7Y29tcGxldGVkTnVtYmVyT2ZUYXNrczogbnVtYmVyLCBudW1iZXJPZlRhc2tzOiBudW1iZXJ9O1xufTtcblxuZXhwb3J0IGNsYXNzIFVzZXJUYXNrc0JveCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxVc2VyVGFza3NCb3hQcm9wcz4ge1xuICBzdGF0aWMgY29udGV4dFR5cGUgPSBMYW5ndWFnZUNvbnRleHQ7XG4gIGNvbnN0cnVjdG9yKHByb3BzOiBVc2VyVGFza3NCb3hQcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgfVxuXG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGNvdXJzZU5hbWUsXG4gICAgICBsZWFybmluZ0dvYWxzLCBcbiAgICAgIHByb2dyZXNzRGF0YSxcbiAgICAgIGRpc3BsYXlQcm9ncmVzc1xuICAgIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IGlzT3BlbiA9ICEhdGhpcy5wcm9wcy5vcGVuQ291cnNlc1tjb3Vyc2VOYW1lXTtcbiAgICBjb25zdCBmZWF0dXJlcyA9IG5ldyBGZWF0dXJlcygpO1xuICAgIGNvbnN0IHtpbnRsfSA9IHRoaXMuY29udGV4dDtcblxuICAgIHJldHVybiA8T3BlbkNsb3NlQm94XG4gIHRpdGxlPXs8aDU+e2NvdXJzZU5hbWUgfHwgPEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJ1c2VyVGFza3MuZ29hbHNcIiAgZGVmYXVsdE1lc3NhZ2U9XCJFZ25hIGzDpHJhbmRlbcOlbFwiLz4gfTwvaDU+fVxuICAgICAgaGVhZGVyT3Blbj17aXNPcGVufVxuICAgICAgY2xhc3NOYW1lPXtjb3Vyc2VOYW1lICYmIGNvdXJzZU5hbWVUb0Nzc0NsYXNzKCd3cC1jb3Vyc2UtJywgY291cnNlTmFtZSl9XG4gICAgICBvbk9wZW5DbG9zZT17YmVjYW1lT3BlbiA9PiB0aGlzLnByb3BzLnNldElzT3Blbihjb3Vyc2VOYW1lLCBiZWNhbWVPcGVuKX1cbiAgICAgIGRpc3BsYXlQcm9ncmVzcz0ge2Rpc3BsYXlQcm9ncmVzc30gICAgICAgXG4gICAgICBwcm9ncmVzc0RhdGEgPSB7cHJvZ3Jlc3NEYXRhfVxuICAgICAgPlxuICAgICAge2xlYXJuaW5nR29hbHMubWFwKGxnID0+XG4gICAgICAgIDxkaXYga2V5PXtsZy5uYW1lfSBjbGFzc05hbWU9XCJsZWFybmluZ0dvYWxDb250YWluZXJcIj5cbiAgICAgICAgICB7bGcuc3RlcCAmJiA8ZGl2IGNsYXNzTmFtZT1cInN0ZXBJbmRpY2F0b3JcIj57bGcuc3RlcH08L2Rpdj59XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxlYXJuaW5nR29hbFRleHQgaG9yaXpvbnRhbEl0ZW0gdG9wXCI+e2xnLm5hbWV9PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtXCI+XG4gICAgICAgICAgICAgICZuYnNwOzxhXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidHJhc2hcIlxuICAgICAgICAgICAgICAgIGhyZWY9XCIjXCJcbiAgICAgICAgICAgICAgICAgdGl0bGU9e2ludGwuZm9ybWF0TWVzc2FnZSh7aWQ6J3VzZXJUYXNrcy5kZWxldGVMZWFybmluZ0dvYWwnLCBkZWZhdWx0TWVzc2FnZTogJ1RhIGJvcnQgbMOkcmFuZGVtw6VsZXQgb2NoIGRlc3MgdXBwZ2lmdGVyJ30pfVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2V2PT57XG4gICAgICAgICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5yZW1vdmVMZWFybmluZ0dvYWwobGcpO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS10cmFzaFwiIC8+XG4gICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsZWFybmluZ0dvYWxUYXNrc1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YXNrQ29udGFpbmVyXCI+XG4gICAgICAgICAgICAgIHtsZy50YXNrcy5tYXAodXNlclRhc2sgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzV29ya2luZyA9IHVzZXJUYXNrLiRtZXRhID09PSAnYWRkaW5nJyB8fCB1c2VyVGFzay4kbWV0YSA9PT0gJ2RlbGV0aW5nJyB8fCB1c2VyVGFzay4kbWV0YSA9PT0gJ3VwZGF0aW5nJztcblxuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tUeXBlID0gZ2V0VGFza1R5cGUodXNlclRhc2spO1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4cGlyZWQgPSBtb21lbnQodXNlclRhc2suZGVhZGxpbmUpLnN0YXJ0T2YoJ2RheScpIDwgbW9tZW50KCkuc3RhcnRPZignZGF5Jyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gPGRpdiBrZXk9e3VzZXJUYXNrLmlkfSBzdHlsZT17aXNXb3JraW5nID8geyBvcGFjaXR5OiAwLjUgfSA6IHt9fT5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbFwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtcImNoZWNrQm94XCIgKyAodXNlclRhc2suZG9uZSA/IFwiIGNoZWNrZWRcIiA6IFwiXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17ZXYgPT4gIWlzV29ya2luZyAmJiB0aGlzLnByb3BzLnNldFRhc2tEb25lKHVzZXJUYXNrLCAhdXNlclRhc2suZG9uZSl9PlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cbiAgICAgICAgICAgICAgICAgICAgICB7dGFza1R5cGUgPT09ICdjb3Vyc2VCdWlsZGVyVGFzaycgP1xuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj17Z2V0VGFza1VybCh1c2VyVGFzaywgdGhpcy5wcm9wcy52aWV3Q291cnNlVXJsKX0+e3VzZXJUYXNrLm5hbWV9PC9hPiA6XG4gICAgICAgICAgICAgICAgICAgICAgIHRhc2tUeXBlID09PSAnc3ViamVjdFBsYW5uZXJUYXNrJyA/XG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPXtnZXRTdWJqZWN0UGxhbm5lclRhc2tVcmwodXNlclRhc2spfT57dXNlclRhc2submFtZX08L2E+IDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tUeXBlID09PSAnc2l0ZVZpc2lvblRhc2snID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj17dXNlclRhc2sudXJsfT57dXNlclRhc2submFtZX08L2E+IDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9eyF1c2VyVGFzay51cmwgPyBcImxpbmstbGVzc1wiOiBcIlwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY9e3VzZXJUYXNrLnVybCB8fCB1bmRlZmluZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0PXsodXNlclRhc2sudXJsKycnKS50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgobG9jYXRpb24uaG9zdC50b0xvd2VyQ2FzZSgpKSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIl9zZWxmXCIgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJfYmxhbmtcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPnt1c2VyVGFzay5uYW1lfTwvYT59XG4gICAgICAgICAgICAgICAgICAgICAge3VzZXJUYXNrLmRlYWRsaW5lICYmIDxkaXYgY2xhc3NOYW1lPXtcImRhdGVTZXRcIiArIChleHBpcmVkID8gJyBleHBpcmVkJyA6ICcnKX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aSB0aXRsZT17bW9tZW50KHVzZXJUYXNrLmRlYWRsaW5lKS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpfSBjbGFzc05hbWU9XCJmYSBmYS1jYWxlbmRhclwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpPT57fX0+PC9pPlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2Pn1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcCB0YXNrRWRpdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3NOYW1lPVwiZWRpdEl0ZW1cIiBvbkNsaWNrPXsoKSA9PiB0aGlzLnByb3BzLmVkaXRUYXNrKHVzZXJUYXNrKX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4gXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAge3VzZXJUYXNrLnN1YlRhc2tzICYmIDxkaXYgY2xhc3NOYW1lPVwic3VidGFza3NcIj5cbiAgICAgICAgICAgICAgICAgICAge3VzZXJUYXNrLnN1YlRhc2tzLm1hcChzdWJUYXNrID0+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e3N1YlRhc2suaWR9ID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e1wiY2hlY2tCb3hcIiArIChzdWJUYXNrLmRvbmUgPyBcIiBjaGVja2VkXCIgOiBcIlwiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtldiA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIWlzV29ya2luZyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5zZXRTdWJUYXNrRG9uZSh1c2VyVGFzaywgc3ViVGFzaywgIXN1YlRhc2suZG9uZSl9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBocmVmPXtzdWJUYXNrLnVybCB8fCB1bmRlZmluZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0PXsodXNlclRhc2sudXJsKycnKS50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgobG9jYXRpb24uaG9zdC50b0xvd2VyQ2FzZSgpKSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJfc2VsZlwiIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIl9ibGFua1wifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJUYXNrLnVybCA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZCA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdsaW5rLWxlc3MnXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0+e3N1YlRhc2submFtZX08L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wIHRhc2tFZGl0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzTmFtZT1cImVkaXRJdGVtXCIgb25DbGljaz17KCkgPT4gdGhpcy5wcm9wcy5lZGl0U3ViVGFzayh1c2VyVGFzaywgc3ViVGFzayl9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4pfVxuICAgICAgICAgICAgICAgICAgPC9kaXY+fVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsZWFybmluZ0dvYWxUb29sc1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidG4gYWRkT3duR29hbFwiXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHRoaXMucHJvcHMuYWRkT3duVGFzayh0aGlzLnByb3BzLmNvdXJzZU5hbWUsIGxnLm5hbWUpfT5cbiAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtcGx1c1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4gPEZvcm1hdHRlZE1lc3NhZ2UgaWQ9J3VzZXJUYXNrcy5hZGRMZWFybmluZ0dvYWwnIGRlZmF1bHRNZXNzYWdlPSdFZ2V0IGFyYmV0c23DpWwnLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxiciAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgPC9PcGVuQ2xvc2VCb3g+XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0VGFza1VybCh1c2VyVGFzazogVXNlclRhc2ssIHZpZXdDb3Vyc2VVcmw6IHN0cmluZykge1xuICBpZiAodXNlclRhc2suY291cnNlICYmIHVzZXJUYXNrLmNvdXJzZS5sZW5ndGggPiAwICYmIHVzZXJUYXNrLnRhc2sgJiYgdXNlclRhc2sudGFzay5sZW5ndGggPiAwKSB7XG4gICAgY29uc3QgY291cnNlVXJsID0gcHJlc2VydmVJbXBlcnNvbmF0aW9uUXVlcnkodmlld0NvdXJzZVVybCwgeyBjb3Vyc2VJZDogdXNlclRhc2suY291cnNlWzBdLmlkIH0pO1xuICAgIHJldHVybiBgJHtjb3Vyc2VVcmx9Iy90YXNrLyR7dXNlclRhc2sudGFza1swXS5pZH1gO1xuICB9XG4gIHJldHVybiB1c2VyVGFzay51cmw7XG59XG5cbmZ1bmN0aW9uIGdldFN1YmplY3RQbGFubmVyVGFza1VybCh1c2VyVGFzazogVXNlclRhc2spIHtcbiAgaWYgKHVzZXJUYXNrLmNvdXJzZUluZm8gJiYgdXNlclRhc2sudGFzayAmJiB1c2VyVGFzay50YXNrLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCB7c2Nob29sLCBjb3Vyc2UsIHRhYiB9ID0gdXNlclRhc2suY291cnNlSW5mbztcbiAgICBjb25zdCBjb3Vyc2VVcmwgPSBwcmVzZXJ2ZUltcGVyc29uYXRpb25RdWVyeShjZmcuS0VEX1NVQkpFQ1RfUExBTk5FUl9VUkwsIHt9KTtcbiAgICByZXR1cm4gYCR7Y291cnNlVXJsfSMvJHtzY2hvb2x9L2NvdXJzZXMvJHtjb3Vyc2V9L3RhYnMvJHt0YWJ9L3Rhc2tzLyR7dXNlclRhc2sudGFza1swXS5pZH1gO1xuICB9XG4gIHJldHVybiB1c2VyVGFzay51cmw7XG59XG4iLCJpbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XG5pbXBvcnQgeyBsb2NhbE1vbWVudCB9IGZyb20gJy4uLy4uL2dsb2JhbHMvbW9tZW50LXN2LWxvY2FsZSc7XG5cbnR5cGUgTW9tZW50ID0gbW9tZW50Lk1vbWVudDtcblxuZXhwb3J0IGNsYXNzIFdlZWtQbGFubmVyUGVyc2lzdGVkU3RhdGUge1xuICBzdGF0aWMgRVhQSVJBVElPTl9IT1VSUyA9IDEyO1xuICBzdGF0aWMgVkVSU0lPTiA9IDI7XG5cbiAgdXNlcjogc3RyaW5nO1xuICBsYXN0V3JpdGU6IG51bWJlcjtcbiAgd2Vla0RhdGU6IG51bWJlcjtcbiAgb3BlbkNvdXJzZXM6IHsgW3BhdGg6IHN0cmluZ106IGJvb2xlYW4gfVxuXG4gIGNvbnN0cnVjdG9yICh1c2VyT3JDb3B5OiBzdHJpbmcgfCBXZWVrUGxhbm5lclBlcnNpc3RlZFN0YXRlKSB7XG4gICAgaWYgKHR5cGVvZiB1c2VyT3JDb3B5ID09PSAnc3RyaW5nJykge1xuICAgICAgdGhpcy51c2VyID0gdXNlck9yQ29weTtcbiAgICAgIHRoaXMubGFzdFdyaXRlID0gRGF0ZS5ub3coKTtcbiAgICAgIHRoaXMud2Vla0RhdGUgPSBsb2NhbE1vbWVudCgpLnN0YXJ0T2YoJ3dlZWsnKS52YWx1ZU9mKCk7XG4gICAgICB0aGlzLm9wZW5Db3Vyc2VzID0ge307XG4gICAgfSBlbHNlIHtcbiAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgdXNlck9yQ29weSk7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGxvYWQodXNlcjogc3RyaW5nKSB7XG4gICAgY29uc3QgY29va2llID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ1dlZWtQbGFubmVyUGVyc2lzdGVkU3RhdGUyJyk7XG4gICAgY29uc3Qgc3RvcmVkRGF0YSA9IGNvb2tpZSAmJiAoSlNPTi5wYXJzZShjb29raWUpIGFzIFdlZWtQbGFubmVyUGVyc2lzdGVkU3RhdGUpO1xuICAgIGNvbnN0IHN0YXRlID0gbmV3IFdlZWtQbGFubmVyUGVyc2lzdGVkU3RhdGUodXNlcik7XG4gICAgaWYgKHN0b3JlZERhdGEpIE9iamVjdC5hc3NpZ24oc3RhdGUsIHN0b3JlZERhdGEpO1xuXG4gICAgcmV0dXJuIHN0YXRlLnVzZXIgPT09IHVzZXIgJiYgIXN0YXRlLmlzRXhwaXJlZChtb21lbnQoKSkgP1xuICAgICAgc3RhdGUgOiBuZXcgV2Vla1BsYW5uZXJQZXJzaXN0ZWRTdGF0ZSh1c2VyKTtcbiAgfVxuXG4gIGFzeW5jIHNhdmUoKSB7XG4gICAgdGhpcy5sYXN0V3JpdGUgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IGpzb24gPSBKU09OLnN0cmluZ2lmeSh0aGlzKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnV2Vla1BsYW5uZXJQZXJzaXN0ZWRTdGF0ZTInLCBqc29uKTtcbiAgfVxuXG4gIGlzRXhwaXJlZCAoYXNPZjogTW9tZW50KSB7XG4gICAgICByZXR1cm4gbW9tZW50KHRoaXMubGFzdFdyaXRlKVxuICAgICAgICAuaXNCZWZvcmUoXG4gICAgICAgICAgICBhc09mLmFkZChcbiAgICAgICAgICAgICAgICAwLVdlZWtQbGFubmVyUGVyc2lzdGVkU3RhdGUuRVhQSVJBVElPTl9IT1VSUywgJ2hvdXJzJylcbiAgICAgICAgKTtcbiAgfVxufVxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgVXNlclRhc2tzQm94IH0gZnJvbSAnLi91c2VyLXRhc2tzLWJveCc7XG5pbXBvcnQgeyBVc2VyVGFzaywgVXNlclN1YlRhc2sgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XG5pbXBvcnQgeyBjcmVhdGVVVUlELCBIdHRwRXJyb3IgfSBmcm9tIFwia2VkYmFja2VuZC9jbGllbnRcIjtcbmltcG9ydCB7IHJlZmluZSwgVmlydHVhbExlYXJuaW5nR29hbCB9IGZyb20gJy4vcmVmaW5lcic7XG5pbXBvcnQgeyBFbnYgfSBmcm9tICcuLi8uLi9nbG9iYWxzL0tFRC5lbnYnO1xuaW1wb3J0IHsgTCwgY29tcGFyZVByb3AgfSBmcm9tICcuLi8uLi91dGlscy91dGlscyc7XG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XG4vL2ltcG9ydCB7IEN1c3RvbUdvYWwgfSBmcm9tICcuLi8uLi9jb250cmFjdHMva2VkLW1vZGVscyc7XG5pbXBvcnQgeyBUU09OIH0gZnJvbSAnLi4vLi4vdXRpbHMvdHNvbic7XG5pbXBvcnQgeyBXZWVrUGxhbm5lclBlcnNpc3RlZFN0YXRlIH0gZnJvbSAnLi93ZWVrcGxhbm5lci1wZXJzaXN0ZWQtc3RhdGUnO1xuaW1wb3J0IHsgUmVtb3ZlSXRlbSB9IGZyb20gJy4uL2NvdXJzZS1idWlsZGVyL3N1Yi1jb21wb25lbnRzL3JlbW92ZS1pdGVtJztcbmltcG9ydCB7IERpYWxvZ3MgfSBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvZGlhbG9ncyc7XG5pbXBvcnQgeyBBZGRDdXN0b21Hb2FsIH0gZnJvbSAnLi9hZGQtY3VzdG9tLWdvYWwnO1xuaW1wb3J0IHsgQWRkQ3VzdG9tVGFzayB9IGZyb20gJy4vYWRkLWN1c3RvbS10YXNrJztcbmltcG9ydCB7IEVkaXRVc2VyVGFzayB9IGZyb20gJy4vZWRpdC11c2VyLXRhc2snO1xuaW1wb3J0IHsgU3Bpbm5lciB9IGZyb20gJy4uL2NvdXJzZS1idWlsZGVyL3N1Yi1jb21wb25lbnRzL3NwaW5uZXInO1xuaW1wb3J0IHsgT3BlbkNsb3NlQm94IH0gZnJvbSAnLi4vdXRpbGl0eS1jb21wb25lbnRzL29wZW4tY2xvc2UtYm94JztcbmltcG9ydCB7IFBlbmRpbmdKb2IgfSBmcm9tICcuLi8uLi91dGlscy9wZW5kaW5nLWpvYic7XG5pbXBvcnQgeyBBZGRPckVkaXRTdWJUYXNrIH0gZnJvbSAnLi9hZGQtb3ItZWRpdC1zdWItdGFzayc7XG5pbXBvcnQgeyBnZXRBZGp1c3RlZFdlZWssIEtFRFdlZWssIGdldE5leHRXZWVrRGF0ZSwgZ2V0UHJldldlZWtEYXRlIH0gZnJvbSAnLi4vLi4vdXRpbHMvd2Vla3V0aWwnO1xuaW1wb3J0IHsgRm9ybWF0dGVkTWVzc2FnZSB9IGZyb20gJ3JlYWN0LWludGwnO1xuaW1wb3J0IHtMYW5ndWFnZUNvbnRleHR9IGZyb20gJy4uL3V0aWxpdHktY29tcG9uZW50cy9MYW5ndWFnZUNvbnRleHQnO1xuaW1wb3J0IHsgUHJvZ3Jlc3MgfSBmcm9tICcuLi9jaGFydHMvcHJvZ3Jlc3MnO1xuaW1wb3J0IHtnZXRXZWVrcGxhbm5lclByb2dyZXNzRGF0YX0gZnJvbSAnLi4vY2hhcnRzL2NoYXJ0cy11dGlscydcbmltcG9ydCB7IGZlYXR1cmVzIH0gZnJvbSAnLi4vLi4vZmVhdHVyZXMnO1xuXG5jb25zdCBNQVhfU1RSQVRFR1lfTEVOR1RIID0gMTYzODQ7XG5jb25zdCBNQVhfQVNTRVNTTUVOVF9MRU5HVEggPSAxNjM4NDtcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgdmlld0NvdXJzZVVybDogc3RyaW5nO1xuICBlbnY6IEVudjtcbn1cblxuaW50ZXJmYWNlIFN0YXRlIHtcbiAgd2Vla0RhdGU6IG51bWJlcjtcbiAgZGlhbG9nczogYW55W107XG4gIHVzZXJUYXNrczogVXNlclRhc2tbXTtcbiAgb3BlbkNvdXJzZXM6IHsgW3BhdGg6IHN0cmluZ106IGJvb2xlYW4gfVxuICBzdHJhdGVneT86IHN0cmluZztcbiAgYXNzZXNzbWVudD86IHN0cmluZztcbiAgd2Vla1RleHRzVVQ6IFVzZXJUYXNrIHwgbnVsbDtcbiAgc2F2aW5nOiBib29sZWFuO1xuICBpc0xvYWRpbmc6IGJvb2xlYW47XG4gIGlzQ29weWluZ1Rhc2tzOiBib29sZWFuO1xufVxuXG5leHBvcnQgY2xhc3MgV2Vla1BsYW5uZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsIFN0YXRlPiB7XG4gIHdlZWtUZXh0c1NhdmluZ0pvYjogUGVuZGluZ0pvYjtcbiAgc3RhdGljIGNvbnRleHRUeXBlID0gTGFuZ3VhZ2VDb250ZXh0O1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgdXNlclRhc2tzOiBbXSxcbiAgICAgIHdlZWtEYXRlOiBEYXRlLm5vdygpLFxuICAgICAgb3BlbkNvdXJzZXM6IHt9LFxuICAgICAgZGlhbG9nczogW10sXG4gICAgICBzYXZpbmc6IGZhbHNlLFxuICAgICAgd2Vla1RleHRzVVQ6IG51bGwsXG4gICAgICBpc0xvYWRpbmc6IHRydWUsXG4gICAgICBpc0NvcHlpbmdUYXNrczogZmFsc2VcbiAgICB9XG4gICAgdGhpcy5vbkNoYW5nZSA9IHRoaXMub25DaGFuZ2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLndlZWtUZXh0c1NhdmluZ0pvYiA9IG5ldyBQZW5kaW5nSm9iKCgpPT50aGlzLnNhdmVXZWVrVGV4dHMoKSk7XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLnByb3BzLmVudi51c2VyVGFza3NSZXBvLnN1YnNjcmliZSh0aGlzLm9uQ2hhbmdlKTtcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIHRoaXMucHJvcHMuZW52LnVzZXJUYXNrc1JlcG8udW5zdWJzY3JpYmUodGhpcy5vbkNoYW5nZSk7XG4gICAgdGhpcy53ZWVrVGV4dHNTYXZpbmdKb2Iuc3RvcCgpO1xuICB9XG5cbiAgb25DaGFuZ2UodXNlclRhc2tzOiBVc2VyVGFza1tdLCBwZXJzaXN0ZWQ6IFdlZWtQbGFubmVyUGVyc2lzdGVkU3RhdGUsIHdlZWtUZXh0c1VUOiBVc2VyVGFzaykge1xuICAgIGNvbnN0IG5ld1N0YXRlIDogUGFydGlhbDxTdGF0ZT4gPSB7XG4gICAgICB1c2VyVGFza3MsXG4gICAgICB3ZWVrRGF0ZTogcGVyc2lzdGVkLndlZWtEYXRlLFxuICAgICAgb3BlbkNvdXJzZXM6IHBlcnNpc3RlZC5vcGVuQ291cnNlcyxcbiAgICAgIHdlZWtUZXh0c1VULFxuICAgICAgaXNMb2FkaW5nOiBmYWxzZVxuICAgIH1cbiAgICBpZiAoIXRoaXMuc3RhdGUud2Vla1RleHRzVVQgfHwgKHdlZWtUZXh0c1VULmRhdGVUaW1lICE9PSB0aGlzLnN0YXRlLndlZWtUZXh0c1VULmRhdGVUaW1lKSkge1xuICAgICAgLy8gQ2hhbmdpbmcgd2Vlay4gUmVzZXQgdG8gbmV3IHdlZWsncyB2YWx1ZXNcbiAgICAgIG5ld1N0YXRlLnN0cmF0ZWd5ID0gd2Vla1RleHRzVVQud2Vla1RleHRzLnN0cmF0ZWd5O1xuICAgICAgbmV3U3RhdGUuYXNzZXNzbWVudCA9IHdlZWtUZXh0c1VULndlZWtUZXh0cy5hc3Nlc3NtZW50O1xuICAgIH1cbiAgICB0aGlzLnNldFN0YXRlKG5ld1N0YXRlIGFzIGFueSk7IC8vIFJlYWN0J3MgdXNlIG9mIFBpY2sgaW5zdGVhZCBvZiBQYXJ0aWFsIG1ha2VzIHRoaW5ncyBjb21wbGV4IGhlcmUuXG4gIH1cblxuICBpc1dlZWtUZXh0c0VkaXRlZCgpIHtcbiAgICBjb25zdCB7IHN0cmF0ZWd5LCBhc3Nlc3NtZW50LCB3ZWVrVGV4dHNVVCB9ID0gdGhpcy5zdGF0ZTtcbiAgICByZXR1cm4gISF3ZWVrVGV4dHNVVCAmJiAoc3RyYXRlZ3kgIT09IHdlZWtUZXh0c1VULndlZWtUZXh0cy5zdHJhdGVneSB8fCBhc3Nlc3NtZW50ICE9PSB3ZWVrVGV4dHNVVC53ZWVrVGV4dHMuYXNzZXNzbWVudCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHNhdmVXZWVrVGV4dHMoKSB7XG4gICAgY29uc29sZS5sb2coXCJTYXZpbmcgdGV4dHMuLi5cIik7XG4gICAgY29uc3QgeyBzdHJhdGVneSwgYXNzZXNzbWVudCwgd2Vla1RleHRzVVQgfSA9IHRoaXMuc3RhdGU7XG4gICAgaWYgKHRoaXMuaXNXZWVrVGV4dHNFZGl0ZWQoKSkge1xuICAgICAgYXdhaXQgdGhpcy5wcm9wcy5lbnYudXNlclRhc2tzUmVwby51cHNlcnQod2Vla1RleHRzVVQsIHV0ID0+IHtcbiAgICAgICAgdXQud2Vla1RleHRzID0geyBzdHJhdGVneSwgYXNzZXNzbWVudCB9O1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJldldlZWsoKSB7XG4gICAgLy90aGlzLnNhdmVXZWVrVGV4dHMoKTsgXG4gICAgdmFyIHByZXZXZWVrT2JqID0gZ2V0UHJldldlZWtEYXRlKG1vbWVudCh0aGlzLnN0YXRlLndlZWtEYXRlKSk7XG4gICAgdGhpcy5wcm9wcy5lbnYudXNlclRhc2tzUmVwby5jaGFuZ2VXZWVrKHByZXZXZWVrT2JqLm5leHREYXRlLCBwcmV2V2Vla09iai5hZGp1c3RlZCk7XG4gIH1cblxuICBuZXh0V2VlaygpIHtcbiAgICAvL3RoaXMuc2F2ZVdlZWtUZXh0cygpO1xuICAgIHZhciBuZXh0V2Vla09iaiA9IGdldE5leHRXZWVrRGF0ZShtb21lbnQodGhpcy5zdGF0ZS53ZWVrRGF0ZSkpO1xuICAgIHRoaXMucHJvcHMuZW52LnVzZXJUYXNrc1JlcG8uY2hhbmdlV2VlayhuZXh0V2Vla09iai5uZXh0RGF0ZSwgbmV4dFdlZWtPYmouYWRqdXN0ZWQpO1xuICB9XG5cbiAgb3BlbkRpYWxvZyhkaWFsb2cpIHtcbiAgICB0aGlzLnNldFN0YXRlKHsgZGlhbG9nczogWy4uLnRoaXMuc3RhdGUuZGlhbG9ncywgZGlhbG9nXSB9KTtcbiAgfVxuXG4gIG9wZW5BZGRHb2FsRGlhbG9nKCkge1xuICAgIHRoaXMub3BlbkRpYWxvZyg8QWRkQ3VzdG9tR29hbFxuICAgICAgb25TYXZlPXthc3luYyAobGVhcm5pbmdHb2FsOiBzdHJpbmcpID0+IHtcbiAgICAgICAgaWYgKCFsZWFybmluZ0dvYWwpIHRocm93IG5ldyBFcnJvciAodGhpcy5jb250ZXh0LmludGwuZm9ybWF0TWVzc2FnZSh7aWQ6J3dlZWtwbGFubmVyLmVtcHR5TGVhcm5pbmdHb2FsRXJyJywgZGVmYXVsdE1lc3NhZ2U6ICdMw6RyYW5kZW3DpWxldCBrYW4gaW50ZSB2YXJhIHRvbXQnfSkpO1xuICAgICAgICBpZiAoIXRoaXMuc3RhdGUuc2F2aW5nKSB7XG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHNhdmluZzogdHJ1ZSB9KTtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGRDdXN0b21Hb2FsKGxlYXJuaW5nR29hbCk7XG4gICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBzYXZpbmc6IGZhbHNlIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKCk7XG4gICAgICAgIH1cbiAgICAgIH19IC8+KTtcbiAgfVxuXG4gIG9wZW5BZGRPd25UYXNrRGlhbG9nKGNvdXJzZU5hbWU6IHN0cmluZywgbGVhcm5pbmdHb2FsTmFtZTogc3RyaW5nKSB7XG4gICAgdGhpcy5vcGVuRGlhbG9nKDxBZGRDdXN0b21UYXNrXG4gICAgICBpc1Rhc2s9eyFjb3Vyc2VOYW1lfVxuICAgICAgb25TYXZlPXthc3luYyAobmFtZTogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nLCB1cmw6IHN0cmluZykgPT4ge1xuICAgICAgICBpZiAoIW5hbWUpIHRocm93IG5ldyBFcnJvciAodGhpcy5jb250ZXh0LmludGwuZm9ybWF0TWVzc2FnZSh7aWQ6J3dlZWtwbGFubmVyLm5hbWVDYW5ub3RCZUVtcHR5JywgZGVmYXVsdE1lc3NhZ2U6ICdOYW1uZXQga2FuIGludGUgdmFyYSB0b210J30pKTtcbiAgICAgICAgaWYgKCF0aGlzLnN0YXRlLnNhdmluZykge1xuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBzYXZpbmc6IHRydWUgfSk7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYWRkQ3VzdG9tVGFzayhjb3Vyc2VOYW1lLCBsZWFybmluZ0dvYWxOYW1lLCBuYW1lLCBkZXNjcmlwdGlvbiwgdXJsKTtcbiAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHNhdmluZzogZmFsc2UgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuY2xvc2VEaWFsb2coKTtcbiAgICAgICAgfVxuICAgICAgfX0gLz4pO1xuICB9XG5cbiAgZWRpdFRhc2sodXNlclRhc2s6IFVzZXJUYXNrKSB7XG4gICAgdGhpcy5vcGVuRGlhbG9nKDxFZGl0VXNlclRhc2tcbiAgICAgIHVzZXJUYXNrc1JlcG89e3RoaXMucHJvcHMuZW52LnVzZXJUYXNrc1JlcG99XG4gICAgICB1c2VyVGFzaz17dXNlclRhc2t9XG4gICAgICBvblVwZGF0ZT17YXN5bmMgKHVwZGF0ZXI6ICh1dDogVXNlclRhc2spID0+IHZvaWQpID0+IHtcbiAgICAgICAgY29uc3QgdGVzdCA9IHsuLi51c2VyVGFza307XG4gICAgICAgIHVwZGF0ZXIodGVzdCk7XG4gICAgICAgIGlmICghdGVzdC5uYW1lKSB0aHJvdyBuZXcgRXJyb3IgKHRoaXMuY29udGV4dC5pbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOid3ZWVrcGxhbm5lci5uYW1lTXVzdE5vdEJlRW1wdHknLCBkZWZhdWx0TWVzc2FnZTogJ05hbW5ldCBmw6VyIGludGUgdmFyYSB0b210J30pKTtcbiAgICAgICAgdGhpcy5jbG9zZURpYWxvZygpO1xuICAgICAgICBhd2FpdCB0aGlzLnByb3BzLmVudi51c2VyVGFza3NSZXBvLnVwZGF0ZShbdXNlclRhc2tdLCB1cGRhdGVyKTtcbiAgICAgIH19XG4gICAgICBvbkRlbGV0ZT17YXN5bmMgaWQgPT4ge1xuICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKCk7XG4gICAgICAgIGF3YWl0IHRoaXMucHJvcHMuZW52LnVzZXJUYXNrc1JlcG8uZGVsZXRlKFtpZF0pO1xuICAgICAgfX1cbiAgICAgIG9wZW5EaWFsb2c9e2RpYWxvZz0+dGhpcy5vcGVuRGlhbG9nKGRpYWxvZyl9XG4gICAgICBjbG9zZURpYWxvZz17KCk9PnRoaXMuY2xvc2VEaWFsb2coKX1cbiAgICAvPik7XG4gIH1cblxuICBlZGl0U3ViVGFzayh1c2VyVGFzazogVXNlclRhc2ssIHN1YlRhc2s6IFVzZXJTdWJUYXNrKSB7XG4gICAgdGhpcy5vcGVuRGlhbG9nKDxBZGRPckVkaXRTdWJUYXNrXG4gICAgICB1c2VyVGFza3NSZXBvPXt0aGlzLnByb3BzLmVudi51c2VyVGFza3NSZXBvfVxuICAgICAgbW9kZT1cImVkaXRcIlxuICAgICAgdXNlclRhc2s9e3VzZXJUYXNrfVxuICAgICAgc3ViVGFzaz17c3ViVGFza31cbiAgICAgIGNsb3NlRGlhbG9nPXsoKT0+dGhpcy5jbG9zZURpYWxvZygpfVxuICAgIC8+KTtcbiAgfVxuXG4gIGNsb3NlRGlhbG9nKCkge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBkaWFsb2dzOiB0aGlzLnN0YXRlLmRpYWxvZ3Muc2xpY2UoMCwgdGhpcy5zdGF0ZS5kaWFsb2dzLmxlbmd0aCAtIDEpIH0pO1xuICB9XG5cblxuXG4gIGFzeW5jIGFkZEN1c3RvbUdvYWwobGVhcm5pbmdHb2FsOiBzdHJpbmcpIHtcbiAgICBsZXQgbGF0ZXN0VGltZVN0YW1wID0gTWF0aC5tYXguYXBwbHkoXG4gICAgICBNYXRoLm1heCxcbiAgICAgIFt0aGlzLnN0YXRlLndlZWtEYXRlXS5jb25jYXQodGhpcy5zdGF0ZS51c2VyVGFza3MubWFwKHQgPT4gdC5kYXRlVGltZSkpKTtcblxuICAgIGF3YWl0IHRoaXMucHJvcHMuZW52LnVzZXJUYXNrc1JlcG8uaW5zZXJ0KFt7XG4gICAgICBpZDogY3JlYXRlVVVJRCgpLFxuICAgICAgbGVhcm5pbmdHb2FsLFxuICAgICAgZGF0ZVRpbWU6IGxhdGVzdFRpbWVTdGFtcCArIDIwMDBcbiAgICB9XSk7XG5cbiAgICBhd2FpdCB0aGlzLnByb3BzLmVudi51c2VyVGFza3NSZXBvLnNldFdlZWtQbGFubmVyQm94T3BlbihcIlwiLCB0cnVlKTtcbiAgfVxuXG4gIGFzeW5jIHJlbW92ZUxlYXJuaW5nR29hbChsZWFybmluZ0dvYWw6IFZpcnR1YWxMZWFybmluZ0dvYWwpIHtcbiAgICBpZiAobGVhcm5pbmdHb2FsLnRhc2tzLmxlbmd0aCA+IDApIHtcbiAgICAgIGlmICghY29uZmlybSh0aGlzLmNvbnRleHQuaW50bC5mb3JtYXRNZXNzYWdlKHtpZDond2Vla3BsYW5uZXIuY29uZmlybVJlbW92ZUxlYXJuaW5nT2JqZWN0aXZlcycsIGRlZmF1bHRNZXNzYWdlOiAnVGEgYm9ydCBsw6RyYW5kZW3DpWwgc2FtdCB7bGVhcm5pbmdHb2Fsc051bWJlcn0gdXBwZ2lmdGVyPyd9LCB7bGVhcm5pbmdHb2Fsc051bWJlcjogbGVhcm5pbmdHb2FsLnRhc2tzLmxlbmd0aH0pKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIGF3YWl0IHRoaXMucHJvcHMuZW52LnVzZXJUYXNrc1JlcG8uZGVsZXRlKGxlYXJuaW5nR29hbC5hbGxUYXNrcy5tYXAodCA9PiB0LmlkKSk7XG4gIH1cblxuICBhc3luYyBhZGRDdXN0b21UYXNrKGNvdXJzZU5hbWU6IHN0cmluZywgbGVhcm5pbmdHb2FsOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZywgdXJsOiBzdHJpbmcpIHtcbiAgICBsZXQgbGF0ZXN0VGltZVN0YW1wID0gTWF0aC5tYXguYXBwbHkoXG4gICAgICBNYXRoLm1heCxcbiAgICAgIFt0aGlzLnN0YXRlLndlZWtEYXRlXS5jb25jYXQodGhpcy5zdGF0ZS51c2VyVGFza3MubWFwKHQgPT4gdC5kYXRlVGltZSkpKTtcblxuICAgIC8qY29uc3QgZW1wdHlMZWFybmluZ0dvYWxQbGFjZWhvbGRlciA9IHRoaXMuc3RhdGUudXNlclRhc2tzLmZpbmQodXQgPT5cbiAgICAgIHV0Lm5hbWUgPT0gbnVsbCAmJlxuICAgICAgIXV0LmNvdXJzZU5hbWUgJiZcbiAgICAgIHV0LmxlYXJuaW5nR29hbCA9PT0gbGVhcm5pbmdHb2FsKTtcblxuICAgIGlmIChlbXB0eUxlYXJuaW5nR29hbFBsYWNlaG9sZGVyKSB7XG4gICAgICAvLyBIaWphY2sgbGVhcm5pbmctZ29hbCBwbGFjZWhvbGRlciBhbmQgbWFrZSBpdCB0aGUgcmVhbCB0YXNrLlxuICAgICAgLy8gVGhpcyB3aWxsIG1ha2UgdGhlIGxlYXJuaW5nIGdvYWwgZGlzYXBwZWFyIG9uY2UgdGhpcyB0YXNrXG4gICAgICAvLyBpcyBkZWxldGVkLlxuICAgICAgYXdhaXQgdXNlclRhc2tzUmVwby51cGRhdGUoW2VtcHR5TGVhcm5pbmdHb2FsUGxhY2Vob2xkZXJdLCB1dCA9PiB7XG4gICAgICAgIE9iamVjdC5hc3NpZ24odXQsIHsgbmFtZSwgZGVzY3JpcHRpb24sIHVybCB9KTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7Ki9cbiAgICAgIC8vIEFkZCBhbm90aGVyIHRhc2sgdG8gc2FtZSBsZWFybmluZy1nb2FsXG4gICAgICBhd2FpdCB0aGlzLnByb3BzLmVudi51c2VyVGFza3NSZXBvLmluc2VydChbe1xuICAgICAgICBpZDogY3JlYXRlVVVJRCgpLFxuICAgICAgICBkYXRlVGltZTogbGF0ZXN0VGltZVN0YW1wICsgMjAwMCxcbiAgICAgICAgY291cnNlTmFtZSxcbiAgICAgICAgbGVhcm5pbmdHb2FsLFxuICAgICAgICBuYW1lLFxuICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgdXJsXG4gICAgICB9XSk7XG4gICAgLy99XG4gIH1cblxuICBzZXRJc09wZW4oY291cnNlTmFtZTogc3RyaW5nLCBpc09wZW46IGJvb2xlYW4pIHtcbiAgICB0aGlzLnByb3BzLmVudi51c2VyVGFza3NSZXBvLnNldFdlZWtQbGFubmVyQm94T3Blbihjb3Vyc2VOYW1lLCBpc09wZW4pO1xuICB9XG5cbiAgYXN5bmMgc2V0VGFza0RvbmUodGFzazogVXNlclRhc2ssIGRvbmU6IGJvb2xlYW4pIHtcbiAgICBhd2FpdCB0aGlzLnByb3BzLmVudi51c2VyVGFza3NSZXBvLnNldFRhc2tEb25lU3RhdGUodGFzaywgZG9uZSk7XG4gIH1cblxuICBhc3luYyBzZXRTdWJUYXNrRG9uZSh0YXNrOiBVc2VyVGFzaywgc3ViVGFzazogVXNlclN1YlRhc2ssIGRvbmU6IGJvb2xlYW4pIHtcbiAgICBhd2FpdCB0aGlzLnByb3BzLmVudi51c2VyVGFza3NSZXBvLnNldFN1YlRhc2tEb25lU3RhdGUodGFzaywgc3ViVGFzay5pZCwgZG9uZSk7XG4gIH1cblxuICBhc3luYyBjb3B5RnJvbVByZXZpb3VzV2VlaygpIHtcbiAgICBhd2FpdCB0aGlzLnNldFN0YXRlKHtpc0NvcHlpbmdUYXNrczogdHJ1ZX0pO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHVzZXJUYXNrcywgb3BlbkNvdXJzZXMsIHdlZWtEYXRlIH0gPSB0aGlzLnN0YXRlO1xuXG4gICAgICBjb25zdCBwcmV2V2VlayA9IG1vbWVudCh3ZWVrRGF0ZSkuYWRkKC0xLCAnd2VlaycpO1xuICAgICAgY29uc3QgcHJldldlZWtObyA9IGdldEFkanVzdGVkV2VlayAocHJldldlZWspO1xuICAgICAgY29uc3QgcHJldktFRFdlZWsgPSBLRURXZWVrKHByZXZXZWVrLnllYXIoKSwgcHJldldlZWtObyk7XG4gICAgICAvLyBSZWFkIGxhc3Qgd2VlaydzIGdvYWxzIGFuZCB0YXNrc1xuICAgICAgbGV0IHByZXZUYXNrcyA9IGF3YWl0IHRoaXMucHJvcHMuZW52LmtlZEJhY2tlbmRDbGllbnQubGlzdDxVc2VyVGFzaz4oXCJ1c2VydGFza3NcIiwge1xuICAgICAgICBmcm9tOiBwcmV2S0VEV2Vlay5ub3RCZWZvcmUsXG4gICAgICAgIHRvOiBwcmV2S0VEV2Vlay5ub3RBZnRlcixcbiAgICAgICAgcm9sZTogXCJVU0VSXCIsXG4gICAgICAgIGluY2x1ZGU6IFtcInRhc2tcIiwgXCJjb3Vyc2VcIiwgXCJhY2xcIl0sXG4gICAgICAgIGZsYWdzOiBbXCJpbmNsdWRlSWRzT25seVwiXVxuICAgICAgfSk7XG4gICAgICBwcmV2VGFza3MgPSBwcmV2VGFza3NcbiAgICAgICAgLmZpbHRlcihwcmV2VGFzayA9PiAhcHJldlRhc2suZG9uZSkgIC8vIERvbid0IGNvcHkgZG9uZSB0YXNrc1xuICAgICAgICAuZmlsdGVyKHByZXZUYXNrID0+ICEhcHJldlRhc2submFtZSkgLy8gRG9uJ3QgY29weSBlbXB0eSBsZWFybmluZyBnb2Fsc1xuICAgICAgICAuZmlsdGVyKHByZXZUYXNrID0+ICF1c2VyVGFza3Muc29tZSh0YXNrT2ZDdXJyZW50V2VlayA9PlxuICAgICAgICAgIHRhc2tPZkN1cnJlbnRXZWVrLm5hbWUgPT09IHByZXZUYXNrLm5hbWUgJiZcbiAgICAgICAgICB0YXNrT2ZDdXJyZW50V2Vlay5sZWFybmluZ0dvYWwgPT09IHByZXZUYXNrLmxlYXJuaW5nR29hbCAmJlxuICAgICAgICAgIHRhc2tPZkN1cnJlbnRXZWVrLmNvdXJzZU5hbWUgPT09IHByZXZUYXNrLmNvdXJzZU5hbWUpKTsgLy8gSWdub3JlIGlkZW50aWNhbCB0YXNrcyAoYWxyZWFkeSBjb3BpZWQpXG4gICAgICAgICAgXG4gICAgICB2YXIgdGVzdCA9IFt3ZWVrRGF0ZV0uY29uY2F0KHVzZXJUYXNrcy5tYXAodCA9PiB0LmRhdGVUaW1lKSk7XG4gICAgICAvLyBOb3cgY3JlYXRlIGNvcGllcyBidXQgcGxhY2UgdGhlbSBpbiB0aGUgY3VycmVudCB3ZWVrLlxuICAgICAgbGV0IGxhdGVzdFRpbWVTdGFtcCA9IE1hdGgubWF4LmFwcGx5KE1hdGgubWF4LCBbd2Vla0RhdGVdLmNvbmNhdCh1c2VyVGFza3MubWFwKHQgPT4gdC5kYXRlVGltZSkpKTtcblxuICAgICAgY29uc3QgY29waWVzID0gcHJldlRhc2tzLnNvcnQoY29tcGFyZVByb3AoXCJkYXRlVGltZVwiKSkubWFwKHRhc2sgPT4ge1xuICAgICAgICBjb25zdCBjb3B5OiBVc2VyVGFzayA9IHsgLi4udGFzaywgZGF0ZVRpbWU6IGxhdGVzdFRpbWVTdGFtcCArPSAxMDAwIH07XG4gICAgICAgIGNvcHkuaWQgPSBjcmVhdGVVVUlEKCk7XG4gICAgICAgIGlmIChjb3B5LnN1YlRhc2tzKSB7XG4gICAgICAgICAgY29weS5zdWJUYXNrcyA9IGNvcHkuc3ViVGFza3MuZmlsdGVyKHN0ID0+ICFzdC5kb25lKTtcbiAgICAgICAgfVxuICAgICAgICBkZWxldGUgY29weS4kZXRhZztcbiAgICAgICAgcmV0dXJuIGNvcHk7XG4gICAgICB9KTtcblxuICAgICAgLy8gU3RvcmUgaXRcbiAgICAgIGF3YWl0IHRoaXMucHJvcHMuZW52LnVzZXJUYXNrc1JlcG8uaW5zZXJ0KGNvcGllcyk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe2lzQ29weWluZ1Rhc2tzOiBmYWxzZX0pO1xuICAgIH1cbiAgfVxuXG4gIGdldEhlYWRlclRpdGxlKCl7XG4gICAgcmV0dXJuIDxoND48Rm9ybWF0dGVkTWVzc2FnZSBpZD1cIndlZWtwbGFubmVyLmxvZ0Jvb2tcIiAgZGVmYXVsdE1lc3NhZ2U9XCJMb2dnYm9rXCIvPjwvaDQ+O1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHdlZWtOdW1iZXIgPSBtb21lbnQodGhpcy5zdGF0ZS53ZWVrRGF0ZSkud2VlaygpO1xuICAgIGNvbnN0IHNob3dQcm9ncmVzc0NoYXJ0cyA9IGZlYXR1cmVzLndlZWtwbGFubmVyQ2hhcnRzO1xuICAgIC8vY29uc29sZS5sb2coXCJXZWVreWRhdGU6IFwiICArIG5ldyBEYXRlKHRoaXMuc3RhdGUud2Vla0RhdGUpICsgXCIgd2hpY2ggaXMgd2VlayBubyBcIiArIHdlZWtOdW1iZXIpO1xuICAgIGNvbnN0IGN1cnJlbnRXZWVrID0gbW9tZW50KCkud2VlaygpO1xuICAgIGNvbnN0IHRhc2tTZXRzID0gcmVmaW5lKHRoaXMuc3RhdGUudXNlclRhc2tzKTtcbiAgICBjb25zdCB7IGRpYWxvZ3MsIHdlZWtUZXh0c1VULCBzdHJhdGVneSwgYXNzZXNzbWVudCwgaXNMb2FkaW5nLCBpc0NvcHlpbmdUYXNrcyB9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCBpc1NhdmluZyA9IHdlZWtUZXh0c1VUICYmICh3ZWVrVGV4dHNVVC4kbWV0YSA9PT0gJ2FkZGluZycgfHwgd2Vla1RleHRzVVQuJG1ldGEgPT09ICd1cGRhdGluZycpO1xuICAgIGNvbnN0IGlzU3RyYXRlZ3lFZGl0ZWQgPSAhIXdlZWtUZXh0c1VUICYmIChzdHJhdGVneSAhPT0gd2Vla1RleHRzVVQud2Vla1RleHRzLnN0cmF0ZWd5KTtcbiAgICBjb25zdCBpc0Fzc2Vzc21lbnRFZGl0ZWQgPSAhIXdlZWtUZXh0c1VUICYmIChhc3Nlc3NtZW50ICE9PSB3ZWVrVGV4dHNVVC53ZWVrVGV4dHMuYXNzZXNzbWVudCk7XG4gICAgY29uc3QgZW5hYmxlU2F2ZUJ1dHRvbiA9ICFpc1NhdmluZyAmJiAoaXNTdHJhdGVneUVkaXRlZCB8fCBpc0Fzc2Vzc21lbnRFZGl0ZWQpO1xuXG4gICAgdmFyIGNoYXJ0VGFza3MgPSBnZXRXZWVrcGxhbm5lclByb2dyZXNzRGF0YSh0YXNrU2V0cyk7XG5cbiAgICB2YXIgcGVyY2VudGFnZSA9IHRhc2tTZXRzLmxlbmd0aCA+IDAgPyBjaGFydFRhc2tzLmNvbXBsZXRlZFRhc2tzIC8gY2hhcnRUYXNrcy50b3RhbE51bWJlck9mVGFza3MgKiAxMDAgOiAwO1xuICAgIHJldHVybiA8ZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9e2BrZWRfYm94ZWQgd2Vla1BsYW5uZXIke3dlZWtOdW1iZXIgPT09IGN1cnJlbnRXZWVrID8gXCIgY3VycmVudFdlZWtcIiA6IFwiXCJ9YH1cbiAgICAgICAgb25LZXlEb3duPXtldiA9PiB7XG4gICAgICAgICAgaWYgKGV2LndoaWNoID09PSA4MyAmJiBldi5jdHJsS2V5KSB7XG4gICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgaWYgKCFpc1NhdmluZyAmJiB0aGlzLmlzV2Vla1RleHRzRWRpdGVkKCkpIHtcbiAgICAgICAgICAgICAgdGhpcy53ZWVrVGV4dHNTYXZpbmdKb2IudHJpZ2dlckNoYW5nZSgwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH19PlxuICAgICAgICB7c2hvd1Byb2dyZXNzQ2hhcnRzICYmIHRoaXMuZ2V0SGVhZGVyVGl0bGUoKX1cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3aWRnZXRzXCI+XG4gICAgICAgICAge3Nob3dQcm9ncmVzc0NoYXJ0cyA/IDxkaXYgY2xhc3NOYW1lPVwicHJvZ3Jlc3NCYXJcIj48UHJvZ3Jlc3MgcGVyY2VudGFnZSA9IHtwZXJjZW50YWdlfS8+PC9kaXY+IDogdGhpcy5nZXRIZWFkZXJUaXRsZSgpfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgd2Vla1NlbGVjdGB9PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbVwiPlxuICAgICAgICAgICAgICA8cD48Rm9ybWF0dGVkTWVzc2FnZSBpZD1cIndlZWtwbGFubmVyLndlZWtOdW1iZXJcIiB2YWx1ZXM9e3t3ZWVrTnVtYmVyOiB3ZWVrTnVtYmVyfX0gZGVmYXVsdE1lc3NhZ2U9XCJWZWNrYSB7d2Vla051bWJlcn1cIi8+PC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnRuLWdyb3VwXCI+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJidG5cIiBvbkNsaWNrPXsoKSA9PiB0aGlzLnByZXZXZWVrKCl9PlxuICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtYW5nbGUtbGVmdFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImJ0blwiIG9uQ2xpY2s9eygpID0+IHRoaXMubmV4dFdlZWsoKX0+XG4gICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1hbmdsZS1yaWdodFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAge3Rhc2tTZXRzLmxlbmd0aCA+IDAgJiYgPGhyIC8+fVxuXG4gICAgICAgIHt0YXNrU2V0cy5tYXAocHJvcHMgPT5cbiAgICAgICAgICA8VXNlclRhc2tzQm94XG4gICAgICAgICAgICBrZXk9e3Byb3BzLmNvdXJzZU5hbWV9XG4gICAgICAgICAgICB7Li4ucHJvcHN9XG4gICAgICAgICAgICBjb3Vyc2VOYW1lPXtwcm9wcy5jb3Vyc2VOYW1lfVxuICAgICAgICAgICAgbGVhcm5pbmdHb2Fscz17cHJvcHMubGVhcm5pbmdHb2Fsc31cbiAgICAgICAgICAgIHZpZXdDb3Vyc2VVcmw9e3RoaXMucHJvcHMudmlld0NvdXJzZVVybH1cbiAgICAgICAgICAgIG9wZW5Db3Vyc2VzPXt0aGlzLnN0YXRlLm9wZW5Db3Vyc2VzfVxuICAgICAgICAgICAgYWRkT3duVGFzaz17KGNvdXJzZU5hbWU6IHN0cmluZywgbGVhcm5pbmdHb2FsTmFtZTogc3RyaW5nKSA9PiB0aGlzLm9wZW5BZGRPd25UYXNrRGlhbG9nKGNvdXJzZU5hbWUsIGxlYXJuaW5nR29hbE5hbWUpfVxuICAgICAgICAgICAgc2V0SXNPcGVuPXt0aGlzLnNldElzT3Blbi5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgc2V0VGFza0RvbmU9e3RoaXMuc2V0VGFza0RvbmUuYmluZCh0aGlzKX1cbiAgICAgICAgICAgIHNldFN1YlRhc2tEb25lPXt0aGlzLnNldFN1YlRhc2tEb25lLmJpbmQodGhpcyl9XG4gICAgICAgICAgICBlZGl0VGFzaz17dGFzayA9PiB0aGlzLmVkaXRUYXNrKHRhc2spfVxuICAgICAgICAgICAgZWRpdFN1YlRhc2s9eyh0YXNrLCBzdWJUYXNrKSA9PiB0aGlzLmVkaXRTdWJUYXNrKHRhc2ssIHN1YlRhc2spfVxuICAgICAgICAgICAgcmVtb3ZlTGVhcm5pbmdHb2FsPXtsZyA9PiB0aGlzLnJlbW92ZUxlYXJuaW5nR29hbChsZyl9IFxuICAgICAgICAgICAgZGlzcGxheVByb2dyZXNzID0ge3Nob3dQcm9ncmVzc0NoYXJ0c31cbiAgICAgICAgICAgIHByb2dyZXNzRGF0YSA9IHtjaGFydFRhc2tzLnN1YmplY3REYXRhW3Byb3BzLmNvdXJzZU5hbWVdfSAvPil9XG5cbiAgICAgICAgPGhyIC8+XG5cbiAgICAgICAge2lzTG9hZGluZyA/IDxTcGlubmVyIC8+IDogPGRpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ0blwiIG9uQ2xpY2s9e2V2ID0+IHRoaXMub3BlbkFkZEdvYWxEaWFsb2coKX0+XG4gICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1saXN0LWFsdFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cbiAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwid2Vla3BsYW5uZXIubGVhcm5pbmdHb2FsXCIgZGVmYXVsdE1lc3NhZ2U9XCJFZ2V0IGzDpHJhbmRlbcOlbFwiLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ0blwiIHN0eWxlPXtpc0NvcHlpbmdUYXNrcyA/IHtvcGFjaXR5OiAwLjV9IDogdW5kZWZpbmVkfSBvbkNsaWNrPXtldiA9PiAoIWlzQ29weWluZ1Rhc2tzKSAmJiB0aGlzLmNvcHlGcm9tUHJldmlvdXNXZWVrKCl9PlxuICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtY2xvbmVcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XG4gICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZSBpZD1cIndlZWtwbGFubmVyLmNvcHlQcmV2aW91c1dlZWtUYWtzXCIgZGVmYXVsdE1lc3NhZ2U9XCJLb3BpZXJhIGVqIGtsYXJhIGZyw6VuIGbDtnJlZ8OlZW5kZSB2ZWNrYVwiLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8T3BlbkNsb3NlQm94XG4gICAgICAgICAgICB0aXRsZT17PGg1PjxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwid2Vla3BsYW5uZXIuc3RyYXRlZ3lBbmRFdmFsdWF0aW9uXCIgZGVmYXVsdE1lc3NhZ2U9XCJTdHJhdGVnaSAmIFV0dsOkcmRlcmluZ1wiLz48L2g1Pn1cbiAgICAgICAgICAgIGhlYWRlck9wZW49e3RoaXMuc3RhdGUub3BlbkNvdXJzZXNbXCJTdHJhdFV0dlwiXX1cbiAgICAgICAgICAgIG9uT3BlbkNsb3NlPXtiZWNhbWVPcGVuID0+IHRoaXMuc2V0SXNPcGVuKFwiU3RyYXRVdHZcIiwgYmVjYW1lT3Blbil9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPGgzPjxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwid2Vla3BsYW5uZXIuc3RyYXRlZ3lcIiBkZWZhdWx0TWVzc2FnZT1cIlN0cmF0ZWdpXCIvPjwvaDM+XG4gICAgICAgICAgICA8cD48Rm9ybWF0dGVkTWVzc2FnZSBpZD1cIndlZWtwbGFubmVyLnN0cmF0ZWd5RGVzY3JpcHRpb25cIiBkZWZhdWx0TWVzc2FnZT1cIkh1ciBqYWcgc2thIGfDtnJhIGbDtnIgYXR0IGzDpHJhIG1pZy5cIi8+PC9wPlxuICAgICAgICAgICAgPGhyLz5cbiAgICAgICAgICAgIDx0ZXh0YXJlYVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3ZWVrcGxhbm5lci10ZXh0YXJlYVwiXG4gICAgICAgICAgICAgIGRpc2FibGVkPXt0aGlzLnByb3BzLmVudi50dXRvcmVkfVxuICAgICAgICAgICAgICB2YWx1ZT17c3RyYXRlZ3kgJiYgc3RyYXRlZ3kuc3Vic3RyKDAsIE1BWF9TVFJBVEVHWV9MRU5HVEgpfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17ZXYgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe3N0cmF0ZWd5OiAoZXYudGFyZ2V0LnZhbHVlIHx8ICcnKS5zdWJzdHIoMCwgTUFYX1NUUkFURUdZX0xFTkdUSCl9KTtcbiAgICAgICAgICAgICAgICB0aGlzLndlZWtUZXh0c1NhdmluZ0pvYi50cmlnZ2VyQ2hhbmdlKDUwMCk7XG4gICAgICAgICAgICAgIH19IC8+XG5cbiAgICAgICAgICAgIDxoMz48Rm9ybWF0dGVkTWVzc2FnZSBpZD1cIndlZWtwbGFubmVyLmV2YWx1YXRpb25cIiBkZWZhdWx0TWVzc2FnZT1cIlV0dsOkcmRlcmluZ1wiLz48L2gzPlxuICAgICAgICAgICAgPHA+PEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJ3ZWVrcGxhbm5lci5ldmFsdWF0aW9uRGVzY3JpcHRpb25cIiBkZWZhdWx0TWVzc2FnZT1cIlJlZmxla3Rpb24ga3JpbmcgZGluIGFyYmV0c2luc2F0cyBvY2ggZGluYSB2YWxkYSBzdHJhdGVnaWVyIHVuZGVyIHZlY2thbi5VdHbDpHJkZXJhIGkgZsO2cmjDpWxsYW5kZSB0aWxsIGRpbmEgbcOlbC5cIi8+PC9wPlxuICAgICAgICAgICAgPGhyLz5cbiAgICAgICAgICAgIDx0ZXh0YXJlYVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3ZWVrcGxhbm5lci10ZXh0YXJlYVwiXG4gICAgICAgICAgICAgIHZhbHVlPXthc3Nlc3NtZW50ICYmIGFzc2Vzc21lbnQuc3Vic3RyKDAsIE1BWF9BU1NFU1NNRU5UX0xFTkdUSCl9XG4gICAgICAgICAgICAgIGRpc2FibGVkPXt0aGlzLnByb3BzLmVudi50dXRvcmVkfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17ZXYgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2Fzc2Vzc21lbnQ6IChldi50YXJnZXQudmFsdWUgfHwgJycpLnN1YnN0cigwLCBNQVhfQVNTRVNTTUVOVF9MRU5HVEgpfSlcbiAgICAgICAgICAgICAgICB0aGlzLndlZWtUZXh0c1NhdmluZ0pvYi50cmlnZ2VyQ2hhbmdlKDUwMCk7XG4gICAgICAgICAgICAgIH0gfS8+XG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ0blwiXG4gICAgICAgICAgICAgIHRhYkluZGV4PXswfVxuICAgICAgICAgICAgICBzdHlsZT17ZW5hYmxlU2F2ZUJ1dHRvbiA/IHt9IDoge29wYWNpdHk6IDAuNX19XG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpPT4haXNTYXZpbmcgJiYgdGhpcy53ZWVrVGV4dHNTYXZpbmdKb2IudHJpZ2dlckNoYW5nZSgwKX0+XG4gICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtZmxvcHB5LW9cIiBhcmlhLWhpZGRlbj1cInRydWVcIiAvPlxuICAgICAgICAgICAgICAgICAge2VuYWJsZVNhdmVCdXR0b24gPyA8Rm9ybWF0dGVkTWVzc2FnZSBpZD1cImNvbW1vbi5zYXZlXCIgZGVmYXVsdE1lc3NhZ2U9XCIgU3BhcmFcIi8+IDogPEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJjb21tb24uc2F2ZWRcIiBkZWZhdWx0TWVzc2FnZT1cIiBTcGFyYWRcIi8+fVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvT3BlbkNsb3NlQm94PlxuXG4gICAgICAgIDwvZGl2Pn1cbiAgICAgIDwvZGl2PlxuICAgICAgPERpYWxvZ3NcbiAgICAgICAgZGlhbG9ncz17ZGlhbG9nc31cbiAgICAgICAgcG9wRGlhbG9nPXsoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKFxuICAgICAgICAgICAgICAoe2RpYWxvZ3N9KSA9PiAoeyBkaWFsb2dzOiBkaWFsb2dzLnNsaWNlKDAsIGRpYWxvZ3MubGVuZ3RoIC0gMSkgfSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSAvPlxuICAgIDwvZGl2PlxuICB9XG59IiwiaW1wb3J0IHsgcGFyc2VRdWVyeVN0cmluZyB9IGZyb20gJy4uL3V0aWxzL3F1ZXJ5LXN0cmluZyc7XG5pbXBvcnQgRmVhdHVyZURlc2NyaXB0aW9ucyBmcm9tICcuL2ZlYXR1cmUtZmxhZ3MuanNvbic7XG5pbXBvcnQgeyBjZmcgfSBmcm9tICcuLi9nbG9iYWxzL0tFRC5jZmcnO1xuXG50eXBlIEZlYXR1cmVGbGFncyA9IHtyZWFkb25seSBbUCBpbiBrZXlvZiB0eXBlb2YgRmVhdHVyZURlc2NyaXB0aW9uc106IGJvb2xlYW59O1xuXG5leHBvcnQgaW50ZXJmYWNlIEZlYXR1cmVzIGV4dGVuZHMgRmVhdHVyZUZsYWdzIHt9XG5cbmV4cG9ydCBjbGFzcyBGZWF0dXJlcyB7XG4gIHByaXZhdGUgX2ZlYXR1cmVzOiBGZWF0dXJlRmxhZ3M7XG4gIHByaXZhdGUgX2luaXRpYWxpemVkID0gZmFsc2U7XG5cbiAgaW5pdCgpIHtcbiAgICBpZiAodGhpcy5faW5pdGlhbGl6ZWQpIHJldHVybjtcbiAgICBsZXQgdHVybmVkT25GZWF0dXJlcyA9IChjZmcuS0VEX0ZFQVRVUkVTIHx8IFwiXCIpLnNwbGl0KCcsJykubWFwKG5hbWUgPT4gbmFtZS50cmltKCkudG9Mb3dlckNhc2UoKSk7XG4gICAgY29uc3QgcXVlcnkgPSBwYXJzZVF1ZXJ5U3RyaW5nKGxvY2F0aW9uLnNlYXJjaCwge3RvTG93ZXI6IHRydWV9KTtcblxuICAgIGlmIChxdWVyeS50ZXN0dmVyc2lvbikge1xuICAgICAgdHVybmVkT25GZWF0dXJlcyA9IFtcIipcIl07XG4gICAgfVxuICAgIGlmIChxdWVyeS5mZWF0dXJlcykge1xuICAgICAgdHVybmVkT25GZWF0dXJlcyA9IHF1ZXJ5LmZlYXR1cmVzXG4gICAgICAgIC5zcGxpdCgnLCcpXG4gICAgICAgIC5tYXAoZmVhdHVyZSA9PiBmZWF0dXJlLnRyaW0oKS50b0xvd2VyQ2FzZSgpKTtcbiAgICB9XG4gICAgY29uc3QgdHVybk9uQWxsID0gdHVybmVkT25GZWF0dXJlcy5pbmNsdWRlcygnKicpO1xuICAgIHRoaXMuX2ZlYXR1cmVzID0ge30gYXMgRmVhdHVyZUZsYWdzO1xuICAgIGZvciAoY29uc3QgZmVhdHVyZU5hbWUgb2YgT2JqZWN0LmtleXMoRmVhdHVyZURlc2NyaXB0aW9ucykpIHtcbiAgICAgIHRoaXMuX2ZlYXR1cmVzW2ZlYXR1cmVOYW1lXSA9IHR1cm5PbkFsbCB8fFxuICAgICAgICB0dXJuZWRPbkZlYXR1cmVzLmluY2x1ZGVzKGZlYXR1cmVOYW1lLnRvTG93ZXJDYXNlKCkpXG4gICAgfVxuICAgIHRoaXMuX2luaXRpYWxpemVkID0gdHJ1ZTsgICAgXG4gIH1cblxuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgZm9yIChjb25zdCBmZWF0dXJlTmFtZSBvZiBPYmplY3Qua2V5cyhGZWF0dXJlRGVzY3JpcHRpb25zKSkge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIGZlYXR1cmVOYW1lLCB7XG4gICAgICAgIGdldCgpIHtcbiAgICAgICAgICBpZiAoIXRoaXMuX2luaXRpYWxpemVkKSB0aGlzLmluaXQoKTtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fZmVhdHVyZXNbZmVhdHVyZU5hbWVdO1xuICAgICAgICB9LFxuICAgICAgICBzZXQodmFsdWUpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZlYXR1cmUgZmxhZ3MgY2Fubm90IGJlIHNldCBoZXJlJyk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBmZWF0dXJlcyA9IG5ldyBGZWF0dXJlcygpO1xuIiwiZXhwb3J0ICogZnJvbSAnLi9mZWF0dXJlcyc7XG4iLCJpbXBvcnQgY2ZnIGZyb20gJy4uL2dsb2JhbHMvS0VELmNmZyc7XG5cbmRlY2xhcmUgdmFyIHByb2Nlc3M6IGFueTtcblxuY2ZnLkVOVklST05NRU5UID0gcHJvY2Vzcy5lbnYuRU5WSVJPTk1FTlQgYXMgXCJwcm9kdWN0aW9uXCIgfCBcImRldmVsb3BtZW50XCIgfCBcInRlc3RcIjtcbmNmZy5LRURfQVBJX1VSTCA9IHByb2Nlc3MuZW52LktFRF9BUElfVVJMOyAvLyBcImh0dHBzOi8va2VkYmFja2VuZHRlc3QuYXp1cmV3ZWJzaXRlcy5uZXQvYXBpL1wiXG5jZmcuRURTX0FQSV9VUkwgPSBwcm9jZXNzLmVudi5FRFNfQVBJX1VSTDsgLy8gXCJodHRwczovL2Vkc3BvcnRhbG93aW5hcGkuYXp1cmV3ZWJzaXRlcy5uZXQvYXBpL1wiXG5jZmcuS0VEX1RPS0VOX1VSTCA9IHByb2Nlc3MuZW52LktFRF9UT0tFTl9VUkw7IC8vIFwiaHR0cHM6Ly9rZWRhdXRodGVzdC5henVyZXdlYnNpdGVzLm5ldC90b2tlblwiXG5jZmcuS0VEX0NMSUVOVF9JRCA9IHByb2Nlc3MuZW52LktFRF9DTElFTlRfSUQ7IC8vIFwiZGV2Y2xpZW50XCIsIFwidGVzdGNsaWVudFwiLCBcIi4uLlwiXG5jZmcuS0VEX0NMSUVOVF9TRUNSRVQgPSBwcm9jZXNzLmVudi5LRURfQ0xJRU5UX1NFQ1JFVDtcbmNmZy5LRURfUkVBTE0gPSBwcm9jZXNzLmVudi5LRURfUkVBTE07IC8vIFwiU0UxXCJcbmNmZy5LRURfTE9DQUxFID0gY2ZnLktFRF9MT0NBTEUgfHwgcHJvY2Vzcy5lbnYuS0VEX0xPQ0FMRTsgLy8gXCJzdlwiLCBcImVuXCIuIE9ubHkgc2V0IGZyb20gcHJvY2Vzcy5lbnYgaWYgbm90IHNldCBmcm9tIFNpdGVWaXNpb24gZWxlbWVudCBjb25maWcuXG5jZmcuS0VEX1NDSE9PTF9MT0NBTEUgPSBjZmcuS0VEX1NDSE9PTF9MT0NBTEUgfHwgcHJvY2Vzcy5lbnYuS0VEX1NDSE9PTF9MT0NBTEU7IC8vIFwic3ZcIiwgXCJlbl9zaW5cIiwgXCJlbl9uaW5cIi4gT25seSBzZXQgZnJvbSBwcm9jZXNzLmVudiBpZiBub3Qgc2V0IGZyb20gU2l0ZVZpc2lvbiBlbGVtZW50IGNvbmZpZy5cbmNmZy5LRURfUkVTT1VSQ0VTX1VSTCA9IGNmZy5LRURfUkVTT1VSQ0VTX1VSTCB8fCBwcm9jZXNzLmVudi5LRURfUkVTT1VSQ0VTX1VSTDtcbiIsIi8qIFRoZXNlIHNjcmlwdHMgYXNzdW1lIHNvbWUgb2YgdGhlIGdsb2JhbCB2YXJzIGhhdmUgYWxyZWFkeSBiZWVuIHNldDpcbiAgKiBLRUQuY2ZnXG4gICogS0VELmVudi5jdXJyZW50VXNlclxuXG4gIFRoZSByZXN0IHdpbGwgYmUgc2V0IGhlcmUgKGNsaWVudCBzaWRlKVxuKi9cbmltcG9ydCAnLi9jb25maWd1cmUnO1xuaW1wb3J0ICcuL3NldC1iZWFyZXItcHJvdmlkZXJzJztcbmltcG9ydCAnLi9zZXQta2VkLWJhY2tlbmQtY2xpZW50JztcbmltcG9ydCAnLi9zZXQtZWRzLWNsaWVudCc7XG4iLCJpbXBvcnQgeyBwYXJzZVF1ZXJ5U3RyaW5nLCBnZW5lcmF0ZVF1ZXJ5U3RyaW5nLCBzcGxpdFVybEFuZFF1ZXJ5IH0gZnJvbSBcIi4uL3V0aWxzL3F1ZXJ5LXN0cmluZ1wiO1xuaW1wb3J0IHsgS2VkQmFja2VuZENsaWVudFdlYiwgV2ViU2VydmVyQmVhcmVyUHJvdmlkZXIsIGlzb21vcnBoaWMsIHN0b3JhZ2UgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudHdlYic7XG5pbXBvcnQgeyBCZWFyZXJQcm92aWRlciwgS2VkQmVhcmVyUHJvdmlkZXIgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XG5pbXBvcnQgY2ZnIGZyb20gJy4uL2dsb2JhbHMvS0VELmNmZyc7XG5pbXBvcnQgZW52IGZyb20gJy4uL2dsb2JhbHMvS0VELmVudic7XG5pbXBvcnQgeyBVc2VyIH0gZnJvbSBcIi4uL2NvbnRyYWN0cy9rZWQtbW9kZWxzXCI7XG5pbXBvcnQgeyBJTVBFUlNPTkFUSU9OX1FVRVJZX1BBUkFNUyB9IGZyb20gXCIuLi9hY2Nlc3MtY29udHJvbC9pbmRleFwiO1xuaW1wb3J0IHsgY2hlcnJ5UGlja1Byb3BzIH0gZnJvbSBcIi4uL3V0aWxzL3V0aWxzXCI7XG5cbmZ1bmN0aW9uIGdldE1lcmdlZFRva2VuUGF0aCh0b2tlblBhdGg6IHN0cmluZywgbG9jYXRpb25TZWFyY2g6IHN0cmluZywgc2NvcGVzOiBzdHJpbmdbXSkge1xuICAvLyBNZXJnZSBjb25maWd1cmVkIHF1ZXJ5IHBhcmFtcyBvZiB0b2tlbiBwYXRoIHdpdGggcGFyYW1zIGdpdmVuIHRvIGN1cnJlbnQgcGFnZVxuICBjb25zdCBjdXJyZW50UXVlcnkgPSBwYXJzZVF1ZXJ5U3RyaW5nKGxvY2F0aW9uU2VhcmNoKTtcbiAgY29uc3QgaW1wZXJzb25hdGlvblByb3BzID0gY2hlcnJ5UGlja1Byb3BzKGN1cnJlbnRRdWVyeSwgSU1QRVJTT05BVElPTl9RVUVSWV9QQVJBTVMpO1xuICBjb25zdCBbdG9rZW5QYXRoV2l0aG91dFF1ZXJ5LCB0b2tlblF1ZXJ5U3RyaW5nXSA9IHNwbGl0VXJsQW5kUXVlcnkodG9rZW5QYXRoKTtcbiAgY29uc3QgdG9rZW5QYXRoUXVlcnkgPSBwYXJzZVF1ZXJ5U3RyaW5nKHRva2VuUXVlcnlTdHJpbmcpO1xuICByZXR1cm4gdG9rZW5QYXRoV2l0aG91dFF1ZXJ5ICsgZ2VuZXJhdGVRdWVyeVN0cmluZyh7XG4gICAgLi4udG9rZW5QYXRoUXVlcnksXG4gICAgLi4uaW1wZXJzb25hdGlvblByb3BzLFxuICAgIHNjb3Blczogc2NvcGVzLmpvaW4oJywnKVxuICB9KTtcbn1cblxuZnVuY3Rpb24gZ2V0VG9rZW5JZChtZXJnZWRUb2tlblBhdGg6IHN0cmluZywgdXNlckVtYWlsOiBzdHJpbmcpIHtcbiAgcmV0dXJuIG1lcmdlZFRva2VuUGF0aCArIFwiL1wiICsgdXNlckVtYWlsO1xufVxuXG5mdW5jdGlvbiBzYXZlVXNlckluZm8odXNlcjogVXNlciwgdG9rZW5JZDogc3RyaW5nKSB7XG4gIGVudi5jdXJyZW50VXNlciA9IHVzZXI7XG4gIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oXCJ1c2VySW5mb1wiICsgdG9rZW5JZCwgSlNPTi5zdHJpbmdpZnkodXNlcikpO1xufVxuXG5mdW5jdGlvbiBsb2FkVXNlckluZm8odG9rZW5JZDogc3RyaW5nKSB7XG4gIGNvbnN0IHN0b3JlZFNlc3Npb25Vc2VyID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShcInVzZXJJbmZvXCIgKyB0b2tlbklkKTtcbiAgaWYgKHN0b3JlZFNlc3Npb25Vc2VyKSB7XG4gICAgZW52LmN1cnJlbnRVc2VyID0gSlNPTi5wYXJzZShzdG9yZWRTZXNzaW9uVXNlcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlQmVhcmVyUHJvdmlkZXIobWVyZ2VkVG9rZW5QYXRoOiBzdHJpbmcsIHVzZXJFbWFpbDogc3RyaW5nKSB7XG4gIGNvbnN0IHRva2VuSWQgPSBnZXRUb2tlbklkKG1lcmdlZFRva2VuUGF0aCwgdXNlckVtYWlsKTtcbiAgcmV0dXJuIG5ldyBXZWJTZXJ2ZXJCZWFyZXJQcm92aWRlcihtZXJnZWRUb2tlblBhdGgsIHJlc3BvbnNlVGV4dCA9PiB7XG4gICAgY29uc3QgcmVzID0gSlNPTi5wYXJzZShyZXNwb25zZVRleHQpIGFzIHsgb2s6IGJvb2xlYW4sIGVycm9yPzogc3RyaW5nLCB0b2tlbj86IHN0cmluZywgdXNlcj86IFVzZXIgfTtcbiAgICBpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKHJlcy5lcnJvcik7XG4gICAgaWYgKHJlcy51c2VyKSB7XG4gICAgICBzYXZlVXNlckluZm8ocmVzLnVzZXIsIHRva2VuSWQpO1xuICAgIH1cbiAgICByZXR1cm4geyB0b2tlbjogcmVzLnRva2VuLCBleHBpcmVzOiBEYXRlLm5vdygpICsgNTkgKiA2MCAqIDEwMDAgfTtcbiAgfSwgdG9rZW5JZCk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUdvb2dsZVRva2VuUHJvdmlkZXIobWVyZ2VkVG9rZW5QYXRoOiBzdHJpbmcsIHVzZXJFbWFpbDogc3RyaW5nKSB7XG4gIGNvbnN0IHRva2VuSWQgPSBnZXRUb2tlbklkKG1lcmdlZFRva2VuUGF0aCwgdXNlckVtYWlsKTtcbiAgcmV0dXJuIG5ldyBXZWJTZXJ2ZXJCZWFyZXJQcm92aWRlcihtZXJnZWRUb2tlblBhdGgsIHJlc3BvbnNlVGV4dCA9PiB7XG4gICAgY29uc3QgcmVzID0gSlNPTi5wYXJzZShyZXNwb25zZVRleHQpIGFzIHsgb2s6IGJvb2xlYW4sIGVycm9yPzogc3RyaW5nLCB0b2tlbj86IHN0cmluZywgdXNlcj86IFVzZXIgfTtcbiAgICBpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKHJlcy5lcnJvcik7XG4gICAgcmV0dXJuIHsgdG9rZW46IHJlcy50b2tlbiwgZXhwaXJlczogRGF0ZS5ub3coKSArIDU5ICogNjAgKiAxMDAwIH07XG4gIH0sIHRva2VuSWQpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVUZXN0VG9rZW5Qcm92aWRlcih0b2tlblVybDogc3RyaW5nLCB1c2VyOiBVc2VyLCBzY29wZXM6IHN0cmluZ1tdKSB7XG4gIHJldHVybiBuZXcgS2VkQmVhcmVyUHJvdmlkZXIoXG4gICAgaXNvbW9ycGhpYyxcbiAgICBzdG9yYWdlLFxuICAgIHRva2VuVXJsICsgdXNlci5tYWlsICsgbG9jYXRpb24uc2VhcmNoLFxuICAgIGNmZy5LRURfQ0xJRU5UX0lELFxuICAgIGNmZy5LRURfQ0xJRU5UX1NFQ1JFVCxcbiAgICB0b2tlblVybCwge1xuICAgICAgZW1haWw6IHVzZXIubWFpbC50b0xvd2VyQ2FzZSgpLFxuICAgICAgcm9sZXM6IHVzZXIucm9sZXMsXG4gICAgICBzY2hvb2w6IHVzZXIuc2Nob29sLFxuICAgICAgc2Nob29sVHlwZTogdXNlci5zY2hvb2xUeXBlLFxuICAgICAgc2NvcGVzXG4gICAgfSk7XG59XG5cbi8vIGVudi5jdXJyZW50VXNlci5tYWlsIGlzIHNldCBieSBTaXRlVmlzaW9uIHNlcnZlciBpbml0aWFsbHkuXG4vLyBBIHJlc3BvbnNlIGZyb20gL2FwaS90b2tlbiBtYXkgY2hhbmdlIHRoZSBtYWlsIGF0dHJpYnV0ZSBvZiB0aGUgY3VycmVudFxuLy8gdXNlciwgc28gZW52LmN1cnJlbnRVc2VyLm1haWwgbWF5IGJlIGRpZmZlcmVudCBhZnRlciBnZXR0aW5nIGEgcmVzcG9uc2UuXG4vLyBIb3dldmVyLCB0aGUgaW5pdGlhbCB2YWx1ZSBpcyB2YWx1YWJsZSBhbHdheXMgaW4gb3JkZXIgdG8gZGlzdGluZ3Vpc2ggdGhlIGNhc2Vcbi8vIHdoZW4gb25lIG5vcm1hbCB1c2VyIGxvZ3Mgb3V0IGFuZCBhbm90aGVyIHVzZXIgbG9ncyBpbi5cbmNvbnN0IGluaXRpYWxVc2VyRW1haWwgPSBlbnYuY3VycmVudFVzZXIgJiYgZW52LmN1cnJlbnRVc2VyLm1haWw7IC8vIEluaXRpYWwgdmFsdWUgb2YgbWFpbC4gTWF5IGNoYW5nZS5cbmlmIChpbml0aWFsVXNlckVtYWlsKSB7XG4gIC8vIEtFRFxuICBpZiAoY2ZnLktFRF9UT0tFTl9QQVRIKSB7XG4gICAgLy9cbiAgICAvL1xuICAgIC8vIFByb2R1Y3Rpb24gLyBTaXRlVmlzaW9uIHByb3hpZWQgL2FwaS90b2tlbiB0byByZXF1ZXN0IHRva2VucyBmcm9tOlxuICAgIC8vXG4gICAgLy9cbiAgICBjb25zdCBtZXJnZWRUb2tlblBhdGggPSBnZXRNZXJnZWRUb2tlblBhdGgoXG4gICAgICBjZmcuS0VEX1RPS0VOX1BBVEgsXG4gICAgICBsb2NhdGlvbi5zZWFyY2gsIFtcbiAgICAgICAgXCJrZWRiYWNrZW5kXCIsXG4gICAgICAgIFwiRURTXCIsXG4gICAgICBdKTtcbiAgICBlbnYuYmVhcmVyUHJvdmlkZXIgPSBjcmVhdGVCZWFyZXJQcm92aWRlcihtZXJnZWRUb2tlblBhdGgsIGluaXRpYWxVc2VyRW1haWwpO1xuICAgIGxvYWRVc2VySW5mbyhnZXRUb2tlbklkKG1lcmdlZFRva2VuUGF0aCwgaW5pdGlhbFVzZXJFbWFpbCkpO1xuXG4gICAgLy8gR29vZ2xlXG4gICAgY29uc3QgZ29vZ2xlTWVyZ2VkUGF0aCA9IGdldE1lcmdlZFRva2VuUGF0aChcbiAgICAgIGNmZy5LRURfVE9LRU5fUEFUSCxcbiAgICAgIGxvY2F0aW9uLnNlYXJjaCwgW1xuICAgICAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvY2FsZW5kYXIucmVhZG9ubHlcIixcbiAgICAgIF0pO1xuICAgIGVudi5nb29nbGVUb2tlblByb3ZpZGVyID0gY3JlYXRlR29vZ2xlVG9rZW5Qcm92aWRlcihnb29nbGVNZXJnZWRQYXRoLCBpbml0aWFsVXNlckVtYWlsKTtcbiAgfSBlbHNlIGlmIChjZmcuS0VEX1RPS0VOX1VSTCAmJiBjZmcuS0VEX0NMSUVOVF9JRCAmJiBjZmcuS0VEX0NMSUVOVF9TRUNSRVQpIHtcbiAgICAvL1xuICAgIC8vXG4gICAgLy8gVGVzdCAtIGdvIGRpcmVjdGx5IHRvIEtFREFVVEggc2VydmVyIHRvIHJldHJpZXZlIHRva2Vuc1xuICAgIC8vXG4gICAgLy9cbiAgICBlbnYuYmVhcmVyUHJvdmlkZXIgPSBjcmVhdGVUZXN0VG9rZW5Qcm92aWRlcihjZmcuS0VEX1RPS0VOX1VSTCwgZW52LmN1cnJlbnRVc2VyLCBbXG4gICAgICBcImtlZGJhY2tlbmRcIixcbiAgICAgIFwiRURTXCIsXG4gICAgXSk7XG4gICAgZW52Lmdvb2dsZVRva2VuUHJvdmlkZXIgPSBjcmVhdGVUZXN0VG9rZW5Qcm92aWRlcihjZmcuS0VEX1RPS0VOX1VSTCArIFwiL2dvb2dsZVwiLCBlbnYuY3VycmVudFVzZXIsIFtcbiAgICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC9jYWxlbmRhci5yZWFkb25seVwiLFxuICAgIF0pO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBjb25maWd1cmF0aW9uIHBhcmFtZXRlciBLRURfVE9LRU5fUEFUSGApO1xuICB9XG59XG4iLCJpbXBvcnQgZW52IGZyb20gJy4uL2dsb2JhbHMvS0VELmVudic7XG5pbXBvcnQgY2ZnIGZyb20gJy4uL2dsb2JhbHMvS0VELmNmZyc7XG5pbXBvcnQgeyBpc29tb3JwaGljIH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnR3ZWInO1xuaW1wb3J0IHsgRWRzQ2xpZW50IH0gZnJvbSAnLi4vYXBpcy9lZHNjbGllbnQnO1xuXG5lbnYuZWRzQ2xpZW50ID0gbmV3IEVkc0NsaWVudCAoXG4gIGlzb21vcnBoaWMsXG4gIGNmZy5FRFNfQVBJX1VSTCxcbiAgZW52LmJlYXJlclByb3ZpZGVyLFxuICAoKT0+ZW52LmN1cnJlbnRVc2VyLm1haWwpO1xuXG4iLCJpbXBvcnQgZW52IGZyb20gJy4uL2dsb2JhbHMvS0VELmVudic7XG5pbXBvcnQgY2ZnIGZyb20gJy4uL2dsb2JhbHMvS0VELmNmZyc7XG5pbXBvcnQgeyBLZWRCYWNrZW5kQ2xpZW50V2ViIH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnR3ZWInO1xuXG5lbnYua2VkQmFja2VuZENsaWVudCA9IG5ldyBLZWRCYWNrZW5kQ2xpZW50V2ViIChcbiAgY2ZnLktFRF9BUElfVVJMLFxuICBlbnYuYmVhcmVyUHJvdmlkZXIpO1xuXG4iLCJpbXBvcnQgS0VEIGZyb20gJy4vS0VEJztcblxuLyogVGhpcyBkZWZhdWx0IGNvbmZpZ3VyYXRpb24gaXMgdXNlZCBhcyBhIGZhbGxiYWNrLlxuTm9ybWFsbHkgYm90aCB0ZXN0IHBhZ2VzIGFuZCBwcm9kdWN0aW9uIHBhZ2VzIHdpbGwgb3ZlcnJpZGUgdGhlc2UgY29uZmlncmF0aW9uc1xuKi9cbi8qY29uc3QgZGVmYXVsdENvbmZpZ3VyYXRpb24gPSB7XG4gIC8vIEVudmlyb25tZW50XG4gIEVOVklST05NRU5UOiAnZGV2ZWxvcG1lbnQnIGFzICdwcm9kdWN0aW9uJyB8ICdkZXZlbG9wbWVudCcgfCAndGVzdCcsXG4gIC8vIEF1dGhlbnRpY2F0aW9uIFNlcnZlcjpcbiAgS0VEX1RPS0VOX1VSTDogJ2h0dHBzOi8va2VkYXV0aHRlc3QuYXp1cmV3ZWJzaXRlcy5uZXQvdG9rZW4nLFxuICBLRURfVE9LRU5fUEFUSDogJy9hcGkvdG9rZW4uU2tyaXB0LnBvcnRsZXQ/c3YuY29udGVudHR5cGU9YXBwbGljYXRpb24vanNvbicsXG4gIEtFRF9DTElFTlRfSUQ6ICdkZXZjbGllbnQnLFxuICBLRURfQ0xJRU5UX1NFQ1JFVDogJzRmUmRmUXBXdEpxalRXZicsXG4gIC8vIFNlcnZpY2VzOlxuICBLRURfQVBJX1VSTDogJ2h0dHBzOi8va2VkYmFja2VuZHRlc3QuYXp1cmV3ZWJzaXRlcy5uZXQvYXBpLycsICBcbiAgRURTX0FQSV9VUkw6ICdodHRwczovL2Vkc3BvcnRhbG93aW5hcGkuYXp1cmV3ZWJzaXRlcy5uZXQvYXBpLydcbn0qL1xuXG5leHBvcnQgaW50ZXJmYWNlIElLZWRDb25maWd1cmF0aW9uIHtcbiAgRU5WSVJPTk1FTlQ6ICdwcm9kdWN0aW9uJyB8ICdkZXZlbG9wbWVudCcgfCAndGVzdCc7XG4gIEtFRF9SRUFMTTogc3RyaW5nO1xuICBLRURfVE9LRU5fVVJMOiBzdHJpbmc7XG4gIEtFRF9UT0tFTl9QQVRIOiBzdHJpbmc7XG4gIEtFRF9DTElFTlRfSUQ6IHN0cmluZztcbiAgS0VEX0NMSUVOVF9TRUNSRVQ6IHN0cmluZztcbiAgS0VEX0FQSV9VUkw6IHN0cmluZztcbiAgRURTX0FQSV9VUkw6IHN0cmluZztcbiAgS0VEX0xPQ0FMRTogc3RyaW5nO1xuICBLRURfU0NIT09MX0xPQ0FMRTogc3RyaW5nO1xuICBLRURfQ09VUlNFX0JVSUxERVJfVVJMOiBzdHJpbmc7XG4gIEtFRF9DT1VSU0VfVklFV0VSX1VSTDogc3RyaW5nO1xuICBLRURfU1VCSkVDVF9QTEFOTkVSX0FETUlOX1VSTDogc3RyaW5nO1xuICBLRURfU1VCSkVDVF9QTEFOTkVSX1VSTDogc3RyaW5nO1xuICBLRURfRkVBVFVSRVM6IHN0cmluZztcbiAgS0VEX0tFRVBfQUxJVkVfVVJMOiBzdHJpbmc7XG4gIEtFRF9FTlVNX1dPUkRCQU5LU19VUkw6IHN0cmluZztcbiAgS0VEX1dPUkRCQU5LU19VUkw6IHN0cmluZztcbiAgS0VEX1JFU09VUkNFU19VUkw6IHN0cmluZztcbn07XG5cbmlmICghS0VELmNmZykgS0VELmNmZyA9IHt9O1xuXG5leHBvcnQgZGVmYXVsdCBLRUQuY2ZnIGFzIElLZWRDb25maWd1cmF0aW9uO1xuZXhwb3J0IGNvbnN0IGNmZzogSUtlZENvbmZpZ3VyYXRpb24gPSBLRUQuY2ZnO1xuIiwiaW1wb3J0IHtVc2VyLCBMZWFybmluZ01vZHVsZVRhc2tzfSBmcm9tICcuLi9jb250cmFjdHMva2VkLW1vZGVscyc7XG5pbXBvcnQgeyBLZWRCYWNrZW5kQ2xpZW50LCBCZWFyZXJQcm92aWRlciB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcbmltcG9ydCB7VXNlclRhc2t9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcbmltcG9ydCB7S2VkUmVwb30gZnJvbSAnLi4vcmVwb3Mva2VkLXJlcG8nO1xuaW1wb3J0IHtFZHNDbGllbnR9IGZyb20gJy4uL2FwaXMvZWRzY2xpZW50JztcbmltcG9ydCBLRUQgZnJvbSAnLi9rZWQnO1xuaW1wb3J0IHsgS1NUZXJtUGxhbm5lclJlcG8gfSBmcm9tICcuLi9yZXBvcy9rcy10ZXJtcGxhbm5lci1yZXBvJztcblxuZXhwb3J0IGludGVyZmFjZSBFbnYge1xuICAgIGN1cnJlbnRVc2VyPzogVXNlcjtcbiAgICBsZWFybmluZ01vZHVsZVRhc2tzPzogTGVhcm5pbmdNb2R1bGVUYXNrcztcbiAgICBiZWFyZXJQcm92aWRlcj86IEJlYXJlclByb3ZpZGVyO1xuICAgIGdvb2dsZVRva2VuUHJvdmlkZXI/OiBCZWFyZXJQcm92aWRlcjtcbiAgICBrZWRCYWNrZW5kQ2xpZW50PzogS2VkQmFja2VuZENsaWVudDtcbiAgICBlZHNDbGllbnQ/OiBFZHNDbGllbnQ7XG4gICAgdXNlclRhc2tzUmVwbz87XG4gICAgaGlkZGVuQ291cnNlc1JlcG8/O1xuICAgIHdlZWtOb3Rlc1JlcG8/O1xuICAgIGtnVGVybVBsYW5uZXJSZXBvPztcbiAgICBrc1Rlcm1QbGFubmVyUmVwbz86IEtTVGVybVBsYW5uZXJSZXBvXG4gICAgdHV0b3JlZDogYm9vbGVhbjtcbiAgICBlcnJvcj86IEVycm9yO1xufVxuXG5pZiAoIUtFRC5lbnYpIEtFRC5lbnYgPSB7fTtcblxuZXhwb3J0IGRlZmF1bHQgS0VELmVudiBhcyBFbnY7XG5leHBvcnQgY29uc3QgZW52OiBFbnYgPSBLRUQuZW52O1xuIiwiXG5leHBvcnQgY29uc3QgS0VEX05BTUVTUEFDRSA9IFwiS0VEXCI7XG5cbmRlY2xhcmUgdmFyIEtFRDogYW55O1xuXG52YXIgcmVzdWx0ID0gdHlwZW9mIEtFRCA9PT0gJ3VuZGVmaW5lZCcgPyB7fSA6IEtFRDtcblxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBLRUQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgd2luZG93W0tFRF9OQU1FU1BBQ0VdID0gcmVzdWx0O1xufVxuXG5leHBvcnQgZGVmYXVsdCByZXN1bHQ7XG4iLCJpbXBvcnQge1VzZXIsIExlYXJuaW5nTW9kdWxlVGFza3N9IGZyb20gJy4uL2NvbnRyYWN0cy9rZWQtbW9kZWxzJztcbmltcG9ydCB7IEtlZEJhY2tlbmRDbGllbnQsIEJlYXJlclByb3ZpZGVyIH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnQnO1xuaW1wb3J0IEtFRCBmcm9tICcuL2tlZCc7XG5pbXBvcnQgZW52LCB7RW52fSBmcm9tICcuL0tFRC5lbnYnO1xuXG5leHBvcnQgY2xhc3MgVHV0b3JFbnYge1xuICBzdWJzY3JpYmVyczogQXJyYXk8KGVudjogRW52KT0+dm9pZD4gPSBbXTtcbiAgZW52OiBFbnYgfCBudWxsID0gbnVsbDtcbiAgdmVyc2lvbiA9IDE7XG4gIC8vcHJvbWlzZTogUHJvbWlzZTxFbnYgfCBudWxsPiA9IFByb21pc2UucmVzb2x2ZShudWxsKTtcblxuICBhc3luYyBzdWJzY3JpYmUoc3Vic2NyaWJlcjogKGVudjogRW52KSA9PiB2b2lkKSB7XG4gICAgdGhpcy5zdWJzY3JpYmVycy5wdXNoKHN1YnNjcmliZXIpO1xuICAgIHN1YnNjcmliZXIodGhpcy5lbnYpO1xuICB9XG5cbiAgdW5zdWJzY3JpYmUoc3Vic2NyaWJlcjogKGVudjogRW52KSA9PiB2b2lkKSB7XG4gICAgdGhpcy5zdWJzY3JpYmVycyA9IHRoaXMuc3Vic2NyaWJlcnMuZmlsdGVyIChzID0+IHMgIT09IHN1YnNjcmliZXIpO1xuICB9XG5cbiAgYXN5bmMgbm90aWZ5U3Vic2NyaWJlcnMoKSB7XG4gICAgdGhpcy5zdWJzY3JpYmVycy5mb3JFYWNoKHMgPT4gcyh0aGlzLmVudikpO1xuICB9XG5cbiAgYXN5bmMgc2V0TmV3RW52KHVzZXI6IFVzZXIsIGVudkdldHRlcjogKCk9PlByb21pc2U8RW52Pikge1xuICAgIGxldCB2ZXJzaW9uID0gKyt0aGlzLnZlcnNpb247XG4gICAgdGhpcy5lbnYgPSB7Y3VycmVudFVzZXI6IHVzZXIsIHR1dG9yZWQ6IHRydWV9O1xuICAgIHRoaXMubm90aWZ5U3Vic2NyaWJlcnMoKTsgLy8gTWFrZSBzdWJzY3JpYmVyIGRpc3BsYXkgXCJMb2FkaW5nLi4uIHVzZXIgbmFtZVwiXG4gICAgY29uc3QgZW52OiBFbnYgPSBhd2FpdCBlbnZHZXR0ZXIoKS5jYXRjaChlcnIgPT4gKHtcbiAgICAgIGN1cnJlbnRVc2VyOiB1c2VyLFxuICAgICAgdHV0b3JlZDogdHJ1ZSxcbiAgICAgIGVycm9yOiBlcnJcbiAgICB9KSk7XG4gICAgaWYgKHZlcnNpb24gPT09IHRoaXMudmVyc2lvbikge1xuICAgICAgLy8gTm8gb25lIGVsc2UgaGFzIGNhbGxlZCBzZXRFbnYgZHVyaW5nIHRoaXMgY2FsbC5cbiAgICAgICsrdGhpcy52ZXJzaW9uO1xuICAgICAgdGhpcy5lbnYgPSB7Li4uZW52LCB0dXRvcmVkOiB0cnVlfTtcbiAgICAgIHRoaXMubm90aWZ5U3Vic2NyaWJlcnMoKTsgLy8gTWFrZSBzdWJzY3JpYmVycyBkaXNwbGF5IHRoZSBkYXRhLlxuICAgIH1cbiAgfVxufVxuXG5pZiAoIUtFRC50dXRvckVudikgS0VELnR1dG9yRW52ID0gbmV3IFR1dG9yRW52KCk7XG5cbmV4cG9ydCBkZWZhdWx0IEtFRC50dXRvckVudiBhcyBUdXRvckVudjtcbiIsIlxuZXhwb3J0IGNvbnN0IEtFRF9OQU1FU1BBQ0UgPSBcIktFRFwiO1xuXG5kZWNsYXJlIHZhciBLRUQ6IGFueTtcblxudmFyIHJlc3VsdCA9IHR5cGVvZiBLRUQgPT09ICd1bmRlZmluZWQnID8ge30gOiBLRUQ7XG5cbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgS0VEID09PSAndW5kZWZpbmVkJykge1xuICAgIHdpbmRvd1tLRURfTkFNRVNQQUNFXSA9IHJlc3VsdDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgcmVzdWx0O1xuIiwiaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xuaW1wb3J0IGNmZyBmcm9tICcuLi9nbG9iYWxzL0tFRC5jZmcnO1xuXG5pZiAoY2ZnLktFRF9MT0NBTEUgPT09IFwic3ZcIikge1xuICAgIG1vbWVudC51cGRhdGVMb2NhbGUoJ3N2Jywge1xuICAgICAgICBtb250aHM6ICdqYW51YXJpX2ZlYnJ1YXJpX21hcnNfYXByaWxfbWFqX2p1bmlfanVsaV9hdWd1c3RpX3NlcHRlbWJlcl9va3RvYmVyX25vdmVtYmVyX2RlY2VtYmVyJy5zcGxpdCgnXycpLFxuICAgICAgICBtb250aHNTaG9ydDogJ2phbl9mZWJfbWFyX2Fwcl9tYWpfanVuX2p1bF9hdWdfc2VwX29rdF9ub3ZfZGVjJy5zcGxpdCgnXycpLFxuICAgICAgICB3ZWVrZGF5czogJ3PDtm5kYWdfbcOlbmRhZ190aXNkYWdfb25zZGFnX3RvcnNkYWdfZnJlZGFnX2zDtnJkYWcnLnNwbGl0KCdfJyksXG4gICAgICAgIHdlZWtkYXlzU2hvcnQ6ICdzw7ZuX23DpW5fdGlzX29uc190b3JfZnJlX2zDtnInLnNwbGl0KCdfJyksXG4gICAgICAgIHdlZWtkYXlzTWluOiAnc8O2X23DpV90aV9vbl90b19mcl9sw7YnLnNwbGl0KCdfJyksXG4gICAgICAgIGxvbmdEYXRlRm9ybWF0OiB7XG4gICAgICAgICAgICBMVDogJ0hIOm1tJyxcbiAgICAgICAgICAgIExUUzogJ0hIOm1tOnNzJyxcbiAgICAgICAgICAgIEw6ICdZWVlZLU1NLUREJyxcbiAgICAgICAgICAgIExMOiAnRCBNTU1NIFlZWVknLFxuICAgICAgICAgICAgTExMOiAnRCBNTU1NIFlZWVkgW2tsLl0gSEg6bW0nLFxuICAgICAgICAgICAgTExMTDogJ2RkZGQgRCBNTU1NIFlZWVkgW2tsLl0gSEg6bW0nLFxuICAgICAgICAgICAgbGxsOiAnRCBNTU0gWVlZWSBISDptbScsXG4gICAgICAgICAgICBsbGxsOiAnZGRkIEQgTU1NIFlZWVkgSEg6bW0nXG4gICAgICAgIH0sXG4gICAgICAgIGNhbGVuZGFyOiB7XG4gICAgICAgICAgICBzYW1lRGF5OiAnW0lkYWddIExUJyxcbiAgICAgICAgICAgIG5leHREYXk6ICdbSW1vcmdvbl0gTFQnLFxuICAgICAgICAgICAgbGFzdERheTogJ1tJZ8Olcl0gTFQnLFxuICAgICAgICAgICAgbmV4dFdlZWs6ICdbUMOlXSBkZGRkIExUJyxcbiAgICAgICAgICAgIGxhc3RXZWVrOiAnW0ldIGRkZGRbc10gTFQnLFxuICAgICAgICAgICAgc2FtZUVsc2U6ICdMJ1xuICAgICAgICB9LFxuICAgICAgICByZWxhdGl2ZVRpbWU6IHtcbiAgICAgICAgICAgIGZ1dHVyZTogJ29tICVzJyxcbiAgICAgICAgICAgIHBhc3Q6ICdmw7ZyICVzIHNlZGFuJyxcbiAgICAgICAgICAgIHM6ICduw6VncmEgc2VrdW5kZXInLFxuICAgICAgICAgICAgc3M6ICclZCBzZWt1bmRlcicsXG4gICAgICAgICAgICBtOiAnZW4gbWludXQnLFxuICAgICAgICAgICAgbW06ICclZCBtaW51dGVyJyxcbiAgICAgICAgICAgIGg6ICdlbiB0aW1tZScsXG4gICAgICAgICAgICBoaDogJyVkIHRpbW1hcicsXG4gICAgICAgICAgICBkOiAnZW4gZGFnJyxcbiAgICAgICAgICAgIGRkOiAnJWQgZGFnYXInLFxuICAgICAgICAgICAgTTogJ2VuIG3DpW5hZCcsXG4gICAgICAgICAgICBNTTogJyVkIG3DpW5hZGVyJyxcbiAgICAgICAgICAgIHk6ICdldHQgw6VyJyxcbiAgICAgICAgICAgIHl5OiAnJWQgw6VyJ1xuICAgICAgICB9LFxuICAgICAgICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn0oZXxhKS8sXG4gICAgICAgIG9yZGluYWw6IGZ1bmN0aW9uIChudW1iZXIpIHtcbiAgICAgICAgICAgIHZhciBiID0gbnVtYmVyICUgMTAsXG4gICAgICAgICAgICAgICAgb3V0cHV0ID0gKH5+KG51bWJlciAlIDEwMCAvIDEwKSA9PT0gMSkgPyAnZScgOlxuICAgICAgICAgICAgICAgICAgICAoYiA9PT0gMSkgPyAnYScgOlxuICAgICAgICAgICAgICAgICAgICAgICAgKGIgPT09IDIpID8gJ2EnIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoYiA9PT0gMykgPyAnZScgOiAnZSc7XG4gICAgICAgICAgICByZXR1cm4gbnVtYmVyICsgb3V0cHV0O1xuICAgICAgICB9LFxuICAgICAgICB3ZWVrOiB7XG4gICAgICAgICAgICBkb3c6IDEsIC8vIE1vbmRheSBpcyB0aGUgZmlyc3QgZGF5IG9mIHRoZSB3ZWVrLlxuICAgICAgICAgICAgZG95OiA0ICAvLyBUaGUgd2VlayB0aGF0IGNvbnRhaW5zIEphbiA0dGggaXMgdGhlIGZpcnN0IHdlZWsgb2YgdGhlIHllYXIuXG4gICAgICAgIH1cbiAgICB9KTtcbn1cbmV4cG9ydCBjb25zdCBsb2NhbE1vbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gbW9tZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykubG9jYWxlKGNmZy5LRURfTE9DQUxFKTtcbn1cbiIsImltcG9ydCB7IEtlZFJlcG8gfSBmcm9tICcuL2tlZC1yZXBvJztcbmltcG9ydCB7IFVzZXJIaWRkZW5Db3Vyc2UsIFNjaG9vbCwgQ291cnNlIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xuaW1wb3J0IGVudiBmcm9tICcuLi9nbG9iYWxzL0tFRC5lbnYnO1xuaW1wb3J0IHsgRURTQ291cnNlIH0gZnJvbSAnLi4vY29udHJhY3RzL2Vkcyc7XG5pbXBvcnQgeyBzaG93RXJyb3IsIGZsYXR0ZW4sIGNvbXBhcmVQcm9wLCBhcnJheVRvTWFwIH0gZnJvbSAnLi4vdXRpbHMvdXRpbHMnO1xuaW1wb3J0IHsgY3JlYXRlVVVJRCB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcbmltcG9ydCB7IEVEU1BlcmlvZCB9IGZyb20gJy4uL2FwaXMvZWRzY2xpZW50JztcbmltcG9ydCB7IGdldFNjaG9vbE1vbWVudCB9IGZyb20gJy4uL3V0aWxzL3NjaG9vbC1tb21lbnQnO1xuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xuZXhwb3J0IGxldCBoaWRkZW5Db3Vyc2VzUmVwbyA9IGVudi5oaWRkZW5Db3Vyc2VzUmVwbyBhcyBIaWRkZW5Db3Vyc2VzUmVwbztcblxuXG5leHBvcnQgaW50ZXJmYWNlIENvdXJzZVdpdGhIaWRkZW5TdGF0ZSB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gIHZpc2libGU6IGJvb2xlYW47XG4gIGRlZmF1bHRWaXNpYmxlOiBib29sZWFuO1xufVxuXG5leHBvcnQgdHlwZSBIaWRkZW5Db3Vyc2VzU3Vic2NyaWJlciA9IChjb3Vyc2VzOiBDb3Vyc2VXaXRoSGlkZGVuU3RhdGVbXSkgPT4gdm9pZDtcblxuZXhwb3J0IGludGVyZmFjZSBTdWJzY3JpYmVyT3B0aW9ucyB7XG4gIGZ1bGxDb3Vyc2U6IGJvb2xlYW47XG59XG5cbmNsYXNzIEhpZGRlbkNvdXJzZXNSZXBvIHtcbiAgcmVzdWx0OiBDb3Vyc2VXaXRoSGlkZGVuU3RhdGVbXSB8IG51bGwgPSBudWxsO1xuICBzdWJzY3JpYmVyczoge3N1YnNjcmliZXI6IEhpZGRlbkNvdXJzZXNTdWJzY3JpYmVyLCBvcHRpb25zOiBTdWJzY3JpYmVyT3B0aW9uc31bXSA9IFtdO1xuICBmdWxsQ291cnNlOiBib29sZWFuID0gZmFsc2U7XG4gIGtlZENvdXJzZXNQcm9taXNlOiBQcm9taXNlPFBhcnRpYWw8Q291cnNlPltdPjtcbiAgZWRzQ291cnNlc1Byb21pc2U6IFByb21pc2U8RURTQ291cnNlW10+O1xuICB1c2VySGlkZGVuQ291cnNlc1Byb21pc2U6IFByb21pc2U8VXNlckhpZGRlbkNvdXJzZVtdPjtcbiAga2VkUmVwbzogS2VkUmVwbzxVc2VySGlkZGVuQ291cnNlPjtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmtlZFJlcG8gPSBuZXcgS2VkUmVwbzxVc2VySGlkZGVuQ291cnNlPih7XG4gICAgICBnZXRDbGllbnQ6ICgpID0+IGVudi5rZWRCYWNrZW5kQ2xpZW50LFxuICAgICAgb3B0aW1pc3RpYzogdHJ1ZSxcbiAgICAgIHRhYmxlOiBcInVzZXJoaWRkZW5jb3Vyc2VzXCIsXG4gICAgICB1c2VyOiBlbnYuY3VycmVudFVzZXIgPyBlbnYuY3VycmVudFVzZXIubWFpbCA6IFwiXCIsXG4gICAgICBnZXRRdWVyeU9wdGlvbnM6IGFzeW5jICgpID0+ICh7cm9sZTogXCJVU0VSXCJ9KSxcbiAgICB9KTtcblxuICAgIGNvbnN0IGluaXRQcm9taXNlID0gdGhpcy5pbml0KCk7XG5cbiAgICBQcm9taXNlLmFsbChbXG4gICAgICBpbml0UHJvbWlzZSxcbiAgICAgIHRoaXMua2VkQ291cnNlc1Byb21pc2UsXG4gICAgICB0aGlzLmVkc0NvdXJzZXNQcm9taXNlXG4gICAgXSkuY2F0Y2goZXJyID0+IHNob3dFcnJvcihlcnIpKTtcbiAgfVxuXG4gIGFzeW5jIGluaXQoKSB7XG4gICAgLy8gV2FpdCB0aWxsIHdlIGhhdmUgYSBjdXJyZW50VXNlciB0aGF0IGlzIGFjY3VyYXRlIGFsc28gZm9yIGltcGVyc29uYXRlZCB1c2Vycy5cbiAgICBjb25zdCBiZWFyZXJQcm9taXNlID0gZW52LmJlYXJlclByb3ZpZGVyID8gZW52LmJlYXJlclByb3ZpZGVyLmdldEJlYXJlcigpIDogUHJvbWlzZS5yZXNvbHZlKHt9KTtcblxuICAgIC8vIEluIHBhcmFsbGVsbCwgd2UgcmVxdWVzdDpcbiAgICAvLyAgMSkgS0VEQmFja2VuZDogU2Nob29scy5hY3RpdmVDb3Vyc2VzXG4gICAgLy8gIDIpIEVEUy5nZXRBY3RpdmVBY291cnNlcygpXG4gICAgLy8gIDMpICh2aWEgc3Vic2NyaXB0aW9uKTogS0VEQmFja2VuZDogdXNlckhpZGRlbkNvdXJzZXNcbiAgICBcbiAgICB0aGlzLmtlZENvdXJzZXNQcm9taXNlID0gYmVhcmVyUHJvbWlzZS50aGVuKCgpPT50aGlzLmxpc3RLZWRDb3Vyc2VzKCkpO1xuICAgIHRoaXMuZWRzQ291cnNlc1Byb21pc2UgPSBiZWFyZXJQcm9taXNlLnRoZW4oKCk9PnRoaXMubGlzdEVEU0NvdXJzZXMoKSk7XG4gICAgbGV0IHJlc29sdmVVc2VySGlkZGVuQ291cnNlc1Byb21pc2U6ICh4OiBVc2VySGlkZGVuQ291cnNlW10pPT52b2lkO1xuICAgIGxldCB1c2VySGlkZGVuQ291cnNlc1Jlc29sdmVkID0gZmFsc2U7XG4gICAgdGhpcy51c2VySGlkZGVuQ291cnNlc1Byb21pc2UgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHJlc29sdmVVc2VySGlkZGVuQ291cnNlc1Byb21pc2UgPSB4ID0+IHtcbiAgICAgIGlmICh1c2VySGlkZGVuQ291cnNlc1Jlc29sdmVkKSB7XG4gICAgICAgIHRoaXMudXNlckhpZGRlbkNvdXJzZXNQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKHgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdXNlckhpZGRlbkNvdXJzZXNSZXNvbHZlZCA9IHRydWU7XG4gICAgICAgIHJlc29sdmUoeCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgYXdhaXQgYmVhcmVyUHJvbWlzZTtcblxuICAgIHRoaXMua2VkUmVwby5tZW0uc3Vic2NyaWJlKGFzeW5jIHVzZXJIaWRkZW5Db3Vyc2VzID0+IHtcbiAgICAgIC8vIENoYW5nZSBvciBpbml0aWFsIHZhbHVlIHJlYWR5IHRvIGJlIG5vdGlmaWVkIG91dC5cbiAgICAgIC8vIEJ1dCBmaXJzdCwgY2hlY2sgd2UgaGF2ZSBhbGwgdGhlIHJlbGF0ZWQgZGF0YSByZXNwb25zZXMgd2UgbmVlZC5cbiAgICAgIGNvbnN0IFthY3RpdmVDb3Vyc2VzLCBlZHNBY3RpdmVDb3Vyc2VzXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgdGhpcy5rZWRDb3Vyc2VzUHJvbWlzZSwgXG4gICAgICAgIHRoaXMuZWRzQ291cnNlc1Byb21pc2VdKTtcbiAgICAgIFxuICAgICAgLy8gUmVmaW5lIHRoZSB0aHJlZSByZXN1bHRzIGludG8gYSBzaW5nbGUgcmVzdWx0XG4gICAgICB0aGlzLnJlc3VsdCA9IGF3YWl0IHRoaXMuY3JlYXRlQ291cnNlc0xpc3QoZWRzQWN0aXZlQ291cnNlcywgdXNlckhpZGRlbkNvdXJzZXMsIGFjdGl2ZUNvdXJzZXMpO1xuICAgICAgLy8gTm90aWZ5IG91ciBzdWJzY3JpYmVyczpcbiAgICAgIHRoaXMuc3Vic2NyaWJlcnMuZm9yRWFjaChzdWJzY3JpYmVyID0+IHRoaXMubm90aWZ5U3Vic2NyaWJlcihzdWJzY3JpYmVyLnN1YnNjcmliZXIsIHN1YnNjcmliZXIub3B0aW9ucykpO1xuICAgICAgcmVzb2x2ZVVzZXJIaWRkZW5Db3Vyc2VzUHJvbWlzZSh1c2VySGlkZGVuQ291cnNlcyk7XG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBsaXN0S2VkQ291cnNlcygpIHtcbiAgICBjb25zdCBmdWxsQ291cnNlID0gdGhpcy5mdWxsQ291cnNlO1xuICAgIGNvbnNvbGUubG9nKFwiRnVsbENvdXJzZTogXCIrIGZ1bGxDb3Vyc2UpO1xuICAgIGNvbnN0IHNjaG9vbHMgPSBhd2FpdCBlbnYua2VkQmFja2VuZENsaWVudC5saXN0PFNjaG9vbD4oJ3NjaG9vbHMnLCB7XG4gICAgICByb2xlOiBcIlVTRVJcIiwgLy8gV29ya2Fyb3VuZCBmcm9tIHNob3dpbmcgYWN0aXZhdGVkIHRlbXBsYXRlcyBhbW9uZyBjb3Vyc2VzIG9mIHRoZSBzY2hvb2xcbiAgICAgIG5hbWU6IGVudi5jdXJyZW50VXNlci5zY2hvb2wsXG4gICAgICBpbmNsdWRlOiBcImFjdGl2ZUNvdXJzZXNcIixcbiAgICAgIGZsYWdzOiBmdWxsQ291cnNlID8gW10gOiBbXCJpbmNsdWRlSWRzQW5kTmFtZXNPbmx5XCJdLFxuICAgICAgY2FjaGVCdXN0OiBlbnYuY3VycmVudFVzZXIudXNlcm5hbWVcbiAgICB9KTtcbiAgICBjb25zdCBhY3RpdmVDb3Vyc2VzID0gZmxhdHRlbihzY2hvb2xzLm1hcChzY2hvb2wgPT4gc2Nob29sLmFjdGl2ZUNvdXJzZXMpKS5zb3J0KGNvbXBhcmVQcm9wKFwibmFtZVwiKSlcbiAgICByZXR1cm4gYWN0aXZlQ291cnNlcztcbiAgfVxuXG4gIGxpc3RFRFNDb3Vyc2VzKCk6IFByb21pc2U8RURTQ291cnNlW10gfCBudWxsPiB7XG4gICAgY29uc3QgcGVyaW9kTmFtZSA9IG5ldyBFRFNQZXJpb2QoZ2V0U2Nob29sTW9tZW50KG1vbWVudCgpKSkucGVyaW9kO1xuICAgIHJldHVybiBlbnYuY3VycmVudFVzZXIucm9sZXMuaW5kZXhPZignRU1QTE9ZRUUnKSA9PT0gLTEgP1xuICAgICAgLy8gU1RVREVOVHMgc2hvdWxkLCBieSBkZWZhdWx0LCBvbmx5IHNob3cgY291cnNlcyB0aGF0IGlzIGxpc3RlZCBpbiBFRFNcbiAgICAgIGVudi5lZHNDbGllbnQuZ2V0QWN0aXZlQ291cnNlcyh7cGVyaW9kTmFtZX0pIDpcbiAgICAgIC8vIEVNUExPWUVFcyBzaG91bGQsIGJ5IGRlZmF1bHQsIHNob3cgYWxsIGNvdXJzZXMgb24gc2Nob29sIC0gbm8gbmVlZCB0byBxdWVyeSBFRFNcbiAgICAgIG51bGw7XG4gIH1cblxuICBhc3luYyBjcmVhdGVDb3Vyc2VzTGlzdChcbiAgICBlZHNBY3RpdmVDb3Vyc2VzOiBFRFNDb3Vyc2VbXSB8IG51bGwsXG4gICAgdXNlckhpZGRlbkNvdXJzZXM6IFVzZXJIaWRkZW5Db3Vyc2VbXSxcbiAgICBhY3RpdmVDb3Vyc2VzOiBQYXJ0aWFsPENvdXJzZT5bXSkgOiBQcm9taXNlPENvdXJzZVdpdGhIaWRkZW5TdGF0ZVtdPlxuICB7XG4gICAgY29uc3QgaGlkZGVuQ291cnNlc01hcCA9IGFycmF5VG9NYXAodXNlckhpZGRlbkNvdXJzZXMuZmlsdGVyKGhjID0+ICFoYy5zaG93KSwgaGMgPT4gaGMubmFtZSk7XG4gICAgY29uc3QgdmlzaWJsZUNvdXJzZXNNYXAgPSBhcnJheVRvTWFwKHVzZXJIaWRkZW5Db3Vyc2VzLmZpbHRlcihoYyA9PiBoYy5zaG93KSwgaGMgPT4gaGMubmFtZSk7XG5cbiAgICBjb25zdCBpc1N0dWRlbnQgPSBlbnYuY3VycmVudFVzZXIucm9sZXMuc29tZShyb2xlID0+IHJvbGUgPT09ICdTVFVERU5UJyk7XG5cbiAgICBjb25zdCBlZHNDb3Vyc2VNYXAgPSBlZHNBY3RpdmVDb3Vyc2VzID9cbiAgICAgIGFycmF5VG9NYXAoZWRzQWN0aXZlQ291cnNlcywgYyA9PiBjLm5hbWUpIDpcbiAgICAgIHt9O1xuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUHJvbWlzZS5hbGwoYWN0aXZlQ291cnNlcy5tYXAoYXN5bmMgKHtpZCwgbmFtZSwgZGVzY3JpcHRpb24sIG1vZGlmaWVkQnl9KSA9PiB7XG5cbiAgICAgIGxldCBlZHNDb3Vyc2UgPSBlZHNDb3Vyc2VNYXBbbmFtZV07XG5cbiAgICAgIGxldCBkZWZhdWx0VmlzaWJsZSA9IGlzU3R1ZGVudCA/XG4gICAgICAgIGVkc0NvdXJzZSAhPSBudWxsIDogLy8gQ291cnNlIG5hbWUgYWxzbyBsaXN0ZWQgaW4gRURTXG4gICAgICAgIHRydWU7IC8vIFRlYWNoZXJzIG5vdCBkZXBlbmRlbnQgb24gRURTIGxpc3RpbmdcblxuICAgICAgbGV0IHZpc2libGUgPSBkZWZhdWx0VmlzaWJsZSA/XG4gICAgICAgICFoaWRkZW5Db3Vyc2VzTWFwW2lkXSA6IC8vIFZpc2libGUgdW5sZXNzIHVzZXIgaGFzIG92ZXJyaWRkZW4gdGhhdC5cbiAgICAgICAgISF2aXNpYmxlQ291cnNlc01hcFtpZF07IC8vIEhpZGRlbiB1bmxlc3MgdXNlciBoYXMgb3ZlcnJpZGRlbiB0aGF0LlxuICAgICAgXG4gICAgICAvLyBSZXNvbHZlIGRlc2NyaXB0aW9uOlxuICAgICAgaWYgKG1vZGlmaWVkQnkgJiYgbW9kaWZpZWRCeS5uYW1lICYmICFkZXNjcmlwdGlvbikge1xuICAgICAgICBkZXNjcmlwdGlvbiA9IGAke21vZGlmaWVkQnkubmFtZX1zIHZlcnNpb25gO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZCxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgIHZpc2libGUsXG4gICAgICAgIGRlZmF1bHRWaXNpYmxlXG4gICAgICB9O1xuICAgIH0pKTtcblxuICAgIHJldHVybiByZXN1bHQuc29ydCgoe25hbWU6IGF9LCB7bmFtZTogYn0pID0+IGEgPCBiID8gLTEgOiBhID4gYiA/IDEgOiAwKTtcbiAgfVxuXG4gIGFzeW5jIGhpZGVDb3Vyc2UoYzogQ291cnNlV2l0aEhpZGRlblN0YXRlKSB7XG4gICAgY29uc3Qgb3ZlcnJpZGVzID0gdGhpcy5rZWRSZXBvLm1lbS5pdGVtcy5maWx0ZXIoaGMgPT4gaGMubmFtZSA9PT0gYy5pZCk7XG4gICAgaWYgKGMuZGVmYXVsdFZpc2libGUpIHtcbiAgICAgIGF3YWl0IHRoaXMua2VkUmVwby5pbnNlcnQoW3tcbiAgICAgICAgaWQ6IGNyZWF0ZVVVSUQoKSxcbiAgICAgICAgbmFtZTogYy5pZFxuICAgICAgfV0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBhd2FpdCB0aGlzLmtlZFJlcG8uZGVsZXRlKG92ZXJyaWRlcy5tYXAob3YgPT4gb3YuaWQpKTsgICAgICBcbiAgICB9XG4gIH1cblxuICBhc3luYyBzaG93Q291cnNlKGM6IENvdXJzZVdpdGhIaWRkZW5TdGF0ZSkge1xuICAgIGNvbnN0IG92ZXJyaWRlcyA9IHRoaXMua2VkUmVwby5tZW0uaXRlbXMuZmlsdGVyKGhjID0+IGhjLm5hbWUgPT09IGMuaWQpO1xuICAgIGlmIChjLmRlZmF1bHRWaXNpYmxlKSB7XG4gICAgICBhd2FpdCB0aGlzLmtlZFJlcG8uZGVsZXRlKG92ZXJyaWRlcy5tYXAob3YgPT4gb3YuaWQpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXdhaXQgdGhpcy5rZWRSZXBvLmluc2VydChbe1xuICAgICAgICBpZDogY3JlYXRlVVVJRCgpLFxuICAgICAgICBuYW1lOiBjLmlkLFxuICAgICAgICBzaG93OiB0cnVlXG4gICAgICB9XSk7XG4gICAgfVxuICB9XG5cbiAgbm90aWZ5U3Vic2NyaWJlciA9IChzdWJzY3JpYmVyOiBIaWRkZW5Db3Vyc2VzU3Vic2NyaWJlciwgb3B0aW9uczogU3Vic2NyaWJlck9wdGlvbnMpID0+IHtcbiAgICB0cnkge1xuICAgICAgc3Vic2NyaWJlcihvcHRpb25zLmZ1bGxDb3Vyc2UgPyB0aGlzLnJlc3VsdCA6IHRoaXMucmVzdWx0LmZpbHRlcihjID0+IGMudmlzaWJsZSkpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHN1YnNjcmliZSAoc3Vic2NyaWJlcjogSGlkZGVuQ291cnNlc1N1YnNjcmliZXIsIG9wdGlvbnM6IFN1YnNjcmliZXJPcHRpb25zKSB7XG4gICAgaWYgKCF0aGlzLmZ1bGxDb3Vyc2UgJiYgb3B0aW9ucy5mdWxsQ291cnNlKSB7XG4gICAgICAvLyBUaGUgc3Vic2NyaWJlciBkZW1hbmRzIGZ1bGwgY291cnNlc1xuICAgICAgLy8gTmVlZCB0byBxdWVyeSB0aGF0IGJlZm9yZSBub3RpZnlpbmdcbiAgICAgIC8vIEFsc28gYWZmZWN0IHN0YXRlIGZvciBmdXR1cmUgaW50ZXJuYWwgbm90aWZpY2F0aW9uXG4gICAgICB0aGlzLmZ1bGxDb3Vyc2UgPSBvcHRpb25zLmZ1bGxDb3Vyc2U7XG4gICAgICB0aGlzLmtlZENvdXJzZXNQcm9taXNlID0gdGhpcy5saXN0S2VkQ291cnNlcygpOyAvLyBSZWRvIHRoaXMgY2FsbCwgbm93IGxvYWRpbmcgZnVsbCBjb3Vyc2VzXG4gICAgICAvLyBXYWl0IGZvciBhbGwgb3V0c3RhbmRpbmcgZmV0Y2goKSBjYWxscyB0byBjb21wbGV0ZTpcbiAgICAgIGNvbnN0IFthY3RpdmVDb3Vyc2VzLCBlZHNBY3RpdmVDb3Vyc2VzLCB1c2VySGlkZGVuQ291cnNlc10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIHRoaXMua2VkQ291cnNlc1Byb21pc2UsIFxuICAgICAgICB0aGlzLmVkc0NvdXJzZXNQcm9taXNlLFxuICAgICAgICB0aGlzLnVzZXJIaWRkZW5Db3Vyc2VzUHJvbWlzZV0pO1xuICAgICAgLy8gQXNzZW1ibGUgcmVzdWx0OlxuICAgICAgdGhpcy5yZXN1bHQgPSBhd2FpdCB0aGlzLmNyZWF0ZUNvdXJzZXNMaXN0KGVkc0FjdGl2ZUNvdXJzZXMsIHVzZXJIaWRkZW5Db3Vyc2VzLCBhY3RpdmVDb3Vyc2VzKTtcbiAgICB9XG4gICAgYXdhaXQgdGhpcy51c2VySGlkZGVuQ291cnNlc1Byb21pc2U7IC8vIFNvIHdlIGtub3cgdGhhdCB0aGlzLnJlc3VsdCBpcyB0aGVyZS5cbiAgICB0aGlzLm5vdGlmeVN1YnNjcmliZXIoc3Vic2NyaWJlciwgb3B0aW9ucyk7XG4gICAgdGhpcy5zdWJzY3JpYmVycy5wdXNoKHtzdWJzY3JpYmVyLCBvcHRpb25zfSk7XG4gIH1cblxuICB1bnN1YnNjcmliZSAoc3Vic2NyaWJlcjogSGlkZGVuQ291cnNlc1N1YnNjcmliZXIpIHtcbiAgICB0aGlzLnN1YnNjcmliZXJzID0gdGhpcy5zdWJzY3JpYmVycy5maWx0ZXIocyA9PiBzLnN1YnNjcmliZXIgIT09IHN1YnNjcmliZXIpO1xuICB9XG59XG5cbmlmICghaGlkZGVuQ291cnNlc1JlcG8pIHtcbiAgaGlkZGVuQ291cnNlc1JlcG8gPSBlbnYuaGlkZGVuQ291cnNlc1JlcG8gPSBuZXcgSGlkZGVuQ291cnNlc1JlcG8oKTtcbn1cbiIsImltcG9ydCB7IFJlcG8sIFJlcG9Db21tdW5pY2F0b3J9IGZyb20gJy4vcmVwbyc7XG5pbXBvcnQgeyBLZWRCYWNrZW5kQ2xpZW50LCBMaXN0T3B0aW9ucywgQmF0Y2hSdW5uZXIsIGNyZWF0ZVVVSUQgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XG5pbXBvcnQgeyBEb2N1bWVudH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEtlZFJlcG9PcHRpb25zPFQgZXh0ZW5kcyBEb2N1bWVudD4ge1xuICBnZXRDbGllbnQ6ICgpPT5LZWRCYWNrZW5kQ2xpZW50O1xuICBnZXRRdWVyeU9wdGlvbnM6ICgpPT5Qcm9taXNlPExpc3RPcHRpb25zPjtcbiAgb3B0aW1pc3RpYzogYm9vbGVhbjtcbiAgdGFibGU6IHN0cmluZztcbiAgdXNlcjogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3MgS2VkUmVwbzxUIGV4dGVuZHMgRG9jdW1lbnQ+IHtcbiAgbWVtOiBSZXBvPFQ+O1xuICBvcHRpb25zOiBLZWRSZXBvT3B0aW9uczxUPjtcbiAgXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IEtlZFJlcG9PcHRpb25zPFQ+KSB7XG4gICAgY29uc3Qge3RhYmxlLCBnZXRDbGllbnQsIGdldFF1ZXJ5T3B0aW9uc30gPSBvcHRpb25zO1xuICAgIHRoaXMubWVtID0gbmV3IFJlcG88VD4oe3F1ZXJ5OiBhc3luYyAoKT0+e1xuICAgICAgY29uc3QgcXVlcnlPcHRpb25zID0gYXdhaXQgZ2V0UXVlcnlPcHRpb25zKCk7XG4gICAgICByZXR1cm4gYXdhaXQgZ2V0Q2xpZW50KCkubGlzdDxUPih0YWJsZSwge1xuICAgICAgICAuLi5xdWVyeU9wdGlvbnMsXG4gICAgICAgIGNhY2hlQnVzdDogdGhpcy5nZXRDYWNoZUJ1c3QoKX0pO1xuICAgIH19KTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRDYWNoZUJ1c3QoKSB7XG4gICAgY29uc3Qge3RhYmxlLCB1c2VyfSA9IHRoaXMub3B0aW9ucztcbiAgICBjb25zdCBjYWNoZUJ1c3QgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2FjaGUtYnVzdC0nICsgdGFibGUgKyAnLScgKyB1c2VyKTtcbiAgICByZXR1cm4gY2FjaGVCdXN0IHx8IHRoaXMucmVnZW5lcmF0ZUNhY2hlQnVzdCgpO1xuICB9XG5cbiAgcHJpdmF0ZSByZWdlbmVyYXRlQ2FjaGVCdXN0KCkge1xuICAgIGNvbnN0IHt0YWJsZSwgdXNlcn0gPSB0aGlzLm9wdGlvbnM7XG4gICAgY29uc3QgY2FjaGVCdXN0ID0gY3JlYXRlVVVJRCgpO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjYWNoZS1idXN0LScgKyB0YWJsZSArICctJyArIHVzZXIsIGNhY2hlQnVzdCk7XG4gICAgcmV0dXJuIGNhY2hlQnVzdDtcbiAgfVxuXG4gIGFzeW5jIHVwc2VydChpdGVtOiBULCB1cGRhdGVyOiAoaXRlbTogVCkgPT4gdm9pZCkge1xuICAgIGlmICghaXRlbS4kZXRhZykge1xuICAgICAgLy8gSXRlbXMgd2l0aG91dCAkZXRhZyBjYW5ub3QgYmUgcmV0cmlldmVkIGZyb20gc2VydmVyLCBzbyBpdCBzaG91bGQgYmUgaW5zZXJ0ZWQuXG4gICAgICBjb25zdCB1cGRhdGVkSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIGl0ZW0pO1xuICAgICAgdXBkYXRlcih1cGRhdGVkSXRlbSk7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5pbnNlcnQoW3VwZGF0ZWRJdGVtXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFdlIGhhdmUgYW4gJGV0YWcsIHNvIHdlIGNhbiBleHBlY3QgaXQgdG8gbGl2ZSBvbiB0aGUgc2VydmVyLlxuICAgICAgLy8gSG93ZXZlciwgdGFrZSBjYXJlIG9mIHRoZSB1bmxpa2VseSBzaXR1YXRpb24gdGhhdCBpdCB3YXMgZGVsZXRlZCBmcm9tIHNlcnZlcixcbiAgICAgIC8vIGFuZCBpZiBzbywgaW5zZXJ0IGl0IGFnYWluLlxuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoW2l0ZW1dLCB1cGRhdGVyKS5jYXRjaChlID0+IHtcbiAgICAgICAgaWYgKGUubmFtZSA9PT0gXCJodHRwNDA0XCIpIHtcbiAgICAgICAgICBjb25zdCB1cGRhdGVkSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIGl0ZW0pO1xuICAgICAgICAgIHVwZGF0ZXIodXBkYXRlZEl0ZW0pO1xuICAgICAgICAgIHJldHVybiB0aGlzLmluc2VydChbdXBkYXRlZEl0ZW1dKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGUoaXRlbXM6IFRbXSwgdXBkYXRlcjogKGl0ZW06IFQpID0+IHZvaWQpIHtcbiAgICBjb25zdCB7Z2V0Q2xpZW50LCBvcHRpbWlzdGljLCB0YWJsZX0gPSB0aGlzLm9wdGlvbnM7XG4gICAgY29uc3QgY2xpZW50ID0gZ2V0Q2xpZW50KCk7XG4gICAgY29uc3QgbW9kaWZpZWRJdGVtczogVFtdID0gaXRlbXMubWFwKGl0ZW0gPT4ge1xuICAgICAgY29uc3QgbWVtUmVwb0l0ZW0gPSB0aGlzLm1lbS5pdGVtcy5maW5kKGl0ID0+IGl0LmlkID09PSBpdGVtLmlkKTtcbiAgICAgIGl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCBtZW1SZXBvSXRlbSB8fCBpdGVtKTtcbiAgICAgIHVwZGF0ZXIoaXRlbSk7XG4gICAgICByZXR1cm4gaXRlbTtcbiAgICB9KTtcbiAgICBpZiAob3B0aW1pc3RpYykgYXdhaXQgdGhpcy5tZW0udXBkYXRlKG1vZGlmaWVkSXRlbXMubWFwKHggPT4gT2JqZWN0LmFzc2lnbih7fSwgeCwgeyRtZXRhOiAndXBkYXRpbmcnfSkpKTtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBjbGllbnQuZG8gKGJyID0+IG1vZGlmaWVkSXRlbXMuZm9yRWFjaChpdGVtID0+IGJyLnB1dCh0YWJsZSwgaXRlbSkpKVxuICAgIC5jYXRjaChlID0+IGUubmFtZSA9PT0gXCJodHRwNDA5XCIgPyAvLyBjb25mbGljdFxuICAgICAgLy8gR2V0IGEgZnJlc2ggdmVyc2lvbiBmcm9tIHNlcnZlcjpcbiAgICAgIGNsaWVudC5saXN0PFQ+KHRhYmxlLCB7aWRzOiBpdGVtcy5tYXAoaXRlbSA9PiBpdGVtLmlkKX0sIHtjYWNoZTogJ25vLWNhY2hlJ30pLnRoZW4oZnJlc2hJdGVtcyA9PiB7XG4gICAgICAgIC8vIFVwZGF0ZSBsb2NhbCB2ZXJzaW9uOlxuICAgICAgICBjb25zdCBtb2RpZmllZEl0ZW1zID0gZnJlc2hJdGVtcy5tYXAoZnJlc2hJdGVtID0+IHtcbiAgICAgICAgICAvLyBDbG9uZSB0aGUgZnJlc2ggaXRlbVxuICAgICAgICAgIGNvbnN0IG1vZGlmaWVkID0gT2JqZWN0LmFzc2lnbih7fSwgZnJlc2hJdGVtKTtcbiAgICAgICAgICAvLyBSZS1ydW4gdGhlIHVwZGF0ZXIgb24gdGhlIGNsb25lOlxuICAgICAgICAgIHVwZGF0ZXIobW9kaWZpZWQpO1xuICAgICAgICAgIHJldHVybiBtb2RpZmllZDtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFJlLWRvIHRoZSB0aGUgcHV0IG9wZXJhdGlvbiB0b3dhcmRzIHRoZSBzZXJ2ZXIuXG4gICAgICAgIHJldHVybiBjbGllbnQuZG8oYnIgPT4gbW9kaWZpZWRJdGVtcy5mb3JFYWNoKGl0ZW0gPT4gYnIucHV0KHRhYmxlLCBpdGVtKSkpO1xuICAgICAgfSkgOlxuICAgICAgLy8gT3RoZXIgdW5leHBlY3RlZCBlcnJvcjpcbiAgICAgIFByb21pc2UucmVzb2x2ZShvcHRpbWlzdGljICYmXG4gICAgICAgIHRoaXMubWVtLnVwZGF0ZShpdGVtcykpIC8vIFVuZG8gb3B0aW1pc3RpYyB1cGRhdGVcbiAgICAgIC50aGVuKCgpPT57XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlKTsgLy8gUmVqZWN0IHdpdGggdGhlIGVycm9yIG5vIG1hdHRlci5cbiAgICAgIH0pKTtcbiAgICB0aGlzLnJlZ2VuZXJhdGVDYWNoZUJ1c3QoKTtcbiAgICBtb2RpZmllZEl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICBpdGVtLiRldGFnID0gcmVzLm5ld0V0YWdzW2l0ZW0uaWRdO1xuICAgICAgaXRlbS4kbWV0YSA9IHVuZGVmaW5lZDtcbiAgICB9KTtcbiAgICBhd2FpdCB0aGlzLm1lbS51cGRhdGUobW9kaWZpZWRJdGVtcyk7IC8vIEVuc3VyZXMgbmV3IGV0YWcgaXMgaXMgYXBwbGllZCBvbiBuZXh0IGFjdGlvbi5cbiAgfVxuXG4gIHN0cmlwR3JhcGhzIChpdGVtczogVFtdLCBncmFwaHM6IHN0cmluZ1tdKSB7XG4gICAgcmV0dXJuIGl0ZW1zLm1hcChpdGVtID0+IHtcbiAgICAgIGNvbnN0IGNsb25lID0gT2JqZWN0LmFzc2lnbih7fSwgaXRlbSk7XG4gICAgICBncmFwaHMuZm9yRWFjaChncmFwaCA9PiB7XG4gICAgICAgIGlmIChpdGVtW2dyYXBoXSkge1xuICAgICAgICAgIGNsb25lW2dyYXBoXSA9IChpdGVtW2dyYXBoXSBhcyB7aWQ6c3RyaW5nfVtdKS5tYXAgKGRvYyA9PiAoe2lkOiBkb2MuaWR9KSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGNsb25lO1xuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgaW5zZXJ0KGl0ZW1zOiBUW10pIHtcbiAgICBjb25zdCB7Z2V0Q2xpZW50LCBvcHRpbWlzdGljLCB0YWJsZSwgZ2V0UXVlcnlPcHRpb25zfSA9IHRoaXMub3B0aW9ucztcbiAgICBjb25zdCBjbGllbnQgPSBnZXRDbGllbnQoKTtcbiAgICBjb25zdCBxdWVyeU9wdGlvbnMgPSBhd2FpdCBnZXRRdWVyeU9wdGlvbnMoKTtcbiAgICBjb25zdCBncmFwaHMgPSBbXS5jb25jYXQocXVlcnlPcHRpb25zLmluY2x1ZGUpO1xuICAgIC8vIEdpdmUgSURzIHRvIGVhY2ggaXRlbTpcbiAgICBpdGVtcyA9IGl0ZW1zLm1hcChpdGVtID0+IGl0ZW0uaWQgPyBpdGVtIDogT2JqZWN0LmFzc2lnbih7fSwgaXRlbSwge2lkOiBjcmVhdGVVVUlEKCl9KSk7XG4gICAgY29uc3Qgc3RyaXBwZWQgPSB0aGlzLnN0cmlwR3JhcGhzKGl0ZW1zLCBncmFwaHMpO1xuICAgIGlmIChvcHRpbWlzdGljKSBhd2FpdCB0aGlzLm1lbS5pbnNlcnQoc3RyaXBwZWQubWFwKHggPT4gT2JqZWN0LmFzc2lnbih7fSwgeCwgeyRtZXRhOiAnYWRkaW5nJ30pKSk7XG4gICAgY29uc3QgYnIgPSBuZXcgQmF0Y2hSdW5uZXIoKTtcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2Ygc3RyaXBwZWQpIHtcbiAgICAgIC8vIEFsc28gYWRkIGxpbmtzIHRvIGFsbCBmb3JlaWduIHJlbGF0ZWQgaXRlbXM6XG4gICAgICBmb3IgKGNvbnN0IGdyYXBoIG9mIGdyYXBocykge1xuICAgICAgICBjb25zdCBmb3JlaWduSXRlbXM6IERvY3VtZW50W10gPSBpdGVtW2dyYXBoXTtcbiAgICAgICAgaWYgKGZvcmVpZ25JdGVtcykge1xuICAgICAgICAgIGZvcmVpZ25JdGVtcy5mb3JFYWNoKGRvYyA9PiB7XG4gICAgICAgICAgICBici5saW5rMih0YWJsZSwgaXRlbS5pZCwgZ3JhcGgsIGRvYy5pZCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGJyLmFkZCh0YWJsZSwgaXRlbSk7XG4gICAgfVxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGNsaWVudC5iYXRjaChici5tdXRhdGlvblJlcXVlc3RzKS5jYXRjaChlID0+IHtcbiAgICAgIGlmIChvcHRpbWlzdGljKSB0aGlzLm1lbS5kZWxldGUoaXRlbXMubWFwKGl0ZW0gPT4gaXRlbS5pZCkpO1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGUpO1xuICAgIH0pXG4gICAgdGhpcy5yZWdlbmVyYXRlQ2FjaGVCdXN0KCk7XG4gICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IGl0ZW0uJGV0YWcgPSByZXMubmV3RXRhZ3NbaXRlbS5pZF0pO1xuICAgIGlmIChvcHRpbWlzdGljKVxuICAgICAgYXdhaXQgdGhpcy5tZW0udXBkYXRlKGl0ZW1zKTsgLy8gVXBkYXRlIHdpdGggbmV3ICRldGFnLlxuICAgIGVsc2VcbiAgICAgIGF3YWl0IHRoaXMubWVtLmluc2VydChpdGVtcyk7XG4gIH1cblxuICBhc3luYyBkZWxldGUgKGlkczogc3RyaW5nW10pIHtcbiAgICBjb25zdCB7Z2V0Q2xpZW50LCBvcHRpbWlzdGljLCB0YWJsZX0gPSB0aGlzLm9wdGlvbnM7XG4gICAgY29uc3QgY2xpZW50ID0gZ2V0Q2xpZW50KCk7XG4gICAgaWYgKG9wdGltaXN0aWMpIGF3YWl0IHRoaXMubWVtLnVwZGF0ZShpZHNcbiAgICAgIC5tYXAoaWQgPT4gdGhpcy5tZW0uaXRlbXMuZmluZCh4ID0+IHguaWQgPT09IGlkKSlcbiAgICAgIC5maWx0ZXIoeCA9PiB4KVxuICAgICAgLm1hcCh4ID0+IE9iamVjdC5hc3NpZ24oe30sIHgsIHskbWV0YTogJ2RlbGV0aW5nJ30pKSk7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgY2xpZW50LmRvIChiciA9PiBpZHMuZm9yRWFjaChpZCA9PiBici5kZWxldGUodGFibGUsIGlkKSkpLmNhdGNoKGFzeW5jIGUgPT4ge1xuICAgICAgaWYgKG9wdGltaXN0aWMpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5tZW0udXBkYXRlKGlkc1xuICAgICAgICAgIC5tYXAoaWQgPT4gdGhpcy5tZW0uaXRlbXMuZmluZCh4ID0+IHguaWQgPT09IGlkKSlcbiAgICAgICAgICAuZmlsdGVyKHggPT4geClcbiAgICAgICAgICAubWFwKHggPT4ge1xuICAgICAgICAgICAgeCA9IE9iamVjdC5hc3NpZ24oe30sIHgpO1xuICAgICAgICAgICAgZGVsZXRlIHguJG1ldGE7XG4gICAgICAgICAgICByZXR1cm4geDtcbiAgICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgICB0aHJvdyBlO1xuICAgIH0pO1xuICAgIHRoaXMucmVnZW5lcmF0ZUNhY2hlQnVzdCgpO1xuICAgIGF3YWl0IHRoaXMubWVtLmRlbGV0ZShpZHMpO1xuICB9XG59XG4iLCJpbXBvcnQge0tlZFJlcG99IGZyb20gJy4va2VkLXJlcG8nO1xuaW1wb3J0IHsgS0dUZXJtUGxhbm5lcldlZWtQbGFuT3JUdXRvck5vdGUgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XG5pbXBvcnQgZW52IGZyb20gJy4uL2dsb2JhbHMvS0VELmVudic7XG5pbXBvcnQgeyBnZXRUZXJtU3RhckVuZERhdGUgfSBmcm9tICcuLi91dGlscy9zY2hvb2wtbW9tZW50JztcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcbmltcG9ydCB7IEtlZEJhY2tlbmRDbGllbnQgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XG5pbXBvcnQgeyBVc2VyIH0gZnJvbSAnLi4vY29udHJhY3RzL2tlZC1tb2RlbHMnO1xuXG5leHBvcnQgY2xhc3MgS0dUZXJtUGxhbm5lclJlcG8gZXh0ZW5kcyBLZWRSZXBvPEtHVGVybVBsYW5uZXJXZWVrUGxhbk9yVHV0b3JOb3RlPiB7XG4gIGNvbnN0cnVjdG9yKGdldENsaWVudDogKCk9PktlZEJhY2tlbmRDbGllbnQsIGdldEN1cnJlbnRVc2VyOiAoKT0+VXNlcikge1xuICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gZ2V0Q3VycmVudFVzZXIoKTtcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IFt0ZXJtU3RhcnQsIHRlcm1FbmRdID0gZ2V0VGVybVN0YXJFbmREYXRlKG5vdywgbm93LmdldE1vbnRoKCkgPj0gNyk7XG4gICAgc3VwZXIoe1xuICAgICAgZ2V0Q2xpZW50LFxuICAgICAgb3B0aW1pc3RpYzogdHJ1ZSxcbiAgICAgIHRhYmxlOiBcIndlZWtwbGFuc1wiLFxuICAgICAgdXNlcjogY3VycmVudFVzZXIgPyBjdXJyZW50VXNlci5tYWlsIDogXCJcIixcbiAgICAgIGdldFF1ZXJ5T3B0aW9uczogYXN5bmMgKCk9PntcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBmcm9tOiB0ZXJtU3RhcnQuc3RhcnRPZignd2VlaycpLmFkZCgtMiwgJ2RheXMnKS50b0RhdGUoKS52YWx1ZU9mKCksXG4gICAgICAgICAgdG86IHRlcm1FbmQuc3RhcnRPZignd2VlaycpLmFkZCg1LCAnZGF5cycpLnRvRGF0ZSgpLnZhbHVlT2YoKSxcbiAgICAgICAgICByb2xlOiBcIlVTRVJcIlxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHRlcm1QbGFubmVyUmVwbyA9IG5ldyBLR1Rlcm1QbGFubmVyUmVwbygoKT0+ZW52LmtlZEJhY2tlbmRDbGllbnQsKCk9PmVudi5jdXJyZW50VXNlcik7XG5lbnYua2dUZXJtUGxhbm5lclJlcG8gPSB0ZXJtUGxhbm5lclJlcG87XG4iLCJpbXBvcnQgZW52IGZyb20gJy4uL2dsb2JhbHMvS0VELmVudic7XG5pbXBvcnQgeyBLU1Rlcm1QbGFubmVyUmVwbyB9IGZyb20gJy4va3MtdGVybXBsYW5uZXItcmVwbyc7XG5cbmV4cG9ydCBjb25zdCB0ZXJtUGxhbm5lclJlcG9LUyA9IG5ldyBLU1Rlcm1QbGFubmVyUmVwbygoKT0+ZW52LmtlZEJhY2tlbmRDbGllbnQsICgpPT5lbnYuY3VycmVudFVzZXIpO1xuZW52LmtzVGVybVBsYW5uZXJSZXBvID0gdGVybVBsYW5uZXJSZXBvS1M7XG4iLCJpbXBvcnQgeyBLZWRSZXBvIH0gZnJvbSAnLi9rZWQtcmVwbyc7XG5pbXBvcnQgeyBLU1Rlcm1QbGFubmVyV2Vla1BsYW4sIFRlcm1QbGFubmVyVHV0b3JOb3RlLCBUZXJtcGxhbm5lcldlZWtPclR1dG9yIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xuaW1wb3J0IHsgS2VkQmFja2VuZENsaWVudCB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcbmltcG9ydCB7IFVzZXIgfSBmcm9tICcuLi9jb250cmFjdHMva2VkLW1vZGVscyc7XG5cblxuZXhwb3J0IGNsYXNzIEtTVGVybVBsYW5uZXJSZXBvIGV4dGVuZHMgS2VkUmVwbzxUZXJtcGxhbm5lcldlZWtPclR1dG9yPiB7XG4gIHN0YXJ0RGF0ZTogbW9tZW50Lk1vbWVudDtcbiAgZW5kRGF0ZTogbW9tZW50Lk1vbWVudDtcblxuICAgYXN5bmMgcmVmcmVzaERhdGEoZGF0ZUludGVydmFsIDogbW9tZW50Lk1vbWVudFtdKXtcbiAgICBbdGhpcy5zdGFydERhdGUsIHRoaXMuZW5kRGF0ZV0gID0gZGF0ZUludGVydmFsO1xuICAgICBhd2FpdCB0aGlzLm1lbS5yZWZyZXNoRnJvbVNlcnZlcigpO1xuICAgfVxuXG4gIGNvbnN0cnVjdG9yKGdldENsaWVudDogKCk9PktlZEJhY2tlbmRDbGllbnQsIGdldEN1cnJlbnRVc2VyOiAoKT0+VXNlcikge1xuICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gZ2V0Q3VycmVudFVzZXIoKTtcbiAgICBzdXBlcih7XG4gICAgICBnZXRDbGllbnQsXG4gICAgICBvcHRpbWlzdGljOiB0cnVlLFxuICAgICAgdGFibGU6IFwid2Vla3BsYW5zLWtzXCIsXG4gICAgICB1c2VyOiBjdXJyZW50VXNlciA/IGN1cnJlbnRVc2VyLm1haWwgOiBcIlwiLFxuICAgICAgZ2V0UXVlcnlPcHRpb25zOiBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHN0YXJ0RGF0ZVZhbHVlID0gKHRoaXMuc3RhcnREYXRlICYmIHRoaXMuc3RhcnREYXRlLnZhbHVlT2YoKSkgfHwgbW9tZW50KCkudmFsdWVPZigpO1xuICAgICAgICBjb25zdCBlbmREYXRlVmFsdWUgPSAodGhpcy5lbmREYXRlICYmIHRoaXMuZW5kRGF0ZS52YWx1ZU9mKCkpIHx8IG1vbWVudCgpLnZhbHVlT2YoKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBmcm9tOiBzdGFydERhdGVWYWx1ZSxcbiAgICAgICAgICB0bzogZW5kRGF0ZVZhbHVlLFxuICAgICAgICAgIHJvbGU6IFwiVVNFUlwiXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIiwiXG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVwb0NvbW11bmljYXRvcjxUIGV4dGVuZHMge2lkOiBzdHJpbmd9PiB7XG4gIHF1ZXJ5KCk6IFByb21pc2U8VFtdPjtcbn1cblxudHlwZSBTdWJzY3JpYmVyPFQ+ID0gKGl0ZW1zOlRbXSwgZXJyb3I6IHVuZGVmaW5lZCB8IEVycm9yKSA9PiBhbnk7XG5cbmV4cG9ydCBjbGFzcyBSZXBvPFQgZXh0ZW5kcyB7aWQ6IHN0cmluZ30+IHtcbiAgbGlzdFByb21pc2U6IFByb21pc2U8dm9pZD47XG4gIGl0ZW1zOiBUW107XG4gIGVycm9yPzogRXJyb3I7XG4gIHN1YnNjcmliZXJzOiBTdWJzY3JpYmVyPFQ+W107XG5cbiAgY29uc3RydWN0b3IocHVibGljIGNvbW06IFJlcG9Db21tdW5pY2F0b3I8VD4pIHtcbiAgICB0aGlzLmxpc3RQcm9taXNlID0gbnVsbDtcbiAgICB0aGlzLml0ZW1zID0gbnVsbDtcbiAgICB0aGlzLnN1YnNjcmliZXJzID0gW107XG4gIH1cblxuICBzdWJzY3JpYmUoc3Vic2NyaWJlcjogU3Vic2NyaWJlcjxUPikge1xuICAgIHJldHVybiB0aGlzLmVuc3VyZUhhc0RhdGEoKS50aGVuKCgpPT57XG4gICAgICBzdWJzY3JpYmVyKHRoaXMuaXRlbXMsIHRoaXMuZXJyb3IpO1xuICAgICAgdGhpcy5zdWJzY3JpYmVycy5wdXNoKHN1YnNjcmliZXIpO1xuICAgIH0pO1xuICB9XG5cbiAgdW5zdWJzY3JpYmUoc3Vic2NyaWJlcjogU3Vic2NyaWJlcjxUPikge1xuICAgIHRoaXMuc3Vic2NyaWJlcnMgPSB0aGlzLnN1YnNjcmliZXJzLmZpbHRlciAocyA9PiBzICE9PSBzdWJzY3JpYmVyKTtcbiAgfVxuXG4gIG5vdGlmeVN1YnNjcmliZXJzKCkge1xuICAgIHRoaXMuc3Vic2NyaWJlcnMuZm9yRWFjaChzID0+IHModGhpcy5pdGVtcywgdGhpcy5lcnJvcikpO1xuICB9XG5cbiAgZW5zdXJlSGFzRGF0YSgpIHtcbiAgICBpZiAoIXRoaXMubGlzdFByb21pc2UpIHRoaXMucmVmcmVzaEZyb21TZXJ2ZXIoKTtcbiAgICByZXR1cm4gdGhpcy5saXN0UHJvbWlzZTtcbiAgfVxuXG4gIHJlZnJlc2hGcm9tU2VydmVyKCkge1xuICAgIHRoaXMubGlzdFByb21pc2UgPSB0aGlzLmNvbW0ucXVlcnkoKS50aGVuKGl0ZW1zID0+IHtcbiAgICAgIHRoaXMuaXRlbXMgPSBpdGVtcztcbiAgICAgIHRoaXMuZXJyb3IgPSBudWxsO1xuICAgICAgdGhpcy5ub3RpZnlTdWJzY3JpYmVycygpO1xuICAgIH0pLmNhdGNoKGVycm9yID0+IHtcbiAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcbiAgICAgIHRoaXMuaXRlbXMgPSB0aGlzLml0ZW1zIHx8IFtdO1xuICAgICAgdGhpcy5ub3RpZnlTdWJzY3JpYmVycygpO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLmxpc3RQcm9taXNlO1xuICB9XG4gIFxuICBhc3luYyB1cGRhdGUoaXRlbTogVCB8IFRbXSkge1xuICAgIGF3YWl0IHRoaXMuZW5zdXJlSGFzRGF0YSgpO1xuICAgIGNvbnN0IHVwZGF0ZWRJdGVtcyA9IEFycmF5LmlzQXJyYXkoaXRlbSkgPyBpdGVtIDogW2l0ZW1dO1xuICAgIHRoaXMuaXRlbXMgPSB0aGlzLml0ZW1zLm1hcChpdCA9PiB7XG4gICAgICBjb25zdCB1cGRhdGVkSXRlbSA9IHVwZGF0ZWRJdGVtcy5maW5kKCh7aWR9KSA9PiBpdC5pZCA9PT0gaWQpO1xuICAgICAgcmV0dXJuIHVwZGF0ZWRJdGVtID9cbiAgICAgICAgT2JqZWN0LmFzc2lnbih7fSwgdXBkYXRlZEl0ZW0pIDpcbiAgICAgICAgaXQ7XG4gICAgfSk7XG4gICAgdGhpcy5ub3RpZnlTdWJzY3JpYmVycygpO1xuICB9XG5cbiAgaW5zZXJ0KGl0ZW06IFQgfCBUW10pIHtcbiAgICByZXR1cm4gdGhpcy5lbnN1cmVIYXNEYXRhKCkudGhlbigoKT0+e1xuICAgICAgdGhpcy5pdGVtcyA9IHRoaXMuaXRlbXMuY29uY2F0KGl0ZW0pO1xuICAgICAgdGhpcy5ub3RpZnlTdWJzY3JpYmVycygpO1xuICAgIH0pO1xuICB9XG5cbiAgZGVsZXRlKGlkOiBzdHJpbmcgfCBzdHJpbmdbXSkge1xuICAgIGNvbnN0IGlkcyA9IEFycmF5LmlzQXJyYXkoaWQpID8gaWQgOiBbaWRdO1xuICAgIHJldHVybiB0aGlzLmVuc3VyZUhhc0RhdGEoKS50aGVuKCgpPT57XG4gICAgICB0aGlzLml0ZW1zID0gdGhpcy5pdGVtcy5maWx0ZXIoaXQgPT4gIWlkcy5zb21lKGlkID0+IGl0LmlkID09PSBpZCkpO1xuICAgICAgdGhpcy5ub3RpZnlTdWJzY3JpYmVycygpO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQge0tlZFJlcG99IGZyb20gJy4va2VkLXJlcG8nO1xuaW1wb3J0IHsgVXNlclRhc2ssIFVzZXJTdWJUYXNrIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xuaW1wb3J0IGVudiBmcm9tICcuLi9nbG9iYWxzL0tFRC5lbnYnO1xuaW1wb3J0IHsgV2Vla1BsYW5uZXJQZXJzaXN0ZWRTdGF0ZSB9IGZyb20gXCIuLi9jb21wb25lbnRzL3dlZWtwbGFubmVyL3dlZWtwbGFubmVyLXBlcnNpc3RlZC1zdGF0ZVwiO1xuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xuaW1wb3J0IHsgY3JlYXRlVVVJRCwgRG9jdW1lbnRBY2Nlc3MsIEtlZEJhY2tlbmRDbGllbnQgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XG5pbXBvcnQgeyBnZXRBZGp1c3RlZFdlZWssIEtFRFdlZWsgfSBmcm9tICcuLi91dGlscy93ZWVrdXRpbCc7XG5pbXBvcnQgeyBVc2VyIH0gZnJvbSAnLi4vY29udHJhY3RzL2tlZC1tb2RlbHMnO1xuXG5leHBvcnQgbGV0IHVzZXJUYXNrc1JlcG8gPSBlbnYudXNlclRhc2tzUmVwbyBhcyBVc2VyVGFza3NSZXBvO1xuXG5leHBvcnQgY2xhc3MgVXNlclRhc2tzUmVwbyBleHRlbmRzIEtlZFJlcG88VXNlclRhc2s+IHtcbiAgcGVyc2lzdGVkU3RhdGU6IFdlZWtQbGFubmVyUGVyc2lzdGVkU3RhdGUgfCBudWxsO1xuICBnZXRDdXJyZW50VXNlcjogKCk9PlVzZXI7XG5cbiAgY29uc3RydWN0b3IoZ2V0Q2xpZW50OiAoKT0+S2VkQmFja2VuZENsaWVudCwgZ2V0Q3VycmVudFVzZXI6ICgpPT5Vc2VyKSB7ICAgIFxuICAgIHN1cGVyKHtcbiAgICAgIGdldENsaWVudCxcbiAgICAgIG9wdGltaXN0aWM6IHRydWUsXG4gICAgICB0YWJsZTogXCJ1c2VydGFza3NcIixcbiAgICAgIHVzZXI6IGdldEN1cnJlbnRVc2VyKCkgPyBnZXRDdXJyZW50VXNlcigpLm1haWwgOiBcIlwiLFxuICAgICAgZ2V0UXVlcnlPcHRpb25zOiBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gZ2V0Q3VycmVudFVzZXIoKTtcbiAgICAgICAgY29uc3QgdXNlckVtYWlsID0gY3VycmVudFVzZXIgPyBjdXJyZW50VXNlci5tYWlsIDogXCJcIjtcbiAgICAgICAgaWYgKCF0aGlzLnBlcnNpc3RlZFN0YXRlKVxuICAgICAgICAgIHRoaXMucGVyc2lzdGVkU3RhdGUgPSBhd2FpdCBXZWVrUGxhbm5lclBlcnNpc3RlZFN0YXRlLmxvYWQodXNlckVtYWlsKTtcbiAgICAgICAgY29uc3QgeyB3ZWVrRGF0ZSB9ID0gdGhpcy5wZXJzaXN0ZWRTdGF0ZTtcbiAgICAgICAgY29uc3Qgd2Vla051bWJlciA9IG1vbWVudCh3ZWVrRGF0ZSkud2VlaygpO1xuICAgICAgICBjb25zdCBrZWRXZWVrID0gS0VEV2Vlayhtb21lbnQod2Vla0RhdGUpLnllYXIoKSwgd2Vla051bWJlcik7XG4gICAgICAgIC8qY29uc3QgW2Zyb20sIHRvXSA9IFttb21lbnQod2Vla0RhdGUpLnN0YXJ0T2YoJ3dlZWsnKSwgbW9tZW50KHdlZWtEYXRlKS5lbmRPZignd2VlaycpXVxuICAgICAgICAgIC5tYXAobSA9PiBtLnRvRGF0ZSgpLmdldFRpbWUoKSk7Ki9cbiAgICAgICAgXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZyb206IGtlZFdlZWsubm90QmVmb3JlLFxuICAgICAgICAgICAgdG86IGtlZFdlZWsubm90QWZ0ZXIsXG4gICAgICAgICAgICByb2xlOiBcIlVTRVJcIixcbiAgICAgICAgICAgIGluY2x1ZGU6IFtcInRhc2tcIiwgXCJjb3Vyc2VcIl0sXG4gICAgICAgICAgICBmbGFnczogW1wiaW5jbHVkZUlkc09ubHlcIl0sXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMucGVyc2lzdGVkU3RhdGUgPSBudWxsO1xuICAgIHRoaXMuZ2V0Q3VycmVudFVzZXIgPSBnZXRDdXJyZW50VXNlcjtcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVBlcnNpc3RlZFN0YXRlKHN0YXRlQ2hhbmdlczogUGFydGlhbDxXZWVrUGxhbm5lclBlcnNpc3RlZFN0YXRlPikge1xuICAgIE9iamVjdC5hc3NpZ24odGhpcy5wZXJzaXN0ZWRTdGF0ZSwgc3RhdGVDaGFuZ2VzKTtcbiAgICBhd2FpdCB0aGlzLnBlcnNpc3RlZFN0YXRlLnNhdmUoKTtcbiAgICB0aGlzLm1lbS5ub3RpZnlTdWJzY3JpYmVycygpO1xuICB9XG5cbiAgYXN5bmMgc2V0VGFza0RvbmVTdGF0ZSh1c2VyVGFzazogVXNlclRhc2ssIGRvbmU6IGJvb2xlYW4pIHtcbiAgICBjb25zdCB7Z2V0Q2xpZW50LCBvcHRpbWlzdGljLCB0YWJsZX0gPSB0aGlzLm9wdGlvbnM7XG4gICAgY29uc3QgY2xpZW50ID0gZ2V0Q2xpZW50KCk7XG4gICAgY29uc3QgbW9kaWZpZWRJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgdXNlclRhc2ssIHtkb25lfSk7XG4gICAgaWYgKG9wdGltaXN0aWMpIGF3YWl0IHRoaXMubWVtLnVwZGF0ZShPYmplY3QuYXNzaWduKHt9LCBtb2RpZmllZEl0ZW0sIHskbWV0YTogJ3VwZGF0aW5nJ30pKTtcbiAgICAvLyBOb3cgbWFrZSBzdXJlIHRvIGNoYW5nZSB0aGUgc3RhdGUgZm9yIG90aGVyIHdlZWtzIGFzIHdlbGw6XG4gICAgY29uc3Qgc2ltaWxhclRhc2tzID0gYXdhaXQgY2xpZW50Lmxpc3Q8VXNlclRhc2s+KCd1c2VydGFza3MnLCB7XG4gICAgICBuYW1lOiB1c2VyVGFzay5uYW1lLFxuICAgICAgcm9sZTogXCJVU0VSXCIsXG4gICAgICBpbmNsdWRlOiBbXCJ0YXNrXCIsXCJjb3Vyc2VcIl0sXG4gICAgICBmbGFnczogW1wiaW5jbHVkZUlkc09ubHlcIl0sXG4gICAgICBmcm9tOiBtb21lbnQodGhpcy5wZXJzaXN0ZWRTdGF0ZS53ZWVrRGF0ZSkuYWRkKC0zLCAnd2Vla3MnKS52YWx1ZU9mKCksXG4gICAgICB0bzogbW9tZW50KHRoaXMucGVyc2lzdGVkU3RhdGUud2Vla0RhdGUpLmFkZCgzLCAnd2Vla3MnKS52YWx1ZU9mKClcbiAgICB9LCB7XG4gICAgICBjYWNoZTogJ25vLWNhY2hlJ1xuICAgIH0pO1xuICAgIGNvbnN0IGlkZW50aWNhbFRhc2tzID0gc2ltaWxhclRhc2tzLmZpbHRlcih0ID0+XG4gICAgICB0LmNvdXJzZU5hbWUgPT09IHVzZXJUYXNrLmNvdXJzZU5hbWUgJiZcbiAgICAgIHQubGVhcm5pbmdHb2FsID09PSB1c2VyVGFzay5sZWFybmluZ0dvYWwgJiZcbiAgICAgICghdXNlclRhc2sudGFzayB8fCB0LnRhc2subWFwKHQ9PnQuaWQpLmpvaW4oJycpID09PSB1c2VyVGFzay50YXNrLm1hcCh0PT50LmlkKS5qb2luKCcnKSkgJiZcbiAgICAgICghdXNlclRhc2suY291cnNlIHx8IHQuY291cnNlLm1hcChjPT5jLmlkKS5qb2luKCcnKSA9PT0gdXNlclRhc2suY291cnNlLm1hcChjPT5jLmlkKS5qb2luKCcnKSkpO1xuICAgIGlmIChpZGVudGljYWxUYXNrcy5sZW5ndGggPT09IDApIHtcbiAgICAgIC8vIFdvcmthcm91bmQgZm9yIGlzc3VlIGluIFN1YmplY3RQbGFubmVyIG1pZ3JhdGlvbiAodXNlcnRhc2tzIHdpdGggbG9uZyBuYW1lcyBpcyBub3QgZm91bmQpXG4gICAgICBpZGVudGljYWxUYXNrcy5wdXNoKHVzZXJUYXNrKVxuICAgIH1cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZShpZGVudGljYWxUYXNrcywgdCA9PiB0LmRvbmUgPSBkb25lKTtcbiAgfVxuXG4gIGFzeW5jIHNldFN1YlRhc2tEb25lU3RhdGUgKHVzZXJUYXNrOiBVc2VyVGFzaywgc3ViVGFza0lkOiBzdHJpbmcsIGRvbmU6IGJvb2xlYW4pIHtcbiAgICBjb25zdCB7Z2V0Q2xpZW50LCBvcHRpbWlzdGljLCB0YWJsZX0gPSB0aGlzLm9wdGlvbnM7XG4gICAgY29uc3QgY2xpZW50ID0gZ2V0Q2xpZW50KCk7XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoW3VzZXJUYXNrXSxcbiAgICAgIHQgPT4gdC5zdWJUYXNrcyAmJiB0LnN1YlRhc2tzLmZpbHRlcihzdCA9PiBzdC5pZCA9PT0gc3ViVGFza0lkKVxuICAgICAgICAuZm9yRWFjaChzdCA9PiBzdC5kb25lID0gZG9uZSkpO1xuICB9XG5cbiAgYXN5bmMgc2V0V2Vla1BsYW5uZXJCb3hPcGVuKGNvdXJzZU5hbWU6IHN0cmluZywgaXNPcGVuOiBib29sZWFuKSB7XG4gICAgY29uc3Qgb3BlbkNvdXJzZXMgPSB7IC4uLnRoaXMucGVyc2lzdGVkU3RhdGUub3BlbkNvdXJzZXMgfTtcbiAgICBpZiAoaXNPcGVuKVxuICAgICAgb3BlbkNvdXJzZXNbY291cnNlTmFtZV0gPSB0cnVlO1xuICAgIGVsc2VcbiAgICAgIGRlbGV0ZSBvcGVuQ291cnNlc1tjb3Vyc2VOYW1lXTtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZVBlcnNpc3RlZFN0YXRlKHtvcGVuQ291cnNlc30pO1xuICB9XG5cbiAgYXN5bmMgY2hhbmdlV2Vlayh3ZWVrRGF0ZTogRGF0ZSwga2VlcEN1cnJlbnREYXRlPzogYm9vbGVhbikge1xuICAgIGxldCBwZXJzaXN0ZWRTdGF0ZSA9IHRoaXMucGVyc2lzdGVkU3RhdGU7XG4gICAgaWYgKCFwZXJzaXN0ZWRTdGF0ZSkge1xuICAgICAgcGVyc2lzdGVkU3RhdGUgPSBhd2FpdCBXZWVrUGxhbm5lclBlcnNpc3RlZFN0YXRlLmxvYWQodGhpcy5vcHRpb25zLnVzZXIpO1xuICAgIH1cbiAgICBjb25zdCBuZXdQZXJzaXN0ZWQgPSBuZXcgV2Vla1BsYW5uZXJQZXJzaXN0ZWRTdGF0ZShwZXJzaXN0ZWRTdGF0ZSk7XG4gICAgbmV3UGVyc2lzdGVkLndlZWtEYXRlID0ga2VlcEN1cnJlbnREYXRlID8gbW9tZW50KHdlZWtEYXRlKS52YWx1ZU9mKCkgOiBtb21lbnQod2Vla0RhdGUpLnN0YXJ0T2YoJ3dlZWsnKS52YWx1ZU9mKCk7XG4gICAgbmV3UGVyc2lzdGVkLnNhdmUoKTtcbiAgICB0aGlzLnBlcnNpc3RlZFN0YXRlID0gbmV3UGVyc2lzdGVkO1xuICAgIGF3YWl0IHRoaXMubWVtLnJlZnJlc2hGcm9tU2VydmVyKCk7XG4gIH1cblxuICBzdWJzY3JpYmUoc3Vic2NyaWJlcjogKHVzZXJUYXNrczogVXNlclRhc2tbXSwgcGVyc2lzdGVkU3RhdGU6IFdlZWtQbGFubmVyUGVyc2lzdGVkU3RhdGUsIHdlZWtUZXh0c1VUOiBVc2VyVGFzaykgPT4gdm9pZCkge1xuICAgIGNvbnN0IHByb3h5U3Vic2NyaWJlciA9ICh1c2VyVGFza3M6IFVzZXJUYXNrW10pID0+IHtcbiAgICAgIHN1YnNjcmliZXIoXG4gICAgICAgIHVzZXJUYXNrcy5maWx0ZXIodXQgPT4gIXV0LndlZWtUZXh0cyksXG4gICAgICAgIHRoaXMucGVyc2lzdGVkU3RhdGUsXG4gICAgICAgIHVzZXJUYXNrcy5maWx0ZXIodXQgPT4gISF1dC53ZWVrVGV4dHMpWzBdIHx8IHtcbiAgICAgICAgICBpZDogY3JlYXRlVVVJRCgpLFxuICAgICAgICAgIGRhdGVUaW1lOiB0aGlzLnBlcnNpc3RlZFN0YXRlLndlZWtEYXRlLFxuICAgICAgICAgIHdlZWtUZXh0czoge2Fzc2Vzc21lbnQ6JycsIHN0cmF0ZWd5OicnfSxcbiAgICAgICAgICBhY2w6IFtcbiAgICAgICAgICAgIC8vIERlZmF1bHQgQUNMOiBMZXQgdXNlciBzZWxmIGhhdmUgZnVsbCBjb250cm9sIG92ZXIgdGhpcyBpdGVtOlxuICAgICAgICAgICAgbmV3IERvY3VtZW50QWNjZXNzKFwiZW1haWxcIiwgdGhpcy5nZXRDdXJyZW50VXNlcigpLm1haWwsIFwiU1wiKSxcbiAgICAgICAgICAgIC8vIEFkZGl0aW9uYWwgQUNMOiBMZXQgZW1wbG95ZWVzIG9uIHNhbWUgc2Nob29sIGhhdmUgcmVhZCBhY2Nlc3MgdG8gaXQuXG4gICAgICAgICAgICAvLyBUaGlzIGN1cnJlbnRseSBvbmx5IGFwcGxpZXMgdG8gdGFza3MgdGhhdCByZWZlciB0byBjb3Vyc2UgdGFza3MgKG5vdCBvd24gdGFza3MhKVxuICAgICAgICAgICAgbmV3IERvY3VtZW50QWNjZXNzKFwic2Nob29sUm9sZVwiLCBgJHt0aGlzLmdldEN1cnJlbnRVc2VyKCkuc2Nob29sfS9FTVBMT1lFRWAsIFwiUlwiKVxuICAgICAgICAgIF0ubWFwKGFjID0+IGFjLnRvU3RyaW5nKCkpXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgcHJveHlTdWJzY3JpYmVyW1wic3Vic2NyaWJlclwiXSA9IHN1YnNjcmliZXI7XG4gICAgdGhpcy5tZW0uc3Vic2NyaWJlKHByb3h5U3Vic2NyaWJlcik7XG4gIH1cblxuICB1bnN1YnNjcmliZShzdWJzY3JpYmVyOiAodXNlclRhc2tzOiBVc2VyVGFza1tdLCBwZXJzaXN0ZWRTdGF0ZTogV2Vla1BsYW5uZXJQZXJzaXN0ZWRTdGF0ZSwgd2Vla1RleHRzVVQ6IFVzZXJUYXNrKSA9PiB2b2lkKSB7XG4gICAgdGhpcy5tZW0uc3Vic2NyaWJlcnMgPSB0aGlzLm1lbS5zdWJzY3JpYmVycy5maWx0ZXIgKHMgPT4gc1tcInN1YnNjcmliZXJcIl0gIT09IHN1YnNjcmliZXIpO1xuICB9XG4gIFxufVxuXG5pZiAoIXVzZXJUYXNrc1JlcG8pIHtcbiAgdXNlclRhc2tzUmVwbyA9IGVudi51c2VyVGFza3NSZXBvID0gbmV3IFVzZXJUYXNrc1JlcG8oXG4gICAgKCk9PmVudi5rZWRCYWNrZW5kQ2xpZW50LFxuICAgICgpPT5lbnYuY3VycmVudFVzZXIpO1xuICB1c2VyVGFza3NSZXBvLm1lbS5lbnN1cmVIYXNEYXRhKCk7XG59XG4iLCJpbXBvcnQgeyBLZWRSZXBvIH0gZnJvbSAnLi9rZWQtcmVwbyc7XG5pbXBvcnQgeyBXZWVrTm90ZSB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcbmltcG9ydCBlbnYgZnJvbSAnLi4vZ2xvYmFscy9LRUQuZW52JztcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcbmltcG9ydCB7IGNyZWF0ZVVVSUQsIERvY3VtZW50QWNjZXNzIH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnQnO1xuaW1wb3J0IHsgZ2V0QWRqdXN0ZWRXZWVrLCBLRURXZWVrIH0gZnJvbSAnLi4vdXRpbHMvd2Vla3V0aWwnO1xuXG5leHBvcnQgbGV0IHdlZWtOb3Rlc1JlcG8gPSBlbnYud2Vla05vdGVzUmVwbyBhcyBXZWVrTm90ZXNSZXBvO1xuXG5leHBvcnQgY2xhc3MgV2Vla05vdGVzUmVwbyBleHRlbmRzIEtlZFJlcG88V2Vla05vdGU+IHtcbiAgLypwcml2YXRlIGN1cnJlbnRXZWVrOiBtb21lbnQuTW9tZW50O1xuXG4gIGdldEN1cnJlbnRXZWVrKCkge1xuICAgIGlmICghdGhpcy5jdXJyZW50V2Vlaykge1xuICAgICAgY29uc3Qge3dlZWtNaWxsaXMsIGV4cGlyZX0gPSBKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oXCJ3ZWVrLW5vdGVzLXdlZWtcIikgfHwgXCJ7fVwiKSBhcyB7d2Vla01pbGxpcz86IG51bWJlciwgZXhwaXJlPzogbnVtYmVyfTtcbiAgICAgIHRoaXMuY3VycmVudFdlZWsgPSB3ZWVrTWlsbGlzICYmIGV4cGlyZSAmJiBleHBpcmUgPiBEYXRlLm5vdygpID9cbiAgICAgICAgbW9tZW50KG5ldyBEYXRlKHdlZWtNaWxsaXMpKSA6XG4gICAgICAgIG1vbWVudCgpLnN0YXJ0T2YoJ3dlZWsnKS5hZGQoMSwgJ2RheXMnKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY3VycmVudFdlZWsuY2xvbmUoKTtcbiAgfVxuXG4gIHNldEN1cnJlbnRXZWVrKG5ld1dlZWtNb21lbnQ6IG1vbWVudC5Nb21lbnQpIHtcbiAgICB0aGlzLmN1cnJlbnRXZWVrID0gbmV3V2Vla01vbWVudDtcbiAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFwid2Vlay1ub3Rlcy13ZWVrXCIsIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgIHdlZWtNaWxsaXM6IG5ld1dlZWtNb21lbnQudG9EYXRlKCkuZ2V0VGltZSgpLFxuICAgICAgZXhwaXJlOiBtb21lbnQoKS5hZGQoOCwgXCJob3Vyc1wiKS50b0RhdGUoKS5nZXRUaW1lKClcbiAgICB9KSlcbiAgfSovXG4gIFxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcih7XG4gICAgICBnZXRDbGllbnQoKSB7IHJldHVybiBlbnYua2VkQmFja2VuZENsaWVudDsgfSxcbiAgICAgIG9wdGltaXN0aWM6IGZhbHNlLFxuICAgICAgdGFibGU6IFwibm90ZXNcIiwgLy8gXCJ3ZWVrLW5vdGVzXCJcbiAgICAgIHVzZXI6IGVudi5jdXJyZW50VXNlciA/IGVudi5jdXJyZW50VXNlci5tYWlsIDogXCJcIixcbiAgICAgIGdldFF1ZXJ5T3B0aW9uczogYXN5bmMgKCkgPT4ge1xuICAgICAgICAvL2NvbnN0IHVzZXJFbWFpbCA9IGVudi5jdXJyZW50VXNlciA/IGVudi5jdXJyZW50VXNlci5tYWlsIDogXCJcIjtcbiAgICAgICAgLy9jb25zdCBjdXJyZW50V2VlayA9IHRoaXMuZ2V0Q3VycmVudFdlZWsoKTtcbiAgICAgICAgLy9jb25zdCB3ZWVrTnVtYmVyID0gY3VycmVudFdlZWsud2VlaygpO1xuICAgICAgICAvL2NvbnN0IGtlZFdlZWsgPSBLRURXZWVrKGN1cnJlbnRXZWVrLnllYXIoKSwgd2Vla051bWJlcik7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLy9mcm9tOiBrZWRXZWVrLm5vdEJlZm9yZSxcbiAgICAgICAgICAvL3RvOiBrZWRXZWVrLm5vdEFmdGVyLFxuICAgICAgICAgIHJvbGU6IFwiVVNFUlwiXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSk7XG4gICAgLy90aGlzLmN1cnJlbnRXZWVrID0gbnVsbDtcbiAgfVxuXG4gIC8qYXN5bmMgY2hhbmdlV2Vlayh3ZWVrc1RvQWRkOiBudW1iZXIpIHtcbiAgICB0aGlzLnNldEN1cnJlbnRXZWVrKHRoaXMuZ2V0Q3VycmVudFdlZWsoKS5hZGQod2Vla3NUb0FkZCwgXCJ3ZWVrc1wiKSk7XG4gICAgYXdhaXQgdGhpcy5tZW0ucmVmcmVzaEZyb21TZXJ2ZXIoKTtcbiAgfSovXG59XG5cbmlmICghd2Vla05vdGVzUmVwbykge1xuICB3ZWVrTm90ZXNSZXBvID0gZW52LndlZWtOb3Rlc1JlcG8gPSBuZXcgV2Vla05vdGVzUmVwbygpO1xufVxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xuaW1wb3J0IHsgQ2FsZW5kYXIgfSBmcm9tICcuLi9jb21wb25lbnRzL2NhbGVuZGFyJztcbmltcG9ydCB7IEtTR29hbHMgfSBmcm9tICcuLi9jb21wb25lbnRzL2tzLWdvYWxzL2dvYWxzJztcbmltcG9ydCB7IExhdGVzdEFzc2Vzc21lbnRzIH0gZnJvbSAnLi4vY29tcG9uZW50cy9sYXRlc3QtYXNzZXNzbWVudHMvbGF0ZXN0LWFzc2Vzc21lbnRzJztcbmltcG9ydCB7IEtHVGVybVBsYW5uZXJTZWxmIGFzIEtHVGVybVBsYW5uZXIgfSBmcm9tICcuLi9jb21wb25lbnRzL2tnLXRlcm1wbGFubmVyL2tnLXRlcm1wbGFubmVyLXNlbGYnO1xuaW1wb3J0IHsgS0dUZXJtUGxhbm5lclR1dG9yZWQgfSBmcm9tICcuLi9jb21wb25lbnRzL2tnLXRlcm1wbGFubmVyL2tnLXRlcm1wbGFubmVyLXR1dG9yZWQnO1xuaW1wb3J0IHsgS1NUZXJtUGxhbm5lcn0gZnJvbSAnLi4vY29tcG9uZW50cy9rcy10ZXJtcGxhbm5lci90ZXJtcGxhbm5lcic7XG5pbXBvcnQgeyBLU1Rlcm1QbGFubmVyVHV0b3JlZCB9IGZyb20gJy4uL2NvbXBvbmVudHMva3MtdGVybXBsYW5uZXIva3MtdGVybXBsYW5uZXItdHV0b3JlZCc7XG5pbXBvcnQgZW52IGZyb20gJy4uL2dsb2JhbHMvS0VELmVudic7XG5pbXBvcnQgeyBXZWVrUGxhbm5lciB9IGZyb20gJy4uL2NvbXBvbmVudHMvd2Vla3BsYW5uZXIvd2Vla3BsYW5uZXInO1xuaW1wb3J0IHsgV2Vla1BsYW5uZXJUdXRvcmVkIH0gZnJvbSAnLi4vY29tcG9uZW50cy93ZWVrcGxhbm5lci93ZWVrcGxhbm5lci10dXRvcmVkJztcbmltcG9ydCB7IExlYXJuaW5nVGFza3MgfSBmcm9tICcuLi9jb21wb25lbnRzL2xlYXJuaW5nLXRhc2tzJztcbmltcG9ydCB7IE15Q291cnNlcyB9IGZyb20gJy4uL2NvbXBvbmVudHMvbXktY291cnNlcy9teS1jb3Vyc2VzJztcbmltcG9ydCB7IExpc3RDb3Vyc2VzIH0gZnJvbSAnLi4vY29tcG9uZW50cy9saXN0LWNvdXJzZXMvbGlzdC1jb3Vyc2VzJztcbmltcG9ydCB7IFdlZWtOb3RlYm9vayB9IGZyb20gJy4uL2NvbXBvbmVudHMvd2Vlay1ub3RlYm9vayc7XG5pbXBvcnQgeyBUdXRvcnNTZWxlY3QgfSBmcm9tICcuLi9jb21wb25lbnRzL3R1dG9ycy1zZWxlY3QvdHV0b3JzLXNlbGVjdCc7XG5pbXBvcnQgeyBUdXRvcnNWaWV3VGVzdH0gZnJvbSAnLi4vY29tcG9uZW50cy90dXRvcnMtdmlldyc7XG5cbmV4cG9ydCBjb25zdCBjb21wb25lbnRzID0ge1xuICBMYXRlc3RBc3Nlc3NtZW50czoge1xuICAgIGNvbXBvbmVudDogTGF0ZXN0QXNzZXNzbWVudHMsXG4gICAgcHJvcHM6ICgpID0+ICh7XG4gICAgICBsb2NhbGU6IG5hdmlnYXRvci5sYW5ndWFnZSxcbiAgICAgIGxpbWl0OiAxNVxuICAgIH0pXG4gIH0sXG4gIEtTR29hbHM6IHtcbiAgICBjb21wb25lbnQ6IEtTR29hbHMsXG4gICAgcHJvcHM6ICgpID0+ICh7fSlcbiAgfSxcbiAgS1NUZXJtUGxhbm5lcjoge1xuICAgIGNvbXBvbmVudDogS1NUZXJtUGxhbm5lcixcbiAgICBwcm9wczogKCkgPT4gKHtcbiAgICAgIGVudjogZW52LFxuICAgICAgdHV0b3JlZDogZmFsc2UsXG4gICAgICBpbml0aWFsRGF0ZTpuZXcgRGF0ZSgpLFxuICAgIH0pXG4gIH0sXG4gIEtTVGVybVBsYW5uZXJUdXRvcmVkOiB7XG4gICAgY29tcG9uZW50OiBLU1Rlcm1QbGFubmVyVHV0b3JlZCxcbiAgICBwcm9wczogKCkgPT4gKHt9KVxuICB9LFxuICBLR1Rlcm1QbGFubmVyOiB7XG4gICAgY29tcG9uZW50OiBLR1Rlcm1QbGFubmVyLFxuICAgIHByb3BzOiAoKSA9PiAoe30pXG4gIH0sXG4gIEtHVGVybVBsYW5uZXJUdXRvcmVkOiB7XG4gICAgY29tcG9uZW50OiBLR1Rlcm1QbGFubmVyVHV0b3JlZCxcbiAgICBwcm9wczogKCkgPT4gKHt9KVxuICB9LFxuICBXZWVrUGxhbm5lcjoge1xuICAgIGNvbXBvbmVudDogV2Vla1BsYW5uZXIsXG4gICAgcHJvcHM6ICgpID0+ICh7XG4gICAgICB2aWV3Q291cnNlVXJsOiAnaHR0cDovL3N2dC5zZScsXG4gICAgICBlbnY6IGVudlxuICAgIH0pXG4gIH0sXG4gIFR1dG9yc1ZpZXc6IHtcbiAgICBjb21wb25lbnQ6IFR1dG9yc1ZpZXdUZXN0LFxuICAgIHByb3BzOiAoKT0+KHt9KVxuICB9LFxuICBUdXRvcnNTZWxlY3Q6IHtcbiAgICBjb21wb25lbnQ6IFR1dG9yc1NlbGVjdCxcbiAgICBwcm9wczogKCkgPT4gKHt9KVxuICB9LFxuICBDYWxlbmRhcjoge1xuICAgIGNvbXBvbmVudDogQ2FsZW5kYXIsXG4gICAgcHJvcHM6ICgpID0+ICh7XG4gICAgICBmaXJzdERheTogbW9tZW50KCkuc3RhcnRPZignd2VlaycpLndlZWtkYXkoMSksXG4gICAgICBudW1EYXlzOiA1LFxuICAgICAgaW5pdGlhbFN0YXJ0SG91cjogNyxcbiAgICAgIGluaXRpYWxFbmRIb3VyOiAxOCxcbiAgICAgIGluaXRpYWxab29tOiAwLjc1XG4gICAgfSlcbiAgfSxcbiAgLypDb3Vyc2VPdmVydmlldzoge1xuICAgIGNvbXBvbmVudDogQ291cnNlT3ZlcnZpZXcsXG4gICAgcHJvcHM6ICgpPT4oe1xuICAgICAgbG9jYWxlOiBuYXZpZ2F0b3IubGFuZ3VhZ2UsXG4gICAgfSlcbiAgfSwqL1xuICBMZWFybmluZ1Rhc2tzOiB7XG4gICAgY29tcG9uZW50OiBMZWFybmluZ1Rhc2tzLFxuICAgIHByb3BzOiAoKSA9PiAoe1xuICAgICAgYXBpUGF0aDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3NlbGVjdGVkTGVhcm5pbmdNb2R1bGVVcmwnKSxcbiAgICAgIHBhZ2VJZDogXCJkdW1teVwiXG4gICAgfSlcbiAgfSxcbiAgTXlDb3Vyc2VzOiB7XG4gICAgY29tcG9uZW50OiBNeUNvdXJzZXMsXG4gICAgcHJvcHM6ICgpPT4gKHtcbiAgICAgIHZpZXdDb3Vyc2VVcmw6ICdodHRwczovL2tnLXRlc3Quc2l0ZXZpc2lvbi5zZS9jb3Vyc2V2aWV3ZXInXG4gICAgfSlcbiAgfSxcbiAgTGlzdENvdXJzZXM6IHtcbiAgICBjb21wb25lbnQ6IExpc3RDb3Vyc2VzLFxuICAgIHByb3BzOiAoKSA9PiAoe1xuICAgICAgdmlld0NvdXJzZVVybDogJ2h0dHBzOi8va2ctdGVzdC5zaXRldmlzaW9uLnNlL2NvdXJzZXZpZXdlcidcbiAgICB9KVxuICB9LFxuICBXZWVrTm90ZXM6IHtcbiAgICBjb21wb25lbnQ6IFdlZWtOb3RlYm9vayxcbiAgICBwcm9wczogKCkgPT4gKHt9KVxuICB9XG59O1xuIiwiaW1wb3J0IHsgTGVhcm5pbmdNb2R1bGVUYXNrcyB9IGZyb20gJy4uLy4uL2NvbnRyYWN0cy9rZWQtbW9kZWxzJztcblxuZXhwb3J0IGNvbnN0IGxlYXJuaW5nTW9kdWxlczogTGVhcm5pbmdNb2R1bGVUYXNrc1tdID0gW3tcbiAgICBtb2R1bGVOYW1lOiBcIlN0ZWcgMjJcIixcbiAgICBzdWJqZWN0OiB7XG4gICAgICAgIG5hbWU6IFwiU3BhbnNrYVwiLFxuICAgICAgICBjb3Vyc2U6IHtcbiAgICAgICAgICAgIG5hbWU6IFwiU3BhbnNrYVwiLFxuICAgICAgICAgICAgdXJsOiBcIi9zdGVnL3NwYW5za2EuNC40YWU0ZTlkMjE1OWVmNGUwMTIwYWQ2ZDMuaHRtbFwiXG4gICAgICAgIH1cbiAgICB9LFxuICAgIGNvbW1vblRhc2tzOiBbXSxcbiAgICBsZWFybmluZ0dvYWxzOiBbe1xuICAgICAgICBuYW1lOiBcIkFrdGl2aXRldGVyIGkgaGVtbWV0XCIsXG4gICAgICAgIHRhc2tzOiBbe1xuICAgICAgICAgICAgbmFtZTogXCJBa3Rpdml0ZXRlciBpIGhlbW1ldCBob3MgZW4gcGVydWFuc2sgZmFtaWxqXCIsXG4gICAgICAgICAgICB1cmw6IFwiL3N0ZWcvc3BhbnNrYS9ibG9jazUvc3RlZzIyL3VwcGdpZnRlci9ha3Rpdml0ZXRlcmloZW1tZXQvYWt0aXZpdGV0ZXJpaGVtbWV0aG9zZW5wZXJ1YW5za2ZhbWlsai40LjRhZTRlOWQyMTU5ZWY0ZTAxMjBhZGI0MC5odG1sXCJcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbmFtZTogXCJVcHBnaWZ0IHRpbGwgYWt0aXZpdGV0ZXIgaSBoZW1tZXRcIixcbiAgICAgICAgICAgIHVybDogXCIvc3RlZy9zcGFuc2thL2Jsb2NrNS9zdGVnMjIvdXBwZ2lmdGVyL2FrdGl2aXRldGVyaWhlbW1ldC91cHBnaWZ0dGlsbGFrdGl2aXRldGVyaWhlbW1ldC40LjRhZTRlOWQyMTU5ZWY0ZTAxMjBhZjg4Ny5odG1sXCJcbiAgICAgICAgfV1cbiAgICB9LCB7XG4gICAgICAgIG5hbWU6IFwiRmFtaWxqZWxpdlwiLFxuICAgICAgICB0YXNrczogW3tcbiAgICAgICAgICAgIG5hbWU6IFwiVmFkIHDDpWfDpXIgaSBkaW4gZmFtaWxqIG51P1wiLFxuICAgICAgICAgICAgdXJsOiBcIi9zdGVnL3NwYW5za2EvYmxvY2s1L3N0ZWcyMi91cHBnaWZ0ZXIvZmFtaWxqZWxpdi92YWRwYWdhcmlkaW5mYW1pbGpudS40LjRhZTRlOWQyMTU5ZWY0ZTAxMjBiMjVlOS5odG1sXCJcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbmFtZTogXCJVcHBnaWZ0IGZhbWlsamVsaXZcIixcbiAgICAgICAgICAgIHVybDogXCIvc3RlZy9zcGFuc2thL2Jsb2NrNS9zdGVnMjIvdXBwZ2lmdGVyL2ZhbWlsamVsaXYvdXBwZ2lmdGZhbWlsamVsaXYuNC40YWU0ZTlkMjE1OWVmNGUwMTIwYWY3M2EuaHRtbFwiXG4gICAgICAgIH1dXG4gICAgfSwge1xuICAgICAgICBuYW1lOiBcIlNhbXRhbCBvbSBmYW1pbGplbGl2XCIsXG4gICAgICAgIHRhc2tzOiBbe1xuICAgICAgICAgICAgbmFtZTogXCJTYW10YWxzZG9rdW1lbnQgZmFtaWxqZWxpdlwiLFxuICAgICAgICAgICAgdXJsOiBcIi9zdGVnL3NwYW5za2EvYmxvY2s1L3N0ZWcyMi91cHBnaWZ0ZXIvc2FtdGFsb21mYW1pbGplbGl2L3NhbXRhbHNkb2t1bWVudGZhbWlsamVsaXYuNC40YWU0ZTlkMjE1OWVmNGUwMTIwOWZlMDMuaHRtbFwiXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG5hbWU6IFwiU2FtdGFsc2thcnRhLWZhbWlsamVsaXZcIixcbiAgICAgICAgICAgIHVybDogXCIvc3RlZy9zcGFuc2thL2Jsb2NrNS9zdGVnMjIvdXBwZ2lmdGVyL3NhbXRhbG9tZmFtaWxqZWxpdi9zYW10YWxza2FydGFmYW1pbGplbGl2LjQuNGFlNGU5ZDIxNTllZjRlMDEyMGFmNmZkLmh0bWxcIlxuICAgICAgICB9XVxuICAgIH1cbiAgICBdXG59LCB7XG4gICAgbW9kdWxlTmFtZTogXCJUZWtuaWtcIixcbiAgICBzdWJqZWN0OiB7XG4gICAgICAgIG5hbWU6IFwiVGVrbmlrXCIsXG4gICAgICAgIGNvdXJzZToge1xuICAgICAgICAgICAgbmFtZTogXCJUcsOlZCA1XCIsXG4gICAgICAgICAgICB1cmw6IFwiL2t1cnNlci9hcnNrdXJzOC90cmFkNS4xOS4yZDRmNDAwNTE1OWY4OTU0NzdhMTVjYy5odG1sXCJcbiAgICAgICAgfVxuICAgIH0sXG4gICAgY29tbW9uVGFza3M6IFt7XG4gICAgICAgIG5hbWU6IFwiVHJ5Y2sgXCIsXG4gICAgICAgIHVybDogXCIva3Vyc2VyL2Fyc2t1cnM4L3RyYWQ1L2ZvcmJlcmVkZWxzZS90ZWtuaWsvdXBwZ2lmdGVyL3RyeWNrLjQuNGFlNGU5ZDIxNTllZjRlMDEyMDlkY2RlLmh0bWxcIlxuICAgIH0sIHtcbiAgICAgICAgbmFtZTogXCJEaXNrdXNzaW9uc2Zyw6Vnb3IgdGlsbCBpbmR1c3RyaWVsbGEgcmV2b2x1dGlvbmVuXCIsXG4gICAgICAgIHVybDogXCIva3Vyc2VyL2Fyc2t1cnM4L3RyYWQ1L2ZvcmJlcmVkZWxzZS90ZWtuaWsvdXBwZ2lmdGVyL2Rpc2t1c3Npb25zZnJhZ29ydGlsbGluZHVzdHJpZWxsYXJldm9sdXRpb25lbi40LjRhZTRlOWQyMTU5ZWY0ZTAxMjBhNmZhYi5odG1sXCJcbiAgICB9LCB7XG4gICAgICAgIG5hbWU6IFwiSHVyIGZ1bmdlcmFyIGVuIMOlbmdtYXNraW5cIixcbiAgICAgICAgdXJsOiBcIi9rdXJzZXIvYXJza3VyczgvdHJhZDUvZm9yYmVyZWRlbHNlL3Rla25pay91cHBnaWZ0ZXIvaHVyZnVuZ2VyYXJlbmFuZ21hc2tpbi40LjRhZTRlOWQyMTU5ZWY0ZTAxMjBhMTMwOS5odG1sXCJcbiAgICB9LCB7XG4gICAgICAgIG5hbWU6IFwiw4VuZ21hc2tpbmVucyBiZXR5ZGVsc2VcIixcbiAgICAgICAgdXJsOiBcIi9rdXJzZXIvYXJza3VyczgvdHJhZDUvZm9yYmVyZWRlbHNlL3Rla25pay91cHBnaWZ0ZXIvYW5nbWFza2luZW5zYmV0eWRlbHNlLjQuNGFlNGU5ZDIxNTllZjRlMDEyMGEzZGViLmh0bWxcIlxuICAgIH1dLFxuICAgIGxlYXJuaW5nR29hbHM6IFt7XG4gICAgICAgIG5hbWU6IFwiSWRlbnRpZmllcmEgb2NoIGFuYWx5c2VyYSDDpW5nbWFza2luZW4gdXRpZnLDpW4gw6RuZGFtw6Vsc2VubGlnaGV0IG9jaCBmdW5rdGlvbixcIlxuICAgIH0sIHtcbiAgICAgICAgbmFtZTogXCJhbnbDpG5kYSB0ZWtuaWtvbXLDpWRldHMgYmVncmVwcCBvY2ggdXR0cnlja3Nmb3JtXCJcbiAgICB9LCB7XG4gICAgICAgIG5hbWU6IFwidsOkcmRlcmEga29uc2VrdmVuc2VyIGF2IMOlbmdtYXNraW5lbiBmw7ZyIGluZGl2aWQsIHNhbWjDpGxsZSBvY2ggbWlsasO2LCBvY2hcIlxuICAgIH0sIHtcbiAgICAgICAgbmFtZTogXCJhbmFseXNlcmEgZHJpdmtyYWZ0ZXIgYmFrb20gdGVrbmlrdXR2ZWNrbGluZyBydW50IMOlbmdtYXNraW5lbiBvY2ggaHVyIHRla25pa2VuIGhhciBmw7Zyw6RuZHJhdHPDtnZlciB0aWQuXCJcbiAgICB9XVxufV1cblxuIiwiZXhwb3J0IGNvbnN0IGxlYXJuaW5nUGFnZVVybHMgPSBbXG4gIFwidGVzdGRhdGEvbGVhcm5pbmctdGFza3MvYW1uZXNpbnRlZ3JlcmFkLmpzb25cIixcbiAgXCJ0ZXN0ZGF0YS9sZWFybmluZy10YXNrcy9sb29wYWQuanNvblwiLFxuICBcInRlc3RkYXRhL2xlYXJuaW5nLXRhc2tzL3N0ZWctbGFyYW5kZW1hbC5qc29uXCIsXG4gIFwidGVzdGRhdGEvbGVhcm5pbmctdGFza3Mvc3RlZy1tYXR0ZS5qc29uXCIsXG4gIFwidGVzdGRhdGEvbGVhcm5pbmctdGFza3MvdmFubGlnLWt1cnMuanNvblwiXG5dO1xuIiwiaW1wb3J0IHtVc2VyfSBmcm9tICcuLi8uLi9jb250cmFjdHMva2VkLW1vZGVscyc7XG5cbmV4cG9ydCBjb25zdCB1c2VycyA6IFVzZXJbXSA9IFt7XG4gICAgZGlzcGxheU5hbWU6IFwiQWRtaW5pc3RyYXTDtnJcIixcbiAgICBtYWlsOiBcInZlbWVuZG9Aa2Vkc2Nob29scy5jb21cIixcbiAgICByb2xlczogWydBRE1JTicsJ0VNUExPWUVFJ10sXG4gICAgc2Nob29sOiAnS0VEJyxcbiAgICB1c2VybmFtZTogXCJhZG1pblwiXG59LHtcbiAgICBkaXNwbGF5TmFtZTogXCJEYXZpZFwiLFxuICAgIG1haWw6IFwiZGF2aWQuZmFobGFuZGVyQHZlbWVuZG8uc2VcIixcbiAgICByb2xlczogWydBRE1JTicsJ0VNUExPWUVFJ10sXG4gICAgc2Nob29sOiAnS0VEJyxcbiAgICB1c2VybmFtZTogXCJkYXZpZFwiXG59LFxue1xuICAgIGRpc3BsYXlOYW1lOiBcIkFuZHJlaVwiLFxuICAgIG1haWw6IFwiYW5kcmVpLnNwYXRhcmVsdUB2ZW1lbmRvLnNlXCIsXG4gICAgcm9sZXM6IFsnQURNSU4nLCdFTVBMT1lFRScsJ1NUVURFTlQnXSxcbiAgICBzY2hvb2w6ICdLRUQnLFxuICAgIHVzZXJuYW1lOiBcImFuZHJlaVwiXG59LHtcbiAgICBkaXNwbGF5TmFtZTogXCJDYXJsIEhvbG1iZXJnXCIsXG4gICAgbWFpbDogXCJjYXJsLmhvbG1iZXJnQGt1bnNrYXBzZ3ltbmFzaWV0LnNlXCIsXG4gICAgcm9sZXM6IFsnQURNSU4nLCdFTVBMT1lFRSddLFxuICAgIHNjaG9vbDogJ05vcnJrw7ZwaW5nJyxcbiAgICB1c2VybmFtZTogXCJjYXJsLmhvbG1iZXJnQGt1bnNrYXBzZ3ltbmFzaWV0LnNlXCJcbn0seyBcbiAgICBkaXNwbGF5TmFtZTogXCJDYXJsXCIsXG4gICAgbWFpbDogXCJjYXJsQGtlZHNjaG9vbHMuY29tXCIsXG4gICAgcm9sZXM6IFsnQURNSU4nLCdFTVBMT1lFRScsJ1NUVURFTlQnXSxcbiAgICBzY2hvb2w6ICdLRUQnLFxuICAgIHVzZXJuYW1lOiBcImNhcmxcIlxufSx7XG4gICAgZGlzcGxheU5hbWU6IFwiVGVzdC1MaXZlLUVsZXYxXCIsXG4gICAgbWFpbDogXCJ1Ync2NzU3QGVkdS5rdW5za2Fwc2d5bW5hc2lldC5zZVwiLFxuICAgIHJvbGVzOiBbJ1NUVURFTlQnXSxcbiAgICBzY2hvb2w6ICdVcHBzYWxhJyxcbiAgICB1c2VybmFtZTogXCJ1Ync2NzU3QGVkdS5rdW5za2Fwc2d5bW5hc2lldC5zZVwiXG59LHtcbiAgICBkaXNwbGF5TmFtZTogXCJUZXN0LUxpdmUtRWxldjJcIixcbiAgICBtYWlsOiBcInVtczQzMDJAZWR1Lmt1bnNrYXBzZ3ltbmFzaWV0LnNlXCIsXG4gICAgcm9sZXM6IFsnU1RVREVOVCddLFxuICAgIHNjaG9vbDogJ1VwcHNhbGEnLFxuICAgIHVzZXJuYW1lOiBcInVtczQzMDJAZWR1Lmt1bnNrYXBzZ3ltbmFzaWV0LnNlXCJcbn0se1xuICAgIGRpc3BsYXlOYW1lOiBcIlRlc3QtTGl2ZS1FbGV2M1wiLFxuICAgIG1haWw6IFwidWhoMzQ2MEBlZHUua3Vuc2thcHNneW1uYXNpZXQuc2VcIixcbiAgICByb2xlczogWydTVFVERU5UJ10sXG4gICAgc2Nob29sOiAnVXBwc2FsYScsXG4gICAgdXNlcm5hbWU6IFwidWhoMzQ2MEBlZHUua3Vuc2thcHNneW1uYXNpZXQuc2VcIlxufSx7XG4gICAgZGlzcGxheU5hbWU6IFwiVGVzdC1MaXZlLUVsZXY0KGZlbCBnb2FscyBpc3N1ZSlcIixcbiAgICBtYWlsOiBcInVtdDY4MjZAZWR1Lmt1bnNrYXBzc2tvbGFuLnNlXCIsXG4gICAgcm9sZXM6IFtcIlNUVURFTlRcIl0sXG4gICAgc2Nob29sOiBcIlVwcHNhbGFcIixcbiAgICB1c2VybmFtZTogXCJ1bXQ2ODI2QGVkdS5rdW5za2Fwc3Nrb2xhbi5zZVwiXG59LHtcbiAgICBkaXNwbGF5TmFtZTogXCJUZXN0LUxpdmUtRWxldjUoZnV0dXJlIGFiaWxpdGllcylcIixcbiAgICBtYWlsOiBcInVqZzM4MzNAZWR1Lmt1bnNrYXBzc2tvbGFuLnNlXCIsXG4gICAgcm9sZXM6IFtcIlNUVURFTlRcIl0sXG4gICAgc2Nob29sOiBcIlVwcHNhbGFcIixcbiAgICB1c2VybmFtZTogXCJ1amczODMzQGVkdS5rdW5za2Fwc3Nrb2xhbi5zZVwiXG59LHtcbiAgICBkaXNwbGF5TmFtZTogXCJUZXN0LUxpdmUtRWxldjYoZnV0dXJlIGFiaWxpdGllcylcIixcbiAgICBtYWlsOiBcInVqdDEzNjNAZWR1Lmt1bnNrYXBzc2tvbGFuLnNlXCIsXG4gICAgcm9sZXM6IFtcIlNUVURFTlRcIl0sXG4gICAgc2Nob29sOiBcIlVwcHNhbGFcIixcbiAgICB1c2VybmFtZTogXCJ1anQxMzYzQGVkdS5rdW5za2Fwc3Nrb2xhbi5zZVwiXG59LHtcbiAgICBkaXNwbGF5TmFtZTogXCJUZXN0LUxpdmUtTMOkcmFyZTFcIixcbiAgICBtYWlsOiBcInJpY2thcmQuYWxiZXJ0c3NvbkBrdW5za2Fwc2d5bW5hc2lldC5zZVwiLFxuICAgIHJvbGVzOiBbJ0VNUExPWUVFJ10sXG4gICAgc2Nob29sOiAnVXBwc2FsYScsXG4gICAgdXNlcm5hbWU6IFwicmlja2FyZC5hbGJlcnRzc29uQGt1bnNrYXBzZ3ltbmFzaWV0LnNlXCJcbn0se1xuICAgIGRpc3BsYXlOYW1lOiBcIkVEU1Rlc3RVc2VyR3ltbmFzaXVtXCIsXG4gICAgbWFpbDogXCJ1aGgzMjAwQGVkdS5rdW5za2Fwc2d5bW5hc2lldC5zZVwiLFxuICAgIC8vbWFpbDogXCJVSEgzMjAwQEVEVS5LVU5TS0FQU0dZTU5BU0lFVC5TRVwiLFxuICAgIHJvbGVzOiBbXCJTVFVERU5UXCJdLFxuICAgIHVzZXJuYW1lOiBcIkVEU1Rlc3RVc2VyMVwiLFxuICAgIHNjaG9vbDogXCJLRURcIixcbiAgICBzY2hvb2xUeXBlOiBcIkd5bW5hc2l1bVwiXG59LHtcbiAgICBkaXNwbGF5TmFtZTogXCJ2ZW1lbmRvLmVsZXZAa2Vkc2Nob29scy5jb21cIixcbiAgICBtYWlsOiBcInZlbWVuZG8uZWxldkBrZWRzY2hvb2xzLmNvbVwiLFxuICAgIHJvbGVzOiBbXCJTVFVERU5UXCJdLFxuICAgIHVzZXJuYW1lOiBcInZlbWVuZG8uZWxldkBrZWRzY2hvb2xzLmNvbVwiLFxuICAgIHNjaG9vbDogXCJLRURcIixcbiAgICBzY2hvb2xUeXBlOiBcIkd5bW5hc2l1bVwiXG59LHtcbiAgICBkaXNwbGF5TmFtZTogXCJNZWRhcmJldGFyZSBOYWNrYVwiLFxuICAgIG1haWw6IFwibWVkYXJiZXRhcmUubmFja2FAa3Vuc2thcHNza29sYW4uc2VcIixcbiAgICByb2xlczogW1wiRU1QTE9ZRUVcIl0sXG4gICAgdXNlcm5hbWU6IFwibWVkYXJiZXRhcmUubmFja2EvS1NcIixcbiAgICBzY2hvb2w6IFwiTmFja2FcIixcbiAgICBzY2hvb2xUeXBlOiBcIkdydW5kc2tvbG9yXCJcbn0se1xuICAgIGRpc3BsYXlOYW1lOiBcIk1lZGFyYmV0YXJlIEdsb2JlblwiLFxuICAgIG1haWw6IFwibWVkYXJiZXRhcmUuZ2xvYmVuQGt1bnNrYXBzZ3ltbmFzaWV0LnNlXCIsXG4gICAgcm9sZXM6IFtcIkVNUExPWUVFXCJdLFxuICAgIHVzZXJuYW1lOiBcIm1lZGFyYmV0YXJlLmdsb2Jlbi9LU1wiLFxuICAgIHNjaG9vbDogXCJHbG9iZW5cIixcbiAgICBzY2hvb2xUeXBlOiBcIkd5bW5hc2l1bVwiXG59LHtcbiAgICBkaXNwbGF5TmFtZTogXCJFbGV2IEdsb2JlblwiLFxuICAgIG1haWw6IFwiZWxldi5nbG9iZW5AZWR1Lmt1bnNrYXBzZ3ltbmFzaWV0LnNlXCIsXG4gICAgc2Nob29sR3JhZGU6IDIsXG4gICAgcm9sZXM6IFsnU1RVREVOVCddLFxuICAgIHVzZXJuYW1lOiBcImVsZXYuZ2xvYmVuXCIsXG4gICAgc2Nob29sOiBcIkdsb2JlblwiLFxuICAgIHNjaG9vbFR5cGU6IFwiR3ltbmFzaXVtXCJcbn0se1xuICAgIGRpc3BsYXlOYW1lOiBcIkVsZXYgQm9yw6VzXCIsXG4gICAgbWFpbDogXCJlbGV2LmJvcmFzQGVkdS5rdW5za2Fwc3Nrb2xhbi5zZVwiLFxuICAgIHNjaG9vbEdyYWRlOiA3LFxuICAgIHJvbGVzOiBbJ1NUVURFTlQnXSxcbiAgICB1c2VybmFtZTogXCJlbGV2LmJvcmFzXCIsXG4gICAgc2Nob29sOiBcIkJvcsOlc1wiLFxuICAgIHNjaG9vbFR5cGU6IFwiR3J1bmRza29sb3JcIlxufSx7XG4gICAgZGlzcGxheU5hbWU6IFwiRWxldiBCb3Jsw6RuZ2VcIixcbiAgICBtYWlsOiBcImVsZXYuYm9ybGFuZ2VAZWR1Lmt1bnNrYXBzc2tvbGFuLnNlXCIsXG4gICAgc2Nob29sR3JhZGU6IDksXG4gICAgcm9sZXM6IFsnU1RVREVOVCddLFxuICAgIHVzZXJuYW1lOiAnZWxldi5ib3JsYW5nZS9LUycsXG4gICAgc2Nob29sOiAnQm9ybMOkbmdlJyxcbiAgICBzY2hvb2xUeXBlOiBcIkd5bW5hc2l1bVwiXG59LHtcbiAgICBkaXNwbGF5TmFtZTogXCJSb2xsLWzDtnNcIixcbiAgICBtYWlsOiBcIm5vbmVAa3Vuc2thcHNza29sYW4uc2VcIixcbiAgICB1c2VybmFtZTogXCJub25lXCIsXG4gICAgcm9sZXM6IFtdXG59XTtcblxuIiwiaW1wb3J0IGVudiBmcm9tICcuLi9nbG9iYWxzL0tFRC5lbnYnO1xuaW1wb3J0IHsgdXNlcnMgfSBmcm9tICcuL2RhdGEvdXNlcnMnO1xuaW1wb3J0IHsgcGFyc2VRdWVyeVN0cmluZyB9IGZyb20gJy4uL3V0aWxzL3F1ZXJ5LXN0cmluZyc7XG5cbmNvbnN0IHVzZXJuYW1lID0gcGFyc2VRdWVyeVN0cmluZyAobG9jYXRpb24uc2VhcmNoKS51c2VyO1xuaWYgKHVzZXJuYW1lKSB7XG4gIGNvbnN0IHVzZXIgPSB1c2Vycy5maW5kKHUgPT4gdS51c2VybmFtZSA9PT0gdXNlcm5hbWUpO1xuICBpZiAodXNlcikge1xuICAgIGVudi5jdXJyZW50VXNlciA9IHVzZXI7XG4gIH1cbn1cblxuY29uc3QgeyByb2xlLCBzY2hvb2wgfSA9IHBhcnNlUXVlcnlTdHJpbmcobG9jYXRpb24uc2VhcmNoKTtcbmlmIChlbnYuY3VycmVudFVzZXIpIHtcbiAgaWYgKHJvbGUpIHtcbiAgICBlbnYuY3VycmVudFVzZXIucm9sZXMgPSByb2xlLnNwbGl0KCcsJyk7XG4gIH1cbiAgaWYgKHNjaG9vbCkge1xuICAgIGVudi5jdXJyZW50VXNlci5zY2hvb2wgPSBzY2hvb2w7XG4gIH1cbn1cbiIsImltcG9ydCBjZmcgZnJvbSAnLi4vZ2xvYmFscy9LRUQuY2ZnJztcblxuY2ZnLktFRF9MT0NBTEUgPSAnc3YnO1xuY2ZnLktFRF9TQ0hPT0xfTE9DQUxFID0gJ3N2JztcbiIsIi8vIDxJbml0aWFsaXphdGlvbj5cbmltcG9ydCAnLi90ZXN0LWNvbmZpZyc7XG5pbXBvcnQgJy4vc2V0LWN1cnJlbnQtdXNlcic7IC8vIEVtdWxhdGUgc2VydmVyLXNpZGUgc2NyaXB0IHRvIHNldCBjdXJyZW50IHVzZXJcbmltcG9ydCAnLi4vZ2xvYmFsLXNldHRlcnMvc2V0LWFsbCc7IC8vIENsaWVudC1zaWRlIGluaXRpYWxpemF0aW9uXG4vLyA8L0luaXRpYWxpemF0aW9uPlxuXG5pbXBvcnQgZW52IGZyb20gJy4uL2dsb2JhbHMvS0VELmVudic7XG5pbXBvcnQgY2ZnIGZyb20gJy4uL2dsb2JhbHMvS0VELmNmZyc7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgKiBhcyBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IHsgVXNlciB9IGZyb20gJy4uL2NvbnRyYWN0cy9rZWQtbW9kZWxzJztcbmltcG9ydCB7IGxlYXJuaW5nTW9kdWxlcyB9IGZyb20gJy4vZGF0YS9sZWFybmluZ01vZHVsZXMnO1xuaW1wb3J0IHsgbGVhcm5pbmdQYWdlVXJscyB9IGZyb20gJy4vZGF0YS9sZWFybmluZ01vZHVsZXMyJztcbmltcG9ydCB7IHVzZXJzIH0gZnJvbSAnLi9kYXRhL3VzZXJzJztcbmltcG9ydCB7IFdlZWtQbGFubmVyIH0gZnJvbSAnLi4vY29tcG9uZW50cy93ZWVrcGxhbm5lcic7XG5pbXBvcnQgeyBjb21wb25lbnRzIH0gZnJvbSAnLi9jb21wb25lbnRzJztcbmltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XG5pbXBvcnQge0tlZEJhY2tlbmRDbGllbnRXZWJUZXN0fSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudHdlYnRlc3QnO1xuaW1wb3J0IHsgQ2hvb3NlVXNlciB9IGZyb20gJy4vdXRpbHMvY2hvb3NlLXVzZXInO1xuaW1wb3J0IHsgRm9ybWF0dGVkTWVzc2FnZSwgaW5qZWN0SW50bCwgSW5qZWN0ZWRJbnRsUHJvcHMgfSBmcm9tICdyZWFjdC1pbnRsJztcbmltcG9ydCB7IHNldHVwSW50bCB9IGZyb20gXCIuLi9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy9TZXR1cExhbmd1YWdlSW50bFwiO1xuaW1wb3J0IHtMYW5ndWFnZUNvbnRleHR9IGZyb20gJy4uL2NvbXBvbmVudHMvdXRpbGl0eS1jb21wb25lbnRzL0xhbmd1YWdlQ29udGV4dCc7XG5cbmludGVyZmFjZSBTdGF0ZSB7XG4gIHNlbGVjdGVkQ29tcG9uZW50OiBzdHJpbmcsXG4gIHNlbGVjdGVkTGVhcm5pbmdNb2R1bGU6IG51bWJlcixcbiAgc2VsZWN0ZWRMZWFybmluZ01vZHVsZVVybDogc3RyaW5nLFxuICBzZWxlY3RlZENvbXBvbmVudFJlYWw6IFJlYWN0LlJlYWN0VHlwZSxcbiAgc2VsZWN0ZWRDb21wUHJvcHM6IGFueVxufVxuXG5jbGFzcyBfVGVzdFBhZ2UgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8SW5qZWN0ZWRJbnRsUHJvcHMsIFN0YXRlPiB7XG4gIGNvbXBvbmVudEFyZWE6IEhUTUxFbGVtZW50O1xuICBtZXNzYWdlcyA6IG9iamVjdDtcblxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcblxuICAgIGNvbnN0IHNlbGVjdGVkQ29tcCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwic2VsZWN0ZWRDb21wb25lbnRcIikgfHwgT2JqZWN0LmtleXMoY29tcG9uZW50cylbMF07XG4gICAgdmFyIHNlbGVjdENvbXBQcm9wcyA9IGNvbXBvbmVudHNbc2VsZWN0ZWRDb21wXS5wcm9wcygpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBzZWxlY3RlZENvbXBvbmVudDogc2VsZWN0ZWRDb21wLFxuICAgICAgc2VsZWN0ZWRMZWFybmluZ01vZHVsZTogcGFyc2VJbnQobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJzZWxlY3RlZExlYXJuaW5nTW9kdWxlXCIpIHx8IFwiMFwiKSxcbiAgICAgIHNlbGVjdGVkTGVhcm5pbmdNb2R1bGVVcmw6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwic2VsZWN0ZWRMZWFybmluZ01vZHVsZVVybFwiKSB8fCBcIlwiLFxuICAgICAgc2VsZWN0ZWRDb21wb25lbnRSZWFsOiBjb21wb25lbnRzW3NlbGVjdGVkQ29tcF0uY29tcG9uZW50LFxuICAgICAgc2VsZWN0ZWRDb21wUHJvcHMgOiB7Li4uc2VsZWN0Q29tcFByb3BzfVxuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcbiAgICB0aGlzLnJlbmRlclRlc3RDb21wb25lbnQoKTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIC8vdGhpcy5yZW5kZXJUZXN0Q29tcG9uZW50KCk7XG4gIH1cblxuICByZW5kZXJUZXN0Q29tcG9uZW50KCkge1xuICAgIGVudi5sZWFybmluZ01vZHVsZVRhc2tzID0gbGVhcm5pbmdNb2R1bGVzW3RoaXMuc3RhdGUuc2VsZWN0ZWRMZWFybmluZ01vZHVsZV07XG4gICAgJCh0aGlzLmNvbXBvbmVudEFyZWEpLmh0bWwoXCJcIik7XG5cbiAgICBpZiAoZW52LmN1cnJlbnRVc2VyKSB7XG4gICAgICBjb25zdCBzZWxlY3RlZCA9IGNvbXBvbmVudHNbdGhpcy5zdGF0ZS5zZWxlY3RlZENvbXBvbmVudF0gfHxcbiAgICAgICAgY29tcG9uZW50c1tPYmplY3Qua2V5cyhjb21wb25lbnRzKVswXV07XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgc2VsZWN0ZWRDb21wb25lbnRSZWFsOiBzZWxlY3RlZC5jb21wb25lbnQsXG4gICAgICAgIHNlbGVjdGVkQ29tcFByb3BzIDogey4uLnNlbGVjdGVkLnByb3BzKCl9XG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCBTZWxlY3RlZENvbXBvbmVudCA9IHRoaXMuc3RhdGUuc2VsZWN0ZWRDb21wb25lbnRSZWFsIGFzIFJlYWN0LlJlYWN0VHlwZTtcbiAgICBjb25zdCB7aW50bH0gPSB0aGlzLnByb3BzO1xuICAgIHJldHVybiBlbnYuY3VycmVudFVzZXIgPyBcbiAgICA8TGFuZ3VhZ2VDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXt7aW50bH19PlxuICAgIDxkaXYgY2xhc3NOYW1lPVwidGVzdC1wYWdlXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImhlYWRlclwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRlc3Qtc2VsZWN0c1wiPlxuICAgICAgICAgIDxmb3JtPlxuICAgICAgICAgICAgPGg0PlxuICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZSBpZD1cInRlc3QucGFnZURlc2NyaXB0aW9uXCIgZGVmYXVsdE1lc3NhZ2U9XCJUZXN0c2lkYSBmw7ZyIGtvbXBvbmVudGVyIHRpbGwgbnlhIHN0YXJ0c2lkYW5cIi8+IFxuICAgICAgICAgICAgPC9oND5cbiAgICAgICAgICAgIDx0YWJsZT48dGJvZHk+PHRyPlxuICAgICAgICAgICAgPHRkPlxuICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cInRlc3RDb21wb25lbnRcIj5cbiAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZSBpZD1cInRlc3QuY2hvb3NlQ29tcG9uZW50TGFiZWxcIiBkZWZhdWx0TWVzc2FnZT1cIktvbXBvbmVudFwiLz5cbiAgICAgICAgICAgICAgPC9sYWJlbD48L3RkPlxuICAgICAgICAgICAgPHRkPjxzZWxlY3QgaWQ9XCJ0ZXN0Q29tcG9uZW50XCIgdmFsdWU9e3RoaXMuc3RhdGUuc2VsZWN0ZWRDb21wb25lbnR9IG9uQ2hhbmdlPXtldiA9PiB7XG4gICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBzZWxlY3RlZENvbXBvbmVudDogZXYudGFyZ2V0LnZhbHVlIH0pO1xuICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInNlbGVjdGVkQ29tcG9uZW50XCIsIGV2LnRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgIH19PlxuICAgICAgICAgICAgICB7T2JqZWN0LmtleXMoY29tcG9uZW50cykubWFwKGMgPT4gPG9wdGlvbiBrZXk9e2N9IHZhbHVlPXtjfT57Y308L29wdGlvbj4pfVxuICAgICAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgICAgICA8L3RkPjwvdHI+XG5cbiAgICAgICAgICAgIHt0aGlzLnN0YXRlLnNlbGVjdGVkQ29tcG9uZW50ID09PSAnTGVhcm5pbmdHb2Fsc0FuZFRhc2tzJyAmJiA8dHI+PHRkPjxsYWJlbCBodG1sRm9yPVwidGVzdExlYXJuaW5nTW9kdWxlXCI+S3Vyc21vZHVsPC9sYWJlbD48L3RkPlxuICAgICAgICAgICAgPHRkPjxzZWxlY3QgaWQ9XCJ0ZXN0TGVhcm5pbmdNb2R1bGVcIiB2YWx1ZT17dGhpcy5zdGF0ZS5zZWxlY3RlZExlYXJuaW5nTW9kdWxlfSBvbkNoYW5nZT17XG4gICAgICAgICAgICAgIGV2ID0+IHtcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInNlbGVjdGVkTGVhcm5pbmdNb2R1bGVcIiwgZXYudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0+XG4gICAgICAgICAgICAgIHtsZWFybmluZ01vZHVsZXMubWFwKChsbSwgaSkgPT5cbiAgICAgICAgICAgICAgICA8b3B0aW9uIGtleT17aX0gdmFsdWU9e2l9PntcbiAgICAgICAgICAgICAgICAgIGxtLnN1YmplY3QuY291cnNlLm5hbWUgKyBcIi9cIiArXG4gICAgICAgICAgICAgICAgICBsbS5zdWJqZWN0Lm5hbWUgKyBcIi9cIiArXG4gICAgICAgICAgICAgICAgICBsbS5tb2R1bGVOYW1lfTwvb3B0aW9uPilcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgPC9zZWxlY3Q+PC90ZD48L3RyPn1cbiAgICAgICAgICAgIHt0aGlzLnN0YXRlLnNlbGVjdGVkQ29tcG9uZW50ID09PSAnTGVhcm5pbmdUYXNrcycgJiYgPHRyPjx0ZD48bGFiZWwgaHRtbEZvcj1cInRlc3RMZWFybmluZ01vZHVsZVVybFwiPkt1cnNtb2R1bDwvbGFiZWw+PC90ZD5cbiAgICAgICAgICAgIDx0ZD48c2VsZWN0IGlkPVwidGVzdExlYXJuaW5nTW9kdWxlVXJsXCIgdmFsdWU9e3RoaXMuc3RhdGUuc2VsZWN0ZWRMZWFybmluZ01vZHVsZVVybH0gb25DaGFuZ2U9e1xuICAgICAgICAgICAgICBldiA9PiB7XG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJzZWxlY3RlZExlYXJuaW5nTW9kdWxlVXJsXCIsIGV2LnRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9PlxuICAgICAgICAgICAgICB7bGVhcm5pbmdQYWdlVXJscy5tYXAoKHVybCwgaSkgPT5cbiAgICAgICAgICAgICAgICA8b3B0aW9uIGtleT17aX0gdmFsdWU9e3VybH0+e3VybH08L29wdGlvbj4pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDwvc2VsZWN0PjwvdGQ+PC90cj59XG4gICAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICAgICAgPC90YWJsZT5cbiAgICAgICAgICA8L2Zvcm0+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8aHIgLz5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29tcG9uZW50Um93XCI+XG4gICAgICAgIDxTZWxlY3RlZENvbXBvbmVudCB7Li4udGhpcy5zdGF0ZS5zZWxlY3RlZENvbXBQcm9wc30gLz5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb21wb25lbnRBcmVhXCIgcmVmPXtkaXYgPT4gdGhpcy5jb21wb25lbnRBcmVhID0gZGl2fT5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwid2Vlay1wbGFubmVyXCI+XG4gICAgICAgICAge3RoaXMuc3RhdGUuc2VsZWN0ZWRDb21wb25lbnQgPT09ICdMZWFybmluZ1Rhc2tzJyAmJlxuICAgICAgICAgICAgPFdlZWtQbGFubmVyIHZpZXdDb3Vyc2VVcmw9XCJodHRwOi8vd3d3LnN2dC5zZS9ueWhldGVyXCIgZW52PXtlbnZ9Lz5cbiAgICAgICAgICB9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgPC9MYW5ndWFnZUNvbnRleHQuUHJvdmlkZXI+IDogPENob29zZVVzZXIgLz5cbiAgfVxufVxuXG5jb25zdCBUZXN0UGFnZSA9IHNldHVwSW50bChpbmplY3RJbnRsKF9UZXN0UGFnZSkpO1xuZXhwb3J0IGRlZmF1bHQgVGVzdFBhZ2U7IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlcnMgfSBmcm9tICcuLi9kYXRhL3VzZXJzJztcblxuZXhwb3J0IGZ1bmN0aW9uIENob29zZVVzZXIoKSB7XG4gIGxldCBzZWxlY3Q7XG4gIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cInN2LWxheW91dFwiPlxuICAgIDxoMj5Ww6RsaiBhbnbDpG5kYXJlPC9oMj5cbiAgICA8dGFibGUgY2xhc3NOYW1lPVwibG9naW4tdGFibGVcIj48dGhlYWQ+PHRyPlxuICAgICAgPHRoPk5hbW48L3RoPlxuICAgICAgPHRoPlJvbGxlcjwvdGg+XG4gICAgICA8dGg+RS1wb3N0PC90aD5cbiAgICAgIDx0aD5Ta29sYTwvdGg+XG4gICAgPC90cj48L3RoZWFkPlxuICAgICAgPHRib2R5PlxuICAgICAgICB7dXNlcnMubWFwKCh7IHVzZXJuYW1lLCBkaXNwbGF5TmFtZSwgbWFpbCwgc2Nob29sLCByb2xlcyB9KSA9PlxuICAgICAgICAgIDx0ciBrZXk9e21haWx9IG9uQ2xpY2s9eygpID0+IGxvY2F0aW9uLnNlYXJjaCA9IGA/dXNlcj0ke3VzZXJuYW1lfWB9PlxuICAgICAgICAgICAgPHRkPntkaXNwbGF5TmFtZX08L3RkPlxuICAgICAgICAgICAgPHRkIHN0eWxlPXtyb2xlcy5sZW5ndGggPT09IDAgPyB7IGZvbnRTdHlsZTogJ2l0YWxpYycgfSA6IHt9fT57cm9sZXMubGVuZ3RoID09PSAwID8gXCJzYWtuYXIgcm9sbGVyXCIgOiByb2xlcy5qb2luKCcsICcpfTwvdGQ+XG4gICAgICAgICAgICA8dGQ+e21haWx9PC90ZD5cbiAgICAgICAgICAgIDx0ZCBzdHlsZT17c2Nob29sID8ge30gOiB7IGZvbnRTdHlsZTogJ2l0YWxpYycgfX0+e3NjaG9vbCB8fCBcInNha25hciBza29sYVwifTwvdGQ+XG4gICAgICAgICAgPC90cj5cbiAgICAgICAgKX1cbiAgICAgIDwvdGJvZHk+PC90YWJsZT5cbiAgPC9kaXY+XG59O1xuIiwiXG5leHBvcnQgY29uc3QgU0VDT05EID0gMTAwMDtcbmV4cG9ydCBjb25zdCBNSU5VVEUgPSBTRUNPTkQgKiA2MDtcbmV4cG9ydCBjb25zdCBIT1VSID0gTUlOVVRFICogNjA7XG5cbiIsImltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcbmltcG9ydCB7IEFjYWRlbWljWWVhclN0cnVjdHVyZSwgVGVybSB9IGZyb20gJy4uL2NvbnRyYWN0cy9rZWQtbW9kZWxzJztcbmltcG9ydCB7IE1vY2tFRFNBY2FkZW1pY1llYXIgfSBmcm9tICcuLi9jb250cmFjdHMvZWRzJztcbmltcG9ydCB7IEdlbmVyaWNTY2hvb2xNb21lbnQsIGdldEN1cnJlbnRBY2FkZW1pY1llYXIgfSBmcm9tICcuL2dlbmVyaWMtc2Nob29sLXV0aWxzJztcbmltcG9ydCB7IEluamVjdGVkSW50bCB9IGZyb20gJ3JlYWN0LWludGwnO1xuaW1wb3J0IHsgTEFTVF9TVEVQX1NQUklORywgTEFTVF9TVEVQX0FVVFVNTiB9IGZyb20gJy4uL2NvbXBvbmVudHMva3MtdGVybXBsYW5uZXIvdGVybXBsYW5uZXItdXRpbHMnO1xuXG5leHBvcnQgY2xhc3MgR2VuZXJpY1NjaG9vbFRlcm0ge1xuICBzY2hvb2xNb21lbnQ6IEdlbmVyaWNTY2hvb2xNb21lbnQ7XG4gIHNlbGVjdGVkRGF0ZTogRGF0ZTtcbiAgbG9jYWxlOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoY3VycmVudERhdGU6IERhdGUsIGN1cnJlbnRMb2NhbGU/OiBzdHJpbmcsIGFjYWRlbWljWWVhclN0cnVjdHVyZT86IE1vY2tFRFNBY2FkZW1pY1llYXIpIHtcbiAgICB0aGlzLmxvY2FsZSA9IGN1cnJlbnRMb2NhbGUgfHwgXCJzdlwiO1xuICAgIHRoaXMuc2VsZWN0ZWREYXRlID0gY3VycmVudERhdGU7XG4gICAgdGhpcy5zY2hvb2xNb21lbnQgPSBhY2FkZW1pY1llYXJTdHJ1Y3R1cmUgPyBnZXRDdXJyZW50QWNhZGVtaWNZZWFyKG1vbWVudChjdXJyZW50RGF0ZSksIGFjYWRlbWljWWVhclN0cnVjdHVyZSkgOiBudWxsO1xuICB9XG5cbiAgZ2V0VGVybVN0YXJ0QW5kRW5kKGluY2x1ZGVFeHRyYVdlZWs/OiBib29sZWFuKTogbW9tZW50Lk1vbWVudFtdIHtcbiAgICAvL0luIGNhc2UgdGhhdCB0aGUgd2VlayBzdGFydCBkYXRlIGlzIGEgZGF0ZSBmcm9tIHRoZSBwcmV2aW91cyB5ZWFyXG4gICAgLy9Db25zaWRlciB0aGUgc3RhcnQgb2YgdGhlIHdlZWsgKCBzdGFydCBkYXRlKSBhcyB0aGUgZGF5IG9mIHRoZSAwMS4wMS55ZWFyXG4gICAgdmFyIHN0YXJ0T2ZUZXJtV2VlayA9IHRoaXMuc2Nob29sTW9tZW50LmFjYWRlbWljWWVhclN0cnVjdHVyZS5zdGFydERhdGUuY2xvbmUoKS5zdGFydE9mKCd3ZWVrJyk7XG5cbiAgICBpZiAoc3RhcnRPZlRlcm1XZWVrLnllYXIoKSA8IHRoaXMuc2Nob29sTW9tZW50LmFjYWRlbWljWWVhclN0cnVjdHVyZS5zdGFydERhdGUueWVhcigpKSB7XG4gICAgICBzdGFydE9mVGVybVdlZWsgPSB0aGlzLnNjaG9vbE1vbWVudC5hY2FkZW1pY1llYXJTdHJ1Y3R1cmUuc3RhcnREYXRlO1xuICAgIH1cblxuICAgIHZhciBlbmRPZlRlcm1XZWVrID0gdGhpcy5zY2hvb2xNb21lbnQuYWNhZGVtaWNZZWFyU3RydWN0dXJlLmVuZERhdGU7XG5cbiAgICBpZih0aGlzLmxvY2FsZSA9PT0gXCJzdlwiICYmIGluY2x1ZGVFeHRyYVdlZWsgJiYgdGhpcy5zY2hvb2xNb21lbnQudGVybSA9PT0gXCJTVFwiKXtcbiAgICAgIGVuZE9mVGVybVdlZWsgPSBlbmRPZlRlcm1XZWVrLmNsb25lKCkuYWRkKDMsICd3ZWVrcycpLmVuZE9mKCd3ZWVrJyk7XG4gICAgfVxuICAgIGVsc2UgaWYoaW5jbHVkZUV4dHJhV2Vlayl7XG4gICAgICBpZih0aGlzLmxvY2FsZSAhPSBcInN2XCIpe1xuICAgICAgICAvLyBmb3IgaW5kaWEgdGhlIGVuZCBkYXRlIGNhbiBiZSBpbiB0aGUgbWlkZGxlIG9mIHRoZSB3ZWVrXG4gICAgICAgIGVuZE9mVGVybVdlZWs9IHRoaXMuc2Nob29sTW9tZW50LmFjYWRlbWljWWVhclN0cnVjdHVyZS5lbmREYXRlLmNsb25lKCk7XG4gICAgICB9XG4gICAgICBlbmRPZlRlcm1XZWVrID0gIHRoaXMuc2Nob29sTW9tZW50LmFjYWRlbWljWWVhclN0cnVjdHVyZS5lbmREYXRlLmNsb25lKCkuYWRkKDEsICd3ZWVrJykuZW5kT2YoJ3dlZWsnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gW3N0YXJ0T2ZUZXJtV2VlaywgZW5kT2ZUZXJtV2Vla107XG4gIH1cblxuICBnZXRGaXJzdEFuZExhc3RXZWVrT2ZUZXJtKCkge1xuICAgIHJldHVybiBbdGhpcy5zY2hvb2xNb21lbnQuYWNhZGVtaWNZZWFyU3RydWN0dXJlLnN0YXJ0RGF0ZS53ZWVrKCksIHRoaXMuc2Nob29sTW9tZW50LmFjYWRlbWljWWVhclN0cnVjdHVyZS5lbmREYXRlLndlZWsoKV07XG4gIH1cblxuICBpc0N1cnJlbnRXZWVrKGRhdGVUaW1lOiBudW1iZXIpIDogYm9vbGVhbiB7XG4gICAgdmFyIHRlcm1EYXRlID0gbW9tZW50KGRhdGVUaW1lKVxuICAgIHJldHVybiB0ZXJtRGF0ZS55ZWFyKCkgPT09IG1vbWVudCgpLnllYXIoKSAmJiB0ZXJtRGF0ZS53ZWVrKCkgPT09IG1vbWVudCgpLndlZWsoKTtcbiAgfVxuXG4gIGdldExhc3RTdGVwV2Vlayhsb2NhbGU6IHN0cmluZykge1xuICAgIC8vVE9ETzogdGhpcyBzaG91bGQgYmUgcmVmYWN0b3JlZC4gVGhlIGdlbmVyaWMgbWV0aG9kIHNob3VsZCBiZSB1c2VkXG4gICAgaWYobG9jYWxlID09PSBcInN2XCIpe1xuICAgICAgcmV0dXJuIHRoaXMuc2Nob29sTW9tZW50LnRlcm0gPT09IFwiU1RcIiA/IExBU1RfU1RFUF9TUFJJTkcgOiBMQVNUX1NURVBfQVVUVU1OO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zY2hvb2xNb21lbnQuYWNhZGVtaWNZZWFyU3RydWN0dXJlLmVuZERhdGUuY2xvbmUoKS5hZGQoMSwgXCJ3ZWVrXCIpLndlZWsoKTtcbiAgfVxuXG4gIHRvTG9jYWxlU3RyaW5nKGludGw6IEluamVjdGVkSW50bCwgc2hvcnRZZWFyPzogYm9vbGVhbikge1xuICAgIGlmKHRoaXMuc2Nob29sTW9tZW50KVxuICAgIHtcbiAgICBsZXQgeWVhciA9IHRoaXMuc2Nob29sTW9tZW50LmFjYWRlbWljWWVhclN0cnVjdHVyZS5lbmREYXRlLnllYXIoKS50b1N0cmluZygpO1xuICAgIGxldCBhY2FkZW1pY1llYXIgPSB0aGlzLnNjaG9vbE1vbWVudC5hY2FkZW1pY1llYXJTdHJ1Y3R1cmUuYWNhZGVtaWNZZWFyO1xuICAgIGlmIChzaG9ydFllYXIgJiYgaW50bC5sb2NhbGUgPT09ICdzdicpIHtcbiAgICAgIHllYXIgPSB5ZWFyLnN1YnN0cigyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgeWVhciA9IGFjYWRlbWljWWVhcjtcbiAgICB9XG5cblxuICAgIHJldHVybiB0aGlzLnNjaG9vbE1vbWVudC50ZXJtID09PSAnQVQnID8gaW50bC5mb3JtYXRNZXNzYWdlKHsgaWQ6ICd0ZXJtcGxhbm5lci5maXJzdFRlcm0nLCBkZWZhdWx0TWVzc2FnZTogJ0hUIHt5ZWFyfScgfSwgeyB5ZWFyOiB5ZWFyIH0pIDpcbiAgICAgIGludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiAndGVybXBsYW5uZXIuc2Vjb25kVGVybScsIGRlZmF1bHRNZXNzYWdlOiAnVlQge3llYXJ9JyB9LCB7IHllYXI6IHllYXIgfSk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgbmV4dFRlcm0oKSB7XG4gICAgLy9zd2l0Y2ggdG8gbmV4dCBzZW1lc3Rlciwgd2Ugc2V0IHRoZSBjdXJyZW50IGRhdGUgYXMgYWRkaW5nIDMgbW9udGhzIHRvIHRoZSBlbmQgb2YgdGhlIGN1cnJlbnQgc2VtZXN0ZXJcbiAgICB2YXIgZW5kRGF0ZSA9IHRoaXMuc2Nob29sTW9tZW50ID8gdGhpcy5zY2hvb2xNb21lbnQuYWNhZGVtaWNZZWFyU3RydWN0dXJlLmVuZERhdGUuY2xvbmUoKSA6IG1vbWVudCgpO1xuICAgIHZhciBuZXh0RGF0ZSA9IGVuZERhdGUuYWRkKDMsICdtb250aHMnKTtcbiAgICByZXR1cm4gbmV3IEdlbmVyaWNTY2hvb2xUZXJtKG5leHREYXRlLnRvRGF0ZSgpLCB0aGlzLmxvY2FsZSk7XG4gIH1cblxuICBwcmV2VGVybSgpIHtcbiAgICAvL3RvIHN3aXRjaCB0byBuZXh0IHNlbWVzdGVyLCB3ZSBzZXQgdGhlIGN1cnJlbnQgZGF0ZSBhcyBzdWJ0cmFjdGluZyAzIG1vbnRocyBmcm9tIHRoZSBzdGFydCBvZiB0aGUgY3VycmVudCBzZW1lc3RlclxuICAgIHZhciBzdGFydERhdGUgPSB0aGlzLnNjaG9vbE1vbWVudCA/ICB0aGlzLnNjaG9vbE1vbWVudC5hY2FkZW1pY1llYXJTdHJ1Y3R1cmUuc3RhcnREYXRlLmNsb25lKCkgOiBtb21lbnQoKTtcbiAgICB2YXIgcHJldkRhdGUgPSBzdGFydERhdGUuc3VidHJhY3QoMywgJ21vbnRocycpO1xuICAgIHJldHVybiBuZXcgR2VuZXJpY1NjaG9vbFRlcm0ocHJldkRhdGUudG9EYXRlKCksIHRoaXMubG9jYWxlKTtcbiAgfVxuXG4gIGdldEVkc1BlcmlvZE5hbWUoKXtcbiAgICByZXR1cm4gdGhpcy5zY2hvb2xNb21lbnQudGVybSA9PT0gJ0FUJyA/IFwiSFRcIiA6IFwiVlRcIiArIHRoaXMuc2Nob29sTW9tZW50LmFjYWRlbWljWWVhclN0cnVjdHVyZS5lbmREYXRlLnllYXIoKTtcbiAgfVxufVxuIiwiaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xuaW1wb3J0IHtNb2NrRURTQWNhZGVtaWNZZWFyLCBNb2NrRURTRGF0ZVJhbmdlfSBmcm9tICcuLi9jb250cmFjdHMvZWRzJztcbmltcG9ydCB7QWNhZGVtaWNZZWFyU3RydWN0dXJlLCAgVGVybSB9IGZyb20gJy4uL2NvbnRyYWN0cy9rZWQtbW9kZWxzJztcbmltcG9ydCB7IEluamVjdGVkSW50bCB9IGZyb20gJ3JlYWN0LWludGwnOyAgXG5cbmV4cG9ydCBpbnRlcmZhY2UgR2VuZXJpY1NjaG9vbE1vbWVudCB7XG4gICAgYWNhZGVtaWNZZWFyU3RydWN0dXJlOiBBY2FkZW1pY1llYXJTdHJ1Y3R1cmU7XG4gICAgdGVybTogVGVybTtcbiAgfVxuICBcbmV4cG9ydCBmdW5jdGlvbiBnZXRDdXJyZW50QWNhZGVtaWNZZWFyKGN1cnJlbnREYXRlOiBtb21lbnQuTW9tZW50LCBhY2FkZW1pY1llYXI6IE1vY2tFRFNBY2FkZW1pY1llYXIpIDogR2VuZXJpY1NjaG9vbE1vbWVudFxue1xuICB2YXIgZmlyc3RUZXJtU3RhcnREYXRlID0gbW9tZW50KG5ldyBEYXRlKGFjYWRlbWljWWVhci5maXJzdFRlcm0uc3RhcnREYXRlKSk7XG4gIHZhciBmaXJzdFRlcm1FbmREYXRlID0gbW9tZW50KG5ldyBEYXRlKGFjYWRlbWljWWVhci5maXJzdFRlcm0uZW5kRGF0ZSkpO1xuICB2YXIgc2Vjb25kVGVybVN0YXJ0RGF0ZSA9IG1vbWVudChuZXcgRGF0ZShhY2FkZW1pY1llYXIuc2Vjb25kVGVybS5zdGFydERhdGUpKTtcbiAgdmFyIHNlY29uZFRlcm1FbmREYXRlID0gbW9tZW50KG5ldyBEYXRlKGFjYWRlbWljWWVhci5zZWNvbmRUZXJtLmVuZERhdGUpKTtcbiAgdmFyIGFjYWRlbWljUGVyaW9kID0gZmlyc3RUZXJtU3RhcnREYXRlLnllYXIoKS50b1N0cmluZygpLnN1YnN0cigyKSArIFwiL1wiICsgc2Vjb25kVGVybUVuZERhdGUueWVhcigpLnRvU3RyaW5nKCkuc3Vic3RyKDIpO1xuXG4gIHZhciBob2xpZGF5cyA9IF9nZXRUZXJtSG9saWRheXMoYWNhZGVtaWNZZWFyLmhvbGlkYXlzLCBmaXJzdFRlcm1TdGFydERhdGUsIGZpcnN0VGVybUVuZERhdGUpOyBcbiAgaWYoY3VycmVudERhdGUgPCBmaXJzdFRlcm1FbmREYXRlKVxuICB7XG4gICAgLy9jb21wdXRlIGFjYWRlbWljIHdlZWsgbnVtYmVyc1xuICAgIHZhciBhY2FkZW1pY1N0YXJ0V2VlayA9IDE7XG4gICAgdmFyIGFjYWRlbWljRW5kV2VlayA9IGZpcnN0VGVybUVuZERhdGUud2VlaygpIC0gZmlyc3RUZXJtU3RhcnREYXRlLndlZWsoKTtcbiAgICAvL2dldCBjdXJyZW50IHRlcm0gaG9saWRheXNcbiAgICByZXR1cm4ge3Rlcm06ICdBVCcsIGFjYWRlbWljWWVhclN0cnVjdHVyZToge2FjYWRlbWljWWVhcjogYWNhZGVtaWNQZXJpb2QsIHN0YXJ0RGF0ZTogZmlyc3RUZXJtU3RhcnREYXRlLCBlbmREYXRlOiBmaXJzdFRlcm1FbmREYXRlLGFjYWRlbWljU3RhcnRXZWVrLCBhY2FkZW1pY0VuZFdlZWssIGhvbGlkYXlzfX07XG4gIH1cblxuICAvL2NvbXB1dGUgdGhlIG51bWJlciBvZiBmaXJzdCB0ZXJtIGhvbGlkYXlzIHdlZWsgbnVtYmVyc1xuICB2YXIgbnVtYmVyT2ZIb2xpZGF5V2Vla3MgPSBfZ2V0SG9saWRheVdlZWtzTnVtYmVyKGhvbGlkYXlzKTtcbiAgLy9jb21wdXRlIGFjYWRlbWljIHdlZWsgbnVtYmVyc1xuICB2YXIgYWNhZGVtaWNTdGFydFdlZWsgPSBzZWNvbmRUZXJtU3RhcnREYXRlLmNsb25lKCkuYWRkKDEsICd3ZWVrJykud2VlaygpIC0gZmlyc3RUZXJtU3RhcnREYXRlLndlZWsoKSAtIG51bWJlck9mSG9saWRheVdlZWtzO1xuICB2YXIgYWNhZGVtaWNFbmRXZWVrID0gc2Vjb25kVGVybUVuZERhdGUuY2xvbmUoKS5hZGQoKS5hZGQoMSwgJ3dlZWsnKS53ZWVrKCkgLSBmaXJzdFRlcm1TdGFydERhdGUud2VlaygpIC0gbnVtYmVyT2ZIb2xpZGF5V2Vla3M7XG4gIC8vZ2V0IGN1cnJlbnQgdGVybSBob2xpZGF5c1xuICB2YXIgaG9saWRheXMgPSBfZ2V0VGVybUhvbGlkYXlzKGFjYWRlbWljWWVhci5ob2xpZGF5cywgc2Vjb25kVGVybVN0YXJ0RGF0ZSwgc2Vjb25kVGVybUVuZERhdGUpO1xuICByZXR1cm4ge3Rlcm06ICdTVCcsIGFjYWRlbWljWWVhclN0cnVjdHVyZToge2FjYWRlbWljWWVhcjogYWNhZGVtaWNQZXJpb2QsIHN0YXJ0RGF0ZTogc2Vjb25kVGVybVN0YXJ0RGF0ZSwgZW5kRGF0ZTogc2Vjb25kVGVybUVuZERhdGUsIGFjYWRlbWljU3RhcnRXZWVrLCBhY2FkZW1pY0VuZFdlZWssIGhvbGlkYXlzfX07XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFNjaG9vbFRyYW5zbGF0ZWRTdWJqZWN0cyhzY2hvb2xMb2NhbGU6IHN0cmluZywgaW50bDogSW5qZWN0ZWRJbnRsKXtcbiAgdmFyIHRyYW5zbGF0ZWRDb2x1bW5zID0ge307XG4gIC8vdGhlc2UgYXJlIGZpeGVkIGZvciBhbGwgc2Nob29sIGxvY2FsZXNcbiAgdHJhbnNsYXRlZENvbHVtbnNbXCJLdXJzXCJdID0gaW50bC5mb3JtYXRNZXNzYWdlKHtpZDogXCJ0ZXJtcGxhbm5lci5jb3Vyc2VcIiwgZGVmYXVsdE1lc3NhZ2U6IFwiS3Vyc1wifSk7XG4gIHRyYW5zbGF0ZWRDb2x1bW5zW1wiS29tbWVudGFyXCJdID0gaW50bC5mb3JtYXRNZXNzYWdlKHtpZDogXCJ0ZXJtcGxhbm5lci5jb21tZW50c1wiLCBkZWZhdWx0TWVzc2FnZTogXCJLb21tZW50YXJcIn0pO1xuXG4gIGlmKHNjaG9vbExvY2FsZSA9PT0gJ3N2Jyl7XG4gICAgdHJhbnNsYXRlZENvbHVtbnNbXCJNLnNwclwiXSA9IGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6IFwidGVybXBsYW5uZXIubW9kZXJuTGFuZ3VhZ2VcIiwgZGVmYXVsdE1lc3NhZ2U6IFwiTS5zcHJcIn0pO1xuICAgIHRyYW5zbGF0ZWRDb2x1bW5zW1wiTWFcIl0gPSBpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOiBcInRlcm1wbGFubmVyLm1hdGhzXCIsIGRlZmF1bHRNZXNzYWdlOiBcIk1hXCJ9KTtcbiAgICB0cmFuc2xhdGVkQ29sdW1uc1tcIlN2L1N2QVwiXSA9IGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6IFwidGVybXBsYW5uZXIuc3dlZGlzaExhbmd1YWdlXCIsIGRlZmF1bHRNZXNzYWdlOiBcIlN2L1N2QVwifSk7XG4gICAgdHJhbnNsYXRlZENvbHVtbnNbXCJFbmdcIl0gPSBpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOiBcInRlcm1wbGFubmVyLmVuZ2xpc2hMYW5ndWFnZVwiLCBkZWZhdWx0TWVzc2FnZTogXCJFbmdcIn0pO1xuICB9XG4gIGVsc2Uge1xuICAgIHRyYW5zbGF0ZWRDb2x1bW5zW1wiTUZMXCJdID0gaW50bC5mb3JtYXRNZXNzYWdlKHtpZDogXCJ0ZXJtcGxhbm5lci5tb2Rlcm5MYW5ndWFnZVwiLCBkZWZhdWx0TWVzc2FnZTogXCJNRkxcIn0pO1xuICAgIHRyYW5zbGF0ZWRDb2x1bW5zW1wiTWFcIl0gPSBpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOiBcInRlcm1wbGFubmVyLm1hdGhzXCIsIGRlZmF1bHRNZXNzYWdlOiBcIk1hdGhzXCJ9KTtcbiAgICB0cmFuc2xhdGVkQ29sdW1uc1tcIkhpXCJdID0gaW50bC5mb3JtYXRNZXNzYWdlKHtpZDogXCJ0ZXJtcGxhbm5lci5oaW5kaUxhbmd1YWdlXCIsIGRlZmF1bHRNZXNzYWdlOiBcIkhpbmRpXCJ9KTtcbiAgICB0cmFuc2xhdGVkQ29sdW1uc1tcIkVuZ1wiXSA9IGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6IFwidGVybXBsYW5uZXIuZW5nbGlzaExhbmd1YWdlXCIsIGRlZmF1bHRNZXNzYWdlOiBcIkVuZ2xpc2hcIn0pO1xuICAgIHRyYW5zbGF0ZWRDb2x1bW5zW1wiWW9nYVwiXSA9IGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6IFwidGVybXBsYW5uZXIueW9nYVwiLCBkZWZhdWx0TWVzc2FnZTogXCJZb2dhXCJ9KTtcbiAgICB0cmFuc2xhdGVkQ29sdW1uc1tcIklDVFwiXSA9IGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6IFwidGVybXBsYW5uZXIuaWN0XCIsIGRlZmF1bHRNZXNzYWdlOiBcIklDVFwifSk7XG4gIH1cbiAgcmV0dXJuIHRyYW5zbGF0ZWRDb2x1bW5zO1xufVxuXG4vL3RoaXMgaXMgcmVsYXRlZCB0byBjaGFydHMuIEl0IGlzIHVzZWQgb25seSBmb3Igc3YgbG9jYWxlXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2Nob29sVHJhbnNsYXRlZFN1YmplY3RGdWxsbmFtZShpbnRsOiBJbmplY3RlZEludGwpe1xuICB2YXIgdHJhbnNsYXRlZENvbHVtbnMgPSB7fTtcblxuICB0cmFuc2xhdGVkQ29sdW1uc1tcIk0uc3ByXCJdID0gaW50bC5mb3JtYXRNZXNzYWdlKHtpZDogXCJ0ZXJtcGxhbm5lci5tb2Rlcm5MYW5ndWFnZUZ1bGxuYW1lXCIsIGRlZmF1bHRNZXNzYWdlOiBcIk0uc3Byw6VrXCJ9KTtcbiAgdHJhbnNsYXRlZENvbHVtbnNbXCJNYVwiXSA9IGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6IFwidGVybXBsYW5uZXIubWF0aHNGdWxsbmFtZVwiLCBkZWZhdWx0TWVzc2FnZTogXCJNYXRlbWF0aWtcIn0pO1xuICB0cmFuc2xhdGVkQ29sdW1uc1tcIlN2L1N2QVwiXSA9IGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6IFwidGVybXBsYW5uZXIuc3dlZGlzaExhbmd1YWdlRnVsbE5hbWVcIiwgZGVmYXVsdE1lc3NhZ2U6IFwiU3ZlbnNrYVwifSk7XG4gIHRyYW5zbGF0ZWRDb2x1bW5zW1wiRW5nXCJdID0gaW50bC5mb3JtYXRNZXNzYWdlKHtpZDogXCJ0ZXJtcGxhbm5lci5lbmdsaXNoTGFuZ3VhZ2VGdWxsTmFtZVwiLCBkZWZhdWx0TWVzc2FnZTogXCJFbmdlbHNrYVwifSk7XG5cbiAgcmV0dXJuIHRyYW5zbGF0ZWRDb2x1bW5zO1xufVxuXG5mdW5jdGlvbiBfZ2V0VGVybUhvbGlkYXlzKGhvbGlkYXlzOiBNb2NrRURTRGF0ZVJhbmdlW10sIHRlcm1TdGFydERhdGU6IG1vbWVudC5Nb21lbnQsIHRlcm1FbmREYXRlOiBtb21lbnQuTW9tZW50KXtcbiAgcmV0dXJuIGhvbGlkYXlzLmZpbHRlcihlbGVtID0+IHtcbiAgICByZXR1cm4gbW9tZW50KGVsZW0uc3RhcnREYXRlKS5pc0JldHdlZW4odGVybVN0YXJ0RGF0ZSwgdGVybUVuZERhdGUpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gX2dldEhvbGlkYXlXZWVrc051bWJlcihob2xpZGF5czpNb2NrRURTRGF0ZVJhbmdlW10pe1xuICB2YXIgbnVtYmVyT2ZXZWVrcyA9IDA7XG4gIGhvbGlkYXlzLmZvckVhY2goZWxlbSA9PiB7XG4gICAgLy90aGUgbnVtYmVyIG9mIHdlZWtzIGlzIHRoZSBkaWZmZXJlbmNlICsgMVxuICAgIG51bWJlck9mV2Vla3MrPSBtb21lbnQoZWxlbS5lbmREYXRlKS5hZGQoMSwgJ3dlZWsnKS53ZWVrKCkgLSBtb21lbnQoZWxlbS5zdGFydERhdGUpLndlZWsoKTtcbiAgfSk7XG4gIHJldHVybiBudW1iZXJPZldlZWtzO1xufSIsIlxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGlmVGFrZXNUaW1lKG1zOiBudW1iZXIsIHRhc2s6ICgpPT5Qcm9taXNlPGFueT4sIGFjdGlvbjogKCk9PmFueSkge1xuICBsZXQgdGltZW91dFJlYWNoZWQgPSBmYWxzZTtcbiAgY29uc3QgdGggPSBzZXRUaW1lb3V0KCgpPT57XG4gICAgdGltZW91dFJlYWNoZWQgPSB0cnVlO1xuICAgIGFjdGlvbigpO1xuICB9LCBtcyk7XG4gIGNvbnN0IHJ2ID0gYXdhaXQgdGFzaygpO1xuICBpZiAoIXRpbWVvdXRSZWFjaGVkKSBjbGVhclRpbWVvdXQodGgpO1xuICByZXR1cm4gcnY7XG59XG4iLCJjb25zdCBERUZBVUxUX0NBQ0hFX0VYUElSQVRJT04gPSAzMCAqIDYwICogMTAwMDsgLy8gMzAgbWludXRlcy5cblxudHlwZSBQcm9taXNlUmV0dXJuaW5nTWV0aG9kTmFtZXM8QVBJPiA9IHtcbiAgW01FVEhPRCBpbiBrZXlvZiBBUEldOiBBUElbTUVUSE9EXSBleHRlbmRzICguLi5hcmdzOiBhbnlbXSkgPT4gUHJvbWlzZTxhbnk+ID8gTUVUSE9EIDogbmV2ZXJcbn1cblxudHlwZSBDb252ZXJ0TWV0aG9kVG9TdXNwZW5zZTxGPiA9IEYgZXh0ZW5kcyAoLi4uYXJnczogaW5mZXIgQSkgPT4gUHJvbWlzZTxpbmZlciBSPiA/XG4gICguLi5hcmdzOiBBKSA9PiBSIDpcbiAgRjtcblxuZXhwb3J0IHR5cGUgU3VzcGVuc2VCYXNlZEFQSTxBUEk+ID0ge1xuICBbTUVUSE9EIGluIGtleW9mIFByb21pc2VSZXR1cm5pbmdNZXRob2ROYW1lczxBUEk+XTogQ29udmVydE1ldGhvZFRvU3VzcGVuc2U8QVBJW01FVEhPRF0+XG59XG5cbnR5cGUgT3B0aW9ucyA9IHtcbiAgaXNBcGlNZXRob2Q/OiAocHJvcDogc3RyaW5nKT0+Ym9vbGVhbixcbiAgY2FjaGVFeHBpcmF0aW9uPzogbnVtYmVyXG59XG5cbmNvbnN0IGRlZmF1bHRPcHRpb25zOiBPcHRpb25zID0ge1xuICBpc0FwaU1ldGhvZDogZiA9PiB0eXBlb2YgZiA9PT0gJ2Z1bmN0aW9uJyxcbiAgY2FjaGVFeHBpcmF0aW9uOiBERUZBVUxUX0NBQ0hFX0VYUElSQVRJT05cbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBtYWtlU3VzcGVuc2VBcGk8QVBJPihhcGk6IEFQSSwgb3B0aW9ucyA9IGRlZmF1bHRPcHRpb25zKTogU3VzcGVuc2VCYXNlZEFQSTxBUEk+XG57XG4gIG9wdGlvbnMgPSB7Li4uZGVmYXVsdE9wdGlvbnMsIC4uLm9wdGlvbnN9O1xuICBjb25zdCB7aXNBcGlNZXRob2QsIGNhY2hlRXhwaXJhdGlvbn0gPSBvcHRpb25zO1xuXG4gIGNvbnN0IHJ2OiBTdXNwZW5zZUJhc2VkQVBJPEFQST4gPSBPYmplY3QuY3JlYXRlKGFwaSBhcyBhbnkpIGFzIFN1c3BlbnNlQmFzZWRBUEk8QVBJPjtcbiAgY29uc3QgY2FjaGU6IHtba2V5OiBzdHJpbmddOiB7dGltZW91dDogbnVtYmVyLCB2YWx1ZT86IGFueSwgZXJyb3I/OiBhbnksIHByb21pc2U/OiBQcm9taXNlPGFueT59fSA9IHt9O1xuXG4gIC8vIFdhbGsgdGhlIGluc3RhbmNlICsgcHJvdG90eXBlIGNoYWluIHRvIGdlbmVyYXRlIHN1c3BlbnNlIHZlcnNpb24gb2YgZWFjaCBwcm9taXNlIHJldHVybmluZyBtZXRob2RcbiAgZm9yIChsZXQgcHJvdG8gPSBhcGk7IHByb3RvICYmIHByb3RvICE9PSBPYmplY3QucHJvdG90eXBlOyBwcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihwcm90bykpIHtcbiAgICBzdXNwZW5kaWZ5KHByb3RvKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN1c3BlbmRpZnkocHJvdG8pIHtcbiAgICBPYmplY3Qua2V5cyhwcm90bykuZm9yRWFjaChwcm9wID0+IHtcbiAgICAgIGlmICghcnYuaGFzT3duUHJvcGVydHkocHJvcCkgJiYgaXNBcGlNZXRob2QocHJvcCkpIHtcbiAgICAgICAgcnZbcHJvcF0gPSBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICAgIGNvbnN0IGtleSA9IEpTT04uc3RyaW5naWZ5KFtwcm9wLCAuLi5hcmdzXSk7XG4gICAgICAgICAgY29uc3QgY2FjaGVkRW50cnkgPSBjYWNoZVtrZXldO1xuICAgICAgICAgIGlmIChjYWNoZWRFbnRyeSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAoY2FjaGVkRW50cnkucHJvbWlzZSkgdGhyb3cgY2FjaGVkRW50cnkucHJvbWlzZTtcbiAgICAgICAgICAgIGlmIChjYWNoZWRFbnRyeS5lcnJvcikgdGhyb3cgY2FjaGVkRW50cnkuZXJyb3I7XG4gICAgICAgICAgICBpZiAoY2FjaGVkRW50cnkudGltZW91dCA+IERhdGUubm93KCkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGNhY2hlZEVudHJ5LnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcHJvbWlzZSA9IHByb3RvW3Byb3BdLmFwcGx5KGFwaSwgYXJncykudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICAgICAgICBjYWNoZVtrZXldID0ge3RpbWVvdXQ6IERhdGUubm93KCkgKyBjYWNoZUV4cGlyYXRpb24sIHZhbHVlOiByZXN1bHR9O1xuICAgICAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgICAgICBjYWNoZVtrZXldID0ge3RpbWVvdXQ6IERhdGUubm93KCkgKyBjYWNoZUV4cGlyYXRpb24sIGVycm9yfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY2FjaGVba2V5XSA9IHt0aW1lb3V0OiBEYXRlLm5vdygpICsgY2FjaGVFeHBpcmF0aW9uLCBwcm9taXNlfTtcbiAgICAgICAgICAgIHRocm93IHByb21pc2U7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGlmIChlcnJvci50aGVuKSB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIGNhY2hlW2tleV0gPSB7dGltZW91dDogRGF0ZS5ub3coKSArIGNhY2hlRXhwaXJhdGlvbiwgZXJyb3J9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSBhcyBhbnk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gcnY7XG59XG4iLCJcbmV4cG9ydCBjbGFzcyBQZW5kaW5nSm9iIHtcbiAgcHJpdmF0ZSB0aW1lb3V0SWQgPSBudWxsO1xuICBwcml2YXRlIGNhbmNlbGxlZCA9IGZhbHNlO1xuICBwcml2YXRlIHBlbmRpbmcgPSBmYWxzZTtcbiAgcHJpdmF0ZSBpc0pvYkV4ZWN1dGluZyA9IGZhbHNlO1xuICBwcml2YXRlIGpvYkNhbGxiYWNrOiAoKT0+UHJvbWlzZTxhbnk+O1xuICBcbiAgY29uc3RydWN0b3IoY2FsbGJhY2s6ICgpPT5Qcm9taXNlPGFueT4pIHtcbiAgICB0aGlzLmpvYkNhbGxiYWNrID0gY2FsbGJhY2s7XG4gIH1cblxuICB0cmlnZ2VyQ2hhbmdlKHRocm90dGxlOiBudW1iZXIpOiBhbnkge1xuICAgIGlmICh0aGlzLmNhbmNlbGxlZCkgcmV0dXJuO1xuICAgIHRoaXMucGVuZGluZyA9IHRydWU7XG4gICAgaWYgKHRoaXMudGltZW91dElkICE9PSBudWxsKVxuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dElkKTtcbiAgICB0aGlzLnRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCk9PnRoaXMubGF1bmNoSm9iKCksIHRocm90dGxlKTtcbiAgfVxuXG4gIHN0b3AoKSB7XG4gICAgaWYgKHRoaXMudGltZW91dElkICE9PSBudWxsKVxuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dElkKTtcbiAgICB0aGlzLnRpbWVvdXRJZCA9IG51bGw7XG4gICAgdGhpcy5jYW5jZWxsZWQgPSB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBsYXVuY2hKb2IoKSB7XG4gICAgaWYgKHRoaXMuY2FuY2VsbGVkKSByZXR1cm47XG4gICAgaWYgKCF0aGlzLnBlbmRpbmcpIHJldHVybjtcbiAgICBpZiAodGhpcy5pc0pvYkV4ZWN1dGluZykgcmV0dXJuO1xuICAgIHRoaXMudGltZW91dElkID0gbnVsbDtcbiAgICB0cnkge1xuICAgICAgdGhpcy5pc0pvYkV4ZWN1dGluZyA9IHRydWU7XG4gICAgICB0aGlzLnBlbmRpbmcgPSBmYWxzZTtcbiAgICAgIGF3YWl0IHRoaXMuam9iQ2FsbGJhY2soKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgdGhpcy5pc0pvYkV4ZWN1dGluZyA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAodGhpcy5wZW5kaW5nKVxuICAgICAgYXdhaXQgdGhpcy5sYXVuY2hKb2IoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGludGVyZmFjZSBQYXJzZVF1ZXJ5U3RyaW5nT3B0aW9ucyB7XG4gIHRvTG93ZXI/OiBib29sZWFuO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VRdWVyeVN0cmluZyhsb2NhdGlvblNlYXJjaDogc3RyaW5nLCBvcHRpb25zPzogUGFyc2VRdWVyeVN0cmluZ09wdGlvbnMpOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9IHtcbiAgY29uc3Qge3RvTG93ZXJ9ID0gKG9wdGlvbnMgfHzCoHt9KSBhcyBQYXJzZVF1ZXJ5U3RyaW5nT3B0aW9ucztcbiAgY29uc3QgcmVzdWx0ID0ge307XG4gIGlmIChsb2NhdGlvblNlYXJjaCAmJiBsb2NhdGlvblNlYXJjaC5sZW5ndGggPiAxKVxuICAgIGxvY2F0aW9uU2VhcmNoLnN1YnN0cigxKVxuICAgICAgLnNwbGl0KCcmJylcbiAgICAgIC5tYXAocGFydCA9PiBwYXJ0LnNwbGl0KCc9JykubWFwKHMgPT4gZGVjb2RlVVJJQ29tcG9uZW50KHMudHJpbSgpKSkpXG4gICAgICAuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiByZXN1bHRbdG9Mb3dlciA/IGtleS50b0xvd2VyQ2FzZSgpIDoga2V5XSA9IHZhbHVlKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gZW5jb2RlUGFyYW1zKHBhcmFtczoge1trZXk6IHN0cmluZ106c3RyaW5nfSkge1xuICByZXR1cm4gT2JqZWN0LmtleXMocGFyYW1zKS5maWx0ZXIoa2V5ID0+IHBhcmFtc1trZXldICE9PSB1bmRlZmluZWQpLm1hcChrZXkgPT4gYCR7ZW5jb2RlVVJJQ29tcG9uZW50KGtleSl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHBhcmFtc1trZXldKX1gKS5qb2luKCcmJyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVF1ZXJ5U3RyaW5nKHBhcmFtczoge1trZXk6IHN0cmluZ106c3RyaW5nfSkge1xuICByZXR1cm4gXCI/XCIgKyBlbmNvZGVQYXJhbXMocGFyYW1zKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSGFzaFF1ZXJ5U3RyaW5nKGxvY2F0aW9uSGFzaDogc3RyaW5nLCBvcHRpb25zPzogUGFyc2VRdWVyeVN0cmluZ09wdGlvbnMpIHtcbiAgcmV0dXJuIHBhcnNlUXVlcnlTdHJpbmcobG9jYXRpb25IYXNoLCBvcHRpb25zKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlSGFzaFF1ZXJ5U3RyaW5nKHBhcmFtczoge1trZXk6IHN0cmluZ106c3RyaW5nfSkge1xuICByZXR1cm4gXCIjXCIgKyBlbmNvZGVQYXJhbXMocGFyYW1zKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNwbGl0VXJsQW5kUXVlcnkgKHVybFdpdGhQb3NzaWJsZVF1ZXJ5OiBzdHJpbmcpIHtcbiAgY29uc3QgcFF1ZXJ5ID0gdXJsV2l0aFBvc3NpYmxlUXVlcnkuaW5kZXhPZignPycpO1xuICByZXR1cm4gcFF1ZXJ5ID49IDAgP1xuICAgIFt1cmxXaXRoUG9zc2libGVRdWVyeS5zdWJzdHIoMCwgcFF1ZXJ5KSwgdXJsV2l0aFBvc3NpYmxlUXVlcnkuc3Vic3RyKHBRdWVyeSldIDpcbiAgICBbdXJsV2l0aFBvc3NpYmxlUXVlcnksIFwiXCJdO1xufVxuIiwiaW1wb3J0IGVudiwgeyBFbnYgfSBmcm9tICcuLi9nbG9iYWxzL0tFRC5lbnYnO1xuaW1wb3J0IGNmZyBmcm9tICcuLi9nbG9iYWxzL0tFRC5jZmcnO1xuaW1wb3J0IHsgVXNlciB9IGZyb20gJy4uL2NvbnRyYWN0cy9rZWQtbW9kZWxzJztcbmltcG9ydCB7IEJlYXJlclRva2VuSW5mbywgS2VkQmFja2VuZENsaWVudCwgSHR0cEVycm9yIH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnQnO1xuaW1wb3J0IHsgRWRzQ2xpZW50IH0gZnJvbSAnLi4vYXBpcy9lZHNjbGllbnQnO1xuaW1wb3J0IHsgaXNvbW9ycGhpYywgS2VkQmFja2VuZENsaWVudFdlYiB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50d2ViJztcbmltcG9ydCB7IEtTVGVybVBsYW5uZXJSZXBvIH0gZnJvbSAnLi4vcmVwb3Mva3MtdGVybXBsYW5uZXItcmVwbyc7XG5pbXBvcnQgeyBLR1Rlcm1QbGFubmVyUmVwbyB9IGZyb20gJy4uL3JlcG9zL2tnLXRlcm1wbGFubmVyLXJlcG8nO1xuaW1wb3J0IHsgVXNlclRhc2tzUmVwbyB9IGZyb20gJy4uL3JlcG9zL3VzZXItdGFza3MtcmVwbyc7XG5pbXBvcnQgeyBSZXN0Q2xpZW50IH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnQnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVxdWVzdFR1dG9yZWRUb2tlbnModXNlckVtYWlsOiBzdHJpbmcsIGRpc3BsYXlOYW1lOiBzdHJpbmcpOiBQcm9taXNlPEVudj4ge1xuICAvL2xldCBiZWFyZXJQcm9taXNlOiBQcm9taXNlPEJlYXJlclRva2VuSW5mbz4gfCBudWxsID0gbnVsbDtcbiAgLy9sZXQgZ29vZ2xlQmVhcmVyUHJvbWlzZTogUHJvbWlzZTxCZWFyZXJUb2tlbkluZm8+IHwgbnVsbCA9IG51bGw7XG5cbiAgY29uc3QgY3VycmVudFVzZXI6IFVzZXIgPSB7XG4gICAgbWFpbDogdXNlckVtYWlsLFxuICAgIGRpc3BsYXlOYW1lLFxuICAgIHJvbGVzOiBbXCJVU0VSXCJdLFxuICAgIHNjaG9vbDogZW52LmN1cnJlbnRVc2VyLnNjaG9vbCxcbiAgICB0dXRvckZvcjogdXNlckVtYWlsXG4gIH07XG5cbiAgZnVuY3Rpb24gY3JlYXRlQmVhcmVyUHJvdmlkZXIgKGNsaWVudDogUmVzdENsaWVudCwgdG9rZW5Vcmw6IHN0cmluZywgcXVlcnk/KSB7XG4gICAgbGV0IGJlYXJlclByb21pc2U6IFByb21pc2U8QmVhcmVyVG9rZW5JbmZvPiB8IG51bGwgPSBudWxsO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGdldEJlYXJlcigpOiBQcm9taXNlPEJlYXJlclRva2VuSW5mbz4ge1xuICAgICAgICByZXR1cm4gYmVhcmVyUHJvbWlzZSB8fCB0aGlzLnJlZnJlc2hCZWFyZXIoKTtcbiAgICAgIH0sXG4gICAgICByZWZyZXNoQmVhcmVyKCk6IFByb21pc2U8QmVhcmVyVG9rZW5JbmZvPiB7XG4gICAgICAgIHJldHVybiAoYmVhcmVyUHJvbWlzZSA9IHJldHJpZXZlVG9rZW4oKSk7XG4gICAgICB9LFxuICAgIH1cblxuICAgIGFzeW5jIGZ1bmN0aW9uIHJldHJpZXZlVG9rZW4oKTogUHJvbWlzZTxCZWFyZXJUb2tlbkluZm8+IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGNsaWVudC5nZXQodG9rZW5VcmwsIHF1ZXJ5KTtcbiAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgcmV0dXJuIChhd2FpdCByZXMuanNvbigpKSBhcyBCZWFyZXJUb2tlbkluZm87XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgSHR0cEVycm9yKHJlcy5zdGF0dXMsXG4gICAgICAgIFwiQ291bGQgbm90IHJldHJpZXZlIHR1dG9yIHRva2VuIGZvciBcIiArXG4gICAgICAgIHVzZXJFbWFpbCArXG4gICAgICAgIFwiLiBFcnJvciBNZXNzYWdlOiBcIiArIGF3YWl0IHJlcy50ZXh0KCkpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFRoZSBtYWluIGJlYXJlcnByb3ZpZGVyIHdpbGwgcmVxdWVzdCBhIHR1dG9yLXRva2VuIGJhc2VkIG9uIHRoZSB1c2VyJ3Mgbm9ybWFsIHRva2VuLlxuICBjb25zdCBiZWFyZXJQcm92aWRlciA9IGNyZWF0ZUJlYXJlclByb3ZpZGVyKGVudi5rZWRCYWNrZW5kQ2xpZW50Lmh0dHAsIFwidHV0b3IvdG9rZW5cIiwge3VzZXJFbWFpbH0pO1xuICBjb25zdCB0dXRvcmVkS2VkQmFja2VuZENsaWVudCA9IG5ldyBLZWRCYWNrZW5kQ2xpZW50KGlzb21vcnBoaWMsIGJlYXJlclByb3ZpZGVyLCBjZmcuS0VEX0FQSV9VUkwpO1xuICAvLyBOb3csIGNyZWF0ZSBiZWFyZXIgcHJvdmlkZXJzIGZvciBFRFMgYW5kIEdvb2dsZSB0aGF0IGdlbmVyYXRlcyB0b2tlbiBieSBjb252ZXJ0aW5nIHRoZSB0dXRvci10b2tlblxuICAvLyB0byBhbiBFRFMtIG9yIEdvb2dsZSB0b2tlbjpcbiAgLy9jb25zdCBlZHNCZWFyZXJQcm92aWRlciA9IGNyZWF0ZUJlYXJlclByb3ZpZGVyKHR1dG9yZWRLZWRCYWNrZW5kQ2xpZW50Lmh0dHAsIFwidHV0b3IvY29udmVydC10b2tlbi9lZHNcIik7XG4gIGNvbnN0IGdvb2dsZVRva2VuUHJvdmlkZXIgPSBjcmVhdGVCZWFyZXJQcm92aWRlcih0dXRvcmVkS2VkQmFja2VuZENsaWVudC5odHRwLCBcInR1dG9yL2NvbnZlcnQtdG9rZW4vZ29vZ2xlXCIpO1xuXG4gIGNvbnN0IGVkc0NsaWVudCA9IG5ldyBFZHNDbGllbnQoaXNvbW9ycGhpYywgY2ZnLkVEU19BUElfVVJMLCBiZWFyZXJQcm92aWRlciwgKCk9PnVzZXJFbWFpbCk7XG4gIFxuICBjb25zdCB0dXRvckVudjogRW52ID0ge1xuICAgIGN1cnJlbnRVc2VyLFxuICAgIGJlYXJlclByb3ZpZGVyLFxuICAgIGVkc0NsaWVudCxcbiAgICBnb29nbGVUb2tlblByb3ZpZGVyLFxuICAgIGtlZEJhY2tlbmRDbGllbnQ6IHR1dG9yZWRLZWRCYWNrZW5kQ2xpZW50LFxuICAgIHR1dG9yZWQ6IHRydWVcbiAgfTtcbiAgdHV0b3JFbnYua3NUZXJtUGxhbm5lclJlcG8gPSBuZXcgS1NUZXJtUGxhbm5lclJlcG8oKCk9PnR1dG9yZWRLZWRCYWNrZW5kQ2xpZW50LCAoKT0+Y3VycmVudFVzZXIpO1xuICB0dXRvckVudi5rZ1Rlcm1QbGFubmVyUmVwbyA9IG5ldyBLR1Rlcm1QbGFubmVyUmVwbygoKT0+dHV0b3JlZEtlZEJhY2tlbmRDbGllbnQsICgpPT5jdXJyZW50VXNlcik7XG4gIHR1dG9yRW52LnVzZXJUYXNrc1JlcG8gPSBuZXcgVXNlclRhc2tzUmVwbygoKT0+dHV0b3JlZEtlZEJhY2tlbmRDbGllbnQsICgpPT5jdXJyZW50VXNlcik7XG5cbiAgYXdhaXQgYmVhcmVyUHJvdmlkZXIuZ2V0QmVhcmVyKCkuY2F0Y2goZXJyb3IgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICB9KTtcblxuICByZXR1cm4gdHV0b3JFbnY7ICBcbn1cbiIsImltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcbmltcG9ydCB7IFRlcm0sIEFjYWRlbWljWWVhciB9IGZyb20gJy4uL2NvbnRyYWN0cy9rZWQtbW9kZWxzJztcblxuZXhwb3J0IGludGVyZmFjZSBTY2hvb2xNb21lbnQge1xuICBhY2FkZW1pY1llYXI6IEFjYWRlbWljWWVhcjtcbiAgdGVybTogVGVybTtcbiAgd2Vlaz86IG51bWJlcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZpcnN0QW5kTGFzdFdlZWtPZlRlcm0odGVybTogVGVybSkge1xuICByZXR1cm4gdGVybSA9PT0gJ0FUJyA/XG4gICAgWzMyLCA1MV0gOlxuICAgIFsxLCAyNV07XG59XG5cbi8vTm90IHVzZWQgYW55bW9yZVxuLy8gZXhwb3J0IGZ1bmN0aW9uIGdldFRlcm1TdGFydEFuZEVuZChub3c6IG1vbWVudC5Nb21lbnQpIDogbW9tZW50Lk1vbWVudFtdIHtcbi8vICAgICByZXR1cm4gbm93Lm1vbnRoKCkgPj0gNiA/IC8vIDYgPSBKdWx5IGluIEpTIERhdGVzIGFuZCBpbiBtb21lbnQgYXMgd2VsbCFcbi8vICAgICBbbW9tZW50KG5ldyBEYXRlKG5vdy55ZWFyKCksIDcsIDEpKSwgbW9tZW50KG5ldyBEYXRlKG5vdy55ZWFyKCksIDExLCAzMSkpXSA6IC8vIGF1ZzEgLSBkZWMzMVxuLy8gICAgIFttb21lbnQobmV3IERhdGUobm93LnllYXIoKSwgMCwgMSkpLCBtb21lbnQobmV3IERhdGUobm93LnllYXIoKSwgNiwgMzEpKV07IC8vIGphbjEgLSBqdWx5MzFcbi8vIH1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFRlcm1TdGFyRW5kRGF0ZShkYXRlOiBEYXRlLCBpc0ZpcnN0VGVybTogYm9vbGVhbik6IG1vbWVudC5Nb21lbnRbXSB7XG4gIHZhciBhZGRZZWFyID0gZGF0ZS5nZXRNb250aCgpID49IDc7XG4gIHZhciB0ZXJtWWVhciA9IG51bGw7XG5cbiAgaWYgKGFkZFllYXIpIHtcbiAgICB0ZXJtWWVhciA9IGlzRmlyc3RUZXJtID8gZGF0ZS5nZXRGdWxsWWVhcigpIDogZGF0ZS5nZXRGdWxsWWVhcigpICsgMTtcbiAgfSBlbHNlIHtcbiAgICB0ZXJtWWVhciA9IGlzRmlyc3RUZXJtID8gZGF0ZS5nZXRGdWxsWWVhcigpIC0gMSA6IGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgfVxuXG4gIHZhciB0ZXJtWWVhck1vbWVudCA9IG1vbWVudCh0ZXJtWWVhci50b1N0cmluZygpLCBcIllZWVlcIik7XG5cbiAgaWYgKHRlcm1ZZWFyTW9tZW50LndlZWsoKSAhPSAxKSB7XG4gICAgdGVybVllYXJNb21lbnQgPSB0ZXJtWWVhck1vbWVudC5jbG9uZSgpLmFkZCgxLCAnd2VlaycpO1xuICB9XG5cbiAgcmV0dXJuIGlzRmlyc3RUZXJtID8gW21vbWVudCh0ZXJtWWVhck1vbWVudC5jbG9uZSgpKS53ZWVrKDMyKS5zdGFydE9mKCd3ZWVrJyksIG1vbWVudCh0ZXJtWWVhck1vbWVudC5jbG9uZSgpKS53ZWVrKDUxKS5lbmRPZignd2VlaycpXSA6XG4gICAgW21vbWVudCh0ZXJtWWVhck1vbWVudC5jbG9uZSgpKSwgbW9tZW50KHRlcm1ZZWFyTW9tZW50LmNsb25lKCkpLndlZWsoMjUpLmVuZE9mKCd3ZWVrJyldO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2Nob29sTW9tZW50KG06IG1vbWVudC5Nb21lbnQpOiBTY2hvb2xNb21lbnQge1xuICBjb25zdCB0aGlzWWVhciA9IG0ueWVhcigpO1xuICBjb25zdCBpc0F1dHVtbiA9IG0ubW9udGgoKSA+PSA2OyAvLyBkZXRlcm1pbmUgXG4gIGNvbnN0IFthdXR1bW5ZZWFyLCBzcHJpbmdZZWFyXSA9IGlzQXV0dW1uID9cbiAgICBbdGhpc1llYXIsIHRoaXNZZWFyICsgMV0gOlxuICAgIFt0aGlzWWVhciAtIDEsIHRoaXNZZWFyXTtcbiAgY29uc3QgYWNhZGVtaWNZZWFyID0gJycgKyBhdXR1bW5ZZWFyICsgJy8nICsgc3ByaW5nWWVhcjtcbiAgY29uc3QgdGVybSA9IGlzQXV0dW1uID8gJ0FUJyA6ICdTVCc7XG4gIGNvbnN0IHdlZWsgPSBtLndlZWsoKTtcbiAgcmV0dXJuIHsgYWNhZGVtaWNZZWFyLCB0ZXJtLCB3ZWVrIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRZZWFyKGFZZWFyOiBBY2FkZW1pY1llYXIsIG51bVllYXJzVG9BZGQ6IG51bWJlcik6IEFjYWRlbWljWWVhciB7XG4gIHJldHVybiBhWWVhci5zcGxpdCgnLycpXG4gICAgLm1hcCh5ZWFyU3RyID0+IHBhcnNlSW50KHllYXJTdHIpICsgbnVtWWVhcnNUb0FkZClcbiAgICAubWFwKHllYXIgPT4gJycgKyB5ZWFyKVxuICAgIC5qb2luKCcvJyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBuZXh0QWNhZGVtaWNZZWFyKGFZZWFyOiBBY2FkZW1pY1llYXIpOiBBY2FkZW1pY1llYXIge1xuICByZXR1cm4gYWRkWWVhcihhWWVhciwgMSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwcmV2QWNhZGVtaWNZZWFyKGFZZWFyOiBBY2FkZW1pY1llYXIpOiBBY2FkZW1pY1llYXIge1xuICByZXR1cm4gYWRkWWVhcihhWWVhciwgLTEpO1xufVxuIiwiaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xuaW1wb3J0IHsgU2Nob29sTW9tZW50LCBnZXRTY2hvb2xNb21lbnQsIGFkZFllYXIgfSBmcm9tICcuL3NjaG9vbC1tb21lbnQnO1xuaW1wb3J0IHsgQWNhZGVtaWNZZWFyLCBUZXJtIH0gZnJvbSAnLi4vY29udHJhY3RzL2tlZC1tb2RlbHMnO1xuaW1wb3J0IHtJbmplY3RlZEludGx9IGZyb20gJ3JlYWN0LWludGwnO1xuXG50eXBlIE1vbWVudCA9IG1vbWVudC5Nb21lbnQ7XG5cbmZ1bmN0aW9uIGlzU2Nob29sTW9tZW50KG9iajogRGF0ZSB8IFNjaG9vbE1vbWVudCk6IG9iaiBpcyBTY2hvb2xNb21lbnQge1xuICByZXR1cm4gJ2FjYWRlbWljWWVhcicgaW4gb2JqO1xufVxuXG5leHBvcnQgY2xhc3MgU2Nob29sVGVybSB7XG4gIGFjYWRlbWljWWVhcjogQWNhZGVtaWNZZWFyO1xuICB0ZXJtOiBUZXJtO1xuXG4gIGNvbnN0cnVjdG9yKGRhdGVPclNjaG9vbE1vbWVudDogRGF0ZSB8IFNjaG9vbE1vbWVudCkge1xuICAgIGNvbnN0IHNjaG9vbE1vbWVudCA9IGlzU2Nob29sTW9tZW50KGRhdGVPclNjaG9vbE1vbWVudCkgP1xuICAgICAgZGF0ZU9yU2Nob29sTW9tZW50IDogZ2V0U2Nob29sTW9tZW50KG1vbWVudChkYXRlT3JTY2hvb2xNb21lbnQpKTtcbiAgICB0aGlzLmFjYWRlbWljWWVhciA9IHNjaG9vbE1vbWVudC5hY2FkZW1pY1llYXI7XG4gICAgdGhpcy50ZXJtID0gc2Nob29sTW9tZW50LnRlcm07XG4gIH1cblxuICBnZXQgeWVhcigpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5hY2FkZW1pY1llYXJcbiAgICAgICAgLnNwbGl0KCcvJylbdGhpcy50ZXJtID09PSAnQVQnID8gMCA6IDFdKTtcbiAgfVxuXG4gIG5leHRUZXJtKCkge1xuICAgIHJldHVybiBuZXcgU2Nob29sVGVybSh0aGlzLnRlcm0gPT09ICdBVCcgP1xuICAgICAge1xuICAgICAgICB0ZXJtOiAnU1QnLFxuICAgICAgICBhY2FkZW1pY1llYXI6IHRoaXMuYWNhZGVtaWNZZWFyXG4gICAgICB9IDpcbiAgICAgIHtcbiAgICAgICAgdGVybTogJ0FUJyxcbiAgICAgICAgYWNhZGVtaWNZZWFyOiBhZGRZZWFyKHRoaXMuYWNhZGVtaWNZZWFyLCAxKVxuICAgICAgfSk7XG4gIH1cblxuICBwcmV2VGVybSgpIHtcbiAgICByZXR1cm4gbmV3IFNjaG9vbFRlcm0odGhpcy50ZXJtID09PSAnQVQnID9cbiAgICAgIHtcbiAgICAgICAgdGVybTogJ1NUJyxcbiAgICAgICAgYWNhZGVtaWNZZWFyOiBhZGRZZWFyKHRoaXMuYWNhZGVtaWNZZWFyLCAtMSlcbiAgICAgIH0gOlxuICAgICAge1xuICAgICAgICB0ZXJtOiAnQVQnLFxuICAgICAgICBhY2FkZW1pY1llYXI6IHRoaXMuYWNhZGVtaWNZZWFyXG4gICAgICB9KTtcbiAgICBcbiAgfVxuXG4gIHRvTG9jYWxlU3RyaW5nKGludGw6IEluamVjdGVkSW50bCwgc2hvcnRZZWFyPzogYm9vbGVhbikge1xuICAgIGxldCB5ZWFyID0gdGhpcy50ZXJtID09PSAnQVQnID9cbiAgICAgIHRoaXMuYWNhZGVtaWNZZWFyLnNwbGl0KCcvJylbMF06XG4gICAgICB0aGlzLmFjYWRlbWljWWVhci5zcGxpdCgnLycpWzFdO1xuXG4gICAgaWYgKHNob3J0WWVhcilcbiAgICAgIHllYXIgPSB5ZWFyLnN1YnN0cigyKTtcblxuICAgIHJldHVybiB0aGlzLnRlcm0gPT09ICdBVCcgPyBpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOid0ZXJtcGxhbm5lci5zZWNvbmRUZXJtJywgZGVmYXVsdE1lc3NhZ2U6J0hUIHt5ZWFyfSd9LCB7eWVhcjogeWVhcn0pIDogXG4gICAgaW50bC5mb3JtYXRNZXNzYWdlKHtpZDondGVybXBsYW5uZXIuZmlyc3RUZXJtJywgZGVmYXVsdE1lc3NhZ2U6J1ZUIHt5ZWFyfSd9LCB7eWVhcjogeWVhcn0pO1xuICB9XG59XG4iLCJcbmV4cG9ydCBmdW5jdGlvbiBjYXBpdGFsaXplRmlyc3QgKHN0cikge1xuICAgIGZvciAobGV0IGk9MCwgbD1zdHIubGVuZ3RoOyBpPGw7ICsraSkge1xuICAgICAgICBpZiAoc3RyLmNoYXJDb2RlQXQoaSkgPCAweDIwMDApIHtcbiAgICAgICAgICAgIHJldHVybiBzdHIuc3Vic3RyKDAsIGkpICsgc3RyW2ldLnRvTG9jYWxlVXBwZXJDYXNlKCkgKyBzdHIuc3Vic3RyKGkgKyAxKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc3RyO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kKG9iaiwgZXh0ZW5zaW9uKSB7XG4gICAgaWYgKHR5cGVvZiBleHRlbnNpb24gIT09ICdvYmplY3QnKSByZXR1cm4gb2JqO1xuICAgIE9iamVjdC5rZXlzKGV4dGVuc2lvbikuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICBvYmpba2V5XSA9IGV4dGVuc2lvbltrZXldO1xuICAgIH0pO1xuICAgIHJldHVybiBvYmo7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZTxULEU+IChvYmogOiBULCBleHRlbnNpb24/OiBFKSB7XG4gICAgbGV0IGNsb25lID0ge307XG4gICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMob2JqKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjbG9uZSwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSk7XG4gICAgfSk7XG4gICAgaWYgKGV4dGVuc2lvbikgZXh0ZW5kKGNsb25lLCBleHRlbnNpb24pO1xuICAgIHJldHVybiBjbG9uZSBhcyAoVCAmIEUpO1xufVxuXG5jb25zdCBjb25jYXQgPSBbXS5jb25jYXQ7XG5leHBvcnQgZnVuY3Rpb24gZmxhdHRlbjxUPiAoYSA6IChUIHwgVFtdKVtdKSB7XG4gICAgcmV0dXJuIGNvbmNhdC5hcHBseShbXSwgYSkgYXMgVFtdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY29tcGFyZVByb3A8VD4ocHJvcDprZXlvZiBUKSB7XG4gICAgcmV0dXJuIChhOiBULGI6IFQpID0+IHtcbiAgICAgICAgY29uc3QgYVByb3AgPSBhW3Byb3BdLCBiUHJvcCA9IGJbcHJvcF07XG4gICAgICAgIHJldHVybiBhUHJvcCA+IGJQcm9wID8gMSA6IGFQcm9wIDwgYlByb3AgPyAtMSA6IDA7XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY29tcGFyZVByb3BzKFxuICAgIHByb3BzOiBzdHJpbmcgfCBzdHJpbmdbXSxcbiAgICBsb2NhbGVzPzogc3RyaW5nIHwgc3RyaW5nW10sXG4gICAgb3B0aW9ucz86IEludGwuQ29sbGF0b3JPcHRpb25zKTogKGE6IGFueSwgYjogYW55KSA9PiBudW1iZXJcbntcbiAgICBwcm9wcyA9IEFycmF5LmlzQXJyYXkocHJvcHMpID8gcHJvcHMgOiBbcHJvcHNdO1xuXG4gICAgY29uc3QgbG9jYWxlQ29tcGFyZSA9IChhLGIpID0+XG4gICAgICAgIHR5cGVvZiBhID09PSAnc3RyaW5nJyA/XG4gICAgICAgICAgICBhLmxvY2FsZUNvbXBhcmUoYiwgbG9jYWxlcywgb3B0aW9ucykgOlxuICAgICAgICAgICAgYSA8IGIgPyAtMSA6IGEgPiBiID8gMSA6IDA7XG5cbiAgICBmdW5jdGlvbiBjbXBQYXJ0IChhLGIsZmlyc3RQYXJ0OiBzdHJpbmcscmVzdDogc3RyaW5nW10pIHtcbiAgICAgICAgY29uc3QgZmlyc3RBID0gYVtmaXJzdFBhcnRdO1xuICAgICAgICBjb25zdCBmaXJzdEIgPSBiW2ZpcnN0UGFydF07XG4gICAgICAgIGlmIChmaXJzdEEgPT09IGZpcnN0QikgcmV0dXJuIDA7XG4gICAgICAgIGlmIChmaXJzdEEgPT0gbnVsbCkgcmV0dXJuIC0xO1xuICAgICAgICBpZiAoZmlyc3RCID09IG51bGwpIHJldHVybiAxO1xuICAgICAgICByZXR1cm4gcmVzdC5sZW5ndGggPT09IDAgP1xuICAgICAgICAgICAgbG9jYWxlQ29tcGFyZShmaXJzdEEsIGZpcnN0QikgOlxuICAgICAgICAgICAgY21wUGFydChmaXJzdEEsIGZpcnN0QiwgcmVzdFswXSwgcmVzdC5zbGljZSgxKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHByb3BzXG4gICAgICAgIC5tYXAocHJvcCA9PiBwcm9wLnNwbGl0KCcuJykpXG4gICAgICAgIC5tYXAoKFtmaXJzdFBhcnQsIC4uLnJlc3RdKSA9PiAoYSxiKSA9PiBjbXBQYXJ0KGEsYiwgZmlyc3RQYXJ0LCByZXN0KSlcbiAgICAgICAgLnJlZHVjZSgoY21wMSwgY21wMikgPT5cbiAgICAgICAgICAgIChhLGIpID0+IGNtcDEoYSxiKSB8fCBjbXAyKGEsYikpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gTCh0ZXh0LCAuLi5hcmdzKSB7XG4gICAgbGV0IGZpcnN0ID0gdGV4dFswXTtcbiAgICByZXR1cm4gYnVpbGRNZXNzYWdlKHRleHQsIGFyZ3MpO1xufVxuXG5mdW5jdGlvbiBidWlsZE1lc3NhZ2UgKHRleHQsIGFyZ3MpIHtcbiAgICBsZXQgcnYgPSB0ZXh0WzBdO1xuICAgIGZvciAobGV0IGk9MSwgbD10ZXh0Lmxlbmd0aDsgaTxsOyArK2kpIHtcbiAgICAgICAgcnYgKz0gYXJnc1tpLTFdICsgdGV4dFtpXTtcbiAgICB9XG4gICAgcmV0dXJuIHJ2O1xufVxuXG5leHBvcnQgY2xhc3MgVEM8VD4ge1xuICAgIGNvbnN0cnVjdG9yKHRlbXBsYXRlOiBUKSB7XG4gICAgICAgIGV4dGVuZCh0aGlzLCB0ZW1wbGF0ZSk7XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGF0ZVRpbWVSZXZpdmVyIChrZXksIHZhbHVlKSB7XG4gICAgdmFyIGE7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgYSA9IC9cXC9EYXRlXFwoKFxcZCopXFwpXFwvLy5leGVjKHZhbHVlKTtcbiAgICAgICAgaWYgKGEpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZSgrYVsxXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuXG4vL2xldCBpbmZvU2VyaWFsID0gMTtcbmV4cG9ydCBmdW5jdGlvbiBzaG93SW5mbyAobXNnKSB7XG4gICAgdmFyIGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdpbmZvJywgeyAnZGV0YWlsJzogbXNnIH0pO1xuICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNob3dFcnJvciAoZXJyTXNnOiBzdHJpbmcgfCBFcnJvcikge1xuICAgIGNvbnN0IG1zZyA9IHR5cGVvZiBlcnJNc2cgPT09ICdzdHJpbmcnID8gZXJyTXNnIDogZXJyTXNnLm1lc3NhZ2U7XG4gICAgdmFyIGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdjdXN0b21lcnJvcicsIHsgJ2RldGFpbCc6IG1zZyB9KTtcbiAgICBjb25zb2xlLmVycm9yKGVyck1zZyk7XG4gICAgd2luZG93LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbWF4TGVuZ3RoKHN0cjogc3RyaW5nLCBtYXhMZW46IG51bWJlcikge1xuICAgIHJldHVybiBzdHIubGVuZ3RoID4gbWF4TGVuID9cbiAgICAgICAgc3RyLnN1YnN0cigwLCBtYXhMZW4gLSAzKSArIFwiLi4uXCIgOlxuICAgICAgICBzdHI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhcnJheVRvTG9va3VwPFQ+KGE6IFRbXSwga2V5QWNjZXNzb3I6IChpdGVtOiBUKSA9PiBzdHJpbmcgfCBudW1iZXIpIHtcbiAgICBjb25zdCByZXN1bHQgOiB7W2tleTogc3RyaW5nXSA6IFRbXX0gPSB7fTtcbiAgICBmb3IgKGxldCBpPTAsIGw9YS5sZW5ndGg7IGk8bDsgKytpKSB7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSBhW2ldO1xuICAgICAgICBjb25zdCBrZXkgPSBrZXlBY2Nlc3NvcihpdGVtKTtcbiAgICAgICAgbGV0IGFycmF5ID0gcmVzdWx0W2tleV07XG4gICAgICAgIGlmIChhcnJheSkgYXJyYXkucHVzaChpdGVtKTtcbiAgICAgICAgZWxzZSByZXN1bHRba2V5XSA9IFtpdGVtXTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFycmF5VG9NYXA8VD4oYTogVFtdLCBrZXlBY2Nlc3NvcjogKGl0ZW06IFQpID0+IHN0cmluZyB8IG51bWJlcikge1xuICAgIGNvbnN0IHJlc3VsdCA6IHtba2V5OiBzdHJpbmddIDogVH0gPSB7fTtcbiAgICBmb3IgKGxldCBpPTAsIGw9YS5sZW5ndGg7IGk8bDsgKytpKSB7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSBhW2ldO1xuICAgICAgICBjb25zdCBrZXkgPSBrZXlBY2Nlc3NvcihpdGVtKTtcbiAgICAgICAgcmVzdWx0W2tleV0gPSBpdGVtO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2hlcnJ5UGlja1Byb3BzPFQ+IChvYmo6IFQsIHByb3BzVG9QaWNrOiBzdHJpbmdbXSk6IFBhcnRpYWw8VD4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGZvciAoY29uc3QgcGFyYW0gb2YgcHJvcHNUb1BpY2spIHtcbiAgICAgIGlmIChwYXJhbSBpbiBvYmopIHJlc3VsdFtwYXJhbV0gPSBvYmpbcGFyYW1dO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0IGFzIFBhcnRpYWw8VD47XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkaXN0aW5jdDxUPiAoYTogVFtdLCBrZXlBY2Nlc3Nvcj86IChpdGVtOiBUKSA9PiBhbnkpIHtcbiAgICBjb25zdCBtYXAgPSBhcnJheVRvTWFwKGEsIGtleUFjY2Vzc29yIHx8ICh4ID0+IHgpKTtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMobWFwKS5tYXAoa2V5ID0+IG1hcFtrZXldKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoYWxsb3dFcXVhbHMoYTogYW55LCBiOiBhbnkpIHtcbiAgICBpZiAoYSA9PT0gYikgcmV0dXJuIHRydWU7XG4gICAgaWYgKCFhIHx8ICFiKSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKHR5cGVvZiBhICE9PSAnb2JqZWN0JyB8fCB0eXBlb2YgYiAhPT0gJ29iamVjdCcpIHJldHVybiBmYWxzZTtcbiAgICBjb25zdCBrZXlzQSA9IE9iamVjdC5rZXlzKGEpO1xuICAgIGNvbnN0IGtleXNCID0gT2JqZWN0LmtleXMoYik7XG4gICAgaWYgKGtleXNBLmxlbmd0aCAhPT0ga2V5c0IubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gICAgZm9yIChsZXQgaT0wLCBsPWtleXNBLmxlbmd0aDsgaTxsOyArK2kpIHtcbiAgICAgICAgY29uc3Qga2V5ID0ga2V5c0FbaV07XG4gICAgICAgIGlmIChrZXlzQltpXSAhPT0ga2V5KSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChhW2tleV0gIT09IGJba2V5XSkgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbiIsImltcG9ydCBtb21lbnQsIHsgTW9tZW50IH0gZnJvbSBcIm1vbWVudFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gS0VEV2VlayAoeWVhcjogbnVtYmVyLCB3ZWVrOiBudW1iZXIpIHtcbiAgY29uc3QgbSA9IG1vbWVudChuZXcgRGF0ZSh5ZWFyLCAxLCAxKSkud2Vlayh3ZWVrKTtcbiAgY29uc3QgcmVzID0ge1xuICAgIHllYXIsXG4gICAgd2VlayxcbiAgICBub3RCZWZvcmU6IG0uY2xvbmUoKS5zdGFydE9mKCd3ZWVrJykuYWRkKC0yLCAnZGF5cycpLnRvRGF0ZSgpLmdldFRpbWUoKSxcbiAgICBub3RBZnRlcjogbS5jbG9uZSgpLnN0YXJ0T2YoJ3dlZWsnKS5hZGQoNSwgJ2RheXMnKS50b0RhdGUoKS5nZXRUaW1lKClcbiAgfTtcbiAgcmV0dXJuIHJlcztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE5leHRXZWVrRGF0ZShkYXRlOiBNb21lbnQpOiB7IGFkanVzdGVkOiBib29sZWFuLCBuZXh0RGF0ZTogRGF0ZSB9e1xuICB2YXIgbmV4dERhdGUgPSBtb21lbnQoZGF0ZSkuYWRkKDEsICd3ZWVrJyk7XG4gIC8vU2V0IHRoZSAwMS4wMSBvZiB0aGUgbmV4dCB5ZWFyIGluIGNhc2UgdGhlIG5leHQgd2VlayBpcyBpbiB0aGUgc2FtZSB5ZWFyIFxuICAvL2FuZCB0aGUgcHJldmlvdXMgd2VlayBpcyB0aGUgbGFzdCB3ZWVrIG9mIHRoZSB5ZWFyXG4gIGlmKGRhdGUud2VlaygpID09PSBkYXRlLndlZWtzSW5ZZWFyKCkgJiYgbmV4dERhdGUueWVhcigpID09PSBkYXRlLnllYXIoKSl7XG4gICAgcmV0dXJuIHthZGp1c3RlZDogdHJ1ZSwgbmV4dERhdGU6IG1vbWVudChgJHtkYXRlLnllYXIoKSArIDF9LTAxLTAxYCkudG9EYXRlKCl9O1xuICB9XG5cbiAgcmV0dXJuIHthZGp1c3RlZDogZmFsc2UsIG5leHREYXRlOiBuZXh0RGF0ZS50b0RhdGUoKX07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQcmV2V2Vla0RhdGUoZGF0ZTogTW9tZW50KTogeyBhZGp1c3RlZDogYm9vbGVhbiwgbmV4dERhdGU6IERhdGUgfXtcbiAgdmFyIHByZXZEYXRlID0gbW9tZW50KGRhdGUpLmFkZCgtMSwgJ3dlZWsnKTtcbiAgLy9TZXQgdGhlIDAxLjAxIG9mIHRoZSBjdXJyZW50IHllYXIgaW4gY2FzZSB0aGUgcHJldiB3ZWVrIGlzIGluIHRoZSBwcmV2aW91cyB5ZWFyXG4gIGlmKGRhdGUud2VlaygpID09PSAyICYmIHByZXZEYXRlLnllYXIoKSAhPT0gZGF0ZS55ZWFyKCkpe1xuICAgIHJldHVybiB7YWRqdXN0ZWQ6IHRydWUsIG5leHREYXRlOiBtb21lbnQoYCR7ZGF0ZS55ZWFyKCl9LTAxLTAxYCkudG9EYXRlKCl9O1xuICB9XG5cbiAgcmV0dXJuIHthZGp1c3RlZDogZmFsc2UsIG5leHREYXRlOiBwcmV2RGF0ZS50b0RhdGUoKX07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRBZGp1c3RlZFdlZWsobTogTW9tZW50KSB7XG4gIGNvbnN0IGNsb25lID0gbS5jbG9uZSgpO1xuICByZXR1cm4gbS53ZWVrZGF5KCkgPj0gNSA/IC8vIEzDtnJkYWcgMDA6MDAgLyBTw7ZuZGFnIDAwOjAwP1xuICAgICAgbS53ZWVrKCkgKyAxIDogLy8gVGlsbGjDtnIgbsOkc3RhIHZlY2thXG4gICAgICBtLndlZWsoKTtcbn1cblxuLypleHBvcnQgZnVuY3Rpb24gZ2V0V2Vla0xpbWl0cyAobTogTW9tZW50KSB7XG4gIGNvbnN0IGNsb25lZFN3ZWRpc2ggPSBtLmNsb25lKCkubG9jYWxlKCdzdicpO1xuICBjb25zdCBsaW1pdHMgPSB7XG4gICAgbm90QmVmb3JlOiBjbG9uZWRTd2VkaXNoLnN0YXJ0T2YoJ3dlZWsnKS5hZGQoLTIsICdkYXlzJyksXG4gICAgbm90QWZ0ZXI6IGNsb25lZFN3ZWRpc2guc3RhcnRPZignd2VlaycpLmFkZCg1LCAnZGF5cycpXG4gIH07XG59XG4qL1xuIiwiLyogKGlnbm9yZWQpICovIiwiLyogKGlnbm9yZWQpICovIiwiLyogKGlnbm9yZWQpICovIiwibW9kdWxlLmV4cG9ydHMgPSBqUXVlcnk7IiwibW9kdWxlLmV4cG9ydHMgPSBSZWFjdDsiLCJtb2R1bGUuZXhwb3J0cyA9IFJlYWN0RE9NOyJdLCJzb3VyY2VSb290IjoiIn0=